function D(t){t.directive("intersect",t.skipDuringClone((r,{value:a,expression:n,modifiers:e},{evaluateLater:l,cleanup:c})=>{let u=l(n),d={rootMargin:I(e),threshold:M(e)},i=new IntersectionObserver(g=>{g.forEach(s=>{s.isIntersecting!==(a==="leave")&&(u(),e.includes("once")&&i.disconnect())})},d);i.observe(r),c(()=>{i.disconnect()})}))}function M(t){if(t.includes("full"))return .99;if(t.includes("half"))return .5;if(!t.includes("threshold"))return 0;let r=t[t.indexOf("threshold")+1];return r==="100"?1:r==="0"?0:+`.${r}`}function O(t){let r=t.match(/^(-?[0-9]+)(px|%)?$/);return r?r[1]+(r[2]||"px"):void 0}function I(t){const r="margin",a="0px 0px 0px 0px",n=t.indexOf(r);if(n===-1)return a;let e=[];for(let l=1;l<5;l++)e.push(O(t[n+l]||""));return e=e.filter(l=>l!==void 0),e.length?e.join(" ").trim():a}var j=D;function w(t,r,a){A();let n=v(a),e=typeof r=="string"?V(r):r;return window.Alpine&&window.Alpine.closestDataStack&&!t._x_dataStack&&(e._x_dataStack=window.Alpine.closestDataStack(t),e._x_dataStack&&window.Alpine.cloneNode(t,e)),n.patch(t,e),t}function L(t,r,a,n={}){A();let e=v(n),l=t.parentNode,c=new y(t,r),u=typeof a=="string"?(()=>{let s=document.createElement("div");return s.insertAdjacentHTML("beforeend",a),s})():a,d=document.createComment("[morph-start]"),i=document.createComment("[morph-end]");u.insertBefore(d,u.firstChild),u.appendChild(i);let g=new y(d,i);window.Alpine&&window.Alpine.closestDataStack&&(u._x_dataStack=window.Alpine.closestDataStack(l),u._x_dataStack&&window.Alpine.cloneNode(l,u)),e.patchChildren(c,g)}function v(t={}){let r=e=>e.getAttribute("key"),a=()=>{},n={key:t.key||r,lookahead:t.lookahead||!1,updating:t.updating||a,updated:t.updated||a,removing:t.removing||a,removed:t.removed||a,adding:t.adding||a,added:t.added||a};return n.patch=function(e,l){if(n.differentElementNamesTypesOrKeys(e,l))return n.swapElements(e,l);let c=!1,u=!1,d=i=>n.skipUntilCondition=i;if(!U(n.updating,()=>u=!0,d,e,l,()=>c=!0)){if(e.nodeType===1&&window.Alpine&&(window.Alpine.cloneNode(e,l),e._x_teleport&&l._x_teleport&&n.patch(e._x_teleport,l._x_teleport)),$(l)){n.patchNodeValue(e,l),n.updated(e,l);return}c||n.patchAttributes(e,l),n.updated(e,l),u||n.patchChildren(e,l)}},n.differentElementNamesTypesOrKeys=function(e,l){return e.nodeType!=l.nodeType||e.nodeName!=l.nodeName||n.getKey(e)!=n.getKey(l)},n.swapElements=function(e,l){if(x(n.removing,e))return;let c=l.cloneNode(!0);x(n.adding,c)||(e.replaceWith(c),n.removed(e),n.added(c))},n.patchNodeValue=function(e,l){let c=l.nodeValue;e.nodeValue!==c&&(e.nodeValue=c)},n.patchAttributes=function(e,l){if(e._x_transitioning||e._x_isShown&&!l._x_isShown||!e._x_isShown&&l._x_isShown)return;let c=Array.from(e.attributes),u=Array.from(l.attributes);for(let d=c.length-1;d>=0;d--){let i=c[d].name;l.hasAttribute(i)||e.removeAttribute(i)}for(let d=u.length-1;d>=0;d--){let i=u[d].name,g=u[d].value;e.getAttribute(i)!==g&&e.setAttribute(i,g)}},n.patchChildren=function(e,l){let c=n.keyToMap(e.children),u={},d=_(l),i=_(e);for(;d;){F(d,i);let s=n.getKey(d),h=n.getKey(i);if(n.skipUntilCondition){let o=!i||n.skipUntilCondition(i),m=!d||n.skipUntilCondition(d);if(o&&m)n.skipUntilCondition=null;else{o||(i=i&&f(e,i)),m||(d=d&&f(l,d));continue}}if(!i)if(s&&u[s]){let o=u[s];e.appendChild(o),i=o,h=n.getKey(i)}else{if(!x(n.adding,d)){let o=d.cloneNode(!0);e.appendChild(o),n.added(o)}d=f(l,d);continue}let k=o=>o&&o.nodeType===8&&o.textContent==="[if BLOCK]><![endif]",C=o=>o&&o.nodeType===8&&o.textContent==="[if ENDBLOCK]><![endif]";if(k(d)&&k(i)){let o=0,m=i;for(;i;){let p=f(e,i);if(k(p))o++;else if(C(p)&&o>0)o--;else if(C(p)&&o===0){i=p;break}i=p}let S=i;o=0;let E=d;for(;d;){let p=f(l,d);if(k(p))o++;else if(C(p)&&o>0)o--;else if(C(p)&&o===0){d=p;break}d=p}let K=d,T=new y(m,S),B=new y(E,K);n.patchChildren(T,B);continue}if(i.nodeType===1&&n.lookahead&&!i.isEqualNode(d)){let o=f(l,d),m=!1;for(;!m&&o;)o.nodeType===1&&i.isEqualNode(o)&&(m=!0,i=n.addNodeBefore(e,d,i),h=n.getKey(i)),o=f(l,o)}if(s!==h){if(!s&&h){u[h]=i,i=n.addNodeBefore(e,d,i),u[h].remove(),i=f(e,i),d=f(l,d);continue}if(s&&!h&&c[s]&&(i.replaceWith(c[s]),i=c[s],h=n.getKey(i)),s&&h){let o=c[s];if(o)u[h]=i,i.replaceWith(o),i=o,h=n.getKey(i);else{u[h]=i,i=n.addNodeBefore(e,d,i),u[h].remove(),i=f(e,i),d=f(l,d);continue}}}let N=i&&f(e,i);n.patch(i,d),d=d&&f(l,d),i=N}let g=[];for(;i;)x(n.removing,i)||g.push(i),i=f(e,i);for(;g.length;){let s=g.shift();s.remove(),n.removed(s)}},n.getKey=function(e){return e&&e.nodeType===1&&n.key(e)},n.keyToMap=function(e){let l={};for(let c of e){let u=n.getKey(c);u&&(l[u]=c)}return l},n.addNodeBefore=function(e,l,c){if(!x(n.adding,l)){let u=l.cloneNode(!0);return e.insertBefore(u,c),n.added(u),u}return l},n}w.step=()=>{};w.log=()=>{};function x(t,...r){let a=!1;return t(...r,()=>a=!0),a}function U(t,r,a,...n){let e=!1;return t(...n,()=>e=!0,r,a),e}var b=!1;function V(t){const r=document.createElement("template");return r.innerHTML=t,r.content.firstElementChild}function $(t){return t.nodeType===3||t.nodeType===8}var y=class{constructor(t,r){this.startComment=t,this.endComment=r}get children(){let t=[],r=this.startComment.nextSibling;for(;r&&r!==this.endComment;)t.push(r),r=r.nextSibling;return t}appendChild(t){this.endComment.before(t)}get firstChild(){let t=this.startComment.nextSibling;if(t!==this.endComment)return t}nextNode(t){let r=t.nextSibling;if(r!==this.endComment)return r}insertBefore(t,r){return r.before(t),t}};function _(t){return t.firstChild}function f(t,r){let a;return t instanceof y?a=t.nextNode(r):a=r.nextSibling,a}function A(){if(b)return;b=!0;let t=Element.prototype.setAttribute,r=document.createElement("div");Element.prototype.setAttribute=function(n,e){if(!n.includes("@"))return t.call(this,n,e);r.innerHTML=`<span ${n}="${e}"></span>`;let l=r.firstElementChild.getAttributeNode(n);r.firstElementChild.removeAttributeNode(l),this.setAttributeNode(l)}}function F(t,r){let a=r&&r._x_bindings&&r._x_bindings.id;a&&t.setAttribute&&(t.setAttribute("id",a),t.id=a)}function W(t){t.morph=w,t.morphBetween=L}var q=W;export{q as a,j as m};
