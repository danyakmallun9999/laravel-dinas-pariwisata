import{g as mT,c as Jn,L as ER}from"./leaflet-src-eHmD5uJa.js";function MR(s,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in s)){const a=Object.getOwnPropertyDescriptor(i,n);a&&Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var d_={exports:{}};var IR=d_.exports,ok;function PR(){return ok||(ok=1,(function(s,e){(function(t,i){s.exports=i()})(IR,(function(){var t={},i={};function n(o,r,d){if(i[o]=d,o==="index"){var g="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",x={};return i.shared(x),i.index(t,x),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),t}}n("shared",["exports"],(function(o){function r(u,l,h,m){return new(h||(h=Promise))((function(b,C){function A(U){try{B(m.next(U))}catch(Y){C(Y)}}function D(U){try{B(m.throw(U))}catch(Y){C(Y)}}function B(U){var Y;U.done?b(U.value):(Y=U.value,Y instanceof h?Y:new h((function(Q){Q(Y)}))).then(A,D)}B((m=m.apply(u,l||[])).next())}))}function d(u,l){this.x=u,this.y=l}function g(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var x,v;typeof SuppressedError=="function"&&SuppressedError,d.prototype={clone(){return new d(this.x,this.y)},add(u){return this.clone()._add(u)},sub(u){return this.clone()._sub(u)},multByPoint(u){return this.clone()._multByPoint(u)},divByPoint(u){return this.clone()._divByPoint(u)},mult(u){return this.clone()._mult(u)},div(u){return this.clone()._div(u)},rotate(u){return this.clone()._rotate(u)},rotateAround(u,l){return this.clone()._rotateAround(u,l)},matMult(u){return this.clone()._matMult(u)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(u){return this.x===u.x&&this.y===u.y},dist(u){return Math.sqrt(this.distSqr(u))},distSqr(u){const l=u.x-this.x,h=u.y-this.y;return l*l+h*h},angle(){return Math.atan2(this.y,this.x)},angleTo(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith(u){return this.angleWithSep(u.x,u.y)},angleWithSep(u,l){return Math.atan2(this.x*l-this.y*u,this.x*u+this.y*l)},_matMult(u){const l=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=l,this},_add(u){return this.x+=u.x,this.y+=u.y,this},_sub(u){return this.x-=u.x,this.y-=u.y,this},_mult(u){return this.x*=u,this.y*=u,this},_div(u){return this.x/=u,this.y/=u,this},_multByPoint(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint(u){return this.x/=u.x,this.y/=u.y,this},_unit(){return this._div(this.mag()),this},_perp(){const u=this.y;return this.y=this.x,this.x=-u,this},_rotate(u){const l=Math.cos(u),h=Math.sin(u),m=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=m,this},_rotateAround(u,l){const h=Math.cos(u),m=Math.sin(u),b=l.y+m*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-m*(this.y-l.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:d},d.convert=function(u){if(u instanceof d)return u;if(Array.isArray(u))return new d(+u[0],+u[1]);if(u.x!==void 0&&u.y!==void 0)return new d(+u.x,+u.y);throw new Error("Expected [x, y] or {x, y} point format")};var k=(function(){if(v)return x;function u(l,h,m,b){this.cx=3*l,this.bx=3*(m-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(b-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=h,this.p2x=m,this.p2y=b}return v=1,x=u,u.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,h){if(h===void 0&&(h=1e-6),l<0)return 0;if(l>1)return 1;for(var m=l,b=0;b<8;b++){var C=this.sampleCurveX(m)-l;if(Math.abs(C)<h)return m;var A=this.sampleCurveDerivativeX(m);if(Math.abs(A)<1e-6)break;m-=C/A}var D=0,B=1;for(m=l,b=0;b<20&&(C=this.sampleCurveX(m),!(Math.abs(C-l)<h));b++)l>C?D=m:B=m,m=.5*(B-D)+D;return m},solve:function(l,h){return this.sampleCurveY(this.solveCurveX(l,h))}},x})(),E=g(k);let F,O;function N(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function $(){if(O==null&&(O=!1,N())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<25;m++){const b=4*m;l.fillStyle=`rgb(${b},${b+1},${b+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}const h=l.getImageData(0,0,5,5).data;for(let m=0;m<100;m++)if(m%4!=3&&h[m]!==m){O=!0;break}}}return O||!1}var X=1e-6,K=typeof Float32Array<"u"?Float32Array:Array;function ie(){var u=new K(9);return K!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function ee(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function le(){var u=new K(3);return K!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function te(u){var l=u[0],h=u[1],m=u[2];return Math.sqrt(l*l+h*h+m*m)}function he(u,l,h){var m=new K(3);return m[0]=u,m[1]=l,m[2]=h,m}function de(u,l,h){return u[0]=l[0]+h[0],u[1]=l[1]+h[1],u[2]=l[2]+h[2],u}function ke(u,l,h){return u[0]=l[0]*h,u[1]=l[1]*h,u[2]=l[2]*h,u}function De(u,l,h){var m=l[0],b=l[1],C=l[2],A=h[0],D=h[1],B=h[2];return u[0]=b*B-C*D,u[1]=C*A-m*B,u[2]=m*D-b*A,u}var Ae,$e=te;function et(u,l,h){var m=l[0],b=l[1],C=l[2],A=l[3];return u[0]=h[0]*m+h[4]*b+h[8]*C+h[12]*A,u[1]=h[1]*m+h[5]*b+h[9]*C+h[13]*A,u[2]=h[2]*m+h[6]*b+h[10]*C+h[14]*A,u[3]=h[3]*m+h[7]*b+h[11]*C+h[15]*A,u}function Ie(){var u=new K(4);return K!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function at(u,l,h,m){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",C=Math.PI/360;l*=C,m*=C,h*=C;var A=Math.sin(l),D=Math.cos(l),B=Math.sin(h),U=Math.cos(h),Y=Math.sin(m),Q=Math.cos(m);switch(b){case"xyz":u[0]=A*U*Q+D*B*Y,u[1]=D*B*Q-A*U*Y,u[2]=D*U*Y+A*B*Q,u[3]=D*U*Q-A*B*Y;break;case"xzy":u[0]=A*U*Q-D*B*Y,u[1]=D*B*Q-A*U*Y,u[2]=D*U*Y+A*B*Q,u[3]=D*U*Q+A*B*Y;break;case"yxz":u[0]=A*U*Q+D*B*Y,u[1]=D*B*Q-A*U*Y,u[2]=D*U*Y-A*B*Q,u[3]=D*U*Q+A*B*Y;break;case"yzx":u[0]=A*U*Q+D*B*Y,u[1]=D*B*Q+A*U*Y,u[2]=D*U*Y-A*B*Q,u[3]=D*U*Q-A*B*Y;break;case"zxy":u[0]=A*U*Q-D*B*Y,u[1]=D*B*Q+A*U*Y,u[2]=D*U*Y+A*B*Q,u[3]=D*U*Q-A*B*Y;break;case"zyx":u[0]=A*U*Q-D*B*Y,u[1]=D*B*Q+A*U*Y,u[2]=D*U*Y-A*B*Q,u[3]=D*U*Q+A*B*Y;break;default:throw new Error("Unknown angle order "+b)}return u}function qe(){var u=new K(2);return K!=Float32Array&&(u[0]=0,u[1]=0),u}function kt(u,l){var h=new K(2);return h[0]=u,h[1]=l,h}le(),Ae=new K(4),K!=Float32Array&&(Ae[0]=0,Ae[1]=0,Ae[2]=0,Ae[3]=0),le(),he(1,0,0),he(0,1,0),Ie(),Ie(),ie(),qe();const vt=8192;function He(u,l,h){return l*(vt/(u.tileSize*Math.pow(2,h-u.tileID.overscaledZ)))}function Nt(u,l){return(u%l+l)%l}function Qt(u,l,h){return u*(1-h)+l*h}function Ai(u){if(u<=0)return 0;if(u>=1)return 1;const l=u*u,h=l*u;return 4*(u<.5?h:3*(u-l)+h-.75)}function jt(u,l,h,m){const b=new E(u,l,h,m);return C=>b.solve(C)}const ui=jt(.25,.1,.25,1);function Ct(u,l,h){return Math.min(h,Math.max(l,u))}function ri(u,l,h){const m=h-l,b=((u-l)%m+m)%m+l;return b===l?h:b}function Zt(u,...l){for(const h of l)for(const m in h)u[m]=h[m];return u}let Pi=1;function Fi(u,l,h){const m={};for(const b in u)m[b]=l.call(this,u[b],b,u);return m}function Li(u,l,h){const m={};for(const b in u)l.call(this,u[b],b,u)&&(m[b]=u[b]);return m}function en(u){return Array.isArray(u)?u.map(en):typeof u=="object"&&u?Fi(u,en):u}const qt={};function Ti(u){qt[u]||(typeof console<"u"&&console.warn(u),qt[u]=!0)}function tn(u,l,h){return(h.y-u.y)*(l.x-u.x)>(l.y-u.y)*(h.x-u.x)}function Bn(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let st=null;function ji(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const Bi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Qa(u,l,h,m,b){return r(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const C=new VideoFrame(u,{timestamp:0});try{const A=C?.format;if(!A||!A.startsWith("BGR")&&!A.startsWith("RGB"))throw new Error(`Unrecognized format ${A}`);const D=A.startsWith("BGR"),B=new Uint8ClampedArray(m*b*4);if(yield C.copyTo(B,(function(U,Y,Q,ne,ae){const ce=4*Math.max(-Y,0),ue=(Math.max(0,Q)-Q)*ne*4+ce,pe=4*ne,ve=Math.max(0,Y),ze=Math.max(0,Q);return{rect:{x:ve,y:ze,width:Math.min(U.width,Y+ne)-ve,height:Math.min(U.height,Q+ae)-ze},layout:[{offset:ue,stride:pe}]}})(u,l,h,m,b)),D)for(let U=0;U<B.length;U+=4){const Y=B[U];B[U]=B[U+2],B[U+2]=Y}return B}finally{C.close()}}))}let Gt,la;function vr(u,l,h,m){return u.addEventListener(l,h,m),{unsubscribe:()=>{u.removeEventListener(l,h,m)}}}function va(u){return u*Math.PI/180}function un(u){return u/Math.PI*180}const tt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},_e={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},xe="AbortError";class be extends Error{constructor(l=xe){super(l instanceof Error?l.message:l),this.name=xe,l instanceof Error&&l.stack&&(this.stack=l.stack)}}function je(u){return u.name===xe}const We={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function it(u){return We.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const Qe="global-dispatcher";class Pe extends Error{constructor(l,h,m,b){super(`AJAXError: ${h} (${l}): ${m}`),this.status=l,this.statusText=h,this.url=m,this.body=b}}const nt=()=>Bn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,mt=function(u,l){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const m=it(u.url);if(m)return m(u,l);if(Bn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:Qe},l)}if(!(/^file:/.test(h=u.url)||/^file:/.test(nt())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(m,b){return r(this,void 0,void 0,(function*(){const C=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:nt(),signal:b.signal});let A,D;m.type!=="json"||C.headers.has("Accept")||C.headers.set("Accept","application/json");try{A=yield fetch(C)}catch(U){throw je(U)?U:new Pe(0,U.message,m.url,new Blob)}if(!A.ok){const U=yield A.blob();throw new Pe(A.status,A.statusText,m.url,U)}D=m.type==="arrayBuffer"||m.type==="image"?A.arrayBuffer():m.type==="json"?A.json():A.text();const B=yield D;return b.signal.throwIfAborted(),{data:B,cacheControl:A.headers.get("Cache-Control"),expires:A.headers.get("Expires")}}))})(u,l);if(Bn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:Qe},l)}var h;return(function(m,b){return new Promise(((C,A)=>{var D;const B=new XMLHttpRequest;B.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(B.responseType="arraybuffer");for(const U in m.headers)B.setRequestHeader(U,m.headers[U]);m.type==="json"&&(B.responseType="text",!((D=m.headers)===null||D===void 0)&&D.Accept||B.setRequestHeader("Accept","application/json")),B.withCredentials=m.credentials==="include",B.onerror=()=>{A(new Error(B.statusText))},B.onload=()=>{if(!b.signal.aborted)if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){let U=B.response;if(m.type==="json")try{U=JSON.parse(B.response)}catch(Y){return void A(Y)}C({data:U,cacheControl:B.getResponseHeader("Cache-Control"),expires:B.getResponseHeader("Expires")})}else{const U=new Blob([B.response],{type:B.getResponseHeader("Content-Type")});A(new Pe(B.status,B.statusText,m.url,U))}},b.signal.addEventListener("abort",(()=>{B.abort(),A(new be(b.signal.reason))})),B.send(m.body)}))})(u,l)};function pt(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const l=new URL(u),h=window.location;return l.protocol===h.protocol&&l.host===h.host}function Vt(u,l,h){h[u]&&h[u].indexOf(l)!==-1||(h[u]=h[u]||[],h[u].push(l))}function Pt(u,l,h){if(h&&h[u]){const m=h[u].indexOf(l);m!==-1&&h[u].splice(m,1)}}class wi{constructor(l,h={}){Zt(this,h),this.type=l}}class si extends wi{constructor(l,h={}){super("error",Zt({error:l},h))}}class Oi{on(l,h){return this._listeners=this._listeners||{},Vt(l,h,this._listeners),{unsubscribe:()=>{this.off(l,h)}}}off(l,h){return Pt(l,h,this._listeners),Pt(l,h,this._oneTimeListeners),this}once(l,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Vt(l,h,this._oneTimeListeners),this):new Promise((m=>this.once(l,m)))}fire(l,h){typeof l=="string"&&(l=new wi(l,h||{}));const m=l.type;if(this.listens(m)){l.target=this;const b=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const D of b)D.call(this,l);const C=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const D of C)Pt(m,D,this._oneTimeListeners),D.call(this,l);const A=this._eventedParent;A&&(Zt(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(l))}else l instanceof si&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,h){return this._eventedParent=l,this._eventedParentData=h,this}}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const an=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function pn(u,l){const h={};for(const m in u)m!=="ref"&&(h[m]=u[m]);return an.forEach((m=>{m in l&&(h[m]=l[m])})),h}function yi(u,l){if(Array.isArray(u)){if(!Array.isArray(l)||u.length!==l.length)return!1;for(let h=0;h<u.length;h++)if(!yi(u[h],l[h]))return!1;return!0}if(typeof u=="object"&&u!==null&&l!==null){if(typeof l!="object"||Object.keys(u).length!==Object.keys(l).length)return!1;for(const h in u)if(!yi(u[h],l[h]))return!1;return!0}return u===l}function zi(u,l){u.push(l)}function di(u,l,h){zi(h,{command:"addSource",args:[u,l[u]]})}function Jt(u,l,h){zi(l,{command:"removeSource",args:[u]}),h[u]=!0}function fi(u,l,h,m){Jt(u,h,m),di(u,l,h)}function Rt(u,l,h){let m;for(m in u[h])if(Object.prototype.hasOwnProperty.call(u[h],m)&&m!=="data"&&!yi(u[h][m],l[h][m]))return!1;for(m in l[h])if(Object.prototype.hasOwnProperty.call(l[h],m)&&m!=="data"&&!yi(u[h][m],l[h][m]))return!1;return!0}function oi(u,l,h,m,b,C){u=u||{},l=l||{};for(const A in u)Object.prototype.hasOwnProperty.call(u,A)&&(yi(u[A],l[A])||h.push({command:C,args:[m,A,l[A],b]}));for(const A in l)Object.prototype.hasOwnProperty.call(l,A)&&!Object.prototype.hasOwnProperty.call(u,A)&&(yi(u[A],l[A])||h.push({command:C,args:[m,A,l[A],b]}))}function bi(u){return u.id}function _i(u,l){return u[l.id]=l,u}class St{constructor(l,h,m,b){this.message=(l?`${l}: `:"")+m,b&&(this.identifier=b),h!=null&&h.__line__&&(this.line=h.__line__)}}function xi(u,...l){for(const h of l)for(const m in h)u[m]=h[m];return u}class Dt extends Error{constructor(l,h){super(h),this.message=h,this.key=l}}class Xn{constructor(l,h=[]){this.parent=l,this.bindings={};for(const[m,b]of h)this.bindings[m]=b}concat(l){return new Xn(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const rn={kind:"null"},At={kind:"number"},ii={kind:"string"},Si={kind:"boolean"},Xi={kind:"color"},Hn={kind:"projectionDefinition"},Oa={kind:"object"},gi={kind:"value"},wn={kind:"collator"},cn={kind:"formatted"},dn={kind:"padding"},us={kind:"colorArray"},Ln={kind:"numberArray"},Nn={kind:"resolvedImage"},Tt={kind:"variableAnchorOffsetCollection"};function Ga(u,l){return{kind:"array",itemType:u,N:l}}function Mi(u){if(u.kind==="array"){const l=Mi(u.itemType);return typeof u.N=="number"?`array<${l}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${l}>`}return u.kind}const Dr=[rn,At,ii,Si,Xi,Hn,cn,Oa,Ga(gi),dn,Ln,us,Nn,Tt];function lr(u,l){if(l.kind==="error")return null;if(u.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!lr(u.itemType,l.itemType))&&(typeof u.N!="number"||u.N===l.N))return null}else{if(u.kind===l.kind)return null;if(u.kind==="value"){for(const h of Dr)if(!lr(h,l))return null}}return`Expected ${Mi(u)} but found ${Mi(l)} instead.`}function Yi(u,l){return l.some((h=>h.kind===u.kind))}function Wi(u,l){return l.some((h=>h==="null"?u===null:h==="array"?Array.isArray(u):h==="object"?u&&!Array.isArray(u)&&typeof u=="object":h===typeof u))}function Ii(u,l){return u.kind==="array"&&l.kind==="array"?u.itemType.kind===l.itemType.kind&&typeof u.N=="number":u.kind===l.kind}const zc=.96422,lo=.82521,Sl=4/29,$i=6/29,co=3*$i*$i,md=$i*$i*$i,ia=Math.PI/180,ho=180/Math.PI;function _d(u){return(u%=360)<0&&(u+=360),u}function nl([u,l,h,m]){let b,C;const A=Ja((.2225045*(u=Dn(u))+.7168786*(l=Dn(l))+.0606169*(h=Dn(h)))/1);u===l&&l===h?b=C=A:(b=Ja((.4360747*u+.3850649*l+.1430804*h)/zc),C=Ja((.0139322*u+.0971045*l+.7141733*h)/lo));const D=116*A-16;return[D<0?0:D,500*(b-A),200*(A-C),m]}function Dn(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Ja(u){return u>md?Math.pow(u,1/3):u/co+Sl}function ut([u,l,h,m]){let b=(u+16)/116,C=isNaN(l)?b:b+l/500,A=isNaN(h)?b:b-h/200;return b=1*ki(b),C=zc*ki(C),A=lo*ki(A),[Le(3.1338561*C-1.6168667*b-.4906146*A),Le(-.9787684*C+1.9161415*b+.033454*A),Le(.0719453*C-.2289914*b+1.4052427*A),m]}function Le(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function ki(u){return u>$i?u*u*u:co*(u-Sl)}const er=Object.hasOwn||function(u,l){return Object.prototype.hasOwnProperty.call(u,l)};function br(u,l){return er(u,l)?u[l]:void 0}function Fc(u){return parseInt(u.padEnd(2,u),16)/255}function Bc(u,l){return cr(l?u/100:u,0,1)}function cr(u,l,h){return Math.min(Math.max(l,u),h)}function Ei(u){return!u.some(Number.isNaN)}const Un={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function uo(u,l,h){return u+h*(l-u)}function kl(u,l,h){return u.map(((m,b)=>uo(m,l[b],h)))}class Ui{constructor(l,h,m,b=1,C=!0){this.r=l,this.g=h,this.b=m,this.a=b,C||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[l,h,m,b]))}static parse(l){if(l instanceof Ui)return l;if(typeof l!="string")return;const h=(function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const b=br(Un,m);if(b){const[A,D,B]=b;return[A/255,D/255,B/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const A=m.length<6?1:2;let D=1;return[Fc(m.slice(D,D+=A)),Fc(m.slice(D,D+=A)),Fc(m.slice(D,D+=A)),Fc(m.slice(D,D+A)||"ff")]}if(m.startsWith("rgb")){const A=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(A){const[D,B,U,Y,Q,ne,ae,ce,ue,pe,ve,ze]=A,Se=[Y||" ",ae||" ",pe].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const Ce=[U,ne,ue].join(""),Be=Ce==="%%%"?100:Ce===""?255:0;if(Be){const Ue=[cr(+B/Be,0,1),cr(+Q/Be,0,1),cr(+ce/Be,0,1),ve?Bc(+ve,ze):1];if(Ei(Ue))return Ue}}return}}const C=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[A,D,B,U,Y,Q,ne,ae,ce]=C,ue=[B||" ",Y||" ",ne].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){const pe=[+D,cr(+U,0,100),cr(+Q,0,100),ae?Bc(+ae,ce):1];if(Ei(pe))return(function([ve,ze,Se,Ce]){function Be(Ue){const ot=(Ue+ve/30)%12,wt=ze*Math.min(Se,1-Se);return Se-wt*Math.max(-1,Math.min(ot-3,9-ot,1))}return ve=_d(ve),ze/=100,Se/=100,[Be(0),Be(8),Be(4),Ce]})(pe)}}})(l);return h?new Ui(...h,!1):void 0}get rgb(){const{r:l,g:h,b:m,a:b}=this,C=b||1/0;return this.overwriteGetter("rgb",[l/C,h/C,m/C,b])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[h,m,b,C]=nl(l),A=Math.sqrt(m*m+b*b);return[Math.round(1e4*A)?_d(Math.atan2(b,m)*ho):NaN,A,h,C]})(this.rgb))}get lab(){return this.overwriteGetter("lab",nl(this.rgb))}overwriteGetter(l,h){return Object.defineProperty(this,l,{value:h}),h}toString(){const[l,h,m,b]=this.rgb;return`rgba(${[l,h,m].map((C=>Math.round(255*C))).join(",")},${b})`}static interpolate(l,h,m,b="rgb"){switch(b){case"rgb":{const[C,A,D,B]=kl(l.rgb,h.rgb,m);return new Ui(C,A,D,B,!1)}case"hcl":{const[C,A,D,B]=l.hcl,[U,Y,Q,ne]=h.hcl;let ae,ce;if(isNaN(C)||isNaN(U))isNaN(C)?isNaN(U)?ae=NaN:(ae=U,D!==1&&D!==0||(ce=Y)):(ae=C,Q!==1&&Q!==0||(ce=A));else{let Se=U-C;U>C&&Se>180?Se-=360:U<C&&C-U>180&&(Se+=360),ae=C+m*Se}const[ue,pe,ve,ze]=(function([Se,Ce,Be,Ue]){return Se=isNaN(Se)?0:Se*ia,ut([Be,Math.cos(Se)*Ce,Math.sin(Se)*Ce,Ue])})([ae,ce??uo(A,Y,m),uo(D,Q,m),uo(B,ne,m)]);return new Ui(ue,pe,ve,ze,!1)}case"lab":{const[C,A,D,B]=ut(kl(l.lab,h.lab,m));return new Ui(C,A,D,B,!1)}}}}Ui.black=new Ui(0,0,0,1),Ui.white=new Ui(1,1,1,1),Ui.transparent=new Ui(0,0,0,0),Ui.red=new Ui(1,0,0,1);class Cl{constructor(l,h,m){this.sensitivity=l?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,h){return this.collator.compare(l,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const zh=["bottom","center","top"];class Fh{constructor(l,h,m,b,C,A){this.text=l,this.image=h,this.scale=m,this.fontStack=b,this.textColor=C,this.verticalAlign=A}}class kn{constructor(l){this.sections=l}static fromString(l){return new kn([new Fh(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof kn?l:kn.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class za{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof za)return l;if(typeof l=="number")return new za([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const h of l)if(typeof h!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new za(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,m){return new za(kl(l.values,h.values,m))}}class Cn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Cn)return l;if(typeof l=="number")return new Cn([l]);if(Array.isArray(l)){for(const h of l)if(typeof h!="number")return;return new Cn(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,m){return new Cn(kl(l.values,h.values,m))}}class zt{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof zt)return l;if(typeof l=="string"){const m=Ui.parse(l);return m?new zt([m]):void 0}if(!Array.isArray(l))return;const h=[];for(const m of l){if(typeof m!="string")return;const b=Ui.parse(m);if(!b)return;h.push(b)}return new zt(h)}toString(){return JSON.stringify(this.values)}static interpolate(l,h,m,b="rgb"){const C=[];if(l.values.length!=h.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${h.values.length}), cannot interpolate.`);for(let A=0;A<l.values.length;A++)C.push(Ui.interpolate(l.values[A],h.values[A],m,b));return new zt(C)}}class jn extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const Vi=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class An{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof An)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let h=0;h<l.length;h+=2){const m=l[h],b=l[h+1];if(typeof m!="string"||!Vi.has(m)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new An(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,m){const b=l.values,C=h.values;if(b.length!==C.length)throw new jn(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${h.toString()}`);const A=[];for(let D=0;D<b.length;D+=2){if(b[D]!==C[D])throw new jn(`Cannot interpolate values containing mismatched anchors. from[${D}]: ${b[D]}, to[${D}]: ${C[D]}`);A.push(b[D]);const[B,U]=b[D+1],[Y,Q]=C[D+1];A.push([uo(B,Y,m),uo(U,Q,m)])}return new An(A)}}class ts{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new ts({name:l,available:!1}):null}}class hr{constructor(l,h,m){this.from=l,this.to=h,this.transition=m}static interpolate(l,h,m){return new hr(l,h,m)}static parse(l){return l instanceof hr?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new hr(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new hr(l.from,l.to,l.transition):typeof l=="string"?new hr(l,l,1):void 0}}function al(u,l,h,m){return typeof u=="number"&&u>=0&&u<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[u,l,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[u,l,h,m]:[u,l,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ur(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof hr||u instanceof Ui||u instanceof Cl||u instanceof kn||u instanceof za||u instanceof Cn||u instanceof zt||u instanceof An||u instanceof ts)return!0;if(Array.isArray(u)){for(const l of u)if(!Ur(l))return!1;return!0}if(typeof u=="object"){for(const l in u)if(!Ur(u[l]))return!1;return!0}return!1}function ba(u){if(u===null)return rn;if(typeof u=="string")return ii;if(typeof u=="boolean")return Si;if(typeof u=="number")return At;if(u instanceof Ui)return Xi;if(u instanceof hr)return Hn;if(u instanceof Cl)return wn;if(u instanceof kn)return cn;if(u instanceof za)return dn;if(u instanceof Cn)return Ln;if(u instanceof zt)return us;if(u instanceof An)return Tt;if(u instanceof ts)return Nn;if(Array.isArray(u)){const l=u.length;let h;for(const m of u){const b=ba(m);if(h){if(h===b)continue;h=gi;break}h=b}return Ga(h||gi,l)}return Oa}function As(u){const l=typeof u;return u===null?"":l==="string"||l==="number"||l==="boolean"?String(u):u instanceof Ui||u instanceof hr||u instanceof kn||u instanceof za||u instanceof Cn||u instanceof zt||u instanceof An||u instanceof ts?u.toString():JSON.stringify(u)}class Gr{constructor(l,h){this.type=l,this.value=h}static parse(l,h){if(l.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Ur(l[1]))return h.error("invalid value");const m=l[1];let b=ba(m);const C=h.expectedType;return b.kind!=="array"||b.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(b=C),new Gr(b,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Fo={string:ii,number:At,boolean:Si,object:Oa};class Rr{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");let m,b=1;const C=l[0];if(C==="array"){let D,B;if(l.length>2){const U=l[1];if(typeof U!="string"||!(U in Fo)||U==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);D=Fo[U],b++}else D=gi;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return h.error('The length argument to "array" must be a positive integer literal',2);B=l[2],b++}m=Ga(D,B)}else{if(!Fo[C])throw new Error(`Types doesn't contain name = ${C}`);m=Fo[C]}const A=[];for(;b<l.length;b++){const D=h.parse(l[b],b,gi);if(!D)return null;A.push(D)}return new Rr(m,A)}evaluate(l){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(l);if(!lr(this.type,ba(m)))return m;if(h===this.args.length-1)throw new jn(`Expected value to be of type ${Mi(this.type)}, but found ${Mi(ba(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Ts={"to-boolean":Si,"to-color":Xi,"to-number":At,"to-string":ii};class is{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const m=l[0];if(!Ts[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return h.error("Expected one argument.");const b=Ts[m],C=[];for(let A=1;A<l.length;A++){const D=h.parse(l[A],A,gi);if(!D)return null;C.push(D)}return new is(b,C)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let h,m;for(const b of this.args){if(h=b.evaluate(l),m=null,h instanceof Ui)return h;if(typeof h=="string"){const C=l.parseColor(h);if(C)return C}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:al(h[0],h[1],h[2],h[3]),!m))return new Ui(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new jn(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const m of this.args){h=m.evaluate(l);const b=za.parse(h);if(b)return b}throw new jn(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"numberArray":{let h;for(const m of this.args){h=m.evaluate(l);const b=Cn.parse(h);if(b)return b}throw new jn(`Could not parse numberArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"colorArray":{let h;for(const m of this.args){h=m.evaluate(l);const b=zt.parse(h);if(b)return b}throw new jn(`Could not parse colorArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const m of this.args){h=m.evaluate(l);const b=An.parse(h);if(b)return b}throw new jn(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const m of this.args){if(h=m.evaluate(l),h===null)return 0;const b=Number(h);if(!isNaN(b))return b}throw new jn(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return kn.fromString(As(this.args[0].evaluate(l)));case"resolvedImage":return ts.fromString(As(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return As(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Or=["Unknown","Point","LineString","Polygon"];class Nc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Or[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let h=this._parseColorCache.get(l);return h||(h=Ui.parse(l),this._parseColorCache.set(l,h)),h}}class Bo{constructor(l,h,m=[],b,C=new Xn,A=[]){this.registry=l,this.path=m,this.key=m.map((D=>`[${D}]`)).join(""),this.scope=C,this.errors=A,this.expectedType=b,this._isConstant=h}parse(l,h,m,b,C={}){return h?this.concat(h,m,b)._parse(l,C):this._parse(l,C)}_parse(l,h){function m(b,C,A){return A==="assert"?new Rr(C,[b]):A==="coerce"?new is(C,[b]):b}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=l[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[b];if(C){let A=C.parse(l,this);if(!A)return null;if(this.expectedType){const D=this.expectedType,B=A.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||B.kind!=="value"){if(D.kind==="projectionDefinition"&&["string","array"].includes(B.kind)||["color","formatted","resolvedImage"].includes(D.kind)&&["value","string"].includes(B.kind)||["padding","numberArray"].includes(D.kind)&&["value","number","array"].includes(B.kind)||D.kind==="colorArray"&&["value","string","array"].includes(B.kind)||D.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(B.kind))A=m(A,D,h.typeAnnotation||"coerce");else if(this.checkSubtype(D,B))return null}else A=m(A,D,h.typeAnnotation||"assert")}if(!(A instanceof Gr)&&A.type.kind!=="resolvedImage"&&this._isConstant(A)){const D=new Nc;try{A=new Gr(A.type,A.evaluate(D))}catch(B){return this.error(B.message),null}}return A}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,h,m){const b=typeof l=="number"?this.path.concat(l):this.path,C=m?this.scope.concat(m):this.scope;return new Bo(this.registry,this._isConstant,b,h||null,C,this.errors)}error(l,...h){const m=`${this.key}${h.map((b=>`[${b}]`)).join("")}`;this.errors.push(new Dt(m,l))}checkSubtype(l,h){const m=lr(l,h);return m&&this.error(m),m}}class Rn{constructor(l,h){this.type=h.type,this.bindings=[].concat(l),this.result=h}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const h of this.bindings)l(h[1]);l(this.result)}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const m=[];for(let C=1;C<l.length-1;C+=2){const A=l[C];if(typeof A!="string")return h.error(`Expected string, but found ${typeof A} instead.`,C);if(/[^a-zA-Z0-9_]/.test(A))return h.error("Variable names must contain only alphanumeric characters or '_'.",C);const D=h.parse(l[C+1],C+1);if(!D)return null;m.push([A,D])}const b=h.parse(l[l.length-1],l.length-1,h.expectedType,m);return b?new Rn(m,b):null}outputDefined(){return this.result.outputDefined()}}class Al{constructor(l,h){this.type=h.type,this.name=l,this.boundExpression=h}static parse(l,h){if(l.length!==2||typeof l[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=l[1];return h.scope.has(m)?new Al(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class sn{constructor(l,h,m){this.type=l,this.index=h,this.input=m}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,At),b=h.parse(l[2],2,Ga(h.expectedType||gi));return m&&b?new sn(b.type.itemType,m,b):null}evaluate(l){const h=this.index.evaluate(l),m=this.input.evaluate(l);if(h<0)throw new jn(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new jn(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new jn(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class Gi{constructor(l,h){this.type=Si,this.needle=l,this.haystack=h}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,gi),b=h.parse(l[2],2,gi);return m&&b?Yi(m.type,[Si,ii,At,rn,gi])?new Gi(m,b):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Mi(m.type)} instead`):null}evaluate(l){const h=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!Wi(h,["boolean","string","number","null"]))throw new jn(`Expected first argument to be of type boolean, string, number or null, but found ${Mi(ba(h))} instead.`);if(!Wi(m,["string","array"]))throw new jn(`Expected second argument to be of type array or string, but found ${Mi(ba(m))} instead.`);return m.indexOf(h)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class vn{constructor(l,h,m){this.type=At,this.needle=l,this.haystack=h,this.fromIndex=m}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,gi),b=h.parse(l[2],2,gi);if(!m||!b)return null;if(!Yi(m.type,[Si,ii,At,rn,gi]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Mi(m.type)} instead`);if(l.length===4){const C=h.parse(l[3],3,At);return C?new vn(m,b,C):null}return new vn(m,b)}evaluate(l){const h=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!Wi(h,["boolean","string","number","null"]))throw new jn(`Expected first argument to be of type boolean, string, number or null, but found ${Mi(ba(h))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(l)),Wi(m,["string"])){const C=m.indexOf(h,b);return C===-1?-1:[...m.slice(0,C)].length}if(Wi(m,["array"]))return m.indexOf(h,b);throw new jn(`Expected second argument to be of type array or string, but found ${Mi(ba(m))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class on{constructor(l,h,m,b,C,A){this.inputType=l,this.type=h,this.input=m,this.cases=b,this.outputs=C,this.otherwise=A}static parse(l,h){if(l.length<5)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return h.error("Expected an even number of arguments.");let m,b;h.expectedType&&h.expectedType.kind!=="value"&&(b=h.expectedType);const C={},A=[];for(let U=2;U<l.length-1;U+=2){let Y=l[U];const Q=l[U+1];Array.isArray(Y)||(Y=[Y]);const ne=h.concat(U);if(Y.length===0)return ne.error("Expected at least one branch label.");for(const ce of Y){if(typeof ce!="number"&&typeof ce!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof ce=="number"&&Math.abs(ce)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ce=="number"&&Math.floor(ce)!==ce)return ne.error("Numeric branch labels must be integer values.");if(m){if(ne.checkSubtype(m,ba(ce)))return null}else m=ba(ce);if(C[String(ce)]!==void 0)return ne.error("Branch labels must be unique.");C[String(ce)]=A.length}const ae=h.parse(Q,U,b);if(!ae)return null;b=b||ae.type,A.push(ae)}const D=h.parse(l[1],1,gi);if(!D)return null;const B=h.parse(l[l.length-1],l.length-1,b);return B?D.type.kind!=="value"&&h.concat(1).checkSubtype(m,D.type)?null:new on(m,b,D,C,A,B):null}evaluate(l){const h=this.input.evaluate(l);return(ba(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class No{constructor(l,h,m){this.type=l,this.branches=h,this.otherwise=m}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const b=[];for(let A=1;A<l.length-1;A+=2){const D=h.parse(l[A],A,Si);if(!D)return null;const B=h.parse(l[A+1],A+1,m);if(!B)return null;b.push([D,B]),m=m||B.type}const C=h.parse(l[l.length-1],l.length-1,m);if(!C)return null;if(!m)throw new Error("Can't infer output type");return new No(m,b,C)}evaluate(l){for(const[h,m]of this.branches)if(h.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[h,m]of this.branches)l(h),l(m);l(this.otherwise)}outputDefined(){return this.branches.every((([l,h])=>h.outputDefined()))&&this.otherwise.outputDefined()}}class Wa{constructor(l,h,m,b){this.type=l,this.input=h,this.beginIndex=m,this.endIndex=b}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,gi),b=h.parse(l[2],2,At);if(!m||!b)return null;if(!Yi(m.type,[Ga(gi),ii,gi]))return h.error(`Expected first argument to be of type array or string, but found ${Mi(m.type)} instead`);if(l.length===4){const C=h.parse(l[3],3,At);return C?new Wa(m.type,m,b,C):null}return new Wa(m.type,m,b)}evaluate(l){const h=this.input.evaluate(l),m=this.beginIndex.evaluate(l);let b;if(this.endIndex&&(b=this.endIndex.evaluate(l)),Wi(h,["string"]))return[...h].slice(m,b).join("");if(Wi(h,["array"]))return h.slice(m,b);throw new jn(`Expected first argument to be of type array or string, but found ${Mi(ba(h))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Tl(u,l){const h=u.length-1;let m,b,C=0,A=h,D=0;for(;C<=A;)if(D=Math.floor((C+A)/2),m=u[D],b=u[D+1],m<=l){if(D===h||l<b)return D;C=D+1}else{if(!(m>l))throw new jn("Input is not a number.");A=D-1}return 0}class _t{constructor(l,h,m){this.type=l,this.input=h,this.labels=[],this.outputs=[];for(const[b,C]of m)this.labels.push(b),this.outputs.push(C)}static parse(l,h){if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(l[1],1,At);if(!m)return null;const b=[];let C=null;h.expectedType&&h.expectedType.kind!=="value"&&(C=h.expectedType);for(let A=1;A<l.length;A+=2){const D=A===1?-1/0:l[A],B=l[A+1],U=A,Y=A+1;if(typeof D!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(b.length&&b[b.length-1][0]>=D)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const Q=h.parse(B,Y,C);if(!Q)return null;C=C||Q.type,b.push([D,Q])}return new _t(C,m,b)}evaluate(l){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(l);const b=this.input.evaluate(l);if(b<=h[0])return m[0].evaluate(l);const C=h.length;return b>=h[C-1]?m[C-1].evaluate(l):m[Tl(h,b)].evaluate(l)}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function qi(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Ea,El,xd=(function(){if(El)return Ea;function u(l,h,m,b){this.cx=3*l,this.bx=3*(m-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(b-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=h,this.p2x=m,this.p2y=b}return El=1,Ea=u,u.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,h){if(h===void 0&&(h=1e-6),l<0)return 0;if(l>1)return 1;for(var m=l,b=0;b<8;b++){var C=this.sampleCurveX(m)-l;if(Math.abs(C)<h)return m;var A=this.sampleCurveDerivativeX(m);if(Math.abs(A)<1e-6)break;m-=C/A}var D=0,B=1;for(m=l,b=0;b<20&&(C=this.sampleCurveX(m),!(Math.abs(C-l)<h));b++)l>C?D=m:B=m,m=.5*(B-D)+D;return m},solve:function(l,h){return this.sampleCurveY(this.solveCurveX(l,h))}},Ea})(),yd=qi(xd);class zr{constructor(l,h,m,b,C){this.type=l,this.operator=h,this.interpolation=m,this.input=b,this.labels=[],this.outputs=[];for(const[A,D]of C)this.labels.push(A),this.outputs.push(D)}static interpolationFactor(l,h,m,b){let C=0;if(l.name==="exponential")C=$s(h,l.base,m,b);else if(l.name==="linear")C=$s(h,1,m,b);else if(l.name==="cubic-bezier"){const A=l.controlPoints;C=new yd(A[0],A[1],A[2],A[3]).solve($s(h,1,m,b))}return C}static parse(l,h){let[m,b,C,...A]=l;if(!Array.isArray(b)||b.length===0)return h.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const U=b[1];if(typeof U!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:U}}else{if(b[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const U=b.slice(1);if(U.length!==4||U.some((Y=>typeof Y!="number"||Y<0||Y>1)))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:U}}}if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(C=h.parse(C,2,At),!C)return null;const D=[];let B=null;m!=="interpolate-hcl"&&m!=="interpolate-lab"||h.expectedType==us?h.expectedType&&h.expectedType.kind!=="value"&&(B=h.expectedType):B=Xi;for(let U=0;U<A.length;U+=2){const Y=A[U],Q=A[U+1],ne=U+3,ae=U+4;if(typeof Y!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(D.length&&D[D.length-1][0]>=Y)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const ce=h.parse(Q,ae,B);if(!ce)return null;B=B||ce.type,D.push([Y,ce])}return Ii(B,At)||Ii(B,Hn)||Ii(B,Xi)||Ii(B,dn)||Ii(B,Ln)||Ii(B,us)||Ii(B,Tt)||Ii(B,Ga(At))?new zr(B,m,b,C,D):h.error(`Type ${Mi(B)} is not interpolatable.`)}evaluate(l){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(l);const b=this.input.evaluate(l);if(b<=h[0])return m[0].evaluate(l);const C=h.length;if(b>=h[C-1])return m[C-1].evaluate(l);const A=Tl(h,b),D=zr.interpolationFactor(this.interpolation,b,h[A],h[A+1]),B=m[A].evaluate(l),U=m[A+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return uo(B,U,D);case"color":return Ui.interpolate(B,U,D);case"padding":return za.interpolate(B,U,D);case"colorArray":return zt.interpolate(B,U,D);case"numberArray":return Cn.interpolate(B,U,D);case"variableAnchorOffsetCollection":return An.interpolate(B,U,D);case"array":return kl(B,U,D);case"projectionDefinition":return hr.interpolate(B,U,D)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ui.interpolate(B,U,D,"hcl");case"colorArray":return zt.interpolate(B,U,D,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ui.interpolate(B,U,D,"lab");case"colorArray":return zt.interpolate(B,U,D,"lab")}}}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function $s(u,l,h,m){const b=m-h,C=u-h;return b===0?0:l===1?C/b:(Math.pow(l,C)-1)/(Math.pow(l,b)-1)}const Gn={color:Ui.interpolate,number:uo,padding:za.interpolate,numberArray:Cn.interpolate,colorArray:zt.interpolate,variableAnchorOffsetCollection:An.interpolate,array:kl};class na{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");let m=null;const b=h.expectedType;b&&b.kind!=="value"&&(m=b);const C=[];for(const D of l.slice(1)){const B=h.parse(D,1+C.length,m,void 0,{typeAnnotation:"omit"});if(!B)return null;m=m||B.type,C.push(B)}if(!m)throw new Error("No output type");const A=b&&C.some((D=>lr(b,D.type)));return new na(A?gi:m,C)}evaluate(l){let h,m=null,b=0;for(const C of this.args)if(b++,m=C.evaluate(l),m&&m instanceof ts&&!m.available&&(h||(h=m.name),m=null,b===this.args.length&&(m=h)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function Kl(u,l){return u==="=="||u==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Yn(u,l,h,m){return m.compare(l,h)===0}function qn(u,l,h){const m=u!=="=="&&u!=="!=";return class _T{constructor(C,A,D){this.type=Si,this.lhs=C,this.rhs=A,this.collator=D,this.hasUntypedArgument=C.type.kind==="value"||A.type.kind==="value"}static parse(C,A){if(C.length!==3&&C.length!==4)return A.error("Expected two or three arguments.");const D=C[0];let B=A.parse(C[1],1,gi);if(!B)return null;if(!Kl(D,B.type))return A.concat(1).error(`"${D}" comparisons are not supported for type '${Mi(B.type)}'.`);let U=A.parse(C[2],2,gi);if(!U)return null;if(!Kl(D,U.type))return A.concat(2).error(`"${D}" comparisons are not supported for type '${Mi(U.type)}'.`);if(B.type.kind!==U.type.kind&&B.type.kind!=="value"&&U.type.kind!=="value")return A.error(`Cannot compare types '${Mi(B.type)}' and '${Mi(U.type)}'.`);m&&(B.type.kind==="value"&&U.type.kind!=="value"?B=new Rr(U.type,[B]):B.type.kind!=="value"&&U.type.kind==="value"&&(U=new Rr(B.type,[U])));let Y=null;if(C.length===4){if(B.type.kind!=="string"&&U.type.kind!=="string"&&B.type.kind!=="value"&&U.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(Y=A.parse(C[3],3,wn),!Y)return null}return new _T(B,U,Y)}evaluate(C){const A=this.lhs.evaluate(C),D=this.rhs.evaluate(C);if(m&&this.hasUntypedArgument){const B=ba(A),U=ba(D);if(B.kind!==U.kind||B.kind!=="string"&&B.kind!=="number")throw new jn(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${B.kind}, ${U.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const B=ba(A),U=ba(D);if(B.kind!=="string"||U.kind!=="string")return l(C,A,D)}return this.collator?h(C,A,D,this.collator.evaluate(C)):l(C,A,D)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const jo=qn("==",(function(u,l,h){return l===h}),Yn),On=qn("!=",(function(u,l,h){return l!==h}),(function(u,l,h,m){return!Yn(0,l,h,m)})),Ri=qn("<",(function(u,l,h){return l<h}),(function(u,l,h,m){return m.compare(l,h)<0})),sp=qn(">",(function(u,l,h){return l>h}),(function(u,l,h,m){return m.compare(l,h)>0})),En=qn("<=",(function(u,l,h){return l<=h}),(function(u,l,h,m){return m.compare(l,h)<=0})),Xs=qn(">=",(function(u,l,h){return l>=h}),(function(u,l,h,m){return m.compare(l,h)>=0}));class Es{constructor(l,h,m){this.type=wn,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=h}static parse(l,h){if(l.length!==2)return h.error("Expected one argument.");const m=l[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const b=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Si);if(!b)return null;const C=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Si);if(!C)return null;let A=null;return m.locale&&(A=h.parse(m.locale,1,ii),!A)?null:new Es(b,C,A)}evaluate(l){return new Cl(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class Bh{constructor(l,h,m,b,C){this.type=ii,this.number=l,this.locale=h,this.currency=m,this.minFractionDigits=b,this.maxFractionDigits=C}static parse(l,h){if(l.length!==3)return h.error("Expected two arguments.");const m=h.parse(l[1],1,At);if(!m)return null;const b=l[2];if(typeof b!="object"||Array.isArray(b))return h.error("NumberFormat options argument must be an object.");let C=null;if(b.locale&&(C=h.parse(b.locale,1,ii),!C))return null;let A=null;if(b.currency&&(A=h.parse(b.currency,1,ii),!A))return null;let D=null;if(b["min-fraction-digits"]&&(D=h.parse(b["min-fraction-digits"],1,At),!D))return null;let B=null;return b["max-fraction-digits"]&&(B=h.parse(b["max-fraction-digits"],1,At),!B)?null:new Bh(m,C,A,D,B)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Wr{constructor(l){this.type=cn,this.sections=l}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const m=l[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const b=[];let C=!1;for(let A=1;A<=l.length-1;++A){const D=l[A];if(C&&typeof D=="object"&&!Array.isArray(D)){C=!1;let B=null;if(D["font-scale"]&&(B=h.parse(D["font-scale"],1,At),!B))return null;let U=null;if(D["text-font"]&&(U=h.parse(D["text-font"],1,Ga(ii)),!U))return null;let Y=null;if(D["text-color"]&&(Y=h.parse(D["text-color"],1,Xi),!Y))return null;let Q=null;if(D["vertical-align"]){if(typeof D["vertical-align"]=="string"&&!zh.includes(D["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${D["vertical-align"]}' instead.`);if(Q=h.parse(D["vertical-align"],1,ii),!Q)return null}const ne=b[b.length-1];ne.scale=B,ne.font=U,ne.textColor=Y,ne.verticalAlign=Q}else{const B=h.parse(l[A],1,gi);if(!B)return null;const U=B.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,b.push({content:B,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Wr(b)}evaluate(l){return new kn(this.sections.map((h=>{const m=h.content.evaluate(l);return ba(m)===Nn?new Fh("",m,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(l):null):new Fh(As(m),null,h.scale?h.scale.evaluate(l):null,h.font?h.font.evaluate(l).join(","):null,h.textColor?h.textColor.evaluate(l):null,h.verticalAlign?h.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const h of this.sections)l(h.content),h.scale&&l(h.scale),h.font&&l(h.font),h.textColor&&l(h.textColor),h.verticalAlign&&l(h.verticalAlign)}outputDefined(){return!1}}class Vo{constructor(l){this.type=Nn,this.input=l}static parse(l,h){if(l.length!==2)return h.error("Expected two arguments.");const m=h.parse(l[1],1,ii);return m?new Vo(m):h.error("No image name provided.")}evaluate(l){const h=this.input.evaluate(l),m=ts.fromString(h);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(h)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class rl{constructor(l){this.type=At,this.input=l}static parse(l,h){if(l.length!==2)return h.error(`Expected 1 argument, but found ${l.length-1} instead.`);const m=h.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Mi(m.type)} instead.`):new rl(m):null}evaluate(l){const h=this.input.evaluate(l);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new jn(`Expected value to be of type string or array, but found ${Mi(ba(h))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const wa=8192;function Nh(u,l){const h=(180+u[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,b=Math.pow(2,l.z);return[Math.round(h*b*wa),Math.round(m*b*wa)]}function sl(u,l){const h=Math.pow(2,l.z);return[(b=(u[0]/wa+l.x)/h,360*b-180),(m=(u[1]/wa+l.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,b}function Ql(u,l){u[0]=Math.min(u[0],l[0]),u[1]=Math.min(u[1],l[1]),u[2]=Math.max(u[2],l[0]),u[3]=Math.max(u[3],l[1])}function ds(u,l){return!(u[0]<=l[0]||u[2]>=l[2]||u[1]<=l[1]||u[3]>=l[3])}function jh(u,l,h){const m=u[0]-l[0],b=u[1]-l[1],C=u[0]-h[0],A=u[1]-h[1];return m*A-C*b==0&&m*C<=0&&b*A<=0}function jc(u,l,h,m){return(b=[m[0]-h[0],m[1]-h[1]])[0]*(C=[l[0]-u[0],l[1]-u[1]])[1]-b[1]*C[0]!=0&&!(!Vc(u,l,h,m)||!Vc(h,m,u,l));var b,C}function Jl(u,l,h){for(const m of h)for(let b=0;b<m.length-1;++b)if(jc(u,l,m[b],m[b+1]))return!0;return!1}function Ml(u,l,h=!1){let m=!1;for(const D of l)for(let B=0;B<D.length-1;B++){if(jh(u,D[B],D[B+1]))return h;(C=D[B])[1]>(b=u)[1]!=(A=D[B+1])[1]>b[1]&&b[0]<(A[0]-C[0])*(b[1]-C[1])/(A[1]-C[1])+C[0]&&(m=!m)}var b,C,A;return m}function Ms(u,l){for(const h of l)if(Ml(u,h))return!0;return!1}function ec(u,l){for(const h of u)if(!Ml(h,l))return!1;for(let h=0;h<u.length-1;++h)if(Jl(u[h],u[h+1],l))return!1;return!0}function ns(u,l){for(const h of l)if(ec(u,h))return!0;return!1}function Vc(u,l,h,m){const b=m[0]-h[0],C=m[1]-h[1],A=(u[0]-h[0])*C-b*(u[1]-h[1]),D=(l[0]-h[0])*C-b*(l[1]-h[1]);return A>0&&D<0||A<0&&D>0}function fs(u,l,h){const m=[];for(let b=0;b<u.length;b++){const C=[];for(let A=0;A<u[b].length;A++){const D=Nh(u[b][A],h);Ql(l,D),C.push(D)}m.push(C)}return m}function Vh(u,l,h){const m=[];for(let b=0;b<u.length;b++){const C=fs(u[b],l,h);m.push(C)}return m}function Hc(u,l,h,m){if(u[0]<h[0]||u[0]>h[2]){const b=.5*m;let C=u[0]-h[0]>b?-m:h[0]-u[0]>b?m:0;C===0&&(C=u[0]-h[2]>b?-m:h[2]-u[0]>b?m:0),u[0]+=C}Ql(l,u)}function vd(u,l,h,m){const b=Math.pow(2,m.z)*wa,C=[m.x*wa,m.y*wa],A=[];for(const D of u)for(const B of D){const U=[B.x+C[0],B.y+C[1]];Hc(U,l,h,b),A.push(U)}return A}function Hh(u,l,h,m){const b=Math.pow(2,m.z)*wa,C=[m.x*wa,m.y*wa],A=[];for(const B of u){const U=[];for(const Y of B){const Q=[Y.x+C[0],Y.y+C[1]];Ql(l,Q),U.push(Q)}A.push(U)}if(l[2]-l[0]<=b/2){(D=l)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const B of A)for(const U of B)Hc(U,l,h,b)}var D;return A}class wr{constructor(l,h){this.type=Si,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Ur(l[1])){const m=l[1];if(m.type==="FeatureCollection"){const b=[];for(const C of m.features){const{type:A,coordinates:D}=C.geometry;A==="Polygon"&&b.push(D),A==="MultiPolygon"&&b.push(...D)}if(b.length)return new wr(m,{type:"MultiPolygon",coordinates:b})}else if(m.type==="Feature"){const b=m.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new wr(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new wr(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(h,m){const b=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=h.canonicalID();if(m.type==="Polygon"){const D=fs(m.coordinates,C,A),B=vd(h.geometry(),b,C,A);if(!ds(b,C))return!1;for(const U of B)if(!Ml(U,D))return!1}if(m.type==="MultiPolygon"){const D=Vh(m.coordinates,C,A),B=vd(h.geometry(),b,C,A);if(!ds(b,C))return!1;for(const U of B)if(!Ms(U,D))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(h,m){const b=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=h.canonicalID();if(m.type==="Polygon"){const D=fs(m.coordinates,C,A),B=Hh(h.geometry(),b,C,A);if(!ds(b,C))return!1;for(const U of B)if(!ec(U,D))return!1}if(m.type==="MultiPolygon"){const D=Vh(m.coordinates,C,A),B=Hh(h.geometry(),b,C,A);if(!ds(b,C))return!1;for(const U of B)if(!ns(U,D))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let bd=class{constructor(u=[],l=(h,m)=>h<m?-1:h>m?1:0){if(this.data=u,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:l,compare:h}=this,m=l[u];for(;u>0;){const b=u-1>>1,C=l[b];if(h(m,C)>=0)break;l[u]=C,u=b}l[u]=m}_down(u){const{data:l,compare:h}=this,m=this.length>>1,b=l[u];for(;u<m;){let C=1+(u<<1);const A=C+1;if(A<this.length&&h(l[A],l[C])<0&&(C=A),h(l[C],b)>=0)break;l[u]=l[C],u=C}l[u]=b}};function tc(u,l,h=0,m=u.length-1,b=gn){for(;m>h;){if(m-h>600){const B=m-h+1,U=l-h+1,Y=Math.log(B),Q=.5*Math.exp(2*Y/3),ne=.5*Math.sqrt(Y*Q*(B-Q)/B)*(U-B/2<0?-1:1);tc(u,l,Math.max(h,Math.floor(l-U*Q/B+ne)),Math.min(m,Math.floor(l+(B-U)*Q/B+ne)),b)}const C=u[l];let A=h,D=m;for(Ys(u,h,l),b(u[m],C)>0&&Ys(u,h,m);A<D;){for(Ys(u,A,D),A++,D--;b(u[A],C)<0;)A++;for(;b(u[D],C)>0;)D--}b(u[h],C)===0?Ys(u,h,D):(D++,Ys(u,D,m)),D<=l&&(h=D+1),l<=D&&(m=D-1)}}function Ys(u,l,h){const m=u[l];u[l]=u[h],u[h]=m}function gn(u,l){return u<l?-1:u>l?1:0}function ol(u,l){if(u.length<=1)return[u];const h=[];let m,b;for(const C of u){const A=p(C);A!==0&&(C.area=Math.abs(A),b===void 0&&(b=A<0),b===A<0?(m&&h.push(m),m=[C]):m.push(C))}if(m&&h.push(m),l>1)for(let C=0;C<h.length;C++)h[C].length<=l||(tc(h[C],l,1,h[C].length-1,ge),h[C]=h[C].slice(0,l));return h}function ge(u,l){return l.area-u.area}function p(u){let l=0;for(let h,m,b=0,C=u.length,A=C-1;b<C;A=b++)h=u[b],m=u[A],l+=(m.x-h.x)*(h.y+m.y);return l}const _=1/298.257223563,w=_*(2-_),T=Math.PI/180;class M{constructor(l){const h=6378.137*T*1e3,m=Math.cos(l*T),b=1/(1-w*(1-m*m)),C=Math.sqrt(b);this.kx=h*C*m,this.ky=h*C*b*(1-w)}distance(l,h){const m=this.wrap(l[0]-h[0])*this.kx,b=(l[1]-h[1])*this.ky;return Math.sqrt(m*m+b*b)}pointOnLine(l,h){let m,b,C,A,D=1/0;for(let B=0;B<l.length-1;B++){let U=l[B][0],Y=l[B][1],Q=this.wrap(l[B+1][0]-U)*this.kx,ne=(l[B+1][1]-Y)*this.ky,ae=0;Q===0&&ne===0||(ae=(this.wrap(h[0]-U)*this.kx*Q+(h[1]-Y)*this.ky*ne)/(Q*Q+ne*ne),ae>1?(U=l[B+1][0],Y=l[B+1][1]):ae>0&&(U+=Q/this.kx*ae,Y+=ne/this.ky*ae)),Q=this.wrap(h[0]-U)*this.kx,ne=(h[1]-Y)*this.ky;const ce=Q*Q+ne*ne;ce<D&&(D=ce,m=U,b=Y,C=B,A=ae)}return{point:[m,b],index:C,t:Math.max(0,Math.min(1,A))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function R(u,l){return l[0]-u[0]}function V(u){return u[1]-u[0]+1}function G(u,l){return u[1]>=u[0]&&u[1]<l}function q(u,l){if(u[0]>u[1])return[null,null];const h=V(u);if(l){if(h===2)return[u,null];const b=Math.floor(h/2);return[[u[0],u[0]+b],[u[0]+b,u[1]]]}if(h===1)return[u,null];const m=Math.floor(h/2)-1;return[[u[0],u[0]+m],[u[0]+m+1,u[1]]]}function oe(u,l){if(!G(l,u.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let m=l[0];m<=l[1];++m)Ql(h,u[m]);return h}function me(u){const l=[1/0,1/0,-1/0,-1/0];for(const h of u)for(const m of h)Ql(l,m);return l}function we(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function Re(u,l,h){if(!we(u)||!we(l))return NaN;let m=0,b=0;return u[2]<l[0]&&(m=l[0]-u[2]),u[0]>l[2]&&(m=u[0]-l[2]),u[1]>l[3]&&(b=u[1]-l[3]),u[3]<l[1]&&(b=l[1]-u[3]),h.distance([0,0],[m,b])}function Ye(u,l,h){const m=h.pointOnLine(l,u);return h.distance(u,m.point)}function Ze(u,l,h,m,b){const C=Math.min(Ye(u,[h,m],b),Ye(l,[h,m],b)),A=Math.min(Ye(h,[u,l],b),Ye(m,[u,l],b));return Math.min(C,A)}function ct(u,l,h,m,b){if(!G(l,u.length)||!G(m,h.length))return 1/0;let C=1/0;for(let A=l[0];A<l[1];++A){const D=u[A],B=u[A+1];for(let U=m[0];U<m[1];++U){const Y=h[U],Q=h[U+1];if(jc(D,B,Y,Q))return 0;C=Math.min(C,Ze(D,B,Y,Q,b))}}return C}function yt(u,l,h,m,b){if(!G(l,u.length)||!G(m,h.length))return NaN;let C=1/0;for(let A=l[0];A<=l[1];++A)for(let D=m[0];D<=m[1];++D)if(C=Math.min(C,b.distance(u[A],h[D])),C===0)return C;return C}function Ht(u,l,h){if(Ml(u,l,!0))return 0;let m=1/0;for(const b of l){const C=b[0],A=b[b.length-1];if(C!==A&&(m=Math.min(m,Ye(u,[A,C],h)),m===0))return m;const D=h.pointOnLine(b,u);if(m=Math.min(m,h.distance(u,D.point)),m===0)return m}return m}function Wt(u,l,h,m){if(!G(l,u.length))return NaN;for(let C=l[0];C<=l[1];++C)if(Ml(u[C],h,!0))return 0;let b=1/0;for(let C=l[0];C<l[1];++C){const A=u[C],D=u[C+1];for(const B of h)for(let U=0,Y=B.length,Q=Y-1;U<Y;Q=U++){const ne=B[Q],ae=B[U];if(jc(A,D,ne,ae))return 0;b=Math.min(b,Ze(A,D,ne,ae,m))}}return b}function Ft(u,l){for(const h of u)for(const m of h)if(Ml(m,l,!0))return!0;return!1}function hn(u,l,h,m=1/0){const b=me(u),C=me(l);if(m!==1/0&&Re(b,C,h)>=m)return m;if(ds(b,C)){if(Ft(u,l))return 0}else if(Ft(l,u))return 0;let A=1/0;for(const D of u)for(let B=0,U=D.length,Y=U-1;B<U;Y=B++){const Q=D[Y],ne=D[B];for(const ae of l)for(let ce=0,ue=ae.length,pe=ue-1;ce<ue;pe=ce++){const ve=ae[pe],ze=ae[ce];if(jc(Q,ne,ve,ze))return 0;A=Math.min(A,Ze(Q,ne,ve,ze,h))}}return A}function ai(u,l,h,m,b,C){if(!C)return;const A=Re(oe(m,C),b,h);A<l&&u.push([A,C,[0,0]])}function ur(u,l,h,m,b,C,A){if(!C||!A)return;const D=Re(oe(m,C),oe(b,A),h);D<l&&u.push([D,C,A])}function $r(u,l,h,m,b=1/0){let C=Math.min(m.distance(u[0],h[0][0]),b);if(C===0)return C;const A=new bd([[0,[0,u.length-1],[0,0]]],R),D=me(h);for(;A.length>0;){const B=A.pop();if(B[0]>=C)continue;const U=B[1],Y=l?50:100;if(V(U)<=Y){if(!G(U,u.length))return NaN;if(l){const Q=Wt(u,U,h,m);if(isNaN(Q)||Q===0)return Q;C=Math.min(C,Q)}else for(let Q=U[0];Q<=U[1];++Q){const ne=Ht(u[Q],h,m);if(C=Math.min(C,ne),C===0)return 0}}else{const Q=q(U,l);ai(A,C,m,u,D,Q[0]),ai(A,C,m,u,D,Q[1])}}return C}function dr(u,l,h,m,b,C=1/0){let A=Math.min(C,b.distance(u[0],h[0]));if(A===0)return A;const D=new bd([[0,[0,u.length-1],[0,h.length-1]]],R);for(;D.length>0;){const B=D.pop();if(B[0]>=A)continue;const U=B[1],Y=B[2],Q=l?50:100,ne=m?50:100;if(V(U)<=Q&&V(Y)<=ne){if(!G(U,u.length)&&G(Y,h.length))return NaN;let ae;if(l&&m)ae=ct(u,U,h,Y,b),A=Math.min(A,ae);else if(l&&!m){const ce=u.slice(U[0],U[1]+1);for(let ue=Y[0];ue<=Y[1];++ue)if(ae=Ye(h[ue],ce,b),A=Math.min(A,ae),A===0)return A}else if(!l&&m){const ce=h.slice(Y[0],Y[1]+1);for(let ue=U[0];ue<=U[1];++ue)if(ae=Ye(u[ue],ce,b),A=Math.min(A,ae),A===0)return A}else ae=yt(u,U,h,Y,b),A=Math.min(A,ae)}else{const ae=q(U,l),ce=q(Y,m);ur(D,A,b,u,h,ae[0],ce[0]),ur(D,A,b,u,h,ae[0],ce[1]),ur(D,A,b,u,h,ae[1],ce[0]),ur(D,A,b,u,h,ae[1],ce[1])}}return A}function zn(u){return u.type==="MultiPolygon"?u.coordinates.map((l=>({type:"Polygon",coordinates:l}))):u.type==="MultiLineString"?u.coordinates.map((l=>({type:"LineString",coordinates:l}))):u.type==="MultiPoint"?u.coordinates.map((l=>({type:"Point",coordinates:l}))):[u]}class fa{constructor(l,h){this.type=At,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Ur(l[1])){const m=l[1];if(m.type==="FeatureCollection")return new fa(m,m.features.map((b=>zn(b.geometry))).flat());if(m.type==="Feature")return new fa(m,zn(m.geometry));if("type"in m&&"coordinates"in m)return new fa(m,zn(m))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(h,m){const b=h.geometry(),C=b.flat().map((B=>sl([B.x,B.y],h.canonical)));if(b.length===0)return NaN;const A=new M(C[0][1]);let D=1/0;for(const B of m){switch(B.type){case"Point":D=Math.min(D,dr(C,!1,[B.coordinates],!1,A,D));break;case"LineString":D=Math.min(D,dr(C,!1,B.coordinates,!0,A,D));break;case"Polygon":D=Math.min(D,$r(C,!1,B.coordinates,A,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="LineString")return(function(h,m){const b=h.geometry(),C=b.flat().map((B=>sl([B.x,B.y],h.canonical)));if(b.length===0)return NaN;const A=new M(C[0][1]);let D=1/0;for(const B of m){switch(B.type){case"Point":D=Math.min(D,dr(C,!0,[B.coordinates],!1,A,D));break;case"LineString":D=Math.min(D,dr(C,!0,B.coordinates,!0,A,D));break;case"Polygon":D=Math.min(D,$r(C,!0,B.coordinates,A,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(h,m){const b=h.geometry();if(b.length===0||b[0].length===0)return NaN;const C=ol(b,0).map((B=>B.map((U=>U.map((Y=>sl([Y.x,Y.y],h.canonical))))))),A=new M(C[0][0][0][1]);let D=1/0;for(const B of m)for(const U of C){switch(B.type){case"Point":D=Math.min(D,$r([B.coordinates],!1,U,A,D));break;case"LineString":D=Math.min(D,$r(B.coordinates,!0,U,A,D));break;case"Polygon":D=Math.min(D,hn(U,B.coordinates,A,D))}if(D===0)return D}return D})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class fr{constructor(l){this.type=gi,this.key=l}static parse(l,h){if(l.length!==2)return h.error(`Expected 1 argument, but found ${l.length-1} instead.`);const m=l[1];return m==null?h.error("Global state property must be defined."):typeof m!="string"?h.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new fr(m)}evaluate(l){var h;const m=(h=l.globals)===null||h===void 0?void 0:h.globalState;return m&&Object.keys(m).length!==0?br(m,this.key):null}eachChild(){}outputDefined(){return!1}}const Is={"==":jo,"!=":On,">":sp,"<":Ri,">=":Xs,"<=":En,array:Rr,at:sn,boolean:Rr,case:No,coalesce:na,collator:Es,format:Wr,image:Vo,in:Gi,"index-of":vn,interpolate:zr,"interpolate-hcl":zr,"interpolate-lab":zr,length:rl,let:Rn,literal:Gr,match:on,number:Rr,"number-format":Bh,object:Rr,slice:Wa,step:_t,string:Rr,"to-boolean":is,"to-color":is,"to-number":is,"to-string":is,var:Al,within:wr,distance:fa,"global-state":fr};class pr{constructor(l,h,m,b){this.name=l,this.type=h,this._evaluate=m,this.args=b}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,h){const m=l[0],b=pr.definitions[m];if(!b)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(b)?b[0]:b.type,A=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,D=A.filter((([U])=>!Array.isArray(U)||U.length===l.length-1));let B=null;for(const[U,Y]of D){B=new Bo(h.registry,kd,h.path,null,h.scope);const Q=[];let ne=!1;for(let ae=1;ae<l.length;ae++){const ce=l[ae],ue=Array.isArray(U)?U[ae-1]:U.type,pe=B.parse(ce,1+Q.length,ue);if(!pe){ne=!0;break}Q.push(pe)}if(!ne)if(Array.isArray(U)&&U.length!==Q.length)B.error(`Expected ${U.length} arguments, but found ${Q.length} instead.`);else{for(let ae=0;ae<Q.length;ae++){const ce=Array.isArray(U)?U[ae]:U.type,ue=Q[ae];B.concat(ae+1).checkSubtype(ce,ue.type)}if(B.errors.length===0)return new pr(m,C,Y,Q)}}if(D.length===1)h.errors.push(...B.errors);else{const U=(D.length?D:A).map((([Q])=>{return ne=Q,Array.isArray(ne)?`(${ne.map(Mi).join(", ")})`:`(${Mi(ne.type)}...)`;var ne})).join(" | "),Y=[];for(let Q=1;Q<l.length;Q++){const ne=h.parse(l[Q],1+Y.length);if(!ne)return null;Y.push(Mi(ne.type))}h.error(`Expected arguments of type ${U}, but found (${Y.join(", ")}) instead.`)}return null}static register(l,h){pr.definitions=h;for(const m in h)l[m]=pr}}function wd(u,[l,h,m,b]){l=l.evaluate(u),h=h.evaluate(u),m=m.evaluate(u);const C=b?b.evaluate(u):1,A=al(l,h,m,C);if(A)throw new jn(A);return new Ui(l/255,h/255,m/255,C,!1)}function Sd(u,l){return u in l}function op(u,l){const h=l[u];return h===void 0?null:h}function ic(u){return{type:u}}function kd(u){if(u instanceof Al)return kd(u.boundExpression);if(u instanceof pr&&u.name==="error"||u instanceof Es||u instanceof wr||u instanceof fa||u instanceof fr)return!1;const l=u instanceof is||u instanceof Rr;let h=!0;return u.eachChild((m=>{h=l?h&&kd(m):h&&m instanceof Gr})),!!h&&Cd(u)&&Ad(u,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Cd(u){if(u instanceof pr&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof wr||u instanceof fa)return!1;let l=!0;return u.eachChild((h=>{l&&!Cd(h)&&(l=!1)})),l}function Uh(u){if(u instanceof pr&&u.name==="feature-state")return!1;let l=!0;return u.eachChild((h=>{l&&!Uh(h)&&(l=!1)})),l}function Ad(u,l){if(u instanceof pr&&l.indexOf(u.name)>=0)return!1;let h=!0;return u.eachChild((m=>{h&&!Ad(m,l)&&(h=!1)})),h}function Im(u){return{result:"success",value:u}}function Uc(u){return{result:"error",value:u}}function Gc(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function Pm(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function lp(u){return!!u.expression&&u.expression.interpolated}function Zi(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Td(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&ba(u)===Oa}function jx(u){return u}function Lm(u,l){const h=u.stops&&typeof u.stops[0][0]=="object",m=h||!(h||u.property!==void 0),b=u.type||(lp(l)?"exponential":"interval"),C=(function(Y){switch(Y.type){case"color":return Ui.parse;case"padding":return za.parse;case"numberArray":return Cn.parse;case"colorArray":return zt.parse;default:return null}})(l);if(C&&((u=xi({},u)).stops&&(u.stops=u.stops.map((Y=>[Y[0],C(Y[1])]))),u.default=C(u.default?u.default:l.default)),u.colorSpace&&(A=u.colorSpace)!=="rgb"&&A!=="hcl"&&A!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var A;const D=(function(Y){switch(Y){case"exponential":return Dm;case"interval":return Hx;case"categorical":return Vx;case"identity":return Ux;default:throw new Error(`Unknown function type "${Y}"`)}})(b);let B,U;if(b==="categorical"){B=Object.create(null);for(const Y of u.stops)B[Y[0]]=Y[1];U=typeof u.stops[0][0]}if(h){const Y={},Q=[];for(let ce=0;ce<u.stops.length;ce++){const ue=u.stops[ce],pe=ue[0].zoom;Y[pe]===void 0&&(Y[pe]={zoom:pe,type:u.type,property:u.property,default:u.default,stops:[]},Q.push(pe)),Y[pe].stops.push([ue[0].value,ue[1]])}const ne=[];for(const ce of Q)ne.push([Y[ce].zoom,Lm(Y[ce],l)]);const ae={name:"linear"};return{kind:"composite",interpolationType:ae,interpolationFactor:zr.interpolationFactor.bind(void 0,ae),zoomStops:ne.map((ce=>ce[0])),evaluate:({zoom:ce},ue)=>Dm({stops:ne,base:u.base},l,ce).evaluate(ce,ue)}}if(m){const Y=b==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:Y,interpolationFactor:zr.interpolationFactor.bind(void 0,Y),zoomStops:u.stops.map((Q=>Q[0])),evaluate:({zoom:Q})=>D(u,l,Q,B,U)}}return{kind:"source",evaluate(Y,Q){const ne=Q&&Q.properties?Q.properties[u.property]:void 0;return ne===void 0?Gh(u.default,l.default):D(u,l,ne,B,U)}}}function Gh(u,l,h){return u!==void 0?u:l!==void 0?l:h!==void 0?h:void 0}function Vx(u,l,h,m,b){return Gh(typeof h===b?m[h]:void 0,u.default,l.default)}function Hx(u,l,h){if(Zi(h)!=="number")return Gh(u.default,l.default);const m=u.stops.length;if(m===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[m-1][0])return u.stops[m-1][1];const b=Tl(u.stops.map((C=>C[0])),h);return u.stops[b][1]}function Dm(u,l,h){const m=u.base!==void 0?u.base:1;if(Zi(h)!=="number")return Gh(u.default,l.default);const b=u.stops.length;if(b===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[b-1][0])return u.stops[b-1][1];const C=Tl(u.stops.map((Y=>Y[0])),h),A=(function(Y,Q,ne,ae){const ce=ae-ne,ue=Y-ne;return ce===0?0:Q===1?ue/ce:(Math.pow(Q,ue)-1)/(Math.pow(Q,ce)-1)})(h,m,u.stops[C][0],u.stops[C+1][0]),D=u.stops[C][1],B=u.stops[C+1][1],U=Gn[l.type]||jx;return typeof D.evaluate=="function"?{evaluate(...Y){const Q=D.evaluate.apply(void 0,Y),ne=B.evaluate.apply(void 0,Y);if(Q!==void 0&&ne!==void 0)return U(Q,ne,A,u.colorSpace)}}:U(D,B,A,u.colorSpace)}function Ux(u,l,h){switch(l.type){case"color":h=Ui.parse(h);break;case"formatted":h=kn.fromString(h.toString());break;case"resolvedImage":h=ts.fromString(h.toString());break;case"padding":h=za.parse(h);break;case"colorArray":h=zt.parse(h);break;case"numberArray":h=Cn.parse(h);break;default:Zi(h)===l.type||l.type==="enum"&&l.values[h]||(h=void 0)}return Gh(h,u.default,l.default)}pr.register(Is,{error:[{kind:"error"},[ii],(u,[l])=>{throw new jn(l.evaluate(u))}],typeof:[ii,[gi],(u,[l])=>Mi(ba(l.evaluate(u)))],"to-rgba":[Ga(At,4),[Xi],(u,[l])=>{const[h,m,b,C]=l.evaluate(u).rgb;return[255*h,255*m,255*b,C]}],rgb:[Xi,[At,At,At],wd],rgba:[Xi,[At,At,At,At],wd],has:{type:Si,overloads:[[[ii],(u,[l])=>Sd(l.evaluate(u),u.properties())],[[ii,Oa],(u,[l,h])=>Sd(l.evaluate(u),h.evaluate(u))]]},get:{type:gi,overloads:[[[ii],(u,[l])=>op(l.evaluate(u),u.properties())],[[ii,Oa],(u,[l,h])=>op(l.evaluate(u),h.evaluate(u))]]},"feature-state":[gi,[ii],(u,[l])=>op(l.evaluate(u),u.featureState||{})],properties:[Oa,[],u=>u.properties()],"geometry-type":[ii,[],u=>u.geometryType()],id:[gi,[],u=>u.id()],zoom:[At,[],u=>u.globals.zoom],"heatmap-density":[At,[],u=>u.globals.heatmapDensity||0],elevation:[At,[],u=>u.globals.elevation||0],"line-progress":[At,[],u=>u.globals.lineProgress||0],accumulated:[gi,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[At,ic(At),(u,l)=>{let h=0;for(const m of l)h+=m.evaluate(u);return h}],"*":[At,ic(At),(u,l)=>{let h=1;for(const m of l)h*=m.evaluate(u);return h}],"-":{type:At,overloads:[[[At,At],(u,[l,h])=>l.evaluate(u)-h.evaluate(u)],[[At],(u,[l])=>-l.evaluate(u)]]},"/":[At,[At,At],(u,[l,h])=>l.evaluate(u)/h.evaluate(u)],"%":[At,[At,At],(u,[l,h])=>l.evaluate(u)%h.evaluate(u)],ln2:[At,[],()=>Math.LN2],pi:[At,[],()=>Math.PI],e:[At,[],()=>Math.E],"^":[At,[At,At],(u,[l,h])=>Math.pow(l.evaluate(u),h.evaluate(u))],sqrt:[At,[At],(u,[l])=>Math.sqrt(l.evaluate(u))],log10:[At,[At],(u,[l])=>Math.log(l.evaluate(u))/Math.LN10],ln:[At,[At],(u,[l])=>Math.log(l.evaluate(u))],log2:[At,[At],(u,[l])=>Math.log(l.evaluate(u))/Math.LN2],sin:[At,[At],(u,[l])=>Math.sin(l.evaluate(u))],cos:[At,[At],(u,[l])=>Math.cos(l.evaluate(u))],tan:[At,[At],(u,[l])=>Math.tan(l.evaluate(u))],asin:[At,[At],(u,[l])=>Math.asin(l.evaluate(u))],acos:[At,[At],(u,[l])=>Math.acos(l.evaluate(u))],atan:[At,[At],(u,[l])=>Math.atan(l.evaluate(u))],min:[At,ic(At),(u,l)=>Math.min(...l.map((h=>h.evaluate(u))))],max:[At,ic(At),(u,l)=>Math.max(...l.map((h=>h.evaluate(u))))],abs:[At,[At],(u,[l])=>Math.abs(l.evaluate(u))],round:[At,[At],(u,[l])=>{const h=l.evaluate(u);return h<0?-Math.round(-h):Math.round(h)}],floor:[At,[At],(u,[l])=>Math.floor(l.evaluate(u))],ceil:[At,[At],(u,[l])=>Math.ceil(l.evaluate(u))],"filter-==":[Si,[ii,gi],(u,[l,h])=>u.properties()[l.value]===h.value],"filter-id-==":[Si,[gi],(u,[l])=>u.id()===l.value],"filter-type-==":[Si,[ii],(u,[l])=>u.geometryType()===l.value],"filter-<":[Si,[ii,gi],(u,[l,h])=>{const m=u.properties()[l.value],b=h.value;return typeof m==typeof b&&m<b}],"filter-id-<":[Si,[gi],(u,[l])=>{const h=u.id(),m=l.value;return typeof h==typeof m&&h<m}],"filter->":[Si,[ii,gi],(u,[l,h])=>{const m=u.properties()[l.value],b=h.value;return typeof m==typeof b&&m>b}],"filter-id->":[Si,[gi],(u,[l])=>{const h=u.id(),m=l.value;return typeof h==typeof m&&h>m}],"filter-<=":[Si,[ii,gi],(u,[l,h])=>{const m=u.properties()[l.value],b=h.value;return typeof m==typeof b&&m<=b}],"filter-id-<=":[Si,[gi],(u,[l])=>{const h=u.id(),m=l.value;return typeof h==typeof m&&h<=m}],"filter->=":[Si,[ii,gi],(u,[l,h])=>{const m=u.properties()[l.value],b=h.value;return typeof m==typeof b&&m>=b}],"filter-id->=":[Si,[gi],(u,[l])=>{const h=u.id(),m=l.value;return typeof h==typeof m&&h>=m}],"filter-has":[Si,[gi],(u,[l])=>l.value in u.properties()],"filter-has-id":[Si,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Si,[Ga(ii)],(u,[l])=>l.value.indexOf(u.geometryType())>=0],"filter-id-in":[Si,[Ga(gi)],(u,[l])=>l.value.indexOf(u.id())>=0],"filter-in-small":[Si,[ii,Ga(gi)],(u,[l,h])=>h.value.indexOf(u.properties()[l.value])>=0],"filter-in-large":[Si,[ii,Ga(gi)],(u,[l,h])=>(function(m,b,C,A){for(;C<=A;){const D=C+A>>1;if(b[D]===m)return!0;b[D]>m?A=D-1:C=D+1}return!1})(u.properties()[l.value],h.value,0,h.value.length-1)],all:{type:Si,overloads:[[[Si,Si],(u,[l,h])=>l.evaluate(u)&&h.evaluate(u)],[ic(Si),(u,l)=>{for(const h of l)if(!h.evaluate(u))return!1;return!0}]]},any:{type:Si,overloads:[[[Si,Si],(u,[l,h])=>l.evaluate(u)||h.evaluate(u)],[ic(Si),(u,l)=>{for(const h of l)if(h.evaluate(u))return!0;return!1}]]},"!":[Si,[Si],(u,[l])=>!l.evaluate(u)],"is-supported-script":[Si,[ii],(u,[l])=>{const h=u.globals&&u.globals.isSupportedScript;return!h||h(l.evaluate(u))}],upcase:[ii,[ii],(u,[l])=>l.evaluate(u).toUpperCase()],downcase:[ii,[ii],(u,[l])=>l.evaluate(u).toLowerCase()],concat:[ii,ic(gi),(u,l)=>l.map((h=>As(h.evaluate(u)))).join("")],"resolved-locale":[ii,[wn],(u,[l])=>l.evaluate(u).resolvedLocale()]});class cp{constructor(l,h,m){this.expression=l,this._warningHistory={},this._evaluator=new Nc,this._defaultValue=h?(function(b){if(b.type==="color"&&Td(b.default))return new Ui(0,0,0,0);switch(b.type){case"color":return Ui.parse(b.default)||null;case"padding":return za.parse(b.default)||null;case"numberArray":return Cn.parse(b.default)||null;case"colorArray":return zt.parse(b.default)||null;case"variableAnchorOffsetCollection":return An.parse(b.default)||null;case"projectionDefinition":return hr.parse(b.default)||null;default:return b.default===void 0?null:b.default}})(h):null,this._enumValues=h&&h.type==="enum"?h.values:null,this._globalState=m}evaluateWithoutErrorHandling(l,h,m,b,C,A){return this._globalState&&(l=nc(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=b,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A,this.expression.evaluate(this._evaluator)}evaluate(l,h,m,b,C,A){this._globalState&&(l=nc(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=b,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new jn(`Expected value to be one of ${Object.keys(this._enumValues).map((B=>JSON.stringify(B))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function Wc(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Is}function Wh(u,l,h){const m=new Bo(Is,kd,[],l?(function(C){const A={color:Xi,string:ii,number:At,enum:ii,boolean:Si,formatted:cn,padding:dn,numberArray:Ln,colorArray:us,projectionDefinition:Hn,resolvedImage:Nn,variableAnchorOffsetCollection:Tt};return C.type==="array"?Ga(A[C.value]||gi,C.length):A[C.type]})(l):void 0),b=m.parse(u,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return b?Im(new cp(b,l,h)):Uc(m.errors)}class Ed{constructor(l,h,m){this.kind=l,this._styleExpression=h,this.isStateDependent=l!=="constant"&&!Uh(h.expression),this.globalStateRefs=Il(h.expression),this._globalState=m}evaluateWithoutErrorHandling(l,h,m,b,C,A){return this._globalState&&(l=nc(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,h,m,b,C,A)}evaluate(l,h,m,b,C,A){return this._globalState&&(l=nc(l,this._globalState)),this._styleExpression.evaluate(l,h,m,b,C,A)}}class hp{constructor(l,h,m,b,C){this.kind=l,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=l!=="camera"&&!Uh(h.expression),this.globalStateRefs=Il(h.expression),this.interpolationType=b,this._globalState=C}evaluateWithoutErrorHandling(l,h,m,b,C,A){return this._globalState&&(l=nc(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,h,m,b,C,A)}evaluate(l,h,m,b,C,A){return this._globalState&&(l=nc(l,this._globalState)),this._styleExpression.evaluate(l,h,m,b,C,A)}interpolationFactor(l,h,m){return this.interpolationType?zr.interpolationFactor(this.interpolationType,l,h,m):0}}function up(u,l,h){const m=Wh(u,l,h);if(m.result==="error")return m;const b=m.value.expression,C=Cd(b);if(!C&&!Gc(l))return Uc([new Dt("","data expressions not supported")]);const A=Ad(b,["zoom"]);if(!A&&!Pm(l))return Uc([new Dt("","zoom expressions not supported")]);const D=Id(b);return D||A?D instanceof Dt?Uc([D]):D instanceof zr&&!lp(l)?Uc([new Dt("",'"interpolate" expressions cannot be used with this property')]):Im(D?new hp(C?"camera":"composite",m.value,D.labels,D instanceof zr?D.interpolation:void 0,h):new Ed(C?"constant":"source",m.value,h)):Uc([new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Md{constructor(l,h){this._parameters=l,this._specification=h,xi(this,Lm(this._parameters,this._specification))}static deserialize(l){return new Md(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Id(u){let l=null;if(u instanceof Rn)l=Id(u.result);else if(u instanceof na){for(const h of u.args)if(l=Id(h),l)break}else(u instanceof _t||u instanceof zr)&&u.input instanceof pr&&u.input.name==="zoom"&&(l=u);return l instanceof Dt||u.eachChild((h=>{const m=Id(h);m instanceof Dt?l=m:!l&&m?l=new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&m&&l!==m&&(l=new Dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function Il(u,l=new Set){return u instanceof fr&&l.add(u.key),u.eachChild((h=>{Il(h,l)})),l}function nc(u,l){const{zoom:h,heatmapDensity:m,elevation:b,lineProgress:C,isSupportedScript:A,accumulated:D}=u??{};return{zoom:h,heatmapDensity:m,elevation:b,lineProgress:C,isSupportedScript:A,accumulated:D,globalState:l}}function dp(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const l of u.slice(1))if(!dp(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const Gx={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $h(u,l){if(u==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};dp(u)||(u=Xh(u));const h=Wh(u,Gx,l);if(h.result==="error")throw new Error(h.value.map((m=>`${m.key}: ${m.message}`)).join(", "));return{filter:(m,b,C)=>h.value.evaluate(m,b,{},C),needGeometry:Rm(u),getGlobalStateRefs:()=>Il(h.value.expression)}}function Wx(u,l){return u<l?-1:u>l?1:0}function Rm(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let l=1;l<u.length;l++)if(Rm(u[l]))return!0;return!1}function Xh(u){if(!u)return!0;const l=u[0];return u.length<=1?l!=="any":l==="=="?Pd(u[1],u[2],"=="):l==="!="?Yh(Pd(u[1],u[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Pd(u[1],u[2],l):l==="any"?(h=u.slice(1),["any"].concat(h.map(Xh))):l==="all"?["all"].concat(u.slice(1).map(Xh)):l==="none"?["all"].concat(u.slice(1).map(Xh).map(Yh)):l==="in"?Om(u[1],u.slice(2)):l==="!in"?Yh(Om(u[1],u.slice(2))):l==="has"?zm(u[1]):l!=="!has"||Yh(zm(u[1]));var h}function Pd(u,l,h){switch(u){case"$type":return[`filter-type-${h}`,l];case"$id":return[`filter-id-${h}`,l];default:return[`filter-${h}`,u,l]}}function Om(u,l){if(l.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((h=>typeof h!=typeof l[0]))?["filter-in-large",u,["literal",l.sort(Wx)]]:["filter-in-small",u,["literal",l]]}}function zm(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Yh(u){return["!",u]}function Ld(u){const l=typeof u;if(l==="number"||l==="boolean"||l==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let b="[";for(const C of u)b+=`${Ld(C)},`;return`${b}]`}const h=Object.keys(u).sort();let m="{";for(let b=0;b<h.length;b++)m+=`${JSON.stringify(h[b])}:${Ld(u[h[b]])},`;return`${m}}`}function Fm(u){let l="";for(const h of an)l+=`/${Ld(u[h])}`;return l}function Bm(u){const l=u.value;return l?[new St(u.key,l,"constants have been deprecated as of v8")]:[]}function Fa(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function ac(u){if(Array.isArray(u))return u.map(ac);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const l={};for(const h in u)l[h]=ac(u[h]);return l}return Fa(u)}function Ps(u){const l=u.key,h=u.value,m=u.valueSpec||{},b=u.objectElementValidators||{},C=u.style,A=u.styleSpec,D=u.validateSpec;let B=[];const U=Zi(h);if(U!=="object")return[new St(l,h,`object expected, ${U} found`)];for(const Y in h){const Q=Y.split(".")[0],ne=br(m,Q)||m["*"];let ae;if(br(b,Q))ae=b[Q];else if(br(m,Q)){if(h[Y]===void 0)continue;ae=D}else if(b["*"])ae=b["*"];else{if(!m["*"]){B.push(new St(l,h[Y],`unknown property "${Y}"`));continue}ae=D}B=B.concat(ae({key:(l&&`${l}.`)+Y,value:h[Y],valueSpec:ne,style:C,styleSpec:A,object:h,objectKey:Y,validateSpec:D},h))}for(const Y in m)b[Y]||m[Y].required&&m[Y].default===void 0&&h[Y]===void 0&&B.push(new St(l,h,`missing required property "${Y}"`));return B}function Dd(u){const l=u.value,h=u.valueSpec,m=u.style,b=u.styleSpec,C=u.key,A=u.arrayElementValidator||u.validateSpec;if(Zi(l)!=="array")return[new St(C,l,`array expected, ${Zi(l)} found`)];if(h.length&&l.length!==h.length)return[new St(C,l,`array length ${h.length} expected, length ${l.length} found`)];let D={type:h.value,values:h.values};b.$version<7&&(D.function=h.function),Zi(h.value)==="object"&&(D=h.value);let B=[];for(let U=0;U<l.length;U++)B=B.concat(A({array:l,arrayIndex:U,value:l[U],valueSpec:D,validateSpec:u.validateSpec,style:m,styleSpec:b,key:`${C}[${U}]`}));return B}function qh(u){const l=u.key,h=u.value,m=u.valueSpec;let b=Zi(h);return b==="number"&&h!=h&&(b="NaN"),b!=="number"?[new St(l,h,`number expected, ${b} found`)]:"minimum"in m&&h<m.minimum?[new St(l,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new St(l,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function Rd(u){const l=u.valueSpec,h=Fa(u.value.type);let m,b,C,A={};const D=h!=="categorical"&&u.value.property===void 0,B=!D,U=Zi(u.value.stops)==="array"&&Zi(u.value.stops[0])==="array"&&Zi(u.value.stops[0][0])==="object",Y=Ps({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(ae){if(h==="identity")return[new St(ae.key,ae.value,'identity function may not have a "stops" property')];let ce=[];const ue=ae.value;return ce=ce.concat(Dd({key:ae.key,value:ue,valueSpec:ae.valueSpec,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec,arrayElementValidator:Q})),Zi(ue)==="array"&&ue.length===0&&ce.push(new St(ae.key,ue,"array must have at least one stop")),ce},default:function(ae){return ae.validateSpec({key:ae.key,value:ae.value,valueSpec:l,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec})}}});return h==="identity"&&D&&Y.push(new St(u.key,u.value,'missing required property "property"')),h==="identity"||u.value.stops||Y.push(new St(u.key,u.value,'missing required property "stops"')),h==="exponential"&&u.valueSpec.expression&&!lp(u.valueSpec)&&Y.push(new St(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(B&&!Gc(u.valueSpec)?Y.push(new St(u.key,u.value,"property functions not supported")):D&&!Pm(u.valueSpec)&&Y.push(new St(u.key,u.value,"zoom functions not supported"))),h!=="categorical"&&!U||u.value.property!==void 0||Y.push(new St(u.key,u.value,'"property" property is required')),Y;function Q(ae){let ce=[];const ue=ae.value,pe=ae.key;if(Zi(ue)!=="array")return[new St(pe,ue,`array expected, ${Zi(ue)} found`)];if(ue.length!==2)return[new St(pe,ue,`array length 2 expected, length ${ue.length} found`)];if(U){if(Zi(ue[0])!=="object")return[new St(pe,ue,`object expected, ${Zi(ue[0])} found`)];if(ue[0].zoom===void 0)return[new St(pe,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new St(pe,ue,"object stop key must have value")];if(C&&C>Fa(ue[0].zoom))return[new St(pe,ue[0].zoom,"stop zoom values must appear in ascending order")];Fa(ue[0].zoom)!==C&&(C=Fa(ue[0].zoom),b=void 0,A={}),ce=ce.concat(Ps({key:`${pe}[0]`,value:ue[0],valueSpec:{zoom:{}},validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{zoom:qh,value:ne}}))}else ce=ce.concat(ne({key:`${pe}[0]`,value:ue[0],validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec},ue));return Wc(ac(ue[1]))?ce.concat([new St(`${pe}[1]`,ue[1],"expressions are not allowed in function stops.")]):ce.concat(ae.validateSpec({key:`${pe}[1]`,value:ue[1],valueSpec:l,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec}))}function ne(ae,ce){const ue=Zi(ae.value),pe=Fa(ae.value),ve=ae.value!==null?ae.value:ce;if(m){if(ue!==m)return[new St(ae.key,ve,`${ue} stop domain type must match previous stop domain type ${m}`)]}else m=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new St(ae.key,ve,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&h!=="categorical"){let ze=`number expected, ${ue} found`;return Gc(l)&&h===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new St(ae.key,ve,ze)]}return h!=="categorical"||ue!=="number"||isFinite(pe)&&Math.floor(pe)===pe?h!=="categorical"&&ue==="number"&&b!==void 0&&pe<b?[new St(ae.key,ve,"stop domain values must appear in ascending order")]:(b=pe,h==="categorical"&&pe in A?[new St(ae.key,ve,"stop domain values must be unique")]:(A[pe]=!0,[])):[new St(ae.key,ve,`integer expected, found ${pe}`)]}}function Pl(u){const l=(u.expressionContext==="property"?up:Wh)(ac(u.value),u.valueSpec);if(l.result==="error")return l.value.map((m=>new St(`${u.key}${m.key}`,u.value,m.message)));const h=l.value.expression||l.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!h.outputDefined())return[new St(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Uh(h))return[new St(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Uh(h))return[new St(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Ad(h,["zoom","feature-state"]))return[new St(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Cd(h))return[new St(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zh(u){const l=u.key,h=u.value,m=Zi(h);return m!=="string"?[new St(l,h,`color expected, ${m} found`)]:Ui.parse(String(h))?[]:[new St(l,h,`color expected, "${h}" found`)]}function rc(u){const l=u.key,h=u.value,m=u.valueSpec,b=[];return Array.isArray(m.values)?m.values.indexOf(Fa(h))===-1&&b.push(new St(l,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(Fa(h))===-1&&b.push(new St(l,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),b}function $c(u){return dp(ac(u.value))?Pl(xi({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Nm(u)}function Nm(u){const l=u.value,h=u.key;if(Zi(l)!=="array")return[new St(h,l,`array expected, ${Zi(l)} found`)];const m=u.styleSpec;let b,C=[];if(l.length<1)return[new St(h,l,"filter array must have at least 1 element")];switch(C=C.concat(rc({key:`${h}[0]`,value:l[0],valueSpec:m.filter_operator,style:u.style,styleSpec:u.styleSpec})),Fa(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Fa(l[1])==="$type"&&C.push(new St(h,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&C.push(new St(h,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(b=Zi(l[1]),b!=="string"&&C.push(new St(`${h}[1]`,l[1],`string expected, ${b} found`)));for(let A=2;A<l.length;A++)b=Zi(l[A]),Fa(l[1])==="$type"?C=C.concat(rc({key:`${h}[${A}]`,value:l[A],valueSpec:m.geometry_type,style:u.style,styleSpec:u.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&C.push(new St(`${h}[${A}]`,l[A],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let A=1;A<l.length;A++)C=C.concat(Nm({key:`${h}[${A}]`,value:l[A],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":b=Zi(l[1]),l.length!==2?C.push(new St(h,l,`filter array for "${l[0]}" operator must have 2 elements`)):b!=="string"&&C.push(new St(`${h}[1]`,l[1],`string expected, ${b} found`))}return C}function jm(u,l){const h=u.key,m=u.validateSpec,b=u.style,C=u.styleSpec,A=u.value,D=u.objectKey,B=C[`${l}_${u.layerType}`];if(!B)return[];const U=D.match(/^(.*)-transition$/);if(l==="paint"&&U&&B[U[1]]&&B[U[1]].transition)return m({key:h,value:A,valueSpec:C.transition,style:b,styleSpec:C});const Y=u.valueSpec||B[D];if(!Y)return[new St(h,A,`unknown property "${D}"`)];let Q;if(Zi(A)==="string"&&Gc(Y)&&!Y.tokens&&(Q=/^{([^}]+)}$/.exec(A)))return[new St(h,A,`"${D}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Q[1])} }\`.`)];const ne=[];return u.layerType==="symbol"&&D==="text-font"&&Td(ac(A))&&Fa(A.type)==="identity"&&ne.push(new St(h,A,'"text-font" does not support identity functions')),ne.concat(m({key:u.key,value:A,valueSpec:Y,style:b,styleSpec:C,expressionContext:"property",propertyType:l,propertyKey:D}))}function Vm(u){return jm(u,"paint")}function Hm(u){return jm(u,"layout")}function Um(u){let l=[];const h=u.value,m=u.key,b=u.style,C=u.styleSpec;if(Zi(h)!=="object")return[new St(m,h,`object expected, ${Zi(h)} found`)];h.type||h.ref||l.push(new St(m,h,'either "type" or "ref" is required'));let A=Fa(h.type);const D=Fa(h.ref);if(h.id){const B=Fa(h.id);for(let U=0;U<u.arrayIndex;U++){const Y=b.layers[U];Fa(Y.id)===B&&l.push(new St(m,h.id,`duplicate layer id "${h.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in h){let B;["type","source","source-layer","filter","layout"].forEach((U=>{U in h&&l.push(new St(m,h[U],`"${U}" is prohibited for ref layers`))})),b.layers.forEach((U=>{Fa(U.id)===D&&(B=U)})),B?B.ref?l.push(new St(m,h.ref,"ref cannot reference another ref layer")):A=Fa(B.type):l.push(new St(m,h.ref,`ref layer "${D}" not found`))}else if(A!=="background")if(h.source){const B=b.sources&&b.sources[h.source],U=B&&Fa(B.type);B?U==="vector"&&A==="raster"?l.push(new St(m,h.source,`layer "${h.id}" requires a raster source`)):U!=="raster-dem"&&A==="hillshade"||U!=="raster-dem"&&A==="color-relief"?l.push(new St(m,h.source,`layer "${h.id}" requires a raster-dem source`)):U==="raster"&&A!=="raster"?l.push(new St(m,h.source,`layer "${h.id}" requires a vector source`)):U!=="vector"||h["source-layer"]?U==="raster-dem"&&A!=="hillshade"&&A!=="color-relief"?l.push(new St(m,h.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):A!=="line"||!h.paint||!h.paint["line-gradient"]||U==="geojson"&&B.lineMetrics||l.push(new St(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new St(m,h,`layer "${h.id}" must specify a "source-layer"`)):l.push(new St(m,h.source,`source "${h.source}" not found`))}else l.push(new St(m,h,'missing required property "source"'));return l=l.concat(Ps({key:m,value:h,valueSpec:C.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${m}.type`,value:h.type,valueSpec:C.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:h,objectKey:"type"}),filter:$c,layout:B=>Ps({layer:h,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":U=>Hm(xi({layerType:A},U))}}),paint:B=>Ps({layer:h,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":U=>Vm(xi({layerType:A},U))}})}})),l}function Ll(u){const l=u.value,h=u.key,m=Zi(l);return m!=="string"?[new St(h,l,`string expected, ${m} found`)]:[]}const fp={promoteId:function({key:u,value:l}){if(Zi(l)==="string")return Ll({key:u,value:l});{const h=[];for(const m in l)h.push(...Ll({key:`${u}.${m}`,value:l[m]}));return h}}};function pp(u){const l=u.value,h=u.key,m=u.styleSpec,b=u.style,C=u.validateSpec;if(!l.type)return[new St(h,l,'"type" is required')];const A=Fa(l.type);let D;switch(A){case"vector":case"raster":return D=Ps({key:h,value:l,valueSpec:m[`source_${A.replace("-","_")}`],style:u.style,styleSpec:m,objectElementValidators:fp,validateSpec:C}),D;case"raster-dem":return D=(function(B){var U;const Y=(U=B.sourceName)!==null&&U!==void 0?U:"",Q=B.value,ne=B.styleSpec,ae=ne.source_raster_dem,ce=B.style;let ue=[];const pe=Zi(Q);if(Q===void 0)return ue;if(pe!=="object")return ue.push(new St("source_raster_dem",Q,`object expected, ${pe} found`)),ue;const ve=Fa(Q.encoding)==="custom",ze=["redFactor","greenFactor","blueFactor","baseShift"],Se=B.value.encoding?`"${B.value.encoding}"`:"Default";for(const Ce in Q)!ve&&ze.includes(Ce)?ue.push(new St(Ce,Q[Ce],`In "${Y}": "${Ce}" is only valid when "encoding" is set to "custom". ${Se} encoding found`)):ae[Ce]?ue=ue.concat(B.validateSpec({key:Ce,value:Q[Ce],valueSpec:ae[Ce],validateSpec:B.validateSpec,style:ce,styleSpec:ne})):ue.push(new St(Ce,Q[Ce],`unknown property "${Ce}"`));return ue})({sourceName:h,value:l,style:u.style,styleSpec:m,validateSpec:C}),D;case"geojson":if(D=Ps({key:h,value:l,valueSpec:m.source_geojson,style:b,styleSpec:m,validateSpec:C,objectElementValidators:fp}),l.cluster)for(const B in l.clusterProperties){const[U,Y]=l.clusterProperties[B],Q=typeof U=="string"?[U,["accumulated"],["get",B]]:U;D.push(...Pl({key:`${h}.${B}.map`,value:Y,expressionContext:"cluster-map"})),D.push(...Pl({key:`${h}.${B}.reduce`,value:Q,expressionContext:"cluster-reduce"}))}return D;case"video":return Ps({key:h,value:l,valueSpec:m.source_video,style:b,validateSpec:C,styleSpec:m});case"image":return Ps({key:h,value:l,valueSpec:m.source_image,style:b,validateSpec:C,styleSpec:m});case"canvas":return[new St(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rc({key:`${h}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Kh(u){const l=u.value,h=u.styleSpec,m=h.light,b=u.style;let C=[];const A=Zi(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new St("light",l,`object expected, ${A} found`)]),C;for(const D in l){const B=D.match(/^(.*)-transition$/);C=C.concat(B&&m[B[1]]&&m[B[1]].transition?u.validateSpec({key:D,value:l[D],valueSpec:h.transition,validateSpec:u.validateSpec,style:b,styleSpec:h}):m[D]?u.validateSpec({key:D,value:l[D],valueSpec:m[D],validateSpec:u.validateSpec,style:b,styleSpec:h}):[new St(D,l[D],`unknown property "${D}"`)])}return C}function Gm(u){const l=u.value,h=u.styleSpec,m=h.sky,b=u.style,C=Zi(l);if(l===void 0)return[];if(C!=="object")return[new St("sky",l,`object expected, ${C} found`)];let A=[];for(const D in l)A=A.concat(m[D]?u.validateSpec({key:D,value:l[D],valueSpec:m[D],style:b,styleSpec:h}):[new St(D,l[D],`unknown property "${D}"`)]);return A}function gp(u){const l=u.value,h=u.styleSpec,m=h.terrain,b=u.style;let C=[];const A=Zi(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new St("terrain",l,`object expected, ${A} found`)]),C;for(const D in l)C=C.concat(m[D]?u.validateSpec({key:D,value:l[D],valueSpec:m[D],validateSpec:u.validateSpec,style:b,styleSpec:h}):[new St(D,l[D],`unknown property "${D}"`)]);return C}function mp(u){let l=[];const h=u.value,m=u.key;if(Array.isArray(h)){const b=[],C=[];for(const A in h)h[A].id&&b.includes(h[A].id)&&l.push(new St(m,h,`all the sprites' ids must be unique, but ${h[A].id} is duplicated`)),b.push(h[A].id),h[A].url&&C.includes(h[A].url)&&l.push(new St(m,h,`all the sprites' URLs must be unique, but ${h[A].url} is duplicated`)),C.push(h[A].url),l=l.concat(Ps({key:`${m}[${A}]`,value:h[A],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return l}return Ll({key:m,value:h})}function Wm(u){return!!u&&u.constructor===Object}function _p(u){return Wm(u.value)?[]:[new St(u.key,u.value,`object expected, ${Zi(u.value)} found`)]}const xp={"*":()=>[],array:Dd,boolean:function(u){const l=u.value,h=u.key,m=Zi(l);return m!=="boolean"?[new St(h,l,`boolean expected, ${m} found`)]:[]},number:qh,color:Zh,constants:Bm,enum:rc,filter:$c,function:Rd,layer:Um,object:Ps,source:pp,light:Kh,sky:Gm,terrain:gp,projection:function(u){const l=u.value,h=u.styleSpec,m=h.projection,b=u.style,C=Zi(l);if(l===void 0)return[];if(C!=="object")return[new St("projection",l,`object expected, ${C} found`)];let A=[];for(const D in l)A=A.concat(m[D]?u.validateSpec({key:D,value:l[D],valueSpec:m[D],style:b,styleSpec:h}):[new St(D,l[D],`unknown property "${D}"`)]);return A},projectionDefinition:function(u){const l=u.key;let h=u.value;h=h instanceof String?h.valueOf():h;const m=Zi(h);return m!=="array"||(function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"})(h)||(function(b){return!!["interpolate","step","literal"].includes(b[0])})(h)?["array","string"].includes(m)?[]:[new St(l,h,`projection expected, invalid type "${m}" found`)]:[new St(l,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:Ll,formatted:function(u){return Ll(u).length===0?[]:Pl(u)},resolvedImage:function(u){return Ll(u).length===0?[]:Pl(u)},padding:function(u){const l=u.key,h=u.value;if(Zi(h)==="array"){if(h.length<1||h.length>4)return[new St(l,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let b=[];for(let C=0;C<h.length;C++)b=b.concat(u.validateSpec({key:`${l}[${C}]`,value:h[C],validateSpec:u.validateSpec,valueSpec:m}));return b}return qh({key:l,value:h,valueSpec:{}})},numberArray:function(u){const l=u.key,h=u.value;if(Zi(h)==="array"){const m={type:"number"};if(h.length<1)return[new St(l,h,"array length at least 1 expected, length 0 found")];let b=[];for(let C=0;C<h.length;C++)b=b.concat(u.validateSpec({key:`${l}[${C}]`,value:h[C],validateSpec:u.validateSpec,valueSpec:m}));return b}return qh({key:l,value:h,valueSpec:{}})},colorArray:function(u){const l=u.key,h=u.value;if(Zi(h)==="array"){if(h.length<1)return[new St(l,h,"array length at least 1 expected, length 0 found")];let m=[];for(let b=0;b<h.length;b++)m=m.concat(Zh({key:`${l}[${b}]`,value:h[b]}));return m}return Zh({key:l,value:h})},variableAnchorOffsetCollection:function(u){const l=u.key,h=u.value,m=Zi(h),b=u.styleSpec;if(m!=="array"||h.length<1||h.length%2!=0)return[new St(l,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let A=0;A<h.length;A+=2)C=C.concat(rc({key:`${l}[${A}]`,value:h[A],valueSpec:b.layout_symbol["text-anchor"]})),C=C.concat(Dd({key:`${l}[${A+1}]`,value:h[A+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:b}));return C},sprite:mp,state:_p,fontFaces:function(u){const l=u.key,h=u.value,m=u.validateSpec,b=u.styleSpec,C=u.style;if(!Wm(h))return[new St(l,h,`object expected, ${Zi(h)} found`)];const A=[];for(const D in h){const B=h[D],U=Zi(B);if(U==="string")A.push(...Ll({key:`${l}.${D}`,value:B}));else if(U==="array"){const Y={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[Q,ne]of B.entries())A.push(...Ps({key:`${l}.${D}[${Q}]`,value:ne,valueSpec:Y,styleSpec:b,style:C,validateSpec:m}))}else A.push(new St(`${l}.${D}`,B,`string or array expected, ${U} found`))}return A}};function Dl(u){const l=u.value,h=u.valueSpec,m=u.styleSpec;return u.validateSpec=Dl,h.expression&&Td(Fa(l))?Rd(u):h.expression&&Wc(ac(l))?Pl(u):h.type&&xp[h.type]?xp[h.type](u):Ps(xi({},u,{valueSpec:h.type?m[h.type]:h}))}function $m(u){const l=u.value,h=u.key,m=Ll(u);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new St(h,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&m.push(new St(h,l,'"glyphs" url must include a "{range}" token'))),m}function qs(u,l=rt){let h=[];return h=h.concat(Dl({key:"",value:u,valueSpec:l.$root,styleSpec:l,style:u,validateSpec:Dl,objectElementValidators:{glyphs:$m,"*":()=>[]}})),u.constants&&(h=h.concat(Bm({key:"constants",value:u.constants}))),Xm(h)}function fo(u){return function(l){return u(Object.assign({},l,{validateSpec:Dl}))}}function Xm(u){return[].concat(u).sort(((l,h)=>l.line-h.line))}function po(u){return function(...l){return Xm(u.apply(this,l))}}qs.source=po(fo(pp)),qs.sprite=po(fo(mp)),qs.glyphs=po(fo($m)),qs.light=po(fo(Kh)),qs.sky=po(fo(Gm)),qs.terrain=po(fo(gp)),qs.state=po(fo(_p)),qs.layer=po(fo(Um)),qs.filter=po(fo($c)),qs.paintProperty=po(fo(Vm)),qs.layoutProperty=po(fo(Hm));const $x={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class Qh{constructor(l,h){this._globalState=h,this.setValue(l)}evaluate(){var l;return(l=this._literalValue)!==null&&l!==void 0?l:this._compiledValue.evaluate({})}setValue(l){if(l==null||l==="visible"||l==="none")return this._literalValue=l==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const h=Wh(l,$x,this._globalState);if(h.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(h.value.map((m=>`${m.key}: ${m.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=h.value,this._globalStateRefs=Il(h.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Jh=rt,Sr=qs,eu=Sr.light,Ym=Sr.sky,Xx=Sr.paintProperty,Yx=Sr.layoutProperty;function Xc(u,l){let h=!1;if(l&&l.length)for(const m of l)u.fire(new si(new Error(m.message))),h=!0;return h}class Yc{constructor(l,h,m){const b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const A=new Int32Array(this.arrayBuffer);l=A[0],this.d=(h=A[1])+2*(m=A[2]);for(let B=0;B<this.d*this.d;B++){const U=A[3+B],Y=A[3+B+1];b.push(U===Y?null:A.subarray(U,Y))}const D=A[3+b.length+1];this.keys=A.subarray(A[3+b.length],D),this.bboxes=A.subarray(D),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let A=0;A<this.d*this.d;A++)b.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=l,this.padding=m,this.scale=h/l,this.uid=0;const C=m/h*l;this.min=-C,this.max=l+C}insert(l,h,m,b,C){this._forEachCell(h,m,b,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,h,m,b,C,A){this.cells[C].push(A)}query(l,h,m,b,C){const A=this.min,D=this.max;if(l<=A&&h<=A&&D<=m&&D<=b&&!C)return Array.prototype.slice.call(this.keys);{const B=[];return this._forEachCell(l,h,m,b,this._queryCell,B,{},C),B}}_queryCell(l,h,m,b,C,A,D,B){const U=this.cells[C];if(U!==null){const Y=this.keys,Q=this.bboxes;for(let ne=0;ne<U.length;ne++){const ae=U[ne];if(D[ae]===void 0){const ce=4*ae;(B?B(Q[ce+0],Q[ce+1],Q[ce+2],Q[ce+3]):l<=Q[ce+2]&&h<=Q[ce+3]&&m>=Q[ce+0]&&b>=Q[ce+1])?(D[ae]=!0,A.push(Y[ae])):D[ae]=!1}}}}_forEachCell(l,h,m,b,C,A,D,B){const U=this._convertToCellCoord(l),Y=this._convertToCellCoord(h),Q=this._convertToCellCoord(m),ne=this._convertToCellCoord(b);for(let ae=U;ae<=Q;ae++)for(let ce=Y;ce<=ne;ce++){const ue=this.d*ce+ae;if((!B||B(this._convertFromCellCoord(ae),this._convertFromCellCoord(ce),this._convertFromCellCoord(ae+1),this._convertFromCellCoord(ce+1)))&&C.call(this,l,h,m,b,ue,A,D,B))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,h=3+this.cells.length+1+1;let m=0;for(let A=0;A<this.cells.length;A++)m+=this.cells[A].length;const b=new Int32Array(h+m+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let C=h;for(let A=0;A<l.length;A++){const D=l[A];b[3+A]=C,b.set(D,C),C+=D.length}return b[3+l.length]=C,b.set(this.keys,C),C+=this.keys.length,b[3+l.length+1]=C,b.set(this.bboxes,C),C+=this.bboxes.length,b.buffer}static serialize(l,h){const m=l.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(l){return new Yc(l.buffer)}}const go={};function ti(u,l,h={}){if(go[u])throw new Error(`${u} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:u,writeable:!1}),go[u]={klass:l,omit:h.omit||[],shallow:h.shallow||[]}}ti("Object",Object),ti("Set",Set),ti("TransferableGridIndex",Yc),ti("Color",Ui),ti("Error",Error),ti("AJAXError",Pe),ti("ResolvedImage",ts),ti("StylePropertyFunction",Md),ti("StyleExpression",cp,{omit:["_evaluator"]}),ti("ZoomDependentExpression",hp),ti("ZoomConstantExpression",Ed),ti("CompoundExpression",pr,{omit:["_evaluate"]});for(const u in Is)Is[u]._classRegistryKey||ti(`Expression_${u}`,Is[u]);function Od(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function yp(u){return u.$name||u.constructor._classRegistryKey}function qc(u){return!(function(l){if(l===null||typeof l!="object")return!1;const h=yp(l);return!(!h||h==="Object")})(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||Od(u)||ji(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function tu(u,l){if(qc(u))return(Od(u)||ji(u))&&l&&l.push(u),ArrayBuffer.isView(u)&&l&&l.push(u.buffer),u instanceof ImageData&&l&&l.push(u.data.buffer),u;if(Array.isArray(u)){const C=[];for(const A of u)C.push(tu(A,l));return C}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const h=yp(u);if(!h)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!go[h])throw new Error(`${h} is not registered.`);const{klass:m}=go[h],b=m.serialize?m.serialize(u,l):{};if(m.serialize){if(l&&b===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in u){if(!u.hasOwnProperty(C)||go[h].omit.indexOf(C)>=0)continue;const A=u[C];b[C]=go[h].shallow.indexOf(C)>=0?A:tu(A,l)}u instanceof Error&&(b.message=u.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(b.$name=h),b}function iu(u){if(qc(u))return u;if(Array.isArray(u))return u.map(iu);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const l=yp(u)||"Object";if(!go[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:h}=go[l];if(!h)throw new Error(`can't deserialize unregistered class ${l}`);if(h.deserialize)return h.deserialize(u);const m=Object.create(h.prototype);for(const b of Object.keys(u)){if(b==="$name")continue;const C=u[b];m[b]=go[l].shallow.indexOf(b)>=0?C:iu(C)}return m}class vp{constructor(){this.first=!0}update(l,h){const m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}function nu(u){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(u))}function bp(u){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(u))}function qm(u){return/\s/u.test(String.fromCodePoint(u))}function Zc(u){for(const l of u)if(bp(l.codePointAt(0)))return!0;return!1}function qx(u){for(const l of u)if(!Zm(l.codePointAt(0)))return!1;return!0}function zd(u){const l=u.map((h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}})).filter((h=>h));return new RegExp(l.join("|"),"u")}const Fd=zd(["Arab","Dupl","Mong","Ougr","Syrc"]);function Zm(u){return!Fd.test(String.fromCodePoint(u))}function wp(u){return!(bp(u)||(l=u,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(l))));var l}const Km=zd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sp(u){return Km.test(String.fromCodePoint(u))}function kp(u,l){return!(!l&&Sp(u)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(u)))}function Qm(u){for(const l of u)if(Sp(l.codePointAt(0)))return!0;return!1}const Rl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(Rl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,l){return r(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;const h=u.pluginURL,m=new Promise((C=>{this.loadScriptResolve=C}));l(h);const b=new Promise((C=>setTimeout((()=>C()),this.TIMEOUT)));if(yield Promise.race([m,b]),this.isParsed()){const C={pluginStatus:"loaded",pluginURL:h};return this.setState(C),C}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)}))}};class Wn{constructor(l,h){this.isSupportedScript=Zx,this.zoom=l,h?(this.now=h.now||0,this.fadeDuration=h.fadeDuration||0,this.zoomHistory=h.zoomHistory||new vp,this.transition=h.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new vp,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,h=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}function Zx(u){return(function(l,h){for(const m of l)if(!kp(m.codePointAt(0),h))return!1;return!0})(u,Rl.getRTLTextPluginStatus()==="loaded")}const au="-transition";class Bd{constructor(l,h,m){this.property=l,this.value=h,this.expression=(function(b,C,A){if(Td(b))return new Md(b,C);if(Wc(b)){const D=up(b,C,A);if(D.result==="error")throw new Error(D.value.map((B=>`${B.key}: ${B.message}`)).join(", "));return D.value}{let D=b;return C.type==="color"&&typeof b=="string"?D=Ui.parse(b):C.type!=="padding"||typeof b!="number"&&!Array.isArray(b)?C.type!=="numberArray"||typeof b!="number"&&!Array.isArray(b)?C.type!=="colorArray"||typeof b!="string"&&!Array.isArray(b)?C.type==="variableAnchorOffsetCollection"&&Array.isArray(b)?D=An.parse(b):C.type==="projectionDefinition"&&typeof b=="string"&&(D=hr.parse(b)):D=zt.parse(b):D=Cn.parse(b):D=za.parse(b),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>D}}})(h===void 0?l.specification.default:h,l.specification,m)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,h,m){return this.property.possiblyEvaluate(this,l,h,m)}}class Nd{constructor(l,h){this.property=l,this.value=new Bd(l,void 0,h)}transitioned(l,h){return new Jm(this.property,this.value,h,Zt({},l.transition,this.transition),l.now)}untransitioned(){return new Jm(this.property,this.value,null,{},0)}}class Cp{constructor(l,h){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=h}getValue(l){return en(this._values[l].value.value)}setValue(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Nd(this._values[l].property,this._globalState)),this._values[l].value=new Bd(this._values[l].property,h===null?void 0:en(h),this._globalState)}getTransition(l){return en(this._values[l].transition)}setTransition(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Nd(this._values[l].property,this._globalState)),this._values[l].transition=en(h)||void 0}serialize(){const l={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(l[h]=m);const b=this.getTransition(h);b!==void 0&&(l[`${h}${au}`]=b)}return l}transitioned(l,h){const m=new e0(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].transitioned(l,h._values[b]);return m}untransitioned(){const l=new e0(this._properties);for(const h of Object.keys(this._values))l._values[h]=this._values[h].untransitioned();return l}}class Jm{constructor(l,h,m,b,C){this.property=l,this.value=h,this.begin=C+b.delay||0,this.end=this.begin+b.duration||0,l.specification.transition&&(b.delay||b.duration)&&(this.prior=m)}possiblyEvaluate(l,h,m){const b=l.now||0,C=this.value.possiblyEvaluate(l,h,m),A=this.prior;if(A){if(b>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(b<this.begin)return A.possiblyEvaluate(l,h,m);{const D=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(l,h,m),C,Ai(D))}}return C}}class e0{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,h,m){const b=new ru(this._properties);for(const C of Object.keys(this._values))b._values[C]=this._values[C].possiblyEvaluate(l,h,m);return b}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class t0{constructor(l,h){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=h}hasValue(l){return this._values[l].value!==void 0}getValue(l){return en(this._values[l].value)}setValue(l,h){this._values[l]=new Bd(this._values[l].property,h===null?void 0:en(h),this._globalState)}serialize(){const l={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(l[h]=m)}return l}possiblyEvaluate(l,h,m){const b=new ru(this._properties);for(const C of Object.keys(this._values))b._values[C]=this._values[C].possiblyEvaluate(l,h,m);return b}}class mo{constructor(l,h,m){this.property=l,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,h,m,b){return this.property.evaluate(this.value,this.parameters,l,h,m,b)}}class ru{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class hi{constructor(l){this.specification=l}possiblyEvaluate(l,h){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(h)}interpolate(l,h,m){const b=Gn[this.specification.type];return b?b(l,h,m):l}}class Ci{constructor(l,h){this.specification=l,this.overrides=h}possiblyEvaluate(l,h,m,b){return new mo(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(h,null,{},m,b)}:l.expression,h)}interpolate(l,h,m){if(l.value.kind!=="constant"||h.value.kind!=="constant")return l;if(l.value.value===void 0||h.value.value===void 0)return new mo(this,{kind:"constant",value:void 0},l.parameters);const b=Gn[this.specification.type];if(b){const C=b(l.value.value,h.value.value,m);return new mo(this,{kind:"constant",value:C},l.parameters)}return l}evaluate(l,h,m,b,C,A){return l.kind==="constant"?l.value:l.evaluate(h,m,b,C,A)}}class su extends Ci{possiblyEvaluate(l,h,m,b){if(l.value===void 0)return new mo(this,{kind:"constant",value:void 0},h);if(l.expression.kind==="constant"){const C=l.expression.evaluate(h,null,{},m,b),A=l.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,D=this._calculate(A,A,A,h);return new mo(this,{kind:"constant",value:D},h)}if(l.expression.kind==="camera"){const C=this._calculate(l.expression.evaluate({zoom:h.zoom-1}),l.expression.evaluate({zoom:h.zoom}),l.expression.evaluate({zoom:h.zoom+1}),h);return new mo(this,{kind:"constant",value:C},h)}return new mo(this,l.expression,h)}evaluate(l,h,m,b,C,A){if(l.kind==="source"){const D=l.evaluate(h,m,b,C,A);return this._calculate(D,D,D,h)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(h.zoom)-1},m,b),l.evaluate({zoom:Math.floor(h.zoom)},m,b),l.evaluate({zoom:Math.floor(h.zoom)+1},m,b),h):l.value}_calculate(l,h,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:m,to:h}}interpolate(l){return l}}class jd{constructor(l){this.specification=l}possiblyEvaluate(l,h,m,b){if(l.value!==void 0){if(l.expression.kind==="constant"){const C=l.expression.evaluate(h,null,{},m,b);return this._calculate(C,C,C,h)}return this._calculate(l.expression.evaluate(new Wn(Math.floor(h.zoom-1),h)),l.expression.evaluate(new Wn(Math.floor(h.zoom),h)),l.expression.evaluate(new Wn(Math.floor(h.zoom+1),h)),h)}}_calculate(l,h,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:m,to:h}}interpolate(l){return l}}class Vd{constructor(l){this.specification=l}possiblyEvaluate(l,h,m,b){return!!l.expression.evaluate(h,null,{},m,b)}interpolate(){return!1}}class as{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in l){const m=l[h];m.specification.overridable&&this.overridableProperties.push(h);const b=this.defaultPropertyValues[h]=new Bd(m,void 0,void 0),C=this.defaultTransitionablePropertyValues[h]=new Nd(m,void 0);this.defaultTransitioningPropertyValues[h]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=b.possiblyEvaluate({})}}}ti("DataDrivenProperty",Ci),ti("DataConstantProperty",hi),ti("CrossFadedDataDrivenProperty",su),ti("CrossFadedProperty",jd),ti("ColorRampProperty",Vd);class Zs extends Oi{constructor(l,h,m){if(super(),this.id=l.id,this.type=l.type,this._globalState=m,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,this._visibilityExpression=(function(b,C){return new Qh(b,C)})(this.visibility,m),l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=$h(l.filter,m)),h.layout&&(this._unevaluatedLayout=new t0(h.layout,m)),h.paint)){this._transitionablePaint=new Cp(h.paint,m);for(const b in l.paint)this.setPaintProperty(b,l.paint[b],{validate:!1});for(const b in l.layout)this.setLayoutProperty(b,l.layout[b],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ru(h.paint)}}setFilter(l){this.filter=l,this._featureFilter=$h(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;for(const h of this._visibilityExpression.getGlobalStateRefs())l.add(h);if(this._unevaluatedLayout)for(const h in this._unevaluatedLayout._values){const m=this._unevaluatedLayout._values[h];for(const b of m.getGlobalStateRefs())l.add(b)}for(const h of this._featureFilter.getGlobalStateRefs())l.add(h);return l}getPaintAffectingGlobalStateRefs(){var l;const h=new globalThis.Map;if(this._transitionablePaint)for(const m in this._transitionablePaint._values){const b=this._transitionablePaint._values[m].value;for(const C of b.getGlobalStateRefs()){const A=(l=h.get(C))!==null&&l!==void 0?l:[];A.push({name:m,value:b.value}),h.set(C,A)}}return h}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(l,h,m={}){if(h==null||!this._validate(Yx,`layers.${this.id}.layout.${l}`,l,h,m))return l==="visibility"?(this.visibility=h,this._visibilityExpression.setValue(h),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(l,h)}getPaintProperty(l){return l.endsWith(au)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,h,m={}){if(h!=null&&this._validate(Xx,`layers.${this.id}.paint.${l}`,l,h,m))return!1;if(l.endsWith(au))return this._transitionablePaint.setTransition(l.slice(0,-11),h||void 0),!1;{const b=this._transitionablePaint._values[l],C=b.property.specification["property-type"]==="cross-faded-data-driven",A=b.value.isDataDriven(),D=b.value;this._transitionablePaint.setValue(l,h),this._handleSpecialPaintPropertyUpdate(l);const B=this._transitionablePaint._values[l].value;return B.isDataDriven()||A||C||this._handleOverridablePaintPropertyUpdate(l,D,B)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,h,m){return!1}isHidden(l=this.minzoom,h=!1){return!!(this.minzoom&&l<(h?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&l>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(l,h){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,h)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Li(l,((h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length)))}_validate(l,h,m,b,C={}){return(!C||C.validate!==!1)&&Xc(this,l.call(Sr,{key:h,layerType:this.type,objectKey:m,value:b,styleSpec:rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const h=this.paint.get(l);if(h instanceof mo&&Gc(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}let Ap;var i0={get paint(){return Ap=Ap||new as({"raster-opacity":new hi(rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new hi(rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new hi(rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new hi(rt.paint_raster["raster-brightness-max"]),"raster-saturation":new hi(rt.paint_raster["raster-saturation"]),"raster-contrast":new hi(rt.paint_raster["raster-contrast"]),"raster-resampling":new hi(rt.paint_raster["raster-resampling"]),"raster-fade-duration":new hi(rt.paint_raster["raster-fade-duration"])})}};class Kx extends Zs{constructor(l,h){super(l,i0,h)}}const Qx={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ou{constructor(l,h){this._structArray=l,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Sa{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,h){return l._trim(),h&&(l.isTransferred=!0,h.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const h=Object.create(this.prototype);return h.arrayBuffer=l.arrayBuffer,h.length=l.length,h.capacity=l.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ba(u,l=1){let h=0,m=0;return{members:u.map((b=>{const C=Qx[b.type].BYTES_PER_ELEMENT,A=h=sc(h,Math.max(l,C)),D=b.components||1;return m=Math.max(m,C),h+=C*D,{name:b.name,type:b.type,components:D,offset:A}})),size:sc(h,Math.max(m,l)),alignment:l}}function sc(u,l){return Math.ceil(u/l)*l}class lu extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const b=2*l;return this.int16[b+0]=h,this.int16[b+1]=m,l}}lu.prototype.bytesPerElement=4,ti("StructArrayLayout2i4",lu);class Hd extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,h,m)}emplace(l,h,m,b){const C=3*l;return this.int16[C+0]=h,this.int16[C+1]=m,this.int16[C+2]=b,l}}Hd.prototype.bytesPerElement=6,ti("StructArrayLayout3i6",Hd);class Tp extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,b){const C=this.length;return this.resize(C+1),this.emplace(C,l,h,m,b)}emplace(l,h,m,b,C){const A=4*l;return this.int16[A+0]=h,this.int16[A+1]=m,this.int16[A+2]=b,this.int16[A+3]=C,l}}Tp.prototype.bytesPerElement=8,ti("StructArrayLayout4i8",Tp);class Ud extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,m,b,C,A)}emplace(l,h,m,b,C,A,D){const B=6*l;return this.int16[B+0]=h,this.int16[B+1]=m,this.int16[B+2]=b,this.int16[B+3]=C,this.int16[B+4]=A,this.int16[B+5]=D,l}}Ud.prototype.bytesPerElement=12,ti("StructArrayLayout2i4i12",Ud);class Ep extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,m,b,C,A)}emplace(l,h,m,b,C,A,D){const B=4*l,U=8*l;return this.int16[B+0]=h,this.int16[B+1]=m,this.uint8[U+4]=b,this.uint8[U+5]=C,this.uint8[U+6]=A,this.uint8[U+7]=D,l}}Ep.prototype.bytesPerElement=8,ti("StructArrayLayout2i4ub8",Ep);class cu extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const b=2*l;return this.float32[b+0]=h,this.float32[b+1]=m,l}}cu.prototype.bytesPerElement=8,ti("StructArrayLayout2f8",cu);class ll extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A,D,B,U,Y){const Q=this.length;return this.resize(Q+1),this.emplace(Q,l,h,m,b,C,A,D,B,U,Y)}emplace(l,h,m,b,C,A,D,B,U,Y,Q){const ne=10*l;return this.uint16[ne+0]=h,this.uint16[ne+1]=m,this.uint16[ne+2]=b,this.uint16[ne+3]=C,this.uint16[ne+4]=A,this.uint16[ne+5]=D,this.uint16[ne+6]=B,this.uint16[ne+7]=U,this.uint16[ne+8]=Y,this.uint16[ne+9]=Q,l}}ll.prototype.bytesPerElement=20,ti("StructArrayLayout10ui20",ll);class Gd extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A,D,B){const U=this.length;return this.resize(U+1),this.emplace(U,l,h,m,b,C,A,D,B)}emplace(l,h,m,b,C,A,D,B,U){const Y=8*l;return this.uint16[Y+0]=h,this.uint16[Y+1]=m,this.uint16[Y+2]=b,this.uint16[Y+3]=C,this.uint16[Y+4]=A,this.uint16[Y+5]=D,this.uint16[Y+6]=B,this.uint16[Y+7]=U,l}}Gd.prototype.bytesPerElement=16,ti("StructArrayLayout8ui16",Gd);class hu extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A,D,B,U,Y,Q,ne){const ae=this.length;return this.resize(ae+1),this.emplace(ae,l,h,m,b,C,A,D,B,U,Y,Q,ne)}emplace(l,h,m,b,C,A,D,B,U,Y,Q,ne,ae){const ce=12*l;return this.int16[ce+0]=h,this.int16[ce+1]=m,this.int16[ce+2]=b,this.int16[ce+3]=C,this.uint16[ce+4]=A,this.uint16[ce+5]=D,this.uint16[ce+6]=B,this.uint16[ce+7]=U,this.int16[ce+8]=Y,this.int16[ce+9]=Q,this.int16[ce+10]=ne,this.int16[ce+11]=ae,l}}hu.prototype.bytesPerElement=24,ti("StructArrayLayout4i4ui4i24",hu);class Wd extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,h,m)}emplace(l,h,m,b){const C=3*l;return this.float32[C+0]=h,this.float32[C+1]=m,this.float32[C+2]=b,l}}Wd.prototype.bytesPerElement=12,ti("StructArrayLayout3f12",Wd);class uu extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint32[1*l+0]=h,l}}uu.prototype.bytesPerElement=4,ti("StructArrayLayout1ul4",uu);class Mp extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A,D,B,U){const Y=this.length;return this.resize(Y+1),this.emplace(Y,l,h,m,b,C,A,D,B,U)}emplace(l,h,m,b,C,A,D,B,U,Y){const Q=10*l,ne=5*l;return this.int16[Q+0]=h,this.int16[Q+1]=m,this.int16[Q+2]=b,this.int16[Q+3]=C,this.int16[Q+4]=A,this.int16[Q+5]=D,this.uint32[ne+3]=B,this.uint16[Q+8]=U,this.uint16[Q+9]=Y,l}}Mp.prototype.bytesPerElement=20,ti("StructArrayLayout6i1ul2ui20",Mp);class Kc extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,m,b,C,A)}emplace(l,h,m,b,C,A,D){const B=6*l;return this.int16[B+0]=h,this.int16[B+1]=m,this.int16[B+2]=b,this.int16[B+3]=C,this.int16[B+4]=A,this.int16[B+5]=D,l}}Kc.prototype.bytesPerElement=12,ti("StructArrayLayout2i2i2i12",Kc);class oc extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C){const A=this.length;return this.resize(A+1),this.emplace(A,l,h,m,b,C)}emplace(l,h,m,b,C,A){const D=4*l,B=8*l;return this.float32[D+0]=h,this.float32[D+1]=m,this.float32[D+2]=b,this.int16[B+6]=C,this.int16[B+7]=A,l}}oc.prototype.bytesPerElement=16,ti("StructArrayLayout2f1f2i16",oc);class Ip extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,m,b,C,A)}emplace(l,h,m,b,C,A,D){const B=16*l,U=4*l,Y=8*l;return this.uint8[B+0]=h,this.uint8[B+1]=m,this.float32[U+1]=b,this.float32[U+2]=C,this.int16[Y+6]=A,this.int16[Y+7]=D,l}}Ip.prototype.bytesPerElement=16,ti("StructArrayLayout2ub2f2i16",Ip);class du extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,h,m)}emplace(l,h,m,b){const C=3*l;return this.uint16[C+0]=h,this.uint16[C+1]=m,this.uint16[C+2]=b,l}}du.prototype.bytesPerElement=6,ti("StructArrayLayout3ui6",du);class lc extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A,D,B,U,Y,Q,ne,ae,ce,ue,pe,ve){const ze=this.length;return this.resize(ze+1),this.emplace(ze,l,h,m,b,C,A,D,B,U,Y,Q,ne,ae,ce,ue,pe,ve)}emplace(l,h,m,b,C,A,D,B,U,Y,Q,ne,ae,ce,ue,pe,ve,ze){const Se=24*l,Ce=12*l,Be=48*l;return this.int16[Se+0]=h,this.int16[Se+1]=m,this.uint16[Se+2]=b,this.uint16[Se+3]=C,this.uint32[Ce+2]=A,this.uint32[Ce+3]=D,this.uint32[Ce+4]=B,this.uint16[Se+10]=U,this.uint16[Se+11]=Y,this.uint16[Se+12]=Q,this.float32[Ce+7]=ne,this.float32[Ce+8]=ae,this.uint8[Be+36]=ce,this.uint8[Be+37]=ue,this.uint8[Be+38]=pe,this.uint32[Ce+10]=ve,this.int16[Se+22]=ze,l}}lc.prototype.bytesPerElement=48,ti("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",lc);class Pp extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,b,C,A,D,B,U,Y,Q,ne,ae,ce,ue,pe,ve,ze,Se,Ce,Be,Ue,ot,wt,xt,Et,Ut,It){const bt=this.length;return this.resize(bt+1),this.emplace(bt,l,h,m,b,C,A,D,B,U,Y,Q,ne,ae,ce,ue,pe,ve,ze,Se,Ce,Be,Ue,ot,wt,xt,Et,Ut,It)}emplace(l,h,m,b,C,A,D,B,U,Y,Q,ne,ae,ce,ue,pe,ve,ze,Se,Ce,Be,Ue,ot,wt,xt,Et,Ut,It,bt){const ft=32*l,ei=16*l;return this.int16[ft+0]=h,this.int16[ft+1]=m,this.int16[ft+2]=b,this.int16[ft+3]=C,this.int16[ft+4]=A,this.int16[ft+5]=D,this.int16[ft+6]=B,this.int16[ft+7]=U,this.uint16[ft+8]=Y,this.uint16[ft+9]=Q,this.uint16[ft+10]=ne,this.uint16[ft+11]=ae,this.uint16[ft+12]=ce,this.uint16[ft+13]=ue,this.uint16[ft+14]=pe,this.uint16[ft+15]=ve,this.uint16[ft+16]=ze,this.uint16[ft+17]=Se,this.uint16[ft+18]=Ce,this.uint16[ft+19]=Be,this.uint16[ft+20]=Ue,this.uint16[ft+21]=ot,this.uint16[ft+22]=wt,this.uint32[ei+12]=xt,this.float32[ei+13]=Et,this.float32[ei+14]=Ut,this.uint16[ft+30]=It,this.uint16[ft+31]=bt,l}}Pp.prototype.bytesPerElement=64,ti("StructArrayLayout8i15ui1ul2f2ui64",Pp);class $d extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.float32[1*l+0]=h,l}}$d.prototype.bytesPerElement=4,ti("StructArrayLayout1f4",$d);class Xd extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,h,m)}emplace(l,h,m,b){const C=3*l;return this.uint16[6*l+0]=h,this.float32[C+1]=m,this.float32[C+2]=b,l}}Xd.prototype.bytesPerElement=12,ti("StructArrayLayout1ui2f12",Xd);class Lp extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,h,m)}emplace(l,h,m,b){const C=4*l;return this.uint32[2*l+0]=h,this.uint16[C+2]=m,this.uint16[C+3]=b,l}}Lp.prototype.bytesPerElement=8,ti("StructArrayLayout1ul2ui8",Lp);class I extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const b=2*l;return this.uint16[b+0]=h,this.uint16[b+1]=m,l}}I.prototype.bytesPerElement=4,ti("StructArrayLayout2ui4",I);class c extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint16[1*l+0]=h,l}}c.prototype.bytesPerElement=2,ti("StructArrayLayout1ui2",c);class f extends Sa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,b){const C=this.length;return this.resize(C+1),this.emplace(C,l,h,m,b)}emplace(l,h,m,b,C){const A=4*l;return this.float32[A+0]=h,this.float32[A+1]=m,this.float32[A+2]=b,this.float32[A+3]=C,l}}f.prototype.bytesPerElement=16,ti("StructArrayLayout4f16",f);class y extends ou{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new d(this.anchorPointX,this.anchorPointY)}}y.prototype.size=20;class S extends Mp{get(l){return new y(this,l)}}ti("CollisionBoxArray",S);class P extends ou{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}P.prototype.size=48;class z extends lc{get(l){return new P(this,l)}}ti("PlacedSymbolArray",z);class H extends ou{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}H.prototype.size=64;class W extends Pp{get(l){return new H(this,l)}}ti("SymbolInstanceArray",W);class Z extends $d{getoffsetX(l){return this.float32[1*l+0]}}ti("GlyphOffsetArray",Z);class J extends Hd{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}ti("SymbolLineVertexArray",J);class se extends ou{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}se.prototype.size=12;class re extends Xd{get(l){return new se(this,l)}}ti("TextAnchorOffsetArray",re);class fe extends ou{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}fe.prototype.size=8;class ye extends Lp{get(l){return new fe(this,l)}}ti("FeatureIndexArray",ye);class Te extends lu{}class Me extends lu{}class Ee extends lu{}class Fe extends Ud{}class Ge extends Ep{}class Oe extends cu{}class Ve extends ll{}class Xe extends Gd{}class Ne extends hu{}class Ke extends Wd{}class gt extends uu{}class lt extends Kc{}class ht extends Ip{}class dt extends du{}class Ot extends I{}const Bt=Ba([{name:"a_pos",components:2,type:"Int16"}],4),{members:Mt}=Bt;class $t{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,h,m,b){const C=this.segments[this.segments.length-1];return l>$t.MAX_VERTEX_ARRAY_LENGTH&&Ti(`Max vertices per segment is ${$t.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${$t.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!C||C.vertexLength+l>$t.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==b?this.createNewSegment(h,m,b):C}createNewSegment(l,h,m){const b={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return m!==void 0&&(b.sortKey=m),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(l,h,m){return this.prepareSegment(0,l,h,m)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const h in l.vaos)l.vaos[h].destroy()}static simpleSegment(l,h,m,b){return new $t([{vertexOffset:l,primitiveOffset:h,vertexLength:m,primitiveLength:b,vaos:{},sortKey:0}])}}function Hi(u,l){return 256*(u=Ct(Math.floor(u),0,255))+Ct(Math.floor(l),0,255)}$t.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ti("SegmentVector",$t);const Fn=Ba([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ca=Ba([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Zn,pa,Kn,Ma={exports:{}},ga={exports:{}},kr={exports:{}},$a=(function(){if(Kn)return Ma.exports;Kn=1;var u=(Zn||(Zn=1,ga.exports=function(h,m){var b,C,A,D,B,U,Y,Q;for(C=h.length-(b=3&h.length),A=m,B=3432918353,U=461845907,Q=0;Q<C;)Y=255&h.charCodeAt(Q)|(255&h.charCodeAt(++Q))<<8|(255&h.charCodeAt(++Q))<<16|(255&h.charCodeAt(++Q))<<24,++Q,A=27492+(65535&(D=5*(65535&(A=(A^=Y=(65535&(Y=(Y=(65535&Y)*B+(((Y>>>16)*B&65535)<<16)&4294967295)<<15|Y>>>17))*U+(((Y>>>16)*U&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(Y=0,b){case 3:Y^=(255&h.charCodeAt(Q+2))<<16;case 2:Y^=(255&h.charCodeAt(Q+1))<<8;case 1:A^=Y=(65535&(Y=(Y=(65535&(Y^=255&h.charCodeAt(Q)))*B+(((Y>>>16)*B&65535)<<16)&4294967295)<<15|Y>>>17))*U+(((Y>>>16)*U&65535)<<16)&4294967295}return A^=h.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0}),ga.exports),l=(pa||(pa=1,kr.exports=function(h,m){for(var b,C=h.length,A=m^C,D=0;C>=4;)b=1540483477*(65535&(b=255&h.charCodeAt(D)|(255&h.charCodeAt(++D))<<8|(255&h.charCodeAt(++D))<<16|(255&h.charCodeAt(++D))<<24))+((1540483477*(b>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),C-=4,++D;switch(C){case 3:A^=(255&h.charCodeAt(D+2))<<16;case 2:A^=(255&h.charCodeAt(D+1))<<8;case 1:A=1540483477*(65535&(A^=255&h.charCodeAt(D)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0}),kr.exports);return Ma.exports=u,Ma.exports.murmur3=u,Ma.exports.murmur2=l,Ma.exports})(),Na=g($a);class Fr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,h,m,b){this.ids.push(Ol(l)),this.positions.push(h,m,b)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=Ol(l);let m=0,b=this.ids.length-1;for(;m<b;){const A=m+b>>1;this.ids[A]>=h?b=A:m=A+1}const C=[];for(;this.ids[m]===h;)C.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return C}static serialize(l,h){const m=new Float64Array(l.ids),b=new Uint32Array(l.positions);return cl(m,b,0,m.length-1),h&&h.push(m.buffer,b.buffer),{ids:m,positions:b}}static deserialize(l){const h=new Fr;return h.ids=l.ids,h.positions=l.positions,h.indexed=!0,h}}function Ol(u){const l=+u;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Na(String(u))}function cl(u,l,h,m){for(;h<m;){const b=u[h+m>>1];let C=h-1,A=m+1;for(;;){do C++;while(u[C]<b);do A--;while(u[A]>b);if(C>=A)break;Ho(u,C,A),Ho(l,3*C,3*A),Ho(l,3*C+1,3*A+1),Ho(l,3*C+2,3*A+2)}A-h<m-A?(cl(u,l,h,A),h=A+1):(cl(u,l,A+1,m),m=A)}}function Ho(u,l,h){const m=u[l];u[l]=u[h],u[h]=m}ti("FeaturePositionMap",Fr);class ps{constructor(l,h){this.gl=l.gl,this.location=h}}class cc extends ps{constructor(l,h){super(l,h),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class fu extends ps{constructor(l,h){super(l,h),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class hc extends ps{constructor(l,h){super(l,h),this.current=Ui.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Ks=new Float32Array(16);function Uo(u){return[Hi(255*u.r,255*u.g),Hi(255*u.b,255*u.a)]}class _o{constructor(l,h,m){this.value=l,this.uniformNames=h.map((b=>`u_${b}`)),this.type=m}setUniform(l,h,m){l.set(m.constantOr(this.value))}getBinding(l,h,m){return this.type==="color"?new hc(l,h):new cc(l,h)}}class xo{constructor(l,h){this.uniformNames=h.map((m=>`u_${m}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,h){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,h.y,h.height,h.width]}setUniform(l,h,m,b){let C=null;b==="u_pattern_to"?C=this.patternTo:b==="u_pattern_from"?C=this.patternFrom:b==="u_dasharray_to"?C=this.dashTo:b==="u_dasharray_from"?C=this.dashFrom:b==="u_pixel_ratio_to"?C=this.pixelRatioTo:b==="u_pixel_ratio_from"&&(C=this.pixelRatioFrom),C!==null&&l.set(C)}getBinding(l,h,m){return m.substr(0,9)==="u_pattern"||m.substr(0,12)==="u_dasharray_"?new fu(l,h):new cc(l,h)}}class aa{constructor(l,h,m,b){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map((C=>({name:`a_${C}`,type:"Float32",components:m==="color"?2:1,offset:0}))),this.paintVertexArray=new b}populatePaintArray(l,h,m){const b=this.paintVertexArray.length,C=this.expression.evaluate(new Wn(0,m),h,{},m.canonical,[],m.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(b,l,C)}updatePaintArray(l,h,m,b,C){const A=this.expression.evaluate(new Wn(0,C),m,b);this._setPaintValue(l,h,A)}_setPaintValue(l,h,m){if(this.type==="color"){const b=Uo(m);for(let C=l;C<h;C++)this.paintVertexArray.emplace(C,b[0],b[1])}else{for(let b=l;b<h;b++)this.paintVertexArray.emplace(b,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qn{constructor(l,h,m,b,C,A){this.expression=l,this.uniformNames=h.map((D=>`u_${D}_t`)),this.type=m,this.useIntegerZoom=b,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=h.map((D=>({name:`a_${D}`,type:"Float32",components:m==="color"?4:2,offset:0}))),this.paintVertexArray=new A}populatePaintArray(l,h,m){const b=this.expression.evaluate(new Wn(this.zoom,m),h,{},m.canonical,[],m.formattedSection),C=this.expression.evaluate(new Wn(this.zoom+1,m),h,{},m.canonical,[],m.formattedSection),A=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(A,l,b,C)}updatePaintArray(l,h,m,b,C){const A=this.expression.evaluate(new Wn(this.zoom,C),m,b),D=this.expression.evaluate(new Wn(this.zoom+1,C),m,b);this._setPaintValue(l,h,A,D)}_setPaintValue(l,h,m,b){if(this.type==="color"){const C=Uo(m),A=Uo(b);for(let D=l;D<h;D++)this.paintVertexArray.emplace(D,C[0],C[1],A[0],A[1])}else{for(let C=l;C<h;C++)this.paintVertexArray.emplace(C,m,b);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,b=Ct(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(b)}getBinding(l,h,m){return new cc(l,h)}}class gr{constructor(l,h,m,b,C,A){this.expression=l,this.type=h,this.useIntegerZoom=m,this.zoom=b,this.layerId=A,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(l,h,m){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(b,l,this.getPositionIds(h),m)}updatePaintArray(l,h,m,b,C){this._setPaintValues(l,h,this.getPositionIds(m),C)}_setPaintValues(l,h,m,b){const C=this.getPositions(b);if(!C||!m)return;const A=C[m.min],D=C[m.mid],B=C[m.max];if(A&&D&&B)for(let U=l;U<h;U++)this.emplace(this.zoomInPaintVertexArray,U,D,A),this.emplace(this.zoomOutPaintVertexArray,U,D,B)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const h=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,h,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,h,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class mr extends gr{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return Fn.members}emplace(l,h,m,b){l.emplace(h,m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],m.pixelRatio,b.pixelRatio)}}class n0 extends gr{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return ca.members}emplace(l,h,m,b){l.emplace(h,0,m.y,m.height,m.width,0,b.y,b.height,b.width)}}class a0{constructor(l,h,m){this.binders={},this._buffers=[];const b=[];for(const C in l.paint._values){if(!m(C))continue;const A=l.paint.get(C);if(!(A instanceof mo&&Gc(A.property.specification)))continue;const D=Jx(C,l.type),B=A.value,U=A.property.specification.type,Y=A.property.useIntegerZoom,Q=A.property.specification["property-type"],ne=Q==="cross-faded"||Q==="cross-faded-data-driven";if(B.kind==="constant")this.binders[C]=ne?new xo(B.value,D):new _o(B.value,D,U),b.push(`/u_${C}`);else if(B.kind==="source"||ne){const ae=r0(C,U,"source");this.binders[C]=ne?C==="line-dasharray"?new n0(B,U,Y,h,ae,l.id):new mr(B,U,Y,h,ae,l.id):new aa(B,D,U,ae),b.push(`/a_${C}`)}else{const ae=r0(C,U,"composite");this.binders[C]=new Qn(B,D,U,Y,h,ae),b.push(`/z_${C}`)}}this.cacheKey=b.sort().join("")}getMaxValue(l){const h=this.binders[l];return h instanceof aa||h instanceof Qn?h.maxValue:0}populatePaintArrays(l,h,m){for(const b in this.binders){const C=this.binders[b];(C instanceof aa||C instanceof Qn||C instanceof gr)&&C.populatePaintArray(l,h,m)}}setConstantPatternPositions(l,h){for(const m in this.binders){const b=this.binders[m];b instanceof xo&&b.setConstantPatternPositions(l,h)}}setConstantDashPositions(l,h){for(const m in this.binders){const b=this.binders[m];b instanceof xo&&b.setConstantDashPositions(l,h)}}updatePaintArrays(l,h,m,b,C){let A=!1;for(const D in l){const B=h.getPositions(D);for(const U of B){const Y=m.feature(U.index);for(const Q in this.binders){const ne=this.binders[Q];if((ne instanceof aa||ne instanceof Qn||ne instanceof gr)&&ne.expression.isStateDependent===!0){const ae=b.paint.get(Q);ne.expression=ae.value,ne.updatePaintArray(U.start,U.end,Y,l[D],C),A=!0}}}}return A}defines(){const l=[];for(const h in this.binders){const m=this.binders[h];(m instanceof _o||m instanceof xo)&&l.push(...m.uniformNames.map((b=>`#define HAS_UNIFORM_${b}`)))}return l}getBinderAttributes(){const l=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof aa||m instanceof Qn)for(let b=0;b<m.paintVertexAttributes.length;b++)l.push(m.paintVertexAttributes[b].name);else if(m instanceof gr){const b=m.getVertexAttributes();for(const C of b)l.push(C.name)}}return l}getBinderUniforms(){const l=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof _o||m instanceof xo||m instanceof Qn)for(const b of m.uniformNames)l.push(b)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,h){const m=[];for(const b in this.binders){const C=this.binders[b];if(C instanceof _o||C instanceof xo||C instanceof Qn){for(const A of C.uniformNames)if(h[A]){const D=C.getBinding(l,h[A],A);m.push({name:A,property:b,binding:D})}}}return m}setUniforms(l,h,m,b){for(const{name:C,property:A,binding:D}of h)this.binders[A].setUniform(D,b,m.get(A),C)}updatePaintBuffers(l){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(l&&m instanceof gr){const b=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(m instanceof aa||m instanceof Qn)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(const h in this.binders){const m=this.binders[h];(m instanceof aa||m instanceof Qn||m instanceof gr)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const h=this.binders[l];(h instanceof aa||h instanceof Qn||h instanceof gr)&&h.destroy()}}}class uc{constructor(l,h,m=()=>!0){this.programConfigurations={};for(const b of l)this.programConfigurations[b.id]=new a0(b,h,m);this.needsUpload=!1,this._featureMap=new Fr,this._bufferOffset=0}populatePaintArrays(l,h,m,b){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(l,h,b);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,h,m,b){for(const C of m)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(l,this._featureMap,h,C,b)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function Jx(u,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${l}-`,"").replace(/-/g,"_")]}function r0(u,l,h){const m={color:{source:cu,composite:f},number:{source:$d,composite:cu}},b=(function(C){return{"line-pattern":{source:Ve,composite:Ve},"fill-pattern":{source:Ve,composite:Ve},"fill-extrusion-pattern":{source:Ve,composite:Ve},"line-dasharray":{source:Xe,composite:Xe}}[C]})(u);return b&&b[h]||m[l][h]}ti("ConstantBinder",_o),ti("CrossFadedConstantBinder",xo),ti("SourceExpressionBinder",aa),ti("CrossFadedPatternBinder",mr),ti("CrossFadedDasharrayBinder",n0),ti("CompositeExpressionBinder",Qn),ti("ProgramConfiguration",a0,{omit:["_buffers"]}),ti("ProgramConfigurationSet",uc);const Dp=Math.pow(2,14)-1,zl=-Dp-1;function Fl(u){const l=vt/u.extent,h=u.loadGeometry();for(let m=0;m<h.length;m++){const b=h[m];for(let C=0;C<b.length;C++){const A=b[C],D=Math.round(A.x*l),B=Math.round(A.y*l);A.x=Ct(D,zl,Dp),A.y=Ct(B,zl,Dp),(D<A.x||D>A.x+1||B<A.y||B>A.y+1)&&Ti("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Bl(u,l){return{type:u.type,id:u.id,properties:u.properties,geometry:l?Fl(u):[]}}const Rp=-32768;function Op(u,l,h,m,b){u.emplaceBack(Rp+8*l+m,Rp+8*h+b)}class Yd{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Me,this.indexArray=new dt,this.segments=new $t,this.programConfigurations=new uc(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,m){const b=this.layers[0],C=[];let A=null,D=!1,B=b.type==="heatmap";if(b.type==="circle"){const Y=b;A=Y.layout.get("circle-sort-key"),D=!A.isConstant(),B=B||Y.paint.get("circle-pitch-alignment")==="map"}const U=B?h.subdivisionGranularity.circle:1;for(const{feature:Y,id:Q,index:ne,sourceLayerIndex:ae}of l){const ce=this.layers[0]._featureFilter.needGeometry,ue=Bl(Y,ce);if(!this.layers[0]._featureFilter.filter(new Wn(this.zoom),ue,m))continue;const pe=D?A.evaluate(ue,{},m):void 0,ve={id:Q,properties:Y.properties,type:Y.type,sourceLayerIndex:ae,index:ne,geometry:ce?ue.geometry:Fl(Y),patterns:{},sortKey:pe};C.push(ve)}D&&C.sort(((Y,Q)=>Y.sortKey-Q.sortKey));for(const Y of C){const{geometry:Q,index:ne,sourceLayerIndex:ae}=Y,ce=l[ne].feature;this.addFeature(Y,Q,ne,m,U),h.featureIndex.insert(ce,Q,ne,ae,this.index)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:m})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Mt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,h,m,b,C=1){let A;switch(C){case 1:A=[0,7];break;case 3:A=[0,2,5,7];break;case 5:A=[0,1,3,4,6,7];break;case 7:A=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${C}; valid values are 1, 3, 5, 7.`)}const D=A.length;for(const B of h)for(const U of B){const Y=U.x,Q=U.y;if(Y<0||Y>=vt||Q<0||Q>=vt)continue;const ne=this.segments.prepareSegment(D*D,this.layoutVertexArray,this.indexArray,l.sortKey),ae=ne.vertexLength;for(let ce=0;ce<D;ce++)for(let ue=0;ue<D;ue++)Op(this.layoutVertexArray,Y,Q,A[ue],A[ce]);for(let ce=0;ce<D-1;ce++)for(let ue=0;ue<D-1;ue++){const pe=ae+ce*D+ue,ve=ae+(ce+1)*D+ue;this.indexArray.emplaceBack(pe,ve+1,pe+1),this.indexArray.emplaceBack(pe,ve,ve+1)}ne.vertexLength+=D*D,ne.primitiveLength+=(D-1)*(D-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{imagePositions:{},canonical:b})}}function qd(u,l){for(let h=0;h<u.length;h++)if(Zd(l,u[h]))return!0;for(let h=0;h<l.length;h++)if(Zd(u,l[h]))return!0;return!!ey(u,l)}function s0(u,l,h){return!!Zd(u,l)||!!ty(l,u,h)}function Zw(u,l){if(u.length===1)return Qw(l,u[0]);for(let h=0;h<l.length;h++){const m=l[h];for(let b=0;b<m.length;b++)if(Zd(u,m[b]))return!0}for(let h=0;h<u.length;h++)if(Qw(l,u[h]))return!0;for(let h=0;h<l.length;h++)if(ey(u,l[h]))return!0;return!1}function aL(u,l,h){if(u.length>1){if(ey(u,l))return!0;for(let m=0;m<l.length;m++)if(ty(l[m],u,h))return!0}for(let m=0;m<u.length;m++)if(ty(u[m],l,h))return!0;return!1}function ey(u,l){if(u.length===0||l.length===0)return!1;for(let h=0;h<u.length-1;h++){const m=u[h],b=u[h+1];for(let C=0;C<l.length-1;C++)if(rL(m,b,l[C],l[C+1]))return!0}return!1}function rL(u,l,h,m){return tn(u,h,m)!==tn(l,h,m)&&tn(u,l,h)!==tn(u,l,m)}function ty(u,l,h){const m=h*h;if(l.length===1)return u.distSqr(l[0])<m;for(let b=1;b<l.length;b++)if(Kw(u,l[b-1],l[b])<m)return!0;return!1}function Kw(u,l,h){const m=l.distSqr(h);if(m===0)return u.distSqr(l);const b=((u.x-l.x)*(h.x-l.x)+(u.y-l.y)*(h.y-l.y))/m;return u.distSqr(b<0?l:b>1?h:h.sub(l)._mult(b)._add(l))}function Qw(u,l){let h,m,b,C=!1;for(let A=0;A<u.length;A++){h=u[A];for(let D=0,B=h.length-1;D<h.length;B=D++)m=h[D],b=h[B],m.y>l.y!=b.y>l.y&&l.x<(b.x-m.x)*(l.y-m.y)/(b.y-m.y)+m.x&&(C=!C)}return C}function Zd(u,l){let h=!1;for(let m=0,b=u.length-1;m<u.length;b=m++){const C=u[m],A=u[b];C.y>l.y!=A.y>l.y&&l.x<(A.x-C.x)*(l.y-C.y)/(A.y-C.y)+C.x&&(h=!h)}return h}function sL(u,l,h){const m=h[0],b=h[2];if(u.x<m.x&&l.x<m.x||u.x>b.x&&l.x>b.x||u.y<m.y&&l.y<m.y||u.y>b.y&&l.y>b.y)return!1;const C=tn(u,l,h[0]);return C!==tn(u,l,h[1])||C!==tn(u,l,h[2])||C!==tn(u,l,h[3])}function Kd(u,l,h){const m=l.paint.get(u).value;return m.kind==="constant"?m.value:h.programConfigurations.get(l.id).getMaxValue(u)}function o0(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function l0(u,l,h,m,b){if(!l[0]&&!l[1])return u;const C=d.convert(l)._mult(b);h==="viewport"&&C._rotate(-m);const A=[];for(let D=0;D<u.length;D++)A.push(u[D].sub(C));return A}function oL(u){const l=[];for(let h=0;h<u.length;h++){const m=u[h],b=l.at(-1);(h===0||b&&!m.equals(b))&&l.push(m)}return l}function lL({queryGeometry:u,size:l},h){return s0(u,h,l)}function cL({queryGeometry:u,size:l,transform:h,unwrappedTileID:m,getElevation:b},C){return s0(u,C,l*(h.projectTileCoordinates(C.x,C.y,m,b).signedDistanceFromCamera/h.cameraToCenterDistance))}function hL({queryGeometry:u,size:l,transform:h,unwrappedTileID:m,getElevation:b},C){const A=h.projectTileCoordinates(C.x,C.y,m,b).signedDistanceFromCamera,D=l*(h.cameraToCenterDistance/A);return s0(u,iy(C,h,m,b),D)}function uL({queryGeometry:u,size:l,transform:h,unwrappedTileID:m,getElevation:b},C){return s0(u,iy(C,h,m,b),l)}function Jw({queryGeometry:u,size:l,transform:h,unwrappedTileID:m,getElevation:b,pitchAlignment:C="map",pitchScale:A="map"},D){const B=C==="map"?A==="map"?lL:cL:A==="map"?hL:uL,U={queryGeometry:u,size:l,transform:h,unwrappedTileID:m,getElevation:b};for(const Y of D)for(const Q of Y)if(B(U,Q))return!0;return!1}function iy(u,l,h,m){const b=l.projectTileCoordinates(u.x,u.y,h,m).point;return new d((.5*b.x+.5)*l.width,(.5*-b.y+.5)*l.height)}let e2,t2;ti("CircleBucket",Yd,{omit:["layers"]});var dL={get paint(){return t2=t2||new as({"circle-radius":new Ci(rt.paint_circle["circle-radius"]),"circle-color":new Ci(rt.paint_circle["circle-color"]),"circle-blur":new Ci(rt.paint_circle["circle-blur"]),"circle-opacity":new Ci(rt.paint_circle["circle-opacity"]),"circle-translate":new hi(rt.paint_circle["circle-translate"]),"circle-translate-anchor":new hi(rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new hi(rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new hi(rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ci(rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ci(rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ci(rt.paint_circle["circle-stroke-opacity"])})},get layout(){return e2=e2||new as({"circle-sort-key":new Ci(rt.layout_circle["circle-sort-key"])})}};class fL extends Zs{constructor(l,h){super(l,dL,h)}createBucket(l){return new Yd(l)}queryRadius(l){const h=l;return Kd("circle-radius",this,h)+Kd("circle-stroke-width",this,h)+o0(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:m,geometry:b,transform:C,pixelsToTileUnits:A,unwrappedTileID:D,getElevation:B}){const U=l0(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-C.bearingInRadians,A),Y=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),Q=this.paint.get("circle-pitch-scale"),ne=this.paint.get("circle-pitch-alignment");let ae,ce;return ne==="map"?(ae=U,ce=Y*A):(ae=(function(ue,pe,ve,ze){return ue.map((Se=>iy(Se,pe,ve,ze)))})(U,C,D,B),ce=Y),Jw({queryGeometry:ae,size:ce,transform:C,unwrappedTileID:D,getElevation:B,pitchAlignment:ne,pitchScale:Q},b)}}class i2 extends Yd{}let n2;ti("HeatmapBucket",i2,{omit:["layers"]});var pL={get paint(){return n2=n2||new as({"heatmap-radius":new Ci(rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ci(rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new hi(rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vd(rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new hi(rt.paint_heatmap["heatmap-opacity"])})}};function ny(u,{width:l,height:h},m,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==l*h*m)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${l*h*m}`)}else b=new Uint8Array(l*h*m);return u.width=l,u.height=h,u.data=b,u}function a2(u,{width:l,height:h},m){if(l===u.width&&h===u.height)return;const b=ny({},{width:l,height:h},m);ay(u,b,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,l),height:Math.min(u.height,h)},m),u.width=l,u.height=h,u.data=b.data}function ay(u,l,h,m,b,C){if(b.width===0||b.height===0)return l;if(b.width>u.width||b.height>u.height||h.x>u.width-b.width||h.y>u.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>l.width||b.height>l.height||m.x>l.width-b.width||m.y>l.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const A=u.data,D=l.data;if(A===D)throw new Error("srcData equals dstData, so image is already copied");for(let B=0;B<b.height;B++){const U=((h.y+B)*u.width+h.x)*C,Y=((m.y+B)*l.width+m.x)*C;for(let Q=0;Q<b.width*C;Q++)D[Y+Q]=A[U+Q]}return l}class zp{constructor(l,h){ny(this,l,1,h)}resize(l){a2(this,l,1)}clone(){return new zp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,m,b,C){ay(l,h,m,b,C,1)}}class Ls{constructor(l,h){ny(this,l,4,h)}resize(l){a2(this,l,4)}replace(l,h){h?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Ls({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,m,b,C){ay(l,h,m,b,C,4)}setPixel(l,h,m){const b=4*(l*this.width+h);this.data[b+0]=Math.round(255*m.r/m.a),this.data[b+1]=Math.round(255*m.g/m.a),this.data[b+2]=Math.round(255*m.b/m.a),this.data[b+3]=Math.round(255*m.a)}}function r2(u){const l={},h=u.resolution||256,m=u.clips?u.clips.length:1,b=u.image||new Ls({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const C=(A,D,B)=>{l[u.evaluationKey]=B;const U=u.expression.evaluate(l);b.setPixel(A/4/h,D/4,U)};if(u.clips)for(let A=0,D=0;A<m;++A,D+=4*h)for(let B=0,U=0;B<h;B++,U+=4){const Y=B/(h-1),{start:Q,end:ne}=u.clips[A];C(D,U,Q*(1-Y)+ne*Y)}else for(let A=0,D=0;A<h;A++,D+=4)C(0,D,A/(h-1));return b}ti("AlphaImage",zp),ti("RGBAImage",Ls);const ry="big-fb";class gL extends Zs{createBucket(l){return new i2(l)}constructor(l,h){super(l,pL,h),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=r2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ry)&&this.heatmapFbos.delete(ry)}queryRadius(l){return Kd("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:m,geometry:b,transform:C,pixelsToTileUnits:A,unwrappedTileID:D,getElevation:B}){return Jw({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(h,m)*A,transform:C,unwrappedTileID:D,getElevation:B},b)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let s2;var mL={get paint(){return s2=s2||new as({"hillshade-illumination-direction":new hi(rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new hi(rt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new hi(rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new hi(rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new hi(rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new hi(rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new hi(rt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new hi(rt.paint_hillshade["hillshade-method"])})}};class _L extends Zs{constructor(l,h){super(l,mL,h),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,h=this.paint.get("hillshade-illumination-altitude").values,m=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values;const C=Math.max(l.length,h.length,m.length,b.length);l=l.concat(Array(C-l.length).fill(l.at(-1))),h=h.concat(Array(C-h.length).fill(h.at(-1))),m=m.concat(Array(C-m.length).fill(m.at(-1))),b=b.concat(Array(C-b.length).fill(b.at(-1)));const A=h.map(va);return{directionRadians:l.map(va),altitudeRadians:A,shadowColor:b,highlightColor:m}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let o2;var xL={get paint(){return o2=o2||new as({"color-relief-opacity":new hi(rt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Vd(rt["paint_color-relief"]["color-relief-color"])})}};class sy{constructor(l,h,m,b){this.context=l,this.format=m,this.texture=l.gl.createTexture(),this.update(h,b)}update(l,h,m){const{width:b,height:C}=l,A=!(this.size&&this.size[0]===b&&this.size[1]===C||m),{context:D}=this,{gl:B}=D;if(this.useMipmap=!!(h&&h.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!h||h.premultiply!==!1)),A)this.size=[b,C],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||ji(l)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,l):B.texImage2D(B.TEXTURE_2D,0,this.format,b,C,0,this.format,B.UNSIGNED_BYTE,l.data);else{const{x:U,y:Y}=m||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||ji(l)?B.texSubImage2D(B.TEXTURE_2D,0,U,Y,B.RGBA,B.UNSIGNED_BYTE,l):B.texSubImage2D(B.TEXTURE_2D,0,U,Y,b,C,B.RGBA,B.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D),D.pixelStoreUnpackFlipY.setDefault(),D.pixelStoreUnpack.setDefault(),D.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,h,m){const{context:b}=this,{gl:C}=b;C.bindTexture(C.TEXTURE_2D,this.texture),m!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=C.LINEAR),l!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,l),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,m||l),this.filter=l),h!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,h),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class l2{constructor(l,h,m,b=1,C=1,A=1,D=0){if(this.uid=l,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Ti(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const B=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=C,this.blueFactor=A,this.baseShift=D;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let U=0;U<B;U++)this.data[this._idx(-1,U)]=this.data[this._idx(0,U)],this.data[this._idx(B,U)]=this.data[this._idx(B-1,U)],this.data[this._idx(U,-1)]=this.data[this._idx(U,0)],this.data[this._idx(U,B)]=this.data[this._idx(U,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let U=0;U<B;U++)for(let Y=0;Y<B;Y++){const Q=this.get(U,Y);Q>this.max&&(this.max=Q),Q<this.min&&(this.min=Q)}}get(l,h){const m=new Uint8Array(this.data.buffer),b=4*this._idx(l,h);return this.unpack(m[b],m[b+1],m[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,h){if(l<-1||l>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${l}, y: ${h}, dim: ${this.dim}`);return(h+1)*this.stride+(l+1)}unpack(l,h,m){return l*this.redFactor+h*this.greenFactor+m*this.blueFactor-this.baseShift}pack(l){return c2(l,this.getUnpackVector())}getPixels(){return new Ls({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,h,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let b=h*this.dim,C=h*this.dim+this.dim,A=m*this.dim,D=m*this.dim+this.dim;switch(h){case-1:b=C-1;break;case 1:C=b+1}switch(m){case-1:A=D-1;break;case 1:D=A+1}const B=-h*this.dim,U=-m*this.dim;for(let Y=A;Y<D;Y++)for(let Q=b;Q<C;Q++)this.data[this._idx(Q,Y)]=l.data[this._idx(Q+B,Y+U)]}}function c2(u,l){const h=l[0],m=l[1],b=l[2],C=l[3],A=Math.min(h,m,b),D=Math.round((u+C)/A);return{r:Math.floor(D*A/h)%256,g:Math.floor(D*A/m)%256,b:Math.floor(D*A/b)%256}}ti("DEMData",l2);class yL extends Zs{constructor(l,h){super(l,xL,h)}_createColorRamp(l){const h={elevationStops:[],colorStops:[]},m=this._transitionablePaint._values["color-relief-color"].value.expression;if(m instanceof Ed&&m._styleExpression.expression instanceof zr){this.colorRampExpression=m;const A=m._styleExpression.expression;h.elevationStops=A.labels,h.colorStops=[];for(const D of h.elevationStops)h.colorStops.push(A.evaluate({globals:{elevation:D}}))}if(h.elevationStops.length<1&&(h.elevationStops=[0],h.colorStops=[Ui.transparent]),h.elevationStops.length<2&&(h.elevationStops.push(h.elevationStops[0]+1),h.colorStops.push(h.colorStops[0])),h.elevationStops.length<=l)return h;const b={elevationStops:[],colorStops:[]},C=(h.elevationStops.length-1)/(l-1);for(let A=0;A<h.elevationStops.length-.5;A+=C)b.elevationStops.push(h.elevationStops[Math.round(A)]),b.colorStops.push(h.colorStops[Math.round(A)]);return Ti(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${l}, provided: ${h.elevationStops.length}`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,h,m){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const b=this._createColorRamp(h),C=new Ls({width:b.colorStops.length,height:1}),A=new Ls({width:b.colorStops.length,height:1});for(let D=0;D<b.elevationStops.length;D++){const B=c2(b.elevationStops[D],m);A.setPixel(0,D,new Ui(B.r/255,B.g/255,B.b/255,1)),C.setPixel(0,D,b.colorStops[D])}return this.colorRampTextures={elevationTexture:new sy(l,A,l.gl.RGBA),colorTexture:new sy(l,C,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const vL=Ba([{name:"a_pos",components:2,type:"Int16"}],4),{members:bL}=vL;function c0(u,l,h){const m=h.patternDependencies;let b=!1;for(const C of l){const A=C.paint.get(`${u}-pattern`);A.isConstant()||(b=!0);const D=A.constantOr(null);D&&(b=!0,m[D.to]=!0,m[D.from]=!0)}return b}function oy(u,l,h,m,b){const{zoom:C}=m,A=b.patternDependencies;for(const D of l){const B=D.paint.get(`${u}-pattern`).value;if(B.kind!=="constant"){let U=B.evaluate({zoom:C-1},h,{},b.availableImages),Y=B.evaluate({zoom:C},h,{},b.availableImages),Q=B.evaluate({zoom:C+1},h,{},b.availableImages);U=U&&U.name?U.name:U,Y=Y&&Y.name?Y.name:Y,Q=Q&&Q.name?Q.name:Q,A[U]=!0,A[Y]=!0,A[Q]=!0,h.patterns[D.id]={min:U,mid:Y,max:Q}}}return h}function h2(u,l,h,m,b){let C;if(b===(function(A,D,B,U){let Y=0;for(let Q=D,ne=B-U;Q<B;Q+=U)Y+=(A[ne]-A[Q])*(A[Q+1]+A[ne+1]),ne=Q;return Y})(u,l,h,m)>0)for(let A=l;A<h;A+=m)C=p2(A/m|0,u[A],u[A+1],C);else for(let A=h-m;A>=l;A-=m)C=p2(A/m|0,u[A],u[A+1],C);return C&&Qd(C,C.next)&&(jp(C),C=C.next),C}function pu(u,l){if(!u)return u;l||(l=u);let h,m=u;do if(h=!1,m.steiner||!Qd(m,m.next)&&Xa(m.prev,m,m.next)!==0)m=m.next;else{if(jp(m),m=l=m.prev,m===m.next)break;h=!0}while(h||m!==l);return l}function Fp(u,l,h,m,b,C,A){if(!u)return;!A&&C&&(function(B,U,Y,Q){let ne=B;do ne.z===0&&(ne.z=ly(ne.x,ne.y,U,Y,Q)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==B);ne.prevZ.nextZ=null,ne.prevZ=null,(function(ae){let ce,ue=1;do{let pe,ve=ae;ae=null;let ze=null;for(ce=0;ve;){ce++;let Se=ve,Ce=0;for(let Ue=0;Ue<ue&&(Ce++,Se=Se.nextZ,Se);Ue++);let Be=ue;for(;Ce>0||Be>0&&Se;)Ce!==0&&(Be===0||!Se||ve.z<=Se.z)?(pe=ve,ve=ve.nextZ,Ce--):(pe=Se,Se=Se.nextZ,Be--),ze?ze.nextZ=pe:ae=pe,pe.prevZ=ze,ze=pe;ve=Se}ze.nextZ=null,ue*=2}while(ce>1)})(ne)})(u,m,b,C);let D=u;for(;u.prev!==u.next;){const B=u.prev,U=u.next;if(C?SL(u,m,b,C):wL(u))l.push(B.i,u.i,U.i),jp(u),u=U.next,D=U.next;else if((u=U)===D){A?A===1?Fp(u=kL(pu(u),l),l,h,m,b,C,2):A===2&&CL(u,l,h,m,b,C):Fp(pu(u),l,h,m,b,C,1);break}}}function wL(u){const l=u.prev,h=u,m=u.next;if(Xa(l,h,m)>=0)return!1;const b=l.x,C=h.x,A=m.x,D=l.y,B=h.y,U=m.y,Y=Math.min(b,C,A),Q=Math.min(D,B,U),ne=Math.max(b,C,A),ae=Math.max(D,B,U);let ce=m.next;for(;ce!==l;){if(ce.x>=Y&&ce.x<=ne&&ce.y>=Q&&ce.y<=ae&&Bp(b,D,C,B,A,U,ce.x,ce.y)&&Xa(ce.prev,ce,ce.next)>=0)return!1;ce=ce.next}return!0}function SL(u,l,h,m){const b=u.prev,C=u,A=u.next;if(Xa(b,C,A)>=0)return!1;const D=b.x,B=C.x,U=A.x,Y=b.y,Q=C.y,ne=A.y,ae=Math.min(D,B,U),ce=Math.min(Y,Q,ne),ue=Math.max(D,B,U),pe=Math.max(Y,Q,ne),ve=ly(ae,ce,l,h,m),ze=ly(ue,pe,l,h,m);let Se=u.prevZ,Ce=u.nextZ;for(;Se&&Se.z>=ve&&Ce&&Ce.z<=ze;){if(Se.x>=ae&&Se.x<=ue&&Se.y>=ce&&Se.y<=pe&&Se!==b&&Se!==A&&Bp(D,Y,B,Q,U,ne,Se.x,Se.y)&&Xa(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,Ce.x>=ae&&Ce.x<=ue&&Ce.y>=ce&&Ce.y<=pe&&Ce!==b&&Ce!==A&&Bp(D,Y,B,Q,U,ne,Ce.x,Ce.y)&&Xa(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;Se&&Se.z>=ve;){if(Se.x>=ae&&Se.x<=ue&&Se.y>=ce&&Se.y<=pe&&Se!==b&&Se!==A&&Bp(D,Y,B,Q,U,ne,Se.x,Se.y)&&Xa(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;Ce&&Ce.z<=ze;){if(Ce.x>=ae&&Ce.x<=ue&&Ce.y>=ce&&Ce.y<=pe&&Ce!==b&&Ce!==A&&Bp(D,Y,B,Q,U,ne,Ce.x,Ce.y)&&Xa(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function kL(u,l){let h=u;do{const m=h.prev,b=h.next.next;!Qd(m,b)&&d2(m,h,h.next,b)&&Np(m,b)&&Np(b,m)&&(l.push(m.i,h.i,b.i),jp(h),jp(h.next),h=u=b),h=h.next}while(h!==u);return pu(h)}function CL(u,l,h,m,b,C){let A=u;do{let D=A.next.next;for(;D!==A.prev;){if(A.i!==D.i&&IL(A,D)){let B=f2(A,D);return A=pu(A,A.next),B=pu(B,B.next),Fp(A,l,h,m,b,C,0),void Fp(B,l,h,m,b,C,0)}D=D.next}A=A.next}while(A!==u)}function AL(u,l){let h=u.x-l.x;return h===0&&(h=u.y-l.y,h===0)&&(h=(u.next.y-u.y)/(u.next.x-u.x)-(l.next.y-l.y)/(l.next.x-l.x)),h}function TL(u,l){const h=(function(b,C){let A=C;const D=b.x,B=b.y;let U,Y=-1/0;if(Qd(b,A))return A;do{if(Qd(b,A.next))return A.next;if(B<=A.y&&B>=A.next.y&&A.next.y!==A.y){const ue=A.x+(B-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(ue<=D&&ue>Y&&(Y=ue,U=A.x<A.next.x?A:A.next,ue===D))return U}A=A.next}while(A!==C);if(!U)return null;const Q=U,ne=U.x,ae=U.y;let ce=1/0;A=U;do{if(D>=A.x&&A.x>=ne&&D!==A.x&&u2(B<ae?D:Y,B,ne,ae,B<ae?Y:D,B,A.x,A.y)){const ue=Math.abs(B-A.y)/(D-A.x);Np(A,b)&&(ue<ce||ue===ce&&(A.x>U.x||A.x===U.x&&EL(U,A)))&&(U=A,ce=ue)}A=A.next}while(A!==Q);return U})(u,l);if(!h)return l;const m=f2(h,u);return pu(m,m.next),pu(h,h.next)}function EL(u,l){return Xa(u.prev,u,l.prev)<0&&Xa(l.next,u,u.next)<0}function ly(u,l,h,m,b){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-h)*b|0)|u<<8))|u<<4))|u<<2))|u<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function ML(u){let l=u,h=u;do(l.x<h.x||l.x===h.x&&l.y<h.y)&&(h=l),l=l.next;while(l!==u);return h}function u2(u,l,h,m,b,C,A,D){return(b-A)*(l-D)>=(u-A)*(C-D)&&(u-A)*(m-D)>=(h-A)*(l-D)&&(h-A)*(C-D)>=(b-A)*(m-D)}function Bp(u,l,h,m,b,C,A,D){return!(u===A&&l===D)&&u2(u,l,h,m,b,C,A,D)}function IL(u,l){return u.next.i!==l.i&&u.prev.i!==l.i&&!(function(h,m){let b=h;do{if(b.i!==h.i&&b.next.i!==h.i&&b.i!==m.i&&b.next.i!==m.i&&d2(b,b.next,h,m))return!0;b=b.next}while(b!==h);return!1})(u,l)&&(Np(u,l)&&Np(l,u)&&(function(h,m){let b=h,C=!1;const A=(h.x+m.x)/2,D=(h.y+m.y)/2;do b.y>D!=b.next.y>D&&b.next.y!==b.y&&A<(b.next.x-b.x)*(D-b.y)/(b.next.y-b.y)+b.x&&(C=!C),b=b.next;while(b!==h);return C})(u,l)&&(Xa(u.prev,u,l.prev)||Xa(u,l.prev,l))||Qd(u,l)&&Xa(u.prev,u,u.next)>0&&Xa(l.prev,l,l.next)>0)}function Xa(u,l,h){return(l.y-u.y)*(h.x-l.x)-(l.x-u.x)*(h.y-l.y)}function Qd(u,l){return u.x===l.x&&u.y===l.y}function d2(u,l,h,m){const b=u0(Xa(u,l,h)),C=u0(Xa(u,l,m)),A=u0(Xa(h,m,u)),D=u0(Xa(h,m,l));return b!==C&&A!==D||!(b!==0||!h0(u,h,l))||!(C!==0||!h0(u,m,l))||!(A!==0||!h0(h,u,m))||!(D!==0||!h0(h,l,m))}function h0(u,l,h){return l.x<=Math.max(u.x,h.x)&&l.x>=Math.min(u.x,h.x)&&l.y<=Math.max(u.y,h.y)&&l.y>=Math.min(u.y,h.y)}function u0(u){return u>0?1:u<0?-1:0}function Np(u,l){return Xa(u.prev,u,u.next)<0?Xa(u,l,u.next)>=0&&Xa(u,u.prev,l)>=0:Xa(u,l,u.prev)<0||Xa(u,u.next,l)<0}function f2(u,l){const h=cy(u.i,u.x,u.y),m=cy(l.i,l.x,l.y),b=u.next,C=l.prev;return u.next=l,l.prev=u,h.next=b,b.prev=h,m.next=h,h.prev=m,C.next=m,m.prev=C,m}function p2(u,l,h,m){const b=cy(u,l,h);return m?(b.next=m.next,b.prev=m,m.next.prev=b,m.next=b):(b.prev=b,b.next=b),b}function jp(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function cy(u,l,h){return{i:u,x:l,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Jd{constructor(l,h){if(h>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=h}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class d0{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}d0.noSubdivision=new d0({fill:new Jd(0,0),line:new Jd(0,0),tile:new Jd(0,0),stencil:new Jd(0,0),circle:1}),ti("SubdivisionGranularityExpression",Jd),ti("SubdivisionGranularitySetting",d0);const ef=-32768,Vp=32767;class PL{constructor(l,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=vt/l,this._canonical=h}_getKey(l,h){return(l+=32768)<<16|h+32768}_vertexToIndex(l,h){if(l<-32768||h<-32768||l>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const m=0|Math.round(l),b=0|Math.round(h),C=this._getKey(m,b);if(this._vertexDictionary.has(C))return this._vertexDictionary.get(C);const A=this._vertexBuffer.length/2;return this._vertexDictionary.set(C,A),this._vertexBuffer.push(m,b),A}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(b,C){const A=[];for(let D=0;D<C.length;D+=3){const B=C[D],U=C[D+1],Y=C[D+2],Q=b[2*B],ne=b[2*B+1];(b[2*U]-Q)*(b[2*Y+1]-ne)-(b[2*U+1]-ne)*(b[2*Y]-Q)>0?(A.push(B),A.push(Y),A.push(U)):(A.push(B),A.push(U),A.push(Y))}return A})(this._vertexBuffer,l);const h=[],m=l.length;for(let b=0;b<m;b+=3){const C=[l[b+0],l[b+1],l[b+2]],A=[this._vertexBuffer[2*l[b+0]+0],this._vertexBuffer[2*l[b+0]+1],this._vertexBuffer[2*l[b+1]+0],this._vertexBuffer[2*l[b+1]+1],this._vertexBuffer[2*l[b+2]+0],this._vertexBuffer[2*l[b+2]+1]];let D=1/0,B=1/0,U=-1/0,Y=-1/0;for(let ue=0;ue<3;ue++){const pe=A[2*ue],ve=A[2*ue+1];D=Math.min(D,pe),U=Math.max(U,pe),B=Math.min(B,ve),Y=Math.max(Y,ve)}if(D===U||B===Y)continue;const Q=Math.floor(D/this._granularityCellSize),ne=Math.ceil(U/this._granularityCellSize),ae=Math.floor(B/this._granularityCellSize),ce=Math.ceil(Y/this._granularityCellSize);if(Q!==ne||ae!==ce)for(let ue=ae;ue<ce;ue++){const pe=this._scanlineGenerateVertexRingForCellRow(ue,A,C);LL(this._vertexBuffer,pe,h)}else h.push(...C)}return h}_scanlineGenerateVertexRingForCellRow(l,h,m){const b=l*this._granularityCellSize,C=b+this._granularityCellSize,A=[];for(let D=0;D<3;D++){const B=h[2*D],U=h[2*D+1],Y=h[2*(D+1)%6],Q=h[(2*(D+1)+1)%6],ne=h[2*(D+2)%6],ae=h[(2*(D+2)+1)%6],ce=Y-B,ue=Q-U,pe=ce===0,ve=ue===0,ze=(b-U)/ue,Se=(C-U)/ue,Ce=Math.min(ze,Se),Be=Math.max(ze,Se);if(!ve&&(Ce>=1||Be<=0)||ve&&(U<b||U>C)){Q>=b&&Q<=C&&A.push(m[(D+1)%3]);continue}!ve&&Ce>0&&A.push(this._vertexToIndex(B+ce*Ce,U+ue*Ce));const Ue=B+ce*Math.max(Ce,0),ot=B+ce*Math.min(Be,1);pe||this._generateIntraEdgeVertices(A,B,U,Y,Q,Ue,ot),!ve&&Be<1&&A.push(this._vertexToIndex(B+ce*Be,U+ue*Be)),(ve||Q>=b&&Q<=C)&&A.push(m[(D+1)%3]),!ve&&(Q<=b||Q>=C)&&this._generateInterEdgeVertices(A,B,U,Y,Q,ne,ae,ot,b,C)}return A}_generateIntraEdgeVertices(l,h,m,b,C,A,D){const B=b-h,U=C-m,Y=U===0,Q=Y?Math.min(h,b):Math.min(A,D),ne=Y?Math.max(h,b):Math.max(A,D),ae=Math.floor(Q/this._granularityCellSize)+1,ce=Math.ceil(ne/this._granularityCellSize)-1;if(Y?h<b:A<D)for(let ue=ae;ue<=ce;ue++){const pe=ue*this._granularityCellSize;l.push(this._vertexToIndex(pe,m+U*(pe-h)/B))}else for(let ue=ce;ue>=ae;ue--){const pe=ue*this._granularityCellSize;l.push(this._vertexToIndex(pe,m+U*(pe-h)/B))}}_generateInterEdgeVertices(l,h,m,b,C,A,D,B,U,Y){const Q=C-m,ne=A-b,ae=D-C,ce=(U-C)/ae,ue=(Y-C)/ae,pe=Math.min(ce,ue),ve=Math.max(ce,ue),ze=b+ne*pe;let Se=Math.floor(Math.min(ze,B)/this._granularityCellSize)+1,Ce=Math.ceil(Math.max(ze,B)/this._granularityCellSize)-1,Be=B<ze;const Ue=ae===0;if(Ue&&(D===U||D===Y))return;if(Ue||pe>=1||ve<=0){const wt=m-D,xt=A+(h-A)*Math.min((U-D)/wt,(Y-D)/wt);Se=Math.floor(Math.min(xt,B)/this._granularityCellSize)+1,Ce=Math.ceil(Math.max(xt,B)/this._granularityCellSize)-1,Be=B<xt}const ot=Q>0?Y:U;if(Be)for(let wt=Se;wt<=Ce;wt++)l.push(this._vertexToIndex(wt*this._granularityCellSize,ot));else for(let wt=Ce;wt>=Se;wt--)l.push(this._vertexToIndex(wt*this._granularityCellSize,ot))}_generateOutline(l){const h=[];for(const m of l){const b=gu(m,this._granularity,!0),C=this._pointArrayToIndices(b),A=[];for(let D=1;D<C.length;D++)A.push(C[D-1]),A.push(C[D]);h.push(A)}return h}_handlePoles(l){let h=!1,m=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(m=!0)),(h||m)&&this._fillPoles(l,h,m)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let h=0;h<l.length;h+=2){const m=l[h+1];m===ef&&(l[h+1]=-32767),m===Vp&&(l[h+1]=32766)}}_generatePoleQuad(l,h,m,b,C,A){b>C!=(A===ef)?(l.push(h),l.push(m),l.push(this._vertexToIndex(b,A)),l.push(m),l.push(this._vertexToIndex(C,A)),l.push(this._vertexToIndex(b,A))):(l.push(m),l.push(h),l.push(this._vertexToIndex(b,A)),l.push(this._vertexToIndex(C,A)),l.push(m),l.push(this._vertexToIndex(b,A)))}_fillPoles(l,h,m){const b=this._vertexBuffer,C=vt,A=l.length;for(let D=2;D<A;D+=3){const B=l[D-2],U=l[D-1],Y=l[D],Q=b[2*B],ne=b[2*B+1],ae=b[2*U],ce=b[2*U+1],ue=b[2*Y],pe=b[2*Y+1];h&&(ne===0&&ce===0&&this._generatePoleQuad(l,B,U,Q,ae,ef),ce===0&&pe===0&&this._generatePoleQuad(l,U,Y,ae,ue,ef),pe===0&&ne===0&&this._generatePoleQuad(l,Y,B,ue,Q,ef)),m&&(ne===C&&ce===C&&this._generatePoleQuad(l,B,U,Q,ae,Vp),ce===C&&pe===C&&this._generatePoleQuad(l,U,Y,ae,ue,Vp),pe===C&&ne===C&&this._generatePoleQuad(l,Y,B,ue,Q,Vp))}}_initializeVertices(l){for(let h=0;h<l.length;h+=2)this._vertexToIndex(l[h],l[h+1])}subdividePolygonInternal(l,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:m,holeIndices:b}=(function(D){const B=[],U=[];for(const Y of D)if(Y.length!==0){Y!==D[0]&&B.push(U.length/2);for(let Q=0;Q<Y.length;Q++)U.push(Y[Q].x),U.push(Y[Q].y)}return{flattened:U,holeIndices:B}})(l);let C;this._initializeVertices(m);try{const D=(function(U,Y,Q=2){const ne=Y&&Y.length,ae=ne?Y[0]*Q:U.length;let ce=h2(U,0,ae,Q,!0);const ue=[];if(!ce||ce.next===ce.prev)return ue;let pe,ve,ze;if(ne&&(ce=(function(Se,Ce,Be,Ue){const ot=[];for(let wt=0,xt=Ce.length;wt<xt;wt++){const Et=h2(Se,Ce[wt]*Ue,wt<xt-1?Ce[wt+1]*Ue:Se.length,Ue,!1);Et===Et.next&&(Et.steiner=!0),ot.push(ML(Et))}ot.sort(AL);for(let wt=0;wt<ot.length;wt++)Be=TL(ot[wt],Be);return Be})(U,Y,ce,Q)),U.length>80*Q){pe=U[0],ve=U[1];let Se=pe,Ce=ve;for(let Be=Q;Be<ae;Be+=Q){const Ue=U[Be],ot=U[Be+1];Ue<pe&&(pe=Ue),ot<ve&&(ve=ot),Ue>Se&&(Se=Ue),ot>Ce&&(Ce=ot)}ze=Math.max(Se-pe,Ce-ve),ze=ze!==0?32767/ze:0}return Fp(ce,ue,Q,pe,ve,ze,0),ue})(m,b),B=this._convertIndices(m,D);C=this._subdivideTrianglesScanline(B)}catch(D){console.error(D)}let A=[];return h&&(A=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(C),{verticesFlattened:this._vertexBuffer,indicesTriangles:C,indicesLineList:A}}_convertIndices(l,h){const m=[];for(let b=0;b<h.length;b++)m.push(this._vertexToIndex(l[2*h[b]],l[2*h[b]+1]));return m}_pointArrayToIndices(l){const h=[];for(let m=0;m<l.length;m++){const b=l[m];h.push(this._vertexToIndex(b.x,b.y))}return h}}function g2(u,l,h,m=!0){return new PL(h,l).subdividePolygonInternal(u,m)}function gu(u,l,h=!1){if(!u||u.length<1)return[];if(u.length<2)return[];const m=u[0],b=u[u.length-1],C=h&&(m.x!==b.x||m.y!==b.y);if(l<2)return C?[...u,u[0]]:[...u];const A=Math.floor(vt/l),D=[];D.push(new d(u[0].x,u[0].y));const B=u.length,U=C?B:B-1;for(let Y=0;Y<U;Y++){const Q=u[Y],ne=Y<B-1?u[Y+1]:u[0],ae=Q.x,ce=Q.y,ue=ne.x,pe=ne.y,ve=ae!==ue,ze=ce!==pe;if(!ve&&!ze)continue;const Se=ue-ae,Ce=pe-ce,Be=Math.abs(Se),Ue=Math.abs(Ce);let ot=ae,wt=ce;for(;;){const Et=Se>0?(Math.floor(ot/A)+1)*A:(Math.ceil(ot/A)-1)*A,Ut=Ce>0?(Math.floor(wt/A)+1)*A:(Math.ceil(wt/A)-1)*A,It=Math.abs(ot-Et),bt=Math.abs(wt-Ut),ft=Math.abs(ot-ue),ei=Math.abs(wt-pe),Kt=ve?It/Be:Number.POSITIVE_INFINITY,ni=ze?bt/Ue:Number.POSITIVE_INFINITY;if((ft<=It||!ve)&&(ei<=bt||!ze))break;if(Kt<ni&&ve||!ze){ot=Et,wt+=Ce*Kt;const Yt=new d(ot,Math.round(wt));D[D.length-1].x===Yt.x&&D[D.length-1].y===Yt.y||D.push(Yt)}else{ot+=Se*ni,wt=Ut;const Yt=new d(Math.round(ot),wt);D[D.length-1].x===Yt.x&&D[D.length-1].y===Yt.y||D.push(Yt)}}const xt=new d(ue,pe);D[D.length-1].x===xt.x&&D[D.length-1].y===xt.y||D.push(xt)}return D}function LL(u,l,h){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let m=0,b=u[2*l[0]];for(let B=1;B<l.length;B++){const U=u[2*l[B]];U<b&&(b=U,m=B)}const C=l.length;let A=m,D=(A+1)%C;for(;;){const B=A-1>=0?A-1:C-1,U=(D+1)%C,Y=u[2*l[B]],Q=u[2*l[U]],ne=u[2*l[A]],ae=u[2*l[A]+1],ce=u[2*l[D]+1];let ue=!1;if(Y<Q)ue=!0;else if(Y>Q)ue=!1;else{const pe=ce-ae,ve=-(u[2*l[D]]-ne),ze=ae<ce?1:-1;((Y-ne)*pe+(u[2*l[B]+1]-ae)*ve)*ze>((Q-ne)*pe+(u[2*l[U]+1]-ae)*ve)*ze&&(ue=!0)}if(ue){const pe=l[B],ve=l[A],ze=l[D];pe!==ve&&pe!==ze&&ve!==ze&&h.push(ze,ve,pe),A--,A<0&&(A=C-1)}else{const pe=l[U],ve=l[A],ze=l[D];pe!==ve&&pe!==ze&&ve!==ze&&h.push(ze,ve,pe),D++,D>=C&&(D=0)}if(B===U)break}}function m2(u,l,h,m,b,C,A,D,B){const U=b.length/2,Y=A&&D&&B;if(U<$t.MAX_VERTEX_ARRAY_LENGTH){const Q=l.prepareSegment(U,h,m),ne=Q.vertexLength;for(let ue=0;ue<C.length;ue+=3)m.emplaceBack(ne+C[ue],ne+C[ue+1],ne+C[ue+2]);let ae,ce;Q.vertexLength+=U,Q.primitiveLength+=C.length/3,Y&&(ce=A.prepareSegment(U,h,D),ae=ce.vertexLength,ce.vertexLength+=U);for(let ue=0;ue<b.length;ue+=2)u(b[ue],b[ue+1]);if(Y)for(let ue=0;ue<B.length;ue++){const pe=B[ue];for(let ve=1;ve<pe.length;ve+=2)D.emplaceBack(ae+pe[ve-1],ae+pe[ve]);ce.primitiveLength+=pe.length/2}}else(function(Q,ne,ae,ce,ue,pe){const ve=[];for(let Ue=0;Ue<ce.length/2;Ue++)ve.push(-1);const ze={count:0};let Se=0,Ce=Q.getOrCreateLatestSegment(ne,ae),Be=Ce.vertexLength;for(let Ue=2;Ue<ue.length;Ue+=3){const ot=ue[Ue-2],wt=ue[Ue-1],xt=ue[Ue];let Et=ve[ot]<Se,Ut=ve[wt]<Se,It=ve[xt]<Se;Ce.vertexLength+((Et?1:0)+(Ut?1:0)+(It?1:0))>$t.MAX_VERTEX_ARRAY_LENGTH&&(Ce=Q.createNewSegment(ne,ae),Se=ze.count,Et=!0,Ut=!0,It=!0,Be=0);const bt=Hp(ve,ce,pe,ze,ot,Et,Ce),ft=Hp(ve,ce,pe,ze,wt,Ut,Ce),ei=Hp(ve,ce,pe,ze,xt,It,Ce);ae.emplaceBack(Be+bt-Se,Be+ft-Se,Be+ei-Se),Ce.primitiveLength++}})(l,h,m,b,C,u),Y&&(function(Q,ne,ae,ce,ue,pe){const ve=[];for(let Ue=0;Ue<ce.length/2;Ue++)ve.push(-1);const ze={count:0};let Se=0,Ce=Q.getOrCreateLatestSegment(ne,ae),Be=Ce.vertexLength;for(let Ue=0;Ue<ue.length;Ue++){const ot=ue[Ue];for(let wt=1;wt<ue[Ue].length;wt+=2){const xt=ot[wt-1],Et=ot[wt];let Ut=ve[xt]<Se,It=ve[Et]<Se;Ce.vertexLength+((Ut?1:0)+(It?1:0))>$t.MAX_VERTEX_ARRAY_LENGTH&&(Ce=Q.createNewSegment(ne,ae),Se=ze.count,Ut=!0,It=!0,Be=0);const bt=Hp(ve,ce,pe,ze,xt,Ut,Ce),ft=Hp(ve,ce,pe,ze,Et,It,Ce);ae.emplaceBack(Be+bt-Se,Be+ft-Se),Ce.primitiveLength++}}})(A,h,D,b,B,u),l.forceNewSegmentOnNextPrepare(),A?.forceNewSegmentOnNextPrepare()}function Hp(u,l,h,m,b,C,A){if(C){const D=m.count;return h(l[2*b],l[2*b+1]),u[b]=m.count,m.count++,A.vertexLength++,D}return u[b]}class hy{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Ee,this.indexArray=new dt,this.indexArray2=new Ot,this.programConfigurations=new uc(l.layers,l.zoom),this.segments=new $t,this.segments2=new $t,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,m){this.hasDependencies=c0("fill",this.layers,h);const b=this.layers[0].layout.get("fill-sort-key"),C=!b.isConstant(),A=[];for(const{feature:D,id:B,index:U,sourceLayerIndex:Y}of l){const Q=this.layers[0]._featureFilter.needGeometry,ne=Bl(D,Q);if(!this.layers[0]._featureFilter.filter(new Wn(this.zoom),ne,m))continue;const ae=C?b.evaluate(ne,{},m,h.availableImages):void 0,ce={id:B,properties:D.properties,type:D.type,sourceLayerIndex:Y,index:U,geometry:Q?ne.geometry:Fl(D),patterns:{},sortKey:ae};A.push(ce)}C&&A.sort(((D,B)=>D.sortKey-B.sortKey));for(const D of A){const{geometry:B,index:U,sourceLayerIndex:Y}=D;if(this.hasDependencies){const Q=oy("fill",this.layers,D,{zoom:this.zoom},h);this.patternFeatures.push(Q)}else this.addFeature(D,B,U,m,{},h.subdivisionGranularity);h.featureIndex.insert(l[U].feature,B,U,Y,this.index)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:m})}addFeatures(l,h,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,h,m,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,bL),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,h,m,b,C,A){for(const D of ol(h,500)){const B=g2(D,b,A.fill.getGranularityForZoomLevel(b.z)),U=this.layoutVertexArray;m2(((Y,Q)=>{U.emplaceBack(Y,Q)}),this.segments,this.layoutVertexArray,this.indexArray,B.verticesFlattened,B.indicesTriangles,this.segments2,this.indexArray2,B.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{imagePositions:C,canonical:b})}}let _2,x2;ti("FillBucket",hy,{omit:["layers","patternFeatures"]});var DL={get paint(){return x2=x2||new as({"fill-antialias":new hi(rt.paint_fill["fill-antialias"]),"fill-opacity":new Ci(rt.paint_fill["fill-opacity"]),"fill-color":new Ci(rt.paint_fill["fill-color"]),"fill-outline-color":new Ci(rt.paint_fill["fill-outline-color"]),"fill-translate":new hi(rt.paint_fill["fill-translate"]),"fill-translate-anchor":new hi(rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new su(rt.paint_fill["fill-pattern"])})},get layout(){return _2=_2||new as({"fill-sort-key":new Ci(rt.layout_fill["fill-sort-key"])})}};class RL extends Zs{constructor(l,h){super(l,DL,h)}recalculate(l,h){super.recalculate(l,h);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new hy(l)}queryRadius(){return o0(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:h,transform:m,pixelsToTileUnits:b}){return Zw(l0(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-m.bearingInRadians,b),h)}isTileClipped(){return!0}}const OL=Ba([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),zL=Ba([{name:"a_centroid",components:2,type:"Int16"}],4),{members:FL}=OL;class Up{constructor(l,h,m,b,C){this.properties={},this.extent=m,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=b,this._values=C,l.readFields(BL,this,h)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const h=l.readVarint()+l.pos,m=[];let b,C=1,A=0,D=0,B=0;for(;l.pos<h;){if(A<=0){const U=l.readVarint();C=7&U,A=U>>3}if(A--,C===1||C===2)D+=l.readSVarint(),B+=l.readSVarint(),C===1&&(b&&m.push(b),b=[]),b&&b.push(new d(D,B));else{if(C!==7)throw new Error(`unknown command ${C}`);b&&b.push(b[0].clone())}}return b&&m.push(b),m}bbox(){const l=this._pbf;l.pos=this._geometry;const h=l.readVarint()+l.pos;let m=1,b=0,C=0,A=0,D=1/0,B=-1/0,U=1/0,Y=-1/0;for(;l.pos<h;){if(b<=0){const Q=l.readVarint();m=7&Q,b=Q>>3}if(b--,m===1||m===2)C+=l.readSVarint(),A+=l.readSVarint(),C<D&&(D=C),C>B&&(B=C),A<U&&(U=A),A>Y&&(Y=A);else if(m!==7)throw new Error(`unknown command ${m}`)}return[D,U,B,Y]}toGeoJSON(l,h,m){const b=this.extent*Math.pow(2,m),C=this.extent*l,A=this.extent*h,D=this.loadGeometry();function B(ne){return[360*(ne.x+C)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(ne.y+A)/b)*Math.PI))-90]}function U(ne){return ne.map(B)}let Y;if(this.type===1){const ne=[];for(const ce of D)ne.push(ce[0]);const ae=U(ne);Y=ne.length===1?{type:"Point",coordinates:ae[0]}:{type:"MultiPoint",coordinates:ae}}else if(this.type===2){const ne=D.map(U);Y=ne.length===1?{type:"LineString",coordinates:ne[0]}:{type:"MultiLineString",coordinates:ne}}else{if(this.type!==3)throw new Error("unknown feature type");{const ne=y2(D),ae=[];for(const ce of ne)ae.push(ce.map(U));Y=ae.length===1?{type:"Polygon",coordinates:ae[0]}:{type:"MultiPolygon",coordinates:ae}}}const Q={type:"Feature",geometry:Y,properties:this.properties};return this.id!=null&&(Q.id=this.id),Q}}function BL(u,l,h){u===1?l.id=h.readVarint():u===2?(function(m,b){const C=m.readVarint()+m.pos;for(;m.pos<C;){const A=b._keys[m.readVarint()],D=b._values[m.readVarint()];b.properties[A]=D}})(h,l):u===3?l.type=h.readVarint():u===4&&(l._geometry=h.pos)}function y2(u){const l=u.length;if(l<=1)return[u];const h=[];let m,b;for(let C=0;C<l;C++){const A=NL(u[C]);A!==0&&(b===void 0&&(b=A<0),b===A<0?(m&&h.push(m),m=[u[C]]):m&&m.push(u[C]))}return m&&h.push(m),h}function NL(u){let l=0;for(let h,m,b=0,C=u.length,A=C-1;b<C;A=b++)h=u[b],m=u[A],l+=(m.x-h.x)*(h.y+m.y);return l}Up.types=["Unknown","Point","LineString","Polygon"];class jL{constructor(l,h){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(VL,this,h),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const h=this._pbf.readVarint()+this._pbf.pos;return new Up(this._pbf,h,this.extent,this._keys,this._values)}}function VL(u,l,h){u===15?l.version=h.readVarint():u===1?l.name=h.readString():u===5?l.extent=h.readVarint():u===2?l._features.push(h.pos):u===3?l._keys.push(h.readString()):u===4&&l._values.push((function(m){let b=null;const C=m.readVarint()+m.pos;for(;m.pos<C;){const A=m.readVarint()>>3;b=A===1?m.readString():A===2?m.readFloat():A===3?m.readDouble():A===4?m.readVarint64():A===5?m.readVarint():A===6?m.readSVarint():A===7?m.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b})(h))}class v2{constructor(l,h){this.layers=l.readFields(HL,{},h)}}function HL(u,l,h){if(u===3){const m=new jL(h,h.readVarint()+h.pos);m.length&&(l[m.name]=m)}}const uy=Math.pow(2,13);function Gp(u,l,h,m,b,C,A,D){u.emplaceBack(l,h,2*Math.floor(m*uy)+A,b*uy*2,C*uy*2,Math.round(D))}class dy{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Fe,this.centroidVertexArray=new Te,this.indexArray=new dt,this.programConfigurations=new uc(l.layers,l.zoom),this.segments=new $t,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,m){this.features=[],this.hasDependencies=c0("fill-extrusion",this.layers,h);for(const{feature:b,id:C,index:A,sourceLayerIndex:D}of l){const B=this.layers[0]._featureFilter.needGeometry,U=Bl(b,B);if(!this.layers[0]._featureFilter.filter(new Wn(this.zoom),U,m))continue;const Y={id:C,sourceLayerIndex:D,index:A,geometry:B?U.geometry:Fl(b),properties:b.properties,type:b.type,patterns:{}};this.hasDependencies?this.features.push(oy("fill-extrusion",this.layers,Y,{zoom:this.zoom},h)):this.addFeature(Y,Y.geometry,A,m,{},h.subdivisionGranularity),h.featureIndex.insert(b,Y.geometry,A,D,this.index,!0)}}addFeatures(l,h,m){for(const b of this.features){const{geometry:C}=b;this.addFeature(b,C,b.index,h,m,l.subdivisionGranularity)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:m})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,FL),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,zL.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,h,m,b,C,A){for(const D of ol(h,500)){const B={x:0,y:0,sampleCount:0},U=this.layoutVertexArray.length;this.processPolygon(B,b,l,D,A);const Y=this.layoutVertexArray.length-U,Q=Math.floor(B.x/B.sampleCount),ne=Math.floor(B.y/B.sampleCount);for(let ae=0;ae<Y;ae++)this.centroidVertexArray.emplaceBack(Q,ne)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{imagePositions:C,canonical:b})}processPolygon(l,h,m,b,C){if(b.length<1||b2(b[0]))return;for(const Q of b)Q.length!==0&&UL(l,Q);const A={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},D=C.fill.getGranularityForZoomLevel(h.z),B=Up.types[m.type]==="Polygon";for(const Q of b){if(Q.length===0||b2(Q))continue;const ne=gu(Q,D,B);this._generateSideFaces(ne,A)}if(!B)return;const U=g2(b,h,D,!1),Y=this.layoutVertexArray;m2(((Q,ne)=>{Gp(Y,Q,ne,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,U.verticesFlattened,U.indicesTriangles)}_generateSideFaces(l,h){let m=0;for(let b=1;b<l.length;b++){const C=l[b],A=l[b-1];if(GL(C,A))continue;h.segment.vertexLength+4>$t.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const D=C.sub(A)._perp()._unit(),B=A.dist(C);m+B>32768&&(m=0),Gp(this.layoutVertexArray,C.x,C.y,D.x,D.y,0,0,m),Gp(this.layoutVertexArray,C.x,C.y,D.x,D.y,0,1,m),m+=B,Gp(this.layoutVertexArray,A.x,A.y,D.x,D.y,0,0,m),Gp(this.layoutVertexArray,A.x,A.y,D.x,D.y,0,1,m);const U=h.segment.vertexLength;this.indexArray.emplaceBack(U,U+2,U+1),this.indexArray.emplaceBack(U+1,U+2,U+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function UL(u,l){for(let h=0;h<l.length;h++){const m=l[h];h===l.length-1&&l[0].x===m.x&&l[0].y===m.y||(u.x+=m.x,u.y+=m.y,u.sampleCount++)}}function GL(u,l){return u.x===l.x&&(u.x<0||u.x>vt)||u.y===l.y&&(u.y<0||u.y>vt)}function b2(u){return u.every((l=>l.x<0))||u.every((l=>l.x>vt))||u.every((l=>l.y<0))||u.every((l=>l.y>vt))}let w2;ti("FillExtrusionBucket",dy,{omit:["layers","features"]});var WL={get paint(){return w2=w2||new as({"fill-extrusion-opacity":new hi(rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ci(rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new hi(rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new hi(rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new su(rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ci(rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ci(rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new hi(rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class $L extends Zs{constructor(l,h){super(l,WL,h)}createBucket(l){return new dy(l)}queryRadius(){return o0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:m,geometry:b,transform:C,pixelsToTileUnits:A,pixelPosMatrix:D}){const B=l0(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-C.bearingInRadians,A),U=this.paint.get("fill-extrusion-height").evaluate(h,m),Y=this.paint.get("fill-extrusion-base").evaluate(h,m),Q=(function(ae,ce){const ue=[];for(const pe of ae){const ve=[pe.x,pe.y,0,1];et(ve,ve,ce),ue.push(new d(ve[0]/ve[3],ve[1]/ve[3]))}return ue})(B,D),ne=(function(ae,ce,ue,pe){const ve=[],ze=[],Se=pe[8]*ce,Ce=pe[9]*ce,Be=pe[10]*ce,Ue=pe[11]*ce,ot=pe[8]*ue,wt=pe[9]*ue,xt=pe[10]*ue,Et=pe[11]*ue;for(const Ut of ae){const It=[],bt=[];for(const ft of Ut){const ei=ft.x,Kt=ft.y,ni=pe[0]*ei+pe[4]*Kt+pe[12],Yt=pe[1]*ei+pe[5]*Kt+pe[13],pi=pe[2]*ei+pe[6]*Kt+pe[14],mn=pe[3]*ei+pe[7]*Kt+pe[15],Ji=pi+Be,ma=mn+Ue,qr=ni+ot,tr=Yt+wt,_a=pi+xt,ha=mn+Et,Mn=new d((ni+Se)/ma,(Yt+Ce)/ma);Mn.z=Ji/ma,It.push(Mn);const Ia=new d(qr/ha,tr/ha);Ia.z=_a/ha,bt.push(Ia)}ve.push(It),ze.push(bt)}return[ve,ze]})(b,Y,U,D);return(function(ae,ce,ue){let pe=1/0;Zw(ue,ce)&&(pe=S2(ue,ce[0]));for(let ve=0;ve<ce.length;ve++){const ze=ce[ve],Se=ae[ve];for(let Ce=0;Ce<ze.length-1;Ce++){const Be=ze[Ce],Ue=[Be,ze[Ce+1],Se[Ce+1],Se[Ce],Be];qd(ue,Ue)&&(pe=Math.min(pe,S2(ue,Ue)))}}return pe!==1/0&&pe})(ne[0],ne[1],Q)}}function Wp(u,l){return u.x*l.x+u.y*l.y}function S2(u,l){if(u.length===1){let h=0;const m=l[h++];let b;for(;!b||m.equals(b);)if(b=l[h++],!b)return 1/0;for(;h<l.length;h++){const C=l[h],A=u[0],D=b.sub(m),B=C.sub(m),U=A.sub(m),Y=Wp(D,D),Q=Wp(D,B),ne=Wp(B,B),ae=Wp(U,D),ce=Wp(U,B),ue=Y*ne-Q*Q,pe=(ne*ae-Q*ce)/ue,ve=(Y*ce-Q*ae)/ue,ze=m.z*(1-pe-ve)+b.z*pe+C.z*ve;if(isFinite(ze))return ze}return 1/0}{let h=1/0;for(const m of l)h=Math.min(h,m.z);return h}}const XL=Ba([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:YL}=XL,qL=Ba([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ZL}=qL,KL=Math.cos(Math.PI/180*37.5),k2=Math.pow(2,14)/.5;class fy{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((h=>{this.gradients[h.id]={}})),this.layoutVertexArray=new Ge,this.layoutVertexArray2=new Oe,this.indexArray=new dt,this.programConfigurations=new uc(l.layers,l.zoom),this.segments=new $t,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,m){this.hasDependencies=c0("line",this.layers,h)||this.hasLineDasharray(this.layers);const b=this.layers[0].layout.get("line-sort-key"),C=!b.isConstant(),A=[];for(const{feature:D,id:B,index:U,sourceLayerIndex:Y}of l){const Q=this.layers[0]._featureFilter.needGeometry,ne=Bl(D,Q);if(!this.layers[0]._featureFilter.filter(new Wn(this.zoom),ne,m))continue;const ae=C?b.evaluate(ne,{},m):void 0,ce={id:B,properties:D.properties,type:D.type,sourceLayerIndex:Y,index:U,geometry:Q?ne.geometry:Fl(D),patterns:{},dashes:{},sortKey:ae};A.push(ce)}C&&A.sort(((D,B)=>D.sortKey-B.sortKey));for(const D of A){const{geometry:B,index:U,sourceLayerIndex:Y}=D;this.hasDependencies?(c0("line",this.layers,h)?oy("line",this.layers,D,{zoom:this.zoom},h):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,D,this.zoom,h),this.patternFeatures.push(D)):this.addFeature(D,B,U,m,{},{},h.subdivisionGranularity),h.featureIndex.insert(l[U].feature,B,U,Y,this.index)}}update(l,h,m,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:m,dashPositions:b})}addFeatures(l,h,m,b){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,h,m,b,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,ZL)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,YL),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,h,m,b,C,A,D){const B=this.layers[0].layout,U=B.get("line-join").evaluate(l,{}),Y=B.get("line-cap"),Q=B.get("line-miter-limit"),ne=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const ae of h)this.addLine(ae,l,U,Y,Q,ne,b,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{imagePositions:C,dashPositions:A,canonical:b})}addLine(l,h,m,b,C,A,D,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=gu(l,D?B.line.getGranularityForZoomLevel(D.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Se=0;Se<l.length-1;Se++)this.totalDistance+=l[Se].dist(l[Se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const U=Up.types[h.type]==="Polygon";let Y=l.length;for(;Y>=2&&l[Y-1].equals(l[Y-2]);)Y--;let Q=0;for(;Q<Y-1&&l[Q].equals(l[Q+1]);)Q++;if(Y<(U?3:2))return;m==="bevel"&&(C=1.05);const ne=this.overscaling<=16?122880/(512*this.overscaling):0,ae=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray);let ce,ue,pe,ve,ze;this.e1=this.e2=-1,U&&(ce=l[Y-2],ze=l[Q].sub(ce)._unit()._perp());for(let Se=Q;Se<Y;Se++){if(pe=Se===Y-1?U?l[Q+1]:void 0:l[Se+1],pe&&l[Se].equals(pe))continue;ze&&(ve=ze),ce&&(ue=ce),ce=l[Se],ze=pe?pe.sub(ce)._unit()._perp():ve,ve=ve||ze;let Ce=ve.add(ze);Ce.x===0&&Ce.y===0||Ce._unit();const Be=ve.x*ze.x+ve.y*ze.y,Ue=Ce.x*ze.x+Ce.y*ze.y,ot=Ue!==0?1/Ue:1/0,wt=2*Math.sqrt(2-2*Ue),xt=Ue<KL&&ue&&pe,Et=ve.x*ze.y-ve.y*ze.x>0;if(xt&&Se>Q){const bt=ce.dist(ue);if(bt>2*ne){const ft=ce.sub(ce.sub(ue)._mult(ne/bt)._round());this.updateDistance(ue,ft),this.addCurrentVertex(ft,ve,0,0,ae),ue=ft}}const Ut=ue&&pe;let It=Ut?m:U?"butt":b;if(Ut&&It==="round"&&(ot<A?It="miter":ot<=2&&(It="fakeround")),It==="miter"&&ot>C&&(It="bevel"),It==="bevel"&&(ot>2&&(It="flipbevel"),ot<C&&(It="miter")),ue&&this.updateDistance(ue,ce),It==="miter")Ce._mult(ot),this.addCurrentVertex(ce,Ce,0,0,ae);else if(It==="flipbevel"){if(ot>100)Ce=ze.mult(-1);else{const bt=ot*ve.add(ze).mag()/ve.sub(ze).mag();Ce._perp()._mult(bt*(Et?-1:1))}this.addCurrentVertex(ce,Ce,0,0,ae),this.addCurrentVertex(ce,Ce.mult(-1),0,0,ae)}else if(It==="bevel"||It==="fakeround"){const bt=-Math.sqrt(ot*ot-1),ft=Et?bt:0,ei=Et?0:bt;if(ue&&this.addCurrentVertex(ce,ve,ft,ei,ae),It==="fakeround"){const Kt=Math.round(180*wt/Math.PI/20);for(let ni=1;ni<Kt;ni++){let Yt=ni/Kt;if(Yt!==.5){const mn=Yt-.5;Yt+=Yt*mn*(Yt-1)*((1.0904+Be*(Be*(3.55645-1.43519*Be)-3.2452))*mn*mn+(.848013+Be*(.215638*Be-1.06021)))}const pi=ze.sub(ve)._mult(Yt)._add(ve)._unit()._mult(Et?-1:1);this.addHalfVertex(ce,pi.x,pi.y,!1,Et,0,ae)}}pe&&this.addCurrentVertex(ce,ze,-ft,-ei,ae)}else if(It==="butt")this.addCurrentVertex(ce,Ce,0,0,ae);else if(It==="square"){const bt=ue?1:-1;this.addCurrentVertex(ce,Ce,bt,bt,ae)}else It==="round"&&(ue&&(this.addCurrentVertex(ce,ve,0,0,ae),this.addCurrentVertex(ce,ve,1,1,ae,!0)),pe&&(this.addCurrentVertex(ce,ze,-1,-1,ae,!0),this.addCurrentVertex(ce,ze,0,0,ae)));if(xt&&Se<Y-1){const bt=ce.dist(pe);if(bt>2*ne){const ft=ce.add(pe.sub(ce)._mult(ne/bt)._round());this.updateDistance(ce,ft),this.addCurrentVertex(ft,ze,0,0,ae),ce=ft}}}}addCurrentVertex(l,h,m,b,C,A=!1){const D=h.y*b-h.x,B=-h.y-h.x*b;this.addHalfVertex(l,h.x+h.y*m,h.y-h.x*m,A,!1,m,C),this.addHalfVertex(l,D,B,A,!0,-b,C),this.distance>k2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,h,m,b,C,A))}addHalfVertex({x:l,y:h},m,b,C,A,D,B){const U=.5*(this.lineClips?this.scaledDistance*(k2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(C?1:0),(h<<1)+(A?1:0),Math.round(63*m)+128,Math.round(63*b)+128,1+(D===0?0:D<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Y=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Y,this.e2),B.primitiveLength++),A?this.e2=Y:this.e1=Y}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,h){this.distance+=l.dist(h),this.updateScaledDistance()}hasLineDasharray(l){for(const h of l){const m=h.paint.get("line-dasharray");if(m&&!m.isConstant())return!0}return!1}addLineDashDependencies(l,h,m,b){for(const C of l){const A=C.paint.get("line-dasharray");if(!A||A.value.kind==="constant")continue;const D=C.layout.get("line-cap")==="round",B={dasharray:A.value.evaluate({zoom:m-1},h,{}),round:D},U={dasharray:A.value.evaluate({zoom:m},h,{}),round:D},Y={dasharray:A.value.evaluate({zoom:m+1},h,{}),round:D},Q=`${B.dasharray.join(",")},${B.round}`,ne=`${U.dasharray.join(",")},${U.round}`,ae=`${Y.dasharray.join(",")},${Y.round}`;b.dashDependencies[Q]=B,b.dashDependencies[ne]=U,b.dashDependencies[ae]=Y,h.dashes[C.id]={min:Q,mid:ne,max:ae}}}}let C2,A2;ti("LineBucket",fy,{omit:["layers","patternFeatures"]});var T2={get paint(){return A2=A2||new as({"line-opacity":new Ci(rt.paint_line["line-opacity"]),"line-color":new Ci(rt.paint_line["line-color"]),"line-translate":new hi(rt.paint_line["line-translate"]),"line-translate-anchor":new hi(rt.paint_line["line-translate-anchor"]),"line-width":new Ci(rt.paint_line["line-width"]),"line-gap-width":new Ci(rt.paint_line["line-gap-width"]),"line-offset":new Ci(rt.paint_line["line-offset"]),"line-blur":new Ci(rt.paint_line["line-blur"]),"line-dasharray":new su(rt.paint_line["line-dasharray"]),"line-pattern":new su(rt.paint_line["line-pattern"]),"line-gradient":new Vd(rt.paint_line["line-gradient"])})},get layout(){return C2=C2||new as({"line-cap":new hi(rt.layout_line["line-cap"]),"line-join":new Ci(rt.layout_line["line-join"]),"line-miter-limit":new hi(rt.layout_line["line-miter-limit"]),"line-round-limit":new hi(rt.layout_line["line-round-limit"]),"line-sort-key":new Ci(rt.layout_line["line-sort-key"])})}};class QL extends Ci{possiblyEvaluate(l,h){return h=new Wn(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(l,h)}evaluate(l,h,m,b){return h=Zt({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(l,h,m,b)}}let f0;class JL extends Zs{constructor(l,h){super(l,T2,h),this.gradientVersion=0,f0||(f0=new QL(T2.paint.properties["line-width"].specification),f0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!(function(m){return m._styleExpression!==void 0})(h)&&h._styleExpression.expression instanceof _t,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,h){super.recalculate(l,h),this.paint._values["line-floorwidth"]=f0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new fy(l)}queryRadius(l){const h=l,m=E2(Kd("line-width",this,h),Kd("line-gap-width",this,h)),b=Kd("line-offset",this,h);return m/2+Math.abs(b)+o0(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:m,geometry:b,transform:C,pixelsToTileUnits:A}){const D=l0(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-C.bearingInRadians,A),B=A/2*E2(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),U=this.paint.get("line-offset").evaluate(h,m);return U&&(b=(function(Y,Q){const ne=[];for(let ae=0;ae<Y.length;ae++){const ce=oL(Y[ae]),ue=[];for(let pe=0;pe<ce.length;pe++){const ve=ce[pe],ze=ce[pe-1],Se=ce[pe+1],Ce=pe===0?new d(0,0):ve.sub(ze)._unit()._perp(),Be=pe===ce.length-1?new d(0,0):Se.sub(ve)._unit()._perp(),Ue=Ce._add(Be)._unit(),ot=Ue.x*Be.x+Ue.y*Be.y;ot!==0&&Ue._mult(1/ot),ue.push(Ue._mult(Q)._add(ve))}ne.push(ue)}return ne})(b,U*A)),(function(Y,Q,ne){for(let ae=0;ae<Q.length;ae++){const ce=Q[ae];if(Y.length>=3){for(let ue=0;ue<ce.length;ue++)if(Zd(Y,ce[ue]))return!0}if(aL(Y,ce,ne))return!0}return!1})(D,b,B)}isTileClipped(){return!0}}function E2(u,l){return l>0?l+2*u:u}const eD=Ba([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),tD=Ba([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ba([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const iD=Ba([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ba([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const M2=Ba([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),nD=Ba([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function aD(u,l,h){return u.sections.forEach((m=>{m.text=(function(b,C,A){const D=C.layout.get("text-transform").evaluate(A,{});return D==="uppercase"?b=b.toLocaleUpperCase():D==="lowercase"&&(b=b.toLocaleLowerCase()),Rl.applyArabicShaping&&(b=Rl.applyArabicShaping(b)),b})(m.text,l,h)})),u}Ba([{name:"triangle",components:3,type:"Uint16"}]),Ba([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ba([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ba([{type:"Float32",name:"offsetX"}]),Ba([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ba([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Cr=24;const $p={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},rD={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},sD={40:!0};function I2(u,l,h,m,b,C){if("fontStack"in l){const A=h[l.fontStack],D=A&&A[u];return D?D.metrics.advance*l.scale+b:0}{const A=m[l.imageName];return A?A.displaySize[0]*l.scale*Cr/C+b:0}}function P2(u,l,h,m){const b=Math.pow(u-l,2);return m?u<l?b/2:2*b:b+Math.abs(h)*h}function oD(u,l,h){let m=0;return u===10&&(m-=1e4),h&&(m+=150),u!==40&&u!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function L2(u,l,h,m,b,C){let A=null,D=P2(l,h,b,C);for(const B of m){const U=P2(l-B.x,h,b,C)+B.badness;U<=D&&(A=B,D=U)}return{index:u,x:l,priorBreak:A,badness:D}}function D2(u){return u?D2(u.priorBreak).concat(u.index):[]}class tf{constructor(l="",h=[],m=[]){this.text=l,this.sections=h,this.sectionIndex=m,this.imageSectionID=null}static fromFeature(l,h){const m=new tf;for(let b=0;b<l.sections.length;b++){const C=l.sections[b];C.image?m.addImageSection(C):m.addTextSection(C,h)}return m}length(){return[...this.text].length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}verticalizePunctuation(){this.text=(function(l){let h="",m={premature:!0,value:void 0};const b=l[Symbol.iterator]();let C=b.next();const A=l[Symbol.iterator]();A.next();let D=A.next();for(;!C.done;)h+=!D.done&&wp(D.value.codePointAt(0))&&!$p[D.value]||!m.premature&&wp(m.value.codePointAt(0))&&!$p[m.value]||!$p[C.value]?C.value:$p[C.value],m={value:C.value,premature:!1},C=b.next(),D=A.next();return h})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const l=this.text.match(/^\s*/),h=l?l[0].length:0,m=this.text.match(/\S\s*$/),b=m?m[0].length-1:0;this.text=this.text.substring(h,this.text.length-b),this.sectionIndex=this.sectionIndex.slice(h,this.sectionIndex.length-b)}substring(l,h){const m=[...this.text].slice(l,h).join(""),b=this.sectionIndex.slice(l,h);return new tf(m,this.sections,b)}toCodeUnitIndex(l){return[...this.text].slice(0,l).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,h)=>Math.max(l,this.sections[h].scale)),0)}getMaxImageSize(l){let h=0,m=0;for(let b=0;b<this.length();b++){const C=this.getSection(b);if("imageName"in C){const A=l[C.imageName];if(!A)continue;const D=A.displaySize;h=Math.max(h,D[0]),m=Math.max(m,D[1])}}return{maxImageWidth:h,maxImageHeight:m}}addTextSection(l,h){this.text+=l.text,this.sections.push({scale:l.scale||1,verticalAlign:l.verticalAlign||"bottom",fontStack:l.fontStack||h});const m=this.sections.length-1;this.sectionIndex.push(...[...l.text].map((()=>m)))}addImageSection(l){const h=l.image?l.image.name:"";if(h.length===0)return void Ti("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push({scale:1,verticalAlign:l.verticalAlign||"bottom",imageName:h}),this.sectionIndex.push(this.sections.length-1)):Ti("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(l,h,m,b,C){const A=[],D=this.determineAverageLineWidth(l,h,m,b,C),B=this.hasZeroWidthSpaces();let U=0,Y=0;const Q=this.text[Symbol.iterator]();let ne=Q.next();const ae=this.text[Symbol.iterator]();ae.next();let ce=ae.next();const ue=this.text[Symbol.iterator]();ue.next(),ue.next();let pe=ue.next();for(;!ne.done;){const ve=this.getSection(Y),ze=ne.value.codePointAt(0);if(qm(ze)||(U+=I2(ze,ve,m,b,l,C)),!ce.done){const Se=nu(ze),Ce=ce.value.codePointAt(0);(rD[ze]||Se||"imageName"in ve||!pe.done&&sD[Ce])&&A.push(L2(Y+1,U,D,A,oD(ze,Ce,Se&&B),!1))}Y++,ne=Q.next(),ce=ae.next(),pe=ue.next()}return D2(L2(this.length(),U,D,A,0,!0))}determineAverageLineWidth(l,h,m,b,C){let A=0,D=0;for(const B of this.text){const U=this.getSection(D);A+=I2(B.codePointAt(0),U,m,b,l,C),D++}return A/Math.max(1,Math.ceil(A/h))}}const py=4294967296,R2=1/py,O2=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class p0{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,h,m=this.length){for(;this.pos<m;){const b=this.readVarint(),C=b>>3,A=this.pos;this.type=7&b,l(C,h,this),this.pos===A&&this.skip(b)}return h}readMessage(l,h){return this.readFields(l,h,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*py;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*py;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const h=this.buf;let m,b;return b=h[this.pos++],m=127&b,b<128?m:(b=h[this.pos++],m|=(127&b)<<7,b<128?m:(b=h[this.pos++],m|=(127&b)<<14,b<128?m:(b=h[this.pos++],m|=(127&b)<<21,b<128?m:(b=h[this.pos],m|=(15&b)<<28,(function(C,A,D){const B=D.buf;let U,Y;if(Y=B[D.pos++],U=(112&Y)>>4,Y<128||(Y=B[D.pos++],U|=(127&Y)<<3,Y<128)||(Y=B[D.pos++],U|=(127&Y)<<10,Y<128)||(Y=B[D.pos++],U|=(127&Y)<<17,Y<128)||(Y=B[D.pos++],U|=(127&Y)<<24,Y<128)||(Y=B[D.pos++],U|=(1&Y)<<31,Y<128))return nf(C,U,A);throw new Error("Expected varint not more than 10 bytes")})(m,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,h=this.pos;return this.pos=l,l-h>=12&&O2?O2.decode(this.buf.subarray(h,l)):(function(m,b,C){let A="",D=b;for(;D<C;){const B=m[D];let U,Y,Q,ne=null,ae=B>239?4:B>223?3:B>191?2:1;if(D+ae>C)break;ae===1?B<128&&(ne=B):ae===2?(U=m[D+1],(192&U)==128&&(ne=(31&B)<<6|63&U,ne<=127&&(ne=null))):ae===3?(U=m[D+1],Y=m[D+2],(192&U)==128&&(192&Y)==128&&(ne=(15&B)<<12|(63&U)<<6|63&Y,(ne<=2047||ne>=55296&&ne<=57343)&&(ne=null))):ae===4&&(U=m[D+1],Y=m[D+2],Q=m[D+3],(192&U)==128&&(192&Y)==128&&(192&Q)==128&&(ne=(15&B)<<18|(63&U)<<12|(63&Y)<<6|63&Q,(ne<=65535||ne>=1114112)&&(ne=null))),ne===null?(ne=65533,ae=1):ne>65535&&(ne-=65536,A+=String.fromCharCode(ne>>>10&1023|55296),ne=56320|1023&ne),A+=String.fromCharCode(ne),D+=ae}return A})(this.buf,h,l)}readBytes(){const l=this.readVarint()+this.pos,h=this.buf.subarray(this.pos,l);return this.pos=l,h}readPackedVarint(l=[],h){const m=this.readPackedEnd();for(;this.pos<m;)l.push(this.readVarint(h));return l}readPackedSVarint(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const h=7&l;if(h===0)for(;this.buf[this.pos++]>127;);else if(h===2)this.pos=this.readVarint()+this.pos;else if(h===5)this.pos+=4;else{if(h!==1)throw new Error(`Unimplemented type: ${h}`);this.pos+=8}}writeTag(l,h){this.writeVarint(l<<3|h)}realloc(l){let h=this.length||16;for(;h<this.pos+l;)h*=2;if(h!==this.length){const m=new Uint8Array(h);m.set(this.buf),this.buf=m,this.dataView=new DataView(m.buffer),this.length=h}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*R2),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*R2),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(h,m){let b,C;if(h>=0?(b=h%4294967296|0,C=h/4294967296|0):(b=~(-h%4294967296),C=~(-h/4294967296),4294967295^b?b=b+1|0:(b=0,C=C+1|0)),h>=18446744073709552e3||h<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),(function(A,D,B){B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,B.buf[B.pos]=127&(A>>>=7)})(b,0,m),(function(A,D){const B=(7&A)<<4;D.buf[D.pos++]|=B|((A>>>=3)?128:0),A&&(D.buf[D.pos++]=127&A|((A>>>=7)?128:0),A&&(D.buf[D.pos++]=127&A|((A>>>=7)?128:0),A&&(D.buf[D.pos++]=127&A|((A>>>=7)?128:0),A&&(D.buf[D.pos++]=127&A|((A>>>=7)?128:0),A&&(D.buf[D.pos++]=127&A)))))})(C,m)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const h=this.pos;this.pos=(function(b,C,A){for(let D,B,U=0;U<C.length;U++){if(D=C.charCodeAt(U),D>55295&&D<57344){if(!B){D>56319||U+1===C.length?(b[A++]=239,b[A++]=191,b[A++]=189):B=D;continue}if(D<56320){b[A++]=239,b[A++]=191,b[A++]=189,B=D;continue}D=B-55296<<10|D-56320|65536,B=null}else B&&(b[A++]=239,b[A++]=191,b[A++]=189,B=null);D<128?b[A++]=D:(D<2048?b[A++]=D>>6|192:(D<65536?b[A++]=D>>12|224:(b[A++]=D>>18|240,b[A++]=D>>12&63|128),b[A++]=D>>6&63|128),b[A++]=63&D|128)}return A})(this.buf,l,this.pos);const m=this.pos-h;m>=128&&z2(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const h=l.length;this.writeVarint(h),this.realloc(h);for(let m=0;m<h;m++)this.buf[this.pos++]=l[m]}writeRawMessage(l,h){this.pos++;const m=this.pos;l(h,this);const b=this.pos-m;b>=128&&z2(m,b,this),this.pos=m-1,this.writeVarint(b),this.pos+=b}writeMessage(l,h,m){this.writeTag(l,2),this.writeRawMessage(h,m)}writePackedVarint(l,h){h.length&&this.writeMessage(l,lD,h)}writePackedSVarint(l,h){h.length&&this.writeMessage(l,cD,h)}writePackedBoolean(l,h){h.length&&this.writeMessage(l,dD,h)}writePackedFloat(l,h){h.length&&this.writeMessage(l,hD,h)}writePackedDouble(l,h){h.length&&this.writeMessage(l,uD,h)}writePackedFixed32(l,h){h.length&&this.writeMessage(l,fD,h)}writePackedSFixed32(l,h){h.length&&this.writeMessage(l,pD,h)}writePackedFixed64(l,h){h.length&&this.writeMessage(l,gD,h)}writePackedSFixed64(l,h){h.length&&this.writeMessage(l,mD,h)}writeBytesField(l,h){this.writeTag(l,2),this.writeBytes(h)}writeFixed32Field(l,h){this.writeTag(l,5),this.writeFixed32(h)}writeSFixed32Field(l,h){this.writeTag(l,5),this.writeSFixed32(h)}writeFixed64Field(l,h){this.writeTag(l,1),this.writeFixed64(h)}writeSFixed64Field(l,h){this.writeTag(l,1),this.writeSFixed64(h)}writeVarintField(l,h){this.writeTag(l,0),this.writeVarint(h)}writeSVarintField(l,h){this.writeTag(l,0),this.writeSVarint(h)}writeStringField(l,h){this.writeTag(l,2),this.writeString(h)}writeFloatField(l,h){this.writeTag(l,5),this.writeFloat(h)}writeDoubleField(l,h){this.writeTag(l,1),this.writeDouble(h)}writeBooleanField(l,h){this.writeVarintField(l,+h)}}function nf(u,l,h){return h?4294967296*l+(u>>>0):4294967296*(l>>>0)+(u>>>0)}function z2(u,l,h){const m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));h.realloc(m);for(let b=h.pos-1;b>=u;b--)h.buf[b+m]=h.buf[b]}function lD(u,l){for(let h=0;h<u.length;h++)l.writeVarint(u[h])}function cD(u,l){for(let h=0;h<u.length;h++)l.writeSVarint(u[h])}function hD(u,l){for(let h=0;h<u.length;h++)l.writeFloat(u[h])}function uD(u,l){for(let h=0;h<u.length;h++)l.writeDouble(u[h])}function dD(u,l){for(let h=0;h<u.length;h++)l.writeBoolean(u[h])}function fD(u,l){for(let h=0;h<u.length;h++)l.writeFixed32(u[h])}function pD(u,l){for(let h=0;h<u.length;h++)l.writeSFixed32(u[h])}function gD(u,l){for(let h=0;h<u.length;h++)l.writeFixed64(u[h])}function mD(u,l){for(let h=0;h<u.length;h++)l.writeSFixed64(u[h])}function _D(u,l,h){u===1&&h.readMessage(xD,l)}function xD(u,l,h){if(u===3){const{id:m,bitmap:b,width:C,height:A,left:D,top:B,advance:U}=h.readMessage(yD,{});l.push({id:m,bitmap:new zp({width:C+6,height:A+6},b),metrics:{width:C,height:A,left:D,top:B,advance:U}})}}function yD(u,l,h){u===1?l.id=h.readVarint():u===2?l.bitmap=h.readBytes():u===3?l.width=h.readVarint():u===4?l.height=h.readVarint():u===5?l.left=h.readSVarint():u===6?l.top=h.readSVarint():u===7&&(l.advance=h.readVarint())}function F2(u){let l=0,h=0;for(const A of u)l+=A.w*A.h,h=Math.max(h,A.w);u.sort(((A,D)=>D.h-A.h));const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),h),h:1/0}];let b=0,C=0;for(const A of u)for(let D=m.length-1;D>=0;D--){const B=m[D];if(!(A.w>B.w||A.h>B.h)){if(A.x=B.x,A.y=B.y,C=Math.max(C,A.y+A.h),b=Math.max(b,A.x+A.w),A.w===B.w&&A.h===B.h){const U=m.pop();U&&D<m.length&&(m[D]=U)}else A.h===B.h?(B.x+=A.w,B.w-=A.w):A.w===B.w?(B.y+=A.h,B.h-=A.h):(m.push({x:B.x+A.w,y:B.y,w:B.w-A.w,h:A.h}),B.y+=A.h,B.h-=A.h);break}}return{w:b,h:C,fill:l/(b*C)||0}}class gy{constructor(l,{pixelRatio:h,version:m,stretchX:b,stretchY:C,content:A,textFitWidth:D,textFitHeight:B}){this.paddedRect=l,this.pixelRatio=h,this.stretchX=b,this.stretchY=C,this.content=A,this.version=m,this.textFitWidth=D,this.textFitHeight=B}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class B2{constructor(l,h){const m={},b={};this.haveRenderCallbacks=[];const C=[];this.addImages(l,m,C),this.addImages(h,b,C);const{w:A,h:D}=F2(C),B=new Ls({width:A||1,height:D||1});for(const U in l){const Y=l[U],Q=m[U].paddedRect;Ls.copy(Y.data,B,{x:0,y:0},{x:Q.x+1,y:Q.y+1},Y.data)}for(const U in h){const Y=h[U],Q=b[U].paddedRect,ne=Q.x+1,ae=Q.y+1,ce=Y.data.width,ue=Y.data.height;Ls.copy(Y.data,B,{x:0,y:0},{x:ne,y:ae},Y.data),Ls.copy(Y.data,B,{x:0,y:ue-1},{x:ne,y:ae-1},{width:ce,height:1}),Ls.copy(Y.data,B,{x:0,y:0},{x:ne,y:ae+ue},{width:ce,height:1}),Ls.copy(Y.data,B,{x:ce-1,y:0},{x:ne-1,y:ae},{width:1,height:ue}),Ls.copy(Y.data,B,{x:0,y:0},{x:ne+ce,y:ae},{width:1,height:ue})}this.image=B,this.iconPositions=m,this.patternPositions=b}addImages(l,h,m){for(const b in l){const C=l[b],A={x:0,y:0,w:C.data.width+2,h:C.data.height+2};m.push(A),h[b]=new gy(A,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(l,h){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),h)}patchUpdatedImage(l,h,m){if(!l||!h||l.version===h.version)return;l.version=h.version;const[b,C]=l.tl;m.update(h.data,void 0,{x:b,y:C})}}var Qc;function g0(u,l,h,m,b,C,A,D,B,U,Y,Q,ne,ae,ce){const ue=tf.fromFeature(u,b);let pe;Q===o.az.vertical&&ue.verticalizePunctuation();let ve=ue.determineLineBreaks(U,C,l,m,ae);const{processBidirectionalText:ze,processStyledBidirectionalText:Se}=Rl;if(ze&&ue.sections.length===1){pe=[],ve=ve.map((ot=>ue.toCodeUnitIndex(ot)));const Ue=ze(ue.toString(),ve);for(const ot of Ue){const wt=[...ot].map((()=>0));pe.push(new tf(ot,ue.sections,wt))}}else if(Se){pe=[],ve=ve.map((xt=>ue.toCodeUnitIndex(xt)));let Ue=0;const ot=[];for(const xt of ue.text)ot.push(...Array(xt.length).fill(ue.sectionIndex[Ue])),Ue++;const wt=Se(ue.text,ot,ve);for(const xt of wt){const Et=[];let Ut="";for(const It of xt[0])Et.push(xt[1][Ut.length]),Ut+=It;pe.push(new tf(xt[0],ue.sections,Et))}}else pe=(function(Ue,ot){const wt=[];let xt=0;for(const Et of ot)wt.push(Ue.substring(xt,Et)),xt=Et;return xt<Ue.length()&&wt.push(Ue.substring(xt,Ue.length())),wt})(ue,ve);const Ce=[],Be={positionedLines:Ce,text:ue.toString(),top:Y[1],bottom:Y[1],left:Y[0],right:Y[0],writingMode:Q,iconsInText:!1,verticalizable:!1};return(function(Ue,ot,wt,xt,Et,Ut,It,bt,ft,ei,Kt,ni){let Yt=0,pi=0,mn=0,Ji=0;const ma=bt==="right"?1:bt==="left"?0:.5,qr=Cr/ni;let tr=0;for(const Mn of Et){Mn.trim();const Ia=Mn.getMaxScale(),ja={positionedGlyphs:[],lineOffset:0};Ue.positionedLines[tr]=ja;const ra=ja.positionedGlyphs;let Ds=0;if(!Mn.length()){pi+=Ut,++tr;continue}const Zr=vD(xt,Mn,qr);let Rs=0;for(const Er of Mn.text){const ka=Mn.getSection(Rs),ir=Er.codePointAt(0),Pa=bD(ft,Kt,ir),Mr={glyph:ir,imageName:null,x:Yt,y:pi+-17,vertical:Pa,scale:1,fontStack:"",sectionIndex:Mn.getSectionIndex(Rs),metrics:null,rect:null};let pc;if("fontStack"in ka){if(pc=wD(ka,ir,Pa,Zr,ot,wt),!pc)continue;Mr.fontStack=ka.fontStack}else{if(Ue.iconsInText=!0,ka.scale*=qr,pc=SD(ka,Pa,Ia,Zr,xt),!pc)continue;Ds=Math.max(Ds,pc.imageOffset),Mr.imageName=ka.imageName}const{rect:dl,metrics:Jp,baselineOffset:nh}=pc;Mr.y+=nh,Mr.scale=ka.scale,Mr.metrics=Jp,Mr.rect=dl,ra.push(Mr),Pa?(Ue.verticalizable=!0,Yt+=("imageName"in ka?Jp.advance:Cr)*ka.scale+ei):Yt+=Jp.advance*ka.scale+ei,Rs++}ra.length!==0&&(mn=Math.max(Yt-ei,mn),kD(ra,0,ra.length-1,ma)),Yt=0,ja.lineOffset=Math.max(Ds,(Ia-1)*Cr);const Go=Ut*Ia+Ds;pi+=Go,Ji=Math.max(Go,Ji),++tr}const{horizontalAlign:_a,verticalAlign:ha}=my(It);(function(Mn,Ia,ja,ra,Ds,Zr,Rs,Go,Er){const ka=(Ia-ja)*Ds;let ir=0;ir=Zr!==Rs?-Go*ra- -17:-ra*Er*Rs+.5*Rs;for(const Pa of Mn)for(const Mr of Pa.positionedGlyphs)Mr.x+=ka,Mr.y+=ir})(Ue.positionedLines,ma,_a,ha,mn,Ji,Ut,pi,Et.length),Ue.top+=-ha*pi,Ue.bottom=Ue.top+pi,Ue.left+=-_a*mn,Ue.right=Ue.left+mn})(Be,l,h,m,pe,A,D,B,Q,U,ne,ce),!(function(Ue){for(const ot of Ue)if(ot.positionedGlyphs.length!==0)return!1;return!0})(Ce)&&Be}function my(u){let l=.5,h=.5;switch(u){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:l,verticalAlign:h}}function vD(u,l,h){const m=l.getMaxScale()*Cr,{maxImageWidth:b,maxImageHeight:C}=l.getMaxImageSize(u),A=Math.max(m,C*h);return{verticalLineContentWidth:Math.max(m,b*h),horizontalLineContentHeight:A}}function N2(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function bD(u,l,h){return!(u===o.az.horizontal||!l&&!bp(h)||l&&(qm(h)||(m=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(m)))));var m}function wD(u,l,h,m,b,C){const A=C[u.fontStack],D=(function(U,Y,Q,ne){if(U&&U.rect)return U;const ae=Y[Q.fontStack],ce=ae&&ae[ne];return ce?{rect:null,metrics:ce.metrics}:null})(A&&A[l],b,u,l);if(D===null)return null;let B;if(h)B=m.verticalLineContentWidth-u.scale*Cr;else{const U=N2(u.verticalAlign);B=(m.horizontalLineContentHeight-u.scale*Cr)*U}return{rect:D.rect,metrics:D.metrics,baselineOffset:B}}function SD(u,l,h,m,b){const C=b[u.imageName];if(!C)return null;const A=C.paddedRect,D=C.displaySize,B={width:D[0],height:D[1],left:1,top:-3,advance:l?D[1]:D[0]};let U;if(l)U=m.verticalLineContentWidth-D[1]*u.scale;else{const Y=N2(u.verticalAlign);U=(m.horizontalLineContentHeight-D[1]*u.scale)*Y}return{rect:A,metrics:B,baselineOffset:U,imageOffset:(l?D[0]:D[1])*u.scale-Cr*h}}function kD(u,l,h,m){if(m===0)return;const b=u[h],C=(u[h].x+b.metrics.advance*b.scale)*m;for(let A=l;A<=h;A++)u[A].x-=C}function CD(u,l,h){const{horizontalAlign:m,verticalAlign:b}=my(h),C=l[0]-u.displaySize[0]*m,A=l[1]-u.displaySize[1]*b;return{image:u,top:A,bottom:A+u.displaySize[1],left:C,right:C+u.displaySize[0]}}function j2(u){var l,h;let m=u.left,b=u.top,C=u.right-m,A=u.bottom-b;const D=(l=u.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",B=(h=u.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",U=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(B==="proportional"){if(D==="stretchOnly"&&C/A<U||D==="proportional"){const Y=Math.ceil(A*U);m*=Y/C,C=Y}}else if(D==="proportional"&&B==="stretchOnly"&&U!==0&&C/A>U){const Y=Math.ceil(C/U);b*=Y/A,A=Y}return{x1:m,y1:b,x2:m+C,y2:b+A}}function V2(u,l,h,m,b,C){const A=u.image;let D;if(A.content){const pe=A.content,ve=A.pixelRatio||1;D=[pe[0]/ve,pe[1]/ve,A.displaySize[0]-pe[2]/ve,A.displaySize[1]-pe[3]/ve]}const B=l.left*C,U=l.right*C;let Y,Q,ne,ae;h==="width"||h==="both"?(ae=b[0]+B-m[3],Q=b[0]+U+m[1]):(ae=b[0]+(B+U-A.displaySize[0])/2,Q=ae+A.displaySize[0]);const ce=l.top*C,ue=l.bottom*C;return h==="height"||h==="both"?(Y=b[1]+ce-m[0],ne=b[1]+ue+m[2]):(Y=b[1]+(ce+ue-A.displaySize[1])/2,ne=Y+A.displaySize[1]),{image:A,top:Y,right:Q,bottom:ne,left:ae,collisionPadding:D}}ti("ImagePosition",gy),ti("ImageAtlas",B2),o.az=void 0,(Qc=o.az||(o.az={}))[Qc.none=0]="none",Qc[Qc.horizontal=1]="horizontal",Qc[Qc.vertical=2]="vertical",Qc[Qc.horizontalOnly=3]="horizontalOnly";const dc=128,Jc=32640;function H2(u,l){const{expression:h}=l;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Wn(u+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:b}=h;let C=0;for(;C<m.length&&m[C]<=u;)C++;C=Math.max(0,C-1);let A=C;for(;A<m.length&&m[A]<u+1;)A++;A=Math.min(m.length-1,A);const D=m[C],B=m[A];return h.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:B,interpolationType:b}:{kind:"camera",minZoom:D,maxZoom:B,minSize:h.evaluate(new Wn(D)),maxSize:h.evaluate(new Wn(B)),interpolationType:b}}}function _y(u,l,h){let m="never";const b=u.get(l);return b?m=b:u.get(h)&&(m="always"),m}const AD=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function m0(u,l,h,m,b,C,A,D,B,U,Y,Q,ne){const ae=D?Math.min(Jc,Math.round(D[0])):0,ce=D?Math.min(Jc,Math.round(D[1])):0;u.emplaceBack(l,h,Math.round(32*m),Math.round(32*b),C,A,(ae<<1)+(B?1:0),ce,16*U,16*Y,256*Q,256*ne)}function xy(u,l,h){u.emplaceBack(l.x,l.y,h),u.emplaceBack(l.x,l.y,h),u.emplaceBack(l.x,l.y,h),u.emplaceBack(l.x,l.y,h)}function TD(u){for(const l of u.sections)if(Qm(l.text))return!0;return!1}class yy{constructor(l){this.layoutVertexArray=new Ne,this.indexArray=new dt,this.programConfigurations=l,this.segments=new $t,this.dynamicLayoutVertexArray=new Ke,this.opacityVertexArray=new gt,this.hasVisibleVertices=!1,this.placedSymbolArray=new z}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,h,m,b){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,eD.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,tD.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,AD,!0),this.opacityVertexBuffer.itemSize=1),(m||b)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ti("SymbolBuffers",yy);class vy{constructor(l,h,m){this.layoutVertexArray=new l,this.layoutAttributes=h,this.indexArray=new m,this.segments=new $t,this.collisionVertexArray=new ht}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,iD.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ti("CollisionBuffers",vy);class af{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=H2(this.zoom,h["text-size"]),this.iconSizeData=H2(this.zoom,h["icon-size"]);const m=this.layers[0].layout,b=m.get("symbol-sort-key"),C=m.get("symbol-z-order");this.canOverlap=_y(m,"text-overlap","text-allow-overlap")!=="never"||_y(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map((A=>o.az[A]))),this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id)),this.sourceID=l.sourceID}createArrays(){this.text=new yy(new uc(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new yy(new uc(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new Z,this.lineVertexArray=new J,this.symbolInstances=new W,this.textAnchorOffsets=new re}calculateGlyphDependencies(l,h,m,b,C){for(const A of l)if(h[A.codePointAt(0)]=!0,(m||b)&&C){const D=$p[A];D&&(h[D.codePointAt(0)]=!0)}}populate(l,h,m){const b=this.layers[0],C=b.layout,A=C.get("text-font"),D=C.get("text-field"),B=C.get("icon-image"),U=(D.value.kind!=="constant"||D.value.value instanceof kn&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),Y=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,Q=C.get("symbol-sort-key");if(this.features=[],!U&&!Y)return;const ne=h.iconDependencies,ae=h.glyphDependencies,ce=h.availableImages,ue=new Wn(this.zoom);for(const{feature:pe,id:ve,index:ze,sourceLayerIndex:Se}of l){const Ce=b._featureFilter.needGeometry,Be=Bl(pe,Ce);if(!b._featureFilter.filter(ue,Be,m))continue;let Ue,ot;if(Ce||(Be.geometry=Fl(pe)),U){const xt=b.getValueAndResolveTokens("text-field",Be,m,ce),Et=kn.factory(xt),Ut=this.hasRTLText=this.hasRTLText||TD(Et);(!Ut||Rl.getRTLTextPluginStatus()==="unavailable"||Ut&&Rl.isParsed())&&(Ue=aD(Et,b,Be))}if(Y){const xt=b.getValueAndResolveTokens("icon-image",Be,m,ce);ot=xt instanceof ts?xt:ts.fromString(xt)}if(!Ue&&!ot)continue;const wt=this.sortFeaturesByKey?Q.evaluate(Be,{},m):void 0;if(this.features.push({id:ve,text:Ue,icon:ot,index:ze,sourceLayerIndex:Se,geometry:Be.geometry,properties:pe.properties,type:Up.types[pe.type],sortKey:wt}),ot&&(ne[ot.name]=!0),Ue){const xt=A.evaluate(Be,{},m).join(","),Et=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.az.vertical)>=0;for(const Ut of Ue.sections)if(Ut.image)ne[Ut.image.name]=!0;else{const It=Zc(Ue.toString()),bt=Ut.fontStack||xt,ft=ae[bt]=ae[bt]||{};this.calculateGlyphDependencies(Ut.text,ft,Et,this.allowVerticalPlacement,It)}}}C.get("symbol-placement")==="line"&&(this.features=(function(pe){const ve={},ze={},Se=[];let Ce=0;function Be(xt){Se.push(pe[xt]),Ce++}function Ue(xt,Et,Ut){const It=ze[xt];return delete ze[xt],ze[Et]=It,Se[It].geometry[0].pop(),Se[It].geometry[0]=Se[It].geometry[0].concat(Ut[0]),It}function ot(xt,Et,Ut){const It=ve[Et];return delete ve[Et],ve[xt]=It,Se[It].geometry[0].shift(),Se[It].geometry[0]=Ut[0].concat(Se[It].geometry[0]),It}function wt(xt,Et,Ut){const It=Ut?Et[0][Et[0].length-1]:Et[0][0];return`${xt}:${It.x}:${It.y}`}for(let xt=0;xt<pe.length;xt++){const Et=pe[xt],Ut=Et.geometry,It=Et.text?Et.text.toString():null;if(!It){Be(xt);continue}const bt=wt(It,Ut),ft=wt(It,Ut,!0);if(bt in ze&&ft in ve&&ze[bt]!==ve[ft]){const ei=ot(bt,ft,Ut),Kt=Ue(bt,ft,Se[ei].geometry);delete ve[bt],delete ze[ft],ze[wt(It,Se[Kt].geometry,!0)]=Kt,Se[ei].geometry=null}else bt in ze?Ue(bt,ft,Ut):ft in ve?ot(bt,ft,Ut):(Be(xt),ve[bt]=Ce-1,ze[ft]=Ce-1)}return Se.filter((xt=>xt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((pe,ve)=>pe.sortKey-ve.sortKey))}update(l,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,h,this.layers,{imagePositions:m}),this.icon.programConfigurations.updatePaintArrays(l,h,this.layers,{imagePositions:m}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,h){const m=this.lineVertexArray.length;if(l.segment!==void 0){let b=l.dist(h[l.segment+1]),C=l.dist(h[l.segment]);const A={};for(let D=l.segment+1;D<h.length;D++)A[D]={x:h[D].x,y:h[D].y,tileUnitDistanceFromAnchor:b},D<h.length-1&&(b+=h[D+1].dist(h[D]));for(let D=l.segment||0;D>=0;D--)A[D]={x:h[D].x,y:h[D].y,tileUnitDistanceFromAnchor:C},D>0&&(C+=h[D-1].dist(h[D]));for(let D=0;D<h.length;D++){const B=A[D];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,h,m,b,C,A,D,B,U,Y,Q,ne){const ae=l.indexArray,ce=l.layoutVertexArray,ue=l.segments.prepareSegment(4*h.length,ce,ae,this.canOverlap?A.sortKey:void 0),pe=this.glyphOffsetArray.length,ve=ue.vertexLength,ze=this.allowVerticalPlacement&&D===o.az.vertical?Math.PI/2:0,Se=A.text&&A.text.sections;for(let Ce=0;Ce<h.length;Ce++){const{tl:Be,tr:Ue,bl:ot,br:wt,tex:xt,pixelOffsetTL:Et,pixelOffsetBR:Ut,minFontScaleX:It,minFontScaleY:bt,glyphOffset:ft,isSDF:ei,sectionIndex:Kt}=h[Ce],ni=ue.vertexLength,Yt=ft[1];m0(ce,B.x,B.y,Be.x,Yt+Be.y,xt.x,xt.y,m,ei,Et.x,Et.y,It,bt),m0(ce,B.x,B.y,Ue.x,Yt+Ue.y,xt.x+xt.w,xt.y,m,ei,Ut.x,Et.y,It,bt),m0(ce,B.x,B.y,ot.x,Yt+ot.y,xt.x,xt.y+xt.h,m,ei,Et.x,Ut.y,It,bt),m0(ce,B.x,B.y,wt.x,Yt+wt.y,xt.x+xt.w,xt.y+xt.h,m,ei,Ut.x,Ut.y,It,bt),xy(l.dynamicLayoutVertexArray,B,ze),ae.emplaceBack(ni,ni+2,ni+1),ae.emplaceBack(ni+1,ni+2,ni+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ft[0]),Ce!==h.length-1&&Kt===h[Ce+1].sectionIndex||l.programConfigurations.populatePaintArrays(ce.length,A,A.index,{imagePositions:{},canonical:ne,formattedSection:Se&&Se[Kt]})}l.placedSymbolArray.emplaceBack(B.x,B.y,pe,this.glyphOffsetArray.length-pe,ve,U,Y,B.segment,m?m[0]:0,m?m[1]:0,b[0],b[1],D,0,!1,0,Q)}_addCollisionDebugVertex(l,h,m,b,C,A){return h.emplaceBack(0,0),l.emplaceBack(m.x,m.y,b,C,Math.round(A.x),Math.round(A.y))}addCollisionDebugVertices(l,h,m,b,C,A,D){const B=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),U=B.vertexLength,Y=C.layoutVertexArray,Q=C.collisionVertexArray,ne=D.anchorX,ae=D.anchorY;this._addCollisionDebugVertex(Y,Q,A,ne,ae,new d(l,h)),this._addCollisionDebugVertex(Y,Q,A,ne,ae,new d(m,h)),this._addCollisionDebugVertex(Y,Q,A,ne,ae,new d(m,b)),this._addCollisionDebugVertex(Y,Q,A,ne,ae,new d(l,b)),B.vertexLength+=4;const ce=C.indexArray;ce.emplaceBack(U,U+1),ce.emplaceBack(U+1,U+2),ce.emplaceBack(U+2,U+3),ce.emplaceBack(U+3,U),B.primitiveLength+=4}addDebugCollisionBoxes(l,h,m,b){for(let C=l;C<h;C++){const A=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(A.x1,A.y1,A.x2,A.y2,b?this.textCollisionBox:this.iconCollisionBox,A.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vy(lt,M2.members,Ot),this.iconCollisionBox=new vy(lt,M2.members,Ot);for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(l,h,m,b,C,A,D,B,U){const Y={};for(let Q=h;Q<m;Q++){const ne=l.get(Q);Y.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},Y.textFeatureIndex=ne.featureIndex;break}for(let Q=b;Q<C;Q++){const ne=l.get(Q);Y.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},Y.verticalTextFeatureIndex=ne.featureIndex;break}for(let Q=A;Q<D;Q++){const ne=l.get(Q);Y.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},Y.iconFeatureIndex=ne.featureIndex;break}for(let Q=B;Q<U;Q++){const ne=l.get(Q);Y.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},Y.verticalIconFeatureIndex=ne.featureIndex;break}return Y}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,h){const m=l.placedSymbolArray.get(h),b=m.vertexStartIndex+4*m.numGlyphs;for(let C=m.vertexStartIndex;C<b;C+=4)l.indexArray.emplaceBack(C,C+2,C+1),l.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(l),m=Math.cos(l),b=[],C=[],A=[];for(let D=0;D<this.symbolInstances.length;++D){A.push(D);const B=this.symbolInstances.get(D);b.push(0|Math.round(h*B.anchorX+m*B.anchorY)),C.push(B.featureIndex)}return A.sort(((D,B)=>b[D]-b[B]||C[B]-C[D])),A}addToSortKeyRanges(l,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(((b,C,A)=>{b>=0&&A.indexOf(b)===C&&this.addIndicesForPlacedSymbol(this.text,b)})),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let U2,G2;ti("SymbolBucket",af,{omit:["layers","collisionBoxArray","features","compareText"]}),af.MAX_GLYPHS=65535,af.addDynamicAttributes=xy;var by={get paint(){return G2=G2||new as({"icon-opacity":new Ci(rt.paint_symbol["icon-opacity"]),"icon-color":new Ci(rt.paint_symbol["icon-color"]),"icon-halo-color":new Ci(rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ci(rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ci(rt.paint_symbol["icon-halo-blur"]),"icon-translate":new hi(rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new hi(rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ci(rt.paint_symbol["text-opacity"]),"text-color":new Ci(rt.paint_symbol["text-color"],{runtimeType:Xi,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Ci(rt.paint_symbol["text-halo-color"]),"text-halo-width":new Ci(rt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ci(rt.paint_symbol["text-halo-blur"]),"text-translate":new hi(rt.paint_symbol["text-translate"]),"text-translate-anchor":new hi(rt.paint_symbol["text-translate-anchor"])})},get layout(){return U2=U2||new as({"symbol-placement":new hi(rt.layout_symbol["symbol-placement"]),"symbol-spacing":new hi(rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new hi(rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ci(rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new hi(rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new hi(rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new hi(rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new hi(rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new hi(rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new hi(rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ci(rt.layout_symbol["icon-size"]),"icon-text-fit":new hi(rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new hi(rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ci(rt.layout_symbol["icon-image"]),"icon-rotate":new Ci(rt.layout_symbol["icon-rotate"]),"icon-padding":new Ci(rt.layout_symbol["icon-padding"]),"icon-keep-upright":new hi(rt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ci(rt.layout_symbol["icon-offset"]),"icon-anchor":new Ci(rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new hi(rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new hi(rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new hi(rt.layout_symbol["text-rotation-alignment"]),"text-field":new Ci(rt.layout_symbol["text-field"]),"text-font":new Ci(rt.layout_symbol["text-font"]),"text-size":new Ci(rt.layout_symbol["text-size"]),"text-max-width":new Ci(rt.layout_symbol["text-max-width"]),"text-line-height":new hi(rt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ci(rt.layout_symbol["text-letter-spacing"]),"text-justify":new Ci(rt.layout_symbol["text-justify"]),"text-radial-offset":new Ci(rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new hi(rt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ci(rt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ci(rt.layout_symbol["text-anchor"]),"text-max-angle":new hi(rt.layout_symbol["text-max-angle"]),"text-writing-mode":new hi(rt.layout_symbol["text-writing-mode"]),"text-rotate":new Ci(rt.layout_symbol["text-rotate"]),"text-padding":new hi(rt.layout_symbol["text-padding"]),"text-keep-upright":new hi(rt.layout_symbol["text-keep-upright"]),"text-transform":new Ci(rt.layout_symbol["text-transform"]),"text-offset":new Ci(rt.layout_symbol["text-offset"]),"text-allow-overlap":new hi(rt.layout_symbol["text-allow-overlap"]),"text-overlap":new hi(rt.layout_symbol["text-overlap"]),"text-ignore-placement":new hi(rt.layout_symbol["text-ignore-placement"]),"text-optional":new hi(rt.layout_symbol["text-optional"])})}};class W2{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:rn,this.defaultValue=l}evaluate(l){if(l.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(l.formattedSection))return h.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ti("FormatSectionOverride",W2,{omit:["defaultValue"]});class _0 extends Zs{constructor(l,h){super(l,by,h)}recalculate(l,h){if(super.recalculate(l,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const b=[];for(const C of m)b.indexOf(C)<0&&b.push(C);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,h,m,b){const C=this.layout.get(l).evaluate(h,{},m,b),A=this._unevaluatedLayout._values[l];return A.isDataDriven()||Wc(A.value)||!C?C:(function(D,B){return B.replace(/{([^{}]+)}/g,((U,Y)=>D&&Y in D?String(D[Y]):""))})(h.properties,C)}createBucket(l){return new af(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of by.paint.overridableProperties){if(!_0.hasPaintOverride(this.layout,l))continue;const h=this.paint.get(l),m=new W2(h),b=new cp(m,h.property.specification);let C=null;C=h.value.kind==="constant"||h.value.kind==="source"?new Ed("source",b):new hp("composite",b,h.value.zoomStops),this.paint._values[l]=new mo(h.property,C,h.parameters)}}_handleOverridablePaintPropertyUpdate(l,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&_0.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,h){const m=l.get("text-field"),b=by.paint.properties[h];let C=!1;const A=D=>{for(const B of D)if(b.overrides&&b.overrides.hasOverride(B))return void(C=!0)};if(m.value.kind==="constant"&&m.value.value instanceof kn)A(m.value.value.sections);else if(m.value.kind==="source"||m.value.kind==="composite"){const D=U=>{C||(U instanceof Gr&&ba(U.value)===cn?A(U.value.sections):U instanceof Wr?A(U.sections):U.eachChild(D))},B=m.value;B._styleExpression&&D(B._styleExpression.expression)}return C}}let $2;var ED={get paint(){return $2=$2||new as({"background-color":new hi(rt.paint_background["background-color"]),"background-pattern":new jd(rt.paint_background["background-pattern"]),"background-opacity":new hi(rt.paint_background["background-opacity"])})}};class MD extends Zs{constructor(l,h){super(l,ED,h)}}class ID extends Zs{constructor(l,h){super(l,{},h),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class PD{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const LD={once:!0},wy=63710088e-1;class eh{constructor(l,h){if(isNaN(l)||isNaN(h))throw new Error(`Invalid LngLat object: (${l}, ${h})`);if(this.lng=+l,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new eh(ri(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const h=Math.PI/180,m=this.lat*h,b=l.lat*h,C=Math.sin(m)*Math.sin(b)+Math.cos(m)*Math.cos(b)*Math.cos((l.lng-this.lng)*h);return wy*Math.acos(Math.min(C,1))}static convert(l){if(l instanceof eh)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new eh(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new eh(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const X2=2*Math.PI*wy;function Y2(u){return X2*Math.cos(u*Math.PI/180)}function q2(u){return(180+u)/360}function Z2(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function K2(u,l){return u/Y2(l)}function Q2(u){return 360*u-180}function x0(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function J2(u,l){return u*Y2(x0(l))}class Xp{constructor(l,h,m=0){this.x=+l,this.y=+h,this.z=+m}static fromLngLat(l,h=0){const m=eh.convert(l);return new Xp(q2(m.lng),Z2(m.lat),K2(h,m.lat))}toLngLat(){return new eh(Q2(this.x),x0(this.y))}toAltitude(){return J2(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/X2*(l=x0(this.y),1/Math.cos(l*Math.PI/180));var l}}function eS(u,l,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[u*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class Sy{constructor(l,h,m){if(!(function(b,C,A){return!(b<0||b>25||A<0||A>=Math.pow(2,b)||C<0||C>=Math.pow(2,b))})(l,h,m))throw new Error(`x=${h}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=h,this.y=m,this.key=rf(0,l,l,h,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,h,m){const b=(function(A,D,B){var U=eS(256*A,256*(D=Math.pow(2,B)-D-1),B),Y=eS(256*(A+1),256*(D+1),B);return U[0]+","+U[1]+","+Y[0]+","+Y[1]})(this.x,this.y,this.z),C=(function(A,D,B){let U,Y="";for(let Q=A;Q>0;Q--)U=1<<Q-1,Y+=(D&U?1:0)+(B&U?2:0);return Y})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,C).replace(/{bbox-epsg-3857}/g,b)}isChildOf(l){const h=this.z-l.z;return h>0&&l.x===this.x>>h&&l.y===this.y>>h}getTilePoint(l){const h=Math.pow(2,this.z);return new d((l.x*h-this.x)*vt,(l.y*h-this.y)*vt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class tS{constructor(l,h){this.wrap=l,this.canonical=h,this.key=rf(l,h.z,h.z,h.x,h.y)}}class yo{constructor(l,h,m,b,C){if(this.terrainRttPosMatrix32f=null,l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=h,this.canonical=new Sy(m,+b,+C),this.key=rf(h,l,m,b,C)}clone(){return new yo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-l;return l>this.canonical.z?new yo(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new yo(l,this.wrap,l,this.canonical.x>>h,this.canonical.y>>h)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,h){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-l;return l>this.canonical.z?rf(this.wrap*+h,l,this.canonical.z,this.canonical.x,this.canonical.y):rf(this.wrap*+h,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const h=this.canonical.z-l.canonical.z;return!(h<0)&&l.canonical.x===this.canonical.x>>h&&l.canonical.y===this.canonical.y>>h}children(l){if(this.overscaledZ>=l)return[new yo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,b=2*this.canonical.y;return[new yo(h,this.wrap,h,m,b),new yo(h,this.wrap,h,m+1,b),new yo(h,this.wrap,h,m,b+1),new yo(h,this.wrap,h,m+1,b+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new yo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new yo(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new tS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new Xp(l.x-this.wrap,l.y))}}function rf(u,l,h,m,b){(u*=2)<0&&(u=-1*u-1);const C=1<<h;return(C*C*u+C*b+m).toString(36)+h.toString(36)+l.toString(36)}function ky(u,l){return l?u.properties[l]:u.id}function DD(u,l){const h={id:u.id};if(l.removeAllProperties&&(delete u.removeProperties,delete u.addOrUpdateProperties,delete l.removeProperties),l.removeProperties)for(const m of l.removeProperties){const b=u.addOrUpdateProperties.findIndex((C=>C.key===m));b>-1&&u.addOrUpdateProperties.splice(b,1)}return(u.removeAllProperties||l.removeAllProperties)&&(h.removeAllProperties=!0),(u.removeProperties||l.removeProperties)&&(h.removeProperties=[...u.removeProperties||[],...l.removeProperties||[]]),(u.addOrUpdateProperties||l.addOrUpdateProperties)&&(h.addOrUpdateProperties=[...u.addOrUpdateProperties||[],...l.addOrUpdateProperties||[]]),(u.newGeometry||l.newGeometry)&&(h.newGeometry=l.newGeometry||u.newGeometry),h}function iS(u){var l,h;if(!u)return{};const m={};return m.removeAll=u.removeAll,m.remove=new Set(u.remove||[]),m.add=new Map((l=u.add)===null||l===void 0?void 0:l.map((b=>[b.id,b]))),m.update=new Map((h=u.update)===null||h===void 0?void 0:h.map((b=>[b.id,b]))),m}ti("CanonicalTileID",Sy),ti("OverscaledTileID",yo,{omit:["terrainRttPosMatrix32f"]});class mu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const h=new mu;return h.extend(l(new d(this.minX,this.minY))),h.extend(l(new d(this.maxX,this.minY))),h.extend(l(new d(this.minX,this.maxY))),h.extend(l(new d(this.maxX,this.maxY))),h}static fromPoints(l){const h=new mu;for(const m of l)h.extend(m);return h}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class nS{constructor(l){this._stringToNumber={},this._numberToString=[];for(let h=0;h<l.length;h++){const m=l[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class aS{constructor(l,h,m,b,C){this.type="Feature",this._vectorTileFeature=l,this._x=m,this._y=b,this._z=h,this.properties=l.properties,this.id=C}projectPoint(l,h,m,b){return[360*(l.x+h)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(l.y+m)/b)*Math.PI))-90]}projectLine(l,h,m,b){return l.map((C=>this.projectPoint(C,h,m,b)))}get geometry(){if(this._geometry)return this._geometry;const l=this._vectorTileFeature,h=l.extent*Math.pow(2,this._z),m=l.extent*this._x,b=l.extent*this._y,C=l.loadGeometry();switch(l.type){case 1:{const A=[];for(const B of C)A.push(B[0]);const D=this.projectLine(A,m,b,h);this._geometry=A.length===1?{type:"Point",coordinates:D[0]}:{type:"MultiPoint",coordinates:D};break}case 2:{const A=C.map((D=>this.projectLine(D,m,b,h)));this._geometry=A.length===1?{type:"LineString",coordinates:A[0]}:{type:"MultiLineString",coordinates:A};break}case 3:{const A=y2(C),D=[];for(const B of A)D.push(B.map((U=>this.projectLine(U,m,b,h))));this._geometry=D.length===1?{type:"Polygon",coordinates:D[0]}:{type:"MultiPolygon",coordinates:D};break}default:throw new Error(`unknown feature type: ${l.type}`)}return this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&h!=="_x"&&h!=="_y"&&h!=="_z"&&(l[h]=this[h]);return l}}class sf{_name;dataBuffer;nullabilityBuffer;_size;constructor(l,h,m){this._name=l,this.dataBuffer=h,typeof m=="number"?this._size=m:(this.nullabilityBuffer=m,this._size=m.size())}getValue(l){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(l)?null:this.getValueFromBuffer(l)}has(l){return this.nullabilityBuffer&&this.nullabilityBuffer.get(l)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class y0 extends sf{}class Cy extends y0{getValueFromBuffer(l){return this.dataBuffer[l]}}class Ay extends y0{getValueFromBuffer(l){return this.dataBuffer[l]}}class rS extends sf{delta;constructor(l,h,m,b){super(l,h,b),this.delta=m}}class Ty extends rS{constructor(l,h,m,b){super(l,Int32Array.of(h),m,b)}getValueFromBuffer(l){return this.dataBuffer[0]+l*this.delta}}class Ey extends sf{constructor(l,h,m){super(l,Int32Array.of(h),m)}getValueFromBuffer(l){return this.dataBuffer[0]}}class RD{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(l,h,m,b,C=4096){this._name=l,this._geometryVector=h,this._idVector=m,this._propertyVectors=b,this._extent=C}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(l){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((h=>[h.name,h])))),this.propertyVectorsMap.get(l)}*[Symbol.iterator](){const l=this.geometryVector[Symbol.iterator]();let h=0;for(;h<this.numFeatures;){let m;this.idVector&&(m=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(h)):this.idVector.getValue(h));const b=l?.next().value,C={};for(const A of this.propertyVectors){if(!A)continue;const D=A.name,B=A.getValue(h);B!==null&&(C[D]=B)}h++,yield{id:m,geometry:b,properties:C}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const l=[],h=this.geometryVector.getGeometries();for(let m=0;m<this.numFeatures;m++){let b;this.idVector&&(b=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(m)):this.idVector.getValue(m));const C={coordinates:h[m],type:this.geometryVector.geometryType(m)},A={};for(const D of this.propertyVectors){if(!D)continue;const B=D.name,U=D.getValue(m);U!==null&&(A[B]=U)}l.push({id:b,geometry:C,properties:A})}return l}containsMaxSaveIntegerValues(l){return l instanceof Cy||l instanceof Ey&&l instanceof Ty||l instanceof Ay}}class OD{value;constructor(l){this.value=l}get(){return this.value}set(l){this.value=l}increment(){return this.value++}add(l){this.value+=l}}var nn,fc,Xr,hl,_u,Qs,Ar,Tr,sS,vo;function Br(u,l,h){const m=new Int32Array(h);let b=0,C=l.get();for(let A=0;A<m.length;A++){let D=u[C++],B=127&D;D<128||(D=u[C++],B|=(127&D)<<7,D<128||(D=u[C++],B|=(127&D)<<14,D<128||(D=u[C++],B|=(127&D)<<21,D<128||(D=u[C++],B|=(15&D)<<28)))),m[b++]=B}return l.set(C),m}function v0(u,l,h){const m=new BigInt64Array(h);for(let b=0;b<m.length;b++)m[b]=FD(u,l);return m}function zD(u,l){let h,m;return m=u[l.get()],l.increment(),h=127&m,m<128?h:(m=u[l.get()],l.increment(),h|=(127&m)<<7,m<128?h:(m=u[l.get()],l.increment(),h|=(127&m)<<14,m<128?h:(m=u[l.get()],l.increment(),h|=(127&m)<<21,m<128?h:(m=u[l.get()],h|=(15&m)<<28,(function(b,C,A){let D,B;if(B=C[A.get()],A.increment(),D=(112&B)>>4,B<128||(B=C[A.get()],A.increment(),D|=(127&B)<<3,B<128)||(B=C[A.get()],A.increment(),D|=(127&B)<<10,B<128)||(B=C[A.get()],A.increment(),D|=(127&B)<<17,B<128)||(B=C[A.get()],A.increment(),D|=(127&B)<<24,B<128)||(B=C[A.get()],A.increment(),D|=(1&B)<<31,B<128))return 4294967296*D+(b>>>0);throw new Error("Expected varint not more than 10 bytes")})(h,u,l)))))}function oS(u,l,h,m){throw new Error("FastPFor is not implemented yet.")}function xu(u){return u>>>1^-(1&u)}function of(u){return u>>1n^-(1n&u)}function FD(u,l){let h=0n,m=0,b=l.get();for(;b<u.length;){const C=u[b++];if(h|=BigInt(127&C)<<BigInt(m),!(128&C))break;if(m+=7,m>=64)throw new Error("Varint too long")}return l.set(b),h}function lS(u,l,h){const m=new Int32Array(h);let b=0;for(let C=0;C<l;C++){const A=u[C];m.fill(u[C+l],b,b+A),b+=A}return m}function cS(u,l,h){const m=new BigInt64Array(h);let b=0;for(let C=0;C<l;C++){const A=Number(u[C]);m.fill(u[C+l],b,b+A),b+=A}return m}function hS(u,l,h){const m=new Float64Array(h);let b=0;for(let C=0;C<l;C++){const A=u[C];m.fill(u[C+l],b,b+A),b+=A}return m}function My(u){const l=u.length/4*4;let h=1;if(l>=4)for(let m=u[0];h<l-4;h+=4)m=u[h]+=m,m=u[h+1]+=m,m=u[h+2]+=m,m=u[h+3]+=m;for(;h!=u.length;)u[h]+=u[h-1],++h}function uS(u){u[0]=u[0]>>>1^-(1&u[0]),u[1]=u[1]>>>1^-(1&u[1]);const l=u.length/4*4;let h=2;if(l>=4)for(;h<l-4;h+=4){const m=u[h],b=u[h+1],C=u[h+2],A=u[h+3];u[h]=(m>>>1^-(1&m))+u[h-2],u[h+1]=(b>>>1^-(1&b))+u[h-1],u[h+2]=(C>>>1^-(1&C))+u[h],u[h+3]=(A>>>1^-(1&A))+u[h+1]}for(;h!=u.length;h+=2)u[h]=(u[h]>>>1^-(1&u[h]))+u[h-2],u[h+1]=(u[h+1]>>>1^-(1&u[h+1]))+u[h-1]}(function(u){u.NONE="NONE",u.DELTA="DELTA",u.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",u.RLE="RLE",u.MORTON="MORTON",u.PDE="PDE"})(nn||(nn={})),(function(u){u.NONE="NONE",u.FAST_PFOR="FAST_PFOR",u.VARINT="VARINT",u.ALP="ALP"})(fc||(fc={})),(function(u){u.PRESENT="PRESENT",u.DATA="DATA",u.OFFSET="OFFSET",u.LENGTH="LENGTH"})(Xr||(Xr={}));class Iy{_dictionaryType;_offsetType;_lengthType;constructor(l,h,m){this._dictionaryType=l,this._offsetType=h,this._lengthType=m}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function gs(u,l){const h=(function(m,b){const C=m[b.get()],A=Object.values(Xr)[C>>4];let D=null;switch(A){case Xr.DATA:D=new Iy(Object.values(hl)[15&C]);break;case Xr.OFFSET:D=new Iy(null,Object.values(_u)[15&C]);break;case Xr.LENGTH:D=new Iy(null,null,Object.values(Qs)[15&C])}b.increment();const B=m[b.get()],U=Object.values(nn)[B>>5],Y=Object.values(nn)[B>>2&7],Q=Object.values(fc)[3&B];b.increment();const ne=Br(m,b,2),ae=ne[0];return{physicalStreamType:A,logicalStreamType:D,logicalLevelTechnique1:U,logicalLevelTechnique2:Y,physicalLevelTechnique:Q,numValues:ae,byteLength:ne[1],decompressedCount:ae}})(u,l);return h.logicalLevelTechnique1===nn.MORTON?(function(m,b,C){const A=Br(b,C,2);return{physicalStreamType:m.physicalStreamType,logicalStreamType:m.logicalStreamType,logicalLevelTechnique1:m.logicalLevelTechnique1,logicalLevelTechnique2:m.logicalLevelTechnique2,physicalLevelTechnique:m.physicalLevelTechnique,numValues:m.numValues,byteLength:m.byteLength,decompressedCount:m.decompressedCount,numBits:A[0],coordinateShift:A[1]}})(h,u,l):nn.RLE!==h.logicalLevelTechnique1&&nn.RLE!==h.logicalLevelTechnique2||fc.NONE===h.physicalLevelTechnique?h:(function(m,b,C){const A=Br(b,C,2);return{physicalStreamType:m.physicalStreamType,logicalStreamType:m.logicalStreamType,logicalLevelTechnique1:m.logicalLevelTechnique1,logicalLevelTechnique2:m.logicalLevelTechnique2,physicalLevelTechnique:m.physicalLevelTechnique,numValues:m.numValues,byteLength:m.byteLength,decompressedCount:A[1],runs:A[0],numRleValues:A[1]}})(h,u,l)}(function(u){u.NONE="NONE",u.SINGLE="SINGLE",u.SHARED="SHARED",u.VERTEX="VERTEX",u.MORTON="MORTON",u.FSST="FSST"})(hl||(hl={})),(function(u){u.VERTEX="VERTEX",u.INDEX="INDEX",u.STRING="STRING",u.KEY="KEY"})(_u||(_u={})),(function(u){u.VAR_BINARY="VAR_BINARY",u.GEOMETRIES="GEOMETRIES",u.PARTS="PARTS",u.RINGS="RINGS",u.TRIANGLES="TRIANGLES",u.SYMBOL="SYMBOL",u.DICTIONARY="DICTIONARY"})(Qs||(Qs={})),(function(u){u[u.FLAT=0]="FLAT",u[u.CONST=1]="CONST",u[u.SEQUENCE=2]="SEQUENCE",u[u.DICTIONARY=3]="DICTIONARY",u[u.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Ar||(Ar={}));class ul{values;_size;constructor(l,h){this.values=l,this._size=h}get(l){const h=Math.floor(l/8);return(this.values[h]>>l%8&1)==1}set(l,h){const m=Math.floor(l/8);this.values[m]=this.values[m]|(h?1:0)<<l%8}getInt(l){const h=Math.floor(l/8);return this.values[h]>>l%8&1}size(){return this._size}getBuffer(){return this.values}}function ms(u,l,h,m,b){return(function(C,A,D){switch(A.logicalLevelTechnique1){case nn.DELTA:return A.logicalLevelTechnique2===nn.RLE?(function(B,U,Y){const Q=new Int32Array(Y);let ne=0,ae=0;for(let ce=0;ce<U;ce++){const ue=B[ce],pe=xu(B[ce+U]);for(let ve=0;ve<ue;ve++)ae+=pe,Q[ne++]=ae}return Q})(C,A.runs,A.numRleValues):((function(B){B[0]=B[0]>>>1^-(1&B[0]);const U=B.length/4*4;let Y=1;if(U>=4)for(;Y<U-4;Y+=4){const Q=B[Y],ne=B[Y+1],ae=B[Y+2],ce=B[Y+3];B[Y]=(Q>>>1^-(1&Q))+B[Y-1],B[Y+1]=(ne>>>1^-(1&ne))+B[Y],B[Y+2]=(ae>>>1^-(1&ae))+B[Y+1],B[Y+3]=(ce>>>1^-(1&ce))+B[Y+2]}for(;Y!=B.length;++Y)B[Y]=(B[Y]>>>1^-(1&B[Y]))+B[Y-1]})(C),C);case nn.RLE:return(function(B,U,Y){return Y?(function(Q,ne,ae){const ce=new Int32Array(ae);let ue=0;for(let pe=0;pe<ne;pe++){const ve=Q[pe];let ze=Q[pe+ne];ze=ze>>>1^-(1&ze),ce.fill(ze,ue,ue+ve),ue+=ve}return ce})(B,U.runs,U.numRleValues):lS(B,U.runs,U.numRleValues)})(C,A,D);case nn.MORTON:return My(C),C;case nn.COMPONENTWISE_DELTA:return uS(C),C;case nn.NONE:return D&&(function(B){for(let U=0;U<B.length;U++){const Y=B[U];B[U]=Y>>>1^-(1&Y)}})(C),C;default:throw new Error(`The specified Logical level technique is not supported: ${A.logicalLevelTechnique1}`)}})(b0(u,l,h),h,m)}function th(u,l,h){return(function(m,b){if(b.logicalLevelTechnique1===nn.DELTA&&b.logicalLevelTechnique2===nn.NONE)return(function(A){const D=new Int32Array(A.length+1);D[0]=0,D[1]=xu(A[0]);let B=D[1],U=2;for(;U!=D.length;++U){const Y=A[U-1];B+=Y>>>1^-(1&Y),D[U]=D[U-1]+B}return D})(m);if(b.logicalLevelTechnique1===nn.RLE&&b.logicalLevelTechnique2===nn.NONE)return(function(A,D,B){const U=new Int32Array(B+1);U[0]=0;let Y=1,Q=U[0];for(let ne=0;ne<D;ne++){const ae=A[ne],ce=A[ne+D];for(let ue=Y;ue<Y+ae;ue++)U[ue]=ce+Q,Q=U[ue];Y+=ae}return U})(m,b.runs,b.numRleValues);if(b.logicalLevelTechnique1===nn.NONE&&b.logicalLevelTechnique2===nn.NONE){(function(A){let D=0;for(let B=0;B<A.length;B++)A[B]+=D,D=A[B]})(m);const C=new Int32Array(b.numValues+1);return C[0]=0,C.set(m,1),C}if(b.logicalLevelTechnique1===nn.DELTA&&b.logicalLevelTechnique2===nn.RLE){const C=(function(A,D,B){const U=new Int32Array(B+1);U[0]=0;let Y=1,Q=U[0];for(let ne=0;ne<D;ne++){const ae=A[ne];let ce=A[ne+D];ce=ce>>>1^-(1&ce);for(let ue=Y;ue<Y+ae;ue++)U[ue]=ce+Q,Q=U[ue];Y+=ae}return U})(m,b.runs,b.numRleValues);return My(C),C}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(b0(u,l,h),h)}function b0(u,l,h){const m=h.physicalLevelTechnique;if(m===fc.FAST_PFOR)return oS();if(m===fc.VARINT)return Br(u,l,h.numValues);if(m===fc.NONE){const b=l.get();l.add(h.byteLength);const C=u.subarray(b,l.get());return new Int32Array(C)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Py(u,l,h,m){const b=b0(u,l,h);if(b.length===1){const C=b[0];return m?xu(C):C}return m?(function(C){return xu(C[1])})(b):(function(C){return C[1]})(b)}function dS(u,l,h){return(function(m){if(m.length==2){const b=xu(m[1]);return[b,b]}return[xu(m[2]),xu(m[3])]})(b0(u,l,h))}function fS(u,l,h){return(function(m){if(m.length==2){const b=of(m[1]);return[b,b]}return[of(m[2]),of(m[3])]})(v0(u,l,h.numValues))}function pS(u,l,h,m){return(function(b,C,A){switch(C.logicalLevelTechnique1){case nn.DELTA:return C.logicalLevelTechnique2===nn.RLE?(function(D,B,U){const Y=new BigInt64Array(U);let Q=0,ne=0n;for(let ae=0;ae<B;ae++){const ce=Number(D[ae]),ue=of(D[ae+B]);for(let pe=0;pe<ce;pe++)ne+=ue,Y[Q++]=ne}return Y})(b,C.runs,C.numRleValues):((function(D){D[0]=D[0]>>1n^-(1n&D[0]);const B=D.length/4*4;let U=1;if(B>=4)for(;U<B-4;U+=4){const Y=D[U],Q=D[U+1],ne=D[U+2],ae=D[U+3];D[U]=(Y>>1n^-(1n&Y))+D[U-1],D[U+1]=(Q>>1n^-(1n&Q))+D[U],D[U+2]=(ne>>1n^-(1n&ne))+D[U+1],D[U+3]=(ae>>1n^-(1n&ae))+D[U+2]}for(;U!=D.length;++U)D[U]=(D[U]>>1n^-(1n&D[U]))+D[U-1]})(b),b);case nn.RLE:return(function(D,B,U){return U?(function(Y,Q,ne){const ae=new BigInt64Array(ne);let ce=0;for(let ue=0;ue<Q;ue++){const pe=Number(Y[ue]);let ve=Y[ue+Q];ve=ve>>1n^-(1n&ve),ae.fill(ve,ce,ce+pe),ce+=pe}return ae})(D,B.runs,B.numRleValues):cS(D,B.runs,B.numRleValues)})(b,C,A);case nn.NONE:return A&&(function(D){for(let B=0;B<D.length;B++){const U=D[B];D[B]=U>>1n^-(1n&U)}})(b),b;default:throw new Error(`The specified Logical level technique is not supported: ${C.logicalLevelTechnique1}`)}})(v0(u,l,h.numValues),h,m)}function gS(u,l,h,m){const b=v0(u,l,h.numValues);if(b.length===1){const C=b[0];return m?of(C):C}return m?(function(C){return of(C[1])})(b):(function(C){return C[1]})(b)}function Ly(u,l,h,m,b){return(function(C,A,D,B){switch(A.logicalLevelTechnique1){case nn.DELTA:return A.logicalLevelTechnique2===nn.RLE&&(C=lS(C,A.runs,A.numRleValues)),(function(U,Y){const Q=new Int32Array(U.size());let ne=0;U.get(0)?(Q[0]=U.get(0)?Y[0]>>>1^-(1&Y[0]):0,ne=1):Q[0]=0;let ae=1;for(;ae!=Q.length;++ae)Q[ae]=U.get(ae)?Q[ae-1]+(Y[ne]>>>1^-(1&Y[ne++])):Q[ae-1];return Q})(B,C);case nn.RLE:return(function(U,Y,Q,ne){const ae=Y;return Q?(function(ce,ue,pe){const ve=new Int32Array(ce.size());let ze=0;for(let Se=0;Se<pe;Se++){const Ce=ue[Se];let Be=ue[Se+pe];Be=Be>>>1^-(1&Be);for(let Ue=ze;Ue<ze+Ce;Ue++)ce.get(Ue)?ve[Ue]=Be:(ve[Ue]=0,ze++);ze+=Ce}return ve})(ne,U,ae.runs):(function(ce,ue,pe){const ve=new Int32Array(ce.size());let ze=0;for(let Se=0;Se<pe;Se++){const Ce=ue[Se],Be=ue[Se+pe];for(let Ue=ze;Ue<ze+Ce;Ue++)ce.get(Ue)?ve[Ue]=Be:(ve[Ue]=0,ze++);ze+=Ce}return ve})(ne,U,ae.runs)})(C,A,D,B);case nn.MORTON:return My(C),C;case nn.COMPONENTWISE_DELTA:return uS(C),C;case nn.NONE:return C=D?(function(U,Y){const Q=new Int32Array(U.size());let ne=0,ae=0;for(;ae!=Q.length;++ae)if(U.get(ae)){const ce=Y[ne++];Q[ae]=ce>>>1^-(1&ce)}else Q[ae]=0;return Q})(B,C):(function(U,Y){const Q=new Int32Array(U.size());let ne=0,ae=0;for(;ae!=Q.length;++ae)Q[ae]=U.get(ae)?Y[ne++]:0;return Q})(B,C),C;default:throw new Error("The specified Logical level technique is not supported")}})(h.physicalLevelTechnique===fc.FAST_PFOR?oS():Br(u,l,h.numValues),h,m,b)}function w0(u,l,h,m){const b=u.logicalLevelTechnique1;if(b===nn.RLE)return u.runs===1?Ar.CONST:Ar.FLAT;const C=l instanceof ul?l.size():l;if(b===nn.DELTA&&u.logicalLevelTechnique2===nn.RLE){const A=u.runs,D=2;if(u.numRleValues!==C)return Ar.FLAT;if(A===1)return Ar.SEQUENCE;if(A===2){const B=m.get();let U;if(u.physicalLevelTechnique===fc.VARINT)U=Br(h,m,4);else{const Y=m.get();U=new Int32Array(h.buffer,h.byteOffset+Y,4)}if(m.set(B),U[2]===D&&U[3]===D)return Ar.SEQUENCE}}return u.numValues===1?Ar.CONST:Ar.FLAT}class mS extends y0{getValueFromBuffer(l){return this.dataBuffer[l]}}class _S extends rS{constructor(l,h,m,b){super(l,BigInt64Array.of(h),m,b)}getValueFromBuffer(l){return this.dataBuffer[0]+BigInt(l)*this.delta}}class lf{_geometryOffsets;_partOffsets;_ringOffsets;constructor(l,h,m){this._geometryOffsets=l,this._partOffsets=h,this._ringOffsets=m}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Dy(u,l,h){return{x:xS(u,l)-h,y:xS(u>>1,l)-h}}function xS(u,l){let h=0;for(let m=0;m<l;m++)h|=(u&1<<2*m)>>m;return h}(function(u){u[u.POINT=0]="POINT",u[u.LINESTRING=1]="LINESTRING",u[u.POLYGON=2]="POLYGON",u[u.MULTIPOINT=3]="MULTIPOINT",u[u.MULTILINESTRING=4]="MULTILINESTRING",u[u.MULTIPOLYGON=5]="MULTIPOLYGON"})(Tr||(Tr={})),(function(u){u[u.POINT=0]="POINT",u[u.LINESTRING=1]="LINESTRING",u[u.POLYGON=2]="POLYGON"})(sS||(sS={})),(function(u){u[u.MORTON=0]="MORTON",u[u.VEC_2=1]="VEC_2",u[u.VEC_3=2]="VEC_3"})(vo||(vo={}));class BD{createPoint(l){return[[l]]}createMultiPoint(l){return l.map((h=>[h]))}createLineString(l){return[l]}createMultiLineString(l){return l}createPolygon(l,h){return[l].concat(h)}createMultiPolygon(l){return l.flat()}}function yS(u){const l=new Array(u.numGeometries);let h=1,m=1,b=1,C=0;const A=new BD;let D=0,B=0;const U=u.mortonSettings,Y=u.topologyVector,Q=Y.geometryOffsets,ne=Y.partOffsets,ae=Y.ringOffsets,ce=u.vertexOffsets,ue=u.containsPolygonGeometry(),pe=u.vertexBuffer;for(let ve=0;ve<u.numGeometries;ve++){const ze=u.geometryType(ve);if(ze===Tr.POINT){if(ce&&ce.length!==0)if(u.vertexBufferType===vo.VEC_2){const Se=2*ce[B++],Ce=new d(pe[Se],pe[Se+1]);l[C++]=A.createPoint(Ce)}else{const Se=Dy(pe[ce[B++]],U.numBits,U.coordinateShift),Ce=new d(Se.x,Se.y);l[C++]=A.createPoint(Ce)}else{const Se=new d(pe[D++],pe[D++]);l[C++]=A.createPoint(Se)}Q&&b++,ne&&h++,ae&&m++}else if(ze===Tr.MULTIPOINT){const Se=Q[b]-Q[b-1];b++;const Ce=new Array(Se);if(ce&&ce.length!==0){for(let Be=0;Be<Se;Be++){const Ue=2*ce[B++];Ce[Be]=new d(pe[Ue],pe[Ue+1])}l[C++]=A.createMultiPoint(Ce)}else{for(let Be=0;Be<Se;Be++){const Ue=pe[D++],ot=pe[D++];Ce[Be]=new d(Ue,ot)}l[C++]=A.createMultiPoint(Ce)}}else if(ze===Tr.LINESTRING){let Se,Ce=0;ue?(Ce=ae[m]-ae[m-1],m++):Ce=ne[h]-ne[h-1],h++,ce&&ce.length!==0?(Se=u.vertexBufferType===vo.VEC_2?Oy(pe,ce,B,Ce,!1):zy(pe,ce,B,Ce,!1,U),B+=Ce):(Se=Ry(pe,D,Ce,!1),D+=2*Ce),l[C++]=A.createLineString(Se),Q&&b++}else if(ze===Tr.POLYGON){const Se=ne[h]-ne[h-1];h++;const Ce=new Array(Se-1);let Be=ae[m]-ae[m-1];if(m++,ce&&ce.length!==0){const Ue=u.vertexBufferType===vo.VEC_2?k0(pe,ce,B,Be):C0(pe,ce,B,Be,0,U);B+=Be;for(let ot=0;ot<Ce.length;ot++)Be=ae[m]-ae[m-1],m++,Ce[ot]=u.vertexBufferType===vo.VEC_2?k0(pe,ce,B,Be):C0(pe,ce,B,Be,0,U),B+=Be;l[C++]=A.createPolygon(Ue,Ce)}else{const Ue=S0(pe,D,Be);D+=2*Be;for(let ot=0;ot<Ce.length;ot++)Be=ae[m]-ae[m-1],m++,Ce[ot]=S0(pe,D,Be),D+=2*Be;l[C++]=A.createPolygon(Ue,Ce)}Q&&b++}else if(ze===Tr.MULTILINESTRING){const Se=Q[b]-Q[b-1];b++;const Ce=new Array(Se);if(ce&&ce.length!==0){for(let Be=0;Be<Se;Be++){let Ue=0;ue?(Ue=ae[m]-ae[m-1],m++):Ue=ne[h]-ne[h-1],h++;const ot=u.vertexBufferType===vo.VEC_2?Oy(pe,ce,B,Ue,!1):zy(pe,ce,B,Ue,!1,U);Ce[Be]=ot,B+=Ue}l[C++]=A.createMultiLineString(Ce)}else{for(let Be=0;Be<Se;Be++){let Ue=0;ue?(Ue=ae[m]-ae[m-1],m++):Ue=ne[h]-ne[h-1],h++,Ce[Be]=Ry(pe,D,Ue,!1),D+=2*Ue}l[C++]=A.createMultiLineString(Ce)}}else{if(ze!==Tr.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Se=Q[b]-Q[b-1];b++;const Ce=new Array(Se);let Be=0;if(ce&&ce.length!==0){for(let Ue=0;Ue<Se;Ue++){const ot=ne[h]-ne[h-1];h++;const wt=new Array(ot-1);Be=ae[m]-ae[m-1],m++;const xt=u.vertexBufferType===vo.VEC_2?k0(pe,ce,B,Be):C0(pe,ce,B,Be,0,U);B+=Be;for(let Et=0;Et<wt.length;Et++)Be=ae[m]-ae[m-1],m++,wt[Et]=u.vertexBufferType===vo.VEC_2?k0(pe,ce,B,Be):C0(pe,ce,B,Be,0,U),B+=Be;Ce[Ue]=A.createPolygon(xt,wt)}l[C++]=A.createMultiPolygon(Ce)}else{for(let Ue=0;Ue<Se;Ue++){const ot=ne[h]-ne[h-1];h++;const wt=new Array(ot-1);Be=ae[m]-ae[m-1],m++;const xt=S0(pe,D,Be);D+=2*Be;for(let Et=0;Et<wt.length;Et++){const Ut=ae[m]-ae[m-1];m++,wt[Et]=S0(pe,D,Ut),D+=2*Ut}Ce[Ue]=A.createPolygon(xt,wt)}l[C++]=A.createMultiPolygon(Ce)}}}}return l}function S0(u,l,h){return Ry(u,l,h,!0)}function k0(u,l,h,m){return Oy(u,l,h,m,!0)}function C0(u,l,h,m,b,C){return zy(u,l,h,m,!0,C)}function Ry(u,l,h,m){const b=new Array(m?h+1:h);for(let C=0;C<2*h;C+=2)b[C/2]=new d(u[l+C],u[l+C+1]);return m&&(b[b.length-1]=b[0]),b}function Oy(u,l,h,m,b){const C=new Array(b?m+1:m);for(let A=0;A<2*m;A+=2){const D=2*l[h+A/2];C[A/2]=new d(u[D],u[D+1])}return b&&(C[C.length-1]=C[0]),C}function zy(u,l,h,m,b,C){const A=new Array(b?m+1:m);for(let D=0;D<m;D++){const B=Dy(u[l[h+D]],C.numBits,C.coordinateShift);A[D]=new d(B.x,B.y)}return b&&(A[A.length-1]=A[0]),A}class vS{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(l,h,m,b,C){this._vertexBufferType=l,this._topologyVector=h,this._vertexOffsets=m,this._vertexBuffer=b,this._mortonSettings=C}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const l=yS(this);let h=0;for(;h<this.numGeometries;)yield{coordinates:l[h],type:this.geometryType(h)},h++}getSimpleEncodedVertex(l){const h=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[h],this.vertexBuffer[h+1]]}getVertex(l){if(this.vertexOffsets&&this.mortonSettings){const m=Dy(this.vertexBuffer[this.vertexOffsets[l]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[m.x,m.y]}const h=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[h],this.vertexBuffer[h+1]]}getGeometries(){return yS(this)}get mortonSettings(){return this._mortonSettings}}class bS extends vS{_numGeometries;_geometryType;constructor(l,h,m,b,C,A,D){super(m,b,C,A,D),this._numGeometries=l,this._geometryType=h}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Tr.POLYGON||this._geometryType===Tr.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class wS extends vS{_geometryTypes;constructor(l,h,m,b,C,A){super(l,m,b,C,A),this._geometryTypes=h}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let l=0;l<this.numGeometries;l++)if(this.geometryType(l)===Tr.POLYGON||this.geometryType(l)===Tr.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class SS{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(l,h,m,b){this._triangleOffsets=l,this._indexBuffer=h,this._vertexBuffer=m,this._topologyVector=b}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const l=new Array(this.numGeometries),h=this._topologyVector,m=h.partOffsets,b=h.ringOffsets,C=h.geometryOffsets;let A=0,D=1,B=1,U=1;for(let Y=0;Y<this.numGeometries;Y++)switch(this.geometryType(Y)){case Tr.POLYGON:{const Q=m[D]-m[D-1];D++;const ne=[];for(let ae=0;ae<Q;ae++){const ce=b[B]-b[B-1];B++;const ue=[];for(let pe=0;pe<ce;pe++){const ve=this._vertexBuffer[A++],ze=this._vertexBuffer[A++];ue.push(new d(ve,ze))}ue.length>0&&ue.push(ue[0]),ne.push(ue)}l[Y]=ne,C&&U++}break;case Tr.MULTIPOLYGON:{const Q=C[U]-C[U-1];U++;const ne=[];for(let ae=0;ae<Q;ae++){const ce=m[D]-m[D-1];D++;for(let ue=0;ue<ce;ue++){const pe=b[B]-b[B-1];B++;const ve=[];for(let ze=0;ze<pe;ze++){const Se=this._vertexBuffer[A++],Ce=this._vertexBuffer[A++];ve.push(new d(Se,Ce))}ve.length>0&&ve.push(ve[0]),ne.push(ve)}}l[Y]=ne}}return l}[Symbol.iterator](){return null}}function kS(u,l,h,m,b,C){return new ND(u,l,h,m,b,C)}class ND extends SS{_numGeometries;_geometryType;constructor(l,h,m,b,C,A){super(m,b,C,A),this._numGeometries=l,this._geometryType=h}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function CS(u,l,h,m,b){return new jD(u,l,h,m,b)}class jD extends SS{_geometryTypes;constructor(l,h,m,b,C){super(h,m,b,C),this._geometryTypes=l}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function VD(u,l,h,m,b){const C=gs(u,h);let A=null,D=null,B=null,U=null,Y=null,Q=null,ne=null,ae=null;if(w0(C,m,u,h)===Ar.CONST){const ue=Py(u,h,C,!1);for(let pe=0;pe<l-1;pe++){const ve=gs(u,h);switch(ve.physicalStreamType){case Xr.LENGTH:switch(ve.logicalStreamType.lengthType){case Qs.GEOMETRIES:A=th(u,h,ve);break;case Qs.PARTS:D=th(u,h,ve);break;case Qs.RINGS:B=th(u,h,ve);break;case Qs.TRIANGLES:ne=th(u,h,ve)}break;case Xr.OFFSET:switch(ve.logicalStreamType.offsetType){case _u.VERTEX:U=ms(u,h,ve,!1);break;case _u.INDEX:ae=ms(u,h,ve,!1)}break;case Xr.DATA:hl.VERTEX===ve.logicalStreamType.dictionaryType?Y=ms(u,h,ve,!0):(Q={numBits:ve.numBits,coordinateShift:ve.coordinateShift},Y=ms(u,h,ve,!1))}}return ae!==null?A!=null||D!=null?kS(m,ue,ne,ae,Y,new lf(A,D,B)):kS(m,ue,ne,ae,Y):Q===null?(function(pe,ve,ze,Se,Ce){return new bS(pe,ve,vo.VEC_2,ze,Se,Ce)})(m,ue,new lf(A,D,B),U,Y):(function(pe,ve,ze,Se,Ce,Be){return new bS(pe,ve,vo.MORTON,ze,Se,Ce,Be)})(m,ue,new lf(A,D,B),U,Y,Q)}const ce=ms(u,h,C,!1);for(let ue=0;ue<l-1;ue++){const pe=gs(u,h);switch(pe.physicalStreamType){case Xr.LENGTH:switch(pe.logicalStreamType.lengthType){case Qs.GEOMETRIES:A=ms(u,h,pe,!1);break;case Qs.PARTS:D=ms(u,h,pe,!1);break;case Qs.RINGS:B=ms(u,h,pe,!1);break;case Qs.TRIANGLES:ne=th(u,h,pe)}break;case Xr.OFFSET:switch(pe.logicalStreamType.offsetType){case _u.VERTEX:U=ms(u,h,pe,!1);break;case _u.INDEX:ae=ms(u,h,pe,!1)}break;case Xr.DATA:hl.VERTEX===pe.logicalStreamType.dictionaryType?Y=ms(u,h,pe,!0):(Q={numBits:pe.numBits,coordinateShift:pe.coordinateShift},Y=ms(u,h,pe,!1))}}return ae!==null&&D===null?CS(ce,ne,ae,Y):(A!==null?(A=Fy(ce,A,2),D!==null&&B!==null?(D=AS(ce,A,D,!1),B=(function(ue,pe,ve,ze){const Se=new Int32Array(ve[ve.length-1]+1);let Ce=0;Se[0]=Ce;let Be=1,Ue=1,ot=0;for(let wt=0;wt<ue.length;wt++){const xt=ue[wt],Et=pe[wt+1]-pe[wt];if(xt!==0&&xt!==3)for(let Ut=0;Ut<Et;Ut++){const It=ve[Be]-ve[Be-1];Be++;for(let bt=0;bt<It;bt++)Ce=Se[Ue++]=Ce+ze[ot++]}else for(let Ut=0;Ut<Et;Ut++)Se[Ue++]=++Ce,Be++}return Se})(ce,A,D,B)):D!==null&&(D=(function(ue,pe,ve){const ze=new Int32Array(pe[pe.length-1]+1);let Se=0;ze[0]=Se;let Ce=1,Be=0;for(let Ue=0;Ue<ue.length;Ue++){const ot=ue[Ue],wt=pe[Ue+1]-pe[Ue];if(ot===4||ot===1)for(let xt=0;xt<wt;xt++)Se=ze[Ce++]=Se+ve[Be++];else for(let xt=0;xt<wt;xt++)ze[Ce++]=++Se}return ze})(ce,A,D))):D!==null&&B!==null?(D=Fy(ce,D,1),B=AS(ce,D,B,!0)):D!==null&&(D=Fy(ce,D,0)),ae!==null?CS(ce,ne,ae,Y,new lf(A,D,B)):Q===null?(function(ue,pe,ve,ze){return new wS(vo.VEC_2,ue,pe,ve,ze)})(ce,new lf(A,D,B),U,Y):(function(ue,pe,ve,ze,Se){return new wS(vo.MORTON,ue,pe,ve,ze,Se)})(ce,new lf(A,D,B),U,Y,Q))}function Fy(u,l,h){const m=new Int32Array(u.length+1);let b=0;m[0]=b;let C=0;for(let A=0;A<u.length;A++)b=m[A+1]=b+(u[A]>h?l[C++]:1);return m}function AS(u,l,h,m){const b=new Int32Array(l[l.length-1]+1);let C=0;b[0]=C;let A=1,D=0;for(let B=0;B<u.length;B++){const U=u[B],Y=l[B+1]-l[B];if(U===5||U===2||m&&(U===4||U===1))for(let Q=0;Q<Y;Q++)C=b[A++]=C+h[D++];else for(let Q=0;Q<Y;Q++)b[A++]=++C}return b}class HD extends sf{dataVector;constructor(l,h,m){super(l,h.getBuffer(),m),this.dataVector=h}getValueFromBuffer(l){return this.dataVector.get(l)}}class UD extends y0{getValueFromBuffer(l){return this.dataBuffer[l]}}class TS extends sf{constructor(l,h,m){super(l,BigInt64Array.of(h),m)}getValueFromBuffer(l){return this.dataBuffer[0]}}function Yp(u,l,h){return ES(u,Math.ceil(l/8),h)}function ES(u,l,h){const m=new Uint8Array(l);let b=0;for(;b<l;){const C=u[h.increment()];if(C<=127){const A=C+3,D=u[h.increment()],B=b+A;m.fill(D,b,B),b=B}else{const A=256-C;for(let D=0;D<A;D++)m[b++]=u[h.increment()]}}return m}const GD=new TextDecoder;function By(u,l,h){return h-l>=12?GD.decode(u.subarray(l,h)):(function(m,b,C){let A="",D=b;for(;D<C;){const B=m[D];let U,Y,Q,ne=null,ae=B>239?4:B>223?3:B>191?2:1;if(D+ae>C)break;ae===1?B<128&&(ne=B):ae===2?(U=m[D+1],(192&U)==128&&(ne=(31&B)<<6|63&U,ne<=127&&(ne=null))):ae===3?(U=m[D+1],Y=m[D+2],(192&U)==128&&(192&Y)==128&&(ne=(15&B)<<12|(63&U)<<6|63&Y,(ne<=2047||ne>=55296&&ne<=57343)&&(ne=null))):ae===4&&(U=m[D+1],Y=m[D+2],Q=m[D+3],(192&U)==128&&(192&Y)==128&&(192&Q)==128&&(ne=(15&B)<<18|(63&U)<<12|(63&Y)<<6|63&Q,(ne<=65535||ne>=1114112)&&(ne=null))),ne===null?(ne=65533,ae=1):ne>65535&&(ne-=65536,A+=String.fromCharCode(ne>>>10&1023|55296),ne=56320|1023&ne),A+=String.fromCharCode(ne),D+=ae}return A})(u,l,h)}class Ny extends sf{offsetBuffer;constructor(l,h,m,b){super(l,m,b),this.offsetBuffer=h}}class MS extends Ny{textEncoder;constructor(l,h,m,b){super(l,h,m,b??h.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(l){return By(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class cf extends Ny{indexBuffer;textEncoder;constructor(l,h,m,b,C){super(l,m,b,C??h.length),this.indexBuffer=h,this.indexBuffer=h,this.textEncoder=new TextEncoder}getValueFromBuffer(l){const h=this.indexBuffer[l];return By(this.dataBuffer,this.offsetBuffer[h],this.offsetBuffer[h+1])}}class IS extends Ny{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(l,h,m,b,C,A,D){super(l,m,b,D),this.indexBuffer=h,this.symbolOffsetBuffer=C,this.symbolTableBuffer=A,this.textEncoder=new TextEncoder}getValueFromBuffer(l){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(m,b,C){const A=[],D=new Array(b.length).fill(0);for(let B=1;B<b.length;B++)D[B]=D[B-1]+b[B-1];for(let B=0;B<C.length;B++)if(C[B]===255)A.push(C[++B]);else{const U=b[C[B]],Y=D[C[B]];for(let Q=0;Q<U;Q++)A.push(m[Y+Q])}return new Uint8Array(A)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const h=this.indexBuffer[l];return By(this.decodedDictionary,this.offsetBuffer[h],this.offsetBuffer[h+1])}offsetToLengthBuffer(l){const h=new Uint32Array(l.length-1);let m=l[0];for(let b=1;b<l.length;b++){const C=l[b];h[b-1]=C-m,m=C}return h}}function WD(u,l,h,m,b,C){return h.type==="scalarType"?(function(A,D,B,U,Y,Q){let ne=null,ae=0;if(A===0)return null;if(Q.nullable){const ue=gs(D,B);ae=ue.numValues;const pe=B.get(),ve=Yp(D,ae,B);B.set(pe+ue.byteLength),ne=new ul(ve,ue.numValues)}const ce=ne??U;switch(Y.physicalType){case 4:case 3:return(function(ue,pe,ve,ze,Se){const Ce=gs(ue,pe),Be=w0(Ce,Se,ue,pe),Ue=ze.physicalType===3;if(Be===Ar.FLAT){const ot=qp(Se)?Ly(ue,pe,Ce,Ue,Se):ms(ue,pe,Ce,Ue);return new Cy(ve.name,ot,Se)}if(Be===Ar.SEQUENCE){const ot=dS(ue,pe,Ce);return new Ty(ve.name,ot[0],ot[1],Ce.numRleValues)}{const ot=Py(ue,pe,Ce,Ue);return new Ey(ve.name,ot,Se)}})(D,B,Q,Y,ce);case 9:return(function(ue,pe,ve,ze,Se){let Ce=null,Be=null,Ue=null,ot=null,wt=null,xt=null,Et=null,Ut=null;for(let It=0;It<ze;It++){const bt=gs(pe,ve);if(bt.byteLength!==0)switch(bt.physicalStreamType){case Xr.PRESENT:{const ft=Yp(pe,bt.numValues,ve);xt=new ul(ft,bt.numValues);break}case Xr.OFFSET:Be=Se!=null||xt!=null?Ly(pe,ve,bt,!1,Se??xt):ms(pe,ve,bt,!1);break;case Xr.LENGTH:{const ft=th(pe,ve,bt);Qs.DICTIONARY===bt.logicalStreamType.lengthType?Ce=ft:Qs.SYMBOL===bt.logicalStreamType.lengthType?ot=ft:Et=ft;break}case Xr.DATA:{const ft=pe.subarray(ve.get(),ve.get()+bt.byteLength);ve.add(bt.byteLength);const ei=bt.logicalStreamType.dictionaryType;hl.FSST===ei?wt=ft:hl.SINGLE===ei||hl.SHARED===ei?Ue=ft:hl.NONE===ei&&(Ut=ft);break}}}return(function(It,bt,ft,ei,Kt,ni,Yt){return bt?new IS(It,ft,ei,Kt,ni,bt,Yt):null})(ue,wt,Be,Ce,Ue,ot,Se??xt)??(function(It,bt,ft,ei,Kt){return bt?Kt?new cf(It,ft,ei,bt,Kt):new cf(It,ft,ei,bt):null})(ue,Ue,Be,Ce,Se??xt)??(function(It,bt,ft,ei,Kt){if(!bt||!ft)return null;if(ei)return Kt?new cf(It,ei,bt,ft,Kt):new cf(It,ei,bt,ft);if(Kt&&Kt.size()!==bt.length-1){const ni=new Int32Array(Kt.size());let Yt=0;for(let pi=0;pi<Kt.size();pi++)ni[pi]=Kt.get(pi)?Yt++:0;return new cf(It,ni,bt,ft,Kt)}return Kt?new MS(It,bt,ft,Kt):new MS(It,bt,ft)})(ue,Et,Ut,Be,Se??xt)})(Q.name,D,B,Q.nullable?A-1:A,ne);case 0:return(function(ue,pe,ve,ze,Se){const Ce=gs(ue,pe),Be=Ce.numValues,Ue=pe.get(),ot=qp(Se)?(function(xt,Et,Ut,It){const bt=ES(xt,Math.ceil(Et/8),Ut),ft=new ul(bt,Et),ei=It.size(),Kt=new ul(new Uint8Array(ei),ei);let ni=0;for(let Yt=0;Yt<It.size();Yt++){const pi=!!It.get(Yt)&&ft.get(ni++);Kt.set(Yt,pi)}return Kt.getBuffer()})(ue,Be,pe,Se):Yp(ue,Be,pe);pe.set(Ue+Ce.byteLength);const wt=new ul(ot,Be);return new HD(ve.name,wt,Se)})(D,B,Q,0,ce);case 6:case 5:return(function(ue,pe,ve,ze,Se){const Ce=gs(ue,pe),Be=w0(Ce,ze,ue,pe),Ue=Se.physicalType===5;if(Be===Ar.FLAT){const ot=qp(ze)?(function(wt,xt,Et,Ut,It){return(function(bt,ft,ei,Kt){switch(ft.logicalLevelTechnique1){case nn.DELTA:return ft.logicalLevelTechnique2===nn.RLE&&(bt=cS(bt,ft.runs,ft.numRleValues)),(function(ni,Yt){const pi=new BigInt64Array(ni.size());let mn=0;ni.get(0)?(pi[0]=ni.get(0)?Yt[0]>>1n^-(1n&Yt[0]):0n,mn=1):pi[0]=0n;let Ji=1;for(;Ji!=pi.length;++Ji)pi[Ji]=ni.get(Ji)?pi[Ji-1]+(Yt[mn]>>1n^-(1n&Yt[mn++])):pi[Ji-1];return pi})(Kt,bt);case nn.RLE:return(function(ni,Yt,pi,mn){const Ji=Yt;return pi?(function(ma,qr,tr){const _a=new BigInt64Array(ma.size());let ha=0;for(let Mn=0;Mn<tr;Mn++){const Ia=Number(qr[Mn]);let ja=qr[Mn+tr];ja=ja>>1n^-(1n&ja);for(let ra=ha;ra<ha+Ia;ra++)ma.get(ra)?_a[ra]=ja:(_a[ra]=0n,ha++);ha+=Ia}return _a})(mn,ni,Ji.runs):(function(ma,qr,tr){const _a=new BigInt64Array(ma.size());let ha=0;for(let Mn=0;Mn<tr;Mn++){const Ia=Number(qr[Mn]),ja=qr[Mn+tr];for(let ra=ha;ra<ha+Ia;ra++)ma.get(ra)?_a[ra]=ja:(_a[ra]=0n,ha++);ha+=Ia}return _a})(mn,ni,Ji.runs)})(bt,ft,ei,Kt);case nn.NONE:return bt=ei?(function(ni,Yt){const pi=new BigInt64Array(ni.size());let mn=0,Ji=0;for(;Ji!=pi.length;++Ji)if(ni.get(Ji)){const ma=Yt[mn++];pi[Ji]=ma>>1n^-(1n&ma)}else pi[Ji]=0n;return pi})(Kt,bt):(function(ni,Yt){const pi=new BigInt64Array(ni.size());let mn=0,Ji=0;for(;Ji!=pi.length;++Ji)pi[Ji]=ni.get(Ji)?Yt[mn++]:0n;return pi})(Kt,bt),bt;default:throw new Error("The specified Logical level technique is not supported")}})(v0(wt,xt,Et.numValues),Et,Ut,It)})(ue,pe,Ce,Ue,ze):pS(ue,pe,Ce,Ue);return new mS(ve.name,ot,ze)}if(Be===Ar.SEQUENCE){const ot=fS(ue,pe,Ce);return new _S(ve.name,ot[0],ot[1],Ce.numRleValues)}{const ot=gS(ue,pe,Ce,Ue);return new TS(ve.name,ot,ze)}})(D,B,Q,ce,Y);case 7:return(function(ue,pe,ve,ze){const Se=gs(ue,pe),Ce=qp(ze)?(function(Be,Ue,ot,wt){const xt=Ue.get(),Et=xt+wt*Float32Array.BYTES_PER_ELEMENT,Ut=new Uint8Array(Be.subarray(xt,Et)).buffer,It=new Float32Array(Ut);Ue.set(Et);const bt=ot.size(),ft=new Float32Array(bt);let ei=0;for(let Kt=0;Kt<bt;Kt++)ft[Kt]=ot.get(Kt)?It[ei++]:0;return ft})(ue,pe,ze,Se.numValues):(function(Be,Ue,ot){const wt=Ue.get(),xt=wt+ot*Float32Array.BYTES_PER_ELEMENT,Et=new Uint8Array(Be.subarray(wt,xt)).buffer,Ut=new Float32Array(Et);return Ue.set(xt),Ut})(ue,pe,Se.numValues);return new UD(ve.name,Ce,ze)})(D,B,Q,ce);case 8:return(function(ue,pe,ve,ze){const Se=gs(ue,pe),Ce=qp(ze)?(function(Be,Ue,ot,wt){const xt=Ue.get(),Et=xt+wt*Float64Array.BYTES_PER_ELEMENT,Ut=new Uint8Array(Be.subarray(xt,Et)).buffer,It=new Float64Array(Ut);Ue.set(Et);const bt=ot.size(),ft=new Float64Array(bt);let ei=0;for(let Kt=0;Kt<bt;Kt++)ft[Kt]=ot.get(Kt)?It[ei++]:0;return ft})(ue,pe,ze,Se.numValues):(function(Be,Ue,ot){const wt=Ue.get(),xt=wt+ot*Float64Array.BYTES_PER_ELEMENT,Et=new Uint8Array(Be.subarray(wt,xt)).buffer,Ut=new Float64Array(Et);return Ue.set(xt),Ut})(ue,pe,Se.numValues);return new Ay(ve.name,Ce,ze)})(D,B,Q,ce);default:throw new Error(`The specified data type for the field is currently not supported: ${Y}`)}})(m,u,l,b,h.scalarType,h):m!=1?null:(function(A,D,B,U){let Y=null,Q=null,ne=null,ae=null,ce=!1;for(;!ce;){const ze=gs(A,D);switch(ze.physicalStreamType){case Xr.LENGTH:Qs.DICTIONARY===ze.logicalStreamType.lengthType?Y=th(A,D,ze):ne=th(A,D,ze);break;case Xr.DATA:hl.SINGLE===ze.logicalStreamType.dictionaryType||hl.SHARED===ze.logicalStreamType.dictionaryType?(Q=A.subarray(D.get(),D.get()+ze.byteLength),ce=!0):ae=A.subarray(D.get(),D.get()+ze.byteLength),D.add(ze.byteLength)}}const ue=B.complexType.children,pe=[];let ve=0;for(const ze of ue){const Se=Br(A,D,1)[0];if(Se==0)continue;const Ce=`${B.name}${ze.name==="default"?"":":"+ze.name}`;if(Se!==2||ze.type!=="scalarField"||ze.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const Be=gs(A,D),Ue=Yp(A,Be.numValues,D),ot=gs(A,D),wt=ot.decompressedCount!==U?Ly(A,D,ot,!1,new ul(Ue,Be.numValues)):ms(A,D,ot,!1);pe[ve++]=ae?new IS(Ce,wt,Y,Q,ne,ae,new ul(Ue,Be.numValues)):new cf(Ce,wt,Y,Q,new ul(Ue,Be.numValues))}return pe})(u,l,h,b)}function qp(u){return u instanceof ul}function $D(u){if(u.name==="id")return!1;if(u.type==="scalarType"){const l=u.scalarType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(l.type==="logicalType")return!1}else if(u.type==="complexType"){const l=u.complexType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",u),!1}const XD=new TextDecoder;function PS(u,l){const h=Br(u,l,1)[0];if(h===0)return"";const m=l.get(),b=u.subarray(m,m+h);return l.add(h),XD.decode(b)}function LS(u,l){const h=Br(u,l,1)[0]>>>0,m=!!(4&h),b=!!(2&h),C=Br(u,l,1)[0]>>>0,A={};if(1&h&&(A.nullable=!0),b){const D={};if(m?(D.type="logicalType",D.logicalType=C):(D.type="physicalType",D.physicalType=C),8&h){const B=Br(u,l,1)[0]>>>0;D.children=new Array(B);for(let U=0;U<B;U++)D.children[U]=LS(u,l)}A.type="complexField",A.complexField=D}else{const D={};m?(D.type="logicalType",D.logicalType=C):(D.type="physicalType",D.physicalType=C),A.type="scalarField",A.scalarField=D}return A}function YD(u,l){const h=Br(u,l,1)[0]>>>0,m=(function(b){switch(b){case 0:case 1:case 2:case 3:{const C={};C.nullable=!!(1&b),C.columnScope=0;const A={};return A.physicalType=b>1?6:4,A.type="physicalType",C.scalarType=A,C.type="scalarType",C}case 4:{const C={nullable:!1,columnScope:0},A={type:"physicalType",physicalType:0};return C.type="complexType",C.complexType=A,C}case 30:{const C={nullable:!1,columnScope:0},A={type:"physicalType",physicalType:1};return C.type="complexType",C.complexType=A,C}default:return(function(C){let A=null;switch(C){case 10:case 11:A=0;break;case 12:case 13:A=1;break;case 14:case 15:A=2;break;case 16:case 17:A=3;break;case 18:case 19:A=4;break;case 20:case 21:A=5;break;case 22:case 23:A=6;break;case 24:case 25:A=7;break;case 26:case 27:A=8;break;case 28:case 29:A=9;break;default:return null}const D={};D.nullable=!!(1&C),D.columnScope=0;const B={type:"physicalType"};return B.physicalType=A,D.type="scalarType",D.scalarType=B,D})(b)}})(h);if(!m)throw new Error(`Unsupported column type code: ${h}`);if((function(b){return b>=10})(h)?m.name=PS(u,l):h>=0&&h<=3?m.name="id":h===4&&(m.name="geometry"),(function(b){return b===30})(h)){const b=Br(u,l,1)[0]>>>0,C=m.complexType;C.children=new Array(b);for(let A=0;A<b;A++)C.children[A]=LS(u,l)}return m}function qD(u,l){const h={featureTables:[]},m={};m.name=PS(u,l);const b=Br(u,l,1)[0]>>>0,C=Br(u,l,1)[0]>>>0;m.columns=new Array(C);for(let A=0;A<C;A++)m.columns[A]=YD(u,l);return h.featureTables.push(m),[h,b]}function ZD(u,l,h,m,b,C,A=!1){const D=l.scalarType.physicalType,B=w0(b,C,u,h);if(D===4)switch(B){case Ar.FLAT:{const U=ms(u,h,b,!1);return new Cy(m,U,C)}case Ar.SEQUENCE:{const U=dS(u,h,b);return new Ty(m,U[0],U[1],b.numRleValues)}case Ar.CONST:{const U=Py(u,h,b,!1);return new Ey(m,U,C)}}else switch(B){case Ar.FLAT:{if(A){const Y=(function(Q,ne,ae,ce){const ue=(function(pe,ve,ze){const Se=new Float64Array(ve);for(let Ce=0;Ce<ve;Ce++)Se[Ce]=zD(pe,ze);return Se})(Q,ae.numValues,ne);return(function(pe,ve,ze){switch(ve.logicalLevelTechnique1){case nn.DELTA:return ve.logicalLevelTechnique2===nn.RLE&&(pe=hS(pe,ve.runs,ve.numRleValues)),(function(Se){Se[0]=Se[0]%2==1?(Se[0]+1)/-2:Se[0]/2;const Ce=Se.length/4*4;let Be=1;if(Ce>=4)for(;Be<Ce-4;Be+=4){const Ue=Se[Be],ot=Se[Be+1],wt=Se[Be+2],xt=Se[Be+3];Se[Be]=(Ue%2==1?(Ue+1)/-2:Ue/2)+Se[Be-1],Se[Be+1]=(ot%2==1?(ot+1)/-2:ot/2)+Se[Be],Se[Be+2]=(wt%2==1?(wt+1)/-2:wt/2)+Se[Be+1],Se[Be+3]=(xt%2==1?(xt+1)/-2:xt/2)+Se[Be+2]}for(;Be!=Se.length;++Be)Se[Be]=(Se[Be]%2==1?(Se[Be]+1)/-2:Se[Be]/2)+Se[Be-1]})(pe),pe;case nn.RLE:return(function(Se,Ce,Be){return hS(Se,Ce.runs,Ce.numRleValues)})(pe,ve);case nn.NONE:return pe;default:throw new Error(`The specified Logical level technique is not supported: ${ve.logicalLevelTechnique1}`)}})(ue,ae)})(u,h,b);return new Ay(m,Y,C)}const U=pS(u,h,b,!1);return new mS(m,U,C)}case Ar.SEQUENCE:{const U=fS(u,h,b);return new _S(m,U[0],U[1],b.numRleValues)}case Ar.CONST:{const U=gS(u,h,b,!1);return new TS(m,U,C)}}throw new Error("Vector type not supported for id column.")}class KD{constructor(l,h){var m;switch(this._featureData=l,this.properties=this._featureData.properties||{},(m=this._featureData.geometry)===null||m===void 0?void 0:m.type){case Tr.POINT:case Tr.MULTIPOINT:this.type=1;break;case Tr.LINESTRING:case Tr.MULTILINESTRING:this.type=2;break;case Tr.POLYGON:case Tr.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=h,this.id=Number(this._featureData.id)}loadGeometry(){const l=[];for(const h of this._featureData.geometry.coordinates){const m=[];for(const b of h)m.push(new d(b.x,b.y));l.push(m)}return l}}class QD{constructor(l){this.features=[],this.featureTable=l,this.name=l.name,this.extent=l.extent,this.version=2,this.features=l.getFeatures(),this.length=this.features.length}feature(l){return new KD(this.features[l],this.extent)}}class DS{constructor(l){this.layers={};const h=(function(m,b,C=!0){const A=new OD(0),D=[];for(;A.get()<m.length;){const B=Br(m,A,1)[0]>>>0,U=A.get()+B;if(U>m.length)throw new Error(`Block overruns tile: ${U} > ${m.length}`);if(Br(m,A,1)[0]>>>0!=1){A.set(U);continue}const Y=qD(m,A),Q=Y[1],ne=Y[0].featureTables[0];let ae=null,ce=null;const ue=[];let pe=0;for(const ze of ne.columns){const Se=ze.name;if(Se==="id"){let Ce=null;if(ze.nullable){const Ue=gs(m,A),ot=A.get(),wt=Yp(m,Ue.numValues,A);A.set(ot+Ue.byteLength),Ce=new ul(wt,Ue.numValues)}const Be=gs(m,A);pe=Be.decompressedCount,ae=ZD(m,ze,A,Se,Be,Ce??pe,C)}else if(Se==="geometry"){const Ce=Br(m,A,1)[0];if(pe===0){const Be=A.get();pe=gs(m,A).decompressedCount,A.set(Be)}ce=VD(m,Ce,A,pe)}else{const Ce=$D(ze)?Br(m,A,1)[0]:1;if(Ce===0&&ze.type==="scalarType")continue;const Be=WD(m,A,ze,Ce,pe);if(Be)if(Array.isArray(Be))for(const Ue of Be)ue.push(Ue);else ue.push(Be)}}const ve=new RD(ne.name,ce,ae,ue,Q);D.push(ve),A.set(U)}return D})(new Uint8Array(l));this.layers=h.reduce(((m,b)=>Object.assign(Object.assign({},m),{[b.name]:new QD(b)})),{})}}class JD{constructor(l,h){this.feature=l,this.type=l.type,this.properties=l.tags?l.tags:{},this.extent=h,"id"in l&&(typeof l.id=="string"?this.id=parseInt(l.id,10):typeof l.id!="number"||isNaN(l.id)||(this.id=l.id))}loadGeometry(){const l=[],h=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const m of h){const b=[];for(const C of m)b.push(new d(C[0],C[1]));l.push(b)}return l}}const Zp="_geojsonTileLayer";function eR(u,l){l.writeVarintField(15,u.version||1),l.writeStringField(1,u.name||""),l.writeVarintField(5,u.extent||4096);const h={keys:[],values:[],keycache:{},valuecache:{}};for(let C=0;C<u.length;C++)h.feature=u.feature(C),l.writeMessage(2,tR,h);const m=h.keys;for(const C of m)l.writeStringField(3,C);const b=h.values;for(const C of b)l.writeMessage(4,aR,C)}function tR(u,l){if(!u.feature)return;const h=u.feature;h.id!==void 0&&l.writeVarintField(1,h.id),l.writeMessage(2,iR,u),l.writeVarintField(3,h.type),l.writeMessage(4,nR,h)}function iR(u,l){for(const h in u.feature?.properties){let m=u.feature.properties[h],b=u.keycache[h];if(m==null)continue;b===void 0&&(u.keys.push(h),b=u.keys.length-1,u.keycache[h]=b),l.writeVarint(b),typeof m!="string"&&typeof m!="boolean"&&typeof m!="number"&&(m=JSON.stringify(m));const C=typeof m+":"+m;let A=u.valuecache[C];A===void 0&&(u.values.push(m),A=u.values.length-1,u.valuecache[C]=A),l.writeVarint(A)}}function jy(u,l){return(l<<3)+(7&u)}function RS(u){return u<<1^u>>31}function nR(u,l){const h=u.loadGeometry(),m=u.type;let b=0,C=0;for(const A of h){let D=1;m===1&&(D=A.length),l.writeVarint(jy(1,D));const B=m===3?A.length-1:A.length;for(let U=0;U<B;U++){U===1&&m!==1&&l.writeVarint(jy(2,B-1));const Y=A[U].x-b,Q=A[U].y-C;l.writeVarint(RS(Y)),l.writeVarint(RS(Q)),b+=Y,C+=Q}u.type===3&&l.writeVarint(jy(7,1))}}function aR(u,l){const h=typeof u;h==="string"?l.writeStringField(1,u):h==="boolean"?l.writeBooleanField(7,u):h==="number"&&(u%1!=0?l.writeDoubleField(3,u):u<0?l.writeSVarintField(6,u):l.writeVarintField(5,u))}class OS{constructor(l,h){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Yc(vt,16,0),this.grid3D=new Yc(vt,16,0),this.featureIndexArray=new ye,this.promoteId=h}insert(l,h,m,b,C,A){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,b,C);const B=A?this.grid3D:this.grid;for(let U=0;U<h.length;U++){const Y=h[U],Q=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<Y.length;ne++){const ae=Y[ne];Q[0]=Math.min(Q[0],ae.x),Q[1]=Math.min(Q[1],ae.y),Q[2]=Math.max(Q[2],ae.x),Q[3]=Math.max(Q[3],ae.y)}Q[0]<vt&&Q[1]<vt&&Q[2]>=0&&Q[3]>=0&&B.insert(D,Q[0],Q[1],Q[2],Q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new v2(new p0(this.rawTileData)).layers:new DS(this.rawTileData).layers,this.sourceLayerCoder=new nS(this.vtLayers?Object.keys(this.vtLayers).sort():[Zp])),this.vtLayers}query(l,h,m,b){this.loadVTLayers();const C=l.params,A=vt/l.tileSize/l.scale,D=$h(C.filter,C.globalState),B=l.queryGeometry,U=l.queryPadding*A,Y=mu.fromPoints(B),Q=this.grid.query(Y.minX-U,Y.minY-U,Y.maxX+U,Y.maxY+U),ne=mu.fromPoints(l.cameraQueryGeometry).expandBy(U),ae=this.grid3D.query(ne.minX,ne.minY,ne.maxX,ne.maxY,((pe,ve,ze,Se)=>(function(Ce,Be,Ue,ot,wt){for(const Et of Ce)if(Be<=Et.x&&Ue<=Et.y&&ot>=Et.x&&wt>=Et.y)return!0;const xt=[new d(Be,Ue),new d(Be,wt),new d(ot,wt),new d(ot,Ue)];if(Ce.length>2){for(const Et of xt)if(Zd(Ce,Et))return!0}for(let Et=0;Et<Ce.length-1;Et++)if(sL(Ce[Et],Ce[Et+1],xt))return!0;return!1})(l.cameraQueryGeometry,pe-U,ve-U,ze+U,Se+U)));for(const pe of ae)Q.push(pe);Q.sort(rR);const ce={};let ue;for(let pe=0;pe<Q.length;pe++){const ve=Q[pe];if(ve===ue)continue;ue=ve;const ze=this.featureIndexArray.get(ve);let Se=null;this.loadMatchingFeature(ce,ze.bucketIndex,ze.sourceLayerIndex,ze.featureIndex,D,C.layers,C.availableImages,h,m,b,((Ce,Be,Ue)=>(Se||(Se=Fl(Ce)),Be.queryIntersectsFeature({queryGeometry:B,feature:Ce,featureState:Ue,geometry:Se,zoom:this.z,transform:l.transform,pixelsToTileUnits:A,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return ce}loadMatchingFeature(l,h,m,b,C,A,D,B,U,Y,Q){const ne=this.bucketLayerIDs[h];if(A&&!ne.some((pe=>A.has(pe))))return;const ae=this.sourceLayerCoder.decode(m),ce=this.vtLayers[ae].feature(b);if(C.needGeometry){const pe=Bl(ce,!0);if(!C.filter(new Wn(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!C.filter(new Wn(this.tileID.overscaledZ),ce))return;const ue=this.getId(ce,ae);for(let pe=0;pe<ne.length;pe++){const ve=ne[pe];if(A&&!A.has(ve))continue;const ze=B[ve];if(!ze)continue;let Se={};ue&&Y&&(Se=Y.getState(ze.sourceLayer||Zp,ue));const Ce=Zt({},U[ve]);Ce.paint=zS(Ce.paint,ze.paint,ce,Se,D),Ce.layout=zS(Ce.layout,ze.layout,ce,Se,D);const Be=!Q||Q(ce,ze,Se);if(!Be)continue;const Ue=new aS(ce,this.z,this.x,this.y,ue);Ue.layer=Ce;let ot=l[ve];ot===void 0&&(ot=l[ve]=[]),ot.push({featureIndex:b,feature:Ue,intersectionZ:Be})}}lookupSymbolFeatures(l,h,m,b,C,A,D,B){const U={};this.loadVTLayers();const Y=$h(C.filterSpec,C.globalState);for(const Q of l)this.loadMatchingFeature(U,m,b,Q,Y,A,D,B,h);return U}hasLayer(l){for(const h of this.bucketLayerIDs)for(const m of h)if(l===m)return!0;return!1}getId(l,h){var m;let b=l.id;return this.promoteId&&(b=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&(!((m=l.properties)===null||m===void 0)&&m.cluster)&&this.promoteId&&(b=Number(l.properties.cluster_id))),b}}function zS(u,l,h,m,b){return Fi(u,((C,A)=>{const D=l instanceof ru?l.get(A):null;return D&&D.evaluate?D.evaluate(h,m,b):D}))}function rR(u,l){return l-u}function FS(u,l,h,m,b){const C=[];for(let A=0;A<u.length;A++){const D=u[A];let B;for(let U=0;U<D.length-1;U++){let Y=D[U],Q=D[U+1];Y.x<l&&Q.x<l||(Y.x<l?Y=new d(l,Y.y+(l-Y.x)/(Q.x-Y.x)*(Q.y-Y.y))._round():Q.x<l&&(Q=new d(l,Y.y+(l-Y.x)/(Q.x-Y.x)*(Q.y-Y.y))._round()),Y.y<h&&Q.y<h||(Y.y<h?Y=new d(Y.x+(h-Y.y)/(Q.y-Y.y)*(Q.x-Y.x),h)._round():Q.y<h&&(Q=new d(Y.x+(h-Y.y)/(Q.y-Y.y)*(Q.x-Y.x),h)._round()),Y.x>=m&&Q.x>=m||(Y.x>=m?Y=new d(m,Y.y+(m-Y.x)/(Q.x-Y.x)*(Q.y-Y.y))._round():Q.x>=m&&(Q=new d(m,Y.y+(m-Y.x)/(Q.x-Y.x)*(Q.y-Y.y))._round()),Y.y>=b&&Q.y>=b||(Y.y>=b?Y=new d(Y.x+(b-Y.y)/(Q.y-Y.y)*(Q.x-Y.x),b)._round():Q.y>=b&&(Q=new d(Y.x+(b-Y.y)/(Q.y-Y.y)*(Q.x-Y.x),b)._round()),B&&Y.equals(B[B.length-1])||(B=[Y],C.push(B)),B.push(Q)))))}}return C}function BS(u,l,h,m,b){switch(l){case 1:return(function(C,A,D,B){const U=[];for(const Y of C)for(const Q of Y){const ne=B===0?Q.x:Q.y;ne>=A&&ne<=D&&U.push([Q])}return U})(u,h,m,b);case 2:return NS(u,h,m,b,!1);case 3:return NS(u,h,m,b,!0)}return[]}function sR(u,l,h,m,b){const C=m===0?oR:lR;let A=[];const D=[];for(let Y=0;Y<u.length-1;Y++){const Q=u[Y],ne=u[Y+1],ae=m===0?Q.x:Q.y,ce=m===0?ne.x:ne.y;let ue=!1;ae<l?ce>l&&A.push(C(Q,ne,l)):ae>h?ce<h&&A.push(C(Q,ne,h)):A.push(Q),ce<l&&ae>=l&&(A.push(C(Q,ne,l)),ue=!0),ce>h&&ae<=h&&(A.push(C(Q,ne,h)),ue=!0),!b&&ue&&(D.push(A),A=[])}const B=u.length-1,U=m===0?u[B].x:u[B].y;return U>=l&&U<=h&&A.push(u[B]),b&&A.length>0&&!A[0].equals(A[A.length-1])&&A.push(new d(A[0].x,A[0].y)),A.length>0&&D.push(A),D}function NS(u,l,h,m,b){const C=[];for(const A of u){const D=sR(A,l,h,m,b);D.length>0&&C.push(...D)}return C}function oR(u,l,h){return new d(h,u.y+(h-u.x)/(l.x-u.x)*(l.y-u.y))}function lR(u,l,h){return new d(u.x+(h-u.y)/(l.y-u.y)*(l.x-u.x),h)}ti("FeatureIndex",OS,{omit:["rawTileData","sourceLayerCoder"]});class ih extends d{constructor(l,h,m,b){super(l,h),this.angle=m,b!==void 0&&(this.segment=b)}clone(){return new ih(this.x,this.y,this.angle,this.segment)}}function jS(u,l,h,m,b){if(l.segment===void 0||h===0)return!0;let C=l,A=l.segment+1,D=0;for(;D>-h/2;){if(A--,A<0)return!1;D-=u[A].dist(C),C=u[A]}D+=u[A].dist(u[A+1]),A++;const B=[];let U=0;for(;D<h/2;){const Y=u[A],Q=u[A+1];if(!Q)return!1;let ne=u[A-1].angleTo(Y)-Y.angleTo(Q);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:D,angleDelta:ne}),U+=ne;D-B[0].distance>m;)U-=B.shift().angleDelta;if(U>b)return!1;A++,D+=Y.dist(Q)}return!0}function VS(u){let l=0;for(let h=0;h<u.length-1;h++)l+=u[h].dist(u[h+1]);return l}function HS(u,l,h){return u?.6*l*h:0}function US(u,l){return Math.max(u?u.right-u.left:0,l?l.right-l.left:0)}function cR(u,l,h,m,b,C){const A=HS(h,b,C),D=US(h,m)*C;let B=0;const U=VS(u)/2;for(let Y=0;Y<u.length-1;Y++){const Q=u[Y],ne=u[Y+1],ae=Q.dist(ne);if(B+ae>U){const ce=(U-B)/ae,ue=Gn.number(Q.x,ne.x,ce),pe=Gn.number(Q.y,ne.y,ce),ve=new ih(ue,pe,ne.angleTo(Q),Y);return ve._round(),!A||jS(u,ve,D,A,l)?ve:void 0}B+=ae}}function hR(u,l,h,m,b,C,A,D,B){const U=HS(m,C,A),Y=US(m,b),Q=Y*A,ne=u[0].x===0||u[0].x===B||u[0].y===0||u[0].y===B;return l-Q<l/4&&(l=Q+l/4),GS(u,ne?l/2*D%l:(Y/2+2*C)*A*D%l,l,U,h,Q,ne,!1,B)}function GS(u,l,h,m,b,C,A,D,B){const U=C/2,Y=VS(u);let Q=0,ne=l-h,ae=[];for(let ce=0;ce<u.length-1;ce++){const ue=u[ce],pe=u[ce+1],ve=ue.dist(pe),ze=pe.angleTo(ue);for(;ne+h<Q+ve;){ne+=h;const Se=(ne-Q)/ve,Ce=Gn.number(ue.x,pe.x,Se),Be=Gn.number(ue.y,pe.y,Se);if(Ce>=0&&Ce<B&&Be>=0&&Be<B&&ne-U>=0&&ne+U<=Y){const Ue=new ih(Ce,Be,ze,ce);Ue._round(),m&&!jS(u,Ue,C,m,b)||ae.push(Ue)}}Q+=ve}return D||ae.length||A||(ae=GS(u,Q/2,h,m,b,C,A,!0,B)),ae}function WS(u,l,h,m){const b=[],C=u.image,A=C.pixelRatio,D=C.paddedRect.w-2,B=C.paddedRect.h-2;let U={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const Y=C.stretchX||[[0,D]],Q=C.stretchY||[[0,B]],ne=(ft,ei)=>ft+ei[1]-ei[0],ae=Y.reduce(ne,0),ce=Q.reduce(ne,0),ue=D-ae,pe=B-ce;let ve=0,ze=ae,Se=0,Ce=ce,Be=0,Ue=ue,ot=0,wt=pe;if(C.content&&m){const ft=C.content,ei=ft[2]-ft[0],Kt=ft[3]-ft[1];(C.textFitWidth||C.textFitHeight)&&(U=j2(u)),ve=A0(Y,0,ft[0]),Se=A0(Q,0,ft[1]),ze=A0(Y,ft[0],ft[2]),Ce=A0(Q,ft[1],ft[3]),Be=ft[0]-ve,ot=ft[1]-Se,Ue=ei-ze,wt=Kt-Ce}const xt=U.x1,Et=U.y1,Ut=U.x2-xt,It=U.y2-Et,bt=(ft,ei,Kt,ni)=>{const Yt=T0(ft.stretch-ve,ze,Ut,xt),pi=E0(ft.fixed-Be,Ue,ft.stretch,ae),mn=T0(ei.stretch-Se,Ce,It,Et),Ji=E0(ei.fixed-ot,wt,ei.stretch,ce),ma=T0(Kt.stretch-ve,ze,Ut,xt),qr=E0(Kt.fixed-Be,Ue,Kt.stretch,ae),tr=T0(ni.stretch-Se,Ce,It,Et),_a=E0(ni.fixed-ot,wt,ni.stretch,ce),ha=new d(Yt,mn),Mn=new d(ma,mn),Ia=new d(ma,tr),ja=new d(Yt,tr),ra=new d(pi/A,Ji/A),Ds=new d(qr/A,_a/A),Zr=l*Math.PI/180;if(Zr){const Er=Math.sin(Zr),ka=Math.cos(Zr),ir=[ka,-Er,Er,ka];ha._matMult(ir),Mn._matMult(ir),ja._matMult(ir),Ia._matMult(ir)}const Rs=ft.stretch+ft.fixed,Go=ei.stretch+ei.fixed;return{tl:ha,tr:Mn,bl:ja,br:Ia,tex:{x:C.paddedRect.x+1+Rs,y:C.paddedRect.y+1+Go,w:Kt.stretch+Kt.fixed-Rs,h:ni.stretch+ni.fixed-Go},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ra,pixelOffsetBR:Ds,minFontScaleX:Ue/A/Ut,minFontScaleY:wt/A/It,isSDF:h}};if(m&&(C.stretchX||C.stretchY)){const ft=$S(Y,ue,ae),ei=$S(Q,pe,ce);for(let Kt=0;Kt<ft.length-1;Kt++){const ni=ft[Kt],Yt=ft[Kt+1];for(let pi=0;pi<ei.length-1;pi++)b.push(bt(ni,ei[pi],Yt,ei[pi+1]))}}else b.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:B+1}));return b}function A0(u,l,h){let m=0;for(const b of u)m+=Math.max(l,Math.min(h,b[1]))-Math.max(l,Math.min(h,b[0]));return m}function $S(u,l,h){const m=[{fixed:-1,stretch:0}];for(const[b,C]of u){const A=m[m.length-1];m.push({fixed:b-A.stretch,stretch:A.stretch}),m.push({fixed:b-A.stretch,stretch:A.stretch+(C-b)})}return m.push({fixed:l+1,stretch:h}),m}function T0(u,l,h,m){return u/l*h+m}function E0(u,l,h,m){return u-l*h/m}ti("Anchor",ih);class M0{constructor(l,h,m,b,C,A,D,B,U,Y){var Q;if(this.boxStartIndex=l.length,U){let ne=A.top,ae=A.bottom;const ce=A.collisionPadding;ce&&(ne-=ce[1],ae+=ce[3]);let ue=ae-ne;ue>0&&(ue=Math.max(10,ue),this.circleDiameter=ue)}else{const ne=!((Q=A.image)===null||Q===void 0)&&Q.content&&(A.image.textFitWidth||A.image.textFitHeight)?j2(A):{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};ne.y1=ne.y1*D-B[0],ne.y2=ne.y2*D+B[2],ne.x1=ne.x1*D-B[3],ne.x2=ne.x2*D+B[1];const ae=A.collisionPadding;if(ae&&(ne.x1-=ae[0]*D,ne.y1-=ae[1]*D,ne.x2+=ae[2]*D,ne.y2+=ae[3]*D),Y){const ce=new d(ne.x1,ne.y1),ue=new d(ne.x2,ne.y1),pe=new d(ne.x1,ne.y2),ve=new d(ne.x2,ne.y2),ze=Y*Math.PI/180;ce._rotate(ze),ue._rotate(ze),pe._rotate(ze),ve._rotate(ze),ne.x1=Math.min(ce.x,ue.x,pe.x,ve.x),ne.x2=Math.max(ce.x,ue.x,pe.x,ve.x),ne.y1=Math.min(ce.y,ue.y,pe.y,ve.y),ne.y2=Math.max(ce.y,ue.y,pe.y,ve.y)}l.emplaceBack(h.x,h.y,ne.x1,ne.y1,ne.x2,ne.y2,m,b,C)}this.boxEndIndex=l.length}}class uR{constructor(l=[],h=(m,b)=>m<b?-1:m>b?1:0){if(this.data=l,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:h,compare:m}=this,b=h[l];for(;l>0;){const C=l-1>>1,A=h[C];if(m(b,A)>=0)break;h[l]=A,l=C}h[l]=b}_down(l){const{data:h,compare:m}=this,b=this.length>>1,C=h[l];for(;l<b;){let A=1+(l<<1);const D=A+1;if(D<this.length&&m(h[D],h[A])<0&&(A=D),m(h[A],C)>=0)break;h[l]=h[A],l=A}h[l]=C}}function dR(u,l=1,h=!1){const m=mu.fromPoints(u[0]),b=Math.min(m.width(),m.height());let C=b/2;const A=new uR([],fR),{minX:D,minY:B,maxX:U,maxY:Y}=m;if(b===0)return new d(D,B);for(let ae=D;ae<U;ae+=b)for(let ce=B;ce<Y;ce+=b)A.push(new hf(ae+C,ce+C,C,u));let Q=(function(ae){let ce=0,ue=0,pe=0;const ve=ae[0];for(let ze=0,Se=ve.length,Ce=Se-1;ze<Se;Ce=ze++){const Be=ve[ze],Ue=ve[Ce],ot=Be.x*Ue.y-Ue.x*Be.y;ue+=(Be.x+Ue.x)*ot,pe+=(Be.y+Ue.y)*ot,ce+=3*ot}return new hf(ue/ce,pe/ce,0,ae)})(u),ne=A.length;for(;A.length;){const ae=A.pop();(ae.d>Q.d||!Q.d)&&(Q=ae,h&&console.log("found best %d after %d probes",Math.round(1e4*ae.d)/1e4,ne)),ae.max-Q.d<=l||(C=ae.h/2,A.push(new hf(ae.p.x-C,ae.p.y-C,C,u)),A.push(new hf(ae.p.x+C,ae.p.y-C,C,u)),A.push(new hf(ae.p.x-C,ae.p.y+C,C,u)),A.push(new hf(ae.p.x+C,ae.p.y+C,C,u)),ne+=4)}return h&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${Q.d}`)),Q.p}function fR(u,l){return l.max-u.max}function hf(u,l,h,m){this.p=new d(u,l),this.h=h,this.d=(function(b,C){let A=!1,D=1/0;for(let B=0;B<C.length;B++){const U=C[B];for(let Y=0,Q=U.length,ne=Q-1;Y<Q;ne=Y++){const ae=U[Y],ce=U[ne];ae.y>b.y!=ce.y>b.y&&b.x<(ce.x-ae.x)*(b.y-ae.y)/(ce.y-ae.y)+ae.x&&(A=!A),D=Math.min(D,Kw(b,ae,ce))}}return(A?1:-1)*Math.sqrt(D)})(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Yr;o.aP=void 0,(Yr=o.aP||(o.aP={}))[Yr.center=1]="center",Yr[Yr.left=2]="left",Yr[Yr.right=3]="right",Yr[Yr.top=4]="top",Yr[Yr.bottom=5]="bottom",Yr[Yr["top-left"]=6]="top-left",Yr[Yr["top-right"]=7]="top-right",Yr[Yr["bottom-left"]=8]="bottom-left",Yr[Yr["bottom-right"]=9]="bottom-right";const Vy=Number.POSITIVE_INFINITY;function XS(u,l){return l[1]!==Vy?(function(h,m,b){let C=0,A=0;switch(m=Math.abs(m),b=Math.abs(b),h){case"top-right":case"top-left":case"top":A=b-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-b}switch(h){case"top-right":case"bottom-right":case"right":C=-m;break;case"top-left":case"bottom-left":case"left":C=m}return[C,A]})(u,l[0],l[1]):(function(h,m){let b=0,C=0;m<0&&(m=0);const A=m/Math.SQRT2;switch(h){case"top-right":case"top-left":C=A-7;break;case"bottom-right":case"bottom-left":C=7-A;break;case"bottom":C=7-m;break;case"top":C=m-7}switch(h){case"top-right":case"bottom-right":b=-A;break;case"top-left":case"bottom-left":b=A;break;case"left":b=m;break;case"right":b=-m}return[b,C]})(u,l[0])}function YS(u,l,h){var m;const b=u.layout,C=(m=b.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},h);if(C){const D=C.values,B=[];for(let U=0;U<D.length;U+=2){const Y=B[U]=D[U],Q=D[U+1].map((ne=>ne*Cr));Y.startsWith("top")?Q[1]-=7:Y.startsWith("bottom")&&(Q[1]+=7),B[U+1]=Q}return new An(B)}const A=b.get("text-variable-anchor");if(A){let D;D=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(l,{},h)*Cr,Vy]:b.get("text-offset").evaluate(l,{},h).map((U=>U*Cr));const B=[];for(const U of A)B.push(U,XS(U,D));return new An(B)}return null}function Hy(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function pR(u,l,h,m,b,C,A,D,B,U,Y,Q){let ne=C.textMaxSize.evaluate(l,{});ne===void 0&&(ne=A);const ae=u.layers[0].layout,ce=ae.get("icon-offset").evaluate(l,{},Y),ue=ZS(h.horizontal),pe=A/24,ve=u.tilePixelRatio*pe,ze=u.tilePixelRatio*ne/24,Se=u.tilePixelRatio*D,Ce=u.tilePixelRatio*ae.get("symbol-spacing"),Be=ae.get("text-padding")*u.tilePixelRatio,Ue=(function(Kt,ni,Yt,pi=1){const mn=Kt.get("icon-padding").evaluate(ni,{},Yt),Ji=mn&&mn.values;return[Ji[0]*pi,Ji[1]*pi,Ji[2]*pi,Ji[3]*pi]})(ae,l,Y,u.tilePixelRatio),ot=ae.get("text-max-angle")/180*Math.PI,wt=ae.get("text-rotation-alignment")!=="viewport"&&ae.get("symbol-placement")!=="point",xt=ae.get("icon-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",Et=ae.get("symbol-placement"),Ut=Ce/2,It=ae.get("icon-text-fit");let bt;m&&It!=="none"&&(u.allowVerticalPlacement&&h.vertical&&(bt=V2(m,h.vertical,It,ae.get("icon-text-fit-padding"),ce,pe)),ue&&(m=V2(m,ue,It,ae.get("icon-text-fit-padding"),ce,pe)));const ft=Y?Q.line.getGranularityForZoomLevel(Y.z):1,ei=(Kt,ni)=>{ni.x<0||ni.x>=vt||ni.y<0||ni.y>=vt||(function(Yt,pi,mn,Ji,ma,qr,tr,_a,ha,Mn,Ia,ja,ra,Ds,Zr,Rs,Go,Er,ka,ir,Pa,Mr,pc,dl,Jp){const nh=Yt.addToLineVertexArray(pi,mn);let yu,uf,df,ff,ek=0,tk=0,ik=0,nk=0,Zy=-1,Ky=-1;const gc={};let ak=Na("");if(Yt.allowVerticalPlacement&&Ji.vertical){const rs=_a.layout.get("text-rotate").evaluate(Pa,{},dl)+90;df=new M0(ha,pi,Mn,Ia,ja,Ji.vertical,ra,Ds,Zr,rs),tr&&(ff=new M0(ha,pi,Mn,Ia,ja,tr,Go,Er,Zr,rs))}if(ma){const rs=_a.layout.get("icon-rotate").evaluate(Pa,{}),bo=_a.layout.get("icon-text-fit")!=="none",vu=WS(ma,rs,pc,bo),pl=tr?WS(tr,rs,pc,bo):void 0;uf=new M0(ha,pi,Mn,Ia,ja,ma,Go,Er,!1,rs),ek=4*vu.length;const bu=Yt.iconSizeData;let Nl=null;bu.kind==="source"?(Nl=[dc*_a.layout.get("icon-size").evaluate(Pa,{})],Nl[0]>Jc&&Ti(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):bu.kind==="composite"&&(Nl=[dc*Mr.compositeIconSizes[0].evaluate(Pa,{},dl),dc*Mr.compositeIconSizes[1].evaluate(Pa,{},dl)],(Nl[0]>Jc||Nl[1]>Jc)&&Ti(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Yt.addSymbols(Yt.icon,vu,Nl,ir,ka,Pa,o.az.none,pi,nh.lineStartIndex,nh.lineLength,-1,dl),Zy=Yt.icon.placedSymbolArray.length-1,pl&&(tk=4*pl.length,Yt.addSymbols(Yt.icon,pl,Nl,ir,ka,Pa,o.az.vertical,pi,nh.lineStartIndex,nh.lineLength,-1,dl),Ky=Yt.icon.placedSymbolArray.length-1)}const rk=Object.keys(Ji.horizontal);for(const rs of rk){const bo=Ji.horizontal[rs];if(!yu){ak=Na(bo.text);const pl=_a.layout.get("text-rotate").evaluate(Pa,{},dl);yu=new M0(ha,pi,Mn,Ia,ja,bo,ra,Ds,Zr,pl)}const vu=bo.positionedLines.length===1;if(ik+=qS(Yt,pi,bo,qr,_a,Zr,Pa,Rs,nh,Ji.vertical?o.az.horizontal:o.az.horizontalOnly,vu?rk:[rs],gc,Zy,Mr,dl),vu)break}Ji.vertical&&(nk+=qS(Yt,pi,Ji.vertical,qr,_a,Zr,Pa,Rs,nh,o.az.vertical,["vertical"],gc,Ky,Mr,dl));const _R=yu?yu.boxStartIndex:Yt.collisionBoxArray.length,xR=yu?yu.boxEndIndex:Yt.collisionBoxArray.length,yR=df?df.boxStartIndex:Yt.collisionBoxArray.length,vR=df?df.boxEndIndex:Yt.collisionBoxArray.length,bR=uf?uf.boxStartIndex:Yt.collisionBoxArray.length,wR=uf?uf.boxEndIndex:Yt.collisionBoxArray.length,SR=ff?ff.boxStartIndex:Yt.collisionBoxArray.length,kR=ff?ff.boxEndIndex:Yt.collisionBoxArray.length;let fl=-1;const P0=(rs,bo)=>rs&&rs.circleDiameter?Math.max(rs.circleDiameter,bo):bo;fl=P0(yu,fl),fl=P0(df,fl),fl=P0(uf,fl),fl=P0(ff,fl);const sk=fl>-1?1:0;sk&&(fl*=Jp/Cr),Yt.glyphOffsetArray.length>=af.MAX_GLYPHS&&Ti("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Pa.sortKey!==void 0&&Yt.addToSortKeyRanges(Yt.symbolInstances.length,Pa.sortKey);const CR=YS(_a,Pa,dl),[AR,TR]=(function(rs,bo){const vu=rs.length,pl=bo?.values;if(pl?.length>0)for(let bu=0;bu<pl.length;bu+=2){const Nl=pl[bu+1];rs.emplaceBack(o.aP[pl[bu]],Nl[0],Nl[1])}return[vu,rs.length]})(Yt.textAnchorOffsets,CR);Yt.symbolInstances.emplaceBack(pi.x,pi.y,gc.right>=0?gc.right:-1,gc.center>=0?gc.center:-1,gc.left>=0?gc.left:-1,gc.vertical||-1,Zy,Ky,ak,_R,xR,yR,vR,bR,wR,SR,kR,Mn,ik,nk,ek,tk,sk,0,ra,fl,AR,TR)})(u,ni,Kt,h,m,b,bt,u.layers[0],u.collisionBoxArray,l.index,l.sourceLayerIndex,u.index,ve,[Be,Be,Be,Be],wt,B,Se,Ue,xt,ce,l,C,U,Y,A)};if(Et==="line")for(const Kt of FS(l.geometry,0,0,vt,vt)){const ni=gu(Kt,ft),Yt=hR(ni,Ce,ot,h.vertical||ue,m,24,ze,u.overscaling,vt);for(const pi of Yt)ue&&gR(u,ue.text,Ut,pi)||ei(ni,pi)}else if(Et==="line-center"){for(const Kt of l.geometry)if(Kt.length>1){const ni=gu(Kt,ft),Yt=cR(ni,ot,h.vertical||ue,m,24,ze);Yt&&ei(ni,Yt)}}else if(l.type==="Polygon")for(const Kt of ol(l.geometry,0)){const ni=dR(Kt,16);ei(gu(Kt[0],ft,!0),new ih(ni.x,ni.y,0))}else if(l.type==="LineString")for(const Kt of l.geometry){const ni=gu(Kt,ft);ei(ni,new ih(ni[0].x,ni[0].y,0))}else if(l.type==="Point")for(const Kt of l.geometry)for(const ni of Kt)ei([ni],new ih(ni.x,ni.y,0))}function qS(u,l,h,m,b,C,A,D,B,U,Y,Q,ne,ae,ce){const ue=(function(ze,Se,Ce,Be,Ue,ot,wt,xt){const Et=Be.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,Ut=[];for(const It of Se.positionedLines)for(const bt of It.positionedGlyphs){if(!bt.rect)continue;const ft=bt.rect||{};let ei=4,Kt=!0,ni=1,Yt=0;const pi=(Ue||xt)&&bt.vertical,mn=bt.metrics.advance*bt.scale/2;if(xt&&Se.verticalizable&&(Yt=It.lineOffset/2-(bt.imageName?-(Cr-bt.metrics.width*bt.scale)/2:(bt.scale-1)*Cr)),bt.imageName){const Er=wt[bt.imageName];Kt=Er.sdf,ni=Er.pixelRatio,ei=1/ni}const Ji=Ue?[bt.x+mn,bt.y]:[0,0];let ma=Ue?[0,0]:[bt.x+mn+Ce[0],bt.y+Ce[1]-Yt],qr=[0,0];pi&&(qr=ma,ma=[0,0]);const tr=bt.metrics.isDoubleResolution?2:1,_a=(bt.metrics.left-ei)*bt.scale-mn+ma[0],ha=(-bt.metrics.top-ei)*bt.scale+ma[1],Mn=_a+ft.w/tr*bt.scale/ni,Ia=ha+ft.h/tr*bt.scale/ni,ja=new d(_a,ha),ra=new d(Mn,ha),Ds=new d(_a,Ia),Zr=new d(Mn,Ia);if(pi){const Er=new d(-mn,mn- -17),ka=-Math.PI/2,ir=12-mn,Pa=new d(22-ir,-(bt.imageName?ir:0)),Mr=new d(...qr);ja._rotateAround(ka,Er)._add(Pa)._add(Mr),ra._rotateAround(ka,Er)._add(Pa)._add(Mr),Ds._rotateAround(ka,Er)._add(Pa)._add(Mr),Zr._rotateAround(ka,Er)._add(Pa)._add(Mr)}if(Et){const Er=Math.sin(Et),ka=Math.cos(Et),ir=[ka,-Er,Er,ka];ja._matMult(ir),ra._matMult(ir),Ds._matMult(ir),Zr._matMult(ir)}const Rs=new d(0,0),Go=new d(0,0);Ut.push({tl:ja,tr:ra,bl:Ds,br:Zr,tex:ft,writingMode:Se.writingMode,glyphOffset:Ji,sectionIndex:bt.sectionIndex,isSDF:Kt,pixelOffsetTL:Rs,pixelOffsetBR:Go,minFontScaleX:0,minFontScaleY:0})}return Ut})(0,h,D,b,C,A,m,u.allowVerticalPlacement),pe=u.textSizeData;let ve=null;pe.kind==="source"?(ve=[dc*b.layout.get("text-size").evaluate(A,{})],ve[0]>Jc&&Ti(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):pe.kind==="composite"&&(ve=[dc*ae.compositeTextSizes[0].evaluate(A,{},ce),dc*ae.compositeTextSizes[1].evaluate(A,{},ce)],(ve[0]>Jc||ve[1]>Jc)&&Ti(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),u.addSymbols(u.text,ue,ve,D,C,A,U,l,B.lineStartIndex,B.lineLength,ne,ce);for(const ze of Y)Q[ze]=u.text.placedSymbolArray.length-1;return 4*ue.length}function ZS(u){for(const l in u)return u[l];return null}function gR(u,l,h,m){const b=u.compareText;if(l in b){const C=b[l];for(let A=C.length-1;A>=0;A--)if(m.dist(C[A])<h)return!0}else b[l]=[];return b[l].push(m),!1}const KS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Uy{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,m]=new Uint8Array(l,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const b=m>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);const C=KS[15&m];if(!C)throw new Error("Unrecognized array type.");const[A]=new Uint16Array(l,2,1),[D]=new Uint32Array(l,4,1);return new Uy(D,A,C,l)}constructor(l,h=64,m=Float64Array,b){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const C=KS.indexOf(this.ArrayType),A=2*l*this.ArrayType.BYTES_PER_ELEMENT,D=l*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-D%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${m}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+B,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+A+D+B),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+B,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=l)}add(l,h){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=h,m}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return Gy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,h,m,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:A,nodeSize:D}=this,B=[0,C.length-1,0],U=[];for(;B.length;){const Y=B.pop()||0,Q=B.pop()||0,ne=B.pop()||0;if(Q-ne<=D){for(let pe=ne;pe<=Q;pe++){const ve=A[2*pe],ze=A[2*pe+1];ve>=l&&ve<=m&&ze>=h&&ze<=b&&U.push(C[pe])}continue}const ae=ne+Q>>1,ce=A[2*ae],ue=A[2*ae+1];ce>=l&&ce<=m&&ue>=h&&ue<=b&&U.push(C[ae]),(Y===0?l<=ce:h<=ue)&&(B.push(ne),B.push(ae-1),B.push(1-Y)),(Y===0?m>=ce:b>=ue)&&(B.push(ae+1),B.push(Q),B.push(1-Y))}return U}within(l,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:C,nodeSize:A}=this,D=[0,b.length-1,0],B=[],U=m*m;for(;D.length;){const Y=D.pop()||0,Q=D.pop()||0,ne=D.pop()||0;if(Q-ne<=A){for(let pe=ne;pe<=Q;pe++)JS(C[2*pe],C[2*pe+1],l,h)<=U&&B.push(b[pe]);continue}const ae=ne+Q>>1,ce=C[2*ae],ue=C[2*ae+1];JS(ce,ue,l,h)<=U&&B.push(b[ae]),(Y===0?l-m<=ce:h-m<=ue)&&(D.push(ne),D.push(ae-1),D.push(1-Y)),(Y===0?l+m>=ce:h+m>=ue)&&(D.push(ae+1),D.push(Q),D.push(1-Y))}return B}}function Gy(u,l,h,m,b,C){if(b-m<=h)return;const A=m+b>>1;QS(u,l,A,m,b,C),Gy(u,l,h,m,A-1,1-C),Gy(u,l,h,A+1,b,1-C)}function QS(u,l,h,m,b,C){for(;b>m;){if(b-m>600){const U=b-m+1,Y=h-m+1,Q=Math.log(U),ne=.5*Math.exp(2*Q/3),ae=.5*Math.sqrt(Q*ne*(U-ne)/U)*(Y-U/2<0?-1:1);QS(u,l,h,Math.max(m,Math.floor(h-Y*ne/U+ae)),Math.min(b,Math.floor(h+(U-Y)*ne/U+ae)),C)}const A=l[2*h+C];let D=m,B=b;for(Kp(u,l,m,h),l[2*b+C]>A&&Kp(u,l,m,b);D<B;){for(Kp(u,l,D,B),D++,B--;l[2*D+C]<A;)D++;for(;l[2*B+C]>A;)B--}l[2*m+C]===A?Kp(u,l,m,B):(B++,Kp(u,l,B,b)),B<=h&&(m=B+1),h<=B&&(b=B-1)}}function Kp(u,l,h,m){Wy(u,h,m),Wy(l,2*h,2*m),Wy(l,2*h+1,2*m+1)}function Wy(u,l,h){const m=u[l];u[l]=u[h],u[h]=m}function JS(u,l,h,m){const b=u-h,C=l-m;return b*b+C*C}var $y;o.cH=void 0,($y=o.cH||(o.cH={})).create="create",$y.load="load",$y.fullLoad="fullLoad";let I0=null,Qp=[];const Xy=1e3/60,Yy="loadTime",qy="fullLoadTime",mR={mark(u){performance.mark(u)},frame(u){const l=u;I0!=null&&Qp.push(l-I0),I0=l},clearMetrics(){I0=null,Qp=[],performance.clearMeasures(Yy),performance.clearMeasures(qy);for(const u in o.cH)performance.clearMarks(o.cH[u])},getPerformanceMetrics(){performance.measure(Yy,o.cH.create,o.cH.load),performance.measure(qy,o.cH.create,o.cH.fullLoad);const u=performance.getEntriesByName(Yy)[0].duration,l=performance.getEntriesByName(qy)[0].duration,h=Qp.length,m=1/(Qp.reduce(((C,A)=>C+A),0)/h/1e3),b=Qp.filter((C=>C>Xy)).reduce(((C,A)=>C+(A-Xy)/Xy),0);return{loadTime:u,fullLoadTime:l,fps:m,percentDroppedFrames:b/(h+b)*100,totalFrames:h}}};o.$=N,o.A=K,o.B=Xc,o.C=Sr,o.D=hi,o.E=Oi,o.F=function([u,l,h]){return l+=90,l*=Math.PI/180,h*=Math.PI/180,{x:u*Math.cos(l)*Math.sin(h),y:u*Math.sin(l)*Math.sin(h),z:u*Math.cos(h)}},o.G=Gn,o.H=Wn,o.I=gy,o.J=Ym,o.K=function(u){if(st==null){const l=u.navigator?u.navigator.userAgent:null;st=!!u.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return st},o.L=class{constructor(u,l){this.target=u,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new PD((()=>this.process())),this.subscription=vr(this.target,"message",(h=>this.receive(h)),!1),this.globalScope=Bn(self)?u:window}registerMessageHandler(u,l){this.messageHandlers[u]=l}unregisterMessageHandler(u){delete this.messageHandlers[u]}sendAsync(u,l){return new Promise(((h,m)=>{const b=Math.round(1e18*Math.random()).toString(36).substring(0,10),C=l?vr(l.signal,"abort",(()=>{C?.unsubscribe(),delete this.resolveRejects[b];const B={id:b,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(B)}),LD):null;this.resolveRejects[b]={resolve:B=>{C?.unsubscribe(),h(B)},reject:B=>{C?.unsubscribe(),m(B)}};const A=[],D=Object.assign(Object.assign({},u),{id:b,sourceMapId:this.mapId,origin:location.origin,data:tu(u.data,A)});this.target.postMessage(D,{transfer:A})}))}receive(u){const l=u.data,h=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[h];const m=this.abortControllers[h];return delete this.abortControllers[h],void(m&&m.abort())}if(Bn(self)||l.mustQueue)return this.tasks[h]=l,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,l)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),l=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(u,l)}processTask(u,l){return r(this,void 0,void 0,(function*(){if(l.type==="<response>"){const b=this.resolveRejects[u];return delete this.resolveRejects[u],b?void(l.error?b.reject(iu(l.error)):b.resolve(iu(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=iu(l.data),m=new AbortController;this.abortControllers[u]=m;try{const b=yield this.messageHandlers[l.type](l.sourceMapId,h,m);this.completeTask(u,null,b)}catch(b){this.completeTask(u,b)}}))}completeTask(u,l,h){const m=[];delete this.abortControllers[u];const b={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?tu(l):null,data:tu(h,m)};this.target.postMessage(b,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.M=Qe,o.N=function(){var u=new K(16);return K!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},o.O=function(u,l,h){var m,b,C,A,D,B,U,Y,Q,ne,ae,ce,ue=h[0],pe=h[1],ve=h[2];return l===u?(u[12]=l[0]*ue+l[4]*pe+l[8]*ve+l[12],u[13]=l[1]*ue+l[5]*pe+l[9]*ve+l[13],u[14]=l[2]*ue+l[6]*pe+l[10]*ve+l[14],u[15]=l[3]*ue+l[7]*pe+l[11]*ve+l[15]):(b=l[1],C=l[2],A=l[3],D=l[4],B=l[5],U=l[6],Y=l[7],Q=l[8],ne=l[9],ae=l[10],ce=l[11],u[0]=m=l[0],u[1]=b,u[2]=C,u[3]=A,u[4]=D,u[5]=B,u[6]=U,u[7]=Y,u[8]=Q,u[9]=ne,u[10]=ae,u[11]=ce,u[12]=m*ue+D*pe+Q*ve+l[12],u[13]=b*ue+B*pe+ne*ve+l[13],u[14]=C*ue+U*pe+ae*ve+l[14],u[15]=A*ue+Y*pe+ce*ve+l[15]),u},o.P=d,o.Q=function(u,l,h){var m=h[0],b=h[1],C=h[2];return u[0]=l[0]*m,u[1]=l[1]*m,u[2]=l[2]*m,u[3]=l[3]*m,u[4]=l[4]*b,u[5]=l[5]*b,u[6]=l[6]*b,u[7]=l[7]*b,u[8]=l[8]*C,u[9]=l[9]*C,u[10]=l[10]*C,u[11]=l[11]*C,u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15],u},o.R=Ls,o.S=function(u,l,h){var m=l[0],b=l[1],C=l[2],A=l[3],D=l[4],B=l[5],U=l[6],Y=l[7],Q=l[8],ne=l[9],ae=l[10],ce=l[11],ue=l[12],pe=l[13],ve=l[14],ze=l[15],Se=h[0],Ce=h[1],Be=h[2],Ue=h[3];return u[0]=Se*m+Ce*D+Be*Q+Ue*ue,u[1]=Se*b+Ce*B+Be*ne+Ue*pe,u[2]=Se*C+Ce*U+Be*ae+Ue*ve,u[3]=Se*A+Ce*Y+Be*ce+Ue*ze,u[4]=(Se=h[4])*m+(Ce=h[5])*D+(Be=h[6])*Q+(Ue=h[7])*ue,u[5]=Se*b+Ce*B+Be*ne+Ue*pe,u[6]=Se*C+Ce*U+Be*ae+Ue*ve,u[7]=Se*A+Ce*Y+Be*ce+Ue*ze,u[8]=(Se=h[8])*m+(Ce=h[9])*D+(Be=h[10])*Q+(Ue=h[11])*ue,u[9]=Se*b+Ce*B+Be*ne+Ue*pe,u[10]=Se*C+Ce*U+Be*ae+Ue*ve,u[11]=Se*A+Ce*Y+Be*ce+Ue*ze,u[12]=(Se=h[12])*m+(Ce=h[13])*D+(Be=h[14])*Q+(Ue=h[15])*ue,u[13]=Se*b+Ce*B+Be*ne+Ue*pe,u[14]=Se*C+Ce*U+Be*ae+Ue*ve,u[15]=Se*A+Ce*Y+Be*ce+Ue*ze,u},o.T=sy,o.U=function(u,l){const h={};for(let m=0;m<l.length;m++){const b=l[m];b in u&&(h[b]=u[b])}return h},o.V=eh,o.W=ri,o.X=Z2,o.Y=q2,o.Z=je,o._=r,o.a=be,o.a$=ke,o.a0=$,o.a1=Qa,o.a2=yo,o.a3=Q2,o.a4=x0,o.a5=vt,o.a6=function(u,l,h){if(!u)return l||{};if(!l)return u||{};const m=iS(u),b=iS(l);(function(A,D){D.removeAll&&(A.add.clear(),A.update.clear(),A.remove.clear(),D.remove.clear());for(const B of D.remove)A.add.delete(B),A.update.delete(B);for(const[B,U]of D.update){const Y=A.update.get(B);Y&&(D.update.set(B,DD(Y,U)),A.update.delete(B))}})(m,b);const C={};if((m.removeAll||b.removeAll)&&(C.removeAll=!0),C.remove=new Set([...m.remove,...b.remove]),C.add=new Map([...m.add,...b.add]),C.update=new Map([...m.update,...b.update]),C.remove.size&&C.add.size)for(const A of C.add.keys())C.remove.delete(A);return(function(A){const D={};return A.removeAll&&(D.removeAll=A.removeAll),A.remove&&(D.remove=Array.from(A.remove)),A.add&&(D.add=Array.from(A.add.values())),A.update&&(D.update=Array.from(A.update.values())),D})(C)},o.a7=function(u,l){const h=new Map;if(u==null||u.type==null)return h;if(u.type==="Feature"){const m=ky(u,l);return m==null?void 0:(h.set(m,u),h)}if(u.type==="FeatureCollection"){const m=new Set;for(const b of u.features){const C=ky(b,l);if(C==null||m.has(C))return;m.add(C),h.set(C,b)}return h}},o.a8=function(u,l,h){var m,b;const C=[];if(l.removeAll)u.clear();else if(l.remove)for(const A of l.remove){const D=u.get(A);D&&(C.push(D.geometry),u.delete(A))}if(l.add)for(const A of l.add){const D=ky(A,h);if(D==null)continue;const B=u.get(D);B&&C.push(B.geometry),C.push(A.geometry),u.set(D,A)}if(l.update)for(const A of l.update){const D=u.get(A.id);if(!D)continue;const B=!!A.newGeometry,U=A.removeAllProperties||((m=A.removeProperties)===null||m===void 0?void 0:m.length)>0||((b=A.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0;if(!B&&!U)continue;C.push(D.geometry);const Y=Object.assign({},D);if(u.set(A.id,Y),B&&(C.push(A.newGeometry),Y.geometry=A.newGeometry),U){if(Y.properties=A.removeAllProperties?{}:Object.assign({},Y.properties||{}),A.removeProperties)for(const Q of A.removeProperties)delete Y.properties[Q];if(A.addOrUpdateProperties)for(const{key:Q,value:ne}of A.addOrUpdateProperties)Y.properties[Q]=ne}}return C},o.a9=Xp,o.aA=function(u,{uSize:l,uSizeT:h},{lowerSize:m,upperSize:b}){return u.kind==="source"?m/dc:u.kind==="composite"?Gn.number(m/dc,b/dc,h):l},o.aB=function(u,l){var h=l[0],m=l[1],b=l[2],C=l[3],A=l[4],D=l[5],B=l[6],U=l[7],Y=l[8],Q=l[9],ne=l[10],ae=l[11],ce=l[12],ue=l[13],pe=l[14],ve=l[15],ze=h*D-m*A,Se=h*B-b*A,Ce=h*U-C*A,Be=m*B-b*D,Ue=m*U-C*D,ot=b*U-C*B,wt=Y*ue-Q*ce,xt=Y*pe-ne*ce,Et=Y*ve-ae*ce,Ut=Q*pe-ne*ue,It=Q*ve-ae*ue,bt=ne*ve-ae*pe,ft=ze*bt-Se*It+Ce*Ut+Be*Et-Ue*xt+ot*wt;return ft?(u[0]=(D*bt-B*It+U*Ut)*(ft=1/ft),u[1]=(b*It-m*bt-C*Ut)*ft,u[2]=(ue*ot-pe*Ue+ve*Be)*ft,u[3]=(ne*Ue-Q*ot-ae*Be)*ft,u[4]=(B*Et-A*bt-U*xt)*ft,u[5]=(h*bt-b*Et+C*xt)*ft,u[6]=(pe*Ce-ce*ot-ve*Se)*ft,u[7]=(Y*ot-ne*Ce+ae*Se)*ft,u[8]=(A*It-D*Et+U*wt)*ft,u[9]=(m*Et-h*It-C*wt)*ft,u[10]=(ce*Ue-ue*Ce+ve*ze)*ft,u[11]=(Q*Ce-Y*Ue-ae*ze)*ft,u[12]=(D*xt-A*Ut-B*wt)*ft,u[13]=(h*Ut-m*xt+b*wt)*ft,u[14]=(ue*Se-ce*Be-pe*ze)*ft,u[15]=(Y*Be-Q*Se+ne*ze)*ft,u):null},o.aC=qe,o.aD=function(u){var l=u[0],h=u[1];return Math.sqrt(l*l+h*h)},o.aE=function(u){return u[0]=0,u[1]=0,u},o.aF=function(u,l,h){return u[0]=l[0]*h,u[1]=l[1]*h,u},o.aG=xy,o.aH=et,o.aI=function(u,l,h,m){const b=l.y-u.y,C=l.x-u.x,A=m.y-h.y,D=m.x-h.x,B=A*C-D*b;if(B===0)return null;const U=(D*(u.y-h.y)-A*(u.x-h.x))/B;return new d(u.x+U*C,u.y+U*b)},o.aJ=FS,o.aK=qd,o.aL=function(u){let l=1/0,h=1/0,m=-1/0,b=-1/0;for(const C of u)l=Math.min(l,C.x),h=Math.min(h,C.y),m=Math.max(m,C.x),b=Math.max(b,C.y);return[l,h,m,b]},o.aM=Cr,o.aN=He,o.aO=function(u,l,h,m,b=!1){if(!h[0]&&!h[1])return[0,0];const C=b?m==="map"?-u.bearingInRadians:0:m==="viewport"?u.bearingInRadians:0;if(C){const A=Math.sin(C),D=Math.cos(C);h=[h[0]*D-h[1]*A,h[0]*A+h[1]*D]}return[b?h[0]:He(l,h[0],u.zoom),b?h[1]:He(l,h[1],u.zoom)]},o.aQ=_y,o.aR=Hy,o.aS=my,o.aT=Uy,o.aU=Ba,o.aV=d0,o.aW=Te,o.aX=$t,o.aY=dt,o.aZ=un,o.a_=J2,o.aa=mu,o.ab=25,o.ac=Sy,o.ad=u=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((h=>{l.onloadstart=()=>{h(l)};for(const m of u){const b=window.document.createElement("source");pt(m)||(l.crossOrigin="Anonymous"),b.src=m,l.appendChild(b)}}))},o.ae=St,o.af=function(){return Pi++},o.ag=S,o.ah=af,o.ai=Zp,o.aj=$h,o.ak=Bl,o.al=aS,o.am=function(u){const l={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((h,m,b,C)=>{const A=b||C;return l[m]=!A||A.toLowerCase(),""})),l["max-age"]){const h=parseInt(l["max-age"],10);isNaN(h)?delete l["max-age"]:l["max-age"]=h}return l},o.an=Ct,o.ao=85.051129,o.ap=va,o.aq=function(u){return Math.pow(2,u)},o.ar=ee,o.as=K2,o.at=function(u){return Math.log(u)/Math.LN2},o.au=function(u){var l=u[0],h=u[1];return l*l+h*h},o.av=function(u){if(!u.length)return new Set;const l=Math.max(...u.map((B=>B.canonical.z)));let h=1/0,m=-1/0,b=1/0,C=-1/0;const A=[];for(const B of u){const{x:U,y:Y,z:Q}=B.canonical,ne=Math.pow(2,l-Q),ae=U*ne,ce=Y*ne;A.push({id:B,x:ae,y:ce}),ae<h&&(h=ae),ae>m&&(m=ae),ce<b&&(b=ce),ce>C&&(C=ce)}const D=new Set;for(const B of A)B.x!==h&&B.x!==m&&B.y!==b&&B.y!==C||D.add(B.id);return D},o.aw=function(u,l){const h=Math.abs(2*u.wrap)-+(u.wrap<0),m=Math.abs(2*l.wrap)-+(l.wrap<0);return u.overscaledZ-l.overscaledZ||m-h||l.canonical.y-u.canonical.y||l.canonical.x-u.canonical.x},o.ax=class{constructor(u,l){this.max=u,this.onRemove=l,this.reset()}reset(){for(const u in this.data)for(const l of this.data[u])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(u,l,h){const m=u.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const b={value:l,timeout:void 0};if(h!==void 0&&(b.timeout=setTimeout((()=>{this.remove(u,b)}),h)),this.data[m].push(b),this.order.push(m),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const l=this.data[u].shift();return l.timeout&&clearTimeout(l.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),l.value}getByKey(u){const l=this.data[u];return l?l[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,l){if(!this.has(u))return this;const h=u.wrapped().key,m=l===void 0?0:this.data[h].indexOf(l),b=this.data[h][m];return this.data[h].splice(m,1),b.timeout&&clearTimeout(b.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(b.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(u){const l=[];for(const h in this.data)for(const m of this.data[h])u(m.value)||l.push(m);for(const h of l)this.remove(h.value.tileID,h)}},o.ay=function(u,l){let h=0,m=0;if(u.kind==="constant")m=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:b,minZoom:C,maxZoom:A}=u,D=b?Ct(zr.interpolationFactor(b,l,C,A),0,1):0;u.kind==="camera"?m=Gn.number(u.minSize,u.maxSize,D):h=D}return{uSizeT:h,uSize:m}},o.b=ji,o.b$=hc,o.b0=de,o.b1=function(u){var l=new K(3);return l[0]=u[0],l[1]=u[1],l[2]=u[2],l},o.b2=function(u,l,h){return u[0]=l[0]-h[0],u[1]=l[1]-h[1],u[2]=l[2]-h[2],u},o.b3=function(u,l){var h=l[0],m=l[1],b=l[2],C=h*h+m*m+b*b;return C>0&&(C=1/Math.sqrt(C)),u[0]=l[0]*C,u[1]=l[1]*C,u[2]=l[2]*C,u},o.b4=De,o.b5=function(u,l){return u[0]*l[0]+u[1]*l[1]+u[2]*l[2]},o.b6=function(u,l,h){return u[0]=l[0]*h[0],u[1]=l[1]*h[1],u[2]=l[2]*h[2],u[3]=l[3]*h[3],u},o.b7=te,o.b8=function(u,l,h){const m=l[0]*h[0]+l[1]*h[1]+l[2]*h[2];return m===0?null:(-(u[0]*h[0]+u[1]*h[1]+u[2]*h[2])-h[3])/m},o.b9=$e,o.bA=function(u,l,h,m){return u[0]=l[0]+h[0]*m,u[1]=l[1]+h[1]*m,u[2]=l[2]+h[2]*m,u},o.bB=at,o.bC=function(u,l,h){var m=h[0],b=h[1],C=h[2],A=h[3],D=l[0],B=l[1],U=l[2],Y=b*U-C*B,Q=C*D-m*U,ne=m*B-b*D;return u[0]=D+A*(Y+=Y)+b*(ne+=ne)-C*(Q+=Q),u[1]=B+A*Q+C*Y-m*ne,u[2]=U+A*ne+m*Q-b*Y,u},o.bD=function(u,l,h){const m=(function(B){var U=B[3],Y=B[4],Q=B[5],ne=B[6],ae=B[7],ce=B[8];return B[0]*(ce*Y-Q*ae)+B[1]*(-ce*U+Q*ne)+B[2]*(ae*U-Y*ne)})([u[0],u[1],u[2],l[0],l[1],l[2],h[0],h[1],h[2]]);if(m===0)return null;const b=De([],[l[0],l[1],l[2]],[h[0],h[1],h[2]]),C=De([],[h[0],h[1],h[2]],[u[0],u[1],u[2]]),A=De([],[u[0],u[1],u[2]],[l[0],l[1],l[2]]),D=ke([],b,-u[3]);return de(D,D,ke([],C,-l[3])),de(D,D,ke([],A,-h[3])),ke(D,D,1/m),D},o.bE=wy,o.bF=function(){return new Float64Array(4)},o.bG=function(u,l,h,m){var b=[],C=[];return b[0]=l[0]-h[0],b[1]=l[1]-h[1],b[2]=l[2]-h[2],C[0]=b[0]*Math.cos(m)-b[1]*Math.sin(m),C[1]=b[0]*Math.sin(m)+b[1]*Math.cos(m),C[2]=b[2],u[0]=C[0]+h[0],u[1]=C[1]+h[1],u[2]=C[2]+h[2],u},o.bH=function(u,l,h,m){var b=[],C=[];return b[0]=l[0]-h[0],b[1]=l[1]-h[1],b[2]=l[2]-h[2],C[0]=b[0],C[1]=b[1]*Math.cos(m)-b[2]*Math.sin(m),C[2]=b[1]*Math.sin(m)+b[2]*Math.cos(m),u[0]=C[0]+h[0],u[1]=C[1]+h[1],u[2]=C[2]+h[2],u},o.bI=function(u,l,h,m){var b=[],C=[];return b[0]=l[0]-h[0],b[1]=l[1]-h[1],b[2]=l[2]-h[2],C[0]=b[2]*Math.sin(m)+b[0]*Math.cos(m),C[1]=b[1],C[2]=b[2]*Math.cos(m)-b[0]*Math.sin(m),u[0]=C[0]+h[0],u[1]=C[1]+h[1],u[2]=C[2]+h[2],u},o.bJ=function(u,l,h){var m=Math.sin(h),b=Math.cos(h),C=l[0],A=l[1],D=l[2],B=l[3],U=l[8],Y=l[9],Q=l[10],ne=l[11];return l!==u&&(u[4]=l[4],u[5]=l[5],u[6]=l[6],u[7]=l[7],u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15]),u[0]=C*b-U*m,u[1]=A*b-Y*m,u[2]=D*b-Q*m,u[3]=B*b-ne*m,u[8]=C*m+U*b,u[9]=A*m+Y*b,u[10]=D*m+Q*b,u[11]=B*m+ne*b,u},o.bK=function(u,l){const h=Nt(u,360),m=Nt(l,360),b=m-h,C=m>h?b-360:b+360;return Math.abs(b)<Math.abs(C)?b:C},o.bL=function(u){return u[0]=0,u[1]=0,u[2]=0,u},o.bM=function(u,l,h,m){const b=Math.sqrt(u*u+l*l),C=Math.sqrt(h*h+m*m);u/=b,l/=b,h/=C,m/=C;const A=Math.acos(u*h+l*m);return-l*h+u*m>0?A:-A},o.bN=function(u,l){const h=Nt(u,2*Math.PI),m=Nt(l,2*Math.PI);return Math.min(Math.abs(h-m),Math.abs(h-m+2*Math.PI),Math.abs(h-m-2*Math.PI))},o.bO=function(){const u={},l=rt.$version;for(const h in rt.$root){const m=rt.$root[h];if(m.required){let b=null;b=h==="version"?l:m.type==="array"?[]:{},b!=null&&(u[h]=b)}}return u},o.bP=nt,o.bQ=vp,o.bR=function u(l,h){if(Array.isArray(l)){if(!Array.isArray(h)||l.length!==h.length)return!1;for(let m=0;m<l.length;m++)if(!u(l[m],h[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&h!==null){if(typeof h!="object"||Object.keys(l).length!==Object.keys(h).length)return!1;for(const m in l)if(!u(l[m],h[m]))return!1;return!0}return l===h},o.bS=function(u){u=u.slice();const l=Object.create(null);for(let h=0;h<u.length;h++)l[u[h].id]=u[h];for(let h=0;h<u.length;h++)"ref"in u[h]&&(u[h]=pn(u[h],l[u[h].ref]));return u},o.bT=function(u,l){if(u.type==="custom")return new ID(u,l);switch(u.type){case"background":return new MD(u,l);case"circle":return new fL(u,l);case"color-relief":return new yL(u,l);case"fill":return new RL(u,l);case"fill-extrusion":return new $L(u,l);case"heatmap":return new gL(u,l);case"hillshade":return new _L(u,l);case"line":return new JL(u,l);case"raster":return new Kx(u,l);case"symbol":return new _0(u,l)}},o.bU=u=>u.type==="raster",o.bV=en,o.bW=function(u,l){if(!u)return[{command:"setStyle",args:[l]}];let h=[];try{if(!yi(u.version,l.version))return[{command:"setStyle",args:[l]}];yi(u.center,l.center)||h.push({command:"setCenter",args:[l.center]}),yi(u.state,l.state)||h.push({command:"setGlobalState",args:[l.state]}),yi(u.centerAltitude,l.centerAltitude)||h.push({command:"setCenterAltitude",args:[l.centerAltitude]}),yi(u.zoom,l.zoom)||h.push({command:"setZoom",args:[l.zoom]}),yi(u.bearing,l.bearing)||h.push({command:"setBearing",args:[l.bearing]}),yi(u.pitch,l.pitch)||h.push({command:"setPitch",args:[l.pitch]}),yi(u.roll,l.roll)||h.push({command:"setRoll",args:[l.roll]}),yi(u.sprite,l.sprite)||h.push({command:"setSprite",args:[l.sprite]}),yi(u.glyphs,l.glyphs)||h.push({command:"setGlyphs",args:[l.glyphs]}),yi(u.transition,l.transition)||h.push({command:"setTransition",args:[l.transition]}),yi(u.light,l.light)||h.push({command:"setLight",args:[l.light]}),yi(u.terrain,l.terrain)||h.push({command:"setTerrain",args:[l.terrain]}),yi(u.sky,l.sky)||h.push({command:"setSky",args:[l.sky]}),yi(u.projection,l.projection)||h.push({command:"setProjection",args:[l.projection]});const m={},b=[];(function(A,D,B,U){let Y;for(Y in D=D||{},A=A||{})Object.prototype.hasOwnProperty.call(A,Y)&&(Object.prototype.hasOwnProperty.call(D,Y)||Jt(Y,B,U));for(Y in D)Object.prototype.hasOwnProperty.call(D,Y)&&(Object.prototype.hasOwnProperty.call(A,Y)?yi(A[Y],D[Y])||(A[Y].type==="geojson"&&D[Y].type==="geojson"&&Rt(A,D,Y)?zi(B,{command:"setGeoJSONSourceData",args:[Y,D[Y].data]}):fi(Y,D,B,U)):di(Y,D,B))})(u.sources,l.sources,b,m);const C=[];u.layers&&u.layers.forEach((A=>{"source"in A&&m[A.source]?h.push({command:"removeLayer",args:[A.id]}):C.push(A)})),h=h.concat(b),(function(A,D,B){D=D||[];const U=(A=A||[]).map(bi),Y=D.map(bi),Q=A.reduce(_i,{}),ne=D.reduce(_i,{}),ae=U.slice(),ce=Object.create(null);let ue,pe,ve,ze,Se;for(let Ce=0,Be=0;Ce<U.length;Ce++)ue=U[Ce],Object.prototype.hasOwnProperty.call(ne,ue)?Be++:(zi(B,{command:"removeLayer",args:[ue]}),ae.splice(ae.indexOf(ue,Be),1));for(let Ce=0,Be=0;Ce<Y.length;Ce++)ue=Y[Y.length-1-Ce],ae[ae.length-1-Ce]!==ue&&(Object.prototype.hasOwnProperty.call(Q,ue)?(zi(B,{command:"removeLayer",args:[ue]}),ae.splice(ae.lastIndexOf(ue,ae.length-Be),1)):Be++,ze=ae[ae.length-Ce],zi(B,{command:"addLayer",args:[ne[ue],ze]}),ae.splice(ae.length-Ce,0,ue),ce[ue]=!0);for(let Ce=0;Ce<Y.length;Ce++)if(ue=Y[Ce],pe=Q[ue],ve=ne[ue],!ce[ue]&&!yi(pe,ve))if(yi(pe.source,ve.source)&&yi(pe["source-layer"],ve["source-layer"])&&yi(pe.type,ve.type)){for(Se in oi(pe.layout,ve.layout,B,ue,null,"setLayoutProperty"),oi(pe.paint,ve.paint,B,ue,null,"setPaintProperty"),yi(pe.filter,ve.filter)||zi(B,{command:"setFilter",args:[ue,ve.filter]}),yi(pe.minzoom,ve.minzoom)&&yi(pe.maxzoom,ve.maxzoom)||zi(B,{command:"setLayerZoomRange",args:[ue,ve.minzoom,ve.maxzoom]}),pe)Object.prototype.hasOwnProperty.call(pe,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?oi(pe[Se],ve[Se],B,ue,Se.slice(6),"setPaintProperty"):yi(pe[Se],ve[Se])||zi(B,{command:"setLayerProperty",args:[ue,Se,ve[Se]]}));for(Se in ve)Object.prototype.hasOwnProperty.call(ve,Se)&&!Object.prototype.hasOwnProperty.call(pe,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?oi(pe[Se],ve[Se],B,ue,Se.slice(6),"setPaintProperty"):yi(pe[Se],ve[Se])||zi(B,{command:"setLayerProperty",args:[ue,Se,ve[Se]]}))}else zi(B,{command:"removeLayer",args:[ue]}),ze=ae[ae.lastIndexOf(ue)+1],zi(B,{command:"addLayer",args:[ve,ze]})})(C,l.layers,h)}catch(m){console.warn("Unable to compute style diff:",m),h=[{command:"setStyle",args:[l]}]}return h},o.bX=function(u){const l=[],h=u.id;return h===void 0&&l.push({message:`layers.${h}: missing required property "id"`}),u.render===void 0&&l.push({message:`layers.${h}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&l.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),l},o.bY=Fi,o.bZ=Li,o.b_=class extends ps{constructor(u,l){super(u,l),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},o.ba=function(u,l,h){return u[0]=l[0]*h,u[1]=l[1]*h,u[2]=l[2]*h,u[3]=l[3]*h,u},o.bb=function(u,l){return u[0]*l[0]+u[1]*l[1]+u[2]*l[2]+u[3]},o.bc=tS,o.bd=rf,o.be=function(u,l,h,m,b){var C=1/Math.tan(l/2);if(u[0]=C/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=C,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,b!=null&&b!==1/0){var A=1/(m-b);u[10]=(b+m)*A,u[14]=2*b*m*A}else u[10]=-1,u[14]=-2*m;return u},o.bf=function(u){var l=new K(16);return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=u[6],l[7]=u[7],l[8]=u[8],l[9]=u[9],l[10]=u[10],l[11]=u[11],l[12]=u[12],l[13]=u[13],l[14]=u[14],l[15]=u[15],l},o.bg=function(u,l,h){var m=Math.sin(h),b=Math.cos(h),C=l[0],A=l[1],D=l[2],B=l[3],U=l[4],Y=l[5],Q=l[6],ne=l[7];return l!==u&&(u[8]=l[8],u[9]=l[9],u[10]=l[10],u[11]=l[11],u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15]),u[0]=C*b+U*m,u[1]=A*b+Y*m,u[2]=D*b+Q*m,u[3]=B*b+ne*m,u[4]=U*b-C*m,u[5]=Y*b-A*m,u[6]=Q*b-D*m,u[7]=ne*b-B*m,u},o.bh=function(u,l,h){var m=Math.sin(h),b=Math.cos(h),C=l[4],A=l[5],D=l[6],B=l[7],U=l[8],Y=l[9],Q=l[10],ne=l[11];return l!==u&&(u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15]),u[4]=C*b+U*m,u[5]=A*b+Y*m,u[6]=D*b+Q*m,u[7]=B*b+ne*m,u[8]=U*b-C*m,u[9]=Y*b-A*m,u[10]=Q*b-D*m,u[11]=ne*b-B*m,u},o.bi=function(){const u=new Float32Array(16);return ee(u),u},o.bj=function(){const u=new Float64Array(16);return ee(u),u},o.bk=function(){return new Float64Array(16)},o.bl=function(u,l,h){const m=new Float64Array(4);return at(m,u,l-90,h),m},o.bm=function(u,l,h,m){var b,C,A,D,B,U=l[0],Y=l[1],Q=l[2],ne=l[3],ae=h[0],ce=h[1],ue=h[2],pe=h[3];return(C=U*ae+Y*ce+Q*ue+ne*pe)<0&&(C=-C,ae=-ae,ce=-ce,ue=-ue,pe=-pe),1-C>X?(b=Math.acos(C),A=Math.sin(b),D=Math.sin((1-m)*b)/A,B=Math.sin(m*b)/A):(D=1-m,B=m),u[0]=D*U+B*ae,u[1]=D*Y+B*ce,u[2]=D*Q+B*ue,u[3]=D*ne+B*pe,u},o.bn=function(u){const l=new Float64Array(9);(function(C,A){var D=A[0],B=A[1],U=A[2],Y=A[3],Q=D+D,ne=B+B,ae=U+U,ce=D*Q,ue=B*Q,pe=B*ne,ve=U*Q,ze=U*ne,Se=U*ae,Ce=Y*Q,Be=Y*ne,Ue=Y*ae;C[0]=1-pe-Se,C[3]=ue-Ue,C[6]=ve+Be,C[1]=ue+Ue,C[4]=1-ce-Se,C[7]=ze-Ce,C[2]=ve-Be,C[5]=ze+Ce,C[8]=1-ce-pe})(l,u);const h=un(-Math.asin(Ct(l[2],-1,1)));let m,b;return Math.hypot(l[5],l[8])<.001?(m=0,b=-un(Math.atan2(l[3],l[4]))):(m=un(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),b=un(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:m,pitch:h+90,bearing:b}},o.bo=function(u,l){return u.roll==l.roll&&u.pitch==l.pitch&&u.bearing==l.bearing},o.bp=Ui,o.bq=cc,o.br=ef,o.bs=Vp,o.bt=Jd,o.bu=Qt,o.bv=Ai,o.bw=hr,o.bx=function(u,l,h,m,b){return Qt(m,b,Ct((u-l)/(h-l),0,1))},o.by=Nt,o.bz=function(){return new Float64Array(3)},o.c=We,o.c$=function(u,l,h,m,b){return r(this,void 0,void 0,(function*(){if($())try{return yield Qa(u,l,h,m,b)}catch{}return(function(C,A,D,B,U){const Y=C.width,Q=C.height;Gt&&la||(Gt=new OffscreenCanvas(Y,Q),la=Gt.getContext("2d",{willReadFrequently:!0})),Gt.width=Y,Gt.height=Q,la.drawImage(C,0,0,Y,Q);const ne=la.getImageData(A,D,B,U);return la.clearRect(0,0,Y,Q),ne.data})(u,l,h,m,b)}))},o.c0=class extends ps{constructor(u,l){super(u,l),this.current=Ks}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let l=1;l<16;l++)if(u[l]!==this.current[l]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},o.c1=fu,o.c2=class extends ps{constructor(u,l){super(u,l),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},o.c3=class extends ps{constructor(u,l){super(u,l),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},o.c4=ie,o.c5=function(u,l){var h=Math.sin(l),m=Math.cos(l);return u[0]=m,u[1]=h,u[2]=0,u[3]=-h,u[4]=m,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},o.c6=function(u,l,h){var m=l[0],b=l[1],C=l[2];return u[0]=m*h[0]+b*h[3]+C*h[6],u[1]=m*h[1]+b*h[4]+C*h[7],u[2]=m*h[2]+b*h[5]+C*h[8],u},o.c7=function(u,l,h,m,b,C,A){var D=1/(l-h),B=1/(m-b),U=1/(C-A);return u[0]=-2*D,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*B,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*U,u[11]=0,u[12]=(l+h)*D,u[13]=(b+m)*B,u[14]=(A+C)*U,u[15]=1,u},o.c8=class extends ps{constructor(u,l){super(u,l),this.current=new Array}set(u){if(u!=this.current){this.current=u;const l=new Float32Array(4*u.length);for(let h=0;h<u.length;h++)l[4*h]=u[h].r,l[4*h+1]=u[h].g,l[4*h+2]=u[h].b,l[4*h+3]=u[h].a;this.gl.uniform4fv(this.location,l)}}},o.c9=class extends ps{constructor(u,l){super(u,l),this.current=new Array}set(u){if(u!=this.current){this.current=u;const l=new Float32Array(u);this.gl.uniform1fv(this.location,l)}}},o.cA=function(u,l){return tt[l]&&"touches"in u},o.cB=function(u){return tt[u]||_e[u]},o.cC=function(u,l,h){var m=l[0],b=l[1];return u[0]=h[0]*m+h[4]*b+h[12],u[1]=h[1]*m+h[5]*b+h[13],u},o.cD=function(u,l){const{x:h,y:m}=Xp.fromLngLat(l);return!(u<0||u>25||m<0||m>=1||h<0||h>=1)},o.cE=function(u,l){return u[0]=l[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=l[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=l[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},o.cF=class extends Hd{},o.cG=mR,o.cI=Pe,o.cJ=function(u,l){We.REGISTERED_PROTOCOLS[u]=l},o.cK=function(u){delete We.REGISTERED_PROTOCOLS[u]},o.cL=function(u,l){const h={};for(let b=0;b<u.length;b++){const C=l&&l[u[b].id]||Fm(u[b]);l&&(l[u[b].id]=C);let A=h[C];A||(A=h[C]=[]),A.push(u[b])}const m=[];for(const b in h)m.push(h[b]);return m},o.cM=ti,o.cN=nS,o.cO=OS,o.cP=B2,o.cQ=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=vt/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const l=u.bucket.layers[0],h=l.layout,m=l._unevaluatedLayout._values,b={layoutIconSize:m["icon-size"].possiblyEvaluate(new Wn(u.bucket.zoom+1),u.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Wn(u.bucket.zoom+1),u.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Wn(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:U,maxZoom:Y}=u.bucket.textSizeData;b.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Wn(U),u.canonical),m["text-size"].possiblyEvaluate(new Wn(Y),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:U,maxZoom:Y}=u.bucket.iconSizeData;b.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Wn(U),u.canonical),m["icon-size"].possiblyEvaluate(new Wn(Y),u.canonical)]}const C=h.get("text-line-height")*Cr,A=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",D=h.get("text-keep-upright"),B=h.get("text-size");for(const U of u.bucket.features){const Y=h.get("text-font").evaluate(U,{},u.canonical).join(","),Q=B.evaluate(U,{},u.canonical),ne=b.layoutTextSize.evaluate(U,{},u.canonical),ae=b.layoutIconSize.evaluate(U,{},u.canonical),ce={horizontal:{},vertical:void 0},ue=U.text;let pe,ve=[0,0];if(ue){const Ce=ue.toString(),Be=h.get("text-letter-spacing").evaluate(U,{},u.canonical)*Cr,Ue=qx(Ce)?Be:0,ot=h.get("text-anchor").evaluate(U,{},u.canonical),wt=YS(l,U,u.canonical);if(!wt){const It=h.get("text-radial-offset").evaluate(U,{},u.canonical);ve=It?XS(ot,[It*Cr,Vy]):h.get("text-offset").evaluate(U,{},u.canonical).map((bt=>bt*Cr))}let xt=A?"center":h.get("text-justify").evaluate(U,{},u.canonical);const Et=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(U,{},u.canonical)*Cr:1/0,Ut=()=>{u.bucket.allowVerticalPlacement&&Zc(Ce)&&(ce.vertical=g0(ue,u.glyphMap,u.glyphPositions,u.imagePositions,Y,Et,C,ot,"left",Ue,ve,o.az.vertical,!0,ne,Q))};if(!A&&wt){const It=new Set;if(xt==="auto")for(let ft=0;ft<wt.values.length;ft+=2)It.add(Hy(wt.values[ft]));else It.add(xt);let bt=!1;for(const ft of It)if(!ce.horizontal[ft])if(bt)ce.horizontal[ft]=ce.horizontal[0];else{const ei=g0(ue,u.glyphMap,u.glyphPositions,u.imagePositions,Y,Et,C,"center",ft,Ue,ve,o.az.horizontal,!1,ne,Q);ei&&(ce.horizontal[ft]=ei,bt=ei.positionedLines.length===1)}Ut()}else{xt==="auto"&&(xt=Hy(ot));const It=g0(ue,u.glyphMap,u.glyphPositions,u.imagePositions,Y,Et,C,ot,xt,Ue,ve,o.az.horizontal,!1,ne,Q);It&&(ce.horizontal[xt]=It),Ut(),Zc(Ce)&&A&&D&&(ce.vertical=g0(ue,u.glyphMap,u.glyphPositions,u.imagePositions,Y,Et,C,ot,xt,Ue,ve,o.az.vertical,!1,ne,Q))}}let ze=!1;if(U.icon&&U.icon.name){const Ce=u.imageMap[U.icon.name];Ce&&(pe=CD(u.imagePositions[U.icon.name],h.get("icon-offset").evaluate(U,{},u.canonical),h.get("icon-anchor").evaluate(U,{},u.canonical)),ze=!!Ce.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=ze:u.bucket.sdfIcons!==ze&&Ti("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==u.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const Se=ZS(ce.horizontal)||ce.vertical;u.bucket.iconsInText=!!Se&&Se.iconsInText,(Se||pe)&&pR(u.bucket,U,ce,pe,u.imageMap,b,ne,ae,ve,ze,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},o.cR=hy,o.cS=dy,o.cT=fy,o.cU=function(u){const l=new p0;return(function(h,m){for(const b in h.layers)m.writeMessage(3,eR,h.layers[b])})(u,l),l.finish()},o.cV=function(u,l,h,m,b,C){let A=BS(u,l,h,b,0);return A=BS(A,l,m,C,1),A},o.cW=class{constructor(u){this.maxEntries=u,this.map=new Map}get(u){const l=this.map.get(u);return l!==void 0&&(this.map.delete(u),this.map.set(u,l)),l}set(u,l){if(this.map.has(u))this.map.delete(u);else if(this.map.size>=this.maxEntries){const h=this.map.keys().next().value;this.map.delete(h)}this.map.set(u,l)}clear(){this.map.clear()}},o.cX=v2,o.cY=p0,o.cZ=DS,o.c_=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},o.ca=class extends oc{},o.cb=nD,o.cc=class extends du{},o.cd=ry,o.ce=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},o.cf=r2,o.cg=function(u,l,h){var m=l[0],b=l[1],C=l[2],A=h[3]*m+h[7]*b+h[11]*C+h[15];return u[0]=(h[0]*m+h[4]*b+h[8]*C+h[12])/(A=A||1),u[1]=(h[1]*m+h[5]*b+h[9]*C+h[13])/A,u[2]=(h[2]*m+h[6]*b+h[10]*C+h[14])/A,u},o.ch=class extends Tp{},o.ci=class extends c{},o.cj=function(u,l){return u[0]===l[0]&&u[1]===l[1]&&u[2]===l[2]&&u[3]===l[3]&&u[4]===l[4]&&u[5]===l[5]&&u[6]===l[6]&&u[7]===l[7]&&u[8]===l[8]&&u[9]===l[9]&&u[10]===l[10]&&u[11]===l[11]&&u[12]===l[12]&&u[13]===l[13]&&u[14]===l[14]&&u[15]===l[15]},o.ck=function(u,l){var h=u[0],m=u[1],b=u[2],C=u[3],A=u[4],D=u[5],B=u[6],U=u[7],Y=u[8],Q=u[9],ne=u[10],ae=u[11],ce=u[12],ue=u[13],pe=u[14],ve=u[15],ze=l[0],Se=l[1],Ce=l[2],Be=l[3],Ue=l[4],ot=l[5],wt=l[6],xt=l[7],Et=l[8],Ut=l[9],It=l[10],bt=l[11],ft=l[12],ei=l[13],Kt=l[14],ni=l[15];return Math.abs(h-ze)<=X*Math.max(1,Math.abs(h),Math.abs(ze))&&Math.abs(m-Se)<=X*Math.max(1,Math.abs(m),Math.abs(Se))&&Math.abs(b-Ce)<=X*Math.max(1,Math.abs(b),Math.abs(Ce))&&Math.abs(C-Be)<=X*Math.max(1,Math.abs(C),Math.abs(Be))&&Math.abs(A-Ue)<=X*Math.max(1,Math.abs(A),Math.abs(Ue))&&Math.abs(D-ot)<=X*Math.max(1,Math.abs(D),Math.abs(ot))&&Math.abs(B-wt)<=X*Math.max(1,Math.abs(B),Math.abs(wt))&&Math.abs(U-xt)<=X*Math.max(1,Math.abs(U),Math.abs(xt))&&Math.abs(Y-Et)<=X*Math.max(1,Math.abs(Y),Math.abs(Et))&&Math.abs(Q-Ut)<=X*Math.max(1,Math.abs(Q),Math.abs(Ut))&&Math.abs(ne-It)<=X*Math.max(1,Math.abs(ne),Math.abs(It))&&Math.abs(ae-bt)<=X*Math.max(1,Math.abs(ae),Math.abs(bt))&&Math.abs(ce-ft)<=X*Math.max(1,Math.abs(ce),Math.abs(ft))&&Math.abs(ue-ei)<=X*Math.max(1,Math.abs(ue),Math.abs(ei))&&Math.abs(pe-Kt)<=X*Math.max(1,Math.abs(pe),Math.abs(Kt))&&Math.abs(ve-ni)<=X*Math.max(1,Math.abs(ve),Math.abs(ni))},o.cl=function(u,l){return u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=l[6],u[7]=l[7],u[8]=l[8],u[9]=l[9],u[10]=l[10],u[11]=l[11],u[12]=l[12],u[13]=l[13],u[14]=l[14],u[15]=l[15],u},o.cm=u=>u.type==="symbol",o.cn=u=>u.type==="circle",o.co=u=>u.type==="heatmap",o.cp=u=>u.type==="line",o.cq=u=>u.type==="fill",o.cr=u=>u.type==="fill-extrusion",o.cs=u=>u.type==="hillshade",o.ct=u=>u.type==="color-relief",o.cu=u=>u.type==="background",o.cv=u=>u.type==="custom",o.cw=jt,o.cx=function(u,l,h){const m=kt(l.x-h.x,l.y-h.y),b=kt(u.x-h.x,u.y-h.y),C=Math.atan2(m[0]*b[1]-m[1]*b[0],(function(A,D){return A[0]*D[0]+A[1]*D[1]})(m,b));return un(C)},o.cy=ui,o.cz=function(u,l){return _e[l]&&(u instanceof MouseEvent||u instanceof WheelEvent)},o.d=pt,o.d0=l2,o.d1=g,o.d2=class{constructor(u,l){this.layers={[Zp]:this},this.name=Zp,this.version=l?l.version:1,this.extent=l?l.extent:4096,this.length=u.length,this.features=u}feature(u){return new JD(this.features[u],this.extent)}},o.d3=Wh,o.d4=Rl,o.e=Zt,o.f=u=>r(void 0,void 0,void 0,(function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(l)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),o.g=it,o.h=u=>new Promise(((l,h)=>{const m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame((()=>{m.src=Bi}))},m.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const b=new Blob([new Uint8Array(u)],{type:"image/png"});m.src=u.byteLength?URL.createObjectURL(b):Bi})),o.i=Bn,o.j=(u,l)=>mt(Zt(u,{type:"json"}),l),o.k=si,o.l=wi,o.m=mt,o.n=(u,l)=>mt(Zt(u,{type:"arrayBuffer"}),l),o.o=function(u){return new p0(u).readFields(_D,[])},o.p=F2,o.q=function(u){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(u))},o.r=zp,o.s=vr,o.t=as,o.u=rt,o.v=Jh,o.w=Ti,o.x=Cp,o.y=eu,o.z=au})),n("worker",["./shared"],(function(o){class r{constructor(_e,xe){this.keyCache={},_e&&this.replace(_e,xe)}replace(_e,xe){this._layerConfigs={},this._layers={},this.update(_e,[],xe)}update(_e,xe,be){for(const We of _e){this._layerConfigs[We.id]=We;const it=this._layers[We.id]=o.bT(We,be);it._featureFilter=o.aj(it.filter,be),this.keyCache[We.id]&&delete this.keyCache[We.id]}for(const We of xe)delete this.keyCache[We],delete this._layerConfigs[We],delete this._layers[We];this.familiesBySource={};const je=o.cL(Object.values(this._layerConfigs),this.keyCache);for(const We of je){const it=We.map((Vt=>this._layers[Vt.id])),Qe=it[0];if(Qe.isHidden())continue;const Pe=Qe.source||"";let nt=this.familiesBySource[Pe];nt||(nt=this.familiesBySource[Pe]={});const mt=Qe.sourceLayer||o.ai;let pt=nt[mt];pt||(pt=nt[mt]=[]),pt.push(it)}}}class d{constructor(_e){const xe={},be=[];for(const Qe in _e){const Pe=_e[Qe],nt=xe[Qe]={};for(const mt in Pe){const pt=Pe[+mt];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;const Vt={x:0,y:0,w:pt.bitmap.width+2,h:pt.bitmap.height+2};be.push(Vt),nt[mt]={rect:Vt,metrics:pt.metrics}}}const{w:je,h:We}=o.p(be),it=new o.r({width:je||1,height:We||1});for(const Qe in _e){const Pe=_e[Qe];for(const nt in Pe){const mt=Pe[+nt];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const pt=xe[Qe][nt].rect;o.r.copy(mt.bitmap,it,{x:0,y:0},{x:pt.x+1,y:pt.y+1},mt.bitmap)}}this.image=it,this.positions=xe}}o.cM("GlyphAtlas",d);class g{constructor(_e){this.tileID=new o.a2(_e.tileID.overscaledZ,_e.tileID.wrap,_e.tileID.canonical.z,_e.tileID.canonical.x,_e.tileID.canonical.y),this.uid=_e.uid,this.zoom=_e.zoom,this.pixelRatio=_e.pixelRatio,this.tileSize=_e.tileSize,this.source=_e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=_e.showCollisionBoxes,this.collectResourceTiming=!!_e.collectResourceTiming,this.returnDependencies=!!_e.returnDependencies,this.promoteId=_e.promoteId,this.inFlightDependencies=[]}parse(_e,xe,be,je,We){return o._(this,void 0,void 0,(function*(){this.status="parsing",this.data=_e,this.collisionBoxArray=new o.ag;const it=new o.cN(Object.keys(_e.layers).sort()),Qe=new o.cO(this.tileID,this.promoteId);Qe.bucketLayerIDs=[];const Pe={},nt={featureIndex:Qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:be,subdivisionGranularity:We},mt=xe.familiesBySource[this.source];for(const Rt in mt){const oi=_e.layers[Rt];if(!oi)continue;oi.version===1&&o.w(`Vector tile source "${this.source}" layer "${Rt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const bi=it.encode(Rt),_i=[];for(let St=0;St<oi.length;St++){const xi=oi.feature(St),Dt=Qe.getId(xi,Rt);_i.push({feature:xi,id:Dt,index:St,sourceLayerIndex:bi})}for(const St of mt[Rt]){const xi=St[0];xi.source!==this.source&&o.w(`layer.source = ${xi.source} does not equal this.source = ${this.source}`),xi.isHidden(this.zoom,!0)||(x(St,this.zoom,be),(Pe[xi.id]=xi.createBucket({index:Qe.bucketLayerIDs.length,layers:St,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bi,sourceID:this.source})).populate(_i,nt,this.tileID.canonical),Qe.bucketLayerIDs.push(St.map((Dt=>Dt.id))))}}const pt=o.bY(nt.glyphDependencies,(Rt=>Object.keys(Rt).map(Number)));this.inFlightDependencies.forEach((Rt=>Rt?.abort())),this.inFlightDependencies=[];let Vt=Promise.resolve({});if(Object.keys(pt).length){const Rt=new AbortController;this.inFlightDependencies.push(Rt),Vt=je.sendAsync({type:"GG",data:{stacks:pt,source:this.source,tileID:this.tileID,type:"glyphs"}},Rt)}const Pt=Object.keys(nt.iconDependencies);let wi=Promise.resolve({});if(Pt.length){const Rt=new AbortController;this.inFlightDependencies.push(Rt),wi=je.sendAsync({type:"GI",data:{icons:Pt,source:this.source,tileID:this.tileID,type:"icons"}},Rt)}const si=Object.keys(nt.patternDependencies);let Oi=Promise.resolve({});if(si.length){const Rt=new AbortController;this.inFlightDependencies.push(Rt),Oi=je.sendAsync({type:"GI",data:{icons:si,source:this.source,tileID:this.tileID,type:"patterns"}},Rt)}const rt=nt.dashDependencies;let an=Promise.resolve({});if(Object.keys(rt).length){const Rt=new AbortController;this.inFlightDependencies.push(Rt),an=je.sendAsync({type:"GDA",data:{dashes:rt}},Rt)}const[pn,yi,zi,di]=yield Promise.all([Vt,wi,Oi,an]),Jt=new d(pn),fi=new o.cP(yi,zi);for(const Rt in Pe){const oi=Pe[Rt];oi instanceof o.ah?(x(oi.layers,this.zoom,be),o.cQ({bucket:oi,glyphMap:pn,glyphPositions:Jt.positions,imageMap:yi,imagePositions:fi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:nt.subdivisionGranularity})):oi.hasDependencies&&(oi instanceof o.cR||oi instanceof o.cS||oi instanceof o.cT)&&(x(oi.layers,this.zoom,be),oi.addFeatures(nt,this.tileID.canonical,fi.patternPositions,di))}return this.status="done",{buckets:Object.values(Pe).filter((Rt=>!Rt.isEmpty())),featureIndex:Qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jt.image,imageAtlas:fi,dashPositions:di,glyphMap:this.returnDependencies?pn:null,iconMap:this.returnDependencies?yi:null,glyphPositions:this.returnDependencies?Jt.positions:null}}))}}function x(tt,_e,xe){const be=new o.H(_e);for(const je of tt)je.recalculate(be,xe)}class v{constructor(_e,xe,be,je,We){this.type=_e,this.properties=be||{},this.extent=We,this.pointsArray=xe,this.id=je}loadGeometry(){return this.pointsArray.map((_e=>_e.map((xe=>new o.P(xe.x,xe.y)))))}}class k{constructor(_e,xe,be){this.version=2,this._myFeatures=_e,this.name=xe,this.length=_e.length,this.extent=be}feature(_e){return this._myFeatures[_e]}}class E{constructor(){this.layers={}}addLayer(_e){this.layers[_e.name]=_e}}function F(tt){let _e=o.cU(tt);return _e.byteOffset===0&&_e.byteLength===_e.buffer.byteLength||(_e=new Uint8Array(_e)),{vectorTile:tt,rawData:_e.buffer}}function O(tt,_e,xe){const{extent:be}=tt,je=Math.pow(2,xe.z-_e.z),We=(xe.x-_e.x*je)*be,it=(xe.y-_e.y*je)*be,Qe=[];for(let Pe=0;Pe<tt.length;Pe++){const nt=tt.feature(Pe);let mt=nt.loadGeometry();for(const Vt of mt)for(const Pt of Vt)Pt.x=Pt.x*je-We,Pt.y=Pt.y*je-it;const pt=128;mt=o.cV(mt,nt.type,-pt,-pt,be+pt,be+pt),mt.length!==0&&Qe.push(new v(nt.type,mt,nt.properties,nt.id,be))}return new k(Qe,tt.name,be)}class N{constructor(_e,xe,be){this.actor=_e,this.layerIndex=xe,this.availableImages=be,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new o.cW(1e3)}loadVectorTile(_e,xe){return o._(this,void 0,void 0,(function*(){const be=yield o.n(_e.request,xe);try{return{vectorTile:_e.encoding!=="mlt"?new o.cX(new o.cY(be.data)):new o.cZ(be.data),rawData:be.data,cacheControl:be.cacheControl,expires:be.expires}}catch(je){const We=new Uint8Array(be.data);let it=`Unable to parse the tile at ${_e.request.url}, `;throw it+=We[0]===31&&We[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${je.message}`,new Error(it)}}))}loadTile(_e){return o._(this,void 0,void 0,(function*(){const{uid:xe,overzoomParameters:be}=_e;be&&(_e.request=be.overzoomRequest);const je=!!(_e&&_e.request&&_e.request.collectResourceTiming)&&new o.c_(_e.request),We=new g(_e);this.loading[xe]=We;const it=new AbortController;We.abort=it;try{const Qe=yield this.loadVectorTile(_e,it);if(delete this.loading[xe],!Qe)return null;if(be){const Vt=this._getOverzoomTile(_e,Qe.vectorTile);Qe.rawData=Vt.rawData,Qe.vectorTile=Vt.vectorTile}const Pe=Qe.rawData,nt={};Qe.expires&&(nt.expires=Qe.expires),Qe.cacheControl&&(nt.cacheControl=Qe.cacheControl);const mt={};if(je){const Vt=je.finish();Vt&&(mt.resourceTiming=JSON.parse(JSON.stringify(Vt)))}We.vectorTile=Qe.vectorTile;const pt=We.parse(Qe.vectorTile,this.layerIndex,this.availableImages,this.actor,_e.subdivisionGranularity);this.loaded[xe]=We,this.fetching[xe]={rawTileData:Pe,cacheControl:nt,resourceTiming:mt};try{const Vt=yield pt;return o.e({rawTileData:Pe.slice(0),encoding:_e.encoding},Vt,nt,mt)}finally{delete this.fetching[xe]}}catch(Qe){throw delete this.loading[xe],We.status="done",this.loaded[xe]=We,Qe}}))}_getOverzoomTile(_e,xe){const{tileID:be,source:je,overzoomParameters:We}=_e,{maxZoomTileID:it}=We,Qe=`${it.key}_${be.key}`,Pe=this.overzoomedTileResultCache.get(Qe);if(Pe)return Pe;const nt=new E,mt=this.layerIndex.familiesBySource[je];for(const Vt in mt){const Pt=xe.layers[Vt];if(!Pt)continue;const wi=O(Pt,it,be.canonical);wi.length>0&&nt.addLayer(wi)}const pt=F(nt);return this.overzoomedTileResultCache.set(Qe,pt),pt}reloadTile(_e){return o._(this,void 0,void 0,(function*(){const xe=_e.uid;if(!this.loaded||!this.loaded[xe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const be=this.loaded[xe];if(be.showCollisionBoxes=_e.showCollisionBoxes,be.status==="parsing"){const je=yield be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,_e.subdivisionGranularity);let We;if(this.fetching[xe]){const{rawTileData:it,cacheControl:Qe,resourceTiming:Pe}=this.fetching[xe];delete this.fetching[xe],We=o.e({rawTileData:it.slice(0),encoding:_e.encoding},je,Qe,Pe)}else We=je;return We}if(be.status==="done"&&be.vectorTile)return be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,_e.subdivisionGranularity)}))}abortTile(_e){return o._(this,void 0,void 0,(function*(){const xe=this.loading,be=_e.uid;xe&&xe[be]&&xe[be].abort&&(xe[be].abort.abort(),delete xe[be])}))}removeTile(_e){return o._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[_e.uid]&&delete this.loaded[_e.uid]}))}}class ${constructor(){this.loaded={}}loadTile(_e){return o._(this,void 0,void 0,(function*(){const{uid:xe,encoding:be,rawImageData:je,redFactor:We,greenFactor:it,blueFactor:Qe,baseShift:Pe}=_e,nt=je.width+2,mt=je.height+2,pt=o.b(je)?new o.R({width:nt,height:mt},yield o.c$(je,-1,-1,nt,mt)):je,Vt=new o.d0(xe,pt,be,We,it,Qe,Pe);return this.loaded=this.loaded||{},this.loaded[xe]=Vt,Vt}))}removeTile(_e){const xe=this.loaded,be=_e.uid;xe&&xe[be]&&delete xe[be]}}var X,K,ie=(function(){if(K)return X;function tt(xe,be){if(xe.length!==0){_e(xe[0],be);for(var je=1;je<xe.length;je++)_e(xe[je],!be)}}function _e(xe,be){for(var je=0,We=0,it=0,Qe=xe.length,Pe=Qe-1;it<Qe;Pe=it++){var nt=(xe[it][0]-xe[Pe][0])*(xe[Pe][1]+xe[it][1]),mt=je+nt;We+=Math.abs(je)>=Math.abs(nt)?je-mt+nt:nt-mt+je,je=mt}je+We>=0!=!!be&&xe.reverse()}return K=1,X=function xe(be,je){var We,it=be&&be.type;if(it==="FeatureCollection")for(We=0;We<be.features.length;We++)xe(be.features[We],je);else if(it==="GeometryCollection")for(We=0;We<be.geometries.length;We++)xe(be.geometries[We],je);else if(it==="Feature")xe(be.geometry,je);else if(it==="Polygon")tt(be.coordinates,je);else if(it==="MultiPolygon")for(We=0;We<be.coordinates.length;We++)tt(be.coordinates[We],je);return be}})(),ee=o.d1(ie);const le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:tt=>tt},te=Math.fround||(he=new Float32Array(1),tt=>(he[0]=+tt,he[0]));var he;class de{constructor(_e){this.options=Object.assign(Object.create(le),_e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(_e){const{log:xe,minZoom:be,maxZoom:je}=this.options;xe&&console.time("total time");const We=`prepare ${_e.length} points`;xe&&console.time(We),this.points=_e;const it=[];for(let Pe=0;Pe<_e.length;Pe++){const nt=_e[Pe];if(!nt.geometry)continue;const[mt,pt]=nt.geometry.coordinates,Vt=te(Ae(mt)),Pt=te($e(pt));it.push(Vt,Pt,1/0,Pe,-1,1),this.options.reduce&&it.push(0)}let Qe=this.trees[je+1]=this._createTree(it);xe&&console.timeEnd(We);for(let Pe=je;Pe>=be;Pe--){const nt=+Date.now();Qe=this.trees[Pe]=this._createTree(this._cluster(Qe,Pe)),xe&&console.log("z%d: %d clusters in %dms",Pe,Qe.numItems,+Date.now()-nt)}return xe&&console.timeEnd("total time"),this}getClusters(_e,xe){let be=((_e[0]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,_e[1]));let We=_e[2]===180?180:((_e[2]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,_e[3]));if(_e[2]-_e[0]>=360)be=-180,We=180;else if(be>We){const pt=this.getClusters([be,je,180,it],xe),Vt=this.getClusters([-180,je,We,it],xe);return pt.concat(Vt)}const Qe=this.trees[this._limitZoom(xe)],Pe=Qe.range(Ae(be),$e(it),Ae(We),$e(je)),nt=Qe.data,mt=[];for(const pt of Pe){const Vt=this.stride*pt;mt.push(nt[Vt+5]>1?ke(nt,Vt,this.clusterProps):this.points[nt[Vt+3]])}return mt}getChildren(_e){const xe=this._getOriginId(_e),be=this._getOriginZoom(_e),je="No cluster with the specified id.",We=this.trees[be];if(!We)throw new Error(je);const it=We.data;if(xe*this.stride>=it.length)throw new Error(je);const Qe=this.options.radius/(this.options.extent*Math.pow(2,be-1)),Pe=We.within(it[xe*this.stride],it[xe*this.stride+1],Qe),nt=[];for(const mt of Pe){const pt=mt*this.stride;it[pt+4]===_e&&nt.push(it[pt+5]>1?ke(it,pt,this.clusterProps):this.points[it[pt+3]])}if(nt.length===0)throw new Error(je);return nt}getLeaves(_e,xe,be){const je=[];return this._appendLeaves(je,_e,xe=xe||10,be=be||0,0),je}getTile(_e,xe,be){const je=this.trees[this._limitZoom(_e)],We=Math.pow(2,_e),{extent:it,radius:Qe}=this.options,Pe=Qe/it,nt=(be-Pe)/We,mt=(be+1+Pe)/We,pt={features:[]};return this._addTileFeatures(je.range((xe-Pe)/We,nt,(xe+1+Pe)/We,mt),je.data,xe,be,We,pt),xe===0&&this._addTileFeatures(je.range(1-Pe/We,nt,1,mt),je.data,We,be,We,pt),xe===We-1&&this._addTileFeatures(je.range(0,nt,Pe/We,mt),je.data,-1,be,We,pt),pt.features.length?pt:null}getClusterExpansionZoom(_e){let xe=this._getOriginZoom(_e)-1;for(;xe<=this.options.maxZoom;){const be=this.getChildren(_e);if(xe++,be.length!==1)break;_e=be[0].properties.cluster_id}return xe}_appendLeaves(_e,xe,be,je,We){const it=this.getChildren(xe);for(const Qe of it){const Pe=Qe.properties;if(Pe&&Pe.cluster?We+Pe.point_count<=je?We+=Pe.point_count:We=this._appendLeaves(_e,Pe.cluster_id,be,je,We):We<je?We++:_e.push(Qe),_e.length===be)break}return We}_createTree(_e){const xe=new o.aT(_e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let be=0;be<_e.length;be+=this.stride)xe.add(_e[be],_e[be+1]);return xe.finish(),xe.data=_e,xe}_addTileFeatures(_e,xe,be,je,We,it){for(const Qe of _e){const Pe=Qe*this.stride,nt=xe[Pe+5]>1;let mt,pt,Vt;if(nt)mt=De(xe,Pe,this.clusterProps),pt=xe[Pe],Vt=xe[Pe+1];else{const si=this.points[xe[Pe+3]];mt=si.properties;const[Oi,rt]=si.geometry.coordinates;pt=Ae(Oi),Vt=$e(rt)}const Pt={type:1,geometry:[[Math.round(this.options.extent*(pt*We-be)),Math.round(this.options.extent*(Vt*We-je))]],tags:mt};let wi;wi=nt||this.options.generateId?xe[Pe+3]:this.points[xe[Pe+3]].id,wi!==void 0&&(Pt.id=wi),it.features.push(Pt)}}_limitZoom(_e){return Math.max(this.options.minZoom,Math.min(Math.floor(+_e),this.options.maxZoom+1))}_cluster(_e,xe){const{radius:be,extent:je,reduce:We,minPoints:it}=this.options,Qe=be/(je*Math.pow(2,xe)),Pe=_e.data,nt=[],mt=this.stride;for(let pt=0;pt<Pe.length;pt+=mt){if(Pe[pt+2]<=xe)continue;Pe[pt+2]=xe;const Vt=Pe[pt],Pt=Pe[pt+1],wi=_e.within(Pe[pt],Pe[pt+1],Qe),si=Pe[pt+5];let Oi=si;for(const rt of wi){const an=rt*mt;Pe[an+2]>xe&&(Oi+=Pe[an+5])}if(Oi>si&&Oi>=it){let rt,an=Vt*si,pn=Pt*si,yi=-1;const zi=(pt/mt<<5)+(xe+1)+this.points.length;for(const di of wi){const Jt=di*mt;if(Pe[Jt+2]<=xe)continue;Pe[Jt+2]=xe;const fi=Pe[Jt+5];an+=Pe[Jt]*fi,pn+=Pe[Jt+1]*fi,Pe[Jt+4]=zi,We&&(rt||(rt=this._map(Pe,pt,!0),yi=this.clusterProps.length,this.clusterProps.push(rt)),We(rt,this._map(Pe,Jt)))}Pe[pt+4]=zi,nt.push(an/Oi,pn/Oi,1/0,zi,-1,Oi),We&&nt.push(yi)}else{for(let rt=0;rt<mt;rt++)nt.push(Pe[pt+rt]);if(Oi>1)for(const rt of wi){const an=rt*mt;if(!(Pe[an+2]<=xe)){Pe[an+2]=xe;for(let pn=0;pn<mt;pn++)nt.push(Pe[an+pn])}}}}return nt}_getOriginId(_e){return _e-this.points.length>>5}_getOriginZoom(_e){return(_e-this.points.length)%32}_map(_e,xe,be){if(_e[xe+5]>1){const it=this.clusterProps[_e[xe+6]];return be?Object.assign({},it):it}const je=this.points[_e[xe+3]].properties,We=this.options.map(je);return be&&We===je?Object.assign({},We):We}}function ke(tt,_e,xe){return{type:"Feature",id:tt[_e+3],properties:De(tt,_e,xe),geometry:{type:"Point",coordinates:[(be=tt[_e],360*(be-.5)),et(tt[_e+1])]}};var be}function De(tt,_e,xe){const be=tt[_e+5],je=be>=1e4?`${Math.round(be/1e3)}k`:be>=1e3?Math.round(be/100)/10+"k":be,We=tt[_e+6],it=We===-1?{}:Object.assign({},xe[We]);return Object.assign(it,{cluster:!0,cluster_id:tt[_e+3],point_count:be,point_count_abbreviated:je})}function Ae(tt){return tt/360+.5}function $e(tt){const _e=Math.sin(tt*Math.PI/180),xe=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return xe<0?0:xe>1?1:xe}function et(tt){const _e=(180-360*tt)*Math.PI/180;return 360*Math.atan(Math.exp(_e))/Math.PI-90}function Ie(tt,_e,xe,be){let je=be;const We=_e+(xe-_e>>1);let it,Qe=xe-_e;const Pe=tt[_e],nt=tt[_e+1],mt=tt[xe],pt=tt[xe+1];for(let Vt=_e+3;Vt<xe;Vt+=3){const Pt=at(tt[Vt],tt[Vt+1],Pe,nt,mt,pt);if(Pt>je)it=Vt,je=Pt;else if(Pt===je){const wi=Math.abs(Vt-We);wi<Qe&&(it=Vt,Qe=wi)}}je>be&&(it-_e>3&&Ie(tt,_e,it,be),tt[it+2]=je,xe-it>3&&Ie(tt,it,xe,be))}function at(tt,_e,xe,be,je,We){let it=je-xe,Qe=We-be;if(it!==0||Qe!==0){const Pe=((tt-xe)*it+(_e-be)*Qe)/(it*it+Qe*Qe);Pe>1?(xe=je,be=We):Pe>0&&(xe+=it*Pe,be+=Qe*Pe)}return it=tt-xe,Qe=_e-be,it*it+Qe*Qe}function qe(tt,_e,xe,be){const je={id:tt??null,type:_e,geometry:xe,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")kt(je,xe);else if(_e==="Polygon")kt(je,xe[0]);else if(_e==="MultiLineString")for(const We of xe)kt(je,We);else if(_e==="MultiPolygon")for(const We of xe)kt(je,We[0]);return je}function kt(tt,_e){for(let xe=0;xe<_e.length;xe+=3)tt.minX=Math.min(tt.minX,_e[xe]),tt.minY=Math.min(tt.minY,_e[xe+1]),tt.maxX=Math.max(tt.maxX,_e[xe]),tt.maxY=Math.max(tt.maxY,_e[xe+1])}function vt(tt,_e,xe,be){if(!_e.geometry)return;const je=_e.geometry.coordinates;if(je&&je.length===0)return;const We=_e.geometry.type,it=Math.pow(xe.tolerance/((1<<xe.maxZoom)*xe.extent),2);let Qe=[],Pe=_e.id;if(xe.promoteId?Pe=_e.properties[xe.promoteId]:xe.generateId&&(Pe=be||0),We==="Point")He(je,Qe);else if(We==="MultiPoint")for(const nt of je)He(nt,Qe);else if(We==="LineString")Nt(je,Qe,it,!1);else if(We==="MultiLineString"){if(xe.lineMetrics){for(const nt of je)Qe=[],Nt(nt,Qe,it,!1),tt.push(qe(Pe,"LineString",Qe,_e.properties));return}Qt(je,Qe,it,!1)}else if(We==="Polygon")Qt(je,Qe,it,!0);else{if(We!=="MultiPolygon"){if(We==="GeometryCollection"){for(const nt of _e.geometry.geometries)vt(tt,{id:Pe,geometry:nt,properties:_e.properties},xe,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const nt of je){const mt=[];Qt(nt,mt,it,!0),Qe.push(mt)}}tt.push(qe(Pe,We,Qe,_e.properties))}function He(tt,_e){_e.push(Ai(tt[0]),jt(tt[1]),0)}function Nt(tt,_e,xe,be){let je,We,it=0;for(let Pe=0;Pe<tt.length;Pe++){const nt=Ai(tt[Pe][0]),mt=jt(tt[Pe][1]);_e.push(nt,mt,0),Pe>0&&(it+=be?(je*mt-nt*We)/2:Math.sqrt(Math.pow(nt-je,2)+Math.pow(mt-We,2))),je=nt,We=mt}const Qe=_e.length-3;_e[2]=1,Ie(_e,0,Qe,xe),_e[Qe+2]=1,_e.size=Math.abs(it),_e.start=0,_e.end=_e.size}function Qt(tt,_e,xe,be){for(let je=0;je<tt.length;je++){const We=[];Nt(tt[je],We,xe,be),_e.push(We)}}function Ai(tt){return tt/360+.5}function jt(tt){const _e=Math.sin(tt*Math.PI/180),xe=.5-.25*Math.log((1+_e)/(1-_e))/Math.PI;return xe<0?0:xe>1?1:xe}function ui(tt,_e,xe,be,je,We,it,Qe){if(be/=_e,We>=(xe/=_e)&&it<be)return tt;if(it<xe||We>=be)return null;const Pe=[];for(const nt of tt){const mt=nt.geometry;let pt=nt.type;const Vt=je===0?nt.minX:nt.minY,Pt=je===0?nt.maxX:nt.maxY;if(Vt>=xe&&Pt<be){Pe.push(nt);continue}if(Pt<xe||Vt>=be)continue;let wi=[];if(pt==="Point"||pt==="MultiPoint")Ct(mt,wi,xe,be,je);else if(pt==="LineString")ri(mt,wi,xe,be,je,!1,Qe.lineMetrics);else if(pt==="MultiLineString")Pi(mt,wi,xe,be,je,!1);else if(pt==="Polygon")Pi(mt,wi,xe,be,je,!0);else if(pt==="MultiPolygon")for(const si of mt){const Oi=[];Pi(si,Oi,xe,be,je,!0),Oi.length&&wi.push(Oi)}if(wi.length){if(Qe.lineMetrics&&pt==="LineString"){for(const si of wi)Pe.push(qe(nt.id,pt,si,nt.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(wi.length===1?(pt="LineString",wi=wi[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=wi.length===3?"Point":"MultiPoint"),Pe.push(qe(nt.id,pt,wi,nt.tags))}}return Pe.length?Pe:null}function Ct(tt,_e,xe,be,je){for(let We=0;We<tt.length;We+=3){const it=tt[We+je];it>=xe&&it<=be&&Fi(_e,tt[We],tt[We+1],tt[We+2])}}function ri(tt,_e,xe,be,je,We,it){let Qe=Zt(tt);const Pe=je===0?Li:en;let nt,mt,pt=tt.start;for(let Oi=0;Oi<tt.length-3;Oi+=3){const rt=tt[Oi],an=tt[Oi+1],pn=tt[Oi+2],yi=tt[Oi+3],zi=tt[Oi+4],di=je===0?rt:an,Jt=je===0?yi:zi;let fi=!1;it&&(nt=Math.sqrt(Math.pow(rt-yi,2)+Math.pow(an-zi,2))),di<xe?Jt>xe&&(mt=Pe(Qe,rt,an,yi,zi,xe),it&&(Qe.start=pt+nt*mt)):di>be?Jt<be&&(mt=Pe(Qe,rt,an,yi,zi,be),it&&(Qe.start=pt+nt*mt)):Fi(Qe,rt,an,pn),Jt<xe&&di>=xe&&(mt=Pe(Qe,rt,an,yi,zi,xe),fi=!0),Jt>be&&di<=be&&(mt=Pe(Qe,rt,an,yi,zi,be),fi=!0),!We&&fi&&(it&&(Qe.end=pt+nt*mt),_e.push(Qe),Qe=Zt(tt)),it&&(pt+=nt)}let Vt=tt.length-3;const Pt=tt[Vt],wi=tt[Vt+1],si=je===0?Pt:wi;si>=xe&&si<=be&&Fi(Qe,Pt,wi,tt[Vt+2]),Vt=Qe.length-3,We&&Vt>=3&&(Qe[Vt]!==Qe[0]||Qe[Vt+1]!==Qe[1])&&Fi(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&_e.push(Qe)}function Zt(tt){const _e=[];return _e.size=tt.size,_e.start=tt.start,_e.end=tt.end,_e}function Pi(tt,_e,xe,be,je,We){for(const it of tt)ri(it,_e,xe,be,je,We,!1)}function Fi(tt,_e,xe,be){tt.push(_e,xe,be)}function Li(tt,_e,xe,be,je,We){const it=(We-_e)/(be-_e);return Fi(tt,We,xe+(je-xe)*it,1),it}function en(tt,_e,xe,be,je,We){const it=(We-xe)/(je-xe);return Fi(tt,_e+(be-_e)*it,We,1),it}function qt(tt,_e){const xe=[];for(let be=0;be<tt.length;be++){const je=tt[be],We=je.type;let it;if(We==="Point"||We==="MultiPoint"||We==="LineString")it=Ti(je.geometry,_e);else if(We==="MultiLineString"||We==="Polygon"){it=[];for(const Qe of je.geometry)it.push(Ti(Qe,_e))}else if(We==="MultiPolygon"){it=[];for(const Qe of je.geometry){const Pe=[];for(const nt of Qe)Pe.push(Ti(nt,_e));it.push(Pe)}}xe.push(qe(je.id,We,it,je.tags))}return xe}function Ti(tt,_e){const xe=[];xe.size=tt.size,tt.start!==void 0&&(xe.start=tt.start,xe.end=tt.end);for(let be=0;be<tt.length;be+=3)xe.push(tt[be]+_e,tt[be+1],tt[be+2]);return xe}function tn(tt,_e){if(tt.transformed)return tt;const xe=1<<tt.z,be=tt.x,je=tt.y;for(const We of tt.features){const it=We.geometry,Qe=We.type;if(We.geometry=[],Qe===1)for(let Pe=0;Pe<it.length;Pe+=2)We.geometry.push(Bn(it[Pe],it[Pe+1],_e,xe,be,je));else for(let Pe=0;Pe<it.length;Pe++){const nt=[];for(let mt=0;mt<it[Pe].length;mt+=2)nt.push(Bn(it[Pe][mt],it[Pe][mt+1],_e,xe,be,je));We.geometry.push(nt)}}return tt.transformed=!0,tt}function Bn(tt,_e,xe,be,je,We){return[Math.round(xe*(tt*be-je)),Math.round(xe*(_e*be-We))]}function st(tt,_e,xe,be,je){const We=_e===je.maxZoom?0:je.tolerance/((1<<_e)*je.extent),it={features:[],numPoints:0,numSimplified:0,numFeatures:tt.length,source:null,x:xe,y:be,z:_e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Qe of tt)ji(it,Qe,We,je);return it}function ji(tt,_e,xe,be){const je=_e.geometry,We=_e.type,it=[];if(tt.minX=Math.min(tt.minX,_e.minX),tt.minY=Math.min(tt.minY,_e.minY),tt.maxX=Math.max(tt.maxX,_e.maxX),tt.maxY=Math.max(tt.maxY,_e.maxY),We==="Point"||We==="MultiPoint")for(let Qe=0;Qe<je.length;Qe+=3)it.push(je[Qe],je[Qe+1]),tt.numPoints++,tt.numSimplified++;else if(We==="LineString")Bi(it,je,tt,xe,!1,!1);else if(We==="MultiLineString"||We==="Polygon")for(let Qe=0;Qe<je.length;Qe++)Bi(it,je[Qe],tt,xe,We==="Polygon",Qe===0);else if(We==="MultiPolygon")for(let Qe=0;Qe<je.length;Qe++){const Pe=je[Qe];for(let nt=0;nt<Pe.length;nt++)Bi(it,Pe[nt],tt,xe,!0,nt===0)}if(it.length){let Qe=_e.tags||null;if(We==="LineString"&&be.lineMetrics){Qe={};for(const nt in _e.tags)Qe[nt]=_e.tags[nt];Qe.mapbox_clip_start=je.start/je.size,Qe.mapbox_clip_end=je.end/je.size}const Pe={geometry:it,type:We==="Polygon"||We==="MultiPolygon"?3:We==="LineString"||We==="MultiLineString"?2:1,tags:Qe};_e.id!==null&&(Pe.id=_e.id),tt.features.push(Pe)}}function Bi(tt,_e,xe,be,je,We){const it=be*be;if(be>0&&_e.size<(je?it:be))return void(xe.numPoints+=_e.length/3);const Qe=[];for(let Pe=0;Pe<_e.length;Pe+=3)(be===0||_e[Pe+2]>it)&&(xe.numSimplified++,Qe.push(_e[Pe],_e[Pe+1])),xe.numPoints++;je&&(function(Pe,nt){let mt=0;for(let pt=0,Vt=Pe.length,Pt=Vt-2;pt<Vt;Pt=pt,pt+=2)mt+=(Pe[pt]-Pe[Pt])*(Pe[pt+1]+Pe[Pt+1]);if(mt>0===nt)for(let pt=0,Vt=Pe.length;pt<Vt/2;pt+=2){const Pt=Pe[pt],wi=Pe[pt+1];Pe[pt]=Pe[Vt-2-pt],Pe[pt+1]=Pe[Vt-1-pt],Pe[Vt-2-pt]=Pt,Pe[Vt-1-pt]=wi}})(Qe,We),tt.push(Qe)}const Qa={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Gt{constructor(_e,xe){const be=(xe=this.options=(function(We,it){for(const Qe in it)We[Qe]=it[Qe];return We})(Object.create(Qa),xe)).debug;if(be&&console.time("preprocess data"),xe.maxZoom<0||xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(xe.promoteId&&xe.generateId)throw new Error("promoteId and generateId cannot be used together.");let je=(function(We,it){const Qe=[];if(We.type==="FeatureCollection")for(let Pe=0;Pe<We.features.length;Pe++)vt(Qe,We.features[Pe],it,Pe);else vt(Qe,We.type==="Feature"?We:{geometry:We},it);return Qe})(_e,xe);this.tiles={},this.tileCoords=[],be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",xe.indexMaxZoom,xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),je=(function(We,it){const Qe=it.buffer/it.extent;let Pe=We;const nt=ui(We,1,-1-Qe,Qe,0,-1,2,it),mt=ui(We,1,1-Qe,2+Qe,0,-1,2,it);return(nt||mt)&&(Pe=ui(We,1,-Qe,1+Qe,0,-1,2,it)||[],nt&&(Pe=qt(nt,1).concat(Pe)),mt&&(Pe=Pe.concat(qt(mt,-1)))),Pe})(je,xe),je.length&&this.splitTile(je,0,0,0),be&&(je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(_e,xe,be,je,We,it,Qe){const Pe=[_e,xe,be,je],nt=this.options,mt=nt.debug;for(;Pe.length;){je=Pe.pop(),be=Pe.pop(),xe=Pe.pop(),_e=Pe.pop();const pt=1<<xe,Vt=la(xe,be,je);let Pt=this.tiles[Vt];if(!Pt&&(mt>1&&console.time("creation"),Pt=this.tiles[Vt]=st(_e,xe,be,je,nt),this.tileCoords.push({z:xe,x:be,y:je}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",xe,be,je,Pt.numFeatures,Pt.numPoints,Pt.numSimplified),console.timeEnd("creation"));const fi=`z${xe}`;this.stats[fi]=(this.stats[fi]||0)+1,this.total++}if(Pt.source=_e,We==null){if(xe===nt.indexMaxZoom||Pt.numPoints<=nt.indexMaxPoints)continue}else{if(xe===nt.maxZoom||xe===We)continue;if(We!=null){const fi=We-xe;if(be!==it>>fi||je!==Qe>>fi)continue}}if(Pt.source=null,_e.length===0)continue;mt>1&&console.time("clipping");const wi=.5*nt.buffer/nt.extent,si=.5-wi,Oi=.5+wi,rt=1+wi;let an=null,pn=null,yi=null,zi=null,di=ui(_e,pt,be-wi,be+Oi,0,Pt.minX,Pt.maxX,nt),Jt=ui(_e,pt,be+si,be+rt,0,Pt.minX,Pt.maxX,nt);_e=null,di&&(an=ui(di,pt,je-wi,je+Oi,1,Pt.minY,Pt.maxY,nt),pn=ui(di,pt,je+si,je+rt,1,Pt.minY,Pt.maxY,nt),di=null),Jt&&(yi=ui(Jt,pt,je-wi,je+Oi,1,Pt.minY,Pt.maxY,nt),zi=ui(Jt,pt,je+si,je+rt,1,Pt.minY,Pt.maxY,nt),Jt=null),mt>1&&console.timeEnd("clipping"),Pe.push(an||[],xe+1,2*be,2*je),Pe.push(pn||[],xe+1,2*be,2*je+1),Pe.push(yi||[],xe+1,2*be+1,2*je),Pe.push(zi||[],xe+1,2*be+1,2*je+1)}}getTile(_e,xe,be){_e=+_e,xe=+xe,be=+be;const je=this.options,{extent:We,debug:it}=je;if(_e<0||_e>24)return null;const Qe=1<<_e,Pe=la(_e,xe=xe+Qe&Qe-1,be);if(this.tiles[Pe])return tn(this.tiles[Pe],We);it>1&&console.log("drilling down to z%d-%d-%d",_e,xe,be);let nt,mt=_e,pt=xe,Vt=be;for(;!nt&&mt>0;)mt--,pt>>=1,Vt>>=1,nt=this.tiles[la(mt,pt,Vt)];return nt&&nt.source?(it>1&&(console.log("found parent tile z%d-%d-%d",mt,pt,Vt),console.time("drilling down")),this.splitTile(nt.source,mt,pt,Vt,_e,xe,be),it>1&&console.timeEnd("drilling down"),this.tiles[Pe]?tn(this.tiles[Pe],We):null):null}}function la(tt,_e,xe){return 32*((1<<tt)*xe+_e)+tt}class vr extends N{constructor(_e,xe,be,je=va){super(_e,xe,be),this._dataUpdateable=new Map,this._createGeoJSONIndex=je}loadVectorTile(_e,xe){return o._(this,void 0,void 0,(function*(){const be=_e.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const je=this._geoJSONIndex.getTile(be.z,be.x,be.y);return je?F(new o.d2(je.features,{version:2,extent:o.a5})):null}))}loadData(_e){return o._(this,void 0,void 0,(function*(){var xe;(xe=this._pendingRequest)===null||xe===void 0||xe.abort();const be=this._startPerformance(_e);this._pendingRequest=new AbortController;try{(!this._pendingData||_e.request||_e.data||_e.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(_e,this._pendingRequest));const je=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(je,_e),this.loaded={};const We={};return _e.request&&(We.data=je),this._finishPerformance(be,_e,We),We}catch(je){if(delete this._pendingRequest,o.Z(je))return{abandoned:!0};throw je}}))}_startPerformance(_e){var xe;if(!((xe=_e?.request)===null||xe===void 0)&&xe.collectResourceTiming)return new o.c_(_e.request)}_finishPerformance(_e,xe,be){if(!_e)return;const je=_e.finish();je&&(be.resourceTiming={},be.resourceTiming[xe.source]=JSON.parse(JSON.stringify(je)))}getData(){return o._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(_e){const xe=this.loaded;return xe&&xe[_e.uid]?super.reloadTile(_e):this.loadTile(_e)}loadAndProcessGeoJSON(_e,xe){return o._(this,void 0,void 0,(function*(){let be;if(_e.request?be=yield this.loadGeoJSONFromUrl(_e.request,_e.promoteId,xe):_e.data?be=this._loadGeoJSONFromObject(_e.data,_e.promoteId):_e.dataDiff&&(be=this._loadGeoJSONFromDiff(_e.dataDiff,_e.promoteId,_e.source)),delete this._pendingRequest,typeof be!="object")throw new Error(`Input data given to '${_e.source}' is not a valid GeoJSON object.`);return ee(be,!0),_e.filter&&(be=this._filterGeoJSON(be,_e.filter)),be}))}loadGeoJSONFromUrl(_e,xe,be){return o._(this,void 0,void 0,(function*(){const je=yield o.j(_e,be);return this._dataUpdateable=o.a7(je.data,xe),je.data}))}_loadGeoJSONFromObject(_e,xe){return this._dataUpdateable=o.a7(_e,xe),_e}_loadGeoJSONFromDiff(_e,xe,be){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${be}`);o.a8(this._dataUpdateable,_e,xe);const je=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(je)}_filterGeoJSON(_e,xe){const be=o.d3(xe,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(be.result==="error")throw new Error(be.value.map((We=>`${We.key}: ${We.message}`)).join(", "));const je=_e.features.filter((We=>be.value.evaluate({zoom:0},We)));return this._toFeatureCollection(je)}_toFeatureCollection(_e){return{type:"FeatureCollection",features:_e}}removeSource(_e){return o._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(_e){return this._geoJSONIndex.getClusterExpansionZoom(_e.clusterId)}getClusterChildren(_e){return this._geoJSONIndex.getChildren(_e.clusterId)}getClusterLeaves(_e){return this._geoJSONIndex.getLeaves(_e.clusterId,_e.limit,_e.offset)}}function va(tt,_e){return _e.cluster?new de((function({superclusterOptions:xe,clusterProperties:be}){if(!be||!xe)return xe;const je={},We={},it={accumulated:null,zoom:0},Qe={properties:null},Pe=Object.keys(be);for(const nt of Pe){const[mt,pt]=be[nt],Vt=o.d3(pt),Pt=o.d3(typeof mt=="string"?[mt,["accumulated"],["get",nt]]:mt);je[nt]=Vt.value,We[nt]=Pt.value}return xe.map=nt=>{Qe.properties=nt;const mt={};for(const pt of Pe)mt[pt]=je[pt].evaluate(it,Qe);return mt},xe.reduce=(nt,mt)=>{Qe.properties=mt;for(const pt of Pe)it.accumulated=nt[pt],nt[pt]=We[pt].evaluate(it,Qe)},xe})(_e)).load(tt.features):(function(xe,be){return new Gt(xe,be)})(tt,_e.geojsonVtOptions)}class un{constructor(_e){this.self=_e,this.actor=new o.L(_e),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(xe,be)=>{if(this.externalWorkerSourceTypes[xe])throw new Error(`Worker source with name "${xe}" already registered.`);this.externalWorkerSourceTypes[xe]=be},this.self.addProtocol=o.cJ,this.self.removeProtocol=o.cK,this.self.registerRTLTextPlugin=xe=>{o.d4.setMethods(xe)},this.actor.registerMessageHandler("LDT",((xe,be)=>this._getDEMWorkerSource(xe,be.source).loadTile(be))),this.actor.registerMessageHandler("RDT",((xe,be)=>o._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(xe,be.source).removeTile(be)})))),this.actor.registerMessageHandler("GCEZ",((xe,be)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(xe,be.type,be.source).getClusterExpansionZoom(be)})))),this.actor.registerMessageHandler("GCC",((xe,be)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(xe,be.type,be.source).getClusterChildren(be)})))),this.actor.registerMessageHandler("GCL",((xe,be)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(xe,be.type,be.source).getClusterLeaves(be)})))),this.actor.registerMessageHandler("LD",((xe,be)=>this._getWorkerSource(xe,be.type,be.source).loadData(be))),this.actor.registerMessageHandler("GD",((xe,be)=>this._getWorkerSource(xe,be.type,be.source).getData())),this.actor.registerMessageHandler("LT",((xe,be)=>this._getWorkerSource(xe,be.type,be.source).loadTile(be))),this.actor.registerMessageHandler("RT",((xe,be)=>this._getWorkerSource(xe,be.type,be.source).reloadTile(be))),this.actor.registerMessageHandler("AT",((xe,be)=>this._getWorkerSource(xe,be.type,be.source).abortTile(be))),this.actor.registerMessageHandler("RMT",((xe,be)=>this._getWorkerSource(xe,be.type,be.source).removeTile(be))),this.actor.registerMessageHandler("RS",((xe,be)=>o._(this,void 0,void 0,(function*(){if(!this.workerSources[xe]||!this.workerSources[xe][be.type]||!this.workerSources[xe][be.type][be.source])return;const je=this.workerSources[xe][be.type][be.source];delete this.workerSources[xe][be.type][be.source],je.removeSource!==void 0&&je.removeSource(be)})))),this.actor.registerMessageHandler("RM",(xe=>o._(this,void 0,void 0,(function*(){delete this.layerIndexes[xe],delete this.availableImages[xe],delete this.workerSources[xe],delete this.demWorkerSources[xe],this.globalStates.delete(xe)})))),this.actor.registerMessageHandler("SR",((xe,be)=>o._(this,void 0,void 0,(function*(){this.referrer=be})))),this.actor.registerMessageHandler("SRPS",((xe,be)=>this._syncRTLPluginState(xe,be))),this.actor.registerMessageHandler("IS",((xe,be)=>o._(this,void 0,void 0,(function*(){this.self.importScripts(be)})))),this.actor.registerMessageHandler("SI",((xe,be)=>this._setImages(xe,be))),this.actor.registerMessageHandler("UL",((xe,be)=>o._(this,void 0,void 0,(function*(){this._getLayerIndex(xe).update(be.layers,be.removedIds,this._getGlobalState(xe))})))),this.actor.registerMessageHandler("UGS",((xe,be)=>o._(this,void 0,void 0,(function*(){const je=this._getGlobalState(xe);for(const We in be)je[We]=be[We]})))),this.actor.registerMessageHandler("SL",((xe,be)=>o._(this,void 0,void 0,(function*(){this._getLayerIndex(xe).replace(be,this._getGlobalState(xe))}))))}_getGlobalState(_e){let xe=this.globalStates.get(_e);return xe||(xe={},this.globalStates.set(_e,xe)),xe}_setImages(_e,xe){return o._(this,void 0,void 0,(function*(){this.availableImages[_e]=xe;for(const be in this.workerSources[_e]){const je=this.workerSources[_e][be];for(const We in je)je[We].availableImages=xe}}))}_syncRTLPluginState(_e,xe){return o._(this,void 0,void 0,(function*(){return yield o.d4.syncState(xe,this.self.importScripts)}))}_getAvailableImages(_e){let xe=this.availableImages[_e];return xe||(xe=[]),xe}_getLayerIndex(_e){let xe=this.layerIndexes[_e];return xe||(xe=this.layerIndexes[_e]=new r),xe}_getWorkerSource(_e,xe,be){if(this.workerSources[_e]||(this.workerSources[_e]={}),this.workerSources[_e][xe]||(this.workerSources[_e][xe]={}),!this.workerSources[_e][xe][be]){const je={sendAsync:(We,it)=>(We.targetMapId=_e,this.actor.sendAsync(We,it))};switch(xe){case"vector":this.workerSources[_e][xe][be]=new N(je,this._getLayerIndex(_e),this._getAvailableImages(_e));break;case"geojson":this.workerSources[_e][xe][be]=new vr(je,this._getLayerIndex(_e),this._getAvailableImages(_e));break;default:this.workerSources[_e][xe][be]=new this.externalWorkerSourceTypes[xe](je,this._getLayerIndex(_e),this._getAvailableImages(_e))}}return this.workerSources[_e][xe][be]}_getDEMWorkerSource(_e,xe){return this.demWorkerSources[_e]||(this.demWorkerSources[_e]={}),this.demWorkerSources[_e][xe]||(this.demWorkerSources[_e][xe]=new $),this.demWorkerSources[_e][xe]}}return o.i(self)&&(self.worker=new un(self)),un})),n("index",["exports","./shared"],(function(o,r){var d="5.15.0";function g(){var I=new r.A(4);return r.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let x,v,k;const E={frame(I,c,f){const y=requestAnimationFrame((P=>{S(),c(P)})),{unsubscribe:S}=r.s(I.signal,"abort",(()=>{S(),cancelAnimationFrame(y),f(new r.a(I.signal.reason))}),!1)},frameAsync(I){return new Promise(((c,f)=>{this.frame(I,c,f)}))},getImageData(I,c=0){return this.getImageCanvasContext(I).getImageData(-c,-c,I.width+2*c,I.height+2*c)},getImageCanvasContext(I){const c=window.document.createElement("canvas"),f=c.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return c.width=I.width,c.height=I.height,f.drawImage(I,0,0,I.width,I.height),f},resolveURL:I=>(x||(x=document.createElement("a")),x.href=I,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return k!==void 0?k:!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)},set prefersReducedMotion(I){k=I}},F=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(I){this._frozenAt=I}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function O(){return F.getCurrentTime()}class N{static testProp(c){if(!N.docStyle)return c[0];for(let f=0;f<c.length;f++)if(c[f]in N.docStyle)return c[f];return c[0]}static create(c,f,y){const S=window.document.createElement(c);return f!==void 0&&(S.className=f),y&&y.appendChild(S),S}static createNS(c,f){return window.document.createElementNS(c,f)}static disableDrag(){N.docStyle&&N.selectProp&&(N.userSelect=N.docStyle[N.selectProp],N.docStyle[N.selectProp]="none")}static enableDrag(){N.docStyle&&N.selectProp&&(N.docStyle[N.selectProp]=N.userSelect)}static setTransform(c,f){c.style[N.transformProp]=f}static addEventListener(c,f,y,S={}){c.addEventListener(f,y,"passive"in S?S:S.capture)}static removeEventListener(c,f,y,S={}){c.removeEventListener(f,y,"passive"in S?S:S.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",N.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",N.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",N.suppressClickInternal,!0)}),0)}static getScale(c){const f=c.getBoundingClientRect();return{x:f.width/c.offsetWidth||1,y:f.height/c.offsetHeight||1,boundingClientRect:f}}static getPoint(c,f,y){const S=f.boundingClientRect;return new r.P((y.clientX-S.left)/f.x-c.clientLeft,(y.clientY-S.top)/f.y-c.clientTop)}static mousePos(c,f){const y=N.getScale(c);return N.getPoint(c,y,f)}static touchPos(c,f){const y=[],S=N.getScale(c);for(let P=0;P<f.length;P++)y.push(N.getPoint(c,S,f[P]));return y}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}static sanitize(c){const f=new DOMParser().parseFromString(c,"text/html").body||document.createElement("body"),y=f.querySelectorAll("script");for(const S of y)S.remove();return N.clean(f),f.innerHTML}static isPossiblyDangerous(c,f){const y=f.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(c)||!y.includes("javascript:")&&!y.includes("data:"))||!!c.startsWith("on")||void 0}static clean(c){const f=c.children;for(const y of f)N.removeAttributes(y),N.clean(y)}static removeAttributes(c){for(const{name:f,value:y}of c.attributes)N.isPossiblyDangerous(f,y)&&c.removeAttribute(f)}}N.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,N.selectProp=N.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),N.transformProp=N.testProp(["transform","WebkitTransform"]);const $={supported:!1,testSupport:function(I){!ie&&K&&(ee?le(I):X=I)}};let X,K,ie=!1,ee=!1;function le(I){const c=I.createTexture();I.bindTexture(I.TEXTURE_2D,c);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,K),I.isContextLost())return;$.supported=!0}catch{}I.deleteTexture(c),ie=!0}var te;typeof document<"u"&&(K=document.createElement("img"),K.onload=()=>{X&&le(X),X=null,ee=!0},K.onerror=()=>{ie=!0,X=null},K.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(I){let c,f,y,S;I.resetRequestQueue=()=>{c=[],f=0,y=0,S={}},I.addThrottleControl=W=>{const Z=y++;return S[Z]=W,Z},I.removeThrottleControl=W=>{delete S[W],z()},I.getImage=(W,Z,J=!0)=>new Promise(((se,re)=>{$.supported&&(W.headers||(W.headers={}),W.headers.accept="image/webp,*/*"),r.e(W,{type:"image"}),c.push({abortController:Z,requestParameters:W,supportImageRefresh:J,state:"queued",onError:fe=>{re(fe)},onSuccess:fe=>{se(fe)}}),z()}));const P=W=>r._(this,void 0,void 0,(function*(){W.state="running";const{requestParameters:Z,supportImageRefresh:J,onError:se,onSuccess:re,abortController:fe}=W,ye=J===!1&&!r.i(self)&&!r.g(Z.url)&&(!Z.headers||Object.keys(Z.headers).reduce(((Ee,Fe)=>Ee&&Fe==="accept"),!0));f++;const Te=ye?H(Z,fe):r.m(Z,fe);try{const Ee=yield Te;delete W.abortController,W.state="completed",Ee.data instanceof HTMLImageElement||r.b(Ee.data)?re(Ee):Ee.data&&re({data:yield(Me=Ee.data,typeof createImageBitmap=="function"?r.f(Me):r.h(Me)),cacheControl:Ee.cacheControl,expires:Ee.expires})}catch(Ee){delete W.abortController,se(Ee)}finally{f--,z()}var Me})),z=()=>{const W=(()=>{for(const Z of Object.keys(S))if(S[Z]())return!0;return!1})()?r.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:r.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let Z=f;Z<W&&c.length>0;Z++){const J=c.shift();J.abortController.signal.aborted?Z--:P(J)}},H=(W,Z)=>new Promise(((J,se)=>{const re=new Image,fe=W.url,ye=W.credentials;ye&&ye==="include"?re.crossOrigin="use-credentials":(ye&&ye==="same-origin"||!r.d(fe))&&(re.crossOrigin="anonymous"),Z.signal.addEventListener("abort",(()=>{re.src="",se(new r.a(Z.signal.reason))})),re.fetchPriority="high",re.onload=()=>{re.onerror=re.onload=null,J({data:re})},re.onerror=()=>{re.onerror=re.onload=null,Z.signal.aborted||se(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},re.src=fe}))})(te||(te={})),te.resetRequestQueue();class he{constructor(c){this._transformRequestFn=c??null}transformRequest(c,f){return this._transformRequestFn&&this._transformRequestFn(c,f)||{url:c}}setTransformRequest(c){this._transformRequestFn=c}}function de(I){const c=[];if(typeof I=="string")c.push({id:"default",url:I});else if(I&&I.length>0){const f=[];for(const{id:y,url:S}of I){const P=`${y}${S}`;f.indexOf(P)===-1&&(f.push(P),c.push({id:y,url:S}))}}return c}function ke(I,c,f){try{const y=new URL(I);return y.pathname+=`${c}${f}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function De(I){const{userImage:c}=I;return!!(c&&c.render&&c.render())&&(I.data.replace(new Uint8Array(c.data.buffer)),!0)}class Ae extends r.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const c of Object.keys(this.images))this.removeImage(c);this.patterns={},this.atlasImage=new r.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:f,promiseResolve:y}of this.requestors)y(this._getImagesForIds(f));this.requestors=[]}}getImage(c){const f=this.images[c];if(f&&!f.data&&f.spriteData){const y=f.spriteData;f.data=new r.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),f.spriteData=null}return f}addImage(c,f){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,f)&&(this.images[c]=f)}_validate(c,f){let y=!0;const S=f.data||f.spriteData;return this._validateStretch(f.stretchX,S&&S.width)||(this.fire(new r.k(new Error(`Image "${c}" has invalid "stretchX" value`))),y=!1),this._validateStretch(f.stretchY,S&&S.height)||(this.fire(new r.k(new Error(`Image "${c}" has invalid "stretchY" value`))),y=!1),this._validateContent(f.content,f)||(this.fire(new r.k(new Error(`Image "${c}" has invalid "content" value`))),y=!1),y}_validateStretch(c,f){if(!c)return!0;let y=0;for(const S of c){if(S[0]<y||S[1]<S[0]||f<S[1])return!1;y=S[1]}return!0}_validateContent(c,f){if(!c)return!0;if(c.length!==4)return!1;const y=f.spriteData,S=y&&y.width||f.data.width,P=y&&y.height||f.data.height;return!(c[0]<0||S<c[0]||c[1]<0||P<c[1]||c[2]<0||S<c[2]||c[3]<0||P<c[3]||c[2]<c[0]||c[3]<c[1])}updateImage(c,f,y=!0){const S=this.getImage(c);if(y&&(S.data.width!==f.data.width||S.data.height!==f.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=S.version+1,this.images[c]=f,this.updatedImages[c]=!0}removeImage(c){const f=this.images[c];delete this.images[c],delete this.patterns[c],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c){return new Promise(((f,y)=>{let S=!0;if(!this.isLoaded())for(const P of c)this.images[P]||(S=!1);this.isLoaded()||S?f(this._getImagesForIds(c)):this.requestors.push({ids:c,promiseResolve:f})}))}_getImagesForIds(c){const f={};for(const y of c){let S=this.getImage(y);S||(this.fire(new r.l("styleimagemissing",{id:y})),S=this.getImage(y)),S?f[y]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,textFitWidth:S.textFitWidth,textFitHeight:S.textFitHeight,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:r.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return f}getPixelSize(){const{width:c,height:f}=this.atlasImage;return{width:c,height:f}}getPattern(c){const f=this.patterns[c],y=this.getImage(c);if(!y)return null;if(f&&f.position.version===y.version)return f.position;if(f)f.position.version=y.version;else{const S={w:y.data.width+2,h:y.data.height+2,x:0,y:0},P=new r.I(S,y);this.patterns[c]={bin:S,position:P}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const f=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.T(c,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const P in this.patterns)c.push(this.patterns[P].bin);const{w:f,h:y}=r.p(c),S=this.atlasImage;S.resize({width:f||1,height:y||1});for(const P in this.patterns){const{bin:z}=this.patterns[P],H=z.x+1,W=z.y+1,Z=this.getImage(P).data,J=Z.width,se=Z.height;r.R.copy(Z,S,{x:0,y:0},{x:H,y:W},{width:J,height:se}),r.R.copy(Z,S,{x:0,y:se-1},{x:H,y:W-1},{width:J,height:1}),r.R.copy(Z,S,{x:0,y:0},{x:H,y:W+se},{width:J,height:1}),r.R.copy(Z,S,{x:J-1,y:0},{x:H-1,y:W},{width:1,height:se}),r.R.copy(Z,S,{x:0,y:0},{x:H+J,y:W},{width:1,height:se})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const f of c){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const y=this.getImage(f);y||r.w(`Image with ID: "${f}" was not found`),De(y)&&this.updateImage(f,y)}}cloneImages(){const c={};for(const f in this.images){const y=this.images[f];c[f]=Object.assign(Object.assign({},y),{data:y.data?y.data.clone():null})}return c}}const $e=1e20;function et(I,c,f,y,S,P,z,H,W){for(let Z=c;Z<c+y;Z++)Ie(I,f*P+Z,P,S,z,H,W);for(let Z=f;Z<f+S;Z++)Ie(I,Z*P+c,1,y,z,H,W)}function Ie(I,c,f,y,S,P,z){P[0]=0,z[0]=-$e,z[1]=$e,S[0]=I[c];for(let H=1,W=0,Z=0;H<y;H++){S[H]=I[c+H*f];const J=H*H;do{const se=P[W];Z=(S[H]-S[se]+J-se*se)/(H-se)/2}while(Z<=z[W]&&--W>-1);W++,P[W]=H,z[W]=Z,z[W+1]=$e}for(let H=0,W=0;H<y;H++){for(;z[W+1]<H;)W++;const Z=P[W],J=H-Z;I[c+H*f]=S[Z]+J*J}}const at=r.v.layout_symbol["text-font"].default.join(",");class qe{constructor(c,f,y){this.requestManager=c,this.localIdeographFontFamily=f,this.entries={},this.lang=y}setURL(c){this.url=c}getGlyphs(c){return r._(this,void 0,void 0,(function*(){const f=[];for(const P in c)for(const z of c[P])f.push(this._getAndCacheGlyphsPromise(P,z));const y=yield Promise.all(f),S={};for(const{stack:P,id:z,glyph:H}of y)S[P]||(S[P]={}),S[P][z]=H&&{id:H.id,bitmap:H.bitmap.clone(),metrics:H.metrics};return S}))}_getAndCacheGlyphsPromise(c,f){return r._(this,void 0,void 0,(function*(){let y=this.entries[c];y||(y=this.entries[c]={glyphs:{},requests:{},ranges:{}});let S=y.glyphs[f];return S!==void 0?{stack:c,id:f,glyph:S}:!this.url||this._charUsesLocalIdeographFontFamily(f)?(S=y.glyphs[f]=this._drawGlyph(y,c,f),{stack:c,id:f,glyph:S}):yield this._downloadAndCacheRangePromise(c,f)}))}_downloadAndCacheRangePromise(c,f){return r._(this,void 0,void 0,(function*(){const y=this.entries[c],S=Math.floor(f/256);if(y.ranges[S])return{stack:c,id:f,glyph:null};if(!y.requests[S]){const P=qe.loadGlyphRange(c,S,this.url,this.requestManager);y.requests[S]=P}try{const P=yield y.requests[S];for(const z in P)y.glyphs[+z]=P[+z];return y.ranges[S]=!0,{stack:c,id:f,glyph:P[f]||null}}catch(P){const z=y.glyphs[f]=this._drawGlyph(y,c,f);return this._warnOnMissingGlyphRange(z,S,f,P),{stack:c,id:f,glyph:z}}}))}_warnOnMissingGlyphRange(c,f,y,S){const P=256*f,z=P+255,H=y.toString(16).padStart(4,"0").toUpperCase();r.w(`Unable to load glyph range ${f}, ${P}-${z}. Rendering codepoint U+${H} locally instead. ${S}`)}_charUsesLocalIdeographFontFamily(c){return!!this.localIdeographFontFamily&&r.q(c)}_drawGlyph(c,f,y){const S=f===at&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(y),P=S?"ideographTinySDF":"tinySDF";c[P]||(c[P]=this._createTinySDF(S?this.localIdeographFontFamily:f));const z=c[P].draw(String.fromCodePoint(y));return{id:y,bitmap:new r.r({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(c){const f=c?c.split(","):[];f.push("sans-serif");const y=f.map((S=>/[-\w]+/.test(S)?S:`'${CSS.escape(S)}'`)).join(",");return new qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:this._fontWeight(f[0]),fontStyle:this._fontStyle(f[0]),lang:this.lang})}_fontStyle(c){return/italic/i.test(c)?"italic":/oblique/i.test(c)?"oblique":"normal"}_fontWeight(c){const f={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let y;for(const[S,P]of Object.entries(f))new RegExp(`\\b${S}\\b`,"i").test(c)&&(y=`${P}`);return y}destroy(){for(const c in this.entries){const f=this.entries[c];f.tinySDF&&(f.tinySDF=null),f.ideographTinySDF&&(f.ideographTinySDF=null),f.glyphs={},f.requests={},f.ranges={}}this.entries={}}}qe.loadGlyphRange=function(I,c,f,y){return r._(this,void 0,void 0,(function*(){const S=256*c,P=S+255,z=y.transformRequest(f.replace("{fontstack}",I).replace("{range}",`${S}-${P}`),"Glyphs"),H=yield r.n(z,new AbortController);if(!H||!H.data)throw new Error(`Could not load glyph range. range: ${c}, ${S}-${P}`);const W={};for(const Z of r.o(H.data))W[Z.id]=Z;return W}))},qe.TinySDF=class{constructor({fontSize:I=24,buffer:c=3,radius:f=8,cutoff:y=.25,fontFamily:S="sans-serif",fontWeight:P="normal",fontStyle:z="normal",lang:H=null}={}){this.buffer=c,this.cutoff=y,this.radius=f,this.lang=H;const W=this.size=I+4*c,Z=this._createCanvas(W),J=this.ctx=Z.getContext("2d",{willReadFrequently:!0});J.font=`${z} ${P} ${I}px ${S}`,J.textBaseline="alphabetic",J.textAlign="left",J.fillStyle="black",this.gridOuter=new Float64Array(W*W),this.gridInner=new Float64Array(W*W),this.f=new Float64Array(W),this.z=new Float64Array(W+1),this.v=new Uint16Array(W)}_createCanvas(I){const c=document.createElement("canvas");return c.width=c.height=I,c}draw(I){const{width:c,actualBoundingBoxAscent:f,actualBoundingBoxDescent:y,actualBoundingBoxLeft:S,actualBoundingBoxRight:P}=this.ctx.measureText(I),z=Math.ceil(f),H=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(P-S))),W=Math.min(this.size-this.buffer,z+Math.ceil(y)),Z=H+2*this.buffer,J=W+2*this.buffer,se=Math.max(Z*J,0),re=new Uint8ClampedArray(se),fe={data:re,width:Z,height:J,glyphWidth:H,glyphHeight:W,glyphTop:z,glyphLeft:0,glyphAdvance:c};if(H===0||W===0)return fe;const{ctx:ye,buffer:Te,gridInner:Me,gridOuter:Ee}=this;this.lang&&(ye.lang=this.lang),ye.clearRect(Te,Te,H,W),ye.fillText(I,Te,Te+z);const Fe=ye.getImageData(Te,Te,H,W);Ee.fill($e,0,se),Me.fill(0,0,se);for(let Ge=0;Ge<W;Ge++)for(let Oe=0;Oe<H;Oe++){const Ve=Fe.data[4*(Ge*H+Oe)+3]/255;if(Ve===0)continue;const Xe=(Ge+Te)*Z+Oe+Te;if(Ve===1)Ee[Xe]=0,Me[Xe]=$e;else{const Ne=.5-Ve;Ee[Xe]=Ne>0?Ne*Ne:0,Me[Xe]=Ne<0?Ne*Ne:0}}et(Ee,0,0,Z,J,Z,this.f,this.v,this.z),et(Me,Te,Te,H,W,Z,this.f,this.v,this.z);for(let Ge=0;Ge<se;Ge++){const Oe=Math.sqrt(Ee[Ge])-Math.sqrt(Me[Ge]);re[Ge]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return fe}};class kt{constructor(){this.specification=r.u.light.position}possiblyEvaluate(c,f){return r.F(c.expression.evaluate(f))}interpolate(c,f,y){return{x:r.G.number(c.x,f.x,y),y:r.G.number(c.y,f.y,y),z:r.G.number(c.z,f.z,y)}}}let vt;class He extends r.E{constructor(c){super(),vt=vt||new r.t({anchor:new r.D(r.u.light.anchor),position:new kt,color:new r.D(r.u.light.color),intensity:new r.D(r.u.light.intensity)}),this._transitionable=new r.x(vt,void 0),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,f={}){if(!this._validate(r.y,c,f))for(const y in c){const S=c[y];y.endsWith(r.z)?this._transitionable.setTransition(y.slice(0,-r.z.length),S):this._transitionable.setValue(y,S)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,f,y){return(!y||y.validate!==!1)&&r.B(this,c.call(r.C,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:r.u}))}}const Nt=new r.t({"sky-color":new r.D(r.u.sky["sky-color"]),"horizon-color":new r.D(r.u.sky["horizon-color"]),"fog-color":new r.D(r.u.sky["fog-color"]),"fog-ground-blend":new r.D(r.u.sky["fog-ground-blend"]),"horizon-fog-blend":new r.D(r.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new r.D(r.u.sky["sky-horizon-blend"]),"atmosphere-blend":new r.D(r.u.sky["atmosphere-blend"])});class Qt extends r.E{constructor(c){super(),this._transitionable=new r.x(Nt,void 0),this.setSky(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new r.H(0))}setSky(c,f={}){if(!this._validate(r.J,c,f)){c||(c={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in c){const S=c[y];y.endsWith(r.z)?this._transitionable.setTransition(y.slice(0,-r.z.length),S):this._transitionable.setValue(y,S)}}}getSky(){return this._transitionable.serialize()}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,f,y={}){return y?.validate!==!1&&r.B(this,c.call(r.C,r.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:r.u})))}calculateFogBlendOpacity(c){return c<60?0:c<70?(c-60)/10:1}}class Ai{constructor(c,f){this.width=c,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,f){const y=c.join(",")+String(f);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(c,f)),this.dashEntry[y]}getDashRanges(c,f,y){const S=[];let P=c.length%2==1?-c[c.length-1]*y:0,z=c[0]*y,H=!0;S.push({left:P,right:z,isDash:H,zeroLength:c[0]===0});let W=c[0];for(let Z=1;Z<c.length;Z++){H=!H;const J=c[Z];P=W*y,W+=J,z=W*y,S.push({left:P,right:z,isDash:H,zeroLength:J===0})}return S}addRoundDash(c,f,y){const S=f/2;for(let P=-y;P<=y;P++){const z=this.width*(this.nextRow+y+P);let H=0,W=c[H];for(let Z=0;Z<this.width;Z++){Z/W.right>1&&(W=c[++H]);const J=Math.abs(Z-W.left),se=Math.abs(Z-W.right),re=Math.min(J,se);let fe;const ye=P/y*(S+1);if(W.isDash){const Te=S-Math.abs(ye);fe=Math.sqrt(re*re+Te*Te)}else fe=S-Math.sqrt(re*re+ye*ye);this.data[z+Z]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(c){for(let H=c.length-1;H>=0;--H){const W=c[H],Z=c[H+1];W.zeroLength?c.splice(H,1):Z&&Z.isDash===W.isDash&&(Z.left=W.left,c.splice(H,1))}const f=c[0],y=c[c.length-1];f.isDash===y.isDash&&(f.left=y.left-this.width,y.right=f.right+this.width);const S=this.width*this.nextRow;let P=0,z=c[P];for(let H=0;H<this.width;H++){H/z.right>1&&(z=c[++P]);const W=Math.abs(H-z.left),Z=Math.abs(H-z.right),J=Math.min(W,Z);this.data[S+H]=Math.max(0,Math.min(255,(z.isDash?J:-J)+128))}}addDash(c,f){const y=f?7:0,S=2*y+1;if(this.nextRow+S>this.height)return r.w("LineAtlas out of space"),null;let P=0;for(let H=0;H<c.length;H++)P+=c[H];if(P!==0){const H=this.width/P,W=this.getDashRanges(c,this.width,H);f?this.addRoundDash(W,H,y):this.addRegularDash(W)}const z={y:this.nextRow+y,height:2*y,width:P};return this.nextRow+=S,this.dirty=!0,z}bind(c){const f=c.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}const jt="maplibre_preloaded_worker_pool";class ui{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<ui.workerCount;)this.workers.push(new Worker(r.c.WORKER_URL));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach((f=>{f.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[jt]}numActive(){return Object.keys(this.active).length}}const Ct=Math.floor(E.hardwareConcurrency/2);let ri,Zt;function Pi(){return ri||(ri=new ui),ri}ui.workerCount=r.K(globalThis)?Math.max(Math.min(Ct,3),1):1;class Fi{constructor(c,f){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=f;const y=this.workerPool.acquire(f);for(let S=0;S<y.length;S++){const P=new r.L(y[S],f);P.name=`Worker ${S}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,f){const y=[];for(const S of this.actors)y.push(S.sendAsync({type:c,data:f}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(c=!0){this.actors.forEach((f=>{f.remove()})),this.actors=[],c&&this.workerPool.release(this.id)}registerMessageHandler(c,f){for(const y of this.actors)y.registerMessageHandler(c,f)}unregisterMessageHandler(c){for(const f of this.actors)f.unregisterMessageHandler(c)}}function Li(){return Zt||(Zt=new Fi(Pi(),r.M),Zt.registerMessageHandler("GR",((I,c,f)=>r.m(c,f)))),Zt}function en(I,c){const f=r.N();return r.O(f,f,[1,1,0]),r.Q(f,f,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?r.S(f,f,I.calculatePosMatrix(c.toUnwrapped())):f}function qt(I,c,f,y,S,P,z){var H;const W=(function(re,fe,ye){if(re)for(const Te of re){const Me=fe[Te];if(Me&&Me.source===ye&&Me.type==="fill-extrusion")return!0}else for(const Te in fe){const Me=fe[Te];if(Me.source===ye&&Me.type==="fill-extrusion")return!0}return!1})((H=S?.layers)!==null&&H!==void 0?H:null,c,I.id),Z=P.maxPitchScaleFactor(),J=I.tilesIn(y,Z,W);J.sort(Ti);const se=[];for(const re of J)se.push({wrappedTileID:re.tileID.wrapped().key,queryResults:re.tile.queryRenderedFeatures(c,f,I.getState(),re.queryGeometry,re.cameraQueryGeometry,re.scale,S,P,Z,en(P,re.tileID),z?(fe,ye)=>z(re.tileID,fe,ye):void 0)});return(function(re,fe){for(const ye in re)for(const Te of re[ye])tn(Te,fe);return re})((function(re){const fe={},ye={};for(const Te of re){const Me=Te.queryResults,Ee=Te.wrappedTileID,Fe=ye[Ee]=ye[Ee]||{};for(const Ge in Me){const Oe=Me[Ge],Ve=Fe[Ge]=Fe[Ge]||{},Xe=fe[Ge]=fe[Ge]||[];for(const Ne of Oe)Ve[Ne.featureIndex]||(Ve[Ne.featureIndex]=!0,Xe.push(Ne))}}return fe})(se),I)}function Ti(I,c){const f=I.tileID,y=c.tileID;return f.overscaledZ-y.overscaledZ||f.canonical.y-y.canonical.y||f.wrap-y.wrap||f.canonical.x-y.canonical.x}function tn(I,c){const f=I.feature,y=c.getFeatureState(f.layer["source-layer"],f.id);f.source=f.layer.source,f.layer["source-layer"]&&(f.sourceLayer=f.layer["source-layer"]),f.state=y}function Bn(I,c,f){return r._(this,void 0,void 0,(function*(){let y=I;if(I.url?y=(yield r.j(c.transformRequest(I.url,"Source"),f)).data:yield E.frameAsync(f),!y)return null;const S=r.U(r.e(y,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(S.vectorLayerIds=y.vector_layers.map((P=>P.id))),S}))}class st{constructor(c,f){c&&(f?this.setSouthWest(c).setNorthEast(f):Array.isArray(c)&&(c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1])))}setNorthEast(c){return this._ne=c instanceof r.V?new r.V(c.lng,c.lat):r.V.convert(c),this}setSouthWest(c){return this._sw=c instanceof r.V?new r.V(c.lng,c.lat):r.V.convert(c),this}extend(c){const f=this._sw,y=this._ne;let S,P;if(c instanceof r.V)S=c,P=c;else{if(!(c instanceof st))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(st.convert(c)):this.extend(r.V.convert(c)):c&&("lng"in c||"lon"in c)&&"lat"in c?this.extend(r.V.convert(c)):this;if(S=c._sw,P=c._ne,!S||!P)return this}return f||y?(f.lng=Math.min(S.lng,f.lng),f.lat=Math.min(S.lat,f.lat),y.lng=Math.max(P.lng,y.lng),y.lat=Math.max(P.lat,y.lat)):(this._sw=new r.V(S.lng,S.lat),this._ne=new r.V(P.lng,P.lat)),this}getCenter(){return new r.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new r.V(this.getWest(),this.getNorth())}getSouthEast(){return new r.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:f,lat:y}=r.V.convert(c);let S=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&S}intersects(c){if(!((c=st.convert(c)).getNorth()>=this.getSouth()&&c.getSouth()<=this.getNorth()))return!1;const f=Math.abs(this.getEast()-this.getWest()),y=Math.abs(c.getEast()-c.getWest());if(f>=360||y>=360)return!0;const S=r.W(this.getWest(),-180,180),P=r.W(this.getEast(),-180,180),z=r.W(c.getWest(),-180,180),H=r.W(c.getEast(),-180,180),W=S>=P,Z=z>=H;return!(!W||!Z)||(W?H>=S||z<=P:Z?P>=z||S<=H:z<=P&&H>=S)}static convert(c){return c instanceof st?c:c&&new st(c)}static fromLngLat(c,f=0){const y=360*f/40075017,S=y/Math.cos(Math.PI/180*c.lat);return new st(new r.V(c.lng-S,c.lat-y),new r.V(c.lng+S,c.lat+y))}adjustAntiMeridian(){const c=new r.V(this._sw.lng,this._sw.lat),f=new r.V(this._ne.lng,this._ne.lat);return new st(c,c.lng>f.lng?new r.V(f.lng+360,f.lat):f)}}class ji{constructor(c,f,y){this.bounds=st.convert(this.validateBounds(c)),this.minzoom=f||0,this.maxzoom=y||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const f=Math.pow(2,c.z),y=Math.floor(r.Y(this.bounds.getWest())*f),S=Math.floor(r.X(this.bounds.getNorth())*f),P=Math.ceil(r.Y(this.bounds.getEast())*f),z=Math.ceil(r.X(this.bounds.getSouth())*f);return c.x>=y&&c.x<P&&c.y>=S&&c.y<z}}class Bi extends r.E{constructor(c,f,y,S){if(super(),this.id=c,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.e(this,r.U(f,["url","scheme","tileSize","promoteId","encoding"])),this._options=r.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){return r._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new r.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Bn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),c&&(r.e(this,c),c.bounds&&(this.tileBounds=new ji(c.bounds,this.minzoom,this.maxzoom)),this.fire(new r.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.l("data",{dataType:"source",sourceDataType:"content"})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,r.Z(c)||this.fire(new r.k(c))}}))}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.abort(),c(),this.load()}setTiles(c){return this.setSourceProperty((()=>{this._options.tiles=c})),this}setUrl(c){return this.setSourceProperty((()=>{this.url=c,this._options.url=c})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return r.e({},this._options)}loadTile(c){return r._(this,void 0,void 0,(function*(){const f=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(f,"Tile"),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(c)};y.request.collectResourceTiming=this._collectResourceTiming;let S="RT";if(c.actor&&c.state!=="expired"){if(c.state==="loading")return new Promise(((P,z)=>{c.reloadPromise={resolve:P,reject:z}}))}else c.actor=this.dispatcher.getActor(),S="LT";c.abortController=new AbortController;try{const P=yield c.actor.sendAsync({type:S,data:y},c.abortController);if(delete c.abortController,c.aborted)return;this._afterTileLoadWorkerResponse(c,P)}catch(P){if(delete c.abortController,c.aborted)return;if(P&&P.status!==404)throw P;this._afterTileLoadWorkerResponse(c,null)}}))}_getOverzoomParameters(c){if(c.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const f=c.tileID.scaledTo(this.maxzoom).canonical,y=f.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:f,overzoomRequest:this.map._requestManager.transformRequest(y,"Tile")}}_afterTileLoadWorkerResponse(c,f){if(f&&f.resourceTiming&&(c.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&c.setExpiryData(f),c.loadVectorData(f,this.map.painter),c.reloadPromise){const y=c.reloadPromise;c.reloadPromise=null,this.loadTile(c).then(y.resolve).catch(y.reject)}}abortTile(c){return r._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.actor&&(yield c.actor.sendAsync({type:"AT",data:{uid:c.uid,type:this.type,source:this.id}}))}))}unloadTile(c){return r._(this,void 0,void 0,(function*(){c.unloadVectorData(),c.actor&&(yield c.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Qa extends r.E{constructor(c,f,y,S){super(),this.id=c,this.dispatcher=y,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.e({type:"raster"},f),r.e(this,r.U(f,["url","scheme","tileSize"]))}load(){return r._(this,arguments,void 0,(function*(c=!1){this._loaded=!1,this.fire(new r.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const f=yield Bn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,f&&(r.e(this,f),f.bounds&&(this.tileBounds=new ji(f.bounds,this.minzoom,this.maxzoom)),this.fire(new r.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:c})))}catch(f){this._tileJSONRequest=null,this._loaded=!0,r.Z(f)||this.fire(new r.k(f))}}))}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(c){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),c(),this.load(!0)}setTiles(c){return this.setSourceProperty((()=>{this._options.tiles=c})),this}setUrl(c){return this.setSourceProperty((()=>{this.url=c,this._options.url=c})),this}serialize(){return r.e({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c){return r._(this,void 0,void 0,(function*(){const f=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.abortController=new AbortController;try{const y=yield te.getImage(this.map._requestManager.transformRequest(f,"Tile"),c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&c.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const S=this.map.painter.context,P=S.gl,z=y.data;c.texture=this.map.painter.getTileTexture(z.width),c.texture?c.texture.update(z,{useMipmap:!0}):(c.texture=new r.T(S,z,P.RGBA,{useMipmap:!0}),c.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST)),c.state="loaded"}}catch(y){if(delete c.abortController,c.aborted)c.state="unloaded";else if(y)throw c.state="errored",y}}))}abortTile(c){return r._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController)}))}unloadTile(c){return r._(this,void 0,void 0,(function*(){c.texture&&this.map.painter.saveTileTexture(c.texture)}))}hasTransition(){return!1}}class Gt extends Qa{constructor(c,f,y,S){super(c,f,y,S),this.type="raster-dem",this.maxzoom=22,this._options=r.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(c){return r._(this,void 0,void 0,(function*(){const f=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(f,"Tile");c.neighboringTiles=this._getNeighboringTiles(c.tileID),c.abortController=new AbortController;try{const S=yield te.getImage(y,c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(S&&S.data){const P=S.data;this.map._refreshExpiredTiles&&(S.cacheControl||S.expires)&&c.setExpiryData({cacheControl:S.cacheControl,expires:S.expires});const z=r.b(P)&&r.$()?P:yield this.readImageNow(P),H={type:this.type,uid:c.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!c.actor||c.state==="expired"){c.actor=this.dispatcher.getActor();const W=yield c.actor.sendAsync({type:"LDT",data:H});c.dem=W,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded"}}}catch(S){if(delete c.abortController,c.aborted)c.state="unloaded";else if(S)throw c.state="errored",S}}))}readImageNow(c){return r._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&r.a0()){const f=c.width+2,y=c.height+2;try{return new r.R({width:f,height:y},yield r.a1(c,-1,-1,f,y))}catch{}}return E.getImageData(c,1)}))}_getNeighboringTiles(c){const f=c.canonical,y=Math.pow(2,f.z),S=(f.x-1+y)%y,P=f.x===0?c.wrap-1:c.wrap,z=(f.x+1+y)%y,H=f.x+1===y?c.wrap+1:c.wrap,W={};return W[new r.a2(c.overscaledZ,P,f.z,S,f.y).key]={backfilled:!1},W[new r.a2(c.overscaledZ,H,f.z,z,f.y).key]={backfilled:!1},f.y>0&&(W[new r.a2(c.overscaledZ,P,f.z,S,f.y-1).key]={backfilled:!1},W[new r.a2(c.overscaledZ,c.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},W[new r.a2(c.overscaledZ,H,f.z,z,f.y-1).key]={backfilled:!1}),f.y+1<y&&(W[new r.a2(c.overscaledZ,P,f.z,S,f.y+1).key]={backfilled:!1},W[new r.a2(c.overscaledZ,c.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},W[new r.a2(c.overscaledZ,H,f.z,z,f.y+1).key]={backfilled:!1}),W}unloadTile(c){return r._(this,void 0,void 0,(function*(){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&(yield c.actor.sendAsync({type:"RDT",data:{type:this.type,uid:c.uid,source:this.id}}))}))}}function la(I){return I.type==="GeometryCollection"?I.geometries.map((c=>c.coordinates)).flat(1/0):I.coordinates.flat(1/0)}function vr(I){const c=new st;let f;switch(I.type){case"FeatureCollection":f=I.features.map((y=>la(y.geometry))).flat(1/0);break;case"Feature":f=la(I.geometry);break;default:f=la(I)}if(f.length==0)return c;for(let y=0;y<f.length-1;y+=2)c.extend([f[y],f[y+1]]);return c}class va extends r.E{constructor(c,f,y,S){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:f.data},this.actor=y.getActor(),this.setEventedParent(S),this._data=typeof f.data=="string"?{url:f.data}:{geojson:f.data},this._options=r.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId,f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&r.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${f.clusterMaxZoom}".`),this.workerOptions=r.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(f.buffer!==void 0?f.buffer:128),tolerance:this._pixelsToTileUnits(f.tolerance!==void 0?f.tolerance:.375),extent:r.a5,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(f.clusterMaxZoom),minPoints:Math.max(2,f.clusterMinPoints||2),extent:r.a5,radius:this._pixelsToTileUnits(f.clusterRadius||50),log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(c){return c*(r.a5/this.tileSize)}_getClusterMaxZoom(c){const f=c?Math.round(c):this.maxzoom-1;return Number.isInteger(c)||c===void 0||r.w(`Integer expected for option 'clusterMaxZoom': provided value "${c}" rounded to "${f}"`),f}load(){return r._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(c){this.map=c,this.load()}setData(c,f){this._data=typeof c=="string"?{url:c}:{geojson:c},this._pendingWorkerUpdate={data:c};const y=this._updateWorkerData();return f?y:this}updateData(c,f){this._pendingWorkerUpdate.diff=r.a6(this._pendingWorkerUpdate.diff,c);const y=this._updateWorkerData();return f?y:this}getData(){return r._(this,void 0,void 0,(function*(){const c=r.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:c})}))}getBounds(){return r._(this,void 0,void 0,(function*(){return vr(yield this.getData())}))}setClusterOptions(c){return this.workerOptions.cluster=c.cluster,c.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(c.clusterRadius)),c.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(c.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(c){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:c,source:this.id}})}getClusterChildren(c){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:c,source:this.id}})}getClusterLeaves(c,f,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:c,limit:f,offset:y}})}_updateWorkerData(){return r._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void r.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:c,diff:f}=this._pendingWorkerUpdate,y=r.e({type:this.type},this.workerOptions);c!==void 0?(typeof c=="string"?(y.request=this.map._requestManager.transformRequest(E.resolveURL(c),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=c,this._pendingWorkerUpdate.data=void 0):f&&(y.dataDiff=f,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new r.l("dataloading",{dataType:"source"}));try{const S=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||S.abandoned)return void this.fire(new r.l("dataabort",{dataType:"source"}));S.data&&(this._data={geojson:S.data});const P=this._applyDiffToSource(f),z=this._getShouldReloadTileOptions(P);let H=null;S.resourceTiming&&S.resourceTiming[this.id]&&(H=S.resourceTiming[this.id].slice(0));const W={dataType:"source"};this._collectResourceTiming&&H&&H.length>0&&r.e(W,{resourceTiming:H}),this.fire(new r.l("data",Object.assign(Object.assign({},W),{sourceDataType:"metadata"}))),this.fire(new r.l("data",Object.assign(Object.assign({},W),{sourceDataType:"content",shouldReloadTileOptions:z})))}catch(S){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new r.l("dataabort",{dataType:"source"}));this.fire(new r.k(S))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(c){if(!c)return;const f=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const S=r.a7(this._data.geojson,f);if(!S)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:S}}if(!this._data.updateable)return;const y=r.a8(this._data.updateable,c,f);return c.removeAll||this._options.cluster?void 0:y}_getShouldReloadTileOptions(c){if(c)return{affectedBounds:c.filter(Boolean).map((f=>vr(f)))}}shouldReloadTile(c,{affectedBounds:f}){if(c.state==="loading")return!0;if(c.state==="unloaded")return!1;const{buffer:y,extent:S}=this.workerOptions.geojsonVtOptions,P=(function({x:z,y:H,z:W},Z=0){const J=r.a3((z-Z)/Math.pow(2,W)),se=r.a4((H+1+Z)/Math.pow(2,W)),re=r.a3((z+1+Z)/Math.pow(2,W)),fe=r.a4((H-Z)/Math.pow(2,W));return new st([J,se],[re,fe])})(c.tileID.canonical,y/S);for(const z of f)if(P.intersects(z))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(c){return r._(this,void 0,void 0,(function*(){const f=c.actor?"RT":"LT";c.actor=this.actor;const y={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};c.abortController=new AbortController;const S=yield this.actor.sendAsync({type:f,data:y},c.abortController);delete c.abortController,c.unloadVectorData(),c.aborted||c.loadVectorData(S,this.map.painter,f==="RT")}))}abortTile(c){return r._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.aborted=!0}))}unloadTile(c){return r._(this,void 0,void 0,(function*(){c.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return r.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class un extends r.E{constructor(c,f,y,S){super(),this.flippedWindingOrder=!1,this.id=c,this.dispatcher=y,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=f}load(c){return r._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new r.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const f=yield te.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,c&&(this.coordinates=c),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,r.Z(f)||this.fire(new r.k(f))}}))}loaded(){return this._loaded}updateImage(c){return c.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=c.url,this.load(c.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(c){this.coordinates=c;const f=c.map(r.a9.fromLngLat);var y;return this.tileID=(function(S){const P=r.aa.fromPoints(S),z=P.width(),H=P.height(),W=Math.max(z,H),Z=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),J=Math.pow(2,Z);return new r.ac(Z,Math.floor((P.minX+P.maxX)/2*J),Math.floor((P.minY+P.maxY)/2*J))})(f),this.terrainTileRanges=this._getOverlappingTileRanges(f),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=f.map((S=>this.tileID.getTilePoint(S)._round())),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new r.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,f=c.gl;this.texture||(this.texture=new r.T(c,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let y=!1;for(const S in this.tiles){const P=this.tiles[S];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,y=!0)}y&&this.fire(new r.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(c){return r._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={}):c.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(c){const{minX:f,minY:y,maxX:S,maxY:P}=r.aa.fromPoints(c),z={};for(let H=0;H<=r.ab;H++){const W=Math.pow(2,H),Z=Math.floor(f*W),J=Math.floor(y*W),se=Math.floor(S*W),re=Math.floor(P*W);z[H]={minTileX:Z,minTileY:J,maxTileX:se,maxTileY:re}}return z}}class tt extends un{constructor(c,f,y,S){super(c,f,y,S),this.roundZoom=!0,this.type="video",this.options=f}load(){return r._(this,void 0,void 0,(function*(){this._loaded=!1;const c=this.options;this.urls=[];for(const f of c.urls)this.urls.push(this.map._requestManager.transformRequest(f,"Source").url);try{const f=yield r.ad(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new r.k(f))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const f=this.video.seekable;c<f.start(0)||c>f.end(0)?this.fire(new r.k(new r.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const c=this.map.painter.context,f=c.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new r.T(c,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let y=!1;for(const S in this.tiles){const P=this.tiles[S];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,y=!0)}y&&this.fire(new r.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class _e extends un{constructor(c,f,y,S){super(c,f,y,S),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some((P=>!Array.isArray(P)||P.length!==2||P.some((z=>typeof z!="number"))))||this.fire(new r.k(new r.ae(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.k(new r.ae(`sources.${c}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new r.k(new r.ae(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new r.k(new r.ae(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.k(new r.ae(`sources.${c}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return r._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,y=f.gl;this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new r.T(f,this.canvas,y.RGBA,{premultiply:!0}),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let S=!1;for(const P in this.tiles){const z=this.tiles[P];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,S=!0)}S&&this.fire(new r.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const xe={},be=I=>{switch(I){case"geojson":return va;case"image":return un;case"raster":return Qa;case"raster-dem":return Gt;case"vector":return Bi;case"video":return tt;case"canvas":return _e}return xe[I]},je="RTLPluginLoaded";class We extends r.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Li()}_syncState(c){return this.status=c,this.dispatcher.broadcast("SRPS",{pluginStatus:c,pluginURL:this.url}).catch((f=>{throw this.status="error",f}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(c){return r._(this,arguments,void 0,(function*(f,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=E.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return r._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new r.l(je))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let it=null;function Qe(){return it||(it=new We),it}var Pe,nt;(function(I){I[I.Base=0]="Base",I[I.Parent=1]="Parent"})(Pe||(Pe={})),(function(I){I[I.Departing=0]="Departing",I[I.Incoming=1]="Incoming"})(nt||(nt={}));class mt{constructor(c,f){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=c,this.uid=r.af(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(c){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(c||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:c,fadingDirection:f,fadingParentID:y,fadeEndTime:S}){this.resetFadeLogic(),this.fadingRole=c,this.fadingDirection=f,this.fadingParentID=y,this.fadeEndTime=S}setSelfFadeLogic(c){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=c}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=O(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(c,f,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData,this.latestFeatureIndex.encoding=c.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=(function(S,P){const z={};if(!P)return z;for(const H of S){const W=H.layerIds.map((Z=>P.getLayer(Z))).filter(Boolean);if(W.length!==0){H.layers=W,H.stateDependentLayerIds&&(H.stateDependentLayers=H.stateDependentLayerIds.map((Z=>W.filter((J=>J.id===Z))[0])));for(const Z of W)z[Z.id]=H}}return z})(c.buckets,f?.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const P=this.buckets[S];if(P instanceof r.ah){if(this.hasSymbolBuckets=!0,!y)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const P=this.buckets[S];if(P instanceof r.ah&&P.hasRTLText){this.hasRTLText=!0,Qe().lazyLoad();break}}this.queryPadding=0;for(const S in this.buckets){const P=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(S).queryRadius(P))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage),this.dashPositions=c.dashPositions}else this.collisionBoxArray=new r.ag}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const y in this.buckets){const S=this.buckets[y];S.uploadPending()&&S.upload(c)}const f=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new r.T(c,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new r.T(c,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,f,y,S,P,z,H,W,Z,J,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:P,scale:z,tileSize:this.tileSize,pixelPosMatrix:J,transform:W,params:H,queryPadding:this.queryPadding*Z,getElevation:se},c,f,y):{}}querySourceFeatures(c,f){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const S=y.loadVTLayers(),P=f&&f.sourceLayer?f.sourceLayer:"",z=S[r.ai]||S[P];if(!z)return;const H=r.aj(f?.filter,f?.globalState),{z:W,x:Z,y:J}=this.tileID.canonical,se={z:W,x:Z,y:J};for(let re=0;re<z.length;re++){const fe=z.feature(re);if(H.needGeometry){const Me=r.ak(fe,!0);if(!H.filter(new r.H(this.tileID.overscaledZ),Me,this.tileID.canonical))continue}else if(!H.filter(new r.H(this.tileID.overscaledZ),fe))continue;const ye=y.getId(fe,P),Te=new r.al(fe,W,Z,J,ye);Te.tile=se,c.push(Te)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const f=this.expirationTime;if(c.cacheControl){const y=r.am(c.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const y=Date.now();let S=!1;if(this.expirationTime>y)S=!1;else if(f)if(this.expirationTime<f)S=!0;else{const P=this.expirationTime-f;P?this.expirationTime=y+Math.max(P,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!f.style.hasLayer(S))continue;const P=this.buckets[S],z=P.layers[0].sourceLayer||r.ai,H=y[z],W=c[z];if(!H||!W||Object.keys(W).length===0)continue;P.update(W,H,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const Z=f&&f.style&&f.style.getLayer(S);Z&&(this.queryPadding=Math.max(this.queryPadding,Z.queryRadius(P)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(c){this.symbolFadeHoldUntil=O()+c}setDependencies(c,f){const y={};for(const S of f)y[S]=!0;this.dependencies[c]=y}hasDependency(c,f){for(const y of c){const S=this.dependencies[y];if(S){for(const P of f)if(S[P])return!0}}return!1}}class pt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,f,y){const S=String(f);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][S]=this.stateChanges[c][S]||{},r.e(this.stateChanges[c][S],y),this.deletedStates[c]===null){this.deletedStates[c]={};for(const P in this.state[c])P!==S&&(this.deletedStates[c][P]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][S]===null){this.deletedStates[c][S]={};for(const P in this.state[c][S])y[P]||(this.deletedStates[c][S][P]=null)}else for(const P in y)this.deletedStates[c]&&this.deletedStates[c][S]&&this.deletedStates[c][S][P]===null&&delete this.deletedStates[c][S][P]}removeFeatureState(c,f,y){if(this.deletedStates[c]===null)return;const S=String(f);if(this.deletedStates[c]=this.deletedStates[c]||{},y&&f!==void 0)this.deletedStates[c][S]!==null&&(this.deletedStates[c][S]=this.deletedStates[c][S]||{},this.deletedStates[c][S][y]=null);else if(f!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][S])for(y in this.deletedStates[c][S]={},this.stateChanges[c][S])this.deletedStates[c][S][y]=null;else this.deletedStates[c][S]=null;else this.deletedStates[c]=null}getState(c,f){const y=String(f),S=r.e({},(this.state[c]||{})[y],(this.stateChanges[c]||{})[y]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const P=this.deletedStates[c][f];if(P===null)return{};for(const z in P)delete S[z]}return S}initializeTileState(c,f){c.setFeatureState(this.state,f)}coalesceChanges(c,f){const y={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const P={};for(const z in this.stateChanges[S])this.state[S][z]||(this.state[S][z]={}),r.e(this.state[S][z],this.stateChanges[S][z]),P[z]=this.state[S][z];y[S]=P}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const P={};if(this.deletedStates[S]===null)for(const z in this.state[S])P[z]={},this.state[S][z]={};else for(const z in this.deletedStates[S]){if(this.deletedStates[S][z]===null)this.state[S][z]={};else for(const H of Object.keys(this.deletedStates[S][z]))delete this.state[S][z][H];P[z]=this.state[S][z]}y[S]=y[S]||{},r.e(y[S],P)}this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0&&c.setFeatureState(y,f)}}const Vt=89.25;function Pt(I,c){const f=r.an(c.lat,-r.ao,r.ao);return new r.P(r.Y(c.lng)*I,r.X(f)*I)}function wi(I,c){return new r.a9(c.x/I,c.y/I).toLngLat()}function si(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(r.ap(90-I.pitch)),Math.tan(r.ap(Vt-I.pitch)))}function Oi(I,c){const f=I.canonical,y=c/r.aq(f.z),S=f.x+Math.pow(2,f.z)*I.wrap,P=r.ar(new Float64Array(16));return r.O(P,P,[S*y,f.y*y,0]),r.Q(P,P,[y/r.a5,y/r.a5,1]),P}function rt(I,c,f,y,S){const P=r.a9.fromLngLat(I,c),z=S*r.as(1,I.lat),{x:H,y:W,z:Z}=an(f,y);return new r.a9(P.x+z*-H,P.y+z*-W,P.z+z*-Z)}function an(I,c){const f=r.ap(I),y=r.ap(c),S=Math.cos(-f),P=Math.sin(f);return{x:P*Math.sin(y),y:-P*Math.cos(y),z:S}}function pn(I,c,f){const y=c.intersectsFrustum(I);if(!f||y===0)return y;const S=c.intersectsPlane(f);return S===0?0:y===2&&S===2?2:1}function yi(I,c,f){let y=0;const S=(f-c)/10;for(let P=0;P<10;P++)y+=S*Math.pow(Math.cos(c+(P+.5)/10*(f-c)),I);return y}function zi(I,c){return function(f,y,S,P,z){const H=2*((I-1)/r.at(Math.cos(r.ap(Vt-z))/Math.cos(r.ap(Vt)))-1),W=Math.acos(S/P),Z=2*yi(H-1,0,r.ap(z/2)),J=Math.min(r.ap(Vt),W+r.ap(z/2)),se=yi(H-1,Math.min(J,W-r.ap(z/2)),J),re=Math.atan(y/S),fe=Math.hypot(y,S);let ye=f;return ye+=r.at(P/fe/Math.max(.5,Math.cos(r.ap(z/2)))),ye+=H*r.at(Math.cos(re))/2,ye-=r.at(Math.max(1,se/Z/c))/2,ye}}const di=zi(9.314,3);function Jt(I,c){const f=(c.roundZoom?Math.round:Math.floor)(I.zoom+r.at(I.tileSize/c.tileSize));return Math.max(0,f)}function fi(I,c){const f=I.getCameraFrustum(),y=I.getClippingPlane(),S=I.screenPointToMercatorCoordinate(I.getCameraPoint()),P=r.a9.fromLngLat(I.center,I.elevation);S.z=P.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const z=I.getCoveringTilesDetailsProvider(),H=z.allowVariableZoom(I,c),W=Jt(I,c),Z=c.minzoom||0,J=c.maxzoom!==void 0?c.maxzoom:I.maxZoom,se=Math.min(Math.max(0,W),J),re=Math.pow(2,se),fe=[re*S.x,re*S.y,0],ye=[re*P.x,re*P.y,0],Te=Math.hypot(P.x-S.x,P.y-S.y),Me=Math.abs(P.z-S.z),Ee=Math.hypot(Te,Me),Fe=Ve=>({zoom:0,x:0,y:0,wrap:Ve,fullyVisible:!1}),Ge=[],Oe=[];if(I.renderWorldCopies&&z.allowWorldCopies())for(let Ve=1;Ve<=3;Ve++)Ge.push(Fe(-Ve)),Ge.push(Fe(Ve));for(Ge.push(Fe(0));Ge.length>0;){const Ve=Ge.pop(),Xe=Ve.x,Ne=Ve.y;let Ke=Ve.fullyVisible;const gt={x:Xe,y:Ne,z:Ve.zoom},lt=z.getTileBoundingVolume(gt,Ve.wrap,I.elevation,c);if(!Ke){const Bt=pn(f,lt,y);if(Bt===0)continue;Ke=Bt===2}const ht=z.distanceToTile2d(S.x,S.y,gt,lt);let dt=W;H&&(dt=(c.calculateTileZoom||di)(I.zoom+r.at(I.tileSize/c.tileSize),ht,Me,Ee,I.fov)),dt=(c.roundZoom?Math.round:Math.floor)(dt),dt=Math.max(0,dt);const Ot=Math.min(dt,J);if(Ve.wrap=z.getWrap(P,gt,Ve.wrap),Ve.zoom>=Ot){if(Ve.zoom<Z)continue;const Bt=se-Ve.zoom,Mt=fe[0]-.5-(Xe<<Bt),$t=fe[1]-.5-(Ne<<Bt),Hi=c.reparseOverscaled?Math.max(Ve.zoom,dt):Ve.zoom;Oe.push({tileID:new r.a2(Ve.zoom===J?Hi:Ve.zoom,Ve.wrap,Ve.zoom,Xe,Ne),distanceSq:r.au([ye[0]-.5-Xe,ye[1]-.5-Ne]),tileDistanceToCamera:Math.sqrt(Mt*Mt+$t*$t)})}else for(let Bt=0;Bt<4;Bt++)Ge.push({zoom:Ve.zoom+1,x:(Xe<<1)+Bt%2,y:(Ne<<1)+(Bt>>1),wrap:Ve.wrap,fullyVisible:Ke})}return Oe.sort(((Ve,Xe)=>Ve.distanceSq-Xe.distanceSq)).map((Ve=>Ve.tileID))}const Rt=r.aa.fromPoints([new r.P(0,0),new r.P(r.a5,r.a5)]);function oi(I){return I==="raster"||I==="image"||I==="video"}function bi(I,c,f,y,S,P,z){if(!c.hasData())return!1;const{tileID:H,fadingRole:W,fadingDirection:Z,fadingParentID:J}=c;if(W===Pe.Base&&Z===nt.Incoming&&J)return f[J.key]=J,!0;const se=Math.max(H.overscaledZ-S,P);for(let re=H.overscaledZ-1;re>=se;re--){const fe=H.scaledTo(re),ye=I.getLoadedTile(fe);if(ye)return c.setCrossFadeLogic({fadingRole:Pe.Base,fadingDirection:nt.Incoming,fadingParentID:ye.tileID,fadeEndTime:y+z}),ye.setCrossFadeLogic({fadingRole:Pe.Parent,fadingDirection:nt.Departing,fadeEndTime:y+z}),f[fe.key]=fe,!0}return!1}function _i(I,c,f,y,S,P){if(!c.hasData())return!1;const z=c.tileID.children(S);let H=St(I,c,z,f,y,S,P);if(H)return!0;for(const W of z)St(I,c,W.children(S),f,y,S,P)&&(H=!0);return H}function St(I,c,f,y,S,P,z){if(f[0].overscaledZ>=P)return!1;let H=!1;for(const W of f){const Z=I.getLoadedTile(W);if(!Z)continue;const{fadingRole:J,fadingDirection:se,fadingParentID:re}=Z;J===Pe.Base&&se===nt.Departing&&re||(Z.setCrossFadeLogic({fadingRole:Pe.Base,fadingDirection:nt.Departing,fadingParentID:c.tileID,fadeEndTime:S+z}),c.setCrossFadeLogic({fadingRole:Pe.Parent,fadingDirection:nt.Incoming,fadeEndTime:S+z})),y[W.key]=W,H=!0}return H}function xi(I,c,f,y){const S=I.tileID;return!!I.selfFading||!I.hasData()&&!!c.has(S)&&(I.setSelfFadeLogic(f+y),!0)}function Dt(I,c){var f;I.needsHillshadePrepare=!0,I.needsTerrainPrepare=!0;let y=c.tileID.canonical.x-I.tileID.canonical.x;const S=c.tileID.canonical.y-I.tileID.canonical.y,P=Math.pow(2,I.tileID.canonical.z),z=c.tileID.key;y===0&&S===0||Math.abs(S)>1||(Math.abs(y)>1&&(Math.abs(y+P)===1?y+=P:Math.abs(y-P)===1&&(y-=P)),c.dem&&I.dem&&(I.dem.backfillBorder(c.dem,y,S),!((f=I.neighboringTiles)===null||f===void 0)&&f[z]&&(I.neighboringTiles[z].backfilled=!0)))}class Xn{constructor(){this._tiles={}}handleWrapJump(c){const f={};for(const y in this._tiles){const S=this._tiles[y];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+c),f[S.tileID.key]=S}this._tiles=f}setFeatureState(c,f){for(const y in this._tiles)this._tiles[y].setFeatureState(c,f)}getAllTiles(){return Object.values(this._tiles)}getAllIds(c=!1){return c?Object.values(this._tiles).map((f=>f.tileID)).sort(r.aw).map((f=>f.key)):Object.keys(this._tiles)}getTileById(c){return this._tiles[c]}setTile(c,f){this._tiles[c]=f}deleteTileById(c){delete this._tiles[c]}getLoadedTile(c){const f=this.getTileById(c.key);return f?.hasData()?f:null}isIdRenderable(c,f=!1){var y;return(y=this.getTileById(c))===null||y===void 0?void 0:y.isRenderable(f)}getRenderableIds(c=0,f){const y=[];for(const S of this.getAllIds())this.isIdRenderable(S,f)&&y.push(this.getTileById(S));return f?y.sort(((S,P)=>{const z=S.tileID,H=P.tileID,W=new r.P(z.canonical.x,z.canonical.y)._rotate(-c),Z=new r.P(H.canonical.x,H.canonical.y)._rotate(-c);return z.overscaledZ-H.overscaledZ||Z.y-W.y||Z.x-W.x})).map((S=>S.tileID.key)):y.map((S=>S.tileID)).sort(r.aw).map((S=>S.key))}}class rn extends r.E{constructor(c,f,y){super(),this.id=c,this.dispatcher=y,this.on("data",(S=>this._dataHandler(S))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((S,P,z,H)=>{const W=new(be(P.type))(S,P,z,H);if(W.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${W.id}`);return W})(c,f,y,this),this._inViewTiles=new Xn,this._outOfViewCache=new r.ax(0,(S=>this._unloadTile(S))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new pt,this._didEmitContent=!1,this._updated=!1}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._maxTileCacheZoomLevels=c?c._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){for(const f of this._inViewTiles.getAllTiles())f.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c),this._inViewTiles=new Xn}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const c of this._inViewTiles.getAllTiles())if(c.state!=="loaded"&&c.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,f,y){return r._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(c),this._tileLoaded(c,f,y)}catch(S){c.state="errored",S.status!==404?this._source.fire(new r.k(S,{tile:c})):this.update(this.transform,this.terrain)}}))}_unloadTile(c){this._source.unloadTile&&this._source.unloadTile(c)}_abortTile(c){this._source.abortTile&&this._source.abortTile(c),this._source.fire(new r.l("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const f of this._inViewTiles.getAllTiles())f.upload(c),f.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(c){var f;return this._inViewTiles.getRenderableIds((f=this.transform)===null||f===void 0?void 0:f.bearingInRadians,c)}hasRenderableParent(c){const f=c.overscaledZ-1;if(f>=this._source.minzoom){const y=this.getLoadedTile(c.scaledTo(f));if(y)return this._inViewTiles.isIdRenderable(y.tileID.key)}return!1}reload(c,f=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const y of this._inViewTiles.getAllIds()){const S=this._inViewTiles.getTileById(y);f&&!this._source.shouldReloadTile(S,f)||(c?this._reloadTile(y,"expired"):S.state!=="errored"&&this._reloadTile(y,"reloading"))}}}_reloadTile(c,f){return r._(this,void 0,void 0,(function*(){const y=this._inViewTiles.getTileById(c);y&&(y.state!=="loading"&&(y.state=f),yield this._loadTile(y,c,f))}))}_tileLoaded(c,f,y){c.timeAdded=O(),c.selfFading&&(c.fadeEndTime=c.timeAdded+this._rasterFadeDuration),y==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(f,c),this.getSource().type==="raster-dem"&&c.dem&&(function(S,P){var z,H;const W=P.getRenderableIds();for(const Z of W){if(!S.neighboringTiles||!S.neighboringTiles[Z])continue;const J=P.getTileById(Z);S.neighboringTiles[Z].backfilled||Dt(S,J),!((H=(z=J.neighboringTiles)===null||z===void 0?void 0:z[S.tileID.key])===null||H===void 0)&&H.backfilled||Dt(J,S)}})(c,this._inViewTiles),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new r.l("data",{dataType:"source",tile:c,coord:c.tileID}))}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._inViewTiles.getTileById(c)}_retainLoadedChildren(c,f){const y=this._getLoadedDescendents(f),S=new Set;for(const P of f){const z=y[P.key];if(!z?.length){S.add(P);continue}const H=P.overscaledZ+rn.maxOverzooming,W=z.filter((se=>se.tileID.overscaledZ<=H));if(!W.length){S.add(P);continue}const Z=Math.min(...W.map((se=>se.tileID.overscaledZ))),J=W.filter((se=>se.tileID.overscaledZ===Z)).map((se=>se.tileID));for(const se of J)c[se.key]=se;this._areDescendentsComplete(J,Z,P.overscaledZ)||S.add(P)}return S}_getLoadedDescendents(c){var f;const y={};for(const S of this._inViewTiles.getAllTiles().filter((P=>P.hasData())))for(const P of c)S.tileID.isChildOf(P)&&(y[f=P.key]||(y[f]=[])).push(S);return y}_areDescendentsComplete(c,f,y){return c.length===1&&c[0].isOverscaled()?c[0].overscaledZ===f:Math.pow(4,f-y)===c.length}getLoadedTile(c){return this._inViewTiles.getLoadedTile(c)}updateCacheSize(c){const f=Math.ceil(c.width/this._source.tileSize)+1,y=Math.ceil(c.height/this._source.tileSize)+1,S=Math.floor(f*y*(this._maxTileCacheZoomLevels===null?r.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),P=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._outOfViewCache.setMaxSize(P)}handleWrapJump(c){const f=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);this._prevLng=c,f&&(this._inViewTiles.handleWrapJump(f),this._resetTileReloadTimers())}update(c,f){if(!this._sourceLoaded||this._paused)return;let y;this.transform=c,this.terrain=f,this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?y=c.getVisibleUnwrappedCoordinates(this._source.tileID).map((W=>new r.a2(W.canonical.z,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y))):(y=fi(c,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?c.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter((W=>this._source.hasTile(W))))):y=[],this.usedForTerrain&&(y=this._addTerrainIdealTiles(y));const S=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new r.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=Jt(c,this._source),z=this._updateRetainedTiles(y,P),H=oi(this._source.type);H&&this._rasterFadeDuration>0&&!f&&(function(W,Z,J,se,re,fe,ye){const Te=O(),Me=r.av(Z);for(const Ee of Z){const Fe=W.getTileById(Ee.key);Fe.fadingDirection!==nt.Departing&&Fe.fadeOpacity!==0||Fe.resetFadeLogic(),bi(W,Fe,J,Te,se,re,ye)||_i(W,Fe,J,Te,fe,ye)||xi(Fe,Me,Te,ye)||Fe.resetFadeLogic()}})(this._inViewTiles,y,z,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),H?this._cleanUpRasterTiles(z):this._cleanUpVectorTiles(z)}_cleanUpRasterTiles(c){for(const f of this._inViewTiles.getAllIds())c[f]||this._removeTile(f)}_cleanUpVectorTiles(c){for(const f of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(f);c[f]?y.clearSymbolFadeHold():y.hasSymbolBuckets?y.holdingForSymbolFade()?y.symbolFadeFinished()&&this._removeTile(f):y.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(f)}}_addTerrainIdealTiles(c){const f=[];for(const y of c)if(y.canonical.z>this._source.minzoom){const S=y.scaledTo(y.canonical.z-1);f.push(S);const P=y.scaledTo(Math.max(this._source.minzoom,Math.min(y.canonical.z,5)));f.push(P)}return c.concat(f)}releaseSymbolFadeTiles(){for(const c of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(c).holdingForSymbolFade()&&this._removeTile(c)}_updateRetainedTiles(c,f){var y;const S=new Set;for(const Z of c)this._addTile(Z).hasData()||S.add(Z);const P=c.reduce(((Z,J)=>(Z[J.key]=J,Z)),{}),z=this._retainLoadedChildren(P,S),H={},W=Math.max(f-rn.maxUnderzooming,this._source.minzoom);for(const Z of z){let J=this._inViewTiles.getTileById(Z.key),se=J?.wasRequested();for(let re=Z.overscaledZ-1;re>=W;--re){const fe=Z.scaledTo(re);if(H[fe.key])break;if(H[fe.key]=!0,J=this.getTile(fe),!J&&se&&(J=this._addTile(fe)),J){const ye=J.hasData();if((ye||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||se)&&(P[fe.key]=fe),se=J.wasRequested(),ye)break}}}return P}_addTile(c){let f=this._inViewTiles.getTileById(c.key);if(f)return f;f=this._outOfViewCache.getAndRemove(c),f&&(f.resetFadeLogic(),this._setTileReloadTimer(c.key,f),f.tileID=c,this._state.initializeTileState(f,this.map?this.map.painter:null));const y=f;return f||(f=new mt(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(f,c.key,f.state)),f.uses++,this._inViewTiles.setTile(c.key,f),y||this._source.fire(new r.l("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(c,f){this._clearTileReloadTimer(c);const y=f.getExpiryTimeout();y&&(this._timers[c]=setTimeout((()=>{this._reloadTile(c,"expired"),delete this._timers[c]}),y))}_clearTileReloadTimer(c){const f=this._timers[c];f&&(clearTimeout(f),delete this._timers[c])}_resetTileReloadTimers(){for(const c in this._timers)clearTimeout(this._timers[c]),delete this._timers[c];for(const c of this._inViewTiles.getAllIds()){const f=this._inViewTiles.getTileById(c);this._setTileReloadTimer(c,f)}}refreshTiles(c){for(const f of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(f);(this._inViewTiles.isIdRenderable(f)||y.state=="errored")&&c.some((S=>S.equals(y.tileID.canonical)))&&this._reloadTile(f,"expired")}}_removeTile(c){const f=this._inViewTiles.getTileById(c);f&&(f.uses--,this._inViewTiles.deleteTileById(c),this._clearTileReloadTimer(c),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._outOfViewCache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(c){c.dataType==="source"&&(c.sourceDataType!=="metadata"?c.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(c.sourceDataChanged,c.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c of this._inViewTiles.getAllIds())this._removeTile(c);this._outOfViewCache.reset()}tilesIn(c,f,y){const S=[],P=this.transform;if(!P)return S;const z=P.getCoveringTilesDetailsProvider().allowWorldCopies(),H=y?P.getCameraQueryGeometry(c):c,W=fe=>P.screenPointToMercatorCoordinate(fe,this.terrain),Z=this.transformBbox(c,W,!z),J=this.transformBbox(H,W,!z),se=this.getIds(),re=r.aa.fromPoints(J);for(let fe=0;fe<se.length;fe++){const ye=this._inViewTiles.getTileById(se[fe]);if(ye.holdingForSymbolFade())continue;const Te=z?[ye.tileID]:[ye.tileID.unwrapTo(-1),ye.tileID.unwrapTo(0)],Me=Math.pow(2,P.zoom-ye.tileID.overscaledZ),Ee=f*ye.queryPadding*r.a5/ye.tileSize/Me;for(const Fe of Te){const Ge=re.map((Oe=>Fe.getTilePoint(new r.a9(Oe.x,Oe.y))));if(Ge.expandBy(Ee),Ge.intersects(Rt)){const Oe=Z.map((Xe=>Fe.getTilePoint(Xe))),Ve=J.map((Xe=>Fe.getTilePoint(Xe)));S.push({tile:ye,tileID:z?Fe:Fe.unwrapTo(0),queryGeometry:Oe,cameraQueryGeometry:Ve,scale:Me})}}}return S}transformBbox(c,f,y){let S=c.map(f);if(y){const P=r.aa.fromPoints(c);P.shrinkBy(.001*Math.min(P.width(),P.height()));const z=P.map(f);r.aa.fromPoints(S).covers(z)||(S=S.map((H=>H.x>.5?new r.a9(H.x-1,H.y,H.z):H)))}return S}getVisibleCoordinates(c){const f=this.getRenderableIds(c).map((y=>this._inViewTiles.getTileById(y).tileID));return this.transform&&this.transform.populateCache(f),f}hasTransition(){return!!this._source.hasTransition()||!(!oi(this._source.type)||!(function(c,f){if(f<=0)return!1;const y=O();for(const S of c.getAllTiles())if(S.fadeEndTime>=y)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(c){this._rasterFadeDuration=c}setFeatureState(c,f,y){this._state.updateState(c=c||r.ai,f,y)}removeFeatureState(c,f,y){this._state.removeFeatureState(c=c||r.ai,f,y)}getFeatureState(c,f){return this._state.getState(c=c||r.ai,f)}setDependencies(c,f,y){const S=this._inViewTiles.getTileById(c);S&&S.setDependencies(f,y)}reloadTilesForDependencies(c,f){for(const y of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(y).hasDependency(c,f)&&this._reloadTile(y,"reloading");this._outOfViewCache.filter((y=>!y.hasDependency(c,f)))}areTilesLoaded(){for(const c of this._inViewTiles.getAllTiles())if(c.state!=="loaded"&&c.state!=="errored")return!1;return!0}}rn.maxUnderzooming=10,rn.maxOverzooming=3;class At{constructor(c,f){this.reset(c,f)}reset(c,f){this.points=c||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=r.an(c,0,1);let f=1,y=this._distances[f];const S=c*this.paddedLength+this.padding;for(;y<S&&f<this._distances.length;)y=this._distances[++f];const P=f-1,z=this._distances[P],H=y-z,W=H>0?(S-z)/H:0;return this.points[P].mult(1-W).add(this.points[f].mult(W))}}function ii(I,c){let f=!0;return I==="always"||I!=="never"&&c!=="never"||(f=!1),f}class Si{constructor(c,f,y){const S=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(c/y),this.yCellCount=Math.ceil(f/y);for(let z=0;z<this.xCellCount*this.yCellCount;z++)S.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=f,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,f,y,S,P){this._forEachCell(f,y,S,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(S),this.bboxes.push(P)}insertCircle(c,f,y,S){this._forEachCell(f-S,y-S,f+S,y+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(f),this.circles.push(y),this.circles.push(S)}_insertBoxCell(c,f,y,S,P,z){this.boxCells[P].push(z)}_insertCircleCell(c,f,y,S,P,z){this.circleCells[P].push(z)}_query(c,f,y,S,P,z,H){if(y<0||c>this.width||S<0||f>this.height)return[];const W=[];if(c<=0&&f<=0&&this.width<=y&&this.height<=S){if(P)return[{key:null,x1:c,y1:f,x2:y,y2:S}];for(let Z=0;Z<this.boxKeys.length;Z++)W.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(let Z=0;Z<this.circleKeys.length;Z++){const J=this.circles[3*Z],se=this.circles[3*Z+1],re=this.circles[3*Z+2];W.push({key:this.circleKeys[Z],x1:J-re,y1:se-re,x2:J+re,y2:se+re})}}else this._forEachCell(c,f,y,S,this._queryCell,W,{hitTest:P,overlapMode:z,seenUids:{box:{},circle:{}}},H);return W}query(c,f,y,S){return this._query(c,f,y,S,!1,null)}hitTest(c,f,y,S,P,z){return this._query(c,f,y,S,!0,P,z).length>0}hitTestCircle(c,f,y,S,P){const z=c-y,H=c+y,W=f-y,Z=f+y;if(H<0||z>this.width||Z<0||W>this.height)return!1;const J=[];return this._forEachCell(z,W,H,Z,this._queryCellCircle,J,{hitTest:!0,overlapMode:S,circle:{x:c,y:f,radius:y},seenUids:{box:{},circle:{}}},P),J.length>0}_queryCell(c,f,y,S,P,z,H,W){const{seenUids:Z,hitTest:J,overlapMode:se}=H,re=this.boxCells[P];if(re!==null){const ye=this.bboxes;for(const Te of re)if(!Z.box[Te]){Z.box[Te]=!0;const Me=4*Te,Ee=this.boxKeys[Te];if(c<=ye[Me+2]&&f<=ye[Me+3]&&y>=ye[Me+0]&&S>=ye[Me+1]&&(!W||W(Ee))&&(!J||!ii(se,Ee.overlapMode))&&(z.push({key:Ee,x1:ye[Me],y1:ye[Me+1],x2:ye[Me+2],y2:ye[Me+3]}),J))return!0}}const fe=this.circleCells[P];if(fe!==null){const ye=this.circles;for(const Te of fe)if(!Z.circle[Te]){Z.circle[Te]=!0;const Me=3*Te,Ee=this.circleKeys[Te];if(this._circleAndRectCollide(ye[Me],ye[Me+1],ye[Me+2],c,f,y,S)&&(!W||W(Ee))&&(!J||!ii(se,Ee.overlapMode))){const Fe=ye[Me],Ge=ye[Me+1],Oe=ye[Me+2];if(z.push({key:Ee,x1:Fe-Oe,y1:Ge-Oe,x2:Fe+Oe,y2:Ge+Oe}),J)return!0}}}return!1}_queryCellCircle(c,f,y,S,P,z,H,W){const{circle:Z,seenUids:J,overlapMode:se}=H,re=this.boxCells[P];if(re!==null){const ye=this.bboxes;for(const Te of re)if(!J.box[Te]){J.box[Te]=!0;const Me=4*Te,Ee=this.boxKeys[Te];if(this._circleAndRectCollide(Z.x,Z.y,Z.radius,ye[Me+0],ye[Me+1],ye[Me+2],ye[Me+3])&&(!W||W(Ee))&&!ii(se,Ee.overlapMode))return z.push(!0),!0}}const fe=this.circleCells[P];if(fe!==null){const ye=this.circles;for(const Te of fe)if(!J.circle[Te]){J.circle[Te]=!0;const Me=3*Te,Ee=this.circleKeys[Te];if(this._circlesCollide(ye[Me],ye[Me+1],ye[Me+2],Z.x,Z.y,Z.radius)&&(!W||W(Ee))&&!ii(se,Ee.overlapMode))return z.push(!0),!0}}}_forEachCell(c,f,y,S,P,z,H,W){const Z=this._convertToXCellCoord(c),J=this._convertToYCellCoord(f),se=this._convertToXCellCoord(y),re=this._convertToYCellCoord(S);for(let fe=Z;fe<=se;fe++)for(let ye=J;ye<=re;ye++)if(P.call(this,c,f,y,S,this.xCellCount*ye+fe,z,H,W))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,f,y,S,P,z){const H=S-c,W=P-f,Z=y+z;return Z*Z>H*H+W*W}_circleAndRectCollide(c,f,y,S,P,z,H){const W=(z-S)/2,Z=Math.abs(c-(S+W));if(Z>W+y)return!1;const J=(H-P)/2,se=Math.abs(f-(P+J));if(se>J+y)return!1;if(Z<=W||se<=J)return!0;const re=Z-W,fe=se-J;return re*re+fe*fe<=y*y}}function Xi(I,c,f){const y=r.N();if(!I){const{vecSouth:se,vecEast:re}=Oa(c),fe=g();fe[0]=re[0],fe[1]=re[1],fe[2]=se[0],fe[3]=se[1],S=fe,(J=(z=(P=fe)[0])*(Z=P[3])-(W=P[2])*(H=P[1]))&&(S[0]=Z*(J=1/J),S[1]=-H*J,S[2]=-W*J,S[3]=z*J),y[0]=fe[0],y[1]=fe[1],y[4]=fe[2],y[5]=fe[3]}var S,P,z,H,W,Z,J;return r.Q(y,y,[1/f,1/f,1]),y}function Hn(I,c,f,y){if(I){const S=r.N();if(!c){const{vecSouth:P,vecEast:z}=Oa(f);S[0]=z[0],S[1]=z[1],S[4]=P[0],S[5]=P[1]}return r.Q(S,S,[y,y,1]),S}return f.pixelsToClipSpaceMatrix}function Oa(I){const c=Math.cos(I.rollInRadians),f=Math.sin(I.rollInRadians),y=Math.cos(I.pitchInRadians),S=Math.cos(I.bearingInRadians),P=Math.sin(I.bearingInRadians),z=r.aC();z[0]=-S*y*f-P*c,z[1]=-P*y*f+S*c;const H=r.aD(z);H<1e-9?r.aE(z):r.aF(z,z,1/H);const W=r.aC();W[0]=S*y*c-P*f,W[1]=P*y*c+S*f;const Z=r.aD(W);return Z<1e-9?r.aE(W):r.aF(W,W,1/Z),{vecEast:W,vecSouth:z}}function gi(I,c,f,y){let S;y?(S=[I,c,y(I,c),1],r.aH(S,S,f)):(S=[I,c,0,1],Sl(S,S,f));const P=S[3];return{point:new r.P(S[0]/P,S[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}function wn(I,c){return .5+I/c*.5}function cn(I,c){return I.x>=-c[0]&&I.x<=c[0]&&I.y>=-c[1]&&I.y<=c[1]}function dn(I,c,f,y,S,P,z,H,W,Z,J,se,re){const fe=f?I.textSizeData:I.iconSizeData,ye=r.ay(fe,c.transform.zoom),Te=[256/c.width*2+1,256/c.height*2+1],Me=f?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;Me.clear();const Ee=I.lineVertexArray,Fe=f?I.text.placedSymbolArray:I.icon.placedSymbolArray,Ge=c.transform.width/c.transform.height;let Oe=!1;for(let Ve=0;Ve<Fe.length;Ve++){const Xe=Fe.get(Ve);if(Xe.hidden||Xe.writingMode===r.az.vertical&&!Oe){lo(Xe.numGlyphs,Me);continue}Oe=!1;const Ne=new r.P(Xe.anchorX,Xe.anchorY),Ke={getElevation:re,pitchedLabelPlaneMatrix:y,lineVertexArray:Ee,pitchWithMap:P,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:c.transform,tileAnchorPoint:Ne,unwrappedTileID:W,width:Z,height:J,translation:se},gt=lr(Xe.anchorX,Xe.anchorY,Ke);if(!cn(gt.point,Te)){lo(Xe.numGlyphs,Me);continue}const lt=wn(c.transform.cameraToCenterDistance,gt.signedDistanceFromCamera),ht=r.aA(fe,ye,Xe),dt=P?ht*c.transform.getPitchedTextCorrection(Xe.anchorX,Xe.anchorY,W)/lt:ht*lt,Ot=Nn({projectionContext:Ke,pitchedLabelPlaneMatrixInverse:S,symbol:Xe,fontSize:dt,flip:!1,keepUpright:z,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:Me,aspectRatio:Ge,rotateToLine:H});Oe=Ot.useVertical,(Ot.notEnoughRoom||Oe||Ot.needsFlipping&&Nn({projectionContext:Ke,pitchedLabelPlaneMatrixInverse:S,symbol:Xe,fontSize:dt,flip:!0,keepUpright:z,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:Me,aspectRatio:Ge,rotateToLine:H}).notEnoughRoom)&&lo(Xe.numGlyphs,Me)}f?I.text.dynamicLayoutVertexBuffer.updateData(Me):I.icon.dynamicLayoutVertexBuffer.updateData(Me)}function us(I,c,f,y,S,P,z,H){const W=P.glyphStartIndex+P.numGlyphs,Z=P.lineStartIndex,J=P.lineStartIndex+P.lineLength,se=c.getoffsetX(P.glyphStartIndex),re=c.getoffsetX(W-1),fe=Ii(I*se,f,y,S,P.segment,Z,J,H,z);if(!fe)return null;const ye=Ii(I*re,f,y,S,P.segment,Z,J,H,z);return ye?H.projectionCache.anyProjectionOccluded?null:{first:fe,last:ye}:null}function Ln(I,c,f,y){return I===r.az.horizontal&&Math.abs(f.y-c.y)>Math.abs(f.x-c.x)*y?{useVertical:!0}:(I===r.az.vertical?c.y<f.y:c.x>f.x)?{needsFlipping:!0}:null}function Nn(I){const{projectionContext:c,pitchedLabelPlaneMatrixInverse:f,symbol:y,fontSize:S,flip:P,keepUpright:z,glyphOffsetArray:H,dynamicLayoutVertexArray:W,aspectRatio:Z,rotateToLine:J}=I,se=S/24,re=y.lineOffsetX*se,fe=y.lineOffsetY*se;let ye;if(y.numGlyphs>1){const Te=y.glyphStartIndex+y.numGlyphs,Me=y.lineStartIndex,Ee=y.lineStartIndex+y.lineLength,Fe=us(se,H,re,fe,P,y,J,c);if(!Fe)return{notEnoughRoom:!0};const Ge=Dr(Fe.first.point.x,Fe.first.point.y,c,f),Oe=Dr(Fe.last.point.x,Fe.last.point.y,c,f);if(z&&!P){const Ve=Ln(y.writingMode,Ge,Oe,Z);if(Ve)return Ve}ye=[Fe.first];for(let Ve=y.glyphStartIndex+1;Ve<Te-1;Ve++){const Xe=Ii(se*H.getoffsetX(Ve),re,fe,P,y.segment,Me,Ee,c,J);if(!Xe)return{notEnoughRoom:!0};ye.push(Xe)}ye.push(Fe.last)}else{if(z&&!P){const Me=Mi(c.tileAnchorPoint.x,c.tileAnchorPoint.y,c).point,Ee=y.lineStartIndex+y.segment+1,Fe=new r.P(c.lineVertexArray.getx(Ee),c.lineVertexArray.gety(Ee)),Ge=Mi(Fe.x,Fe.y,c),Oe=Ge.signedDistanceFromCamera>0?Ge.point:Tt(c.tileAnchorPoint,Fe,Me,1,c),Ve=Dr(Me.x,Me.y,c,f),Xe=Dr(Oe.x,Oe.y,c,f),Ne=Ln(y.writingMode,Ve,Xe,Z);if(Ne)return Ne}const Te=Ii(se*H.getoffsetX(y.glyphStartIndex),re,fe,P,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,c,J);if(!Te||c.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ye=[Te]}for(const Te of ye)r.aG(W,Te.point,Te.angle);return{}}function Tt(I,c,f,y,S){const P=I.add(I.sub(c)._unit()),z=Mi(P.x,P.y,S).point,H=f.sub(z);return f.add(H._mult(y/H.mag()))}function Ga(I,c,f){const y=c.projectionCache;if(y.projections[I])return y.projections[I];const S=new r.P(c.lineVertexArray.getx(I),c.lineVertexArray.gety(I)),P=Mi(S.x,S.y,c);if(P.signedDistanceFromCamera>0)return y.projections[I]=P.point,y.anyProjectionOccluded=y.anyProjectionOccluded||P.isOccluded,P.point;const z=I-f.direction;return Tt(f.distanceFromAnchor===0?c.tileAnchorPoint:new r.P(c.lineVertexArray.getx(z),c.lineVertexArray.gety(z)),S,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,c)}function Mi(I,c,f){const y=I+f.translation[0],S=c+f.translation[1];let P;return f.pitchWithMap?(P=gi(y,S,f.pitchedLabelPlaneMatrix,f.getElevation),P.isOccluded=!1):(P=f.transform.projectTileCoordinates(y,S,f.unwrappedTileID,f.getElevation),P.point.x=(.5*P.point.x+.5)*f.width,P.point.y=(.5*-P.point.y+.5)*f.height),P}function Dr(I,c,f,y){if(f.pitchWithMap){const S=[I,c,0,1];return r.aH(S,S,y),f.transform.projectTileCoordinates(S[0]/S[3],S[1]/S[3],f.unwrappedTileID,f.getElevation).point}return{x:I/f.width*2-1,y:1-c/f.height*2}}function lr(I,c,f){return f.transform.projectTileCoordinates(I,c,f.unwrappedTileID,f.getElevation)}function Yi(I,c,f){return I._unit()._perp()._mult(c*f)}function Wi(I,c,f,y,S,P,z,H,W){if(H.projectionCache.offsets[I])return H.projectionCache.offsets[I];const Z=f.add(c);if(I+W.direction<y||I+W.direction>=S)return H.projectionCache.offsets[I]=Z,Z;const J=Ga(I+W.direction,H,W),se=Yi(J.sub(f),z,W.direction),re=f.add(se),fe=J.add(se);return H.projectionCache.offsets[I]=r.aI(P,Z,re,fe)||Z,H.projectionCache.offsets[I]}function Ii(I,c,f,y,S,P,z,H,W){const Z=y?I-c:I+c;let J=Z>0?1:-1,se=0;y&&(J*=-1,se=Math.PI),J<0&&(se+=Math.PI);let re,fe=J>0?P+S:P+S+1;H.projectionCache.cachedAnchorPoint?re=H.projectionCache.cachedAnchorPoint:(re=Mi(H.tileAnchorPoint.x,H.tileAnchorPoint.y,H).point,H.projectionCache.cachedAnchorPoint=re);let ye,Te,Me=re,Ee=re,Fe=0,Ge=0;const Oe=Math.abs(Z),Ve=[];let Xe;for(;Fe+Ge<=Oe;){if(fe+=J,fe<P||fe>=z)return null;Fe+=Ge,Ee=Me,Te=ye;const gt={absOffsetX:Oe,direction:J,distanceFromAnchor:Fe,previousVertex:Ee};if(Me=Ga(fe,H,gt),f===0)Ve.push(Ee),Xe=Me.sub(Ee);else{let lt;const ht=Me.sub(Ee);lt=ht.mag()===0?Yi(Ga(fe+J,H,gt).sub(Me),f,J):Yi(ht,f,J),Te||(Te=Ee.add(lt)),ye=Wi(fe,lt,Me,P,z,Te,f,H,gt),Ve.push(Te),Xe=ye.sub(Te)}Ge=Xe.mag()}const Ne=Xe._mult((Oe-Fe)/Ge)._add(Te||Ee),Ke=se+Math.atan2(Me.y-Ee.y,Me.x-Ee.x);return Ve.push(Ne),{point:Ne,angle:W?Ke:0,path:Ve}}const zc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function lo(I,c){for(let f=0;f<I;f++){const y=c.length;c.resize(y+4),c.float32.set(zc,3*y)}}function Sl(I,c,f){const y=c[0],S=c[1];return I[0]=f[0]*y+f[4]*S+f[12],I[1]=f[1]*y+f[5]*S+f[13],I[3]=f[3]*y+f[7]*S+f[15],I}const $i=100;class co{constructor(c,f=new Si(c.width+200,c.height+200,25),y=new Si(c.width+200,c.height+200,25)){this.transform=c,this.grid=f,this.ignoredGrid=y,this.pitchFactor=Math.cos(c.pitch*Math.PI/180)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+$i,this.screenBottomBoundary=c.height+$i,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,f,y,S,P,z,H,W,Z,J,se,re){const fe=this.projectAndGetPerspectiveRatio(c.anchorPointX+W[0],c.anchorPointY+W[1],P,J,re),ye=y*fe.perspectiveRatio;let Te;if(z||H)Te=this._projectCollisionBox(c,ye,S,P,z,H,W,fe,J,se,re);else{const Xe=fe.x+(se?se.x*ye:0),Ne=fe.y+(se?se.y*ye:0);Te={allPointsOccluded:!1,box:[Xe+c.x1*ye,Ne+c.y1*ye,Xe+c.x2*ye,Ne+c.y2*ye]}}const[Me,Ee,Fe,Ge]=Te.box,Oe=z?Te.allPointsOccluded:fe.isOccluded;let Ve=Oe;return Ve||(Ve=fe.perspectiveRatio<this.perspectiveRatioCutoff),Ve||(Ve=!this.isInsideGrid(Me,Ee,Fe,Ge)),Ve||f!=="always"&&this.grid.hitTest(Me,Ee,Fe,Ge,f,Z)?{box:[Me,Ee,Fe,Ge],placeable:!1,offscreen:!1,occluded:Oe}:{box:[Me,Ee,Fe,Ge],placeable:!0,offscreen:this.isOffscreen(Me,Ee,Fe,Ge),occluded:Oe}}placeCollisionCircles(c,f,y,S,P,z,H,W,Z,J,se,re,fe,ye){const Te=[],Me=new r.P(f.anchorX,f.anchorY),Ee=this.getPerspectiveRatio(Me.x,Me.y,z,ye),Fe=(Z?P*this.transform.getPitchedTextCorrection(f.anchorX,f.anchorY,z)/Ee:P*Ee)/r.aM,Ge={getElevation:ye,pitchedLabelPlaneMatrix:H,lineVertexArray:y,pitchWithMap:Z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Me,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:fe},Oe=us(Fe,S,f.lineOffsetX*Fe,f.lineOffsetY*Fe,!1,f,!1,Ge);let Ve=!1,Xe=!1,Ne=!0;if(Oe){const Ke=.5*se*Ee+re,gt=new r.P(-100,-100),lt=new r.P(this.screenRightBoundary,this.screenBottomBoundary),ht=new At,dt=Oe.first,Ot=Oe.last;let Bt=[];for(let Hi=dt.path.length-1;Hi>=1;Hi--)Bt.push(dt.path[Hi]);for(let Hi=1;Hi<Ot.path.length;Hi++)Bt.push(Ot.path[Hi]);const Mt=2.5*Ke;if(Z){const Hi=this.projectPathToScreenSpace(Bt,Ge);Bt=Hi.some((Fn=>Fn.signedDistanceFromCamera<=0))?[]:Hi.map((Fn=>Fn.point))}let $t=[];if(Bt.length>0){const Hi=Bt[0].clone(),Fn=Bt[0].clone();for(let ca=1;ca<Bt.length;ca++)Hi.x=Math.min(Hi.x,Bt[ca].x),Hi.y=Math.min(Hi.y,Bt[ca].y),Fn.x=Math.max(Fn.x,Bt[ca].x),Fn.y=Math.max(Fn.y,Bt[ca].y);$t=Hi.x>=gt.x&&Fn.x<=lt.x&&Hi.y>=gt.y&&Fn.y<=lt.y?[Bt]:Fn.x<gt.x||Hi.x>lt.x||Fn.y<gt.y||Hi.y>lt.y?[]:r.aJ([Bt],gt.x,gt.y,lt.x,lt.y)}for(const Hi of $t){ht.reset(Hi,.25*Ke);let Fn=0;Fn=ht.length<=.5*Ke?1:Math.ceil(ht.paddedLength/Mt)+1;for(let ca=0;ca<Fn;ca++){const Zn=ca/Math.max(Fn-1,1),pa=ht.lerp(Zn),Kn=pa.x+$i,Ma=pa.y+$i;Te.push(Kn,Ma,Ke,0);const ga=Kn-Ke,kr=Ma-Ke,$a=Kn+Ke,Na=Ma+Ke;if(Ne=Ne&&this.isOffscreen(ga,kr,$a,Na),Xe=Xe||this.isInsideGrid(ga,kr,$a,Na),c!=="always"&&this.grid.hitTestCircle(Kn,Ma,Ke,c,J)&&(Ve=!0,!W))return{circles:[],offscreen:!1,collisionDetected:Ve}}}}return{circles:!W&&Ve||!Xe||Ee<this.perspectiveRatioCutoff?[]:Te,offscreen:Ne,collisionDetected:Ve}}projectPathToScreenSpace(c,f){const y=(function(S,P){const z=r.N();return r.aB(z,P.pitchedLabelPlaneMatrix),S.map((H=>{const W=gi(H.x,H.y,z,P.getElevation),Z=P.transform.projectTileCoordinates(W.point.x,W.point.y,P.unwrappedTileID,P.getElevation);return Z.point.x=(.5*Z.point.x+.5)*P.width,Z.point.y=(.5*-Z.point.y+.5)*P.height,Z}))})(c,f);return(function(S){let P=0,z=0,H=0,W=0;for(let Z=0;Z<S.length;Z++)S[Z].isOccluded?(H=Z+1,W=0):(W++,W>z&&(z=W,P=H));return S.slice(P,P+z)})(y)}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[],y=new r.aa;for(const se of c){const re=new r.P(se.x+$i,se.y+$i);y.extend(re),f.push(re)}const{minX:S,minY:P,maxX:z,maxY:H}=y,W=this.grid.query(S,P,z,H).concat(this.ignoredGrid.query(S,P,z,H)),Z={},J={};for(const se of W){const re=se.key;if(Z[re.bucketInstanceId]===void 0&&(Z[re.bucketInstanceId]={}),Z[re.bucketInstanceId][re.featureIndex])continue;const fe=[new r.P(se.x1,se.y1),new r.P(se.x2,se.y1),new r.P(se.x2,se.y2),new r.P(se.x1,se.y2)];r.aK(f,fe)&&(Z[re.bucketInstanceId][re.featureIndex]=!0,J[re.bucketInstanceId]===void 0&&(J[re.bucketInstanceId]=[]),J[re.bucketInstanceId].push(re.featureIndex))}return J}insertCollisionBox(c,f,y,S,P,z){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:P,collisionGroupID:z,overlapMode:f},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,f,y,S,P,z){const H=y?this.ignoredGrid:this.grid,W={bucketInstanceId:S,featureIndex:P,collisionGroupID:z,overlapMode:f};for(let Z=0;Z<c.length;Z+=4)H.insertCircle(W,c[Z],c[Z+1],c[Z+2])}projectAndGetPerspectiveRatio(c,f,y,S,P){if(P){let z;S?(z=[c,f,S(c,f),1],r.aH(z,z,P)):(z=[c,f,0,1],Sl(z,z,P));const H=z[3];return{x:(z[0]/H+1)/2*this.transform.width+$i,y:(-z[1]/H+1)/2*this.transform.height+$i,perspectiveRatio:.5+this.transform.cameraToCenterDistance/H*.5,isOccluded:!1,signedDistanceFromCamera:H}}{const z=this.transform.projectTileCoordinates(c,f,y,S);return{x:(z.point.x+1)/2*this.transform.width+$i,y:(1-z.point.y)/2*this.transform.height+$i,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(c,f,y,S){const P=this.transform.projectTileCoordinates(c,f,y,S);return .5+this.transform.cameraToCenterDistance/P.signedDistanceFromCamera*.5}isOffscreen(c,f,y,S){return y<$i||c>=this.screenRightBoundary||S<$i||f>this.screenBottomBoundary}isInsideGrid(c,f,y,S){return y>=0&&c<this.gridRightBoundary&&S>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const c=r.ar([]);return r.O(c,c,[-100,-100,0]),c}_projectCollisionBox(c,f,y,S,P,z,H,W,Z,J,se){let re=1,fe=0,ye=0,Te=1;const Me=c.anchorPointX+H[0],Ee=c.anchorPointY+H[1];if(z&&!P){const Bt=this.projectAndGetPerspectiveRatio(Me+1,Ee,S,Z,se),Mt=Bt.x-W.x,$t=Math.atan((Bt.y-W.y)/Mt)+(Mt<0?Math.PI:0),Hi=Math.sin($t),Fn=Math.cos($t);re=Fn,fe=Hi,ye=-Hi,Te=Fn}else if(!z&&P){const Bt=Oa(this.transform);re=Bt.vecEast[0],fe=Bt.vecEast[1],ye=Bt.vecSouth[0],Te=Bt.vecSouth[1]}let Fe=W.x,Ge=W.y,Oe=f;P&&(Fe=Me,Ge=Ee,Oe=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),Oe*=this.transform.getPitchedTextCorrection(Me,Ee,S),J||(Oe*=r.an(.5+W.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),J&&(Fe+=re*J.x*Oe+ye*J.y*Oe,Ge+=fe*J.x*Oe+Te*J.y*Oe);const Ve=c.x1*Oe,Xe=c.x2*Oe,Ne=(Ve+Xe)/2,Ke=c.y1*Oe,gt=c.y2*Oe,lt=(Ke+gt)/2,ht=[{offsetX:Ve,offsetY:Ke},{offsetX:Ne,offsetY:Ke},{offsetX:Xe,offsetY:Ke},{offsetX:Xe,offsetY:lt},{offsetX:Xe,offsetY:gt},{offsetX:Ne,offsetY:gt},{offsetX:Ve,offsetY:gt},{offsetX:Ve,offsetY:lt}];let dt=[];for(const{offsetX:Bt,offsetY:Mt}of ht)dt.push(new r.P(Fe+re*Bt+ye*Mt,Ge+fe*Bt+Te*Mt));let Ot=!1;if(P){const Bt=dt.map((Mt=>this.projectAndGetPerspectiveRatio(Mt.x,Mt.y,S,Z,se)));Ot=Bt.some((Mt=>!Mt.isOccluded)),dt=Bt.map((Mt=>new r.P(Mt.x,Mt.y)))}else Ot=!0;return{box:r.aL(dt),allPointsOccluded:!Ot}}}class md{constructor(c,f,y,S){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?f:-f))):S&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class ia{constructor(c,f,y,S,P){this.text=new md(c?c.text:null,f,y,P),this.icon=new md(c?c.icon:null,f,S,P)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ho{constructor(c,f,y){this.text=c,this.icon=f,this.skipFade=y}}class _d{constructor(c,f,y,S,P){this.bucketInstanceId=c,this.featureIndex=f,this.sourceLayerIndex=y,this.bucketIndex=S,this.tileID=P}}class nl{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const f=++this.maxGroupID;this.collisionGroups[c]={ID:f,predicate:y=>y.collisionGroupID===f}}return this.collisionGroups[c]}}function Dn(I,c,f,y,S){const{horizontalAlign:P,verticalAlign:z}=r.aS(I);return new r.P(-(P-.5)*c+y[0]*S,-(z-.5)*f+y[1]*S)}class Ja{constructor(c,f,y,S,P){this.transform=c.clone(),this.terrain=f,this.collisionIndex=new co(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new nl(S),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(c){const f=this.terrain;return f?(y,S)=>f.getElevation(c,y,S):null}getBucketParts(c,f,y,S){const P=y.getBucket(f),z=y.latestFeatureIndex;if(!P||!z||f.id!==P.layerIds[0])return;const H=y.collisionBoxArray,W=P.layers[0].layout,Z=P.layers[0].paint,J=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),se=y.tileSize/r.a5,re=y.tileID.toUnwrapped(),fe=W.get("text-rotation-alignment")==="map",ye=r.aN(y,1,this.transform.zoom),Te=r.aO(this.collisionIndex.transform,y,Z.get("text-translate"),Z.get("text-translate-anchor")),Me=r.aO(this.collisionIndex.transform,y,Z.get("icon-translate"),Z.get("icon-translate-anchor")),Ee=Xi(fe,this.transform,ye);this.retainedQueryData[P.bucketInstanceId]=new _d(P.bucketInstanceId,z,P.sourceLayerIndex,P.index,y.tileID);const Fe={bucket:P,layout:W,translationText:Te,translationIcon:Me,unwrappedTileID:re,pitchedLabelPlaneMatrix:Ee,scale:J,textPixelRatio:se,holdingForFade:y.holdingForSymbolFade(),collisionBoxArray:H,partiallyEvaluatedTextSize:r.ay(P.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(P.sourceID)};if(S)for(const Ge of P.sortKeyRanges){const{sortKey:Oe,symbolInstanceStart:Ve,symbolInstanceEnd:Xe}=Ge;c.push({sortKey:Oe,symbolInstanceStart:Ve,symbolInstanceEnd:Xe,parameters:Fe})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:Fe})}attemptAnchorPlacement(c,f,y,S,P,z,H,W,Z,J,se,re,fe,ye,Te,Me,Ee,Fe,Ge,Oe){const Ve=r.aP[c.textAnchor],Xe=[c.textOffset0,c.textOffset1],Ne=Dn(Ve,y,S,Xe,P),Ke=this.collisionIndex.placeCollisionBox(f,re,W,Z,J,H,z,Me,se.predicate,Ge,Ne,Oe);if((!Fe||this.collisionIndex.placeCollisionBox(Fe,re,W,Z,J,H,z,Ee,se.predicate,Ge,Ne,Oe).placeable)&&Ke.placeable){let gt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID].text&&(gt=this.prevPlacement.variableOffsets[fe.crossTileID].anchor),fe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[fe.crossTileID]={textOffset:Xe,width:y,height:S,anchor:Ve,textBoxScale:P,prevAnchor:gt},this.markUsedJustification(ye,Ve,fe,Te),ye.allowVerticalPlacement&&(this.markUsedOrientation(ye,Te,fe),this.placedOrientations[fe.crossTileID]=Te),{shift:Ne,placedGlyphBoxes:Ke}}}placeLayerBucketPart(c,f,y){const{bucket:S,layout:P,translationText:z,translationIcon:H,unwrappedTileID:W,pitchedLabelPlaneMatrix:Z,textPixelRatio:J,holdingForFade:se,collisionBoxArray:re,partiallyEvaluatedTextSize:fe,collisionGroup:ye}=c.parameters,Te=P.get("text-optional"),Me=P.get("icon-optional"),Ee=r.aQ(P,"text-overlap","text-allow-overlap"),Fe=Ee==="always",Ge=r.aQ(P,"icon-overlap","icon-allow-overlap"),Oe=Ge==="always",Ve=P.get("text-rotation-alignment")==="map",Xe=P.get("text-pitch-alignment")==="map",Ne=P.get("icon-text-fit")!=="none",Ke=P.get("symbol-z-order")==="viewport-y",gt=Fe&&(Oe||!S.hasIconData()||Me),lt=Oe&&(Fe||!S.hasTextData()||Te);!S.collisionArrays&&re&&S.deserializeCollisionBoxes(re);const ht=this.retainedQueryData[S.bucketInstanceId].tileID,dt=this._getTerrainElevationFunc(ht),Ot=this.transform.getFastPathSimpleProjectionMatrix(ht),Bt=(Mt,$t,Hi)=>{var Fn,ca;if(f[Mt.crossTileID])return;if(se)return void(this.placements[Mt.crossTileID]=new ho(!1,!1,!1));let Zn=!1,pa=!1,Kn=!0,Ma=null,ga={box:null,placeable:!1,offscreen:null,occluded:!1},kr={placeable:!1},$a=null,Na=null,Fr=null,Ol=0,cl=0,Ho=0;$t.textFeatureIndex?Ol=$t.textFeatureIndex:Mt.useRuntimeCollisionCircles&&(Ol=Mt.featureIndex),$t.verticalTextFeatureIndex&&(cl=$t.verticalTextFeatureIndex);const ps=$t.textBox;if(ps){const Ks=aa=>{let Qn=r.az.horizontal;if(S.allowVerticalPlacement&&!aa&&this.prevPlacement){const gr=this.prevPlacement.placedOrientations[Mt.crossTileID];gr&&(this.placedOrientations[Mt.crossTileID]=gr,Qn=gr,this.markUsedOrientation(S,Qn,Mt))}return Qn},Uo=(aa,Qn)=>{if(S.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&$t.verticalTextBox){for(const gr of S.writingModes)if(gr===r.az.vertical?(ga=Qn(),kr=ga):ga=aa(),ga&&ga.placeable)break}else ga=aa()},_o=Mt.textAnchorOffsetStartIndex,xo=Mt.textAnchorOffsetEndIndex;if(xo===_o){const aa=(Qn,gr)=>{const mr=this.collisionIndex.placeCollisionBox(Qn,Ee,J,ht,W,Xe,Ve,z,ye.predicate,dt,void 0,Ot);return mr&&mr.placeable&&(this.markUsedOrientation(S,gr,Mt),this.placedOrientations[Mt.crossTileID]=gr),mr};Uo((()=>aa(ps,r.az.horizontal)),(()=>{const Qn=$t.verticalTextBox;return S.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&Qn?aa(Qn,r.az.vertical):{box:null,offscreen:null}})),Ks(ga&&ga.placeable)}else{let aa=r.aP[(ca=(Fn=this.prevPlacement)===null||Fn===void 0?void 0:Fn.variableOffsets[Mt.crossTileID])===null||ca===void 0?void 0:ca.anchor];const Qn=(mr,n0,a0)=>{const uc=mr.x2-mr.x1,Jx=mr.y2-mr.y1,r0=Mt.textBoxScale,Dp=Ne&&Ge==="never"?n0:null;let zl=null,Fl=Ee==="never"?1:2,Bl="never";aa&&Fl++;for(let Rp=0;Rp<Fl;Rp++){for(let Op=_o;Op<xo;Op++){const Yd=S.textAnchorOffsets.get(Op);if(aa&&Yd.textAnchor!==aa)continue;const qd=this.attemptAnchorPlacement(Yd,mr,uc,Jx,r0,Ve,Xe,J,ht,W,ye,Bl,Mt,S,a0,z,H,Dp,dt);if(qd&&(zl=qd.placedGlyphBoxes,zl&&zl.placeable))return Zn=!0,Ma=qd.shift,zl}aa?aa=null:Bl=Ee}return y&&!zl&&(zl={box:this.collisionIndex.placeCollisionBox(ps,"always",J,ht,W,Xe,Ve,z,ye.predicate,dt,void 0,Ot).box,offscreen:!1,placeable:!1,occluded:!1}),zl};Uo((()=>Qn(ps,$t.iconBox,r.az.horizontal)),(()=>{const mr=$t.verticalTextBox;return S.allowVerticalPlacement&&(!ga||!ga.placeable)&&Mt.numVerticalGlyphVertices>0&&mr?Qn(mr,$t.verticalIconBox,r.az.vertical):{box:null,occluded:!0,offscreen:null}})),ga&&(Zn=ga.placeable,Kn=ga.offscreen);const gr=Ks(ga&&ga.placeable);if(!Zn&&this.prevPlacement){const mr=this.prevPlacement.variableOffsets[Mt.crossTileID];mr&&(this.variableOffsets[Mt.crossTileID]=mr,this.markUsedJustification(S,mr.anchor,Mt,gr))}}}if($a=ga,Zn=$a&&$a.placeable,Kn=$a&&$a.offscreen,Mt.useRuntimeCollisionCircles&&Mt.centerJustifiedTextSymbolIndex>=0){const Ks=S.text.placedSymbolArray.get(Mt.centerJustifiedTextSymbolIndex),Uo=r.aA(S.textSizeData,fe,Ks),_o=P.get("text-padding");Na=this.collisionIndex.placeCollisionCircles(Ee,Ks,S.lineVertexArray,S.glyphOffsetArray,Uo,W,Z,y,Xe,ye.predicate,Mt.collisionCircleDiameter,_o,z,dt),Na.circles.length&&Na.collisionDetected&&!y&&r.w("Collisions detected, but collision boxes are not shown"),Zn=Fe||Na.circles.length>0&&!Na.collisionDetected,Kn=Kn&&Na.offscreen}if($t.iconFeatureIndex&&(Ho=$t.iconFeatureIndex),$t.iconBox){const Ks=Uo=>this.collisionIndex.placeCollisionBox(Uo,Ge,J,ht,W,Xe,Ve,H,ye.predicate,dt,Ne&&Ma?Ma:void 0,Ot);kr&&kr.placeable&&$t.verticalIconBox?(Fr=Ks($t.verticalIconBox),pa=Fr.placeable):(Fr=Ks($t.iconBox),pa=Fr.placeable),Kn=Kn&&Fr.offscreen}const cc=Te||Mt.numHorizontalGlyphVertices===0&&Mt.numVerticalGlyphVertices===0,fu=Me||Mt.numIconVertices===0;cc||fu?fu?cc||(pa=pa&&Zn):Zn=pa&&Zn:pa=Zn=pa&&Zn;const hc=pa&&Fr.placeable;if(Zn&&$a.placeable&&this.collisionIndex.insertCollisionBox($a.box,Ee,P.get("text-ignore-placement"),S.bucketInstanceId,kr&&kr.placeable&&cl?cl:Ol,ye.ID),hc&&this.collisionIndex.insertCollisionBox(Fr.box,Ge,P.get("icon-ignore-placement"),S.bucketInstanceId,Ho,ye.ID),Na&&Zn&&this.collisionIndex.insertCollisionCircles(Na.circles,Ee,P.get("text-ignore-placement"),S.bucketInstanceId,Ol,ye.ID),y&&this.storeCollisionData(S.bucketInstanceId,Hi,$t,$a,Fr,Na),Mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Mt.crossTileID]=new ho((Zn||gt)&&!$a?.occluded,(pa||lt)&&!Fr?.occluded,Kn||S.justReloaded),f[Mt.crossTileID]=!0};if(Ke){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Mt=S.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let $t=Mt.length-1;$t>=0;--$t){const Hi=Mt[$t];Bt(S.symbolInstances.get(Hi),S.collisionArrays[Hi],Hi)}}else for(let Mt=c.symbolInstanceStart;Mt<c.symbolInstanceEnd;Mt++)Bt(S.symbolInstances.get(Mt),S.collisionArrays[Mt],Mt);S.justReloaded=!1}storeCollisionData(c,f,y,S,P,z){if(y.textBox||y.iconBox){let H,W;this.collisionBoxArrays.has(c)?H=this.collisionBoxArrays.get(c):(H=new Map,this.collisionBoxArrays.set(c,H)),H.has(f)?W=H.get(f):(W={text:null,icon:null},H.set(f,W)),y.textBox&&(W.text=S.box),y.iconBox&&(W.icon=P.box)}if(z){let H=this.collisionCircleArrays[c];H===void 0&&(H=this.collisionCircleArrays[c]=[]);for(let W=0;W<z.circles.length;W+=4)H.push(z.circles[W+0]-$i),H.push(z.circles[W+1]-$i),H.push(z.circles[W+2]),H.push(z.collisionDetected?1:0)}}markUsedJustification(c,f,y,S){let P;P=S===r.az.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[r.aR(f)];const z=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const H of z)H>=0&&(c.text.placedSymbolArray.get(H).crossTileID=P>=0&&H!==P?0:y.crossTileID)}markUsedOrientation(c,f,y){const S=f===r.az.horizontal||f===r.az.horizontalOnly?f:0,P=f===r.az.vertical?f:0,z=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const H of z)c.text.placedSymbolArray.get(H).placedOrientation=S;y.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=P)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let y=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const S=f?f.symbolFadeChange(c):1,P=f?f.opacities:{},z=f?f.variableOffsets:{},H=f?f.placedOrientations:{};for(const W in this.placements){const Z=this.placements[W],J=P[W];J?(this.opacities[W]=new ia(J,S,Z.text,Z.icon),y=y||Z.text!==J.text.placed||Z.icon!==J.icon.placed):(this.opacities[W]=new ia(null,S,Z.text,Z.icon,Z.skipFade),y=y||Z.text||Z.icon)}for(const W in P){const Z=P[W];if(!this.opacities[W]){const J=new ia(Z,S,!1,!1);J.isHidden()||(this.opacities[W]=J,y=y||Z.text.placed||Z.icon.placed)}}for(const W in z)this.variableOffsets[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.variableOffsets[W]=z[W]);for(const W in H)this.placedOrientations[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.placedOrientations[W]=H[W]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:c)}updateLayerOpacities(c,f){const y={};for(const S of f){const P=S.getBucket(c);P&&S.latestFeatureIndex&&c.id===P.layerIds[0]&&this.updateBucketOpacities(P,S.tileID,y,S.collisionBoxArray)}}updateBucketOpacities(c,f,y,S){c.hasTextData()&&(c.text.opacityVertexArray.clear(),c.text.hasVisibleVertices=!1),c.hasIconData()&&(c.icon.opacityVertexArray.clear(),c.icon.hasVisibleVertices=!1),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const P=c.layers[0],z=P.layout,H=new ia(null,0,!1,!1,!0),W=z.get("text-allow-overlap"),Z=z.get("icon-allow-overlap"),J=P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"),se=z.get("text-rotation-alignment")==="map",re=z.get("text-pitch-alignment")==="map",fe=z.get("icon-text-fit")!=="none",ye=new ia(null,0,W&&(Z||!c.hasIconData()||z.get("icon-optional")),Z&&(W||!c.hasTextData()||z.get("text-optional")),!0);!c.collisionArrays&&S&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(S);const Te=(Ee,Fe,Ge)=>{for(let Oe=0;Oe<Fe/4;Oe++)Ee.opacityVertexArray.emplaceBack(Ge);Ee.hasVisibleVertices=Ee.hasVisibleVertices||Ge!==Un},Me=this.collisionBoxArrays.get(c.bucketInstanceId);for(let Ee=0;Ee<c.symbolInstances.length;Ee++){const Fe=c.symbolInstances.get(Ee),{numHorizontalGlyphVertices:Ge,numVerticalGlyphVertices:Oe,crossTileID:Ve}=Fe;let Xe=this.opacities[Ve];y[Ve]?Xe=H:Xe||(Xe=ye,this.opacities[Ve]=Xe),y[Ve]=!0;const Ne=Fe.numIconVertices>0,Ke=this.placedOrientations[Fe.crossTileID],gt=Ke===r.az.vertical,lt=Ke===r.az.horizontal||Ke===r.az.horizontalOnly;if(Ge>0||Oe>0){const dt=Ei(Xe.text);Te(c.text,Ge,gt?Un:dt),Te(c.text,Oe,lt?Un:dt);const Ot=Xe.text.isHidden();[Fe.rightJustifiedTextSymbolIndex,Fe.centerJustifiedTextSymbolIndex,Fe.leftJustifiedTextSymbolIndex].forEach(($t=>{$t>=0&&(c.text.placedSymbolArray.get($t).hidden=Ot||gt?1:0)})),Fe.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(Fe.verticalPlacedTextSymbolIndex).hidden=Ot||lt?1:0);const Bt=this.variableOffsets[Fe.crossTileID];Bt&&this.markUsedJustification(c,Bt.anchor,Fe,Ke);const Mt=this.placedOrientations[Fe.crossTileID];Mt&&(this.markUsedJustification(c,"left",Fe,Mt),this.markUsedOrientation(c,Mt,Fe))}if(Ne){const dt=Ei(Xe.icon),Ot=!(fe&&Fe.verticalPlacedIconSymbolIndex&&gt);Fe.placedIconSymbolIndex>=0&&(Te(c.icon,Fe.numIconVertices,Ot?dt:Un),c.icon.placedSymbolArray.get(Fe.placedIconSymbolIndex).hidden=Xe.icon.isHidden()),Fe.verticalPlacedIconSymbolIndex>=0&&(Te(c.icon,Fe.numVerticalIconVertices,Ot?Un:dt),c.icon.placedSymbolArray.get(Fe.verticalPlacedIconSymbolIndex).hidden=Xe.icon.isHidden())}const ht=Me&&Me.has(Ee)?Me.get(Ee):{text:null,icon:null};if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const dt=c.collisionArrays[Ee];if(dt){let Ot=new r.P(0,0);if(dt.textBox||dt.verticalTextBox){let Bt=!0;if(J){const Mt=this.variableOffsets[Ve];Mt?(Ot=Dn(Mt.anchor,Mt.width,Mt.height,Mt.textOffset,Mt.textBoxScale),se&&Ot._rotate(re?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Bt=!1}if(dt.textBox||dt.verticalTextBox){let Mt;dt.textBox&&(Mt=gt),dt.verticalTextBox&&(Mt=lt),ut(c.textCollisionBox.collisionVertexArray,Xe.text.placed,!Bt||Mt,ht.text,Ot.x,Ot.y)}}if(dt.iconBox||dt.verticalIconBox){const Bt=!!(!lt&&dt.verticalIconBox);let Mt;dt.iconBox&&(Mt=Bt),dt.verticalIconBox&&(Mt=!Bt),ut(c.iconCollisionBox.collisionVertexArray,Xe.icon.placed,Mt,ht.icon,fe?Ot.x:0,fe?Ot.y:0)}}}}if(c.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);c.bucketInstanceId in this.collisionCircleArrays&&(c.collisionCircleArray=this.collisionCircleArrays[c.bucketInstanceId],delete this.collisionCircleArrays[c.bucketInstanceId])}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,f){const y=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*y>c}setStale(){this.stale=!0}}function ut(I,c,f,y,S,P){y&&y.length!==0||(y=[0,0,0,0]);const z=y[0]-$i,H=y[1]-$i,W=y[2]-$i,Z=y[3]-$i;I.emplaceBack(c?1:0,f?1:0,S||0,P||0,z,H),I.emplaceBack(c?1:0,f?1:0,S||0,P||0,W,H),I.emplaceBack(c?1:0,f?1:0,S||0,P||0,W,Z),I.emplaceBack(c?1:0,f?1:0,S||0,P||0,z,Z)}const Le=Math.pow(2,25),ki=Math.pow(2,24),er=Math.pow(2,17),br=Math.pow(2,16),Fc=Math.pow(2,9),Bc=Math.pow(2,8),cr=Math.pow(2,1);function Ei(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const c=I.placed?1:0,f=Math.floor(127*I.opacity);return f*Le+c*ki+f*er+c*br+f*Fc+c*Bc+f*cr+c}const Un=0;class uo{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,f,y,S,P){const z=this._bucketParts;for(;this._currentTileIndex<c.length;)if(f.getBucketParts(z,S,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,P())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort(((H,W)=>H.sortKey-W.sortKey)));this._currentPartIndex<z.length;)if(f.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,P())return!0;return!1}}class kl{constructor(c,f,y,S,P,z,H,W){this.placement=new Ja(c,f,z,H,W),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=P,this._done=!1}isDone(){return this._done}continuePlacement(c,f,y){const S=O(),P=()=>!this._forceFullPlacement&&O()-S>2;for(;this._currentPlacementIndex>=0;){const z=f[c[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=H)&&(!z.maxzoom||z.maxzoom>H)){if(this._inProgressLayer||(this._inProgressLayer=new uo(z)),this._inProgressLayer.continuePlacement(y[z.source],this.placement,this._showCollisionBoxes,z,P))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Ui=512/r.a5/2;class Cl{constructor(c,f,y){this.tileID=c,this.bucketInstanceId=y,this._symbolsByKey={};const S=new Map;for(let P=0;P<f.length;P++){const z=f.get(P),H=z.key,W=S.get(H);W?W.push(z):S.set(H,[z])}for(const[P,z]of S){const H={positions:z.map((W=>({x:Math.floor(W.anchorX*Ui),y:Math.floor(W.anchorY*Ui)}))),crossTileIDs:z.map((W=>W.crossTileID))};if(H.positions.length>128){const W=new r.aT(H.positions.length,16,Uint16Array);for(const{x:Z,y:J}of H.positions)W.add(Z,J);W.finish(),delete H.positions,H.index=W}this._symbolsByKey[P]=H}}getScaledCoordinates(c,f){const{x:y,y:S,z:P}=this.tileID.canonical,{x:z,y:H,z:W}=f.canonical,Z=Ui/Math.pow(2,W-P),J=(H*r.a5+c.anchorY)*Z,se=S*r.a5*Ui;return{x:Math.floor((z*r.a5+c.anchorX)*Z-y*r.a5*Ui),y:Math.floor(J-se)}}findMatches(c,f,y){const S=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let P=0;P<c.length;P++){const z=c.get(P);if(z.crossTileID)continue;const H=this._symbolsByKey[z.key];if(!H)continue;const W=this.getScaledCoordinates(z,f);if(H.index){const Z=H.index.range(W.x-S,W.y-S,W.x+S,W.y+S).sort();for(const J of Z){const se=H.crossTileIDs[J];if(!y[se]){y[se]=!0,z.crossTileID=se;break}}}else if(H.positions)for(let Z=0;Z<H.positions.length;Z++){const J=H.positions[Z],se=H.crossTileIDs[Z];if(Math.abs(J.x-W.x)<=S&&Math.abs(J.y-W.y)<=S&&!y[se]){y[se]=!0,z.crossTileID=se;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:c})=>c))}}class zh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Fh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const f=Math.round((c-this.lng)/360);if(f!==0)for(const y in this.indexes){const S=this.indexes[y],P={};for(const z in S){const H=S[z];H.tileID=H.tileID.unwrapTo(H.tileID.wrap+f),P[H.tileID.key]=H}this.indexes[y]=P}this.lng=c}addBucket(c,f,y){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let P=0;P<f.symbolInstances.length;P++)f.symbolInstances.get(P).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const S=this.usedCrossTileIDs[c.overscaledZ];for(const P in this.indexes){const z=this.indexes[P];if(Number(P)>c.overscaledZ)for(const H in z){const W=z[H];W.tileID.isChildOf(c)&&W.findMatches(f.symbolInstances,c,S)}else{const H=z[c.scaledTo(Number(P)).key];H&&H.findMatches(f.symbolInstances,c,S)}}for(let P=0;P<f.symbolInstances.length;P++){const z=f.symbolInstances.get(P);z.crossTileID||(z.crossTileID=y.generate(),S[z.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Cl(c,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(c,f){for(const y of f.getCrossTileIDsLists())for(const S of y)delete this.usedCrossTileIDs[c][S]}removeStaleBuckets(c){let f=!1;for(const y in this.indexes){const S=this.indexes[y];for(const P in S)c[S[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,S[P]),delete S[P],f=!0)}return f}}class kn{constructor(){this.layerIndexes={},this.crossTileIDs=new zh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,f,y){let S=this.layerIndexes[c.id];S===void 0&&(S=this.layerIndexes[c.id]=new Fh);let P=!1;const z={};S.handleWrapJump(y);for(const H of f){const W=H.getBucket(c);W&&c.id===W.layerIds[0]&&(W.bucketInstanceId||(W.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(H.tileID,W,this.crossTileIDs)&&(P=!0),z[W.bucketInstanceId]=!0)}return S.removeStaleBuckets(z)&&(P=!0),P}pruneUnusedLayers(c){const f={};c.forEach((y=>{f[y]=!0}));for(const y in this.layerIndexes)f[y]||delete this.layerIndexes[y]}}var za="void main() {fragColor=vec4(1.0);}";const Cn={prelude:zt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:zt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:zt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:zt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:zt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:zt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:zt(za,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:zt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:zt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:zt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:zt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:zt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:zt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:zt(za,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:zt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:zt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:zt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:zt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:zt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:zt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:zt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:zt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:zt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:zt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:zt(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:zt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:zt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:zt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:zt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:zt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:zt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:zt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:zt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:zt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:zt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:zt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function zt(I,c){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=c.match(/in ([\w]+) ([\w]+)/g),S=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=P?P.concat(S):S,H={};return{fragmentSource:I=I.replace(f,((W,Z,J,se,re)=>(H[re]=!0,Z==="define"?`
#ifndef HAS_UNIFORM_u_${re}
in ${J} ${se} ${re};
#else
uniform ${J} ${se} u_${re};
#endif
`:`
#ifdef HAS_UNIFORM_u_${re}
    ${J} ${se} ${re} = u_${re};
#endif
`))),vertexSource:c=c.replace(f,((W,Z,J,se,re)=>{const fe=se==="float"?"vec2":"vec4",ye=re.match(/color/)?"color":fe;return H[re]?Z==="define"?`
#ifndef HAS_UNIFORM_u_${re}
uniform lowp float u_${re}_t;
in ${J} ${fe} a_${re};
out ${J} ${se} ${re};
#else
uniform ${J} ${se} u_${re};
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_${re}
    ${re} = a_${re};
#else
    ${J} ${se} ${re} = u_${re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${re}
    ${re} = unpack_mix_${ye}(a_${re}, u_${re}_t);
#else
    ${J} ${se} ${re} = u_${re};
#endif
`:Z==="define"?`
#ifndef HAS_UNIFORM_u_${re}
uniform lowp float u_${re}_t;
in ${J} ${fe} a_${re};
#else
uniform ${J} ${se} u_${re};
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_${re}
    ${J} ${se} ${re} = a_${re};
#else
    ${J} ${se} ${re} = u_${re};
#endif
`:`
#ifndef HAS_UNIFORM_u_${re}
    ${J} ${se} ${re} = unpack_mix_${ye}(a_${re}, u_${re}_t);
#else
    ${J} ${se} ${re} = u_${re};
#endif
`})),staticAttributes:y,staticUniforms:z}}class jn{constructor(c,f,y){this.vertexBuffer=c,this.indexBuffer=f,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Vi=r.aU([{name:"a_pos",type:"Int16",components:2}]);const An="#define PROJECTION_MERCATOR",ts="mercator";class hr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ts}get shaderDefine(){return An}get shaderPreludeCode(){return Cn.projectionMercator}get vertexShaderPreludeCode(){return Cn.projectionMercator.vertexSource}get subdivisionGranularity(){return r.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(c){}getMeshFromTileID(c,f,y,S,P){if(this._cachedMesh)return this._cachedMesh;const z=new r.aW;z.emplaceBack(0,0),z.emplaceBack(r.a5,0),z.emplaceBack(0,r.a5),z.emplaceBack(r.a5,r.a5);const H=c.createVertexBuffer(z,Vi.members),W=r.aX.simpleSegment(0,0,4,2),Z=new r.aY;Z.emplaceBack(1,0,2),Z.emplaceBack(1,2,3);const J=c.createIndexBuffer(Z);return this._cachedMesh=new jn(H,J,W),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(c){}}class al{constructor(c=0,f=0,y=0,S=0){if(isNaN(c)||c<0||isNaN(f)||f<0||isNaN(y)||y<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=f,this.left=y,this.right=S}interpolate(c,f,y){return f.top!=null&&c.top!=null&&(this.top=r.G.number(c.top,f.top,y)),f.bottom!=null&&c.bottom!=null&&(this.bottom=r.G.number(c.bottom,f.bottom,y)),f.left!=null&&c.left!=null&&(this.left=r.G.number(c.left,f.left,y)),f.right!=null&&c.right!=null&&(this.right=r.G.number(c.right,f.right,y)),this}getCenter(c,f){const y=r.an((this.left+c-this.right)/2,0,c),S=r.an((this.top+f-this.bottom)/2,0,f);return new r.P(y,S)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new al(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ur(I,c){if(!I.renderWorldCopies||I.lngRange)return;const f=c.lng-I.center.lng;c.lng+=f>180?-360:f<-180?360:0}function ba(I){return Math.max(0,Math.floor(I))}class As{constructor(c,f){var y;this.applyConstrain=(S,P)=>this._constrainOverride!==null?this._constrainOverride(S,P):this._callbacks.defaultConstrain(S,P),this._callbacks=c,this._tileSize=512,this._renderWorldCopies=f?.renderWorldCopies===void 0||!!f?.renderWorldCopies,this._minZoom=f?.minZoom||0,this._maxZoom=f?.maxZoom||22,this._minPitch=f?.minPitch==null?0:f?.minPitch,this._maxPitch=f?.maxPitch==null?60:f?.maxPitch,this._constrainOverride=(y=f?.constrainOverride)!==null&&y!==void 0?y:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new r.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ba(this._zoom),this._scale=r.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new al,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(c,f,y){this._constrainOverride=c.constrainOverride,this._latRange=c.latRange,this._lngRange=c.lngRange,this._width=c.width,this._height=c.height,this._center=c.center,this._elevation=c.elevation,this._minElevationForCurrentTile=c.minElevationForCurrentTile,this._zoom=c.zoom,this._tileZoom=ba(this._zoom),this._scale=r.aq(this._zoom),this._bearingInRadians=c.bearingInRadians,this._fovInRadians=c.fovInRadians,this._pitchInRadians=c.pitchInRadians,this._rollInRadians=c.rollInRadians,this._unmodified=c.unmodified,this._edgeInsets=new al(c.padding.top,c.padding.bottom,c.padding.left,c.padding.right),this._minZoom=c.minZoom,this._maxZoom=c.maxZoom,this._minPitch=c.minPitch,this._maxPitch=c.maxPitch,this._renderWorldCopies=c.renderWorldCopies,this._cameraToCenterDistance=c.cameraToCenterDistance,this._nearZ=c.nearZ,this._farZ=c.farZ,this._autoCalculateNearFarZ=!y&&c.autoCalculateNearFarZ,f&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(c){this._minElevationForCurrentTile=c}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(c){this._minZoom!==c&&(this._minZoom=c,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(c){this._minPitch!==c&&(this._minPitch=c,this.setPitch(Math.max(this.pitch,c)))}get maxPitch(){return this._maxPitch}setMaxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.setPitch(Math.min(this.pitch,c)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get constrainOverride(){return this._constrainOverride}setConstrainOverride(c){c===void 0&&(c=null),this._constrainOverride!==c&&(this._constrainOverride=c,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(c){const f=r.W(c,-180,180)*Math.PI/180;var y,S,P,z,H,W,Z,J,se;this._bearingInRadians!==f&&(this._unmodified=!1,this._bearingInRadians=f,this._calcMatrices(),this._rotationMatrix=g(),y=this._rotationMatrix,P=-this._bearingInRadians,z=(S=this._rotationMatrix)[0],H=S[1],W=S[2],Z=S[3],J=Math.sin(P),se=Math.cos(P),y[0]=z*se+W*J,y[1]=H*se+Z*J,y[2]=z*-J+W*se,y[3]=H*-J+Z*se)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(c){const f=r.an(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==f&&(this._unmodified=!1,this._pitchInRadians=f,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(c){const f=c/180*Math.PI;this._rollInRadians!==f&&(this._unmodified=!1,this._rollInRadians=f,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return r.aZ(this._fovInRadians)}setFov(c){c=r.an(c,.1,150),this.fov!==c&&(this._unmodified=!1,this._fovInRadians=r.ap(c),this._calcMatrices())}get zoom(){return this._zoom}setZoom(c){const f=this.applyConstrain(this._center,c).zoom;this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this._tileZoom=Math.max(0,Math.floor(f)),this._scale=r.aq(f),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(c){c!==this._elevation&&(this._elevation=c,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(c,f){this._autoCalculateNearFarZ=!1,this._nearZ=c,this._farZ=f,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,f,y){this._unmodified=!1,this._edgeInsets.interpolate(c,f,y),this.constrainInternal(),this._calcMatrices()}resize(c,f,y=!0){this._width=c,this._height=f,y&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new st([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(c){c?(this._lngRange=[c.getWest(),c.getEast()],this._latRange=[c.getSouth(),c.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-r.ao,r.ao])}getCameraQueryGeometry(c,f){if(f.length===1)return[f[0],c];{const{minX:y,minY:S,maxX:P,maxY:z}=r.aa.fromPoints(f).extend(c);return[new r.P(y,S),new r.P(P,S),new r.P(P,z),new r.P(y,z),new r.P(y,S)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const c=this._unmodified,{center:f,zoom:y}=this.applyConstrain(this.center,this.zoom);this.setCenter(f),this.setZoom(y),this._unmodified=c,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let c=r.ar(new Float64Array(16));r.Q(c,c,[this._width/2,-this._height/2,1]),r.O(c,c,[1,-1,0]),this._clipSpaceToPixelsMatrix=c,c=r.ar(new Float64Array(16)),r.Q(c,c,[1,-1,1]),r.O(c,c,[-1,-1,0]),r.Q(c,c,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=c,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(c,f,y,S){const P=y!==void 0?y:this.bearing,z=S=S!==void 0?S:this.pitch,{distanceToCenter:H,clampedElevation:W}=this._distanceToCenterFromAltElevationPitch(f,this.elevation,z),{x:Z,y:J}=an(z,P),se=r.a9.fromLngLat(c,f);let re,fe,ye=r.a_(1,se.y),Te=0;do{if(Te+=1,Te>10)break;fe=H/ye,re=new r.a9(se.x+Z*fe,se.y+J*fe),ye=1/re.meterInMercatorCoordinateUnits()}while(Math.abs(H-fe*ye)>1e-12);return{center:re.toLngLat(),elevation:W,zoom:r.at(this.height/2/Math.tan(this.fovInRadians/2)/fe/this.tileSize)}}recalculateZoomAndCenter(c){if(this.elevation-c==0)return;const f=1/this.worldSize,y=r.as(1,this.center.lat)*this.worldSize,S=r.a9.fromLngLat(this.center,this.elevation),P=S.x/f,z=S.y/f,H=S.z/f,W=this.pitch,Z=this.bearing,{x:J,y:se,z:re}=an(W,Z),fe=this.cameraToCenterDistance,ye=P+fe*-J,Te=z+fe*-se,Me=H+fe*re,{distanceToCenter:Ee,clampedElevation:Fe}=this._distanceToCenterFromAltElevationPitch(Me/y,c,W),Ge=Ee*y,Oe=new r.a9((ye+J*Ge)*f,(Te+se*Ge)*f,0).toLngLat(),Ve=r.as(1,Oe.lat),Xe=r.at(this.height/2/Math.tan(this.fovInRadians/2)/Ee/Ve/this.tileSize);this._elevation=Fe,this._center=Oe,this.setZoom(Xe)}_distanceToCenterFromAltElevationPitch(c,f,y){const S=-Math.cos(r.ap(y)),P=c-f;let z,H=f;return S*P>=0||Math.abs(S)<.1?(z=1e4,H=c+z*S):z=-P/S,{distanceToCenter:z,clampedElevation:H}}getCameraPoint(){const c=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.P(c*Math.sin(this.rollInRadians),c*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const c=r.as(1,this.center.lat)*this.worldSize;return rt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/c).toLngLat()}getMercatorTileCoordinates(c){if(!c)return[0,0,1,1];const f=c.canonical.z>=0?1<<c.canonical.z:Math.pow(2,c.canonical.z);return[c.canonical.x/f,c.canonical.y/f,1/f/r.a5,1/f/r.a5]}}class Gr{constructor(c,f){this.min=c,this.max=f,this.center=r.a$([],r.b0([],this.min,this.max),.5)}quadrant(c){const f=[c%2==0,c<2],y=r.b1(this.min),S=r.b1(this.max);for(let P=0;P<f.length;P++)y[P]=f[P]?this.min[P]:this.center[P],S[P]=f[P]?this.center[P]:this.max[P];return S[2]=this.max[2],new Gr(y,S)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersectsFrustum(c){let f=!0;for(let y=0;y<c.planes.length;y++){const S=this.intersectsPlane(c.planes[y]);if(S===0)return 0;S===1&&(f=!1)}return f?2:c.aabb.min[0]>this.max[0]||c.aabb.min[1]>this.max[1]||c.aabb.min[2]>this.max[2]||c.aabb.max[0]<this.min[0]||c.aabb.max[1]<this.min[1]||c.aabb.max[2]<this.min[2]?0:1}intersectsPlane(c){let f=c[3],y=c[3];for(let S=0;S<3;S++)c[S]>0?(f+=c[S]*this.min[S],y+=c[S]*this.max[S]):(y+=c[S]*this.min[S],f+=c[S]*this.max[S]);return f>=0?2:y<0?0:1}}class Fo{distanceToTile2d(c,f,y,S){const P=S.distanceX([c,f]),z=S.distanceY([c,f]);return Math.hypot(P,z)}getWrap(c,f,y){return y}getTileBoundingVolume(c,f,y,S){var P,z;let H=0,W=0;if(S?.terrain){const J=new r.a2(c.z,f,c.z,c.x,c.y),se=S.terrain.getMinMaxElevation(J);H=(P=se.minElevation)!==null&&P!==void 0?P:Math.min(0,y),W=(z=se.maxElevation)!==null&&z!==void 0?z:Math.max(0,y)}const Z=1<<c.z;return new Gr([f+c.x/Z,c.y/Z,H],[f+(c.x+1)/Z,(c.y+1)/Z,W])}allowVariableZoom(c,f){const y=c.fov*(Math.abs(Math.cos(c.rollInRadians))*c.height+Math.abs(Math.sin(c.rollInRadians))*c.width)/c.height,S=r.an(78.5-y/2,0,60);return!!f.terrain||c.pitch>S}allowWorldCopies(){return!0}prepareNextFrame(){}}class Rr{constructor(c,f,y){this.points=c,this.planes=f,this.aabb=y}static fromInvProjectionMatrix(c,f=1,y=0,S,P){const z=P?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],H=Math.pow(2,y),W=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((re=>(function(fe,ye,Te,Me){const Ee=r.aH([],fe,ye),Fe=1/Ee[3]/Te*Me;return r.b6(Ee,Ee,[Fe,Fe,1/Ee[3],Fe])})(re,c,f,H)));S&&(function(re,fe,ye,Te){const Me=Te?4:0,Ee=Te?0:4;let Fe=0;const Ge=[],Oe=[];for(let Ne=0;Ne<4;Ne++){const Ke=r.b2([],re[Ne+Ee],re[Ne+Me]),gt=r.b7(Ke);r.a$(Ke,Ke,1/gt),Ge.push(gt),Oe.push(Ke)}for(let Ne=0;Ne<4;Ne++){const Ke=r.b8(re[Ne+Me],Oe[Ne],ye);Fe=Ke!==null&&Ke>=0?Math.max(Fe,Ke):Math.max(Fe,Ge[Ne])}const Ve=(function(Ne,Ke){const gt=r.b2([],Ne[Ke[0]],Ne[Ke[1]]),lt=r.b2([],Ne[Ke[2]],Ne[Ke[1]]),ht=[0,0,0,0];return r.b3(ht,r.b4([],gt,lt)),ht[3]=-r.b5(ht,Ne[Ke[0]]),ht})(re,fe),Xe=(function(Ne,Ke){const gt=r.b9(Ne),lt=r.ba([],Ne,1/gt),ht=r.b2([],Ke,r.a$([],lt,r.b5(Ke,lt))),dt=r.b9(ht);if(dt>0){const Ot=Math.sqrt(1-lt[3]*lt[3]),Bt=r.a$([],lt,-lt[3]),Mt=r.b0([],Bt,r.a$([],ht,Ot/dt));return r.bb(Ke,Mt)}return null})(ye,Ve);if(Xe!==null){const Ne=Xe/r.b5(Oe[0],Ve);Fe=Math.min(Fe,Ne)}for(let Ne=0;Ne<4;Ne++){const Ke=Math.min(Fe,Ge[Ne]);re[Ne+Ee]=[re[Ne+Me][0]+Oe[Ne][0]*Ke,re[Ne+Me][1]+Oe[Ne][1]*Ke,re[Ne+Me][2]+Oe[Ne][2]*Ke,1]}})(W,z[0],S,P);const Z=z.map((re=>{const fe=r.b2([],W[re[0]],W[re[1]]),ye=r.b2([],W[re[2]],W[re[1]]),Te=r.b3([],r.b4([],fe,ye)),Me=-r.b5(Te,W[re[1]]);return Te.concat(Me)})),J=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],se=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const re of W)for(let fe=0;fe<3;fe++)J[fe]=Math.min(J[fe],re[fe]),se[fe]=Math.max(se[fe],re[fe]);return new Rr(W,Z,new Gr(J,se))}}class Ts{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,f,y){return this._helper.interpolatePadding(c,f,y)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,f,y=!0){this._helper.resize(c,f,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,f){this._helper.overrideNearFarZ(c,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(c,f){}constructor(c){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(f,y)=>{y=r.an(+y,this.minZoom,this.maxZoom);const S={center:new r.V(f.lng,f.lat),zoom:y};let P=this._helper._lngRange;if(!this._helper._renderWorldCopies&&P===null){const Oe=179.9999999999;P=[-Oe,Oe]}const z=this.tileSize*r.aq(S.zoom);let H=0,W=z,Z=0,J=z,se=0,re=0;const{x:fe,y:ye}=this.size;if(this._helper._latRange){const Oe=this._helper._latRange;H=r.X(Oe[1])*z,W=r.X(Oe[0])*z,W-H<ye&&(se=ye/(W-H))}P&&(Z=r.W(r.Y(P[0])*z,0,z),J=r.W(r.Y(P[1])*z,0,z),J<Z&&(J+=z),J-Z<fe&&(re=fe/(J-Z)));const{x:Te,y:Me}=Pt(z,f);let Ee,Fe;const Ge=Math.max(re||0,se||0);if(Ge){const Oe=new r.P(re?(J+Z)/2:Te,se?(W+H)/2:Me);return S.center=wi(z,Oe).wrap(),S.zoom+=r.at(Ge),S}if(this._helper._latRange){const Oe=ye/2;Me-Oe<H&&(Fe=H+Oe),Me+Oe>W&&(Fe=W-Oe)}if(P){const Oe=(Z+J)/2;let Ve=Te;this._helper._renderWorldCopies&&(Ve=r.W(Te,Oe-z/2,Oe+z/2));const Xe=fe/2;Ve-Xe<Z&&(Ee=Z+Xe),Ve+Xe>J&&(Ee=J-Xe)}if(Ee!==void 0||Fe!==void 0){const Oe=new r.P(Ee??Te,Fe??Me);S.center=wi(z,Oe).wrap()}return S},this.applyConstrain=(f,y)=>this._helper.applyConstrain(f,y),this._helper=new As({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(f,y)=>this.defaultConstrain(f,y)},c),this._coveringTilesDetailsProvider=new Fo}clone(){const c=new Ts;return c.apply(this),c}apply(c,f,y){this._helper.apply(c,f,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(c){const f=[new r.bc(0,c)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new r.P(0,0)),S=this.screenPointToMercatorCoordinate(new r.P(this._helper._width,0)),P=this.screenPointToMercatorCoordinate(new r.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new r.P(0,this._helper._height)),H=Math.floor(Math.min(y.x,S.x,P.x,z.x)),W=Math.floor(Math.max(y.x,S.x,P.x,z.x)),Z=1;for(let J=H-Z;J<=W+Z;J++)J!==0&&f.push(new r.bc(J,c))}return f}getCameraFrustum(){return Rr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(c){const f=this.screenPointToLocation(this.centerPoint,c),y=c?c.getElevationForLngLatZoom(f,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(c,f){const y=r.as(this.elevation,this.center.lat),S=this.screenPointToMercatorCoordinateAtZ(f,y),P=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),z=r.a9.fromLngLat(c),H=new r.a9(z.x-(S.x-P.x),z.y-(S.y-P.y));this.setCenter(H?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(c,f){return f?this.coordinatePoint(r.a9.fromLngLat(c),f.getElevationForLngLat(c,this),this._pixelMatrix3D):this.coordinatePoint(r.a9.fromLngLat(c))}screenPointToLocation(c,f){var y;return(y=this.screenPointToMercatorCoordinate(c,f))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(c,f){if(f){const y=f.pointCoordinate(c);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(c)}screenPointToMercatorCoordinateAtZ(c,f){const y=f||0,S=[c.x,c.y,0,1],P=[c.x,c.y,1,1];r.aH(S,S,this._pixelMatrixInverse),r.aH(P,P,this._pixelMatrixInverse);const z=S[3],H=P[3],W=S[1]/z,Z=P[1]/H,J=S[2]/z,se=P[2]/H,re=J===se?0:(y-J)/(se-J);return new r.a9(r.G.number(S[0]/z,P[0]/H,re)/this.worldSize,r.G.number(W,Z,re)/this.worldSize,y)}coordinatePoint(c,f=0,y=this._pixelMatrix){const S=[c.x*this.worldSize,c.y*this.worldSize,f,1];return r.aH(S,S,y),new r.P(S[0]/S[3],S[1]/S[3])}getBounds(){const c=Math.max(0,this._helper._height/2-si(this));return new st().extend(this.screenPointToLocation(new r.P(0,c))).extend(this.screenPointToLocation(new r.P(this._helper._width,c))).extend(this.screenPointToLocation(new r.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new r.P(0,this._helper._height)))}isPointOnMapSurface(c,f){return f?f.pointCoordinate(c)!=null:c.y>this.height/2-si(this)}calculatePosMatrix(c,f=!1,y){var S;const P=(S=c.key)!==null&&S!==void 0?S:r.bd(c.wrap,c.canonical.z,c.canonical.z,c.canonical.x,c.canonical.y),z=f?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(P)){const Z=z.get(P);return y?Z.f32:Z.f64}const H=Oi(c,this.worldSize);r.S(H,f?this._alignedProjMatrix:this._viewProjMatrix,H);const W={f64:H,f32:new Float32Array(H)};return z.set(P,W),y?W.f32:W.f64}calculateFogMatrix(c){const f=c.key,y=this._fogMatrixCacheF32;if(y.has(f))return y.get(f);const S=Oi(c,this.worldSize);return r.S(S,this._fogMatrix,S),y.set(f,new Float32Array(S)),y.get(f)}calculateCenterFromCameraLngLatAlt(c,f,y,S){return this._helper.calculateCenterFromCameraLngLatAlt(c,f,y,S)}_calculateNearFarZIfNeeded(c,f,y){if(!this._helper.autoCalculateNearFarZ)return;const S=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),P=c-S*this._helper._pixelPerMeter/Math.cos(f),z=S<0?P:c,H=Math.PI/2+this.pitchInRadians,W=r.ap(this.fov)*(Math.abs(Math.cos(r.ap(this.roll)))*this.height+Math.abs(Math.sin(r.ap(this.roll)))*this.width)/this.height*(.5+y.y/this.height),Z=Math.sin(W)*z/Math.sin(r.an(Math.PI-H-W,.01,Math.PI-.01)),J=si(this),se=Math.atan(J/this._helper.cameraToCenterDistance),re=r.ap(.75),fe=se>re?2*se*(.5+y.y/(2*J)):re,ye=Math.sin(fe)*z/Math.sin(r.an(Math.PI-H-fe,.01,Math.PI-.01)),Te=Math.min(Z,ye);this._helper._farZ=1.01*(Math.cos(Math.PI/2-f)*Te+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const c=this.centerOffset,f=Pt(this.worldSize,this.center),y=f.x,S=f.y;this._helper._pixelPerMeter=r.as(1,this.center.lat)*this.worldSize;const P=r.ap(Math.min(this.pitch,Vt)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(P));let H;this._calculateNearFarZIfNeeded(z,P,c),H=new Float64Array(16),r.be(H,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),r.aB(this._invProjMatrix,H),H[8]=2*-c.x/this._helper._width,H[9]=2*c.y/this._helper._height,this._projectionMatrix=r.bf(H),r.Q(H,H,[1,-1,1]),r.O(H,H,[0,0,-this._helper.cameraToCenterDistance]),r.bg(H,H,-this.rollInRadians),r.bh(H,H,this.pitchInRadians),r.bg(H,H,-this.bearingInRadians),r.O(H,H,[-y,-S,0]),this._mercatorMatrix=r.Q([],H,[this.worldSize,this.worldSize,this.worldSize]),r.Q(H,H,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=r.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,H),r.O(H,H,[0,0,-this.elevation]),this._viewProjMatrix=H,this._invViewProjMatrix=r.aB([],H);const W=[0,0,-1,1];r.aH(W,W,this._invViewProjMatrix),this._cameraPosition=[W[0]/W[3],W[1]/W[3],W[2]/W[3]],this._fogMatrix=new Float64Array(16),r.be(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-c.x/this.width,this._fogMatrix[9]=2*c.y/this.height,r.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),r.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),r.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),r.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),r.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),r.O(this._fogMatrix,this._fogMatrix,[-y,-S,0]),r.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),r.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=r.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,H);const Z=this._helper._width%2/2,J=this._helper._height%2/2,se=Math.cos(this.bearingInRadians),re=Math.sin(-this.bearingInRadians),fe=y-Math.round(y)+se*Z+re*J,ye=S-Math.round(S)+se*J+re*Z,Te=new Float64Array(H);if(r.O(Te,Te,[fe>.5?fe-1:fe,ye>.5?ye-1:ye,0]),this._alignedProjMatrix=Te,H=r.aB(new Float64Array(16),this._pixelMatrix),!H)throw new Error("failed to invert matrix");this._pixelMatrixInverse=H,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const c=this.screenPointToMercatorCoordinate(new r.P(0,0)),f=[c.x*this.worldSize,c.y*this.worldSize,0,1];return r.aH(f,f,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const c=r.as(1,this.center.lat)*this.worldSize;return rt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/c).toLngLat()}lngLatToCameraDepth(c,f){const y=r.a9.fromLngLat(c),S=[y.x*this.worldSize,y.y*this.worldSize,f,1];return r.aH(S,S,this._viewProjMatrix),S[2]/S[3]}getProjectionData(c){const{overscaledTileID:f,aligned:y,applyTerrainMatrix:S}=c,P=this._helper.getMercatorTileCoordinates(f),z=f?this.calculatePosMatrix(f,y,!0):null;let H;return H=f&&f.terrainRttPosMatrix32f&&S?f.terrainRttPosMatrix32f:z||r.bi(),{mainMatrix:H,tileMercatorCoords:P,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:H}}isLocationOccluded(c){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(c,f,y){return 1}transformLightDirection(c){return r.b1(c)}getRayDirectionFromPixel(c){throw new Error("Not implemented.")}projectTileCoordinates(c,f,y,S){const P=this.calculatePosMatrix(y);let z;S?(z=[c,f,S(c,f),1],r.aH(z,z,P)):(z=[c,f,0,1],Sl(z,z,P));const H=z[3];return{point:new r.P(z[0]/H,z[1]/H),signedDistanceFromCamera:H,isOccluded:!1}}populateCache(c){for(const f of c)this.calculatePosMatrix(f)}getMatrixForModel(c,f){const y=r.a9.fromLngLat(c,f),S=y.meterInMercatorCoordinateUnits(),P=r.bj();return r.O(P,P,[y.x,y.y,y.z]),r.bg(P,P,Math.PI),r.bh(P,P,Math.PI/2),r.Q(P,P,[-S,S,S]),P}getProjectionDataForCustomLayer(c=!0){const f=new r.a2(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:f,applyGlobeMatrix:c}),S=Oi(f,this.worldSize);r.S(S,this._viewProjMatrix,S),y.tileMercatorCoords=[0,0,1,1];const P=[r.a5,r.a5,this.worldSize/this._helper.pixelsPerMeter],z=r.bk();return r.Q(z,S,P),y.fallbackMatrix=z,y.mainMatrix=z,y}getFastPathSimpleProjectionMatrix(c){return this.calculatePosMatrix(c)}}function is(){r.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Or(I){if(I.useSlerp)if(I.k<1){const c=r.bl(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),f=r.bl(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),y=new Float64Array(4);r.bm(y,c,f,I.k);const S=r.bn(y);I.tr.setRoll(S.roll),I.tr.setPitch(S.pitch),I.tr.setBearing(S.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(r.G.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(r.G.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(r.G.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function Nc(I,c,f,y,S){const P=S.padding,z=Pt(S.worldSize,f.getNorthWest()),H=Pt(S.worldSize,f.getNorthEast()),W=Pt(S.worldSize,f.getSouthEast()),Z=Pt(S.worldSize,f.getSouthWest()),J=r.ap(-y),se=z.rotate(J),re=H.rotate(J),fe=W.rotate(J),ye=Z.rotate(J),Te=new r.P(Math.max(se.x,re.x,ye.x,fe.x),Math.max(se.y,re.y,ye.y,fe.y)),Me=new r.P(Math.min(se.x,re.x,ye.x,fe.x),Math.min(se.y,re.y,ye.y,fe.y)),Ee=Te.sub(Me),Fe=(S.width-(P.left+P.right+c.left+c.right))/Ee.x,Ge=(S.height-(P.top+P.bottom+c.top+c.bottom))/Ee.y;if(Ge<0||Fe<0)return void is();const Oe=Math.min(r.at(S.scale*Math.min(Fe,Ge)),I.maxZoom),Ve=r.P.convert(I.offset),Xe=new r.P((c.left-c.right)/2,(c.top-c.bottom)/2).rotate(r.ap(y)),Ne=Ve.add(Xe).mult(S.scale/r.aq(Oe));return{center:wi(S.worldSize,z.add(W).div(2).sub(Ne)),zoom:Oe,bearing:y}}class Bo{get useGlobeControls(){return!1}handlePanInertia(c,f){const y=c.mag(),S=Math.abs(si(f));return{easingOffset:c.mult(Math.min(.75*S/y,1)),easingCenter:f.center}}handleMapControlsRollPitchBearingZoom(c,f){c.bearingDelta&&f.setBearing(f.bearing+c.bearingDelta),c.pitchDelta&&f.setPitch(f.pitch+c.pitchDelta),c.rollDelta&&f.setRoll(f.roll+c.rollDelta),c.zoomDelta&&f.setZoom(f.zoom+c.zoomDelta)}handleMapControlsPan(c,f,y){c.around.distSqr(f.centerPoint)<.01||f.setLocationAtPoint(y,c.around)}cameraForBoxAndBearing(c,f,y,S,P){return Nc(c,f,y,S,P)}handleJumpToCenterZoom(c,f){c.zoom!==(f.zoom!==void 0?+f.zoom:c.zoom)&&c.setZoom(+f.zoom),f.center!==void 0&&c.setCenter(r.V.convert(f.center))}handleEaseTo(c,f){const y=c.zoom,S=c.padding,P={roll:c.roll,pitch:c.pitch,bearing:c.bearing},z={roll:f.roll===void 0?c.roll:f.roll,pitch:f.pitch===void 0?c.pitch:f.pitch,bearing:f.bearing===void 0?c.bearing:f.bearing},H=f.zoom!==void 0,W=!c.isPaddingEqual(f.padding);let Z=!1;const J=H?+f.zoom:c.zoom;let se=c.centerPoint.add(f.offsetAsPoint);const re=c.screenPointToLocation(se),{center:fe,zoom:ye}=c.applyConstrain(r.V.convert(f.center||re),J??y);Ur(c,fe);const Te=Pt(c.worldSize,re),Me=Pt(c.worldSize,fe).sub(Te),Ee=r.aq(ye-y);return Z=ye!==y,{easeFunc:Fe=>{if(Z&&c.setZoom(r.G.number(y,ye,Fe)),r.bo(P,z)||Or({startEulerAngles:P,endEulerAngles:z,tr:c,k:Fe,useSlerp:P.roll!=z.roll}),W&&(c.interpolatePadding(S,f.padding,Fe),se=c.centerPoint.add(f.offsetAsPoint)),f.around)c.setLocationAtPoint(f.around,f.aroundPoint);else{const Ge=r.aq(c.zoom-y),Oe=ye>y?Math.min(2,Ee):Math.max(.5,Ee),Ve=Math.pow(Oe,1-Fe),Xe=wi(c.worldSize,Te.add(Me.mult(Fe*Ve)).mult(Ge));c.setLocationAtPoint(c.renderWorldCopies?Xe.wrap():Xe,se)}},isZooming:Z,elevationCenter:fe}}handleFlyTo(c,f){const y=f.zoom!==void 0,S=c.zoom,P=c.applyConstrain(r.V.convert(f.center||f.locationAtOffset),y?+f.zoom:S),z=P.center,H=P.zoom;Ur(c,z);const W=Pt(c.worldSize,f.locationAtOffset),Z=Pt(c.worldSize,z).sub(W),J=Z.mag(),se=r.aq(H-S);let re;if(f.minZoom!==void 0){const fe=Math.min(+f.minZoom,S,H),ye=c.applyConstrain(z,fe).zoom;re=r.aq(ye-S)}return{easeFunc:(fe,ye,Te,Me)=>{c.setZoom(fe===1?H:S+r.at(ye));const Ee=fe===1?z:wi(c.worldSize,W.add(Z.mult(Te)).mult(ye));c.setLocationAtPoint(c.renderWorldCopies?Ee.wrap():Ee,Me)},scaleOfZoom:se,targetCenter:z,scaleOfMinZoom:re,pixelPathLength:J}}}class Rn{constructor(c,f,y){this.blendFunction=c,this.blendColor=f,this.mask=y}}Rn.Replace=[1,0],Rn.disabled=new Rn(Rn.Replace,r.bp.transparent,[!1,!1,!1,!1]),Rn.unblended=new Rn(Rn.Replace,r.bp.transparent,[!0,!0,!0,!0]),Rn.alphaBlended=new Rn([1,771],r.bp.transparent,[!0,!0,!0,!0]);const Al=2305;class sn{constructor(c,f,y){this.enable=c,this.mode=f,this.frontFace=y}}sn.disabled=new sn(!1,1029,Al),sn.backCCW=new sn(!0,1029,Al),sn.frontCCW=new sn(!0,1028,Al);class Gi{constructor(c,f,y){this.func=c,this.mask=f,this.range=y}}Gi.ReadOnly=!1,Gi.ReadWrite=!0,Gi.disabled=new Gi(519,Gi.ReadOnly,[0,1]);const vn=7680;class on{constructor(c,f,y,S,P,z){this.test=c,this.ref=f,this.mask=y,this.fail=S,this.depthFail=P,this.pass=z}}on.disabled=new on({func:519,mask:0},0,0,vn,vn,vn);const No=new WeakMap;function Wa(I){var c;if(No.has(I))return No.get(I);{const f=(c=I.getParameter(I.VERSION))===null||c===void 0?void 0:c.startsWith("WebGL 2.0");return No.set(I,f),f}}class Tl{get awaitingQuery(){return!!this._readbackQueue}constructor(c){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=c;const f=c.context,y=f.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const S=new r.aW;S.emplaceBack(-1,-1),S.emplaceBack(2,-1),S.emplaceBack(-1,2);const P=new r.aY;P.emplaceBack(0,1,2),this._fullscreenTriangle=new jn(f.createVertexBuffer(S,Vi.members),f.createIndexBuffer(P),r.aX.simpleSegment(0,0,S.length,P.length)),this._resultBuffer=new Uint8Array(4),f.activeTexture.set(y.TEXTURE1);const z=y.createTexture();y.bindTexture(y.TEXTURE_2D,z),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=f.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),Wa(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const c=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),c.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(c,f){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(c,f),this._updateCount++,this._measuredError}_bindFramebuffer(){const c=this._cachedRenderContext.context,f=c.gl;c.activeTexture.set(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this._fbo.colorAttachment.get()),c.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(c,f){const y=this._cachedRenderContext.context,S=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:r.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,S.TRIANGLES,Gi.disabled,on.disabled,Rn.unblended,sn.disabled,((P,z)=>({u_input:P,u_output_expected:z}))(c,f),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Wa(S)){S.bindBuffer(S.PIXEL_PACK_BUFFER,this._pbo),S.readBuffer(S.COLOR_ATTACHMENT0),S.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),S.bindBuffer(S.PIXEL_PACK_BUFFER,null);const P=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);S.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:P}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const c=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Wa(c)){const f=c.clientWaitSync(this._readbackQueue.sync,0,0);if(f===c.WAIT_FAILED)return r.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(f===c.TIMEOUT_EXPIRED)return;c.bindBuffer(c.PIXEL_PACK_BUFFER,this._pbo),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),c.bindBuffer(c.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),c.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Tl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(c){let f=0;return f+=c[0]/256,f+=c[1]/65536,f+=c[2]/16777216,c[3]<127&&(f=-f),f/128}}const _t=r.a5/128;function qi(I,c){const f=I.granularity!==void 0?Math.max(I.granularity,1):1,y=f+(I.generateBorders?2:0),S=f+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),P=y+1,z=S+1,H=I.generateBorders?-1:0,W=I.generateBorders||I.extendToNorthPole?-1:0,Z=f+(I.generateBorders?1:0),J=f+(I.generateBorders||I.extendToSouthPole?1:0),se=P*z,re=y*S*6,fe=P*z>65536;if(fe&&c==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ye=fe||c==="32bit",Te=new Int16Array(2*se);let Me=0;for(let Ge=W;Ge<=J;Ge++)for(let Oe=H;Oe<=Z;Oe++){let Ve=Oe/f*r.a5;Oe===-1&&(Ve=-_t),Oe===f+1&&(Ve=r.a5+_t);let Xe=Ge/f*r.a5;Ge===-1&&(Xe=I.extendToNorthPole?r.br:-_t),Ge===f+1&&(Xe=I.extendToSouthPole?r.bs:r.a5+_t),Te[Me++]=Ve,Te[Me++]=Xe}const Ee=ye?new Uint32Array(re):new Uint16Array(re);let Fe=0;for(let Ge=0;Ge<S;Ge++)for(let Oe=0;Oe<y;Oe++){const Ve=Oe+1+Ge*P,Xe=Oe+(Ge+1)*P,Ne=Oe+1+(Ge+1)*P;Ee[Fe++]=Oe+Ge*P,Ee[Fe++]=Xe,Ee[Fe++]=Ve,Ee[Fe++]=Ve,Ee[Fe++]=Xe,Ee[Fe++]=Ne}return{vertices:Te.buffer.slice(0),indices:Ee.buffer.slice(0),uses32bitIndices:ye}}const Ea=new r.aV({fill:new r.bt(128,2),line:new r.bt(512,0),tile:new r.bt(128,32),stencil:new r.bt(128,1),circle:3});class El{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Cn.projectionGlobe}get vertexShaderPreludeCode(){return Cn.projectionMercator.vertexSource}get subdivisionGranularity(){return Ea}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(c){this._errorMeasurement||(this._errorMeasurement=new Tl(c));const f=r.X(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-f*Math.PI*2))-.5*Math.PI,S=this._errorMeasurement.updateErrorLoop(f,y),P=O();S!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=S,this._errorMeasurementLastChangeTime=P);const z=Math.min(Math.max((P-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=r.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,r.bv(z))}_getMeshKey(c){return`${c.granularity.toString(36)}_${c.generateBorders?"b":""}${c.extendToNorthPole?"n":""}${c.extendToSouthPole?"s":""}`}getMeshFromTileID(c,f,y,S,P){const z=(P==="stencil"?Ea.stencil:Ea.tile).getGranularityForZoomLevel(f.z);return this._getMesh(c,{granularity:z,generateBorders:y,extendToNorthPole:f.y===0&&S,extendToSouthPole:f.y===(1<<f.z)-1&&S})}_getMesh(c,f){const y=this._getMeshKey(f);if(y in this._tileMeshCache)return this._tileMeshCache[y];const S=(function(P,z){const H=qi(z,"16bit"),W=r.aW.deserialize({arrayBuffer:H.vertices,length:H.vertices.byteLength/2/2}),Z=r.aY.deserialize({arrayBuffer:H.indices,length:H.indices.byteLength/2/3});return new jn(P.createVertexBuffer(W,Vi.members),P.createIndexBuffer(Z),r.aX.simpleSegment(0,0,W.length,Z.length))})(c,f);return this._tileMeshCache[y]=S,S}recalculate(c){}hasTransition(){const c=O();let f=!1;return f=f||(c-this._errorMeasurementLastChangeTime)/1e3<.7,f=f||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,f}setErrorQueryLatitudeDegrees(c){this._errorQueryLatitudeDegrees=c}}const xd=new r.t({type:new r.D(r.u.projection.type)});class yd extends r.E{constructor(c){super(),this._transitionable=new r.x(xd,void 0),this.setProjection(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new r.H(0)),this._mercatorProjection=new hr,this._verticalPerspectiveProjection=new El}get transitionState(){const c=this.properties.get("type");if(typeof c=="string"&&c==="mercator")return 0;if(typeof c=="string"&&c==="vertical-perspective")return 1;if(c instanceof r.bw){if(c.from==="vertical-perspective"&&c.to==="mercator")return 1-c.transition;if(c.from==="mercator"&&c.to==="vertical-perspective")return c.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(c){this._mercatorProjection.updateGPUdependent(c),this._verticalPerspectiveProjection.updateGPUdependent(c)}getMeshFromTileID(c,f,y,S,P){return this.currentProjection.getMeshFromTileID(c,f,y,S,P)}setProjection(c){this._transitionable.setValue("type",c?.type||"mercator")}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}setErrorQueryLatitudeDegrees(c){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(c),this._mercatorProjection.setErrorQueryLatitudeDegrees(c)}}function zr(I){const c=na(I.worldSize,I.center.lat);return 2*Math.PI*c}function $s(I,c,f,y,S){const P=1/(1<<S),z=c/r.a5*P+y*P,H=r.by((I/r.a5*P+f*P)*Math.PI*2+Math.PI,2*Math.PI),W=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,Z=Math.cos(W),J=new Float64Array(3);return J[0]=Math.sin(H)*Z,J[1]=Math.sin(W),J[2]=Math.cos(H)*Z,J}function Gn(I){return(function(c,f){const y=Math.cos(f),S=new Float64Array(3);return S[0]=Math.sin(c)*y,S[1]=Math.sin(f),S[2]=Math.cos(c)*y,S})(I.lng*Math.PI/180,I.lat*Math.PI/180)}function na(I,c){return I/(2*Math.PI)/Math.cos(c*Math.PI/180)}function Kl(I){const c=Math.asin(I[1])/Math.PI*180,f=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(f>1e-6){const y=I[0]/f,S=Math.acos(I[2]/f),P=(y>0?S:-S)/Math.PI*180;return new r.V(r.W(P,-180,180),c)}return new r.V(0,c)}function Yn(I){return Math.cos(I*Math.PI/180)}function qn(I,c){const f=Yn(I),y=Yn(c);return r.at(y/f)}function jo(I,c){const f=I.rotate(c.bearingInRadians),y=c.zoom+qn(c.center.lat,0),S=r.bu(1/Yn(c.center.lat),1/Yn(Math.min(Math.abs(c.center.lat),60)),r.bx(y,7,3,0,1)),P=360/zr({worldSize:c.worldSize,center:{lat:c.center.lat}});return new r.V(c.center.lng-f.x*P*S,r.an(c.center.lat+f.y*P,-r.ao,r.ao))}function On(I){const c=.5*I,f=Math.sin(c),y=Math.cos(c);return Math.log(f+y)-Math.log(y-f)}function Ri(I,c,f,y){const S=I.lat+f*y;if(Math.abs(f)>1){const P=(Math.sign(I.lat+f)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,z=Math.abs(I.lat+f)*Math.PI/180,H=On(P+y*(z-P)),W=On(P),Z=On(z);return new r.V(I.lng+c*((H-W)/(Z-W)),S)}return new r.V(I.lng+c*y,S)}class sp{constructor(c){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=c}swapBuffers(){if(!this._hadAnyChanges)return;const c=this._cachePrevious;this._cachePrevious=this._cache,this._cache=c,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(c,f,y,S){const P=`${c.z}_${c.x}_${c.y}_${S?.terrain?"t":""}`,z=this._cache.get(P);if(z)return z;const H=this._cachePrevious.get(P);if(H)return this._cache.set(P,H),H;const W=this._boundingVolumeFactory(c,f,y,S);return this._cache.set(P,W),this._hadAnyChanges=!0,W}}class En{constructor(c,f,y,S){this.min=y,this.max=S,this.points=c,this.planes=f}static fromAabb(c,f){const y=[];for(let S=0;S<8;S++)y.push([1&~S?c[0]:f[0],(S>>1&1)==1?f[1]:c[1],(S>>2&1)==1?f[2]:c[2]]);return new En(y,[[-1,0,0,f[0]],[1,0,0,-c[0]],[0,-1,0,f[1]],[0,1,0,-c[1]],[0,0,-1,f[2]],[0,0,1,-c[2]]],c,f)}static fromCenterSizeAngles(c,f,y){const S=r.bB([],y[0],y[1],y[2]),P=r.bC([],[f[0],0,0],S),z=r.bC([],[0,f[1],0],S),H=r.bC([],[0,0,f[2]],S),W=[...c],Z=[...c];for(let se=0;se<8;se++)for(let re=0;re<3;re++){const fe=c[re]+P[re]*(1&~se?-1:1)+z[re]*((se>>1&1)==1?1:-1)+H[re]*((se>>2&1)==1?1:-1);W[re]=Math.min(W[re],fe),Z[re]=Math.max(Z[re],fe)}const J=[];for(let se=0;se<8;se++){const re=[...c];r.b0(re,re,r.a$([],P,1&~se?-1:1)),r.b0(re,re,r.a$([],z,(se>>1&1)==1?1:-1)),r.b0(re,re,r.a$([],H,(se>>2&1)==1?1:-1)),J.push(re)}return new En(J,[[...P,-r.b5(P,J[0])],[...z,-r.b5(z,J[0])],[...H,-r.b5(H,J[0])],[-P[0],-P[1],-P[2],-r.b5(P,J[7])],[-z[0],-z[1],-z[2],-r.b5(z,J[7])],[-H[0],-H[1],-H[2],-r.b5(H,J[7])]],W,Z)}intersectsFrustum(c){let f=!0;const y=this.points.length,S=this.planes.length,P=c.planes.length,z=c.points.length;for(let H=0;H<P;H++){const W=c.planes[H];let Z=0;for(let J=0;J<y;J++){const se=this.points[J];W[0]*se[0]+W[1]*se[1]+W[2]*se[2]+W[3]>=0&&Z++}if(Z===0)return 0;Z<y&&(f=!1)}if(f)return 2;for(let H=0;H<S;H++){const W=this.planes[H];let Z=0;for(let J=0;J<z;J++){const se=c.points[J];W[0]*se[0]+W[1]*se[1]+W[2]*se[2]+W[3]>=0&&Z++}if(Z===0)return 0}return 1}intersectsPlane(c){const f=this.points.length;let y=0;for(let S=0;S<f;S++){const P=this.points[S];c[0]*P[0]+c[1]*P[1]+c[2]*P[2]+c[3]>=0&&y++}return y===f?2:y===0?0:1}}function Xs(I,c,f){const y=I-c;return y<0?-y:Math.max(0,y-f)}function Es(I,c,f,y,S){const P=I-f;let z;return z=P<0?Math.min(-P,1+P-S):P>1?Math.min(Math.max(P-S,0),1-P):0,Math.max(z,Xs(c,y,S))}class Bh{constructor(){this._boundingVolumeCache=new sp(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(c,f,y,S){const P=1<<y.z,z=1/P,H=y.x/P,W=y.y/P;let Z=2;return Z=Math.min(Z,Es(c,f,H,W,z)),Z=Math.min(Z,Es(c,f,H+.5,-W-z,z)),Z=Math.min(Z,Es(c,f,H+.5,2-W-z,z)),Z}getWrap(c,f,y){const S=1<<f.z,P=1/S,z=f.x/S,H=Xs(c.x,z,P),W=Xs(c.x,z-1,P),Z=Xs(c.x,z+1,P),J=Math.min(H,W,Z);return J===Z?1:J===W?-1:0}allowVariableZoom(c,f){return Jt(c,f)>4}allowWorldCopies(){return!1}getTileBoundingVolume(c,f,y,S){return this._boundingVolumeCache.getTileBoundingVolume(c,f,y,S)}_computeTileBoundingVolume(c,f,y,S){var P,z;let H=0,W=0;if(S?.terrain){const Z=new r.a2(c.z,f,c.z,c.x,c.y),J=S.terrain.getMinMaxElevation(Z);H=(P=J.minElevation)!==null&&P!==void 0?P:Math.min(0,y),W=(z=J.maxElevation)!==null&&z!==void 0?z:Math.max(0,y)}if(H/=r.bE,W/=r.bE,H+=1,W+=1,c.z<=0)return En.fromAabb([-W,-W,-W],[W,W,W]);if(c.z===1)return En.fromAabb([c.x===0?-W:0,c.y===0?0:-W,-W],[c.x===0?0:W,c.y===0?W:0,W]);{const Z=[$s(0,0,c.x,c.y,c.z),$s(r.a5,0,c.x,c.y,c.z),$s(r.a5,r.a5,c.x,c.y,c.z),$s(0,r.a5,c.x,c.y,c.z)],J=[];for(const ht of Z)J.push(r.a$([],ht,W));if(W!==H)for(const ht of Z)J.push(r.a$([],ht,H));c.y===0&&J.push([0,1,0]),c.y===(1<<c.z)-1&&J.push([0,-1,0]);const se=[1,1,1],re=[-1,-1,-1];for(const ht of J)for(let dt=0;dt<3;dt++)se[dt]=Math.min(se[dt],ht[dt]),re[dt]=Math.max(re[dt],ht[dt]);const fe=$s(r.a5/2,r.a5/2,c.x,c.y,c.z),ye=r.b4([],[0,1,0],fe);r.b3(ye,ye);const Te=r.b4([],fe,ye);r.b3(Te,Te);const Me=r.b4([],Z[2],Z[1]);r.b3(Me,Me);const Ee=r.b4([],Z[0],Z[3]);r.b3(Ee,Ee),J.push(r.a$([],fe,W)),c.y>=(1<<c.z)/2&&J.push(r.a$([],$s(r.a5/2,0,c.x,c.y,c.z),W)),c.y<(1<<c.z)/2&&J.push(r.a$([],$s(r.a5/2,r.a5,c.x,c.y,c.z),W));const Fe=Wr(fe,J),Ge=Wr(Te,J),Oe=[-fe[0],-fe[1],-fe[2],Fe.max],Ve=[fe[0],fe[1],fe[2],-Fe.min],Xe=[-Te[0],-Te[1],-Te[2],Ge.max],Ne=[Te[0],Te[1],Te[2],-Ge.min],Ke=[...Me,0],gt=[...Ee,0],lt=[];return c.y===0?lt.push(r.bD(gt,Ke,Oe),r.bD(gt,Ke,Ve)):lt.push(r.bD(Xe,Ke,Oe),r.bD(Xe,Ke,Ve),r.bD(Xe,gt,Oe),r.bD(Xe,gt,Ve)),c.y===(1<<c.z)-1?lt.push(r.bD(gt,Ke,Oe),r.bD(gt,Ke,Ve)):lt.push(r.bD(Ne,Ke,Oe),r.bD(Ne,Ke,Ve),r.bD(Ne,gt,Oe),r.bD(Ne,gt,Ve)),new En(lt,[Oe,Ve,Xe,Ne,Ke,gt],se,re)}}}function Wr(I,c){let f=1/0,y=-1/0;for(const S of c){const P=r.b5(I,S);f=Math.min(f,P),y=Math.max(y,P)}return{min:f,max:y}}class Vo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,f,y){return this._helper.interpolatePadding(c,f,y)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,f){this._helper.resize(c,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,f){this._helper.overrideNearFarZ(c,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(c){}constructor(c){this._cachedClippingPlane=r.bF(),this._projectionMatrix=r.bj(),this._globeViewProjMatrix32f=r.bi(),this._globeViewProjMatrixNoCorrection=r.bj(),this._globeViewProjMatrixNoCorrectionInverted=r.bj(),this._globeProjMatrixInverted=r.bj(),this._cameraPosition=r.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(f,y)=>{const S=r.an(f.lat,-r.ao,r.ao),P=r.an(+y,this.minZoom+qn(0,S),this.maxZoom);return{center:new r.V(f.lng,S),zoom:P}},this.applyConstrain=(f,y)=>this._helper.applyConstrain(f,y),this._helper=new As({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(f,y)=>this.defaultConstrain(f,y)},c),this._coveringTilesDetailsProvider=new Bh}clone(){const c=new Vo;return c.apply(this),c}apply(c,f){this._globeLatitudeErrorCorrectionRadians=f||0,this._helper.apply(c)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const c=r.bz();return c[0]=this._cameraPosition[0],c[1]=this._cameraPosition[1],c[2]=this._cameraPosition[2],c}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(c){const{overscaledTileID:f,applyGlobeMatrix:y}=c,S=this._helper.getMercatorTileCoordinates(f);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:S,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(c){const f=this.pitchInRadians,y=this.cameraToCenterDistance/c,S=Math.sin(f)*y,P=Math.cos(f)*y+1,z=1/Math.sqrt(S*S+P*P)*1;let H=-S,W=P;const Z=Math.sqrt(H*H+W*W);H/=Z,W/=Z;const J=[0,H,W];r.bG(J,J,[0,0,0],-this.bearingInRadians),r.bH(J,J,[0,0,0],-1*this.center.lat*Math.PI/180),r.bI(J,J,[0,0,0],this.center.lng*Math.PI/180);const se=1/r.b7(J);return r.a$(J,J,se),[...J,-z*se]}isLocationOccluded(c){return!this.isSurfacePointVisible(Gn(c))}transformLightDirection(c){const f=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,S=Math.cos(y),P=[Math.sin(f)*S,Math.sin(y),Math.cos(f)*S],z=[P[2],0,-P[0]],H=[0,0,0];r.b4(H,z,P),r.b3(z,z),r.b3(H,H);const W=[0,0,0];return r.b3(W,[z[0]*c[0]+H[0]*c[1]+P[0]*c[2],z[1]*c[0]+H[1]*c[1]+P[1]*c[2],z[2]*c[0]+H[2]*c[1]+P[2]*c[2]]),W}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(c,f,y){const S=(function(H,W,Z){const J=1/(1<<Z.z);return new r.a9(H/r.a5*J+Z.x*J,W/r.a5*J+Z.y*J)})(c,f,y.canonical),P=(z=S.y,[r.by(S.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(P[1])}projectTileCoordinates(c,f,y,S){const P=y.canonical,z=$s(c,f,P.x,P.y,P.z),H=1+(S?S(c,f):0)/r.bE,W=[z[0]*H,z[1]*H,z[2]*H,1];r.aH(W,W,this._globeViewProjMatrixNoCorrection);const Z=this._cachedClippingPlane,J=Z[0]*z[0]+Z[1]*z[1]+Z[2]*z[2]+Z[3]<0;return{point:new r.P(W[0]/W[3],W[1]/W[3]),signedDistanceFromCamera:W[3],isOccluded:J}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const c=na(this.worldSize,this.center.lat),f=r.bk(),y=r.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*c),r.be(f,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const S=this.centerOffset;f[8]=2*-S.x/this._helper._width,f[9]=2*S.y/this._helper._height,this._projectionMatrix=r.bf(f),this._globeProjMatrixInverted=r.bk(),r.aB(this._globeProjMatrixInverted,f),r.O(f,f,[0,0,-this.cameraToCenterDistance]),r.bg(f,f,this.rollInRadians),r.bh(f,f,-this.pitchInRadians),r.bg(f,f,this.bearingInRadians),r.O(f,f,[0,0,-c]);const P=r.bz();P[0]=c,P[1]=c,P[2]=c,r.bh(y,f,this.center.lat*Math.PI/180),r.bJ(y,y,-this.center.lng*Math.PI/180),r.Q(y,y,P),this._globeViewProjMatrixNoCorrection=y,r.bh(f,f,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),r.bJ(f,f,-this.center.lng*Math.PI/180),r.Q(f,f,P),this._globeViewProjMatrix32f=new Float32Array(f),this._globeViewProjMatrixNoCorrectionInverted=r.bk(),r.aB(this._globeViewProjMatrixNoCorrectionInverted,y);const z=r.bz();this._cameraPosition=r.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/c,r.bG(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),r.bH(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),r.bG(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),r.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),r.bH(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),r.bI(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(c);const H=r.bf(this._globeViewProjMatrixNoCorrectionInverted);r.Q(H,H,[1,1,-1]),this._cachedFrustum=Rr.fromInvProjectionMatrix(H,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(c){r.w("calculateFogMatrix is not supported on globe projection.");const f=r.bk();return r.ar(f),f}getVisibleUnwrappedCoordinates(c){return[new r.bc(0,c)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(c){c&&r.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(c,f){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=Gn(c);r.a$(y,y,1+f/r.bE);const S=r.bF();return r.aH(S,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),S[2]/S[3]}populateCache(c){}getBounds(){const c=.5*this.width,f=.5*this.height,y=[new r.P(0,0),new r.P(c,0),new r.P(this.width,0),new r.P(this.width,f),new r.P(this.width,this.height),new r.P(c,this.height),new r.P(0,this.height),new r.P(0,f)],S=[];for(const se of y)S.push(this.unprojectScreenPoint(se));let P=0,z=0,H=0,W=0;const Z=this.center;for(const se of S){const re=r.bK(Z.lng,se.lng),fe=r.bK(Z.lat,se.lat);re<z&&(z=re),re>P&&(P=re),fe<W&&(W=fe),fe>H&&(H=fe)}const J=[Z.lng+z,Z.lat+W,Z.lng+P,Z.lat+H];return this.isSurfacePointOnScreen([0,1,0])&&(J[3]=90,J[0]=-180,J[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(J[1]=-90,J[0]=-180,J[2]=180),new st(J)}calculateCenterFromCameraLngLatAlt(c,f,y,S){return this._helper.calculateCenterFromCameraLngLatAlt(c,f,y,S)}setLocationAtPoint(c,f){const y=Gn(this.unprojectScreenPoint(f)),S=Gn(c),P=r.bz();r.bL(P);const z=r.bz();r.bI(z,y,P,-this.center.lng*Math.PI/180),r.bH(z,z,P,this.center.lat*Math.PI/180);const H=S[0]*S[0]+S[2]*S[2],W=z[0]*z[0];if(H<W)return;const Z=Math.sqrt(H-W),J=-Z,se=r.bM(S[0],S[2],z[0],Z),re=r.bM(S[0],S[2],z[0],J),fe=r.bz();r.bI(fe,S,P,-se);const ye=r.bM(fe[1],fe[2],z[1],z[2]),Te=r.bz();r.bI(Te,S,P,-re);const Me=r.bM(Te[1],Te[2],z[1],z[2]),Ee=.5*Math.PI,Fe=ye>=-Ee&&ye<=Ee,Ge=Me>=-Ee&&Me<=Ee;let Oe,Ve;if(Fe&&Ge){const gt=this.center.lng*Math.PI/180,lt=this.center.lat*Math.PI/180;r.bN(se,gt)+r.bN(ye,lt)<r.bN(re,gt)+r.bN(Me,lt)?(Oe=se,Ve=ye):(Oe=re,Ve=Me)}else if(Fe)Oe=se,Ve=ye;else{if(!Ge)return;Oe=re,Ve=Me}const Xe=Oe/Math.PI*180,Ne=Ve/Math.PI*180,Ke=this.center.lat;this.setCenter(new r.V(Xe,r.an(Ne,-90,90))),this.setZoom(this.zoom+qn(Ke,this.center.lat))}locationToScreenPoint(c,f){const y=Gn(c);if(f){const S=f.getElevationForLngLatZoom(c,this._helper._tileZoom);r.a$(y,y,1+S/r.bE)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(c){const f=r.bF();return r.aH(f,[...c,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],new r.P((.5*f[0]+.5)*this.width,(.5*-f[1]+.5)*this.height)}screenPointToMercatorCoordinate(c,f){if(f){const y=f.pointCoordinate(c);if(y)return y}return r.a9.fromLngLat(this.unprojectScreenPoint(c))}screenPointToLocation(c,f){var y;return(y=this.screenPointToMercatorCoordinate(c,f))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(c,f){const y=this._cameraPosition,S=this.getRayDirectionFromPixel(c);return!!this.rayPlanetIntersection(y,S)}getRayDirectionFromPixel(c){const f=r.bF();f[0]=c.x/this.width*2-1,f[1]=-1*(c.y/this.height*2-1),f[2]=1,f[3]=1,r.aH(f,f,this._globeViewProjMatrixNoCorrectionInverted),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3];const y=r.bz();y[0]=f[0]-this._cameraPosition[0],y[1]=f[1]-this._cameraPosition[1],y[2]=f[2]-this._cameraPosition[2];const S=r.bz();return r.b3(S,y),S}isSurfacePointVisible(c){const f=this._cachedClippingPlane;return f[0]*c[0]+f[1]*c[1]+f[2]*c[2]+f[3]>=0}isSurfacePointOnScreen(c){if(!this.isSurfacePointVisible(c))return!1;const f=r.bF();return r.aH(f,[...c,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[0]>-1&&f[0]<1&&f[1]>-1&&f[1]<1&&f[2]>-1&&f[2]<1}rayPlanetIntersection(c,f){const y=r.b5(c,f),S=r.bz(),P=r.bz();r.a$(P,f,y),r.b2(S,c,P);const z=1-r.b5(S,S);if(z<0)return null;const H=r.b5(c,c)-1,W=-y+(y<0?1:-1)*Math.sqrt(z),Z=H/W,J=W;return{tMin:Math.min(Z,J),tMax:Math.max(Z,J)}}unprojectScreenPoint(c){const f=this._cameraPosition,y=this.getRayDirectionFromPixel(c),S=this.rayPlanetIntersection(f,y);if(S){const J=r.bz();r.b0(J,f,[y[0]*S.tMin,y[1]*S.tMin,y[2]*S.tMin]);const se=r.bz();return r.b3(se,J),Kl(se)}const P=this._cachedClippingPlane,z=P[0]*y[0]+P[1]*y[1]+P[2]*y[2],H=-r.bb(P,f)/z,W=r.bz();if(H>0)r.b0(W,f,[y[0]*H,y[1]*H,y[2]*H]);else{const J=r.bz();r.b0(J,f,[2*y[0],2*y[1],2*y[2]]);const se=r.bb(this._cachedClippingPlane,J);r.b2(W,J,[this._cachedClippingPlane[0]*se,this._cachedClippingPlane[1]*se,this._cachedClippingPlane[2]*se])}const Z=(function(J){const se=r.bz();return se[0]=J[0]*-J[3],se[1]=J[1]*-J[3],se[2]=J[2]*-J[3],{center:se,radius:Math.sqrt(1-J[3]*J[3])}})(P);return Kl((function(J,se,re){const fe=r.bz();r.b2(fe,re,J);const ye=r.bz();return r.bA(ye,J,fe,se/r.b9(fe)),ye})(Z.center,Z.radius,W))}getMatrixForModel(c,f){const y=r.V.convert(c),S=1/r.bE,P=r.bj();return r.bJ(P,P,y.lng/180*Math.PI),r.bh(P,P,-y.lat/180*Math.PI),r.O(P,P,[0,0,1+f/r.bE]),r.bh(P,P,.5*Math.PI),r.Q(P,P,[S,S,S]),P}getProjectionDataForCustomLayer(c=!0){const f=this.getProjectionData({overscaledTileID:new r.a2(0,0,0,0,0),applyGlobeMatrix:c});return f.tileMercatorCoords=[0,0,1,1],f}getFastPathSimpleProjectionMatrix(c){}}class rl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,f,y){return this._helper.interpolatePadding(c,f,y)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,f,y=!0){this._helper.resize(c,f,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,f){this._helper.overrideNearFarZ(c,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(c,f){this._globeness=c,this._globeLatitudeErrorCorrectionRadians=f,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(c){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(f,y)=>this.currentTransform.defaultConstrain(f,y),this.applyConstrain=(f,y)=>this._helper.applyConstrain(f,y),this._helper=new As({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(f,y)=>this.defaultConstrain(f,y)},c),this._globeness=1,this._mercatorTransform=new Ts,this._verticalPerspectiveTransform=new Vo}clone(){const c=new rl;return c._globeness=this._globeness,c._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,c.apply(this),c}apply(c){this._helper.apply(c),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(c){const f=this._mercatorTransform.getProjectionData(c),y=this._verticalPerspectiveTransform.getProjectionData(c);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:f.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:c.applyGlobeMatrix?this._globeness:0,fallbackMatrix:f.fallbackMatrix}}isLocationOccluded(c){return this.currentTransform.isLocationOccluded(c)}transformLightDirection(c){return this.currentTransform.transformLightDirection(c)}getPixelScale(){return r.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return r.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(c,f,y){const S=this._mercatorTransform.getPitchedTextCorrection(c,f,y),P=this._verticalPerspectiveTransform.getPitchedTextCorrection(c,f,y);return r.bu(S,P,this._globeness)}projectTileCoordinates(c,f,y,S){return this.currentTransform.projectTileCoordinates(c,f,y,S)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(c){return this.currentTransform.calculateFogMatrix(c)}getVisibleUnwrappedCoordinates(c){return this.currentTransform.getVisibleUnwrappedCoordinates(c)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(c){this._mercatorTransform.recalculateZoomAndCenter(c),this._verticalPerspectiveTransform.recalculateZoomAndCenter(c)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(c,f){return this.currentTransform.lngLatToCameraDepth(c,f)}populateCache(c){this._mercatorTransform.populateCache(c),this._verticalPerspectiveTransform.populateCache(c)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(c,f,y,S){return this._helper.calculateCenterFromCameraLngLatAlt(c,f,y,S)}setLocationAtPoint(c,f){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(c,f),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(c,f),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(c,f){return this.currentTransform.locationToScreenPoint(c,f)}screenPointToMercatorCoordinate(c,f){return this.currentTransform.screenPointToMercatorCoordinate(c,f)}screenPointToLocation(c,f){return this.currentTransform.screenPointToLocation(c,f)}isPointOnMapSurface(c,f){return this.currentTransform.isPointOnMapSurface(c,f)}getRayDirectionFromPixel(c){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(c)}getMatrixForModel(c,f){return this.currentTransform.getMatrixForModel(c,f)}getProjectionDataForCustomLayer(c=!0){const f=this._mercatorTransform.getProjectionDataForCustomLayer(c);if(!this.isGlobeRendering)return f;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(c);return y.fallbackMatrix=f.mainMatrix,y}getFastPathSimpleProjectionMatrix(c){return this.currentTransform.getFastPathSimpleProjectionMatrix(c)}}class wa{get useGlobeControls(){return!0}handlePanInertia(c,f){const y=jo(c,f);return Math.abs(y.lng-f.center.lng)>180&&(y.lng=f.center.lng+179.5*Math.sign(y.lng-f.center.lng)),{easingCenter:y,easingOffset:new r.P(0,0)}}handleMapControlsRollPitchBearingZoom(c,f){const y=c.around,S=f.screenPointToLocation(y);c.bearingDelta&&f.setBearing(f.bearing+c.bearingDelta),c.pitchDelta&&f.setPitch(f.pitch+c.pitchDelta),c.rollDelta&&f.setRoll(f.roll+c.rollDelta);const P=f.zoom;c.zoomDelta&&f.setZoom(f.zoom+c.zoomDelta);const z=f.zoom-P;if(z===0)return;const H=r.bK(f.center.lng,S.lng),W=H/(Math.abs(H/180)+1),Z=r.bK(f.center.lat,S.lat),J=f.getRayDirectionFromPixel(y),se=f.cameraPosition,re=-1*r.b5(se,J),fe=r.bz();r.b0(fe,se,[J[0]*re,J[1]*re,J[2]*re]);const ye=r.b7(fe)-1,Te=Math.exp(.5*-Math.max(ye-.3,0)),Me=na(f.worldSize,f.center.lat)/Math.min(f.width,f.height),Ee=r.bx(Me,.9,.5,1,.25),Fe=(1-r.aq(-z))*Math.min(Te,Ee),Ge=f.center.lat,Oe=f.zoom,Ve=new r.V(f.center.lng+W*Fe,r.an(f.center.lat+Z*Fe,-r.ao,r.ao));f.setLocationAtPoint(S,y);const Xe=f.center,Ne=r.bx(Math.abs(H),45,85,0,1),Ke=r.bx(Me,.75,.35,0,1),gt=Math.pow(Math.max(Ne,Ke),.25),lt=r.bK(Xe.lng,Ve.lng),ht=r.bK(Xe.lat,Ve.lat);f.setCenter(new r.V(Xe.lng+lt*gt,Xe.lat+ht*gt).wrap()),f.setZoom(Oe+qn(Ge,f.center.lat))}handleMapControlsPan(c,f,y){if(!c.panDelta)return;const S=f.center.lat,P=f.zoom;f.setCenter(jo(c.panDelta,f).wrap()),f.setZoom(P+qn(S,f.center.lat))}cameraForBoxAndBearing(c,f,y,S,P){const z=Nc(c,f,y,S,P),H=f.left/P.width*2-1,W=(P.width-f.right)/P.width*2-1,Z=f.top/P.height*-2+1,J=(P.height-f.bottom)/P.height*-2+1,se=r.bK(y.getWest(),y.getEast())<0,re=se?y.getEast():y.getWest(),fe=se?y.getWest():y.getEast(),ye=Math.max(y.getNorth(),y.getSouth()),Te=Math.min(y.getNorth(),y.getSouth()),Me=re+.5*r.bK(re,fe),Ee=ye+.5*r.bK(ye,Te),Fe=P.clone();Fe.setCenter(z.center),Fe.setBearing(z.bearing),Fe.setPitch(0),Fe.setRoll(0),Fe.setZoom(z.zoom);const Ge=Fe.modelViewProjectionMatrix,Oe=[Gn(y.getNorthWest()),Gn(y.getNorthEast()),Gn(y.getSouthWest()),Gn(y.getSouthEast()),Gn(new r.V(fe,Ee)),Gn(new r.V(re,Ee)),Gn(new r.V(Me,ye)),Gn(new r.V(Me,Te))],Ve=Gn(z.center);let Xe=Number.POSITIVE_INFINITY;for(const Ne of Oe)H<0&&(Xe=wa.getLesserNonNegativeNonNull(Xe,wa.solveVectorScale(Ne,Ve,Ge,"x",H))),W>0&&(Xe=wa.getLesserNonNegativeNonNull(Xe,wa.solveVectorScale(Ne,Ve,Ge,"x",W))),Z>0&&(Xe=wa.getLesserNonNegativeNonNull(Xe,wa.solveVectorScale(Ne,Ve,Ge,"y",Z))),J<0&&(Xe=wa.getLesserNonNegativeNonNull(Xe,wa.solveVectorScale(Ne,Ve,Ge,"y",J)));if(Number.isFinite(Xe)&&Xe!==0)return z.zoom=Fe.zoom+r.at(Xe),z;is()}handleJumpToCenterZoom(c,f){const y=c.center.lat,S=c.applyConstrain(f.center?r.V.convert(f.center):c.center,c.zoom).center;c.setCenter(S.wrap());const P=f.zoom!==void 0?+f.zoom:c.zoom+qn(y,S.lat);c.zoom!==P&&c.setZoom(P)}handleEaseTo(c,f){const y=c.zoom,S=c.center,P=c.padding,z={roll:c.roll,pitch:c.pitch,bearing:c.bearing},H={roll:f.roll===void 0?c.roll:f.roll,pitch:f.pitch===void 0?c.pitch:f.pitch,bearing:f.bearing===void 0?c.bearing:f.bearing},W=f.zoom!==void 0,Z=!c.isPaddingEqual(f.padding);let J=!1;const se=f.center?r.V.convert(f.center):S,re=c.applyConstrain(se,y).center;Ur(c,re);const fe=c.clone();fe.setCenter(re),fe.setZoom(W?+f.zoom:y+qn(S.lat,se.lat)),fe.setBearing(f.bearing);const ye=new r.P(r.an(c.centerPoint.x+f.offsetAsPoint.x,0,c.width),r.an(c.centerPoint.y+f.offsetAsPoint.y,0,c.height));fe.setLocationAtPoint(re,ye);const Te=(f.offset&&f.offsetAsPoint.mag())>0?fe.center:re,Me=W?+f.zoom:y+qn(S.lat,Te.lat),Ee=y+qn(S.lat,0),Fe=Me+qn(Te.lat,0),Ge=r.bK(S.lng,Te.lng),Oe=r.bK(S.lat,Te.lat),Ve=r.aq(Fe-Ee);return J=Me!==y,{easeFunc:Xe=>{if(r.bo(z,H)||Or({startEulerAngles:z,endEulerAngles:H,tr:c,k:Xe,useSlerp:z.roll!=H.roll}),Z&&c.interpolatePadding(P,f.padding,Xe),f.around)r.w("Easing around a point is not supported under globe projection."),c.setLocationAtPoint(f.around,f.aroundPoint);else{const Ne=Fe>Ee?Math.min(2,Ve):Math.max(.5,Ve),Ke=Math.pow(Ne,1-Xe),gt=Ri(S,Ge,Oe,Xe*Ke);c.setCenter(gt.wrap())}if(J){const Ne=r.G.number(Ee,Fe,Xe)+qn(0,c.center.lat);c.setZoom(Ne)}},isZooming:J,elevationCenter:Te}}handleFlyTo(c,f){const y=f.zoom!==void 0,S=c.center,P=c.zoom,z=c.padding,H=!c.isPaddingEqual(f.padding),W=c.applyConstrain(r.V.convert(f.center||f.locationAtOffset),P).center,Z=y?+f.zoom:c.zoom+qn(c.center.lat,W.lat),J=c.clone();J.setCenter(W),J.setZoom(Z),J.setBearing(f.bearing);const se=new r.P(r.an(c.centerPoint.x+f.offsetAsPoint.x,0,c.width),r.an(c.centerPoint.y+f.offsetAsPoint.y,0,c.height));J.setLocationAtPoint(W,se);const re=J.center;Ur(c,re);const fe=(function(Oe,Ve,Xe){const Ne=Gn(Ve),Ke=Gn(Xe),gt=r.b5(Ne,Ke),lt=Math.acos(gt),ht=zr(Oe);return lt/(2*Math.PI)*ht})(c,S,re),ye=P+qn(S.lat,0),Te=Z+qn(re.lat,0),Me=r.aq(Te-ye);let Ee;if(typeof f.minZoom=="number"){const Oe=+f.minZoom+qn(re.lat,0),Ve=Math.min(Oe,ye,Te)+qn(0,re.lat),Xe=c.applyConstrain(re,Ve).zoom+qn(re.lat,0);Ee=r.aq(Xe-ye)}const Fe=r.bK(S.lng,re.lng),Ge=r.bK(S.lat,re.lat);return{easeFunc:(Oe,Ve,Xe,Ne)=>{const Ke=Ri(S,Fe,Ge,Xe);H&&c.interpolatePadding(z,f.padding,Oe);const gt=Oe===1?re:Ke;c.setCenter(gt.wrap());const lt=ye+r.at(Ve);c.setZoom(Oe===1?Z:lt+qn(0,gt.lat))},scaleOfZoom:Me,targetCenter:re,scaleOfMinZoom:Ee,pixelPathLength:fe}}static solveVectorScale(c,f,y,S,P){const z=S==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],H=[y[3],y[7],y[11],y[15]],W=c[0]*z[0]+c[1]*z[1]+c[2]*z[2],Z=c[0]*H[0]+c[1]*H[1]+c[2]*H[2],J=f[0]*z[0]+f[1]*z[1]+f[2]*z[2],se=f[0]*H[0]+f[1]*H[1]+f[2]*H[2];return J+P*Z===W+P*se||H[3]*(W-J)+z[3]*(se-Z)+W*se==J*Z?null:(J+z[3]-P*se-P*H[3])/(J-W-P*se+P*Z)}static getLesserNonNegativeNonNull(c,f){return f!==null&&f>=0&&f<c?f:c}}class Nh{constructor(c){this._globe=c,this._mercatorCameraHelper=new Bo,this._verticalPerspectiveCameraHelper=new wa}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(c,f){return this.currentHelper.handlePanInertia(c,f)}handleMapControlsRollPitchBearingZoom(c,f){return this.currentHelper.handleMapControlsRollPitchBearingZoom(c,f)}handleMapControlsPan(c,f,y){this.currentHelper.handleMapControlsPan(c,f,y)}cameraForBoxAndBearing(c,f,y,S,P){return this.currentHelper.cameraForBoxAndBearing(c,f,y,S,P)}handleJumpToCenterZoom(c,f){this.currentHelper.handleJumpToCenterZoom(c,f)}handleEaseTo(c,f){return this.currentHelper.handleEaseTo(c,f)}handleFlyTo(c,f){return this.currentHelper.handleFlyTo(c,f)}}const sl=(I,c)=>r.B(I,c&&c.filter((f=>f.identifier!=="source.canvas"))),Ql=r.bO();class ds extends r.E{constructor(c,f={}){var y,S;super(),this._rtlPluginLoaded=()=>{for(const z in this.tileManagers){const H=this.tileManagers[z].getSource().type;H!=="vector"&&H!=="geojson"||this.tileManagers[z].reload()}},this.map=c,this.dispatcher=new Fi(Pi(),c._getMapId()),this.dispatcher.registerMessageHandler("GG",((z,H)=>this.getGlyphs(z,H))),this.dispatcher.registerMessageHandler("GI",((z,H)=>this.getImages(z,H))),this.dispatcher.registerMessageHandler("GDA",((z,H)=>this.getDashes(z,H))),this.imageManager=new Ae,this.imageManager.setEventedParent(this);const P=((y=c._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((S=document.documentElement)===null||S===void 0?void 0:S.lang)||void 0;this.glyphManager=new qe(c._requestManager,f.localIdeographFontFamily,P),this.lineAtlas=new Ai(256,512),this.crossTileSymbolIndex=new kn,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",r.bP()),Qe().on(je,this._rtlPluginLoaded),this.on("data",(z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const H=this.tileManagers[z.sourceId];if(!H)return;const W=H.getSource();if(W&&W.vectorLayerIds)for(const Z in this._layers){const J=this._layers[Z];J.source===W.id&&this._validateLayer(J)}}))}_setInitialValues(){var c;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new r.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((c=this.crossTileSymbolIndex)===null||c===void 0?void 0:c.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(c,f){var y,S,P;this._checkLoaded();const z=f===null?(P=(S=(y=this.stylesheet.state)===null||y===void 0?void 0:y[c])===null||S===void 0?void 0:S.default)!==null&&P!==void 0?P:null:f;if(r.bR(z,this._globalState[c]))return this;this._globalState[c]=z,this._applyGlobalStateChanges([c])}getGlobalState(){return this._globalState}setGlobalState(c){this._checkLoaded();const f=[];for(const y in c)!r.bR(this._globalState[y],c[y].default)&&(f.push(y),this._globalState[y]=c[y].default);this._applyGlobalStateChanges(f)}_applyGlobalStateChanges(c){if(c.length===0)return;const f=new Set,y={};for(const S of c){y[S]=this._globalState[S];for(const P in this._layers){const z=this._layers[P],H=z.getLayoutAffectingGlobalStateRefs(),W=z.getPaintAffectingGlobalStateRefs(),Z=z.getVisibilityAffectingGlobalStateRefs();if(H.has(S)&&f.add(z.source),W.has(S))for(const{name:J,value:se}of W.get(S))this._updatePaintProperty(z,J,se);Z?.has(S)&&(z.recalculateVisibility(),this._updateLayer(z))}}this.dispatcher.broadcast("UGS",y);for(const S in this.tileManagers)f.has(S)&&(this._reloadSource(S),this._changed=!0)}loadURL(c,f={},y){this.fire(new r.l("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const S=this.map._requestManager.transformRequest(c,"Style");this._loadStyleRequest=new AbortController;const P=this._loadStyleRequest;r.j(S,this._loadStyleRequest).then((z=>{this._loadStyleRequest=null,this._load(z.data,f,y)})).catch((z=>{this._loadStyleRequest=null,z&&!P.signal.aborted&&this.fire(new r.k(z))}))}loadJSON(c,f={},y){this.fire(new r.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(c,f,y)})).catch((()=>{}))}loadEmpty(){this.fire(new r.l("dataloading",{dataType:"style"})),this._load(Ql,{validate:!1})}_load(c,f,y){var S,P;let z=f.transformStyle?f.transformStyle(y,c):c;if(!f.validate||!sl(this,r.C(z))){z=Object.assign({},z),this._loaded=!0,this.stylesheet=z;for(const H in z.sources)this.addSource(H,z.sources[H],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new He(this.stylesheet.light),this._setProjectionInternal(((S=this.stylesheet.projection)===null||S===void 0?void 0:S.type)||"mercator"),this.sky=new Qt(this.stylesheet.sky),this.map.setTerrain((P=this.stylesheet.terrain)!==null&&P!==void 0?P:null),this.fire(new r.l("data",{dataType:"style"})),this.fire(new r.l("style.load"))}}_createLayers(){var c,f,y;const S=r.bS(this.stylesheet.layers);this.setGlobalState((c=this.stylesheet.state)!==null&&c!==void 0?c:null),this.dispatcher.broadcast("SL",S),this._order=S.map((P=>P.id)),this._layers={},this._serializedLayers=null;for(const P of S){const z=r.bT(P,this._globalState);if(z.setEventedParent(this,{layer:{id:P.id}}),this._layers[P.id]=z,r.bU(z)&&this.tileManagers[z.source]){const H=(y=(f=P.paint)===null||f===void 0?void 0:f["raster-fade-duration"])!==null&&y!==void 0?y:z.paint.get("raster-fade-duration");this.tileManagers[z.source].setRasterFadeDuration(H)}}}_loadSprite(c,f=!1,y=void 0){this.imageManager.setLoaded(!1);const S=new AbortController;let P;this._spriteRequest=S,(function(z,H,W,Z){return r._(this,void 0,void 0,(function*(){const J=de(z),se=W>1?"@2x":"",re={},fe={};for(const{id:ye,url:Te}of J){const Me=H.transformRequest(ke(Te,se,".json"),"SpriteJSON");re[ye]=r.j(Me,Z);const Ee=H.transformRequest(ke(Te,se,".png"),"SpriteImage");fe[ye]=te.getImage(Ee,Z)}return yield Promise.all([...Object.values(re),...Object.values(fe)]),(function(ye,Te){return r._(this,void 0,void 0,(function*(){const Me={};for(const Ee in ye){Me[Ee]={};const Fe=E.getImageCanvasContext((yield Te[Ee]).data),Ge=(yield ye[Ee]).data;for(const Oe in Ge){const{width:Ve,height:Xe,x:Ne,y:Ke,sdf:gt,pixelRatio:lt,stretchX:ht,stretchY:dt,content:Ot,textFitWidth:Bt,textFitHeight:Mt}=Ge[Oe];Me[Ee][Oe]={data:null,pixelRatio:lt,sdf:gt,stretchX:ht,stretchY:dt,content:Ot,textFitWidth:Bt,textFitHeight:Mt,spriteData:{width:Ve,height:Xe,x:Ne,y:Ke,context:Fe}}}}return Me}))})(re,fe)}))})(c,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((z=>{if(this._spriteRequest=null,z)for(const H in z){this._spritesImagesIds[H]=[];const W=this._spritesImagesIds[H]?this._spritesImagesIds[H].filter((Z=>!(Z in z))):[];for(const Z of W)this.imageManager.removeImage(Z),this._changedImages[Z]=!0;for(const Z in z[H]){const J=H==="default"?Z:`${H}:${Z}`;this._spritesImagesIds[H].push(J),J in this.imageManager.images?this.imageManager.updateImage(J,z[H][Z],!1):this.imageManager.addImage(J,z[H][Z]),f&&(this._changedImages[J]=!0)}}})).catch((z=>{this._spriteRequest=null,P=z,S.signal.aborted||this.fire(new r.k(P))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new r.l("data",{dataType:"style"})),y&&y(P)}))}_unloadSprite(){for(const c of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(c),this._changedImages[c]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new r.l("data",{dataType:"style"}))}_validateLayer(c){const f=this.tileManagers[c.source];if(!f)return;const y=c.sourceLayer;if(!y)return;const S=f.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(y)===-1)&&this.fire(new r.k(new Error(`Source layer "${y}" does not exist on source "${S.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.tileManagers)if(!this.tileManagers[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(c,f=!1){const y=this._serializedAllLayers();if(!c||c.length===0)return Object.values(f?r.bV(y):y);const S=[];for(const P of c)if(y[P]){const z=f?r.bV(y[P]):y[P];S.push(z)}return S}_serializedAllLayers(){let c=this._serializedLayers;if(c)return c;c=this._serializedLayers={};const f=Object.keys(this._layers);for(const y of f){const S=this._layers[y];S.type!=="custom"&&(c[y]=S.serialize())}return c}hasTransitions(){var c,f,y;if(!((c=this.light)===null||c===void 0)&&c.hasTransition()||!((f=this.sky)===null||f===void 0)&&f.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const S in this.tileManagers)if(this.tileManagers[S].hasTransition())return!0;for(const S in this._layers)if(this._layers[S].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const f=this._changed;if(f){const S=Object.keys(this._updatedLayers),P=Object.keys(this._removedLayers);(S.length||P.length)&&this._updateWorkerLayers(S,P);for(const z in this._updatedSources){const H=this._updatedSources[z];if(H==="reload")this._reloadSource(z);else{if(H!=="clear")throw new Error(`Invalid action ${H}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(c);this.light.updateTransitions(c),this.sky.updateTransitions(c),this._resetUpdates()}const y={};for(const S in this.tileManagers){const P=this.tileManagers[S];y[S]=P.used,P.used=!1}for(const S of this._order){const P=this._layers[S];P.recalculate(c,this._availableImages),!P.isHidden(c.zoom)&&P.source&&(this.tileManagers[P.source].used=!0)}for(const S in y){const P=this.tileManagers[S];!!y[S]!=!!P.used&&P.fire(new r.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(c),this.sky.recalculate(c),this.projection.recalculate(c),this.z=c.zoom,f&&this.fire(new r.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const f in this.tileManagers)this.tileManagers[f].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(c,f){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(c,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(c,f={}){var y;this._checkLoaded();const S=this.serialize();if(c=f.transformStyle?f.transformStyle(S,c):c,((y=f.validate)===null||y===void 0||y)&&sl(this,r.C(c)))return!1;(c=r.bV(c)).layers=r.bS(c.layers);const P=r.bW(S,c),z=this._getOperationsToPerform(P);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const H of z.operations)H();return this.stylesheet=c,this._serializedLayers=null,!0}_getOperationsToPerform(c){const f=[],y=[];for(const S of c)switch(S.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":f.push((()=>this.addLayer.apply(this,S.args)));break;case"removeLayer":f.push((()=>this.removeLayer.apply(this,S.args)));break;case"setPaintProperty":f.push((()=>this.setPaintProperty.apply(this,S.args)));break;case"setLayoutProperty":f.push((()=>this.setLayoutProperty.apply(this,S.args)));break;case"setFilter":f.push((()=>this.setFilter.apply(this,S.args)));break;case"addSource":f.push((()=>this.addSource.apply(this,S.args)));break;case"removeSource":f.push((()=>this.removeSource.apply(this,S.args)));break;case"setLayerZoomRange":f.push((()=>this.setLayerZoomRange.apply(this,S.args)));break;case"setLight":f.push((()=>this.setLight.apply(this,S.args)));break;case"setGeoJSONSourceData":f.push((()=>this.setGeoJSONSourceData.apply(this,S.args)));break;case"setGlyphs":f.push((()=>this.setGlyphs.apply(this,S.args)));break;case"setSprite":f.push((()=>this.setSprite.apply(this,S.args)));break;case"setTerrain":f.push((()=>this.map.setTerrain.apply(this,S.args)));break;case"setSky":f.push((()=>this.setSky.apply(this,S.args)));break;case"setProjection":this.setProjection.apply(this,S.args);break;case"setGlobalState":f.push((()=>this.setGlobalState.apply(this,S.args)));break;case"setTransition":f.push((()=>{}));break;default:y.push(S.command)}return{operations:f,unimplemented:y}}addImage(c,f){if(this.getImage(c))return this.fire(new r.k(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,f),this._afterImageUpdated(c)}updateImage(c,f){this.imageManager.updateImage(c,f)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new r.k(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new r.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,f,y={}){if(this._checkLoaded(),this.tileManagers[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(r.C.source,`sources.${c}`,f,null,y))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const S=this.tileManagers[c]=new rn(c,f,this.dispatcher);S.style=this,S.setEventedParent(this,(()=>({isSourceLoaded:S.loaded(),source:S.serialize(),sourceId:c}))),S.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.tileManagers[c]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===c)return this.fire(new r.k(new Error(`Source "${c}" cannot be removed while layer "${y}" is using it.`)));const f=this.tileManagers[c];delete this.tileManagers[c],delete this._updatedSources[c],f.fire(new r.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,f){if(this._checkLoaded(),this.tileManagers[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const y=this.tileManagers[c].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(f),this._changed=!0}getSource(c){return this.tileManagers[c]&&this.tileManagers[c].getSource()}addLayer(c,f,y={}){this._checkLoaded();const S=c.id;if(this.getLayer(S))return void this.fire(new r.k(new Error(`Layer "${S}" already exists on this map.`)));let P;if(c.type==="custom"){if(sl(this,r.bX(c)))return;P=r.bT(c,this._globalState)}else{if("source"in c&&typeof c.source=="object"&&(this.addSource(S,c.source),c=r.bV(c),c=r.e(c,{source:S})),this._validate(r.C.layer,`layers.${S}`,c,{arrayIndex:-1},y))return;P=r.bT(c,this._globalState),this._validateLayer(P),P.setEventedParent(this,{layer:{id:S}})}const z=f?this._order.indexOf(f):this._order.length;if(f&&z===-1)this.fire(new r.k(new Error(`Cannot add layer "${S}" before non-existing layer "${f}".`)));else{if(this._order.splice(z,0,S),this._layerOrderChanged=!0,this._layers[S]=P,this._removedLayers[S]&&P.source&&P.type!=="custom"){const H=this._removedLayers[S];delete this._removedLayers[S],H.type!==P.type?this._updatedSources[P.source]="clear":(this._updatedSources[P.source]="reload",this.tileManagers[P.source].pause())}this._updateLayer(P),P.onAdd&&P.onAdd(this.map)}}moveLayer(c,f){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new r.k(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===f)return;const y=this._order.indexOf(c);this._order.splice(y,1);const S=f?this._order.indexOf(f):this._order.length;f&&S===-1?this.fire(new r.k(new Error(`Cannot move layer "${c}" before non-existing layer "${f}".`))):(this._order.splice(S,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const f=this._layers[c];if(!f)return void this.fire(new r.k(new Error(`Cannot remove non-existing layer "${c}".`)));f.setEventedParent(null);const y=this._order.indexOf(c);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=f,delete this._layers[c],this._serializedLayers&&delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],f.onRemove&&f.onRemove(this.map)}getLayer(c){return this._layers[c]}getLayersOrder(){return[...this._order]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,f,y){this._checkLoaded();const S=this.getLayer(c);S?S.minzoom===f&&S.maxzoom===y||(f!=null&&(S.minzoom=f),y!=null&&(S.maxzoom=y),this._updateLayer(S)):this.fire(new r.k(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,f,y={}){this._checkLoaded();const S=this.getLayer(c);if(S){if(!r.bR(S.filter,f))return f==null?(S.setFilter(void 0),void this._updateLayer(S)):void(this._validate(r.C.filter,`layers.${S.id}.filter`,f,null,y)||(S.setFilter(r.bV(f)),this._updateLayer(S)))}else this.fire(new r.k(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return r.bV(this.getLayer(c).filter)}setLayoutProperty(c,f,y,S={}){this._checkLoaded();const P=this.getLayer(c);P?r.bR(P.getLayoutProperty(f),y)||(P.setLayoutProperty(f,y,S),this._updateLayer(P)):this.fire(new r.k(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,f){const y=this.getLayer(c);if(y)return y.getLayoutProperty(f);this.fire(new r.k(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,f,y,S={}){this._checkLoaded();const P=this.getLayer(c);P?r.bR(P.getPaintProperty(f),y)||this._updatePaintProperty(P,f,y,S):this.fire(new r.k(new Error(`Cannot style non-existing layer "${c}".`)))}_updatePaintProperty(c,f,y,S={}){c.setPaintProperty(f,y,S)&&this._updateLayer(c),r.bU(c)&&f==="raster-fade-duration"&&this.tileManagers[c.source].setRasterFadeDuration(y),this._changed=!0,this._updatedPaintProps[c.id]=!0,this._serializedLayers=null}getPaintProperty(c,f){return this.getLayer(c).getPaintProperty(f)}setFeatureState(c,f){this._checkLoaded();const y=c.source,S=c.sourceLayer,P=this.tileManagers[y];if(P===void 0)return void this.fire(new r.k(new Error(`The source '${y}' does not exist in the map's style.`)));const z=P.getSource().type;z==="geojson"&&S?this.fire(new r.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||S?(c.id===void 0&&this.fire(new r.k(new Error("The feature id parameter must be provided."))),P.setFeatureState(S,c.id,f)):this.fire(new r.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,f){this._checkLoaded();const y=c.source,S=this.tileManagers[y];if(S===void 0)return void this.fire(new r.k(new Error(`The source '${y}' does not exist in the map's style.`)));const P=S.getSource().type,z=P==="vector"?c.sourceLayer:void 0;P!=="vector"||z?f&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new r.k(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(z,c.id,f):this.fire(new r.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const f=c.source,y=c.sourceLayer,S=this.tileManagers[f];if(S!==void 0)return S.getSource().type!=="vector"||y?(c.id===void 0&&this.fire(new r.k(new Error("The feature id parameter must be provided."))),S.getFeatureState(y,c.id)):void this.fire(new r.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new r.k(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return r.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const c=r.bY(this.tileManagers,(P=>P.serialize())),f=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,S=this.stylesheet;return r.bZ({version:S.version,name:S.name,metadata:S.metadata,light:S.light,sky:S.sky,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,projection:S.projection,sources:c,layers:f,terrain:y},(P=>P!==void 0))}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.tileManagers[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.tileManagers[c.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(c){const f=z=>this._layers[z].type==="fill-extrusion",y={},S=[];for(let z=this._order.length-1;z>=0;z--){const H=this._order[z];if(f(H)){y[H]=z;for(const W of c){const Z=W[H];if(Z)for(const J of Z)S.push(J)}}}S.sort(((z,H)=>H.intersectionZ-z.intersectionZ));const P=[];for(let z=this._order.length-1;z>=0;z--){const H=this._order[z];if(f(H))for(let W=S.length-1;W>=0;W--){const Z=S[W].feature;if(y[Z.layer.id]<z)break;P.push(Z),S.pop()}else for(const W of c){const Z=W[H];if(Z)for(const J of Z)P.push(J.feature)}}return P}queryRenderedFeatures(c,f,y){f&&f.filter&&this._validate(r.C.filter,"queryRenderedFeatures.filter",f.filter,null,f);const S={};if(f&&f.layers){if(!(Array.isArray(f.layers)||f.layers instanceof Set))return this.fire(new r.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const Z of f.layers){const J=this._layers[Z];if(!J)return this.fire(new r.k(new Error(`The layer '${Z}' does not exist in the map's style and cannot be queried for features.`))),[];S[J.source]=!0}}const P=[];f.availableImages=this._availableImages;const z=this._serializedAllLayers(),H=f.layers instanceof Set?f.layers:Array.isArray(f.layers)?new Set(f.layers):null,W=Object.assign(Object.assign({},f),{layers:H,globalState:this._globalState});for(const Z in this.tileManagers)f.layers&&!S[Z]||P.push(qt(this.tileManagers[Z],this._layers,z,c,W,y,this.map.terrain?(J,se,re)=>this.map.terrain.getElevation(J,se,re):void 0));return this.placement&&P.push((function(Z,J,se,re,fe,ye,Te){const Me={},Ee=ye.queryRenderedSymbols(re),Fe=[];for(const Ge of Object.keys(Ee).map(Number))Fe.push(Te[Ge]);Fe.sort(Ti);for(const Ge of Fe){const Oe=Ge.featureIndex.lookupSymbolFeatures(Ee[Ge.bucketInstanceId],J,Ge.bucketIndex,Ge.sourceLayerIndex,{filterSpec:fe.filter,globalState:fe.globalState},fe.layers,fe.availableImages,Z);for(const Ve in Oe){const Xe=Me[Ve]=Me[Ve]||[],Ne=Oe[Ve];Ne.sort(((Ke,gt)=>{const lt=Ge.featureSortOrder;if(lt){const ht=lt.indexOf(Ke.featureIndex);return lt.indexOf(gt.featureIndex)-ht}return gt.featureIndex-Ke.featureIndex}));for(const Ke of Ne)Xe.push(Ke)}}return(function(Ge,Oe,Ve){for(const Xe in Ge)for(const Ne of Ge[Xe])tn(Ne,Ve[Oe[Xe].source]);return Ge})(Me,Z,se)})(this._layers,z,this.tileManagers,c,W,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(P)}querySourceFeatures(c,f){f?.filter&&this._validate(r.C.filter,"querySourceFeatures.filter",f.filter,null,f);const y=this.tileManagers[c];return y?(function(S,P){const z=S.getRenderableIds().map((Z=>S.getTileByID(Z))),H=[],W={};for(let Z=0;Z<z.length;Z++){const J=z[Z],se=J.tileID.canonical.key;W[se]||(W[se]=!0,J.querySourceFeatures(H,P))}return H})(y,f?Object.assign(Object.assign({},f),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(c,f={}){this._checkLoaded();const y=this.light.getLight();let S=!1;for(const z in c)if(!r.bR(c[z],y[z])){S=!0;break}if(!S)return;const P={now:O(),transition:r.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,f),this.light.updateTransitions(P)}getProjection(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.projection}setProjection(c){if(this._checkLoaded(),this.projection){if(this.projection.name===c.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=c,this._setProjectionInternal(c.type)}getSky(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.sky}setSky(c,f={}){this._checkLoaded();const y=this.getSky();let S=!1;if(!c&&!y)return;if(c&&!y)S=!0;else if(!c&&y)S=!0;else for(const z in c)if(!r.bR(c[z],y[z])){S=!0;break}if(!S)return;const P={now:O(),transition:r.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=c,this.sky.setSky(c,f),this.sky.updateTransitions(P)}_setProjectionInternal(c){const f=(function(y,S){const P={constrainOverride:S};if(Array.isArray(y)){const z=new yd({type:y});return{projection:z,transform:new rl(P),cameraHelper:new Nh(z)}}switch(y){case"mercator":return{projection:new hr,transform:new Ts(P),cameraHelper:new Bo};case"globe":{const z=new yd({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:z,transform:new rl(P),cameraHelper:new Nh(z)}}case"vertical-perspective":return{projection:new El,transform:new Vo(P),cameraHelper:new wa};default:return r.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new hr,transform:new Ts(P),cameraHelper:new Bo}}})(c,this.map.transformConstrain);this.projection=f.projection,this.map.migrateProjection(f.transform,f.cameraHelper);for(const y in this.tileManagers)this.tileManagers[y].reload()}_validate(c,f,y,S,P={}){return(!P||P.validate!==!1)&&sl(this,c.call(r.C,r.e({key:f,style:this.serialize(),value:y,styleSpec:r.u},S)))}_remove(c=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Qe().off(je,this._rtlPluginLoaded);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.tileManagers){const y=this.tileManagers[f];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),c&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(c)}_clearSource(c){this.tileManagers[c].clearTiles()}_reloadSource(c){this.tileManagers[c].resume(),this.tileManagers[c].reload()}_updateSources(c){for(const f in this.tileManagers)this.tileManagers[f].update(c,this.map.terrain)}_generateCollisionBoxes(){for(const c in this.tileManagers)this._reloadSource(c)}_updatePlacement(c,f,y,S,P=!1){let z=!1,H=!1;const W={};for(const Z of this._order){const J=this._layers[Z];if(J.type!=="symbol")continue;if(!W[J.source]){const re=this.tileManagers[J.source];W[J.source]=re.getRenderableIds(!0).map((fe=>re.getTileByID(fe))).sort(((fe,ye)=>ye.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(ye.tileID)?-1:1)))}const se=this.crossTileSymbolIndex.addLayer(J,W[J.source],c.center.lng);z=z||se}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((P=P||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(O(),c.zoom))&&(this.pauseablePlacement=new kl(c,this.map.terrain,this._order,P,f,y,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,W),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(O()),H=!0),z&&this.pauseablePlacement.placement.setStale()),H||z)for(const Z of this._order){const J=this._layers[Z];J.type==="symbol"&&this.placement.updateLayerOpacities(J,W[J.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(O())}_releaseSymbolFadeTiles(){for(const c in this.tileManagers)this.tileManagers[c].releaseSymbolFadeTiles()}getImages(c,f){return r._(this,void 0,void 0,(function*(){const y=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();const S=this.tileManagers[f.source];return S&&S.setDependencies(f.tileID.key,f.type,f.icons),y}))}getGlyphs(c,f){return r._(this,void 0,void 0,(function*(){const y=yield this.glyphManager.getGlyphs(f.stacks),S=this.tileManagers[f.source];return S&&S.setDependencies(f.tileID.key,f.type,[""]),y}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(c,f={}){this._checkLoaded(),c&&this._validate(r.C.glyphs,"glyphs",c,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=c,this.glyphManager.entries={},this.glyphManager.setURL(c))}getDashes(c,f){return r._(this,void 0,void 0,(function*(){const y={};for(const[S,P]of Object.entries(f.dashes))y[S]=this.lineAtlas.getDash(P.dasharray,P.round);return y}))}addSprite(c,f,y={},S){this._checkLoaded();const P=[{id:c,url:f}],z=[...de(this.stylesheet.sprite),...P];this._validate(r.C.sprite,"sprite",z,null,y)||(this.stylesheet.sprite=z,this._loadSprite(P,!0,S))}removeSprite(c){this._checkLoaded();const f=de(this.stylesheet.sprite);if(f.find((y=>y.id===c))){if(this._spritesImagesIds[c])for(const y of this._spritesImagesIds[c])this.imageManager.removeImage(y),this._changedImages[y]=!0;f.splice(f.findIndex((y=>y.id===c)),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[c],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new r.l("data",{dataType:"style"}))}else this.fire(new r.k(new Error(`Sprite "${c}" doesn't exists on this map.`)))}getSprite(){return de(this.stylesheet.sprite)}setSprite(c,f={},y){this._checkLoaded(),c&&this._validate(r.C.sprite,"sprite",c,null,f)||(this.stylesheet.sprite=c,c?this._loadSprite(c,!0,y):(this._unloadSprite(),y&&y(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const c in this.tileManagers){const f=this.tileManagers[c];f.setEventedParent(null),f.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const c in this._layers){const f=this._layers[c];f.setEventedParent(null),f.onRemove&&f.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var jh=r.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class jc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,f,y,S,P,z,H,W,Z){this.context=c;let J=this.boundPaintVertexBuffers.length!==S.length;for(let se=0;!J&&se<S.length;se++)this.boundPaintVertexBuffers[se]!==S[se]&&(J=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==y||J||this.boundIndexBuffer!==P||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==H||this.boundDynamicVertexBuffer2!==W||this.boundDynamicVertexBuffer3!==Z?this.freshBind(f,y,S,P,z,H,W,Z):(c.bindVertexArray.set(this.vao),H&&H.bind(),P&&P.dynamicDraw&&P.bind(),W&&W.bind(),Z&&Z.bind())}freshBind(c,f,y,S,P,z,H,W){const Z=c.numAttributes,J=this.context,se=J.gl;this.vao&&this.destroy(),this.vao=J.createVertexArray(),J.bindVertexArray.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=S,this.boundVertexOffset=P,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=H,this.boundDynamicVertexBuffer3=W,f.enableAttributes(se,c);for(const re of y)re.enableAttributes(se,c);z&&z.enableAttributes(se,c),H&&H.enableAttributes(se,c),W&&W.enableAttributes(se,c),f.bind(),f.setVertexAttribPointers(se,c,P);for(const re of y)re.bind(),re.setVertexAttribPointers(se,c,P);z&&(z.bind(),z.setVertexAttribPointers(se,c,P)),S&&S.bind(),H&&(H.bind(),H.setVertexAttribPointers(se,c,P)),W&&(W.bind(),W.setVertexAttribPointers(se,c,P)),J.currentNumAttributes=Z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Jl=(I,c,f,y,S)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:c,u_fog_color:f?f.properties.get("fog-color"):r.bp.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:S?0:f?f.calculateFogBlendOpacity(y):0,u_horizon_color:f?f.properties.get("horizon-color"):r.bp.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1,u_is_globe_mode:S?1:0}),Ml={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ms(I){const c=[];for(let f=0;f<I.length;f++){if(I[f]===null)continue;const y=I[f].split(" ");c.push(y.pop())}return c}class ec{constructor(c,f,y,S,P,z,H,W,Z=[]){const J=c.gl;this.program=J.createProgram();const se=Ms(f.staticAttributes),re=y?y.getBinderAttributes():[],fe=se.concat(re),ye=Cn.prelude.staticUniforms?Ms(Cn.prelude.staticUniforms):[],Te=H.staticUniforms?Ms(H.staticUniforms):[],Me=f.staticUniforms?Ms(f.staticUniforms):[],Ee=y?y.getBinderUniforms():[],Fe=ye.concat(Te).concat(Me).concat(Ee),Ge=[];for(const lt of Fe)Ge.indexOf(lt)<0&&Ge.push(lt);const Oe=y?y.defines():[];Wa(J)&&Oe.unshift("#version 300 es"),P&&Oe.push("#define OVERDRAW_INSPECTOR;"),z&&Oe.push("#define TERRAIN3D;"),W&&Oe.push(W),Z&&Oe.push(...Z);let Ve=Oe.concat(Cn.prelude.fragmentSource,H.fragmentSource,f.fragmentSource).join(`
`),Xe=Oe.concat(Cn.prelude.vertexSource,H.vertexSource,f.vertexSource).join(`
`);Wa(J)||(Ve=(function(lt){return lt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Ve),Xe=(function(lt){return lt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Xe));const Ne=J.createShader(J.FRAGMENT_SHADER);if(J.isContextLost())return void(this.failedToCreate=!0);if(J.shaderSource(Ne,Ve),J.compileShader(Ne),!J.getShaderParameter(Ne,J.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${J.getShaderInfoLog(Ne)}`);J.attachShader(this.program,Ne);const Ke=J.createShader(J.VERTEX_SHADER);if(J.isContextLost())return void(this.failedToCreate=!0);if(J.shaderSource(Ke,Xe),J.compileShader(Ke),!J.getShaderParameter(Ke,J.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${J.getShaderInfoLog(Ke)}`);J.attachShader(this.program,Ke),this.attributes={};const gt={};this.numAttributes=fe.length;for(let lt=0;lt<this.numAttributes;lt++)fe[lt]&&(J.bindAttribLocation(this.program,lt,fe[lt]),this.attributes[fe[lt]]=lt);if(J.linkProgram(this.program),!J.getProgramParameter(this.program,J.LINK_STATUS))throw new Error(`Program failed to link: ${J.getProgramInfoLog(this.program)}`);J.deleteShader(Ke),J.deleteShader(Ne);for(let lt=0;lt<Ge.length;lt++){const ht=Ge[lt];if(ht&&!gt[ht]){const dt=J.getUniformLocation(this.program,ht);dt&&(gt[ht]=dt)}}this.fixedUniforms=S(c,gt),this.terrainUniforms=((lt,ht)=>({u_depth:new r.b_(lt,ht.u_depth),u_terrain:new r.b_(lt,ht.u_terrain),u_terrain_dim:new r.bq(lt,ht.u_terrain_dim),u_terrain_matrix:new r.c0(lt,ht.u_terrain_matrix),u_terrain_unpack:new r.c1(lt,ht.u_terrain_unpack),u_terrain_exaggeration:new r.bq(lt,ht.u_terrain_exaggeration)}))(c,gt),this.projectionUniforms=((lt,ht)=>({u_projection_matrix:new r.c0(lt,ht.u_projection_matrix),u_projection_tile_mercator_coords:new r.c1(lt,ht.u_projection_tile_mercator_coords),u_projection_clipping_plane:new r.c1(lt,ht.u_projection_clipping_plane),u_projection_transition:new r.bq(lt,ht.u_projection_transition),u_projection_fallback_matrix:new r.c0(lt,ht.u_projection_fallback_matrix)}))(c,gt),this.binderUniforms=y?y.getUniforms(c,gt):[]}draw(c,f,y,S,P,z,H,W,Z,J,se,re,fe,ye,Te,Me,Ee,Fe,Ge){const Oe=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(y),c.setStencilMode(S),c.setColorMode(P),c.setCullFace(z),W){c.activeTexture.set(Oe.TEXTURE2),Oe.bindTexture(Oe.TEXTURE_2D,W.depthTexture),c.activeTexture.set(Oe.TEXTURE3),Oe.bindTexture(Oe.TEXTURE_2D,W.texture);for(const Xe in this.terrainUniforms)this.terrainUniforms[Xe].set(W[Xe])}if(Z)for(const Xe in Z)this.projectionUniforms[Ml[Xe]].set(Z[Xe]);if(H)for(const Xe in this.fixedUniforms)this.fixedUniforms[Xe].set(H[Xe]);Me&&Me.setUniforms(c,this.binderUniforms,ye,{zoom:Te});let Ve=0;switch(f){case Oe.LINES:Ve=2;break;case Oe.TRIANGLES:Ve=3;break;case Oe.LINE_STRIP:Ve=1}for(const Xe of fe.get()){const Ne=Xe.vaos||(Xe.vaos={});(Ne[J]||(Ne[J]=new jc)).bind(c,this,se,Me?Me.getPaintVertexBuffers():[],re,Xe.vertexOffset,Ee,Fe,Ge),Oe.drawElements(f,Xe.primitiveLength*Ve,Oe.UNSIGNED_SHORT,Xe.primitiveOffset*Ve*2)}}}function ns(I,c,f){const y=1/r.aN(f,1,c.transform.tileZoom),S=Math.pow(2,f.tileID.overscaledZ),P=f.tileSize*Math.pow(2,c.transform.tileZoom)/S,z=P*(f.tileID.canonical.x+f.tileID.wrap*S),H=P*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[y,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[z>>16,H>>16],u_pixel_coord_lower:[65535&z,65535&H]}}const Vc=(I,c,f,y)=>{const S=I.style.light,P=S.properties.get("position"),z=[P.x,P.y,P.z],H=r.c4();S.properties.get("anchor")==="viewport"&&r.c5(H,I.transform.bearingInRadians),r.c6(z,z,H);const W=I.transform.transformLightDirection(z),Z=S.properties.get("color");return{u_lightpos:z,u_lightpos_globe:W,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[Z.r,Z.g,Z.b],u_vertical_gradient:+c,u_opacity:f,u_fill_translate:y}},fs=(I,c,f,y,S,P,z)=>r.e(Vc(I,c,f,y),ns(P,I,z),{u_height_factor:-Math.pow(2,S.overscaledZ)/z.tileSize/8}),Vh=(I,c,f,y)=>r.e(ns(c,I,f),{u_fill_translate:y}),Hc=(I,c)=>({u_world:I,u_fill_translate:c}),vd=(I,c,f,y,S)=>r.e(Vh(I,c,f,S),{u_world:y}),Hh=(I,c,f,y,S)=>{const P=I.transform;let z,H,W=0;if(f.paint.get("circle-pitch-alignment")==="map"){const Z=r.aN(c,1,P.zoom);z=!0,H=[Z,Z],W=Z/(r.a5*Math.pow(2,c.tileID.overscaledZ))*2*Math.PI*S}else z=!1,H=P.pixelsToGLUnits;return{u_camera_to_center_distance:P.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:H,u_globe_extrude_scale:W,u_translate:y}},wr=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),bd=I=>({u_viewport_size:[I.width,I.height]}),tc=(I,c=1)=>({u_color:I,u_overlay:0,u_overlay_scale:c}),Ys=(I,c,f,y)=>{const S=r.aN(I,1,c)/(r.a5*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:r.aN(I,1,c),u_intensity:f,u_globe_extrude_scale:S}},gn=(I,c,f,y)=>{const S=r.N();r.c7(S,0,I.width,I.height,0,0,1);const P=I.context.gl;return{u_matrix:S,u_world:[P.drawingBufferWidth,P.drawingBufferHeight],u_image:f,u_color_ramp:y,u_opacity:c.paint.get("heatmap-opacity")}},ol=(I,c,f)=>{const y=f.paint.get("hillshade-accent-color");let S;switch(f.paint.get("hillshade-method")){case"basic":S=4;break;case"combined":S=1;break;case"igor":S=2;break;case"multidirectional":S=3;break;default:S=0}const P=f.getIlluminationProperties();for(let z=0;z<P.directionRadians.length;z++)f.paint.get("hillshade-illumination-anchor")==="viewport"&&(P.directionRadians[z]+=I.transform.bearingInRadians);return{u_image:0,u_latrange:p(0,c.tileID),u_exaggeration:f.paint.get("hillshade-exaggeration"),u_altitudes:P.altitudeRadians,u_azimuths:P.directionRadians,u_accent:y,u_method:S,u_highlights:P.highlightColor,u_shadows:P.shadowColor}},ge=(I,c)=>{const f=c.stride,y=r.N();return r.c7(y,0,r.a5,-r.a5,0,0,1),r.O(y,y,[0,-r.a5,0]),{u_matrix:y,u_image:1,u_dimension:[f,f],u_zoom:I.overscaledZ,u_unpack:c.getUnpackVector()}};function p(I,c){const f=Math.pow(2,c.canonical.z),y=c.canonical.y;return[new r.a9(0,y/f).toLngLat().lat,new r.a9(0,(y+1)/f).toLngLat().lat]}const _=(I,c,f=0)=>({u_image:0,u_unpack:c.getUnpackVector(),u_dimension:[c.stride,c.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:f,u_opacity:I.paint.get("color-relief-opacity")}),w=(I,c,f,y)=>{const S=I.transform;return{u_translation:q(I,c,f),u_ratio:y/r.aN(c,1,S.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},T=(I,c,f,y,S)=>r.e(w(I,c,f,y),{u_image:0,u_image_height:S}),M=(I,c,f,y,S)=>{const P=I.transform,z=G(c,P);return{u_translation:q(I,c,f),u_texsize:c.imageAtlasTexture.size,u_ratio:y/r.aN(c,1,P.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[z,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},R=(I,c,f,y,S)=>{const P=G(c,I.transform);return r.e(w(I,c,f,y),{u_tileratio:P,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image:0,u_mix:S.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})},V=(I,c,f,y,S,P)=>{const z=G(c,I.transform);return r.e(w(I,c,f,y),{u_image:0,u_image_height:P,u_tileratio:z,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image_dash:1,u_mix:S.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})};function G(I,c){return 1/r.aN(I,1,c.tileZoom)}function q(I,c,f){return r.aO(I.transform,c,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const oe=(I,c,f,y,S)=>{return{u_tl_parent:I,u_scale_parent:c,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(z=y.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(P=y.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:me(y.paint.get("raster-hue-rotate")),u_coords_top:[S[0].x,S[0].y,S[1].x,S[1].y],u_coords_bottom:[S[3].x,S[3].y,S[2].x,S[2].y]};var P,z};function me(I){I*=Math.PI/180;const c=Math.sin(I),f=Math.cos(I);return[(2*f+1)/3,(-Math.sqrt(3)*c-f+1)/3,(Math.sqrt(3)*c-f+1)/3]}const we=(I,c,f,y,S,P,z,H,W,Z,J,se,re)=>{const fe=z.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_pitch:fe.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:fe.width/fe.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:H,u_coord_matrix:W,u_is_text:+J,u_pitch_with_map:+y,u_is_along_line:S,u_is_variable_anchor:P,u_texsize:se,u_texture:0,u_translation:Z,u_pitched_scale:re}},Re=(I,c,f,y,S,P,z,H,W,Z,J,se,re,fe)=>{const ye=z.transform;return r.e(we(I,c,f,y,S,P,z,H,W,Z,J,se,fe),{u_gamma_scale:y?Math.cos(ye.pitch*Math.PI/180)*ye.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},Ye=(I,c,f,y,S,P,z,H,W,Z,J,se,re)=>r.e(Re(I,c,f,y,S,P,z,H,W,Z,!0,J,0,re),{u_texsize_icon:se,u_texture_icon:1}),Ze=(I,c)=>({u_opacity:I,u_color:c}),ct=(I,c,f,y,S)=>r.e((function(P,z,H,W){const Z=H.imageManager.getPattern(P.from.toString()),J=H.imageManager.getPattern(P.to.toString()),{width:se,height:re}=H.imageManager.getPixelSize(),fe=Math.pow(2,W.tileID.overscaledZ),ye=W.tileSize*Math.pow(2,H.transform.tileZoom)/fe,Te=ye*(W.tileID.canonical.x+W.tileID.wrap*fe),Me=ye*W.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Z.tl,u_pattern_br_a:Z.br,u_pattern_tl_b:J.tl,u_pattern_br_b:J.br,u_texsize:[se,re],u_mix:z.t,u_pattern_size_a:Z.displaySize,u_pattern_size_b:J.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/r.aN(W,1,H.transform.tileZoom),u_pixel_coord_upper:[Te>>16,Me>>16],u_pixel_coord_lower:[65535&Te,65535&Me]}})(f,S,c,y),{u_opacity:I}),yt=(I,c)=>{},Ht={fillExtrusion:(I,c)=>({u_lightpos:new r.c2(I,c.u_lightpos),u_lightpos_globe:new r.c2(I,c.u_lightpos_globe),u_lightintensity:new r.bq(I,c.u_lightintensity),u_lightcolor:new r.c2(I,c.u_lightcolor),u_vertical_gradient:new r.bq(I,c.u_vertical_gradient),u_opacity:new r.bq(I,c.u_opacity),u_fill_translate:new r.c3(I,c.u_fill_translate)}),fillExtrusionPattern:(I,c)=>({u_lightpos:new r.c2(I,c.u_lightpos),u_lightpos_globe:new r.c2(I,c.u_lightpos_globe),u_lightintensity:new r.bq(I,c.u_lightintensity),u_lightcolor:new r.c2(I,c.u_lightcolor),u_vertical_gradient:new r.bq(I,c.u_vertical_gradient),u_height_factor:new r.bq(I,c.u_height_factor),u_opacity:new r.bq(I,c.u_opacity),u_fill_translate:new r.c3(I,c.u_fill_translate),u_image:new r.b_(I,c.u_image),u_texsize:new r.c3(I,c.u_texsize),u_pixel_coord_upper:new r.c3(I,c.u_pixel_coord_upper),u_pixel_coord_lower:new r.c3(I,c.u_pixel_coord_lower),u_scale:new r.c2(I,c.u_scale),u_fade:new r.bq(I,c.u_fade)}),fill:(I,c)=>({u_fill_translate:new r.c3(I,c.u_fill_translate)}),fillPattern:(I,c)=>({u_image:new r.b_(I,c.u_image),u_texsize:new r.c3(I,c.u_texsize),u_pixel_coord_upper:new r.c3(I,c.u_pixel_coord_upper),u_pixel_coord_lower:new r.c3(I,c.u_pixel_coord_lower),u_scale:new r.c2(I,c.u_scale),u_fade:new r.bq(I,c.u_fade),u_fill_translate:new r.c3(I,c.u_fill_translate)}),fillOutline:(I,c)=>({u_world:new r.c3(I,c.u_world),u_fill_translate:new r.c3(I,c.u_fill_translate)}),fillOutlinePattern:(I,c)=>({u_world:new r.c3(I,c.u_world),u_image:new r.b_(I,c.u_image),u_texsize:new r.c3(I,c.u_texsize),u_pixel_coord_upper:new r.c3(I,c.u_pixel_coord_upper),u_pixel_coord_lower:new r.c3(I,c.u_pixel_coord_lower),u_scale:new r.c2(I,c.u_scale),u_fade:new r.bq(I,c.u_fade),u_fill_translate:new r.c3(I,c.u_fill_translate)}),circle:(I,c)=>({u_camera_to_center_distance:new r.bq(I,c.u_camera_to_center_distance),u_scale_with_map:new r.b_(I,c.u_scale_with_map),u_pitch_with_map:new r.b_(I,c.u_pitch_with_map),u_extrude_scale:new r.c3(I,c.u_extrude_scale),u_device_pixel_ratio:new r.bq(I,c.u_device_pixel_ratio),u_globe_extrude_scale:new r.bq(I,c.u_globe_extrude_scale),u_translate:new r.c3(I,c.u_translate)}),collisionBox:(I,c)=>({u_pixel_extrude_scale:new r.c3(I,c.u_pixel_extrude_scale)}),collisionCircle:(I,c)=>({u_viewport_size:new r.c3(I,c.u_viewport_size)}),debug:(I,c)=>({u_color:new r.b$(I,c.u_color),u_overlay:new r.b_(I,c.u_overlay),u_overlay_scale:new r.bq(I,c.u_overlay_scale)}),depth:yt,clippingMask:yt,heatmap:(I,c)=>({u_extrude_scale:new r.bq(I,c.u_extrude_scale),u_intensity:new r.bq(I,c.u_intensity),u_globe_extrude_scale:new r.bq(I,c.u_globe_extrude_scale)}),heatmapTexture:(I,c)=>({u_matrix:new r.c0(I,c.u_matrix),u_world:new r.c3(I,c.u_world),u_image:new r.b_(I,c.u_image),u_color_ramp:new r.b_(I,c.u_color_ramp),u_opacity:new r.bq(I,c.u_opacity)}),hillshade:(I,c)=>({u_image:new r.b_(I,c.u_image),u_latrange:new r.c3(I,c.u_latrange),u_exaggeration:new r.bq(I,c.u_exaggeration),u_altitudes:new r.c9(I,c.u_altitudes),u_azimuths:new r.c9(I,c.u_azimuths),u_accent:new r.b$(I,c.u_accent),u_method:new r.b_(I,c.u_method),u_shadows:new r.c8(I,c.u_shadows),u_highlights:new r.c8(I,c.u_highlights)}),hillshadePrepare:(I,c)=>({u_matrix:new r.c0(I,c.u_matrix),u_image:new r.b_(I,c.u_image),u_dimension:new r.c3(I,c.u_dimension),u_zoom:new r.bq(I,c.u_zoom),u_unpack:new r.c1(I,c.u_unpack)}),colorRelief:(I,c)=>({u_image:new r.b_(I,c.u_image),u_unpack:new r.c1(I,c.u_unpack),u_dimension:new r.c3(I,c.u_dimension),u_elevation_stops:new r.b_(I,c.u_elevation_stops),u_color_stops:new r.b_(I,c.u_color_stops),u_color_ramp_size:new r.b_(I,c.u_color_ramp_size),u_opacity:new r.bq(I,c.u_opacity)}),line:(I,c)=>({u_translation:new r.c3(I,c.u_translation),u_ratio:new r.bq(I,c.u_ratio),u_device_pixel_ratio:new r.bq(I,c.u_device_pixel_ratio),u_units_to_pixels:new r.c3(I,c.u_units_to_pixels)}),lineGradient:(I,c)=>({u_translation:new r.c3(I,c.u_translation),u_ratio:new r.bq(I,c.u_ratio),u_device_pixel_ratio:new r.bq(I,c.u_device_pixel_ratio),u_units_to_pixels:new r.c3(I,c.u_units_to_pixels),u_image:new r.b_(I,c.u_image),u_image_height:new r.bq(I,c.u_image_height)}),linePattern:(I,c)=>({u_translation:new r.c3(I,c.u_translation),u_texsize:new r.c3(I,c.u_texsize),u_ratio:new r.bq(I,c.u_ratio),u_device_pixel_ratio:new r.bq(I,c.u_device_pixel_ratio),u_image:new r.b_(I,c.u_image),u_units_to_pixels:new r.c3(I,c.u_units_to_pixels),u_scale:new r.c2(I,c.u_scale),u_fade:new r.bq(I,c.u_fade)}),lineSDF:(I,c)=>({u_translation:new r.c3(I,c.u_translation),u_ratio:new r.bq(I,c.u_ratio),u_device_pixel_ratio:new r.bq(I,c.u_device_pixel_ratio),u_units_to_pixels:new r.c3(I,c.u_units_to_pixels),u_image:new r.b_(I,c.u_image),u_mix:new r.bq(I,c.u_mix),u_tileratio:new r.bq(I,c.u_tileratio),u_crossfade_from:new r.bq(I,c.u_crossfade_from),u_crossfade_to:new r.bq(I,c.u_crossfade_to),u_lineatlas_width:new r.bq(I,c.u_lineatlas_width),u_lineatlas_height:new r.bq(I,c.u_lineatlas_height)}),lineGradientSDF:(I,c)=>({u_translation:new r.c3(I,c.u_translation),u_ratio:new r.bq(I,c.u_ratio),u_device_pixel_ratio:new r.bq(I,c.u_device_pixel_ratio),u_units_to_pixels:new r.c3(I,c.u_units_to_pixels),u_image:new r.b_(I,c.u_image),u_image_height:new r.bq(I,c.u_image_height),u_tileratio:new r.bq(I,c.u_tileratio),u_crossfade_from:new r.bq(I,c.u_crossfade_from),u_crossfade_to:new r.bq(I,c.u_crossfade_to),u_image_dash:new r.b_(I,c.u_image_dash),u_mix:new r.bq(I,c.u_mix),u_lineatlas_width:new r.bq(I,c.u_lineatlas_width),u_lineatlas_height:new r.bq(I,c.u_lineatlas_height)}),raster:(I,c)=>({u_tl_parent:new r.c3(I,c.u_tl_parent),u_scale_parent:new r.bq(I,c.u_scale_parent),u_buffer_scale:new r.bq(I,c.u_buffer_scale),u_fade_t:new r.bq(I,c.u_fade_t),u_opacity:new r.bq(I,c.u_opacity),u_image0:new r.b_(I,c.u_image0),u_image1:new r.b_(I,c.u_image1),u_brightness_low:new r.bq(I,c.u_brightness_low),u_brightness_high:new r.bq(I,c.u_brightness_high),u_saturation_factor:new r.bq(I,c.u_saturation_factor),u_contrast_factor:new r.bq(I,c.u_contrast_factor),u_spin_weights:new r.c2(I,c.u_spin_weights),u_coords_top:new r.c1(I,c.u_coords_top),u_coords_bottom:new r.c1(I,c.u_coords_bottom)}),symbolIcon:(I,c)=>({u_is_size_zoom_constant:new r.b_(I,c.u_is_size_zoom_constant),u_is_size_feature_constant:new r.b_(I,c.u_is_size_feature_constant),u_size_t:new r.bq(I,c.u_size_t),u_size:new r.bq(I,c.u_size),u_camera_to_center_distance:new r.bq(I,c.u_camera_to_center_distance),u_pitch:new r.bq(I,c.u_pitch),u_rotate_symbol:new r.b_(I,c.u_rotate_symbol),u_aspect_ratio:new r.bq(I,c.u_aspect_ratio),u_fade_change:new r.bq(I,c.u_fade_change),u_label_plane_matrix:new r.c0(I,c.u_label_plane_matrix),u_coord_matrix:new r.c0(I,c.u_coord_matrix),u_is_text:new r.b_(I,c.u_is_text),u_pitch_with_map:new r.b_(I,c.u_pitch_with_map),u_is_along_line:new r.b_(I,c.u_is_along_line),u_is_variable_anchor:new r.b_(I,c.u_is_variable_anchor),u_texsize:new r.c3(I,c.u_texsize),u_texture:new r.b_(I,c.u_texture),u_translation:new r.c3(I,c.u_translation),u_pitched_scale:new r.bq(I,c.u_pitched_scale)}),symbolSDF:(I,c)=>({u_is_size_zoom_constant:new r.b_(I,c.u_is_size_zoom_constant),u_is_size_feature_constant:new r.b_(I,c.u_is_size_feature_constant),u_size_t:new r.bq(I,c.u_size_t),u_size:new r.bq(I,c.u_size),u_camera_to_center_distance:new r.bq(I,c.u_camera_to_center_distance),u_pitch:new r.bq(I,c.u_pitch),u_rotate_symbol:new r.b_(I,c.u_rotate_symbol),u_aspect_ratio:new r.bq(I,c.u_aspect_ratio),u_fade_change:new r.bq(I,c.u_fade_change),u_label_plane_matrix:new r.c0(I,c.u_label_plane_matrix),u_coord_matrix:new r.c0(I,c.u_coord_matrix),u_is_text:new r.b_(I,c.u_is_text),u_pitch_with_map:new r.b_(I,c.u_pitch_with_map),u_is_along_line:new r.b_(I,c.u_is_along_line),u_is_variable_anchor:new r.b_(I,c.u_is_variable_anchor),u_texsize:new r.c3(I,c.u_texsize),u_texture:new r.b_(I,c.u_texture),u_gamma_scale:new r.bq(I,c.u_gamma_scale),u_device_pixel_ratio:new r.bq(I,c.u_device_pixel_ratio),u_is_halo:new r.b_(I,c.u_is_halo),u_translation:new r.c3(I,c.u_translation),u_pitched_scale:new r.bq(I,c.u_pitched_scale)}),symbolTextAndIcon:(I,c)=>({u_is_size_zoom_constant:new r.b_(I,c.u_is_size_zoom_constant),u_is_size_feature_constant:new r.b_(I,c.u_is_size_feature_constant),u_size_t:new r.bq(I,c.u_size_t),u_size:new r.bq(I,c.u_size),u_camera_to_center_distance:new r.bq(I,c.u_camera_to_center_distance),u_pitch:new r.bq(I,c.u_pitch),u_rotate_symbol:new r.b_(I,c.u_rotate_symbol),u_aspect_ratio:new r.bq(I,c.u_aspect_ratio),u_fade_change:new r.bq(I,c.u_fade_change),u_label_plane_matrix:new r.c0(I,c.u_label_plane_matrix),u_coord_matrix:new r.c0(I,c.u_coord_matrix),u_is_text:new r.b_(I,c.u_is_text),u_pitch_with_map:new r.b_(I,c.u_pitch_with_map),u_is_along_line:new r.b_(I,c.u_is_along_line),u_is_variable_anchor:new r.b_(I,c.u_is_variable_anchor),u_texsize:new r.c3(I,c.u_texsize),u_texsize_icon:new r.c3(I,c.u_texsize_icon),u_texture:new r.b_(I,c.u_texture),u_texture_icon:new r.b_(I,c.u_texture_icon),u_gamma_scale:new r.bq(I,c.u_gamma_scale),u_device_pixel_ratio:new r.bq(I,c.u_device_pixel_ratio),u_is_halo:new r.b_(I,c.u_is_halo),u_translation:new r.c3(I,c.u_translation),u_pitched_scale:new r.bq(I,c.u_pitched_scale)}),background:(I,c)=>({u_opacity:new r.bq(I,c.u_opacity),u_color:new r.b$(I,c.u_color)}),backgroundPattern:(I,c)=>({u_opacity:new r.bq(I,c.u_opacity),u_image:new r.b_(I,c.u_image),u_pattern_tl_a:new r.c3(I,c.u_pattern_tl_a),u_pattern_br_a:new r.c3(I,c.u_pattern_br_a),u_pattern_tl_b:new r.c3(I,c.u_pattern_tl_b),u_pattern_br_b:new r.c3(I,c.u_pattern_br_b),u_texsize:new r.c3(I,c.u_texsize),u_mix:new r.bq(I,c.u_mix),u_pattern_size_a:new r.c3(I,c.u_pattern_size_a),u_pattern_size_b:new r.c3(I,c.u_pattern_size_b),u_scale_a:new r.bq(I,c.u_scale_a),u_scale_b:new r.bq(I,c.u_scale_b),u_pixel_coord_upper:new r.c3(I,c.u_pixel_coord_upper),u_pixel_coord_lower:new r.c3(I,c.u_pixel_coord_lower),u_tile_units_to_pixels:new r.bq(I,c.u_tile_units_to_pixels)}),terrain:(I,c)=>({u_texture:new r.b_(I,c.u_texture),u_ele_delta:new r.bq(I,c.u_ele_delta),u_fog_matrix:new r.c0(I,c.u_fog_matrix),u_fog_color:new r.b$(I,c.u_fog_color),u_fog_ground_blend:new r.bq(I,c.u_fog_ground_blend),u_fog_ground_blend_opacity:new r.bq(I,c.u_fog_ground_blend_opacity),u_horizon_color:new r.b$(I,c.u_horizon_color),u_horizon_fog_blend:new r.bq(I,c.u_horizon_fog_blend),u_is_globe_mode:new r.bq(I,c.u_is_globe_mode)}),terrainDepth:(I,c)=>({u_ele_delta:new r.bq(I,c.u_ele_delta)}),terrainCoords:(I,c)=>({u_texture:new r.b_(I,c.u_texture),u_terrain_coords_id:new r.bq(I,c.u_terrain_coords_id),u_ele_delta:new r.bq(I,c.u_ele_delta)}),projectionErrorMeasurement:(I,c)=>({u_input:new r.bq(I,c.u_input),u_output_expected:new r.bq(I,c.u_output_expected)}),atmosphere:(I,c)=>({u_sun_pos:new r.c2(I,c.u_sun_pos),u_atmosphere_blend:new r.bq(I,c.u_atmosphere_blend),u_globe_position:new r.c2(I,c.u_globe_position),u_globe_radius:new r.bq(I,c.u_globe_radius),u_inv_proj_matrix:new r.c0(I,c.u_inv_proj_matrix)}),sky:(I,c)=>({u_sky_color:new r.b$(I,c.u_sky_color),u_horizon_color:new r.b$(I,c.u_horizon_color),u_horizon:new r.c3(I,c.u_horizon),u_horizon_normal:new r.c3(I,c.u_horizon_normal),u_sky_horizon_blend:new r.bq(I,c.u_sky_horizon_blend),u_sky_blend:new r.bq(I,c.u_sky_blend)})};class Wt{constructor(c,f,y){this.context=c;const S=c.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ft={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class hn{constructor(c,f,y,S){this.length=f.length,this.attributes=y,this.itemSize=f.bytesPerElement,this.dynamicDraw=S,this.context=c;const P=c.gl;this.buffer=P.createBuffer(),c.bindVertexBuffer.set(this.buffer),P.bufferData(P.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,f){for(let y=0;y<this.attributes.length;y++){const S=f.attributes[this.attributes[y].name];S!==void 0&&c.enableVertexAttribArray(S)}}setVertexAttribPointers(c,f,y){for(let S=0;S<this.attributes.length;S++){const P=this.attributes[S],z=f.attributes[P.name];z!==void 0&&c.vertexAttribPointer(z,P.components,c[Ft[P.type]],!1,this.itemSize,P.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ai{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ur extends ai{getDefault(){return r.bp.transparent}set(c){const f=this.current;(c.r!==f.r||c.g!==f.g||c.b!==f.b||c.a!==f.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class $r extends ai{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class dr extends ai{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class zn extends ai{getDefault(){return[!0,!0,!0,!0]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class fa extends ai{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class fr extends ai{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Is extends ai{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const f=this.current;(c.func!==f.func||c.ref!==f.ref||c.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class pr extends ai{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class wd extends ai{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=c,this.dirty=!1}}class Sd extends ai{getDefault(){return[0,1]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class op extends ai{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=c,this.dirty=!1}}class ic extends ai{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class kd extends ai{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.BLEND):f.disable(f.BLEND),this.current=c,this.dirty=!1}}class Cd extends ai{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Uh extends ai{getDefault(){return r.bp.transparent}set(c){const f=this.current;(c.r!==f.r||c.g!==f.g||c.b!==f.b||c.a!==f.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Ad extends ai{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Im extends ai{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=c,this.dirty=!1}}class Uc extends ai{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class Gc extends ai{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Pm extends ai{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class lp extends ai{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Zi extends ai{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Td extends ai{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class jx extends ai{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Lm extends ai{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Gh extends ai{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Vx extends ai{getDefault(){return null}set(c){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Hx extends ai{getDefault(){return null}set(c){var f;if(c===this.current&&!this.dirty)return;const y=this.gl;Wa(y)?y.bindVertexArray(c):(f=y.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(c),this.current=c,this.dirty=!1}}class Dm extends ai{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Ux extends ai{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class cp extends ai{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Wc extends ai{constructor(c,f){super(c),this.context=c,this.parent=f}getDefault(){return null}}class Wh extends Wc{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class Ed extends Wc{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class hp extends Wc{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}const up="Framebuffer is not complete";class Md{constructor(c,f,y,S,P){this.context=c,this.width=f,this.height=y;const z=c.gl,H=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new Wh(c,H),S)this.depthAttachment=P?new hp(c,H):new Ed(c,H);else if(P)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(up)}destroy(){const c=this.context.gl,f=this.colorAttachment.get();if(f&&c.deleteTexture(f),this.depthAttachment){const y=this.depthAttachment.get();y&&c.deleteRenderbuffer(y)}c.deleteFramebuffer(this.framebuffer)}}class Id{constructor(c){var f,y;if(this.gl=c,this.clearColor=new ur(this),this.clearDepth=new $r(this),this.clearStencil=new dr(this),this.colorMask=new zn(this),this.depthMask=new fa(this),this.stencilMask=new fr(this),this.stencilFunc=new Is(this),this.stencilOp=new pr(this),this.stencilTest=new wd(this),this.depthRange=new Sd(this),this.depthTest=new op(this),this.depthFunc=new ic(this),this.blend=new kd(this),this.blendFunc=new Cd(this),this.blendColor=new Uh(this),this.blendEquation=new Ad(this),this.cullFace=new Im(this),this.cullFaceSide=new Uc(this),this.frontFace=new Gc(this),this.program=new Pm(this),this.activeTexture=new lp(this),this.viewport=new Zi(this),this.bindFramebuffer=new Td(this),this.bindRenderbuffer=new jx(this),this.bindTexture=new Lm(this),this.bindVertexBuffer=new Gh(this),this.bindElementBuffer=new Vx(this),this.bindVertexArray=new Hx(this),this.pixelStoreUnpack=new Dm(this),this.pixelStoreUnpackPremultiplyAlpha=new Ux(this),this.pixelStoreUnpackFlipY=new cp(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),Wa(c)){this.HALF_FLOAT=c.HALF_FLOAT;const S=c.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=c.RGBA16F)!==null&&f!==void 0?f:S?.RGBA16F_EXT,this.RGB16F=(y=c.RGB16F)!==null&&y!==void 0?y:S?.RGB16F_EXT,c.getExtension("EXT_color_buffer_float")}else{c.getExtension("EXT_color_buffer_half_float"),c.getExtension("OES_texture_half_float_linear");const S=c.getExtension("OES_texture_half_float");this.HALF_FLOAT=S?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,f){return new Wt(this,c,f)}createVertexBuffer(c,f,y){return new hn(this,c,f,y)}createRenderbuffer(c,f,y){const S=this.gl,P=S.createRenderbuffer();return this.bindRenderbuffer.set(P),S.renderbufferStorage(S.RENDERBUFFER,c,f,y),this.bindRenderbuffer.set(null),P}createFramebuffer(c,f,y,S){return new Md(this,c,f,y,S)}clear({color:c,depth:f,stencil:y}){const S=this.gl;let P=0;c&&(P|=S.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(P|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),y!==void 0&&(P|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),S.clear(P)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){r.bR(c.blendFunction,Rn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}createVertexArray(){var c;return Wa(this.gl)?this.gl.createVertexArray():(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.createVertexArrayOES()}deleteVertexArray(c){var f;return Wa(this.gl)?this.gl.deleteVertexArray(c):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(c)}unbindVAO(){this.bindVertexArray.set(null)}}let Il;function nc(I,c,f,y,S){const P=I.context,z=I.transform,H=P.gl,W=I.useProgram("collisionBox"),Z=[];let J=0,se=0;for(let Ee=0;Ee<y.length;Ee++){const Fe=y[Ee],Ge=c.getTile(Fe).getBucket(f);if(!Ge)continue;const Oe=S?Ge.textCollisionBox:Ge.iconCollisionBox,Ve=Ge.collisionCircleArray;Ve.length>0&&(Z.push({circleArray:Ve,circleOffset:se,coord:Fe}),J+=Ve.length/4,se=J),Oe&&W.draw(P,H.LINES,Gi.disabled,on.disabled,I.colorModeForRenderPass(),sn.disabled,wr(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(Fe),z.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),f.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,null,I.transform.zoom,null,null,Oe.collisionVertexBuffer)}if(!S||!Z.length)return;const re=I.useProgram("collisionCircle"),fe=new r.ca;fe.resize(4*J),fe._trim();let ye=0;for(const Ee of Z)for(let Fe=0;Fe<Ee.circleArray.length/4;Fe++){const Ge=4*Fe,Oe=Ee.circleArray[Ge+0],Ve=Ee.circleArray[Ge+1],Xe=Ee.circleArray[Ge+2],Ne=Ee.circleArray[Ge+3];fe.emplace(ye++,Oe,Ve,Xe,Ne,0),fe.emplace(ye++,Oe,Ve,Xe,Ne,1),fe.emplace(ye++,Oe,Ve,Xe,Ne,2),fe.emplace(ye++,Oe,Ve,Xe,Ne,3)}(!Il||Il.length<2*J)&&(Il=(function(Ee){const Fe=2*Ee,Ge=new r.cc;Ge.resize(Fe),Ge._trim();for(let Oe=0;Oe<Fe;Oe++){const Ve=6*Oe;Ge.uint16[Ve+0]=4*Oe+0,Ge.uint16[Ve+1]=4*Oe+1,Ge.uint16[Ve+2]=4*Oe+2,Ge.uint16[Ve+3]=4*Oe+2,Ge.uint16[Ve+4]=4*Oe+3,Ge.uint16[Ve+5]=4*Oe+0}return Ge})(J));const Te=P.createIndexBuffer(Il,!0),Me=P.createVertexBuffer(fe,r.cb.members,!0);for(const Ee of Z){const Fe=bd(I.transform);re.draw(P,H.TRIANGLES,Gi.disabled,on.disabled,I.colorModeForRenderPass(),sn.disabled,Fe,I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ee.coord),null,f.id,Me,Te,r.aX.simpleSegment(0,2*Ee.circleOffset,Ee.circleArray.length,Ee.circleArray.length/2),null,I.transform.zoom,null,null,null)}Me.destroy(),Te.destroy()}const dp=r.ar(new Float32Array(16));function Gx(I,c,f,y,S,P){const{horizontalAlign:z,verticalAlign:H}=r.aS(I);return new r.P((-(z-.5)*c/S+y[0])*P,(-(H-.5)*f/S+y[1])*P)}function $h(I,c,f,y,S,P){const z=c.tileAnchorPoint.add(new r.P(c.translation[0],c.translation[1]));if(c.pitchWithMap){let H=y.mult(P);f||(H=H.rotate(-S));const W=z.add(H);return gi(W.x,W.y,c.pitchedLabelPlaneMatrix,c.getElevation).point}if(f){const H=Mi(c.tileAnchorPoint.x+1,c.tileAnchorPoint.y,c).point.sub(I),W=Math.atan(H.y/H.x)+(H.x<0?Math.PI:0);return I.add(y.rotate(W))}return I.add(y)}function Wx(I,c,f,y,S,P,z,H,W,Z,J,se){const re=I.text.placedSymbolArray,fe=I.text.dynamicLayoutVertexArray,ye=I.icon.dynamicLayoutVertexArray,Te={};fe.clear();for(let Me=0;Me<re.length;Me++){const Ee=re.get(Me),Fe=Ee.hidden||!Ee.crossTileID||I.allowVerticalPlacement&&!Ee.placedOrientation?null:y[Ee.crossTileID];if(Fe){const Ge=new r.P(Ee.anchorX,Ee.anchorY),Oe={getElevation:se,width:S.width,height:S.height,pitchedLabelPlaneMatrix:P,pitchWithMap:f,transform:S,tileAnchorPoint:Ge,translation:Z,unwrappedTileID:J},Ve=f?lr(Ge.x,Ge.y,Oe):Mi(Ge.x,Ge.y,Oe),Xe=wn(S.cameraToCenterDistance,Ve.signedDistanceFromCamera);let Ne=r.aA(I.textSizeData,H,Ee)*Xe/r.aM;f&&(Ne*=I.tilePixelRatio/z);const{width:Ke,height:gt,anchor:lt,textOffset:ht,textBoxScale:dt}=Fe,Ot=Gx(lt,Ke,gt,ht,dt,Ne),Bt=S.getPitchedTextCorrection(Ge.x+Z[0],Ge.y+Z[1],J),Mt=$h(Ve.point,Oe,c,Ot,-S.bearingInRadians,Bt),$t=I.allowVerticalPlacement&&Ee.placedOrientation===r.az.vertical?Math.PI/2:0;for(let Hi=0;Hi<Ee.numGlyphs;Hi++)r.aG(fe,Mt,$t);W&&Ee.associatedIconIndex>=0&&(Te[Ee.associatedIconIndex]={shiftedAnchor:Mt,angle:$t})}else lo(Ee.numGlyphs,fe)}if(W){ye.clear();const Me=I.icon.placedSymbolArray;for(let Ee=0;Ee<Me.length;Ee++){const Fe=Me.get(Ee);if(Fe.hidden)lo(Fe.numGlyphs,ye);else{const Ge=Te[Ee];if(Ge)for(let Oe=0;Oe<Fe.numGlyphs;Oe++)r.aG(ye,Ge.shiftedAnchor,Ge.angle);else lo(Fe.numGlyphs,ye)}}I.icon.dynamicLayoutVertexBuffer.updateData(ye)}I.text.dynamicLayoutVertexBuffer.updateData(fe)}function Rm(I,c,f){return f.iconsInText&&c?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function Xh(I,c,f,y,S,P,z,H,W,Z,J,se,re){const fe=I.context,ye=fe.gl,Te=I.transform,Me=H==="map",Ee=W==="map",Fe=H!=="viewport"&&f.layout.get("symbol-placement")!=="point",Ge=Me&&!Ee&&!Fe,Oe=!f.layout.get("symbol-sort-key").isConstant();let Ve=!1;const Xe=I.getDepthModeForSublayer(0,Gi.ReadOnly),Ne=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ke=[],gt=Te.getCircleRadiusCorrection();for(const lt of y){const ht=c.getTile(lt),dt=ht.getBucket(f);if(!dt)continue;const Ot=S?dt.text:dt.icon;if(!Ot||!Ot.segments.get().length||!Ot.hasVisibleVertices)continue;const Bt=Ot.programConfigurations.get(f.id),Mt=S||dt.sdfIcons,$t=S?dt.textSizeData:dt.iconSizeData,Hi=Ee||Te.pitch!==0,Fn=I.useProgram(Rm(Mt,S,dt),Bt),ca=r.ay($t,Te.zoom),Zn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(lt);let pa,Kn,Ma,ga,kr=[0,0],$a=null;if(S)Kn=ht.glyphAtlasTexture,Ma=ye.LINEAR,pa=ht.glyphAtlasTexture.size,dt.iconsInText&&(kr=ht.imageAtlasTexture.size,$a=ht.imageAtlasTexture,ga=Hi||I.options.rotating||I.options.zooming||$t.kind==="composite"||$t.kind==="camera"?ye.LINEAR:ye.NEAREST);else{const aa=f.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;Kn=ht.imageAtlasTexture,Ma=Mt||I.options.rotating||I.options.zooming||aa||Hi?ye.LINEAR:ye.NEAREST,pa=ht.imageAtlasTexture.size}const Na=r.aN(ht,1,I.transform.zoom),Fr=Xi(Me,I.transform,Na),Ol=r.N();r.aB(Ol,Fr);const cl=Hn(Ee,Me,I.transform,Na),Ho=r.aO(Te,ht,P,z),ps=Te.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),cc=Ne&&dt.hasTextData(),fu=f.layout.get("icon-text-fit")!=="none"&&cc&&dt.hasIconData();if(Fe){const aa=I.style.map.terrain?(gr,mr)=>I.style.map.terrain.getElevation(lt,gr,mr):null,Qn=f.layout.get("text-rotation-alignment")==="map";dn(dt,I,S,Fr,Ol,Ee,Z,Qn,lt.toUnwrapped(),Te.width,Te.height,Ho,aa)}const hc=S&&Ne||fu,Ks=Fe||hc?dp:Ee?Fr:I.transform.clipSpaceToPixelsMatrix,Uo=Mt&&f.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let _o;_o=Mt?dt.iconsInText?Ye($t.kind,ca,Ge,Ee,Fe,hc,I,Ks,cl,Ho,pa,kr,gt):Re($t.kind,ca,Ge,Ee,Fe,hc,I,Ks,cl,Ho,S,pa,0,gt):we($t.kind,ca,Ge,Ee,Fe,hc,I,Ks,cl,Ho,S,pa,gt);const xo={program:Fn,buffers:Ot,uniformValues:_o,projectionData:ps,atlasTexture:Kn,atlasTextureIcon:$a,atlasInterpolation:Ma,atlasInterpolationIcon:ga,isSDF:Mt,hasHalo:Uo};if(Oe&&dt.canOverlap){Ve=!0;const aa=Ot.segments.get();for(const Qn of aa)Ke.push({segments:new r.aX([Qn]),sortKey:Qn.sortKey,state:xo,terrainData:Zn})}else Ke.push({segments:Ot.segments,sortKey:0,state:xo,terrainData:Zn})}Ve&&Ke.sort(((lt,ht)=>lt.sortKey-ht.sortKey));for(const lt of Ke){const ht=lt.state;if(fe.activeTexture.set(ye.TEXTURE0),ht.atlasTexture.bind(ht.atlasInterpolation,ye.CLAMP_TO_EDGE),ht.atlasTextureIcon&&(fe.activeTexture.set(ye.TEXTURE1),ht.atlasTextureIcon&&ht.atlasTextureIcon.bind(ht.atlasInterpolationIcon,ye.CLAMP_TO_EDGE)),ht.isSDF){const dt=ht.uniformValues;ht.hasHalo&&(dt.u_is_halo=1,Pd(ht.buffers,lt.segments,f,I,ht.program,Xe,J,se,dt,ht.projectionData,lt.terrainData)),dt.u_is_halo=0}Pd(ht.buffers,lt.segments,f,I,ht.program,Xe,J,se,ht.uniformValues,ht.projectionData,lt.terrainData)}}function Pd(I,c,f,y,S,P,z,H,W,Z,J){const se=y.context;S.draw(se,se.gl.TRIANGLES,P,z,H,sn.backCCW,W,J,Z,f.id,I.layoutVertexBuffer,I.indexBuffer,c,f.paint,y.transform.zoom,I.programConfigurations.get(f.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function Om(I,c,f,y,S){const P=I.context,z=P.gl,H=on.disabled,W=new Rn([z.ONE,z.ONE],r.bp.transparent,[!0,!0,!0,!0]),Z=c.getBucket(f);if(!Z)return;const J=y.key;let se=f.heatmapFbos.get(J);se||(se=Yh(P,c.tileSize,c.tileSize),f.heatmapFbos.set(J,se)),P.bindFramebuffer.set(se.framebuffer),P.viewport.set([0,0,c.tileSize,c.tileSize]),P.clear({color:r.bp.transparent});const re=Z.programConfigurations.get(f.id),fe=I.useProgram("heatmap",re,!S),ye=I.transform.getProjectionData({overscaledTileID:c.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Te=I.style.map.terrain.getTerrainData(y);fe.draw(P,z.TRIANGLES,Gi.disabled,H,W,sn.disabled,Ys(c,I.transform.zoom,f.paint.get("heatmap-intensity"),1),Te,ye,f.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,f.paint,I.transform.zoom,re)}function zm(I,c,f,y,S){const P=I.context,z=P.gl,H=I.transform;P.setColorMode(I.colorModeForRenderPass());const W=Ld(P,c),Z=f.key,J=c.heatmapFbos.get(Z);if(!J)return;P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,J.colorAttachment.get()),P.activeTexture.set(z.TEXTURE1),W.bind(z.LINEAR,z.CLAMP_TO_EDGE);const se=H.getProjectionData({overscaledTileID:f,applyTerrainMatrix:S,applyGlobeMatrix:!y});I.useProgram("heatmapTexture").draw(P,z.TRIANGLES,Gi.disabled,on.disabled,I.colorModeForRenderPass(),sn.disabled,gn(I,c,0,1),null,se,c.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,c.paint,H.zoom),J.destroy(),c.heatmapFbos.delete(Z)}function Yh(I,c,f){var y,S;const P=I.gl,z=P.createTexture();P.bindTexture(P.TEXTURE_2D,z),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,P.LINEAR),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,P.LINEAR);const H=(y=I.HALF_FLOAT)!==null&&y!==void 0?y:P.UNSIGNED_BYTE,W=(S=I.RGBA16F)!==null&&S!==void 0?S:P.RGBA;P.texImage2D(P.TEXTURE_2D,0,W,c,f,0,P.RGBA,H,null);const Z=I.createFramebuffer(c,f,!1,!1);return Z.colorAttachment.set(z),Z}function Ld(I,c){return c.colorRampTexture||(c.colorRampTexture=new r.T(I,c.colorRamp,I.gl.RGBA)),c.colorRampTexture}function Fm(I,c,f,y,S,P,z,H){let W=256;if(S.stepInterpolant){const Z=c.getSource().maxzoom,J=z.canonical.z===Z?Math.ceil(1<<I.transform.maxZoom-z.canonical.z):1;W=r.an(r.ce(P.maxLineLength/r.a5*1024*J),256,f.maxTextureSize)}return H.gradient=r.cf({expression:S.gradientExpression(),evaluationKey:"lineProgress",resolution:W,image:H.gradient||void 0,clips:P.lineClipsArray}),H.texture?H.texture.update(H.gradient):H.texture=new r.T(f,H.gradient,y.RGBA),H.version=S.gradientVersion,H.texture}function Bm(I,c,f,y,S){I.activeTexture.set(c.TEXTURE0),f.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),y.updatePaintBuffers(S)}function Fa(I,c,f,y,S,P){(S||I.lineAtlas.dirty)&&(c.activeTexture.set(f.TEXTURE0),I.lineAtlas.bind(c)),y.updatePaintBuffers(P)}function ac(I,c,f,y,S,P,z){const H=P.gradients[S.id];let W=H.texture;S.gradientVersion!==H.version&&(W=Fm(I,c,f,y,S,P,z,H)),f.activeTexture.set(y.TEXTURE0),W.bind(S.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}function Ps(I,c,f,y,S,P,z,H,W){const Z=P.gradients[S.id];let J=Z.texture;S.gradientVersion!==Z.version&&(J=Fm(I,c,f,y,S,P,z,Z)),f.activeTexture.set(y.TEXTURE0),J.bind(S.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE),f.activeTexture.set(y.TEXTURE1),I.lineAtlas.bind(f),H.updatePaintBuffers(W)}function Dd(I,c,f,y,S){if(!f||!y||!y.imageAtlas)return;const P=y.imageAtlas.patternPositions;let z=P[f.to.toString()],H=P[f.from.toString()];if(!z&&H&&(z=H),!H&&z&&(H=z),!z||!H){const W=S.getPaintProperty(c);z=P[W],H=P[W]}z&&H&&I.setConstantPatternPositions(z,H)}function qh(I,c,f,y,S,P,z,H){const W=I.context.gl,Z="fill-pattern",J=f.paint.get(Z),se=J&&J.constantOr(1),re=f.getCrossfadeParameters();let fe,ye,Te,Me,Ee;const Fe=I.transform,Ge=f.paint.get("fill-translate"),Oe=f.paint.get("fill-translate-anchor");z?(ye=se&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",fe=W.LINES):(ye=se?"fillPattern":"fill",fe=W.TRIANGLES);const Ve=J.constantOr(null);for(const Xe of y){const Ne=c.getTile(Xe);if(se&&!Ne.patternsLoaded())continue;const Ke=Ne.getBucket(f);if(!Ke)continue;const gt=Ke.programConfigurations.get(f.id),lt=I.useProgram(ye,gt),ht=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Xe);se&&(I.context.activeTexture.set(W.TEXTURE0),Ne.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),gt.updatePaintBuffers(re)),Dd(gt,Z,Ve,Ne,f);const dt=Fe.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Ot=r.aO(Fe,Ne,Ge,Oe);if(z){Me=Ke.indexBuffer2,Ee=Ke.segments2;const Mt=[W.drawingBufferWidth,W.drawingBufferHeight];Te=ye==="fillOutlinePattern"&&se?vd(I,re,Ne,Mt,Ot):Hc(Mt,Ot)}else Me=Ke.indexBuffer,Ee=Ke.segments,Te=se?Vh(I,re,Ne,Ot):{u_fill_translate:Ot};const Bt=I.stencilModeForClipping(Xe);lt.draw(I.context,fe,S,Bt,P,sn.backCCW,Te,ht,dt,f.id,Ke.layoutVertexBuffer,Me,Ee,f.paint,I.transform.zoom,gt)}}function Rd(I,c,f,y,S,P,z,H){const W=I.context,Z=W.gl,J="fill-extrusion-pattern",se=f.paint.get(J),re=se.constantOr(1),fe=f.getCrossfadeParameters(),ye=f.paint.get("fill-extrusion-opacity"),Te=se.constantOr(null),Me=I.transform;for(const Ee of y){const Fe=c.getTile(Ee),Ge=Fe.getBucket(f);if(!Ge)continue;const Oe=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ee),Ve=Ge.programConfigurations.get(f.id),Xe=I.useProgram(re?"fillExtrusionPattern":"fillExtrusion",Ve);re&&(I.context.activeTexture.set(Z.TEXTURE0),Fe.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Ve.updatePaintBuffers(fe));const Ne=Me.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!H,applyTerrainMatrix:!0});Dd(Ve,J,Te,Fe,f);const Ke=r.aO(Me,Fe,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),gt=f.paint.get("fill-extrusion-vertical-gradient"),lt=re?fs(I,gt,ye,Ke,Ee,fe,Fe):Vc(I,gt,ye,Ke);Xe.draw(W,W.gl.TRIANGLES,S,P,z,sn.backCCW,lt,Oe,Ne,f.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,f.paint,I.transform.zoom,Ve,I.style.map.terrain&&Ge.centroidVertexBuffer)}}function Pl(I,c,f,y,S,P,z,H,W){var Z;const J=I.style.projection,se=I.context,re=I.transform,fe=se.gl,ye=[`#define NUM_ILLUMINATION_SOURCES ${f.paint.get("hillshade-highlight-color").values.length}`],Te=I.useProgram("hillshade",null,!1,ye),Me=!I.options.moving;for(const Ee of y){const Fe=c.getTile(Ee),Ge=Fe.fbo;if(!Ge)continue;const Oe=J.getMeshFromTileID(se,Ee.canonical,H,!0,"raster"),Ve=(Z=I.style.map.terrain)===null||Z===void 0?void 0:Z.getTerrainData(Ee);se.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,Ge.colorAttachment.get());const Xe=re.getProjectionData({overscaledTileID:Ee,aligned:Me,applyGlobeMatrix:!W,applyTerrainMatrix:!0});Te.draw(se,fe.TRIANGLES,P,S[Ee.overscaledZ],z,sn.backCCW,ol(I,Fe,f),Ve,Xe,f.id,Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}}function Zh(I,c,f,y,S,P,z,H,W){var Z;const J=I.style.projection,se=I.context,re=I.transform,fe=se.gl,ye=I.useProgram("colorRelief"),Te=!I.options.moving;let Me=!0,Ee=0;for(const Fe of y){const Ge=c.getTile(Fe),Oe=Ge.dem;if(Me){const lt=fe.getParameter(fe.MAX_TEXTURE_SIZE),{elevationTexture:ht,colorTexture:dt}=f.getColorRampTextures(se,lt,Oe.getUnpackVector());se.activeTexture.set(fe.TEXTURE1),ht.bind(fe.NEAREST,fe.CLAMP_TO_EDGE),se.activeTexture.set(fe.TEXTURE4),dt.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),Me=!1,Ee=ht.size[0]}if(!Oe||!Oe.data)continue;const Ve=Oe.stride,Xe=Oe.getPixels();if(se.activeTexture.set(fe.TEXTURE0),se.pixelStoreUnpackPremultiplyAlpha.set(!1),Ge.demTexture=Ge.demTexture||I.getTileTexture(Ve),Ge.demTexture){const lt=Ge.demTexture;lt.update(Xe,{premultiply:!1}),lt.bind(fe.LINEAR,fe.CLAMP_TO_EDGE)}else Ge.demTexture=new r.T(se,Xe,fe.RGBA,{premultiply:!1}),Ge.demTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE);const Ne=J.getMeshFromTileID(se,Fe.canonical,H,!0,"raster"),Ke=(Z=I.style.map.terrain)===null||Z===void 0?void 0:Z.getTerrainData(Fe),gt=re.getProjectionData({overscaledTileID:Fe,aligned:Te,applyGlobeMatrix:!W,applyTerrainMatrix:!0});ye.draw(se,fe.TRIANGLES,P,S[Fe.overscaledZ],z,sn.backCCW,_(f,Ge.dem,Ee),Ke,gt,f.id,Ne.vertexBuffer,Ne.indexBuffer,Ne.segments)}}const rc=[new r.P(0,0),new r.P(r.a5,0),new r.P(r.a5,r.a5),new r.P(0,r.a5)];function $c(I,c,f,y,S,P,z,H,W=!1,Z=!1){const J=y[y.length-1].overscaledZ,se=I.context,re=se.gl,fe=I.useProgram("raster"),ye=I.transform,Te=I.style.projection,Me=I.colorModeForRenderPass(),Ee=!I.options.moving,Fe=f.paint.get("raster-opacity"),Ge=f.paint.get("raster-resampling"),Oe=f.paint.get("raster-fade-duration"),Ve=!!I.style.map.terrain;for(const Xe of y){const Ne=I.getDepthModeForSublayer(Xe.overscaledZ-J,Fe===1?Gi.ReadWrite:Gi.ReadOnly,re.LESS),Ke=c.getTile(Xe),gt=Ge==="nearest"?re.NEAREST:re.LINEAR;se.activeTexture.set(re.TEXTURE0),Ke.texture.bind(gt,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST),se.activeTexture.set(re.TEXTURE1);const{parentTile:lt,parentScaleBy:ht,parentTopLeft:dt,fadeValues:Ot}=Nm(Ke,c,Oe,Ve);Ke.fadeOpacity=Ot.tileOpacity,lt?(lt.fadeOpacity=Ot.parentTileOpacity,lt.texture.bind(gt,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST)):Ke.texture.bind(gt,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST),Ke.texture.useMipmap&&se.extTextureFilterAnisotropic&&I.transform.pitch>20&&re.texParameterf(re.TEXTURE_2D,se.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,se.extTextureFilterAnisotropicMax);const Bt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Xe),Mt=ye.getProjectionData({overscaledTileID:Xe,aligned:Ee,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),$t=oe(dt,ht,Ot.fadeMix,f,H),Hi=Te.getMeshFromTileID(se,Xe.canonical,P,z,"raster");fe.draw(se,re.TRIANGLES,Ne,S?S[Xe.overscaledZ]:on.disabled,Me,W?sn.frontCCW:sn.backCCW,$t,Bt,Mt,f.id,Hi.vertexBuffer,Hi.indexBuffer,Hi.segments)}}function Nm(I,c,f,y){const S={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(f===0||y)return S;if(I.fadingParentID){const P=c.getLoadedTile(I.fadingParentID);if(!P)return S;const z=Math.pow(2,P.tileID.overscaledZ-I.tileID.overscaledZ),H=[I.tileID.canonical.x*z%1,I.tileID.canonical.y*z%1],W=(function(Z,J,se){const re=O(),fe=(re-J.timeAdded)/se,ye=Z.fadingDirection===nt.Incoming,Te=r.an((re-Z.timeAdded)/se,0,1),Me=r.an(1-fe,0,1),Ee=ye?Te:Me;return{tileOpacity:Ee,parentTileOpacity:ye?Me:Te,fadeMix:{opacity:1,mix:1-Ee}}})(I,P,f);return{parentTile:P,parentScaleBy:z,parentTopLeft:H,fadeValues:W}}if(I.selfFading){const P=(function(z,H){const W=(O()-z.timeAdded)/H,Z=r.an(W,0,1);return{tileOpacity:Z,fadeMix:{opacity:Z,mix:0}}})(I,f);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:P}}return S}const jm=new r.bp(1,0,0,1),Vm=new r.bp(0,1,0,1),Hm=new r.bp(0,0,1,1),Um=new r.bp(1,0,1,1),Ll=new r.bp(0,1,1,1);function fp(I,c,f,y){Kh(I,0,c+f/2,I.transform.width,f,y)}function pp(I,c,f,y){Kh(I,c-f/2,0,f,I.transform.height,y)}function Kh(I,c,f,y,S,P){const z=I.context,H=z.gl;H.enable(H.SCISSOR_TEST),H.scissor(c*I.pixelRatio,f*I.pixelRatio,y*I.pixelRatio,S*I.pixelRatio),z.clear({color:P}),H.disable(H.SCISSOR_TEST)}function Gm(I,c,f){const y=I.context,S=y.gl,P=I.useProgram("debug"),z=Gi.disabled,H=on.disabled,W=I.colorModeForRenderPass(),Z="$debug",J=I.style.map.terrain&&I.style.map.terrain.getTerrainData(f);y.activeTexture.set(S.TEXTURE0);const se=c.getTileByID(f.key).latestRawTileData,re=Math.floor((se&&se.byteLength||0)/1024),fe=c.getTile(f).tileSize,ye=512/Math.min(fe,512)*(f.overscaledZ/I.transform.zoom)*.5;let Te=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(Te+=` => ${f.overscaledZ}`),(function(Ee,Fe){Ee.initDebugOverlayCanvas();const Ge=Ee.debugOverlayCanvas,Oe=Ee.context.gl,Ve=Ee.debugOverlayCanvas.getContext("2d");Ve.clearRect(0,0,Ge.width,Ge.height),Ve.shadowColor="white",Ve.shadowBlur=2,Ve.lineWidth=1.5,Ve.strokeStyle="white",Ve.textBaseline="top",Ve.font="bold 36px Open Sans, sans-serif",Ve.fillText(Fe,5,5),Ve.strokeText(Fe,5,5),Ee.debugOverlayTexture.update(Ge),Ee.debugOverlayTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE)})(I,`${Te} ${re}kB`);const Me=I.transform.getProjectionData({overscaledTileID:f,applyGlobeMatrix:!0,applyTerrainMatrix:!0});P.draw(y,S.TRIANGLES,z,H,Rn.alphaBlended,sn.disabled,tc(r.bp.transparent,ye),null,Me,Z,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),P.draw(y,S.LINE_STRIP,z,H,W,sn.disabled,tc(r.bp.red),J,Me,Z,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function gp(I,c,f,y){const{isRenderingGlobe:S}=y,P=I.context,z=P.gl,H=I.transform,W=I.colorModeForRenderPass(),Z=I.getDepthModeFor3D(),J=I.useProgram("terrain");P.bindFramebuffer.set(null),P.viewport.set([0,0,I.width,I.height]);for(const se of f){const re=c.getTerrainMesh(se.tileID),fe=I.renderToTexture.getTexture(se),ye=c.getTerrainData(se.tileID);P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,fe.texture);const Te=c.getMeshFrameDelta(H.zoom),Me=H.calculateFogMatrix(se.tileID.toUnwrapped()),Ee=Jl(Te,Me,I.style.sky,H.pitch,S),Fe=H.getProjectionData({overscaledTileID:se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});J.draw(P,z.TRIANGLES,Z,on.disabled,W,sn.backCCW,Ee,ye,Fe,"terrain",re.vertexBuffer,re.indexBuffer,re.segments)}}function mp(I,c){if(!c.mesh){const f=new r.aW;f.emplaceBack(-1,-1),f.emplaceBack(1,-1),f.emplaceBack(1,1),f.emplaceBack(-1,1);const y=new r.aY;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),c.mesh=new jn(I.createVertexBuffer(f,Vi.members),I.createIndexBuffer(y),r.aX.simpleSegment(0,0,f.length,y.length))}return c.mesh}class Wm{constructor(c,f){this.context=new Id(c),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:r.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=rn.maxOverzooming+rn.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new kn}resize(c,f,y){if(this.width=Math.floor(c*y),this.height=Math.floor(f*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const c=this.context,f=new r.aW;f.emplaceBack(0,0),f.emplaceBack(r.a5,0),f.emplaceBack(0,r.a5),f.emplaceBack(r.a5,r.a5),this.tileExtentBuffer=c.createVertexBuffer(f,Vi.members),this.tileExtentSegments=r.aX.simpleSegment(0,0,4,2);const y=new r.aW;y.emplaceBack(0,0),y.emplaceBack(r.a5,0),y.emplaceBack(0,r.a5),y.emplaceBack(r.a5,r.a5),this.debugBuffer=c.createVertexBuffer(y,Vi.members),this.debugSegments=r.aX.simpleSegment(0,0,4,5);const S=new r.ch;S.emplaceBack(0,0,0,0),S.emplaceBack(r.a5,0,r.a5,0),S.emplaceBack(0,r.a5,0,r.a5),S.emplaceBack(r.a5,r.a5,r.a5,r.a5),this.rasterBoundsBuffer=c.createVertexBuffer(S,jh.members),this.rasterBoundsSegments=r.aX.simpleSegment(0,0,4,2);const P=new r.aW;P.emplaceBack(0,0),P.emplaceBack(r.a5,0),P.emplaceBack(0,r.a5),P.emplaceBack(r.a5,r.a5),this.rasterBoundsBufferPosOnly=c.createVertexBuffer(P,Vi.members),this.rasterBoundsSegmentsPosOnly=r.aX.simpleSegment(0,0,4,5);const z=new r.aW;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(z,Vi.members),this.viewportSegments=r.aX.simpleSegment(0,0,4,2);const H=new r.ci;H.emplaceBack(0),H.emplaceBack(1),H.emplaceBack(3),H.emplaceBack(2),H.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(H);const W=new r.aY;W.emplaceBack(1,0,2),W.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(W);const Z=this.context.gl;this.stencilClearMode=new on({func:Z.ALWAYS,mask:0},0,255,Z.ZERO,Z.ZERO,Z.ZERO),this.tileExtentMesh=new jn(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const c=this.context,f=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=r.N();r.c7(y,0,this.width,this.height,0,0,1),r.Q(y,y,[f.drawingBufferWidth,f.drawingBufferHeight,0]);const S={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(c,f.TRIANGLES,Gi.disabled,this.stencilClearMode,Rn.disabled,sn.disabled,null,null,S,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,f,y){if(this.currentStencilSource===c.source||!c.isTileClipped()||!f||!f.length)return;this.currentStencilSource=c.source,this.nextStencilID+f.length>256&&this.clearStencil();const S=this.context;S.setColorMode(Rn.disabled),S.setDepthMode(Gi.disabled);const P={};for(const z of f)P[z.key]=this.nextStencilID++;this._renderTileMasks(P,f,y,!0),this._renderTileMasks(P,f,y,!1),this._tileClippingMaskIDs=P}_renderTileMasks(c,f,y,S){const P=this.context,z=P.gl,H=this.style.projection,W=this.transform,Z=this.useProgram("clippingMask");for(const J of f){const se=c[J.key],re=this.style.map.terrain&&this.style.map.terrain.getTerrainData(J),fe=H.getMeshFromTileID(this.context,J.canonical,S,!0,"stencil"),ye=W.getProjectionData({overscaledTileID:J,applyGlobeMatrix:!y,applyTerrainMatrix:!0});Z.draw(P,z.TRIANGLES,Gi.disabled,new on({func:z.ALWAYS,mask:0},se,255,z.KEEP,z.KEEP,z.REPLACE),Rn.disabled,y?sn.disabled:sn.backCCW,null,re,ye,"$clipping",fe.vertexBuffer,fe.indexBuffer,fe.segments)}}_renderTilesDepthBuffer(){const c=this.context,f=c.gl,y=this.style.projection,S=this.transform,P=this.useProgram("depth"),z=this.getDepthModeFor3D(),H=fi(S,{tileSize:S.tileSize});for(const W of H){const Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(W),J=y.getMeshFromTileID(this.context,W.canonical,!0,!0,"raster"),se=S.getProjectionData({overscaledTileID:W,applyGlobeMatrix:!0,applyTerrainMatrix:!0});P.draw(c,f.TRIANGLES,z,on.disabled,Rn.disabled,sn.backCCW,null,Z,se,"$clipping",J.vertexBuffer,J.indexBuffer,J.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,f=this.context.gl;return new on({func:f.NOTEQUAL,mask:255},c,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(c){const f=this.context.gl;return new on({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,f.KEEP,f.KEEP,f.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(c){const f=this.context.gl,y=c.sort(((z,H)=>H.overscaledZ-z.overscaledZ)),S=y[y.length-1].overscaledZ,P=y[0].overscaledZ-S+1;if(P>1){this.currentStencilSource=void 0,this.nextStencilID+P>256&&this.clearStencil();const z={};for(let H=0;H<P;H++)z[H+S]=new on({func:f.GEQUAL,mask:255},H+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=P,[z,y]}return[{[S]:on.disabled},y]}stencilConfigForOverlapTwoPass(c){const f=this.context.gl,y=c.sort(((z,H)=>H.overscaledZ-z.overscaledZ)),S=y[y.length-1].overscaledZ,P=y[0].overscaledZ-S+1;if(this.clearStencil(),P>1){const z={},H={};for(let W=0;W<P;W++)z[W+S]=new on({func:f.GREATER,mask:255},P+1+W,255,f.KEEP,f.KEEP,f.REPLACE),H[W+S]=new on({func:f.GREATER,mask:255},1+W,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID=2*P+1,[z,H,y]}return this.nextStencilID=3,[{[S]:new on({func:f.GREATER,mask:255},2,255,f.KEEP,f.KEEP,f.REPLACE)},{[S]:new on({func:f.GREATER,mask:255},1,255,f.KEEP,f.KEEP,f.REPLACE)},y]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new Rn([c.CONSTANT_COLOR,c.ONE],new r.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Rn.unblended:Rn.alphaBlended}getDepthModeForSublayer(c,f,y){if(!this.opaquePassEnabledForLayer())return Gi.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new Gi(y||this.context.gl.LEQUAL,f,[S,S])}getDepthModeFor3D(){return new Gi(this.context.gl.LEQUAL,Gi.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,f){var y,S;this.style=c,this.options=f,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(O()),this.imageManager.beginFrame();const P=this.style._order,z=this.style.tileManagers,H={},W={},Z={},J={isRenderingToTexture:!1,isRenderingGlobe:((y=c.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const re in z){const fe=z[re];fe.used&&fe.prepare(this.context),H[re]=fe.getVisibleCoordinates(!1),W[re]=H[re].slice().reverse(),Z[re]=fe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let re=0;re<P.length;re++)if(this.style._layers[P[re]].is3D()){this.opaquePassCutoff=re;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const re of P){const fe=this.style._layers[re];if(!fe.hasOffscreenPass()||fe.isHidden(this.transform.zoom))continue;const ye=W[fe.source];(fe.type==="custom"||ye.length)&&this.renderLayer(this,z[fe.source],fe,ye,J)}if((S=this.style.projection)===null||S===void 0||S.updateGPUdependent({context:this.context,useProgram:re=>this.useProgram(re)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?r.bp.black:r.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(re,fe){const ye=re.context,Te=ye.gl,Me=((Xe,Ne,Ke)=>{const gt=Math.cos(Ne.rollInRadians),lt=Math.sin(Ne.rollInRadians),ht=si(Ne),dt=Ne.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Xe.properties.get("sky-color"),u_horizon_color:Xe.properties.get("horizon-color"),u_horizon:[(Ne.width/2-ht*lt)*Ke,(Ne.height/2+ht*gt)*Ke],u_horizon_normal:[-lt,gt],u_sky_horizon_blend:Xe.properties.get("sky-horizon-blend")*Ne.height/2*Ke,u_sky_blend:dt}})(fe,re.style.map.transform,re.pixelRatio),Ee=new Gi(Te.LEQUAL,Gi.ReadWrite,[0,1]),Fe=on.disabled,Ge=re.colorModeForRenderPass(),Oe=re.useProgram("sky"),Ve=mp(ye,fe);Oe.draw(ye,Te.TRIANGLES,Ee,Fe,Ge,sn.disabled,Me,null,void 0,"sky",Ve.vertexBuffer,Ve.indexBuffer,Ve.segments)})(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=P.length-1;this.currentLayer>=0;this.currentLayer--){const re=this.style._layers[P[this.currentLayer]],fe=z[re.source],ye=H[re.source];this._renderTileClippingMasks(re,ye,!1),this.renderLayer(this,fe,re,ye,J)}this.renderPass="translucent";let se=!1;for(this.currentLayer=0;this.currentLayer<P.length;this.currentLayer++){const re=this.style._layers[P[this.currentLayer]],fe=z[re.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(re,J))continue;this.opaquePassEnabledForLayer()||se||(se=!0,J.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ye=(re.type==="symbol"?Z:W)[re.source];this._renderTileClippingMasks(re,H[re.source],!!this.renderToTexture),this.renderLayer(this,fe,re,ye,J)}if(J.isRenderingGlobe&&(function(re,fe,ye){const Te=re.context,Me=Te.gl,Ee=re.useProgram("atmosphere"),Fe=new Gi(Me.LEQUAL,Gi.ReadOnly,[0,1]),Ge=re.transform,Oe=(function(dt,Ot){const Bt=dt.properties.get("position"),Mt=[-Bt.x,-Bt.y,-Bt.z],$t=r.ar(new Float64Array(16));return dt.properties.get("anchor")==="map"&&(r.bg($t,$t,Ot.rollInRadians),r.bh($t,$t,-Ot.pitchInRadians),r.bg($t,$t,Ot.bearingInRadians),r.bh($t,$t,Ot.center.lat*Math.PI/180),r.bJ($t,$t,-Ot.center.lng*Math.PI/180)),r.cg(Mt,Mt,$t),Mt})(ye,re.transform),Ve=Ge.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Xe=fe.properties.get("atmosphere-blend")*Ve.projectionTransition;if(Xe===0)return;const Ne=na(Ge.worldSize,Ge.center.lat),Ke=Ge.inverseProjectionMatrix,gt=new Float64Array(4);gt[3]=1,r.aH(gt,gt,Ge.modelViewProjectionMatrix),gt[0]/=gt[3],gt[1]/=gt[3],gt[2]/=gt[3],gt[3]=1,r.aH(gt,gt,Ke),gt[0]/=gt[3],gt[1]/=gt[3],gt[2]/=gt[3],gt[3]=1;const lt=((dt,Ot,Bt,Mt,$t)=>({u_sun_pos:dt,u_atmosphere_blend:Ot,u_globe_position:Bt,u_globe_radius:Mt,u_inv_proj_matrix:$t}))(Oe,Xe,[gt[0],gt[1],gt[2]],Ne,Ke),ht=mp(Te,fe);Ee.draw(Te,Me.TRIANGLES,Fe,on.disabled,Rn.alphaBlended,sn.disabled,lt,null,null,"atmosphere",ht.vertexBuffer,ht.indexBuffer,ht.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const re=(function(fe,ye){let Te=null;const Me=Object.values(fe._layers).flatMap((Oe=>Oe.source&&!Oe.isHidden(ye)?[fe.tileManagers[Oe.source]]:[])),Ee=Me.filter((Oe=>Oe.getSource().type==="vector")),Fe=Me.filter((Oe=>Oe.getSource().type!=="vector")),Ge=Oe=>{(!Te||Te.getSource().maxzoom<Oe.getSource().maxzoom)&&(Te=Oe)};return Ee.forEach((Oe=>Ge(Oe))),Te||Fe.forEach((Oe=>Ge(Oe))),Te})(this.style,this.transform.zoom);re&&(function(fe,ye,Te){for(let Me=0;Me<Te.length;Me++)Gm(fe,ye,Te[Me])})(this,re,re.getVisibleCoordinates())}this.options.showPadding&&(function(re){const fe=re.transform.padding;fp(re,re.transform.height-(fe.top||0),3,jm),fp(re,fe.bottom||0,3,Vm),pp(re,fe.left||0,3,Hm),pp(re,re.transform.width-(fe.right||0),3,Um);const ye=re.transform.centerPoint;(function(Te,Me,Ee,Fe){Kh(Te,Me-1,Ee-10,2,20,Fe),Kh(Te,Me-10,Ee-1,20,2,Fe)})(re,ye.x,re.transform.height-ye.y,Ll)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(c){if(!this.style||!this.style.map||!this.style.map.terrain)return;const f=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let S=this.terrainFacilitator.dirty;S||(S=c?!r.cj(f,y):!r.ck(f,y)),S||(S=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),S&&(r.cl(f,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(P,z){const H=P.context,W=H.gl,Z=P.transform,J=Rn.unblended,se=new Gi(W.LEQUAL,Gi.ReadWrite,[0,1]),re=z.tileManager.getRenderableTiles(),fe=P.useProgram("terrainDepth");H.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),H.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),H.clear({color:r.bp.transparent,depth:1});for(const ye of re){const Te=z.getTerrainMesh(ye.tileID),Me=z.getTerrainData(ye.tileID),Ee=Z.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Fe={u_ele_delta:z.getMeshFrameDelta(Z.zoom)};fe.draw(H,W.TRIANGLES,se,on.disabled,J,sn.backCCW,Fe,Me,Ee,"terrain",Te.vertexBuffer,Te.indexBuffer,Te.segments)}H.bindFramebuffer.set(null),H.viewport.set([0,0,P.width,P.height])})(this,this.style.map.terrain),(function(P,z){const H=P.context,W=H.gl,Z=P.transform,J=Rn.unblended,se=new Gi(W.LEQUAL,Gi.ReadWrite,[0,1]),re=z.getCoordsTexture(),fe=z.tileManager.getRenderableTiles(),ye=P.useProgram("terrainCoords");H.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),H.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),H.clear({color:r.bp.transparent,depth:1}),z.coordsIndex=[];for(const Te of fe){const Me=z.getTerrainMesh(Te.tileID),Ee=z.getTerrainData(Te.tileID);H.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,re.texture);const Fe={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(Z.zoom)},Ge=Z.getProjectionData({overscaledTileID:Te.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ye.draw(H,W.TRIANGLES,se,on.disabled,J,sn.backCCW,Fe,Ee,Ge,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments),z.coordsIndex.push(Te.tileID.key)}H.bindFramebuffer.set(null),H.viewport.set([0,0,P.width,P.height])})(this,this.style.map.terrain))}renderLayer(c,f,y,S,P){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(S||[]).length)&&(this.id=y.id,r.cm(y)?(function(z,H,W,Z,J,se){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:re}=se,fe=on.disabled,ye=z.colorModeForRenderPass();(W._unevaluatedLayout.hasValue("text-variable-anchor")||W._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Te,Me,Ee,Fe,Ge,Oe,Ve,Xe,Ne){const Ke=Me.transform,gt=Me.style.map.terrain,lt=Ge==="map",ht=Oe==="map";for(const dt of Te){const Ot=Fe.getTile(dt),Bt=Ot.getBucket(Ee);if(!Bt||!Bt.text||!Bt.text.segments.get().length)continue;const Mt=r.ay(Bt.textSizeData,Ke.zoom),$t=r.aN(Ot,1,Me.transform.zoom),Hi=Xi(lt,Me.transform,$t),Fn=Ee.layout.get("icon-text-fit")!=="none"&&Bt.hasIconData();if(Mt){const ca=Math.pow(2,Ke.zoom-Ot.tileID.overscaledZ),Zn=gt?(pa,Kn)=>gt.getElevation(dt,pa,Kn):null;Wx(Bt,lt,ht,Ne,Ke,Hi,ca,Mt,Fn,r.aO(Ke,Ot,Ve,Xe),dt.toUnwrapped(),Zn)}}})(Z,z,W,H,W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),J),W.paint.get("icon-opacity").constantOr(1)!==0&&Xh(z,H,W,Z,!1,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),W.layout.get("icon-rotation-alignment"),W.layout.get("icon-pitch-alignment"),W.layout.get("icon-keep-upright"),fe,ye,re),W.paint.get("text-opacity").constantOr(1)!==0&&Xh(z,H,W,Z,!0,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.layout.get("text-keep-upright"),fe,ye,re),H.map.showCollisionBoxes&&(nc(z,H,W,Z,!0),nc(z,H,W,Z,!1))})(c,f,y,S,this.style.placement.variableOffsets,P):r.cn(y)?(function(z,H,W,Z,J){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:se}=J,re=W.paint.get("circle-opacity"),fe=W.paint.get("circle-stroke-width"),ye=W.paint.get("circle-stroke-opacity"),Te=!W.layout.get("circle-sort-key").isConstant();if(re.constantOr(1)===0&&(fe.constantOr(1)===0||ye.constantOr(1)===0))return;const Me=z.context,Ee=Me.gl,Fe=z.transform,Ge=z.getDepthModeForSublayer(0,Gi.ReadOnly),Oe=on.disabled,Ve=z.colorModeForRenderPass(),Xe=[],Ne=Fe.getCircleRadiusCorrection();for(let Ke=0;Ke<Z.length;Ke++){const gt=Z[Ke],lt=H.getTile(gt),ht=lt.getBucket(W);if(!ht)continue;const dt=W.paint.get("circle-translate"),Ot=W.paint.get("circle-translate-anchor"),Bt=r.aO(Fe,lt,dt,Ot),Mt=ht.programConfigurations.get(W.id),$t=z.useProgram("circle",Mt),Hi=ht.layoutVertexBuffer,Fn=ht.indexBuffer,ca=z.style.map.terrain&&z.style.map.terrain.getTerrainData(gt),Zn={programConfiguration:Mt,program:$t,layoutVertexBuffer:Hi,indexBuffer:Fn,uniformValues:Hh(z,lt,W,Bt,Ne),terrainData:ca,projectionData:Fe.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!se,applyTerrainMatrix:!0})};if(Te){const pa=ht.segments.get();for(const Kn of pa)Xe.push({segments:new r.aX([Kn]),sortKey:Kn.sortKey,state:Zn})}else Xe.push({segments:ht.segments,sortKey:0,state:Zn})}Te&&Xe.sort(((Ke,gt)=>Ke.sortKey-gt.sortKey));for(const Ke of Xe){const{programConfiguration:gt,program:lt,layoutVertexBuffer:ht,indexBuffer:dt,uniformValues:Ot,terrainData:Bt,projectionData:Mt}=Ke.state;lt.draw(Me,Ee.TRIANGLES,Ge,Oe,Ve,sn.backCCW,Ot,Bt,Mt,W.id,ht,dt,Ke.segments,W.paint,z.transform.zoom,gt)}})(c,f,y,S,P):r.co(y)?(function(z,H,W,Z,J){if(W.paint.get("heatmap-opacity")===0)return;const se=z.context,{isRenderingToTexture:re,isRenderingGlobe:fe}=J;if(z.style.map.terrain){for(const ye of Z){const Te=H.getTile(ye);H.hasRenderableParent(ye)||(z.renderPass==="offscreen"?Om(z,Te,W,ye,fe):z.renderPass==="translucent"&&zm(z,W,ye,re,fe))}se.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?(function(ye,Te,Me,Ee){const Fe=ye.context,Ge=Fe.gl,Oe=ye.transform,Ve=on.disabled,Xe=new Rn([Ge.ONE,Ge.ONE],r.bp.transparent,[!0,!0,!0,!0]);(function(Ne,Ke,gt){const lt=Ne.gl;Ne.activeTexture.set(lt.TEXTURE1),Ne.viewport.set([0,0,Ke.width/4,Ke.height/4]);let ht=gt.heatmapFbos.get(r.cd);ht?(lt.bindTexture(lt.TEXTURE_2D,ht.colorAttachment.get()),Ne.bindFramebuffer.set(ht.framebuffer)):(ht=Yh(Ne,Ke.width/4,Ke.height/4),gt.heatmapFbos.set(r.cd,ht))})(Fe,ye,Me),Fe.clear({color:r.bp.transparent});for(let Ne=0;Ne<Ee.length;Ne++){const Ke=Ee[Ne];if(Te.hasRenderableParent(Ke))continue;const gt=Te.getTile(Ke),lt=gt.getBucket(Me);if(!lt)continue;const ht=lt.programConfigurations.get(Me.id),dt=ye.useProgram("heatmap",ht),Ot=Oe.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Bt=Oe.getCircleRadiusCorrection();dt.draw(Fe,Ge.TRIANGLES,Gi.disabled,Ve,Xe,sn.backCCW,Ys(gt,Oe.zoom,Me.paint.get("heatmap-intensity"),Bt),null,Ot,Me.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,Me.paint,Oe.zoom,ht)}Fe.viewport.set([0,0,ye.width,ye.height])})(z,H,W,Z):z.renderPass==="translucent"&&(function(ye,Te){const Me=ye.context,Ee=Me.gl;Me.setColorMode(ye.colorModeForRenderPass());const Fe=Te.heatmapFbos.get(r.cd);Fe&&(Me.activeTexture.set(Ee.TEXTURE0),Ee.bindTexture(Ee.TEXTURE_2D,Fe.colorAttachment.get()),Me.activeTexture.set(Ee.TEXTURE1),Ld(Me,Te).bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),ye.useProgram("heatmapTexture").draw(Me,Ee.TRIANGLES,Gi.disabled,on.disabled,ye.colorModeForRenderPass(),sn.disabled,gn(ye,Te,0,1),null,null,Te.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments,Te.paint,ye.transform.zoom))})(z,W)})(c,f,y,S,P):r.cp(y)?(function(z,H,W,Z,J){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:se}=J,re=W.paint.get("line-opacity"),fe=W.paint.get("line-width");if(re.constantOr(1)===0||fe.constantOr(1)===0)return;const ye=z.getDepthModeForSublayer(0,Gi.ReadOnly),Te=z.colorModeForRenderPass(),Me=W.paint.get("line-dasharray"),Ee=Me.constantOr(1),Fe=W.paint.get("line-pattern"),Ge=Fe.constantOr(1),Oe=W.paint.get("line-gradient"),Ve=W.getCrossfadeParameters();let Xe;Xe=Ge?"linePattern":Ee&&Oe?"lineGradientSDF":Ee?"lineSDF":Oe?"lineGradient":"line";const Ne=z.context,Ke=Ne.gl,gt=z.transform;let lt=!0;for(const ht of Z){const dt=H.getTile(ht);if(Ge&&!dt.patternsLoaded())continue;const Ot=dt.getBucket(W);if(!Ot)continue;const Bt=Ot.programConfigurations.get(W.id),Mt=z.context.program.get(),$t=z.useProgram(Xe,Bt),Hi=lt||$t.program!==Mt,Fn=z.style.map.terrain&&z.style.map.terrain.getTerrainData(ht),ca=Fe.constantOr(null),Zn=Me&&Me.constantOr(null);if(ca&&dt.imageAtlas){const kr=dt.imageAtlas,$a=kr.patternPositions[ca.to.toString()],Na=kr.patternPositions[ca.from.toString()];$a&&Na&&Bt.setConstantPatternPositions($a,Na)}else if(Zn){const kr=W.layout.get("line-cap")==="round",$a=z.lineAtlas.getDash(Zn.to,kr),Na=z.lineAtlas.getDash(Zn.from,kr);Bt.setConstantDashPositions($a,Na)}const pa=gt.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),Kn=gt.getPixelScale();let Ma;Ge?(Ma=M(z,dt,W,Kn,Ve),Bm(Ne,Ke,dt,Bt,Ve)):Ee&&Oe?(Ma=V(z,dt,W,Kn,Ve,Ot.lineClipsArray.length),Ps(z,H,Ne,Ke,W,Ot,ht,Bt,Ve)):Ee?(Ma=R(z,dt,W,Kn,Ve),Fa(z,Ne,Ke,Bt,Hi,Ve)):Oe?(Ma=T(z,dt,W,Kn,Ot.lineClipsArray.length),ac(z,H,Ne,Ke,W,Ot,ht)):Ma=w(z,dt,W,Kn);const ga=z.stencilModeForClipping(ht);$t.draw(Ne,Ke.TRIANGLES,ye,ga,Te,sn.disabled,Ma,Fn,pa,W.id,Ot.layoutVertexBuffer,Ot.indexBuffer,Ot.segments,W.paint,z.transform.zoom,Bt,Ot.layoutVertexBuffer2),lt=!1}})(c,f,y,S,P):r.cq(y)?(function(z,H,W,Z,J){const se=W.paint.get("fill-color"),re=W.paint.get("fill-opacity");if(re.constantOr(1)===0)return;const{isRenderingToTexture:fe}=J,ye=z.colorModeForRenderPass(),Te=W.paint.get("fill-pattern"),Me=z.opaquePassEnabledForLayer()&&!Te.constantOr(1)&&se.constantOr(r.bp.transparent).a===1&&re.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===Me){const Ee=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?Gi.ReadWrite:Gi.ReadOnly);qh(z,H,W,Z,Ee,ye,!1,fe)}if(z.renderPass==="translucent"&&W.paint.get("fill-antialias")){const Ee=z.getDepthModeForSublayer(W.getPaintProperty("fill-outline-color")?2:0,Gi.ReadOnly);qh(z,H,W,Z,Ee,ye,!0,fe)}})(c,f,y,S,P):r.cr(y)?(function(z,H,W,Z,J){const se=W.paint.get("fill-extrusion-opacity");if(se===0)return;const{isRenderingToTexture:re}=J;if(z.renderPass==="translucent"){const fe=new Gi(z.context.gl.LEQUAL,Gi.ReadWrite,z.depthRangeFor3D);if(se!==1||W.paint.get("fill-extrusion-pattern").constantOr(1))Rd(z,H,W,Z,fe,on.disabled,Rn.disabled,re),Rd(z,H,W,Z,fe,z.stencilModeFor3D(),z.colorModeForRenderPass(),re);else{const ye=z.colorModeForRenderPass();Rd(z,H,W,Z,fe,on.disabled,ye,re)}}})(c,f,y,S,P):r.cs(y)?(function(z,H,W,Z,J){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:se}=J,re=z.context,fe=z.style.projection.useSubdivision,ye=z.getDepthModeForSublayer(0,Gi.ReadOnly),Te=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(Me,Ee,Fe,Ge,Oe,Ve,Xe){const Ne=Me.context,Ke=Ne.gl;for(const gt of Fe){const lt=Ee.getTile(gt),ht=lt.dem;if(!ht||!ht.data||!lt.needsHillshadePrepare)continue;const dt=ht.dim,Ot=ht.stride,Bt=ht.getPixels();if(Ne.activeTexture.set(Ke.TEXTURE1),Ne.pixelStoreUnpackPremultiplyAlpha.set(!1),lt.demTexture=lt.demTexture||Me.getTileTexture(Ot),lt.demTexture){const $t=lt.demTexture;$t.update(Bt,{premultiply:!1}),$t.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE)}else lt.demTexture=new r.T(Ne,Bt,Ke.RGBA,{premultiply:!1}),lt.demTexture.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE);Ne.activeTexture.set(Ke.TEXTURE0);let Mt=lt.fbo;if(!Mt){const $t=new r.T(Ne,{width:dt,height:dt,data:null},Ke.RGBA);$t.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),Mt=lt.fbo=Ne.createFramebuffer(dt,dt,!0,!1),Mt.colorAttachment.set($t.texture)}Ne.bindFramebuffer.set(Mt.framebuffer),Ne.viewport.set([0,0,dt,dt]),Me.useProgram("hillshadePrepare").draw(Ne,Ke.TRIANGLES,Oe,Ve,Xe,sn.disabled,ge(lt.tileID,ht),null,null,Ge.id,Me.rasterBoundsBuffer,Me.quadTriangleIndexBuffer,Me.rasterBoundsSegments),lt.needsHillshadePrepare=!1}})(z,H,Z,W,ye,on.disabled,Te),re.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if(fe){const[Me,Ee,Fe]=z.stencilConfigForOverlapTwoPass(Z);Pl(z,H,W,Fe,Me,ye,Te,!1,se),Pl(z,H,W,Fe,Ee,ye,Te,!0,se)}else{const[Me,Ee]=z.getStencilConfigForOverlapAndUpdateStencilID(Z);Pl(z,H,W,Ee,Me,ye,Te,!1,se)}})(c,f,y,S,P):r.ct(y)?(function(z,H,W,Z,J){if(z.renderPass!=="translucent"||!Z.length)return;const{isRenderingToTexture:se}=J,re=z.style.projection.useSubdivision,fe=z.getDepthModeForSublayer(0,Gi.ReadOnly),ye=z.colorModeForRenderPass();if(re){const[Te,Me,Ee]=z.stencilConfigForOverlapTwoPass(Z);Zh(z,H,W,Ee,Te,fe,ye,!1,se),Zh(z,H,W,Ee,Me,fe,ye,!0,se)}else{const[Te,Me]=z.getStencilConfigForOverlapAndUpdateStencilID(Z);Zh(z,H,W,Me,Te,fe,ye,!1,se)}})(c,f,y,S,P):r.bU(y)?(function(z,H,W,Z,J){if(z.renderPass!=="translucent"||W.paint.get("raster-opacity")===0||!Z.length)return;const{isRenderingToTexture:se}=J,re=H.getSource(),fe=z.style.projection.useSubdivision;if(re instanceof un)$c(z,H,W,Z,null,!1,!1,re.tileCoords,re.flippedWindingOrder,se);else if(fe){const[ye,Te,Me]=z.stencilConfigForOverlapTwoPass(Z);$c(z,H,W,Me,ye,!1,!0,rc,!1,se),$c(z,H,W,Me,Te,!0,!0,rc,!1,se)}else{const[ye,Te]=z.getStencilConfigForOverlapAndUpdateStencilID(Z);$c(z,H,W,Te,ye,!1,!0,rc,!1,se)}})(c,f,y,S,P):r.cu(y)?(function(z,H,W,Z,J){const se=W.paint.get("background-color"),re=W.paint.get("background-opacity");if(re===0)return;const{isRenderingToTexture:fe}=J,ye=z.context,Te=ye.gl,Me=z.style.projection,Ee=z.transform,Fe=Ee.tileSize,Ge=W.paint.get("background-pattern");if(z.isPatternMissing(Ge))return;const Oe=!Ge&&se.a===1&&re===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==Oe)return;const Ve=on.disabled,Xe=z.getDepthModeForSublayer(0,Oe==="opaque"?Gi.ReadWrite:Gi.ReadOnly),Ne=z.colorModeForRenderPass(),Ke=z.useProgram(Ge?"backgroundPattern":"background"),gt=Z||fi(Ee,{tileSize:Fe,terrain:z.style.map.terrain});Ge&&(ye.activeTexture.set(Te.TEXTURE0),z.imageManager.bind(z.context));const lt=W.getCrossfadeParameters();for(const ht of gt){const dt=Ee.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!fe,applyTerrainMatrix:!0}),Ot=Ge?ct(re,z,Ge,{tileID:ht,tileSize:Fe},lt):Ze(re,se),Bt=z.style.map.terrain&&z.style.map.terrain.getTerrainData(ht),Mt=Me.getMeshFromTileID(ye,ht.canonical,!1,!0,"raster");Ke.draw(ye,Te.TRIANGLES,Xe,Ve,Ne,sn.backCCW,Ot,Bt,dt,W.id,Mt.vertexBuffer,Mt.indexBuffer,Mt.segments)}})(c,0,y,S,P):r.cv(y)&&(function(z,H,W,Z){const{isRenderingGlobe:J}=Z,se=z.context,re=W.implementation,fe=z.style.projection,ye=z.transform,Te=ye.getProjectionDataForCustomLayer(J),Me={farZ:ye.farZ,nearZ:ye.nearZ,fov:ye.fov*Math.PI/180,modelViewProjectionMatrix:ye.modelViewProjectionMatrix,projectionMatrix:ye.projectionMatrix,shaderData:{variantName:fe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${fe.shaderPreludeCode.vertexSource}`,define:fe.shaderDefine},defaultProjectionData:Te},Ee=re.renderingMode?re.renderingMode:"2d";if(z.renderPass==="offscreen"){const Fe=re.prerender;Fe&&(z.setCustomLayerDefaults(),se.setColorMode(z.colorModeForRenderPass()),Fe.call(re,se.gl,Me),se.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),se.setColorMode(z.colorModeForRenderPass()),se.setStencilMode(on.disabled);const Fe=Ee==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,Gi.ReadOnly);se.setDepthMode(Fe),re.render(se.gl,Me),se.setDirty(),z.setBaseState(),se.bindFramebuffer.set(null)}})(c,0,y,P))}saveTileTexture(c){const f=this._tileTextures[c.size[0]];f?f.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const f=this._tileTextures[c];return f&&f.length>0?f.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const f=this.imageManager.getPattern(c.from.toString()),y=this.imageManager.getPattern(c.to.toString());return!f||!y}useProgram(c,f,y=!1,S=[]){this.cache=this.cache||{};const P=!!this.style.map.terrain,z=this.style.projection,H=y?Cn.projectionMercator:z.shaderPreludeCode,W=y?An:z.shaderDefine,Z=c+(f?f.cacheKey:"")+`/${y?ts:z.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(P?"/terrain":"")+(S?`/${S.join("/")}`:"");return this.cache[Z]||(this.cache[Z]=new ec(this.context,Cn[c],f,Ht[c],this._showOverdrawInspector,P,H,W,S)),this.cache[Z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var c,f;if(this._tileTextures){for(const y in this._tileTextures){const S=this._tileTextures[y];if(S)for(const P of S)P.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((c=this.tileExtentMesh.vertexBuffer)===null||c===void 0||c.destroy()),this.tileExtentMesh&&((f=this.tileExtentMesh.indexBuffer)===null||f===void 0||f.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const y in this.cache){const S=this.cache[y];S&&S.program&&this.context.gl.deleteProgram(S.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:c,drawingBufferHeight:f}=this.context.gl;return this.width!==c||this.height!==f}}function _p(I,c){let f,y=!1,S=null,P=null;const z=()=>{S=null,y&&(I.apply(P,f),S=setTimeout(z,c),y=!1)};return(...H)=>(y=!0,P=this,f=H,S||z(),S)}class xp{constructor(c){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let y;return f.split("&").map((S=>S.split("="))).forEach((S=>{S[0]===this._hashName&&(y=S)})),(y&&y[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(!this._isValidHash(f))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:y,pitch:+(f[4]||0)}),!0},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{const f=this._getCurrentHash();if(f.length===0)return;const y=f.join("/");let S=y;S.split("&").length>0&&(S=S.split("&")[0]),this._hashName&&(S=`${this._hashName}=${y}`);let P=window.location.hash.replace(S,"");P.startsWith("#&")?P=P.slice(0,1)+P.slice(2):P==="#"&&(P="");let z=window.location.href.replace(/(#.+)?$/,P);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=_p(this._updateHashUnthrottled,300),this._hashName=c&&encodeURIComponent(c)}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(c){const f=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,S=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,S),z=Math.round(f.lng*P)/P,H=Math.round(f.lat*P)/P,W=this._map.getBearing(),Z=this._map.getPitch();let J="";if(J+=c?`/${z}/${H}/${y}`:`${y}/${H}/${z}`,(W||Z)&&(J+="/"+Math.round(10*W)/10),Z&&(J+=`/${Math.round(Z)}`),this._hashName){const se=this._hashName;let re=!1;const fe=window.location.hash.slice(1).split("&").map((ye=>{const Te=ye.split("=")[0];return Te===se?(re=!0,`${Te}=${J}`):ye})).filter((ye=>ye));return re||fe.push(`${se}=${J}`),`#${fe.join("&")}`}return`#${J}`}_isValidHash(c){if(c.length<3||c.some(isNaN))return!1;try{new r.V(+c[2],+c[1])}catch{return!1}const f=+c[0],y=+(c[3]||0),S=+(c[4]||0);return f>=this._map.getMinZoom()&&f<=this._map.getMaxZoom()&&y>=-180&&y<=180&&S>=this._map.getMinPitch()&&S<=this._map.getMaxPitch()}}const Dl={linearity:.3,easing:r.cw(0,0,.3,1)},$m=r.e({deceleration:2500,maxSpeed:1400},Dl),qs=r.e({deceleration:20,maxSpeed:1400},Dl),fo=r.e({deceleration:1e3,maxSpeed:360},Dl),Xm=r.e({deceleration:1e3,maxSpeed:90},Dl),po=r.e({deceleration:1e3,maxSpeed:360},Dl);class $x{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:O(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,f=O();for(;c.length>0&&f-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,roll:0,pan:new r.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:P}of this._inertiaBuffer)f.zoom+=P.zoomDelta||0,f.bearing+=P.bearingDelta||0,f.pitch+=P.pitchDelta||0,f.roll+=P.rollDelta||0,P.panDelta&&f.pan._add(P.panDelta),P.around&&(f.around=P.around),P.pinchAround&&(f.pinchAround=P.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(f.pan.mag()){const P=Jh(f.pan.mag(),y,r.e({},$m,c||{})),z=f.pan.mult(P.amount/f.pan.mag()),H=this._map.cameraHelper.handlePanInertia(z,this._map.transform);S.center=H.easingCenter,S.offset=H.easingOffset,Qh(S,P)}if(f.zoom){const P=Jh(f.zoom,y,qs);S.zoom=this._map.transform.zoom+P.amount,Qh(S,P)}if(f.bearing){const P=Jh(f.bearing,y,fo);S.bearing=this._map.transform.bearing+r.an(P.amount,-179,179),Qh(S,P)}if(f.pitch){const P=Jh(f.pitch,y,Xm);S.pitch=this._map.transform.pitch+P.amount,Qh(S,P)}if(f.roll){const P=Jh(f.roll,y,po);S.roll=this._map.transform.roll+r.an(P.amount,-179,179),Qh(S,P)}if(S.zoom||S.bearing){const P=f.pinchAround===void 0?f.around:f.pinchAround;S.around=P?this._map.unproject(P):this._map.getCenter()}return this.clear(),r.e(S,{noMoveStart:!0})}}function Qh(I,c){(!I.duration||I.duration<c.duration)&&(I.duration=c.duration,I.easing=c.easing)}function Jh(I,c,f){const{maxSpeed:y,linearity:S,deceleration:P}=f,z=r.an(I*S/(c/1e3),-y,y),H=Math.abs(z)/(P*S);return{easing:f.easing,duration:1e3*H,amount:z*(H/2)}}class Sr extends r.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,y,S={}){y=y instanceof MouseEvent?y:new MouseEvent(c,y);const P=N.mousePos(f.getCanvas(),y),z=f.unproject(P);super(c,r.e({point:P,lngLat:z,originalEvent:y},S)),this._defaultPrevented=!1,this.target=f}}class eu extends r.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,y){const S=c==="touchend"?y.changedTouches:y.touches,P=N.touchPos(f.getCanvasContainer(),S),z=P.map((W=>f.unproject(W))),H=P.reduce(((W,Z,J,se)=>W.add(Z.div(se.length))),new r.P(0,0));super(c,{points:P,point:H,lngLats:z,lngLat:f.unproject(H),originalEvent:y}),this._defaultPrevented=!1}}class Ym extends r.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,y){super(c,{originalEvent:y}),this._defaultPrevented=!1}}class Xx{constructor(c,f){this._map=c,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new Ym(c.type,this._map,c))}mousedown(c,f){return this._mousedownPos=f,this._firePreventable(new Sr(c.type,this._map,c))}mouseup(c){this._map.fire(new Sr(c.type,this._map,c))}click(c,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new Sr(c.type,this._map,c))}dblclick(c){return this._firePreventable(new Sr(c.type,this._map,c))}mouseover(c){this._map.fire(new Sr(c.type,this._map,c))}mouseout(c){this._map.fire(new Sr(c.type,this._map,c))}touchstart(c){return this._firePreventable(new eu(c.type,this._map,c))}touchmove(c){this._map.fire(new eu(c.type,this._map,c))}touchend(c){this._map.fire(new eu(c.type,this._map,c))}touchcancel(c){this._map.fire(new eu(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yx{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new Sr(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Sr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new Sr(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xc{constructor(c){this._map=c}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(c){return this.transform.screenPointToLocation(r.P.convert(c),this._map.terrain)}}class Yc{constructor(c,f){this._map=c,this._tr=new Xc(c),this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,f){this.isEnabled()&&c.shiftKey&&c.button===0&&(N.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(c,f){if(!this._active)return;const y=f;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=y,this._box||(this._box=N.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",c));const P=Math.min(S.x,y.x),z=Math.max(S.x,y.x),H=Math.min(S.y,y.y),W=Math.max(S.y,y.y);N.setTransform(this._box,`translate(${P}px,${H}px)`),this._box.style.width=z-P+"px",this._box.style.height=W-H+"px"}mouseupWindow(c,f){if(!this._active||c.button!==0)return;const y=this._startPos,S=f;if(this.reset(),N.suppressClick(),y.x!==S.x||y.y!==S.y)return this._map.fire(new r.l("boxzoomend",{originalEvent:c})),{cameraAnimation:P=>P.fitScreenCoordinates(y,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,f){return this._map.fire(new r.l(c,{originalEvent:f}))}}function go(I,c){if(I.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${c.length}`);const f={};for(let y=0;y<I.length;y++)f[I[y].identifier]=c[y];return f}class ti{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,f,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),y.length===this.numTouches&&(this.centroid=(function(S){const P=new r.P(0,0);for(const z of S)P._add(z);return P.div(S.length)})(f),this.touches=go(y,f)))}touchmove(c,f,y){if(this.aborted||!this.centroid)return;const S=go(y,f);for(const P in this.touches){const z=S[P];(!z||z.dist(this.touches[P])>30)&&(this.aborted=!0)}}touchend(c,f,y){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Od{constructor(c){this.singleTap=new ti(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,f,y){this.singleTap.touchstart(c,f,y)}touchmove(c,f,y){this.singleTap.touchmove(c,f,y)}touchend(c,f,y){const S=this.singleTap.touchend(c,f,y);if(S){const P=c.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(S)<30;if(P&&z||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class yp{constructor(c){this._tr=new Xc(c),this._zoomIn=new Od({numTouches:1,numTaps:2}),this._zoomOut=new Od({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,f,y){this._zoomIn.touchstart(c,f,y),this._zoomOut.touchstart(c,f,y)}touchmove(c,f,y){this._zoomIn.touchmove(c,f,y),this._zoomOut.touchmove(c,f,y)}touchend(c,f,y){const S=this._zoomIn.touchend(c,f,y),P=this._zoomOut.touchend(c,f,y),z=this._tr;return S?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:H=>H.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(S)},{originalEvent:c})}):P?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:H=>H.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(P)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qc{constructor(c){this._enabled=!!c.enable,this._moveStateManager=c.moveStateManager,this._clickTolerance=c.clickTolerance||1,this._moveFunction=c.move,this._activateOnStart=!!c.activateOnStart,c.assignEvents(this),this.reset()}reset(c){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(c)}_move(...c){const f=this._moveFunction(...c);if(f.bearingDelta||f.pitchDelta||f.rollDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(c,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(c)&&(this._moveStateManager.startMove(c),this._lastPoint=Array.isArray(f)?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(c,f){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(c.preventDefault(),!this._moveStateManager.isValidMoveEvent(c))return void this.reset(c);const S=Array.isArray(f)?f[0]:f;return!this._moved&&S.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=S,this._move(y,S))}dragEnd(c){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(c)&&(this._moved&&N.suppressClick(),this.reset(c))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const tu=0,iu=2,vp={[tu]:1,[iu]:2};class nu{constructor(c){this._correctEvent=c.checkCorrectEvent}startMove(c){const f=N.mouseButton(c);this._eventButton=f}endMove(c){delete this._eventButton}isValidStartEvent(c){return this._correctEvent(c)}isValidMoveEvent(c){return!(function(f,y){const S=vp[y];return f.buttons===void 0||(f.buttons&S)!==S})(c,this._eventButton)}isValidEndEvent(c){return N.mouseButton(c)===this._eventButton}}class bp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(c){return c.targetTouches.length===1}_isSameTouchEvent(c){return c.targetTouches[0].identifier===this._firstTouch}startMove(c){this._firstTouch=c.targetTouches[0].identifier}endMove(c){delete this._firstTouch}isValidStartEvent(c){return this._isOneFingerTouch(c)}isValidMoveEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}isValidEndEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}}class qm{constructor(c=new nu({checkCorrectEvent:()=>!0}),f=new bp){this.mouseMoveStateManager=c,this.oneFingerTouchMoveStateManager=f}_executeRelevantHandler(c,f,y){return c instanceof MouseEvent?f(c):typeof TouchEvent<"u"&&c instanceof TouchEvent?y(c):void 0}startMove(c){this._executeRelevantHandler(c,(f=>this.mouseMoveStateManager.startMove(f)),(f=>this.oneFingerTouchMoveStateManager.startMove(f)))}endMove(c){this._executeRelevantHandler(c,(f=>this.mouseMoveStateManager.endMove(f)),(f=>this.oneFingerTouchMoveStateManager.endMove(f)))}isValidStartEvent(c){return this._executeRelevantHandler(c,(f=>this.mouseMoveStateManager.isValidStartEvent(f)),(f=>this.oneFingerTouchMoveStateManager.isValidStartEvent(f)))}isValidMoveEvent(c){return this._executeRelevantHandler(c,(f=>this.mouseMoveStateManager.isValidMoveEvent(f)),(f=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(f)))}isValidEndEvent(c){return this._executeRelevantHandler(c,(f=>this.mouseMoveStateManager.isValidEndEvent(f)),(f=>this.oneFingerTouchMoveStateManager.isValidEndEvent(f)))}}const Zc=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=c=>{c.preventDefault()}};class qx{constructor(c,f){this._clickTolerance=c.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new r.P(0,0)}_shouldBePrevented(c){return c<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(c,f,y){return this._calculateTransform(c,f,y)}touchmove(c,f,y){if(this._active){if(!this._shouldBePrevented(y.length))return c.preventDefault(),this._calculateTransform(c,f,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",c)}}touchend(c,f,y){this._calculateTransform(c,f,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,f,y){y.length>0&&(this._active=!0);const S=go(y,f),P=new r.P(0,0),z=new r.P(0,0);let H=0;for(const Z in S){const J=S[Z],se=this._touches[Z];se&&(P._add(J),z._add(J.sub(se)),H++,S[Z]=J)}if(this._touches=S,this._shouldBePrevented(H)||!z.mag())return;const W=z.div(H);return this._sum._add(W),this._sum.mag()<this._clickTolerance?void 0:{around:P.div(H),panDelta:W}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(c,f,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([f[0],f[1]]))}touchmove(c,f,y){if(!this._firstTwoTouches)return;c.preventDefault();const[S,P]=this._firstTwoTouches,z=Fd(y,f,S),H=Fd(y,f,P);if(!z||!H)return;const W=this._aroundCenter?null:z.add(H).div(2);return this._move([z,H],W,c)}touchend(c,f,y){if(!this._firstTwoTouches)return;const[S,P]=this._firstTwoTouches,z=Fd(y,f,S),H=Fd(y,f,P);z&&H||(this._active&&N.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Fd(I,c,f){for(let y=0;y<I.length;y++)if(I[y].identifier===f)return c[y]}function Zm(I,c){return Math.log(I/c)/Math.LN2}class wp extends zd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,f){const y=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Zm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zm(this._distance,y),pinchAround:f}}}function Km(I,c){return 180*I.angleWith(c)/Math.PI}class Sp extends zd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,f,y){const S=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Km(this._vector,S),pinchAround:f}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const f=25/(Math.PI*this._minDiameter)*360,y=Km(c,this._startVector);return Math.abs(y)<f}}function kp(I){return Math.abs(I.y)>Math.abs(I.x)}class Qm extends zd{constructor(c){super(),this._currentTouchCount=0,this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,f,y){super.touchstart(c,f,y),this._currentTouchCount=y.length}_start(c){this._lastPoints=c,kp(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,f,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const S=c[0].sub(this._lastPoints[0]),P=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,P,y.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(S.y+P.y)/2*-.5}):void 0}gestureBeginsVertically(c,f,y){if(this._valid!==void 0)return this._valid;const S=c.mag()>=2,P=f.mag()>=2;if(!S&&!P)return;if(!S||!P)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const z=c.y>0==f.y>0;return kp(c)&&kp(f)&&z}}const Rl={panStep:100,bearingStep:15,pitchStep:10};class Wn{constructor(c){this._tr=new Xc(c);const f=Rl;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let f=0,y=0,S=0,P=0,z=0;switch(c.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:c.shiftKey?y=-1:(c.preventDefault(),P=-1);break;case 39:c.shiftKey?y=1:(c.preventDefault(),P=1);break;case 38:c.shiftKey?S=1:(c.preventDefault(),z=-1);break;case 40:c.shiftKey?S=-1:(c.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(y=0,S=0),{cameraAnimation:H=>{const W=this._tr;H.easeTo({duration:300,easeId:"keyboardHandler",easing:Zx,zoom:f?Math.round(W.zoom)+f*(c.shiftKey?2:1):W.zoom,bearing:W.bearing+y*this._bearingStep,pitch:W.pitch+S*this._pitchStep,offset:[-P*this._panStep,-z*this._panStep],center:W.center},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Zx(I){return I*(2-I)}const au=4.000244140625,Bd=1/450;class Nd{constructor(c,f){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=c,this._tr=new Xc(c),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bd}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(c){return!!this._map.cooperativeGestures.isEnabled()&&!(c.ctrlKey||this._map.cooperativeGestures.isBypassed(c))}wheel(c){if(!this.isEnabled())return;if(this._shouldBePrevented(c))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",c);let f=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const y=O(),S=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,f!==0&&f%au==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(S*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),c.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=c,this._delta-=f,this._active||this._start(c)),c.preventDefault()}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=N.mousePos(this._map.getCanvas(),c),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(r.V.convert(y.center)):f,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const H=c.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=H),typeof this._targetZoom=="number"&&(this._targetZoom+=H)}if(this._delta!==0){const H=this._type==="wheel"&&Math.abs(this._delta)>au?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&W!==0&&(W=1/W);const Z=typeof this._targetZoom!="number"?c.scale:r.aq(this._targetZoom);this._targetZoom=c.applyConstrain(c.getCameraLngLat(),r.at(Z*W)).zoom,this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom!="number"?c.zoom:this._targetZoom,y=this._startZoom,S=this._easing;let P,z=!1;if(this._type==="wheel"&&y&&S){const H=O()-this._lastWheelEventTime,W=Math.min((H+5)/200,1),Z=S(W);P=r.G.number(y,f,Z),W<1?this._frameId||(this._frameId=!0):z=!0}else P=f,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=P,{noInertia:!0,needsRenderFrame:!z,zoomDelta:P-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let f=r.cy;if(this._prevEase){const y=this._prevEase,S=(O()-y.start)/y.duration,P=y.easing(S+.01)-y.easing(S),z=.27/Math.sqrt(P*P+1e-4)*.01,H=Math.sqrt(.0729-z*z);f=r.cw(z,H,.25,1)}return this._prevEase={start:O(),duration:c,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Cp{constructor(c,f){this._clickZoom=c,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Jm{constructor(c){this._tr=new Xc(c),this.reset()}reset(){this._active=!1}dblclick(c,f){return c.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(c.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class e0{constructor(){this._tap=new Od({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(c,f,y){if(!this._swipePoint)if(this._tapTime){const S=f[0],P=c.timeStamp-this._tapTime<500,z=this._tapPoint.dist(S)<30;P&&z?y.length>0&&(this._swipePoint=S,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(c,f,y)}touchmove(c,f,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const S=f[0],P=S.y-this._swipePoint.y;return this._swipePoint=S,c.preventDefault(),this._active=!0,{zoomDelta:P/128}}}else this._tap.touchmove(c,f,y)}touchend(c,f,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const S=this._tap.touchend(c,f,y);S&&(this._tapTime=c.timeStamp,this._tapPoint=S)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class t0{constructor(c,f,y){this._el=c,this._mousePan=f,this._touchPan=y}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class mo{constructor(c,f,y,S){this._pitchWithRotate=c.pitchWithRotate,this._rollEnabled=c.rollEnabled,this._mouseRotate=f,this._mousePitch=y,this._mouseRoll=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class ru{constructor(c,f,y,S){this._el=c,this._touchZoom=f,this._touchRotate=y,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class hi{constructor(c,f){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=c,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const c=this._map.getCanvasContainer();c.classList.add("maplibregl-cooperative-gestures"),this._container=N.create("div","maplibregl-cooperative-gesture-screen",c);let f=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(f=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),S=document.createElement("div");S.className="maplibregl-desktop-message",S.textContent=f,this._container.appendChild(S);const P=document.createElement("div");P.className="maplibregl-mobile-message",P.textContent=y,this._container.appendChild(P),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(N.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(c){return c[this._bypassKey]}notifyGestureBlocked(c,f){this._enabled&&(this._map.fire(new r.l("cooperativegestureprevented",{gestureType:c,originalEvent:f})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ci=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class su extends r.l{}function jd(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class Vd{constructor(c,f){this.handleWindowEvent=S=>{this.handleEvent(S,`${S.type}Window`)},this.handleEvent=(S,P)=>{if(S.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=S.type==="renderFrame"?void 0:S,H={needsRenderFrame:!1},W={},Z={};for(const{handlerName:re,handler:fe,allowed:ye}of this._handlers){if(!fe.isEnabled())continue;let Te;if(this._blockedByActive(Z,ye,re))fe.reset();else if(fe[P||S.type]){if(r.cz(S,P||S.type)){const Me=N.mousePos(this._map.getCanvas(),S);Te=fe[P||S.type](S,Me)}else if(r.cA(S,P||S.type)){const Me=this._getMapTouches(S.touches),Ee=N.touchPos(this._map.getCanvas(),Me);Te=fe[P||S.type](S,Ee,Me)}else r.cB(P||S.type)||(Te=fe[P||S.type](S));this.mergeHandlerResult(H,W,Te,re,z),Te&&Te.needsRenderFrame&&this._triggerRenderFrame()}(Te||fe.isActive())&&(Z[re]=fe)}const J={};for(const re in this._previousActiveHandlers)Z[re]||(J[re]=z);this._previousActiveHandlers=Z,(Object.keys(J).length||jd(H))&&(this._changes.push([H,W,J]),this._triggerRenderFrame()),(Object.keys(Z).length||jd(H))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:se}=H;se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],se(this._map))},this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $x(c),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,P,z]of this._listeners)N.addEventListener(S,P,S===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[c,f,y]of this._listeners)N.removeEventListener(c,f,c===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(c){const f=this._map,y=f.getCanvasContainer();this._add("mapEvent",new Xx(f,c));const S=f.boxZoom=new Yc(f,c);this._add("boxZoom",S),c.interactive&&c.boxZoom&&S.enable();const P=f.cooperativeGestures=new hi(f,c.cooperativeGestures);this._add("cooperativeGestures",P),c.cooperativeGestures&&P.enable();const z=new yp(f),H=new Jm(f);f.doubleClickZoom=new Cp(H,z),this._add("tapZoom",z),this._add("clickZoom",H),c.interactive&&c.doubleClickZoom&&f.doubleClickZoom.enable();const W=new e0;this._add("tapDragZoom",W);const Z=f.touchPitch=new Qm(f);this._add("touchPitch",Z),c.interactive&&c.touchPitch&&f.touchPitch.enable(c.touchPitch);const J=()=>f.project(f.getCenter()),se=(function({enable:Oe,clickTolerance:Ve,aroundCenter:Xe=!0,minPixelCenterThreshold:Ne=100,rotateDegreesPerPixelMoved:Ke=.8},gt){const lt=new nu({checkCorrectEvent:ht=>N.mouseButton(ht)===0&&ht.ctrlKey||N.mouseButton(ht)===2&&!ht.ctrlKey});return new qc({clickTolerance:Ve,move:(ht,dt)=>{const Ot=gt();if(Xe&&Math.abs(Ot.y-ht.y)>Ne)return{bearingDelta:r.cx(new r.P(ht.x,dt.y),dt,Ot)};let Bt=(dt.x-ht.x)*Ke;return Xe&&dt.y<Ot.y&&(Bt=-Bt),{bearingDelta:Bt}},moveStateManager:lt,enable:Oe,assignEvents:Zc})})(c,J),re=(function({enable:Oe,clickTolerance:Ve,pitchDegreesPerPixelMoved:Xe=-.5}){const Ne=new nu({checkCorrectEvent:Ke=>N.mouseButton(Ke)===0&&Ke.ctrlKey||N.mouseButton(Ke)===2});return new qc({clickTolerance:Ve,move:(Ke,gt)=>({pitchDelta:(gt.y-Ke.y)*Xe}),moveStateManager:Ne,enable:Oe,assignEvents:Zc})})(c),fe=(function({enable:Oe,clickTolerance:Ve,rollDegreesPerPixelMoved:Xe=.3},Ne){const Ke=new nu({checkCorrectEvent:gt=>N.mouseButton(gt)===2&&gt.ctrlKey});return new qc({clickTolerance:Ve,move:(gt,lt)=>{const ht=Ne();let dt=(lt.x-gt.x)*Xe;return lt.y<ht.y&&(dt=-dt),{rollDelta:dt}},moveStateManager:Ke,enable:Oe,assignEvents:Zc})})(c,J);f.dragRotate=new mo(c,se,re,fe),this._add("mouseRotate",se,["mousePitch"]),this._add("mousePitch",re,["mouseRotate","mouseRoll"]),this._add("mouseRoll",fe,["mousePitch"]),c.interactive&&c.dragRotate&&f.dragRotate.enable();const ye=(function({enable:Oe,clickTolerance:Ve}){const Xe=new nu({checkCorrectEvent:Ne=>N.mouseButton(Ne)===0&&!Ne.ctrlKey});return new qc({clickTolerance:Ve,move:(Ne,Ke)=>({around:Ke,panDelta:Ke.sub(Ne)}),activateOnStart:!0,moveStateManager:Xe,enable:Oe,assignEvents:Zc})})(c),Te=new qx(c,f);f.dragPan=new t0(y,ye,Te),this._add("mousePan",ye),this._add("touchPan",Te,["touchZoom","touchRotate"]),c.interactive&&c.dragPan&&f.dragPan.enable(c.dragPan);const Me=new Sp,Ee=new wp;f.touchZoomRotate=new ru(y,Ee,Me,W),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",Ee,["touchPan","touchRotate"]),c.interactive&&c.touchZoomRotate&&f.touchZoomRotate.enable(c.touchZoomRotate),this._add("blockableMapEvent",new Yx(f));const Fe=f.scrollZoom=new Nd(f,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Fe,["mousePan"]),c.interactive&&c.scrollZoom&&f.scrollZoom.enable(c.scrollZoom);const Ge=f.keyboard=new Wn(f);this._add("keyboard",Ge),c.interactive&&c.keyboard&&f.keyboard.enable()}_add(c,f,y){this._handlers.push({handlerName:c,handler:f,allowed:y}),this._handlersById[c]=f}stop(c){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ci(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,f,y){for(const S in c)if(S!==y&&(!f||f.indexOf(S)<0))return!0;return!1}_getMapTouches(c){const f=[];for(const y of c)this._el.contains(y.target)&&f.push(y);return f}mergeHandlerResult(c,f,y,S,P){if(!y)return;r.e(c,y);const z={handlerName:S,originalEvent:y.originalEvent||P};y.zoomDelta!==void 0&&(f.zoom=z),y.panDelta!==void 0&&(f.drag=z),y.rollDelta!==void 0&&(f.roll=z),y.pitchDelta!==void 0&&(f.pitch=z),y.bearingDelta!==void 0&&(f.rotate=z)}_applyChanges(){const c={},f={},y={};for(const[S,P,z]of this._changes)S.panDelta&&(c.panDelta=(c.panDelta||new r.P(0,0))._add(S.panDelta)),S.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+S.pitchDelta),S.rollDelta&&(c.rollDelta=(c.rollDelta||0)+S.rollDelta),S.around!==void 0&&(c.around=S.around),S.pinchAround!==void 0&&(c.pinchAround=S.pinchAround),S.noInertia&&(c.noInertia=S.noInertia),r.e(f,P),r.e(y,z);this._updateMapTransform(c,f,y),this._changes=[]}_updateMapTransform(c,f,y){const S=this._map,P=S._getTransformForUpdate(),z=S.terrain;if(!(jd(c)||z&&this._terrainMovement))return this._fireEvents(f,y,!0);S._stop(!0);let{panDelta:H,zoomDelta:W,bearingDelta:Z,pitchDelta:J,rollDelta:se,around:re,pinchAround:fe}=c;fe!==void 0&&(re=fe),re=re||S.transform.centerPoint,z&&!P.isPointOnMapSurface(re)&&(re=P.centerPoint);const ye={panDelta:H,zoomDelta:W,rollDelta:se,pitchDelta:J,bearingDelta:Z,around:re};this._map.cameraHelper.useGlobeControls&&!P.isPointOnMapSurface(re)&&(re=P.centerPoint);const Te=re.distSqr(P.centerPoint)<.01?P.center:P.screenPointToLocation(H?re.sub(H):re);this._handleMapControls({terrain:z,tr:P,deltasForHelper:ye,preZoomAroundLoc:Te,combinedEventsInProgress:f,panDelta:H}),S._applyUpdatedTransform(P),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(f,y,!0)}_handleMapControls({terrain:c,tr:f,deltasForHelper:y,preZoomAroundLoc:S,combinedEventsInProgress:P,panDelta:z}){const H=this._map.cameraHelper;if(H.handleMapControlsRollPitchBearingZoom(y,f),c)return H.useGlobeControls?(this._terrainMovement||!P.drag&&!P.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void H.handleMapControlsPan(y,f,S)):this._terrainMovement||!P.drag&&!P.zoom?void(P.drag&&this._terrainMovement&&z?f.setCenter(f.screenPointToLocation(f.centerPoint.sub(z))):H.handleMapControlsPan(y,f,S)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void H.handleMapControlsPan(y,f,S));H.handleMapControlsPan(y,f,S)}_fireEvents(c,f,y){const S=Ci(this._eventsInProgress),P=Ci(c),z={};for(const se in c){const{originalEvent:re}=c[se];this._eventsInProgress[se]||(z[`${se}start`]=re),this._eventsInProgress[se]=c[se]}!S&&P&&this._fireEvent("movestart",P.originalEvent);for(const se in z)this._fireEvent(se,z[se]);P&&this._fireEvent("move",P.originalEvent);for(const se in c){const{originalEvent:re}=c[se];this._fireEvent(se,re)}const H={};let W;for(const se in this._eventsInProgress){const{handlerName:re,originalEvent:fe}=this._eventsInProgress[se];this._handlersById[re].isActive()||(delete this._eventsInProgress[se],W=f[re]||fe,H[`${se}end`]=W)}for(const se in H)this._fireEvent(se,H[se]);const Z=Ci(this._eventsInProgress),J=(S||P)&&!Z;if(J&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const se=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&se.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(se)}if(y&&J){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),re=fe=>fe!==0&&-this._bearingSnap<fe&&fe<this._bearingSnap;!se||!se.essential&&E.prefersReducedMotion?(this._map.fire(new r.l("moveend",{originalEvent:W})),re(this._map.getBearing())&&this._map.resetNorth()):(re(se.bearing||this._map.getBearing())&&(se.bearing=0),se.freezeElevation=!0,this._map.easeTo(se,{originalEvent:W})),this._updatingCamera=!1}}_fireEvent(c,f){this._map.fire(new r.l(c,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((c=>{delete this._frameId,this.handleEvent(new su("renderFrame",{timeStamp:c})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class as extends r.E{constructor(c,f,y){super(),this._renderFrameCallback=()=>{const S=Math.min((O()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(S)),S<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=y.bearingSnap,this.cameraHelper=f,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(c,f){c.apply(this.transform),this.transform=c,this.cameraHelper=f}getCenter(){return new r.V(this.transform.center.lng,this.transform.center.lat)}setCenter(c,f){return this.jumpTo({center:c},f)}getCenterElevation(){return this.transform.elevation}setCenterElevation(c,f){return this.jumpTo({elevation:c},f),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(c){this._centerClampedToGround=c}panBy(c,f,y){return c=r.P.convert(c).mult(-1),this.panTo(this.transform.center,r.e({offset:c},f),y)}panTo(c,f,y){return this.easeTo(r.e({center:c},f),y)}getZoom(){return this.transform.zoom}setZoom(c,f){return this.jumpTo({zoom:c},f),this}zoomTo(c,f,y){return this.easeTo(r.e({zoom:c},f),y)}zoomIn(c,f){return this.zoomTo(this.getZoom()+1,c,f),this}zoomOut(c,f){return this.zoomTo(this.getZoom()-1,c,f),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(c,f){return c!=this.transform.fov&&(this.transform.setFov(c),this.fire(new r.l("movestart",f)).fire(new r.l("move",f)).fire(new r.l("moveend",f))),this}getBearing(){return this.transform.bearing}setBearing(c,f){return this.jumpTo({bearing:c},f),this}getPadding(){return this.transform.padding}setPadding(c,f){return this.jumpTo({padding:c},f),this}rotateTo(c,f,y){return this.easeTo(r.e({bearing:c},f),y)}resetNorth(c,f){return this.rotateTo(0,r.e({duration:1e3},c),f),this}resetNorthPitch(c,f){return this.easeTo(r.e({bearing:0,pitch:0,roll:0,duration:1e3},c),f),this}snapToNorth(c,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,f):this}getPitch(){return this.transform.pitch}setPitch(c,f){return this.jumpTo({pitch:c},f),this}getRoll(){return this.transform.roll}setRoll(c,f){return this.jumpTo({roll:c},f),this}cameraForBounds(c,f){c=st.convert(c).adjustAntiMeridian();const y=f&&f.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),y,f)}_cameraForBoxAndBearing(c,f,y,S){const P={top:0,bottom:0,right:0,left:0};if(typeof(S=r.e({padding:P,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const Z=S.padding;S.padding={top:Z,bottom:Z,right:Z,left:Z}}const z=r.e(P,S.padding);S.padding=z;const H=this.transform,W=new st(c,f);return this.cameraHelper.cameraForBoxAndBearing(S,z,W,y,H)}fitBounds(c,f,y){return this._fitInternal(this.cameraForBounds(c,f),f,y)}fitScreenCoordinates(c,f,y,S,P){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(r.P.convert(c)),this.transform.screenPointToLocation(r.P.convert(f)),y,S),S,P)}_fitInternal(c,f,y){return c?(delete(f=r.e(c,f)).padding,f.linear?this.easeTo(f,y):this.flyTo(f,y)):this}jumpTo(c,f){this.stop();const y=this._getTransformForUpdate();let S=!1,P=!1,z=!1;const H=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,c);const W=y.zoom!==H;return"elevation"in c&&y.elevation!==+c.elevation&&y.setElevation(+c.elevation),"bearing"in c&&y.bearing!==+c.bearing&&(S=!0,y.setBearing(+c.bearing)),"pitch"in c&&y.pitch!==+c.pitch&&(P=!0,y.setPitch(+c.pitch)),"roll"in c&&y.roll!==+c.roll&&(z=!0,y.setRoll(+c.roll)),c.padding==null||y.isPaddingEqual(c.padding)||y.setPadding(c.padding),this._applyUpdatedTransform(y),this.fire(new r.l("movestart",f)).fire(new r.l("move",f)),W&&this.fire(new r.l("zoomstart",f)).fire(new r.l("zoom",f)).fire(new r.l("zoomend",f)),S&&this.fire(new r.l("rotatestart",f)).fire(new r.l("rotate",f)).fire(new r.l("rotateend",f)),P&&this.fire(new r.l("pitchstart",f)).fire(new r.l("pitch",f)).fire(new r.l("pitchend",f)),z&&this.fire(new r.l("rollstart",f)).fire(new r.l("roll",f)).fire(new r.l("rollend",f)),this.fire(new r.l("moveend",f))}calculateCameraOptionsFromTo(c,f,y,S=0){const P=r.a9.fromLngLat(c,f),z=r.a9.fromLngLat(y,S),H=z.x-P.x,W=z.y-P.y,Z=z.z-P.z,J=Math.hypot(H,W,Z);if(J===0)throw new Error("Can't calculate camera options with same From and To");const se=Math.hypot(H,W),re=r.at(this.transform.cameraToCenterDistance/J/this.transform.tileSize),fe=180*Math.atan2(H,-W)/Math.PI;let ye=180*Math.acos(se/J)/Math.PI;return ye=Z<0?90-ye:90+ye,{center:z.toLngLat(),elevation:S,zoom:re,pitch:ye,bearing:fe}}calculateCameraOptionsFromCameraLngLatAltRotation(c,f,y,S,P){const z=this.transform.calculateCenterFromCameraLngLatAlt(c,f,y,S);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:y,pitch:S,roll:P}}easeTo(c,f){this._stop(!1,c.easeId),((c=r.e({offset:[0,0],duration:500,easing:r.cy},c)).animate===!1||!c.essential&&E.prefersReducedMotion)&&(c.duration=0);const y=this._getTransformForUpdate(),S=this.getBearing(),P=y.pitch,z=y.roll,H="bearing"in c?this._normalizeBearing(c.bearing,S):S,W="pitch"in c?+c.pitch:P,Z="roll"in c?this._normalizeBearing(c.roll,z):z,J="padding"in c?c.padding:y.padding,se=r.P.convert(c.offset);let re,fe;c.around&&(re=r.V.convert(c.around),fe=y.locationToScreenPoint(re));const ye={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Te=this.cameraHelper.handleEaseTo(y,{bearing:H,pitch:W,roll:Z,padding:J,around:re,aroundPoint:fe,offsetAsPoint:se,offset:c.offset,zoom:c.zoom,center:c.center});return this._rotating=this._rotating||S!==H,this._pitching=this._pitching||W!==P,this._rolling=this._rolling||Z!==z,this._padding=!y.isPaddingEqual(J),this._zooming=this._zooming||Te.isZooming,this._easeId=c.easeId,this._prepareEase(f,c.noMoveStart,ye),this.terrain&&this._prepareElevation(Te.elevationCenter),this._ease((Me=>{Te.easeFunc(Me),this.terrain&&!c.freezeElevation&&this._updateElevation(Me),this._applyUpdatedTransform(y),this._fireMoveEvents(f)}),(Me=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(f,Me)}),c),this}_prepareEase(c,f,y={}){this._moving=!0,f||y.moving||this.fire(new r.l("movestart",c)),this._zooming&&!y.zooming&&this.fire(new r.l("zoomstart",c)),this._rotating&&!y.rotating&&this.fire(new r.l("rotatestart",c)),this._pitching&&!y.pitching&&this.fire(new r.l("pitchstart",c)),this._rolling&&!y.rolling&&this.fire(new r.l("rollstart",c))}_prepareElevation(c){this._elevationCenter=c,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(c){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(c<1&&f!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=c*(y-(f-(y*c+this._elevationStart))/(1-c)),this._elevationTarget=f}this.transform.setElevation(r.G.number(this._elevationStart,this._elevationTarget,c))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(c){if(!this.terrain&&c.elevation>=0&&c.pitch<=90)return{};const f=c.getCameraLngLat(),y=c.getCameraAltitude(),S=this.terrain?this.terrain.getElevationForLngLatZoom(f,c.zoom):0;if(y<S){const P=this.calculateCameraOptionsFromTo(f,S,c.center,c.elevation);return{pitch:P.pitch,zoom:P.zoom}}return{}}_applyUpdatedTransform(c){const f=[];if(f.push((S=>this._elevateCameraIfInsideTerrain(S))),this.transformCameraUpdate&&f.push((S=>this.transformCameraUpdate(S))),!f.length)return;const y=c.clone();for(const S of f){const P=y.clone(),{center:z,zoom:H,roll:W,pitch:Z,bearing:J,elevation:se}=S(P);z&&P.setCenter(z),se!==void 0&&P.setElevation(se),H!==void 0&&P.setZoom(H),W!==void 0&&P.setRoll(W),Z!==void 0&&P.setPitch(Z),J!==void 0&&P.setBearing(J),y.apply(P)}this.transform.apply(y)}_fireMoveEvents(c){this.fire(new r.l("move",c)),this._zooming&&this.fire(new r.l("zoom",c)),this._rotating&&this.fire(new r.l("rotate",c)),this._pitching&&this.fire(new r.l("pitch",c)),this._rolling&&this.fire(new r.l("roll",c))}_afterEase(c,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const y=this._zooming,S=this._rotating,P=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new r.l("zoomend",c)),S&&this.fire(new r.l("rotateend",c)),P&&this.fire(new r.l("pitchend",c)),z&&this.fire(new r.l("rollend",c)),this.fire(new r.l("moveend",c))}flyTo(c,f){if(!c.essential&&E.prefersReducedMotion){const dt=r.U(c,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(dt,f)}this.stop(),c=r.e({offset:[0,0],speed:1.2,curve:1.42,easing:r.cy},c);const y=this._getTransformForUpdate(),S=y.bearing,P=y.pitch,z=y.roll,H=y.padding,W="bearing"in c?this._normalizeBearing(c.bearing,S):S,Z="pitch"in c?+c.pitch:P,J="roll"in c?this._normalizeBearing(c.roll,z):z,se="padding"in c?c.padding:y.padding,re=r.P.convert(c.offset);let fe=y.centerPoint.add(re);const ye=y.screenPointToLocation(fe),Te=this.cameraHelper.handleFlyTo(y,{bearing:W,pitch:Z,roll:J,padding:se,locationAtOffset:ye,offsetAsPoint:re,center:c.center,minZoom:c.minZoom,zoom:c.zoom});let Me=c.curve;const Ee=Math.max(y.width,y.height),Fe=Ee/Te.scaleOfZoom,Ge=Te.pixelPathLength;typeof Te.scaleOfMinZoom=="number"&&(Me=Math.sqrt(Ee/Te.scaleOfMinZoom/Ge*2));const Oe=Me*Me;function Ve(dt){const Ot=(Fe*Fe-Ee*Ee+(dt?-1:1)*Oe*Oe*Ge*Ge)/(2*(dt?Fe:Ee)*Oe*Ge);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function Xe(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function Ne(dt){return(Math.exp(dt)+Math.exp(-dt))/2}const Ke=Ve(!1);let gt=function(dt){return Ne(Ke)/Ne(Ke+Me*dt)},lt=function(dt){return Ee*((Ne(Ke)*(Xe(Ot=Ke+Me*dt)/Ne(Ot))-Xe(Ke))/Oe)/Ge;var Ot},ht=(Ve(!0)-Ke)/Me;if(Math.abs(Ge)<2e-6||!isFinite(ht)){if(Math.abs(Ee-Fe)<1e-6)return this.easeTo(c,f);const dt=Fe<Ee?-1:1;ht=Math.abs(Math.log(Fe/Ee))/Me,lt=()=>0,gt=Ot=>Math.exp(dt*Me*Ot)}return c.duration="duration"in c?+c.duration:1e3*ht/("screenSpeed"in c?+c.screenSpeed/Me:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=S!==W,this._pitching=Z!==P,this._rolling=J!==z,this._padding=!y.isPaddingEqual(se),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(Te.targetCenter),this._ease((dt=>{const Ot=dt*ht,Bt=1/gt(Ot),Mt=lt(Ot);this._rotating&&y.setBearing(r.G.number(S,W,dt)),this._pitching&&y.setPitch(r.G.number(P,Z,dt)),this._rolling&&y.setRoll(r.G.number(z,J,dt)),this._padding&&(y.interpolatePadding(H,se,dt),fe=y.centerPoint.add(re)),Te.easeFunc(dt,Bt,Mt,fe),this.terrain&&!c.freezeElevation&&this._updateElevation(dt),this._applyUpdatedTransform(y),this._fireMoveEvents(f)}),(()=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(f)}),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,f){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,f)}return c||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(c,f,y){y.animate===!1||y.duration===0?(c(1),f()):(this._easeStart=O(),this._easeOptions=y,this._onEaseFrame=c,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(c,f){c=r.W(c,-180,180);const y=Math.abs(c-f);return Math.abs(c-360-f)<y&&(c-=360),Math.abs(c+360-f)<y&&(c+=360),c}queryTerrainElevation(c){return this.terrain?this.terrain.getElevationForLngLat(r.V.convert(c),this.transform):null}}const Zs={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ap{constructor(c=Zs){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=c}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options.compact,this._container=N.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=N.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,f){const y=this._map._getUIString(`AttributionControl.${f}`);c.title=y,c.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map((S=>typeof S!="string"?"":S))):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const f=this._map.style.tileManagers;for(const S in f){const P=f[S];if(P.used||P.usedForTerrain){const z=P.getSource();z.attribution&&c.indexOf(z.attribution)<0&&c.push(z.attribution)}}c=c.filter((S=>String(S).trim())),c.sort(((S,P)=>S.length-P.length)),c=c.filter(((S,P)=>{for(let z=P+1;z<c.length;z++)if(c[z].indexOf(S)>=0)return!1;return!0}));const y=c.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,c.length?(this._innerContainer.innerHTML=N.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class i0{constructor(c={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const y=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=c}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=N.create("div","maplibregl-ctrl");const f=N.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){N.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Kx{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const f=++this._id;return this._queue.push({callback:c,id:f,cancelled:!1}),f}remove(c){const f=this._currentlyRunning,y=f?this._queue.concat(f):this._queue;for(const S of y)if(S.id===c)return void(S.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const y of f)if(!y.cancelled&&(y.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Qx=r.aU([{name:"a_pos3d",type:"Int16",components:3}]);class ou extends r.E{constructor(c){super(),this._lastTilesetChange=O(),this.tileManager=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=c._source.tileSize*2**this.deltaZoom,c.usedForTerrain=!0,c.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(c,f){this.tileManager.update(c,f),this._renderableTilesKeys=[];const y={};for(const S of fi(c,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f,calculateTileZoom:this.tileManager._source.calculateTileZoom}))y[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.terrainRttPosMatrix32f=new Float64Array(16),r.c7(S.terrainRttPosMatrix32f,0,r.a5,r.a5,0,0,1),this._tiles[S.key]=new mt(S,this.tileSize),this._lastTilesetChange=O());for(const S in this._tiles)y[S]||delete this._tiles[S]}freeRtt(c){for(const f in this._tiles){const y=this._tiles[f];(!c||y.tileID.equals(c)||y.tileID.isChildOf(c)||c.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((c=>this.getTileByID(c)))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c,f){return f?this._getTerrainCoordsForTileRanges(c,f):this._getTerrainCoordsForRegularTile(c)}_getTerrainCoordsForRegularTile(c){const f={};for(const y of this._renderableTilesKeys){const S=this._tiles[y].tileID,P=c.clone(),z=r.bk();if(S.canonical.equals(c.canonical))r.c7(z,0,r.a5,r.a5,0,0,1);else if(S.canonical.isChildOf(c.canonical)){const H=S.canonical.z-c.canonical.z,W=S.canonical.x-(S.canonical.x>>H<<H),Z=S.canonical.y-(S.canonical.y>>H<<H),J=r.a5>>H;r.c7(z,0,J,J,0,0,1),r.O(z,z,[-W*J,-Z*J,0])}else{if(!c.canonical.isChildOf(S.canonical))continue;{const H=c.canonical.z-S.canonical.z,W=c.canonical.x-(c.canonical.x>>H<<H),Z=c.canonical.y-(c.canonical.y>>H<<H),J=r.a5>>H;r.c7(z,0,r.a5,r.a5,0,0,1),r.O(z,z,[W*J,Z*J,0]),r.Q(z,z,[1/2**H,1/2**H,0])}}P.terrainRttPosMatrix32f=new Float32Array(z),f[y]=P}return f}_getTerrainCoordsForTileRanges(c,f){const y={};for(const S of this._renderableTilesKeys){const P=this._tiles[S].tileID;if(!this._isWithinTileRanges(P,f))continue;const z=c.clone(),H=r.bk();if(P.canonical.z===c.canonical.z){const W=c.canonical.x-P.canonical.x,Z=c.canonical.y-P.canonical.y;r.c7(H,0,r.a5,r.a5,0,0,1),r.O(H,H,[W*r.a5,Z*r.a5,0])}else if(P.canonical.z>c.canonical.z){const W=P.canonical.z-c.canonical.z,Z=P.canonical.x-(P.canonical.x>>W<<W),J=P.canonical.y-(P.canonical.y>>W<<W),se=c.canonical.x-(P.canonical.x>>W),re=c.canonical.y-(P.canonical.y>>W),fe=r.a5>>W;r.c7(H,0,fe,fe,0,0,1),r.O(H,H,[-Z*fe+se*r.a5,-J*fe+re*r.a5,0])}else{const W=c.canonical.z-P.canonical.z,Z=c.canonical.x-(c.canonical.x>>W<<W),J=c.canonical.y-(c.canonical.y>>W<<W),se=(c.canonical.x>>W)-P.canonical.x,re=(c.canonical.y>>W)-P.canonical.y,fe=r.a5<<W;r.c7(H,0,fe,fe,0,0,1),r.O(H,H,[Z*r.a5+se*fe,J*r.a5+re*fe,0])}z.terrainRttPosMatrix32f=new Float32Array(H),y[S]=z}return y}getSourceTile(c,f){const y=this.tileManager._source;let S=c.overscaledZ-this.deltaZoom;if(S>y.maxzoom&&(S=y.maxzoom),S<y.minzoom)return;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(S).key);let P=this.findTileInCaches(this._sourceTileCache[c.key]);if(!P?.dem&&f)for(;S>=y.minzoom&&!P?.dem;)P=this.findTileInCaches(c.scaledTo(S--).key);return P}findTileInCaches(c){let f=this.tileManager.getTileByID(c);return f||(f=this.tileManager._outOfViewCache.getByKey(c),f)}anyTilesAfterTime(c=Date.now()){return this._lastTilesetChange>=c}_isWithinTileRanges(c,f){return f[c.canonical.z]&&c.canonical.x>=f[c.canonical.z].minTileX&&c.canonical.x<=f[c.canonical.z].maxTileX&&c.canonical.y>=f[c.canonical.z].minTileY&&c.canonical.y<=f[c.canonical.z].maxTileY}}class Sa{constructor(c,f,y){this._meshCache={},this.painter=c,this.tileManager=new ou(f),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(c,f,y,S=r.a5){var P;if(!(f>=0&&f<S&&y>=0&&y<S))return 0;const z=this.getTerrainData(c),H=(P=z.tile)===null||P===void 0?void 0:P.dem;if(!H)return 0;const W=r.cC([],[f/S*r.a5,y/S*r.a5],z.u_terrain_matrix),Z=[W[0]*H.dim,W[1]*H.dim],J=Math.floor(Z[0]),se=Math.floor(Z[1]),re=Z[0]-J,fe=Z[1]-se;return H.get(J,se)*(1-re)*(1-fe)+H.get(J+1,se)*re*(1-fe)+H.get(J,se+1)*(1-re)*fe+H.get(J+1,se+1)*re*fe}getElevationForLngLatZoom(c,f){if(!r.cD(f,c.wrap()))return 0;const{tileID:y,mercatorX:S,mercatorY:P}=this._getOverscaledTileIDFromLngLatZoom(c,f);return this.getElevation(y,S%r.a5,P%r.a5,r.a5)}getElevationForLngLat(c,f){const y=fi(f,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let S=0;for(const P of y)P.canonical.z>S&&(S=Math.min(P.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(c,S)}getElevation(c,f,y,S=r.a5){return this.getDEMElevation(c,f,y,S)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const S=this.painter.context,P=new r.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new r.T(S,P,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new r.T(S,new r.R({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=r.ar([])}const f=this.tileManager.getSourceTile(c,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const S=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new r.T(S,f.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),f.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const y=f&&f.toString()+f.tileID.key+c.key;if(y&&!this._demMatrixCache[y]){const S=this.tileManager.getSource().maxzoom;let P=c.canonical.z-f.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=S?P=c.canonical.z-S:r.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=c.canonical.x-(c.canonical.x>>P<<P),H=c.canonical.y-(c.canonical.y>>P<<P),W=r.cE(new Float64Array(16),[1/(r.a5<<P),1/(r.a5<<P),0]);r.O(W,W,[z*r.a5,H*r.a5,0]),this._demMatrixCache[c.key]={matrix:W,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(c){const f=this.painter,y=f.width/devicePixelRatio,S=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new r.T(f.context,{width:y,height:S,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new r.T(f.context,{width:y,height:S,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(y,S,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,y,S))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let P=0,z=0;P<this._coordsTextureSize;P++)for(let H=0;H<this._coordsTextureSize;H++,z+=4)f[z+0]=255&H,f[z+1]=255&P,f[z+2]=H>>8<<4|P>>8,f[z+3]=0;const y=new r.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),S=new r.T(c,y,c.gl.RGBA,{premultiply:!1});return S.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(c){this.painter.maybeDrawDepthAndCoords(!0);const f=new Uint8Array(4),y=this.painter.context,S=y.gl,P=Math.round(c.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(c.y*this.painter.pixelRatio/devicePixelRatio),H=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(P,H-z-1,1,1,S.RGBA,S.UNSIGNED_BYTE,f),y.bindFramebuffer.set(null);const W=f[0]+(f[2]>>4<<8),Z=f[1]+((15&f[2])<<8),J=this.coordsIndex[255-f[3]],se=J&&this.tileManager.getTileByID(J);if(!se)return null;const re=this._coordsTextureSize,fe=(1<<se.tileID.canonical.z)*re;return new r.a9((se.tileID.canonical.x*re+W)/fe+se.tileID.wrap,(se.tileID.canonical.y*re+Z)/fe,this.getElevation(se.tileID,W,Z,re))}depthAtPoint(c){const f=new Uint8Array(4),y=this.painter.context,S=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),S.readPixels(c.x,this.painter.height/devicePixelRatio-c.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,f),y.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(c){var f;const y=((f=this.painter.style.projection)===null||f===void 0?void 0:f.transitionState)>0,S=y&&c.canonical.y===0,P=y&&c.canonical.y===(1<<c.canonical.z)-1,z=`m_${S?"n":""}_${P?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const H=this.painter.context,W=new r.cF,Z=new r.aY,J=this.meshSize,se=r.a5/J,re=J*J;for(let Ne=0;Ne<=J;Ne++)for(let Ke=0;Ke<=J;Ke++)W.emplaceBack(Ke*se,Ne*se,0);for(let Ne=0;Ne<re;Ne+=J+1)for(let Ke=0;Ke<J;Ke++)Z.emplaceBack(Ke+Ne,J+Ke+Ne+1,J+Ke+Ne+2),Z.emplaceBack(Ke+Ne,J+Ke+Ne+2,Ke+Ne+1);const fe=W.length,ye=fe+(J+1),Te=(J+1)*J,Me=S?r.br:0,Ee=S?0:1,Fe=P?r.bs:r.a5,Ge=P?0:1;for(let Ne=0;Ne<=J;Ne++)W.emplaceBack(Ne*se,Me,Ee);for(let Ne=0;Ne<=J;Ne++)W.emplaceBack(Ne*se,Fe,Ge);for(let Ne=0;Ne<J;Ne++)Z.emplaceBack(Te+Ne,ye+Ne,ye+Ne+1),Z.emplaceBack(Te+Ne,ye+Ne+1,Te+Ne+1),Z.emplaceBack(0+Ne,fe+Ne+1,fe+Ne),Z.emplaceBack(0+Ne,0+Ne+1,fe+Ne+1);const Oe=W.length,Ve=Oe+2*(J+1);for(const Ne of[0,1])for(let Ke=0;Ke<=J;Ke++)for(const gt of[0,1])W.emplaceBack(Ne*r.a5,Ke*se,gt);for(let Ne=0;Ne<2*J;Ne+=2)Z.emplaceBack(Oe+Ne,Oe+Ne+1,Oe+Ne+3),Z.emplaceBack(Oe+Ne,Oe+Ne+3,Oe+Ne+2),Z.emplaceBack(Ve+Ne,Ve+Ne+3,Ve+Ne+1),Z.emplaceBack(Ve+Ne,Ve+Ne+2,Ve+Ne+3);const Xe=new jn(H.createVertexBuffer(W,Qx.members),H.createIndexBuffer(Z),r.aX.simpleSegment(0,0,W.length,Z.length));return this._meshCache[z]=Xe,Xe}getMeshFrameDelta(c){return 2*Math.PI*r.bE/Math.pow(2,Math.max(c,0))/5}getMinTileElevationForLngLatZoom(c,f){var y;if(!r.cD(f,c.wrap()))return 0;const{tileID:S}=this._getOverscaledTileIDFromLngLatZoom(c,f);return(y=this.getMinMaxElevation(S).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(c){const f=this.getTerrainData(c).tile,y={minElevation:null,maxElevation:null};return f&&f.dem&&(y.minElevation=f.dem.min*this.exaggeration,y.maxElevation=f.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(c,f){const y=r.a9.fromLngLat(c.wrap()),S=(1<<f)*r.a5,P=y.x*S,z=y.y*S,H=Math.floor(P/r.a5),W=Math.floor(z/r.a5);return{tileID:new r.a2(f,0,f,H,W),mercatorX:P,mercatorY:z}}}class Ba{constructor(c,f,y){this._context=c,this._size=f,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const c of this._objects)c.texture.destroy(),c.fbo.destroy()}_createObject(c){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new r.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(y.texture),{id:c,fbo:f,texture:y,stamp:-1,inUse:!1}}getObjectForId(c){return this._objects[c]}useObject(c){c.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((f=>c.id!==f)),this._recentlyUsed.push(c.id)}stampObject(c){c.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const c=this._createObject(this._objects.length);return this._objects.push(c),c}freeObject(c){c.inUse=!1}freeAllObjects(){for(const c of this._objects)this.freeObject(c)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((c=>!c.inUse))===!1}}const sc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class lu{constructor(c,f){this.painter=c,this.terrain=f,this.pool=new Ba(c.context,30,f.tileManager.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(c){return this.pool.getObjectForId(c.rtt[this._stacks.length-1].id).texture}prepareForRender(c,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=c._order.filter((y=>!c._layers[y].isHidden(f))),this._coordsAscending={};for(const y in c.tileManagers){this._coordsAscending[y]={};const S=c.tileManagers[y].getVisibleCoordinates(),P=c.tileManagers[y].getSource(),z=P instanceof un?P.terrainTileRanges:null;for(const H of S){const W=this.terrain.tileManager.getTerrainCoords(H,z);for(const Z in W)this._coordsAscending[y][Z]||(this._coordsAscending[y][Z]=[]),this._coordsAscending[y][Z].push(W[Z])}}this._coordsAscendingStr={};for(const y of c._order){const S=c._layers[y],P=S.source;if(sc[S.type]&&!this._coordsAscendingStr[P]){this._coordsAscendingStr[P]={};for(const z in this._coordsAscending[P])this._coordsAscendingStr[P][z]=this._coordsAscending[P][z].map((H=>H.key)).sort().join()}}for(const y of this._renderableTiles)for(const S in this._coordsAscendingStr){const P=this._coordsAscendingStr[S][y.tileID.key];P&&P!==y.rttCoords[S]&&(y.rtt=[])}}renderLayer(c,f){if(c.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},f),{isRenderingToTexture:!0}),S=c.type,P=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===c.id;if(sc[S]&&(this._prevType&&sc[this._prevType]||this._stacks.push([]),this._prevType=S,this._stacks[this._stacks.length-1].push(c.id),!z))return!0;if(sc[this._prevType]||sc[S]&&z){this._prevType=S;const H=this._stacks.length-1,W=this._stacks[H]||[];for(const Z of this._renderableTiles){if(this.pool.isFull()&&(gp(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Z),Z.rtt[H]){const se=this.pool.getObjectForId(Z.rtt[H].id);if(se.stamp===Z.rtt[H].stamp){this.pool.useObject(se);continue}}const J=this.pool.getOrCreateFreeObject();this.pool.useObject(J),this.pool.stampObject(J),Z.rtt[H]={id:J.id,stamp:J.stamp},P.context.bindFramebuffer.set(J.fbo.framebuffer),P.context.clear({color:r.bp.transparent,stencil:0}),P.currentStencilSource=void 0;for(let se=0;se<W.length;se++){const re=P.style._layers[W[se]],fe=re.source?this._coordsAscending[re.source][Z.tileID.key]:[Z.tileID];P.context.viewport.set([0,0,J.fbo.width,J.fbo.height]),P._renderTileClippingMasks(re,fe,!0),P.renderLayer(P,P.style.tileManagers[re.source],re,fe,y),re.source&&(Z.rttCoords[re.source]=this._coordsAscendingStr[re.source][Z.tileID.key])}}return gp(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),sc[S]}return!1}}const Hd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Tp=d,Ud={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zs,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:r.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Ep={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class cu{constructor(c,f,y=!1){this.mousedown=P=>{this.startMove(P,N.mousePos(this.element,P)),N.addEventListener(window,"mousemove",this.mousemove),N.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.move(P,N.mousePos(this.element,P))},this.mouseup=P=>{this._rotatePitchHandler.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,P.targetTouches)[0],this.startMove(P,this._startPos),N.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,P.targetTouches)[0],this.move(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=f;const S=new qm;this._rotatePitchHandler=new qc({clickTolerance:3,move:(P,z)=>{const H=f.getBoundingClientRect(),W=new r.P((H.bottom-H.top)/2,(H.right-H.left)/2);return{bearingDelta:r.cx(new r.P(P.x,z.y),z,W),pitchDelta:y?-.5*(z.y-P.y):void 0}},moveStateManager:S,enable:!0,assignEvents:()=>{}}),this.map=c,N.addEventListener(f,"mousedown",this.mousedown),N.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(f,"touchcancel",this.reset)}startMove(c,f){this._rotatePitchHandler.dragStart(c,f),N.disableDrag()}move(c,f){const y=this.map,{bearingDelta:S,pitchDelta:P}=this._rotatePitchHandler.dragMove(c,f)||{};S&&y.setBearing(y.getBearing()+S),P&&y.setPitch(y.getPitch()+P)}off(){const c=this.element;N.removeEventListener(c,"mousedown",this.mousedown),N.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend),N.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){N.enableDrag(),N.removeEventListener(window,"mousemove",this.mousemove),N.removeEventListener(window,"mouseup",this.mouseup),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend)}}let ll;function Gd(I,c,f,y=!1){if(y||!f.getCoveringTilesDetailsProvider().allowWorldCopies())return I?.wrap();const S=new r.V(I.lng,I.lat);if(I=new r.V(I.lng,I.lat),c){const P=new r.V(I.lng-360,I.lat),z=new r.V(I.lng+360,I.lat),H=f.locationToScreenPoint(I).distSqr(c);f.locationToScreenPoint(P).distSqr(c)<H?I=P:f.locationToScreenPoint(z).distSqr(c)<H&&(I=z)}for(;Math.abs(I.lng-f.center.lng)>180;){const P=f.locationToScreenPoint(I);if(P.x>=0&&P.y>=0&&P.x<=f.width&&P.y<=f.height)break;I.lng>f.center.lng?I.lng-=360:I.lng+=360}return I.lng!==S.lng&&f.isPointOnMapSurface(f.locationToScreenPoint(I))?I:S}const hu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wd(I,c,f){const y=I.classList;for(const S in hu)y.remove(`maplibregl-${f}-anchor-${S}`);y.add(`maplibregl-${f}-anchor-${c}`)}class uu extends r.E{constructor(c){if(super(),this._onKeyPress=f=>{const y=f.code,S=f.charCode||f.keyCode;y!=="Space"&&y!=="Enter"&&S!==32&&S!==13||this.togglePopup()},this._onMapClick=f=>{const y=f.originalEvent.target,S=this._element;this._popup&&(y===S||S.contains(y))&&this.togglePopup()},this._update=f=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(f?.type==="terrain"||f?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=Gd(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let P="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?P="rotateX(0deg)":this._pitchAlignment==="map"&&(P=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,`${hu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${P} ${S}`),E.frameAsync(new AbortController).then((()=>{this._updateOpacity(f&&f.type==="moveend")})).catch((()=>{}))},this._onMove=f=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.l("dragstart"))),this.fire(new r.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.l("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._subpixelPositioning=c&&c.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,this.setOpacity(c?.opacity,c?.opacityWhenCovered),c&&c.element)this._element=c.element,this._offset=r.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div");const f=N.createNS("http://www.w3.org/2000/svg","svg"),y=41,S=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${y}px`),f.setAttributeNS(null,"width",`${S}px`),f.setAttributeNS(null,"viewBox",`0 0 ${S} ${y}`);const P=N.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const z=N.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const H=N.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(3.0, 29.0)"),H.setAttributeNS(null,"fill","#000000");const W=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ee of W){const Fe=N.createNS("http://www.w3.org/2000/svg","ellipse");Fe.setAttributeNS(null,"opacity","0.04"),Fe.setAttributeNS(null,"cx","10.5"),Fe.setAttributeNS(null,"cy","5.80029008"),Fe.setAttributeNS(null,"rx",Ee.rx),Fe.setAttributeNS(null,"ry",Ee.ry),H.appendChild(Fe)}const Z=N.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"fill",this._color);const J=N.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Z.appendChild(J);const se=N.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"fill","#000000");const re=N.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),se.appendChild(re);const fe=N.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fe.setAttributeNS(null,"fill","#FFFFFF");const ye=N.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Te=N.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#000000"),Te.setAttributeNS(null,"opacity","0.25"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962");const Me=N.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#FFFFFF"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962"),ye.appendChild(Te),ye.appendChild(Me),z.appendChild(H),z.appendChild(Z),z.appendChild(se),z.appendChild(fe),z.appendChild(ye),f.appendChild(z),f.setAttributeNS(null,"height",y*this._scale+"px"),f.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(f),this._offset=r.P.convert(c&&c.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(f=>{f.preventDefault()})),this._element.addEventListener("mousedown",(f=>{f.preventDefault()})),Wd(this._element,this._anchor,"marker"),c&&c.className)for(const f of c.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(c){return this.remove(),this._map=c,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",c._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),c.on("terrain",this._update),c.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=r.V.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const S=Math.abs(13.5)/Math.SQRT2;c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(c){return this._subpixelPositioning=c,this}getPopup(){return this._popup}togglePopup(){const c=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:c?(c.isOpen()?c.remove():(c.setLngLat(this._lngLat),c.addTo(this._map)),this):this}_updateOpacity(c=!1){var f,y;const S=(f=this._map)===null||f===void 0?void 0:f.terrain,P=this._map.transform.isLocationOccluded(this._lngLat);if(!S||P){const fe=P?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==fe&&(this._element.style.opacity=fe))}if(c)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const z=this._map,H=z.terrain.depthAtPoint(this._pos),W=z.terrain.getElevationForLngLat(this._lngLat,z.transform);if(z.transform.lngLatToCameraDepth(this._lngLat,W)-H<.006)return void(this._element.style.opacity=this._opacity);const Z=-this._offset.y/z.transform.pixelsPerMeter,J=Math.sin(z.getPitch()*Math.PI/180)*Z,se=z.terrain.depthAtPoint(new r.P(this._pos.x,this._pos.y-this._offset.y)),re=z.transform.lngLatToCameraDepth(this._lngLat,W+J)-se>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&re&&this._popup.remove(),this._element.style.opacity=re?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(c){return this._offset=r.P.convert(c),this._update(),this}addClassName(c){this._element.classList.add(c)}removeClassName(c){this._element.classList.remove(c)}toggleClassName(c){return this._element.classList.toggle(c)}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(c,f){return(this._opacity===void 0||c===void 0&&f===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),c!==void 0&&(this._opacity=c),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}const Mp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Kc=0,oc=!1;const Ip={maxWidth:100,unit:"metric"};function du(I,c,f){const y=f&&f.maxWidth||100,S=I._container.clientHeight/2,P=I._container.clientWidth/2,z=I.unproject([P-y/2,S]),H=I.unproject([P+y/2,S]),W=Math.round(I.project(H).x-I.project(z).x),Z=Math.min(y,W,I._container.clientWidth),J=z.distanceTo(H);if(f&&f.unit==="imperial"){const se=3.2808*J;se>5280?lc(c,Z,se/5280,I._getUIString("ScaleControl.Miles")):lc(c,Z,se,I._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?lc(c,Z,J/1852,I._getUIString("ScaleControl.NauticalMiles")):J>=1e3?lc(c,Z,J/1e3,I._getUIString("ScaleControl.Kilometers")):lc(c,Z,J,I._getUIString("ScaleControl.Meters"))}function lc(I,c,f,y){const S=(function(P){const z=Math.pow(10,`${Math.floor(P)}`.length-1);let H=P/z;return H=H>=10?10:H>=5?5:H>=3?3:H>=2?2:H>=1?1:(function(W){const Z=Math.pow(10,Math.ceil(-Math.log(W)/Math.LN10));return Math.round(W*Z)/Z})(H),z*H})(f);I.style.width=c*(S/f)+"px",I.innerHTML=`${S}&nbsp;${y}`}const Pp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},$d=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Xd(I){if(I){if(typeof I=="number"){const c=Math.round(Math.abs(I)/Math.SQRT2);return{center:new r.P(0,0),top:new r.P(0,I),"top-left":new r.P(c,c),"top-right":new r.P(-c,c),bottom:new r.P(0,-I),"bottom-left":new r.P(c,-c),"bottom-right":new r.P(-c,-c),left:new r.P(I,0),right:new r.P(-I,0)}}if(I instanceof r.P||Array.isArray(I)){const c=r.P.convert(I);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:r.P.convert(I.center||[0,0]),top:r.P.convert(I.top||[0,0]),"top-left":r.P.convert(I["top-left"]||[0,0]),"top-right":r.P.convert(I["top-right"]||[0,0]),bottom:r.P.convert(I.bottom||[0,0]),"bottom-left":r.P.convert(I["bottom-left"]||[0,0]),"bottom-right":r.P.convert(I["bottom-right"]||[0,0]),left:r.P.convert(I.left||[0,0]),right:r.P.convert(I.right||[0,0])}}return Xd(new r.P(0,0))}const Lp=d;o.AJAXError=r.cI,o.Event=r.l,o.Evented=r.E,o.LngLat=r.V,o.MercatorCoordinate=r.a9,o.Point=r.P,o.addProtocol=r.cJ,o.config=r.c,o.removeProtocol=r.cK,o.AttributionControl=Ap,o.BoxZoomHandler=Yc,o.CanvasSource=_e,o.CooperativeGesturesHandler=hi,o.DoubleClickZoomHandler=Cp,o.DragPanHandler=t0,o.DragRotateHandler=mo,o.EdgeInsets=al,o.FullscreenControl=class extends r.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var c;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((c=f?.shadowRoot)===null||c===void 0)&&c.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:r.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){N.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=N.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);N.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new r.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new r.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=va,o.GeolocateControl=class extends r.E{constructor(I){super(),this._onSuccess=c=>{if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new r.l("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new r.l("geolocate",c)),this._finish()}},this._updateCamera=c=>{const f=new r.V(c.coords.longitude,c.coords.latitude),y=c.coords.accuracy,S=this._map.getBearing(),P=r.e({bearing:S},this.options.fitBoundsOptions),z=st.fromLngLat(f,y);this._map.fitBounds(z,P,{geolocateSource:!0})},this._updateMarker=c=>{if(c){const f=new r.V(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=c.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=c=>{if(this._map){if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&oc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new r.l("error",c)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this._geolocateButton=N.create("button","maplibregl-ctrl-geolocate",this._container),N.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=c=>{if(this._map){if(c===!1){r.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new uu({element:this._dotElement}),this._circleElement=N.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new uu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(f=>{const y=f?.[0]instanceof ResizeObserverEntry;f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new r.l("trackuserlocationend")),this.fire(new r.l("userlocationlostfocus")))}))}},this.options=r.e({},Mp,I)}onAdd(I){return this._map=I,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return r._(this,arguments,void 0,(function*(c=!1){if(ll!==void 0&&!c)return ll;if(window.navigator.permissions===void 0)return ll=!!window.navigator.geolocation,ll;try{ll=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ll=!!window.navigator.geolocation}return ll}))})().then((c=>this._finishSetupUI(c))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Kc=0,oc=!1}_isOutOfMapMaxBounds(I){const c=this._map.getMaxBounds(),f=I.coords;return c&&(f.longitude<c.getWest()||f.longitude>c.getEast()||f.latitude<c.getSouth()||f.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const I=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&I))return;const c=this._map.project(I),f=this._map.unproject([c.x+100,c.y]),y=I.distanceTo(f)/100,S=2*this._accuracy/y;this._circleElement.style.width=`${S.toFixed(2)}px`,this._circleElement.style.height=`${S.toFixed(2)}px`}trigger(){if(!this._setup)return r.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Kc--,oc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new r.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.l("trackuserlocationstart")),this.fire(new r.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Kc++,Kc>1?(I={maximumAge:6e5,timeout:0},oc=!0):(I=this.options.positionOptions,oc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const c=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(c!=="mercator"&&c?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=N.create("button","maplibregl-ctrl-globe",this._container),N.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},o.Hash=xp,o.ImageSource=un,o.KeyboardHandler=Wn,o.LngLatBounds=st,o.LogoControl=i0,o.Map=class extends as{constructor(I){var c,f;r.cG.mark(r.cH.create);const y=Object.assign(Object.assign(Object.assign({},Ud),I),{canvasContextAttributes:Object.assign(Object.assign({},Ud.canvasContextAttributes),I.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const S=new Ts,P=new Bo;if(y.minZoom!==void 0&&S.setMinZoom(y.minZoom),y.maxZoom!==void 0&&S.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&S.setMinPitch(y.minPitch),y.maxPitch!==void 0&&S.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&S.setRenderWorldCopies(y.renderWorldCopies),y.transformConstrain!==null&&S.setConstrainOverride(y.transformConstrain),super(S,P,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Kx,this._controls=[],this._mapId=r.af(),this._lostContextStyle={style:null,images:null},this._contextLost=H=>{H.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const W of Object.values(this.style._layers))if(W.type==="custom"&&console.warn(`Custom layer with id '${W.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),W._listeners)for(const[Z]of Object.entries(W._listeners))console.warn(`Custom layer with id '${W.id}' had event listeners for event '${Z}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new r.l("webglcontextlost",{originalEvent:H}))},this._contextRestored=H=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new r.l("webglcontextrestored",{originalEvent:H}))},this._onMapScroll=H=>{if(H.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Hd),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this._zoomLevelsToOverscale=y.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=y.transformCameraUpdate,this.transformConstrain=y.transformConstrain,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,y.reduceMotion!==void 0&&(E.prefersReducedMotion=y.reduceMotion),this._imageQueueHandle=te.addThrottleControl((()=>this.isMoving())),this._requestManager=new he(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let H=!1;const W=_p((Z=>{this._trackResize&&!this._removed&&(this.resize(Z),this.redraw())}),50);this._resizeObserver=new ResizeObserver((Z=>{H?W(Z):H=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Vd(this,y),this._hash=y.hash&&new xp(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,r.e({},y.fitBoundsOptions,{duration:0}))));const z=typeof y.style=="string"||((f=(c=y.style)===null||c===void 0?void 0:c.projection)===null||f===void 0?void 0:f.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Ap(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new i0,y.logoPosition),this.on("style.load",(()=>{if(z||this._resizeTransform(),this.transform.unmodified){const H=r.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(H)}})),this.on("data",(H=>{this._update(H.dataType==="style"),this.fire(new r.l(`${H.dataType}data`,H))})),this.on("dataloading",(H=>{this.fire(new r.l(`${H.dataType}dataloading`,H))})),this.on("dataabort",(H=>{this.fire(new r.l("sourcedataabort",H))}))}_getMapId(){return this._mapId}setGlobalStateProperty(I,c){return this.style.setGlobalStateProperty(I,c),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(I,c){if(c===void 0&&(c=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new r.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=I.onAdd(this);this._controls.push(I);const y=this._controlPositions[c];return c.indexOf("bottom")!==-1?y.insertBefore(f,y.firstChild):y.appendChild(f),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new r.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(I);return c>-1&&this._controls.splice(c,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}coveringTiles(I){return fi(this.transform,I)}calculateCameraOptionsFromTo(I,c,f,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLat(f,this.transform)),super.calculateCameraOptionsFromTo(I,c,f,y)}resize(I,c=!0){const[f,y]=this._containerDimensions(),S=this._getClampedPixelRatio(f,y);if(this._resizeCanvas(f,y,S),this.painter.resize(f,y,S),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const H=this._getClampedPixelRatio(f,y);this._resizeCanvas(f,y,H),this.painter.resize(f,y,H)}this._resizeTransform(c);const P=!this._moving;return P&&(this.stop(),this.fire(new r.l("movestart",I)).fire(new r.l("move",I))),this.fire(new r.l("resize",I)),P&&this.fire(new r.l("moveend",I)),this}_resizeTransform(I=!0){var c;const[f,y]=this._containerDimensions();this.transform.resize(f,y,I),(c=this._requestedCameraState)===null||c===void 0||c.resize(f,y,I)}_getClampedPixelRatio(I,c){const{0:f,1:y}=this._maxCanvasSize,S=this.getPixelRatio(),P=I*S,z=c*S;return Math.min(P>f?f/P:1,z>y?y/z:1)*S}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(st.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom){const c=this._getTransformForUpdate();return c.setMinZoom(I),this._applyUpdatedTransform(c),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom){const c=this._getTransformForUpdate();return c.setMaxZoom(I),this._applyUpdatedTransform(c),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}setTransformConstrain(I){return this.transform.setConstrainOverride(I),this._update()}project(I){return this.transform.locationToScreenPoint(r.V.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(r.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,c,f){if(I==="mouseenter"||I==="mouseover"){let y=!1;return{layers:c,listener:f,delegates:{mousemove:P=>{const z=c.filter((W=>this.getLayer(W))),H=z.length!==0?this.queryRenderedFeatures(P.point,{layers:z}):[];H.length?y||(y=!0,f.call(this,new Sr(I,this,P.originalEvent,{features:H}))):y=!1},mouseout:()=>{y=!1}}}}if(I==="mouseleave"||I==="mouseout"){let y=!1;return{layers:c,listener:f,delegates:{mousemove:z=>{const H=c.filter((W=>this.getLayer(W)));(H.length!==0?this.queryRenderedFeatures(z.point,{layers:H}):[]).length?y=!0:y&&(y=!1,f.call(this,new Sr(I,this,z.originalEvent)))},mouseout:z=>{y&&(y=!1,f.call(this,new Sr(I,this,z.originalEvent)))}}}}{const y=S=>{const P=c.filter((H=>this.getLayer(H))),z=P.length!==0?this.queryRenderedFeatures(S.point,{layers:P}):[];z.length&&(S.features=z,f.call(this,S),delete S.features)};return{layers:c,listener:f,delegates:{[I]:y}}}}_saveDelegatedListener(I,c){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(c)}_removeDelegatedListener(I,c,f){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const y=this._delegatedListeners[I];for(let S=0;S<y.length;S++){const P=y[S];if(P.listener===f&&P.layers.length===c.length&&P.layers.every((z=>c.includes(z)))){for(const z in P.delegates)this.off(z,P.delegates[z]);return void y.splice(S,1)}}}on(I,c,f){if(f===void 0)return super.on(I,c);const y=typeof c=="string"?[c]:c,S=this._createDelegatedListener(I,y,f);this._saveDelegatedListener(I,S);for(const P in S.delegates)this.on(P,S.delegates[P]);return{unsubscribe:()=>{this._removeDelegatedListener(I,y,f)}}}once(I,c,f){if(f===void 0)return super.once(I,c);const y=typeof c=="string"?[c]:c,S=this._createDelegatedListener(I,y,f);for(const P in S.delegates){const z=S.delegates[P];S.delegates[P]=(...H)=>{this._removeDelegatedListener(I,y,f),z(...H)}}this._saveDelegatedListener(I,S);for(const P in S.delegates)this.once(P,S.delegates[P]);return this}off(I,c,f){return f===void 0?super.off(I,c):(this._removeDelegatedListener(I,typeof c=="string"?[c]:c,f),this)}queryRenderedFeatures(I,c){if(!this.style)return[];let f;const y=I instanceof r.P||Array.isArray(I),S=y?I:[[0,0],[this.transform.width,this.transform.height]];if(c=c||(y?{}:I)||{},S instanceof r.P||typeof S[0]=="number")f=[r.P.convert(S)];else{const P=r.P.convert(S[0]),z=r.P.convert(S[1]);f=[P,new r.P(z.x,P.y),z,new r.P(P.x,z.y),P]}return this.style.queryRenderedFeatures(f,c,this.transform)}querySourceFeatures(I,c){return this.style.querySourceFeatures(I,c)}setStyle(I,c){return(c=r.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(I,c))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const c=this._locale[I];if(c==null)throw new Error(`Missing UI string '${I}'`);return c}_updateStyle(I,c){var f,y;if(c.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(I,c)));const S=this.style&&c.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new ds(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,c,S):this.style.loadJSON(I,c,S),this):((y=(f=this.style)===null||f===void 0?void 0:f.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ds(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,c){if(typeof I=="string"){const f=this._requestManager.transformRequest(I,"Style");r.j(f,new AbortController).then((y=>{this._updateDiff(y.data,c)})).catch((y=>{y&&this.fire(new r.k(y))}))}else typeof I=="object"&&this._updateDiff(I,c)}_updateDiff(I,c){try{this.style.setState(I,c)&&this._update(!0)}catch(f){r.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(I,c)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():r.w("There is no style added to the map.")}addSource(I,c){return this._lazyInitEmptyStyle(),this.style.addSource(I,c),this._update(!0)}isSourceLoaded(I){const c=this.style&&this.style.tileManagers[I];if(c!==void 0)return c.loaded();this.fire(new r.k(new Error(`There is no tile manager with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const c=this.style.tileManagers[I.source];if(!c)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&c.reload();for(const f in this.style._layers){const y=this.style._layers[f];y.type==="hillshade"&&y.source===I.source&&r.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===I.source&&r.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Sa(this.painter,c,I),this.painter.renderToTexture=new lu(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=f=>{var y;f.dataType==="style"?this.terrain.tileManager.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=f.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new r.l("terrain",{terrain:I})),this}getTerrain(){var I,c;return(c=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&c!==void 0?c:null}areTilesLoaded(){const I=this.style&&this.style.tileManagers;for(const c of Object.values(I))if(!c.areTilesLoaded())return!1;return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}setSourceTileLodParams(I,c,f){if(f){const y=this.getSource(f);if(!y)throw new Error(`There is no source with ID "${f}", cannot set LOD parameters`);y.calculateTileZoom=zi(Math.max(1,I),Math.max(1,c))}else for(const y in this.style.tileManagers)this.style.tileManagers[y].getSource().calculateTileZoom=zi(Math.max(1,I),Math.max(1,c));return this._update(!0),this}refreshTiles(I,c){const f=this.style.tileManagers[I];if(!f)throw new Error(`There is no tile manager with ID "${I}", cannot refresh tile`);c===void 0?f.reload(!0):f.refreshTiles(c.map((y=>new r.ac(y.z,y.x,y.y))))}addImage(I,c,f={}){const{pixelRatio:y=1,sdf:S=!1,stretchX:P,stretchY:z,content:H,textFitWidth:W,textFitHeight:Z}=f;if(this._lazyInitEmptyStyle(),!(c instanceof HTMLImageElement||r.b(c))){if(c.width===void 0||c.height===void 0)return this.fire(new r.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:J,height:se,data:re}=c,fe=c;return this.style.addImage(I,{data:new r.R({width:J,height:se},new Uint8Array(re)),pixelRatio:y,stretchX:P,stretchY:z,content:H,textFitWidth:W,textFitHeight:Z,sdf:S,version:0,userImage:fe}),fe.onAdd&&fe.onAdd(this,I),this}}{const{width:J,height:se,data:re}=E.getImageData(c);this.style.addImage(I,{data:new r.R({width:J,height:se},re),pixelRatio:y,stretchX:P,stretchY:z,content:H,textFitWidth:W,textFitHeight:Z,sdf:S,version:0})}}updateImage(I,c){const f=this.style.getImage(I);if(!f)return this.fire(new r.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=c instanceof HTMLImageElement||r.b(c)?E.getImageData(c):c,{width:S,height:P,data:z}=y;if(S===void 0||P===void 0)return this.fire(new r.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==f.data.width||P!==f.data.height)return this.fire(new r.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const H=!(c instanceof HTMLImageElement||r.b(c));return f.data.replace(z,H),this.style.updateImage(I,f),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new r.k(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return te.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,c){return this._lazyInitEmptyStyle(),this.style.addLayer(I,c),this._update(!0)}moveLayer(I,c){return this.style.moveLayer(I,c),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,c,f){return this.style.setLayerZoomRange(I,c,f),this._update(!0)}setFilter(I,c,f={}){return this.style.setFilter(I,c,f),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,c,f,y={}){return this.style.setPaintProperty(I,c,f,y),this._update(!0)}getPaintProperty(I,c){return this.style.getPaintProperty(I,c)}setLayoutProperty(I,c,f,y={}){return this.style.setLayoutProperty(I,c,f,y),this._update(!0)}getLayoutProperty(I,c){return this.style.getLayoutProperty(I,c)}setGlyphs(I,c={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,c),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,c,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,c,f,(y=>{y||this._update(!0)})),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,c={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,c,(f=>{f||this._update(!0)})),this}setLight(I,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,c),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,c={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,c),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,c){return this.style.setFeatureState(I,c),this._update()}removeFeatureState(I,c){return this.style.removeFeatureState(I,c),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,c=0;return this._container&&(I=this._container.clientWidth||400,c=this._container.clientHeight||300),[I,c]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const c=this._canvasContainer=N.create("div","maplibregl-canvas-container",I);this._interactive&&c.classList.add("maplibregl-interactive"),this._canvas=N.create("canvas","maplibregl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),y=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],y);const S=this._controlContainer=N.create("div","maplibregl-control-container",I),P=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((z=>{P[z]=N.create("div",`maplibregl-ctrl-${z} `,S)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,c,f){this._canvas.width=Math.floor(f*I),this._canvas.height=Math.floor(f*c),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let c=null;this._canvas.addEventListener("webglcontextcreationerror",(y=>{c={requestedAttributes:I},y&&(c.statusMessage=y.statusMessage,c.type=y.type)}),{once:!0});let f=null;if(f=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!f){const y="Failed to initialize WebGL";throw c?(c.message=y,new Error(JSON.stringify(c))):new Error(y)}this.painter=new Wm(f,this.transform),$.testSupport(f)}migrateProjection(I,c){super.migrateProjection(I,c),this.painter.transform=I,this.fire(new r.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var c,f,y,S,P;const z=this._idleTriggered?this._fadeDuration:0,H=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let W=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const se=this.transform.zoom,re=O();this.style.zoomHistory.update(se,re);const fe=new r.H(se,{now:re,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ye=fe.crossFadingFactor();ye===1&&ye===this._crossFadingFactor||(W=!0,this._crossFadingFactor=ye),this.style.update(fe)}const Z=((f=this.style.projection)===null||f===void 0?void 0:f.transitionState)>0!==H;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((S=this.style.projection)===null||S===void 0?void 0:S.transitionState,(P=this.style.projection)===null||P===void 0?void 0:P.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||Z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,Z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new r.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,r.cG.mark(r.cH.load),this.fire(new r.l("load"))),this.style&&(this.style.hasTransitions()||W)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const J=this._sourcesDirty||this._styleDirty||this._placementDirty;return J||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.l("idle")),!this._loaded||this._fullyLoaded||J||(this._fullyLoaded=!0,r.cG.mark(r.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),te.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const c=this.painter.context.gl.getExtension("WEBGL_lose_context");c?.loseContext&&c.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),N.remove(this._canvasContainer),N.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),r.cG.clearMetrics(),this._removed=!0,this.fire(new r.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,E.frame(this._frameRequest,(I=>{r.cG.frame(I),this._frameRequest=null;try{this._render(I)}catch(c){if(!r.Z(c)&&!(function(f){return f.message===up})(c))throw c}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return Tp}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},o.MapMouseEvent=Sr,o.MapTouchEvent=eu,o.MapWheelEvent=Ym,o.Marker=uu,o.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const c=this._map.getZoom(),f=c===this._map.getMaxZoom(),y=c===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(c,f)=>{const y=this._map._getUIString(`NavigationControl.${f}`);c.title=y,c.setAttribute("aria-label",y)},this.options=r.e({},Ep,I),this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(c=>this._map.zoomIn({},{originalEvent:c}))),N.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(c=>this._map.zoomOut({},{originalEvent:c}))),N.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})})),this._compassIcon=N.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,c){const f=N.create("button",I,this._container);return f.type="button",f.addEventListener("click",c),f}},o.Popup=class extends r.E{constructor(I){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new r.l("close"))),this),this._onMouseUp=c=>{this._update(c.point)},this._onMouseMove=c=>{this._update(c.point)},this._onDrag=c=>{this._update(c.point)},this._update=c=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=N.create("div","maplibregl-popup",this._map.getContainer()),this._tip=N.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Gd(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!c)return;const f=this._flatPos=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&c?c:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const S=Xd(this.options.offset);if(!y){const z=this._container.offsetWidth,H=this._container.offsetHeight;let W;W=f.y+S.bottom.y<H?["top"]:f.y>this._map.transform.height-H?["bottom"]:[],f.x<z/2?W.push("left"):f.x>this._map.transform.width-z/2&&W.push("right"),y=W.length===0?"bottom":W.join("-")}let P=f.add(S[y]);this.options.subpixelPositioning||(P=P.round()),N.setTransform(this._container,`${hu[y]} translate(${P.x}px,${P.y}px)`),Wd(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=r.e(Object.create(Pp),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new r.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=r.V.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const c=document.createDocumentFragment(),f=document.createElement("body");let y;for(f.innerHTML=I;y=f.firstChild,y;)c.appendChild(y);return this.setDOMContent(c)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=N.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector($d);I&&I.focus()}},o.RasterDEMTileSource=Gt,o.RasterTileSource=Qa,o.ScaleControl=class{constructor(I){this._onMove=()=>{du(this._map,this._container,this.options)},this.setUnit=c=>{this.options.unit=c,du(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ip),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=Nd,o.Style=ds,o.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=N.create("button","maplibregl-ctrl-terrain",this._container),N.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){N.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Qm,o.TwoFingersTouchRotateHandler=Sp,o.TwoFingersTouchZoomHandler=wp,o.TwoFingersTouchZoomRotateHandler=ru,o.VectorTileSource=Bi,o.VideoSource=tt,o.addSourceType=(I,c)=>r._(void 0,void 0,void 0,(function*(){if(be(I))throw new Error(`A source type called "${I}" already exists.`);((f,y)=>{xe[f]=y})(I,c)})),o.clearPrewarmedResources=function(){const I=ri;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(jt),ri=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.createTileMesh=qi,o.getMaxParallelImageRequests=function(){return r.c.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return Qe().getRTLTextPluginStatus()},o.getVersion=function(){return Lp},o.getWorkerCount=function(){return ui.workerCount},o.getWorkerUrl=function(){return r.c.WORKER_URL},o.importScriptInWorkers=function(I){return Li().broadcast("IS",I)},o.isTimeFrozen=function(){return F.isFrozen()},o.now=O,o.prewarm=function(){Pi().acquire(jt)},o.restoreNow=function(){F.restoreNow()},o.setMaxParallelImageRequests=function(I){r.c.MAX_PARALLEL_IMAGE_REQUESTS=I},o.setNow=function(I){F.setNow(I)},o.setRTLTextPlugin=function(I,c){return Qe().setRTLTextPlugin(I,c)},o.setWorkerCount=function(I){ui.workerCount=I},o.setWorkerUrl=function(I){r.c.WORKER_URL=I}}));var a=t;return a}))})(d_)),d_.exports}var LR=PR();const DR=mT(LR);(function(s,e,t){function i(n,a){for(;(n=n.parentElement)&&!n.classList.contains(a););return n}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(n,a){this._map=n,this._container=n._container,this._overlayPane=n._panes.overlayPane,this._popupPane=n._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var o=L.version.split(".");parseInt(o[0],10)===1&&parseInt(o[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(L.DomUtil.disableTextSelection(),n.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(n){L.setOptions(this,n)},_fireCreatedEvent:function(n){this._map.fire(L.Draw.Event.CREATED,{layer:n,layerType:this.type})},_cancelDrawing:function(n){n.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(n,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,n,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var n=this._markers.pop(),a=this._poly,o=a.getLatLngs(),r=o.splice(-1,1)[0];this._poly.setLatLngs(o),this._markerGroup.removeLayer(n),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(r,!1)}},addVertex:function(n){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(n))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(n)),this._poly.addLatLng(n),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(n,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var n=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(n[n.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(n){var a=this._map.mouseEventToLayerPoint(n.originalEvent),o=this._map.layerPointToLatLng(a);this._currentLatLng=o,this._updateTooltip(o),this._updateGuide(a),this._mouseMarker.setLatLng(o),L.DomEvent.preventDefault(n.originalEvent)},_vertexChanged:function(n,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(n,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(n){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(n),this._clickHandled=!0,this._disableNewMarkers();var a=n.originalEvent,o=a.clientX,r=a.clientY;this._startPoint.call(this,o,r)}},_startPoint:function(n,a){this._mouseDownOrigin=L.point(n,a)},_onMouseUp:function(n){var a=n.originalEvent,o=a.clientX,r=a.clientY;this._endPoint.call(this,o,r,n),this._clickHandled=null},_endPoint:function(n,a,o){if(this._mouseDownOrigin){var r=L.point(n,a).distanceTo(this._mouseDownOrigin),d=this._calculateFinishDistance(o.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(o.latlng),this._finishShape()):d<10&&L.Browser.touch?this._finishShape():Math.abs(r)<9*(s.devicePixelRatio||1)&&this.addVertex(o.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(n){var a,o,r=n.originalEvent;!r.touches||!r.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=r.touches[0].clientX,o=r.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,o),this._endPoint.call(this,a,o,n),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(n){var a;if(this._markers.length>0){var o;if(this.type===L.Draw.Polyline.TYPE)o=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;o=this._markers[0]}var r=this._map.latLngToContainerPoint(o.getLatLng()),d=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),g=this._map.latLngToContainerPoint(d.getLatLng());a=r.distanceTo(g)}else a=1/0;return a},_updateFinishHandler:function(){var n=this._markers.length;n>1&&this._markers[n-1].on("click",this._finishShape,this),n>2&&this._markers[n-2].off("click",this._finishShape,this)},_createMarker:function(n){var a=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(n){var a=this._markers?this._markers.length:0;a>0&&(n=n||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),n))},_updateTooltip:function(n){var a=this._getTooltipText();n&&this._tooltip.updatePosition(n),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(n,a){var o,r,d,g=Math.floor(Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2))),x=this.options.guidelineDistance,v=this.options.maxGuideLineLength,k=g>v?g-v:x;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));k<g;k+=this.options.guidelineDistance)o=k/g,r={x:Math.floor(n.x*(1-o)+o*a.x),y:Math.floor(n.y*(1-o)+o*a.y)},d=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),d.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(d,r)},_updateGuideColor:function(n){if(this._guidesContainer)for(var a=0,o=this._guidesContainer.childNodes.length;a<o;a++)this._guidesContainer.childNodes[a].style.backgroundColor=n},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var n,a,o=this.options.showLength;return this._markers.length===0?n={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=o?this._getMeasurementString():"",n=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),n},_updateRunningMeasure:function(n,a){var o,r,d=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(o=d-(a?2:1),r=L.GeometryUtil.isVersion07x()?n.distanceTo(this._markers[o].getLatLng())*(this.options.factor||1):this._map.distance(n,this._markers[o].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=r*(a?1:-1))},_getMeasurementString:function(){var n,a=this._currentLatLng,o=this._markers[this._markers.length-1].getLatLng();return n=L.GeometryUtil.isVersion07x()?o&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(o)*(this.options.factor||1):this._measurementRunningTotal||0:o&&a?this._measurementRunningTotal+this._map.distance(a,o)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(n,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var n=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(n,a){L.Draw.Polyline.prototype.initialize.call(this,n,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var n=this._markers.length;n===1&&this._markers[0].on("click",this._finishShape,this),n>2&&(this._markers[n-1].on("dblclick",this._finishShape,this),n>3&&this._markers[n-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var n,a;return this._markers.length===0?n=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(n=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(n=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:n,subtext:a}},_getMeasurementString:function(){var n=this._area,a="";return n||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),n&&(a+="<br>"+L.GeometryUtil.readableArea(n,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(n,a){var o;!this.options.allowIntersection&&this.options.showArea&&(o=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(o)),L.Draw.Polyline.prototype._vertexChanged.call(this,n,a)},_cleanUpShape:function(){var n=this._markers.length;n>0&&(this._markers[0].off("click",this._finishShape,this),n>2&&this._markers[n-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(n,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,n,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(n){this._isDrawing=!0,this._startLatLng=n.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(n.originalEvent)},_onMouseMove:function(n){var a=n.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(n,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(n){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!i(n.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(n){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,n)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,n),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_getTooltipText:function(){var n,a,o,r=L.Draw.SimpleShape.prototype._getTooltipText.call(this),d=this._shape,g=this.options.showArea;return d&&(n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(n),o=g?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:r.text,subtext:o}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(n,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(n){var a=n.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(n){return new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(n){this._onMouseMove(n),this._onClick()},_fireCreatedEvent:function(){var n=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(n,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,a)},_fireCreatedEvent:function(){var n=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)},_createMarker:function(n){return new L.CircleMarker(n,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(n,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,a)},_drawShape:function(n){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(n);else var a=this._map.distance(this._startLatLng,n);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_onMouseMove:function(n){var a,o=n.latlng,r=this.options.showRadius,d=this.options.metric;if(this._tooltip.updatePosition(o),this._isDrawing){this._drawShape(o),a=this._shape.getRadius().toFixed(1);var g="";r&&(g=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,d,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:g})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(n,a){this._marker=n,L.setOptions(this,a)},addHooks:function(){var n=this._marker;n.dragging.enable(),n.on("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},removeHooks:function(){var n=this._marker;n.dragging.disable(),n.off("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},_onDragEnd:function(n){var a=n.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var n=this._marker._icon;n&&(n.style.display="none",L.DomUtil.hasClass(n,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,-4)):(L.DomUtil.addClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,4)),n.style.display="")},_offsetMarker:function(n,a){var o=parseInt(n.style.marginTop,10)-a,r=parseInt(n.style.marginLeft,10)-a;n.style.marginTop=o+"px",n.style.marginLeft=r+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(n){this.latlngs=[n._latlngs],n._holes&&(this.latlngs=this.latlngs.concat(n._holes)),this._poly=n,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(n){for(var a=0;a<this._verticesHandlers.length;a++)n(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(n){n.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(n){n.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(n){n.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var n=0;n<this.latlngs.length;n++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[n],this._poly.options.poly))},_updateLatLngs:function(n){this.latlngs=[n.layer._latlngs],n.layer._holes&&(this.latlngs=this.latlngs.concat(n.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(n,a,o){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=n,o&&o.drawError&&(o.drawError=L.Util.extend({},this.options.drawError,o.drawError)),this._latlngs=a,L.setOptions(this,o)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var n=this._poly,a=n._path;n instanceof L.Polygon||(n.options.fill=!1,n.options.editing&&(n.options.editing.fill=!1)),a&&n.options.editing&&n.options.editing.className&&(n.options.original.className&&n.options.original.className.split(" ").forEach(function(o){L.DomUtil.removeClass(a,o)}),n.options.editing.className.split(" ").forEach(function(o){L.DomUtil.addClass(a,o)})),n.setStyle(n.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var n=this._poly,a=n._path;a&&n.options.editing&&n.options.editing.className&&(n.options.editing.className.split(" ").forEach(function(o){L.DomUtil.removeClass(a,o)}),n.options.original.className&&n.options.original.className.split(" ").forEach(function(o){L.DomUtil.addClass(a,o)})),n.setStyle(n.options.original),n._map&&(n._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var n,a,o,r,d=this._defaultShape();for(n=0,o=d.length;n<o;n++)r=this._createMarker(d[n],n),r.on("click",this._onMarkerClick,this),r.on("contextmenu",this._onContextMenu,this),this._markers.push(r);var g,x;for(n=0,a=o-1;n<o;a=n++)(n!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(g=this._markers[a],x=this._markers[n],this._createMiddleMarker(g,x),this._updatePrevNext(g,x))},_createMarker:function(n,a){var o=new L.Marker.Touch(n,{draggable:!0,icon:this.options.icon});return o._origLatLng=n,o._index=a,o.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(o),o},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var n=this._defaultShape(),a=[].splice.apply(n,arguments);return this._poly._convertLatLngs(n,!0),this._poly.redraw(),a},_removeMarker:function(n){var a=n._index;this._markerGroup.removeLayer(n),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(n){var a=n.target,o=this._poly,r=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),o.options.poly){var d=o._map._editTooltip;if(!o.options.poly.allowIntersection&&o.intersects()){L.extend(a._origLatLng,r),a.setLatLng(r);var g=o.options.color;o.setStyle({color:this.options.drawError.color}),d&&d.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){o.setStyle({color:g}),d&&d.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var x=this._poly.getLatLngs();this._poly._convertLatLngs(x,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(n){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,o=n.target;this._defaultShape().length<a||(this._removeMarker(o),this._updatePrevNext(o._prev,o._next),o._middleLeft&&this._markerGroup.removeLayer(o._middleLeft),o._middleRight&&this._markerGroup.removeLayer(o._middleRight),o._prev&&o._next?this._createMiddleMarker(o._prev,o._next):o._prev?o._next||(o._prev._middleRight=null):o._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(n){var a=n.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(n){var a=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),o=this._map.layerPointToLatLng(a),r=n.target;L.extend(r._origLatLng,o),r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(n,a){this._markerGroup.eachLayer(function(o){o._index>n&&(o._index+=a)})},_createMiddleMarker:function(n,a){var o,r,d,g=this._getMiddleLatLng(n,a),x=this._createMarker(g);x.setOpacity(.6),n._middleRight=a._middleLeft=x,r=function(){x.off("touchmove",r,this);var v=a._index;x._index=v,x.off("click",o,this).on("click",this._onMarkerClick,this),g.lat=x.getLatLng().lat,g.lng=x.getLatLng().lng,this._spliceLatLngs(v,0,g),this._markers.splice(v,0,x),x.setOpacity(1),this._updateIndexes(v,1),a._index++,this._updatePrevNext(n,x),this._updatePrevNext(x,a),this._poly.fire("editstart")},d=function(){x.off("dragstart",r,this),x.off("dragend",d,this),x.off("touchmove",r,this),this._createMiddleMarker(n,x),this._createMiddleMarker(x,a)},o=function(){r.call(this),d.call(this),this._fireEdit()},x.on("click",o,this).on("dragstart",r,this).on("dragend",d,this).on("touchmove",r,this),this._markerGroup.addLayer(x)},_updatePrevNext:function(n,a){n&&(n._next=a),a&&(a._prev=n)},_getMiddleLatLng:function(n,a){var o=this._poly._map,r=o.project(n.getLatLng()),d=o.project(a.getLatLng());return o.unproject(r._add(d)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(n,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=n,L.Util.setOptions(this,a)},addHooks:function(){var n=this._shape;this._shape._map&&(this._map=this._shape._map,n.setStyle(n.options.editing),n._map&&(this._map=n._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var n=this._shape;if(n.setStyle(n.options.original),n._map){this._unbindMarker(this._moveMarker);for(var a=0,o=this._resizeMarkers.length;a<o;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(n,a){var o=new L.Marker.Touch(n,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(o),this._markerGroup.addLayer(o),o},_bindMarker:function(n){n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(n){n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(n){n.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(n){var a=n.target,o=a.getLatLng();a===this._moveMarker?this._move(o):this._resize(o),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(n){n.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(n){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n),typeof this._getCorners=="function"){var a=this._getCorners(),o=n.target,r=o._cornerIndex;o.setOpacity(0),this._oppositeCorner=a[(r+2)%4],this._toggleCornerMarkers(0,r)}this._shape.fire("editstart")},_onTouchMove:function(n){var a=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),o=this._map.layerPointToLatLng(a);return n.target===this._moveMarker?this._move(o):this._resize(o),this._shape.redraw(),!1},_onTouchEnd:function(n){n.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getBounds(),a=n.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var n=this._getCorners();this._resizeMarkers=[];for(var a=0,o=n.length;a<o;a++)this._resizeMarkers.push(this._createMarker(n[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(n){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n);var a=this._getCorners(),o=n.target,r=o._cornerIndex;this._oppositeCorner=a[(r+2)%4],this._toggleCornerMarkers(0,r)},_onMarkerDragEnd:function(n){var a,o,r=n.target;r===this._moveMarker&&(a=this._shape.getBounds(),o=a.getCenter(),r.setLatLng(o)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,n)},_move:function(n){for(var a,o=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=this._shape.getBounds(),d=r.getCenter(),g=[],x=0,v=o.length;x<v;x++)a=[o[x].lat-d.lat,o[x].lng-d.lng],g.push([n.lat+a[0],n.lng+a[1]]);this._shape.setLatLngs(g),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(n){var a;this._shape.setBounds(L.latLngBounds(n,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var n=this._shape.getBounds();return[n.getNorthWest(),n.getNorthEast(),n.getSouthEast(),n.getSouthWest()]},_toggleCornerMarkers:function(n){for(var a=0,o=this._resizeMarkers.length;a<o;a++)this._resizeMarkers[a].setOpacity(n)},_repositionCornerMarkers:function(){for(var n=this._getCorners(),a=0,o=this._resizeMarkers.length;a<o;a++)this._resizeMarkers[a].setLatLng(n[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getLatLng();this._moveMarker=this._createMarker(n,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(n){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(n);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(n),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var n=this._shape.getLatLng(),a=this._getResizeMarkerPoint(n);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(n){var a=this._shape._radius*Math.cos(Math.PI/4),o=this._map.project(n);return this._map.unproject([o.x+a,o.y-a])},_resize:function(n){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(n):radius=this._map.distance(a,n),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(n,a){var o={};if(n.touches!==void 0){if(!n.touches.length)return;o=n.touches[0]}else if(n.pointerType!=="touch"||(o=n,!this._filterClick(n)))return;var r=this._map.mouseEventToContainerPoint(o),d=this._map.mouseEventToLayerPoint(o),g=this._map.layerPointToLatLng(d);this._map.fire(a,{latlng:g,layerPoint:d,containerPoint:r,pageX:o.pageX,pageY:o.pageY,originalEvent:n})},_filterClick:function(n){var a=n.timeStamp||n.originalEvent.timeStamp,o=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return o&&o>100&&o<500||n.target._simulatedClick&&!n._simulated?(L.DomEvent.stop(n),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(n){this._map._loaded&&this._touchEvent(n,"touchstart")},_onTouchEnd:function(n){this._map._loaded&&this._touchEvent(n,"touchend")},_onTouchCancel:function(n){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(n,a)}},_onTouchLeave:function(n){this._map._loaded&&this._touchEvent(n,"touchleave")},_onTouchMove:function(n){this._map._loaded&&this._touchEvent(n,"touchmove")},_detectIE:function(){var n=s.navigator.userAgent,a=n.indexOf("MSIE ");if(a>0)return parseInt(n.substring(a+5,n.indexOf(".",a)),10);if(n.indexOf("Trident/")>0){var o=n.indexOf("rv:");return parseInt(n.substring(o+3,n.indexOf(".",o)),10)}var r=n.indexOf("Edge/");return r>0&&parseInt(n.substring(r+5,n.indexOf(".",r)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var n=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(n,"leaflet-clickable"),L.DomEvent.on(n,"click",this._onMouseClick,this),L.DomEvent.on(n,"keypress",this._onKeyPress,this);for(var o=0;o<a.length;o++)L.DomEvent.on(n,a[o],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var n=s.navigator.userAgent,a=n.indexOf("MSIE ");if(a>0)return parseInt(n.substring(a+5,n.indexOf(".",a)),10);if(n.indexOf("Trident/")>0){var o=n.indexOf("rv:");return parseInt(n.substring(o+3,n.indexOf(".",o)),10)}var r=n.indexOf("Edge/");return r>0&&parseInt(n.substring(r+5,n.indexOf(".",r)),10)}}),L.LatLngUtil={cloneLatLngs:function(n){for(var a=[],o=0,r=n.length;o<r;o++)Array.isArray(n[o])?a.push(L.LatLngUtil.cloneLatLngs(n[o])):a.push(this.cloneLatLng(n[o]));return a},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}},(function(){var n={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var o,r,d=a.length,g=0,x=Math.PI/180;if(d>2){for(var v=0;v<d;v++)o=a[v],r=a[(v+1)%d],g+=(r.lng-o.lng)*x*(2+Math.sin(o.lat*x)+Math.sin(r.lat*x));g=6378137*g*6378137/2}return Math.abs(g)},formattedNumber:function(a,o){var r=parseFloat(a).toFixed(o),d=L.drawLocal.format&&L.drawLocal.format.numeric,g=d&&d.delimiters,x=g&&g.thousands,v=g&&g.decimal;if(x||v){var k=r.split(".");r=x?k[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+x):k[0],v=v||".",k.length>1&&(r=r+v+k[1])}return r},readableArea:function(a,o,x){var d,g,x=L.Util.extend({},n,x);return o?(g=["ha","m"],type=typeof o,type==="string"?g=[o]:type!=="boolean"&&(g=o),d=a>=1e6&&g.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,x.km)+" km":a>=1e4&&g.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,x.ha)+" ha":L.GeometryUtil.formattedNumber(a,x.m)+" m"):(a/=.836127,d=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,x.mi)+" mi":a>=4840?L.GeometryUtil.formattedNumber(a/4840,x.ac)+" acres":L.GeometryUtil.formattedNumber(a,x.yd)+" yd"),d},readableDistance:function(a,o,r,d,v){var x,v=L.Util.extend({},n,v);switch(o?typeof o=="string"?o:"metric":r?"feet":d?"nauticalMile":"yards"){case"metric":x=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,v.km)+" km":L.GeometryUtil.formattedNumber(a,v.m)+" m";break;case"feet":a*=3.28083,x=L.GeometryUtil.formattedNumber(a,v.ft)+" ft";break;case"nauticalMile":a*=.53996,x=L.GeometryUtil.formattedNumber(a/1e3,v.nm)+" nm";break;case"yards":default:a*=1.09361,x=a>1760?L.GeometryUtil.formattedNumber(a/1760,v.mi)+" miles":L.GeometryUtil.formattedNumber(a,v.yd)+" yd"}return x},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(n,a,o,r){return this._checkCounterclockwise(n,o,r)!==this._checkCounterclockwise(a,o,r)&&this._checkCounterclockwise(n,a,o)!==this._checkCounterclockwise(n,a,r)},_checkCounterclockwise:function(n,a,o){return(o.y-n.y)*(a.x-n.x)>(a.y-n.y)*(o.x-n.x)}}),L.Polyline.include({intersects:function(){var n,a,o,r=this._getProjectedPoints(),d=r?r.length:0;if(this._tooFewPointsForIntersection())return!1;for(n=d-1;n>=3;n--)if(a=r[n-1],o=r[n],this._lineSegmentsIntersectsRange(a,o,n-2))return!0;return!1},newLatLngIntersects:function(n,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(n),a)},newPointIntersects:function(n,a){var o=this._getProjectedPoints(),r=o?o.length:0,d=o?o[r-1]:null,g=r-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(d,n,g,a?1:0)},_tooFewPointsForIntersection:function(n){var a=this._getProjectedPoints(),o=a?a.length:0;return o+=n||0,!a||o<=3},_lineSegmentsIntersectsRange:function(n,a,o,r){var d,g,x=this._getProjectedPoints();r=r||0;for(var v=o;v>r;v--)if(d=x[v-1],g=x[v],L.LineUtil.segmentsIntersect(n,a,d,g))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var n=[],a=this._defaultShape(),o=0;o<a.length;o++)n.push(this._map.latLngToLayerPoint(a[o]));return n}}),L.Polygon.include({intersects:function(){var n,a,o,r,d=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(n=d.length,a=d[0],o=d[n-1],r=n-2,this._lineSegmentsIntersectsRange(o,a,r,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(n){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,n);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(n){var a,o=L.DomUtil.create("div","leaflet-draw"),r=!1;for(var d in this._toolbars)this._toolbars.hasOwnProperty(d)&&(a=this._toolbars[d].addToolbar(n))&&(r||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),r=!0),o.appendChild(a));return o},onRemove:function(){for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&this._toolbars[n].removeToolbar()},setDrawingOptions:function(n){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(n)},_toolbarEnabled:function(n){var a=n.target;for(var o in this._toolbars)this._toolbars[o]!==a&&this._toolbars[o].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(n){L.setOptions(this,n),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(n){var a,o=L.DomUtil.create("div","leaflet-draw-section"),r=0,d=this._toolbarClass||"",g=this.getModeHandlers(n);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=n,a=0;a<g.length;a++)g[a].enabled&&this._initModeHandler(g[a].handler,this._toolbarContainer,r++,d,g[a].title);if(r)return this._lastButtonIndex=--r,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),o.appendChild(this._toolbarContainer),o.appendChild(this._actionsContainer),o},removeToolbar:function(){for(var n in this._modes)this._modes.hasOwnProperty(n)&&(this._disposeButton(this._modes[n].button,this._modes[n].handler.enable,this._modes[n].handler),this._modes[n].handler.disable(),this._modes[n].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,o=this._actionButtons.length;a<o;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(n,a,o,r,d){var g=n.type;this._modes[g]={},this._modes[g].handler=n,this._modes[g].button=this._createButton({type:g,title:d,className:r+"-"+g,container:a,callback:this._modes[g].handler.enable,context:this._modes[g].handler}),this._modes[g].buttonIndex=o,this._modes[g].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!s.MSStream},_createButton:function(n){var a=L.DomUtil.create("a",n.className||"",n.container),o=L.DomUtil.create("span","sr-only",n.container);a.href="#",a.appendChild(o),n.title&&(a.title=n.title,o.innerHTML=n.title),n.text&&(a.innerHTML=n.text,o.innerHTML=n.text);var r=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,r,n.callback,n.context),a},_disposeButton:function(n,a){var o=this._detectIOS()?"touchstart":"click";L.DomEvent.off(n,"click",L.DomEvent.stopPropagation).off(n,"mousedown",L.DomEvent.stopPropagation).off(n,"dblclick",L.DomEvent.stopPropagation).off(n,"touchstart",L.DomEvent.stopPropagation).off(n,"click",L.DomEvent.preventDefault).off(n,o,a)},_handlerActivated:function(n){this.disable(),this._activeMode=this._modes[n.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(n){var a,o,r,d,g=this._actionsContainer,x=this.getActions(n),v=x.length;for(o=0,r=this._actionButtons.length;o<r;o++)this._disposeButton(this._actionButtons[o].button,this._actionButtons[o].callback);for(this._actionButtons=[];g.firstChild;)g.removeChild(g.firstChild);for(var k=0;k<v;k++)"enabled"in x[k]&&!x[k].enabled||(a=L.DomUtil.create("li","",g),d=this._createButton({title:x[k].title,text:x[k].text,container:a,callback:x[k].callback,context:x[k].context}),this._actionButtons.push({button:d,callback:x[k].callback}))},_showActionsToolbar:function(){var n=this._activeMode.buttonIndex,a=this._lastButtonIndex,o=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=o+"px",n===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),n===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(n){this._map=n,this._popupPane=n._panes.popupPane,this._visible=!1,this._container=n.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(n){return this._container?(n.subtext=n.subtext||"",n.subtext.length!==0||this._singleLineLabel?n.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(n.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+n.subtext+"</span><br />":"")+"<span>"+n.text+"</span>",n.text||n.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(n){var a=this._map.latLngToLayerPoint(n),o=this._container;return this._container&&(this._visible&&(o.style.visibility="inherit"),L.DomUtil.setPosition(o,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(n){for(var a in this.options)this.options.hasOwnProperty(a)&&n[a]&&(n[a]=L.extend({},this.options[a],n[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,n)},getModeHandlers:function(n){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(n,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(n,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(n,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(n,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(n,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(n,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(n){return[{enabled:n.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:n.completeShape,context:n},{enabled:n.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:n.deleteLastVertex,context:n},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(n){L.setOptions(this,n);for(var a in this._modes)this._modes.hasOwnProperty(a)&&n.hasOwnProperty(a)&&this._modes[a].handler.setOptions(n[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(n){n.edit&&(n.edit.selectedPathOptions===void 0&&(n.edit.selectedPathOptions=this.options.edit.selectedPathOptions),n.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,n.edit.selectedPathOptions)),n.remove&&(n.remove=L.extend({},this.options.remove,n.remove)),n.poly&&(n.poly=L.extend({},this.options.poly,n.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,n),this._selectedFeatureCount=0},getModeHandlers:function(n){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(n,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(n,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(n){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return n.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(n){var a=L.Toolbar.prototype.addToolbar.call(this,n);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var n,a=this.options.featureGroup,o=a.getLayers().length!==0;this.options.edit&&(n=this._modes[L.EditToolbar.Edit.TYPE].button,o?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",o?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(n=this._modes[L.EditToolbar.Delete.TYPE].button,o?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",o?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(n,a){if(L.Handler.prototype.initialize.call(this,n),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var o=L.version.split(".");parseInt(o[0],10)===1&&parseInt(o[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),n._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(n){this._revertLayer(n)},this)},save:function(){var n=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(n.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:n})},_backupLayer:function(n){var a=L.Util.stamp(n);this._uneditedLayerProps[a]||(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(n.getLatLngs())}:n instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng()),radius:n.getRadius()}:(n instanceof L.Marker||n instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(n){var a=L.Util.stamp(n);n.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?n.setLatLngs(this._uneditedLayerProps[a].latlngs):n instanceof L.Circle?(n.setLatLng(this._uneditedLayerProps[a].latlng),n.setRadius(this._uneditedLayerProps[a].radius)):(n instanceof L.Marker||n instanceof L.CircleMarker)&&n.setLatLng(this._uneditedLayerProps[a].latlng),n.fire("revert-edited",{layer:n}))},_enableLayerEdit:function(n){var a,o,r=n.layer||n.target||n;this._backupLayer(r),this.options.poly&&(o=L.Util.extend({},this.options.poly),r.options.poly=o),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=r.options.color,a.fillColor=r.options.fillColor),r.options.original=L.extend({},r.options),r.options.editing=a),r instanceof L.Marker?(r.editing&&r.editing.enable(),r.dragging.enable(),r.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.enable()},_disableLayerEdit:function(n){var a=n.layer||n.target||n;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_onMarkerDragEnd:function(n){var a=n.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(n){var a=n.originalEvent.changedTouches[0],o=this._map.mouseEventToLayerPoint(a),r=this._map.layerPointToLatLng(o);n.target.setLatLng(r)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(n,a){if(L.Handler.prototype.initialize.call(this,n),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var o=L.version.split(".");parseInt(o[0],10)===1&&parseInt(o[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(n){this._deletableLayers.addLayer(n),n.fire("revert-deleted",{layer:n})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(n){this._removeLayer({layer:n})},this),this.save()},_enableLayerDelete:function(n){(n.layer||n.target||n).on("click",this._removeLayer,this)},_disableLayerDelete:function(n){var a=n.layer||n.target||n;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(n){var a=n.layer||n.target||n;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);function L0(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lk={},ck;function RR(){return ck||(ck=1,(function(){function s(e,t,i){function n(r,d){if(!t[r]){if(!e[r]){var g=typeof L0=="function"&&L0;if(!d&&g)return g(r,!0);if(a)return a(r,!0);var x=new Error("Cannot find module '"+r+"'");throw x.code="MODULE_NOT_FOUND",x}var v=t[r]={exports:{}};e[r][0].call(v.exports,function(k){var E=e[r][1][k];return n(E||k)},v,v.exports,s,e,t,i)}return t[r].exports}for(var a=typeof L0=="function"&&L0,o=0;o<i.length;o++)n(i[o]);return n}return s})()({1:[function(s,e,t){function i(n,a,o){var r=!1;if(typeof window.XMLHttpRequest>"u")return a(Error("Browser not supported"));if(typeof o>"u"){var d=n.match(/^\s*https?:\/\/[^\/]*/);o=d&&d[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var g=new window.XMLHttpRequest;function x(E){return E>=200&&E<300||E===304}if(o&&!("withCredentials"in g)){g=new window.XDomainRequest;var v=a;a=function(){if(r)v.apply(this,arguments);else{var E=this,F=arguments;setTimeout(function(){v.apply(E,F)},0)}}}function k(){g.status===void 0||x(g.status)?a.call(g,null,g):a.call(g,g,null)}return"onload"in g?g.onload=k:g.onreadystatechange=function(){g.readyState===4&&k()},g.onerror=function(F){a.call(this,F||!0,null),a=function(){}},g.onprogress=function(){},g.ontimeout=function(E){a.call(this,E,null),a=function(){}},g.onabort=function(E){a.call(this,E,null),a=function(){}},g.open("GET",n,!0),g.send(null),r=!0,g}typeof e<"u"&&(e.exports=i)},{}],2:[function(s,e,t){var i={};function n(r){return Math.floor(Math.abs(r)+.5)*Math.sign(r)}function a(r,d,g){r=n(r*g),d=n(d*g);var x=r-d;x<<=1,r-d<0&&(x=~x);for(var v="";x>=32;)v+=String.fromCharCode((32|x&31)+63),x>>=5;return v+=String.fromCharCode(x+63),v}i.decode=function(r,d){for(var g=0,x=0,v=0,k=[],E=0,F=0,O=null,N,$,X=Math.pow(10,d||5);g<r.length;){O=null,E=0,F=0;do O=r.charCodeAt(g++)-63,F|=(O&31)<<E,E+=5;while(O>=32);N=F&1?~(F>>1):F>>1,E=F=0;do O=r.charCodeAt(g++)-63,F|=(O&31)<<E,E+=5;while(O>=32);$=F&1?~(F>>1):F>>1,x+=N,v+=$,k.push([x/X,v/X])}return k},i.encode=function(r,d){if(!r.length)return"";for(var g=Math.pow(10,d||5),x=a(r[0][0],0,g)+a(r[0][1],0,g),v=1;v<r.length;v++){var k=r[v],E=r[v-1];x+=a(k[0],E[0],g),x+=a(k[1],E[1],g)}return x};function o(r){for(var d=[],g=0;g<r.length;g++)d.push(r[g].slice().reverse());return d}i.fromGeoJSON=function(r,d){if(r&&r.type==="Feature"&&(r=r.geometry),!r||r.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return i.encode(o(r.coordinates),d)},i.toGeoJSON=function(r,d){var g=i.decode(r,d);return{type:"LineString",coordinates:o(g)}},typeof e=="object"&&e.exports&&(e.exports=i)},{}],3:[function(s,e,t){var i=s("./languages"),n=i.instructions,a=i.grammars,o=i.abbreviations;e.exports=function(r){return Object.keys(n).forEach(function(d){if(!n[d][r])throw"invalid version "+r+": "+d+" not supported"}),{capitalizeFirstLetter:function(d,g){return g.charAt(0).toLocaleUpperCase(d)+g.slice(1)},ordinalize:function(d,g){if(!d)throw new Error("No language code provided");return n[d][r].constants.ordinalize[g.toString()]||""},directionFromDegree:function(d,g){if(!d)throw new Error("No language code provided");if(!g&&g!==0)return"";if(g>=0&&g<=20)return n[d][r].constants.direction.north;if(g>20&&g<70)return n[d][r].constants.direction.northeast;if(g>=70&&g<=110)return n[d][r].constants.direction.east;if(g>110&&g<160)return n[d][r].constants.direction.southeast;if(g>=160&&g<=200)return n[d][r].constants.direction.south;if(g>200&&g<250)return n[d][r].constants.direction.southwest;if(g>=250&&g<=290)return n[d][r].constants.direction.west;if(g>290&&g<340)return n[d][r].constants.direction.northwest;if(g>=340&&g<=360)return n[d][r].constants.direction.north;throw new Error("Degree "+g+" invalid")},laneConfig:function(d){if(!d.intersections||!d.intersections[0].lanes)throw new Error("No lanes object");var g=[],x=null;return d.intersections[0].lanes.forEach(function(v){(x===null||x!==v.valid)&&(v.valid?g.push("o"):g.push("x"),x=v.valid)}),g.join("")},getWayName:function(d,g,x){var v=x?x.classes||[]:[];if(typeof g!="object")throw new Error("step must be an Object");if(!d)throw new Error("No language code provided");if(!Array.isArray(v))throw new Error("classes must be an Array or undefined");var k,E=g.name||"",F=(g.ref||"").split(";")[0];E===g.ref&&(E=""),E=E.replace(" ("+g.ref+")","");var O=v.indexOf("motorway")!==-1;if(E&&F&&E!==F&&!O){var N=n[d][r].phrase["name and ref"]||n.en[r].phrase["name and ref"];k=this.tokenize(d,N,{name:E,ref:F},x)}else E&&F&&O&&/\d/.test(F)||!E&&F?k=x&&x.formatToken?x.formatToken("ref",F):F:k=x&&x.formatToken?x.formatToken("name",E):E;return k},compile:function(d,g,x){if(!d)throw new Error("No language code provided");if(i.supportedCodes.indexOf(d)===-1)throw new Error("language code "+d+" not loaded");if(!g.maneuver)throw new Error("No step maneuver provided");var v=x||{},k=g.maneuver.type,E=g.maneuver.modifier,F=g.mode,O=g.driving_side;if(!k)throw new Error("Missing step maneuver type");if(k!=="depart"&&k!=="arrive"&&!E)throw new Error("Missing step maneuver modifier");n[d][r][k]||(console.log("Encountered unknown instruction type: "+k),k="turn");var N;if(n[d][r].modes[F])N=n[d][r].modes[F];else{var $=k==="off ramp"&&E.indexOf(O)>=0;n[d][r][k][E]&&!$?N=n[d][r][k][E]:N=n[d][r][k].default}var X;switch(k){case"use lane":X=n[d][r].constants.lanes[this.laneConfig(g)],X||(N=n[d][r]["use lane"].no_lanes);break;case"rotary":case"roundabout":g.rotary_name&&g.maneuver.exit&&N.name_exit?N=N.name_exit:g.rotary_name&&N.name?N=N.name:g.maneuver.exit&&N.exit?N=N.exit:N=N.default;break}var K=this.getWayName(d,g,v),ie;g.destinations&&g.exits&&N.exit_destination?ie=N.exit_destination:g.destinations&&N.destination?ie=N.destination:g.exits&&N.exit?ie=N.exit:K&&N.name?ie=N.name:v.waypointName&&N.named?ie=N.named:ie=N.default;var ee=g.destinations&&g.destinations.split(": "),le=ee&&ee[0].split(",")[0],te=ee&&ee[1]&&ee[1].split(",")[0],he;te&&le?he=le+": "+te:he=le||te||"";var de=v.legIndex>=0&&v.legIndex!==v.legCount-1?this.ordinalize(d,v.legIndex+1):"",ke={way_name:K,destination:he,exit:(g.exits||"").split(";")[0],exit_number:this.ordinalize(d,g.maneuver.exit||1),rotary_name:g.rotary_name,lane_instruction:X,modifier:n[d][r].constants.modifier[E],direction:this.directionFromDegree(d,g.maneuver.bearing_after),nth:de,waypoint_name:v.waypointName};return this.tokenize(d,ie,ke,v)},grammarize:function(d,g,x){if(!d)throw new Error("No language code provided");if(g&&x&&a&&a[d]&&a[d][r]){var v=a[d][r][x];if(v){var k=" "+g+" ",E=a[d].meta.regExpFlags||"";return v.forEach(function(F){var O=new RegExp(F[0],E);k=k.replace(O,F[1])}),k.trim()}}return g},abbreviations:o,tokenize:function(d,g,x,v){if(!d)throw new Error("No language code provided");var k=this,E=!1,F=g.replace(/\{(\w+)(?::(\w+))?\}/g,function(O,N,$,X){var K=x[N];return typeof K>"u"?O:(K=k.grammarize(d,K,$),X===0&&n[d].meta.capitalizeFirstLetter&&(E=!0,K=k.capitalizeFirstLetter(d,K)),v&&v.formatToken&&(K=v.formatToken(N,K)),K)}).replace(/ {2}/g," ");return!E&&n[d].meta.capitalizeFirstLetter?this.capitalizeFirstLetter(d,F):F}}}},{"./languages":4}],4:[function(s,e,t){var i=s("./languages/translations/da.json"),n=s("./languages/translations/de.json"),a=s("./languages/translations/en.json"),o=s("./languages/translations/eo.json"),r=s("./languages/translations/es.json"),d=s("./languages/translations/es-ES.json"),g=s("./languages/translations/fi.json"),x=s("./languages/translations/fr.json"),v=s("./languages/translations/he.json"),k=s("./languages/translations/id.json"),E=s("./languages/translations/it.json"),F=s("./languages/translations/ko.json"),O=s("./languages/translations/my.json"),N=s("./languages/translations/nl.json"),$=s("./languages/translations/no.json"),X=s("./languages/translations/pl.json"),K=s("./languages/translations/pt-BR.json"),ie=s("./languages/translations/pt-PT.json"),ee=s("./languages/translations/ro.json"),le=s("./languages/translations/ru.json"),te=s("./languages/translations/sv.json"),he=s("./languages/translations/tr.json"),de=s("./languages/translations/uk.json"),ke=s("./languages/translations/vi.json"),De=s("./languages/translations/zh-Hans.json"),Ae=s("./languages/grammar/fr.json"),$e=s("./languages/grammar/ru.json"),et=s("./languages/abbreviations/bg.json"),Ie=s("./languages/abbreviations/ca.json"),at=s("./languages/abbreviations/da.json"),qe=s("./languages/abbreviations/de.json"),kt=s("./languages/abbreviations/en.json"),vt=s("./languages/abbreviations/es.json"),He=s("./languages/abbreviations/fr.json"),Nt=s("./languages/abbreviations/he.json"),Qt=s("./languages/abbreviations/hu.json"),Ai=s("./languages/abbreviations/lt.json"),jt=s("./languages/abbreviations/nl.json"),ui=s("./languages/abbreviations/ru.json"),Ct=s("./languages/abbreviations/sl.json"),ri=s("./languages/abbreviations/sv.json"),Zt=s("./languages/abbreviations/uk.json"),Pi=s("./languages/abbreviations/vi.json"),Fi={da:i,de:n,en:a,eo:o,es:r,"es-ES":d,fi:g,fr:x,he:v,id:k,it:E,ko:F,my:O,nl:N,no:$,pl:X,"pt-BR":K,"pt-PT":ie,ro:ee,ru:le,sv:te,tr:he,uk:de,vi:ke,"zh-Hans":De},Li={fr:Ae,ru:$e},en={bg:et,ca:Ie,da:at,de:qe,en:kt,es:vt,fr:He,he:Nt,hu:Qt,lt:Ai,nl:jt,ru:ui,sl:Ct,sv:ri,uk:Zt,vi:Pi};e.exports={supportedCodes:Object.keys(Fi),instructions:Fi,grammars:Li,abbreviations:en}},{"./languages/abbreviations/bg.json":5,"./languages/abbreviations/ca.json":6,"./languages/abbreviations/da.json":7,"./languages/abbreviations/de.json":8,"./languages/abbreviations/en.json":9,"./languages/abbreviations/es.json":10,"./languages/abbreviations/fr.json":11,"./languages/abbreviations/he.json":12,"./languages/abbreviations/hu.json":13,"./languages/abbreviations/lt.json":14,"./languages/abbreviations/nl.json":15,"./languages/abbreviations/ru.json":16,"./languages/abbreviations/sl.json":17,"./languages/abbreviations/sv.json":18,"./languages/abbreviations/uk.json":19,"./languages/abbreviations/vi.json":20,"./languages/grammar/fr.json":21,"./languages/grammar/ru.json":22,"./languages/translations/da.json":23,"./languages/translations/de.json":24,"./languages/translations/en.json":25,"./languages/translations/eo.json":26,"./languages/translations/es-ES.json":27,"./languages/translations/es.json":28,"./languages/translations/fi.json":29,"./languages/translations/fr.json":30,"./languages/translations/he.json":31,"./languages/translations/id.json":32,"./languages/translations/it.json":33,"./languages/translations/ko.json":34,"./languages/translations/my.json":35,"./languages/translations/nl.json":36,"./languages/translations/no.json":37,"./languages/translations/pl.json":38,"./languages/translations/pt-BR.json":39,"./languages/translations/pt-PT.json":40,"./languages/translations/ro.json":41,"./languages/translations/ru.json":42,"./languages/translations/sv.json":43,"./languages/translations/tr.json":44,"./languages/translations/uk.json":45,"./languages/translations/vi.json":46,"./languages/translations/zh-Hans.json":47}],5:[function(s,e,t){e.exports={abbreviations:{:"",:"",:"",:"Mkt",:"",:"",:"",:"",:"",:"",:"-",:"",:"-",:"",:"",:"",:"",:"-",:"-",:"-",:"",:"",:"",:"",:"",:".",:"",:"",:"-",:"",:""},classifications:{:"",:"",:"",:"",:"-",:"",:"",:"-",:"-",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},directions:{:"",:"",:"",:"",:"",:"",:""}}},{}],6:[function(s,e,t){e.exports={abbreviations:{comunicacions:"Com.","entitat de poblaci":"Nucli",disseminat:"Diss.","cap de municipi":"Cap",indret:"Indr.",comarca:"Cca.","relleu del litoral":"Lit.",municipi:"Mun.","xarxa hidrogrfica":"Curs Fluv.",equipament:"Equip.",orografia:"Orogr.",barri:"Barri",edificaci:"Edif.","edificaci histrica":"Edif. Hist.","entitat descentralitzada":"E.M.D.","element hidrogrfic":"Hidr."},classifications:{rotonda:"Rot.",carrerada:"Ca.",jard:"J.",paratge:"Pge.",pont:"Pont",lloc:"Lloc",rambla:"Rbla.",cases:"Cses.",barranc:"Bnc.",plana:"Plana",polgon:"Pol.",muralla:"Mur.",enlla:"Ella","antiga carretera":"Actra",glorieta:"Glor.",autovia:"Autv.",prolongaci:"Prol.",calada:"Cda.",carretera:"Ctra.",pujada:"Pda.",torrent:"T.",disseminat:"Disse",barri:"B.",cintur:"Cinto",passera:"Psera",sender:"Send.",carrer:"C.",squia:"Sq.",blocs:"Bloc",rambleta:"Rblt.",partida:"Par.",costa:"Cos.",sector:"Sec.",corral:"Crral",urbanitzaci:"Urb.",autopista:"Autp.",grup:"Gr.",platja:"Pja.",jardins:"J.",complex:"Comp.",portals:"Ptals",finca:"Fin.",travessera:"Trav.",plaa:"Pl.",travessia:"Trv.","polgon industrial":"PI.",passatge:"Ptge.",apartaments:"Apmt.",mirador:"Mira.",antic:"Antic",accs:"Acc.",colnia:"Col.",corriol:"Crol.",portal:"Ptal.",porta:"Pta.",port:"Port",carrer:"Cr.",riera:"Ra.","circumvallaci":"Cval.",baixada:"Bda.",placeta:"Plta.",escala:"Esc.","gran via":"GV",rial:"Rial",conjunt:"Conj.",avinguda:"Av.",esplanada:"Esp.",cantonada:"Cant.",ronda:"Rda.",corredor:"Cdor.",drecera:"Drec.",passads:"Pds.",viaducte:"Vdct.",passeig:"Pg.",venat:"Ve."},directions:{sudest:"SE",sudoest:"SO",nordest:"NE",nordoest:"NO",est:"E",nord:"N",oest:"O",sud:"S"}}},{}],7:[function(s,e,t){e.exports={abbreviations:{skole:"Sk.",ved:"v.",centrum:"C.",sankt:"Skt.",vestre:"v.",hospital:"Hosp.",strde:"Str.",nordre:"Nr.",plads:"Pl.",universitet:"Uni.",vnge:"vg.",station:"St."},classifications:{avenue:"Ave",gammel:"Gl.",dronning:"Dronn.",snder:"Sdr.",nrre:"Nr.",vester:"V.",vestre:"V.",ster:".",stre:".",boulevard:"Boul."},directions:{sydst:"S",nordvest:"NV",syd:"S",nordst:"N",sydvest:"SV",vest:"V",nord:"N",st:""}}},{}],8:[function(s,e,t){e.exports={abbreviations:{},classifications:{},directions:{osten:"O",nordosten:"NO",sden:"S",nordwest:"NW",norden:"N",sdost:"SO",sdwest:"SW",westen:"W"}}},{}],9:[function(s,e,t){e.exports={abbreviations:{square:"Sq",centre:"Ctr",sister:"Sr",lake:"Lk",fort:"Ft",route:"Rte",william:"Wm",national:"Natl",junction:"Jct",center:"Ctr",saint:"St",saints:"SS",station:"Sta",mount:"Mt",junior:"Jr",mountain:"Mtn",heights:"Hts",university:"Univ",school:"Sch",international:"Intl",apartments:"Apts",crossing:"Xing",creek:"Crk",township:"Twp",downtown:"Dtwn",father:"Fr",senior:"Sr",point:"Pt",river:"Riv",market:"Mkt",village:"Vil",park:"Pk",memorial:"Mem"},classifications:{place:"Pl",circle:"Cir",bypass:"Byp",motorway:"Mwy",crescent:"Cres",road:"Rd",cove:"Cv",lane:"Ln",square:"Sq",street:"St",freeway:"Fwy",walk:"Wk",plaza:"Plz",parkway:"Pky",avenue:"Ave",pike:"Pk",drive:"Dr",highway:"Hwy",footway:"Ftwy",point:"Pt",court:"Ct",terrace:"Ter",walkway:"Wky",alley:"Aly",expressway:"Expy",bridge:"Br",boulevard:"Blvd",turnpike:"Tpk"},directions:{southeast:"SE",northwest:"NW",south:"S",west:"W",southwest:"SW",north:"N",east:"E",northeast:"NE"}}},{}],10:[function(s,e,t){e.exports={abbreviations:{segunda:"2",octubre:"8bre",doctores:"Drs",doctora:"Dra",internacional:"Intl",doctor:"Dr",segundo:"2",seorita:"Srta",doctoras:"Drs",primera:"1",primero:"1",san:"S",colonia:"Col",doa:"Da",septiembre:"7bre",diciembre:"10bre",seor:"Sr",ayuntamiento:"Ayto",seora:"Sra",tercera:"3",tercero:"3",don:"D",santa:"Sta",ciudad:"Cdad",noviembre:"9bre",departamento:"Dep"},classifications:{camino:"Cmno",avenida:"Av",paseo:"P",autopista:"Auto",calle:"C",plaza:"Pza",carretera:"Crta"},directions:{este:"E",noreste:"NE",sur:"S",suroeste:"SO",noroeste:"NO",oeste:"O",sureste:"SE",norte:"N"}}},{}],11:[function(s,e,t){e.exports={abbreviations:{alle:"All",arodrome:"Arod",aroport:"Arop"},classifications:{centrale:"Ctrale",campings:"Camp.",urbains:"Urb.",mineure:"Min.",publique:"Publ.",suprieur:"Sup.",fdration:"Fd.","notre-dame":"ND",saint:"St","centre hospitalier rgional":"CHR",exploitation:"Exploit.",gnral:"Gal",civiles:"Civ.",maritimes:"Marit.",aviation:"Aviat.",iii:"3",archologique:"Archo.",musical:"Music.",musicale:"Music.",immeuble:"Imm.",xv:"15",htel:"Ht.",alpine:"Alp.",communale:"Commun.",v:"5",global:"Glob.",universit:"Univ.",confdral:"Confd.",xx:"20",x:"10",piscine:"Pisc.",dimanche:"di.",fleuve:"Flv",postaux:"Post.",musicienne:"Music.",dpartement:"Dpt",fvrier:"Fvr.",municipales:"Munic.",province:"Prov.",communauts:"Commts",barrage:"Barr.",mercredi:"me.",prsidentes:"Pdtes",caftrias:"Caft.",thtral:"Th.",viticulteur:"Vitic.",poste:"Post.",spcialise:"Spc.",agriculture:"Agric.",infirmier:"Infirm.",animation:"Anim.",mondiale:"Mond.",arrt:"Arr.",zone:"zon.",municipaux:"Munic.",grand:"Gd",janvier:"Janv.",fondateur:"Fond.",premire:"1re",municipale:"Munic.",direction:"Dir.",anonyme:"Anon.",dpartementale:"Dpt",moyens:"Moy.",novembre:"Nov.",jardin:"Jard.",petites:"Pet.",priv:"Priv.",centres:"Ctres",forestier:"Forest.",xiv:"14",africaines:"Afric.",sergent:"Sgt",europenne:"Eur.",prive:"Priv.",caf:"Cf",xix:"19",hautes:"Htes",major:"Mjr",vendredi:"ve.",municipalit:"Munic.","sous-prfecture":"Ss-prf.",spciales:"Spc.",secondaires:"Second.",viie:"7e",moyenne:"Moy.",commerciale:"Commerc.",rgion:"Rg.",amricaines:"Amr.",amricains:"Amr.",service:"Sce",professeur:"Prof.",dpartemental:"Dpt",htels:"Ht.",mondiales:"Mond.",ire:"1re",caporal:"Capo.",militaire:"Milit.","lyce d'enseignement professionnel":"LEP",adjudant:"Adj.",mdicale:"Md.",confrences:"Confr.",universelle:"Univ.",xiie:"12e",suprieures:"Sup.",naturel:"Natur.","socit nationale":"SN",hospitalier:"Hosp.",culturelle:"Cult.",amricain:"Amr.","son altesse royale":"S.A.R.",infirmire:"Infirm.",viii:"8",fondatrice:"Fond.",madame:"Mme",mtropolitain:"Mtrop.",ophtalmologues:"Ophtalmos",xviie:"18e",viiie:"8e",commerante:"Commer.","centre d'enseignement du second degr":"CES",septembre:"Sept.",agriculteur:"Agric.",xiii:"13",pontifical:"Pontif.",caftria:"Caft.",prince:"Pce",vie:"6e",archiduchesse:"Archid.",occidental:"Occ.",spectacles:"Spect.",camping:"Camp.",mtro:"M",arrondissement:"Arrond.",viticole:"Vitic.",ii:"2",sicle:"Si.",chapelles:"Chap.",centre:"Ctre","sapeur-pompiers":"Sap.-pomp.",tablissements:"tabts","socit anonyme":"SA",directeurs:"Dir.",vii:"7",culturel:"Cult.",central:"Ctral",mtropolitaine:"Mtrop.",administrations:"Admin.",amiraux:"Amir.",sur:"s/",premiers:"1ers","provence-alpes-cte d'azur":"PACA",cathdrale:"Cathd.",iv:"4",postale:"Post.",social:"Soc.",spcialis:"Spc.",district:"Distr.",technologique:"Techno.",viticoles:"Vitic.",ix:"9",protgs:"Prot.",historiques:"Hist.",sous:"s/s",national:"Nal",ambassade:"Amb.",cafs:"Cfs",agronomie:"Agro.",sapeurs:"Sap.",petits:"Pet.",monsieur:"M.",boucher:"Bouch.",restaurant:"Restau.",lyce:"Lyc.",urbaine:"Urb.",prfecture:"Prf.",districts:"Distr.",civil:"Civ.",protges:"Prot.",sapeur:"Sap.",thtre:"Th.",collge:"Coll.",mardi:"ma.",mmorial:"Mmor.",africain:"Afric.",rpublicaine:"Rpubl.",sociale:"Soc.",spcial:"Spc.",technologie:"Techno.",charcuterie:"Charc.",commerces:"Commerc.",fluviale:"Flv",parachutistes:"Para.",primaires:"Prim.",directions:"Dir.",prsidentiel:"Pdtl",nationales:"Nales",aprs:"apr.",samedi:"sa.",unit:"U.",xxiii:"23",associ:"Assoc.",lectrique:"lectr.",populaire:"Pop.",asiatique:"Asiat.",navigable:"Navig.",prsidente:"Pdte",xive:"14e",associs:"Assoc.",pompiers:"Pomp.",agricoles:"Agric.",lm:"lm.",dcembre:"Dc.","son altesse":"S.Alt.","aprs-midi":"a.-m.",mineures:"Min.",juillet:"Juil.",aviatrices:"Aviat.",fondation:"Fond.",pontificaux:"Pontif.",temple:"Tple",europennes:"Eur.",rgionale:"Rg.",informations:"Infos",mondiaux:"Mond.",infanterie:"Infant.",archologie:"Archo.",dans:"d/",hospice:"Hosp.",spectacle:"Spect.","htels-restaurants":"Ht.-Rest.","htel-restaurant":"Ht.-Rest.",hlicoptre:"hlico",xixe:"19e",cliniques:"Clin.",docteur:"Dr",secondaire:"Second.",municipal:"Munic.",gnrale:"Gale",chteau:"Cht.",commerant:"Commer.",avril:"Avr.",clinique:"Clin.",urbaines:"Urb.",navale:"Nav.",navigation:"Navig.",asiatiques:"Asiat.",pontificales:"Pontif.",administrative:"Admin.",syndicat:"Synd.",lundi:"lu.",petite:"Pet.",maritime:"Marit.",mtros:"M",enseignement:"Enseign.",fluviales:"Flv",historique:"Hist.",comts:"Cts",rsidentiel:"Rsid.",international:"Int.",suprieure:"Sup.","centre hospitalier universitaire":"CHU",confdration:"Confd.",boucherie:"Bouch.",fondatrices:"Fond.",mdicaux:"Md.",europens:"Eur.",orientaux:"Ori.",naval:"Nav.",tang:"tg",provincial:"Prov.",junior:"Jr",dpartementales:"Dpt",musique:"Musiq.",directrices:"Dir.",marchal:"Mal",civils:"Civ.",protg:"Prot.",tablissement:"tabt",trafic:"Traf.",aviateur:"Aviat.",archives:"Arch.",africains:"Afric.",maternelle:"Matern.",industrielle:"Ind.",administratif:"Admin.",oriental:"Ori.",universitaire:"Univ.",majeur:"Maj.",haute:"Hte",communal:"Commun.",petit:"Pet.",commune:"Commun.",exploitant:"Exploit.",confrence:"Confr.",monseigneur:"Mgr",pharmacien:"Pharm.",jeudi:"je.",primaire:"Prim.",hlicoptres:"hlicos",agronomique:"Agro.",mdecin:"Md.",ve:"5e",pontificale:"Pontif.",ier:"1er",cinma:"Cin",fluvial:"Flv",occidentaux:"Occ.",commerants:"Commer.",banque:"Bq",moyennes:"Moy.",pharmacienne:"Pharm.",dmocratique:"Dm.",cinmas:"Cins",spciale:"Spc.",prsidents:"Pdts",directrice:"Dir.",vi:"6",basse:"Bas.",xve:"15e",tat:".",aviateurs:"Aviat.",majeurs:"Maj.",infirmiers:"Infirm.",glise:"gl.",confdrale:"Confd.",xxie:"21e",comte:"Cte",europen:"Eur.",union:"U.",pharmacie:"Pharm.",infirmires:"Infirm.",comt:"Ct",sportive:"Sport.",deuxime:"2e",xvi:"17",haut:"Ht",mdicales:"Md.",dvelopp:"Dvelop.",btiment:"Bt.",commerce:"Commerc.",ive:"4e",associatif:"Assoc.",rural:"Rur.",cimetire:"Cim.",rgional:"Rg.",ferroviaire:"Ferr.",vers:"v/",mosque:"Mosq.",mineurs:"Min.",nautique:"Naut.",chteaux:"Cht.",sportif:"Sport.",mademoiselle:"Mle",cole:"c.",doyen:"Doy.",industriel:"Ind.",chapelle:"Chap.",socits:"Sts",internationale:"Int.",coopratif:"Coop.",hospices:"Hosp.",xxii:"22",parachutiste:"Para.",alpines:"Alp.",civile:"Civ.",xvie:"17e",tats:".",muse:"Mse",centrales:"Ctrales",globaux:"Glob.",suprieurs:"Sup.",syndicats:"Synd.",archevque:"Archev.",docteurs:"Drs",bibliothque:"Biblio.",lieutenant:"Lieut.",rpublique:"Rp.",vtrinaire:"Vt.",dpartementaux:"Dpt",premier:"1er",fluviaux:"Flv",anim:"Anim.",orientales:"Ori.",technologiques:"Techno.",princesse:"Pse",routire:"Rout.",cooprative:"Coop.",scolaire:"Scol.",coles:"c.",football:"Foot",territoriale:"Territ.",commercial:"Commerc.",mineur:"Min.",millnaires:"Mill.",association:"Assoc.",catholique:"Cathol.",administration:"Admin.",mairie:"Mair.",portuaire:"Port.",tertiaires:"Terti.",thtrale:"Th.",palais:"Pal.",troisime:"3e",directeur:"Dir.",vtrinaires:"Vt.",facult:"Fac.",occidentales:"Occ.",viticulteurs:"Vitic.",xvii:"18",occidentale:"Occ.",amiral:"Amir.",professionnel:"Profess.",administratives:"Admin.",commerciales:"Commerc.",saints:"Sts",agronomes:"Agro.",stade:"Std","sous-prfet":"Ss-prf.",senior:"Sr",agronome:"Agro.",terrain:"Terr.",catholiques:"Cathol.",rsidentielle:"Rsid.",grands:"Gds",exploitants:"Exploit.",xiiie:"13e",croix:"Cx",gnraux:"Gaux",crdit:"Crd.",cimetires:"Cim.",antenne:"Ant.",mdical:"Md.",collges:"Coll.",musicien:"Music.",apostolique:"Apost.",postal:"Post.",territorial:"Territ.",urbanisme:"Urb.",prfectorale:"Prf.",fondateurs:"Fond.",information:"Info.",glises:"gl.",ophtalmologue:"Ophtalmo",congrgation:"Congrg.",charcutier:"Charc.",tage:"t.",consulat:"Consul.",public:"Publ.",ferre:"Ferr.",matin:"mat.","socit anonyme  responsabilit limite":"SARL",monuments:"Mmts",protection:"Prot.",universel:"Univ.",nationale:"Nale",prsident:"Pdt",provinciale:"Prov.",agriculteurs:"Agric.",prfectoral:"Prf.",xxe:"20e",alpins:"Alp.",avant:"av.",infirmerie:"Infirm.","deux mil":"2000",rurale:"Rur.",administratifs:"Admin.",octobre:"Oct.",archipel:"Archip.",communaut:"Commt",globales:"Glob.",alpin:"Alp.",numros:"N","lieutenant-colonel":"Lieut.-Col.","jsus-christ":"J.-C.",agricole:"Agric.","sa majest":"S.Maj.",associative:"Assoc.",xxi:"21",prsidentielle:"Pdtle",moyen:"Moy.",fdral:"Fd.",professionnelle:"Profess.",tertiaire:"Terti.",ixe:"9e",hpital:"Hp.",technologies:"Techno.",iiie:"3e",dveloppement:"Dvelop.",monument:"Mmt",forestire:"Forest.",numro:"N",viticulture:"Vitic.",traversire:"Traver.",technique:"Tech.",lectriques:"lectr.",militaires:"Milit.",pompier:"Pomp.",amricaine:"Amr.",prfet:"Prf.",congrgations:"Congrg.",ptissier:"Ptiss.",mondial:"Mond.",ophtalmologie:"Ophtalm.",sainte:"Ste",africaine:"Afric.",aviatrice:"Aviat.",doyens:"Doy.",socit:"St",majeures:"Maj.",orientale:"Ori.",ministre:"Min.",archiduc:"Archid.",territoire:"Territ.",techniques:"Tech.","le-de-france":"IDF",globale:"Glob.",xe:"10e",xie:"11e",majeure:"Maj.",commerciaux:"Commerc.",maire:"Mair.",spciaux:"Spc.",grande:"Gde",messieurs:"MM",colonel:"Col.",millnaire:"Mill.",xi:"11",urbain:"Urb.",fdrale:"Fd.",ferr:"Ferr.",rivire:"Riv.",rpublicain:"Rpubl.",grandes:"Gdes",rgiment:"Rgim.",hauts:"Hts",catgorie:"Catg.",basses:"Bas.",xii:"12",agronomiques:"Agro.",iie:"2e",protge:"Prot.","sapeur-pompier":"Sap.-pomp."},directions:{"est-nord-est":"ENE","nord-est":"NE",ouest:"O","sud-est":"SE","est-sud-est":"ESE","nord-nord-est":"NNE",sud:"S","nord-nord-ouest":"NNO","nord-ouest":"NO",nord:"N","ouest-sud-ouest":"OSO","ouest-nord-ouest":"ONO","sud-ouest":"SO","sud-sud-est":"SSE","sud-sud-ouest":"SSO",est:"E"}}},{}],12:[function(s,e,t){e.exports={abbreviations:{:"'"},classifications:{},directions:{}}},{}],13:[function(s,e,t){e.exports={abbreviations:{},classifications:{},directions:{kelet:"K",szakkelet:"K",dl:"D",szaknyugat:"NY",szak:"",dlkelet:"DK",dlnyugat:"DNY",nyugat:"NY"}}},{}],14:[function(s,e,t){e.exports={abbreviations:{apartamentai:"Apt",auktumos:"Auk",centras:"Ctr",eeras:"E",fortas:"Ft",greitkelis:"Grtkl",juosta:"Jst",kaimas:"Km",kalnas:"Kln",kelias:"Kl",kiemelis:"Kml",miestelis:"Mstl","miesto centras":"M.Ctr",mokykla:"Mok",nacionalinis:"Nac",paminklas:"Pmkl",parkas:"Pk",pusratis:"Psrt",sankrya:"Skr",ses:"Ses",skveras:"Skv",stotis:"St",v:"v",tarptautinis:"Trptaut",takas:"Tk",tvas:"Tv",turgus:"Tgs",universitetas:"Univ",up:"Up",upelis:"Up",vieta:"Vt"},classifications:{aikt:"a.",alja:"al.",aplinkkelis:"aplinkl.",autostrada:"auto.",bulvaras:"b.",gatv:"g.",kelias:"kel.",krantin:"krant.",prospektas:"pr.",plentas:"pl.",skersgatvis:"skg.",takas:"tak.",tiltas:"tlt."},directions:{piets:"P",vakarai:"V",iaur:"","iaurs vakarai":"V",pietryiai:"PR","iaurs rytai":"R",rytai:"R",pietvakariai:"PV"}}},{}],15:[function(s,e,t){e.exports={abbreviations:{centrum:"Cntrm",nationaal:"Natl",berg:"Brg",meer:"Mr",kruising:"Krsng",toetreden:"Ttrdn"},classifications:{bypass:"Pass",brug:"Br",straat:"Str",rechtbank:"Rbank",snoek:"Snk",autobaan:"Baan",terras:"Trrs",punt:"Pt",plaza:"Plz",rijden:"Rijd",parkway:"Pky",inham:"Nham",snelweg:"Weg","halve maan":"Maan",cirkel:"Crkl",laan:"Ln",rijbaan:"Strook",weg:"Weg",lopen:"Lpn",autoweg:"Weg",boulevard:"Blvd",plaats:"Plts",steeg:"Stg",voetpad:"Stoep"},directions:{noordoost:"NO",westen:"W",zuiden:"Z",zuidwest:"ZW",oost:"O",zuidoost:"ZO",noordwest:"NW",noorden:"N"}}},{}],16:[function(s,e,t){e.exports={abbreviations:{:".",:".",:"",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:"."},classifications:{:"-",:".",:".",:".",:".",:".",:".",:".",:"."},directions:{:"","-":"","-":"","-":"","-":"",:"",:"",:""}}},{}],17:[function(s,e,t){e.exports={abbreviations:{},classifications:{},directions:{vzhod:"V",severovzhod:"SV",jug:"J",severozahod:"SZ",sever:"S",jugovzhod:"JV",jugozahod:"JZ",zahod:"Z"}}},{}],18:[function(s,e,t){e.exports={abbreviations:{sankta:"s:ta",gamla:"G:la",sankt:"s:t"},classifications:{Bro:"Br"},directions:{norr:"N",sydst:"SO",vster:"V",ster:"O",nordvst:"NV",sydvst:"SV",sder:"S",nordst:"NO"}}},{}],19:[function(s,e,t){e.exports={abbreviations:{},classifications:{},directions:{:""," ":"",:""," ":"",:""," ":""," ":"",:""}}},{}],20:[function(s,e,t){e.exports={abbreviations:{"vin bo tng":"VBT","th trn":"Tt","i hc":"H","cn c khng quan":"CCKQ","cu lc b":"CLB","bu in":"B","khch sn":"KS","khu du lch":"KDL","khu cng nghip":"KCN","khu ngh mt":"KNM","th x":"Tx","khu chung c":"KCC","phi trng":"PT","trung tm":"TT","tng cng ty":"TCty","trung hc c s":"THCS","sn bay quc t":"SBQT","trung hc ph thng":"THPT","cao ng":"C","cng ty":"Cty","sn bay":"SB","thnh ph":"Tp","cng vin":"CV","sn vn ng":"SV","linh mc":"LM","vn quc gia":"VQG"},classifications:{"huyn l":"HL","ng tnh":"T","quc l":"QL","xa l":"XL","hng l":"HL","tnh l":"TL","ng huyn":"H","ng cao tc":"CT","i l":"L","vit nam":"VN","qung trng":"QT","ng b":"B"},directions:{ty:"T",nam:"N","ng nam":"N","ng bc":"B","ty nam":"TN",ng:"",bc:"B"}}},{}],21:[function(s,e,t){e.exports={meta:{regExpFlags:"gi"},v5:{article:[["^ Acc[e]s "," laccs "],["^ Aire "," laire "],["^ All[e]e "," lalle "],["^ Anse "," lanse "],["^ (L['])?Autoroute "," lautoroute "],["^ Avenue "," lavenue "],["^ Barreau "," le barreau "],["^ Boulevard "," le boulevard "],["^ Chemin "," le chemin "],["^ Petit[\\- ]Chemin "," le petit chemin "],["^ Cit[e] "," la cit "],["^ Clos "," le clos "],["^ Corniche "," la corniche "],["^ Cour "," la cour "],["^ Cours "," le cours "],["^ D[e]viation "," la dviation "],["^ Entr[e]e "," lentre "],["^ Esplanade "," lesplanade "],["^ Galerie "," la galerie "],["^ Impasse "," limpasse "],["^ Lotissement "," le lotissement "],["^ Mont[e]e "," la monte "],["^ Parc "," le parc "],["^ Parvis "," le parvis "],["^ Passage "," le passage "],["^ Place "," la place "],["^ Petit[\\- ]Pont "," le petit-pont "],["^ Pont "," le pont "],["^ Promenade "," la promenade "],["^ Quai "," le quai "],["^ Rocade "," la rocade "],["^ Rond[\\- ]?Point "," le rond-point "],["^ Route "," la route "],["^ Rue "," la rue "],["^ Grande Rue "," la grande rue "],["^ Sente "," la sente "],["^ Sentier "," le sentier "],["^ Sortie "," la sortie "],["^ Souterrain "," le souterrain "],["^ Square "," le square "],["^ Terrasse "," la terrasse "],["^ Traverse "," la traverse "],["^ Tunnel "," le tunnel "],["^ Viaduc "," le viaduc "],["^ Villa "," la villa "],["^ Village "," le village "],["^ Voie "," la voie "],[" ([dl])'"," $1"]],preposition:[["^ Le ","  du "],["^ Les ","  des "],["^ La ","  de La "],["^ Acc[e]s ","  de laccs "],["^ Aire ","  de laire "],["^ All[e]e ","  de lalle "],["^ Anse ","  de lanse "],["^ (L['])?Autoroute ","  de lautoroute "],["^ Avenue ","  de lavenue "],["^ Barreau ","  du barreau "],["^ Boulevard ","  du boulevard "],["^ Chemin ","  du chemin "],["^ Petit[\\- ]Chemin ","  du petit chemin "],["^ Cit[e] ","  de la cit "],["^ Clos ","  du clos "],["^ Corniche ","  de la corniche "],["^ Cour ","  de la cour "],["^ Cours ","  du cours "],["^ D[e]viation ","  de la dviation "],["^ Entr[e]e ","  de lentre "],["^ Esplanade ","  de lesplanade "],["^ Galerie ","  de la galerie "],["^ Impasse ","  de limpasse "],["^ Lotissement ","  du lotissement "],["^ Mont[e]e ","  de la monte "],["^ Parc ","  du parc "],["^ Parvis ","  du parvis "],["^ Passage ","  du passage "],["^ Place ","  de la place "],["^ Petit[\\- ]Pont ","  du petit-pont "],["^ Pont ","  du pont "],["^ Promenade ","  de la promenade "],["^ Quai ","  du quai "],["^ Rocade ","  de la rocade "],["^ Rond[\\- ]?Point ","  du rond-point "],["^ Route ","  de la route "],["^ Rue ","  de la rue "],["^ Grande Rue ","  de la grande rue "],["^ Sente ","  de la sente "],["^ Sentier ","  du sentier "],["^ Sortie ","  de la sortie "],["^ Souterrain ","  du souterrain "],["^ Square ","  du square "],["^ Terrasse ","  de la terrasse "],["^ Traverse ","  de la traverse "],["^ Tunnel ","  du tunnel "],["^ Viaduc ","  du viaduc "],["^ Villa ","  de la villa "],["^ Village ","  du village "],["^ Voie ","  de la voie "],["^ ([AEIOUY])","  d$1"],["^ (\\S)","  de $1"],[" ([dl])'"," $1"]],rotary:[["^ Le ","  le rond-point du "],["^ Les ","  le rond-point des "],["^ La ","  le rond-point de La "],["^ Acc[e]s "," le rond-point de laccs "],["^ Aire ","  le rond-point de laire "],["^ All[e]e ","  le rond-point de lalle "],["^ Anse ","  le rond-point de lanse "],["^ (L['])?Autoroute ","  le rond-point de lautoroute "],["^ Avenue ","  le rond-point de lavenue "],["^ Barreau ","  le rond-point du barreau "],["^ Boulevard ","  le rond-point du boulevard "],["^ Chemin ","  le rond-point du chemin "],["^ Petit[\\- ]Chemin ","  le rond-point du petit chemin "],["^ Cit[e] ","  le rond-point de la cit "],["^ Clos ","  le rond-point du clos "],["^ Corniche ","  le rond-point de la corniche "],["^ Cour ","  le rond-point de la cour "],["^ Cours ","  le rond-point du cours "],["^ D[e]viation ","  le rond-point de la dviation "],["^ Entr[e]e ","  le rond-point de lentre "],["^ Esplanade ","  le rond-point de lesplanade "],["^ Galerie ","  le rond-point de la galerie "],["^ Impasse ","  le rond-point de limpasse "],["^ Lotissement ","  le rond-point du lotissement "],["^ Mont[e]e ","  le rond-point de la monte "],["^ Parc ","  le rond-point du parc "],["^ Parvis ","  le rond-point du parvis "],["^ Passage ","  le rond-point du passage "],["^ Place ","  le rond-point de la place "],["^ Petit[\\- ]Pont ","  le rond-point du petit-pont "],["^ Pont ","  le rond-point du pont "],["^ Promenade ","  le rond-point de la promenade "],["^ Quai ","  le rond-point du quai "],["^ Rocade ","  le rond-point de la rocade "],["^ Rond[\\- ]?Point ","  le rond-point "],["^ Route ","  le rond-point de la route "],["^ Rue ","  le rond-point de la rue "],["^ Grande Rue ","  le rond-point de la grande rue "],["^ Sente ","  le rond-point de la sente "],["^ Sentier ","  le rond-point du sentier "],["^ Sortie ","  le rond-point de la sortie "],["^ Souterrain ","  le rond-point du souterrain "],["^ Square ","  le rond-point du square "],["^ Terrasse ","  le rond-point de la terrasse "],["^ Traverse ","  le rond-point de la traverse "],["^ Tunnel ","  le rond-point du tunnel "],["^ Viaduc ","  le rond-point du viaduc "],["^ Villa ","  le rond-point de la villa "],["^ Village ","  le rond-point du village "],["^ Voie ","  le rond-point de la voie "],["^ ([AEIOUY])","  le rond-point d$1"],["^ (\\S)","  le rond-point de $1"],[" ([dl])'"," $1"]],arrival:[["^ Le ","  au "],["^ Les ","  aux "],["^ La ","   La "],["^ (\\S)","   $1"],[" ([dl])'"," $1"]]}}},{}],22:[function(s,e,t){e.exports={meta:{regExpFlags:""},v5:{accusative:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ [][] ","  "]],dative:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "],["([]) ","$1 "]],genitive:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "]],prepositional:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "]]}}},{}],23:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"frste",2:"anden",3:"tredje",4:"fjerde",5:"femte",6:"sjette",7:"syvende",8:"ottende",9:"niende",10:"tiende"},direction:{north:"Nord",northeast:"Nordst",east:"st",southeast:"Sydst",south:"Syd",southwest:"Sydvest",west:"Vest",northwest:"Nordvest"},modifier:{left:"venstresving",right:"hjresving","sharp left":"skarpt venstresving","sharp right":"skarpt hjresving","slight left":"svagt venstresving","slight right":"svagt hjresving",straight:"ligeud",uturn:"U-vending"},lanes:{xo:"Hold til hjre",ox:"Hold til venstre",xox:"Benyt midterste spor",oxo:"Hold til hjre eller venstre"}},modes:{ferry:{default:"Tag frgen",name:"Tag frgen {way_name}",destination:"Tag frgen i retning {destination}"}},phrase:{"two linked by distance":"{instruction_one} derefter, efter {distance}, {instruction_two}","two linked":"{instruction_one}, derefter {instruction_two}","one in distance":"Efter {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":"afkrsel {exit}"},arrive:{default:{default:"Du er ankommet til din {nth} destination",upcoming:"Du vil ankomme til din {nth} destination",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}"},left:{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},right:{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"sharp left":{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},"sharp right":{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"slight right":{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"slight left":{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},straight:{default:"Du er ankommet til din {nth} destination, der befinder sig lige frem",upcoming:"Du vil ankomme til din {nth} destination foran dig",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, der befinder sig lige frem"}},continue:{default:{default:"Drej til {modifier}",name:"Drej til {modifier} videre ad {way_name}",destination:"Drej til {modifier} mod {destination}",exit:"Drej til {modifier} ad {way_name}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst mod {destination}",distance:"Fortst {distance} ligeud",namedistance:"Fortst {distance} ad {way_name}"},"sharp left":{default:"Drej skarpt til venstre",name:"Drej skarpt til venstre videre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre",name:"Drej skarpt til hjre videre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},"slight left":{default:"Drej left til venstre",name:"Drej let til venstre videre ad {way_name}",destination:"Drej let til venstre mod {destination}"},"slight right":{default:"Drej let til hjre",name:"Drej let til hjre videre ad {way_name}",destination:"Drej let til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending tilbage ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},depart:{default:{default:"Kr mod {direction}",name:"Kr mod {direction} ad {way_name}",namedistance:"Fortst {distance} ad {way_name}mod {direction}"}},"end of road":{default:{default:"Drej til {modifier}",name:"Drej til {modifier} ad {way_name}",destination:"Drej til {modifier} mof {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst ligeud mod {destination}"},uturn:{default:"Foretag en U-vending for enden af vejen",name:"Foretag en U-vending ad {way_name} for enden af vejen",destination:"Foretag en U-vending mod {destination} for enden af vejen"}},fork:{default:{default:"Hold til {modifier} ved udfletningen",name:"Hold mod {modifier} p {way_name}",destination:"Hold mod {modifier} mod {destination}"},"slight left":{default:"Hold til venstre ved udfletningen",name:"Hold til venstre p {way_name}",destination:"Hold til venstre mod {destination}"},"slight right":{default:"Hold til hjre ved udfletningen",name:"Hold til hjre p {way_name}",destination:"Hold til hjre mod {destination}"},"sharp left":{default:"Drej skarpt til venstre ved udfletningen",name:"Drej skarpt til venstre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre ved udfletningen",name:"Drej skarpt til hjre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},merge:{default:{default:"Flet til {modifier}",name:"Flet til {modifier} ad {way_name}",destination:"Flet til {modifier} mod {destination}"},straight:{default:"Flet",name:"Flet ind p {way_name}",destination:"Flet ind mod {destination}"},"slight left":{default:"Flet til venstre",name:"Flet til venstre ad {way_name}",destination:"Flet til venstre mod {destination}"},"slight right":{default:"Flet til hjre",name:"Flet til hjre ad {way_name}",destination:"Flet til hjre mod {destination}"},"sharp left":{default:"Flet til venstre",name:"Flet til venstre ad {way_name}",destination:"Flet til venstre mod {destination}"},"sharp right":{default:"Flet til hjre",name:"Flet til hjre ad {way_name}",destination:"Flet til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},"new name":{default:{default:"Fortst {modifier}",name:"Fortst {modifier} ad {way_name}",destination:"Fortst {modifier} mod {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ad {way_name}",destination:"Fortst mod {destination}"},"sharp left":{default:"Drej skarpt til venstre",name:"Drej skarpt til venstre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre",name:"Drej skarpt til hjre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},"slight left":{default:"Fortst til venstre",name:"Fortst til venstre ad {way_name}",destination:"Fortst til venstre mod {destination}"},"slight right":{default:"Fortst til hjre",name:"Fortst til hjre ad {way_name}",destination:"Fortst til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},notification:{default:{default:"Fortst {modifier}",name:"Fortst {modifier} ad {way_name}",destination:"Fortst {modifier} mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},"off ramp":{default:{default:"Tag afkrslen",name:"Tag afkrslen ad {way_name}",destination:"Tag afkrslen mod {destination}",exit:"Vlg afkrsel {exit}",exit_destination:"Vlg afkrsel {exit} mod {destination}"},left:{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},right:{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"},"sharp left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},"sharp right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"},"slight left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},"slight right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"}},"on ramp":{default:{default:"Tag afkrslen",name:"Tag afkrslen ad {way_name}",destination:"Tag afkrslen mod {destination}"},left:{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},right:{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"},"sharp left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},"sharp right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"},"slight left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},"slight right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"}},rotary:{default:{default:{default:"Kr ind i rundkrslen",name:"Tag rundkrslen og kr fra ad {way_name}",destination:"Tag rundkrslen og kr mod {destination}"},name:{default:"Kr ind i {rotary_name}",name:"Kr ind i {rotary_name} og kr ad {way_name} ",destination:"Kr ind i {rotary_name} og kr mod {destination}"},exit:{default:"Tag rundkrslen og forlad ved {exit_number} afkrsel",name:"Tag rundkrslen og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Tag rundkrslen og forlad ved {exit_number} afkrsel mod {destination}"},name_exit:{default:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel",name:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel mod {destination}"}}},roundabout:{default:{exit:{default:"Tag rundkrslen og forlad ved {exit_number} afkrsel",name:"Tag rundkrslen og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Tag rundkrslen og forlad ved {exit_number} afkrsel mod {destination}"},default:{default:"Kr ind i rundkrslen",name:"Tag rundkrslen og kr fra ad {way_name}",destination:"Tag rundkrslen og kr mod {destination}"}}},"roundabout turn":{default:{default:"Foretag et {modifier}",name:"Foretag et {modifier} ad {way_name}",destination:"Foretag et {modifier} mod {destination}"},left:{default:"Drej til venstre",name:"Drej til venstre ad {way_name}",destination:"Drej til venstre mod {destination}"},right:{default:"Drej til hjre",name:"Drej til hjre ad {way_name}",destination:"Drej til hjre mod {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst ligeud mod {destination}"}},"exit roundabout":{default:{default:"Forlad rundkrslen",name:"Forlad rundkrslen ad {way_name}",destination:"Forlad rundkrslen mod  {destination}"}},"exit rotary":{default:{default:"Forlad rundkrslen",name:"Forlad rundkrslen ad {way_name}",destination:"Forlad rundkrslen mod {destination}"}},turn:{default:{default:"Foretag et {modifier}",name:"Foretag et {modifier} ad {way_name}",destination:"Foretag et {modifier} mod {destination}"},left:{default:"Drej til venstre",name:"Drej til venstre ad {way_name}",destination:"Drej til venstre mod {destination}"},right:{default:"Drej til hjre",name:"Drej til hjre ad {way_name}",destination:"Drej til hjre mod {destination}"},straight:{default:"Fortst ligeud",name:"Kr ligeud ad {way_name}",destination:"Kr ligeud mod {destination}"}},"use lane":{no_lanes:{default:"Fortst ligeud"},default:{default:"{lane_instruction}"}}}}},{}],24:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"erste",2:"zweite",3:"dritte",4:"vierte",5:"fnfte",6:"sechste",7:"siebente",8:"achte",9:"neunte",10:"zehnte"},direction:{north:"Norden",northeast:"Nordosten",east:"Osten",southeast:"Sdosten",south:"Sden",southwest:"Sdwesten",west:"Westen",northwest:"Nordwesten"},modifier:{left:"links",right:"rechts","sharp left":"scharf links","sharp right":"scharf rechts","slight left":"leicht links","slight right":"leicht rechts",straight:"geradeaus",uturn:"180-Wendung"},lanes:{xo:"Rechts halten",ox:"Links halten",xox:"Mittlere Spur nutzen",oxo:"Rechts oder links halten"}},modes:{ferry:{default:"Fhre nehmen",name:"Fhre nehmen {way_name}",destination:"Fhre nehmen Richtung {destination}"}},phrase:{"two linked by distance":"{instruction_one} danach in {distance} {instruction_two}","two linked":"{instruction_one} danach {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Sie haben Ihr {nth} Ziel erreicht",upcoming:"Sie haben Ihr {nth} Ziel erreicht",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}"},left:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},right:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"sharp left":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},"sharp right":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"slight right":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"slight left":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},straight:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich geradeaus",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich geradeaus",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich geradeaus"}},continue:{default:{default:"{modifier} abbiegen",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}",exit:"{modifier} abbiegen auf {way_name}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Weiterfahren in Richtung {destination}",distance:"Geradeaus weiterfahren fr {distance}",namedistance:"Geradeaus weiterfahren auf {way_name} fr {distance}"},"sharp left":{default:"Scharf links",name:"Scharf links weiterfahren auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts",name:"Scharf rechts weiterfahren auf {way_name}",destination:"Scharf rechts Richtung {destination}"},"slight left":{default:"Leicht links",name:"Leicht links weiter auf {way_name}",destination:"Leicht links weiter Richtung {destination}"},"slight right":{default:"Leicht rechts weiter",name:"Leicht rechts weiter auf {way_name}",destination:"Leicht rechts weiter Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},depart:{default:{default:"Fahren Sie Richtung {direction}",name:"Fahren Sie Richtung {direction} auf {way_name}",namedistance:"Fahren Sie Richtung {direction} auf {way_name} fr {distance}"}},"end of road":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"},uturn:{default:"180-Wendung am Ende der Strae",name:"180-Wendung auf {way_name} am Ende der Strae",destination:"180-Wendung Richtung {destination} am Ende der Strae"}},fork:{default:{default:"{modifier} halten an der Gabelung",name:"{modifier} halten an der Gabelung auf {way_name}",destination:"{modifier}  halten an der Gabelung Richtung {destination}"},"slight left":{default:"Links halten an der Gabelung",name:"Links halten an der Gabelung auf {way_name}",destination:"Links halten an der Gabelung Richtung {destination}"},"slight right":{default:"Rechts halten an der Gabelung",name:"Rechts halten an der Gabelung auf {way_name}",destination:"Rechts halten an der Gabelung Richtung {destination}"},"sharp left":{default:"Scharf links abbiegen an der Gabelung",name:"Scharf links auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts abbiegen an der Gabelung",name:"Scharf rechts auf {way_name}",destination:"Scharf rechts Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},merge:{default:{default:"{modifier} auffahren",name:"{modifier} auffahren auf {way_name}",destination:"{modifier} auffahren Richtung {destination}"},straight:{default:"geradeaus auffahren",name:"geradeaus auffahren auf {way_name}",destination:"geradeaus auffahren Richtung {destination}"},"slight left":{default:"Leicht links auffahren",name:"Leicht links auffahren auf {way_name}",destination:"Leicht links auffahren Richtung {destination}"},"slight right":{default:"Leicht rechts auffahren",name:"Leicht rechts auffahren auf {way_name}",destination:"Leicht rechts auffahren Richtung {destination}"},"sharp left":{default:"Scharf links auffahren",name:"Scharf links auffahren auf {way_name}",destination:"Scharf links auffahren Richtung {destination}"},"sharp right":{default:"Scharf rechts auffahren",name:"Scharf rechts auffahren auf {way_name}",destination:"Scharf rechts auffahren Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},"new name":{default:{default:"{modifier} weiterfahren",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} weiterfahren Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Weiterfahren auf {way_name}",destination:"Weiterfahren in Richtung {destination}"},"sharp left":{default:"Scharf links",name:"Scharf links auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts",name:"Scharf rechts auf {way_name}",destination:"Scharf rechts Richtung {destination}"},"slight left":{default:"Leicht links weiter",name:"Leicht links weiter auf {way_name}",destination:"Leicht links weiter Richtung {destination}"},"slight right":{default:"Leicht rechts weiter",name:"Leicht rechts weiter auf {way_name}",destination:"Leicht rechts weiter Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},notification:{default:{default:"{modifier} weiterfahren",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} weiterfahren Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},"off ramp":{default:{default:"Ausfahrt nehmen",name:"Ausfahrt nehmen auf {way_name}",destination:"Ausfahrt nehmen Richtung {destination}",exit:"Ausfahrt {exit} nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},left:{default:"Ausfahrt links nehmen",name:"Ausfahrt links nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} links nehmen",exit_destination:"Ausfahrt {exit} links nehmen Richtung {destination}"},right:{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen Richtung {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},"sharp left":{default:"Ausfahrt links nehmen",name:"Ausfahrt links Seite nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} links nehmen",exit_destination:"Ausfahrt{exit} links nehmen Richtung {destination}"},"sharp right":{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen auf {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},"slight left":{default:"Ausfahrt links nehmen",name:"Ausfahrt links nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} nehmen",exit_destination:"Ausfahrt {exit} links nehmen Richtung {destination}"},"slight right":{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen auf {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"}},"on ramp":{default:{default:"Auffahrt nehmen",name:"Auffahrt nehmen auf {way_name}",destination:"Auffahrt nehmen Richtung {destination}"},left:{default:"Auffahrt links nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},right:{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"},"sharp left":{default:"Auffahrt links nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},"sharp right":{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"},"slight left":{default:"Auffahrt links Seite nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},"slight right":{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"}},rotary:{default:{default:{default:"In den Kreisverkehr fahren",name:"Im Kreisverkehr die Ausfahrt auf {way_name} nehmen",destination:"Im Kreisverkehr die Ausfahrt Richtung {destination} nehmen"},name:{default:"In {rotary_name} fahren",name:"In {rotary_name} die Ausfahrt auf {way_name} nehmen",destination:"In {rotary_name} die Ausfahrt Richtung {destination} nehmen"},exit:{default:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen",name:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen auf {way_name}",destination:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen Richtung {destination}"},name_exit:{default:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen",name:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen auf {way_name}",destination:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen Richtung {destination}"}}},roundabout:{default:{exit:{default:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen",name:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen auf {way_name}",destination:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen Richtung {destination}"},default:{default:"In den Kreisverkehr fahren",name:"Im Kreisverkehr die Ausfahrt auf {way_name} nehmen",destination:"Im Kreisverkehr die Ausfahrt Richtung {destination} nehmen"}}},"roundabout turn":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"exit roundabout":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"exit rotary":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},turn:{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"use lane":{no_lanes:{default:"Geradeaus weiterfahren"},default:{default:"{lane_instruction}"}}}}},{}],25:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th"},direction:{north:"north",northeast:"northeast",east:"east",southeast:"southeast",south:"south",southwest:"southwest",west:"west",northwest:"northwest"},modifier:{left:"left",right:"right","sharp left":"sharp left","sharp right":"sharp right","slight left":"slight left","slight right":"slight right",straight:"straight",uturn:"U-turn"},lanes:{xo:"Keep right",ox:"Keep left",xox:"Keep in the middle",oxo:"Keep left or right"}},modes:{ferry:{default:"Take the ferry",name:"Take the ferry {way_name}",destination:"Take the ferry towards {destination}"}},phrase:{"two linked by distance":"{instruction_one}, then, in {distance}, {instruction_two}","two linked":"{instruction_one}, then {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"You have arrived at your {nth} destination",upcoming:"You will arrive at your {nth} destination",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}"},left:{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},right:{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"sharp left":{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},"sharp right":{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"slight right":{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"slight left":{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},straight:{default:"You have arrived at your {nth} destination, straight ahead",upcoming:"You will arrive at your {nth} destination, straight ahead",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, straight ahead"}},continue:{default:{default:"Turn {modifier}",name:"Turn {modifier} to stay on {way_name}",destination:"Turn {modifier} towards {destination}",exit:"Turn {modifier} onto {way_name}"},straight:{default:"Continue straight",name:"Continue straight to stay on {way_name}",destination:"Continue towards {destination}",distance:"Continue straight for {distance}",namedistance:"Continue on {way_name} for {distance}"},"sharp left":{default:"Make a sharp left",name:"Make a sharp left to stay on {way_name}",destination:"Make a sharp left towards {destination}"},"sharp right":{default:"Make a sharp right",name:"Make a sharp right to stay on {way_name}",destination:"Make a sharp right towards {destination}"},"slight left":{default:"Make a slight left",name:"Make a slight left to stay on {way_name}",destination:"Make a slight left towards {destination}"},"slight right":{default:"Make a slight right",name:"Make a slight right to stay on {way_name}",destination:"Make a slight right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn and continue on {way_name}",destination:"Make a U-turn towards {destination}"}},depart:{default:{default:"Head {direction}",name:"Head {direction} on {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Turn {modifier}",name:"Turn {modifier} onto {way_name}",destination:"Turn {modifier} towards {destination}"},straight:{default:"Continue straight",name:"Continue straight onto {way_name}",destination:"Continue straight towards {destination}"},uturn:{default:"Make a U-turn at the end of the road",name:"Make a U-turn onto {way_name} at the end of the road",destination:"Make a U-turn towards {destination} at the end of the road"}},fork:{default:{default:"Keep {modifier} at the fork",name:"Keep {modifier} onto {way_name}",destination:"Keep {modifier} towards {destination}"},"slight left":{default:"Keep left at the fork",name:"Keep left onto {way_name}",destination:"Keep left towards {destination}"},"slight right":{default:"Keep right at the fork",name:"Keep right onto {way_name}",destination:"Keep right towards {destination}"},"sharp left":{default:"Take a sharp left at the fork",name:"Take a sharp left onto {way_name}",destination:"Take a sharp left towards {destination}"},"sharp right":{default:"Take a sharp right at the fork",name:"Take a sharp right onto {way_name}",destination:"Take a sharp right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},merge:{default:{default:"Merge {modifier}",name:"Merge {modifier} onto {way_name}",destination:"Merge {modifier} towards {destination}"},straight:{default:"Merge",name:"Merge onto {way_name}",destination:"Merge towards {destination}"},"slight left":{default:"Merge left",name:"Merge left onto {way_name}",destination:"Merge left towards {destination}"},"slight right":{default:"Merge right",name:"Merge right onto {way_name}",destination:"Merge right towards {destination}"},"sharp left":{default:"Merge left",name:"Merge left onto {way_name}",destination:"Merge left towards {destination}"},"sharp right":{default:"Merge right",name:"Merge right onto {way_name}",destination:"Merge right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} onto {way_name}",destination:"Continue {modifier} towards {destination}"},straight:{default:"Continue straight",name:"Continue onto {way_name}",destination:"Continue towards {destination}"},"sharp left":{default:"Take a sharp left",name:"Take a sharp left onto {way_name}",destination:"Take a sharp left towards {destination}"},"sharp right":{default:"Take a sharp right",name:"Take a sharp right onto {way_name}",destination:"Take a sharp right towards {destination}"},"slight left":{default:"Continue slightly left",name:"Continue slightly left onto {way_name}",destination:"Continue slightly left towards {destination}"},"slight right":{default:"Continue slightly right",name:"Continue slightly right onto {way_name}",destination:"Continue slightly right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} onto {way_name}",destination:"Continue {modifier} towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},"off ramp":{default:{default:"Take the ramp",name:"Take the ramp onto {way_name}",destination:"Take the ramp towards {destination}",exit:"Take exit {exit}",exit_destination:"Take exit {exit} towards {destination}"},left:{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},right:{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"sharp left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"sharp right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"slight left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"slight right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"}},"on ramp":{default:{default:"Take the ramp",name:"Take the ramp onto {way_name}",destination:"Take the ramp towards {destination}"},left:{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},right:{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"},"sharp left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},"sharp right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"},"slight left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},"slight right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"}},rotary:{default:{default:{default:"Enter the traffic circle",name:"Enter the traffic circle and exit onto {way_name}",destination:"Enter the traffic circle and exit towards {destination}"},name:{default:"Enter {rotary_name}",name:"Enter {rotary_name} and exit onto {way_name}",destination:"Enter {rotary_name} and exit towards {destination}"},exit:{default:"Enter the traffic circle and take the {exit_number} exit",name:"Enter the traffic circle and take the {exit_number} exit onto {way_name}",destination:"Enter the traffic circle and take the {exit_number} exit towards {destination}"},name_exit:{default:"Enter {rotary_name} and take the {exit_number} exit",name:"Enter {rotary_name} and take the {exit_number} exit onto {way_name}",destination:"Enter {rotary_name} and take the {exit_number} exit towards {destination}"}}},roundabout:{default:{exit:{default:"Enter the traffic circle and take the {exit_number} exit",name:"Enter the traffic circle and take the {exit_number} exit onto {way_name}",destination:"Enter the traffic circle and take the {exit_number} exit towards {destination}"},default:{default:"Enter the traffic circle",name:"Enter the traffic circle and exit onto {way_name}",destination:"Enter the traffic circle and exit towards {destination}"}}},"roundabout turn":{default:{default:"Make a {modifier}",name:"Make a {modifier} onto {way_name}",destination:"Make a {modifier} towards {destination}"},left:{default:"Turn left",name:"Turn left onto {way_name}",destination:"Turn left towards {destination}"},right:{default:"Turn right",name:"Turn right onto {way_name}",destination:"Turn right towards {destination}"},straight:{default:"Continue straight",name:"Continue straight onto {way_name}",destination:"Continue straight towards {destination}"}},"exit roundabout":{default:{default:"Exit the traffic circle",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},"exit rotary":{default:{default:"Exit the traffic circle",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},turn:{default:{default:"Make a {modifier}",name:"Make a {modifier} onto {way_name}",destination:"Make a {modifier} towards {destination}"},left:{default:"Turn left",name:"Turn left onto {way_name}",destination:"Turn left towards {destination}"},right:{default:"Turn right",name:"Turn right onto {way_name}",destination:"Turn right towards {destination}"},straight:{default:"Go straight",name:"Go straight onto {way_name}",destination:"Go straight towards {destination}"}},"use lane":{no_lanes:{default:"Continue straight"},default:{default:"{lane_instruction}"}}}}},{}],26:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"norden",northeast:"nord-orienten",east:"orienten",southeast:"sud-orienten",south:"suden",southwest:"sud-okcidenten",west:"okcidenten",northwest:"nord-okcidenten"},modifier:{left:"maldekstren",right:"dekstren","sharp left":"maldekstregen","sharp right":"dekstregen","slight left":"maldekstreten","slight right":"dekstreten",straight:"rekten",uturn:"turniu malantaen"},lanes:{xo:"Veturu dekstre",ox:"Veturu maldekstre",xox:"Veturu meze",oxo:"Veturu dekstre a maldekstre"}},modes:{ferry:{default:"Enpramiu",name:"Enpramiu {way_name}",destination:"Enpramiu direkte al {destination}"}},phrase:{"two linked by distance":"{instruction_one} kaj post {distance} {instruction_two}","two linked":"{instruction_one} kaj sekve {instruction_two}","one in distance":"Post {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"elveturejo {exit}"},arrive:{default:{default:"Vi atingis vian {nth} celon",upcoming:"Vi atingos vian {nth} celon",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}"},left:{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},right:{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"sharp left":{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},"sharp right":{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"slight right":{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"slight left":{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},straight:{default:"Vi atingis vian {nth} celon",upcoming:"Vi atingos vian {nth} celon rekte",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name} antae"}},continue:{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}",exit:"Veturu {modifier} direkte al {way_name}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}",distance:"Veturu rekten dum {distance}",namedistance:"Veturu rekten al {way_name} dum {distance}"},"sharp left":{default:"Turniu ege maldekstren",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Turniu ege dekstren",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},"slight left":{default:"Turniu ete maldekstren",name:"Turniu ete maldekstren al {way_name}",destination:"Turniu ete maldekstren direkte al {destination}"},"slight right":{default:"Turniu ete dekstren",name:"Turniu ete dekstren al {way_name}",destination:"Turniu ete dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},depart:{default:{default:"Direktiu {direction}",name:"Direktiu {direction} al {way_name}",namedistance:"Direktiu {direction} al {way_name} tra {distance}"}},"end of road":{default:{default:"Veturu {modifier}",name:"Veturu {modifier} direkte al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"},uturn:{default:"Turniu malantaen e fino de la vojo",name:"Turniu malantaen al {way_name} e fino de la vojo",destination:"Turniu malantaen direkte al {destination} e fino de la vojo"}},fork:{default:{default:"Daru {modifier} e la vojforko",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},"slight left":{default:"Maldekstren e la vojforko",name:"Pluu maldekstren al {way_name}",destination:"Pluu maldekstren direkte al {destination}"},"slight right":{default:"Dekstren e la vojforko",name:"Pluu dekstren al {way_name}",destination:"Pluu dekstren direkte al {destination}"},"sharp left":{default:"Ege maldekstren e la vojforko",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Ege dekstren e la vojforko",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},merge:{default:{default:"Enveturu {modifier}",name:"Enveturu {modifier} al {way_name}",destination:"Enveturu {modifier} direkte al {destination}"},straight:{default:"Enveturu",name:"Enveturu al {way_name}",destination:"Enveturu direkte al {destination}"},"slight left":{default:"Enveturu de maldekstre",name:"Enveturu de maldekstre al {way_name}",destination:"Enveturu de maldekstre direkte al {destination}"},"slight right":{default:"Enveturu de dekstre",name:"Enveturu de dekstre al {way_name}",destination:"Enveturu de dekstre direkte al {destination}"},"sharp left":{default:"Enveturu de maldekstre",name:"Enveture de maldekstre al {way_name}",destination:"Enveturu de maldekstre direkte al {destination}"},"sharp right":{default:"Enveturu de dekstre",name:"Enveturu de dekstre al {way_name}",destination:"Enveturu de dekstre direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},"new name":{default:{default:"Pluu {modifier}",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"},"sharp left":{default:"Turniu ege maldekstren",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Turniu ege dekstren",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},"slight left":{default:"Pluu ete maldekstren",name:"Pluu ete maldekstren al {way_name}",destination:"Pluu ete maldekstren direkte al {destination}"},"slight right":{default:"Pluu ete dekstren",name:"Pluu ete dekstren al {way_name}",destination:"Pluu ete dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},notification:{default:{default:"Pluu {modifier}",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},"off ramp":{default:{default:"Direktiu al enveturejo",name:"Direktiu al enveturejo al {way_name}",destination:"Direktiu al enveturejo direkte al {destination}",exit:"Direktiu al elveturejo {exit}",exit_destination:"Direktiu al elveturejo {exit} direkte al {destination}"},left:{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al elveturejo {exit} e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},right:{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al {exit} elveturejo e ldekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"},"sharp left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al {exit} elveturejo e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},"sharp right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al elveturejo {exit} e dekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"},"slight left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al {exit} elveturejo e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},"slight right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al {exit} elveturejo e ldekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"}},"on ramp":{default:{default:"Direktiu al enveturejo",name:"Direktiu al enveturejo al {way_name}",destination:"Direktiu al enveturejo direkte al {destination}"},left:{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},right:{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"},"sharp left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},"sharp right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"},"slight left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},"slight right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"}},rotary:{default:{default:{default:"Enveturu trafikcirklegon",name:"Enveturu trafikcirklegon kaj elveturu al {way_name}",destination:"Enveturu trafikcirklegon kaj elveturu direkte al {destination}"},name:{default:"Enveturu {rotary_name}",name:"Enveturu {rotary_name} kaj elveturu al {way_name}",destination:"Enveturu {rotary_name} kaj elveturu direkte al {destination}"},exit:{default:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo",name:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo direkte al {destination}"},name_exit:{default:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo",name:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo direkte al {destination}"}}},roundabout:{default:{exit:{default:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo",name:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo direkte al {destination}"},default:{default:"Enveturu trafikcirklegon",name:"Enveturu trafikcirklegon kaj elveturu al {way_name}",destination:"Enveturu trafikcirklegon kaj elveturu direkte al {destination}"}}},"roundabout turn":{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},left:{default:"Turniu maldekstren",name:"Turniu maldekstren al {way_name}",destination:"Turniu maldekstren direkte al {destination}"},right:{default:"Turniu dekstren",name:"Turniu dekstren al {way_name}",destination:"Turniu dekstren direkte al {destination}"},straight:{default:"Pluu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"}},"exit roundabout":{default:{default:"Elveturu trafikcirklegon",name:"Elveturu trafikcirklegon al {way_name}",destination:"Elveturu trafikcirklegon direkte al {destination}"}},"exit rotary":{default:{default:"Eliru trafikcirklegon",name:"Elveturu trafikcirklegon al {way_name}",destination:"Elveturu trafikcirklegon direkte al {destination}"}},turn:{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},left:{default:"Turniu maldekstren",name:"Turniu maldekstren al {way_name}",destination:"Turniu maldekstren direkte al {destination}"},right:{default:"Turniu dekstren",name:"Turniu dekstren al {way_name}",destination:"Turniu dekstren direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"}},"use lane":{no_lanes:{default:"Pluu rekten"},default:{default:"{lane_instruction}"}}}}},{}],27:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"noreste",east:"este",southeast:"sureste",south:"sur",southwest:"suroeste",west:"oeste",northwest:"noroeste"},modifier:{left:"a la izquierda",right:"a la derecha","sharp left":"cerrada a la izquierda","sharp right":"cerrada a la derecha","slight left":"ligeramente a la izquierda","slight right":"ligeramente a la derecha",straight:"recto",uturn:"cambio de sentido"},lanes:{xo:"Mantente a la derecha",ox:"Mantente a la izquierda",xox:"Mantente en el medio",oxo:"Mantente a la izquierda o a la derecha"}},modes:{ferry:{default:"Coge el ferry",name:"Coge el ferry {way_name}",destination:"Coge el ferry hacia {destination}"}},phrase:{"two linked by distance":"{instruction_one} y luego en {distance}, {instruction_two}","two linked":"{instruction_one} y luego {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"salida {exit}"},arrive:{default:{default:"Has llegado a tu {nth} destino",upcoming:"Vas a llegar a tu {nth} destino",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}"},left:{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},right:{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"sharp left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},"sharp right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},straight:{default:"Has llegado a tu {nth} destino, en frente",upcoming:"Vas a llegar a tu {nth} destino, en frente",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, en frente"}},continue:{default:{default:"Gire {modifier}",name:"Cruce {modifier} en {way_name}",destination:"Gire {modifier} hacia {destination}",exit:"Gire {modifier} en {way_name}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}",distance:"Contina recto por {distance}",namedistance:"Contina recto en {way_name} por {distance}"},"sharp left":{default:"Gire a la izquierda",name:"Gire a la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},"sharp right":{default:"Gire a la derecha",name:"Gire a la derecha en {way_name}",destination:"Gire a la derecha hacia {destination}"},"slight left":{default:"Gire a la izquierda",name:"Doble levementea la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},"slight right":{default:"Gire a la izquierda",name:"Doble levemente a la derecha en {way_name}",destination:"Gire a la izquierda hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido y contina en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},depart:{default:{default:"Dirgete al {direction}",name:"Dirgete al {direction} por {way_name}",namedistance:"Dirgete al {direction} en {way_name} por {distance}"}},"end of road":{default:{default:"Al final de la calle gira {modifier}",name:"Al final de la calle gira {modifier} por {way_name}",destination:"Al final de la calle gira {modifier} hacia {destination}"},straight:{default:"Al final de la calle contina recto",name:"Al final de la calle contina recto por {way_name}",destination:"Al final de la calle contina recto hacia {destination}"},uturn:{default:"Al final de la calle haz un cambio de sentido",name:"Al final de la calle haz un cambio de sentido en {way_name}",destination:"Al final de la calle haz un cambio de sentido hacia {destination}"}},fork:{default:{default:"Mantente {modifier} en el cruce",name:"Mantente {modifier} por {way_name}",destination:"Mantente {modifier} hacia {destination}"},"slight left":{default:"Mantente a la izquierda en el cruce",name:"Mantente a la izquierda por {way_name}",destination:"Mantente a la izquierda hacia {destination}"},"slight right":{default:"Mantente a la derecha en el cruce",name:"Mantente a la derecha por {way_name}",destination:"Mantente a la derecha hacia {destination}"},"sharp left":{default:"Gira la izquierda en el cruce",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha en el cruce",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},merge:{default:{default:"Incorprate {modifier}",name:"Incorprate {modifier} por {way_name}",destination:"Incorprate {modifier} hacia {destination}"},straight:{default:"Incorprate",name:"Incorprate por {way_name}",destination:"Incorprate hacia {destination}"},"slight left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda por {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"slight right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha por {way_name}",destination:"Incorprate a la derecha hacia {destination}"},"sharp left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda por {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"sharp right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha por {way_name}",destination:"Incorprate a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"new name":{default:{default:"Contina {modifier}",name:"Contina {modifier} por {way_name}",destination:"Contina {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina por {way_name}",destination:"Contina hacia {destination}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Contina ligeramente por la izquierda",name:"Contina ligeramente por la izquierda por {way_name}",destination:"Contina ligeramente por la izquierda hacia {destination}"},"slight right":{default:"Contina ligeramente por la derecha",name:"Contina ligeramente por la derecha por {way_name}",destination:"Contina ligeramente por la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},notification:{default:{default:"Contina {modifier}",name:"Contina {modifier} por {way_name}",destination:"Contina {modifier} hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"off ramp":{default:{default:"Coge la cuesta abajo",name:"Coge la cuesta abajo por {way_name}",destination:"Coge la cuesta abajo hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},left:{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo {exit} a tu izquierda hacia {destination}"},right:{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},"sharp left":{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo {exit} a tu izquierda hacia {destination}"},"sharp right":{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},"slight left":{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo{exit} a tu izquierda hacia {destination}"},"slight right":{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"}},"on ramp":{default:{default:"Coge la cuesta",name:"Coge la cuesta por {way_name}",destination:"Coge la cuesta hacia {destination}"},left:{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},right:{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"},"sharp left":{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},"sharp right":{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"},"slight left":{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},"slight right":{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"}},rotary:{default:{default:{default:"Incorprate en la rotonda",name:"En la rotonda sal por {way_name}",destination:"En la rotonda sal hacia {destination}"},name:{default:"En {rotary_name}",name:"En {rotary_name} sal por {way_name}",destination:"En {rotary_name} sal hacia {destination}"},exit:{default:"En la rotonda toma la {exit_number} salida",name:"En la rotonda toma la {exit_number} salida por {way_name}",destination:"En la rotonda toma la {exit_number} salida hacia {destination}"},name_exit:{default:"En {rotary_name} toma la {exit_number} salida",name:"En {rotary_name} toma la {exit_number} salida por {way_name}",destination:"En {rotary_name} toma la {exit_number} salida hacia {destination}"}}},roundabout:{default:{exit:{default:"En la rotonda toma la {exit_number} salida",name:"En la rotonda toma la {exit_number} salida por {way_name}",destination:"En la rotonda toma la {exit_number} salida hacia {destination}"},default:{default:"Incorprate en la rotonda",name:"Incorprate en la rotonda y sal en {way_name}",destination:"Incorprate en la rotonda y sal hacia {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} en {way_name}",destination:"Siga {modifier} hacia {destination}"},left:{default:"Gire a la izquierda",name:"Gire a la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},right:{default:"Gire a la derecha",name:"Gire a la derecha en {way_name}",destination:"Gire a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto por {way_name}",destination:"Contina recto hacia {destination}"}},"exit roundabout":{default:{default:"Sal la rotonda",name:"Toma la salida por {way_name}",destination:"Toma la salida hacia {destination}"}},"exit rotary":{default:{default:"Sal la rotonda",name:"Toma la salida por {way_name}",destination:"Toma la salida hacia {destination}"}},turn:{default:{default:"Gira {modifier}",name:"Gira {modifier} por {way_name}",destination:"Gira {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto por {way_name}",destination:"Contina recto hacia {destination}"}},"use lane":{no_lanes:{default:"Contina recto"},default:{default:"{lane_instruction}"}}}}},{}],28:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"noreste",east:"este",southeast:"sureste",south:"sur",southwest:"suroeste",west:"oeste",northwest:"noroeste"},modifier:{left:"izquierda",right:"derecha","sharp left":"cerrada a la izquierda","sharp right":"cerrada a la derecha","slight left":"levemente a la izquierda","slight right":"levemente a la derecha",straight:"recto",uturn:"cambio de sentido"},lanes:{xo:"Mantente a la derecha",ox:"Mantente a la izquierda",xox:"Mantente en el medio",oxo:"Mantente a la izquierda o derecha"}},modes:{ferry:{default:"Coge el ferry",name:"Coge el ferry {way_name}",destination:"Coge el ferry a {destination}"}},phrase:{"two linked by distance":"{instruction_one} y luego a {distance}, {instruction_two}","two linked":"{instruction_one} y luego {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"salida {exit}"},arrive:{default:{default:"Has llegado a tu {nth} destino",upcoming:"Vas a llegar a tu {nth} destino",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}"},left:{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},right:{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"sharp left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},"sharp right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},straight:{default:"Has llegado a tu {nth} destino, en frente",upcoming:"Vas a llegar a tu {nth} destino, en frente",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, en frente"}},continue:{default:{default:"Gira a {modifier}",name:"Cruza a la{modifier}  en {way_name}",destination:"Gira a {modifier} hacia {destination}",exit:"Gira a {modifier} en {way_name}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}",distance:"Contina recto por {distance}",namedistance:"Contina recto en {way_name} por {distance}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Gira a la izquierda",name:"Dobla levemente a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"slight right":{default:"Gira a la izquierda",name:"Dobla levemente a la derecha en {way_name}",destination:"Gira a la izquierda hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido y contina en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},depart:{default:{default:"Ve a {direction}",name:"Ve a {direction} en {way_name}",namedistance:"Ve a {direction} en {way_name} por {distance}"}},"end of road":{default:{default:"Gira  a {modifier}",name:"Gira a {modifier} en {way_name}",destination:"Gira a {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto en {way_name}",destination:"Contina recto hacia {destination}"},uturn:{default:"Haz un cambio de sentido al final de la via",name:"Haz un cambio de sentido en {way_name} al final de la via",destination:"Haz un cambio de sentido hacia {destination} al final de la via"}},fork:{default:{default:"Mantente  {modifier} en el cruza",name:"Mantente {modifier} en {way_name}",destination:"Mantente {modifier} hacia {destination}"},"slight left":{default:"Mantente a la izquierda en el cruza",name:"Mantente a la izquierda en {way_name}",destination:"Mantente a la izquierda hacia {destination}"},"slight right":{default:"Mantente a la derecha en el cruza",name:"Mantente a la derecha en {way_name}",destination:"Mantente a la derecha hacia {destination}"},"sharp left":{default:"Gira a la izquierda en el cruza",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha en el cruza",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},merge:{default:{default:"Incorprate a {modifier}",name:"Incorprate a {modifier} en {way_name}",destination:"Incorprate a {modifier} hacia {destination}"},straight:{default:"Incorprate",name:"Incorprate a {way_name}",destination:"Incorprate hacia {destination}"},"slight left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda en {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"slight right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha en {way_name}",destination:"Incorprate a la derecha hacia {destination}"},"sharp left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda en {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"sharp right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha en {way_name}",destination:"Incorprate a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"new name":{default:{default:"Contina {modifier}",name:"Contina {modifier} en {way_name}",destination:"Contina {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Contina levemente a la izquierda",name:"Contina levemente a la izquierda en {way_name}",destination:"Contina levemente a la izquierda hacia {destination}"},"slight right":{default:"Contina levemente a la derecha",name:"Contina levemente a la derecha en {way_name}",destination:"Contina levemente a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},notification:{default:{default:"Contina {modifier}",name:"Contina {modifier} en {way_name}",destination:"Contina {modifier} hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"off ramp":{default:{default:"Toma la salida",name:"Toma la salida en {way_name}",destination:"Toma la salida hacia {destination}",exit:"Toma la salida {exit}",exit_destination:"Toma la salida {exit} hacia {destination}"},left:{default:"Toma la salida en la izquierda",name:"Toma la salida en la izquierda en {way_name}",destination:"Toma la salida en la izquierda en {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},right:{default:"Toma la salida en la derecha",name:"Toma la salida en la derecha en {way_name}",destination:"Toma la salida en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"},"sharp left":{default:"Ve cuesta abajo en la izquierda",name:"Ve cuesta abajo en la izquierda en {way_name}",destination:"Ve cuesta abajo en la izquierda hacia {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},"sharp right":{default:"Ve cuesta abajo en la derecha",name:"Ve cuesta abajo en la derecha en {way_name}",destination:"Ve cuesta abajo en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"},"slight left":{default:"Ve cuesta abajo en la izquierda",name:"Ve cuesta abajo en la izquierda en {way_name}",destination:"Ve cuesta abajo en la izquierda hacia {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},"slight right":{default:"Toma la salida en la derecha",name:"Toma la salida en la derecha en {way_name}",destination:"Toma la salida en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"}},"on ramp":{default:{default:"Toma la rampa",name:"Toma la rampa en {way_name}",destination:"Toma la rampa hacia {destination}"},left:{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},right:{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"},"sharp left":{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},"sharp right":{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"},"slight left":{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},"slight right":{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"}},rotary:{default:{default:{default:"Entra en la rotonda",name:"Entra en la rotonda y sal en {way_name}",destination:"Entra en la rotonda y sal hacia {destination}"},name:{default:"Entra en {rotary_name}",name:"Entra en {rotary_name} y sal en {way_name}",destination:"Entra en {rotary_name} y sal hacia {destination}"},exit:{default:"Entra en la rotonda y toma la {exit_number} salida",name:"Entra en la rotonda y toma la {exit_number} salida a {way_name}",destination:"Entra en la rotonda y toma la {exit_number} salida hacia {destination}"},name_exit:{default:"Entra en {rotary_name} y coge la {exit_number} salida",name:"Entra en {rotary_name} y coge la {exit_number} salida en {way_name}",destination:"Entra en {rotary_name} y coge la {exit_number} salida hacia {destination}"}}},roundabout:{default:{exit:{default:"Entra en la rotonda y toma la {exit_number} salida",name:"Entra en la rotonda y toma la {exit_number} salida a {way_name}",destination:"Entra en la rotonda y toma la {exit_number} salida hacia {destination}"},default:{default:"Entra en la rotonda",name:"Entra en la rotonda y sal en {way_name}",destination:"Entra en la rotonda y sal hacia {destination}"}}},"roundabout turn":{default:{default:"Sigue {modifier}",name:"Sigue {modifier} en {way_name}",destination:"Sigue {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto en {way_name}",destination:"Contina recto hacia {destination}"}},"exit roundabout":{default:{default:"Sal la rotonda",name:"Sal la rotonda en {way_name}",destination:"Sal la rotonda hacia {destination}"}},"exit rotary":{default:{default:"Sal la rotonda",name:"Sal la rotonda en {way_name}",destination:"Sal la rotonda hacia {destination}"}},turn:{default:{default:"Sigue {modifier}",name:"Sigue {modifier} en {way_name}",destination:"Sigue {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Ve recto",name:"Ve recto en {way_name}",destination:"Ve recto hacia {destination}"}},"use lane":{no_lanes:{default:"Contina recto"},default:{default:"{lane_instruction}"}}}}},{}],29:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"pohjoiseen",northeast:"koilliseen",east:"itn",southeast:"kaakkoon",south:"eteln",southwest:"lounaaseen",west:"lnteen",northwest:"luoteeseen"},modifier:{left:"vasemmall(e/a)",right:"oikeall(e/a)","sharp left":"jyrksti vasempaan","sharp right":"jyrksti oikeaan","slight left":"loivasti vasempaan","slight right":"loivasti oikeaan",straight:"suoraan eteenpin",uturn:"U-knns"},lanes:{xo:"Pysy oikealla",ox:"Pysy vasemmalla",xox:"Pysy keskell",oxo:"Pysy vasemmalla tai oikealla"}},modes:{ferry:{default:"Aja lautalle",name:"Aja lautalle {way_name}",destination:"Aja lautalle, jonka mrnp on {destination}"}},phrase:{"two linked by distance":"{instruction_one}, sitten {distance} pst, {instruction_two}","two linked":"{instruction_one}, sitten {instruction_two}","one in distance":"{distance} pst, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"{exit}"},arrive:{default:{default:"Olet saapunut {nth} mrnphsi",upcoming:"Saavut {nth} mrnphsi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}"},left:{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},right:{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"sharp left":{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},"sharp right":{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"slight right":{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"slight left":{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},straight:{default:"Olet saapunut {nth} mrnphsi, joka on suoraan edesssi",upcoming:"Saavut {nth} mrnphsi, suoraan edess",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on suoraan edesssi"}},continue:{default:{default:"Knny {modifier}",name:"Knny {modifier} pysyksesi tiell {way_name}",destination:"Knny {modifier} suuntana {destination}",exit:"Knny {modifier} tielle {way_name}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan pysyksesi tiell {way_name}",destination:"Jatka suuntana {destination}",distance:"Jatka suoraan {distance}",namedistance:"Jatka tiell {way_name} {distance}"},"sharp left":{default:"Jatka jyrksti vasempaan",name:"Jatka jyrksti vasempaan pysyksesi tiell {way_name}",destination:"Jatka jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Jatka jyrksti oikeaan",name:"Jatka jyrksti oikeaan pysyksesi tiell {way_name}",destination:"Jatka jyrksti oikeaan suuntana {destination}"},"slight left":{default:"Jatka loivasti vasempaan",name:"Jatka loivasti vasempaan pysyksesi tiell {way_name}",destination:"Jatka loivasti vasempaan suuntana {destination}"},"slight right":{default:"Jatka loivasti oikeaan",name:"Jatka loivasti oikeaan pysyksesi tiell {way_name}",destination:"Jatka loivasti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns ja jatka tiet {way_name}",destination:"Tee U-knns suuntana {destination}"}},depart:{default:{default:"Aja {direction}",name:"Aja tiet {way_name} {direction}",namedistance:"Aja {distance} {direction} tiet {way_name} "}},"end of road":{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan eteenpin tielle {way_name}",destination:"Jatka suoraan eteenpin suuntana {destination}"},uturn:{default:"Tien pss tee U-knns",name:"Tien pss tee U-knns tielle {way_name}",destination:"Tien pss tee U-knns suuntana {destination}"}},fork:{default:{default:"Jatka tienhaarassa {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},"slight left":{default:"Pysy vasemmalla tienhaarassa",name:"Pysy vasemmalla tielle {way_name}",destination:"Pysy vasemmalla suuntana {destination}"},"slight right":{default:"Pysy oikealla tienhaarassa",name:"Pysy oikealla tielle {way_name}",destination:"Pysy oikealla suuntana {destination}"},"sharp left":{default:"Knny tienhaarassa jyrksti vasempaan",name:"Knny tienhaarassa jyrksti vasempaan tielle {way_name}",destination:"Knny tienhaarassa jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Knny tienhaarassa jyrksti oikeaan",name:"Knny tienhaarassa jyrksti oikeaan tielle {way_name}",destination:"Knny tienhaarassa jyrksti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},merge:{default:{default:"Liity {modifier}",name:"Liity {modifier}, tielle {way_name}",destination:"Liity {modifier}, suuntana {destination}"},straight:{default:"Liity",name:"Liity tielle {way_name}",destination:"Liity suuntana {destination}"},"slight left":{default:"Liity vasemmalle",name:"Liity vasemmalle, tielle {way_name}",destination:"Liity vasemmalle, suuntana {destination}"},"slight right":{default:"Liity oikealle",name:"Liity oikealle, tielle {way_name}",destination:"Liity oikealle, suuntana {destination}"},"sharp left":{default:"Liity vasemmalle",name:"Liity vasemmalle, tielle {way_name}",destination:"Liity vasemmalle, suuntana {destination}"},"sharp right":{default:"Liity oikealle",name:"Liity oikealle, tielle {way_name}",destination:"Liity oikealle, suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},"new name":{default:{default:"Jatka {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka tielle {way_name}",destination:"Jatka suuntana {destination}"},"sharp left":{default:"Knny jyrksti vasempaan",name:"Knny jyrksti vasempaan tielle {way_name}",destination:"Knny jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Knny jyrksti oikeaan",name:"Knny jyrksti oikeaan tielle {way_name}",destination:"Knny jyrksti oikeaan suuntana {destination}"},"slight left":{default:"Jatka loivasti vasempaan",name:"Jatka loivasti vasempaan tielle {way_name}",destination:"Jatka loivasti vasempaan suuntana {destination}"},"slight right":{default:"Jatka loivasti oikeaan",name:"Jatka loivasti oikeaan tielle {way_name}",destination:"Jatka loivasti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},notification:{default:{default:"Jatka {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},"off ramp":{default:{default:"Aja erkanemiskaistalle",name:"Aja erkanemiskaistaa tielle {way_name}",destination:"Aja erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit}",exit_destination:"Ota poistuminen {exit}, suuntana {destination}"},left:{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},right:{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"},"sharp left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},"sharp right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"},"slight left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},"slight right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"}},"on ramp":{default:{default:"Aja erkanemiskaistalle",name:"Aja erkanemiskaistaa tielle {way_name}",destination:"Aja erkanemiskaistalle suuntana {destination}"},left:{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},right:{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"},"sharp left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},"sharp right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"},"slight left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},"slight right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"}},rotary:{default:{default:{default:"Aja liikenneympyrn",name:"Aja liikenneympyrn ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse erkanemiskaista suuntana {destination}"},name:{default:"Aja liikenneympyrn {rotary_name}",name:"Aja liikenneympyrn {rotary_name} ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn {rotary_name} ja valitse erkanemiskaista suuntana {destination}"},exit:{default:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista suuntana {destination}"},name_exit:{default:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista suuntana {destination}"}}},roundabout:{default:{exit:{default:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista suuntana {destination}"},default:{default:"Aja liikenneympyrn",name:"Aja liikenneympyrn ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse erkanemiskaista suuntana {destination}"}}},"roundabout turn":{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},left:{default:"Knny vasempaan",name:"Knny vasempaan tielle {way_name}",destination:"Knny vasempaan suuntana {destination}"},right:{default:"Knny oikeaan",name:"Knny oikeaan tielle {way_name}",destination:"Knny oikeaan suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan eteenpin tielle {way_name}",destination:"Jatka suoraan eteenpin suuntana {destination}"}},"exit roundabout":{default:{default:"Poistu liikenneympyrst",name:"Poistu liikenneympyrst tielle {way_name}",destination:"Poistu liikenneympyrst suuntana {destination}"}},"exit rotary":{default:{default:"Poistu liikenneympyrst",name:"Poistu liikenneympyrst tielle {way_name}",destination:"Poistu liikenneympyrst suuntana {destination}"}},turn:{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},left:{default:"Knny vasempaan",name:"Knny vasempaan tielle {way_name}",destination:"Knny vasempaan suuntana {destination}"},right:{default:"Knny oikeaan",name:"Knny oikeaan tielle {way_name}",destination:"Knny oikeaan suuntana {destination}"},straight:{default:"Aja suoraan eteenpin",name:"Aja suoraan eteenpin tielle {way_name}",destination:"Aja suoraan eteenpin suuntana {destination}"}},"use lane":{no_lanes:{default:"Jatka suoraan eteenpin"},default:{default:"{lane_instruction}"}}}}},{}],30:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"premire",2:"seconde",3:"troisime",4:"quatrime",5:"cinquime",6:"sixime",7:"septime",8:"huitime",9:"neuvime",10:"dixime"},direction:{north:"le nord",northeast:"le nord-est",east:"lest",southeast:"le sud-est",south:"le sud",southwest:"le sud-ouest",west:"louest",northwest:"le nord-ouest"},modifier:{left:" gauche",right:" droite","sharp left":"franchement  gauche","sharp right":"franchement  droite","slight left":"lgrement  gauche","slight right":"lgrement  droite",straight:"tout droit",uturn:"demi-tour"},lanes:{xo:"Tenir la droite",ox:"Tenir la gauche",xox:"Rester au milieu",oxo:"Tenir la gauche ou la droite"}},modes:{ferry:{default:"Prendre le ferry",name:"Prendre le ferry {way_name:article}",destination:"Prendre le ferry en direction {destination:preposition}"}},phrase:{"two linked by distance":"{instruction_one}, puis, dans {distance}, {instruction_two}","two linked":"{instruction_one}, puis {instruction_two}","one in distance":"Dans {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sortie n{exit}"},arrive:{default:{default:"Vous tes arriv  votre {nth} destination",upcoming:"Vous arriverez  votre {nth} destination",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}"},left:{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},right:{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv   {waypoint_name:arrival}, sur la droite"},"sharp left":{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},"sharp right":{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la droite"},"slight right":{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la droite"},"slight left":{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous tes arriv",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},straight:{default:"Vous tes arriv  votre {nth} destination, droit devant",upcoming:"Vous arriverez  votre {nth} destination, droit devant",short:"Vous tes arriv","short-upcoming":"Vous tes arriv",named:"Vous tes arriv {waypoint_name:arrival}, droit devant"}},continue:{default:{default:"Tourner {modifier}",name:"Tourner {modifier} pour rester sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}",exit:"Tourner {modifier} sur {way_name:article}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit pour rester sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}",distance:"Continuer tout droit sur {distance}",namedistance:"Continuer sur {way_name:article} sur {distance}"},"sharp left":{default:"Tourner franchement  gauche",name:"Tourner franchement  gauche pour rester sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite",name:"Tourner franchement  droite pour rester sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},"slight left":{default:"Tourner lgrement  gauche",name:"Tourner lgrement  gauche pour rester sur {way_name:article}",destination:"Tourner lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Tourner lgrement  droite",name:"Tourner lgrement  droite pour rester sur {way_name:article}",destination:"Tourner lgrement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour et continuer sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},depart:{default:{default:"Se diriger vers {direction}",name:"Se diriger vers {direction} sur {way_name:article}",namedistance:"Se diriger vers {direction} sur {way_name:article} sur {distance}"}},"end of road":{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"},uturn:{default:"Faire demi-tour  la fin de la route",name:"Faire demi-tour  la fin {way_name:preposition}",destination:"Faire demi-tour  la fin de la route en direction {destination:preposition}"}},fork:{default:{default:"Tenir {modifier}  lembranchement",name:"Tenir {modifier} sur {way_name:article}",destination:"Tenir {modifier} en direction {destination:preposition}"},"slight left":{default:"Tenir la gauche  lembranchement",name:"Tenir la gauche sur {way_name:article}",destination:"Tenir la gauche en direction {destination:preposition}"},"slight right":{default:"Tenir la droite  lembranchement",name:"Tenir la droite sur {way_name:article}",destination:"Tenir la droite en direction {destination:preposition}"},"sharp left":{default:"Tourner franchement  gauche  lembranchement",name:"Tourner franchement  gauche sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite  lembranchement",name:"Tourner franchement  droite sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},merge:{default:{default:"Sinsrer {modifier}",name:"Sinsrer {modifier} sur {way_name:article}",destination:"Sinsrer {modifier} en direction {destination:preposition}"},straight:{default:"Sinsrer",name:"Sinsrer sur {way_name:article}",destination:"Sinsrer en direction {destination:preposition}"},"slight left":{default:"Sinsrer lgrement  gauche",name:"Sinsrer lgrement  gauche sur {way_name:article}",destination:"Sinsrer lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Sinsrer lgrement  droite",name:"Sinsrer lgrement  droite sur {way_name:article}",destination:"Sinsrer  droite en direction {destination:preposition}"},"sharp left":{default:"Sinsrer  gauche",name:"Sinsrer  gauche sur {way_name:article}",destination:"Sinsrer  gauche en direction {destination:preposition}"},"sharp right":{default:"Sinsrer  droite",name:"Sinsrer  droite sur {way_name:article}",destination:"Sinsrer  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},"new name":{default:{default:"Continuer {modifier}",name:"Continuer {modifier} sur {way_name:article}",destination:"Continuer {modifier} en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"},"sharp left":{default:"Tourner franchement  gauche",name:"Tourner franchement  gauche sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite",name:"Tourner franchement  droite sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},"slight left":{default:"Continuer lgrement  gauche",name:"Continuer lgrement  gauche sur {way_name:article}",destination:"Continuer lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Continuer lgrement  droite",name:"Continuer lgrement  droite sur {way_name:article}",destination:"Continuer lgrement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},notification:{default:{default:"Continuer {modifier}",name:"Continuer {modifier} sur {way_name:article}",destination:"Continuer {modifier} en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},"off ramp":{default:{default:"Prendre la sortie",name:"Prendre la sortie sur {way_name:article}",destination:"Prendre la sortie en direction {destination:preposition}",exit:"Prendre la sortie {exit}",exit_destination:"Prendre la sortie {exit} en direction {destination:preposition}"},left:{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},right:{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"},"sharp left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},"sharp right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"},"slight left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},"slight right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"}},"on ramp":{default:{default:"Prendre la sortie",name:"Prendre la sortie sur {way_name:article}",destination:"Prendre la sortie en direction {destination:preposition}"},left:{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},right:{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"},"sharp left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},"sharp right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"},"slight left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},"slight right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"}},rotary:{default:{default:{default:"Prendre le rond-point",name:"Prendre le rond-point, puis sortir sur {way_name:article}",destination:"Prendre le rond-point, puis sortir en direction {destination:preposition}"},name:{default:"Prendre {rotary_name:rotary}",name:"Prendre {rotary_name:rotary}, puis sortir par {way_name:article}",destination:"Prendre {rotary_name:rotary}, puis sortir en direction {destination:preposition}"},exit:{default:"Prendre le rond-point, puis la {exit_number} sortie",name:"Prendre le rond-point, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre le rond-point, puis la {exit_number} sortie en direction {destination:preposition}"},name_exit:{default:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie",name:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie en direction {destination:preposition}"}}},roundabout:{default:{exit:{default:"Prendre le rond-point, puis la {exit_number} sortie",name:"Prendre le rond-point, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre le rond-point, puis la {exit_number} sortie en direction {destination:preposition}"},default:{default:"Prendre le rond-point",name:"Prendre le rond-point, puis sortir sur {way_name:article}",destination:"Prendre le rond-point, puis sortir en direction {destination:preposition}"}}},"roundabout turn":{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},left:{default:"Tourner  gauche",name:"Tourner  gauche sur {way_name:article}",destination:"Tourner  gauche en direction {destination:preposition}"},right:{default:"Tourner  droite",name:"Tourner  droite sur {way_name:article}",destination:"Tourner  droite en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"}},"exit roundabout":{default:{default:"Sortir du rond-point",name:"Sortir du rond-point sur {way_name:article}",destination:"Sortir du rond-point en direction {destination:preposition}"}},"exit rotary":{default:{default:"Sortir du rond-point",name:"Sortir du rond-point sur {way_name:article}",destination:"Sortir du rond-point en direction {destination:preposition}"}},turn:{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},left:{default:"Tourner  gauche",name:"Tourner  gauche sur {way_name:article}",destination:"Tourner  gauche en direction {destination:preposition}"},right:{default:"Tourner  droite",name:"Tourner  droite sur {way_name:article}",destination:"Tourner  droite en direction {destination:preposition}"},straight:{default:"Aller tout droit",name:"Aller tout droit sur {way_name:article}",destination:"Aller tout droit en direction {destination:preposition}"}},"use lane":{no_lanes:{default:"Continuer tout droit"},default:{default:"{lane_instruction}"}}}}},{}],31:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:" ",east:"",southeast:" ",south:"",southwest:" ",west:"",northwest:" "},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:" "},lanes:{xo:" ",ox:" ",xox:"  ",oxo:"   "}},modes:{ferry:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},phrase:{"two linked by distance":"{instruction_one}, , {distance}, {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":" {exit}"},arrive:{default:{default:"   {nth} ",upcoming:"    {nth} ",short:"","short-upcoming":"",named:"  {waypoint_name}"},left:{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},right:{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"sharp left":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"sharp right":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"slight right":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"slight left":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},straight:{default:"   {nth} , ",upcoming:"    {nth} , ",short:"","short-upcoming":"",named:"  {waypoint_name}, "}},continue:{default:{default:" {modifier}",name:" {modifier}   {way_name}",destination:" {modifier}  {destination}",exit:" {modifier}  {way_name}"},straight:{default:" ",name:"     {way_name}",destination:"  {destination}",distance:"   {distance}",namedistance:"  {way_name}  {distance}"},"sharp left":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"slight left":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"slight right":{default:"  ",name:"      {way_name}",destination:"    {destination}"},uturn:{default:"  ",name:"     {way_name}",destination:"    {destination}"}},depart:{default:{default:" {direction}",name:" {direction}  {way_name}",namedistance:" {direction}  {way_name}  {distance}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:" ",name:"   {way_name}",destination:"   {destination}"},uturn:{default:"    ",name:"    {way_name}  ",destination:"    {destination}  "}},fork:{default:{default:" {modifier} ",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},"slight left":{default:"  ",name:"   {way_name}",destination:"   {destination}"},"slight right":{default:"  ",name:"   {way_name}",destination:"   {destination}"},"sharp left":{default:"   ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"   ",name:"    {way_name}",destination:"    {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},merge:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:"",name:"  {way_name}",destination:"  {destination}"},"slight left":{default:" ",name:"   {way_name}",destination:"   {destination}"},"slight right":{default:" ",name:"   {way_name}",destination:"   {destination}"},"sharp left":{default:" ",name:"   {way_name}",destination:"   {destination}"},"sharp right":{default:" ",name:"   {way_name}",destination:"   {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:" ",name:"  {way_name}",destination:"  {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"     {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"     {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},"off ramp":{default:{default:" ",name:"   {way_name}",destination:"   {destination}",exit:"  {exit}",exit_destination:"  {exit}  {destination}"},left:{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},right:{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"}},"on ramp":{default:{default:" ",name:"   {way_name}",destination:"   {destination}"},left:{default:"  ",name:"    {way_name}",destination:"    {destination}"},right:{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"    {destination}"}},rotary:{default:{default:{default:"  ",name:"     {way_name}",destination:"     {destination}"},name:{default:" {rotary_name}",name:" {rotary_name}   {way_name}",destination:" {rotary_name}   {destination}"},exit:{default:"     {exit_number}",name:"     {exit_number} {way_name}",destination:"     {exit_number}  {destination}"},name_exit:{default:" {rotary_name}   {exit_number}",name:" {rotary_name}   {exit_number} {way_name}",destination:" {rotary_name}   {exit_number}  {destination}"}}},roundabout:{default:{exit:{default:"     {exit_number}",name:"     {exit_number} {way_name}",destination:"     {exit_number}  {destination}"},default:{default:"  ",name:"     {way_name}",destination:"     {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},left:{default:" ",name:"  {way_name}",destination:"   {destination}"},right:{default:" ",name:"  {way_name}",destination:"   {destination}"},straight:{default:" ",name:"   {way_name}",destination:"   {destination}"}},"exit roundabout":{default:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},"exit rotary":{default:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},left:{default:" ",name:"  {way_name}",destination:"   {destination}"},right:{default:" ",name:"  {way_name}",destination:"   {destination}"},straight:{default:" ",name:"  {way_name}",destination:"   {destination}"}},"use lane":{no_lanes:{default:" "},default:{default:"{lane_instruction}"}}}}},{}],32:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"utara",northeast:"timur laut",east:"timur",southeast:"tenggara",south:"selatan",southwest:"barat daya",west:"barat",northwest:"barat laut"},modifier:{left:"kiri",right:"kanan","sharp left":"tajam kiri","sharp right":"tajam kanan","slight left":"agak ke kiri","slight right":"agak ke kanan",straight:"lurus",uturn:"putar balik"},lanes:{xo:"Tetap di kanan",ox:"Tetap di kiri",xox:"Tetap di tengah",oxo:"Tetap di kiri atau kanan"}},modes:{ferry:{default:"Naik ferry",name:"Naik ferry di {way_name}",destination:"Naik ferry menuju {destination}"}},phrase:{"two linked by distance":"{instruction_one}, then, in {distance}, {instruction_two}","two linked":"{instruction_one}, then {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Anda telah tiba di tujuan ke-{nth}",upcoming:"Anda telah tiba di tujuan ke-{nth}",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}"},left:{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},right:{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"sharp left":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},"sharp right":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"slight right":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"slight left":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},straight:{default:"Anda telah tiba di tujuan ke-{nth}, lurus saja",upcoming:"Anda telah tiba di tujuan ke-{nth}, lurus saja",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, lurus saja"}},continue:{default:{default:"Belok {modifier}",name:"Terus {modifier} ke {way_name}",destination:"Belok {modifier} menuju {destination}",exit:"Belok {modifier} ke {way_name}"},straight:{default:"Lurus terus",name:"Terus ke {way_name}",destination:"Terus menuju {destination}",distance:"Continue straight for {distance}",namedistance:"Continue on {way_name} for {distance}"},"sharp left":{default:"Belok kiri tajam",name:"Make a sharp left to stay on {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan tajam",name:"Make a sharp right to stay on {way_name}",destination:"Belok kanan tajam menuju {destination}"},"slight left":{default:"Tetap agak di kiri",name:"Tetap agak di kiri ke {way_name}",destination:"Tetap agak di kiri menuju {destination}"},"slight right":{default:"Tetap agak di kanan",name:"Tetap agak di kanan ke {way_name}",destination:"Tetap agak di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},depart:{default:{default:"Arah {direction}",name:"Arah {direction} di {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Belok {modifier}",name:"Belok {modifier} ke {way_name}",destination:"Belok {modifier} menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"},uturn:{default:"Putar balik di akhir jalan",name:"Putar balik di {way_name} di akhir jalan",destination:"Putar balik menuju {destination} di akhir jalan"}},fork:{default:{default:"Tetap {modifier} di pertigaan",name:"Tetap {modifier} di pertigaan ke {way_name}",destination:"Tetap {modifier} di pertigaan menuju {destination}"},"slight left":{default:"Tetap di kiri pada pertigaan",name:"Tetap di kiri pada pertigaan ke arah {way_name}",destination:"Tetap di kiri pada pertigaan menuju {destination}"},"slight right":{default:"Tetap di kanan pada pertigaan",name:"Tetap di kanan pada pertigaan ke arah {way_name}",destination:"Tetap di kanan pada pertigaan menuju {destination}"},"sharp left":{default:"Belok kiri pada pertigaan",name:"Belok kiri tajam ke arah {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan pada pertigaan",name:"Belok kanan tajam ke arah {way_name}",destination:"Belok kanan tajam menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},merge:{default:{default:"Bergabung {modifier}",name:"Bergabung {modifier} ke arah {way_name}",destination:"Bergabung {modifier} menuju {destination}"},straight:{default:"Bergabung lurus",name:"Bergabung lurus ke arah {way_name}",destination:"Bergabung lurus menuju {destination}"},"slight left":{default:"Bergabung di kiri",name:"Bergabung di kiri ke arah {way_name}",destination:"Bergabung di kiri menuju {destination}"},"slight right":{default:"Bergabung di kanan",name:"Bergabung di kanan ke arah {way_name}",destination:"Bergabung di kanan menuju {destination}"},"sharp left":{default:"Bergabung di kiri",name:"Bergabung di kiri ke arah {way_name}",destination:"Bergabung di kiri menuju {destination}"},"sharp right":{default:"Bergabung di kanan",name:"Bergabung di kanan ke arah {way_name}",destination:"Bergabung di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},"new name":{default:{default:"Lanjutkan {modifier}",name:"Lanjutkan {modifier} menuju {way_name}",destination:"Lanjutkan {modifier} menuju {destination}"},straight:{default:"Lurus terus",name:"Terus ke {way_name}",destination:"Terus menuju {destination}"},"sharp left":{default:"Belok kiri tajam",name:"Belok kiri tajam ke arah {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan tajam",name:"Belok kanan tajam ke arah {way_name}",destination:"Belok kanan tajam menuju {destination}"},"slight left":{default:"Lanjut dengan agak ke kiri",name:"Lanjut dengan agak di kiri ke {way_name}",destination:"Tetap agak di kiri menuju {destination}"},"slight right":{default:"Tetap agak di kanan",name:"Tetap agak di kanan ke {way_name}",destination:"Tetap agak di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},notification:{default:{default:"Lanjutkan {modifier}",name:"Lanjutkan {modifier} menuju {way_name}",destination:"Lanjutkan {modifier} menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},"off ramp":{default:{default:"Ambil jalan melandai",name:"Ambil jalan melandai ke {way_name}",destination:"Ambil jalan melandai menuju {destination}",exit:"Take exit {exit}",exit_destination:"Take exit {exit} towards {destination}"},left:{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},right:{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"sharp left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"sharp right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"slight left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"slight right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"}},"on ramp":{default:{default:"Ambil jalan melandai",name:"Ambil jalan melandai ke {way_name}",destination:"Ambil jalan melandai menuju {destination}"},left:{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},right:{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"},"sharp left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},"sharp right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"},"slight left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},"slight right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"}},rotary:{default:{default:{default:"Masuk bundaran",name:"Masuk bundaran dan keluar arah {way_name}",destination:"Masuk bundaran dan keluar menuju {destination}"},name:{default:"Masuk {rotary_name}",name:"Masuk {rotary_name} dan keluar arah {way_name}",destination:"Masuk {rotary_name} dan keluar menuju {destination}"},exit:{default:"Masuk bundaran dan ambil jalan keluar {exit_number}",name:"Masuk bundaran dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk bundaran dan ambil jalan keluar {exit_number} menuju {destination}"},name_exit:{default:"Masuk {rotary_name} dan ambil jalan keluar {exit_number}",name:"Masuk {rotary_name} dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk {rotary_name} dan ambil jalan keluar {exit_number} menuju {destination}"}}},roundabout:{default:{exit:{default:"Masuk bundaran dan ambil jalan keluar {exit_number}",name:"Masuk bundaran dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk bundaran dan ambil jalan keluar {exit_number} menuju {destination}"},default:{default:"Masuk bundaran",name:"Masuk bundaran dan keluar arah {way_name}",destination:"Masuk bundaran dan keluar menuju {destination}"}}},"roundabout turn":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"}},"exit roundabout":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"}},"exit rotary":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus",name:"Lurus arah {way_name}",destination:"Lurus menuju {destination}"}},turn:{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus",name:"Lurus arah {way_name}",destination:"Lurus menuju {destination}"}},"use lane":{no_lanes:{default:"Lurus terus"},default:{default:"{lane_instruction}"}}}}},{}],33:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"nord",northeast:"nord-est",east:"est",southeast:"sud-est",south:"sud",southwest:"sud-ovest",west:"ovest",northwest:"nord-ovest"},modifier:{left:"sinistra",right:"destra","sharp left":"sinistra","sharp right":"destra","slight left":"sinistra leggermente","slight right":"destra leggermente",straight:"dritto",uturn:"inversione a U"},lanes:{xo:"Mantieni la destra",ox:"Mantieni la sinistra",xox:"Rimani in mezzo",oxo:"Mantieni la destra o la sinistra"}},modes:{ferry:{default:"Prendi il traghetto",name:"Prendi il traghetto {way_name}",destination:"Prendi il traghetto verso {destination}"}},phrase:{"two linked by distance":"{instruction_one}, poi tra {distance},{instruction_two}","two linked":"{instruction_one}, poi {instruction_two}","one in distance":"tra {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Sei arrivato alla tua {nth} destinazione",upcoming:"Sei arrivato alla tua {nth} destinazione",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"Sei arrivato a {waypoint_name}"},left:{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},right:{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"sharp left":{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},"sharp right":{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"slight right":{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"slight left":{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},straight:{default:"sei arrivato alla tua {nth} destinazione, si trova davanti a te",upcoming:"sei arrivato alla tua {nth} destinazione, si trova davanti a te",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, si trova davanti a te"}},continue:{default:{default:"Gira a {modifier}",name:"Gira a {modifier} per stare su {way_name}",destination:"Gira a {modifier} verso {destination}",exit:"Gira a {modifier} in {way_name}"},straight:{default:"Continua dritto",name:"Continua dritto per stare su {way_name}",destination:"Continua verso {destination}",distance:"Continua dritto per {distance}",namedistance:"Continua su {way_name} per {distance}"},"sharp left":{default:"Svolta a sinistra",name:"Fai una stretta curva a sinistra per stare su {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra",name:"Fau una stretta curva a destra per stare su {way_name}",destination:"Svolta a destra verso {destination}"},"slight left":{default:"Fai una leggera curva a sinistra",name:"Fai una leggera curva a sinistra per stare su {way_name}",destination:"Fai una leggera curva a sinistra verso {destination}"},"slight right":{default:"Fai una leggera curva a destra",name:"Fai una leggera curva a destra per stare su {way_name}",destination:"Fai una leggera curva a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione ad U poi continua su {way_name}",destination:"Fai un'inversione a U verso {destination}"}},depart:{default:{default:"Continua verso {direction}",name:"Continua verso {direction} in {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Gira a {modifier}",name:"Gira a {modifier} in {way_name}",destination:"Gira a {modifier} verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"},uturn:{default:"Fai un'inversione a U alla fine della strada",name:"Fai un'inversione a U in {way_name} alla fine della strada",destination:"Fai un'inversione a U verso {destination} alla fine della strada"}},fork:{default:{default:"Mantieni la {modifier} al bivio",name:"Mantieni la {modifier} al bivio in {way_name}",destination:"Mantieni la {modifier} al bivio verso {destination}"},"slight left":{default:"Mantieni la sinistra al bivio",name:"Mantieni la sinistra al bivio in {way_name}",destination:"Mantieni la sinistra al bivio verso {destination}"},"slight right":{default:"Mantieni la destra al bivio",name:"Mantieni la destra al bivio in {way_name}",destination:"Mantieni la destra al bivio verso {destination}"},"sharp left":{default:"Svolta a sinistra al bivio",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra al bivio",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},merge:{default:{default:"Immettiti a {modifier}",name:"Immettiti {modifier} in {way_name}",destination:"Immettiti {modifier} verso {destination}"},straight:{default:"Immettiti a dritto",name:"Immettiti dritto in {way_name}",destination:"Immettiti dritto verso {destination}"},"slight left":{default:"Immettiti a sinistra",name:"Immettiti a sinistra in {way_name}",destination:"Immettiti a sinistra verso {destination}"},"slight right":{default:"Immettiti a destra",name:"Immettiti a destra in {way_name}",destination:"Immettiti a destra verso {destination}"},"sharp left":{default:"Immettiti a sinistra",name:"Immettiti a sinistra in {way_name}",destination:"Immettiti a sinistra verso {destination}"},"sharp right":{default:"Immettiti a destra",name:"Immettiti a destra in {way_name}",destination:"Immettiti a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},"new name":{default:{default:"Continua a {modifier}",name:"Continua a {modifier} in {way_name}",destination:"Continua a {modifier} verso {destination}"},straight:{default:"Continua dritto",name:"Continua in {way_name}",destination:"Continua verso {destination}"},"sharp left":{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},"slight left":{default:"Continua leggermente a sinistra",name:"Continua leggermente a sinistra in {way_name}",destination:"Continua leggermente a sinistra verso {destination}"},"slight right":{default:"Continua leggermente a destra",name:"Continua leggermente a destra in {way_name} ",destination:"Continua leggermente a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},notification:{default:{default:"Continua a {modifier}",name:"Continua a {modifier} in {way_name}",destination:"Continua a {modifier} verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},"off ramp":{default:{default:"Prendi la rampa",name:"Prendi la rampa in {way_name}",destination:"Prendi la rampa verso {destination}",exit:"Prendi l'uscita {exit}",exit_destination:"Prendi l'uscita  {exit} verso {destination}"},left:{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},right:{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"},"sharp left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},"sharp right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"},"slight left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},"slight right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"}},"on ramp":{default:{default:"Prendi la rampa",name:"Prendi la rampa in {way_name}",destination:"Prendi la rampa verso {destination}"},left:{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},right:{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"},"sharp left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},"sharp right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"},"slight left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},"slight right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"}},rotary:{default:{default:{default:"Immettiti nella rotonda",name:"Immettiti nella ritonda ed esci in {way_name}",destination:"Immettiti nella ritonda ed esci verso {destination}"},name:{default:"Immettiti in {rotary_name}",name:"Immettiti in {rotary_name} ed esci su {way_name}",destination:"Immettiti in {rotary_name} ed esci verso {destination}"},exit:{default:"Immettiti nella rotonda e prendi la {exit_number} uscita",name:"Immettiti nella rotonda e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti nella rotonda e prendi la {exit_number} uscita verso   {destination}"},name_exit:{default:"Immettiti in {rotary_name} e prendi la {exit_number} uscita",name:"Immettiti in {rotary_name} e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti in {rotary_name} e prendi la {exit_number}  uscita verso {destination}"}}},roundabout:{default:{exit:{default:"Immettiti nella rotonda e prendi la {exit_number} uscita",name:"Immettiti nella rotonda e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti nella rotonda e prendi la {exit_number} uscita verso {destination}"},default:{default:"Entra nella rotonda",name:"Entra nella rotonda e prendi l'uscita in {way_name}",destination:"Entra nella rotonda e prendi l'uscita verso {destination}"}}},"roundabout turn":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"}},"exit roundabout":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"}},"exit rotary":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Prosegui dritto",name:"Continua su {way_name}",destination:"Continua verso {destination}"}},turn:{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Prosegui dritto",name:"Continua su {way_name}",destination:"Continua verso {destination}"}},"use lane":{no_lanes:{default:"Continua dritto"},default:{default:"{lane_instruction}"}}}}},{}],34:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:""},lanes:{xo:" ",ox:" ",xox:"",oxo:"    "}},modes:{ferry:{default:" ",name:"  {way_name}",destination:"  {destination} ."}},phrase:{"two linked by distance":"{instruction_one}, , {distance} , {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":"{distance} , {instruction_one}","name and ref":"{name} ({ref})","exit with number":"{exit} ."},arrive:{default:{default:" {nth} .",upcoming:"{nth}   .",short:"","short-upcoming":" .",named:" {waypoint_name} ."},left:{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},right:{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"sharp left":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"sharp right":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"slight right":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"slight left":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},straight:{default:"  {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."}},continue:{default:{default:"{modifier} ",name:"{modifier}  {way_name}  .",destination:"{modifier}  {destination} .",exit:"{way_name}  {modifier}  ."},straight:{default:"  .",name:"{way_name}    .",destination:"{destination}  .",distance:"{distance}  .",namedistance:"{distance} {way_name} ."},"sharp left":{default:" .",name:"   {way_name} .",destination:"   {destination} ."},"sharp right":{default:" .",name:"  {way_name} .",destination:"   {destination} ."},"slight left":{default:" .",name:"   {way_name} .",destination:"    {destination} ."},"slight right":{default:" .",name:"   {way_name} .",destination:"    {destination} ."},uturn:{default:" ",name:" {way_name} .",destination:"  {destination} ."}},depart:{default:{default:"{direction} ",name:"{direction}   {way_name}  . ",namedistance:"{direction} {way_name}  {distance} ."}},"end of road":{default:{default:"{modifier} .",name:"{modifier} {way_name} .",destination:"{modifier}   {destination} ."},straight:{default:"  .",name:"{way_name}   .",destination:"{destination}  ."},uturn:{default:"    .",name:"    {way_name} .",destination:"    {destination}  ."}},fork:{default:{default:" {modifier}  .",name:"{modifier} {way_name} .",destination:"{modifier} {destination} ."},"slight left":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"slight right":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"sharp left":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"sharp right":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},merge:{default:{default:"{modifier} ",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},straight:{default:"",name:"{way_name} .",destination:"{destination} ."},"slight left":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"slight right":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"sharp left":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"sharp right":{default:" .",name:"{way_name} .",destination:"  {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},"new name":{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},straight:{default:".",name:"{way_name}  .",destination:"{destination}  ."},"sharp left":{default:" .",name:"  {way_name} .",destination:"  {destination} ."},"sharp right":{default:" .",name:"  {way_name} .",destination:"  {destination} ."},"slight left":{default:"  .",name:"  {way_name} .",destination:"   {destination} ."},"slight right":{default:"  .",name:"  {way_name} .",destination:"   {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},notification:{default:{default:"{modifier} .",name:"{modifier} {way_name} .",destination:"{modifier} {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},"off ramp":{default:{default:"  ..",name:"  {way_name} .",destination:"  {destination} .",exit:"{exit}  .",exit_destination:"{exit}   {destination} ."},left:{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},right:{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"sharp left":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"sharp right":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"slight left":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"slight right":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."}},"on ramp":{default:{default:"  ..",name:"  {way_name} .",destination:"  {destination} ."},left:{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},right:{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"sharp left":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"sharp right":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"slight left":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"slight right":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."}},rotary:{default:{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},name:{default:"{rotary_name} .",name:"{rotary_name}  {way_name} .",destination:"{rotary_name}  {destination} ."},exit:{default:"  {exit_number}  .",name:"  {exit_number}   {way_name} .",destination:"  {exit_number}   {destination} ."},name_exit:{default:"{rotary_name}  {exit_number}  .",name:"{rotary_name}  {exit_number}   {way_name} .",destination:"{rotary_name}  {exit_number}   {destination} ."}}},roundabout:{default:{exit:{default:"  {exit_number} .",name:"  {exit_number}  {way_name} .",destination:"  {exit_number}  {destination} ."},default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}}},"roundabout turn":{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},left:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},right:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},straight:{default:" .",name:" {way_name} .",destination:" {destination} ."}},"exit roundabout":{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}},"exit rotary":{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}},turn:{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},left:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},right:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},straight:{default:" .",name:" {way_name} .",destination:" {destination} ."}},"use lane":{no_lanes:{default:"."},default:{default:"{lane_instruction}"}}}}},{}],35:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:"-"},lanes:{xo:"",ox:"",xox:"",oxo:"   "}},modes:{ferry:{default:" ",name:"{way_name} ",destination:"{destination} "}},phrase:{"two linked by distance":"{instruction_one} {distance} {instruction_two}","two linked":"{instruction_one} {instruction_two}","one in distance":"{distance} {instruction_one}","name and ref":"{name}( {ref})","exit with number":"{exit}"},arrive:{default:{default:"{nth}  ",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},left:{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},right:{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"sharp left":{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},"sharp right":{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"slight right":{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"slight left":{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},straight:{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "}},continue:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} ",exit:"{way_name} {modifier}"},straight:{default:" ",name:"{way_name}",destination:"{destination}",distance:"{distance}  ",namedistance:"{way_name}{distance}"},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight left":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight right":{default:" ",name:"{way_name} ",destination:"{destination} "},uturn:{default:"- ",name:"{way_name} -",destination:"{destination} "}},depart:{default:{default:"{direction} ",name:"{direction} {way_name} ",namedistance:"{direction} {way_name}{distance} "}},"end of road":{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"},uturn:{default:" -",name:" {way_name}-",destination:"{destination} "}},fork:{default:{default:" {modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},"slight left":{default:"",name:"{way_name}",destination:"{destination} "},"slight right":{default:"",name:"{way_name}",destination:"{destination} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} "},uturn:{default:"- ",name:"{way_name}-",destination:"{destination} "}},merge:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:"",name:"{way_name}",destination:"{destination} "},"slight left":{default:"",name:"{way_name}",destination:"{destination} "},"slight right":{default:"",name:"{way_name}",destination:"{destination} "},"sharp left":{default:"",name:"{way_name}",destination:"{destination} "},"sharp right":{default:"",name:"{way_name}",destination:"{destination} "},uturn:{default:"- ",name:"{way_name} -  ",destination:"{destination} "}},"new name":{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight left":{default:" ",name:"{way_name} ",destination:"{destination}"},"slight right":{default:" ",name:"{way_name} ",destination:"{destination}"},uturn:{default:"- ",name:"{way_name} - ",destination:"{destination} "}},notification:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},uturn:{default:"- ",name:"{way_name} - ",destination:"{destination} "}},"off ramp":{default:{default:"",name:"{way_name}",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},left:{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},right:{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"slight left":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"slight right":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "}},"on ramp":{default:{default:"",name:"{way_name}",destination:"{destination} "},left:{default:"",name:"{way_name} ",destination:"{destination} "},right:{default:"",name:"{way_name} ",destination:"{destination} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} "},"slight left":{default:"",name:"{way_name} ",destination:"{destination} "},"slight right":{default:"",name:"{way_name} ",destination:"{destination} "}},rotary:{default:{default:{default:"",name:"{way_name}",destination:"{destination}"},name:{default:"{rotary_name}",name:"{rotary_name}{way_name}",destination:"{rotary_name}{destination}"},exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},name_exit:{default:"{rotary_name} {exit_number}",name:"{rotary_name}{exit_number}{way_name}",destination:"{rotary_name}{exit_number}{destination}"}}},roundabout:{default:{exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},default:{default:"",name:"{way_name}",destination:"{destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination} "},left:{default:"",name:"{way_name}",destination:"{destination} "},right:{default:"",name:"{way_name}",destination:"{destination} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"}},"exit roundabout":{default:{default:"",name:"{way_name}",destination:"{destination}"}},"exit rotary":{default:{default:"",name:"{way_name}",destination:"{destination}"}},turn:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination} "},left:{default:"",name:"{way_name}",destination:"{destination} "},right:{default:"",name:"{way_name}",destination:"{destination} "},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"use lane":{no_lanes:{default:" "},default:{default:"{lane_instruction}"}}}}},{}],36:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1e",2:"2e",3:"3e",4:"4e",5:"5e",6:"6e",7:"7e",8:"8e",9:"9e",10:"10e"},direction:{north:"noord",northeast:"noordoost",east:"oost",southeast:"zuidoost",south:"zuid",southwest:"zuidwest",west:"west",northwest:"noordwest"},modifier:{left:"links",right:"rechts","sharp left":"scherpe bocht naar links","sharp right":"scherpe bocht naar rechts","slight left":"iets naar links","slight right":"iets naar rechts",straight:"rechtdoor",uturn:"omkeren"},lanes:{xo:"Rechts aanhouden",ox:"Links aanhouden",xox:"In het midden blijven",oxo:"Links of rechts blijven"}},modes:{ferry:{default:"Neem de veerpont",name:"Neem de veerpont {way_name}",destination:"Neem de veerpont richting {destination}"}},phrase:{"two linked by distance":"{instruction_one}, dan na {distance}, {instruction_two}","two linked":"{instruction_one}, daarna {instruction_two}","one in distance":"Over {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"afslag {exit}"},arrive:{default:{default:"Je bent gearriveerd op de {nth} bestemming.",upcoming:"U arriveert op de {nth} bestemming",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}"},left:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de linkerkant"},right:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de  rechterkant"},"sharp left":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de linkerkant"},"sharp right":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de rechterkant"},"slight right":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de rechterkant"},"slight left":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de linkerkant"},straight:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich voor je.",upcoming:"Uw {nth} bestemming is recht voor u",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is recht voor u"}},continue:{default:{default:"Ga {modifier}",name:"Sla {modifier} om op {way_name} te blijven",destination:"Ga {modifier} richting {destination}",exit:"Ga {modifier} naar {way_name}"},straight:{default:"Ga rechtdoor",name:"Blijf rechtdoor gaan op {way_name}",destination:"Ga rechtdoor richting {destination}",distance:"Ga rechtdoor voor {distance}",namedistance:"Ga verder op {way_name} voor {distance}"},"sharp left":{default:"Linksaf",name:"Sla scherp links af om op {way_name} te blijven",destination:"Linksaf richting {destination}"},"sharp right":{default:"Rechtsaf",name:"Sla scherp rechts af om op {way_name} te blijven",destination:"Rechtsaf richting {destination}"},"slight left":{default:"Ga links",name:"Links afbuigen om op {way_name} te blijven",destination:"Rechts afbuigen om op {destination} te blijven"},"slight right":{default:"Rechts afbuigen",name:"Rechts afbuigen om op {way_name} te blijven",destination:"Rechts afbuigen richting {destination}"},uturn:{default:"Keer om",name:"Draai om en ga verder op {way_name}",destination:"Keer om richting {destination}"}},depart:{default:{default:"Vertrek in {direction}elijke richting",name:"Neem {way_name} in {direction}elijke richting",namedistance:"Ga richting {direction} op {way_name} voor {distance}"}},"end of road":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga naar {way_name}",destination:"Ga richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},fork:{default:{default:"Ga {modifier} op de splitsing",name:"Houd {modifier} aan, tot {way_name}",destination:"Houd {modifier}, in de richting van {destination}"},"slight left":{default:"Links aanhouden op de splitsing",name:"Houd links aan, tot {way_name}",destination:"Houd links aan, richting {destination}"},"slight right":{default:"Rechts aanhouden op de splitsing",name:"Houd rechts aan, tot {way_name}",destination:"Houd rechts aan, richting {destination}"},"sharp left":{default:"Neem bij de splitsing, een scherpe bocht, naar links ",name:"Neem een scherpe bocht naar links, tot aan {way_name}",destination:"Neem een scherpe bocht naar links, richting {destination}"},"sharp right":{default:"Neem  op de splitsing, een scherpe bocht, naar rechts",name:"Neem een scherpe bocht naar rechts, tot aan {way_name}",destination:"Neem een scherpe bocht naar rechts, richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},merge:{default:{default:"Bij de splitsing {modifier}",name:"Bij de splitsing {modifier} naar {way_name}",destination:"Bij de splitsing {modifier} richting {destination}"},straight:{default:"Samenvoegen",name:"Ga verder op {way_name}",destination:"Ga verder richting {destination}"},"slight left":{default:"Bij de splitsing links aanhouden",name:"Bij de splitsing links aanhouden naar {way_name}",destination:"Bij de splitsing links aanhouden richting {destination}"},"slight right":{default:"Bij de splitsing rechts aanhouden",name:"Bij de splitsing rechts aanhouden naar {way_name}",destination:"Bij de splitsing rechts aanhouden richting {destination}"},"sharp left":{default:"Bij de splitsing linksaf",name:"Bij de splitsing linksaf naar {way_name}",destination:"Bij de splitsing linksaf richting {destination}"},"sharp right":{default:"Bij de splitsing rechtsaf",name:"Bij de splitsing rechtsaf naar {way_name}",destination:"Bij de splitsing rechtsaf richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},"new name":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga rechtdoor naar {way_name}",destination:"Ga rechtdoor richting {destination}"},"sharp left":{default:"Neem een scherpe bocht, naar links",name:"Linksaf naar {way_name}",destination:"Linksaf richting {destination}"},"sharp right":{default:"Neem een scherpe bocht, naar rechts",name:"Rechtsaf naar {way_name}",destination:"Rechtsaf richting {destination}"},"slight left":{default:"Links aanhouden",name:"Links aanhouden naar {way_name}",destination:"Links aanhouden richting {destination}"},"slight right":{default:"Rechts aanhouden",name:"Rechts aanhouden naar {way_name}",destination:"Rechts aanhouden richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},notification:{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},"off ramp":{default:{default:"Neem de afrit",name:"Neem de afrit naar {way_name}",destination:"Neem de afrit richting {destination}",exit:"Neem afslag {exit}",exit_destination:"Neem afslag {exit} richting {destination}"},left:{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},right:{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"},"sharp left":{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},"sharp right":{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"},"slight left":{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},"slight right":{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"}},"on ramp":{default:{default:"Neem de oprit",name:"Neem de oprit naar {way_name}",destination:"Neem de oprit richting {destination}"},left:{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},right:{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"},"sharp left":{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},"sharp right":{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"},"slight left":{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},"slight right":{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"}},rotary:{default:{default:{default:"Betreedt de rotonde",name:"Betreedt rotonde en sla af op {way_name}",destination:"Betreedt rotonde en sla af richting {destination}"},name:{default:"Ga het knooppunt {rotary_name} op",name:"Verlaat het knooppunt {rotary_name} naar {way_name}",destination:"Verlaat het knooppunt {rotary_name} richting {destination}"},exit:{default:"Betreedt rotonde en neem afslag {exit_number}",name:"Betreedt rotonde en neem afslag {exit_number} naar {way_name}",destination:"Betreedt rotonde en neem afslag {exit_number} richting {destination}"},name_exit:{default:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number}",name:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number} naar {way_name}",destination:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number} richting {destination}"}}},roundabout:{default:{exit:{default:"Betreedt rotonde en neem afslag {exit_number}",name:"Betreedt rotonde en neem afslag {exit_number} naar {way_name}",destination:"Betreedt rotonde en neem afslag {exit_number} richting {destination}"},default:{default:"Betreedt de rotonde",name:"Betreedt rotonde en sla af op {way_name}",destination:"Betreedt rotonde en sla af richting {destination}"}}},"roundabout turn":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},left:{default:"Ga linksaf",name:"Ga linksaf naar {way_name}",destination:"Ga linksaf richting {destination}"},right:{default:"Ga rechtsaf",name:"Ga rechtsaf naar {way_name}",destination:"Ga rechtsaf richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga naar {way_name}",destination:"Ga richting {destination}"}},"exit roundabout":{default:{default:"Verlaat de rotonde",name:"Verlaat de rotonde en ga verder op {way_name}",destination:"Verlaat de rotonde richting {destination}"}},"exit rotary":{default:{default:"Verlaat de rotonde",name:"Verlaat de rotonde en ga verder op {way_name}",destination:"Verlaat de rotonde richting {destination}"}},turn:{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},left:{default:"Ga linksaf",name:"Ga linksaf naar {way_name}",destination:"Ga linksaf richting {destination}"},right:{default:"Ga rechtsaf",name:"Ga rechtsaf naar {way_name}",destination:"Ga rechtsaf richting {destination}"},straight:{default:"Ga rechtdoor",name:"Ga rechtdoor naar {way_name}",destination:"Ga rechtdoor richting {destination}"}},"use lane":{no_lanes:{default:"Rechtdoor"},default:{default:"{lane_instruction}"}}}}},{}],37:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"nord",northeast:"nordst",east:"st",southeast:"srst",south:"sr",southwest:"srvest",west:"vest",northwest:"nordvest"},modifier:{left:"venstre",right:"hyre","sharp left":"skarp venstre","sharp right":"skarp hyre","slight left":"litt til venstre","slight right":"litt til hyre",straight:"rett frem",uturn:"U-sving"},lanes:{xo:"Hold til hyre",ox:"Hold til venstre",xox:"Hold deg i midten",oxo:"Hold til venstre eller hyre"}},modes:{ferry:{default:"Ta ferja",name:"Ta ferja {way_name}",destination:"Ta ferja til {destination}"}},phrase:{"two linked by distance":"{instruction_one}, deretter {instruction_two} om {distance}","two linked":"{instruction_one}, deretter {instruction_two}","one in distance":"Om {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"avkjrsel {exit}"},arrive:{default:{default:"Du har ankommet din {nth} destinasjon",upcoming:"Du vil ankomme din {nth} destinasjon",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}"},left:{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},right:{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"sharp left":{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},"sharp right":{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"slight right":{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"slight left":{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},straight:{default:"Du har ankommet din {nth} destinasjon, rett forut",upcoming:"Du vil ankomme din {nth} destinasjon, rett forut",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, rett forut"}},continue:{default:{default:"Ta til {modifier}",name:"Ta til {modifier} for  bli vrende p {way_name}",destination:"Ta til {modifier} mot {destination}",exit:"Ta til {modifier} inn p {way_name}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem for  bli vrende p {way_name}",destination:"Fortsett mot {destination}",distance:"Fortsett rett frem, {distance} ",namedistance:"Fortsett p {way_name}, {distance}"},"sharp left":{default:"Sving skarpt til venstre",name:"Sving skarpt til venstre for  bli vrende p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre",name:"Sving skarpt til hyre for  bli vrende p {way_name}",destination:"Sving skarpt mot {destination}"},"slight left":{default:"Sving svakt til venstre",name:"Sving svakt til venstre for  bli vrende p {way_name}",destination:"Sving svakt til venstre mot {destination}"},"slight right":{default:"Sving svakt til hyre",name:"Sving svakt til hyre for  bli vrende p {way_name}",destination:"Sving svakt til hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving og fortsett p {way_name}",destination:"Ta en U-sving mot {destination}"}},depart:{default:{default:"Kjr i retning {direction}",name:"Kjr i retning {direction} p {way_name}",namedistance:"Kjr i retning {direction} p {way_name}, {distance}"}},"end of road":{default:{default:"Sving {modifier}",name:"Ta til {modifier} inn p {way_name}",destination:"Sving {modifier} mot {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem til  {way_name}",destination:"Fortsett rett frem mot {destination}"},uturn:{default:"Ta en U-sving i enden av veien",name:"Ta en U-sving til {way_name} i enden av veien",destination:"Ta en U-sving mot {destination} i enden av veien"}},fork:{default:{default:"Hold til {modifier} i veikrysset",name:"Hold til {modifier} inn p {way_name}",destination:"Hold til {modifier} mot {destination}"},"slight left":{default:"Hold til venstre i veikrysset",name:"Hold til venstre inn p {way_name}",destination:"Hold til venstre mot {destination}"},"slight right":{default:"Hold til hyre i veikrysset",name:"Hold til hyre inn p {way_name}",destination:"Hold til hyre mot {destination}"},"sharp left":{default:"Sving skarpt til venstre i veikrysset",name:"Sving skarpt til venstre inn p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre i veikrysset",name:"Sving skarpt til hyre inn p {way_name}",destination:"Svings skarpt til hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},merge:{default:{default:"Hold {modifier} kjrefelt",name:"Hold {modifier} kjrefelt inn p {way_name}",destination:"Hold {modifier} kjrefelt mot {destination}"},straight:{default:"Hold kjrefelt",name:"Hold kjrefelt inn p {way_name}",destination:"Hold kjrefelt mot {destination}"},"slight left":{default:"Hold venstre kjrefelt",name:"Hold venstre kjrefelt inn p {way_name}",destination:"Hold venstre kjrefelt mot {destination}"},"slight right":{default:"Hold hyre kjrefelt",name:"Hold hyre kjrefelt inn p {way_name}",destination:"Hold hyre kjrefelt mot {destination}"},"sharp left":{default:"Hold venstre kjrefelt",name:"Hold venstre kjrefelt inn p {way_name}",destination:"Hold venstre kjrefelt mot {destination}"},"sharp right":{default:"Hold hyre kjrefelt",name:"Hold hyre kjrefelt inn p {way_name}",destination:"Hold hyre kjrefelt mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},"new name":{default:{default:"Fortsett {modifier}",name:"Fortsett {modifier} til {way_name}",destination:"Fortsett {modifier} mot  {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett inn p {way_name}",destination:"Fortsett mot {destination}"},"sharp left":{default:"Sving skarpt til venstre",name:"Sving skarpt til venstre inn p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre",name:"Sving skarpt til hyre inn p {way_name}",destination:"Svings skarpt til hyre mot {destination}"},"slight left":{default:"Fortsett litt mot venstre",name:"Fortsett litt mot venstre til {way_name}",destination:"Fortsett litt mot venstre mot {destination}"},"slight right":{default:"Fortsett litt mot hyre",name:"Fortsett litt mot hyre til {way_name}",destination:"Fortsett litt mot hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},notification:{default:{default:"Fortsett {modifier}",name:"Fortsett {modifier} til {way_name}",destination:"Fortsett {modifier} mot  {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},"off ramp":{default:{default:"Ta avkjrselen",name:"Ta avkjrselen inn p {way_name}",destination:"Ta avkjrselen mot {destination}",exit:"Ta avkjrsel {exit}",exit_destination:"Ta avkjrsel {exit} mot {destination}"},left:{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},right:{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"},"sharp left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},"sharp right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"},"slight left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},"slight right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"}},"on ramp":{default:{default:"Ta avkjrselen",name:"Ta avkjrselen inn p {way_name}",destination:"Ta avkjrselen mot {destination}"},left:{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},right:{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"},"sharp left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},"sharp right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"},"slight left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},"slight right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"}},rotary:{default:{default:{default:"Kjr inn i rundkjringen",name:"Kjr inn i rundkjringen og deretter ut p {way_name}",destination:"Kjr inn i rundkjringen og deretter ut mot {destination}"},name:{default:"Kjr inn i {rotary_name}",name:"Kjr inn i {rotary_name} og deretter ut p {way_name}",destination:"Kjr inn i {rotary_name} og deretter ut mot {destination}"},exit:{default:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel",name:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut p {way_name}",destination:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut mot {destination} "},name_exit:{default:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel",name:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel inn p {way_name}",destination:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel mot {destination}"}}},roundabout:{default:{exit:{default:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel",name:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel inn p {way_name}",destination:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut mot {destination} "},default:{default:"Kjr inn i rundkjringen",name:"Kjr inn i rundkjringen og deretter ut p {way_name}",destination:"Kjr inn i rundkjringen og deretter ut mot {destination}"}}},"roundabout turn":{default:{default:"Ta en {modifier}",name:"Ta en {modifier} inn p {way_name}",destination:"Ta en {modifier} mot {destination}"},left:{default:"Sving til venstre",name:"Sving til venstre inn p {way_name}",destination:"Sving til venstre mot {destination}"},right:{default:"Sving til hyre",name:"Sving til hyre inn p {way_name}",destination:"Sving til hyre mot {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem til  {way_name}",destination:"Fortsett rett frem mot {destination}"}},"exit roundabout":{default:{default:"Kjr ut av rundkjringen",name:"Kjr ut av rundkjringen og inn p {way_name}",destination:"Kjr ut av rundkjringen mot {destination}"}},"exit rotary":{default:{default:"Kjr ut av rundkjringen",name:"Kjr ut av rundkjringen og inn p {way_name}",destination:"Kjr ut av rundkjringen mot {destination}"}},turn:{default:{default:"Ta en {modifier}",name:"Ta en {modifier} inn p {way_name}",destination:"Ta en {modifier} mot {destination}"},left:{default:"Sving til venstre",name:"Sving til venstre inn p {way_name}",destination:"Sving til venstre mot {destination}"},right:{default:"Sving til hyre",name:"Sving til hyre inn p {way_name}",destination:"Sving til hyre mot {destination}"},straight:{default:"Kjr rett frem",name:"Kjr rett frem og inn p {way_name}",destination:"Kjr rett frem mot {destination}"}},"use lane":{no_lanes:{default:"Fortsett rett frem"},default:{default:"{lane_instruction}"}}}}},{}],38:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"pnoc",northeast:"pnocny wschd",east:"wschd",southeast:"poudniowy wschd",south:"poudnie",southwest:"poudniowy zachd",west:"zachd",northwest:"pnocny zachd"},modifier:{left:"lewo",right:"prawo","sharp left":"ostro w lewo","sharp right":"ostro w prawo","slight left":"agodnie w lewo","slight right":"agodnie w prawo",straight:"prosto",uturn:"zawr"},lanes:{xo:"Trzymaj si prawej strony",ox:"Trzymaj si lewej strony",xox:"Trzymaj si rodka",oxo:"Trzymaj si lewej lub prawej strony"}},modes:{ferry:{default:"We prom",name:"We prom {way_name}",destination:"We prom w kierunku {destination}"}},phrase:{"two linked by distance":"{instruction_one}, nastpnie za {distance} {instruction_two}","two linked":"{instruction_one}, nastpnie {instruction_two}","one in distance":"Za {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Dojechano do miejsca docelowego {nth}",upcoming:"Dojechano do miejsca docelowego {nth}",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}"},left:{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},right:{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"sharp left":{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},"sharp right":{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"slight right":{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"slight left":{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},straight:{default:"Dojechano do miejsca docelowego {nth} , prosto",upcoming:"Dojechano do miejsca docelowego {nth} , prosto",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, prosto"}},continue:{default:{default:"Skr {modifier}",name:"Skr w {modifier}, aby pozosta na {way_name}",destination:"Skr {modifier} w kierunku {destination}",exit:"Skr {modifier} na {way_name}"},straight:{default:"Kontynuuj prosto",name:"Jed dalej prosto, aby pozosta na {way_name}",destination:"Kontynuuj w kierunku {destination}",distance:"Jed dalej prosto przez {distance}",namedistance:"Jed dalej {way_name} przez {distance}"},"sharp left":{default:"Skr ostro w lewo",name:"Skr w lewo w ostry zakrt, aby pozosta na {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Skr ostro w prawo",name:"Skr w prawo w ostry zakrt, aby pozosta na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},"slight left":{default:"Skr w lewo w agodny zakrt",name:"Skr w lewo w agodny zakrt, aby pozosta na {way_name}",destination:"Skr w lewo w agodny zakrt na {destination}"},"slight right":{default:"Skr w prawo w agodny zakrt",name:"Skr w prawo w agodny zakrt, aby pozosta na {way_name}",destination:"Skr w prawo w agodny zakrt na {destination}"},uturn:{default:"Zawr",name:"Zawr i jed dalej {way_name}",destination:"Zawr w kierunku {destination}"}},depart:{default:{default:"Kieruj si {direction}",name:"Kieruj si {direction} na {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Skr {modifier}",name:"Skr {modifier} na {way_name}",destination:"Skr {modifier} w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"},uturn:{default:"Zawr na kocu ulicy",name:"Zawr na kocu ulicy na {way_name}",destination:"Zawr na kocu ulicy w kierunku {destination}"}},fork:{default:{default:"Na rozwidleniu trzymaj si {modifier}",name:"Na rozwidleniu trzymaj si {modifier} na {way_name}",destination:"Na rozwidleniu trzymaj si {modifier} w kierunku {destination}"},"slight left":{default:"Na rozwidleniu trzymaj si lewej strony",name:"Na rozwidleniu trzymaj si lewej strony w {way_name}",destination:"Na rozwidleniu trzymaj si lewej strony w kierunku {destination}"},"slight right":{default:"Na rozwidleniu trzymaj si prawej strony",name:"Na rozwidleniu trzymaj si prawej strony na {way_name}",destination:"Na rozwidleniu trzymaj si prawej strony w kierunku {destination}"},"sharp left":{default:"Na rozwidleniu skr ostro w lewo",name:"Skr ostro w lewo w {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Na rozwidleniu skr ostro w prawo",name:"Skr ostro w prawo na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},merge:{default:{default:"Wcz si {modifier}",name:"Wcz si {modifier} na {way_name}",destination:"Wcz si {modifier} w kierunku {destination}"},straight:{default:"Wcz si prosto",name:"Wcz si prosto na {way_name}",destination:"Wcz si prosto w kierunku {destination}"},"slight left":{default:"Wcz si z lewej strony",name:"Wcz si z lewej strony na {way_name}",destination:"Wcz si z lewej strony w kierunku {destination}"},"slight right":{default:"Wcz si z prawej strony",name:"Wcz si z prawej strony na {way_name}",destination:"Wcz si z prawej strony w kierunku {destination}"},"sharp left":{default:"Wcz si z lewej strony",name:"Wcz si z lewej strony na {way_name}",destination:"Wcz si z lewej strony w kierunku {destination}"},"sharp right":{default:"Wcz si z prawej strony",name:"Wcz si z prawej strony na {way_name}",destination:"Wcz si z prawej strony w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},"new name":{default:{default:"Kontynuuj {modifier}",name:"Kontynuuj {modifier} na {way_name}",destination:"Kontynuuj {modifier} w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj na {way_name}",destination:"Kontynuuj w kierunku {destination}"},"sharp left":{default:"Skr ostro w lewo",name:"Skr ostro w lewo w {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Skr ostro w prawo",name:"Skr ostro w prawo na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},"slight left":{default:"Kontynuuj agodnie w lewo",name:"Kontynuuj agodnie w lewo na {way_name}",destination:"Kontynuuj agodnie w lewo w kierunku {destination}"},"slight right":{default:"Kontynuuj agodnie w prawo",name:"Kontynuuj agodnie w prawo na {way_name}",destination:"Kontynuuj agodnie w prawo w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},notification:{default:{default:"Kontynuuj {modifier}",name:"Kontynuuj {modifier} na {way_name}",destination:"Kontynuuj {modifier} w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},"off ramp":{default:{default:"Zjed",name:"We zjazd na {way_name}",destination:"We zjazd w kierunku {destination}",exit:"Zjed zjazdem {exit}",exit_destination:"Zjed zjazdem {exit} na {destination}"},left:{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},right:{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"},"sharp left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},"sharp right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"},"slight left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},"slight right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"}},"on ramp":{default:{default:"We zjazd",name:"We zjazd na {way_name}",destination:"We zjazd w kierunku {destination}"},left:{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},right:{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"},"sharp left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},"sharp right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"},"slight left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},"slight right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"}},rotary:{default:{default:{default:"Wjed na rondo",name:"Wjed na rondo i skr na {way_name}",destination:"Wjed na rondo i skr w kierunku {destination}"},name:{default:"Wjed na {rotary_name}",name:"Wjed na {rotary_name} i skr na {way_name}",destination:"Wjed na {rotary_name} i skr w kierunku {destination}"},exit:{default:"Wjed na rondo i wyjed {exit_number} zjazdem",name:"Wjed na rondo i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na rondo i wyjed {exit_number} zjazdem w kierunku {destination}"},name_exit:{default:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem",name:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem w kierunku {destination}"}}},roundabout:{default:{exit:{default:"Wjed na rondo i wyjed {exit_number} zjazdem",name:"Wjed na rondo i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na rondo i wyjed {exit_number} zjazdem w kierunku {destination}"},default:{default:"Wjed na rondo",name:"Wjed na rondo i wyjed na {way_name}",destination:"Wjed na rondo i wyjed w kierunku {destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"}},"exit roundabout":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"}},"exit rotary":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Jed prosto",name:"Jed prosto na {way_name}",destination:"Jed prosto w kierunku {destination}"}},turn:{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Jed prosto",name:"Jed prosto na {way_name}",destination:"Jed prosto w kierunku {destination}"}},"use lane":{no_lanes:{default:"Kontynuuj prosto"},default:{default:"{lane_instruction}"}}}}},{}],39:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"nordeste",east:"leste",southeast:"sudeste",south:"sul",southwest:"sudoeste",west:"oeste",northwest:"noroeste"},modifier:{left:" esquerda",right:" direita","sharp left":"fechada  esquerda","sharp right":"fechada  direita","slight left":"suave  esquerda","slight right":"suave  direita",straight:"em frente",uturn:"retorno"},lanes:{xo:"Mantenha-se  direita",ox:"Mantenha-se  esquerda",xox:"Mantenha-se ao centro",oxo:"Mantenha-se  esquerda ou direita"}},modes:{ferry:{default:"Pegue a balsa",name:"Pegue a balsa {way_name}",destination:"Pegue a balsa sentido {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ento, em {distance}, {instruction_two}","two linked":"{instruction_one}, ento {instruction_two}","one in distance":"Em {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sada {exit}"},arrive:{default:{default:"Voc chegou ao seu {nth} destino",upcoming:"Voc chegar ao seu {nth} destino",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou a {waypoint_name}"},left:{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},right:{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"sharp left":{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},"sharp right":{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"slight right":{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"slight left":{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},straight:{default:"Voc chegou ao seu {nth} destino, em frente",upcoming:"Voc vai chegar ao seu {nth} destino, em frente",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"You have arrived at {waypoint_name}, straight ahead"}},continue:{default:{default:"Vire {modifier}",name:"Vire {modifier} para manter-se na {way_name}",destination:"Vire {modifier} sentido {destination}",exit:"Vire {modifier} em {way_name}"},straight:{default:"Continue em frente",name:"Continue em frente para manter-se na {way_name}",destination:"Continue em direo  {destination}",distance:"Continue em frente por {distance}",namedistance:"Continue na {way_name} por {distance}"},"sharp left":{default:"Faa uma curva fechada a esquerda",name:"Faa uma curva fechada a esquerda para manter-se na {way_name}",destination:"Faa uma curva fechada a esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada a direita",name:"Faa uma curva fechada a direita para manter-se na {way_name}",destination:"Faa uma curva fechada a direita sentido {destination}"},"slight left":{default:"Faa uma curva suave a esquerda",name:"Faa uma curva suave a esquerda para manter-se na {way_name}",destination:"Faa uma curva suave a esquerda em direo a {destination}"},"slight right":{default:"Faa uma curva suave a direita",name:"Faa uma curva suave a direita para manter-se na {way_name}",destination:"Faa uma curva suave a direita em direo a {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno e continue em {way_name}",destination:"Faa o retorno sentido {destination}"}},depart:{default:{default:"Siga {direction}",name:"Siga {direction} em {way_name}",namedistance:"Siga {direction} na {way_name} por {distance}"}},"end of road":{default:{default:"Vire {modifier}",name:"Vire {modifier} em {way_name}",destination:"Vire {modifier} sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em frente em {way_name}",destination:"Continue em frente sentido {destination}"},uturn:{default:"Faa o retorno no fim da rua",name:"Faa o retorno em {way_name} no fim da rua",destination:"Faa o retorno sentido {destination} no fim da rua"}},fork:{default:{default:"Mantenha-se {modifier} na bifurcao",name:"Mantenha-se {modifier} na bifurcao em {way_name}",destination:"Mantenha-se {modifier} na bifurcao sentido {destination}"},"slight left":{default:"Mantenha-se  esquerda na bifurcao",name:"Mantenha-se  esquerda na bifurcao em {way_name}",destination:"Mantenha-se  esquerda na bifurcao sentido {destination}"},"slight right":{default:"Mantenha-se  direita na bifurcao",name:"Mantenha-se  direita na bifurcao em {way_name}",destination:"Mantenha-se  direita na bifurcao sentido {destination}"},"sharp left":{default:"Faa uma curva fechada  esquerda na bifurcao",name:"Faa uma curva fechada  esquerda em {way_name}",destination:"Faa uma curva fechada  esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada  direita na bifurcao",name:"Faa uma curva fechada  direita em {way_name}",destination:"Faa uma curva fechada  direita sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},merge:{default:{default:"Entre {modifier}",name:"Entre {modifier} na {way_name}",destination:"Entre {modifier} em direo  {destination}"},straight:{default:"Mesclar",name:"Entre reto na {way_name}",destination:"Entre reto em direo  {destination}"},"slight left":{default:"Entre  esquerda",name:"Entre  esquerda na {way_name}",destination:"Entre  esquerda em direo  {destination}"},"slight right":{default:"Entre  direita",name:"Entre  direita na {way_name}",destination:"Entre  direita em direo  {destination}"},"sharp left":{default:"Entre  esquerda",name:"Entre  esquerda na {way_name}",destination:"Entre  esquerda em direo  {destination}"},"sharp right":{default:"Entre  direita",name:"Entre  direita na {way_name}",destination:"Entre  direita em direo  {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} em {way_name}",destination:"Continue {modifier} sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em {way_name}",destination:"Continue em direo  {destination}"},"sharp left":{default:"Faa uma curva fechada  esquerda",name:"Faa uma curva fechada  esquerda em {way_name}",destination:"Faa uma curva fechada  esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada  direita",name:"Faa uma curva fechada  direita em {way_name}",destination:"Faa uma curva fechada  direita sentido {destination}"},"slight left":{default:"Continue ligeiramente  esquerda",name:"Continue ligeiramente  esquerda em {way_name}",destination:"Continue ligeiramente  esquerda sentido {destination}"},"slight right":{default:"Continue ligeiramente  direita",name:"Continue ligeiramente  direita em {way_name}",destination:"Continue ligeiramente  direita sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} em {way_name}",destination:"Continue {modifier} sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},"off ramp":{default:{default:"Pegue a rampa",name:"Pegue a rampa em {way_name}",destination:"Pegue a rampa sentido {destination}",exit:"Pegue a sada {exit}",exit_destination:"Pegue a sada {exit} em direo  {destination}"},left:{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},right:{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"},"sharp left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},"sharp right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"},"slight left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},"slight right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"}},"on ramp":{default:{default:"Pegue a rampa",name:"Pegue a rampa em {way_name}",destination:"Pegue a rampa sentido {destination}"},left:{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},right:{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentid {destination}"},"sharp left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},"sharp right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}"},"slight left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},"slight right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}"}},rotary:{default:{default:{default:"Entre na rotatria",name:"Entre na rotatria e saia na {way_name}",destination:"Entre na rotatria e saia sentido {destination}"},name:{default:"Entre em {rotary_name}",name:"Entre em {rotary_name} e saia em {way_name}",destination:"Entre em {rotary_name} e saia sentido {destination}"},exit:{default:"Entre na rotatria e pegue a {exit_number} sada",name:"Entre na rotatria e pegue a {exit_number} sada na {way_name}",destination:"Entre na rotatria e pegue a {exit_number} sada sentido {destination}"},name_exit:{default:"Entre em {rotary_name} e saia na {exit_number} sada",name:"Entre em {rotary_name} e saia na {exit_number} sada em {way_name}",destination:"Entre em {rotary_name} e saia na {exit_number} sada sentido {destination}"}}},roundabout:{default:{exit:{default:"Entre na rotatria e pegue a {exit_number} sada",name:"Entre na rotatria e pegue a {exit_number} sada na {way_name}",destination:"Entre na rotatria e pegue a {exit_number} sada sentido {destination}"},default:{default:"Entre na rotatria",name:"Entre na rotatria e saia na {way_name}",destination:"Entre na rotatria e saia sentido {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} em {way_name}",destination:"Siga {modifier} sentido {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda em {way_name}",destination:"Vire  esquerda sentido {destination}"},right:{default:"Vire  direita",name:"Vire  direita em {way_name}",destination:"Vire  direita sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em frente em {way_name}",destination:"Continue em frente sentido {destination}"}},"exit roundabout":{default:{default:"Saia da rotatria",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},"exit rotary":{default:{default:"Saia da rotatria",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},turn:{default:{default:"Siga {modifier}",name:"Siga {modifier} em {way_name}",destination:"Siga {modifier} sentido {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda em {way_name}",destination:"Vire  esquerda sentido {destination}"},right:{default:"Vire  direita",name:"Vire  direita em {way_name}",destination:"Vire  direita sentido {destination}"},straight:{default:"Siga em frente",name:"Siga em frente em {way_name}",destination:"Siga em frente sentido {destination}"}},"use lane":{no_lanes:{default:"Continue em frente"},default:{default:"{lane_instruction}"}}}}},{}],40:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"nordeste",east:"este",southeast:"sudeste",south:"sul",southwest:"sudoeste",west:"oeste",northwest:"noroeste"},modifier:{left:" esquerda",right:" direita","sharp left":"acentuadamente  esquerda","sharp right":"acentuadamente  direita","slight left":"ligeiramente  esquerda","slight right":"ligeiramente  direita",straight:"em frente",uturn:"inverso de marcha"},lanes:{xo:"Mantenha-se  direita",ox:"Mantenha-se  esquerda",xox:"Mantenha-se ao meio",oxo:"Mantenha-se  esquerda ou  direita"}},modes:{ferry:{default:"Apanhe o ferry",name:"Apanhe o ferry {way_name}",destination:"Apanhe o ferry para {destination}"}},phrase:{"two linked by distance":"{instruction_one}, depois, a {distance}, {instruction_two}","two linked":"{instruction_one}, depois {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sada {exit}"},arrive:{default:{default:"Chegou ao seu {nth} destino",upcoming:"Est a chegar ao seu {nth} destino",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name}"},left:{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},right:{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"sharp left":{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},"sharp right":{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"slight right":{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"slight left":{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},straight:{default:"Chegou ao seu {nth} destino, em frente",upcoming:"Est a chegar ao seu {nth} destino, em frente",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name}, em frente"}},continue:{default:{default:"Vire {modifier}",name:"Vire {modifier} para se manter em {way_name}",destination:"Vire {modifier} em direo a {destination}",exit:"Vire {modifier} para {way_name}"},straight:{default:"Continue em frente",name:"Continue em frente para se manter em {way_name}",destination:"Continue em direo a {destination}",distance:"Continue em frente por {distance}",namedistance:"Continue em {way_name} por {distance}"},"sharp left":{default:"Vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para se manter em {way_name}",destination:"Vire acentuadamente  esquerda em direo a {destination}"},"sharp right":{default:"Vire acentuadamente  direita",name:"Vire acentuadamente  direita para se manter em {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},"slight left":{default:"Vire ligeiramente  esquerda",name:"Vire ligeiramente  esquerda para se manter em {way_name}",destination:"Vire ligeiramente  esquerda em direo a {destination}"},"slight right":{default:"Vire ligeiramente  direita",name:"Vire ligeiramente  direita para se manter em {way_name}",destination:"Vire ligeiramente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha e continue em {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},depart:{default:{default:"Dirija-se para {direction}",name:"Dirija-se para {direction} em {way_name}",namedistance:"Dirija-se para {direction} em {way_name} por {distance}"}},"end of road":{default:{default:"Vire {modifier}",name:"Vire {modifier} para {way_name}",destination:"Vire {modifier} em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue em frente para {way_name}",destination:"Continue em frente em direo a {destination}"},uturn:{default:"No final da estrada faa uma inverso de marcha",name:"No final da estrada faa uma inverso de marcha para {way_name} ",destination:"No final da estrada faa uma inverso de marcha em direo a {destination}"}},fork:{default:{default:"Na bifurcao mantenha-se {modifier}",name:"Mantenha-se {modifier} para {way_name}",destination:"Mantenha-se {modifier} em direo a {destination}"},"slight left":{default:"Na bifurcao mantenha-se  esquerda",name:"Mantenha-se  esquerda para {way_name}",destination:"Mantenha-se  esquerda em direo a {destination}"},"slight right":{default:"Na bifurcao mantenha-se  direita",name:"Mantenha-se  direita para {way_name}",destination:"Mantenha-se  direita em direo a {destination}"},"sharp left":{default:"Na bifurcao vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para {way_name}",destination:"Vire acentuadamente  esquerda em direo a {destination}"},"sharp right":{default:"Na bifurcao vire acentuadamente  direita",name:"Vire acentuadamente  direita para {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},merge:{default:{default:"Una-se ao trfego {modifier}",name:"Una-se ao trfego {modifier} para {way_name}",destination:"Una-se ao trfego {modifier} em direo a {destination}"},straight:{default:"Una-se ao trfego",name:" Una-se ao trfego para {way_name}",destination:"Una-se ao trfego em direo a {destination}"},"slight left":{default:"Una-se ao trfego  esquerda",name:"Una-se ao trfego  esquerda para {way_name}",destination:"Una-se ao trfego  esquerda em direo a {destination}"},"slight right":{default:"Una-se ao trfego  direita",name:"Una-se ao trfego  direita para {way_name}",destination:"Una-se ao trfego  direita em direo a {destination}"},"sharp left":{default:"Una-se ao trfego  esquerda",name:"Una-se ao trfego  esquerda para {way_name}",destination:"Una-se ao trfego  esquerda em direo a {destination}"},"sharp right":{default:"Una-se ao trfego  direita",name:"Una-se ao trfego  direita para {way_name}",destination:"Una-se ao trfego  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} para {way_name}",destination:"Continue {modifier} em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue para {way_name}",destination:"Continue em direo a {destination}"},"sharp left":{default:"Vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para {way_name}",destination:"Vire acentuadamente  esquerda em direo a{destination}"},"sharp right":{default:"Vire acentuadamente  direita",name:"Vire acentuadamente  direita para {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},"slight left":{default:"Continue ligeiramente  esquerda",name:"Continue ligeiramente  esquerda para {way_name}",destination:"Continue ligeiramente  esquerda em direo a {destination}"},"slight right":{default:"Continue ligeiramente  direita",name:"Continue ligeiramente  direita para {way_name}",destination:"Continue ligeiramente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} para {way_name}",destination:"Continue {modifier} em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},"off ramp":{default:{default:"Saia na sada",name:"Saia na sada para {way_name}",destination:"Saia na sada em direo a {destination}",exit:"Saia na sada {exit}",exit_destination:"Saia na sada {exit} em direo a {destination}"},left:{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},right:{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"},"sharp left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},"sharp right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"},"slight left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},"slight right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"}},"on ramp":{default:{default:"Saia na sada",name:"Saia na sada para {way_name}",destination:"Saia na sada em direo a {destination}"},left:{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},right:{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"},"sharp left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},"sharp right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"},"slight left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},"slight right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"}},rotary:{default:{default:{default:"Entre na rotunda",name:"Entre na rotunda e saia para {way_name}",destination:"Entre na rotunda e saia em direo a {destination}"},name:{default:"Entre em {rotary_name}",name:"Entre em {rotary_name} e saia para {way_name}",destination:"Entre em {rotary_name} e saia em direo a {destination}"},exit:{default:"Entre na rotunda e saia na sada {exit_number}",name:"Entre na rotunda e saia na sada {exit_number} para {way_name}",destination:"Entre na rotunda e saia na sada {exit_number} em direo a {destination}"},name_exit:{default:"Entre em {rotary_name} e saia na sada {exit_number}",name:"Entre em {rotary_name} e saia na sada {exit_number} para {way_name}",destination:"Entre em{rotary_name} e saia na sada {exit_number} em direo a {destination}"}}},roundabout:{default:{exit:{default:"Entre na rotunda e saia na sada {exit_number}",name:"Entre na rotunda e saia na sada {exit_number} para {way_name}",destination:"Entre na rotunda e saia na sada {exit_number} em direo a {destination}"},default:{default:"Entre na rotunda",name:"Entre na rotunda e saia para {way_name}",destination:"Entre na rotunda e saia em direo a {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} para {way_name}",destination:"Siga {modifier} em direo a {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda para {way_name}",destination:"Vire  esquerda em direo a {destination}"},right:{default:"Vire  direita",name:"Vire  direita para {way_name}",destination:"Vire  direita em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue em frente para {way_name}",destination:"Continue em frente em direo a {destination}"}},"exit roundabout":{default:{default:"Saia da rotunda",name:"Saia da rotunda para {way_name}",destination:"Saia da rotunda em direo a {destination}"}},"exit rotary":{default:{default:"Saia da rotunda",name:"Saia da rotunda para {way_name}",destination:"Saia da rotunda em direo a {destination}"}},turn:{default:{default:"Siga {modifier}",name:"Siga {modifier} para{way_name}",destination:"Siga {modifier} em direo a {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda para {way_name}",destination:"Vire  esquerda em direo a {destination}"},right:{default:"Vire  direita",name:"Vire  direita para {way_name}",destination:"Vire  direita em direo a {destination}"},straight:{default:"V em frente",name:"V em frente para {way_name}",destination:"V em frente em direo a {destination}"}},"use lane":{no_lanes:{default:"Continue em frente"},default:{default:"{lane_instruction}"}}}}},{}],41:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"prima",2:"a doua",3:"a treia",4:"a patra",5:"a cincea",6:"a asea",7:"a aptea",8:"a opta",9:"a noua",10:"a zecea"},direction:{north:"nord",northeast:"nord-est",east:"est",southeast:"sud-est",south:"sud",southwest:"sud-vest",west:"vest",northwest:"nord-vest"},modifier:{left:"stnga",right:"dreapta","sharp left":"puternic stnga","sharp right":"puternic dreapta","slight left":"uor stnga","slight right":"uor dreapta",straight:"nainte",uturn:"ntoarcere"},lanes:{xo:"inei stnga",ox:"inei dreapta",xox:"inei pe mijloc",oxo:"inei pe laterale"}},modes:{ferry:{default:"Luai feribotul",name:"Luai feribotul {way_name}",destination:"Luai feribotul spre {destination}"}},phrase:{"two linked by distance":"{instruction_one}, apoi n {distance}, {instruction_two}","two linked":"{instruction_one} apoi {instruction_two}","one in distance":"n {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"ieirea {exit}"},arrive:{default:{default:"Ai ajuns la {nth} destinaie",upcoming:"Ai ajuns la {nth} destinaie",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}"},left:{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},right:{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"sharp left":{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},"sharp right":{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"slight right":{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"slight left":{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},straight:{default:"Ai ajuns la {nth} destinaie, n fa",upcoming:"Ai ajuns la {nth} destinaie, n fa",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, n fa"}},continue:{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}",exit:"Virai {modifier} pe {way_name}"},straight:{default:"Mergei nainte",name:"Mergei nainte pe {way_name}",destination:"Continuai spre {destination}",distance:"Mergei nainte pentru {distance}",namedistance:"Continuai pe {way_name} pentru {distance}"},"sharp left":{default:"Virai puternic la stnga",name:"Virai puternic la stnga pe {way_name}",destination:"Virai puternic la stnga spre {destination}"},"sharp right":{default:"Virai puternic la dreapta",name:"Virai puternic la dreapta pe {way_name}",destination:"Virai puternic la dreapta spre {destination}"},"slight left":{default:"Virai uor la stnga",name:"Virai uor la stnga pe {way_name}",destination:"Virai uor la stnga spre {destination}"},"slight right":{default:"Virai uor la dreapta",name:"Virai uor la dreapta pe {way_name}",destination:"Virai uor la dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v i continuai pe {way_name}",destination:"ntoarcei-v spre {destination}"}},depart:{default:{default:"Mergei spre {direction}",name:"Mergei spre {direction} pe {way_name}",namedistance:"Mergei spre {direction} pe {way_name} pentru {distance}"}},"end of road":{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}"},straight:{default:"Continuai nainte",name:"Continuai nainte pe {way_name}",destination:"Continuai nainte spre {destination}"},uturn:{default:"ntoarcei-v la sfritul drumului",name:"ntoarcei-v pe {way_name} la sfritul drumului",destination:"ntoarcei-v spre {destination} la sfritul drumului"}},fork:{default:{default:"inei {modifier} la bifurcaie",name:"inei {modifier} la bifurcaie pe {way_name}",destination:"inei {modifier} la bifurcaie spre {destination}"},"slight left":{default:"inei pe stnga la bifurcaie",name:"inei pe stnga la bifurcaie pe {way_name}",destination:"inei pe stnga la bifurcaie spre {destination}"},"slight right":{default:"inei pe dreapta la bifurcaie",name:"inei pe dreapta la bifurcaie pe {way_name}",destination:"inei pe dreapta la bifurcaie spre {destination}"},"sharp left":{default:"Virai puternic stnga la bifurcaie",name:"Virai puternic stnga la bifurcaie pe {way_name}",destination:"Virai puternic stnga la bifurcaie spre {destination}"},"sharp right":{default:"Virai puternic dreapta la bifurcaie",name:"Virai puternic dreapta la bifurcaie pe {way_name}",destination:"Virai puternic dreapta la bifurcaie spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},merge:{default:{default:"Intrai n {modifier}",name:"Intrai n {modifier} pe {way_name}",destination:"Intrai n {modifier} spre {destination}"},straight:{default:"Intrai",name:"Intrai pe {way_name}",destination:"Intrai spre {destination}"},"slight left":{default:"Intrai n stnga",name:"Intrai n stnga pe {way_name}",destination:"Intrai n stnga spre {destination}"},"slight right":{default:"Intrai n dreapta",name:"Intrai n dreapta pe {way_name}",destination:"Intrai n dreapta spre {destination}"},"sharp left":{default:"Intrai n stnga",name:"Intrai n stnga pe {way_name}",destination:"Intrai n stnga spre {destination}"},"sharp right":{default:"Intrai n dreapta",name:"Intrai n dreapta pe {way_name}",destination:"Intrai n dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},"new name":{default:{default:"Continuai {modifier}",name:"Continuai {modifier} pe {way_name}",destination:"Continuai {modifier} spre {destination}"},straight:{default:"Continuai nainte",name:"Continuai pe {way_name}",destination:"Continuai spre {destination}"},"sharp left":{default:"Virai puternic la stnga",name:"Virai puternic la stnga pe {way_name}",destination:"Virai puternic la stnga spre {destination}"},"sharp right":{default:"Virai puternic la dreapta",name:"Virai puternic la dreapta pe {way_name}",destination:"Virai puternic la dreapta spre {destination}"},"slight left":{default:"Continuai uor la stnga",name:"Continuai uor la stnga pe {way_name}",destination:"Continuai uor la stnga spre {destination}"},"slight right":{default:"Continuai uor la dreapta",name:"Continuai uor la dreapta pe {way_name}",destination:"Continuai uor la dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},notification:{default:{default:"Continuai {modifier}",name:"Continuai {modifier} pe {way_name}",destination:"Continuai {modifier} spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},"off ramp":{default:{default:"Urmai breteaua",name:"Urmai breteaua pe {way_name}",destination:"Urmai breteaua spre {destination}",exit:"Urmai ieirea {exit}",exit_destination:"Urmai ieirea {exit} spre {destination}"},left:{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},right:{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"},"sharp left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},"sharp right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"},"slight left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},"slight right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"}},"on ramp":{default:{default:"Urmai breteaua de intrare",name:"Urmai breteaua pe {way_name}",destination:"Urmai breteaua spre {destination}"},left:{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},right:{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"},"sharp left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},"sharp right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"},"slight left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},"slight right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"}},rotary:{default:{default:{default:"Intrai n sensul giratoriu",name:"Intrai n sensul giratoriu i ieii pe {way_name}",destination:"Intrai n sensul giratoriu i ieii spre {destination}"},name:{default:"Intrai n {rotary_name}",name:"Intrai n {rotary_name} i ieii pe {way_name}",destination:"Intrai n {rotary_name} i ieii spre {destination}"},exit:{default:"Intrai n sensul giratoriu i urmai {exit_number} ieire",name:"Intrai n sensul giratoriu i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n sensul giratoriu i urmai {exit_number} ieire spre {destination}"},name_exit:{default:"Intrai n {rotary_name} i urmai {exit_number} ieire",name:"Intrai n {rotary_name} i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n  {rotary_name} i urmai {exit_number} ieire spre {destination}"}}},roundabout:{default:{exit:{default:"Intrai n sensul giratoriu i urmai {exit_number} ieire",name:"Intrai n sensul giratoriu i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n sensul giratoriu i urmai {exit_number} ieire spre {destination}"},default:{default:"Intrai n sensul giratoriu",name:"Intrai n sensul giratoriu i ieii pe {way_name}",destination:"Intrai n sensul giratoriu i ieii spre {destination}"}}},"roundabout turn":{default:{default:"La sensul giratoriu virai {modifier}",name:"La sensul giratoriu virai {modifier} pe {way_name}",destination:"La sensul giratoriu virai {modifier} spre {destination}"},left:{default:"La sensul giratoriu virai la stnga",name:"La sensul giratoriu virai la stnga pe {way_name}",destination:"La sensul giratoriu virai la stnga spre {destination}"},right:{default:"La sensul giratoriu virai la dreapta",name:"La sensul giratoriu virai la dreapta pe {way_name}",destination:"La sensul giratoriu virai la dreapta spre {destination}"},straight:{default:"La sensul giratoriu continuai nainte",name:"La sensul giratoriu continuai nainte pe {way_name}",destination:"La sensul giratoriu continuai nainte spre {destination}"}},"exit roundabout":{default:{default:"Ieii din sensul giratoriu",name:"Ieii din sensul giratoriu pe {way_name}",destination:"Ieii din sensul giratoriu spre {destination}"}},"exit rotary":{default:{default:"Ieii din sensul giratoriu",name:"Ieii din sensul giratoriu pe {way_name}",destination:"Ieii din sensul giratoriu spre {destination}"}},turn:{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}"},left:{default:"Virai la stnga",name:"Virai la stnga pe {way_name}",destination:"Virai la stnga spre {destination}"},right:{default:"Virai la dreapta",name:"Virai la dreapta pe {way_name}",destination:"Virai la dreapta spre {destination}"},straight:{default:"Mergei nainte",name:"Mergei nainte pe {way_name}",destination:"Mergei nainte spre {destination}"}},"use lane":{no_lanes:{default:"Mergei nainte"},default:{default:"{lane_instruction}"}}}}},{}],42:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"-",east:"",southeast:"-",south:"",southwest:"-",west:"",northwest:"-"},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:" "},lanes:{xo:" ",ox:" ",xox:" ",oxo:"   "}},modes:{ferry:{default:"  ",name:"   {way_name}",destination:"     {destination}"}},phrase:{"two linked by distance":"{instruction_one},   {distance} {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":" {exit}"},arrive:{default:{default:"   {nth}  ",upcoming:"   {nth}  ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name}"},left:{default:"   {nth}  ,   ",upcoming:"   {nth}  ,   ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},   "},right:{default:"   {nth}  ,   ",upcoming:"   {nth}  ,   ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},   "},"sharp left":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"sharp right":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"slight right":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"slight left":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},straight:{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "}},continue:{default:{default:" {modifier}",name:" {modifier}  {way_name:dative}",destination:" {modifier}   {destination}",exit:" {modifier}  {way_name:accusative}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}",distance:"  {distance}",namedistance:"  {distance}  {way_name:dative}"},"sharp left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"sharp right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},uturn:{default:"",name:"     {way_name:dative}",destination:"   {destination}"}},depart:{default:{default:"  {direction} ",name:"  {direction}   {way_name:dative}",namedistance:" {distance}  {direction}   {way_name:dative}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},uturn:{default:"   ",name:"   {way_name:genitive}",destination:"      {destination}"}},fork:{default:{default:"   {modifier}",name:"   {modifier}  {way_name:accusative}",destination:"   {modifier}   {destination}"},"slight left":{default:"   ",name:"     {way_name:accusative}",destination:"         {destination}"},"slight right":{default:"   ",name:"     {way_name:accusative}",destination:"         {destination}"},"sharp left":{default:"    ",name:"    {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"    ",name:"    {way_name:accusative}",destination:"        {destination}"},uturn:{default:"  ",name:"    {way_name:prepositional}",destination:"        {destination}"}},merge:{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},"slight left":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"slight right":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"sharp left":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"sharp right":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"   {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},"sharp left":{default:"  ",name:"    {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"  ",name:"    {way_name:accusative}",destination:"        {destination}"},"slight left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"      {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name:dative}",destination:" {modifier}   {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"      {destination}"}},"off ramp":{default:{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}",exit:"   {exit}",exit_destination:"   {exit}   {destination}"},left:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit} ",exit_destination:"   {exit}    {destination}"},right:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit} ",exit_destination:"   {exit}    {destination}"},"sharp left":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"},"sharp right":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"},"slight left":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit}",exit_destination:"    {exit}   {destination}"},"slight right":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"}},"on ramp":{default:{default:"  ",name:"    {way_name:accusative}",destination:"       {destination}"},left:{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},right:{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"sharp left":{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"slight left":{default:"     ",name:"   {way_name:accusative}",destination:"      {destination}"},"slight right":{default:"     ",name:"   {way_name:accusative}",destination:"      {destination}"}},rotary:{default:{default:{default:"    ",name:"     {way_name:accusative}",destination:"      {destination}"},name:{default:"   {rotary_name:dative}",name:" {rotary_name:prepositional}   {way_name:accusative}",destination:" {rotary_name:prepositional}    {destination}"},exit:{default:"     {exit_number} ",name:"     {exit_number}   {way_name:accusative}",destination:"     {exit_number}    {destination}"},name_exit:{default:" {rotary_name:prepositional}   {exit_number} ",name:" {rotary_name:prepositional}   {exit_number}   {way_name:accusative}",destination:" {rotary_name:prepositional}   {exit_number}    {destination}"}}},roundabout:{default:{exit:{default:"     {exit_number} ",name:"     {exit_number}   {way_name:accusative}",destination:"     {exit_number}    {destination}"},default:{default:"    ",name:"     {way_name:accusative}",destination:"      {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},right:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"}},"exit roundabout":{default:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}"}},"exit rotary":{default:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}    {destination}"},left:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},right:{default:" ",name:"   {way_name:accusative}",destination:"     {destination}"},straight:{default:" ",name:"  {way_name:dative}",destination:"   {destination}"}},"use lane":{no_lanes:{default:"  "},default:{default:"{lane_instruction}"}}}}},{}],43:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1:a",2:"2:a",3:"3:e",4:"4:e",5:"5:e",6:"6:e",7:"7:e",8:"8:e",9:"9:e",10:"10:e"},direction:{north:"norr",northeast:"nordost",east:"ster",southeast:"sydost",south:"sder",southwest:"sydvst",west:"vster",northwest:"nordvst"},modifier:{left:"vnster",right:"hger","sharp left":"vnster","sharp right":"hger","slight left":"vnster","slight right":"hger",straight:"rakt fram",uturn:"U-svng"},lanes:{xo:"Hll till hger",ox:"Hll till vnster",xox:"Hll till mitten",oxo:"Hll till vnster eller hger"}},modes:{ferry:{default:"Ta frjan",name:"Ta frjan p {way_name}",destination:"Ta frjan mot {destination}"}},phrase:{"two linked by distance":"{instruction_one}, sedan efter {distance}, {instruction_two}","two linked":"{instruction_one}, sedan {instruction_two}","one in distance":"Om {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Du r framme vid din {nth} destination",upcoming:"Du r snart framme vid din {nth} destination",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}"},left:{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},right:{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"sharp left":{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},"sharp right":{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"slight right":{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"slight left":{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},straight:{default:"Du r framme vid din {nth} destination, rakt fram",upcoming:"Du r snart framme vid din {nth} destination, rakt fram",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, rakt fram"}},continue:{default:{default:"Svng {modifier}",name:"Svng {modifier} och fortstt p {way_name}",destination:"Svng {modifier} mot {destination}",exit:"Svng {modifier} in p {way_name}"},straight:{default:"Fortstt rakt fram",name:"Kr rakt fram och fortstt p {way_name}",destination:"Fortstt mot {destination}",distance:"Fortstt rakt fram i {distance}",namedistance:"Fortstt p {way_name} i {distance}"},"sharp left":{default:"Svng vnster",name:"Svng vnster och fortstt p {way_name}",destination:"Svng vnster mot {destination}"},"sharp right":{default:"Svng hger",name:"Svng hger och fortstt p {way_name}",destination:"Svng hger mot {destination}"},"slight left":{default:"Svng vnster",name:"Svng vnster och fortstt p {way_name}",destination:"Svng vnster mot {destination}"},"slight right":{default:"Svng hger",name:"Svng hger och fortstt p {way_name}",destination:"Svng hger mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng och fortstt p {way_name}",destination:"Gr en U-svng mot {destination}"}},depart:{default:{default:"Kr t {direction}",name:"Kr t {direction} p {way_name}",namedistance:"Kr {distance} t {direction} p {way_name}"}},"end of road":{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt rakt fram in p {way_name}",destination:"Fortstt rakt fram mot {destination}"},uturn:{default:"Gr en U-svng i slutet av vgen",name:"Gr en U-svng in p {way_name} i slutet av vgen",destination:"Gr en U-svng mot {destination} i slutet av vgen"}},fork:{default:{default:"Hll till {modifier} dr vgen delar sig",name:"Hll till {modifier} in p {way_name}",destination:"Hll till {modifier} mot {destination}"},"slight left":{default:"Hll till vnster dr vgen delar sig",name:"Hll till vnster in p {way_name}",destination:"Hll till vnster mot {destination}"},"slight right":{default:"Hll till hger dr vgen delar sig",name:"Hll till hger in p {way_name}",destination:"Hll till hger mot {destination}"},"sharp left":{default:"Svng vnster dr vgen delar sig",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},"sharp right":{default:"Svng hger dr vgen delar sig",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},merge:{default:{default:"Byt till {modifier} krflt",name:"Byt till {modifier} krflt, in p {way_name}",destination:"Byt till {modifier} krflt, mot {destination}"},straight:{default:"Fortstt",name:"Kr in p {way_name}",destination:"Kr mot {destination}"},"slight left":{default:"Byt till vnstra krfltet",name:"Byt till vnstra krfltet, in p {way_name}",destination:"Byt till vnstra krfltet, mot {destination}"},"slight right":{default:"Byt till hgra krfltet",name:"Byt till hgra krfltet, in p {way_name}",destination:"Byt till hgra krfltet, mot {destination}"},"sharp left":{default:"Byt till vnstra krfltet",name:"Byt till vnstra krfltet, in p {way_name}",destination:"Byt till vnstra krfltet, mot {destination}"},"sharp right":{default:"Byt till hgra krfltet",name:"Byt till hgra krfltet, in p {way_name}",destination:"Byt till hgra krfltet, mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},"new name":{default:{default:"Fortstt {modifier}",name:"Fortstt {modifier} p {way_name}",destination:"Fortstt {modifier} mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt in p {way_name}",destination:"Fortstt mot {destination}"},"sharp left":{default:"Gr en skarp vnstersvng",name:"Gr en skarp vnstersvng in p {way_name}",destination:"Gr en skarp vnstersvng mot {destination}"},"sharp right":{default:"Gr en skarp hgersvng",name:"Gr en skarp hgersvng in p {way_name}",destination:"Gr en skarp hgersvng mot {destination}"},"slight left":{default:"Fortstt med ltt vnstersvng",name:"Fortstt med ltt vnstersvng in p {way_name}",destination:"Fortstt med ltt vnstersvng mot {destination}"},"slight right":{default:"Fortstt med ltt hgersvng",name:"Fortstt med ltt hgersvng in p {way_name}",destination:"Fortstt med ltt hgersvng mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},notification:{default:{default:"Fortstt {modifier}",name:"Fortstt {modifier} p {way_name}",destination:"Fortstt {modifier} mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},"off ramp":{default:{default:"Ta avfarten",name:"Ta avfarten in p {way_name}",destination:"Ta avfarten mot {destination}",exit:"Ta avfart {exit} ",exit_destination:"Ta avfart {exit} mot {destination}"},left:{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart {exit} till vnster mot {destination}"},right:{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"},"sharp left":{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart {exit} till vnster mot {destination}"},"sharp right":{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"},"slight left":{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart{exit} till vnster mot {destination}"},"slight right":{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"}},"on ramp":{default:{default:"Ta pfarten",name:"Ta pfarten in p {way_name}",destination:"Ta pfarten mot {destination}"},left:{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},right:{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"},"sharp left":{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},"sharp right":{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"},"slight left":{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},"slight right":{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"}},rotary:{default:{default:{default:"Kr in i rondellen",name:"I rondellen, ta avfarten in p {way_name}",destination:"I rondellen, ta av mot {destination}"},name:{default:"Kr in i {rotary_name}",name:"I {rotary_name}, ta av in p {way_name}",destination:"I {rotary_name}, ta av mot {destination}"},exit:{default:"I rondellen, ta {exit_number} avfarten",name:"I rondellen, ta {exit_number} avfarten in p {way_name}",destination:"I rondellen, ta {exit_number} avfarten mot {destination}"},name_exit:{default:"I {rotary_name}, ta {exit_number} avfarten",name:"I {rotary_name}, ta {exit_number}  avfarten in p {way_name}",destination:"I {rotary_name}, ta {exit_number} avfarten mot {destination}"}}},roundabout:{default:{exit:{default:"I rondellen, ta {exit_number} avfarten",name:"I rondellen, ta {exit_number} avfarten in p {way_name}",destination:"I rondellen, ta {exit_number} avfarten mot {destination}"},default:{default:"Kr in i rondellen",name:"I rondellen, ta avfarten in p {way_name}",destination:"I rondellen, ta av mot {destination}"}}},"roundabout turn":{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},left:{default:"Svng vnster",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},right:{default:"Svng hger",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt rakt fram in p {way_name}",destination:"Fortstt rakt fram mot {destination}"}},"exit roundabout":{default:{default:"Kr ut ur rondellen",name:"Kr ut ur rondellen in p {way_name}",destination:"Kr ut ur rondellen mot {destination}"}},"exit rotary":{default:{default:"Kr ut ur rondellen",name:"Kr ut ur rondellen in p {way_name}",destination:"Kr ut ur rondellen mot {destination}"}},turn:{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},left:{default:"Svng vnster",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},right:{default:"Svng hger",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},straight:{default:"Kr rakt fram",name:"Kr rakt fram in p {way_name}",destination:"Kr rakt fram mot {destination}"}},"use lane":{no_lanes:{default:"Fortstt rakt fram"},default:{default:"{lane_instruction}"}}}}},{}],44:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"birinci",2:"ikinci",3:"nc",4:"drdnc",5:"beinci",6:"altnc",7:"yedinci",8:"sekizinci",9:"dokuzuncu",10:"onuncu"},direction:{north:"kuzey",northeast:"kuzeydou",east:"dou",southeast:"gneydou",south:"gney",southwest:"gneybat",west:"bat",northwest:"kuzeybat"},modifier:{left:"sol",right:"sa","sharp left":"keskin sol","sharp right":"keskin sa","slight left":"hafif sol","slight right":"hafif sa",straight:"dz",uturn:"U dn"},lanes:{xo:"Sada kaln",ox:"Solda kaln",xox:"Ortada kaln",oxo:"Solda veya sada kaln"}},modes:{ferry:{default:"Vapur kullan",name:"{way_name} vapurunu kullan",destination:"{destination} istikametine giden vapuru kullan"}},phrase:{"two linked by distance":"{instruction_one} ve {distance} sonra {instruction_two}","two linked":"{instruction_one} ve sonra {instruction_two}","one in distance":"{distance} sonra, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"{nth} hedefinize ulatnz",upcoming:"{nth} hedefinize ulatnz",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz"},left:{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},right:{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"sharp left":{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},"sharp right":{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"slight right":{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"slight left":{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},straight:{default:"{nth} hedefinize ulatnz, hedefiniz karnzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz karnzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz karnzdadr"}},continue:{default:{default:"{modifier} yne dn",name:"{way_name} zerinde kalmak iin {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn",exit:"{way_name} zerinde {modifier} yne dn"},straight:{default:"Dz devam edin",name:"{way_name} zerinde kalmak iin dz devam et",destination:"{destination} istikametinde devam et",distance:"{distance} boyunca dz devam et",namedistance:"{distance} boyunca {way_name} zerinde devam et"},"sharp left":{default:"Sola keskin dn yap",name:"{way_name} zerinde kalmak iin sola keskin dn yap",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"Saa keskin dn yap",name:"{way_name} zerinde kalmak iin saa keskin dn yap",destination:"{destination} istikametinde saa keskin dn yap"},"slight left":{default:"Sola hafif dn yap",name:"{way_name} zerinde kalmak iin sola hafif dn yap",destination:"{destination} istikametinde sola hafif dn yap"},"slight right":{default:"Saa hafif dn yap",name:"{way_name} zerinde kalmak iin saa hafif dn yap",destination:"{destination} istikametinde saa hafif dn yap"},uturn:{default:"U dn yapn",name:"Bir U-dn yap ve {way_name} devam et",destination:"{destination} istikametinde bir U-dn yap"}},depart:{default:{default:"{direction} tarafna ynelin",name:"{way_name} zerinde {direction} yne git",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"{modifier} tarafa dnn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},straight:{default:"Dz devam edin",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"},uturn:{default:"Yolun sonunda U dn yapn",name:"Yolun sonunda {way_name} zerinde bir U-dn yap",destination:"Yolun sonunda {destination} istikametinde bir U-dn yap"}},fork:{default:{default:"Yol ayrmnda {modifier} ynde kal",name:"{way_name} zerindeki yol ayrmnda {modifier} ynde kal",destination:"{destination} istikametindeki yol ayrmnda {modifier} ynde kal"},"slight left":{default:"ataln solundan devam edin",name:"ataln solundan {way_name} yoluna doru ",destination:"{destination} istikametindeki yol ayrmnda solda kal"},"slight right":{default:"ataln sandan devam edin",name:"{way_name} zerindeki yol ayrmnda sada kal",destination:"{destination} istikametindeki yol ayrmnda sada kal"},"sharp left":{default:"atalda keskin sola dnn",name:"{way_name} yoluna doru sola keskin dn yapn",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"atalda keskin saa dnn",name:"{way_name} yoluna doru saa keskin dn yapn",destination:"{destination} istikametinde saa keskin dn yap"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},merge:{default:{default:"{modifier} yne gir",name:"{way_name} zerinde {modifier} yne gir",destination:"{destination} istikametinde {modifier} yne gir"},straight:{default:"dz yne gir",name:"{way_name} zerinde dz yne gir",destination:"{destination} istikametinde dz yne gir"},"slight left":{default:"Sola gir",name:"{way_name} zerinde sola gir",destination:"{destination} istikametinde sola gir"},"slight right":{default:"Saa gir",name:"{way_name} zerinde saa gir",destination:"{destination} istikametinde saa gir"},"sharp left":{default:"Sola gir",name:"{way_name} zerinde sola gir",destination:"{destination} istikametinde sola gir"},"sharp right":{default:"Saa gir",name:"{way_name} zerinde saa gir",destination:"{destination} istikametinde saa gir"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},"new name":{default:{default:"{modifier} ynde devam et",name:"{way_name} zerinde {modifier} ynde devam et",destination:"{destination} istikametinde {modifier} ynde devam et"},straight:{default:"Dz devam et",name:"{way_name} zerinde devam et",destination:"{destination} istikametinde devam et"},"sharp left":{default:"Sola keskin dn yapn",name:"{way_name} yoluna doru sola keskin dn yapn",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"Saa keskin dn yapn",name:"{way_name} yoluna doru saa keskin dn yapn",destination:"{destination} istikametinde saa keskin dn yap"},"slight left":{default:"Hafif soldan devam edin",name:"{way_name} zerinde hafif solda devam et",destination:"{destination} istikametinde hafif solda devam et"},"slight right":{default:"Hafif sadan devam edin",name:"{way_name} zerinde hafif sada devam et",destination:"{destination} istikametinde hafif sada devam et"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},notification:{default:{default:"{modifier} ynde devam et",name:"{way_name} zerinde {modifier} ynde devam et",destination:"{destination} istikametinde {modifier} ynde devam et"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},"off ramp":{default:{default:"Balant yoluna ge",name:"{way_name} zerindeki balant yoluna ge",destination:"{destination} istikametine giden balant yoluna ge",exit:"{exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} k yoluna ge"},left:{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},right:{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"},"sharp left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},"sharp right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"},"slight left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},"slight right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"}},"on ramp":{default:{default:"Balant yoluna ge",name:"{way_name} zerindeki balant yoluna ge",destination:"{destination} istikametine giden balant yoluna ge"},left:{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},right:{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"},"sharp left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},"sharp right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"},"slight left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},"slight right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"}},rotary:{default:{default:{default:"Dnel kavaa gir",name:"Dnel kavaa gir ve {way_name} zerinde k",destination:"Dnel kavaa gir ve {destination} istikametinde k"},name:{default:"{rotary_name} dnel kavaa gir",name:"{rotary_name} dnel kavaa gir ve {way_name} zerinde k",destination:"{rotary_name} dnel kavaa gir ve {destination} istikametinde k"},exit:{default:"Dnel kavaa gir ve {exit_number} numaral ka gir",name:"Dnel kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"Dnel kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"},name_exit:{default:"{rotary_name} dnel kavaa gir ve {exit_number} numaral ka gir",name:"{rotary_name} dnel kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"{rotary_name} dnel kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"}}},roundabout:{default:{exit:{default:"Gbekli kavaa gir ve {exit_number} numaral ka gir",name:"Gbekli kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"Gbekli kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"},default:{default:"Gbekli kavaa gir",name:"Gbekli kavaa gir ve {way_name} zerinde k",destination:"Gbekli kavaa gir ve {destination} istikametinde k"}}},"roundabout turn":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},"exit roundabout":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},"exit rotary":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},turn:{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dnn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dnn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz git",name:"{way_name} zerinde dz git",destination:"{destination} istikametinde dz git"}},"use lane":{no_lanes:{default:"Dz devam edin"},default:{default:"{lane_instruction}"}}}}},{}],45:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"",northeast:" ",east:"",southeast:" ",south:"",southwest:" ",west:"",northwest:" "},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:""},lanes:{xo:" ",ox:" ",xox:"  ",oxo:"   "}},modes:{ferry:{default:" ",name:"  {way_name}",destination:"    {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ,  {distance}, {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"' {exit}"},arrive:{default:{default:"    {nth}  ",upcoming:"    {nth}  ",short:" ","short-upcoming":" ",named:"   {waypoint_name}"},left:{default:"    {nth}  ,  ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},right:{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"sharp left":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"sharp right":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"slight right":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"slight left":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},straight:{default:"    {nth}  ,     ",upcoming:"    {nth}  ,   ",short:" ","short-upcoming":" ",named:"   {waypoint_name}   "}},continue:{default:{default:" {modifier}",name:"{modifier}   {way_name}",destination:" {modifier}   {destination}",exit:" {modifier}  {way_name}"},straight:{default:"  ",name:"     {way_name}",destination:"   {destination}",distance:"   {distance}",namedistance:"   {way_name} {distance}"},"sharp left":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"sharp right":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"slight left":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"slight right":{default:"  ",name:"      {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"     {way_name}",destination:"    {destination}"}},depart:{default:{default:"  {direction}",name:"  {direction}  {way_name}",namedistance:"  {direction}  {way_name} {distance}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},straight:{default:"  ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:"    ",name:"   {way_name}   ",destination:"    {destination}   "}},fork:{default:{default:"   {modifier}",name:" {modifier}    {way_name}",destination:" {modifier}   {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"    {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"    {destination}"},"sharp left":{default:"    ",name:"    {way_name}",destination:"     {destination}"},"sharp right":{default:"    ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},merge:{default:{default:"   {modifier}",name:"   {modifier}  {way_name}",destination:"   {modifier}   {destination}"},straight:{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"  {way_name}",destination:"   {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"off ramp":{default:{default:"  ",name:"    {way_name}",destination:"     {destination}",exit:" ' {exit}",exit_destination:" ' {exit}   {destination}"},left:{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},right:{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"}},"on ramp":{default:{default:"  ",name:"    {way_name}",destination:"     {destination}"},left:{default:"   ",name:"     {way_name}",destination:"      {destination}"},right:{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}"}},rotary:{default:{default:{default:"  ",name:"    {way_name}",destination:"     {destination}"},name:{default:"  {rotary_name}",name:"  {rotary_name}    {way_name}",destination:"  {rotary_name}     {destination}"},exit:{default:"      {exit_number} '",name:"      {exit_number} '  {way_name}",destination:"      {exit_number} '   {destination}"},name_exit:{default:"  {rotary_name}    {exit_number} '",name:"  {rotary_name}    {exit_number} '  {way_name}",destination:"  {rotary_name}    {exit_number} '   {destination}"}}},roundabout:{default:{exit:{default:"      {exit_number} '",name:"      {exit_number} '  {way_name}",destination:"      {exit_number} '   {destination}"},default:{default:"  ",name:"    {way_name}",destination:"     {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name}",destination:"    {destination}"},right:{default:" ",name:"   {way_name}",destination:"    {destination}"},straight:{default:" ",name:"    {way_name}",destination:"     {destination}"}},"exit roundabout":{default:{default:" ",name:"   {way_name} ",destination:"    {destination}"}},"exit rotary":{default:{default:" ",name:"   {way_name} ",destination:"    {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name}",destination:"    {destination}"},right:{default:" ",name:"   {way_name}",destination:"    {destination}"},straight:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"use lane":{no_lanes:{default:"  "},default:{default:"{lane_instruction}"}}}}},{}],46:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"u tin",2:"th 2",3:"th 3",4:"th 4",5:"th 5",6:"th 6",7:"th 7",8:"th 8",9:"th 9",10:"th 10"},direction:{north:"bc",northeast:"ng bc",east:"ng",southeast:"ng nam",south:"nam",southwest:"ty nam",west:"ty",northwest:"ty bc"},modifier:{left:"tri",right:"phi","sharp left":"tri gt","sharp right":"phi gt","slight left":"tri nghing","slight right":"phi nghing",straight:"thng",uturn:"ngc"},lanes:{xo:"i bn phi",ox:"i bn tri",xox:"i vo gia",oxo:"i bn tri hay bn phi"}},modes:{ferry:{default:"Ln ph",name:"Ln ph {way_name}",destination:"Ln ph i {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ri {distance} na th {instruction_two}","two linked":"{instruction_one}, ri {instruction_two}","one in distance":"{distance} na th {instruction_one}","name and ref":"{name} ({ref})","exit with number":"li ra {exit}"},arrive:{default:{default:"n ni {nth}",upcoming:"n ni {nth}",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}"},left:{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},right:{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"sharp left":{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},"sharp right":{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"slight right":{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"slight left":{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},straight:{default:"n ni {nth}  trc mt",upcoming:"n ni {nth}  trc mt",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  trc mt"}},continue:{default:{default:"Quo {modifier}",name:"Quo {modifier}  chy tip trn {way_name}",destination:"Quo {modifier} v {destination}",exit:"Quo {modifier} vo {way_name}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}",distance:"Chy thng cho {distance}",namedistance:"Chy tip trn {way_name} cho {distance}"},"sharp left":{default:"Quo gt bn tri",name:"Quo gt bn tri  chy tip trn {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi",name:"Quo gt bn phi  chy tip trn {way_name}",destination:"Quo gt bn phi v {destination}"},"slight left":{default:"Nghing v bn tri",name:"Nghing v bn tri  chy tip trn {way_name}",destination:"Nghing v bn tri v {destination}"},"slight right":{default:"Nghing v bn phi",name:"Nghing v bn phi  chy tip trn {way_name}",destination:"Nghing v bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li trn {way_name}",destination:"Quo ngc v {destination}"}},depart:{default:{default:"i v hng {direction}",name:"i v hng {direction} trn {way_name}",namedistance:"i v hng {direction} trn {way_name} cho {distance}"}},"end of road":{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"},uturn:{default:"Quo ngc li ti cui ng",name:"Quo ngc vo {way_name} ti cui ng",destination:"Quo ngc v {destination} ti cui ng"}},fork:{default:{default:"i bn {modifier}  ng ba",name:"Gi bn {modifier} vo {way_name}",destination:"Gi bn {modifier} v {destination}"},"slight left":{default:"Nghing v bn tri  ng ba",name:"Gi bn tri vo {way_name}",destination:"Gi bn tri v {destination}"},"slight right":{default:"Nghing v bn phi  ng ba",name:"Gi bn phi vo {way_name}",destination:"Gi bn phi v {destination}"},"sharp left":{default:"Quo gt bn tri  ng ba",name:"Quo gt bn tri vo {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi  ng ba",name:"Quo gt bn phi vo {way_name}",destination:"Quo gt bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},merge:{default:{default:"Nhp sang {modifier}",name:"Nhp sang {modifier} vo {way_name}",destination:"Nhp sang {modifier} v {destination}"},straight:{default:"Nhp ng",name:"Nhp vo {way_name}",destination:"Nhp ng v {destination}"},"slight left":{default:"Nhp sang tri",name:"Nhp sang tri vo {way_name}",destination:"Nhp sang tri v {destination}"},"slight right":{default:"Nhp sang phi",name:"Nhp sang phi vo {way_name}",destination:"Nhp sang phi v {destination}"},"sharp left":{default:"Nhp sang tri",name:"Nhp sang tri vo {way_name}",destination:"Nhp sang tri v {destination}"},"sharp right":{default:"Nhp sang phi",name:"Nhp sang phi vo {way_name}",destination:"Nhp sang phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},"new name":{default:{default:"Chy tip bn {modifier}",name:"Chy tip bn {modifier} trn {way_name}",destination:"Chy tip bn {modifier} v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"},"sharp left":{default:"Quo gt bn tri",name:"Quo gt bn tri vo {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi",name:"Quo gt bn phi vo {way_name}",destination:"Quo gt bn phi v {destination}"},"slight left":{default:"Nghing v bn tri",name:"Nghing v bn tri vo {way_name}",destination:"Nghing v bn tri v {destination}"},"slight right":{default:"Nghing v bn phi",name:"Nghing v bn phi vo {way_name}",destination:"Nghing v bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},notification:{default:{default:"Chy tip bn {modifier}",name:"Chy tip bn {modifier} trn {way_name}",destination:"Chy tip bn {modifier} v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},"off ramp":{default:{default:"i ng nhnh",name:"i ng nhnh {way_name}",destination:"i ng nhnh v {destination}",exit:"i theo li ra {exit}",exit_destination:"i theo li ra {exit} v {destination}"},left:{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},right:{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"},"sharp left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},"sharp right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"},"slight left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},"slight right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"}},"on ramp":{default:{default:"i ng nhnh",name:"i ng nhnh {way_name}",destination:"i ng nhnh v {destination}"},left:{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},right:{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"},"sharp left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},"sharp right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"},"slight left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},"slight right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"}},rotary:{default:{default:{default:"i vo bng binh",name:"i vo bng binh v ra ti {way_name}",destination:"i vo bng binh v ra v {destination}"},name:{default:"i vo {rotary_name}",name:"i vo {rotary_name} v ra ti {way_name}",destination:"i v {rotary_name} v ra v {destination}"},exit:{default:"i vo bng binh v ra ti ng {exit_number}",name:"i vo bng binh v ra ti ng {exit_number} tc {way_name}",destination:"i vo bng binh v ra ti ng {exit_number} v {destination}"},name_exit:{default:"i vo {rotary_name} v ra ti ng {exit_number}",name:"i vo {rotary_name} v ra ti ng {exit_number} tc {way_name}",destination:"i vo {rotary_name} v ra ti ng {exit_number} v {destination}"}}},roundabout:{default:{exit:{default:"i vo bng binh v ra ti ng {exit_number}",name:"i vo bng binh v ra ti ng {exit_number} tc {way_name}",destination:"i vo bng binh v ra ti ng {exit_number} v {destination}"},default:{default:"i vo bng binh",name:"i vo bng binh v ra ti {way_name}",destination:"i vo bng binh v ra v {destination}"}}},"roundabout turn":{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},left:{default:"Quo tri",name:"Quo tri vo {way_name}",destination:"Quo tri v {destination}"},right:{default:"Quo phi",name:"Quo phi vo {way_name}",destination:"Quo phi v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"}},"exit roundabout":{default:{default:"Ra bng binh",name:"Ra bng binh vo {way_name}",destination:"Ra bng binh v {destination}"}},"exit rotary":{default:{default:"Ra bng binh",name:"Ra bng binh vo {way_name}",destination:"Ra bng binh v {destination}"}},turn:{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},left:{default:"Quo tri",name:"Quo tri vo {way_name}",destination:"Quo tri v {destination}"},right:{default:"Quo phi",name:"Quo phi vo {way_name}",destination:"Quo phi v {destination}"},straight:{default:"Chy thng",name:"Chy thng vo {way_name}",destination:"Chy thng v {destination}"}},"use lane":{no_lanes:{default:"Chy thng"},default:{default:"{lane_instruction}"}}}}},{}],47:[function(s,e,t){e.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:""},lanes:{xo:"",ox:"",xox:"",oxo:""}},modes:{ferry:{default:"",name:"{way_name}",destination:"{destination}"}},phrase:{"two linked by distance":"{instruction_one}{distance}{instruction_two}","two linked":"{instruction_one}{instruction_two}","one in distance":"{distance}{instruction_one}","name and ref":"{name}{ref}","exit with number":"{exit}"},arrive:{default:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},left:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},right:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"sharp left":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"sharp right":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"slight right":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"slight left":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},straight:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"}},continue:{default:{default:"{modifier}",name:"{way_name}{modifier}",destination:"{modifier}{destination}",exit:"{modifier}{way_name}"},straight:{default:"",name:"{way_name}",destination:"{destination}",distance:"{distance}",namedistance:"{way_name}{distance}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},depart:{default:{default:"{direction}",name:"{direction}{way_name}",namedistance:"{direction}{way_name}{distance}"}},"end of road":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},fork:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},merge:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},"new name":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},notification:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},"off ramp":{default:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"}},"on ramp":{default:{default:"",name:"{way_name}",destination:"{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"}},rotary:{default:{default:{default:"",name:"{way_name}",destination:"{destination}"},name:{default:"{rotary_name}",name:"{rotary_name}{way_name}",destination:"{rotary_name}{destination}"},exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},name_exit:{default:"{rotary_name}{exit_number}",name:"{rotary_name}{exit_number}{way_name}",destination:"{rotary_name}{exit_number}{destination}"}}},roundabout:{default:{exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},default:{default:"",name:"{way_name}",destination:"{destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"exit roundabout":{default:{default:"",name:"{way_name}",destination:"{destination}"}},"exit rotary":{default:{default:"",name:"{way_name}",destination:"{destination}"}},turn:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"use lane":{no_lanes:{default:""},default:{default:"{lane_instruction}"}}}}},{}],48:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(a,o,r,d){n.setOptions(this,d),this._elem=a,this._resultFn=d.resultFn?n.Util.bind(d.resultFn,d.resultContext):null,this._autocomplete=d.autocompleteFn?n.Util.bind(d.autocompleteFn,d.autocompleteContext):null,this._selectFn=n.Util.bind(o,r),this._container=n.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=n.DomUtil.create("table","",this._container),n.DomEvent.addListener(this._elem,"input",this._keyPressed,this),n.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),n.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),n.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){n.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var a=this._elem.getBoundingClientRect();if(!this._container.parentElement){var o=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,r=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._container.style.left=a.left+o+"px",this._container.style.top=a.bottom+r+"px",this._container.style.width=a.right-a.left+"px",document.body.appendChild(this._container)}n.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(a){var o,r,d,g;for(delete this._selection,this._results=a;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(o=0;o<a.length;o++)r=n.DomUtil.create("tr","",this._resultTable),r.setAttribute("data-result-index",o),d=n.DomUtil.create("td","",r),g=document.createTextNode(a[o].name),d.appendChild(g),n.DomEvent.addListener(d,"mousedown",n.DomEvent.preventDefault),n.DomEvent.addListener(d,"click",this._createClickListener(a[o]));o||(r=n.DomUtil.create("tr","",this._resultTable),d=n.DomUtil.create("td","leaflet-routing-geocoder-no-results",r),d.innerHTML=this.options.noResultsMessage),this._open(),a.length>0&&this._select(1)},_createClickListener:function(a){var o=this._resultSelected(a);return n.bind(function(){this._elem.blur(),o()},this)},_resultSelected:function(a){return n.bind(function(){this.close(),this._elem.value=a.name,this._lastCompletedText=a.name,this._selectFn(a)},this)},_keyPressed:function(a){var o;if(this._isOpen&&a.keyCode===13&&this._selection){o=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[o])(),n.DomEvent.preventDefault(a);return}if(a.keyCode===13){n.DomEvent.preventDefault(a),this._complete(this._resultFn,!0);return}if(this._autocomplete&&document.activeElement===this._elem){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(n.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout);return}this._unselect()},_select:function(a){var o=this._selection;o&&(n.DomUtil.removeClass(o.firstChild,"leaflet-routing-geocoder-selected"),o=o[a>0?"nextSibling":"previousSibling"]),o||(o=this._resultTable[a>0?"firstChild":"lastChild"]),o&&(n.DomUtil.addClass(o.firstChild,"leaflet-routing-geocoder-selected"),this._selection=o)},_unselect:function(){this._selection&&n.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(a){if(this._isOpen)switch(a.keyCode){case 27:this.close(),n.DomEvent.preventDefault(a);return;case 38:this._select(-1),n.DomEvent.preventDefault(a);return;case 40:this._select(1),n.DomEvent.preventDefault(a);return}},_complete:function(a,o){var r=this._elem.value;function d(g){this._lastCompletedText=r,o&&g.length===1?this._resultSelected(g[0])():this._setResults(g)}r&&(r!==this._lastCompletedText?a(r,d,this):o&&d.call(this,this._results))}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],49:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,a=s("./itinerary"),o=s("./line"),r=s("./plan"),d=s("./osrm-v1");e.exports=a.extend({options:{fitSelectedRoutes:"smart",routeLine:function(g,x){return new o(g,x)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",showAlternatives:!1,defaultErrorHandler:function(g){console.error("Routing error:",g.error)}},initialize:function(g){n.Util.setOptions(this,g),this._router=this.options.router||new d(g),this._plan=this.options.plan||new r(this.options.waypoints,g),this._requestCount=0,a.prototype.initialize.call(this,g),this.on("routeselected",this._routeSelected,this),this.options.defaultErrorHandler&&this.on("routingerror",this.options.defaultErrorHandler),this._plan.on("waypointschanged",this._onWaypointsChanged,this),g.routeWhileDragging&&this._setupRouteDragging()},_onZoomEnd:function(){if(!(!this._selectedRoute||!this._router.requiresMoreDetail)){var g=this._map;this._router.requiresMoreDetail(this._selectedRoute,g.getZoom(),g.getBounds())&&this.route({callback:n.bind(function(x,v){var k;if(!x){for(k=0;k<v.length;k++)this._routes[k].properties=v[k].properties;this._updateLineCallback(x,v)}},this),simplifyGeometry:!1,geometryOnly:!0})}},onAdd:function(g){this.options.autoRoute&&this.route();var x=a.prototype.onAdd.call(this,g);return this._map=g,this._map.addLayer(this._plan),this._map.on("zoomend",this._onZoomEnd,this),this._plan.options.geocoder&&x.insertBefore(this._plan.createGeocoders(),x.firstChild),x},onRemove:function(g){if(g.off("zoomend",this._onZoomEnd,this),this._line&&g.removeLayer(this._line),g.removeLayer(this._plan),this._alternatives&&this._alternatives.length>0)for(var x=0,v=this._alternatives.length;x<v;x++)g.removeLayer(this._alternatives[x]);return a.prototype.onRemove.call(this,g)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(g){return this._plan.setWaypoints(g),this},spliceWaypoints:function(){var g=this._plan.spliceWaypoints.apply(this._plan,arguments);return g},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(g){var x=this._selectedRoute=g.route,v=this.options.showAlternatives&&g.alternatives,k=this.options.fitSelectedRoutes,E=k==="smart"&&!this._waypointsVisible()||k!=="smart"&&k;this._updateLines({route:x,alternatives:v}),E&&this._map.fitBounds(this._line.getBounds()),this.options.waypointMode==="snap"&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(x.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var g=this.getWaypoints(),x,v,k,E,F;try{for(x=this._map.getSize(),E=0;E<g.length;E++)F=this._map.latLngToLayerPoint(g[E].latLng),v?v.extend(F):v=n.bounds([F]);return k=v.getSize(),(k.x>x.x/5||k.y>x.y/5)&&this._waypointsInViewport()}catch{return!1}},_waypointsInViewport:function(){var g=this.getWaypoints(),x,v;try{x=this._map.getBounds()}catch{return!1}for(v=0;v<g.length;v++)if(x.contains(g[v].latLng))return!0;return!1},_updateLines:function(g){var x=this.options.addWaypoints!==void 0?this.options.addWaypoints:!0;this._clearLines(),this._alternatives=[],g.alternatives&&g.alternatives.forEach(function(v,k){this._alternatives[k]=this.options.routeLine(v,n.extend({isAlternative:!0},this.options.altLineOptions||this.options.lineOptions)),this._alternatives[k].addTo(this._map),this._hookAltEvents(this._alternatives[k])},this),this._line=this.options.routeLine(g.route,n.extend({addWaypoints:x,extendToWaypoints:this.options.waypointMode==="connect"},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(g){g.on("linetouched",function(x){this._plan.dragNewWaypoint(x)},this)},_hookAltEvents:function(g){g.on("linetouched",function(x){var v=this._routes.slice(),k=v.splice(x.target._route.routesIndex,1)[0];this.fire("routeselected",{route:k,alternatives:v})},this)},_onWaypointsChanged:function(g){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLines(),this._clearAlts()),this.fire("waypointschanged",{waypoints:g.waypoints})},_setupRouteDragging:function(){var g=0,x;this._plan.on("waypointdrag",n.bind(function(v){x=v.waypoints,g||(g=setTimeout(n.bind(function(){this.route({waypoints:x,geometryOnly:!0,callback:n.bind(this._updateLineCallback,this)}),g=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){g&&(clearTimeout(g),g=void 0),this.route()},this)},_updateLineCallback:function(g,x){if(g)g.type!=="abort"&&this._clearLines();else{x=x.slice();var v=x.splice(this._selectedRoute.routesIndex,1)[0];this._updateLines({route:v,alternatives:this.options.showAlternatives?x:[]})}},route:function(g){var x=++this._requestCount,v;this._pendingRequest&&this._pendingRequest.abort&&(this._pendingRequest.abort(),this._pendingRequest=null),g=g||{},this._plan.isReady()&&(this.options.useZoomParameter&&(g.z=this._map&&this._map.getZoom()),v=g&&g.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:v}),this._pendingRequest=this._router.route(v,function(k,E){if(this._pendingRequest=null,g.callback)return g.callback.call(this,k,E);if(x===this._requestCount){if(this._clearLines(),this._clearAlts(),k&&k.type!=="abort"){this.fire("routingerror",{error:k});return}if(E.forEach(function(O,N){O.routesIndex=N}),!g.geometryOnly)this.fire("routesfound",{waypoints:v,routes:E}),this.setAlternatives(E);else{var F=E.splice(0,1)[0];this._routeSelected({route:F,alternatives:E})}}},this,g))},_clearLines:function(){if(this._line&&(this._map.removeLayer(this._line),delete this._line),this._alternatives&&this._alternatives.length){for(var g in this._alternatives)this._map.removeLayer(this._alternatives[g]);this._alternatives=[]}}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./itinerary":55,"./line":56,"./osrm-v1":59,"./plan":60}],50:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.Control.extend({options:{header:"Routing error",formatMessage:function(a){return a.status<0?"Calculating the route caused an error. Technical description follows: <code><pre>"+a.message+"</pre></code":"The route could not be calculated. "+a.message}},initialize:function(a,o){n.Control.prototype.initialize.call(this,o),a.on("routingerror",n.bind(function(r){this._element&&(this._element.children[1].innerHTML=this.options.formatMessage(r.error),this._element.style.visibility="visible")},this)).on("routingstart",n.bind(function(){this._element&&(this._element.style.visibility="hidden")},this))},onAdd:function(){var a;return this._element=n.DomUtil.create("div","leaflet-bar leaflet-routing-error"),this._element.style.visibility="hidden",a=n.DomUtil.create("h3",null,this._element),n.DomUtil.create("span",null,this._element),a.innerHTML=this.options.header,this._element},onRemove:function(){delete this._element}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],51:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,a=s("./localization");e.exports=n.Class.extend({options:{units:"metric",unitNames:null,language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(o){n.setOptions(this,o);var r=n.Util.isArray(this.options.language)?this.options.language:[this.options.language,"en"];this._localization=new a(r)},formatDistance:function(o,r){var d=this.options.unitNames||this._localization.localize("units"),g=r<=0,x=g?function(F){return F}:n.bind(this._round,this),v,k,E;return this.options.units==="imperial"?(k=o/.9144,k>=1e3?E={value:x(o/1609.344,r),unit:d.miles}:E={value:x(k,r),unit:d.yards}):(v=x(o,r),E={value:v>=1e3?v/1e3:v,unit:v>=1e3?d.kilometers:d.meters}),g&&(E.value=E.value.toFixed(-r)),n.Util.template(this.options.distanceTemplate,E)},_round:function(o,r){var d=r||this.options.roundingSensitivity,g=Math.pow(10,(Math.floor(o/d)+"").length-1),x=Math.floor(o/g),v=x>5?g:g/2;return Math.round(o/v)*v},formatTime:function(o){var r=this.options.unitNames||this._localization.localize("units");return o=Math.round(o/30)*30,o>86400?Math.round(o/3600)+" "+r.hours:o>3600?Math.floor(o/3600)+" "+r.hours+" "+Math.round(o%3600/60)+" "+r.minutes:o>300?Math.round(o/60)+" "+r.minutes:o>60?Math.floor(o/60)+" "+r.minutes+(o%60!==0?" "+o%60+" "+r.seconds:""):o+" "+r.seconds},formatInstruction:function(o,r){return o.text===void 0?this.capitalize(n.Util.template(this._getInstructionTemplate(o,r),n.extend({},o,{exitStr:o.exit?this._localization.localize("formatOrder")(o.exit):"",dir:this._localization.localize(["directions",o.direction]),modifier:this._localization.localize(["directions",o.modifier])}))):o.text},getIconName:function(o,r){switch(o.type){case"Head":if(r===0)return"depart";break;case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}switch(o.modifier){case"Straight":return"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":case"Uturn":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left"}},capitalize:function(o){return o.charAt(0).toUpperCase()+o.substring(1)},_getInstructionTemplate:function(o,r){var d=o.type==="Straight"?r===0?"Head":"Continue":o.type,g=this._localization.localize(["instructions",d]);return g||(g=[this._localization.localize(["directions",d])," "+this._localization.localize(["instructions","Onto"])]),g[0]+(g.length>1&&o.road?g[1]:"")}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./localization":57}],52:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,a=s("./autocomplete"),o=s("./localization");function r(d){d.setSelectionRange?d.setSelectionRange(0,9999):d.select()}e.exports=n.Class.extend({includes:typeof n.Evented<"u"&&n.Evented.prototype||n.Mixin.Events,options:{createGeocoder:function(d,g,x){var v=n.DomUtil.create("div","leaflet-routing-geocoder"),k=n.DomUtil.create("input","",v),E=x.addWaypoints?n.DomUtil.create("span","leaflet-routing-remove-waypoint",v):void 0;return k.disabled=!x.addWaypoints,{container:v,input:k,closeButton:E}},geocoderPlaceholder:function(d,g,x){var v=new o(x.options.language).localize("ui");return d===0?v.startPlaceholder:d<g-1?n.Util.template(v.viaPlaceholder,{viaNumber:d}):v.endPlaceholder},geocoderClass:function(){return""},waypointNameFallback:function(d){var g=d.lat<0?"S":"N",x=d.lng<0?"W":"E",v=(Math.round(Math.abs(d.lat)*1e4)/1e4).toString(),k=(Math.round(Math.abs(d.lng)*1e4)/1e4).toString();return g+v+", "+x+k},maxGeocoderTolerance:200,autocompleteOptions:{},language:"en"},initialize:function(d,g,x,v){n.setOptions(this,v);var k=this.options.createGeocoder(g,x,this.options),E=k.closeButton,F=k.input;F.setAttribute("placeholder",this.options.geocoderPlaceholder(g,x,this)),F.className=this.options.geocoderClass(g,x),this._element=k,this._waypoint=d,this.update(),F.value=d.name,n.DomEvent.addListener(F,"click",function(){r(this)},F),E&&n.DomEvent.addListener(E,"click",function(){this.fire("delete",{waypoint:this._waypoint})},this),new a(F,function(O){F.value=O.name,d.name=O.name,d.latLng=O.center,this.fire("geocoded",{waypoint:d,value:O})},this,n.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions))},getContainer:function(){return this._element.container},setValue:function(d){this._element.input.value=d},update:function(d){var g=this._waypoint,x;g.name=g.name||"",g.latLng&&(d||!g.name)&&(x=this.options.waypointNameFallback(g.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(g.latLng,67108864,function(v){v.length>0&&v[0].center.distanceTo(g.latLng)<this.options.maxGeocoderTolerance?g.name=v[0].name:g.name=x,this._update()},this):(g.name=x,this._update()))},focus:function(){var d=this._element.input;d.focus(),r(d)},_update:function(){var d=this._waypoint,g=d&&d.name?d.name:"";this.setValue(g),this.fire("reversegeocoded",{waypoint:d,value:g})}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./autocomplete":48,"./localization":57}],53:[function(s,e,t){(function(i){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,a=s("./control"),o=s("./itinerary"),r=s("./line"),d=s("./osrm-v1"),g=s("./plan"),x=s("./waypoint"),v=s("./autocomplete"),k=s("./formatter"),E=s("./geocoder-element"),F=s("./localization"),O=s("./itinerary-builder"),N=s("./mapbox"),$=s("./error-control");n.routing={control:function(X){return new a(X)},itinerary:function(X){return o(X)},line:function(X,K){return new r(X,K)},plan:function(X,K){return new g(X,K)},waypoint:function(X,K,ie){return new x(X,K,ie)},osrmv1:function(X){return new d(X)},localization:function(X){return new F(X)},formatter:function(X){return new k(X)},geocoderElement:function(X,K,ie,ee){return new n.Routing.GeocoderElement(X,K,ie,ee)},itineraryBuilder:function(X){return new O(X)},mapbox:function(X,K){return new N(X,K)},errorControl:function(X,K){return new $(X,K)},autocomplete:function(X,K,ie,ee){return new v(X,K,ie,ee)}},e.exports=n.Routing={Control:a,Itinerary:o,Line:r,OSRMv1:d,Plan:g,Waypoint:x,Autocomplete:v,Formatter:k,GeocoderElement:E,Localization:F,Formatter:k,ItineraryBuilder:O,control:n.routing.control,itinerary:n.routing.itinerary,line:n.routing.line,plan:n.routing.plan,waypoint:n.routing.waypoint,osrmv1:n.routing.osrmv1,geocoderElement:n.routing.geocoderElement,mapbox:n.routing.mapbox,errorControl:n.routing.errorControl}}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./autocomplete":48,"./control":49,"./error-control":50,"./formatter":51,"./geocoder-element":52,"./itinerary":55,"./itinerary-builder":54,"./line":56,"./localization":57,"./mapbox":58,"./osrm-v1":59,"./plan":60,"./waypoint":61}],54:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.Class.extend({options:{containerClassName:""},initialize:function(a){n.setOptions(this,a)},createContainer:function(a){var o=n.DomUtil.create("table",(a||"")+" "+this.options.containerClassName),r=n.DomUtil.create("colgroup","",o);return n.DomUtil.create("col","leaflet-routing-instruction-icon",r),n.DomUtil.create("col","leaflet-routing-instruction-text",r),n.DomUtil.create("col","leaflet-routing-instruction-distance",r),o},createStepsContainer:function(){return n.DomUtil.create("tbody","")},createStep:function(a,o,r,d){var g=n.DomUtil.create("tr","",d),x,v;return v=n.DomUtil.create("td","",g),x=n.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+r,v),v.appendChild(x),v=n.DomUtil.create("td","",g),v.appendChild(document.createTextNode(a)),v=n.DomUtil.create("td","",g),v.appendChild(document.createTextNode(o)),g}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],55:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,a=s("./formatter"),o=s("./itinerary-builder");e.exports=n.Control.extend({includes:typeof n.Evented<"u"&&n.Evented.prototype||n.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",totalDistanceRoundingSensitivity:-1,show:!0,collapsible:void 0,collapseBtn:function(r){var d=n.DomUtil.create("span",r.options.collapseBtnClass);n.DomEvent.on(d,"click",r._toggle,r),r._container.insertBefore(d,r._container.firstChild)},collapseBtnClass:"leaflet-routing-collapse-btn"},initialize:function(r){n.setOptions(this,r),this._formatter=this.options.formatter||new a(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new o({containerClassName:this.options.itineraryClassName})},onAdd:function(r){var d=this.options.collapsible;return d=d||d===void 0&&r.getSize().x<=640,this._container=n.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide ")+(d?"leaflet-routing-collapsible ":"")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),n.DomEvent.disableClickPropagation(this._container),n.DomEvent.addListener(this._container,"mousewheel",function(g){n.DomEvent.stopPropagation(g)}),d&&this.options.collapseBtn(this),this._container},onRemove:function(){},createAlternativesContainer:function(){return n.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(r){var d,g,x;for(this._clearAlts(),this._routes=r,d=0;d<this._routes.length;d++)g=this._routes[d],x=this._createAlternative(g,d),this._altContainer.appendChild(x),this._altElements.push(x);return this._selectRoute({route:this._routes[0],alternatives:this._routes.slice(1)}),this},show:function(){n.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){n.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_toggle:function(){var r=n.DomUtil.hasClass(this._container,"leaflet-routing-container-hide");this[r?"show":"hide"]()},_createAlternative:function(r,d){var g=n.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(d>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),x=this.options.summaryTemplate,v=n.extend({name:r.name,distance:this._formatter.formatDistance(r.summary.totalDistance,this.options.totalDistanceRoundingSensitivity),time:this._formatter.formatTime(r.summary.totalTime)},r);return g.innerHTML=typeof x=="function"?x(v):n.Util.template(x,v),n.DomEvent.addListener(g,"click",this._onAltClicked,this),this.on("routeselected",this._selectAlt,this),g.appendChild(this._createItineraryContainer(r)),g},_clearAlts:function(){for(var r=this._altContainer;r&&r.firstChild;)r.removeChild(r.firstChild);this._altElements=[]},_createItineraryContainer:function(r){var d=this._itineraryBuilder.createContainer(),g=this._itineraryBuilder.createStepsContainer(),x,v,k,E,F,O;for(d.appendChild(g),x=0;x<r.instructions.length;x++)v=r.instructions[x],F=this._formatter.formatInstruction(v,x),E=this._formatter.formatDistance(v.distance),O=this._formatter.getIconName(v,x),k=this._itineraryBuilder.createStep(F,E,O,g),v.index&&this._addRowListeners(k,r.coordinates[v.index]);return d},_addRowListeners:function(r,d){n.DomEvent.addListener(r,"mouseover",function(){this._marker=n.circleMarker(d,this.options.pointMarkerStyle).addTo(this._map)},this),n.DomEvent.addListener(r,"mouseout",function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)},this),n.DomEvent.addListener(r,"click",function(g){this._map.panTo(d),n.DomEvent.stopPropagation(g)},this)},_onAltClicked:function(r){for(var d=r.target||window.event.srcElement;!n.DomUtil.hasClass(d,"leaflet-routing-alt");)d=d.parentElement;var g=this._altElements.indexOf(d),x=this._routes.slice(),v=x.splice(g,1)[0];this.fire("routeselected",{route:v,alternatives:x})},_selectAlt:function(r){var d,g,x,v;if(d=this._altElements[r.route.routesIndex],n.DomUtil.hasClass(d,"leaflet-routing-alt-minimized"))for(g=0;g<this._altElements.length;g++)x=this._altElements[g],v=g===r.route.routesIndex?"removeClass":"addClass",n.DomUtil[v](x,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&n.DomUtil[v](x,this.options.minimizedClassName),g!==r.route.routesIndex&&(x.scrollTop=0);n.DomEvent.stop(r)},_selectRoute:function(r){this._marker&&(this._map.removeLayer(this._marker),delete this._marker),this.fire("routeselected",r)}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./formatter":51,"./itinerary-builder":54}],56:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.LayerGroup.extend({includes:typeof n.Evented<"u"&&n.Evented.prototype||n.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(a,o){n.setOptions(this,o),n.LayerGroup.prototype.initialize.call(this,o),this._route=a,this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(a.coordinates,this.options.styles,this.options.addWaypoints)},getBounds:function(){return n.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var a=this._route.inputWaypoints,o=[],r;for(r=0;r<a.length;r++)o.push(this._findClosestRoutePoint(a[r].latLng));return o},_findClosestRoutePoint:function(a){var o=Number.MAX_VALUE,r,d,g;for(d=this._route.coordinates.length-1;d>=0;d--)g=a.distanceTo(this._route.coordinates[d]),g<o&&(r=d,o=g);return r},_extendToWaypoints:function(){var a=this._route.inputWaypoints,o=this._getWaypointIndices(),r,d,g;for(r=0;r<a.length;r++)d=a[r].latLng,g=n.latLng(this._route.coordinates[o[r]]),d.distanceTo(g)>this.options.missingRouteTolerance&&this._addSegment([d,g],this.options.missingRouteStyles)},_addSegment:function(a,o,r){var d,g;for(d=0;d<o.length;d++)g=n.polyline(a,o[d]),this.addLayer(g),r&&g.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(a){for(var o=this._getWaypointIndices(),r=o.length-1;r>=0&&o[r]>a;)r--;return r},_onLineTouched:function(a){var o=this._findNearestWpBefore(this._findClosestRoutePoint(a.latlng));this.fire("linetouched",{afterIndex:o,latlng:a.latlng}),n.DomEvent.stop(a)},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],57:[function(s,e,t){(function(){var i={directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste",SlightRight:"leve giro a la derecha",Right:"derecha",SharpRight:"giro pronunciado a la derecha",SlightLeft:"leve giro a la izquierda",Left:"izquierda",SharpLeft:"giro pronunciado a la izquierda",Uturn:"media vuelta"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],TurnAround:["Dar vuelta"],WaypointReached:["Lleg a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"],Fork:["En el cruce gira a {modifier}"," hacia {road}"],Merge:["Incorprate {modifier}"," hacia {road}"],OnRamp:["Gira {modifier} en la salida"," hacia {road}"],OffRamp:["Toma la salida {modifier}"," hacia {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," hacia {road}"],Onto:"hacia {road}"},formatOrder:function(a){return a+""},ui:{startPlaceholder:"Inicio",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Destino"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}};L.Routing=L.Routing||{};var n=L.Class.extend({initialize:function(a){this._langs=L.Util.isArray(a)?a.slice():[a,"en"];for(var o=0,r=this._langs.length;o<r;o++){var d=/([A-Za-z]+)/.exec(this._langs[o])[1];if(!n[this._langs[o]])if(n[d])this._langs[o]=d;else throw new Error('No localization for language "'+this._langs[o]+'".')}},localize:function(a){var o,r,d;a=L.Util.isArray(a)?a:[a];for(var g=0,x=this._langs.length;g<x;g++){o=n[this._langs[g]];for(var v=0,k=a.length;o&&v<k;v++)r=a[v],d=o[r],o=d;if(d)return d}}});e.exports=L.extend(n,{en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest",SlightRight:"slight right",Right:"right",SharpRight:"sharp right",SlightLeft:"slight left",Left:"left",SharpLeft:"sharp left",Uturn:"Turn around"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"],TurnAround:["Turn around"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"],Fork:["At the fork, turn {modifier}"," onto {road}"],Merge:["Merge {modifier}"," onto {road}"],OnRamp:["Turn {modifier} on the ramp"," onto {road}"],OffRamp:["Take the ramp on the {modifier}"," onto {road}"],EndOfRoad:["Turn {modifier} at the end of the road"," onto {road}"],Onto:"onto {road}"},formatOrder:function(a){var o=a%10-1,r=["st","nd","rd"];return r[o]?a+r[o]:a+"th"},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"End"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"Sdosten",S:"Sden",SW:"Sdwesten",W:"Westen",NW:"Nordwesten",SlightRight:"leicht rechts",Right:"rechts",SharpRight:"scharf rechts",SlightLeft:"leicht links",Left:"links",SharpLeft:"scharf links",Uturn:"Wenden"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"],Fork:["An der Kreuzung {modifier}"," auf {road}"],Merge:["Fahren Sie {modifier} weiter"," auf {road}"],OnRamp:["Fahren Sie {modifier} auf die Auffahrt"," auf {road}"],OffRamp:["Nehmen Sie die Ausfahrt {modifier}"," auf {road}"],EndOfRoad:["Fahren Sie {modifier} am Ende der Strae"," auf {road}"],Onto:"auf {road}"},formatOrder:function(a){return a+"."},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Ziel"}},sv:{directions:{N:"norr",NE:"nordost",E:"st",SE:"sydost",S:"syd",SW:"sydvst",W:"vst",NW:"nordvst",SlightRight:"svagt hger",Right:"hger",SharpRight:"skarpt hger",SlightLeft:"svagt vnster",Left:"vnster",SharpLeft:"skarpt vnster",Uturn:"Vnd"},instructions:{Head:["k t {dir}"," till {road}"],Continue:["Fortstt {dir}"],SlightRight:["Svagt hger"," till {road}"],Right:["Svng hger"," till {road}"],SharpRight:["Skarpt hger"," till {road}"],TurnAround:["Vnd"],SharpLeft:["Skarpt vnster"," till {road}"],Left:["Svng vnster"," till {road}"],SlightLeft:["Svagt vnster"," till {road}"],WaypointReached:["Viapunkt ndd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans ml"],Fork:["Tag av {modifier}"," till {road}"],Merge:["Anslut {modifier} "," till {road}"],OnRamp:["Tag pfarten {modifier}"," till {road}"],OffRamp:["Tag avfarten {modifier}"," till {road}"],EndOfRoad:["Svng {modifier} vid vgens slut"," till {road}"],Onto:"till {road}"},formatOrder:function(a){return["frsta","andra","tredje","fjrde","femte","sjtte","sjunde","ttonde","nionde","tionde"][a-1]},ui:{startPlaceholder:"Frn",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Till"}},es:i,sp:i,nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(a){return a===1||a>=20?a+"ste":a+"de"},ui:{startPlaceholder:"Vertrekpunt",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Bestemming"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["Lgrement  droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Compltement  droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Compltement  gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["Lgrement  gauche"," sur {road}"],WaypointReached:["Point d'tape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(a){return a+""},ui:{startPlaceholder:"Dpart",viaPlaceholder:"Intermdiaire {viaNumber}",endPlaceholder:"Arrive"}},it:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ovest",W:"ovest",NW:"nord-ovest"},instructions:{Head:["Dritto verso {dir}"," su {road}"],Continue:["Continuare verso {dir}"," su {road}"],SlightRight:["Mantenere la destra"," su {road}"],Right:["A destra"," su {road}"],SharpRight:["Strettamente a destra"," su {road}"],TurnAround:["Fare inversione di marcia"],SharpLeft:["Strettamente a sinistra"," su {road}"],Left:["A sinistra"," sur {road}"],SlightLeft:["Mantenere la sinistra"," su {road}"],WaypointReached:["Punto di passaggio raggiunto"],Roundabout:["Alla rotonda, prendere la {exitStr} uscita"],DestinationReached:["Destinazione raggiunta"]},formatOrder:function(a){return a+""},ui:{startPlaceholder:"Partenza",viaPlaceholder:"Intermedia {viaNumber}",endPlaceholder:"Destinazione"}},pt:{directions:{N:"norte",NE:"nordeste",E:"leste",SE:"sudeste",S:"sul",SW:"sudoeste",W:"oeste",NW:"noroeste",SlightRight:"curva ligeira a direita",Right:"direita",SharpRight:"curva fechada a direita",SlightLeft:"ligeira a esquerda",Left:"esquerda",SharpLeft:"curva fechada a esquerda",Uturn:"Meia volta"},instructions:{Head:["Siga {dir}"," na {road}"],Continue:["Continue {dir}"," na {road}"],SlightRight:["Curva ligeira a direita"," na {road}"],Right:["Curva a direita"," na {road}"],SharpRight:["Curva fechada a direita"," na {road}"],TurnAround:["Retorne"],SharpLeft:["Curva fechada a esquerda"," na {road}"],Left:["Curva a esquerda"," na {road}"],SlightLeft:["Curva ligueira a esquerda"," na {road}"],WaypointReached:["Ponto de interesse atingido"],Roundabout:["Pegue a {exitStr} sada na rotatria"," na {road}"],DestinationReached:["Destino atingido"],Fork:["Na encruzilhada, vire a {modifier}"," na {road}"],Merge:["Entre  {modifier}"," na {road}"],OnRamp:["Vire {modifier} na rampa"," na {road}"],OffRamp:["Entre na rampa na {modifier}"," na {road}"],EndOfRoad:["Vire {modifier} no fim da rua"," na {road}"],Onto:"na {road}"},formatOrder:function(a){return a+""},ui:{startPlaceholder:"Origem",viaPlaceholder:"Intermdio {viaNumber}",endPlaceholder:"Destino"}},sk:{directions:{N:"sever",NE:"serverovchod",E:"vchod",SE:"juhovchod",S:"juh",SW:"juhozpad",W:"zpad",NW:"serverozpad"},instructions:{Head:["Mierte na {dir}"," na {road}"],Continue:["Pokraujte na {dir}"," na {road}"],SlightRight:["Mierne doprava"," na {road}"],Right:["Doprava"," na {road}"],SharpRight:["Prudko doprava"," na {road}"],TurnAround:["Otote sa"],SharpLeft:["Prudko doava"," na {road}"],Left:["Doava"," na {road}"],SlightLeft:["Mierne doava"," na {road}"],WaypointReached:["Ste v prejazdovom bode."],Roundabout:["Odbote na {exitStr} vjazde"," na {road}"],DestinationReached:["Prili ste do ciea."]},formatOrder:function(a){var o=a%10-1,r=[".",".","."];return r[o]?a+r[o]:a+"."},ui:{startPlaceholder:"Zaiatok",viaPlaceholder:"Cez {viaNumber}",endPlaceholder:"Koniec"}},el:{directions:{N:"",NE:"",E:"",SE:"",S:"",SW:"",W:"",NW:""},instructions:{Head:[" {dir}","  {road}"],Continue:[" {dir}","  {road}"],SlightRight:[" ","  {road}"],Right:["","  {road}"],SharpRight:["  ","  {road}"],TurnAround:[" "],SharpLeft:["  ","  {road}"],Left:["","  {road}"],SlightLeft:[" ","  {road}"],WaypointReached:["   "],Roundabout:["  {exitStr}    ","  {road}"],DestinationReached:["   "]},formatOrder:function(a){return a+""},ui:{startPlaceholder:"",viaPlaceholder:" {viaNumber}",endPlaceholder:""}},ca:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-oest",W:"oest",NW:"nord-oest",SlightRight:"lleu gir a la dreta",Right:"dreta",SharpRight:"gir pronunciat a la dreta",SlightLeft:"gir pronunciat a l'esquerra",Left:"esquerra",SharpLeft:"lleu gir a l'esquerra",Uturn:"mitja volta"},instructions:{Head:["Recte {dir}"," sobre {road}"],Continue:["Continuar {dir}"],TurnAround:["Donar la volta"],WaypointReached:["Ha arribat a un punt del cam"],Roundabout:["Agafar {exitStr} sortida a la rotonda"," a {road}"],DestinationReached:["Arribada al dest"],Fork:["A la crulla gira a la {modifier}"," cap a {road}"],Merge:["Incorpora't {modifier}"," a {road}"],OnRamp:["Gira {modifier} a la sortida"," cap a {road}"],OffRamp:["Pren la sortida {modifier}"," cap a {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," cap a {road}"],Onto:"cap a {road}"},formatOrder:function(a){return a+""},ui:{startPlaceholder:"Origen",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Dest"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},ru:{directions:{N:"",NE:"",E:"",SE:"",S:"",SW:"",W:"",NW:"",SlightRight:" ",Right:"",SharpRight:" ",SlightLeft:" ",Left:"",SharpLeft:" ",Uturn:""},instructions:{Head:["   {dir}","  {road}"],Continue:["   {dir}","  {road}"],SlightRight:["  ","  {road}"],Right:["","  {road}"],SharpRight:["  ","  {road}"],TurnAround:[""],SharpLeft:["  ","  {road}"],Left:[" ","  {road}"],SlightLeft:["  ","  {road}"],WaypointReached:[" "],Roundabout:["{exitStr}   ","  {road}"],DestinationReached:[" "],Fork:["   {modifier}","  {road}"],Merge:[" {modifier}","  {road}"],OnRamp:[" {modifier}  ","  {road}"],OffRamp:["  {modifier}","  {road}"],EndOfRoad:[" {modifier}   ","  {road}"],Onto:" {road}"},formatOrder:function(a){return a+"-"},ui:{startPlaceholder:"",viaPlaceholder:" {viaNumber}",endPlaceholder:""},units:{meters:"",kilometers:"",yards:"",miles:"",hours:"",minutes:"",seconds:""}},pl:{directions:{N:"pnoc",NE:"pnocny wschd",E:"wschd",SE:"poudniowy wschd",S:"poudnie",SW:"poudniowy zachd",W:"zachd",NW:"pnocny zachd",SlightRight:"lekko w prawo",Right:"w prawo",SharpRight:"ostro w prawo",SlightLeft:"lekko w lewo",Left:"w lewo",SharpLeft:"ostro w lewo",Uturn:"zawr"},instructions:{Head:["Kieruj si na {dir}"," na {road}"],Continue:["Jed dalej przez {dir}"],TurnAround:["Zawr"],WaypointReached:["Punkt poredni"],Roundabout:["Wyjed {exitStr} zjazdem na rondzie"," na {road}"],DestinationReached:["Dojechano do miejsca docelowego"],Fork:["Na rozwidleniu {modifier}"," na {road}"],Merge:["Zjed {modifier}"," na {road}"],OnRamp:["Wjazd {modifier}"," na {road}"],OffRamp:["Zjazd {modifier}"," na {road}"],EndOfRoad:["Skr {modifier} na kocu drogi"," na {road}"],Onto:"na {road}"},formatOrder:function(a){return a+"."},ui:{startPlaceholder:"Pocztek",viaPlaceholder:"Przez {viaNumber}",endPlaceholder:"Koniec"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"godz",minutes:"min",seconds:"s"}}})})()},{}],58:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,a=s("./osrm-v1");e.exports=a.extend({options:{serviceUrl:"https://api.mapbox.com/directions/v5",profile:"mapbox/driving",useHints:!1},initialize:function(o,r){n.Routing.OSRMv1.prototype.initialize.call(this,r),this.options.requestParameters=this.options.requestParameters||{},this.options.requestParameters.access_token=o}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./osrm-v1":59}],59:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,a=s("@mapbox/corslite"),o=s("@mapbox/polyline"),r=s("osrm-text-instructions")("v5"),d=s("./waypoint");e.exports=n.Class.extend({options:{serviceUrl:"https://router.project-osrm.org/route/v1",profile:"driving",timeout:30*1e3,routingOptions:{alternatives:!0,steps:!0},polylinePrecision:5,useHints:!0,suppressDemoServerWarning:!1,language:"en"},initialize:function(g){n.Util.setOptions(this,g),this._hints={locations:{}},!this.options.suppressDemoServerWarning&&this.options.serviceUrl.indexOf("//router.project-osrm.org")>=0&&console.warn(`You are using OSRM's demo server. Please note that it is **NOT SUITABLE FOR PRODUCTION USE**.
Refer to the demo server's usage policy: https://github.com/Project-OSRM/osrm-backend/wiki/Api-usage-policy

To change, set the serviceUrl option.

Please do not report issues with this server to neither Leaflet Routing Machine or OSRM - it's for
demo only, and will sometimes not be available, or work in unexpected ways.

Please set up your own OSRM server, or use a paid service provider for production.`)},route:function(g,x,v,k){var E=!1,F=[],O,N,$,X,K;for(k=n.extend({},this.options.routingOptions,k),O=this.buildRouteUrl(g,k),this.options.requestParameters&&(O+=n.Util.getParamString(this.options.requestParameters,O)),N=setTimeout(function(){E=!0,x.call(v||x,{status:-1,message:"OSRM request timed out."})},this.options.timeout),X=0;X<g.length;X++)$=g[X],F.push(new d($.latLng,$.name,$.options));return K=a(O,n.bind(function(ie,ee){var le,te={};if(clearTimeout(N),E)K.abort();else{if(ie)te.message="HTTP request failed: "+ie.type+(ie.target&&ie.target.status?" HTTP "+ie.target.status+": "+ie.target.statusText:""),te.url=O,te.status=-1,te.target=ie;else try{le=JSON.parse(ee.responseText);try{return this._routeDone(le,F,k,x,v)}catch(he){te.status=-3,te.message=he.toString()}}catch(he){te.status=-2,te.message="Error parsing OSRM response: "+he.toString()}x.call(v||x,te)}},this))},requiresMoreDetail:function(g,x,v){if(!g.properties.isSimplified)return!1;var k=g.inputWaypoints,E;for(E=0;E<k.length;++E)if(!v.contains(k[E].latLng))return!0;return!1},_routeDone:function(g,x,v,k,E){var F=[],O,N,$;if(E=E||k,g.code!=="Ok"){k.call(E,{status:g.code});return}for(O=this._toWaypoints(x,g.waypoints),N=0;N<g.routes.length;N++)$=this._convertRoute(g.routes[N]),$.inputWaypoints=x,$.waypoints=O,$.properties={isSimplified:!v||!v.geometryOnly||v.simplifyGeometry},F.push($);this._saveHintData(g.waypoints,x),k.call(E,null,F)},_convertRoute:function(g){var x={name:"",coordinates:[],instructions:[],summary:{totalDistance:g.distance,totalTime:g.duration}},v=[],k=[],E=0,F=g.legs.length,O=g.legs[0].steps.length>0,N,$,X,K,ie,ee,le,te,he;for(this.options.stepToText?he=this.options.stepToText:he=n.bind(r.compile,r,this.options.language),N=0;N<F;N++)for(X=g.legs[N],v.push(X.summary&&X.summary.charAt(0).toUpperCase()+X.summary.substring(1)),$=0;$<X.steps.length;$++)K=X.steps[$],ie=this._decodePolyline(K.geometry),x.coordinates.push.apply(x.coordinates,ie),ee=this._maneuverToInstructionType(K.maneuver,N===F-1),le=this._maneuverToModifier(K.maneuver),te=he(K,{legCount:F,legIndex:N}),ee&&((N==0&&K.maneuver.type=="depart"||K.maneuver.type=="arrive")&&k.push(E),x.instructions.push({type:ee,distance:K.distance,time:K.duration,road:K.name,direction:this._bearingToDirection(K.maneuver.bearing_after),exit:K.maneuver.exit,index:E,mode:K.mode,modifier:le,text:te})),E+=ie.length;return x.name=v.join(", "),O?x.waypointIndices=k:x.coordinates=this._decodePolyline(g.geometry),x},_bearingToDirection:function(g){var x=Math.round(g/45)%8;return["N","NE","E","SE","S","SW","W","NW"][x]},_maneuverToInstructionType:function(g,x){switch(g.type){case"new name":return"Continue";case"depart":return"Head";case"arrive":return x?"DestinationReached":"WaypointReached";case"roundabout":case"rotary":return"Roundabout";case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":return this._camelCase(g.type);default:return this._camelCase(g.modifier)}},_maneuverToModifier:function(g){var x=g.modifier;switch(g.type){case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":x=this._leftOrRight(x)}return x&&this._camelCase(x)},_camelCase:function(g){for(var x=g.split(" "),v="",k=0,E=x.length;k<E;k++)v+=x[k].charAt(0).toUpperCase()+x[k].substring(1);return v},_leftOrRight:function(g){return g.indexOf("left")>=0?"Left":"Right"},_decodePolyline:function(g){var x=o.decode(g,this.options.polylinePrecision),v=new Array(x.length),k;for(k=x.length-1;k>=0;k--)v[k]=n.latLng(x[k]);return v},_toWaypoints:function(g,x){var v=[],k,E;for(k=0;k<x.length;k++)E=x[k].location,v.push(new d(n.latLng(E[1],E[0]),g[k].name,g[k].options));return v},buildRouteUrl:function(g,x){for(var v=[],k=[],E,F,O,N=!0,$=0;$<g.length;$++)E=g[$],F=E.latLng,v.push(F.lng+","+F.lat),k.push(this._hints.locations[this._locationKey(F)]||"");return O=!0,this.options.serviceUrl+"/"+this.options.profile+"/"+v.join(";")+"?"+(x.geometryOnly?x.simplifyGeometry?"":"overview=full":"overview=false")+"&alternatives="+N.toString()+"&steps="+O.toString()+(this.options.useHints?"&hints="+k.join(";"):"")+(x.allowUTurns?"&continue_straight="+!x.allowUTurns:"")},_locationKey:function(g){return g.lat+","+g.lng},_saveHintData:function(g,x){var v;this._hints={locations:{}};for(var k=g.length-1;k>=0;k--)v=x[k].latLng,this._hints.locations[this._locationKey(v)]=g[k].hint}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./waypoint":61,"@mapbox/corslite":1,"@mapbox/polyline":2,"osrm-text-instructions":3}],60:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,a=s("./geocoder-element"),o=s("./waypoint");e.exports=(n.Layer||n.Class).extend({includes:typeof n.Evented<"u"&&n.Evented.prototype||n.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,reverseWaypoints:!1,addButtonClassName:"",language:"en",createGeocoderElement:function(r,d,g,x){return new a(r,d,g,x)},createMarker:function(r,d){var g={draggable:this.draggableWaypoints},x=n.marker(d.latLng,g);return x},geocodersClassName:""},initialize:function(r,d){n.Util.setOptions(this,d),this._waypoints=[],this.setWaypoints(r)},isReady:function(){var r;for(r=0;r<this._waypoints.length;r++)if(!this._waypoints[r].latLng)return!1;return!0},getWaypoints:function(){var r,d=[];for(r=0;r<this._waypoints.length;r++)d.push(this._waypoints[r]);return d},setWaypoints:function(r){var d=[0,this._waypoints.length].concat(r);return this.spliceWaypoints.apply(this,d),this},spliceWaypoints:function(){var r=[arguments[0],arguments[1]],d;for(d=2;d<arguments.length;d++)r.push(arguments[d]&&arguments[d].hasOwnProperty("latLng")?arguments[d]:new o(arguments[d]));for([].splice.apply(this._waypoints,r);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null);this._updateMarkers(),this._fireChanged.apply(this,r)},onAdd:function(r){this._map=r,this._updateMarkers()},onRemove:function(){var r;if(this._removeMarkers(),this._newWp)for(r=0;r<this._newWp.lines.length;r++)this._map.removeLayer(this._newWp.lines[r]);delete this._map},createGeocoders:function(){var r=n.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),d=this._waypoints,g,x;return this._geocoderContainer=r,this._geocoderElems=[],this.options.addWaypoints&&(g=n.DomUtil.create("button","leaflet-routing-add-waypoint "+this.options.addButtonClassName,r),g.setAttribute("type","button"),n.DomEvent.addListener(g,"click",function(){this.spliceWaypoints(d.length,0,null)},this)),this.options.reverseWaypoints&&(x=n.DomUtil.create("button","leaflet-routing-reverse-waypoints",r),x.setAttribute("type","button"),n.DomEvent.addListener(x,"click",function(){this._waypoints.reverse(),this.setWaypoints(this._waypoints)},this)),this._updateGeocoders(),this.on("waypointsspliced",this._updateGeocoders),r},_createGeocoder:function(r){var d=this.options.createGeocoderElement(this._waypoints[r],r,this._waypoints.length,this.options);return d.on("delete",function(){r>0||this._waypoints.length>2?this.spliceWaypoints(r,1):this.spliceWaypoints(r,1,new o)},this).on("geocoded",function(g){this._updateMarkers(),this._fireChanged(),this._focusGeocoder(r+1),this.fire("waypointgeocoded",{waypointIndex:r,waypoint:g.waypoint})},this).on("reversegeocoded",function(g){this.fire("waypointgeocoded",{waypointIndex:r,waypoint:g.waypoint})},this),d},_updateGeocoders:function(){var r=[],d,g;for(d=0;d<this._geocoderElems.length;d++)this._geocoderContainer.removeChild(this._geocoderElems[d].getContainer());for(d=this._waypoints.length-1;d>=0;d--)g=this._createGeocoder(d),this._geocoderContainer.insertBefore(g.getContainer(),this._geocoderContainer.firstChild),r.push(g);this._geocoderElems=r.reverse()},_removeMarkers:function(){var r;if(this._markers)for(r=0;r<this._markers.length;r++)this._markers[r]&&this._map.removeLayer(this._markers[r]);this._markers=[]},_updateMarkers:function(){var r,d;if(this._map)for(this._removeMarkers(),r=0;r<this._waypoints.length;r++)this._waypoints[r].latLng?(d=this.options.createMarker(r,this._waypoints[r],this._waypoints.length),d&&(d.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(d,r))):d=null,this._markers.push(d)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(r,d,g){var x=function(N){return g?N.latlng:N.target.getLatLng()},v=n.bind(function(N){this.fire("waypointdragstart",{index:d,latlng:x(N)})},this),k=n.bind(function(N){this._waypoints[d].latLng=x(N),this.fire("waypointdrag",{index:d,latlng:x(N)})},this),E=n.bind(function(N){this._waypoints[d].latLng=x(N),this._waypoints[d].name="",this._geocoderElems&&this._geocoderElems[d].update(!0),this.fire("waypointdragend",{index:d,latlng:x(N)}),this._fireChanged()},this),F,O;g?(F=n.bind(function(N){this._markers[d].setLatLng(N.latlng),k(N)},this),O=n.bind(function(N){this._map.dragging.enable(),this._map.off("mouseup",O),this._map.off("mousemove",F),E(N)},this),this._map.dragging.disable(),this._map.on("mousemove",F),this._map.on("mouseup",O),v({latlng:this._waypoints[d].latLng})):(r.on("dragstart",v),r.on("drag",k),r.on("dragend",E))},dragNewWaypoint:function(r){var d=r.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(d,0,r.latlng),this._hookWaypointEvents(this._markers[d],d,!0)):this._dragNewWaypoint(d,r.latlng)},_dragNewWaypoint:function(r,d){var g=new o(d),x=this._waypoints[r-1],v=this._waypoints[r],k=this.options.createMarker(r,g,this._waypoints.length+1),E=[],F=this._map.dragging.enabled(),O=n.bind(function(X){var K,ie;for(k&&k.setLatLng(X.latlng),K=0;K<E.length;K++)ie=E[K].getLatLngs(),ie.splice(1,1,X.latlng),E[K].setLatLngs(ie);n.DomEvent.stop(X)},this),N=n.bind(function(X){var K;for(k&&this._map.removeLayer(k),K=0;K<E.length;K++)this._map.removeLayer(E[K]);this._map.off("mousemove",O),this._map.off("mouseup",N),this.spliceWaypoints(r,0,X.latlng),F&&this._map.dragging.enable(),n.DomEvent.stop(X)},this),$;for(k&&k.addTo(this._map),$=0;$<this.options.dragStyles.length;$++)E.push(n.polyline([x.latLng,d,v.latLng],this.options.dragStyles[$]).addTo(this._map));F&&this._map.dragging.disable(),this._map.on("mousemove",O),this._map.on("mouseup",N)},_focusGeocoder:function(r){this._geocoderElems[r]?this._geocoderElems[r].focus():document.activeElement.blur()}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./geocoder-element":52,"./waypoint":61}],61:[function(s,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.Class.extend({options:{allowUTurn:!1},initialize:function(a,o,r){n.Util.setOptions(this,r),this.latLng=n.latLng(a),this.name=o}})})()}).call(this,typeof Jn<"u"?Jn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[53])),lk}RR();var dg={exports:{}},OR=dg.exports,hk;function zR(){return hk||(hk=1,(function(s,e){(function(t,i){i(e)})(OR,function(t){var i=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(a){L.Util.setOptions(this,a),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var o=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,o?this._withAnimation:this._noAnimation),this._markerCluster=o?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(a){if(a instanceof L.LayerGroup)return this.addLayers([a]);if(!a.getLatLng)return this._nonPointGroup.addLayer(a),this.fire("layeradd",{layer:a}),this;if(!this._map)return this._needsClustering.push(a),this.fire("layeradd",{layer:a}),this;if(this.hasLayer(a))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(a,this._maxZoom),this.fire("layeradd",{layer:a}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var o=a,r=this._zoom;if(a.__parent)for(;o.__parent._zoom>=r;)o=o.__parent;return this._currentShownBounds.contains(o.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(a,o):this._animationAddLayerNonAnimated(a,o)),this},removeLayer:function(a){return a instanceof L.LayerGroup?this.removeLayers([a]):a.getLatLng?this._map?a.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(a)),this._removeLayer(a,!0),this.fire("layerremove",{layer:a}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),a.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(a)&&(this._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,a)&&this.hasLayer(a)&&this._needsRemoving.push({layer:a,latlng:a._latlng}),this.fire("layerremove",{layer:a}),this):(this._nonPointGroup.removeLayer(a),this.fire("layerremove",{layer:a}),this)},addLayers:function(a,o){if(!L.Util.isArray(a))return this.addLayer(a);var r=this._featureGroup,d=this._nonPointGroup,g=this.options.chunkedLoading,x=this.options.chunkInterval,v=this.options.chunkProgress,k=a.length,E=0,F=!0,O;if(this._map){var N=new Date().getTime(),$=L.bind(function(){var K=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();E<k;E++){if(g&&E%200===0){var ie=new Date().getTime()-K;if(ie>x)break}if(O=a[E],O instanceof L.LayerGroup){F&&(a=a.slice(),F=!1),this._extractNonGroupLayers(O,a),k=a.length;continue}if(!O.getLatLng){d.addLayer(O),o||this.fire("layeradd",{layer:O});continue}if(!this.hasLayer(O)&&(this._addLayer(O,this._maxZoom),o||this.fire("layeradd",{layer:O}),O.__parent&&O.__parent.getChildCount()===2)){var ee=O.__parent.getAllChildMarkers(),le=ee[0]===O?ee[1]:ee[0];r.removeLayer(le)}}v&&v(E,k,new Date().getTime()-N),E===k?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout($,this.options.chunkDelay)},this);$()}else for(var X=this._needsClustering;E<k;E++){if(O=a[E],O instanceof L.LayerGroup){F&&(a=a.slice(),F=!1),this._extractNonGroupLayers(O,a),k=a.length;continue}if(!O.getLatLng){d.addLayer(O);continue}this.hasLayer(O)||X.push(O)}return this},removeLayers:function(a){var o,r,d=a.length,g=this._featureGroup,x=this._nonPointGroup,v=!0;if(!this._map){for(o=0;o<d;o++){if(r=a[o],r instanceof L.LayerGroup){v&&(a=a.slice(),v=!1),this._extractNonGroupLayers(r,a),d=a.length;continue}this._arraySplice(this._needsClustering,r),x.removeLayer(r),this.hasLayer(r)&&this._needsRemoving.push({layer:r,latlng:r._latlng}),this.fire("layerremove",{layer:r})}return this}if(this._unspiderfy){this._unspiderfy();var k=a.slice(),E=d;for(o=0;o<E;o++){if(r=k[o],r instanceof L.LayerGroup){this._extractNonGroupLayers(r,k),E=k.length;continue}this._unspiderfyLayer(r)}}for(o=0;o<d;o++){if(r=a[o],r instanceof L.LayerGroup){v&&(a=a.slice(),v=!1),this._extractNonGroupLayers(r,a),d=a.length;continue}if(!r.__parent){x.removeLayer(r),this.fire("layerremove",{layer:r});continue}this._removeLayer(r,!0,!0),this.fire("layerremove",{layer:r}),g.hasLayer(r)&&(g.removeLayer(r),r.clusterShow&&r.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(a){a.off(this._childMarkerEventHandlers,this),delete a.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var a=new L.LatLngBounds;this._topClusterLevel&&a.extend(this._topClusterLevel._bounds);for(var o=this._needsClustering.length-1;o>=0;o--)a.extend(this._needsClustering[o].getLatLng());return a.extend(this._nonPointGroup.getBounds()),a},eachLayer:function(a,o){var r=this._needsClustering.slice(),d=this._needsRemoving,g,x,v;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),x=r.length-1;x>=0;x--){for(g=!0,v=d.length-1;v>=0;v--)if(d[v].layer===r[x]){g=!1;break}g&&a.call(o,r[x])}this._nonPointGroup.eachLayer(a,o)},getLayers:function(){var a=[];return this.eachLayer(function(o){a.push(o)}),a},getLayer:function(a){var o=null;return a=parseInt(a,10),this.eachLayer(function(r){L.stamp(r)===a&&(o=r)}),o},hasLayer:function(a){if(!a)return!1;var o,r=this._needsClustering;for(o=r.length-1;o>=0;o--)if(r[o]===a)return!0;for(r=this._needsRemoving,o=r.length-1;o>=0;o--)if(r[o].layer===a)return!1;return!!(a.__parent&&a.__parent._group===this)||this._nonPointGroup.hasLayer(a)},zoomToShowLayer:function(a,o){var r=this._map;typeof o!="function"&&(o=function(){});var d=function(){(r.hasLayer(a)||r.hasLayer(a.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",d,this),this.off("animationend",d,this),r.hasLayer(a)?o():a.__parent._icon&&(this.once("spiderfied",o,this),a.__parent.spiderfy()))};a._icon&&this._map.getBounds().contains(a.getLatLng())?o():a.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",d,this),this._map.panTo(a.getLatLng())):(this._map.on("moveend",d,this),this.on("animationend",d,this),a.__parent.zoomToBounds())},onAdd:function(a){this._map=a;var o,r,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(a),this._nonPointGroup.addTo(a),this._gridClusters||this._generateInitialClusters(),this._maxLat=a.options.crs.projection.MAX_LATITUDE,o=0,r=this._needsRemoving.length;o<r;o++)d=this._needsRemoving[o],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(o=0,r=this._needsRemoving.length;o<r;o++)d=this._needsRemoving[o],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),r=this._needsClustering,this._needsClustering=[],this.addLayers(r,!0)},onRemove:function(a){a.off("zoomend",this._zoomEnd,this),a.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(a){for(var o=a;o&&!o._icon;)o=o.__parent;return o||null},_arraySplice:function(a,o){for(var r=a.length-1;r>=0;r--)if(a[r]===o)return a.splice(r,1),!0},_removeFromGridUnclustered:function(a,o){for(var r=this._map,d=this._gridUnclustered,g=Math.floor(this._map.getMinZoom());o>=g&&d[o].removeObject(a,r.project(a.getLatLng(),o));o--);},_childMarkerDragStart:function(a){a.target.__dragStart=a.target._latlng},_childMarkerMoved:function(a){if(!this._ignoreMove&&!a.target.__dragStart){var o=a.target._popup&&a.target._popup.isOpen();this._moveChild(a.target,a.oldLatLng,a.latlng),o&&a.target.openPopup()}},_moveChild:function(a,o,r){a._latlng=o,this.removeLayer(a),a._latlng=r,this.addLayer(a)},_childMarkerDragEnd:function(a){var o=a.target.__dragStart;delete a.target.__dragStart,o&&this._moveChild(a.target,o,a.target._latlng)},_removeLayer:function(a,o,r){var d=this._gridClusters,g=this._gridUnclustered,x=this._featureGroup,v=this._map,k=Math.floor(this._map.getMinZoom());o&&this._removeFromGridUnclustered(a,this._maxZoom);var E=a.__parent,F=E._markers,O;for(this._arraySplice(F,a);E&&(E._childCount--,E._boundsNeedUpdate=!0,!(E._zoom<k));)o&&E._childCount<=1?(O=E._markers[0]===a?E._markers[1]:E._markers[0],d[E._zoom].removeObject(E,v.project(E._cLatLng,E._zoom)),g[E._zoom].addObject(O,v.project(O.getLatLng(),E._zoom)),this._arraySplice(E.__parent._childClusters,E),E.__parent._markers.push(O),O.__parent=E.__parent,E._icon&&(x.removeLayer(E),r||x.addLayer(O))):E._iconNeedsUpdate=!0,E=E.__parent;delete a.__parent},_isOrIsParent:function(a,o){for(;o;){if(a===o)return!0;o=o.parentNode}return!1},fire:function(a,o,r){if(o&&o.layer instanceof L.MarkerCluster){if(o.originalEvent&&this._isOrIsParent(o.layer._icon,o.originalEvent.relatedTarget))return;a="cluster"+a}L.FeatureGroup.prototype.fire.call(this,a,o,r)},listens:function(a,o){return L.FeatureGroup.prototype.listens.call(this,a,o)||L.FeatureGroup.prototype.listens.call(this,"cluster"+a,o)},_defaultIconCreateFunction:function(a){var o=a.getChildCount(),r=" marker-cluster-";return o<10?r+="small":o<100?r+="medium":r+="large",new L.DivIcon({html:"<div><span>"+o+"</span></div>",className:"marker-cluster"+r,iconSize:new L.Point(40,40)})},_bindEvents:function(){var a=this._map,o=this.options.spiderfyOnMaxZoom,r=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick,g=this.options.spiderfyOnEveryZoom;(o||d||g)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),r&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),a.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(a){var o=a.layer,r=o;if(!(a.type==="clusterkeypress"&&a.originalEvent&&a.originalEvent.keyCode!==13)){for(;r._childClusters.length===1;)r=r._childClusters[0];r._zoom===this._maxZoom&&r._childCount===o._childCount&&this.options.spiderfyOnMaxZoom?o.spiderfy():this.options.zoomToBoundsOnClick&&o.zoomToBounds(),this.options.spiderfyOnEveryZoom&&o.spiderfy(),a.originalEvent&&a.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(a){var o=this._map;this._inZoomAnimation||(this._shownPolygon&&o.removeLayer(this._shownPolygon),a.layer.getChildCount()>2&&a.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(a.layer.getConvexHull(),this.options.polygonOptions),o.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var a=this.options.spiderfyOnMaxZoom,o=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom,g=this._map;(a||r||d)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),o&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),g.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var a=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),a),this._currentShownBounds=a}},_generateInitialClusters:function(){var a=Math.ceil(this._map.getMaxZoom()),o=Math.floor(this._map.getMinZoom()),r=this.options.maxClusterRadius,d=r;typeof r!="function"&&(d=function(){return r}),this.options.disableClusteringAtZoom!==null&&(a=this.options.disableClusteringAtZoom-1),this._maxZoom=a,this._gridClusters={},this._gridUnclustered={};for(var g=a;g>=o;g--)this._gridClusters[g]=new L.DistanceGrid(d(g)),this._gridUnclustered[g]=new L.DistanceGrid(d(g));this._topClusterLevel=new this._markerCluster(this,o-1)},_addLayer:function(a,o){var r=this._gridClusters,d=this._gridUnclustered,g=Math.floor(this._map.getMinZoom()),x,v;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(a),a.on(this._childMarkerEventHandlers,this);o>=g;o--){x=this._map.project(a.getLatLng(),o);var k=r[o].getNearObject(x);if(k){k._addChild(a),a.__parent=k;return}if(k=d[o].getNearObject(x),k){var E=k.__parent;E&&this._removeLayer(k,!1);var F=new this._markerCluster(this,o,k,a);r[o].addObject(F,this._map.project(F._cLatLng,o)),k.__parent=F,a.__parent=F;var O=F;for(v=o-1;v>E._zoom;v--)O=new this._markerCluster(this,v,O),r[v].addObject(O,this._map.project(k.getLatLng(),v));E._addChild(O),this._removeFromGridUnclustered(k,o);return}d[o].addObject(a,x)}this._topClusterLevel._addChild(a),a.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(a){a instanceof L.MarkerCluster&&a._iconNeedsUpdate&&a._updateIcon()})},_enqueue:function(a){this._queue.push(a),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var a=0;a<this._queue.length;a++)this._queue[a].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var a=Math.round(this._map._zoom);this._processQueue(),this._zoom<a&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,a)):this._zoom>a?(this._animationStart(),this._animationZoomOut(this._zoom,a)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(a){var o=this._maxLat;return o!==void 0&&(a.getNorth()>=o&&(a._northEast.lat=1/0),a.getSouth()<=-o&&(a._southWest.lat=-1/0)),a},_animationAddLayerNonAnimated:function(a,o){if(o===a)this._featureGroup.addLayer(a);else if(o._childCount===2){o._addToMap();var r=o.getAllChildMarkers();this._featureGroup.removeLayer(r[0]),this._featureGroup.removeLayer(r[1])}else o._updateIcon()},_extractNonGroupLayers:function(a,o){var r=a.getLayers(),d=0,g;for(o=o||[];d<r.length;d++){if(g=r[d],g instanceof L.LayerGroup){this._extractNonGroupLayers(g,o);continue}o.push(g)}return o},_overrideMarkerIcon:function(a){var o=a.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[a]}});return o}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(a,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(a,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(a,o){this._animationAddLayerNonAnimated(a,o)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(a,o){var r=this._getExpandedVisibleBounds(),d=this._featureGroup,g=Math.floor(this._map.getMinZoom()),x;this._ignoreMove=!0,this._topClusterLevel._recursively(r,a,g,function(v){var k=v._latlng,E=v._markers,F;for(r.contains(k)||(k=null),v._isSingleParent()&&a+1===o?(d.removeLayer(v),v._recursivelyAddChildrenToMap(null,o,r)):(v.clusterHide(),v._recursivelyAddChildrenToMap(k,o,r)),x=E.length-1;x>=0;x--)F=E[x],r.contains(F._latlng)||d.removeLayer(F)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(r,o),d.eachLayer(function(v){!(v instanceof L.MarkerCluster)&&v._icon&&v.clusterShow()}),this._topClusterLevel._recursively(r,a,o,function(v){v._recursivelyRestoreChildPositions(o)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(r,a,g,function(v){d.removeLayer(v),v.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(a,o){this._animationZoomOutSingle(this._topClusterLevel,a-1,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),a,this._getExpandedVisibleBounds())},_animationAddLayer:function(a,o){var r=this,d=this._featureGroup;d.addLayer(a),o!==a&&(o._childCount>2?(o._updateIcon(),this._forceLayout(),this._animationStart(),a._setPos(this._map.latLngToLayerPoint(o.getLatLng())),a.clusterHide(),this._enqueue(function(){d.removeLayer(a),a.clusterShow(),r._animationEnd()})):(this._forceLayout(),r._animationStart(),r._animationZoomOutSingle(o,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(a,o,r){var d=this._getExpandedVisibleBounds(),g=Math.floor(this._map.getMinZoom());a._recursivelyAnimateChildrenInAndAddSelfToMap(d,g,o+1,r);var x=this;this._forceLayout(),a._recursivelyBecomeVisible(d,r),this._enqueue(function(){if(a._childCount===1){var v=a._markers[0];this._ignoreMove=!0,v.setLatLng(v.getLatLng()),this._ignoreMove=!1,v.clusterShow&&v.clusterShow()}else a._recursively(d,r,g,function(k){k._recursivelyRemoveChildrenFromMap(d,g,o+1)});x._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(a){return new L.MarkerClusterGroup(a)};var n=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(a,o,r,d){L.Marker.prototype.initialize.call(this,r?r._cLatLng||r.getLatLng():new L.LatLng(0,0),{icon:this,pane:a.options.clusterPane}),this._group=a,this._zoom=o,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,r&&this._addChild(r),d&&this._addChild(d)},getAllChildMarkers:function(a,o){a=a||[];for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r].getAllChildMarkers(a,o);for(var d=this._markers.length-1;d>=0;d--)o&&this._markers[d].__dragStart||a.push(this._markers[d]);return a},getChildCount:function(){return this._childCount},zoomToBounds:function(a){for(var o=this._childClusters.slice(),r=this._group._map,d=r.getBoundsZoom(this._bounds),g=this._zoom+1,x=r.getZoom(),v;o.length>0&&d>g;){g++;var k=[];for(v=0;v<o.length;v++)k=k.concat(o[v]._childClusters);o=k}d>g?this._group._map.setView(this._latlng,g):d<=x?this._group._map.setView(this._latlng,x+1):this._group._map.fitBounds(this._bounds,a)},getBounds:function(){var a=new L.LatLngBounds;return a.extend(this._bounds),a},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(a,o){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(a),a instanceof L.MarkerCluster?(o||(this._childClusters.push(a),a.__parent=this),this._childCount+=a._childCount):(o||this._markers.push(a),this._childCount++),this.__parent&&this.__parent._addChild(a,!0)},_setClusterCenter:function(a){this._cLatLng||(this._cLatLng=a._cLatLng||a._latlng)},_resetBounds:function(){var a=this._bounds;a._southWest&&(a._southWest.lat=1/0,a._southWest.lng=1/0),a._northEast&&(a._northEast.lat=-1/0,a._northEast.lng=-1/0)},_recalculateBounds:function(){var a=this._markers,o=this._childClusters,r=0,d=0,g=this._childCount,x,v,k,E;if(g!==0){for(this._resetBounds(),x=0;x<a.length;x++)k=a[x]._latlng,this._bounds.extend(k),r+=k.lat,d+=k.lng;for(x=0;x<o.length;x++)v=o[x],v._boundsNeedUpdate&&v._recalculateBounds(),this._bounds.extend(v._bounds),k=v._wLatLng,E=v._childCount,r+=k.lat*E,d+=k.lng*E;this._latlng=this._wLatLng=new L.LatLng(r/g,d/g),this._boundsNeedUpdate=!1}},_addToMap:function(a){a&&(this._backupLatlng=this._latlng,this.setLatLng(a)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(a,o,r){this._recursively(a,this._group._map.getMinZoom(),r-1,function(d){var g=d._markers,x,v;for(x=g.length-1;x>=0;x--)v=g[x],v._icon&&(v._setPos(o),v.clusterHide())},function(d){var g=d._childClusters,x,v;for(x=g.length-1;x>=0;x--)v=g[x],v._icon&&(v._setPos(o),v.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(a,o,r,d){this._recursively(a,d,o,function(g){g._recursivelyAnimateChildrenIn(a,g._group._map.latLngToLayerPoint(g.getLatLng()).round(),r),g._isSingleParent()&&r-1===d?(g.clusterShow(),g._recursivelyRemoveChildrenFromMap(a,o,r)):g.clusterHide(),g._addToMap()})},_recursivelyBecomeVisible:function(a,o){this._recursively(a,this._group._map.getMinZoom(),o,null,function(r){r.clusterShow()})},_recursivelyAddChildrenToMap:function(a,o,r){this._recursively(r,this._group._map.getMinZoom()-1,o,function(d){if(o!==d._zoom)for(var g=d._markers.length-1;g>=0;g--){var x=d._markers[g];r.contains(x._latlng)&&(a&&(x._backupLatlng=x.getLatLng(),x.setLatLng(a),x.clusterHide&&x.clusterHide()),d._group._featureGroup.addLayer(x))}},function(d){d._addToMap(a)})},_recursivelyRestoreChildPositions:function(a){for(var o=this._markers.length-1;o>=0;o--){var r=this._markers[o];r._backupLatlng&&(r.setLatLng(r._backupLatlng),delete r._backupLatlng)}if(a-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var g=this._childClusters.length-1;g>=0;g--)this._childClusters[g]._recursivelyRestoreChildPositions(a)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(a,o,r,d){var g,x;this._recursively(a,o-1,r-1,function(v){for(x=v._markers.length-1;x>=0;x--)g=v._markers[x],(!d||!d.contains(g._latlng))&&(v._group._featureGroup.removeLayer(g),g.clusterShow&&g.clusterShow())},function(v){for(x=v._childClusters.length-1;x>=0;x--)g=v._childClusters[x],(!d||!d.contains(g._latlng))&&(v._group._featureGroup.removeLayer(g),g.clusterShow&&g.clusterShow())})},_recursively:function(a,o,r,d,g){var x=this._childClusters,v=this._zoom,k,E;if(o<=v&&(d&&d(this),g&&v===r&&g(this)),v<o||v<r)for(k=x.length-1;k>=0;k--)E=x[k],E._boundsNeedUpdate&&E._recalculateBounds(),a.intersects(E._bounds)&&E._recursively(a,o,r,d,g)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var a=this.options.opacity;return this.setOpacity(0),this.options.opacity=a,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(a){this._cellSize=a,this._sqCellSize=a*a,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(a,o){var r=this._getCoord(o.x),d=this._getCoord(o.y),g=this._grid,x=g[d]=g[d]||{},v=x[r]=x[r]||[],k=L.Util.stamp(a);this._objectPoint[k]=o,v.push(a)},updateObject:function(a,o){this.removeObject(a),this.addObject(a,o)},removeObject:function(a,o){var r=this._getCoord(o.x),d=this._getCoord(o.y),g=this._grid,x=g[d]=g[d]||{},v=x[r]=x[r]||[],k,E;for(delete this._objectPoint[L.Util.stamp(a)],k=0,E=v.length;k<E;k++)if(v[k]===a)return v.splice(k,1),E===1&&delete x[r],!0},eachObject:function(a,o){var r,d,g,x,v,k,E,F=this._grid;for(r in F){v=F[r];for(d in v)for(k=v[d],g=0,x=k.length;g<x;g++)E=a.call(o,k[g]),E&&(g--,x--)}},getNearObject:function(a){var o=this._getCoord(a.x),r=this._getCoord(a.y),d,g,x,v,k,E,F,O,N=this._objectPoint,$=this._sqCellSize,X=null;for(d=r-1;d<=r+1;d++)if(v=this._grid[d],v){for(g=o-1;g<=o+1;g++)if(k=v[g],k)for(x=0,E=k.length;x<E;x++)F=k[x],O=this._sqDist(N[L.Util.stamp(F)],a),(O<$||O<=$&&X===null)&&($=O,X=F)}return X},_getCoord:function(a){var o=Math.floor(a/this._cellSize);return isFinite(o)?o:a},_sqDist:function(a,o){var r=o.x-a.x,d=o.y-a.y;return r*r+d*d}},(function(){L.QuickHull={getDistant:function(a,o){var r=o[1].lat-o[0].lat,d=o[0].lng-o[1].lng;return d*(a.lat-o[0].lat)+r*(a.lng-o[0].lng)},findMostDistantPointFromBaseLine:function(a,o){var r=0,d=null,g=[],x,v,k;for(x=o.length-1;x>=0;x--){if(v=o[x],k=this.getDistant(v,a),k>0)g.push(v);else continue;k>r&&(r=k,d=v)}return{maxPoint:d,newPoints:g}},buildConvexHull:function(a,o){var r=[],d=this.findMostDistantPointFromBaseLine(a,o);return d.maxPoint?(r=r.concat(this.buildConvexHull([a[0],d.maxPoint],d.newPoints)),r=r.concat(this.buildConvexHull([d.maxPoint,a[1]],d.newPoints)),r):[a[0]]},getConvexHull:function(a){var o=!1,r=!1,d=!1,g=!1,x=null,v=null,k=null,E=null,F=null,O=null,N;for(N=a.length-1;N>=0;N--){var $=a[N];(o===!1||$.lat>o)&&(x=$,o=$.lat),(r===!1||$.lat<r)&&(v=$,r=$.lat),(d===!1||$.lng>d)&&(k=$,d=$.lng),(g===!1||$.lng<g)&&(E=$,g=$.lng)}r!==o?(O=v,F=x):(O=E,F=k);var X=[].concat(this.buildConvexHull([O,F],a),this.buildConvexHull([F,O],a));return X}}})(),L.MarkerCluster.include({getConvexHull:function(){var a=this.getAllChildMarkers(),o=[],r,d;for(d=a.length-1;d>=0;d--)r=a[d].getLatLng(),o.push(r);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var a=this.getAllChildMarkers(null,!0),o=this._group,r=o._map,d=r.latLngToLayerPoint(this._latlng),g;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?g=this._group.options.spiderfyShapePositions(a.length,d):a.length>=this._circleSpiralSwitchover?g=this._generatePointsSpiral(a.length,d):(d.y+=10,g=this._generatePointsCircle(a.length,d)),this._animationSpiderfy(a,g)}},unspiderfy:function(a){this._group._inZoomAnimation||(this._animationUnspiderfy(a),this._group._spiderfied=null)},_generatePointsCircle:function(a,o){var r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+a),d=r/this._2PI,g=this._2PI/a,x=[],v,k;for(d=Math.max(d,35),x.length=a,v=0;v<a;v++)k=this._circleStartAngle+v*g,x[v]=new L.Point(o.x+d*Math.cos(k),o.y+d*Math.sin(k))._round();return x},_generatePointsSpiral:function(a,o){var r=this._group.options.spiderfyDistanceMultiplier,d=r*this._spiralLengthStart,g=r*this._spiralFootSeparation,x=r*this._spiralLengthFactor*this._2PI,v=0,k=[],E;for(k.length=a,E=a;E>=0;E--)E<a&&(k[E]=new L.Point(o.x+d*Math.cos(v),o.y+d*Math.sin(v))._round()),v+=g/d+E*5e-4,d+=x/v;return k},_noanimationUnspiderfy:function(){var a=this._group,o=a._map,r=a._featureGroup,d=this.getAllChildMarkers(null,!0),g,x;for(a._ignoreMove=!0,this.setOpacity(1),x=d.length-1;x>=0;x--)g=d[x],r.removeLayer(g),g._preSpiderfyLatlng&&(g.setLatLng(g._preSpiderfyLatlng),delete g._preSpiderfyLatlng),g.setZIndexOffset&&g.setZIndexOffset(0),g._spiderLeg&&(o.removeLayer(g._spiderLeg),delete g._spiderLeg);a.fire("unspiderfied",{cluster:this,markers:d}),a._ignoreMove=!1,a._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(a,o){var r=this._group,d=r._map,g=r._featureGroup,x=this._group.options.spiderLegPolylineOptions,v,k,E,F;for(r._ignoreMove=!0,v=0;v<a.length;v++)F=d.layerPointToLatLng(o[v]),k=a[v],E=new L.Polyline([this._latlng,F],x),d.addLayer(E),k._spiderLeg=E,k._preSpiderfyLatlng=k._latlng,k.setLatLng(F),k.setZIndexOffset&&k.setZIndexOffset(1e6),g.addLayer(k);this.setOpacity(.3),r._ignoreMove=!1,r.fire("spiderfied",{cluster:this,markers:a})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(a,o){var r=this,d=this._group,g=d._map,x=d._featureGroup,v=this._latlng,k=g.latLngToLayerPoint(v),E=L.Path.SVG,F=L.extend({},this._group.options.spiderLegPolylineOptions),O=F.opacity,N,$,X,K,ie,ee;for(O===void 0&&(O=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),E?(F.opacity=0,F.className=(F.className||"")+" leaflet-cluster-spider-leg"):F.opacity=O,d._ignoreMove=!0,N=0;N<a.length;N++)$=a[N],ee=g.layerPointToLatLng(o[N]),X=new L.Polyline([v,ee],F),g.addLayer(X),$._spiderLeg=X,E&&(K=X._path,ie=K.getTotalLength()+.1,K.style.strokeDasharray=ie,K.style.strokeDashoffset=ie),$.setZIndexOffset&&$.setZIndexOffset(1e6),$.clusterHide&&$.clusterHide(),x.addLayer($),$._setPos&&$._setPos(k);for(d._forceLayout(),d._animationStart(),N=a.length-1;N>=0;N--)ee=g.layerPointToLatLng(o[N]),$=a[N],$._preSpiderfyLatlng=$._latlng,$.setLatLng(ee),$.clusterShow&&$.clusterShow(),E&&(X=$._spiderLeg,K=X._path,K.style.strokeDashoffset=0,X.setStyle({opacity:O}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:r,markers:a})},200)},_animationUnspiderfy:function(a){var o=this,r=this._group,d=r._map,g=r._featureGroup,x=a?d._latLngToNewLayerPoint(this._latlng,a.zoom,a.center):d.latLngToLayerPoint(this._latlng),v=this.getAllChildMarkers(null,!0),k=L.Path.SVG,E,F,O,N,$,X;for(r._ignoreMove=!0,r._animationStart(),this.setOpacity(1),F=v.length-1;F>=0;F--)E=v[F],E._preSpiderfyLatlng&&(E.closePopup(),E.setLatLng(E._preSpiderfyLatlng),delete E._preSpiderfyLatlng,X=!0,E._setPos&&(E._setPos(x),X=!1),E.clusterHide&&(E.clusterHide(),X=!1),X&&g.removeLayer(E),k&&(O=E._spiderLeg,N=O._path,$=N.getTotalLength()+.1,N.style.strokeDashoffset=$,O.setStyle({opacity:0})));r._ignoreMove=!1,setTimeout(function(){var K=0;for(F=v.length-1;F>=0;F--)E=v[F],E._spiderLeg&&K++;for(F=v.length-1;F>=0;F--)E=v[F],E._spiderLeg&&(E.clusterShow&&E.clusterShow(),E.setZIndexOffset&&E.setZIndexOffset(0),K>1&&g.removeLayer(E),d.removeLayer(E._spiderLeg),delete E._spiderLeg);r._animationEnd(),r.fire("unspiderfied",{cluster:o,markers:v})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(a){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(a))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(a){this._spiderfied&&this._spiderfied.unspiderfy(a)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(a){a._spiderLeg&&(this._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow(),a.setZIndexOffset&&a.setZIndexOffset(0),this._map.removeLayer(a._spiderLeg),delete a._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(a){return a?a instanceof L.MarkerClusterGroup?a=a._topClusterLevel.getAllChildMarkers():a instanceof L.LayerGroup?a=a._layers:a instanceof L.MarkerCluster?a=a.getAllChildMarkers():a instanceof L.Marker&&(a=[a]):a=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(a),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(a),this},_flagParentsIconsNeedUpdate:function(a){var o,r;for(o in a)for(r=a[o].__parent;r;)r._iconNeedsUpdate=!0,r=r.__parent},_refreshSingleMarkerModeMarkers:function(a){var o,r;for(o in a)r=a[o],this.hasLayer(r)&&r.setIcon(this._overrideMarkerIcon(r))}}),L.Marker.include({refreshIconOptions:function(a,o){var r=this.options.icon;return L.setOptions(r,a),this.setIcon(r),o&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=i,t.MarkerCluster=n,Object.defineProperty(t,"__esModule",{value:!0})})})(dg,dg.exports)),dg.exports}zR();function vc(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function xT(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}var Lo={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},zf={duration:.5,overwrite:!1,delay:0},xb,cs,Va,Ko=1e8,ya=1/Ko,Z1=Math.PI*2,FR=Z1/4,BR=0,yT=Math.sqrt,NR=Math.cos,jR=Math.sin,es=function(e){return typeof e=="string"},ar=function(e){return typeof e=="function"},Pc=function(e){return typeof e=="number"},yb=function(e){return typeof e>"u"},Zl=function(e){return typeof e=="object"},no=function(e){return e!==!1},vb=function(){return typeof window<"u"},D0=function(e){return ar(e)||es(e)},vT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ks=Array.isArray,VR=/random\([^)]+\)/g,HR=/,\s*/g,uk=/(?:-?\.?\d|\.)+/gi,bT=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Sf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Qy=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,wT=/[+-]=-?[.\d]+/,UR=/[^,'"\[\]\s]+/gi,GR=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,qa,Hl,K1,bb,Ro={},R_={},ST,kT=function(e){return(R_=Ff(e,Ro))&&oo},wb=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Yg=function(e,t){return!t&&console.warn(e)},CT=function(e,t){return e&&(Ro[e]=t)&&R_&&(R_[e]=t)||Ro},qg=function(){return 0},WR={suppressEvents:!0,isStart:!0,kill:!1},f_={suppressEvents:!0,kill:!1},$R={suppressEvents:!0},Sb={},mh=[],Q1={},AT,Ao={},Jy={},dk=30,p_=[],kb="",Cb=function(e){var t=e[0],i,n;if(Zl(t)||ar(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(n=p_.length;n--&&!p_[n].targetTest(t););i=p_[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new ZT(e[n],i)))||e.splice(n,1);return e},Uu=function(e){return e._gsap||Cb(Qo(e))[0]._gsap},TT=function(e,t,i){return(i=e[t])&&ar(i)?e[t]():yb(i)&&e.getAttribute&&e.getAttribute(t)||i},ao=function(e,t){return(e=e.split(",")).forEach(t)||e},_r=function(e){return Math.round(e*1e5)/1e5||0},Ya=function(e){return Math.round(e*1e7)/1e7||0},Ef=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+n:i==="-"?e-n:i==="*"?e*n:e/n},XR=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},O_=function(){var e=mh.length,t=mh.slice(0),i,n;for(Q1={},mh.length=0,i=0;i<e;i++)n=t[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Ab=function(e){return!!(e._initted||e._startAt||e.add)},ET=function(e,t,i,n){mh.length&&!cs&&O_(),e.render(t,i,!!(cs&&t<0&&Ab(e))),mh.length&&!cs&&O_()},MT=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(UR).length<2?t:es(e)?e.trim():e},IT=function(e){return e},Oo=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},YR=function(e){return function(t,i){for(var n in i)n in t||n==="duration"&&e||n==="ease"||(t[n]=i[n])}},Ff=function(e,t){for(var i in t)e[i]=t[i];return e},fk=function s(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Zl(t[i])?s(e[i]||(e[i]={}),t[i]):t[i]);return e},z_=function(e,t){var i={},n;for(n in e)n in t||(i[n]=e[n]);return i},Tg=function(e){var t=e.parent||qa,i=e.keyframes?YR(ks(e.keyframes)):Oo;if(no(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},qR=function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0},PT=function(e,t,i,n,a){var o=e[n],r;if(a)for(r=t[a];o&&o[a]>r;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=o,t.parent=t._dp=e,t},_x=function(e,t,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var a=t._prev,o=t._next;a?a._next=o:e[i]===t&&(e[i]=o),o?o._prev=a:e[n]===t&&(e[n]=a),t._next=t._prev=t.parent=null},bh=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Gu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},ZR=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},J1=function(e,t,i,n){return e._startAt&&(cs?e._startAt.revert(f_):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},KR=function s(e){return!e||e._ts&&s(e.parent)},pk=function(e){return e._repeat?Bf(e._tTime,e=e.duration()+e._rDelay)*e:0},Bf=function(e,t){var i=Math.floor(e=Ya(e/t));return e&&i===e?i-1:i},F_=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},xx=function(e){return e._end=Ya(e._start+(e._tDur/Math.abs(e._ts||e._rts||ya)||0))},yx=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Ya(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),xx(e),i._dirty||Gu(i,e)),e},LT=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=F_(e.rawTime(),t),(!t._dur||_m(0,t.totalDuration(),i)-t._tTime>ya)&&t.render(i,!0)),Gu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-ya}},Wl=function(e,t,i,n){return t.parent&&bh(t),t._start=Ya((Pc(i)?i:i||e!==qa?Xo(e,i,t):e._time)+t._delay),t._end=Ya(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),PT(e,t,"_first","_last",e._sort?"_start":0),ev(t)||(e._recent=t),n||LT(e,t),e._ts<0&&yx(e,e._tTime),e},DT=function(e,t){return(Ro.ScrollTrigger||wb("scrollTrigger",t))&&Ro.ScrollTrigger.create(t,e)},RT=function(e,t,i,n,a){if(Eb(e,t,a),!e._initted)return 1;if(!i&&e._pt&&!cs&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&AT!==Eo.frame)return mh.push(e),e._lazy=[a,n],1},QR=function s(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||s(t))},ev=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},JR=function(e,t,i,n){var a=e.ratio,o=t<0||!t&&(!e._start&&QR(e)&&!(!e._initted&&ev(e))||(e._ts<0||e._dp._ts<0)&&!ev(e))?0:1,r=e._rDelay,d=0,g,x,v;if(r&&e._repeat&&(d=_m(0,e._tDur,t),x=Bf(d,r),e._yoyo&&x&1&&(o=1-o),x!==Bf(e._tTime,r)&&(a=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==a||cs||n||e._zTime===ya||!t&&e._zTime){if(!e._initted&&RT(e,t,n,i,d))return;for(v=e._zTime,e._zTime=t||(i?ya:0),i||(i=t&&!v),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=d,g=e._pt;g;)g.r(o,g.d),g=g._next;t<0&&J1(e,t,i,!0),e._onUpdate&&!i&&Io(e,"onUpdate"),d&&e._repeat&&!i&&e.parent&&Io(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&bh(e,1),!i&&!cs&&(Io(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},e3=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<t)return n;n=n._prev}},Nf=function(e,t,i,n){var a=e._repeat,o=Ya(t)||0,r=e._tTime/e._tDur;return r&&!n&&(e._time*=o/e._dur),e._dur=o,e._tDur=a?a<0?1e10:Ya(o*(a+1)+e._rDelay*a):o,r>0&&!n&&yx(e,e._tTime=e._tDur*r),e.parent&&xx(e),i||Gu(e.parent,e),e},gk=function(e){return e instanceof Vs?Gu(e):Nf(e,e._dur)},t3={_start:0,endTime:qg,totalDuration:qg},Xo=function s(e,t,i){var n=e.labels,a=e._recent||t3,o=e.duration()>=Ko?a.endTime(!1):e._dur,r,d,g;return es(t)&&(isNaN(t)||t in n)?(d=t.charAt(0),g=t.substr(-1)==="%",r=t.indexOf("="),d==="<"||d===">"?(r>=0&&(t=t.replace(/=/,"")),(d==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(t.substr(1))||0)*(g?(r<0?a:i).totalDuration()/100:1)):r<0?(t in n||(n[t]=o),n[t]):(d=parseFloat(t.charAt(r-1)+t.substr(r+1)),g&&i&&(d=d/100*(ks(i)?i[0]:i).totalDuration()),r>1?s(e,t.substr(0,r-1),i)+d:o+d)):t==null?o:+t},Eg=function(e,t,i){var n=Pc(t[1]),a=(n?2:1)+(e<2?0:1),o=t[a],r,d;if(n&&(o.duration=t[1]),o.parent=i,e){for(r=o,d=i;d&&!("immediateRender"in r);)r=d.vars.defaults||{},d=no(d.vars.inherit)&&d.parent;o.immediateRender=no(r.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new Pr(t[0],o,t[a+1])},Lh=function(e,t){return e||e===0?t(e):t},_m=function(e,t,i){return i<e?e:i>t?t:i},bs=function(e,t){return!es(e)||!(t=GR.exec(e))?"":t[1]},i3=function(e,t,i){return Lh(i,function(n){return _m(e,t,n)})},tv=[].slice,OT=function(e,t){return e&&Zl(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Zl(e[0]))&&!e.nodeType&&e!==Hl},n3=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(n){var a;return es(n)&&!t||OT(n,1)?(a=i).push.apply(a,Qo(n)):i.push(n)})||i},Qo=function(e,t,i){return Va&&!t&&Va.selector?Va.selector(e):es(e)&&!i&&(K1||!jf())?tv.call((t||bb).querySelectorAll(e),0):ks(e)?n3(e,i):OT(e)?tv.call(e,0):e?[e]:[]},iv=function(e){return e=Qo(e)[0]||Yg("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Qo(t,i.querySelectorAll?i:i===e?Yg("Invalid scope")||bb.createElement("div"):e)}},zT=function(e){return e.sort(function(){return .5-Math.random()})},FT=function(e){if(ar(e))return e;var t=Zl(e)?e:{each:e},i=Wu(t.ease),n=t.from||0,a=parseFloat(t.base)||0,o={},r=n>0&&n<1,d=isNaN(n)||r,g=t.axis,x=n,v=n;return es(n)?x=v={center:.5,edges:.5,end:1}[n]||0:!r&&d&&(x=n[0],v=n[1]),function(k,E,F){var O=(F||t).length,N=o[O],$,X,K,ie,ee,le,te,he,de;if(!N){if(de=t.grid==="auto"?0:(t.grid||[1,Ko])[1],!de){for(te=-Ko;te<(te=F[de++].getBoundingClientRect().left)&&de<O;);de<O&&de--}for(N=o[O]=[],$=d?Math.min(de,O)*x-.5:n%de,X=de===Ko?0:d?O*v/de-.5:n/de|0,te=0,he=Ko,le=0;le<O;le++)K=le%de-$,ie=X-(le/de|0),N[le]=ee=g?Math.abs(g==="y"?ie:K):yT(K*K+ie*ie),ee>te&&(te=ee),ee<he&&(he=ee);n==="random"&&zT(N),N.max=te-he,N.min=he,N.v=O=(parseFloat(t.amount)||parseFloat(t.each)*(de>O?O-1:g?g==="y"?O/de:de:Math.max(de,O/de))||0)*(n==="edges"?-1:1),N.b=O<0?a-O:a,N.u=bs(t.amount||t.each)||0,i=i&&O<0?XT(i):i}return O=(N[k]-N.min)/N.max||0,Ya(N.b+(i?i(O):O)*N.v)+N.u}},nv=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=Ya(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(Pc(i)?0:bs(i))}},BT=function(e,t){var i=ks(e),n,a;return!i&&Zl(e)&&(n=i=e.radius||Ko,e.values?(e=Qo(e.values),(a=!Pc(e[0]))&&(n*=n)):e=nv(e.increment)),Lh(t,i?ar(e)?function(o){return a=e(o),Math.abs(a-o)<=n?a:o}:function(o){for(var r=parseFloat(a?o.x:o),d=parseFloat(a?o.y:0),g=Ko,x=0,v=e.length,k,E;v--;)a?(k=e[v].x-r,E=e[v].y-d,k=k*k+E*E):k=Math.abs(e[v]-r),k<g&&(g=k,x=v);return x=!n||g<=n?e[x]:o,a||x===o||Pc(o)?x:x+bs(o)}:nv(e))},NT=function(e,t,i,n){return Lh(ks(e)?!t:i===!0?!!(i=0):!n,function(){return ks(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*n)/n})},a3=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduce(function(a,o){return o(a)},n)}},r3=function(e,t){return function(i){return e(parseFloat(i))+(t||bs(i))}},s3=function(e,t,i){return VT(e,t,0,1,i)},jT=function(e,t,i){return Lh(i,function(n){return e[~~t(n)]})},o3=function s(e,t,i){var n=t-e;return ks(e)?jT(e,s(0,e.length),t):Lh(i,function(a){return(n+(a-e)%n)%n+e})},l3=function s(e,t,i){var n=t-e,a=n*2;return ks(e)?jT(e,s(0,e.length-1),t):Lh(i,function(o){return o=(a+(o-e)%a)%a||0,e+(o>n?a-o:o)})},Zg=function(e){return e.replace(VR,function(t){var i=t.indexOf("[")+1,n=t.substring(i||7,i?t.indexOf("]"):t.length-1).split(HR);return NT(i?n:+n[0],i?0:+n[1],+n[2]||1e-5)})},VT=function(e,t,i,n,a){var o=t-e,r=n-i;return Lh(a,function(d){return i+((d-e)/o*r||0)})},c3=function s(e,t,i,n){var a=isNaN(e+t)?0:function(E){return(1-E)*e+E*t};if(!a){var o=es(e),r={},d,g,x,v,k;if(i===!0&&(n=1)&&(i=null),o)e={p:e},t={p:t};else if(ks(e)&&!ks(t)){for(x=[],v=e.length,k=v-2,g=1;g<v;g++)x.push(s(e[g-1],e[g]));v--,a=function(F){F*=v;var O=Math.min(k,~~F);return x[O](F-O)},i=t}else n||(e=Ff(ks(e)?[]:{},e));if(!x){for(d in t)Tb.call(r,e,d,"get",t[d]);a=function(F){return Pb(F,r)||(o?e.p:e)}}}return Lh(i,a)},mk=function(e,t,i){var n=e.labels,a=Ko,o,r,d;for(o in n)r=n[o]-t,r<0==!!i&&r&&a>(r=Math.abs(r))&&(d=o,a=r);return d},Io=function(e,t,i){var n=e.vars,a=n[t],o=Va,r=e._ctx,d,g,x;if(a)return d=n[t+"Params"],g=n.callbackScope||e,i&&mh.length&&O_(),r&&(Va=r),x=d?a.apply(g,d):a.call(g),Va=o,x},fg=function(e){return bh(e),e.scrollTrigger&&e.scrollTrigger.kill(!!cs),e.progress()<1&&Io(e,"onInterrupt"),e},kf,HT=[],UT=function(e){if(e)if(e=!e.name&&e.default||e,vb()||e.headless){var t=e.name,i=ar(e),n=t&&!i&&e.init?function(){this._props=[]}:e,a={init:qg,render:Pb,add:Tb,kill:C3,modifier:k3,rawVars:0},o={targetTest:0,get:0,getSetter:Ib,aliases:{},register:0};if(jf(),e!==n){if(Ao[t])return;Oo(n,Oo(z_(e,a),o)),Ff(n.prototype,Ff(a,z_(e,o))),Ao[n.prop=t]=n,e.targetTest&&(p_.push(n),Sb[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}CT(t,n),e.register&&e.register(oo,n,ro)}else HT.push(e)},xa=255,pg={aqua:[0,xa,xa],lime:[0,xa,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xa],navy:[0,0,128],white:[xa,xa,xa],olive:[128,128,0],yellow:[xa,xa,0],orange:[xa,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xa,0,0],pink:[xa,192,203],cyan:[0,xa,xa],transparent:[xa,xa,xa,0]},e1=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*xa+.5|0},GT=function(e,t,i){var n=e?Pc(e)?[e>>16,e>>8&xa,e&xa]:0:pg.black,a,o,r,d,g,x,v,k,E,F;if(!n){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),pg[e])n=pg[e];else if(e.charAt(0)==="#"){if(e.length<6&&(a=e.charAt(1),o=e.charAt(2),r=e.charAt(3),e="#"+a+a+o+o+r+r+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return n=parseInt(e.substr(1,6),16),[n>>16,n>>8&xa,n&xa,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),n=[e>>16,e>>8&xa,e&xa]}else if(e.substr(0,3)==="hsl"){if(n=F=e.match(uk),!t)d=+n[0]%360/360,g=+n[1]/100,x=+n[2]/100,o=x<=.5?x*(g+1):x+g-x*g,a=x*2-o,n.length>3&&(n[3]*=1),n[0]=e1(d+1/3,a,o),n[1]=e1(d,a,o),n[2]=e1(d-1/3,a,o);else if(~e.indexOf("="))return n=e.match(bT),i&&n.length<4&&(n[3]=1),n}else n=e.match(uk)||pg.transparent;n=n.map(Number)}return t&&!F&&(a=n[0]/xa,o=n[1]/xa,r=n[2]/xa,v=Math.max(a,o,r),k=Math.min(a,o,r),x=(v+k)/2,v===k?d=g=0:(E=v-k,g=x>.5?E/(2-v-k):E/(v+k),d=v===a?(o-r)/E+(o<r?6:0):v===o?(r-a)/E+2:(a-o)/E+4,d*=60),n[0]=~~(d+.5),n[1]=~~(g*100+.5),n[2]=~~(x*100+.5)),i&&n.length<4&&(n[3]=1),n},WT=function(e){var t=[],i=[],n=-1;return e.split(_h).forEach(function(a){var o=a.match(Sf)||[];t.push.apply(t,o),i.push(n+=o.length+1)}),t.c=i,t},_k=function(e,t,i){var n="",a=(e+n).match(_h),o=t?"hsla(":"rgba(",r=0,d,g,x,v;if(!a)return e;if(a=a.map(function(k){return(k=GT(k,t,1))&&o+(t?k[0]+","+k[1]+"%,"+k[2]+"%,"+k[3]:k.join(","))+")"}),i&&(x=WT(e),d=i.c,d.join(n)!==x.c.join(n)))for(g=e.replace(_h,"1").split(Sf),v=g.length-1;r<v;r++)n+=g[r]+(~d.indexOf(r)?a.shift()||o+"0,0,0,0)":(x.length?x:a.length?a:i).shift());if(!g)for(g=e.split(_h),v=g.length-1;r<v;r++)n+=g[r]+a[r];return n+g[v]},_h=(function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in pg)s+="|"+e+"\\b";return new RegExp(s+")","gi")})(),h3=/hsl[a]?\(/,$T=function(e){var t=e.join(" "),i;if(_h.lastIndex=0,_h.test(t))return i=h3.test(t),e[1]=_k(e[1],i),e[0]=_k(e[0],i,WT(e[1])),!0},Kg,Eo=(function(){var s=Date.now,e=500,t=33,i=s(),n=i,a=1e3/240,o=a,r=[],d,g,x,v,k,E,F=function O(N){var $=s()-n,X=N===!0,K,ie,ee,le;if(($>e||$<0)&&(i+=$-t),n+=$,ee=n-i,K=ee-o,(K>0||X)&&(le=++v.frame,k=ee-v.time*1e3,v.time=ee=ee/1e3,o+=K+(K>=a?4:a-K),ie=1),X||(d=g(O)),ie)for(E=0;E<r.length;E++)r[E](ee,k,le,N)};return v={time:0,frame:0,tick:function(){F(!0)},deltaRatio:function(N){return k/(1e3/(N||60))},wake:function(){ST&&(!K1&&vb()&&(Hl=K1=window,bb=Hl.document||{},Ro.gsap=oo,(Hl.gsapVersions||(Hl.gsapVersions=[])).push(oo.version),kT(R_||Hl.GreenSockGlobals||!Hl.gsap&&Hl||{}),HT.forEach(UT)),x=typeof requestAnimationFrame<"u"&&requestAnimationFrame,d&&v.sleep(),g=x||function(N){return setTimeout(N,o-v.time*1e3+1|0)},Kg=1,F(2))},sleep:function(){(x?cancelAnimationFrame:clearTimeout)(d),Kg=0,g=qg},lagSmoothing:function(N,$){e=N||1/0,t=Math.min($||33,e)},fps:function(N){a=1e3/(N||240),o=v.time*1e3+a},add:function(N,$,X){var K=$?function(ie,ee,le,te){N(ie,ee,le,te),v.remove(K)}:N;return v.remove(N),r[X?"unshift":"push"](K),jf(),K},remove:function(N,$){~($=r.indexOf(N))&&r.splice($,1)&&E>=$&&E--},_listeners:r},v})(),jf=function(){return!Kg&&Eo.wake()},Tn={},u3=/^[\d.\-M][\d.\-,\s]/,d3=/["']/g,f3=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),n=i[0],a=1,o=i.length,r,d,g;a<o;a++)d=i[a],r=a!==o-1?d.lastIndexOf(","):d.length,g=d.substr(0,r),t[n]=isNaN(g)?g.replace(d3,"").trim():+g,n=d.substr(r+1).trim();return t},p3=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",t);return e.substring(t,~n&&n<i?e.indexOf(")",i+1):i)},g3=function(e){var t=(e+"").split("("),i=Tn[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[f3(t[1])]:p3(e).split(",").map(MT)):Tn._CE&&u3.test(e)?Tn._CE("",e):i},XT=function(e){return function(t){return 1-e(1-t)}},YT=function s(e,t){for(var i=e._first,n;i;)i instanceof Vs?s(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?s(i.timeline,t):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=t)),i=i._next},Wu=function(e,t){return e&&(ar(e)?e:Tn[e]||g3(e))||t},ud=function(e,t,i,n){i===void 0&&(i=function(d){return 1-t(1-d)}),n===void 0&&(n=function(d){return d<.5?t(d*2)/2:1-t((1-d)*2)/2});var a={easeIn:t,easeOut:i,easeInOut:n},o;return ao(e,function(r){Tn[r]=Ro[r]=a,Tn[o=r.toLowerCase()]=i;for(var d in a)Tn[o+(d==="easeIn"?".in":d==="easeOut"?".out":".inOut")]=Tn[r+"."+d]=a[d]}),a},qT=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},t1=function s(e,t,i){var n=t>=1?t:1,a=(i||(e?.3:.45))/(t<1?t:1),o=a/Z1*(Math.asin(1/n)||0),r=function(x){return x===1?1:n*Math.pow(2,-10*x)*jR((x-o)*a)+1},d=e==="out"?r:e==="in"?function(g){return 1-r(1-g)}:qT(r);return a=Z1/a,d.config=function(g,x){return s(e,g,x)},d},i1=function s(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},n=e==="out"?i:e==="in"?function(a){return 1-i(1-a)}:qT(i);return n.config=function(a){return s(e,a)},n};ao("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,e){var t=e<5?e+1:e;ud(s+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Tn.Linear.easeNone=Tn.none=Tn.Linear.easeIn;ud("Elastic",t1("in"),t1("out"),t1());(function(s,e){var t=1/e,i=2*t,n=2.5*t,a=function(r){return r<t?s*r*r:r<i?s*Math.pow(r-1.5/e,2)+.75:r<n?s*(r-=2.25/e)*r+.9375:s*Math.pow(r-2.625/e,2)+.984375};ud("Bounce",function(o){return 1-a(1-o)},a)})(7.5625,2.75);ud("Expo",function(s){return Math.pow(2,10*(s-1))*s+s*s*s*s*s*s*(1-s)});ud("Circ",function(s){return-(yT(1-s*s)-1)});ud("Sine",function(s){return s===1?1:-NR(s*FR)+1});ud("Back",i1("in"),i1("out"),i1());Tn.SteppedEase=Tn.steps=Ro.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,n=e+(t?0:1),a=t?1:0,o=1-ya;return function(r){return((n*_m(0,o,r)|0)+a)*i}}};zf.ease=Tn["quad.out"];ao("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return kb+=s+","+s+"Params,"});var ZT=function(e,t){this.id=BR++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:TT,this.set=t?t.getSetter:Ib},Qg=(function(){function s(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Nf(this,+t.duration,1,1),this.data=t.data,Va&&(this._ctx=Va,Va.data.push(this)),Kg||Eo.wake()}var e=s.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Nf(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,n){if(jf(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(yx(this,i),!a._dp||a.parent||LT(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Wl(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===ya||!this._initted&&this._dur&&i||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),ET(this,i,n)),this},e.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+pk(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},e.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+pk(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,n){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,n):this._repeat?Bf(this._tTime,a)+1:1},e.timeScale=function(i,n){if(!arguments.length)return this._rts===-ya?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?F_(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-ya?0:this._rts,this.totalTime(_m(-Math.abs(this._delay),this.totalDuration(),a),n!==!1),xx(this),ZR(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(jf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ya&&(this._tTime-=ya)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=Ya(i);var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Wl(n,this,this._start-this._delay),this}return this._start},e.endTime=function(i){return this._start+(no(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?F_(n.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=$R);var n=cs;return cs=i,Ab(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),cs=n,this},e.globalTime=function(i){for(var n=this,a=arguments.length?i:n.rawTime();n;)a=n._start+a/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):a},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,gk(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,gk(this),n?this.time(n):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,n){return this.totalTime(Xo(this,i),no(n))},e.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,no(n)),this._dur||(this._zTime=-ya),this},e.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},e.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},e.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-ya:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ya,this},e.isActive=function(){var i=this.parent||this._dp,n=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=n&&a<this.endTime(!0)-ya)},e.eventCallback=function(i,n,a){var o=this.vars;return arguments.length>1?(n?(o[i]=n,a&&(o[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=n)):delete o[i],this):o[i]},e.then=function(i){var n=this,a=n._prom;return new Promise(function(o){var r=ar(i)?i:IT,d=function(){var x=n.then;n.then=null,a&&a(),ar(r)&&(r=r(n))&&(r.then||r===n)&&(n.then=x),o(r),n.then=x};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?d():n._prom=d})},e.kill=function(){fg(this)},s})();Oo(Qg.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ya,_prom:0,_ps:!1,_rts:1});var Vs=(function(s){xT(e,s);function e(i,n){var a;return i===void 0&&(i={}),a=s.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=no(i.sortChildren),qa&&Wl(i.parent||qa,vc(a),n),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&DT(vc(a),i.scrollTrigger),a}var t=e.prototype;return t.to=function(n,a,o){return Eg(0,arguments,this),this},t.from=function(n,a,o){return Eg(1,arguments,this),this},t.fromTo=function(n,a,o,r){return Eg(2,arguments,this),this},t.set=function(n,a,o){return a.duration=0,a.parent=this,Tg(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new Pr(n,a,Xo(this,o),1),this},t.call=function(n,a,o){return Wl(this,Pr.delayedCall(0,n,a),o)},t.staggerTo=function(n,a,o,r,d,g,x){return o.duration=a,o.stagger=o.stagger||r,o.onComplete=g,o.onCompleteParams=x,o.parent=this,new Pr(n,o,Xo(this,d)),this},t.staggerFrom=function(n,a,o,r,d,g,x){return o.runBackwards=1,Tg(o).immediateRender=no(o.immediateRender),this.staggerTo(n,a,o,r,d,g,x)},t.staggerFromTo=function(n,a,o,r,d,g,x,v){return r.startAt=o,Tg(r).immediateRender=no(r.immediateRender),this.staggerTo(n,a,r,d,g,x,v)},t.render=function(n,a,o){var r=this._time,d=this._dirty?this.totalDuration():this._tDur,g=this._dur,x=n<=0?0:Ya(n),v=this._zTime<0!=n<0&&(this._initted||!g),k,E,F,O,N,$,X,K,ie,ee,le,te;if(this!==qa&&x>d&&n>=0&&(x=d),x!==this._tTime||o||v){if(r!==this._time&&g&&(x+=this._time-r,n+=this._time-r),k=x,ie=this._start,K=this._ts,$=!K,v&&(g||(r=this._zTime),(n||!a)&&(this._zTime=n)),this._repeat){if(le=this._yoyo,N=g+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(N*100+n,a,o);if(k=Ya(x%N),x===d?(O=this._repeat,k=g):(ee=Ya(x/N),O=~~ee,O&&O===ee&&(k=g,O--),k>g&&(k=g)),ee=Bf(this._tTime,N),!r&&this._tTime&&ee!==O&&this._tTime-ee*N-this._dur<=0&&(ee=O),le&&O&1&&(k=g-k,te=1),O!==ee&&!this._lock){var he=le&&ee&1,de=he===(le&&O&1);if(O<ee&&(he=!he),r=he?0:x%g?g:x,this._lock=1,this.render(r||(te?0:Ya(O*N)),a,!g)._lock=0,this._tTime=x,!a&&this.parent&&Io(this,"onRepeat"),this.vars.repeatRefresh&&!te&&(this.invalidate()._lock=1,ee=O),r&&r!==this._time||$!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,d=this._tDur,de&&(this._lock=2,r=he?g:-1e-4,this.render(r,!0),this.vars.repeatRefresh&&!te&&this.invalidate()),this._lock=0,!this._ts&&!$)return this;YT(this,te)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(X=e3(this,Ya(r),Ya(k)),X&&(x-=k-(k=X._start))),this._tTime=x,this._time=k,this._act=!K,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,r=0),!r&&x&&g&&!a&&!ee&&(Io(this,"onStart"),this._tTime!==x))return this;if(k>=r&&n>=0)for(E=this._first;E;){if(F=E._next,(E._act||k>=E._start)&&E._ts&&X!==E){if(E.parent!==this)return this.render(n,a,o);if(E.render(E._ts>0?(k-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(k-E._start)*E._ts,a,o),k!==this._time||!this._ts&&!$){X=0,F&&(x+=this._zTime=-ya);break}}E=F}else{E=this._last;for(var ke=n<0?n:k;E;){if(F=E._prev,(E._act||ke<=E._end)&&E._ts&&X!==E){if(E.parent!==this)return this.render(n,a,o);if(E.render(E._ts>0?(ke-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(ke-E._start)*E._ts,a,o||cs&&Ab(E)),k!==this._time||!this._ts&&!$){X=0,F&&(x+=this._zTime=ke?-ya:ya);break}}E=F}}if(X&&!a&&(this.pause(),X.render(k>=r?0:-ya)._zTime=k>=r?1:-1,this._ts))return this._start=ie,xx(this),this.render(n,a,o);this._onUpdate&&!a&&Io(this,"onUpdate",!0),(x===d&&this._tTime>=this.totalDuration()||!x&&r)&&(ie===this._start||Math.abs(K)!==Math.abs(this._ts))&&(this._lock||((n||!g)&&(x===d&&this._ts>0||!x&&this._ts<0)&&bh(this,1),!a&&!(n<0&&!r)&&(x||r||!d)&&(Io(this,x===d&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(x<d&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(n,a){var o=this;if(Pc(a)||(a=Xo(this,a,n)),!(n instanceof Qg)){if(ks(n))return n.forEach(function(r){return o.add(r,a)}),this;if(es(n))return this.addLabel(n,a);if(ar(n))n=Pr.delayedCall(0,n);else return this}return this!==n?Wl(this,n,a):this},t.getChildren=function(n,a,o,r){n===void 0&&(n=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),r===void 0&&(r=-Ko);for(var d=[],g=this._first;g;)g._start>=r&&(g instanceof Pr?a&&d.push(g):(o&&d.push(g),n&&d.push.apply(d,g.getChildren(!0,a,o)))),g=g._next;return d},t.getById=function(n){for(var a=this.getChildren(1,1,1),o=a.length;o--;)if(a[o].vars.id===n)return a[o]},t.remove=function(n){return es(n)?this.removeLabel(n):ar(n)?this.killTweensOf(n):(n.parent===this&&_x(this,n),n===this._recent&&(this._recent=this._last),Gu(this))},t.totalTime=function(n,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ya(Eo.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),s.prototype.totalTime.call(this,n,a),this._forcing=0,this):this._tTime},t.addLabel=function(n,a){return this.labels[n]=Xo(this,a),this},t.removeLabel=function(n){return delete this.labels[n],this},t.addPause=function(n,a,o){var r=Pr.delayedCall(0,a||qg,o);return r.data="isPause",this._hasPause=1,Wl(this,r,Xo(this,n))},t.removePause=function(n){var a=this._first;for(n=Xo(this,n);a;)a._start===n&&a.data==="isPause"&&bh(a),a=a._next},t.killTweensOf=function(n,a,o){for(var r=this.getTweensOf(n,o),d=r.length;d--;)oh!==r[d]&&r[d].kill(n,a);return this},t.getTweensOf=function(n,a){for(var o=[],r=Qo(n),d=this._first,g=Pc(a),x;d;)d instanceof Pr?XR(d._targets,r)&&(g?(!oh||d._initted&&d._ts)&&d.globalTime(0)<=a&&d.globalTime(d.totalDuration())>a:!a||d.isActive())&&o.push(d):(x=d.getTweensOf(r,a)).length&&o.push.apply(o,x),d=d._next;return o},t.tweenTo=function(n,a){a=a||{};var o=this,r=Xo(o,n),d=a,g=d.startAt,x=d.onStart,v=d.onStartParams,k=d.immediateRender,E,F=Pr.to(o,Oo({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:a.duration||Math.abs((r-(g&&"time"in g?g.time:o._time))/o.timeScale())||ya,onStart:function(){if(o.pause(),!E){var N=a.duration||Math.abs((r-(g&&"time"in g?g.time:o._time))/o.timeScale());F._dur!==N&&Nf(F,N,0,1).render(F._time,!0,!0),E=1}x&&x.apply(F,v||[])}},a));return k?F.render(0):F},t.tweenFromTo=function(n,a,o){return this.tweenTo(a,Oo({startAt:{time:Xo(this,n)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(n){return n===void 0&&(n=this._time),mk(this,Xo(this,n))},t.previousLabel=function(n){return n===void 0&&(n=this._time),mk(this,Xo(this,n),1)},t.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+ya)},t.shiftChildren=function(n,a,o){o===void 0&&(o=0);var r=this._first,d=this.labels,g;for(n=Ya(n);r;)r._start>=o&&(r._start+=n,r._end+=n),r=r._next;if(a)for(g in d)d[g]>=o&&(d[g]+=n);return Gu(this)},t.invalidate=function(n){var a=this._first;for(this._lock=0;a;)a.invalidate(n),a=a._next;return s.prototype.invalidate.call(this,n)},t.clear=function(n){n===void 0&&(n=!0);for(var a=this._first,o;a;)o=a._next,this.remove(a),a=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Gu(this)},t.totalDuration=function(n){var a=0,o=this,r=o._last,d=Ko,g,x,v;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(v=o.parent;r;)g=r._prev,r._dirty&&r.totalDuration(),x=r._start,x>d&&o._sort&&r._ts&&!o._lock?(o._lock=1,Wl(o,r,x-r._delay,1)._lock=0):d=x,x<0&&r._ts&&(a-=x,(!v&&!o._dp||v&&v.smoothChildTiming)&&(o._start+=Ya(x/o._ts),o._time-=x,o._tTime-=x),o.shiftChildren(-x,!1,-1/0),d=0),r._end>a&&r._ts&&(a=r._end),r=g;Nf(o,o===qa&&o._time>a?o._time:a,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(n){if(qa._ts&&(ET(qa,F_(n,qa)),AT=Eo.frame),Eo.frame>=dk){dk+=Lo.autoSleep||120;var a=qa._first;if((!a||!a._ts)&&Lo.autoSleep&&Eo._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Eo.sleep()}}},e})(Qg);Oo(Vs.prototype,{_lock:0,_hasPause:0,_forcing:0});var m3=function(e,t,i,n,a,o,r){var d=new ro(this._pt,e,t,0,1,iE,null,a),g=0,x=0,v,k,E,F,O,N,$,X;for(d.b=i,d.e=n,i+="",n+="",($=~n.indexOf("random("))&&(n=Zg(n)),o&&(X=[i,n],o(X,e,t),i=X[0],n=X[1]),k=i.match(Qy)||[];v=Qy.exec(n);)F=v[0],O=n.substring(g,v.index),E?E=(E+1)%5:O.substr(-5)==="rgba("&&(E=1),F!==k[x++]&&(N=parseFloat(k[x-1])||0,d._pt={_next:d._pt,p:O||x===1?O:",",s:N,c:F.charAt(1)==="="?Ef(N,F)-N:parseFloat(F)-N,m:E&&E<4?Math.round:0},g=Qy.lastIndex);return d.c=g<n.length?n.substring(g,n.length):"",d.fp=r,(wT.test(n)||$)&&(d.e=0),this._pt=d,d},Tb=function(e,t,i,n,a,o,r,d,g,x){ar(n)&&(n=n(a||0,e,o));var v=e[t],k=i!=="get"?i:ar(v)?g?e[t.indexOf("set")||!ar(e["get"+t.substr(3)])?t:"get"+t.substr(3)](g):e[t]():v,E=ar(v)?g?b3:eE:Mb,F;if(es(n)&&(~n.indexOf("random(")&&(n=Zg(n)),n.charAt(1)==="="&&(F=Ef(k,n)+(bs(k)||0),(F||F===0)&&(n=F))),!x||k!==n||av)return!isNaN(k*n)&&n!==""?(F=new ro(this._pt,e,t,+k||0,n-(k||0),typeof v=="boolean"?S3:tE,0,E),g&&(F.fp=g),r&&F.modifier(r,this,e),this._pt=F):(!v&&!(t in e)&&wb(t,n),m3.call(this,e,t,k,n,E,d||Lo.stringFilter,g))},_3=function(e,t,i,n,a){if(ar(e)&&(e=Mg(e,a,t,i,n)),!Zl(e)||e.style&&e.nodeType||ks(e)||vT(e))return es(e)?Mg(e,a,t,i,n):e;var o={},r;for(r in e)o[r]=Mg(e[r],a,t,i,n);return o},KT=function(e,t,i,n,a,o){var r,d,g,x;if(Ao[e]&&(r=new Ao[e]).init(a,r.rawVars?t[e]:_3(t[e],n,a,o,i),i,n,o)!==!1&&(i._pt=d=new ro(i._pt,a,e,0,1,r.render,r,0,r.priority),i!==kf))for(g=i._ptLookup[i._targets.indexOf(a)],x=r._props.length;x--;)g[r._props[x]]=d;return r},oh,av,Eb=function s(e,t,i){var n=e.vars,a=n.ease,o=n.startAt,r=n.immediateRender,d=n.lazy,g=n.onUpdate,x=n.runBackwards,v=n.yoyoEase,k=n.keyframes,E=n.autoRevert,F=e._dur,O=e._startAt,N=e._targets,$=e.parent,X=$&&$.data==="nested"?$.vars.targets:N,K=e._overwrite==="auto"&&!xb,ie=e.timeline,ee,le,te,he,de,ke,De,Ae,$e,et,Ie,at,qe;if(ie&&(!k||!a)&&(a="none"),e._ease=Wu(a,zf.ease),e._yEase=v?XT(Wu(v===!0?a:v,zf.ease)):0,v&&e._yoyo&&!e._repeat&&(v=e._yEase,e._yEase=e._ease,e._ease=v),e._from=!ie&&!!n.runBackwards,!ie||k&&!n.stagger){if(Ae=N[0]?Uu(N[0]).harness:0,at=Ae&&n[Ae.prop],ee=z_(n,Sb),O&&(O._zTime<0&&O.progress(1),t<0&&x&&r&&!E?O.render(-1,!0):O.revert(x&&F?f_:WR),O._lazy=0),o){if(bh(e._startAt=Pr.set(N,Oo({data:"isStart",overwrite:!1,parent:$,immediateRender:!0,lazy:!O&&no(d),startAt:null,delay:0,onUpdate:g&&function(){return Io(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(cs||!r&&!E)&&e._startAt.revert(f_),r&&F&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(x&&F&&!O){if(t&&(r=!1),te=Oo({overwrite:!1,data:"isFromStart",lazy:r&&!O&&no(d),immediateRender:r,stagger:0,parent:$},ee),at&&(te[Ae.prop]=at),bh(e._startAt=Pr.set(N,te)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(cs?e._startAt.revert(f_):e._startAt.render(-1,!0)),e._zTime=t,!r)s(e._startAt,ya,ya);else if(!t)return}for(e._pt=e._ptCache=0,d=F&&no(d)||d&&!F,le=0;le<N.length;le++){if(de=N[le],De=de._gsap||Cb(N)[le]._gsap,e._ptLookup[le]=et={},Q1[De.id]&&mh.length&&O_(),Ie=X===N?le:X.indexOf(de),Ae&&($e=new Ae).init(de,at||ee,e,Ie,X)!==!1&&(e._pt=he=new ro(e._pt,de,$e.name,0,1,$e.render,$e,0,$e.priority),$e._props.forEach(function(kt){et[kt]=he}),$e.priority&&(ke=1)),!Ae||at)for(te in ee)Ao[te]&&($e=KT(te,ee,e,Ie,de,X))?$e.priority&&(ke=1):et[te]=he=Tb.call(e,de,te,"get",ee[te],Ie,X,0,n.stringFilter);e._op&&e._op[le]&&e.kill(de,e._op[le]),K&&e._pt&&(oh=e,qa.killTweensOf(de,et,e.globalTime(t)),qe=!e.parent,oh=0),e._pt&&d&&(Q1[De.id]=1)}ke&&nE(e),e._onInit&&e._onInit(e)}e._onUpdate=g,e._initted=(!e._op||e._pt)&&!qe,k&&t<=0&&ie.render(Ko,!0,!0)},x3=function(e,t,i,n,a,o,r,d){var g=(e._pt&&e._ptCache||(e._ptCache={}))[t],x,v,k,E;if(!g)for(g=e._ptCache[t]=[],k=e._ptLookup,E=e._targets.length;E--;){if(x=k[E][t],x&&x.d&&x.d._pt)for(x=x.d._pt;x&&x.p!==t&&x.fp!==t;)x=x._next;if(!x)return av=1,e.vars[t]="+=0",Eb(e,r),av=0,d?Yg(t+" not eligible for reset"):1;g.push(x)}for(E=g.length;E--;)v=g[E],x=v._pt||v,x.s=(n||n===0)&&!a?n:x.s+(n||0)+o*x.c,x.c=i-x.s,v.e&&(v.e=_r(i)+bs(v.e)),v.b&&(v.b=x.s+bs(v.b))},y3=function(e,t){var i=e[0]?Uu(e[0]).harness:0,n=i&&i.aliases,a,o,r,d;if(!n)return t;a=Ff({},t);for(o in n)if(o in a)for(d=n[o].split(","),r=d.length;r--;)a[d[r]]=a[o];return a},v3=function(e,t,i,n){var a=t.ease||n||"power1.inOut",o,r;if(ks(t))r=i[e]||(i[e]=[]),t.forEach(function(d,g){return r.push({t:g/(t.length-1)*100,v:d,e:a})});else for(o in t)r=i[o]||(i[o]=[]),o==="ease"||r.push({t:parseFloat(e),v:t[o],e:a})},Mg=function(e,t,i,n,a){return ar(e)?e.call(t,i,n,a):es(e)&&~e.indexOf("random(")?Zg(e):e},QT=kb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",JT={};ao(QT+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return JT[s]=1});var Pr=(function(s){xT(e,s);function e(i,n,a,o){var r;typeof n=="number"&&(a.duration=n,n=a,a=null),r=s.call(this,o?n:Tg(n))||this;var d=r.vars,g=d.duration,x=d.delay,v=d.immediateRender,k=d.stagger,E=d.overwrite,F=d.keyframes,O=d.defaults,N=d.scrollTrigger,$=d.yoyoEase,X=n.parent||qa,K=(ks(i)||vT(i)?Pc(i[0]):"length"in n)?[i]:Qo(i),ie,ee,le,te,he,de,ke,De;if(r._targets=K.length?Cb(K):Yg("GSAP target "+i+" not found. https://gsap.com",!Lo.nullTargetWarn)||[],r._ptLookup=[],r._overwrite=E,F||k||D0(g)||D0(x)){if(n=r.vars,ie=r.timeline=new Vs({data:"nested",defaults:O||{},targets:X&&X.data==="nested"?X.vars.targets:K}),ie.kill(),ie.parent=ie._dp=vc(r),ie._start=0,k||D0(g)||D0(x)){if(te=K.length,ke=k&&FT(k),Zl(k))for(he in k)~QT.indexOf(he)&&(De||(De={}),De[he]=k[he]);for(ee=0;ee<te;ee++)le=z_(n,JT),le.stagger=0,$&&(le.yoyoEase=$),De&&Ff(le,De),de=K[ee],le.duration=+Mg(g,vc(r),ee,de,K),le.delay=(+Mg(x,vc(r),ee,de,K)||0)-r._delay,!k&&te===1&&le.delay&&(r._delay=x=le.delay,r._start+=x,le.delay=0),ie.to(de,le,ke?ke(ee,de,K):0),ie._ease=Tn.none;ie.duration()?g=x=0:r.timeline=0}else if(F){Tg(Oo(ie.vars.defaults,{ease:"none"})),ie._ease=Wu(F.ease||n.ease||"none");var Ae=0,$e,et,Ie;if(ks(F))F.forEach(function(at){return ie.to(K,at,">")}),ie.duration();else{le={};for(he in F)he==="ease"||he==="easeEach"||v3(he,F[he],le,F.easeEach);for(he in le)for($e=le[he].sort(function(at,qe){return at.t-qe.t}),Ae=0,ee=0;ee<$e.length;ee++)et=$e[ee],Ie={ease:et.e,duration:(et.t-(ee?$e[ee-1].t:0))/100*g},Ie[he]=et.v,ie.to(K,Ie,Ae),Ae+=Ie.duration;ie.duration()<g&&ie.to({},{duration:g-ie.duration()})}}g||r.duration(g=ie.duration())}else r.timeline=0;return E===!0&&!xb&&(oh=vc(r),qa.killTweensOf(K),oh=0),Wl(X,vc(r),a),n.reversed&&r.reverse(),n.paused&&r.paused(!0),(v||!g&&!F&&r._start===Ya(X._time)&&no(v)&&KR(vc(r))&&X.data!=="nested")&&(r._tTime=-ya,r.render(Math.max(0,-x)||0)),N&&DT(vc(r),N),r}var t=e.prototype;return t.render=function(n,a,o){var r=this._time,d=this._tDur,g=this._dur,x=n<0,v=n>d-ya&&!x?d:n<ya?0:n,k,E,F,O,N,$,X,K,ie;if(!g)JR(this,n,a,o);else if(v!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==x||this._lazy){if(k=v,K=this.timeline,this._repeat){if(O=g+this._rDelay,this._repeat<-1&&x)return this.totalTime(O*100+n,a,o);if(k=Ya(v%O),v===d?(F=this._repeat,k=g):(N=Ya(v/O),F=~~N,F&&F===N?(k=g,F--):k>g&&(k=g)),$=this._yoyo&&F&1,$&&(ie=this._yEase,k=g-k),N=Bf(this._tTime,O),k===r&&!o&&this._initted&&F===N)return this._tTime=v,this;F!==N&&(K&&this._yEase&&YT(K,$),this.vars.repeatRefresh&&!$&&!this._lock&&k!==O&&this._initted&&(this._lock=o=1,this.render(Ya(O*F),!0).invalidate()._lock=0))}if(!this._initted){if(RT(this,x?n:k,o,a,v))return this._tTime=0,this;if(r!==this._time&&!(o&&this.vars.repeatRefresh&&F!==N))return this;if(g!==this._dur)return this.render(n,a,o)}if(this._tTime=v,this._time=k,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=X=(ie||this._ease)(k/g),this._from&&(this.ratio=X=1-X),!r&&v&&!a&&!N&&(Io(this,"onStart"),this._tTime!==v))return this;for(E=this._pt;E;)E.r(X,E.d),E=E._next;K&&K.render(n<0?n:K._dur*K._ease(k/this._dur),a,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!a&&(x&&J1(this,n,a,o),Io(this,"onUpdate")),this._repeat&&F!==N&&this.vars.onRepeat&&!a&&this.parent&&Io(this,"onRepeat"),(v===this._tDur||!v)&&this._tTime===v&&(x&&!this._onUpdate&&J1(this,n,!0,!0),(n||!g)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&bh(this,1),!a&&!(x&&!r)&&(v||r||$)&&(Io(this,v===d?"onComplete":"onReverseComplete",!0),this._prom&&!(v<d&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),s.prototype.invalidate.call(this,n)},t.resetTo=function(n,a,o,r,d){Kg||Eo.wake(),this._ts||this.play();var g=Math.min(this._dur,(this._dp._time-this._start)*this._ts),x;return this._initted||Eb(this,g),x=this._ease(g/this._dur),x3(this,n,a,o,r,x,g,d)?this.resetTo(n,a,o,r,1):(yx(this,0),this.parent||PT(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(n,a){if(a===void 0&&(a="all"),!n&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?fg(this):this.scrollTrigger&&this.scrollTrigger.kill(!!cs),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,a,oh&&oh.vars.overwrite!==!0)._first||fg(this),this.parent&&o!==this.timeline.totalDuration()&&Nf(this,this._dur*this.timeline._tDur/o,0,1),this}var r=this._targets,d=n?Qo(n):r,g=this._ptLookup,x=this._pt,v,k,E,F,O,N,$;if((!a||a==="all")&&qR(r,d))return a==="all"&&(this._pt=0),fg(this);for(v=this._op=this._op||[],a!=="all"&&(es(a)&&(O={},ao(a,function(X){return O[X]=1}),a=O),a=y3(r,a)),$=r.length;$--;)if(~d.indexOf(r[$])){k=g[$],a==="all"?(v[$]=a,F=k,E={}):(E=v[$]=v[$]||{},F=a);for(O in F)N=k&&k[O],N&&((!("kill"in N.d)||N.d.kill(O)===!0)&&_x(this,N,"_pt"),delete k[O]),E!=="all"&&(E[O]=1)}return this._initted&&!this._pt&&x&&fg(this),this},e.to=function(n,a){return new e(n,a,arguments[2])},e.from=function(n,a){return Eg(1,arguments)},e.delayedCall=function(n,a,o,r){return new e(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:a,onReverseComplete:a,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:r})},e.fromTo=function(n,a,o){return Eg(2,arguments)},e.set=function(n,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new e(n,a)},e.killTweensOf=function(n,a,o){return qa.killTweensOf(n,a,o)},e})(Qg);Oo(Pr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ao("staggerTo,staggerFrom,staggerFromTo",function(s){Pr[s]=function(){var e=new Vs,t=tv.call(arguments,0);return t.splice(s==="staggerFromTo"?5:4,0,0),e[s].apply(e,t)}});var Mb=function(e,t,i){return e[t]=i},eE=function(e,t,i){return e[t](i)},b3=function(e,t,i,n){return e[t](n.fp,i)},w3=function(e,t,i){return e.setAttribute(t,i)},Ib=function(e,t){return ar(e[t])?eE:yb(e[t])&&e.setAttribute?w3:Mb},tE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},S3=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},iE=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(e===1&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},Pb=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},k3=function(e,t,i,n){for(var a=this._pt,o;a;)o=a._next,a.p===n&&a.modifier(e,t,i),a=o},C3=function(e){for(var t=this._pt,i,n;t;)n=t._next,t.p===e&&!t.op||t.op===e?_x(this,t,"_pt"):t.dep||(i=1),t=n;return!i},A3=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},nE=function(e){for(var t=e._pt,i,n,a,o;t;){for(i=t._next,n=a;n&&n.pr>t.pr;)n=n._next;(t._prev=n?n._prev:o)?t._prev._next=t:a=t,(t._next=n)?n._prev=t:o=t,t=i}e._pt=a},ro=(function(){function s(t,i,n,a,o,r,d,g,x){this.t=i,this.s=a,this.c=o,this.p=n,this.r=r||tE,this.d=d||this,this.set=g||Mb,this.pr=x||0,this._next=t,t&&(t._prev=this)}var e=s.prototype;return e.modifier=function(i,n,a){this.mSet=this.mSet||this.set,this.set=A3,this.m=i,this.mt=a,this.tween=n},s})();ao(kb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return Sb[s]=1});Ro.TweenMax=Ro.TweenLite=Pr;Ro.TimelineLite=Ro.TimelineMax=Vs;qa=new Vs({sortChildren:!1,defaults:zf,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Lo.stringFilter=$T;var $u=[],g_={},T3=[],xk=0,E3=0,n1=function(e){return(g_[e]||T3).map(function(t){return t()})},rv=function(){var e=Date.now(),t=[];e-xk>2&&(n1("matchMediaInit"),$u.forEach(function(i){var n=i.queries,a=i.conditions,o,r,d,g;for(r in n)o=Hl.matchMedia(n[r]).matches,o&&(d=1),o!==a[r]&&(a[r]=o,g=1);g&&(i.revert(),d&&t.push(i))}),n1("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),xk=e,n1("matchMedia"))},aE=(function(){function s(t,i){this.selector=i&&iv(i),this.data=[],this._r=[],this.isReverted=!1,this.id=E3++,t&&this.add(t)}var e=s.prototype;return e.add=function(i,n,a){ar(i)&&(a=n,n=i,i=ar);var o=this,r=function(){var g=Va,x=o.selector,v;return g&&g!==o&&g.data.push(o),a&&(o.selector=iv(a)),Va=o,v=n.apply(o,arguments),ar(v)&&o._r.push(v),Va=g,o.selector=x,o.isReverted=!1,v};return o.last=r,i===ar?r(o,function(d){return o.add(null,d)}):i?o[i]=r:r},e.ignore=function(i){var n=Va;Va=null,i(this),Va=n},e.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof s?i.push.apply(i,n.getTweens()):n instanceof Pr&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,n){var a=this;if(i?(function(){for(var r=a.getTweens(),d=a.data.length,g;d--;)g=a.data[d],g.data==="isFlip"&&(g.revert(),g.getChildren(!0,!0,!1).forEach(function(x){return r.splice(r.indexOf(x),1)}));for(r.map(function(x){return{g:x._dur||x._delay||x._sat&&!x._sat.vars.immediateRender?x.globalTime(0):-1/0,t:x}}).sort(function(x,v){return v.g-x.g||-1/0}).forEach(function(x){return x.t.revert(i)}),d=a.data.length;d--;)g=a.data[d],g instanceof Vs?g.data!=="nested"&&(g.scrollTrigger&&g.scrollTrigger.revert(),g.kill()):!(g instanceof Pr)&&g.revert&&g.revert(i);a._r.forEach(function(x){return x(i,a)}),a.isReverted=!0})():this.data.forEach(function(r){return r.kill&&r.kill()}),this.clear(),n)for(var o=$u.length;o--;)$u[o].id===this.id&&$u.splice(o,1)},e.revert=function(i){this.kill(i||{})},s})(),M3=(function(){function s(t){this.contexts=[],this.scope=t,Va&&Va.data.push(this)}var e=s.prototype;return e.add=function(i,n,a){Zl(i)||(i={matches:i});var o=new aE(0,a||this.scope),r=o.conditions={},d,g,x;Va&&!o.selector&&(o.selector=Va.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=i;for(g in i)g==="all"?x=1:(d=Hl.matchMedia(i[g]),d&&($u.indexOf(o)<0&&$u.push(o),(r[g]=d.matches)&&(x=1),d.addListener?d.addListener(rv):d.addEventListener("change",rv)));return x&&n(o,function(v){return o.add(null,v)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},s})(),B_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(n){return UT(n)})},timeline:function(e){return new Vs(e)},getTweensOf:function(e,t){return qa.getTweensOf(e,t)},getProperty:function(e,t,i,n){es(e)&&(e=Qo(e)[0]);var a=Uu(e||{}).get,o=i?IT:MT;return i==="native"&&(i=""),e&&(t?o((Ao[t]&&Ao[t].get||a)(e,t,i,n)):function(r,d,g){return o((Ao[r]&&Ao[r].get||a)(e,r,d,g))})},quickSetter:function(e,t,i){if(e=Qo(e),e.length>1){var n=e.map(function(x){return oo.quickSetter(x,t,i)}),a=n.length;return function(x){for(var v=a;v--;)n[v](x)}}e=e[0]||{};var o=Ao[t],r=Uu(e),d=r.harness&&(r.harness.aliases||{})[t]||t,g=o?function(x){var v=new o;kf._pt=0,v.init(e,i?x+i:x,kf,0,[e]),v.render(1,v),kf._pt&&Pb(1,kf)}:r.set(e,d);return o?g:function(x){return g(e,d,i?x+i:x,r,1)}},quickTo:function(e,t,i){var n,a=oo.to(e,Oo((n={},n[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(d,g,x){return a.resetTo(t,d,g,x)};return o.tween=a,o},isTweening:function(e){return qa.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Wu(e.ease,zf.ease)),fk(zf,e||{})},config:function(e){return fk(Lo,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,a=e.defaults,o=e.extendTimeline;(n||"").split(",").forEach(function(r){return r&&!Ao[r]&&!Ro[r]&&Yg(t+" effect requires "+r+" plugin.")}),Jy[t]=function(r,d,g){return i(Qo(r),Oo(d||{},a),g)},o&&(Vs.prototype[t]=function(r,d,g){return this.add(Jy[t](r,Zl(d)?d:(g=d)&&{},this),g)})},registerEase:function(e,t){Tn[e]=Wu(t)},parseEase:function(e,t){return arguments.length?Wu(e,t):Tn},getById:function(e){return qa.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Vs(e),n,a;for(i.smoothChildTiming=no(e.smoothChildTiming),qa.remove(i),i._dp=0,i._time=i._tTime=qa._time,n=qa._first;n;)a=n._next,(t||!(!n._dur&&n instanceof Pr&&n.vars.onComplete===n._targets[0]))&&Wl(i,n,n._start-n._delay),n=a;return Wl(qa,i,0),i},context:function(e,t){return e?new aE(e,t):Va},matchMedia:function(e){return new M3(e)},matchMediaRefresh:function(){return $u.forEach(function(e){var t=e.conditions,i,n;for(n in t)t[n]&&(t[n]=!1,i=1);i&&e.revert()})||rv()},addEventListener:function(e,t){var i=g_[e]||(g_[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=g_[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:o3,wrapYoyo:l3,distribute:FT,random:NT,snap:BT,normalize:s3,getUnit:bs,clamp:i3,splitColor:GT,toArray:Qo,selector:iv,mapRange:VT,pipe:a3,unitize:r3,interpolate:c3,shuffle:zT},install:kT,effects:Jy,ticker:Eo,updateRoot:Vs.updateRoot,plugins:Ao,globalTimeline:qa,core:{PropTween:ro,globals:CT,Tween:Pr,Timeline:Vs,Animation:Qg,getCache:Uu,_removeLinkedListItem:_x,reverting:function(){return cs},context:function(e){return e&&Va&&(Va.data.push(e),e._ctx=Va),Va},suppressOverwrites:function(e){return xb=e}}};ao("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return B_[s]=Pr[s]});Eo.add(Vs.updateRoot);kf=B_.to({},{duration:0});var I3=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},P3=function(e,t){var i=e._targets,n,a,o;for(n in t)for(a=i.length;a--;)o=e._ptLookup[a][n],o&&(o=o.d)&&(o._pt&&(o=I3(o,n)),o&&o.modifier&&o.modifier(t[n],e,i[a],n))},a1=function(e,t){return{name:e,headless:1,rawVars:1,init:function(n,a,o){o._onInit=function(r){var d,g;if(es(a)&&(d={},ao(a,function(x){return d[x]=1}),a=d),t){d={};for(g in a)d[g]=t(a[g]);a=d}P3(r,a)}}}},oo=B_.registerPlugin({name:"attr",init:function(e,t,i,n,a){var o,r,d;this.tween=i;for(o in t)d=e.getAttribute(o)||"",r=this.add(e,"setAttribute",(d||0)+"",t[o],n,a,0,0,o),r.op=o,r.b=d,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)cs?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},a1("roundProps",nv),a1("modifiers"),a1("snap",BT))||B_;Pr.version=Vs.version=oo.version="3.14.2";ST=1;vb()&&jf();Tn.Power0;Tn.Power1;Tn.Power2;Tn.Power3;Tn.Power4;Tn.Linear;Tn.Quad;Tn.Cubic;Tn.Quart;Tn.Quint;Tn.Strong;Tn.Elastic;Tn.Back;Tn.SteppedEase;Tn.Bounce;Tn.Sine;Tn.Expo;Tn.Circ;var yk,lh,Mf,Lb,Fu,vk,Db,L3=function(){return typeof window<"u"},Lc={},Eu=180/Math.PI,If=Math.PI/180,pf=Math.atan2,bk=1e8,Rb=/([A-Z])/g,D3=/(left|right|width|margin|padding|x)/i,R3=/[\s,\(]\S/,$l={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},sv=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},O3=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},z3=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},F3=function(e,t){return t.set(t.t,t.p,e===1?t.e:e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},B3=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},rE=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},sE=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},N3=function(e,t,i){return e.style[t]=i},j3=function(e,t,i){return e.style.setProperty(t,i)},V3=function(e,t,i){return e._gsap[t]=i},H3=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},U3=function(e,t,i,n,a){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(a,o)},G3=function(e,t,i,n,a){var o=e._gsap;o[t]=i,o.renderTransform(a,o)},Za="transform",so=Za+"Origin",W3=function s(e,t){var i=this,n=this.target,a=n.style,o=n._gsap;if(e in Lc&&a){if(this.tfm=this.tfm||{},e!=="transform")e=$l[e]||e,~e.indexOf(",")?e.split(",").forEach(function(r){return i.tfm[r]=wc(n,r)}):this.tfm[e]=o.x?o[e]:wc(n,e),e===so&&(this.tfm.zOrigin=o.zOrigin);else return $l.transform.split(",").forEach(function(r){return s.call(i,r,t)});if(this.props.indexOf(Za)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(so,t,"")),e=Za}(a||t)&&this.props.push(e,t,a[e])},oE=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},$3=function(){var e=this.props,t=this.target,i=t.style,n=t._gsap,a,o;for(a=0;a<e.length;a+=3)e[a+1]?e[a+1]===2?t[e[a]](e[a+2]):t[e[a]]=e[a+2]:e[a+2]?i[e[a]]=e[a+2]:i.removeProperty(e[a].substr(0,2)==="--"?e[a]:e[a].replace(Rb,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),a=Db(),(!a||!a.isStart)&&!i[Za]&&(oE(i),n.zOrigin&&i[so]&&(i[so]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},lE=function(e,t){var i={target:e,props:[],revert:$3,save:W3};return e._gsap||oo.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(n){return i.save(n)}),i},cE,ov=function(e,t){var i=lh.createElementNS?lh.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):lh.createElement(e);return i&&i.style?i:lh.createElement(e)},Po=function s(e,t,i){var n=getComputedStyle(e);return n[t]||n.getPropertyValue(t.replace(Rb,"-$1").toLowerCase())||n.getPropertyValue(t)||!i&&s(e,Vf(t)||t,1)||""},wk="O,Moz,ms,Ms,Webkit".split(","),Vf=function(e,t,i){var n=t||Fu,a=n.style,o=5;if(e in a&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(wk[o]+e in a););return o<0?null:(o===3?"ms":o>=0?wk[o]:"")+e},lv=function(){L3()&&window.document&&(yk=window,lh=yk.document,Mf=lh.documentElement,Fu=ov("div")||{style:{}},ov("div"),Za=Vf(Za),so=Za+"Origin",Fu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",cE=!!Vf("perspective"),Db=oo.core.reverting,Lb=1)},Sk=function(e){var t=e.ownerSVGElement,i=ov("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=e.cloneNode(!0),a;n.style.display="block",i.appendChild(n),Mf.appendChild(i);try{a=n.getBBox()}catch{}return i.removeChild(n),Mf.removeChild(i),a},kk=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},hE=function(e){var t,i;try{t=e.getBBox()}catch{t=Sk(e),i=1}return t&&(t.width||t.height)||i||(t=Sk(e)),t&&!t.width&&!t.x&&!t.y?{x:+kk(e,["x","cx","x1"])||0,y:+kk(e,["y","cy","y1"])||0,width:0,height:0}:t},uE=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&hE(e))},wh=function(e,t){if(t){var i=e.style,n;t in Lc&&t!==so&&(t=Za),i.removeProperty?(n=t.substr(0,2),(n==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(n==="--"?t:t.replace(Rb,"-$1").toLowerCase())):i.removeAttribute(t)}},ch=function(e,t,i,n,a,o){var r=new ro(e._pt,t,i,0,1,o?sE:rE);return e._pt=r,r.b=n,r.e=a,e._props.push(i),r},Ck={deg:1,rad:1,turn:1},X3={grid:1,flex:1},Sh=function s(e,t,i,n){var a=parseFloat(i)||0,o=(i+"").trim().substr((a+"").length)||"px",r=Fu.style,d=D3.test(t),g=e.tagName.toLowerCase()==="svg",x=(g?"client":"offset")+(d?"Width":"Height"),v=100,k=n==="px",E=n==="%",F,O,N,$;if(n===o||!a||Ck[n]||Ck[o])return a;if(o!=="px"&&!k&&(a=s(e,t,i,"px")),$=e.getCTM&&uE(e),(E||o==="%")&&(Lc[t]||~t.indexOf("adius")))return F=$?e.getBBox()[d?"width":"height"]:e[x],_r(E?a/F*v:a/100*F);if(r[d?"width":"height"]=v+(k?o:n),O=n!=="rem"&&~t.indexOf("adius")||n==="em"&&e.appendChild&&!g?e:e.parentNode,$&&(O=(e.ownerSVGElement||{}).parentNode),(!O||O===lh||!O.appendChild)&&(O=lh.body),N=O._gsap,N&&E&&N.width&&d&&N.time===Eo.time&&!N.uncache)return _r(a/N.width*v);if(E&&(t==="height"||t==="width")){var X=e.style[t];e.style[t]=v+n,F=e[x],X?e.style[t]=X:wh(e,t)}else(E||o==="%")&&!X3[Po(O,"display")]&&(r.position=Po(e,"position")),O===e&&(r.position="static"),O.appendChild(Fu),F=Fu[x],O.removeChild(Fu),r.position="absolute";return d&&E&&(N=Uu(O),N.time=Eo.time,N.width=O[x]),_r(k?F*a/v:F&&a?v/F*a:0)},wc=function(e,t,i,n){var a;return Lb||lv(),t in $l&&t!=="transform"&&(t=$l[t],~t.indexOf(",")&&(t=t.split(",")[0])),Lc[t]&&t!=="transform"?(a=em(e,n),a=t!=="transformOrigin"?a[t]:a.svg?a.origin:j_(Po(e,so))+" "+a.zOrigin+"px"):(a=e.style[t],(!a||a==="auto"||n||~(a+"").indexOf("calc("))&&(a=N_[t]&&N_[t](e,t,i)||Po(e,t)||TT(e,t)||(t==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?Sh(e,t,a,i)+i:a},Y3=function(e,t,i,n){if(!i||i==="none"){var a=Vf(t,e,1),o=a&&Po(e,a,1);o&&o!==i?(t=a,i=o):t==="borderColor"&&(i=Po(e,"borderTopColor"))}var r=new ro(this._pt,e.style,t,0,1,iE),d=0,g=0,x,v,k,E,F,O,N,$,X,K,ie,ee;if(r.b=i,r.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=Po(e,n.substring(4,n.indexOf(")")))),n==="auto"&&(O=e.style[t],e.style[t]=n,n=Po(e,t)||n,O?e.style[t]=O:wh(e,t)),x=[i,n],$T(x),i=x[0],n=x[1],k=i.match(Sf)||[],ee=n.match(Sf)||[],ee.length){for(;v=Sf.exec(n);)N=v[0],X=n.substring(d,v.index),F?F=(F+1)%5:(X.substr(-5)==="rgba("||X.substr(-5)==="hsla(")&&(F=1),N!==(O=k[g++]||"")&&(E=parseFloat(O)||0,ie=O.substr((E+"").length),N.charAt(1)==="="&&(N=Ef(E,N)+ie),$=parseFloat(N),K=N.substr(($+"").length),d=Sf.lastIndex-K.length,K||(K=K||Lo.units[t]||ie,d===n.length&&(n+=K,r.e+=K)),ie!==K&&(E=Sh(e,t,O,K)||0),r._pt={_next:r._pt,p:X||g===1?X:",",s:E,c:$-E,m:F&&F<4||t==="zIndex"?Math.round:0});r.c=d<n.length?n.substring(d,n.length):""}else r.r=t==="display"&&n==="none"?sE:rE;return wT.test(n)&&(r.e=0),this._pt=r,r},Ak={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},q3=function(e){var t=e.split(" "),i=t[0],n=t[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(e=i,i=n,n=e),t[0]=Ak[i]||i,t[1]=Ak[n]||n,t.join(" ")},Z3=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,n=i.style,a=t.u,o=i._gsap,r,d,g;if(a==="all"||a===!0)n.cssText="",d=1;else for(a=a.split(","),g=a.length;--g>-1;)r=a[g],Lc[r]&&(d=1,r=r==="transformOrigin"?so:Za),wh(i,r);d&&(wh(i,Za),o&&(o.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",em(i,1),o.uncache=1,oE(n)))}},N_={clearProps:function(e,t,i,n,a){if(a.data!=="isFromStart"){var o=e._pt=new ro(e._pt,t,i,0,0,Z3);return o.u=n,o.pr=-10,o.tween=a,e._props.push(i),1}}},Jg=[1,0,0,1,0,0],dE={},fE=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Tk=function(e){var t=Po(e,Za);return fE(t)?Jg:t.substr(7).match(bT).map(_r)},Ob=function(e,t){var i=e._gsap||Uu(e),n=e.style,a=Tk(e),o,r,d,g;return i.svg&&e.getAttribute("transform")?(d=e.transform.baseVal.consolidate().matrix,a=[d.a,d.b,d.c,d.d,d.e,d.f],a.join(",")==="1,0,0,1,0,0"?Jg:a):(a===Jg&&!e.offsetParent&&e!==Mf&&!i.svg&&(d=n.display,n.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(g=1,r=e.nextElementSibling,Mf.appendChild(e)),a=Tk(e),d?n.display=d:wh(e,"display"),g&&(r?o.insertBefore(e,r):o?o.appendChild(e):Mf.removeChild(e))),t&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},cv=function(e,t,i,n,a,o){var r=e._gsap,d=a||Ob(e,!0),g=r.xOrigin||0,x=r.yOrigin||0,v=r.xOffset||0,k=r.yOffset||0,E=d[0],F=d[1],O=d[2],N=d[3],$=d[4],X=d[5],K=t.split(" "),ie=parseFloat(K[0])||0,ee=parseFloat(K[1])||0,le,te,he,de;i?d!==Jg&&(te=E*N-F*O)&&(he=ie*(N/te)+ee*(-O/te)+(O*X-N*$)/te,de=ie*(-F/te)+ee*(E/te)-(E*X-F*$)/te,ie=he,ee=de):(le=hE(e),ie=le.x+(~K[0].indexOf("%")?ie/100*le.width:ie),ee=le.y+(~(K[1]||K[0]).indexOf("%")?ee/100*le.height:ee)),n||n!==!1&&r.smooth?($=ie-g,X=ee-x,r.xOffset=v+($*E+X*O)-$,r.yOffset=k+($*F+X*N)-X):r.xOffset=r.yOffset=0,r.xOrigin=ie,r.yOrigin=ee,r.smooth=!!n,r.origin=t,r.originIsAbsolute=!!i,e.style[so]="0px 0px",o&&(ch(o,r,"xOrigin",g,ie),ch(o,r,"yOrigin",x,ee),ch(o,r,"xOffset",v,r.xOffset),ch(o,r,"yOffset",k,r.yOffset)),e.setAttribute("data-svg-origin",ie+" "+ee)},em=function(e,t){var i=e._gsap||new ZT(e);if("x"in i&&!t&&!i.uncache)return i;var n=e.style,a=i.scaleX<0,o="px",r="deg",d=getComputedStyle(e),g=Po(e,so)||"0",x,v,k,E,F,O,N,$,X,K,ie,ee,le,te,he,de,ke,De,Ae,$e,et,Ie,at,qe,kt,vt,He,Nt,Qt,Ai,jt,ui;return x=v=k=O=N=$=X=K=ie=0,E=F=1,i.svg=!!(e.getCTM&&uE(e)),d.translate&&((d.translate!=="none"||d.scale!=="none"||d.rotate!=="none")&&(n[Za]=(d.translate!=="none"?"translate3d("+(d.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(d.rotate!=="none"?"rotate("+d.rotate+") ":"")+(d.scale!=="none"?"scale("+d.scale.split(" ").join(",")+") ":"")+(d[Za]!=="none"?d[Za]:"")),n.scale=n.rotate=n.translate="none"),te=Ob(e,i.svg),i.svg&&(i.uncache?(kt=e.getBBox(),g=i.xOrigin-kt.x+"px "+(i.yOrigin-kt.y)+"px",qe=""):qe=!t&&e.getAttribute("data-svg-origin"),cv(e,qe||g,!!qe||i.originIsAbsolute,i.smooth!==!1,te)),ee=i.xOrigin||0,le=i.yOrigin||0,te!==Jg&&(De=te[0],Ae=te[1],$e=te[2],et=te[3],x=Ie=te[4],v=at=te[5],te.length===6?(E=Math.sqrt(De*De+Ae*Ae),F=Math.sqrt(et*et+$e*$e),O=De||Ae?pf(Ae,De)*Eu:0,X=$e||et?pf($e,et)*Eu+O:0,X&&(F*=Math.abs(Math.cos(X*If))),i.svg&&(x-=ee-(ee*De+le*$e),v-=le-(ee*Ae+le*et))):(ui=te[6],Ai=te[7],He=te[8],Nt=te[9],Qt=te[10],jt=te[11],x=te[12],v=te[13],k=te[14],he=pf(ui,Qt),N=he*Eu,he&&(de=Math.cos(-he),ke=Math.sin(-he),qe=Ie*de+He*ke,kt=at*de+Nt*ke,vt=ui*de+Qt*ke,He=Ie*-ke+He*de,Nt=at*-ke+Nt*de,Qt=ui*-ke+Qt*de,jt=Ai*-ke+jt*de,Ie=qe,at=kt,ui=vt),he=pf(-$e,Qt),$=he*Eu,he&&(de=Math.cos(-he),ke=Math.sin(-he),qe=De*de-He*ke,kt=Ae*de-Nt*ke,vt=$e*de-Qt*ke,jt=et*ke+jt*de,De=qe,Ae=kt,$e=vt),he=pf(Ae,De),O=he*Eu,he&&(de=Math.cos(he),ke=Math.sin(he),qe=De*de+Ae*ke,kt=Ie*de+at*ke,Ae=Ae*de-De*ke,at=at*de-Ie*ke,De=qe,Ie=kt),N&&Math.abs(N)+Math.abs(O)>359.9&&(N=O=0,$=180-$),E=_r(Math.sqrt(De*De+Ae*Ae+$e*$e)),F=_r(Math.sqrt(at*at+ui*ui)),he=pf(Ie,at),X=Math.abs(he)>2e-4?he*Eu:0,ie=jt?1/(jt<0?-jt:jt):0),i.svg&&(qe=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!fE(Po(e,Za)),qe&&e.setAttribute("transform",qe))),Math.abs(X)>90&&Math.abs(X)<270&&(a?(E*=-1,X+=O<=0?180:-180,O+=O<=0?180:-180):(F*=-1,X+=X<=0?180:-180)),t=t||i.uncache,i.x=x-((i.xPercent=x&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-x)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=v-((i.yPercent=v&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-v)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=k+o,i.scaleX=_r(E),i.scaleY=_r(F),i.rotation=_r(O)+r,i.rotationX=_r(N)+r,i.rotationY=_r($)+r,i.skewX=X+r,i.skewY=K+r,i.transformPerspective=ie+o,(i.zOrigin=parseFloat(g.split(" ")[2])||!t&&i.zOrigin||0)&&(n[so]=j_(g)),i.xOffset=i.yOffset=0,i.force3D=Lo.force3D,i.renderTransform=i.svg?Q3:cE?pE:K3,i.uncache=0,i},j_=function(e){return(e=e.split(" "))[0]+" "+e[1]},r1=function(e,t,i){var n=bs(t);return _r(parseFloat(t)+parseFloat(Sh(e,"x",i+"px",n)))+n},K3=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,pE(e,t)},wu="0deg",eg="0px",Su=") ",pE=function(e,t){var i=t||this,n=i.xPercent,a=i.yPercent,o=i.x,r=i.y,d=i.z,g=i.rotation,x=i.rotationY,v=i.rotationX,k=i.skewX,E=i.skewY,F=i.scaleX,O=i.scaleY,N=i.transformPerspective,$=i.force3D,X=i.target,K=i.zOrigin,ie="",ee=$==="auto"&&e&&e!==1||$===!0;if(K&&(v!==wu||x!==wu)){var le=parseFloat(x)*If,te=Math.sin(le),he=Math.cos(le),de;le=parseFloat(v)*If,de=Math.cos(le),o=r1(X,o,te*de*-K),r=r1(X,r,-Math.sin(le)*-K),d=r1(X,d,he*de*-K+K)}N!==eg&&(ie+="perspective("+N+Su),(n||a)&&(ie+="translate("+n+"%, "+a+"%) "),(ee||o!==eg||r!==eg||d!==eg)&&(ie+=d!==eg||ee?"translate3d("+o+", "+r+", "+d+") ":"translate("+o+", "+r+Su),g!==wu&&(ie+="rotate("+g+Su),x!==wu&&(ie+="rotateY("+x+Su),v!==wu&&(ie+="rotateX("+v+Su),(k!==wu||E!==wu)&&(ie+="skew("+k+", "+E+Su),(F!==1||O!==1)&&(ie+="scale("+F+", "+O+Su),X.style[Za]=ie||"translate(0, 0)"},Q3=function(e,t){var i=t||this,n=i.xPercent,a=i.yPercent,o=i.x,r=i.y,d=i.rotation,g=i.skewX,x=i.skewY,v=i.scaleX,k=i.scaleY,E=i.target,F=i.xOrigin,O=i.yOrigin,N=i.xOffset,$=i.yOffset,X=i.forceCSS,K=parseFloat(o),ie=parseFloat(r),ee,le,te,he,de;d=parseFloat(d),g=parseFloat(g),x=parseFloat(x),x&&(x=parseFloat(x),g+=x,d+=x),d||g?(d*=If,g*=If,ee=Math.cos(d)*v,le=Math.sin(d)*v,te=Math.sin(d-g)*-k,he=Math.cos(d-g)*k,g&&(x*=If,de=Math.tan(g-x),de=Math.sqrt(1+de*de),te*=de,he*=de,x&&(de=Math.tan(x),de=Math.sqrt(1+de*de),ee*=de,le*=de)),ee=_r(ee),le=_r(le),te=_r(te),he=_r(he)):(ee=v,he=k,le=te=0),(K&&!~(o+"").indexOf("px")||ie&&!~(r+"").indexOf("px"))&&(K=Sh(E,"x",o,"px"),ie=Sh(E,"y",r,"px")),(F||O||N||$)&&(K=_r(K+F-(F*ee+O*te)+N),ie=_r(ie+O-(F*le+O*he)+$)),(n||a)&&(de=E.getBBox(),K=_r(K+n/100*de.width),ie=_r(ie+a/100*de.height)),de="matrix("+ee+","+le+","+te+","+he+","+K+","+ie+")",E.setAttribute("transform",de),X&&(E.style[Za]=de)},J3=function(e,t,i,n,a){var o=360,r=es(a),d=parseFloat(a)*(r&&~a.indexOf("rad")?Eu:1),g=d-n,x=n+g+"deg",v,k;return r&&(v=a.split("_")[1],v==="short"&&(g%=o,g!==g%(o/2)&&(g+=g<0?o:-o)),v==="cw"&&g<0?g=(g+o*bk)%o-~~(g/o)*o:v==="ccw"&&g>0&&(g=(g-o*bk)%o-~~(g/o)*o)),e._pt=k=new ro(e._pt,t,i,n,g,O3),k.e=x,k.u="deg",e._props.push(i),k},Ek=function(e,t){for(var i in t)e[i]=t[i];return e},eO=function(e,t,i){var n=Ek({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",o=i.style,r,d,g,x,v,k,E,F;n.svg?(g=i.getAttribute("transform"),i.setAttribute("transform",""),o[Za]=t,r=em(i,1),wh(i,Za),i.setAttribute("transform",g)):(g=getComputedStyle(i)[Za],o[Za]=t,r=em(i,1),o[Za]=g);for(d in Lc)g=n[d],x=r[d],g!==x&&a.indexOf(d)<0&&(E=bs(g),F=bs(x),v=E!==F?Sh(i,d,g,F):parseFloat(g),k=parseFloat(x),e._pt=new ro(e._pt,r,d,v,k-v,sv),e._pt.u=F||0,e._props.push(d));Ek(r,n)};ao("padding,margin,Width,Radius",function(s,e){var t="Top",i="Right",n="Bottom",a="Left",o=(e<3?[t,i,n,a]:[t+a,t+i,n+i,n+a]).map(function(r){return e<2?s+r:"border"+r+s});N_[e>1?"border"+s:s]=function(r,d,g,x,v){var k,E;if(arguments.length<4)return k=o.map(function(F){return wc(r,F,g)}),E=k.join(" "),E.split(k[0]).length===5?k[0]:E;k=(x+"").split(" "),E={},o.forEach(function(F,O){return E[F]=k[O]=k[O]||k[(O-1)/2|0]}),r.init(d,E,v)}});var gE={name:"css",register:lv,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,a){var o=this._props,r=e.style,d=i.vars.startAt,g,x,v,k,E,F,O,N,$,X,K,ie,ee,le,te,he,de;Lb||lv(),this.styles=this.styles||lE(e),he=this.styles.props,this.tween=i;for(O in t)if(O!=="autoRound"&&(x=t[O],!(Ao[O]&&KT(O,t,i,n,e,a)))){if(E=typeof x,F=N_[O],E==="function"&&(x=x.call(i,n,e,a),E=typeof x),E==="string"&&~x.indexOf("random(")&&(x=Zg(x)),F)F(this,e,O,x,i)&&(te=1);else if(O.substr(0,2)==="--")g=(getComputedStyle(e).getPropertyValue(O)+"").trim(),x+="",_h.lastIndex=0,_h.test(g)||(N=bs(g),$=bs(x),$?N!==$&&(g=Sh(e,O,g,$)+$):N&&(x+=N)),this.add(r,"setProperty",g,x,n,a,0,0,O),o.push(O),he.push(O,0,r[O]);else if(E!=="undefined"){if(d&&O in d?(g=typeof d[O]=="function"?d[O].call(i,n,e,a):d[O],es(g)&&~g.indexOf("random(")&&(g=Zg(g)),bs(g+"")||g==="auto"||(g+=Lo.units[O]||bs(wc(e,O))||""),(g+"").charAt(1)==="="&&(g=wc(e,O))):g=wc(e,O),k=parseFloat(g),X=E==="string"&&x.charAt(1)==="="&&x.substr(0,2),X&&(x=x.substr(2)),v=parseFloat(x),O in $l&&(O==="autoAlpha"&&(k===1&&wc(e,"visibility")==="hidden"&&v&&(k=0),he.push("visibility",0,r.visibility),ch(this,r,"visibility",k?"inherit":"hidden",v?"inherit":"hidden",!v)),O!=="scale"&&O!=="transform"&&(O=$l[O],~O.indexOf(",")&&(O=O.split(",")[0]))),K=O in Lc,K){if(this.styles.save(O),de=x,E==="string"&&x.substring(0,6)==="var(--"){if(x=Po(e,x.substring(4,x.indexOf(")"))),x.substring(0,5)==="calc("){var ke=e.style.perspective;e.style.perspective=x,x=Po(e,"perspective"),ke?e.style.perspective=ke:wh(e,"perspective")}v=parseFloat(x)}if(ie||(ee=e._gsap,ee.renderTransform&&!t.parseTransform||em(e,t.parseTransform),le=t.smoothOrigin!==!1&&ee.smooth,ie=this._pt=new ro(this._pt,r,Za,0,1,ee.renderTransform,ee,0,-1),ie.dep=1),O==="scale")this._pt=new ro(this._pt,ee,"scaleY",ee.scaleY,(X?Ef(ee.scaleY,X+v):v)-ee.scaleY||0,sv),this._pt.u=0,o.push("scaleY",O),O+="X";else if(O==="transformOrigin"){he.push(so,0,r[so]),x=q3(x),ee.svg?cv(e,x,0,le,0,this):($=parseFloat(x.split(" ")[2])||0,$!==ee.zOrigin&&ch(this,ee,"zOrigin",ee.zOrigin,$),ch(this,r,O,j_(g),j_(x)));continue}else if(O==="svgOrigin"){cv(e,x,1,le,0,this);continue}else if(O in dE){J3(this,ee,O,k,X?Ef(k,X+x):x);continue}else if(O==="smoothOrigin"){ch(this,ee,"smooth",ee.smooth,x);continue}else if(O==="force3D"){ee[O]=x;continue}else if(O==="transform"){eO(this,x,e);continue}}else O in r||(O=Vf(O)||O);if(K||(v||v===0)&&(k||k===0)&&!R3.test(x)&&O in r)N=(g+"").substr((k+"").length),v||(v=0),$=bs(x)||(O in Lo.units?Lo.units[O]:N),N!==$&&(k=Sh(e,O,g,$)),this._pt=new ro(this._pt,K?ee:r,O,k,(X?Ef(k,X+v):v)-k,!K&&($==="px"||O==="zIndex")&&t.autoRound!==!1?B3:sv),this._pt.u=$||0,K&&de!==x?(this._pt.b=g,this._pt.e=de,this._pt.r=F3):N!==$&&$!=="%"&&(this._pt.b=g,this._pt.r=z3);else if(O in r)Y3.call(this,e,O,g,X?X+x:x);else if(O in e)this.add(e,O,g||e[O],X?X+x:x,n,a);else if(O!=="parseTransform"){wb(O,x);continue}K||(O in r?he.push(O,0,r[O]):typeof e[O]=="function"?he.push(O,2,e[O]()):he.push(O,1,g||e[O])),o.push(O)}}te&&nE(this)},render:function(e,t){if(t.tween._time||!Db())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:wc,aliases:$l,getSetter:function(e,t,i){var n=$l[t];return n&&n.indexOf(",")<0&&(t=n),t in Lc&&t!==so&&(e._gsap.x||wc(e,"x"))?i&&vk===i?t==="scale"?H3:V3:(vk=i||{})&&(t==="scale"?U3:G3):e.style&&!yb(e.style[t])?N3:~t.indexOf("-")?j3:Ib(e,t)},core:{_removeProperty:wh,_getMatrix:Ob}};oo.utils.checkPrefix=Vf;oo.core.getStyleSaver=lE;(function(s,e,t,i){var n=ao(s+","+e+","+t,function(a){Lc[a]=1});ao(e,function(a){Lo.units[a]="deg",dE[a]=1}),$l[n[13]]=s+","+e,ao(i,function(a){var o=a.split(":");$l[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ao("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){Lo.units[s]="px"});oo.registerPlugin(gE);var zb=oo.registerPlugin(gE)||oo;zb.core.Tween;function tO(s,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function iO(s,e,t){return e&&tO(s.prototype,e),s}var os,m_,Mo,hh,uh,Pf,mE,Mu,Ig,_E,Cc,gl,xE,yE=function(){return os||typeof window<"u"&&(os=window.gsap)&&os.registerPlugin&&os},vE=1,Cf=[],xn=[],Yl=[],Pg=Date.now,hv=function(e,t){return t},nO=function(){var e=Ig.core,t=e.bridge||{},i=e._scrollers,n=e._proxies;i.push.apply(i,xn),n.push.apply(n,Yl),xn=i,Yl=n,hv=function(o,r){return t[o](r)}},xh=function(e,t){return~Yl.indexOf(e)&&Yl[Yl.indexOf(e)+1][t]},Lg=function(e){return!!~_E.indexOf(e)},zs=function(e,t,i,n,a){return e.addEventListener(t,i,{passive:n!==!1,capture:!!a})},Os=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},R0="scrollLeft",O0="scrollTop",uv=function(){return Cc&&Cc.isPressed||xn.cache++},V_=function(e,t){var i=function n(a){if(a||a===0){vE&&(Mo.history.scrollRestoration="manual");var o=Cc&&Cc.isPressed;a=n.v=Math.round(a)||(Cc&&Cc.iOS?1:0),e(a),n.cacheID=xn.cache,o&&hv("ss",a)}else(t||xn.cache!==n.cacheID||hv("ref"))&&(n.cacheID=xn.cache,n.v=e());return n.v+n.offset};return i.offset=0,e&&i},Hs={s:R0,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:V_(function(s){return arguments.length?Mo.scrollTo(s,jr.sc()):Mo.pageXOffset||hh[R0]||uh[R0]||Pf[R0]||0})},jr={s:O0,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Hs,sc:V_(function(s){return arguments.length?Mo.scrollTo(Hs.sc(),s):Mo.pageYOffset||hh[O0]||uh[O0]||Pf[O0]||0})},to=function(e,t){return(t&&t._ctx&&t._ctx.selector||os.utils.toArray)(e)[0]||(typeof e=="string"&&os.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},aO=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},kh=function(e,t){var i=t.s,n=t.sc;Lg(e)&&(e=hh.scrollingElement||uh);var a=xn.indexOf(e),o=n===jr.sc?1:2;!~a&&(a=xn.push(e)-1),xn[a+o]||zs(e,"scroll",uv);var r=xn[a+o],d=r||(xn[a+o]=V_(xh(e,i),!0)||(Lg(e)?n:V_(function(g){return arguments.length?e[i]=g:e[i]})));return d.target=e,r||(d.smooth=os.getProperty(e,"scrollBehavior")==="smooth"),d},dv=function(e,t,i){var n=e,a=e,o=Pg(),r=o,d=t||50,g=Math.max(500,d*3),x=function(F,O){var N=Pg();O||N-o>d?(a=n,n=F,r=o,o=N):i?n+=F:n=a+(F-a)/(N-r)*(o-r)},v=function(){a=n=i?0:n,r=o=0},k=function(F){var O=r,N=a,$=Pg();return(F||F===0)&&F!==n&&x(F),o===r||$-r>g?0:(n+(i?N:-N))/((i?$:o)-O)*1e3};return{update:x,reset:v,getVelocity:k}},tg=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Mk=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},bE=function(){Ig=os.core.globals().ScrollTrigger,Ig&&Ig.core&&nO()},wE=function(e){return os=e||yE(),!m_&&os&&typeof document<"u"&&document.body&&(Mo=window,hh=document,uh=hh.documentElement,Pf=hh.body,_E=[Mo,hh,uh,Pf],os.utils.clamp,xE=os.core.context||function(){},Mu="onpointerenter"in Pf?"pointer":"mouse",mE=xr.isTouch=Mo.matchMedia&&Mo.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Mo||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,gl=xr.eventTypes=("ontouchstart"in uh?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in uh?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return vE=0},500),bE(),m_=1),m_};Hs.op=jr;xn.cache=0;var xr=(function(){function s(t){this.init(t)}var e=s.prototype;return e.init=function(i){m_||wE(os)||console.warn("Please gsap.registerPlugin(Observer)"),Ig||bE();var n=i.tolerance,a=i.dragMinimum,o=i.type,r=i.target,d=i.lineHeight,g=i.debounce,x=i.preventDefault,v=i.onStop,k=i.onStopDelay,E=i.ignore,F=i.wheelSpeed,O=i.event,N=i.onDragStart,$=i.onDragEnd,X=i.onDrag,K=i.onPress,ie=i.onRelease,ee=i.onRight,le=i.onLeft,te=i.onUp,he=i.onDown,de=i.onChangeX,ke=i.onChangeY,De=i.onChange,Ae=i.onToggleX,$e=i.onToggleY,et=i.onHover,Ie=i.onHoverEnd,at=i.onMove,qe=i.ignoreCheck,kt=i.isNormalizer,vt=i.onGestureStart,He=i.onGestureEnd,Nt=i.onWheel,Qt=i.onEnable,Ai=i.onDisable,jt=i.onClick,ui=i.scrollSpeed,Ct=i.capture,ri=i.allowClicks,Zt=i.lockAxis,Pi=i.onLockAxis;this.target=r=to(r)||uh,this.vars=i,E&&(E=os.utils.toArray(E)),n=n||1e-9,a=a||0,F=F||1,ui=ui||1,o=o||"wheel,touch,pointer",g=g!==!1,d||(d=parseFloat(Mo.getComputedStyle(Pf).lineHeight)||22);var Fi,Li,en,qt,Ti,tn,Bn,st=this,ji=0,Bi=0,Qa=i.passive||!x&&i.passive!==!1,Gt=kh(r,Hs),la=kh(r,jr),vr=Gt(),va=la(),un=~o.indexOf("touch")&&!~o.indexOf("pointer")&&gl[0]==="pointerdown",tt=Lg(r),_e=r.ownerDocument||hh,xe=[0,0,0],be=[0,0,0],je=0,We=function(){return je=Pg()},it=function(Jt,fi){return(st.event=Jt)&&E&&aO(Jt.target,E)||fi&&un&&Jt.pointerType!=="touch"||qe&&qe(Jt,fi)},Qe=function(){st._vx.reset(),st._vy.reset(),Li.pause(),v&&v(st)},Pe=function(){var Jt=st.deltaX=Mk(xe),fi=st.deltaY=Mk(be),Rt=Math.abs(Jt)>=n,oi=Math.abs(fi)>=n;De&&(Rt||oi)&&De(st,Jt,fi,xe,be),Rt&&(ee&&st.deltaX>0&&ee(st),le&&st.deltaX<0&&le(st),de&&de(st),Ae&&st.deltaX<0!=ji<0&&Ae(st),ji=st.deltaX,xe[0]=xe[1]=xe[2]=0),oi&&(he&&st.deltaY>0&&he(st),te&&st.deltaY<0&&te(st),ke&&ke(st),$e&&st.deltaY<0!=Bi<0&&$e(st),Bi=st.deltaY,be[0]=be[1]=be[2]=0),(qt||en)&&(at&&at(st),en&&(N&&en===1&&N(st),X&&X(st),en=0),qt=!1),tn&&!(tn=!1)&&Pi&&Pi(st),Ti&&(Nt(st),Ti=!1),Fi=0},nt=function(Jt,fi,Rt){xe[Rt]+=Jt,be[Rt]+=fi,st._vx.update(Jt),st._vy.update(fi),g?Fi||(Fi=requestAnimationFrame(Pe)):Pe()},mt=function(Jt,fi){Zt&&!Bn&&(st.axis=Bn=Math.abs(Jt)>Math.abs(fi)?"x":"y",tn=!0),Bn!=="y"&&(xe[2]+=Jt,st._vx.update(Jt,!0)),Bn!=="x"&&(be[2]+=fi,st._vy.update(fi,!0)),g?Fi||(Fi=requestAnimationFrame(Pe)):Pe()},pt=function(Jt){if(!it(Jt,1)){Jt=tg(Jt,x);var fi=Jt.clientX,Rt=Jt.clientY,oi=fi-st.x,bi=Rt-st.y,_i=st.isDragging;st.x=fi,st.y=Rt,(_i||(oi||bi)&&(Math.abs(st.startX-fi)>=a||Math.abs(st.startY-Rt)>=a))&&(en||(en=_i?2:1),_i||(st.isDragging=!0),mt(oi,bi))}},Vt=st.onPress=function(di){it(di,1)||di&&di.button||(st.axis=Bn=null,Li.pause(),st.isPressed=!0,di=tg(di),ji=Bi=0,st.startX=st.x=di.clientX,st.startY=st.y=di.clientY,st._vx.reset(),st._vy.reset(),zs(kt?r:_e,gl[1],pt,Qa,!0),st.deltaX=st.deltaY=0,K&&K(st))},Pt=st.onRelease=function(di){if(!it(di,1)){Os(kt?r:_e,gl[1],pt,!0);var Jt=!isNaN(st.y-st.startY),fi=st.isDragging,Rt=fi&&(Math.abs(st.x-st.startX)>3||Math.abs(st.y-st.startY)>3),oi=tg(di);!Rt&&Jt&&(st._vx.reset(),st._vy.reset(),x&&ri&&os.delayedCall(.08,function(){if(Pg()-je>300&&!di.defaultPrevented){if(di.target.click)di.target.click();else if(_e.createEvent){var bi=_e.createEvent("MouseEvents");bi.initMouseEvent("click",!0,!0,Mo,1,oi.screenX,oi.screenY,oi.clientX,oi.clientY,!1,!1,!1,!1,0,null),di.target.dispatchEvent(bi)}}})),st.isDragging=st.isGesturing=st.isPressed=!1,v&&fi&&!kt&&Li.restart(!0),en&&Pe(),$&&fi&&$(st),ie&&ie(st,Rt)}},wi=function(Jt){return Jt.touches&&Jt.touches.length>1&&(st.isGesturing=!0)&&vt(Jt,st.isDragging)},si=function(){return(st.isGesturing=!1)||He(st)},Oi=function(Jt){if(!it(Jt)){var fi=Gt(),Rt=la();nt((fi-vr)*ui,(Rt-va)*ui,1),vr=fi,va=Rt,v&&Li.restart(!0)}},rt=function(Jt){if(!it(Jt)){Jt=tg(Jt,x),Nt&&(Ti=!0);var fi=(Jt.deltaMode===1?d:Jt.deltaMode===2?Mo.innerHeight:1)*F;nt(Jt.deltaX*fi,Jt.deltaY*fi,0),v&&!kt&&Li.restart(!0)}},an=function(Jt){if(!it(Jt)){var fi=Jt.clientX,Rt=Jt.clientY,oi=fi-st.x,bi=Rt-st.y;st.x=fi,st.y=Rt,qt=!0,v&&Li.restart(!0),(oi||bi)&&mt(oi,bi)}},pn=function(Jt){st.event=Jt,et(st)},yi=function(Jt){st.event=Jt,Ie(st)},zi=function(Jt){return it(Jt)||tg(Jt,x)&&jt(st)};Li=st._dc=os.delayedCall(k||.25,Qe).pause(),st.deltaX=st.deltaY=0,st._vx=dv(0,50,!0),st._vy=dv(0,50,!0),st.scrollX=Gt,st.scrollY=la,st.isDragging=st.isGesturing=st.isPressed=!1,xE(this),st.enable=function(di){return st.isEnabled||(zs(tt?_e:r,"scroll",uv),o.indexOf("scroll")>=0&&zs(tt?_e:r,"scroll",Oi,Qa,Ct),o.indexOf("wheel")>=0&&zs(r,"wheel",rt,Qa,Ct),(o.indexOf("touch")>=0&&mE||o.indexOf("pointer")>=0)&&(zs(r,gl[0],Vt,Qa,Ct),zs(_e,gl[2],Pt),zs(_e,gl[3],Pt),ri&&zs(r,"click",We,!0,!0),jt&&zs(r,"click",zi),vt&&zs(_e,"gesturestart",wi),He&&zs(_e,"gestureend",si),et&&zs(r,Mu+"enter",pn),Ie&&zs(r,Mu+"leave",yi),at&&zs(r,Mu+"move",an)),st.isEnabled=!0,st.isDragging=st.isGesturing=st.isPressed=qt=en=!1,st._vx.reset(),st._vy.reset(),vr=Gt(),va=la(),di&&di.type&&Vt(di),Qt&&Qt(st)),st},st.disable=function(){st.isEnabled&&(Cf.filter(function(di){return di!==st&&Lg(di.target)}).length||Os(tt?_e:r,"scroll",uv),st.isPressed&&(st._vx.reset(),st._vy.reset(),Os(kt?r:_e,gl[1],pt,!0)),Os(tt?_e:r,"scroll",Oi,Ct),Os(r,"wheel",rt,Ct),Os(r,gl[0],Vt,Ct),Os(_e,gl[2],Pt),Os(_e,gl[3],Pt),Os(r,"click",We,!0),Os(r,"click",zi),Os(_e,"gesturestart",wi),Os(_e,"gestureend",si),Os(r,Mu+"enter",pn),Os(r,Mu+"leave",yi),Os(r,Mu+"move",an),st.isEnabled=st.isPressed=st.isDragging=!1,Ai&&Ai(st))},st.kill=st.revert=function(){st.disable();var di=Cf.indexOf(st);di>=0&&Cf.splice(di,1),Cc===st&&(Cc=0)},Cf.push(st),kt&&Lg(r)&&(Cc=st),st.enable(O)},iO(s,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),s})();xr.version="3.14.2";xr.create=function(s){return new xr(s)};xr.register=wE;xr.getAll=function(){return Cf.slice()};xr.getById=function(s){return Cf.filter(function(e){return e.vars.id===s})[0]};yE()&&os.registerPlugin(xr);var vi,bf,_n,Ca,To,ta,Fb,H_,tm,Dg,gg,z0,_s,vx,fv,Bs,Ik,Pk,wf,SE,s1,kE,Fs,pv,CE,AE,rh,gv,Bb,Lf,Nb,Rg,mv,o1,F0=1,ys=Date.now,l1=ys(),tl=0,mg=0,Lk=function(e,t,i){var n=Co(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=n,n?e.substr(6,e.length-7):e},Dk=function(e,t){return t&&(!Co(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},rO=function s(){return mg&&requestAnimationFrame(s)},Rk=function(){return vx=1},Ok=function(){return vx=0},Ul=function(e){return e},_g=function(e){return Math.round(e*1e5)/1e5||0},TE=function(){return typeof window<"u"},EE=function(){return vi||TE()&&(vi=window.gsap)&&vi.registerPlugin&&vi},nd=function(e){return!!~Fb.indexOf(e)},ME=function(e){return(e==="Height"?Nb:_n["inner"+e])||To["client"+e]||ta["client"+e]},IE=function(e){return xh(e,"getBoundingClientRect")||(nd(e)?function(){return b_.width=_n.innerWidth,b_.height=Nb,b_}:function(){return kc(e)})},sO=function(e,t,i){var n=i.d,a=i.d2,o=i.a;return(o=xh(e,"getBoundingClientRect"))?function(){return o()[n]}:function(){return(t?ME(a):e["client"+a])||0}},oO=function(e,t){return!t||~Yl.indexOf(e)?IE(e):function(){return b_}},Xl=function(e,t){var i=t.s,n=t.d2,a=t.d,o=t.a;return Math.max(0,(i="scroll"+n)&&(o=xh(e,i))?o()-IE(e)()[a]:nd(e)?(To[i]||ta[i])-ME(n):e[i]-e["offset"+n])},B0=function(e,t){for(var i=0;i<wf.length;i+=3)(!t||~t.indexOf(wf[i+1]))&&e(wf[i],wf[i+1],wf[i+2])},Co=function(e){return typeof e=="string"},ws=function(e){return typeof e=="function"},xg=function(e){return typeof e=="number"},Iu=function(e){return typeof e=="object"},ig=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},c1=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},gf=Math.abs,PE="left",LE="top",jb="right",Vb="bottom",Xu="width",Yu="height",Og="Right",zg="Left",Fg="Top",Bg="Bottom",Ir="padding",qo="margin",Hf="Width",Hb="Height",Nr="px",Zo=function(e){return _n.getComputedStyle(e)},lO=function(e){var t=Zo(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},zk=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},kc=function(e,t){var i=t&&Zo(e)[fv]!=="matrix(1, 0, 0, 1, 0, 0)"&&vi.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return i&&i.progress(0).kill(),n},U_=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},DE=function(e){var t=[],i=e.labels,n=e.duration(),a;for(a in i)t.push(i[a]/n);return t},cO=function(e){return function(t){return vi.utils.snap(DE(e),t)}},Ub=function(e){var t=vi.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(n,a){return n-a});return i?function(n,a,o){o===void 0&&(o=.001);var r;if(!a)return t(n);if(a>0){for(n-=o,r=0;r<i.length;r++)if(i[r]>=n)return i[r];return i[r-1]}else for(r=i.length,n+=o;r--;)if(i[r]<=n)return i[r];return i[0]}:function(n,a,o){o===void 0&&(o=.001);var r=t(n);return!a||Math.abs(r-n)<o||r-n<0==a<0?r:t(a<0?n-e:n+e)}},hO=function(e){return function(t,i){return Ub(DE(e))(t,i.direction)}},N0=function(e,t,i,n){return i.split(",").forEach(function(a){return e(t,a,n)})},Qr=function(e,t,i,n,a){return e.addEventListener(t,i,{passive:!n,capture:!!a})},Kr=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},j0=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},Fk={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},V0={toggleActions:"play",anticipatePin:0},G_={top:0,left:0,center:.5,bottom:1,right:1},__=function(e,t){if(Co(e)){var i=e.indexOf("="),n=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in G_?G_[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},H0=function(e,t,i,n,a,o,r,d){var g=a.startColor,x=a.endColor,v=a.fontSize,k=a.indent,E=a.fontWeight,F=Ca.createElement("div"),O=nd(i)||xh(i,"pinType")==="fixed",N=e.indexOf("scroller")!==-1,$=O?ta:i,X=e.indexOf("start")!==-1,K=X?g:x,ie="border-color:"+K+";font-size:"+v+";color:"+K+";font-weight:"+E+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return ie+="position:"+((N||d)&&O?"fixed;":"absolute;"),(N||d||!O)&&(ie+=(n===jr?jb:Vb)+":"+(o+parseFloat(k))+"px;"),r&&(ie+="box-sizing:border-box;text-align:left;width:"+r.offsetWidth+"px;"),F._isStart=X,F.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),F.style.cssText=ie,F.innerText=t||t===0?e+"-"+t:e,$.children[0]?$.insertBefore(F,$.children[0]):$.appendChild(F),F._offset=F["offset"+n.op.d2],x_(F,0,n,X),F},x_=function(e,t,i,n){var a={display:"block"},o=i[n?"os2":"p2"],r=i[n?"p2":"os2"];e._isFlipped=n,a[i.a+"Percent"]=n?-100:0,a[i.a]=n?"1px":0,a["border"+o+Hf]=1,a["border"+r+Hf]=0,a[i.p]=t+"px",vi.set(e,a)},fn=[],_v={},im,Bk=function(){return ys()-tl>34&&(im||(im=requestAnimationFrame(Ic)))},mf=function(){(!Fs||!Fs.isPressed||Fs.startX>ta.clientWidth)&&(xn.cache++,Fs?im||(im=requestAnimationFrame(Ic)):Ic(),tl||rd("scrollStart"),tl=ys())},h1=function(){AE=_n.innerWidth,CE=_n.innerHeight},yg=function(e){xn.cache++,(e===!0||!_s&&!kE&&!Ca.fullscreenElement&&!Ca.webkitFullscreenElement&&(!pv||AE!==_n.innerWidth||Math.abs(_n.innerHeight-CE)>_n.innerHeight*.25))&&H_.restart(!0)},ad={},uO=[],RE=function s(){return Kr(yn,"scrollEnd",s)||Bu(!0)},rd=function(e){return ad[e]&&ad[e].map(function(t){return t()})||uO},ko=[],OE=function(e){for(var t=0;t<ko.length;t+=5)(!e||ko[t+4]&&ko[t+4].query===e)&&(ko[t].style.cssText=ko[t+1],ko[t].getBBox&&ko[t].setAttribute("transform",ko[t+2]||""),ko[t+3].uncache=1)},zE=function(){return xn.forEach(function(e){return ws(e)&&++e.cacheID&&(e.rec=e())})},Gb=function(e,t){var i;for(Bs=0;Bs<fn.length;Bs++)i=fn[Bs],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));Rg=!0,t&&OE(t),t||rd("revert")},FE=function(e,t){xn.cache++,(t||!Ns)&&xn.forEach(function(i){return ws(i)&&i.cacheID++&&(i.rec=0)}),Co(e)&&(_n.history.scrollRestoration=Bb=e)},Ns,qu=0,Nk,dO=function(){if(Nk!==qu){var e=Nk=qu;requestAnimationFrame(function(){return e===qu&&Bu(!0)})}},BE=function(){ta.appendChild(Lf),Nb=!Fs&&Lf.offsetHeight||_n.innerHeight,ta.removeChild(Lf)},jk=function(e){return tm(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Bu=function(e,t){if(To=Ca.documentElement,ta=Ca.body,Fb=[_n,Ca,To,ta],tl&&!e&&!Rg){Qr(yn,"scrollEnd",RE);return}BE(),Ns=yn.isRefreshing=!0,Rg||zE();var i=rd("refreshInit");SE&&yn.sort(),t||Gb(),xn.forEach(function(n){ws(n)&&(n.smooth&&(n.target.style.scrollBehavior="auto"),n(0))}),fn.slice(0).forEach(function(n){return n.refresh()}),Rg=!1,fn.forEach(function(n){if(n._subPinOffset&&n.pin){var a=n.vars.horizontal?"offsetWidth":"offsetHeight",o=n.pin[a];n.revert(!0,1),n.adjustPinSpacing(n.pin[a]-o),n.refresh()}}),mv=1,jk(!0),fn.forEach(function(n){var a=Xl(n.scroller,n._dir),o=n.vars.end==="max"||n._endClamp&&n.end>a,r=n._startClamp&&n.start>=a;(o||r)&&n.setPositions(r?a-1:n.start,o?Math.max(r?a:n.start+1,a):n.end,!0)}),jk(!1),mv=0,i.forEach(function(n){return n&&n.render&&n.render(-1)}),xn.forEach(function(n){ws(n)&&(n.smooth&&requestAnimationFrame(function(){return n.target.style.scrollBehavior="smooth"}),n.rec&&n(n.rec))}),FE(Bb,1),H_.pause(),qu++,Ns=2,Ic(2),fn.forEach(function(n){return ws(n.vars.onRefresh)&&n.vars.onRefresh(n)}),Ns=yn.isRefreshing=!1,rd("refresh")},xv=0,y_=1,Ng,Ic=function(e){if(e===2||!Ns&&!Rg){yn.isUpdating=!0,Ng&&Ng.update(0);var t=fn.length,i=ys(),n=i-l1>=50,a=t&&fn[0].scroll();if(y_=xv>a?-1:1,Ns||(xv=a),n&&(tl&&!vx&&i-tl>200&&(tl=0,rd("scrollEnd")),gg=l1,l1=i),y_<0){for(Bs=t;Bs-- >0;)fn[Bs]&&fn[Bs].update(0,n);y_=1}else for(Bs=0;Bs<t;Bs++)fn[Bs]&&fn[Bs].update(0,n);yn.isUpdating=!1}im=0},yv=[PE,LE,Vb,jb,qo+Bg,qo+Og,qo+Fg,qo+zg,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],v_=yv.concat([Xu,Yu,"boxSizing","max"+Hf,"max"+Hb,"position",qo,Ir,Ir+Fg,Ir+Og,Ir+Bg,Ir+zg]),fO=function(e,t,i){Df(i);var n=e._gsap;if(n.spacerIsNative)Df(n.spacerState);else if(e._gsap.swappedIn){var a=t.parentNode;a&&(a.insertBefore(e,t),a.removeChild(t))}e._gsap.swappedIn=!1},u1=function(e,t,i,n){if(!e._gsap.swappedIn){for(var a=yv.length,o=t.style,r=e.style,d;a--;)d=yv[a],o[d]=i[d];o.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(o.display="inline-block"),r[Vb]=r[jb]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Xu]=U_(e,Hs)+Nr,o[Yu]=U_(e,jr)+Nr,o[Ir]=r[qo]=r[LE]=r[PE]="0",Df(n),r[Xu]=r["max"+Hf]=i[Xu],r[Yu]=r["max"+Hb]=i[Yu],r[Ir]=i[Ir],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},pO=/([A-Z])/g,Df=function(e){if(e){var t=e.t.style,i=e.length,n=0,a,o;for((e.t._gsap||vi.core.getCache(e.t)).uncache=1;n<i;n+=2)o=e[n+1],a=e[n],o?t[a]=o:t[a]&&t.removeProperty(a.replace(pO,"-$1").toLowerCase())}},U0=function(e){for(var t=v_.length,i=e.style,n=[],a=0;a<t;a++)n.push(v_[a],i[v_[a]]);return n.t=e,n},gO=function(e,t,i){for(var n=[],a=e.length,o=i?8:0,r;o<a;o+=2)r=e[o],n.push(r,r in t?t[r]:e[o+1]);return n.t=e.t,n},b_={left:0,top:0},Vk=function(e,t,i,n,a,o,r,d,g,x,v,k,E,F){ws(e)&&(e=e(d)),Co(e)&&e.substr(0,3)==="max"&&(e=k+(e.charAt(4)==="="?__("0"+e.substr(3),i):0));var O=E?E.time():0,N,$,X;if(E&&E.seek(0),isNaN(e)||(e=+e),xg(e))E&&(e=vi.utils.mapRange(E.scrollTrigger.start,E.scrollTrigger.end,0,k,e)),r&&x_(r,i,n,!0);else{ws(t)&&(t=t(d));var K=(e||"0").split(" "),ie,ee,le,te;X=to(t,d)||ta,ie=kc(X)||{},(!ie||!ie.left&&!ie.top)&&Zo(X).display==="none"&&(te=X.style.display,X.style.display="block",ie=kc(X),te?X.style.display=te:X.style.removeProperty("display")),ee=__(K[0],ie[n.d]),le=__(K[1]||"0",i),e=ie[n.p]-g[n.p]-x+ee+a-le,r&&x_(r,le,n,i-le<20||r._isStart&&le>20),i-=i-le}if(F&&(d[F]=e||-.001,e<0&&(e=0)),o){var he=e+i,de=o._isStart;N="scroll"+n.d2,x_(o,he,n,de&&he>20||!de&&(v?Math.max(ta[N],To[N]):o.parentNode[N])<=he+1),v&&(g=kc(r),v&&(o.style[n.op.p]=g[n.op.p]-n.op.m-o._offset+Nr))}return E&&X&&(N=kc(X),E.seek(k),$=kc(X),E._caScrollDist=N[n.p]-$[n.p],e=e/E._caScrollDist*k),E&&E.seek(O),E?e:Math.round(e)},mO=/(webkit|moz|length|cssText|inset)/i,Hk=function(e,t,i,n){if(e.parentNode!==t){var a=e.style,o,r;if(t===ta){e._stOrig=a.cssText,r=Zo(e);for(o in r)!+o&&!mO.test(o)&&r[o]&&typeof a[o]=="string"&&o!=="0"&&(a[o]=r[o]);a.top=i,a.left=n}else a.cssText=e._stOrig;vi.core.getCache(e).uncache=1,t.appendChild(e)}},NE=function(e,t,i){var n=t,a=n;return function(o){var r=Math.round(e());return r!==n&&r!==a&&Math.abs(r-n)>3&&Math.abs(r-a)>3&&(o=r,i&&i()),a=n,n=Math.round(o),n}},G0=function(e,t,i){var n={};n[t.p]="+="+i,vi.set(e,n)},Uk=function(e,t){var i=kh(e,t),n="_scroll"+t.p2,a=function o(r,d,g,x,v){var k=o.tween,E=d.onComplete,F={};g=g||i();var O=NE(i,g,function(){k.kill(),o.tween=0});return v=x&&v||0,x=x||r-g,k&&k.kill(),d[n]=r,d.inherit=!1,d.modifiers=F,F[n]=function(){return O(g+x*k.ratio+v*k.ratio*k.ratio)},d.onUpdate=function(){xn.cache++,o.tween&&Ic()},d.onComplete=function(){o.tween=0,E&&E.call(k)},k=o.tween=vi.to(e,d),k};return e[n]=i,i.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},Qr(e,"wheel",i.wheelHandler),yn.isTouch&&Qr(e,"touchmove",i.wheelHandler),a},yn=(function(){function s(t,i){bf||s.register(vi)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),gv(this),this.init(t,i)}var e=s.prototype;return e.init=function(i,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!mg){this.update=this.refresh=this.kill=Ul;return}i=zk(Co(i)||xg(i)||i.nodeType?{trigger:i}:i,V0);var a=i,o=a.onUpdate,r=a.toggleClass,d=a.id,g=a.onToggle,x=a.onRefresh,v=a.scrub,k=a.trigger,E=a.pin,F=a.pinSpacing,O=a.invalidateOnRefresh,N=a.anticipatePin,$=a.onScrubComplete,X=a.onSnapComplete,K=a.once,ie=a.snap,ee=a.pinReparent,le=a.pinSpacer,te=a.containerAnimation,he=a.fastScrollEnd,de=a.preventOverlaps,ke=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Hs:jr,De=!v&&v!==0,Ae=to(i.scroller||_n),$e=vi.core.getCache(Ae),et=nd(Ae),Ie=("pinType"in i?i.pinType:xh(Ae,"pinType")||et&&"fixed")==="fixed",at=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],qe=De&&i.toggleActions.split(" "),kt="markers"in i?i.markers:V0.markers,vt=et?0:parseFloat(Zo(Ae)["border"+ke.p2+Hf])||0,He=this,Nt=i.onRefreshInit&&function(){return i.onRefreshInit(He)},Qt=sO(Ae,et,ke),Ai=oO(Ae,et),jt=0,ui=0,Ct=0,ri=kh(Ae,ke),Zt,Pi,Fi,Li,en,qt,Ti,tn,Bn,st,ji,Bi,Qa,Gt,la,vr,va,un,tt,_e,xe,be,je,We,it,Qe,Pe,nt,mt,pt,Vt,Pt,wi,si,Oi,rt,an,pn,yi;if(He._startClamp=He._endClamp=!1,He._dir=ke,N*=45,He.scroller=Ae,He.scroll=te?te.time.bind(te):ri,Li=ri(),He.vars=i,n=n||i.animation,"refreshPriority"in i&&(SE=1,i.refreshPriority===-9999&&(Ng=He)),$e.tweenScroll=$e.tweenScroll||{top:Uk(Ae,jr),left:Uk(Ae,Hs)},He.tweenTo=Zt=$e.tweenScroll[ke.p],He.scrubDuration=function(Rt){wi=xg(Rt)&&Rt,wi?Pt?Pt.duration(Rt):Pt=vi.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:wi,paused:!0,onComplete:function(){return $&&$(He)}}):(Pt&&Pt.progress(1).kill(),Pt=0)},n&&(n.vars.lazy=!1,n._initted&&!He.isReverted||n.vars.immediateRender!==!1&&i.immediateRender!==!1&&n.duration()&&n.render(0,!0,!0),He.animation=n.pause(),n.scrollTrigger=He,He.scrubDuration(v),pt=0,d||(d=n.vars.id)),ie&&((!Iu(ie)||ie.push)&&(ie={snapTo:ie}),"scrollBehavior"in ta.style&&vi.set(et?[ta,To]:Ae,{scrollBehavior:"auto"}),xn.forEach(function(Rt){return ws(Rt)&&Rt.target===(et?Ca.scrollingElement||To:Ae)&&(Rt.smooth=!1)}),Fi=ws(ie.snapTo)?ie.snapTo:ie.snapTo==="labels"?cO(n):ie.snapTo==="labelsDirectional"?hO(n):ie.directional!==!1?function(Rt,oi){return Ub(ie.snapTo)(Rt,ys()-ui<500?0:oi.direction)}:vi.utils.snap(ie.snapTo),si=ie.duration||{min:.1,max:2},si=Iu(si)?Dg(si.min,si.max):Dg(si,si),Oi=vi.delayedCall(ie.delay||wi/2||.1,function(){var Rt=ri(),oi=ys()-ui<500,bi=Zt.tween;if((oi||Math.abs(He.getVelocity())<10)&&!bi&&!vx&&jt!==Rt){var _i=(Rt-qt)/Gt,St=n&&!De?n.totalProgress():_i,xi=oi?0:(St-Vt)/(ys()-gg)*1e3||0,Dt=vi.utils.clamp(-_i,1-_i,gf(xi/2)*xi/.185),Xn=_i+(ie.inertia===!1?0:Dt),rn,At,ii=ie,Si=ii.onStart,Xi=ii.onInterrupt,Hn=ii.onComplete;if(rn=Fi(Xn,He),xg(rn)||(rn=Xn),At=Math.max(0,Math.round(qt+rn*Gt)),Rt<=Ti&&Rt>=qt&&At!==Rt){if(bi&&!bi._initted&&bi.data<=gf(At-Rt))return;ie.inertia===!1&&(Dt=rn-_i),Zt(At,{duration:si(gf(Math.max(gf(Xn-St),gf(rn-St))*.185/xi/.05||0)),ease:ie.ease||"power3",data:gf(At-Rt),onInterrupt:function(){return Oi.restart(!0)&&Xi&&Xi(He)},onComplete:function(){He.update(),jt=ri(),n&&!De&&(Pt?Pt.resetTo("totalProgress",rn,n._tTime/n._tDur):n.progress(rn)),pt=Vt=n&&!De?n.totalProgress():He.progress,X&&X(He),Hn&&Hn(He)}},Rt,Dt*Gt,At-Rt-Dt*Gt),Si&&Si(He,Zt.tween)}}else He.isActive&&jt!==Rt&&Oi.restart(!0)}).pause()),d&&(_v[d]=He),k=He.trigger=to(k||E!==!0&&E),yi=k&&k._gsap&&k._gsap.stRevert,yi&&(yi=yi(He)),E=E===!0?k:to(E),Co(r)&&(r={targets:k,className:r}),E&&(F===!1||F===qo||(F=!F&&E.parentNode&&E.parentNode.style&&Zo(E.parentNode).display==="flex"?!1:Ir),He.pin=E,Pi=vi.core.getCache(E),Pi.spacer?la=Pi.pinState:(le&&(le=to(le),le&&!le.nodeType&&(le=le.current||le.nativeElement),Pi.spacerIsNative=!!le,le&&(Pi.spacerState=U0(le))),Pi.spacer=un=le||Ca.createElement("div"),un.classList.add("pin-spacer"),d&&un.classList.add("pin-spacer-"+d),Pi.pinState=la=U0(E)),i.force3D!==!1&&vi.set(E,{force3D:!0}),He.spacer=un=Pi.spacer,mt=Zo(E),We=mt[F+ke.os2],_e=vi.getProperty(E),xe=vi.quickSetter(E,ke.a,Nr),u1(E,un,mt),va=U0(E)),kt){Bi=Iu(kt)?zk(kt,Fk):Fk,st=H0("scroller-start",d,Ae,ke,Bi,0),ji=H0("scroller-end",d,Ae,ke,Bi,0,st),tt=st["offset"+ke.op.d2];var zi=to(xh(Ae,"content")||Ae);tn=this.markerStart=H0("start",d,zi,ke,Bi,tt,0,te),Bn=this.markerEnd=H0("end",d,zi,ke,Bi,tt,0,te),te&&(pn=vi.quickSetter([tn,Bn],ke.a,Nr)),!Ie&&!(Yl.length&&xh(Ae,"fixedMarkers")===!0)&&(lO(et?ta:Ae),vi.set([st,ji],{force3D:!0}),Qe=vi.quickSetter(st,ke.a,Nr),nt=vi.quickSetter(ji,ke.a,Nr))}if(te){var di=te.vars.onUpdate,Jt=te.vars.onUpdateParams;te.eventCallback("onUpdate",function(){He.update(0,0,1),di&&di.apply(te,Jt||[])})}if(He.previous=function(){return fn[fn.indexOf(He)-1]},He.next=function(){return fn[fn.indexOf(He)+1]},He.revert=function(Rt,oi){if(!oi)return He.kill(!0);var bi=Rt!==!1||!He.enabled,_i=_s;bi!==He.isReverted&&(bi&&(rt=Math.max(ri(),He.scroll.rec||0),Ct=He.progress,an=n&&n.progress()),tn&&[tn,Bn,st,ji].forEach(function(St){return St.style.display=bi?"none":"block"}),bi&&(_s=He,He.update(bi)),E&&(!ee||!He.isActive)&&(bi?fO(E,un,la):u1(E,un,Zo(E),it)),bi||He.update(bi),_s=_i,He.isReverted=bi)},He.refresh=function(Rt,oi,bi,_i){if(!((_s||!He.enabled)&&!oi)){if(E&&Rt&&tl){Qr(s,"scrollEnd",RE);return}!Ns&&Nt&&Nt(He),_s=He,Zt.tween&&!bi&&(Zt.tween.kill(),Zt.tween=0),Pt&&Pt.pause(),O&&n&&(n.revert({kill:!1}).invalidate(),n.getChildren?n.getChildren(!0,!0,!1).forEach(function(Ii){return Ii.vars.immediateRender&&Ii.render(0,!0,!0)}):n.vars.immediateRender&&n.render(0,!0,!0)),He.isReverted||He.revert(!0,!0),He._subPinOffset=!1;var St=Qt(),xi=Ai(),Dt=te?te.duration():Xl(Ae,ke),Xn=Gt<=.01||!Gt,rn=0,At=_i||0,ii=Iu(bi)?bi.end:i.end,Si=i.endTrigger||k,Xi=Iu(bi)?bi.start:i.start||(i.start===0||!k?0:E?"0 0":"0 100%"),Hn=He.pinnedContainer=i.pinnedContainer&&to(i.pinnedContainer,He),Oa=k&&Math.max(0,fn.indexOf(He))||0,gi=Oa,wn,cn,dn,us,Ln,Nn,Tt,Ga,Mi,Dr,lr,Yi,Wi;for(kt&&Iu(bi)&&(Yi=vi.getProperty(st,ke.p),Wi=vi.getProperty(ji,ke.p));gi-- >0;)Nn=fn[gi],Nn.end||Nn.refresh(0,1)||(_s=He),Tt=Nn.pin,Tt&&(Tt===k||Tt===E||Tt===Hn)&&!Nn.isReverted&&(Dr||(Dr=[]),Dr.unshift(Nn),Nn.revert(!0,!0)),Nn!==fn[gi]&&(Oa--,gi--);for(ws(Xi)&&(Xi=Xi(He)),Xi=Lk(Xi,"start",He),qt=Vk(Xi,k,St,ke,ri(),tn,st,He,xi,vt,Ie,Dt,te,He._startClamp&&"_startClamp")||(E?-.001:0),ws(ii)&&(ii=ii(He)),Co(ii)&&!ii.indexOf("+=")&&(~ii.indexOf(" ")?ii=(Co(Xi)?Xi.split(" ")[0]:"")+ii:(rn=__(ii.substr(2),St),ii=Co(Xi)?Xi:(te?vi.utils.mapRange(0,te.duration(),te.scrollTrigger.start,te.scrollTrigger.end,qt):qt)+rn,Si=k)),ii=Lk(ii,"end",He),Ti=Math.max(qt,Vk(ii||(Si?"100% 0":Dt),Si,St,ke,ri()+rn,Bn,ji,He,xi,vt,Ie,Dt,te,He._endClamp&&"_endClamp"))||-.001,rn=0,gi=Oa;gi--;)Nn=fn[gi]||{},Tt=Nn.pin,Tt&&Nn.start-Nn._pinPush<=qt&&!te&&Nn.end>0&&(wn=Nn.end-(He._startClamp?Math.max(0,Nn.start):Nn.start),(Tt===k&&Nn.start-Nn._pinPush<qt||Tt===Hn)&&isNaN(Xi)&&(rn+=wn*(1-Nn.progress)),Tt===E&&(At+=wn));if(qt+=rn,Ti+=rn,He._startClamp&&(He._startClamp+=rn),He._endClamp&&!Ns&&(He._endClamp=Ti||-.001,Ti=Math.min(Ti,Xl(Ae,ke))),Gt=Ti-qt||(qt-=.01)&&.001,Xn&&(Ct=vi.utils.clamp(0,1,vi.utils.normalize(qt,Ti,rt))),He._pinPush=At,tn&&rn&&(wn={},wn[ke.a]="+="+rn,Hn&&(wn[ke.p]="-="+ri()),vi.set([tn,Bn],wn)),E&&!(mv&&He.end>=Xl(Ae,ke)))wn=Zo(E),us=ke===jr,dn=ri(),be=parseFloat(_e(ke.a))+At,!Dt&&Ti>1&&(lr=(et?Ca.scrollingElement||To:Ae).style,lr={style:lr,value:lr["overflow"+ke.a.toUpperCase()]},et&&Zo(ta)["overflow"+ke.a.toUpperCase()]!=="scroll"&&(lr.style["overflow"+ke.a.toUpperCase()]="scroll")),u1(E,un,wn),va=U0(E),cn=kc(E,!0),Ga=Ie&&kh(Ae,us?Hs:jr)(),F?(it=[F+ke.os2,Gt+At+Nr],it.t=un,gi=F===Ir?U_(E,ke)+Gt+At:0,gi&&(it.push(ke.d,gi+Nr),un.style.flexBasis!=="auto"&&(un.style.flexBasis=gi+Nr)),Df(it),Hn&&fn.forEach(function(Ii){Ii.pin===Hn&&Ii.vars.pinSpacing!==!1&&(Ii._subPinOffset=!0)}),Ie&&ri(rt)):(gi=U_(E,ke),gi&&un.style.flexBasis!=="auto"&&(un.style.flexBasis=gi+Nr)),Ie&&(Ln={top:cn.top+(us?dn-qt:Ga)+Nr,left:cn.left+(us?Ga:dn-qt)+Nr,boxSizing:"border-box",position:"fixed"},Ln[Xu]=Ln["max"+Hf]=Math.ceil(cn.width)+Nr,Ln[Yu]=Ln["max"+Hb]=Math.ceil(cn.height)+Nr,Ln[qo]=Ln[qo+Fg]=Ln[qo+Og]=Ln[qo+Bg]=Ln[qo+zg]="0",Ln[Ir]=wn[Ir],Ln[Ir+Fg]=wn[Ir+Fg],Ln[Ir+Og]=wn[Ir+Og],Ln[Ir+Bg]=wn[Ir+Bg],Ln[Ir+zg]=wn[Ir+zg],vr=gO(la,Ln,ee),Ns&&ri(0)),n?(Mi=n._initted,s1(1),n.render(n.duration(),!0,!0),je=_e(ke.a)-be+Gt+At,Pe=Math.abs(Gt-je)>1,Ie&&Pe&&vr.splice(vr.length-2,2),n.render(0,!0,!0),Mi||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),s1(0)):je=Gt,lr&&(lr.value?lr.style["overflow"+ke.a.toUpperCase()]=lr.value:lr.style.removeProperty("overflow-"+ke.a));else if(k&&ri()&&!te)for(cn=k.parentNode;cn&&cn!==ta;)cn._pinOffset&&(qt-=cn._pinOffset,Ti-=cn._pinOffset),cn=cn.parentNode;Dr&&Dr.forEach(function(Ii){return Ii.revert(!1,!0)}),He.start=qt,He.end=Ti,Li=en=Ns?rt:ri(),!te&&!Ns&&(Li<rt&&ri(rt),He.scroll.rec=0),He.revert(!1,!0),ui=ys(),Oi&&(jt=-1,Oi.restart(!0)),_s=0,n&&De&&(n._initted||an)&&n.progress()!==an&&n.progress(an||0,!0).render(n.time(),!0,!0),(Xn||Ct!==He.progress||te||O||n&&!n._initted)&&(n&&!De&&(n._initted||Ct||n.vars.immediateRender!==!1)&&n.totalProgress(te&&qt<-.001&&!Ct?vi.utils.normalize(qt,Ti,0):Ct,!0),He.progress=Xn||(Li-qt)/Gt===Ct?0:Ct),E&&F&&(un._pinOffset=Math.round(He.progress*je)),Pt&&Pt.invalidate(),isNaN(Yi)||(Yi-=vi.getProperty(st,ke.p),Wi-=vi.getProperty(ji,ke.p),G0(st,ke,Yi),G0(tn,ke,Yi-(_i||0)),G0(ji,ke,Wi),G0(Bn,ke,Wi-(_i||0))),Xn&&!Ns&&He.update(),x&&!Ns&&!Qa&&(Qa=!0,x(He),Qa=!1)}},He.getVelocity=function(){return(ri()-en)/(ys()-gg)*1e3||0},He.endAnimation=function(){ig(He.callbackAnimation),n&&(Pt?Pt.progress(1):n.paused()?De||ig(n,He.direction<0,1):ig(n,n.reversed()))},He.labelToScroll=function(Rt){return n&&n.labels&&(qt||He.refresh()||qt)+n.labels[Rt]/n.duration()*Gt||0},He.getTrailing=function(Rt){var oi=fn.indexOf(He),bi=He.direction>0?fn.slice(0,oi).reverse():fn.slice(oi+1);return(Co(Rt)?bi.filter(function(_i){return _i.vars.preventOverlaps===Rt}):bi).filter(function(_i){return He.direction>0?_i.end<=qt:_i.start>=Ti})},He.update=function(Rt,oi,bi){if(!(te&&!bi&&!Rt)){var _i=Ns===!0?rt:He.scroll(),St=Rt?0:(_i-qt)/Gt,xi=St<0?0:St>1?1:St||0,Dt=He.progress,Xn,rn,At,ii,Si,Xi,Hn,Oa;if(oi&&(en=Li,Li=te?ri():_i,ie&&(Vt=pt,pt=n&&!De?n.totalProgress():xi)),N&&E&&!_s&&!F0&&tl&&(!xi&&qt<_i+(_i-en)/(ys()-gg)*N?xi=1e-4:xi===1&&Ti>_i+(_i-en)/(ys()-gg)*N&&(xi=.9999)),xi!==Dt&&He.enabled){if(Xn=He.isActive=!!xi&&xi<1,rn=!!Dt&&Dt<1,Xi=Xn!==rn,Si=Xi||!!xi!=!!Dt,He.direction=xi>Dt?1:-1,He.progress=xi,Si&&!_s&&(At=xi&&!Dt?0:xi===1?1:Dt===1?2:3,De&&(ii=!Xi&&qe[At+1]!=="none"&&qe[At+1]||qe[At],Oa=n&&(ii==="complete"||ii==="reset"||ii in n))),de&&(Xi||Oa)&&(Oa||v||!n)&&(ws(de)?de(He):He.getTrailing(de).forEach(function(dn){return dn.endAnimation()})),De||(Pt&&!_s&&!F0?(Pt._dp._time-Pt._start!==Pt._time&&Pt.render(Pt._dp._time-Pt._start),Pt.resetTo?Pt.resetTo("totalProgress",xi,n._tTime/n._tDur):(Pt.vars.totalProgress=xi,Pt.invalidate().restart())):n&&n.totalProgress(xi,!!(_s&&(ui||Rt)))),E){if(Rt&&F&&(un.style[F+ke.os2]=We),!Ie)xe(_g(be+je*xi));else if(Si){if(Hn=!Rt&&xi>Dt&&Ti+1>_i&&_i+1>=Xl(Ae,ke),ee)if(!Rt&&(Xn||Hn)){var gi=kc(E,!0),wn=_i-qt;Hk(E,ta,gi.top+(ke===jr?wn:0)+Nr,gi.left+(ke===jr?0:wn)+Nr)}else Hk(E,un);Df(Xn||Hn?vr:va),Pe&&xi<1&&Xn||xe(be+(xi===1&&!Hn?je:0))}}ie&&!Zt.tween&&!_s&&!F0&&Oi.restart(!0),r&&(Xi||K&&xi&&(xi<1||!o1))&&tm(r.targets).forEach(function(dn){return dn.classList[Xn||K?"add":"remove"](r.className)}),o&&!De&&!Rt&&o(He),Si&&!_s?(De&&(Oa&&(ii==="complete"?n.pause().totalProgress(1):ii==="reset"?n.restart(!0).pause():ii==="restart"?n.restart(!0):n[ii]()),o&&o(He)),(Xi||!o1)&&(g&&Xi&&c1(He,g),at[At]&&c1(He,at[At]),K&&(xi===1?He.kill(!1,1):at[At]=0),Xi||(At=xi===1?1:3,at[At]&&c1(He,at[At]))),he&&!Xn&&Math.abs(He.getVelocity())>(xg(he)?he:2500)&&(ig(He.callbackAnimation),Pt?Pt.progress(1):ig(n,ii==="reverse"?1:!xi,1))):De&&o&&!_s&&o(He)}if(nt){var cn=te?_i/te.duration()*(te._caScrollDist||0):_i;Qe(cn+(st._isFlipped?1:0)),nt(cn)}pn&&pn(-_i/te.duration()*(te._caScrollDist||0))}},He.enable=function(Rt,oi){He.enabled||(He.enabled=!0,Qr(Ae,"resize",yg),et||Qr(Ae,"scroll",mf),Nt&&Qr(s,"refreshInit",Nt),Rt!==!1&&(He.progress=Ct=0,Li=en=jt=ri()),oi!==!1&&He.refresh())},He.getTween=function(Rt){return Rt&&Zt?Zt.tween:Pt},He.setPositions=function(Rt,oi,bi,_i){if(te){var St=te.scrollTrigger,xi=te.duration(),Dt=St.end-St.start;Rt=St.start+Dt*Rt/xi,oi=St.start+Dt*oi/xi}He.refresh(!1,!1,{start:Dk(Rt,bi&&!!He._startClamp),end:Dk(oi,bi&&!!He._endClamp)},_i),He.update()},He.adjustPinSpacing=function(Rt){if(it&&Rt){var oi=it.indexOf(ke.d)+1;it[oi]=parseFloat(it[oi])+Rt+Nr,it[1]=parseFloat(it[1])+Rt+Nr,Df(it)}},He.disable=function(Rt,oi){if(Rt!==!1&&He.revert(!0,!0),He.enabled&&(He.enabled=He.isActive=!1,oi||Pt&&Pt.pause(),rt=0,Pi&&(Pi.uncache=1),Nt&&Kr(s,"refreshInit",Nt),Oi&&(Oi.pause(),Zt.tween&&Zt.tween.kill()&&(Zt.tween=0)),!et)){for(var bi=fn.length;bi--;)if(fn[bi].scroller===Ae&&fn[bi]!==He)return;Kr(Ae,"resize",yg),et||Kr(Ae,"scroll",mf)}},He.kill=function(Rt,oi){He.disable(Rt,oi),Pt&&!oi&&Pt.kill(),d&&delete _v[d];var bi=fn.indexOf(He);bi>=0&&fn.splice(bi,1),bi===Bs&&y_>0&&Bs--,bi=0,fn.forEach(function(_i){return _i.scroller===He.scroller&&(bi=1)}),bi||Ns||(He.scroll.rec=0),n&&(n.scrollTrigger=null,Rt&&n.revert({kill:!1}),oi||n.kill()),tn&&[tn,Bn,st,ji].forEach(function(_i){return _i.parentNode&&_i.parentNode.removeChild(_i)}),Ng===He&&(Ng=0),E&&(Pi&&(Pi.uncache=1),bi=0,fn.forEach(function(_i){return _i.pin===E&&bi++}),bi||(Pi.spacer=0)),i.onKill&&i.onKill(He)},fn.push(He),He.enable(!1,!1),yi&&yi(He),n&&n.add&&!Gt){var fi=He.update;He.update=function(){He.update=fi,xn.cache++,qt||Ti||He.refresh()},vi.delayedCall(.01,He.update),Gt=.01,qt=Ti=0}else He.refresh();E&&dO()},s.register=function(i){return bf||(vi=i||EE(),TE()&&window.document&&s.enable(),bf=mg),bf},s.defaults=function(i){if(i)for(var n in i)V0[n]=i[n];return V0},s.disable=function(i,n){mg=0,fn.forEach(function(o){return o[n?"kill":"disable"](i)}),Kr(_n,"wheel",mf),Kr(Ca,"scroll",mf),clearInterval(z0),Kr(Ca,"touchcancel",Ul),Kr(ta,"touchstart",Ul),N0(Kr,Ca,"pointerdown,touchstart,mousedown",Rk),N0(Kr,Ca,"pointerup,touchend,mouseup",Ok),H_.kill(),B0(Kr);for(var a=0;a<xn.length;a+=3)j0(Kr,xn[a],xn[a+1]),j0(Kr,xn[a],xn[a+2])},s.enable=function(){if(_n=window,Ca=document,To=Ca.documentElement,ta=Ca.body,vi&&(tm=vi.utils.toArray,Dg=vi.utils.clamp,gv=vi.core.context||Ul,s1=vi.core.suppressOverwrites||Ul,Bb=_n.history.scrollRestoration||"auto",xv=_n.pageYOffset||0,vi.core.globals("ScrollTrigger",s),ta)){mg=1,Lf=document.createElement("div"),Lf.style.height="100vh",Lf.style.position="absolute",BE(),rO(),xr.register(vi),s.isTouch=xr.isTouch,rh=xr.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),pv=xr.isTouch===1,Qr(_n,"wheel",mf),Fb=[_n,Ca,To,ta],vi.matchMedia?(s.matchMedia=function(g){var x=vi.matchMedia(),v;for(v in g)x.add(v,g[v]);return x},vi.addEventListener("matchMediaInit",function(){zE(),Gb()}),vi.addEventListener("matchMediaRevert",function(){return OE()}),vi.addEventListener("matchMedia",function(){Bu(0,1),rd("matchMedia")}),vi.matchMedia().add("(orientation: portrait)",function(){return h1(),h1})):console.warn("Requires GSAP 3.11.0 or later"),h1(),Qr(Ca,"scroll",mf);var i=ta.hasAttribute("style"),n=ta.style,a=n.borderTopStyle,o=vi.core.Animation.prototype,r,d;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),n.borderTopStyle="solid",r=kc(ta),jr.m=Math.round(r.top+jr.sc())||0,Hs.m=Math.round(r.left+Hs.sc())||0,a?n.borderTopStyle=a:n.removeProperty("border-top-style"),i||(ta.setAttribute("style",""),ta.removeAttribute("style")),z0=setInterval(Bk,250),vi.delayedCall(.5,function(){return F0=0}),Qr(Ca,"touchcancel",Ul),Qr(ta,"touchstart",Ul),N0(Qr,Ca,"pointerdown,touchstart,mousedown",Rk),N0(Qr,Ca,"pointerup,touchend,mouseup",Ok),fv=vi.utils.checkPrefix("transform"),v_.push(fv),bf=ys(),H_=vi.delayedCall(.2,Bu).pause(),wf=[Ca,"visibilitychange",function(){var g=_n.innerWidth,x=_n.innerHeight;Ca.hidden?(Ik=g,Pk=x):(Ik!==g||Pk!==x)&&yg()},Ca,"DOMContentLoaded",Bu,_n,"load",Bu,_n,"resize",yg],B0(Qr),fn.forEach(function(g){return g.enable(0,1)}),d=0;d<xn.length;d+=3)j0(Kr,xn[d],xn[d+1]),j0(Kr,xn[d],xn[d+2])}},s.config=function(i){"limitCallbacks"in i&&(o1=!!i.limitCallbacks);var n=i.syncInterval;n&&clearInterval(z0)||(z0=n)&&setInterval(Bk,n),"ignoreMobileResize"in i&&(pv=s.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(B0(Kr)||B0(Qr,i.autoRefreshEvents||"none"),kE=(i.autoRefreshEvents+"").indexOf("resize")===-1)},s.scrollerProxy=function(i,n){var a=to(i),o=xn.indexOf(a),r=nd(a);~o&&xn.splice(o,r?6:2),n&&(r?Yl.unshift(_n,n,ta,n,To,n):Yl.unshift(a,n))},s.clearMatchMedia=function(i){fn.forEach(function(n){return n._ctx&&n._ctx.query===i&&n._ctx.kill(!0,!0)})},s.isInViewport=function(i,n,a){var o=(Co(i)?to(i):i).getBoundingClientRect(),r=o[a?Xu:Yu]*n||0;return a?o.right-r>0&&o.left+r<_n.innerWidth:o.bottom-r>0&&o.top+r<_n.innerHeight},s.positionInViewport=function(i,n,a){Co(i)&&(i=to(i));var o=i.getBoundingClientRect(),r=o[a?Xu:Yu],d=n==null?r/2:n in G_?G_[n]*r:~n.indexOf("%")?parseFloat(n)*r/100:parseFloat(n)||0;return a?(o.left+d)/_n.innerWidth:(o.top+d)/_n.innerHeight},s.killAll=function(i){if(fn.slice(0).forEach(function(a){return a.vars.id!=="ScrollSmoother"&&a.kill()}),i!==!0){var n=ad.killAll||[];ad={},n.forEach(function(a){return a()})}},s})();yn.version="3.14.2";yn.saveStyles=function(s){return s?tm(s).forEach(function(e){if(e&&e.style){var t=ko.indexOf(e);t>=0&&ko.splice(t,5),ko.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),vi.core.getCache(e),gv())}}):ko};yn.revert=function(s,e){return Gb(!s,e)};yn.create=function(s,e){return new yn(s,e)};yn.refresh=function(s){return s?yg(!0):(bf||yn.register())&&Bu(!0)};yn.update=function(s){return++xn.cache&&Ic(s===!0?2:0)};yn.clearScrollMemory=FE;yn.maxScroll=function(s,e){return Xl(s,e?Hs:jr)};yn.getScrollFunc=function(s,e){return kh(to(s),e?Hs:jr)};yn.getById=function(s){return _v[s]};yn.getAll=function(){return fn.filter(function(s){return s.vars.id!=="ScrollSmoother"})};yn.isScrolling=function(){return!!tl};yn.snapDirectional=Ub;yn.addEventListener=function(s,e){var t=ad[s]||(ad[s]=[]);~t.indexOf(e)||t.push(e)};yn.removeEventListener=function(s,e){var t=ad[s],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};yn.batch=function(s,e){var t=[],i={},n=e.interval||.016,a=e.batchMax||1e9,o=function(g,x){var v=[],k=[],E=vi.delayedCall(n,function(){x(v,k),v=[],k=[]}).pause();return function(F){v.length||E.restart(!0),v.push(F.trigger),k.push(F),a<=v.length&&E.progress(1)}},r;for(r in e)i[r]=r.substr(0,2)==="on"&&ws(e[r])&&r!=="onRefreshInit"?o(r,e[r]):e[r];return ws(a)&&(a=a(),Qr(yn,"refresh",function(){return a=e.batchMax()})),tm(s).forEach(function(d){var g={};for(r in i)g[r]=i[r];g.trigger=d,t.push(yn.create(g))}),t};var Gk=function(e,t,i,n){return t>n?e(n):t<0&&e(0),i>n?(n-t)/(i-t):i<0?t/(t-i):1},d1=function s(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(xr.isTouch?" pinch-zoom":""):"none",e===To&&s(ta,t)},W0={auto:1,scroll:1},_O=function(e){var t=e.event,i=e.target,n=e.axis,a=(t.changedTouches?t.changedTouches[0]:t).target,o=a._gsap||vi.core.getCache(a),r=ys(),d;if(!o._isScrollT||r-o._isScrollT>2e3){for(;a&&a!==ta&&(a.scrollHeight<=a.clientHeight&&a.scrollWidth<=a.clientWidth||!(W0[(d=Zo(a)).overflowY]||W0[d.overflowX]));)a=a.parentNode;o._isScroll=a&&a!==i&&!nd(a)&&(W0[(d=Zo(a)).overflowY]||W0[d.overflowX]),o._isScrollT=r}(o._isScroll||n==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},jE=function(e,t,i,n){return xr.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:n=n&&_O,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&Qr(Ca,xr.eventTypes[0],$k,!1,!0)},onDisable:function(){return Kr(Ca,xr.eventTypes[0],$k,!0)}})},xO=/(input|label|select|textarea)/i,Wk,$k=function(e){var t=xO.test(e.target.tagName);(t||Wk)&&(e._gsapAllow=!0,Wk=t)},yO=function(e){Iu(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,n=t.momentum,a=t.allowNestedScroll,o=t.onRelease,r,d,g=to(e.target)||To,x=vi.core.globals().ScrollSmoother,v=x&&x.get(),k=rh&&(e.content&&to(e.content)||v&&e.content!==!1&&!v.smooth()&&v.content()),E=kh(g,jr),F=kh(g,Hs),O=1,N=(xr.isTouch&&_n.visualViewport?_n.visualViewport.scale*_n.visualViewport.width:_n.outerWidth)/_n.innerWidth,$=0,X=ws(n)?function(){return n(r)}:function(){return n||2.8},K,ie,ee=jE(g,e.type,!0,a),le=function(){return ie=!1},te=Ul,he=Ul,de=function(){d=Xl(g,jr),he=Dg(rh?1:0,d),i&&(te=Dg(0,Xl(g,Hs))),K=qu},ke=function(){k._gsap.y=_g(parseFloat(k._gsap.y)+E.offset)+"px",k.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(k._gsap.y)+", 0, 1)",E.offset=E.cacheID=0},De=function(){if(ie){requestAnimationFrame(le);var kt=_g(r.deltaY/2),vt=he(E.v-kt);if(k&&vt!==E.v+E.offset){E.offset=vt-E.v;var He=_g((parseFloat(k&&k._gsap.y)||0)-E.offset);k.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+He+", 0, 1)",k._gsap.y=He+"px",E.cacheID=xn.cache,Ic()}return!0}E.offset&&ke(),ie=!0},Ae,$e,et,Ie,at=function(){de(),Ae.isActive()&&Ae.vars.scrollY>d&&(E()>d?Ae.progress(1)&&E(d):Ae.resetTo("scrollY",d))};return k&&vi.set(k,{y:"+=0"}),e.ignoreCheck=function(qe){return rh&&qe.type==="touchmove"&&De()||O>1.05&&qe.type!=="touchstart"||r.isGesturing||qe.touches&&qe.touches.length>1},e.onPress=function(){ie=!1;var qe=O;O=_g((_n.visualViewport&&_n.visualViewport.scale||1)/N),Ae.pause(),qe!==O&&d1(g,O>1.01?!0:i?!1:"x"),$e=F(),et=E(),de(),K=qu},e.onRelease=e.onGestureStart=function(qe,kt){if(E.offset&&ke(),!kt)Ie.restart(!0);else{xn.cache++;var vt=X(),He,Nt;i&&(He=F(),Nt=He+vt*.05*-qe.velocityX/.227,vt*=Gk(F,He,Nt,Xl(g,Hs)),Ae.vars.scrollX=te(Nt)),He=E(),Nt=He+vt*.05*-qe.velocityY/.227,vt*=Gk(E,He,Nt,Xl(g,jr)),Ae.vars.scrollY=he(Nt),Ae.invalidate().duration(vt).play(.01),(rh&&Ae.vars.scrollY>=d||He>=d-1)&&vi.to({},{onUpdate:at,duration:vt})}o&&o(qe)},e.onWheel=function(){Ae._ts&&Ae.pause(),ys()-$>1e3&&(K=0,$=ys())},e.onChange=function(qe,kt,vt,He,Nt){if(qu!==K&&de(),kt&&i&&F(te(He[2]===kt?$e+(qe.startX-qe.x):F()+kt-He[1])),vt){E.offset&&ke();var Qt=Nt[2]===vt,Ai=Qt?et+qe.startY-qe.y:E()+vt-Nt[1],jt=he(Ai);Qt&&Ai!==jt&&(et+=jt-Ai),E(jt)}(vt||kt)&&Ic()},e.onEnable=function(){d1(g,i?!1:"x"),yn.addEventListener("refresh",at),Qr(_n,"resize",at),E.smooth&&(E.target.style.scrollBehavior="auto",E.smooth=F.smooth=!1),ee.enable()},e.onDisable=function(){d1(g,!0),Kr(_n,"resize",at),yn.removeEventListener("refresh",at),ee.kill()},e.lockAxis=e.lockAxis!==!1,r=new xr(e),r.iOS=rh,rh&&!E()&&E(1),rh&&vi.ticker.add(Ul),Ie=r._dc,Ae=vi.to(r,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:NE(E,E(),function(){return Ae.pause()})},onUpdate:Ic,onComplete:Ie.vars.onComplete}),r};yn.sort=function(s){if(ws(s))return fn.sort(s);var e=_n.pageYOffset||0;return yn.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+_n.innerHeight}),fn.sort(s||function(t,i){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((i.vars.containerAnimation?1e6:i._sortY)+(i.vars.refreshPriority||0)*-1e6)})};yn.observe=function(s){return new xr(s)};yn.normalizeScroll=function(s){if(typeof s>"u")return Fs;if(s===!0&&Fs)return Fs.enable();if(s===!1){Fs&&Fs.kill(),Fs=s;return}var e=s instanceof xr?s:yO(s);return Fs&&Fs.target===e.target&&Fs.kill(),nd(e.target)&&(Fs=e),e};yn.core={_getVelocityProp:dv,_inputObserver:jE,_scrollers:xn,_proxies:Yl,bridge:{ss:function(){tl||rd("scrollStart"),tl=ys()},ref:function(){return _s}}};EE()&&vi.registerPlugin(yn);function xm(s){return s+.5|0}const dh=(s,e,t)=>Math.max(Math.min(s,t),e);function vg(s){return dh(xm(s*2.55),0,255)}function yh(s){return dh(xm(s*255),0,255)}function Sc(s){return dh(xm(s/2.55)/100,0,1)}function Xk(s){return dh(xm(s*100),0,100)}const Wo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vv=[..."0123456789ABCDEF"],vO=s=>vv[s&15],bO=s=>vv[(s&240)>>4]+vv[s&15],$0=s=>(s&240)>>4===(s&15),wO=s=>$0(s.r)&&$0(s.g)&&$0(s.b)&&$0(s.a);function SO(s){var e=s.length,t;return s[0]==="#"&&(e===4||e===5?t={r:255&Wo[s[1]]*17,g:255&Wo[s[2]]*17,b:255&Wo[s[3]]*17,a:e===5?Wo[s[4]]*17:255}:(e===7||e===9)&&(t={r:Wo[s[1]]<<4|Wo[s[2]],g:Wo[s[3]]<<4|Wo[s[4]],b:Wo[s[5]]<<4|Wo[s[6]],a:e===9?Wo[s[7]]<<4|Wo[s[8]]:255})),t}const kO=(s,e)=>s<255?e(s):"";function CO(s){var e=wO(s)?vO:bO;return s?"#"+e(s.r)+e(s.g)+e(s.b)+kO(s.a,e):void 0}const AO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function VE(s,e,t){const i=e*Math.min(t,1-t),n=(a,o=(a+s/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function TO(s,e,t){const i=(n,a=(n+s/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function EO(s,e,t){const i=VE(s,1,.5);let n;for(e+t>1&&(n=1/(e+t),e*=n,t*=n),n=0;n<3;n++)i[n]*=1-e-t,i[n]+=e;return i}function MO(s,e,t,i,n){return s===n?(e-t)/i+(e<t?6:0):e===n?(t-s)/i+2:(s-e)/i+4}function Wb(s){const t=s.r/255,i=s.g/255,n=s.b/255,a=Math.max(t,i,n),o=Math.min(t,i,n),r=(a+o)/2;let d,g,x;return a!==o&&(x=a-o,g=r>.5?x/(2-a-o):x/(a+o),d=MO(t,i,n,x,a),d=d*60+.5),[d|0,g||0,r]}function $b(s,e,t,i){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,t,i)).map(yh)}function Xb(s,e,t){return $b(VE,s,e,t)}function IO(s,e,t){return $b(EO,s,e,t)}function PO(s,e,t){return $b(TO,s,e,t)}function HE(s){return(s%360+360)%360}function LO(s){const e=AO.exec(s);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?vg(+e[5]):yh(+e[5]));const n=HE(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=IO(n,a,o):e[1]==="hsv"?i=PO(n,a,o):i=Xb(n,a,o),{r:i[0],g:i[1],b:i[2],a:t}}function DO(s,e){var t=Wb(s);t[0]=HE(t[0]+e),t=Xb(t),s.r=t[0],s.g=t[1],s.b=t[2]}function RO(s){if(!s)return;const e=Wb(s),t=e[0],i=Xk(e[1]),n=Xk(e[2]);return s.a<255?`hsla(${t}, ${i}%, ${n}%, ${Sc(s.a)})`:`hsl(${t}, ${i}%, ${n}%)`}const Yk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},qk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function OO(){const s={},e=Object.keys(qk),t=Object.keys(Yk);let i,n,a,o,r;for(i=0;i<e.length;i++){for(o=r=e[i],n=0;n<t.length;n++)a=t[n],r=r.replace(a,Yk[a]);a=parseInt(qk[o],16),s[r]=[a>>16&255,a>>8&255,a&255]}return s}let X0;function zO(s){X0||(X0=OO(),X0.transparent=[0,0,0,0]);const e=X0[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const FO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function BO(s){const e=FO.exec(s);let t=255,i,n,a;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?vg(o):dh(o*255,0,255)}return i=+e[1],n=+e[3],a=+e[5],i=255&(e[2]?vg(i):dh(i,0,255)),n=255&(e[4]?vg(n):dh(n,0,255)),a=255&(e[6]?vg(a):dh(a,0,255)),{r:i,g:n,b:a,a:t}}}function NO(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${Sc(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const f1=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,_f=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function jO(s,e,t){const i=_f(Sc(s.r)),n=_f(Sc(s.g)),a=_f(Sc(s.b));return{r:yh(f1(i+t*(_f(Sc(e.r))-i))),g:yh(f1(n+t*(_f(Sc(e.g))-n))),b:yh(f1(a+t*(_f(Sc(e.b))-a))),a:s.a+t*(e.a-s.a)}}function Y0(s,e,t){if(s){let i=Wb(s);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Xb(i),s.r=i[0],s.g=i[1],s.b=i[2]}}function UE(s,e){return s&&Object.assign(e||{},s)}function Zk(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=yh(s[3]))):(e=UE(s,{r:0,g:0,b:0,a:1}),e.a=yh(e.a)),e}function VO(s){return s.charAt(0)==="r"?BO(s):LO(s)}class nm{constructor(e){if(e instanceof nm)return e;const t=typeof e;let i;t==="object"?i=Zk(e):t==="string"&&(i=SO(e)||zO(e)||VO(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=UE(this._rgb);return e&&(e.a=Sc(e.a)),e}set rgb(e){this._rgb=Zk(e)}rgbString(){return this._valid?NO(this._rgb):void 0}hexString(){return this._valid?CO(this._rgb):void 0}hslString(){return this._valid?RO(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,n=e.rgb;let a;const o=t===a?.5:t,r=2*o-1,d=i.a-n.a,g=((r*d===-1?r:(r+d)/(1+r*d))+1)/2;a=1-g,i.r=255&g*i.r+a*n.r+.5,i.g=255&g*i.g+a*n.g+.5,i.b=255&g*i.b+a*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=jO(this._rgb,e._rgb,t)),this}clone(){return new nm(this.rgb)}alpha(e){return this._rgb.a=yh(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=xm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Y0(this._rgb,2,e),this}darken(e){return Y0(this._rgb,2,-e),this}saturate(e){return Y0(this._rgb,1,e),this}desaturate(e){return Y0(this._rgb,1,-e),this}rotate(e){return DO(this._rgb,e),this}}function mc(){}const HO=(()=>{let s=0;return()=>s++})();function bn(s){return s==null}function Ha(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Sn(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function rr(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function So(s,e){return rr(s)?s:e}function Qi(s,e){return typeof s>"u"?e:s}const UO=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/e,GE=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function Aa(s,e,t){if(s&&typeof s.call=="function")return s.apply(t,e)}function oa(s,e,t,i){let n,a,o;if(Ha(s))for(a=s.length,n=0;n<a;n++)e.call(t,s[n],n);else if(Sn(s))for(o=Object.keys(s),a=o.length,n=0;n<a;n++)e.call(t,s[o[n]],o[n])}function W_(s,e){let t,i,n,a;if(!s||!e||s.length!==e.length)return!1;for(t=0,i=s.length;t<i;++t)if(n=s[t],a=e[t],n.datasetIndex!==a.datasetIndex||n.index!==a.index)return!1;return!0}function $_(s){if(Ha(s))return s.map($_);if(Sn(s)){const e=Object.create(null),t=Object.keys(s),i=t.length;let n=0;for(;n<i;++n)e[t[n]]=$_(s[t[n]]);return e}return s}function WE(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function GO(s,e,t,i){if(!WE(s))return;const n=e[s],a=t[s];Sn(n)&&Sn(a)?am(n,a,i):e[s]=$_(a)}function am(s,e,t){const i=Ha(e)?e:[e],n=i.length;if(!Sn(s))return s;t=t||{};const a=t.merger||GO;let o;for(let r=0;r<n;++r){if(o=i[r],!Sn(o))continue;const d=Object.keys(o);for(let g=0,x=d.length;g<x;++g)a(d[g],s,o,t)}return s}function jg(s,e){return am(s,e,{merger:WO})}function WO(s,e,t){if(!WE(s))return;const i=e[s],n=t[s];Sn(i)&&Sn(n)?jg(i,n):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=$_(n))}const Kk={"":s=>s,x:s=>s.x,y:s=>s.y};function $O(s){const e=s.split("."),t=[];let i="";for(const n of e)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function XO(s){const e=$O(s);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Ch(s,e){return(Kk[e]||(Kk[e]=XO(e)))(s)}function Yb(s){return s.charAt(0).toUpperCase()+s.slice(1)}const rm=s=>typeof s<"u",Ah=s=>typeof s=="function",Qk=(s,e)=>{if(s.size!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0};function YO(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const Vn=Math.PI,Da=2*Vn,qO=Da+Vn,X_=Number.POSITIVE_INFINITY,ZO=Vn/180,yr=Vn/2,ku=Vn/4,Jk=Vn*2/3,fh=Math.log10,ql=Math.sign;function Vg(s,e,t){return Math.abs(s-e)<t}function eC(s){const e=Math.round(s);s=Vg(s,e,s/1e3)?e:s;const t=Math.pow(10,Math.floor(fh(s))),i=s/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function KO(s){const e=[],t=Math.sqrt(s);let i;for(i=1;i<t;i++)s%i===0&&(e.push(i),e.push(s/i));return t===(t|0)&&e.push(t),e.sort((n,a)=>n-a).pop(),e}function QO(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function Uf(s){return!QO(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function JO(s,e){const t=Math.round(s);return t-e<=s&&t+e>=s}function $E(s,e,t){let i,n,a;for(i=0,n=s.length;i<n;i++)a=s[i][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function _l(s){return s*(Vn/180)}function qb(s){return s*(180/Vn)}function tC(s){if(!rr(s))return;let e=1,t=0;for(;Math.round(s*e)/e!==s;)e*=10,t++;return t}function XE(s,e){const t=e.x-s.x,i=e.y-s.y,n=Math.sqrt(t*t+i*i);let a=Math.atan2(i,t);return a<-.5*Vn&&(a+=Da),{angle:a,distance:n}}function bv(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function ez(s,e){return(s-e+qO)%Da-Vn}function vs(s){return(s%Da+Da)%Da}function sm(s,e,t,i){const n=vs(s),a=vs(e),o=vs(t),r=vs(a-n),d=vs(o-n),g=vs(n-a),x=vs(n-o);return n===a||n===o||i&&a===o||r>d&&g<x}function Jr(s,e,t){return Math.max(e,Math.min(t,s))}function tz(s){return Jr(s,-32768,32767)}function Ac(s,e,t,i=1e-6){return s>=Math.min(e,t)-i&&s<=Math.max(e,t)+i}function Zb(s,e,t){t=t||(o=>s[o]<e);let i=s.length-1,n=0,a;for(;i-n>1;)a=n+i>>1,t(a)?n=a:i=a;return{lo:n,hi:i}}const Tc=(s,e,t,i)=>Zb(s,t,i?n=>{const a=s[n][e];return a<t||a===t&&s[n+1][e]===t}:n=>s[n][e]<t),iz=(s,e,t)=>Zb(s,t,i=>s[i][e]>=t);function nz(s,e,t){let i=0,n=s.length;for(;i<n&&s[i]<e;)i++;for(;n>i&&s[n-1]>t;)n--;return i>0||n<s.length?s.slice(i,n):s}const YE=["push","pop","shift","splice","unshift"];function az(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),YE.forEach(t=>{const i="_onData"+Yb(t),n=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...a){const o=n.apply(this,a);return s._chartjs.listeners.forEach(r=>{typeof r[i]=="function"&&r[i](...a)}),o}})})}function iC(s,e){const t=s._chartjs;if(!t)return;const i=t.listeners,n=i.indexOf(e);n!==-1&&i.splice(n,1),!(i.length>0)&&(YE.forEach(a=>{delete s[a]}),delete s._chartjs)}function qE(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const ZE=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function KE(s,e){let t=[],i=!1;return function(...n){t=n,i||(i=!0,ZE.call(window,()=>{i=!1,s.apply(e,t)}))}}function rz(s,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(s,e,i)):s.apply(this,i),e}}const Kb=s=>s==="start"?"left":s==="end"?"right":"center",xs=(s,e,t)=>s==="start"?e:s==="end"?t:(e+t)/2,sz=(s,e,t,i)=>s===(i?"left":"right")?t:s==="center"?(e+t)/2:e;function QE(s,e,t){const i=e.length;let n=0,a=i;if(s._sorted){const{iScale:o,vScale:r,_parsed:d}=s,g=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,x=o.axis,{min:v,max:k,minDefined:E,maxDefined:F}=o.getUserBounds();if(E){if(n=Math.min(Tc(d,x,v).lo,t?i:Tc(e,x,o.getPixelForValue(v)).lo),g){const O=d.slice(0,n+1).reverse().findIndex(N=>!bn(N[r.axis]));n-=Math.max(0,O)}n=Jr(n,0,i-1)}if(F){let O=Math.max(Tc(d,o.axis,k,!0).hi+1,t?0:Tc(e,x,o.getPixelForValue(k),!0).hi+1);if(g){const N=d.slice(O-1).findIndex($=>!bn($[r.axis]));O+=Math.max(0,N)}a=Jr(O,n,i)-n}else a=i-n}return{start:n,count:a}}function JE(s){const{xScale:e,yScale:t,_scaleRanges:i}=s,n={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return s._scaleRanges=n,!0;const a=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,n),a}const q0=s=>s===0||s===1,nC=(s,e,t)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*Da/t)),aC=(s,e,t)=>Math.pow(2,-10*s)*Math.sin((s-e)*Da/t)+1,Hg={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*yr)+1,easeOutSine:s=>Math.sin(s*yr),easeInOutSine:s=>-.5*(Math.cos(Vn*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>q0(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>q0(s)?s:nC(s,.075,.3),easeOutElastic:s=>q0(s)?s:aC(s,.075,.3),easeInOutElastic(s){return q0(s)?s:s<.5?.5*nC(s*2,.1125,.45):.5+.5*aC(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-Hg.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Hg.easeInBounce(s*2)*.5:Hg.easeOutBounce(s*2-1)*.5+.5};function Qb(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rC(s){return Qb(s)?s:new nm(s)}function p1(s){return Qb(s)?s:new nm(s).saturate(.5).darken(.1).hexString()}const oz=["x","y","borderWidth","radius","tension"],lz=["color","borderColor","backgroundColor"];function cz(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:lz},numbers:{type:"number",properties:oz}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function hz(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const sC=new Map;function uz(s,e){e=e||{};const t=s+JSON.stringify(e);let i=sC.get(t);return i||(i=new Intl.NumberFormat(s,e),sC.set(t,i)),i}function ym(s,e,t){return uz(e,t).format(s)}const eM={values(s){return Ha(s)?s:""+s},numeric(s,e,t){if(s===0)return"0";const i=this.chart.options.locale;let n,a=s;if(t.length>1){const g=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(g<1e-4||g>1e15)&&(n="scientific"),a=dz(s,t)}const o=fh(Math.abs(a)),r=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(d,this.options.ticks.format),ym(s,i,d)},logarithmic(s,e,t){if(s===0)return"0";const i=t[e].significand||s/Math.pow(10,Math.floor(fh(s)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?eM.numeric.call(this,s,e,t):""}};function dz(s,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&s!==Math.floor(s)&&(t=s-Math.floor(s)),t}var bx={formatters:eM};function fz(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const sd=Object.create(null),wv=Object.create(null);function Ug(s,e){if(!e)return s;const t=e.split(".");for(let i=0,n=t.length;i<n;++i){const a=t[i];s=s[a]||(s[a]=Object.create(null))}return s}function g1(s,e,t){return typeof e=="string"?am(Ug(s,e),t):am(Ug(s,""),e)}class pz{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>p1(n.backgroundColor),this.hoverBorderColor=(i,n)=>p1(n.borderColor),this.hoverColor=(i,n)=>p1(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return g1(this,e,t)}get(e){return Ug(this,e)}describe(e,t){return g1(wv,e,t)}override(e,t){return g1(sd,e,t)}route(e,t,i,n){const a=Ug(this,e),o=Ug(this,i),r="_"+t;Object.defineProperties(a,{[r]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const d=this[r],g=o[n];return Sn(d)?Object.assign({},g,d):Qi(d,g)},set(d){this[r]=d}}})}apply(e){e.forEach(t=>t(this))}}var Ua=new pz({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[cz,hz,fz]);function gz(s){return!s||bn(s.size)||bn(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Y_(s,e,t,i,n){let a=e[n];return a||(a=e[n]=s.measureText(n).width,t.push(n)),a>i&&(i=a),i}function mz(s,e,t,i){i=i||{};let n=i.data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(n=i.data={},a=i.garbageCollect=[],i.font=e),s.save(),s.font=e;let o=0;const r=t.length;let d,g,x,v,k;for(d=0;d<r;d++)if(v=t[d],v!=null&&!Ha(v))o=Y_(s,n,a,o,v);else if(Ha(v))for(g=0,x=v.length;g<x;g++)k=v[g],k!=null&&!Ha(k)&&(o=Y_(s,n,a,o,k));s.restore();const E=a.length/2;if(E>t.length){for(d=0;d<E;d++)delete n[a[d]];a.splice(0,E)}return o}function Cu(s,e,t){const i=s.currentDevicePixelRatio,n=t!==0?Math.max(t/2,.5):0;return Math.round((e-n)*i)/i+n}function oC(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function Sv(s,e,t,i){tM(s,e,t,i,null)}function tM(s,e,t,i,n){let a,o,r,d,g,x,v,k;const E=e.pointStyle,F=e.rotation,O=e.radius;let N=(F||0)*ZO;if(E&&typeof E=="object"&&(a=E.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){s.save(),s.translate(t,i),s.rotate(N),s.drawImage(E,-E.width/2,-E.height/2,E.width,E.height),s.restore();return}if(!(isNaN(O)||O<=0)){switch(s.beginPath(),E){default:n?s.ellipse(t,i,n/2,O,0,0,Da):s.arc(t,i,O,0,Da),s.closePath();break;case"triangle":x=n?n/2:O,s.moveTo(t+Math.sin(N)*x,i-Math.cos(N)*O),N+=Jk,s.lineTo(t+Math.sin(N)*x,i-Math.cos(N)*O),N+=Jk,s.lineTo(t+Math.sin(N)*x,i-Math.cos(N)*O),s.closePath();break;case"rectRounded":g=O*.516,d=O-g,o=Math.cos(N+ku)*d,v=Math.cos(N+ku)*(n?n/2-g:d),r=Math.sin(N+ku)*d,k=Math.sin(N+ku)*(n?n/2-g:d),s.arc(t-v,i-r,g,N-Vn,N-yr),s.arc(t+k,i-o,g,N-yr,N),s.arc(t+v,i+r,g,N,N+yr),s.arc(t-k,i+o,g,N+yr,N+Vn),s.closePath();break;case"rect":if(!F){d=Math.SQRT1_2*O,x=n?n/2:d,s.rect(t-x,i-d,2*x,2*d);break}N+=ku;case"rectRot":v=Math.cos(N)*(n?n/2:O),o=Math.cos(N)*O,r=Math.sin(N)*O,k=Math.sin(N)*(n?n/2:O),s.moveTo(t-v,i-r),s.lineTo(t+k,i-o),s.lineTo(t+v,i+r),s.lineTo(t-k,i+o),s.closePath();break;case"crossRot":N+=ku;case"cross":v=Math.cos(N)*(n?n/2:O),o=Math.cos(N)*O,r=Math.sin(N)*O,k=Math.sin(N)*(n?n/2:O),s.moveTo(t-v,i-r),s.lineTo(t+v,i+r),s.moveTo(t+k,i-o),s.lineTo(t-k,i+o);break;case"star":v=Math.cos(N)*(n?n/2:O),o=Math.cos(N)*O,r=Math.sin(N)*O,k=Math.sin(N)*(n?n/2:O),s.moveTo(t-v,i-r),s.lineTo(t+v,i+r),s.moveTo(t+k,i-o),s.lineTo(t-k,i+o),N+=ku,v=Math.cos(N)*(n?n/2:O),o=Math.cos(N)*O,r=Math.sin(N)*O,k=Math.sin(N)*(n?n/2:O),s.moveTo(t-v,i-r),s.lineTo(t+v,i+r),s.moveTo(t+k,i-o),s.lineTo(t-k,i+o);break;case"line":o=n?n/2:Math.cos(N)*O,r=Math.sin(N)*O,s.moveTo(t-o,i-r),s.lineTo(t+o,i+r);break;case"dash":s.moveTo(t,i),s.lineTo(t+Math.cos(N)*(n?n/2:O),i+Math.sin(N)*O);break;case!1:s.closePath();break}s.fill(),e.borderWidth>0&&s.stroke()}}function Ec(s,e,t){return t=t||.5,!e||s&&s.x>e.left-t&&s.x<e.right+t&&s.y>e.top-t&&s.y<e.bottom+t}function wx(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function Sx(s){s.restore()}function _z(s,e,t,i,n){if(!e)return s.lineTo(t.x,t.y);if(n==="middle"){const a=(e.x+t.x)/2;s.lineTo(a,e.y),s.lineTo(a,t.y)}else n==="after"!=!!i?s.lineTo(e.x,t.y):s.lineTo(t.x,e.y);s.lineTo(t.x,t.y)}function xz(s,e,t,i){if(!e)return s.lineTo(t.x,t.y);s.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function yz(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),bn(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function vz(s,e,t,i,n){if(n.strikethrough||n.underline){const a=s.measureText(i),o=e-a.actualBoundingBoxLeft,r=e+a.actualBoundingBoxRight,d=t-a.actualBoundingBoxAscent,g=t+a.actualBoundingBoxDescent,x=n.strikethrough?(d+g)/2:g;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(o,x),s.lineTo(r,x),s.stroke()}}function bz(s,e){const t=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=t}function od(s,e,t,i,n,a={}){const o=Ha(e)?e:[e],r=a.strokeWidth>0&&a.strokeColor!=="";let d,g;for(s.save(),s.font=n.string,yz(s,a),d=0;d<o.length;++d)g=o[d],a.backdrop&&bz(s,a.backdrop),r&&(a.strokeColor&&(s.strokeStyle=a.strokeColor),bn(a.strokeWidth)||(s.lineWidth=a.strokeWidth),s.strokeText(g,t,i,a.maxWidth)),s.fillText(g,t,i,a.maxWidth),vz(s,t,i,g,a),i+=Number(n.lineHeight);s.restore()}function om(s,e){const{x:t,y:i,w:n,h:a,radius:o}=e;s.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Vn,Vn,!0),s.lineTo(t,i+a-o.bottomLeft),s.arc(t+o.bottomLeft,i+a-o.bottomLeft,o.bottomLeft,Vn,yr,!0),s.lineTo(t+n-o.bottomRight,i+a),s.arc(t+n-o.bottomRight,i+a-o.bottomRight,o.bottomRight,yr,0,!0),s.lineTo(t+n,i+o.topRight),s.arc(t+n-o.topRight,i+o.topRight,o.topRight,0,-yr,!0),s.lineTo(t+o.topLeft,i)}const wz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Sz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kz(s,e){const t=(""+s).match(wz);if(!t||t[1]==="normal")return e*1.2;switch(s=+t[2],t[3]){case"px":return s;case"%":s/=100;break}return e*s}const Cz=s=>+s||0;function Jb(s,e){const t={},i=Sn(e),n=i?Object.keys(e):e,a=Sn(s)?i?o=>Qi(s[o],s[e[o]]):o=>s[o]:()=>s;for(const o of n)t[o]=Cz(a(o));return t}function iM(s){return Jb(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Zu(s){return Jb(s,["topLeft","topRight","bottomLeft","bottomRight"])}function Cs(s){const e=iM(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Vr(s,e){s=s||{},e=e||Ua.font;let t=Qi(s.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Qi(s.style,e.style);i&&!(""+i).match(Sz)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:Qi(s.family,e.family),lineHeight:kz(Qi(s.lineHeight,e.lineHeight),t),size:t,style:i,weight:Qi(s.weight,e.weight),string:""};return n.string=gz(n),n}function bg(s,e,t,i){let n,a,o;for(n=0,a=s.length;n<a;++n)if(o=s[n],o!==void 0&&o!==void 0)return o}function Az(s,e,t){const{min:i,max:n}=s,a=GE(e,(n-i)/2),o=(r,d)=>t&&r===0?0:r+d;return{min:o(i,-Math.abs(a)),max:o(n,a)}}function Dh(s,e){return Object.assign(Object.create(s),e)}function ew(s,e=[""],t,i,n=()=>s[0]){const a=t||s;typeof i>"u"&&(i=sM("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:a,_fallback:i,_getTarget:n,override:r=>ew([r,...s],e,a,i)};return new Proxy(o,{deleteProperty(r,d){return delete r[d],delete r._keys,delete s[0][d],!0},get(r,d){return aM(r,d,()=>Rz(d,e,s,r))},getOwnPropertyDescriptor(r,d){return Reflect.getOwnPropertyDescriptor(r._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(r,d){return cC(r).includes(d)},ownKeys(r){return cC(r)},set(r,d,g){const x=r._storage||(r._storage=n());return r[d]=x[d]=g,delete r._keys,!0}})}function Gf(s,e,t,i){const n={_cacheable:!1,_proxy:s,_context:e,_subProxy:t,_stack:new Set,_descriptors:nM(s,i),setContext:a=>Gf(s,a,t,i),override:a=>Gf(s.override(a),e,t,i)};return new Proxy(n,{deleteProperty(a,o){return delete a[o],delete s[o],!0},get(a,o,r){return aM(a,o,()=>Ez(a,o,r))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(a,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(a,o,r){return s[o]=r,delete a[o],!0}})}function nM(s,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:n=e.allKeys}=s;return{allKeys:n,scriptable:t,indexable:i,isScriptable:Ah(t)?t:()=>t,isIndexable:Ah(i)?i:()=>i}}const Tz=(s,e)=>s?s+Yb(e):e,tw=(s,e)=>Sn(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function aM(s,e,t){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const i=t();return s[e]=i,i}function Ez(s,e,t){const{_proxy:i,_context:n,_subProxy:a,_descriptors:o}=s;let r=i[e];return Ah(r)&&o.isScriptable(e)&&(r=Mz(e,r,s,t)),Ha(r)&&r.length&&(r=Iz(e,r,s,o.isIndexable)),tw(e,r)&&(r=Gf(r,n,a&&a[e],o)),r}function Mz(s,e,t,i){const{_proxy:n,_context:a,_subProxy:o,_stack:r}=t;if(r.has(s))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+s);r.add(s);let d=e(a,o||i);return r.delete(s),tw(s,d)&&(d=iw(n._scopes,n,s,d)),d}function Iz(s,e,t,i){const{_proxy:n,_context:a,_subProxy:o,_descriptors:r}=t;if(typeof a.index<"u"&&i(s))return e[a.index%e.length];if(Sn(e[0])){const d=e,g=n._scopes.filter(x=>x!==d);e=[];for(const x of d){const v=iw(g,n,s,x);e.push(Gf(v,a,o&&o[s],r))}}return e}function rM(s,e,t){return Ah(s)?s(e,t):s}const Pz=(s,e)=>s===!0?e:typeof s=="string"?Ch(e,s):void 0;function Lz(s,e,t,i,n){for(const a of e){const o=Pz(t,a);if(o){s.add(o);const r=rM(o._fallback,t,n);if(typeof r<"u"&&r!==t&&r!==i)return r}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function iw(s,e,t,i){const n=e._rootScopes,a=rM(e._fallback,t,i),o=[...s,...n],r=new Set;r.add(i);let d=lC(r,o,t,a||t,i);return d===null||typeof a<"u"&&a!==t&&(d=lC(r,o,a,d,i),d===null)?!1:ew(Array.from(r),[""],n,a,()=>Dz(e,t,i))}function lC(s,e,t,i,n){for(;t;)t=Lz(s,e,t,i,n);return t}function Dz(s,e,t){const i=s._getTarget();e in i||(i[e]={});const n=i[e];return Ha(n)&&Sn(t)?t:n||{}}function Rz(s,e,t,i){let n;for(const a of e)if(n=sM(Tz(a,s),t),typeof n<"u")return tw(s,n)?iw(t,i,s,n):n}function sM(s,e){for(const t of e){if(!t)continue;const i=t[s];if(typeof i<"u")return i}}function cC(s){let e=s._keys;return e||(e=s._keys=Oz(s._scopes)),e}function Oz(s){const e=new Set;for(const t of s)for(const i of Object.keys(t).filter(n=>!n.startsWith("_")))e.add(i);return Array.from(e)}function oM(s,e,t,i){const{iScale:n}=s,{key:a="r"}=this._parsing,o=new Array(i);let r,d,g,x;for(r=0,d=i;r<d;++r)g=r+t,x=e[g],o[r]={r:n.parse(Ch(x,a),g)};return o}const zz=Number.EPSILON||1e-14,Wf=(s,e)=>e<s.length&&!s[e].skip&&s[e],lM=s=>s==="x"?"y":"x";function Fz(s,e,t,i){const n=s.skip?e:s,a=e,o=t.skip?e:t,r=bv(a,n),d=bv(o,a);let g=r/(r+d),x=d/(r+d);g=isNaN(g)?0:g,x=isNaN(x)?0:x;const v=i*g,k=i*x;return{previous:{x:a.x-v*(o.x-n.x),y:a.y-v*(o.y-n.y)},next:{x:a.x+k*(o.x-n.x),y:a.y+k*(o.y-n.y)}}}function Bz(s,e,t){const i=s.length;let n,a,o,r,d,g=Wf(s,0);for(let x=0;x<i-1;++x)if(d=g,g=Wf(s,x+1),!(!d||!g)){if(Vg(e[x],0,zz)){t[x]=t[x+1]=0;continue}n=t[x]/e[x],a=t[x+1]/e[x],r=Math.pow(n,2)+Math.pow(a,2),!(r<=9)&&(o=3/Math.sqrt(r),t[x]=n*o*e[x],t[x+1]=a*o*e[x])}}function Nz(s,e,t="x"){const i=lM(t),n=s.length;let a,o,r,d=Wf(s,0);for(let g=0;g<n;++g){if(o=r,r=d,d=Wf(s,g+1),!r)continue;const x=r[t],v=r[i];o&&(a=(x-o[t])/3,r[`cp1${t}`]=x-a,r[`cp1${i}`]=v-a*e[g]),d&&(a=(d[t]-x)/3,r[`cp2${t}`]=x+a,r[`cp2${i}`]=v+a*e[g])}}function jz(s,e="x"){const t=lM(e),i=s.length,n=Array(i).fill(0),a=Array(i);let o,r,d,g=Wf(s,0);for(o=0;o<i;++o)if(r=d,d=g,g=Wf(s,o+1),!!d){if(g){const x=g[e]-d[e];n[o]=x!==0?(g[t]-d[t])/x:0}a[o]=r?g?ql(n[o-1])!==ql(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}Bz(s,n,a),Nz(s,a,e)}function Z0(s,e,t){return Math.max(Math.min(s,t),e)}function Vz(s,e){let t,i,n,a,o,r=Ec(s[0],e);for(t=0,i=s.length;t<i;++t)o=a,a=r,r=t<i-1&&Ec(s[t+1],e),a&&(n=s[t],o&&(n.cp1x=Z0(n.cp1x,e.left,e.right),n.cp1y=Z0(n.cp1y,e.top,e.bottom)),r&&(n.cp2x=Z0(n.cp2x,e.left,e.right),n.cp2y=Z0(n.cp2y,e.top,e.bottom)))}function Hz(s,e,t,i,n){let a,o,r,d;if(e.spanGaps&&(s=s.filter(g=>!g.skip)),e.cubicInterpolationMode==="monotone")jz(s,n);else{let g=i?s[s.length-1]:s[0];for(a=0,o=s.length;a<o;++a)r=s[a],d=Fz(g,r,s[Math.min(a+1,o-(i?0:1))%o],e.tension),r.cp1x=d.previous.x,r.cp1y=d.previous.y,r.cp2x=d.next.x,r.cp2y=d.next.y,g=r}e.capBezierPoints&&Vz(s,t)}function nw(){return typeof window<"u"&&typeof document<"u"}function aw(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function q_(s,e,t){let i;return typeof s=="string"?(i=parseInt(s,10),s.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=s,i}const kx=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function Uz(s,e){return kx(s).getPropertyValue(e)}const Gz=["top","right","bottom","left"];function Ku(s,e,t){const i={};t=t?"-"+t:"";for(let n=0;n<4;n++){const a=Gz[n];i[a]=parseFloat(s[e+"-"+a+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Wz=(s,e,t)=>(s>0||e>0)&&(!t||!t.shadowRoot);function $z(s,e){const t=s.touches,i=t&&t.length?t[0]:s,{offsetX:n,offsetY:a}=i;let o=!1,r,d;if(Wz(n,a,s.target))r=n,d=a;else{const g=e.getBoundingClientRect();r=i.clientX-g.left,d=i.clientY-g.top,o=!0}return{x:r,y:d,box:o}}function Pu(s,e){if("native"in s)return s;const{canvas:t,currentDevicePixelRatio:i}=e,n=kx(t),a=n.boxSizing==="border-box",o=Ku(n,"padding"),r=Ku(n,"border","width"),{x:d,y:g,box:x}=$z(s,t),v=o.left+(x&&r.left),k=o.top+(x&&r.top);let{width:E,height:F}=e;return a&&(E-=o.width+r.width,F-=o.height+r.height),{x:Math.round((d-v)/E*t.width/i),y:Math.round((g-k)/F*t.height/i)}}function Xz(s,e,t){let i,n;if(e===void 0||t===void 0){const a=s&&aw(s);if(!a)e=s.clientWidth,t=s.clientHeight;else{const o=a.getBoundingClientRect(),r=kx(a),d=Ku(r,"border","width"),g=Ku(r,"padding");e=o.width-g.width-d.width,t=o.height-g.height-d.height,i=q_(r.maxWidth,a,"clientWidth"),n=q_(r.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:i||X_,maxHeight:n||X_}}const ph=s=>Math.round(s*10)/10;function Yz(s,e,t,i){const n=kx(s),a=Ku(n,"margin"),o=q_(n.maxWidth,s,"clientWidth")||X_,r=q_(n.maxHeight,s,"clientHeight")||X_,d=Xz(s,e,t);let{width:g,height:x}=d;if(n.boxSizing==="content-box"){const k=Ku(n,"border","width"),E=Ku(n,"padding");g-=E.width+k.width,x-=E.height+k.height}return g=Math.max(0,g-a.width),x=Math.max(0,i?g/i:x-a.height),g=ph(Math.min(g,o,d.maxWidth)),x=ph(Math.min(x,r,d.maxHeight)),g&&!x&&(x=ph(g/2)),(e!==void 0||t!==void 0)&&i&&d.height&&x>d.height&&(x=d.height,g=ph(Math.floor(x*i))),{width:g,height:x}}function hC(s,e,t){const i=e||1,n=ph(s.height*i),a=ph(s.width*i);s.height=ph(s.height),s.width=ph(s.width);const o=s.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==i||o.height!==n||o.width!==a?(s.currentDevicePixelRatio=i,o.height=n,o.width=a,s.ctx.setTransform(i,0,0,i,0,0),!0):!1}const qz=(function(){let s=!1;try{const e={get passive(){return s=!0,!1}};nw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s})();function uC(s,e){const t=Uz(s,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Lu(s,e,t,i){return{x:s.x+t*(e.x-s.x),y:s.y+t*(e.y-s.y)}}function Zz(s,e,t,i){return{x:s.x+t*(e.x-s.x),y:i==="middle"?t<.5?s.y:e.y:i==="after"?t<1?s.y:e.y:t>0?e.y:s.y}}function Kz(s,e,t,i){const n={x:s.cp2x,y:s.cp2y},a={x:e.cp1x,y:e.cp1y},o=Lu(s,n,t),r=Lu(n,a,t),d=Lu(a,e,t),g=Lu(o,r,t),x=Lu(r,d,t);return Lu(g,x,t)}const Qz=function(s,e){return{x(t){return s+s+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},Jz=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,e){return s+e},leftForLtr(s,e){return s}}};function Rf(s,e,t){return s?Qz(e,t):Jz()}function cM(s,e){let t,i;(e==="ltr"||e==="rtl")&&(t=s.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),s.prevTextDirection=i)}function hM(s,e){e!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",e[0],e[1]))}function uM(s){return s==="angle"?{between:sm,compare:ez,normalize:vs}:{between:Ac,compare:(e,t)=>e-t,normalize:e=>e}}function dC({start:s,end:e,count:t,loop:i,style:n}){return{start:s%t,end:e%t,loop:i&&(e-s+1)%t===0,style:n}}function eF(s,e,t){const{property:i,start:n,end:a}=t,{between:o,normalize:r}=uM(i),d=e.length;let{start:g,end:x,loop:v}=s,k,E;if(v){for(g+=d,x+=d,k=0,E=d;k<E&&o(r(e[g%d][i]),n,a);++k)g--,x--;g%=d,x%=d}return x<g&&(x+=d),{start:g,end:x,loop:v,style:s.style}}function dM(s,e,t){if(!t)return[s];const{property:i,start:n,end:a}=t,o=e.length,{compare:r,between:d,normalize:g}=uM(i),{start:x,end:v,loop:k,style:E}=eF(s,e,t),F=[];let O=!1,N=null,$,X,K;const ie=()=>d(n,K,$)&&r(n,K)!==0,ee=()=>r(a,$)===0||d(a,K,$),le=()=>O||ie(),te=()=>!O||ee();for(let he=x,de=x;he<=v;++he)X=e[he%o],!X.skip&&($=g(X[i]),$!==K&&(O=d($,n,a),N===null&&le()&&(N=r($,n)===0?he:de),N!==null&&te()&&(F.push(dC({start:N,end:he,loop:k,count:o,style:E})),N=null),de=he,K=$));return N!==null&&F.push(dC({start:N,end:v,loop:k,count:o,style:E})),F}function fM(s,e){const t=[],i=s.segments;for(let n=0;n<i.length;n++){const a=dM(i[n],s.points,e);a.length&&t.push(...a)}return t}function tF(s,e,t,i){let n=0,a=e-1;if(t&&!i)for(;n<e&&!s[n].skip;)n++;for(;n<e&&s[n].skip;)n++;for(n%=e,t&&(a+=n);a>n&&s[a%e].skip;)a--;return a%=e,{start:n,end:a}}function iF(s,e,t,i){const n=s.length,a=[];let o=e,r=s[e],d;for(d=e+1;d<=t;++d){const g=s[d%n];g.skip||g.stop?r.skip||(i=!1,a.push({start:e%n,end:(d-1)%n,loop:i}),e=o=g.stop?d:null):(o=d,r.skip&&(e=d)),r=g}return o!==null&&a.push({start:e%n,end:o%n,loop:i}),a}function nF(s,e){const t=s.points,i=s.options.spanGaps,n=t.length;if(!n)return[];const a=!!s._loop,{start:o,end:r}=tF(t,n,a,i);if(i===!0)return fC(s,[{start:o,end:r,loop:a}],t,e);const d=r<o?r+n:r,g=!!s._fullLoop&&o===0&&r===n-1;return fC(s,iF(t,o,d,g),t,e)}function fC(s,e,t,i){return!i||!i.setContext||!t?e:aF(s,e,t,i)}function aF(s,e,t,i){const n=s._chart.getContext(),a=pC(s.options),{_datasetIndex:o,options:{spanGaps:r}}=s,d=t.length,g=[];let x=a,v=e[0].start,k=v;function E(F,O,N,$){const X=r?-1:1;if(F!==O){for(F+=d;t[F%d].skip;)F-=X;for(;t[O%d].skip;)O+=X;F%d!==O%d&&(g.push({start:F%d,end:O%d,loop:N,style:$}),x=$,v=O%d)}}for(const F of e){v=r?v:F.start;let O=t[v%d],N;for(k=v+1;k<=F.end;k++){const $=t[k%d];N=pC(i.setContext(Dh(n,{type:"segment",p0:O,p1:$,p0DataIndex:(k-1)%d,p1DataIndex:k%d,datasetIndex:o}))),rF(N,x)&&E(v,k-1,F.loop,x),O=$,x=N}v<k-1&&E(v,k-1,F.loop,x)}return g}function pC(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function rF(s,e){if(!e)return!1;const t=[],i=function(n,a){return Qb(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(s,i)!==JSON.stringify(e,i)}function K0(s,e,t){return s.options.clip?s[t]:e[t]}function sF(s,e){const{xScale:t,yScale:i}=s;return t&&i?{left:K0(t,e,"left"),right:K0(t,e,"right"),top:K0(i,e,"top"),bottom:K0(i,e,"bottom")}:e}function pM(s,e){const t=e._clip;if(t.disabled)return!1;const i=sF(e,s.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?s.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?s.height:i.bottom+(t.bottom===!0?0:t.bottom)}}class oF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const a=t.listeners[n],o=t.duration;a.forEach(r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ZE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const a=i.items;let o=a.length-1,r=!1,d;for(;o>=0;--o)d=a[o],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(e),r=!0):(a[o]=a[a.length-1],a.pop());r&&(n.draw(),this._notify(n,i,e,"progress")),a.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var _c=new oF;const gC="transparent",lF={boolean(s,e,t){return t>.5?e:s},color(s,e,t){const i=rC(s||gC),n=i.valid&&rC(e||gC);return n&&n.valid?n.mix(i,t).hexString():e},number(s,e,t){return s+(e-s)*t}};class cF{constructor(e,t,i,n){const a=t[i];n=bg([e.to,n,a,e.from]);const o=bg([e.from,a,n]);this._active=!0,this._fn=e.fn||lF[e.type||typeof o],this._easing=Hg[e.easing]||Hg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const n=this._target[this._prop],a=i-this._start,o=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=bg([e.to,t,n,e.from]),this._from=bg([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,n=this._prop,a=this._from,o=this._loop,r=this._to;let d;if(this._active=a!==r&&(o||t<i),!this._active){this._target[n]=r,this._notify(!0);return}if(t<0){this._target[n]=a;return}d=t/i%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[n]=this._fn(a,r,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][t]()}}class gM{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Sn(e))return;const t=Object.keys(Ua.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const a=e[n];if(!Sn(a))return;const o={};for(const r of t)o[r]=a[r];(Ha(a.properties)&&a.properties||[n]).forEach(r=>{(r===n||!i.has(r))&&i.set(r,o)})})}_animateOptions(e,t){const i=t.options,n=uF(e,i);if(!n)return[];const a=this._createAnimations(n,i);return i.$shared&&hF(e.options.$animations,i).then(()=>{e.options=i},()=>{}),a}_createAnimations(e,t){const i=this._properties,n=[],a=e.$animations||(e.$animations={}),o=Object.keys(t),r=Date.now();let d;for(d=o.length-1;d>=0;--d){const g=o[d];if(g.charAt(0)==="$")continue;if(g==="options"){n.push(...this._animateOptions(e,t));continue}const x=t[g];let v=a[g];const k=i.get(g);if(v)if(k&&v.active()){v.update(k,x,r);continue}else v.cancel();if(!k||!k.duration){e[g]=x;continue}a[g]=v=new cF(k,e,g,x),n.push(v)}return n}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return _c.add(this._chart,i),!0}}function hF(s,e){const t=[],i=Object.keys(e);for(let n=0;n<i.length;n++){const a=s[i[n]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function uF(s,e){if(!e)return;let t=s.options;if(!t){s.options=e;return}return t.$shared&&(s.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function mC(s,e){const t=s&&s.options||{},i=t.reverse,n=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:i?a:n,end:i?n:a}}function dF(s,e,t){if(t===!1)return!1;const i=mC(s,t),n=mC(e,t);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function fF(s){let e,t,i,n;return Sn(s)?(e=s.top,t=s.right,i=s.bottom,n=s.left):e=t=i=n=s,{top:e,right:t,bottom:i,left:n,disabled:s===!1}}function mM(s,e){const t=[],i=s._getSortedDatasetMetas(e);let n,a;for(n=0,a=i.length;n<a;++n)t.push(i[n].index);return t}function _C(s,e,t,i={}){const n=s.keys,a=i.mode==="single";let o,r,d,g;if(e===null)return;let x=!1;for(o=0,r=n.length;o<r;++o){if(d=+n[o],d===t){if(x=!0,i.all)continue;break}g=s.values[d],rr(g)&&(a||e===0||ql(e)===ql(g))&&(e+=g)}return!x&&!i.all?0:e}function pF(s,e){const{iScale:t,vScale:i}=e,n=t.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",o=Object.keys(s),r=new Array(o.length);let d,g,x;for(d=0,g=o.length;d<g;++d)x=o[d],r[d]={[n]:x,[a]:s[x]};return r}function m1(s,e){const t=s&&s.options.stacked;return t||t===void 0&&e.stack!==void 0}function gF(s,e,t){return`${s.id}.${e.id}.${t.stack||t.type}`}function mF(s){const{min:e,max:t,minDefined:i,maxDefined:n}=s.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:n?t:Number.POSITIVE_INFINITY}}function _F(s,e,t){const i=s[e]||(s[e]={});return i[t]||(i[t]={})}function xC(s,e,t,i){for(const n of e.getMatchingVisibleMetas(i).reverse()){const a=s[n.index];if(t&&a>0||!t&&a<0)return n.index}return null}function yC(s,e){const{chart:t,_cachedMeta:i}=s,n=t._stacks||(t._stacks={}),{iScale:a,vScale:o,index:r}=i,d=a.axis,g=o.axis,x=gF(a,o,i),v=e.length;let k;for(let E=0;E<v;++E){const F=e[E],{[d]:O,[g]:N}=F,$=F._stacks||(F._stacks={});k=$[g]=_F(n,x,O),k[r]=N,k._top=xC(k,o,!0,i.type),k._bottom=xC(k,o,!1,i.type);const X=k._visualValues||(k._visualValues={});X[r]=N}}function _1(s,e){const t=s.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function xF(s,e){return Dh(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yF(s,e,t){return Dh(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function ng(s,e){const t=s.controller.index,i=s.vScale&&s.vScale.axis;if(i){e=e||s._parsed;for(const n of e){const a=n._stacks;if(!a||a[i]===void 0||a[i][t]===void 0)return;delete a[i][t],a[i]._visualValues!==void 0&&a[i]._visualValues[t]!==void 0&&delete a[i]._visualValues[t]}}}const x1=s=>s==="reset"||s==="none",vC=(s,e)=>e?s:Object.assign({},s),vF=(s,e,t)=>s&&!e.hidden&&e._stacked&&{keys:mM(t,!0),values:null};class Rh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=m1(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ng(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),n=(v,k,E,F)=>v==="x"?k:v==="r"?F:E,a=t.xAxisID=Qi(i.xAxisID,_1(e,"x")),o=t.yAxisID=Qi(i.yAxisID,_1(e,"y")),r=t.rAxisID=Qi(i.rAxisID,_1(e,"r")),d=t.indexAxis,g=t.iAxisID=n(d,a,o,r),x=t.vAxisID=n(d,o,a,r);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(r),t.iScale=this.getScaleForId(g),t.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&iC(this._data,this),e._stacked&&ng(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Sn(t)){const n=this._cachedMeta;this._data=pF(t,n)}else if(i!==t){if(i){iC(i,this);const n=this._cachedMeta;ng(n),n._parsed=[]}t&&Object.isExtensible(t)&&az(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const a=t._stacked;t._stacked=m1(t.vScale,t),t.stack!==i.stack&&(n=!0,ng(t),t.stack=i.stack),this._resyncElements(e),(n||a!==t._stacked)&&(yC(this,t._parsed),t._stacked=m1(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:n}=this,{iScale:a,_stacked:o}=i,r=a.axis;let d=e===0&&t===n.length?!0:i._sorted,g=e>0&&i._parsed[e-1],x,v,k;if(this._parsing===!1)i._parsed=n,i._sorted=!0,k=n;else{Ha(n[e])?k=this.parseArrayData(i,n,e,t):Sn(n[e])?k=this.parseObjectData(i,n,e,t):k=this.parsePrimitiveData(i,n,e,t);const E=()=>v[r]===null||g&&v[r]<g[r];for(x=0;x<t;++x)i._parsed[x+e]=v=k[x],d&&(E()&&(d=!1),g=v);i._sorted=d}o&&yC(this,k)}parsePrimitiveData(e,t,i,n){const{iScale:a,vScale:o}=e,r=a.axis,d=o.axis,g=a.getLabels(),x=a===o,v=new Array(n);let k,E,F;for(k=0,E=n;k<E;++k)F=k+i,v[k]={[r]:x||a.parse(g[F],F),[d]:o.parse(t[F],F)};return v}parseArrayData(e,t,i,n){const{xScale:a,yScale:o}=e,r=new Array(n);let d,g,x,v;for(d=0,g=n;d<g;++d)x=d+i,v=t[x],r[d]={x:a.parse(v[0],x),y:o.parse(v[1],x)};return r}parseObjectData(e,t,i,n){const{xScale:a,yScale:o}=e,{xAxisKey:r="x",yAxisKey:d="y"}=this._parsing,g=new Array(n);let x,v,k,E;for(x=0,v=n;x<v;++x)k=x+i,E=t[k],g[x]={x:a.parse(Ch(E,r),k),y:o.parse(Ch(E,d),k)};return g}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,a=this._cachedMeta,o=t[e.axis],r={keys:mM(n,!0),values:t._stacks[e.axis]._visualValues};return _C(r,o,a.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const a=i[t.axis];let o=a===null?NaN:a;const r=n&&i._stacks[t.axis];n&&r&&(n.values=r,o=_C(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,n=i._parsed,a=i._sorted&&e===i.iScale,o=n.length,r=this._getOtherScale(e),d=vF(t,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:v}=mF(r);let k,E;function F(){E=n[k];const O=E[r.axis];return!rr(E[e.axis])||x>O||v<O}for(k=0;k<o&&!(!F()&&(this.updateRangeFromParsed(g,e,E,d),a));++k);if(a){for(k=o-1;k>=0;--k)if(!F()){this.updateRangeFromParsed(g,e,E,d);break}}return g}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let n,a,o;for(n=0,a=t.length;n<a;++n)o=t[n][e.axis],rr(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=fF(Qi(this.options.clip,dF(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,n=i.data||[],a=t.chartArea,o=[],r=this._drawStart||0,d=this._drawCount||n.length-r,g=this.options.drawActiveElementsOnTop;let x;for(i.dataset&&i.dataset.draw(e,a,r,d),x=r;x<r+d;++x){const v=n[x];v.hidden||(v.active&&g?o.push(v):v.draw(e,a))}for(x=0;x<o.length;++x)o[x].draw(e,a)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const n=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=yF(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=n.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=xF(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=i,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const n=t==="active",a=this._cachedDataOpts,o=e+"-"+t,r=a[o],d=this.enableOptionSharing&&rm(i);if(r)return vC(r,d);const g=this.chart.config,x=g.datasetElementScopeKeys(this._type,e),v=n?[`${e}Hover`,"hover",e,""]:[e,""],k=g.getOptionScopes(this.getDataset(),x),E=Object.keys(Ua.elements[e]),F=()=>this.getContext(i,n,t),O=g.resolveNamedOptions(k,E,F,v);return O.$shared&&(O.$shared=d,a[o]=Object.freeze(vC(O,d))),O}_resolveAnimations(e,t,i){const n=this.chart,a=this._cachedDataOpts,o=`animation-${t}`,r=a[o];if(r)return r;let d;if(n.options.animation!==!1){const x=this.chart.config,v=x.datasetAnimationScopeKeys(this._type,t),k=x.getOptionScopes(this.getDataset(),v);d=x.createResolver(k,this.getContext(e,i,t))}const g=new gM(n,d&&d.animations);return d&&d._cacheable&&(a[o]=Object.freeze(g)),g}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||x1(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,a=this.getSharedOptions(i),o=this.includeOptions(t,a)||a!==n;return this.updateSharedOptions(a,t,i),{sharedOptions:a,includeOptions:o}}updateElement(e,t,i,n){x1(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!x1(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const a=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[r,d,g]of this._syncList)this[r](d,g);this._syncList=[];const n=i.length,a=t.length,o=Math.min(a,n);o&&this.parse(0,o),a>n?this._insertElements(n,a-n,e):a<n&&this._removeElements(a,n-a)}_insertElements(e,t,i=!0){const n=this._cachedMeta,a=n.data,o=e+t;let r;const d=g=>{for(g.length+=t,r=g.length-1;r>=o;r--)g[r]=g[r-t]};for(d(a),r=e;r<o;++r)a[r]=new this.dataElementType;this._parsing&&d(n._parsed),this.parse(e,t),i&&this.updateElements(a,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&ng(i,n)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,n]=e;this[t](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function bF(s,e){if(!s._cache.$bar){const t=s.getMatchingVisibleMetas(e);let i=[];for(let n=0,a=t.length;n<a;n++)i=i.concat(t[n].controller.getAllParsedValues(s));s._cache.$bar=qE(i.sort((n,a)=>n-a))}return s._cache.$bar}function wF(s){const e=s.iScale,t=bF(e,s.type);let i=e._length,n,a,o,r;const d=()=>{o===32767||o===-32768||(rm(r)&&(i=Math.min(i,Math.abs(o-r)||i)),r=o)};for(n=0,a=t.length;n<a;++n)o=e.getPixelForValue(t[n]),d();for(r=void 0,n=0,a=e.ticks.length;n<a;++n)o=e.getPixelForTick(n),d();return i}function SF(s,e,t,i){const n=t.barThickness;let a,o;return bn(n)?(a=e.min*t.categoryPercentage,o=t.barPercentage):(a=n*i,o=1),{chunk:a/i,ratio:o,start:e.pixels[s]-a/2}}function kF(s,e,t,i){const n=e.pixels,a=n[s];let o=s>0?n[s-1]:null,r=s<n.length-1?n[s+1]:null;const d=t.categoryPercentage;o===null&&(o=a-(r===null?e.end-e.start:r-a)),r===null&&(r=a+a-o);const g=a-(a-Math.min(o,r))/2*d;return{chunk:Math.abs(r-o)/2*d/i,ratio:t.barPercentage,start:g}}function CF(s,e,t,i){const n=t.parse(s[0],i),a=t.parse(s[1],i),o=Math.min(n,a),r=Math.max(n,a);let d=o,g=r;Math.abs(o)>Math.abs(r)&&(d=r,g=o),e[t.axis]=g,e._custom={barStart:d,barEnd:g,start:n,end:a,min:o,max:r}}function _M(s,e,t,i){return Ha(s)?CF(s,e,t,i):e[t.axis]=t.parse(s,i),e}function bC(s,e,t,i){const n=s.iScale,a=s.vScale,o=n.getLabels(),r=n===a,d=[];let g,x,v,k;for(g=t,x=t+i;g<x;++g)k=e[g],v={},v[n.axis]=r||n.parse(o[g],g),d.push(_M(k,v,a,g));return d}function y1(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function AF(s,e,t){return s!==0?ql(s):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function TF(s){let e,t,i,n,a;return s.horizontal?(e=s.base>s.x,t="left",i="right"):(e=s.base<s.y,t="bottom",i="top"),e?(n="end",a="start"):(n="start",a="end"),{start:t,end:i,reverse:e,top:n,bottom:a}}function EF(s,e,t,i){let n=e.borderSkipped;const a={};if(!n){s.borderSkipped=a;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:r,reverse:d,top:g,bottom:x}=TF(s);n==="middle"&&t&&(s.enableBorderRadius=!0,(t._top||0)===i?n=g:(t._bottom||0)===i?n=x:(a[wC(x,o,r,d)]=!0,n=g)),a[wC(n,o,r,d)]=!0,s.borderSkipped=a}function wC(s,e,t,i){return i?(s=MF(s,e,t),s=SC(s,t,e)):s=SC(s,e,t),s}function MF(s,e,t){return s===e?t:s===t?e:s}function SC(s,e,t){return s==="start"?e:s==="end"?t:s}function IF(s,{inflateAmount:e},t){s.inflateAmount=e==="auto"?t===1?.33:0:e}class PF extends Rh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,n){return bC(e,t,i,n)}parseArrayData(e,t,i,n){return bC(e,t,i,n)}parseObjectData(e,t,i,n){const{iScale:a,vScale:o}=e,{xAxisKey:r="x",yAxisKey:d="y"}=this._parsing,g=a.axis==="x"?r:d,x=o.axis==="x"?r:d,v=[];let k,E,F,O;for(k=i,E=i+n;k<E;++k)O=t[k],F={},F[a.axis]=a.parse(Ch(O,g),k),v.push(_M(Ch(O,x),F,o,k));return v}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const a=i._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,a=this.getParsed(e),o=a._custom,r=y1(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,n){const a=n==="reset",{index:o,_cachedMeta:{vScale:r}}=this,d=r.getBasePixel(),g=r.isHorizontal(),x=this._getRuler(),{sharedOptions:v,includeOptions:k}=this._getSharedOptions(t,n);for(let E=t;E<t+i;E++){const F=this.getParsed(E),O=a||bn(F[r.axis])?{base:d,head:d}:this._calculateBarValuePixels(E),N=this._calculateBarIndexPixels(E,x),$=(F._stacks||{})[r.axis],X={horizontal:g,base:O.base,enableBorderRadius:!$||y1(F._custom)||o===$._top||o===$._bottom,x:g?O.head:N.center,y:g?N.center:O.head,height:g?N.size:Math.abs(O.size),width:g?Math.abs(O.size):N.size};k&&(X.options=v||this.resolveDataElementOptions(E,e[E].active?"active":n));const K=X.options||e[E].options;EF(X,K,$,o),IF(X,K,x.ratio),this.updateElement(e[E],E,X,n)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),a=i.options.stacked,o=[],r=this._cachedMeta.controller.getParsed(t),d=r&&r[i.axis],g=x=>{const v=x._parsed.find(E=>E[i.axis]===d),k=v&&v[x.vScale.axis];if(bn(k)||isNaN(k))return!0};for(const x of n)if(!(t!==void 0&&g(x))&&((a===!1||o.indexOf(x.stack)===-1||a===void 0&&x.stack===void 0)&&o.push(x.stack),x.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[Qi(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const n=this._getStacks(e,i),a=t!==void 0?n.indexOf(t):-1;return a===-1?n.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,n=[];let a,o;for(a=0,o=t.data.length;a<o;++a)n.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const r=e.barThickness;return{min:r||wF(t),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:r?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:n},options:{base:a,minBarLength:o}}=this,r=a||0,d=this.getParsed(e),g=d._custom,x=y1(g);let v=d[t.axis],k=0,E=i?this.applyStack(t,d,i):v,F,O;E!==v&&(k=E-v,E=v),x&&(v=g.barStart,E=g.barEnd-g.barStart,v!==0&&ql(v)!==ql(g.barEnd)&&(k=0),k+=v);const N=!bn(a)&&!x?a:k;let $=t.getPixelForValue(N);if(this.chart.getDataVisibility(e)?F=t.getPixelForValue(k+E):F=$,O=F-$,Math.abs(O)<o){O=AF(O,t,r)*o,v===r&&($-=O/2);const X=t.getPixelForDecimal(0),K=t.getPixelForDecimal(1),ie=Math.min(X,K),ee=Math.max(X,K);$=Math.max(Math.min($,ee),ie),F=$+O,i&&!x&&(d._stacks[t.axis]._visualValues[n]=t.getValueForPixel(F)-t.getValueForPixel($))}if($===t.getPixelForValue(r)){const X=ql(O)*t.getLineWidthForValue(r)/2;$+=X,O-=X}return{size:O,base:$,head:F,center:F+O/2}}_calculateBarIndexPixels(e,t){const i=t.scale,n=this.options,a=n.skipNull,o=Qi(n.maxBarThickness,1/0);let r,d;const g=this._getAxisCount();if(t.grouped){const x=a?this._getStackCount(e):t.stackCount,v=n.barThickness==="flex"?kF(e,t,n,x*g):SF(e,t,n,x*g),k=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,E=this._getAxis().indexOf(Qi(k,this.getFirstScaleIdForIndexAxis())),F=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+E;r=v.start+v.chunk*F+v.chunk/2,d=Math.min(o,v.chunk*v.ratio)}else r=i.getPixelForValue(this.getParsed(e)[i.axis],e),d=Math.min(o,t.min*t.ratio);return{base:r-d/2,head:r+d/2,center:r,size:d}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length;let a=0;for(;a<n;++a)this.getParsed(a)[t.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}class LF extends Rh{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,n){const a=super.parsePrimitiveData(e,t,i,n);for(let o=0;o<a.length;o++)a[o]._custom=this.resolveDataElementOptions(o+i).radius;return a}parseArrayData(e,t,i,n){const a=super.parseArrayData(e,t,i,n);for(let o=0;o<a.length;o++){const r=t[i+o];a[o]._custom=Qi(r[2],this.resolveDataElementOptions(o+i).radius)}return a}parseObjectData(e,t,i,n){const a=super.parseObjectData(e,t,i,n);for(let o=0;o<a.length;o++){const r=t[i+o];a[o]._custom=Qi(r&&r.r&&+r.r,this.resolveDataElementOptions(o+i).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:a}=t,o=this.getParsed(e),r=n.getLabelForValue(o.x),d=a.getLabelForValue(o.y),g=o._custom;return{label:i[e]||"",value:"("+r+", "+d+(g?", "+g:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,n){const a=n==="reset",{iScale:o,vScale:r}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(t,n),x=o.axis,v=r.axis;for(let k=t;k<t+i;k++){const E=e[k],F=!a&&this.getParsed(k),O={},N=O[x]=a?o.getPixelForDecimal(.5):o.getPixelForValue(F[x]),$=O[v]=a?r.getBasePixel():r.getPixelForValue(F[v]);O.skip=isNaN(N)||isNaN($),g&&(O.options=d||this.resolveDataElementOptions(k,E.active?"active":n),a&&(O.options.radius=0)),this.updateElement(E,k,O,n)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const a=n.radius;return t!=="active"&&(n.radius=0),n.radius+=Qi(i&&i._custom,a),n}}function DF(s,e,t){let i=1,n=1,a=0,o=0;if(e<Da){const r=s,d=r+e,g=Math.cos(r),x=Math.sin(r),v=Math.cos(d),k=Math.sin(d),E=(K,ie,ee)=>sm(K,r,d,!0)?1:Math.max(ie,ie*t,ee,ee*t),F=(K,ie,ee)=>sm(K,r,d,!0)?-1:Math.min(ie,ie*t,ee,ee*t),O=E(0,g,v),N=E(yr,x,k),$=F(Vn,g,v),X=F(Vn+yr,x,k);i=(O-$)/2,n=(N-X)/2,a=-(O+$)/2,o=-(N+X)/2}return{ratioX:i,ratioY:n,offsetX:a,offsetY:o}}class rw extends Rh{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:i,textAlign:n,color:a,useBorderRadius:o,borderRadius:r}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((d,g)=>{const v=e.getDatasetMeta(0).controller.getStyle(g);return{text:d,fillStyle:v.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(g),lineDash:v.borderDash,lineDashOffset:v.borderDashOffset,lineJoin:v.borderJoinStyle,lineWidth:v.borderWidth,strokeStyle:v.borderColor,textAlign:n,pointStyle:i,borderRadius:o&&(r||v.borderRadius),index:g}}):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let a=d=>+i[d];if(Sn(i[e])){const{key:d="value"}=this._parsing;a=g=>+Ch(i[g],d)}let o,r;for(o=e,r=e+t;o<r;++o)n._parsed[o]=a(o)}}_getRotation(){return _l(this.options.rotation-90)}_getCircumference(){return _l(this.options.circumference)}_getRotationExtents(){let e=Da,t=-Da;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,a=n._getRotation(),o=n._getCircumference();e=Math.min(e,a),t=Math.max(t,a+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,n=this._cachedMeta,a=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-o)/2,0),d=Math.min(UO(this.options.cutout,r),1),g=this._getRingWeight(this.index),{circumference:x,rotation:v}=this._getRotationExtents(),{ratioX:k,ratioY:E,offsetX:F,offsetY:O}=DF(v,x,d),N=(i.width-o)/k,$=(i.height-o)/E,X=Math.max(Math.min(N,$)/2,0),K=GE(this.options.radius,X),ie=Math.max(K*d,0),ee=(K-ie)/this._getVisibleDatasetWeightTotal();this.offsetX=F*K,this.offsetY=O*K,n.total=this.calculateTotal(),this.outerRadius=K-ee*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ee*g,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const i=this.options,n=this._cachedMeta,a=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*a/Da)}updateElements(e,t,i,n){const a=n==="reset",o=this.chart,r=o.chartArea,g=o.options.animation,x=(r.left+r.right)/2,v=(r.top+r.bottom)/2,k=a&&g.animateScale,E=k?0:this.innerRadius,F=k?0:this.outerRadius,{sharedOptions:O,includeOptions:N}=this._getSharedOptions(t,n);let $=this._getRotation(),X;for(X=0;X<t;++X)$+=this._circumference(X,a);for(X=t;X<t+i;++X){const K=this._circumference(X,a),ie=e[X],ee={x:x+this.offsetX,y:v+this.offsetY,startAngle:$,endAngle:$+K,circumference:K,outerRadius:F,innerRadius:E};N&&(ee.options=O||this.resolveDataElementOptions(X,ie.active?"active":n)),$+=K,this.updateElement(ie,X,ee,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,n;for(n=0;n<t.length;n++){const a=e._parsed[n];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Da*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],a=ym(t._parsed[e],i.options.locale);return{label:n[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const i=this.chart;let n,a,o,r,d;if(!e){for(n=0,a=i.data.datasets.length;n<a;++n)if(i.isDatasetVisible(n)){o=i.getDatasetMeta(n),e=o.data,r=o.controller;break}}if(!e)return 0;for(n=0,a=e.length;n<a;++n)d=r.resolveDataElementOptions(n),d.borderAlign!=="inner"&&(t=Math.max(t,d.borderWidth||0,d.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const a=this.resolveDataElementOptions(i);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Qi(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class RF extends Rh{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:n=[],_dataset:a}=t,o=this.chart._animationsDisabled;let{start:r,count:d}=QE(t,n,o);this._drawStart=r,this._drawCount=d,JE(t)&&(r=0,d=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=n;const g=this.resolveDatasetElementOptions(e);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:g},e),this.updateElements(n,r,d,e)}updateElements(e,t,i,n){const a=n==="reset",{iScale:o,vScale:r,_stacked:d,_dataset:g}=this._cachedMeta,{sharedOptions:x,includeOptions:v}=this._getSharedOptions(t,n),k=o.axis,E=r.axis,{spanGaps:F,segment:O}=this.options,N=Uf(F)?F:Number.POSITIVE_INFINITY,$=this.chart._animationsDisabled||a||n==="none",X=t+i,K=e.length;let ie=t>0&&this.getParsed(t-1);for(let ee=0;ee<K;++ee){const le=e[ee],te=$?le:{};if(ee<t||ee>=X){te.skip=!0;continue}const he=this.getParsed(ee),de=bn(he[E]),ke=te[k]=o.getPixelForValue(he[k],ee),De=te[E]=a||de?r.getBasePixel():r.getPixelForValue(d?this.applyStack(r,he,d):he[E],ee);te.skip=isNaN(ke)||isNaN(De)||de,te.stop=ee>0&&Math.abs(he[k]-ie[k])>N,O&&(te.parsed=he,te.raw=g.data[ee]),v&&(te.options=x||this.resolveDataElementOptions(ee,le.active?"active":n)),$||this.updateElement(le,ee,te,n),ie=he}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return i;const a=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class xM extends Rh{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map((a,o)=>{const d=e.getDatasetMeta(0).controller.getStyle(o);return{text:a,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:n,lineWidth:d.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],a=ym(t._parsed[e].r,i.options.locale);return{label:n[e]||"",value:a}}parseObjectData(e,t,i,n){return oM.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,n)=>{const a=this.getParsed(n).r;!isNaN(a)&&this.chart.getDataVisibility(n)&&(a<t.min&&(t.min=a),a>t.max&&(t.max=a))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(n/2,0),o=Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0),r=(a-o)/e.getVisibleDatasetCount();this.outerRadius=a-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(e,t,i,n){const a=n==="reset",o=this.chart,d=o.options.animation,g=this._cachedMeta.rScale,x=g.xCenter,v=g.yCenter,k=g.getIndexAngle(0)-.5*Vn;let E=k,F;const O=360/this.countVisibleElements();for(F=0;F<t;++F)E+=this._computeAngle(F,n,O);for(F=t;F<t+i;F++){const N=e[F];let $=E,X=E+this._computeAngle(F,n,O),K=o.getDataVisibility(F)?g.getDistanceFromCenterForValue(this.getParsed(F).r):0;E=X,a&&(d.animateScale&&(K=0),d.animateRotate&&($=X=k));const ie={x,y:v,innerRadius:0,outerRadius:K,startAngle:$,endAngle:X,options:this.resolveDataElementOptions(F,N.active?"active":n)};this.updateElement(N,F,ie,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?_l(this.resolveDataElementOptions(e,t).angle||i):0}}class OF extends rw{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class zF extends Rh{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,n){return oM.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta,i=t.dataset,n=t.data||[],a=t.iScale.getLabels();if(i.points=n,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const r={_loop:!0,_fullLoop:a.length===n.length,options:o};this.updateElement(i,void 0,r,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,i,n){const a=this._cachedMeta.rScale,o=n==="reset";for(let r=t;r<t+i;r++){const d=e[r],g=this.resolveDataElementOptions(r,d.active?"active":n),x=a.getPointPositionForValue(r,this.getParsed(r).r),v=o?a.xCenter:x.x,k=o?a.yCenter:x.y,E={x:v,y:k,angle:x.angle,skip:isNaN(v)||isNaN(k),options:g};this.updateElement(d,r,E,n)}}}class FF extends Rh{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:a}=t,o=this.getParsed(e),r=n.getLabelForValue(o.x),d=a.getLabelForValue(o.y);return{label:i[e]||"",value:"("+r+", "+d+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,n=this.chart._animationsDisabled;let{start:a,count:o}=QE(t,i,n);if(this._drawStart=a,this._drawCount=o,JE(t)&&(a=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:d}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!d._decimated,r.points=i;const g=this.resolveDatasetElementOptions(e);g.segment=this.options.segment,this.updateElement(r,void 0,{animated:!n,options:g},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,a,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,n){const a=n==="reset",{iScale:o,vScale:r,_stacked:d,_dataset:g}=this._cachedMeta,x=this.resolveDataElementOptions(t,n),v=this.getSharedOptions(x),k=this.includeOptions(n,v),E=o.axis,F=r.axis,{spanGaps:O,segment:N}=this.options,$=Uf(O)?O:Number.POSITIVE_INFINITY,X=this.chart._animationsDisabled||a||n==="none";let K=t>0&&this.getParsed(t-1);for(let ie=t;ie<t+i;++ie){const ee=e[ie],le=this.getParsed(ie),te=X?ee:{},he=bn(le[F]),de=te[E]=o.getPixelForValue(le[E],ie),ke=te[F]=a||he?r.getBasePixel():r.getPixelForValue(d?this.applyStack(r,le,d):le[F],ie);te.skip=isNaN(de)||isNaN(ke)||he,te.stop=ie>0&&Math.abs(le[E]-K[E])>$,N&&(te.parsed=le,te.raw=g.data[ie]),k&&(te.options=v||this.resolveDataElementOptions(ie,ee.active?"active":n)),X||this.updateElement(ee,ie,te,n),K=le}this.updateSharedOptions(v,n,x)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let r=0;for(let d=t.length-1;d>=0;--d)r=Math.max(r,t[d].size(this.resolveDataElementOptions(d))/2);return r>0&&r}const i=e.dataset,n=i.options&&i.options.borderWidth||0;if(!t.length)return n;const a=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,a,o)/2}}var BF=Object.freeze({__proto__:null,BarController:PF,BubbleController:LF,DoughnutController:rw,LineController:RF,PieController:OF,PolarAreaController:xM,RadarController:zF,ScatterController:FF});function Au(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class sw{static override(e){Object.assign(sw.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Au()}parse(){return Au()}format(){return Au()}add(){return Au()}diff(){return Au()}startOf(){return Au()}endOf(){return Au()}}var NF={_date:sw};function jF(s,e,t,i){const{controller:n,data:a,_sorted:o}=s,r=n._cachedMeta.iScale,d=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(r&&e===r.axis&&e!=="r"&&o&&a.length){const g=r._reversePixels?iz:Tc;if(i){if(n._sharedOptions){const x=a[0],v=typeof x.getRange=="function"&&x.getRange(e);if(v){const k=g(a,e,t-v),E=g(a,e,t+v);return{lo:k.lo,hi:E.hi}}}}else{const x=g(a,e,t);if(d){const{vScale:v}=n._cachedMeta,{_parsed:k}=s,E=k.slice(0,x.lo+1).reverse().findIndex(O=>!bn(O[v.axis]));x.lo-=Math.max(0,E);const F=k.slice(x.hi).findIndex(O=>!bn(O[v.axis]));x.hi+=Math.max(0,F)}return x}}return{lo:0,hi:a.length-1}}function Cx(s,e,t,i,n){const a=s.getSortedVisibleDatasetMetas(),o=t[e];for(let r=0,d=a.length;r<d;++r){const{index:g,data:x}=a[r],{lo:v,hi:k}=jF(a[r],e,o,n);for(let E=v;E<=k;++E){const F=x[E];F.skip||i(F,g,E)}}}function VF(s){const e=s.indexOf("x")!==-1,t=s.indexOf("y")!==-1;return function(i,n){const a=e?Math.abs(i.x-n.x):0,o=t?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function v1(s,e,t,i,n){const a=[];return!n&&!s.isPointInArea(e)||Cx(s,t,e,function(r,d,g){!n&&!Ec(r,s.chartArea,0)||r.inRange(e.x,e.y,i)&&a.push({element:r,datasetIndex:d,index:g})},!0),a}function HF(s,e,t,i){let n=[];function a(o,r,d){const{startAngle:g,endAngle:x}=o.getProps(["startAngle","endAngle"],i),{angle:v}=XE(o,{x:e.x,y:e.y});sm(v,g,x)&&n.push({element:o,datasetIndex:r,index:d})}return Cx(s,t,e,a),n}function UF(s,e,t,i,n,a){let o=[];const r=VF(t);let d=Number.POSITIVE_INFINITY;function g(x,v,k){const E=x.inRange(e.x,e.y,n);if(i&&!E)return;const F=x.getCenterPoint(n);if(!(!!a||s.isPointInArea(F))&&!E)return;const N=r(e,F);N<d?(o=[{element:x,datasetIndex:v,index:k}],d=N):N===d&&o.push({element:x,datasetIndex:v,index:k})}return Cx(s,t,e,g),o}function b1(s,e,t,i,n,a){return!a&&!s.isPointInArea(e)?[]:t==="r"&&!i?HF(s,e,t,n):UF(s,e,t,i,n,a)}function kC(s,e,t,i,n){const a=[],o=t==="x"?"inXRange":"inYRange";let r=!1;return Cx(s,t,e,(d,g,x)=>{d[o]&&d[o](e[t],n)&&(a.push({element:d,datasetIndex:g,index:x}),r=r||d.inRange(e.x,e.y,n))}),i&&!r?[]:a}var GF={modes:{index(s,e,t,i){const n=Pu(e,s),a=t.axis||"x",o=t.includeInvisible||!1,r=t.intersect?v1(s,n,a,i,o):b1(s,n,a,!1,i,o),d=[];return r.length?(s.getSortedVisibleDatasetMetas().forEach(g=>{const x=r[0].index,v=g.data[x];v&&!v.skip&&d.push({element:v,datasetIndex:g.index,index:x})}),d):[]},dataset(s,e,t,i){const n=Pu(e,s),a=t.axis||"xy",o=t.includeInvisible||!1;let r=t.intersect?v1(s,n,a,i,o):b1(s,n,a,!1,i,o);if(r.length>0){const d=r[0].datasetIndex,g=s.getDatasetMeta(d).data;r=[];for(let x=0;x<g.length;++x)r.push({element:g[x],datasetIndex:d,index:x})}return r},point(s,e,t,i){const n=Pu(e,s),a=t.axis||"xy",o=t.includeInvisible||!1;return v1(s,n,a,i,o)},nearest(s,e,t,i){const n=Pu(e,s),a=t.axis||"xy",o=t.includeInvisible||!1;return b1(s,n,a,t.intersect,i,o)},x(s,e,t,i){const n=Pu(e,s);return kC(s,n,"x",t.intersect,i)},y(s,e,t,i){const n=Pu(e,s);return kC(s,n,"y",t.intersect,i)}}};const yM=["left","top","right","bottom"];function ag(s,e){return s.filter(t=>t.pos===e)}function CC(s,e){return s.filter(t=>yM.indexOf(t.pos)===-1&&t.box.axis===e)}function rg(s,e){return s.sort((t,i)=>{const n=e?i:t,a=e?t:i;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function WF(s){const e=[];let t,i,n,a,o,r;for(t=0,i=(s||[]).length;t<i;++t)n=s[t],{position:a,options:{stack:o,stackWeight:r=1}}=n,e.push({index:t,box:n,pos:a,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&a+o,stackWeight:r});return e}function $F(s){const e={};for(const t of s){const{stack:i,pos:n,stackWeight:a}=t;if(!i||!yM.includes(n))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function XF(s,e){const t=$F(s),{vBoxMaxWidth:i,hBoxMaxHeight:n}=e;let a,o,r;for(a=0,o=s.length;a<o;++a){r=s[a];const{fullSize:d}=r.box,g=t[r.stack],x=g&&r.stackWeight/g.weight;r.horizontal?(r.width=x?x*i:d&&e.availableWidth,r.height=n):(r.width=i,r.height=x?x*n:d&&e.availableHeight)}return t}function YF(s){const e=WF(s),t=rg(e.filter(g=>g.box.fullSize),!0),i=rg(ag(e,"left"),!0),n=rg(ag(e,"right")),a=rg(ag(e,"top"),!0),o=rg(ag(e,"bottom")),r=CC(e,"x"),d=CC(e,"y");return{fullSize:t,leftAndTop:i.concat(a),rightAndBottom:n.concat(d).concat(o).concat(r),chartArea:ag(e,"chartArea"),vertical:i.concat(n).concat(d),horizontal:a.concat(o).concat(r)}}function AC(s,e,t,i){return Math.max(s[t],e[t])+Math.max(s[i],e[i])}function vM(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function qF(s,e,t,i){const{pos:n,box:a}=t,o=s.maxPadding;if(!Sn(n)){t.size&&(s[n]-=t.size);const v=i[t.stack]||{size:0,count:1};v.size=Math.max(v.size,t.horizontal?a.height:a.width),t.size=v.size/v.count,s[n]+=t.size}a.getPadding&&vM(o,a.getPadding());const r=Math.max(0,e.outerWidth-AC(o,s,"left","right")),d=Math.max(0,e.outerHeight-AC(o,s,"top","bottom")),g=r!==s.w,x=d!==s.h;return s.w=r,s.h=d,t.horizontal?{same:g,other:x}:{same:x,other:g}}function ZF(s){const e=s.maxPadding;function t(i){const n=Math.max(e[i]-s[i],0);return s[i]+=n,n}s.y+=t("top"),s.x+=t("left"),t("right"),t("bottom")}function KF(s,e){const t=e.maxPadding;function i(n){const a={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{a[o]=Math.max(e[o],t[o])}),a}return i(s?["left","right"]:["top","bottom"])}function wg(s,e,t,i){const n=[];let a,o,r,d,g,x;for(a=0,o=s.length,g=0;a<o;++a){r=s[a],d=r.box,d.update(r.width||e.w,r.height||e.h,KF(r.horizontal,e));const{same:v,other:k}=qF(e,t,r,i);g|=v&&n.length,x=x||k,d.fullSize||n.push(r)}return g&&wg(n,e,t,i)||x}function Q0(s,e,t,i,n){s.top=t,s.left=e,s.right=e+i,s.bottom=t+n,s.width=i,s.height=n}function TC(s,e,t,i){const n=t.padding;let{x:a,y:o}=e;for(const r of s){const d=r.box,g=i[r.stack]||{placed:0,weight:1},x=r.stackWeight/g.weight||1;if(r.horizontal){const v=e.w*x,k=g.size||d.height;rm(g.start)&&(o=g.start),d.fullSize?Q0(d,n.left,o,t.outerWidth-n.right-n.left,k):Q0(d,e.left+g.placed,o,v,k),g.start=o,g.placed+=v,o=d.bottom}else{const v=e.h*x,k=g.size||d.width;rm(g.start)&&(a=g.start),d.fullSize?Q0(d,a,n.top,k,t.outerHeight-n.bottom-n.top):Q0(d,a,e.top+g.placed,k,v),g.start=a,g.placed+=v,a=d.right}}e.x=a,e.y=o}var Ss={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},s.boxes.push(e)},removeBox(s,e){const t=s.boxes?s.boxes.indexOf(e):-1;t!==-1&&s.boxes.splice(t,1)},configure(s,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(s,e,t,i){if(!s)return;const n=Cs(s.options.layout.padding),a=Math.max(e-n.width,0),o=Math.max(t-n.height,0),r=YF(s.boxes),d=r.vertical,g=r.horizontal;oa(s.boxes,O=>{typeof O.beforeLayout=="function"&&O.beforeLayout()});const x=d.reduce((O,N)=>N.box.options&&N.box.options.display===!1?O:O+1,0)||1,v=Object.freeze({outerWidth:e,outerHeight:t,padding:n,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/x,hBoxMaxHeight:o/2}),k=Object.assign({},n);vM(k,Cs(i));const E=Object.assign({maxPadding:k,w:a,h:o,x:n.left,y:n.top},n),F=XF(d.concat(g),v);wg(r.fullSize,E,v,F),wg(d,E,v,F),wg(g,E,v,F)&&wg(d,E,v,F),ZF(E),TC(r.leftAndTop,E,v,F),E.x+=E.w,E.y+=E.h,TC(r.rightAndBottom,E,v,F),s.chartArea={left:E.left,top:E.top,right:E.left+E.w,bottom:E.top+E.h,height:E.h,width:E.w},oa(r.chartArea,O=>{const N=O.box;Object.assign(N,s.chartArea),N.update(E.w,E.h,{left:0,top:0,right:0,bottom:0})})}};class bM{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}updateConfig(e){}}class QF extends bM{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const w_="$chartjs",JF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},EC=s=>s===null||s==="";function e4(s,e){const t=s.style,i=s.getAttribute("height"),n=s.getAttribute("width");if(s[w_]={initial:{height:i,width:n,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",EC(n)){const a=uC(s,"width");a!==void 0&&(s.width=a)}if(EC(i))if(s.style.height==="")s.height=s.width/(e||2);else{const a=uC(s,"height");a!==void 0&&(s.height=a)}return s}const wM=qz?{passive:!0}:!1;function t4(s,e,t){s&&s.addEventListener(e,t,wM)}function i4(s,e,t){s&&s.canvas&&s.canvas.removeEventListener(e,t,wM)}function n4(s,e){const t=JF[s.type]||s.type,{x:i,y:n}=Pu(s,e);return{type:t,chart:e,native:s,x:i!==void 0?i:null,y:n!==void 0?n:null}}function Z_(s,e){for(const t of s)if(t===e||t.contains(e))return!0}function a4(s,e,t){const i=s.canvas,n=new MutationObserver(a=>{let o=!1;for(const r of a)o=o||Z_(r.addedNodes,i),o=o&&!Z_(r.removedNodes,i);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}function r4(s,e,t){const i=s.canvas,n=new MutationObserver(a=>{let o=!1;for(const r of a)o=o||Z_(r.removedNodes,i),o=o&&!Z_(r.addedNodes,i);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}const lm=new Map;let MC=0;function SM(){const s=window.devicePixelRatio;s!==MC&&(MC=s,lm.forEach((e,t)=>{t.currentDevicePixelRatio!==s&&e()}))}function s4(s,e){lm.size||window.addEventListener("resize",SM),lm.set(s,e)}function o4(s){lm.delete(s),lm.size||window.removeEventListener("resize",SM)}function l4(s,e,t){const i=s.canvas,n=i&&aw(i);if(!n)return;const a=KE((r,d)=>{const g=n.clientWidth;t(r,d),g<n.clientWidth&&t()},window),o=new ResizeObserver(r=>{const d=r[0],g=d.contentRect.width,x=d.contentRect.height;g===0&&x===0||a(g,x)});return o.observe(n),s4(s,a),o}function w1(s,e,t){t&&t.disconnect(),e==="resize"&&o4(s)}function c4(s,e,t){const i=s.canvas,n=KE(a=>{s.ctx!==null&&t(n4(a,s))},s);return t4(i,e,n),n}class h4 extends bM{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(e4(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[w_])return!1;const i=t[w_].initial;["height","width"].forEach(a=>{const o=i[a];bn(o)?t.removeAttribute(a):t.setAttribute(a,o)});const n=i.style||{};return Object.keys(n).forEach(a=>{t.style[a]=n[a]}),t.width=t.width,delete t[w_],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:a4,detach:r4,resize:l4}[t]||c4;n[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];if(!n)return;({attach:w1,detach:w1,resize:w1}[t]||i4)(e,t,n),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,n){return Yz(e,t,i,n)}isAttached(e){const t=e&&aw(e);return!!(t&&t.isConnected)}}function u4(s){return!nw()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?QF:h4}let Rc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Uf(this.x)&&Uf(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const n={};return e.forEach(a=>{n[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),n}};function d4(s,e){const t=s.options.ticks,i=f4(s),n=Math.min(t.maxTicksLimit||i,i),a=t.major.enabled?g4(e):[],o=a.length,r=a[0],d=a[o-1],g=[];if(o>n)return m4(e,g,a,o/n),g;const x=p4(a,e,n);if(o>0){let v,k;const E=o>1?Math.round((d-r)/(o-1)):null;for(J0(e,g,x,bn(E)?0:r-E,r),v=0,k=o-1;v<k;v++)J0(e,g,x,a[v],a[v+1]);return J0(e,g,x,d,bn(E)?e.length:d+E),g}return J0(e,g,x),g}function f4(s){const e=s.options.offset,t=s._tickSize(),i=s._length/t+(e?0:1),n=s._maxLength/t;return Math.floor(Math.min(i,n))}function p4(s,e,t){const i=_4(s),n=e.length/t;if(!i)return Math.max(n,1);const a=KO(i);for(let o=0,r=a.length-1;o<r;o++){const d=a[o];if(d>n)return d}return Math.max(n,1)}function g4(s){const e=[];let t,i;for(t=0,i=s.length;t<i;t++)s[t].major&&e.push(t);return e}function m4(s,e,t,i){let n=0,a=t[0],o;for(i=Math.ceil(i),o=0;o<s.length;o++)o===a&&(e.push(s[o]),n++,a=t[n*i])}function J0(s,e,t,i,n){const a=Qi(i,0),o=Math.min(Qi(n,s.length),s.length);let r=0,d,g,x;for(t=Math.ceil(t),n&&(d=n-i,t=d/Math.floor(d/t)),x=a;x<0;)r++,x=Math.round(a+r*t);for(g=Math.max(a,0);g<o;g++)g===x&&(e.push(s[g]),r++,x=Math.round(a+r*t))}function _4(s){const e=s.length;let t,i;if(e<2)return!1;for(i=s[0],t=1;t<e;++t)if(s[t]-s[t-1]!==i)return!1;return i}const x4=s=>s==="left"?"right":s==="right"?"left":s,IC=(s,e,t)=>e==="top"||e==="left"?s[e]+t:s[e]-t,PC=(s,e)=>Math.min(e||s,s);function LC(s,e){const t=[],i=s.length/e,n=s.length;let a=0;for(;a<n;a+=i)t.push(s[Math.floor(a)]);return t}function y4(s,e,t){const i=s.ticks.length,n=Math.min(e,i-1),a=s._startPixel,o=s._endPixel,r=1e-6;let d=s.getPixelForTick(n),g;if(!(t&&(i===1?g=Math.max(d-a,o-d):e===0?g=(s.getPixelForTick(1)-d)/2:g=(d-s.getPixelForTick(n-1))/2,d+=n<e?g:-g,d<a-r||d>o+r)))return d}function v4(s,e){oa(s,t=>{const i=t.gc,n=i.length/2;let a;if(n>e){for(a=0;a<n;++a)delete t.data[i[a]];i.splice(0,n)}})}function sg(s){return s.drawTicks?s.tickLength:0}function DC(s,e){if(!s.display)return 0;const t=Vr(s.font,e),i=Cs(s.padding);return(Ha(s.text)?s.text.length:1)*t.lineHeight+i.height}function b4(s,e){return Dh(s,{scale:e,type:"scale"})}function w4(s,e,t){return Dh(s,{tick:t,index:e,type:"tick"})}function S4(s,e,t){let i=Kb(s);return(t&&e!=="right"||!t&&e==="right")&&(i=x4(i)),i}function k4(s,e,t,i){const{top:n,left:a,bottom:o,right:r,chart:d}=s,{chartArea:g,scales:x}=d;let v=0,k,E,F;const O=o-n,N=r-a;if(s.isHorizontal()){if(E=xs(i,a,r),Sn(t)){const $=Object.keys(t)[0],X=t[$];F=x[$].getPixelForValue(X)+O-e}else t==="center"?F=(g.bottom+g.top)/2+O-e:F=IC(s,t,e);k=r-a}else{if(Sn(t)){const $=Object.keys(t)[0],X=t[$];E=x[$].getPixelForValue(X)-N+e}else t==="center"?E=(g.left+g.right)/2-N+e:E=IC(s,t,e);F=xs(i,o,n),v=t==="left"?-yr:yr}return{titleX:E,titleY:F,maxWidth:k,rotation:v}}class dd extends Rc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:n}=this;return e=So(e,Number.POSITIVE_INFINITY),t=So(t,Number.NEGATIVE_INFINITY),i=So(i,Number.POSITIVE_INFINITY),n=So(n,Number.NEGATIVE_INFINITY),{min:So(e,i),max:So(t,n),minDefined:rr(e),maxDefined:rr(t)}}getMinMax(e){let{min:t,max:i,minDefined:n,maxDefined:a}=this.getUserBounds(),o;if(n&&a)return{min:t,max:i};const r=this.getMatchingVisibleMetas();for(let d=0,g=r.length;d<g;++d)o=r[d].controller.getMinMax(this,e),n||(t=Math.min(t,o.min)),a||(i=Math.max(i,o.max));return t=a&&t>i?i:t,i=n&&t>i?t:i,{min:So(t,So(i,t)),max:So(i,So(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Aa(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:n,grace:a,ticks:o}=this.options,r=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Az(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=r<this.ticks.length;this._convertTicksToLabels(d?LC(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=d4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Aa(this.options.afterUpdate,[this])}beforeSetDimensions(){Aa(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Aa(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Aa(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Aa(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,n,a;for(i=0,n=e.length;i<n;i++)a=e[i],a.label=Aa(t.callback,[a.value,i,e],this)}afterTickToLabelConversion(){Aa(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Aa(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=PC(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,a=t.maxRotation;let o=n,r,d,g;if(!this._isVisible()||!t.display||n>=a||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const x=this._getLabelSizes(),v=x.widest.width,k=x.highest.height,E=Jr(this.chart.width-v,0,this.maxWidth);r=e.offset?this.maxWidth/i:E/(i-1),v+6>r&&(r=E/(i-(e.offset?.5:1)),d=this.maxHeight-sg(e.grid)-t.padding-DC(e.title,this.chart.options.font),g=Math.sqrt(v*v+k*k),o=qb(Math.min(Math.asin(Jr((x.highest.height+6)/r,-1,1)),Math.asin(Jr(d/g,-1,1))-Math.asin(Jr(k/g,-1,1)))),o=Math.max(n,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){Aa(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Aa(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:n,grid:a}}=this,o=this._isVisible(),r=this.isHorizontal();if(o){const d=DC(n,t.options.font);if(r?(e.width=this.maxWidth,e.height=sg(a)+d):(e.height=this.maxHeight,e.width=sg(a)+d),i.display&&this.ticks.length){const{first:g,last:x,widest:v,highest:k}=this._getLabelSizes(),E=i.padding*2,F=_l(this.labelRotation),O=Math.cos(F),N=Math.sin(F);if(r){const $=i.mirror?0:N*v.width+O*k.height;e.height=Math.min(this.maxHeight,e.height+$+E)}else{const $=i.mirror?0:O*v.width+N*k.height;e.width=Math.min(this.maxWidth,e.width+$+E)}this._calculatePadding(g,x,N,O)}}this._handleMargins(),r?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,n){const{ticks:{align:a,padding:o},position:r}=this.options,d=this.labelRotation!==0,g=r!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let k=0,E=0;d?g?(k=n*e.width,E=i*t.height):(k=i*e.height,E=n*t.width):a==="start"?E=t.width:a==="end"?k=e.width:a!=="inner"&&(k=e.width/2,E=t.width/2),this.paddingLeft=Math.max((k-x+o)*this.width/(this.width-x),0),this.paddingRight=Math.max((E-v+o)*this.width/(this.width-v),0)}else{let x=t.height/2,v=e.height/2;a==="start"?(x=0,v=e.height):a==="end"&&(x=t.height,v=0),this.paddingTop=x+o,this.paddingBottom=v+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Aa(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)bn(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=LC(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:n,_longestTextCache:a}=this,o=[],r=[],d=Math.floor(t/PC(t,i));let g=0,x=0,v,k,E,F,O,N,$,X,K,ie,ee;for(v=0;v<t;v+=d){if(F=e[v].label,O=this._resolveTickFontOptions(v),n.font=N=O.string,$=a[N]=a[N]||{data:{},gc:[]},X=O.lineHeight,K=ie=0,!bn(F)&&!Ha(F))K=Y_(n,$.data,$.gc,K,F),ie=X;else if(Ha(F))for(k=0,E=F.length;k<E;++k)ee=F[k],!bn(ee)&&!Ha(ee)&&(K=Y_(n,$.data,$.gc,K,ee),ie+=X);o.push(K),r.push(ie),g=Math.max(K,g),x=Math.max(ie,x)}v4(a,t);const le=o.indexOf(g),te=r.indexOf(x),he=de=>({width:o[de]||0,height:r[de]||0});return{first:he(0),last:he(t-1),widest:he(le),highest:he(te),widths:o,heights:r}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return tz(this._alignToPixels?Cu(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=w4(this.getContext(),e,i))}return this.$context||(this.$context=b4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=_l(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,r=a?a.widest.width+o:0,d=a?a.highest.height+o:0;return this.isHorizontal()?d*i>r*n?r/i:d/n:d*n<r*i?d/i:r/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,n=this.options,{grid:a,position:o,border:r}=n,d=a.offset,g=this.isHorizontal(),v=this.ticks.length+(d?1:0),k=sg(a),E=[],F=r.setContext(this.getContext()),O=F.display?F.width:0,N=O/2,$=function(at){return Cu(i,at,O)};let X,K,ie,ee,le,te,he,de,ke,De,Ae,$e;if(o==="top")X=$(this.bottom),te=this.bottom-k,de=X-N,De=$(e.top)+N,$e=e.bottom;else if(o==="bottom")X=$(this.top),De=e.top,$e=$(e.bottom)-N,te=X+N,de=this.top+k;else if(o==="left")X=$(this.right),le=this.right-k,he=X-N,ke=$(e.left)+N,Ae=e.right;else if(o==="right")X=$(this.left),ke=e.left,Ae=$(e.right)-N,le=X+N,he=this.left+k;else if(t==="x"){if(o==="center")X=$((e.top+e.bottom)/2+.5);else if(Sn(o)){const at=Object.keys(o)[0],qe=o[at];X=$(this.chart.scales[at].getPixelForValue(qe))}De=e.top,$e=e.bottom,te=X+N,de=te+k}else if(t==="y"){if(o==="center")X=$((e.left+e.right)/2);else if(Sn(o)){const at=Object.keys(o)[0],qe=o[at];X=$(this.chart.scales[at].getPixelForValue(qe))}le=X-N,he=le-k,ke=e.left,Ae=e.right}const et=Qi(n.ticks.maxTicksLimit,v),Ie=Math.max(1,Math.ceil(v/et));for(K=0;K<v;K+=Ie){const at=this.getContext(K),qe=a.setContext(at),kt=r.setContext(at),vt=qe.lineWidth,He=qe.color,Nt=kt.dash||[],Qt=kt.dashOffset,Ai=qe.tickWidth,jt=qe.tickColor,ui=qe.tickBorderDash||[],Ct=qe.tickBorderDashOffset;ie=y4(this,K,d),ie!==void 0&&(ee=Cu(i,ie,vt),g?le=he=ke=Ae=ee:te=de=De=$e=ee,E.push({tx1:le,ty1:te,tx2:he,ty2:de,x1:ke,y1:De,x2:Ae,y2:$e,width:vt,color:He,borderDash:Nt,borderDashOffset:Qt,tickWidth:Ai,tickColor:jt,tickBorderDash:ui,tickBorderDashOffset:Ct}))}return this._ticksLength=v,this._borderValue=X,E}_computeLabelItems(e){const t=this.axis,i=this.options,{position:n,ticks:a}=i,o=this.isHorizontal(),r=this.ticks,{align:d,crossAlign:g,padding:x,mirror:v}=a,k=sg(i.grid),E=k+x,F=v?-x:E,O=-_l(this.labelRotation),N=[];let $,X,K,ie,ee,le,te,he,de,ke,De,Ae,$e="middle";if(n==="top")le=this.bottom-F,te=this._getXAxisLabelAlignment();else if(n==="bottom")le=this.top+F,te=this._getXAxisLabelAlignment();else if(n==="left"){const Ie=this._getYAxisLabelAlignment(k);te=Ie.textAlign,ee=Ie.x}else if(n==="right"){const Ie=this._getYAxisLabelAlignment(k);te=Ie.textAlign,ee=Ie.x}else if(t==="x"){if(n==="center")le=(e.top+e.bottom)/2+E;else if(Sn(n)){const Ie=Object.keys(n)[0],at=n[Ie];le=this.chart.scales[Ie].getPixelForValue(at)+E}te=this._getXAxisLabelAlignment()}else if(t==="y"){if(n==="center")ee=(e.left+e.right)/2-E;else if(Sn(n)){const Ie=Object.keys(n)[0],at=n[Ie];ee=this.chart.scales[Ie].getPixelForValue(at)}te=this._getYAxisLabelAlignment(k).textAlign}t==="y"&&(d==="start"?$e="top":d==="end"&&($e="bottom"));const et=this._getLabelSizes();for($=0,X=r.length;$<X;++$){K=r[$],ie=K.label;const Ie=a.setContext(this.getContext($));he=this.getPixelForTick($)+a.labelOffset,de=this._resolveTickFontOptions($),ke=de.lineHeight,De=Ha(ie)?ie.length:1;const at=De/2,qe=Ie.color,kt=Ie.textStrokeColor,vt=Ie.textStrokeWidth;let He=te;o?(ee=he,te==="inner"&&($===X-1?He=this.options.reverse?"left":"right":$===0?He=this.options.reverse?"right":"left":He="center"),n==="top"?g==="near"||O!==0?Ae=-De*ke+ke/2:g==="center"?Ae=-et.highest.height/2-at*ke+ke:Ae=-et.highest.height+ke/2:g==="near"||O!==0?Ae=ke/2:g==="center"?Ae=et.highest.height/2-at*ke:Ae=et.highest.height-De*ke,v&&(Ae*=-1),O!==0&&!Ie.showLabelBackdrop&&(ee+=ke/2*Math.sin(O))):(le=he,Ae=(1-De)*ke/2);let Nt;if(Ie.showLabelBackdrop){const Qt=Cs(Ie.backdropPadding),Ai=et.heights[$],jt=et.widths[$];let ui=Ae-Qt.top,Ct=0-Qt.left;switch($e){case"middle":ui-=Ai/2;break;case"bottom":ui-=Ai;break}switch(te){case"center":Ct-=jt/2;break;case"right":Ct-=jt;break;case"inner":$===X-1?Ct-=jt:$>0&&(Ct-=jt/2);break}Nt={left:Ct,top:ui,width:jt+Qt.width,height:Ai+Qt.height,color:Ie.backdropColor}}N.push({label:ie,font:de,textOffset:Ae,options:{rotation:O,color:qe,strokeColor:kt,strokeWidth:vt,textAlign:He,textBaseline:$e,translation:[ee,le],backdrop:Nt}})}return N}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-_l(this.labelRotation))return e==="top"?"left":"right";let n="center";return t.align==="start"?n="left":t.align==="end"?n="right":t.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:n,padding:a}}=this.options,o=this._getLabelSizes(),r=e+a,d=o.widest.width;let g,x;return t==="left"?n?(x=this.right+a,i==="near"?g="left":i==="center"?(g="center",x+=d/2):(g="right",x+=d)):(x=this.right-r,i==="near"?g="right":i==="center"?(g="center",x-=d/2):(g="left",x=this.left)):t==="right"?n?(x=this.left+a,i==="near"?g="right":i==="center"?(g="center",x-=d/2):(g="left",x-=d)):(x=this.left+r,i==="near"?g="left":i==="center"?(g="center",x+=d/2):(g="right",x=this.right)):g="right",{textAlign:g,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:a,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,a,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(a=>a.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const r=(d,g,x)=>{!x.width||!x.color||(i.save(),i.lineWidth=x.width,i.strokeStyle=x.color,i.setLineDash(x.borderDash||[]),i.lineDashOffset=x.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(t.display)for(a=0,o=n.length;a<o;++a){const d=n[a];t.drawOnChartArea&&r({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&r({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:n}}=this,a=i.setContext(this.getContext()),o=i.display?a.width:0;if(!o)return;const r=n.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let g,x,v,k;this.isHorizontal()?(g=Cu(e,this.left,o)-o/2,x=Cu(e,this.right,r)+r/2,v=k=d):(v=Cu(e,this.top,o)-o/2,k=Cu(e,this.bottom,r)+r/2,g=x=d),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(g,v),t.lineTo(x,k),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&wx(i,n);const a=this.getLabelItems(e);for(const o of a){const r=o.options,d=o.font,g=o.label,x=o.textOffset;od(i,g,0,x,d,r)}n&&Sx(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:n}}=this;if(!i.display)return;const a=Vr(i.font),o=Cs(i.padding),r=i.align;let d=a.lineHeight/2;t==="bottom"||t==="center"||Sn(t)?(d+=o.bottom,Ha(i.text)&&(d+=a.lineHeight*(i.text.length-1))):d+=o.top;const{titleX:g,titleY:x,maxWidth:v,rotation:k}=k4(this,d,t,r);od(e,i.text,0,0,a,{color:i.color,maxWidth:v,rotation:k,textAlign:S4(r,t,n),textBaseline:"middle",translation:[g,x]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Qi(e.grid&&e.grid.z,-1),n=Qi(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==dd.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let a,o;for(a=0,o=t.length;a<o;++a){const r=t[a];r[i]===this.id&&(!e||r.type===e)&&n.push(r)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Vr(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class e_{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;T4(t)&&(i=this.register(t));const n=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in n||(n[a]=e,C4(e,o,i),this.override&&Ua.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,n=this.scope;i in t&&delete t[i],n&&i in Ua[n]&&(delete Ua[n][i],this.override&&delete sd[i])}}function C4(s,e,t){const i=am(Object.create(null),[t?Ua.get(t):{},Ua.get(e),s.defaults]);Ua.set(e,i),s.defaultRoutes&&A4(e,s.defaultRoutes),s.descriptors&&Ua.describe(e,s.descriptors)}function A4(s,e){Object.keys(e).forEach(t=>{const i=t.split("."),n=i.pop(),a=[s].concat(i).join("."),o=e[t].split("."),r=o.pop(),d=o.join(".");Ua.route(a,n,d,r)})}function T4(s){return"id"in s&&"defaults"in s}class E4{constructor(){this.controllers=new e_(Rh,"datasets",!0),this.elements=new e_(Rc,"elements"),this.plugins=new e_(Object,"plugins"),this.scales=new e_(dd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(n=>{const a=i||this._getRegistryForType(n);i||a.isForType(n)||a===this.plugins&&n.id?this._exec(e,a,n):oa(n,o=>{const r=i||this._getRegistryForType(o);this._exec(e,r,o)})})}_exec(e,t,i){const n=Yb(e);Aa(i["before"+n],[],i),t[e](i),Aa(i["after"+n],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var Vl=new E4;class M4{constructor(){this._init=void 0}notify(e,t,i,n){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const a=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(a,e,t,i);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,n){n=n||{};for(const a of e){const o=a.plugin,r=o[i],d=[t,n,a.options];if(Aa(r,d,o)===!1&&n.cancelable)return!1}return!0}invalidate(){bn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,n=Qi(i.options&&i.options.plugins,{}),a=I4(i);return n===!1&&!t?[]:L4(e,a,n,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(a,o)=>a.filter(r=>!o.some(d=>r.plugin.id===d.plugin.id));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function I4(s){const e={},t=[],i=Object.keys(Vl.plugins.items);for(let a=0;a<i.length;a++)t.push(Vl.getPlugin(i[a]));const n=s.plugins||[];for(let a=0;a<n.length;a++){const o=n[a];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function P4(s,e){return!e&&s===!1?null:s===!0?{}:s}function L4(s,{plugins:e,localIds:t},i,n){const a=[],o=s.getContext();for(const r of e){const d=r.id,g=P4(i[d],n);g!==null&&a.push({plugin:r,options:D4(s.config,{plugin:r,local:t[d]},g,o)})}return a}function D4(s,{plugin:e,local:t},i,n){const a=s.pluginScopeKeys(e),o=s.getOptionScopes(i,a);return t&&e.defaults&&o.push(e.defaults),s.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kv(s,e){const t=Ua.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function R4(s,e){let t=s;return s==="_index_"?t=e:s==="_value_"&&(t=e==="x"?"y":"x"),t}function O4(s,e){return s===e?"_index_":"_value_"}function RC(s){if(s==="x"||s==="y"||s==="r")return s}function z4(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Cv(s,...e){if(RC(s))return s;for(const t of e){const i=t.axis||z4(t.position)||s.length>1&&RC(s[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function OC(s,e,t){if(t[e+"AxisID"]===s)return{axis:e}}function F4(s,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===s||i.yAxisID===s);if(t.length)return OC(s,"x",t[0])||OC(s,"y",t[0])}return{}}function B4(s,e){const t=sd[s.type]||{scales:{}},i=e.scales||{},n=kv(s.type,e),a=Object.create(null);return Object.keys(i).forEach(o=>{const r=i[o];if(!Sn(r))return console.error(`Invalid scale configuration for scale: ${o}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=Cv(o,r,F4(o,s),Ua.scales[r.type]),g=O4(d,n),x=t.scales||{};a[o]=jg(Object.create(null),[{axis:d},r,x[d],x[g]])}),s.data.datasets.forEach(o=>{const r=o.type||s.type,d=o.indexAxis||kv(r,e),x=(sd[r]||{}).scales||{};Object.keys(x).forEach(v=>{const k=R4(v,d),E=o[k+"AxisID"]||k;a[E]=a[E]||Object.create(null),jg(a[E],[{axis:k},i[E],x[v]])})}),Object.keys(a).forEach(o=>{const r=a[o];jg(r,[Ua.scales[r.type],Ua.scale])}),a}function kM(s){const e=s.options||(s.options={});e.plugins=Qi(e.plugins,{}),e.scales=B4(s,e)}function CM(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function N4(s){return s=s||{},s.data=CM(s.data),kM(s),s}const zC=new Map,AM=new Set;function t_(s,e){let t=zC.get(s);return t||(t=e(),zC.set(s,t),AM.add(t)),t}const og=(s,e,t)=>{const i=Ch(e,t);i!==void 0&&s.add(i)};class j4{constructor(e){this._config=N4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=CM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return t_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return t_(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return t_(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return t_(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return(!n||t)&&(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:n,type:a}=this,o=this._cachedScopes(e,i),r=o.get(t);if(r)return r;const d=new Set;t.forEach(x=>{e&&(d.add(e),x.forEach(v=>og(d,e,v))),x.forEach(v=>og(d,n,v)),x.forEach(v=>og(d,sd[a]||{},v)),x.forEach(v=>og(d,Ua,v)),x.forEach(v=>og(d,wv,v))});const g=Array.from(d);return g.length===0&&g.push(Object.create(null)),AM.has(t)&&o.set(t,g),g}chartOptionScopes(){const{options:e,type:t}=this;return[e,sd[t]||{},Ua.datasets[t]||{},{type:t},Ua,wv]}resolveNamedOptions(e,t,i,n=[""]){const a={$shared:!0},{resolver:o,subPrefixes:r}=FC(this._resolverCache,e,n);let d=o;if(H4(o,t)){a.$shared=!1,i=Ah(i)?i():i;const g=this.createResolver(e,i,r);d=Gf(o,i,g)}for(const g of t)a[g]=d[g];return a}createResolver(e,t,i=[""],n){const{resolver:a}=FC(this._resolverCache,e,i);return Sn(t)?Gf(a,t,void 0,n):a}}function FC(s,e,t){let i=s.get(e);i||(i=new Map,s.set(e,i));const n=t.join();let a=i.get(n);return a||(a={resolver:ew(e,t),subPrefixes:t.filter(r=>!r.toLowerCase().includes("hover"))},i.set(n,a)),a}const V4=s=>Sn(s)&&Object.getOwnPropertyNames(s).some(e=>Ah(s[e]));function H4(s,e){const{isScriptable:t,isIndexable:i}=nM(s);for(const n of e){const a=t(n),o=i(n),r=(o||a)&&s[n];if(a&&(Ah(r)||V4(r))||o&&Ha(r))return!0}return!1}var U4="4.5.1";const G4=["top","bottom","left","right","chartArea"];function BC(s,e){return s==="top"||s==="bottom"||G4.indexOf(s)===-1&&e==="x"}function NC(s,e){return function(t,i){return t[s]===i[s]?t[e]-i[e]:t[s]-i[s]}}function jC(s){const e=s.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Aa(t&&t.onComplete,[s],e)}function W4(s){const e=s.chart,t=e.options.animation;Aa(t&&t.onProgress,[s],e)}function TM(s){return nw()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const S_={},VC=s=>{const e=TM(s);return Object.values(S_).filter(t=>t.canvas===e).pop()};function $4(s,e,t){const i=Object.keys(s);for(const n of i){const a=+n;if(a>=e){const o=s[n];delete s[n],(t>0||a>e)&&(s[a+t]=o)}}}function X4(s,e,t,i){return!t||s.type==="mouseout"?null:i?e:s}class ow{static defaults=Ua;static instances=S_;static overrides=sd;static registry=Vl;static version=U4;static getChart=VC;static register(...e){Vl.add(...e),HC()}static unregister(...e){Vl.remove(...e),HC()}constructor(e,t){const i=this.config=new j4(t),n=TM(e),a=VC(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||u4(n)),this.platform.updateConfig(i);const r=this.platform.acquireContext(n,o.aspectRatio),d=r&&r.canvas,g=d&&d.height,x=d&&d.width;if(this.id=HO(),this.ctx=r,this.canvas=d,this.width=x,this.height=g,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new M4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rz(v=>this.update(v),o.resizeDelay||0),this._dataChanges=[],S_[this.id]=this,!r||!d){console.error("Failed to create chart: can't acquire context from the given item");return}_c.listen(this,"complete",jC),_c.listen(this,"progress",W4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:n,_aspectRatio:a}=this;return bn(e)?t&&a?a:n?i/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return oC(this.canvas,this.ctx),this}stop(){return _c.stop(this),this}resize(e,t){_c.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,n=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,t,a),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,hC(this,r,!0)&&(this.notifyPlugins("resize",{size:o}),Aa(i.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};oa(t,(i,n)=>{i.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,n=Object.keys(i).reduce((o,r)=>(o[r]=!1,o),{});let a=[];t&&(a=a.concat(Object.keys(t).map(o=>{const r=t[o],d=Cv(o,r),g=d==="r",x=d==="x";return{options:r,dposition:g?"chartArea":x?"bottom":"left",dtype:g?"radialLinear":x?"category":"linear"}}))),oa(a,o=>{const r=o.options,d=r.id,g=Cv(d,r),x=Qi(r.type,o.dtype);(r.position===void 0||BC(r.position,g)!==BC(o.dposition))&&(r.position=o.dposition),n[d]=!0;let v=null;if(d in i&&i[d].type===x)v=i[d];else{const k=Vl.getScale(x);v=new k({id:d,type:x,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(r,e)}),oa(n,(o,r)=>{o||delete i[r]}),oa(i,o=>{Ss.configure(this,o,o.options),Ss.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((n,a)=>n.index-a.index),i>t){for(let n=t;n<i;++n)this._destroyDatasetMeta(n);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(NC("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,n)=>{t.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=t.length;i<n;i++){const a=t[i];let o=this.getDatasetMeta(i);const r=a.type||this.config.type;if(o.type&&o.type!==r&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=r,o.indexAxis=a.indexAxis||kv(r,this.options),o.order=a.order||0,o.index=i,o.label=""+a.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const d=Vl.getController(r),{datasetElementType:g,dataElementType:x}=Ua.datasets[r];Object.assign(d,{dataElementType:Vl.getElement(x),datasetElementType:g&&Vl.getElement(g)}),o.controller=new d(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){oa(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let g=0,x=this.data.datasets.length;g<x;g++){const{controller:v}=this.getDatasetMeta(g),k=!n&&a.indexOf(v)===-1;v.buildOrUpdateElements(k),o=Math.max(+v.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),n||oa(a,g=>{g.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(NC("z","_idx"));const{_active:r,_lastEvent:d}=this;d?this._eventHandler(d,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){oa(this.scales,e=>{Ss.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Qk(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:a}of t){const o=i==="_removeElements"?-a:a;$4(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=a=>new Set(e.filter(o=>o[0]===a).map((o,r)=>r+","+o.splice(1).join(","))),n=i(0);for(let a=1;a<t;a++)if(!Qk(n,i(a)))return;return Array.from(n).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ss.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],oa(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,a)=>{n._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Ah(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(_c.has(this)?this.attached&&!_c.running(this)&&_c.start(this):(this.draw(),jC({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,a;for(n=0,a=t.length;n<a;++n){const o=t[n];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},n=pM(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&wx(t,n),e.controller.draw(),n&&Sx(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Ec(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,n){const a=GF.modes[t];return typeof a=="function"?a(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter(a=>a&&a._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Dh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const n=i?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,n);rm(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(a,{visible:i}),this.update(r=>r.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),_c.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),oC(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete S_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(a,o)=>{t.addEventListener(this,a,o),e[a]=o},n=(a,o,r)=>{a.offsetX=o,a.offsetY=r,this._eventHandler(a)};oa(this.options.events,a=>i(a,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(d,g)=>{t.addEventListener(this,d,g),e[d]=g},n=(d,g)=>{e[d]&&(t.removeEventListener(this,d,g),delete e[d])},a=(d,g)=>{this.canvas&&this.resize(d,g)};let o;const r=()=>{n("attach",r),this.attached=!0,this.resize(),i("resize",a),i("detach",o)};o=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),i("attach",r)},t.isAttached(this.canvas)?r():o()}unbindEvents(){oa(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},oa(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let a,o,r,d;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),r=0,d=e.length;r<d;++r){o=e[r];const g=o&&this.getDatasetMeta(o.datasetIndex).controller;g&&g[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:a,index:o})=>{const r=this.getDatasetMeta(a);if(!r)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:r.data[o],index:o}});!W_(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const n=this.options.hover,a=(d,g)=>d.filter(x=>!g.some(v=>x.datasetIndex===v.datasetIndex&&x.index===v.index)),o=a(t,e),r=i?e:a(e,t);o.length&&this.updateHoverStyle(o,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(a||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:n=[],options:a}=this,o=t,r=this._getActiveElements(e,n,i,o),d=YO(e),g=X4(e,this._lastEvent,i,d);i&&(this._lastEvent=null,Aa(a.onHover,[e,r,this],this),d&&Aa(a.onClick,[e,r,this],this));const x=!W_(r,n);return(x||t)&&(this._active=r,this._updateHoverStyles(r,n,t)),this._lastEvent=g,x}_getActiveElements(e,t,i,n){if(e.type==="mouseout")return[];if(!i)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}}function HC(){return oa(ow.instances,s=>s._plugins.invalidate())}function Y4(s,e,t){const{startAngle:i,x:n,y:a,outerRadius:o,innerRadius:r,options:d}=e,{borderWidth:g,borderJoinStyle:x}=d,v=Math.min(g/o,vs(i-t));if(s.beginPath(),s.arc(n,a,o-g/2,i+v/2,t-v/2),r>0){const k=Math.min(g/r,vs(i-t));s.arc(n,a,r+g/2,t-k/2,i+k/2,!0)}else{const k=Math.min(g/2,o*vs(i-t));if(x==="round")s.arc(n,a,k,t-Vn/2,i+Vn/2,!0);else if(x==="bevel"){const E=2*k*k,F=-E*Math.cos(t+Vn/2)+n,O=-E*Math.sin(t+Vn/2)+a,N=E*Math.cos(i+Vn/2)+n,$=E*Math.sin(i+Vn/2)+a;s.lineTo(F,O),s.lineTo(N,$)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function q4(s,e,t){const{startAngle:i,pixelMargin:n,x:a,y:o,outerRadius:r,innerRadius:d}=e;let g=n/r;s.beginPath(),s.arc(a,o,r,i-g,t+g),d>n?(g=n/d,s.arc(a,o,d,t+g,i-g,!0)):s.arc(a,o,n,t+yr,i-yr),s.closePath(),s.clip()}function Z4(s){return Jb(s,["outerStart","outerEnd","innerStart","innerEnd"])}function K4(s,e,t,i){const n=Z4(s.options.borderRadius),a=(t-e)/2,o=Math.min(a,i*e/2),r=d=>{const g=(t-Math.min(a,d))*i/2;return Jr(d,0,Math.min(a,g))};return{outerStart:r(n.outerStart),outerEnd:r(n.outerEnd),innerStart:Jr(n.innerStart,0,o),innerEnd:Jr(n.innerEnd,0,o)}}function xf(s,e,t,i){return{x:t+s*Math.cos(e),y:i+s*Math.sin(e)}}function K_(s,e,t,i,n,a){const{x:o,y:r,startAngle:d,pixelMargin:g,innerRadius:x}=e,v=Math.max(e.outerRadius+i+t-g,0),k=x>0?x+i+t+g:0;let E=0;const F=n-d;if(i){const Ie=x>0?x-i:0,at=v>0?v-i:0,qe=(Ie+at)/2,kt=qe!==0?F*qe/(qe+i):F;E=(F-kt)/2}const O=Math.max(.001,F*v-t/Vn)/v,N=(F-O)/2,$=d+N+E,X=n-N-E,{outerStart:K,outerEnd:ie,innerStart:ee,innerEnd:le}=K4(e,k,v,X-$),te=v-K,he=v-ie,de=$+K/te,ke=X-ie/he,De=k+ee,Ae=k+le,$e=$+ee/De,et=X-le/Ae;if(s.beginPath(),a){const Ie=(de+ke)/2;if(s.arc(o,r,v,de,Ie),s.arc(o,r,v,Ie,ke),ie>0){const vt=xf(he,ke,o,r);s.arc(vt.x,vt.y,ie,ke,X+yr)}const at=xf(Ae,X,o,r);if(s.lineTo(at.x,at.y),le>0){const vt=xf(Ae,et,o,r);s.arc(vt.x,vt.y,le,X+yr,et+Math.PI)}const qe=(X-le/k+($+ee/k))/2;if(s.arc(o,r,k,X-le/k,qe,!0),s.arc(o,r,k,qe,$+ee/k,!0),ee>0){const vt=xf(De,$e,o,r);s.arc(vt.x,vt.y,ee,$e+Math.PI,$-yr)}const kt=xf(te,$,o,r);if(s.lineTo(kt.x,kt.y),K>0){const vt=xf(te,de,o,r);s.arc(vt.x,vt.y,K,$-yr,de)}}else{s.moveTo(o,r);const Ie=Math.cos(de)*v+o,at=Math.sin(de)*v+r;s.lineTo(Ie,at);const qe=Math.cos(ke)*v+o,kt=Math.sin(ke)*v+r;s.lineTo(qe,kt)}s.closePath()}function Q4(s,e,t,i,n){const{fullCircles:a,startAngle:o,circumference:r}=e;let d=e.endAngle;if(a){K_(s,e,t,i,d,n);for(let g=0;g<a;++g)s.fill();isNaN(r)||(d=o+(r%Da||Da))}return K_(s,e,t,i,d,n),s.fill(),d}function J4(s,e,t,i,n){const{fullCircles:a,startAngle:o,circumference:r,options:d}=e,{borderWidth:g,borderJoinStyle:x,borderDash:v,borderDashOffset:k,borderRadius:E}=d,F=d.borderAlign==="inner";if(!g)return;s.setLineDash(v||[]),s.lineDashOffset=k,F?(s.lineWidth=g*2,s.lineJoin=x||"round"):(s.lineWidth=g,s.lineJoin=x||"bevel");let O=e.endAngle;if(a){K_(s,e,t,i,O,n);for(let N=0;N<a;++N)s.stroke();isNaN(r)||(O=o+(r%Da||Da))}F&&q4(s,e,O),d.selfJoin&&O-o>=Vn&&E===0&&x!=="miter"&&Y4(s,e,O),a||(K_(s,e,t,i,O,n),s.stroke())}class e5 extends Rc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.getProps(["x","y"],i),{angle:a,distance:o}=XE(n,{x:e,y:t}),{startAngle:r,endAngle:d,innerRadius:g,outerRadius:x,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),k=(this.options.spacing+this.options.borderWidth)/2,E=Qi(v,d-r),F=sm(a,r,d)&&r!==d,O=E>=Da||F,N=Ac(o,g+k,x+k);return O&&N}getCenterPoint(e){const{x:t,y:i,startAngle:n,endAngle:a,innerRadius:o,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:g}=this.options,x=(n+a)/2,v=(o+r+g+d)/2;return{x:t+Math.cos(x)*v,y:i+Math.sin(x)*v}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,n=(t.offset||0)/4,a=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Da?Math.floor(i/Da):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const r=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(r)*n,Math.sin(r)*n);const d=1-Math.sin(Math.min(Vn,i||0)),g=n*d;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,Q4(e,this,g,a,o),J4(e,this,g,a,o),e.restore()}}function EM(s,e,t=e){s.lineCap=Qi(t.borderCapStyle,e.borderCapStyle),s.setLineDash(Qi(t.borderDash,e.borderDash)),s.lineDashOffset=Qi(t.borderDashOffset,e.borderDashOffset),s.lineJoin=Qi(t.borderJoinStyle,e.borderJoinStyle),s.lineWidth=Qi(t.borderWidth,e.borderWidth),s.strokeStyle=Qi(t.borderColor,e.borderColor)}function t5(s,e,t){s.lineTo(t.x,t.y)}function i5(s){return s.stepped?_z:s.tension||s.cubicInterpolationMode==="monotone"?xz:t5}function MM(s,e,t={}){const i=s.length,{start:n=0,end:a=i-1}=t,{start:o,end:r}=e,d=Math.max(n,o),g=Math.min(a,r),x=n<o&&a<o||n>r&&a>r;return{count:i,start:d,loop:e.loop,ilen:g<d&&!x?i+g-d:g-d}}function n5(s,e,t,i){const{points:n,options:a}=e,{count:o,start:r,loop:d,ilen:g}=MM(n,t,i),x=i5(a);let{move:v=!0,reverse:k}=i||{},E,F,O;for(E=0;E<=g;++E)F=n[(r+(k?g-E:E))%o],!F.skip&&(v?(s.moveTo(F.x,F.y),v=!1):x(s,O,F,k,a.stepped),O=F);return d&&(F=n[(r+(k?g:0))%o],x(s,O,F,k,a.stepped)),!!d}function a5(s,e,t,i){const n=e.points,{count:a,start:o,ilen:r}=MM(n,t,i),{move:d=!0,reverse:g}=i||{};let x=0,v=0,k,E,F,O,N,$;const X=ie=>(o+(g?r-ie:ie))%a,K=()=>{O!==N&&(s.lineTo(x,N),s.lineTo(x,O),s.lineTo(x,$))};for(d&&(E=n[X(0)],s.moveTo(E.x,E.y)),k=0;k<=r;++k){if(E=n[X(k)],E.skip)continue;const ie=E.x,ee=E.y,le=ie|0;le===F?(ee<O?O=ee:ee>N&&(N=ee),x=(v*x+ie)/++v):(K(),s.lineTo(ie,ee),F=le,v=0,O=N=ee),$=ee}K()}function Av(s){const e=s.options,t=e.borderDash&&e.borderDash.length;return!s._decimated&&!s._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?a5:n5}function r5(s){return s.stepped?Zz:s.tension||s.cubicInterpolationMode==="monotone"?Kz:Lu}function s5(s,e,t,i){let n=e._path;n||(n=e._path=new Path2D,e.path(n,t,i)&&n.closePath()),EM(s,e.options),s.stroke(n)}function o5(s,e,t,i){const{segments:n,options:a}=e,o=Av(e);for(const r of n)EM(s,a,r.style),s.beginPath(),o(s,e,r,{start:t,end:t+i-1})&&s.closePath(),s.stroke()}const l5=typeof Path2D=="function";function c5(s,e,t,i){l5&&!e.options.segment?s5(s,e,t,i):o5(s,e,t,i)}class Ax extends Rc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;Hz(this._points,i,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=nF(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,n=e[t],a=this.points,o=fM(this,{property:t,start:n,end:n});if(!o.length)return;const r=[],d=r5(i);let g,x;for(g=0,x=o.length;g<x;++g){const{start:v,end:k}=o[g],E=a[v],F=a[k];if(E===F){r.push(E);continue}const O=Math.abs((n-E[t])/(F[t]-E[t])),N=d(E,F,O,i.stepped);N[t]=e[t],r.push(N)}return r.length===1?r[0]:r}pathSegment(e,t,i){return Av(this)(e,this,t,i)}path(e,t,i){const n=this.segments,a=Av(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const r of n)o&=a(e,this,r,{start:t,end:t+i-1});return!!o}draw(e,t,i,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),c5(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function UC(s,e,t,i){const n=s.options,{[t]:a}=s.getProps([t],i);return Math.abs(e-a)<n.radius+n.hitRadius}class h5 extends Rc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(e-a,2)+Math.pow(t-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return UC(this,e,"x",t)}inYRange(e,t){return UC(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!Ec(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Sv(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function IM(s,e){const{x:t,y:i,base:n,width:a,height:o}=s.getProps(["x","y","base","width","height"],e);let r,d,g,x,v;return s.horizontal?(v=o/2,r=Math.min(t,n),d=Math.max(t,n),g=i-v,x=i+v):(v=a/2,r=t-v,d=t+v,g=Math.min(i,n),x=Math.max(i,n)),{left:r,top:g,right:d,bottom:x}}function gh(s,e,t,i){return s?0:Jr(e,t,i)}function u5(s,e,t){const i=s.options.borderWidth,n=s.borderSkipped,a=iM(i);return{t:gh(n.top,a.top,0,t),r:gh(n.right,a.right,0,e),b:gh(n.bottom,a.bottom,0,t),l:gh(n.left,a.left,0,e)}}function d5(s,e,t){const{enableBorderRadius:i}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,a=Zu(n),o=Math.min(e,t),r=s.borderSkipped,d=i||Sn(n);return{topLeft:gh(!d||r.top||r.left,a.topLeft,0,o),topRight:gh(!d||r.top||r.right,a.topRight,0,o),bottomLeft:gh(!d||r.bottom||r.left,a.bottomLeft,0,o),bottomRight:gh(!d||r.bottom||r.right,a.bottomRight,0,o)}}function f5(s){const e=IM(s),t=e.right-e.left,i=e.bottom-e.top,n=u5(s,t/2,i/2),a=d5(s,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:a},inner:{x:e.left+n.l,y:e.top+n.t,w:t-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,a.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(n.b,n.r))}}}}function S1(s,e,t,i){const n=e===null,a=t===null,r=s&&!(n&&a)&&IM(s,i);return r&&(n||Ac(e,r.left,r.right))&&(a||Ac(t,r.top,r.bottom))}function p5(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function g5(s,e){s.rect(e.x,e.y,e.w,e.h)}function k1(s,e,t={}){const i=s.x!==t.x?-e:0,n=s.y!==t.y?-e:0,a=(s.x+s.w!==t.x+t.w?e:0)-i,o=(s.y+s.h!==t.y+t.h?e:0)-n;return{x:s.x+i,y:s.y+n,w:s.w+a,h:s.h+o,radius:s.radius}}class m5 extends Rc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:n}}=this,{inner:a,outer:o}=f5(this),r=p5(o.radius)?om:g5;e.save(),(o.w!==a.w||o.h!==a.h)&&(e.beginPath(),r(e,k1(o,t,a)),e.clip(),r(e,k1(a,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),r(e,k1(a,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,i){return S1(this,e,t,i)}inXRange(e,t){return S1(this,e,null,t)}inYRange(e,t){return S1(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+n)/2:t,y:a?i:(i+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var _5=Object.freeze({__proto__:null,ArcElement:e5,BarElement:m5,LineElement:Ax,PointElement:h5});const Tv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],GC=Tv.map(s=>s.replace("rgb(","rgba(").replace(")",", 0.5)"));function PM(s){return Tv[s%Tv.length]}function LM(s){return GC[s%GC.length]}function x5(s,e){return s.borderColor=PM(e),s.backgroundColor=LM(e),++e}function y5(s,e){return s.backgroundColor=s.data.map(()=>PM(e++)),e}function v5(s,e){return s.backgroundColor=s.data.map(()=>LM(e++)),e}function b5(s){let e=0;return(t,i)=>{const n=s.getDatasetMeta(i).controller;n instanceof rw?e=y5(t,e):n instanceof xM?e=v5(t,e):n&&(e=x5(t,e))}}function WC(s){let e;for(e in s)if(s[e].borderColor||s[e].backgroundColor)return!0;return!1}function w5(s){return s&&(s.borderColor||s.backgroundColor)}function S5(){return Ua.borderColor!=="rgba(0,0,0,0.1)"||Ua.backgroundColor!=="rgba(0,0,0,0.1)"}var k5={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(s,e,t){if(!t.enabled)return;const{data:{datasets:i},options:n}=s.config,{elements:a}=n,o=WC(i)||w5(n)||a&&WC(a)||S5();if(!t.forceOverride&&o)return;const r=b5(s);i.forEach(r)}};function C5(s,e,t,i,n){const a=n.samples||i;if(a>=t)return s.slice(e,e+t);const o=[],r=(t-2)/(a-2);let d=0;const g=e+t-1;let x=e,v,k,E,F,O;for(o[d++]=s[x],v=0;v<a-2;v++){let N=0,$=0,X;const K=Math.floor((v+1)*r)+1+e,ie=Math.min(Math.floor((v+2)*r)+1,t)+e,ee=ie-K;for(X=K;X<ie;X++)N+=s[X].x,$+=s[X].y;N/=ee,$/=ee;const le=Math.floor(v*r)+1+e,te=Math.min(Math.floor((v+1)*r)+1,t)+e,{x:he,y:de}=s[x];for(E=F=-1,X=le;X<te;X++)F=.5*Math.abs((he-N)*(s[X].y-de)-(he-s[X].x)*($-de)),F>E&&(E=F,k=s[X],O=X);o[d++]=k,x=O}return o[d++]=s[g],o}function A5(s,e,t,i){let n=0,a=0,o,r,d,g,x,v,k,E,F,O;const N=[],$=e+t-1,X=s[e].x,ie=s[$].x-X;for(o=e;o<e+t;++o){r=s[o],d=(r.x-X)/ie*i,g=r.y;const ee=d|0;if(ee===x)g<F?(F=g,v=o):g>O&&(O=g,k=o),n=(a*n+r.x)/++a;else{const le=o-1;if(!bn(v)&&!bn(k)){const te=Math.min(v,k),he=Math.max(v,k);te!==E&&te!==le&&N.push({...s[te],x:n}),he!==E&&he!==le&&N.push({...s[he],x:n})}o>0&&le!==E&&N.push(s[le]),N.push(r),x=ee,a=0,F=O=g,v=k=E=o}}return N}function DM(s){if(s._decimated){const e=s._data;delete s._decimated,delete s._data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function $C(s){s.data.datasets.forEach(e=>{DM(e)})}function T5(s,e){const t=e.length;let i=0,n;const{iScale:a}=s,{min:o,max:r,minDefined:d,maxDefined:g}=a.getUserBounds();return d&&(i=Jr(Tc(e,a.axis,o).lo,0,t-1)),g?n=Jr(Tc(e,a.axis,r).hi+1,i,t)-i:n=t-i,{start:i,count:n}}var E5={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(s,e,t)=>{if(!t.enabled){$C(s);return}const i=s.width;s.data.datasets.forEach((n,a)=>{const{_data:o,indexAxis:r}=n,d=s.getDatasetMeta(a),g=o||n.data;if(bg([r,s.options.indexAxis])==="y"||!d.controller.supportsDecimation)return;const x=s.scales[d.xAxisID];if(x.type!=="linear"&&x.type!=="time"||s.options.parsing)return;let{start:v,count:k}=T5(d,g);const E=t.threshold||4*i;if(k<=E){DM(n);return}bn(o)&&(n._data=g,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(O){this._data=O}}));let F;switch(t.algorithm){case"lttb":F=C5(g,v,k,i,t);break;case"min-max":F=A5(g,v,k,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}n._decimated=F})},destroy(s){$C(s)}};function M5(s,e,t){const i=s.segments,n=s.points,a=e.points,o=[];for(const r of i){let{start:d,end:g}=r;g=Tx(d,g,n);const x=Ev(t,n[d],n[g],r.loop);if(!e.segments){o.push({source:r,target:x,start:n[d],end:n[g]});continue}const v=fM(e,x);for(const k of v){const E=Ev(t,a[k.start],a[k.end],k.loop),F=dM(r,n,E);for(const O of F)o.push({source:O,target:k,start:{[t]:XC(x,E,"start",Math.max)},end:{[t]:XC(x,E,"end",Math.min)}})}}return o}function Ev(s,e,t,i){if(i)return;let n=e[s],a=t[s];return s==="angle"&&(n=vs(n),a=vs(a)),{property:s,start:n,end:a}}function I5(s,e){const{x:t=null,y:i=null}=s||{},n=e.points,a=[];return e.segments.forEach(({start:o,end:r})=>{r=Tx(o,r,n);const d=n[o],g=n[r];i!==null?(a.push({x:d.x,y:i}),a.push({x:g.x,y:i})):t!==null&&(a.push({x:t,y:d.y}),a.push({x:t,y:g.y}))}),a}function Tx(s,e,t){for(;e>s;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function XC(s,e,t,i){return s&&e?i(s[t],e[t]):s?s[t]:e?e[t]:0}function RM(s,e){let t=[],i=!1;return Ha(s)?(i=!0,t=s):t=I5(s,e),t.length?new Ax({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function YC(s){return s&&s.fill!==!1}function P5(s,e,t){let n=s[e].fill;const a=[e];let o;if(!t)return n;for(;n!==!1&&a.indexOf(n)===-1;){if(!rr(n))return n;if(o=s[n],!o)return!1;if(o.visible)return n;a.push(n),n=o.fill}return!1}function L5(s,e,t){const i=z5(s);if(Sn(i))return isNaN(i.value)?!1:i;let n=parseFloat(i);return rr(n)&&Math.floor(n)===n?D5(i[0],e,n,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function D5(s,e,t,i){return(s==="-"||s==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function R5(s,e){let t=null;return s==="start"?t=e.bottom:s==="end"?t=e.top:Sn(s)?t=e.getPixelForValue(s.value):e.getBasePixel&&(t=e.getBasePixel()),t}function O5(s,e,t){let i;return s==="start"?i=t:s==="end"?i=e.options.reverse?e.min:e.max:Sn(s)?i=s.value:i=e.getBaseValue(),i}function z5(s){const e=s.options,t=e.fill;let i=Qi(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function F5(s){const{scale:e,index:t,line:i}=s,n=[],a=i.segments,o=i.points,r=B5(e,t);r.push(RM({x:null,y:e.bottom},i));for(let d=0;d<a.length;d++){const g=a[d];for(let x=g.start;x<=g.end;x++)N5(n,o[x],r)}return new Ax({points:n,options:{}})}function B5(s,e){const t=[],i=s.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const a=i[n];if(a.index===e)break;a.hidden||t.unshift(a.dataset)}return t}function N5(s,e,t){const i=[];for(let n=0;n<t.length;n++){const a=t[n],{first:o,last:r,point:d}=j5(a,e,"x");if(!(!d||o&&r)){if(o)i.unshift(d);else if(s.push(d),!r)break}}s.push(...i)}function j5(s,e,t){const i=s.interpolate(e,t);if(!i)return{};const n=i[t],a=s.segments,o=s.points;let r=!1,d=!1;for(let g=0;g<a.length;g++){const x=a[g],v=o[x.start][t],k=o[x.end][t];if(Ac(n,v,k)){r=n===v,d=n===k;break}}return{first:r,last:d,point:i}}class OM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:n,y:a,radius:o}=this;return t=t||{start:0,end:Da},e.arc(n,a,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:n}=this,a=e.angle;return{x:t+Math.cos(a)*n,y:i+Math.sin(a)*n,angle:a}}}function V5(s){const{chart:e,fill:t,line:i}=s;if(rr(t))return H5(e,t);if(t==="stack")return F5(s);if(t==="shape")return!0;const n=U5(s);return n instanceof OM?n:RM(n,i)}function H5(s,e){const t=s.getDatasetMeta(e);return t&&s.isDatasetVisible(e)?t.dataset:null}function U5(s){return(s.scale||{}).getPointPositionForValue?W5(s):G5(s)}function G5(s){const{scale:e={},fill:t}=s,i=R5(t,e);if(rr(i)){const n=e.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}function W5(s){const{scale:e,fill:t}=s,i=e.options,n=e.getLabels().length,a=i.reverse?e.max:e.min,o=O5(t,e,a),r=[];if(i.grid.circular){const d=e.getPointPositionForValue(0,a);return new OM({x:d.x,y:d.y,radius:e.getDistanceFromCenterForValue(o)})}for(let d=0;d<n;++d)r.push(e.getPointPositionForValue(d,o));return r}function C1(s,e,t){const i=V5(e),{chart:n,index:a,line:o,scale:r,axis:d}=e,g=o.options,x=g.fill,v=g.backgroundColor,{above:k=v,below:E=v}=x||{},F=n.getDatasetMeta(a),O=pM(n,F);i&&o.points.length&&(wx(s,t),$5(s,{line:o,target:i,above:k,below:E,area:t,scale:r,axis:d,clip:O}),Sx(s))}function $5(s,e){const{line:t,target:i,above:n,below:a,area:o,scale:r,clip:d}=e,g=t._loop?"angle":e.axis;s.save();let x=a;a!==n&&(g==="x"?(qC(s,i,o.top),A1(s,{line:t,target:i,color:n,scale:r,property:g,clip:d}),s.restore(),s.save(),qC(s,i,o.bottom)):g==="y"&&(ZC(s,i,o.left),A1(s,{line:t,target:i,color:a,scale:r,property:g,clip:d}),s.restore(),s.save(),ZC(s,i,o.right),x=n)),A1(s,{line:t,target:i,color:x,scale:r,property:g,clip:d}),s.restore()}function qC(s,e,t){const{segments:i,points:n}=e;let a=!0,o=!1;s.beginPath();for(const r of i){const{start:d,end:g}=r,x=n[d],v=n[Tx(d,g,n)];a?(s.moveTo(x.x,x.y),a=!1):(s.lineTo(x.x,t),s.lineTo(x.x,x.y)),o=!!e.pathSegment(s,r,{move:o}),o?s.closePath():s.lineTo(v.x,t)}s.lineTo(e.first().x,t),s.closePath(),s.clip()}function ZC(s,e,t){const{segments:i,points:n}=e;let a=!0,o=!1;s.beginPath();for(const r of i){const{start:d,end:g}=r,x=n[d],v=n[Tx(d,g,n)];a?(s.moveTo(x.x,x.y),a=!1):(s.lineTo(t,x.y),s.lineTo(x.x,x.y)),o=!!e.pathSegment(s,r,{move:o}),o?s.closePath():s.lineTo(t,v.y)}s.lineTo(t,e.first().y),s.closePath(),s.clip()}function A1(s,e){const{line:t,target:i,property:n,color:a,scale:o,clip:r}=e,d=M5(t,i,n);for(const{source:g,target:x,start:v,end:k}of d){const{style:{backgroundColor:E=a}={}}=g,F=i!==!0;s.save(),s.fillStyle=E,X5(s,o,r,F&&Ev(n,v,k)),s.beginPath();const O=!!t.pathSegment(s,g);let N;if(F){O?s.closePath():KC(s,i,k,n);const $=!!i.pathSegment(s,x,{move:O,reverse:!0});N=O&&$,N||KC(s,i,v,n)}s.closePath(),s.fill(N?"evenodd":"nonzero"),s.restore()}}function X5(s,e,t,i){const n=e.chart.chartArea,{property:a,start:o,end:r}=i||{};if(a==="x"||a==="y"){let d,g,x,v;a==="x"?(d=o,g=n.top,x=r,v=n.bottom):(d=n.left,g=o,x=n.right,v=r),s.beginPath(),t&&(d=Math.max(d,t.left),x=Math.min(x,t.right),g=Math.max(g,t.top),v=Math.min(v,t.bottom)),s.rect(d,g,x-d,v-g),s.clip()}}function KC(s,e,t,i){const n=e.interpolate(t,i);n&&s.lineTo(n.x,n.y)}var Y5={id:"filler",afterDatasetsUpdate(s,e,t){const i=(s.data.datasets||[]).length,n=[];let a,o,r,d;for(o=0;o<i;++o)a=s.getDatasetMeta(o),r=a.dataset,d=null,r&&r.options&&r instanceof Ax&&(d={visible:s.isDatasetVisible(o),index:o,fill:L5(r,o,i),chart:s,axis:a.controller.options.indexAxis,scale:a.vScale,line:r}),a.$filler=d,n.push(d);for(o=0;o<i;++o)d=n[o],!(!d||d.fill===!1)&&(d.fill=P5(n,o,t.propagate))},beforeDraw(s,e,t){const i=t.drawTime==="beforeDraw",n=s.getSortedVisibleDatasetMetas(),a=s.chartArea;for(let o=n.length-1;o>=0;--o){const r=n[o].$filler;r&&(r.line.updateControlPoints(a,r.axis),i&&r.fill&&C1(s.ctx,r,a))}},beforeDatasetsDraw(s,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=s.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const a=i[n].$filler;YC(a)&&C1(s.ctx,a,s.chartArea)}},beforeDatasetDraw(s,e,t){const i=e.meta.$filler;!YC(i)||t.drawTime!=="beforeDatasetDraw"||C1(s.ctx,i,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const QC=(s,e)=>{let{boxHeight:t=e,boxWidth:i=e}=s;return s.usePointStyle&&(t=Math.min(t,e),i=s.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},q5=(s,e)=>s!==null&&e!==null&&s.datasetIndex===e.datasetIndex&&s.index===e.index;class JC extends Rc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Aa(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,n)=>e.sort(i,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,n=Vr(i.font),a=n.size,o=this._computeTitleHeight(),{boxWidth:r,itemHeight:d}=QC(i,a);let g,x;t.font=n.string,this.isHorizontal()?(g=this.maxWidth,x=this._fitRows(o,a,r,d)+10):(x=this.maxHeight,g=this._fitCols(o,n,r,d)+10),this.width=Math.min(g,e.maxWidth||this.maxWidth),this.height=Math.min(x,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,n){const{ctx:a,maxWidth:o,options:{labels:{padding:r}}}=this,d=this.legendHitBoxes=[],g=this.lineWidths=[0],x=n+r;let v=e;a.textAlign="left",a.textBaseline="middle";let k=-1,E=-x;return this.legendItems.forEach((F,O)=>{const N=i+t/2+a.measureText(F.text).width;(O===0||g[g.length-1]+N+2*r>o)&&(v+=x,g[g.length-(O>0?0:1)]=0,E+=x,k++),d[O]={left:0,top:E,row:k,width:N,height:n},g[g.length-1]+=N+r}),v}_fitCols(e,t,i,n){const{ctx:a,maxHeight:o,options:{labels:{padding:r}}}=this,d=this.legendHitBoxes=[],g=this.columnSizes=[],x=o-e;let v=r,k=0,E=0,F=0,O=0;return this.legendItems.forEach((N,$)=>{const{itemWidth:X,itemHeight:K}=Z5(i,t,a,N,n);$>0&&E+K+2*r>x&&(v+=k+r,g.push({width:k,height:E}),F+=k+r,O++,k=E=0),d[$]={left:F,top:E,col:O,width:X,height:K},k=Math.max(k,X),E+=K+r}),v+=k,g.push({width:k,height:E}),v}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:n},rtl:a}}=this,o=Rf(a,this.left,this.width);if(this.isHorizontal()){let r=0,d=xs(i,this.left+n,this.right-this.lineWidths[r]);for(const g of t)r!==g.row&&(r=g.row,d=xs(i,this.left+n,this.right-this.lineWidths[r])),g.top+=this.top+e+n,g.left=o.leftForLtr(o.x(d),g.width),d+=g.width+n}else{let r=0,d=xs(i,this.top+e+n,this.bottom-this.columnSizes[r].height);for(const g of t)g.col!==r&&(r=g.col,d=xs(i,this.top+e+n,this.bottom-this.columnSizes[r].height)),g.top=d,g.left+=this.left+n,g.left=o.leftForLtr(o.x(g.left),g.width),d+=g.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;wx(e,this),this._draw(),Sx(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:n}=this,{align:a,labels:o}=e,r=Ua.color,d=Rf(e.rtl,this.left,this.width),g=Vr(o.font),{padding:x}=o,v=g.size,k=v/2;let E;this.drawTitle(),n.textAlign=d.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=g.string;const{boxWidth:F,boxHeight:O,itemHeight:N}=QC(o,v),$=function(le,te,he){if(isNaN(F)||F<=0||isNaN(O)||O<0)return;n.save();const de=Qi(he.lineWidth,1);if(n.fillStyle=Qi(he.fillStyle,r),n.lineCap=Qi(he.lineCap,"butt"),n.lineDashOffset=Qi(he.lineDashOffset,0),n.lineJoin=Qi(he.lineJoin,"miter"),n.lineWidth=de,n.strokeStyle=Qi(he.strokeStyle,r),n.setLineDash(Qi(he.lineDash,[])),o.usePointStyle){const ke={radius:O*Math.SQRT2/2,pointStyle:he.pointStyle,rotation:he.rotation,borderWidth:de},De=d.xPlus(le,F/2),Ae=te+k;tM(n,ke,De,Ae,o.pointStyleWidth&&F)}else{const ke=te+Math.max((v-O)/2,0),De=d.leftForLtr(le,F),Ae=Zu(he.borderRadius);n.beginPath(),Object.values(Ae).some($e=>$e!==0)?om(n,{x:De,y:ke,w:F,h:O,radius:Ae}):n.rect(De,ke,F,O),n.fill(),de!==0&&n.stroke()}n.restore()},X=function(le,te,he){od(n,he.text,le,te+N/2,g,{strikethrough:he.hidden,textAlign:d.textAlign(he.textAlign)})},K=this.isHorizontal(),ie=this._computeTitleHeight();K?E={x:xs(a,this.left+x,this.right-i[0]),y:this.top+x+ie,line:0}:E={x:this.left+x,y:xs(a,this.top+ie+x,this.bottom-t[0].height),line:0},cM(this.ctx,e.textDirection);const ee=N+x;this.legendItems.forEach((le,te)=>{n.strokeStyle=le.fontColor,n.fillStyle=le.fontColor;const he=n.measureText(le.text).width,de=d.textAlign(le.textAlign||(le.textAlign=o.textAlign)),ke=F+k+he;let De=E.x,Ae=E.y;d.setWidth(this.width),K?te>0&&De+ke+x>this.right&&(Ae=E.y+=ee,E.line++,De=E.x=xs(a,this.left+x,this.right-i[E.line])):te>0&&Ae+ee>this.bottom&&(De=E.x=De+t[E.line].width+x,E.line++,Ae=E.y=xs(a,this.top+ie+x,this.bottom-t[E.line].height));const $e=d.x(De);if($($e,Ae,le),De=sz(de,De+F+k,K?De+ke:this.right,e.rtl),X(d.x(De),Ae,le),K)E.x+=ke+x;else if(typeof le.text!="string"){const et=g.lineHeight;E.y+=zM(le,et)+x}else E.y+=ee}),hM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Vr(t.font),n=Cs(t.padding);if(!t.display)return;const a=Rf(e.rtl,this.left,this.width),o=this.ctx,r=t.position,d=i.size/2,g=n.top+d;let x,v=this.left,k=this.width;if(this.isHorizontal())k=Math.max(...this.lineWidths),x=this.top+g,v=xs(e.align,v,this.right-k);else{const F=this.columnSizes.reduce((O,N)=>Math.max(O,N.height),0);x=g+xs(e.align,this.top,this.bottom-F-e.labels.padding-this._computeTitleHeight())}const E=xs(r,v,v+k);o.textAlign=a.textAlign(Kb(r)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,od(o,t.text,E,x,i)}_computeTitleHeight(){const e=this.options.title,t=Vr(e.font),i=Cs(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,n,a;if(Ac(e,this.left,this.right)&&Ac(t,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(n=a[i],Ac(e,n.left,n.left+n.width)&&Ac(t,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!J5(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,a=q5(n,i);n&&!a&&Aa(t.onLeave,[e,n,this],this),this._hoveredItem=i,i&&!a&&Aa(t.onHover,[e,i,this],this)}else i&&Aa(t.onClick,[e,i,this],this)}}function Z5(s,e,t,i,n){const a=K5(i,s,e,t),o=Q5(n,i,e.lineHeight);return{itemWidth:a,itemHeight:o}}function K5(s,e,t,i){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((a,o)=>a.length>o.length?a:o)),e+t.size/2+i.measureText(n).width}function Q5(s,e,t){let i=s;return typeof e.text!="string"&&(i=zM(e,t)),i}function zM(s,e){const t=s.text?s.text.length:0;return e*t}function J5(s,e){return!!((s==="mousemove"||s==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(s==="click"||s==="mouseup"))}var eB={id:"legend",_element:JC,start(s,e,t){const i=s.legend=new JC({ctx:s.ctx,options:t,chart:s});Ss.configure(s,i,t),Ss.addBox(s,i)},stop(s){Ss.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,e,t){const i=s.legend;Ss.configure(s,i,t),i.options=t},afterUpdate(s){const e=s.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(s,e){e.replay||s.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,e,t){const i=e.datasetIndex,n=t.chart;n.isDatasetVisible(i)?(n.hide(i),e.hidden=!0):(n.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const e=s.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:n,color:a,useBorderRadius:o,borderRadius:r}}=s.legend.options;return s._getSortedDatasetMetas().map(d=>{const g=d.controller.getStyle(t?0:void 0),x=Cs(g.borderWidth);return{text:e[d.index].label,fillStyle:g.backgroundColor,fontColor:a,hidden:!d.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:n||g.textAlign,borderRadius:o&&(r||g.borderRadius),datasetIndex:d.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class lw extends Rc{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const n=Ha(i.text)?i.text.length:1;this._padding=Cs(i.padding);const a=n*Vr(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:n,right:a,options:o}=this,r=o.align;let d=0,g,x,v;return this.isHorizontal()?(x=xs(r,i,a),v=t+e,g=a-i):(o.position==="left"?(x=i+e,v=xs(r,n,t),d=Vn*-.5):(x=a-e,v=xs(r,t,n),d=Vn*.5),g=n-t),{titleX:x,titleY:v,maxWidth:g,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Vr(t.font),a=i.lineHeight/2+this._padding.top,{titleX:o,titleY:r,maxWidth:d,rotation:g}=this._drawArgs(a);od(e,t.text,0,0,i,{color:t.color,maxWidth:d,rotation:g,textAlign:Kb(t.align),textBaseline:"middle",translation:[o,r]})}}function tB(s,e){const t=new lw({ctx:s.ctx,options:e,chart:s});Ss.configure(s,t,e),Ss.addBox(s,t),s.titleBlock=t}var iB={id:"title",_element:lw,start(s,e,t){tB(s,t)},stop(s){const e=s.titleBlock;Ss.removeBox(s,e),delete s.titleBlock},beforeUpdate(s,e,t){const i=s.titleBlock;Ss.configure(s,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const i_=new WeakMap;var nB={id:"subtitle",start(s,e,t){const i=new lw({ctx:s.ctx,options:t,chart:s});Ss.configure(s,i,t),Ss.addBox(s,i),i_.set(s,i)},stop(s){Ss.removeBox(s,i_.get(s)),i_.delete(s)},beforeUpdate(s,e,t){const i=i_.get(s);Ss.configure(s,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Sg={average(s){if(!s.length)return!1;let e,t,i=new Set,n=0,a=0;for(e=0,t=s.length;e<t;++e){const r=s[e].element;if(r&&r.hasValue()){const d=r.tooltipPosition();i.add(d.x),n+=d.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((r,d)=>r+d)/i.size,y:n/a}},nearest(s,e){if(!s.length)return!1;let t=e.x,i=e.y,n=Number.POSITIVE_INFINITY,a,o,r;for(a=0,o=s.length;a<o;++a){const d=s[a].element;if(d&&d.hasValue()){const g=d.getCenterPoint(),x=bv(e,g);x<n&&(n=x,r=d)}}if(r){const d=r.tooltipPosition();t=d.x,i=d.y}return{x:t,y:i}}};function jl(s,e){return e&&(Ha(e)?Array.prototype.push.apply(s,e):s.push(e)),s}function xc(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function aB(s,e){const{element:t,datasetIndex:i,index:n}=e,a=s.getDatasetMeta(i).controller,{label:o,value:r}=a.getLabelAndValue(n);return{chart:s,label:o,parsed:a.getParsed(n),raw:s.data.datasets[i].data[n],formattedValue:r,dataset:a.getDataset(),dataIndex:n,datasetIndex:i,element:t}}function eA(s,e){const t=s.chart.ctx,{body:i,footer:n,title:a}=s,{boxWidth:o,boxHeight:r}=e,d=Vr(e.bodyFont),g=Vr(e.titleFont),x=Vr(e.footerFont),v=a.length,k=n.length,E=i.length,F=Cs(e.padding);let O=F.height,N=0,$=i.reduce((ie,ee)=>ie+ee.before.length+ee.lines.length+ee.after.length,0);if($+=s.beforeBody.length+s.afterBody.length,v&&(O+=v*g.lineHeight+(v-1)*e.titleSpacing+e.titleMarginBottom),$){const ie=e.displayColors?Math.max(r,d.lineHeight):d.lineHeight;O+=E*ie+($-E)*d.lineHeight+($-1)*e.bodySpacing}k&&(O+=e.footerMarginTop+k*x.lineHeight+(k-1)*e.footerSpacing);let X=0;const K=function(ie){N=Math.max(N,t.measureText(ie).width+X)};return t.save(),t.font=g.string,oa(s.title,K),t.font=d.string,oa(s.beforeBody.concat(s.afterBody),K),X=e.displayColors?o+2+e.boxPadding:0,oa(i,ie=>{oa(ie.before,K),oa(ie.lines,K),oa(ie.after,K)}),X=0,t.font=x.string,oa(s.footer,K),t.restore(),N+=F.width,{width:N,height:O}}function rB(s,e){const{y:t,height:i}=e;return t<i/2?"top":t>s.height-i/2?"bottom":"center"}function sB(s,e,t,i){const{x:n,width:a}=i,o=t.caretSize+t.caretPadding;if(s==="left"&&n+a+o>e.width||s==="right"&&n-a-o<0)return!0}function oB(s,e,t,i){const{x:n,width:a}=t,{width:o,chartArea:{left:r,right:d}}=s;let g="center";return i==="center"?g=n<=(r+d)/2?"left":"right":n<=a/2?g="left":n>=o-a/2&&(g="right"),sB(g,s,e,t)&&(g="center"),g}function tA(s,e,t){const i=t.yAlign||e.yAlign||rB(s,t);return{xAlign:t.xAlign||e.xAlign||oB(s,e,t,i),yAlign:i}}function lB(s,e){let{x:t,width:i}=s;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function cB(s,e,t){let{y:i,height:n}=s;return e==="top"?i+=t:e==="bottom"?i-=n+t:i-=n/2,i}function iA(s,e,t,i){const{caretSize:n,caretPadding:a,cornerRadius:o}=s,{xAlign:r,yAlign:d}=t,g=n+a,{topLeft:x,topRight:v,bottomLeft:k,bottomRight:E}=Zu(o);let F=lB(e,r);const O=cB(e,d,g);return d==="center"?r==="left"?F+=g:r==="right"&&(F-=g):r==="left"?F-=Math.max(x,k)+n:r==="right"&&(F+=Math.max(v,E)+n),{x:Jr(F,0,i.width-e.width),y:Jr(O,0,i.height-e.height)}}function n_(s,e,t){const i=Cs(t.padding);return e==="center"?s.x+s.width/2:e==="right"?s.x+s.width-i.right:s.x+i.left}function nA(s){return jl([],xc(s))}function hB(s,e,t){return Dh(s,{tooltip:e,tooltipItems:t,type:"tooltip"})}function aA(s,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?s.override(t):s}const FM={beforeTitle:mc,title(s){if(s.length>0){const e=s[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:mc,beforeBody:mc,beforeLabel:mc,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let e=s.dataset.label||"";e&&(e+=": ");const t=s.formattedValue;return bn(t)||(e+=t),e},labelColor(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:mc,afterBody:mc,beforeFooter:mc,footer:mc,afterFooter:mc};function Js(s,e,t,i){const n=s[e].call(t,i);return typeof n>"u"?FM[e].call(t,i):n}class rA extends Rc{static positioners=Sg;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,a=new gM(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=hB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,n=Js(i,"beforeTitle",this,e),a=Js(i,"title",this,e),o=Js(i,"afterTitle",this,e);let r=[];return r=jl(r,xc(n)),r=jl(r,xc(a)),r=jl(r,xc(o)),r}getBeforeBody(e,t){return nA(Js(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,n=[];return oa(e,a=>{const o={before:[],lines:[],after:[]},r=aA(i,a);jl(o.before,xc(Js(r,"beforeLabel",this,a))),jl(o.lines,Js(r,"label",this,a)),jl(o.after,xc(Js(r,"afterLabel",this,a))),n.push(o)}),n}getAfterBody(e,t){return nA(Js(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,n=Js(i,"beforeFooter",this,e),a=Js(i,"footer",this,e),o=Js(i,"afterFooter",this,e);let r=[];return r=jl(r,xc(n)),r=jl(r,xc(a)),r=jl(r,xc(o)),r}_createItems(e){const t=this._active,i=this.chart.data,n=[],a=[],o=[];let r=[],d,g;for(d=0,g=t.length;d<g;++d)r.push(aB(this.chart,t[d]));return e.filter&&(r=r.filter((x,v,k)=>e.filter(x,v,k,i))),e.itemSort&&(r=r.sort((x,v)=>e.itemSort(x,v,i))),oa(r,x=>{const v=aA(e.callbacks,x);n.push(Js(v,"labelColor",this,x)),a.push(Js(v,"labelPointStyle",this,x)),o.push(Js(v,"labelTextColor",this,x))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=r,r}update(e,t){const i=this.options.setContext(this.getContext()),n=this._active;let a,o=[];if(!n.length)this.opacity!==0&&(a={opacity:0});else{const r=Sg[i.position].call(this,n,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const d=this._size=eA(this,i),g=Object.assign({},r,d),x=tA(this.chart,i,g),v=iA(i,g,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,a={opacity:1,x:v.x,y:v.y,width:d.width,height:d.height,caretX:r.x,caretY:r.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,n){const a=this.getCaretPosition(e,i,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,i){const{xAlign:n,yAlign:a}=this,{caretSize:o,cornerRadius:r}=i,{topLeft:d,topRight:g,bottomLeft:x,bottomRight:v}=Zu(r),{x:k,y:E}=e,{width:F,height:O}=t;let N,$,X,K,ie,ee;return a==="center"?(ie=E+O/2,n==="left"?(N=k,$=N-o,K=ie+o,ee=ie-o):(N=k+F,$=N+o,K=ie-o,ee=ie+o),X=N):(n==="left"?$=k+Math.max(d,x)+o:n==="right"?$=k+F-Math.max(g,v)-o:$=this.caretX,a==="top"?(K=E,ie=K-o,N=$-o,X=$+o):(K=E+O,ie=K+o,N=$+o,X=$-o),ee=K),{x1:N,x2:$,x3:X,y1:K,y2:ie,y3:ee}}drawTitle(e,t,i){const n=this.title,a=n.length;let o,r,d;if(a){const g=Rf(i.rtl,this.x,this.width);for(e.x=n_(this,i.titleAlign,i),t.textAlign=g.textAlign(i.titleAlign),t.textBaseline="middle",o=Vr(i.titleFont),r=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,d=0;d<a;++d)t.fillText(n[d],g.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r,d+1===a&&(e.y+=i.titleMarginBottom-r)}}_drawColorBox(e,t,i,n,a){const o=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:d,boxWidth:g}=a,x=Vr(a.bodyFont),v=n_(this,"left",a),k=n.x(v),E=d<x.lineHeight?(x.lineHeight-d)/2:0,F=t.y+E;if(a.usePointStyle){const O={radius:Math.min(g,d)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},N=n.leftForLtr(k,g)+g/2,$=F+d/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Sv(e,O,N,$),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Sv(e,O,N,$)}else{e.lineWidth=Sn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const O=n.leftForLtr(k,g),N=n.leftForLtr(n.xPlus(k,1),g-2),$=Zu(o.borderRadius);Object.values($).some(X=>X!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,om(e,{x:O,y:F,w:g,h:d,radius:$}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),om(e,{x:N,y:F+1,w:g-2,h:d-2,radius:$}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(O,F,g,d),e.strokeRect(O,F,g,d),e.fillStyle=o.backgroundColor,e.fillRect(N,F+1,g-2,d-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:n}=this,{bodySpacing:a,bodyAlign:o,displayColors:r,boxHeight:d,boxWidth:g,boxPadding:x}=i,v=Vr(i.bodyFont);let k=v.lineHeight,E=0;const F=Rf(i.rtl,this.x,this.width),O=function(he){t.fillText(he,F.x(e.x+E),e.y+k/2),e.y+=k+a},N=F.textAlign(o);let $,X,K,ie,ee,le,te;for(t.textAlign=o,t.textBaseline="middle",t.font=v.string,e.x=n_(this,N,i),t.fillStyle=i.bodyColor,oa(this.beforeBody,O),E=r&&N!=="right"?o==="center"?g/2+x:g+2+x:0,ie=0,le=n.length;ie<le;++ie){for($=n[ie],X=this.labelTextColors[ie],t.fillStyle=X,oa($.before,O),K=$.lines,r&&K.length&&(this._drawColorBox(t,e,ie,F,i),k=Math.max(v.lineHeight,d)),ee=0,te=K.length;ee<te;++ee)O(K[ee]),k=v.lineHeight;oa($.after,O)}E=0,k=v.lineHeight,oa(this.afterBody,O),e.y-=a}drawFooter(e,t,i){const n=this.footer,a=n.length;let o,r;if(a){const d=Rf(i.rtl,this.x,this.width);for(e.x=n_(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=d.textAlign(i.footerAlign),t.textBaseline="middle",o=Vr(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,r=0;r<a;++r)t.fillText(n[r],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,n){const{xAlign:a,yAlign:o}=this,{x:r,y:d}=e,{width:g,height:x}=i,{topLeft:v,topRight:k,bottomLeft:E,bottomRight:F}=Zu(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(r+v,d),o==="top"&&this.drawCaret(e,t,i,n),t.lineTo(r+g-k,d),t.quadraticCurveTo(r+g,d,r+g,d+k),o==="center"&&a==="right"&&this.drawCaret(e,t,i,n),t.lineTo(r+g,d+x-F),t.quadraticCurveTo(r+g,d+x,r+g-F,d+x),o==="bottom"&&this.drawCaret(e,t,i,n),t.lineTo(r+E,d+x),t.quadraticCurveTo(r,d+x,r,d+x-E),o==="center"&&a==="left"&&this.drawCaret(e,t,i,n),t.lineTo(r,d+v),t.quadraticCurveTo(r,d,r+v,d),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,n=i&&i.x,a=i&&i.y;if(n||a){const o=Sg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const r=this._size=eA(this,e),d=Object.assign({},o,this._size),g=tA(t,e,d),x=iA(e,d,g,t);(n._to!==x.x||a._to!==x.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=r.width,this.height=r.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Cs(t.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&r&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,n,t),cM(e,t.textDirection),a.y+=o.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),hM(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,n=e.map(({datasetIndex:r,index:d})=>{const g=this.chart.getDatasetMeta(r);if(!g)throw new Error("Cannot find a dataset at index "+r);return{datasetIndex:r,element:g.data[d],index:d}}),a=!W_(i,n),o=this._positionChanged(n,t);(a||o)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],o=this._getActiveElements(e,a,t,i),r=this._positionChanged(o,e),d=t||!W_(o,a)||r;return d&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),d}_getActiveElements(e,t,i,n){const a=this.options;if(e.type==="mouseout")return[];if(!n)return t.filter(r=>this.chart.data.datasets[r.datasetIndex]&&this.chart.getDatasetMeta(r.datasetIndex).controller.getParsed(r.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,i);return a.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:n,options:a}=this,o=Sg[a.position].call(this,e,t);return o!==!1&&(i!==o.x||n!==o.y)}}var uB={id:"tooltip",_element:rA,positioners:Sg,afterInit(s,e,t){t&&(s.tooltip=new rA({chart:s,options:t}))},beforeUpdate(s,e,t){s.tooltip&&s.tooltip.initialize(t)},reset(s,e,t){s.tooltip&&s.tooltip.initialize(t)},afterDraw(s){const e=s.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(s.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",t)}},afterEvent(s,e){if(s.tooltip){const t=e.replay;s.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,e)=>e.bodyFont.size,boxWidth:(s,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:FM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},dB=Object.freeze({__proto__:null,Colors:k5,Decimation:E5,Filler:Y5,Legend:eB,SubTitle:nB,Title:iB,Tooltip:uB});const fB=(s,e,t,i)=>(typeof e=="string"?(t=s.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function pB(s,e,t,i){const n=s.indexOf(e);if(n===-1)return fB(s,e,t,i);const a=s.lastIndexOf(e);return n!==a?t:n}const gB=(s,e)=>s===null?null:Jr(Math.round(s),0,e);function sA(s){const e=this.getLabels();return s>=0&&s<e.length?e[s]:s}class mB extends dd{static id="category";static defaults={ticks:{callback:sA}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:n,label:a}of t)i[n]===a&&i.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(bn(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:pB(i,e,Qi(t,e),this._addedLabels),gB(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,n=[];let a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)n.push({value:o});return n}getLabelForValue(e){return sA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function _B(s,e){const t=[],{bounds:n,step:a,min:o,max:r,precision:d,count:g,maxTicks:x,maxDigits:v,includeBounds:k}=s,E=a||1,F=x-1,{min:O,max:N}=e,$=!bn(o),X=!bn(r),K=!bn(g),ie=(N-O)/(v+1);let ee=eC((N-O)/F/E)*E,le,te,he,de;if(ee<1e-14&&!$&&!X)return[{value:O},{value:N}];de=Math.ceil(N/ee)-Math.floor(O/ee),de>F&&(ee=eC(de*ee/F/E)*E),bn(d)||(le=Math.pow(10,d),ee=Math.ceil(ee*le)/le),n==="ticks"?(te=Math.floor(O/ee)*ee,he=Math.ceil(N/ee)*ee):(te=O,he=N),$&&X&&a&&JO((r-o)/a,ee/1e3)?(de=Math.round(Math.min((r-o)/ee,x)),ee=(r-o)/de,te=o,he=r):K?(te=$?o:te,he=X?r:he,de=g-1,ee=(he-te)/de):(de=(he-te)/ee,Vg(de,Math.round(de),ee/1e3)?de=Math.round(de):de=Math.ceil(de));const ke=Math.max(tC(ee),tC(te));le=Math.pow(10,bn(d)?ke:d),te=Math.round(te*le)/le,he=Math.round(he*le)/le;let De=0;for($&&(k&&te!==o?(t.push({value:o}),te<o&&De++,Vg(Math.round((te+De*ee)*le)/le,o,oA(o,ie,s))&&De++):te<o&&De++);De<de;++De){const Ae=Math.round((te+De*ee)*le)/le;if(X&&Ae>r)break;t.push({value:Ae})}return X&&k&&he!==r?t.length&&Vg(t[t.length-1].value,r,oA(r,ie,s))?t[t.length-1].value=r:t.push({value:r}):(!X||he===r)&&t.push({value:he}),t}function oA(s,e,{horizontal:t,minRotation:i}){const n=_l(i),a=(t?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+s).length;return Math.min(e/a,o)}class Q_ extends dd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return bn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:a}=this;const o=d=>n=t?n:d,r=d=>a=i?a:d;if(e){const d=ql(n),g=ql(a);d<0&&g<0?r(0):d>0&&g>0&&o(0)}if(n===a){let d=a===0?1:Math.abs(a*.05);r(a+d),e||o(n-d)}this.min=n,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,o=_B(n,a);return e.bounds==="ticks"&&$E(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-t)/Math.max(e.length-1,1)/2;t-=n,i+=n}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return ym(e,this.chart.options.locale,this.options.ticks.format)}}class xB extends Q_{static id="linear";static defaults={ticks:{callback:bx.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=rr(e)?e:0,this.max=rr(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=_l(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const cm=s=>Math.floor(fh(s)),Tu=(s,e)=>Math.pow(10,cm(s)+e);function lA(s){return s/Math.pow(10,cm(s))===1}function cA(s,e,t){const i=Math.pow(10,t),n=Math.floor(s/i);return Math.ceil(e/i)-n}function yB(s,e){const t=e-s;let i=cm(t);for(;cA(s,e,i)>10;)i++;for(;cA(s,e,i)<10;)i--;return Math.min(i,cm(s))}function vB(s,{min:e,max:t}){e=So(s.min,e);const i=[],n=cm(e);let a=yB(e,t),o=a<0?Math.pow(10,Math.abs(a)):1;const r=Math.pow(10,a),d=n>a?Math.pow(10,n):0,g=Math.round((e-d)*o)/o,x=Math.floor((e-d)/r/10)*r*10;let v=Math.floor((g-x)/Math.pow(10,a)),k=So(s.min,Math.round((d+x+v*Math.pow(10,a))*o)/o);for(;k<t;)i.push({value:k,major:lA(k),significand:v}),v>=10?v=v<15?15:20:v++,v>=20&&(a++,v=2,o=a>=0?1:o),k=Math.round((d+x+v*Math.pow(10,a))*o)/o;const E=So(s.max,k);return i.push({value:E,major:lA(E),significand:v}),i}class bB extends dd{static id="logarithmic";static defaults={ticks:{callback:bx.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Q_.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return rr(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=rr(e)?Math.max(0,e):null,this.max=rr(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!rr(this._userMin)&&(this.min=e===Tu(this.min,0)?Tu(this.min,-1):Tu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,n=this.max;const a=r=>i=e?i:r,o=r=>n=t?n:r;i===n&&(i<=0?(a(1),o(10)):(a(Tu(i,-1)),o(Tu(n,1)))),i<=0&&a(Tu(n,-1)),n<=0&&o(Tu(i,1)),this.min=i,this.max=n}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=vB(t,this);return e.bounds==="ticks"&&$E(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":ym(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=fh(e),this._valueRange=fh(this.max)-fh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(fh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Mv(s){const e=s.ticks;if(e.display&&s.display){const t=Cs(e.backdropPadding);return Qi(e.font&&e.font.size,Ua.font.size)+t.height}return 0}function wB(s,e,t){return t=Ha(t)?t:[t],{w:mz(s,e.string,t),h:t.length*e.lineHeight}}function hA(s,e,t,i,n){return s===i||s===n?{start:e-t/2,end:e+t/2}:s<i||s>n?{start:e-t,end:e}:{start:e,end:e+t}}function SB(s){const e={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},t=Object.assign({},e),i=[],n=[],a=s._pointLabels.length,o=s.options.pointLabels,r=o.centerPointLabels?Vn/a:0;for(let d=0;d<a;d++){const g=o.setContext(s.getPointLabelContext(d));n[d]=g.padding;const x=s.getPointPosition(d,s.drawingArea+n[d],r),v=Vr(g.font),k=wB(s.ctx,v,s._pointLabels[d]);i[d]=k;const E=vs(s.getIndexAngle(d)+r),F=Math.round(qb(E)),O=hA(F,x.x,k.w,0,180),N=hA(F,x.y,k.h,90,270);kB(t,e,E,O,N)}s.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),s._pointLabelItems=TB(s,i,n)}function kB(s,e,t,i,n){const a=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let r=0,d=0;i.start<e.l?(r=(e.l-i.start)/a,s.l=Math.min(s.l,e.l-r)):i.end>e.r&&(r=(i.end-e.r)/a,s.r=Math.max(s.r,e.r+r)),n.start<e.t?(d=(e.t-n.start)/o,s.t=Math.min(s.t,e.t-d)):n.end>e.b&&(d=(n.end-e.b)/o,s.b=Math.max(s.b,e.b+d))}function CB(s,e,t){const i=s.drawingArea,{extra:n,additionalAngle:a,padding:o,size:r}=t,d=s.getPointPosition(e,i+n+o,a),g=Math.round(qb(vs(d.angle+yr))),x=IB(d.y,r.h,g),v=EB(g),k=MB(d.x,r.w,v);return{visible:!0,x:d.x,y:x,textAlign:v,left:k,top:x,right:k+r.w,bottom:x+r.h}}function AB(s,e){if(!e)return!0;const{left:t,top:i,right:n,bottom:a}=s;return!(Ec({x:t,y:i},e)||Ec({x:t,y:a},e)||Ec({x:n,y:i},e)||Ec({x:n,y:a},e))}function TB(s,e,t){const i=[],n=s._pointLabels.length,a=s.options,{centerPointLabels:o,display:r}=a.pointLabels,d={extra:Mv(a)/2,additionalAngle:o?Vn/n:0};let g;for(let x=0;x<n;x++){d.padding=t[x],d.size=e[x];const v=CB(s,x,d);i.push(v),r==="auto"&&(v.visible=AB(v,g),v.visible&&(g=v))}return i}function EB(s){return s===0||s===180?"center":s<180?"left":"right"}function MB(s,e,t){return t==="right"?s-=e:t==="center"&&(s-=e/2),s}function IB(s,e,t){return t===90||t===270?s-=e/2:(t>270||t<90)&&(s-=e),s}function PB(s,e,t){const{left:i,top:n,right:a,bottom:o}=t,{backdropColor:r}=e;if(!bn(r)){const d=Zu(e.borderRadius),g=Cs(e.backdropPadding);s.fillStyle=r;const x=i-g.left,v=n-g.top,k=a-i+g.width,E=o-n+g.height;Object.values(d).some(F=>F!==0)?(s.beginPath(),om(s,{x,y:v,w:k,h:E,radius:d}),s.fill()):s.fillRect(x,v,k,E)}}function LB(s,e){const{ctx:t,options:{pointLabels:i}}=s;for(let n=e-1;n>=0;n--){const a=s._pointLabelItems[n];if(!a.visible)continue;const o=i.setContext(s.getPointLabelContext(n));PB(t,o,a);const r=Vr(o.font),{x:d,y:g,textAlign:x}=a;od(t,s._pointLabels[n],d,g+r.lineHeight/2,r,{color:o.color,textAlign:x,textBaseline:"middle"})}}function BM(s,e,t,i){const{ctx:n}=s;if(t)n.arc(s.xCenter,s.yCenter,e,0,Da);else{let a=s.getPointPosition(0,e);n.moveTo(a.x,a.y);for(let o=1;o<i;o++)a=s.getPointPosition(o,e),n.lineTo(a.x,a.y)}}function DB(s,e,t,i,n){const a=s.ctx,o=e.circular,{color:r,lineWidth:d}=e;!o&&!i||!r||!d||t<0||(a.save(),a.strokeStyle=r,a.lineWidth=d,a.setLineDash(n.dash||[]),a.lineDashOffset=n.dashOffset,a.beginPath(),BM(s,t,o,i),a.closePath(),a.stroke(),a.restore())}function RB(s,e,t){return Dh(s,{label:t,index:e,type:"pointLabel"})}class OB extends Q_{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:bx.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Cs(Mv(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=rr(e)&&!isNaN(e)?e:0,this.max=rr(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Mv(this.options))}generateTickLabels(e){Q_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const n=Aa(this.options.pointLabels.callback,[t,i],this);return n||n===0?n:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?SB(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,n))}getIndexAngle(e){const t=Da/(this._pointLabels.length||1),i=this.options.startAngle||0;return vs(e*t+_l(i))}getDistanceFromCenterForValue(e){if(bn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(bn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return RB(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const n=this.getIndexAngle(e)-yr+i;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:n,bottom:a}=this._pointLabelItems[e];return{left:t,top:i,right:n,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),BM(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:n,border:a}=t,o=this._pointLabels.length;let r,d,g;if(t.pointLabels.display&&LB(this,o),n.display&&this.ticks.forEach((x,v)=>{if(v!==0||v===0&&this.min<0){d=this.getDistanceFromCenterForValue(x.value);const k=this.getContext(v),E=n.setContext(k),F=a.setContext(k);DB(this,E,d,o,F)}}),i.display){for(e.save(),r=o-1;r>=0;r--){const x=i.setContext(this.getPointLabelContext(r)),{color:v,lineWidth:k}=x;!k||!v||(e.lineWidth=k,e.strokeStyle=v,e.setLineDash(x.borderDash),e.lineDashOffset=x.borderDashOffset,d=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),g=this.getPointPosition(r,d),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(g.x,g.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let a,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,d)=>{if(d===0&&this.min>=0&&!t.reverse)return;const g=i.setContext(this.getContext(d)),x=Vr(g.font);if(a=this.getDistanceFromCenterForValue(this.ticks[d].value),g.showLabelBackdrop){e.font=x.string,o=e.measureText(r.label).width,e.fillStyle=g.backdropColor;const v=Cs(g.backdropPadding);e.fillRect(-o/2-v.left,-a-x.size/2-v.top,o+v.width,x.size+v.height)}od(e,r.label,0,-a,x,{color:g.color,strokeColor:g.textStrokeColor,strokeWidth:g.textStrokeWidth})}),e.restore()}drawTitle(){}}const Ex={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},io=Object.keys(Ex);function uA(s,e){return s-e}function dA(s,e){if(bn(e))return null;const t=s._adapter,{parser:i,round:n,isoWeekday:a}=s._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),rr(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(n&&(o=n==="week"&&(Uf(a)||a===!0)?t.startOf(o,"isoWeek",a):t.startOf(o,n)),+o)}function fA(s,e,t,i){const n=io.length;for(let a=io.indexOf(s);a<n-1;++a){const o=Ex[io[a]],r=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(r*o.size))<=i)return io[a]}return io[n-1]}function zB(s,e,t,i,n){for(let a=io.length-1;a>=io.indexOf(t);a--){const o=io[a];if(Ex[o].common&&s._adapter.diff(n,i,o)>=e-1)return o}return io[t?io.indexOf(t):0]}function FB(s){for(let e=io.indexOf(s)+1,t=io.length;e<t;++e)if(Ex[io[e]].common)return io[e]}function pA(s,e,t){if(!t)s[e]=!0;else if(t.length){const{lo:i,hi:n}=Zb(t,e),a=t[i]>=e?t[i]:t[n];s[a]=!0}}function BB(s,e,t,i){const n=s._adapter,a=+n.startOf(e[0].value,i),o=e[e.length-1].value;let r,d;for(r=a;r<=o;r=+n.add(r,1,i))d=t[r],d>=0&&(e[d].major=!0);return e}function gA(s,e,t){const i=[],n={},a=e.length;let o,r;for(o=0;o<a;++o)r=e[o],n[r]=o,i.push({value:r,major:!1});return a===0||!t?i:BB(s,i,n,t)}class Iv extends dd{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),n=this._adapter=new NF._date(e.adapters.date);n.init(t),jg(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:dA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:n,max:a,minDefined:o,maxDefined:r}=this.getUserBounds();function d(g){!o&&!isNaN(g.min)&&(n=Math.min(n,g.min)),!r&&!isNaN(g.max)&&(a=Math.max(a,g.max))}(!o||!r)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),n=rr(n)&&!isNaN(n)?n:+t.startOf(Date.now(),i),a=rr(a)&&!isNaN(a)?a:+t.endOf(Date.now(),i)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,o=this.max,r=nz(n,a,o);return this._unit=t.unit||(i.autoSkip?fA(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):zB(this,r.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:FB(this._unit),this.initOffsets(n),e.reverse&&r.reverse(),gA(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,n,a;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?t=1-n:t=(this.getDecimalForValue(e[1])-n)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?i=a:i=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Jr(t,0,o),i=Jr(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,n=this.options,a=n.time,o=a.unit||fA(a.minUnit,t,i,this._getLabelCapacity(t)),r=Qi(n.ticks.stepSize,1),d=o==="week"?a.isoWeekday:!1,g=Uf(d)||d===!0,x={};let v=t,k,E;if(g&&(v=+e.startOf(v,"isoWeek",d)),v=+e.startOf(v,g?"day":o),e.diff(i,t,o)>1e5*r)throw new Error(t+" and "+i+" are too far apart with stepSize of "+r+" "+o);const F=n.ticks.source==="data"&&this.getDataTimestamps();for(k=v,E=0;k<i;k=+e.add(k,r,o),E++)pA(x,k,F);return(k===i||n.bounds==="ticks"||E===1)&&pA(x,k,F),Object.keys(x).sort(uA).map(O=>+O)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,a=this._unit,o=t||n[a];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,n){const a=this.options,o=a.ticks.callback;if(o)return Aa(o,[e,t,i],this);const r=a.time.displayFormats,d=this._unit,g=this._majorUnit,x=d&&r[d],v=g&&r[g],k=i[t],E=g&&v&&k&&k.major;return this._adapter.format(e,n||(E?v:x))}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,n=_l(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(n),o=Math.sin(n),r=this._resolveTickFontOptions(0).size;return{w:i*a+r*o,h:i*o+r*a}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,a=this._tickFormatFunction(e,0,gA(this,[e],this._majorUnit),n),o=this._getLabelSize(a),r=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return r>0?r:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,i=n.length;t<i;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const n=this.getLabels();for(t=0,i=n.length;t<i;++t)e.push(dA(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return qE(e.sort(uA))}}function a_(s,e,t){let i=0,n=s.length-1,a,o,r,d;t?(e>=s[i].pos&&e<=s[n].pos&&({lo:i,hi:n}=Tc(s,"pos",e)),{pos:a,time:r}=s[i],{pos:o,time:d}=s[n]):(e>=s[i].time&&e<=s[n].time&&({lo:i,hi:n}=Tc(s,"time",e)),{time:a,pos:r}=s[i],{time:o,pos:d}=s[n]);const g=o-a;return g?r+(d-r)*(e-a)/g:r}class NB extends Iv{static id="timeseries";static defaults=Iv.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=a_(t,this.min),this._tableRange=a_(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,n=[],a=[];let o,r,d,g,x;for(o=0,r=e.length;o<r;++o)g=e[o],g>=t&&g<=i&&n.push(g);if(n.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,r=n.length;o<r;++o)x=n[o+1],d=n[o-1],g=n[o],Math.round((x+d)/2)!==g&&a.push({time:g,pos:o/(r-1)});return a}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((n,a)=>n-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(a_(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return a_(this._table,i*this._tableRange+this._minPos,!0)}}var jB=Object.freeze({__proto__:null,CategoryScale:mB,LinearScale:xB,LogarithmicScale:bB,RadialLinearScale:OB,TimeScale:Iv,TimeSeriesScale:NB});const VB=[BF,_5,dB,jB];ow.register(...VB);function Pv(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,i=Array(e);t<e;t++)i[t]=s[t];return i}function NM(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function li(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function mA(s,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,HM(i.key),i)}}function ci(s,e,t){return e&&mA(s.prototype,e),t&&mA(s,t),Object.defineProperty(s,"prototype",{writable:!1}),s}function kg(s,e){var t=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!t){if(Array.isArray(s)||(t=cw(s))||e){t&&(s=t);var i=0,n=function(){};return{s:n,n:function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}},e:function(d){throw d},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,r=!1;return{s:function(){t=t.call(s)},n:function(){var d=t.next();return o=d.done,d},e:function(d){r=!0,a=d},f:function(){try{o||t.return==null||t.return()}finally{if(r)throw a}}}}function vm(s){var e=jM();return function(){var t,i=ex(s);if(e){var n=ex(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return(function(a,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NM(a)})(this,t)}}function J_(s,e,t){return(e=HM(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function ex(s){return ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ex(s)}function bm(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),e&&Lv(s,e)}function jM(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(jM=function(){return!!s})()}function _A(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable}))),t.push.apply(t,i)}return t}function Xt(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_A(Object(t),!0).forEach((function(i){J_(s,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):_A(Object(t)).forEach((function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))}))}return s}function Lv(s,e){return Lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},Lv(s,e)}function VM(s,e){return(function(t){if(Array.isArray(t))return t})(s)||(function(t,i){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,o,r,d,g=[],x=!0,v=!1;try{if(r=(n=n.call(t)).next,i===0){if(Object(n)!==n)return;x=!1}else for(;!(x=(a=r.call(n)).done)&&(g.push(a.value),g.length!==i);x=!0);}catch(k){v=!0,o=k}finally{try{if(!x&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(v)throw o}}return g}})(s,e)||cw(s,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Hr(s){return(function(e){if(Array.isArray(e))return Pv(e)})(s)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(s)||cw(s)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function HM(s){var e=(function(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,i);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)})(s,"string");return typeof e=="symbol"?e:e+""}function js(s){return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},js(s)}function cw(s,e){if(s){if(typeof s=="string")return Pv(s,e);var t={}.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pv(s,e):void 0}}var Je=(function(){function s(){li(this,s)}return ci(s,[{key:"shadeRGBColor",value:function(e,t){var i=t.split(","),n=e<0?0:255,a=e<0?-1*e:e,o=parseInt(i[0].slice(4),10),r=parseInt(i[1],10),d=parseInt(i[2],10);return"rgb("+(Math.round((n-o)*a)+o)+","+(Math.round((n-r)*a)+r)+","+(Math.round((n-d)*a)+d)+")"}},{key:"shadeHexColor",value:function(e,t){var i=parseInt(t.slice(1),16),n=e<0?0:255,a=e<0?-1*e:e,o=i>>16,r=i>>8&255,d=255&i;return"#"+(16777216+65536*(Math.round((n-o)*a)+o)+256*(Math.round((n-r)*a)+r)+(Math.round((n-d)*a)+d)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,t){return s.isColorHex(t)?this.shadeHexColor(e,t):this.shadeRGBColor(e,t)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&js(e)==="object"&&!Array.isArray(e)&&e!=null}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"listToArray",value:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}},{key:"extend",value:function(e,t){var i=this;typeof Object.assign!="function"&&(Object.assign=function(a){if(a==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(a),r=1;r<arguments.length;r++){var d=arguments[r];if(d!=null)for(var g in d)d.hasOwnProperty(g)&&(o[g]=d[g])}return o});var n=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(a){i.isObject(t[a])&&a in e?n[a]=i.extend(e[a],t[a]):Object.assign(n,J_({},a,t[a]))})),n}},{key:"extendArray",value:function(e,t){var i=[];return e.map((function(n){i.push(s.extend(t,n))})),e=i}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e===null||js(e)!=="object")return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){t=[],i.set(e,t);for(var n=0;n<e.length;n++)t[n]=this.clone(e[n],i)}else if(e instanceof Date)t=new Date(e.getTime());else for(var a in t={},i.set(e,t),e)e.hasOwnProperty(a)&&(t[a]=this.clone(e[a],i));return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return typeof e=="number"||e===null?e:parseFloat(e)}},{key:"stripNumber",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(e)?e:parseFloat(e.toPrecision(t))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){return e.toString().includes("e")?Math.round(e):e}},{key:"elementExists",value:function(e){return!(!e||!e.isConnected)}},{key:"isInShadowDOM",value:function(e){if(!e||!e.getRootNode)return!1;var t=e.getRootNode();return t&&t!==document&&s.is("ShadowRoot",t)}},{key:"getShadowRootHost",value:function(e){return s.isInShadowDOM(e)&&e.getRootNode().host||null}},{key:"getDimensions",value:function(e){if(!e)return[0,0];var t,i=e.getRootNode&&e.getRootNode();if(i&&i!==document&&i.host){var n=i.host.getBoundingClientRect();return[n.width,n.height]}try{t=getComputedStyle(e,null)}catch{return[e.clientWidth||0,e.clientHeight||0]}var a=e.clientHeight,o=e.clientWidth;return a-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[o-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),a]}},{key:"getBoundingClientRect",value:function(e){if(!e)return{top:0,right:0,bottom:0,left:0,width:0,height:0,x:0,y:0};var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce((function(t,i){return Array.isArray(i)&&(i=i.reduce((function(n,a){return n.length>a.length?n:a}))),t.length>i.length?t:i}),0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;e.substring(0,1)!=="#"&&(e="#999999");var i=e.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var n=0;n<i.length;n++)i[n]=parseInt(i[n].length===1?i[n]+i[n]:i[n],16);return t!==void 0&&i.push(t),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var i=[],n=2*Math.PI/t,a=0;a<t;a++){var o={};o.x=e*Math.sin(a*n),o.y=-e*Math.cos(a*n),i.push(o)}return i}},{key:"polarToCartesian",value:function(e,t,i,n){var a=(n-90)*Math.PI/180;return{x:e+i*Math.cos(a),y:t+i*Math.sin(a)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",i=e.toString().slice();return i=i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,i){if(i>=e.length)for(var n=i-e.length+1;n--;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style.key=t[i])}},{key:"preciseAddition",value:function(e,t){var i=(String(e).split(".")[1]||"").length,n=(String(t).split(".")[1]||"").length,a=Math.pow(10,Math.max(i,n));return(Math.round(e*a)+Math.round(t*a))/a}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isMsEdge",value:function(){var e=window.navigator.userAgent,t=e.indexOf("Edge/");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}},{key:"getGCD",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,n=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));for(n>1?(e=Math.round(Math.abs(e)*n),t=Math.round(Math.abs(t)*n)):n=1;t;){var a=t;t=e%t,e=a}return e/n}},{key:"getPrimeFactors",value:function(e){for(var t=[],i=2;e>=2;)e%i==0?(t.push(i),e/=i):i++;return t}},{key:"mod",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,n=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));return(e=Math.round(Math.abs(e)*n))%(t=Math.round(Math.abs(t)*n))/n}}]),s})(),Zf=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"animateLine",value:function(e,t,i,n){e.attr(t).animate(n).attr(i)}},{key:"animateMarker",value:function(e,t,i,n){e.attr({opacity:0}).animate(t).attr({opacity:1}).after((function(){n()}))}},{key:"animateRect",value:function(e,t,i,n,a){e.attr(t).animate(n).attr(i).after((function(){return a()}))}},{key:"animatePathsGradually",value:function(e){var t=e.el,i=e.realIndex,n=e.j,a=e.fill,o=e.pathFrom,r=e.pathTo,d=e.speed,g=e.delay,x=this.w,v=0;x.config.chart.animations.animateGradually.enabled&&(v=x.config.chart.animations.animateGradually.delay),x.config.chart.animations.dynamicAnimation.enabled&&x.globals.dataChanged&&x.config.chart.type!=="bar"&&(v=0),this.morphSVG(t,i,n,x.config.chart.type!=="line"||x.globals.comboCharts?a:"stroke",o,r,d,g*v)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(e){var t=e.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")}))}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),typeof t.config.chart.events.animationEnd=="function"&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,i,n,a,o,r,d){var g=this,x=this.w;a||(a=e.attr("pathFrom")),o||(o=e.attr("pathTo"));var v=function(k){return x.config.chart.type==="radar"&&(r=1),"M 0 ".concat(x.globals.gridHeight)};(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=v()),(!o.trim()||o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=v()),x.globals.shouldAnimate||(r=1),e.plot(a).animate(1,d).plot(a).animate(r,d).plot(o).after((function(){Je.isNumber(i)?i===x.globals.series[x.globals.maxValsInArrayIndex].length-2&&x.globals.shouldAnimate&&g.animationCompleted(e):n!=="none"&&x.globals.shouldAnimate&&(!x.globals.comboCharts&&t===x.globals.series.length-1||x.globals.comboCharts)&&g.animationCompleted(e),g.showDelayedElements()}))}}]),s})();const Dv={},UM=[];function ln(s,e){if(Array.isArray(s))for(const t of s)ln(t,e);else if(typeof s!="object")GM(Object.getOwnPropertyNames(e)),Dv[s]=Object.assign(Dv[s]||{},e);else for(const t in s)ln(t,s[t])}function eo(s){return Dv[s]||{}}function GM(s){UM.push(...s)}function hw(s,e){let t;const i=s.length,n=[];for(t=0;t<i;t++)n.push(e(s[t]));return n}function T1(s){return s%360*Math.PI/180}function Kf(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Qf(s,e,t,i){return e!=null&&t!=null||(i=i||s.bbox(),e==null?e=i.width/i.height*t:t==null&&(t=i.height/i.width*e)),{width:e,height:t}}function Rv(s,e){const t=s.origin;let i=s.ox!=null?s.ox:s.originX!=null?s.originX:"center",n=s.oy!=null?s.oy:s.originY!=null?s.originY:"center";t!=null&&([i,n]=Array.isArray(t)?t:typeof t=="object"?[t.x,t.y]:[t,t]);const a=typeof i=="string",o=typeof n=="string";if(a||o){const{height:r,width:d,x:g,y:x}=e.bbox();a&&(i=i.includes("left")?g:i.includes("right")?g+d:g+d/2),o&&(n=n.includes("top")?x:n.includes("bottom")?x+r:x+r/2)}return[i,n]}const HB=new Set(["desc","metadata","title"]),Ov=s=>HB.has(s.nodeName),WM=(s,e,t={})=>{const i={...e};for(const n in i)i[n].valueOf()===t[n]&&delete i[n];Object.keys(i).length?s.node.setAttribute("data-svgjs",JSON.stringify(i)):(s.node.removeAttribute("data-svgjs"),s.node.removeAttribute("svgjs:data"))},uw="http://www.w3.org/2000/svg",E1="http://www.w3.org/2000/xmlns/",Jf="http://www.w3.org/1999/xlink",In={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function wm(){return In.window}let dw=class{};const Qu={},fw="___SYMBOL___ROOT___";function hm(s,e=uw){return In.document.createElementNS(e,s)}function Us(s,e=!1){if(s instanceof dw)return s;if(typeof s=="object")return M1(s);if(s==null)return new Qu[fw];if(typeof s=="string"&&s.charAt(0)!=="<")return M1(In.document.querySelector(s));const t=e?In.document.createElement("div"):hm("svg");return t.innerHTML=s,s=M1(t.firstChild),t.removeChild(t.firstChild),s}function da(s,e){return e&&(e instanceof In.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:hm(s)}function Yo(s){if(!s)return null;if(s.instance instanceof dw)return s.instance;if(s.nodeName==="#document-fragment")return new Qu.Fragment(s);let e=Kf(s.nodeName||"Dom");return e==="LinearGradient"||e==="RadialGradient"?e="Gradient":Qu[e]||(e="Dom"),new Qu[e](s)}let M1=Yo;function Pn(s,e=s.name,t=!1){return Qu[e]=s,t&&(Qu[fw]=s),GM(Object.getOwnPropertyNames(s.prototype)),s}let UB=1e3;function $M(s){return"Svgjs"+Kf(s)+UB++}function XM(s){for(let e=s.children.length-1;e>=0;e--)XM(s.children[e]);return s.id&&(s.id=$M(s.nodeName)),s}function Ni(s,e){let t,i;for(i=(s=Array.isArray(s)?s:[s]).length-1;i>=0;i--)for(t in e)s[i].prototype[t]=e[t]}function ua(s){return function(...e){const t=e[e.length-1];return!t||t.constructor!==Object||t instanceof Array?s.apply(this,e):s.apply(this,e.slice(0,-1)).attr(t)}}ln("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const s=this.position();return this.parent().add(this.remove(),s+1),this},backward:function(){const s=this.position();return this.parent().add(this.remove(),s?s-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(s){(s=Us(s)).remove();const e=this.position();return this.parent().add(s,e),this},after:function(s){(s=Us(s)).remove();const e=this.position();return this.parent().add(s,e+1),this},insertBefore:function(s){return(s=Us(s)).before(this),this},insertAfter:function(s){return(s=Us(s)).after(this),this}});const YM=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,GB=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,WB=/rgb\((\d+),(\d+),(\d+)\)/,$B=/(#[a-z_][a-z0-9\-_]*)/i,XB=/\)\s*,?\s*/,YB=/\s/g,xA=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,yA=/^rgb\(/,vA=/^(\s+)?$/,bA=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qB=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Oc=/[\s,]+/,pw=/[MLHVCSQTAZ]/i;function ZB(s){const e=Math.round(s),t=Math.max(0,Math.min(255,e)).toString(16);return t.length===1?"0"+t:t}function yf(s,e){for(let t=e.length;t--;)if(s[e[t]]==null)return!1;return!0}function I1(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+6*(e-s)*t:t<.5?e:t<2/3?s+(e-s)*(2/3-t)*6:s}ln("Dom",{classes:function(){const s=this.attr("class");return s==null?[]:s.trim().split(Oc)},hasClass:function(s){return this.classes().indexOf(s)!==-1},addClass:function(s){if(!this.hasClass(s)){const e=this.classes();e.push(s),this.attr("class",e.join(" "))}return this},removeClass:function(s){return this.hasClass(s)&&this.attr("class",this.classes().filter((function(e){return e!==s})).join(" ")),this},toggleClass:function(s){return this.hasClass(s)?this.removeClass(s):this.addClass(s)}}),ln("Dom",{css:function(s,e){const t={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter((function(i){return!!i.length})).forEach((function(i){const n=i.split(/\s*:\s*/);t[n[0]]=n[1]})),t;if(arguments.length<2){if(Array.isArray(s)){for(const i of s){const n=i;t[i]=this.node.style.getPropertyValue(n)}return t}if(typeof s=="string")return this.node.style.getPropertyValue(s);if(typeof s=="object")for(const i in s)this.node.style.setProperty(i,s[i]==null||vA.test(s[i])?"":s[i])}return arguments.length===2&&this.node.style.setProperty(s,e==null||vA.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),ln("Dom",{data:function(s,e,t){if(s==null)return this.data(hw((function(i,n){let a;const o=i.length,r=[];for(a=0;a<o;a++)n(i[a])&&r.push(i[a]);return r})(this.node.attributes,(i=>i.nodeName.indexOf("data-")===0)),(i=>i.nodeName.slice(5))));if(s instanceof Array){const i={};for(const n of s)i[n]=this.data(n);return i}if(typeof s=="object")for(e in s)this.data(e,s[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+s))}catch{return this.attr("data-"+s)}else this.attr("data-"+s,e===null?null:t===!0||typeof e=="string"||typeof e=="number"?e:JSON.stringify(e));return this}}),ln("Dom",{remember:function(s,e){if(typeof arguments[0]=="object")for(const t in s)this.remember(t,s[t]);else{if(arguments.length===1)return this.memory()[s];this.memory()[s]=e}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let s=arguments.length-1;s>=0;s--)delete this.memory()[arguments[s]];return this},memory:function(){return this._memory=this._memory||{}}});class sa{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof sa||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"}static random(e="vibrant",t){const{random:i,round:n,sin:a,PI:o}=Math;if(e==="vibrant"){const r=24*i()+57,d=38*i()+45,g=360*i();return new sa(r,d,g,"lch")}if(e==="sine"){const r=n(80*a(2*o*(t=t??i())/.5+.01)+150),d=n(50*a(2*o*t/.5+4.6)+200),g=n(100*a(2*o*t/.5+2.3)+150);return new sa(r,d,g)}if(e==="pastel"){const r=8*i()+86,d=17*i()+9,g=360*i();return new sa(r,d,g,"lch")}if(e==="dark"){const r=10+10*i(),d=50*i()+86,g=360*i();return new sa(r,d,g,"lch")}if(e==="rgb"){const r=255*i(),d=255*i(),g=255*i();return new sa(r,d,g)}if(e==="lab"){const r=100*i(),d=256*i()-128,g=256*i()-128;return new sa(r,d,g,"lab")}if(e==="grey"){const r=255*i();return new sa(r,r,r)}throw new Error("Unsupported random color mode")}static test(e){return typeof e=="string"&&(xA.test(e)||yA.test(e))}cmyk(){const{_a:e,_b:t,_c:i}=this.rgb(),[n,a,o]=[e,t,i].map((d=>d/255)),r=Math.min(1-n,1-a,1-o);return r===1?new sa(0,0,0,1,"cmyk"):new sa((1-n-r)/(1-r),(1-a-r)/(1-r),(1-o-r)/(1-r),r,"cmyk")}hsl(){const{_a:e,_b:t,_c:i}=this.rgb(),[n,a,o]=[e,t,i].map((k=>k/255)),r=Math.max(n,a,o),d=Math.min(n,a,o),g=(r+d)/2,x=r===d,v=r-d;return new sa(360*(x?0:r===n?((a-o)/v+(a<o?6:0))/6:r===a?((o-n)/v+2)/6:r===o?((n-a)/v+4)/6:0),100*(x?0:g>.5?v/(2-r-d):v/(r+d)),100*g,"hsl")}init(e=0,t=0,i=0,n=0,a="rgb"){if(e=e||0,this.space)for(const v in this.space)delete this[this.space[v]];if(typeof e=="number")a=typeof n=="string"?n:a,n=typeof n=="string"?0:n,Object.assign(this,{_a:e,_b:t,_c:i,_d:n,space:a});else if(e instanceof Array)this.space=t||(typeof e[3]=="string"?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const v=(function(k,E){const F=yf(k,"rgb")?{_a:k.r,_b:k.g,_c:k.b,_d:0,space:"rgb"}:yf(k,"xyz")?{_a:k.x,_b:k.y,_c:k.z,_d:0,space:"xyz"}:yf(k,"hsl")?{_a:k.h,_b:k.s,_c:k.l,_d:0,space:"hsl"}:yf(k,"lab")?{_a:k.l,_b:k.a,_c:k.b,_d:0,space:"lab"}:yf(k,"lch")?{_a:k.l,_b:k.c,_c:k.h,_d:0,space:"lch"}:yf(k,"cmyk")?{_a:k.c,_b:k.m,_c:k.y,_d:k.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return F.space=E||F.space,F})(e,t);Object.assign(this,v)}else if(typeof e=="string")if(yA.test(e)){const v=e.replace(YB,""),[k,E,F]=WB.exec(v).slice(1,4).map((O=>parseInt(O)));Object.assign(this,{_a:k,_b:E,_c:F,_d:0,space:"rgb"})}else{if(!xA.test(e))throw Error("Unsupported string format, can't construct Color");{const v=O=>parseInt(O,16),[,k,E,F]=GB.exec((function(O){return O.length===4?["#",O.substring(1,2),O.substring(1,2),O.substring(2,3),O.substring(2,3),O.substring(3,4),O.substring(3,4)].join(""):O})(e)).map(v);Object.assign(this,{_a:k,_b:E,_c:F,_d:0,space:"rgb"})}}const{_a:o,_b:r,_c:d,_d:g}=this,x=this.space==="rgb"?{r:o,g:r,b:d}:this.space==="xyz"?{x:o,y:r,z:d}:this.space==="hsl"?{h:o,s:r,l:d}:this.space==="lab"?{l:o,a:r,b:d}:this.space==="lch"?{l:o,c:r,h:d}:this.space==="cmyk"?{c:o,m:r,y:d,k:g}:{};Object.assign(this,x)}lab(){const{x:e,y:t,z:i}=this.xyz();return new sa(116*t-16,500*(e-t),200*(t-i),"lab")}lch(){const{l:e,a:t,b:i}=this.lab(),n=Math.sqrt(t**2+i**2);let a=180*Math.atan2(i,t)/Math.PI;return a<0&&(a*=-1,a=360-a),new sa(e,n,a,"lch")}rgb(){if(this.space==="rgb")return this;if((e=this.space)==="lab"||e==="xyz"||e==="lch"){let{x:t,y:i,z:n}=this;if(this.space==="lab"||this.space==="lch"){let{l:E,a:F,b:O}=this;if(this.space==="lch"){const{c:le,h:te}=this,he=Math.PI/180;F=le*Math.cos(he*te),O=le*Math.sin(he*te)}const N=(E+16)/116,$=F/500+N,X=N-O/200,K=16/116,ie=.008856,ee=7.787;t=.95047*($**3>ie?$**3:($-K)/ee),i=1*(N**3>ie?N**3:(N-K)/ee),n=1.08883*(X**3>ie?X**3:(X-K)/ee)}const a=3.2406*t+-1.5372*i+-.4986*n,o=-.9689*t+1.8758*i+.0415*n,r=.0557*t+-.204*i+1.057*n,d=Math.pow,g=.0031308,x=a>g?1.055*d(a,1/2.4)-.055:12.92*a,v=o>g?1.055*d(o,1/2.4)-.055:12.92*o,k=r>g?1.055*d(r,1/2.4)-.055:12.92*r;return new sa(255*x,255*v,255*k)}if(this.space==="hsl"){let{h:t,s:i,l:n}=this;if(t/=360,i/=100,n/=100,i===0)return n*=255,new sa(n,n,n);const a=n<.5?n*(1+i):n+i-n*i,o=2*n-a,r=255*I1(o,a,t+1/3),d=255*I1(o,a,t),g=255*I1(o,a,t-1/3);return new sa(r,d,g)}if(this.space==="cmyk"){const{c:t,m:i,y:n,k:a}=this,o=255*(1-Math.min(1,t*(1-a)+a)),r=255*(1-Math.min(1,i*(1-a)+a)),d=255*(1-Math.min(1,n*(1-a)+a));return new sa(o,r,d)}return this;var e}toArray(){const{_a:e,_b:t,_c:i,_d:n,space:a}=this;return[e,t,i,n,a]}toHex(){const[e,t,i]=this._clamped().map(ZB);return`#${e}${t}${i}`}toRgb(){const[e,t,i]=this._clamped();return`rgb(${e},${t},${i})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:t,_c:i}=this.rgb(),[n,a,o]=[e,t,i].map((N=>N/255)),r=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,d=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,g=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,x=(.4124*r+.3576*d+.1805*g)/.95047,v=(.2126*r+.7152*d+.0722*g)/1,k=(.0193*r+.1192*d+.9505*g)/1.08883,E=x>.008856?Math.pow(x,1/3):7.787*x+16/116,F=v>.008856?Math.pow(v,1/3):7.787*v+16/116,O=k>.008856?Math.pow(k,1/3):7.787*k+16/116;return new sa(E,F,O,"xyz")}_clamped(){const{_a:e,_b:t,_c:i}=this.rgb(),{max:n,min:a,round:o}=Math;return[e,t,i].map((r=>n(0,a(o(r),255))))}}class $n{constructor(...e){this.init(...e)}clone(){return new $n(this)}init(e,t){const a=Array.isArray(e)?{x:e[0],y:e[1]}:typeof e=="object"?{x:e.x,y:e.y}:{x:e,y:t};return this.x=a.x==null?0:a.x,this.y=a.y==null?0:a.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){Di.isMatrixLike(e)||(e=new Di(e));const{x:t,y:i}=this;return this.x=e.a*t+e.c*i+e.e,this.y=e.b*t+e.d*i+e.f,this}}function vf(s,e,t){return Math.abs(e-s)<1e-6}class Di{constructor(...e){this.init(...e)}static formatTransforms(e){const t=e.flip==="both"||e.flip===!0,i=e.flip&&(t||e.flip==="x")?-1:1,n=e.flip&&(t||e.flip==="y")?-1:1,a=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,o=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,r=e.scale&&e.scale.length?e.scale[0]*i:isFinite(e.scale)?e.scale*i:isFinite(e.scaleX)?e.scaleX*i:i,d=e.scale&&e.scale.length?e.scale[1]*n:isFinite(e.scale)?e.scale*n:isFinite(e.scaleY)?e.scaleY*n:n,g=e.shear||0,x=e.rotate||e.theta||0,v=new $n(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),k=v.x,E=v.y,F=new $n(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),O=F.x,N=F.y,$=new $n(e.translate||e.tx||e.translateX,e.ty||e.translateY),X=$.x,K=$.y,ie=new $n(e.relative||e.rx||e.relativeX,e.ry||e.relativeY);return{scaleX:r,scaleY:d,skewX:a,skewY:o,shear:g,theta:x,rx:ie.x,ry:ie.y,tx:X,ty:K,ox:k,oy:E,px:O,py:N}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return e.a!=null||e.b!=null||e.c!=null||e.d!=null||e.e!=null||e.f!=null}static matrixMultiply(e,t,i){const n=e.a*t.a+e.c*t.b,a=e.b*t.a+e.d*t.b,o=e.a*t.c+e.c*t.d,r=e.b*t.c+e.d*t.d,d=e.e+e.a*t.e+e.c*t.f,g=e.f+e.b*t.e+e.d*t.f;return i.a=n,i.b=a,i.c=o,i.d=r,i.e=d,i.f=g,i}around(e,t,i){return this.clone().aroundO(e,t,i)}aroundO(e,t,i){const n=e||0,a=t||0;return this.translateO(-n,-a).lmultiplyO(i).translateO(n,a)}clone(){return new Di(this)}decompose(e=0,t=0){const i=this.a,n=this.b,a=this.c,o=this.d,r=this.e,d=this.f,g=i*o-n*a,x=g>0?1:-1,v=x*Math.sqrt(i*i+n*n),k=Math.atan2(x*n,x*i),E=180/Math.PI*k,F=Math.cos(k),O=Math.sin(k),N=(i*a+n*o)/g,$=a*v/(N*i-n)||o*v/(N*n+i);return{scaleX:v,scaleY:$,shear:N,rotate:E,translateX:r-e+e*F*v+t*(N*F*v-O*$),translateY:d-t+e*O*v+t*(N*O*v+F*$),originX:e,originY:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const t=new Di(e);return vf(this.a,t.a)&&vf(this.b,t.b)&&vf(this.c,t.c)&&vf(this.d,t.d)&&vf(this.e,t.e)&&vf(this.f,t.f)}flip(e,t){return this.clone().flipO(e,t)}flipO(e,t){return e==="x"?this.scaleO(-1,1,t,0):e==="y"?this.scaleO(1,-1,0,t):this.scaleO(-1,-1,e,t||e)}init(e){const t=Di.fromArray([1,0,0,1,0,0]);return e=e instanceof hs?e.matrixify():typeof e=="string"?Di.fromArray(e.split(Oc).map(parseFloat)):Array.isArray(e)?Di.fromArray(e):typeof e=="object"&&Di.isMatrixLike(e)?e:typeof e=="object"?new Di().transform(e):arguments.length===6?Di.fromArray([].slice.call(arguments)):t,this.a=e.a!=null?e.a:t.a,this.b=e.b!=null?e.b:t.b,this.c=e.c!=null?e.c:t.c,this.d=e.d!=null?e.d:t.d,this.e=e.e!=null?e.e:t.e,this.f=e.f!=null?e.f:t.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,t=this.b,i=this.c,n=this.d,a=this.e,o=this.f,r=e*n-t*i;if(!r)throw new Error("Cannot invert "+this);const d=n/r,g=-t/r,x=-i/r,v=e/r,k=-(d*a+x*o),E=-(g*a+v*o);return this.a=d,this.b=g,this.c=x,this.d=v,this.e=k,this.f=E,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const t=e instanceof Di?e:new Di(e);return Di.matrixMultiply(t,this,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const t=e instanceof Di?e:new Di(e);return Di.matrixMultiply(this,t,this)}rotate(e,t,i){return this.clone().rotateO(e,t,i)}rotateO(e,t=0,i=0){e=T1(e);const n=Math.cos(e),a=Math.sin(e),{a:o,b:r,c:d,d:g,e:x,f:v}=this;return this.a=o*n-r*a,this.b=r*n+o*a,this.c=d*n-g*a,this.d=g*n+d*a,this.e=x*n-v*a+i*a-t*n+t,this.f=v*n+x*a-t*a-i*n+i,this}scale(){return this.clone().scaleO(...arguments)}scaleO(e,t=e,i=0,n=0){arguments.length===3&&(n=i,i=t,t=e);const{a,b:o,c:r,d,e:g,f:x}=this;return this.a=a*e,this.b=o*t,this.c=r*e,this.d=d*t,this.e=g*e-i*e+i,this.f=x*t-n*t+n,this}shear(e,t,i){return this.clone().shearO(e,t,i)}shearO(e,t=0,i=0){const{a:n,b:a,c:o,d:r,e:d,f:g}=this;return this.a=n+a*e,this.c=o+r*e,this.e=d+g*e-i*e,this}skew(){return this.clone().skewO(...arguments)}skewO(e,t=e,i=0,n=0){arguments.length===3&&(n=i,i=t,t=e),e=T1(e),t=T1(t);const a=Math.tan(e),o=Math.tan(t),{a:r,b:d,c:g,d:x,e:v,f:k}=this;return this.a=r+d*a,this.b=d+r*o,this.c=g+x*a,this.d=x+g*o,this.e=v+k*a-n*a,this.f=k+v*o-i*o,this}skewX(e,t,i){return this.skew(e,0,t,i)}skewY(e,t,i){return this.skew(0,e,t,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(Di.isMatrixLike(e))return new Di(e).multiplyO(this);const t=Di.formatTransforms(e),{x:i,y:n}=new $n(t.ox,t.oy).transform(this),a=new Di().translateO(t.rx,t.ry).lmultiplyO(this).translateO(-i,-n).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(i,n);if(isFinite(t.px)||isFinite(t.py)){const o=new $n(i,n).transform(a),r=isFinite(t.px)?t.px-o.x:0,d=isFinite(t.py)?t.py-o.y:0;a.translateO(r,d)}return a.translateO(t.tx,t.ty),a}translate(e,t){return this.clone().translateO(e,t)}translateO(e,t){return this.e+=e||0,this.f+=t||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function sh(){if(!sh.nodes){const s=Us().size(2,0);s.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),s.attr("focusable","false"),s.attr("aria-hidden","true");const e=s.path().node;sh.nodes={svg:s,path:e}}if(!sh.nodes.svg.node.parentNode){const s=In.document.body||In.document.documentElement;sh.nodes.svg.addTo(s)}return sh.nodes}function qM(s){return!(s.width||s.height||s.x||s.y)}Pn(Di,"Matrix");class sr{constructor(...e){this.init(...e)}addOffset(){return this.x+=In.window.pageXOffset,this.y+=In.window.pageYOffset,new sr(this)}init(e){return e=typeof e=="string"?e.split(Oc).map(parseFloat):Array.isArray(e)?e:typeof e=="object"?[e.left!=null?e.left:e.x,e.top!=null?e.top:e.y,e.width,e.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return qM(this)}merge(e){const t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x+this.width,e.x+e.width)-t,a=Math.max(this.y+this.height,e.y+e.height)-i;return new sr(t,i,n,a)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof Di||(e=new Di(e));let t=1/0,i=-1/0,n=1/0,a=-1/0;return[new $n(this.x,this.y),new $n(this.x2,this.y),new $n(this.x,this.y2),new $n(this.x2,this.y2)].forEach((function(o){o=o.transform(e),t=Math.min(t,o.x),i=Math.max(i,o.x),n=Math.min(n,o.y),a=Math.max(a,o.y)})),new sr(t,n,i-t,a-n)}}function wA(s,e,t){let i;try{if(i=e(s.node),qM(i)&&(n=s.node)!==In.document&&!(In.document.documentElement.contains||function(a){for(;a.parentNode;)a=a.parentNode;return a===In.document}).call(In.document.documentElement,n))throw new Error("Element not in the dom")}catch{i=t(s)}var n;return i}ln({viewbox:{viewbox(s,e,t,i){return s==null?new sr(this.attr("viewBox")):this.attr("viewBox",new sr(s,e,t,i))},zoom(s,e){let{width:t,height:i}=this.attr(["width","height"]);if((t||i)&&typeof t!="string"&&typeof i!="string"||(t=this.node.clientWidth,i=this.node.clientHeight),!t||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const n=this.viewbox(),a=t/n.width,o=i/n.height,r=Math.min(a,o);if(s==null)return r;let d=r/s;d===1/0&&(d=Number.MAX_SAFE_INTEGER/100),e=e||new $n(t/2/a+n.x,i/2/o+n.y);const g=new sr(n).transform(new Di({scale:d,origin:e}));return this.viewbox(g)}}}),Pn(sr,"Box");class ld extends Array{constructor(e=[],...t){if(super(e,...t),typeof e=="number")return this;this.length=0,this.push(...e)}}Ni([ld],{each(s,...e){return typeof s=="function"?this.map(((t,i,n)=>s.call(t,t,i,n))):this.map((t=>t[s](...e)))},toArray(){return Array.prototype.concat.apply([],this)}});const KB=["toArray","constructor","each"];function fd(s,e){return new ld(hw((e||In.document).querySelectorAll(s),(function(t){return Yo(t)})))}ld.extend=function(s){s=s.reduce(((e,t)=>(KB.includes(t)||t[0]==="_"||(t in Array.prototype&&(e["$"+t]=Array.prototype[t]),e[t]=function(...i){return this.each(t,...i)}),e)),{}),Ni([ld],s)};let QB=0;const ZM={};function KM(s){let e=s.getEventHolder();return e===In.window&&(e=ZM),e.events||(e.events={}),e.events}function gw(s){return s.getEventTarget()}function Mc(s,e,t,i,n){const a=t.bind(i||s),o=Us(s),r=KM(o),d=gw(o);e=Array.isArray(e)?e:e.split(Oc),t._svgjsListenerId||(t._svgjsListenerId=++QB),e.forEach((function(g){const x=g.split(".")[0],v=g.split(".")[1]||"*";r[x]=r[x]||{},r[x][v]=r[x][v]||{},r[x][v][t._svgjsListenerId]=a,d.addEventListener(x,a,n||!1)}))}function Jo(s,e,t,i){const n=Us(s),a=KM(n),o=gw(n);(typeof t!="function"||(t=t._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(Oc)).forEach((function(r){const d=r&&r.split(".")[0],g=r&&r.split(".")[1];let x,v;if(t)a[d]&&a[d][g||"*"]&&(o.removeEventListener(d,a[d][g||"*"][t],i||!1),delete a[d][g||"*"][t]);else if(d&&g){if(a[d]&&a[d][g]){for(v in a[d][g])Jo(o,[d,g].join("."),v);delete a[d][g]}}else if(g)for(r in a)for(x in a[r])g===x&&Jo(o,[r,g].join("."));else if(d){if(a[d]){for(x in a[d])Jo(o,[d,x].join("."));delete a[d]}}else{for(r in a)Jo(o,r);(function(k){let E=k.getEventHolder();E===In.window&&(E=ZM),E.events&&(E.events={})})(n)}}))}class Sm extends dw{addEventListener(){}dispatch(e,t,i){return(function(n,a,o,r){const d=gw(n);return a instanceof In.window.Event||(a=new In.window.CustomEvent(a,{detail:o,cancelable:!0,...r})),d.dispatchEvent(a),a})(this,e,t,i)}dispatchEvent(e){const t=this.getEventHolder().events;if(!t)return!0;const i=t[e.type];for(const n in i)for(const a in i[n])i[n][a](e);return!e.defaultPrevented}fire(e,t,i){return this.dispatch(e,t,i),this}getEventHolder(){return this}getEventTarget(){return this}off(e,t,i){return Jo(this,e,t,i),this}on(e,t,i,n){return Mc(this,e,t,i,n),this}removeEventListener(){}}function SA(){}Pn(Sm,"EventTarget");const P1=400,JB=">",eN=0,tN={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class cd extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return typeof e=="number"||(this.length=0,this.push(...this.parse(e))),this}parse(e=[]){return e instanceof Array?e:e.trim().split(Oc).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class Ki{constructor(...e){this.init(...e)}convert(e){return new Ki(this.value,e)}divide(e){return e=new Ki(e),new Ki(this/e,this.unit||e.unit)}init(e,t){return t=Array.isArray(e)?e[1]:t,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=t||"",typeof e=="number"?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:typeof e=="string"?(t=e.match(YM))&&(this.value=parseFloat(t[1]),t[5]==="%"?this.value/=100:t[5]==="s"&&(this.value*=1e3),this.unit=t[5]):e instanceof Ki&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new Ki(e),new Ki(this-e,this.unit||e.unit)}plus(e){return e=new Ki(e),new Ki(this+e,this.unit||e.unit)}times(e){return e=new Ki(e),new Ki(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const iN=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),QM=[];class Th extends Sm{constructor(e,t){super(),this.node=e,this.type=e.nodeName,t&&e!==t&&this.attr(t)}add(e,t){return(e=Us(e)).removeNamespace&&this.node instanceof In.window.SVGElement&&e.removeNamespace(),t==null?this.node.appendChild(e.node):e.node!==this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this}addTo(e,t){return Us(e).put(this,t)}children(){return new ld(hw(this.node.children,(function(e){return Yo(e)})))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,t=!0){this.writeDataToDom();let i=this.node.cloneNode(e);return t&&(i=XM(i)),new this.constructor(i)}each(e,t){const i=this.children();let n,a;for(n=0,a=i.length;n<a;n++)e.apply(i[n],[n,i]),t&&i[n].each(e,t);return this}element(e,t){return this.put(new Th(hm(e),t))}first(){return Yo(this.node.firstChild)}get(e){return Yo(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,t){return this.xml(e,t,"http://www.w3.org/1999/xhtml")}id(e){return e!==void 0||this.node.id||(this.node.id=$M(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return Yo(this.node.lastChild)}matches(e){const t=this.node,i=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return i&&i.call(t,e)}parent(e){let t=this;if(!t.node.parentNode)return null;if(t=Yo(t.node.parentNode),!e)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=Yo(t.node.parentNode));return t}put(e,t){return e=Us(e),this.add(e,t),e}putIn(e,t){return Us(e).add(this,t)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=Us(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,t=null){const i=10**e,n=this.attr(t);for(const a in n)typeof n[a]=="number"&&(n[a]=Math.round(n[a]*i)/i);return this.attr(n),this}svg(e,t){return this.xml(e,t,uw)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const t=this.parent();if(!t)return this.addTo(e);const i=t.index(this);return t.put(e,i).put(this)}writeDataToDom(){return this.each((function(){this.writeDataToDom()})),this}xml(e,t,i){if(typeof e=="boolean"&&(i=t,t=e,e=null),e==null||typeof e=="function"){t=t==null||t,this.writeDataToDom();let r=this;if(e!=null){if(r=Yo(r.node.cloneNode(!0)),t){const d=e(r);if(r=d||r,d===!1)return""}r.each((function(){const d=e(this),g=d||this;d===!1?this.remove():d&&this!==g&&this.replace(g)}),!0)}return t?r.node.outerHTML:r.node.innerHTML}t=t!=null&&t;const n=hm("wrapper",i),a=In.document.createDocumentFragment();n.innerHTML=e;for(let r=n.children.length;r--;)a.appendChild(n.firstElementChild);const o=this.parent();return t?this.replace(a)&&o:this.add(a)}}Ni(Th,{attr:function(s,e,t){if(s==null){s={},e=this.node.attributes;for(const i of e)s[i.nodeName]=bA.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return s}if(s instanceof Array)return s.reduce(((i,n)=>(i[n]=this.attr(n),i)),{});if(typeof s=="object"&&s.constructor===Object)for(e in s)this.attr(e,s[e]);else if(e===null)this.node.removeAttribute(s);else{if(e==null)return(e=this.node.getAttribute(s))==null?tN[s]:bA.test(e)?parseFloat(e):e;typeof(e=QM.reduce(((i,n)=>n(s,i,this)),e))=="number"?e=new Ki(e):iN.has(s)&&sa.isColor(e)?e=new sa(e):e.constructor===Array&&(e=new cd(e)),s==="leading"?this.leading&&this.leading(e):typeof t=="string"?this.node.setAttributeNS(t,s,e.toString()):this.node.setAttribute(s,e.toString()),!this.rebuild||s!=="font-size"&&s!=="x"||this.rebuild()}return this},find:function(s){return fd(s,this.node)},findOne:function(s){return Yo(this.node.querySelector(s))}}),Pn(Th,"Dom");let hs=class extends Th{constructor(s,e){super(s,e),this.dom={},this.node.instance=this,(s.hasAttribute("data-svgjs")||s.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(s.getAttribute("data-svgjs"))??JSON.parse(s.getAttribute("svgjs:data"))??{})}center(s,e){return this.cx(s).cy(e)}cx(s){return s==null?this.x()+this.width()/2:this.x(s-this.width()/2)}cy(s){return s==null?this.y()+this.height()/2:this.y(s-this.height()/2)}defs(){const s=this.root();return s&&s.defs()}dmove(s,e){return this.dx(s).dy(e)}dx(s=0){return this.x(new Ki(s).plus(this.x()))}dy(s=0){return this.y(new Ki(s).plus(this.y()))}getEventHolder(){return this}height(s){return this.attr("height",s)}move(s,e){return this.x(s).y(e)}parents(s=this.root()){const e=typeof s=="string";e||(s=Us(s));const t=new ld;let i=this;for(;(i=i.parent())&&i.node!==In.document&&i.nodeName!=="#document-fragment"&&(t.push(i),e||i.node!==s.node)&&(!e||!i.matches(s));)if(i.node===this.root().node)return null;return t}reference(s){if(!(s=this.attr(s)))return null;const e=(s+"").match($B);return e?Us(e[1]):null}root(){const s=this.parent((function(e){return Qu[e]})(fw));return s&&s.root()}setData(s){return this.dom=s,this}size(s,e){const t=Qf(this,s,e);return this.width(new Ki(t.width)).height(new Ki(t.height))}width(s){return this.attr("width",s)}writeDataToDom(){return WM(this,this.dom),super.writeDataToDom()}x(s){return this.attr("x",s)}y(s){return this.attr("y",s)}};Ni(hs,{bbox:function(){const s=wA(this,(e=>e.getBBox()),(e=>{try{const t=e.clone().addTo(sh().svg).show(),i=t.node.getBBox();return t.remove(),i}catch(t){throw new Error(`Getting bbox of element "${e.node.nodeName}" is not possible: ${t.toString()}`)}}));return new sr(s)},rbox:function(s){const e=wA(this,(i=>i.getBoundingClientRect()),(i=>{throw new Error(`Getting rbox of element "${i.node.nodeName}" is not possible`)})),t=new sr(e);return s?t.transform(s.screenCTM().inverseO()):t.addOffset()},inside:function(s,e){const t=this.bbox();return s>t.x&&e>t.y&&s<t.x+t.width&&e<t.y+t.height},point:function(s,e){return new $n(s,e).transformO(this.screenCTM().inverseO())},ctm:function(){return new Di(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const s=this.rect(1,1),e=s.node.getScreenCTM();return s.remove(),new Di(e)}return new Di(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new Di}}}),Pn(hs,"Element");const lg={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(s,e){return e==="color"?s:s+"-"+e}};["fill","stroke"].forEach((function(s){const e={};let t;e[s]=function(i){if(i===void 0)return this.attr(s);if(typeof i=="string"||i instanceof sa||sa.isRgb(i)||i instanceof hs)this.attr(s,i);else for(t=lg[s].length-1;t>=0;t--)i[lg[s][t]]!=null&&this.attr(lg.prefix(s,lg[s][t]),i[lg[s][t]]);return this},ln(["Element","Runner"],e)})),ln(["Element","Runner"],{matrix:function(s,e,t,i,n,a){return s==null?new Di(this):this.attr("transform",new Di(s,e,t,i,n,a))},rotate:function(s,e,t){return this.transform({rotate:s,ox:e,oy:t},!0)},skew:function(s,e,t,i){return arguments.length===1||arguments.length===3?this.transform({skew:s,ox:e,oy:t},!0):this.transform({skew:[s,e],ox:t,oy:i},!0)},shear:function(s,e,t){return this.transform({shear:s,ox:e,oy:t},!0)},scale:function(s,e,t,i){return arguments.length===1||arguments.length===3?this.transform({scale:s,ox:e,oy:t},!0):this.transform({scale:[s,e],ox:t,oy:i},!0)},translate:function(s,e){return this.transform({translate:[s,e]},!0)},relative:function(s,e){return this.transform({relative:[s,e]},!0)},flip:function(s="both",e="center"){return"xybothtrue".indexOf(s)===-1&&(e=s,s="both"),this.transform({flip:s,origin:e},!0)},opacity:function(s){return this.attr("opacity",s)}}),ln("radius",{radius:function(s,e=s){return(this._element||this).type==="radialGradient"?this.attr("r",new Ki(s)):this.rx(s).ry(e)}}),ln("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(s){return new $n(this.node.getPointAtLength(s))}}),ln(["Element","Runner"],{font:function(s,e){if(typeof s=="object"){for(e in s)this.font(e,s[e]);return this}return s==="leading"?this.leading(e):s==="anchor"?this.attr("text-anchor",e):s==="size"||s==="family"||s==="weight"||s==="stretch"||s==="variant"||s==="style"?this.attr("font-"+s,e):this.attr(s,e)}});ln("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce((function(s,e){return s[e]=function(t){return t===null?this.off(e):this.on(e,t),this},s}),{})),ln("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(XB).slice(0,-1).map((function(e){const t=e.trim().split("(");return[t[0],t[1].split(Oc).map((function(i){return parseFloat(i)}))]})).reverse().reduce((function(e,t){return t[0]==="matrix"?e.lmultiply(Di.fromArray(t[1])):e[t[0]].apply(e,t[1])}),new Di)},toParent:function(s,e){if(this===s)return this;if(Ov(this.node))return this.addTo(s,e);const t=this.screenCTM(),i=s.screenCTM().inverse();return this.addTo(s,e).untransform().transform(i.multiply(t)),this},toRoot:function(s){return this.toParent(this.root(),s)},transform:function(s,e){if(s==null||typeof s=="string"){const i=new Di(this).decompose();return s==null?i:i[s]}Di.isMatrixLike(s)||(s={...s,origin:Rv(s,this)});const t=new Di(e===!0?this:e||!1).transform(s);return this.attr("transform",t)}});class Ws extends hs{flatten(){return this.each((function(){if(this instanceof Ws)return this.flatten().ungroup()})),this}ungroup(e=this.parent(),t=e.index(this)){return t=t===-1?e.children().length:t,this.each((function(i,n){return n[n.length-i-1].toParent(e,t)})),this.remove()}}Pn(Ws,"Container");class Mx extends Ws{constructor(e,t=e){super(da("defs",e),t)}flatten(){return this}ungroup(){return this}}Pn(Mx,"Defs");class zo extends hs{}function mw(s){return this.attr("rx",s)}function _w(s){return this.attr("ry",s)}function JM(s){return s==null?this.cx()-this.rx():this.cx(s+this.rx())}function eI(s){return s==null?this.cy()-this.ry():this.cy(s+this.ry())}function tI(s){return this.attr("cx",s)}function iI(s){return this.attr("cy",s)}function nI(s){return s==null?2*this.rx():this.rx(new Ki(s).divide(2))}function aI(s){return s==null?2*this.ry():this.ry(new Ki(s).divide(2))}Pn(zo,"Shape");var nN=Object.freeze({__proto__:null,cx:tI,cy:iI,height:aI,rx:mw,ry:_w,width:nI,x:JM,y:eI});class k_ extends zo{constructor(e,t=e){super(da("ellipse",e),t)}size(e,t){const i=Qf(this,e,t);return this.rx(new Ki(i.width).divide(2)).ry(new Ki(i.height).divide(2))}}Ni(k_,nN),ln("Container",{ellipse:ua((function(s=0,e=s){return this.put(new k_).size(s,e).move(0,0)}))}),Pn(k_,"Ellipse");class rI extends Th{constructor(e=In.document.createDocumentFragment()){super(e)}xml(e,t,i){if(typeof e=="boolean"&&(i=t,t=e,e=null),e==null||typeof e=="function"){const n=new Th(hm("wrapper",i));return n.add(this.node.cloneNode(!0)),n.xml(!1,i)}return super.xml(e,!1,i)}}function sI(s,e){return(this._element||this).type==="radialGradient"?this.attr({fx:new Ki(s),fy:new Ki(e)}):this.attr({x1:new Ki(s),y1:new Ki(e)})}function oI(s,e){return(this._element||this).type==="radialGradient"?this.attr({cx:new Ki(s),cy:new Ki(e)}):this.attr({x2:new Ki(s),y2:new Ki(e)})}Pn(rI,"Fragment");var aN=Object.freeze({__proto__:null,from:sI,to:oI});class Gg extends Ws{constructor(e,t){super(da(e+"Gradient",typeof e=="string"?null:e),t)}attr(e,t,i){return e==="transform"&&(e="gradientTransform"),super.attr(e,t,i)}bbox(){return new sr}targets(){return fd("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}Ni(Gg,aN),ln({Container:{gradient(...s){return this.defs().gradient(...s)}},Defs:{gradient:ua((function(s,e){return this.put(new Gg(s)).update(e)}))}}),Pn(Gg,"Gradient");class um extends Ws{constructor(e,t=e){super(da("pattern",e),t)}attr(e,t,i){return e==="transform"&&(e="patternTransform"),super.attr(e,t,i)}bbox(){return new sr}targets(){return fd("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}ln({Container:{pattern(...s){return this.defs().pattern(...s)}},Defs:{pattern:ua((function(s,e,t){return this.put(new um).update(t).attr({x:0,y:0,width:s,height:e,patternUnits:"userSpaceOnUse"})}))}}),Pn(um,"Pattern");let C_=class extends zo{constructor(s,e=s){super(da("image",s),e)}load(s,e){if(!s)return this;const t=new In.window.Image;return Mc(t,"load",(function(i){const n=this.parent(um);this.width()===0&&this.height()===0&&this.size(t.width,t.height),n instanceof um&&n.width()===0&&n.height()===0&&n.size(this.width(),this.height()),typeof e=="function"&&e.call(this,i)}),this),Mc(t,"load error",(function(){Jo(t)})),this.attr("href",t.src=s,Jf)}};var kA;kA=function(s,e,t){return s!=="fill"&&s!=="stroke"||qB.test(e)&&(e=t.root().defs().image(e)),e instanceof C_&&(e=t.root().defs().pattern(0,0,(i=>{i.add(e)}))),e},QM.push(kA),ln({Container:{image:ua((function(s,e){return this.put(new C_).size(0,0).load(s,e)}))}}),Pn(C_,"Image");class Eh extends cd{bbox(){let e=-1/0,t=-1/0,i=1/0,n=1/0;return this.forEach((function(a){e=Math.max(a[0],e),t=Math.max(a[1],t),i=Math.min(a[0],i),n=Math.min(a[1],n)})),new sr(i,n,e-i,t-n)}move(e,t){const i=this.bbox();if(e-=i.x,t-=i.y,!isNaN(e)&&!isNaN(t))for(let n=this.length-1;n>=0;n--)this[n]=[this[n][0]+e,this[n][1]+t];return this}parse(e=[0,0]){const t=[];(e=e instanceof Array?Array.prototype.concat.apply([],e):e.trim().split(Oc).map(parseFloat)).length%2!=0&&e.pop();for(let i=0,n=e.length;i<n;i+=2)t.push([e[i],e[i+1]]);return t}size(e,t){let i;const n=this.bbox();for(i=this.length-1;i>=0;i--)n.width&&(this[i][0]=(this[i][0]-n.x)*e/n.width+n.x),n.height&&(this[i][1]=(this[i][1]-n.y)*t/n.height+n.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let t=0,i=this.length;t<i;t++)e.push(this[t].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){Di.isMatrixLike(e)||(e=new Di(e));for(let t=this.length;t--;){const[i,n]=this[t];this[t][0]=e.a*i+e.c*n+e.e,this[t][1]=e.b*i+e.d*n+e.f}return this}}const rN=Eh;var xw=Object.freeze({__proto__:null,MorphArray:rN,height:function(s){const e=this.bbox();return s==null?e.height:this.size(e.width,s)},width:function(s){const e=this.bbox();return s==null?e.width:this.size(s,e.height)},x:function(s){return s==null?this.bbox().x:this.move(s,this.bbox().y)},y:function(s){return s==null?this.bbox().y:this.move(this.bbox().x,s)}});let Nu=class extends zo{constructor(s,e=s){super(da("line",s),e)}array(){return new Eh([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(s,e){return this.attr(this.array().move(s,e).toLine())}plot(s,e,t,i){return s==null?this.array():(s=e!==void 0?{x1:s,y1:e,x2:t,y2:i}:new Eh(s).toLine(),this.attr(s))}size(s,e){const t=Qf(this,s,e);return this.attr(this.array().size(t.width,t.height).toLine())}};Ni(Nu,xw),ln({Container:{line:ua((function(...s){return Nu.prototype.plot.apply(this.put(new Nu),s[0]!=null?s:[0,0,0,0])}))}}),Pn(Nu,"Line");let A_=class extends Ws{constructor(s,e=s){super(da("marker",s),e)}height(s){return this.attr("markerHeight",s)}orient(s){return this.attr("orient",s)}ref(s,e){return this.attr("refX",s).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(s){return this.clear(),typeof s=="function"&&s.call(this,this),this}width(s){return this.attr("markerWidth",s)}};function Af(s,e){return function(t){return t==null?this[s]:(this[s]=t,e&&e.call(this),this)}}ln({Container:{marker(...s){return this.defs().marker(...s)}},Defs:{marker:ua((function(s,e,t){return this.put(new A_).size(s,e).ref(s/2,e/2).viewbox(0,0,s,e).attr("orient","auto").update(t)}))},marker:{marker(s,e,t,i){let n=["marker"];return s!=="all"&&n.push(s),n=n.join("-"),s=arguments[1]instanceof A_?arguments[1]:this.defs().marker(e,t,i),this.attr(n,s)}}}),Pn(A_,"Marker");const sN={"-":function(s){return s},"<>":function(s){return-Math.cos(s*Math.PI)/2+.5},">":function(s){return Math.sin(s*Math.PI/2)},"<":function(s){return 1-Math.cos(s*Math.PI/2)},bezier:function(s,e,t,i){return function(n){return n<0?s>0?e/s*n:t>0?i/t*n:0:n>1?t<1?(1-i)/(1-t)*n+(i-t)/(1-t):s<1?(1-e)/(1-s)*n+(e-s)/(1-s):1:3*n*(1-n)**2*e+3*n**2*(1-n)*i+n**3}},steps:function(s,e="end"){e=e.split("-").reverse()[0];let t=s;return e==="none"?--t:e==="both"&&++t,(i,n=!1)=>{let a=Math.floor(i*s);const o=i*a%1==0;return e!=="start"&&e!=="both"||++a,n&&o&&--a,i>=0&&a<0&&(a=0),i<=1&&a>t&&(a=t),a/t}}};class yw{done(){return!1}}class zv extends yw{constructor(e=JB){super(),this.ease=sN[e]||e}step(e,t,i){return typeof e!="number"?i<1?e:t:e+(t-e)*this.ease(i)}}class tx extends yw{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,t,i,n){return this.stepper(e,t,i,n)}}function CA(){const s=(this._duration||500)/1e3,e=this._overshoot||0,t=Math.PI,i=Math.log(e/100+1e-10),n=-i/Math.sqrt(t*t+i*i),a=3.9/(n*s);this.d=2*n*a,this.k=a*a}Ni(class extends tx{constructor(s=500,e=0){super(),this.duration(s).overshoot(e)}step(s,e,t,i){if(typeof s=="string")return s;if(i.done=t===1/0,t===1/0)return e;if(t===0)return s;t>100&&(t=16),t/=1e3;const n=i.velocity||0,a=-this.d*n-this.k*(s-e),o=s+n*t+a*t*t/2;return i.velocity=n+a*t,i.done=Math.abs(e-o)+Math.abs(n)<.002,i.done?e:o}},{duration:Af("_duration",CA),overshoot:Af("_overshoot",CA)});Ni(class extends tx{constructor(s=.1,e=.01,t=0,i=1e3){super(),this.p(s).i(e).d(t).windup(i)}step(s,e,t,i){if(typeof s=="string")return s;if(i.done=t===1/0,t===1/0)return e;if(t===0)return s;const n=e-s;let a=(i.integral||0)+n*t;const o=(n-(i.error||0))/t,r=this._windup;return r!==!1&&(a=Math.max(-r,Math.min(a,r))),i.error=n,i.integral=a,i.done=Math.abs(n)<.001,i.done?e:s+(this.P*n+this.I*a+this.D*o)}},{windup:Af("_windup"),p:Af("P"),i:Af("I"),d:Af("D")});const oN={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Fv={M:function(s,e,t){return e.x=t.x=s[0],e.y=t.y=s[1],["M",e.x,e.y]},L:function(s,e){return e.x=s[0],e.y=s[1],["L",s[0],s[1]]},H:function(s,e){return e.x=s[0],["H",s[0]]},V:function(s,e){return e.y=s[0],["V",s[0]]},C:function(s,e){return e.x=s[4],e.y=s[5],["C",s[0],s[1],s[2],s[3],s[4],s[5]]},S:function(s,e){return e.x=s[2],e.y=s[3],["S",s[0],s[1],s[2],s[3]]},Q:function(s,e){return e.x=s[2],e.y=s[3],["Q",s[0],s[1],s[2],s[3]]},T:function(s,e){return e.x=s[0],e.y=s[1],["T",s[0],s[1]]},Z:function(s,e,t){return e.x=t.x,e.y=t.y,["Z"]},A:function(s,e){return e.x=s[5],e.y=s[6],["A",s[0],s[1],s[2],s[3],s[4],s[5],s[6]]}},L1="mlhvqtcsaz".split("");for(let s=0,e=L1.length;s<e;++s)Fv[L1[s]]=(function(t){return function(i,n,a){if(t==="H")i[0]=i[0]+n.x;else if(t==="V")i[0]=i[0]+n.y;else if(t==="A")i[5]=i[5]+n.x,i[6]=i[6]+n.y;else for(let o=0,r=i.length;o<r;++o)i[o]=i[o]+(o%2?n.y:n.x);return Fv[t](i,n,a)}})(L1[s].toUpperCase());function Bv(s){return s.segment.length&&s.segment.length-1===oN[s.segment[0].toUpperCase()]}function lN(s,e){s.inNumber&&Du(s,!1);const t=pw.test(e);if(t)s.segment=[e];else{const i=s.lastCommand,n=i.toLowerCase(),a=i===n;s.segment=[n==="m"?a?"l":"L":i]}return s.inSegment=!0,s.lastCommand=s.segment[0],t}function Du(s,e){if(!s.inNumber)throw new Error("Parser Error");s.number&&s.segment.push(parseFloat(s.number)),s.inNumber=e,s.number="",s.pointSeen=!1,s.hasExponent=!1,Bv(s)&&Nv(s)}function Nv(s){s.inSegment=!1,s.absolute&&(s.segment=(function(e){const t=e.segment[0];return Fv[t](e.segment.slice(1),e.p,e.p0)})(s)),s.segments.push(s.segment)}function cN(s){if(!s.segment.length)return!1;const e=s.segment[0].toUpperCase()==="A",t=s.segment.length;return e&&(t===4||t===5)}function hN(s){return s.lastToken.toUpperCase()==="E"}const uN=new Set([" ",",","	",`
`,"\r","\f"]);class xl extends cd{bbox(){return sh().path.setAttribute("d",this.toString()),new sr(sh.nodes.path.getBBox())}move(e,t){const i=this.bbox();if(e-=i.x,t-=i.y,!isNaN(e)&&!isNaN(t))for(let n,a=this.length-1;a>=0;a--)n=this[a][0],n==="M"||n==="L"||n==="T"?(this[a][1]+=e,this[a][2]+=t):n==="H"?this[a][1]+=e:n==="V"?this[a][1]+=t:n==="C"||n==="S"||n==="Q"?(this[a][1]+=e,this[a][2]+=t,this[a][3]+=e,this[a][4]+=t,n==="C"&&(this[a][5]+=e,this[a][6]+=t)):n==="A"&&(this[a][6]+=e,this[a][7]+=t);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),(function(t,i=!0){let n=0,a="";const o={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:i,p0:new $n,p:new $n};for(;o.lastToken=a,a=t.charAt(n++);)if(o.inSegment||!lN(o,a))if(a!==".")if(isNaN(parseInt(a)))if(uN.has(a))o.inNumber&&Du(o,!1);else if(a!=="-"&&a!=="+")if(a.toUpperCase()!=="E"){if(pw.test(a)){if(o.inNumber)Du(o,!1);else{if(!Bv(o))throw new Error("parser Error");Nv(o)}--n}}else o.number+=a,o.hasExponent=!0;else{if(o.inNumber&&!hN(o)){Du(o,!1),--n;continue}o.number+=a,o.inNumber=!0}else{if(o.number==="0"||cN(o)){o.inNumber=!0,o.number=a,Du(o,!0);continue}o.inNumber=!0,o.number+=a}else{if(o.pointSeen||o.hasExponent){Du(o,!1),--n;continue}o.inNumber=!0,o.pointSeen=!0,o.number+=a}return o.inNumber&&Du(o,!1),o.inSegment&&Bv(o)&&Nv(o),o.segments})(e)}size(e,t){const i=this.bbox();let n,a;for(i.width=i.width===0?1:i.width,i.height=i.height===0?1:i.height,n=this.length-1;n>=0;n--)a=this[n][0],a==="M"||a==="L"||a==="T"?(this[n][1]=(this[n][1]-i.x)*e/i.width+i.x,this[n][2]=(this[n][2]-i.y)*t/i.height+i.y):a==="H"?this[n][1]=(this[n][1]-i.x)*e/i.width+i.x:a==="V"?this[n][1]=(this[n][1]-i.y)*t/i.height+i.y:a==="C"||a==="S"||a==="Q"?(this[n][1]=(this[n][1]-i.x)*e/i.width+i.x,this[n][2]=(this[n][2]-i.y)*t/i.height+i.y,this[n][3]=(this[n][3]-i.x)*e/i.width+i.x,this[n][4]=(this[n][4]-i.y)*t/i.height+i.y,a==="C"&&(this[n][5]=(this[n][5]-i.x)*e/i.width+i.x,this[n][6]=(this[n][6]-i.y)*t/i.height+i.y)):a==="A"&&(this[n][1]=this[n][1]*e/i.width,this[n][2]=this[n][2]*t/i.height,this[n][6]=(this[n][6]-i.x)*e/i.width+i.x,this[n][7]=(this[n][7]-i.y)*t/i.height+i.y);return this}toString(){return(function(e){let t="";for(let i=0,n=e.length;i<n;i++)t+=e[i][0],e[i][1]!=null&&(t+=e[i][1],e[i][2]!=null&&(t+=" ",t+=e[i][2],e[i][3]!=null&&(t+=" ",t+=e[i][3],t+=" ",t+=e[i][4],e[i][5]!=null&&(t+=" ",t+=e[i][5],t+=" ",t+=e[i][6],e[i][7]!=null&&(t+=" ",t+=e[i][7])))));return t+" "})(this)}}const lI=s=>{const e=typeof s;return e==="number"?Ki:e==="string"?sa.isColor(s)?sa:Oc.test(s)?pw.test(s)?xl:cd:YM.test(s)?Ki:jv:Vv.indexOf(s.constructor)>-1?s.constructor:Array.isArray(s)?cd:e==="object"?dm:jv};class Ru{constructor(e){this._stepper=e||new zv("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce((function(e,t){return e&&t}),!0)}from(e){return e==null?this._from:(this._from=this._set(e),this)}stepper(e){return e==null?this._stepper:(this._stepper=e,this)}to(e){return e==null?this._to:(this._to=this._set(e),this)}type(e){return e==null?this._type:(this._type=e,this)}_set(e){this._type||this.type(lI(e));let t=new this._type(e);return this._type===sa&&(t=this._to?t[this._to[4]]():this._from?t[this._from[4]]():t),this._type===dm&&(t=this._to?t.align(this._to):this._from?t.align(this._from):t),t=t.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(t.length)).map(Object).map((function(i){return i.done=!0,i})),t}}class jv{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class km{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,km.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}km.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const dN=(s,e)=>s[0]<e[0]?-1:s[0]>e[0]?1:0;class dm{constructor(...e){this.init(...e)}align(e){const t=this.values;for(let i=0,n=t.length;i<n;++i){if(t[i+1]===e[i+1]){if(t[i+1]===sa&&e[i+7]!==t[i+7]){const r=e[i+7],d=new sa(this.values.splice(i+3,5))[r]().toArray();this.values.splice(i+3,0,...d)}i+=t[i+2]+2;continue}if(!e[i+1])return this;const a=new e[i+1]().toArray(),o=t[i+2]+3;t.splice(i,o,e[i],e[i+1],e[i+2],...a),i+=t[i+2]+2}return this}init(e){if(this.values=[],Array.isArray(e))return void(this.values=e.slice());e=e||{};const t=[];for(const i in e){const n=lI(e[i]),a=new n(e[i]).toArray();t.push([i,n,a.length,...a])}return t.sort(dN),this.values=t.reduce(((i,n)=>i.concat(n)),[]),this}toArray(){return this.values}valueOf(){const e={},t=this.values;for(;t.length;){const i=t.shift(),n=t.shift(),a=t.shift(),o=t.splice(0,a);e[i]=new n(o)}return e}}const Vv=[jv,km,dm];class Of extends zo{constructor(e,t=e){super(da("path",e),t)}array(){return this._array||(this._array=new xl(this.attr("d")))}clear(){return delete this._array,this}height(e){return e==null?this.bbox().height:this.size(this.bbox().width,e)}move(e,t){return this.attr("d",this.array().move(e,t))}plot(e){return e==null?this.array():this.clear().attr("d",typeof e=="string"?e:this._array=new xl(e))}size(e,t){const i=Qf(this,e,t);return this.attr("d",this.array().size(i.width,i.height))}width(e){return e==null?this.bbox().width:this.size(e,this.bbox().height)}x(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}y(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}}Of.prototype.MorphArray=xl,ln({Container:{path:ua((function(s){return this.put(new Of).plot(s||new xl)}))}}),Pn(Of,"Path");var cI=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new Eh(this.attr("points")))},clear:function(){return delete this._array,this},move:function(s,e){return this.attr("points",this.array().move(s,e))},plot:function(s){return s==null?this.array():this.clear().attr("points",typeof s=="string"?s:this._array=new Eh(s))},size:function(s,e){const t=Qf(this,s,e);return this.attr("points",this.array().size(t.width,t.height))}});class ju extends zo{constructor(e,t=e){super(da("polygon",e),t)}}ln({Container:{polygon:ua((function(s){return this.put(new ju).plot(s||new Eh)}))}}),Ni(ju,xw),Ni(ju,cI),Pn(ju,"Polygon");class Vu extends zo{constructor(e,t=e){super(da("polyline",e),t)}}ln({Container:{polyline:ua((function(s){return this.put(new Vu).plot(s||new Eh)}))}}),Ni(Vu,xw),Ni(Vu,cI),Pn(Vu,"Polyline");class T_ extends zo{constructor(e,t=e){super(da("rect",e),t)}}Ni(T_,{rx:mw,ry:_w}),ln({Container:{rect:ua((function(s,e){return this.put(new T_).size(s,e)}))}}),Pn(T_,"Rect");class D1{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const t=e.next!==void 0?e:{value:e,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const ea={nextDraw:null,frames:new D1,timeouts:new D1,immediates:new D1,timer:()=>In.window.performance||In.window.Date,transforms:[],frame(s){const e=ea.frames.push({run:s});return ea.nextDraw===null&&(ea.nextDraw=In.window.requestAnimationFrame(ea._draw)),e},timeout(s,e){e=e||0;const t=ea.timer().now()+e,i=ea.timeouts.push({run:s,time:t});return ea.nextDraw===null&&(ea.nextDraw=In.window.requestAnimationFrame(ea._draw)),i},immediate(s){const e=ea.immediates.push(s);return ea.nextDraw===null&&(ea.nextDraw=In.window.requestAnimationFrame(ea._draw)),e},cancelFrame(s){s!=null&&ea.frames.remove(s)},clearTimeout(s){s!=null&&ea.timeouts.remove(s)},cancelImmediate(s){s!=null&&ea.immediates.remove(s)},_draw(s){let e=null;const t=ea.timeouts.last();for(;(e=ea.timeouts.shift())&&(s>=e.time?e.run():ea.timeouts.push(e),e!==t););let i=null;const n=ea.frames.last();for(;i!==n&&(i=ea.frames.shift());)i.run(s);let a=null;for(;a=ea.immediates.shift();)a();ea.nextDraw=ea.timeouts.first()||ea.frames.first()?In.window.requestAnimationFrame(ea._draw):null}},fN=function(s){const e=s.start,t=s.runner.duration();return{start:e,duration:t,end:e+t,runner:s.runner}},pN=function(){const s=In.window;return(s.performance||s.Date).now()};class hI extends Sm{constructor(e=pN){super(),this._timeSource=e,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),t=e?e.runner.duration():0;return(e?e.start:this._time)+t}getEndTimeOfTimeline(){const e=this._runners.map((t=>t.start+t.runner.duration()));return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return e==null?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const t=this.speed();if(e==null)return this.speed(-t);const i=Math.abs(t);return this.speed(e?-i:i)}schedule(e,t,i){if(e==null)return this._runners.map(fN);let n=0;const a=this.getEndTime();if(t=t||0,i==null||i==="last"||i==="after")n=a;else if(i==="absolute"||i==="start")n=t,t=0;else if(i==="now")n=this._time;else if(i==="relative"){const d=this.getRunnerInfoById(e.id);d&&(n=d.start+t,t=0)}else{if(i!=="with-last")throw new Error('Invalid value for the "when" parameter');{const d=this.getLastRunnerInfo();n=d?d.start:this._time}}e.unschedule(),e.timeline(this);const o=e.persist(),r={persist:o===null?this._persist:o,start:n+t,runner:e};return this._lastRunnerId=e.id,this._runners.push(r),this._runners.sort(((d,g)=>d.start-g.start)),this._runnerIds=this._runners.map((d=>d.runner.id)),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return e==null?this._timeSource:(this._timeSource=e,this)}speed(e){return e==null?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return e==null?this._time:(this._time=e,this._continue(!0))}unschedule(e){const t=this._runnerIds.indexOf(e.id);return t<0||(this._runners.splice(t,1),this._runnerIds.splice(t,1),e.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return ea.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():(this._paused||(this._nextFrame=ea.frame(this._step)),this)}_stepFn(e=!1){const t=this._timeSource();let i=t-this._lastSourceTime;e&&(i=0);const n=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=t,e||(this._time+=n,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const r=this._runners[o],d=r.runner;this._time-r.start<=0&&d.reset()}let a=!1;for(let o=0,r=this._runners.length;o<r;o++){const d=this._runners[o],g=d.runner;let x=n;const v=this._time-d.start;if(v<=0){a=!0;continue}v<x&&(x=v),g.active()&&(g.step(x).done?d.persist!==!0&&g.duration()-g.time()+this._time+d.persist<this._time&&(g.unschedule(),--o,--r):a=!0)}return a&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}ln({Element:{timeline:function(s){return s==null?(this._timeline=this._timeline||new hI,this._timeline):(this._timeline=s,this)}}});class Do extends Sm{constructor(e){super(),this.id=Do.id++,e=typeof(e=e??P1)=="function"?new tx(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof e=="number"&&e,this._isDeclarative=e instanceof tx,this._stepper=this._isDeclarative?e:new zv,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new Di,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(e,t,i){let n=1,a=!1,o=0;return t=t??eN,i=i||"last",typeof(e=e??P1)!="object"||e instanceof yw||(t=e.delay??t,i=e.when??i,a=e.swing||a,n=e.times??n,o=e.wait??o,e=e.duration??P1),{duration:e,delay:t,swing:a,times:n,wait:o,when:i}}active(e){return e==null?this.enabled:(this.enabled=e,this)}addTransform(e){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,t,i){const n=Do.sanitise(e,t,i),a=new Do(n.duration);return this._timeline&&a.timeline(this._timeline),this._element&&a.element(this._element),a.loop(n).schedule(n.delay,n.when)}clearTransform(){return this.transforms=new Di,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((e=>!e.isTransform)))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new zv(e),this}element(e){return e==null?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,t,i){return typeof e=="object"&&(t=e.swing,i=e.wait,e=e.times),this._times=e||1/0,this._swing=t||!1,this._wait=i||0,this._times===!0&&(this._times=1/0),this}loops(e){const t=this._duration+this._wait;if(e==null){const a=Math.floor(this._time/t),o=(this._time-a*t)/this._duration;return Math.min(a+o,this._times)}const i=e%1,n=t*Math.floor(e)+this._duration*i;return this.time(n)}persist(e){return e==null?this._persist:(this._persist=e,this)}position(e){const t=this._time,i=this._duration,n=this._wait,a=this._times,o=this._swing,r=this._reverse;let d;if(e==null){const v=function(E){const F=o*Math.floor(E%(2*(n+i))/(n+i)),O=F&&!r||!F&&r,N=Math.pow(-1,O)*(E%(n+i))/i+O;return Math.max(Math.min(N,1),0)},k=a*(n+i)-n;return d=t<=0?Math.round(v(1e-5)):t<k?v(t):Math.round(v(k-1e-5)),d}const g=Math.floor(this.loops()),x=o&&g%2==0;return d=g+(x&&!r||r&&x?e:1-e),this.loops(d)}progress(e){return e==null?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,t,i,n){return this._queue.push({initialiser:e||SA,runner:t||SA,retarget:i,isTransform:n,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,t,i){if(e instanceof hI||(i=t,t=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,t,i),this}step(e){if(!this.enabled)return this;e=e??16,this._time+=e;const t=this.position(),i=this._lastPosition!==t&&this._time>=0;this._lastPosition=t;const n=this.duration(),a=this._lastTime<=0&&this._time>0,o=this._lastTime<n&&this._time>=n;this._lastTime=this._time,a&&this.fire("start",this);const r=this._isDeclarative;this.done=!r&&!o&&this._time>=n,this._reseted=!1;let d=!1;return(i||r)&&(this._initialise(i),this.transforms=new Di,d=this._run(r?e:t),this.fire("step",this)),this.done=this.done||d&&r,o&&this.fire("finished",this),this}time(e){if(e==null)return this._time;const t=e-this._time;return this.step(t),this}timeline(e){return e===void 0?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(e||this._isDeclarative)for(let t=0,i=this._queue.length;t<i;++t){const n=this._queue[t],a=this._isDeclarative||!n.initialised&&e;e=!n.finished,a&&e&&(n.initialiser.call(this),n.initialised=!0)}}_rememberMorpher(e,t){if(this._history[e]={morpher:t,caller:this._queue[this._queue.length-1]},this._isDeclarative){const i=this.timeline();i&&i.play()}}_run(e){let t=!0;for(let i=0,n=this._queue.length;i<n;++i){const a=this._queue[i],o=a.runner.call(this,e);a.finished=a.finished||o===!0,t=t&&a.finished}return t}_tryRetarget(e,t,i){if(this._history[e]){if(!this._history[e].caller.initialised){const a=this._queue.indexOf(this._history[e].caller);return this._queue.splice(a,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,t,i):this._history[e].morpher.to(t),this._history[e].caller.finished=!1;const n=this.timeline();return n&&n.play(),!0}return!1}}Do.id=0;class ix{constructor(e=new Di,t=-1,i=!0){this.transforms=e,this.id=t,this.done=i}clearTransformsFromQueue(){}}Ni([Do,ix],{mergeWith(s){return new ix(s.transforms.lmultiply(this.transforms),s.id)}});const uI=(s,e)=>s.lmultiplyO(e),dI=s=>s.transforms;function gN(){const s=this._transformationRunners.runners.map(dI).reduce(uI,new Di);this.transform(s),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class mN{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const t=e.id+1;return this.runners.push(e),this.ids.push(t),this}clearBefore(e){const t=this.ids.indexOf(e+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new ix).forEach((i=>i.clearTransformsFromQueue())),this}edit(e,t){const i=this.ids.indexOf(e+1);return this.ids.splice(i,1,e+1),this.runners.splice(i,1,t),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){const i=this.runners[t];if(e&&i.done&&e.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))){this.remove(i.id);const n=i.mergeWith(e);this.edit(e.id,n),e=n,--t}else e=i}return this}remove(e){const t=this.ids.indexOf(e+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}ln({Element:{animate(s,e,t){const i=Do.sanitise(s,e,t),n=this.timeline();return new Do(i.duration).loop(i).element(this).timeline(n.play()).schedule(i.delay,i.when)},delay(s,e){return this.animate(0,s,e)},_clearTransformRunnersBefore(s){this._transformationRunners.clearBefore(s.id)},_currentTransform(s){return this._transformationRunners.runners.filter((e=>e.id<=s.id)).map(dI).reduce(uI,new Di)},_addRunner(s){this._transformationRunners.add(s),ea.cancelImmediate(this._frameId),this._frameId=ea.immediate(gN.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new mN().add(new ix(new Di(this))))}}});Ni(Do,{attr(s,e){return this.styleAttr("attr",s,e)},css(s,e){return this.styleAttr("css",s,e)},styleAttr(s,e,t){if(typeof e=="string")return this.styleAttr(s,{[e]:t});let i=e;if(this._tryRetarget(s,i))return this;let n=new Ru(this._stepper).to(i),a=Object.keys(i);return this.queue((function(){n=n.from(this.element()[s](a))}),(function(o){return this.element()[s](n.at(o).valueOf()),n.done()}),(function(o){const r=Object.keys(o),d=(g=a,r.filter((v=>!g.includes(v))));var g;if(d.length){const v=this.element()[s](d),k=new dm(n.from()).valueOf();Object.assign(k,v),n.from(k)}const x=new dm(n.to()).valueOf();Object.assign(x,o),n.to(x),a=r,i=o})),this._rememberMorpher(s,n),this},zoom(s,e){if(this._tryRetarget("zoom",s,e))return this;let t=new Ru(this._stepper).to(new Ki(s));return this.queue((function(){t=t.from(this.element().zoom())}),(function(i){return this.element().zoom(t.at(i),e),t.done()}),(function(i,n){e=n,t.to(i)})),this._rememberMorpher("zoom",t),this},transform(s,e,t){if(e=s.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",s))return this;const i=Di.isMatrixLike(s);t=s.affine!=null?s.affine:t??!i;const n=new Ru(this._stepper).type(t?km:Di);let a,o,r,d,g;return this.queue((function(){o=o||this.element(),a=a||Rv(s,o),g=new Di(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(x){e||this.clearTransform();const{x:v,y:k}=new $n(a).transform(o._currentTransform(this));let E=new Di({...s,origin:[v,k]}),F=this._isDeclarative&&r?r:g;if(t){E=E.decompose(v,k),F=F.decompose(v,k);const N=E.rotate,$=F.rotate,X=[N-360,N,N+360],K=X.map((le=>Math.abs(le-$))),ie=Math.min(...K),ee=K.indexOf(ie);E.rotate=X[ee]}e&&(i||(E.rotate=s.rotate||0),this._isDeclarative&&d&&(F.rotate=d)),n.from(F),n.to(E);const O=n.at(x);return d=O.rotate,r=new Di(O),this.addTransform(r),o._addRunner(this),n.done()}),(function(x){(x.origin||"center").toString()!==(s.origin||"center").toString()&&(a=Rv(x,o)),s={...x,origin:a}}),!0),this._isDeclarative&&this._rememberMorpher("transform",n),this},x(s){return this._queueNumber("x",s)},y(s){return this._queueNumber("y",s)},ax(s){return this._queueNumber("ax",s)},ay(s){return this._queueNumber("ay",s)},dx(s=0){return this._queueNumberDelta("x",s)},dy(s=0){return this._queueNumberDelta("y",s)},dmove(s,e){return this.dx(s).dy(e)},_queueNumberDelta(s,e){if(e=new Ki(e),this._tryRetarget(s,e))return this;const t=new Ru(this._stepper).to(e);let i=null;return this.queue((function(){i=this.element()[s](),t.from(i),t.to(i+e)}),(function(n){return this.element()[s](t.at(n)),t.done()}),(function(n){t.to(i+new Ki(n))})),this._rememberMorpher(s,t),this},_queueObject(s,e){if(this._tryRetarget(s,e))return this;const t=new Ru(this._stepper).to(e);return this.queue((function(){t.from(this.element()[s]())}),(function(i){return this.element()[s](t.at(i)),t.done()})),this._rememberMorpher(s,t),this},_queueNumber(s,e){return this._queueObject(s,new Ki(e))},cx(s){return this._queueNumber("cx",s)},cy(s){return this._queueNumber("cy",s)},move(s,e){return this.x(s).y(e)},amove(s,e){return this.ax(s).ay(e)},center(s,e){return this.cx(s).cy(e)},size(s,e){let t;return s&&e||(t=this._element.bbox()),s||(s=t.width/t.height*e),e||(e=t.height/t.width*s),this.width(s).height(e)},width(s){return this._queueNumber("width",s)},height(s){return this._queueNumber("height",s)},plot(s,e,t,i){if(arguments.length===4)return this.plot([s,e,t,i]);if(this._tryRetarget("plot",s))return this;const n=new Ru(this._stepper).type(this._element.MorphArray).to(s);return this.queue((function(){n.from(this._element.array())}),(function(a){return this._element.plot(n.at(a)),n.done()})),this._rememberMorpher("plot",n),this},leading(s){return this._queueNumber("leading",s)},viewbox(s,e,t,i){return this._queueObject("viewbox",new sr(s,e,t,i))},update(s){return typeof s!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(s.opacity!=null&&this.attr("stop-opacity",s.opacity),s.color!=null&&this.attr("stop-color",s.color),s.offset!=null&&this.attr("offset",s.offset),this)}}),Ni(Do,{rx:mw,ry:_w,from:sI,to:oI}),Pn(Do,"Runner");class Hv extends Ws{constructor(e,t=e){super(da("svg",e),t),this.namespace()}defs(){return this.isRoot()?Yo(this.node.querySelector("defs"))||this.put(new Mx):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof In.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:uw,version:"1.1"}).attr("xmlns:xlink",Jf,E1):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,E1).attr("xmlns:svgjs",null,E1)}root(){return this.isRoot()?this:super.root()}}ln({Container:{nested:ua((function(){return this.put(new Hv)}))}}),Pn(Hv,"Svg",!0);let Uv=class extends Ws{constructor(s,e=s){super(da("symbol",s),e)}};ln({Container:{symbol:ua((function(){return this.put(new Uv)}))}}),Pn(Uv,"Symbol");var fI=Object.freeze({__proto__:null,amove:function(s,e){return this.ax(s).ay(e)},ax:function(s){return this.attr("x",s)},ay:function(s){return this.attr("y",s)},build:function(s){return this._build=!!s,this},center:function(s,e,t=this.bbox()){return this.cx(s,t).cy(e,t)},cx:function(s,e=this.bbox()){return s==null?e.cx:this.attr("x",this.attr("x")+s-e.cx)},cy:function(s,e=this.bbox()){return s==null?e.cy:this.attr("y",this.attr("y")+s-e.cy)},length:function(){return this.node.getComputedTextLength()},move:function(s,e,t=this.bbox()){return this.x(s,t).y(e,t)},plain:function(s){return this._build===!1&&this.clear(),this.node.appendChild(In.document.createTextNode(s)),this},x:function(s,e=this.bbox()){return s==null?e.x:this.attr("x",this.attr("x")+s-e.x)},y:function(s,e=this.bbox()){return s==null?e.y:this.attr("y",this.attr("y")+s-e.y)}});class yl extends zo{constructor(e,t=e){super(da("text",e),t),this.dom.leading=this.dom.leading??new Ki(1.3),this._rebuild=!0,this._build=!1}leading(e){return e==null?this.dom.leading:(this.dom.leading=new Ki(e),this.rebuild())}rebuild(e){if(typeof e=="boolean"&&(this._rebuild=e),this._rebuild){const t=this;let i=0;const n=this.dom.leading;this.each((function(a){if(Ov(this.node))return;const o=In.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=n*new Ki(o);this.dom.newLined&&(this.attr("x",t.attr("x")),this.text()===`
`?i+=r:(this.attr("dy",a?r+i:0),i=0))})),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new Ki(e.leading||1.3),this}writeDataToDom(){return WM(this,this.dom,{leading:1.3}),this}text(e){if(e===void 0){const t=this.node.childNodes;let i=0;e="";for(let n=0,a=t.length;n<a;++n)t[n].nodeName==="textPath"||Ov(t[n])?n===0&&(i=n+1):(n!==i&&t[n].nodeType!==3&&Yo(t[n]).dom.newLined===!0&&(e+=`
`),e+=t[n].textContent);return e}if(this.clear().build(!0),typeof e=="function")e.call(this,this);else for(let t=0,i=(e=(e+"").split(`
`)).length;t<i;t++)this.newLine(e[t]);return this.build(!1).rebuild()}}Ni(yl,fI),ln({Container:{text:ua((function(s=""){return this.put(new yl).text(s)})),plain:ua((function(s=""){return this.put(new yl).plain(s)}))}}),Pn(yl,"Text");class E_ extends zo{constructor(e,t=e){super(da("tspan",e),t),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof yl))return this;const t=e.index(this),i=In.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=e.dom.leading*new Ki(i);return this.dy(t?n:0).attr("x",e.x())}text(e){return e==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof e=="function"?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}Ni(E_,fI),ln({Tspan:{tspan:ua((function(s=""){const e=new E_;return this._build||this.clear(),this.put(e).text(s)}))},Text:{newLine:function(s=""){return this.tspan(s).newLine()}}}),Pn(E_,"Tspan");class R1 extends zo{constructor(e,t=e){super(da("circle",e),t)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new Ki(e).divide(2))}}Ni(R1,{x:JM,y:eI,cx:tI,cy:iI,width:nI,height:aI}),ln({Container:{circle:ua((function(s=0){return this.put(new R1).size(s).move(0,0)}))}}),Pn(R1,"Circle");class O1 extends Ws{constructor(e,t=e){super(da("clipPath",e),t)}remove(){return this.targets().forEach((function(e){e.unclip()})),super.remove()}targets(){return fd("svg [clip-path*="+this.id()+"]")}}ln({Container:{clip:ua((function(){return this.defs().put(new O1)}))},Element:{clipper(){return this.reference("clip-path")},clipWith(s){const e=s instanceof O1?s:this.parent().clip().add(s);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}}),Pn(O1,"ClipPath");class AA extends hs{constructor(e,t=e){super(da("foreignObject",e),t)}}ln({Container:{foreignObject:ua((function(s,e){return this.put(new AA).size(s,e)}))}}),Pn(AA,"ForeignObject");var pI=Object.freeze({__proto__:null,dmove:function(s,e){return this.children().forEach((t=>{let i;try{i=t.node instanceof wm().SVGSVGElement?new sr(t.attr(["x","y","width","height"])):t.bbox()}catch{return}const n=new Di(t),a=n.translate(s,e).transform(n.inverse()),o=new $n(i.x,i.y).transform(a);t.move(o.x,o.y)})),this},dx:function(s){return this.dmove(s,0)},dy:function(s){return this.dmove(0,s)},height:function(s,e=this.bbox()){return s==null?e.height:this.size(e.width,s,e)},move:function(s=0,e=0,t=this.bbox()){const i=s-t.x,n=e-t.y;return this.dmove(i,n)},size:function(s,e,t=this.bbox()){const i=Qf(this,s,e,t),n=i.width/t.width,a=i.height/t.height;return this.children().forEach((o=>{const r=new $n(t).transform(new Di(o).inverse());o.scale(n,a,r.x,r.y)})),this},width:function(s,e=this.bbox()){return s==null?e.width:this.size(s,e.height,e)},x:function(s,e=this.bbox()){return s==null?e.x:this.move(s,e.y,e)},y:function(s,e=this.bbox()){return s==null?e.y:this.move(e.x,s,e)}});class vh extends Ws{constructor(e,t=e){super(da("g",e),t)}}Ni(vh,pI),ln({Container:{group:ua((function(){return this.put(new vh)}))}}),Pn(vh,"G");class r_ extends Ws{constructor(e,t=e){super(da("a",e),t)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,Jf)}}Ni(r_,pI),ln({Container:{link:ua((function(s){return this.put(new r_).to(s)}))},Element:{unlink(){const s=this.linker();if(!s)return this;const e=s.parent();if(!e)return this.remove();const t=e.index(s);return e.add(this,t),s.remove(),this},linkTo(s){let e=this.linker();return e||(e=new r_,this.wrap(e)),typeof s=="function"?s.call(e,e):e.to(s),this},linker(){const s=this.parent();return s&&s.node.nodeName.toLowerCase()==="a"?s:null}}}),Pn(r_,"A");class z1 extends Ws{constructor(e,t=e){super(da("mask",e),t)}remove(){return this.targets().forEach((function(e){e.unmask()})),super.remove()}targets(){return fd("svg [mask*="+this.id()+"]")}}ln({Container:{mask:ua((function(){return this.defs().put(new z1)}))},Element:{masker(){return this.reference("mask")},maskWith(s){const e=s instanceof z1?s:this.parent().mask().add(s);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}}),Pn(z1,"Mask");class TA extends hs{constructor(e,t=e){super(da("stop",e),t)}update(e){return(typeof e=="number"||e instanceof Ki)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new Ki(e.offset)),this}}ln({Gradient:{stop:function(s,e,t){return this.put(new TA).update(s,e,t)}}}),Pn(TA,"Stop");class F1 extends hs{constructor(e,t=e){super(da("style",e),t)}addText(e=""){return this.node.textContent+=e,this}font(e,t,i={}){return this.rule("@font-face",{fontFamily:e,src:t,...i})}rule(e,t){return this.addText((function(i,n){if(!i)return"";if(!n)return i;let a=i+"{";for(const o in n)a+=o.replace(/([A-Z])/g,(function(r,d){return"-"+d.toLowerCase()}))+":"+n[o]+";";return a+="}",a})(e,t))}}ln("Dom",{style(s,e){return this.put(new F1).rule(s,e)},fontface(s,e,t){return this.put(new F1).font(s,e,t)}}),Pn(F1,"Style");class B1 extends yl{constructor(e,t=e){super(da("textPath",e),t)}array(){const e=this.track();return e?e.array():null}plot(e){const t=this.track();let i=null;return t&&(i=t.plot(e)),e==null?i:this}track(){return this.reference("href")}}ln({Container:{textPath:ua((function(s,e){return s instanceof yl||(s=this.text(s)),s.path(e)}))},Text:{path:ua((function(s,e=!0){const t=new B1;let i;if(s instanceof Of||(s=this.defs().path(s)),t.attr("href","#"+s,Jf),e)for(;i=this.node.firstChild;)t.node.appendChild(i);return this.put(t)})),textPath(){return this.findOne("textPath")}},Path:{text:ua((function(s){return s instanceof yl||(s=new yl().addTo(this.parent()).text(s)),s.path(this)})),targets(){return fd("svg textPath").filter((s=>(s.attr("href")||"").includes(this.id())))}}}),B1.prototype.MorphArray=xl,Pn(B1,"TextPath");class EA extends zo{constructor(e,t=e){super(da("use",e),t)}use(e,t){return this.attr("href",(t||"")+"#"+e,Jf)}}ln({Container:{use:ua((function(s,e){return this.put(new EA).use(s,e)}))}}),Pn(EA,"Use");const _N=Us;Ni([Hv,Uv,C_,um,A_],eo("viewbox")),Ni([Nu,Vu,ju,Of],eo("marker")),Ni(yl,eo("Text")),Ni(Of,eo("Path")),Ni(Mx,eo("Defs")),Ni([yl,E_],eo("Tspan")),Ni([T_,k_,Gg,Do],eo("radius")),Ni(Sm,eo("EventTarget")),Ni(Th,eo("Dom")),Ni(hs,eo("Element")),Ni(zo,eo("Shape")),Ni([Ws,rI],eo("Container")),Ni(Gg,eo("Gradient")),Ni(Do,eo("Runner")),ld.extend([...new Set(UM)]),(function(s=[]){Vv.push(...[].concat(s))})([Ki,sa,sr,Di,cd,Eh,xl,$n]),Ni(Vv,{to(s){return new Ru().type(this.constructor).from(this.toArray()).to(s)},fromArray(s){return this.init(s),this},toConsumable(){return this.toArray()},morph(s,e,t,i,n){return this.fromArray(s.map((function(a,o){return i.step(a,e[o],t,n[o],n)})))}});class Ta extends hs{constructor(e){super(da("filter",e),e),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(e,t){return!(e=super.put(e,t)).attr("in")&&this.$autoSetIn&&e.attr("in",this.$source),e.attr("result")||e.attr("result",e.id()),e}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return fd('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class vw extends hs{constructor(e,t){super(e,t),this.result(this.id())}in(e){if(e==null){const t=this.attr("in");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in",e)}result(e){return this.attr("result",e)}toString(){return this.result()}}const $o=s=>function(...e){for(let t=s.length;t--;)e[t]!=null&&this.attr(s[t],e[t])},xN={blend:$o(["in","in2","mode"]),colorMatrix:$o(["type","values"]),composite:$o(["in","in2","operator"]),convolveMatrix:function(s){s=new cd(s).toString(),this.attr({order:Math.sqrt(s.split(" ").length),kernelMatrix:s})},diffuseLighting:$o(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:$o(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:$o(["in","dx","dy","stdDeviation"]),flood:$o(["flood-color","flood-opacity"]),gaussianBlur:function(s=0,e=s){this.attr("stdDeviation",s+" "+e)},image:function(s){this.attr("href",s,Jf)},morphology:$o(["operator","radius"]),offset:$o(["dx","dy"]),specularLighting:$o(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:$o([]),turbulence:$o(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach((s=>{const e=Kf(s),t=xN[s];Ta[e+"Effect"]=class extends vw{constructor(i){super(da("fe"+e,i),i)}update(i){return t.apply(this,i),this}},Ta.prototype[s]=ua((function(i,...n){const a=new Ta[e+"Effect"];return i==null?this.put(a):(typeof i=="function"?i.call(a,a):n.unshift(i),this.put(a).update(n))}))})),Ni(Ta,{merge(s){const e=this.put(new Ta.MergeEffect);return typeof s=="function"?(s.call(e,e),e):((s instanceof Array?s:[...arguments]).forEach((t=>{t instanceof Ta.MergeNode?e.put(t):e.mergeNode(t)})),e)},componentTransfer(s={}){const e=this.put(new Ta.ComponentTransferEffect);if(typeof s=="function")return s.call(e,e),e;s.r||s.g||s.b||s.a||(s={r:s,g:s,b:s,a:s});for(const t in s)e.add(new Ta["Func"+t.toUpperCase()](s[t]));return e}});["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach((s=>{const e=Kf(s);Ta[e]=class extends vw{constructor(t){super(da("fe"+e,t),t)}}}));["funcR","funcG","funcB","funcA"].forEach((function(s){const e=Ta[Kf(s)],t=ua((function(){return this.put(new e)}));Ta.ComponentTransferEffect.prototype[s]=t}));["distantLight","pointLight","spotLight"].forEach((s=>{const e=Ta[Kf(s)],t=ua((function(){return this.put(new e)}));Ta.DiffuseLightingEffect.prototype[s]=t,Ta.SpecularLightingEffect.prototype[s]=t})),Ni(Ta.MergeEffect,{mergeNode(s){return this.put(new Ta.MergeNode).attr("in",s)}}),Ni(Mx,{filter:function(s){const e=this.put(new Ta);return typeof s=="function"&&s.call(e,e),e}}),Ni(Ws,{filter:function(s){return this.defs().filter(s)}}),Ni(hs,{filterWith:function(s){const e=s instanceof Ta?s:this.defs().filter(s);return this.attr("filter",e)},unfilter:function(s){return this.attr("filter",null)},filterer(){return this.reference("filter")}});const yN={blend:function(s,e){return this.parent()&&this.parent().blend(this,s,e)},colorMatrix:function(s,e){return this.parent()&&this.parent().colorMatrix(s,e).in(this)},componentTransfer:function(s){return this.parent()&&this.parent().componentTransfer(s).in(this)},composite:function(s,e){return this.parent()&&this.parent().composite(this,s,e)},convolveMatrix:function(s){return this.parent()&&this.parent().convolveMatrix(s).in(this)},diffuseLighting:function(s,e,t,i){return this.parent()&&this.parent().diffuseLighting(s,t,i).in(this)},displacementMap:function(s,e,t,i){return this.parent()&&this.parent().displacementMap(this,s,e,t,i)},dropShadow:function(s,e,t){return this.parent()&&this.parent().dropShadow(this,s,e,t).in(this)},flood:function(s,e){return this.parent()&&this.parent().flood(s,e)},gaussianBlur:function(s,e){return this.parent()&&this.parent().gaussianBlur(s,e).in(this)},image:function(s){return this.parent()&&this.parent().image(s)},merge:function(s){return s=s instanceof Array?s:[...s],this.parent()&&this.parent().merge(this,...s)},morphology:function(s,e){return this.parent()&&this.parent().morphology(s,e).in(this)},offset:function(s,e){return this.parent()&&this.parent().offset(s,e).in(this)},specularLighting:function(s,e,t,i,n){return this.parent()&&this.parent().specularLighting(s,t,i,n).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(s,e,t,i,n){return this.parent()&&this.parent().turbulence(s,e,t,i,n).in(this)}};Ni(vw,yN),Ni(Ta.MergeEffect,{in:function(s){return s instanceof Ta.MergeNode?this.add(s,0):this.add(new Ta.MergeNode().in(s),0),this}}),Ni([Ta.CompositeEffect,Ta.BlendEffect,Ta.DisplacementMapEffect],{in2:function(s){if(s==null){const e=this.attr("in2");return this.parent()&&this.parent().find(`[result="${e}"]`)[0]||e}return this.attr("in2",s)}}),Ta.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var ls=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"getDefaultFilter",value:function(e,t){var i=this.w;e.unfilter(!0),new Ta().size("120%","180%","-5%","-40%"),i.config.chart.dropShadow.enabled&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"applyFilter",value:function(e,t,i){var n,a=this,o=this.w;if(e.unfilter(!0),i!=="none"){var r,d,g=o.config.chart.dropShadow,x=i==="lighten"?2:.3;e.filterWith((function(v){v.colorMatrix({type:"matrix",values:`
          `.concat(x,` 0 0 0 0
          0 `).concat(x,` 0 0 0
          0 0 `).concat(x,` 0 0
          0 0 0 1 0
        `),in:"SourceGraphic",result:"brightness"}),g.enabled&&a.addShadow(v,t,g,"brightness")})),!g.noUserSpaceOnUse&&((r=e.filterer())===null||r===void 0||(d=r.node)===null||d===void 0||d.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize((n=e.filterer())===null||n===void 0?void 0:n.node)}else this.getDefaultFilter(e,t)}},{key:"addShadow",value:function(e,t,i,n){var a,o=this.w,r=i.blur,d=i.top,g=i.left,x=i.color,v=i.opacity;if(x=Array.isArray(x)?x[t]:x,((a=o.config.chart.dropShadow.enabledOnSeries)===null||a===void 0?void 0:a.length)>0&&o.config.chart.dropShadow.enabledOnSeries.indexOf(t)===-1)return e;e.offset({in:n,dx:g,dy:d,result:"offset"}),e.gaussianBlur({in:"offset",stdDeviation:r,result:"blur"}),e.flood({"flood-color":x,"flood-opacity":v,result:"flood"}),e.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),e.merge(["shadow",n])}},{key:"dropShadow",value:function(e,t){var i,n,a,o,r,d=this,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=this.w;return e.unfilter(!0),Je.isMsEdge()&&x.config.chart.type==="radialBar"||((i=x.config.chart.dropShadow.enabledOnSeries)===null||i===void 0?void 0:i.length)>0&&((a=x.config.chart.dropShadow.enabledOnSeries)===null||a===void 0?void 0:a.indexOf(g))===-1?e:(e.filterWith((function(v){d.addShadow(v,g,t,"SourceGraphic")})),t.noUserSpaceOnUse||(o=e.filterer())===null||o===void 0||(r=o.node)===null||r===void 0||r.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize((n=e.filterer())===null||n===void 0?void 0:n.node),e)}},{key:"setSelectionFilter",value:function(e,t,i){var n=this.w;if(n.globals.selectedDataPoints[t]!==void 0&&n.globals.selectedDataPoints[t].indexOf(i)>-1){e.node.setAttribute("selected",!0);var a=n.config.states.active.filter;a!=="none"&&this.applyFilter(e,t,a.type)}}},{key:"_scaleFilterSize",value:function(e){e&&(function(t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])})({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),s})(),Lt=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"roundPathCorners",value:function(e,t){function i(he,de,ke){var De=de.x-he.x,Ae=de.y-he.y,$e=Math.sqrt(De*De+Ae*Ae);return n(he,de,Math.min(1,ke/$e))}function n(he,de,ke){return{x:he.x+(de.x-he.x)*ke,y:he.y+(de.y-he.y)*ke}}function a(he,de){he.length>2&&(he[he.length-2]=de.x,he[he.length-1]=de.y)}function o(he){return{x:parseFloat(he[he.length-2]),y:parseFloat(he[he.length-1])}}e.indexOf("NaN")>-1&&(e="");var r=e.split(/[,\s]/).reduce((function(he,de){var ke=de.match(/^([a-zA-Z])(.+)/);return ke?(he.push(ke[1]),he.push(ke[2])):he.push(de),he}),[]).reduce((function(he,de){return parseFloat(de)==de&&he.length?he[he.length-1].push(de):he.push([de]),he}),[]),d=[];if(r.length>1){var g=o(r[0]),x=null;r[r.length-1][0]=="Z"&&r[0].length>2&&(x=["L",g.x,g.y],r[r.length-1]=x),d.push(r[0]);for(var v=1;v<r.length;v++){var k=d[d.length-1],E=r[v],F=E==x?r[1]:r[v+1];if(F&&k&&k.length>2&&E[0]=="L"&&F.length>2&&F[0]=="L"){var O,N,$=o(k),X=o(E),K=o(F);O=i(X,$,t),N=i(X,K,t),a(E,O),E.origPoint=X,d.push(E);var ie=n(O,X,.5),ee=n(X,N,.5),le=["C",ie.x,ie.y,ee.x,ee.y,N.x,N.y];le.origPoint=X,d.push(le)}else d.push(E)}if(x){var te=o(d[d.length-1]);d.push(["Z"]),a(d[0],te)}}else d=r;return d.reduce((function(he,de){return he+de.join(" ")+" "}),"")}},{key:"drawLine",value:function(e,t,i,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:i,y2:n,stroke:a,"stroke-dasharray":o,"stroke-width":r,"stroke-linecap":d})}},{key:"drawRect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,g=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,x=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,v=this.w.globals.dom.Paper.rect();return v.attr({x:e,y:t,width:i>0?i:0,height:n>0?n:0,rx:a,ry:a,opacity:r,"stroke-width":d!==null?d:0,stroke:g!==null?g:"none","stroke-dasharray":x}),v.node.setAttribute("fill",o),v}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:n,stroke:t,"stroke-width":i})}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e<0&&(e=0);var i=this.w.globals.dom.Paper.circle(2*e);return t!==null&&i.attr(t),i}},{key:"drawPath",value:function(e){var t=e.d,i=t===void 0?"":t,n=e.stroke,a=n===void 0?"#a8a8a8":n,o=e.strokeWidth,r=o===void 0?1:o,d=e.fill,g=e.fillOpacity,x=g===void 0?1:g,v=e.strokeOpacity,k=v===void 0?1:v,E=e.classes,F=e.strokeLinecap,O=F===void 0?null:F,N=e.strokeDashArray,$=N===void 0?0:N,X=this.w;return O===null&&(O=X.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(X.globals.gridHeight)),X.globals.dom.Paper.path(i).attr({fill:d,"fill-opacity":x,stroke:a,"stroke-opacity":k,"stroke-linecap":O,"stroke-width":r,"stroke-dasharray":$,class:E})}},{key:"group",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w.globals.dom.Paper.group();return e!==null&&t.attr(e),t}},{key:"move",value:function(e,t){var i=["M",e,t].join(" ");return i}},{key:"line",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=null;return i===null?n=[" L",e,t].join(" "):i==="H"?n=[" H",e].join(" "):i==="V"&&(n=[" V",t].join(" ")),n}},{key:"curve",value:function(e,t,i,n,a,o){var r=["C",e,t,i,n,a,o].join(" ");return r}},{key:"quadraticCurve",value:function(e,t,i,n){return["Q",e,t,i,n].join(" ")}},{key:"arc",value:function(e,t,i,n,a,o,r){var d="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(d="a");var g=[d,e,t,i,n,a,o,r].join(" ");return g}},{key:"renderPaths",value:function(e){var t,i=e.j,n=e.realIndex,a=e.pathFrom,o=e.pathTo,r=e.stroke,d=e.strokeWidth,g=e.strokeLinecap,x=e.fill,v=e.animationDelay,k=e.initialSpeed,E=e.dataChangeSpeed,F=e.className,O=e.chartType,N=e.shouldClipToGrid,$=N===void 0||N,X=e.bindEventsOnPaths,K=X===void 0||X,ie=e.drawShadow,ee=ie===void 0||ie,le=this.w,te=new ls(this.ctx),he=new Zf(this.ctx),de=this.w.config.chart.animations.enabled,ke=de&&this.w.config.chart.animations.dynamicAnimation.enabled;if(a&&a.startsWith("M 0 0")&&o){var De=o.match(/^M\s+[\d.-]+\s+[\d.-]+/);De&&(a=a.replace(/^M\s+0\s+0/,De[0]))}var Ae=!!(de&&!le.globals.resized||ke&&le.globals.dataChanged&&le.globals.shouldAnimate);Ae?t=a:(t=o,le.globals.animationEnded=!0);var $e=le.config.stroke.dashArray,et=0;et=Array.isArray($e)?$e[n]:le.config.stroke.dashArray;var Ie=this.drawPath({d:t,stroke:r,strokeWidth:d,fill:x,fillOpacity:1,classes:F,strokeLinecap:g,strokeDashArray:et});Ie.attr("index",n),$&&(O==="bar"&&!le.globals.isHorizontal||le.globals.comboCharts?Ie.attr({"clip-path":"url(#gridRectBarMask".concat(le.globals.cuid,")")}):Ie.attr({"clip-path":"url(#gridRectMask".concat(le.globals.cuid,")")})),le.config.chart.dropShadow.enabled&&ee&&te.dropShadow(Ie,le.config.chart.dropShadow,n),K&&(Ie.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,Ie)),Ie.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,Ie)),Ie.node.addEventListener("mousedown",this.pathMouseDown.bind(this,Ie))),Ie.attr({pathTo:o,pathFrom:a});var at={el:Ie,j:i,realIndex:n,pathFrom:a,pathTo:o,fill:x,strokeWidth:d,delay:v};return!de||le.globals.resized||le.globals.dataChanged?!le.globals.resized&&le.globals.dataChanged||he.showDelayedElements():he.animatePathsGradually(Xt(Xt({},at),{},{speed:k})),le.globals.dataChanged&&ke&&Ae&&he.animatePathsGradually(Xt(Xt({},at),{},{speed:E})),Ie}},{key:"drawPattern",value:function(e,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(t,i,(function(o){e==="horizontalLines"?o.line(0,0,i,0).stroke({color:n,width:a+1}):e==="verticalLines"?o.line(0,0,0,t).stroke({color:n,width:a+1}):e==="slantedLines"?o.line(0,0,t,i).stroke({color:n,width:a}):e==="squares"?o.rect(t,i).fill("none").stroke({color:n,width:a}):e==="circles"&&o.circle(t).fill("none").stroke({color:n,width:a})}))}},{key:"drawGradient",value:function(e,t,i,n,a){var o,r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],x=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,v=this.w;t.length<9&&t.indexOf("#")===0&&(t=Je.hexToRgba(t,n)),i.length<9&&i.indexOf("#")===0&&(i=Je.hexToRgba(i,a));var k=0,E=1,F=1,O=null;d!==null&&(k=d[0]!==void 0?d[0]/100:0,E=d[1]!==void 0?d[1]/100:1,F=d[2]!==void 0?d[2]/100:1,O=d[3]!==void 0?d[3]/100:null);var N=!(v.config.chart.type!=="donut"&&v.config.chart.type!=="pie"&&v.config.chart.type!=="polarArea"&&v.config.chart.type!=="bubble");if(o=g&&g.length!==0?v.globals.dom.Paper.gradient(N?"radial":"linear",(function(K){(Array.isArray(g[x])?g[x]:g).forEach((function(ie){K.stop(ie.offset/100,ie.color,ie.opacity)}))})):v.globals.dom.Paper.gradient(N?"radial":"linear",(function(K){K.stop(k,t,n),K.stop(E,i,a),K.stop(F,i,a),O!==null&&K.stop(O,t,n)})),N){var $=v.globals.gridWidth/2,X=v.globals.gridHeight/2;v.config.chart.type!=="bubble"?o.attr({gradientUnits:"userSpaceOnUse",cx:$,cy:X,r}):o.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else e==="vertical"?o.from(0,0).to(0,1):e==="diagonal"?o.from(0,0).to(1,1):e==="horizontal"?o.from(0,1).to(1,1):e==="diagonal2"&&o.from(1,0).to(0,1);return o}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,i=e.maxWidth,n=e.fontSize,a=e.fontFamily,o=this.getTextRects(t,n,a),r=o.width/t.length,d=Math.floor(i/r);return i<o.width?t.slice(0,d-3)+"...":t}},{key:"drawText",value:function(e){var t=this,i=e.x,n=e.y,a=e.text,o=e.textAnchor,r=e.fontSize,d=e.fontFamily,g=e.fontWeight,x=e.foreColor,v=e.opacity,k=e.maxWidth,E=e.cssClass,F=E===void 0?"":E,O=e.isPlainText,N=O===void 0||O,$=e.dominantBaseline,X=$===void 0?"auto":$,K=this.w;a===void 0&&(a="");var ie=a;o||(o="start"),x&&x.length||(x=K.config.chart.foreColor),d=d||K.config.chart.fontFamily,g=g||"regular";var ee,le={maxWidth:k,fontSize:r=r||"11px",fontFamily:d};return Array.isArray(a)?ee=K.globals.dom.Paper.text((function(te){for(var he=0;he<a.length;he++)ie=a[he],k&&(ie=t.getTextBasedOnMaxWidth(Xt({text:a[he]},le))),he===0?te.tspan(ie):te.tspan(ie).newLine()})):(k&&(ie=this.getTextBasedOnMaxWidth(Xt({text:a},le))),ee=N?K.globals.dom.Paper.plain(a):K.globals.dom.Paper.text((function(te){return te.tspan(ie)}))),ee.attr({x:i,y:n,"text-anchor":o,"dominant-baseline":X,"font-size":r,"font-family":d,"font-weight":g,fill:x,class:"apexcharts-text "+F}),ee.node.style.fontFamily=d,ee.node.style.opacity=v,ee}},{key:"getMarkerPath",value:function(e,t,i,n){var a="";switch(i){case"cross":a="M ".concat(e-(n/=1.4)," ").concat(t-n," L ").concat(e+n," ").concat(t+n,"  M ").concat(e-n," ").concat(t+n," L ").concat(e+n," ").concat(t-n);break;case"plus":a="M ".concat(e-(n/=1.12)," ").concat(t," L ").concat(e+n," ").concat(t,"  M ").concat(e," ").concat(t-n," L ").concat(e," ").concat(t+n);break;case"star":case"sparkle":var o=5;n*=1.15,i==="sparkle"&&(n/=1.1,o=4);for(var r=Math.PI/o,d=0;d<=2*o;d++){var g=d*r,x=d%2==0?n:n/2;a+=(d===0?"M":"L")+(e+x*Math.sin(g))+","+(t-x*Math.cos(g))}a+="Z";break;case"triangle":a="M ".concat(e," ").concat(t-n,` 
             L `).concat(e+n," ").concat(t+n,` 
             L `).concat(e-n," ").concat(t+n,` 
             Z`);break;case"square":case"rect":a="M ".concat(e-(n/=1.125)," ").concat(t-n,` 
           L `).concat(e+n," ").concat(t-n,` 
           L `).concat(e+n," ").concat(t+n,` 
           L `).concat(e-n," ").concat(t+n,` 
           Z`);break;case"diamond":n*=1.05,a="M ".concat(e," ").concat(t-n,` 
             L `).concat(e+n," ").concat(t,` 
             L `).concat(e," ").concat(t+n,` 
             L `).concat(e-n," ").concat(t,` 
            Z`);break;case"line":a="M ".concat(e-(n/=1.1)," ").concat(t,` 
           L `).concat(e+n," ").concat(t);break;default:n*=2,a="M ".concat(e,", ").concat(t,` 
           m -`).concat(n/2,`, 0 
           a `).concat(n/2,",").concat(n/2," 0 1,0 ").concat(n,`,0 
           a `).concat(n/2,",").concat(n/2," 0 1,0 -").concat(n,",0")}return a}},{key:"drawMarkerShape",value:function(e,t,i,n,a){var o=this.drawPath({d:this.getMarkerPath(e,t,i,n,a),stroke:a.pointStrokeColor,strokeDashArray:a.pointStrokeDashArray,strokeWidth:a.pointStrokeWidth,fill:a.pointFillColor,fillOpacity:a.pointFillOpacity,strokeOpacity:a.pointStrokeOpacity});return o.attr({cx:e,cy:t,shape:a.shape,class:a.class?a.class:""}),o}},{key:"drawMarker",value:function(e,t,i){e=e||0;var n=i.pSize||0;return Je.isNumber(t)||(n=0,t=0),this.drawMarkerShape(e,t,i?.shape,n,Xt(Xt({},i),i.shape==="line"||i.shape==="plus"||i.shape==="cross"?{pointStrokeColor:i.pointFillColor,pointStrokeOpacity:i.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(e,t){var i=this.w,n=new ls(this.ctx),a=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10);if(typeof i.config.chart.events.dataPointMouseEnter=="function"&&i.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:a,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:a,dataPointIndex:o,w:i}]),(i.config.states.active.filter.type==="none"||e.node.getAttribute("selected")!=="true")&&i.config.states.hover.filter.type!=="none"&&!i.globals.isTouchDevice){var r=i.config.states.hover.filter;n.applyFilter(e,a,r.type)}}},{key:"pathMouseLeave",value:function(e,t){var i=this.w,n=new ls(this.ctx),a=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10);typeof i.config.chart.events.dataPointMouseLeave=="function"&&i.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:a,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:a,dataPointIndex:o,w:i}]),i.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true"||i.config.states.hover.filter.type!=="none"&&n.getDefaultFilter(e,a)}},{key:"pathMouseDown",value:function(e,t){var i=this.w,n=new ls(this.ctx),a=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10),r="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),i.globals.selectedDataPoints[a].indexOf(o)>-1){var d=i.globals.selectedDataPoints[a].indexOf(o);i.globals.selectedDataPoints[a].splice(d,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var g=i.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),x=i.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),v=function(F){Array.prototype.forEach.call(F,(function(O){O.node.setAttribute("selected","false"),n.getDefaultFilter(O,a)}))};v(g),v(x)}e.node.setAttribute("selected","true"),r="true",i.globals.selectedDataPoints[a]===void 0&&(i.globals.selectedDataPoints[a]=[]),i.globals.selectedDataPoints[a].push(o)}if(r==="true"){var k=i.config.states.active.filter;if(k!=="none")n.applyFilter(e,a,k.type);else if(i.config.states.hover.filter!=="none"&&!i.globals.isTouchDevice){var E=i.config.states.hover.filter;n.applyFilter(e,a,E.type)}}else i.config.states.active.filter.type!=="none"&&(i.config.states.hover.filter.type==="none"||i.globals.isTouchDevice?n.getDefaultFilter(e,a):(E=i.config.states.hover.filter,n.applyFilter(e,a,E.type)));typeof i.config.chart.events.dataPointSelection=="function"&&i.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:a,dataPointIndex:o,w:i}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:a,dataPointIndex:o,w:i}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&typeof e.getBBox=="function"&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,i,n){var a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=this.w,r=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:i,foreColor:"#fff",opacity:0});n&&r.attr("transform",n),o.globals.dom.Paper.add(r);var d=r.bbox();return a||(d=r.node.getBoundingClientRect()),r.remove(),{width:d.width,height:d.height}}},{key:"placeTextWithEllipsis",value:function(e,t,i){if(typeof e.getComputedTextLength=="function"&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=i/1.1)){for(var n=t.length-3;n>0;n-=3)if(e.getSubStringLength(0,n)<=i/1.1)return void(e.textContent=t.substring(0,n)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}}]),s})(),or=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.w,i=[];if(t.globals.series.length===0)return i;for(var n=0;n<t.globals.series[t.globals.maxValsInArrayIndex].length;n++){for(var a=0,o=0;o<t.globals.series.length;o++)t.globals.series[o][n]!==void 0&&e.indexOf(o)===-1&&(a+=t.globals.series[o][n]);i.push(a)}return i}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?this.w.config.series.reduce((function(t,i){return t+i}),0):this.w.globals.series[e].reduce((function(t,i){return t+i}),0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var e=this,t=this.w,i=[];return t.globals.seriesGroups.forEach((function(n){var a=[];t.config.series.forEach((function(r,d){n.indexOf(t.globals.seriesNames[d])>-1&&a.push(d)}));var o=t.globals.series.map((function(r,d){return a.indexOf(d)===-1?d:-1})).filter((function(r){return r!==-1}));i.push(e.getStackedSeriesTotals(o))})),i}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,t=this.w.config,i=[],n=[],a=[],o=e.series.length>t.yaxis.length||t.yaxis.some((function(v){return Array.isArray(v.seriesName)}));t.series.forEach((function(v,k){a.push(k),n.push(null)})),t.yaxis.forEach((function(v,k){i[k]=[]}));var r=[];t.yaxis.forEach((function(v,k){var E=!1;if(v.seriesName){var F=[];Array.isArray(v.seriesName)?F=v.seriesName:F.push(v.seriesName),F.forEach((function(O){t.series.forEach((function(N,$){if(N.name===O){var X=$;k===$||o?!o||a.indexOf($)>-1?i[k].push([k,$]):console.warn("Series '"+N.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(i[$].push([$,k]),X=k),E=!0,(X=a.indexOf(X))!==-1&&a.splice(X,1)}}))}))}E||r.push(k)})),i=i.map((function(v,k){var E=[];return v.forEach((function(F){n[F[1]]=F[0],E.push(F[1])})),E}));for(var d=t.yaxis.length-1,g=0;g<r.length&&(d=r[g],i[d]=[],a);g++){var x=a[0];a.shift(),i[d].push(x),n[x]=d}a.forEach((function(v){i[d].push(v),n[v]=d})),e.seriesYAxisMap=i.map((function(v){return v})),e.seriesYAxisReverseMap=n.map((function(v){return v})),e.seriesYAxisMap.forEach((function(v,k){v.forEach((function(E){t.series[E]&&t.series[E].group===void 0&&(t.series[E].group="apexcharts-axis-".concat(k.toString()))}))}))}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(e===null?this.w.config.series.filter((function(t){return t!==null})):this.w.config.series[e].data.filter((function(t){return t!==null}))).length===0}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every((function(t,i,n){return t===n[0]}))}},{key:"getCategoryLabels",value:function(e){var t=this.w,i=e.slice();return t.config.xaxis.convertedCatToNumeric&&(i=e.map((function(n,a){return t.config.xaxis.labels.formatter(n-t.globals.minX+1)}))),i}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map((function(t){return t.length})).indexOf(Math.max.apply(Math,e.globals.series.map((function(t){return t.length}))))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach((function(i){t=Math.max(t,i)})),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach((function(i){t=Math.max(t,i.size)})),t>0&&(e.config.markers.hover.size>0?t=e.config.markers.hover.size:t+=e.config.markers.hover.sizeOffset),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map((function(t,i){var n=0;if(Array.isArray(t))for(var a=0;a<t.length;a++)n+=t[a];else n+=t;return n}))}},{key:"getSeriesTotalsXRange",value:function(e,t){var i=this.w;return i.globals.series.map((function(n,a){for(var o=0,r=0;r<n.length;r++)i.globals.seriesX[a][r]>e&&i.globals.seriesX[a][r]<t&&(o+=n[r]);return o}))}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map((function(t,i){var n=[];if(Array.isArray(t))for(var a=0;a<t.length;a++){var o=e.globals.stackedSeriesTotals[a],r=0;o&&(r=100*t[a]/o),n.push(r)}else{var d=100*t/e.globals.seriesTotals.reduce((function(g,x){return g+x}),0);n.push(d)}return n}))}},{key:"getCalculatedRatios",value:function(){var e,t,i,n=this,a=this.w,o=a.globals,r=[],d=0,g=[],x=.1,v=0;if(o.yRange=[],o.isMultipleYAxis)for(var k=0;k<o.minYArr.length;k++)o.yRange.push(Math.abs(o.minYArr[k]-o.maxYArr[k])),g.push(0);else o.yRange.push(Math.abs(o.minY-o.maxY));o.xRange=Math.abs(o.maxX-o.minX),o.zRange=Math.abs(o.maxZ-o.minZ);for(var E=0;E<o.yRange.length;E++)r.push(o.yRange[E]/o.gridHeight);if(t=o.xRange/o.gridWidth,e=o.yRange/o.gridWidth,i=o.xRange/o.gridHeight,(d=o.zRange/o.gridHeight*16)||(d=1),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(o.hasNegs=!0),a.globals.seriesYAxisReverseMap.length>0){var F=function(N,$){var X=a.config.yaxis[a.globals.seriesYAxisReverseMap[$]],K=N<0?-1:1;return N=Math.abs(N),X.logarithmic&&(N=n.getBaseLog(X.logBase,N)),-K*N/r[$]};if(o.isMultipleYAxis){g=[];for(var O=0;O<r.length;O++)g.push(F(o.minYArr[O],O))}else(g=[]).push(F(o.minY,0)),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(x=-o.minY/e,v=o.minX/t)}else(g=[]).push(0),x=0,v=0;return{yRatio:r,invertedYRatio:e,zRatio:d,xRatio:t,invertedXRatio:i,baseLineInvertedY:x,baseLineY:g,baseLineX:v}}},{key:"getLogSeries",value:function(e){var t=this,i=this.w;return i.globals.seriesLog=e.map((function(n,a){var o=i.globals.seriesYAxisReverseMap[a];return i.config.yaxis[o]&&i.config.yaxis[o].logarithmic?n.map((function(r){return r===null?null:t.getLogVal(i.config.yaxis[o].logBase,r,a)})):n})),i.globals.invalidLogScale?e:i.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(e,t){if(e===null)return null;var i=this.w,n=i.globals.seriesYAxisReverseMap[t];return i.config.yaxis[n]&&i.config.yaxis[n].logarithmic?this.getLogVal(i.config.yaxis[n].logBase,e,t):e}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,i){if(t<=0)return 0;var n=this.w,a=n.globals.minYArr[i]===0?-1:this.getBaseLog(e,n.globals.minYArr[i]),o=(n.globals.maxYArr[i]===0?0:this.getBaseLog(e,n.globals.maxYArr[i]))-a;return t<1?t/o:(this.getBaseLog(e,t)-a)/o}},{key:"getLogYRatios",value:function(e){var t=this,i=this.w,n=this.w.globals;return n.yLogRatio=e.slice(),n.logYRange=n.yRange.map((function(a,o){var r=i.globals.seriesYAxisReverseMap[o];if(i.config.yaxis[r]&&t.w.config.yaxis[r].logarithmic){var d,g=-Number.MAX_VALUE,x=Number.MIN_VALUE;return n.seriesLog.forEach((function(v,k){v.forEach((function(E){i.config.yaxis[k]&&i.config.yaxis[k].logarithmic&&(g=Math.max(E,g),x=Math.min(E,x))}))})),d=Math.pow(n.yRange[o],Math.abs(x-g)/n.yRange[o]),n.yLogRatio[o]=d/n.gridHeight,d}})),n.invalidLogScale?e.slice():n.yLogRatio}},{key:"drawSeriesByGroup",value:function(e,t,i,n){var a=this.w,o=[];return e.series.length>0&&t.forEach((function(r){var d=[],g=[];e.i.forEach((function(x,v){a.config.series[x].group===r&&(d.push(e.series[v]),g.push(x))})),d.length>0&&o.push(n.draw(d,i,g))})),o}}],[{key:"checkComboSeries",value:function(e,t){var i=!1,n=0,a=0;return t===void 0&&(t="line"),e.length&&e[0].type!==void 0&&e.forEach((function(o){o.type!=="bar"&&o.type!=="column"&&o.type!=="candlestick"&&o.type!=="boxPlot"||n++,o.type!==void 0&&o.type!==t&&a++})),a>0&&(i=!0),{comboBarCount:n,comboCharts:i}}},{key:"extendArrayProps",value:function(e,t,i){var n,a,o,r,d,g;return(n=t)!==null&&n!==void 0&&n.yaxis&&(t=e.extendYAxis(t,i)),(a=t)!==null&&a!==void 0&&a.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),(o=t)!==null&&o!==void 0&&(r=o.annotations)!==null&&r!==void 0&&r.xaxis&&(t=e.extendXAxisAnnotations(t)),(d=t)!==null&&d!==void 0&&(g=d.annotations)!==null&&g!==void 0&&g.points&&(t=e.extendPointAnnotations(t))),t}}]),s})(),Ix=(function(){function s(e){li(this,s),this.w=e.w,this.annoCtx=e}return ci(s,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.w;if(e.label.orientation==="vertical"){var n=t!==null?t:0,a=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(n,"']"));if(a!==null){var o=a.getBoundingClientRect();a.setAttribute("x",parseFloat(a.getAttribute("x"))-o.height+4);var r=e.label.position==="top"?o.width:-o.width;a.setAttribute("y",parseFloat(a.getAttribute("y"))+r);var d=this.annoCtx.graphics.rotateAroundCenter(a),g=d.x,x=d.y;a.setAttribute("transform","rotate(-90 ".concat(g," ").concat(x,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var i=this.w;if(!e||!t.label.text||!String(t.label.text).trim())return null;var n=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),a=e.getBoundingClientRect(),o=t.label.style.padding,r=o.left,d=o.right,g=o.top,x=o.bottom;if(t.label.orientation==="vertical"){var v=[r,d,g,x];g=v[0],x=v[1],r=v[2],d=v[3]}var k=a.left-n.left-r,E=a.top-n.top-g,F=this.annoCtx.graphics.drawRect(k-i.globals.barPadForNumericAxis,E,a.width+r+d,a.height+g+x,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&F.node.classList.add(t.id),F}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,i=function(n,a,o){var r=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations .apexcharts-").concat(o,"-annotation-label[rel='").concat(a,"']"));if(r){var d=r.parentNode,g=e.addBackgroundToAnno(r,n);g&&(d.insertBefore(g.node,r),n.label.mouseEnter&&g.node.addEventListener("mouseenter",n.label.mouseEnter.bind(e,n)),n.label.mouseLeave&&g.node.addEventListener("mouseleave",n.label.mouseLeave.bind(e,n)),n.label.click&&g.node.addEventListener("click",n.label.click.bind(e,n)))}};t.config.annotations.xaxis.forEach((function(n,a){return i(n,a,"xaxis")})),t.config.annotations.yaxis.forEach((function(n,a){return i(n,a,"yaxis")})),t.config.annotations.points.forEach((function(n,a){return i(n,a,"point")}))}},{key:"getY1Y2",value:function(e,t){var i,n=this.w,a=e==="y1"?t.y:t.y2,o=!1;if(this.annoCtx.invertAxis){var r=n.config.xaxis.convertedCatToNumeric?n.globals.categoryLabels:n.globals.labels,d=r.indexOf(a),g=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(d+1,")"));i=g?parseFloat(g.getAttribute("y")):(n.globals.gridHeight/r.length-1)*(d+1)-n.globals.barHeight,t.seriesIndex!==void 0&&n.globals.barHeight&&(i-=n.globals.barHeight/2*(n.globals.series.length-1)-n.globals.barHeight*t.seriesIndex)}else{var x,v=n.globals.seriesYAxisMap[t.yAxisIndex][0],k=n.config.yaxis[t.yAxisIndex].logarithmic?new or(this.annoCtx.ctx).getLogVal(n.config.yaxis[t.yAxisIndex].logBase,a,v)/n.globals.yLogRatio[v]:(a-n.globals.minYArr[v])/(n.globals.yRange[v]/n.globals.gridHeight);i=n.globals.gridHeight-Math.min(Math.max(k,0),n.globals.gridHeight),o=k>n.globals.gridHeight||k<0,!t.marker||t.y!==void 0&&t.y!==null||(i=0),(x=n.config.yaxis[t.yAxisIndex])!==null&&x!==void 0&&x.reversed&&(i=k)}return typeof a=="string"&&a.includes("px")&&(i=parseFloat(a)),{yP:i,clipped:o}}},{key:"getX1X2",value:function(e,t){var i=this.w,n=e==="x1"?t.x:t.x2,a=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,o=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,r=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,d=!1,g=this.annoCtx.inversedReversedAxis?(o-n)/(r/i.globals.gridWidth):(n-a)/(r/i.globals.gridWidth);return i.config.xaxis.type!=="category"&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||i.config.chart.sparkline.enabled||(g=this.getStringX(n)),typeof n=="string"&&n.includes("px")&&(g=parseFloat(n)),n==null&&t.marker&&(g=i.globals.gridWidth),t.seriesIndex!==void 0&&i.globals.barWidth&&!this.annoCtx.invertAxis&&(g-=i.globals.barWidth/2*(i.globals.series.length-1)-i.globals.barWidth*t.seriesIndex),typeof g!="number"&&(g=0,d=!0),parseFloat(g.toFixed(10))>parseFloat(i.globals.gridWidth.toFixed(10))?(g=i.globals.gridWidth,d=!0):g<0&&(g=0,d=!0),{x:g,clipped:d}}},{key:"getStringX",value:function(e){var t=this.w,i=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var n=t.globals.labels.map((function(o){return Array.isArray(o)?o.join(" "):o})).indexOf(e),a=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(n+1,")"));return a&&(i=parseFloat(a.getAttribute("x"))),i}}]),s})(),vN=(function(){function s(e){li(this,s),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Ix(this.annoCtx)}return ci(s,[{key:"addXaxisAnnotation",value:function(e,t,i){var n,a=this.w,o=this.helpers.getX1X2("x1",e),r=o.x,d=o.clipped,g=!0,x=e.label.text,v=e.strokeDashArray;if(Je.isNumber(r)){if(e.x2===null||e.x2===void 0){if(!d){var k=this.annoCtx.graphics.drawLine(r+e.offsetX,0+e.offsetY,r+e.offsetX,a.globals.gridHeight+e.offsetY,e.borderColor,v,e.borderWidth);t.appendChild(k.node),e.id&&k.node.classList.add(e.id)}}else{var E=this.helpers.getX1X2("x2",e);if(n=E.x,g=E.clipped,n<r){var F=r;r=n,n=F}var O=this.annoCtx.graphics.drawRect(r+e.offsetX,0+e.offsetY,n-r,a.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,v);O.node.classList.add("apexcharts-annotation-rect"),O.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),t.appendChild(O.node),e.id&&O.node.classList.add(e.id)}if(!d||!g){var N=this.annoCtx.graphics.getTextRects(x,parseFloat(e.label.style.fontSize)),$=e.label.position==="top"?4:e.label.position==="center"?a.globals.gridHeight/2+(e.label.orientation==="vertical"?N.width/2:0):a.globals.gridHeight,X=this.annoCtx.graphics.drawText({x:r+e.label.offsetX,y:$+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?N.width/2-12:-N.width/2:0),text:x,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});X.attr({rel:i}),t.appendChild(X.node),this.annoCtx.helpers.setOrientations(e,i)}}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map((function(n,a){e.addXaxisAnnotation(n,i.node,a)})),i}}]),s})(),ss=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return ci(s,[{key:"isValidDate",value:function(e){return typeof e!="number"&&!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var i=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return i=this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var i=this.w.globals.locale,n=this.w.config.xaxis.labels.datetimeUTC,a=["\0"].concat(Hr(i.months)),o=[""].concat(Hr(i.shortMonths)),r=[""].concat(Hr(i.days)),d=[""].concat(Hr(i.shortDays));function g(he,de){var ke=he+"";for(de=de||2;ke.length<de;)ke="0"+ke;return ke}var x=n?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+x)).replace(/(^|[^\\])yy/g,"$1"+x.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+x);var v=(n?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+a[0])).replace(/(^|[^\\])MMM/g,"$1"+o[0])).replace(/(^|[^\\])MM/g,"$1"+g(v))).replace(/(^|[^\\])M/g,"$1"+v);var k=n?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+r[0])).replace(/(^|[^\\])ddd/g,"$1"+d[0])).replace(/(^|[^\\])dd/g,"$1"+g(k))).replace(/(^|[^\\])d/g,"$1"+k);var E=n?e.getUTCHours():e.getHours(),F=E>12?E-12:E===0?12:E;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+g(E))).replace(/(^|[^\\])H/g,"$1"+E)).replace(/(^|[^\\])hh+/g,"$1"+g(F))).replace(/(^|[^\\])h/g,"$1"+F);var O=n?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+g(O))).replace(/(^|[^\\])m/g,"$1"+O);var N=n?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+g(N))).replace(/(^|[^\\])s/g,"$1"+N);var $=n?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+g($,3)),$=Math.round($/10),t=t.replace(/(^|[^\\])ff/g,"$1"+g($)),$=Math.round($/10);var X=E<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+$)).replace(/(^|[^\\])TT+/g,"$1"+X)).replace(/(^|[^\\])T/g,"$1"+X.charAt(0));var K=X.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+K)).replace(/(^|[^\\])t/g,"$1"+K.charAt(0));var ie=-e.getTimezoneOffset(),ee=n||!ie?"Z":ie>0?"+":"-";if(!n){var le=(ie=Math.abs(ie))%60;ee+=g(Math.floor(ie/60))+":"+g(le)}t=t.replace(/(^|[^\\])K/g,"$1"+ee);var te=(n?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(r[0],"g"),r[te])).replace(new RegExp(d[0],"g"),d[te])).replace(new RegExp(a[0],"g"),a[v])).replace(new RegExp(o[0],"g"),o[v])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,i){var n=this.w;n.config.xaxis.min!==void 0&&(e=n.config.xaxis.min),n.config.xaxis.max!==void 0&&(t=n.config.xaxis.max);var a=this.getDate(e),o=this.getDate(t),r=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" "),d=this.formatDate(o,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(r[6],10),maxMillisecond:parseInt(d[6],10),minSecond:parseInt(r[5],10),maxSecond:parseInt(d[5],10),minMinute:parseInt(r[4],10),maxMinute:parseInt(d[4],10),minHour:parseInt(r[3],10),maxHour:parseInt(d[3],10),minDate:parseInt(r[2],10),maxDate:parseInt(d[2],10),minMonth:parseInt(r[1],10)-1,maxMonth:parseInt(d[1],10)-1,minYear:parseInt(r[0],10),maxYear:parseInt(d[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,i){return this.determineDaysOfMonths(e,t)-i}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,i){var n=this.daysCntOfYear[t]+i;return t>1&&this.isLeapYear()&&n++,n}},{key:"determineDaysOfMonths",value:function(e,t){var i=30;switch(e=Je.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(i=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:i=31}return i}}]),s})(),Cm=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return ci(s,[{key:"xLabelFormat",value:function(e,t,i,n){var a=this.w;if(a.config.xaxis.type==="datetime"&&a.config.xaxis.labels.formatter===void 0&&a.config.tooltip.x.formatter===void 0){var o=new ss(this.ctx);return o.formatDate(o.getDate(t),a.config.tooltip.x.format)}return e(t,i,n)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map((function(t){return t})):e}},{key:"defaultYFormatter",value:function(e,t,i){var n=this.w;if(Je.isNumber(e))if(n.globals.yValueDecimal!==0)e=e.toFixed(t.decimalsInFloat!==void 0?t.decimalsInFloat:n.globals.yValueDecimal);else{var a=e.toFixed(0);e=e==a?a:e.toFixed(1)}return e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(i){return e.defaultGeneralFormatter(i)},t.globals.ttKeyFormatter=function(i){return e.defaultGeneralFormatter(i)},t.globals.ttZFormatter=function(i){return i},t.globals.legendFormatter=function(i){return e.defaultGeneralFormatter(i)},t.config.xaxis.labels.formatter!==void 0?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(i){if(Je.isNumber(i)){if(!t.config.xaxis.convertedCatToNumeric&&t.config.xaxis.type==="numeric"){if(Je.isNumber(t.config.xaxis.decimalsInFloat))return i.toFixed(t.config.xaxis.decimalsInFloat);var n=t.globals.maxX-t.globals.minX;return n>0&&n<100?i.toFixed(1):i.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?i.toFixed(1):i.toFixed(0)}return i},typeof t.config.tooltip.x.formatter=="function"?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,typeof t.config.xaxis.tooltip.formatter=="function"&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||t.config.tooltip.y.formatter!==void 0)&&(t.globals.ttVal=t.config.tooltip.y),t.config.tooltip.z.formatter!==void 0&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),t.config.legend.formatter!==void 0&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach((function(i,n){i.labels.formatter!==void 0?t.globals.yLabelFormatters[n]=i.labels.formatter:t.globals.yLabelFormatters[n]=function(a){return t.globals.xyCharts?Array.isArray(a)?a.map((function(o){return e.defaultYFormatter(o,i,n)})):e.defaultYFormatter(a,i,n):a}})),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce((function(i,n){return i.length>n.length?i:n}),0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),s})(),Mh=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"getLabel",value:function(e,t,i,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",r=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],d=this.w,g=e[n]===void 0?"":e[n],x=g,v=d.globals.xLabelFormatter,k=d.config.xaxis.labels.formatter,E=!1,F=new Cm(this.ctx),O=g;r&&(x=F.xLabelFormat(v,g,O,{i:n,dateFormatter:new ss(this.ctx).formatDate,w:d}),k!==void 0&&(x=k(g,e[n],{i:n,dateFormatter:new ss(this.ctx).formatDate,w:d})));var N,$;t.length>0?(N=t[n].unit,$=null,t.forEach((function(ee){ee.unit==="month"?$="year":ee.unit==="day"?$="month":ee.unit==="hour"?$="day":ee.unit==="minute"&&($="hour")})),E=$===N,i=t[n].position,x=t[n].value):d.config.xaxis.type==="datetime"&&k===void 0&&(x=""),x===void 0&&(x=""),x=Array.isArray(x)?x:x.toString();var X=new Lt(this.ctx),K={};K=d.globals.rotateXLabels&&r?X.getTextRects(x,parseInt(o,10),null,"rotate(".concat(d.config.xaxis.labels.rotate," 0 0)"),!1):X.getTextRects(x,parseInt(o,10));var ie=!d.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(x)&&(String(x)==="NaN"||a.indexOf(x)>=0&&ie)&&(x=""),{x:i,text:x,textRect:K,isBold:E}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,i){var n=this.w,a=n.config.xaxis.tickAmount;return a==="dataPoints"&&(a=Math.round(n.globals.gridWidth/120)),a>i||e%Math.round(i/(a+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,i,n,a){var o=this.w;if(e===0&&o.globals.skipFirstTimelinelabel&&(t.text=""),e===i-1&&o.globals.skipLastTimelinelabel&&(t.text=""),o.config.xaxis.labels.hideOverlappingLabels&&n.length>0){var r=a[a.length-1];if(o.config.xaxis.labels.trim&&o.config.xaxis.type!=="datetime")return t;t.x<r.textRect.width/(o.globals.rotateXLabels?Math.abs(o.config.xaxis.labels.rotate)/12:1.01)+r.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var i=this.w;return i.config.yaxis[e]&&i.config.yaxis[e].reversed&&t.reverse(),t}},{key:"yAxisAllSeriesCollapsed",value:function(e){var t=this.w.globals;return!t.seriesYAxisMap[e].some((function(i){return t.collapsedSeriesIndices.indexOf(i)===-1}))}},{key:"translateYAxisIndex",value:function(e){var t=this.w,i=t.globals,n=t.config.yaxis;return i.series.length>n.length||n.some((function(a){return Array.isArray(a.seriesName)}))?e:i.seriesYAxisReverseMap[e]}},{key:"isYAxisHidden",value:function(e){var t=this.w,i=t.config.yaxis[e];if(!i.show||this.yAxisAllSeriesCollapsed(e))return!0;if(!i.showForNullSeries){var n=t.globals.seriesYAxisMap[e],a=new or(this.ctx);return n.every((function(o){return a.isSeriesNull(o)}))}return!1}},{key:"getYAxisForeColor",value:function(e,t){var i=this.w;return Array.isArray(e)&&i.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,i.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,i,n,a,o,r){var d=this.w,g=new Lt(this.ctx),x=d.globals.translateY+d.config.yaxis[a].labels.offsetY;if(d.globals.isBarHorizontal?x=0:d.config.chart.type==="heatmap"&&(x+=o/2),n.show&&t>0){d.config.yaxis[a].opposite===!0&&(e+=n.width);for(var v=t;v>=0;v--){var k=g.drawLine(e+i.offsetX-n.width+n.offsetX,x+n.offsetY,e+i.offsetX+n.offsetX,x+n.offsetY,n.color);r.add(k),x+=o}}}}]),s})(),bN=(function(){function s(e){li(this,s),this.w=e.w,this.annoCtx=e,this.helpers=new Ix(this.annoCtx),this.axesUtils=new Mh(this.annoCtx)}return ci(s,[{key:"addYaxisAnnotation",value:function(e,t,i){var n,a=this.w,o=e.strokeDashArray,r=this.helpers.getY1Y2("y1",e),d=r.yP,g=r.clipped,x=!0,v=!1,k=e.label.text;if(e.y2===null||e.y2===void 0){if(!g){v=!0;var E=this.annoCtx.graphics.drawLine(0+e.offsetX,d+e.offsetY,this._getYAxisAnnotationWidth(e),d+e.offsetY,e.borderColor,o,e.borderWidth);t.appendChild(E.node),e.id&&E.node.classList.add(e.id)}}else{if(n=(r=this.helpers.getY1Y2("y2",e)).yP,x=r.clipped,n>d){var F=d;d=n,n=F}if(!g||!x){v=!0;var O=this.annoCtx.graphics.drawRect(0+e.offsetX,n+e.offsetY,this._getYAxisAnnotationWidth(e),d-n,0,e.fillColor,e.opacity,1,e.borderColor,o);O.node.classList.add("apexcharts-annotation-rect"),O.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),t.appendChild(O.node),e.id&&O.node.classList.add(e.id)}}if(v){var N=e.label.position==="right"?a.globals.gridWidth:e.label.position==="center"?a.globals.gridWidth/2:0,$=this.annoCtx.graphics.drawText({x:N+e.label.offsetX,y:(n??d)+e.label.offsetY-3,text:k,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});$.attr({rel:i}),t.appendChild($.node)}}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.forEach((function(n,a){n.yAxisIndex=e.axesUtils.translateYAxisIndex(n.yAxisIndex),e.axesUtils.isYAxisHidden(n.yAxisIndex)&&e.axesUtils.yAxisAllSeriesCollapsed(n.yAxisIndex)||e.addYaxisAnnotation(n,i.node,a)})),i}}]),s})(),wN=(function(){function s(e){li(this,s),this.w=e.w,this.annoCtx=e,this.helpers=new Ix(this.annoCtx)}return ci(s,[{key:"addPointAnnotation",value:function(e,t,i){if(!(this.w.globals.collapsedSeriesIndices.indexOf(e.seriesIndex)>-1)){var n=this.helpers.getX1X2("x1",e),a=n.x,o=n.clipped,r=(n=this.helpers.getY1Y2("y1",e)).yP,d=n.clipped;if(Je.isNumber(a)&&!d&&!o){var g={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},x=this.annoCtx.graphics.drawMarker(a+e.marker.offsetX,r+e.marker.offsetY,g);t.appendChild(x.node);var v=e.label.text?e.label.text:"",k=this.annoCtx.graphics.drawText({x:a+e.label.offsetX,y:r+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:v,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(k.attr({rel:i}),t.appendChild(k.node),e.customSVG.SVG){var E=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});E.attr({transform:"translate(".concat(a+e.customSVG.offsetX,", ").concat(r+e.customSVG.offsetY,")")}),E.node.innerHTML=e.customSVG.SVG,t.appendChild(E.node)}if(e.image.path){var F=e.image.width?e.image.width:20,O=e.image.height?e.image.height:20;x=this.annoCtx.addImage({x:a+e.image.offsetX-F/2,y:r+e.image.offsetY-O/2,width:F,height:O,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&x.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&x.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&x.node.addEventListener("click",e.click.bind(this,e))}}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map((function(n,a){e.addPointAnnotation(n,i.node,a)})),i}}]),s})(),gI={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},zu=(function(){function s(){li(this,s),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return ci(s,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[gI],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,injectStyleSheet:!0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},parsing:{x:void 0,y:void 0},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0},seriesTitle:{show:!0,offsetY:1,offsetX:1,borderColor:"#000",borderWidth:1,borderRadius:2,style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"12px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:6,right:6,top:2,bottom:2}}}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(t,i){return t+i}),0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(t,i){return t+i}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",backgroundColor:void 0,borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),s})(),SN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.graphics=new Lt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Ix(this),this.xAxisAnnotations=new vN(this),this.yAxisAnnotations=new bN(this),this.pointsAnnotations=new wN(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return ci(s,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts&&e.globals.dataPoints){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),n=this.pointsAnnotations.drawPointAnnotations(),a=e.config.chart.animations.enabled,o=[t,i,n],r=[i.node,t.node,n.node],d=0;d<3;d++)e.globals.dom.elGraphical.add(o[d]),!a||e.globals.resized||e.globals.dataChanged||e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&r[d].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:r[d],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map((function(t,i){e.addImage(t,i)}))}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map((function(t,i){e.addText(t,i)}))}},{key:"addXaxisAnnotation",value:function(e,t,i){this.xAxisAnnotations.addXaxisAnnotation(e,t,i)}},{key:"addYaxisAnnotation",value:function(e,t,i){this.yAxisAnnotations.addYaxisAnnotation(e,t,i)}},{key:"addPointAnnotation",value:function(e,t,i){this.pointsAnnotations.addPointAnnotation(e,t,i)}},{key:"addText",value:function(e,t){var i=e.x,n=e.y,a=e.text,o=e.textAnchor,r=e.foreColor,d=e.fontSize,g=e.fontFamily,x=e.fontWeight,v=e.cssClass,k=e.backgroundColor,E=e.borderWidth,F=e.strokeDashArray,O=e.borderRadius,N=e.borderColor,$=e.appendTo,X=$===void 0?".apexcharts-svg":$,K=e.paddingLeft,ie=K===void 0?4:K,ee=e.paddingRight,le=ee===void 0?4:ee,te=e.paddingBottom,he=te===void 0?2:te,de=e.paddingTop,ke=de===void 0?2:de,De=this.w,Ae=this.graphics.drawText({x:i,y:n,text:a,textAnchor:o||"start",fontSize:d||"12px",fontWeight:x||"regular",fontFamily:g||De.config.chart.fontFamily,foreColor:r||De.config.chart.foreColor,cssClass:v}),$e=De.globals.dom.baseEl.querySelector(X);$e&&$e.appendChild(Ae.node);var et=Ae.bbox();if(a){var Ie=this.graphics.drawRect(et.x-ie,et.y-ke,et.width+ie+le,et.height+he+ke,O,k||"transparent",1,E,N,F);$e.insertBefore(Ie.node,Ae.node)}}},{key:"addImage",value:function(e,t){var i=this.w,n=e.path,a=e.x,o=a===void 0?0:a,r=e.y,d=r===void 0?0:r,g=e.width,x=g===void 0?20:g,v=e.height,k=v===void 0?20:v,E=e.appendTo,F=E===void 0?".apexcharts-svg":E,O=i.globals.dom.Paper.image(n);O.size(x,k).move(o,d);var N=i.globals.dom.baseEl.querySelector(F);return N&&N.appendChild(O.node),O}},{key:"addXaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(e,t,i){return this.invertAxis===void 0&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(e){var t=e.params,i=e.pushToMemory,n=e.context,a=e.type,o=e.contextMethod,r=n,d=r.w,g=d.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations")),x=g.childNodes.length+1,v=new zu,k=Object.assign({},a==="xaxis"?v.xAxisAnnotation:a==="yaxis"?v.yAxisAnnotation:v.pointAnnotation),E=Je.extend(k,t);switch(a){case"xaxis":this.addXaxisAnnotation(E,g,x);break;case"yaxis":this.addYaxisAnnotation(E,g,x);break;case"point":this.addPointAnnotation(E,g,x)}var F=d.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations .apexcharts-").concat(a,"-annotation-label[rel='").concat(x,"']")),O=this.helpers.addBackgroundToAnno(F,E);return O&&g.insertBefore(O.node,F),i&&d.globals.memory.methodsToExec.push({context:r,id:E.id?E.id:Je.randomId(),method:o,label:"addAnnotation",params:t}),n}},{key:"clearAnnotations",value:function(e){for(var t=e.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),n=t.globals.memory.methodsToExec.length-1;n>=0;n--)t.globals.memory.methodsToExec[n].label!=="addText"&&t.globals.memory.methodsToExec[n].label!=="addAnnotation"||t.globals.memory.methodsToExec.splice(n,1);i=Je.listToArray(i),Array.prototype.forEach.call(i,(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)}))}},{key:"removeAnnotation",value:function(e,t){var i=e.w,n=i.globals.dom.baseEl.querySelectorAll(".".concat(t));n&&(i.globals.memory.methodsToExec.map((function(a,o){a.id===t&&i.globals.memory.methodsToExec.splice(o,1)})),Object.keys(i.config.annotations).forEach((function(a){var o=i.config.annotations[a];Array.isArray(o)&&(i.config.annotations[a]=o.filter((function(r){return r.id!==t})))})),Array.prototype.forEach.call(n,(function(a){a.parentElement.removeChild(a)})))}}]),s})(),N1=function(s){var e,t=s.isTimeline,i=s.ctx,n=s.seriesIndex,a=s.dataPointIndex,o=s.y1,r=s.y2,d=s.w,g=d.globals.seriesRangeStart[n][a],x=d.globals.seriesRangeEnd[n][a],v=d.globals.labels[a],k=d.config.series[n].name?d.config.series[n].name:"",E=d.globals.ttKeyFormatter,F=d.config.tooltip.y.title.formatter,O={w:d,seriesIndex:n,dataPointIndex:a,start:g,end:x};typeof F=="function"&&(k=F(k,O)),(e=d.config.series[n].data[a])!==null&&e!==void 0&&e.x&&(v=d.config.series[n].data[a].x),t||d.config.xaxis.type==="datetime"&&(v=new Cm(i).xLabelFormat(d.globals.ttKeyFormatter,v,v,{i:void 0,dateFormatter:new ss(i).formatDate,w:d})),typeof E=="function"&&(v=E(v,O)),Number.isFinite(o)&&Number.isFinite(r)&&(g=o,x=r);var N="",$="",X=d.globals.colors[n];if(d.config.tooltip.x.formatter===void 0)if(d.config.xaxis.type==="datetime"){var K=new ss(i);N=K.formatDate(K.getDate(g),d.config.tooltip.x.format),$=K.formatDate(K.getDate(x),d.config.tooltip.x.format)}else N=g,$=x;else N=d.config.tooltip.x.formatter(g),$=d.config.tooltip.x.formatter(x);return{start:g,end:x,startVal:N,endVal:$,ylabel:v,color:X,seriesName:k}},j1=function(s){var e=s.color,t=s.seriesName,i=s.ylabel,n=s.start,a=s.end,o=s.seriesIndex,r=s.dataPointIndex,d=s.ctx.tooltip.tooltipLabels.getFormatters(o);n=d.yLbFormatter(n),a=d.yLbFormatter(a);var g=d.yLbFormatter(s.w.globals.series[o][r]),x=`<span class="value start-value">
  `.concat(n,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(a,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(t||"")+'</span></div><div> <span class="category">'+i+": </span> "+(s.w.globals.comboCharts?s.w.config.series[o].type==="rangeArea"||s.w.config.series[o].type==="rangeBar"?x:"<span>".concat(g,"</span>"):x)+" </div></div>"},fm=(function(){function s(e){li(this,s),this.opts=e}return ci(s,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.hideYAxis(),Je.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(e,t){var i=t.w.config.series[t.seriesIndex].name;return e!==null?i+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Xt(Xt({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,n=t.dataPointIndex,a=t.w;return e._getBoxTooltip(a,i,n,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,n=t.dataPointIndex,a=t.w;return e._getBoxTooltip(a,i,n,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var i=t.seriesIndex,n=t.dataPointIndex,a=t.w,o=function(){var r=a.globals.seriesRangeStart[i][n];return a.globals.seriesRangeEnd[i][n]-r};return a.globals.comboCharts?a.config.series[i].type==="rangeBar"||a.config.series[i].type==="rangeArea"?o():e:o()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?(function(t){var i=N1(Xt(Xt({},t),{},{isTimeline:!0})),n=i.color,a=i.seriesName,o=i.ylabel,r=i.startVal,d=i.endVal;return j1(Xt(Xt({},t),{},{color:n,seriesName:a,ylabel:o,start:r,end:d}))})(e):(function(t){var i=N1(t),n=i.color,a=i.seriesName,o=i.ylabel,r=i.start,d=i.end;return j1(Xt(Xt({},t),{},{color:n,seriesName:a,ylabel:o,start:r,end:d}))})(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(e){var t,i;return(t=e.plotOptions.bar)!==null&&t!==void 0&&t.barHeight||(e.plotOptions.bar.barHeight=2),(i=e.plotOptions.bar)!==null&&i!==void 0&&i.columnWidth||(e.plotOptions.bar.columnWidth=2),e}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return(function(t){var i=N1(t),n=i.color,a=i.seriesName,o=i.ylabel,r=i.start,d=i.end;return j1(Xt(Xt({},t),{},{color:n,seriesName:a,ylabel:o,start:r,end:d}))})(e)}}}}},{key:"brush",value:function(e){return Je.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach((function(i,n){e.yaxis[n].min=0,e.yaxis[n].max=100})),e.chart.type==="bar"&&(e.dataLabels.formatter=t||function(i){return typeof i=="number"&&i?i.toFixed(0)+"%":i}),e}},{key:"stackedBars",value:function(){var e=this.bar();return Xt(Xt({},e),{},{plotOptions:Xt(Xt({},e.plotOptions),{},{bar:Xt(Xt({},e.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,i){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(o){return Je.isNumber(o)?Math.floor(o):o};var n=e.xaxis.labels.formatter,a=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return i&&i.length&&(a=i.map((function(o){return Array.isArray(o)?o:String(o)}))),a&&a.length&&(e.xaxis.labels.formatter=function(o){return Je.isNumber(o)?n(a[Math.floor(o)-1]):n(o)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(e,t,i,n,a){var o=e.globals.seriesCandleO[t][i],r=e.globals.seriesCandleH[t][i],d=e.globals.seriesCandleM[t][i],g=e.globals.seriesCandleL[t][i],x=e.globals.seriesCandleC[t][i];return e.config.series[t].type&&e.config.series[t].type!==a?`<div class="apexcharts-custom-tooltip">
          `.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][i],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(n[0],': <span class="value">')+o+"</span></div>"+"<div>".concat(n[1],': <span class="value">')+r+"</span></div>"+(d?"<div>".concat(n[2],': <span class="value">')+d+"</span></div>":"")+"<div>".concat(n[3],': <span class="value">')+g+"</span></div>"+"<div>".concat(n[4],': <span class="value">')+x+"</span></div></div>"}}]),s})(),pm=(function(){function s(e){li(this,s),this.opts=e}return ci(s,[{key:"init",value:function(e){var t=e.responsiveOverride,i=this.opts,n=new zu,a=new fm(i);this.chartType=i.chart.type,i=this.extendYAxis(i),i=this.extendAnnotations(i);var o=n.init(),r={};if(i&&js(i)==="object"){var d,g,x,v,k,E,F,O,N,$,X={};X=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)!==-1?a[i.chart.type]():a.line(),(d=i.plotOptions)!==null&&d!==void 0&&(g=d.bar)!==null&&g!==void 0&&g.isFunnel&&(X=a.funnel()),i.chart.stacked&&i.chart.type==="bar"&&(X=a.stackedBars()),(x=i.chart.brush)!==null&&x!==void 0&&x.enabled&&(X=a.brush(X)),(v=i.plotOptions)!==null&&v!==void 0&&(k=v.line)!==null&&k!==void 0&&k.isSlopeChart&&(X=a.slope()),i.chart.stacked&&i.chart.stackType==="100%"&&(i=a.stacked100(i)),(E=i.plotOptions)!==null&&E!==void 0&&(F=E.bar)!==null&&F!==void 0&&F.isDumbbell&&(i=a.dumbbell(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},t||(i.xaxis.convertedCatToNumeric=!1),((O=(i=this.checkForCatToNumericXAxis(this.chartType,X,i)).chart.sparkline)!==null&&O!==void 0&&O.enabled||(N=window.Apex.chart)!==null&&N!==void 0&&($=N.sparkline)!==null&&$!==void 0&&$.enabled)&&(X=a.sparkline(X)),r=Je.extend(o,X)}var K=Je.extend(r,window.Apex);return o=Je.extend(K,i),o=this.handleUserInputErrors(o)}},{key:"checkForCatToNumericXAxis",value:function(e,t,i){var n,a,o=new fm(i),r=(e==="bar"||e==="boxPlot")&&((n=i.plotOptions)===null||n===void 0||(a=n.bar)===null||a===void 0?void 0:a.horizontal),d=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",g=i.xaxis.type!=="datetime"&&i.xaxis.type!=="numeric",x=i.xaxis.tickPlacement?i.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return r||d||!g||x==="between"||(i=o.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(e,t){var i=new zu;(e.yaxis===void 0||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=Je.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[Je.extend(i.yAxis,e.yaxis)]:e.yaxis=Je.extendArray(e.yaxis,i.yAxis);var n=!1;e.yaxis.forEach((function(o){o.logarithmic&&(n=!0)}));var a=e.series;return t&&!a&&(a=t.config.series),n&&a.length!==e.yaxis.length&&a.length&&(e.yaxis=a.map((function(o,r){if(o.name||(a[r].name="series-".concat(r+1)),e.yaxis[r])return e.yaxis[r].seriesName=a[r].name,e.yaxis[r];var d=Je.extend(i.yAxis,e.yaxis[0]);return d.show=!1,d}))),n&&a.length>1&&a.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}},{key:"extendAnnotations",value:function(e){return e.annotations===void 0&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new zu;return e.annotations.yaxis=Je.extendArray(e.annotations.yaxis!==void 0?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new zu;return e.annotations.xaxis=Je.extendArray(e.annotations.xaxis!==void 0?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new zu;return e.annotations.points=Je.extendArray(e.annotations.points!==void 0?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(t.chart.type==="bar"&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return t.chart.type!=="bar"&&t.chart.type!=="rangeBar"||t.tooltip.shared&&t.xaxis.crosshairs.width==="barWidth"&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),t.chart.type!=="candlestick"&&t.chart.type!=="boxPlot"||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),s})(),mI=(function(){function s(){li(this,s)}return ci(s,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.dataWasParsed=!1,e.originalSeries=null,e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.barGroups=[],e.lineGroups=[],e.areaGroups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.lastWheelExecution=0,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:e.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=Je.extend({},e),t.initialSeries=Je.clone(e.series),t.lastXAxis=Je.clone(t.initialConfig.xaxis),t.lastYAxis=Je.clone(t.initialConfig.yaxis),t}}]),s})(),kN=(function(){function s(e){li(this,s),this.opts=e}return ci(s,[{key:"init",value:function(){var e=new pm(this.opts).init({responsiveOverride:!1});return{config:e,globals:new mI().init(e)}}}]),s})(),vl=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return ci(s,[{key:"clippedImgArea",value:function(e){var t=this.w,i=t.config,n=parseInt(t.globals.gridWidth,10),a=parseInt(t.globals.gridHeight,10),o=n>a?n:a,r=e.image,d=0,g=0;e.width===void 0&&e.height===void 0?i.fill.image.width!==void 0&&i.fill.image.height!==void 0?(d=i.fill.image.width+1,g=i.fill.image.height):(d=o+1,g=o):(d=e.width,g=e.height);var x=document.createElementNS(t.globals.SVGNS,"pattern");Lt.setAttrs(x,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:d+"px",height:g+"px"});var v=document.createElementNS(t.globals.SVGNS,"image");x.appendChild(v),v.setAttributeNS(window.SVG.xlink,"href",r),Lt.setAttrs(v,{x:0,y:0,preserveAspectRatio:"none",width:d+"px",height:g+"px"}),v.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(x)}},{key:"getSeriesIndex",value:function(e){var t=this.w,i=t.config.chart.type;return(i==="bar"||i==="rangeBar")&&t.config.plotOptions.bar.distributed||i==="heatmap"||i==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(e,t){var i,n=this.w,a=null,o=null,r=kg(e);try{for(r.s();!(i=r.n()).done;){var d=i.value;d>=t.threshold?(a===null||d>a)&&(a=d):(o===null||d<o)&&(o=d)}}catch(v){r.e(v)}finally{r.f()}a===null&&(a=t.threshold),o===null&&(o=t.threshold);var g=a-t.threshold+(t.threshold-o);g===0&&(g=1);var x=100-(t.threshold-o)/g*100;return[{offset:x=Math.max(0,Math.min(x,100)),color:t.colorAboveThreshold,opacity:n.config.fill.opacity},{offset:0,color:t.colorBelowThreshold,opacity:n.config.fill.opacity}]}},{key:"fillPath",value:function(e){var t,i,n,a=this.w;this.opts=e;var o,r,d,g=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var x=g.plotOptions.line.colors.colorAboveThreshold&&g.plotOptions.line.colors.colorBelowThreshold,v=this.getFillColors()[this.seriesIndex];a.globals.seriesColors[this.seriesIndex]!==void 0&&(v=a.globals.seriesColors[this.seriesIndex]),typeof v=="function"&&(v=v({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:a}));var k,E,F,O=e.fillType?e.fillType:this.getFillType(this.seriesIndex),N=Array.isArray(g.fill.opacity)?g.fill.opacity[this.seriesIndex]:g.fill.opacity,$=O==="gradient"||x;e.color&&(v=e.color),(t=a.config.series[this.seriesIndex])!==null&&t!==void 0&&(i=t.data)!==null&&i!==void 0&&(n=i[e.dataPointIndex])!==null&&n!==void 0&&n.fillColor&&(v=(k=a.config.series[this.seriesIndex])===null||k===void 0||(E=k.data)===null||E===void 0||(F=E[e.dataPointIndex])===null||F===void 0?void 0:F.fillColor),v||(v="#fff",console.warn("undefined color - ApexCharts"));var X=v;if(v.indexOf("rgb")===-1?v.indexOf("#")===-1?X=v:v.length<9&&(X=Je.hexToRgba(v,N)):v.indexOf("rgba")>-1?N=Je.getOpacityFromRGBA(v):X=Je.hexToRgba(Je.rgb2hex(v),N),e.opacity&&(N=e.opacity),O==="pattern"&&(r=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:r,fillColor:v,fillOpacity:N,defaultColor:X})),$){var K=Hr(g.fill.gradient.colorStops)||[],ie=g.fill.gradient.type;x&&(K[this.seriesIndex]=this.computeColorStops(a.globals.series[this.seriesIndex],g.plotOptions.line.colors),ie="vertical"),d=this.handleGradientFill({type:ie,fillConfig:e.fillConfig,fillColor:v,fillOpacity:N,colorStops:K,i:this.seriesIndex})}if(O==="image"){var ee=g.fill.image.src,le=e.patternID?e.patternID:"",te="pattern".concat(a.globals.cuid).concat(e.seriesNumber+1).concat(le);this.patternIDs.indexOf(te)===-1&&(this.clippedImgArea({opacity:N,image:Array.isArray(ee)?e.seriesNumber<ee.length?ee[e.seriesNumber]:ee[0]:ee,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:te}),this.patternIDs.push(te)),o="url(#".concat(te,")")}else o=$?d:O==="pattern"?r:X;return e.solid&&(o=X),o}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,i=this.opts,n=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors):t.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors),i.fillColors!==void 0&&(n=[],Array.isArray(i.fillColors)?n=i.fillColors.slice():n.push(i.fillColors)),n}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,i=e.patternFill,n=e.fillColor,a=e.fillOpacity,o=e.defaultColor,r=this.w.config.fill;t&&(r=t);var d=this.opts,g=new Lt(this.ctx),x=Array.isArray(r.pattern.strokeWidth)?r.pattern.strokeWidth[this.seriesIndex]:r.pattern.strokeWidth,v=n;return Array.isArray(r.pattern.style)?i=r.pattern.style[d.seriesNumber]!==void 0?g.drawPattern(r.pattern.style[d.seriesNumber],r.pattern.width,r.pattern.height,v,x,a):o:i=g.drawPattern(r.pattern.style,r.pattern.width,r.pattern.height,v,x,a),i}},{key:"handleGradientFill",value:function(e){var t=e.type,i=e.fillColor,n=e.fillOpacity,a=e.fillConfig,o=e.colorStops,r=e.i,d=this.w.config.fill;a&&(d=Xt(Xt({},d),a));var g=this.opts,x=new Lt(this.ctx),v=new Je;t=t||d.gradient.type;var k,E=i,F=d.gradient.opacityFrom===void 0?n:Array.isArray(d.gradient.opacityFrom)?d.gradient.opacityFrom[r]:d.gradient.opacityFrom;E.indexOf("rgba")>-1&&(F=Je.getOpacityFromRGBA(E));var O=d.gradient.opacityTo===void 0?n:Array.isArray(d.gradient.opacityTo)?d.gradient.opacityTo[r]:d.gradient.opacityTo;if(d.gradient.gradientToColors===void 0||d.gradient.gradientToColors.length===0)k=d.gradient.shade==="dark"?v.shadeColor(-1*parseFloat(d.gradient.shadeIntensity),i.indexOf("rgb")>-1?Je.rgb2hex(i):i):v.shadeColor(parseFloat(d.gradient.shadeIntensity),i.indexOf("rgb")>-1?Je.rgb2hex(i):i);else if(d.gradient.gradientToColors[g.seriesNumber]){var N=d.gradient.gradientToColors[g.seriesNumber];k=N,N.indexOf("rgba")>-1&&(O=Je.getOpacityFromRGBA(N))}else k=i;if(d.gradient.gradientFrom&&(E=d.gradient.gradientFrom),d.gradient.gradientTo&&(k=d.gradient.gradientTo),d.gradient.inverseColors){var $=E;E=k,k=$}return E.indexOf("rgb")>-1&&(E=Je.rgb2hex(E)),k.indexOf("rgb")>-1&&(k=Je.rgb2hex(k)),x.drawGradient(t,E,k,F,O,g.size,d.gradient.stops,o,r)}}]),s})(),ep=(function(){function s(e,t){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)e.globals.markers.size[t]===void 0&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map((function(i){return e.config.markers.size}))}},{key:"plotChartMarkers",value:function(e){var t=e.pointsPos,i=e.seriesIndex,n=e.j,a=e.pSize,o=e.alwaysDrawMarker,r=o!==void 0&&o,d=e.isVirtualPoint,g=d!==void 0&&d,x=this.w,v=i,k=t,E=null,F=new Lt(this.ctx),O=x.config.markers.discrete&&x.config.markers.discrete.length;if(Array.isArray(k.x))for(var N=0;N<k.x.length;N++){var $=void 0,X=n,K=!Je.isNumber(k.y[N]);x.globals.markers.largestSize===0&&x.globals.hasNullValues&&x.globals.series[v][n+1]!==null&&!g&&(K=!0),n===1&&N===0&&(X=0),n===1&&N===1&&(X=1);var ie="apexcharts-marker";if(x.config.chart.type!=="line"&&x.config.chart.type!=="area"||x.globals.comboCharts||x.config.tooltip.intersect||(ie+=" no-pointer-events"),(Array.isArray(x.config.markers.size)?x.globals.markers.size[i]>0:x.config.markers.size>0)||r||O){K||(ie+=" w".concat(Je.randomId()));var ee=this.getMarkerConfig({cssClass:ie,seriesIndex:i,dataPointIndex:X});x.config.series[v].data[X]&&(x.config.series[v].data[X].fillColor&&(ee.pointFillColor=x.config.series[v].data[X].fillColor),x.config.series[v].data[X].strokeColor&&(ee.pointStrokeColor=x.config.series[v].data[X].strokeColor)),a!==void 0&&(ee.pSize=a),(k.x[N]<-x.globals.markers.largestSize||k.x[N]>x.globals.gridWidth+x.globals.markers.largestSize||k.y[N]<-x.globals.markers.largestSize||k.y[N]>x.globals.gridHeight+x.globals.markers.largestSize)&&(ee.pSize=0),!K&&((x.globals.markers.size[i]>0||r||O)&&!E&&(E=F.group({class:r||O?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(x.globals.cuid,")")),($=F.drawMarker(k.x[N],k.y[N],ee)).attr("rel",X),$.attr("j",X),$.attr("index",i),$.node.setAttribute("default-marker-size",ee.pSize),new ls(this.ctx).setSelectionFilter($,i,X),this.addEvents($),E&&E.add($))}else x.globals.pointsArray[i]===void 0&&(x.globals.pointsArray[i]=[]),x.globals.pointsArray[i].push([k.x[N],k.y[N]])}return E}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,i=e.seriesIndex,n=e.dataPointIndex,a=n===void 0?null:n,o=e.radius,r=o===void 0?null:o,d=e.size,g=d===void 0?null:d,x=e.strokeWidth,v=x===void 0?null:x,k=this.w,E=this.getMarkerStyle(i),F=g===null?k.globals.markers.size[i]:g,O=k.config.markers;return a!==null&&O.discrete.length&&O.discrete.map((function(N){N.seriesIndex===i&&N.dataPointIndex===a&&(E.pointStrokeColor=N.strokeColor,E.pointFillColor=N.fillColor,F=N.size,E.pointShape=N.shape)})),{pSize:r===null?F:r,pRadius:r!==null?r:O.radius,pointStrokeWidth:v!==null?v:Array.isArray(O.strokeWidth)?O.strokeWidth[i]:O.strokeWidth,pointStrokeColor:E.pointStrokeColor,pointFillColor:E.pointFillColor,shape:E.pointShape||(Array.isArray(O.shape)?O.shape[i]:O.shape),class:t,pointStrokeOpacity:Array.isArray(O.strokeOpacity)?O.strokeOpacity[i]:O.strokeOpacity,pointStrokeDashArray:Array.isArray(O.strokeDashArray)?O.strokeDashArray[i]:O.strokeDashArray,pointFillOpacity:Array.isArray(O.fillOpacity)?O.fillOpacity[i]:O.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(e){var t=this.w,i=new Lt(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,i=t.globals.markers.colors,n=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(n)?n[e]:n,pointFillColor:Array.isArray(i)?i[e]:i}}}]),s})(),_I=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return ci(s,[{key:"draw",value:function(e,t,i){var n=this.w,a=new Lt(this.ctx),o=i.realIndex,r=i.pointsPos,d=i.zRatio,g=i.elParent,x=a.group({class:"apexcharts-series-markers apexcharts-series-".concat(n.config.chart.type)});if(x.attr("clip-path","url(#gridRectMarkerMask".concat(n.globals.cuid,")")),Array.isArray(r.x))for(var v=0;v<r.x.length;v++){var k=t+1,E=!0;t===0&&v===0&&(k=0),t===0&&v===1&&(k=1);var F=n.globals.markers.size[o];if(d!==1/0){var O=n.config.plotOptions.bubble;F=n.globals.seriesZ[o][k],O.zScaling&&(F/=d),O.minBubbleRadius&&F<O.minBubbleRadius&&(F=O.minBubbleRadius),O.maxBubbleRadius&&F>O.maxBubbleRadius&&(F=O.maxBubbleRadius)}var N=r.x[v],$=r.y[v];if(F=F||0,$!==null&&n.globals.series[o][k]!==void 0||(E=!1),E){var X=this.drawPoint(N,$,F,o,k,t);x.add(X)}g.add(x)}}},{key:"drawPoint",value:function(e,t,i,n,a,o){var r=this.w,d=n,g=new Zf(this.ctx),x=new ls(this.ctx),v=new vl(this.ctx),k=new ep(this.ctx),E=new Lt(this.ctx),F=k.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:d,dataPointIndex:a,radius:r.config.chart.type==="bubble"||r.globals.comboCharts&&r.config.series[n]&&r.config.series[n].type==="bubble"?i:null}),O=v.fillPath({seriesNumber:n,dataPointIndex:a,color:F.pointFillColor,patternUnits:"objectBoundingBox",value:r.globals.series[n][o]}),N=E.drawMarker(e,t,F);if(r.config.series[d].data[a]&&r.config.series[d].data[a].fillColor&&(O=r.config.series[d].data[a].fillColor),N.attr({fill:O}),r.config.chart.dropShadow.enabled){var $=r.config.chart.dropShadow;x.dropShadow(N,$,n)}if(!this.initialAnim||r.globals.dataChanged||r.globals.resized)r.globals.animationEnded=!0;else{var X=r.config.chart.animations.speed;g.animateMarker(N,X,r.globals.easing,(function(){window.setTimeout((function(){g.animationCompleted(N)}),100)}))}return N.attr({rel:a,j:a,index:n,"default-marker-size":F.pSize}),x.setSelectionFilter(N,n,a),k.addEvents(N),N.node.classList.add("apexcharts-marker"),N}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),s})(),$f=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"dataLabelsCorrection",value:function(e,t,i,n,a,o,r){var d=this.w,g=!1,x=new Lt(this.ctx).getTextRects(i,r),v=x.width,k=x.height;t<0&&(t=0),t>d.globals.gridHeight+k&&(t=d.globals.gridHeight+k/2),d.globals.dataLabelsRects[n]===void 0&&(d.globals.dataLabelsRects[n]=[]),d.globals.dataLabelsRects[n].push({x:e,y:t,width:v,height:k});var E=d.globals.dataLabelsRects[n].length-2,F=d.globals.lastDrawnDataLabelsIndexes[n]!==void 0?d.globals.lastDrawnDataLabelsIndexes[n][d.globals.lastDrawnDataLabelsIndexes[n].length-1]:0;if(d.globals.dataLabelsRects[n][E]!==void 0){var O=d.globals.dataLabelsRects[n][F];(e>O.x+O.width||t>O.y+O.height||t+k<O.y||e+v<O.x)&&(g=!0)}return(a===0||o)&&(g=!0),{x:e,y:t,textRects:x,drawnextLabel:g}}},{key:"drawDataLabel",value:function(e){var t=this,i=e.type,n=e.pos,a=e.i,o=e.j,r=e.isRangeStart,d=e.strokeWidth,g=d===void 0?2:d,x=this.w,v=new Lt(this.ctx),k=x.config.dataLabels,E=0,F=0,O=o,N=null;if(x.globals.collapsedSeriesIndices.indexOf(a)!==-1||!k.enabled||!Array.isArray(n.x))return N;N=v.group({class:"apexcharts-data-labels"});for(var $=0;$<n.x.length;$++)if(E=n.x[$]+k.offsetX,F=n.y[$]+k.offsetY+g,!isNaN(E)){o===1&&$===0&&(O=0),o===1&&$===1&&(O=1);var X=x.globals.series[a][O];i==="rangeArea"&&(X=r?x.globals.seriesRangeStart[a][O]:x.globals.seriesRangeEnd[a][O]);var K="",ie=function(le){return x.config.dataLabels.formatter(le,{ctx:t.ctx,seriesIndex:a,dataPointIndex:O,w:x})};x.config.chart.type==="bubble"?(K=ie(X=x.globals.seriesZ[a][O]),F=n.y[$],F=new _I(this.ctx).centerTextInBubble(F,a,O).y):X!==void 0&&(K=ie(X));var ee=x.config.dataLabels.textAnchor;x.globals.isSlopeChart&&(ee=O===0?"end":O===x.config.series[a].data.length-1?"start":"middle"),this.plotDataLabelsText({x:E,y:F,text:K,i:a,j:O,parent:N,offsetCorrection:!0,dataLabelsConfig:x.config.dataLabels,textAnchor:ee})}return N}},{key:"plotDataLabelsText",value:function(e){var t=this.w,i=new Lt(this.ctx),n=e.x,a=e.y,o=e.i,r=e.j,d=e.text,g=e.textAnchor,x=e.fontSize,v=e.parent,k=e.dataLabelsConfig,E=e.color,F=e.alwaysDrawDataLabel,O=e.offsetCorrection,N=e.className,$=null;if(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(o)<0)return $;var X={x:n,y:a,drawnextLabel:!0,textRects:null};O&&(X=this.dataLabelsCorrection(n,a,d,o,r,F,parseInt(k.style.fontSize,10))),t.globals.zoomed||(n=X.x,a=X.y),X.textRects&&(n<-20-X.textRects.width||n>t.globals.gridWidth+X.textRects.width+30)&&(d="");var K=t.globals.dataLabels.style.colors[o];((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(K=t.globals.dataLabels.style.colors[r]),typeof K=="function"&&(K=K({series:t.globals.series,seriesIndex:o,dataPointIndex:r,w:t})),E&&(K=E);var ie=k.offsetX,ee=k.offsetY;if(t.config.chart.type!=="bar"&&t.config.chart.type!=="rangeBar"||(ie=0,ee=0),t.globals.isSlopeChart&&(r!==0&&(ie=-2*k.offsetX+5),r!==0&&r!==t.config.series[o].data.length-1&&(ie=0)),X.drawnextLabel){if(g==="middle"&&n===t.globals.gridWidth&&(g="end"),($=i.drawText({width:100,height:parseInt(k.style.fontSize,10),x:n+ie,y:a+ee,foreColor:K,textAnchor:g||k.textAnchor,text:d,fontSize:x||k.style.fontSize,fontFamily:k.style.fontFamily,fontWeight:k.style.fontWeight||"normal"})).attr({class:N||"apexcharts-datalabel",cx:n,cy:a}),k.dropShadow.enabled){var le=k.dropShadow;new ls(this.ctx).dropShadow($,le)}v.add($),t.globals.lastDrawnDataLabelsIndexes[o]===void 0&&(t.globals.lastDrawnDataLabelsIndexes[o]=[]),t.globals.lastDrawnDataLabelsIndexes[o].push(r)}return $}},{key:"addBackgroundToDataLabel",value:function(e,t){var i=this.w,n=i.config.dataLabels.background,a=n.padding,o=n.padding/2,r=t.width,d=t.height,g=new Lt(this.ctx).drawRect(t.x-a,t.y-o/2,r+2*a,d+o,n.borderRadius,i.config.chart.background!=="transparent"&&i.config.chart.background?i.config.chart.background:"#fff",n.opacity,n.borderWidth,n.borderColor);return n.dropShadow.enabled&&new ls(this.ctx).dropShadow(g,n.dropShadow),g}},{key:"dataLabelsBackground",value:function(){var e=this.w;if(e.config.chart.type!=="bubble")for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<t.length;i++){var n=t[i],a=n.getBBox(),o=null;if(a.width&&a.height&&(o=this.addBackgroundToDataLabel(n,a)),o){n.parentNode.insertBefore(o.node,n);var r=e.config.dataLabels.background.backgroundColor||n.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?o.animate().attr({fill:r}):o.attr({fill:r}),n.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),n=0;n<t.length;n++)i&&i.insertBefore(t[n],i.nextSibling)}}]),s})(),xI=`.apexcharts-flip-y {
  transform: scaleY(-1) translateY(-100%);
  transform-origin: top;
  transform-box: fill-box;
}
.apexcharts-flip-x {
  transform: scaleX(-1);
  transform-origin: center;
  transform-box: fill-box;
}
.apexcharts-legend {
  display: flex;
  overflow: auto;
  padding: 0 10px;
}
.apexcharts-legend.apexcharts-legend-group-horizontal {
  flex-direction: column;
}
.apexcharts-legend-group {
  display: flex;
}
.apexcharts-legend-group-vertical {
  flex-direction: column-reverse;
}
.apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
  flex-wrap: wrap
}
.apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
  flex-direction: column;
  bottom: 0;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
  justify-content: flex-start;
  align-items: flex-start;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
  justify-content: center;
  align-items: center;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
  justify-content: flex-end;
  align-items: flex-end;
}
.apexcharts-legend-series {
  cursor: pointer;
  line-height: normal;
  display: flex;
  align-items: center;
}
.apexcharts-legend-text {
  position: relative;
  font-size: 14px;
}
.apexcharts-legend-text *, .apexcharts-legend-marker * {
  pointer-events: none;
}
.apexcharts-legend-marker {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  margin-right: 1px;
}

.apexcharts-legend-series.apexcharts-no-click {
  cursor: auto;
}
.apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
  display: none !important;
}
.apexcharts-inactive-legend {
  opacity: 0.45;
} `,il=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return ci(s,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(Je.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),i=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(e,t){var i=this.w;function n(a){for(var o=0;o<a.length;o++)a[o].index===t&&e.node.classList.add("apexcharts-series-collapsed")}n(i.globals.collapsedSeries),n(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=this.w,a=Je.clone(n.globals.initialSeries);n.globals.previousPaths=[],i?(n.globals.collapsedSeries=[],n.globals.ancillaryCollapsedSeries=[],n.globals.collapsedSeriesIndices=[],n.globals.ancillaryCollapsedSeriesIndices=[]):a=this.emptyCollapsedSeries(a),n.config.series=a,e&&(t&&(n.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(a,n.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,i=0;i<e.length;i++)t.globals.collapsedSeriesIndices.indexOf(i)>-1&&(e[i].data=[]);return e}},{key:"highlightSeries",value:function(e){var t=this.w,i=this.getSeriesByName(e),n=parseInt(i?.getAttribute("data:realIndex"),10),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),o=null,r=null,d=null;if(t.globals.axisCharts||t.config.chart.type==="radialBar")if(t.globals.axisCharts){o=t.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),r=t.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"));var g=t.globals.seriesYAxisReverseMap[n];d=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(g,"']"))}else o=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']"));else o=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var x=0;x<a.length;x++)a[x].classList.add(this.legendInactiveClass);if(o)t.globals.axisCharts||o.parentNode.classList.remove(this.legendInactiveClass),o.classList.remove(this.legendInactiveClass),r!==null&&r.classList.remove(this.legendInactiveClass),d!==null&&d.classList.remove(this.legendInactiveClass);else for(var v=0;v<a.length;v++)a[v].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(e,t){var i=this.w;t||(t=e.target);var n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(e.type==="mousemove"){var a=parseInt(t.getAttribute("rel"),10)-1;this.highlightSeries(i.globals.seriesNames[a])}else if(e.type==="mouseout")for(var o=0;o<n.length;o++)n[o].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var i=this,n=this.w,a=n.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),o=function(g){for(var x=0;x<a.length;x++)a[x].classList[g](i.legendInactiveClass)};if(e.type==="mousemove"){var r=parseInt(t.getAttribute("rel"),10)-1;o("add");var d=n.config.plotOptions.heatmap.colorScale.ranges;(function(g,x){for(var v=0;v<a.length;v++){var k=Number(a[v].getAttribute("val"));k>=g.from&&(k<g.to||g.to===x&&k===x)&&a[v].classList.remove(i.legendInactiveClass)}})(d[r],d.reduce((function(g,x){return Math.max(g,x.to)}),0))}else e.type==="mouseout"&&o("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=this.w,n=0;if(i.config.series.length>1){for(var a=i.config.series.map((function(r,d){return r.data&&r.data.length>0&&i.globals.collapsedSeriesIndices.indexOf(d)===-1&&(!i.globals.comboCharts||t.length===0||t.length&&t.indexOf(i.config.series[d].type)>-1)?d:-1})),o=e==="asc"?0:a.length-1;e==="asc"?o<a.length:o>=0;e==="asc"?o++:o--)if(a[o]!==-1){n=a[o];break}}return n}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map((function(e,t){return e.type==="bar"||e.type==="column"?t:-1})).filter((function(e){return e!==-1})):this.w.config.series.map((function(e,t){return t}))}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(o,r,d){for(var g=o[r].childNodes,x={type:d,paths:[],realIndex:o[r].getAttribute("data:realIndex")},v=0;v<g.length;v++)if(g[v].hasAttribute("pathTo")){var k=g[v].getAttribute("pathTo");x.paths.push({d:k})}e.globals.previousPaths.push(x)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach((function(o){for(var r,d=(r=o,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r,"-series .apexcharts-series"))),g=0;g<d.length;g++)t(d,g,o)}));var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(i.length>0)for(var n=function(o){for(var r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(o,"'] rect")),d=[],g=function(v){var k=function(F){return r[v].getAttribute(F)},E={x:parseFloat(k("x")),y:parseFloat(k("y")),width:parseFloat(k("width")),height:parseFloat(k("height"))};d.push({rect:E,color:r[v].getAttribute("color")})},x=0;x<r.length;x++)g(x);e.globals.previousPaths.push(d)},a=0;a<i.length;a++)n(a);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,i=new Lt(this.ctx),n=e.globals.svgWidth/2,a=e.globals.svgHeight/2,o="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,t.align==="left"?(n=10,o="start"):t.align==="right"&&(n=e.globals.svgWidth-10,o="end"),t.verticalAlign==="top"?a=50:t.verticalAlign==="bottom"&&(a=e.globals.svgHeight-50),n+=t.offsetX,a=a+parseInt(t.style.fontSize,10)+2+t.offsetY,t.text!==void 0&&t.text!==""){var r=i.drawText({x:n,y:a,text:t.text,textAnchor:o,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(r)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,i=0;i<e.length;i++)if(e[i].length===0)for(var n=0;n<e[t.globals.maxValsInArrayIndex].length;n++)e[i].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,i=this.filteredSeriesX(),n=0;n<i.length-1;n++)if(i[n][0]!==i[n+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){var e=this.w.globals.seriesX.map((function(t){return t.length>0?t:[]}));return e}}]),s})(),bw=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new or(this.ctx)}return ci(s,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new il(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].x!==void 0&&e[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new il(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==void 0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var i=this.w.config,n=this.w.globals,a=i.chart.type==="boxPlot"||i.series[t].type==="boxPlot",o=0;o<e[t].data.length;o++)if(e[t].data[o][1]!==void 0&&(Array.isArray(e[t].data[o][1])&&e[t].data[o][1].length===4&&!a?this.twoDSeries.push(Je.parseNumber(e[t].data[o][1][3])):e[t].data[o].length>=5?this.twoDSeries.push(Je.parseNumber(e[t].data[o][4])):this.twoDSeries.push(Je.parseNumber(e[t].data[o][1])),n.dataFormatXNumeric=!0),i.xaxis.type==="datetime"){var r=new Date(e[t].data[o][0]);r=new Date(r).getTime(),this.twoDSeriesX.push(r)}else this.twoDSeriesX.push(e[t].data[o][0]);for(var d=0;d<e[t].data.length;d++)e[t].data[d][2]!==void 0&&(this.threeDSeries.push(e[t].data[d][2]),n.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var i=this.w.config,n=this.w.globals,a=new ss(this.ctx),o=t;n.collapsedSeriesIndices.indexOf(t)>-1&&(o=this.activeSeriesIndex);for(var r=0;r<e[t].data.length;r++)e[t].data[r].y!==void 0&&(Array.isArray(e[t].data[r].y)?this.twoDSeries.push(Je.parseNumber(e[t].data[r].y[e[t].data[r].y.length-1])):this.twoDSeries.push(Je.parseNumber(e[t].data[r].y))),e[t].data[r].goals!==void 0&&Array.isArray(e[t].data[r].goals)?(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[r].goals)):(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var d=0;d<e[o].data.length;d++){var g=typeof e[o].data[d].x=="string",x=Array.isArray(e[o].data[d].x),v=!x&&!!a.isValidDate(e[o].data[d].x);if(g||v)if(g||i.xaxis.convertedCatToNumeric){var k=n.isBarHorizontal&&n.isRangeData;i.xaxis.type!=="datetime"||k?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[o].data[d].x),isNaN(e[o].data[d].x)||this.w.config.xaxis.type==="category"||typeof e[o].data[d].x=="string"||(n.isXNumeric=!0)):this.twoDSeriesX.push(a.parseDate(e[o].data[d].x))}else i.xaxis.type==="datetime"?this.twoDSeriesX.push(a.parseDate(e[o].data[d].x.toString())):(n.dataFormatXNumeric=!0,n.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[o].data[d].x)));else x?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[o].data[d].x)):(n.isXNumeric=!0,n.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[o].data[d].x))}if(e[t].data[0]&&e[t].data[0].z!==void 0){for(var E=0;E<e[t].data.length;E++)this.threeDSeries.push(e[t].data[E].z);n.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleRangeDataFormat("xy",e,t)),i.seriesRangeStart[t]=n.start===void 0?[]:n.start,i.seriesRangeEnd[t]=n.end===void 0?[]:n.end,i.seriesRange[t]=n.rangeUniques,i.seriesRange.forEach((function(a,o){a&&a.forEach((function(r,d){r.y.forEach((function(g,x){for(var v=0;v<r.y.length;v++)if(x!==v){var k=g.y1,E=g.y2,F=r.y[v].y1;k<=r.y[v].y2&&F<=E&&(r.overlaps.indexOf(g.rangeName)<0&&r.overlaps.push(g.rangeName),r.overlaps.indexOf(r.y[v].rangeName)<0&&r.overlaps.push(r.y[v].rangeName))}}))}))})),n}},{key:"handleCandleStickBoxData",value:function(e,t){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleCandleStickBoxDataFormat("xy",e,t)),i.seriesCandleO[t]=n.o,i.seriesCandleH[t]=n.h,i.seriesCandleM[t]=n.m,i.seriesCandleL[t]=n.l,i.seriesCandleC[t]=n.c,n}},{key:"handleRangeDataFormat",value:function(e,t,i){var n=[],a=[],o=t[i].data.filter((function(x,v,k){return v===k.findIndex((function(E){return E.x===x.x}))})).map((function(x,v){return{x:x.x,overlaps:[],y:[]}}));if(e==="array")for(var r=0;r<t[i].data.length;r++)Array.isArray(t[i].data[r])?(n.push(t[i].data[r][1][0]),a.push(t[i].data[r][1][1])):(n.push(t[i].data[r]),a.push(t[i].data[r]));else if(e==="xy")for(var d=function(x){var v=Array.isArray(t[i].data[x].y),k=Je.randomId(),E=t[i].data[x].x,F={y1:v?t[i].data[x].y[0]:t[i].data[x].y,y2:v?t[i].data[x].y[1]:t[i].data[x].y,rangeName:k};t[i].data[x].rangeName=k;var O=o.findIndex((function(N){return N.x===E}));o[O].y.push(F),n.push(F.y1),a.push(F.y2)},g=0;g<t[i].data.length;g++)d(g);return{start:n,end:a,rangeUniques:o}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,i){var n=this.w,a=n.config.chart.type==="boxPlot"||n.config.series[i].type==="boxPlot",o=[],r=[],d=[],g=[],x=[];if(e==="array")if(a&&t[i].data[0].length===6||!a&&t[i].data[0].length===5)for(var v=0;v<t[i].data.length;v++)o.push(t[i].data[v][1]),r.push(t[i].data[v][2]),a?(d.push(t[i].data[v][3]),g.push(t[i].data[v][4]),x.push(t[i].data[v][5])):(g.push(t[i].data[v][3]),x.push(t[i].data[v][4]));else for(var k=0;k<t[i].data.length;k++)Array.isArray(t[i].data[k][1])&&(o.push(t[i].data[k][1][0]),r.push(t[i].data[k][1][1]),a?(d.push(t[i].data[k][1][2]),g.push(t[i].data[k][1][3]),x.push(t[i].data[k][1][4])):(g.push(t[i].data[k][1][2]),x.push(t[i].data[k][1][3])));else if(e==="xy")for(var E=0;E<t[i].data.length;E++)Array.isArray(t[i].data[E].y)&&(o.push(t[i].data[E].y[0]),r.push(t[i].data[E].y[1]),a?(d.push(t[i].data[E].y[2]),g.push(t[i].data[E].y[3]),x.push(t[i].data[E].y[4])):(g.push(t[i].data[E].y[2]),x.push(t[i].data[E].y[3])));return{o,h:r,m:d,l:g,c:x}}},{key:"parseDataAxisCharts",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,n=this.w.config,a=this.w.globals,o=new ss(i),r=n.labels.length>0?n.labels.slice():n.xaxis.categories.slice();a.isRangeBar=n.chart.type==="rangeBar"&&a.isBarHorizontal,a.hasXaxisGroups=n.xaxis.type==="category"&&n.xaxis.group.groups.length>0,a.hasXaxisGroups&&(a.groups=n.xaxis.group.groups),e.forEach((function(E,F){E.name!==void 0?a.seriesNames.push(E.name):a.seriesNames.push("series-"+parseInt(F+1,10))})),this.coreUtils.setSeriesYAxisMappings();var d=[],g=Hr(new Set(n.series.map((function(E){return E.group}))));n.series.forEach((function(E,F){var O=g.indexOf(E.group);d[O]||(d[O]=[]),d[O].push(a.seriesNames[F])})),a.seriesGroups=d;for(var x=function(){for(var E=0;E<r.length;E++)if(typeof r[E]=="string"){if(!o.isValidDate(r[E]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(o.parseDate(r[E]))}else t.twoDSeriesX.push(r[E])},v=0;v<e.length;v++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],e[v].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(n.chart.type!=="rangeBar"&&n.chart.type!=="rangeArea"&&e[v].type!=="rangeBar"&&e[v].type!=="rangeArea"||(a.isRangeData=!0,this.handleRangeData(e,v)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,v):this.isFormatXY()&&this.handleFormatXY(e,v),n.chart.type!=="candlestick"&&e[v].type!=="candlestick"&&n.chart.type!=="boxPlot"&&e[v].type!=="boxPlot"||this.handleCandleStickBoxData(e,v),a.series.push(this.twoDSeries),a.labels.push(this.twoDSeriesX),a.seriesX.push(this.twoDSeriesX),a.seriesGoals=this.seriesGoals,v!==this.activeSeriesIndex||this.fallbackToCategory||(a.isXNumeric=!0);else{n.xaxis.type==="datetime"?(a.isXNumeric=!0,x(),a.seriesX.push(this.twoDSeriesX)):n.xaxis.type==="numeric"&&(a.isXNumeric=!0,r.length>0&&(this.twoDSeriesX=r,a.seriesX.push(this.twoDSeriesX))),a.labels.push(this.twoDSeriesX);var k=e[v].data.map((function(E){return Je.parseNumber(E)}));a.series.push(k)}a.seriesZ.push(this.threeDSeries),e[v].color!==void 0?a.seriesColors.push(e[v].color):a.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,i=this.w.config,n=Array.isArray(e)&&e.every((function(x){return typeof x=="number"}))&&i.labels.length>0,a=Array.isArray(e)&&e.some((function(x){return x&&js(x)==="object"&&x.data||x&&js(x)==="object"&&x.parsing}));if(n&&a&&console.warn("ApexCharts: Both old format (numeric series + labels) and new format (series objects with data/parsing) detected. Using old format for backward compatibility."),n){t.series=e.slice(),t.seriesNames=i.labels.slice();for(var o=0;o<t.series.length;o++)t.seriesNames[o]===void 0&&t.seriesNames.push("series-"+(o+1));return this.w}if(Array.isArray(e)&&e.every((function(x){return typeof x=="number"}))){t.series=e.slice(),t.seriesNames=[];for(var r=0;r<t.series.length;r++)t.seriesNames.push(i.labels[r]||"series-".concat(r+1));return this.w}var d=this.extractPieDataFromSeries(e);t.series=d.values,t.seriesNames=d.labels,i.chart.type==="radialBar"&&(t.series=t.series.map((function(x){var v=Je.parseNumber(x);return v>100&&console.warn("ApexCharts: RadialBar value ".concat(v," > 100, consider using percentage values (0-100)")),v})));for(var g=0;g<t.series.length;g++)t.seriesNames[g]===void 0&&t.seriesNames.push("series-"+(g+1));return this.w}},{key:"resetParsingFlags",value:function(){var e=this.w;e.globals.dataWasParsed=!1,e.globals.originalSeries=null,e.config.series&&e.config.series.forEach((function(t){t.__apexParsed&&delete t.__apexParsed}))}},{key:"extractPieDataFromSeries",value:function(e){var t=[],i=[];if(!Array.isArray(e))return console.warn("ApexCharts: Expected array for series data"),{values:[],labels:[]};if(e.length===0)return console.warn("ApexCharts: Empty series array"),{values:[],labels:[]};var n=e[0];return js(n)==="object"&&n!==null&&n.data?(this.extractPieDataFromSeriesObjects(e,t,i),{values:t,labels:i}):(console.warn("ApexCharts: Unsupported series format for pie/donut/radialBar. Expected series objects with data property."),{values:[],labels:[]})}},{key:"extractPieDataFromSeriesObjects",value:function(e,t,i){e.forEach((function(n,a){n.data&&Array.isArray(n.data)?n.data.forEach((function(o){js(o)==="object"&&o!==null?o.x!==void 0&&o.y!==void 0?(i.push(String(o.x)),t.push(Je.parseNumber(o.y))):console.warn("ApexCharts: Invalid data point format for pie chart. Expected {x, y} format:",o):console.warn("ApexCharts: Expected object data point, got:",js(o))})):console.warn("ApexCharts: Series ".concat(a," has no valid data array"))}))}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,i=this.w.globals;t.xaxis.categories.length>0?i.labels=t.xaxis.categories:t.labels.length>0?i.labels=t.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map((function(n){n.forEach((function(a){i.labels.indexOf(a.x)<0&&a.x&&i.labels.push(a.x)}))})),i.labels=Array.from(new Set(i.labels.map(JSON.stringify)),JSON.parse)),t.xaxis.convertedCatToNumeric&&(new fm(t).convertCatToNumericXaxis(t,this.ctx,i.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,i=this.w.config,n=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var a=i.series.map((function(v,k){return v.data.filter((function(E,F,O){return O.findIndex((function(N){return N.x===E.x}))===F}))})),o=a.reduce((function(v,k,E,F){return F[v].length>k.length?v:E}),0),r=0;r<a[o].length;r++)n.push(r+1);else for(var d=0;d<t.series[t.maxValsInArrayIndex].length;d++)n.push(d+1);t.seriesX=[];for(var g=0;g<e.length;g++)t.seriesX.push(n);this.w.globals.isBarHorizontal||(t.isXNumeric=!0)}if(n.length===0){n=t.axisCharts?[]:t.series.map((function(v,k){return k+1}));for(var x=0;x<e.length;x++)t.seriesX.push(n)}t.labels=n,i.xaxis.convertedCatToNumeric&&(t.categoryLabels=n.map((function(v){return i.xaxis.labels.formatter(v)}))),t.noLabelsProvided=!0}},{key:"parseRawDataIfNeeded",value:function(e){var t=this,i=this.w.config,n=this.w.globals,a=i.parsing;if(n.dataWasParsed||!a&&!e.some((function(r){return r.parsing})))return e;var o=e.map((function(r,d){var g,x,v;if(!r.data||!Array.isArray(r.data)||r.data.length===0)return r;var k={x:((g=r.parsing)===null||g===void 0?void 0:g.x)||a?.x,y:((x=r.parsing)===null||x===void 0?void 0:x.y)||a?.y,z:((v=r.parsing)===null||v===void 0?void 0:v.z)||a?.z};if(!k.x&&!k.y)return r;var E=r.data[0];if(js(E)==="object"&&E!==null&&(E.hasOwnProperty("x")||E.hasOwnProperty("y"))||Array.isArray(E))return r;if(!k.x||!k.y||Array.isArray(k.y)&&k.y.length===0)return console.warn("ApexCharts: Series ".concat(d," has parsing config but missing x or y field specification")),r;var F=r.data.map((function(O,N){if(js(O)!=="object"||O===null)return console.warn("ApexCharts: Series ".concat(d,", data point ").concat(N," is not an object, skipping parsing")),O;var $,X=t.getNestedValue(O,k.x),K=void 0;if(Array.isArray(k.y)){var ie=k.y.map((function(te){return t.getNestedValue(O,te)}));$=t.w.config.chart.type==="bubble"&&ie.length===2?ie[0]:ie}else $=t.getNestedValue(O,k.y);k.z&&(K=t.getNestedValue(O,k.z)),X===void 0&&console.warn("ApexCharts: Series ".concat(d,", data point ").concat(N," missing field '").concat(k.x,"'")),$===void 0&&console.warn("ApexCharts: Series ".concat(d,", data point ").concat(N," missing field '").concat(k.y,"'"));var ee={x:X,y:$};if(t.w.config.chart.type==="bubble"&&Array.isArray(k.y)&&k.y.length===2){var le=t.getNestedValue(O,k.y[1]);le!==void 0&&(ee.z=le)}return K!==void 0&&(ee.z=K),ee}));return Xt(Xt({},r),{},{data:F,__apexParsed:!0})}));return n.dataWasParsed=!0,n.originalSeries||(n.originalSeries=Je.clone(e)),o}},{key:"getNestedValue",value:function(e,t){if(e&&js(e)==="object"&&t){if(t.indexOf(".")===-1)return e[t];for(var i=t.split("."),n=e,a=0;a<i.length;a++){if(n==null||js(n)!=="object")return;n=n[i[a]]}return n}}},{key:"parseData",value:function(e){var t=this.w,i=t.config,n=t.globals;if(e=this.parseRawDataIfNeeded(e),i.series=e,n.initialSeries=Je.clone(e),this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),n.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),i.chart.stacked){var a=new il(this.ctx);n.series=a.setNullSeriesToZeroValues(n.series)}this.coreUtils.getSeriesTotals(),n.axisCharts&&(n.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),n.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),n.dataFormatXNumeric||n.isXNumeric&&(i.xaxis.type!=="numeric"||i.labels.length!==0||i.xaxis.categories.length!==0)||this.handleExternalLabelsData(e);for(var o=this.coreUtils.getCategoryLabels(n.labels),r=0;r<o.length;r++)if(Array.isArray(o[r])){n.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this.w,t=[];e.globals.seriesYAxisMap.forEach((function(i,n){var a=0;i.forEach((function(o){e.globals.collapsedSeriesIndices.indexOf(o)!==-1&&a++})),a>0&&a==i.length&&t.push(n)})),e.globals.ignoreYAxisIndexes=t.map((function(i){return i}))}}]),s})(),Wg=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"svgStringToNode",value:function(e){return new DOMParser().parseFromString(e,"image/svg+xml").documentElement}},{key:"scaleSvgNode",value:function(e,t){var i=parseFloat(e.getAttributeNS(null,"width")),n=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",i*t),e.setAttributeNS(null,"height",n*t),e.setAttributeNS(null,"viewBox","0 0 "+i+" "+n)}},{key:"getSvgString",value:function(e){var t=this;return new Promise((function(i){var n=t.w,a=e||n.config.chart.toolbar.export.scale||n.config.chart.toolbar.export.width/n.globals.svgWidth;a||(a=1);var o=n.globals.svgWidth*a,r=n.globals.svgHeight*a,d=n.globals.dom.elWrap.cloneNode(!0);d.style.width=o+"px",d.style.height=r+"px";var g=new XMLSerializer().serializeToString(d),x=`
        .apexcharts-tooltip, .apexcharts-toolbar, .apexcharts-xaxistooltip, .apexcharts-yaxistooltip, .apexcharts-xcrosshairs, .apexcharts-ycrosshairs, .apexcharts-zoom-rect, .apexcharts-selection-rect {
          display: none;
        }
      `;n.config.legend.show&&n.globals.dom.elLegendWrap&&n.globals.dom.elLegendWrap.children.length>0&&(x+=xI);var v=`
        <svg xmlns="http://www.w3.org/2000/svg"
          version="1.1"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          class="apexcharts-svg"
          xmlns:data="ApexChartsNS"
          transform="translate(0, 0)"
          width="`.concat(n.globals.svgWidth,'px" height="').concat(n.globals.svgHeight,`px">
          <foreignObject width="100%" height="100%">
            <div xmlns="http://www.w3.org/1999/xhtml" style="width:`).concat(o,"px; height:").concat(r,`px;">
            <style type="text/css">
              `).concat(x,`
            </style>
              `).concat(g,`
            </div>
          </foreignObject>
        </svg>
      `),k=t.svgStringToNode(v);a!==1&&t.scaleSvgNode(k,a),t.convertImagesToBase64(k).then((function(){v=new XMLSerializer().serializeToString(k),i(v.replace(/&nbsp;/g,"&#160;"))}))}))}},{key:"convertImagesToBase64",value:function(e){var t=this,i=e.getElementsByTagName("image"),n=Array.from(i).map((function(a){var o=a.getAttributeNS("http://www.w3.org/1999/xlink","href");return o&&!o.startsWith("data:")?t.getBase64FromUrl(o).then((function(r){a.setAttributeNS("http://www.w3.org/1999/xlink","href",r)})).catch((function(r){console.error("Error converting image to base64:",r)})):Promise.resolve()}));return Promise.all(n)}},{key:"getBase64FromUrl",value:function(e){return new Promise((function(t,i){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var a=document.createElement("canvas");a.width=n.width,a.height=n.height,a.getContext("2d").drawImage(n,0,0),t(a.toDataURL())},n.onerror=i,n.src=e}))}},{key:"svgUrl",value:function(){var e=this;return new Promise((function(t){e.getSvgString().then((function(i){var n=new Blob([i],{type:"image/svg+xml;charset=utf-8"});t(URL.createObjectURL(n))}))}))}},{key:"dataURI",value:function(e){var t=this;return new Promise((function(i){var n=t.w,a=e?e.scale||e.width/n.globals.svgWidth:1,o=document.createElement("canvas");o.width=n.globals.svgWidth*a,o.height=parseInt(n.globals.dom.elWrap.style.height,10)*a;var r=n.config.chart.background!=="transparent"&&n.config.chart.background?n.config.chart.background:"#fff",d=o.getContext("2d");d.fillStyle=r,d.fillRect(0,0,o.width*a,o.height*a),t.getSvgString(a).then((function(g){var x="data:image/svg+xml,"+encodeURIComponent(g),v=new Image;v.crossOrigin="anonymous",v.onload=function(){if(d.drawImage(v,0,0),o.msToBlob){var k=o.msToBlob();i({blob:k})}else{var E=o.toDataURL("image/png");i({imgURI:E})}},v.src=x}))}))}},{key:"exportToSVG",value:function(){var e=this;this.svgUrl().then((function(t){e.triggerDownload(t,e.w.config.chart.toolbar.export.svg.filename,".svg")}))}},{key:"exportToPng",value:function(){var e=this,t=this.w.config.chart.toolbar.export.scale,i=this.w.config.chart.toolbar.export.width,n=t?{scale:t}:i?{width:i}:void 0;this.dataURI(n).then((function(a){var o=a.imgURI,r=a.blob;r?navigator.msSaveOrOpenBlob(r,e.w.globals.chartID+".png"):e.triggerDownload(o,e.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(e){var t=this,i=e.series,n=e.fileName,a=e.columnDelimiter,o=a===void 0?",":a,r=e.lineDelimiter,d=r===void 0?`
`:r,g=this.w;i||(i=g.config.series);var x=[],v=[],k="",E=g.globals.series.map((function(ee,le){return g.globals.collapsedSeriesIndices.indexOf(le)===-1?ee:[]})),F=function(ee){return typeof g.config.chart.toolbar.export.csv.categoryFormatter=="function"?g.config.chart.toolbar.export.csv.categoryFormatter(ee):g.config.xaxis.type==="datetime"&&String(ee).length>=10?new Date(ee).toDateString():Je.isNumber(ee)?ee:ee.split(o).join("")},O=function(ee){return typeof g.config.chart.toolbar.export.csv.valueFormatter=="function"?g.config.chart.toolbar.export.csv.valueFormatter(ee):ee},N=Math.max.apply(Math,Hr(i.map((function(ee){return ee.data?ee.data.length:0})))),$=new bw(this.ctx),X=new Mh(this.ctx),K=function(ee){var le="";if(g.globals.axisCharts){if(g.config.xaxis.type==="category"||g.config.xaxis.convertedCatToNumeric)if(g.globals.isBarHorizontal){var te=g.globals.yLabelFormatters[0],he=new il(t.ctx).getActiveConfigSeriesIndex();le=te(g.globals.labels[ee],{seriesIndex:he,dataPointIndex:ee,w:g})}else le=X.getLabel(g.globals.labels,g.globals.timescaleLabels,0,ee).text;g.config.xaxis.type==="datetime"&&(g.config.xaxis.categories.length?le=g.config.xaxis.categories[ee]:g.config.labels.length&&(le=g.config.labels[ee]))}else le=g.config.labels[ee];return le===null?"nullvalue":(Array.isArray(le)&&(le=le.join(" ")),Je.isNumber(le)?le:le.split(o).join(""))},ie=function(ee,le){if(x.length&&le===0&&v.push(x.join(o)),ee.data){ee.data=ee.data.length&&ee.data||Hr(Array(N)).map((function(){return""}));for(var te=0;te<ee.data.length;te++){x=[];var he=K(te);if(he!=="nullvalue"){if(he||($.isFormatXY()?he=i[le].data[te].x:$.isFormat2DArray()&&(he=i[le].data[te]?i[le].data[te][0]:"")),le===0){x.push(F(he));for(var de=0;de<g.globals.series.length;de++){var ke,De=$.isFormatXY()?(ke=i[de].data[te])===null||ke===void 0?void 0:ke.y:E[de][te];x.push(O(De))}}(g.config.chart.type==="candlestick"||ee.type&&ee.type==="candlestick")&&(x.pop(),x.push(g.globals.seriesCandleO[le][te]),x.push(g.globals.seriesCandleH[le][te]),x.push(g.globals.seriesCandleL[le][te]),x.push(g.globals.seriesCandleC[le][te])),(g.config.chart.type==="boxPlot"||ee.type&&ee.type==="boxPlot")&&(x.pop(),x.push(g.globals.seriesCandleO[le][te]),x.push(g.globals.seriesCandleH[le][te]),x.push(g.globals.seriesCandleM[le][te]),x.push(g.globals.seriesCandleL[le][te]),x.push(g.globals.seriesCandleC[le][te])),g.config.chart.type==="rangeBar"&&(x.pop(),x.push(g.globals.seriesRangeStart[le][te]),x.push(g.globals.seriesRangeEnd[le][te])),x.length&&v.push(x.join(o))}}}};x.push(g.config.chart.toolbar.export.csv.headerCategory),g.config.chart.type==="boxPlot"?(x.push("minimum"),x.push("q1"),x.push("median"),x.push("q3"),x.push("maximum")):g.config.chart.type==="candlestick"?(x.push("open"),x.push("high"),x.push("low"),x.push("close")):g.config.chart.type==="rangeBar"?(x.push("minimum"),x.push("maximum")):i.map((function(ee,le){var te=(ee.name?ee.name:"series-".concat(le))+"";g.globals.axisCharts&&x.push(te.split(o).join("")?te.split(o).join(""):"series-".concat(le))})),g.globals.axisCharts||(x.push(g.config.chart.toolbar.export.csv.headerValue),v.push(x.join(o))),g.globals.allSeriesHasEqualX||!g.globals.axisCharts||g.config.xaxis.categories.length||g.config.labels.length?i.map((function(ee,le){g.globals.axisCharts?ie(ee,le):((x=[]).push(F(g.globals.labels[le])),x.push(O(E[le])),v.push(x.join(o)))})):(function(){var ee=new Set,le={};i.forEach((function(te,he){te?.data.forEach((function(de){var ke,De;if($.isFormatXY())ke=de.x,De=de.y;else{if(!$.isFormat2DArray())return;ke=de[0],De=de[1]}le[ke]||(le[ke]=Array(i.length).fill("")),le[ke][he]=O(De),ee.add(ke)}))})),x.length&&v.push(x.join(o)),Array.from(ee).sort().forEach((function(te){v.push([F(te),le[te].join(o)])}))})(),k+=v.join(d),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+k),n||g.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,i){var n=document.createElement("a");n.href=e,n.download=(t||this.w.globals.chartID)+i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}]),s})(),gm=(function(){function s(e,t){li(this,s),this.ctx=e,this.elgrid=t,this.w=e.w;var i=this.w;this.axesUtils=new Mh(e),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],i.config.xaxis.position==="top"?this.offY=0:this.offY=i.globals.gridHeight,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),String(this.xaxisBorderWidth).indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return ci(s,[{key:"drawXaxis",value:function(){var e=this.w,t=new Lt(this.ctx),i=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),n=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});i.add(n);for(var a=[],o=0;o<this.xaxisLabels.length;o++)a.push(this.xaxisLabels[o]);if(this.drawXAxisLabelAndGroup(!0,t,n,a,e.globals.isXNumeric,(function(F,O){return O})),e.globals.hasXaxisGroups){var r=e.globals.groups;a=[];for(var d=0;d<r.length;d++)a.push(r[d].title);var g={};e.config.xaxis.group.style&&(g.xaxisFontSize=e.config.xaxis.group.style.fontSize,g.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,g.xaxisForeColors=e.config.xaxis.group.style.colors,g.fontWeight=e.config.xaxis.group.style.fontWeight,g.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,n,a,!1,(function(F,O){return r[F].cols*O}),g)}if(e.config.xaxis.title.text!==void 0){var x=t.group({class:"apexcharts-xaxis-title"}),v=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});x.add(v),i.add(x)}if(e.config.xaxis.axisBorder.show){var k=e.globals.barPadForNumericAxis,E=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-k,this.offY,this.xaxisBorderWidth+k,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(E):i.add(E)}return i}},{key:"drawXAxisLabelAndGroup",value:function(e,t,i,n,a,o){var r,d=this,g=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},x=[],v=[],k=this.w,E=g.xaxisFontSize||this.xaxisFontSize,F=g.xaxisFontFamily||this.xaxisFontFamily,O=g.xaxisForeColors||this.xaxisForeColors,N=g.fontWeight||k.config.xaxis.labels.style.fontWeight,$=g.cssClass||k.config.xaxis.labels.style.cssClass,X=k.globals.padHorizontal,K=n.length,ie=k.config.xaxis.type==="category"?k.globals.dataPoints:K;if(ie===0&&K>ie&&(ie=K),a){var ee=Math.max(Number(k.config.xaxis.tickAmount)||1,ie>1?ie-1:ie);r=k.globals.gridWidth/Math.min(ee,K-1),X=X+o(0,r)/2+k.config.xaxis.labels.offsetX}else r=k.globals.gridWidth/ie,X=X+o(0,r)+k.config.xaxis.labels.offsetX;for(var le=function(he){var de=X-o(he,r)/2+k.config.xaxis.labels.offsetX;he===0&&K===1&&r/2===X&&ie===1&&(de=k.globals.gridWidth/2);var ke=d.axesUtils.getLabel(n,k.globals.timescaleLabels,de,he,x,E,e),De=28;if(k.globals.rotateXLabels&&e&&(De=22),k.config.xaxis.title.text&&k.config.xaxis.position==="top"&&(De+=parseFloat(k.config.xaxis.title.style.fontSize)+2),e||(De=De+parseFloat(E)+(k.globals.xAxisLabelsHeight-k.globals.xAxisGroupLabelsHeight)+(k.globals.rotateXLabels?10:0)),ke=k.config.xaxis.tickAmount!==void 0&&k.config.xaxis.tickAmount!=="dataPoints"&&k.config.xaxis.type!=="datetime"?d.axesUtils.checkLabelBasedOnTickamount(he,ke,K):d.axesUtils.checkForOverflowingLabels(he,ke,K,x,v),k.config.xaxis.labels.show){var Ae=t.drawText({x:ke.x,y:d.offY+k.config.xaxis.labels.offsetY+De-(k.config.xaxis.position==="top"?k.globals.xAxisHeight+k.config.xaxis.axisTicks.height-2:0),text:ke.text,textAnchor:"middle",fontWeight:ke.isBold?600:N,fontSize:E,fontFamily:F,foreColor:Array.isArray(O)?e&&k.config.xaxis.convertedCatToNumeric?O[k.globals.minX+he-1]:O[he]:O,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+$});if(i.add(Ae),Ae.on("click",(function(et){if(typeof k.config.chart.events.xAxisLabelClick=="function"){var Ie=Object.assign({},k,{labelIndex:he});k.config.chart.events.xAxisLabelClick(et,d.ctx,Ie)}})),e){var $e=document.createElementNS(k.globals.SVGNS,"title");$e.textContent=Array.isArray(ke.text)?ke.text.join(" "):ke.text,Ae.node.appendChild($e),ke.text!==""&&(x.push(ke.text),v.push(ke))}}he<K-1&&(X+=o(he+1,r))},te=0;te<=K-1;te++)le(te)}},{key:"drawXaxisInversed",value:function(e){var t,i,n=this,a=this.w,o=new Lt(this.ctx),r=a.config.yaxis[0].opposite?a.globals.translateYAxisX[e]:0,d=o.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),g=o.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+r+", 0)"});d.add(g);var x=[];if(a.config.yaxis[e].show)for(var v=0;v<this.xaxisLabels.length;v++)x.push(this.xaxisLabels[v]);t=a.globals.gridHeight/x.length,i=-t/2.2;var k=a.globals.yLabelFormatters[0],E=a.config.yaxis[0].labels;if(E.show)for(var F=function(ee){var le=x[ee]===void 0?"":x[ee];le=k(le,{seriesIndex:e,dataPointIndex:ee,w:a});var te=n.axesUtils.getYAxisForeColor(E.style.colors,e),he=0;Array.isArray(le)&&(he=le.length/2*parseInt(E.style.fontSize,10));var de=E.offsetX-15,ke="end";n.yaxis.opposite&&(ke="start"),a.config.yaxis[0].labels.align==="left"?(de=E.offsetX,ke="start"):a.config.yaxis[0].labels.align==="center"?(de=E.offsetX,ke="middle"):a.config.yaxis[0].labels.align==="right"&&(ke="end");var De=o.drawText({x:de,y:i+t+E.offsetY-he,text:le,textAnchor:ke,foreColor:Array.isArray(te)?te[ee]:te,fontSize:E.style.fontSize,fontFamily:E.style.fontFamily,fontWeight:E.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+E.style.cssClass,maxWidth:E.maxWidth});g.add(De),De.on("click",(function(et){if(typeof a.config.chart.events.xAxisLabelClick=="function"){var Ie=Object.assign({},a,{labelIndex:ee});a.config.chart.events.xAxisLabelClick(et,n.ctx,Ie)}}));var Ae=document.createElementNS(a.globals.SVGNS,"title");if(Ae.textContent=Array.isArray(le)?le.join(" "):le,De.node.appendChild(Ae),a.config.yaxis[e].labels.rotate!==0){var $e=o.rotateAroundCenter(De.node);De.node.setAttribute("transform","rotate(".concat(a.config.yaxis[e].labels.rotate," 0 ").concat($e.y,")"))}i+=t},O=0;O<=x.length-1;O++)F(O);if(a.config.yaxis[0].title.text!==void 0){var N=o.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+r+", 0)"}),$=o.drawText({x:a.config.yaxis[0].title.offsetX,y:a.globals.gridHeight/2+a.config.yaxis[0].title.offsetY,text:a.config.yaxis[0].title.text,textAnchor:"middle",foreColor:a.config.yaxis[0].title.style.color,fontSize:a.config.yaxis[0].title.style.fontSize,fontWeight:a.config.yaxis[0].title.style.fontWeight,fontFamily:a.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+a.config.yaxis[0].title.style.cssClass});N.add($),d.add(N)}var X=0;this.isCategoryBarHorizontal&&a.config.yaxis[0].opposite&&(X=a.globals.gridWidth);var K=a.config.xaxis.axisBorder;if(K.show){var ie=o.drawLine(a.globals.padHorizontal+K.offsetX+X,1+K.offsetY,a.globals.padHorizontal+K.offsetX+X,a.globals.gridHeight+K.offsetY,K.color,0);this.elgrid&&this.elgrid.elGridBorders&&a.config.grid.show?this.elgrid.elGridBorders.add(ie):d.add(ie)}return a.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(X,x.length,a.config.yaxis[0].axisBorder,a.config.yaxis[0].axisTicks,0,t,d),d}},{key:"drawXaxisTicks",value:function(e,t,i){var n=this.w,a=e;if(!(e<0||e-2>n.globals.gridWidth)){var o=this.offY+n.config.xaxis.axisTicks.offsetY;if(t=t+o+n.config.xaxis.axisTicks.height,n.config.xaxis.position==="top"&&(t=o-n.config.xaxis.axisTicks.height),n.config.xaxis.axisTicks.show){var r=new Lt(this.ctx).drawLine(e+n.config.xaxis.axisTicks.offsetX,o+n.config.xaxis.offsetY,a+n.config.xaxis.axisTicks.offsetX,t+n.config.xaxis.offsetY,n.config.xaxis.axisTicks.color);i.add(r),r.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],i=this.xaxisLabels.length,n=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var a=0;a<i;a++)n=this.xaxisLabels[a].position,t.push(n);else for(var o=i,r=0;r<o;r++){var d=o;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(d-=1),n+=e.globals.gridWidth/d,t.push(n)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new Lt(this.ctx),i=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var r=0;r<n.length;r++){var d=t.rotateAroundCenter(n[r]);d.y=d.y-1,d.x=d.x+1,n[r].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(d.x," ").concat(d.y,")")),n[r].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var g=n[r].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(g,(function(E){t.placeTextWithEllipsis(E,E.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))}))}else(function(){for(var E=e.globals.gridWidth/(e.globals.labels.length+1),F=0;F<n.length;F++){var O=n[F].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(O,(function(N){t.placeTextWithEllipsis(N,N.textContent,E)}))}})();if(a.length>0){var x=a[a.length-1].getBBox(),v=a[0].getBBox();x.x<-20&&a[a.length-1].parentNode.removeChild(a[a.length-1]),v.x+v.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&a[0].parentNode.removeChild(a[0]);for(var k=0;k<o.length;k++)t.placeTextWithEllipsis(o[k],o[k].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),s})(),yI=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w;var t=this.w;this.xaxisLabels=t.globals.labels.slice(),this.axesUtils=new Mh(e),this.isRangeBar=t.globals.seriesRange.length&&t.globals.isBarHorizontal,t.globals.timescaleLabels.length>0&&(this.xaxisLabels=t.globals.timescaleLabels.slice())}return ci(s,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w,i=new Lt(this.ctx);e||(e=i.group({class:"apexcharts-grid"}));var n=i.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),a=i.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(a),e.add(n),e}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var e=this.renderGrid();return this.drawGridArea(e.el),e}return null}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,i=new Lt(this.ctx),n=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,Hr(e.config.stroke.width)):e.config.stroke.width,a=function(x){var v=document.createElementNS(t.SVGNS,"clipPath");return v.setAttribute("id",x),v};t.dom.elGridRectMask=a("gridRectMask".concat(t.cuid)),t.dom.elGridRectBarMask=a("gridRectBarMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=a("gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=a("forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=a("nonForecastMask".concat(t.cuid));var o=0,r=0;(["bar","rangeBar","candlestick","boxPlot"].includes(e.config.chart.type)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=Math.max(e.config.grid.padding.left,t.barPadForNumericAxis),r=Math.max(e.config.grid.padding.right,t.barPadForNumericAxis)),t.dom.elGridRect=i.drawRect(-n/2-2,-n/2-2,t.gridWidth+n+4,t.gridHeight+n+4,0,"#fff"),t.dom.elGridRectBar=i.drawRect(-n/2-o-2,-n/2-2,t.gridWidth+n+r+o+4,t.gridHeight+n+4,0,"#fff");var d=e.globals.markers.largestSize;t.dom.elGridRectMarker=i.drawRect(Math.min(-n/2-o-2,-d),-d,t.gridWidth+Math.max(n+r+o+4,2*d),t.gridHeight+2*d,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectBarMask.appendChild(t.dom.elGridRectBar.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var g=t.dom.baseEl.querySelector("defs");g.appendChild(t.dom.elGridRectMask),g.appendChild(t.dom.elGridRectBarMask),g.appendChild(t.dom.elGridRectMarkerMask),g.appendChild(t.dom.elForecastMask),g.appendChild(t.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,i=e.x1,n=e.y1,a=e.x2,o=e.y2,r=e.xCount,d=e.parent,g=this.w;if(!(t===0&&g.globals.skipFirstTimelinelabel||t===r-1&&g.globals.skipLastTimelinelabel&&!g.config.xaxis.labels.formatter||g.config.chart.type==="radar")){g.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:i,y1:n,x2:a,y2:o,xCount:r,parent:d});var x=0;if(g.globals.hasXaxisGroups&&g.config.xaxis.tickPlacement==="between"){var v=g.globals.groups;if(v){for(var k=0,E=0;k<t&&E<v.length;E++)k+=v[E].cols;k===t&&(x=.6*g.globals.xAxisLabelsHeight)}}new gm(this.ctx).drawXaxisTicks(i,x,g.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,i=e.x1,n=e.y1,a=e.x2,o=e.y2,r=e.xCount,d=e.parent,g=this.w,x=d.node.classList.contains("apexcharts-gridlines-horizontal"),v=g.globals.barPadForNumericAxis,k=n===0&&o===0||i===0&&a===0||n===g.globals.gridHeight&&o===g.globals.gridHeight||g.globals.isBarHorizontal&&(t===0||t===r-1),E=new Lt(this).drawLine(i-(x?v:0),n,a+(x?v:0),o,g.config.grid.borderColor,g.config.grid.strokeDashArray);E.node.classList.add("apexcharts-gridline"),k&&g.config.grid.show?this.elGridBorders.add(E):d.add(E)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,i=e.x1,n=e.y1,a=e.x2,o=e.y2,r=e.type,d=this.w,g=new Lt(this.ctx),x=d.globals.barPadForNumericAxis,v=d.config.grid[r].colors[t],k=g.drawRect(i-(r==="row"?x:0),n,a+(r==="row"?2*x:0),o,0,v,d.config.grid[r].opacity);this.elg.add(k),k.attr("clip-path","url(#gridRectMask".concat(d.globals.cuid,")")),k.node.classList.add("apexcharts-grid-".concat(r))}},{key:"_drawXYLines",value:function(e){var t=this,i=e.xCount,n=e.tickAmount,a=this.w;if(a.config.grid.xaxis.lines.show||a.config.xaxis.axisTicks.show){var o,r=a.globals.padHorizontal,d=a.globals.gridHeight;a.globals.timescaleLabels.length?(function(F){for(var O=F.xC,N=F.x1,$=F.y1,X=F.x2,K=F.y2,ie=0;ie<O;ie++)N=t.xaxisLabels[ie].position,X=t.xaxisLabels[ie].position,t._drawGridLines({i:ie,x1:N,y1:$,x2:X,y2:K,xCount:i,parent:t.elgridLinesV})})({xC:i,x1:r,y1:0,x2:o,y2:d}):(a.globals.isXNumeric&&(i=a.globals.xAxisScale.result.length),(function(F){for(var O=F.xC,N=F.x1,$=F.y1,X=F.x2,K=F.y2,ie=0;ie<O+(a.globals.isXNumeric?0:1);ie++)ie===0&&O===1&&a.globals.dataPoints===1&&(X=N=a.globals.gridWidth/2),t._drawGridLines({i:ie,x1:N,y1:$,x2:X,y2:K,xCount:i,parent:t.elgridLinesV}),X=N+=a.globals.gridWidth/(a.globals.isXNumeric?O-1:O)})({xC:i,x1:r,y1:0,x2:o,y2:d}))}if(a.config.grid.yaxis.lines.show){var g=0,x=0,v=a.globals.gridWidth,k=n+1;this.isRangeBar&&(k=a.globals.labels.length);for(var E=0;E<k+(this.isRangeBar?1:0);E++)this._drawGridLine({i:E,xCount:k+(this.isRangeBar?1:0),x1:0,y1:g,x2:v,y2:x,parent:this.elgridLinesH}),x=g+=a.globals.gridHeight/(this.isRangeBar?k:n)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var n,a=i.globals.padHorizontal,o=i.globals.gridHeight,r=0;r<t+1;r++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:r,xCount:t+1,x1:a,y1:0,x2:n,y2:o,parent:this.elgridLinesV}),new gm(this.ctx).drawXaxisTicks(a,0,i.globals.dom.elGraphical),n=a+=i.globals.gridWidth/t;if(i.config.grid.yaxis.lines.show)for(var d=0,g=0,x=i.globals.gridWidth,v=0;v<i.globals.dataPoints+1;v++)this._drawGridLine({i:v,xCount:i.globals.dataPoints+1,x1:0,y1:d,x2:x,y2:g,parent:this.elgridLinesH}),g=d+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=e.globals,i=new Lt(this.ctx);this.elg=i.group({class:"apexcharts-grid"}),this.elgridLinesH=i.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=i.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=i.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var n=0;n<t.seriesYAxisMap.length&&t.ignoreYAxisIndexes.includes(n);)n++;n===t.seriesYAxisMap.length&&(n=0);var a,o=t.yAxisScale[n].result.length-1;if(!t.isBarHorizontal||this.isRangeBar){var r,d,g;a=this.xaxisLabels.length,this.isRangeBar&&(o=t.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(a=e.config.xaxis.tickAmount),((r=t.yAxisScale)===null||r===void 0||(d=r[n])===null||d===void 0||(g=d.result)===null||g===void 0?void 0:g.length)>0&&e.config.xaxis.type!=="datetime"&&(a=t.yAxisScale[n].result.length-1)),this._drawXYLines({xCount:a,tickAmount:o})}else a=o,o=t.xTickAmount,this._drawInvertedXYLines({xCount:a,tickAmount:o});return this.drawGridBands(a,o),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.gridWidth/a}}},{key:"drawGridBands",value:function(e,t){var i,n,a=this,o=this.w;if(((i=o.config.grid.row.colors)===null||i===void 0?void 0:i.length)>0&&(function(F,O,N,$,X,K){for(var ie=0,ee=0;ie<O;ie++,ee++)ee>=o.config.grid[F].colors.length&&(ee=0),a._drawGridBandRect({c:ee,x1:N,y1:$,x2:X,y2:K,type:F}),$+=o.globals.gridHeight/t})("row",t,0,0,o.globals.gridWidth,o.globals.gridHeight/t),((n=o.config.grid.column.colors)===null||n===void 0?void 0:n.length)>0){var r=o.globals.isBarHorizontal||o.config.xaxis.tickPlacement!=="on"||o.config.xaxis.type!=="category"&&!o.config.xaxis.convertedCatToNumeric?e:e-1;o.globals.isXNumeric&&(r=o.globals.xAxisScale.result.length-1);for(var d=o.globals.padHorizontal,g=o.globals.padHorizontal+o.globals.gridWidth/r,x=o.globals.gridHeight,v=0,k=0;v<e;v++,k++){var E;k>=o.config.grid.column.colors.length&&(k=0),o.config.xaxis.type==="datetime"&&(d=this.xaxisLabels[v].position,g=(((E=this.xaxisLabels[v+1])===null||E===void 0?void 0:E.position)||o.globals.gridWidth)-this.xaxisLabels[v].position),this._drawGridBandRect({c:k,x1:d,y1:0,x2:g,y2:x,type:"column"}),d+=o.globals.gridWidth/r}}}}]),s})(),vI=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.coreUtils=new or(this.ctx)}return ci(s,[{key:"niceScale",value:function(e,t){var i,n,a,o,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=1e-11,g=this.w,x=g.globals;x.isBarHorizontal?(i=g.config.xaxis,n=Math.max((x.svgWidth-100)/25,2)):(i=g.config.yaxis[r],n=Math.max((x.svgHeight-100)/15,2)),Je.isNumber(n)||(n=10),a=i.min!==void 0&&i.min!==null,o=i.max!==void 0&&i.min!==null;var v=i.stepSize!==void 0&&i.stepSize!==null,k=i.tickAmount!==void 0&&i.tickAmount!==null,E=k?i.tickAmount:x.niceScaleDefaultTicks[Math.min(Math.round(n/2),x.niceScaleDefaultTicks.length-1)];if(x.isMultipleYAxis&&!k&&x.multiAxisTickAmount>0&&(E=x.multiAxisTickAmount,k=!0),E=E==="dataPoints"?x.dataPoints-1:Math.abs(Math.round(E)),(e===Number.MIN_VALUE&&t===0||!Je.isNumber(e)&&!Je.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)&&(e=Je.isNumber(i.min)?i.min:0,t=Je.isNumber(i.max)?i.max:e+E,x.allSeriesCollapsed=!1),e>t){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var F=t;t=e,e=F}else e===t&&(e=e===0?0:e-1,t=t===0?2:t+1);var O=[];E<1&&(E=1);var N=E,$=Math.abs(t-e);!a&&e>0&&e/$<.15&&(e=0,a=!0),!o&&t<0&&-t/$<.15&&(t=0,o=!0);var X=($=Math.abs(t-e))/N,K=X,ie=Math.floor(Math.log10(K)),ee=Math.pow(10,ie),le=Math.ceil(K/ee);if(X=K=(le=x.niceScaleAllowedMagMsd[x.yValueDecimal===0?0:1][le])*ee,x.isBarHorizontal&&i.stepSize&&i.type!=="datetime"?(X=i.stepSize,v=!0):v&&(X=i.stepSize),v&&i.forceNiceScale){var te=Math.floor(Math.log10(X));X*=Math.pow(10,ie-te)}if(a&&o){var he=$/N;if(k)if(v)if(Je.mod($,X)!=0){var de=Je.getGCD(X,he);X=he/de<10?de:he}else Je.mod(X,he)==0?X=he:(he=X,k=!1);else X=he;else if(v)Je.mod($,X)==0?he=X:X=he;else if(Je.mod($,X)==0)he=X;else{he=$/(N=Math.ceil($/X));var ke=Je.getGCD($,X);$/ke<n&&(he=ke),X=he}N=Math.round($/X)}else{if(a||o){if(o)if(k)e=t-X*N;else{var De=e;e=X*Math.floor(e/X),Math.abs(t-e)/Je.getGCD($,X)>n&&(e=t-X*E,e+=X*Math.floor((De-e)/X))}else if(a)if(k)t=e+X*N;else{var Ae=t;t=X*Math.ceil(t/X),Math.abs(t-e)/Je.getGCD($,X)>n&&(t=e+X*E,t+=X*Math.ceil((Ae-t)/X))}}else if(x.isMultipleYAxis&&k){var $e=X*Math.floor(e/X),et=$e+X*N;et<t&&(X*=2),et=t,t=(e=$e)+X*N,$=Math.abs(t-e),e>0&&e<Math.abs(et-t)&&(e=0,t=X*N),t<0&&-t<Math.abs($e-e)&&(t=0,e=-X*N)}else e=X*Math.floor(e/X),t=X*Math.ceil(t/X);$=Math.abs(t-e),X=Je.getGCD($,X),N=Math.round($/X)}if(k||a||o||(N=Math.ceil(($-d)/(X+d)))>16&&Je.getPrimeFactors(N).length<2&&N++,!k&&i.forceNiceScale&&x.yValueDecimal===0&&N>$&&(N=$,X=Math.round($/N)),N>n&&(!k&&!v||i.forceNiceScale)){var Ie=Je.getPrimeFactors(N),at=Ie.length-1,qe=N;e:for(var kt=0;kt<at;kt++)for(var vt=0;vt<=at-kt;vt++){for(var He=Math.min(vt+kt,at),Nt=qe,Qt=1,Ai=vt;Ai<=He;Ai++)Qt*=Ie[Ai];if((Nt/=Qt)<n){qe=Nt;break e}}X=qe===N?$:$/qe,N=Math.round($/X)}x.isMultipleYAxis&&x.multiAxisTickAmount==0&&x.ignoreYAxisIndexes.indexOf(r)<0&&(x.multiAxisTickAmount=N);var jt=e-X,ui=X*d;do jt+=X,O.push(Je.stripNumber(jt,7));while(t-jt>ui);return{result:O,niceMin:O[0],niceMax:O[O.length-1]}}},{key:"linearScale",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,o=Math.abs(t-e),r=[];if(e===t)return{result:r=[e],niceMin:r[0],niceMax:r[r.length-1]};(i=this._adjustTicksForSmallRange(i,n,o))==="dataPoints"&&(i=this.w.globals.dataPoints-1),a||(a=o/i),a=Math.round(100*(a+Number.EPSILON))/100,i===Number.MAX_VALUE&&(i=5,a=1);for(var d=e;i>=0;)r.push(d),d=Je.preciseAddition(d,a),i-=1;return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var n=[],a=Math.ceil(Math.log(t)/Math.log(i)+1),o=Math.floor(Math.log(e)/Math.log(i));o<a;o++)n.push(Math.pow(i,o));return{result:n,niceMin:n[0],niceMax:n[n.length-1]}}},{key:"logarithmicScale",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var n=[],a=Math.log(t)/Math.log(i),o=Math.log(e)/Math.log(i),r=a-o,d=Math.round(r),g=r/d,x=0,v=o;x<d;x++,v+=g)n.push(Math.pow(i,v));return n.push(Math.pow(i,a)),{result:n,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,i){var n=e;if(t!==void 0&&this.w.config.yaxis[t].labels.formatter&&this.w.config.yaxis[t].tickAmount===void 0){var a=Number(this.w.config.yaxis[t].labels.formatter(1));Je.isNumber(a)&&this.w.globals.yValueDecimal===0&&(n=Math.ceil(i))}return n<e?n:e}},{key:"setYScaleForIndex",value:function(e,t,i){var n=this.w.globals,a=this.w.config,o=n.isBarHorizontal?a.xaxis:a.yaxis[e];n.yAxisScale[e]===void 0&&(n.yAxisScale[e]=[]);var r=Math.abs(i-t);o.logarithmic&&r<=5&&(n.invalidLogScale=!0),o.logarithmic&&r>5?(n.allSeriesCollapsed=!1,n.yAxisScale[e]=o.forceNiceScale?this.logarithmicScaleNice(t,i,o.logBase):this.logarithmicScale(t,i,o.logBase)):i!==-Number.MAX_VALUE&&Je.isNumber(i)&&t!==Number.MAX_VALUE&&Je.isNumber(t)?(n.allSeriesCollapsed=!1,n.yAxisScale[e]=this.niceScale(t,i,e)):n.yAxisScale[e]=this.niceScale(Number.MIN_VALUE,0,e)}},{key:"setXScale",value:function(e,t){var i=this.w,n=i.globals;if(t!==-Number.MAX_VALUE&&Je.isNumber(t)){var a=n.xTickAmount;n.xAxisScale=this.linearScale(e,t,a,0,i.config.xaxis.max===void 0?i.config.xaxis.stepSize:void 0)}else n.xAxisScale=this.linearScale(0,10,10);return n.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var e=this,t=this.w.config,i=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var n=i.seriesYAxisMap,a=i.minYArr,o=i.maxYArr;i.allSeriesCollapsed=!0,i.barGroups=[],n.forEach((function(r,d){var g=[];r.forEach((function(x){var v,k=(v=t.series[x])===null||v===void 0?void 0:v.group;g.indexOf(k)<0&&g.push(k)})),r.length>0?(function(){var x,v,k=Number.MAX_VALUE,E=-Number.MAX_VALUE,F=k,O=E;if(t.chart.stacked)(function(){var X=new Array(i.dataPoints).fill(0),K=[],ie=[],ee=[];g.forEach((function(){K.push(X.map((function(){return Number.MIN_VALUE}))),ie.push(X.map((function(){return Number.MIN_VALUE}))),ee.push(X.map((function(){return Number.MIN_VALUE})))}));for(var le=function(he){!x&&t.series[r[he]].type&&(x=t.series[r[he]].type);var de=r[he];v=t.series[de].group?t.series[de].group:"axis-".concat(d),!(i.collapsedSeriesIndices.indexOf(de)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(de)<0)||(i.allSeriesCollapsed=!1,g.forEach((function(ke,De){if(t.series[de].group===ke)for(var Ae=0;Ae<i.series[de].length;Ae++){var $e=i.series[de][Ae];$e>=0?ie[De][Ae]+=$e:ee[De][Ae]+=$e,K[De][Ae]+=$e,F=Math.min(F,$e),O=Math.max(O,$e)}}))),x!=="bar"&&x!=="column"||i.barGroups.push(v)},te=0;te<r.length;te++)le(te);x||(x=t.chart.type),x==="bar"||x==="column"?g.forEach((function(he,de){k=Math.min(k,Math.min.apply(null,ee[de])),E=Math.max(E,Math.max.apply(null,ie[de]))})):(g.forEach((function(he,de){F=Math.min(F,Math.min.apply(null,K[de])),O=Math.max(O,Math.max.apply(null,K[de]))})),k=F,E=O),k===Number.MIN_VALUE&&E===Number.MIN_VALUE&&(E=-Number.MAX_VALUE)})();else for(var N=0;N<r.length;N++){var $=r[N];k=Math.min(k,a[$]),E=Math.max(E,o[$]),!(i.collapsedSeriesIndices.indexOf($)<0&&i.ancillaryCollapsedSeriesIndices.indexOf($)<0)||(i.allSeriesCollapsed=!1)}t.yaxis[d].min!==void 0&&(k=typeof t.yaxis[d].min=="function"?t.yaxis[d].min(k):t.yaxis[d].min),t.yaxis[d].max!==void 0&&(E=typeof t.yaxis[d].max=="function"?t.yaxis[d].max(E):t.yaxis[d].max),i.barGroups=i.barGroups.filter((function(X,K,ie){return ie.indexOf(X)===K})),e.setYScaleForIndex(d,k,E),r.forEach((function(X){a[X]=i.yAxisScale[d].niceMin,o[X]=i.yAxisScale[d].niceMax}))})():e.setYScaleForIndex(d,0,-Number.MAX_VALUE)}))}}]),s})(),Gv=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.scales=new vI(e)}return ci(s,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a=this.w.config,o=this.w.globals,r=-Number.MAX_VALUE,d=Number.MIN_VALUE;n===null&&(n=e+1);var g=o.series,x=g,v=g;a.chart.type==="candlestick"?(x=o.seriesCandleL,v=o.seriesCandleH):a.chart.type==="boxPlot"?(x=o.seriesCandleO,v=o.seriesCandleC):o.isRangeData&&(x=o.seriesRangeStart,v=o.seriesRangeEnd);var k=!1;if(o.seriesX.length>=n){var E,F=(E=o.brushSource)===null||E===void 0?void 0:E.w.config.chart.brush;(a.chart.zoom.enabled&&a.chart.zoom.autoScaleYaxis||F!=null&&F.enabled&&F!=null&&F.autoScaleYaxis)&&(k=!0)}for(var O=e;O<n;O++){o.dataPoints=Math.max(o.dataPoints,g[O].length);var N=a.series[O].type;o.categoryLabels.length&&(o.dataPoints=o.categoryLabels.filter((function(de){return de!==void 0})).length),o.labels.length&&a.xaxis.type!=="datetime"&&o.series.reduce((function(de,ke){return de+ke.length}),0)!==0&&(o.dataPoints=Math.max(o.dataPoints,o.labels.length));var $=0,X=g[O].length-1;if(k){if(a.xaxis.min)for(;$<X&&o.seriesX[O][$]<a.xaxis.min;$++);if(a.xaxis.max)for(;X>$&&o.seriesX[O][X]>a.xaxis.max;X--);}for(var K=$;K<=X&&K<o.series[O].length;K++){var ie=g[O][K];if(ie!==null&&Je.isNumber(ie)){var ee,le,te,he;switch(((ee=v[O])===null||ee===void 0?void 0:ee[K])!==void 0&&(r=Math.max(r,v[O][K]),t=Math.min(t,v[O][K])),((le=x[O])===null||le===void 0?void 0:le[K])!==void 0&&(t=Math.min(t,x[O][K]),i=Math.max(i,x[O][K])),N){case"candlestick":o.seriesCandleC[O][K]!==void 0&&(r=Math.max(r,o.seriesCandleH[O][K]),t=Math.min(t,o.seriesCandleL[O][K]));break;case"boxPlot":o.seriesCandleC[O][K]!==void 0&&(r=Math.max(r,o.seriesCandleC[O][K]),t=Math.min(t,o.seriesCandleO[O][K]))}N&&N!=="candlestick"&&N!=="boxPlot"&&N!=="rangeArea"&&N!=="rangeBar"&&(r=Math.max(r,o.series[O][K]),t=Math.min(t,o.series[O][K])),o.seriesGoals[O]&&o.seriesGoals[O][K]&&Array.isArray(o.seriesGoals[O][K])&&o.seriesGoals[O][K].forEach((function(de){r=Math.max(r,de.value),t=Math.min(t,de.value)})),i=r,ie=Je.noExponents(ie),Je.isFloat(ie)&&(o.yValueDecimal=Math.max(o.yValueDecimal,ie.toString().split(".")[1].length)),d>((te=x[O])===null||te===void 0?void 0:te[K])&&((he=x[O])===null||he===void 0?void 0:he[K])<0&&(d=x[O][K])}else o.hasNullValues=!0}N!=="bar"&&N!=="column"||(d<0&&r<0&&(r=0,i=Math.max(i,0)),d===Number.MIN_VALUE&&(d=0,t=Math.min(t,0)))}return a.chart.type==="rangeBar"&&o.seriesRangeStart.length&&o.isBarHorizontal&&(d=t),a.chart.type==="bar"&&(d<0&&r<0&&(r=0),d===Number.MIN_VALUE&&(d=0)),{minY:d,maxY:r,lowestY:t,highestY:i}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var i,n=Number.MAX_VALUE;if(e.isMultipleYAxis){n=Number.MAX_VALUE;for(var a=0;a<e.series.length;a++)i=this.getMinYMaxY(a),e.minYArr[a]=i.lowestY,e.maxYArr[a]=i.highestY,n=Math.min(n,i.lowestY)}return i=this.getMinYMaxY(0,n,null,e.series.length),t.chart.type==="bar"?(e.minY=i.minY,e.maxY=i.maxY):(e.minY=i.lowestY,e.maxY=i.highestY),n=i.lowestY,t.chart.stacked&&this._setStackedMinMax(),t.chart.type==="line"||t.chart.type==="area"||t.chart.type==="scatter"||t.chart.type==="candlestick"||t.chart.type==="boxPlot"||t.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==e.maxY&&(e.minY=n):e.minY=e.minY!==Number.MIN_VALUE?Math.min(i.minY,e.minY):i.minY,t.yaxis.forEach((function(o,r){o.max!==void 0&&(typeof o.max=="number"?e.maxYArr[r]=o.max:typeof o.max=="function"&&(e.maxYArr[r]=o.max(e.isMultipleYAxis?e.maxYArr[r]:e.maxY)),e.maxY=e.maxYArr[r]),o.min!==void 0&&(typeof o.min=="number"?e.minYArr[r]=o.min:typeof o.min=="function"&&(e.minYArr[r]=o.min(e.isMultipleYAxis?e.minYArr[r]===Number.MIN_VALUE?0:e.minYArr[r]:e.minY)),e.minY=e.minYArr[r])})),e.isBarHorizontal&&["min","max"].forEach((function(o){t.xaxis[o]!==void 0&&typeof t.xaxis[o]=="number"&&(o==="min"?e.minY=t.xaxis[o]:e.maxY=t.xaxis[o])})),e.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),e.minY=n):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.minY,e.maxYArr[0]=e.maxY),e.barGroups=[],e.lineGroups=[],e.areaGroups=[],t.series.forEach((function(o){switch(o.type||t.chart.type){case"bar":case"column":e.barGroups.push(o.group);break;case"line":e.lineGroups.push(o.group);break;case"area":e.areaGroups.push(o.group)}})),e.barGroups=e.barGroups.filter((function(o,r,d){return d.indexOf(o)===r})),e.lineGroups=e.lineGroups.filter((function(o,r,d){return d.indexOf(o)===r})),e.areaGroups=e.areaGroups.filter((function(o,r,d){return d.indexOf(o)===r})),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,i=t.xaxis.type==="numeric"||t.xaxis.type==="datetime"||t.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&(function(){for(var d=0;d<e.series.length;d++)if(e.labels[d])for(var g=0;g<e.labels[d].length;g++)e.labels[d][g]!==null&&Je.isNumber(e.labels[d][g])&&(e.maxX=Math.max(e.maxX,e.labels[d][g]),e.initialMaxX=Math.max(e.maxX,e.labels[d][g]),e.minX=Math.min(e.minX,e.labels[d][g]),e.initialMinX=Math.min(e.minX,e.labels[d][g]))})(),e.noLabelsProvided&&t.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var n=10;if(t.xaxis.tickAmount===void 0)n=Math.round(e.svgWidth/150),t.xaxis.type==="numeric"&&e.dataPoints<30&&(n=e.dataPoints-1),n>e.dataPoints&&e.dataPoints!==0&&(n=e.dataPoints-1);else if(t.xaxis.tickAmount==="dataPoints"){if(e.series.length>1&&(n=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric){var a=Math.round(e.maxX-e.minX);a<30&&(n=a)}}else n=t.xaxis.tickAmount;if(e.xTickAmount=n,t.xaxis.max!==void 0&&typeof t.xaxis.max=="number"&&(e.maxX=t.xaxis.max),t.xaxis.min!==void 0&&typeof t.xaxis.min=="number"&&(e.minX=t.xaxis.min),t.xaxis.range!==void 0&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var o=[],r=e.minX-1;r<e.maxX;r++)o.push(r+1);e.xAxisScale={result:o,niceMin:o[0],niceMax:o[o.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,n,n,0,t.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,n-1,0,t.xaxis.stepSize),e.seriesX=e.labels.slice());i&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ){for(var t=0;t<e.series.length;t++)if(e.seriesZ[t]!==void 0)for(var i=0;i<e.seriesZ[t].length;i++)e.seriesZ[t][i]!==null&&Je.isNumber(e.seriesZ[t][i])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][i]),e.minZ=Math.min(e.minZ,e.seriesZ[t][i]))}}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var i=new ss(this.ctx);if(t.xaxis.type==="datetime"){var n=i.getDate(e.minX);t.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()-2):n.setDate(n.getDate()-2),e.minX=new Date(n).getTime();var a=i.getDate(e.maxX);t.xaxis.labels.datetimeUTC?a.setUTCDate(a.getUTCDate()+2):a.setDate(a.getDate()+2),e.maxX=new Date(a).getTime()}else(t.xaxis.type==="numeric"||t.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((function(t,i){if(t.length){t.length===1&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var n=t.slice();n.sort((function(a,o){return a-o})),n.forEach((function(a,o){if(o>0){var r=a-n[o-1];r>0&&(e.minXDiff=Math.min(r,e.minXDiff))}})),e.dataPoints!==1&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}}))}},{key:"_setStackedMinMax",value:function(){var e=this,t=this.w.globals;if(t.series.length){var i=t.seriesGroups;i.length||(i=[this.w.globals.seriesNames.map((function(o){return o}))]);var n={},a={};i.forEach((function(o){n[o]=[],a[o]=[],e.w.config.series.map((function(r,d){return o.indexOf(t.seriesNames[d])>-1?d:null})).filter((function(r){return r!==null})).forEach((function(r){for(var d=0;d<t.series[t.maxValsInArrayIndex].length;d++){var g,x,v,k;n[o][d]===void 0&&(n[o][d]=0,a[o][d]=0),(e.w.config.chart.stacked&&!t.comboCharts||e.w.config.chart.stacked&&t.comboCharts&&(!e.w.config.chart.stackOnlyBar||((g=e.w.config.series)===null||g===void 0||(x=g[r])===null||x===void 0?void 0:x.type)==="bar"||((v=e.w.config.series)===null||v===void 0||(k=v[r])===null||k===void 0?void 0:k.type)==="column"))&&t.series[r][d]!==null&&Je.isNumber(t.series[r][d])&&(t.series[r][d]>0?n[o][d]+=parseFloat(t.series[r][d])+1e-4:a[o][d]+=parseFloat(t.series[r][d]))}}))})),Object.entries(n).forEach((function(o){var r=VM(o,1)[0];n[r].forEach((function(d,g){t.maxY=Math.max(t.maxY,n[r][g]),t.minY=Math.min(t.minY,a[r][g])}))}))}}}]),s})(),ww=(function(){function s(e,t){li(this,s),this.ctx=e,this.elgrid=t,this.w=e.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=i.config.xaxis.position==="bottom"?i.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new Mh(e)}return ci(s,[{key:"drawYaxis",value:function(e){var t=this.w,i=new Lt(this.ctx),n=t.config.yaxis[e].labels.style,a=n.fontSize,o=n.fontFamily,r=n.fontWeight,d=i.group({class:"apexcharts-yaxis",rel:e,transform:"translate(".concat(t.globals.translateYAxisX[e],", 0)")});if(this.axesUtils.isYAxisHidden(e))return d;var g=i.group({class:"apexcharts-yaxis-texts-g"});d.add(g);var x=t.globals.yAxisScale[e].result.length-1,v=t.globals.gridHeight/x,k=t.globals.yLabelFormatters[e],E=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice());if(t.config.yaxis[e].labels.show){var F=t.globals.translateY+t.config.yaxis[e].labels.offsetY;t.globals.isBarHorizontal?F=0:t.config.chart.type==="heatmap"&&(F-=v/2),F+=parseInt(a,10)/3;for(var O=x;O>=0;O--){var N=k(E[O],O,t),$=t.config.yaxis[e].labels.padding;t.config.yaxis[e].opposite&&t.config.yaxis.length!==0&&($*=-1);var X=this.getTextAnchor(t.config.yaxis[e].labels.align,t.config.yaxis[e].opposite),K=this.axesUtils.getYAxisForeColor(n.colors,e),ie=Array.isArray(K)?K[O]:K,ee=Je.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label tspan"))).map((function(te){return te.textContent})),le=i.drawText({x:$,y:F,text:ee.includes(N)&&!t.config.yaxis[e].labels.showDuplicates?"":N,textAnchor:X,fontSize:a,fontFamily:o,fontWeight:r,maxWidth:t.config.yaxis[e].labels.maxWidth,foreColor:ie,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(n.cssClass)});g.add(le),this.addTooltip(le,N),t.config.yaxis[e].labels.rotate!==0&&this.rotateLabel(i,le,firstLabel,t.config.yaxis[e].labels.rotate),F+=v}}return this.addYAxisTitle(i,d,e),this.addAxisBorder(i,d,e,x,v),d}},{key:"getTextAnchor",value:function(e,t){return e==="left"?"start":e==="center"?"middle":e==="right"?"end":t?"start":"end"}},{key:"addTooltip",value:function(e,t){var i=document.createElementNS(this.w.globals.SVGNS,"title");i.textContent=Array.isArray(t)?t.join(" "):t,e.node.appendChild(i)}},{key:"rotateLabel",value:function(e,t,i,n){var a=e.rotateAroundCenter(i.node),o=e.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(".concat(n," ").concat(a.x," ").concat(o.y,")"))}},{key:"addYAxisTitle",value:function(e,t,i){var n=this.w;if(n.config.yaxis[i].title.text!==void 0){var a=e.group({class:"apexcharts-yaxis-title"}),o=n.config.yaxis[i].opposite?n.globals.translateYAxisX[i]:0,r=e.drawText({x:o,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[i].title.offsetY,text:n.config.yaxis[i].title.text,textAnchor:"end",foreColor:n.config.yaxis[i].title.style.color,fontSize:n.config.yaxis[i].title.style.fontSize,fontWeight:n.config.yaxis[i].title.style.fontWeight,fontFamily:n.config.yaxis[i].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(n.config.yaxis[i].title.style.cssClass)});a.add(r),t.add(a)}}},{key:"addAxisBorder",value:function(e,t,i,n,a){var o=this.w,r=o.config.yaxis[i].axisBorder,d=31+r.offsetX;if(o.config.yaxis[i].opposite&&(d=-31-r.offsetX),r.show){var g=e.drawLine(d,o.globals.translateY+r.offsetY-2,d,o.globals.gridHeight+o.globals.translateY+r.offsetY+2,r.color,0,r.width);t.add(g)}o.config.yaxis[i].axisTicks.show&&this.axesUtils.drawYAxisTicks(d,n,r,o.config.yaxis[i].axisTicks,i,a,t)}},{key:"drawYaxisInversed",value:function(e){var t=this.w,i=new Lt(this.ctx),n=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),a=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});n.add(a);var o=t.globals.yAxisScale[e].result.length-1,r=t.globals.gridWidth/o+.1,d=r+t.config.xaxis.labels.offsetX,g=t.globals.xLabelFormatter,x=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice()),v=t.globals.timescaleLabels;if(v.length>0&&(this.xaxisLabels=v.slice(),o=(x=v.slice()).length),t.config.xaxis.labels.show)for(var k=v.length?0:o;v.length?k<v.length:k>=0;v.length?k++:k--){var E=g(x[k],k,t),F=t.globals.gridWidth+t.globals.padHorizontal-(d-r+t.config.xaxis.labels.offsetX);if(v.length){var O=this.axesUtils.getLabel(x,v,F,k,this.drawnLabels,this.xaxisFontSize);F=O.x,E=O.text,this.drawnLabels.push(O.text),k===0&&t.globals.skipFirstTimelinelabel&&(E=""),k===x.length-1&&t.globals.skipLastTimelinelabel&&(E="")}var N=i.drawText({x:F,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-(t.config.xaxis.position==="top"?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:E,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(t.config.xaxis.labels.style.cssClass)});a.add(N),N.tspan(E),this.addTooltip(N,E),d+=r}return this.inversedYAxisTitleText(n),this.inversedYAxisBorder(n),n}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,i=new Lt(this.ctx),n=t.config.xaxis.axisBorder;if(n.show){var a=0;t.config.chart.type==="bar"&&t.globals.isXNumeric&&(a-=15);var o=i.drawLine(t.globals.padHorizontal+a+n.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,n.color,0,n.height);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(o):e.add(o)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,i=new Lt(this.ctx);if(t.config.xaxis.title.text!==void 0){var n=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),a=i.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(t.config.xaxis.title.style.cssClass)});n.add(a),e.add(n)}}},{key:"yAxisTitleRotate",value:function(e,t){var i=this.w,n=new Lt(this.ctx),a=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g")),o=a?a.getBoundingClientRect():{width:0,height:0},r=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text")),d=r?r.getBoundingClientRect():{width:0,height:0};if(r){var g=this.xPaddingForYAxisTitle(e,o,d,t);r.setAttribute("x",g.xPos-(t?10:0));var x=n.rotateAroundCenter(r);r.setAttribute("transform","rotate(".concat(t?-1*i.config.yaxis[e].title.rotate:i.config.yaxis[e].title.rotate," ").concat(x.x," ").concat(x.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,i,n){var a=this.w,o=0,r=10;return a.config.yaxis[e].title.text===void 0||e<0?{xPos:o,padd:0}:(n?o=t.width+a.config.yaxis[e].title.offsetX+i.width/2+r/2:(o=-1*t.width+a.config.yaxis[e].title.offsetX+r/2+i.width/2,a.globals.isBarHorizontal&&(r=25,o=-1*t.width-a.config.yaxis[e].title.offsetX-r)),{xPos:o,padd:r})}},{key:"setYAxisXPosition",value:function(e,t){var i=this.w,n=0,a=0,o=18,r=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.forEach((function(d,g){var x=i.globals.ignoreYAxisIndexes.includes(g)||!d.show||d.floating||e[g].width===0,v=e[g].width+t[g].width;d.opposite?i.globals.isBarHorizontal?(a=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[g]=a-d.labels.offsetX):(a=i.globals.gridWidth+i.globals.translateX+r,x||(r+=v+20),i.globals.translateYAxisX[g]=a-d.labels.offsetX+20):(n=i.globals.translateX-o,x||(o+=v+20),i.globals.translateYAxisX[g]=n+d.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var e=this.w;Je.listToArray(e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach((function(t,i){var n=e.config.yaxis[i];if(n&&!n.floating&&n.labels.align!==void 0){var a=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),o=Je.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"))),r=a.getBoundingClientRect();o.forEach((function(d){d.setAttribute("text-anchor",n.labels.align)})),n.labels.align!=="left"||n.opposite?n.labels.align==="center"?a.setAttribute("transform","translate(".concat(r.width/2*(n.opposite?1:-1),", 0)")):n.labels.align==="right"&&n.opposite&&a.setAttribute("transform","translate(".concat(r.width,", 0)")):a.setAttribute("transform","translate(-".concat(r.width,", 0)"))}}))}}]),s})(),CN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.documentEvent=Je.bind(this.documentEvent,this)}return ci(s,[{key:"addEventListener",value:function(e,t){var i=this.w;i.globals.events.hasOwnProperty(e)?i.globals.events[e].push(t):i.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){var n=i.globals.events[e].indexOf(t);n!==-1&&i.globals.events[e].splice(n,1)}}},{key:"fireEvent",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var n=i.globals.events[e],a=n.length,o=0;o<a;o++)n[o].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,i=this.ctx,n=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach((function(a){n.addEventListener(a,(function(o){var r=o.target.getAttribute("i")===null&&t.globals.capturedSeriesIndex!==-1?t.globals.capturedSeriesIndex:o.target.getAttribute("i"),d=o.target.getAttribute("j")===null&&t.globals.capturedDataPointIndex!==-1?t.globals.capturedDataPointIndex:o.target.getAttribute("j"),g=Object.assign({},t,{seriesIndex:t.globals.axisCharts?r:0,dataPointIndex:d});o.type==="mousemove"||o.type==="touchmove"?typeof t.config.chart.events.mouseMove=="function"&&t.config.chart.events.mouseMove(o,i,g):o.type==="mouseleave"||o.type==="touchleave"?typeof t.config.chart.events.mouseLeave=="function"&&t.config.chart.events.mouseLeave(o,i,g):(o.type==="mouseup"&&o.which===1||o.type==="touchend")&&(typeof t.config.chart.events.click=="function"&&t.config.chart.events.click(o,i,g),i.ctx.events.fireEvent("click",[o,i,g]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(a){t.globals.dom.baseEl.addEventListener(a,e.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,i=e.target.className;if(e.type==="click"){var n=t.globals.dom.baseEl.querySelector(".apexcharts-menu");n&&n.classList.contains("apexcharts-menu-open")&&i!=="apexcharts-menu-icon"&&n.classList.remove("apexcharts-menu-open")}t.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,t.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}]),s})(),AN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=t.filter((function(a){return a.name===e}))[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var n=Je.extend(gI,i);this.w.globals.locale=n.options}}]),s})(),TN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"drawAxis",value:function(e,t){var i,n,a=this,o=this.w.globals,r=this.w.config,d=new gm(this.ctx,t),g=new ww(this.ctx,t);o.axisCharts&&e!=="radar"&&(o.isBarHorizontal?(n=g.drawYaxisInversed(0),i=d.drawXaxisInversed(0),o.dom.elGraphical.add(i),o.dom.elGraphical.add(n)):(i=d.drawXaxis(),o.dom.elGraphical.add(i),r.yaxis.map((function(x,v){if(o.ignoreYAxisIndexes.indexOf(v)===-1&&(n=g.drawYaxis(v),o.dom.Paper.add(n),a.w.config.grid.position==="back")){var k=o.dom.Paper.children()[1];k.remove(),o.dom.Paper.add(k)}}))))}}]),s})(),Wv=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new Lt(this.ctx),i=new ls(this.ctx),n=e.config.xaxis.crosshairs.fill.gradient,a=e.config.xaxis.crosshairs.dropShadow,o=e.config.xaxis.crosshairs.fill.type,r=n.colorFrom,d=n.colorTo,g=n.opacityFrom,x=n.opacityTo,v=n.stops,k=a.enabled,E=a.left,F=a.top,O=a.blur,N=a.color,$=a.opacity,X=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){o==="gradient"&&(X=t.drawGradient("vertical",r,d,g,x,null,v,null));var K=t.drawRect();e.config.xaxis.crosshairs.width===1&&(K=t.drawLine());var ie=e.globals.gridHeight;(!Je.isNumber(ie)||ie<0)&&(ie=0);var ee=e.config.xaxis.crosshairs.width;(!Je.isNumber(ee)||ee<0)&&(ee=0),K.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:ie,width:ee,height:ie,fill:X,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),k&&(K=i.dropShadow(K,{left:E,top:F,blur:O,color:N,opacity:$})),e.globals.dom.elGraphical.add(K)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new Lt(this.ctx),i=e.config.yaxis[0].crosshairs,n=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var a=t.drawLine(-n,0,e.globals.gridWidth+n,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);a.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(a)}var o=t.drawLine(-n,0,e.globals.gridWidth+n,0,i.stroke.color,0,0);o.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(o)}}]),s})(),EN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"checkResponsiveConfig",value:function(e){var t=this,i=this.w,n=i.config;if(n.responsive.length!==0){var a=n.responsive.slice();a.sort((function(g,x){return g.breakpoint>x.breakpoint?1:x.breakpoint>g.breakpoint?-1:0})).reverse();var o=new pm({}),r=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=a[0].breakpoint,v=window.innerWidth>0?window.innerWidth:screen.width;if(v>x){var k=Je.clone(i.globals.initialConfig);k.series=Je.clone(i.config.series);var E=or.extendArrayProps(o,k,i);g=Je.extend(E,g),g=Je.extend(i.config,g),t.overrideResponsiveOptions(g)}else for(var F=0;F<a.length;F++)v<a[F].breakpoint&&(g=or.extendArrayProps(o,a[F].options,i),g=Je.extend(i.config,g),t.overrideResponsiveOptions(g))};if(e){var d=or.extendArrayProps(o,e,i);d=Je.extend(i.config,d),r(d=Je.extend(d,e))}else r({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new pm(e).init({responsiveOverride:!0});this.w.config=t}}]),s})(),MN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return ci(s,[{key:"checkHeatmapDistributed",value:function(){var e=this.w.config,t=e.chart,i=e.plotOptions;return t.type==="treemap"&&i.treemap&&i.treemap.distributed||t.type==="heatmap"&&i.heatmap&&i.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var e=this.w.config,t=e.chart,i=e.plotOptions;return i.bar&&i.bar.distributed&&(t.type==="bar"||t.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this.w,t=new Je;e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode||"light"));var i=Hr(e.config.colors||e.config.fill.colors||[]);e.globals.colors=this.getColors(i),this.applySeriesColors(e.globals.seriesColors,e.globals.colors),e.config.theme.monochrome.enabled&&(e.globals.colors=this.getMonochromeColors(e.config.theme.monochrome,e.globals.series,t));var n=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),this.applyColorTypes(["fill","stroke"],n),this.applyDataLabelsColors(n),this.applyRadarPolygonsColors(),this.applyMarkersColors(n)}},{key:"getColors",value:function(e){var t=this,i=this.w;return e&&e.length!==0?Array.isArray(e)&&e.length>0&&typeof e[0]=="function"?(this.isColorFn=!0,i.config.series.map((function(n,a){var o=e[a]||e[0];return typeof o=="function"?o({value:i.globals.axisCharts?i.globals.series[a][0]||0:i.globals.series[a],seriesIndex:a,dataPointIndex:a,w:t.w}):o}))):e:this.predefined()}},{key:"applySeriesColors",value:function(e,t){e.forEach((function(i,n){i&&(t[n]=i)}))}},{key:"getMonochromeColors",value:function(e,t,i){var n=e.color,a=e.shadeIntensity,o=e.shadeTo,r=this.isBarDistributed||this.isHeatmapDistributed?t[0].length*t.length:t.length,d=1/(r/a),g=0;return Array.from({length:r},(function(){var x=o==="dark"?i.shadeColor(-1*g,n):i.shadeColor(g,n);return g+=d,x}))}},{key:"applyColorTypes",value:function(e,t){var i=this,n=this.w;e.forEach((function(a){n.globals[a].colors=n.config[a].colors===void 0?i.isColorFn?n.config.colors:t:n.config[a].colors.slice(),i.pushExtraColors(n.globals[a].colors)}))}},{key:"applyDataLabelsColors",value:function(e){var t=this.w;t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors===void 0?e:t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var e=this.w;e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors===void 0?[e.config.theme.mode==="dark"?"#343A3F":"none"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(e){var t=this.w;t.globals.markers.colors=t.config.markers.colors===void 0?e:t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=this.w,a=t||n.globals.series.length;if(i===null&&(i=this.isBarDistributed||this.isHeatmapDistributed||n.config.chart.type==="heatmap"&&n.config.plotOptions.heatmap&&n.config.plotOptions.heatmap.colorScale.inverse),i&&n.globals.series.length&&(a=n.globals.series[n.globals.maxValsInArrayIndex].length*n.globals.series.length),e.length<a)for(var o=a-e.length,r=0;r<o;r++)e.push(e[r])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode,i=t==="dark"?"palette4":t==="light"?"palette1":e.theme.palette||"palette1",n=t==="dark"?"#f6f7f8":t==="light"?"#373d3f":e.chart.foreColor||"#373d3f";return e.tooltip.theme=t||"light",e.chart.foreColor=n,e.theme.palette=i,e}},{key:"predefined",value:function(){var e=this.w.config.theme.palette,t=this.ctx.constructor.getThemePalettes();return t[e]||t.palette1}}]),s})(),IN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,i=e==="title"?t.config.title:t.config.subtitle,n=t.globals.svgWidth/2,a=i.offsetY,o="middle";if(i.align==="left"?(n=10,o="start"):i.align==="right"&&(n=t.globals.svgWidth-10,o="end"),n+=i.offsetX,a=a+parseInt(i.style.fontSize,10)+i.margin/2,i.text!==void 0){var r=new Lt(this.ctx).drawText({x:n,y:a,text:i.text,textAnchor:o,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});r.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(r)}}}]),s})(),PN=(function(){function s(e){li(this,s),this.w=e.w,this.dCtx=e}return ci(s,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,i=0,n=0,a=e==="title"?t.config.title.floating:t.config.subtitle.floating,o=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(o!==null&&!a){var r=o.getBoundingClientRect();i=r.width,n=t.globals.axisCharts?r.height+5:r.height}return{width:i,height:n}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.elLegendWrap;e.config.legend.height||e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||(t.style.maxHeight=e.globals.svgHeight/2+"px");var i=Object.assign({},Je.getBoundingClientRect(t));return t!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:i.height===0?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},e.config.legend.position!=="left"&&e.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var e=this,t=this.w,i=[];t.config.series.forEach((function(d,g){d.data.forEach((function(x,v){var k;k=t.globals.series[g][v],n=t.config.dataLabels.formatter(k,{ctx:e.dCtx.ctx,seriesIndex:g,dataPointIndex:v,w:t}),i.push(n)}))}));var n=Je.getLargestStringFromArr(i),a=new Lt(this.dCtx.ctx),o=t.config.dataLabels.style,r=a.getTextRects(n,parseInt(o.fontSize),o.fontFamily);return{width:1.05*r.width,height:r.height}}},{key:"getLargestStringFromMultiArr",value:function(e,t){var i=e;if(this.w.globals.isMultiLineX){var n=t.map((function(o,r){return Array.isArray(o)?o.length:1})),a=Math.max.apply(Math,Hr(n));i=t[n.indexOf(a)]}return i}}]),s})(),LN=(function(){function s(e){li(this,s),this.w=e.w,this.dCtx=e}return ci(s,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,i=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&i.length===0&&(i=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var n=this.getxAxisTimeScaleLabelsCoords();e={width:n.width,height:n.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=t.config.legend.position!=="left"&&t.config.legend.position!=="right"||t.config.legend.floating?0:this.dCtx.lgRect.width;var a=t.globals.xLabelFormatter,o=Je.getLargestStringFromArr(i),r=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,i);t.globals.isBarHorizontal&&(r=o=t.globals.yAxisScale[0].result.reduce((function(F,O){return F.length>O.length?F:O}),0));var d=new Cm(this.dCtx.ctx),g=o;o=d.xLabelFormat(a,o,g,{i:void 0,dateFormatter:new ss(this.dCtx.ctx).formatDate,w:t}),r=d.xLabelFormat(a,r,g,{i:void 0,dateFormatter:new ss(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&o===void 0||String(o).trim()==="")&&(r=o="1");var x=new Lt(this.dCtx.ctx),v=x.getTextRects(o,t.config.xaxis.labels.style.fontSize),k=v;if(o!==r&&(k=x.getTextRects(r,t.config.xaxis.labels.style.fontSize)),(e={width:v.width>=k.width?v.width:k.width,height:v.height>=k.height?v.height:k.height}).width*i.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&t.config.xaxis.labels.rotate!==0||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var E=function(F){return x.getTextRects(F,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};v=E(o),o!==r&&(k=E(r)),e.height=(v.height>k.height?v.height:k.height)/1.5,e.width=v.width>k.width?v.width:k.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasXaxisGroups)return{width:0,height:0};var i,n=((e=t.config.xaxis.group.style)===null||e===void 0?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,a=t.globals.groups.map((function(v){return v.title})),o=Je.getLargestStringFromArr(a),r=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,a),d=new Lt(this.dCtx.ctx),g=d.getTextRects(o,n),x=g;return o!==r&&(x=d.getTextRects(r,n)),i={width:g.width>=x.width?g.width:x.width,height:g.height>=x.height?g.height:x.height},t.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,i=0;if(e.config.xaxis.title.text!==void 0){var n=new Lt(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=n.width,i=n.height}return{width:t,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map((function(a){return a.value})),n=i.reduce((function(a,o){return a===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):a.length>o.length?a:o}),0);return 1.05*(e=new Lt(this.dCtx.ctx).getTextRects(n,t.config.xaxis.labels.style.fontSize)).width*i.length>t.globals.gridWidth&&t.config.xaxis.labels.rotate!==0&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,i=this.w,n=i.globals,a=i.config,o=a.xaxis.type,r=e.width;n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1;var d=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,g=function(x,v){a.yaxis.length>1&&(function(k){return n.collapsedSeriesIndices.indexOf(k)!==-1})(v)||(function(k){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var E=t.dCtx.timescaleLabels[0],F=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+r/1.75-t.dCtx.yAxisWidthRight,O=E.position-r/1.75+t.dCtx.yAxisWidthLeft,N=i.config.legend.position==="right"&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;F>n.svgWidth-n.translateX-N&&(n.skipLastTimelinelabel=!0),O<-(k.show&&!k.floating||a.chart.type!=="bar"&&a.chart.type!=="candlestick"&&a.chart.type!=="rangeBar"&&a.chart.type!=="boxPlot"?10:r/1.75)&&(n.skipFirstTimelinelabel=!0)}else o==="datetime"?t.dCtx.gridPad.right<r&&!n.rotateXLabels&&(n.skipLastTimelinelabel=!0):o!=="datetime"&&t.dCtx.gridPad.right<r/2-t.dCtx.yAxisWidthRight&&!n.rotateXLabels&&!i.config.xaxis.labels.trim&&(t.dCtx.xPadRight=r/2+1)})(x)};a.yaxis.forEach((function(x,v){d?(t.dCtx.gridPad.left<r&&(t.dCtx.xPadLeft=r/2+1),t.dCtx.xPadRight=r/2+1):g(x,v)}))}}]),s})(),DN=(function(){function s(e){li(this,s),this.w=e.w,this.dCtx=e}return ci(s,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,i=[],n=10,a=new Mh(this.dCtx.ctx);return t.config.yaxis.map((function(o,r){var d={seriesIndex:r,dataPointIndex:-1,w:t},g=t.globals.yAxisScale[r],x=0;if(!a.isYAxisHidden(r)&&o.labels.show&&o.labels.minWidth!==void 0&&(x=o.labels.minWidth),!a.isYAxisHidden(r)&&o.labels.show&&g.result.length){var v=t.globals.yLabelFormatters[r],k=g.niceMin===Number.MIN_VALUE?0:g.niceMin,E=g.result.reduce((function(ie,ee){var le,te;return((le=String(v(ie,d)))===null||le===void 0?void 0:le.length)>((te=String(v(ee,d)))===null||te===void 0?void 0:te.length)?ie:ee}),k),F=E=v(E,d);if(E!==void 0&&E.length!==0||(E=g.niceMax),t.globals.isBarHorizontal){n=0;var O=t.globals.labels.slice();E=Je.getLargestStringFromArr(O),E=v(E,{seriesIndex:r,dataPointIndex:-1,w:t}),F=e.dCtx.dimHelpers.getLargestStringFromMultiArr(E,O)}var N=new Lt(e.dCtx.ctx),$="rotate(".concat(o.labels.rotate," 0 0)"),X=N.getTextRects(E,o.labels.style.fontSize,o.labels.style.fontFamily,$,!1),K=X;E!==F&&(K=N.getTextRects(F,o.labels.style.fontSize,o.labels.style.fontFamily,$,!1)),i.push({width:(x>K.width||x>X.width?x:K.width>X.width?K.width:X.width)+n,height:K.height>X.height?K.height:X.height})}else i.push({width:0,height:0})})),i}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,i=[];return t.config.yaxis.map((function(n,a){if(n.show&&n.title.text!==void 0){var o=new Lt(e.dCtx.ctx),r="rotate(".concat(n.title.rotate," 0 0)"),d=o.getTextRects(n.title.text,n.title.style.fontSize,n.title.style.fontFamily,r,!1);i.push({width:d.width,height:d.height})}else i.push({width:0,height:0})})),i}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,i=0,n=0,a=e.globals.yAxisScale.length>1?10:0,o=new Mh(this.dCtx.ctx),r=function(d,g){var x=e.config.yaxis[g].floating,v=0;d.width>0&&!x?(v=d.width+a,(function(k){return e.globals.ignoreYAxisIndexes.indexOf(k)>-1})(g)&&(v=v-d.width-a)):v=x||o.isYAxisHidden(g)?0:5,e.config.yaxis[g].opposite?n+=v:i+=v,t+=v};return e.globals.yLabelsCoords.map((function(d,g){r(d,g)})),e.globals.yTitleCoords.map((function(d,g){r(d,g)})),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=n,t}}]),s})(),RN=(function(){function s(e){li(this,s),this.w=e.w,this.dCtx=e}return ci(s,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w,i=t.config,n=t.globals;if(n.noData||n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.series.length)return 0;var a=function(E){return["bar","rangeBar","candlestick","boxPlot"].includes(E)},o=i.chart.type,r=0,d=a(o)?i.series.length:1;n.comboBarCount>0&&(d=n.comboBarCount),n.collapsedSeries.forEach((function(E){a(E.type)&&(d-=1)})),i.chart.stacked&&(d=1);var g=a(o)||n.comboBarCount>0,x=Math.abs(n.initialMaxX-n.initialMinX);if(g&&n.isXNumeric&&!n.isBarHorizontal&&d>0&&x!==0){x<=3&&(x=n.dataPoints);var v=x/e,k=n.minXDiff&&n.minXDiff/v>0?n.minXDiff/v:0;k>e/2&&(k/=2),(r=k*parseInt(i.plotOptions.bar.columnWidth,10)/100)<1&&(r=1),n.barPadForNumericAxis=r}return r}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,i=t.globals,n=this.dCtx.isSparkline||!i.axisCharts?0:10;["title","subtitle"].forEach((function(r){t.config[r].text!==void 0?n+=t.config[r].margin:n+=e.dCtx.isSparkline||!i.axisCharts?0:5})),!t.config.legend.show||t.config.legend.position!=="bottom"||t.config.legend.floating||i.axisCharts||(n+=10);var a=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),o=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight-=a.height+o.height+n,i.translateY+=a.height+o.height+n}},{key:"setGridXPosForDualYAxis",value:function(e,t){var i=this.w,n=new Mh(this.dCtx.ctx);i.config.yaxis.forEach((function(a,o){i.globals.ignoreYAxisIndexes.indexOf(o)!==-1||a.floating||n.isYAxisHidden(o)||(a.opposite&&(i.globals.translateX-=t[o].width+e[o].width+parseInt(a.labels.style.fontSize,10)/1.2+12),i.globals.translateX<2&&(i.globals.translateX=2))}))}}]),s})(),nx=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new PN(this),this.dimYAxis=new DN(this),this.dimXAxis=new LN(this),this.dimGrid=new RN(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return ci(s,[{key:"plotCoords",value:function(){var e=this,t=this.w,i=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var n=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,Hr(t.config.stroke.width)):t.config.stroke.width;this.isSparkline&&((t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(o){var r=VM(o,2),d=r[0],g=r[1];e.gridPad[d]=Math.max(g,e.w.globals.markers.largestSize/1.5)})),this.gridPad.top=Math.max(n/2,this.gridPad.top),this.gridPad.bottom=Math.max(n/2,this.gridPad.bottom)),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var a=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*a,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(a>0?a:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,i=t.globals,n=this.dimYAxis.getyAxisLabelsCoords(),a=this.dimYAxis.getyAxisTitleCoords();i.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map((function(E,F){t.globals.yLabelsCoords.push({width:n[F].width,index:F}),t.globals.yTitleCoords.push({width:a[F].width,index:F})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var o=this.dimXAxis.getxAxisLabelsCoords(),r=this.dimXAxis.getxAxisGroupLabelsCoords(),d=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(o,d,r),i.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+t.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+t.config.xaxis.labels.offsetX;var g=this.yAxisWidth,x=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-d.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-o.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var v=10;(t.config.chart.type==="radar"||this.isSparkline)&&(g=0,x=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||t.config.chart.type==="treemap")&&(g=0,x=0,v=0),this.isSparkline||t.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(o);var k=function(){i.translateX=g+e.datalabelsCoords.width,i.gridHeight=i.svgHeight-e.lgRect.height-x-(e.isSparkline||t.config.chart.type==="treemap"?0:t.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-g-2*e.datalabelsCoords.width};switch(t.config.xaxis.position==="top"&&(v=i.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":i.translateY=v,k();break;case"top":i.translateY=this.lgRect.height+v,k();break;case"left":i.translateY=v,i.translateX=this.lgRect.width+g+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-x-12,i.gridWidth=i.svgWidth-this.lgRect.width-g-2*this.datalabelsCoords.width;break;case"right":i.translateY=v,i.translateX=g+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-x-12,i.gridWidth=i.svgWidth-this.lgRect.width-g-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(a,n),new ww(this.ctx).setYAxisXPosition(n,a)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=e.config,n=0;e.config.legend.show&&!e.config.legend.floating&&(n=20);var a=i.chart.type==="pie"||i.chart.type==="polarArea"||i.chart.type==="donut"?"pie":"radialBar",o=i.plotOptions[a].offsetY,r=i.plotOptions[a].offsetX;if(!i.legend.show||i.legend.floating){t.gridHeight=t.svgHeight;var d=t.dom.elWrap.getBoundingClientRect().width;return t.gridWidth=Math.min(d,t.gridHeight),t.translateY=o,void(t.translateX=r+(t.svgWidth-t.gridWidth)/2)}switch(i.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=o-10,t.translateX=r+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+o+10,t.translateX=r+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-n,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=o,t.translateX=r+this.lgRect.width+n;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-n-5,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=o,t.translateX=r+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,i){var n=this.w,a=n.globals.hasXaxisGroups?2:1,o=i.height+e.height+t.height,r=n.globals.isMultiLineX?1.2:n.globals.LINE_HEIGHT_RATIO,d=n.globals.rotateXLabels?22:10,g=n.globals.rotateXLabels&&n.config.legend.position==="bottom"?10:0;this.xAxisHeight=o*r+a*d+g,this.xAxisWidth=e.width,this.xAxisHeight-t.height>n.config.xaxis.labels.maxHeight&&(this.xAxisHeight=n.config.xaxis.labels.maxHeight),n.config.xaxis.labels.minHeight&&this.xAxisHeight<n.config.xaxis.labels.minHeight&&(this.xAxisHeight=n.config.xaxis.labels.minHeight),n.config.xaxis.floating&&(this.xAxisHeight=0);var x=0,v=0;n.config.yaxis.forEach((function(k){x+=k.labels.minWidth,v+=k.labels.maxWidth})),this.yAxisWidth<x&&(this.yAxisWidth=x),this.yAxisWidth>v&&(this.yAxisWidth=v)}}]),s})(),ON=(function(){function s(e){li(this,s),this.w=e.w,this.lgCtx=e}return ci(s,[{key:"getLegendStyles",value:function(){var e,t,i,n=document.createElement("style");n.setAttribute("type","text/css");var a=((e=this.lgCtx.ctx)===null||e===void 0||(t=e.opts)===null||t===void 0||(i=t.chart)===null||i===void 0?void 0:i.nonce)||this.w.config.chart.nonce;a&&n.setAttribute("nonce",a);var o=document.createTextNode(xI);return n.appendChild(o),n}},{key:"getLegendDimensions",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;this.w.config.chart.injectStyleSheet!==!1&&e.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(e,t){var i=this,n=this.w;if(n.globals.axisCharts||n.config.chart.type==="radialBar"){n.globals.resized=!0;var a=null,o=null;n.globals.risingSeries=[],n.globals.axisCharts?(a=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),o=parseInt(a.getAttribute("data:realIndex"),10)):(a=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),o=parseInt(a.getAttribute("rel"),10)-1),t?[{cs:n.globals.collapsedSeries,csi:n.globals.collapsedSeriesIndices},{cs:n.globals.ancillaryCollapsedSeries,csi:n.globals.ancillaryCollapsedSeriesIndices}].forEach((function(x){i.riseCollapsedSeries(x.cs,x.csi,o)})):this.hideSeries({seriesEl:a,realIndex:o})}else{var r=n.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(e+1,"'] path")),d=n.config.chart.type;if(d==="pie"||d==="polarArea"||d==="donut"){var g=n.config.plotOptions.pie.donut.labels;new Lt(this.lgCtx.ctx).pathMouseDown(r,null),this.lgCtx.ctx.pie.printDataLabelsInner(r.node,g)}r.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(e){var t=e.realIndex,i=this.w,n=i.globals,a=Je.clone(i.config.series);if(n.axisCharts){var o=i.config.yaxis[n.seriesYAxisReverseMap[t]],r={index:t,data:a[t].data.slice(),type:a[t].type||i.config.chart.type};if(o&&o.show&&o.showAlways)n.ancillaryCollapsedSeriesIndices.indexOf(t)<0&&(n.ancillaryCollapsedSeries.push(r),n.ancillaryCollapsedSeriesIndices.push(t));else if(n.collapsedSeriesIndices.indexOf(t)<0){n.collapsedSeries.push(r),n.collapsedSeriesIndices.push(t);var d=n.risingSeries.indexOf(t);n.risingSeries.splice(d,1)}}else n.collapsedSeries.push({index:t,data:a[t]}),n.collapsedSeriesIndices.push(t);return n.allSeriesCollapsed=n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.config.series.length,this._getSeriesBasedOnCollapsedState(a)}},{key:"hideSeries",value:function(e){for(var t=e.seriesEl,i=e.realIndex,n=this.w,a=this.getSeriesAfterCollapsing({realIndex:i}),o=t.childNodes,r=0;r<o.length;r++)o[r].classList.contains("apexcharts-series-markers-wrap")&&(o[r].classList.contains("apexcharts-hide")?o[r].classList.remove("apexcharts-hide"):o[r].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(a,n.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,i){var n=this.w,a=Je.clone(n.config.series);if(e.length>0){for(var o=0;o<e.length;o++)e[o].index===i&&(n.globals.axisCharts?a[i].data=e[o].data.slice():a[i]=e[o].data,typeof a[i]!="number"&&(a[i].hidden=!1),e.splice(o,1),t.splice(o,1),n.globals.risingSeries.push(i));a=this._getSeriesBasedOnCollapsedState(a),this.lgCtx.ctx.updateHelpers._updateSeries(a,n.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w,i=0;return t.globals.axisCharts?e.forEach((function(n,a){t.globals.collapsedSeriesIndices.indexOf(a)<0&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(a)<0||(e[a].data=[],i++)})):e.forEach((function(n,a){!t.globals.collapsedSeriesIndices.indexOf(a)<0&&(e[a]=0,i++)})),t.globals.allSeriesCollapsed=i===e.length,e}}]),s})(),bI=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new ON(this)}return ci(s,[{key:"init",value:function(){var e=this.w,t=e.globals,i=e.config,n=i.legend.showForSingleSeries&&t.series.length===1||this.isBarsDistributed||t.series.length>1;if(this.legendHelpers.appendToForeignObject(),(n||!t.axisCharts)&&i.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),i.legend.position==="bottom"||i.legend.position==="top"?this.legendAlignHorizontal():i.legend.position!=="right"&&i.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(e){var t=e.i,i=e.fillcolor,n=this.w,a=document.createElement("span");a.classList.add("apexcharts-legend-marker");var o=n.config.legend.markers.shape||n.config.markers.shape,r=o;Array.isArray(o)&&(r=o[t]);var d=Array.isArray(n.config.legend.markers.size)?parseFloat(n.config.legend.markers.size[t]):parseFloat(n.config.legend.markers.size),g=Array.isArray(n.config.legend.markers.offsetX)?parseFloat(n.config.legend.markers.offsetX[t]):parseFloat(n.config.legend.markers.offsetX),x=Array.isArray(n.config.legend.markers.offsetY)?parseFloat(n.config.legend.markers.offsetY[t]):parseFloat(n.config.legend.markers.offsetY),v=Array.isArray(n.config.legend.markers.strokeWidth)?parseFloat(n.config.legend.markers.strokeWidth[t]):parseFloat(n.config.legend.markers.strokeWidth),k=a.style;if(k.height=2*(d+v)+"px",k.width=2*(d+v)+"px",k.left=g+"px",k.top=x+"px",n.config.legend.markers.customHTML)k.background="transparent",k.color=i[t],Array.isArray(n.config.legend.markers.customHTML)?n.config.legend.markers.customHTML[t]&&(a.innerHTML=n.config.legend.markers.customHTML[t]()):a.innerHTML=n.config.legend.markers.customHTML();else{var E=new ep(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(r),seriesIndex:t,strokeWidth:v,size:d}),F=window.SVG().addTo(a).size("100%","100%"),O=new Lt(this.ctx).drawMarker(0,0,Xt(Xt({},E),{},{pointFillColor:Array.isArray(i)?i[t]:E.pointFillColor,shape:r}));n.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach((function(N){N.node.classList.contains("apexcharts-marker-triangle")?N.node.style.transform="translate(50%, 45%)":N.node.style.transform="translate(50%, 50%)"})),F.add(O)}return a}},{key:"drawLegends",value:function(){var e=this,t=this,i=this.w,n=i.config.legend.fontFamily,a=i.globals.seriesNames,o=i.config.legend.markers.fillColors?i.config.legend.markers.fillColors.slice():i.globals.colors.slice();if(i.config.chart.type==="heatmap"){var r=i.config.plotOptions.heatmap.colorScale.ranges;a=r.map((function(E){return E.name?E.name:E.from+" - "+E.to})),o=r.map((function(E){return E.color}))}else this.isBarsDistributed&&(a=i.globals.labels.slice());i.config.legend.customLegendItems.length&&(a=i.config.legend.customLegendItems);var d=i.globals.legendFormatter,g=i.config.legend.inverseOrder,x=[];i.globals.seriesGroups.length>1&&i.config.legend.clusterGroupedSeries&&i.globals.seriesGroups.forEach((function(E,F){x[F]=document.createElement("div"),x[F].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(F)),i.config.legend.clusterGroupedSeriesOrientation==="horizontal"?i.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):x[F].classList.add("apexcharts-legend-group-vertical")}));for(var v=function(E){var F,O=d(a[E],{seriesIndex:E,w:i}),N=!1,$=!1;if(i.globals.collapsedSeries.length>0)for(var X=0;X<i.globals.collapsedSeries.length;X++)i.globals.collapsedSeries[X].index===E&&(N=!0);if(i.globals.ancillaryCollapsedSeriesIndices.length>0)for(var K=0;K<i.globals.ancillaryCollapsedSeriesIndices.length;K++)i.globals.ancillaryCollapsedSeriesIndices[K]===E&&($=!0);var ie=e.createLegendMarker({i:E,fillcolor:o});Lt.setAttrs(ie,{rel:E+1,"data:collapsed":N||$}),(N||$)&&ie.classList.add("apexcharts-inactive-legend");var ee=document.createElement("div"),le=document.createElement("span");le.classList.add("apexcharts-legend-text"),le.innerHTML=Array.isArray(O)?O.join(" "):O;var te=i.config.legend.labels.useSeriesColors?i.globals.colors[E]:Array.isArray(i.config.legend.labels.colors)?(F=i.config.legend.labels.colors)===null||F===void 0?void 0:F[E]:i.config.legend.labels.colors;te||(te=i.config.chart.foreColor),le.style.color=te,le.style.fontSize=parseFloat(i.config.legend.fontSize)+"px",le.style.fontWeight=i.config.legend.fontWeight,le.style.fontFamily=n||i.config.chart.fontFamily,Lt.setAttrs(le,{rel:E+1,i:E,"data:default-text":encodeURIComponent(O),"data:collapsed":N||$}),ee.appendChild(ie),ee.appendChild(le);var he=new or(e.ctx);i.config.legend.showForZeroSeries||he.getSeriesTotalByIndex(E)===0&&he.seriesHaveSameValues(E)&&!he.isSeriesNull(E)&&i.globals.collapsedSeriesIndices.indexOf(E)===-1&&i.globals.ancillaryCollapsedSeriesIndices.indexOf(E)===-1&&ee.classList.add("apexcharts-hidden-zero-series"),i.config.legend.showForNullSeries||he.isSeriesNull(E)&&i.globals.collapsedSeriesIndices.indexOf(E)===-1&&i.globals.ancillaryCollapsedSeriesIndices.indexOf(E)===-1&&ee.classList.add("apexcharts-hidden-null-series"),x.length?i.globals.seriesGroups.forEach((function(de,ke){var De;de.includes((De=i.config.series[E])===null||De===void 0?void 0:De.name)&&(i.globals.dom.elLegendWrap.appendChild(x[ke]),x[ke].appendChild(ee))})):i.globals.dom.elLegendWrap.appendChild(ee),i.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(i.config.legend.horizontalAlign)),i.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+i.config.legend.position),ee.classList.add("apexcharts-legend-series"),ee.style.margin="".concat(i.config.legend.itemMargin.vertical,"px ").concat(i.config.legend.itemMargin.horizontal,"px"),i.globals.dom.elLegendWrap.style.width=i.config.legend.width?i.config.legend.width+"px":"",i.globals.dom.elLegendWrap.style.height=i.config.legend.height?i.config.legend.height+"px":"",Lt.setAttrs(ee,{rel:E+1,seriesName:Je.escapeString(a[E]),"data:collapsed":N||$}),(N||$)&&ee.classList.add("apexcharts-inactive-legend"),i.config.legend.onItemClick.toggleDataSeries||ee.classList.add("apexcharts-no-click")},k=g?a.length-1:0;g?k>=0:k<=a.length-1;g?k--:k++)v(k);i.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),i.config.legend.onItemHover.highlightDataSeries&&i.config.legend.customLegendItems.length===0&&(i.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),i.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var i=this.w,n=i.globals.dom.elLegendWrap,a=n.clientHeight,o=0,r=0;if(i.config.legend.position==="bottom")r=i.globals.svgHeight-Math.min(a,i.globals.svgHeight/2)-5;else if(i.config.legend.position==="top"){var d=new nx(this.ctx),g=d.dimHelpers.getTitleSubtitleCoords("title").height,x=d.dimHelpers.getTitleSubtitleCoords("subtitle").height;r=(g>0?g-10:0)+(x>0?x-10:0)}n.style.position="absolute",o=o+e+i.config.legend.offsetX,r=r+t+i.config.legend.offsetY,n.style.left=o+"px",n.style.top=r+"px",i.config.legend.position==="right"&&(n.style.left="auto",n.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach((function(v){n.style[v]&&(n.style[v]=parseInt(i.config.legend[v],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.elLegendWrap.style.right=0;var t=new nx(this.ctx),i=t.dimHelpers.getTitleSubtitleCoords("title"),n=t.dimHelpers.getTitleSubtitleCoords("subtitle"),a=0;e.config.legend.position==="top"&&(a=i.height+n.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,a)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendDimensions(),i=0;e.config.legend.position==="left"&&(i=20),e.config.legend.position==="right"&&(i=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,i=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(t.config.chart.type==="heatmap"||this.isBarsDistributed){if(i){var n=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,n,this.w]),new il(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&i&&new il(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(e.target.getAttribute("rel"),10)-1,n=e.target.getAttribute("data:collapsed")==="true",a=this.w.config.chart.events.legendClick;typeof a=="function"&&a(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var o=this.w.config.legend.markers.onClick;typeof o=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(o(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),t.config.chart.type!=="treemap"&&t.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,n)}}}]),s})(),wI=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w;var t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}return ci(s,[{key:"createToolbar",value:function(){var e=this,t=this.w,i=function(){return document.createElement("div")},n=i();if(n.setAttribute("class","apexcharts-toolbar"),n.style.top=t.config.chart.toolbar.offsetY+"px",n.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(n),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var a=0;a<this.t.customIcons.length;a++)this.elCustomIcons.push(i());var o=[],r=function(v,k,E){var F=v.toLowerCase();e.t[F]&&t.config.chart.zoom.enabled&&o.push({el:k,icon:typeof e.t[F]=="string"?e.t[F]:E,title:e.localeValues[v],class:"apexcharts-".concat(F,"-icon")})};r("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),r("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var d=function(v){e.t[v]&&t.config.chart[v].enabled&&o.push({el:v==="zoom"?e.elZoom:e.elSelection,icon:typeof e.t[v]=="string"?e.t[v]:v==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:e.localeValues[v==="zoom"?"selectionZoom":"selection"],class:"apexcharts-".concat(v,"-icon")})};d("zoom"),d("selection"),this.t.pan&&t.config.chart.zoom.enabled&&o.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:"apexcharts-pan-icon"}),r("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&o.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var g=0;g<this.elCustomIcons.length;g++)o.push({el:this.elCustomIcons[g],icon:this.t.customIcons[g].icon,title:this.t.customIcons[g].title,index:this.t.customIcons[g].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[g].class});o.forEach((function(v,k){v.index&&Je.moveIndexInArray(o,k,v.index)}));for(var x=0;x<o.length;x++)Lt.setAttrs(o[x].el,{class:o[x].class,title:o[x].title}),o[x].el.innerHTML=o[x].icon,n.appendChild(o[x].el);this._createHamburgerMenu(n),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),Lt.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],i=0;i<t.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=t[i].title,Lt.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(t[i].name),title:t[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(i){i.classList.contains("exportSVG")?i.addEventListener("click",e.handleDownload.bind(e,"svg")):i.classList.contains("exportPNG")?i.addEventListener("click",e.handleDownload.bind(e,"png")):i.classList.contains("exportCSV")&&i.addEventListener("click",e.handleDownload.bind(e,"csv"))}));for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls();var i=e==="selection"?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,n=e==="selection"?"selectionEnabled":"zoomEnabled";t.w.globals[n]=!t.w.globals[n],i.classList.contains(t.ctx.toolbar.selectedClass)?i.classList.remove(t.ctx.toolbar.selectedClass):i.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t=e==="pan"?this.elPan:this.elZoom,i=e==="pan"?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(i){i&&i.classList.remove(e.selectedClass)}))}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,i=(this.minX+t)/2,n=(this.maxX+t)/2,a=this._getNewMinXMaxX(i,n);e.globals.disableZoomIn||this.zoomUpdateOptions(a.minX,a.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!(e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,i=this.minX-(t-this.minX),n=this.maxX-(t-this.maxX),a=this._getNewMinXMaxX(i,n);e.globals.disableZoomOut||this.zoomUpdateOptions(a.minX,a.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(e):e,maxX:i?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var i=this.w;if(e!==void 0||t!==void 0){if(!(i.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=i.globals.dataPoints),t-e<2))){var n={min:e,max:t},a=this.getBeforeZoomRange(n);a&&(n=a.xaxis);var o={xaxis:n},r=Je.clone(i.globals.initialConfig.yaxis);i.config.chart.group||(o.yaxis=r),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(o,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(n,r)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){typeof this.ev.zoomed=="function"&&(this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t}),this.ctx.events.fireEvent("zoomed",{xaxis:e,yaxis:t}))}},{key:"getBeforeZoomRange",value:function(e,t){var i=null;return typeof this.ev.beforeZoom=="function"&&(i=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),i}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout((function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(e){var t=this.w,i=new Wg(this.ctx);switch(e){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){var i=t.w;if(i.globals.lastXAxis.min=i.globals.initialConfig.xaxis.min,i.globals.lastXAxis.max=i.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),typeof i.config.chart.events.beforeResetZoom=="function"){var n=i.config.chart.events.beforeResetZoom(t,i);n&&t.updateHelpers.revertDefaultAxisMinMax(n)}typeof i.config.chart.events.zoomed=="function"&&t.ctx.toolbar.zoomCallback({min:i.config.xaxis.min,max:i.config.xaxis.max}),i.globals.zoomed=!1;var a=t.ctx.series.emptyCollapsedSeries(Je.clone(i.globals.initialSeries));t.updateHelpers._updateSeries(a,i.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),s})(),zN=(function(s){bm(t,wI);var e=vm(t);function t(i){var n;return li(this,t),(n=e.call(this,i)).ctx=i,n.w=i.w,n.dragged=!1,n.graphics=new Lt(n.ctx),n.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],n.clientX=0,n.clientY=0,n.startX=0,n.endX=0,n.dragX=0,n.startY=0,n.endY=0,n.dragY=0,n.moveDirection="none",n.debounceTimer=null,n.debounceDelay=100,n.wheelDelay=400,n}return ci(t,[{key:"init",value:function(i){var n=this,a=i.xyRatios,o=this.w,r=this;this.xyRatios=a,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=o.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new sr(0,0,o.globals.gridWidth,o.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),o.globals.dom.Paper.add(this.zoomRect),o.globals.dom.Paper.add(this.selectionRect),o.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:o.globals.gridWidth,maxY:o.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):o.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:o.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=o.globals.dom.baseEl.querySelector("".concat(o.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(d){n.hoverArea.addEventListener(d,r.svgMouseEvents.bind(r,a),{capture:!1,passive:!0})})),o.config.chart.zoom.enabled&&o.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",r.mouseWheelEvent.bind(r),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(i,n){var a=this.w,o=this.ctx.toolbar,r=a.globals.zoomEnabled?a.config.chart.zoom.type:a.config.chart.selection.type,d=a.config.chart.toolbar.autoSelected;if(n.shiftKey?(this.shiftWasPressed=!0,o.enableZoomPanFromToolbar(d==="pan"?"zoom":"pan")):this.shiftWasPressed&&(o.enableZoomPanFromToolbar(d),this.shiftWasPressed=!1),n.target){var g,x=n.target.classList;if(n.target.parentNode&&n.target.parentNode!==null&&(g=n.target.parentNode.classList),!(x.contains("apexcharts-legend-marker")||x.contains("apexcharts-legend-text")||g&&g.contains("apexcharts-toolbar"))){if(this.clientX=n.type==="touchmove"||n.type==="touchstart"?n.touches[0].clientX:n.type==="touchend"?n.changedTouches[0].clientX:n.clientX,this.clientY=n.type==="touchmove"||n.type==="touchstart"?n.touches[0].clientY:n.type==="touchend"?n.changedTouches[0].clientY:n.clientY,n.type==="mousedown"&&n.which===1||n.type==="touchstart"){var v=this.gridRect.getBoundingClientRect();this.startX=this.clientX-v.left-a.globals.barPadForNumericAxis,this.startY=this.clientY-v.top,this.dragged=!1,this.w.globals.mousedown=!0}(n.type==="mousemove"&&n.which===1||n.type==="touchmove")&&(this.dragged=!0,a.globals.panEnabled?(a.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:r,xyRatios:i})):(this.w.globals.mousedown&&a.globals.zoomEnabled||this.w.globals.mousedown&&a.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:r}))),n.type!=="mouseup"&&n.type!=="touchend"&&n.type!=="mouseleave"||this.handleMouseUp({zoomtype:r}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(i){var n,a=i.zoomtype,o=i.isResized,r=this.w,d=(n=this.gridRect)===null||n===void 0?void 0:n.getBoundingClientRect();d&&(this.w.globals.mousedown||o)&&(this.endX=this.clientX-d.left-r.globals.barPadForNumericAxis,this.endY=this.clientY-d.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(r.globals.zoomEnabled||r.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:a})),r.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(i){var n=this,a=this.w;i.preventDefault();var o=Date.now();o-a.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(i),a.globals.lastWheelExecution=o),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){o-a.globals.lastWheelExecution>n.wheelDelay&&(n.executeMouseWheelZoom(i),a.globals.lastWheelExecution=o)}),this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(i){var n,a=this.w;this.minX=a.globals.isRangeBar?a.globals.minY:a.globals.minX,this.maxX=a.globals.isRangeBar?a.globals.maxY:a.globals.maxX;var o=(n=this.gridRect)===null||n===void 0?void 0:n.getBoundingClientRect();if(o){var r,d,g,x=(i.clientX-o.left)/o.width,v=this.minX,k=this.maxX,E=k-v;if(i.deltaY<0){var F=v+x*E;d=F-(r=.5*E)/2,g=F+r/2}else d=v-(r=1.5*E)/2,g=k+r/2;if(!a.globals.isRangeBar){d=Math.max(d,a.globals.initialMinX),g=Math.min(g,a.globals.initialMaxX);var O=.01*(a.globals.initialMaxX-a.globals.initialMinX);if(g-d<O){var N=(d+g)/2;d=N-O/2,g=N+O/2}}var $=this._getNewMinXMaxX(d,g);isNaN($.minX)||isNaN($.maxX)||this.zoomUpdateOptions($.minX,$.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var i=this,n=this.w;if(this.selectionRect){var a=this.selectionRect.node.getBoundingClientRect();a.width>0&&a.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(o,r,d,g,x){return x==="l"||x==="r"?o.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):o.circle(0)},updateHandle:function(o,r){return o.center(r[0],r[1])}}).resize().on("resize",(function(){var o=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type;i.handleMouseUp({zoomtype:o,isResized:!0})})))}}},{key:"preselectedSelection",value:function(){var i=this.w,n=this.xyRatios;if(!i.globals.zoomEnabled){if(i.globals.selection!==void 0&&i.globals.selection!==null)this.drawSelectionRect(Xt(Xt({},i.globals.selection),{},{translateX:i.globals.translateX,translateY:i.globals.translateY}));else if(i.config.chart.selection.xaxis.min!==void 0&&i.config.chart.selection.xaxis.max!==void 0){var a=(i.config.chart.selection.xaxis.min-i.globals.minX)/n.xRatio,o=i.globals.gridWidth-(i.globals.maxX-i.config.chart.selection.xaxis.max)/n.xRatio-a;i.globals.isRangeBar&&(a=(i.config.chart.selection.xaxis.min-i.globals.yAxisScale[0].niceMin)/n.invertedYRatio,o=(i.config.chart.selection.xaxis.max-i.config.chart.selection.xaxis.min)/n.invertedYRatio);var r={x:a,y:0,width:o,height:i.globals.gridHeight,translateX:i.globals.translateX,translateY:i.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(r),this.makeSelectionRectDraggable(),typeof i.config.chart.events.selection=="function"&&i.config.chart.events.selection(this.ctx,{xaxis:{min:i.config.chart.selection.xaxis.min,max:i.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(i){var n=i.x,a=i.y,o=i.width,r=i.height,d=i.translateX,g=d===void 0?0:d,x=i.translateY,v=x===void 0?0:x,k=this.w,E=this.zoomRect,F=this.selectionRect;if(this.dragged||k.globals.selection!==null){var O={transform:"translate("+g+", "+v+")"};k.globals.zoomEnabled&&this.dragged&&(o<0&&(o=1),E.attr({x:n,y:a,width:o,height:r,fill:k.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":k.config.chart.zoom.zoomedArea.fill.opacity,stroke:k.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":k.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":k.config.chart.zoom.zoomedArea.stroke.opacity}),Lt.setAttrs(E.node,O)),k.globals.selectionEnabled&&(F.attr({x:n,y:a,width:o>0?o:0,height:r>0?r:0,fill:k.config.chart.selection.fill.color,"fill-opacity":k.config.chart.selection.fill.opacity,stroke:k.config.chart.selection.stroke.color,"stroke-width":k.config.chart.selection.stroke.width,"stroke-dasharray":k.config.chart.selection.stroke.dashArray,"stroke-opacity":k.config.chart.selection.stroke.opacity}),Lt.setAttrs(F.node,O))}}},{key:"hideSelectionRect",value:function(i){i&&i.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(i){var n=i.context,a=i.zoomtype,o=this.w,r=n,d=this.gridRect.getBoundingClientRect(),g=r.startX-1,x=r.startY,v=!1,k=!1,E=r.clientX-d.left-o.globals.barPadForNumericAxis,F=r.clientY-d.top,O=E-g,N=F-x,$={translateX:o.globals.translateX,translateY:o.globals.translateY};return Math.abs(O+g)>o.globals.gridWidth?O=o.globals.gridWidth-g:E<0&&(O=g),g>E&&(v=!0,O=Math.abs(O)),x>F&&(k=!0,N=Math.abs(N)),$=Xt(Xt({},$=a==="x"?{x:v?g-O:g,y:0,width:O,height:o.globals.gridHeight}:a==="y"?{x:0,y:k?x-N:x,width:o.globals.gridWidth,height:N}:{x:v?g-O:g,y:k?x-N:x,width:O,height:N}),{},{translateX:o.globals.translateX,translateY:o.globals.translateY}),r.drawSelectionRect($),r.selectionDragging("resizing"),$}},{key:"selectionDragging",value:function(i,n){var a=this,o=this.w;if(n){n.preventDefault();var r=n.detail,d=r.handler,g=r.box,x=g.x,v=g.y;x<this.constraints.x&&(x=this.constraints.x),v<this.constraints.y&&(v=this.constraints.y),g.x2>this.constraints.x2&&(x=this.constraints.x2-g.w),g.y2>this.constraints.y2&&(v=this.constraints.y2-g.h),d.move(x,v);var k=this.xyRatios,E=this.selectionRect,F=0;i==="resizing"&&(F=30);var O=function($){return parseFloat(E.node.getAttribute($))},N={x:O("x"),y:O("y"),width:O("width"),height:O("height")};o.globals.selection=N,typeof o.config.chart.events.selection=="function"&&o.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var $,X,K,ie,ee=a.gridRect.getBoundingClientRect(),le=E.node.getBoundingClientRect();o.globals.isRangeBar?($=o.globals.yAxisScale[0].niceMin+(le.left-ee.left)*k.invertedYRatio,X=o.globals.yAxisScale[0].niceMin+(le.right-ee.left)*k.invertedYRatio,K=0,ie=1):($=o.globals.xAxisScale.niceMin+(le.left-ee.left)*k.xRatio,X=o.globals.xAxisScale.niceMin+(le.right-ee.left)*k.xRatio,K=o.globals.yAxisScale[0].niceMin+(ee.bottom-le.bottom)*k.yRatio[0],ie=o.globals.yAxisScale[0].niceMax-(le.top-ee.top)*k.yRatio[0]);var te={xaxis:{min:$,max:X},yaxis:{min:K,max:ie}};o.config.chart.events.selection(a.ctx,te),o.config.chart.brush.enabled&&o.config.chart.events.brushScrolled!==void 0&&o.config.chart.events.brushScrolled(a.ctx,te)}),F))}}},{key:"selectionDrawn",value:function(i){var n,a,o=i.context,r=i.zoomtype,d=this.w,g=o,x=this.xyRatios,v=this.ctx.toolbar,k=d.globals.zoomEnabled?g.zoomRect.node.getBoundingClientRect():g.selectionRect.node.getBoundingClientRect(),E=g.gridRect.getBoundingClientRect(),F=k.left-E.left-d.globals.barPadForNumericAxis,O=k.right-E.left-d.globals.barPadForNumericAxis,N=k.top-E.top,$=k.bottom-E.top;d.globals.isRangeBar?(n=d.globals.yAxisScale[0].niceMin+F*x.invertedYRatio,a=d.globals.yAxisScale[0].niceMin+O*x.invertedYRatio):(n=d.globals.xAxisScale.niceMin+F*x.xRatio,a=d.globals.xAxisScale.niceMin+O*x.xRatio);var X=[],K=[];if(d.config.yaxis.forEach((function(ke,De){var Ae=d.globals.seriesYAxisMap[De][0],$e=d.globals.yAxisScale[De].niceMax-x.yRatio[Ae]*N,et=d.globals.yAxisScale[De].niceMax-x.yRatio[Ae]*$;X.push($e),K.push(et)})),g.dragged&&(g.dragX>10||g.dragY>10)&&n!==a){if(d.globals.zoomEnabled){var ie=Je.clone(d.globals.initialConfig.yaxis),ee=Je.clone(d.globals.initialConfig.xaxis);if(d.globals.zoomed=!0,d.config.xaxis.convertedCatToNumeric&&(n=Math.floor(n),a=Math.floor(a),n<1&&(n=1,a=d.globals.dataPoints),a-n<2&&(a=n+1)),r!=="xy"&&r!=="x"||(ee={min:n,max:a}),r!=="xy"&&r!=="y"||ie.forEach((function(ke,De){ie[De].min=K[De],ie[De].max=X[De]})),v){var le=v.getBeforeZoomRange(ee,ie);le&&(ee=le.xaxis?le.xaxis:ee,ie=le.yaxis?le.yaxis:ie)}var te={xaxis:ee};d.config.chart.group||(te.yaxis=ie),g.ctx.updateHelpers._updateOptions(te,!1,g.w.config.chart.animations.dynamicAnimation.enabled),typeof d.config.chart.events.zoomed=="function"&&v.zoomCallback(ee,ie)}else if(d.globals.selectionEnabled){var he,de=null;he={min:n,max:a},r!=="xy"&&r!=="y"||(de=Je.clone(d.config.yaxis)).forEach((function(ke,De){de[De].min=K[De],de[De].max=X[De]})),d.globals.selection=g.selection,typeof d.config.chart.events.selection=="function"&&d.config.chart.events.selection(g.ctx,{xaxis:he,yaxis:de})}}}},{key:"panDragging",value:function(i){var n=i.context,a=this.w,o=n;if(a.globals.lastClientPosition.x!==void 0){var r=a.globals.lastClientPosition.x-o.clientX,d=a.globals.lastClientPosition.y-o.clientY;Math.abs(r)>Math.abs(d)&&r>0?this.moveDirection="left":Math.abs(r)>Math.abs(d)&&r<0?this.moveDirection="right":Math.abs(d)>Math.abs(r)&&d>0?this.moveDirection="up":Math.abs(d)>Math.abs(r)&&d<0&&(this.moveDirection="down")}a.globals.lastClientPosition={x:o.clientX,y:o.clientY};var g=a.globals.isRangeBar?a.globals.minY:a.globals.minX,x=a.globals.isRangeBar?a.globals.maxY:a.globals.maxX;o.panScrolled(g,x)}},{key:"panScrolled",value:function(i,n){var a=this.w,o=this.xyRatios,r=Je.clone(a.globals.initialConfig.yaxis),d=o.xRatio,g=a.globals.minX,x=a.globals.maxX;a.globals.isRangeBar&&(d=o.invertedYRatio,g=a.globals.minY,x=a.globals.maxY),this.moveDirection==="left"?(i=g+a.globals.gridWidth/15*d,n=x+a.globals.gridWidth/15*d):this.moveDirection==="right"&&(i=g-a.globals.gridWidth/15*d,n=x-a.globals.gridWidth/15*d),a.globals.isRangeBar||(i<a.globals.initialMinX||n>a.globals.initialMaxX)&&(i=g,n=x);var v={xaxis:{min:i,max:n}};a.config.chart.group||(v.yaxis=r),this.updateScrolledChart(v,i,n)}},{key:"updateScrolledChart",value:function(i,n,a){var o=this.w;if(this.ctx.updateHelpers._updateOptions(i,!1,!1),typeof o.config.chart.events.scrolled=="function"){var r={xaxis:{min:n,max:a}};o.config.chart.events.scrolled(this.ctx,r),this.ctx.events.fireEvent("scrolled",r)}}}]),t})(),SI=(function(){function s(e){li(this,s),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return ci(s,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,i=e.elGrid,n=e.clientX,a=e.clientY,o=this.w,r=i.getBoundingClientRect(),d=r.width,g=r.height,x=d/(o.globals.dataPoints-1),v=g/o.globals.dataPoints,k=this.hasBars();!o.globals.comboCharts&&!k||o.config.xaxis.convertedCatToNumeric||(x=d/o.globals.dataPoints);var E=n-r.left-o.globals.barPadForNumericAxis,F=a-r.top;E<0||F<0||E>d||F>g?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):o.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):o.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var O=Math.round(E/x),N=Math.floor(F/v);k&&!o.config.xaxis.convertedCatToNumeric&&(O=Math.ceil(E/x),O-=1);var $=null,X=null,K=o.globals.seriesXvalues.map((function(he){return he.filter((function(de){return Je.isNumber(de)}))})),ie=o.globals.seriesYvalues.map((function(he){return he.filter((function(de){return Je.isNumber(de)}))}));if(o.globals.isXNumeric){var ee=this.ttCtx.getElGrid().getBoundingClientRect(),le=E*(ee.width/d),te=F*(ee.height/g);$=(X=this.closestInMultiArray(le,te,K,ie)).index,O=X.j,$!==null&&o.globals.hasNullValues&&(K=o.globals.seriesXvalues[$],O=(X=this.closestInArray(le,K)).j)}return o.globals.capturedSeriesIndex=$===null?-1:$,(!O||O<1)&&(O=0),o.globals.isBarHorizontal?o.globals.capturedDataPointIndex=N:o.globals.capturedDataPointIndex=O,{capturedSeries:$,j:o.globals.isBarHorizontal?N:O,hoverX:E,hoverY:F}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,i=0,n=e.map((function(o,r){return o.length>0?r:-1})),a=0;a<n.length;a++)if(n[a]!==-1&&t.globals.collapsedSeriesIndices.indexOf(a)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(a)===-1){i=n[a];break}return i}},{key:"closestInMultiArray",value:function(e,t,i,n){for(var a,o=this.w,r=1/0,d=null,g=null,x=0;x<i.length;x++)if(a=x,o.globals.collapsedSeriesIndices.indexOf(a)===-1&&o.globals.ancillaryCollapsedSeriesIndices.indexOf(a)===-1)for(var v=i[x],k=n[x],E=Math.min(v.length,k.length),F=0;F<E;F++){var O=e-v[F],N=Math.sqrt(O*O);if(!o.globals.allSeriesHasEqualX){var $=t-k[F];N=Math.sqrt(O*O+$*$)}N<r&&(r=N,d=x,g=F)}return{index:d,j:g}}},{key:"closestInArray",value:function(e,t){for(var i=t[0],n=null,a=Math.abs(e-i),o=0;o<t.length;o++){var r=Math.abs(e-t[o]);r<a&&(a=r,n=o)}return{j:n}}},{key:"isXoverlap",value:function(e){var t=[],i=this.w.globals.seriesX.filter((function(a){return a[0]!==void 0}));if(i.length>0)for(var n=0;n<i.length-1;n++)i[n][e]!==void 0&&i[n+1][e]!==void 0&&i[n][e]!==i[n+1][e]&&t.push("unEqual");return t.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,i=0;i<t.length-1;i++)if(t[i].data.length!==t[i+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return Hr(e).reduce((function(t,i){return t+i.getBBox().height}),0)}},{key:"getElMarkers",value:function(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");i=Hr(i),t&&(i=i.filter((function(a){var o=Number(a.getAttribute("data:realIndex"));return e.w.globals.collapsedSeriesIndices.indexOf(o)===-1}))),i.sort((function(a,o){var r=Number(a.getAttribute("data:realIndex")),d=Number(o.getAttribute("data:realIndex"));return d<r?1:d>r?-1:0}));var n=[];return i.forEach((function(a){n.push(a.querySelector(".apexcharts-marker"))})),n}},{key:"hasMarkers",value:function(e){return this.getElMarkers(e).length>0}},{key:"getPathFromPoint",value:function(e,t){var i=Number(e.getAttribute("cx")),n=Number(e.getAttribute("cy")),a=e.getAttribute("shape");return new Lt(this.ctx).getMarkerPath(i,n,a,t)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,i=t.config.markers.hover.size;return i===void 0&&(i=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,i=this.ttCtx;i.allTooltipSeriesGroups.length===0&&(i.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var n=i.allTooltipSeriesGroups,a=0;a<n.length;a++)e==="enable"?(n[a].classList.add("apexcharts-active"),n[a].style.display=t.config.tooltip.items.display):(n[a].classList.remove("apexcharts-active"),n[a].style.display="none")}}]),s})(),FN=(function(){function s(e){li(this,s),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new SI(e)}return ci(s,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,i=t===void 0||t,n=e.ttItems,a=e.i,o=a===void 0?0:a,r=e.j,d=r===void 0?null:r,g=e.y1,x=e.y2,v=e.e,k=this.w;k.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:o,j:d,y1:g,y2:x,w:k}):this.toggleActiveInactiveSeries(i,o);var E=this.getValuesToPrint({i:o,j:d});this.printLabels({i:o,j:d,values:E,ttItems:n,shared:i,e:v});var F=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=F.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=F.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,i=this,n=e.i,a=e.j,o=e.values,r=e.ttItems,d=e.shared,g=e.e,x=this.w,v=[],k=function(ee){return x.globals.seriesGoals[ee]&&x.globals.seriesGoals[ee][a]&&Array.isArray(x.globals.seriesGoals[ee][a])},E=o.xVal,F=o.zVal,O=o.xAxisTTVal,N="",$=x.globals.colors[n];a!==null&&x.config.plotOptions.bar.distributed&&($=x.globals.colors[a]);for(var X=function(ee,le){var te=i.getFormatters(n);N=i.getSeriesName({fn:te.yLbTitleFormatter,index:n,seriesIndex:n,j:a}),x.config.chart.type==="treemap"&&(N=te.yLbTitleFormatter(String(x.config.series[n].data[a].x),{series:x.globals.series,seriesIndex:n,dataPointIndex:a,w:x}));var he=x.config.tooltip.inverseOrder?le:ee;if(x.globals.axisCharts){var de=function(Ae){var $e,et,Ie,at;return x.globals.isRangeData?te.yLbFormatter(($e=x.globals.seriesRangeStart)===null||$e===void 0||(et=$e[Ae])===null||et===void 0?void 0:et[a],{series:x.globals.seriesRangeStart,seriesIndex:Ae,dataPointIndex:a,w:x})+" - "+te.yLbFormatter((Ie=x.globals.seriesRangeEnd)===null||Ie===void 0||(at=Ie[Ae])===null||at===void 0?void 0:at[a],{series:x.globals.seriesRangeEnd,seriesIndex:Ae,dataPointIndex:a,w:x}):te.yLbFormatter(x.globals.series[Ae][a],{series:x.globals.series,seriesIndex:Ae,dataPointIndex:a,w:x})};if(d)te=i.getFormatters(he),N=i.getSeriesName({fn:te.yLbTitleFormatter,index:he,seriesIndex:n,j:a}),$=x.globals.colors[he],t=de(he),k(he)&&(v=x.globals.seriesGoals[he][a].map((function(Ae){return{attrs:Ae,val:te.yLbFormatter(Ae.value,{seriesIndex:he,dataPointIndex:a,w:x})}})));else{var ke,De=g==null||(ke=g.target)===null||ke===void 0?void 0:ke.getAttribute("fill");De&&(De.indexOf("url")!==-1?De.indexOf("Pattern")!==-1&&($=x.globals.dom.baseEl.querySelector(De.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):$=De),t=de(n),k(n)&&Array.isArray(x.globals.seriesGoals[n][a])&&(v=x.globals.seriesGoals[n][a].map((function(Ae){return{attrs:Ae,val:te.yLbFormatter(Ae.value,{seriesIndex:n,dataPointIndex:a,w:x})}})))}}a===null&&(t=te.yLbFormatter(x.globals.series[n],Xt(Xt({},x),{},{seriesIndex:n,dataPointIndex:n}))),i.DOMHandling({i:n,t:he,j:a,ttItems:r,values:{val:t,goalVals:v,xVal:E,xAxisTTVal:O,zVal:F},seriesName:N,shared:d,pColor:$})},K=0,ie=x.globals.series.length-1;K<x.globals.series.length;K++,ie--)X(K,ie)}},{key:"getFormatters",value:function(e){var t,i=this.w,n=i.globals.yLabelFormatters[e];return i.globals.ttVal!==void 0?Array.isArray(i.globals.ttVal)?(n=i.globals.ttVal[e]&&i.globals.ttVal[e].formatter,t=i.globals.ttVal[e]&&i.globals.ttVal[e].title&&i.globals.ttVal[e].title.formatter):(n=i.globals.ttVal.formatter,typeof i.globals.ttVal.title.formatter=="function"&&(t=i.globals.ttVal.title.formatter)):t=i.config.tooltip.y.title.formatter,typeof n!="function"&&(n=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(a){return a}),typeof t!="function"&&(t=function(a){return a?a+": ":""}),{yLbFormatter:n,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,i=e.index,n=e.seriesIndex,a=e.j,o=this.w;return t(String(o.globals.seriesNames[i]),{series:o.globals.series,seriesIndex:n,dataPointIndex:a,w:o})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,i=e.j,n=e.ttItems,a=e.values,o=e.seriesName,r=e.shared,d=e.pColor,g=this.w,x=this.ttCtx,v=a.val,k=a.goalVals,E=a.xVal,F=a.xAxisTTVal,O=a.zVal,N=null;N=n[t].children,g.config.tooltip.fillSeriesColor&&(n[t].style.backgroundColor=d,N[0].style.display="none"),x.showTooltipTitle&&(x.tooltipTitle===null&&(x.tooltipTitle=g.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),x.tooltipTitle.innerHTML=E),x.isXAxisTooltipEnabled&&(x.xaxisTooltipText.innerHTML=F!==""?F:E);var $=n[t].querySelector(".apexcharts-tooltip-text-y-label");$&&($.innerHTML=o||"");var X=n[t].querySelector(".apexcharts-tooltip-text-y-value");X&&(X.innerHTML=v!==void 0?v:""),N[0]&&N[0].classList.contains("apexcharts-tooltip-marker")&&(g.config.tooltip.marker.fillColors&&Array.isArray(g.config.tooltip.marker.fillColors)&&(d=g.config.tooltip.marker.fillColors[t]),g.config.tooltip.fillSeriesColor?N[0].style.backgroundColor=d:N[0].style.color=d),g.config.tooltip.marker.show||(N[0].style.display="none");var K=n[t].querySelector(".apexcharts-tooltip-text-goals-label"),ie=n[t].querySelector(".apexcharts-tooltip-text-goals-value");if(k.length&&g.globals.seriesGoals[t]){var ee=function(){var he="<div>",de="<div>";k.forEach((function(ke,De){he+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(ke.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(ke.attrs.name,"</div>"),de+="<div>".concat(ke.val,"</div>")})),K.innerHTML=he+"</div>",ie.innerHTML=de+"</div>"};r?g.globals.seriesGoals[t][i]&&Array.isArray(g.globals.seriesGoals[t][i])?ee():(K.innerHTML="",ie.innerHTML=""):ee()}else K.innerHTML="",ie.innerHTML="";if(O!==null&&(n[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=g.config.tooltip.z.title,n[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=O!==void 0?O:""),r&&N[0]){if(g.config.tooltip.hideEmptySeries){var le=n[t].querySelector(".apexcharts-tooltip-marker"),te=n[t].querySelector(".apexcharts-tooltip-text");parseFloat(v)==0?(le.style.display="none",te.style.display="none"):(le.style.display="block",te.style.display="block")}v==null||g.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||g.globals.collapsedSeriesIndices.indexOf(t)>-1||Array.isArray(x.tConfig.enabledOnSeries)&&x.tConfig.enabledOnSeries.indexOf(t)===-1?N[0].parentNode.style.display="none":N[0].parentNode.style.display=g.config.tooltip.items.display}else Array.isArray(x.tConfig.enabledOnSeries)&&x.tConfig.enabledOnSeries.indexOf(t)===-1&&(N[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(e,t){var i=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(t));n&&(n.classList.add("apexcharts-active"),n.style.display=i.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,i=e.j,n=this.w,a=this.ctx.series.filteredSeriesX(),o="",r="",d=null,g=null,x={series:n.globals.series,seriesIndex:t,dataPointIndex:i,w:n},v=n.globals.ttZFormatter;i===null?g=n.globals.series[t]:n.globals.isXNumeric&&n.config.chart.type!=="treemap"?(o=a[t][i],a[t].length===0&&(o=a[this.tooltipUtil.getFirstActiveXArray(a)][i])):o=new bw(this.ctx).isFormatXY()?n.config.series[t].data[i]!==void 0?n.config.series[t].data[i].x:"":n.globals.labels[i]!==void 0?n.globals.labels[i]:"";var k=o;return n.globals.isXNumeric&&n.config.xaxis.type==="datetime"?o=new Cm(this.ctx).xLabelFormat(n.globals.ttKeyFormatter,k,k,{i:void 0,dateFormatter:new ss(this.ctx).formatDate,w:this.w}):o=n.globals.isBarHorizontal?n.globals.yLabelFormatters[0](k,x):n.globals.xLabelFormatter(k,x),n.config.tooltip.x.formatter!==void 0&&(o=n.globals.ttKeyFormatter(k,x)),n.globals.seriesZ.length>0&&n.globals.seriesZ[t].length>0&&(d=v(n.globals.seriesZ[t][i],n)),r=typeof n.config.xaxis.tooltip.formatter=="function"?n.globals.xaxisTooltipFormatter(k,x):o,{val:Array.isArray(g)?g.join(" "):g,xVal:Array.isArray(o)?o.join(" "):o,xAxisTTVal:Array.isArray(r)?r.join(" "):r,zVal:d}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,i=e.j,n=e.y1,a=e.y2,o=e.w,r=this.ttCtx.getElTooltip(),d=o.config.tooltip.custom;Array.isArray(d)&&d[t]&&(d=d[t]);var g=d({ctx:this.ctx,series:o.globals.series,seriesIndex:t,dataPointIndex:i,y1:n,y2:a,w:o});typeof g=="string"||typeof g=="number"?r.innerHTML=g:(g instanceof Element||typeof g.nodeName=="string")&&(r.innerHTML="",r.appendChild(g.cloneNode(!0)))}}]),s})(),kI=(function(){function s(e){li(this,s),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return ci(s,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.ttCtx,n=this.w,a=i.getElXCrosshairs(),o=e-i.xcrosshairsWidth/2,r=n.globals.labels.slice().length;if(t!==null&&(o=n.globals.gridWidth/r*t),a===null||n.globals.isBarHorizontal||(a.setAttribute("x",o),a.setAttribute("x1",o),a.setAttribute("x2",o),a.setAttribute("y2",n.globals.gridHeight),a.classList.add("apexcharts-active")),o<0&&(o=0),o>n.globals.gridWidth&&(o=n.globals.gridWidth),i.isXAxisTooltipEnabled){var d=o;n.config.xaxis.crosshairs.width!=="tickWidth"&&n.config.xaxis.crosshairs.width!=="barWidth"||(d=o+i.xcrosshairsWidth/2),this.moveXAxisTooltip(d)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;t.ycrosshairs!==null&&Lt.setAttrs(t.ycrosshairs,{y1:e,y2:e}),t.ycrosshairsHidden!==null&&Lt.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;if(i.xaxisTooltip!==null&&i.xcrosshairsWidth!==0){i.xaxisTooltip.classList.add("apexcharts-active");var n=i.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e)){e+=t.globals.translateX;var a;a=new Lt(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=a.width+"px",i.xaxisTooltip.style.left=e+"px",i.xaxisTooltip.style.top=n+"px"}}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;i.yaxisTTEls===null&&(i.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var n=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),a=t.globals.translateY+n,o=i.yaxisTTEls[e].getBoundingClientRect(),r=o.height,d=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(d-=o.width),a-=r/2,t.globals.ignoreYAxisIndexes.indexOf(e)===-1&&a>0&&a<t.globals.gridHeight?(i.yaxisTTEls[e].classList.add("apexcharts-active"),i.yaxisTTEls[e].style.top=a+"px",i.yaxisTTEls[e].style.left=d+t.config.yaxis[e].tooltip.offsetX+"px"):i.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=this.w,a=this.ttCtx,o=a.getElTooltip(),r=a.tooltipRect,d=i!==null?parseFloat(i):1,g=parseFloat(e)+d+5,x=parseFloat(t)+d/2;if(g>n.globals.gridWidth/2&&(g=g-r.ttWidth-d-10),g>n.globals.gridWidth-r.ttWidth-10&&(g=n.globals.gridWidth-r.ttWidth),g<-20&&(g=-20),n.config.tooltip.followCursor){var v=a.getElGrid().getBoundingClientRect();(g=a.e.clientX-v.left)>n.globals.gridWidth/2&&(g-=a.tooltipRect.ttWidth),(x=a.e.clientY+n.globals.translateY-v.top)>n.globals.gridHeight/2&&(x-=a.tooltipRect.ttHeight)}else n.globals.isBarHorizontal||r.ttHeight/2+x>n.globals.gridHeight&&(x=n.globals.gridHeight-r.ttHeight+n.globals.translateY);isNaN(g)||(g+=n.globals.translateX,o.style.left=g+"px",o.style.top=x+"px")}},{key:"moveMarkers",value:function(e,t){var i=this.w,n=this.ttCtx;if(i.globals.markers.size[e]>0)for(var a=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),o=0;o<a.length;o++)parseInt(a[o].getAttribute("rel"),10)===t&&(n.marker.resetPointsSize(),n.marker.enlargeCurrentPoint(t,a[o]));else n.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var i,n,a,o,r=this.w,d=this.ttCtx,g=new Lt(this.ctx),x=r.globals.pointsArray,v=d.tooltipUtil.getHoverMarkerSize(t),k=r.config.series[t].type;if(!k||k!=="column"&&k!=="candlestick"&&k!=="boxPlot"){a=(i=x[t][e])===null||i===void 0?void 0:i[0],o=((n=x[t][e])===null||n===void 0?void 0:n[1])||0;var E=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers path"));if(E&&o<r.globals.gridHeight&&o>0){var F=E.getAttribute("shape"),O=g.getMarkerPath(a,o,F,1.5*v);E.setAttribute("d",O)}this.moveXCrosshairs(a),d.fixedTooltip||this.moveTooltip(a,o,v)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,i=this.ttCtx,n=i.w,a=0,o=0,r=n.globals.pointsArray,d=new il(this.ctx),g=new Lt(this.ctx);t=d.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var x=i.tooltipUtil.getHoverMarkerSize(t);if(r[t]&&(a=r[t][e][0],o=r[t][e][1]),!isNaN(a)){var v=i.tooltipUtil.getAllMarkers();if(v.length)for(var k=0;k<n.globals.series.length;k++){var E=r[k];if(n.globals.comboCharts&&E===void 0&&v.splice(k,0,null),E&&E.length){var F=r[k][e][1],O=void 0;v[k].setAttribute("cx",a);var N=v[k].getAttribute("shape");if(n.config.chart.type==="rangeArea"&&!n.globals.comboCharts){var $=e+n.globals.series[k].length;O=r[k][$][1],F-=Math.abs(F-O)/2}if(F!==null&&!isNaN(F)&&F<n.globals.gridHeight+x&&F+x>0){var X=g.getMarkerPath(a,F,N,x);v[k].setAttribute("d",X)}else v[k].setAttribute("d","")}}this.moveXCrosshairs(a),i.fixedTooltip||this.moveTooltip(a,o||n.globals.gridHeight,x)}}},{key:"moveStickyTooltipOverBars",value:function(e,t){var i=this.w,n=this.ttCtx,a=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length;i.config.chart.stacked&&(a=i.globals.barGroups.length);var o=a>=2&&a%2==0?Math.floor(a/2):Math.floor(a/2)+1;i.globals.isBarHorizontal&&(o=new il(this.ctx).getActiveConfigSeriesIndex("desc")+1);var r=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(o,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"']"));r||typeof t!="number"||(r=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,"']")));var d=r?parseFloat(r.getAttribute("cx")):0,g=r?parseFloat(r.getAttribute("cy")):0,x=r?parseFloat(r.getAttribute("barWidth")):0,v=n.getElGrid().getBoundingClientRect(),k=r&&(r.classList.contains("apexcharts-candlestick-area")||r.classList.contains("apexcharts-boxPlot-area"));i.globals.isXNumeric?(r&&!k&&(d-=a%2!=0?x/2:0),r&&k&&(d-=x/2)):i.globals.isBarHorizontal||(d=n.xAxisTicksPositions[e-1]+n.dataPointsDividedWidth/2,isNaN(d)&&(d=n.xAxisTicksPositions[e]-n.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?g-=n.tooltipRect.ttHeight:i.config.tooltip.followCursor?g=n.e.clientY-v.top-n.tooltipRect.ttHeight/2:g+n.tooltipRect.ttHeight+15>i.globals.gridHeight&&(g=i.globals.gridHeight),i.globals.isBarHorizontal||this.moveXCrosshairs(d),n.fixedTooltip||this.moveTooltip(d,g||i.globals.gridHeight)}}]),s})(),BN=(function(){function s(e){li(this,s),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new kI(e)}return ci(s,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new Lt(this.ctx),i=new ep(this.ctx),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");n=Hr(n),e.config.chart.stacked&&n.sort((function(v,k){return parseFloat(v.getAttribute("data:realIndex"))-parseFloat(k.getAttribute("data:realIndex"))}));for(var a=0;a<n.length;a++){var o=n[a].querySelector(".apexcharts-series-markers-wrap");if(o!==null){var r=void 0,d="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));e.config.chart.type!=="line"&&e.config.chart.type!=="area"||e.globals.comboCharts||e.config.tooltip.intersect||(d+=" no-pointer-events");var g=i.getMarkerConfig({cssClass:d,seriesIndex:Number(o.getAttribute("data:realIndex"))});(r=t.drawMarker(0,0,g)).node.setAttribute("default-marker-size",0);var x=document.createElementNS(e.globals.SVGNS,"g");x.classList.add("apexcharts-series-markers"),x.appendChild(r.node),o.appendChild(x)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a=this.w;a.config.chart.type!=="bubble"&&this.newPointSize(e,t);var o=t.getAttribute("cx"),r=t.getAttribute("cy");if(i!==null&&n!==null&&(o=i,r=n),this.tooltipPosition.moveXCrosshairs(o),!this.fixedTooltip){if(a.config.chart.type==="radar"){var d=this.ttCtx.getElGrid().getBoundingClientRect();o=this.ttCtx.e.clientX-d.left}this.tooltipPosition.moveTooltip(o,r,a.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,i=this,n=this.ttCtx,a=e,o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),r=t.config.markers.hover.size,d=0;d<o.length;d++){var g=o[d].getAttribute("rel"),x=o[d].getAttribute("index");if(r===void 0&&(r=t.globals.markers.size[x]+t.config.markers.hover.sizeOffset),a===parseInt(g,10)){i.newPointSize(a,o[d]);var v=o[d].getAttribute("cx"),k=o[d].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(v),n.fixedTooltip||i.tooltipPosition.moveTooltip(v,k,r)}else i.oldPointSize(o[d])}}},{key:"newPointSize",value:function(e,t){var i=this.w,n=i.config.markers.hover.size,a=e===0?t.parentNode.firstChild:t.parentNode.lastChild;if(a.getAttribute("default-marker-size")!=="0"){var o=parseInt(a.getAttribute("index"),10);n===void 0&&(n=i.globals.markers.size[o]+i.config.markers.hover.sizeOffset),n<0&&(n=0);var r=this.ttCtx.tooltipUtil.getPathFromPoint(t,n);t.setAttribute("d",r)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size")),i=this.ttCtx.tooltipUtil.getPathFromPoint(e,t);e.setAttribute("d",i)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var i=parseFloat(e[t].getAttribute("default-marker-size"));if(Je.isNumber(i)&&i>0){var n=this.ttCtx.tooltipUtil.getPathFromPoint(e[t],i);e[t].setAttribute("d",n)}else e[t].setAttribute("d","M0,0")}}}]),s})(),NN=(function(){function s(e){li(this,s),this.w=e.w;var t=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!t.globals.isBarHorizontal&&t.config.chart.type==="rangeBar"&&t.config.plotOptions.bar.rangeBarGroupRows}return ci(s,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,i=e.opt,n=e.x,a=e.y,o=e.type,r=this.ttCtx,d=this.w;if(t.target.classList.contains("apexcharts-".concat(o,"-rect"))){var g=this.getAttr(t,"i"),x=this.getAttr(t,"j"),v=this.getAttr(t,"cx"),k=this.getAttr(t,"cy"),E=this.getAttr(t,"width"),F=this.getAttr(t,"height");if(r.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:g,j:x,shared:!1,e:t}),d.globals.capturedSeriesIndex=g,d.globals.capturedDataPointIndex=x,n=v+r.tooltipRect.ttWidth/2+E,a=k+r.tooltipRect.ttHeight/2-F/2,r.tooltipPosition.moveXCrosshairs(v+E/2),n>d.globals.gridWidth/2&&(n=v-r.tooltipRect.ttWidth/2+E),r.w.config.tooltip.followCursor){var O=d.globals.dom.elWrap.getBoundingClientRect();n=d.globals.clientX-O.left-(n>d.globals.gridWidth/2?r.tooltipRect.ttWidth:0),a=d.globals.clientY-O.top-(a>d.globals.gridHeight/2?r.tooltipRect.ttHeight:0)}}return{x:n,y:a}}},{key:"handleMarkerTooltip",value:function(e){var t,i,n=e.e,a=e.opt,o=e.x,r=e.y,d=this.w,g=this.ttCtx;if(n.target.classList.contains("apexcharts-marker")){var x=parseInt(a.paths.getAttribute("cx"),10),v=parseInt(a.paths.getAttribute("cy"),10),k=parseFloat(a.paths.getAttribute("val"));if(i=parseInt(a.paths.getAttribute("rel"),10),t=parseInt(a.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,g.intersect){var E=Je.findAncestor(a.paths,"apexcharts-series");E&&(t=parseInt(E.getAttribute("data:realIndex"),10))}if(g.tooltipLabels.drawSeriesTexts({ttItems:a.ttItems,i:t,j:i,shared:!g.showOnIntersect&&d.config.tooltip.shared,e:n}),n.type==="mouseup"&&g.markerClick(n,t,i),d.globals.capturedSeriesIndex=t,d.globals.capturedDataPointIndex=i,o=x,r=v+d.globals.translateY-1.4*g.tooltipRect.ttHeight,g.w.config.tooltip.followCursor){var F=g.getElGrid().getBoundingClientRect();r=g.e.clientY+d.globals.translateY-F.top}k<0&&(r=v),g.marker.enlargeCurrentPoint(i,a.paths,o,r)}return{x:o,y:r}}},{key:"handleBarTooltip",value:function(e){var t,i,n=e.e,a=e.opt,o=this.w,r=this.ttCtx,d=r.getElTooltip(),g=0,x=0,v=0,k=this.getBarTooltipXY({e:n,opt:a});if(k.j!==null||k.barHeight!==0||k.barWidth!==0){t=k.i;var E=k.j;if(o.globals.capturedSeriesIndex=t,o.globals.capturedDataPointIndex=E,o.globals.isBarHorizontal&&r.tooltipUtil.hasBars()||!o.config.tooltip.shared?(x=k.x,v=k.y,i=Array.isArray(o.config.stroke.width)?o.config.stroke.width[t]:o.config.stroke.width,g=x):o.globals.comboCharts||o.config.tooltip.shared||(g/=2),isNaN(v)&&(v=o.globals.svgHeight-r.tooltipRect.ttHeight),parseInt(a.paths.parentNode.getAttribute("data:realIndex"),10),x+r.tooltipRect.ttWidth>o.globals.gridWidth?x-=r.tooltipRect.ttWidth:x<0&&(x=0),r.w.config.tooltip.followCursor){var F=r.getElGrid().getBoundingClientRect();v=r.e.clientY-F.top}r.tooltip===null&&(r.tooltip=o.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),o.config.tooltip.shared||(o.globals.comboBarCount>0?r.tooltipPosition.moveXCrosshairs(g+i/2):r.tooltipPosition.moveXCrosshairs(g)),!r.fixedTooltip&&(!o.config.tooltip.shared||o.globals.isBarHorizontal&&r.tooltipUtil.hasBars())&&(v=v+o.globals.translateY-r.tooltipRect.ttHeight/2,d.style.left=x+o.globals.translateX+"px",d.style.top=v+"px")}}},{key:"getBarTooltipXY",value:function(e){var t=this,i=e.e,n=e.opt,a=this.w,o=null,r=this.ttCtx,d=0,g=0,x=0,v=0,k=0,E=i.target.classList;if(E.contains("apexcharts-bar-area")||E.contains("apexcharts-candlestick-area")||E.contains("apexcharts-boxPlot-area")||E.contains("apexcharts-rangebar-area")){var F=i.target,O=F.getBoundingClientRect(),N=n.elGrid.getBoundingClientRect(),$=O.height;k=O.height;var X=O.width,K=parseInt(F.getAttribute("cx"),10),ie=parseInt(F.getAttribute("cy"),10);v=parseFloat(F.getAttribute("barWidth"));var ee=i.type==="touchmove"?i.touches[0].clientX:i.clientX;o=parseInt(F.getAttribute("j"),10),d=parseInt(F.parentNode.getAttribute("rel"),10)-1;var le=F.getAttribute("data-range-y1"),te=F.getAttribute("data-range-y2");a.globals.comboCharts&&(d=parseInt(F.parentNode.getAttribute("data:realIndex"),10));var he=function(ke){return a.globals.isXNumeric?K-X/2:t.isVerticalGroupedRangeBar?K+X/2:K-r.dataPointsDividedWidth+X/2},de=function(){return ie-r.dataPointsDividedHeight+$/2-r.tooltipRect.ttHeight/2};r.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:d,j:o,y1:le?parseInt(le,10):null,y2:te?parseInt(te,10):null,shared:!r.showOnIntersect&&a.config.tooltip.shared,e:i}),a.config.tooltip.followCursor?a.globals.isBarHorizontal?(g=ee-N.left+15,x=de()):(g=he(),x=i.clientY-N.top-r.tooltipRect.ttHeight/2-15):a.globals.isBarHorizontal?((g=K)<r.xyRatios.baseLineInvertedY&&(g=K-r.tooltipRect.ttWidth),x=de()):(g=he(),x=ie)}return{x:g,y:x,barHeight:k,barWidth:v,i:d,j:o}}}]),s})(),jN=(function(){function s(e){li(this,s),this.w=e.w,this.ttCtx=e}return ci(s,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,i=e.config.xaxis.position==="bottom";t.xaxisOffY=i?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var n=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",a=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+e.config.tooltip.theme),a.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,i=0;i<e.config.yaxis.length;i++){var n=e.config.yaxis[i].opposite||e.config.yaxis[i].crosshairs.opposite;t.yaxisOffX=n?e.globals.gridWidth+1:1;var a="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,n?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),o=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))===null&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+e.config.tooltip.theme),o.appendChild(t.yaxisTooltip),i===0&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[i]=document.createElement("div"),t.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[i]))}}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,i=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var n=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(n!==null&&e.config.xaxis.crosshairs.width==="barWidth"){var a=parseFloat(n.getAttribute("barWidth"));t.xcrosshairsWidth=a}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var r=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/r}else if(e.config.xaxis.crosshairs.width==="barWidth"){var d=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(d!==null){var g=parseFloat(d.getAttribute("barWidth"));t.xcrosshairsWidth=g}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),i!==null&&t.xcrosshairsWidth>0&&i.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,i){var n=this.ttCtx,a=this.w,o=a.globals,r=o.seriesYAxisMap[e];if(n.yaxisTooltips[e]&&r.length>0){var d=o.yLabelFormatters[e],g=n.getElGrid().getBoundingClientRect(),x=r[0],v=0;i.yRatio.length>1&&(v=x);var k=(t-g.top)*i.yRatio[v],E=o.maxYArr[x]-o.minYArr[x],F=o.minYArr[x]+(E-k);a.config.yaxis[e].reversed&&(F=o.maxYArr[x]-(E-k)),n.tooltipPosition.moveYCrosshairs(t-g.top),n.yaxisTooltipText[e].innerHTML=d(F),n.tooltipPosition.moveYAxisTooltip(e)}}}]),s})(),MA=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w;var t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new SI(this),this.tooltipLabels=new FN(this),this.tooltipPosition=new kI(this),this.marker=new BN(this),this.intersect=new NN(this),this.axesTooltip=new jN(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return ci(s,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((function(o,r){return!!(o.show&&o.tooltip.enabled&&t.globals.axisCharts)})),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&i.classList.add(t.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme||"light")),t.globals.dom.elWrap.appendChild(i),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var n=new gm(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&t.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),t.config.markers.size!==0&&t.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var a=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(a=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(a),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,i=this.w,n=[],a=this.getElTooltip(),o=function(d){var g=document.createElement("div");g.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(d)),g.style.order=i.config.tooltip.inverseOrder?e-d:d+1;var x=document.createElement("span");x.classList.add("apexcharts-tooltip-marker"),i.config.tooltip.fillSeriesColor?x.style.backgroundColor=i.globals.colors[d]:x.style.color=i.globals.colors[d];var v=i.config.markers.shape,k=v;Array.isArray(v)&&(k=v[d]),x.setAttribute("shape",k),g.appendChild(x);var E=document.createElement("div");E.classList.add("apexcharts-tooltip-text"),E.style.fontFamily=t.tConfig.style.fontFamily||i.config.chart.fontFamily,E.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach((function(F){var O=document.createElement("div");O.classList.add("apexcharts-tooltip-".concat(F,"-group"));var N=document.createElement("span");N.classList.add("apexcharts-tooltip-text-".concat(F,"-label")),O.appendChild(N);var $=document.createElement("span");$.classList.add("apexcharts-tooltip-text-".concat(F,"-value")),O.appendChild($),E.appendChild(O)})),g.appendChild(E),a.appendChild(g),n.push(g)},r=0;r<e;r++)o(r);return n}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,i=this.getElTooltip(),n=!(t!=="bar"&&t!=="candlestick"&&t!=="boxPlot"&&t!=="rangeBar"),a=t==="area"||t==="line"||t==="scatter"||t==="bubble"||t==="radar",o=e.globals.dom.Paper.node,r=this.getElGrid();r&&(this.seriesBound=r.getBoundingClientRect());var d,g=[],x=[],v={hoverArea:o,elGrid:r,tooltipEl:i,tooltipY:g,tooltipX:x,ttItems:this.ttItems};if(e.globals.axisCharts&&(a?d=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):n?d=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):t!=="heatmap"&&t!=="treemap"||(d=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),d&&d.length))for(var k=0;k<d.length;k++)g.push(d[k].getAttribute("cy")),x.push(d[k].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||n&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([o],v);else if(n&&!e.globals.comboCharts||a&&this.showOnIntersect)this.addDatapointEventsListeners(v);else if(!e.globals.axisCharts||t==="heatmap"||t==="treemap"){var E=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(E,v)}if(this.showOnIntersect){var F=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");F.length>0&&this.addPathsEventListeners(F,v),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(v)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),i=t.getBoundingClientRect(),n=i.width+10,a=i.height+10,o=this.tConfig.fixed.offsetX,r=this.tConfig.fixed.offsetY,d=this.tConfig.fixed.position.toLowerCase();return d.indexOf("right")>-1&&(o=o+e.globals.svgWidth-n+10),d.indexOf("bottom")>-1&&(r=r+e.globals.svgHeight-a-10),t.style.left=o+"px",t.style.top=r+"px",{x:o,y:r,ttWidth:n,ttHeight:a}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var i=this,n=function(o){var r={paths:e[o],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(d){return e[o].addEventListener(d,i.onSeriesHover.bind(i,r),{capture:!1,passive:!0})}))},a=0;a<e.length;a++)n(a)}},{key:"onSeriesHover",value:function(e,t){var i=this,n=Date.now()-this.lastHoverTime;n>=20?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){i.seriesHover(e,t)}),20-n))}},{key:"seriesHover",value:function(e,t){var i=this;this.lastHoverTime=Date.now();var n=[],a=this.w;a.config.chart.group&&(n=this.ctx.getGroupedCharts()),a.globals.axisCharts&&(a.globals.minX===-1/0&&a.globals.maxX===1/0||a.globals.dataPoints===0)||(n.length?n.forEach((function(o){var r=i.getElTooltip(o),d={paths:e.paths,tooltipEl:r,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:o.w.globals.tooltip.ttItems};o.w.globals.minX===i.w.globals.minX&&o.w.globals.maxX===i.w.globals.maxX&&o.w.globals.tooltip.seriesHoverByContext({chartCtx:o,ttCtx:o.w.globals.tooltip,opt:d,e:t})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,i=e.ttCtx,n=e.opt,a=e.e,o=t.w,r=this.getElTooltip(t);r&&(i.tooltipRect={x:0,y:0,ttWidth:r.getBoundingClientRect().width,ttHeight:r.getBoundingClientRect().height},i.e=a,i.tooltipUtil.hasBars()&&!o.globals.comboCharts&&!i.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new il(t).toggleSeriesOnHover(a,a.target.parentNode),o.globals.axisCharts?i.axisChartsTooltips({e:a,opt:n,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:a,opt:n,tooltipRect:i.tooltipRect}),i.fixedTooltip&&i.drawFixedTooltipRect())}},{key:"axisChartsTooltips",value:function(e){var t,i,n=e.e,a=e.opt,o=this.w,r=a.elGrid.getBoundingClientRect(),d=n.type==="touchmove"?n.touches[0].clientX:n.clientX,g=n.type==="touchmove"?n.touches[0].clientY:n.clientY;if(this.clientY=g,this.clientX=d,o.globals.capturedSeriesIndex=-1,o.globals.capturedDataPointIndex=-1,g<r.top||g>r.top+r.height)this.handleMouseOut(a);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!o.config.tooltip.shared){var x=parseInt(a.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(x)<0)return void this.handleMouseOut(a)}var v=this.getElTooltip(),k=this.getElXCrosshairs(),E=[];o.config.chart.group&&(E=this.ctx.getSyncedCharts());var F=o.globals.xyCharts||o.config.chart.type==="bar"&&!o.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||o.globals.comboCharts&&this.tooltipUtil.hasBars();if(n.type==="mousemove"||n.type==="touchmove"||n.type==="mouseup"){if(o.globals.collapsedSeries.length+o.globals.ancillaryCollapsedSeries.length===o.globals.series.length)return;k!==null&&k.classList.add("apexcharts-active");var O=this.yaxisTooltips.filter((function(X){return X===!0}));if(this.ycrosshairs!==null&&O.length&&this.ycrosshairs.classList.add("apexcharts-active"),F&&!this.showOnIntersect||E.length>1)this.handleStickyTooltip(n,d,g,a);else if(o.config.chart.type==="heatmap"||o.config.chart.type==="treemap"){var N=this.intersect.handleHeatTreeTooltip({e:n,opt:a,x:t,y:i,type:o.config.chart.type});t=N.x,i=N.y,v.style.left=t+"px",v.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:n,opt:a}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:n,opt:a,x:t,y:i});if(this.yaxisTooltips.length)for(var $=0;$<o.config.yaxis.length;$++)this.axesTooltip.drawYaxisTooltipText($,g,this.xyRatios);o.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),a.tooltipEl.classList.add("apexcharts-active")}else n.type!=="mouseout"&&n.type!=="touchend"||this.handleMouseOut(a)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,i=e.opt,n=e.tooltipRect,a=this.w,o=i.paths.getAttribute("rel"),r=this.getElTooltip(),d=a.globals.dom.elWrap.getBoundingClientRect();if(t.type==="mousemove"||t.type==="touchmove"){a.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),r.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(o,10)-1,shared:!1});var g=a.globals.clientX-d.left-n.ttWidth/2,x=a.globals.clientY-d.top-n.ttHeight-10;if(r.style.left=g+"px",r.style.top=x+"px",a.config.legend.tooltipHoverFormatter){var v=o-1,k=(0,a.config.legend.tooltipHoverFormatter)(this.legendLabels[v].getAttribute("data:default-text"),{seriesIndex:v,dataPointIndex:v,w:a});this.legendLabels[v].innerHTML=k}}else t.type!=="mouseout"&&t.type!=="touchend"||(r.classList.remove("apexcharts-active"),a.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),a.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(E){var F=E.getAttribute("data:default-text");E.innerHTML=decodeURIComponent(F)})))}},{key:"handleStickyTooltip",value:function(e,t,i,n){var a=this.w,o=this.tooltipUtil.getNearestValues({context:this,hoverArea:n.hoverArea,elGrid:n.elGrid,clientX:t,clientY:i}),r=o.j,d=o.capturedSeries;a.globals.collapsedSeriesIndices.includes(d)&&(d=null);var g=n.elGrid.getBoundingClientRect();if(o.hoverX<0||o.hoverX>g.width)this.handleMouseOut(n);else if(d!==null)this.handleStickyCapturedSeries(e,d,n,r);else if(this.tooltipUtil.isXoverlap(r)||a.globals.isBarHorizontal){var x=a.globals.series.findIndex((function(v,k){return!a.globals.collapsedSeriesIndices.includes(k)}));this.create(e,this,x,r,n.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(e,t,i,n){var a=this.w;if(!this.tConfig.shared&&a.globals.series[t][n]===null)return void this.handleMouseOut(i);if(a.globals.series[t][n]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(n)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,n,i.ttItems):this.create(e,this,t,n,i.ttItems,!1);else if(this.tooltipUtil.isXoverlap(n)){var o=a.globals.series.findIndex((function(r,d){return!a.globals.collapsedSeriesIndices.includes(d)}));this.create(e,this,o,n,i.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new Lt(this.ctx),i=e.globals.dom.Paper.find(".apexcharts-bar-area"),n=0;n<i.length;n++)t.pathMouseLeave(i[n])}},{key:"handleMouseOut",value:function(e){var t=this.w,i=this.getElXCrosshairs();if(t.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),t.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),i!==null&&i.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var n=0;n<this.yaxisTTEls.length;n++)this.yaxisTTEls[n].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(a){var o=a.getAttribute("data:default-text");a.innerHTML=decodeURIComponent(o)}))}},{key:"markerClick",value:function(e,t,i){var n=this.w;typeof n.config.chart.events.markerClick=="function"&&n.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:n}])}},{key:"create",value:function(e,t,i,n,a){var o,r,d,g,x,v,k,E,F,O,N,$,X,K,ie,ee,le=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,te=this.w,he=t;e.type==="mouseup"&&this.markerClick(e,i,n),le===null&&(le=this.tConfig.shared);var de=this.tooltipUtil.hasMarkers(i),ke=this.tooltipUtil.getElBars(),De=function(){te.globals.markers.largestSize>0?he.marker.enlargePoints(n):he.tooltipPosition.moveDynamicPointsOnHover(n)};if(te.config.legend.tooltipHoverFormatter){var Ae=te.config.legend.tooltipHoverFormatter,$e=Array.from(this.legendLabels);$e.forEach((function(Ai){var jt=Ai.getAttribute("data:default-text");Ai.innerHTML=decodeURIComponent(jt)}));for(var et=0;et<$e.length;et++){var Ie=$e[et],at=parseInt(Ie.getAttribute("i"),10),qe=decodeURIComponent(Ie.getAttribute("data:default-text")),kt=Ae(qe,{seriesIndex:le?at:i,dataPointIndex:n,w:te});if(le)Ie.innerHTML=te.globals.collapsedSeriesIndices.indexOf(at)<0?kt:qe;else if(Ie.innerHTML=at===i?kt:qe,i===at)break}}var vt=Xt(Xt({ttItems:a,i,j:n},((o=te.globals.seriesRange)===null||o===void 0||(r=o[i])===null||r===void 0||(d=r[n])===null||d===void 0||(g=d.y[0])===null||g===void 0?void 0:g.y1)!==void 0&&{y1:(x=te.globals.seriesRange)===null||x===void 0||(v=x[i])===null||v===void 0||(k=v[n])===null||k===void 0||(E=k.y[0])===null||E===void 0?void 0:E.y1}),((F=te.globals.seriesRange)===null||F===void 0||(O=F[i])===null||O===void 0||(N=O[n])===null||N===void 0||($=N.y[0])===null||$===void 0?void 0:$.y2)!==void 0&&{y2:(X=te.globals.seriesRange)===null||X===void 0||(K=X[i])===null||K===void 0||(ie=K[n])===null||ie===void 0||(ee=ie.y[0])===null||ee===void 0?void 0:ee.y2});if(le){if(he.tooltipLabels.drawSeriesTexts(Xt(Xt({},vt),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),de)De();else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(ke),this.barSeriesHeight>0)){var He=new Lt(this.ctx),Nt=te.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(n,"']"));this.deactivateHoverFilter(),he.tooltipUtil.getAllMarkers(!0).length&&!this.barSeriesHeight&&De(),he.tooltipPosition.moveStickyTooltipOverBars(n,i);for(var Qt=0;Qt<Nt.length;Qt++)He.pathMouseEnter(Nt[Qt])}}else he.tooltipLabels.drawSeriesTexts(Xt({shared:!1},vt)),this.tooltipUtil.hasBars()&&he.tooltipPosition.moveStickyTooltipOverBars(n,i),de&&he.tooltipPosition.moveMarkers(i,n)}}]),s})(),VN=(function(){function s(e){li(this,s),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return ci(s,[{key:"handleBarDataLabels",value:function(e){var t,i,n=e.x,a=e.y,o=e.y1,r=e.y2,d=e.i,g=e.j,x=e.realIndex,v=e.columnGroupIndex,k=e.series,E=e.barHeight,F=e.barWidth,O=e.barXPosition,N=e.barYPosition,$=e.visibleSeries,X=this.w,K=new Lt(this.barCtx.ctx),ie=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[x]:this.barCtx.strokeWidth;X.globals.isXNumeric&&!X.globals.isBarHorizontal?(t=n+parseFloat(F*($+1)),i=a+parseFloat(E*($+1))-ie):(t=n+parseFloat(F*$),i=a+parseFloat(E*$));var ee,le=null,te=n,he=a,de={},ke=X.config.dataLabels,De=this.barCtx.barOptions.dataLabels,Ae=this.barCtx.barOptions.dataLabels.total;N!==void 0&&this.barCtx.isRangeBar&&(i=N,he=N),O!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(t=O,te=O);var $e=ke.offsetX,et=ke.offsetY,Ie={width:0,height:0};if(X.config.dataLabels.enabled){var at=X.globals.series[d][g];Ie=K.getTextRects(X.config.dataLabels.formatter?X.config.dataLabels.formatter(at,Xt(Xt({},X),{},{seriesIndex:d,dataPointIndex:g,w:X})):X.globals.yLabelFormatters[0](at),parseFloat(ke.style.fontSize))}var qe={x:n,y:a,i:d,j:g,realIndex:x,columnGroupIndex:v,bcx:t,bcy:i,barHeight:E,barWidth:F,textRects:Ie,strokeWidth:ie,dataLabelsX:te,dataLabelsY:he,dataLabelsConfig:ke,barDataLabelsConfig:De,barTotalDataLabelsConfig:Ae,offX:$e,offY:et};return de=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(qe):this.calculateColumnsDataLabelsPosition(qe),ee=this.drawCalculatedDataLabels({x:de.dataLabelsX,y:de.dataLabelsY,val:this.barCtx.isRangeBar?[o,r]:X.config.chart.stackType==="100%"?k[x][g]:X.globals.series[x][g],i:x,j:g,barWidth:F,barHeight:E,textRects:Ie,dataLabelsConfig:ke}),X.config.chart.stacked&&Ae.enabled&&(le=this.drawTotalDataLabels({x:de.totalDataLabelsX,y:de.totalDataLabelsY,barWidth:F,barHeight:E,realIndex:x,textAnchor:de.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:x,j:g}),dataLabelsConfig:ke,barTotalDataLabelsConfig:Ae})),{dataLabelsPos:de,dataLabels:ee,totalDataLabels:le}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,i=e.j,n=this.w,a=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(a=this.totalFormatter(a,Xt(Xt({},n),{},{seriesIndex:t,dataPointIndex:i,w:n}))),a}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t=this,i=this.w,n=e.i,a=e.j,o=e.realIndex;e.columnGroupIndex;var r,d,g=e.y,x=e.bcx,v=e.barWidth,k=e.barHeight,E=e.textRects,F=e.dataLabelsX,O=e.dataLabelsY,N=e.dataLabelsConfig,$=e.barDataLabelsConfig,X=e.barTotalDataLabelsConfig,K=e.strokeWidth,ie=e.offX,ee=e.offY,le=x;k=Math.abs(k);var te=i.config.plotOptions.bar.dataLabels.orientation==="vertical",he=this.barCtx.barHelpers.getZeroValueEncounters({i:n,j:a}).zeroEncounters;x-=K/2;var de=i.globals.gridWidth/i.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?F+=v/2:(F=i.globals.isXNumeric?x-v/2+ie:x-de+v/2+ie,!i.config.chart.stacked&&he>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(F-=v*he)),te&&(F=F+E.height/2-K/2-2);var ke=i.globals.series[n][a]<0,De=g;switch(this.barCtx.isReversed&&(De=g+(ke?k:-k)),$.position){case"center":O=te?ke?De-k/2+ee:De+k/2-ee:ke?De-k/2+E.height/2+ee:De+k/2+E.height/2-ee;break;case"bottom":O=te?ke?De-k+ee:De+k-ee:ke?De-k+E.height+K+ee:De+k-E.height/2+K-ee;break;case"top":O=te?ke?De+ee:De-ee:ke?De-E.height/2-ee:De+E.height+ee}var Ae=De;if(i.globals.seriesGroups.forEach((function(Ie){var at;(at=t.barCtx[Ie.join(",")])===null||at===void 0||at.prevY.forEach((function(qe){Ae=ke?Math.max(qe[a],Ae):Math.min(qe[a],Ae)}))})),this.barCtx.lastActiveBarSerieIndex===o&&X.enabled){var $e=new Lt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:a}),N.fontSize);r=ke?Ae-$e.height/2-ee-X.offsetY+18:Ae+$e.height+ee+X.offsetY-18;var et=de;d=le+(i.globals.isXNumeric?-v*i.globals.barGroups.length/2:i.globals.barGroups.length*v/2-(i.globals.barGroups.length-1)*v-et)+X.offsetX}return i.config.chart.stacked||(O<0?O=0+K:O+E.height/3>i.globals.gridHeight&&(O=i.globals.gridHeight-K)),{bcx:x,bcy:g,dataLabelsX:F,dataLabelsY:O,totalDataLabelsX:d,totalDataLabelsY:r,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this,i=this.w,n=e.x,a=e.i,o=e.j,r=e.realIndex,d=e.bcy,g=e.barHeight,x=e.barWidth,v=e.textRects,k=e.dataLabelsX,E=e.strokeWidth,F=e.dataLabelsConfig,O=e.barDataLabelsConfig,N=e.barTotalDataLabelsConfig,$=e.offX,X=e.offY,K=i.globals.gridHeight/i.globals.dataPoints,ie=this.barCtx.barHelpers.getZeroValueEncounters({i:a,j:o}).zeroEncounters;x=Math.abs(x);var ee,le,te=d-(this.barCtx.isRangeBar?0:K)+g/2+v.height/2+X-3;!i.config.chart.stacked&&ie>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(te-=g*ie);var he="start",de=i.globals.series[a][o]<0,ke=n;switch(this.barCtx.isReversed&&(ke=n+(de?-x:x),he=de?"start":"end"),O.position){case"center":k=de?ke+x/2-$:Math.max(v.width/2,ke-x/2)+$;break;case"bottom":k=de?ke+x-E-$:ke-x+E+$;break;case"top":k=de?ke-E-$:ke-E+$}var De=ke;if(i.globals.seriesGroups.forEach((function($e){var et;(et=t.barCtx[$e.join(",")])===null||et===void 0||et.prevX.forEach((function(Ie){De=de?Math.min(Ie[o],De):Math.max(Ie[o],De)}))})),this.barCtx.lastActiveBarSerieIndex===r&&N.enabled){var Ae=new Lt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:r,j:o}),F.fontSize);de?(ee=De-E-$-N.offsetX,he="end"):ee=De+$+N.offsetX+(this.barCtx.isReversed?-(x+E):E),le=te-v.height/2+Ae.height/2+N.offsetY+E,i.globals.barGroups.length>1&&(le-=i.globals.barGroups.length/2*(g/2))}return i.config.chart.stacked||(F.textAnchor==="start"?k-v.width<0?k=de?v.width+E:E:k+v.width>i.globals.gridWidth&&(k=de?i.globals.gridWidth-E:i.globals.gridWidth-v.width-E):F.textAnchor==="middle"?k-v.width/2<0?k=v.width/2+E:k+v.width/2>i.globals.gridWidth&&(k=i.globals.gridWidth-v.width/2-E):F.textAnchor==="end"&&(k<1?k=v.width+E:k+1>i.globals.gridWidth&&(k=i.globals.gridWidth-v.width-E))),{bcx:n,bcy:d,dataLabelsX:k,dataLabelsY:te,totalDataLabelsX:ee,totalDataLabelsY:le,totalDataLabelsAnchor:he}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,i=e.y,n=e.val,a=e.i,o=e.j,r=e.textRects,d=e.barHeight,g=e.barWidth,x=e.dataLabelsConfig,v=this.w,k="rotate(0)";v.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(k="rotate(-90, ".concat(t,", ").concat(i,")"));var E=new $f(this.barCtx.ctx),F=new Lt(this.barCtx.ctx),O=x.formatter,N=null,$=v.globals.collapsedSeriesIndices.indexOf(a)>-1;if(x.enabled&&!$){N=F.group({class:"apexcharts-data-labels",transform:k});var X="";n!==void 0&&(X=O(n,Xt(Xt({},v),{},{seriesIndex:a,dataPointIndex:o,w:v}))),!n&&v.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(X="");var K=v.globals.series[a][o]<0,ie=v.config.plotOptions.bar.dataLabels.position;v.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(ie==="top"&&(x.textAnchor=K?"end":"start"),ie==="center"&&(x.textAnchor="middle"),ie==="bottom"&&(x.textAnchor=K?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&g<F.getTextRects(X,parseFloat(x.style.fontSize)).width&&(X=""),v.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?r.width/1.6>Math.abs(g)&&(X=""):r.height/1.6>Math.abs(d)&&(X=""));var ee=Xt({},x);this.barCtx.isHorizontal&&n<0&&(x.textAnchor==="start"?ee.textAnchor="end":x.textAnchor==="end"&&(ee.textAnchor="start")),E.plotDataLabelsText({x:t,y:i,text:X,i:a,j:o,parent:N,dataLabelsConfig:ee,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return N}},{key:"drawTotalDataLabels",value:function(e){var t=e.x,i=e.y,n=e.val,a=e.realIndex,o=e.textAnchor,r=e.barTotalDataLabelsConfig;this.w;var d,g=new Lt(this.barCtx.ctx);return r.enabled&&t!==void 0&&i!==void 0&&this.barCtx.lastActiveBarSerieIndex===a&&(d=g.drawText({x:t,y:i,foreColor:r.style.color,text:n,textAnchor:o,fontFamily:r.style.fontFamily,fontSize:r.style.fontSize,fontWeight:r.style.fontWeight})),d}}]),s})(),HN=(function(){function s(e){li(this,s),this.w=e.w,this.barCtx=e}return ci(s,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<e.length;i++)if(e[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[i].length),t.globals.isXNumeric)for(var n=0;n<e[i].length;n++)t.globals.seriesX[i][n]>t.globals.minX&&t.globals.seriesX[i][n]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(t.globals.series),Je.isSafari()&&(this.arrBorderRadius=this.arrBorderRadius.map((function(a){return a.map((function(o){return"none"}))}))),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(e){var t,i,n,a,o,r,d,g,x=this.w,v=x.globals.dataPoints;this.barCtx.isRangeBar&&(v=x.globals.labels.length);var k=this.barCtx.seriesLen;if(x.config.plotOptions.bar.rangeBarGroupRows&&(k=1),this.barCtx.isHorizontal)o=(n=x.globals.gridHeight/v)/k,x.globals.isXNumeric&&(o=(n=x.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),o=o*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(o=parseInt(this.barCtx.barOptions.barHeight,10)),g=this.barCtx.baseLineInvertedY+x.globals.padHorizontal+(this.barCtx.isReversed?x.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(g=x.globals.gridWidth/2),i=(n-o*this.barCtx.seriesLen)/2;else{if(a=x.globals.gridWidth/this.barCtx.visibleItems,x.config.xaxis.convertedCatToNumeric&&(a=x.globals.gridWidth/x.globals.dataPoints),r=a/k*parseInt(this.barCtx.barOptions.columnWidth,10)/100,x.globals.isXNumeric){var E=this.barCtx.xRatio;x.globals.minXDiff&&x.globals.minXDiff!==.5&&x.globals.minXDiff/E>0&&(a=x.globals.minXDiff/E),(r=a/k*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(r=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(r=parseInt(this.barCtx.barOptions.columnWidth,10)),d=x.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?x.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),x.globals.isXNumeric?t=this.barCtx.getBarXForNumericXAxis({x:t,j:0,realIndex:e,barWidth:r}).x:t=x.globals.padHorizontal+Je.noExponents(a-r*this.barCtx.seriesLen)/2}return x.globals.barHeight=o,x.globals.barWidth=r,{x:t,y:i,yDivision:n,xDivision:a,barHeight:o,barWidth:r,zeroH:d,zeroW:g}}},{key:"initializeStackedPrevVars",value:function(e){e.w.globals.seriesGroups.forEach((function(t){e[t]||(e[t]={}),e[t].prevY=[],e[t].prevX=[],e[t].prevYF=[],e[t].prevXF=[],e[t].prevYVal=[],e[t].prevXVal=[]}))}},{key:"initializeStackedXYVars",value:function(e){e.w.globals.seriesGroups.forEach((function(t){e[t]||(e[t]={}),e[t].xArrj=[],e[t].xArrjF=[],e[t].xArrjVal=[],e[t].yArrj=[],e[t].yArrjF=[],e[t].yArrjVal=[]}))}},{key:"getPathFillColor",value:function(e,t,i,n){var a,o,r,d,g=this.w,x=this.barCtx.ctx.fill,v=null,k=this.barCtx.barOptions.distributed?i:t,E=!1;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(F){e[t][i]>=F.from&&e[t][i]<=F.to&&(v=F.color,E=!0)})),{color:x.fillPath({seriesNumber:this.barCtx.barOptions.distributed?k:n,dataPointIndex:i,color:v,value:e[t][i],fillConfig:(a=g.config.series[t].data[i])===null||a===void 0?void 0:a.fill,fillType:(o=g.config.series[t].data[i])!==null&&o!==void 0&&(r=o.fill)!==null&&r!==void 0&&r.type?(d=g.config.series[t].data[i])===null||d===void 0?void 0:d.fill.type:Array.isArray(g.config.fill.type)?g.config.fill.type[n]:g.config.fill.type}),useRangeColor:E}}},{key:"getStrokeWidth",value:function(e,t,i){var n=0,a=this.w;return this.barCtx.series[e][t]===void 0||this.barCtx.series[e][t]===null||a.config.chart.type==="bar"&&!this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,a.config.stroke.show&&(this.barCtx.isNullValue||(n=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),n}},{key:"createBorderRadiusArr",value:function(e){var t,i=this.w,n=!this.w.config.chart.stacked||i.config.plotOptions.bar.borderRadius<=0,a=e.length,o=0|((t=e[0])===null||t===void 0?void 0:t.length),r=Array.from({length:a},(function(){return Array(o).fill(n?"top":"none")}));if(n)return r;for(var d=0;d<o;d++){for(var g=[],x=[],v=0,k=0;k<a;k++){var E=e[k][d];E>0?(g.push(k),v++):E<0&&(x.push(k),v++)}if(g.length>0&&x.length===0)if(g.length===1)r[g[0]][d]="both";else{var F,O=g[0],N=g[g.length-1],$=kg(g);try{for($.s();!(F=$.n()).done;){var X=F.value;r[X][d]=X===O?"bottom":X===N?"top":"none"}}catch(at){$.e(at)}finally{$.f()}}else if(x.length>0&&g.length===0)if(x.length===1)r[x[0]][d]="both";else{var K,ie=Math.max.apply(Math,x),ee=Math.min.apply(Math,x),le=kg(x);try{for(le.s();!(K=le.n()).done;){var te=K.value;r[te][d]=te===ie?"bottom":te===ee?"top":"none"}}catch(at){le.e(at)}finally{le.f()}}else if(g.length>0&&x.length>0){var he,de=g[g.length-1],ke=kg(g);try{for(ke.s();!(he=ke.n()).done;){var De=he.value;r[De][d]=De===de?"top":"none"}}catch(at){ke.e(at)}finally{ke.f()}var Ae,$e=Math.max.apply(Math,x),et=kg(x);try{for(et.s();!(Ae=et.n()).done;){var Ie=Ae.value;r[Ie][d]=Ie===$e?"bottom":"none"}}catch(at){et.e(at)}finally{et.f()}}else v===1&&(r[g[0]||x[0]][d]="both")}return r}},{key:"barBackground",value:function(e){var t=e.j,i=e.i,n=e.x1,a=e.x2,o=e.y1,r=e.y2,d=e.elSeries,g=this.w,x=new Lt(this.barCtx.ctx),v=new il(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&v===i){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var k=this.barCtx.barOptions.colors.backgroundBarColors[t],E=x.drawRect(n!==void 0?n:0,o!==void 0?o:0,a!==void 0?a:g.globals.gridWidth,r!==void 0?r:g.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,k,this.barCtx.barOptions.colors.backgroundBarOpacity);d.add(E),E.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,i=e.barWidth,n=e.barXPosition,a=e.y1,o=e.y2,r=e.strokeWidth,d=e.isReversed,g=e.series,x=e.seriesGroup,v=e.realIndex,k=e.i,E=e.j,F=e.w,O=new Lt(this.barCtx.ctx);(r=Array.isArray(r)?r[v]:r)||(r=0);var N=i,$=n;(t=F.config.series[v].data[E])!==null&&t!==void 0&&t.columnWidthOffset&&($=n-F.config.series[v].data[E].columnWidthOffset/2,N=i+F.config.series[v].data[E].columnWidthOffset);var X=r/2,K=$+X,ie=$+N-X,ee=(g[k][E]>=0?1:-1)*(d?-1:1);a+=.001-X*ee,o+=.001+X*ee;var le=O.move(K,a),te=O.move(K,a),he=O.line(ie,a);if(F.globals.previousPaths.length>0&&(te=this.barCtx.getPreviousPath(v,E,!1)),le=le+O.line(K,o)+O.line(ie,o)+he+(F.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[v][E]==="both"?" Z":" z"),te=te+O.line(K,a)+he+he+he+he+he+O.line(K,a)+(F.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[v][E]==="both"?" Z":" z"),this.arrBorderRadius[v][E]!=="none"&&(le=O.roundPathCorners(le,F.config.plotOptions.bar.borderRadius)),F.config.chart.stacked){var de=this.barCtx;(de=this.barCtx[x]).yArrj.push(o-X*ee),de.yArrjF.push(Math.abs(a-o+r*ee)),de.yArrjVal.push(this.barCtx.series[k][E])}return{pathTo:le,pathFrom:te}}},{key:"getBarpaths",value:function(e){var t,i=e.barYPosition,n=e.barHeight,a=e.x1,o=e.x2,r=e.strokeWidth,d=e.isReversed,g=e.series,x=e.seriesGroup,v=e.realIndex,k=e.i,E=e.j,F=e.w,O=new Lt(this.barCtx.ctx);(r=Array.isArray(r)?r[v]:r)||(r=0);var N=i,$=n;(t=F.config.series[v].data[E])!==null&&t!==void 0&&t.barHeightOffset&&(N=i-F.config.series[v].data[E].barHeightOffset/2,$=n+F.config.series[v].data[E].barHeightOffset);var X=r/2,K=N+X,ie=N+$-X,ee=(g[k][E]>=0?1:-1)*(d?-1:1);a+=.001+X*ee,o+=.001-X*ee;var le=O.move(a,K),te=O.move(a,K);F.globals.previousPaths.length>0&&(te=this.barCtx.getPreviousPath(v,E,!1));var he=O.line(a,ie);if(le=le+O.line(o,K)+O.line(o,ie)+he+(F.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[v][E]==="both"?" Z":" z"),te=te+O.line(a,K)+he+he+he+he+he+O.line(a,K)+(F.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[v][E]==="both"?" Z":" z"),this.arrBorderRadius[v][E]!=="none"&&(le=O.roundPathCorners(le,F.config.plotOptions.bar.borderRadius)),F.config.chart.stacked){var de=this.barCtx;(de=this.barCtx[x]).xArrj.push(o+X*ee),de.xArrjF.push(Math.abs(a-o-r*ee)),de.xArrjVal.push(this.barCtx.series[k][E])}return{pathTo:le,pathFrom:te}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,i=this.w,n=0;n<t.length;n++){for(var a=0,o=0;o<t[i.globals.maxValsInArrayIndex].length;o++)a+=t[n][o];a===0&&this.barCtx.zeroSerieses.push(n)}}},{key:"getXForValue",value:function(e,t){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?t:null;return e!=null&&(i=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),i}},{key:"getYForValue",value:function(e,t,i){var n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?t:null;return e!=null&&(n=t-e/this.barCtx.yRatio[i]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[i]:0)),n}},{key:"getGoalValues",value:function(e,t,i,n,a,o){var r=this,d=this.w,g=[],x=function(E,F){var O;g.push((J_(O={},e,e==="x"?r.getXForValue(E,t,!1):r.getYForValue(E,i,o,!1)),J_(O,"attrs",F),O))};if(d.globals.seriesGoals[n]&&d.globals.seriesGoals[n][a]&&Array.isArray(d.globals.seriesGoals[n][a])&&d.globals.seriesGoals[n][a].forEach((function(E){x(E.value,E)})),this.barCtx.barOptions.isDumbbell&&d.globals.seriesRange.length){var v=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:d.globals.colors,k={strokeHeight:e==="x"?0:d.globals.markers.size[n],strokeWidth:e==="x"?d.globals.markers.size[n]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(v[n])?v[n][0]:v[n]};x(d.globals.seriesRangeStart[n][a],k),x(d.globals.seriesRangeEnd[n][a],Xt(Xt({},k),{},{strokeColor:Array.isArray(v[n])?v[n][1]:v[n]}))}return g}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,i=e.barYPosition,n=e.goalX,a=e.goalY,o=e.barWidth,r=e.barHeight,d=new Lt(this.barCtx.ctx),g=d.group({className:"apexcharts-bar-goals-groups"});g.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:g.node}),g.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var x=null;return this.barCtx.isHorizontal?Array.isArray(n)&&n.forEach((function(v){if(v.x>=-1&&v.x<=d.w.globals.gridWidth+1){var k=v.attrs.strokeHeight!==void 0?v.attrs.strokeHeight:r/2,E=i+k+r/2;x=d.drawLine(v.x,E-2*k,v.x,E,v.attrs.strokeColor?v.attrs.strokeColor:void 0,v.attrs.strokeDashArray,v.attrs.strokeWidth?v.attrs.strokeWidth:2,v.attrs.strokeLineCap),g.add(x)}})):Array.isArray(a)&&a.forEach((function(v){if(v.y>=-1&&v.y<=d.w.globals.gridHeight+1){var k=v.attrs.strokeWidth!==void 0?v.attrs.strokeWidth:o/2,E=t+k+o/2;x=d.drawLine(E-2*k,v.y,E,v.y,v.attrs.strokeColor?v.attrs.strokeColor:void 0,v.attrs.strokeDashArray,v.attrs.strokeHeight?v.attrs.strokeHeight:2,v.attrs.strokeLineCap),g.add(x)}})),g}},{key:"drawBarShadow",value:function(e){var t=e.prevPaths,i=e.currPaths,n=e.color,a=this.w,o=t.x,r=t.x1,d=t.barYPosition,g=i.x,x=i.x1,v=i.barYPosition,k=d+i.barHeight,E=new Lt(this.barCtx.ctx),F=new Je,O=E.move(r,k)+E.line(o,k)+E.line(g,v)+E.line(x,v)+E.line(r,k)+(a.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return E.drawPath({d:O,fill:F.shadeColor(.5,Je.rgb2hex(n)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(e){var t,i=e.i,n=e.j,a=this.w,o=0,r=0;return(a.config.plotOptions.bar.horizontal?a.globals.series.map((function(d,g){return g})):((t=a.globals.columnSeries)===null||t===void 0?void 0:t.i.map((function(d){return d})))||[]).forEach((function(d){var g=a.globals.seriesPercent[d][n];g&&o++,d<i&&g===0&&r++})),{nonZeroColumns:o,zeroEncounters:r}}},{key:"getGroupIndex",value:function(e){var t=this.w,i=t.globals.seriesGroups.findIndex((function(o){return o.indexOf(t.globals.seriesNames[e])>-1})),n=this.barCtx.columnGroupIndices,a=n.indexOf(i);return a<0&&(n.push(i),a=n.length-1),{groupIndex:i,columnGroupIndex:a}}}]),s})(),Xf=(function(){function s(e,t){li(this,s),this.ctx=e,this.w=e.w;var i=this.w;this.barOptions=i.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=i.config.stroke.width,this.isNullValue=!1,this.isRangeBar=i.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&i.globals.seriesRange.length&&i.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=t,this.xyRatios!==null&&(this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.invertedXRatio=t.invertedXRatio,this.invertedYRatio=t.invertedYRatio,this.baseLineY=t.baseLineY,this.baseLineInvertedY=t.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var n=new il(this.ctx);this.lastActiveBarSerieIndex=n.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var a=n.getBarSeriesIndices(),o=new or(this.ctx);this.stackedSeriesTotals=o.getStackedSeriesTotals(this.w.config.series.map((function(r,d){return a.indexOf(d)===-1?d:-1})).filter((function(r){return r!==-1}))),this.barHelpers=new HN(this)}return ci(s,[{key:"draw",value:function(e,t){var i=this.w,n=new Lt(this.ctx),a=new or(this.ctx,i);e=a.getLogSeries(e),this.series=e,this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=n.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var r=0,d=0;r<e.length;r++,d++){var g,x,v,k,E=void 0,F=void 0,O=[],N=[],$=i.globals.comboCharts?t[r]:r,X=this.barHelpers.getGroupIndex($).columnGroupIndex,K=n.group({class:"apexcharts-series",rel:r+1,seriesName:Je.escapeString(i.globals.seriesNames[$]),"data:realIndex":$});this.ctx.series.addCollapsedClassToSeries(K,$),e[r].length>0&&(this.visibleI=this.visibleI+1);var ie=0,ee=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[$],this.translationsIndex=$);var le=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var te=this.barHelpers.initialPositions($);F=te.y,ie=te.barHeight,x=te.yDivision,k=te.zeroW,E=te.x,ee=te.barWidth,g=te.xDivision,v=te.zeroH,this.isHorizontal||N.push(E+ee/2);var he=n.group({class:"apexcharts-datalabels","data:realIndex":$});i.globals.delayedElements.push({el:he.node}),he.node.classList.add("apexcharts-element-hidden");var de=n.group({class:"apexcharts-bar-goals-markers"}),ke=n.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:ke.node}),ke.node.classList.add("apexcharts-element-hidden");for(var De=0;De<e[r].length;De++){var Ae=this.barHelpers.getStrokeWidth(r,De,$),$e=null,et={indexes:{i:r,j:De,realIndex:$,translationsIndex:le,bc:d},x:E,y:F,strokeWidth:Ae,elSeries:K};this.isHorizontal?($e=this.drawBarPaths(Xt(Xt({},et),{},{barHeight:ie,zeroW:k,yDivision:x})),ee=this.series[r][De]/this.invertedYRatio):($e=this.drawColumnPaths(Xt(Xt({},et),{},{xDivision:g,barWidth:ee,zeroH:v})),ie=this.series[r][De]/this.yRatio[le]);var Ie=this.barHelpers.getPathFillColor(e,r,De,$);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&De>0){var at,qe=this.barHelpers.drawBarShadow({color:typeof Ie.color=="string"&&((at=Ie.color)===null||at===void 0?void 0:at.indexOf("url"))===-1?Ie.color:Je.hexToRgba(i.globals.colors[r]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:$e});ke.add(qe),i.config.chart.dropShadow.enabled&&new ls(this.ctx).dropShadow(qe,i.config.chart.dropShadow,$)}this.pathArr.push($e);var kt=this.barHelpers.drawGoalLine({barXPosition:$e.barXPosition,barYPosition:$e.barYPosition,goalX:$e.goalX,goalY:$e.goalY,barHeight:ie,barWidth:ee});kt&&de.add(kt),F=$e.y,E=$e.x,De>0&&N.push(E+ee/2),O.push(F),this.renderSeries(Xt(Xt({realIndex:$,pathFill:Ie.color},Ie.useRangeColor?{lineFill:Ie.color}:{}),{},{j:De,i:r,columnGroupIndex:X,pathFrom:$e.pathFrom,pathTo:$e.pathTo,strokeWidth:Ae,elSeries:K,x:E,y:F,series:e,barHeight:Math.abs($e.barHeight?$e.barHeight:ie),barWidth:Math.abs($e.barWidth?$e.barWidth:ee),elDataLabelsWrap:he,elGoalsMarkers:de,elBarShadows:ke,visibleSeries:this.visibleI,type:"bar"}))}i.globals.seriesXvalues[$]=N,i.globals.seriesYvalues[$]=O,o.add(K)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,i=e.pathFill,n=e.lineFill,a=e.j,o=e.i,r=e.columnGroupIndex,d=e.pathFrom,g=e.pathTo,x=e.strokeWidth,v=e.elSeries,k=e.x,E=e.y,F=e.y1,O=e.y2,N=e.series,$=e.barHeight,X=e.barWidth,K=e.barXPosition,ie=e.barYPosition,ee=e.elDataLabelsWrap,le=e.elGoalsMarkers,te=e.elBarShadows,he=e.visibleSeries,de=e.type,ke=e.classes,De=this.w,Ae=new Lt(this.ctx),$e=!1;if(!n){var et=typeof De.globals.stroke.colors[t]=="function"?(function(vt){var He,Nt=De.config.stroke.colors;return Array.isArray(Nt)&&Nt.length>0&&((He=Nt[vt])||(He=""),typeof He=="function")?He({value:De.globals.series[vt][a],dataPointIndex:a,w:De}):He})(t):De.globals.stroke.colors[t];n=this.barOptions.distributed?De.globals.stroke.colors[a]:et}var Ie=new VN(this).handleBarDataLabels({x:k,y:E,y1:F,y2:O,i:o,j:a,series:N,realIndex:t,columnGroupIndex:r,barHeight:$,barWidth:X,barXPosition:K,barYPosition:ie,visibleSeries:he});De.globals.isBarHorizontal||(Ie.dataLabelsPos.dataLabelsX+Math.max(X,De.globals.barPadForNumericAxis)<0||Ie.dataLabelsPos.dataLabelsX-Math.max(X,De.globals.barPadForNumericAxis)>De.globals.gridWidth)&&($e=!0),De.config.series[o].data[a]&&De.config.series[o].data[a].strokeColor&&(n=De.config.series[o].data[a].strokeColor),this.isNullValue&&(i="none");var at=a/De.config.chart.animations.animateGradually.delay*(De.config.chart.animations.speed/De.globals.dataPoints)/2.4;if(!$e){var qe=Ae.renderPaths({i:o,j:a,realIndex:t,pathFrom:d,pathTo:g,stroke:n,strokeWidth:x,strokeLineCap:De.config.stroke.lineCap,fill:i,animationDelay:at,initialSpeed:De.config.chart.animations.speed,dataChangeSpeed:De.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(de,"-area ").concat(ke),chartType:de});qe.attr("clip-path","url(#gridRectBarMask".concat(De.globals.cuid,")"));var kt=De.config.forecastDataPoints;kt.count>0&&a>=De.globals.dataPoints-kt.count&&(qe.node.setAttribute("stroke-dasharray",kt.dashArray),qe.node.setAttribute("stroke-width",kt.strokeWidth),qe.node.setAttribute("fill-opacity",kt.fillOpacity)),F!==void 0&&O!==void 0&&(qe.attr("data-range-y1",F),qe.attr("data-range-y2",O)),new ls(this.ctx).setSelectionFilter(qe,t,a),v.add(qe),qe.attr({cy:Ie.dataLabelsPos.bcy,cx:Ie.dataLabelsPos.bcx,j:a,val:De.globals.series[o][a],barHeight:$,barWidth:X}),Ie.dataLabels!==null&&ee.add(Ie.dataLabels),Ie.totalDataLabels&&ee.add(Ie.totalDataLabels),v.add(ee),le&&v.add(le),te&&v.add(te)}return v}},{key:"drawBarPaths",value:function(e){var t,i=e.indexes,n=e.barHeight,a=e.strokeWidth,o=e.zeroW,r=e.x,d=e.y,g=e.yDivision,x=e.elSeries,v=this.w,k=i.i,E=i.j;if(v.globals.isXNumeric)t=(d=(v.globals.seriesX[k][E]-v.globals.minX)/this.invertedXRatio-n)+n*this.visibleI;else if(v.config.plotOptions.bar.hideZeroBarsWhenGrouped){var F=this.barHelpers.getZeroValueEncounters({i:k,j:E}),O=F.nonZeroColumns,N=F.zeroEncounters;O>0&&(n=this.seriesLen*n/O),t=d+n*this.visibleI,t-=n*N}else t=d+n*this.visibleI;this.isFunnel&&(o-=(this.barHelpers.getXForValue(this.series[k][E],o)-o)/2),r=this.barHelpers.getXForValue(this.series[k][E],o);var $=this.barHelpers.getBarpaths({barYPosition:t,barHeight:n,x1:o,x2:r,strokeWidth:a,isReversed:this.isReversed,series:this.series,realIndex:i.realIndex,i:k,j:E,w:v});return v.globals.isXNumeric||(d+=g),this.barHelpers.barBackground({j:E,i:k,y1:t-n*this.visibleI,y2:n*this.seriesLen,elSeries:x}),{pathTo:$.pathTo,pathFrom:$.pathFrom,x1:o,x:r,y:d,goalX:this.barHelpers.getGoalValues("x",o,null,k,E),barYPosition:t,barHeight:n}}},{key:"drawColumnPaths",value:function(e){var t,i=e.indexes,n=e.x,a=e.y,o=e.xDivision,r=e.barWidth,d=e.zeroH,g=e.strokeWidth,x=e.elSeries,v=this.w,k=i.realIndex,E=i.translationsIndex,F=i.i,O=i.j,N=i.bc;if(v.globals.isXNumeric){var $=this.getBarXForNumericXAxis({x:n,j:O,realIndex:k,barWidth:r});n=$.x,t=$.barXPosition}else if(v.config.plotOptions.bar.hideZeroBarsWhenGrouped){var X=this.barHelpers.getZeroValueEncounters({i:F,j:O}),K=X.nonZeroColumns,ie=X.zeroEncounters;K>0&&(r=this.seriesLen*r/K),t=n+r*this.visibleI,t-=r*ie}else t=n+r*this.visibleI;a=this.barHelpers.getYForValue(this.series[F][O],d,E);var ee=this.barHelpers.getColumnPaths({barXPosition:t,barWidth:r,y1:d,y2:a,strokeWidth:g,isReversed:this.isReversed,series:this.series,realIndex:k,i:F,j:O,w:v});return v.globals.isXNumeric||(n+=o),this.barHelpers.barBackground({bc:N,j:O,i:F,x1:t-g/2-r*this.visibleI,x2:r*this.seriesLen+g/2,elSeries:x}),{pathTo:ee.pathTo,pathFrom:ee.pathFrom,x:n,y:a,goalY:this.barHelpers.getGoalValues("y",null,d,F,O,E),barXPosition:t,barWidth:r}}},{key:"getBarXForNumericXAxis",value:function(e){var t=e.x,i=e.barWidth,n=e.realIndex,a=e.j,o=this.w,r=n;return o.globals.seriesX[n].length||(r=o.globals.maxValsInArrayIndex),Je.isNumber(o.globals.seriesX[r][a])&&(t=(o.globals.seriesX[r][a]-o.globals.minX)/this.xRatio-i*this.seriesLen/2),{barXPosition:t+i*this.visibleI,x:t}}},{key:"getPreviousPath",value:function(e,t){for(var i=this.w,n="M 0 0",a=0;a<i.globals.previousPaths.length;a++){var o=i.globals.previousPaths[a];o.paths&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(e,10)&&i.globals.previousPaths[a].paths[t]!==void 0&&(n=i.globals.previousPaths[a].paths[t].d)}return n}}]),s})(),IA=(function(s){bm(t,Xf);var e=vm(t);function t(){return li(this,t),e.apply(this,arguments)}return ci(t,[{key:"draw",value:function(i,n){var a=this,o=this.w;this.graphics=new Lt(this.ctx),this.bar=new Xf(this.ctx,this.xyRatios);var r=new or(this.ctx,o);i=r.getLogSeries(i),this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i),o.config.chart.stackType==="100%"&&(i=o.globals.comboCharts?n.map((function(F){return o.globals.seriesPercent[F]})):o.globals.seriesPercent.slice()),this.series=i,this.barHelpers.initializeStackedPrevVars(this);for(var d=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),g=0,x=0,v=function(F,O){var N=void 0,$=void 0,X=void 0,K=void 0,ie=o.globals.comboCharts?n[F]:F,ee=a.barHelpers.getGroupIndex(ie),le=ee.groupIndex,te=ee.columnGroupIndex;a.groupCtx=a[o.globals.seriesGroups[le]];var he=[],de=[],ke=0;a.yRatio.length>1&&(a.yaxisIndex=o.globals.seriesYAxisReverseMap[ie][0],ke=ie),a.isReversed=o.config.yaxis[a.yaxisIndex]&&o.config.yaxis[a.yaxisIndex].reversed;var De=a.graphics.group({class:"apexcharts-series",seriesName:Je.escapeString(o.globals.seriesNames[ie]),rel:F+1,"data:realIndex":ie});a.ctx.series.addCollapsedClassToSeries(De,ie);var Ae=a.graphics.group({class:"apexcharts-datalabels","data:realIndex":ie}),$e=a.graphics.group({class:"apexcharts-bar-goals-markers"}),et=0,Ie=0,at=a.initialPositions(g,x,N,$,X,K,ke);x=at.y,et=at.barHeight,$=at.yDivision,K=at.zeroW,g=at.x,Ie=at.barWidth,N=at.xDivision,X=at.zeroH,o.globals.barHeight=et,o.globals.barWidth=Ie,a.barHelpers.initializeStackedXYVars(a),a.groupCtx.prevY.length===1&&a.groupCtx.prevY[0].every((function(ui){return isNaN(ui)}))&&(a.groupCtx.prevY[0]=a.groupCtx.prevY[0].map((function(){return X})),a.groupCtx.prevYF[0]=a.groupCtx.prevYF[0].map((function(){return 0})));for(var qe=0;qe<o.globals.dataPoints;qe++){var kt=a.barHelpers.getStrokeWidth(F,qe,ie),vt={indexes:{i:F,j:qe,realIndex:ie,translationsIndex:ke,bc:O},strokeWidth:kt,x:g,y:x,elSeries:De,columnGroupIndex:te,seriesGroup:o.globals.seriesGroups[le]},He=null;a.isHorizontal?(He=a.drawStackedBarPaths(Xt(Xt({},vt),{},{zeroW:K,barHeight:et,yDivision:$})),Ie=a.series[F][qe]/a.invertedYRatio):(He=a.drawStackedColumnPaths(Xt(Xt({},vt),{},{xDivision:N,barWidth:Ie,zeroH:X})),et=a.series[F][qe]/a.yRatio[ke]);var Nt=a.barHelpers.drawGoalLine({barXPosition:He.barXPosition,barYPosition:He.barYPosition,goalX:He.goalX,goalY:He.goalY,barHeight:et,barWidth:Ie});Nt&&$e.add(Nt),x=He.y,g=He.x,he.push(g),de.push(x);var Qt=a.barHelpers.getPathFillColor(i,F,qe,ie),Ai="",jt=o.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";(a.barHelpers.arrBorderRadius[ie][qe]==="bottom"&&o.globals.series[ie][qe]>0||a.barHelpers.arrBorderRadius[ie][qe]==="top"&&o.globals.series[ie][qe]<0)&&(Ai=jt),De=a.renderSeries(Xt(Xt({realIndex:ie,pathFill:Qt.color},Qt.useRangeColor?{lineFill:Qt.color}:{}),{},{j:qe,i:F,columnGroupIndex:te,pathFrom:He.pathFrom,pathTo:He.pathTo,strokeWidth:kt,elSeries:De,x:g,y:x,series:i,barHeight:et,barWidth:Ie,elDataLabelsWrap:Ae,elGoalsMarkers:$e,type:"bar",visibleSeries:te,classes:Ai}))}o.globals.seriesXvalues[ie]=he,o.globals.seriesYvalues[ie]=de,a.groupCtx.prevY.push(a.groupCtx.yArrj),a.groupCtx.prevYF.push(a.groupCtx.yArrjF),a.groupCtx.prevYVal.push(a.groupCtx.yArrjVal),a.groupCtx.prevX.push(a.groupCtx.xArrj),a.groupCtx.prevXF.push(a.groupCtx.xArrjF),a.groupCtx.prevXVal.push(a.groupCtx.xArrjVal),d.add(De)},k=0,E=0;k<i.length;k++,E++)v(k,E);return d}},{key:"initialPositions",value:function(i,n,a,o,r,d,g){var x,v,k=this.w;if(this.isHorizontal){o=k.globals.gridHeight/k.globals.dataPoints;var E=k.config.plotOptions.bar.barHeight;x=String(E).indexOf("%")===-1?parseInt(E,10):o*parseInt(E,10)/100,d=k.globals.padHorizontal+(this.isReversed?k.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),n=(o-x)/2}else{v=a=k.globals.gridWidth/k.globals.dataPoints;var F=k.config.plotOptions.bar.columnWidth;k.globals.isXNumeric&&k.globals.dataPoints>1?v=(a=k.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(F).indexOf("%")===-1?v=parseInt(F,10):v*=parseInt(F,10)/100,r=this.isReversed?this.baseLineY[g]:k.globals.gridHeight-this.baseLineY[g],i=k.globals.padHorizontal+(a-v)/2}var O=k.globals.barGroups.length||1;return{x:i,y:n,yDivision:o,xDivision:a,barHeight:x/O,barWidth:v/O,zeroH:r,zeroW:d}}},{key:"drawStackedBarPaths",value:function(i){for(var n,a=i.indexes,o=i.barHeight,r=i.strokeWidth,d=i.zeroW,g=i.x,x=i.y,v=i.columnGroupIndex,k=i.seriesGroup,E=i.yDivision,F=i.elSeries,O=this.w,N=x+v*o,$=a.i,X=a.j,K=a.realIndex,ie=a.translationsIndex,ee=0,le=0;le<this.groupCtx.prevXF.length;le++)ee+=this.groupCtx.prevXF[le][X];var te=$;if(O.config.series[K].name&&(te=k.indexOf(O.config.series[K].name)),te>0){var he=d;this.groupCtx.prevXVal[te-1][X]<0?he=this.series[$][X]>=0?this.groupCtx.prevX[te-1][X]+ee-2*(this.isReversed?ee:0):this.groupCtx.prevX[te-1][X]:this.groupCtx.prevXVal[te-1][X]>=0&&(he=this.series[$][X]>=0?this.groupCtx.prevX[te-1][X]:this.groupCtx.prevX[te-1][X]-ee+2*(this.isReversed?ee:0)),n=he}else n=d;g=this.series[$][X]===null?n:n+this.series[$][X]/this.invertedYRatio-2*(this.isReversed?this.series[$][X]/this.invertedYRatio:0);var de=this.barHelpers.getBarpaths({barYPosition:N,barHeight:o,x1:n,x2:g,strokeWidth:r,isReversed:this.isReversed,series:this.series,realIndex:a.realIndex,seriesGroup:k,i:$,j:X,w:O});return this.barHelpers.barBackground({j:X,i:$,y1:N,y2:o,elSeries:F}),x+=E,{pathTo:de.pathTo,pathFrom:de.pathFrom,goalX:this.barHelpers.getGoalValues("x",d,null,$,X,ie),barXPosition:n,barYPosition:N,x:g,y:x}}},{key:"drawStackedColumnPaths",value:function(i){var n=i.indexes,a=i.x,o=i.y,r=i.xDivision,d=i.barWidth,g=i.zeroH,x=i.columnGroupIndex,v=i.seriesGroup,k=i.elSeries,E=this.w,F=n.i,O=n.j,N=n.bc,$=n.realIndex,X=n.translationsIndex;if(E.globals.isXNumeric){var K=E.globals.seriesX[$][O];K||(K=0),a=(K-E.globals.minX)/this.xRatio-d/2*E.globals.barGroups.length}for(var ie,ee=a+x*d,le=0,te=0;te<this.groupCtx.prevYF.length;te++)le+=isNaN(this.groupCtx.prevYF[te][O])?0:this.groupCtx.prevYF[te][O];var he=F;if(v&&(he=v.indexOf(E.globals.seriesNames[$])),he>0&&!E.globals.isXNumeric||he>0&&E.globals.isXNumeric&&E.globals.seriesX[$-1][O]===E.globals.seriesX[$][O]){var de,ke,De,Ae=Math.min(this.yRatio.length+1,$+1);if(this.groupCtx.prevY[he-1]!==void 0&&this.groupCtx.prevY[he-1].length)for(var $e=1;$e<Ae;$e++){var et;if(!isNaN((et=this.groupCtx.prevY[he-$e])===null||et===void 0?void 0:et[O])){De=this.groupCtx.prevY[he-$e][O];break}}for(var Ie=1;Ie<Ae;Ie++){var at,qe;if(((at=this.groupCtx.prevYVal[he-Ie])===null||at===void 0?void 0:at[O])<0){ke=this.series[F][O]>=0?De-le+2*(this.isReversed?le:0):De;break}if(((qe=this.groupCtx.prevYVal[he-Ie])===null||qe===void 0?void 0:qe[O])>=0){ke=this.series[F][O]>=0?De:De+le-2*(this.isReversed?le:0);break}}ke===void 0&&(ke=E.globals.gridHeight),ie=(de=this.groupCtx.prevYF[0])!==null&&de!==void 0&&de.every((function(vt){return vt===0}))&&this.groupCtx.prevYF.slice(1,he).every((function(vt){return vt.every((function(He){return isNaN(He)}))}))?g:ke}else ie=g;o=this.series[F][O]?ie-this.series[F][O]/this.yRatio[X]+2*(this.isReversed?this.series[F][O]/this.yRatio[X]:0):ie;var kt=this.barHelpers.getColumnPaths({barXPosition:ee,barWidth:d,y1:ie,y2:o,yRatio:this.yRatio[X],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:v,realIndex:n.realIndex,i:F,j:O,w:E});return this.barHelpers.barBackground({bc:N,j:O,i:F,x1:ee,x2:d,elSeries:k}),{pathTo:kt.pathTo,pathFrom:kt.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,g,F,O),barXPosition:ee,x:E.globals.isXNumeric?a:a+r,y:o}}}]),t})(),V1=(function(s){bm(t,Xf);var e=vm(t);function t(){return li(this,t),e.apply(this,arguments)}return ci(t,[{key:"draw",value:function(i,n,a){var o=this,r=this.w,d=new Lt(this.ctx),g=r.globals.comboCharts?n:r.config.chart.type,x=new vl(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=r.config.plotOptions.bar.horizontal,this.isOHLC=this.candlestickOptions&&this.candlestickOptions.type==="ohlc";var v=new or(this.ctx,r);i=v.getLogSeries(i),this.series=i,this.yRatio=v.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);for(var k=d.group({class:"apexcharts-".concat(g,"-series apexcharts-plot-series")}),E=function(O){o.isBoxPlot=r.config.chart.type==="boxPlot"||r.config.series[O].type==="boxPlot";var N,$,X,K,ie=void 0,ee=void 0,le=[],te=[],he=r.globals.comboCharts?a[O]:O,de=o.barHelpers.getGroupIndex(he).columnGroupIndex,ke=d.group({class:"apexcharts-series",seriesName:Je.escapeString(r.globals.seriesNames[he]),rel:O+1,"data:realIndex":he});o.ctx.series.addCollapsedClassToSeries(ke,he),i[O].length>0&&(o.visibleI=o.visibleI+1);var De,Ae,$e=0;o.yRatio.length>1&&(o.yaxisIndex=r.globals.seriesYAxisReverseMap[he][0],$e=he);var et=o.barHelpers.initialPositions(he);ee=et.y,De=et.barHeight,$=et.yDivision,K=et.zeroW,ie=et.x,Ae=et.barWidth,N=et.xDivision,X=et.zeroH,te.push(ie+Ae/2);for(var Ie=d.group({class:"apexcharts-datalabels","data:realIndex":he}),at=d.group({class:"apexcharts-bar-goals-markers"}),qe=function(vt){var He=o.barHelpers.getStrokeWidth(O,vt,he),Nt=null,Qt={indexes:{i:O,j:vt,realIndex:he,translationsIndex:$e},x:ie,y:ee,strokeWidth:He,elSeries:ke};Nt=o.isHorizontal?o.drawHorizontalBoxPaths(Xt(Xt({},Qt),{},{yDivision:$,barHeight:De,zeroW:K})):o.drawVerticalBoxPaths(Xt(Xt({},Qt),{},{xDivision:N,barWidth:Ae,zeroH:X})),ee=Nt.y,ie=Nt.x;var Ai=o.barHelpers.drawGoalLine({barXPosition:Nt.barXPosition,barYPosition:Nt.barYPosition,goalX:Nt.goalX,goalY:Nt.goalY,barHeight:De,barWidth:Ae});Ai&&at.add(Ai),vt>0&&te.push(ie+Ae/2),le.push(ee),Nt.pathTo.forEach((function(jt,ui){var Ct=!o.isBoxPlot&&o.candlestickOptions.wick.useFillColor?Nt.color[ui]:r.globals.stroke.colors[O],ri=x.fillPath({seriesNumber:he,dataPointIndex:vt,color:Nt.color[ui],value:i[O][vt]});o.renderSeries({realIndex:he,pathFill:ri,lineFill:Ct,j:vt,i:O,pathFrom:Nt.pathFrom,pathTo:jt,strokeWidth:He,elSeries:ke,x:ie,y:ee,series:i,columnGroupIndex:de,barHeight:De,barWidth:Ae,elDataLabelsWrap:Ie,elGoalsMarkers:at,visibleSeries:o.visibleI,type:r.config.chart.type})}))},kt=0;kt<r.globals.dataPoints;kt++)qe(kt);r.globals.seriesXvalues[he]=te,r.globals.seriesYvalues[he]=le,k.add(ke)},F=0;F<i.length;F++)E(F);return k}},{key:"drawVerticalBoxPaths",value:function(i){var n=i.indexes,a=i.x;i.y;var o=i.xDivision,r=i.barWidth,d=i.zeroH,g=i.strokeWidth,x=this.w,v=new Lt(this.ctx),k=n.i,E=n.j,F=x.config.plotOptions.candlestick.colors,O=this.boxOptions.colors,N=n.realIndex,$=function(kt){return Array.isArray(kt)?kt[N]:kt},X=$(F.upward),K=$(F.downward),ie=this.yRatio[n.translationsIndex],ee=this.getOHLCValue(N,E),le=d,te=d,he=ee.o<ee.c?[X]:[K];this.isBoxPlot&&(he=[$(O.lower),$(O.upper)]);var de=Math.min(ee.o,ee.c),ke=Math.max(ee.o,ee.c),De=ee.m;x.globals.isXNumeric&&(a=(x.globals.seriesX[N][E]-x.globals.minX)/this.xRatio-r/2);var Ae=a+r*this.visibleI;this.series[k][E]===void 0||this.series[k][E]===null?(de=d,ke=d):(de=d-de/ie,ke=d-ke/ie,le=d-ee.h/ie,te=d-ee.l/ie,De=d-ee.m/ie);var $e=v.move(Ae,d),et=v.move(Ae+r/2,de);if(x.globals.previousPaths.length>0&&(et=this.getPreviousPath(N,E,!0)),this.isOHLC){var Ie=Ae+r/2,at=d-ee.o/ie,qe=d-ee.c/ie;$e=[v.move(Ie,le)+v.line(Ie,te)+v.move(Ie,at)+v.line(Ae,at)+v.move(Ie,qe)+v.line(Ae+r,qe)]}else $e=this.isBoxPlot?[v.move(Ae,de)+v.line(Ae+r/2,de)+v.line(Ae+r/2,le)+v.line(Ae+r/4,le)+v.line(Ae+r-r/4,le)+v.line(Ae+r/2,le)+v.line(Ae+r/2,de)+v.line(Ae+r,de)+v.line(Ae+r,De)+v.line(Ae,De)+v.line(Ae,de+g/2),v.move(Ae,De)+v.line(Ae+r,De)+v.line(Ae+r,ke)+v.line(Ae+r/2,ke)+v.line(Ae+r/2,te)+v.line(Ae+r-r/4,te)+v.line(Ae+r/4,te)+v.line(Ae+r/2,te)+v.line(Ae+r/2,ke)+v.line(Ae,ke)+v.line(Ae,De)+"z"]:[v.move(Ae,ke)+v.line(Ae+r/2,ke)+v.line(Ae+r/2,le)+v.line(Ae+r/2,ke)+v.line(Ae+r,ke)+v.line(Ae+r,de)+v.line(Ae+r/2,de)+v.line(Ae+r/2,te)+v.line(Ae+r/2,de)+v.line(Ae,de)+v.line(Ae,ke-g/2)];return et+=v.move(Ae,de),x.globals.isXNumeric||(a+=o),{pathTo:$e,pathFrom:et,x:a,y:ke,goalY:this.barHelpers.getGoalValues("y",null,d,k,E,n.translationsIndex),barXPosition:Ae,color:he}}},{key:"drawHorizontalBoxPaths",value:function(i){var n=i.indexes;i.x;var a=i.y,o=i.yDivision,r=i.barHeight,d=i.zeroW,g=i.strokeWidth,x=this.w,v=new Lt(this.ctx),k=n.i,E=n.j,F=this.boxOptions.colors.lower;this.isBoxPlot&&(F=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var O=this.invertedYRatio,N=n.realIndex,$=this.getOHLCValue(N,E),X=d,K=d,ie=Math.min($.o,$.c),ee=Math.max($.o,$.c),le=$.m;x.globals.isXNumeric&&(a=(x.globals.seriesX[N][E]-x.globals.minX)/this.invertedXRatio-r/2);var te=a+r*this.visibleI;this.series[k][E]===void 0||this.series[k][E]===null?(ie=d,ee=d):(ie=d+ie/O,ee=d+ee/O,X=d+$.h/O,K=d+$.l/O,le=d+$.m/O);var he=v.move(d,te),de=v.move(ie,te+r/2);return x.globals.previousPaths.length>0&&(de=this.getPreviousPath(N,E,!0)),he=[v.move(ie,te)+v.line(ie,te+r/2)+v.line(X,te+r/2)+v.line(X,te+r/2-r/4)+v.line(X,te+r/2+r/4)+v.line(X,te+r/2)+v.line(ie,te+r/2)+v.line(ie,te+r)+v.line(le,te+r)+v.line(le,te)+v.line(ie+g/2,te),v.move(le,te)+v.line(le,te+r)+v.line(ee,te+r)+v.line(ee,te+r/2)+v.line(K,te+r/2)+v.line(K,te+r-r/4)+v.line(K,te+r/4)+v.line(K,te+r/2)+v.line(ee,te+r/2)+v.line(ee,te)+v.line(le,te)+"z"],de+=v.move(ie,te),x.globals.isXNumeric||(a+=o),{pathTo:he,pathFrom:de,x:ee,y:a,goalX:this.barHelpers.getGoalValues("x",d,null,k,E),barYPosition:te,color:F}}},{key:"getOHLCValue",value:function(i,n){var a=this.w,o=new or(this.ctx,a),r=o.getLogValAtSeriesIndex(a.globals.seriesCandleH[i][n],i),d=o.getLogValAtSeriesIndex(a.globals.seriesCandleO[i][n],i),g=o.getLogValAtSeriesIndex(a.globals.seriesCandleM[i][n],i),x=o.getLogValAtSeriesIndex(a.globals.seriesCandleC[i][n],i),v=o.getLogValAtSeriesIndex(a.globals.seriesCandleL[i][n],i);return{o:this.isBoxPlot?r:d,h:this.isBoxPlot?d:r,m:g,l:this.isBoxPlot?x:v,c:this.isBoxPlot?v:x}}}]),t})(),CI=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,i=e.config.plotOptions[e.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(n,a){n.from<=0&&(t=!0)})),t}},{key:"getShadeColor",value:function(e,t,i,n){var a=this.w,o=1,r=a.config.plotOptions[e].shadeIntensity,d=this.determineColor(e,t,i);a.globals.hasNegs||n?o=a.config.plotOptions[e].reverseNegativeShade?d.percent<0?d.percent/100*(1.25*r):(1-d.percent/100)*(1.25*r):d.percent<=0?1-(1+d.percent/100)*r:(1-d.percent/100)*r:(o=1-d.percent/100,e==="treemap"&&(o=(1-d.percent/100)*(1.25*r)));var g=d.color,x=new Je;if(a.config.plotOptions[e].enableShades)if(this.w.config.theme.mode==="dark"){var v=x.shadeColor(-1*o,d.color);g=Je.hexToRgba(Je.isColorHex(v)?v:Je.rgb2hex(v),a.config.fill.opacity)}else{var k=x.shadeColor(o,d.color);g=Je.hexToRgba(Je.isColorHex(k)?k:Je.rgb2hex(k),a.config.fill.opacity)}return{color:g,colorProps:d}}},{key:"determineColor",value:function(e,t,i){var n=this.w,a=n.globals.series[t][i],o=n.config.plotOptions[e],r=o.colorScale.inverse?i:t;o.distributed&&n.config.chart.type==="treemap"&&(r=i);var d=n.globals.colors[r],g=null,x=Math.min.apply(Math,Hr(n.globals.series[t])),v=Math.max.apply(Math,Hr(n.globals.series[t]));o.distributed||e!=="heatmap"||(x=n.globals.minY,v=n.globals.maxY),o.colorScale.min!==void 0&&(x=o.colorScale.min<n.globals.minY?o.colorScale.min:n.globals.minY,v=o.colorScale.max>n.globals.maxY?o.colorScale.max:n.globals.maxY);var k=Math.abs(v)+Math.abs(x),E=100*a/(k===0?k-1e-6:k);return o.colorScale.ranges.length>0&&o.colorScale.ranges.map((function(F,O){if(a>=F.from&&a<=F.to){d=F.color,g=F.foreColor?F.foreColor:null,x=F.from,v=F.to;var N=Math.abs(v)+Math.abs(x);E=100*a/(N===0?N-1e-6:N)}})),{color:d,foreColor:g,percent:E}}},{key:"calculateDataLabels",value:function(e){var t=e.text,i=e.x,n=e.y,a=e.i,o=e.j,r=e.colorProps,d=e.fontSize,g=this.w.config.dataLabels,x=new Lt(this.ctx),v=new $f(this.ctx),k=null;if(g.enabled){k=x.group({class:"apexcharts-data-labels"});var E=g.offsetX,F=g.offsetY,O=i+E,N=n+parseFloat(g.style.fontSize)/3+F;v.plotDataLabelsText({x:O,y:N,text:t,i:a,j:o,color:r.foreColor,parent:k,fontSize:d,dataLabelsConfig:g})}return k}},{key:"addListeners",value:function(e){var t=new Lt(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),s})(),UN=(function(){function s(e,t){li(this,s),this.ctx=e,this.w=e.w,this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new CI(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return ci(s,[{key:"draw",value:function(e){var t=this.w,i=new Lt(this.ctx),n=i.group({class:"apexcharts-heatmap"});n.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var a=t.globals.gridWidth/t.globals.dataPoints,o=t.globals.gridHeight/t.globals.series.length,r=0,d=!1;this.negRange=this.helpers.checkColorRange();var g=e.slice();t.config.yaxis[0].reversed&&(d=!0,g.reverse());for(var x=d?0:g.length-1;d?x<g.length:x>=0;d?x++:x--){var v=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:Je.escapeString(t.globals.seriesNames[x]),rel:x+1,"data:realIndex":x});if(this.ctx.series.addCollapsedClassToSeries(v,x),t.config.chart.dropShadow.enabled){var k=t.config.chart.dropShadow;new ls(this.ctx).dropShadow(v,k,x)}for(var E=0,F=t.config.plotOptions.heatmap.shadeIntensity,O=0,N=0;N<t.globals.dataPoints;N++)if(t.globals.seriesX.length&&!t.globals.allSeriesHasEqualX&&t.globals.minX+t.globals.minXDiff*N<t.globals.seriesX[x][O])E+=a;else{if(O>=g[x].length)break;var $=this.helpers.getShadeColor(t.config.chart.type,x,O,this.negRange),X=$.color,K=$.colorProps;t.config.fill.type==="image"&&(X=new vl(this.ctx).fillPath({seriesNumber:x,dataPointIndex:O,opacity:t.globals.hasNegs?K.percent<0?1-(1+K.percent/100):F+K.percent/100:K.percent/100,patternID:Je.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:a,height:t.config.fill.image.height?t.config.fill.image.height:o}));var ie=this.rectRadius,ee=i.drawRect(E,r,a,o,ie);if(ee.attr({cx:E,cy:r}),ee.node.classList.add("apexcharts-heatmap-rect"),v.add(ee),ee.attr({fill:X,i:x,index:x,j:O,val:e[x][O],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?X:t.globals.stroke.colors[0],color:X}),this.helpers.addListeners(ee),t.config.chart.animations.enabled&&!t.globals.dataChanged){var le=1;t.globals.resized||(le=t.config.chart.animations.speed),this.animateHeatMap(ee,E,r,a,o,le)}if(t.globals.dataChanged){var te=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){te=this.dynamicAnim.speed;var he=t.globals.previousPaths[x]&&t.globals.previousPaths[x][O]&&t.globals.previousPaths[x][O].color;he||(he="rgba(255, 255, 255, 0)"),this.animateHeatColor(ee,Je.isColorHex(he)?he:Je.rgb2hex(he),Je.isColorHex(X)?X:Je.rgb2hex(X),te)}}var de=(0,t.config.dataLabels.formatter)(t.globals.series[x][O],{value:t.globals.series[x][O],seriesIndex:x,dataPointIndex:O,w:t}),ke=this.helpers.calculateDataLabels({text:de,x:E+a/2,y:r+o/2,i:x,j:O,colorProps:K,series:g});ke!==null&&v.add(ke),E+=a,O++}r+=o,n.add(v)}var De=t.globals.yAxisScale[0].result.slice();return t.config.yaxis[0].reversed?De.unshift(""):De.push(""),t.globals.yAxisScale[0].result=De,n}},{key:"animateHeatMap",value:function(e,t,i,n,a,o){var r=new Zf(this.ctx);r.animateRect(e,{x:t+n/2,y:i+a/2,width:0,height:0},{x:t,y:i,width:n,height:a},o,(function(){r.animationCompleted(e)}))}},{key:"animateHeatColor",value:function(e,t,i,n){e.attr({fill:t}).animate(n).attr({fill:i})}}]),s})(),AI=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"drawYAxisTexts",value:function(e,t,i,n){var a=this.w,o=a.config.yaxis[0],r=a.globals.yLabelFormatters[0];return new Lt(this.ctx).drawText({x:e+o.labels.offsetX,y:t+o.labels.offsetY,text:r(n,i),textAnchor:"middle",fontSize:o.labels.style.fontSize,fontFamily:o.labels.style.fontFamily,foreColor:Array.isArray(o.labels.style.colors)?o.labels.style.colors[i]:o.labels.style.colors})}}]),s})(),TI=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w;var t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,t.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100;var i=t.config.plotOptions.pie.customScale,n=t.globals.gridWidth/2,a=t.globals.gridHeight/2;this.translateX=n-n*i,this.translateY=a-a*i,this.dataLabelsGroup=new Lt(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return ci(s,[{key:"draw",value:function(e){var t=this,i=this.w,n=new Lt(this.ctx),a=n.group({class:"apexcharts-pie"});if(i.globals.noData)return a;for(var o=0,r=0;r<e.length;r++)o+=Je.negToZero(e[r]);var d=[],g=n.group();o===0&&(o=1e-5),e.forEach((function(K){t.maxY=Math.max(t.maxY,K)})),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),i.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(a);for(var x=0;x<e.length;x++){var v=this.fullAngle*Je.negToZero(e[x])/o;d.push(v),this.chartType==="polarArea"?(d[x]=this.fullAngle/e.length,this.sliceSizes.push(i.globals.radialSize*e[x]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var k,E=0,F=0;F<i.globals.previousPaths.length;F++)E+=Je.negToZero(i.globals.previousPaths[F]);for(var O=0;O<i.globals.previousPaths.length;O++)k=this.fullAngle*Je.negToZero(i.globals.previousPaths[O])/E,this.prevSectorAngleArr.push(k)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var N=n.drawCircle(this.donutSize);N.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),g.add(N)}var $=this.drawArcs(d,e);if(this.sliceLabels.forEach((function(K){$.add(K)})),g.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),g.add($),a.add(g),this.donutDataLabels.show){var X=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});a.add(X)}return i.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(a),a}},{key:"drawArcs",value:function(e,t){var i=this.w,n=new ls(this.ctx),a=new Lt(this.ctx),o=new vl(this.ctx),r=a.group({class:"apexcharts-slices"}),d=this.initialAngle,g=this.initialAngle,x=this.initialAngle,v=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var k=0;k<e.length;k++){var E=a.group({class:"apexcharts-series apexcharts-pie-series",seriesName:Je.escapeString(i.globals.seriesNames[k]),rel:k+1,"data:realIndex":k});r.add(E),g=v,x=(d=x)+e[k],v=g+this.prevSectorAngleArr[k];var F=x<d?this.fullAngle+x-d:x-d,O=o.fillPath({seriesNumber:k,size:this.sliceSizes[k],value:t[k]}),N=this.getChangedPath(g,v),$=a.drawPath({d:N,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[k]:this.lineColorArr,strokeWidth:0,fill:O,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(k)});if($.attr({index:0,j:k}),n.setSelectionFilter($,0,k),i.config.chart.dropShadow.enabled){var X=i.config.chart.dropShadow;n.dropShadow($,X,k)}this.addListeners($,this.donutDataLabels),Lt.setAttrs($.node,{"data:angle":F,"data:startAngle":d,"data:strokeWidth":this.strokeWidth,"data:value":t[k]});var K={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?K=Je.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(d+F/2)%this.fullAngle):this.chartType==="donut"&&(K=Je.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(d+F/2)%this.fullAngle)),E.add($);var ie=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):((ie=F/this.fullAngle*i.config.chart.animations.speed)===0&&(ie=1),this.animDur=ie+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths($,{size:this.sliceSizes[k],endAngle:x,startAngle:d,prevStartAngle:g,prevEndAngle:v,animateStartingPos:!0,i:k,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths($,{size:this.sliceSizes[k],endAngle:x,startAngle:d,i:k,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:ie}),i.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&$.node.addEventListener("mouseup",this.pieClicked.bind(this,k)),i.globals.selectedDataPoints[0]!==void 0&&i.globals.selectedDataPoints[0].indexOf(k)>-1&&this.pieClicked(k),i.config.dataLabels.enabled){var ee=K.x,le=K.y,te=100*F/this.fullAngle+"%";if(F!==0&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[k]){var he=i.config.dataLabels.formatter;he!==void 0&&(te=he(i.globals.seriesPercent[k][0],{seriesIndex:k,w:i}));var de=i.globals.dataLabels.style.colors[k],ke=a.group({class:"apexcharts-datalabels"}),De=a.drawText({x:ee,y:le,text:te,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:de});if(ke.add(De),i.config.dataLabels.dropShadow.enabled){var Ae=i.config.dataLabels.dropShadow;n.dropShadow(De,Ae)}De.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&i.globals.resized===!1&&(De.node.classList.add("apexcharts-pie-label-delay"),De.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(ke)}}}return r}},{key:"addListeners",value:function(e,t){var i=new Lt(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var i=this.w,n=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,a=n,o=t.startAngle,r=t.startAngle;t.prevStartAngle!==void 0&&t.prevEndAngle!==void 0&&(o=t.prevEndAngle,a=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===i.config.series.length-1&&(n+r>this.fullAngle?t.endAngle=t.endAngle-(n+r):n+r<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(n+r)))),n===this.fullAngle&&(n=this.fullAngle-.01),this.animateArc(e,o,r,n,a,t)}},{key:"animateArc",value:function(e,t,i,n,a,o){var r,d=this,g=this.w,x=new Zf(this.ctx),v=o.size;(isNaN(t)||isNaN(a))&&(t=i,a=n,o.dur=0);var k=n,E=i,F=t<i?this.fullAngle+t-i:t-i;g.globals.dataChanged&&o.shouldSetPrevPaths&&o.prevEndAngle&&(r=d.getPiePath({me:d,startAngle:o.prevStartAngle,angle:o.prevEndAngle<o.prevStartAngle?this.fullAngle+o.prevEndAngle-o.prevStartAngle:o.prevEndAngle-o.prevStartAngle,size:v}),e.attr({d:r})),o.dur!==0?e.animate(o.dur,o.animBeginArr[o.i]).after((function(){d.chartType!=="pie"&&d.chartType!=="donut"&&d.chartType!=="polarArea"||this.animate(g.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":d.strokeWidth}),o.i===g.config.series.length-1&&x.animationCompleted(e)})).during((function(O){k=F+(n-F)*O,o.animateStartingPos&&(k=a+(n-a)*O,E=t-a+(i-(t-a))*O),r=d.getPiePath({me:d,startAngle:E,angle:k,size:v}),e.node.setAttribute("data:pathOrig",r),e.attr({d:r})})):(r=d.getPiePath({me:d,startAngle:E,angle:n,size:v}),o.isTrack||(g.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",r),e.attr({d:r,"stroke-width":d.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,i=this.w,n=this,a=n.sliceSizes[e]+(i.config.plotOptions.pie.expandOnClick?4:0),o=i.globals.dom.Paper.findOne(".apexcharts-".concat(n.chartType.toLowerCase(),"-slice-").concat(e));if(o.attr("data:pieClicked")!=="true"){var r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(r,(function(v){v.setAttribute("data:pieClicked","false");var k=v.getAttribute("data:pathOrig");k&&v.setAttribute("d",k)})),i.globals.capturedDataPointIndex=e,o.attr("data:pieClicked","true");var d=parseInt(o.attr("data:startAngle"),10),g=parseInt(o.attr("data:angle"),10);t=n.getPiePath({me:n,startAngle:d,angle:g,size:a}),g!==360&&o.plot(t)}else{o.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(o.node,this.donutDataLabels);var x=o.attr("data:pathOrig");o.attr({d:x})}}},{key:"getChangedPath",value:function(e,t){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),i}},{key:"getPiePath",value:function(e){var t,i=e.me,n=e.startAngle,a=e.angle,o=e.size,r=new Lt(this.ctx),d=n,g=Math.PI*(d-90)/180,x=a+n;Math.ceil(x)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(x=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(x)>this.fullAngle&&(x-=this.fullAngle);var v=Math.PI*(x-90)/180,k=i.centerX+o*Math.cos(g),E=i.centerY+o*Math.sin(g),F=i.centerX+o*Math.cos(v),O=i.centerY+o*Math.sin(v),N=Je.polarToCartesian(i.centerX,i.centerY,i.donutSize,x),$=Je.polarToCartesian(i.centerX,i.centerY,i.donutSize,d),X=a>180?1:0,K=["M",k,E,"A",o,o,0,X,1,F,O];return t=i.chartType==="donut"?[].concat(K,["L",N.x,N.y,"A",i.donutSize,i.donutSize,0,X,0,$.x,$.y,"L",k,E,"z"]).join(" "):i.chartType==="pie"||i.chartType==="polarArea"?[].concat(K,["L",i.centerX,i.centerY,"L",k,E]).join(" "):[].concat(K).join(" "),r.roundPathCorners(t,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(e){var t=this.w,i=new vI(this.ctx),n=new Lt(this.ctx),a=new AI(this.ctx),o=n.group(),r=n.group(),d=i.niceScale(0,Math.ceil(this.maxY),0),g=d.result.reverse(),x=d.result.length;this.maxY=d.niceMax;for(var v=t.globals.radialSize,k=v/(x-1),E=0;E<x-1;E++){var F=n.drawCircle(v);if(F.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var O=a.drawYAxisTexts(this.centerX,this.centerY-v+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,E,g[E]);r.add(O)}o.add(F),v-=k}this.drawSpokes(e),e.add(o),e.add(r)}},{key:"renderInnerDataLabels",value:function(e,t,i){var n=this.w,a=new Lt(this.ctx),o=t.total.show;e.node.innerHTML="",e.node.style.opacity=i.opacity;var r,d,g=i.centerX,x=this.donutDataLabels.total.label?i.centerY:i.centerY-i.centerY/6;r=t.name.color===void 0?n.globals.colors[0]:t.name.color;var v=t.name.fontSize,k=t.name.fontFamily,E=t.name.fontWeight;d=t.value.color===void 0?n.config.chart.foreColor:t.value.color;var F=t.value.formatter,O="",N="";if(o?(r=t.total.color,v=t.total.fontSize,k=t.total.fontFamily,E=t.total.fontWeight,N=this.donutDataLabels.total.label?t.total.label:"",O=t.total.formatter(n)):n.globals.series.length===1&&(O=F(n.globals.series[0],n),N=n.globals.seriesNames[0]),N&&(N=t.name.formatter(N,t.total.show,n)),t.name.show){var $=a.drawText({x:g,y:x+parseFloat(t.name.offsetY),text:N,textAnchor:"middle",foreColor:r,fontSize:v,fontWeight:E,fontFamily:k});$.node.classList.add("apexcharts-datalabel-label"),e.add($)}if(t.value.show){var X=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,K=a.drawText({x:g,y:x+X,text:O,textAnchor:"middle",foreColor:d,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});K.node.classList.add("apexcharts-datalabel-value"),e.add(K)}return e}},{key:"printInnerLabels",value:function(e,t,i,n){var a,o=this.w;n?a=e.name.color===void 0?o.globals.colors[parseInt(n.parentNode.getAttribute("rel"),10)-1]:e.name.color:o.globals.series.length>1&&e.total.show&&(a=e.total.color);var r=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),d=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,e.value.formatter)(i,o),n||typeof e.total.formatter!="function"||(i=e.total.formatter(o));var g=t===e.total.label;t=this.donutDataLabels.total.label?e.name.formatter(t,g,o):"",r!==null&&(r.textContent=t),d!==null&&(d.textContent=i),r!==null&&(r.style.fill=a)}},{key:"printDataLabelsInner",value:function(e,t){var i=this.w,n=e.getAttribute("data:value"),a=i.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(t,a,n,e);var o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");o!==null&&(o.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,i=this.w,n=new Lt(this.ctx),a=i.config.plotOptions.polarArea.spokes;if(a.strokeWidth!==0){for(var o=[],r=360/i.globals.series.length,d=0;d<i.globals.series.length;d++)o.push(Je.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+r*d));o.forEach((function(g,x){var v=n.drawLine(g.x,g.y,t.centerX,t.centerY,Array.isArray(a.connectorColors)?a.connectorColors[x]:a.connectorColors);e.add(v)}))}}},{key:"revertDataLabelsInner",value:function(){var e=this.w;if(this.donutDataLabels.show){var t=e.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),i=this.renderInnerDataLabels(t,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});e.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(i)}}}]),s})(),GN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var t=this.w;this.graphics=new Lt(this.ctx),this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.logBase=t.config.yaxis[0].logBase,this.coreUtils=new or(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),t.config.plotOptions.radar.size!==void 0&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return ci(s,[{key:"draw",value:function(e){var t=this,i=this.w,n=new vl(this.ctx),a=[],o=new $f(this.ctx);e.length&&(this.dataPointsLen=e[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var r=i.globals.gridWidth/2,d=i.globals.gridHeight/2,g=r+i.config.plotOptions.radar.offsetX,x=d+i.config.plotOptions.radar.offsetY,v=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(g||0,", ").concat(x||0,")")}),k=[],E=null,F=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((function(N,$){var X=N.length===i.globals.dataPoints,K=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":X,seriesName:Je.escapeString(i.globals.seriesNames[$]),rel:$+1,"data:realIndex":$});t.dataRadiusOfPercent[$]=[],t.dataRadius[$]=[],t.angleArr[$]=[],N.forEach((function($e,et){var Ie=Math.abs(t.maxValue-t.minValue);$e-=t.minValue,t.isLog&&($e=t.coreUtils.getLogVal(t.logBase,$e,0)),t.dataRadiusOfPercent[$][et]=$e/Ie,t.dataRadius[$][et]=t.dataRadiusOfPercent[$][et]*t.size,t.angleArr[$][et]=et*t.disAngle})),k=t.getDataPointsPos(t.dataRadius[$],t.angleArr[$]);var ie=t.createPaths(k,{x:0,y:0});E=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),F=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":$}),i.globals.delayedElements.push({el:E.node,index:$});var ee={i:$,realIndex:$,animationDelay:$,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[$],strokeLineCap:i.config.stroke.lineCap},le=null;i.globals.previousPaths.length>0&&(le=t.getPreviousPath($));for(var te=0;te<ie.linePathsTo.length;te++){var he=t.graphics.renderPaths(Xt(Xt({},ee),{},{pathFrom:le===null?ie.linePathsFrom[te]:le,pathTo:ie.linePathsTo[te],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[$]:t.strokeWidth,fill:"none",drawShadow:!1}));K.add(he);var de=n.fillPath({seriesNumber:$}),ke=t.graphics.renderPaths(Xt(Xt({},ee),{},{pathFrom:le===null?ie.areaPathsFrom[te]:le,pathTo:ie.areaPathsTo[te],strokeWidth:0,fill:de,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var De=new ls(t.ctx),Ae=i.config.chart.dropShadow;De.dropShadow(ke,Object.assign({},Ae,{noUserSpaceOnUse:!0}),$)}K.add(ke)}N.forEach((function($e,et){var Ie=new ep(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:$,dataPointIndex:et}),at=t.graphics.drawMarker(k[et].x,k[et].y,Ie);at.attr("rel",et),at.attr("j",et),at.attr("index",$),at.node.setAttribute("default-marker-size",Ie.pSize);var qe=t.graphics.group({class:"apexcharts-series-markers"});qe&&qe.add(at),E.add(qe),K.add(E);var kt=i.config.dataLabels;if(kt.enabled){var vt=kt.formatter(i.globals.series[$][et],{seriesIndex:$,dataPointIndex:et,w:i});o.plotDataLabelsText({x:k[et].x,y:k[et].y,text:vt,textAnchor:"middle",i:$,j:$,parent:F,offsetCorrection:!1,dataLabelsConfig:Xt({},kt)})}K.add(F)})),a.push(K)})),this.drawPolygons({parent:v}),i.config.xaxis.labels.show){var O=this.drawXAxisTexts();v.add(O)}return a.forEach((function(N){v.add(N)})),v.add(this.yaxisLabels),v}},{key:"drawPolygons",value:function(e){for(var t=this,i=this.w,n=e.parent,a=new AI(this.ctx),o=i.globals.yAxisScale[0].result.reverse(),r=o.length,d=[],g=this.size/(r-1),x=0;x<r;x++)d[x]=g*x;d.reverse();var v=[],k=[];d.forEach((function(E,F){var O=Je.getPolygonPos(E,t.dataPointsLen),N="";O.forEach((function($,X){if(F===0){var K=t.graphics.drawLine($.x,$.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[X]:t.polygons.connectorColors);k.push(K)}X===0&&t.yaxisLabelsTextsPos.push({x:$.x,y:$.y}),N+=$.x+","+$.y+" "})),v.push(N)})),v.forEach((function(E,F){var O=t.polygons.strokeColors,N=t.polygons.strokeWidth,$=t.graphics.drawPolygon(E,Array.isArray(O)?O[F]:O,Array.isArray(N)?N[F]:N,i.globals.radarPolygons.fill.colors[F]);n.add($)})),k.forEach((function(E){n.add(E)})),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(E,F){var O=a.drawYAxisTexts(E.x,E.y,F,o[F]);t.yaxisLabels.add(O)}))}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,i=t.config.xaxis.labels,n=this.graphics.group({class:"apexcharts-xaxis"}),a=Je.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach((function(o,r){var d=t.config.xaxis.labels.formatter,g=new $f(e.ctx);if(a[r]){var x=e.getTextPos(a[r],e.size),v=d(o,{seriesIndex:-1,dataPointIndex:r,w:t});g.plotDataLabelsText({x:x.newX,y:x.newY,text:v,textAnchor:x.textAnchor,i:r,j:r,parent:n,className:"apexcharts-xaxis-label",color:Array.isArray(i.style.colors)&&i.style.colors[r]?i.style.colors[r]:"#a8a8a8",dataLabelsConfig:Xt({textAnchor:x.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1}).on("click",(function(k){if(typeof t.config.chart.events.xAxisLabelClick=="function"){var E=Object.assign({},t,{labelIndex:r});t.config.chart.events.xAxisLabelClick(k,e.ctx,E)}}))}})),n}},{key:"createPaths",value:function(e,t){var i=this,n=[],a=[],o=[],r=[];if(e.length){a=[this.graphics.move(t.x,t.y)],r=[this.graphics.move(t.x,t.y)];var d=this.graphics.move(e[0].x,e[0].y),g=this.graphics.move(e[0].x,e[0].y);e.forEach((function(x,v){d+=i.graphics.line(x.x,x.y),g+=i.graphics.line(x.x,x.y),v===e.length-1&&(d+="Z",g+="Z")})),n.push(d),o.push(g)}return{linePathsFrom:a,linePathsTo:n,areaPathsFrom:r,areaPathsTo:o}}},{key:"getTextPos",value:function(e,t){var i="middle",n=e.x,a=e.y;return Math.abs(e.x)>=10?e.x>0?(i="start",n+=10):e.x<0&&(i="end",n-=10):i="middle",Math.abs(e.y)>=t-10&&(e.y<0?a-=10:e.y>0&&(a+=10)),{textAnchor:i,newX:n,newY:a}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,i=null,n=0;n<t.globals.previousPaths.length;n++){var a=t.globals.previousPaths[n];a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(e,10)&&t.globals.previousPaths[n].paths[0]!==void 0&&(i=t.globals.previousPaths[n].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var n=[],a=0;a<i;a++){var o={};o.x=e[a]*Math.sin(t[a]),o.y=-e[a]*Math.cos(t[a]),n.push(o)}return n}}]),s})(),WN=(function(s){bm(t,TI);var e=vm(t);function t(i){var n;li(this,t),(n=e.call(this,i)).ctx=i,n.w=i.w,n.animBeginArr=[0],n.animDur=0;var a=n.w;return n.startAngle=a.config.plotOptions.radialBar.startAngle,n.endAngle=a.config.plotOptions.radialBar.endAngle,n.totalAngle=Math.abs(a.config.plotOptions.radialBar.endAngle-a.config.plotOptions.radialBar.startAngle),n.trackStartAngle=a.config.plotOptions.radialBar.track.startAngle,n.trackEndAngle=a.config.plotOptions.radialBar.track.endAngle,n.barLabels=n.w.config.plotOptions.radialBar.barLabels,n.donutDataLabels=n.w.config.plotOptions.radialBar.dataLabels,n.radialDataLabels=n.donutDataLabels,n.trackStartAngle||(n.trackStartAngle=n.startAngle),n.trackEndAngle||(n.trackEndAngle=n.endAngle),n.endAngle===360&&(n.endAngle=359.99),n.margin=parseInt(a.config.plotOptions.radialBar.track.margin,10),n.onBarLabelClick=n.onBarLabelClick.bind(NM(n)),n}return ci(t,[{key:"draw",value:function(i){var n=this.w,a=new Lt(this.ctx),o=a.group({class:"apexcharts-radialbar"});if(n.globals.noData)return o;var r=a.group(),d=this.defaultSize/2,g=n.globals.gridWidth/2,x=this.defaultSize/2.05;n.config.chart.sparkline.enabled||(x=x-n.config.stroke.width-n.config.chart.dropShadow.blur);var v=n.globals.fill.colors;if(n.config.plotOptions.radialBar.track.show){var k=this.drawTracks({size:x,centerX:g,centerY:d,colorArr:v,series:i});r.add(k)}var E=this.drawArcs({size:x,centerX:g,centerY:d,colorArr:v,series:i}),F=360;n.config.plotOptions.radialBar.startAngle<0&&(F=this.totalAngle);var O=(360-F)/360;if(n.globals.radialSize=x-x*O,this.radialDataLabels.value.show){var N=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);n.globals.radialSize+=N*O}return r.add(E.g),n.config.plotOptions.radialBar.hollow.position==="front"&&(E.g.add(E.elHollow),E.dataLabels&&E.g.add(E.dataLabels)),o.add(r),o}},{key:"drawTracks",value:function(i){var n=this.w,a=new Lt(this.ctx),o=a.group({class:"apexcharts-tracks"}),r=new ls(this.ctx),d=new vl(this.ctx),g=this.getStrokeWidth(i);i.size=i.size-g/2;for(var x=0;x<i.series.length;x++){var v=a.group({class:"apexcharts-radialbar-track apexcharts-track"});o.add(v),v.attr({rel:x+1}),i.size=i.size-g-this.margin;var k=n.config.plotOptions.radialBar.track,E=d.fillPath({seriesNumber:0,size:i.size,fillColors:Array.isArray(k.background)?k.background[x]:k.background,solid:!0}),F=this.trackStartAngle,O=this.trackEndAngle;Math.abs(O)+Math.abs(F)>=360&&(O=360-Math.abs(this.startAngle)-.1);var N=a.drawPath({d:"",stroke:E,strokeWidth:g*parseInt(k.strokeWidth,10)/100,fill:"none",strokeOpacity:k.opacity,classes:"apexcharts-radialbar-area"});if(k.dropShadow.enabled){var $=k.dropShadow;r.dropShadow(N,$)}v.add(N),N.attr("id","apexcharts-radialbarTrack-"+x),this.animatePaths(N,{centerX:i.centerX,centerY:i.centerY,endAngle:O,startAngle:F,size:i.size,i:x,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return o}},{key:"drawArcs",value:function(i){var n=this.w,a=new Lt(this.ctx),o=new vl(this.ctx),r=new ls(this.ctx),d=a.group(),g=this.getStrokeWidth(i);i.size=i.size-g/2;var x=n.config.plotOptions.radialBar.hollow.background,v=i.size-g*i.series.length-this.margin*i.series.length-g*parseInt(n.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,k=v-n.config.plotOptions.radialBar.hollow.margin;n.config.plotOptions.radialBar.hollow.image!==void 0&&(x=this.drawHollowImage(i,d,v,x));var E=this.drawHollow({size:k,centerX:i.centerX,centerY:i.centerY,fill:x||"transparent"});if(n.config.plotOptions.radialBar.hollow.dropShadow.enabled){var F=n.config.plotOptions.radialBar.hollow.dropShadow;r.dropShadow(E,F)}var O=1;!this.radialDataLabels.total.show&&n.globals.series.length>1&&(O=0);var N=null;if(this.radialDataLabels.show){var $=n.globals.dom.Paper.findOne(".apexcharts-datalabels-group");N=this.renderInnerDataLabels($,this.radialDataLabels,{hollowSize:v,centerX:i.centerX,centerY:i.centerY,opacity:O})}n.config.plotOptions.radialBar.hollow.position==="back"&&(d.add(E),N&&d.add(N));var X=!1;n.config.plotOptions.radialBar.inverseOrder&&(X=!0);for(var K=X?i.series.length-1:0;X?K>=0:K<i.series.length;X?K--:K++){var ie=a.group({class:"apexcharts-series apexcharts-radial-series",seriesName:Je.escapeString(n.globals.seriesNames[K])});d.add(ie),ie.attr({rel:K+1,"data:realIndex":K}),this.ctx.series.addCollapsedClassToSeries(ie,K),i.size=i.size-g-this.margin;var ee=o.fillPath({seriesNumber:K,size:i.size,value:i.series[K]}),le=this.startAngle,te=void 0,he=Je.negToZero(i.series[K]>100?100:i.series[K])/100,de=Math.round(this.totalAngle*he)+this.startAngle,ke=void 0;n.globals.dataChanged&&(te=this.startAngle,ke=Math.round(this.totalAngle*Je.negToZero(n.globals.previousPaths[K])/100)+te),Math.abs(de)+Math.abs(le)>360&&(de-=.01),Math.abs(ke)+Math.abs(te)>360&&(ke-=.01);var De=de-le,Ae=Array.isArray(n.config.stroke.dashArray)?n.config.stroke.dashArray[K]:n.config.stroke.dashArray,$e=a.drawPath({d:"",stroke:ee,strokeWidth:g,fill:"none",fillOpacity:n.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+K,strokeDashArray:Ae});if(Lt.setAttrs($e.node,{"data:angle":De,"data:value":i.series[K]}),n.config.chart.dropShadow.enabled){var et=n.config.chart.dropShadow;r.dropShadow($e,et,K)}if(r.setSelectionFilter($e,0,K),this.addListeners($e,this.radialDataLabels),ie.add($e),$e.attr({index:0,j:K}),this.barLabels.enabled){var Ie=Je.polarToCartesian(i.centerX,i.centerY,i.size,le),at=this.barLabels.formatter(n.globals.seriesNames[K],{seriesIndex:K,w:n}),qe=["apexcharts-radialbar-label"];this.barLabels.onClick||qe.push("apexcharts-no-click");var kt=this.barLabels.useSeriesColors?n.globals.colors[K]:n.config.chart.foreColor;kt||(kt=n.config.chart.foreColor);var vt=Ie.x+this.barLabels.offsetX,He=Ie.y+this.barLabels.offsetY,Nt=a.drawText({x:vt,y:He,text:at,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:kt,cssClass:qe.join(" ")});Nt.on("click",this.onBarLabelClick),Nt.attr({rel:K+1}),le!==0&&Nt.attr({"transform-origin":"".concat(vt," ").concat(He),transform:"rotate(".concat(le," 0 0)")}),ie.add(Nt)}var Qt=0;!this.initialAnim||n.globals.resized||n.globals.dataChanged||(Qt=n.config.chart.animations.speed),n.globals.dataChanged&&(Qt=n.config.chart.animations.dynamicAnimation.speed),this.animDur=Qt/(1.2*i.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths($e,{centerX:i.centerX,centerY:i.centerY,endAngle:de,startAngle:le,prevEndAngle:ke,prevStartAngle:te,size:i.size,i:K,totalItems:2,animBeginArr:this.animBeginArr,dur:Qt,shouldSetPrevPaths:!0})}return{g:d,elHollow:E,dataLabels:N}}},{key:"drawHollow",value:function(i){var n=new Lt(this.ctx).drawCircle(2*i.size);return n.attr({class:"apexcharts-radialbar-hollow",cx:i.centerX,cy:i.centerY,r:i.size,fill:i.fill}),n}},{key:"drawHollowImage",value:function(i,n,a,o){var r=this.w,d=new vl(this.ctx),g=Je.randomId(),x=r.config.plotOptions.radialBar.hollow.image;if(r.config.plotOptions.radialBar.hollow.imageClipped)d.clippedImgArea({width:a,height:a,image:x,patternID:"pattern".concat(r.globals.cuid).concat(g)}),o="url(#pattern".concat(r.globals.cuid).concat(g,")");else{var v=r.config.plotOptions.radialBar.hollow.imageWidth,k=r.config.plotOptions.radialBar.hollow.imageHeight;if(v===void 0&&k===void 0){var E=r.globals.dom.Paper.image(x,(function(O){this.move(i.centerX-O.width/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-O.height/2+r.config.plotOptions.radialBar.hollow.imageOffsetY)}));n.add(E)}else{var F=r.globals.dom.Paper.image(x,(function(O){this.move(i.centerX-v/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-k/2+r.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(v,k)}));n.add(F)}}return o}},{key:"getStrokeWidth",value:function(i){var n=this.w;return i.size*(100-parseInt(n.config.plotOptions.radialBar.hollow.size,10))/100/(i.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(i){var n=parseInt(i.target.getAttribute("rel"),10)-1,a=this.barLabels.onClick,o=this.w;a&&a(o.globals.seriesNames[n],{w:o,seriesIndex:n})}}]),t})(),$N=(function(s){bm(t,Xf);var e=vm(t);function t(){return li(this,t),e.apply(this,arguments)}return ci(t,[{key:"draw",value:function(i,n){var a=this.w,o=new Lt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=i,this.seriesRangeStart=a.globals.seriesRangeStart,this.seriesRangeEnd=a.globals.seriesRangeEnd,this.barHelpers.initVariables(i);for(var r=o.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),d=0;d<i.length;d++){var g,x,v,k,E=void 0,F=void 0,O=a.globals.comboCharts?n[d]:d,N=this.barHelpers.getGroupIndex(O).columnGroupIndex,$=o.group({class:"apexcharts-series",seriesName:Je.escapeString(a.globals.seriesNames[O]),rel:d+1,"data:realIndex":O});this.ctx.series.addCollapsedClassToSeries($,O),i[d].length>0&&(this.visibleI=this.visibleI+1);var X=0,K=0,ie=0;this.yRatio.length>1&&(this.yaxisIndex=a.globals.seriesYAxisReverseMap[O][0],ie=O);var ee=this.barHelpers.initialPositions(O);F=ee.y,k=ee.zeroW,E=ee.x,K=ee.barWidth,X=ee.barHeight,g=ee.xDivision,x=ee.yDivision,v=ee.zeroH;for(var le=o.group({class:"apexcharts-datalabels","data:realIndex":O}),te=o.group({class:"apexcharts-rangebar-goals-markers"}),he=0;he<a.globals.dataPoints;he++){var de=this.barHelpers.getStrokeWidth(d,he,O),ke=this.seriesRangeStart[d][he],De=this.seriesRangeEnd[d][he],Ae=null,$e=null,et=null,Ie={x:E,y:F,strokeWidth:de,elSeries:$},at=this.seriesLen;if(a.config.plotOptions.bar.rangeBarGroupRows&&(at=1),a.config.series[d].data[he]===void 0)break;if(this.isHorizontal){et=F+X*this.visibleI;var qe=(x-X*at)/2;if(a.config.series[d].data[he].x){var kt=this.detectOverlappingBars({i:d,j:he,barYPosition:et,srty:qe,barHeight:X,yDivision:x,initPositions:ee});X=kt.barHeight,et=kt.barYPosition}K=(Ae=this.drawRangeBarPaths(Xt({indexes:{i:d,j:he,realIndex:O},barHeight:X,barYPosition:et,zeroW:k,yDivision:x,y1:ke,y2:De},Ie))).barWidth}else{a.globals.isXNumeric&&(E=(a.globals.seriesX[d][he]-a.globals.minX)/this.xRatio-K/2),$e=E+K*this.visibleI;var vt=(g-K*at)/2;if(a.config.series[d].data[he].x){var He=this.detectOverlappingBars({i:d,j:he,barXPosition:$e,srtx:vt,barWidth:K,xDivision:g,initPositions:ee});K=He.barWidth,$e=He.barXPosition}X=(Ae=this.drawRangeColumnPaths(Xt({indexes:{i:d,j:he,realIndex:O,translationsIndex:ie},barWidth:K,barXPosition:$e,zeroH:v,xDivision:g},Ie))).barHeight}var Nt=this.barHelpers.drawGoalLine({barXPosition:Ae.barXPosition,barYPosition:et,goalX:Ae.goalX,goalY:Ae.goalY,barHeight:X,barWidth:K});Nt&&te.add(Nt),F=Ae.y,E=Ae.x;var Qt=this.barHelpers.getPathFillColor(i,d,he,O);this.renderSeries({realIndex:O,pathFill:Qt.color,lineFill:Qt.useRangeColor?Qt.color:a.globals.stroke.colors[O],j:he,i:d,x:E,y:F,y1:ke,y2:De,pathFrom:Ae.pathFrom,pathTo:Ae.pathTo,strokeWidth:de,elSeries:$,series:i,barHeight:X,barWidth:K,barXPosition:$e,barYPosition:et,columnGroupIndex:N,elDataLabelsWrap:le,elGoalsMarkers:te,visibleSeries:this.visibleI,type:"rangebar"})}r.add($)}return r}},{key:"detectOverlappingBars",value:function(i){var n=i.i,a=i.j,o=i.barYPosition,r=i.barXPosition,d=i.srty,g=i.srtx,x=i.barHeight,v=i.barWidth,k=i.yDivision,E=i.xDivision,F=i.initPositions,O=this.w,N=[],$=O.config.series[n].data[a].rangeName,X=O.config.series[n].data[a].x,K=Array.isArray(X)?X.join(" "):X,ie=O.globals.labels.map((function(le){return Array.isArray(le)?le.join(" "):le})).indexOf(K),ee=O.globals.seriesRange[n].findIndex((function(le){return le.x===K&&le.overlaps.length>0}));return this.isHorizontal?(o=O.config.plotOptions.bar.rangeBarGroupRows?d+k*ie:d+x*this.visibleI+k*ie,ee>-1&&!O.config.plotOptions.bar.rangeBarOverlap&&(N=O.globals.seriesRange[n][ee].overlaps).indexOf($)>-1&&(o=(x=F.barHeight/N.length)*this.visibleI+k*(100-parseInt(this.barOptions.barHeight,10))/100/2+x*(this.visibleI+N.indexOf($))+k*ie)):(ie>-1&&!O.globals.timescaleLabels.length&&(r=O.config.plotOptions.bar.rangeBarGroupRows?g+E*ie:g+v*this.visibleI+E*ie),ee>-1&&!O.config.plotOptions.bar.rangeBarOverlap&&(N=O.globals.seriesRange[n][ee].overlaps).indexOf($)>-1&&(r=(v=F.barWidth/N.length)*this.visibleI+E*(100-parseInt(this.barOptions.barWidth,10))/100/2+v*(this.visibleI+N.indexOf($))+E*ie)),{barYPosition:o,barXPosition:r,barHeight:x,barWidth:v}}},{key:"drawRangeColumnPaths",value:function(i){var n=i.indexes,a=i.x,o=i.xDivision,r=i.barWidth,d=i.barXPosition,g=i.zeroH,x=this.w,v=n.i,k=n.j,E=n.realIndex,F=n.translationsIndex,O=this.yRatio[F],N=this.getRangeValue(E,k),$=Math.min(N.start,N.end),X=Math.max(N.start,N.end);this.series[v][k]===void 0||this.series[v][k]===null?$=g:($=g-$/O,X=g-X/O);var K=Math.abs(X-$),ie=this.barHelpers.getColumnPaths({barXPosition:d,barWidth:r,y1:$,y2:X,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:E,i:E,j:k,w:x});if(x.globals.isXNumeric){var ee=this.getBarXForNumericXAxis({x:a,j:k,realIndex:E,barWidth:r});a=ee.x,d=ee.barXPosition}else a+=o;return{pathTo:ie.pathTo,pathFrom:ie.pathFrom,barHeight:K,x:a,y:N.start<0&&N.end<0?$:X,goalY:this.barHelpers.getGoalValues("y",null,g,v,k,F),barXPosition:d}}},{key:"preventBarOverflow",value:function(i){var n=this.w;return i<0&&(i=0),i>n.globals.gridWidth&&(i=n.globals.gridWidth),i}},{key:"drawRangeBarPaths",value:function(i){var n=i.indexes,a=i.y,o=i.y1,r=i.y2,d=i.yDivision,g=i.barHeight,x=i.barYPosition,v=i.zeroW,k=this.w,E=n.realIndex,F=n.j,O=this.preventBarOverflow(v+o/this.invertedYRatio),N=this.preventBarOverflow(v+r/this.invertedYRatio),$=this.getRangeValue(E,F),X=Math.abs(N-O),K=this.barHelpers.getBarpaths({barYPosition:x,barHeight:g,x1:O,x2:N,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:E,realIndex:E,j:F,w:k});return k.globals.isXNumeric||(a+=d),{pathTo:K.pathTo,pathFrom:K.pathFrom,barWidth:X,x:$.start<0&&$.end<0?O:N,goalX:this.barHelpers.getGoalValues("x",v,null,E,F),y:a}}},{key:"getRangeValue",value:function(i,n){var a=this.w;return{start:a.globals.seriesRangeStart[i][n],end:a.globals.seriesRangeEnd[i][n]}}}]),t})(),XN=(function(){function s(e){li(this,s),this.w=e.w,this.lineCtx=e}return ci(s,[{key:"sameValueSeriesFix",value:function(e,t){var i=this.w;if((i.config.fill.type==="gradient"||i.config.fill.type[e]==="gradient")&&new or(this.lineCtx.ctx,i).seriesHaveSameValues(e)){var n=t[e].slice();n[n.length-1]=n[n.length-1]+1e-6,t[e]=n}return t}},{key:"calculatePoints",value:function(e){var t=e.series,i=e.realIndex,n=e.x,a=e.y,o=e.i,r=e.j,d=e.prevY,g=this.w,x=[],v=[],k=this.lineCtx.categoryAxisCorrection+g.config.markers.offsetX;return g.globals.isXNumeric&&(k=(g.globals.seriesX[i][0]-g.globals.minX)/this.lineCtx.xRatio+g.config.markers.offsetX),r===0&&(x.push(k),v.push(Je.isNumber(t[o][0])?d+g.config.markers.offsetY:null)),x.push(n+g.config.markers.offsetX),v.push(Je.isNumber(t[o][r+1])?a+g.config.markers.offsetY:null),{x,y:v}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,i=e.pathFromArea,n=e.realIndex,a=this.w,o=0;o<a.globals.previousPaths.length;o++){var r=a.globals.previousPaths[o];(r.type==="line"||r.type==="area")&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(n,10)&&(r.type==="line"?(this.lineCtx.appendPathFrom=!1,t=a.globals.previousPaths[o].paths[0].d):r.type==="area"&&(this.lineCtx.appendPathFrom=!1,i=a.globals.previousPaths[o].paths[0].d,a.config.stroke.show&&a.globals.previousPaths[o].paths[1]&&(t=a.globals.previousPaths[o].paths[1].d)))}return{pathFromLine:t,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(e){var t,i,n,a=e.i,o=e.realIndex,r=e.series,d=e.prevY,g=e.lineYPosition,x=e.translationsIndex,v=this.w,k=v.config.chart.stacked&&!v.globals.comboCharts||v.config.chart.stacked&&v.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[o])===null||t===void 0?void 0:t.type)==="bar"||((i=this.w.config.series[o])===null||i===void 0?void 0:i.type)==="column");if(((n=r[a])===null||n===void 0?void 0:n[0])!==void 0)d=(g=k&&a>0?this.lineCtx.prevSeriesY[a-1][0]:this.lineCtx.zeroY)-r[a][0]/this.lineCtx.yRatio[x]+2*(this.lineCtx.isReversed?r[a][0]/this.lineCtx.yRatio[x]:0);else if(k&&a>0&&r[a][0]===void 0){for(var E=a-1;E>=0;E--)if(r[E][0]!==null&&r[E][0]!==void 0){d=g=this.lineCtx.prevSeriesY[E][0];break}}return{prevY:d,lineYPosition:g}}}]),s})(),YN=function(s){for(var e,t,i,n,a=(function(x){for(var v=[],k=x[0],E=x[1],F=v[0]=H1(k,E),O=1,N=x.length-1;O<N;O++)k=E,E=x[O+1],v[O]=.5*(F+(F=H1(k,E)));return v[O]=F,v})(s),o=s.length-1,r=[],d=0;d<o;d++)i=H1(s[d],s[d+1]),Math.abs(i)<1e-6?a[d]=a[d+1]=0:(n=(e=a[d]/i)*e+(t=a[d+1]/i)*t)>9&&(n=3*i/Math.sqrt(n),a[d]=n*e,a[d+1]=n*t);for(var g=0;g<=o;g++)n=(s[Math.min(o,g+1)][0]-s[Math.max(0,g-1)][0])/(6*(1+a[g]*a[g])),r.push([n||0,a[g]*n||0]);return r},qN=function(s){var e=YN(s),t=s[1],i=s[0],n=[],a=e[1],o=e[0];n.push(i,[i[0]+o[0],i[1]+o[1],t[0]-a[0],t[1]-a[1],t[0],t[1]]);for(var r=2,d=e.length;r<d;r++){var g=s[r],x=e[r];n.push([g[0]-x[0],g[1]-x[1],g[0],g[1]])}return n},ZN=function(s,e,t){var i=s.slice(e,t);if(e){if(t-e>1&&i[1].length<6){var n=i[0].length;i[1]=[2*i[0][n-2]-i[0][n-4],2*i[0][n-1]-i[0][n-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i};function H1(s,e){return(e[1]-s[1])/(e[0]-s[0])}var U1=(function(){function s(e,t,i){li(this,s),this.ctx=e,this.w=e.w,this.xyRatios=t,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||i,this.scatter=new _I(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new XN(this),this.markers=new ep(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return ci(s,[{key:"draw",value:function(e,t,i,n){var a,o=this.w,r=new Lt(this.ctx),d=o.globals.comboCharts?t:o.config.chart.type,g=r.group({class:"apexcharts-".concat(d,"-series apexcharts-plot-series")}),x=new or(this.ctx,o);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=x.getLogSeries(e),this.yRatio=x.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var v=[],k=0;k<e.length;k++){e=this.lineHelpers.sameValueSeriesFix(k,e);var E=o.globals.comboCharts?i[k]:k,F=this.yRatio.length>1?E:0;this._initSerieVariables(e,k,E);var O=[],N=[],$=[],X=o.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,E),o.globals.isXNumeric&&o.globals.seriesX.length>0&&(X=(o.globals.seriesX[E][0]-o.globals.minX)/this.xRatio),$.push(X);var K,ie=X,ee=void 0,le=ie,te=this.zeroY,he=this.zeroY;te=this.lineHelpers.determineFirstPrevY({i:k,realIndex:E,series:e,prevY:te,lineYPosition:0,translationsIndex:F}).prevY,o.config.stroke.curve==="monotoneCubic"&&e[k][0]===null?O.push(null):O.push(te),K=te,d==="rangeArea"&&(ee=he=this.lineHelpers.determineFirstPrevY({i:k,realIndex:E,series:n,prevY:he,lineYPosition:0,translationsIndex:F}).prevY,N.push(O[0]!==null?he:null));var de=this._calculatePathsFrom({type:d,series:e,i:k,realIndex:E,translationsIndex:F,prevX:le,prevY:te,prevY2:he}),ke=[O[0]],De=[N[0]],Ae={type:d,series:e,realIndex:E,translationsIndex:F,i:k,x:X,y:1,pX:ie,pY:K,pathsFrom:de,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:$,yArrj:O,y2Arrj:N,seriesRangeEnd:n},$e=this._iterateOverDataPoints(Xt(Xt({},Ae),{},{iterations:d==="rangeArea"?e[k].length-1:void 0,isRangeStart:!0}));if(d==="rangeArea"){for(var et=this._calculatePathsFrom({series:n,i:k,realIndex:E,prevX:le,prevY:he}),Ie=this._iterateOverDataPoints(Xt(Xt({},Ae),{},{series:n,xArrj:[X],yArrj:ke,y2Arrj:De,pY:ee,areaPaths:$e.areaPaths,pathsFrom:et,iterations:n[k].length-1,isRangeStart:!1})),at=$e.linePaths.length/2,qe=0;qe<at;qe++)$e.linePaths[qe]=Ie.linePaths[qe+at]+$e.linePaths[qe];$e.linePaths.splice(at),$e.pathFromLine=Ie.pathFromLine+$e.pathFromLine}else $e.pathFromArea+="z";this._handlePaths({type:d,realIndex:E,i:k,paths:$e}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),v.push(this.elSeries)}if(((a=o.config.series[0])===null||a===void 0?void 0:a.zIndex)!==void 0&&v.sort((function(He,Nt){return Number(He.node.getAttribute("zIndex"))-Number(Nt.node.getAttribute("zIndex"))})),o.config.chart.stacked)for(var kt=v.length-1;kt>=0;kt--)g.add(v[kt]);else for(var vt=0;vt<v.length;vt++)g.add(v[vt]);return g}},{key:"_initSerieVariables",value:function(e,t,i){var n=this.w,a=new Lt(this.ctx);this.xDivision=n.globals.gridWidth/(n.globals.dataPoints-(n.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(n.config.stroke.width)?n.config.stroke.width[i]:n.config.stroke.width;var o=0;if(this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[i],o=i),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed,this.zeroY=n.globals.gridHeight-this.baseLineY[o]-(this.isReversed?n.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[o]:0),this.areaBottomY=this.zeroY,(this.zeroY>n.globals.gridHeight||n.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=n.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=a.group({class:"apexcharts-series",zIndex:n.config.series[i].zIndex!==void 0?n.config.series[i].zIndex:i,seriesName:Je.escapeString(n.globals.seriesNames[i])}),this.elPointsMain=a.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),n.globals.hasNullValues){var r=this.markers.plotChartMarkers({pointsPos:{x:[0],y:[n.globals.gridHeight+n.globals.markers.largestSize]},seriesIndex:t,j:0,pSize:.1,alwaysDrawMarker:!0,isVirtualPoint:!0});r!==null&&this.elPointsMain.add(r)}this.elDataLabelsWrap=a.group({class:"apexcharts-datalabels","data:realIndex":i});var d=e[t].length===n.globals.dataPoints;this.elSeries.attr({"data:longestSeries":d,rel:t+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,i,n,a,o=e.type,r=e.series,d=e.i,g=e.realIndex,x=e.translationsIndex,v=e.prevX,k=e.prevY,E=e.prevY2,F=this.w,O=new Lt(this.ctx);if(r[d][0]===null){for(var N=0;N<r[d].length;N++)if(r[d][N]!==null){v=this.xDivision*N,k=this.zeroY-r[d][N]/this.yRatio[x],t=O.move(v,k),i=O.move(v,this.areaBottomY);break}}else t=O.move(v,k),o==="rangeArea"&&(t=O.move(v,E)+O.line(v,k)),i=O.move(v,this.areaBottomY)+O.line(v,k);if(n=O.move(0,this.areaBottomY)+O.line(0,this.areaBottomY),a=O.move(0,this.areaBottomY)+O.line(0,this.areaBottomY),F.globals.previousPaths.length>0){var $=this.lineHelpers.checkPreviousPaths({pathFromLine:n,pathFromArea:a,realIndex:g});n=$.pathFromLine,a=$.pathFromArea}return{prevX:v,prevY:k,linePath:t,areaPath:i,pathFromLine:n,pathFromArea:a}}},{key:"_handlePaths",value:function(e){var t=e.type,i=e.realIndex,n=e.i,a=e.paths,o=this.w,r=new Lt(this.ctx),d=new vl(this.ctx);this.prevSeriesY.push(a.yArrj),o.globals.seriesXvalues[i]=a.xArrj,o.globals.seriesYvalues[i]=a.yArrj;var g=o.config.forecastDataPoints;if(g.count>0&&t!=="rangeArea"){var x=o.globals.seriesXvalues[i][o.globals.seriesXvalues[i].length-g.count-1],v=r.drawRect(x,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(v.node);var k=r.drawRect(0,0,x,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(k.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var E={i:n,realIndex:i,animationDelay:n,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if(t==="area")for(var F=d.fillPath({seriesNumber:i}),O=0;O<a.areaPaths.length;O++){var N=r.renderPaths(Xt(Xt({},E),{},{pathFrom:a.pathFromArea,pathTo:a.areaPaths[O],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:F}));this.elSeries.add(N)}if(o.config.stroke.show&&!this.pointsChart){var $=null;if(t==="line")$=d.fillPath({seriesNumber:i,i:n});else if(o.config.stroke.fill.type==="solid")$=o.globals.stroke.colors[i];else{var X=o.config.fill;o.config.fill=o.config.stroke.fill,$=d.fillPath({seriesNumber:i,i:n}),o.config.fill=X}for(var K=0;K<a.linePaths.length;K++){var ie=$;t==="rangeArea"&&(ie=d.fillPath({seriesNumber:i}));var ee=Xt(Xt({},E),{},{pathFrom:a.pathFromLine,pathTo:a.linePaths[K],stroke:$,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:t==="rangeArea"?ie:"none"}),le=r.renderPaths(ee);if(this.elSeries.add(le),le.attr("fill-rule","evenodd"),g.count>0&&t!=="rangeArea"){var te=r.renderPaths(ee);te.node.setAttribute("stroke-dasharray",g.dashArray),g.strokeWidth&&te.node.setAttribute("stroke-width",g.strokeWidth),this.elSeries.add(te),te.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),le.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t,i,n=this,a=e.type,o=e.series,r=e.iterations,d=e.realIndex,g=e.translationsIndex,x=e.i,v=e.x,k=e.y,E=e.pX,F=e.pY,O=e.pathsFrom,N=e.linePaths,$=e.areaPaths,X=e.seriesIndex,K=e.lineYPosition,ie=e.xArrj,ee=e.yArrj,le=e.y2Arrj,te=e.isRangeStart,he=e.seriesRangeEnd,de=this.w,ke=new Lt(this.ctx),De=this.yRatio,Ae=O.prevY,$e=O.linePath,et=O.areaPath,Ie=O.pathFromLine,at=O.pathFromArea,qe=Je.isNumber(de.globals.minYArr[d])?de.globals.minYArr[d]:de.globals.minY;r||(r=de.globals.dataPoints>1?de.globals.dataPoints-1:de.globals.dataPoints);var kt=function(Pi,Fi){return Fi-Pi/De[g]+2*(n.isReversed?Pi/De[g]:0)},vt=k,He=de.config.chart.stacked&&!de.globals.comboCharts||de.config.chart.stacked&&de.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[d])===null||t===void 0?void 0:t.type)==="bar"||((i=this.w.config.series[d])===null||i===void 0?void 0:i.type)==="column"),Nt=de.config.stroke.curve;Array.isArray(Nt)&&(Nt=Array.isArray(X)?Nt[X[x]]:Nt[x]);for(var Qt,Ai=0,jt=0;jt<r&&o[x].length!==0;jt++){var ui=o[x][jt+1]===void 0||o[x][jt+1]===null;if(de.globals.isXNumeric){var Ct=de.globals.seriesX[d][jt+1];de.globals.seriesX[d][jt+1]===void 0&&(Ct=de.globals.seriesX[d][r-1]),v=(Ct-de.globals.minX)/this.xRatio}else v+=this.xDivision;He?x>0&&de.globals.collapsedSeries.length<de.config.series.length-1?K=this.prevSeriesY[(function(Pi){for(var Fi=Pi;Fi>0;Fi--){if(!(de.globals.collapsedSeriesIndices.indexOf(X?.[Fi]||Fi)>-1))return Fi;Fi--}return 0})(x-1)][jt+1]:K=this.zeroY:K=this.zeroY,ui?k=kt(qe,K):(k=kt(o[x][jt+1],K),a==="rangeArea"&&(vt=kt(he[x][jt+1],K))),ie.push(o[x][jt+1]===null?null:v),!ui||de.config.stroke.curve!=="smooth"&&de.config.stroke.curve!=="monotoneCubic"?(ee.push(k),le.push(vt)):(ee.push(null),le.push(null));var ri=this.lineHelpers.calculatePoints({series:o,x:v,y:k,realIndex:d,i:x,j:jt,prevY:Ae}),Zt=this._createPaths({type:a,series:o,i:x,realIndex:d,j:jt,x:v,y:k,y2:vt,xArrj:ie,yArrj:ee,y2Arrj:le,pX:E,pY:F,pathState:Ai,segmentStartX:Qt,linePath:$e,areaPath:et,linePaths:N,areaPaths:$,curve:Nt,isRangeStart:te});$=Zt.areaPaths,N=Zt.linePaths,E=Zt.pX,F=Zt.pY,Ai=Zt.pathState,Qt=Zt.segmentStartX,et=Zt.areaPath,$e=Zt.linePath,!this.appendPathFrom||de.globals.hasNullValues||Nt==="monotoneCubic"&&a==="rangeArea"||(Ie+=ke.line(v,this.areaBottomY),at+=ke.line(v,this.areaBottomY)),this.handleNullDataPoints(o,ri,x,jt,d),this._handleMarkersAndLabels({type:a,pointsPos:ri,i:x,j:jt,realIndex:d,isRangeStart:te})}return{yArrj:ee,xArrj:ie,pathFromArea:at,areaPaths:$,pathFromLine:Ie,linePaths:N,linePath:$e,areaPath:et}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,i=e.pointsPos,n=e.isRangeStart,a=e.i,o=e.j,r=e.realIndex,d=this.w,g=new $f(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,o,{realIndex:r,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{d.globals.series[a].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var x=this.markers.plotChartMarkers({pointsPos:i,seriesIndex:r,j:o+1});x!==null&&this.elPointsMain.add(x)}var v=g.drawDataLabel({type:t,isRangeStart:n,pos:i,i:r,j:o+1});v!==null&&this.elDataLabelsWrap.add(v)}},{key:"_createPaths",value:function(e){var t=e.type,i=e.series,n=e.i;e.realIndex;var a,o=e.j,r=e.x,d=e.y,g=e.xArrj,x=e.yArrj,v=e.y2,k=e.y2Arrj,E=e.pX,F=e.pY,O=e.pathState,N=e.segmentStartX,$=e.linePath,X=e.areaPath,K=e.linePaths,ie=e.areaPaths,ee=e.curve,le=e.isRangeStart,te=new Lt(this.ctx),he=this.areaBottomY,de=t==="rangeArea",ke=t==="rangeArea"&&le;switch(ee){case"monotoneCubic":var De=le?x:k;switch(O){case 0:if(De[o+1]===null)break;O=1;case 1:if(!(de?g.length===i[n].length:o===i[n].length-2))break;case 2:var Ae=le?g:g.slice().reverse(),$e=le?De:De.slice().reverse(),et=(a=$e,Ae.map((function(Ct,ri){return[Ct,a[ri]]})).filter((function(Ct){return Ct[1]!==null}))),Ie=et.length>1?qN(et):et,at=[];de&&(ke?ie=et:at=ie.reverse());var qe=0,kt=0;if((function(Ct,ri){for(var Zt=(function(en){var qt=[],Ti=0;return en.forEach((function(tn){tn!==null?Ti++:Ti>0&&(qt.push(Ti),Ti=0)})),Ti>0&&qt.push(Ti),qt})(Ct),Pi=[],Fi=0,Li=0;Fi<Zt.length;Li+=Zt[Fi++])Pi[Fi]=ZN(ri,Li,Li+Zt[Fi]);return Pi})($e,Ie).forEach((function(Ct){qe++;var ri=(function(Fi){for(var Li="",en=0;en<Fi.length;en++){var qt=Fi[en],Ti=qt.length;Ti>4?(Li+="C".concat(qt[0],", ").concat(qt[1]),Li+=", ".concat(qt[2],", ").concat(qt[3]),Li+=", ".concat(qt[4],", ").concat(qt[5])):Ti>2&&(Li+="S".concat(qt[0],", ").concat(qt[1]),Li+=", ".concat(qt[2],", ").concat(qt[3]))}return Li})(Ct),Zt=kt,Pi=(kt+=Ct.length)-1;ke?$=te.move(et[Zt][0],et[Zt][1])+ri:de?$=te.move(at[Zt][0],at[Zt][1])+te.line(et[Zt][0],et[Zt][1])+ri+te.line(at[Pi][0],at[Pi][1]):($=te.move(et[Zt][0],et[Zt][1])+ri,X=$+te.line(et[Pi][0],he)+te.line(et[Zt][0],he)+"z",ie.push(X)),K.push($)})),de&&qe>1&&!ke){var vt=K.slice(qe).reverse();K.splice(qe),vt.forEach((function(Ct){return K.push(Ct)}))}O=0}break;case"smooth":var He=.35*(r-E);if(i[n][o]===null)O=0;else switch(O){case 0:if(N=E,$=ke?te.move(E,k[o])+te.line(E,F):te.move(E,F),X=te.move(E,F),i[n][o+1]===null||i[n][o+1]===void 0){K.push($),ie.push(X);break}if(O=1,o<i[n].length-2){var Nt=te.curve(E+He,F,r-He,d,r,d);$+=Nt,X+=Nt;break}case 1:if(i[n][o+1]===null)$+=ke?te.line(E,v):te.move(E,F),X+=te.line(E,he)+te.line(N,he)+"z",K.push($),ie.push(X),O=-1;else{var Qt=te.curve(E+He,F,r-He,d,r,d);$+=Qt,X+=Qt,o>=i[n].length-2&&(ke&&($+=te.curve(r,d,r,d,r,v)+te.move(r,v)),X+=te.curve(r,d,r,d,r,he)+te.line(N,he)+"z",K.push($),ie.push(X),O=-1)}}E=r,F=d;break;default:var Ai=function(Ct,ri,Zt){var Pi=[];switch(Ct){case"stepline":Pi=te.line(ri,null,"H")+te.line(null,Zt,"V");break;case"linestep":Pi=te.line(null,Zt,"V")+te.line(ri,null,"H");break;case"straight":Pi=te.line(ri,Zt)}return Pi};if(i[n][o]===null)O=0;else switch(O){case 0:if(N=E,$=ke?te.move(E,k[o])+te.line(E,F):te.move(E,F),X=te.move(E,F),i[n][o+1]===null||i[n][o+1]===void 0){K.push($),ie.push(X);break}if(O=1,o<i[n].length-2){var jt=Ai(ee,r,d);$+=jt,X+=jt;break}case 1:if(i[n][o+1]===null)$+=ke?te.line(E,v):te.move(E,F),X+=te.line(E,he)+te.line(N,he)+"z",K.push($),ie.push(X),O=-1;else{var ui=Ai(ee,r,d);$+=ui,X+=ui,o>=i[n].length-2&&(ke&&($+=te.line(r,v)),X+=te.line(r,he)+te.line(N,he)+"z",K.push($),ie.push(X),O=-1)}}E=r,F=d}return{linePaths:K,areaPaths:ie,pX:E,pY:F,pathState:O,segmentStartX:N,linePath:$,areaPath:X}}},{key:"handleNullDataPoints",value:function(e,t,i,n,a){var o=this.w;if(e[i][n]===null&&o.config.markers.showNullDataPoints||e[i].length===1){var r=this.strokeWidth-o.config.markers.strokeWidth/2;r>0||(r=0);var d=this.markers.plotChartMarkers({pointsPos:t,seriesIndex:a,j:n+1,pSize:r,alwaysDrawMarker:!0});d!==null&&this.elPointsMain.add(d)}}}]),s})();window.TreemapSquared={},window.TreemapSquared.generate=(function(){function s(r,d,g,x){this.xoffset=r,this.yoffset=d,this.height=x,this.width=g,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(v){var k,E=[],F=this.xoffset,O=this.yoffset,N=a(v)/this.height,$=a(v)/this.width;if(this.width>=this.height)for(k=0;k<v.length;k++)E.push([F,O,F+N,O+v[k]/N]),O+=v[k]/N;else for(k=0;k<v.length;k++)E.push([F,O,F+v[k]/$,O+$]),F+=v[k]/$;return E},this.cutArea=function(v){var k;if(this.width>=this.height){var E=v/this.height,F=this.width-E;k=new s(this.xoffset+E,this.yoffset,F,this.height)}else{var O=v/this.width,N=this.height-O;k=new s(this.xoffset,this.yoffset+O,this.width,N)}return k}}function e(r,d,g,x,v){x=x===void 0?0:x,v=v===void 0?0:v;var k=t((function(E,F){var O,N=[],$=F/a(E);for(O=0;O<E.length;O++)N[O]=E[O]*$;return N})(r,d*g),[],new s(x,v,d,g),[]);return(function(E){var F,O,N=[];for(F=0;F<E.length;F++)for(O=0;O<E[F].length;O++)N.push(E[F][O]);return N})(k)}function t(r,d,g,x){var v,k,E;if(r.length!==0)return v=g.shortestEdge(),(function(F,O,N){var $;if(F.length===0)return!0;($=F.slice()).push(O);var X=i(F,N),K=i($,N);return X>=K})(d,k=r[0],v)?(d.push(k),t(r.slice(1),d,g,x)):(E=g.cutArea(a(d),x),x.push(g.getCoordinates(d)),t(r,[],E,x)),x;x.push(g.getCoordinates(d))}function i(r,d){var g=Math.min.apply(Math,r),x=Math.max.apply(Math,r),v=a(r);return Math.max(Math.pow(d,2)*x/Math.pow(v,2),Math.pow(v,2)/(Math.pow(d,2)*g))}function n(r){return r&&r.constructor===Array}function a(r){var d,g=0;for(d=0;d<r.length;d++)g+=r[d];return g}function o(r){var d,g=0;if(n(r[0]))for(d=0;d<r.length;d++)g+=o(r[d]);else g=a(r);return g}return function r(d,g,x,v,k){v=v===void 0?0:v,k=k===void 0?0:k;var E,F,O=[],N=[];if(n(d[0])){for(F=0;F<d.length;F++)O[F]=o(d[F]);for(E=e(O,g,x,v,k),F=0;F<d.length;F++)N.push(r(d[F],E[F][2]-E[F][0],E[F][3]-E[F][1],E[F][0],E[F][1]))}else N=e(d,g,x,v,k);return N}})();var KN=(function(){function s(e,t){li(this,s),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new CI(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return ci(s,[{key:"draw",value:function(e){var t=this,i=this.w,n=new Lt(this.ctx),a=new vl(this.ctx),o=n.group({class:"apexcharts-treemap"});if(i.globals.noData)return o;var r=[];return e.forEach((function(d){var g=d.map((function(x){return Math.abs(x)}));r.push(g)})),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach((function(d,g){d.data.forEach((function(x){Array.isArray(t.labels[g])||(t.labels[g]=[]),t.labels[g].push(x.x)}))})),window.TreemapSquared.generate(r,i.globals.gridWidth,i.globals.gridHeight).forEach((function(d,g){var x=n.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:Je.escapeString(i.globals.seriesNames[g]),rel:g+1,"data:realIndex":g});if(i.config.chart.dropShadow.enabled){var v=i.config.chart.dropShadow;new ls(t.ctx).dropShadow(o,v,g)}var k=n.group({class:"apexcharts-data-labels"}),E={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0};d.forEach((function(Ie,at){var qe=Ie[0],kt=Ie[1],vt=Ie[2],He=Ie[3];E.xMin=Math.min(E.xMin,qe),E.yMin=Math.min(E.yMin,kt),E.xMax=Math.max(E.xMax,vt),E.yMax=Math.max(E.yMax,He);var Nt=t.helpers.getShadeColor(i.config.chart.type,g,at,t.negRange),Qt=Nt.color,Ai=a.fillPath({color:Qt,seriesNumber:g,dataPointIndex:at}),jt=n.drawRect(qe,kt,vt-qe,He-kt,i.config.plotOptions.treemap.borderRadius,"#fff",1,t.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?Qt:i.globals.stroke.colors[g]);jt.attr({cx:qe,cy:kt,index:g,i:g,j:at,width:vt-qe,height:He-kt,fill:Ai}),jt.node.classList.add("apexcharts-treemap-rect"),t.helpers.addListeners(jt);var ui={x:qe+(vt-qe)/2,y:kt+(He-kt)/2,width:0,height:0},Ct={x:qe,y:kt,width:vt-qe,height:He-kt};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var ri=1;i.globals.resized||(ri=i.config.chart.animations.speed),t.animateTreemap(jt,ui,Ct,ri)}if(i.globals.dataChanged){var Zt=1;t.dynamicAnim.enabled&&i.globals.shouldAnimate&&(Zt=t.dynamicAnim.speed,i.globals.previousPaths[g]&&i.globals.previousPaths[g][at]&&i.globals.previousPaths[g][at].rect&&(ui=i.globals.previousPaths[g][at].rect),t.animateTreemap(jt,ui,Ct,Zt))}var Pi=t.getFontSize(Ie),Fi=i.config.dataLabels.formatter(t.labels[g][at],{value:i.globals.series[g][at],seriesIndex:g,dataPointIndex:at,w:i});i.config.plotOptions.treemap.dataLabels.format==="truncate"&&(Pi=parseInt(i.config.dataLabels.style.fontSize,10),Fi=t.truncateLabels(Fi,Pi,qe,kt,vt,He));var Li=null;i.globals.series[g][at]&&(Li=t.helpers.calculateDataLabels({text:Fi,x:(qe+vt)/2,y:(kt+He)/2+t.strokeWidth/2+Pi/3,i:g,j:at,colorProps:Nt,fontSize:Pi,series:e})),i.config.dataLabels.enabled&&Li&&t.rotateToFitLabel(Li,Pi,Fi,qe,kt,vt,He),x.add(jt),Li!==null&&x.add(Li)}));var F=i.config.plotOptions.treemap.seriesTitle;if(i.config.series.length>1&&F&&F.show){var O=i.config.series[g].name||"";if(O&&E.xMin<1/0&&E.yMin<1/0){var N=F.offsetX,$=F.offsetY,X=F.borderColor,K=F.borderWidth,ie=F.borderRadius,ee=F.style,le=ee.color||i.config.chart.foreColor,te={left:ee.padding.left,right:ee.padding.right,top:ee.padding.top,bottom:ee.padding.bottom},he=n.getTextRects(O,ee.fontSize,ee.fontFamily),de=he.width+te.left+te.right,ke=he.height+te.top+te.bottom,De=E.xMin+(N||0),Ae=E.yMin+($||0),$e=n.drawRect(De,Ae,de,ke,ie,ee.background,1,K,X),et=n.drawText({x:De+te.left,y:Ae+te.top+.75*he.height,text:O,fontSize:ee.fontSize,fontFamily:ee.fontFamily,fontWeight:ee.fontWeight,foreColor:le,cssClass:ee.cssClass||""});x.add($e),x.add(et)}}x.add(k),o.add(x)})),o}},{key:"getFontSize",value:function(e){var t=this.w,i=(function n(a){var o,r=0;if(Array.isArray(a[0]))for(o=0;o<a.length;o++)r+=n(a[o]);else for(o=0;o<a.length;o++)r+=a[o].length;return r})(this.labels)/(function n(a){var o,r=0;if(Array.isArray(a[0]))for(o=0;o<a.length;o++)r+=n(a[o]);else for(o=0;o<a.length;o++)r+=1;return r})(this.labels);return(function(n,a){var o=n*a,r=Math.pow(o,.5);return Math.min(r/i,parseInt(t.config.dataLabels.style.fontSize,10))})(e[2]-e[0],e[3]-e[1])}},{key:"rotateToFitLabel",value:function(e,t,i,n,a,o,r){var d=new Lt(this.ctx),g=d.getTextRects(i,t);if(g.width+this.w.config.stroke.width+5>o-n&&g.width<=r-a){var x=d.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(x.x," ").concat(x.y,") translate(").concat(g.height/3,")"))}}},{key:"truncateLabels",value:function(e,t,i,n,a,o){var r=new Lt(this.ctx),d=r.getTextRects(e,t).width+this.w.config.stroke.width+5>a-i&&o-n>a-i?o-n:a-i,g=r.getTextBasedOnMaxWidth({text:e,maxWidth:d,fontSize:t});return e.length!==g.length&&d/t<5?"":g}},{key:"animateTreemap",value:function(e,t,i,n){var a=new Zf(this.ctx);a.animateRect(e,t,i,n,(function(){a.animationCompleted(e)}))}}]),s})(),EI=86400,QN=10/EI,JN=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return ci(s,[{key:"calculateTimeScaleTicks",value:function(e,t){var i=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var a=new ss(this.ctx),o=(t-e)/864e5;this.determineInterval(o),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,o<QN?n.globals.disableZoomIn=!0:o>5e4&&(n.globals.disableZoomOut=!0);var r=a.getTimeUnitsfromTimestamp(e,t,this.utc),d=n.globals.gridWidth/o,g=d/24,x=g/60,v=x/60,k=Math.floor(24*o),E=Math.floor(1440*o),F=Math.floor(o*EI),O=Math.floor(o),N=Math.floor(o/30),$=Math.floor(o/365),X={minMillisecond:r.minMillisecond,minSecond:r.minSecond,minMinute:r.minMinute,minHour:r.minHour,minDate:r.minDate,minMonth:r.minMonth,minYear:r.minYear},K={firstVal:X,currentMillisecond:X.minMillisecond,currentSecond:X.minSecond,currentMinute:X.minMinute,currentHour:X.minHour,currentMonthDate:X.minDate,currentDate:X.minDate,currentMonth:X.minMonth,currentYear:X.minYear,daysWidthOnXAxis:d,hoursWidthOnXAxis:g,minutesWidthOnXAxis:x,secondsWidthOnXAxis:v,numberOfSeconds:F,numberOfMinutes:E,numberOfHours:k,numberOfDays:O,numberOfMonths:N,numberOfYears:$};switch(this.tickInterval){case"years":this.generateYearScale(K);break;case"months":case"half_year":this.generateMonthScale(K);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(K);break;case"hours":this.generateHourScale(K);break;case"minutes_fives":case"minutes":this.generateMinuteScale(K);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(K)}var ie=this.timeScaleArray.map((function(ee){var le={position:ee.position,unit:ee.unit,year:ee.year,day:ee.day?ee.day:1,hour:ee.hour?ee.hour:0,month:ee.month+1};return ee.unit==="month"?Xt(Xt({},le),{},{day:1,value:ee.value+1}):ee.unit==="day"||ee.unit==="hour"?Xt(Xt({},le),{},{value:ee.value}):ee.unit==="minute"?Xt(Xt({},le),{},{value:ee.value,minute:ee.value}):ee.unit==="second"?Xt(Xt({},le),{},{value:ee.value,minute:ee.minute,second:ee.second}):ee}));return ie.filter((function(ee){var le=1,te=Math.ceil(n.globals.gridWidth/120),he=ee.value;n.config.xaxis.tickAmount!==void 0&&(te=n.config.xaxis.tickAmount),ie.length>te&&(le=Math.floor(ie.length/te));var de=!1,ke=!1;switch(i.tickInterval){case"years":ee.unit==="year"&&(de=!0);break;case"half_year":le=7,ee.unit==="year"&&(de=!0);break;case"months":le=1,ee.unit==="year"&&(de=!0);break;case"months_fortnight":le=15,ee.unit!=="year"&&ee.unit!=="month"||(de=!0),he===30&&(ke=!0);break;case"months_days":le=10,ee.unit==="month"&&(de=!0),he===30&&(ke=!0);break;case"week_days":le=8,ee.unit==="month"&&(de=!0);break;case"days":le=1,ee.unit==="month"&&(de=!0);break;case"hours":ee.unit==="day"&&(de=!0);break;case"minutes_fives":case"seconds_fives":he%5!=0&&(ke=!0);break;case"seconds_tens":he%10!=0&&(ke=!0)}if(i.tickInterval==="hours"||i.tickInterval==="minutes_fives"||i.tickInterval==="seconds_tens"||i.tickInterval==="seconds_fives"){if(!ke)return!0}else if((he%le==0||de)&&!ke)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var i=this.w,n=this.formatDates(e),a=this.removeOverlappingTS(n);i.globals.timescaleLabels=a.slice(),new nx(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,i=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,i=e.currentMonth,n=e.currentYear,a=e.daysWidthOnXAxis,o=e.numberOfYears,r=t.minYear,d=0,g=new ss(this.ctx),x="year";if(t.minDate>1||t.minMonth>0){var v=g.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);d=(g.determineDaysOfYear(t.minYear)-v+1)*a,r=t.minYear+1,this.timeScaleArray.push({position:d,value:r,unit:x,year:r,month:Je.monthMod(i+1)})}else t.minDate===1&&t.minMonth===0&&this.timeScaleArray.push({position:d,value:r,unit:x,year:n,month:Je.monthMod(i+1)});for(var k=r,E=d,F=0;F<o;F++)k++,E=g.determineDaysOfYear(k-1)*a+E,this.timeScaleArray.push({position:E,value:k,unit:x,year:k,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,i=e.currentMonthDate,n=e.currentMonth,a=e.currentYear,o=e.daysWidthOnXAxis,r=e.numberOfMonths,d=n,g=0,x=new ss(this.ctx),v="month",k=0;if(t.minDate>1){g=(x.determineDaysOfMonths(n+1,t.minYear)-i+1)*o,d=Je.monthMod(n+1);var E=a+k,F=Je.monthMod(d),O=d;d===0&&(v="year",O=E,F=1,E+=k+=1),this.timeScaleArray.push({position:g,value:O,unit:v,year:E,month:F})}else this.timeScaleArray.push({position:g,value:d,unit:v,year:a,month:Je.monthMod(n)});for(var N=d+1,$=g,X=0,K=1;X<r;X++,K++){(N=Je.monthMod(N))===0?(v="year",k+=1):v="month";var ie=this._getYear(a,N,k);$=x.determineDaysOfMonths(N,ie)*o+$;var ee=N===0?ie:N;this.timeScaleArray.push({position:$,value:ee,unit:v,year:ie,month:N===0?1:N}),N++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,i=e.currentMonth,n=e.currentYear,a=e.hoursWidthOnXAxis,o=e.numberOfDays,r=new ss(this.ctx),d="day",g=t.minDate+1,x=g,v=function(K,ie,ee){return K>r.determineDaysOfMonths(ie+1,ee)&&(x=1,d="month",E=ie+=1),ie},k=(24-t.minHour)*a,E=g,F=v(x,i,n);t.minHour===0&&t.minDate===1?(k=0,E=Je.monthMod(t.minMonth),d="month",x=t.minDate):t.minDate!==1&&t.minHour===0&&t.minMinute===0&&(k=0,g=t.minDate,E=g,F=v(x=g,i,n),E!==1&&(d="day")),this.timeScaleArray.push({position:k,value:E,unit:d,year:this._getYear(n,F,0),month:Je.monthMod(F),day:x});for(var O=k,N=0;N<o;N++){d="day",F=v(x+=1,F,this._getYear(n,F,0));var $=this._getYear(n,F,0);O=24*a+O;var X=x===1?Je.monthMod(F):x;this.timeScaleArray.push({position:O,value:X,unit:d,year:$,month:Je.monthMod(F),day:X})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,i=e.currentDate,n=e.currentMonth,a=e.currentYear,o=e.minutesWidthOnXAxis,r=e.numberOfHours,d=new ss(this.ctx),g="hour",x=function(le,te){return le>d.determineDaysOfMonths(te+1,a)&&(N=1,te+=1),{month:te,date:N}},v=function(le,te){return le>d.determineDaysOfMonths(te+1,a)?te+=1:te},k=60-(t.minMinute+t.minSecond/60),E=k*o,F=t.minHour+1,O=F;k===60&&(E=0,O=F=t.minHour);var N=i;O>=24&&(O=0,g="day",F=N+=1);var $=x(N,n).month;$=v(N,$),F>31&&(F=N=1),this.timeScaleArray.push({position:E,value:F,unit:g,day:N,hour:O,year:a,month:Je.monthMod($)}),O++;for(var X=E,K=0;K<r;K++){g="hour",O>=24&&(O=0,g="day",$=x(N+=1,$).month,$=v(N,$));var ie=this._getYear(a,$,0);X=60*o+X;var ee=O===0?N:O;this.timeScaleArray.push({position:X,value:ee,unit:g,hour:O,day:N,year:ie,month:Je.monthMod($)}),O++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,n=e.currentMinute,a=e.currentHour,o=e.currentDate,r=e.currentMonth,d=e.currentYear,g=e.minutesWidthOnXAxis,x=e.secondsWidthOnXAxis,v=e.numberOfMinutes,k=n+1,E=o,F=r,O=d,N=a,$=(60-i-t/1e3)*x,X=0;X<v;X++)k>=60&&(k=0,(N+=1)===24&&(N=0)),this.timeScaleArray.push({position:$,value:k,unit:"minute",hour:N,minute:k,day:E,year:this._getYear(O,F,0),month:Je.monthMod(F)}),$+=g,k++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,n=e.currentMinute,a=e.currentHour,o=e.currentDate,r=e.currentMonth,d=e.currentYear,g=e.secondsWidthOnXAxis,x=e.numberOfSeconds,v=i+1,k=n,E=o,F=r,O=d,N=a,$=(1e3-t)/1e3*g,X=0;X<x;X++)v>=60&&(v=0,++k>=60&&(k=0,++N===24&&(N=0))),this.timeScaleArray.push({position:$,value:v,unit:"second",hour:N,minute:k,second:v,day:E,year:this._getYear(O,F,0),month:Je.monthMod(F)}),$+=g,v++}},{key:"createRawDateString",value:function(e,t){var i=e.year;return e.month===0&&(e.month=1),i+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?i+=e.unit==="day"?"-"+("0"+t).slice(-2):"-01":i+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?i+=e.unit==="hour"?"T"+("0"+t).slice(-2):"T00":i+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?i+=":"+("0"+t).slice(-2):i+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?i+=":"+("0"+t).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(e){var t=this,i=this.w;return e.map((function(n){var a=n.value.toString(),o=new ss(t.ctx),r=t.createRawDateString(n,a),d=o.getDate(o.parseDate(r));if(t.utc||(d=o.getDate(o.parseDateWithTimezone(r))),i.config.xaxis.labels.format===void 0){var g="dd MMM",x=i.config.xaxis.labels.datetimeFormatter;n.unit==="year"&&(g=x.year),n.unit==="month"&&(g=x.month),n.unit==="day"&&(g=x.day),n.unit==="hour"&&(g=x.hour),n.unit==="minute"&&(g=x.minute),n.unit==="second"&&(g=x.second),a=o.formatDate(d,g)}else a=o.formatDate(d,i.config.xaxis.labels.format);return{dateString:r,position:n.position,value:a,unit:n.unit,year:n.year,month:n.month}}))}},{key:"removeOverlappingTS",value:function(e){var t,i=this,n=new Lt(this.ctx),a=!1;e.length>0&&e[0].value&&e.every((function(d){return d.value.length===e[0].value.length}))&&(a=!0,t=n.getTextRects(e[0].value).width);var o=0,r=e.map((function(d,g){if(g>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var x=a?t:n.getTextRects(e[o].value).width,v=e[o].position;return d.position>v+x+10?(o=g,d):null}return d}));return r=r.filter((function(d){return d!==null}))}},{key:"_getYear",value:function(e,t,i){return e+Math.floor(t/12)+i}}]),s})(),e8=(function(){function s(e,t){li(this,s),this.ctx=t,this.w=t.w,this.el=e}return ci(s,[{key:"setupElements",value:function(){var e=this.w,t=e.globals,i=e.config,n=i.chart.type;t.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(n),t.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(n),t.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(n)&&i.plotOptions.bar.horizontal,t.chartClass=".apexcharts".concat(t.chartID),t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),Lt.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas ".concat(t.chartClass.substring(1))}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=window.SVG().addTo(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(i.chart.offsetX,", ").concat(i.chart.offsetY,")")}),t.dom.Paper.node.style.background=i.theme.mode!=="dark"||i.chart.background?i.theme.mode!=="light"||i.chart.background?i.chart.background:"#fff":"#343A3F",this.setSVGDimensions(),t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject"),Lt.setAttrs(t.dom.elLegendForeign,{x:0,y:0,width:t.svgWidth,height:t.svgHeight}),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.node.appendChild(t.dom.elLegendForeign),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var i=this.w,n=this.ctx,a=i.config,o=i.globals,r={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},bar:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},d=a.chart.type||"line",g=null,x=0;o.series.forEach((function(le,te){var he,de,ke=((he=e[te])===null||he===void 0?void 0:he.type)==="column"?"bar":((de=e[te])===null||de===void 0?void 0:de.type)||(d==="column"?"bar":d);r[ke]?(ke==="rangeArea"?(r[ke].series.push(o.seriesRangeStart[te]),r[ke].seriesRangeEnd.push(o.seriesRangeEnd[te])):r[ke].series.push(le),r[ke].i.push(te),ke==="bar"&&(i.globals.columnSeries=r.bar)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(ke)?g=ke:console.warn("You have specified an unrecognized series type (".concat(ke,").")),d!==ke&&ke!=="scatter"&&x++})),x>0&&(g&&console.warn("Chart or series type ".concat(g," cannot appear with other chart or series types.")),r.bar.series.length>0&&a.plotOptions.bar.horizontal&&(x-=r.bar.series.length,r.bar={series:[],i:[]},i.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),o.comboCharts||(o.comboCharts=x>0);var v=new U1(n,t),k=new V1(n,t);n.pie=new TI(n);var E=new WN(n);n.rangeBar=new $N(n,t);var F=new GN(n),O=[];if(o.comboCharts){var N,$,X=new or(n);if(r.area.series.length>0&&(N=O).push.apply(N,Hr(X.drawSeriesByGroup(r.area,o.areaGroups,"area",v))),r.bar.series.length>0)if(a.chart.stacked){var K=new IA(n,t);O.push(K.draw(r.bar.series,r.bar.i))}else n.bar=new Xf(n,t),O.push(n.bar.draw(r.bar.series,r.bar.i));if(r.rangeArea.series.length>0&&O.push(v.draw(r.rangeArea.series,"rangeArea",r.rangeArea.i,r.rangeArea.seriesRangeEnd)),r.line.series.length>0&&($=O).push.apply($,Hr(X.drawSeriesByGroup(r.line,o.lineGroups,"line",v))),r.candlestick.series.length>0&&O.push(k.draw(r.candlestick.series,"candlestick",r.candlestick.i)),r.boxPlot.series.length>0&&O.push(k.draw(r.boxPlot.series,"boxPlot",r.boxPlot.i)),r.rangeBar.series.length>0&&O.push(n.rangeBar.draw(r.rangeBar.series,r.rangeBar.i)),r.scatter.series.length>0){var ie=new U1(n,t,!0);O.push(ie.draw(r.scatter.series,"scatter",r.scatter.i))}if(r.bubble.series.length>0){var ee=new U1(n,t,!0);O.push(ee.draw(r.bubble.series,"bubble",r.bubble.i))}}else switch(a.chart.type){case"line":O=v.draw(o.series,"line");break;case"area":O=v.draw(o.series,"area");break;case"bar":a.chart.stacked?O=new IA(n,t).draw(o.series):(n.bar=new Xf(n,t),O=n.bar.draw(o.series));break;case"candlestick":O=new V1(n,t).draw(o.series,"candlestick");break;case"boxPlot":O=new V1(n,t).draw(o.series,a.chart.type);break;case"rangeBar":O=n.rangeBar.draw(o.series);break;case"rangeArea":O=v.draw(o.seriesRangeStart,"rangeArea",void 0,o.seriesRangeEnd);break;case"heatmap":O=new UN(n,t).draw(o.series);break;case"treemap":O=new KN(n,t).draw(o.series);break;case"pie":case"donut":case"polarArea":O=n.pie.draw(o.series);break;case"radialBar":O=E.draw(o.series);break;case"radar":O=F.draw(o.series);break;default:O=v.draw(o.series)}return O}},{key:"setSVGDimensions",value:function(){var e=this.w,t=e.globals,i=e.config;i.chart.width=i.chart.width||"100%",i.chart.height=i.chart.height||"auto",t.svgWidth=i.chart.width,t.svgHeight=i.chart.height;var n=Je.getDimensions(this.el),a=i.chart.width.toString().split(/[0-9]+/g).pop();a==="%"?Je.isNumber(n[0])&&(n[0].width===0&&(n=Je.getDimensions(this.el.parentNode)),t.svgWidth=n[0]*parseInt(i.chart.width,10)/100):a!=="px"&&a!==""||(t.svgWidth=parseInt(i.chart.width,10));var o=String(i.chart.height).toString().split(/[0-9]+/g).pop();if(t.svgHeight!=="auto"&&t.svgHeight!=="")if(o==="%"){var r=Je.getDimensions(this.el.parentNode);t.svgHeight=r[1]*parseInt(i.chart.height,10)/100}else t.svgHeight=parseInt(i.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;if(t.svgWidth=Math.max(t.svgWidth,0),t.svgHeight=Math.max(t.svgHeight,0),Lt.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),o!=="%"){var d=i.chart.sparkline.enabled?0:t.axisCharts?i.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(t.svgHeight+d,"px")}t.dom.elWrap.style.width="".concat(t.svgWidth,"px"),t.dom.elWrap.style.height="".concat(t.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,i=e.translateX;Lt.setAttrs(e.dom.elGraphical.node,{transform:"translate(".concat(i,", ").concat(t,")")})}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=0,n=e.config.chart.sparkline.enabled?1:15;n+=e.config.grid.padding.bottom,["top","bottom"].includes(e.config.legend.position)&&e.config.legend.show&&!e.config.legend.floating&&(i=new bI(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var a=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),o=2.05*e.globals.radialSize;if(a&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){var r=Je.getBoundingClientRect(a);o=r.bottom;var d=r.bottom-r.top;o=Math.max(2.05*e.globals.radialSize,d)}var g=Math.ceil(o+t.translateY+i+n);t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",g),e.config.chart.height&&String(e.config.chart.height).includes("%")||(t.dom.elWrap.style.height="".concat(g,"px"),Lt.setAttrs(t.dom.Paper.node,{height:g}),t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(g,"px"))}},{key:"coreCalculations",value:function(){new Gv(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map((function(){return[]}))},i=new mI,n=this.w.globals,a={dataWasParsed:n.dataWasParsed,originalSeries:n.originalSeries};i.initGlobalVars(n),n.seriesXvalues=t(),n.seriesYvalues=t(),a.dataWasParsed&&(n.dataWasParsed=a.dataWasParsed,n.originalSeries=a.originalSeries)}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var e=this.w,t=null;if(e.globals.axisCharts){if(e.config.xaxis.crosshairs.position==="back"&&new Wv(this.ctx).drawXCrosshairs(),e.config.yaxis[0].crosshairs.position==="back"&&new Wv(this.ctx).drawYCrosshairs(),e.config.xaxis.type==="datetime"&&e.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new JN(this.ctx);var i=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}t=new or(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.ctx,i=this.w;if(i.config.chart.brush.enabled&&typeof i.config.chart.events.selection!="function"){var n=Array.isArray(i.config.chart.brush.targets)?i.config.chart.brush.targets:[i.config.chart.brush.target];n.forEach((function(a){var o=t.constructor.getChartByID(a);o.w.globals.brushSource=e.ctx,typeof o.w.config.chart.events.zoomed!="function"&&(o.w.config.chart.events.zoomed=function(){return e.updateSourceChart(o)}),typeof o.w.config.chart.events.scrolled!="function"&&(o.w.config.chart.events.scrolled=function(){return e.updateSourceChart(o)})})),i.config.chart.events.selection=function(a,o){n.forEach((function(r){t.constructor.getChartByID(r).ctx.updateHelpers._updateOptions({xaxis:{min:o.xaxis.min,max:o.xaxis.max}},!1,!1,!1,!1)}))}}}}]),s})(),t8=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"_updateOptions",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise((function(r){var d=[t.ctx];a&&(d=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(d=[t.ctx],t.ctx.w.globals.isExecCalled=!1),d.forEach((function(g,x){var v=g.w;if(v.globals.shouldAnimate=n,i||(v.globals.resized=!0,v.globals.dataChanged=!0,n&&g.series.getPreviousPaths()),e&&js(e)==="object"&&(g.config=new pm(e),e=or.extendArrayProps(g.config,e,v),g.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,v.config=Je.extend(v.config,e),o&&(v.globals.lastXAxis=e.xaxis?Je.clone(e.xaxis):[],v.globals.lastYAxis=e.yaxis?Je.clone(e.yaxis):[],v.globals.initialConfig=Je.extend({},v.config),v.globals.initialSeries=Je.clone(v.config.series),e.series))){for(var k=0;k<v.globals.collapsedSeriesIndices.length;k++){var E=v.config.series[v.globals.collapsedSeriesIndices[k]];v.globals.collapsedSeries[k].data=v.globals.axisCharts?E.data.slice():E}for(var F=0;F<v.globals.ancillaryCollapsedSeriesIndices.length;F++){var O=v.config.series[v.globals.ancillaryCollapsedSeriesIndices[F]];v.globals.ancillaryCollapsedSeries[F].data=v.globals.axisCharts?O.data.slice():O}g.series.emptyCollapsedSeries(v.config.series)}return g.update(e).then((function(){x===d.length-1&&r(g)}))}))}))}},{key:"_updateSeries",value:function(e,t){var i=this,n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise((function(a){var o=i.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&i.ctx.series.getPreviousPaths(),i.ctx.data.resetParsingFlags(),i.ctx.data.parseData(e),n&&(o.globals.initialConfig.series=Je.clone(o.config.series),o.globals.initialSeries=Je.clone(o.config.series)),i.ctx.update().then((function(){a(i.ctx)}))}))}},{key:"_extendSeries",value:function(e,t){var i=this.w,n=i.config.series[t];return Xt(Xt({},i.config.series[t]),{},{name:e.name?e.name:n?.name,color:e.color?e.color:n?.color,type:e.type?e.type:n?.type,group:e.group?e.group:n?.group,hidden:e.hidden!==void 0?e.hidden:n?.hidden,data:e.data?e.data:n?.data,zIndex:e.zIndex!==void 0?e.zIndex:t})}},{key:"toggleDataPointSelection",value:function(e,t){var i=this.w,n=null,a=".apexcharts-series[data\\:realIndex='".concat(e,"']");return i.globals.axisCharts?n=i.globals.dom.Paper.findOne("".concat(a," path[j='").concat(t,"'], ").concat(a," circle[j='").concat(t,"'], ").concat(a," rect[j='").concat(t,"']")):t===void 0&&(n=i.globals.dom.Paper.findOne("".concat(a," path[j='").concat(e,"']")),i.config.chart.type!=="pie"&&i.config.chart.type!=="polarArea"&&i.config.chart.type!=="donut"||this.ctx.pie.pieClicked(e)),n?(new Lt(this.ctx).pathMouseDown(n,null),n.node?n.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach((function(n){e.xaxis[n]!==void 0&&(t.config.xaxis[n]=e.xaxis[n],t.globals.lastXAxis[n]=e.xaxis[n])})),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var i=new fm(e);e=i.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach((function(t,i){e.yaxis[i].min=0,e.yaxis[i].max=100})):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,i=this.w,n=i.globals.lastXAxis,a=i.globals.lastYAxis;e&&e.xaxis&&(n=e.xaxis),e&&e.yaxis&&(a=e.yaxis),i.config.xaxis.min=n.min,i.config.xaxis.max=n.max;var o=function(r){a[r]!==void 0&&(i.config.yaxis[r].min=a[r].min,i.config.yaxis[r].max=a[r].max)};i.config.yaxis.map((function(r,d){i.globals.zoomed||a[d]!==void 0?o(d):t.ctx.opts.yaxis[d]!==void 0&&(r.min=t.ctx.opts.yaxis[d].min,r.max=t.ctx.opts.yaxis[d].max)}))}}]),s})();(function(){function s(){for(var a=arguments.length>0&&arguments[0]!==v?arguments[0]:[],o=arguments.length>1?arguments[1]:v,r=arguments.length>2?arguments[2]:v,d=arguments.length>3?arguments[3]:v,g=arguments.length>4?arguments[4]:v,x=arguments.length>5?arguments[5]:v,v=arguments.length>6?arguments[6]:v,k=a.slice(o,r||v),E=d.slice(g,x||v),F=0,O={pos:[0,0],start:[0,0]},N={pos:[0,0],start:[0,0]};k[F]=e.call(O,k[F]),E[F]=e.call(N,E[F]),k[F][0]!=E[F][0]||k[F][0]=="M"||k[F][0]=="A"&&(k[F][4]!=E[F][4]||k[F][5]!=E[F][5])?(Array.prototype.splice.apply(k,[F,1].concat(i.call(O,k[F]))),Array.prototype.splice.apply(E,[F,1].concat(i.call(N,E[F])))):(k[F]=t.call(O,k[F]),E[F]=t.call(N,E[F])),!(++F==k.length&&F==E.length);)F==k.length&&k.push(["C",O.pos[0],O.pos[1],O.pos[0],O.pos[1],O.pos[0],O.pos[1]]),F==E.length&&E.push(["C",N.pos[0],N.pos[1],N.pos[0],N.pos[1],N.pos[0],N.pos[1]]);return{start:k,dest:E}}function e(a){switch(a[0]){case"z":case"Z":a[0]="L",a[1]=this.start[0],a[2]=this.start[1];break;case"H":a[0]="L",a[2]=this.pos[1];break;case"V":a[0]="L",a[2]=a[1],a[1]=this.pos[0];break;case"T":a[0]="Q",a[3]=a[1],a[4]=a[2],a[1]=this.reflection[1],a[2]=this.reflection[0];break;case"S":a[0]="C",a[6]=a[4],a[5]=a[3],a[4]=a[2],a[3]=a[1],a[2]=this.reflection[1],a[1]=this.reflection[0]}return a}function t(a){var o=a.length;return this.pos=[a[o-2],a[o-1]],"SCQT".indexOf(a[0])!=-1&&(this.reflection=[2*this.pos[0]-a[o-4],2*this.pos[1]-a[o-3]]),a}function i(a){var o=[a];switch(a[0]){case"M":return this.pos=this.start=[a[1],a[2]],o;case"L":a[5]=a[3]=a[1],a[6]=a[4]=a[2],a[1]=this.pos[0],a[2]=this.pos[1];break;case"Q":a[6]=a[4],a[5]=a[3],a[4]=1*a[4]/3+2*a[2]/3,a[3]=1*a[3]/3+2*a[1]/3,a[2]=1*this.pos[1]/3+2*a[2]/3,a[1]=1*this.pos[0]/3+2*a[1]/3;break;case"A":o=(function(r,d){var g,x,v,k,E,F,O,N,$,X,K,ie,ee,le,te,he,de,ke,De,Ae,$e,et,Ie,at,qe,kt,vt=Math.abs(d[1]),He=Math.abs(d[2]),Nt=d[3]%360,Qt=d[4],Ai=d[5],jt=d[6],ui=d[7],Ct=new $n(r),ri=new $n(jt,ui),Zt=[];if(vt===0||He===0||Ct.x===ri.x&&Ct.y===ri.y)return[["C",Ct.x,Ct.y,ri.x,ri.y,ri.x,ri.y]];for(g=new $n((Ct.x-ri.x)/2,(Ct.y-ri.y)/2).transform(new Di().rotate(Nt)),x=g.x*g.x/(vt*vt)+g.y*g.y/(He*He),x>1&&(vt*=x=Math.sqrt(x),He*=x),v=new Di().rotate(Nt).scale(1/vt,1/He).rotate(-Nt),Ct=Ct.transform(v),ri=ri.transform(v),k=[ri.x-Ct.x,ri.y-Ct.y],F=k[0]*k[0]+k[1]*k[1],E=Math.sqrt(F),k[0]/=E,k[1]/=E,O=F<4?Math.sqrt(1-F/4):0,Qt===Ai&&(O*=-1),N=new $n((ri.x+Ct.x)/2+O*-k[1],(ri.y+Ct.y)/2+O*k[0]),$=new $n(Ct.x-N.x,Ct.y-N.y),X=new $n(ri.x-N.x,ri.y-N.y),K=Math.acos($.x/Math.sqrt($.x*$.x+$.y*$.y)),$.y<0&&(K*=-1),ie=Math.acos(X.x/Math.sqrt(X.x*X.x+X.y*X.y)),X.y<0&&(ie*=-1),Ai&&K>ie&&(ie+=2*Math.PI),!Ai&&K<ie&&(ie-=2*Math.PI),le=Math.ceil(2*Math.abs(K-ie)/Math.PI),he=[],de=K,ee=(ie-K)/le,te=4*Math.tan(ee/4)/3,$e=0;$e<=le;$e++)De=Math.cos(de),ke=Math.sin(de),Ae=new $n(N.x+De,N.y+ke),he[$e]=[new $n(Ae.x+te*ke,Ae.y-te*De),Ae,new $n(Ae.x-te*ke,Ae.y+te*De)],de+=ee;for(he[0][0]=he[0][1].clone(),he[he.length-1][2]=he[he.length-1][1].clone(),v=new Di().rotate(Nt).scale(vt,He).rotate(-Nt),$e=0,et=he.length;$e<et;$e++)he[$e][0]=he[$e][0].transform(v),he[$e][1]=he[$e][1].transform(v),he[$e][2]=he[$e][2].transform(v);for($e=1,et=he.length;$e<et;$e++)Ie=(Ae=he[$e-1][2]).x,at=Ae.y,qe=(Ae=he[$e][0]).x,kt=Ae.y,jt=(Ae=he[$e][1]).x,ui=Ae.y,Zt.push(["C",Ie,at,qe,kt,jt,ui]);return Zt})(this.pos,a),a=o[0]}return a[0]="C",this.pos=[a[5],a[6]],this.reflection=[2*a[5]-a[3],2*a[6]-a[4]],o}function n(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;if(o===!1)return!1;for(var r=o,d=a.length;r<d;++r)if(a[r][0]=="M")return r;return!1}Ni(xl,{morph:function(a,o,r,d,g){for(var x=this.parse(a),v=this.parse(o),k=0,E=0,F=!1,O=!1;k!==!1||E!==!1;){var N;F=n(x,k!==!1&&k+1),O=n(v,E!==!1&&E+1),k===!1&&(k=(N=new xl($.start).bbox()).height==0||N.width==0?x.push(x[0])-1:x.push(["M",N.x+N.width/2,N.y+N.height/2])-1),E===!1&&(E=(N=new xl($.dest).bbox()).height==0||N.width==0?v.push(v[0])-1:v.push(["M",N.x+N.width/2,N.y+N.height/2])-1);var $=s(x,k,F,v,E,O);x=x.slice(0,k).concat($.start,F===!1?[]:x.slice(F)),v=v.slice(0,E).concat($.dest,O===!1?[]:v.slice(O)),k=F!==!1&&k+$.start.length,E=O!==!1&&E+$.dest.length}this._array=x,this.destination=new xl,this.destination._array=v;var X=this.fromArray(x.map((function(K,ie){var ee=v[ie].map((function(le,te){return te===0?le:d.step(K[te],v[ie][te],r,g[ie],g)}));return ee})));return X}})})();const PA=s=>(s.changedTouches&&(s=s.changedTouches[0]),{x:s.clientX,y:s.clientY});class i8{constructor(e){e.remember("_draggable",this),this.el=e,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(e){e?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(e){const t=!e.type.indexOf("mouse");if(t&&e.which!==1&&e.buttons!==0||this.el.dispatch("beforedrag",{event:e,handler:this}).defaultPrevented)return;e.preventDefault(),e.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(PA(e));const i=(t?"mouseup":"touchend")+".drag";Mc(window,(t?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),Mc(window,i,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:e,handler:this,box:this.box})}drag(e){const{box:t,lastClick:i}=this,n=this.el.point(PA(e)),a=n.x-i.x,o=n.y-i.y;if(!a&&!o)return t;const r=t.x+a,d=t.y+o;this.box=new sr(r,d,t.w,t.h),this.lastClick=n,this.el.dispatch("dragmove",{event:e,handler:this,box:this.box}).defaultPrevented||this.move(r,d)}move(e,t){this.el.type==="svg"?vh.prototype.move.call(this.el,e,t):this.el.move(e,t)}endDrag(e){this.drag(e),this.el.fire("dragend",{event:e,handler:this,box:this.box}),Jo(window,"mousemove.drag"),Jo(window,"touchmove.drag"),Jo(window,"mouseup.drag"),Jo(window,"touchend.drag"),this.init(!0)}}function $v(s,e,t,i=null){return function(n){n.preventDefault(),n.stopPropagation();var a=n.pageX||n.touches[0].pageX,o=n.pageY||n.touches[0].pageY;e.fire(s,{x:a,y:o,event:n,index:i,points:t})}}function Xv([s,e],{a:t,b:i,c:n,d:a,e:o,f:r}){return[s*t+e*n+o,s*i+e*a+r]}Ni(hs,{draggable(s=!0){return(this.remember("_draggable")||new i8(this)).init(s),this}});let MI=class{constructor(s){this.el=s,s.remember("_selectHandler",this),this.selection=new vh,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=wm();this.observer=new e.MutationObserver(this.mutationHandler)}init(s){this.createHandle=s.createHandle||this.createHandleFn,this.createRot=s.createRot||this.createRotFn,this.updateHandle=s.updateHandle||this.updateHandleFn,this.updateRot=s.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(s,e){if(!s)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach(((s,e,t)=>{const i=this.order[e];this.createHandle.call(this,this.selection,s,e,t,i),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+i).on("mousedown.selection touchstart.selection",$v(i,this.el,this.handlePoints,e))}))}createHandleFn(s){s.polyline()}updateHandleFn(s,e,t,i){const n=i.at(t-1),a=i[(t+1)%i.length],o=e,r=[o[0]-n[0],o[1]-n[1]],d=[o[0]-a[0],o[1]-a[1]],g=Math.sqrt(r[0]*r[0]+r[1]*r[1]),x=Math.sqrt(d[0]*d[0]+d[1]*d[1]),v=[r[0]/g,r[1]/g],k=[d[0]/x,d[1]/x],E=[o[0]-10*v[0],o[1]-10*v[1]],F=[o[0]-10*k[0],o[1]-10*k[1]];s.plot([E,o,F])}updateResizeHandles(){this.handlePoints.forEach(((s,e,t)=>{const i=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),s,e,t,i)}))}createRotFn(s){s.line(),s.circle(5)}getPoint(s){return this.handlePoints[this.order.indexOf(s)]}getPointHandle(s){return this.selection.get(this.order.indexOf(s)+1)}updateRotFn(s,e){const t=this.getPoint("t");s.get(0).plot(t[0],t[1],e[0],e[1]),s.get(1).center(e[0],e[1])}createRotationHandle(){const s=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",$v("rot",this.el,this.handlePoints));this.createRot.call(this,s)}updateRotationHandle(){const s=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(s,this.rotationPoint,this.handlePoints)}updatePoints(){const s=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(s).map((t=>Xv(t,e))),this.rotationPoint=Xv(this.getRotationPoint(s),e)}getHandlePoints({x:s,x2:e,y:t,y2:i,cx:n,cy:a}=this.el.bbox()){return[[s,t],[n,t],[e,t],[e,a],[e,i],[n,i],[s,i],[s,a]]}getRotationPoint({y:s,cx:e}=this.el.bbox()){return[e,s-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const LA=s=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let i=this.remember("_"+s.name);return i||(e.prototype instanceof MI?(i=new e(this),e=!0):i=new s(this),this.remember("_"+s.name,i)),i.active(e,t),this};function Yv(s,e,t,i=null){return function(n){n.preventDefault(),n.stopPropagation();var a=n.pageX||n.touches[0].pageX,o=n.pageY||n.touches[0].pageY;e.fire(s,{x:a,y:o,event:n,index:i,points:t})}}function qv([s,e],{a:t,b:i,c:n,d:a,e:o,f:r}){return[s*t+e*n+o,s*i+e*a+r]}Ni(hs,{select:LA(MI)}),Ni([ju,Vu,Nu],{pointSelect:LA(class{constructor(s){this.el=s,s.remember("_pointSelectHandler",this),this.selection=new vh,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=wm();this.observer=new e.MutationObserver(this.mutationHandler)}init(s){this.createHandle=s.createHandle||this.createHandleFn,this.updateHandle=s.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(s,e){if(!s)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach(((s,e,t)=>{this.createHandle.call(this,this.selection,s,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",$v("point",this.el,this.points,e))}))}createHandleFn(s){s.circle(5)}updateHandleFn(s,e){s.center(e[0],e[1])}updatePointHandles(){this.points.forEach(((s,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),s,e,t)}))}updatePoints(){const s=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map((e=>Xv(e,s)))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class II{constructor(e){this.el=e,e.remember("_selectHandler",this),this.selection=new vh,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const t=wm();this.observer=new t.MutationObserver(this.mutationHandler)}init(e){this.createHandle=e.createHandle||this.createHandleFn,this.createRot=e.createRot||this.createRotFn,this.updateHandle=e.updateHandle||this.updateHandleFn,this.updateRot=e.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(e,t){if(!e)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach(((e,t,i)=>{const n=this.order[t];this.createHandle.call(this,this.selection,e,t,i,n),this.selection.get(t+1).addClass("svg_select_handle svg_select_handle_"+n).on("mousedown.selection touchstart.selection",Yv(n,this.el,this.handlePoints,t))}))}createHandleFn(e){e.polyline()}updateHandleFn(e,t,i,n){const a=n.at(i-1),o=n[(i+1)%n.length],r=t,d=[r[0]-a[0],r[1]-a[1]],g=[r[0]-o[0],r[1]-o[1]],x=Math.sqrt(d[0]*d[0]+d[1]*d[1]),v=Math.sqrt(g[0]*g[0]+g[1]*g[1]),k=[d[0]/x,d[1]/x],E=[g[0]/v,g[1]/v],F=[r[0]-10*k[0],r[1]-10*k[1]],O=[r[0]-10*E[0],r[1]-10*E[1]];e.plot([F,r,O])}updateResizeHandles(){this.handlePoints.forEach(((e,t,i)=>{const n=this.order[t];this.updateHandle.call(this,this.selection.get(t+1),e,t,i,n)}))}createRotFn(e){e.line(),e.circle(5)}getPoint(e){return this.handlePoints[this.order.indexOf(e)]}getPointHandle(e){return this.selection.get(this.order.indexOf(e)+1)}updateRotFn(e,t){const i=this.getPoint("t");e.get(0).plot(i[0],i[1],t[0],t[1]),e.get(1).center(t[0],t[1])}createRotationHandle(){const e=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",Yv("rot",this.el,this.handlePoints));this.createRot.call(this,e)}updateRotationHandle(){const e=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(e,this.rotationPoint,this.handlePoints)}updatePoints(){const e=this.el.bbox(),t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(e).map((i=>qv(i,t))),this.rotationPoint=qv(this.getRotationPoint(e),t)}getHandlePoints({x:e,x2:t,y:i,y2:n,cx:a,cy:o}=this.el.bbox()){return[[e,i],[a,i],[t,i],[t,o],[t,n],[a,n],[e,n],[e,o]]}getRotationPoint({y:e,cx:t}=this.el.bbox()){return[t,e-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const DA=s=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let i=this.remember("_"+s.name);return i||(e.prototype instanceof II?(i=new e(this),e=!0):i=new s(this),this.remember("_"+s.name,i)),i.active(e,t),this};Ni(hs,{select:DA(II)}),Ni([ju,Vu,Nu],{pointSelect:DA(class{constructor(s){this.el=s,s.remember("_pointSelectHandler",this),this.selection=new vh,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=wm();this.observer=new e.MutationObserver(this.mutationHandler)}init(s){this.createHandle=s.createHandle||this.createHandleFn,this.updateHandle=s.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(s,e){if(!s)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach(((s,e,t)=>{this.createHandle.call(this,this.selection,s,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",Yv("point",this.el,this.points,e))}))}createHandleFn(s){s.circle(5)}updateHandleFn(s,e){s.center(e[0],e[1])}updatePointHandles(){this.points.forEach(((s,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),s,e,t)}))}updatePoints(){const s=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map((e=>qv(e,s)))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const s_=s=>(s.changedTouches&&(s=s.changedTouches[0]),{x:s.clientX,y:s.clientY}),RA=s=>{let e=1/0,t=1/0,i=-1/0,n=-1/0;for(let a=0;a<s.length;a++){const o=s[a];e=Math.min(e,o[0]),t=Math.min(t,o[1]),i=Math.max(i,o[0]),n=Math.max(n,o[1])}return new sr(e,t,i-e,n-t)};class OA{constructor(e){this.el=e,e.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(e,t){this.preserveAspectRatio=t.preserveAspectRatio??!1,this.aroundCenter=t.aroundCenter??!1,this.grid=t.grid??0,this.degree=t.degree??0,this.el.off(".resize"),e&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&(this.eventType==="rot"?this.rotate(this.lastEvent):this.eventType==="point"?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(e){this.eventType=e.type;const{event:t,index:i,points:n}=e.detail,a=!t.type.indexOf("mouse");if(a&&(t.which||t.buttons)!==1||this.el.dispatch("beforeresize",{event:e,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(s_(t)),this.index=i,this.points=n.slice();const o=(a?"mousemove":"touchmove")+".resize",r=(a?"mouseup":"touchcancel.resize touchend")+".resize";e.type==="point"?Mc(window,o,this.movePoint):e.type==="rot"?Mc(window,o,this.rotate):Mc(window,o,this.resize),Mc(window,r,this.endResize)}resize(e){this.lastEvent=e;const t=this.snapToGrid(this.el.point(s_(e)));let i=t.x-this.startPoint.x,n=t.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(i*=2,n*=2);const a=this.box.x+i,o=this.box.y+n,r=this.box.x2+i,d=this.box.y2+n;let g=new sr(this.box);if(this.eventType.includes("l")&&(g.x=Math.min(a,this.box.x2),g.x2=Math.max(a,this.box.x2)),this.eventType.includes("r")&&(g.x=Math.min(r,this.box.x),g.x2=Math.max(r,this.box.x)),this.eventType.includes("t")&&(g.y=Math.min(o,this.box.y2),g.y2=Math.max(o,this.box.y2)),this.eventType.includes("b")&&(g.y=Math.min(d,this.box.y),g.y2=Math.max(d,this.box.y)),g.width=g.x2-g.x,g.height=g.y2-g.y,this.preserveAspectRatio){const x=g.width/this.box.width,v=g.height/this.box.height,k=["lt","t","rt","r","rb","b","lb","l"],E=(k.indexOf(this.eventType)+4)%k.length,F=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[E];let O=this.eventType.includes("t")||this.eventType.includes("b")?v:x;O=this.eventType.length===2?Math.max(x,v):O,g=(function(N,$,X){const K=[[N.x,N.y],[N.x+N.width,N.y],[N.x+N.width,N.y+N.height],[N.x,N.y+N.height]].map((([ie,ee])=>{const le=ie-$[0],te=(ee-$[1])*X;return[le*X+$[0],te+$[1]]}));return RA(K)})(this.box,F,O)}this.el.dispatch("resize",{box:new sr(g),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.size(g.width,g.height).move(g.x,g.y)}movePoint(e){this.lastEvent=e;const{x:t,y:i}=this.snapToGrid(this.el.point(s_(e))),n=this.el.array().slice();n[this.index]=[t,i],this.el.dispatch("resize",{box:RA(n),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.plot(n)}rotate(e){this.lastEvent=e;const t=this.startPoint,i=this.el.point(s_(e)),{cx:n,cy:a}=this.box,o=t.x-n,r=t.y-a,d=i.x-n,g=i.y-a,x=Math.sqrt(o*o+r*r)*Math.sqrt(d*d+g*g);if(x===0)return;let v=Math.acos((o*d+r*g)/x)/Math.PI*180;if(!v)return;i.x<t.x&&(v=-v);const k=new Di(this.el),{x:E,y:F}=new $n(n,a).transformO(k),{rotate:O}=k.decompose(),N=this.snapToAngle(O+v)-O;this.el.dispatch("resize",{box:this.box,angle:N,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.transform(k.rotateO(N,E,F))}endResize(e){this.eventType!=="rot"&&this.eventType!=="point"&&this.resize(e),this.lastEvent=null,this.eventType="",Jo(window,"mousemove.resize touchmove.resize"),Jo(window,"mouseup.resize touchend.resize")}snapToGrid(e){return this.grid&&(e.x=Math.round(e.x/this.grid)*this.grid,e.y=Math.round(e.y/this.grid)*this.grid),e}snapToAngle(e){return this.degree&&(e=Math.round(e/this.degree)*this.degree),e}}Ni(hs,{resize:function(s=!0,e={}){typeof s=="object"&&(e=s,s=!0);let t=this.remember("_ResizeHandler");return t||(s.prototype instanceof OA?(t=new s(this),s=!0):t=new OA(this),this.remember("_resizeHandler",t)),t.active(s,e),this}}),window.SVG===void 0&&(window.SVG=_N),window.Apex===void 0&&(window.Apex={});var zA=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Zf(this.ctx),this.ctx.axes=new TN(this.ctx),this.ctx.core=new e8(this.ctx.el,this.ctx),this.ctx.config=new pm({}),this.ctx.data=new bw(this.ctx),this.ctx.grid=new yI(this.ctx),this.ctx.graphics=new Lt(this.ctx),this.ctx.coreUtils=new or(this.ctx),this.ctx.crosshairs=new Wv(this.ctx),this.ctx.events=new CN(this.ctx),this.ctx.exports=new Wg(this.ctx),this.ctx.fill=new vl(this.ctx),this.ctx.localization=new AN(this.ctx),this.ctx.options=new zu,this.ctx.responsive=new EN(this.ctx),this.ctx.series=new il(this.ctx),this.ctx.theme=new MN(this.ctx),this.ctx.formatters=new Cm(this.ctx),this.ctx.titleSubtitle=new IN(this.ctx),this.ctx.legend=new bI(this.ctx),this.ctx.toolbar=new wI(this.ctx),this.ctx.tooltip=new MA(this.ctx),this.ctx.dimensions=new nx(this.ctx),this.ctx.updateHelpers=new t8(this.ctx),this.ctx.zoomPanSelection=new zN(this.ctx),this.ctx.w.globals.tooltip=new MA(this.ctx)}}]),s})(),FA=(function(){function s(e){li(this,s),this.ctx=e,this.w=e.w}return ci(s,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each((function(){this.removeClass("*"),this.off()}),!0),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,i=e.isUpdating,n=this.w.globals.dom.Paper.node;n.parentNode&&n.parentNode.parentNode&&!i&&(n.parentNode.parentNode.style.minHeight="unset");var a=this.w.globals.dom.baseEl;a&&this.ctx.eventList.forEach((function(r){a.removeEventListener(r,t.ctx.events.documentEvent)}));var o=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(o.Paper),o.Paper.remove(),o.elWrap=null,o.elGraphical=null,o.elLegendWrap=null,o.elLegendForeign=null,o.baseEl=null,o.elGridRect=null,o.elGridRectMask=null,o.elGridRectBarMask=null,o.elGridRectMarkerMask=null,o.elForecastMask=null,o.elNonForecastMask=null,o.elDefs=null}}]),s})(),G1=new WeakMap,pd=(function(){function s(e,t){li(this,s),this.opts=t,this.ctx=this,this.w=new kN(t).init(),this.el=e,this.w.globals.cuid=Je.randomId(),this.w.globals.chartID=this.w.config.chart.id?Je.escapeString(this.w.config.chart.id):this.w.globals.cuid,new zA(this).initModules(),this.lastUpdateOptions=null,this.create=Je.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return ci(s,[{key:"render",value:function(){var e=this;return new Promise((function(t,i){if(Je.elementExists(e.el)){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var n=e.w.config.chart.events.beforeMount;typeof n=="function"&&n(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),(function(k,E){var F=!1;if(k.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var O=k.getBoundingClientRect();k.style.display!=="none"&&O.width!==0||(F=!0)}var N=new ResizeObserver((function($){F&&E.call(k,$),F=!0}));k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(k.children).forEach((function($){return N.observe($)})):N.observe(k),G1.set(E,N)})(e.el.parentNode,e.parentResizeHandler);var a=e.el.getRootNode&&e.el.getRootNode(),o=Je.is("ShadowRoot",a),r=e.el.ownerDocument,d=o?a.getElementById("apexcharts-css"):r.getElementById("apexcharts-css");if(!d){var g;(d=document.createElement("style")).id="apexcharts-css",d.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  direction: ltr !important;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  display: inline-block;
  position: relative;
  width: 16px;
  height: 16px;
  font-size: 16px;
  line-height: 16px;
  margin-right: 4px;
  text-align: center;
  vertical-align: middle;
  color: inherit;
}

.apexcharts-tooltip-marker::before {
  content: "";
  display: inline-block;
  width: 100%;
  text-align: center;
  color: currentcolor;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  font-size: 26px;
  font-family: Arial, Helvetica, sans-serif;
  line-height: 14px;
  font-weight: 900;
}

.apexcharts-tooltip-marker[shape="circle"]::before {
  content: "\\25CF";
}

.apexcharts-tooltip-marker[shape="square"]::before,
.apexcharts-tooltip-marker[shape="rect"]::before {
  content: "\\25A0";
  transform: translate(-1px, -2px);
}

.apexcharts-tooltip-marker[shape="line"]::before {
  content: "\\2500";
}

.apexcharts-tooltip-marker[shape="diamond"]::before {
  content: "\\25C6";
  font-size: 28px;
}

.apexcharts-tooltip-marker[shape="triangle"]::before {
  content: "\\25B2";
  font-size: 22px;
}

.apexcharts-tooltip-marker[shape="cross"]::before {
  content: "\\2715";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="plus"]::before {
  content: "\\2715";
  transform: rotate(45deg) translate(-1px, -1px);
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="star"]::before {
  content: "\\2605";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="sparkle"]::before {
  content: "\\2726";
  font-size: 20px;
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_shape {
  stroke-width: 1;
  stroke-dasharray: 10 10;
  stroke: black;
  stroke-opacity: 0.1;
  pointer-events: none;
  fill: none;
}

.svg_select_handle {
  stroke-width: 3;
  stroke: black;
  fill: none;
}

.svg_select_handle_r {
  cursor: e-resize;
}

.svg_select_handle_l {
  cursor: w-resize;
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect,
.no-pointer-events {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.apexcharts-radar-series .apexcharts-yaxis {
  pointer-events: none;
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}

.apexcharts-disable-transitions * {
  transition: none !important;
}`;var x=((g=e.opts.chart)===null||g===void 0?void 0:g.nonce)||e.w.config.chart.nonce;x&&d.setAttribute("nonce",x),o?a.prepend(d):e.w.config.chart.injectStyleSheet!==!1&&r.head.appendChild(d)}var v=e.create(e.w.config.series,{});if(!v)return t(e);e.mount(v).then((function(){typeof e.w.config.chart.events.mounted=="function"&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(v)})).catch((function(k){i(k)}))}else i(new Error("Element not found"))}))}},{key:"create",value:function(e,t){var i=this,n=this.w;new zA(this).initModules();var a=this.w.globals;if(a.noData=!1,a.animationEnded=!1,!Je.elementExists(this.el)||(this.responsive.checkResponsiveConfig(t),n.config.xaxis.convertedCatToNumeric&&new fm(n.config).convertCatToNumericXaxis(n.config,this.ctx),this.core.setupElements(),n.config.chart.type==="treemap"&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),a.svgWidth===0))return a.animationEnded=!0,null;var o=e;e.forEach((function(k,E){k.hidden&&(o=i.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:E}))}));var r=or.checkComboSeries(o,n.config.chart.type);a.comboCharts=r.comboCharts,a.comboBarCount=r.comboBarCount;var d=o.every((function(k){return k.data&&k.data.length===0}));(o.length===0||d&&a.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(o),this.theme.init(),new ep(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),a.noData&&a.collapsedSeries.length!==a.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),a.axisCharts&&(this.core.coreCalculations(),n.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new or(this).getLargestMarkerSize(),this.dimensions.plotCoords();var g=this.core.xySettings();this.grid.createGridMask();var x=this.core.plotChartType(o,g),v=new $f(this);return v.bringForward(),n.config.dataLabels.background.enabled&&v.dataLabelsBackground(),this.core.shiftGraphPosition(),n.globals.dataPoints>50&&n.globals.dom.elWrap.classList.add("apexcharts-disable-transitions"),{elGraph:x,xyRatios:g,dimensions:{plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}}}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this,n=i.w;return new Promise((function(a,o){if(i.el===null)return o(new Error("Not enough data to display or target element not found"));(t===null||n.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new yI(i);var r,d,g=i.grid.drawGrid();if(i.annotations=new SN(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),n.config.grid.position==="back"&&(g&&n.globals.dom.elGraphical.add(g.el),g!=null&&(r=g.elGridBorders)!==null&&r!==void 0&&r.node&&n.globals.dom.elGraphical.add(g.elGridBorders)),Array.isArray(t.elGraph))for(var x=0;x<t.elGraph.length;x++)n.globals.dom.elGraphical.add(t.elGraph[x]);else n.globals.dom.elGraphical.add(t.elGraph);n.config.grid.position==="front"&&(g&&n.globals.dom.elGraphical.add(g.el),g!=null&&(d=g.elGridBorders)!==null&&d!==void 0&&d.node&&n.globals.dom.elGraphical.add(g.elGridBorders)),n.config.xaxis.crosshairs.position==="front"&&i.crosshairs.drawXCrosshairs(),n.config.yaxis[0].crosshairs.position==="front"&&i.crosshairs.drawYCrosshairs(),n.config.chart.type!=="treemap"&&i.axes.drawAxis(n.config.chart.type,g);var v=new gm(e.ctx,g),k=new ww(e.ctx,g);if(g!==null&&(v.xAxisLabelCorrections(g.xAxisTickWidth),k.setYAxisTextAlignments(),n.config.yaxis.map((function(F,O){n.globals.ignoreYAxisIndexes.indexOf(O)===-1&&k.yAxisTitleRotate(O,F.opposite)}))),i.annotations.drawAxesAnnotations(),!n.globals.noData){if(n.config.tooltip.enabled&&!n.globals.noData&&i.w.globals.tooltip.drawTooltip(t.xyRatios),n.globals.axisCharts&&(n.globals.isXNumeric||n.config.xaxis.convertedCatToNumeric||n.globals.isRangeBar))(n.config.chart.zoom.enabled||n.config.chart.selection&&n.config.chart.selection.enabled||n.config.chart.pan&&n.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:t.xyRatios});else{var E=n.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(F){E[F]=!1}))}n.config.chart.toolbar.show&&!n.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}n.globals.memory.methodsToExec.length>0&&n.globals.memory.methodsToExec.forEach((function(F){F.method(F.params,!1,F.context)})),n.globals.axisCharts||n.globals.noData||i.core.resizeNonAxisCharts(),a(i)}))}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),(function(t,i){var n=G1.get(i);n&&(n.disconnect(),G1.delete(i))})(this.el.parentNode,this.parentResizeHandler);var e=this.w.config.chart.id;e&&Apex._chartInstances.forEach((function(t,i){t.id===Je.escapeString(e)&&Apex._chartInstances.splice(i,1)})),new FA(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],r=this.w;return r.globals.selection=void 0,this.lastUpdateOptions&&JSON.stringify(this.lastUpdateOptions)===JSON.stringify(e)?this:(e.series&&(this.data.resetParsingFlags(),this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((function(d,g){return t.updateHelpers._extendSeries(d,g)}))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),r.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,i,n,a,o))}},{key:"updateSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.data.resetParsingFlags(),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,i)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.data.resetParsingFlags();var n=this.w.config.series.slice();return n.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,t,i)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this;i.data.resetParsingFlags(),i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var n=i.w.config.series.slice(),a=0;a<n.length;a++)if(e[a]!==null&&e[a]!==void 0)for(var o=0;o<e[a].data.length;o++)n[a].data.push(e[a].data[o]);return i.w.config.series=n,t&&(i.w.globals.initialSeries=Je.clone(i.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise((function(i,n){if(t.lastUpdateOptions&&JSON.stringify(t.lastUpdateOptions)===JSON.stringify(e))return i(t);t.lastUpdateOptions=Je.clone(e),new FA(t.ctx).clear({isUpdating:!0});var a=t.create(t.w.config.series,e);if(!a)return i(t);t.mount(a).then((function(){typeof t.w.config.chart.events.updated=="function"&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,i(t)})).catch((function(o){n(o)}))}))}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach((function(i){t.push(i)}))),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter((function(t){if(t.group)return!0})).map((function(t){return e.w.config.chart.group===t.group?t.chart:e}))}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"highlightSeries",value:function(e){this.series.highlightSeries(e)}},{key:"isSeriesHidden",value:function(e){this.series.isSeriesHidden(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addXaxisAnnotationExternal(e,t,n)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addYaxisAnnotationExternal(e,t,n)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addPointAnnotationExternal(e,t,n)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=this;t&&(i=t),i.annotations.removeAnnotation(i,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Gv(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Gv(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new Wg(this.ctx).dataURI(e)}},{key:"getSvgString",value:function(e){return new Wg(this.ctx).getSvgString(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Wg(this.ctx).exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;typeof e=="function"&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=Je.escapeString(e);if(Apex._chartInstances){var i=Apex._chartInstances.filter((function(n){return n.id===t}))[0];return i&&i.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),t=0;t<e.length;t++)new s(e[t],JSON.parse(e[t].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var i=this.getChartByID(e);if(i){i.w.globals.isExecCalled=!0;var n=null;if(i.publicMethods.indexOf(t)!==-1){for(var a=arguments.length,o=new Array(a>2?a-2:0),r=2;r<a;r++)o[r-2]=arguments[r];n=i[t].apply(i,o)}return n}}},{key:"merge",value:function(e,t){return Je.extend(e,t)}},{key:"getThemePalettes",value:function(){return{palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3F51B5","#03A9F4","#4CAF50","#F9CE1D","#FF9800"],palette3:["#33B2DF","#546E7A","#D4526E","#13D8AA","#A5978B"],palette4:["#4ECDC4","#C7F464","#81D4FA","#FD6A6A","#546E7A"],palette5:["#2B908F","#F9A3A4","#90EE7E","#FA4443","#69D2E7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}}}]),s})();const ml={blue:"#3b82f6",emerald:"#10b981",amber:"#f59e0b",red:"#ef4444",violet:"#8b5cf6",pink:"#ec4899",teal:"#14b8a6"},n8=[ml.blue,ml.emerald,ml.amber,ml.red,ml.violet,ml.pink,ml.teal];function M_(s){return s>=1e9?"Rp "+(s/1e9).toFixed(1)+"M":s>=1e6?"Rp "+(s/1e6).toFixed(1)+"jt":s>=1e3?"Rp "+(s/1e3).toFixed(0)+"rb":"Rp "+s}function I_(s){return"Rp "+Number(s).toLocaleString("id-ID")}const PI={"1H":1,"1M":7,"1B":30,"1T":365},LI={"1H":"Hari ini","1M":"7 hari terakhir","1B":"30 hari terakhir","1T":"1 tahun terakhir"};let ax=null,rx=null,BA=null,sx=[],Zv=[],Kv=[],ox=[],Sw=[],kw=[];function NA(){const s=window.__financialData;s&&(sx=s.chartLabels||s.dailyLabels||[],Zv=(s.chartRevenue||s.dailyRevenue||[]).map(Number),Kv=(s.chartTickets||s.dailyCounts||[]).map(Number),ox=s.monthlyLabels||[],Sw=(s.monthlyRevenue||[]).map(Number),kw=(s.monthlyTickets||[]).map(Number),console.log("Financial Charts Init:",{labelsLen:sx.length,revLen:Zv.length,txLen:Kv.length,monthlyLen:ox.length}),a8(),r8(),s8(s),o8(s))}function Px(s){const e=sx.length,t=Math.max(0,e-s);return{labels:sx.slice(t),revenue:Zv.slice(t),tickets:Kv.slice(t)}}function DI({seriesName:s,data:e,labels:t,color:i,yFormatter:n,tooltipFormatter:a,height:o}){return{series:[{name:s,data:e}],chart:{type:"area",height:o||260,fontFamily:"'Inter', 'Segoe UI', sans-serif",toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1,reset:!1}},animations:{enabled:!0,easing:"easeinout",speed:700,animateGradually:{enabled:!0,delay:80},dynamicAnimation:{enabled:!0,speed:350}},dropShadow:{enabled:!0,top:2,left:0,blur:5,color:i,opacity:.1}},colors:[i],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.05,stops:[0,85,100]}},stroke:{curve:"smooth",width:2.5},markers:{size:0,hover:{size:5,sizeOffset:3},strokeWidth:3,strokeColors:"#fff"},xaxis:{categories:t,axisBorder:{show:!1},axisTicks:{show:!1},tickAmount:15,labels:{style:{colors:"#9ca3af",fontSize:"10px"},rotate:-90,hideOverlappingLabels:!0}},yaxis:{labels:{style:{colors:"#9ca3af",fontSize:"10px"},formatter:n},min:0},grid:{borderColor:"#f3f4f6",strokeDashArray:4,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},padding:{top:-8,right:0,bottom:0,left:6}},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:a}},legend:{show:!1},dataLabels:{enabled:!1}}}function a8(){const s=document.getElementById("revenueChart");if(!s)return;const e=Px(30),t=DI({seriesName:"Pendapatan",data:e.revenue,labels:e.labels,color:ml.blue,yFormatter:M_,tooltipFormatter:I_});ax=new pd(s,t),ax.render(),RI(e)}function RI(s,e=!1){const t=s.revenue.reduce((r,d)=>r+d,0),i=s.labels.length||1,n=s.tickets.reduce((r,d)=>r+d,0),a=Math.max(...s.revenue),o=r=>document.getElementById(r);if(o("revTotal")&&(o("revTotal").textContent=M_(t)),o("revAvg")){o("revAvg").textContent=M_(Math.round(t/i));const r=o("revAvg").nextElementSibling;r&&(r.textContent=e?"Avg/Bulan":"Avg/Hari")}if(o("revTx")&&(o("revTx").textContent=n.toLocaleString("id-ID")),o("revMax")){o("revMax").textContent=M_(a);const r=o("revMax").nextElementSibling;r&&(r.textContent=e?"Bulan Tertinggi":"Tertinggi")}}window.filterFinancialRevenue=function(s){if(!ax)return;let e;const t=s==="1T";if(t)e={labels:ox,revenue:Sw,tickets:kw};else{const n=PI[s]||30;e=Px(n)}ax.updateOptions({series:[{name:"Pendapatan",data:e.revenue}],xaxis:{categories:e.labels}},!0,!0),RI(e,t);const i=document.getElementById("revenuePeriodLabel");i&&(i.textContent=LI[s]||"")};function r8(){const s=document.getElementById("ticketChart");if(!s)return;const e=Px(30),t=DI({seriesName:"Transaksi",data:e.tickets,labels:e.labels,color:ml.emerald,yFormatter:i=>Math.round(i).toString(),tooltipFormatter:i=>i.toLocaleString("id-ID")+" transaksi"});rx=new pd(s,t),rx.render(),OI(e)}function OI(s,e=!1){const t=s.tickets.reduce((r,d)=>r+d,0),i=s.labels.length||1,n=s.tickets.filter(r=>r>0).length,a=Math.max(...s.tickets),o=r=>document.getElementById(r);if(o("txTotal")&&(o("txTotal").textContent=t.toLocaleString("id-ID")),o("txAvg")){o("txAvg").textContent=Math.round(t/i).toLocaleString("id-ID");const r=o("txAvg").nextElementSibling;r&&(r.textContent=e?"Avg/Bulan":"Avg/Hari")}if(o("txDays")){o("txDays").textContent=n+"/"+i;const r=o("txDays").nextElementSibling;r&&(r.textContent=e?"Bulan Aktif":"Hari Aktif")}if(o("txMax")){o("txMax").textContent=a.toLocaleString("id-ID");const r=o("txMax").nextElementSibling;r&&(r.textContent=e?"Bulan Tertinggi":"Tertinggi")}}window.filterFinancialTickets=function(s){if(!rx)return;let e;const t=s==="1T";if(t)e={labels:ox,tickets:kw,revenue:Sw};else{const n=PI[s]||30;e=Px(n)}rx.updateOptions({series:[{name:"Transaksi",data:e.tickets}],xaxis:{categories:e.labels}},!0,!0),OI(e,t);const i=document.getElementById("ticketPeriodLabel");i&&(i.textContent=LI[s]||"")};function s8(s){const e=document.getElementById("paymentMethodChart");if(!e||!s.paymentLabels||s.paymentLabels.length===0)return;const t=(s.paymentData||[]).map(Number),i={series:t,labels:s.paymentLabels,chart:{type:"donut",height:220,fontFamily:"'Inter', 'Segoe UI', sans-serif",animations:{enabled:!0}},colors:n8.slice(0,t.length),plotOptions:{pie:{donut:{size:"72%",labels:{show:!0,name:{show:!0,fontSize:"12px",fontWeight:600,color:"#6b7280",offsetY:-4},value:{show:!0,fontSize:"18px",fontWeight:800,color:"#1f2937",offsetY:4,formatter:I_},total:{show:!0,showAlways:!0,label:"Total",fontSize:"12px",fontWeight:600,color:"#6b7280",formatter:n=>{const a=n.globals.seriesTotals.reduce((o,r)=>o+r,0);return I_(a)}}}}}},stroke:{width:2,colors:["#fff"]},dataLabels:{enabled:!1},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:I_}},legend:{show:!1}};BA=new pd(e,i),BA.render()}function jA(s,e,t){const i=document.getElementById(s);if(!i||!e||e.length<2)return null;const n={series:[{data:e}],chart:{type:"area",height:36,sparkline:{enabled:!0},animations:{enabled:!0}},stroke:{curve:"smooth",width:2},colors:[t],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.3,opacityTo:.05,stops:[0,90,100]}},tooltip:{enabled:!1}},a=new pd(i,n);return a.render(),a}function o8(s){const e=(s.sparkRevenue||[]).map(Number),t=(s.sparkTickets||[]).map(Number);jA("sparkGross",e,ml.blue),jA("sparkTickets",t,ml.violet)}function VA(){window.__financialData?NA():setTimeout(()=>{window.__financialData&&NA()},100)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",VA):VA();const bc={blue:"#3b82f6",emerald:"#10b981",amber:"#f59e0b",red:"#ef4444",violet:"#8b5cf6",pink:"#ec4899",teal:"#14b8a6"},l8=[bc.blue,bc.emerald,bc.amber,bc.red,bc.violet,bc.pink,bc.teal];function P_(s){return s>=1e9?"Rp "+(s/1e9).toFixed(1)+"M":s>=1e6?"Rp "+(s/1e6).toFixed(1)+"jt":s>=1e3?"Rp "+(s/1e3).toFixed(0)+"rb":"Rp "+s}function c8(s){return"Rp "+Number(s).toLocaleString("id-ID")}const zI={"1H":1,"1M":7,"1B":30,"1T":365},FI={"1H":"Hari ini","1M":"7 hari terakhir","1B":"30 hari terakhir","1T":"1 tahun terakhir"};let lx=null,cx=null,HA=null,Qv=[],BI=[],NI=[],Cw=[],Aw=[],Tw=[];function Lx(s){const e=Qv.length,t=Math.max(0,e-s);return{labels:Qv.slice(t),revenue:BI.slice(t),tickets:NI.slice(t)}}function jI({seriesName:s,data:e,labels:t,color:i,yFormatter:n,tooltipFormatter:a,height:o}){return{series:[{name:s,data:e}],chart:{type:"area",height:o||260,fontFamily:"'Inter', 'Segoe UI', sans-serif",toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1,reset:!1}},animations:{enabled:!0,easing:"easeinout",speed:700,animateGradually:{enabled:!0,delay:80},dynamicAnimation:{enabled:!0,speed:350}},dropShadow:{enabled:!0,top:2,left:0,blur:5,color:i,opacity:.1}},colors:[i],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.05,stops:[0,85,100]}},stroke:{curve:"smooth",width:2.5},markers:{size:0,hover:{size:5,sizeOffset:3},strokeWidth:3,strokeColors:"#fff"},xaxis:{categories:t,axisBorder:{show:!1},axisTicks:{show:!1},tickAmount:15,labels:{style:{colors:"#9ca3af",fontSize:"10px"},rotate:-90,hideOverlappingLabels:!0}},yaxis:{title:{text:""},labels:{style:{colors:"#9ca3af",fontSize:"10px"},formatter:n},min:0},grid:{borderColor:"#f3f4f6",strokeDashArray:4,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},padding:{top:-8,right:0,bottom:0,left:6}},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:a}},legend:{show:!1},dataLabels:{enabled:!1}}}function h8(){const s=document.getElementById("revenueChart");if(!s)return;const e=Lx(30),t=jI({seriesName:"Pendapatan",data:e.revenue,labels:e.labels,color:bc.blue,yFormatter:P_,tooltipFormatter:i=>c8(i)});lx=new pd(s,t),lx.render(),VI(e)}function VI(s,e=!1){const t=s.revenue.reduce((r,d)=>r+d,0),i=s.labels.length||1,n=s.tickets.reduce((r,d)=>r+d,0),a=Math.max(...s.revenue),o=r=>document.getElementById(r);if(o("revTotal")&&(o("revTotal").textContent=P_(t)),o("revAvg")){o("revAvg").textContent=P_(Math.round(t/i));const r=o("revAvg").nextElementSibling;r&&(r.textContent=e?"Rata-rata/Bulan":"Rata-rata/Hari")}if(o("revTx")&&(o("revTx").textContent=n.toLocaleString("id-ID")),o("revMax")){o("revMax").textContent=P_(a);const r=o("revMax").nextElementSibling;r&&(r.textContent=e?"Bulan Tertinggi":"Hari Tertinggi")}}window.filterRevenueChart=function(s){if(!lx)return;let e;const t=s==="1T";if(t)e={labels:Cw,revenue:Aw,tickets:Tw};else{const n=zI[s]||30;e=Lx(n)}lx.updateOptions({series:[{name:"Pendapatan",data:e.revenue}],xaxis:{categories:e.labels}},!0,!0),VI(e,t);const i=document.getElementById("revenuePeriodLabel");i&&(i.textContent=FI[s]||"")};function u8(){const s=document.getElementById("ticketChart");if(!s)return;const e=Lx(30),t=jI({seriesName:"Tiket Terjual",data:e.tickets,labels:e.labels,color:bc.emerald,yFormatter:i=>Math.round(i).toString(),tooltipFormatter:i=>i.toLocaleString("id-ID")+" tiket"});cx=new pd(s,t),cx.render(),HI(e)}function HI(s,e=!1){const t=s.tickets.reduce((r,d)=>r+d,0),i=s.labels.length||1,n=s.tickets.filter(r=>r>0).length,a=Math.max(...s.tickets),o=r=>document.getElementById(r);if(o("txTotal")&&(o("txTotal").textContent=t.toLocaleString("id-ID")),o("txAvg")){o("txAvg").textContent=Math.round(t/i).toLocaleString("id-ID");const r=o("txAvg").nextElementSibling;r&&(r.textContent=e?"Rata-rata/Bulan":"Rata-rata/Hari")}if(o("txDays")){o("txDays").textContent=n+"/"+i;const r=o("txDays").nextElementSibling;r&&(r.textContent=e?"Bulan Aktif":"Hari Aktif")}if(o("txMax")){o("txMax").textContent=a.toLocaleString("id-ID");const r=o("txMax").nextElementSibling;r&&(r.textContent=e?"Bulan Tertinggi":"Hari Tertinggi")}}window.filterTicketChart=function(s){if(!cx)return;let e;const t=s==="1T";if(t)e={labels:Cw,tickets:Tw,revenue:Aw};else{const n=zI[s]||30;e=Lx(n)}cx.updateOptions({series:[{name:"Tiket Terjual",data:e.tickets}],xaxis:{categories:e.labels}},!0,!0),HI(e,t);const i=document.getElementById("ticketPeriodLabel");i&&(i.textContent=FI[s]||"")};function d8(s){const e=document.getElementById("ticketTypeChart");if(!e||!s.ticketTypeLabels||s.ticketTypeLabels.length===0)return;const t=(s.ticketTypeData||[]).map(Number),i={series:t,labels:s.ticketTypeLabels,chart:{type:"donut",height:220,fontFamily:"'Inter', 'Segoe UI', sans-serif",animations:{enabled:!0,easing:"easeinout",speed:800}},colors:l8.slice(0,t.length),plotOptions:{pie:{donut:{size:"72%",labels:{show:!0,name:{show:!0,fontSize:"12px",fontWeight:600,color:"#6b7280",offsetY:-4},value:{show:!0,fontSize:"20px",fontWeight:800,color:"#1f2937",offsetY:4,formatter:n=>Number(n).toLocaleString("id-ID")},total:{show:!0,showAlways:!0,label:"Total",fontSize:"12px",fontWeight:600,color:"#6b7280",formatter:n=>n.globals.seriesTotals.reduce((a,o)=>a+o,0).toLocaleString("id-ID")}}}}},stroke:{width:2,colors:["#fff"]},dataLabels:{enabled:!1},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:n=>n.toLocaleString("id-ID")+" tiket"}},legend:{show:!1},states:{hover:{filter:{type:"darken",value:.1}},active:{filter:{type:"none"}}}};HA=new pd(e,i),HA.render()}function UA(){const s=window.__dashboardData;s&&(Qv=s.labels||[],BI=(s.revenue||[]).map(Number),NI=(s.tickets||[]).map(Number),Cw=s.monthlyLabels||[],Aw=(s.monthlyRevenue||[]).map(Number),Tw=(s.monthlyTickets||[]).map(Number),h8(),u8(),d8(s))}function GA(){window.__dashboardData?UA():setTimeout(()=>{window.__dashboardData&&UA()},100)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",GA):GA();var Jv=!1,eb=!1,Ju=[],tb=-1;function f8(s){p8(s)}function p8(s){Ju.includes(s)||Ju.push(s),m8()}function g8(s){let e=Ju.indexOf(s);e!==-1&&e>tb&&Ju.splice(e,1)}function m8(){!eb&&!Jv&&(Jv=!0,queueMicrotask(_8))}function _8(){Jv=!1,eb=!0;for(let s=0;s<Ju.length;s++)Ju[s](),tb=s;Ju.length=0,tb=-1,eb=!1}var tp,gd,ip,UI,ib=!0;function x8(s){ib=!1,s(),ib=!0}function y8(s){tp=s.reactive,ip=s.release,gd=e=>s.effect(e,{scheduler:t=>{ib?f8(t):t()}}),UI=s.raw}function WA(s){gd=s}function v8(s){let e=()=>{};return[i=>{let n=gd(i);return s._x_effects||(s._x_effects=new Set,s._x_runEffects=()=>{s._x_effects.forEach(a=>a())}),s._x_effects.add(n),e=()=>{n!==void 0&&(s._x_effects.delete(n),ip(n))},n},()=>{e()}]}function GI(s,e){let t=!0,i,n=gd(()=>{let a=s();JSON.stringify(a),t?i=a:queueMicrotask(()=>{e(a,i),i=a}),t=!1});return()=>ip(n)}var WI=[],$I=[],XI=[];function b8(s){XI.push(s)}function Ew(s,e){typeof e=="function"?(s._x_cleanups||(s._x_cleanups=[]),s._x_cleanups.push(e)):(e=s,$I.push(e))}function YI(s){WI.push(s)}function qI(s,e,t){s._x_attributeCleanups||(s._x_attributeCleanups={}),s._x_attributeCleanups[e]||(s._x_attributeCleanups[e]=[]),s._x_attributeCleanups[e].push(t)}function ZI(s,e){s._x_attributeCleanups&&Object.entries(s._x_attributeCleanups).forEach(([t,i])=>{(e===void 0||e.includes(t))&&(i.forEach(n=>n()),delete s._x_attributeCleanups[t])})}function w8(s){for(s._x_effects?.forEach(g8);s._x_cleanups?.length;)s._x_cleanups.pop()()}var Mw=new MutationObserver(Dw),Iw=!1;function Pw(){Mw.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Iw=!0}function KI(){S8(),Mw.disconnect(),Iw=!1}var cg=[];function S8(){let s=Mw.takeRecords();cg.push(()=>s.length>0&&Dw(s));let e=cg.length;queueMicrotask(()=>{if(cg.length===e)for(;cg.length>0;)cg.shift()()})}function Ka(s){if(!Iw)return s();KI();let e=s();return Pw(),e}var Lw=!1,hx=[];function k8(){Lw=!0}function C8(){Lw=!1,Dw(hx),hx=[]}function Dw(s){if(Lw){hx=hx.concat(s);return}let e=[],t=new Set,i=new Map,n=new Map;for(let a=0;a<s.length;a++)if(!s[a].target._x_ignoreMutationObserver&&(s[a].type==="childList"&&(s[a].removedNodes.forEach(o=>{o.nodeType===1&&o._x_marker&&t.add(o)}),s[a].addedNodes.forEach(o=>{if(o.nodeType===1){if(t.has(o)){t.delete(o);return}o._x_marker||e.push(o)}})),s[a].type==="attributes")){let o=s[a].target,r=s[a].attributeName,d=s[a].oldValue,g=()=>{i.has(o)||i.set(o,[]),i.get(o).push({name:r,value:o.getAttribute(r)})},x=()=>{n.has(o)||n.set(o,[]),n.get(o).push(r)};o.hasAttribute(r)&&d===null?g():o.hasAttribute(r)?(x(),g()):x()}n.forEach((a,o)=>{ZI(o,a)}),i.forEach((a,o)=>{WI.forEach(r=>r(o,a))});for(let a of t)e.some(o=>o.contains(a))||$I.forEach(o=>o(a));for(let a of e)a.isConnected&&XI.forEach(o=>o(a));e=null,t=null,i=null,n=null}function QI(s){return Tm(Yf(s))}function Am(s,e,t){return s._x_dataStack=[e,...Yf(t||s)],()=>{s._x_dataStack=s._x_dataStack.filter(i=>i!==e)}}function Yf(s){return s._x_dataStack?s._x_dataStack:typeof ShadowRoot=="function"&&s instanceof ShadowRoot?Yf(s.host):s.parentNode?Yf(s.parentNode):[]}function Tm(s){return new Proxy({objects:s},A8)}var A8={ownKeys({objects:s}){return Array.from(new Set(s.flatMap(e=>Object.keys(e))))},has({objects:s},e){return e==Symbol.unscopables?!1:s.some(t=>Object.prototype.hasOwnProperty.call(t,e)||Reflect.has(t,e))},get({objects:s},e,t){return e=="toJSON"?T8:Reflect.get(s.find(i=>Reflect.has(i,e))||{},e,t)},set({objects:s},e,t,i){const n=s.find(o=>Object.prototype.hasOwnProperty.call(o,e))||s[s.length-1],a=Object.getOwnPropertyDescriptor(n,e);return a?.set&&a?.get?a.set.call(i,t)||!0:Reflect.set(n,e,t)}};function T8(){return Reflect.ownKeys(this).reduce((e,t)=>(e[t]=Reflect.get(this,t),e),{})}function JI(s){let e=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,t=(i,n="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([a,{value:o,enumerable:r}])=>{if(r===!1||o===void 0||typeof o=="object"&&o!==null&&o.__v_skip)return;let d=n===""?a:`${n}.${a}`;typeof o=="object"&&o!==null&&o._x_interceptor?i[a]=o.initialize(s,d,a):e(o)&&o!==i&&!(o instanceof Element)&&t(o,d)})};return t(s)}function eP(s,e=()=>{}){let t={initialValue:void 0,_x_interceptor:!0,initialize(i,n,a){return s(this.initialValue,()=>E8(i,n),o=>nb(i,n,o),n,a)}};return e(t),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let n=t.initialize.bind(t);t.initialize=(a,o,r)=>{let d=i.initialize(a,o,r);return t.initialValue=d,n(a,o,r)}}else t.initialValue=i;return t}}function E8(s,e){return e.split(".").reduce((t,i)=>t[i],s)}function nb(s,e,t){if(typeof e=="string"&&(e=e.split(".")),e.length===1)s[e[0]]=t;else{if(e.length===0)throw error;return s[e[0]]||(s[e[0]]={}),nb(s[e[0]],e.slice(1),t)}}var tP={};function wl(s,e){tP[s]=e}function ab(s,e){let t=M8(e);return Object.entries(tP).forEach(([i,n])=>{Object.defineProperty(s,`$${i}`,{get(){return n(e,t)},enumerable:!1})}),s}function M8(s){let[e,t]=lP(s),i={interceptor:eP,...e};return Ew(s,t),i}function I8(s,e,t,...i){try{return t(...i)}catch(n){mm(n,s,e)}}function mm(...s){return iP(...s)}var iP=L8;function P8(s){iP=s}function L8(s,e,t=void 0){s=Object.assign(s??{message:"No error message given."},{el:e,expression:t}),console.warn(`Alpine Expression Error: ${s.message}

${t?'Expression: "'+t+`"

`:""}`,e),setTimeout(()=>{throw s},0)}var L_=!0;function nP(s){let e=L_;L_=!1;let t=s();return L_=e,t}function ed(s,e,t={}){let i;return Gs(s,e)(n=>i=n,t),i}function Gs(...s){return aP(...s)}var aP=rP;function D8(s){aP=s}function rP(s,e){let t={};ab(t,s);let i=[t,...Yf(s)],n=typeof e=="function"?R8(i,e):z8(i,e,s);return I8.bind(null,s,e,n)}function R8(s,e){return(t=()=>{},{scope:i={},params:n=[],context:a}={})=>{let o=e.apply(Tm([i,...s]),n);ux(t,o)}}var W1={};function O8(s,e){if(W1[s])return W1[s];let t=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(s.trim())||/^(let|const)\s/.test(s.trim())?`(async()=>{ ${s} })()`:s,a=(()=>{try{let o=new t(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(o,"name",{value:`[Alpine] ${s}`}),o}catch(o){return mm(o,e,s),Promise.resolve()}})();return W1[s]=a,a}function z8(s,e,t){let i=O8(e,t);return(n=()=>{},{scope:a={},params:o=[],context:r}={})=>{i.result=void 0,i.finished=!1;let d=Tm([a,...s]);if(typeof i=="function"){let g=i.call(r,i,d).catch(x=>mm(x,t,e));i.finished?(ux(n,i.result,d,o,t),i.result=void 0):g.then(x=>{ux(n,x,d,o,t)}).catch(x=>mm(x,t,e)).finally(()=>i.result=void 0)}}}function ux(s,e,t,i,n){if(L_&&typeof e=="function"){let a=e.apply(t,i);a instanceof Promise?a.then(o=>ux(s,o,t,i)).catch(o=>mm(o,n,e)):s(a)}else typeof e=="object"&&e instanceof Promise?e.then(a=>s(a)):s(e)}var Rw="x-";function np(s=""){return Rw+s}function F8(s){Rw=s}var dx={};function Lr(s,e){return dx[s]=e,{before(t){if(!dx[t]){console.warn(String.raw`Cannot find directive \`${t}\`. \`${s}\` will use the default order of execution`);return}const i=Hu.indexOf(t);Hu.splice(i>=0?i:Hu.indexOf("DEFAULT"),0,s)}}}function B8(s){return Object.keys(dx).includes(s)}function Ow(s,e,t){if(e=Array.from(e),s._x_virtualDirectives){let a=Object.entries(s._x_virtualDirectives).map(([r,d])=>({name:r,value:d})),o=sP(a);a=a.map(r=>o.find(d=>d.name===r.name)?{name:`x-bind:${r.name}`,value:`"${r.value}"`}:r),e=e.concat(a)}let i={};return e.map(uP((a,o)=>i[a]=o)).filter(fP).map(V8(i,t)).sort(H8).map(a=>j8(s,a))}function sP(s){return Array.from(s).map(uP()).filter(e=>!fP(e))}var rb=!1,Cg=new Map,oP=Symbol();function N8(s){rb=!0;let e=Symbol();oP=e,Cg.set(e,[]);let t=()=>{for(;Cg.get(e).length;)Cg.get(e).shift()();Cg.delete(e)},i=()=>{rb=!1,t()};s(t),i()}function lP(s){let e=[],t=r=>e.push(r),[i,n]=v8(s);return e.push(n),[{Alpine:Em,effect:i,cleanup:t,evaluateLater:Gs.bind(Gs,s),evaluate:ed.bind(ed,s)},()=>e.forEach(r=>r())]}function j8(s,e){let t=()=>{},i=dx[e.type]||t,[n,a]=lP(s);qI(s,e.original,a);let o=()=>{s._x_ignore||s._x_ignoreSelf||(i.inline&&i.inline(s,e,n),i=i.bind(i,s,e,n),rb?Cg.get(oP).push(i):i())};return o.runCleanups=a,o}var cP=(s,e)=>({name:t,value:i})=>(t.startsWith(s)&&(t=t.replace(s,e)),{name:t,value:i}),hP=s=>s;function uP(s=()=>{}){return({name:e,value:t})=>{let{name:i,value:n}=dP.reduce((a,o)=>o(a),{name:e,value:t});return i!==e&&s(i,e),{name:i,value:n}}}var dP=[];function zw(s){dP.push(s)}function fP({name:s}){return pP().test(s)}var pP=()=>new RegExp(`^${Rw}([^:^.]+)\\b`);function V8(s,e){return({name:t,value:i})=>{let n=t.match(pP()),a=t.match(/:([a-zA-Z0-9\-_:]+)/),o=t.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],r=e||s[t]||t;return{type:n?n[1]:null,value:a?a[1]:null,modifiers:o.map(d=>d.replace(".","")),expression:i,original:r}}}var sb="DEFAULT",Hu=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",sb,"teleport"];function H8(s,e){let t=Hu.indexOf(s.type)===-1?sb:s.type,i=Hu.indexOf(e.type)===-1?sb:e.type;return Hu.indexOf(t)-Hu.indexOf(i)}function $g(s,e,t={}){s.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0}))}function hd(s,e){if(typeof ShadowRoot=="function"&&s instanceof ShadowRoot){Array.from(s.children).forEach(n=>hd(n,e));return}let t=!1;if(e(s,()=>t=!0),t)return;let i=s.firstElementChild;for(;i;)hd(i,e),i=i.nextElementSibling}function el(s,...e){console.warn(`Alpine Warning: ${s}`,...e)}var $A=!1;function U8(){$A&&el("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),$A=!0,document.body||el("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),$g(document,"alpine:init"),$g(document,"alpine:initializing"),Pw(),b8(e=>Dc(e,hd)),Ew(e=>rp(e)),YI((e,t)=>{Ow(e,t).forEach(i=>i())});let s=e=>!Dx(e.parentElement,!0);Array.from(document.querySelectorAll(_P().join(","))).filter(s).forEach(e=>{Dc(e)}),$g(document,"alpine:initialized"),setTimeout(()=>{X8()})}var Fw=[],gP=[];function mP(){return Fw.map(s=>s())}function _P(){return Fw.concat(gP).map(s=>s())}function xP(s){Fw.push(s)}function yP(s){gP.push(s)}function Dx(s,e=!1){return ap(s,t=>{if((e?_P():mP()).some(n=>t.matches(n)))return!0})}function ap(s,e){if(s){if(e(s))return s;if(s._x_teleportBack&&(s=s._x_teleportBack),!!s.parentElement)return ap(s.parentElement,e)}}function G8(s){return mP().some(e=>s.matches(e))}var vP=[];function W8(s){vP.push(s)}var $8=1;function Dc(s,e=hd,t=()=>{}){ap(s,i=>i._x_ignore)||N8(()=>{e(s,(i,n)=>{i._x_marker||(t(i,n),vP.forEach(a=>a(i,n)),Ow(i,i.attributes).forEach(a=>a()),i._x_ignore||(i._x_marker=$8++),i._x_ignore&&n())})})}function rp(s,e=hd){e(s,t=>{w8(t),ZI(t),delete t._x_marker})}function X8(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([e,t,i])=>{B8(t)||i.some(n=>{if(document.querySelector(n))return el(`found "${n}", but missing ${e} plugin`),!0})})}var ob=[],Bw=!1;function Nw(s=()=>{}){return queueMicrotask(()=>{Bw||setTimeout(()=>{lb()})}),new Promise(e=>{ob.push(()=>{s(),e()})})}function lb(){for(Bw=!1;ob.length;)ob.shift()()}function Y8(){Bw=!0}function jw(s,e){return Array.isArray(e)?XA(s,e.join(" ")):typeof e=="object"&&e!==null?q8(s,e):typeof e=="function"?jw(s,e()):XA(s,e)}function XA(s,e){let t=n=>n.split(" ").filter(a=>!s.classList.contains(a)).filter(Boolean),i=n=>(s.classList.add(...n),()=>{s.classList.remove(...n)});return e=e===!0?e="":e||"",i(t(e))}function q8(s,e){let t=r=>r.split(" ").filter(Boolean),i=Object.entries(e).flatMap(([r,d])=>d?t(r):!1).filter(Boolean),n=Object.entries(e).flatMap(([r,d])=>d?!1:t(r)).filter(Boolean),a=[],o=[];return n.forEach(r=>{s.classList.contains(r)&&(s.classList.remove(r),o.push(r))}),i.forEach(r=>{s.classList.contains(r)||(s.classList.add(r),a.push(r))}),()=>{o.forEach(r=>s.classList.add(r)),a.forEach(r=>s.classList.remove(r))}}function Rx(s,e){return typeof e=="object"&&e!==null?Z8(s,e):K8(s,e)}function Z8(s,e){let t={};return Object.entries(e).forEach(([i,n])=>{t[i]=s.style[i],i.startsWith("--")||(i=Q8(i)),s.style.setProperty(i,n)}),setTimeout(()=>{s.style.length===0&&s.removeAttribute("style")}),()=>{Rx(s,t)}}function K8(s,e){let t=s.getAttribute("style",e);return s.setAttribute("style",e),()=>{s.setAttribute("style",t||"")}}function Q8(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function cb(s,e=()=>{}){let t=!1;return function(){t?e.apply(this,arguments):(t=!0,s.apply(this,arguments))}}Lr("transition",(s,{value:e,modifiers:t,expression:i},{evaluate:n})=>{typeof i=="function"&&(i=n(i)),i!==!1&&(!i||typeof i=="boolean"?e6(s,t,e):J8(s,i,e))});function J8(s,e,t){bP(s,jw,""),{enter:n=>{s._x_transition.enter.during=n},"enter-start":n=>{s._x_transition.enter.start=n},"enter-end":n=>{s._x_transition.enter.end=n},leave:n=>{s._x_transition.leave.during=n},"leave-start":n=>{s._x_transition.leave.start=n},"leave-end":n=>{s._x_transition.leave.end=n}}[t](e)}function e6(s,e,t){bP(s,Rx);let i=!e.includes("in")&&!e.includes("out")&&!t,n=i||e.includes("in")||["enter"].includes(t),a=i||e.includes("out")||["leave"].includes(t);e.includes("in")&&!i&&(e=e.filter(($,X)=>X<e.indexOf("out"))),e.includes("out")&&!i&&(e=e.filter(($,X)=>X>e.indexOf("out")));let o=!e.includes("opacity")&&!e.includes("scale"),r=o||e.includes("opacity"),d=o||e.includes("scale"),g=r?0:1,x=d?hg(e,"scale",95)/100:1,v=hg(e,"delay",0)/1e3,k=hg(e,"origin","center"),E="opacity, transform",F=hg(e,"duration",150)/1e3,O=hg(e,"duration",75)/1e3,N="cubic-bezier(0.4, 0.0, 0.2, 1)";n&&(s._x_transition.enter.during={transformOrigin:k,transitionDelay:`${v}s`,transitionProperty:E,transitionDuration:`${F}s`,transitionTimingFunction:N},s._x_transition.enter.start={opacity:g,transform:`scale(${x})`},s._x_transition.enter.end={opacity:1,transform:"scale(1)"}),a&&(s._x_transition.leave.during={transformOrigin:k,transitionDelay:`${v}s`,transitionProperty:E,transitionDuration:`${O}s`,transitionTimingFunction:N},s._x_transition.leave.start={opacity:1,transform:"scale(1)"},s._x_transition.leave.end={opacity:g,transform:`scale(${x})`})}function bP(s,e,t={}){s._x_transition||(s._x_transition={enter:{during:t,start:t,end:t},leave:{during:t,start:t,end:t},in(i=()=>{},n=()=>{}){hb(s,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,n)},out(i=()=>{},n=()=>{}){hb(s,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,n)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(s,e,t,i){const n=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let a=()=>n(t);if(e){s._x_transition&&(s._x_transition.enter||s._x_transition.leave)?s._x_transition.enter&&(Object.entries(s._x_transition.enter.during).length||Object.entries(s._x_transition.enter.start).length||Object.entries(s._x_transition.enter.end).length)?s._x_transition.in(t):a():s._x_transition?s._x_transition.in(t):a();return}s._x_hidePromise=s._x_transition?new Promise((o,r)=>{s._x_transition.out(()=>{},()=>o(i)),s._x_transitioning&&s._x_transitioning.beforeCancel(()=>r({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let o=wP(s);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(s)):n(()=>{let r=d=>{let g=Promise.all([d._x_hidePromise,...(d._x_hideChildren||[]).map(r)]).then(([x])=>x?.());return delete d._x_hidePromise,delete d._x_hideChildren,g};r(s).catch(d=>{if(!d.isFromCancelledTransition)throw d})})})};function wP(s){let e=s.parentNode;if(e)return e._x_hidePromise?e:wP(e)}function hb(s,e,{during:t,start:i,end:n}={},a=()=>{},o=()=>{}){if(s._x_transitioning&&s._x_transitioning.cancel(),Object.keys(t).length===0&&Object.keys(i).length===0&&Object.keys(n).length===0){a(),o();return}let r,d,g;t6(s,{start(){r=e(s,i)},during(){d=e(s,t)},before:a,end(){r(),g=e(s,n)},after:o,cleanup(){d(),g()}})}function t6(s,e){let t,i,n,a=cb(()=>{Ka(()=>{t=!0,i||e.before(),n||(e.end(),lb()),e.after(),s.isConnected&&e.cleanup(),delete s._x_transitioning})});s._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:cb(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();a()}),finish:a},Ka(()=>{e.start(),e.during()}),Y8(),requestAnimationFrame(()=>{if(t)return;let o=Number(getComputedStyle(s).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,r=Number(getComputedStyle(s).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(s).animationDuration.replace("s",""))*1e3),Ka(()=>{e.before()}),i=!0,requestAnimationFrame(()=>{t||(Ka(()=>{e.end()}),lb(),setTimeout(s._x_transitioning.finish,o+r),n=!0)})})}function hg(s,e,t){if(s.indexOf(e)===-1)return t;const i=s[s.indexOf(e)+1];if(!i||e==="scale"&&isNaN(i))return t;if(e==="duration"||e==="delay"){let n=i.match(/([0-9]+)ms/);if(n)return n[1]}return e==="origin"&&["top","right","left","center","bottom"].includes(s[s.indexOf(e)+2])?[i,s[s.indexOf(e)+2]].join(" "):i}var Ih=!1;function Oh(s,e=()=>{}){return(...t)=>Ih?e(...t):s(...t)}function i6(s){return(...e)=>Ih&&s(...e)}var SP=[];function Ox(s){SP.push(s)}function n6(s,e){SP.forEach(t=>t(s,e)),Ih=!0,kP(()=>{Dc(e,(t,i)=>{i(t,()=>{})})}),Ih=!1}var ub=!1;function a6(s,e){e._x_dataStack||(e._x_dataStack=s._x_dataStack),Ih=!0,ub=!0,kP(()=>{r6(e)}),Ih=!1,ub=!1}function r6(s){let e=!1;Dc(s,(i,n)=>{hd(i,(a,o)=>{if(e&&G8(a))return o();e=!0,n(a,o)})})}function kP(s){let e=gd;WA((t,i)=>{let n=e(t);return ip(n),()=>{}}),s(),WA(e)}function CP(s,e,t,i=[]){switch(s._x_bindings||(s._x_bindings=tp({})),s._x_bindings[e]=t,e=i.includes("camel")?f6(e):e,e){case"value":s6(s,t);break;case"style":l6(s,t);break;case"class":o6(s,t);break;case"selected":case"checked":c6(s,e,t);break;default:AP(s,e,t);break}}function s6(s,e){if(MP(s))s.attributes.value===void 0&&(s.value=e),window.fromModel&&(typeof e=="boolean"?s.checked=D_(s.value)===e:s.checked=YA(s.value,e));else if(Vw(s))Number.isInteger(e)?s.value=e:!Array.isArray(e)&&typeof e!="boolean"&&![null,void 0].includes(e)?s.value=String(e):Array.isArray(e)?s.checked=e.some(t=>YA(t,s.value)):s.checked=!!e;else if(s.tagName==="SELECT")d6(s,e);else{if(s.value===e)return;s.value=e===void 0?"":e}}function o6(s,e){s._x_undoAddedClasses&&s._x_undoAddedClasses(),s._x_undoAddedClasses=jw(s,e)}function l6(s,e){s._x_undoAddedStyles&&s._x_undoAddedStyles(),s._x_undoAddedStyles=Rx(s,e)}function c6(s,e,t){AP(s,e,t),u6(s,e,t)}function AP(s,e,t){[null,void 0,!1].includes(t)&&g6(e)?s.removeAttribute(e):(TP(e)&&(t=e),h6(s,e,t))}function h6(s,e,t){s.getAttribute(e)!=t&&s.setAttribute(e,t)}function u6(s,e,t){s[e]!==t&&(s[e]=t)}function d6(s,e){const t=[].concat(e).map(i=>i+"");Array.from(s.options).forEach(i=>{i.selected=t.includes(i.value)})}function f6(s){return s.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function YA(s,e){return s==e}function D_(s){return[1,"1","true","on","yes",!0].includes(s)?!0:[0,"0","false","off","no",!1].includes(s)?!1:s?!!s:null}var p6=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function TP(s){return p6.has(s)}function g6(s){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(s)}function m6(s,e,t){return s._x_bindings&&s._x_bindings[e]!==void 0?s._x_bindings[e]:EP(s,e,t)}function _6(s,e,t,i=!0){if(s._x_bindings&&s._x_bindings[e]!==void 0)return s._x_bindings[e];if(s._x_inlineBindings&&s._x_inlineBindings[e]!==void 0){let n=s._x_inlineBindings[e];return n.extract=i,nP(()=>ed(s,n.expression))}return EP(s,e,t)}function EP(s,e,t){let i=s.getAttribute(e);return i===null?typeof t=="function"?t():t:i===""?!0:TP(e)?!![e,"true"].includes(i):i}function Vw(s){return s.type==="checkbox"||s.localName==="ui-checkbox"||s.localName==="ui-switch"}function MP(s){return s.type==="radio"||s.localName==="ui-radio"}function IP(s,e){let t;return function(){const i=this,n=arguments,a=function(){t=null,s.apply(i,n)};clearTimeout(t),t=setTimeout(a,e)}}function PP(s,e){let t;return function(){let i=this,n=arguments;t||(s.apply(i,n),t=!0,setTimeout(()=>t=!1,e))}}function LP({get:s,set:e},{get:t,set:i}){let n=!0,a,o=gd(()=>{let r=s(),d=t();if(n)i($1(r)),n=!1;else{let g=JSON.stringify(r),x=JSON.stringify(d);g!==a?i($1(r)):g!==x&&e($1(d))}a=JSON.stringify(s()),JSON.stringify(t())});return()=>{ip(o)}}function $1(s){return typeof s=="object"?JSON.parse(JSON.stringify(s)):s}function x6(s){(Array.isArray(s)?s:[s]).forEach(t=>t(Em))}var Ou={},qA=!1;function y6(s,e){if(qA||(Ou=tp(Ou),qA=!0),e===void 0)return Ou[s];Ou[s]=e,JI(Ou[s]),typeof e=="object"&&e!==null&&e.hasOwnProperty("init")&&typeof e.init=="function"&&Ou[s].init()}function v6(){return Ou}var DP={};function b6(s,e){let t=typeof e!="function"?()=>e:e;return s instanceof Element?RP(s,t()):(DP[s]=t,()=>{})}function w6(s){return Object.entries(DP).forEach(([e,t])=>{Object.defineProperty(s,e,{get(){return(...i)=>t(...i)}})}),s}function RP(s,e,t){let i=[];for(;i.length;)i.pop()();let n=Object.entries(e).map(([o,r])=>({name:o,value:r})),a=sP(n);return n=n.map(o=>a.find(r=>r.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),Ow(s,n,t).map(o=>{i.push(o.runCleanups),o()}),()=>{for(;i.length;)i.pop()()}}var OP={};function S6(s,e){OP[s]=e}function k6(s,e){return Object.entries(OP).forEach(([t,i])=>{Object.defineProperty(s,t,{get(){return(...n)=>i.bind(e)(...n)},enumerable:!1})}),s}var C6={get reactive(){return tp},get release(){return ip},get effect(){return gd},get raw(){return UI},version:"3.15.2",flushAndStopDeferringMutations:C8,dontAutoEvaluateFunctions:nP,disableEffectScheduling:x8,startObservingMutations:Pw,stopObservingMutations:KI,setReactivityEngine:y8,onAttributeRemoved:qI,onAttributesAdded:YI,closestDataStack:Yf,skipDuringClone:Oh,onlyDuringClone:i6,addRootSelector:xP,addInitSelector:yP,setErrorHandler:P8,interceptClone:Ox,addScopeToNode:Am,deferMutations:k8,mapAttributes:zw,evaluateLater:Gs,interceptInit:W8,setEvaluator:D8,mergeProxies:Tm,extractProp:_6,findClosest:ap,onElRemoved:Ew,closestRoot:Dx,destroyTree:rp,interceptor:eP,transition:hb,setStyles:Rx,mutateDom:Ka,directive:Lr,entangle:LP,throttle:PP,debounce:IP,evaluate:ed,initTree:Dc,nextTick:Nw,prefixed:np,prefix:F8,plugin:x6,magic:wl,store:y6,start:U8,clone:a6,cloneNode:n6,bound:m6,$data:QI,watch:GI,walk:hd,data:S6,bind:b6},Em=C6;function A6(s,e){const t=Object.create(null),i=s.split(",");for(let n=0;n<i.length;n++)t[i[n]]=!0;return n=>!!t[n]}var T6=Object.freeze({}),E6=Object.prototype.hasOwnProperty,zx=(s,e)=>E6.call(s,e),td=Array.isArray,Xg=s=>zP(s)==="[object Map]",M6=s=>typeof s=="string",Hw=s=>typeof s=="symbol",Fx=s=>s!==null&&typeof s=="object",I6=Object.prototype.toString,zP=s=>I6.call(s),FP=s=>zP(s).slice(8,-1),Uw=s=>M6(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,P6=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},L6=P6(s=>s.charAt(0).toUpperCase()+s.slice(1)),BP=(s,e)=>s!==e&&(s===s||e===e),db=new WeakMap,ug=[],Gl,id=Symbol("iterate"),fb=Symbol("Map key iterate");function D6(s){return s&&s._isEffect===!0}function R6(s,e=T6){D6(s)&&(s=s.raw);const t=F6(s,e);return e.lazy||t(),t}function O6(s){s.active&&(NP(s),s.options.onStop&&s.options.onStop(),s.active=!1)}var z6=0;function F6(s,e){const t=function(){if(!t.active)return s();if(!ug.includes(t)){NP(t);try{return N6(),ug.push(t),Gl=t,s()}finally{ug.pop(),jP(),Gl=ug[ug.length-1]}}};return t.id=z6++,t.allowRecurse=!!e.allowRecurse,t._isEffect=!0,t.active=!0,t.raw=s,t.deps=[],t.options=e,t}function NP(s){const{deps:e}=s;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(s);e.length=0}}var qf=!0,Gw=[];function B6(){Gw.push(qf),qf=!1}function N6(){Gw.push(qf),qf=!0}function jP(){const s=Gw.pop();qf=s===void 0?!0:s}function bl(s,e,t){if(!qf||Gl===void 0)return;let i=db.get(s);i||db.set(s,i=new Map);let n=i.get(t);n||i.set(t,n=new Set),n.has(Gl)||(n.add(Gl),Gl.deps.push(n),Gl.options.onTrack&&Gl.options.onTrack({effect:Gl,target:s,type:e,key:t}))}function Ph(s,e,t,i,n,a){const o=db.get(s);if(!o)return;const r=new Set,d=x=>{x&&x.forEach(v=>{(v!==Gl||v.allowRecurse)&&r.add(v)})};if(e==="clear")o.forEach(d);else if(t==="length"&&td(s))o.forEach((x,v)=>{(v==="length"||v>=i)&&d(x)});else switch(t!==void 0&&d(o.get(t)),e){case"add":td(s)?Uw(t)&&d(o.get("length")):(d(o.get(id)),Xg(s)&&d(o.get(fb)));break;case"delete":td(s)||(d(o.get(id)),Xg(s)&&d(o.get(fb)));break;case"set":Xg(s)&&d(o.get(id));break}const g=x=>{x.options.onTrigger&&x.options.onTrigger({effect:x,target:s,key:t,type:e,newValue:i,oldValue:n,oldTarget:a}),x.options.scheduler?x.options.scheduler(x):x()};r.forEach(g)}var j6=A6("__proto__,__v_isRef,__isVue"),VP=new Set(Object.getOwnPropertyNames(Symbol).map(s=>Symbol[s]).filter(Hw)),V6=HP(),H6=HP(!0),ZA=U6();function U6(){const s={};return["includes","indexOf","lastIndexOf"].forEach(e=>{s[e]=function(...t){const i=Ra(this);for(let a=0,o=this.length;a<o;a++)bl(i,"get",a+"");const n=i[e](...t);return n===-1||n===!1?i[e](...t.map(Ra)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{s[e]=function(...t){B6();const i=Ra(this)[e].apply(this,t);return jP(),i}}),s}function HP(s=!1,e=!1){return function(i,n,a){if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_raw"&&a===(s?e?nj:$P:e?ij:WP).get(i))return i;const o=td(i);if(!s&&o&&zx(ZA,n))return Reflect.get(ZA,n,a);const r=Reflect.get(i,n,a);return(Hw(n)?VP.has(n):j6(n))||(s||bl(i,"get",n),e)?r:pb(r)?!o||!Uw(n)?r.value:r:Fx(r)?s?XP(r):Yw(r):r}}var G6=W6();function W6(s=!1){return function(t,i,n,a){let o=t[i];if(!s&&(n=Ra(n),o=Ra(o),!td(t)&&pb(o)&&!pb(n)))return o.value=n,!0;const r=td(t)&&Uw(i)?Number(i)<t.length:zx(t,i),d=Reflect.set(t,i,n,a);return t===Ra(a)&&(r?BP(n,o)&&Ph(t,"set",i,n,o):Ph(t,"add",i,n)),d}}function $6(s,e){const t=zx(s,e),i=s[e],n=Reflect.deleteProperty(s,e);return n&&t&&Ph(s,"delete",e,void 0,i),n}function X6(s,e){const t=Reflect.has(s,e);return(!Hw(e)||!VP.has(e))&&bl(s,"has",e),t}function Y6(s){return bl(s,"iterate",td(s)?"length":id),Reflect.ownKeys(s)}var q6={get:V6,set:G6,deleteProperty:$6,has:X6,ownKeys:Y6},Z6={get:H6,set(s,e){return console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,s),!0},deleteProperty(s,e){return console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,s),!0}},Ww=s=>Fx(s)?Yw(s):s,$w=s=>Fx(s)?XP(s):s,Xw=s=>s,Bx=s=>Reflect.getPrototypeOf(s);function o_(s,e,t=!1,i=!1){s=s.__v_raw;const n=Ra(s),a=Ra(e);e!==a&&!t&&bl(n,"get",e),!t&&bl(n,"get",a);const{has:o}=Bx(n),r=i?Xw:t?$w:Ww;if(o.call(n,e))return r(s.get(e));if(o.call(n,a))return r(s.get(a));s!==n&&s.get(e)}function l_(s,e=!1){const t=this.__v_raw,i=Ra(t),n=Ra(s);return s!==n&&!e&&bl(i,"has",s),!e&&bl(i,"has",n),s===n?t.has(s):t.has(s)||t.has(n)}function c_(s,e=!1){return s=s.__v_raw,!e&&bl(Ra(s),"iterate",id),Reflect.get(s,"size",s)}function KA(s){s=Ra(s);const e=Ra(this);return Bx(e).has.call(e,s)||(e.add(s),Ph(e,"add",s,s)),this}function QA(s,e){e=Ra(e);const t=Ra(this),{has:i,get:n}=Bx(t);let a=i.call(t,s);a?GP(t,i,s):(s=Ra(s),a=i.call(t,s));const o=n.call(t,s);return t.set(s,e),a?BP(e,o)&&Ph(t,"set",s,e,o):Ph(t,"add",s,e),this}function JA(s){const e=Ra(this),{has:t,get:i}=Bx(e);let n=t.call(e,s);n?GP(e,t,s):(s=Ra(s),n=t.call(e,s));const a=i?i.call(e,s):void 0,o=e.delete(s);return n&&Ph(e,"delete",s,void 0,a),o}function eT(){const s=Ra(this),e=s.size!==0,t=Xg(s)?new Map(s):new Set(s),i=s.clear();return e&&Ph(s,"clear",void 0,void 0,t),i}function h_(s,e){return function(i,n){const a=this,o=a.__v_raw,r=Ra(o),d=e?Xw:s?$w:Ww;return!s&&bl(r,"iterate",id),o.forEach((g,x)=>i.call(n,d(g),d(x),a))}}function u_(s,e,t){return function(...i){const n=this.__v_raw,a=Ra(n),o=Xg(a),r=s==="entries"||s===Symbol.iterator&&o,d=s==="keys"&&o,g=n[s](...i),x=t?Xw:e?$w:Ww;return!e&&bl(a,"iterate",d?fb:id),{next(){const{value:v,done:k}=g.next();return k?{value:v,done:k}:{value:r?[x(v[0]),x(v[1])]:x(v),done:k}},[Symbol.iterator](){return this}}}}function ah(s){return function(...e){{const t=e[0]?`on key "${e[0]}" `:"";console.warn(`${L6(s)} operation ${t}failed: target is readonly.`,Ra(this))}return s==="delete"?!1:this}}function K6(){const s={get(a){return o_(this,a)},get size(){return c_(this)},has:l_,add:KA,set:QA,delete:JA,clear:eT,forEach:h_(!1,!1)},e={get(a){return o_(this,a,!1,!0)},get size(){return c_(this)},has:l_,add:KA,set:QA,delete:JA,clear:eT,forEach:h_(!1,!0)},t={get(a){return o_(this,a,!0)},get size(){return c_(this,!0)},has(a){return l_.call(this,a,!0)},add:ah("add"),set:ah("set"),delete:ah("delete"),clear:ah("clear"),forEach:h_(!0,!1)},i={get(a){return o_(this,a,!0,!0)},get size(){return c_(this,!0)},has(a){return l_.call(this,a,!0)},add:ah("add"),set:ah("set"),delete:ah("delete"),clear:ah("clear"),forEach:h_(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{s[a]=u_(a,!1,!1),t[a]=u_(a,!0,!1),e[a]=u_(a,!1,!0),i[a]=u_(a,!0,!0)}),[s,t,e,i]}var[Q6,J6]=K6();function UP(s,e){const t=s?J6:Q6;return(i,n,a)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(zx(t,n)&&n in i?t:i,n,a)}var ej={get:UP(!1)},tj={get:UP(!0)};function GP(s,e,t){const i=Ra(t);if(i!==t&&e.call(s,i)){const n=FP(s);console.warn(`Reactive ${n} contains both the raw and reactive versions of the same object${n==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var WP=new WeakMap,ij=new WeakMap,$P=new WeakMap,nj=new WeakMap;function aj(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rj(s){return s.__v_skip||!Object.isExtensible(s)?0:aj(FP(s))}function Yw(s){return s&&s.__v_isReadonly?s:YP(s,!1,q6,ej,WP)}function XP(s){return YP(s,!0,Z6,tj,$P)}function YP(s,e,t,i,n){if(!Fx(s))return console.warn(`value cannot be made reactive: ${String(s)}`),s;if(s.__v_raw&&!(e&&s.__v_isReactive))return s;const a=n.get(s);if(a)return a;const o=rj(s);if(o===0)return s;const r=new Proxy(s,o===2?i:t);return n.set(s,r),r}function Ra(s){return s&&Ra(s.__v_raw)||s}function pb(s){return!!(s&&s.__v_isRef===!0)}wl("nextTick",()=>Nw);wl("dispatch",s=>$g.bind($g,s));wl("watch",(s,{evaluateLater:e,cleanup:t})=>(i,n)=>{let a=e(i),r=GI(()=>{let d;return a(g=>d=g),d},n);t(r)});wl("store",v6);wl("data",s=>QI(s));wl("root",s=>Dx(s));wl("refs",s=>(s._x_refs_proxy||(s._x_refs_proxy=Tm(sj(s))),s._x_refs_proxy));function sj(s){let e=[];return ap(s,t=>{t._x_refs&&e.push(t._x_refs)}),e}var X1={};function qP(s){return X1[s]||(X1[s]=0),++X1[s]}function oj(s,e){return ap(s,t=>{if(t._x_ids&&t._x_ids[e])return!0})}function lj(s,e){s._x_ids||(s._x_ids={}),s._x_ids[e]||(s._x_ids[e]=qP(e))}wl("id",(s,{cleanup:e})=>(t,i=null)=>{let n=`${t}${i?`-${i}`:""}`;return cj(s,n,e,()=>{let a=oj(s,t),o=a?a._x_ids[t]:qP(t);return i?`${t}-${o}-${i}`:`${t}-${o}`})});Ox((s,e)=>{s._x_id&&(e._x_id=s._x_id)});function cj(s,e,t,i){if(s._x_id||(s._x_id={}),s._x_id[e])return s._x_id[e];let n=i();return s._x_id[e]=n,t(()=>{delete s._x_id[e]}),n}wl("el",s=>s);ZP("Focus","focus","focus");ZP("Persist","persist","persist");function ZP(s,e,t){wl(e,i=>el(`You can't use [$${e}] without first installing the "${s}" plugin here: https://alpinejs.dev/plugins/${t}`,i))}Lr("modelable",(s,{expression:e},{effect:t,evaluateLater:i,cleanup:n})=>{let a=i(e),o=()=>{let x;return a(v=>x=v),x},r=i(`${e} = __placeholder`),d=x=>r(()=>{},{scope:{__placeholder:x}}),g=o();d(g),queueMicrotask(()=>{if(!s._x_model)return;s._x_removeModelListeners.default();let x=s._x_model.get,v=s._x_model.set,k=LP({get(){return x()},set(E){v(E)}},{get(){return o()},set(E){d(E)}});n(k)})});Lr("teleport",(s,{modifiers:e,expression:t},{cleanup:i})=>{s.tagName.toLowerCase()!=="template"&&el("x-teleport can only be used on a <template> tag",s);let n=tT(t),a=s.content.cloneNode(!0).firstElementChild;s._x_teleport=a,a._x_teleportBack=s,s.setAttribute("data-teleport-template",!0),a.setAttribute("data-teleport-target",!0),s._x_forwardEvents&&s._x_forwardEvents.forEach(r=>{a.addEventListener(r,d=>{d.stopPropagation(),s.dispatchEvent(new d.constructor(d.type,d))})}),Am(a,{},s);let o=(r,d,g)=>{g.includes("prepend")?d.parentNode.insertBefore(r,d):g.includes("append")?d.parentNode.insertBefore(r,d.nextSibling):d.appendChild(r)};Ka(()=>{o(a,n,e),Oh(()=>{Dc(a)})()}),s._x_teleportPutBack=()=>{let r=tT(t);Ka(()=>{o(s._x_teleport,r,e)})},i(()=>Ka(()=>{a.remove(),rp(a)}))});var hj=document.createElement("div");function tT(s){let e=Oh(()=>document.querySelector(s),()=>hj)();return e||el(`Cannot find x-teleport element for selector: "${s}"`),e}var KP=()=>{};KP.inline=(s,{modifiers:e},{cleanup:t})=>{e.includes("self")?s._x_ignoreSelf=!0:s._x_ignore=!0,t(()=>{e.includes("self")?delete s._x_ignoreSelf:delete s._x_ignore})};Lr("ignore",KP);Lr("effect",Oh((s,{expression:e},{effect:t})=>{t(Gs(s,e))}));function gb(s,e,t,i){let n=s,a=d=>i(d),o={},r=(d,g)=>x=>g(d,x);if(t.includes("dot")&&(e=uj(e)),t.includes("camel")&&(e=dj(e)),t.includes("passive")&&(o.passive=!0),t.includes("capture")&&(o.capture=!0),t.includes("window")&&(n=window),t.includes("document")&&(n=document),t.includes("debounce")){let d=t[t.indexOf("debounce")+1]||"invalid-wait",g=fx(d.split("ms")[0])?Number(d.split("ms")[0]):250;a=IP(a,g)}if(t.includes("throttle")){let d=t[t.indexOf("throttle")+1]||"invalid-wait",g=fx(d.split("ms")[0])?Number(d.split("ms")[0]):250;a=PP(a,g)}return t.includes("prevent")&&(a=r(a,(d,g)=>{g.preventDefault(),d(g)})),t.includes("stop")&&(a=r(a,(d,g)=>{g.stopPropagation(),d(g)})),t.includes("once")&&(a=r(a,(d,g)=>{d(g),n.removeEventListener(e,a,o)})),(t.includes("away")||t.includes("outside"))&&(n=document,a=r(a,(d,g)=>{s.contains(g.target)||g.target.isConnected!==!1&&(s.offsetWidth<1&&s.offsetHeight<1||s._x_isShown!==!1&&d(g))})),t.includes("self")&&(a=r(a,(d,g)=>{g.target===s&&d(g)})),(pj(e)||QP(e))&&(a=r(a,(d,g)=>{gj(g,t)||d(g)})),n.addEventListener(e,a,o),()=>{n.removeEventListener(e,a,o)}}function uj(s){return s.replace(/-/g,".")}function dj(s){return s.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function fx(s){return!Array.isArray(s)&&!isNaN(s)}function fj(s){return[" ","_"].includes(s)?s:s.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function pj(s){return["keydown","keyup"].includes(s)}function QP(s){return["contextmenu","click","mouse"].some(e=>s.includes(e))}function gj(s,e){let t=e.filter(a=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll"].includes(a));if(t.includes("debounce")){let a=t.indexOf("debounce");t.splice(a,fx((t[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.includes("throttle")){let a=t.indexOf("throttle");t.splice(a,fx((t[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.length===0||t.length===1&&iT(s.key).includes(t[0]))return!1;const n=["ctrl","shift","alt","meta","cmd","super"].filter(a=>t.includes(a));return t=t.filter(a=>!n.includes(a)),!(n.length>0&&n.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),s[`${o}Key`])).length===n.length&&(QP(s.type)||iT(s.key).includes(t[0])))}function iT(s){if(!s)return[];s=fj(s);let e={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return e[s]=s,Object.keys(e).map(t=>{if(e[t]===s)return t}).filter(t=>t)}Lr("model",(s,{modifiers:e,expression:t},{effect:i,cleanup:n})=>{let a=s;e.includes("parent")&&(a=s.parentNode);let o=Gs(a,t),r;typeof t=="string"?r=Gs(a,`${t} = __placeholder`):typeof t=="function"&&typeof t()=="string"?r=Gs(a,`${t()} = __placeholder`):r=()=>{};let d=()=>{let k;return o(E=>k=E),nT(k)?k.get():k},g=k=>{let E;o(F=>E=F),nT(E)?E.set(k):r(()=>{},{scope:{__placeholder:k}})};typeof t=="string"&&s.type==="radio"&&Ka(()=>{s.hasAttribute("name")||s.setAttribute("name",t)});let x=s.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(s.type)||e.includes("lazy")?"change":"input",v=Ih?()=>{}:gb(s,x,e,k=>{g(Y1(s,e,k,d()))});if(e.includes("fill")&&([void 0,null,""].includes(d())||Vw(s)&&Array.isArray(d())||s.tagName.toLowerCase()==="select"&&s.multiple)&&g(Y1(s,e,{target:s},d())),s._x_removeModelListeners||(s._x_removeModelListeners={}),s._x_removeModelListeners.default=v,n(()=>s._x_removeModelListeners.default()),s.form){let k=gb(s.form,"reset",[],E=>{Nw(()=>s._x_model&&s._x_model.set(Y1(s,e,{target:s},d())))});n(()=>k())}s._x_model={get(){return d()},set(k){g(k)}},s._x_forceModelUpdate=k=>{k===void 0&&typeof t=="string"&&t.match(/\./)&&(k=""),window.fromModel=!0,Ka(()=>CP(s,"value",k)),delete window.fromModel},i(()=>{let k=d();e.includes("unintrusive")&&document.activeElement.isSameNode(s)||s._x_forceModelUpdate(k)})});function Y1(s,e,t,i){return Ka(()=>{if(t instanceof CustomEvent&&t.detail!==void 0)return t.detail!==null&&t.detail!==void 0?t.detail:t.target.value;if(Vw(s))if(Array.isArray(i)){let n=null;return e.includes("number")?n=q1(t.target.value):e.includes("boolean")?n=D_(t.target.value):n=t.target.value,t.target.checked?i.includes(n)?i:i.concat([n]):i.filter(a=>!mj(a,n))}else return t.target.checked;else{if(s.tagName.toLowerCase()==="select"&&s.multiple)return e.includes("number")?Array.from(t.target.selectedOptions).map(n=>{let a=n.value||n.text;return q1(a)}):e.includes("boolean")?Array.from(t.target.selectedOptions).map(n=>{let a=n.value||n.text;return D_(a)}):Array.from(t.target.selectedOptions).map(n=>n.value||n.text);{let n;return MP(s)?t.target.checked?n=t.target.value:n=i:n=t.target.value,e.includes("number")?q1(n):e.includes("boolean")?D_(n):e.includes("trim")?n.trim():n}}})}function q1(s){let e=s?parseFloat(s):null;return _j(e)?e:s}function mj(s,e){return s==e}function _j(s){return!Array.isArray(s)&&!isNaN(s)}function nT(s){return s!==null&&typeof s=="object"&&typeof s.get=="function"&&typeof s.set=="function"}Lr("cloak",s=>queueMicrotask(()=>Ka(()=>s.removeAttribute(np("cloak")))));yP(()=>`[${np("init")}]`);Lr("init",Oh((s,{expression:e},{evaluate:t})=>typeof e=="string"?!!e.trim()&&t(e,{},!1):t(e,{},!1)));Lr("text",(s,{expression:e},{effect:t,evaluateLater:i})=>{let n=i(e);t(()=>{n(a=>{Ka(()=>{s.textContent=a})})})});Lr("html",(s,{expression:e},{effect:t,evaluateLater:i})=>{let n=i(e);t(()=>{n(a=>{Ka(()=>{s.innerHTML=a,s._x_ignoreSelf=!0,Dc(s),delete s._x_ignoreSelf})})})});zw(cP(":",hP(np("bind:"))));var JP=(s,{value:e,modifiers:t,expression:i,original:n},{effect:a,cleanup:o})=>{if(!e){let d={};w6(d),Gs(s,i)(x=>{RP(s,x,n)},{scope:d});return}if(e==="key")return xj(s,i);if(s._x_inlineBindings&&s._x_inlineBindings[e]&&s._x_inlineBindings[e].extract)return;let r=Gs(s,i);a(()=>r(d=>{d===void 0&&typeof i=="string"&&i.match(/\./)&&(d=""),Ka(()=>CP(s,e,d,t))})),o(()=>{s._x_undoAddedClasses&&s._x_undoAddedClasses(),s._x_undoAddedStyles&&s._x_undoAddedStyles()})};JP.inline=(s,{value:e,modifiers:t,expression:i})=>{e&&(s._x_inlineBindings||(s._x_inlineBindings={}),s._x_inlineBindings[e]={expression:i,extract:!1})};Lr("bind",JP);function xj(s,e){s._x_keyExpression=e}xP(()=>`[${np("data")}]`);Lr("data",(s,{expression:e},{cleanup:t})=>{if(yj(s))return;e=e===""?"{}":e;let i={};ab(i,s);let n={};k6(n,i);let a=ed(s,e,{scope:n});(a===void 0||a===!0)&&(a={}),ab(a,s);let o=tp(a);JI(o);let r=Am(s,o);o.init&&ed(s,o.init),t(()=>{o.destroy&&ed(s,o.destroy),r()})});Ox((s,e)=>{s._x_dataStack&&(e._x_dataStack=s._x_dataStack,e.setAttribute("data-has-alpine-state",!0))});function yj(s){return Ih?ub?!0:s.hasAttribute("data-has-alpine-state"):!1}Lr("show",(s,{modifiers:e,expression:t},{effect:i})=>{let n=Gs(s,t);s._x_doHide||(s._x_doHide=()=>{Ka(()=>{s.style.setProperty("display","none",e.includes("important")?"important":void 0)})}),s._x_doShow||(s._x_doShow=()=>{Ka(()=>{s.style.length===1&&s.style.display==="none"?s.removeAttribute("style"):s.style.removeProperty("display")})});let a=()=>{s._x_doHide(),s._x_isShown=!1},o=()=>{s._x_doShow(),s._x_isShown=!0},r=()=>setTimeout(o),d=cb(v=>v?o():a(),v=>{typeof s._x_toggleAndCascadeWithTransitions=="function"?s._x_toggleAndCascadeWithTransitions(s,v,o,a):v?r():a()}),g,x=!0;i(()=>n(v=>{!x&&v===g||(e.includes("immediate")&&(v?r():a()),d(v),g=v,x=!1)}))});Lr("for",(s,{expression:e},{effect:t,cleanup:i})=>{let n=bj(e),a=Gs(s,n.items),o=Gs(s,s._x_keyExpression||"index");s._x_prevKeys=[],s._x_lookup={},t(()=>vj(s,n,a,o)),i(()=>{Object.values(s._x_lookup).forEach(r=>Ka(()=>{rp(r),r.remove()})),delete s._x_prevKeys,delete s._x_lookup})});function vj(s,e,t,i){let n=o=>typeof o=="object"&&!Array.isArray(o),a=s;t(o=>{wj(o)&&o>=0&&(o=Array.from(Array(o).keys(),N=>N+1)),o===void 0&&(o=[]);let r=s._x_lookup,d=s._x_prevKeys,g=[],x=[];if(n(o))o=Object.entries(o).map(([N,$])=>{let X=aT(e,$,N,o);i(K=>{x.includes(K)&&el("Duplicate key on x-for",s),x.push(K)},{scope:{index:N,...X}}),g.push(X)});else for(let N=0;N<o.length;N++){let $=aT(e,o[N],N,o);i(X=>{x.includes(X)&&el("Duplicate key on x-for",s),x.push(X)},{scope:{index:N,...$}}),g.push($)}let v=[],k=[],E=[],F=[];for(let N=0;N<d.length;N++){let $=d[N];x.indexOf($)===-1&&E.push($)}d=d.filter(N=>!E.includes(N));let O="template";for(let N=0;N<x.length;N++){let $=x[N],X=d.indexOf($);if(X===-1)d.splice(N,0,$),v.push([O,N]);else if(X!==N){let K=d.splice(N,1)[0],ie=d.splice(X-1,1)[0];d.splice(N,0,ie),d.splice(X,0,K),k.push([K,ie])}else F.push($);O=$}for(let N=0;N<E.length;N++){let $=E[N];$ in r&&(Ka(()=>{rp(r[$]),r[$].remove()}),delete r[$])}for(let N=0;N<k.length;N++){let[$,X]=k[N],K=r[$],ie=r[X],ee=document.createElement("div");Ka(()=>{ie||el('x-for ":key" is undefined or invalid',a,X,r),ie.after(ee),K.after(ie),ie._x_currentIfEl&&ie.after(ie._x_currentIfEl),ee.before(K),K._x_currentIfEl&&K.after(K._x_currentIfEl),ee.remove()}),ie._x_refreshXForScope(g[x.indexOf(X)])}for(let N=0;N<v.length;N++){let[$,X]=v[N],K=$==="template"?a:r[$];K._x_currentIfEl&&(K=K._x_currentIfEl);let ie=g[X],ee=x[X],le=document.importNode(a.content,!0).firstElementChild,te=tp(ie);Am(le,te,a),le._x_refreshXForScope=he=>{Object.entries(he).forEach(([de,ke])=>{te[de]=ke})},Ka(()=>{K.after(le),Oh(()=>Dc(le))()}),typeof ee=="object"&&el("x-for key cannot be an object, it must be a string or an integer",a),r[ee]=le}for(let N=0;N<F.length;N++)r[F[N]]._x_refreshXForScope(g[x.indexOf(F[N])]);a._x_prevKeys=x})}function bj(s){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,t=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,n=s.match(i);if(!n)return;let a={};a.items=n[2].trim();let o=n[1].replace(t,"").trim(),r=o.match(e);return r?(a.item=o.replace(e,"").trim(),a.index=r[1].trim(),r[2]&&(a.collection=r[2].trim())):a.item=o,a}function aT(s,e,t,i){let n={};return/^\[.*\]$/.test(s.item)&&Array.isArray(e)?s.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,r)=>{n[o]=e[r]}):/^\{.*\}$/.test(s.item)&&!Array.isArray(e)&&typeof e=="object"?s.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{n[o]=e[o]}):n[s.item]=e,s.index&&(n[s.index]=t),s.collection&&(n[s.collection]=i),n}function wj(s){return!Array.isArray(s)&&!isNaN(s)}function eL(){}eL.inline=(s,{expression:e},{cleanup:t})=>{let i=Dx(s);i._x_refs||(i._x_refs={}),i._x_refs[e]=s,t(()=>delete i._x_refs[e])};Lr("ref",eL);Lr("if",(s,{expression:e},{effect:t,cleanup:i})=>{s.tagName.toLowerCase()!=="template"&&el("x-if can only be used on a <template> tag",s);let n=Gs(s,e),a=()=>{if(s._x_currentIfEl)return s._x_currentIfEl;let r=s.content.cloneNode(!0).firstElementChild;return Am(r,{},s),Ka(()=>{s.after(r),Oh(()=>Dc(r))()}),s._x_currentIfEl=r,s._x_undoIf=()=>{Ka(()=>{rp(r),r.remove()}),delete s._x_currentIfEl},r},o=()=>{s._x_undoIf&&(s._x_undoIf(),delete s._x_undoIf)};t(()=>n(r=>{r?a():o()})),i(()=>s._x_undoIf&&s._x_undoIf())});Lr("id",(s,{expression:e},{evaluate:t})=>{t(e).forEach(n=>lj(s,n))});Ox((s,e)=>{s._x_ids&&(e._x_ids=s._x_ids)});zw(cP("@",hP(np("on:"))));Lr("on",Oh((s,{value:e,modifiers:t,expression:i},{cleanup:n})=>{let a=i?Gs(s,i):()=>{};s.tagName.toLowerCase()==="template"&&(s._x_forwardEvents||(s._x_forwardEvents=[]),s._x_forwardEvents.includes(e)||s._x_forwardEvents.push(e));let o=gb(s,e,t,r=>{a(()=>{},{scope:{$event:r},params:[r]})});n(()=>o())}));Nx("Collapse","collapse","collapse");Nx("Intersect","intersect","intersect");Nx("Focus","trap","focus");Nx("Mask","mask","mask");function Nx(s,e,t){Lr(e,i=>el(`You can't use [x-${e}] without first installing the "${s}" plugin here: https://alpinejs.dev/plugins/${t}`,i))}Em.setEvaluator(rP);Em.setReactivityEngine({reactive:Yw,effect:R6,release:O6,raw:Ra});var Sj=Em,Mm=Sj;function kj(s){s.directive("intersect",s.skipDuringClone((e,{value:t,expression:i,modifiers:n},{evaluateLater:a,cleanup:o})=>{let r=a(i),d={rootMargin:Tj(n),threshold:Cj(n)},g=new IntersectionObserver(x=>{x.forEach(v=>{v.isIntersecting!==(t==="leave")&&(r(),n.includes("once")&&g.disconnect())})},d);g.observe(e),o(()=>{g.disconnect()})}))}function Cj(s){if(s.includes("full"))return .99;if(s.includes("half"))return .5;if(!s.includes("threshold"))return 0;let e=s[s.indexOf("threshold")+1];return e==="100"?1:e==="0"?0:+`.${e}`}function Aj(s){let e=s.match(/^(-?[0-9]+)(px|%)?$/);return e?e[1]+(e[2]||"px"):void 0}function Tj(s){const e="margin",t="0px 0px 0px 0px",i=s.indexOf(e);if(i===-1)return t;let n=[];for(let a=1;a<5;a++)n.push(Aj(s[i+a]||""));return n=n.filter(a=>a!==void 0),n.length?n.join(" ").trim():t}var Ej=kj;const Mj=()=>({active:0,shown:!1,init(){},setActive(s){this.active=s},reveal(){this.shown=!0}});var mi;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(mi||(mi={}));var rT=new Map([[mi.QR_CODE,"QR_CODE"],[mi.AZTEC,"AZTEC"],[mi.CODABAR,"CODABAR"],[mi.CODE_39,"CODE_39"],[mi.CODE_93,"CODE_93"],[mi.CODE_128,"CODE_128"],[mi.DATA_MATRIX,"DATA_MATRIX"],[mi.MAXICODE,"MAXICODE"],[mi.ITF,"ITF"],[mi.EAN_13,"EAN_13"],[mi.EAN_8,"EAN_8"],[mi.PDF_417,"PDF_417"],[mi.RSS_14,"RSS_14"],[mi.RSS_EXPANDED,"RSS_EXPANDED"],[mi.UPC_A,"UPC_A"],[mi.UPC_E,"UPC_E"],[mi.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),sT;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(sT||(sT={}));function Ij(s){return Object.values(mi).includes(s)}var px;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(px||(px={}));var Pj=(function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[px.SCAN_TYPE_CAMERA,px.SCAN_TYPE_FILE],s})(),tL=(function(){function s(e,t){this.format=e,this.formatName=t}return s.prototype.toString=function(){return this.formatName},s.create=function(e){if(!rT.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new s(e,rT.get(e))},s})(),oT=(function(){function s(){}return s.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},s.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},s})(),mb;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(mb||(mb={}));var Lj=(function(){function s(){}return s.createFrom=function(e){return{errorMessage:e,type:mb.UNKWOWN_ERROR}},s})(),Dj=(function(){function s(e){this.verbose=e}return s.prototype.log=function(e){this.verbose&&console.log(e)},s.prototype.warn=function(e){this.verbose&&console.warn(e)},s.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},s.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},s})();function yc(s){return typeof s>"u"||s===null}var Tf=(function(){function s(){}return s.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},s.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s})(),iL=(function(){function s(){}return s.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var i=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var n=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(n),o=Object.keys(e),r=0,d=o;r<d.length;r++){var g=d[r];if(a.has(g))return t.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},s})(),Ag={exports:{}},Rj=Ag.exports,lT;function Oj(){return lT||(lT=1,(function(s,e){(function(t,i){i(e)})(Rj,(function(t){function i(ge){return ge==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,p){ge.__proto__=p}||function(ge,p){for(var _ in p)p.hasOwnProperty(_)&&(ge[_]=p[_])};function a(ge,p){n(ge,p);function _(){this.constructor=ge}ge.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}function o(ge,p){var _=Object.setPrototypeOf;_?_(ge,p):ge.__proto__=p}function r(ge,p){p===void 0&&(p=ge.constructor);var _=Error.captureStackTrace;_&&_(ge,p)}var d=(function(ge){a(p,ge);function p(_){var w=this.constructor,T=ge.call(this,_)||this;return Object.defineProperty(T,"name",{value:w.name,enumerable:!1}),o(T,w.prototype),r(T),T}return p})(Error);class g extends d{constructor(p=void 0){super(p),this.message=p}getKind(){return this.constructor.kind}}g.kind="Exception";class x extends g{}x.kind="ArgumentException";class v extends g{}v.kind="IllegalArgumentException";class k{constructor(p){if(this.binarizer=p,p===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(p,_){return this.binarizer.getBlackRow(p,_)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(p,_,w,T){const M=this.binarizer.getLuminanceSource().crop(p,_,w,T);return new k(this.binarizer.createBinarizer(M))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const p=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(p))}rotateCounterClockwise45(){const p=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(p))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class E extends g{static getChecksumInstance(){return new E}}E.kind="ChecksumException";class F{constructor(p){this.source=p}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class O{static arraycopy(p,_,w,T,M){for(;M--;)w[T++]=p[_++]}static currentTimeMillis(){return Date.now()}}class N extends g{}N.kind="IndexOutOfBoundsException";class $ extends N{constructor(p=void 0,_=void 0){super(_),this.index=p,this.message=_}}$.kind="ArrayIndexOutOfBoundsException";class X{static fill(p,_){for(let w=0,T=p.length;w<T;w++)p[w]=_}static fillWithin(p,_,w,T){X.rangeCheck(p.length,_,w);for(let M=_;M<w;M++)p[M]=T}static rangeCheck(p,_,w){if(_>w)throw new v("fromIndex("+_+") > toIndex("+w+")");if(_<0)throw new $(_);if(w>p)throw new $(w)}static asList(...p){return p}static create(p,_,w){return Array.from({length:p}).map(M=>Array.from({length:_}).fill(w))}static createInt32Array(p,_,w){return Array.from({length:p}).map(M=>Int32Array.from({length:_}).fill(w))}static equals(p,_){if(!p||!_||!p.length||!_.length||p.length!==_.length)return!1;for(let w=0,T=p.length;w<T;w++)if(p[w]!==_[w])return!1;return!0}static hashCode(p){if(p===null)return 0;let _=1;for(const w of p)_=31*_+w;return _}static fillUint8Array(p,_){for(let w=0;w!==p.length;w++)p[w]=_}static copyOf(p,_){return p.slice(0,_)}static copyOfUint8Array(p,_){if(p.length<=_){const w=new Uint8Array(_);return w.set(p),w}return p.slice(0,_)}static copyOfRange(p,_,w){const T=w-_,M=new Int32Array(T);return O.arraycopy(p,_,M,0,T),M}static binarySearch(p,_,w){w===void 0&&(w=X.numberComparator);let T=0,M=p.length-1;for(;T<=M;){const R=M+T>>1,V=w(_,p[R]);if(V>0)T=R+1;else if(V<0)M=R-1;else return R}return-T-1}static numberComparator(p,_){return p-_}}class K{static numberOfTrailingZeros(p){let _;if(p===0)return 32;let w=31;return _=p<<16,_!==0&&(w-=16,p=_),_=p<<8,_!==0&&(w-=8,p=_),_=p<<4,_!==0&&(w-=4,p=_),_=p<<2,_!==0&&(w-=2,p=_),w-(p<<1>>>31)}static numberOfLeadingZeros(p){if(p===0)return 32;let _=1;return p>>>16||(_+=16,p<<=16),p>>>24||(_+=8,p<<=8),p>>>28||(_+=4,p<<=4),p>>>30||(_+=2,p<<=2),_-=p>>>31,_}static toHexString(p){return p.toString(16)}static toBinaryString(p){return String(parseInt(String(p),2))}static bitCount(p){return p=p-(p>>>1&1431655765),p=(p&858993459)+(p>>>2&858993459),p=p+(p>>>4)&252645135,p=p+(p>>>8),p=p+(p>>>16),p&63}static truncDivision(p,_){return Math.trunc(p/_)}static parseInt(p,_=void 0){return parseInt(p,_)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ie{constructor(p,_){p===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=p,_==null?this.bits=ie.makeArray(p):this.bits=_)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(p){if(p>this.bits.length*32){const _=ie.makeArray(p);O.arraycopy(this.bits,0,_,0,this.bits.length),this.bits=_}}get(p){return(this.bits[Math.floor(p/32)]&1<<(p&31))!==0}set(p){this.bits[Math.floor(p/32)]|=1<<(p&31)}flip(p){this.bits[Math.floor(p/32)]^=1<<(p&31)}getNextSet(p){const _=this.size;if(p>=_)return _;const w=this.bits;let T=Math.floor(p/32),M=w[T];M&=~((1<<(p&31))-1);const R=w.length;for(;M===0;){if(++T===R)return _;M=w[T]}const V=T*32+K.numberOfTrailingZeros(M);return V>_?_:V}getNextUnset(p){const _=this.size;if(p>=_)return _;const w=this.bits;let T=Math.floor(p/32),M=~w[T];M&=~((1<<(p&31))-1);const R=w.length;for(;M===0;){if(++T===R)return _;M=~w[T]}const V=T*32+K.numberOfTrailingZeros(M);return V>_?_:V}setBulk(p,_){this.bits[Math.floor(p/32)]=_}setRange(p,_){if(_<p||p<0||_>this.size)throw new v;if(_===p)return;_--;const w=Math.floor(p/32),T=Math.floor(_/32),M=this.bits;for(let R=w;R<=T;R++){const V=R>w?0:p&31,q=(2<<(R<T?31:_&31))-(1<<V);M[R]|=q}}clear(){const p=this.bits.length,_=this.bits;for(let w=0;w<p;w++)_[w]=0}isRange(p,_,w){if(_<p||p<0||_>this.size)throw new v;if(_===p)return!0;_--;const T=Math.floor(p/32),M=Math.floor(_/32),R=this.bits;for(let V=T;V<=M;V++){const G=V>T?0:p&31,oe=(2<<(V<M?31:_&31))-(1<<G)&4294967295;if((R[V]&oe)!==(w?oe:0))return!1}return!0}appendBit(p){this.ensureCapacity(this.size+1),p&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(p,_){if(_<0||_>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+_);for(let w=_;w>0;w--)this.appendBit((p>>w-1&1)===1)}appendBitArray(p){const _=p.size;this.ensureCapacity(this.size+_);for(let w=0;w<_;w++)this.appendBit(p.get(w))}xor(p){if(this.size!==p.size)throw new v("Sizes don't match");const _=this.bits;for(let w=0,T=_.length;w<T;w++)_[w]^=p.bits[w]}toBytes(p,_,w,T){for(let M=0;M<T;M++){let R=0;for(let V=0;V<8;V++)this.get(p)&&(R|=1<<7-V),p++;_[w+M]=R}}getBitArray(){return this.bits}reverse(){const p=new Int32Array(this.bits.length),_=Math.floor((this.size-1)/32),w=_+1,T=this.bits;for(let M=0;M<w;M++){let R=T[M];R=R>>1&1431655765|(R&1431655765)<<1,R=R>>2&858993459|(R&858993459)<<2,R=R>>4&252645135|(R&252645135)<<4,R=R>>8&16711935|(R&16711935)<<8,R=R>>16&65535|(R&65535)<<16,p[_-M]=R}if(this.size!==w*32){const M=w*32-this.size;let R=p[0]>>>M;for(let V=1;V<w;V++){const G=p[V];R|=G<<32-M,p[V-1]=R,R=G>>>M}p[w-1]=R}this.bits=p}static makeArray(p){return new Int32Array(Math.floor((p+31)/32))}equals(p){if(!(p instanceof ie))return!1;const _=p;return this.size===_.size&&X.equals(this.bits,_.bits)}hashCode(){return 31*this.size+X.hashCode(this.bits)}toString(){let p="";for(let _=0,w=this.size;_<w;_++)(_&7)===0&&(p+=" "),p+=this.get(_)?"X":".";return p}clone(){return new ie(this.size,this.bits.slice())}}var ee;(function(ge){ge[ge.OTHER=0]="OTHER",ge[ge.PURE_BARCODE=1]="PURE_BARCODE",ge[ge.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",ge[ge.TRY_HARDER=3]="TRY_HARDER",ge[ge.CHARACTER_SET=4]="CHARACTER_SET",ge[ge.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",ge[ge.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",ge[ge.ASSUME_GS1=7]="ASSUME_GS1",ge[ge.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",ge[ge.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",ge[ge.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ee||(ee={}));var le=ee;class te extends g{static getFormatInstance(){return new te}}te.kind="FormatException";var he;(function(ge){ge[ge.Cp437=0]="Cp437",ge[ge.ISO8859_1=1]="ISO8859_1",ge[ge.ISO8859_2=2]="ISO8859_2",ge[ge.ISO8859_3=3]="ISO8859_3",ge[ge.ISO8859_4=4]="ISO8859_4",ge[ge.ISO8859_5=5]="ISO8859_5",ge[ge.ISO8859_6=6]="ISO8859_6",ge[ge.ISO8859_7=7]="ISO8859_7",ge[ge.ISO8859_8=8]="ISO8859_8",ge[ge.ISO8859_9=9]="ISO8859_9",ge[ge.ISO8859_10=10]="ISO8859_10",ge[ge.ISO8859_11=11]="ISO8859_11",ge[ge.ISO8859_13=12]="ISO8859_13",ge[ge.ISO8859_14=13]="ISO8859_14",ge[ge.ISO8859_15=14]="ISO8859_15",ge[ge.ISO8859_16=15]="ISO8859_16",ge[ge.SJIS=16]="SJIS",ge[ge.Cp1250=17]="Cp1250",ge[ge.Cp1251=18]="Cp1251",ge[ge.Cp1252=19]="Cp1252",ge[ge.Cp1256=20]="Cp1256",ge[ge.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",ge[ge.UTF8=22]="UTF8",ge[ge.ASCII=23]="ASCII",ge[ge.Big5=24]="Big5",ge[ge.GB18030=25]="GB18030",ge[ge.EUC_KR=26]="EUC_KR"})(he||(he={}));class de{constructor(p,_,w,...T){this.valueIdentifier=p,this.name=w,typeof _=="number"?this.values=Int32Array.from([_]):this.values=_,this.otherEncodingNames=T,de.VALUE_IDENTIFIER_TO_ECI.set(p,this),de.NAME_TO_ECI.set(w,this);const M=this.values;for(let R=0,V=M.length;R!==V;R++){const G=M[R];de.VALUES_TO_ECI.set(G,this)}for(const R of T)de.NAME_TO_ECI.set(R,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(p){if(p<0||p>=900)throw new te("incorect value");const _=de.VALUES_TO_ECI.get(p);if(_===void 0)throw new te("incorect value");return _}static getCharacterSetECIByName(p){const _=de.NAME_TO_ECI.get(p);if(_===void 0)throw new te("incorect value");return _}equals(p){if(!(p instanceof de))return!1;const _=p;return this.getName()===_.getName()}}de.VALUE_IDENTIFIER_TO_ECI=new Map,de.VALUES_TO_ECI=new Map,de.NAME_TO_ECI=new Map,de.Cp437=new de(he.Cp437,Int32Array.from([0,2]),"Cp437"),de.ISO8859_1=new de(he.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),de.ISO8859_2=new de(he.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),de.ISO8859_3=new de(he.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),de.ISO8859_4=new de(he.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),de.ISO8859_5=new de(he.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),de.ISO8859_6=new de(he.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),de.ISO8859_7=new de(he.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),de.ISO8859_8=new de(he.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),de.ISO8859_9=new de(he.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),de.ISO8859_10=new de(he.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),de.ISO8859_11=new de(he.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),de.ISO8859_13=new de(he.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),de.ISO8859_14=new de(he.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),de.ISO8859_15=new de(he.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),de.ISO8859_16=new de(he.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),de.SJIS=new de(he.SJIS,20,"SJIS","Shift_JIS"),de.Cp1250=new de(he.Cp1250,21,"Cp1250","windows-1250"),de.Cp1251=new de(he.Cp1251,22,"Cp1251","windows-1251"),de.Cp1252=new de(he.Cp1252,23,"Cp1252","windows-1252"),de.Cp1256=new de(he.Cp1256,24,"Cp1256","windows-1256"),de.UnicodeBigUnmarked=new de(he.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),de.UTF8=new de(he.UTF8,26,"UTF8","UTF-8"),de.ASCII=new de(he.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),de.Big5=new de(he.Big5,28,"Big5"),de.GB18030=new de(he.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),de.EUC_KR=new de(he.EUC_KR,30,"EUC_KR","EUC-KR");class ke extends g{}ke.kind="UnsupportedOperationException";class De{static decode(p,_){const w=this.encodingName(_);return this.customDecoder?this.customDecoder(p,w):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(w)?this.decodeFallback(p,w):new TextDecoder(w).decode(p)}static shouldDecodeOnFallback(p){return!De.isBrowser()&&p==="ISO-8859-1"}static encode(p,_){const w=this.encodingName(_);return this.customEncoder?this.customEncoder(p,w):typeof TextEncoder>"u"?this.encodeFallback(p):new TextEncoder().encode(p)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(p){return typeof p=="string"?p:p.getName()}static encodingCharacterSet(p){return p instanceof de?p:de.getCharacterSetECIByName(p)}static decodeFallback(p,_){const w=this.encodingCharacterSet(_);if(De.isDecodeFallbackSupported(w)){let T="";for(let M=0,R=p.length;M<R;M++){let V=p[M].toString(16);V.length<2&&(V="0"+V),T+="%"+V}return decodeURIComponent(T)}if(w.equals(de.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(p.buffer));throw new ke(`Encoding ${this.encodingName(_)} not supported by fallback.`)}static isDecodeFallbackSupported(p){return p.equals(de.UTF8)||p.equals(de.ISO8859_1)||p.equals(de.ASCII)}static encodeFallback(p){const w=btoa(unescape(encodeURIComponent(p))).split(""),T=[];for(let M=0;M<w.length;M++)T.push(w[M].charCodeAt(0));return new Uint8Array(T)}}class Ae{static castAsNonUtf8Char(p,_=null){const w=_?_.getName():this.ISO88591;return De.decode(new Uint8Array([p]),w)}static guessEncoding(p,_){if(_!=null&&_.get(le.CHARACTER_SET)!==void 0)return _.get(le.CHARACTER_SET).toString();const w=p.length;let T=!0,M=!0,R=!0,V=0,G=0,q=0,oe=0,me=0,we=0,Re=0,Ye=0,Ze=0,ct=0,yt=0;const Ht=p.length>3&&p[0]===239&&p[1]===187&&p[2]===191;for(let Wt=0;Wt<w&&(T||M||R);Wt++){const Ft=p[Wt]&255;R&&(V>0?(Ft&128)===0?R=!1:V--:(Ft&128)!==0&&((Ft&64)===0?R=!1:(V++,(Ft&32)===0?G++:(V++,(Ft&16)===0?q++:(V++,(Ft&8)===0?oe++:R=!1))))),T&&(Ft>127&&Ft<160?T=!1:Ft>159&&(Ft<192||Ft===215||Ft===247)&&yt++),M&&(me>0?Ft<64||Ft===127||Ft>252?M=!1:me--:Ft===128||Ft===160||Ft>239?M=!1:Ft>160&&Ft<224?(we++,Ye=0,Re++,Re>Ze&&(Ze=Re)):Ft>127?(me++,Re=0,Ye++,Ye>ct&&(ct=Ye)):(Re=0,Ye=0))}return R&&V>0&&(R=!1),M&&me>0&&(M=!1),R&&(Ht||G+q+oe>0)?Ae.UTF8:M&&(Ae.ASSUME_SHIFT_JIS||Ze>=3||ct>=3)?Ae.SHIFT_JIS:T&&M?Ze===2&&we===2||yt*10>=w?Ae.SHIFT_JIS:Ae.ISO88591:T?Ae.ISO88591:M?Ae.SHIFT_JIS:R?Ae.UTF8:Ae.PLATFORM_DEFAULT_ENCODING}static format(p,..._){let w=-1;function T(R,V,G,q,oe,me){if(R==="%%")return"%";if(_[++w]===void 0)return;R=q?parseInt(q.substr(1)):void 0;let we=oe?parseInt(oe.substr(1)):void 0,Re;switch(me){case"s":Re=_[w];break;case"c":Re=_[w][0];break;case"f":Re=parseFloat(_[w]).toFixed(R);break;case"p":Re=parseFloat(_[w]).toPrecision(R);break;case"e":Re=parseFloat(_[w]).toExponential(R);break;case"x":Re=parseInt(_[w]).toString(we||16);break;case"d":Re=parseFloat(parseInt(_[w],we||10).toPrecision(R)).toFixed(0);break}Re=typeof Re=="object"?JSON.stringify(Re):(+Re).toString(we);let Ye=parseInt(G),Ze=G&&G[0]+""=="0"?"0":" ";for(;Re.length<Ye;)Re=V!==void 0?Re+Ze:Ze+Re;return Re}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return p.replace(M,T)}static getBytes(p,_){return De.encode(p,_)}static getCharCode(p,_=0){return p.charCodeAt(_)}static getCharAt(p){return String.fromCharCode(p)}}Ae.SHIFT_JIS=de.SJIS.getName(),Ae.GB2312="GB2312",Ae.ISO88591=de.ISO8859_1.getName(),Ae.EUC_JP="EUC_JP",Ae.UTF8=de.UTF8.getName(),Ae.PLATFORM_DEFAULT_ENCODING=Ae.UTF8,Ae.ASSUME_SHIFT_JIS=!1;class $e{constructor(p=""){this.value=p}enableDecoding(p){return this.encoding=p,this}append(p){return typeof p=="string"?this.value+=p.toString():this.encoding?this.value+=Ae.castAsNonUtf8Char(p,this.encoding):this.value+=String.fromCharCode(p),this}appendChars(p,_,w){for(let T=_;_<_+w;T++)this.append(p[T]);return this}length(){return this.value.length}charAt(p){return this.value.charAt(p)}deleteCharAt(p){this.value=this.value.substr(0,p)+this.value.substring(p+1)}setCharAt(p,_){this.value=this.value.substr(0,p)+_+this.value.substr(p+1)}substring(p,_){return this.value.substring(p,_)}setLengthToZero(){this.value=""}toString(){return this.value}insert(p,_){this.value=this.value.substr(0,p)+_+this.value.substr(p+_.length)}}class et{constructor(p,_,w,T){if(this.width=p,this.height=_,this.rowSize=w,this.bits=T,_==null&&(_=p),this.height=_,p<1||_<1)throw new v("Both dimensions must be greater than 0");w==null&&(w=Math.floor((p+31)/32)),this.rowSize=w,T==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(p){const _=p.length,w=p[0].length,T=new et(w,_);for(let M=0;M<_;M++){const R=p[M];for(let V=0;V<w;V++)R[V]&&T.set(V,M)}return T}static parseFromString(p,_,w){if(p===null)throw new v("stringRepresentation cannot be null");const T=new Array(p.length);let M=0,R=0,V=-1,G=0,q=0;for(;q<p.length;)if(p.charAt(q)===`
`||p.charAt(q)==="\r"){if(M>R){if(V===-1)V=M-R;else if(M-R!==V)throw new v("row lengths do not match");R=M,G++}q++}else if(p.substring(q,q+_.length)===_)q+=_.length,T[M]=!0,M++;else if(p.substring(q,q+w.length)===w)q+=w.length,T[M]=!1,M++;else throw new v("illegal character encountered: "+p.substring(q));if(M>R){if(V===-1)V=M-R;else if(M-R!==V)throw new v("row lengths do not match");G++}const oe=new et(V,G);for(let me=0;me<M;me++)T[me]&&oe.set(Math.floor(me%V),Math.floor(me/V));return oe}get(p,_){const w=_*this.rowSize+Math.floor(p/32);return(this.bits[w]>>>(p&31)&1)!==0}set(p,_){const w=_*this.rowSize+Math.floor(p/32);this.bits[w]|=1<<(p&31)&4294967295}unset(p,_){const w=_*this.rowSize+Math.floor(p/32);this.bits[w]&=~(1<<(p&31)&4294967295)}flip(p,_){const w=_*this.rowSize+Math.floor(p/32);this.bits[w]^=1<<(p&31)&4294967295}xor(p){if(this.width!==p.getWidth()||this.height!==p.getHeight()||this.rowSize!==p.getRowSize())throw new v("input matrix dimensions do not match");const _=new ie(Math.floor(this.width/32)+1),w=this.rowSize,T=this.bits;for(let M=0,R=this.height;M<R;M++){const V=M*w,G=p.getRow(M,_).getBitArray();for(let q=0;q<w;q++)T[V+q]^=G[q]}}clear(){const p=this.bits,_=p.length;for(let w=0;w<_;w++)p[w]=0}setRegion(p,_,w,T){if(_<0||p<0)throw new v("Left and top must be nonnegative");if(T<1||w<1)throw new v("Height and width must be at least 1");const M=p+w,R=_+T;if(R>this.height||M>this.width)throw new v("The region must fit inside the matrix");const V=this.rowSize,G=this.bits;for(let q=_;q<R;q++){const oe=q*V;for(let me=p;me<M;me++)G[oe+Math.floor(me/32)]|=1<<(me&31)&4294967295}}getRow(p,_){_==null||_.getSize()<this.width?_=new ie(this.width):_.clear();const w=this.rowSize,T=this.bits,M=p*w;for(let R=0;R<w;R++)_.setBulk(R*32,T[M+R]);return _}setRow(p,_){O.arraycopy(_.getBitArray(),0,this.bits,p*this.rowSize,this.rowSize)}rotate180(){const p=this.getWidth(),_=this.getHeight();let w=new ie(p),T=new ie(p);for(let M=0,R=Math.floor((_+1)/2);M<R;M++)w=this.getRow(M,w),T=this.getRow(_-1-M,T),w.reverse(),T.reverse(),this.setRow(M,T),this.setRow(_-1-M,w)}getEnclosingRectangle(){const p=this.width,_=this.height,w=this.rowSize,T=this.bits;let M=p,R=_,V=-1,G=-1;for(let q=0;q<_;q++)for(let oe=0;oe<w;oe++){const me=T[q*w+oe];if(me!==0){if(q<R&&(R=q),q>G&&(G=q),oe*32<M){let we=0;for(;(me<<31-we&4294967295)===0;)we++;oe*32+we<M&&(M=oe*32+we)}if(oe*32+31>V){let we=31;for(;!(me>>>we);)we--;oe*32+we>V&&(V=oe*32+we)}}}return V<M||G<R?null:Int32Array.from([M,R,V-M+1,G-R+1])}getTopLeftOnBit(){const p=this.rowSize,_=this.bits;let w=0;for(;w<_.length&&_[w]===0;)w++;if(w===_.length)return null;const T=w/p;let M=w%p*32;const R=_[w];let V=0;for(;(R<<31-V&4294967295)===0;)V++;return M+=V,Int32Array.from([M,T])}getBottomRightOnBit(){const p=this.rowSize,_=this.bits;let w=_.length-1;for(;w>=0&&_[w]===0;)w--;if(w<0)return null;const T=Math.floor(w/p);let M=Math.floor(w%p)*32;const R=_[w];let V=31;for(;!(R>>>V);)V--;return M+=V,Int32Array.from([M,T])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(p){if(!(p instanceof et))return!1;const _=p;return this.width===_.width&&this.height===_.height&&this.rowSize===_.rowSize&&X.equals(this.bits,_.bits)}hashCode(){let p=this.width;return p=31*p+this.width,p=31*p+this.height,p=31*p+this.rowSize,p=31*p+X.hashCode(this.bits),p}toString(p="X ",_="  ",w=`
`){return this.buildToString(p,_,w)}buildToString(p,_,w){let T=new $e;for(let M=0,R=this.height;M<R;M++){for(let V=0,G=this.width;V<G;V++)T.append(this.get(V,M)?p:_);T.append(w)}return T.toString()}clone(){return new et(this.width,this.height,this.rowSize,this.bits.slice())}}class Ie extends g{static getNotFoundInstance(){return new Ie}}Ie.kind="NotFoundException";class at extends F{constructor(p){super(p),this.luminances=at.EMPTY,this.buckets=new Int32Array(at.LUMINANCE_BUCKETS)}getBlackRow(p,_){const w=this.getLuminanceSource(),T=w.getWidth();_==null||_.getSize()<T?_=new ie(T):_.clear(),this.initArrays(T);const M=w.getRow(p,this.luminances),R=this.buckets;for(let G=0;G<T;G++)R[(M[G]&255)>>at.LUMINANCE_SHIFT]++;const V=at.estimateBlackPoint(R);if(T<3)for(let G=0;G<T;G++)(M[G]&255)<V&&_.set(G);else{let G=M[0]&255,q=M[1]&255;for(let oe=1;oe<T-1;oe++){const me=M[oe+1]&255;(q*4-G-me)/2<V&&_.set(oe),G=q,q=me}}return _}getBlackMatrix(){const p=this.getLuminanceSource(),_=p.getWidth(),w=p.getHeight(),T=new et(_,w);this.initArrays(_);const M=this.buckets;for(let G=1;G<5;G++){const q=Math.floor(w*G/5),oe=p.getRow(q,this.luminances),me=Math.floor(_*4/5);for(let we=Math.floor(_/5);we<me;we++){const Re=oe[we]&255;M[Re>>at.LUMINANCE_SHIFT]++}}const R=at.estimateBlackPoint(M),V=p.getMatrix();for(let G=0;G<w;G++){const q=G*_;for(let oe=0;oe<_;oe++)(V[q+oe]&255)<R&&T.set(oe,G)}return T}createBinarizer(p){return new at(p)}initArrays(p){this.luminances.length<p&&(this.luminances=new Uint8ClampedArray(p));const _=this.buckets;for(let w=0;w<at.LUMINANCE_BUCKETS;w++)_[w]=0}static estimateBlackPoint(p){const _=p.length;let w=0,T=0,M=0;for(let oe=0;oe<_;oe++)p[oe]>M&&(T=oe,M=p[oe]),p[oe]>w&&(w=p[oe]);let R=0,V=0;for(let oe=0;oe<_;oe++){const me=oe-T,we=p[oe]*me*me;we>V&&(R=oe,V=we)}if(T>R){const oe=T;T=R,R=oe}if(R-T<=_/16)throw new Ie;let G=R-1,q=-1;for(let oe=R-1;oe>T;oe--){const me=oe-T,we=me*me*(R-oe)*(w-p[oe]);we>q&&(G=oe,q=we)}return G<<at.LUMINANCE_SHIFT}}at.LUMINANCE_BITS=5,at.LUMINANCE_SHIFT=8-at.LUMINANCE_BITS,at.LUMINANCE_BUCKETS=1<<at.LUMINANCE_BITS,at.EMPTY=Uint8ClampedArray.from([0]);class qe extends at{constructor(p){super(p),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const p=this.getLuminanceSource(),_=p.getWidth(),w=p.getHeight();if(_>=qe.MINIMUM_DIMENSION&&w>=qe.MINIMUM_DIMENSION){const T=p.getMatrix();let M=_>>qe.BLOCK_SIZE_POWER;(_&qe.BLOCK_SIZE_MASK)!==0&&M++;let R=w>>qe.BLOCK_SIZE_POWER;(w&qe.BLOCK_SIZE_MASK)!==0&&R++;const V=qe.calculateBlackPoints(T,M,R,_,w),G=new et(_,w);qe.calculateThresholdForBlock(T,M,R,_,w,V,G),this.matrix=G}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(p){return new qe(p)}static calculateThresholdForBlock(p,_,w,T,M,R,V){const G=M-qe.BLOCK_SIZE,q=T-qe.BLOCK_SIZE;for(let oe=0;oe<w;oe++){let me=oe<<qe.BLOCK_SIZE_POWER;me>G&&(me=G);const we=qe.cap(oe,2,w-3);for(let Re=0;Re<_;Re++){let Ye=Re<<qe.BLOCK_SIZE_POWER;Ye>q&&(Ye=q);const Ze=qe.cap(Re,2,_-3);let ct=0;for(let Ht=-2;Ht<=2;Ht++){const Wt=R[we+Ht];ct+=Wt[Ze-2]+Wt[Ze-1]+Wt[Ze]+Wt[Ze+1]+Wt[Ze+2]}const yt=ct/25;qe.thresholdBlock(p,Ye,me,yt,T,V)}}}static cap(p,_,w){return p<_?_:p>w?w:p}static thresholdBlock(p,_,w,T,M,R){for(let V=0,G=w*M+_;V<qe.BLOCK_SIZE;V++,G+=M)for(let q=0;q<qe.BLOCK_SIZE;q++)(p[G+q]&255)<=T&&R.set(_+q,w+V)}static calculateBlackPoints(p,_,w,T,M){const R=M-qe.BLOCK_SIZE,V=T-qe.BLOCK_SIZE,G=new Array(w);for(let q=0;q<w;q++){G[q]=new Int32Array(_);let oe=q<<qe.BLOCK_SIZE_POWER;oe>R&&(oe=R);for(let me=0;me<_;me++){let we=me<<qe.BLOCK_SIZE_POWER;we>V&&(we=V);let Re=0,Ye=255,Ze=0;for(let yt=0,Ht=oe*T+we;yt<qe.BLOCK_SIZE;yt++,Ht+=T){for(let Wt=0;Wt<qe.BLOCK_SIZE;Wt++){const Ft=p[Ht+Wt]&255;Re+=Ft,Ft<Ye&&(Ye=Ft),Ft>Ze&&(Ze=Ft)}if(Ze-Ye>qe.MIN_DYNAMIC_RANGE)for(yt++,Ht+=T;yt<qe.BLOCK_SIZE;yt++,Ht+=T)for(let Wt=0;Wt<qe.BLOCK_SIZE;Wt++)Re+=p[Ht+Wt]&255}let ct=Re>>qe.BLOCK_SIZE_POWER*2;if(Ze-Ye<=qe.MIN_DYNAMIC_RANGE&&(ct=Ye/2,q>0&&me>0)){const yt=(G[q-1][me]+2*G[q][me-1]+G[q-1][me-1])/4;Ye<yt&&(ct=yt)}G[q][me]=ct}}return G}}qe.BLOCK_SIZE_POWER=3,qe.BLOCK_SIZE=1<<qe.BLOCK_SIZE_POWER,qe.BLOCK_SIZE_MASK=qe.BLOCK_SIZE-1,qe.MINIMUM_DIMENSION=qe.BLOCK_SIZE*5,qe.MIN_DYNAMIC_RANGE=24;class kt{constructor(p,_){this.width=p,this.height=_}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(p,_,w,T){throw new ke("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ke("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ke("This luminance source does not support rotation by 45 degrees.")}toString(){const p=new Uint8ClampedArray(this.width);let _=new $e;for(let w=0;w<this.height;w++){const T=this.getRow(w,p);for(let M=0;M<this.width;M++){const R=T[M]&255;let V;R<64?V="#":R<128?V="+":R<192?V=".":V=" ",_.append(V)}_.append(`
`)}return _.toString()}}class vt extends kt{constructor(p){super(p.getWidth(),p.getHeight()),this.delegate=p}getRow(p,_){const w=this.delegate.getRow(p,_),T=this.getWidth();for(let M=0;M<T;M++)w[M]=255-(w[M]&255);return w}getMatrix(){const p=this.delegate.getMatrix(),_=this.getWidth()*this.getHeight(),w=new Uint8ClampedArray(_);for(let T=0;T<_;T++)w[T]=255-(p[T]&255);return w}isCropSupported(){return this.delegate.isCropSupported()}crop(p,_,w,T){return new vt(this.delegate.crop(p,_,w,T))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new vt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new vt(this.delegate.rotateCounterClockwise45())}}class He extends kt{constructor(p){super(p.width,p.height),this.canvas=p,this.tempCanvasElement=null,this.buffer=He.makeBufferFromCanvasImageData(p)}static makeBufferFromCanvasImageData(p){const _=p.getContext("2d").getImageData(0,0,p.width,p.height);return He.toGrayscaleBuffer(_.data,p.width,p.height)}static toGrayscaleBuffer(p,_,w){const T=new Uint8ClampedArray(_*w);for(let M=0,R=0,V=p.length;M<V;M+=4,R++){let G;if(p[M+3]===0)G=255;else{const oe=p[M],me=p[M+1],we=p[M+2];G=306*oe+601*me+117*we+512>>10}T[R]=G}return T}getRow(p,_){if(p<0||p>=this.getHeight())throw new v("Requested row is outside the image: "+p);const w=this.getWidth(),T=p*w;return _===null?_=this.buffer.slice(T,T+w):(_.length<w&&(_=new Uint8ClampedArray(w)),_.set(this.buffer.slice(T,T+w))),_}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(p,_,w,T){return super.crop(p,_,w,T),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const p=this.canvas.ownerDocument.createElement("canvas");p.width=this.canvas.width,p.height=this.canvas.height,this.tempCanvasElement=p}return this.tempCanvasElement}rotate(p){const _=this.getTempCanvasElement(),w=_.getContext("2d"),T=p*He.DEGREE_TO_RADIANS,M=this.canvas.width,R=this.canvas.height,V=Math.ceil(Math.abs(Math.cos(T))*M+Math.abs(Math.sin(T))*R),G=Math.ceil(Math.abs(Math.sin(T))*M+Math.abs(Math.cos(T))*R);return _.width=V,_.height=G,w.translate(V/2,G/2),w.rotate(T),w.drawImage(this.canvas,M/-2,R/-2),this.buffer=He.makeBufferFromCanvasImageData(_),this}invert(){return new vt(this)}}He.DEGREE_TO_RADIANS=Math.PI/180;class Nt{constructor(p,_,w){this.deviceId=p,this.label=_,this.kind="videoinput",this.groupId=w||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Qt=(globalThis||Jn||self||window||void 0)&&(globalThis||Jn||self||window||void 0).__awaiter||function(ge,p,_,w){function T(M){return M instanceof _?M:new _(function(R){R(M)})}return new(_||(_=Promise))(function(M,R){function V(oe){try{q(w.next(oe))}catch(me){R(me)}}function G(oe){try{q(w.throw(oe))}catch(me){R(me)}}function q(oe){oe.done?M(oe.value):T(oe.value).then(V,G)}q((w=w.apply(ge,p||[])).next())})};class Ai{constructor(p,_=500,w){this.reader=p,this.timeBetweenScansMillis=_,this._hints=w,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(p){this._timeBetweenDecodingAttempts=p<0?0:p}set hints(p){this._hints=p||null}get hints(){return this._hints}listVideoInputDevices(){return Qt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const p=yield navigator.mediaDevices.enumerateDevices(),_=[];for(const w of p){const T=w.kind==="video"?"videoinput":w.kind;if(T!=="videoinput")continue;const M=w.deviceId||w.id,R=w.label||`Video device ${_.length+1}`,V=w.groupId,G={deviceId:M,label:R,kind:T,groupId:V};_.push(G)}return _})}getVideoInputDevices(){return Qt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(_=>new Nt(_.deviceId,_.label))})}findDeviceById(p){return Qt(this,void 0,void 0,function*(){const _=yield this.listVideoInputDevices();return _?_.find(w=>w.deviceId===p):null})}decodeFromInputVideoDevice(p,_){return Qt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(p,_)})}decodeOnceFromVideoDevice(p,_){return Qt(this,void 0,void 0,function*(){this.reset();let w;p?w={deviceId:{exact:p}}:w={facingMode:"environment"};const T={video:w};return yield this.decodeOnceFromConstraints(T,_)})}decodeOnceFromConstraints(p,_){return Qt(this,void 0,void 0,function*(){const w=yield navigator.mediaDevices.getUserMedia(p);return yield this.decodeOnceFromStream(w,_)})}decodeOnceFromStream(p,_){return Qt(this,void 0,void 0,function*(){this.reset();const w=yield this.attachStreamToVideo(p,_);return yield this.decodeOnce(w)})}decodeFromInputVideoDeviceContinuously(p,_,w){return Qt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(p,_,w)})}decodeFromVideoDevice(p,_,w){return Qt(this,void 0,void 0,function*(){let T;p?T={deviceId:{exact:p}}:T={facingMode:"environment"};const M={video:T};return yield this.decodeFromConstraints(M,_,w)})}decodeFromConstraints(p,_,w){return Qt(this,void 0,void 0,function*(){const T=yield navigator.mediaDevices.getUserMedia(p);return yield this.decodeFromStream(T,_,w)})}decodeFromStream(p,_,w){return Qt(this,void 0,void 0,function*(){this.reset();const T=yield this.attachStreamToVideo(p,_);return yield this.decodeContinuously(T,w)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(p,_){return Qt(this,void 0,void 0,function*(){const w=this.prepareVideoElement(_);return this.addVideoSource(w,p),this.videoElement=w,this.stream=p,yield this.playVideoOnLoadAsync(w),w})}playVideoOnLoadAsync(p){return new Promise((_,w)=>this.playVideoOnLoad(p,()=>_()))}playVideoOnLoad(p,_){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(p),p.addEventListener("ended",this.videoEndedListener),p.addEventListener("canplay",this.videoCanPlayListener),p.addEventListener("playing",_),this.tryPlayVideo(p)}isVideoPlaying(p){return p.currentTime>0&&!p.paused&&!p.ended&&p.readyState>2}tryPlayVideo(p){return Qt(this,void 0,void 0,function*(){if(this.isVideoPlaying(p)){console.warn("Trying to play video that is already playing.");return}try{yield p.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(p,_){const w=document.getElementById(p);if(!w)throw new x(`element with id '${p}' not found`);if(w.nodeName.toLowerCase()!==_.toLowerCase())throw new x(`element with id '${p}' must be an ${_} element`);return w}decodeFromImage(p,_){if(!p&&!_)throw new x("either imageElement with a src set or an url must be provided");return _&&!p?this.decodeFromImageUrl(_):this.decodeFromImageElement(p)}decodeFromVideo(p,_){if(!p&&!_)throw new x("Either an element with a src set or an URL must be provided");return _&&!p?this.decodeFromVideoUrl(_):this.decodeFromVideoElement(p)}decodeFromVideoContinuously(p,_,w){if(p===void 0&&_===void 0)throw new x("Either an element with a src set or an URL must be provided");return _&&!p?this.decodeFromVideoUrlContinuously(_,w):this.decodeFromVideoElementContinuously(p,w)}decodeFromImageElement(p){if(!p)throw new x("An image element must be provided.");this.reset();const _=this.prepareImageElement(p);this.imageElement=_;let w;return this.isImageLoaded(_)?w=this.decodeOnce(_,!1,!0):w=this._decodeOnLoadImage(_),w}decodeFromVideoElement(p){const _=this._decodeFromVideoElementSetup(p);return this._decodeOnLoadVideo(_)}decodeFromVideoElementContinuously(p,_){const w=this._decodeFromVideoElementSetup(p);return this._decodeOnLoadVideoContinuously(w,_)}_decodeFromVideoElementSetup(p){if(!p)throw new x("A video element must be provided.");this.reset();const _=this.prepareVideoElement(p);return this.videoElement=_,_}decodeFromImageUrl(p){if(!p)throw new x("An URL must be provided.");this.reset();const _=this.prepareImageElement();this.imageElement=_;const w=this._decodeOnLoadImage(_);return _.src=p,w}decodeFromVideoUrl(p){if(!p)throw new x("An URL must be provided.");this.reset();const _=this.prepareVideoElement(),w=this.decodeFromVideoElement(_);return _.src=p,w}decodeFromVideoUrlContinuously(p,_){if(!p)throw new x("An URL must be provided.");this.reset();const w=this.prepareVideoElement(),T=this.decodeFromVideoElementContinuously(w,_);return w.src=p,T}_decodeOnLoadImage(p){return new Promise((_,w)=>{this.imageLoadedListener=()=>this.decodeOnce(p,!1,!0).then(_,w),p.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(p){return Qt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(p),yield this.decodeOnce(p)})}_decodeOnLoadVideoContinuously(p,_){return Qt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(p),this.decodeContinuously(p,_)})}isImageLoaded(p){return!(!p.complete||p.naturalWidth===0)}prepareImageElement(p){let _;return typeof p>"u"&&(_=document.createElement("img"),_.width=200,_.height=200),typeof p=="string"&&(_=this.getMediaElement(p,"img")),p instanceof HTMLImageElement&&(_=p),_}prepareVideoElement(p){let _;return!p&&typeof document<"u"&&(_=document.createElement("video"),_.width=200,_.height=200),typeof p=="string"&&(_=this.getMediaElement(p,"video")),p instanceof HTMLVideoElement&&(_=p),_.setAttribute("autoplay","true"),_.setAttribute("muted","true"),_.setAttribute("playsinline","true"),_}decodeOnce(p,_=!0,w=!0){this._stopAsyncDecode=!1;const T=(M,R)=>{if(this._stopAsyncDecode){R(new Ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const V=this.decode(p);M(V)}catch(V){const G=_&&V instanceof Ie,oe=(V instanceof E||V instanceof te)&&w;if(G||oe)return setTimeout(T,this._timeBetweenDecodingAttempts,M,R);R(V)}};return new Promise((M,R)=>T(M,R))}decodeContinuously(p,_){this._stopContinuousDecode=!1;const w=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const T=this.decode(p);_(T,null),setTimeout(w,this.timeBetweenScansMillis)}catch(T){_(null,T);const M=T instanceof E||T instanceof te,R=T instanceof Ie;(M||R)&&setTimeout(w,this._timeBetweenDecodingAttempts)}};w()}decode(p){const _=this.createBinaryBitmap(p);return this.decodeBitmap(_)}_isHTMLVideoElement(p){return p.videoWidth!==0}drawFrameOnCanvas(p,_,w){_||(_={sx:0,sy:0,sWidth:p.videoWidth,sHeight:p.videoHeight,dx:0,dy:0,dWidth:p.videoWidth,dHeight:p.videoHeight}),w||(w=this.captureCanvasContext),w.drawImage(p,_.sx,_.sy,_.sWidth,_.sHeight,_.dx,_.dy,_.dWidth,_.dHeight)}drawImageOnCanvas(p,_,w=this.captureCanvasContext){_||(_={sx:0,sy:0,sWidth:p.naturalWidth,sHeight:p.naturalHeight,dx:0,dy:0,dWidth:p.naturalWidth,dHeight:p.naturalHeight}),w||(w=this.captureCanvasContext),w.drawImage(p,_.sx,_.sy,_.sWidth,_.sHeight,_.dx,_.dy,_.dWidth,_.dHeight)}createBinaryBitmap(p){this.getCaptureCanvasContext(p),this._isHTMLVideoElement(p)?this.drawFrameOnCanvas(p):this.drawImageOnCanvas(p);const _=this.getCaptureCanvas(p),w=new He(_),T=new qe(w);return new k(T)}getCaptureCanvasContext(p){if(!this.captureCanvasContext){const w=this.getCaptureCanvas(p).getContext("2d");this.captureCanvasContext=w}return this.captureCanvasContext}getCaptureCanvas(p){if(!this.captureCanvas){const _=this.createCaptureCanvas(p);this.captureCanvas=_}return this.captureCanvas}decodeBitmap(p){return this.reader.decode(p,this._hints)}createCaptureCanvas(p){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const _=document.createElement("canvas");let w,T;return typeof p<"u"&&(p instanceof HTMLVideoElement?(w=p.videoWidth,T=p.videoHeight):p instanceof HTMLImageElement&&(w=p.naturalWidth||p.width,T=p.naturalHeight||p.height)),_.style.width=w+"px",_.style.height=T+"px",_.width=w,_.height=T,_}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(p=>p.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(p,_){try{p.srcObject=_}catch{p.src=URL.createObjectURL(_)}}cleanVideoSource(p){try{p.srcObject=null}catch{p.src=""}this.videoElement.removeAttribute("src")}}class jt{constructor(p,_,w=_==null?0:8*_.length,T,M,R=O.currentTimeMillis()){this.text=p,this.rawBytes=_,this.numBits=w,this.resultPoints=T,this.format=M,this.timestamp=R,this.text=p,this.rawBytes=_,w==null?this.numBits=_==null?0:8*_.length:this.numBits=w,this.resultPoints=T,this.format=M,this.resultMetadata=null,R==null?this.timestamp=O.currentTimeMillis():this.timestamp=R}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(p,_){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(p,_)}putAllMetadata(p){p!==null&&(this.resultMetadata===null?this.resultMetadata=p:this.resultMetadata=new Map(p))}addResultPoints(p){const _=this.resultPoints;if(_===null)this.resultPoints=p;else if(p!==null&&p.length>0){const w=new Array(_.length+p.length);O.arraycopy(_,0,w,0,_.length),O.arraycopy(p,0,w,_.length,p.length),this.resultPoints=w}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ui;(function(ge){ge[ge.AZTEC=0]="AZTEC",ge[ge.CODABAR=1]="CODABAR",ge[ge.CODE_39=2]="CODE_39",ge[ge.CODE_93=3]="CODE_93",ge[ge.CODE_128=4]="CODE_128",ge[ge.DATA_MATRIX=5]="DATA_MATRIX",ge[ge.EAN_8=6]="EAN_8",ge[ge.EAN_13=7]="EAN_13",ge[ge.ITF=8]="ITF",ge[ge.MAXICODE=9]="MAXICODE",ge[ge.PDF_417=10]="PDF_417",ge[ge.QR_CODE=11]="QR_CODE",ge[ge.RSS_14=12]="RSS_14",ge[ge.RSS_EXPANDED=13]="RSS_EXPANDED",ge[ge.UPC_A=14]="UPC_A",ge[ge.UPC_E=15]="UPC_E",ge[ge.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ui||(ui={}));var Ct=ui,ri;(function(ge){ge[ge.OTHER=0]="OTHER",ge[ge.ORIENTATION=1]="ORIENTATION",ge[ge.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ge[ge.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ge[ge.ISSUE_NUMBER=4]="ISSUE_NUMBER",ge[ge.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ge[ge.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ge[ge.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ge[ge.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ge[ge.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ge[ge.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ri||(ri={}));var Zt=ri;class Pi{constructor(p,_,w,T,M=-1,R=-1){this.rawBytes=p,this.text=_,this.byteSegments=w,this.ecLevel=T,this.structuredAppendSequenceNumber=M,this.structuredAppendParity=R,this.numBits=p==null?0:8*p.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(p){this.numBits=p}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(p){this.errorsCorrected=p}getErasures(){return this.erasures}setErasures(p){this.erasures=p}getOther(){return this.other}setOther(p){this.other=p}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Fi{exp(p){return this.expTable[p]}log(p){if(p===0)throw new v;return this.logTable[p]}static addOrSubtract(p,_){return p^_}}class Li{constructor(p,_){if(_.length===0)throw new v;this.field=p;const w=_.length;if(w>1&&_[0]===0){let T=1;for(;T<w&&_[T]===0;)T++;T===w?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(w-T),O.arraycopy(_,T,this.coefficients,0,this.coefficients.length))}else this.coefficients=_}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(p){return this.coefficients[this.coefficients.length-1-p]}evaluateAt(p){if(p===0)return this.getCoefficient(0);const _=this.coefficients;let w;if(p===1){w=0;for(let R=0,V=_.length;R!==V;R++){const G=_[R];w=Fi.addOrSubtract(w,G)}return w}w=_[0];const T=_.length,M=this.field;for(let R=1;R<T;R++)w=Fi.addOrSubtract(M.multiply(p,w),_[R]);return w}addOrSubtract(p){if(!this.field.equals(p.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return p;if(p.isZero())return this;let _=this.coefficients,w=p.coefficients;if(_.length>w.length){const R=_;_=w,w=R}let T=new Int32Array(w.length);const M=w.length-_.length;O.arraycopy(w,0,T,0,M);for(let R=M;R<w.length;R++)T[R]=Fi.addOrSubtract(_[R-M],w[R]);return new Li(this.field,T)}multiply(p){if(!this.field.equals(p.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||p.isZero())return this.field.getZero();const _=this.coefficients,w=_.length,T=p.coefficients,M=T.length,R=new Int32Array(w+M-1),V=this.field;for(let G=0;G<w;G++){const q=_[G];for(let oe=0;oe<M;oe++)R[G+oe]=Fi.addOrSubtract(R[G+oe],V.multiply(q,T[oe]))}return new Li(V,R)}multiplyScalar(p){if(p===0)return this.field.getZero();if(p===1)return this;const _=this.coefficients.length,w=this.field,T=new Int32Array(_),M=this.coefficients;for(let R=0;R<_;R++)T[R]=w.multiply(M[R],p);return new Li(w,T)}multiplyByMonomial(p,_){if(p<0)throw new v;if(_===0)return this.field.getZero();const w=this.coefficients,T=w.length,M=new Int32Array(T+p),R=this.field;for(let V=0;V<T;V++)M[V]=R.multiply(w[V],_);return new Li(R,M)}divide(p){if(!this.field.equals(p.field))throw new v("GenericGFPolys do not have same GenericGF field");if(p.isZero())throw new v("Divide by 0");const _=this.field;let w=_.getZero(),T=this;const M=p.getCoefficient(p.getDegree()),R=_.inverse(M);for(;T.getDegree()>=p.getDegree()&&!T.isZero();){const V=T.getDegree()-p.getDegree(),G=_.multiply(T.getCoefficient(T.getDegree()),R),q=p.multiplyByMonomial(V,G),oe=_.buildMonomial(V,G);w=w.addOrSubtract(oe),T=T.addOrSubtract(q)}return[w,T]}toString(){let p="";for(let _=this.getDegree();_>=0;_--){let w=this.getCoefficient(_);if(w!==0){if(w<0?(p+=" - ",w=-w):p.length>0&&(p+=" + "),_===0||w!==1){const T=this.field.log(w);T===0?p+="1":T===1?p+="a":(p+="a^",p+=T)}_!==0&&(_===1?p+="x":(p+="x^",p+=_))}}return p}}class en extends g{}en.kind="ArithmeticException";class qt extends Fi{constructor(p,_,w){super(),this.primitive=p,this.size=_,this.generatorBase=w;const T=new Int32Array(_);let M=1;for(let V=0;V<_;V++)T[V]=M,M*=2,M>=_&&(M^=p,M&=_-1);this.expTable=T;const R=new Int32Array(_);for(let V=0;V<_-1;V++)R[T[V]]=V;this.logTable=R,this.zero=new Li(this,Int32Array.from([0])),this.one=new Li(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(p,_){if(p<0)throw new v;if(_===0)return this.zero;const w=new Int32Array(p+1);return w[0]=_,new Li(this,w)}inverse(p){if(p===0)throw new en;return this.expTable[this.size-this.logTable[p]-1]}multiply(p,_){return p===0||_===0?0:this.expTable[(this.logTable[p]+this.logTable[_])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(p){return p===this}}qt.AZTEC_DATA_12=new qt(4201,4096,1),qt.AZTEC_DATA_10=new qt(1033,1024,1),qt.AZTEC_DATA_6=new qt(67,64,1),qt.AZTEC_PARAM=new qt(19,16,1),qt.QR_CODE_FIELD_256=new qt(285,256,0),qt.DATA_MATRIX_FIELD_256=new qt(301,256,1),qt.AZTEC_DATA_8=qt.DATA_MATRIX_FIELD_256,qt.MAXICODE_FIELD_64=qt.AZTEC_DATA_6;class Ti extends g{}Ti.kind="ReedSolomonException";class tn extends g{}tn.kind="IllegalStateException";class Bn{constructor(p){this.field=p}decode(p,_){const w=this.field,T=new Li(w,p),M=new Int32Array(_);let R=!0;for(let Re=0;Re<_;Re++){const Ye=T.evaluateAt(w.exp(Re+w.getGeneratorBase()));M[M.length-1-Re]=Ye,Ye!==0&&(R=!1)}if(R)return;const V=new Li(w,M),G=this.runEuclideanAlgorithm(w.buildMonomial(_,1),V,_),q=G[0],oe=G[1],me=this.findErrorLocations(q),we=this.findErrorMagnitudes(oe,me);for(let Re=0;Re<me.length;Re++){const Ye=p.length-1-w.log(me[Re]);if(Ye<0)throw new Ti("Bad error location");p[Ye]=qt.addOrSubtract(p[Ye],we[Re])}}runEuclideanAlgorithm(p,_,w){if(p.getDegree()<_.getDegree()){const Re=p;p=_,_=Re}const T=this.field;let M=p,R=_,V=T.getZero(),G=T.getOne();for(;R.getDegree()>=(w/2|0);){let Re=M,Ye=V;if(M=R,V=G,M.isZero())throw new Ti("r_{i-1} was zero");R=Re;let Ze=T.getZero();const ct=M.getCoefficient(M.getDegree()),yt=T.inverse(ct);for(;R.getDegree()>=M.getDegree()&&!R.isZero();){const Ht=R.getDegree()-M.getDegree(),Wt=T.multiply(R.getCoefficient(R.getDegree()),yt);Ze=Ze.addOrSubtract(T.buildMonomial(Ht,Wt)),R=R.addOrSubtract(M.multiplyByMonomial(Ht,Wt))}if(G=Ze.multiply(V).addOrSubtract(Ye),R.getDegree()>=M.getDegree())throw new tn("Division algorithm failed to reduce polynomial?")}const q=G.getCoefficient(0);if(q===0)throw new Ti("sigmaTilde(0) was zero");const oe=T.inverse(q),me=G.multiplyScalar(oe),we=R.multiplyScalar(oe);return[me,we]}findErrorLocations(p){const _=p.getDegree();if(_===1)return Int32Array.from([p.getCoefficient(1)]);const w=new Int32Array(_);let T=0;const M=this.field;for(let R=1;R<M.getSize()&&T<_;R++)p.evaluateAt(R)===0&&(w[T]=M.inverse(R),T++);if(T!==_)throw new Ti("Error locator degree does not match number of roots");return w}findErrorMagnitudes(p,_){const w=_.length,T=new Int32Array(w),M=this.field;for(let R=0;R<w;R++){const V=M.inverse(_[R]);let G=1;for(let q=0;q<w;q++)if(R!==q){const oe=M.multiply(_[q],V),me=(oe&1)===0?oe|1:oe&-2;G=M.multiply(G,me)}T[R]=M.multiply(p.evaluateAt(V),M.inverse(G)),M.getGeneratorBase()!==0&&(T[R]=M.multiply(T[R],V))}return T}}var st;(function(ge){ge[ge.UPPER=0]="UPPER",ge[ge.LOWER=1]="LOWER",ge[ge.MIXED=2]="MIXED",ge[ge.DIGIT=3]="DIGIT",ge[ge.PUNCT=4]="PUNCT",ge[ge.BINARY=5]="BINARY"})(st||(st={}));class ji{decode(p){this.ddata=p;let _=p.getBits(),w=this.extractBits(_),T=this.correctBits(w),M=ji.convertBoolArrayToByteArray(T),R=ji.getEncodedData(T),V=new Pi(M,R,null,null);return V.setNumBits(T.length),V}static highLevelDecode(p){return this.getEncodedData(p)}static getEncodedData(p){let _=p.length,w=st.UPPER,T=st.UPPER,M="",R=0;for(;R<_;)if(T===st.BINARY){if(_-R<5)break;let V=ji.readCode(p,R,5);if(R+=5,V===0){if(_-R<11)break;V=ji.readCode(p,R,11)+31,R+=11}for(let G=0;G<V;G++){if(_-R<8){R=_;break}const q=ji.readCode(p,R,8);M+=Ae.castAsNonUtf8Char(q),R+=8}T=w}else{let V=T===st.DIGIT?4:5;if(_-R<V)break;let G=ji.readCode(p,R,V);R+=V;let q=ji.getCharacter(T,G);q.startsWith("CTRL_")?(w=T,T=ji.getTable(q.charAt(5)),q.charAt(6)==="L"&&(w=T)):(M+=q,T=w)}return M}static getTable(p){switch(p){case"L":return st.LOWER;case"P":return st.PUNCT;case"M":return st.MIXED;case"D":return st.DIGIT;case"B":return st.BINARY;case"U":default:return st.UPPER}}static getCharacter(p,_){switch(p){case st.UPPER:return ji.UPPER_TABLE[_];case st.LOWER:return ji.LOWER_TABLE[_];case st.MIXED:return ji.MIXED_TABLE[_];case st.PUNCT:return ji.PUNCT_TABLE[_];case st.DIGIT:return ji.DIGIT_TABLE[_];default:throw new tn("Bad table")}}correctBits(p){let _,w;this.ddata.getNbLayers()<=2?(w=6,_=qt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(w=8,_=qt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(w=10,_=qt.AZTEC_DATA_10):(w=12,_=qt.AZTEC_DATA_12);let T=this.ddata.getNbDatablocks(),M=p.length/w;if(M<T)throw new te;let R=p.length%w,V=new Int32Array(M);for(let we=0;we<M;we++,R+=w)V[we]=ji.readCode(p,R,w);try{new Bn(_).decode(V,M-T)}catch(we){throw new te(we)}let G=(1<<w)-1,q=0;for(let we=0;we<T;we++){let Re=V[we];if(Re===0||Re===G)throw new te;(Re===1||Re===G-1)&&q++}let oe=new Array(T*w-q),me=0;for(let we=0;we<T;we++){let Re=V[we];if(Re===1||Re===G-1)oe.fill(Re>1,me,me+w-1),me+=w-1;else for(let Ye=w-1;Ye>=0;--Ye)oe[me++]=(Re&1<<Ye)!==0}return oe}extractBits(p){let _=this.ddata.isCompact(),w=this.ddata.getNbLayers(),T=(_?11:14)+w*4,M=new Int32Array(T),R=new Array(this.totalBitsInLayer(w,_));if(_)for(let V=0;V<M.length;V++)M[V]=V;else{let V=T+1+2*K.truncDivision(K.truncDivision(T,2)-1,15),G=T/2,q=K.truncDivision(V,2);for(let oe=0;oe<G;oe++){let me=oe+K.truncDivision(oe,15);M[G-oe-1]=q-me-1,M[G+oe]=q+me+1}}for(let V=0,G=0;V<w;V++){let q=(w-V)*4+(_?9:12),oe=V*2,me=T-1-oe;for(let we=0;we<q;we++){let Re=we*2;for(let Ye=0;Ye<2;Ye++)R[G+Re+Ye]=p.get(M[oe+Ye],M[oe+we]),R[G+2*q+Re+Ye]=p.get(M[oe+we],M[me-Ye]),R[G+4*q+Re+Ye]=p.get(M[me-Ye],M[me-we]),R[G+6*q+Re+Ye]=p.get(M[me-we],M[oe+Ye])}G+=q*8}return R}static readCode(p,_,w){let T=0;for(let M=_;M<_+w;M++)T<<=1,p[M]&&(T|=1);return T}static readByte(p,_){let w=p.length-_;return w>=8?ji.readCode(p,_,8):ji.readCode(p,_,w)<<8-w}static convertBoolArrayToByteArray(p){let _=new Uint8Array((p.length+7)/8);for(let w=0;w<_.length;w++)_[w]=ji.readByte(p,8*w);return _}totalBitsInLayer(p,_){return((_?88:112)+16*p)*p}}ji.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ji.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ji.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ji.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ji.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Bi{constructor(){}static round(p){return p===NaN?0:p<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:p>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:p+(p<0?-.5:.5)|0}static distance(p,_,w,T){const M=p-w,R=_-T;return Math.sqrt(M*M+R*R)}static sum(p){let _=0;for(let w=0,T=p.length;w!==T;w++){const M=p[w];_+=M}return _}}class Qa{static floatToIntBits(p){return p}}Qa.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Gt{constructor(p,_){this.x=p,this.y=_}getX(){return this.x}getY(){return this.y}equals(p){if(p instanceof Gt){const _=p;return this.x===_.x&&this.y===_.y}return!1}hashCode(){return 31*Qa.floatToIntBits(this.x)+Qa.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(p){const _=this.distance(p[0],p[1]),w=this.distance(p[1],p[2]),T=this.distance(p[0],p[2]);let M,R,V;if(w>=_&&w>=T?(R=p[0],M=p[1],V=p[2]):T>=w&&T>=_?(R=p[1],M=p[0],V=p[2]):(R=p[2],M=p[0],V=p[1]),this.crossProductZ(M,R,V)<0){const G=M;M=V,V=G}p[0]=M,p[1]=R,p[2]=V}static distance(p,_){return Bi.distance(p.x,p.y,_.x,_.y)}static crossProductZ(p,_,w){const T=_.x,M=_.y;return(w.x-T)*(p.y-M)-(w.y-M)*(p.x-T)}}class la{constructor(p,_){this.bits=p,this.points=_}getBits(){return this.bits}getPoints(){return this.points}}class vr extends la{constructor(p,_,w,T,M){super(p,_),this.compact=w,this.nbDatablocks=T,this.nbLayers=M}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class va{constructor(p,_,w,T){this.image=p,this.height=p.getHeight(),this.width=p.getWidth(),_==null&&(_=va.INIT_SIZE),w==null&&(w=p.getWidth()/2|0),T==null&&(T=p.getHeight()/2|0);const M=_/2|0;if(this.leftInit=w-M,this.rightInit=w+M,this.upInit=T-M,this.downInit=T+M,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Ie}detect(){let p=this.leftInit,_=this.rightInit,w=this.upInit,T=this.downInit,M=!1,R=!0,V=!1,G=!1,q=!1,oe=!1,me=!1;const we=this.width,Re=this.height;for(;R;){R=!1;let Ye=!0;for(;(Ye||!G)&&_<we;)Ye=this.containsBlackPoint(w,T,_,!1),Ye?(_++,R=!0,G=!0):G||_++;if(_>=we){M=!0;break}let Ze=!0;for(;(Ze||!q)&&T<Re;)Ze=this.containsBlackPoint(p,_,T,!0),Ze?(T++,R=!0,q=!0):q||T++;if(T>=Re){M=!0;break}let ct=!0;for(;(ct||!oe)&&p>=0;)ct=this.containsBlackPoint(w,T,p,!1),ct?(p--,R=!0,oe=!0):oe||p--;if(p<0){M=!0;break}let yt=!0;for(;(yt||!me)&&w>=0;)yt=this.containsBlackPoint(p,_,w,!0),yt?(w--,R=!0,me=!0):me||w--;if(w<0){M=!0;break}R&&(V=!0)}if(!M&&V){const Ye=_-p;let Ze=null;for(let Wt=1;Ze===null&&Wt<Ye;Wt++)Ze=this.getBlackPointOnSegment(p,T-Wt,p+Wt,T);if(Ze==null)throw new Ie;let ct=null;for(let Wt=1;ct===null&&Wt<Ye;Wt++)ct=this.getBlackPointOnSegment(p,w+Wt,p+Wt,w);if(ct==null)throw new Ie;let yt=null;for(let Wt=1;yt===null&&Wt<Ye;Wt++)yt=this.getBlackPointOnSegment(_,w+Wt,_-Wt,w);if(yt==null)throw new Ie;let Ht=null;for(let Wt=1;Ht===null&&Wt<Ye;Wt++)Ht=this.getBlackPointOnSegment(_,T-Wt,_-Wt,T);if(Ht==null)throw new Ie;return this.centerEdges(Ht,Ze,yt,ct)}else throw new Ie}getBlackPointOnSegment(p,_,w,T){const M=Bi.round(Bi.distance(p,_,w,T)),R=(w-p)/M,V=(T-_)/M,G=this.image;for(let q=0;q<M;q++){const oe=Bi.round(p+q*R),me=Bi.round(_+q*V);if(G.get(oe,me))return new Gt(oe,me)}return null}centerEdges(p,_,w,T){const M=p.getX(),R=p.getY(),V=_.getX(),G=_.getY(),q=w.getX(),oe=w.getY(),me=T.getX(),we=T.getY(),Re=va.CORR;return M<this.width/2?[new Gt(me-Re,we+Re),new Gt(V+Re,G+Re),new Gt(q-Re,oe-Re),new Gt(M+Re,R-Re)]:[new Gt(me+Re,we+Re),new Gt(V+Re,G-Re),new Gt(q-Re,oe+Re),new Gt(M-Re,R-Re)]}containsBlackPoint(p,_,w,T){const M=this.image;if(T){for(let R=p;R<=_;R++)if(M.get(R,w))return!0}else for(let R=p;R<=_;R++)if(M.get(w,R))return!0;return!1}}va.INIT_SIZE=10,va.CORR=1;class un{static checkAndNudgePoints(p,_){const w=p.getWidth(),T=p.getHeight();let M=!0;for(let R=0;R<_.length&&M;R+=2){const V=Math.floor(_[R]),G=Math.floor(_[R+1]);if(V<-1||V>w||G<-1||G>T)throw new Ie;M=!1,V===-1?(_[R]=0,M=!0):V===w&&(_[R]=w-1,M=!0),G===-1?(_[R+1]=0,M=!0):G===T&&(_[R+1]=T-1,M=!0)}M=!0;for(let R=_.length-2;R>=0&&M;R-=2){const V=Math.floor(_[R]),G=Math.floor(_[R+1]);if(V<-1||V>w||G<-1||G>T)throw new Ie;M=!1,V===-1?(_[R]=0,M=!0):V===w&&(_[R]=w-1,M=!0),G===-1?(_[R+1]=0,M=!0):G===T&&(_[R+1]=T-1,M=!0)}}}class tt{constructor(p,_,w,T,M,R,V,G,q){this.a11=p,this.a21=_,this.a31=w,this.a12=T,this.a22=M,this.a32=R,this.a13=V,this.a23=G,this.a33=q}static quadrilateralToQuadrilateral(p,_,w,T,M,R,V,G,q,oe,me,we,Re,Ye,Ze,ct){const yt=tt.quadrilateralToSquare(p,_,w,T,M,R,V,G);return tt.squareToQuadrilateral(q,oe,me,we,Re,Ye,Ze,ct).times(yt)}transformPoints(p){const _=p.length,w=this.a11,T=this.a12,M=this.a13,R=this.a21,V=this.a22,G=this.a23,q=this.a31,oe=this.a32,me=this.a33;for(let we=0;we<_;we+=2){const Re=p[we],Ye=p[we+1],Ze=M*Re+G*Ye+me;p[we]=(w*Re+R*Ye+q)/Ze,p[we+1]=(T*Re+V*Ye+oe)/Ze}}transformPointsWithValues(p,_){const w=this.a11,T=this.a12,M=this.a13,R=this.a21,V=this.a22,G=this.a23,q=this.a31,oe=this.a32,me=this.a33,we=p.length;for(let Re=0;Re<we;Re++){const Ye=p[Re],Ze=_[Re],ct=M*Ye+G*Ze+me;p[Re]=(w*Ye+R*Ze+q)/ct,_[Re]=(T*Ye+V*Ze+oe)/ct}}static squareToQuadrilateral(p,_,w,T,M,R,V,G){const q=p-w+M-V,oe=_-T+R-G;if(q===0&&oe===0)return new tt(w-p,M-w,p,T-_,R-T,_,0,0,1);{const me=w-M,we=V-M,Re=T-R,Ye=G-R,Ze=me*Ye-we*Re,ct=(q*Ye-we*oe)/Ze,yt=(me*oe-q*Re)/Ze;return new tt(w-p+ct*w,V-p+yt*V,p,T-_+ct*T,G-_+yt*G,_,ct,yt,1)}}static quadrilateralToSquare(p,_,w,T,M,R,V,G){return tt.squareToQuadrilateral(p,_,w,T,M,R,V,G).buildAdjoint()}buildAdjoint(){return new tt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(p){return new tt(this.a11*p.a11+this.a21*p.a12+this.a31*p.a13,this.a11*p.a21+this.a21*p.a22+this.a31*p.a23,this.a11*p.a31+this.a21*p.a32+this.a31*p.a33,this.a12*p.a11+this.a22*p.a12+this.a32*p.a13,this.a12*p.a21+this.a22*p.a22+this.a32*p.a23,this.a12*p.a31+this.a22*p.a32+this.a32*p.a33,this.a13*p.a11+this.a23*p.a12+this.a33*p.a13,this.a13*p.a21+this.a23*p.a22+this.a33*p.a23,this.a13*p.a31+this.a23*p.a32+this.a33*p.a33)}}class _e extends un{sampleGrid(p,_,w,T,M,R,V,G,q,oe,me,we,Re,Ye,Ze,ct,yt,Ht,Wt){const Ft=tt.quadrilateralToQuadrilateral(T,M,R,V,G,q,oe,me,we,Re,Ye,Ze,ct,yt,Ht,Wt);return this.sampleGridWithTransform(p,_,w,Ft)}sampleGridWithTransform(p,_,w,T){if(_<=0||w<=0)throw new Ie;const M=new et(_,w),R=new Float32Array(2*_);for(let V=0;V<w;V++){const G=R.length,q=V+.5;for(let oe=0;oe<G;oe+=2)R[oe]=oe/2+.5,R[oe+1]=q;T.transformPoints(R),un.checkAndNudgePoints(p,R);try{for(let oe=0;oe<G;oe+=2)p.get(Math.floor(R[oe]),Math.floor(R[oe+1]))&&M.set(oe/2,V)}catch{throw new Ie}}return M}}class xe{static setGridSampler(p){xe.gridSampler=p}static getInstance(){return xe.gridSampler}}xe.gridSampler=new _e;class be{constructor(p,_){this.x=p,this.y=_}toResultPoint(){return new Gt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class je{constructor(p){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=p}detect(){return this.detectMirror(!1)}detectMirror(p){let _=this.getMatrixCenter(),w=this.getBullsEyeCorners(_);if(p){let R=w[0];w[0]=w[2],w[2]=R}this.extractParameters(w);let T=this.sampleGrid(this.image,w[this.shift%4],w[(this.shift+1)%4],w[(this.shift+2)%4],w[(this.shift+3)%4]),M=this.getMatrixCornerPoints(w);return new vr(T,M,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(p){if(!this.isValidPoint(p[0])||!this.isValidPoint(p[1])||!this.isValidPoint(p[2])||!this.isValidPoint(p[3]))throw new Ie;let _=2*this.nbCenterLayers,w=new Int32Array([this.sampleLine(p[0],p[1],_),this.sampleLine(p[1],p[2],_),this.sampleLine(p[2],p[3],_),this.sampleLine(p[3],p[0],_)]);this.shift=this.getRotation(w,_);let T=0;for(let R=0;R<4;R++){let V=w[(this.shift+R)%4];this.compact?(T<<=7,T+=V>>1&127):(T<<=10,T+=(V>>2&992)+(V>>1&31))}let M=this.getCorrectedParameterData(T,this.compact);this.compact?(this.nbLayers=(M>>6)+1,this.nbDataBlocks=(M&63)+1):(this.nbLayers=(M>>11)+1,this.nbDataBlocks=(M&2047)+1)}getRotation(p,_){let w=0;p.forEach((T,M,R)=>{let V=(T>>_-2<<1)+(T&1);w=(w<<3)+V}),w=((w&1)<<11)+(w>>1);for(let T=0;T<4;T++)if(K.bitCount(w^this.EXPECTED_CORNER_BITS[T])<=2)return T;throw new Ie}getCorrectedParameterData(p,_){let w,T;_?(w=7,T=2):(w=10,T=4);let M=w-T,R=new Int32Array(w);for(let G=w-1;G>=0;--G)R[G]=p&15,p>>=4;try{new Bn(qt.AZTEC_PARAM).decode(R,M)}catch{throw new Ie}let V=0;for(let G=0;G<T;G++)V=(V<<4)+R[G];return V}getBullsEyeCorners(p){let _=p,w=p,T=p,M=p,R=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let me=this.getFirstDifferent(_,R,1,-1),we=this.getFirstDifferent(w,R,1,1),Re=this.getFirstDifferent(T,R,-1,1),Ye=this.getFirstDifferent(M,R,-1,-1);if(this.nbCenterLayers>2){let Ze=this.distancePoint(Ye,me)*this.nbCenterLayers/(this.distancePoint(M,_)*(this.nbCenterLayers+2));if(Ze<.75||Ze>1.25||!this.isWhiteOrBlackRectangle(me,we,Re,Ye))break}_=me,w=we,T=Re,M=Ye,R=!R}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Ie;this.compact=this.nbCenterLayers===5;let V=new Gt(_.getX()+.5,_.getY()-.5),G=new Gt(w.getX()+.5,w.getY()+.5),q=new Gt(T.getX()-.5,T.getY()+.5),oe=new Gt(M.getX()-.5,M.getY()-.5);return this.expandSquare([V,G,q,oe],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let p,_,w,T;try{let V=new va(this.image).detect();p=V[0],_=V[1],w=V[2],T=V[3]}catch{let G=this.image.getWidth()/2,q=this.image.getHeight()/2;p=this.getFirstDifferent(new be(G+7,q-7),!1,1,-1).toResultPoint(),_=this.getFirstDifferent(new be(G+7,q+7),!1,1,1).toResultPoint(),w=this.getFirstDifferent(new be(G-7,q+7),!1,-1,1).toResultPoint(),T=this.getFirstDifferent(new be(G-7,q-7),!1,-1,-1).toResultPoint()}let M=Bi.round((p.getX()+T.getX()+_.getX()+w.getX())/4),R=Bi.round((p.getY()+T.getY()+_.getY()+w.getY())/4);try{let V=new va(this.image,15,M,R).detect();p=V[0],_=V[1],w=V[2],T=V[3]}catch{p=this.getFirstDifferent(new be(M+7,R-7),!1,1,-1).toResultPoint(),_=this.getFirstDifferent(new be(M+7,R+7),!1,1,1).toResultPoint(),w=this.getFirstDifferent(new be(M-7,R+7),!1,-1,1).toResultPoint(),T=this.getFirstDifferent(new be(M-7,R-7),!1,-1,-1).toResultPoint()}return M=Bi.round((p.getX()+T.getX()+_.getX()+w.getX())/4),R=Bi.round((p.getY()+T.getY()+_.getY()+w.getY())/4),new be(M,R)}getMatrixCornerPoints(p){return this.expandSquare(p,2*this.nbCenterLayers,this.getDimension())}sampleGrid(p,_,w,T,M){let R=xe.getInstance(),V=this.getDimension(),G=V/2-this.nbCenterLayers,q=V/2+this.nbCenterLayers;return R.sampleGrid(p,V,V,G,G,q,G,q,q,G,q,_.getX(),_.getY(),w.getX(),w.getY(),T.getX(),T.getY(),M.getX(),M.getY())}sampleLine(p,_,w){let T=0,M=this.distanceResultPoint(p,_),R=M/w,V=p.getX(),G=p.getY(),q=R*(_.getX()-p.getX())/M,oe=R*(_.getY()-p.getY())/M;for(let me=0;me<w;me++)this.image.get(Bi.round(V+me*q),Bi.round(G+me*oe))&&(T|=1<<w-me-1);return T}isWhiteOrBlackRectangle(p,_,w,T){let M=3;p=new be(p.getX()-M,p.getY()+M),_=new be(_.getX()-M,_.getY()-M),w=new be(w.getX()+M,w.getY()-M),T=new be(T.getX()+M,T.getY()+M);let R=this.getColor(T,p);if(R===0)return!1;let V=this.getColor(p,_);return V!==R||(V=this.getColor(_,w),V!==R)?!1:(V=this.getColor(w,T),V===R)}getColor(p,_){let w=this.distancePoint(p,_),T=(_.getX()-p.getX())/w,M=(_.getY()-p.getY())/w,R=0,V=p.getX(),G=p.getY(),q=this.image.get(p.getX(),p.getY()),oe=Math.ceil(w);for(let we=0;we<oe;we++)V+=T,G+=M,this.image.get(Bi.round(V),Bi.round(G))!==q&&R++;let me=R/w;return me>.1&&me<.9?0:me<=.1===q?1:-1}getFirstDifferent(p,_,w,T){let M=p.getX()+w,R=p.getY()+T;for(;this.isValid(M,R)&&this.image.get(M,R)===_;)M+=w,R+=T;for(M-=w,R-=T;this.isValid(M,R)&&this.image.get(M,R)===_;)M+=w;for(M-=w;this.isValid(M,R)&&this.image.get(M,R)===_;)R+=T;return R-=T,new be(M,R)}expandSquare(p,_,w){let T=w/(2*_),M=p[0].getX()-p[2].getX(),R=p[0].getY()-p[2].getY(),V=(p[0].getX()+p[2].getX())/2,G=(p[0].getY()+p[2].getY())/2,q=new Gt(V+T*M,G+T*R),oe=new Gt(V-T*M,G-T*R);M=p[1].getX()-p[3].getX(),R=p[1].getY()-p[3].getY(),V=(p[1].getX()+p[3].getX())/2,G=(p[1].getY()+p[3].getY())/2;let me=new Gt(V+T*M,G+T*R),we=new Gt(V-T*M,G-T*R);return[q,me,oe,we]}isValid(p,_){return p>=0&&p<this.image.getWidth()&&_>0&&_<this.image.getHeight()}isValidPoint(p){let _=Bi.round(p.getX()),w=Bi.round(p.getY());return this.isValid(_,w)}distancePoint(p,_){return Bi.distance(p.getX(),p.getY(),_.getX(),_.getY())}distanceResultPoint(p,_){return Bi.distance(p.getX(),p.getY(),_.getX(),_.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class We{decode(p,_=null){let w=null,T=new je(p.getBlackMatrix()),M=null,R=null;try{let oe=T.detectMirror(!1);M=oe.getPoints(),this.reportFoundResultPoints(_,M),R=new ji().decode(oe)}catch(oe){w=oe}if(R==null)try{let oe=T.detectMirror(!0);M=oe.getPoints(),this.reportFoundResultPoints(_,M),R=new ji().decode(oe)}catch(oe){throw w??oe}let V=new jt(R.getText(),R.getRawBytes(),R.getNumBits(),M,Ct.AZTEC,O.currentTimeMillis()),G=R.getByteSegments();G!=null&&V.putMetadata(Zt.BYTE_SEGMENTS,G);let q=R.getECLevel();return q!=null&&V.putMetadata(Zt.ERROR_CORRECTION_LEVEL,q),V}reportFoundResultPoints(p,_){if(p!=null){let w=p.get(le.NEED_RESULT_POINT_CALLBACK);w!=null&&_.forEach((T,M,R)=>{w.foundPossibleResultPoint(T)})}}reset(){}}class it extends Ai{constructor(p=500){super(new We,p)}}class Qe{decode(p,_){try{return this.doDecode(p,_)}catch{if(_&&_.get(le.TRY_HARDER)===!0&&p.isRotateSupported()){const M=p.rotateCounterClockwise(),R=this.doDecode(M,_),V=R.getResultMetadata();let G=270;V!==null&&V.get(Zt.ORIENTATION)===!0&&(G=G+V.get(Zt.ORIENTATION)%360),R.putMetadata(Zt.ORIENTATION,G);const q=R.getResultPoints();if(q!==null){const oe=M.getHeight();for(let me=0;me<q.length;me++)q[me]=new Gt(oe-q[me].getY()-1,q[me].getX())}return R}else throw new Ie}}reset(){}doDecode(p,_){const w=p.getWidth(),T=p.getHeight();let M=new ie(w);const R=_&&_.get(le.TRY_HARDER)===!0,V=Math.max(1,T>>(R?8:5));let G;R?G=T:G=15;const q=Math.trunc(T/2);for(let oe=0;oe<G;oe++){const me=Math.trunc((oe+1)/2),we=(oe&1)===0,Re=q+V*(we?me:-me);if(Re<0||Re>=T)break;try{M=p.getBlackRow(Re,M)}catch{continue}for(let Ye=0;Ye<2;Ye++){if(Ye===1&&(M.reverse(),_&&_.get(le.NEED_RESULT_POINT_CALLBACK)===!0)){const Ze=new Map;_.forEach((ct,yt)=>Ze.set(yt,ct)),Ze.delete(le.NEED_RESULT_POINT_CALLBACK),_=Ze}try{const Ze=this.decodeRow(Re,M,_);if(Ye===1){Ze.putMetadata(Zt.ORIENTATION,180);const ct=Ze.getResultPoints();ct!==null&&(ct[0]=new Gt(w-ct[0].getX()-1,ct[0].getY()),ct[1]=new Gt(w-ct[1].getX()-1,ct[1].getY()))}return Ze}catch{}}}throw new Ie}static recordPattern(p,_,w){const T=w.length;for(let q=0;q<T;q++)w[q]=0;const M=p.getSize();if(_>=M)throw new Ie;let R=!p.get(_),V=0,G=_;for(;G<M;){if(p.get(G)!==R)w[V]++;else{if(++V===T)break;w[V]=1,R=!R}G++}if(!(V===T||V===T-1&&G===M))throw new Ie}static recordPatternInReverse(p,_,w){let T=w.length,M=p.get(_);for(;_>0&&T>=0;)p.get(--_)!==M&&(T--,M=!M);if(T>=0)throw new Ie;Qe.recordPattern(p,_+1,w)}static patternMatchVariance(p,_,w){const T=p.length;let M=0,R=0;for(let q=0;q<T;q++)M+=p[q],R+=_[q];if(M<R)return Number.POSITIVE_INFINITY;const V=M/R;w*=V;let G=0;for(let q=0;q<T;q++){const oe=p[q],me=_[q]*V,we=oe>me?oe-me:me-oe;if(we>w)return Number.POSITIVE_INFINITY;G+=we}return G/M}}class Pe extends Qe{static findStartPattern(p){const _=p.getSize(),w=p.getNextSet(0);let T=0,M=Int32Array.from([0,0,0,0,0,0]),R=w,V=!1;const G=6;for(let q=w;q<_;q++)if(p.get(q)!==V)M[T]++;else{if(T===G-1){let oe=Pe.MAX_AVG_VARIANCE,me=-1;for(let we=Pe.CODE_START_A;we<=Pe.CODE_START_C;we++){const Re=Qe.patternMatchVariance(M,Pe.CODE_PATTERNS[we],Pe.MAX_INDIVIDUAL_VARIANCE);Re<oe&&(oe=Re,me=we)}if(me>=0&&p.isRange(Math.max(0,R-(q-R)/2),R,!1))return Int32Array.from([R,q,me]);R+=M[0]+M[1],M=M.slice(2,M.length-1),M[T-1]=0,M[T]=0,T--}else T++;M[T]=1,V=!V}throw new Ie}static decodeCode(p,_,w){Qe.recordPattern(p,w,_);let T=Pe.MAX_AVG_VARIANCE,M=-1;for(let R=0;R<Pe.CODE_PATTERNS.length;R++){const V=Pe.CODE_PATTERNS[R],G=this.patternMatchVariance(_,V,Pe.MAX_INDIVIDUAL_VARIANCE);G<T&&(T=G,M=R)}if(M>=0)return M;throw new Ie}decodeRow(p,_,w){const T=w&&w.get(le.ASSUME_GS1)===!0,M=Pe.findStartPattern(_),R=M[2];let V=0;const G=new Uint8Array(20);G[V++]=R;let q;switch(R){case Pe.CODE_START_A:q=Pe.CODE_CODE_A;break;case Pe.CODE_START_B:q=Pe.CODE_CODE_B;break;case Pe.CODE_START_C:q=Pe.CODE_CODE_C;break;default:throw new te}let oe=!1,me=!1,we="",Re=M[0],Ye=M[1];const Ze=Int32Array.from([0,0,0,0,0,0]);let ct=0,yt=0,Ht=R,Wt=0,Ft=!0,hn=!1,ai=!1;for(;!oe;){const pr=me;switch(me=!1,ct=yt,yt=Pe.decodeCode(_,Ze,Ye),G[V++]=yt,yt!==Pe.CODE_STOP&&(Ft=!0),yt!==Pe.CODE_STOP&&(Wt++,Ht+=Wt*yt),Re=Ye,Ye+=Ze.reduce((wd,Sd)=>wd+Sd,0),yt){case Pe.CODE_START_A:case Pe.CODE_START_B:case Pe.CODE_START_C:throw new te}switch(q){case Pe.CODE_CODE_A:if(yt<64)ai===hn?we+=String.fromCharCode(32+yt):we+=String.fromCharCode(32+yt+128),ai=!1;else if(yt<96)ai===hn?we+=String.fromCharCode(yt-64):we+=String.fromCharCode(yt+64),ai=!1;else switch(yt!==Pe.CODE_STOP&&(Ft=!1),yt){case Pe.CODE_FNC_1:T&&(we.length===0?we+="]C1":we+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_A:!hn&&ai?(hn=!0,ai=!1):hn&&ai?(hn=!1,ai=!1):ai=!0;break;case Pe.CODE_SHIFT:me=!0,q=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_B:q=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_C:q=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:oe=!0;break}break;case Pe.CODE_CODE_B:if(yt<96)ai===hn?we+=String.fromCharCode(32+yt):we+=String.fromCharCode(32+yt+128),ai=!1;else switch(yt!==Pe.CODE_STOP&&(Ft=!1),yt){case Pe.CODE_FNC_1:T&&(we.length===0?we+="]C1":we+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_B:!hn&&ai?(hn=!0,ai=!1):hn&&ai?(hn=!1,ai=!1):ai=!0;break;case Pe.CODE_SHIFT:me=!0,q=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_A:q=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_C:q=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:oe=!0;break}break;case Pe.CODE_CODE_C:if(yt<100)yt<10&&(we+="0"),we+=yt;else switch(yt!==Pe.CODE_STOP&&(Ft=!1),yt){case Pe.CODE_FNC_1:T&&(we.length===0?we+="]C1":we+="");break;case Pe.CODE_CODE_A:q=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_B:q=Pe.CODE_CODE_B;break;case Pe.CODE_STOP:oe=!0;break}break}pr&&(q=q===Pe.CODE_CODE_A?Pe.CODE_CODE_B:Pe.CODE_CODE_A)}const ur=Ye-Re;if(Ye=_.getNextUnset(Ye),!_.isRange(Ye,Math.min(_.getSize(),Ye+(Ye-Re)/2),!1))throw new Ie;if(Ht-=Wt*ct,Ht%103!==ct)throw new E;const $r=we.length;if($r===0)throw new Ie;$r>0&&Ft&&(q===Pe.CODE_CODE_C?we=we.substring(0,$r-2):we=we.substring(0,$r-1));const dr=(M[1]+M[0])/2,zn=Re+ur/2,fa=G.length,fr=new Uint8Array(fa);for(let pr=0;pr<fa;pr++)fr[pr]=G[pr];const Is=[new Gt(dr,p),new Gt(zn,p)];return new jt(we,fr,0,Is,Ct.CODE_128,new Date().getTime())}}Pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Pe.MAX_AVG_VARIANCE=.25,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.CODE_SHIFT=98,Pe.CODE_CODE_C=99,Pe.CODE_CODE_B=100,Pe.CODE_CODE_A=101,Pe.CODE_FNC_1=102,Pe.CODE_FNC_2=97,Pe.CODE_FNC_3=96,Pe.CODE_FNC_4_A=101,Pe.CODE_FNC_4_B=100,Pe.CODE_START_A=103,Pe.CODE_START_B=104,Pe.CODE_START_C=105,Pe.CODE_STOP=106;class nt extends Qe{constructor(p=!1,_=!1){super(),this.usingCheckDigit=p,this.extendedMode=_,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(p,_,w){let T=this.counters;T.fill(0),this.decodeRowResult="";let M=nt.findAsteriskPattern(_,T),R=_.getNextSet(M[1]),V=_.getSize(),G,q;do{nt.recordPattern(_,R,T);let Ze=nt.toNarrowWidePattern(T);if(Ze<0)throw new Ie;G=nt.patternToChar(Ze),this.decodeRowResult+=G,q=R;for(let ct of T)R+=ct;R=_.getNextSet(R)}while(G!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let oe=0;for(let Ze of T)oe+=Ze;let me=R-q-oe;if(R!==V&&me*2<oe)throw new Ie;if(this.usingCheckDigit){let Ze=this.decodeRowResult.length-1,ct=0;for(let yt=0;yt<Ze;yt++)ct+=nt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(yt));if(this.decodeRowResult.charAt(Ze)!==nt.ALPHABET_STRING.charAt(ct%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,Ze)}if(this.decodeRowResult.length===0)throw new Ie;let we;this.extendedMode?we=nt.decodeExtended(this.decodeRowResult):we=this.decodeRowResult;let Re=(M[1]+M[0])/2,Ye=q+oe/2;return new jt(we,null,0,[new Gt(Re,p),new Gt(Ye,p)],Ct.CODE_39,new Date().getTime())}static findAsteriskPattern(p,_){let w=p.getSize(),T=p.getNextSet(0),M=0,R=T,V=!1,G=_.length;for(let q=T;q<w;q++)if(p.get(q)!==V)_[M]++;else{if(M===G-1){if(this.toNarrowWidePattern(_)===nt.ASTERISK_ENCODING&&p.isRange(Math.max(0,R-Math.floor((q-R)/2)),R,!1))return[R,q];R+=_[0]+_[1],_.copyWithin(0,2,2+M-1),_[M-1]=0,_[M]=0,M--}else M++;_[M]=1,V=!V}throw new Ie}static toNarrowWidePattern(p){let _=p.length,w=0,T;do{let M=2147483647;for(let G of p)G<M&&G>w&&(M=G);w=M,T=0;let R=0,V=0;for(let G=0;G<_;G++){let q=p[G];q>w&&(V|=1<<_-1-G,T++,R+=q)}if(T===3){for(let G=0;G<_&&T>0;G++){let q=p[G];if(q>w&&(T--,q*2>=R))return-1}return V}}while(T>3);return-1}static patternToChar(p){for(let _=0;_<nt.CHARACTER_ENCODINGS.length;_++)if(nt.CHARACTER_ENCODINGS[_]===p)return nt.ALPHABET_STRING.charAt(_);if(p===nt.ASTERISK_ENCODING)return"*";throw new Ie}static decodeExtended(p){let _=p.length,w="";for(let T=0;T<_;T++){let M=p.charAt(T);if(M==="+"||M==="$"||M==="%"||M==="/"){let R=p.charAt(T+1),V="\0";switch(M){case"+":if(R>="A"&&R<="Z")V=String.fromCharCode(R.charCodeAt(0)+32);else throw new te;break;case"$":if(R>="A"&&R<="Z")V=String.fromCharCode(R.charCodeAt(0)-64);else throw new te;break;case"%":if(R>="A"&&R<="E")V=String.fromCharCode(R.charCodeAt(0)-38);else if(R>="F"&&R<="J")V=String.fromCharCode(R.charCodeAt(0)-11);else if(R>="K"&&R<="O")V=String.fromCharCode(R.charCodeAt(0)+16);else if(R>="P"&&R<="T")V=String.fromCharCode(R.charCodeAt(0)+43);else if(R==="U")V="\0";else if(R==="V")V="@";else if(R==="W")V="`";else if(R==="X"||R==="Y"||R==="Z")V="";else throw new te;break;case"/":if(R>="A"&&R<="O")V=String.fromCharCode(R.charCodeAt(0)-32);else if(R==="Z")V=":";else throw new te;break}w+=V,T++}else w+=M}return w}}nt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",nt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],nt.ASTERISK_ENCODING=148;class mt extends Qe{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(p,_,w){let T=this.decodeStart(_),M=this.decodeEnd(_),R=new $e;mt.decodeMiddle(_,T[1],M[0],R);let V=R.toString(),G=null;w!=null&&(G=w.get(le.ALLOWED_LENGTHS)),G==null&&(G=mt.DEFAULT_ALLOWED_LENGTHS);let q=V.length,oe=!1,me=0;for(let Ye of G){if(q===Ye){oe=!0;break}Ye>me&&(me=Ye)}if(!oe&&q>me&&(oe=!0),!oe)throw new te;const we=[new Gt(T[1],p),new Gt(M[0],p)];return new jt(V,null,0,we,Ct.ITF,new Date().getTime())}static decodeMiddle(p,_,w,T){let M=new Int32Array(10),R=new Int32Array(5),V=new Int32Array(5);for(M.fill(0),R.fill(0),V.fill(0);_<w;){Qe.recordPattern(p,_,M);for(let q=0;q<5;q++){let oe=2*q;R[q]=M[oe],V[q]=M[oe+1]}let G=mt.decodeDigit(R);T.append(G.toString()),G=this.decodeDigit(V),T.append(G.toString()),M.forEach(function(q){_+=q})}}decodeStart(p){let _=mt.skipWhiteSpace(p),w=mt.findGuardPattern(p,_,mt.START_PATTERN);return this.narrowLineWidth=(w[1]-w[0])/4,this.validateQuietZone(p,w[0]),w}validateQuietZone(p,_){let w=this.narrowLineWidth*10;w=w<_?w:_;for(let T=_-1;w>0&&T>=0&&!p.get(T);T--)w--;if(w!==0)throw new Ie}static skipWhiteSpace(p){const _=p.getSize(),w=p.getNextSet(0);if(w===_)throw new Ie;return w}decodeEnd(p){p.reverse();try{let _=mt.skipWhiteSpace(p),w;try{w=mt.findGuardPattern(p,_,mt.END_PATTERN_REVERSED[0])}catch(M){M instanceof Ie&&(w=mt.findGuardPattern(p,_,mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(p,w[0]);let T=w[0];return w[0]=p.getSize()-w[1],w[1]=p.getSize()-T,w}finally{p.reverse()}}static findGuardPattern(p,_,w){let T=w.length,M=new Int32Array(T),R=p.getSize(),V=!1,G=0,q=_;M.fill(0);for(let oe=_;oe<R;oe++)if(p.get(oe)!==V)M[G]++;else{if(G===T-1){if(Qe.patternMatchVariance(M,w,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return[q,oe];q+=M[0]+M[1],O.arraycopy(M,2,M,0,G-1),M[G-1]=0,M[G]=0,G--}else G++;M[G]=1,V=!V}throw new Ie}static decodeDigit(p){let _=mt.MAX_AVG_VARIANCE,w=-1,T=mt.PATTERNS.length;for(let M=0;M<T;M++){let R=mt.PATTERNS[M],V=Qe.patternMatchVariance(p,R,mt.MAX_INDIVIDUAL_VARIANCE);V<_?(_=V,w=M):V===_&&(w=-1)}if(w>=0)return w%10;throw new Ie}}mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],mt.MAX_AVG_VARIANCE=.38,mt.MAX_INDIVIDUAL_VARIANCE=.5,mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],mt.START_PATTERN=Int32Array.from([1,1,1,1]),mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class pt extends Qe{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(p){let _=!1,w,T=0,M=Int32Array.from([0,0,0]);for(;!_;){M=Int32Array.from([0,0,0]),w=pt.findGuardPattern(p,T,!1,this.START_END_PATTERN,M);let R=w[0];T=w[1];let V=R-(T-R);V>=0&&(_=p.isRange(V,R,!1))}return w}static checkChecksum(p){return pt.checkStandardUPCEANChecksum(p)}static checkStandardUPCEANChecksum(p){let _=p.length;if(_===0)return!1;let w=parseInt(p.charAt(_-1),10);return pt.getStandardUPCEANChecksum(p.substring(0,_-1))===w}static getStandardUPCEANChecksum(p){let _=p.length,w=0;for(let T=_-1;T>=0;T-=2){let M=p.charAt(T).charCodeAt(0)-48;if(M<0||M>9)throw new te;w+=M}w*=3;for(let T=_-2;T>=0;T-=2){let M=p.charAt(T).charCodeAt(0)-48;if(M<0||M>9)throw new te;w+=M}return(1e3-w)%10}static decodeEnd(p,_){return pt.findGuardPattern(p,_,!1,pt.START_END_PATTERN,new Int32Array(pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(p,_,w,T){return this.findGuardPattern(p,_,w,T,new Int32Array(T.length))}static findGuardPattern(p,_,w,T,M){let R=p.getSize();_=w?p.getNextUnset(_):p.getNextSet(_);let V=0,G=_,q=T.length,oe=w;for(let me=_;me<R;me++)if(p.get(me)!==oe)M[V]++;else{if(V===q-1){if(Qe.patternMatchVariance(M,T,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return Int32Array.from([G,me]);G+=M[0]+M[1];let we=M.slice(2,M.length-1);for(let Re=0;Re<V-1;Re++)M[Re]=we[Re];M[V-1]=0,M[V]=0,V--}else V++;M[V]=1,oe=!oe}throw new Ie}static decodeDigit(p,_,w,T){this.recordPattern(p,w,_);let M=this.MAX_AVG_VARIANCE,R=-1,V=T.length;for(let G=0;G<V;G++){let q=T[G],oe=Qe.patternMatchVariance(_,q,pt.MAX_INDIVIDUAL_VARIANCE);oe<M&&(M=oe,R=G)}if(R>=0)return R;throw new Ie}}pt.MAX_AVG_VARIANCE=.48,pt.MAX_INDIVIDUAL_VARIANCE=.7,pt.START_END_PATTERN=Int32Array.from([1,1,1]),pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Vt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(p,_,w){let T=this.decodeRowStringBuffer,M=this.decodeMiddle(_,w,T),R=T.toString(),V=Vt.parseExtensionString(R),G=[new Gt((w[0]+w[1])/2,p),new Gt(M,p)],q=new jt(R,null,0,G,Ct.UPC_EAN_EXTENSION,new Date().getTime());return V!=null&&q.putAllMetadata(V),q}decodeMiddle(p,_,w){let T=this.decodeMiddleCounters;T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=p.getSize(),R=_[1],V=0;for(let q=0;q<5&&R<M;q++){let oe=pt.decodeDigit(p,T,R,pt.L_AND_G_PATTERNS);w+=String.fromCharCode(48+oe%10);for(let me of T)R+=me;oe>=10&&(V|=1<<4-q),q!==4&&(R=p.getNextSet(R),R=p.getNextUnset(R))}if(w.length!==5)throw new Ie;let G=this.determineCheckDigit(V);if(Vt.extensionChecksum(w.toString())!==G)throw new Ie;return R}static extensionChecksum(p){let _=p.length,w=0;for(let T=_-2;T>=0;T-=2)w+=p.charAt(T).charCodeAt(0)-48;w*=3;for(let T=_-1;T>=0;T-=2)w+=p.charAt(T).charCodeAt(0)-48;return w*=3,w%10}determineCheckDigit(p){for(let _=0;_<10;_++)if(p===this.CHECK_DIGIT_ENCODINGS[_])return _;throw new Ie}static parseExtensionString(p){if(p.length!==5)return null;let _=Vt.parseExtension5String(p);return _==null?null:new Map([[Zt.SUGGESTED_PRICE,_]])}static parseExtension5String(p){let _;switch(p.charAt(0)){case"0":_="";break;case"5":_="$";break;case"9":switch(p){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}_="";break;default:_="";break}let w=parseInt(p.substring(1)),T=(w/100).toString(),M=w%100,R=M<10?"0"+M:M.toString();return _+T+"."+R}}class Pt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(p,_,w){let T=this.decodeRowStringBuffer,M=this.decodeMiddle(_,w,T),R=T.toString(),V=Pt.parseExtensionString(R),G=[new Gt((w[0]+w[1])/2,p),new Gt(M,p)],q=new jt(R,null,0,G,Ct.UPC_EAN_EXTENSION,new Date().getTime());return V!=null&&q.putAllMetadata(V),q}decodeMiddle(p,_,w){let T=this.decodeMiddleCounters;T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=p.getSize(),R=_[1],V=0;for(let G=0;G<2&&R<M;G++){let q=pt.decodeDigit(p,T,R,pt.L_AND_G_PATTERNS);w+=String.fromCharCode(48+q%10);for(let oe of T)R+=oe;q>=10&&(V|=1<<1-G),G!==1&&(R=p.getNextSet(R),R=p.getNextUnset(R))}if(w.length!==2)throw new Ie;if(parseInt(w.toString())%4!==V)throw new Ie;return R}static parseExtensionString(p){return p.length!==2?null:new Map([[Zt.ISSUE_NUMBER,parseInt(p)]])}}class wi{static decodeRow(p,_,w){let T=pt.findGuardPattern(_,w,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Vt().decodeRow(p,_,T)}catch{return new Pt().decodeRow(p,_,T)}}}wi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class si extends pt{constructor(){super(),this.decodeRowStringBuffer="",si.L_AND_G_PATTERNS=si.L_PATTERNS.map(p=>Int32Array.from(p));for(let p=10;p<20;p++){let _=si.L_PATTERNS[p-10],w=new Int32Array(_.length);for(let T=0;T<_.length;T++)w[T]=_[_.length-T-1];si.L_AND_G_PATTERNS[p]=w}}decodeRow(p,_,w){let T=si.findStartGuardPattern(_),M=w==null?null:w.get(le.NEED_RESULT_POINT_CALLBACK);if(M!=null){const Ft=new Gt((T[0]+T[1])/2,p);M.foundPossibleResultPoint(Ft)}let R=this.decodeMiddle(_,T,this.decodeRowStringBuffer),V=R.rowOffset,G=R.resultString;if(M!=null){const Ft=new Gt(V,p);M.foundPossibleResultPoint(Ft)}let q=this.decodeEnd(_,V);if(M!=null){const Ft=new Gt((q[0]+q[1])/2,p);M.foundPossibleResultPoint(Ft)}let oe=q[1],me=oe+(oe-q[0]);if(me>=_.getSize()||!_.isRange(oe,me,!1))throw new Ie;let we=G.toString();if(we.length<8)throw new te;if(!si.checkChecksum(we))throw new E;let Re=(T[1]+T[0])/2,Ye=(q[1]+q[0])/2,Ze=this.getBarcodeFormat(),ct=[new Gt(Re,p),new Gt(Ye,p)],yt=new jt(we,null,0,ct,Ze,new Date().getTime()),Ht=0;try{let Ft=wi.decodeRow(p,_,q[1]);yt.putMetadata(Zt.UPC_EAN_EXTENSION,Ft.getText()),yt.putAllMetadata(Ft.getResultMetadata()),yt.addResultPoints(Ft.getResultPoints()),Ht=Ft.getText().length}catch{}let Wt=w==null?null:w.get(le.ALLOWED_EAN_EXTENSIONS);if(Wt!=null){let Ft=!1;for(let hn in Wt)if(Ht.toString()===hn){Ft=!0;break}if(!Ft)throw new Ie}return yt}decodeEnd(p,_){return si.findGuardPattern(p,_,!1,si.START_END_PATTERN,new Int32Array(si.START_END_PATTERN.length).fill(0))}static checkChecksum(p){return si.checkStandardUPCEANChecksum(p)}static checkStandardUPCEANChecksum(p){let _=p.length;if(_===0)return!1;let w=parseInt(p.charAt(_-1),10);return si.getStandardUPCEANChecksum(p.substring(0,_-1))===w}static getStandardUPCEANChecksum(p){let _=p.length,w=0;for(let T=_-1;T>=0;T-=2){let M=p.charAt(T).charCodeAt(0)-48;if(M<0||M>9)throw new te;w+=M}w*=3;for(let T=_-2;T>=0;T-=2){let M=p.charAt(T).charCodeAt(0)-48;if(M<0||M>9)throw new te;w+=M}return(1e3-w)%10}}class Oi extends si{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(p,_,w){let T=this.decodeMiddleCounters;T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=p.getSize(),R=_[1],V=0;for(let q=0;q<6&&R<M;q++){let oe=si.decodeDigit(p,T,R,si.L_AND_G_PATTERNS);w+=String.fromCharCode(48+oe%10);for(let me of T)R+=me;oe>=10&&(V|=1<<5-q)}w=Oi.determineFirstDigit(w,V),R=si.findGuardPattern(p,R,!0,si.MIDDLE_PATTERN,new Int32Array(si.MIDDLE_PATTERN.length).fill(0))[1];for(let q=0;q<6&&R<M;q++){let oe=si.decodeDigit(p,T,R,si.L_PATTERNS);w+=String.fromCharCode(48+oe);for(let me of T)R+=me}return{rowOffset:R,resultString:w}}getBarcodeFormat(){return Ct.EAN_13}static determineFirstDigit(p,_){for(let w=0;w<10;w++)if(_===this.FIRST_DIGIT_ENCODINGS[w])return p=String.fromCharCode(48+w)+p,p;throw new Ie}}Oi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class rt extends si{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(p,_,w){const T=this.decodeMiddleCounters;T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=p.getSize(),R=_[1];for(let G=0;G<4&&R<M;G++){let q=si.decodeDigit(p,T,R,si.L_PATTERNS);w+=String.fromCharCode(48+q);for(let oe of T)R+=oe}R=si.findGuardPattern(p,R,!0,si.MIDDLE_PATTERN,new Int32Array(si.MIDDLE_PATTERN.length).fill(0))[1];for(let G=0;G<4&&R<M;G++){let q=si.decodeDigit(p,T,R,si.L_PATTERNS);w+=String.fromCharCode(48+q);for(let oe of T)R+=oe}return{rowOffset:R,resultString:w}}getBarcodeFormat(){return Ct.EAN_8}}class an extends si{constructor(){super(...arguments),this.ean13Reader=new Oi}getBarcodeFormat(){return Ct.UPC_A}decode(p,_){return this.maybeReturnResult(this.ean13Reader.decode(p))}decodeRow(p,_,w){return this.maybeReturnResult(this.ean13Reader.decodeRow(p,_,w))}decodeMiddle(p,_,w){return this.ean13Reader.decodeMiddle(p,_,w)}maybeReturnResult(p){let _=p.getText();if(_.charAt(0)==="0"){let w=new jt(_.substring(1),null,null,p.getResultPoints(),Ct.UPC_A);return p.getResultMetadata()!=null&&w.putAllMetadata(p.getResultMetadata()),w}else throw new Ie}reset(){this.ean13Reader.reset()}}class pn extends si{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(p,_,w){const T=this.decodeMiddleCounters.map(q=>q);T[0]=0,T[1]=0,T[2]=0,T[3]=0;const M=p.getSize();let R=_[1],V=0;for(let q=0;q<6&&R<M;q++){const oe=pn.decodeDigit(p,T,R,pn.L_AND_G_PATTERNS);w+=String.fromCharCode(48+oe%10);for(let me of T)R+=me;oe>=10&&(V|=1<<5-q)}let G=pn.determineNumSysAndCheckDigit(w,V);return{rowOffset:R,resultString:G}}decodeEnd(p,_){return pn.findGuardPatternWithoutCounters(p,_,!0,pn.MIDDLE_END_PATTERN)}checkChecksum(p){return si.checkChecksum(pn.convertUPCEtoUPCA(p))}static determineNumSysAndCheckDigit(p,_){for(let w=0;w<=1;w++)for(let T=0;T<10;T++)if(_===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[w][T]){let M=String.fromCharCode(48+w),R=String.fromCharCode(48+T);return M+p+R}throw Ie.getNotFoundInstance()}getBarcodeFormat(){return Ct.UPC_E}static convertUPCEtoUPCA(p){const _=p.slice(1,7).split("").map(M=>M.charCodeAt(0)),w=new $e;w.append(p.charAt(0));let T=_[5];switch(T){case 0:case 1:case 2:w.appendChars(_,0,2),w.append(T),w.append("0000"),w.appendChars(_,2,3);break;case 3:w.appendChars(_,0,3),w.append("00000"),w.appendChars(_,3,2);break;case 4:w.appendChars(_,0,4),w.append("00000"),w.append(_[4]);break;default:w.appendChars(_,0,5),w.append("0000"),w.append(T);break}return p.length>=8&&w.append(p.charAt(7)),w.toString()}}pn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class yi extends Qe{constructor(p){super();let _=p==null?null:p.get(le.POSSIBLE_FORMATS),w=[];i(_)?(w.push(new Oi),w.push(new an),w.push(new rt),w.push(new pn)):(_.indexOf(Ct.EAN_13)>-1&&w.push(new Oi),_.indexOf(Ct.UPC_A)>-1&&w.push(new an),_.indexOf(Ct.EAN_8)>-1&&w.push(new rt),_.indexOf(Ct.UPC_E)>-1&&w.push(new pn)),this.readers=w}decodeRow(p,_,w){for(let T of this.readers)try{const M=T.decodeRow(p,_,w),R=M.getBarcodeFormat()===Ct.EAN_13&&M.getText().charAt(0)==="0",V=w==null?null:w.get(le.POSSIBLE_FORMATS),G=V==null||V.includes(Ct.UPC_A);if(R&&G){const q=M.getRawBytes(),oe=new jt(M.getText().substring(1),q,q?q.length:null,M.getResultPoints(),Ct.UPC_A);return oe.putAllMetadata(M.getResultMetadata()),oe}return M}catch{}throw new Ie}reset(){for(let p of this.readers)p.reset()}}class zi extends Qe{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(p,_){for(let w=0;w<_.length;w++)if(Qe.patternMatchVariance(p,_[w],zi.MAX_INDIVIDUAL_VARIANCE)<zi.MAX_AVG_VARIANCE)return w;throw new Ie}static count(p){return Bi.sum(new Int32Array(p))}static increment(p,_){let w=0,T=_[0];for(let M=1;M<p.length;M++)_[M]>T&&(T=_[M],w=M);p[w]++}static decrement(p,_){let w=0,T=_[0];for(let M=1;M<p.length;M++)_[M]<T&&(T=_[M],w=M);p[w]--}static isFinderPattern(p){let _=p[0]+p[1],w=_+p[2]+p[3],T=_/w;if(T>=zi.MIN_FINDER_PATTERN_RATIO&&T<=zi.MAX_FINDER_PATTERN_RATIO){let M=Number.MAX_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER;for(let V of p)V>R&&(R=V),V<M&&(M=V);return R<10*M}return!1}}zi.MAX_AVG_VARIANCE=.2,zi.MAX_INDIVIDUAL_VARIANCE=.45,zi.MIN_FINDER_PATTERN_RATIO=9.5/12,zi.MAX_FINDER_PATTERN_RATIO=12.5/14;class di{constructor(p,_){this.value=p,this.checksumPortion=_}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(p){if(!(p instanceof di))return!1;const _=p;return this.value===_.value&&this.checksumPortion===_.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Jt{constructor(p,_,w,T,M){this.value=p,this.startEnd=_,this.value=p,this.startEnd=_,this.resultPoints=new Array,this.resultPoints.push(new Gt(w,M)),this.resultPoints.push(new Gt(T,M))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(p){if(!(p instanceof Jt))return!1;const _=p;return this.value===_.value}hashCode(){return this.value}}class fi{constructor(){}static getRSSvalue(p,_,w){let T=0;for(let G of p)T+=G;let M=0,R=0,V=p.length;for(let G=0;G<V-1;G++){let q;for(q=1,R|=1<<G;q<p[G];q++,R&=~(1<<G)){let oe=fi.combins(T-q-1,V-G-2);if(w&&R===0&&T-q-(V-G-1)>=V-G-1&&(oe-=fi.combins(T-q-(V-G),V-G-2)),V-G-1>1){let me=0;for(let we=T-q-(V-G-2);we>_;we--)me+=fi.combins(T-q-we-1,V-G-3);oe-=me*(V-1-G)}else T-q>_&&oe--;M+=oe}T-=q}return M}static combins(p,_){let w,T;p-_>_?(T=_,w=p-_):(T=p-_,w=_);let M=1,R=1;for(let V=p;V>w;V--)M*=V,R<=T&&(M/=R,R++);for(;R<=T;)M/=R,R++;return M}}class Rt{static buildBitArray(p){let _=p.length*2-1;p[p.length-1].getRightChar()==null&&(_-=1);let w=12*_,T=new ie(w),M=0,V=p[0].getRightChar().getValue();for(let G=11;G>=0;--G)(V&1<<G)!=0&&T.set(M),M++;for(let G=1;G<p.length;++G){let q=p[G],oe=q.getLeftChar().getValue();for(let me=11;me>=0;--me)(oe&1<<me)!=0&&T.set(M),M++;if(q.getRightChar()!=null){let me=q.getRightChar().getValue();for(let we=11;we>=0;--we)(me&1<<we)!=0&&T.set(M),M++}}return T}}class oi{constructor(p,_){_?this.decodedInformation=null:(this.finished=p,this.decodedInformation=_)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class bi{constructor(p){this.newPosition=p}getNewPosition(){return this.newPosition}}class _i extends bi{constructor(p,_){super(p),this.value=_}getValue(){return this.value}isFNC1(){return this.value===_i.FNC1}}_i.FNC1="$";class St extends bi{constructor(p,_,w){super(p),w?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=_}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xi extends bi{constructor(p,_,w){if(super(p),_<0||_>10||w<0||w>10)throw new te;this.firstDigit=_,this.secondDigit=w}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xi.FNC1}isSecondDigitFNC1(){return this.secondDigit===xi.FNC1}isAnyFNC1(){return this.firstDigit===xi.FNC1||this.secondDigit===xi.FNC1}}xi.FNC1=10;class Dt{constructor(){}static parseFieldsInGeneralPurpose(p){if(!p)return null;if(p.length<2)throw new Ie;let _=p.substring(0,2);for(let M of Dt.TWO_DIGIT_DATA_LENGTH)if(M[0]===_)return M[1]===Dt.VARIABLE_LENGTH?Dt.processVariableAI(2,M[2],p):Dt.processFixedAI(2,M[1],p);if(p.length<3)throw new Ie;let w=p.substring(0,3);for(let M of Dt.THREE_DIGIT_DATA_LENGTH)if(M[0]===w)return M[1]===Dt.VARIABLE_LENGTH?Dt.processVariableAI(3,M[2],p):Dt.processFixedAI(3,M[1],p);for(let M of Dt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(M[0]===w)return M[1]===Dt.VARIABLE_LENGTH?Dt.processVariableAI(4,M[2],p):Dt.processFixedAI(4,M[1],p);if(p.length<4)throw new Ie;let T=p.substring(0,4);for(let M of Dt.FOUR_DIGIT_DATA_LENGTH)if(M[0]===T)return M[1]===Dt.VARIABLE_LENGTH?Dt.processVariableAI(4,M[2],p):Dt.processFixedAI(4,M[1],p);throw new Ie}static processFixedAI(p,_,w){if(w.length<p)throw new Ie;let T=w.substring(0,p);if(w.length<p+_)throw new Ie;let M=w.substring(p,p+_),R=w.substring(p+_),V="("+T+")"+M,G=Dt.parseFieldsInGeneralPurpose(R);return G==null?V:V+G}static processVariableAI(p,_,w){let T=w.substring(0,p),M;w.length<p+_?M=w.length:M=p+_;let R=w.substring(p,M),V=w.substring(M),G="("+T+")"+R,q=Dt.parseFieldsInGeneralPurpose(V);return q==null?G:G+q}}Dt.VARIABLE_LENGTH=[],Dt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Dt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Dt.VARIABLE_LENGTH,20],["22",Dt.VARIABLE_LENGTH,29],["30",Dt.VARIABLE_LENGTH,8],["37",Dt.VARIABLE_LENGTH,8],["90",Dt.VARIABLE_LENGTH,30],["91",Dt.VARIABLE_LENGTH,30],["92",Dt.VARIABLE_LENGTH,30],["93",Dt.VARIABLE_LENGTH,30],["94",Dt.VARIABLE_LENGTH,30],["95",Dt.VARIABLE_LENGTH,30],["96",Dt.VARIABLE_LENGTH,30],["97",Dt.VARIABLE_LENGTH,3],["98",Dt.VARIABLE_LENGTH,30],["99",Dt.VARIABLE_LENGTH,30]],Dt.THREE_DIGIT_DATA_LENGTH=[["240",Dt.VARIABLE_LENGTH,30],["241",Dt.VARIABLE_LENGTH,30],["242",Dt.VARIABLE_LENGTH,6],["250",Dt.VARIABLE_LENGTH,30],["251",Dt.VARIABLE_LENGTH,30],["253",Dt.VARIABLE_LENGTH,17],["254",Dt.VARIABLE_LENGTH,20],["400",Dt.VARIABLE_LENGTH,30],["401",Dt.VARIABLE_LENGTH,30],["402",17],["403",Dt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Dt.VARIABLE_LENGTH,20],["421",Dt.VARIABLE_LENGTH,15],["422",3],["423",Dt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Dt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Dt.VARIABLE_LENGTH,15],["391",Dt.VARIABLE_LENGTH,18],["392",Dt.VARIABLE_LENGTH,15],["393",Dt.VARIABLE_LENGTH,18],["703",Dt.VARIABLE_LENGTH,30]],Dt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Dt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Dt.VARIABLE_LENGTH,20],["8003",Dt.VARIABLE_LENGTH,30],["8004",Dt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Dt.VARIABLE_LENGTH,30],["8008",Dt.VARIABLE_LENGTH,12],["8018",18],["8020",Dt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Dt.VARIABLE_LENGTH,70],["8200",Dt.VARIABLE_LENGTH,70]];class Xn{constructor(p){this.buffer=new $e,this.information=p}decodeAllCodes(p,_){let w=_,T=null;do{let M=this.decodeGeneralPurposeField(w,T),R=Dt.parseFieldsInGeneralPurpose(M.getNewString());if(R!=null&&p.append(R),M.isRemaining()?T=""+M.getRemainingValue():T=null,w===M.getNewPosition())break;w=M.getNewPosition()}while(!0);return p.toString()}isStillNumeric(p){if(p+7>this.information.getSize())return p+4<=this.information.getSize();for(let _=p;_<p+3;++_)if(this.information.get(_))return!0;return this.information.get(p+3)}decodeNumeric(p){if(p+7>this.information.getSize()){let M=this.extractNumericValueFromBitArray(p,4);return M===0?new xi(this.information.getSize(),xi.FNC1,xi.FNC1):new xi(this.information.getSize(),M-1,xi.FNC1)}let _=this.extractNumericValueFromBitArray(p,7),w=(_-8)/11,T=(_-8)%11;return new xi(p+7,w,T)}extractNumericValueFromBitArray(p,_){return Xn.extractNumericValueFromBitArray(this.information,p,_)}static extractNumericValueFromBitArray(p,_,w){let T=0;for(let M=0;M<w;++M)p.get(_+M)&&(T|=1<<w-M-1);return T}decodeGeneralPurposeField(p,_){this.buffer.setLengthToZero(),_!=null&&this.buffer.append(_),this.current.setPosition(p);let w=this.parseBlocks();return w!=null&&w.isRemaining()?new St(this.current.getPosition(),this.buffer.toString(),w.getRemainingValue()):new St(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let p,_;do{let w=this.current.getPosition();if(this.current.isAlpha()?(_=this.parseAlphaBlock(),p=_.isFinished()):this.current.isIsoIec646()?(_=this.parseIsoIec646Block(),p=_.isFinished()):(_=this.parseNumericBlock(),p=_.isFinished()),!(w!==this.current.getPosition())&&!p)break}while(!p);return _.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let p=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFirstDigitFNC1()){let _;return p.isSecondDigitFNC1()?_=new St(this.current.getPosition(),this.buffer.toString()):_=new St(this.current.getPosition(),this.buffer.toString(),p.getSecondDigit()),new oi(!0,_)}if(this.buffer.append(p.getFirstDigit()),p.isSecondDigitFNC1()){let _=new St(this.current.getPosition(),this.buffer.toString());return new oi(!0,_)}this.buffer.append(p.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new oi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let p=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFNC1()){let _=new St(this.current.getPosition(),this.buffer.toString());return new oi(!0,_)}this.buffer.append(p.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new oi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let p=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFNC1()){let _=new St(this.current.getPosition(),this.buffer.toString());return new oi(!0,_)}this.buffer.append(p.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new oi(!1)}isStillIsoIec646(p){if(p+5>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(p,5);if(_>=5&&_<16)return!0;if(p+7>this.information.getSize())return!1;let w=this.extractNumericValueFromBitArray(p,7);if(w>=64&&w<116)return!0;if(p+8>this.information.getSize())return!1;let T=this.extractNumericValueFromBitArray(p,8);return T>=232&&T<253}decodeIsoIec646(p){let _=this.extractNumericValueFromBitArray(p,5);if(_===15)return new _i(p+5,_i.FNC1);if(_>=5&&_<15)return new _i(p+5,"0"+(_-5));let w=this.extractNumericValueFromBitArray(p,7);if(w>=64&&w<90)return new _i(p+7,""+(w+1));if(w>=90&&w<116)return new _i(p+7,""+(w+7));let T=this.extractNumericValueFromBitArray(p,8),M;switch(T){case 232:M="!";break;case 233:M='"';break;case 234:M="%";break;case 235:M="&";break;case 236:M="'";break;case 237:M="(";break;case 238:M=")";break;case 239:M="*";break;case 240:M="+";break;case 241:M=",";break;case 242:M="-";break;case 243:M=".";break;case 244:M="/";break;case 245:M=":";break;case 246:M=";";break;case 247:M="<";break;case 248:M="=";break;case 249:M=">";break;case 250:M="?";break;case 251:M="_";break;case 252:M=" ";break;default:throw new te}return new _i(p+8,M)}isStillAlpha(p){if(p+5>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(p,5);if(_>=5&&_<16)return!0;if(p+6>this.information.getSize())return!1;let w=this.extractNumericValueFromBitArray(p,6);return w>=16&&w<63}decodeAlphanumeric(p){let _=this.extractNumericValueFromBitArray(p,5);if(_===15)return new _i(p+5,_i.FNC1);if(_>=5&&_<15)return new _i(p+5,"0"+(_-5));let w=this.extractNumericValueFromBitArray(p,6);if(w>=32&&w<58)return new _i(p+6,""+(w+33));let T;switch(w){case 58:T="*";break;case 59:T=",";break;case 60:T="-";break;case 61:T=".";break;case 62:T="/";break;default:throw new tn("Decoding invalid alphanumeric value: "+w)}return new _i(p+6,T)}isAlphaTo646ToAlphaLatch(p){if(p+1>this.information.getSize())return!1;for(let _=0;_<5&&_+p<this.information.getSize();++_)if(_===2){if(!this.information.get(p+2))return!1}else if(this.information.get(p+_))return!1;return!0}isAlphaOr646ToNumericLatch(p){if(p+3>this.information.getSize())return!1;for(let _=p;_<p+3;++_)if(this.information.get(_))return!1;return!0}isNumericToAlphaNumericLatch(p){if(p+1>this.information.getSize())return!1;for(let _=0;_<4&&_+p<this.information.getSize();++_)if(this.information.get(p+_))return!1;return!0}}class rn{constructor(p){this.information=p,this.generalDecoder=new Xn(p)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class At extends rn{constructor(p){super(p)}encodeCompressedGtin(p,_){p.append("(01)");let w=p.length();p.append("9"),this.encodeCompressedGtinWithoutAI(p,_,w)}encodeCompressedGtinWithoutAI(p,_,w){for(let T=0;T<4;++T){let M=this.getGeneralDecoder().extractNumericValueFromBitArray(_+10*T,10);M/100===0&&p.append("0"),M/10===0&&p.append("0"),p.append(M)}At.appendCheckDigit(p,w)}static appendCheckDigit(p,_){let w=0;for(let T=0;T<13;T++){let M=p.charAt(T+_).charCodeAt(0)-48;w+=(T&1)===0?3*M:M}w=10-w%10,w===10&&(w=0),p.append(w)}}At.GTIN_SIZE=40;class ii extends At{constructor(p){super(p)}parseInformation(){let p=new $e;p.append("(01)");let _=p.length(),w=this.getGeneralDecoder().extractNumericValueFromBitArray(ii.HEADER_SIZE,4);return p.append(w),this.encodeCompressedGtinWithoutAI(p,ii.HEADER_SIZE+4,_),this.getGeneralDecoder().decodeAllCodes(p,ii.HEADER_SIZE+44)}}ii.HEADER_SIZE=4;class Si extends rn{constructor(p){super(p)}parseInformation(){let p=new $e;return this.getGeneralDecoder().decodeAllCodes(p,Si.HEADER_SIZE)}}Si.HEADER_SIZE=5;class Xi extends At{constructor(p){super(p)}encodeCompressedWeight(p,_,w){let T=this.getGeneralDecoder().extractNumericValueFromBitArray(_,w);this.addWeightCode(p,T);let M=this.checkWeight(T),R=1e5;for(let V=0;V<5;++V)M/R===0&&p.append("0"),R/=10;p.append(M)}}class Hn extends Xi{constructor(p){super(p)}parseInformation(){if(this.getInformation().getSize()!=Hn.HEADER_SIZE+Xi.GTIN_SIZE+Hn.WEIGHT_SIZE)throw new Ie;let p=new $e;return this.encodeCompressedGtin(p,Hn.HEADER_SIZE),this.encodeCompressedWeight(p,Hn.HEADER_SIZE+Xi.GTIN_SIZE,Hn.WEIGHT_SIZE),p.toString()}}Hn.HEADER_SIZE=5,Hn.WEIGHT_SIZE=15;class Oa extends Hn{constructor(p){super(p)}addWeightCode(p,_){p.append("(3103)")}checkWeight(p){return p}}class gi extends Hn{constructor(p){super(p)}addWeightCode(p,_){_<1e4?p.append("(3202)"):p.append("(3203)")}checkWeight(p){return p<1e4?p:p-1e4}}class wn extends At{constructor(p){super(p)}parseInformation(){if(this.getInformation().getSize()<wn.HEADER_SIZE+At.GTIN_SIZE)throw new Ie;let p=new $e;this.encodeCompressedGtin(p,wn.HEADER_SIZE);let _=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+At.GTIN_SIZE,wn.LAST_DIGIT_SIZE);p.append("(392"),p.append(_),p.append(")");let w=this.getGeneralDecoder().decodeGeneralPurposeField(wn.HEADER_SIZE+At.GTIN_SIZE+wn.LAST_DIGIT_SIZE,null);return p.append(w.getNewString()),p.toString()}}wn.HEADER_SIZE=8,wn.LAST_DIGIT_SIZE=2;class cn extends At{constructor(p){super(p)}parseInformation(){if(this.getInformation().getSize()<cn.HEADER_SIZE+At.GTIN_SIZE)throw new Ie;let p=new $e;this.encodeCompressedGtin(p,cn.HEADER_SIZE);let _=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+At.GTIN_SIZE,cn.LAST_DIGIT_SIZE);p.append("(393"),p.append(_),p.append(")");let w=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+At.GTIN_SIZE+cn.LAST_DIGIT_SIZE,cn.FIRST_THREE_DIGITS_SIZE);w/100==0&&p.append("0"),w/10==0&&p.append("0"),p.append(w);let T=this.getGeneralDecoder().decodeGeneralPurposeField(cn.HEADER_SIZE+At.GTIN_SIZE+cn.LAST_DIGIT_SIZE+cn.FIRST_THREE_DIGITS_SIZE,null);return p.append(T.getNewString()),p.toString()}}cn.HEADER_SIZE=8,cn.LAST_DIGIT_SIZE=2,cn.FIRST_THREE_DIGITS_SIZE=10;class dn extends Xi{constructor(p,_,w){super(p),this.dateCode=w,this.firstAIdigits=_}parseInformation(){if(this.getInformation().getSize()!=dn.HEADER_SIZE+dn.GTIN_SIZE+dn.WEIGHT_SIZE+dn.DATE_SIZE)throw new Ie;let p=new $e;return this.encodeCompressedGtin(p,dn.HEADER_SIZE),this.encodeCompressedWeight(p,dn.HEADER_SIZE+dn.GTIN_SIZE,dn.WEIGHT_SIZE),this.encodeCompressedDate(p,dn.HEADER_SIZE+dn.GTIN_SIZE+dn.WEIGHT_SIZE),p.toString()}encodeCompressedDate(p,_){let w=this.getGeneralDecoder().extractNumericValueFromBitArray(_,dn.DATE_SIZE);if(w==38400)return;p.append("("),p.append(this.dateCode),p.append(")");let T=w%32;w/=32;let M=w%12+1;w/=12;let R=w;R/10==0&&p.append("0"),p.append(R),M/10==0&&p.append("0"),p.append(M),T/10==0&&p.append("0"),p.append(T)}addWeightCode(p,_){p.append("("),p.append(this.firstAIdigits),p.append(_/1e5),p.append(")")}checkWeight(p){return p%1e5}}dn.HEADER_SIZE=8,dn.WEIGHT_SIZE=20,dn.DATE_SIZE=16;function us(ge){try{if(ge.get(1))return new ii(ge);if(!ge.get(2))return new Si(ge);switch(Xn.extractNumericValueFromBitArray(ge,1,4)){case 4:return new Oa(ge);case 5:return new gi(ge)}switch(Xn.extractNumericValueFromBitArray(ge,1,5)){case 12:return new wn(ge);case 13:return new cn(ge)}switch(Xn.extractNumericValueFromBitArray(ge,1,7)){case 56:return new dn(ge,"310","11");case 57:return new dn(ge,"320","11");case 58:return new dn(ge,"310","13");case 59:return new dn(ge,"320","13");case 60:return new dn(ge,"310","15");case 61:return new dn(ge,"320","15");case 62:return new dn(ge,"310","17");case 63:return new dn(ge,"320","17")}}catch(p){throw console.log(p),new tn("unknown decoder: "+ge)}}class Ln{constructor(p,_,w,T){this.leftchar=p,this.rightchar=_,this.finderpattern=w,this.maybeLast=T}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(p,_){return p instanceof Ln?Ln.equalsOrNull(p.leftchar,_.leftchar)&&Ln.equalsOrNull(p.rightchar,_.rightchar)&&Ln.equalsOrNull(p.finderpattern,_.finderpattern):!1}static equalsOrNull(p,_){return p===null?_===null:Ln.equals(p,_)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Nn{constructor(p,_,w){this.pairs=p,this.rowNumber=_,this.wasReversed=w}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(p){return this.checkEqualitity(this,p)}toString(){return"{ "+this.pairs+" }"}equals(p,_){return p instanceof Nn?this.checkEqualitity(p,_)&&p.wasReversed===_.wasReversed:!1}checkEqualitity(p,_){if(!p||!_)return;let w;return p.forEach((T,M)=>{_.forEach(R=>{T.getLeftChar().getValue()===R.getLeftChar().getValue()&&T.getRightChar().getValue()===R.getRightChar().getValue()&&T.getFinderPatter().getValue()===R.getFinderPatter().getValue()&&(w=!0)})}),w}}class Tt extends zi{constructor(p){super(...arguments),this.pairs=new Array(Tt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=p===!0}decodeRow(p,_,w){this.pairs.length=0,this.startFromEven=!1;try{return Tt.constructResult(this.decodeRow2pairs(p,_))}catch(T){this.verbose&&console.log(T)}return this.pairs.length=0,this.startFromEven=!0,Tt.constructResult(this.decodeRow2pairs(p,_))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(p,_){let w=!1;for(;!w;)try{this.pairs.push(this.retrieveNextPair(_,this.pairs,p))}catch(M){if(M instanceof Ie){if(!this.pairs.length)throw new Ie;w=!0}}if(this.checkChecksum())return this.pairs;let T;if(this.rows.length?T=!0:T=!1,this.storeRow(p,!1),T){let M=this.checkRowsBoolean(!1);if(M!=null||(M=this.checkRowsBoolean(!0),M!=null))return M}throw new Ie}checkRowsBoolean(p){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,p&&(this.rows=this.rows.reverse());let _=null;try{_=this.checkRows(new Array,0)}catch(w){this.verbose&&console.log(w)}return p&&(this.rows=this.rows.reverse()),_}checkRows(p,_){for(let w=_;w<this.rows.length;w++){let T=this.rows[w];this.pairs.length=0;for(let R of p)this.pairs.push(R.getPairs());if(this.pairs.push(T.getPairs()),!Tt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let M=new Array(p);M.push(T);try{return this.checkRows(M,w+1)}catch(R){this.verbose&&console.log(R)}}throw new Ie}static isValidSequence(p){for(let _ of Tt.FINDER_PATTERN_SEQUENCES){if(p.length>_.length)continue;let w=!0;for(let T=0;T<p.length;T++)if(p[T].getFinderPattern().getValue()!=_[T]){w=!1;break}if(w)return!0}return!1}storeRow(p,_){let w=0,T=!1,M=!1;for(;w<this.rows.length;){let R=this.rows[w];if(R.getRowNumber()>p){M=R.isEquivalent(this.pairs);break}T=R.isEquivalent(this.pairs),w++}M||T||Tt.isPartialRow(this.pairs,this.rows)||(this.rows.push(w,new Nn(this.pairs,p,_)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(p,_){for(let w of _)if(w.getPairs().length!==p.length){for(let T of w.getPairs())for(let M of p)if(Ln.equals(T,M))break}}static isPartialRow(p,_){for(let w of _){let T=!0;for(let M of p){let R=!1;for(let V of w.getPairs())if(M.equals(V)){R=!0;break}if(!R){T=!1;break}}if(T)return!0}return!1}getRows(){return this.rows}static constructResult(p){let _=Rt.buildBitArray(p),T=us(_).parseInformation(),M=p[0].getFinderPattern().getResultPoints(),R=p[p.length-1].getFinderPattern().getResultPoints(),V=[M[0],M[1],R[0],R[1]];return new jt(T,null,null,V,Ct.RSS_EXPANDED,null)}checkChecksum(){let p=this.pairs.get(0),_=p.getLeftChar(),w=p.getRightChar();if(w==null)return!1;let T=w.getChecksumPortion(),M=2;for(let V=1;V<this.pairs.size();++V){let G=this.pairs.get(V);T+=G.getLeftChar().getChecksumPortion(),M++;let q=G.getRightChar();q!=null&&(T+=q.getChecksumPortion(),M++)}return T%=211,211*(M-4)+T==_.getValue()}static getNextSecondBar(p,_){let w;return p.get(_)?(w=p.getNextUnset(_),w=p.getNextSet(w)):(w=p.getNextSet(_),w=p.getNextUnset(w)),w}retrieveNextPair(p,_,w){let T=_.length%2==0;this.startFromEven&&(T=!T);let M,R=!0,V=-1;do this.findNextPair(p,_,V),M=this.parseFoundFinderPattern(p,w,T),M==null?V=Tt.getNextSecondBar(p,this.startEnd[0]):R=!1;while(R);let G=this.decodeDataCharacter(p,M,T,!0);if(!this.isEmptyPair(_)&&_[_.length-1].mustBeLast())throw new Ie;let q;try{q=this.decodeDataCharacter(p,M,T,!1)}catch(oe){q=null,this.verbose&&console.log(oe)}return new Ln(G,q,M,!0)}isEmptyPair(p){return p.length===0}findNextPair(p,_,w){let T=this.getDecodeFinderCounters();T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=p.getSize(),R;w>=0?R=w:this.isEmptyPair(_)?R=0:R=_[_.length-1].getFinderPattern().getStartEnd()[1];let V=_.length%2!=0;this.startFromEven&&(V=!V);let G=!1;for(;R<M&&(G=!p.get(R),!!G);)R++;let q=0,oe=R;for(let me=R;me<M;me++)if(p.get(me)!=G)T[q]++;else{if(q==3){if(V&&Tt.reverseCounters(T),Tt.isFinderPattern(T)){this.startEnd[0]=oe,this.startEnd[1]=me;return}V&&Tt.reverseCounters(T),oe+=T[0]+T[1],T[0]=T[2],T[1]=T[3],T[2]=0,T[3]=0,q--}else q++;T[q]=1,G=!G}throw new Ie}static reverseCounters(p){let _=p.length;for(let w=0;w<_/2;++w){let T=p[w];p[w]=p[_-w-1],p[_-w-1]=T}}parseFoundFinderPattern(p,_,w){let T,M,R;if(w){let q=this.startEnd[0]-1;for(;q>=0&&!p.get(q);)q--;q++,T=this.startEnd[0]-q,M=q,R=this.startEnd[1]}else M=this.startEnd[0],R=p.getNextUnset(this.startEnd[1]+1),T=R-this.startEnd[1];let V=this.getDecodeFinderCounters();O.arraycopy(V,0,V,1,V.length-1),V[0]=T;let G;try{G=this.parseFinderValue(V,Tt.FINDER_PATTERNS)}catch{return null}return new Jt(G,[M,R],M,R,_)}decodeDataCharacter(p,_,w,T){let M=this.getDataCharacterCounters();for(let zn=0;zn<M.length;zn++)M[zn]=0;if(T)Tt.recordPatternInReverse(p,_.getStartEnd()[0],M);else{Tt.recordPattern(p,_.getStartEnd()[1],M);for(let zn=0,fa=M.length-1;zn<fa;zn++,fa--){let fr=M[zn];M[zn]=M[fa],M[fa]=fr}}let R=17,V=Bi.sum(new Int32Array(M))/R,G=(_.getStartEnd()[1]-_.getStartEnd()[0])/15;if(Math.abs(V-G)/G>.3)throw new Ie;let q=this.getOddCounts(),oe=this.getEvenCounts(),me=this.getOddRoundingErrors(),we=this.getEvenRoundingErrors();for(let zn=0;zn<M.length;zn++){let fa=1*M[zn]/V,fr=fa+.5;if(fr<1){if(fa<.3)throw new Ie;fr=1}else if(fr>8){if(fa>8.7)throw new Ie;fr=8}let Is=zn/2;(zn&1)==0?(q[Is]=fr,me[Is]=fa-fr):(oe[Is]=fr,we[Is]=fa-fr)}this.adjustOddEvenCounts(R);let Re=4*_.getValue()+(w?0:2)+(T?0:1)-1,Ye=0,Ze=0;for(let zn=q.length-1;zn>=0;zn--){if(Tt.isNotA1left(_,w,T)){let fa=Tt.WEIGHTS[Re][2*zn];Ze+=q[zn]*fa}Ye+=q[zn]}let ct=0;for(let zn=oe.length-1;zn>=0;zn--)if(Tt.isNotA1left(_,w,T)){let fa=Tt.WEIGHTS[Re][2*zn+1];ct+=oe[zn]*fa}let yt=Ze+ct;if((Ye&1)!=0||Ye>13||Ye<4)throw new Ie;let Ht=(13-Ye)/2,Wt=Tt.SYMBOL_WIDEST[Ht],Ft=9-Wt,hn=fi.getRSSvalue(q,Wt,!0),ai=fi.getRSSvalue(oe,Ft,!1),ur=Tt.EVEN_TOTAL_SUBSET[Ht],$r=Tt.GSUM[Ht],dr=hn*ur+ai+$r;return new di(dr,yt)}static isNotA1left(p,_,w){return!(p.getValue()==0&&_&&w)}adjustOddEvenCounts(p){let _=Bi.sum(new Int32Array(this.getOddCounts())),w=Bi.sum(new Int32Array(this.getEvenCounts())),T=!1,M=!1;_>13?M=!0:_<4&&(T=!0);let R=!1,V=!1;w>13?V=!0:w<4&&(R=!0);let G=_+w-p,q=(_&1)==1,oe=(w&1)==0;if(G==1)if(q){if(oe)throw new Ie;M=!0}else{if(!oe)throw new Ie;V=!0}else if(G==-1)if(q){if(oe)throw new Ie;T=!0}else{if(!oe)throw new Ie;R=!0}else if(G==0){if(q){if(!oe)throw new Ie;_<w?(T=!0,V=!0):(M=!0,R=!0)}else if(oe)throw new Ie}else throw new Ie;if(T){if(M)throw new Ie;Tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(M&&Tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),R){if(V)throw new Ie;Tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}V&&Tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Tt.SYMBOL_WIDEST=[7,5,4,3,1],Tt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Tt.GSUM=[0,348,1388,2948,3988],Tt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Tt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Tt.FINDER_PAT_A=0,Tt.FINDER_PAT_B=1,Tt.FINDER_PAT_C=2,Tt.FINDER_PAT_D=3,Tt.FINDER_PAT_E=4,Tt.FINDER_PAT_F=5,Tt.FINDER_PATTERN_SEQUENCES=[[Tt.FINDER_PAT_A,Tt.FINDER_PAT_A],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_B,Tt.FINDER_PAT_B],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_C,Tt.FINDER_PAT_B,Tt.FINDER_PAT_D],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_E,Tt.FINDER_PAT_B,Tt.FINDER_PAT_D,Tt.FINDER_PAT_C],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_E,Tt.FINDER_PAT_B,Tt.FINDER_PAT_D,Tt.FINDER_PAT_D,Tt.FINDER_PAT_F],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_E,Tt.FINDER_PAT_B,Tt.FINDER_PAT_D,Tt.FINDER_PAT_E,Tt.FINDER_PAT_F,Tt.FINDER_PAT_F],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_A,Tt.FINDER_PAT_B,Tt.FINDER_PAT_B,Tt.FINDER_PAT_C,Tt.FINDER_PAT_C,Tt.FINDER_PAT_D,Tt.FINDER_PAT_D],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_A,Tt.FINDER_PAT_B,Tt.FINDER_PAT_B,Tt.FINDER_PAT_C,Tt.FINDER_PAT_C,Tt.FINDER_PAT_D,Tt.FINDER_PAT_E,Tt.FINDER_PAT_E],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_A,Tt.FINDER_PAT_B,Tt.FINDER_PAT_B,Tt.FINDER_PAT_C,Tt.FINDER_PAT_C,Tt.FINDER_PAT_D,Tt.FINDER_PAT_E,Tt.FINDER_PAT_F,Tt.FINDER_PAT_F],[Tt.FINDER_PAT_A,Tt.FINDER_PAT_A,Tt.FINDER_PAT_B,Tt.FINDER_PAT_B,Tt.FINDER_PAT_C,Tt.FINDER_PAT_D,Tt.FINDER_PAT_D,Tt.FINDER_PAT_E,Tt.FINDER_PAT_E,Tt.FINDER_PAT_F,Tt.FINDER_PAT_F]],Tt.MAX_PAIRS=11;class Ga extends di{constructor(p,_,w){super(p,_),this.count=0,this.finderPattern=w}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Mi extends zi{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(p,_,w){const T=this.decodePair(_,!1,p,w);Mi.addOrTally(this.possibleLeftPairs,T),_.reverse();let M=this.decodePair(_,!0,p,w);Mi.addOrTally(this.possibleRightPairs,M),_.reverse();for(let R of this.possibleLeftPairs)if(R.getCount()>1){for(let V of this.possibleRightPairs)if(V.getCount()>1&&Mi.checkChecksum(R,V))return Mi.constructResult(R,V)}throw new Ie}static addOrTally(p,_){if(_==null)return;let w=!1;for(let T of p)if(T.getValue()===_.getValue()){T.incrementCount(),w=!0;break}w||p.push(_)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(p,_){let w=4537077*p.getValue()+_.getValue(),T=new String(w).toString(),M=new $e;for(let q=13-T.length;q>0;q--)M.append("0");M.append(T);let R=0;for(let q=0;q<13;q++){let oe=M.charAt(q).charCodeAt(0)-48;R+=(q&1)===0?3*oe:oe}R=10-R%10,R===10&&(R=0),M.append(R.toString());let V=p.getFinderPattern().getResultPoints(),G=_.getFinderPattern().getResultPoints();return new jt(M.toString(),null,0,[V[0],V[1],G[0],G[1]],Ct.RSS_14,new Date().getTime())}static checkChecksum(p,_){let w=(p.getChecksumPortion()+16*_.getChecksumPortion())%79,T=9*p.getFinderPattern().getValue()+_.getFinderPattern().getValue();return T>72&&T--,T>8&&T--,w===T}decodePair(p,_,w,T){try{let M=this.findFinderPattern(p,_),R=this.parseFoundFinderPattern(p,w,_,M),V=T==null?null:T.get(le.NEED_RESULT_POINT_CALLBACK);if(V!=null){let oe=(M[0]+M[1])/2;_&&(oe=p.getSize()-1-oe),V.foundPossibleResultPoint(new Gt(oe,w))}let G=this.decodeDataCharacter(p,R,!0),q=this.decodeDataCharacter(p,R,!1);return new Ga(1597*G.getValue()+q.getValue(),G.getChecksumPortion()+4*q.getChecksumPortion(),R)}catch{return null}}decodeDataCharacter(p,_,w){let T=this.getDataCharacterCounters();for(let ct=0;ct<T.length;ct++)T[ct]=0;if(w)Qe.recordPatternInReverse(p,_.getStartEnd()[0],T);else{Qe.recordPattern(p,_.getStartEnd()[1]+1,T);for(let ct=0,yt=T.length-1;ct<yt;ct++,yt--){let Ht=T[ct];T[ct]=T[yt],T[yt]=Ht}}let M=w?16:15,R=Bi.sum(new Int32Array(T))/M,V=this.getOddCounts(),G=this.getEvenCounts(),q=this.getOddRoundingErrors(),oe=this.getEvenRoundingErrors();for(let ct=0;ct<T.length;ct++){let yt=T[ct]/R,Ht=Math.floor(yt+.5);Ht<1?Ht=1:Ht>8&&(Ht=8);let Wt=Math.floor(ct/2);(ct&1)===0?(V[Wt]=Ht,q[Wt]=yt-Ht):(G[Wt]=Ht,oe[Wt]=yt-Ht)}this.adjustOddEvenCounts(w,M);let me=0,we=0;for(let ct=V.length-1;ct>=0;ct--)we*=9,we+=V[ct],me+=V[ct];let Re=0,Ye=0;for(let ct=G.length-1;ct>=0;ct--)Re*=9,Re+=G[ct],Ye+=G[ct];let Ze=we+3*Re;if(w){if((me&1)!==0||me>12||me<4)throw new Ie;let ct=(12-me)/2,yt=Mi.OUTSIDE_ODD_WIDEST[ct],Ht=9-yt,Wt=fi.getRSSvalue(V,yt,!1),Ft=fi.getRSSvalue(G,Ht,!0),hn=Mi.OUTSIDE_EVEN_TOTAL_SUBSET[ct],ai=Mi.OUTSIDE_GSUM[ct];return new di(Wt*hn+Ft+ai,Ze)}else{if((Ye&1)!==0||Ye>10||Ye<4)throw new Ie;let ct=(10-Ye)/2,yt=Mi.INSIDE_ODD_WIDEST[ct],Ht=9-yt,Wt=fi.getRSSvalue(V,yt,!0),Ft=fi.getRSSvalue(G,Ht,!1),hn=Mi.INSIDE_ODD_TOTAL_SUBSET[ct],ai=Mi.INSIDE_GSUM[ct];return new di(Ft*hn+Wt+ai,Ze)}}findFinderPattern(p,_){let w=this.getDecodeFinderCounters();w[0]=0,w[1]=0,w[2]=0,w[3]=0;let T=p.getSize(),M=!1,R=0;for(;R<T&&(M=!p.get(R),_!==M);)R++;let V=0,G=R;for(let q=R;q<T;q++)if(p.get(q)!==M)w[V]++;else{if(V===3){if(zi.isFinderPattern(w))return[G,q];G+=w[0]+w[1],w[0]=w[2],w[1]=w[3],w[2]=0,w[3]=0,V--}else V++;w[V]=1,M=!M}throw new Ie}parseFoundFinderPattern(p,_,w,T){let M=p.get(T[0]),R=T[0]-1;for(;R>=0&&M!==p.get(R);)R--;R++;const V=T[0]-R,G=this.getDecodeFinderCounters(),q=new Int32Array(G.length);O.arraycopy(G,0,q,1,G.length-1),q[0]=V;const oe=this.parseFinderValue(q,Mi.FINDER_PATTERNS);let me=R,we=T[1];return w&&(me=p.getSize()-1-me,we=p.getSize()-1-we),new Jt(oe,[R,T[1]],me,we,_)}adjustOddEvenCounts(p,_){let w=Bi.sum(new Int32Array(this.getOddCounts())),T=Bi.sum(new Int32Array(this.getEvenCounts())),M=!1,R=!1,V=!1,G=!1;p?(w>12?R=!0:w<4&&(M=!0),T>12?G=!0:T<4&&(V=!0)):(w>11?R=!0:w<5&&(M=!0),T>10?G=!0:T<4&&(V=!0));let q=w+T-_,oe=(w&1)===(p?1:0),me=(T&1)===1;if(q===1)if(oe){if(me)throw new Ie;R=!0}else{if(!me)throw new Ie;G=!0}else if(q===-1)if(oe){if(me)throw new Ie;M=!0}else{if(!me)throw new Ie;V=!0}else if(q===0){if(oe){if(!me)throw new Ie;w<T?(M=!0,G=!0):(R=!0,V=!0)}else if(me)throw new Ie}else throw new Ie;if(M){if(R)throw new Ie;zi.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(R&&zi.decrement(this.getOddCounts(),this.getOddRoundingErrors()),V){if(G)throw new Ie;zi.increment(this.getEvenCounts(),this.getOddRoundingErrors())}G&&zi.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Mi.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Mi.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Mi.OUTSIDE_GSUM=[0,161,961,2015,2715],Mi.INSIDE_GSUM=[0,336,1036,1516],Mi.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Mi.INSIDE_ODD_WIDEST=[2,4,6,8],Mi.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Dr extends Qe{constructor(p,_){super(),this.readers=[],this.verbose=_===!0;const w=p?p.get(le.POSSIBLE_FORMATS):null,T=p&&p.get(le.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;w?((w.includes(Ct.EAN_13)||w.includes(Ct.UPC_A)||w.includes(Ct.EAN_8)||w.includes(Ct.UPC_E))&&this.readers.push(new yi(p)),w.includes(Ct.CODE_39)&&this.readers.push(new nt(T)),w.includes(Ct.CODE_128)&&this.readers.push(new Pe),w.includes(Ct.ITF)&&this.readers.push(new mt),w.includes(Ct.RSS_14)&&this.readers.push(new Mi),w.includes(Ct.RSS_EXPANDED)&&this.readers.push(new Tt(this.verbose))):(this.readers.push(new yi(p)),this.readers.push(new nt),this.readers.push(new yi(p)),this.readers.push(new Pe),this.readers.push(new mt),this.readers.push(new Mi),this.readers.push(new Tt(this.verbose)))}decodeRow(p,_,w){for(let T=0;T<this.readers.length;T++)try{return this.readers[T].decodeRow(p,_,w)}catch{}throw new Ie}reset(){this.readers.forEach(p=>p.reset())}}class lr extends Ai{constructor(p=500,_){super(new Dr(_),p,_)}}class Yi{constructor(p,_,w){this.ecCodewords=p,this.ecBlocks=[_],w&&this.ecBlocks.push(w)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Wi{constructor(p,_){this.count=p,this.dataCodewords=_}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ii{constructor(p,_,w,T,M,R){this.versionNumber=p,this.symbolSizeRows=_,this.symbolSizeColumns=w,this.dataRegionSizeRows=T,this.dataRegionSizeColumns=M,this.ecBlocks=R;let V=0;const G=R.getECCodewords(),q=R.getECBlocks();for(let oe of q)V+=oe.getCount()*(oe.getDataCodewords()+G);this.totalCodewords=V}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(p,_){if((p&1)!==0||(_&1)!==0)throw new te;for(let w of Ii.VERSIONS)if(w.symbolSizeRows===p&&w.symbolSizeColumns===_)return w;throw new te}toString(){return""+this.versionNumber}static buildVersions(){return[new Ii(1,10,10,8,8,new Yi(5,new Wi(1,3))),new Ii(2,12,12,10,10,new Yi(7,new Wi(1,5))),new Ii(3,14,14,12,12,new Yi(10,new Wi(1,8))),new Ii(4,16,16,14,14,new Yi(12,new Wi(1,12))),new Ii(5,18,18,16,16,new Yi(14,new Wi(1,18))),new Ii(6,20,20,18,18,new Yi(18,new Wi(1,22))),new Ii(7,22,22,20,20,new Yi(20,new Wi(1,30))),new Ii(8,24,24,22,22,new Yi(24,new Wi(1,36))),new Ii(9,26,26,24,24,new Yi(28,new Wi(1,44))),new Ii(10,32,32,14,14,new Yi(36,new Wi(1,62))),new Ii(11,36,36,16,16,new Yi(42,new Wi(1,86))),new Ii(12,40,40,18,18,new Yi(48,new Wi(1,114))),new Ii(13,44,44,20,20,new Yi(56,new Wi(1,144))),new Ii(14,48,48,22,22,new Yi(68,new Wi(1,174))),new Ii(15,52,52,24,24,new Yi(42,new Wi(2,102))),new Ii(16,64,64,14,14,new Yi(56,new Wi(2,140))),new Ii(17,72,72,16,16,new Yi(36,new Wi(4,92))),new Ii(18,80,80,18,18,new Yi(48,new Wi(4,114))),new Ii(19,88,88,20,20,new Yi(56,new Wi(4,144))),new Ii(20,96,96,22,22,new Yi(68,new Wi(4,174))),new Ii(21,104,104,24,24,new Yi(56,new Wi(6,136))),new Ii(22,120,120,18,18,new Yi(68,new Wi(6,175))),new Ii(23,132,132,20,20,new Yi(62,new Wi(8,163))),new Ii(24,144,144,22,22,new Yi(62,new Wi(8,156),new Wi(2,155))),new Ii(25,8,18,6,16,new Yi(7,new Wi(1,5))),new Ii(26,8,32,6,14,new Yi(11,new Wi(1,10))),new Ii(27,12,26,10,24,new Yi(14,new Wi(1,16))),new Ii(28,12,36,10,16,new Yi(18,new Wi(1,22))),new Ii(29,16,36,14,16,new Yi(24,new Wi(1,32))),new Ii(30,16,48,14,22,new Yi(28,new Wi(1,49)))]}}Ii.VERSIONS=Ii.buildVersions();class zc{constructor(p){const _=p.getHeight();if(_<8||_>144||(_&1)!==0)throw new te;this.version=zc.readVersion(p),this.mappingBitMatrix=this.extractDataRegion(p),this.readMappingMatrix=new et(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(p){const _=p.getHeight(),w=p.getWidth();return Ii.getVersionForDimensions(_,w)}readCodewords(){const p=new Int8Array(this.version.getTotalCodewords());let _=0,w=4,T=0;const M=this.mappingBitMatrix.getHeight(),R=this.mappingBitMatrix.getWidth();let V=!1,G=!1,q=!1,oe=!1;do if(w===M&&T===0&&!V)p[_++]=this.readCorner1(M,R)&255,w-=2,T+=2,V=!0;else if(w===M-2&&T===0&&(R&3)!==0&&!G)p[_++]=this.readCorner2(M,R)&255,w-=2,T+=2,G=!0;else if(w===M+4&&T===2&&(R&7)===0&&!q)p[_++]=this.readCorner3(M,R)&255,w-=2,T+=2,q=!0;else if(w===M-2&&T===0&&(R&7)===4&&!oe)p[_++]=this.readCorner4(M,R)&255,w-=2,T+=2,oe=!0;else{do w<M&&T>=0&&!this.readMappingMatrix.get(T,w)&&(p[_++]=this.readUtah(w,T,M,R)&255),w-=2,T+=2;while(w>=0&&T<R);w+=1,T+=3;do w>=0&&T<R&&!this.readMappingMatrix.get(T,w)&&(p[_++]=this.readUtah(w,T,M,R)&255),w+=2,T-=2;while(w<M&&T>=0);w+=3,T+=1}while(w<M||T<R);if(_!==this.version.getTotalCodewords())throw new te;return p}readModule(p,_,w,T){return p<0&&(p+=w,_+=4-(w+4&7)),_<0&&(_+=T,p+=4-(T+4&7)),this.readMappingMatrix.set(_,p),this.mappingBitMatrix.get(_,p)}readUtah(p,_,w,T){let M=0;return this.readModule(p-2,_-2,w,T)&&(M|=1),M<<=1,this.readModule(p-2,_-1,w,T)&&(M|=1),M<<=1,this.readModule(p-1,_-2,w,T)&&(M|=1),M<<=1,this.readModule(p-1,_-1,w,T)&&(M|=1),M<<=1,this.readModule(p-1,_,w,T)&&(M|=1),M<<=1,this.readModule(p,_-2,w,T)&&(M|=1),M<<=1,this.readModule(p,_-1,w,T)&&(M|=1),M<<=1,this.readModule(p,_,w,T)&&(M|=1),M}readCorner1(p,_){let w=0;return this.readModule(p-1,0,p,_)&&(w|=1),w<<=1,this.readModule(p-1,1,p,_)&&(w|=1),w<<=1,this.readModule(p-1,2,p,_)&&(w|=1),w<<=1,this.readModule(0,_-2,p,_)&&(w|=1),w<<=1,this.readModule(0,_-1,p,_)&&(w|=1),w<<=1,this.readModule(1,_-1,p,_)&&(w|=1),w<<=1,this.readModule(2,_-1,p,_)&&(w|=1),w<<=1,this.readModule(3,_-1,p,_)&&(w|=1),w}readCorner2(p,_){let w=0;return this.readModule(p-3,0,p,_)&&(w|=1),w<<=1,this.readModule(p-2,0,p,_)&&(w|=1),w<<=1,this.readModule(p-1,0,p,_)&&(w|=1),w<<=1,this.readModule(0,_-4,p,_)&&(w|=1),w<<=1,this.readModule(0,_-3,p,_)&&(w|=1),w<<=1,this.readModule(0,_-2,p,_)&&(w|=1),w<<=1,this.readModule(0,_-1,p,_)&&(w|=1),w<<=1,this.readModule(1,_-1,p,_)&&(w|=1),w}readCorner3(p,_){let w=0;return this.readModule(p-1,0,p,_)&&(w|=1),w<<=1,this.readModule(p-1,_-1,p,_)&&(w|=1),w<<=1,this.readModule(0,_-3,p,_)&&(w|=1),w<<=1,this.readModule(0,_-2,p,_)&&(w|=1),w<<=1,this.readModule(0,_-1,p,_)&&(w|=1),w<<=1,this.readModule(1,_-3,p,_)&&(w|=1),w<<=1,this.readModule(1,_-2,p,_)&&(w|=1),w<<=1,this.readModule(1,_-1,p,_)&&(w|=1),w}readCorner4(p,_){let w=0;return this.readModule(p-3,0,p,_)&&(w|=1),w<<=1,this.readModule(p-2,0,p,_)&&(w|=1),w<<=1,this.readModule(p-1,0,p,_)&&(w|=1),w<<=1,this.readModule(0,_-2,p,_)&&(w|=1),w<<=1,this.readModule(0,_-1,p,_)&&(w|=1),w<<=1,this.readModule(1,_-1,p,_)&&(w|=1),w<<=1,this.readModule(2,_-1,p,_)&&(w|=1),w<<=1,this.readModule(3,_-1,p,_)&&(w|=1),w}extractDataRegion(p){const _=this.version.getSymbolSizeRows(),w=this.version.getSymbolSizeColumns();if(p.getHeight()!==_)throw new v("Dimension of bitMatrix must match the version size");const T=this.version.getDataRegionSizeRows(),M=this.version.getDataRegionSizeColumns(),R=_/T|0,V=w/M|0,G=R*T,q=V*M,oe=new et(q,G);for(let me=0;me<R;++me){const we=me*T;for(let Re=0;Re<V;++Re){const Ye=Re*M;for(let Ze=0;Ze<T;++Ze){const ct=me*(T+2)+1+Ze,yt=we+Ze;for(let Ht=0;Ht<M;++Ht){const Wt=Re*(M+2)+1+Ht;if(p.get(Wt,ct)){const Ft=Ye+Ht;oe.set(Ft,yt)}}}}}return oe}}class lo{constructor(p,_){this.numDataCodewords=p,this.codewords=_}static getDataBlocks(p,_){const w=_.getECBlocks();let T=0;const M=w.getECBlocks();for(let Ze of M)T+=Ze.getCount();const R=new Array(T);let V=0;for(let Ze of M)for(let ct=0;ct<Ze.getCount();ct++){const yt=Ze.getDataCodewords(),Ht=w.getECCodewords()+yt;R[V++]=new lo(yt,new Uint8Array(Ht))}const q=R[0].codewords.length-w.getECCodewords(),oe=q-1;let me=0;for(let Ze=0;Ze<oe;Ze++)for(let ct=0;ct<V;ct++)R[ct].codewords[Ze]=p[me++];const we=_.getVersionNumber()===24,Re=we?8:V;for(let Ze=0;Ze<Re;Ze++)R[Ze].codewords[q-1]=p[me++];const Ye=R[0].codewords.length;for(let Ze=q;Ze<Ye;Ze++)for(let ct=0;ct<V;ct++){const yt=we?(ct+8)%V:ct,Ht=we&&yt>7?Ze-1:Ze;R[yt].codewords[Ht]=p[me++]}if(me!==p.length)throw new v;return R}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Sl{constructor(p){this.bytes=p,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(p){if(p<1||p>32||p>this.available())throw new v(""+p);let _=0,w=this.bitOffset,T=this.byteOffset;const M=this.bytes;if(w>0){const R=8-w,V=p<R?p:R,G=R-V,q=255>>8-V<<G;_=(M[T]&q)>>G,p-=V,w+=V,w===8&&(w=0,T++)}if(p>0){for(;p>=8;)_=_<<8|M[T]&255,T++,p-=8;if(p>0){const R=8-p,V=255>>R<<R;_=_<<p|(M[T]&V)>>R,w+=p}}return this.bitOffset=w,this.byteOffset=T,_}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var $i;(function(ge){ge[ge.PAD_ENCODE=0]="PAD_ENCODE",ge[ge.ASCII_ENCODE=1]="ASCII_ENCODE",ge[ge.C40_ENCODE=2]="C40_ENCODE",ge[ge.TEXT_ENCODE=3]="TEXT_ENCODE",ge[ge.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",ge[ge.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",ge[ge.BASE256_ENCODE=6]="BASE256_ENCODE"})($i||($i={}));class co{static decode(p){const _=new Sl(p),w=new $e,T=new $e,M=new Array;let R=$i.ASCII_ENCODE;do if(R===$i.ASCII_ENCODE)R=this.decodeAsciiSegment(_,w,T);else{switch(R){case $i.C40_ENCODE:this.decodeC40Segment(_,w);break;case $i.TEXT_ENCODE:this.decodeTextSegment(_,w);break;case $i.ANSIX12_ENCODE:this.decodeAnsiX12Segment(_,w);break;case $i.EDIFACT_ENCODE:this.decodeEdifactSegment(_,w);break;case $i.BASE256_ENCODE:this.decodeBase256Segment(_,w,M);break;default:throw new te}R=$i.ASCII_ENCODE}while(R!==$i.PAD_ENCODE&&_.available()>0);return T.length()>0&&w.append(T.toString()),new Pi(p,w.toString(),M.length===0?null:M,null)}static decodeAsciiSegment(p,_,w){let T=!1;do{let M=p.readBits(8);if(M===0)throw new te;if(M<=128)return T&&(M+=128),_.append(String.fromCharCode(M-1)),$i.ASCII_ENCODE;if(M===129)return $i.PAD_ENCODE;if(M<=229){const R=M-130;R<10&&_.append("0"),_.append(""+R)}else switch(M){case 230:return $i.C40_ENCODE;case 231:return $i.BASE256_ENCODE;case 232:_.append("");break;case 233:case 234:break;case 235:T=!0;break;case 236:_.append("[)>05"),w.insert(0,"");break;case 237:_.append("[)>06"),w.insert(0,"");break;case 238:return $i.ANSIX12_ENCODE;case 239:return $i.TEXT_ENCODE;case 240:return $i.EDIFACT_ENCODE;case 241:break;default:if(M!==254||p.available()!==0)throw new te;break}}while(p.available()>0);return $i.ASCII_ENCODE}static decodeC40Segment(p,_){let w=!1;const T=[];let M=0;do{if(p.available()===8)return;const R=p.readBits(8);if(R===254)return;this.parseTwoBytes(R,p.readBits(8),T);for(let V=0;V<3;V++){const G=T[V];switch(M){case 0:if(G<3)M=G+1;else if(G<this.C40_BASIC_SET_CHARS.length){const q=this.C40_BASIC_SET_CHARS[G];w?(_.append(String.fromCharCode(q.charCodeAt(0)+128)),w=!1):_.append(q)}else throw new te;break;case 1:w?(_.append(String.fromCharCode(G+128)),w=!1):_.append(String.fromCharCode(G)),M=0;break;case 2:if(G<this.C40_SHIFT2_SET_CHARS.length){const q=this.C40_SHIFT2_SET_CHARS[G];w?(_.append(String.fromCharCode(q.charCodeAt(0)+128)),w=!1):_.append(q)}else switch(G){case 27:_.append("");break;case 30:w=!0;break;default:throw new te}M=0;break;case 3:w?(_.append(String.fromCharCode(G+224)),w=!1):_.append(String.fromCharCode(G+96)),M=0;break;default:throw new te}}}while(p.available()>0)}static decodeTextSegment(p,_){let w=!1,T=[],M=0;do{if(p.available()===8)return;const R=p.readBits(8);if(R===254)return;this.parseTwoBytes(R,p.readBits(8),T);for(let V=0;V<3;V++){const G=T[V];switch(M){case 0:if(G<3)M=G+1;else if(G<this.TEXT_BASIC_SET_CHARS.length){const q=this.TEXT_BASIC_SET_CHARS[G];w?(_.append(String.fromCharCode(q.charCodeAt(0)+128)),w=!1):_.append(q)}else throw new te;break;case 1:w?(_.append(String.fromCharCode(G+128)),w=!1):_.append(String.fromCharCode(G)),M=0;break;case 2:if(G<this.TEXT_SHIFT2_SET_CHARS.length){const q=this.TEXT_SHIFT2_SET_CHARS[G];w?(_.append(String.fromCharCode(q.charCodeAt(0)+128)),w=!1):_.append(q)}else switch(G){case 27:_.append("");break;case 30:w=!0;break;default:throw new te}M=0;break;case 3:if(G<this.TEXT_SHIFT3_SET_CHARS.length){const q=this.TEXT_SHIFT3_SET_CHARS[G];w?(_.append(String.fromCharCode(q.charCodeAt(0)+128)),w=!1):_.append(q),M=0}else throw new te;break;default:throw new te}}}while(p.available()>0)}static decodeAnsiX12Segment(p,_){const w=[];do{if(p.available()===8)return;const T=p.readBits(8);if(T===254)return;this.parseTwoBytes(T,p.readBits(8),w);for(let M=0;M<3;M++){const R=w[M];switch(R){case 0:_.append("\r");break;case 1:_.append("*");break;case 2:_.append(">");break;case 3:_.append(" ");break;default:if(R<14)_.append(String.fromCharCode(R+44));else if(R<40)_.append(String.fromCharCode(R+51));else throw new te;break}}}while(p.available()>0)}static parseTwoBytes(p,_,w){let T=(p<<8)+_-1,M=Math.floor(T/1600);w[0]=M,T-=M*1600,M=Math.floor(T/40),w[1]=M,w[2]=T-M*40}static decodeEdifactSegment(p,_){do{if(p.available()<=16)return;for(let w=0;w<4;w++){let T=p.readBits(6);if(T===31){const M=8-p.getBitOffset();M!==8&&p.readBits(M);return}(T&32)===0&&(T|=64),_.append(String.fromCharCode(T))}}while(p.available()>0)}static decodeBase256Segment(p,_,w){let T=1+p.getByteOffset();const M=this.unrandomize255State(p.readBits(8),T++);let R;if(M===0?R=p.available()/8|0:M<250?R=M:R=250*(M-249)+this.unrandomize255State(p.readBits(8),T++),R<0)throw new te;const V=new Uint8Array(R);for(let G=0;G<R;G++){if(p.available()<8)throw new te;V[G]=this.unrandomize255State(p.readBits(8),T++)}w.push(V);try{_.append(De.decode(V,Ae.ISO88591))}catch(G){throw new tn("Platform does not support required encoding: "+G.message)}}static unrandomize255State(p,_){const w=149*_%255+1,T=p-w;return T>=0?T:T+256}}co.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],co.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],co.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],co.TEXT_SHIFT2_SET_CHARS=co.C40_SHIFT2_SET_CHARS,co.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class md{constructor(){this.rsDecoder=new Bn(qt.DATA_MATRIX_FIELD_256)}decode(p){const _=new zc(p),w=_.getVersion(),T=_.readCodewords(),M=lo.getDataBlocks(T,w);let R=0;for(let q of M)R+=q.getNumDataCodewords();const V=new Uint8Array(R),G=M.length;for(let q=0;q<G;q++){const oe=M[q],me=oe.getCodewords(),we=oe.getNumDataCodewords();this.correctErrors(me,we);for(let Re=0;Re<we;Re++)V[Re*G+q]=me[Re]}return co.decode(V)}correctErrors(p,_){const w=new Int32Array(p);try{this.rsDecoder.decode(w,p.length-_)}catch{throw new E}for(let T=0;T<_;T++)p[T]=w[T]}}class ia{constructor(p){this.image=p,this.rectangleDetector=new va(this.image)}detect(){const p=this.rectangleDetector.detect();let _=this.detectSolid1(p);if(_=this.detectSolid2(_),_[3]=this.correctTopRight(_),!_[3])throw new Ie;_=this.shiftToModuleCenter(_);const w=_[0],T=_[1],M=_[2],R=_[3];let V=this.transitionsBetween(w,R)+1,G=this.transitionsBetween(M,R)+1;(V&1)===1&&(V+=1),(G&1)===1&&(G+=1),4*V<7*G&&4*G<7*V&&(V=G=Math.max(V,G));let q=ia.sampleGrid(this.image,w,T,M,R,V,G);return new la(q,[w,T,M,R])}static shiftPoint(p,_,w){let T=(_.getX()-p.getX())/(w+1),M=(_.getY()-p.getY())/(w+1);return new Gt(p.getX()+T,p.getY()+M)}static moveAway(p,_,w){let T=p.getX(),M=p.getY();return T<_?T-=1:T+=1,M<w?M-=1:M+=1,new Gt(T,M)}detectSolid1(p){let _=p[0],w=p[1],T=p[3],M=p[2],R=this.transitionsBetween(_,w),V=this.transitionsBetween(w,T),G=this.transitionsBetween(T,M),q=this.transitionsBetween(M,_),oe=R,me=[M,_,w,T];return oe>V&&(oe=V,me[0]=_,me[1]=w,me[2]=T,me[3]=M),oe>G&&(oe=G,me[0]=w,me[1]=T,me[2]=M,me[3]=_),oe>q&&(me[0]=T,me[1]=M,me[2]=_,me[3]=w),me}detectSolid2(p){let _=p[0],w=p[1],T=p[2],M=p[3],R=this.transitionsBetween(_,M),V=ia.shiftPoint(w,T,(R+1)*4),G=ia.shiftPoint(T,w,(R+1)*4),q=this.transitionsBetween(V,_),oe=this.transitionsBetween(G,M);return q<oe?(p[0]=_,p[1]=w,p[2]=T,p[3]=M):(p[0]=w,p[1]=T,p[2]=M,p[3]=_),p}correctTopRight(p){let _=p[0],w=p[1],T=p[2],M=p[3],R=this.transitionsBetween(_,M),V=this.transitionsBetween(w,M),G=ia.shiftPoint(_,w,(V+1)*4),q=ia.shiftPoint(T,w,(R+1)*4);R=this.transitionsBetween(G,M),V=this.transitionsBetween(q,M);let oe=new Gt(M.getX()+(T.getX()-w.getX())/(R+1),M.getY()+(T.getY()-w.getY())/(R+1)),me=new Gt(M.getX()+(_.getX()-w.getX())/(V+1),M.getY()+(_.getY()-w.getY())/(V+1));if(!this.isValid(oe))return this.isValid(me)?me:null;if(!this.isValid(me))return oe;let we=this.transitionsBetween(G,oe)+this.transitionsBetween(q,oe),Re=this.transitionsBetween(G,me)+this.transitionsBetween(q,me);return we>Re?oe:me}shiftToModuleCenter(p){let _=p[0],w=p[1],T=p[2],M=p[3],R=this.transitionsBetween(_,M)+1,V=this.transitionsBetween(T,M)+1,G=ia.shiftPoint(_,w,V*4),q=ia.shiftPoint(T,w,R*4);R=this.transitionsBetween(G,M)+1,V=this.transitionsBetween(q,M)+1,(R&1)===1&&(R+=1),(V&1)===1&&(V+=1);let oe=(_.getX()+w.getX()+T.getX()+M.getX())/4,me=(_.getY()+w.getY()+T.getY()+M.getY())/4;_=ia.moveAway(_,oe,me),w=ia.moveAway(w,oe,me),T=ia.moveAway(T,oe,me),M=ia.moveAway(M,oe,me);let we,Re;return G=ia.shiftPoint(_,w,V*4),G=ia.shiftPoint(G,M,R*4),we=ia.shiftPoint(w,_,V*4),we=ia.shiftPoint(we,T,R*4),q=ia.shiftPoint(T,M,V*4),q=ia.shiftPoint(q,w,R*4),Re=ia.shiftPoint(M,T,V*4),Re=ia.shiftPoint(Re,_,R*4),[G,we,q,Re]}isValid(p){return p.getX()>=0&&p.getX()<this.image.getWidth()&&p.getY()>0&&p.getY()<this.image.getHeight()}static sampleGrid(p,_,w,T,M,R,V){return xe.getInstance().sampleGrid(p,R,V,.5,.5,R-.5,.5,R-.5,V-.5,.5,V-.5,_.getX(),_.getY(),M.getX(),M.getY(),T.getX(),T.getY(),w.getX(),w.getY())}transitionsBetween(p,_){let w=Math.trunc(p.getX()),T=Math.trunc(p.getY()),M=Math.trunc(_.getX()),R=Math.trunc(_.getY()),V=Math.abs(R-T)>Math.abs(M-w);if(V){let Ze=w;w=T,T=Ze,Ze=M,M=R,R=Ze}let G=Math.abs(M-w),q=Math.abs(R-T),oe=-G/2,me=T<R?1:-1,we=w<M?1:-1,Re=0,Ye=this.image.get(V?T:w,V?w:T);for(let Ze=w,ct=T;Ze!==M;Ze+=we){let yt=this.image.get(V?ct:Ze,V?Ze:ct);if(yt!==Ye&&(Re++,Ye=yt),oe+=q,oe>0){if(ct===R)break;ct+=me,oe-=G}}return Re}}class ho{constructor(){this.decoder=new md}decode(p,_=null){let w,T;if(_!=null&&_.has(le.PURE_BARCODE)){const q=ho.extractPureBits(p.getBlackMatrix());w=this.decoder.decode(q),T=ho.NO_POINTS}else{const q=new ia(p.getBlackMatrix()).detect();w=this.decoder.decode(q.getBits()),T=q.getPoints()}const M=w.getRawBytes(),R=new jt(w.getText(),M,8*M.length,T,Ct.DATA_MATRIX,O.currentTimeMillis()),V=w.getByteSegments();V!=null&&R.putMetadata(Zt.BYTE_SEGMENTS,V);const G=w.getECLevel();return G!=null&&R.putMetadata(Zt.ERROR_CORRECTION_LEVEL,G),R}reset(){}static extractPureBits(p){const _=p.getTopLeftOnBit(),w=p.getBottomRightOnBit();if(_==null||w==null)throw new Ie;const T=this.moduleSize(_,p);let M=_[1];const R=w[1];let V=_[0];const q=(w[0]-V+1)/T,oe=(R-M+1)/T;if(q<=0||oe<=0)throw new Ie;const me=T/2;M+=me,V+=me;const we=new et(q,oe);for(let Re=0;Re<oe;Re++){const Ye=M+Re*T;for(let Ze=0;Ze<q;Ze++)p.get(V+Ze*T,Ye)&&we.set(Ze,Re)}return we}static moduleSize(p,_){const w=_.getWidth();let T=p[0];const M=p[1];for(;T<w&&_.get(T,M);)T++;if(T===w)throw new Ie;const R=T-p[0];if(R===0)throw new Ie;return R}}ho.NO_POINTS=[];class _d extends Ai{constructor(p=500){super(new ho,p)}}var nl;(function(ge){ge[ge.L=0]="L",ge[ge.M=1]="M",ge[ge.Q=2]="Q",ge[ge.H=3]="H"})(nl||(nl={}));class Dn{constructor(p,_,w){this.value=p,this.stringValue=_,this.bits=w,Dn.FOR_BITS.set(w,this),Dn.FOR_VALUE.set(p,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(p){switch(p){case"L":return Dn.L;case"M":return Dn.M;case"Q":return Dn.Q;case"H":return Dn.H;default:throw new x(p+"not available")}}toString(){return this.stringValue}equals(p){if(!(p instanceof Dn))return!1;const _=p;return this.value===_.value}static forBits(p){if(p<0||p>=Dn.FOR_BITS.size)throw new v;return Dn.FOR_BITS.get(p)}}Dn.FOR_BITS=new Map,Dn.FOR_VALUE=new Map,Dn.L=new Dn(nl.L,"L",1),Dn.M=new Dn(nl.M,"M",0),Dn.Q=new Dn(nl.Q,"Q",3),Dn.H=new Dn(nl.H,"H",2);class Ja{constructor(p){this.errorCorrectionLevel=Dn.forBits(p>>3&3),this.dataMask=p&7}static numBitsDiffering(p,_){return K.bitCount(p^_)}static decodeFormatInformation(p,_){const w=Ja.doDecodeFormatInformation(p,_);return w!==null?w:Ja.doDecodeFormatInformation(p^Ja.FORMAT_INFO_MASK_QR,_^Ja.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(p,_){let w=Number.MAX_SAFE_INTEGER,T=0;for(const M of Ja.FORMAT_INFO_DECODE_LOOKUP){const R=M[0];if(R===p||R===_)return new Ja(M[1]);let V=Ja.numBitsDiffering(p,R);V<w&&(T=M[1],w=V),p!==_&&(V=Ja.numBitsDiffering(_,R),V<w&&(T=M[1],w=V))}return w<=3?new Ja(T):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(p){if(!(p instanceof Ja))return!1;const _=p;return this.errorCorrectionLevel===_.errorCorrectionLevel&&this.dataMask===_.dataMask}}Ja.FORMAT_INFO_MASK_QR=21522,Ja.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ut{constructor(p,..._){this.ecCodewordsPerBlock=p,this.ecBlocks=_}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let p=0;const _=this.ecBlocks;for(const w of _)p+=w.getCount();return p}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Le{constructor(p,_){this.count=p,this.dataCodewords=_}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ki{constructor(p,_,...w){this.versionNumber=p,this.alignmentPatternCenters=_,this.ecBlocks=w;let T=0;const M=w[0].getECCodewordsPerBlock(),R=w[0].getECBlocks();for(const V of R)T+=V.getCount()*(V.getDataCodewords()+M);this.totalCodewords=T}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(p){return this.ecBlocks[p.getValue()]}static getProvisionalVersionForDimension(p){if(p%4!==1)throw new te;try{return this.getVersionForNumber((p-17)/4)}catch{throw new te}}static getVersionForNumber(p){if(p<1||p>40)throw new v;return ki.VERSIONS[p-1]}static decodeVersionInformation(p){let _=Number.MAX_SAFE_INTEGER,w=0;for(let T=0;T<ki.VERSION_DECODE_INFO.length;T++){const M=ki.VERSION_DECODE_INFO[T];if(M===p)return ki.getVersionForNumber(T+7);const R=Ja.numBitsDiffering(p,M);R<_&&(w=T+7,_=R)}return _<=3?ki.getVersionForNumber(w):null}buildFunctionPattern(){const p=this.getDimensionForVersion(),_=new et(p);_.setRegion(0,0,9,9),_.setRegion(p-8,0,8,9),_.setRegion(0,p-8,9,8);const w=this.alignmentPatternCenters.length;for(let T=0;T<w;T++){const M=this.alignmentPatternCenters[T]-2;for(let R=0;R<w;R++)T===0&&(R===0||R===w-1)||T===w-1&&R===0||_.setRegion(this.alignmentPatternCenters[R]-2,M,5,5)}return _.setRegion(6,9,1,p-17),_.setRegion(9,6,p-17,1),this.versionNumber>6&&(_.setRegion(p-11,0,3,6),_.setRegion(0,p-11,6,3)),_}toString(){return""+this.versionNumber}}ki.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ki.VERSIONS=[new ki(1,new Int32Array(0),new ut(7,new Le(1,19)),new ut(10,new Le(1,16)),new ut(13,new Le(1,13)),new ut(17,new Le(1,9))),new ki(2,Int32Array.from([6,18]),new ut(10,new Le(1,34)),new ut(16,new Le(1,28)),new ut(22,new Le(1,22)),new ut(28,new Le(1,16))),new ki(3,Int32Array.from([6,22]),new ut(15,new Le(1,55)),new ut(26,new Le(1,44)),new ut(18,new Le(2,17)),new ut(22,new Le(2,13))),new ki(4,Int32Array.from([6,26]),new ut(20,new Le(1,80)),new ut(18,new Le(2,32)),new ut(26,new Le(2,24)),new ut(16,new Le(4,9))),new ki(5,Int32Array.from([6,30]),new ut(26,new Le(1,108)),new ut(24,new Le(2,43)),new ut(18,new Le(2,15),new Le(2,16)),new ut(22,new Le(2,11),new Le(2,12))),new ki(6,Int32Array.from([6,34]),new ut(18,new Le(2,68)),new ut(16,new Le(4,27)),new ut(24,new Le(4,19)),new ut(28,new Le(4,15))),new ki(7,Int32Array.from([6,22,38]),new ut(20,new Le(2,78)),new ut(18,new Le(4,31)),new ut(18,new Le(2,14),new Le(4,15)),new ut(26,new Le(4,13),new Le(1,14))),new ki(8,Int32Array.from([6,24,42]),new ut(24,new Le(2,97)),new ut(22,new Le(2,38),new Le(2,39)),new ut(22,new Le(4,18),new Le(2,19)),new ut(26,new Le(4,14),new Le(2,15))),new ki(9,Int32Array.from([6,26,46]),new ut(30,new Le(2,116)),new ut(22,new Le(3,36),new Le(2,37)),new ut(20,new Le(4,16),new Le(4,17)),new ut(24,new Le(4,12),new Le(4,13))),new ki(10,Int32Array.from([6,28,50]),new ut(18,new Le(2,68),new Le(2,69)),new ut(26,new Le(4,43),new Le(1,44)),new ut(24,new Le(6,19),new Le(2,20)),new ut(28,new Le(6,15),new Le(2,16))),new ki(11,Int32Array.from([6,30,54]),new ut(20,new Le(4,81)),new ut(30,new Le(1,50),new Le(4,51)),new ut(28,new Le(4,22),new Le(4,23)),new ut(24,new Le(3,12),new Le(8,13))),new ki(12,Int32Array.from([6,32,58]),new ut(24,new Le(2,92),new Le(2,93)),new ut(22,new Le(6,36),new Le(2,37)),new ut(26,new Le(4,20),new Le(6,21)),new ut(28,new Le(7,14),new Le(4,15))),new ki(13,Int32Array.from([6,34,62]),new ut(26,new Le(4,107)),new ut(22,new Le(8,37),new Le(1,38)),new ut(24,new Le(8,20),new Le(4,21)),new ut(22,new Le(12,11),new Le(4,12))),new ki(14,Int32Array.from([6,26,46,66]),new ut(30,new Le(3,115),new Le(1,116)),new ut(24,new Le(4,40),new Le(5,41)),new ut(20,new Le(11,16),new Le(5,17)),new ut(24,new Le(11,12),new Le(5,13))),new ki(15,Int32Array.from([6,26,48,70]),new ut(22,new Le(5,87),new Le(1,88)),new ut(24,new Le(5,41),new Le(5,42)),new ut(30,new Le(5,24),new Le(7,25)),new ut(24,new Le(11,12),new Le(7,13))),new ki(16,Int32Array.from([6,26,50,74]),new ut(24,new Le(5,98),new Le(1,99)),new ut(28,new Le(7,45),new Le(3,46)),new ut(24,new Le(15,19),new Le(2,20)),new ut(30,new Le(3,15),new Le(13,16))),new ki(17,Int32Array.from([6,30,54,78]),new ut(28,new Le(1,107),new Le(5,108)),new ut(28,new Le(10,46),new Le(1,47)),new ut(28,new Le(1,22),new Le(15,23)),new ut(28,new Le(2,14),new Le(17,15))),new ki(18,Int32Array.from([6,30,56,82]),new ut(30,new Le(5,120),new Le(1,121)),new ut(26,new Le(9,43),new Le(4,44)),new ut(28,new Le(17,22),new Le(1,23)),new ut(28,new Le(2,14),new Le(19,15))),new ki(19,Int32Array.from([6,30,58,86]),new ut(28,new Le(3,113),new Le(4,114)),new ut(26,new Le(3,44),new Le(11,45)),new ut(26,new Le(17,21),new Le(4,22)),new ut(26,new Le(9,13),new Le(16,14))),new ki(20,Int32Array.from([6,34,62,90]),new ut(28,new Le(3,107),new Le(5,108)),new ut(26,new Le(3,41),new Le(13,42)),new ut(30,new Le(15,24),new Le(5,25)),new ut(28,new Le(15,15),new Le(10,16))),new ki(21,Int32Array.from([6,28,50,72,94]),new ut(28,new Le(4,116),new Le(4,117)),new ut(26,new Le(17,42)),new ut(28,new Le(17,22),new Le(6,23)),new ut(30,new Le(19,16),new Le(6,17))),new ki(22,Int32Array.from([6,26,50,74,98]),new ut(28,new Le(2,111),new Le(7,112)),new ut(28,new Le(17,46)),new ut(30,new Le(7,24),new Le(16,25)),new ut(24,new Le(34,13))),new ki(23,Int32Array.from([6,30,54,78,102]),new ut(30,new Le(4,121),new Le(5,122)),new ut(28,new Le(4,47),new Le(14,48)),new ut(30,new Le(11,24),new Le(14,25)),new ut(30,new Le(16,15),new Le(14,16))),new ki(24,Int32Array.from([6,28,54,80,106]),new ut(30,new Le(6,117),new Le(4,118)),new ut(28,new Le(6,45),new Le(14,46)),new ut(30,new Le(11,24),new Le(16,25)),new ut(30,new Le(30,16),new Le(2,17))),new ki(25,Int32Array.from([6,32,58,84,110]),new ut(26,new Le(8,106),new Le(4,107)),new ut(28,new Le(8,47),new Le(13,48)),new ut(30,new Le(7,24),new Le(22,25)),new ut(30,new Le(22,15),new Le(13,16))),new ki(26,Int32Array.from([6,30,58,86,114]),new ut(28,new Le(10,114),new Le(2,115)),new ut(28,new Le(19,46),new Le(4,47)),new ut(28,new Le(28,22),new Le(6,23)),new ut(30,new Le(33,16),new Le(4,17))),new ki(27,Int32Array.from([6,34,62,90,118]),new ut(30,new Le(8,122),new Le(4,123)),new ut(28,new Le(22,45),new Le(3,46)),new ut(30,new Le(8,23),new Le(26,24)),new ut(30,new Le(12,15),new Le(28,16))),new ki(28,Int32Array.from([6,26,50,74,98,122]),new ut(30,new Le(3,117),new Le(10,118)),new ut(28,new Le(3,45),new Le(23,46)),new ut(30,new Le(4,24),new Le(31,25)),new ut(30,new Le(11,15),new Le(31,16))),new ki(29,Int32Array.from([6,30,54,78,102,126]),new ut(30,new Le(7,116),new Le(7,117)),new ut(28,new Le(21,45),new Le(7,46)),new ut(30,new Le(1,23),new Le(37,24)),new ut(30,new Le(19,15),new Le(26,16))),new ki(30,Int32Array.from([6,26,52,78,104,130]),new ut(30,new Le(5,115),new Le(10,116)),new ut(28,new Le(19,47),new Le(10,48)),new ut(30,new Le(15,24),new Le(25,25)),new ut(30,new Le(23,15),new Le(25,16))),new ki(31,Int32Array.from([6,30,56,82,108,134]),new ut(30,new Le(13,115),new Le(3,116)),new ut(28,new Le(2,46),new Le(29,47)),new ut(30,new Le(42,24),new Le(1,25)),new ut(30,new Le(23,15),new Le(28,16))),new ki(32,Int32Array.from([6,34,60,86,112,138]),new ut(30,new Le(17,115)),new ut(28,new Le(10,46),new Le(23,47)),new ut(30,new Le(10,24),new Le(35,25)),new ut(30,new Le(19,15),new Le(35,16))),new ki(33,Int32Array.from([6,30,58,86,114,142]),new ut(30,new Le(17,115),new Le(1,116)),new ut(28,new Le(14,46),new Le(21,47)),new ut(30,new Le(29,24),new Le(19,25)),new ut(30,new Le(11,15),new Le(46,16))),new ki(34,Int32Array.from([6,34,62,90,118,146]),new ut(30,new Le(13,115),new Le(6,116)),new ut(28,new Le(14,46),new Le(23,47)),new ut(30,new Le(44,24),new Le(7,25)),new ut(30,new Le(59,16),new Le(1,17))),new ki(35,Int32Array.from([6,30,54,78,102,126,150]),new ut(30,new Le(12,121),new Le(7,122)),new ut(28,new Le(12,47),new Le(26,48)),new ut(30,new Le(39,24),new Le(14,25)),new ut(30,new Le(22,15),new Le(41,16))),new ki(36,Int32Array.from([6,24,50,76,102,128,154]),new ut(30,new Le(6,121),new Le(14,122)),new ut(28,new Le(6,47),new Le(34,48)),new ut(30,new Le(46,24),new Le(10,25)),new ut(30,new Le(2,15),new Le(64,16))),new ki(37,Int32Array.from([6,28,54,80,106,132,158]),new ut(30,new Le(17,122),new Le(4,123)),new ut(28,new Le(29,46),new Le(14,47)),new ut(30,new Le(49,24),new Le(10,25)),new ut(30,new Le(24,15),new Le(46,16))),new ki(38,Int32Array.from([6,32,58,84,110,136,162]),new ut(30,new Le(4,122),new Le(18,123)),new ut(28,new Le(13,46),new Le(32,47)),new ut(30,new Le(48,24),new Le(14,25)),new ut(30,new Le(42,15),new Le(32,16))),new ki(39,Int32Array.from([6,26,54,82,110,138,166]),new ut(30,new Le(20,117),new Le(4,118)),new ut(28,new Le(40,47),new Le(7,48)),new ut(30,new Le(43,24),new Le(22,25)),new ut(30,new Le(10,15),new Le(67,16))),new ki(40,Int32Array.from([6,30,58,86,114,142,170]),new ut(30,new Le(19,118),new Le(6,119)),new ut(28,new Le(18,47),new Le(31,48)),new ut(30,new Le(34,24),new Le(34,25)),new ut(30,new Le(20,15),new Le(61,16)))];var er;(function(ge){ge[ge.DATA_MASK_000=0]="DATA_MASK_000",ge[ge.DATA_MASK_001=1]="DATA_MASK_001",ge[ge.DATA_MASK_010=2]="DATA_MASK_010",ge[ge.DATA_MASK_011=3]="DATA_MASK_011",ge[ge.DATA_MASK_100=4]="DATA_MASK_100",ge[ge.DATA_MASK_101=5]="DATA_MASK_101",ge[ge.DATA_MASK_110=6]="DATA_MASK_110",ge[ge.DATA_MASK_111=7]="DATA_MASK_111"})(er||(er={}));class br{constructor(p,_){this.value=p,this.isMasked=_}unmaskBitMatrix(p,_){for(let w=0;w<_;w++)for(let T=0;T<_;T++)this.isMasked(w,T)&&p.flip(T,w)}}br.values=new Map([[er.DATA_MASK_000,new br(er.DATA_MASK_000,(ge,p)=>(ge+p&1)===0)],[er.DATA_MASK_001,new br(er.DATA_MASK_001,(ge,p)=>(ge&1)===0)],[er.DATA_MASK_010,new br(er.DATA_MASK_010,(ge,p)=>p%3===0)],[er.DATA_MASK_011,new br(er.DATA_MASK_011,(ge,p)=>(ge+p)%3===0)],[er.DATA_MASK_100,new br(er.DATA_MASK_100,(ge,p)=>(Math.floor(ge/2)+Math.floor(p/3)&1)===0)],[er.DATA_MASK_101,new br(er.DATA_MASK_101,(ge,p)=>ge*p%6===0)],[er.DATA_MASK_110,new br(er.DATA_MASK_110,(ge,p)=>ge*p%6<3)],[er.DATA_MASK_111,new br(er.DATA_MASK_111,(ge,p)=>(ge+p+ge*p%3&1)===0)]]);class Fc{constructor(p){const _=p.getHeight();if(_<21||(_&3)!==1)throw new te;this.bitMatrix=p}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let p=0;for(let M=0;M<6;M++)p=this.copyBit(M,8,p);p=this.copyBit(7,8,p),p=this.copyBit(8,8,p),p=this.copyBit(8,7,p);for(let M=5;M>=0;M--)p=this.copyBit(8,M,p);const _=this.bitMatrix.getHeight();let w=0;const T=_-7;for(let M=_-1;M>=T;M--)w=this.copyBit(8,M,w);for(let M=_-8;M<_;M++)w=this.copyBit(M,8,w);if(this.parsedFormatInfo=Ja.decodeFormatInformation(p,w),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new te}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const p=this.bitMatrix.getHeight(),_=Math.floor((p-17)/4);if(_<=6)return ki.getVersionForNumber(_);let w=0;const T=p-11;for(let R=5;R>=0;R--)for(let V=p-9;V>=T;V--)w=this.copyBit(V,R,w);let M=ki.decodeVersionInformation(w);if(M!==null&&M.getDimensionForVersion()===p)return this.parsedVersion=M,M;w=0;for(let R=5;R>=0;R--)for(let V=p-9;V>=T;V--)w=this.copyBit(R,V,w);if(M=ki.decodeVersionInformation(w),M!==null&&M.getDimensionForVersion()===p)return this.parsedVersion=M,M;throw new te}copyBit(p,_,w){return(this.isMirror?this.bitMatrix.get(_,p):this.bitMatrix.get(p,_))?w<<1|1:w<<1}readCodewords(){const p=this.readFormatInformation(),_=this.readVersion(),w=br.values.get(p.getDataMask()),T=this.bitMatrix.getHeight();w.unmaskBitMatrix(this.bitMatrix,T);const M=_.buildFunctionPattern();let R=!0;const V=new Uint8Array(_.getTotalCodewords());let G=0,q=0,oe=0;for(let me=T-1;me>0;me-=2){me===6&&me--;for(let we=0;we<T;we++){const Re=R?T-1-we:we;for(let Ye=0;Ye<2;Ye++)M.get(me-Ye,Re)||(oe++,q<<=1,this.bitMatrix.get(me-Ye,Re)&&(q|=1),oe===8&&(V[G++]=q,oe=0,q=0))}R=!R}if(G!==_.getTotalCodewords())throw new te;return V}remask(){if(this.parsedFormatInfo===null)return;const p=br.values[this.parsedFormatInfo.getDataMask()],_=this.bitMatrix.getHeight();p.unmaskBitMatrix(this.bitMatrix,_)}setMirror(p){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=p}mirror(){const p=this.bitMatrix;for(let _=0,w=p.getWidth();_<w;_++)for(let T=_+1,M=p.getHeight();T<M;T++)p.get(_,T)!==p.get(T,_)&&(p.flip(T,_),p.flip(_,T))}}class Bc{constructor(p,_){this.numDataCodewords=p,this.codewords=_}static getDataBlocks(p,_,w){if(p.length!==_.getTotalCodewords())throw new v;const T=_.getECBlocksForLevel(w);let M=0;const R=T.getECBlocks();for(const Ye of R)M+=Ye.getCount();const V=new Array(M);let G=0;for(const Ye of R)for(let Ze=0;Ze<Ye.getCount();Ze++){const ct=Ye.getDataCodewords(),yt=T.getECCodewordsPerBlock()+ct;V[G++]=new Bc(ct,new Uint8Array(yt))}const q=V[0].codewords.length;let oe=V.length-1;for(;oe>=0&&V[oe].codewords.length!==q;)oe--;oe++;const me=q-T.getECCodewordsPerBlock();let we=0;for(let Ye=0;Ye<me;Ye++)for(let Ze=0;Ze<G;Ze++)V[Ze].codewords[Ye]=p[we++];for(let Ye=oe;Ye<G;Ye++)V[Ye].codewords[me]=p[we++];const Re=V[0].codewords.length;for(let Ye=me;Ye<Re;Ye++)for(let Ze=0;Ze<G;Ze++){const ct=Ze<oe?Ye:Ye+1;V[Ze].codewords[ct]=p[we++]}return V}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var cr;(function(ge){ge[ge.TERMINATOR=0]="TERMINATOR",ge[ge.NUMERIC=1]="NUMERIC",ge[ge.ALPHANUMERIC=2]="ALPHANUMERIC",ge[ge.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ge[ge.BYTE=4]="BYTE",ge[ge.ECI=5]="ECI",ge[ge.KANJI=6]="KANJI",ge[ge.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ge[ge.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ge[ge.HANZI=9]="HANZI"})(cr||(cr={}));class Ei{constructor(p,_,w,T){this.value=p,this.stringValue=_,this.characterCountBitsForVersions=w,this.bits=T,Ei.FOR_BITS.set(T,this),Ei.FOR_VALUE.set(p,this)}static forBits(p){const _=Ei.FOR_BITS.get(p);if(_===void 0)throw new v;return _}getCharacterCountBits(p){const _=p.getVersionNumber();let w;return _<=9?w=0:_<=26?w=1:w=2,this.characterCountBitsForVersions[w]}getValue(){return this.value}getBits(){return this.bits}equals(p){if(!(p instanceof Ei))return!1;const _=p;return this.value===_.value}toString(){return this.stringValue}}Ei.FOR_BITS=new Map,Ei.FOR_VALUE=new Map,Ei.TERMINATOR=new Ei(cr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ei.NUMERIC=new Ei(cr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ei.ALPHANUMERIC=new Ei(cr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ei.STRUCTURED_APPEND=new Ei(cr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ei.BYTE=new Ei(cr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ei.ECI=new Ei(cr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ei.KANJI=new Ei(cr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ei.FNC1_FIRST_POSITION=new Ei(cr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ei.FNC1_SECOND_POSITION=new Ei(cr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ei.HANZI=new Ei(cr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Un{static decode(p,_,w,T){const M=new Sl(p);let R=new $e;const V=new Array;let G=-1,q=-1;try{let oe=null,me=!1,we;do{if(M.available()<4)we=Ei.TERMINATOR;else{const Re=M.readBits(4);we=Ei.forBits(Re)}switch(we){case Ei.TERMINATOR:break;case Ei.FNC1_FIRST_POSITION:case Ei.FNC1_SECOND_POSITION:me=!0;break;case Ei.STRUCTURED_APPEND:if(M.available()<16)throw new te;G=M.readBits(8),q=M.readBits(8);break;case Ei.ECI:const Re=Un.parseECIValue(M);if(oe=de.getCharacterSetECIByValue(Re),oe===null)throw new te;break;case Ei.HANZI:const Ye=M.readBits(4),Ze=M.readBits(we.getCharacterCountBits(_));Ye===Un.GB2312_SUBSET&&Un.decodeHanziSegment(M,R,Ze);break;default:const ct=M.readBits(we.getCharacterCountBits(_));switch(we){case Ei.NUMERIC:Un.decodeNumericSegment(M,R,ct);break;case Ei.ALPHANUMERIC:Un.decodeAlphanumericSegment(M,R,ct,me);break;case Ei.BYTE:Un.decodeByteSegment(M,R,ct,oe,V,T);break;case Ei.KANJI:Un.decodeKanjiSegment(M,R,ct);break;default:throw new te}break}}while(we!==Ei.TERMINATOR)}catch{throw new te}return new Pi(p,R.toString(),V.length===0?null:V,w===null?null:w.toString(),G,q)}static decodeHanziSegment(p,_,w){if(w*13>p.available())throw new te;const T=new Uint8Array(2*w);let M=0;for(;w>0;){const R=p.readBits(13);let V=R/96<<8&4294967295|R%96;V<959?V+=41377:V+=42657,T[M]=V>>8&255,T[M+1]=V&255,M+=2,w--}try{_.append(De.decode(T,Ae.GB2312))}catch(R){throw new te(R)}}static decodeKanjiSegment(p,_,w){if(w*13>p.available())throw new te;const T=new Uint8Array(2*w);let M=0;for(;w>0;){const R=p.readBits(13);let V=R/192<<8&4294967295|R%192;V<7936?V+=33088:V+=49472,T[M]=V>>8,T[M+1]=V,M+=2,w--}try{_.append(De.decode(T,Ae.SHIFT_JIS))}catch(R){throw new te(R)}}static decodeByteSegment(p,_,w,T,M,R){if(8*w>p.available())throw new te;const V=new Uint8Array(w);for(let q=0;q<w;q++)V[q]=p.readBits(8);let G;T===null?G=Ae.guessEncoding(V,R):G=T.getName();try{_.append(De.decode(V,G))}catch(q){throw new te(q)}M.push(V)}static toAlphaNumericChar(p){if(p>=Un.ALPHANUMERIC_CHARS.length)throw new te;return Un.ALPHANUMERIC_CHARS[p]}static decodeAlphanumericSegment(p,_,w,T){const M=_.length();for(;w>1;){if(p.available()<11)throw new te;const R=p.readBits(11);_.append(Un.toAlphaNumericChar(Math.floor(R/45))),_.append(Un.toAlphaNumericChar(R%45)),w-=2}if(w===1){if(p.available()<6)throw new te;_.append(Un.toAlphaNumericChar(p.readBits(6)))}if(T)for(let R=M;R<_.length();R++)_.charAt(R)==="%"&&(R<_.length()-1&&_.charAt(R+1)==="%"?_.deleteCharAt(R+1):_.setCharAt(R,""))}static decodeNumericSegment(p,_,w){for(;w>=3;){if(p.available()<10)throw new te;const T=p.readBits(10);if(T>=1e3)throw new te;_.append(Un.toAlphaNumericChar(Math.floor(T/100))),_.append(Un.toAlphaNumericChar(Math.floor(T/10)%10)),_.append(Un.toAlphaNumericChar(T%10)),w-=3}if(w===2){if(p.available()<7)throw new te;const T=p.readBits(7);if(T>=100)throw new te;_.append(Un.toAlphaNumericChar(Math.floor(T/10))),_.append(Un.toAlphaNumericChar(T%10))}else if(w===1){if(p.available()<4)throw new te;const T=p.readBits(4);if(T>=10)throw new te;_.append(Un.toAlphaNumericChar(T))}}static parseECIValue(p){const _=p.readBits(8);if((_&128)===0)return _&127;if((_&192)===128){const w=p.readBits(8);return(_&63)<<8&4294967295|w}if((_&224)===192){const w=p.readBits(16);return(_&31)<<16&4294967295|w}throw new te}}Un.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Un.GB2312_SUBSET=1;class uo{constructor(p){this.mirrored=p}isMirrored(){return this.mirrored}applyMirroredCorrection(p){if(!this.mirrored||p===null||p.length<3)return;const _=p[0];p[0]=p[2],p[2]=_}}class kl{constructor(){this.rsDecoder=new Bn(qt.QR_CODE_FIELD_256)}decodeBooleanArray(p,_){return this.decodeBitMatrix(et.parseFromBooleanArray(p),_)}decodeBitMatrix(p,_){const w=new Fc(p);let T=null;try{return this.decodeBitMatrixParser(w,_)}catch(M){T=M}try{w.remask(),w.setMirror(!0),w.readVersion(),w.readFormatInformation(),w.mirror();const M=this.decodeBitMatrixParser(w,_);return M.setOther(new uo(!0)),M}catch(M){throw T!==null?T:M}}decodeBitMatrixParser(p,_){const w=p.readVersion(),T=p.readFormatInformation().getErrorCorrectionLevel(),M=p.readCodewords(),R=Bc.getDataBlocks(M,w,T);let V=0;for(const oe of R)V+=oe.getNumDataCodewords();const G=new Uint8Array(V);let q=0;for(const oe of R){const me=oe.getCodewords(),we=oe.getNumDataCodewords();this.correctErrors(me,we);for(let Re=0;Re<we;Re++)G[q++]=me[Re]}return Un.decode(G,w,T,_)}correctErrors(p,_){const w=new Int32Array(p);try{this.rsDecoder.decode(w,p.length-_)}catch{throw new E}for(let T=0;T<_;T++)p[T]=w[T]}}class Ui extends Gt{constructor(p,_,w){super(p,_),this.estimatedModuleSize=w}aboutEquals(p,_,w){if(Math.abs(_-this.getY())<=p&&Math.abs(w-this.getX())<=p){const T=Math.abs(p-this.estimatedModuleSize);return T<=1||T<=this.estimatedModuleSize}return!1}combineEstimate(p,_,w){const T=(this.getX()+_)/2,M=(this.getY()+p)/2,R=(this.estimatedModuleSize+w)/2;return new Ui(T,M,R)}}class Cl{constructor(p,_,w,T,M,R,V){this.image=p,this.startX=_,this.startY=w,this.width=T,this.height=M,this.moduleSize=R,this.resultPointCallback=V,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const p=this.startX,_=this.height,w=this.width,T=p+w,M=this.startY+_/2,R=new Int32Array(3),V=this.image;for(let G=0;G<_;G++){const q=M+((G&1)===0?Math.floor((G+1)/2):-Math.floor((G+1)/2));R[0]=0,R[1]=0,R[2]=0;let oe=p;for(;oe<T&&!V.get(oe,q);)oe++;let me=0;for(;oe<T;){if(V.get(oe,q))if(me===1)R[1]++;else if(me===2){if(this.foundPatternCross(R)){const we=this.handlePossibleCenter(R,q,oe);if(we!==null)return we}R[0]=R[2],R[1]=1,R[2]=0,me=1}else R[++me]++;else me===1&&me++,R[me]++;oe++}if(this.foundPatternCross(R)){const we=this.handlePossibleCenter(R,q,T);if(we!==null)return we}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Ie}static centerFromEnd(p,_){return _-p[2]-p[1]/2}foundPatternCross(p){const _=this.moduleSize,w=_/2;for(let T=0;T<3;T++)if(Math.abs(_-p[T])>=w)return!1;return!0}crossCheckVertical(p,_,w,T){const M=this.image,R=M.getHeight(),V=this.crossCheckStateCount;V[0]=0,V[1]=0,V[2]=0;let G=p;for(;G>=0&&M.get(_,G)&&V[1]<=w;)V[1]++,G--;if(G<0||V[1]>w)return NaN;for(;G>=0&&!M.get(_,G)&&V[0]<=w;)V[0]++,G--;if(V[0]>w)return NaN;for(G=p+1;G<R&&M.get(_,G)&&V[1]<=w;)V[1]++,G++;if(G===R||V[1]>w)return NaN;for(;G<R&&!M.get(_,G)&&V[2]<=w;)V[2]++,G++;if(V[2]>w)return NaN;const q=V[0]+V[1]+V[2];return 5*Math.abs(q-T)>=2*T?NaN:this.foundPatternCross(V)?Cl.centerFromEnd(V,G):NaN}handlePossibleCenter(p,_,w){const T=p[0]+p[1]+p[2],M=Cl.centerFromEnd(p,w),R=this.crossCheckVertical(_,M,2*p[1],T);if(!isNaN(R)){const V=(p[0]+p[1]+p[2])/3;for(const q of this.possibleCenters)if(q.aboutEquals(V,R,M))return q.combineEstimate(R,M,V);const G=new Ui(M,R,V);this.possibleCenters.push(G),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(G)}return null}}class zh extends Gt{constructor(p,_,w,T){super(p,_),this.estimatedModuleSize=w,this.count=T,T===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(p,_,w){if(Math.abs(_-this.getY())<=p&&Math.abs(w-this.getX())<=p){const T=Math.abs(p-this.estimatedModuleSize);return T<=1||T<=this.estimatedModuleSize}return!1}combineEstimate(p,_,w){const T=this.count+1,M=(this.count*this.getX()+_)/T,R=(this.count*this.getY()+p)/T,V=(this.count*this.estimatedModuleSize+w)/T;return new zh(M,R,V,T)}}class Fh{constructor(p){this.bottomLeft=p[0],this.topLeft=p[1],this.topRight=p[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class kn{constructor(p,_){this.image=p,this.resultPointCallback=_,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=_}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(p){const _=p!=null&&p.get(le.TRY_HARDER)!==void 0,w=p!=null&&p.get(le.PURE_BARCODE)!==void 0,T=this.image,M=T.getHeight(),R=T.getWidth();let V=Math.floor(3*M/(4*kn.MAX_MODULES));(V<kn.MIN_SKIP||_)&&(V=kn.MIN_SKIP);let G=!1;const q=new Int32Array(5);for(let me=V-1;me<M&&!G;me+=V){q[0]=0,q[1]=0,q[2]=0,q[3]=0,q[4]=0;let we=0;for(let Re=0;Re<R;Re++)if(T.get(Re,me))(we&1)===1&&we++,q[we]++;else if((we&1)===0)if(we===4)if(kn.foundPatternCross(q)){if(this.handlePossibleCenter(q,me,Re,w)===!0)if(V=2,this.hasSkipped===!0)G=this.haveMultiplyConfirmedCenters();else{const Ze=this.findRowSkip();Ze>q[2]&&(me+=Ze-q[2]-V,Re=R-1)}else{q[0]=q[2],q[1]=q[3],q[2]=q[4],q[3]=1,q[4]=0,we=3;continue}we=0,q[0]=0,q[1]=0,q[2]=0,q[3]=0,q[4]=0}else q[0]=q[2],q[1]=q[3],q[2]=q[4],q[3]=1,q[4]=0,we=3;else q[++we]++;else q[we]++;kn.foundPatternCross(q)&&this.handlePossibleCenter(q,me,R,w)===!0&&(V=q[0],this.hasSkipped&&(G=this.haveMultiplyConfirmedCenters()))}const oe=this.selectBestPatterns();return Gt.orderBestPatterns(oe),new Fh(oe)}static centerFromEnd(p,_){return _-p[4]-p[3]-p[2]/2}static foundPatternCross(p){let _=0;for(let M=0;M<5;M++){const R=p[M];if(R===0)return!1;_+=R}if(_<7)return!1;const w=_/7,T=w/2;return Math.abs(w-p[0])<T&&Math.abs(w-p[1])<T&&Math.abs(3*w-p[2])<3*T&&Math.abs(w-p[3])<T&&Math.abs(w-p[4])<T}getCrossCheckStateCount(){const p=this.crossCheckStateCount;return p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p}crossCheckDiagonal(p,_,w,T){const M=this.getCrossCheckStateCount();let R=0;const V=this.image;for(;p>=R&&_>=R&&V.get(_-R,p-R);)M[2]++,R++;if(p<R||_<R)return!1;for(;p>=R&&_>=R&&!V.get(_-R,p-R)&&M[1]<=w;)M[1]++,R++;if(p<R||_<R||M[1]>w)return!1;for(;p>=R&&_>=R&&V.get(_-R,p-R)&&M[0]<=w;)M[0]++,R++;if(M[0]>w)return!1;const G=V.getHeight(),q=V.getWidth();for(R=1;p+R<G&&_+R<q&&V.get(_+R,p+R);)M[2]++,R++;if(p+R>=G||_+R>=q)return!1;for(;p+R<G&&_+R<q&&!V.get(_+R,p+R)&&M[3]<w;)M[3]++,R++;if(p+R>=G||_+R>=q||M[3]>=w)return!1;for(;p+R<G&&_+R<q&&V.get(_+R,p+R)&&M[4]<w;)M[4]++,R++;if(M[4]>=w)return!1;const oe=M[0]+M[1]+M[2]+M[3]+M[4];return Math.abs(oe-T)<2*T&&kn.foundPatternCross(M)}crossCheckVertical(p,_,w,T){const M=this.image,R=M.getHeight(),V=this.getCrossCheckStateCount();let G=p;for(;G>=0&&M.get(_,G);)V[2]++,G--;if(G<0)return NaN;for(;G>=0&&!M.get(_,G)&&V[1]<=w;)V[1]++,G--;if(G<0||V[1]>w)return NaN;for(;G>=0&&M.get(_,G)&&V[0]<=w;)V[0]++,G--;if(V[0]>w)return NaN;for(G=p+1;G<R&&M.get(_,G);)V[2]++,G++;if(G===R)return NaN;for(;G<R&&!M.get(_,G)&&V[3]<w;)V[3]++,G++;if(G===R||V[3]>=w)return NaN;for(;G<R&&M.get(_,G)&&V[4]<w;)V[4]++,G++;if(V[4]>=w)return NaN;const q=V[0]+V[1]+V[2]+V[3]+V[4];return 5*Math.abs(q-T)>=2*T?NaN:kn.foundPatternCross(V)?kn.centerFromEnd(V,G):NaN}crossCheckHorizontal(p,_,w,T){const M=this.image,R=M.getWidth(),V=this.getCrossCheckStateCount();let G=p;for(;G>=0&&M.get(G,_);)V[2]++,G--;if(G<0)return NaN;for(;G>=0&&!M.get(G,_)&&V[1]<=w;)V[1]++,G--;if(G<0||V[1]>w)return NaN;for(;G>=0&&M.get(G,_)&&V[0]<=w;)V[0]++,G--;if(V[0]>w)return NaN;for(G=p+1;G<R&&M.get(G,_);)V[2]++,G++;if(G===R)return NaN;for(;G<R&&!M.get(G,_)&&V[3]<w;)V[3]++,G++;if(G===R||V[3]>=w)return NaN;for(;G<R&&M.get(G,_)&&V[4]<w;)V[4]++,G++;if(V[4]>=w)return NaN;const q=V[0]+V[1]+V[2]+V[3]+V[4];return 5*Math.abs(q-T)>=T?NaN:kn.foundPatternCross(V)?kn.centerFromEnd(V,G):NaN}handlePossibleCenter(p,_,w,T){const M=p[0]+p[1]+p[2]+p[3]+p[4];let R=kn.centerFromEnd(p,w),V=this.crossCheckVertical(_,Math.floor(R),p[2],M);if(!isNaN(V)&&(R=this.crossCheckHorizontal(Math.floor(R),Math.floor(V),p[2],M),!isNaN(R)&&(!T||this.crossCheckDiagonal(Math.floor(V),Math.floor(R),p[2],M)))){const G=M/7;let q=!1;const oe=this.possibleCenters;for(let me=0,we=oe.length;me<we;me++){const Re=oe[me];if(Re.aboutEquals(G,V,R)){oe[me]=Re.combineEstimate(V,R,G),q=!0;break}}if(!q){const me=new zh(R,V,G);oe.push(me),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(me)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let _=null;for(const w of this.possibleCenters)if(w.getCount()>=kn.CENTER_QUORUM)if(_==null)_=w;else return this.hasSkipped=!0,Math.floor((Math.abs(_.getX()-w.getX())-Math.abs(_.getY()-w.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let p=0,_=0;const w=this.possibleCenters.length;for(const R of this.possibleCenters)R.getCount()>=kn.CENTER_QUORUM&&(p++,_+=R.getEstimatedModuleSize());if(p<3)return!1;const T=_/w;let M=0;for(const R of this.possibleCenters)M+=Math.abs(R.getEstimatedModuleSize()-T);return M<=.05*_}selectBestPatterns(){const p=this.possibleCenters.length;if(p<3)throw new Ie;const _=this.possibleCenters;let w;if(p>3){let T=0,M=0;for(const G of this.possibleCenters){const q=G.getEstimatedModuleSize();T+=q,M+=q*q}w=T/p;let R=Math.sqrt(M/p-w*w);_.sort((G,q)=>{const oe=Math.abs(q.getEstimatedModuleSize()-w),me=Math.abs(G.getEstimatedModuleSize()-w);return oe<me?-1:oe>me?1:0});const V=Math.max(.2*w,R);for(let G=0;G<_.length&&_.length>3;G++){const q=_[G];Math.abs(q.getEstimatedModuleSize()-w)>V&&(_.splice(G,1),G--)}}if(_.length>3){let T=0;for(const M of _)T+=M.getEstimatedModuleSize();w=T/_.length,_.sort((M,R)=>{if(R.getCount()===M.getCount()){const V=Math.abs(R.getEstimatedModuleSize()-w),G=Math.abs(M.getEstimatedModuleSize()-w);return V<G?1:V>G?-1:0}else return R.getCount()-M.getCount()}),_.splice(3)}return[_[0],_[1],_[2]]}}kn.CENTER_QUORUM=2,kn.MIN_SKIP=3,kn.MAX_MODULES=57;class za{constructor(p){this.image=p}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(p){this.resultPointCallback=p==null?null:p.get(le.NEED_RESULT_POINT_CALLBACK);const w=new kn(this.image,this.resultPointCallback).find(p);return this.processFinderPatternInfo(w)}processFinderPatternInfo(p){const _=p.getTopLeft(),w=p.getTopRight(),T=p.getBottomLeft(),M=this.calculateModuleSize(_,w,T);if(M<1)throw new Ie("No pattern found in proccess finder.");const R=za.computeDimension(_,w,T,M),V=ki.getProvisionalVersionForDimension(R),G=V.getDimensionForVersion()-7;let q=null;if(V.getAlignmentPatternCenters().length>0){const Re=w.getX()-_.getX()+T.getX(),Ye=w.getY()-_.getY()+T.getY(),Ze=1-3/G,ct=Math.floor(_.getX()+Ze*(Re-_.getX())),yt=Math.floor(_.getY()+Ze*(Ye-_.getY()));for(let Ht=4;Ht<=16;Ht<<=1)try{q=this.findAlignmentInRegion(M,ct,yt,Ht);break}catch(Wt){if(!(Wt instanceof Ie))throw Wt}}const oe=za.createTransform(_,w,T,q,R),me=za.sampleGrid(this.image,oe,R);let we;return q===null?we=[T,_,w]:we=[T,_,w,q],new la(me,we)}static createTransform(p,_,w,T,M){const R=M-3.5;let V,G,q,oe;return T!==null?(V=T.getX(),G=T.getY(),q=R-3,oe=q):(V=_.getX()-p.getX()+w.getX(),G=_.getY()-p.getY()+w.getY(),q=R,oe=R),tt.quadrilateralToQuadrilateral(3.5,3.5,R,3.5,q,oe,3.5,R,p.getX(),p.getY(),_.getX(),_.getY(),V,G,w.getX(),w.getY())}static sampleGrid(p,_,w){return xe.getInstance().sampleGridWithTransform(p,w,w,_)}static computeDimension(p,_,w,T){const M=Bi.round(Gt.distance(p,_)/T),R=Bi.round(Gt.distance(p,w)/T);let V=Math.floor((M+R)/2)+7;switch(V&3){case 0:V++;break;case 2:V--;break;case 3:throw new Ie("Dimensions could be not found.")}return V}calculateModuleSize(p,_,w){return(this.calculateModuleSizeOneWay(p,_)+this.calculateModuleSizeOneWay(p,w))/2}calculateModuleSizeOneWay(p,_){const w=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(p.getX()),Math.floor(p.getY()),Math.floor(_.getX()),Math.floor(_.getY())),T=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(_.getX()),Math.floor(_.getY()),Math.floor(p.getX()),Math.floor(p.getY()));return isNaN(w)?T/7:isNaN(T)?w/7:(w+T)/14}sizeOfBlackWhiteBlackRunBothWays(p,_,w,T){let M=this.sizeOfBlackWhiteBlackRun(p,_,w,T),R=1,V=p-(w-p);V<0?(R=p/(p-V),V=0):V>=this.image.getWidth()&&(R=(this.image.getWidth()-1-p)/(V-p),V=this.image.getWidth()-1);let G=Math.floor(_-(T-_)*R);return R=1,G<0?(R=_/(_-G),G=0):G>=this.image.getHeight()&&(R=(this.image.getHeight()-1-_)/(G-_),G=this.image.getHeight()-1),V=Math.floor(p+(V-p)*R),M+=this.sizeOfBlackWhiteBlackRun(p,_,V,G),M-1}sizeOfBlackWhiteBlackRun(p,_,w,T){const M=Math.abs(T-_)>Math.abs(w-p);if(M){let Re=p;p=_,_=Re,Re=w,w=T,T=Re}const R=Math.abs(w-p),V=Math.abs(T-_);let G=-R/2;const q=p<w?1:-1,oe=_<T?1:-1;let me=0;const we=w+q;for(let Re=p,Ye=_;Re!==we;Re+=q){const Ze=M?Ye:Re,ct=M?Re:Ye;if(me===1===this.image.get(Ze,ct)){if(me===2)return Bi.distance(Re,Ye,p,_);me++}if(G+=V,G>0){if(Ye===T)break;Ye+=oe,G-=R}}return me===2?Bi.distance(w+q,T,p,_):NaN}findAlignmentInRegion(p,_,w,T){const M=Math.floor(T*p),R=Math.max(0,_-M),V=Math.min(this.image.getWidth()-1,_+M);if(V-R<p*3)throw new Ie("Alignment top exceeds estimated module size.");const G=Math.max(0,w-M),q=Math.min(this.image.getHeight()-1,w+M);if(q-G<p*3)throw new Ie("Alignment bottom exceeds estimated module size.");return new Cl(this.image,R,G,V-R,q-G,p,this.resultPointCallback).find()}}class Cn{constructor(){this.decoder=new kl}getDecoder(){return this.decoder}decode(p,_){let w,T;if(_!=null&&_.get(le.PURE_BARCODE)!==void 0){const G=Cn.extractPureBits(p.getBlackMatrix());w=this.decoder.decodeBitMatrix(G,_),T=Cn.NO_POINTS}else{const G=new za(p.getBlackMatrix()).detect(_);w=this.decoder.decodeBitMatrix(G.getBits(),_),T=G.getPoints()}w.getOther()instanceof uo&&w.getOther().applyMirroredCorrection(T);const M=new jt(w.getText(),w.getRawBytes(),void 0,T,Ct.QR_CODE,void 0),R=w.getByteSegments();R!==null&&M.putMetadata(Zt.BYTE_SEGMENTS,R);const V=w.getECLevel();return V!==null&&M.putMetadata(Zt.ERROR_CORRECTION_LEVEL,V),w.hasStructuredAppend()&&(M.putMetadata(Zt.STRUCTURED_APPEND_SEQUENCE,w.getStructuredAppendSequenceNumber()),M.putMetadata(Zt.STRUCTURED_APPEND_PARITY,w.getStructuredAppendParity())),M}reset(){}static extractPureBits(p){const _=p.getTopLeftOnBit(),w=p.getBottomRightOnBit();if(_===null||w===null)throw new Ie;const T=this.moduleSize(_,p);let M=_[1],R=w[1],V=_[0],G=w[0];if(V>=G||M>=R)throw new Ie;if(R-M!==G-V&&(G=V+(R-M),G>=p.getWidth()))throw new Ie;const q=Math.round((G-V+1)/T),oe=Math.round((R-M+1)/T);if(q<=0||oe<=0)throw new Ie;if(oe!==q)throw new Ie;const me=Math.floor(T/2);M+=me,V+=me;const we=V+Math.floor((q-1)*T)-G;if(we>0){if(we>me)throw new Ie;V-=we}const Re=M+Math.floor((oe-1)*T)-R;if(Re>0){if(Re>me)throw new Ie;M-=Re}const Ye=new et(q,oe);for(let Ze=0;Ze<oe;Ze++){const ct=M+Math.floor(Ze*T);for(let yt=0;yt<q;yt++)p.get(V+Math.floor(yt*T),ct)&&Ye.set(yt,Ze)}return Ye}static moduleSize(p,_){const w=_.getHeight(),T=_.getWidth();let M=p[0],R=p[1],V=!0,G=0;for(;M<T&&R<w;){if(V!==_.get(M,R)){if(++G===5)break;V=!V}M++,R++}if(M===T||R===w)throw new Ie;return(M-p[0])/7}}Cn.NO_POINTS=new Array;class zt{PDF417Common(){}static getBitCountSum(p){return Bi.sum(p)}static toIntArray(p){if(p==null||!p.length)return zt.EMPTY_INT_ARRAY;const _=new Int32Array(p.length);let w=0;for(const T of p)_[w++]=T;return _}static getCodeword(p){const _=X.binarySearch(zt.SYMBOL_TABLE,p&262143);return _<0?-1:(zt.CODEWORD_TABLE[_]-1)%zt.NUMBER_OF_CODEWORDS}}zt.NUMBER_OF_CODEWORDS=929,zt.MAX_CODEWORDS_IN_BARCODE=zt.NUMBER_OF_CODEWORDS-1,zt.MIN_ROWS_IN_BARCODE=3,zt.MAX_ROWS_IN_BARCODE=90,zt.MODULES_IN_CODEWORD=17,zt.MODULES_IN_STOP_PATTERN=18,zt.BARS_IN_MODULE=8,zt.EMPTY_INT_ARRAY=new Int32Array([]),zt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),zt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class jn{constructor(p,_){this.bits=p,this.points=_}getBits(){return this.bits}getPoints(){return this.points}}class Vi{static detectMultiple(p,_,w){let T=p.getBlackMatrix(),M=Vi.detect(w,T);return M.length||(T=T.clone(),T.rotate180(),M=Vi.detect(w,T)),new jn(T,M)}static detect(p,_){const w=new Array;let T=0,M=0,R=!1;for(;T<_.getHeight();){const V=Vi.findVertices(_,T,M);if(V[0]==null&&V[3]==null){if(!R)break;R=!1,M=0;for(const G of w)G[1]!=null&&(T=Math.trunc(Math.max(T,G[1].getY()))),G[3]!=null&&(T=Math.max(T,Math.trunc(G[3].getY())));T+=Vi.ROW_STEP;continue}if(R=!0,w.push(V),!p)break;V[2]!=null?(M=Math.trunc(V[2].getX()),T=Math.trunc(V[2].getY())):(M=Math.trunc(V[4].getX()),T=Math.trunc(V[4].getY()))}return w}static findVertices(p,_,w){const T=p.getHeight(),M=p.getWidth(),R=new Array(8);return Vi.copyToResult(R,Vi.findRowsWithPattern(p,T,M,_,w,Vi.START_PATTERN),Vi.INDEXES_START_PATTERN),R[4]!=null&&(w=Math.trunc(R[4].getX()),_=Math.trunc(R[4].getY())),Vi.copyToResult(R,Vi.findRowsWithPattern(p,T,M,_,w,Vi.STOP_PATTERN),Vi.INDEXES_STOP_PATTERN),R}static copyToResult(p,_,w){for(let T=0;T<w.length;T++)p[w[T]]=_[T]}static findRowsWithPattern(p,_,w,T,M,R){const V=new Array(4);let G=!1;const q=new Int32Array(R.length);for(;T<_;T+=Vi.ROW_STEP){let me=Vi.findGuardPattern(p,M,T,w,!1,R,q);if(me!=null){for(;T>0;){const we=Vi.findGuardPattern(p,M,--T,w,!1,R,q);if(we!=null)me=we;else{T++;break}}V[0]=new Gt(me[0],T),V[1]=new Gt(me[1],T),G=!0;break}}let oe=T+1;if(G){let me=0,we=Int32Array.from([Math.trunc(V[0].getX()),Math.trunc(V[1].getX())]);for(;oe<_;oe++){const Re=Vi.findGuardPattern(p,we[0],oe,w,!1,R,q);if(Re!=null&&Math.abs(we[0]-Re[0])<Vi.MAX_PATTERN_DRIFT&&Math.abs(we[1]-Re[1])<Vi.MAX_PATTERN_DRIFT)we=Re,me=0;else{if(me>Vi.SKIPPED_ROW_COUNT_MAX)break;me++}}oe-=me+1,V[2]=new Gt(we[0],oe),V[3]=new Gt(we[1],oe)}return oe-T<Vi.BARCODE_MIN_HEIGHT&&X.fill(V,null),V}static findGuardPattern(p,_,w,T,M,R,V){X.fillWithin(V,0,V.length,0);let G=_,q=0;for(;p.get(G,w)&&G>0&&q++<Vi.MAX_PIXEL_DRIFT;)G--;let oe=G,me=0,we=R.length;for(let Re=M;oe<T;oe++)if(p.get(oe,w)!==Re)V[me]++;else{if(me===we-1){if(Vi.patternMatchVariance(V,R,Vi.MAX_INDIVIDUAL_VARIANCE)<Vi.MAX_AVG_VARIANCE)return new Int32Array([G,oe]);G+=V[0]+V[1],O.arraycopy(V,2,V,0,me-1),V[me-1]=0,V[me]=0,me--}else me++;V[me]=1,Re=!Re}return me===we-1&&Vi.patternMatchVariance(V,R,Vi.MAX_INDIVIDUAL_VARIANCE)<Vi.MAX_AVG_VARIANCE?new Int32Array([G,oe-1]):null}static patternMatchVariance(p,_,w){let T=p.length,M=0,R=0;for(let q=0;q<T;q++)M+=p[q],R+=_[q];if(M<R)return 1/0;let V=M/R;w*=V;let G=0;for(let q=0;q<T;q++){let oe=p[q],me=_[q]*V,we=oe>me?oe-me:me-oe;if(we>w)return 1/0;G+=we}return G/M}}Vi.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Vi.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Vi.MAX_AVG_VARIANCE=.42,Vi.MAX_INDIVIDUAL_VARIANCE=.8,Vi.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Vi.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Vi.MAX_PIXEL_DRIFT=3,Vi.MAX_PATTERN_DRIFT=5,Vi.SKIPPED_ROW_COUNT_MAX=25,Vi.ROW_STEP=5,Vi.BARCODE_MIN_HEIGHT=10;class An{constructor(p,_){if(_.length===0)throw new v;this.field=p;let w=_.length;if(w>1&&_[0]===0){let T=1;for(;T<w&&_[T]===0;)T++;T===w?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(w-T),O.arraycopy(_,T,this.coefficients,0,this.coefficients.length))}else this.coefficients=_}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(p){return this.coefficients[this.coefficients.length-1-p]}evaluateAt(p){if(p===0)return this.getCoefficient(0);if(p===1){let T=0;for(let M of this.coefficients)T=this.field.add(T,M);return T}let _=this.coefficients[0],w=this.coefficients.length;for(let T=1;T<w;T++)_=this.field.add(this.field.multiply(p,_),this.coefficients[T]);return _}add(p){if(!this.field.equals(p.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return p;if(p.isZero())return this;let _=this.coefficients,w=p.coefficients;if(_.length>w.length){let R=_;_=w,w=R}let T=new Int32Array(w.length),M=w.length-_.length;O.arraycopy(w,0,T,0,M);for(let R=M;R<w.length;R++)T[R]=this.field.add(_[R-M],w[R]);return new An(this.field,T)}subtract(p){if(!this.field.equals(p.field))throw new v("ModulusPolys do not have same ModulusGF field");return p.isZero()?this:this.add(p.negative())}multiply(p){return p instanceof An?this.multiplyOther(p):this.multiplyScalar(p)}multiplyOther(p){if(!this.field.equals(p.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||p.isZero())return new An(this.field,new Int32Array([0]));let _=this.coefficients,w=_.length,T=p.coefficients,M=T.length,R=new Int32Array(w+M-1);for(let V=0;V<w;V++){let G=_[V];for(let q=0;q<M;q++)R[V+q]=this.field.add(R[V+q],this.field.multiply(G,T[q]))}return new An(this.field,R)}negative(){let p=this.coefficients.length,_=new Int32Array(p);for(let w=0;w<p;w++)_[w]=this.field.subtract(0,this.coefficients[w]);return new An(this.field,_)}multiplyScalar(p){if(p===0)return new An(this.field,new Int32Array([0]));if(p===1)return this;let _=this.coefficients.length,w=new Int32Array(_);for(let T=0;T<_;T++)w[T]=this.field.multiply(this.coefficients[T],p);return new An(this.field,w)}multiplyByMonomial(p,_){if(p<0)throw new v;if(_===0)return new An(this.field,new Int32Array([0]));let w=this.coefficients.length,T=new Int32Array(w+p);for(let M=0;M<w;M++)T[M]=this.field.multiply(this.coefficients[M],_);return new An(this.field,T)}toString(){let p=new $e;for(let _=this.getDegree();_>=0;_--){let w=this.getCoefficient(_);w!==0&&(w<0?(p.append(" - "),w=-w):p.length()>0&&p.append(" + "),(_===0||w!==1)&&p.append(w),_!==0&&(_===1?p.append("x"):(p.append("x^"),p.append(_))))}return p.toString()}}class ts{add(p,_){return(p+_)%this.modulus}subtract(p,_){return(this.modulus+p-_)%this.modulus}exp(p){return this.expTable[p]}log(p){if(p===0)throw new v;return this.logTable[p]}inverse(p){if(p===0)throw new en;return this.expTable[this.modulus-this.logTable[p]-1]}multiply(p,_){return p===0||_===0?0:this.expTable[(this.logTable[p]+this.logTable[_])%(this.modulus-1)]}getSize(){return this.modulus}equals(p){return p===this}}class hr extends ts{constructor(p,_){super(),this.modulus=p,this.expTable=new Int32Array(p),this.logTable=new Int32Array(p);let w=1;for(let T=0;T<p;T++)this.expTable[T]=w,w=w*_%p;for(let T=0;T<p-1;T++)this.logTable[this.expTable[T]]=T;this.zero=new An(this,new Int32Array([0])),this.one=new An(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(p,_){if(p<0)throw new v;if(_===0)return this.zero;let w=new Int32Array(p+1);return w[0]=_,new An(this,w)}}hr.PDF417_GF=new hr(zt.NUMBER_OF_CODEWORDS,3);class al{constructor(){this.field=hr.PDF417_GF}decode(p,_,w){let T=new An(this.field,p),M=new Int32Array(_),R=!1;for(let Ye=_;Ye>0;Ye--){let Ze=T.evaluateAt(this.field.exp(Ye));M[_-Ye]=Ze,Ze!==0&&(R=!0)}if(!R)return 0;let V=this.field.getOne();if(w!=null)for(const Ye of w){let Ze=this.field.exp(p.length-1-Ye),ct=new An(this.field,new Int32Array([this.field.subtract(0,Ze),1]));V=V.multiply(ct)}let G=new An(this.field,M),q=this.runEuclideanAlgorithm(this.field.buildMonomial(_,1),G,_),oe=q[0],me=q[1],we=this.findErrorLocations(oe),Re=this.findErrorMagnitudes(me,oe,we);for(let Ye=0;Ye<we.length;Ye++){let Ze=p.length-1-this.field.log(we[Ye]);if(Ze<0)throw E.getChecksumInstance();p[Ze]=this.field.subtract(p[Ze],Re[Ye])}return we.length}runEuclideanAlgorithm(p,_,w){if(p.getDegree()<_.getDegree()){let we=p;p=_,_=we}let T=p,M=_,R=this.field.getZero(),V=this.field.getOne();for(;M.getDegree()>=Math.round(w/2);){let we=T,Re=R;if(T=M,R=V,T.isZero())throw E.getChecksumInstance();M=we;let Ye=this.field.getZero(),Ze=T.getCoefficient(T.getDegree()),ct=this.field.inverse(Ze);for(;M.getDegree()>=T.getDegree()&&!M.isZero();){let yt=M.getDegree()-T.getDegree(),Ht=this.field.multiply(M.getCoefficient(M.getDegree()),ct);Ye=Ye.add(this.field.buildMonomial(yt,Ht)),M=M.subtract(T.multiplyByMonomial(yt,Ht))}V=Ye.multiply(R).subtract(Re).negative()}let G=V.getCoefficient(0);if(G===0)throw E.getChecksumInstance();let q=this.field.inverse(G),oe=V.multiply(q),me=M.multiply(q);return[oe,me]}findErrorLocations(p){let _=p.getDegree(),w=new Int32Array(_),T=0;for(let M=1;M<this.field.getSize()&&T<_;M++)p.evaluateAt(M)===0&&(w[T]=this.field.inverse(M),T++);if(T!==_)throw E.getChecksumInstance();return w}findErrorMagnitudes(p,_,w){let T=_.getDegree(),M=new Int32Array(T);for(let q=1;q<=T;q++)M[T-q]=this.field.multiply(q,_.getCoefficient(q));let R=new An(this.field,M),V=w.length,G=new Int32Array(V);for(let q=0;q<V;q++){let oe=this.field.inverse(w[q]),me=this.field.subtract(0,p.evaluateAt(oe)),we=this.field.inverse(R.evaluateAt(oe));G[q]=this.field.multiply(me,we)}return G}}class Ur{constructor(p,_,w,T,M){p instanceof Ur?this.constructor_2(p):this.constructor_1(p,_,w,T,M)}constructor_1(p,_,w,T,M){const R=_==null||w==null,V=T==null||M==null;if(R&&V)throw new Ie;R?(_=new Gt(0,T.getY()),w=new Gt(0,M.getY())):V&&(T=new Gt(p.getWidth()-1,_.getY()),M=new Gt(p.getWidth()-1,w.getY())),this.image=p,this.topLeft=_,this.bottomLeft=w,this.topRight=T,this.bottomRight=M,this.minX=Math.trunc(Math.min(_.getX(),w.getX())),this.maxX=Math.trunc(Math.max(T.getX(),M.getX())),this.minY=Math.trunc(Math.min(_.getY(),T.getY())),this.maxY=Math.trunc(Math.max(w.getY(),M.getY()))}constructor_2(p){this.image=p.image,this.topLeft=p.getTopLeft(),this.bottomLeft=p.getBottomLeft(),this.topRight=p.getTopRight(),this.bottomRight=p.getBottomRight(),this.minX=p.getMinX(),this.maxX=p.getMaxX(),this.minY=p.getMinY(),this.maxY=p.getMaxY()}static merge(p,_){return p==null?_:_==null?p:new Ur(p.image,p.topLeft,p.bottomLeft,_.topRight,_.bottomRight)}addMissingRows(p,_,w){let T=this.topLeft,M=this.bottomLeft,R=this.topRight,V=this.bottomRight;if(p>0){let G=w?this.topLeft:this.topRight,q=Math.trunc(G.getY()-p);q<0&&(q=0);let oe=new Gt(G.getX(),q);w?T=oe:R=oe}if(_>0){let G=w?this.bottomLeft:this.bottomRight,q=Math.trunc(G.getY()+_);q>=this.image.getHeight()&&(q=this.image.getHeight()-1);let oe=new Gt(G.getX(),q);w?M=oe:V=oe}return new Ur(this.image,T,M,R,V)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ba{constructor(p,_,w,T){this.columnCount=p,this.errorCorrectionLevel=T,this.rowCountUpperPart=_,this.rowCountLowerPart=w,this.rowCount=_+w}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class As{constructor(){this.buffer=""}static form(p,_){let w=-1;function T(R,V,G,q,oe,me){if(R==="%%")return"%";if(_[++w]===void 0)return;R=q?parseInt(q.substr(1)):void 0;let we=oe?parseInt(oe.substr(1)):void 0,Re;switch(me){case"s":Re=_[w];break;case"c":Re=_[w][0];break;case"f":Re=parseFloat(_[w]).toFixed(R);break;case"p":Re=parseFloat(_[w]).toPrecision(R);break;case"e":Re=parseFloat(_[w]).toExponential(R);break;case"x":Re=parseInt(_[w]).toString(we||16);break;case"d":Re=parseFloat(parseInt(_[w],we||10).toPrecision(R)).toFixed(0);break}Re=typeof Re=="object"?JSON.stringify(Re):(+Re).toString(we);let Ye=parseInt(G),Ze=G&&G[0]+""=="0"?"0":" ";for(;Re.length<Ye;)Re=V!==void 0?Re+Ze:Ze+Re;return Re}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return p.replace(M,T)}format(p,..._){this.buffer+=As.form(p,_)}toString(){return this.buffer}}class Gr{constructor(p){this.boundingBox=new Ur(p),this.codewords=new Array(p.getMaxY()-p.getMinY()+1)}getCodewordNearby(p){let _=this.getCodeword(p);if(_!=null)return _;for(let w=1;w<Gr.MAX_NEARBY_DISTANCE;w++){let T=this.imageRowToCodewordIndex(p)-w;if(T>=0&&(_=this.codewords[T],_!=null)||(T=this.imageRowToCodewordIndex(p)+w,T<this.codewords.length&&(_=this.codewords[T],_!=null)))return _}return null}imageRowToCodewordIndex(p){return p-this.boundingBox.getMinY()}setCodeword(p,_){this.codewords[this.imageRowToCodewordIndex(p)]=_}getCodeword(p){return this.codewords[this.imageRowToCodewordIndex(p)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const p=new As;let _=0;for(const w of this.codewords){if(w==null){p.format("%3d:    |   %n",_++);continue}p.format("%3d: %3d|%3d%n",_++,w.getRowNumber(),w.getValue())}return p.toString()}}Gr.MAX_NEARBY_DISTANCE=5;class Fo{constructor(){this.values=new Map}setValue(p){p=Math.trunc(p);let _=this.values.get(p);_==null&&(_=0),_++,this.values.set(p,_)}getValue(){let p=-1,_=new Array;for(const[w,T]of this.values.entries()){const M={getKey:()=>w,getValue:()=>T};M.getValue()>p?(p=M.getValue(),_=[],_.push(M.getKey())):M.getValue()===p&&_.push(M.getKey())}return zt.toIntArray(_)}getConfidence(p){return this.values.get(p)}}class Rr extends Gr{constructor(p,_){super(p),this._isLeft=_}setRowNumbers(){for(let p of this.getCodewords())p?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(p){let _=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(_,p);let w=this.getBoundingBox(),T=this._isLeft?w.getTopLeft():w.getTopRight(),M=this._isLeft?w.getBottomLeft():w.getBottomRight(),R=this.imageRowToCodewordIndex(Math.trunc(T.getY())),V=this.imageRowToCodewordIndex(Math.trunc(M.getY())),G=-1,q=1,oe=0;for(let me=R;me<V;me++){if(_[me]==null)continue;let we=_[me],Re=we.getRowNumber()-G;if(Re===0)oe++;else if(Re===1)q=Math.max(q,oe),oe=1,G=we.getRowNumber();else if(Re<0||we.getRowNumber()>=p.getRowCount()||Re>me)_[me]=null;else{let Ye;q>2?Ye=(q-2)*Re:Ye=Re;let Ze=Ye>=me;for(let ct=1;ct<=Ye&&!Ze;ct++)Ze=_[me-ct]!=null;Ze?_[me]=null:(G=we.getRowNumber(),oe=1)}}}getRowHeights(){let p=this.getBarcodeMetadata();if(p==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(p);let _=new Int32Array(p.getRowCount());for(let w of this.getCodewords())if(w!=null){let T=w.getRowNumber();if(T>=_.length)continue;_[T]++}return _}adjustIncompleteIndicatorColumnRowNumbers(p){let _=this.getBoundingBox(),w=this._isLeft?_.getTopLeft():_.getTopRight(),T=this._isLeft?_.getBottomLeft():_.getBottomRight(),M=this.imageRowToCodewordIndex(Math.trunc(w.getY())),R=this.imageRowToCodewordIndex(Math.trunc(T.getY())),V=this.getCodewords(),G=-1;for(let q=M;q<R;q++){if(V[q]==null)continue;let oe=V[q];oe.setRowNumberAsRowIndicatorColumn();let me=oe.getRowNumber()-G;me===0||(me===1?G=oe.getRowNumber():oe.getRowNumber()>=p.getRowCount()?V[q]=null:G=oe.getRowNumber())}}getBarcodeMetadata(){let p=this.getCodewords(),_=new Fo,w=new Fo,T=new Fo,M=new Fo;for(let V of p){if(V==null)continue;V.setRowNumberAsRowIndicatorColumn();let G=V.getValue()%30,q=V.getRowNumber();switch(this._isLeft||(q+=2),q%3){case 0:w.setValue(G*3+1);break;case 1:M.setValue(G/3),T.setValue(G%3);break;case 2:_.setValue(G+1);break}}if(_.getValue().length===0||w.getValue().length===0||T.getValue().length===0||M.getValue().length===0||_.getValue()[0]<1||w.getValue()[0]+T.getValue()[0]<zt.MIN_ROWS_IN_BARCODE||w.getValue()[0]+T.getValue()[0]>zt.MAX_ROWS_IN_BARCODE)return null;let R=new ba(_.getValue()[0],w.getValue()[0],T.getValue()[0],M.getValue()[0]);return this.removeIncorrectCodewords(p,R),R}removeIncorrectCodewords(p,_){for(let w=0;w<p.length;w++){let T=p[w];if(p[w]==null)continue;let M=T.getValue()%30,R=T.getRowNumber();if(R>_.getRowCount()){p[w]=null;continue}switch(this._isLeft||(R+=2),R%3){case 0:M*3+1!==_.getRowCountUpperPart()&&(p[w]=null);break;case 1:(Math.trunc(M/3)!==_.getErrorCorrectionLevel()||M%3!==_.getRowCountLowerPart())&&(p[w]=null);break;case 2:M+1!==_.getColumnCount()&&(p[w]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ts{constructor(p,_){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=p,this.barcodeColumnCount=p.getColumnCount(),this.boundingBox=_,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let p=zt.MAX_CODEWORDS_IN_BARCODE,_;do _=p,p=this.adjustRowNumbersAndGetCount();while(p>0&&p<_);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(p){p?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let p=this.adjustRowNumbersByRow();if(p===0)return 0;for(let _=1;_<this.barcodeColumnCount+1;_++){let w=this.detectionResultColumns[_].getCodewords();for(let T=0;T<w.length;T++)w[T]!=null&&(w[T].hasValidRowNumber()||this.adjustRowNumbers(_,T,w))}return p}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let p=this.detectionResultColumns[0].getCodewords(),_=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let w=0;w<p.length;w++)if(p[w]!=null&&_[w]!=null&&p[w].getRowNumber()===_[w].getRowNumber())for(let T=1;T<=this.barcodeColumnCount;T++){let M=this.detectionResultColumns[T].getCodewords()[w];M!=null&&(M.setRowNumber(p[w].getRowNumber()),M.hasValidRowNumber()||(this.detectionResultColumns[T].getCodewords()[w]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let p=0,_=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let w=0;w<_.length;w++){if(_[w]==null)continue;let T=_[w].getRowNumber(),M=0;for(let R=this.barcodeColumnCount+1;R>0&&M<this.ADJUST_ROW_NUMBER_SKIP;R--){let V=this.detectionResultColumns[R].getCodewords()[w];V!=null&&(M=Ts.adjustRowNumberIfValid(T,M,V),V.hasValidRowNumber()||p++)}}return p}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let p=0,_=this.detectionResultColumns[0].getCodewords();for(let w=0;w<_.length;w++){if(_[w]==null)continue;let T=_[w].getRowNumber(),M=0;for(let R=1;R<this.barcodeColumnCount+1&&M<this.ADJUST_ROW_NUMBER_SKIP;R++){let V=this.detectionResultColumns[R].getCodewords()[w];V!=null&&(M=Ts.adjustRowNumberIfValid(T,M,V),V.hasValidRowNumber()||p++)}}return p}static adjustRowNumberIfValid(p,_,w){return w==null||w.hasValidRowNumber()||(w.isValidRowNumber(p)?(w.setRowNumber(p),_=0):++_),_}adjustRowNumbers(p,_,w){if(!this.detectionResultColumns[p-1])return;let T=w[_],M=this.detectionResultColumns[p-1].getCodewords(),R=M;this.detectionResultColumns[p+1]!=null&&(R=this.detectionResultColumns[p+1].getCodewords());let V=new Array(14);V[2]=M[_],V[3]=R[_],_>0&&(V[0]=w[_-1],V[4]=M[_-1],V[5]=R[_-1]),_>1&&(V[8]=w[_-2],V[10]=M[_-2],V[11]=R[_-2]),_<w.length-1&&(V[1]=w[_+1],V[6]=M[_+1],V[7]=R[_+1]),_<w.length-2&&(V[9]=w[_+2],V[12]=M[_+2],V[13]=R[_+2]);for(let G of V)if(Ts.adjustRowNumber(T,G))return}static adjustRowNumber(p,_){return _==null?!1:_.hasValidRowNumber()&&_.getBucket()===p.getBucket()?(p.setRowNumber(_.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(p){this.boundingBox=p}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(p,_){this.detectionResultColumns[p]=_}getDetectionResultColumn(p){return this.detectionResultColumns[p]}toString(){let p=this.detectionResultColumns[0];p==null&&(p=this.detectionResultColumns[this.barcodeColumnCount+1]);let _=new As;for(let w=0;w<p.getCodewords().length;w++){_.format("CW %3d:",w);for(let T=0;T<this.barcodeColumnCount+2;T++){if(this.detectionResultColumns[T]==null){_.format("    |   ");continue}let M=this.detectionResultColumns[T].getCodewords()[w];if(M==null){_.format("    |   ");continue}_.format(" %3d|%3d",M.getRowNumber(),M.getValue())}_.format("%n")}return _.toString()}}class is{constructor(p,_,w,T){this.rowNumber=is.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(p),this.endX=Math.trunc(_),this.bucket=Math.trunc(w),this.value=Math.trunc(T)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(p){return p!==is.BARCODE_ROW_UNKNOWN&&this.bucket===p%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(p){this.rowNumber=p}toString(){return this.rowNumber+"|"+this.value}}is.BARCODE_ROW_UNKNOWN=-1;class Or{static initialize(){for(let p=0;p<zt.SYMBOL_TABLE.length;p++){let _=zt.SYMBOL_TABLE[p],w=_&1;for(let T=0;T<zt.BARS_IN_MODULE;T++){let M=0;for(;(_&1)===w;)M+=1,_>>=1;w=_&1,Or.RATIOS_TABLE[p]||(Or.RATIOS_TABLE[p]=new Array(zt.BARS_IN_MODULE)),Or.RATIOS_TABLE[p][zt.BARS_IN_MODULE-T-1]=Math.fround(M/zt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(p){let _=Or.getDecodedCodewordValue(Or.sampleBitCounts(p));return _!==-1?_:Or.getClosestDecodedValue(p)}static sampleBitCounts(p){let _=Bi.sum(p),w=new Int32Array(zt.BARS_IN_MODULE),T=0,M=0;for(let R=0;R<zt.MODULES_IN_CODEWORD;R++){let V=_/(2*zt.MODULES_IN_CODEWORD)+R*_/zt.MODULES_IN_CODEWORD;M+p[T]<=V&&(M+=p[T],T++),w[T]++}return w}static getDecodedCodewordValue(p){let _=Or.getBitValue(p);return zt.getCodeword(_)===-1?-1:_}static getBitValue(p){let _=0;for(let w=0;w<p.length;w++)for(let T=0;T<p[w];T++)_=_<<1|(w%2===0?1:0);return Math.trunc(_)}static getClosestDecodedValue(p){let _=Bi.sum(p),w=new Array(zt.BARS_IN_MODULE);if(_>1)for(let R=0;R<w.length;R++)w[R]=Math.fround(p[R]/_);let T=Qa.MAX_VALUE,M=-1;this.bSymbolTableReady||Or.initialize();for(let R=0;R<Or.RATIOS_TABLE.length;R++){let V=0,G=Or.RATIOS_TABLE[R];for(let q=0;q<zt.BARS_IN_MODULE;q++){let oe=Math.fround(G[q]-w[q]);if(V+=Math.fround(oe*oe),V>=T)break}V<T&&(T=V,M=zt.SYMBOL_TABLE[R])}return M}}Or.bSymbolTableReady=!1,Or.RATIOS_TABLE=new Array(zt.SYMBOL_TABLE.length).map(ge=>new Array(zt.BARS_IN_MODULE));class Nc{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(p){this.segmentIndex=p}getFileId(){return this.fileId}setFileId(p){this.fileId=p}getOptionalData(){return this.optionalData}setOptionalData(p){this.optionalData=p}isLastSegment(){return this.lastSegment}setLastSegment(p){this.lastSegment=p}getSegmentCount(){return this.segmentCount}setSegmentCount(p){this.segmentCount=p}getSender(){return this.sender||null}setSender(p){this.sender=p}getAddressee(){return this.addressee||null}setAddressee(p){this.addressee=p}getFileName(){return this.fileName}setFileName(p){this.fileName=p}getFileSize(){return this.fileSize}setFileSize(p){this.fileSize=p}getChecksum(){return this.checksum}setChecksum(p){this.checksum=p}getTimestamp(){return this.timestamp}setTimestamp(p){this.timestamp=p}}class Bo{static parseLong(p,_=void 0){return parseInt(p,_)}}class Rn extends g{}Rn.kind="NullPointerException";class Al{writeBytes(p){this.writeBytesOffset(p,0,p.length)}writeBytesOffset(p,_,w){if(p==null)throw new Rn;if(_<0||_>p.length||w<0||_+w>p.length||_+w<0)throw new N;if(w===0)return;for(let T=0;T<w;T++)this.write(p[_+T])}flush(){}close(){}}class sn extends g{}class Gi extends Al{constructor(p=32){if(super(),this.count=0,p<0)throw new v("Negative initial size: "+p);this.buf=new Uint8Array(p)}ensureCapacity(p){p-this.buf.length>0&&this.grow(p)}grow(p){let w=this.buf.length<<1;if(w-p<0&&(w=p),w<0){if(p<0)throw new sn;w=K.MAX_VALUE}this.buf=X.copyOfUint8Array(this.buf,w)}write(p){this.ensureCapacity(this.count+1),this.buf[this.count]=p,this.count+=1}writeBytesOffset(p,_,w){if(_<0||_>p.length||w<0||_+w-p.length>0)throw new N;this.ensureCapacity(this.count+w),O.arraycopy(p,_,this.buf,this.count,w),this.count+=w}writeTo(p){p.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return X.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(p){return p?typeof p=="string"?this.toString_string(p):this.toString_number(p):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(p){return new String(this.buf).toString()}toString_number(p){return new String(this.buf).toString()}close(){}}var vn;(function(ge){ge[ge.ALPHA=0]="ALPHA",ge[ge.LOWER=1]="LOWER",ge[ge.MIXED=2]="MIXED",ge[ge.PUNCT=3]="PUNCT",ge[ge.ALPHA_SHIFT=4]="ALPHA_SHIFT",ge[ge.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(vn||(vn={}));function on(){if(typeof window<"u")return window.BigInt||null;if(typeof Jn<"u")return Jn.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let No;function Wa(ge){if(typeof No>"u"&&(No=on()),No===null)throw new Error("BigInt is not supported!");return No(ge)}function Tl(){let ge=[];ge[0]=Wa(1);let p=Wa(900);ge[1]=p;for(let _=2;_<16;_++)ge[_]=ge[_-1]*p;return ge}class _t{static decode(p,_){let w=new $e(""),T=de.ISO8859_1;w.enableDecoding(T);let M=1,R=p[M++],V=new Nc;for(;M<p[0];){switch(R){case _t.TEXT_COMPACTION_MODE_LATCH:M=_t.textCompaction(p,M,w);break;case _t.BYTE_COMPACTION_MODE_LATCH:case _t.BYTE_COMPACTION_MODE_LATCH_6:M=_t.byteCompaction(R,p,T,M,w);break;case _t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:w.append(p[M++]);break;case _t.NUMERIC_COMPACTION_MODE_LATCH:M=_t.numericCompaction(p,M,w);break;case _t.ECI_CHARSET:de.getCharacterSetECIByValue(p[M++]);break;case _t.ECI_GENERAL_PURPOSE:M+=2;break;case _t.ECI_USER_DEFINED:M++;break;case _t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:M=_t.decodeMacroBlock(p,M,V);break;case _t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _t.MACRO_PDF417_TERMINATOR:throw new te;default:M--,M=_t.textCompaction(p,M,w);break}if(M<p.length)R=p[M++];else throw te.getFormatInstance()}if(w.length()===0)throw te.getFormatInstance();let G=new Pi(null,w.toString(),null,_);return G.setOther(V),G}static decodeMacroBlock(p,_,w){if(_+_t.NUMBER_OF_SEQUENCE_CODEWORDS>p[0])throw te.getFormatInstance();let T=new Int32Array(_t.NUMBER_OF_SEQUENCE_CODEWORDS);for(let V=0;V<_t.NUMBER_OF_SEQUENCE_CODEWORDS;V++,_++)T[V]=p[_];w.setSegmentIndex(K.parseInt(_t.decodeBase900toBase10(T,_t.NUMBER_OF_SEQUENCE_CODEWORDS)));let M=new $e;_=_t.textCompaction(p,_,M),w.setFileId(M.toString());let R=-1;for(p[_]===_t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(R=_+1);_<p[0];)switch(p[_]){case _t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(_++,p[_]){case _t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let V=new $e;_=_t.textCompaction(p,_+1,V),w.setFileName(V.toString());break;case _t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let G=new $e;_=_t.textCompaction(p,_+1,G),w.setSender(G.toString());break;case _t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let q=new $e;_=_t.textCompaction(p,_+1,q),w.setAddressee(q.toString());break;case _t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let oe=new $e;_=_t.numericCompaction(p,_+1,oe),w.setSegmentCount(K.parseInt(oe.toString()));break;case _t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let me=new $e;_=_t.numericCompaction(p,_+1,me),w.setTimestamp(Bo.parseLong(me.toString()));break;case _t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let we=new $e;_=_t.numericCompaction(p,_+1,we),w.setChecksum(K.parseInt(we.toString()));break;case _t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Re=new $e;_=_t.numericCompaction(p,_+1,Re),w.setFileSize(Bo.parseLong(Re.toString()));break;default:throw te.getFormatInstance()}break;case _t.MACRO_PDF417_TERMINATOR:_++,w.setLastSegment(!0);break;default:throw te.getFormatInstance()}if(R!==-1){let V=_-R;w.isLastSegment()&&V--,w.setOptionalData(X.copyOfRange(p,R,R+V))}return _}static textCompaction(p,_,w){let T=new Int32Array((p[0]-_)*2),M=new Int32Array((p[0]-_)*2),R=0,V=!1;for(;_<p[0]&&!V;){let G=p[_++];if(G<_t.TEXT_COMPACTION_MODE_LATCH)T[R]=G/30,T[R+1]=G%30,R+=2;else switch(G){case _t.TEXT_COMPACTION_MODE_LATCH:T[R++]=_t.TEXT_COMPACTION_MODE_LATCH;break;case _t.BYTE_COMPACTION_MODE_LATCH:case _t.BYTE_COMPACTION_MODE_LATCH_6:case _t.NUMERIC_COMPACTION_MODE_LATCH:case _t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _t.MACRO_PDF417_TERMINATOR:_--,V=!0;break;case _t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T[R]=_t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,G=p[_++],M[R]=G,R++;break}}return _t.decodeTextCompaction(T,M,R,w),_}static decodeTextCompaction(p,_,w,T){let M=vn.ALPHA,R=vn.ALPHA,V=0;for(;V<w;){let G=p[V],q="";switch(M){case vn.ALPHA:if(G<26)q=String.fromCharCode(65+G);else switch(G){case 26:q=" ";break;case _t.LL:M=vn.LOWER;break;case _t.ML:M=vn.MIXED;break;case _t.PS:R=M,M=vn.PUNCT_SHIFT;break;case _t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case _t.TEXT_COMPACTION_MODE_LATCH:M=vn.ALPHA;break}break;case vn.LOWER:if(G<26)q=String.fromCharCode(97+G);else switch(G){case 26:q=" ";break;case _t.AS:R=M,M=vn.ALPHA_SHIFT;break;case _t.ML:M=vn.MIXED;break;case _t.PS:R=M,M=vn.PUNCT_SHIFT;break;case _t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case _t.TEXT_COMPACTION_MODE_LATCH:M=vn.ALPHA;break}break;case vn.MIXED:if(G<_t.PL)q=_t.MIXED_CHARS[G];else switch(G){case _t.PL:M=vn.PUNCT;break;case 26:q=" ";break;case _t.LL:M=vn.LOWER;break;case _t.AL:M=vn.ALPHA;break;case _t.PS:R=M,M=vn.PUNCT_SHIFT;break;case _t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case _t.TEXT_COMPACTION_MODE_LATCH:M=vn.ALPHA;break}break;case vn.PUNCT:if(G<_t.PAL)q=_t.PUNCT_CHARS[G];else switch(G){case _t.PAL:M=vn.ALPHA;break;case _t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case _t.TEXT_COMPACTION_MODE_LATCH:M=vn.ALPHA;break}break;case vn.ALPHA_SHIFT:if(M=R,G<26)q=String.fromCharCode(65+G);else switch(G){case 26:q=" ";break;case _t.TEXT_COMPACTION_MODE_LATCH:M=vn.ALPHA;break}break;case vn.PUNCT_SHIFT:if(M=R,G<_t.PAL)q=_t.PUNCT_CHARS[G];else switch(G){case _t.PAL:M=vn.ALPHA;break;case _t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case _t.TEXT_COMPACTION_MODE_LATCH:M=vn.ALPHA;break}break}q!==""&&T.append(q),V++}}static byteCompaction(p,_,w,T,M){let R=new Gi,V=0,G=0,q=!1;switch(p){case _t.BYTE_COMPACTION_MODE_LATCH:let oe=new Int32Array(6),me=_[T++];for(;T<_[0]&&!q;)switch(oe[V++]=me,G=900*G+me,me=_[T++],me){case _t.TEXT_COMPACTION_MODE_LATCH:case _t.BYTE_COMPACTION_MODE_LATCH:case _t.NUMERIC_COMPACTION_MODE_LATCH:case _t.BYTE_COMPACTION_MODE_LATCH_6:case _t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _t.MACRO_PDF417_TERMINATOR:T--,q=!0;break;default:if(V%5===0&&V>0){for(let we=0;we<6;++we)R.write(Number(Wa(G)>>Wa(8*(5-we))));G=0,V=0}break}T===_[0]&&me<_t.TEXT_COMPACTION_MODE_LATCH&&(oe[V++]=me);for(let we=0;we<V;we++)R.write(oe[we]);break;case _t.BYTE_COMPACTION_MODE_LATCH_6:for(;T<_[0]&&!q;){let we=_[T++];if(we<_t.TEXT_COMPACTION_MODE_LATCH)V++,G=900*G+we;else switch(we){case _t.TEXT_COMPACTION_MODE_LATCH:case _t.BYTE_COMPACTION_MODE_LATCH:case _t.NUMERIC_COMPACTION_MODE_LATCH:case _t.BYTE_COMPACTION_MODE_LATCH_6:case _t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _t.MACRO_PDF417_TERMINATOR:T--,q=!0;break}if(V%5===0&&V>0){for(let Re=0;Re<6;++Re)R.write(Number(Wa(G)>>Wa(8*(5-Re))));G=0,V=0}}break}return M.append(De.decode(R.toByteArray(),w)),T}static numericCompaction(p,_,w){let T=0,M=!1,R=new Int32Array(_t.MAX_NUMERIC_CODEWORDS);for(;_<p[0]&&!M;){let V=p[_++];if(_===p[0]&&(M=!0),V<_t.TEXT_COMPACTION_MODE_LATCH)R[T]=V,T++;else switch(V){case _t.TEXT_COMPACTION_MODE_LATCH:case _t.BYTE_COMPACTION_MODE_LATCH:case _t.BYTE_COMPACTION_MODE_LATCH_6:case _t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _t.MACRO_PDF417_TERMINATOR:_--,M=!0;break}(T%_t.MAX_NUMERIC_CODEWORDS===0||V===_t.NUMERIC_COMPACTION_MODE_LATCH||M)&&T>0&&(w.append(_t.decodeBase900toBase10(R,T)),T=0)}return _}static decodeBase900toBase10(p,_){let w=Wa(0);for(let M=0;M<_;M++)w+=_t.EXP900[_-M-1]*Wa(p[M]);let T=w.toString();if(T.charAt(0)!=="1")throw new te;return T.substring(1)}}_t.TEXT_COMPACTION_MODE_LATCH=900,_t.BYTE_COMPACTION_MODE_LATCH=901,_t.NUMERIC_COMPACTION_MODE_LATCH=902,_t.BYTE_COMPACTION_MODE_LATCH_6=924,_t.ECI_USER_DEFINED=925,_t.ECI_GENERAL_PURPOSE=926,_t.ECI_CHARSET=927,_t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,_t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,_t.MACRO_PDF417_TERMINATOR=922,_t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,_t.MAX_NUMERIC_CODEWORDS=15,_t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,_t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,_t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,_t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,_t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,_t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,_t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,_t.PL=25,_t.LL=27,_t.AS=27,_t.ML=28,_t.AL=28,_t.PS=29,_t.PAL=29,_t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,_t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",_t.EXP900=on()?Tl():[],_t.NUMBER_OF_SEQUENCE_CODEWORDS=2;class qi{constructor(){}static decode(p,_,w,T,M,R,V){let G=new Ur(p,_,w,T,M),q=null,oe=null,me;for(let Ye=!0;;Ye=!1){if(_!=null&&(q=qi.getRowIndicatorColumn(p,G,_,!0,R,V)),T!=null&&(oe=qi.getRowIndicatorColumn(p,G,T,!1,R,V)),me=qi.merge(q,oe),me==null)throw Ie.getNotFoundInstance();let Ze=me.getBoundingBox();if(Ye&&Ze!=null&&(Ze.getMinY()<G.getMinY()||Ze.getMaxY()>G.getMaxY()))G=Ze;else break}me.setBoundingBox(G);let we=me.getBarcodeColumnCount()+1;me.setDetectionResultColumn(0,q),me.setDetectionResultColumn(we,oe);let Re=q!=null;for(let Ye=1;Ye<=we;Ye++){let Ze=Re?Ye:we-Ye;if(me.getDetectionResultColumn(Ze)!==void 0)continue;let ct;Ze===0||Ze===we?ct=new Rr(G,Ze===0):ct=new Gr(G),me.setDetectionResultColumn(Ze,ct);let yt=-1,Ht=yt;for(let Wt=G.getMinY();Wt<=G.getMaxY();Wt++){if(yt=qi.getStartColumn(me,Ze,Wt,Re),yt<0||yt>G.getMaxX()){if(Ht===-1)continue;yt=Ht}let Ft=qi.detectCodeword(p,G.getMinX(),G.getMaxX(),Re,yt,Wt,R,V);Ft!=null&&(ct.setCodeword(Wt,Ft),Ht=yt,R=Math.min(R,Ft.getWidth()),V=Math.max(V,Ft.getWidth()))}}return qi.createDecoderResult(me)}static merge(p,_){if(p==null&&_==null)return null;let w=qi.getBarcodeMetadata(p,_);if(w==null)return null;let T=Ur.merge(qi.adjustBoundingBox(p),qi.adjustBoundingBox(_));return new Ts(w,T)}static adjustBoundingBox(p){if(p==null)return null;let _=p.getRowHeights();if(_==null)return null;let w=qi.getMax(_),T=0;for(let V of _)if(T+=w-V,V>0)break;let M=p.getCodewords();for(let V=0;T>0&&M[V]==null;V++)T--;let R=0;for(let V=_.length-1;V>=0&&(R+=w-_[V],!(_[V]>0));V--);for(let V=M.length-1;R>0&&M[V]==null;V--)R--;return p.getBoundingBox().addMissingRows(T,R,p.isLeft())}static getMax(p){let _=-1;for(let w of p)_=Math.max(_,w);return _}static getBarcodeMetadata(p,_){let w;if(p==null||(w=p.getBarcodeMetadata())==null)return _==null?null:_.getBarcodeMetadata();let T;return _==null||(T=_.getBarcodeMetadata())==null?w:w.getColumnCount()!==T.getColumnCount()&&w.getErrorCorrectionLevel()!==T.getErrorCorrectionLevel()&&w.getRowCount()!==T.getRowCount()?null:w}static getRowIndicatorColumn(p,_,w,T,M,R){let V=new Rr(_,T);for(let G=0;G<2;G++){let q=G===0?1:-1,oe=Math.trunc(Math.trunc(w.getX()));for(let me=Math.trunc(Math.trunc(w.getY()));me<=_.getMaxY()&&me>=_.getMinY();me+=q){let we=qi.detectCodeword(p,0,p.getWidth(),T,oe,me,M,R);we!=null&&(V.setCodeword(me,we),T?oe=we.getStartX():oe=we.getEndX())}}return V}static adjustCodewordCount(p,_){let w=_[0][1],T=w.getValue(),M=p.getBarcodeColumnCount()*p.getBarcodeRowCount()-qi.getNumberOfECCodeWords(p.getBarcodeECLevel());if(T.length===0){if(M<1||M>zt.MAX_CODEWORDS_IN_BARCODE)throw Ie.getNotFoundInstance();w.setValue(M)}else T[0]!==M&&w.setValue(M)}static createDecoderResult(p){let _=qi.createBarcodeMatrix(p);qi.adjustCodewordCount(p,_);let w=new Array,T=new Int32Array(p.getBarcodeRowCount()*p.getBarcodeColumnCount()),M=[],R=new Array;for(let G=0;G<p.getBarcodeRowCount();G++)for(let q=0;q<p.getBarcodeColumnCount();q++){let oe=_[G][q+1].getValue(),me=G*p.getBarcodeColumnCount()+q;oe.length===0?w.push(me):oe.length===1?T[me]=oe[0]:(R.push(me),M.push(oe))}let V=new Array(M.length);for(let G=0;G<V.length;G++)V[G]=M[G];return qi.createDecoderResultFromAmbiguousValues(p.getBarcodeECLevel(),T,zt.toIntArray(w),zt.toIntArray(R),V)}static createDecoderResultFromAmbiguousValues(p,_,w,T,M){let R=new Int32Array(T.length),V=100;for(;V-- >0;){for(let G=0;G<R.length;G++)_[T[G]]=M[G][R[G]];try{return qi.decodeCodewords(_,p,w)}catch(G){if(!(G instanceof E))throw G}if(R.length===0)throw E.getChecksumInstance();for(let G=0;G<R.length;G++)if(R[G]<M[G].length-1){R[G]++;break}else if(R[G]=0,G===R.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(p){let _=Array.from({length:p.getBarcodeRowCount()},()=>new Array(p.getBarcodeColumnCount()+2));for(let T=0;T<_.length;T++)for(let M=0;M<_[T].length;M++)_[T][M]=new Fo;let w=0;for(let T of p.getDetectionResultColumns()){if(T!=null){for(let M of T.getCodewords())if(M!=null){let R=M.getRowNumber();if(R>=0){if(R>=_.length)continue;_[R][w].setValue(M.getValue())}}}w++}return _}static isValidBarcodeColumn(p,_){return _>=0&&_<=p.getBarcodeColumnCount()+1}static getStartColumn(p,_,w,T){let M=T?1:-1,R=null;if(qi.isValidBarcodeColumn(p,_-M)&&(R=p.getDetectionResultColumn(_-M).getCodeword(w)),R!=null)return T?R.getEndX():R.getStartX();if(R=p.getDetectionResultColumn(_).getCodewordNearby(w),R!=null)return T?R.getStartX():R.getEndX();if(qi.isValidBarcodeColumn(p,_-M)&&(R=p.getDetectionResultColumn(_-M).getCodewordNearby(w)),R!=null)return T?R.getEndX():R.getStartX();let V=0;for(;qi.isValidBarcodeColumn(p,_-M);){_-=M;for(let G of p.getDetectionResultColumn(_).getCodewords())if(G!=null)return(T?G.getEndX():G.getStartX())+M*V*(G.getEndX()-G.getStartX());V++}return T?p.getBoundingBox().getMinX():p.getBoundingBox().getMaxX()}static detectCodeword(p,_,w,T,M,R,V,G){M=qi.adjustCodewordStartColumn(p,_,w,T,M,R);let q=qi.getModuleBitCount(p,_,w,T,M,R);if(q==null)return null;let oe,me=Bi.sum(q);if(T)oe=M+me;else{for(let Ye=0;Ye<q.length/2;Ye++){let Ze=q[Ye];q[Ye]=q[q.length-1-Ye],q[q.length-1-Ye]=Ze}oe=M,M=oe-me}if(!qi.checkCodewordSkew(me,V,G))return null;let we=Or.getDecodedValue(q),Re=zt.getCodeword(we);return Re===-1?null:new is(M,oe,qi.getCodewordBucketNumber(we),Re)}static getModuleBitCount(p,_,w,T,M,R){let V=M,G=new Int32Array(8),q=0,oe=T?1:-1,me=T;for(;(T?V<w:V>=_)&&q<G.length;)p.get(V,R)===me?(G[q]++,V+=oe):(q++,me=!me);return q===G.length||V===(T?w:_)&&q===G.length-1?G:null}static getNumberOfECCodeWords(p){return 2<<p}static adjustCodewordStartColumn(p,_,w,T,M,R){let V=M,G=T?-1:1;for(let q=0;q<2;q++){for(;(T?V>=_:V<w)&&T===p.get(V,R);){if(Math.abs(M-V)>qi.CODEWORD_SKEW_SIZE)return M;V+=G}G=-G,T=!T}return V}static checkCodewordSkew(p,_,w){return _-qi.CODEWORD_SKEW_SIZE<=p&&p<=w+qi.CODEWORD_SKEW_SIZE}static decodeCodewords(p,_,w){if(p.length===0)throw te.getFormatInstance();let T=1<<_+1,M=qi.correctErrors(p,w,T);qi.verifyCodewordCount(p,T);let R=_t.decode(p,""+_);return R.setErrorsCorrected(M),R.setErasures(w.length),R}static correctErrors(p,_,w){if(_!=null&&_.length>w/2+qi.MAX_ERRORS||w<0||w>qi.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return qi.errorCorrection.decode(p,w,_)}static verifyCodewordCount(p,_){if(p.length<4)throw te.getFormatInstance();let w=p[0];if(w>p.length)throw te.getFormatInstance();if(w===0)if(_<p.length)p[0]=p.length-_;else throw te.getFormatInstance()}static getBitCountForCodeword(p){let _=new Int32Array(8),w=0,T=_.length-1;for(;!((p&1)!==w&&(w=p&1,T--,T<0));)_[T]++,p>>=1;return _}static getCodewordBucketNumber(p){return p instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(p):this.getCodewordBucketNumber_number(p)}static getCodewordBucketNumber_number(p){return qi.getCodewordBucketNumber(qi.getBitCountForCodeword(p))}static getCodewordBucketNumber_Int32Array(p){return(p[0]-p[2]+p[4]-p[6]+9)%9}static toString(p){let _=new As;for(let w=0;w<p.length;w++){_.format("Row %2d: ",w);for(let T=0;T<p[w].length;T++){let M=p[w][T];M.getValue().length===0?_.format("        ",null):_.format("%4d(%2d)",M.getValue()[0],M.getConfidence(M.getValue()[0]))}_.format("%n")}return _.toString()}}qi.CODEWORD_SKEW_SIZE=2,qi.MAX_ERRORS=3,qi.MAX_EC_CODEWORDS=512,qi.errorCorrection=new al;class Ea{decode(p,_=null){let w=Ea.decode(p,_,!1);if(w==null||w.length===0||w[0]==null)throw Ie.getNotFoundInstance();return w[0]}decodeMultiple(p,_=null){try{return Ea.decode(p,_,!0)}catch(w){throw w instanceof te||w instanceof E?Ie.getNotFoundInstance():w}}static decode(p,_,w){const T=new Array,M=Vi.detectMultiple(p,_,w);for(const R of M.getPoints()){const V=qi.decode(M.getBits(),R[4],R[5],R[6],R[7],Ea.getMinCodewordWidth(R),Ea.getMaxCodewordWidth(R)),G=new jt(V.getText(),V.getRawBytes(),void 0,R,Ct.PDF_417);G.putMetadata(Zt.ERROR_CORRECTION_LEVEL,V.getECLevel());const q=V.getOther();q!=null&&G.putMetadata(Zt.PDF417_EXTRA_METADATA,q),T.push(G)}return T.map(R=>R)}static getMaxWidth(p,_){return p==null||_==null?0:Math.trunc(Math.abs(p.getX()-_.getX()))}static getMinWidth(p,_){return p==null||_==null?K.MAX_VALUE:Math.trunc(Math.abs(p.getX()-_.getX()))}static getMaxCodewordWidth(p){return Math.floor(Math.max(Math.max(Ea.getMaxWidth(p[0],p[4]),Ea.getMaxWidth(p[6],p[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.max(Ea.getMaxWidth(p[1],p[5]),Ea.getMaxWidth(p[7],p[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(p){return Math.floor(Math.min(Math.min(Ea.getMinWidth(p[0],p[4]),Ea.getMinWidth(p[6],p[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.min(Ea.getMinWidth(p[1],p[5]),Ea.getMinWidth(p[7],p[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))}reset(){}}class El extends g{}El.kind="ReaderException";class xd{constructor(p,_){this.verbose=p===!0,_&&this.setHints(_)}decode(p,_){return _&&this.setHints(_),this.decodeInternal(p)}decodeWithState(p){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(p)}setHints(p){this.hints=p;const _=!i(p)&&p.get(le.TRY_HARDER)===!0,w=i(p)?null:p.get(le.POSSIBLE_FORMATS),T=new Array;if(!i(w)){const M=w.some(R=>R===Ct.UPC_A||R===Ct.UPC_E||R===Ct.EAN_13||R===Ct.EAN_8||R===Ct.CODABAR||R===Ct.CODE_39||R===Ct.CODE_93||R===Ct.CODE_128||R===Ct.ITF||R===Ct.RSS_14||R===Ct.RSS_EXPANDED);M&&!_&&T.push(new Dr(p,this.verbose)),w.includes(Ct.QR_CODE)&&T.push(new Cn),w.includes(Ct.DATA_MATRIX)&&T.push(new ho),w.includes(Ct.AZTEC)&&T.push(new We),w.includes(Ct.PDF_417)&&T.push(new Ea),M&&_&&T.push(new Dr(p,this.verbose))}T.length===0&&(_||T.push(new Dr(p,this.verbose)),T.push(new Cn),T.push(new ho),T.push(new We),T.push(new Ea),_&&T.push(new Dr(p,this.verbose))),this.readers=T}reset(){if(this.readers!==null)for(const p of this.readers)p.reset()}decodeInternal(p){if(this.readers===null)throw new El("No readers where selected, nothing can be read.");for(const _ of this.readers)try{return _.decode(p,this.hints)}catch(w){if(w instanceof El)continue}throw new Ie("No MultiFormat Readers were able to detect the code.")}}class yd extends Ai{constructor(p=null,_=500){const w=new xd;w.setHints(p),super(w,_)}decodeBitmap(p){return this.reader.decodeWithState(p)}}class zr extends Ai{constructor(p=500){super(new Ea,p)}}class $s extends Ai{constructor(p=500){super(new Cn,p)}}var Gn;(function(ge){ge[ge.ERROR_CORRECTION=0]="ERROR_CORRECTION",ge[ge.CHARACTER_SET=1]="CHARACTER_SET",ge[ge.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ge[ge.MIN_SIZE=3]="MIN_SIZE",ge[ge.MAX_SIZE=4]="MAX_SIZE",ge[ge.MARGIN=5]="MARGIN",ge[ge.PDF417_COMPACT=6]="PDF417_COMPACT",ge[ge.PDF417_COMPACTION=7]="PDF417_COMPACTION",ge[ge.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",ge[ge.AZTEC_LAYERS=9]="AZTEC_LAYERS",ge[ge.QR_VERSION=10]="QR_VERSION"})(Gn||(Gn={}));var na=Gn;class Kl{constructor(p){this.field=p,this.cachedGenerators=[],this.cachedGenerators.push(new Li(p,Int32Array.from([1])))}buildGenerator(p){const _=this.cachedGenerators;if(p>=_.length){let w=_[_.length-1];const T=this.field;for(let M=_.length;M<=p;M++){const R=w.multiply(new Li(T,Int32Array.from([1,T.exp(M-1+T.getGeneratorBase())])));_.push(R),w=R}}return _[p]}encode(p,_){if(_===0)throw new v("No error correction bytes");const w=p.length-_;if(w<=0)throw new v("No data bytes provided");const T=this.buildGenerator(_),M=new Int32Array(w);O.arraycopy(p,0,M,0,w);let R=new Li(this.field,M);R=R.multiplyByMonomial(_,1);const G=R.divide(T)[1].getCoefficients(),q=_-G.length;for(let oe=0;oe<q;oe++)p[w+oe]=0;O.arraycopy(G,0,p,w+q,G.length)}}class Yn{constructor(){}static applyMaskPenaltyRule1(p){return Yn.applyMaskPenaltyRule1Internal(p,!0)+Yn.applyMaskPenaltyRule1Internal(p,!1)}static applyMaskPenaltyRule2(p){let _=0;const w=p.getArray(),T=p.getWidth(),M=p.getHeight();for(let R=0;R<M-1;R++){const V=w[R];for(let G=0;G<T-1;G++){const q=V[G];q===V[G+1]&&q===w[R+1][G]&&q===w[R+1][G+1]&&_++}}return Yn.N2*_}static applyMaskPenaltyRule3(p){let _=0;const w=p.getArray(),T=p.getWidth(),M=p.getHeight();for(let R=0;R<M;R++)for(let V=0;V<T;V++){const G=w[R];V+6<T&&G[V]===1&&G[V+1]===0&&G[V+2]===1&&G[V+3]===1&&G[V+4]===1&&G[V+5]===0&&G[V+6]===1&&(Yn.isWhiteHorizontal(G,V-4,V)||Yn.isWhiteHorizontal(G,V+7,V+11))&&_++,R+6<M&&w[R][V]===1&&w[R+1][V]===0&&w[R+2][V]===1&&w[R+3][V]===1&&w[R+4][V]===1&&w[R+5][V]===0&&w[R+6][V]===1&&(Yn.isWhiteVertical(w,V,R-4,R)||Yn.isWhiteVertical(w,V,R+7,R+11))&&_++}return _*Yn.N3}static isWhiteHorizontal(p,_,w){_=Math.max(_,0),w=Math.min(w,p.length);for(let T=_;T<w;T++)if(p[T]===1)return!1;return!0}static isWhiteVertical(p,_,w,T){w=Math.max(w,0),T=Math.min(T,p.length);for(let M=w;M<T;M++)if(p[M][_]===1)return!1;return!0}static applyMaskPenaltyRule4(p){let _=0;const w=p.getArray(),T=p.getWidth(),M=p.getHeight();for(let G=0;G<M;G++){const q=w[G];for(let oe=0;oe<T;oe++)q[oe]===1&&_++}const R=p.getHeight()*p.getWidth();return Math.floor(Math.abs(_*2-R)*10/R)*Yn.N4}static getDataMaskBit(p,_,w){let T,M;switch(p){case 0:T=w+_&1;break;case 1:T=w&1;break;case 2:T=_%3;break;case 3:T=(w+_)%3;break;case 4:T=Math.floor(w/2)+Math.floor(_/3)&1;break;case 5:M=w*_,T=(M&1)+M%3;break;case 6:M=w*_,T=(M&1)+M%3&1;break;case 7:M=w*_,T=M%3+(w+_&1)&1;break;default:throw new v("Invalid mask pattern: "+p)}return T===0}static applyMaskPenaltyRule1Internal(p,_){let w=0;const T=_?p.getHeight():p.getWidth(),M=_?p.getWidth():p.getHeight(),R=p.getArray();for(let V=0;V<T;V++){let G=0,q=-1;for(let oe=0;oe<M;oe++){const me=_?R[V][oe]:R[oe][V];me===q?G++:(G>=5&&(w+=Yn.N1+(G-5)),G=1,q=me)}G>=5&&(w+=Yn.N1+(G-5))}return w}}Yn.N1=3,Yn.N2=3,Yn.N3=40,Yn.N4=10;class qn{constructor(p,_){this.width=p,this.height=_;const w=new Array(_);for(let T=0;T!==_;T++)w[T]=new Uint8Array(p);this.bytes=w}getHeight(){return this.height}getWidth(){return this.width}get(p,_){return this.bytes[_][p]}getArray(){return this.bytes}setNumber(p,_,w){this.bytes[_][p]=w}setBoolean(p,_,w){this.bytes[_][p]=w?1:0}clear(p){for(const _ of this.bytes)X.fill(_,p)}equals(p){if(!(p instanceof qn))return!1;const _=p;if(this.width!==_.width||this.height!==_.height)return!1;for(let w=0,T=this.height;w<T;++w){const M=this.bytes[w],R=_.bytes[w];for(let V=0,G=this.width;V<G;++V)if(M[V]!==R[V])return!1}return!0}toString(){const p=new $e;for(let _=0,w=this.height;_<w;++_){const T=this.bytes[_];for(let M=0,R=this.width;M<R;++M)switch(T[M]){case 0:p.append(" 0");break;case 1:p.append(" 1");break;default:p.append("  ");break}p.append(`
`)}return p.toString()}}class jo{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const p=new $e;return p.append(`<<
`),p.append(" mode: "),p.append(this.mode?this.mode.toString():"null"),p.append(`
 ecLevel: `),p.append(this.ecLevel?this.ecLevel.toString():"null"),p.append(`
 version: `),p.append(this.version?this.version.toString():"null"),p.append(`
 maskPattern: `),p.append(this.maskPattern.toString()),this.matrix?(p.append(`
 matrix:
`),p.append(this.matrix.toString())):p.append(`
 matrix: null
`),p.append(`>>
`),p.toString()}setMode(p){this.mode=p}setECLevel(p){this.ecLevel=p}setVersion(p){this.version=p}setMaskPattern(p){this.maskPattern=p}setMatrix(p){this.matrix=p}static isValidMaskPattern(p){return p>=0&&p<jo.NUM_MASK_PATTERNS}}jo.NUM_MASK_PATTERNS=8;class On extends g{}On.kind="WriterException";class Ri{constructor(){}static clearMatrix(p){p.clear(255)}static buildMatrix(p,_,w,T,M){Ri.clearMatrix(M),Ri.embedBasicPatterns(w,M),Ri.embedTypeInfo(_,T,M),Ri.maybeEmbedVersionInfo(w,M),Ri.embedDataBits(p,T,M)}static embedBasicPatterns(p,_){Ri.embedPositionDetectionPatternsAndSeparators(_),Ri.embedDarkDotAtLeftBottomCorner(_),Ri.maybeEmbedPositionAdjustmentPatterns(p,_),Ri.embedTimingPatterns(_)}static embedTypeInfo(p,_,w){const T=new ie;Ri.makeTypeInfoBits(p,_,T);for(let M=0,R=T.getSize();M<R;++M){const V=T.get(T.getSize()-1-M),G=Ri.TYPE_INFO_COORDINATES[M],q=G[0],oe=G[1];if(w.setBoolean(q,oe,V),M<8){const me=w.getWidth()-M-1;w.setBoolean(me,8,V)}else{const we=w.getHeight()-7+(M-8);w.setBoolean(8,we,V)}}}static maybeEmbedVersionInfo(p,_){if(p.getVersionNumber()<7)return;const w=new ie;Ri.makeVersionInfoBits(p,w);let T=17;for(let M=0;M<6;++M)for(let R=0;R<3;++R){const V=w.get(T);T--,_.setBoolean(M,_.getHeight()-11+R,V),_.setBoolean(_.getHeight()-11+R,M,V)}}static embedDataBits(p,_,w){let T=0,M=-1,R=w.getWidth()-1,V=w.getHeight()-1;for(;R>0;){for(R===6&&(R-=1);V>=0&&V<w.getHeight();){for(let G=0;G<2;++G){const q=R-G;if(!Ri.isEmpty(w.get(q,V)))continue;let oe;T<p.getSize()?(oe=p.get(T),++T):oe=!1,_!==255&&Yn.getDataMaskBit(_,q,V)&&(oe=!oe),w.setBoolean(q,V,oe)}V+=M}M=-M,V+=M,R-=2}if(T!==p.getSize())throw new On("Not all bits consumed: "+T+"/"+p.getSize())}static findMSBSet(p){return 32-K.numberOfLeadingZeros(p)}static calculateBCHCode(p,_){if(_===0)throw new v("0 polynomial");const w=Ri.findMSBSet(_);for(p<<=w-1;Ri.findMSBSet(p)>=w;)p^=_<<Ri.findMSBSet(p)-w;return p}static makeTypeInfoBits(p,_,w){if(!jo.isValidMaskPattern(_))throw new On("Invalid mask pattern");const T=p.getBits()<<3|_;w.appendBits(T,5);const M=Ri.calculateBCHCode(T,Ri.TYPE_INFO_POLY);w.appendBits(M,10);const R=new ie;if(R.appendBits(Ri.TYPE_INFO_MASK_PATTERN,15),w.xor(R),w.getSize()!==15)throw new On("should not happen but we got: "+w.getSize())}static makeVersionInfoBits(p,_){_.appendBits(p.getVersionNumber(),6);const w=Ri.calculateBCHCode(p.getVersionNumber(),Ri.VERSION_INFO_POLY);if(_.appendBits(w,12),_.getSize()!==18)throw new On("should not happen but we got: "+_.getSize())}static isEmpty(p){return p===255}static embedTimingPatterns(p){for(let _=8;_<p.getWidth()-8;++_){const w=(_+1)%2;Ri.isEmpty(p.get(_,6))&&p.setNumber(_,6,w),Ri.isEmpty(p.get(6,_))&&p.setNumber(6,_,w)}}static embedDarkDotAtLeftBottomCorner(p){if(p.get(8,p.getHeight()-8)===0)throw new On;p.setNumber(8,p.getHeight()-8,1)}static embedHorizontalSeparationPattern(p,_,w){for(let T=0;T<8;++T){if(!Ri.isEmpty(w.get(p+T,_)))throw new On;w.setNumber(p+T,_,0)}}static embedVerticalSeparationPattern(p,_,w){for(let T=0;T<7;++T){if(!Ri.isEmpty(w.get(p,_+T)))throw new On;w.setNumber(p,_+T,0)}}static embedPositionAdjustmentPattern(p,_,w){for(let T=0;T<5;++T){const M=Ri.POSITION_ADJUSTMENT_PATTERN[T];for(let R=0;R<5;++R)w.setNumber(p+R,_+T,M[R])}}static embedPositionDetectionPattern(p,_,w){for(let T=0;T<7;++T){const M=Ri.POSITION_DETECTION_PATTERN[T];for(let R=0;R<7;++R)w.setNumber(p+R,_+T,M[R])}}static embedPositionDetectionPatternsAndSeparators(p){const _=Ri.POSITION_DETECTION_PATTERN[0].length;Ri.embedPositionDetectionPattern(0,0,p),Ri.embedPositionDetectionPattern(p.getWidth()-_,0,p),Ri.embedPositionDetectionPattern(0,p.getWidth()-_,p);const w=8;Ri.embedHorizontalSeparationPattern(0,w-1,p),Ri.embedHorizontalSeparationPattern(p.getWidth()-w,w-1,p),Ri.embedHorizontalSeparationPattern(0,p.getWidth()-w,p);const T=7;Ri.embedVerticalSeparationPattern(T,0,p),Ri.embedVerticalSeparationPattern(p.getHeight()-T-1,0,p),Ri.embedVerticalSeparationPattern(T,p.getHeight()-T,p)}static maybeEmbedPositionAdjustmentPatterns(p,_){if(p.getVersionNumber()<2)return;const w=p.getVersionNumber()-1,T=Ri.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[w];for(let M=0,R=T.length;M!==R;M++){const V=T[M];if(V>=0)for(let G=0;G!==R;G++){const q=T[G];q>=0&&Ri.isEmpty(_.get(q,V))&&Ri.embedPositionAdjustmentPattern(q-2,V-2,_)}}}}Ri.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ri.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ri.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ri.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ri.VERSION_INFO_POLY=7973,Ri.TYPE_INFO_POLY=1335,Ri.TYPE_INFO_MASK_PATTERN=21522;class sp{constructor(p,_){this.dataBytes=p,this.errorCorrectionBytes=_}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class En{constructor(){}static calculateMaskPenalty(p){return Yn.applyMaskPenaltyRule1(p)+Yn.applyMaskPenaltyRule2(p)+Yn.applyMaskPenaltyRule3(p)+Yn.applyMaskPenaltyRule4(p)}static encode(p,_,w=null){let T=En.DEFAULT_BYTE_MODE_ENCODING;const M=w!==null&&w.get(na.CHARACTER_SET)!==void 0;M&&(T=w.get(na.CHARACTER_SET).toString());const R=this.chooseMode(p,T),V=new ie;if(R===Ei.BYTE&&(M||En.DEFAULT_BYTE_MODE_ENCODING!==T)){const Wt=de.getCharacterSetECIByName(T);Wt!==void 0&&this.appendECI(Wt,V)}this.appendModeInfo(R,V);const G=new ie;this.appendBytes(p,R,G,T);let q;if(w!==null&&w.get(na.QR_VERSION)!==void 0){const Wt=Number.parseInt(w.get(na.QR_VERSION).toString(),10);q=ki.getVersionForNumber(Wt);const Ft=this.calculateBitsNeeded(R,V,G,q);if(!this.willFit(Ft,q,_))throw new On("Data too big for requested version")}else q=this.recommendVersion(_,R,V,G);const oe=new ie;oe.appendBitArray(V);const me=R===Ei.BYTE?G.getSizeInBytes():p.length;this.appendLengthInfo(me,q,R,oe),oe.appendBitArray(G);const we=q.getECBlocksForLevel(_),Re=q.getTotalCodewords()-we.getTotalECCodewords();this.terminateBits(Re,oe);const Ye=this.interleaveWithECBytes(oe,q.getTotalCodewords(),Re,we.getNumBlocks()),Ze=new jo;Ze.setECLevel(_),Ze.setMode(R),Ze.setVersion(q);const ct=q.getDimensionForVersion(),yt=new qn(ct,ct),Ht=this.chooseMaskPattern(Ye,_,q,yt);return Ze.setMaskPattern(Ht),Ri.buildMatrix(Ye,_,q,Ht,yt),Ze.setMatrix(yt),Ze}static recommendVersion(p,_,w,T){const M=this.calculateBitsNeeded(_,w,T,ki.getVersionForNumber(1)),R=this.chooseVersion(M,p),V=this.calculateBitsNeeded(_,w,T,R);return this.chooseVersion(V,p)}static calculateBitsNeeded(p,_,w,T){return _.getSize()+p.getCharacterCountBits(T)+w.getSize()}static getAlphanumericCode(p){return p<En.ALPHANUMERIC_TABLE.length?En.ALPHANUMERIC_TABLE[p]:-1}static chooseMode(p,_=null){if(de.SJIS.getName()===_&&this.isOnlyDoubleByteKanji(p))return Ei.KANJI;let w=!1,T=!1;for(let M=0,R=p.length;M<R;++M){const V=p.charAt(M);if(En.isDigit(V))w=!0;else if(this.getAlphanumericCode(V.charCodeAt(0))!==-1)T=!0;else return Ei.BYTE}return T?Ei.ALPHANUMERIC:w?Ei.NUMERIC:Ei.BYTE}static isOnlyDoubleByteKanji(p){let _;try{_=De.encode(p,de.SJIS)}catch{return!1}const w=_.length;if(w%2!==0)return!1;for(let T=0;T<w;T+=2){const M=_[T]&255;if((M<129||M>159)&&(M<224||M>235))return!1}return!0}static chooseMaskPattern(p,_,w,T){let M=Number.MAX_SAFE_INTEGER,R=-1;for(let V=0;V<jo.NUM_MASK_PATTERNS;V++){Ri.buildMatrix(p,_,w,V,T);let G=this.calculateMaskPenalty(T);G<M&&(M=G,R=V)}return R}static chooseVersion(p,_){for(let w=1;w<=40;w++){const T=ki.getVersionForNumber(w);if(En.willFit(p,T,_))return T}throw new On("Data too big")}static willFit(p,_,w){const T=_.getTotalCodewords(),R=_.getECBlocksForLevel(w).getTotalECCodewords(),V=T-R,G=(p+7)/8;return V>=G}static terminateBits(p,_){const w=p*8;if(_.getSize()>w)throw new On("data bits cannot fit in the QR Code"+_.getSize()+" > "+w);for(let R=0;R<4&&_.getSize()<w;++R)_.appendBit(!1);const T=_.getSize()&7;if(T>0)for(let R=T;R<8;R++)_.appendBit(!1);const M=p-_.getSizeInBytes();for(let R=0;R<M;++R)_.appendBits((R&1)===0?236:17,8);if(_.getSize()!==w)throw new On("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(p,_,w,T,M,R){if(T>=w)throw new On("Block ID too large");const V=p%w,G=w-V,q=Math.floor(p/w),oe=q+1,me=Math.floor(_/w),we=me+1,Re=q-me,Ye=oe-we;if(Re!==Ye)throw new On("EC bytes mismatch");if(w!==G+V)throw new On("RS blocks mismatch");if(p!==(me+Re)*G+(we+Ye)*V)throw new On("Total bytes mismatch");T<G?(M[0]=me,R[0]=Re):(M[0]=we,R[0]=Ye)}static interleaveWithECBytes(p,_,w,T){if(p.getSizeInBytes()!==w)throw new On("Number of bits and data bytes does not match");let M=0,R=0,V=0;const G=new Array;for(let oe=0;oe<T;++oe){const me=new Int32Array(1),we=new Int32Array(1);En.getNumDataBytesAndNumECBytesForBlockID(_,w,T,oe,me,we);const Re=me[0],Ye=new Uint8Array(Re);p.toBytes(8*M,Ye,0,Re);const Ze=En.generateECBytes(Ye,we[0]);G.push(new sp(Ye,Ze)),R=Math.max(R,Re),V=Math.max(V,Ze.length),M+=me[0]}if(w!==M)throw new On("Data bytes does not match offset");const q=new ie;for(let oe=0;oe<R;++oe)for(const me of G){const we=me.getDataBytes();oe<we.length&&q.appendBits(we[oe],8)}for(let oe=0;oe<V;++oe)for(const me of G){const we=me.getErrorCorrectionBytes();oe<we.length&&q.appendBits(we[oe],8)}if(_!==q.getSizeInBytes())throw new On("Interleaving error: "+_+" and "+q.getSizeInBytes()+" differ.");return q}static generateECBytes(p,_){const w=p.length,T=new Int32Array(w+_);for(let R=0;R<w;R++)T[R]=p[R]&255;new Kl(qt.QR_CODE_FIELD_256).encode(T,_);const M=new Uint8Array(_);for(let R=0;R<_;R++)M[R]=T[w+R];return M}static appendModeInfo(p,_){_.appendBits(p.getBits(),4)}static appendLengthInfo(p,_,w,T){const M=w.getCharacterCountBits(_);if(p>=1<<M)throw new On(p+" is bigger than "+((1<<M)-1));T.appendBits(p,M)}static appendBytes(p,_,w,T){switch(_){case Ei.NUMERIC:En.appendNumericBytes(p,w);break;case Ei.ALPHANUMERIC:En.appendAlphanumericBytes(p,w);break;case Ei.BYTE:En.append8BitBytes(p,w,T);break;case Ei.KANJI:En.appendKanjiBytes(p,w);break;default:throw new On("Invalid mode: "+_)}}static getDigit(p){return p.charCodeAt(0)-48}static isDigit(p){const _=En.getDigit(p);return _>=0&&_<=9}static appendNumericBytes(p,_){const w=p.length;let T=0;for(;T<w;){const M=En.getDigit(p.charAt(T));if(T+2<w){const R=En.getDigit(p.charAt(T+1)),V=En.getDigit(p.charAt(T+2));_.appendBits(M*100+R*10+V,10),T+=3}else if(T+1<w){const R=En.getDigit(p.charAt(T+1));_.appendBits(M*10+R,7),T+=2}else _.appendBits(M,4),T++}}static appendAlphanumericBytes(p,_){const w=p.length;let T=0;for(;T<w;){const M=En.getAlphanumericCode(p.charCodeAt(T));if(M===-1)throw new On;if(T+1<w){const R=En.getAlphanumericCode(p.charCodeAt(T+1));if(R===-1)throw new On;_.appendBits(M*45+R,11),T+=2}else _.appendBits(M,6),T++}}static append8BitBytes(p,_,w){let T;try{T=De.encode(p,w)}catch(M){throw new On(M)}for(let M=0,R=T.length;M!==R;M++){const V=T[M];_.appendBits(V,8)}}static appendKanjiBytes(p,_){let w;try{w=De.encode(p,de.SJIS)}catch(M){throw new On(M)}const T=w.length;for(let M=0;M<T;M+=2){const R=w[M]&255,V=w[M+1]&255,G=R<<8&4294967295|V;let q=-1;if(G>=33088&&G<=40956?q=G-33088:G>=57408&&G<=60351&&(q=G-49472),q===-1)throw new On("Invalid byte sequence");const oe=(q>>8)*192+(q&255);_.appendBits(oe,13)}}static appendECI(p,_){_.appendBits(Ei.ECI.getBits(),4),_.appendBits(p.getValue(),8)}}En.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),En.DEFAULT_BYTE_MODE_ENCODING=de.UTF8.getName();class Xs{write(p,_,w,T=null){if(p.length===0)throw new v("Found empty contents");if(_<0||w<0)throw new v("Requested dimensions are too small: "+_+"x"+w);let M=Dn.L,R=Xs.QUIET_ZONE_SIZE;T!==null&&(T.get(na.ERROR_CORRECTION)!==void 0&&(M=Dn.fromString(T.get(na.ERROR_CORRECTION).toString())),T.get(na.MARGIN)!==void 0&&(R=Number.parseInt(T.get(na.MARGIN).toString(),10)));const V=En.encode(p,M,T);return this.renderResult(V,_,w,R)}writeToDom(p,_,w,T,M=null){typeof p=="string"&&(p=document.querySelector(p));const R=this.write(_,w,T,M);p&&p.appendChild(R)}renderResult(p,_,w,T){const M=p.getMatrix();if(M===null)throw new tn;const R=M.getWidth(),V=M.getHeight(),G=R+T*2,q=V+T*2,oe=Math.max(_,G),me=Math.max(w,q),we=Math.min(Math.floor(oe/G),Math.floor(me/q)),Re=Math.floor((oe-R*we)/2),Ye=Math.floor((me-V*we)/2),Ze=this.createSVGElement(oe,me);for(let ct=0,yt=Ye;ct<V;ct++,yt+=we)for(let Ht=0,Wt=Re;Ht<R;Ht++,Wt+=we)if(M.get(Ht,ct)===1){const Ft=this.createSvgRectElement(Wt,yt,we,we);Ze.appendChild(Ft)}return Ze}createSVGElement(p,_){const w=document.createElementNS(Xs.SVG_NS,"svg");return w.setAttributeNS(null,"height",p.toString()),w.setAttributeNS(null,"width",_.toString()),w}createSvgRectElement(p,_,w,T){const M=document.createElementNS(Xs.SVG_NS,"rect");return M.setAttributeNS(null,"x",p.toString()),M.setAttributeNS(null,"y",_.toString()),M.setAttributeNS(null,"height",w.toString()),M.setAttributeNS(null,"width",T.toString()),M.setAttributeNS(null,"fill","#000000"),M}}Xs.QUIET_ZONE_SIZE=4,Xs.SVG_NS="http://www.w3.org/2000/svg";class Es{encode(p,_,w,T,M){if(p.length===0)throw new v("Found empty contents");if(_!==Ct.QR_CODE)throw new v("Can only encode QR_CODE, but got "+_);if(w<0||T<0)throw new v(`Requested dimensions are too small: ${w}x${T}`);let R=Dn.L,V=Es.QUIET_ZONE_SIZE;M!==null&&(M.get(na.ERROR_CORRECTION)!==void 0&&(R=Dn.fromString(M.get(na.ERROR_CORRECTION).toString())),M.get(na.MARGIN)!==void 0&&(V=Number.parseInt(M.get(na.MARGIN).toString(),10)));const G=En.encode(p,R,M);return Es.renderResult(G,w,T,V)}static renderResult(p,_,w,T){const M=p.getMatrix();if(M===null)throw new tn;const R=M.getWidth(),V=M.getHeight(),G=R+T*2,q=V+T*2,oe=Math.max(_,G),me=Math.max(w,q),we=Math.min(Math.floor(oe/G),Math.floor(me/q)),Re=Math.floor((oe-R*we)/2),Ye=Math.floor((me-V*we)/2),Ze=new et(oe,me);for(let ct=0,yt=Ye;ct<V;ct++,yt+=we)for(let Ht=0,Wt=Re;Ht<R;Ht++,Wt+=we)M.get(Ht,ct)===1&&Ze.setRegion(Wt,yt,we,we);return Ze}}Es.QUIET_ZONE_SIZE=4;class Bh{encode(p,_,w,T,M){let R;switch(_){case Ct.QR_CODE:R=new Es;break;default:throw new v("No encoder available for format "+_)}return R.encode(p,_,w,T,M)}}class Wr extends kt{constructor(p,_,w,T,M,R,V,G){if(super(R,V),this.yuvData=p,this.dataWidth=_,this.dataHeight=w,this.left=T,this.top=M,T+R>_||M+V>w)throw new v("Crop rectangle does not fit within image data.");G&&this.reverseHorizontal(R,V)}getRow(p,_){if(p<0||p>=this.getHeight())throw new v("Requested row is outside the image: "+p);const w=this.getWidth();(_==null||_.length<w)&&(_=new Uint8ClampedArray(w));const T=(p+this.top)*this.dataWidth+this.left;return O.arraycopy(this.yuvData,T,_,0,w),_}getMatrix(){const p=this.getWidth(),_=this.getHeight();if(p===this.dataWidth&&_===this.dataHeight)return this.yuvData;const w=p*_,T=new Uint8ClampedArray(w);let M=this.top*this.dataWidth+this.left;if(p===this.dataWidth)return O.arraycopy(this.yuvData,M,T,0,w),T;for(let R=0;R<_;R++){const V=R*p;O.arraycopy(this.yuvData,M,T,V,p),M+=this.dataWidth}return T}isCropSupported(){return!0}crop(p,_,w,T){return new Wr(this.yuvData,this.dataWidth,this.dataHeight,this.left+p,this.top+_,w,T,!1)}renderThumbnail(){const p=this.getWidth()/Wr.THUMBNAIL_SCALE_FACTOR,_=this.getHeight()/Wr.THUMBNAIL_SCALE_FACTOR,w=new Int32Array(p*_),T=this.yuvData;let M=this.top*this.dataWidth+this.left;for(let R=0;R<_;R++){const V=R*p;for(let G=0;G<p;G++){const q=T[M+G*Wr.THUMBNAIL_SCALE_FACTOR]&255;w[V+G]=4278190080|q*65793}M+=this.dataWidth*Wr.THUMBNAIL_SCALE_FACTOR}return w}getThumbnailWidth(){return this.getWidth()/Wr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Wr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(p,_){const w=this.yuvData;for(let T=0,M=this.top*this.dataWidth+this.left;T<_;T++,M+=this.dataWidth){const R=M+p/2;for(let V=M,G=M+p-1;V<R;V++,G--){const q=w[V];w[V]=w[G],w[G]=q}}}invert(){return new vt(this)}}Wr.THUMBNAIL_SCALE_FACTOR=2;class Vo extends kt{constructor(p,_,w,T,M,R,V){if(super(_,w),this.dataWidth=T,this.dataHeight=M,this.left=R,this.top=V,p.BYTES_PER_ELEMENT===4){const G=_*w,q=new Uint8ClampedArray(G);for(let oe=0;oe<G;oe++){const me=p[oe],we=me>>16&255,Re=me>>7&510,Ye=me&255;q[oe]=(we+Re+Ye)/4&255}this.luminances=q}else this.luminances=p;if(T===void 0&&(this.dataWidth=_),M===void 0&&(this.dataHeight=w),R===void 0&&(this.left=0),V===void 0&&(this.top=0),this.left+_>this.dataWidth||this.top+w>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(p,_){if(p<0||p>=this.getHeight())throw new v("Requested row is outside the image: "+p);const w=this.getWidth();(_==null||_.length<w)&&(_=new Uint8ClampedArray(w));const T=(p+this.top)*this.dataWidth+this.left;return O.arraycopy(this.luminances,T,_,0,w),_}getMatrix(){const p=this.getWidth(),_=this.getHeight();if(p===this.dataWidth&&_===this.dataHeight)return this.luminances;const w=p*_,T=new Uint8ClampedArray(w);let M=this.top*this.dataWidth+this.left;if(p===this.dataWidth)return O.arraycopy(this.luminances,M,T,0,w),T;for(let R=0;R<_;R++){const V=R*p;O.arraycopy(this.luminances,M,T,V,p),M+=this.dataWidth}return T}isCropSupported(){return!0}crop(p,_,w,T){return new Vo(this.luminances,w,T,this.dataWidth,this.dataHeight,this.left+p,this.top+_)}invert(){return new vt(this)}}class rl extends de{static forName(p){return this.getCharacterSetECIByName(p)}}class wa{}wa.ISO_8859_1=de.ISO8859_1;class Nh{isCompact(){return this.compact}setCompact(p){this.compact=p}getSize(){return this.size}setSize(p){this.size=p}getLayers(){return this.layers}setLayers(p){this.layers=p}getCodeWords(){return this.codeWords}setCodeWords(p){this.codeWords=p}getMatrix(){return this.matrix}setMatrix(p){this.matrix=p}}class sl{static singletonList(p){return[p]}static min(p,_){return p.sort(_)[0]}}class Ql{constructor(p){this.previous=p}getPrevious(){return this.previous}}class ds extends Ql{constructor(p,_,w){super(p),this.value=_,this.bitCount=w}appendTo(p,_){p.appendBits(this.value,this.bitCount)}add(p,_){return new ds(this,p,_)}addBinaryShift(p,_){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ds(this,p,_)}toString(){let p=this.value&(1<<this.bitCount)-1;return p|=1<<this.bitCount,"<"+K.toBinaryString(p|1<<this.bitCount).substring(1)+">"}}class jh extends ds{constructor(p,_,w){super(p,0,0),this.binaryShiftStart=_,this.binaryShiftByteCount=w}appendTo(p,_){for(let w=0;w<this.binaryShiftByteCount;w++)(w===0||w===31&&this.binaryShiftByteCount<=62)&&(p.appendBits(31,5),this.binaryShiftByteCount>62?p.appendBits(this.binaryShiftByteCount-31,16):w===0?p.appendBits(Math.min(this.binaryShiftByteCount,31),5):p.appendBits(this.binaryShiftByteCount-31,5)),p.appendBits(_[this.binaryShiftStart+w],8)}addBinaryShift(p,_){return new jh(this,p,_)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jc(ge,p,_){return new jh(ge,p,_)}function Jl(ge,p,_){return new ds(ge,p,_)}const Ml=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ms=0,ec=1,ns=2,Vc=3,fs=4,Vh=new ds(null,0,0),Hc=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function vd(ge){for(let p of ge)X.fill(p,-1);return ge[Ms][fs]=0,ge[ec][fs]=0,ge[ec][Ms]=28,ge[Vc][fs]=0,ge[ns][fs]=0,ge[ns][Ms]=15,ge}const Hh=vd(X.createInt32Array(6,6));class wr{constructor(p,_,w,T){this.token=p,this.mode=_,this.binaryShiftByteCount=w,this.bitCount=T}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(p,_){let w=this.bitCount,T=this.token;if(p!==this.mode){let R=Hc[this.mode][p];T=Jl(T,R&65535,R>>16),w+=R>>16}let M=p===ns?4:5;return T=Jl(T,_,M),new wr(T,p,0,w+M)}shiftAndAppend(p,_){let w=this.token,T=this.mode===ns?4:5;return w=Jl(w,Hh[this.mode][p],T),w=Jl(w,_,5),new wr(w,this.mode,0,this.bitCount+T+5)}addBinaryShiftChar(p){let _=this.token,w=this.mode,T=this.bitCount;if(this.mode===fs||this.mode===ns){let V=Hc[w][Ms];_=Jl(_,V&65535,V>>16),T+=V>>16,w=Ms}let M=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,R=new wr(_,w,this.binaryShiftByteCount+1,T+M);return R.binaryShiftByteCount===2078&&(R=R.endBinaryShift(p+1)),R}endBinaryShift(p){if(this.binaryShiftByteCount===0)return this;let _=this.token;return _=jc(_,p-this.binaryShiftByteCount,this.binaryShiftByteCount),new wr(_,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(p){let _=this.bitCount+(Hc[this.mode][p.mode]>>16);return this.binaryShiftByteCount<p.binaryShiftByteCount?_+=wr.calculateBinaryShiftCost(p)-wr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>p.binaryShiftByteCount&&p.binaryShiftByteCount>0&&(_+=10),_<=p.bitCount}toBitArray(p){let _=[];for(let T=this.endBinaryShift(p.length).token;T!==null;T=T.getPrevious())_.unshift(T);let w=new ie;for(const T of _)T.appendTo(w,p);return w}toString(){return Ae.format("%s bits=%d bytes=%d",Ml[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(p){return p.binaryShiftByteCount>62?21:p.binaryShiftByteCount>31?20:p.binaryShiftByteCount>0?10:0}}wr.INITIAL_STATE=new wr(Vh,Ms,0,0);function bd(ge){const p=Ae.getCharCode(" "),_=Ae.getCharCode("."),w=Ae.getCharCode(",");ge[Ms][p]=1;const T=Ae.getCharCode("Z"),M=Ae.getCharCode("A");for(let we=M;we<=T;we++)ge[Ms][we]=we-M+2;ge[ec][p]=1;const R=Ae.getCharCode("z"),V=Ae.getCharCode("a");for(let we=V;we<=R;we++)ge[ec][we]=we-V+2;ge[ns][p]=1;const G=Ae.getCharCode("9"),q=Ae.getCharCode("0");for(let we=q;we<=G;we++)ge[ns][we]=we-q+2;ge[ns][w]=12,ge[ns][_]=13;const oe=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let we=0;we<oe.length;we++)ge[Vc][Ae.getCharCode(oe[we])]=we;const me=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let we=0;we<me.length;we++)Ae.getCharCode(me[we])>0&&(ge[fs][Ae.getCharCode(me[we])]=we);return ge}const tc=bd(X.createInt32Array(5,256));class Ys{constructor(p){this.text=p}encode(){const p=Ae.getCharCode(" "),_=Ae.getCharCode(`
`);let w=sl.singletonList(wr.INITIAL_STATE);for(let M=0;M<this.text.length;M++){let R,V=M+1<this.text.length?this.text[M+1]:0;switch(this.text[M]){case Ae.getCharCode("\r"):R=V===_?2:0;break;case Ae.getCharCode("."):R=V===p?3:0;break;case Ae.getCharCode(","):R=V===p?4:0;break;case Ae.getCharCode(":"):R=V===p?5:0;break;default:R=0}R>0?(w=Ys.updateStateListForPair(w,M,R),M++):w=this.updateStateListForChar(w,M)}return sl.min(w,(M,R)=>M.getBitCount()-R.getBitCount()).toBitArray(this.text)}updateStateListForChar(p,_){const w=[];for(let T of p)this.updateStateForChar(T,_,w);return Ys.simplifyStates(w)}updateStateForChar(p,_,w){let T=this.text[_]&255,M=tc[p.getMode()][T]>0,R=null;for(let V=0;V<=fs;V++){let G=tc[V][T];if(G>0){if(R==null&&(R=p.endBinaryShift(_)),!M||V===p.getMode()||V===ns){const q=R.latchAndAppend(V,G);w.push(q)}if(!M&&Hh[p.getMode()][V]>=0){const q=R.shiftAndAppend(V,G);w.push(q)}}}if(p.getBinaryShiftByteCount()>0||tc[p.getMode()][T]===0){let V=p.addBinaryShiftChar(_);w.push(V)}}static updateStateListForPair(p,_,w){const T=[];for(let M of p)this.updateStateForPair(M,_,w,T);return this.simplifyStates(T)}static updateStateForPair(p,_,w,T){let M=p.endBinaryShift(_);if(T.push(M.latchAndAppend(fs,w)),p.getMode()!==fs&&T.push(M.shiftAndAppend(fs,w)),w===3||w===4){let R=M.latchAndAppend(ns,16-w).latchAndAppend(ns,1);T.push(R)}if(p.getBinaryShiftByteCount()>0){let R=p.addBinaryShiftChar(_).addBinaryShiftChar(_+1);T.push(R)}}static simplifyStates(p){let _=[];for(const w of p){let T=!0;for(const M of _){if(M.isBetterThanOrEqualTo(w)){T=!1;break}w.isBetterThanOrEqualTo(M)&&(_=_.filter(R=>R!==M))}T&&_.push(w)}return _}}class gn{constructor(){}static encodeBytes(p){return gn.encode(p,gn.DEFAULT_EC_PERCENT,gn.DEFAULT_AZTEC_LAYERS)}static encode(p,_,w){let T=new Ys(p).encode(),M=K.truncDivision(T.getSize()*_,100)+11,R=T.getSize()+M,V,G,q,oe,me;if(w!==gn.DEFAULT_AZTEC_LAYERS){if(V=w<0,G=Math.abs(w),G>(V?gn.MAX_NB_BITS_COMPACT:gn.MAX_NB_BITS))throw new v(Ae.format("Illegal value %s for layers",w));q=gn.totalBitsInLayer(G,V),oe=gn.WORD_SIZE[G];let Ft=q-q%oe;if(me=gn.stuffBits(T,oe),me.getSize()+M>Ft)throw new v("Data to large for user specified layer");if(V&&me.getSize()>oe*64)throw new v("Data to large for user specified layer")}else{oe=0,me=null;for(let Ft=0;;Ft++){if(Ft>gn.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(V=Ft<=3,G=V?Ft+1:Ft,q=gn.totalBitsInLayer(G,V),R>q)continue;(me==null||oe!==gn.WORD_SIZE[G])&&(oe=gn.WORD_SIZE[G],me=gn.stuffBits(T,oe));let hn=q-q%oe;if(!(V&&me.getSize()>oe*64)&&me.getSize()+M<=hn)break}}let we=gn.generateCheckWords(me,q,oe),Re=me.getSize()/oe,Ye=gn.generateModeMessage(V,G,Re),Ze=(V?11:14)+G*4,ct=new Int32Array(Ze),yt;if(V){yt=Ze;for(let Ft=0;Ft<ct.length;Ft++)ct[Ft]=Ft}else{yt=Ze+1+2*K.truncDivision(K.truncDivision(Ze,2)-1,15);let Ft=K.truncDivision(Ze,2),hn=K.truncDivision(yt,2);for(let ai=0;ai<Ft;ai++){let ur=ai+K.truncDivision(ai,15);ct[Ft-ai-1]=hn-ur-1,ct[Ft+ai]=hn+ur+1}}let Ht=new et(yt);for(let Ft=0,hn=0;Ft<G;Ft++){let ai=(G-Ft)*4+(V?9:12);for(let ur=0;ur<ai;ur++){let $r=ur*2;for(let dr=0;dr<2;dr++)we.get(hn+$r+dr)&&Ht.set(ct[Ft*2+dr],ct[Ft*2+ur]),we.get(hn+ai*2+$r+dr)&&Ht.set(ct[Ft*2+ur],ct[Ze-1-Ft*2-dr]),we.get(hn+ai*4+$r+dr)&&Ht.set(ct[Ze-1-Ft*2-dr],ct[Ze-1-Ft*2-ur]),we.get(hn+ai*6+$r+dr)&&Ht.set(ct[Ze-1-Ft*2-ur],ct[Ft*2+dr])}hn+=ai*8}if(gn.drawModeMessage(Ht,V,yt,Ye),V)gn.drawBullsEye(Ht,K.truncDivision(yt,2),5);else{gn.drawBullsEye(Ht,K.truncDivision(yt,2),7);for(let Ft=0,hn=0;Ft<K.truncDivision(Ze,2)-1;Ft+=15,hn+=16)for(let ai=K.truncDivision(yt,2)&1;ai<yt;ai+=2)Ht.set(K.truncDivision(yt,2)-hn,ai),Ht.set(K.truncDivision(yt,2)+hn,ai),Ht.set(ai,K.truncDivision(yt,2)-hn),Ht.set(ai,K.truncDivision(yt,2)+hn)}let Wt=new Nh;return Wt.setCompact(V),Wt.setSize(yt),Wt.setLayers(G),Wt.setCodeWords(Re),Wt.setMatrix(Ht),Wt}static drawBullsEye(p,_,w){for(let T=0;T<w;T+=2)for(let M=_-T;M<=_+T;M++)p.set(M,_-T),p.set(M,_+T),p.set(_-T,M),p.set(_+T,M);p.set(_-w,_-w),p.set(_-w+1,_-w),p.set(_-w,_-w+1),p.set(_+w,_-w),p.set(_+w,_-w+1),p.set(_+w,_+w-1)}static generateModeMessage(p,_,w){let T=new ie;return p?(T.appendBits(_-1,2),T.appendBits(w-1,6),T=gn.generateCheckWords(T,28,4)):(T.appendBits(_-1,5),T.appendBits(w-1,11),T=gn.generateCheckWords(T,40,4)),T}static drawModeMessage(p,_,w,T){let M=K.truncDivision(w,2);if(_)for(let R=0;R<7;R++){let V=M-3+R;T.get(R)&&p.set(V,M-5),T.get(R+7)&&p.set(M+5,V),T.get(20-R)&&p.set(V,M+5),T.get(27-R)&&p.set(M-5,V)}else for(let R=0;R<10;R++){let V=M-5+R+K.truncDivision(R,5);T.get(R)&&p.set(V,M-7),T.get(R+10)&&p.set(M+7,V),T.get(29-R)&&p.set(V,M+7),T.get(39-R)&&p.set(M-7,V)}}static generateCheckWords(p,_,w){let T=p.getSize()/w,M=new Kl(gn.getGF(w)),R=K.truncDivision(_,w),V=gn.bitsToWords(p,w,R);M.encode(V,R-T);let G=_%w,q=new ie;q.appendBits(0,G);for(const oe of Array.from(V))q.appendBits(oe,w);return q}static bitsToWords(p,_,w){let T=new Int32Array(w),M,R;for(M=0,R=p.getSize()/_;M<R;M++){let V=0;for(let G=0;G<_;G++)V|=p.get(M*_+G)?1<<_-G-1:0;T[M]=V}return T}static getGF(p){switch(p){case 4:return qt.AZTEC_PARAM;case 6:return qt.AZTEC_DATA_6;case 8:return qt.AZTEC_DATA_8;case 10:return qt.AZTEC_DATA_10;case 12:return qt.AZTEC_DATA_12;default:throw new v("Unsupported word size "+p)}}static stuffBits(p,_){let w=new ie,T=p.getSize(),M=(1<<_)-2;for(let R=0;R<T;R+=_){let V=0;for(let G=0;G<_;G++)(R+G>=T||p.get(R+G))&&(V|=1<<_-1-G);(V&M)===M?(w.appendBits(V&M,_),R--):(V&M)===0?(w.appendBits(V|1,_),R--):w.appendBits(V,_)}return w}static totalBitsInLayer(p,_){return((_?88:112)+16*p)*p}}gn.DEFAULT_EC_PERCENT=33,gn.DEFAULT_AZTEC_LAYERS=0,gn.MAX_NB_BITS=32,gn.MAX_NB_BITS_COMPACT=4,gn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ol{encode(p,_,w,T){return this.encodeWithHints(p,_,w,T,null)}encodeWithHints(p,_,w,T,M){let R=wa.ISO_8859_1,V=gn.DEFAULT_EC_PERCENT,G=gn.DEFAULT_AZTEC_LAYERS;return M!=null&&(M.has(na.CHARACTER_SET)&&(R=rl.forName(M.get(na.CHARACTER_SET).toString())),M.has(na.ERROR_CORRECTION)&&(V=K.parseInt(M.get(na.ERROR_CORRECTION).toString())),M.has(na.AZTEC_LAYERS)&&(G=K.parseInt(M.get(na.AZTEC_LAYERS).toString()))),ol.encodeLayers(p,_,w,T,R,V,G)}static encodeLayers(p,_,w,T,M,R,V){if(_!==Ct.AZTEC)throw new v("Can only encode AZTEC, but got "+_);let G=gn.encode(Ae.getBytes(p,M),R,V);return ol.renderResult(G,w,T)}static renderResult(p,_,w){let T=p.getMatrix();if(T==null)throw new tn;let M=T.getWidth(),R=T.getHeight(),V=Math.max(_,M),G=Math.max(w,R),q=Math.min(V/M,G/R),oe=(V-M*q)/2,me=(G-R*q)/2,we=new et(V,G);for(let Re=0,Ye=me;Re<R;Re++,Ye+=q)for(let Ze=0,ct=oe;Ze<M;Ze++,ct+=q)T.get(Ze,Re)&&we.setRegion(ct,Ye,q,q);return we}}t.AbstractExpandedDecoder=rn,t.ArgumentException=x,t.ArithmeticException=en,t.AztecCode=Nh,t.AztecCodeReader=We,t.AztecCodeWriter=ol,t.AztecDecoder=ji,t.AztecDetector=je,t.AztecDetectorResult=vr,t.AztecEncoder=gn,t.AztecHighLevelEncoder=Ys,t.AztecPoint=be,t.BarcodeFormat=Ct,t.Binarizer=F,t.BinaryBitmap=k,t.BitArray=ie,t.BitMatrix=et,t.BitSource=Sl,t.BrowserAztecCodeReader=it,t.BrowserBarcodeReader=lr,t.BrowserCodeReader=Ai,t.BrowserDatamatrixCodeReader=_d,t.BrowserMultiFormatReader=yd,t.BrowserPDF417Reader=zr,t.BrowserQRCodeReader=$s,t.BrowserQRCodeSvgWriter=Xs,t.CharacterSetECI=de,t.ChecksumException=E,t.Code128Reader=Pe,t.Code39Reader=nt,t.DataMatrixDecodedBitStreamParser=co,t.DataMatrixReader=ho,t.DecodeHintType=le,t.DecoderResult=Pi,t.DefaultGridSampler=_e,t.DetectorResult=la,t.EAN13Reader=Oi,t.EncodeHintType=na,t.Exception=g,t.FormatException=te,t.GenericGF=qt,t.GenericGFPoly=Li,t.GlobalHistogramBinarizer=at,t.GridSampler=un,t.GridSamplerInstance=xe,t.HTMLCanvasElementLuminanceSource=He,t.HybridBinarizer=qe,t.ITFReader=mt,t.IllegalArgumentException=v,t.IllegalStateException=tn,t.InvertedLuminanceSource=vt,t.LuminanceSource=kt,t.MathUtils=Bi,t.MultiFormatOneDReader=Dr,t.MultiFormatReader=xd,t.MultiFormatWriter=Bh,t.NotFoundException=Ie,t.OneDReader=Qe,t.PDF417DecodedBitStreamParser=_t,t.PDF417DecoderErrorCorrection=al,t.PDF417Reader=Ea,t.PDF417ResultMetadata=Nc,t.PerspectiveTransform=tt,t.PlanarYUVLuminanceSource=Wr,t.QRCodeByteMatrix=qn,t.QRCodeDataMask=br,t.QRCodeDecodedBitStreamParser=Un,t.QRCodeDecoderErrorCorrectionLevel=Dn,t.QRCodeDecoderFormatInformation=Ja,t.QRCodeEncoder=En,t.QRCodeEncoderQRCode=jo,t.QRCodeMaskUtil=Yn,t.QRCodeMatrixUtil=Ri,t.QRCodeMode=Ei,t.QRCodeReader=Cn,t.QRCodeVersion=ki,t.QRCodeWriter=Es,t.RGBLuminanceSource=Vo,t.RSS14Reader=Mi,t.RSSExpandedReader=Tt,t.ReaderException=El,t.ReedSolomonDecoder=Bn,t.ReedSolomonEncoder=Kl,t.ReedSolomonException=Ti,t.Result=jt,t.ResultMetadataType=Zt,t.ResultPoint=Gt,t.StringUtils=Ae,t.UnsupportedOperationException=ke,t.VideoInputDevice=Nt,t.WhiteRectangleDetector=va,t.WriterException=On,t.ZXingArrays=X,t.ZXingCharset=rl,t.ZXingInteger=K,t.ZXingStandardCharsets=wa,t.ZXingStringBuilder=$e,t.ZXingStringEncoding=De,t.ZXingSystem=O,t.createAbstractExpandedDecoder=us,Object.defineProperty(t,"__esModule",{value:!0})}))})(Ag,Ag.exports)),Ag.exports}var La=Oj();const zj=mT(La),Fj=MR({__proto__:null,default:zj},[La]);var cT=(function(){function s(e,t,i){if(this.formatMap=new Map([[mi.QR_CODE,La.BarcodeFormat.QR_CODE],[mi.AZTEC,La.BarcodeFormat.AZTEC],[mi.CODABAR,La.BarcodeFormat.CODABAR],[mi.CODE_39,La.BarcodeFormat.CODE_39],[mi.CODE_93,La.BarcodeFormat.CODE_93],[mi.CODE_128,La.BarcodeFormat.CODE_128],[mi.DATA_MATRIX,La.BarcodeFormat.DATA_MATRIX],[mi.MAXICODE,La.BarcodeFormat.MAXICODE],[mi.ITF,La.BarcodeFormat.ITF],[mi.EAN_13,La.BarcodeFormat.EAN_13],[mi.EAN_8,La.BarcodeFormat.EAN_8],[mi.PDF_417,La.BarcodeFormat.PDF_417],[mi.RSS_14,La.BarcodeFormat.RSS_14],[mi.RSS_EXPANDED,La.BarcodeFormat.RSS_EXPANDED],[mi.UPC_A,La.BarcodeFormat.UPC_A],[mi.UPC_E,La.BarcodeFormat.UPC_E],[mi.UPC_EAN_EXTENSION,La.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Fj)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=i;var n=this.createZXingFormats(e),a=new Map;a.set(La.DecodeHintType.POSSIBLE_FORMATS,n),a.set(La.DecodeHintType.TRY_HARDER,!1),this.hints=a}return s.prototype.decodeAsync=function(e){var t=this;return new Promise(function(i,n){try{i(t.decode(e))}catch(a){n(a)}})},s.prototype.decode=function(e){var t=new La.MultiFormatReader(this.verbose,this.hints),i=new La.HTMLCanvasElementLuminanceSource(e),n=new La.BinaryBitmap(new La.HybridBinarizer(i)),a=t.decode(n);return{text:a.text,format:tL.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,i,n){e.set(t,i)}),e},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createZXingFormats=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var a=n[i];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return t},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s})(),Bj=function(s,e,t,i){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function r(x){try{g(i.next(x))}catch(v){o(v)}}function d(x){try{g(i.throw(x))}catch(v){o(v)}}function g(x){x.done?a(x.value):n(x.value).then(r,d)}g((i=i.apply(s,e||[])).next())})},Nj=function(s,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o;return o={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function r(g){return function(x){return d([g,x])}}function d(g){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,g[0]&&(t=0)),t;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,n=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(s,t)}catch(x){g=[6,x],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},hT=(function(){function s(e,t,i){if(this.formatMap=new Map([[mi.QR_CODE,"qr_code"],[mi.AZTEC,"aztec"],[mi.CODABAR,"codabar"],[mi.CODE_39,"code_39"],[mi.CODE_93,"code_93"],[mi.CODE_128,"code_128"],[mi.DATA_MATRIX,"data_matrix"],[mi.ITF,"itf"],[mi.EAN_13,"ean_13"],[mi.EAN_8,"ean_8"],[mi.PDF_417,"pdf417"],[mi.UPC_A,"upc_a"],[mi.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=i;var n=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(n),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},s.prototype.decodeAsync=function(e){return Bj(this,void 0,void 0,function(){var t,i;return Nj(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=n.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(t),[2,{text:i.rawValue,format:tL.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(e){for(var t=null,i=0,n=0,a=e;n<a.length;n++){var o=a[n],r=o.boundingBox.width*o.boundingBox.height;r>i&&(i=r,t=o)}if(!t)throw"No largest barcode found";return t},s.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var a=n[i];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,i,n){e.set(t,i)}),e},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s})(),uT=function(s,e,t,i){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function r(x){try{g(i.next(x))}catch(v){o(v)}}function d(x){try{g(i.throw(x))}catch(v){o(v)}}function g(x){x.done?a(x.value):n(x.value).then(r,d)}g((i=i.apply(s,e||[])).next())})},dT=function(s,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o;return o={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function r(g){return function(x){return d([g,x])}}function d(g){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,g[0]&&(t=0)),t;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,n=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(s,t)}catch(x){g=[6,x],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},jj=(function(){function s(e,t,i,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,t&&hT.isSupported()?(this.primaryDecoder=new hT(e,i,n),this.secondaryDecoder=new cT(e,i,n)):this.primaryDecoder=new cT(e,i,n)}return s.prototype.decodeAsync=function(e){return uT(this,void 0,void 0,function(){var t;return dT(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(e){return uT(this,void 0,void 0,function(){var t,i;return dT(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(i=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,i=this.executionResults;t<i.length;t++){var n=i[t];e+=n}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s})(),qw=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}})(),gx=function(s,e,t,i){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function r(x){try{g(i.next(x))}catch(v){o(v)}}function d(x){try{g(i.throw(x))}catch(v){o(v)}}function g(x){x.done?a(x.value):n(x.value).then(r,d)}g((i=i.apply(s,e||[])).next())})},mx=function(s,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o;return o={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function r(g){return function(x){return d([g,x])}}function d(g){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,g[0]&&(t=0)),t;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,n=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(s,t)}catch(x){g=[6,x],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},nL=(function(){function s(e,t){this.name=e,this.track=t}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(e){var t={};t[this.name]=e;var i={advanced:[t]};return this.track.applyConstraints(i)},s.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},s})(),Vj=(function(s){qw(e,s);function e(t,i){return s.call(this,t,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var i={};i[this.name]=t;var n={advanced:[i]};return this.track.applyConstraints(n)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),i=t[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(nL),Hj=(function(s){qw(e,s);function e(t){return s.call(this,"zoom",t)||this}return e})(Vj),Uj=(function(s){qw(e,s);function e(t){return s.call(this,"torch",t)||this}return e})(nL),Gj=(function(){function s(e){this.track=e}return s.prototype.zoomFeature=function(){return new Hj(this.track)},s.prototype.torchFeature=function(){return new Uj(this.track)},s})(),Wj=(function(){function s(e,t,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return s.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},s.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var i=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(e,t,i,n){return gx(this,void 0,void 0,function(){var a,o;return mx(this,function(r){switch(r.label){case 0:return a=new s(e,t,n),i.aspectRatio?(o={aspectRatio:i.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:r.sent(),r.label=2;case 2:return a.setupSurface(),[2,a]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(e){this.failIfClosed();var t=this,i=function(){setTimeout(e,200),t.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(e){return gx(this,void 0,void 0,function(){return mx(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,i){var n=e.mediaStream.getVideoTracks(),a=n.length,o=0;e.mediaStream.getVideoTracks().forEach(function(r){e.mediaStream.removeTrack(r),r.stop(),++o,o>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},s.prototype.getCapabilities=function(){return new Gj(this.getFirstTrackOrFail())},s})(),$j=(function(){function s(e){this.mediaStream=e}return s.prototype.render=function(e,t,i){return gx(this,void 0,void 0,function(){return mx(this,function(n){return[2,Wj.create(e,this.mediaStream,t,i)]})})},s.create=function(e){return gx(this,void 0,void 0,function(){var t,i;return mx(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=n.sent(),[2,new s(i)]}})})},s})(),fT=function(s,e,t,i){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function r(x){try{g(i.next(x))}catch(v){o(v)}}function d(x){try{g(i.throw(x))}catch(v){o(v)}}function g(x){x.done?a(x.value):n(x.value).then(r,d)}g((i=i.apply(s,e||[])).next())})},pT=function(s,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o;return o={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function r(g){return function(x){return d([g,x])}}function d(g){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,g[0]&&(t=0)),t;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,n=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(s,t)}catch(x){g=[6,x],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Xj=(function(){function s(){}return s.failIfNotSupported=function(){return fT(this,void 0,void 0,function(){return pT(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(e){return fT(this,void 0,void 0,function(){return pT(this,function(t){return[2,$j.create(e)]})})},s})(),Yj=function(s,e,t,i){function n(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function r(x){try{g(i.next(x))}catch(v){o(v)}}function d(x){try{g(i.throw(x))}catch(v){o(v)}}function g(x){x.done?a(x.value):n(x.value).then(r,d)}g((i=i.apply(s,e||[])).next())})},qj=function(s,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o;return o={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function r(g){return function(x){return d([g,x])}}function d(g){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,g[0]&&(t=0)),t;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,n=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(s,t)}catch(x){g=[6,x],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Zj=(function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var e=Tf.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(e=Tf.insecureContextCameraQueryError()),Promise.reject(e)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},s.getCamerasFromMediaDevices=function(){return Yj(this,void 0,void 0,function(){var e,t,i,n,a,o,r;return qj(this,function(d){switch(d.label){case 0:return e=function(g){for(var x=g.getVideoTracks(),v=0,k=x;v<k.length;v++){var E=k[v];E.enabled=!1,E.stop(),g.removeTrack(E)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=d.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=d.sent(),n=[],a=0,o=i;a<o.length;a++)r=o[a],r.kind==="videoinput"&&n.push({id:r.deviceId,label:r.label});return e(t),[2,n]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var i=function(a){for(var o=[],r=0,d=a;r<d.length;r++){var g=d[r];g.kind==="video"&&o.push({id:g.id,label:g.label})}e(o)},n=MediaStreamTrack;n.getSources(i)})},s})(),nr;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(nr||(nr={}));var Kj=(function(){function s(){this.state=nr.NOT_STARTED,this.onGoingTransactionNewState=nr.UNKNOWN}return s.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},s.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=nr.UNKNOWN,this.directTransition(e)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=nr.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==nr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(e){switch(this.state){case nr.UNKNOWN:throw"Transition from unknown is not allowed";case nr.NOT_STARTED:this.failIfNewStateIs(e,[nr.PAUSED]);break;case nr.SCANNING:break;case nr.PAUSED:break}},s.prototype.failIfNewStateIs=function(e,t){for(var i=0,n=t;i<n.length;i++){var a=n[i];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},s})(),Qj=(function(){function s(e){this.stateManager=e}return s.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},s.prototype.directTransition=function(e){this.stateManager.directTransition(e)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===nr.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==nr.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===nr.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===nr.PAUSED},s})(),Jj=(function(){function s(){}return s.create=function(){return new Qj(new Kj)},s})(),e7=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}})(),wo=(function(s){e7(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(Pj),t7=(function(){function s(e,t){this.logger=t,this.fps=wo.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=wo.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?iL.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!yc(this.qrbox)},s.create=function(e,t){return new s(e,t)},s})(),_b=(function(){function s(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof t=="boolean"?this.verbose=t===!0:t&&(i=t,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new Dj(this.verbose),this.qrcode=new jj(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Jj.create()}return s.prototype.start=function(e,t,i,n){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;n?o=n:o=this.verbose?this.logger.log:function(){};var r=t7.create(t,this.logger);this.clearElement();var d=!1;r.videoConstraints&&(r.isMediaStreamConstraintsValid()?d=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=d,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:wo.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var v=this,k=this.stateManagerProxy.startTransition(nr.SCANNING);return new Promise(function(E,F){var O=g?r.videoConstraints:v.createVideoConstraints(e);if(!O){k.cancel(),F("videoConstraints should be defined");return}var N={};(!g||r.aspectRatio)&&(N.aspectRatio=r.aspectRatio);var $={onRenderSurfaceReady:function(X,K){v.setupUi(X,K,r),v.isScanning=!0,v.foreverScan(r,i,o)}};Xj.failIfNotSupported().then(function(X){X.create(O).then(function(K){return K.render(a.element,N,$).then(function(ie){v.renderedCamera=ie,k.execute(),E(null)}).catch(function(ie){k.cancel(),F(ie)})}).catch(function(K){k.cancel(),F(Tf.errorGettingUserMedia(K))})}).catch(function(X){k.cancel(),F(Tf.cameraStreamingNotSupported())})})},s.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(nr.PAUSED),this.showPausedState(),(yc(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(nr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(nr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var a=document.getElementById(wo.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),i(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(i){return i.decodedText})},s.prototype.scanFileV2=function(e,t){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(yc(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,a){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var r=o.width,d=o.height,g=document.getElementById(i.elementId),x=g.clientWidth?g.clientWidth:wo.DEFAULT_WIDTH,v=Math.max(g.clientHeight?g.clientHeight:d,wo.FILE_SCAN_MIN_HEIGHT),k=i.computeCanvasDrawConfig(r,d,x,v);if(t){var E=i.createCanvasElement(x,v,"qr-canvas-visible");E.style.display="inline-block",g.appendChild(E);var F=E.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=x,F.canvas.height=v,F.drawImage(o,0,0,r,d,k.x,k.y,k.width,k.height)}var O=wo.FILE_SCAN_HIDDEN_CANVAS_PADDING,N=Math.max(o.width,k.width),$=Math.max(o.height,k.height),X=N+2*O,K=$+2*O,ie=i.createCanvasElement(X,K);g.appendChild(ie);var ee=ie.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=X,ee.canvas.height=K,ee.drawImage(o,0,0,r,d,O,O,N,$);try{i.qrcode.decodeRobustlyAsync(ie).then(function(le){n(oT.createFromQrcodeResult(le))}).catch(a)}catch(le){a("QR code parse error, error = ".concat(le))}},o.onerror=a,o.onabort=a,o.onstalled=a,o.onsuspend=a,o.src=URL.createObjectURL(e)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return Zj.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(e){if(e){if(!iL.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(e){var t=[mi.QR_CODE,mi.AZTEC,mi.CODABAR,mi.CODE_39,mi.CODE_93,mi.CODE_128,mi.DATA_MATRIX,mi.MAXICODE,mi.ITF,mi.EAN_13,mi.EAN_8,mi.PDF_417,mi.RSS_14,mi.RSS_EXPANDED,mi.UPC_A,mi.UPC_E,mi.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],n=0,a=e.formatsToSupport;n<a.length;n++){var o=a[n];Ij(o)?i.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},s.prototype.getUseBarCodeDetectorIfSupported=function(e){if(yc(e))return!0;if(!yc(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(yc(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return yc(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(e,t,i){var n=this,a=i.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(e,t,a),r=function(g){if(g<wo.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(wo.MIN_QR_BOX_SIZE,"px.")},d=function(g){return g>e&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};r(o.width),r(o.height),o.width=d(o.width)},s.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(e,t,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,t)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return i},s.prototype.setupUi=function(e,t,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,i);var n=yc(i.qrbox)?{width:e,height:t}:i.qrbox;this.validateQrboxConfig(n);var a=this.toQrdimensions(e,t,n);a.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=i.isShadedBoxEnabled()&&a.height<=t,r={x:0,y:0,width:e,height:t},d=o?this.getShadedRegionBounds(e,t,a):r,g=this.createCanvasElement(d.width,d.height),x={willReadFrequently:!0},v=g.getContext("2d",x);v.canvas.width=d.width,v.canvas.height=d.height,this.element.append(g),o&&this.possiblyInsertShadingElement(this.element,e,t,a),this.createScannerPausedUiElement(this.element),this.qrRegion=d,this.context=v,this.canvasElement=g},s.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Tf.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},s.prototype.scanContext=function(e,t){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(n){return e(n.text,oT.createFromQrcodeResult(n)),i.possiblyUpdateShaders(!0),!0}).catch(function(n){i.possiblyUpdateShaders(!1);var a=Tf.codeParseError(n);return t(a,Lj.createFrom(a)),!1})},s.prototype.foreverScan=function(e,t,i){var n=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),o=a.videoWidth/a.clientWidth,r=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var d=this.qrRegion.width*o,g=this.qrRegion.height*r,x=this.qrRegion.x*o,v=this.qrRegion.y*r;this.context.drawImage(a,x,v,d,g,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(e,t,i)},n.getTimeoutFps(e.fps))};this.scanContext(t,i).then(function(E){!E&&e.disableFlip!==!0?(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,i).finally(function(){k()})):k()}).catch(function(E){n.logger.logError("Error happend while scanning context",E),k()})}},s.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",i="deviceId",n={user:!0,environment:!0},a="exact",o=function(F){if(F in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(F,"'")},r=Object.keys(e);if(r.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(r.length," keys");var d=Object.keys(e)[0];if(d!==t&&d!==i)throw"Only '".concat(t,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(d===t){var g=e.facingMode;if(typeof g=="string"){if(o(g))return{facingMode:g}}else if(typeof g=="object")if(a in g){if(o(g["".concat(a)]))return{facingMode:{exact:g["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var x=typeof g;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(a in v)return{deviceId:{exact:v["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var k=typeof v;throw"Invalid type of 'deviceId' = ".concat(k)}}}var E=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(E)},s.prototype.computeCanvasDrawConfig=function(e,t,i,n){if(e<=i&&t<=n){var a=(i-e)/2,o=(n-t)/2;return{x:a,y:o,width:e,height:t}}else{var r=e,d=t;return e>i&&(t=i/e*t,e=i),t>n&&(e=n/t*e,t=n),this.logger.log("Image downsampled from "+"".concat(r,"X").concat(d)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,i,n)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},s.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?wo.BORDER_SHADER_MATCH_COLOR:wo.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(e,t,i){var n=e,a=t,o=document.createElement("canvas");return o.style.width="".concat(n,"px"),o.style.height="".concat(a,"px"),o.style.display="none",o.id=yc(i)?"qr-canvas":i,o},s.prototype.getShadedRegionBounds=function(e,t,i){if(i.width>e||i.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(t-i.height)/2,width:i.width,height:i.height}},s.prototype.possiblyInsertShadingElement=function(e,t,i,n){if(!(t-n.width<1||i-n.height<1)){var a=document.createElement("div");a.style.position="absolute";var o=(t-n.width)/2,r=(i-n.height)/2;if(a.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(r,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(r,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(wo.SHADED_REGION_ELEMENT_ID),t-n.width<11||i-n.height<11)this.hasBorderShaders=!1;else{var d=5,g=40;this.insertShaderBorders(a,g,d,-d,null,0,!0),this.insertShaderBorders(a,g,d,-d,null,0,!1),this.insertShaderBorders(a,g,d,null,-d,0,!0),this.insertShaderBorders(a,g,d,null,-d,0,!1),this.insertShaderBorders(a,d,g+d,-d,null,-d,!0),this.insertShaderBorders(a,d,g+d,null,-d,-d,!0),this.insertShaderBorders(a,d,g+d,-d,null,-d,!1),this.insertShaderBorders(a,d,g+d,null,-d,-d,!1),this.hasBorderShaders=!0}e.append(a)}},s.prototype.insertShaderBorders=function(e,t,i,n,a,o,r){var d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor=wo.BORDER_SHADER_DEFAULT_COLOR,d.style.width="".concat(t,"px"),d.style.height="".concat(i,"px"),n!==null&&(d.style.top="".concat(n,"px")),a!==null&&(d.style.bottom="".concat(a,"px")),r?d.style.left="".concat(o,"px"):d.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(d),e.appendChild(d)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(e){return 1e3/e},s})(),gT;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(gT||(gT={}));class i7{constructor(e,t,i){this.elementId=e,this.onScanSuccess=t,this.onScanFailure=i,this.html5QrCode=null,this.config={fps:15}}async start(){if(!this.isSecureContext())throw console.error("Camera access requires a secure context (HTTPS or localhost)."),new Error("Kamera memerlukan koneksi aman (HTTPS).");try{if(this.html5QrCode||(this.html5QrCode=new _b(this.elementId)),this.html5QrCode.isScanning){console.log("Scanner is already running.");return}await this.html5QrCode.start({facingMode:"environment"},this.config,(e,t)=>{this.onScanSuccess(e,t)},e=>{this.onScanFailure&&this.onScanFailure(e)})}catch(e){throw console.error("Failed to start camera:",e),e}}async stop(){if(this.html5QrCode&&(this.html5QrCode.isScanning||this.html5QrCode.getState()===2||this.html5QrCode.getState()===3))try{await this.html5QrCode.stop()}catch(e){console.error("Failed to stop camera:",e)}}async pause(){this.html5QrCode&&this.html5QrCode.isScanning&&this.html5QrCode.pause()}async resume(){if(this.html5QrCode)try{this.html5QrCode.getState()===3?this.html5QrCode.resume():(this.html5QrCode.getState()===1||this.html5QrCode.getState()===0)&&await this.start()}catch{try{this.html5QrCode.resume()}catch{await this.start()}}}isSecureContext(){return window.isSecureContext}getState(){return this.html5QrCode?this.html5QrCode.getState():0}}class n7{constructor(e){this.html5QrCode=e}async scanFile(e){if(!e)throw new Error("No file selected.");try{if(!this.html5QrCode)throw new Error("Scanner instance not initialized.");return await this.html5QrCode.scanFileV2(e,!1)}catch(t){throw console.error("Error scanning file:",t),t}}}function a7(s){s.data("qrScanner",()=>({scanner:null,uploader:null,isScanning:!1,isLoading:!1,manualInput:"",showModal:!1,isValid:!1,statusMessage:"",scanData:{},recentScans:[],hasCameraPermission:!1,cameraError:null,async init(){console.log("QrScanner Component Initializing..."),window.isSecureContext||(console.warn("Insecure Context Detected"),this.cameraError="Koneksi tidak aman (HTTP). Kamera dinonaktifkan. Gunakan HTTPS atau localhost.");try{this.scanner=new i7("reader",this.onScanSuccess.bind(this),this.onScanFailure.bind(this)),this.uploader=new n7(null),this.$nextTick(async()=>{this.cameraError||await this.startScanner()})}catch(e){console.error("Component Init Error:",e),this.cameraError="Gagal inisialisasi komponen: "+e.message}},async startScanner(){console.log("Starting Scanner..."),this.isLoading=!0,this.cameraError=null;try{this.isScanning=!0,await this.scanner.start(),this.hasCameraPermission=!0,this.scanner.html5QrCode&&(this.uploader.html5QrCode=this.scanner.html5QrCode)}catch(e){console.error("Scanner Start Error:",e),this.isScanning=!1,this.hasCameraPermission=!1,e.name==="NotAllowedError"?this.cameraError="Izin kamera ditolak. Silakan izinkan akses kamera di browser.":e.toString().includes("secure context")?this.cameraError=e.message:this.cameraError="Gagal memulai kamera: "+e.message}finally{this.isLoading=!1}},async stopScanner(){this.scanner&&(await this.scanner.stop(),this.isScanning=!1)},async toggleScanner(){this.isScanning?await this.stopScanner():await this.startScanner()},onScanSuccess(e,t){this.showModal||(console.log("Scan Success:",e),this.scanner.pause(),this.isScanning=!1,this.validateQr(e))},onScanFailure(e){},async handleFileUpload(e){console.log("File Upload Initiated");const t=e.target.files[0];if(!t)return;const i=document.querySelector('label[for="qr-input-file"]');i&&(i.dataset.originalText||(i.dataset.originalText=i.innerHTML),i.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i> Memproses...');try{if(this.scanner)try{const o=this.scanner.getState();(o===2||o===3)&&(await this.scanner.stop(),this.isScanning=!1)}catch(o){console.warn("Stop Warning:",o)}await new Promise(o=>setTimeout(o,300)),this.uploader.html5QrCode||(this.uploader.html5QrCode=new _b("reader"));let n;try{n=await this.uploader.scanFile(t)}catch(o){if(o.toString().toLowerCase().includes("ongoing"))console.log("Conflict detected, forcing stop and retrying..."),this.uploader.html5QrCode&&(await this.uploader.html5QrCode.stop().catch(r=>{}),await this.uploader.html5QrCode.clear().catch(r=>{})),await new Promise(r=>setTimeout(r,500)),this.uploader.html5QrCode=new _b("reader"),n=await this.uploader.scanFile(t);else throw o}let a=n;typeof n=="object"&&n!==null&&(a=n.decodedText||JSON.stringify(n)),console.log("File Scan Result:",a),this.validateQr(a)}catch(n){console.error("File Scan Failed:",n),alert(`Gagal membaca QR Code.
Pastikan gambar jelas dan memiliki QR Code yang valid.
Detail: `+(n.message||n)),!this.showModal&&!this.cameraError&&this.startScanner()}finally{i&&i.dataset.originalText&&(i.innerHTML=i.dataset.originalText),e.target.value="",!this.showModal&&!this.cameraError&&setTimeout(()=>{this.showModal||this.startScanner()},500)}},async validateQr(e){try{const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),i=await fetch("/admin/scan",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Accept:"application/json"},body:JSON.stringify({qr_data:e})}),n=await i.json();if(i.ok)this.handleResult(!0,n.message,n.data);else{const a=n.data||{};!a.order_number&&n.detail?.order_number&&(a.order_number=n.detail.order_number),this.handleResult(!1,n.message,a)}}catch(t){console.error("Validation Error:",t),this.handleResult(!1,"System Error: "+t.message,{order_number:e})}},handleManualInput(){const e=this.manualInput.trim();if(!e)return;let t=e;e.startsWith("{")||(t=JSON.stringify({order_number:e})),this.validateQr(t)},handleResult(e,t,i){this.isValid=e,this.statusMessage=t,this.scanData=i||{},this.showModal=!0,this.manualInput="";const n=document.getElementById(e?"scan-success":"scan-error");n&&(n.currentTime=0,n.play().catch(a=>console.log("Audio play failed",a))),this.recentScans.unshift({valid:e,ticketName:i.ticket_name||"N/A",orderNumber:i.order_number||"Unknown",time:new Date().toLocaleTimeString(),timestamp:Date.now()}),this.recentScans.length>5&&this.recentScans.pop()},closeModal(){this.showModal=!1,this.cameraError||this.startScanner()},resumeScanner(){if(!this.cameraError)if(this.scanner&&this.scanner.html5QrCode){const e=this.scanner.getState();console.log("Resuming Scanner... Current State:",e),e===3?(this.scanner.resume(),this.isScanning=!0):(e===1||e===0)&&this.startScanner()}else this.startScanner()}}))}window.L=ER;zb.registerPlugin(yn);window.gsap=zb;window.ScrollTrigger=yn;window.maplibregl=DR;window.Chart=ow;Mm.plugin(Ej);Mm.data("cultureSection",Mj);a7(Mm);window.Alpine=Mm;Mm.start();
