import{g as fk,c as ci,L as pk}from"./leaflet-src-eHmD5uJa.js";var Qh={exports:{}};var mk=Qh.exports,Wy;function gk(){return Wy||(Wy=1,(function(r,i){(function(l,c){r.exports=c()})(mk,(function(){var l={},c={};function u(h,s,w){if(c[h]=w,h==="index"){var T="var sharedModule = {}; ("+c.shared+")(sharedModule); ("+c.worker+")(sharedModule);",E={};return c.shared(E),c.index(l,E),typeof window<"u"&&l.setWorkerUrl(window.URL.createObjectURL(new Blob([T],{type:"text/javascript"}))),l}}u("shared",["exports"],(function(h){function s(a,e,n,d){return new(n||(n=Promise))((function(m,_){function y(P){try{S(d.next(P))}catch(D){_(D)}}function b(P){try{S(d.throw(P))}catch(D){_(D)}}function S(P){var D;P.done?m(P.value):(D=P.value,D instanceof n?D:new n((function(I){I(D)}))).then(y,b)}S((d=d.apply(a,e||[])).next())}))}function w(a,e){this.x=a,this.y=e}function T(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var E,z;typeof SuppressedError=="function"&&SuppressedError,w.prototype={clone(){return new w(this.x,this.y)},add(a){return this.clone()._add(a)},sub(a){return this.clone()._sub(a)},multByPoint(a){return this.clone()._multByPoint(a)},divByPoint(a){return this.clone()._divByPoint(a)},mult(a){return this.clone()._mult(a)},div(a){return this.clone()._div(a)},rotate(a){return this.clone()._rotate(a)},rotateAround(a,e){return this.clone()._rotateAround(a,e)},matMult(a){return this.clone()._matMult(a)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(a){return this.x===a.x&&this.y===a.y},dist(a){return Math.sqrt(this.distSqr(a))},distSqr(a){const e=a.x-this.x,n=a.y-this.y;return e*e+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith(a){return this.angleWithSep(a.x,a.y)},angleWithSep(a,e){return Math.atan2(this.x*e-this.y*a,this.x*a+this.y*e)},_matMult(a){const e=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=e,this},_add(a){return this.x+=a.x,this.y+=a.y,this},_sub(a){return this.x-=a.x,this.y-=a.y,this},_mult(a){return this.x*=a,this.y*=a,this},_div(a){return this.x/=a,this.y/=a,this},_multByPoint(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint(a){return this.x/=a.x,this.y/=a.y,this},_unit(){return this._div(this.mag()),this},_perp(){const a=this.y;return this.y=this.x,this.x=-a,this},_rotate(a){const e=Math.cos(a),n=Math.sin(a),d=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=d,this},_rotateAround(a,e){const n=Math.cos(a),d=Math.sin(a),m=e.y+d*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-d*(this.y-e.y),this.y=m,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:w},w.convert=function(a){if(a instanceof w)return a;if(Array.isArray(a))return new w(+a[0],+a[1]);if(a.x!==void 0&&a.y!==void 0)return new w(+a.x,+a.y);throw new Error("Expected [x, y] or {x, y} point format")};var O=(function(){if(z)return E;function a(e,n,d,m){this.cx=3*e,this.bx=3*(d-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(m-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=d,this.p2y=m}return z=1,E=a,a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,n){if(n===void 0&&(n=1e-6),e<0)return 0;if(e>1)return 1;for(var d=e,m=0;m<8;m++){var _=this.sampleCurveX(d)-e;if(Math.abs(_)<n)return d;var y=this.sampleCurveDerivativeX(d);if(Math.abs(y)<1e-6)break;d-=_/y}var b=0,S=1;for(d=e,m=0;m<20&&(_=this.sampleCurveX(d),!(Math.abs(_-e)<n));m++)e>_?b=d:S=d,d=.5*(S-b)+b;return d},solve:function(e,n){return this.sampleCurveY(this.solveCurveX(e,n))}},E})(),W=T(O);let Q,te;function U(){return Q==null&&(Q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q}function _e(){if(te==null&&(te=!1,U())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let d=0;d<25;d++){const m=4*d;e.fillStyle=`rgb(${m},${m+1},${m+2})`,e.fillRect(d%5,Math.floor(d/5),1,1)}const n=e.getImageData(0,0,5,5).data;for(let d=0;d<100;d++)if(d%4!=3&&n[d]!==d){te=!0;break}}}return te||!1}var pe=1e-6,xe=typeof Float32Array<"u"?Float32Array:Array;function Ae(){var a=new xe(9);return xe!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function ze(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function qe(){var a=new xe(3);return xe!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Ne(a){var e=a[0],n=a[1],d=a[2];return Math.sqrt(e*e+n*n+d*d)}function He(a,e,n){var d=new xe(3);return d[0]=a,d[1]=e,d[2]=n,d}function rt(a,e,n){return a[0]=e[0]+n[0],a[1]=e[1]+n[1],a[2]=e[2]+n[2],a}function lt(a,e,n){return a[0]=e[0]*n,a[1]=e[1]*n,a[2]=e[2]*n,a}function ct(a,e,n){var d=e[0],m=e[1],_=e[2],y=n[0],b=n[1],S=n[2];return a[0]=m*S-_*b,a[1]=_*y-d*S,a[2]=d*b-m*y,a}var mt,jt=Ne;function Ei(a,e,n){var d=e[0],m=e[1],_=e[2],y=e[3];return a[0]=n[0]*d+n[4]*m+n[8]*_+n[12]*y,a[1]=n[1]*d+n[5]*m+n[9]*_+n[13]*y,a[2]=n[2]*d+n[6]*m+n[10]*_+n[14]*y,a[3]=n[3]*d+n[7]*m+n[11]*_+n[15]*y,a}function Tt(){var a=new xe(4);return xe!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function Rt(a,e,n,d){var m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",_=Math.PI/360;e*=_,d*=_,n*=_;var y=Math.sin(e),b=Math.cos(e),S=Math.sin(n),P=Math.cos(n),D=Math.sin(d),I=Math.cos(d);switch(m){case"xyz":a[0]=y*P*I+b*S*D,a[1]=b*S*I-y*P*D,a[2]=b*P*D+y*S*I,a[3]=b*P*I-y*S*D;break;case"xzy":a[0]=y*P*I-b*S*D,a[1]=b*S*I-y*P*D,a[2]=b*P*D+y*S*I,a[3]=b*P*I+y*S*D;break;case"yxz":a[0]=y*P*I+b*S*D,a[1]=b*S*I-y*P*D,a[2]=b*P*D-y*S*I,a[3]=b*P*I+y*S*D;break;case"yzx":a[0]=y*P*I+b*S*D,a[1]=b*S*I+y*P*D,a[2]=b*P*D-y*S*I,a[3]=b*P*I-y*S*D;break;case"zxy":a[0]=y*P*I-b*S*D,a[1]=b*S*I+y*P*D,a[2]=b*P*D+y*S*I,a[3]=b*P*I-y*S*D;break;case"zyx":a[0]=y*P*I-b*S*D,a[1]=b*S*I+y*P*D,a[2]=b*P*D-y*S*I,a[3]=b*P*I+y*S*D;break;default:throw new Error("Unknown angle order "+m)}return a}function Mt(){var a=new xe(2);return xe!=Float32Array&&(a[0]=0,a[1]=0),a}function Li(a,e){var n=new xe(2);return n[0]=a,n[1]=e,n}qe(),mt=new xe(4),xe!=Float32Array&&(mt[0]=0,mt[1]=0,mt[2]=0,mt[3]=0),qe(),He(1,0,0),He(0,1,0),Tt(),Tt(),Ae(),Mt();const dt=8192;function fn(a,e,n){return e*(dt/(a.tileSize*Math.pow(2,n-a.tileID.overscaledZ)))}function sn(a,e){return(a%e+e)%e}function pn(a,e,n){return a*(1-n)+e*n}function zn(a){if(a<=0)return 0;if(a>=1)return 1;const e=a*a,n=e*a;return 4*(a<.5?n:3*(a-e)+n-.75)}function Ji(a,e,n,d){const m=new W(a,e,n,d);return _=>m.solve(_)}const oi=Ji(.25,.1,.25,1);function Di(a,e,n){return Math.min(n,Math.max(e,a))}function Qn(a,e,n){const d=n-e,m=((a-e)%d+d)%d+e;return m===e?n:m}function Qi(a,...e){for(const n of e)for(const d in n)a[d]=n[d];return a}let ba=1;function kn(a,e,n){const d={};for(const m in a)d[m]=e.call(this,a[m],m,a);return d}function er(a,e,n){const d={};for(const m in a)e.call(this,a[m],m,a)&&(d[m]=a[m]);return d}function Rn(a){return Array.isArray(a)?a.map(Rn):typeof a=="object"&&a?kn(a,Rn):a}const Es={};function Ui(a){Es[a]||(typeof console<"u"&&console.warn(a),Es[a]=!0)}function Un(a,e,n){return(n.y-a.y)*(e.x-a.x)>(e.y-a.y)*(n.x-a.x)}function fa(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let fi=null;function za(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const tr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Rr(a,e,n,d,m){return s(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(a,{timestamp:0});try{const y=_?.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);const b=y.startsWith("BGR"),S=new Uint8ClampedArray(d*m*4);if(yield _.copyTo(S,(function(P,D,I,F,j){const V=4*Math.max(-D,0),N=(Math.max(0,I)-I)*F*4+V,q=4*F,Y=Math.max(0,D),se=Math.max(0,I);return{rect:{x:Y,y:se,width:Math.min(P.width,D+F)-Y,height:Math.min(P.height,I+j)-se},layout:[{offset:N,stride:q}]}})(a,e,n,d,m)),b)for(let P=0;P<S.length;P+=4){const D=S[P];S[P]=S[P+2],S[P+2]=D}return S}finally{_.close()}}))}let Ra,ea;function Fr(a,e,n,d){return a.addEventListener(e,n,d),{unsubscribe:()=>{a.removeEventListener(e,n,d)}}}function jr(a){return a*Math.PI/180}function Sn(a){return a/Math.PI*180}const we={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Z={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},H="AbortError";class J extends Error{constructor(e=H){super(e instanceof Error?e.message:e),this.name=H,e instanceof Error&&e.stack&&(this.stack=e.stack)}}function fe(a){return a.name===H}const ge={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Se(a){return ge.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const be="global-dispatcher";class ye extends Error{constructor(e,n,d,m){super(`AJAXError: ${n} (${e}): ${d}`),this.status=e,this.statusText=n,this.url=d,this.body=m}}const Le=()=>fa(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ve=function(a,e){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const d=Se(a.url);if(d)return d(a,e);if(fa(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:be},e)}if(!(/^file:/.test(n=a.url)||/^file:/.test(Le())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(d,m){return s(this,void 0,void 0,(function*(){const _=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Le(),signal:m.signal});let y,b;d.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{y=yield fetch(_)}catch(P){throw fe(P)?P:new ye(0,P.message,d.url,new Blob)}if(!y.ok){const P=yield y.blob();throw new ye(y.status,y.statusText,d.url,P)}b=d.type==="arrayBuffer"||d.type==="image"?y.arrayBuffer():d.type==="json"?y.json():y.text();const S=yield b;return m.signal.throwIfAborted(),{data:S,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}}))})(a,e);if(fa(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:be},e)}var n;return(function(d,m){return new Promise(((_,y)=>{var b;const S=new XMLHttpRequest;S.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(S.responseType="arraybuffer");for(const P in d.headers)S.setRequestHeader(P,d.headers[P]);d.type==="json"&&(S.responseType="text",!((b=d.headers)===null||b===void 0)&&b.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=d.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if(!m.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let P=S.response;if(d.type==="json")try{P=JSON.parse(S.response)}catch(D){return void y(D)}_({data:P,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const P=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new ye(S.status,S.statusText,d.url,P))}},m.signal.addEventListener("abort",(()=>{S.abort(),y(new J(m.signal.reason))})),S.send(d.body)}))})(a,e)};function je(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const e=new URL(a),n=window.location;return e.protocol===n.protocol&&e.host===n.host}function Qe(a,e,n){n[a]&&n[a].indexOf(e)!==-1||(n[a]=n[a]||[],n[a].push(e))}function nt(a,e,n){if(n&&n[a]){const d=n[a].indexOf(e);d!==-1&&n[a].splice(d,1)}}class ht{constructor(e,n={}){Qi(this,n),this.type=e}}class Vt extends ht{constructor(e,n={}){super("error",Qi({error:e},n))}}class At{on(e,n){return this._listeners=this._listeners||{},Qe(e,n,this._listeners),{unsubscribe:()=>{this.off(e,n)}}}off(e,n){return nt(e,n,this._listeners),nt(e,n,this._oneTimeListeners),this}once(e,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},Qe(e,n,this._oneTimeListeners),this):new Promise((d=>this.once(e,d)))}fire(e,n){typeof e=="string"&&(e=new ht(e,n||{}));const d=e.type;if(this.listens(d)){e.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const b of m)b.call(this,e);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const b of _)nt(d,b,this._oneTimeListeners),b.call(this,e);const y=this._eventedParent;y&&(Qi(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(e))}else e instanceof Vt&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,n){return this._eventedParent=e,this._eventedParentData=n,this}}var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function en(a,e){const n={};for(const d in a)d!=="ref"&&(n[d]=a[d]);return Ut.forEach((d=>{d in e&&(n[d]=e[d])})),n}function ft(a,e){if(Array.isArray(a)){if(!Array.isArray(e)||a.length!==e.length)return!1;for(let n=0;n<a.length;n++)if(!ft(a[n],e[n]))return!1;return!0}if(typeof a=="object"&&a!==null&&e!==null){if(typeof e!="object"||Object.keys(a).length!==Object.keys(e).length)return!1;for(const n in a)if(!ft(a[n],e[n]))return!1;return!0}return a===e}function Ot(a,e){a.push(e)}function tn(a,e,n){Ot(n,{command:"addSource",args:[a,e[a]]})}function Qt(a,e,n){Ot(e,{command:"removeSource",args:[a]}),n[a]=!0}function pi(a,e,n,d){Qt(a,n,d),tn(a,e,n)}function Gt(a,e,n){let d;for(d in a[n])if(Object.prototype.hasOwnProperty.call(a[n],d)&&d!=="data"&&!ft(a[n][d],e[n][d]))return!1;for(d in e[n])if(Object.prototype.hasOwnProperty.call(e[n],d)&&d!=="data"&&!ft(a[n][d],e[n][d]))return!1;return!0}function Ri(a,e,n,d,m,_){a=a||{},e=e||{};for(const y in a)Object.prototype.hasOwnProperty.call(a,y)&&(ft(a[y],e[y])||n.push({command:_,args:[d,y,e[y],m]}));for(const y in e)Object.prototype.hasOwnProperty.call(e,y)&&!Object.prototype.hasOwnProperty.call(a,y)&&(ft(a[y],e[y])||n.push({command:_,args:[d,y,e[y],m]}))}function Ls(a){return a.id}function Ds(a,e){return a[e.id]=e,a}class Ue{constructor(e,n,d,m){this.message=(e?`${e}: `:"")+d,m&&(this.identifier=m),n!=null&&n.__line__&&(this.line=n.__line__)}}function mn(a,...e){for(const n of e)for(const d in n)a[d]=n[d];return a}class gn extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class Wo{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[d,m]of n)this.bindings[d]=m}concat(e){return new Wo(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Gn={kind:"null"},Xe={kind:"number"},yt={kind:"string"},vt={kind:"boolean"},Fn={kind:"color"},Ho={kind:"projectionDefinition"},wa={kind:"object"},gt={kind:"value"},As={kind:"collator"},Is={kind:"formatted"},Zo={kind:"padding"},Or={kind:"colorArray"},zs={kind:"numberArray"},$r={kind:"resolvedImage"},Rs={kind:"variableAnchorOffsetCollection"};function _n(a,e){return{kind:"array",itemType:a,N:e}}function $t(a){if(a.kind==="array"){const e=$t(a.itemType);return typeof a.N=="number"?`array<${e}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${e}>`}return a.kind}const Ko=[Gn,Xe,yt,vt,Fn,Ho,Is,wa,_n(gt),Zo,zs,Or,$r,Rs];function Br(a,e){if(e.kind==="error")return null;if(a.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Br(a.itemType,e.itemType))&&(typeof a.N!="number"||a.N===e.N))return null}else{if(a.kind===e.kind)return null;if(a.kind==="value"){for(const n of Ko)if(!Br(n,e))return null}}return`Expected ${$t(a)} but found ${$t(e)} instead.`}function Fs(a,e){return e.some((n=>n.kind===a.kind))}function ir(a,e){return e.some((n=>n==="null"?a===null:n==="array"?Array.isArray(a):n==="object"?a&&!Array.isArray(a)&&typeof a=="object":n===typeof a))}function ta(a,e){return a.kind==="array"&&e.kind==="array"?a.itemType.kind===e.itemType.kind&&typeof a.N=="number":a.kind===e.kind}const rc=.96422,nr=.82521,Yo=4/29,mi=6/29,sc=3*mi*mi,oc=mi*mi*mi,js=Math.PI/180,lc=180/Math.PI;function uc(a){return(a%=360)<0&&(a+=360),a}function dc([a,e,n,d]){let m,_;const y=hu((.2225045*(a=Xo(a))+.7168786*(e=Xo(e))+.0606169*(n=Xo(n)))/1);a===e&&e===n?m=_=y:(m=hu((.4360747*a+.3850649*e+.1430804*n)/rc),_=hu((.0139322*a+.0971045*e+.7141733*n)/nr));const b=116*y-16;return[b<0?0:b,500*(m-y),200*(y-_),d]}function Xo(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function hu(a){return a>oc?Math.pow(a,1/3):a/sc+Yo}function fu([a,e,n,d]){let m=(a+16)/116,_=isNaN(e)?m:m+e/500,y=isNaN(n)?m:m-n/200;return m=1*mu(m),_=rc*mu(_),y=nr*mu(y),[pu(3.1338561*_-1.6168667*m-.4906146*y),pu(-.9787684*_+1.9161415*m+.033454*y),pu(.0719453*_-.2289914*m+1.4052427*y),d]}function pu(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function mu(a){return a>mi?a*a*a:sc*(a-Yo)}const Af=Object.hasOwn||function(a,e){return Object.prototype.hasOwnProperty.call(a,e)};function Os(a,e){return Af(a,e)?a[e]:void 0}function Jo(a){return parseInt(a.padEnd(2,a),16)/255}function cc(a,e){return Vr(e?a/100:a,0,1)}function Vr(a,e,n){return Math.min(Math.max(e,a),n)}function gu(a){return!a.some(Number.isNaN)}const $s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Fa(a,e,n){return a+n*(e-a)}function Nr(a,e,n){return a.map(((d,m)=>Fa(d,e[m],n)))}class xt{constructor(e,n,d,m=1,_=!0){this.r=e,this.g=n,this.b=d,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[e,n,d,m]))}static parse(e){if(e instanceof xt)return e;if(typeof e!="string")return;const n=(function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Os($s,d);if(m){const[y,b,S]=m;return[y/255,b/255,S/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const y=d.length<6?1:2;let b=1;return[Jo(d.slice(b,b+=y)),Jo(d.slice(b,b+=y)),Jo(d.slice(b,b+=y)),Jo(d.slice(b,b+y)||"ff")]}if(d.startsWith("rgb")){const y=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[b,S,P,D,I,F,j,V,N,q,Y,se]=y,X=[D||" ",j||" ",q].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){const ee=[P,F,N].join(""),le=ee==="%%%"?100:ee===""?255:0;if(le){const ce=[Vr(+S/le,0,1),Vr(+I/le,0,1),Vr(+V/le,0,1),Y?cc(+Y,se):1];if(gu(ce))return ce}}return}}const _=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[y,b,S,P,D,I,F,j,V]=_,N=[S||" ",D||" ",F].join("");if(N==="  "||N==="  /"||N===",,"||N===",,,"){const q=[+b,Vr(+P,0,100),Vr(+I,0,100),j?cc(+j,V):1];if(gu(q))return(function([Y,se,X,ee]){function le(ce){const ke=(ce+Y/30)%12,Fe=se*Math.min(X,1-X);return X-Fe*Math.max(-1,Math.min(ke-3,9-ke,1))}return Y=uc(Y),se/=100,X/=100,[le(0),le(8),le(4),ee]})(q)}}})(e);return n?new xt(...n,!1):void 0}get rgb(){const{r:e,g:n,b:d,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[e/_,n/_,d/_,m])}get hcl(){return this.overwriteGetter("hcl",(function(e){const[n,d,m,_]=dc(e),y=Math.sqrt(d*d+m*m);return[Math.round(1e4*y)?uc(Math.atan2(m,d)*lc):NaN,y,n,_]})(this.rgb))}get lab(){return this.overwriteGetter("lab",dc(this.rgb))}overwriteGetter(e,n){return Object.defineProperty(this,e,{value:n}),n}toString(){const[e,n,d,m]=this.rgb;return`rgba(${[e,n,d].map((_=>Math.round(255*_))).join(",")},${m})`}static interpolate(e,n,d,m="rgb"){switch(m){case"rgb":{const[_,y,b,S]=Nr(e.rgb,n.rgb,d);return new xt(_,y,b,S,!1)}case"hcl":{const[_,y,b,S]=e.hcl,[P,D,I,F]=n.hcl;let j,V;if(isNaN(_)||isNaN(P))isNaN(_)?isNaN(P)?j=NaN:(j=P,b!==1&&b!==0||(V=D)):(j=_,I!==1&&I!==0||(V=y));else{let X=P-_;P>_&&X>180?X-=360:P<_&&_-P>180&&(X+=360),j=_+d*X}const[N,q,Y,se]=(function([X,ee,le,ce]){return X=isNaN(X)?0:X*js,fu([le,Math.cos(X)*ee,Math.sin(X)*ee,ce])})([j,V??Fa(y,D,d),Fa(b,I,d),Fa(S,F,d)]);return new xt(N,q,Y,se,!1)}case"lab":{const[_,y,b,S]=fu(Nr(e.lab,n.lab,d));return new xt(_,y,b,S,!1)}}}}xt.black=new xt(0,0,0,1),xt.white=new xt(1,1,1,1),xt.transparent=new xt(0,0,0,0),xt.red=new xt(1,0,0,1);class _u{constructor(e,n,d){this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const If=["bottom","center","top"];class yu{constructor(e,n,d,m,_,y){this.text=e,this.image=n,this.scale=d,this.fontStack=m,this.textColor=_,this.verticalAlign=y}}class Tn{constructor(e){this.sections=e}static fromString(e){return new Tn([new yu(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((e=>e.text.length!==0||e.image&&e.image.name.length!==0))}static factory(e){return e instanceof Tn?e:Tn.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map((e=>e.text)).join("")}}class on{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof on)return e;if(typeof e=="number")return new on([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const n of e)if(typeof n!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new on(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,d){return new on(Nr(e.values,n.values,d))}}class li{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof li)return e;if(typeof e=="number")return new li([e]);if(Array.isArray(e)){for(const n of e)if(typeof n!="number")return;return new li(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,d){return new li(Nr(e.values,n.values,d))}}class ut{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ut)return e;if(typeof e=="string"){const d=xt.parse(e);return d?new ut([d]):void 0}if(!Array.isArray(e))return;const n=[];for(const d of e){if(typeof d!="string")return;const m=xt.parse(d);if(!m)return;n.push(m)}return new ut(n)}toString(){return JSON.stringify(this.values)}static interpolate(e,n,d,m="rgb"){const _=[];if(e.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let y=0;y<e.values.length;y++)_.push(xt.interpolate(e.values[y],n.values[y],d,m));return new ut(_)}}class qt extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const ja=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class yn{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof yn)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let n=0;n<e.length;n+=2){const d=e[n],m=e[n+1];if(typeof d!="string"||!ja.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new yn(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,d){const m=e.values,_=n.values;if(m.length!==_.length)throw new qt(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${n.toString()}`);const y=[];for(let b=0;b<m.length;b+=2){if(m[b]!==_[b])throw new qt(`Cannot interpolate values containing mismatched anchors. from[${b}]: ${m[b]}, to[${b}]: ${_[b]}`);y.push(m[b]);const[S,P]=m[b+1],[D,I]=_[b+1];y.push([Fa(S,D,d),Fa(P,I,d)])}return new yn(y)}}class jn{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new jn({name:e,available:!1}):null}}class vn{constructor(e,n,d){this.from=e,this.to=n,this.transition=d}static interpolate(e,n,d){return new vn(e,n,d)}static parse(e){return e instanceof vn?e:Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"?new vn(e[0],e[1],e[2]):typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number"?new vn(e.from,e.to,e.transition):typeof e=="string"?new vn(e,e,1):void 0}}function Ur(a,e,n,d){return typeof a=="number"&&a>=0&&a<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,e,n,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,e,n,d]:[a,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Oa(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof vn||a instanceof xt||a instanceof _u||a instanceof Tn||a instanceof on||a instanceof li||a instanceof ut||a instanceof yn||a instanceof jn)return!0;if(Array.isArray(a)){for(const e of a)if(!Oa(e))return!1;return!0}if(typeof a=="object"){for(const e in a)if(!Oa(a[e]))return!1;return!0}return!1}function wi(a){if(a===null)return Gn;if(typeof a=="string")return yt;if(typeof a=="boolean")return vt;if(typeof a=="number")return Xe;if(a instanceof xt)return Fn;if(a instanceof vn)return Ho;if(a instanceof _u)return As;if(a instanceof Tn)return Is;if(a instanceof on)return Zo;if(a instanceof li)return zs;if(a instanceof ut)return Or;if(a instanceof yn)return Rs;if(a instanceof jn)return $r;if(Array.isArray(a)){const e=a.length;let n;for(const d of a){const m=wi(d);if(n){if(n===m)continue;n=gt;break}n=m}return _n(n||gt,e)}return wa}function ar(a){const e=typeof a;return a===null?"":e==="string"||e==="number"||e==="boolean"?String(a):a instanceof xt||a instanceof vn||a instanceof Tn||a instanceof on||a instanceof li||a instanceof ut||a instanceof yn||a instanceof jn?a.toString():JSON.stringify(a)}class pa{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Oa(e[1]))return n.error("invalid value");const d=e[1];let m=wi(d);const _=n.expectedType;return m.kind!=="array"||m.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(m=_),new pa(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Qo={string:yt,number:Xe,boolean:vt,object:wa};class Mn{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let d,m=1;const _=e[0];if(_==="array"){let b,S;if(e.length>2){const P=e[1];if(typeof P!="string"||!(P in Qo)||P==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);b=Qo[P],m++}else b=gt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);S=e[2],m++}d=_n(b,S)}else{if(!Qo[_])throw new Error(`Types doesn't contain name = ${_}`);d=Qo[_]}const y=[];for(;m<e.length;m++){const b=n.parse(e[m],m,gt);if(!b)return null;y.push(b)}return new Mn(d,y)}evaluate(e){for(let n=0;n<this.args.length;n++){const d=this.args[n].evaluate(e);if(!Br(this.type,wi(d)))return d;if(n===this.args.length-1)throw new qt(`Expected value to be of type ${$t(this.type)}, but found ${$t(wi(d))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const rr={"to-boolean":vt,"to-color":Fn,"to-number":Xe,"to-string":yt};class ka{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const d=e[0];if(!rr[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&e.length!==2)return n.error("Expected one argument.");const m=rr[d],_=[];for(let y=1;y<e.length;y++){const b=n.parse(e[y],y,gt);if(!b)return null;_.push(b)}return new ka(m,_)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let n,d;for(const m of this.args){if(n=m.evaluate(e),d=null,n instanceof xt)return n;if(typeof n=="string"){const _=e.parseColor(n);if(_)return _}else if(Array.isArray(n)&&(d=n.length<3||n.length>4?`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:Ur(n[0],n[1],n[2],n[3]),!d))return new xt(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new qt(d||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const d of this.args){n=d.evaluate(e);const m=on.parse(n);if(m)return m}throw new qt(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const d of this.args){n=d.evaluate(e);const m=li.parse(n);if(m)return m}throw new qt(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const d of this.args){n=d.evaluate(e);const m=ut.parse(n);if(m)return m}throw new qt(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const d of this.args){n=d.evaluate(e);const m=yn.parse(n);if(m)return m}throw new qt(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const d of this.args){if(n=d.evaluate(e),n===null)return 0;const m=Number(n);if(!isNaN(m))return m}throw new qt(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return Tn.fromString(ar(this.args[0].evaluate(e)));case"resolvedImage":return jn.fromString(ar(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return ar(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const hc=["Unknown","Point","LineString","Polygon"];class vu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?hc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let n=this._parseColorCache.get(e);return n||(n=xt.parse(e),this._parseColorCache.set(e,n)),n}}class sr{constructor(e,n,d=[],m,_=new Wo,y=[]){this.registry=e,this.path=d,this.key=d.map((b=>`[${b}]`)).join(""),this.scope=_,this.errors=y,this.expectedType=m,this._isConstant=n}parse(e,n,d,m,_={}){return n?this.concat(n,d,m)._parse(e,_):this._parse(e,_)}_parse(e,n){function d(m,_,y){return y==="assert"?new Mn(_,[m]):y==="coerce"?new ka(_,[m]):m}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=e[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[m];if(_){let y=_.parse(e,this);if(!y)return null;if(this.expectedType){const b=this.expectedType,S=y.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||S.kind!=="value"){if(b.kind==="projectionDefinition"&&["string","array"].includes(S.kind)||["color","formatted","resolvedImage"].includes(b.kind)&&["value","string"].includes(S.kind)||["padding","numberArray"].includes(b.kind)&&["value","number","array"].includes(S.kind)||b.kind==="colorArray"&&["value","string","array"].includes(S.kind)||b.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(S.kind))y=d(y,b,n.typeAnnotation||"coerce");else if(this.checkSubtype(b,S))return null}else y=d(y,b,n.typeAnnotation||"assert")}if(!(y instanceof pa)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){const b=new vu;try{y=new pa(y.type,y.evaluate(b))}catch(S){return this.error(S.message),null}}return y}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,n,d){const m=typeof e=="number"?this.path.concat(e):this.path,_=d?this.scope.concat(d):this.scope;return new sr(this.registry,this._isConstant,m,n||null,_,this.errors)}error(e,...n){const d=`${this.key}${n.map((m=>`[${m}]`)).join("")}`;this.errors.push(new gn(d,e))}checkSubtype(e,n){const d=Br(e,n);return d&&this.error(d),d}}class Wt{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const d=[];for(let _=1;_<e.length-1;_+=2){const y=e[_];if(typeof y!="string")return n.error(`Expected string, but found ${typeof y} instead.`,_);if(/[^a-zA-Z0-9_]/.test(y))return n.error("Variable names must contain only alphanumeric characters or '_'.",_);const b=n.parse(e[_+1],_+1);if(!b)return null;d.push([y,b])}const m=n.parse(e[e.length-1],e.length-1,n.expectedType,d);return m?new Wt(d,m):null}outputDefined(){return this.result.outputDefined()}}class Gr{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const d=e[1];return n.scope.has(d)?new Gr(d,n.scope.get(d)):n.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Pt{constructor(e,n,d){this.type=e,this.index=n,this.input=d}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const d=n.parse(e[1],1,Xe),m=n.parse(e[2],2,_n(n.expectedType||gt));return d&&m?new Pt(m.type.itemType,d,m):null}evaluate(e){const n=this.index.evaluate(e),d=this.input.evaluate(e);if(n<0)throw new qt(`Array index out of bounds: ${n} < 0.`);if(n>=d.length)throw new qt(`Array index out of bounds: ${n} > ${d.length-1}.`);if(n!==Math.floor(n))throw new qt(`Array index must be an integer, but found ${n} instead.`);return d[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class _t{constructor(e,n){this.type=vt,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const d=n.parse(e[1],1,gt),m=n.parse(e[2],2,gt);return d&&m?Fs(d.type,[vt,yt,Xe,Gn,gt])?new _t(d,m):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${$t(d.type)} instead`):null}evaluate(e){const n=this.needle.evaluate(e),d=this.haystack.evaluate(e);if(!d)return!1;if(!ir(n,["boolean","string","number","null"]))throw new qt(`Expected first argument to be of type boolean, string, number or null, but found ${$t(wi(n))} instead.`);if(!ir(d,["string","array"]))throw new qt(`Expected second argument to be of type array or string, but found ${$t(wi(d))} instead.`);return d.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class qr{constructor(e,n,d){this.type=Xe,this.needle=e,this.haystack=n,this.fromIndex=d}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const d=n.parse(e[1],1,gt),m=n.parse(e[2],2,gt);if(!d||!m)return null;if(!Fs(d.type,[vt,yt,Xe,Gn,gt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${$t(d.type)} instead`);if(e.length===4){const _=n.parse(e[3],3,Xe);return _?new qr(d,m,_):null}return new qr(d,m)}evaluate(e){const n=this.needle.evaluate(e),d=this.haystack.evaluate(e);if(!ir(n,["boolean","string","number","null"]))throw new qt(`Expected first argument to be of type boolean, string, number or null, but found ${$t(wi(n))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(e)),ir(d,["string"])){const _=d.indexOf(n,m);return _===-1?-1:[...d.slice(0,_)].length}if(ir(d,["array"]))return d.indexOf(n,m);throw new qt(`Expected second argument to be of type array or string, but found ${$t(wi(d))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Ct{constructor(e,n,d,m,_,y){this.inputType=e,this.type=n,this.input=d,this.cases=m,this.outputs=_,this.otherwise=y}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return n.error("Expected an even number of arguments.");let d,m;n.expectedType&&n.expectedType.kind!=="value"&&(m=n.expectedType);const _={},y=[];for(let P=2;P<e.length-1;P+=2){let D=e[P];const I=e[P+1];Array.isArray(D)||(D=[D]);const F=n.concat(P);if(D.length===0)return F.error("Expected at least one branch label.");for(const V of D){if(typeof V!="number"&&typeof V!="string")return F.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return F.error("Numeric branch labels must be integer values.");if(d){if(F.checkSubtype(d,wi(V)))return null}else d=wi(V);if(_[String(V)]!==void 0)return F.error("Branch labels must be unique.");_[String(V)]=y.length}const j=n.parse(I,P,m);if(!j)return null;m=m||j.type,y.push(j)}const b=n.parse(e[1],1,gt);if(!b)return null;const S=n.parse(e[e.length-1],e.length-1,m);return S?b.type.kind!=="value"&&n.concat(1).checkSubtype(d,b.type)?null:new Ct(d,m,b,_,y,S):null}evaluate(e){const n=this.input.evaluate(e);return(wi(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class Bs{constructor(e,n,d){this.type=e,this.branches=n,this.otherwise=d}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return n.error("Expected an odd number of arguments.");let d;n.expectedType&&n.expectedType.kind!=="value"&&(d=n.expectedType);const m=[];for(let y=1;y<e.length-1;y+=2){const b=n.parse(e[y],y,vt);if(!b)return null;const S=n.parse(e[y+1],y+1,d);if(!S)return null;m.push([b,S]),d=d||S.type}const _=n.parse(e[e.length-1],e.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new Bs(d,m,_)}evaluate(e){for(const[n,d]of this.branches)if(n.evaluate(e))return d.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,d]of this.branches)e(n),e(d);e(this.otherwise)}outputDefined(){return this.branches.every((([e,n])=>n.outputDefined()))&&this.otherwise.outputDefined()}}class qn{constructor(e,n,d,m){this.type=e,this.input=n,this.beginIndex=d,this.endIndex=m}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const d=n.parse(e[1],1,gt),m=n.parse(e[2],2,Xe);if(!d||!m)return null;if(!Fs(d.type,[_n(gt),yt,gt]))return n.error(`Expected first argument to be of type array or string, but found ${$t(d.type)} instead`);if(e.length===4){const _=n.parse(e[3],3,Xe);return _?new qn(d.type,d,m,_):null}return new qn(d.type,d,m)}evaluate(e){const n=this.input.evaluate(e),d=this.beginIndex.evaluate(e);let m;if(this.endIndex&&(m=this.endIndex.evaluate(e)),ir(n,["string"]))return[...n].slice(d,m).join("");if(ir(n,["array"]))return n.slice(d,m);throw new qt(`Expected first argument to be of type array or string, but found ${$t(wi(n))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Wr(a,e){const n=a.length-1;let d,m,_=0,y=n,b=0;for(;_<=y;)if(b=Math.floor((_+y)/2),d=a[b],m=a[b+1],d<=e){if(b===n||e<m)return b;_=b+1}else{if(!(d>e))throw new qt("Input is not a number.");y=b-1}return 0}class $a{constructor(e,n,d){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[m,_]of d)this.labels.push(m),this.outputs.push(_)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");const d=n.parse(e[1],1,Xe);if(!d)return null;const m=[];let _=null;n.expectedType&&n.expectedType.kind!=="value"&&(_=n.expectedType);for(let y=1;y<e.length;y+=2){const b=y===1?-1/0:e[y],S=e[y+1],P=y,D=y+1;if(typeof b!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(m.length&&m[m.length-1][0]>=b)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const I=n.parse(S,D,_);if(!I)return null;_=_||I.type,m.push([b,I])}return new $a(_,d,m)}evaluate(e){const n=this.labels,d=this.outputs;if(n.length===1)return d[0].evaluate(e);const m=this.input.evaluate(e);if(m<=n[0])return d[0].evaluate(e);const _=n.length;return m>=n[_-1]?d[_-1].evaluate(e):d[Wr(n,m)].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function fc(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Vs,xu,zf=(function(){if(xu)return Vs;function a(e,n,d,m){this.cx=3*e,this.bx=3*(d-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(m-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=d,this.p2y=m}return xu=1,Vs=a,a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,n){if(n===void 0&&(n=1e-6),e<0)return 0;if(e>1)return 1;for(var d=e,m=0;m<8;m++){var _=this.sampleCurveX(d)-e;if(Math.abs(_)<n)return d;var y=this.sampleCurveDerivativeX(d);if(Math.abs(y)<1e-6)break;d-=_/y}var b=0,S=1;for(d=e,m=0;m<20&&(_=this.sampleCurveX(d),!(Math.abs(_-e)<n));m++)e>_?b=d:S=d,d=.5*(S-b)+b;return d},solve:function(e,n){return this.sampleCurveY(this.solveCurveX(e,n))}},Vs})(),pc=fc(zf);class xn{constructor(e,n,d,m,_){this.type=e,this.operator=n,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[y,b]of _)this.labels.push(y),this.outputs.push(b)}static interpolationFactor(e,n,d,m){let _=0;if(e.name==="exponential")_=ma(n,e.base,d,m);else if(e.name==="linear")_=ma(n,1,d,m);else if(e.name==="cubic-bezier"){const y=e.controlPoints;_=new pc(y[0],y[1],y[2],y[3]).solve(ma(n,1,d,m))}return _}static parse(e,n){let[d,m,_,...y]=e;if(!Array.isArray(m)||m.length===0)return n.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const P=m[1];if(typeof P!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:P}}else{if(m[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const P=m.slice(1);if(P.length!==4||P.some((D=>typeof D!="number"||D<0||D>1)))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:P}}}if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(_=n.parse(_,2,Xe),!_)return null;const b=[];let S=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||n.expectedType==Or?n.expectedType&&n.expectedType.kind!=="value"&&(S=n.expectedType):S=Fn;for(let P=0;P<y.length;P+=2){const D=y[P],I=y[P+1],F=P+3,j=P+4;if(typeof D!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(b.length&&b[b.length-1][0]>=D)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const V=n.parse(I,j,S);if(!V)return null;S=S||V.type,b.push([D,V])}return ta(S,Xe)||ta(S,Ho)||ta(S,Fn)||ta(S,Zo)||ta(S,zs)||ta(S,Or)||ta(S,Rs)||ta(S,_n(Xe))?new xn(S,d,m,_,b):n.error(`Type ${$t(S)} is not interpolatable.`)}evaluate(e){const n=this.labels,d=this.outputs;if(n.length===1)return d[0].evaluate(e);const m=this.input.evaluate(e);if(m<=n[0])return d[0].evaluate(e);const _=n.length;if(m>=n[_-1])return d[_-1].evaluate(e);const y=Wr(n,m),b=xn.interpolationFactor(this.interpolation,m,n[y],n[y+1]),S=d[y].evaluate(e),P=d[y+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Fa(S,P,b);case"color":return xt.interpolate(S,P,b);case"padding":return on.interpolate(S,P,b);case"colorArray":return ut.interpolate(S,P,b);case"numberArray":return li.interpolate(S,P,b);case"variableAnchorOffsetCollection":return yn.interpolate(S,P,b);case"array":return Nr(S,P,b);case"projectionDefinition":return vn.interpolate(S,P,b)}case"interpolate-hcl":switch(this.type.kind){case"color":return xt.interpolate(S,P,b,"hcl");case"colorArray":return ut.interpolate(S,P,b,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return xt.interpolate(S,P,b,"lab");case"colorArray":return ut.interpolate(S,P,b,"lab")}}}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function ma(a,e,n,d){const m=d-n,_=a-n;return m===0?0:e===1?_/m:(Math.pow(e,_)-1)/(Math.pow(e,m)-1)}const ii={color:xt.interpolate,number:Fa,padding:on.interpolate,numberArray:li.interpolate,colorArray:ut.interpolate,variableAnchorOffsetCollection:yn.interpolate,array:Nr};class or{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let d=null;const m=n.expectedType;m&&m.kind!=="value"&&(d=m);const _=[];for(const b of e.slice(1)){const S=n.parse(b,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!S)return null;d=d||S.type,_.push(S)}if(!d)throw new Error("No output type");const y=m&&_.some((b=>Br(m,b.type)));return new or(y?gt:d,_)}evaluate(e){let n,d=null,m=0;for(const _ of this.args)if(m++,d=_.evaluate(e),d&&d instanceof jn&&!d.available&&(n||(n=d.name),d=null,m===this.args.length&&(d=n)),d!==null)break;return d}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function bu(a,e){return a==="=="||a==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Ns(a,e,n,d){return d.compare(e,n)===0}function gi(a,e,n){const d=a!=="=="&&a!=="!=";return class Ax{constructor(_,y,b){this.type=vt,this.lhs=_,this.rhs=y,this.collator=b,this.hasUntypedArgument=_.type.kind==="value"||y.type.kind==="value"}static parse(_,y){if(_.length!==3&&_.length!==4)return y.error("Expected two or three arguments.");const b=_[0];let S=y.parse(_[1],1,gt);if(!S)return null;if(!bu(b,S.type))return y.concat(1).error(`"${b}" comparisons are not supported for type '${$t(S.type)}'.`);let P=y.parse(_[2],2,gt);if(!P)return null;if(!bu(b,P.type))return y.concat(2).error(`"${b}" comparisons are not supported for type '${$t(P.type)}'.`);if(S.type.kind!==P.type.kind&&S.type.kind!=="value"&&P.type.kind!=="value")return y.error(`Cannot compare types '${$t(S.type)}' and '${$t(P.type)}'.`);d&&(S.type.kind==="value"&&P.type.kind!=="value"?S=new Mn(P.type,[S]):S.type.kind!=="value"&&P.type.kind==="value"&&(P=new Mn(S.type,[P])));let D=null;if(_.length===4){if(S.type.kind!=="string"&&P.type.kind!=="string"&&S.type.kind!=="value"&&P.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(D=y.parse(_[3],3,As),!D)return null}return new Ax(S,P,D)}evaluate(_){const y=this.lhs.evaluate(_),b=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const S=wi(y),P=wi(b);if(S.kind!==P.kind||S.kind!=="string"&&S.kind!=="number")throw new qt(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${S.kind}, ${P.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const S=wi(y),P=wi(b);if(S.kind!=="string"||P.kind!=="string")return e(_,y,b)}return this.collator?n(_,y,b,this.collator.evaluate(_)):e(_,y,b)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const mc=gi("==",(function(a,e,n){return e===n}),Ns),wu=gi("!=",(function(a,e,n){return e!==n}),(function(a,e,n,d){return!Ns(0,e,n,d)})),gc=gi("<",(function(a,e,n){return e<n}),(function(a,e,n,d){return d.compare(e,n)<0})),Rf=gi(">",(function(a,e,n){return e>n}),(function(a,e,n,d){return d.compare(e,n)>0})),Hr=gi("<=",(function(a,e,n){return e<=n}),(function(a,e,n,d){return d.compare(e,n)<=0})),el=gi(">=",(function(a,e,n){return e>=n}),(function(a,e,n,d){return d.compare(e,n)>=0}));class Zr{constructor(e,n,d){this.type=As,this.locale=d,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");const d=e[1];if(typeof d!="object"||Array.isArray(d))return n.error("Collator options argument must be an object.");const m=n.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,vt);if(!m)return null;const _=n.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,vt);if(!_)return null;let y=null;return d.locale&&(y=n.parse(d.locale,1,yt),!y)?null:new Zr(m,_,y)}evaluate(e){return new _u(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class ku{constructor(e,n,d,m,_){this.type=yt,this.number=e,this.locale=n,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");const d=n.parse(e[1],1,Xe);if(!d)return null;const m=e[2];if(typeof m!="object"||Array.isArray(m))return n.error("NumberFormat options argument must be an object.");let _=null;if(m.locale&&(_=n.parse(m.locale,1,yt),!_))return null;let y=null;if(m.currency&&(y=n.parse(m.currency,1,yt),!y))return null;let b=null;if(m["min-fraction-digits"]&&(b=n.parse(m["min-fraction-digits"],1,Xe),!b))return null;let S=null;return m["max-fraction-digits"]&&(S=n.parse(m["max-fraction-digits"],1,Xe),!S)?null:new ku(d,_,y,b,S)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Us{constructor(e){this.type=Is,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const d=e[1];if(!Array.isArray(d)&&typeof d=="object")return n.error("First argument must be an image or text section.");const m=[];let _=!1;for(let y=1;y<=e.length-1;++y){const b=e[y];if(_&&typeof b=="object"&&!Array.isArray(b)){_=!1;let S=null;if(b["font-scale"]&&(S=n.parse(b["font-scale"],1,Xe),!S))return null;let P=null;if(b["text-font"]&&(P=n.parse(b["text-font"],1,_n(yt)),!P))return null;let D=null;if(b["text-color"]&&(D=n.parse(b["text-color"],1,Fn),!D))return null;let I=null;if(b["vertical-align"]){if(typeof b["vertical-align"]=="string"&&!If.includes(b["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${b["vertical-align"]}' instead.`);if(I=n.parse(b["vertical-align"],1,yt),!I)return null}const F=m[m.length-1];F.scale=S,F.font=P,F.textColor=D,F.verticalAlign=I}else{const S=n.parse(e[y],1,gt);if(!S)return null;const P=S.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:S,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Us(m)}evaluate(e){return new Tn(this.sections.map((n=>{const d=n.content.evaluate(e);return wi(d)===$r?new yu("",d,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(e):null):new yu(ar(d),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null,n.verticalAlign?n.verticalAlign.evaluate(e):null)})))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor),n.verticalAlign&&e(n.verticalAlign)}outputDefined(){return!1}}class Kr{constructor(e){this.type=$r,this.input=e}static parse(e,n){if(e.length!==2)return n.error("Expected two arguments.");const d=n.parse(e[1],1,yt);return d?new Kr(d):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),d=jn.fromString(n);return d&&e.availableImages&&(d.available=e.availableImages.indexOf(n)>-1),d}eachChild(e){e(this.input)}outputDefined(){return!1}}class Yr{constructor(e){this.type=Xe,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const d=n.parse(e[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${$t(d.type)} instead.`):new Yr(d):null}evaluate(e){const n=this.input.evaluate(e);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new qt(`Expected value to be of type string or array, but found ${$t(wi(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Fi=8192;function _c(a,e){const n=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,e.z);return[Math.round(n*m*Fi),Math.round(d*m*Fi)]}function Xr(a,e){const n=Math.pow(2,e.z);return[(m=(a[0]/Fi+e.x)/n,360*m-180),(d=(a[1]/Fi+e.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function Gs(a,e){a[0]=Math.min(a[0],e[0]),a[1]=Math.min(a[1],e[1]),a[2]=Math.max(a[2],e[0]),a[3]=Math.max(a[3],e[1])}function lr(a,e){return!(a[0]<=e[0]||a[2]>=e[2]||a[1]<=e[1]||a[3]>=e[3])}function Ff(a,e,n){const d=a[0]-e[0],m=a[1]-e[1],_=a[0]-n[0],y=a[1]-n[1];return d*y-_*m==0&&d*_<=0&&m*y<=0}function tl(a,e,n,d){return(m=[d[0]-n[0],d[1]-n[1]])[0]*(_=[e[0]-a[0],e[1]-a[1]])[1]-m[1]*_[0]!=0&&!(!Su(a,e,n,d)||!Su(n,d,a,e));var m,_}function jf(a,e,n){for(const d of n)for(let m=0;m<d.length-1;++m)if(tl(a,e,d[m],d[m+1]))return!0;return!1}function Jr(a,e,n=!1){let d=!1;for(const b of e)for(let S=0;S<b.length-1;S++){if(Ff(a,b[S],b[S+1]))return n;(_=b[S])[1]>(m=a)[1]!=(y=b[S+1])[1]>m[1]&&m[0]<(y[0]-_[0])*(m[1]-_[1])/(y[1]-_[1])+_[0]&&(d=!d)}var m,_,y;return d}function il(a,e){for(const n of e)if(Jr(a,n))return!0;return!1}function yc(a,e){for(const n of a)if(!Jr(n,e))return!1;for(let n=0;n<a.length-1;++n)if(jf(a[n],a[n+1],e))return!1;return!0}function vc(a,e){for(const n of e)if(yc(a,n))return!0;return!1}function Su(a,e,n,d){const m=d[0]-n[0],_=d[1]-n[1],y=(a[0]-n[0])*_-m*(a[1]-n[1]),b=(e[0]-n[0])*_-m*(e[1]-n[1]);return y>0&&b<0||y<0&&b>0}function Tu(a,e,n){const d=[];for(let m=0;m<a.length;m++){const _=[];for(let y=0;y<a[m].length;y++){const b=_c(a[m][y],n);Gs(e,b),_.push(b)}d.push(_)}return d}function Mu(a,e,n){const d=[];for(let m=0;m<a.length;m++){const _=Tu(a[m],e,n);d.push(_)}return d}function xc(a,e,n,d){if(a[0]<n[0]||a[0]>n[2]){const m=.5*d;let _=a[0]-n[0]>m?-d:n[0]-a[0]>m?d:0;_===0&&(_=a[0]-n[2]>m?-d:n[2]-a[0]>m?d:0),a[0]+=_}Gs(e,a)}function bc(a,e,n,d){const m=Math.pow(2,d.z)*Fi,_=[d.x*Fi,d.y*Fi],y=[];for(const b of a)for(const S of b){const P=[S.x+_[0],S.y+_[1]];xc(P,e,n,m),y.push(P)}return y}function wc(a,e,n,d){const m=Math.pow(2,d.z)*Fi,_=[d.x*Fi,d.y*Fi],y=[];for(const S of a){const P=[];for(const D of S){const I=[D.x+_[0],D.y+_[1]];Gs(e,I),P.push(I)}y.push(P)}if(e[2]-e[0]<=m/2){(b=e)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const S of y)for(const P of S)xc(P,e,n,m)}var b;return y}class ur{constructor(e,n){this.type=vt,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Oa(e[1])){const d=e[1];if(d.type==="FeatureCollection"){const m=[];for(const _ of d.features){const{type:y,coordinates:b}=_.geometry;y==="Polygon"&&m.push(b),y==="MultiPolygon"&&m.push(...b)}if(m.length)return new ur(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ur(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ur(d,d)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(n,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],y=n.canonicalID();if(d.type==="Polygon"){const b=Tu(d.coordinates,_,y),S=bc(n.geometry(),m,_,y);if(!lr(m,_))return!1;for(const P of S)if(!Jr(P,b))return!1}if(d.type==="MultiPolygon"){const b=Mu(d.coordinates,_,y),S=bc(n.geometry(),m,_,y);if(!lr(m,_))return!1;for(const P of S)if(!il(P,b))return!1}return!0})(e,this.geometries);if(e.geometryType()==="LineString")return(function(n,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],y=n.canonicalID();if(d.type==="Polygon"){const b=Tu(d.coordinates,_,y),S=wc(n.geometry(),m,_,y);if(!lr(m,_))return!1;for(const P of S)if(!yc(P,b))return!1}if(d.type==="MultiPolygon"){const b=Mu(d.coordinates,_,y),S=wc(n.geometry(),m,_,y);if(!lr(m,_))return!1;for(const P of S)if(!vc(P,b))return!1}return!0})(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let kc=class{constructor(a=[],e=(n,d)=>n<d?-1:n>d?1:0){if(this.data=a,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:e,compare:n}=this,d=e[a];for(;a>0;){const m=a-1>>1,_=e[m];if(n(d,_)>=0)break;e[a]=_,a=m}e[a]=d}_down(a){const{data:e,compare:n}=this,d=this.length>>1,m=e[a];for(;a<d;){let _=1+(a<<1);const y=_+1;if(y<this.length&&n(e[y],e[_])<0&&(_=y),n(e[_],m)>=0)break;e[a]=e[_],a=_}e[a]=m}};function Pu(a,e,n=0,d=a.length-1,m=Sc){for(;d>n;){if(d-n>600){const S=d-n+1,P=e-n+1,D=Math.log(S),I=.5*Math.exp(2*D/3),F=.5*Math.sqrt(D*I*(S-I)/S)*(P-S/2<0?-1:1);Pu(a,e,Math.max(n,Math.floor(e-P*I/S+F)),Math.min(d,Math.floor(e+(S-P)*I/S+F)),m)}const _=a[e];let y=n,b=d;for(Qr(a,n,e),m(a[d],_)>0&&Qr(a,n,d);y<b;){for(Qr(a,y,b),y++,b--;m(a[y],_)<0;)y++;for(;m(a[b],_)>0;)b--}m(a[n],_)===0?Qr(a,n,b):(b++,Qr(a,b,d)),b<=e&&(n=b+1),e<=b&&(d=b-1)}}function Qr(a,e,n){const d=a[e];a[e]=a[n],a[n]=d}function Sc(a,e){return a<e?-1:a>e?1:0}function nl(a,e){if(a.length<=1)return[a];const n=[];let d,m;for(const _ of a){const y=$f(_);y!==0&&(_.area=Math.abs(y),m===void 0&&(m=y<0),m===y<0?(d&&n.push(d),d=[_]):d.push(_))}if(d&&n.push(d),e>1)for(let _=0;_<n.length;_++)n[_].length<=e||(Pu(n[_],e,1,n[_].length-1,Of),n[_]=n[_].slice(0,e));return n}function Of(a,e){return e.area-a.area}function $f(a){let e=0;for(let n,d,m=0,_=a.length,y=_-1;m<_;y=m++)n=a[m],d=a[y],e+=(d.x-n.x)*(n.y+d.y);return e}const Tc=1/298.257223563,qs=Tc*(2-Tc),Mc=Math.PI/180;class Cu{constructor(e){const n=6378.137*Mc*1e3,d=Math.cos(e*Mc),m=1/(1-qs*(1-d*d)),_=Math.sqrt(m);this.kx=n*_*d,this.ky=n*_*m*(1-qs)}distance(e,n){const d=this.wrap(e[0]-n[0])*this.kx,m=(e[1]-n[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(e,n){let d,m,_,y,b=1/0;for(let S=0;S<e.length-1;S++){let P=e[S][0],D=e[S][1],I=this.wrap(e[S+1][0]-P)*this.kx,F=(e[S+1][1]-D)*this.ky,j=0;I===0&&F===0||(j=(this.wrap(n[0]-P)*this.kx*I+(n[1]-D)*this.ky*F)/(I*I+F*F),j>1?(P=e[S+1][0],D=e[S+1][1]):j>0&&(P+=I/this.kx*j,D+=F/this.ky*j)),I=this.wrap(n[0]-P)*this.kx,F=(n[1]-D)*this.ky;const V=I*I+F*F;V<b&&(b=V,d=P,m=D,_=S,y=j)}return{point:[d,m],index:_,t:Math.max(0,Math.min(1,y))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Pc(a,e){return e[0]-a[0]}function al(a){return a[1]-a[0]+1}function ia(a,e){return a[1]>=a[0]&&a[1]<e}function rl(a,e){if(a[0]>a[1])return[null,null];const n=al(a);if(e){if(n===2)return[a,null];const m=Math.floor(n/2);return[[a[0],a[0]+m],[a[0]+m,a[1]]]}if(n===1)return[a,null];const d=Math.floor(n/2)-1;return[[a[0],a[0]+d],[a[0]+d+1,a[1]]]}function Eu(a,e){if(!ia(e,a.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let d=e[0];d<=e[1];++d)Gs(n,a[d]);return n}function Lu(a){const e=[1/0,1/0,-1/0,-1/0];for(const n of a)for(const d of n)Gs(e,d);return e}function Du(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function sl(a,e,n){if(!Du(a)||!Du(e))return NaN;let d=0,m=0;return a[2]<e[0]&&(d=e[0]-a[2]),a[0]>e[2]&&(d=a[0]-e[2]),a[1]>e[3]&&(m=a[1]-e[3]),a[3]<e[1]&&(m=e[1]-a[3]),n.distance([0,0],[d,m])}function dr(a,e,n){const d=n.pointOnLine(e,a);return n.distance(a,d.point)}function Au(a,e,n,d,m){const _=Math.min(dr(a,[n,d],m),dr(e,[n,d],m)),y=Math.min(dr(n,[a,e],m),dr(d,[a,e],m));return Math.min(_,y)}function Bf(a,e,n,d,m){if(!ia(e,a.length)||!ia(d,n.length))return 1/0;let _=1/0;for(let y=e[0];y<e[1];++y){const b=a[y],S=a[y+1];for(let P=d[0];P<d[1];++P){const D=n[P],I=n[P+1];if(tl(b,S,D,I))return 0;_=Math.min(_,Au(b,S,D,I,m))}}return _}function Cc(a,e,n,d,m){if(!ia(e,a.length)||!ia(d,n.length))return NaN;let _=1/0;for(let y=e[0];y<=e[1];++y)for(let b=d[0];b<=d[1];++b)if(_=Math.min(_,m.distance(a[y],n[b])),_===0)return _;return _}function Vf(a,e,n){if(Jr(a,e,!0))return 0;let d=1/0;for(const m of e){const _=m[0],y=m[m.length-1];if(_!==y&&(d=Math.min(d,dr(a,[y,_],n)),d===0))return d;const b=n.pointOnLine(m,a);if(d=Math.min(d,n.distance(a,b.point)),d===0)return d}return d}function Nf(a,e,n,d){if(!ia(e,a.length))return NaN;for(let _=e[0];_<=e[1];++_)if(Jr(a[_],n,!0))return 0;let m=1/0;for(let _=e[0];_<e[1];++_){const y=a[_],b=a[_+1];for(const S of n)for(let P=0,D=S.length,I=D-1;P<D;I=P++){const F=S[I],j=S[P];if(tl(y,b,F,j))return 0;m=Math.min(m,Au(y,b,F,j,d))}}return m}function Ec(a,e){for(const n of a)for(const d of n)if(Jr(d,e,!0))return!0;return!1}function Uf(a,e,n,d=1/0){const m=Lu(a),_=Lu(e);if(d!==1/0&&sl(m,_,n)>=d)return d;if(lr(m,_)){if(Ec(a,e))return 0}else if(Ec(e,a))return 0;let y=1/0;for(const b of a)for(let S=0,P=b.length,D=P-1;S<P;D=S++){const I=b[D],F=b[S];for(const j of e)for(let V=0,N=j.length,q=N-1;V<N;q=V++){const Y=j[q],se=j[V];if(tl(I,F,Y,se))return 0;y=Math.min(y,Au(I,F,Y,se,n))}}return y}function It(a,e,n,d,m,_){if(!_)return;const y=sl(Eu(d,_),m,n);y<e&&a.push([y,_,[0,0]])}function ol(a,e,n,d,m,_,y){if(!_||!y)return;const b=sl(Eu(d,_),Eu(m,y),n);b<e&&a.push([b,_,y])}function ll(a,e,n,d,m=1/0){let _=Math.min(d.distance(a[0],n[0][0]),m);if(_===0)return _;const y=new kc([[0,[0,a.length-1],[0,0]]],Pc),b=Lu(n);for(;y.length>0;){const S=y.pop();if(S[0]>=_)continue;const P=S[1],D=e?50:100;if(al(P)<=D){if(!ia(P,a.length))return NaN;if(e){const I=Nf(a,P,n,d);if(isNaN(I)||I===0)return I;_=Math.min(_,I)}else for(let I=P[0];I<=P[1];++I){const F=Vf(a[I],n,d);if(_=Math.min(_,F),_===0)return 0}}else{const I=rl(P,e);It(y,_,d,a,b,I[0]),It(y,_,d,a,b,I[1])}}return _}function ul(a,e,n,d,m,_=1/0){let y=Math.min(_,m.distance(a[0],n[0]));if(y===0)return y;const b=new kc([[0,[0,a.length-1],[0,n.length-1]]],Pc);for(;b.length>0;){const S=b.pop();if(S[0]>=y)continue;const P=S[1],D=S[2],I=e?50:100,F=d?50:100;if(al(P)<=I&&al(D)<=F){if(!ia(P,a.length)&&ia(D,n.length))return NaN;let j;if(e&&d)j=Bf(a,P,n,D,m),y=Math.min(y,j);else if(e&&!d){const V=a.slice(P[0],P[1]+1);for(let N=D[0];N<=D[1];++N)if(j=dr(n[N],V,m),y=Math.min(y,j),y===0)return y}else if(!e&&d){const V=n.slice(D[0],D[1]+1);for(let N=P[0];N<=P[1];++N)if(j=dr(a[N],V,m),y=Math.min(y,j),y===0)return y}else j=Cc(a,P,n,D,m),y=Math.min(y,j)}else{const j=rl(P,e),V=rl(D,d);ol(b,y,m,a,n,j[0],V[0]),ol(b,y,m,a,n,j[0],V[1]),ol(b,y,m,a,n,j[1],V[0]),ol(b,y,m,a,n,j[1],V[1])}}return y}function Iu(a){return a.type==="MultiPolygon"?a.coordinates.map((e=>({type:"Polygon",coordinates:e}))):a.type==="MultiLineString"?a.coordinates.map((e=>({type:"LineString",coordinates:e}))):a.type==="MultiPoint"?a.coordinates.map((e=>({type:"Point",coordinates:e}))):[a]}class cr{constructor(e,n){this.type=Xe,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Oa(e[1])){const d=e[1];if(d.type==="FeatureCollection")return new cr(d,d.features.map((m=>Iu(m.geometry))).flat());if(d.type==="Feature")return new cr(d,Iu(d.geometry));if("type"in d&&"coordinates"in d)return new cr(d,Iu(d))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(n,d){const m=n.geometry(),_=m.flat().map((S=>Xr([S.x,S.y],n.canonical)));if(m.length===0)return NaN;const y=new Cu(_[0][1]);let b=1/0;for(const S of d){switch(S.type){case"Point":b=Math.min(b,ul(_,!1,[S.coordinates],!1,y,b));break;case"LineString":b=Math.min(b,ul(_,!1,S.coordinates,!0,y,b));break;case"Polygon":b=Math.min(b,ll(_,!1,S.coordinates,y,b))}if(b===0)return b}return b})(e,this.geometries);if(e.geometryType()==="LineString")return(function(n,d){const m=n.geometry(),_=m.flat().map((S=>Xr([S.x,S.y],n.canonical)));if(m.length===0)return NaN;const y=new Cu(_[0][1]);let b=1/0;for(const S of d){switch(S.type){case"Point":b=Math.min(b,ul(_,!0,[S.coordinates],!1,y,b));break;case"LineString":b=Math.min(b,ul(_,!0,S.coordinates,!0,y,b));break;case"Polygon":b=Math.min(b,ll(_,!0,S.coordinates,y,b))}if(b===0)return b}return b})(e,this.geometries);if(e.geometryType()==="Polygon")return(function(n,d){const m=n.geometry();if(m.length===0||m[0].length===0)return NaN;const _=nl(m,0).map((S=>S.map((P=>P.map((D=>Xr([D.x,D.y],n.canonical))))))),y=new Cu(_[0][0][0][1]);let b=1/0;for(const S of d)for(const P of _){switch(S.type){case"Point":b=Math.min(b,ll([S.coordinates],!1,P,y,b));break;case"LineString":b=Math.min(b,ll(S.coordinates,!0,P,y,b));break;case"Polygon":b=Math.min(b,Uf(P,S.coordinates,y,b))}if(b===0)return b}return b})(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ws{constructor(e){this.type=gt,this.key=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const d=e[1];return d==null?n.error("Global state property must be defined."):typeof d!="string"?n.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new Ws(d)}evaluate(e){var n;const d=(n=e.globals)===null||n===void 0?void 0:n.globalState;return d&&Object.keys(d).length!==0?Os(d,this.key):null}eachChild(){}outputDefined(){return!1}}const es={"==":mc,"!=":wu,">":Rf,"<":gc,">=":el,"<=":Hr,array:Mn,at:Pt,boolean:Mn,case:Bs,coalesce:or,collator:Zr,format:Us,image:Kr,in:_t,"index-of":qr,interpolate:xn,"interpolate-hcl":xn,"interpolate-lab":xn,length:Yr,let:Wt,literal:pa,match:Ct,number:Mn,"number-format":ku,object:Mn,slice:qn,step:$a,string:Mn,"to-boolean":ka,"to-color":ka,"to-number":ka,"to-string":ka,var:Gr,within:ur,distance:cr,"global-state":Ws};class Wn{constructor(e,n,d,m){this.name=e,this.type=n,this._evaluate=d,this.args=m}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,n){const d=e[0],m=Wn.definitions[d];if(!m)return n.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(m)?m[0]:m.type,y=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,b=y.filter((([P])=>!Array.isArray(P)||P.length===e.length-1));let S=null;for(const[P,D]of b){S=new sr(n.registry,dl,n.path,null,n.scope);const I=[];let F=!1;for(let j=1;j<e.length;j++){const V=e[j],N=Array.isArray(P)?P[j-1]:P.type,q=S.parse(V,1+I.length,N);if(!q){F=!0;break}I.push(q)}if(!F)if(Array.isArray(P)&&P.length!==I.length)S.error(`Expected ${P.length} arguments, but found ${I.length} instead.`);else{for(let j=0;j<I.length;j++){const V=Array.isArray(P)?P[j]:P.type,N=I[j];S.concat(j+1).checkSubtype(V,N.type)}if(S.errors.length===0)return new Wn(d,_,D,I)}}if(b.length===1)n.errors.push(...S.errors);else{const P=(b.length?b:y).map((([I])=>{return F=I,Array.isArray(F)?`(${F.map($t).join(", ")})`:`(${$t(F.type)}...)`;var F})).join(" | "),D=[];for(let I=1;I<e.length;I++){const F=n.parse(e[I],1+D.length);if(!F)return null;D.push($t(F.type))}n.error(`Expected arguments of type ${P}, but found (${D.join(", ")}) instead.`)}return null}static register(e,n){Wn.definitions=n;for(const d in n)e[d]=Wn}}function Lc(a,[e,n,d,m]){e=e.evaluate(a),n=n.evaluate(a),d=d.evaluate(a);const _=m?m.evaluate(a):1,y=Ur(e,n,d,_);if(y)throw new qt(y);return new xt(e/255,n/255,d/255,_,!1)}function Dc(a,e){return a in e}function zu(a,e){const n=e[a];return n===void 0?null:n}function hr(a){return{type:a}}function dl(a){if(a instanceof Gr)return dl(a.boundExpression);if(a instanceof Wn&&a.name==="error"||a instanceof Zr||a instanceof ur||a instanceof cr||a instanceof Ws)return!1;const e=a instanceof ka||a instanceof Mn;let n=!0;return a.eachChild((d=>{n=e?n&&dl(d):n&&d instanceof pa})),!!n&&cl(a)&&hl(a,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function cl(a){if(a instanceof Wn&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ur||a instanceof cr)return!1;let e=!0;return a.eachChild((n=>{e&&!cl(n)&&(e=!1)})),e}function Hs(a){if(a instanceof Wn&&a.name==="feature-state")return!1;let e=!0;return a.eachChild((n=>{e&&!Hs(n)&&(e=!1)})),e}function hl(a,e){if(a instanceof Wn&&e.indexOf(a.name)>=0)return!1;let n=!0;return a.eachChild((d=>{n&&!hl(d,e)&&(n=!1)})),n}function Ac(a){return{result:"success",value:a}}function ts(a){return{result:"error",value:a}}function is(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Ic(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Ru(a){return!!a.expression&&a.expression.interpolated}function bt(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function fl(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)&&wi(a)===wa}function Gf(a){return a}function zc(a,e){const n=a.stops&&typeof a.stops[0][0]=="object",d=n||!(n||a.property!==void 0),m=a.type||(Ru(e)?"exponential":"interval"),_=(function(D){switch(D.type){case"color":return xt.parse;case"padding":return on.parse;case"numberArray":return li.parse;case"colorArray":return ut.parse;default:return null}})(e);if(_&&((a=mn({},a)).stops&&(a.stops=a.stops.map((D=>[D[0],_(D[1])]))),a.default=_(a.default?a.default:e.default)),a.colorSpace&&(y=a.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var y;const b=(function(D){switch(D){case"exponential":return Rc;case"interval":return Wf;case"categorical":return qf;case"identity":return Hf;default:throw new Error(`Unknown function type "${D}"`)}})(m);let S,P;if(m==="categorical"){S=Object.create(null);for(const D of a.stops)S[D[0]]=D[1];P=typeof a.stops[0][0]}if(n){const D={},I=[];for(let V=0;V<a.stops.length;V++){const N=a.stops[V],q=N[0].zoom;D[q]===void 0&&(D[q]={zoom:q,type:a.type,property:a.property,default:a.default,stops:[]},I.push(q)),D[q].stops.push([N[0].value,N[1]])}const F=[];for(const V of I)F.push([D[V].zoom,zc(D[V],e)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:xn.interpolationFactor.bind(void 0,j),zoomStops:F.map((V=>V[0])),evaluate:({zoom:V},N)=>Rc({stops:F,base:a.base},e,V).evaluate(V,N)}}if(d){const D=m==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:xn.interpolationFactor.bind(void 0,D),zoomStops:a.stops.map((I=>I[0])),evaluate:({zoom:I})=>b(a,e,I,S,P)}}return{kind:"source",evaluate(D,I){const F=I&&I.properties?I.properties[a.property]:void 0;return F===void 0?Zs(a.default,e.default):b(a,e,F,S,P)}}}function Zs(a,e,n){return a!==void 0?a:e!==void 0?e:n!==void 0?n:void 0}function qf(a,e,n,d,m){return Zs(typeof n===m?d[n]:void 0,a.default,e.default)}function Wf(a,e,n){if(bt(n)!=="number")return Zs(a.default,e.default);const d=a.stops.length;if(d===1||n<=a.stops[0][0])return a.stops[0][1];if(n>=a.stops[d-1][0])return a.stops[d-1][1];const m=Wr(a.stops.map((_=>_[0])),n);return a.stops[m][1]}function Rc(a,e,n){const d=a.base!==void 0?a.base:1;if(bt(n)!=="number")return Zs(a.default,e.default);const m=a.stops.length;if(m===1||n<=a.stops[0][0])return a.stops[0][1];if(n>=a.stops[m-1][0])return a.stops[m-1][1];const _=Wr(a.stops.map((D=>D[0])),n),y=(function(D,I,F,j){const V=j-F,N=D-F;return V===0?0:I===1?N/V:(Math.pow(I,N)-1)/(Math.pow(I,V)-1)})(n,d,a.stops[_][0],a.stops[_+1][0]),b=a.stops[_][1],S=a.stops[_+1][1],P=ii[e.type]||Gf;return typeof b.evaluate=="function"?{evaluate(...D){const I=b.evaluate.apply(void 0,D),F=S.evaluate.apply(void 0,D);if(I!==void 0&&F!==void 0)return P(I,F,y,a.colorSpace)}}:P(b,S,y,a.colorSpace)}function Hf(a,e,n){switch(e.type){case"color":n=xt.parse(n);break;case"formatted":n=Tn.fromString(n.toString());break;case"resolvedImage":n=jn.fromString(n.toString());break;case"padding":n=on.parse(n);break;case"colorArray":n=ut.parse(n);break;case"numberArray":n=li.parse(n);break;default:bt(n)===e.type||e.type==="enum"&&e.values[n]||(n=void 0)}return Zs(n,a.default,e.default)}Wn.register(es,{error:[{kind:"error"},[yt],(a,[e])=>{throw new qt(e.evaluate(a))}],typeof:[yt,[gt],(a,[e])=>$t(wi(e.evaluate(a)))],"to-rgba":[_n(Xe,4),[Fn],(a,[e])=>{const[n,d,m,_]=e.evaluate(a).rgb;return[255*n,255*d,255*m,_]}],rgb:[Fn,[Xe,Xe,Xe],Lc],rgba:[Fn,[Xe,Xe,Xe,Xe],Lc],has:{type:vt,overloads:[[[yt],(a,[e])=>Dc(e.evaluate(a),a.properties())],[[yt,wa],(a,[e,n])=>Dc(e.evaluate(a),n.evaluate(a))]]},get:{type:gt,overloads:[[[yt],(a,[e])=>zu(e.evaluate(a),a.properties())],[[yt,wa],(a,[e,n])=>zu(e.evaluate(a),n.evaluate(a))]]},"feature-state":[gt,[yt],(a,[e])=>zu(e.evaluate(a),a.featureState||{})],properties:[wa,[],a=>a.properties()],"geometry-type":[yt,[],a=>a.geometryType()],id:[gt,[],a=>a.id()],zoom:[Xe,[],a=>a.globals.zoom],"heatmap-density":[Xe,[],a=>a.globals.heatmapDensity||0],elevation:[Xe,[],a=>a.globals.elevation||0],"line-progress":[Xe,[],a=>a.globals.lineProgress||0],accumulated:[gt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Xe,hr(Xe),(a,e)=>{let n=0;for(const d of e)n+=d.evaluate(a);return n}],"*":[Xe,hr(Xe),(a,e)=>{let n=1;for(const d of e)n*=d.evaluate(a);return n}],"-":{type:Xe,overloads:[[[Xe,Xe],(a,[e,n])=>e.evaluate(a)-n.evaluate(a)],[[Xe],(a,[e])=>-e.evaluate(a)]]},"/":[Xe,[Xe,Xe],(a,[e,n])=>e.evaluate(a)/n.evaluate(a)],"%":[Xe,[Xe,Xe],(a,[e,n])=>e.evaluate(a)%n.evaluate(a)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(a,[e,n])=>Math.pow(e.evaluate(a),n.evaluate(a))],sqrt:[Xe,[Xe],(a,[e])=>Math.sqrt(e.evaluate(a))],log10:[Xe,[Xe],(a,[e])=>Math.log(e.evaluate(a))/Math.LN10],ln:[Xe,[Xe],(a,[e])=>Math.log(e.evaluate(a))],log2:[Xe,[Xe],(a,[e])=>Math.log(e.evaluate(a))/Math.LN2],sin:[Xe,[Xe],(a,[e])=>Math.sin(e.evaluate(a))],cos:[Xe,[Xe],(a,[e])=>Math.cos(e.evaluate(a))],tan:[Xe,[Xe],(a,[e])=>Math.tan(e.evaluate(a))],asin:[Xe,[Xe],(a,[e])=>Math.asin(e.evaluate(a))],acos:[Xe,[Xe],(a,[e])=>Math.acos(e.evaluate(a))],atan:[Xe,[Xe],(a,[e])=>Math.atan(e.evaluate(a))],min:[Xe,hr(Xe),(a,e)=>Math.min(...e.map((n=>n.evaluate(a))))],max:[Xe,hr(Xe),(a,e)=>Math.max(...e.map((n=>n.evaluate(a))))],abs:[Xe,[Xe],(a,[e])=>Math.abs(e.evaluate(a))],round:[Xe,[Xe],(a,[e])=>{const n=e.evaluate(a);return n<0?-Math.round(-n):Math.round(n)}],floor:[Xe,[Xe],(a,[e])=>Math.floor(e.evaluate(a))],ceil:[Xe,[Xe],(a,[e])=>Math.ceil(e.evaluate(a))],"filter-==":[vt,[yt,gt],(a,[e,n])=>a.properties()[e.value]===n.value],"filter-id-==":[vt,[gt],(a,[e])=>a.id()===e.value],"filter-type-==":[vt,[yt],(a,[e])=>a.geometryType()===e.value],"filter-<":[vt,[yt,gt],(a,[e,n])=>{const d=a.properties()[e.value],m=n.value;return typeof d==typeof m&&d<m}],"filter-id-<":[vt,[gt],(a,[e])=>{const n=a.id(),d=e.value;return typeof n==typeof d&&n<d}],"filter->":[vt,[yt,gt],(a,[e,n])=>{const d=a.properties()[e.value],m=n.value;return typeof d==typeof m&&d>m}],"filter-id->":[vt,[gt],(a,[e])=>{const n=a.id(),d=e.value;return typeof n==typeof d&&n>d}],"filter-<=":[vt,[yt,gt],(a,[e,n])=>{const d=a.properties()[e.value],m=n.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[vt,[gt],(a,[e])=>{const n=a.id(),d=e.value;return typeof n==typeof d&&n<=d}],"filter->=":[vt,[yt,gt],(a,[e,n])=>{const d=a.properties()[e.value],m=n.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[vt,[gt],(a,[e])=>{const n=a.id(),d=e.value;return typeof n==typeof d&&n>=d}],"filter-has":[vt,[gt],(a,[e])=>e.value in a.properties()],"filter-has-id":[vt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[vt,[_n(yt)],(a,[e])=>e.value.indexOf(a.geometryType())>=0],"filter-id-in":[vt,[_n(gt)],(a,[e])=>e.value.indexOf(a.id())>=0],"filter-in-small":[vt,[yt,_n(gt)],(a,[e,n])=>n.value.indexOf(a.properties()[e.value])>=0],"filter-in-large":[vt,[yt,_n(gt)],(a,[e,n])=>(function(d,m,_,y){for(;_<=y;){const b=_+y>>1;if(m[b]===d)return!0;m[b]>d?y=b-1:_=b+1}return!1})(a.properties()[e.value],n.value,0,n.value.length-1)],all:{type:vt,overloads:[[[vt,vt],(a,[e,n])=>e.evaluate(a)&&n.evaluate(a)],[hr(vt),(a,e)=>{for(const n of e)if(!n.evaluate(a))return!1;return!0}]]},any:{type:vt,overloads:[[[vt,vt],(a,[e,n])=>e.evaluate(a)||n.evaluate(a)],[hr(vt),(a,e)=>{for(const n of e)if(n.evaluate(a))return!0;return!1}]]},"!":[vt,[vt],(a,[e])=>!e.evaluate(a)],"is-supported-script":[vt,[yt],(a,[e])=>{const n=a.globals&&a.globals.isSupportedScript;return!n||n(e.evaluate(a))}],upcase:[yt,[yt],(a,[e])=>e.evaluate(a).toUpperCase()],downcase:[yt,[yt],(a,[e])=>e.evaluate(a).toLowerCase()],concat:[yt,hr(gt),(a,e)=>e.map((n=>ar(n.evaluate(a)))).join("")],"resolved-locale":[yt,[As],(a,[e])=>e.evaluate(a).resolvedLocale()]});class Fu{constructor(e,n,d){this.expression=e,this._warningHistory={},this._evaluator=new vu,this._defaultValue=n?(function(m){if(m.type==="color"&&fl(m.default))return new xt(0,0,0,0);switch(m.type){case"color":return xt.parse(m.default)||null;case"padding":return on.parse(m.default)||null;case"numberArray":return li.parse(m.default)||null;case"colorArray":return ut.parse(m.default)||null;case"variableAnchorOffsetCollection":return yn.parse(m.default)||null;case"projectionDefinition":return vn.parse(m.default)||null;default:return m.default===void 0?null:m.default}})(n):null,this._enumValues=n&&n.type==="enum"?n.values:null,this._globalState=d}evaluateWithoutErrorHandling(e,n,d,m,_,y){return this._globalState&&(e=fr(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(e,n,d,m,_,y){this._globalState&&(e=fr(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=y||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new qt(`Expected value to be one of ${Object.keys(this._enumValues).map((S=>JSON.stringify(S))).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function ns(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in es}function Ks(a,e,n){const d=new sr(es,dl,[],e?(function(_){const y={color:Fn,string:yt,number:Xe,enum:yt,boolean:vt,formatted:Is,padding:Zo,numberArray:zs,colorArray:Or,projectionDefinition:Ho,resolvedImage:$r,variableAnchorOffsetCollection:Rs};return _.type==="array"?_n(y[_.value]||gt,_.length):y[_.type]})(e):void 0),m=d.parse(a,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Ac(new Fu(m,e,n)):ts(d.errors)}class pl{constructor(e,n,d){this.kind=e,this._styleExpression=n,this.isStateDependent=e!=="constant"&&!Hs(n.expression),this.globalStateRefs=Ba(n.expression),this._globalState=d}evaluateWithoutErrorHandling(e,n,d,m,_,y){return this._globalState&&(e=fr(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,n,d,m,_,y)}evaluate(e,n,d,m,_,y){return this._globalState&&(e=fr(e,this._globalState)),this._styleExpression.evaluate(e,n,d,m,_,y)}}class ju{constructor(e,n,d,m,_){this.kind=e,this.zoomStops=d,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!Hs(n.expression),this.globalStateRefs=Ba(n.expression),this.interpolationType=m,this._globalState=_}evaluateWithoutErrorHandling(e,n,d,m,_,y){return this._globalState&&(e=fr(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,n,d,m,_,y)}evaluate(e,n,d,m,_,y){return this._globalState&&(e=fr(e,this._globalState)),this._styleExpression.evaluate(e,n,d,m,_,y)}interpolationFactor(e,n,d){return this.interpolationType?xn.interpolationFactor(this.interpolationType,e,n,d):0}}function Ou(a,e,n){const d=Ks(a,e,n);if(d.result==="error")return d;const m=d.value.expression,_=cl(m);if(!_&&!is(e))return ts([new gn("","data expressions not supported")]);const y=hl(m,["zoom"]);if(!y&&!Ic(e))return ts([new gn("","zoom expressions not supported")]);const b=gl(m);return b||y?b instanceof gn?ts([b]):b instanceof xn&&!Ru(e)?ts([new gn("",'"interpolate" expressions cannot be used with this property')]):Ac(b?new ju(_?"camera":"composite",d.value,b.labels,b instanceof xn?b.interpolation:void 0,n):new pl(_?"constant":"source",d.value,n)):ts([new gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ml{constructor(e,n){this._parameters=e,this._specification=n,mn(this,zc(this._parameters,this._specification))}static deserialize(e){return new ml(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function gl(a){let e=null;if(a instanceof Wt)e=gl(a.result);else if(a instanceof or){for(const n of a.args)if(e=gl(n),e)break}else(a instanceof $a||a instanceof xn)&&a.input instanceof Wn&&a.input.name==="zoom"&&(e=a);return e instanceof gn||a.eachChild((n=>{const d=gl(n);d instanceof gn?e=d:!e&&d?e=new gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&d&&e!==d&&(e=new gn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Ba(a,e=new Set){return a instanceof Ws&&e.add(a.key),a.eachChild((n=>{Ba(n,e)})),e}function fr(a,e){const{zoom:n,heatmapDensity:d,elevation:m,lineProgress:_,isSupportedScript:y,accumulated:b}=a??{};return{zoom:n,heatmapDensity:d,elevation:m,lineProgress:_,isSupportedScript:y,accumulated:b,globalState:e}}function $u(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const e of a.slice(1))if(!$u(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const Zf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ys(a,e){if(a==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};$u(a)||(a=Xs(a));const n=Ks(a,Zf,e);if(n.result==="error")throw new Error(n.value.map((d=>`${d.key}: ${d.message}`)).join(", "));return{filter:(d,m,_)=>n.value.evaluate(d,m,{},_),needGeometry:Fc(a),getGlobalStateRefs:()=>Ba(n.value.expression)}}function Kf(a,e){return a<e?-1:a>e?1:0}function Fc(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let e=1;e<a.length;e++)if(Fc(a[e]))return!0;return!1}function Xs(a){if(!a)return!0;const e=a[0];return a.length<=1?e!=="any":e==="=="?_l(a[1],a[2],"=="):e==="!="?Js(_l(a[1],a[2],"==")):e==="<"||e===">"||e==="<="||e===">="?_l(a[1],a[2],e):e==="any"?(n=a.slice(1),["any"].concat(n.map(Xs))):e==="all"?["all"].concat(a.slice(1).map(Xs)):e==="none"?["all"].concat(a.slice(1).map(Xs).map(Js)):e==="in"?jc(a[1],a.slice(2)):e==="!in"?Js(jc(a[1],a.slice(2))):e==="has"?Oc(a[1]):e!=="!has"||Js(Oc(a[1]));var n}function _l(a,e,n){switch(a){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,a,e]}}function jc(a,e){if(e.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((n=>typeof n!=typeof e[0]))?["filter-in-large",a,["literal",e.sort(Kf)]]:["filter-in-small",a,["literal",e]]}}function Oc(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Js(a){return["!",a]}function yl(a){const e=typeof a;if(e==="number"||e==="boolean"||e==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const _ of a)m+=`${yl(_)},`;return`${m}]`}const n=Object.keys(a).sort();let d="{";for(let m=0;m<n.length;m++)d+=`${JSON.stringify(n[m])}:${yl(a[n[m]])},`;return`${d}}`}function $c(a){let e="";for(const n of Ut)e+=`/${yl(a[n])}`;return e}function Bc(a){const e=a.value;return e?[new Ue(a.key,e,"constants have been deprecated as of v8")]:[]}function ki(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function pr(a){if(Array.isArray(a))return a.map(pr);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const e={};for(const n in a)e[n]=pr(a[n]);return e}return ki(a)}function On(a){const e=a.key,n=a.value,d=a.valueSpec||{},m=a.objectElementValidators||{},_=a.style,y=a.styleSpec,b=a.validateSpec;let S=[];const P=bt(n);if(P!=="object")return[new Ue(e,n,`object expected, ${P} found`)];for(const D in n){const I=D.split(".")[0],F=Os(d,I)||d["*"];let j;if(Os(m,I))j=m[I];else if(Os(d,I)){if(n[D]===void 0)continue;j=b}else if(m["*"])j=m["*"];else{if(!d["*"]){S.push(new Ue(e,n[D],`unknown property "${D}"`));continue}j=b}S=S.concat(j({key:(e&&`${e}.`)+D,value:n[D],valueSpec:F,style:_,styleSpec:y,object:n,objectKey:D,validateSpec:b},n))}for(const D in d)m[D]||d[D].required&&d[D].default===void 0&&n[D]===void 0&&S.push(new Ue(e,n,`missing required property "${D}"`));return S}function vl(a){const e=a.value,n=a.valueSpec,d=a.style,m=a.styleSpec,_=a.key,y=a.arrayElementValidator||a.validateSpec;if(bt(e)!=="array")return[new Ue(_,e,`array expected, ${bt(e)} found`)];if(n.length&&e.length!==n.length)return[new Ue(_,e,`array length ${n.length} expected, length ${e.length} found`)];let b={type:n.value,values:n.values};m.$version<7&&(b.function=n.function),bt(n.value)==="object"&&(b=n.value);let S=[];for(let P=0;P<e.length;P++)S=S.concat(y({array:e,arrayIndex:P,value:e[P],valueSpec:b,validateSpec:a.validateSpec,style:d,styleSpec:m,key:`${_}[${P}]`}));return S}function Qs(a){const e=a.key,n=a.value,d=a.valueSpec;let m=bt(n);return m==="number"&&n!=n&&(m="NaN"),m!=="number"?[new Ue(e,n,`number expected, ${m} found`)]:"minimum"in d&&n<d.minimum?[new Ue(e,n,`${n} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&n>d.maximum?[new Ue(e,n,`${n} is greater than the maximum value ${d.maximum}`)]:[]}function xl(a){const e=a.valueSpec,n=ki(a.value.type);let d,m,_,y={};const b=n!=="categorical"&&a.value.property===void 0,S=!b,P=bt(a.value.stops)==="array"&&bt(a.value.stops[0])==="array"&&bt(a.value.stops[0][0])==="object",D=On({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(j){if(n==="identity")return[new Ue(j.key,j.value,'identity function may not have a "stops" property')];let V=[];const N=j.value;return V=V.concat(vl({key:j.key,value:N,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:I})),bt(N)==="array"&&N.length===0&&V.push(new Ue(j.key,N,"array must have at least one stop")),V},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return n==="identity"&&b&&D.push(new Ue(a.key,a.value,'missing required property "property"')),n==="identity"||a.value.stops||D.push(new Ue(a.key,a.value,'missing required property "stops"')),n==="exponential"&&a.valueSpec.expression&&!Ru(a.valueSpec)&&D.push(new Ue(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(S&&!is(a.valueSpec)?D.push(new Ue(a.key,a.value,"property functions not supported")):b&&!Ic(a.valueSpec)&&D.push(new Ue(a.key,a.value,"zoom functions not supported"))),n!=="categorical"&&!P||a.value.property!==void 0||D.push(new Ue(a.key,a.value,'"property" property is required')),D;function I(j){let V=[];const N=j.value,q=j.key;if(bt(N)!=="array")return[new Ue(q,N,`array expected, ${bt(N)} found`)];if(N.length!==2)return[new Ue(q,N,`array length 2 expected, length ${N.length} found`)];if(P){if(bt(N[0])!=="object")return[new Ue(q,N,`object expected, ${bt(N[0])} found`)];if(N[0].zoom===void 0)return[new Ue(q,N,"object stop key must have zoom")];if(N[0].value===void 0)return[new Ue(q,N,"object stop key must have value")];if(_&&_>ki(N[0].zoom))return[new Ue(q,N[0].zoom,"stop zoom values must appear in ascending order")];ki(N[0].zoom)!==_&&(_=ki(N[0].zoom),m=void 0,y={}),V=V.concat(On({key:`${q}[0]`,value:N[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:Qs,value:F}}))}else V=V.concat(F({key:`${q}[0]`,value:N[0],validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},N));return ns(pr(N[1]))?V.concat([new Ue(`${q}[1]`,N[1],"expressions are not allowed in function stops.")]):V.concat(j.validateSpec({key:`${q}[1]`,value:N[1],valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function F(j,V){const N=bt(j.value),q=ki(j.value),Y=j.value!==null?j.value:V;if(d){if(N!==d)return[new Ue(j.key,Y,`${N} stop domain type must match previous stop domain type ${d}`)]}else d=N;if(N!=="number"&&N!=="string"&&N!=="boolean")return[new Ue(j.key,Y,"stop domain value must be a number, string, or boolean")];if(N!=="number"&&n!=="categorical"){let se=`number expected, ${N} found`;return is(e)&&n===void 0&&(se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ue(j.key,Y,se)]}return n!=="categorical"||N!=="number"||isFinite(q)&&Math.floor(q)===q?n!=="categorical"&&N==="number"&&m!==void 0&&q<m?[new Ue(j.key,Y,"stop domain values must appear in ascending order")]:(m=q,n==="categorical"&&q in y?[new Ue(j.key,Y,"stop domain values must be unique")]:(y[q]=!0,[])):[new Ue(j.key,Y,`integer expected, found ${q}`)]}}function Va(a){const e=(a.expressionContext==="property"?Ou:Ks)(pr(a.value),a.valueSpec);if(e.result==="error")return e.value.map((d=>new Ue(`${a.key}${d.key}`,a.value,d.message)));const n=e.value.expression||e.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!n.outputDefined())return[new Ue(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Hs(n))return[new Ue(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Hs(n))return[new Ue(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!hl(n,["zoom","feature-state"]))return[new Ue(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!cl(n))return[new Ue(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function eo(a){const e=a.key,n=a.value,d=bt(n);return d!=="string"?[new Ue(e,n,`color expected, ${d} found`)]:xt.parse(String(n))?[]:[new Ue(e,n,`color expected, "${n}" found`)]}function mr(a){const e=a.key,n=a.value,d=a.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(ki(n))===-1&&m.push(new Ue(e,n,`expected one of [${d.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(d.values).indexOf(ki(n))===-1&&m.push(new Ue(e,n,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(n)} found`)),m}function as(a){return $u(pr(a.value))?Va(mn({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Vc(a)}function Vc(a){const e=a.value,n=a.key;if(bt(e)!=="array")return[new Ue(n,e,`array expected, ${bt(e)} found`)];const d=a.styleSpec;let m,_=[];if(e.length<1)return[new Ue(n,e,"filter array must have at least 1 element")];switch(_=_.concat(mr({key:`${n}[0]`,value:e[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),ki(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ki(e[1])==="$type"&&_.push(new Ue(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&_.push(new Ue(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(m=bt(e[1]),m!=="string"&&_.push(new Ue(`${n}[1]`,e[1],`string expected, ${m} found`)));for(let y=2;y<e.length;y++)m=bt(e[y]),ki(e[1])==="$type"?_=_.concat(mr({key:`${n}[${y}]`,value:e[y],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&_.push(new Ue(`${n}[${y}]`,e[y],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let y=1;y<e.length;y++)_=_.concat(Vc({key:`${n}[${y}]`,value:e[y],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=bt(e[1]),e.length!==2?_.push(new Ue(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):m!=="string"&&_.push(new Ue(`${n}[1]`,e[1],`string expected, ${m} found`))}return _}function Nc(a,e){const n=a.key,d=a.validateSpec,m=a.style,_=a.styleSpec,y=a.value,b=a.objectKey,S=_[`${e}_${a.layerType}`];if(!S)return[];const P=b.match(/^(.*)-transition$/);if(e==="paint"&&P&&S[P[1]]&&S[P[1]].transition)return d({key:n,value:y,valueSpec:_.transition,style:m,styleSpec:_});const D=a.valueSpec||S[b];if(!D)return[new Ue(n,y,`unknown property "${b}"`)];let I;if(bt(y)==="string"&&is(D)&&!D.tokens&&(I=/^{([^}]+)}$/.exec(y)))return[new Ue(n,y,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(I[1])} }\`.`)];const F=[];return a.layerType==="symbol"&&b==="text-font"&&fl(pr(y))&&ki(y.type)==="identity"&&F.push(new Ue(n,y,'"text-font" does not support identity functions')),F.concat(d({key:a.key,value:y,valueSpec:D,style:m,styleSpec:_,expressionContext:"property",propertyType:e,propertyKey:b}))}function Uc(a){return Nc(a,"paint")}function Gc(a){return Nc(a,"layout")}function qc(a){let e=[];const n=a.value,d=a.key,m=a.style,_=a.styleSpec;if(bt(n)!=="object")return[new Ue(d,n,`object expected, ${bt(n)} found`)];n.type||n.ref||e.push(new Ue(d,n,'either "type" or "ref" is required'));let y=ki(n.type);const b=ki(n.ref);if(n.id){const S=ki(n.id);for(let P=0;P<a.arrayIndex;P++){const D=m.layers[P];ki(D.id)===S&&e.push(new Ue(d,n.id,`duplicate layer id "${n.id}", previously used at line ${D.id.__line__}`))}}if("ref"in n){let S;["type","source","source-layer","filter","layout"].forEach((P=>{P in n&&e.push(new Ue(d,n[P],`"${P}" is prohibited for ref layers`))})),m.layers.forEach((P=>{ki(P.id)===b&&(S=P)})),S?S.ref?e.push(new Ue(d,n.ref,"ref cannot reference another ref layer")):y=ki(S.type):e.push(new Ue(d,n.ref,`ref layer "${b}" not found`))}else if(y!=="background")if(n.source){const S=m.sources&&m.sources[n.source],P=S&&ki(S.type);S?P==="vector"&&y==="raster"?e.push(new Ue(d,n.source,`layer "${n.id}" requires a raster source`)):P!=="raster-dem"&&y==="hillshade"||P!=="raster-dem"&&y==="color-relief"?e.push(new Ue(d,n.source,`layer "${n.id}" requires a raster-dem source`)):P==="raster"&&y!=="raster"?e.push(new Ue(d,n.source,`layer "${n.id}" requires a vector source`)):P!=="vector"||n["source-layer"]?P==="raster-dem"&&y!=="hillshade"&&y!=="color-relief"?e.push(new Ue(d,n.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):y!=="line"||!n.paint||!n.paint["line-gradient"]||P==="geojson"&&S.lineMetrics||e.push(new Ue(d,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Ue(d,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new Ue(d,n.source,`source "${n.source}" not found`))}else e.push(new Ue(d,n,'missing required property "source"'));return e=e.concat(On({key:d,value:n,valueSpec:_.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${d}.type`,value:n.type,valueSpec:_.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:n,objectKey:"type"}),filter:as,layout:S=>On({layer:n,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>Gc(mn({layerType:y},P))}}),paint:S=>On({layer:n,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>Uc(mn({layerType:y},P))}})}})),e}function Na(a){const e=a.value,n=a.key,d=bt(e);return d!=="string"?[new Ue(n,e,`string expected, ${d} found`)]:[]}const Bu={promoteId:function({key:a,value:e}){if(bt(e)==="string")return Na({key:a,value:e});{const n=[];for(const d in e)n.push(...Na({key:`${a}.${d}`,value:e[d]}));return n}}};function Vu(a){const e=a.value,n=a.key,d=a.styleSpec,m=a.style,_=a.validateSpec;if(!e.type)return[new Ue(n,e,'"type" is required')];const y=ki(e.type);let b;switch(y){case"vector":case"raster":return b=On({key:n,value:e,valueSpec:d[`source_${y.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:Bu,validateSpec:_}),b;case"raster-dem":return b=(function(S){var P;const D=(P=S.sourceName)!==null&&P!==void 0?P:"",I=S.value,F=S.styleSpec,j=F.source_raster_dem,V=S.style;let N=[];const q=bt(I);if(I===void 0)return N;if(q!=="object")return N.push(new Ue("source_raster_dem",I,`object expected, ${q} found`)),N;const Y=ki(I.encoding)==="custom",se=["redFactor","greenFactor","blueFactor","baseShift"],X=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const ee in I)!Y&&se.includes(ee)?N.push(new Ue(ee,I[ee],`In "${D}": "${ee}" is only valid when "encoding" is set to "custom". ${X} encoding found`)):j[ee]?N=N.concat(S.validateSpec({key:ee,value:I[ee],valueSpec:j[ee],validateSpec:S.validateSpec,style:V,styleSpec:F})):N.push(new Ue(ee,I[ee],`unknown property "${ee}"`));return N})({sourceName:n,value:e,style:a.style,styleSpec:d,validateSpec:_}),b;case"geojson":if(b=On({key:n,value:e,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:_,objectElementValidators:Bu}),e.cluster)for(const S in e.clusterProperties){const[P,D]=e.clusterProperties[S],I=typeof P=="string"?[P,["accumulated"],["get",S]]:P;b.push(...Va({key:`${n}.${S}.map`,value:D,expressionContext:"cluster-map"})),b.push(...Va({key:`${n}.${S}.reduce`,value:I,expressionContext:"cluster-reduce"}))}return b;case"video":return On({key:n,value:e,valueSpec:d.source_video,style:m,validateSpec:_,styleSpec:d});case"image":return On({key:n,value:e,valueSpec:d.source_image,style:m,validateSpec:_,styleSpec:d});case"canvas":return[new Ue(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return mr({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function to(a){const e=a.value,n=a.styleSpec,d=n.light,m=a.style;let _=[];const y=bt(e);if(e===void 0)return _;if(y!=="object")return _=_.concat([new Ue("light",e,`object expected, ${y} found`)]),_;for(const b in e){const S=b.match(/^(.*)-transition$/);_=_.concat(S&&d[S[1]]&&d[S[1]].transition?a.validateSpec({key:b,value:e[b],valueSpec:n.transition,validateSpec:a.validateSpec,style:m,styleSpec:n}):d[b]?a.validateSpec({key:b,value:e[b],valueSpec:d[b],validateSpec:a.validateSpec,style:m,styleSpec:n}):[new Ue(b,e[b],`unknown property "${b}"`)])}return _}function Wc(a){const e=a.value,n=a.styleSpec,d=n.sky,m=a.style,_=bt(e);if(e===void 0)return[];if(_!=="object")return[new Ue("sky",e,`object expected, ${_} found`)];let y=[];for(const b in e)y=y.concat(d[b]?a.validateSpec({key:b,value:e[b],valueSpec:d[b],style:m,styleSpec:n}):[new Ue(b,e[b],`unknown property "${b}"`)]);return y}function Nu(a){const e=a.value,n=a.styleSpec,d=n.terrain,m=a.style;let _=[];const y=bt(e);if(e===void 0)return _;if(y!=="object")return _=_.concat([new Ue("terrain",e,`object expected, ${y} found`)]),_;for(const b in e)_=_.concat(d[b]?a.validateSpec({key:b,value:e[b],valueSpec:d[b],validateSpec:a.validateSpec,style:m,styleSpec:n}):[new Ue(b,e[b],`unknown property "${b}"`)]);return _}function Uu(a){let e=[];const n=a.value,d=a.key;if(Array.isArray(n)){const m=[],_=[];for(const y in n)n[y].id&&m.includes(n[y].id)&&e.push(new Ue(d,n,`all the sprites' ids must be unique, but ${n[y].id} is duplicated`)),m.push(n[y].id),n[y].url&&_.includes(n[y].url)&&e.push(new Ue(d,n,`all the sprites' URLs must be unique, but ${n[y].url} is duplicated`)),_.push(n[y].url),e=e.concat(On({key:`${d}[${y}]`,value:n[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return e}return Na({key:d,value:n})}function Hc(a){return!!a&&a.constructor===Object}function Gu(a){return Hc(a.value)?[]:[new Ue(a.key,a.value,`object expected, ${bt(a.value)} found`)]}const qu={"*":()=>[],array:vl,boolean:function(a){const e=a.value,n=a.key,d=bt(e);return d!=="boolean"?[new Ue(n,e,`boolean expected, ${d} found`)]:[]},number:Qs,color:eo,constants:Bc,enum:mr,filter:as,function:xl,layer:qc,object:On,source:Vu,light:to,sky:Wc,terrain:Nu,projection:function(a){const e=a.value,n=a.styleSpec,d=n.projection,m=a.style,_=bt(e);if(e===void 0)return[];if(_!=="object")return[new Ue("projection",e,`object expected, ${_} found`)];let y=[];for(const b in e)y=y.concat(d[b]?a.validateSpec({key:b,value:e[b],valueSpec:d[b],style:m,styleSpec:n}):[new Ue(b,e[b],`unknown property "${b}"`)]);return y},projectionDefinition:function(a){const e=a.key;let n=a.value;n=n instanceof String?n.valueOf():n;const d=bt(n);return d!=="array"||(function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"})(n)||(function(m){return!!["interpolate","step","literal"].includes(m[0])})(n)?["array","string"].includes(d)?[]:[new Ue(e,n,`projection expected, invalid type "${d}" found`)]:[new Ue(e,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:Na,formatted:function(a){return Na(a).length===0?[]:Va(a)},resolvedImage:function(a){return Na(a).length===0?[]:Va(a)},padding:function(a){const e=a.key,n=a.value;if(bt(n)==="array"){if(n.length<1||n.length>4)return[new Ue(e,n,`padding requires 1 to 4 values; ${n.length} values found`)];const d={type:"number"};let m=[];for(let _=0;_<n.length;_++)m=m.concat(a.validateSpec({key:`${e}[${_}]`,value:n[_],validateSpec:a.validateSpec,valueSpec:d}));return m}return Qs({key:e,value:n,valueSpec:{}})},numberArray:function(a){const e=a.key,n=a.value;if(bt(n)==="array"){const d={type:"number"};if(n.length<1)return[new Ue(e,n,"array length at least 1 expected, length 0 found")];let m=[];for(let _=0;_<n.length;_++)m=m.concat(a.validateSpec({key:`${e}[${_}]`,value:n[_],validateSpec:a.validateSpec,valueSpec:d}));return m}return Qs({key:e,value:n,valueSpec:{}})},colorArray:function(a){const e=a.key,n=a.value;if(bt(n)==="array"){if(n.length<1)return[new Ue(e,n,"array length at least 1 expected, length 0 found")];let d=[];for(let m=0;m<n.length;m++)d=d.concat(eo({key:`${e}[${m}]`,value:n[m]}));return d}return eo({key:e,value:n})},variableAnchorOffsetCollection:function(a){const e=a.key,n=a.value,d=bt(n),m=a.styleSpec;if(d!=="array"||n.length<1||n.length%2!=0)return[new Ue(e,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let y=0;y<n.length;y+=2)_=_.concat(mr({key:`${e}[${y}]`,value:n[y],valueSpec:m.layout_symbol["text-anchor"]})),_=_.concat(vl({key:`${e}[${y+1}]`,value:n[y+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return _},sprite:Uu,state:Gu,fontFaces:function(a){const e=a.key,n=a.value,d=a.validateSpec,m=a.styleSpec,_=a.style;if(!Hc(n))return[new Ue(e,n,`object expected, ${bt(n)} found`)];const y=[];for(const b in n){const S=n[b],P=bt(S);if(P==="string")y.push(...Na({key:`${e}.${b}`,value:S}));else if(P==="array"){const D={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[I,F]of S.entries())y.push(...On({key:`${e}.${b}[${I}]`,value:F,valueSpec:D,styleSpec:m,style:_,validateSpec:d}))}else y.push(new Ue(`${e}.${b}`,S,`string or array expected, ${P} found`))}return y}};function Ua(a){const e=a.value,n=a.valueSpec,d=a.styleSpec;return a.validateSpec=Ua,n.expression&&fl(ki(e))?xl(a):n.expression&&ns(pr(e))?Va(a):n.type&&qu[n.type]?qu[n.type](a):On(mn({},a,{valueSpec:n.type?d[n.type]:n}))}function Zc(a){const e=a.value,n=a.key,d=Na(a);return d.length||(e.indexOf("{fontstack}")===-1&&d.push(new Ue(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&d.push(new Ue(n,e,'"glyphs" url must include a "{range}" token'))),d}function Hn(a,e=Me){let n=[];return n=n.concat(Ua({key:"",value:a,valueSpec:e.$root,styleSpec:e,style:a,validateSpec:Ua,objectElementValidators:{glyphs:Zc,"*":()=>[]}})),a.constants&&(n=n.concat(Bc({key:"constants",value:a.constants}))),Kc(n)}function na(a){return function(e){return a(Object.assign({},e,{validateSpec:Ua}))}}function Kc(a){return[].concat(a).sort(((e,n)=>e.line-n.line))}function aa(a){return function(...e){return Kc(a.apply(this,e))}}Hn.source=aa(na(Vu)),Hn.sprite=aa(na(Uu)),Hn.glyphs=aa(na(Zc)),Hn.light=aa(na(to)),Hn.sky=aa(na(Wc)),Hn.terrain=aa(na(Nu)),Hn.state=aa(na(Gu)),Hn.layer=aa(na(qc)),Hn.filter=aa(na(as)),Hn.paintProperty=aa(na(Uc)),Hn.layoutProperty=aa(na(Gc));const Yf={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class io{constructor(e,n){this._globalState=n,this.setValue(e)}evaluate(){var e;return(e=this._literalValue)!==null&&e!==void 0?e:this._compiledValue.evaluate({})}setValue(e){if(e==null||e==="visible"||e==="none")return this._literalValue=e==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const n=Ks(e,Yf,this._globalState);if(n.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(n.value.map((d=>`${d.key}: ${d.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=n.value,this._globalStateRefs=Ba(n.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const no=Me,Gi=Hn,ao=Gi.light,Yc=Gi.sky,Xf=Gi.paintProperty,Jf=Gi.layoutProperty;function rs(a,e){let n=!1;if(e&&e.length)for(const d of e)a.fire(new Vt(new Error(d.message))),n=!0;return n}class ss{constructor(e,n,d){const m=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const y=new Int32Array(this.arrayBuffer);e=y[0],this.d=(n=y[1])+2*(d=y[2]);for(let S=0;S<this.d*this.d;S++){const P=y[3+S],D=y[3+S+1];m.push(P===D?null:y.subarray(P,D))}const b=y[3+m.length+1];this.keys=y.subarray(y[3+m.length],b),this.bboxes=y.subarray(b),this.insert=this._insertReadonly}else{this.d=n+2*d;for(let y=0;y<this.d*this.d;y++)m.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=e,this.padding=d,this.scale=n/e,this.uid=0;const _=d/n*e;this.min=-_,this.max=e+_}insert(e,n,d,m,_){this._forEachCell(n,d,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(n),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,n,d,m,_,y){this.cells[_].push(y)}query(e,n,d,m,_){const y=this.min,b=this.max;if(e<=y&&n<=y&&b<=d&&b<=m&&!_)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(e,n,d,m,this._queryCell,S,{},_),S}}_queryCell(e,n,d,m,_,y,b,S){const P=this.cells[_];if(P!==null){const D=this.keys,I=this.bboxes;for(let F=0;F<P.length;F++){const j=P[F];if(b[j]===void 0){const V=4*j;(S?S(I[V+0],I[V+1],I[V+2],I[V+3]):e<=I[V+2]&&n<=I[V+3]&&d>=I[V+0]&&m>=I[V+1])?(b[j]=!0,y.push(D[j])):b[j]=!1}}}}_forEachCell(e,n,d,m,_,y,b,S){const P=this._convertToCellCoord(e),D=this._convertToCellCoord(n),I=this._convertToCellCoord(d),F=this._convertToCellCoord(m);for(let j=P;j<=I;j++)for(let V=D;V<=F;V++){const N=this.d*V+j;if((!S||S(this._convertFromCellCoord(j),this._convertFromCellCoord(V),this._convertFromCellCoord(j+1),this._convertFromCellCoord(V+1)))&&_.call(this,e,n,d,m,N,y,b,S))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,n=3+this.cells.length+1+1;let d=0;for(let y=0;y<this.cells.length;y++)d+=this.cells[y].length;const m=new Int32Array(n+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=n;for(let y=0;y<e.length;y++){const b=e[y];m[3+y]=_,m.set(b,_),_+=b.length}return m[3+e.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+e.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(e,n){const d=e.toArrayBuffer();return n&&n.push(d),{buffer:d}}static deserialize(e){return new ss(e.buffer)}}const ra={};function tt(a,e,n={}){if(ra[a])throw new Error(`${a} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:a,writeable:!1}),ra[a]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}tt("Object",Object),tt("Set",Set),tt("TransferableGridIndex",ss),tt("Color",xt),tt("Error",Error),tt("AJAXError",ye),tt("ResolvedImage",jn),tt("StylePropertyFunction",ml),tt("StyleExpression",Fu,{omit:["_evaluator"]}),tt("ZoomDependentExpression",ju),tt("ZoomConstantExpression",pl),tt("CompoundExpression",Wn,{omit:["_evaluate"]});for(const a in es)es[a]._classRegistryKey||tt(`Expression_${a}`,es[a]);function bl(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Wu(a){return a.$name||a.constructor._classRegistryKey}function os(a){return!(function(e){if(e===null||typeof e!="object")return!1;const n=Wu(e);return!(!n||n==="Object")})(a)&&(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||bl(a)||za(a)||ArrayBuffer.isView(a)||a instanceof ImageData)}function ro(a,e){if(os(a))return(bl(a)||za(a))&&e&&e.push(a),ArrayBuffer.isView(a)&&e&&e.push(a.buffer),a instanceof ImageData&&e&&e.push(a.data.buffer),a;if(Array.isArray(a)){const _=[];for(const y of a)_.push(ro(y,e));return _}if(typeof a!="object")throw new Error("can't serialize object of type "+typeof a);const n=Wu(a);if(!n)throw new Error(`can't serialize object of unregistered class ${a.constructor.name}`);if(!ra[n])throw new Error(`${n} is not registered.`);const{klass:d}=ra[n],m=d.serialize?d.serialize(a,e):{};if(d.serialize){if(e&&m===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in a){if(!a.hasOwnProperty(_)||ra[n].omit.indexOf(_)>=0)continue;const y=a[_];m[_]=ra[n].shallow.indexOf(_)>=0?y:ro(y,e)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return n!=="Object"&&(m.$name=n),m}function so(a){if(os(a))return a;if(Array.isArray(a))return a.map(so);if(typeof a!="object")throw new Error("can't deserialize object of type "+typeof a);const e=Wu(a)||"Object";if(!ra[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:n}=ra[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(a);const d=Object.create(n.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const _=a[m];d[m]=ra[e].shallow.indexOf(m)>=0?_:so(_)}return d}class Hu{constructor(){this.first=!0}update(e,n){const d=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=n),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=d,!0))}}function oo(a){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))}function Zu(a){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))}function Xc(a){return/\s/u.test(String.fromCodePoint(a))}function ls(a){for(const e of a)if(Zu(e.codePointAt(0)))return!0;return!1}function Qf(a){for(const e of a)if(!Jc(e.codePointAt(0)))return!1;return!0}function wl(a){const e=a.map((n=>{try{return new RegExp(`\\p{sc=${n}}`,"u").source}catch{return null}})).filter((n=>n));return new RegExp(e.join("|"),"u")}const kl=wl(["Arab","Dupl","Mong","Ougr","Syrc"]);function Jc(a){return!kl.test(String.fromCodePoint(a))}function Ku(a){return!(Zu(a)||(e=a,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e}const Qc=wl(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Yu(a){return Qc.test(String.fromCodePoint(a))}function Xu(a,e){return!(!e&&Yu(a)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(a)))}function eh(a){for(const e of a)if(Yu(e.codePointAt(0)))return!0;return!1}const Ga=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){if(Ga.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(a,e){return s(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(a.pluginStatus!=="loading")return this.setState(a),a;const n=a.pluginURL,d=new Promise((_=>{this.loadScriptResolve=_}));e(n);const m=new Promise((_=>setTimeout((()=>_()),this.TIMEOUT)));if(yield Promise.race([d,m]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:n};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${n}`)}))}};class Nt{constructor(e,n){this.isSupportedScript=ep,this.zoom=e,n?(this.now=n.now||0,this.fadeDuration=n.fadeDuration||0,this.zoomHistory=n.zoomHistory||new Hu,this.transition=n.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hu,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,n=e-Math.floor(e),d=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*n}}}function ep(a){return(function(e,n){for(const d of e)if(!Xu(d.codePointAt(0),n))return!1;return!0})(a,Ga.getRTLTextPluginStatus()==="loaded")}const lo="-transition";class Sl{constructor(e,n,d){this.property=e,this.value=n,this.expression=(function(m,_,y){if(fl(m))return new ml(m,_);if(ns(m)){const b=Ou(m,_,y);if(b.result==="error")throw new Error(b.value.map((S=>`${S.key}: ${S.message}`)).join(", "));return b.value}{let b=m;return _.type==="color"&&typeof m=="string"?b=xt.parse(m):_.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?_.type!=="numberArray"||typeof m!="number"&&!Array.isArray(m)?_.type!=="colorArray"||typeof m!="string"&&!Array.isArray(m)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(m)?b=yn.parse(m):_.type==="projectionDefinition"&&typeof m=="string"&&(b=vn.parse(m)):b=ut.parse(m):b=li.parse(m):b=on.parse(m),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>b}}})(n===void 0?e.specification.default:n,e.specification,d)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,n,d){return this.property.possiblyEvaluate(this,e,n,d)}}class Tl{constructor(e,n){this.property=e,this.value=new Sl(e,void 0,n)}transitioned(e,n){return new th(this.property,this.value,n,Qi({},e.transition,this.transition),e.now)}untransitioned(){return new th(this.property,this.value,null,{},0)}}class Ju{constructor(e,n){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=n}getValue(e){return Rn(this._values[e].value.value)}setValue(e,n){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Tl(this._values[e].property,this._globalState)),this._values[e].value=new Sl(this._values[e].property,n===null?void 0:Rn(n),this._globalState)}getTransition(e){return Rn(this._values[e].transition)}setTransition(e,n){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Tl(this._values[e].property,this._globalState)),this._values[e].transition=Rn(n)||void 0}serialize(){const e={};for(const n of Object.keys(this._values)){const d=this.getValue(n);d!==void 0&&(e[n]=d);const m=this.getTransition(n);m!==void 0&&(e[`${n}${lo}`]=m)}return e}transitioned(e,n){const d=new ih(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(e,n._values[m]);return d}untransitioned(){const e=new ih(this._properties);for(const n of Object.keys(this._values))e._values[n]=this._values[n].untransitioned();return e}}class th{constructor(e,n,d,m,_){this.property=e,this.value=n,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,e.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(e,n,d){const m=e.now||0,_=this.value.possiblyEvaluate(e,n,d),y=this.prior;if(y){if(m>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(m<this.begin)return y.possiblyEvaluate(e,n,d);{const b=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(e,n,d),_,zn(b))}}return _}}class ih{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,n,d){const m=new uo(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(e,n,d);return m}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class nh{constructor(e,n){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=n}hasValue(e){return this._values[e].value!==void 0}getValue(e){return Rn(this._values[e].value)}setValue(e,n){this._values[e]=new Sl(this._values[e].property,n===null?void 0:Rn(n),this._globalState)}serialize(){const e={};for(const n of Object.keys(this._values)){const d=this.getValue(n);d!==void 0&&(e[n]=d)}return e}possiblyEvaluate(e,n,d){const m=new uo(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(e,n,d);return m}}class sa{constructor(e,n,d){this.property=e,this.value=n,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,n,d,m){return this.property.evaluate(this.value,this.parameters,e,n,d,m)}}class uo{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class at{constructor(e){this.specification=e}possiblyEvaluate(e,n){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(n)}interpolate(e,n,d){const m=ii[this.specification.type];return m?m(e,n,d):e}}class ot{constructor(e,n){this.specification=e,this.overrides=n}possiblyEvaluate(e,n,d,m){return new sa(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(n,null,{},d,m)}:e.expression,n)}interpolate(e,n,d){if(e.value.kind!=="constant"||n.value.kind!=="constant")return e;if(e.value.value===void 0||n.value.value===void 0)return new sa(this,{kind:"constant",value:void 0},e.parameters);const m=ii[this.specification.type];if(m){const _=m(e.value.value,n.value.value,d);return new sa(this,{kind:"constant",value:_},e.parameters)}return e}evaluate(e,n,d,m,_,y){return e.kind==="constant"?e.value:e.evaluate(n,d,m,_,y)}}class co extends ot{possiblyEvaluate(e,n,d,m){if(e.value===void 0)return new sa(this,{kind:"constant",value:void 0},n);if(e.expression.kind==="constant"){const _=e.expression.evaluate(n,null,{},d,m),y=e.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,b=this._calculate(y,y,y,n);return new sa(this,{kind:"constant",value:b},n)}if(e.expression.kind==="camera"){const _=this._calculate(e.expression.evaluate({zoom:n.zoom-1}),e.expression.evaluate({zoom:n.zoom}),e.expression.evaluate({zoom:n.zoom+1}),n);return new sa(this,{kind:"constant",value:_},n)}return new sa(this,e.expression,n)}evaluate(e,n,d,m,_,y){if(e.kind==="source"){const b=e.evaluate(n,d,m,_,y);return this._calculate(b,b,b,n)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(n.zoom)-1},d,m),e.evaluate({zoom:Math.floor(n.zoom)},d,m),e.evaluate({zoom:Math.floor(n.zoom)+1},d,m),n):e.value}_calculate(e,n,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:e,to:n}:{from:d,to:n}}interpolate(e){return e}}class Ml{constructor(e){this.specification=e}possiblyEvaluate(e,n,d,m){if(e.value!==void 0){if(e.expression.kind==="constant"){const _=e.expression.evaluate(n,null,{},d,m);return this._calculate(_,_,_,n)}return this._calculate(e.expression.evaluate(new Nt(Math.floor(n.zoom-1),n)),e.expression.evaluate(new Nt(Math.floor(n.zoom),n)),e.expression.evaluate(new Nt(Math.floor(n.zoom+1),n)),n)}}_calculate(e,n,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:e,to:n}:{from:d,to:n}}interpolate(e){return e}}class Pl{constructor(e){this.specification=e}possiblyEvaluate(e,n,d,m){return!!e.expression.evaluate(n,null,{},d,m)}interpolate(){return!1}}class bn{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const n in e){const d=e[n];d.specification.overridable&&this.overridableProperties.push(n);const m=this.defaultPropertyValues[n]=new Sl(d,void 0,void 0),_=this.defaultTransitionablePropertyValues[n]=new Tl(d,void 0);this.defaultTransitioningPropertyValues[n]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=m.possiblyEvaluate({})}}}tt("DataDrivenProperty",ot),tt("DataConstantProperty",at),tt("CrossFadedDataDrivenProperty",co),tt("CrossFadedProperty",Ml),tt("ColorRampProperty",Pl);class Zn extends At{constructor(e,n,d){if(super(),this.id=e.id,this.type=e.type,this._globalState=d,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this._visibilityExpression=(function(m,_){return new io(m,_)})(this.visibility,d),e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=Ys(e.filter,d)),n.layout&&(this._unevaluatedLayout=new nh(n.layout,d)),n.paint)){this._transitionablePaint=new Ju(n.paint,d);for(const m in e.paint)this.setPaintProperty(m,e.paint[m],{validate:!1});for(const m in e.layout)this.setLayoutProperty(m,e.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new uo(n.paint)}}setFilter(e){this.filter=e,this._featureFilter=Ys(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;for(const n of this._visibilityExpression.getGlobalStateRefs())e.add(n);if(this._unevaluatedLayout)for(const n in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[n];for(const m of d.getGlobalStateRefs())e.add(m)}for(const n of this._featureFilter.getGlobalStateRefs())e.add(n);return e}getPaintAffectingGlobalStateRefs(){var e;const n=new globalThis.Map;if(this._transitionablePaint)for(const d in this._transitionablePaint._values){const m=this._transitionablePaint._values[d].value;for(const _ of m.getGlobalStateRefs()){const y=(e=n.get(_))!==null&&e!==void 0?e:[];y.push({name:d,value:m.value}),n.set(_,y)}}return n}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(e,n,d={}){if(n==null||!this._validate(Jf,`layers.${this.id}.layout.${e}`,e,n,d))return e==="visibility"?(this.visibility=n,this._visibilityExpression.setValue(n),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(e,n)}getPaintProperty(e){return e.endsWith(lo)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,n,d={}){if(n!=null&&this._validate(Xf,`layers.${this.id}.paint.${e}`,e,n,d))return!1;if(e.endsWith(lo))return this._transitionablePaint.setTransition(e.slice(0,-11),n||void 0),!1;{const m=this._transitionablePaint._values[e],_=m.property.specification["property-type"]==="cross-faded-data-driven",y=m.value.isDataDriven(),b=m.value;this._transitionablePaint.setValue(e,n),this._handleSpecialPaintPropertyUpdate(e);const S=this._transitionablePaint._values[e].value;return S.isDataDriven()||y||_||this._handleOverridablePaintPropertyUpdate(e,b,S)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,n,d){return!1}isHidden(e=this.minzoom,n=!1){return!!(this.minzoom&&e<(n?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(e,n){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,n)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),er(e,((n,d)=>!(n===void 0||d==="layout"&&!Object.keys(n).length||d==="paint"&&!Object.keys(n).length)))}_validate(e,n,d,m,_={}){return(!_||_.validate!==!1)&&rs(this,e.call(Gi,{key:n,layerType:this.type,objectKey:d,value:m,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const n=this.paint.get(e);if(n instanceof sa&&is(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}let Qu;var ah={get paint(){return Qu=Qu||new bn({"raster-opacity":new at(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new at(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new at(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new at(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new at(Me.paint_raster["raster-saturation"]),"raster-contrast":new at(Me.paint_raster["raster-contrast"]),"raster-resampling":new at(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new at(Me.paint_raster["raster-fade-duration"])})}};class tp extends Zn{constructor(e,n){super(e,ah,n)}}const ip={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ho{constructor(e,n){this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ui{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,n){return e._trim(),n&&(e.isTransferred=!0,n.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const n=Object.create(this.prototype);return n.arrayBuffer=e.arrayBuffer,n.length=e.length,n.capacity=e.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Si(a,e=1){let n=0,d=0;return{members:a.map((m=>{const _=ip[m.type].BYTES_PER_ELEMENT,y=n=gr(n,Math.max(e,_)),b=m.components||1;return d=Math.max(d,_),n+=_*b,{name:m.name,type:m.type,components:b,offset:y}})),size:gr(n,Math.max(d,e)),alignment:e}}function gr(a,e){return Math.ceil(a/e)*e}class fo extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n){const d=this.length;return this.resize(d+1),this.emplace(d,e,n)}emplace(e,n,d){const m=2*e;return this.int16[m+0]=n,this.int16[m+1]=d,e}}fo.prototype.bytesPerElement=4,tt("StructArrayLayout2i4",fo);class Cl extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,d)}emplace(e,n,d,m){const _=3*e;return this.int16[_+0]=n,this.int16[_+1]=d,this.int16[_+2]=m,e}}Cl.prototype.bytesPerElement=6,tt("StructArrayLayout3i6",Cl);class ed extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,e,n,d,m)}emplace(e,n,d,m,_){const y=4*e;return this.int16[y+0]=n,this.int16[y+1]=d,this.int16[y+2]=m,this.int16[y+3]=_,e}}ed.prototype.bytesPerElement=8,tt("StructArrayLayout4i8",ed);class El extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,e,n,d,m,_,y)}emplace(e,n,d,m,_,y,b){const S=6*e;return this.int16[S+0]=n,this.int16[S+1]=d,this.int16[S+2]=m,this.int16[S+3]=_,this.int16[S+4]=y,this.int16[S+5]=b,e}}El.prototype.bytesPerElement=12,tt("StructArrayLayout2i4i12",El);class td extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,e,n,d,m,_,y)}emplace(e,n,d,m,_,y,b){const S=4*e,P=8*e;return this.int16[S+0]=n,this.int16[S+1]=d,this.uint8[P+4]=m,this.uint8[P+5]=_,this.uint8[P+6]=y,this.uint8[P+7]=b,e}}td.prototype.bytesPerElement=8,tt("StructArrayLayout2i4ub8",td);class po extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n){const d=this.length;return this.resize(d+1),this.emplace(d,e,n)}emplace(e,n,d){const m=2*e;return this.float32[m+0]=n,this.float32[m+1]=d,e}}po.prototype.bytesPerElement=8,tt("StructArrayLayout2f8",po);class Sa extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y,b,S,P,D){const I=this.length;return this.resize(I+1),this.emplace(I,e,n,d,m,_,y,b,S,P,D)}emplace(e,n,d,m,_,y,b,S,P,D,I){const F=10*e;return this.uint16[F+0]=n,this.uint16[F+1]=d,this.uint16[F+2]=m,this.uint16[F+3]=_,this.uint16[F+4]=y,this.uint16[F+5]=b,this.uint16[F+6]=S,this.uint16[F+7]=P,this.uint16[F+8]=D,this.uint16[F+9]=I,e}}Sa.prototype.bytesPerElement=20,tt("StructArrayLayout10ui20",Sa);class Ll extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y,b,S){const P=this.length;return this.resize(P+1),this.emplace(P,e,n,d,m,_,y,b,S)}emplace(e,n,d,m,_,y,b,S,P){const D=8*e;return this.uint16[D+0]=n,this.uint16[D+1]=d,this.uint16[D+2]=m,this.uint16[D+3]=_,this.uint16[D+4]=y,this.uint16[D+5]=b,this.uint16[D+6]=S,this.uint16[D+7]=P,e}}Ll.prototype.bytesPerElement=16,tt("StructArrayLayout8ui16",Ll);class mo extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y,b,S,P,D,I,F){const j=this.length;return this.resize(j+1),this.emplace(j,e,n,d,m,_,y,b,S,P,D,I,F)}emplace(e,n,d,m,_,y,b,S,P,D,I,F,j){const V=12*e;return this.int16[V+0]=n,this.int16[V+1]=d,this.int16[V+2]=m,this.int16[V+3]=_,this.uint16[V+4]=y,this.uint16[V+5]=b,this.uint16[V+6]=S,this.uint16[V+7]=P,this.int16[V+8]=D,this.int16[V+9]=I,this.int16[V+10]=F,this.int16[V+11]=j,e}}mo.prototype.bytesPerElement=24,tt("StructArrayLayout4i4ui4i24",mo);class Dl extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,d)}emplace(e,n,d,m){const _=3*e;return this.float32[_+0]=n,this.float32[_+1]=d,this.float32[_+2]=m,e}}Dl.prototype.bytesPerElement=12,tt("StructArrayLayout3f12",Dl);class go extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint32[1*e+0]=n,e}}go.prototype.bytesPerElement=4,tt("StructArrayLayout1ul4",go);class id extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y,b,S,P){const D=this.length;return this.resize(D+1),this.emplace(D,e,n,d,m,_,y,b,S,P)}emplace(e,n,d,m,_,y,b,S,P,D){const I=10*e,F=5*e;return this.int16[I+0]=n,this.int16[I+1]=d,this.int16[I+2]=m,this.int16[I+3]=_,this.int16[I+4]=y,this.int16[I+5]=b,this.uint32[F+3]=S,this.uint16[I+8]=P,this.uint16[I+9]=D,e}}id.prototype.bytesPerElement=20,tt("StructArrayLayout6i1ul2ui20",id);class us extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,e,n,d,m,_,y)}emplace(e,n,d,m,_,y,b){const S=6*e;return this.int16[S+0]=n,this.int16[S+1]=d,this.int16[S+2]=m,this.int16[S+3]=_,this.int16[S+4]=y,this.int16[S+5]=b,e}}us.prototype.bytesPerElement=12,tt("StructArrayLayout2i2i2i12",us);class _r extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_){const y=this.length;return this.resize(y+1),this.emplace(y,e,n,d,m,_)}emplace(e,n,d,m,_,y){const b=4*e,S=8*e;return this.float32[b+0]=n,this.float32[b+1]=d,this.float32[b+2]=m,this.int16[S+6]=_,this.int16[S+7]=y,e}}_r.prototype.bytesPerElement=16,tt("StructArrayLayout2f1f2i16",_r);class nd extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,e,n,d,m,_,y)}emplace(e,n,d,m,_,y,b){const S=16*e,P=4*e,D=8*e;return this.uint8[S+0]=n,this.uint8[S+1]=d,this.float32[P+1]=m,this.float32[P+2]=_,this.int16[D+6]=y,this.int16[D+7]=b,e}}nd.prototype.bytesPerElement=16,tt("StructArrayLayout2ub2f2i16",nd);class _o extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,d)}emplace(e,n,d,m){const _=3*e;return this.uint16[_+0]=n,this.uint16[_+1]=d,this.uint16[_+2]=m,e}}_o.prototype.bytesPerElement=6,tt("StructArrayLayout3ui6",_o);class yr extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y,b,S,P,D,I,F,j,V,N,q,Y){const se=this.length;return this.resize(se+1),this.emplace(se,e,n,d,m,_,y,b,S,P,D,I,F,j,V,N,q,Y)}emplace(e,n,d,m,_,y,b,S,P,D,I,F,j,V,N,q,Y,se){const X=24*e,ee=12*e,le=48*e;return this.int16[X+0]=n,this.int16[X+1]=d,this.uint16[X+2]=m,this.uint16[X+3]=_,this.uint32[ee+2]=y,this.uint32[ee+3]=b,this.uint32[ee+4]=S,this.uint16[X+10]=P,this.uint16[X+11]=D,this.uint16[X+12]=I,this.float32[ee+7]=F,this.float32[ee+8]=j,this.uint8[le+36]=V,this.uint8[le+37]=N,this.uint8[le+38]=q,this.uint32[ee+10]=Y,this.int16[X+22]=se,e}}yr.prototype.bytesPerElement=48,tt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",yr);class ad extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,d,m,_,y,b,S,P,D,I,F,j,V,N,q,Y,se,X,ee,le,ce,ke,Fe,Ie,Oe,Ze,Be){const Re=this.length;return this.resize(Re+1),this.emplace(Re,e,n,d,m,_,y,b,S,P,D,I,F,j,V,N,q,Y,se,X,ee,le,ce,ke,Fe,Ie,Oe,Ze,Be)}emplace(e,n,d,m,_,y,b,S,P,D,I,F,j,V,N,q,Y,se,X,ee,le,ce,ke,Fe,Ie,Oe,Ze,Be,Re){const Ee=32*e,et=16*e;return this.int16[Ee+0]=n,this.int16[Ee+1]=d,this.int16[Ee+2]=m,this.int16[Ee+3]=_,this.int16[Ee+4]=y,this.int16[Ee+5]=b,this.int16[Ee+6]=S,this.int16[Ee+7]=P,this.uint16[Ee+8]=D,this.uint16[Ee+9]=I,this.uint16[Ee+10]=F,this.uint16[Ee+11]=j,this.uint16[Ee+12]=V,this.uint16[Ee+13]=N,this.uint16[Ee+14]=q,this.uint16[Ee+15]=Y,this.uint16[Ee+16]=se,this.uint16[Ee+17]=X,this.uint16[Ee+18]=ee,this.uint16[Ee+19]=le,this.uint16[Ee+20]=ce,this.uint16[Ee+21]=ke,this.uint16[Ee+22]=Fe,this.uint32[et+12]=Ie,this.float32[et+13]=Oe,this.float32[et+14]=Ze,this.uint16[Ee+30]=Be,this.uint16[Ee+31]=Re,e}}ad.prototype.bytesPerElement=64,tt("StructArrayLayout8i15ui1ul2f2ui64",ad);class Al extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.float32[1*e+0]=n,e}}Al.prototype.bytesPerElement=4,tt("StructArrayLayout1f4",Al);class Il extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,d)}emplace(e,n,d,m){const _=3*e;return this.uint16[6*e+0]=n,this.float32[_+1]=d,this.float32[_+2]=m,e}}Il.prototype.bytesPerElement=12,tt("StructArrayLayout1ui2f12",Il);class rd extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,n,d)}emplace(e,n,d,m){const _=4*e;return this.uint32[2*e+0]=n,this.uint16[_+2]=d,this.uint16[_+3]=m,e}}rd.prototype.bytesPerElement=8,tt("StructArrayLayout1ul2ui8",rd);class v extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n){const d=this.length;return this.resize(d+1),this.emplace(d,e,n)}emplace(e,n,d){const m=2*e;return this.uint16[m+0]=n,this.uint16[m+1]=d,e}}v.prototype.bytesPerElement=4,tt("StructArrayLayout2ui4",v);class t extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint16[1*e+0]=n,e}}t.prototype.bytesPerElement=2,tt("StructArrayLayout1ui2",t);class o extends ui{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,e,n,d,m)}emplace(e,n,d,m,_){const y=4*e;return this.float32[y+0]=n,this.float32[y+1]=d,this.float32[y+2]=m,this.float32[y+3]=_,e}}o.prototype.bytesPerElement=16,tt("StructArrayLayout4f16",o);class p extends ho{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}p.prototype.size=20;class g extends id{get(e){return new p(this,e)}}tt("CollisionBoxArray",g);class x extends ho{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}x.prototype.size=48;class k extends yr{get(e){return new x(this,e)}}tt("PlacedSymbolArray",k);class M extends ho{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}M.prototype.size=64;class C extends ad{get(e){return new M(this,e)}}tt("SymbolInstanceArray",C);class A extends Al{getoffsetX(e){return this.float32[1*e+0]}}tt("GlyphOffsetArray",A);class R extends Cl{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}tt("SymbolLineVertexArray",R);class B extends ho{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}B.prototype.size=12;class $ extends Il{get(e){return new B(this,e)}}tt("TextAnchorOffsetArray",$);class G extends ho{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}G.prototype.size=8;class K extends rd{get(e){return new G(this,e)}}tt("FeatureIndexArray",K);class ie extends fo{}class ae extends fo{}class ne extends fo{}class oe extends El{}class he extends td{}class re extends po{}class de extends Sa{}class me extends Ll{}class ue extends mo{}class ve extends Dl{}class De extends go{}class Te extends us{}class Pe extends nd{}class Ce extends _o{}class Ge extends v{}const We=Si([{name:"a_pos",components:2,type:"Int16"}],4),{members:$e}=We;class Ke{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,n,d,m){const _=this.segments[this.segments.length-1];return e>Ke.MAX_VERTEX_ARRAY_LENGTH&&Ui(`Max vertices per segment is ${Ke.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ke.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+e>Ke.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m?this.createNewSegment(n,d,m):_}createNewSegment(e,n,d){const m={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(m.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(e,n,d){return this.prepareSegment(0,e,n,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const n in e.vaos)e.vaos[n].destroy()}static simpleSegment(e,n,d,m){return new Ke([{vertexOffset:e,primitiveOffset:n,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function pt(a,e){return 256*(a=Di(Math.floor(a),0,255))+Di(Math.floor(e),0,255)}Ke.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tt("SegmentVector",Ke);const Ft=Si([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ei=Si([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Ht,ni,Zt,_i={exports:{}},ai={exports:{}},qi={exports:{}},Ai=(function(){if(Zt)return _i.exports;Zt=1;var a=(Ht||(Ht=1,ai.exports=function(n,d){var m,_,y,b,S,P,D,I;for(_=n.length-(m=3&n.length),y=d,S=3432918353,P=461845907,I=0;I<_;)D=255&n.charCodeAt(I)|(255&n.charCodeAt(++I))<<8|(255&n.charCodeAt(++I))<<16|(255&n.charCodeAt(++I))<<24,++I,y=27492+(65535&(b=5*(65535&(y=(y^=D=(65535&(D=(D=(65535&D)*S+(((D>>>16)*S&65535)<<16)&4294967295)<<15|D>>>17))*P+(((D>>>16)*P&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(D=0,m){case 3:D^=(255&n.charCodeAt(I+2))<<16;case 2:D^=(255&n.charCodeAt(I+1))<<8;case 1:y^=D=(65535&(D=(D=(65535&(D^=255&n.charCodeAt(I)))*S+(((D>>>16)*S&65535)<<16)&4294967295)<<15|D>>>17))*P+(((D>>>16)*P&65535)<<16)&4294967295}return y^=n.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),ai.exports),e=(ni||(ni=1,qi.exports=function(n,d){for(var m,_=n.length,y=d^_,b=0;_>=4;)m=1540483477*(65535&(m=255&n.charCodeAt(b)|(255&n.charCodeAt(++b))<<8|(255&n.charCodeAt(++b))<<16|(255&n.charCodeAt(++b))<<24))+((1540483477*(m>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),_-=4,++b;switch(_){case 3:y^=(255&n.charCodeAt(b+2))<<16;case 2:y^=(255&n.charCodeAt(b+1))<<8;case 1:y=1540483477*(65535&(y^=255&n.charCodeAt(b)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),qi.exports);return _i.exports=a,_i.exports.murmur3=a,_i.exports.murmur2=e,_i.exports})(),Ti=T(Ai);class nn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,n,d,m){this.ids.push(qa(e)),this.positions.push(n,d,m)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const n=qa(e);let d=0,m=this.ids.length-1;for(;d<m;){const y=d+m>>1;this.ids[y]>=n?m=y:d=y+1}const _=[];for(;this.ids[d]===n;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(e,n){const d=new Float64Array(e.ids),m=new Uint32Array(e.positions);return Ta(d,m,0,d.length-1),n&&n.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(e){const n=new nn;return n.ids=e.ids,n.positions=e.positions,n.indexed=!0,n}}function qa(a){const e=+a;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Ti(String(a))}function Ta(a,e,n,d){for(;n<d;){const m=a[n+d>>1];let _=n-1,y=d+1;for(;;){do _++;while(a[_]<m);do y--;while(a[y]>m);if(_>=y)break;ga(a,_,y),ga(e,3*_,3*y),ga(e,3*_+1,3*y+1),ga(e,3*_+2,3*y+2)}y-n<d-y?(Ta(a,e,n,y),n=y+1):(Ta(a,e,y+1,d),d=y)}}function ga(a,e,n){const d=a[e];a[e]=a[n],a[n]=d}tt("FeaturePositionMap",nn);class Pn{constructor(e,n){this.gl=e.gl,this.location=n}}class vr extends Pn{constructor(e,n){super(e,n),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class yo extends Pn{constructor(e,n){super(e,n),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class xr extends Pn{constructor(e,n){super(e,n),this.current=xt.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Kn=new Float32Array(16);function _a(a){return[pt(255*a.r,255*a.g),pt(255*a.b,255*a.a)]}class oa{constructor(e,n,d){this.value=e,this.uniformNames=n.map((m=>`u_${m}`)),this.type=d}setUniform(e,n,d){e.set(d.constantOr(this.value))}getBinding(e,n,d){return this.type==="color"?new xr(e,n):new vr(e,n)}}class la{constructor(e,n){this.uniformNames=n.map((d=>`u_${d}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,n){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,n.y,n.height,n.width]}setUniform(e,n,d,m){let _=null;m==="u_pattern_to"?_=this.patternTo:m==="u_pattern_from"?_=this.patternFrom:m==="u_dasharray_to"?_=this.dashTo:m==="u_dasharray_from"?_=this.dashFrom:m==="u_pixel_ratio_to"?_=this.pixelRatioTo:m==="u_pixel_ratio_from"&&(_=this.pixelRatioFrom),_!==null&&e.set(_)}getBinding(e,n,d){return d.substr(0,9)==="u_pattern"||d.substr(0,12)==="u_dasharray_"?new yo(e,n):new vr(e,n)}}class Yt{constructor(e,n,d,m){this.expression=e,this.type=d,this.maxValue=0,this.paintVertexAttributes=n.map((_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0}))),this.paintVertexArray=new m}populatePaintArray(e,n,d){const m=this.paintVertexArray.length,_=this.expression.evaluate(new Nt(0,d),n,{},d.canonical,[],d.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(m,e,_)}updatePaintArray(e,n,d,m,_){const y=this.expression.evaluate(new Nt(0,_),d,m);this._setPaintValue(e,n,y)}_setPaintValue(e,n,d){if(this.type==="color"){const m=_a(d);for(let _=e;_<n;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=e;m<n;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Kt{constructor(e,n,d,m,_,y){this.expression=e,this.uniformNames=n.map((b=>`u_${b}_t`)),this.type=d,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=n.map((b=>({name:`a_${b}`,type:"Float32",components:d==="color"?4:2,offset:0}))),this.paintVertexArray=new y}populatePaintArray(e,n,d){const m=this.expression.evaluate(new Nt(this.zoom,d),n,{},d.canonical,[],d.formattedSection),_=this.expression.evaluate(new Nt(this.zoom+1,d),n,{},d.canonical,[],d.formattedSection),y=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(y,e,m,_)}updatePaintArray(e,n,d,m,_){const y=this.expression.evaluate(new Nt(this.zoom,_),d,m),b=this.expression.evaluate(new Nt(this.zoom+1,_),d,m);this._setPaintValue(e,n,y,b)}_setPaintValue(e,n,d,m){if(this.type==="color"){const _=_a(d),y=_a(m);for(let b=e;b<n;b++)this.paintVertexArray.emplace(b,_[0],_[1],y[0],y[1])}else{for(let _=e;_<n;_++)this.paintVertexArray.emplace(_,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,n){const d=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,m=Di(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);e.set(m)}getBinding(e,n,d){return new vr(e,n)}}class Bi{constructor(e,n,d,m,_,y){this.expression=e,this.type=n,this.useIntegerZoom=d,this.zoom=m,this.layerId=y,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(e,n,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(m,e,this.getPositionIds(n),d)}updatePaintArray(e,n,d,m,_){this._setPaintValues(e,n,this.getPositionIds(d),_)}_setPaintValues(e,n,d,m){const _=this.getPositions(m);if(!_||!d)return;const y=_[d.min],b=_[d.mid],S=_[d.max];if(y&&b&&S)for(let P=e;P<n;P++)this.emplace(this.zoomInPaintVertexArray,P,b,y),this.emplace(this.zoomOutPaintVertexArray,P,b,S)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const n=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,n,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,n,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Vi extends Bi{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return Ft.members}emplace(e,n,d,m){e.emplace(n,d.tlbr[0],d.tlbr[1],d.tlbr[2],d.tlbr[3],m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],d.pixelRatio,m.pixelRatio)}}class rh extends Bi{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return ei.members}emplace(e,n,d,m){e.emplace(n,0,d.y,d.height,d.width,0,m.y,m.height,m.width)}}class sh{constructor(e,n,d){this.binders={},this._buffers=[];const m=[];for(const _ in e.paint._values){if(!d(_))continue;const y=e.paint.get(_);if(!(y instanceof sa&&is(y.property.specification)))continue;const b=np(_,e.type),S=y.value,P=y.property.specification.type,D=y.property.useIntegerZoom,I=y.property.specification["property-type"],F=I==="cross-faded"||I==="cross-faded-data-driven";if(S.kind==="constant")this.binders[_]=F?new la(S.value,b):new oa(S.value,b,P),m.push(`/u_${_}`);else if(S.kind==="source"||F){const j=oh(_,P,"source");this.binders[_]=F?_==="line-dasharray"?new rh(S,P,D,n,j,e.id):new Vi(S,P,D,n,j,e.id):new Yt(S,b,P,j),m.push(`/a_${_}`)}else{const j=oh(_,P,"composite");this.binders[_]=new Kt(S,b,P,D,n,j),m.push(`/z_${_}`)}}this.cacheKey=m.sort().join("")}getMaxValue(e){const n=this.binders[e];return n instanceof Yt||n instanceof Kt?n.maxValue:0}populatePaintArrays(e,n,d){for(const m in this.binders){const _=this.binders[m];(_ instanceof Yt||_ instanceof Kt||_ instanceof Bi)&&_.populatePaintArray(e,n,d)}}setConstantPatternPositions(e,n){for(const d in this.binders){const m=this.binders[d];m instanceof la&&m.setConstantPatternPositions(e,n)}}setConstantDashPositions(e,n){for(const d in this.binders){const m=this.binders[d];m instanceof la&&m.setConstantDashPositions(e,n)}}updatePaintArrays(e,n,d,m,_){let y=!1;for(const b in e){const S=n.getPositions(b);for(const P of S){const D=d.feature(P.index);for(const I in this.binders){const F=this.binders[I];if((F instanceof Yt||F instanceof Kt||F instanceof Bi)&&F.expression.isStateDependent===!0){const j=m.paint.get(I);F.expression=j.value,F.updatePaintArray(P.start,P.end,D,e[b],_),y=!0}}}}return y}defines(){const e=[];for(const n in this.binders){const d=this.binders[n];(d instanceof oa||d instanceof la)&&e.push(...d.uniformNames.map((m=>`#define HAS_UNIFORM_${m}`)))}return e}getBinderAttributes(){const e=[];for(const n in this.binders){const d=this.binders[n];if(d instanceof Yt||d instanceof Kt)for(let m=0;m<d.paintVertexAttributes.length;m++)e.push(d.paintVertexAttributes[m].name);else if(d instanceof Bi){const m=d.getVertexAttributes();for(const _ of m)e.push(_.name)}}return e}getBinderUniforms(){const e=[];for(const n in this.binders){const d=this.binders[n];if(d instanceof oa||d instanceof la||d instanceof Kt)for(const m of d.uniformNames)e.push(m)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,n){const d=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof oa||_ instanceof la||_ instanceof Kt){for(const y of _.uniformNames)if(n[y]){const b=_.getBinding(e,n[y],y);d.push({name:y,property:m,binding:b})}}}return d}setUniforms(e,n,d,m){for(const{name:_,property:y,binding:b}of n)this.binders[y].setUniform(b,m,d.get(y),_)}updatePaintBuffers(e){this._buffers=[];for(const n in this.binders){const d=this.binders[n];if(e&&d instanceof Bi){const m=e.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof Yt||d instanceof Kt)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(e){for(const n in this.binders){const d=this.binders[n];(d instanceof Yt||d instanceof Kt||d instanceof Bi)&&d.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const n=this.binders[e];(n instanceof Yt||n instanceof Kt||n instanceof Bi)&&n.destroy()}}}class br{constructor(e,n,d=()=>!0){this.programConfigurations={};for(const m of e)this.programConfigurations[m.id]=new sh(m,n,d);this.needsUpload=!1,this._featureMap=new nn,this._bufferOffset=0}populatePaintArrays(e,n,d,m){for(const _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(e,n,m);n.id!==void 0&&this._featureMap.add(n.id,d,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,n,d,m){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(e,this._featureMap,n,_,m)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function np(a,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${e}-`,"").replace(/-/g,"_")]}function oh(a,e,n){const d={color:{source:po,composite:o},number:{source:Al,composite:po}},m=(function(_){return{"line-pattern":{source:de,composite:de},"fill-pattern":{source:de,composite:de},"fill-extrusion-pattern":{source:de,composite:de},"line-dasharray":{source:me,composite:me}}[_]})(a);return m&&m[n]||d[e][n]}tt("ConstantBinder",oa),tt("CrossFadedConstantBinder",la),tt("SourceExpressionBinder",Yt),tt("CrossFadedPatternBinder",Vi),tt("CrossFadedDasharrayBinder",rh),tt("CompositeExpressionBinder",Kt),tt("ProgramConfiguration",sh,{omit:["_buffers"]}),tt("ProgramConfigurationSet",br);const sd=Math.pow(2,14)-1,Wa=-sd-1;function Ha(a){const e=dt/a.extent,n=a.loadGeometry();for(let d=0;d<n.length;d++){const m=n[d];for(let _=0;_<m.length;_++){const y=m[_],b=Math.round(y.x*e),S=Math.round(y.y*e);y.x=Di(b,Wa,sd),y.y=Di(S,Wa,sd),(b<y.x||b>y.x+1||S<y.y||S>y.y+1)&&Ui("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Za(a,e){return{type:a.type,id:a.id,properties:a.properties,geometry:e?Ha(a):[]}}const od=-32768;function ld(a,e,n,d,m){a.emplaceBack(od+8*e+d,od+8*n+m)}class zl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((n=>n.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new ae,this.indexArray=new Ce,this.segments=new Ke,this.programConfigurations=new br(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((n=>n.isStateDependent())).map((n=>n.id))}populate(e,n,d){const m=this.layers[0],_=[];let y=null,b=!1,S=m.type==="heatmap";if(m.type==="circle"){const D=m;y=D.layout.get("circle-sort-key"),b=!y.isConstant(),S=S||D.paint.get("circle-pitch-alignment")==="map"}const P=S?n.subdivisionGranularity.circle:1;for(const{feature:D,id:I,index:F,sourceLayerIndex:j}of e){const V=this.layers[0]._featureFilter.needGeometry,N=Za(D,V);if(!this.layers[0]._featureFilter.filter(new Nt(this.zoom),N,d))continue;const q=b?y.evaluate(N,{},d):void 0,Y={id:I,properties:D.properties,type:D.type,sourceLayerIndex:j,index:F,geometry:V?N.geometry:Ha(D),patterns:{},sortKey:q};_.push(Y)}b&&_.sort(((D,I)=>D.sortKey-I.sortKey));for(const D of _){const{geometry:I,index:F,sourceLayerIndex:j}=D,V=e[F].feature;this.addFeature(D,I,F,d,P),n.featureIndex.insert(V,I,F,j,this.index)}}update(e,n,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$e),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,d,m,_=1){let y;switch(_){case 1:y=[0,7];break;case 3:y=[0,2,5,7];break;case 5:y=[0,1,3,4,6,7];break;case 7:y=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const b=y.length;for(const S of n)for(const P of S){const D=P.x,I=P.y;if(D<0||D>=dt||I<0||I>=dt)continue;const F=this.segments.prepareSegment(b*b,this.layoutVertexArray,this.indexArray,e.sortKey),j=F.vertexLength;for(let V=0;V<b;V++)for(let N=0;N<b;N++)ld(this.layoutVertexArray,D,I,y[N],y[V]);for(let V=0;V<b-1;V++)for(let N=0;N<b-1;N++){const q=j+V*b+N,Y=j+(V+1)*b+N;this.indexArray.emplaceBack(q,Y+1,q+1),this.indexArray.emplaceBack(q,Y,Y+1)}F.vertexLength+=b*b,F.primitiveLength+=(b-1)*(b-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{imagePositions:{},canonical:m})}}function Rl(a,e){for(let n=0;n<a.length;n++)if(Fl(e,a[n]))return!0;for(let n=0;n<e.length;n++)if(Fl(a,e[n]))return!0;return!!ap(a,e)}function lh(a,e,n){return!!Fl(a,e)||!!rp(e,a,n)}function Rg(a,e){if(a.length===1)return jg(e,a[0]);for(let n=0;n<e.length;n++){const d=e[n];for(let m=0;m<d.length;m++)if(Fl(a,d[m]))return!0}for(let n=0;n<a.length;n++)if(jg(e,a[n]))return!0;for(let n=0;n<e.length;n++)if(ap(a,e[n]))return!0;return!1}function Uw(a,e,n){if(a.length>1){if(ap(a,e))return!0;for(let d=0;d<e.length;d++)if(rp(e[d],a,n))return!0}for(let d=0;d<a.length;d++)if(rp(a[d],e,n))return!0;return!1}function ap(a,e){if(a.length===0||e.length===0)return!1;for(let n=0;n<a.length-1;n++){const d=a[n],m=a[n+1];for(let _=0;_<e.length-1;_++)if(Gw(d,m,e[_],e[_+1]))return!0}return!1}function Gw(a,e,n,d){return Un(a,n,d)!==Un(e,n,d)&&Un(a,e,n)!==Un(a,e,d)}function rp(a,e,n){const d=n*n;if(e.length===1)return a.distSqr(e[0])<d;for(let m=1;m<e.length;m++)if(Fg(a,e[m-1],e[m])<d)return!0;return!1}function Fg(a,e,n){const d=e.distSqr(n);if(d===0)return a.distSqr(e);const m=((a.x-e.x)*(n.x-e.x)+(a.y-e.y)*(n.y-e.y))/d;return a.distSqr(m<0?e:m>1?n:n.sub(e)._mult(m)._add(e))}function jg(a,e){let n,d,m,_=!1;for(let y=0;y<a.length;y++){n=a[y];for(let b=0,S=n.length-1;b<n.length;S=b++)d=n[b],m=n[S],d.y>e.y!=m.y>e.y&&e.x<(m.x-d.x)*(e.y-d.y)/(m.y-d.y)+d.x&&(_=!_)}return _}function Fl(a,e){let n=!1;for(let d=0,m=a.length-1;d<a.length;m=d++){const _=a[d],y=a[m];_.y>e.y!=y.y>e.y&&e.x<(y.x-_.x)*(e.y-_.y)/(y.y-_.y)+_.x&&(n=!n)}return n}function qw(a,e,n){const d=n[0],m=n[2];if(a.x<d.x&&e.x<d.x||a.x>m.x&&e.x>m.x||a.y<d.y&&e.y<d.y||a.y>m.y&&e.y>m.y)return!1;const _=Un(a,e,n[0]);return _!==Un(a,e,n[1])||_!==Un(a,e,n[2])||_!==Un(a,e,n[3])}function jl(a,e,n){const d=e.paint.get(a).value;return d.kind==="constant"?d.value:n.programConfigurations.get(e.id).getMaxValue(a)}function uh(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function dh(a,e,n,d,m){if(!e[0]&&!e[1])return a;const _=w.convert(e)._mult(m);n==="viewport"&&_._rotate(-d);const y=[];for(let b=0;b<a.length;b++)y.push(a[b].sub(_));return y}function Ww(a){const e=[];for(let n=0;n<a.length;n++){const d=a[n],m=e.at(-1);(n===0||m&&!d.equals(m))&&e.push(d)}return e}function Hw({queryGeometry:a,size:e},n){return lh(a,n,e)}function Zw({queryGeometry:a,size:e,transform:n,unwrappedTileID:d,getElevation:m},_){return lh(a,_,e*(n.projectTileCoordinates(_.x,_.y,d,m).signedDistanceFromCamera/n.cameraToCenterDistance))}function Kw({queryGeometry:a,size:e,transform:n,unwrappedTileID:d,getElevation:m},_){const y=n.projectTileCoordinates(_.x,_.y,d,m).signedDistanceFromCamera,b=e*(n.cameraToCenterDistance/y);return lh(a,sp(_,n,d,m),b)}function Yw({queryGeometry:a,size:e,transform:n,unwrappedTileID:d,getElevation:m},_){return lh(a,sp(_,n,d,m),e)}function Og({queryGeometry:a,size:e,transform:n,unwrappedTileID:d,getElevation:m,pitchAlignment:_="map",pitchScale:y="map"},b){const S=_==="map"?y==="map"?Hw:Zw:y==="map"?Kw:Yw,P={queryGeometry:a,size:e,transform:n,unwrappedTileID:d,getElevation:m};for(const D of b)for(const I of D)if(S(P,I))return!0;return!1}function sp(a,e,n,d){const m=e.projectTileCoordinates(a.x,a.y,n,d).point;return new w((.5*m.x+.5)*e.width,(.5*-m.y+.5)*e.height)}let $g,Bg;tt("CircleBucket",zl,{omit:["layers"]});var Xw={get paint(){return Bg=Bg||new bn({"circle-radius":new ot(Me.paint_circle["circle-radius"]),"circle-color":new ot(Me.paint_circle["circle-color"]),"circle-blur":new ot(Me.paint_circle["circle-blur"]),"circle-opacity":new ot(Me.paint_circle["circle-opacity"]),"circle-translate":new at(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new at(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new at(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new at(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ot(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ot(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ot(Me.paint_circle["circle-stroke-opacity"])})},get layout(){return $g=$g||new bn({"circle-sort-key":new ot(Me.layout_circle["circle-sort-key"])})}};class Jw extends Zn{constructor(e,n){super(e,Xw,n)}createBucket(e){return new zl(e)}queryRadius(e){const n=e;return jl("circle-radius",this,n)+jl("circle-stroke-width",this,n)+uh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:n,featureState:d,geometry:m,transform:_,pixelsToTileUnits:y,unwrappedTileID:b,getElevation:S}){const P=dh(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,y),D=this.paint.get("circle-radius").evaluate(n,d)+this.paint.get("circle-stroke-width").evaluate(n,d),I=this.paint.get("circle-pitch-scale"),F=this.paint.get("circle-pitch-alignment");let j,V;return F==="map"?(j=P,V=D*y):(j=(function(N,q,Y,se){return N.map((X=>sp(X,q,Y,se)))})(P,_,b,S),V=D),Og({queryGeometry:j,size:V,transform:_,unwrappedTileID:b,getElevation:S,pitchAlignment:F,pitchScale:I},m)}}class Vg extends zl{}let Ng;tt("HeatmapBucket",Vg,{omit:["layers"]});var Qw={get paint(){return Ng=Ng||new bn({"heatmap-radius":new ot(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ot(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new at(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pl(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new at(Me.paint_heatmap["heatmap-opacity"])})}};function op(a,{width:e,height:n},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==e*n*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${e*n*d}`)}else m=new Uint8Array(e*n*d);return a.width=e,a.height=n,a.data=m,a}function Ug(a,{width:e,height:n},d){if(e===a.width&&n===a.height)return;const m=op({},{width:e,height:n},d);lp(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,e),height:Math.min(a.height,n)},d),a.width=e,a.height=n,a.data=m.data}function lp(a,e,n,d,m,_){if(m.width===0||m.height===0)return e;if(m.width>a.width||m.height>a.height||n.x>a.width-m.width||n.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>e.width||m.height>e.height||d.x>e.width-m.width||d.y>e.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const y=a.data,b=e.data;if(y===b)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<m.height;S++){const P=((n.y+S)*a.width+n.x)*_,D=((d.y+S)*e.width+d.x)*_;for(let I=0;I<m.width*_;I++)b[D+I]=y[P+I]}return e}class ud{constructor(e,n){op(this,e,1,n)}resize(e){Ug(this,e,1)}clone(){return new ud({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,d,m,_){lp(e,n,d,m,_,1)}}class $n{constructor(e,n){op(this,e,4,n)}resize(e){Ug(this,e,4)}replace(e,n){n?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new $n({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,d,m,_){lp(e,n,d,m,_,4)}setPixel(e,n,d){const m=4*(e*this.width+n);this.data[m+0]=Math.round(255*d.r/d.a),this.data[m+1]=Math.round(255*d.g/d.a),this.data[m+2]=Math.round(255*d.b/d.a),this.data[m+3]=Math.round(255*d.a)}}function Gg(a){const e={},n=a.resolution||256,d=a.clips?a.clips.length:1,m=a.image||new $n({width:n,height:d});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const _=(y,b,S)=>{e[a.evaluationKey]=S;const P=a.expression.evaluate(e);m.setPixel(y/4/n,b/4,P)};if(a.clips)for(let y=0,b=0;y<d;++y,b+=4*n)for(let S=0,P=0;S<n;S++,P+=4){const D=S/(n-1),{start:I,end:F}=a.clips[y];_(b,P,I*(1-D)+F*D)}else for(let y=0,b=0;y<n;y++,b+=4)_(0,b,y/(n-1));return m}tt("AlphaImage",ud),tt("RGBAImage",$n);const up="big-fb";class e0 extends Zn{createBucket(e){return new Vg(e)}constructor(e,n){super(e,Qw,n),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Gg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(up)&&this.heatmapFbos.delete(up)}queryRadius(e){return jl("heatmap-radius",this,e)}queryIntersectsFeature({queryGeometry:e,feature:n,featureState:d,geometry:m,transform:_,pixelsToTileUnits:y,unwrappedTileID:b,getElevation:S}){return Og({queryGeometry:e,size:this.paint.get("heatmap-radius").evaluate(n,d)*y,transform:_,unwrappedTileID:b,getElevation:S},m)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let qg;var t0={get paint(){return qg=qg||new bn({"hillshade-illumination-direction":new at(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new at(Me.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new at(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new at(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new at(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new at(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new at(Me.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new at(Me.paint_hillshade["hillshade-method"])})}};class i0 extends Zn{constructor(e,n){super(e,t0,n),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,n=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const _=Math.max(e.length,n.length,d.length,m.length);e=e.concat(Array(_-e.length).fill(e.at(-1))),n=n.concat(Array(_-n.length).fill(n.at(-1))),d=d.concat(Array(_-d.length).fill(d.at(-1))),m=m.concat(Array(_-m.length).fill(m.at(-1)));const y=n.map(jr);return{directionRadians:e.map(jr),altitudeRadians:y,shadowColor:m,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let Wg;var n0={get paint(){return Wg=Wg||new bn({"color-relief-opacity":new at(Me["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Pl(Me["paint_color-relief"]["color-relief-color"])})}};class dp{constructor(e,n,d,m){this.context=e,this.format=d,this.texture=e.gl.createTexture(),this.update(n,m)}update(e,n,d){const{width:m,height:_}=e,y=!(this.size&&this.size[0]===m&&this.size[1]===_||d),{context:b}=this,{gl:S}=b;if(this.useMipmap=!!(n&&n.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),b.pixelStoreUnpackFlipY.set(!1),b.pixelStoreUnpack.set(1),b.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!n||n.premultiply!==!1)),y)this.size=[m,_],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||za(e)?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,m,_,0,this.format,S.UNSIGNED_BYTE,e.data);else{const{x:P,y:D}=d||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||za(e)?S.texSubImage2D(S.TEXTURE_2D,0,P,D,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,P,D,m,_,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D),b.pixelStoreUnpackFlipY.setDefault(),b.pixelStoreUnpack.setDefault(),b.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,n,d){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),e!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,e),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||e),this.filter=e),n!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,n),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,n),this.wrap=n)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Hg{constructor(e,n,d,m=1,_=1,y=1,b=0){if(this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Ui(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=n.height;const S=this.dim=n.height-2;switch(this.data=new Uint32Array(n.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=_,this.blueFactor=y,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<S;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(S,P)]=this.data[this._idx(S-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,S)]=this.data[this._idx(P,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<S;P++)for(let D=0;D<S;D++){const I=this.get(P,D);I>this.max&&(this.max=I),I<this.min&&(this.min=I)}}get(e,n){const d=new Uint8Array(this.data.buffer),m=4*this._idx(e,n);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,n){if(e<-1||e>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${e}, y: ${n}, dim: ${this.dim}`);return(n+1)*this.stride+(e+1)}unpack(e,n,d){return e*this.redFactor+n*this.greenFactor+d*this.blueFactor-this.baseShift}pack(e){return Zg(e,this.getUnpackVector())}getPixels(){return new $n({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,n,d){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let m=n*this.dim,_=n*this.dim+this.dim,y=d*this.dim,b=d*this.dim+this.dim;switch(n){case-1:m=_-1;break;case 1:_=m+1}switch(d){case-1:y=b-1;break;case 1:b=y+1}const S=-n*this.dim,P=-d*this.dim;for(let D=y;D<b;D++)for(let I=m;I<_;I++)this.data[this._idx(I,D)]=e.data[this._idx(I+S,D+P)]}}function Zg(a,e){const n=e[0],d=e[1],m=e[2],_=e[3],y=Math.min(n,d,m),b=Math.round((a+_)/y);return{r:Math.floor(b*y/n)%256,g:Math.floor(b*y/d)%256,b:Math.floor(b*y/m)%256}}tt("DEMData",Hg);class a0 extends Zn{constructor(e,n){super(e,n0,n)}_createColorRamp(e){const n={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof pl&&d._styleExpression.expression instanceof xn){this.colorRampExpression=d;const y=d._styleExpression.expression;n.elevationStops=y.labels,n.colorStops=[];for(const b of n.elevationStops)n.colorStops.push(y.evaluate({globals:{elevation:b}}))}if(n.elevationStops.length<1&&(n.elevationStops=[0],n.colorStops=[xt.transparent]),n.elevationStops.length<2&&(n.elevationStops.push(n.elevationStops[0]+1),n.colorStops.push(n.colorStops[0])),n.elevationStops.length<=e)return n;const m={elevationStops:[],colorStops:[]},_=(n.elevationStops.length-1)/(e-1);for(let y=0;y<n.elevationStops.length-.5;y+=_)m.elevationStops.push(n.elevationStops[Math.round(y)]),m.colorStops.push(n.colorStops[Math.round(y)]);return Ui(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${e}, provided: ${n.elevationStops.length}`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,n,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(n),_=new $n({width:m.colorStops.length,height:1}),y=new $n({width:m.colorStops.length,height:1});for(let b=0;b<m.elevationStops.length;b++){const S=Zg(m.elevationStops[b],d);y.setPixel(0,b,new xt(S.r/255,S.g/255,S.b/255,1)),_.setPixel(0,b,m.colorStops[b])}return this.colorRampTextures={elevationTexture:new dp(e,y,e.gl.RGBA),colorTexture:new dp(e,_,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const r0=Si([{name:"a_pos",components:2,type:"Int16"}],4),{members:s0}=r0;function ch(a,e,n){const d=n.patternDependencies;let m=!1;for(const _ of e){const y=_.paint.get(`${a}-pattern`);y.isConstant()||(m=!0);const b=y.constantOr(null);b&&(m=!0,d[b.to]=!0,d[b.from]=!0)}return m}function cp(a,e,n,d,m){const{zoom:_}=d,y=m.patternDependencies;for(const b of e){const S=b.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:_-1},n,{},m.availableImages),D=S.evaluate({zoom:_},n,{},m.availableImages),I=S.evaluate({zoom:_+1},n,{},m.availableImages);P=P&&P.name?P.name:P,D=D&&D.name?D.name:D,I=I&&I.name?I.name:I,y[P]=!0,y[D]=!0,y[I]=!0,n.patterns[b.id]={min:P,mid:D,max:I}}}return n}function Kg(a,e,n,d,m){let _;if(m===(function(y,b,S,P){let D=0;for(let I=b,F=S-P;I<S;I+=P)D+=(y[F]-y[I])*(y[I+1]+y[F+1]),F=I;return D})(a,e,n,d)>0)for(let y=e;y<n;y+=d)_=Qg(y/d|0,a[y],a[y+1],_);else for(let y=n-d;y>=e;y-=d)_=Qg(y/d|0,a[y],a[y+1],_);return _&&Ol(_,_.next)&&(fd(_),_=_.next),_}function vo(a,e){if(!a)return a;e||(e=a);let n,d=a;do if(n=!1,d.steiner||!Ol(d,d.next)&&Ii(d.prev,d,d.next)!==0)d=d.next;else{if(fd(d),d=e=d.prev,d===d.next)break;n=!0}while(n||d!==e);return e}function dd(a,e,n,d,m,_,y){if(!a)return;!y&&_&&(function(S,P,D,I){let F=S;do F.z===0&&(F.z=hp(F.x,F.y,P,D,I)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==S);F.prevZ.nextZ=null,F.prevZ=null,(function(j){let V,N=1;do{let q,Y=j;j=null;let se=null;for(V=0;Y;){V++;let X=Y,ee=0;for(let ce=0;ce<N&&(ee++,X=X.nextZ,X);ce++);let le=N;for(;ee>0||le>0&&X;)ee!==0&&(le===0||!X||Y.z<=X.z)?(q=Y,Y=Y.nextZ,ee--):(q=X,X=X.nextZ,le--),se?se.nextZ=q:j=q,q.prevZ=se,se=q;Y=X}se.nextZ=null,N*=2}while(V>1)})(F)})(a,d,m,_);let b=a;for(;a.prev!==a.next;){const S=a.prev,P=a.next;if(_?l0(a,d,m,_):o0(a))e.push(S.i,a.i,P.i),fd(a),a=P.next,b=P.next;else if((a=P)===b){y?y===1?dd(a=u0(vo(a),e),e,n,d,m,_,2):y===2&&d0(a,e,n,d,m,_):dd(vo(a),e,n,d,m,_,1);break}}}function o0(a){const e=a.prev,n=a,d=a.next;if(Ii(e,n,d)>=0)return!1;const m=e.x,_=n.x,y=d.x,b=e.y,S=n.y,P=d.y,D=Math.min(m,_,y),I=Math.min(b,S,P),F=Math.max(m,_,y),j=Math.max(b,S,P);let V=d.next;for(;V!==e;){if(V.x>=D&&V.x<=F&&V.y>=I&&V.y<=j&&cd(m,b,_,S,y,P,V.x,V.y)&&Ii(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function l0(a,e,n,d){const m=a.prev,_=a,y=a.next;if(Ii(m,_,y)>=0)return!1;const b=m.x,S=_.x,P=y.x,D=m.y,I=_.y,F=y.y,j=Math.min(b,S,P),V=Math.min(D,I,F),N=Math.max(b,S,P),q=Math.max(D,I,F),Y=hp(j,V,e,n,d),se=hp(N,q,e,n,d);let X=a.prevZ,ee=a.nextZ;for(;X&&X.z>=Y&&ee&&ee.z<=se;){if(X.x>=j&&X.x<=N&&X.y>=V&&X.y<=q&&X!==m&&X!==y&&cd(b,D,S,I,P,F,X.x,X.y)&&Ii(X.prev,X,X.next)>=0||(X=X.prevZ,ee.x>=j&&ee.x<=N&&ee.y>=V&&ee.y<=q&&ee!==m&&ee!==y&&cd(b,D,S,I,P,F,ee.x,ee.y)&&Ii(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;X&&X.z>=Y;){if(X.x>=j&&X.x<=N&&X.y>=V&&X.y<=q&&X!==m&&X!==y&&cd(b,D,S,I,P,F,X.x,X.y)&&Ii(X.prev,X,X.next)>=0)return!1;X=X.prevZ}for(;ee&&ee.z<=se;){if(ee.x>=j&&ee.x<=N&&ee.y>=V&&ee.y<=q&&ee!==m&&ee!==y&&cd(b,D,S,I,P,F,ee.x,ee.y)&&Ii(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}function u0(a,e){let n=a;do{const d=n.prev,m=n.next.next;!Ol(d,m)&&Xg(d,n,n.next,m)&&hd(d,m)&&hd(m,d)&&(e.push(d.i,n.i,m.i),fd(n),fd(n.next),n=a=m),n=n.next}while(n!==a);return vo(n)}function d0(a,e,n,d,m,_){let y=a;do{let b=y.next.next;for(;b!==y.prev;){if(y.i!==b.i&&m0(y,b)){let S=Jg(y,b);return y=vo(y,y.next),S=vo(S,S.next),dd(y,e,n,d,m,_,0),void dd(S,e,n,d,m,_,0)}b=b.next}y=y.next}while(y!==a)}function c0(a,e){let n=a.x-e.x;return n===0&&(n=a.y-e.y,n===0)&&(n=(a.next.y-a.y)/(a.next.x-a.x)-(e.next.y-e.y)/(e.next.x-e.x)),n}function h0(a,e){const n=(function(m,_){let y=_;const b=m.x,S=m.y;let P,D=-1/0;if(Ol(m,y))return y;do{if(Ol(m,y.next))return y.next;if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){const N=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(N<=b&&N>D&&(D=N,P=y.x<y.next.x?y:y.next,N===b))return P}y=y.next}while(y!==_);if(!P)return null;const I=P,F=P.x,j=P.y;let V=1/0;y=P;do{if(b>=y.x&&y.x>=F&&b!==y.x&&Yg(S<j?b:D,S,F,j,S<j?D:b,S,y.x,y.y)){const N=Math.abs(S-y.y)/(b-y.x);hd(y,m)&&(N<V||N===V&&(y.x>P.x||y.x===P.x&&f0(P,y)))&&(P=y,V=N)}y=y.next}while(y!==I);return P})(a,e);if(!n)return e;const d=Jg(n,a);return vo(d,d.next),vo(n,n.next)}function f0(a,e){return Ii(a.prev,a,e.prev)<0&&Ii(e.next,a,a.next)<0}function hp(a,e,n,d,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-n)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-d)*m|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p0(a){let e=a,n=a;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==a);return n}function Yg(a,e,n,d,m,_,y,b){return(m-y)*(e-b)>=(a-y)*(_-b)&&(a-y)*(d-b)>=(n-y)*(e-b)&&(n-y)*(_-b)>=(m-y)*(d-b)}function cd(a,e,n,d,m,_,y,b){return!(a===y&&e===b)&&Yg(a,e,n,d,m,_,y,b)}function m0(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!(function(n,d){let m=n;do{if(m.i!==n.i&&m.next.i!==n.i&&m.i!==d.i&&m.next.i!==d.i&&Xg(m,m.next,n,d))return!0;m=m.next}while(m!==n);return!1})(a,e)&&(hd(a,e)&&hd(e,a)&&(function(n,d){let m=n,_=!1;const y=(n.x+d.x)/2,b=(n.y+d.y)/2;do m.y>b!=m.next.y>b&&m.next.y!==m.y&&y<(m.next.x-m.x)*(b-m.y)/(m.next.y-m.y)+m.x&&(_=!_),m=m.next;while(m!==n);return _})(a,e)&&(Ii(a.prev,a,e.prev)||Ii(a,e.prev,e))||Ol(a,e)&&Ii(a.prev,a,a.next)>0&&Ii(e.prev,e,e.next)>0)}function Ii(a,e,n){return(e.y-a.y)*(n.x-e.x)-(e.x-a.x)*(n.y-e.y)}function Ol(a,e){return a.x===e.x&&a.y===e.y}function Xg(a,e,n,d){const m=fh(Ii(a,e,n)),_=fh(Ii(a,e,d)),y=fh(Ii(n,d,a)),b=fh(Ii(n,d,e));return m!==_&&y!==b||!(m!==0||!hh(a,n,e))||!(_!==0||!hh(a,d,e))||!(y!==0||!hh(n,a,d))||!(b!==0||!hh(n,e,d))}function hh(a,e,n){return e.x<=Math.max(a.x,n.x)&&e.x>=Math.min(a.x,n.x)&&e.y<=Math.max(a.y,n.y)&&e.y>=Math.min(a.y,n.y)}function fh(a){return a>0?1:a<0?-1:0}function hd(a,e){return Ii(a.prev,a,a.next)<0?Ii(a,e,a.next)>=0&&Ii(a,a.prev,e)>=0:Ii(a,e,a.prev)<0||Ii(a,a.next,e)<0}function Jg(a,e){const n=fp(a.i,a.x,a.y),d=fp(e.i,e.x,e.y),m=a.next,_=e.prev;return a.next=e,e.prev=a,n.next=m,m.prev=n,d.next=n,n.prev=d,_.next=d,d.prev=_,d}function Qg(a,e,n,d){const m=fp(a,e,n);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function fd(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function fp(a,e,n){return{i:a,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class $l{constructor(e,n){if(n>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=n}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class ph{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}ph.noSubdivision=new ph({fill:new $l(0,0),line:new $l(0,0),tile:new $l(0,0),stencil:new $l(0,0),circle:1}),tt("SubdivisionGranularityExpression",$l),tt("SubdivisionGranularitySetting",ph);const Bl=-32768,pd=32767;class g0{constructor(e,n){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=dt/e,this._canonical=n}_getKey(e,n){return(e+=32768)<<16|n+32768}_vertexToIndex(e,n){if(e<-32768||n<-32768||e>32767||n>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(e),m=0|Math.round(n),_=this._getKey(d,m);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const y=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,y),this._vertexBuffer.push(d,m),y}_subdivideTrianglesScanline(e){if(this._granularity<2)return(function(m,_){const y=[];for(let b=0;b<_.length;b+=3){const S=_[b],P=_[b+1],D=_[b+2],I=m[2*S],F=m[2*S+1];(m[2*P]-I)*(m[2*D+1]-F)-(m[2*P+1]-F)*(m[2*D]-I)>0?(y.push(S),y.push(D),y.push(P)):(y.push(S),y.push(P),y.push(D))}return y})(this._vertexBuffer,e);const n=[],d=e.length;for(let m=0;m<d;m+=3){const _=[e[m+0],e[m+1],e[m+2]],y=[this._vertexBuffer[2*e[m+0]+0],this._vertexBuffer[2*e[m+0]+1],this._vertexBuffer[2*e[m+1]+0],this._vertexBuffer[2*e[m+1]+1],this._vertexBuffer[2*e[m+2]+0],this._vertexBuffer[2*e[m+2]+1]];let b=1/0,S=1/0,P=-1/0,D=-1/0;for(let N=0;N<3;N++){const q=y[2*N],Y=y[2*N+1];b=Math.min(b,q),P=Math.max(P,q),S=Math.min(S,Y),D=Math.max(D,Y)}if(b===P||S===D)continue;const I=Math.floor(b/this._granularityCellSize),F=Math.ceil(P/this._granularityCellSize),j=Math.floor(S/this._granularityCellSize),V=Math.ceil(D/this._granularityCellSize);if(I!==F||j!==V)for(let N=j;N<V;N++){const q=this._scanlineGenerateVertexRingForCellRow(N,y,_);_0(this._vertexBuffer,q,n)}else n.push(..._)}return n}_scanlineGenerateVertexRingForCellRow(e,n,d){const m=e*this._granularityCellSize,_=m+this._granularityCellSize,y=[];for(let b=0;b<3;b++){const S=n[2*b],P=n[2*b+1],D=n[2*(b+1)%6],I=n[(2*(b+1)+1)%6],F=n[2*(b+2)%6],j=n[(2*(b+2)+1)%6],V=D-S,N=I-P,q=V===0,Y=N===0,se=(m-P)/N,X=(_-P)/N,ee=Math.min(se,X),le=Math.max(se,X);if(!Y&&(ee>=1||le<=0)||Y&&(P<m||P>_)){I>=m&&I<=_&&y.push(d[(b+1)%3]);continue}!Y&&ee>0&&y.push(this._vertexToIndex(S+V*ee,P+N*ee));const ce=S+V*Math.max(ee,0),ke=S+V*Math.min(le,1);q||this._generateIntraEdgeVertices(y,S,P,D,I,ce,ke),!Y&&le<1&&y.push(this._vertexToIndex(S+V*le,P+N*le)),(Y||I>=m&&I<=_)&&y.push(d[(b+1)%3]),!Y&&(I<=m||I>=_)&&this._generateInterEdgeVertices(y,S,P,D,I,F,j,ke,m,_)}return y}_generateIntraEdgeVertices(e,n,d,m,_,y,b){const S=m-n,P=_-d,D=P===0,I=D?Math.min(n,m):Math.min(y,b),F=D?Math.max(n,m):Math.max(y,b),j=Math.floor(I/this._granularityCellSize)+1,V=Math.ceil(F/this._granularityCellSize)-1;if(D?n<m:y<b)for(let N=j;N<=V;N++){const q=N*this._granularityCellSize;e.push(this._vertexToIndex(q,d+P*(q-n)/S))}else for(let N=V;N>=j;N--){const q=N*this._granularityCellSize;e.push(this._vertexToIndex(q,d+P*(q-n)/S))}}_generateInterEdgeVertices(e,n,d,m,_,y,b,S,P,D){const I=_-d,F=y-m,j=b-_,V=(P-_)/j,N=(D-_)/j,q=Math.min(V,N),Y=Math.max(V,N),se=m+F*q;let X=Math.floor(Math.min(se,S)/this._granularityCellSize)+1,ee=Math.ceil(Math.max(se,S)/this._granularityCellSize)-1,le=S<se;const ce=j===0;if(ce&&(b===P||b===D))return;if(ce||q>=1||Y<=0){const Fe=d-b,Ie=y+(n-y)*Math.min((P-b)/Fe,(D-b)/Fe);X=Math.floor(Math.min(Ie,S)/this._granularityCellSize)+1,ee=Math.ceil(Math.max(Ie,S)/this._granularityCellSize)-1,le=S<Ie}const ke=I>0?D:P;if(le)for(let Fe=X;Fe<=ee;Fe++)e.push(this._vertexToIndex(Fe*this._granularityCellSize,ke));else for(let Fe=ee;Fe>=X;Fe--)e.push(this._vertexToIndex(Fe*this._granularityCellSize,ke))}_generateOutline(e){const n=[];for(const d of e){const m=xo(d,this._granularity,!0),_=this._pointArrayToIndices(m),y=[];for(let b=1;b<_.length;b++)y.push(_[b-1]),y.push(_[b]);n.push(y)}return n}_handlePoles(e){let n=!1,d=!1;this._canonical&&(this._canonical.y===0&&(n=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(n||d)&&this._fillPoles(e,n,d)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let n=0;n<e.length;n+=2){const d=e[n+1];d===Bl&&(e[n+1]=-32767),d===pd&&(e[n+1]=32766)}}_generatePoleQuad(e,n,d,m,_,y){m>_!=(y===Bl)?(e.push(n),e.push(d),e.push(this._vertexToIndex(m,y)),e.push(d),e.push(this._vertexToIndex(_,y)),e.push(this._vertexToIndex(m,y))):(e.push(d),e.push(n),e.push(this._vertexToIndex(m,y)),e.push(this._vertexToIndex(_,y)),e.push(d),e.push(this._vertexToIndex(m,y)))}_fillPoles(e,n,d){const m=this._vertexBuffer,_=dt,y=e.length;for(let b=2;b<y;b+=3){const S=e[b-2],P=e[b-1],D=e[b],I=m[2*S],F=m[2*S+1],j=m[2*P],V=m[2*P+1],N=m[2*D],q=m[2*D+1];n&&(F===0&&V===0&&this._generatePoleQuad(e,S,P,I,j,Bl),V===0&&q===0&&this._generatePoleQuad(e,P,D,j,N,Bl),q===0&&F===0&&this._generatePoleQuad(e,D,S,N,I,Bl)),d&&(F===_&&V===_&&this._generatePoleQuad(e,S,P,I,j,pd),V===_&&q===_&&this._generatePoleQuad(e,P,D,j,N,pd),q===_&&F===_&&this._generatePoleQuad(e,D,S,N,I,pd))}}_initializeVertices(e){for(let n=0;n<e.length;n+=2)this._vertexToIndex(e[n],e[n+1])}subdividePolygonInternal(e,n){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:m}=(function(b){const S=[],P=[];for(const D of b)if(D.length!==0){D!==b[0]&&S.push(P.length/2);for(let I=0;I<D.length;I++)P.push(D[I].x),P.push(D[I].y)}return{flattened:P,holeIndices:S}})(e);let _;this._initializeVertices(d);try{const b=(function(P,D,I=2){const F=D&&D.length,j=F?D[0]*I:P.length;let V=Kg(P,0,j,I,!0);const N=[];if(!V||V.next===V.prev)return N;let q,Y,se;if(F&&(V=(function(X,ee,le,ce){const ke=[];for(let Fe=0,Ie=ee.length;Fe<Ie;Fe++){const Oe=Kg(X,ee[Fe]*ce,Fe<Ie-1?ee[Fe+1]*ce:X.length,ce,!1);Oe===Oe.next&&(Oe.steiner=!0),ke.push(p0(Oe))}ke.sort(c0);for(let Fe=0;Fe<ke.length;Fe++)le=h0(ke[Fe],le);return le})(P,D,V,I)),P.length>80*I){q=P[0],Y=P[1];let X=q,ee=Y;for(let le=I;le<j;le+=I){const ce=P[le],ke=P[le+1];ce<q&&(q=ce),ke<Y&&(Y=ke),ce>X&&(X=ce),ke>ee&&(ee=ke)}se=Math.max(X-q,ee-Y),se=se!==0?32767/se:0}return dd(V,N,I,q,Y,se,0),N})(d,m),S=this._convertIndices(d,b);_=this._subdivideTrianglesScanline(S)}catch(b){console.error(b)}let y=[];return n&&(y=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:y}}_convertIndices(e,n){const d=[];for(let m=0;m<n.length;m++)d.push(this._vertexToIndex(e[2*n[m]],e[2*n[m]+1]));return d}_pointArrayToIndices(e){const n=[];for(let d=0;d<e.length;d++){const m=e[d];n.push(this._vertexToIndex(m.x,m.y))}return n}}function e_(a,e,n,d=!0){return new g0(n,e).subdividePolygonInternal(a,d)}function xo(a,e,n=!1){if(!a||a.length<1)return[];if(a.length<2)return[];const d=a[0],m=a[a.length-1],_=n&&(d.x!==m.x||d.y!==m.y);if(e<2)return _?[...a,a[0]]:[...a];const y=Math.floor(dt/e),b=[];b.push(new w(a[0].x,a[0].y));const S=a.length,P=_?S:S-1;for(let D=0;D<P;D++){const I=a[D],F=D<S-1?a[D+1]:a[0],j=I.x,V=I.y,N=F.x,q=F.y,Y=j!==N,se=V!==q;if(!Y&&!se)continue;const X=N-j,ee=q-V,le=Math.abs(X),ce=Math.abs(ee);let ke=j,Fe=V;for(;;){const Oe=X>0?(Math.floor(ke/y)+1)*y:(Math.ceil(ke/y)-1)*y,Ze=ee>0?(Math.floor(Fe/y)+1)*y:(Math.ceil(Fe/y)-1)*y,Be=Math.abs(ke-Oe),Re=Math.abs(Fe-Ze),Ee=Math.abs(ke-N),et=Math.abs(Fe-q),Je=Y?Be/le:Number.POSITIVE_INFINITY,it=se?Re/ce:Number.POSITIVE_INFINITY;if((Ee<=Be||!Y)&&(et<=Re||!se))break;if(Je<it&&Y||!se){ke=Oe,Fe+=ee*Je;const Ye=new w(ke,Math.round(Fe));b[b.length-1].x===Ye.x&&b[b.length-1].y===Ye.y||b.push(Ye)}else{ke+=X*it,Fe=Ze;const Ye=new w(Math.round(ke),Fe);b[b.length-1].x===Ye.x&&b[b.length-1].y===Ye.y||b.push(Ye)}}const Ie=new w(N,q);b[b.length-1].x===Ie.x&&b[b.length-1].y===Ie.y||b.push(Ie)}return b}function _0(a,e,n){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,m=a[2*e[0]];for(let S=1;S<e.length;S++){const P=a[2*e[S]];P<m&&(m=P,d=S)}const _=e.length;let y=d,b=(y+1)%_;for(;;){const S=y-1>=0?y-1:_-1,P=(b+1)%_,D=a[2*e[S]],I=a[2*e[P]],F=a[2*e[y]],j=a[2*e[y]+1],V=a[2*e[b]+1];let N=!1;if(D<I)N=!0;else if(D>I)N=!1;else{const q=V-j,Y=-(a[2*e[b]]-F),se=j<V?1:-1;((D-F)*q+(a[2*e[S]+1]-j)*Y)*se>((I-F)*q+(a[2*e[P]+1]-j)*Y)*se&&(N=!0)}if(N){const q=e[S],Y=e[y],se=e[b];q!==Y&&q!==se&&Y!==se&&n.push(se,Y,q),y--,y<0&&(y=_-1)}else{const q=e[P],Y=e[y],se=e[b];q!==Y&&q!==se&&Y!==se&&n.push(se,Y,q),b++,b>=_&&(b=0)}if(S===P)break}}function t_(a,e,n,d,m,_,y,b,S){const P=m.length/2,D=y&&b&&S;if(P<Ke.MAX_VERTEX_ARRAY_LENGTH){const I=e.prepareSegment(P,n,d),F=I.vertexLength;for(let N=0;N<_.length;N+=3)d.emplaceBack(F+_[N],F+_[N+1],F+_[N+2]);let j,V;I.vertexLength+=P,I.primitiveLength+=_.length/3,D&&(V=y.prepareSegment(P,n,b),j=V.vertexLength,V.vertexLength+=P);for(let N=0;N<m.length;N+=2)a(m[N],m[N+1]);if(D)for(let N=0;N<S.length;N++){const q=S[N];for(let Y=1;Y<q.length;Y+=2)b.emplaceBack(j+q[Y-1],j+q[Y]);V.primitiveLength+=q.length/2}}else(function(I,F,j,V,N,q){const Y=[];for(let ce=0;ce<V.length/2;ce++)Y.push(-1);const se={count:0};let X=0,ee=I.getOrCreateLatestSegment(F,j),le=ee.vertexLength;for(let ce=2;ce<N.length;ce+=3){const ke=N[ce-2],Fe=N[ce-1],Ie=N[ce];let Oe=Y[ke]<X,Ze=Y[Fe]<X,Be=Y[Ie]<X;ee.vertexLength+((Oe?1:0)+(Ze?1:0)+(Be?1:0))>Ke.MAX_VERTEX_ARRAY_LENGTH&&(ee=I.createNewSegment(F,j),X=se.count,Oe=!0,Ze=!0,Be=!0,le=0);const Re=md(Y,V,q,se,ke,Oe,ee),Ee=md(Y,V,q,se,Fe,Ze,ee),et=md(Y,V,q,se,Ie,Be,ee);j.emplaceBack(le+Re-X,le+Ee-X,le+et-X),ee.primitiveLength++}})(e,n,d,m,_,a),D&&(function(I,F,j,V,N,q){const Y=[];for(let ce=0;ce<V.length/2;ce++)Y.push(-1);const se={count:0};let X=0,ee=I.getOrCreateLatestSegment(F,j),le=ee.vertexLength;for(let ce=0;ce<N.length;ce++){const ke=N[ce];for(let Fe=1;Fe<N[ce].length;Fe+=2){const Ie=ke[Fe-1],Oe=ke[Fe];let Ze=Y[Ie]<X,Be=Y[Oe]<X;ee.vertexLength+((Ze?1:0)+(Be?1:0))>Ke.MAX_VERTEX_ARRAY_LENGTH&&(ee=I.createNewSegment(F,j),X=se.count,Ze=!0,Be=!0,le=0);const Re=md(Y,V,q,se,Ie,Ze,ee),Ee=md(Y,V,q,se,Oe,Be,ee);j.emplaceBack(le+Re-X,le+Ee-X),ee.primitiveLength++}}})(y,n,b,m,S,a),e.forceNewSegmentOnNextPrepare(),y?.forceNewSegmentOnNextPrepare()}function md(a,e,n,d,m,_,y){if(_){const b=d.count;return n(e[2*m],e[2*m+1]),a[m]=d.count,d.count++,y.vertexLength++,b}return a[m]}class pp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((n=>n.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ne,this.indexArray=new Ce,this.indexArray2=new Ge,this.programConfigurations=new br(e.layers,e.zoom),this.segments=new Ke,this.segments2=new Ke,this.stateDependentLayerIds=this.layers.filter((n=>n.isStateDependent())).map((n=>n.id))}populate(e,n,d){this.hasDependencies=ch("fill",this.layers,n);const m=this.layers[0].layout.get("fill-sort-key"),_=!m.isConstant(),y=[];for(const{feature:b,id:S,index:P,sourceLayerIndex:D}of e){const I=this.layers[0]._featureFilter.needGeometry,F=Za(b,I);if(!this.layers[0]._featureFilter.filter(new Nt(this.zoom),F,d))continue;const j=_?m.evaluate(F,{},d,n.availableImages):void 0,V={id:S,properties:b.properties,type:b.type,sourceLayerIndex:D,index:P,geometry:I?F.geometry:Ha(b),patterns:{},sortKey:j};y.push(V)}_&&y.sort(((b,S)=>b.sortKey-S.sortKey));for(const b of y){const{geometry:S,index:P,sourceLayerIndex:D}=b;if(this.hasDependencies){const I=cp("fill",this.layers,b,{zoom:this.zoom},n);this.patternFeatures.push(I)}else this.addFeature(b,S,P,d,{},n.subdivisionGranularity);n.featureIndex.insert(e[P].feature,S,P,D,this.index)}}update(e,n,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,{imagePositions:d})}addFeatures(e,n,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,n,d,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,s0),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,n,d,m,_,y){for(const b of nl(n,500)){const S=e_(b,m,y.fill.getGranularityForZoomLevel(m.z)),P=this.layoutVertexArray;t_(((D,I)=>{P.emplaceBack(D,I)}),this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles,this.segments2,this.indexArray2,S.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{imagePositions:_,canonical:m})}}let i_,n_;tt("FillBucket",pp,{omit:["layers","patternFeatures"]});var y0={get paint(){return n_=n_||new bn({"fill-antialias":new at(Me.paint_fill["fill-antialias"]),"fill-opacity":new ot(Me.paint_fill["fill-opacity"]),"fill-color":new ot(Me.paint_fill["fill-color"]),"fill-outline-color":new ot(Me.paint_fill["fill-outline-color"]),"fill-translate":new at(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new at(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new co(Me.paint_fill["fill-pattern"])})},get layout(){return i_=i_||new bn({"fill-sort-key":new ot(Me.layout_fill["fill-sort-key"])})}};class v0 extends Zn{constructor(e,n){super(e,y0,n)}recalculate(e,n){super.recalculate(e,n);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new pp(e)}queryRadius(){return uh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:n,transform:d,pixelsToTileUnits:m}){return Rg(dh(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,m),n)}isTileClipped(){return!0}}const x0=Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),b0=Si([{name:"a_centroid",components:2,type:"Int16"}],4),{members:w0}=x0;class gd{constructor(e,n,d,m,_){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=m,this._values=_,e.readFields(k0,this,n)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos,d=[];let m,_=1,y=0,b=0,S=0;for(;e.pos<n;){if(y<=0){const P=e.readVarint();_=7&P,y=P>>3}if(y--,_===1||_===2)b+=e.readSVarint(),S+=e.readSVarint(),_===1&&(m&&d.push(m),m=[]),m&&m.push(new w(b,S));else{if(_!==7)throw new Error(`unknown command ${_}`);m&&m.push(m[0].clone())}}return m&&d.push(m),d}bbox(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos;let d=1,m=0,_=0,y=0,b=1/0,S=-1/0,P=1/0,D=-1/0;for(;e.pos<n;){if(m<=0){const I=e.readVarint();d=7&I,m=I>>3}if(m--,d===1||d===2)_+=e.readSVarint(),y+=e.readSVarint(),_<b&&(b=_),_>S&&(S=_),y<P&&(P=y),y>D&&(D=y);else if(d!==7)throw new Error(`unknown command ${d}`)}return[b,P,S,D]}toGeoJSON(e,n,d){const m=this.extent*Math.pow(2,d),_=this.extent*e,y=this.extent*n,b=this.loadGeometry();function S(F){return[360*(F.x+_)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(F.y+y)/m)*Math.PI))-90]}function P(F){return F.map(S)}let D;if(this.type===1){const F=[];for(const V of b)F.push(V[0]);const j=P(F);D=F.length===1?{type:"Point",coordinates:j[0]}:{type:"MultiPoint",coordinates:j}}else if(this.type===2){const F=b.map(P);D=F.length===1?{type:"LineString",coordinates:F[0]}:{type:"MultiLineString",coordinates:F}}else{if(this.type!==3)throw new Error("unknown feature type");{const F=a_(b),j=[];for(const V of F)j.push(V.map(P));D=j.length===1?{type:"Polygon",coordinates:j[0]}:{type:"MultiPolygon",coordinates:j}}}const I={type:"Feature",geometry:D,properties:this.properties};return this.id!=null&&(I.id=this.id),I}}function k0(a,e,n){a===1?e.id=n.readVarint():a===2?(function(d,m){const _=d.readVarint()+d.pos;for(;d.pos<_;){const y=m._keys[d.readVarint()],b=m._values[d.readVarint()];m.properties[y]=b}})(n,e):a===3?e.type=n.readVarint():a===4&&(e._geometry=n.pos)}function a_(a){const e=a.length;if(e<=1)return[a];const n=[];let d,m;for(let _=0;_<e;_++){const y=S0(a[_]);y!==0&&(m===void 0&&(m=y<0),m===y<0?(d&&n.push(d),d=[a[_]]):d&&d.push(a[_]))}return d&&n.push(d),n}function S0(a){let e=0;for(let n,d,m=0,_=a.length,y=_-1;m<_;y=m++)n=a[m],d=a[y],e+=(d.x-n.x)*(n.y+d.y);return e}gd.types=["Unknown","Point","LineString","Polygon"];class T0{constructor(e,n){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(M0,this,n),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const n=this._pbf.readVarint()+this._pbf.pos;return new gd(this._pbf,n,this.extent,this._keys,this._values)}}function M0(a,e,n){a===15?e.version=n.readVarint():a===1?e.name=n.readString():a===5?e.extent=n.readVarint():a===2?e._features.push(n.pos):a===3?e._keys.push(n.readString()):a===4&&e._values.push((function(d){let m=null;const _=d.readVarint()+d.pos;for(;d.pos<_;){const y=d.readVarint()>>3;m=y===1?d.readString():y===2?d.readFloat():y===3?d.readDouble():y===4?d.readVarint64():y===5?d.readVarint():y===6?d.readSVarint():y===7?d.readBoolean():null}if(m==null)throw new Error("unknown feature value");return m})(n))}class r_{constructor(e,n){this.layers=e.readFields(P0,{},n)}}function P0(a,e,n){if(a===3){const d=new T0(n,n.readVarint()+n.pos);d.length&&(e[d.name]=d)}}const mp=Math.pow(2,13);function _d(a,e,n,d,m,_,y,b){a.emplaceBack(e,n,2*Math.floor(d*mp)+y,m*mp*2,_*mp*2,Math.round(b))}class gp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((n=>n.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new oe,this.centroidVertexArray=new ie,this.indexArray=new Ce,this.programConfigurations=new br(e.layers,e.zoom),this.segments=new Ke,this.stateDependentLayerIds=this.layers.filter((n=>n.isStateDependent())).map((n=>n.id))}populate(e,n,d){this.features=[],this.hasDependencies=ch("fill-extrusion",this.layers,n);for(const{feature:m,id:_,index:y,sourceLayerIndex:b}of e){const S=this.layers[0]._featureFilter.needGeometry,P=Za(m,S);if(!this.layers[0]._featureFilter.filter(new Nt(this.zoom),P,d))continue;const D={id:_,sourceLayerIndex:b,index:y,geometry:S?P.geometry:Ha(m),properties:m.properties,type:m.type,patterns:{}};this.hasDependencies?this.features.push(cp("fill-extrusion",this.layers,D,{zoom:this.zoom},n)):this.addFeature(D,D.geometry,y,d,{},n.subdivisionGranularity),n.featureIndex.insert(m,D.geometry,y,b,this.index,!0)}}addFeatures(e,n,d){for(const m of this.features){const{geometry:_}=m;this.addFeature(m,_,m.index,n,d,e.subdivisionGranularity)}}update(e,n,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,w0),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,b0.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,n,d,m,_,y){for(const b of nl(n,500)){const S={x:0,y:0,sampleCount:0},P=this.layoutVertexArray.length;this.processPolygon(S,m,e,b,y);const D=this.layoutVertexArray.length-P,I=Math.floor(S.x/S.sampleCount),F=Math.floor(S.y/S.sampleCount);for(let j=0;j<D;j++)this.centroidVertexArray.emplaceBack(I,F)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{imagePositions:_,canonical:m})}processPolygon(e,n,d,m,_){if(m.length<1||s_(m[0]))return;for(const I of m)I.length!==0&&C0(e,I);const y={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},b=_.fill.getGranularityForZoomLevel(n.z),S=gd.types[d.type]==="Polygon";for(const I of m){if(I.length===0||s_(I))continue;const F=xo(I,b,S);this._generateSideFaces(F,y)}if(!S)return;const P=e_(m,n,b,!1),D=this.layoutVertexArray;t_(((I,F)=>{_d(D,I,F,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles)}_generateSideFaces(e,n){let d=0;for(let m=1;m<e.length;m++){const _=e[m],y=e[m-1];if(E0(_,y))continue;n.segment.vertexLength+4>Ke.MAX_VERTEX_ARRAY_LENGTH&&(n.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const b=_.sub(y)._perp()._unit(),S=y.dist(_);d+S>32768&&(d=0),_d(this.layoutVertexArray,_.x,_.y,b.x,b.y,0,0,d),_d(this.layoutVertexArray,_.x,_.y,b.x,b.y,0,1,d),d+=S,_d(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,0,d),_d(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,1,d);const P=n.segment.vertexLength;this.indexArray.emplaceBack(P,P+2,P+1),this.indexArray.emplaceBack(P+1,P+2,P+3),n.segment.vertexLength+=4,n.segment.primitiveLength+=2}}}function C0(a,e){for(let n=0;n<e.length;n++){const d=e[n];n===e.length-1&&e[0].x===d.x&&e[0].y===d.y||(a.x+=d.x,a.y+=d.y,a.sampleCount++)}}function E0(a,e){return a.x===e.x&&(a.x<0||a.x>dt)||a.y===e.y&&(a.y<0||a.y>dt)}function s_(a){return a.every((e=>e.x<0))||a.every((e=>e.x>dt))||a.every((e=>e.y<0))||a.every((e=>e.y>dt))}let o_;tt("FillExtrusionBucket",gp,{omit:["layers","features"]});var L0={get paint(){return o_=o_||new bn({"fill-extrusion-opacity":new at(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ot(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new at(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new at(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new co(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ot(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ot(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new at(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class D0 extends Zn{constructor(e,n){super(e,L0,n)}createBucket(e){return new gp(e)}queryRadius(){return uh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:n,featureState:d,geometry:m,transform:_,pixelsToTileUnits:y,pixelPosMatrix:b}){const S=dh(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,y),P=this.paint.get("fill-extrusion-height").evaluate(n,d),D=this.paint.get("fill-extrusion-base").evaluate(n,d),I=(function(j,V){const N=[];for(const q of j){const Y=[q.x,q.y,0,1];Ei(Y,Y,V),N.push(new w(Y[0]/Y[3],Y[1]/Y[3]))}return N})(S,b),F=(function(j,V,N,q){const Y=[],se=[],X=q[8]*V,ee=q[9]*V,le=q[10]*V,ce=q[11]*V,ke=q[8]*N,Fe=q[9]*N,Ie=q[10]*N,Oe=q[11]*N;for(const Ze of j){const Be=[],Re=[];for(const Ee of Ze){const et=Ee.x,Je=Ee.y,it=q[0]*et+q[4]*Je+q[12],Ye=q[1]*et+q[5]*Je+q[13],st=q[2]*et+q[6]*Je+q[14],Et=q[3]*et+q[7]*Je+q[15],kt=st+le,ri=Et+ce,dn=it+ke,ji=Ye+Fe,si=st+Ie,ti=Et+Oe,zt=new w((it+X)/ri,(Ye+ee)/ri);zt.z=kt/ri,Be.push(zt);const yi=new w(dn/ti,ji/ti);yi.z=si/ti,Re.push(yi)}Y.push(Be),se.push(Re)}return[Y,se]})(m,D,P,b);return(function(j,V,N){let q=1/0;Rg(N,V)&&(q=l_(N,V[0]));for(let Y=0;Y<V.length;Y++){const se=V[Y],X=j[Y];for(let ee=0;ee<se.length-1;ee++){const le=se[ee],ce=[le,se[ee+1],X[ee+1],X[ee],le];Rl(N,ce)&&(q=Math.min(q,l_(N,ce)))}}return q!==1/0&&q})(F[0],F[1],I)}}function yd(a,e){return a.x*e.x+a.y*e.y}function l_(a,e){if(a.length===1){let n=0;const d=e[n++];let m;for(;!m||d.equals(m);)if(m=e[n++],!m)return 1/0;for(;n<e.length;n++){const _=e[n],y=a[0],b=m.sub(d),S=_.sub(d),P=y.sub(d),D=yd(b,b),I=yd(b,S),F=yd(S,S),j=yd(P,b),V=yd(P,S),N=D*F-I*I,q=(F*j-I*V)/N,Y=(D*V-I*j)/N,se=d.z*(1-q-Y)+m.z*q+_.z*Y;if(isFinite(se))return se}return 1/0}{let n=1/0;for(const d of e)n=Math.min(n,d.z);return n}}const A0=Si([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:I0}=A0,z0=Si([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:R0}=z0,F0=Math.cos(Math.PI/180*37.5),u_=Math.pow(2,14)/.5;class _p{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((n=>n.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((n=>{this.gradients[n.id]={}})),this.layoutVertexArray=new he,this.layoutVertexArray2=new re,this.indexArray=new Ce,this.programConfigurations=new br(e.layers,e.zoom),this.segments=new Ke,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((n=>n.isStateDependent())).map((n=>n.id))}populate(e,n,d){this.hasDependencies=ch("line",this.layers,n)||this.hasLineDasharray(this.layers);const m=this.layers[0].layout.get("line-sort-key"),_=!m.isConstant(),y=[];for(const{feature:b,id:S,index:P,sourceLayerIndex:D}of e){const I=this.layers[0]._featureFilter.needGeometry,F=Za(b,I);if(!this.layers[0]._featureFilter.filter(new Nt(this.zoom),F,d))continue;const j=_?m.evaluate(F,{},d):void 0,V={id:S,properties:b.properties,type:b.type,sourceLayerIndex:D,index:P,geometry:I?F.geometry:Ha(b),patterns:{},dashes:{},sortKey:j};y.push(V)}_&&y.sort(((b,S)=>b.sortKey-S.sortKey));for(const b of y){const{geometry:S,index:P,sourceLayerIndex:D}=b;this.hasDependencies?(ch("line",this.layers,n)?cp("line",this.layers,b,{zoom:this.zoom},n):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,b,this.zoom,n),this.patternFeatures.push(b)):this.addFeature(b,S,P,d,{},{},n.subdivisionGranularity),n.featureIndex.insert(e[P].feature,S,P,D,this.index)}}update(e,n,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,{imagePositions:d,dashPositions:m})}addFeatures(e,n,d,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,n,d,m,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,R0)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,I0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,n,d,m,_,y,b){const S=this.layers[0].layout,P=S.get("line-join").evaluate(e,{}),D=S.get("line-cap"),I=S.get("line-miter-limit"),F=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const j of n)this.addLine(j,e,P,D,I,F,m,b);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{imagePositions:_,dashPositions:y,canonical:m})}addLine(e,n,d,m,_,y,b,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=xo(e,b?S.line.getGranularityForZoomLevel(b.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let X=0;X<e.length-1;X++)this.totalDistance+=e[X].dist(e[X+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const P=gd.types[n.type]==="Polygon";let D=e.length;for(;D>=2&&e[D-1].equals(e[D-2]);)D--;let I=0;for(;I<D-1&&e[I].equals(e[I+1]);)I++;if(D<(P?3:2))return;d==="bevel"&&(_=1.05);const F=this.overscaling<=16?122880/(512*this.overscaling):0,j=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let V,N,q,Y,se;this.e1=this.e2=-1,P&&(V=e[D-2],se=e[I].sub(V)._unit()._perp());for(let X=I;X<D;X++){if(q=X===D-1?P?e[I+1]:void 0:e[X+1],q&&e[X].equals(q))continue;se&&(Y=se),V&&(N=V),V=e[X],se=q?q.sub(V)._unit()._perp():Y,Y=Y||se;let ee=Y.add(se);ee.x===0&&ee.y===0||ee._unit();const le=Y.x*se.x+Y.y*se.y,ce=ee.x*se.x+ee.y*se.y,ke=ce!==0?1/ce:1/0,Fe=2*Math.sqrt(2-2*ce),Ie=ce<F0&&N&&q,Oe=Y.x*se.y-Y.y*se.x>0;if(Ie&&X>I){const Re=V.dist(N);if(Re>2*F){const Ee=V.sub(V.sub(N)._mult(F/Re)._round());this.updateDistance(N,Ee),this.addCurrentVertex(Ee,Y,0,0,j),N=Ee}}const Ze=N&&q;let Be=Ze?d:P?"butt":m;if(Ze&&Be==="round"&&(ke<y?Be="miter":ke<=2&&(Be="fakeround")),Be==="miter"&&ke>_&&(Be="bevel"),Be==="bevel"&&(ke>2&&(Be="flipbevel"),ke<_&&(Be="miter")),N&&this.updateDistance(N,V),Be==="miter")ee._mult(ke),this.addCurrentVertex(V,ee,0,0,j);else if(Be==="flipbevel"){if(ke>100)ee=se.mult(-1);else{const Re=ke*Y.add(se).mag()/Y.sub(se).mag();ee._perp()._mult(Re*(Oe?-1:1))}this.addCurrentVertex(V,ee,0,0,j),this.addCurrentVertex(V,ee.mult(-1),0,0,j)}else if(Be==="bevel"||Be==="fakeround"){const Re=-Math.sqrt(ke*ke-1),Ee=Oe?Re:0,et=Oe?0:Re;if(N&&this.addCurrentVertex(V,Y,Ee,et,j),Be==="fakeround"){const Je=Math.round(180*Fe/Math.PI/20);for(let it=1;it<Je;it++){let Ye=it/Je;if(Ye!==.5){const Et=Ye-.5;Ye+=Ye*Et*(Ye-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*Et*Et+(.848013+le*(.215638*le-1.06021)))}const st=se.sub(Y)._mult(Ye)._add(Y)._unit()._mult(Oe?-1:1);this.addHalfVertex(V,st.x,st.y,!1,Oe,0,j)}}q&&this.addCurrentVertex(V,se,-Ee,-et,j)}else if(Be==="butt")this.addCurrentVertex(V,ee,0,0,j);else if(Be==="square"){const Re=N?1:-1;this.addCurrentVertex(V,ee,Re,Re,j)}else Be==="round"&&(N&&(this.addCurrentVertex(V,Y,0,0,j),this.addCurrentVertex(V,Y,1,1,j,!0)),q&&(this.addCurrentVertex(V,se,-1,-1,j,!0),this.addCurrentVertex(V,se,0,0,j)));if(Ie&&X<D-1){const Re=V.dist(q);if(Re>2*F){const Ee=V.add(q.sub(V)._mult(F/Re)._round());this.updateDistance(V,Ee),this.addCurrentVertex(Ee,se,0,0,j),V=Ee}}}}addCurrentVertex(e,n,d,m,_,y=!1){const b=n.y*m-n.x,S=-n.y-n.x*m;this.addHalfVertex(e,n.x+n.y*d,n.y-n.x*d,y,!1,d,_),this.addHalfVertex(e,b,S,y,!0,-m,_),this.distance>u_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,n,d,m,_,y))}addHalfVertex({x:e,y:n},d,m,_,y,b,S){const P=.5*(this.lineClips?this.scaledDistance*(u_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(_?1:0),(n<<1)+(y?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(b===0?0:b<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,D,this.e2),S.primitiveLength++),y?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,n){this.distance+=e.dist(n),this.updateScaledDistance()}hasLineDasharray(e){for(const n of e){const d=n.paint.get("line-dasharray");if(d&&!d.isConstant())return!0}return!1}addLineDashDependencies(e,n,d,m){for(const _ of e){const y=_.paint.get("line-dasharray");if(!y||y.value.kind==="constant")continue;const b=_.layout.get("line-cap")==="round",S={dasharray:y.value.evaluate({zoom:d-1},n,{}),round:b},P={dasharray:y.value.evaluate({zoom:d},n,{}),round:b},D={dasharray:y.value.evaluate({zoom:d+1},n,{}),round:b},I=`${S.dasharray.join(",")},${S.round}`,F=`${P.dasharray.join(",")},${P.round}`,j=`${D.dasharray.join(",")},${D.round}`;m.dashDependencies[I]=S,m.dashDependencies[F]=P,m.dashDependencies[j]=D,n.dashes[_.id]={min:I,mid:F,max:j}}}}let d_,c_;tt("LineBucket",_p,{omit:["layers","patternFeatures"]});var h_={get paint(){return c_=c_||new bn({"line-opacity":new ot(Me.paint_line["line-opacity"]),"line-color":new ot(Me.paint_line["line-color"]),"line-translate":new at(Me.paint_line["line-translate"]),"line-translate-anchor":new at(Me.paint_line["line-translate-anchor"]),"line-width":new ot(Me.paint_line["line-width"]),"line-gap-width":new ot(Me.paint_line["line-gap-width"]),"line-offset":new ot(Me.paint_line["line-offset"]),"line-blur":new ot(Me.paint_line["line-blur"]),"line-dasharray":new co(Me.paint_line["line-dasharray"]),"line-pattern":new co(Me.paint_line["line-pattern"]),"line-gradient":new Pl(Me.paint_line["line-gradient"])})},get layout(){return d_=d_||new bn({"line-cap":new at(Me.layout_line["line-cap"]),"line-join":new ot(Me.layout_line["line-join"]),"line-miter-limit":new at(Me.layout_line["line-miter-limit"]),"line-round-limit":new at(Me.layout_line["line-round-limit"]),"line-sort-key":new ot(Me.layout_line["line-sort-key"])})}};class j0 extends ot{possiblyEvaluate(e,n){return n=new Nt(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(e,n)}evaluate(e,n,d,m){return n=Qi({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(e,n,d,m)}}let mh;class O0 extends Zn{constructor(e,n){super(e,h_,n),this.gradientVersion=0,mh||(mh=new j0(h_.paint.properties["line-width"].specification),mh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const n=this.gradientExpression();this.stepInterpolant=!!(function(d){return d._styleExpression!==void 0})(n)&&n._styleExpression.expression instanceof $a,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,n){super.recalculate(e,n),this.paint._values["line-floorwidth"]=mh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new _p(e)}queryRadius(e){const n=e,d=f_(jl("line-width",this,n),jl("line-gap-width",this,n)),m=jl("line-offset",this,n);return d/2+Math.abs(m)+uh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:n,featureState:d,geometry:m,transform:_,pixelsToTileUnits:y}){const b=dh(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,y),S=y/2*f_(this.paint.get("line-width").evaluate(n,d),this.paint.get("line-gap-width").evaluate(n,d)),P=this.paint.get("line-offset").evaluate(n,d);return P&&(m=(function(D,I){const F=[];for(let j=0;j<D.length;j++){const V=Ww(D[j]),N=[];for(let q=0;q<V.length;q++){const Y=V[q],se=V[q-1],X=V[q+1],ee=q===0?new w(0,0):Y.sub(se)._unit()._perp(),le=q===V.length-1?new w(0,0):X.sub(Y)._unit()._perp(),ce=ee._add(le)._unit(),ke=ce.x*le.x+ce.y*le.y;ke!==0&&ce._mult(1/ke),N.push(ce._mult(I)._add(Y))}F.push(N)}return F})(m,P*y)),(function(D,I,F){for(let j=0;j<I.length;j++){const V=I[j];if(D.length>=3){for(let N=0;N<V.length;N++)if(Fl(D,V[N]))return!0}if(Uw(D,V,F))return!0}return!1})(b,m,S)}isTileClipped(){return!0}}function f_(a,e){return e>0?e+2*a:a}const $0=Si([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),B0=Si([{name:"a_projected_pos",components:3,type:"Float32"}],4);Si([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const V0=Si([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Si([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const p_=Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),N0=Si([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function U0(a,e,n){return a.sections.forEach((d=>{d.text=(function(m,_,y){const b=_.layout.get("text-transform").evaluate(y,{});return b==="uppercase"?m=m.toLocaleUpperCase():b==="lowercase"&&(m=m.toLocaleLowerCase()),Ga.applyArabicShaping&&(m=Ga.applyArabicShaping(m)),m})(d.text,e,n)})),a}Si([{name:"triangle",components:3,type:"Uint16"}]),Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Si([{type:"Float32",name:"offsetX"}]),Si([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Si([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Wi=24;const vd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},G0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},q0={40:!0};function m_(a,e,n,d,m,_){if("fontStack"in e){const y=n[e.fontStack],b=y&&y[a];return b?b.metrics.advance*e.scale+m:0}{const y=d[e.imageName];return y?y.displaySize[0]*e.scale*Wi/_+m:0}}function g_(a,e,n,d){const m=Math.pow(a-e,2);return d?a<e?m/2:2*m:m+Math.abs(n)*n}function W0(a,e,n){let d=0;return a===10&&(d-=1e4),n&&(d+=150),a!==40&&a!==65288||(d+=50),e!==41&&e!==65289||(d+=50),d}function __(a,e,n,d,m,_){let y=null,b=g_(e,n,m,_);for(const S of d){const P=g_(e-S.x,n,m,_)+S.badness;P<=b&&(y=S,b=P)}return{index:a,x:e,priorBreak:y,badness:b}}function y_(a){return a?y_(a.priorBreak).concat(a.index):[]}class Vl{constructor(e="",n=[],d=[]){this.text=e,this.sections=n,this.sectionIndex=d,this.imageSectionID=null}static fromFeature(e,n){const d=new Vl;for(let m=0;m<e.sections.length;m++){const _=e.sections[m];_.image?d.addImageSection(_):d.addTextSection(_,n)}return d}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=(function(e){let n="",d={premature:!0,value:void 0};const m=e[Symbol.iterator]();let _=m.next();const y=e[Symbol.iterator]();y.next();let b=y.next();for(;!_.done;)n+=!b.done&&Ku(b.value.codePointAt(0))&&!vd[b.value]||!d.premature&&Ku(d.value.codePointAt(0))&&!vd[d.value]||!vd[_.value]?_.value:vd[_.value],d={value:_.value,premature:!1},_=m.next(),b=y.next();return n})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const e=this.text.match(/^\s*/),n=e?e[0].length:0,d=this.text.match(/\S\s*$/),m=d?d[0].length-1:0;this.text=this.text.substring(n,this.text.length-m),this.sectionIndex=this.sectionIndex.slice(n,this.sectionIndex.length-m)}substring(e,n){const d=[...this.text].slice(e,n).join(""),m=this.sectionIndex.slice(e,n);return new Vl(d,this.sections,m)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,n)=>Math.max(e,this.sections[n].scale)),0)}getMaxImageSize(e){let n=0,d=0;for(let m=0;m<this.length();m++){const _=this.getSection(m);if("imageName"in _){const y=e[_.imageName];if(!y)continue;const b=y.displaySize;n=Math.max(n,b[0]),d=Math.max(d,b[1])}}return{maxImageWidth:n,maxImageHeight:d}}addTextSection(e,n){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||n});const d=this.sections.length-1;this.sectionIndex.push(...[...e.text].map((()=>d)))}addImageSection(e){const n=e.image?e.image.name:"";if(n.length===0)return void Ui("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:n}),this.sectionIndex.push(this.sections.length-1)):Ui("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,n,d,m,_){const y=[],b=this.determineAverageLineWidth(e,n,d,m,_),S=this.hasZeroWidthSpaces();let P=0,D=0;const I=this.text[Symbol.iterator]();let F=I.next();const j=this.text[Symbol.iterator]();j.next();let V=j.next();const N=this.text[Symbol.iterator]();N.next(),N.next();let q=N.next();for(;!F.done;){const Y=this.getSection(D),se=F.value.codePointAt(0);if(Xc(se)||(P+=m_(se,Y,d,m,e,_)),!V.done){const X=oo(se),ee=V.value.codePointAt(0);(G0[se]||X||"imageName"in Y||!q.done&&q0[ee])&&y.push(__(D+1,P,b,y,W0(se,ee,X&&S),!1))}D++,F=I.next(),V=j.next(),q=N.next()}return y_(__(this.length(),P,b,y,0,!0))}determineAverageLineWidth(e,n,d,m,_){let y=0,b=0;for(const S of this.text){const P=this.getSection(b);y+=m_(S.codePointAt(0),P,d,m,e,_),b++}return y/Math.max(1,Math.ceil(y/n))}}const yp=4294967296,v_=1/yp,x_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class gh{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,n,d=this.length){for(;this.pos<d;){const m=this.readVarint(),_=m>>3,y=this.pos;this.type=7&m,e(_,n,this),this.pos===y&&this.skip(m)}return n}readMessage(e,n){return this.readFields(e,n,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*yp;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*yp;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const n=this.buf;let d,m;return m=n[this.pos++],d=127&m,m<128?d:(m=n[this.pos++],d|=(127&m)<<7,m<128?d:(m=n[this.pos++],d|=(127&m)<<14,m<128?d:(m=n[this.pos++],d|=(127&m)<<21,m<128?d:(m=n[this.pos],d|=(15&m)<<28,(function(_,y,b){const S=b.buf;let P,D;if(D=S[b.pos++],P=(112&D)>>4,D<128||(D=S[b.pos++],P|=(127&D)<<3,D<128)||(D=S[b.pos++],P|=(127&D)<<10,D<128)||(D=S[b.pos++],P|=(127&D)<<17,D<128)||(D=S[b.pos++],P|=(127&D)<<24,D<128)||(D=S[b.pos++],P|=(1&D)<<31,D<128))return Nl(_,P,y);throw new Error("Expected varint not more than 10 bytes")})(d,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,n=this.pos;return this.pos=e,e-n>=12&&x_?x_.decode(this.buf.subarray(n,e)):(function(d,m,_){let y="",b=m;for(;b<_;){const S=d[b];let P,D,I,F=null,j=S>239?4:S>223?3:S>191?2:1;if(b+j>_)break;j===1?S<128&&(F=S):j===2?(P=d[b+1],(192&P)==128&&(F=(31&S)<<6|63&P,F<=127&&(F=null))):j===3?(P=d[b+1],D=d[b+2],(192&P)==128&&(192&D)==128&&(F=(15&S)<<12|(63&P)<<6|63&D,(F<=2047||F>=55296&&F<=57343)&&(F=null))):j===4&&(P=d[b+1],D=d[b+2],I=d[b+3],(192&P)==128&&(192&D)==128&&(192&I)==128&&(F=(15&S)<<18|(63&P)<<12|(63&D)<<6|63&I,(F<=65535||F>=1114112)&&(F=null))),F===null?(F=65533,j=1):F>65535&&(F-=65536,y+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),y+=String.fromCharCode(F),b+=j}return y})(this.buf,n,e)}readBytes(){const e=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,e);return this.pos=e,n}readPackedVarint(e=[],n){const d=this.readPackedEnd();for(;this.pos<d;)e.push(this.readVarint(n));return e}readPackedSVarint(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const n=7&e;if(n===0)for(;this.buf[this.pos++]>127;);else if(n===2)this.pos=this.readVarint()+this.pos;else if(n===5)this.pos+=4;else{if(n!==1)throw new Error(`Unimplemented type: ${n}`);this.pos+=8}}writeTag(e,n){this.writeVarint(e<<3|n)}realloc(e){let n=this.length||16;for(;n<this.pos+e;)n*=2;if(n!==this.length){const d=new Uint8Array(n);d.set(this.buf),this.buf=d,this.dataView=new DataView(d.buffer),this.length=n}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*v_),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*v_),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?(function(n,d){let m,_;if(n>=0?(m=n%4294967296|0,_=n/4294967296|0):(m=~(-n%4294967296),_=~(-n/4294967296),4294967295^m?m=m+1|0:(m=0,_=_+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(y,b,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)})(m,0,d),(function(y,b){const S=(7&y)<<4;b.buf[b.pos++]|=S|((y>>>=3)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y|((y>>>=7)?128:0),y&&(b.buf[b.pos++]=127&y)))))})(_,d)})(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const n=this.pos;this.pos=(function(m,_,y){for(let b,S,P=0;P<_.length;P++){if(b=_.charCodeAt(P),b>55295&&b<57344){if(!S){b>56319||P+1===_.length?(m[y++]=239,m[y++]=191,m[y++]=189):S=b;continue}if(b<56320){m[y++]=239,m[y++]=191,m[y++]=189,S=b;continue}b=S-55296<<10|b-56320|65536,S=null}else S&&(m[y++]=239,m[y++]=191,m[y++]=189,S=null);b<128?m[y++]=b:(b<2048?m[y++]=b>>6|192:(b<65536?m[y++]=b>>12|224:(m[y++]=b>>18|240,m[y++]=b>>12&63|128),m[y++]=b>>6&63|128),m[y++]=63&b|128)}return y})(this.buf,e,this.pos);const d=this.pos-n;d>=128&&b_(n,d,this),this.pos=n-1,this.writeVarint(d),this.pos+=d}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const n=e.length;this.writeVarint(n),this.realloc(n);for(let d=0;d<n;d++)this.buf[this.pos++]=e[d]}writeRawMessage(e,n){this.pos++;const d=this.pos;e(n,this);const m=this.pos-d;m>=128&&b_(d,m,this),this.pos=d-1,this.writeVarint(m),this.pos+=m}writeMessage(e,n,d){this.writeTag(e,2),this.writeRawMessage(n,d)}writePackedVarint(e,n){n.length&&this.writeMessage(e,H0,n)}writePackedSVarint(e,n){n.length&&this.writeMessage(e,Z0,n)}writePackedBoolean(e,n){n.length&&this.writeMessage(e,X0,n)}writePackedFloat(e,n){n.length&&this.writeMessage(e,K0,n)}writePackedDouble(e,n){n.length&&this.writeMessage(e,Y0,n)}writePackedFixed32(e,n){n.length&&this.writeMessage(e,J0,n)}writePackedSFixed32(e,n){n.length&&this.writeMessage(e,Q0,n)}writePackedFixed64(e,n){n.length&&this.writeMessage(e,e1,n)}writePackedSFixed64(e,n){n.length&&this.writeMessage(e,t1,n)}writeBytesField(e,n){this.writeTag(e,2),this.writeBytes(n)}writeFixed32Field(e,n){this.writeTag(e,5),this.writeFixed32(n)}writeSFixed32Field(e,n){this.writeTag(e,5),this.writeSFixed32(n)}writeFixed64Field(e,n){this.writeTag(e,1),this.writeFixed64(n)}writeSFixed64Field(e,n){this.writeTag(e,1),this.writeSFixed64(n)}writeVarintField(e,n){this.writeTag(e,0),this.writeVarint(n)}writeSVarintField(e,n){this.writeTag(e,0),this.writeSVarint(n)}writeStringField(e,n){this.writeTag(e,2),this.writeString(n)}writeFloatField(e,n){this.writeTag(e,5),this.writeFloat(n)}writeDoubleField(e,n){this.writeTag(e,1),this.writeDouble(n)}writeBooleanField(e,n){this.writeVarintField(e,+n)}}function Nl(a,e,n){return n?4294967296*e+(a>>>0):4294967296*(e>>>0)+(a>>>0)}function b_(a,e,n){const d=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(d);for(let m=n.pos-1;m>=a;m--)n.buf[m+d]=n.buf[m]}function H0(a,e){for(let n=0;n<a.length;n++)e.writeVarint(a[n])}function Z0(a,e){for(let n=0;n<a.length;n++)e.writeSVarint(a[n])}function K0(a,e){for(let n=0;n<a.length;n++)e.writeFloat(a[n])}function Y0(a,e){for(let n=0;n<a.length;n++)e.writeDouble(a[n])}function X0(a,e){for(let n=0;n<a.length;n++)e.writeBoolean(a[n])}function J0(a,e){for(let n=0;n<a.length;n++)e.writeFixed32(a[n])}function Q0(a,e){for(let n=0;n<a.length;n++)e.writeSFixed32(a[n])}function e1(a,e){for(let n=0;n<a.length;n++)e.writeFixed64(a[n])}function t1(a,e){for(let n=0;n<a.length;n++)e.writeSFixed64(a[n])}function i1(a,e,n){a===1&&n.readMessage(n1,e)}function n1(a,e,n){if(a===3){const{id:d,bitmap:m,width:_,height:y,left:b,top:S,advance:P}=n.readMessage(a1,{});e.push({id:d,bitmap:new ud({width:_+6,height:y+6},m),metrics:{width:_,height:y,left:b,top:S,advance:P}})}}function a1(a,e,n){a===1?e.id=n.readVarint():a===2?e.bitmap=n.readBytes():a===3?e.width=n.readVarint():a===4?e.height=n.readVarint():a===5?e.left=n.readSVarint():a===6?e.top=n.readSVarint():a===7&&(e.advance=n.readVarint())}function w_(a){let e=0,n=0;for(const y of a)e+=y.w*y.h,n=Math.max(n,y.w);a.sort(((y,b)=>b.h-y.h));const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let m=0,_=0;for(const y of a)for(let b=d.length-1;b>=0;b--){const S=d[b];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,_=Math.max(_,y.y+y.h),m=Math.max(m,y.x+y.w),y.w===S.w&&y.h===S.h){const P=d.pop();P&&b<d.length&&(d[b]=P)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(d.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:m,h:_,fill:e/(m*_)||0}}class vp{constructor(e,{pixelRatio:n,version:d,stretchX:m,stretchY:_,content:y,textFitWidth:b,textFitHeight:S}){this.paddedRect=e,this.pixelRatio=n,this.stretchX=m,this.stretchY=_,this.content=y,this.version=d,this.textFitWidth=b,this.textFitHeight=S}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class k_{constructor(e,n){const d={},m={};this.haveRenderCallbacks=[];const _=[];this.addImages(e,d,_),this.addImages(n,m,_);const{w:y,h:b}=w_(_),S=new $n({width:y||1,height:b||1});for(const P in e){const D=e[P],I=d[P].paddedRect;$n.copy(D.data,S,{x:0,y:0},{x:I.x+1,y:I.y+1},D.data)}for(const P in n){const D=n[P],I=m[P].paddedRect,F=I.x+1,j=I.y+1,V=D.data.width,N=D.data.height;$n.copy(D.data,S,{x:0,y:0},{x:F,y:j},D.data),$n.copy(D.data,S,{x:0,y:N-1},{x:F,y:j-1},{width:V,height:1}),$n.copy(D.data,S,{x:0,y:0},{x:F,y:j+N},{width:V,height:1}),$n.copy(D.data,S,{x:V-1,y:0},{x:F-1,y:j},{width:1,height:N}),$n.copy(D.data,S,{x:0,y:0},{x:F+V,y:j},{width:1,height:N})}this.image=S,this.iconPositions=d,this.patternPositions=m}addImages(e,n,d){for(const m in e){const _=e[m],y={x:0,y:0,w:_.data.width+2,h:_.data.height+2};d.push(y),n[m]=new vp(y,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(e,n){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in e.updatedImages)this.patchUpdatedImage(this.iconPositions[d],e.getImage(d),n),this.patchUpdatedImage(this.patternPositions[d],e.getImage(d),n)}patchUpdatedImage(e,n,d){if(!e||!n||e.version===n.version)return;e.version=n.version;const[m,_]=e.tl;d.update(n.data,void 0,{x:m,y:_})}}var ds;function _h(a,e,n,d,m,_,y,b,S,P,D,I,F,j,V){const N=Vl.fromFeature(a,m);let q;I===h.az.vertical&&N.verticalizePunctuation();let Y=N.determineLineBreaks(P,_,e,d,j);const{processBidirectionalText:se,processStyledBidirectionalText:X}=Ga;if(se&&N.sections.length===1){q=[],Y=Y.map((ke=>N.toCodeUnitIndex(ke)));const ce=se(N.toString(),Y);for(const ke of ce){const Fe=[...ke].map((()=>0));q.push(new Vl(ke,N.sections,Fe))}}else if(X){q=[],Y=Y.map((Ie=>N.toCodeUnitIndex(Ie)));let ce=0;const ke=[];for(const Ie of N.text)ke.push(...Array(Ie.length).fill(N.sectionIndex[ce])),ce++;const Fe=X(N.text,ke,Y);for(const Ie of Fe){const Oe=[];let Ze="";for(const Be of Ie[0])Oe.push(Ie[1][Ze.length]),Ze+=Be;q.push(new Vl(Ie[0],N.sections,Oe))}}else q=(function(ce,ke){const Fe=[];let Ie=0;for(const Oe of ke)Fe.push(ce.substring(Ie,Oe)),Ie=Oe;return Ie<ce.length()&&Fe.push(ce.substring(Ie,ce.length())),Fe})(N,Y);const ee=[],le={positionedLines:ee,text:N.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:I,iconsInText:!1,verticalizable:!1};return(function(ce,ke,Fe,Ie,Oe,Ze,Be,Re,Ee,et,Je,it){let Ye=0,st=0,Et=0,kt=0;const ri=Re==="right"?1:Re==="left"?0:.5,dn=Wi/it;let ji=0;for(const zt of Oe){zt.trim();const yi=zt.getMaxScale(),Mi={positionedGlyphs:[],lineOffset:0};ce.positionedLines[ji]=Mi;const Xt=Mi.positionedGlyphs;let Bn=0;if(!zt.length()){st+=Ze,++ji;continue}const cn=r1(Ie,zt,dn);let Vn=0;for(const Ki of zt.text){const di=zt.getSection(Vn),Oi=Ki.codePointAt(0),vi=s1(Ee,Je,Oi),Yi={glyph:Oi,imageName:null,x:Ye,y:st+-17,vertical:vi,scale:1,fontStack:"",sectionIndex:zt.getSectionIndex(Vn),metrics:null,rect:null};let Sr;if("fontStack"in di){if(Sr=o1(di,Oi,vi,cn,ke,Fe),!Sr)continue;Yi.fontStack=di.fontStack}else{if(ce.iconsInText=!0,di.scale*=dn,Sr=l1(di,vi,yi,cn,Ie),!Sr)continue;Bn=Math.max(Bn,Sr.imageOffset),Yi.imageName=di.imageName}const{rect:Ca,metrics:Md,baselineOffset:ms}=Sr;Yi.y+=ms,Yi.scale=di.scale,Yi.metrics=Md,Yi.rect=Ca,Xt.push(Yi),vi?(ce.verticalizable=!0,Ye+=("imageName"in di?Md.advance:Wi)*di.scale+et):Ye+=Md.advance*di.scale+et,Vn++}Xt.length!==0&&(Et=Math.max(Ye-et,Et),u1(Xt,0,Xt.length-1,ri)),Ye=0,Mi.lineOffset=Math.max(Bn,(yi-1)*Wi);const ya=Ze*yi+Bn;st+=ya,kt=Math.max(ya,kt),++ji}const{horizontalAlign:si,verticalAlign:ti}=xp(Be);(function(zt,yi,Mi,Xt,Bn,cn,Vn,ya,Ki){const di=(yi-Mi)*Bn;let Oi=0;Oi=cn!==Vn?-ya*Xt- -17:-Xt*Ki*Vn+.5*Vn;for(const vi of zt)for(const Yi of vi.positionedGlyphs)Yi.x+=di,Yi.y+=Oi})(ce.positionedLines,ri,si,ti,Et,kt,Ze,st,Oe.length),ce.top+=-ti*st,ce.bottom=ce.top+st,ce.left+=-si*Et,ce.right=ce.left+Et})(le,e,n,d,q,y,b,S,I,P,F,V),!(function(ce){for(const ke of ce)if(ke.positionedGlyphs.length!==0)return!1;return!0})(ee)&&le}function xp(a){let e=.5,n=.5;switch(a){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function r1(a,e,n){const d=e.getMaxScale()*Wi,{maxImageWidth:m,maxImageHeight:_}=e.getMaxImageSize(a),y=Math.max(d,_*n);return{verticalLineContentWidth:Math.max(d,m*n),horizontalLineContentHeight:y}}function S_(a){switch(a){case"top":return 0;case"center":return .5;default:return 1}}function s1(a,e,n){return!(a===h.az.horizontal||!e&&!Zu(n)||e&&(Xc(n)||(d=n,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function o1(a,e,n,d,m,_){const y=_[a.fontStack],b=(function(P,D,I,F){if(P&&P.rect)return P;const j=D[I.fontStack],V=j&&j[F];return V?{rect:null,metrics:V.metrics}:null})(y&&y[e],m,a,e);if(b===null)return null;let S;if(n)S=d.verticalLineContentWidth-a.scale*Wi;else{const P=S_(a.verticalAlign);S=(d.horizontalLineContentHeight-a.scale*Wi)*P}return{rect:b.rect,metrics:b.metrics,baselineOffset:S}}function l1(a,e,n,d,m){const _=m[a.imageName];if(!_)return null;const y=_.paddedRect,b=_.displaySize,S={width:b[0],height:b[1],left:1,top:-3,advance:e?b[1]:b[0]};let P;if(e)P=d.verticalLineContentWidth-b[1]*a.scale;else{const D=S_(a.verticalAlign);P=(d.horizontalLineContentHeight-b[1]*a.scale)*D}return{rect:y,metrics:S,baselineOffset:P,imageOffset:(e?b[0]:b[1])*a.scale-Wi*n}}function u1(a,e,n,d){if(d===0)return;const m=a[n],_=(a[n].x+m.metrics.advance*m.scale)*d;for(let y=e;y<=n;y++)a[y].x-=_}function d1(a,e,n){const{horizontalAlign:d,verticalAlign:m}=xp(n),_=e[0]-a.displaySize[0]*d,y=e[1]-a.displaySize[1]*m;return{image:a,top:y,bottom:y+a.displaySize[1],left:_,right:_+a.displaySize[0]}}function T_(a){var e,n;let d=a.left,m=a.top,_=a.right-d,y=a.bottom-m;const b=(e=a.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",S=(n=a.image.textFitHeight)!==null&&n!==void 0?n:"stretchOrShrink",P=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(S==="proportional"){if(b==="stretchOnly"&&_/y<P||b==="proportional"){const D=Math.ceil(y*P);d*=D/_,_=D}}else if(b==="proportional"&&S==="stretchOnly"&&P!==0&&_/y>P){const D=Math.ceil(_/P);m*=D/y,y=D}return{x1:d,y1:m,x2:d+_,y2:m+y}}function M_(a,e,n,d,m,_){const y=a.image;let b;if(y.content){const q=y.content,Y=y.pixelRatio||1;b=[q[0]/Y,q[1]/Y,y.displaySize[0]-q[2]/Y,y.displaySize[1]-q[3]/Y]}const S=e.left*_,P=e.right*_;let D,I,F,j;n==="width"||n==="both"?(j=m[0]+S-d[3],I=m[0]+P+d[1]):(j=m[0]+(S+P-y.displaySize[0])/2,I=j+y.displaySize[0]);const V=e.top*_,N=e.bottom*_;return n==="height"||n==="both"?(D=m[1]+V-d[0],F=m[1]+N+d[2]):(D=m[1]+(V+N-y.displaySize[1])/2,F=D+y.displaySize[1]),{image:y,top:D,right:I,bottom:F,left:j,collisionPadding:b}}tt("ImagePosition",vp),tt("ImageAtlas",k_),h.az=void 0,(ds=h.az||(h.az={}))[ds.none=0]="none",ds[ds.horizontal=1]="horizontal",ds[ds.vertical=2]="vertical",ds[ds.horizontalOnly=3]="horizontalOnly";const wr=128,cs=32640;function P_(a,e){const{expression:n}=e;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new Nt(a+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=n;let _=0;for(;_<d.length&&d[_]<=a;)_++;_=Math.max(0,_-1);let y=_;for(;y<d.length&&d[y]<a+1;)y++;y=Math.min(d.length-1,y);const b=d[_],S=d[y];return n.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:S,interpolationType:m}:{kind:"camera",minZoom:b,maxZoom:S,minSize:n.evaluate(new Nt(b)),maxSize:n.evaluate(new Nt(S)),interpolationType:m}}}function bp(a,e,n){let d="never";const m=a.get(e);return m?d=m:a.get(n)&&(d="always"),d}const c1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function yh(a,e,n,d,m,_,y,b,S,P,D,I,F){const j=b?Math.min(cs,Math.round(b[0])):0,V=b?Math.min(cs,Math.round(b[1])):0;a.emplaceBack(e,n,Math.round(32*d),Math.round(32*m),_,y,(j<<1)+(S?1:0),V,16*P,16*D,256*I,256*F)}function wp(a,e,n){a.emplaceBack(e.x,e.y,n),a.emplaceBack(e.x,e.y,n),a.emplaceBack(e.x,e.y,n),a.emplaceBack(e.x,e.y,n)}function h1(a){for(const e of a.sections)if(eh(e.text))return!0;return!1}class kp{constructor(e){this.layoutVertexArray=new ue,this.indexArray=new Ce,this.programConfigurations=e,this.segments=new Ke,this.dynamicLayoutVertexArray=new ve,this.opacityVertexArray=new De,this.hasVisibleVertices=!1,this.placedSymbolArray=new k}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,n,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$0.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,B0.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,c1,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}tt("SymbolBuffers",kp);class Sp{constructor(e,n,d){this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new d,this.segments=new Ke,this.collisionVertexArray=new Pe}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,V0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}tt("CollisionBuffers",Sp);class Ul{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((y=>y.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=P_(this.zoom,n["text-size"]),this.iconSizeData=P_(this.zoom,n["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=bp(d,"text-overlap","text-allow-overlap")!=="never"||bp(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map((y=>h.az[y]))),this.stateDependentLayerIds=this.layers.filter((y=>y.isStateDependent())).map((y=>y.id)),this.sourceID=e.sourceID}createArrays(){this.text=new kp(new br(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new kp(new br(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new A,this.lineVertexArray=new R,this.symbolInstances=new C,this.textAnchorOffsets=new $}calculateGlyphDependencies(e,n,d,m,_){for(const y of e)if(n[y.codePointAt(0)]=!0,(d||m)&&_){const b=vd[y];b&&(n[b.codePointAt(0)]=!0)}}populate(e,n,d){const m=this.layers[0],_=m.layout,y=_.get("text-font"),b=_.get("text-field"),S=_.get("icon-image"),P=(b.value.kind!=="constant"||b.value.value instanceof Tn&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),D=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,I=_.get("symbol-sort-key");if(this.features=[],!P&&!D)return;const F=n.iconDependencies,j=n.glyphDependencies,V=n.availableImages,N=new Nt(this.zoom);for(const{feature:q,id:Y,index:se,sourceLayerIndex:X}of e){const ee=m._featureFilter.needGeometry,le=Za(q,ee);if(!m._featureFilter.filter(N,le,d))continue;let ce,ke;if(ee||(le.geometry=Ha(q)),P){const Ie=m.getValueAndResolveTokens("text-field",le,d,V),Oe=Tn.factory(Ie),Ze=this.hasRTLText=this.hasRTLText||h1(Oe);(!Ze||Ga.getRTLTextPluginStatus()==="unavailable"||Ze&&Ga.isParsed())&&(ce=U0(Oe,m,le))}if(D){const Ie=m.getValueAndResolveTokens("icon-image",le,d,V);ke=Ie instanceof jn?Ie:jn.fromString(Ie)}if(!ce&&!ke)continue;const Fe=this.sortFeaturesByKey?I.evaluate(le,{},d):void 0;if(this.features.push({id:Y,text:ce,icon:ke,index:se,sourceLayerIndex:X,geometry:le.geometry,properties:q.properties,type:gd.types[q.type],sortKey:Fe}),ke&&(F[ke.name]=!0),ce){const Ie=y.evaluate(le,{},d).join(","),Oe=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.az.vertical)>=0;for(const Ze of ce.sections)if(Ze.image)F[Ze.image.name]=!0;else{const Be=ls(ce.toString()),Re=Ze.fontStack||Ie,Ee=j[Re]=j[Re]||{};this.calculateGlyphDependencies(Ze.text,Ee,Oe,this.allowVerticalPlacement,Be)}}}_.get("symbol-placement")==="line"&&(this.features=(function(q){const Y={},se={},X=[];let ee=0;function le(Ie){X.push(q[Ie]),ee++}function ce(Ie,Oe,Ze){const Be=se[Ie];return delete se[Ie],se[Oe]=Be,X[Be].geometry[0].pop(),X[Be].geometry[0]=X[Be].geometry[0].concat(Ze[0]),Be}function ke(Ie,Oe,Ze){const Be=Y[Oe];return delete Y[Oe],Y[Ie]=Be,X[Be].geometry[0].shift(),X[Be].geometry[0]=Ze[0].concat(X[Be].geometry[0]),Be}function Fe(Ie,Oe,Ze){const Be=Ze?Oe[0][Oe[0].length-1]:Oe[0][0];return`${Ie}:${Be.x}:${Be.y}`}for(let Ie=0;Ie<q.length;Ie++){const Oe=q[Ie],Ze=Oe.geometry,Be=Oe.text?Oe.text.toString():null;if(!Be){le(Ie);continue}const Re=Fe(Be,Ze),Ee=Fe(Be,Ze,!0);if(Re in se&&Ee in Y&&se[Re]!==Y[Ee]){const et=ke(Re,Ee,Ze),Je=ce(Re,Ee,X[et].geometry);delete Y[Re],delete se[Ee],se[Fe(Be,X[Je].geometry,!0)]=Je,X[et].geometry=null}else Re in se?ce(Re,Ee,Ze):Ee in Y?ke(Re,Ee,Ze):(le(Ie),Y[Re]=ee-1,se[Ee]=ee-1)}return X.filter((Ie=>Ie.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((q,Y)=>q.sortKey-Y.sortKey))}update(e,n,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,n,this.layers,{imagePositions:d}),this.icon.programConfigurations.updatePaintArrays(e,n,this.layers,{imagePositions:d}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,n){const d=this.lineVertexArray.length;if(e.segment!==void 0){let m=e.dist(n[e.segment+1]),_=e.dist(n[e.segment]);const y={};for(let b=e.segment+1;b<n.length;b++)y[b]={x:n[b].x,y:n[b].y,tileUnitDistanceFromAnchor:m},b<n.length-1&&(m+=n[b+1].dist(n[b]));for(let b=e.segment||0;b>=0;b--)y[b]={x:n[b].x,y:n[b].y,tileUnitDistanceFromAnchor:_},b>0&&(_+=n[b-1].dist(n[b]));for(let b=0;b<n.length;b++){const S=y[b];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(e,n,d,m,_,y,b,S,P,D,I,F){const j=e.indexArray,V=e.layoutVertexArray,N=e.segments.prepareSegment(4*n.length,V,j,this.canOverlap?y.sortKey:void 0),q=this.glyphOffsetArray.length,Y=N.vertexLength,se=this.allowVerticalPlacement&&b===h.az.vertical?Math.PI/2:0,X=y.text&&y.text.sections;for(let ee=0;ee<n.length;ee++){const{tl:le,tr:ce,bl:ke,br:Fe,tex:Ie,pixelOffsetTL:Oe,pixelOffsetBR:Ze,minFontScaleX:Be,minFontScaleY:Re,glyphOffset:Ee,isSDF:et,sectionIndex:Je}=n[ee],it=N.vertexLength,Ye=Ee[1];yh(V,S.x,S.y,le.x,Ye+le.y,Ie.x,Ie.y,d,et,Oe.x,Oe.y,Be,Re),yh(V,S.x,S.y,ce.x,Ye+ce.y,Ie.x+Ie.w,Ie.y,d,et,Ze.x,Oe.y,Be,Re),yh(V,S.x,S.y,ke.x,Ye+ke.y,Ie.x,Ie.y+Ie.h,d,et,Oe.x,Ze.y,Be,Re),yh(V,S.x,S.y,Fe.x,Ye+Fe.y,Ie.x+Ie.w,Ie.y+Ie.h,d,et,Ze.x,Ze.y,Be,Re),wp(e.dynamicLayoutVertexArray,S,se),j.emplaceBack(it,it+2,it+1),j.emplaceBack(it+1,it+2,it+3),N.vertexLength+=4,N.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ee[0]),ee!==n.length-1&&Je===n[ee+1].sectionIndex||e.programConfigurations.populatePaintArrays(V.length,y,y.index,{imagePositions:{},canonical:F,formattedSection:X&&X[Je]})}e.placedSymbolArray.emplaceBack(S.x,S.y,q,this.glyphOffsetArray.length-q,Y,P,D,S.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],b,0,!1,0,I)}_addCollisionDebugVertex(e,n,d,m,_,y){return n.emplaceBack(0,0),e.emplaceBack(d.x,d.y,m,_,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(e,n,d,m,_,y,b){const S=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),P=S.vertexLength,D=_.layoutVertexArray,I=_.collisionVertexArray,F=b.anchorX,j=b.anchorY;this._addCollisionDebugVertex(D,I,y,F,j,new w(e,n)),this._addCollisionDebugVertex(D,I,y,F,j,new w(d,n)),this._addCollisionDebugVertex(D,I,y,F,j,new w(d,m)),this._addCollisionDebugVertex(D,I,y,F,j,new w(e,m)),S.vertexLength+=4;const V=_.indexArray;V.emplaceBack(P,P+1),V.emplaceBack(P+1,P+2),V.emplaceBack(P+2,P+3),V.emplaceBack(P+3,P),S.primitiveLength+=4}addDebugCollisionBoxes(e,n,d,m){for(let _=e;_<n;_++){const y=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,m?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Sp(Te,p_.members,Ge),this.iconCollisionBox=new Sp(Te,p_.members,Ge);for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(e,n,d,m,_,y,b,S,P){const D={};for(let I=n;I<d;I++){const F=e.get(I);D.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},D.textFeatureIndex=F.featureIndex;break}for(let I=m;I<_;I++){const F=e.get(I);D.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},D.verticalTextFeatureIndex=F.featureIndex;break}for(let I=y;I<b;I++){const F=e.get(I);D.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},D.iconFeatureIndex=F.featureIndex;break}for(let I=S;I<P;I++){const F=e.get(I);D.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},D.verticalIconFeatureIndex=F.featureIndex;break}return D}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const d=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,n){const d=e.placedSymbolArray.get(n),m=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<m;_+=4)e.indexArray.emplaceBack(_,_+2,_+1),e.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(e),d=Math.cos(e),m=[],_=[],y=[];for(let b=0;b<this.symbolInstances.length;++b){y.push(b);const S=this.symbolInstances.get(b);m.push(0|Math.round(n*S.anchorX+d*S.anchorY)),_.push(S.featureIndex)}return y.sort(((b,S)=>m[b]-m[S]||_[S]-_[b])),y}addToSortKeyRanges(e,n){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===n?d.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const d=this.symbolInstances.get(n);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach(((m,_,y)=>{m>=0&&y.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)})),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let C_,E_;tt("SymbolBucket",Ul,{omit:["layers","collisionBoxArray","features","compareText"]}),Ul.MAX_GLYPHS=65535,Ul.addDynamicAttributes=wp;var Tp={get paint(){return E_=E_||new bn({"icon-opacity":new ot(Me.paint_symbol["icon-opacity"]),"icon-color":new ot(Me.paint_symbol["icon-color"]),"icon-halo-color":new ot(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new ot(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ot(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new at(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new at(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new ot(Me.paint_symbol["text-opacity"]),"text-color":new ot(Me.paint_symbol["text-color"],{runtimeType:Fn,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new ot(Me.paint_symbol["text-halo-color"]),"text-halo-width":new ot(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new ot(Me.paint_symbol["text-halo-blur"]),"text-translate":new at(Me.paint_symbol["text-translate"]),"text-translate-anchor":new at(Me.paint_symbol["text-translate-anchor"])})},get layout(){return C_=C_||new bn({"symbol-placement":new at(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new at(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new at(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ot(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new at(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new at(Me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new at(Me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new at(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new at(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new at(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new ot(Me.layout_symbol["icon-size"]),"icon-text-fit":new at(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new at(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new ot(Me.layout_symbol["icon-image"]),"icon-rotate":new ot(Me.layout_symbol["icon-rotate"]),"icon-padding":new ot(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new at(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new ot(Me.layout_symbol["icon-offset"]),"icon-anchor":new ot(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new at(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new at(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new at(Me.layout_symbol["text-rotation-alignment"]),"text-field":new ot(Me.layout_symbol["text-field"]),"text-font":new ot(Me.layout_symbol["text-font"]),"text-size":new ot(Me.layout_symbol["text-size"]),"text-max-width":new ot(Me.layout_symbol["text-max-width"]),"text-line-height":new at(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new ot(Me.layout_symbol["text-letter-spacing"]),"text-justify":new ot(Me.layout_symbol["text-justify"]),"text-radial-offset":new ot(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new at(Me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ot(Me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ot(Me.layout_symbol["text-anchor"]),"text-max-angle":new at(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new at(Me.layout_symbol["text-writing-mode"]),"text-rotate":new ot(Me.layout_symbol["text-rotate"]),"text-padding":new at(Me.layout_symbol["text-padding"]),"text-keep-upright":new at(Me.layout_symbol["text-keep-upright"]),"text-transform":new ot(Me.layout_symbol["text-transform"]),"text-offset":new ot(Me.layout_symbol["text-offset"]),"text-allow-overlap":new at(Me.layout_symbol["text-allow-overlap"]),"text-overlap":new at(Me.layout_symbol["text-overlap"]),"text-ignore-placement":new at(Me.layout_symbol["text-ignore-placement"]),"text-optional":new at(Me.layout_symbol["text-optional"])})}};class L_{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Gn,this.defaultValue=e}evaluate(e){if(e.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(e.formattedSection))return n.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tt("FormatSectionOverride",L_,{omit:["defaultValue"]});class vh extends Zn{constructor(e,n){super(e,Tp,n)}recalculate(e,n){if(super.recalculate(e,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const _ of d)m.indexOf(_)<0&&m.push(_);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,n,d,m){const _=this.layout.get(e).evaluate(n,{},d,m),y=this._unevaluatedLayout._values[e];return y.isDataDriven()||ns(y.value)||!_?_:(function(b,S){return S.replace(/{([^{}]+)}/g,((P,D)=>b&&D in b?String(b[D]):""))})(n.properties,_)}createBucket(e){return new Ul(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Tp.paint.overridableProperties){if(!vh.hasPaintOverride(this.layout,e))continue;const n=this.paint.get(e),d=new L_(n),m=new Fu(d,n.property.specification);let _=null;_=n.value.kind==="constant"||n.value.kind==="source"?new pl("source",m):new ju("composite",m,n.value.zoomStops),this.paint._values[e]=new sa(n.property,_,n.parameters)}}_handleOverridablePaintPropertyUpdate(e,n,d){return!(!this.layout||n.isDataDriven()||d.isDataDriven())&&vh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,n){const d=e.get("text-field"),m=Tp.paint.properties[n];let _=!1;const y=b=>{for(const S of b)if(m.overrides&&m.overrides.hasOverride(S))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Tn)y(d.value.value.sections);else if(d.value.kind==="source"||d.value.kind==="composite"){const b=P=>{_||(P instanceof pa&&wi(P.value)===Is?y(P.value.sections):P instanceof Us?y(P.sections):P.eachChild(b))},S=d.value;S._styleExpression&&b(S._styleExpression.expression)}return _}}let D_;var f1={get paint(){return D_=D_||new bn({"background-color":new at(Me.paint_background["background-color"]),"background-pattern":new Ml(Me.paint_background["background-pattern"]),"background-opacity":new at(Me.paint_background["background-opacity"])})}};class p1 extends Zn{constructor(e,n){super(e,f1,n)}}class m1 extends Zn{constructor(e,n){super(e,{},n),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class g1{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const _1={once:!0},Mp=63710088e-1;class hs{constructor(e,n){if(isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new hs(Qn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const n=Math.PI/180,d=this.lat*n,m=e.lat*n,_=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((e.lng-this.lng)*n);return Mp*Math.acos(Math.min(_,1))}static convert(e){if(e instanceof hs)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new hs(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new hs(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const A_=2*Math.PI*Mp;function I_(a){return A_*Math.cos(a*Math.PI/180)}function z_(a){return(180+a)/360}function R_(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function F_(a,e){return a/I_(e)}function j_(a){return 360*a-180}function xh(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function O_(a,e){return a*I_(xh(e))}class xd{constructor(e,n,d=0){this.x=+e,this.y=+n,this.z=+d}static fromLngLat(e,n=0){const d=hs.convert(e);return new xd(z_(d.lng),R_(d.lat),F_(n,d.lat))}toLngLat(){return new hs(j_(this.x),xh(this.y))}toAltitude(){return O_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/A_*(e=xh(this.y),1/Math.cos(e*Math.PI/180));var e}}function $_(a,e,n){var d=2*Math.PI*6378137/256/Math.pow(2,n);return[a*d-2*Math.PI*6378137/2,e*d-2*Math.PI*6378137/2]}class Pp{constructor(e,n,d){if(!(function(m,_,y){return!(m<0||m>25||y<0||y>=Math.pow(2,m)||_<0||_>=Math.pow(2,m))})(e,n,d))throw new Error(`x=${n}, y=${d}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=n,this.y=d,this.key=Gl(0,e,e,n,d)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,n,d){const m=(function(y,b,S){var P=$_(256*y,256*(b=Math.pow(2,S)-b-1),S),D=$_(256*(y+1),256*(b+1),S);return P[0]+","+P[1]+","+D[0]+","+D[1]})(this.x,this.y,this.z),_=(function(y,b,S){let P,D="";for(let I=y;I>0;I--)P=1<<I-1,D+=(b&P?1:0)+(S&P?2:0);return D})(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,_).replace(/{bbox-epsg-3857}/g,m)}isChildOf(e){const n=this.z-e.z;return n>0&&e.x===this.x>>n&&e.y===this.y>>n}getTilePoint(e){const n=Math.pow(2,this.z);return new w((e.x*n-this.x)*dt,(e.y*n-this.y)*dt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class B_{constructor(e,n){this.wrap=e,this.canonical=n,this.key=Gl(e,n.z,n.z,n.x,n.y)}}class ua{constructor(e,n,d,m,_){if(this.terrainRttPosMatrix32f=null,e<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${d}`);this.overscaledZ=e,this.wrap=n,this.canonical=new Pp(d,+m,+_),this.key=Gl(n,e,d,m,_)}clone(){return new ua(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-e;return e>this.canonical.z?new ua(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ua(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,n){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-e;return e>this.canonical.z?Gl(this.wrap*+n,e,this.canonical.z,this.canonical.x,this.canonical.y):Gl(this.wrap*+n,e,e,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(e){if(e.wrap!==this.wrap||this.overscaledZ-e.overscaledZ<=0)return!1;if(e.overscaledZ===0)return this.overscaledZ>0;const n=this.canonical.z-e.canonical.z;return!(n<0)&&e.canonical.x===this.canonical.x>>n&&e.canonical.y===this.canonical.y>>n}children(e){if(this.overscaledZ>=e)return[new ua(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new ua(n,this.wrap,n,d,m),new ua(n,this.wrap,n,d+1,m),new ua(n,this.wrap,n,d,m+1),new ua(n,this.wrap,n,d+1,m+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new ua(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new ua(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new B_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new xd(e.x-this.wrap,e.y))}}function Gl(a,e,n,d,m){(a*=2)<0&&(a=-1*a-1);const _=1<<n;return(_*_*a+_*m+d).toString(36)+n.toString(36)+e.toString(36)}function Cp(a,e){return e?a.properties[e]:a.id}function y1(a,e){const n={id:a.id};if(e.removeAllProperties&&(delete a.removeProperties,delete a.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(const d of e.removeProperties){const m=a.addOrUpdateProperties.findIndex((_=>_.key===d));m>-1&&a.addOrUpdateProperties.splice(m,1)}return(a.removeAllProperties||e.removeAllProperties)&&(n.removeAllProperties=!0),(a.removeProperties||e.removeProperties)&&(n.removeProperties=[...a.removeProperties||[],...e.removeProperties||[]]),(a.addOrUpdateProperties||e.addOrUpdateProperties)&&(n.addOrUpdateProperties=[...a.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(a.newGeometry||e.newGeometry)&&(n.newGeometry=e.newGeometry||a.newGeometry),n}function V_(a){var e,n;if(!a)return{};const d={};return d.removeAll=a.removeAll,d.remove=new Set(a.remove||[]),d.add=new Map((e=a.add)===null||e===void 0?void 0:e.map((m=>[m.id,m]))),d.update=new Map((n=a.update)===null||n===void 0?void 0:n.map((m=>[m.id,m]))),d}tt("CanonicalTileID",Pp),tt("OverscaledTileID",ua,{omit:["terrainRttPosMatrix32f"]});class bo{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const n=new bo;return n.extend(e(new w(this.minX,this.minY))),n.extend(e(new w(this.maxX,this.minY))),n.extend(e(new w(this.minX,this.maxY))),n.extend(e(new w(this.maxX,this.maxY))),n}static fromPoints(e){const n=new bo;for(const d of e)n.extend(d);return n}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class N_{constructor(e){this._stringToNumber={},this._numberToString=[];for(let n=0;n<e.length;n++){const d=e[n];this._stringToNumber[d]=n,this._numberToString[n]=d}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class U_{constructor(e,n,d,m,_){this.type="Feature",this._vectorTileFeature=e,this._x=d,this._y=m,this._z=n,this.properties=e.properties,this.id=_}projectPoint(e,n,d,m){return[360*(e.x+n)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+d)/m)*Math.PI))-90]}projectLine(e,n,d,m){return e.map((_=>this.projectPoint(_,n,d,m)))}get geometry(){if(this._geometry)return this._geometry;const e=this._vectorTileFeature,n=e.extent*Math.pow(2,this._z),d=e.extent*this._x,m=e.extent*this._y,_=e.loadGeometry();switch(e.type){case 1:{const y=[];for(const S of _)y.push(S[0]);const b=this.projectLine(y,d,m,n);this._geometry=y.length===1?{type:"Point",coordinates:b[0]}:{type:"MultiPoint",coordinates:b};break}case 2:{const y=_.map((b=>this.projectLine(b,d,m,n)));this._geometry=y.length===1?{type:"LineString",coordinates:y[0]}:{type:"MultiLineString",coordinates:y};break}case 3:{const y=a_(_),b=[];for(const S of y)b.push(S.map((P=>this.projectLine(P,d,m,n))));this._geometry=b.length===1?{type:"Polygon",coordinates:b[0]}:{type:"MultiPolygon",coordinates:b};break}default:throw new Error(`unknown feature type: ${e.type}`)}return this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&n!=="_x"&&n!=="_y"&&n!=="_z"&&(e[n]=this[n]);return e}}class ql{_name;dataBuffer;nullabilityBuffer;_size;constructor(e,n,d){this._name=e,this.dataBuffer=n,typeof d=="number"?this._size=d:(this.nullabilityBuffer=d,this._size=d.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class bh extends ql{}class Ep extends bh{getValueFromBuffer(e){return this.dataBuffer[e]}}class Lp extends bh{getValueFromBuffer(e){return this.dataBuffer[e]}}class G_ extends ql{delta;constructor(e,n,d,m){super(e,n,m),this.delta=d}}class Dp extends G_{constructor(e,n,d,m){super(e,Int32Array.of(n),d,m)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class Ap extends ql{constructor(e,n,d){super(e,Int32Array.of(n),d)}getValueFromBuffer(e){return this.dataBuffer[0]}}class v1{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(e,n,d,m,_=4096){this._name=e,this._geometryVector=n,this._idVector=d,this._propertyVectors=m,this._extent=_}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((n=>[n.name,n])))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){const e=this.geometryVector[Symbol.iterator]();let n=0;for(;n<this.numFeatures;){let d;this.idVector&&(d=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(n)):this.idVector.getValue(n));const m=e?.next().value,_={};for(const y of this.propertyVectors){if(!y)continue;const b=y.name,S=y.getValue(n);S!==null&&(_[b]=S)}n++,yield{id:d,geometry:m,properties:_}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const e=[],n=this.geometryVector.getGeometries();for(let d=0;d<this.numFeatures;d++){let m;this.idVector&&(m=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(d)):this.idVector.getValue(d));const _={coordinates:n[d],type:this.geometryVector.geometryType(d)},y={};for(const b of this.propertyVectors){if(!b)continue;const S=b.name,P=b.getValue(d);P!==null&&(y[S]=P)}e.push({id:m,geometry:_,properties:y})}return e}containsMaxSaveIntegerValues(e){return e instanceof Ep||e instanceof Ap&&e instanceof Dp||e instanceof Lp}}class x1{value;constructor(e){this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var St,kr,ln,Ma,wo,Yn,Hi,Zi,q_,da;function an(a,e,n){const d=new Int32Array(n);let m=0,_=e.get();for(let y=0;y<d.length;y++){let b=a[_++],S=127&b;b<128||(b=a[_++],S|=(127&b)<<7,b<128||(b=a[_++],S|=(127&b)<<14,b<128||(b=a[_++],S|=(127&b)<<21,b<128||(b=a[_++],S|=(15&b)<<28)))),d[m++]=S}return e.set(_),d}function wh(a,e,n){const d=new BigInt64Array(n);for(let m=0;m<d.length;m++)d[m]=w1(a,e);return d}function b1(a,e){let n,d;return d=a[e.get()],e.increment(),n=127&d,d<128?n:(d=a[e.get()],e.increment(),n|=(127&d)<<7,d<128?n:(d=a[e.get()],e.increment(),n|=(127&d)<<14,d<128?n:(d=a[e.get()],e.increment(),n|=(127&d)<<21,d<128?n:(d=a[e.get()],n|=(15&d)<<28,(function(m,_,y){let b,S;if(S=_[y.get()],y.increment(),b=(112&S)>>4,S<128||(S=_[y.get()],y.increment(),b|=(127&S)<<3,S<128)||(S=_[y.get()],y.increment(),b|=(127&S)<<10,S<128)||(S=_[y.get()],y.increment(),b|=(127&S)<<17,S<128)||(S=_[y.get()],y.increment(),b|=(127&S)<<24,S<128)||(S=_[y.get()],y.increment(),b|=(1&S)<<31,S<128))return 4294967296*b+(m>>>0);throw new Error("Expected varint not more than 10 bytes")})(n,a,e)))))}function W_(a,e,n,d){throw new Error("FastPFor is not implemented yet.")}function ko(a){return a>>>1^-(1&a)}function Wl(a){return a>>1n^-(1n&a)}function w1(a,e){let n=0n,d=0,m=e.get();for(;m<a.length;){const _=a[m++];if(n|=BigInt(127&_)<<BigInt(d),!(128&_))break;if(d+=7,d>=64)throw new Error("Varint too long")}return e.set(m),n}function H_(a,e,n){const d=new Int32Array(n);let m=0;for(let _=0;_<e;_++){const y=a[_];d.fill(a[_+e],m,m+y),m+=y}return d}function Z_(a,e,n){const d=new BigInt64Array(n);let m=0;for(let _=0;_<e;_++){const y=Number(a[_]);d.fill(a[_+e],m,m+y),m+=y}return d}function K_(a,e,n){const d=new Float64Array(n);let m=0;for(let _=0;_<e;_++){const y=a[_];d.fill(a[_+e],m,m+y),m+=y}return d}function Ip(a){const e=a.length/4*4;let n=1;if(e>=4)for(let d=a[0];n<e-4;n+=4)d=a[n]+=d,d=a[n+1]+=d,d=a[n+2]+=d,d=a[n+3]+=d;for(;n!=a.length;)a[n]+=a[n-1],++n}function Y_(a){a[0]=a[0]>>>1^-(1&a[0]),a[1]=a[1]>>>1^-(1&a[1]);const e=a.length/4*4;let n=2;if(e>=4)for(;n<e-4;n+=4){const d=a[n],m=a[n+1],_=a[n+2],y=a[n+3];a[n]=(d>>>1^-(1&d))+a[n-2],a[n+1]=(m>>>1^-(1&m))+a[n-1],a[n+2]=(_>>>1^-(1&_))+a[n],a[n+3]=(y>>>1^-(1&y))+a[n+1]}for(;n!=a.length;n+=2)a[n]=(a[n]>>>1^-(1&a[n]))+a[n-2],a[n+1]=(a[n+1]>>>1^-(1&a[n+1]))+a[n-1]}(function(a){a.NONE="NONE",a.DELTA="DELTA",a.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",a.RLE="RLE",a.MORTON="MORTON",a.PDE="PDE"})(St||(St={})),(function(a){a.NONE="NONE",a.FAST_PFOR="FAST_PFOR",a.VARINT="VARINT",a.ALP="ALP"})(kr||(kr={})),(function(a){a.PRESENT="PRESENT",a.DATA="DATA",a.OFFSET="OFFSET",a.LENGTH="LENGTH"})(ln||(ln={}));class zp{_dictionaryType;_offsetType;_lengthType;constructor(e,n,d){this._dictionaryType=e,this._offsetType=n,this._lengthType=d}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Cn(a,e){const n=(function(d,m){const _=d[m.get()],y=Object.values(ln)[_>>4];let b=null;switch(y){case ln.DATA:b=new zp(Object.values(Ma)[15&_]);break;case ln.OFFSET:b=new zp(null,Object.values(wo)[15&_]);break;case ln.LENGTH:b=new zp(null,null,Object.values(Yn)[15&_])}m.increment();const S=d[m.get()],P=Object.values(St)[S>>5],D=Object.values(St)[S>>2&7],I=Object.values(kr)[3&S];m.increment();const F=an(d,m,2),j=F[0];return{physicalStreamType:y,logicalStreamType:b,logicalLevelTechnique1:P,logicalLevelTechnique2:D,physicalLevelTechnique:I,numValues:j,byteLength:F[1],decompressedCount:j}})(a,e);return n.logicalLevelTechnique1===St.MORTON?(function(d,m,_){const y=an(m,_,2);return{physicalStreamType:d.physicalStreamType,logicalStreamType:d.logicalStreamType,logicalLevelTechnique1:d.logicalLevelTechnique1,logicalLevelTechnique2:d.logicalLevelTechnique2,physicalLevelTechnique:d.physicalLevelTechnique,numValues:d.numValues,byteLength:d.byteLength,decompressedCount:d.decompressedCount,numBits:y[0],coordinateShift:y[1]}})(n,a,e):St.RLE!==n.logicalLevelTechnique1&&St.RLE!==n.logicalLevelTechnique2||kr.NONE===n.physicalLevelTechnique?n:(function(d,m,_){const y=an(m,_,2);return{physicalStreamType:d.physicalStreamType,logicalStreamType:d.logicalStreamType,logicalLevelTechnique1:d.logicalLevelTechnique1,logicalLevelTechnique2:d.logicalLevelTechnique2,physicalLevelTechnique:d.physicalLevelTechnique,numValues:d.numValues,byteLength:d.byteLength,decompressedCount:y[1],runs:y[0],numRleValues:y[1]}})(n,a,e)}(function(a){a.NONE="NONE",a.SINGLE="SINGLE",a.SHARED="SHARED",a.VERTEX="VERTEX",a.MORTON="MORTON",a.FSST="FSST"})(Ma||(Ma={})),(function(a){a.VERTEX="VERTEX",a.INDEX="INDEX",a.STRING="STRING",a.KEY="KEY"})(wo||(wo={})),(function(a){a.VAR_BINARY="VAR_BINARY",a.GEOMETRIES="GEOMETRIES",a.PARTS="PARTS",a.RINGS="RINGS",a.TRIANGLES="TRIANGLES",a.SYMBOL="SYMBOL",a.DICTIONARY="DICTIONARY"})(Yn||(Yn={})),(function(a){a[a.FLAT=0]="FLAT",a[a.CONST=1]="CONST",a[a.SEQUENCE=2]="SEQUENCE",a[a.DICTIONARY=3]="DICTIONARY",a[a.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Hi||(Hi={}));class Pa{values;_size;constructor(e,n){this.values=e,this._size=n}get(e){const n=Math.floor(e/8);return(this.values[n]>>e%8&1)==1}set(e,n){const d=Math.floor(e/8);this.values[d]=this.values[d]|(n?1:0)<<e%8}getInt(e){const n=Math.floor(e/8);return this.values[n]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}function En(a,e,n,d,m){return(function(_,y,b){switch(y.logicalLevelTechnique1){case St.DELTA:return y.logicalLevelTechnique2===St.RLE?(function(S,P,D){const I=new Int32Array(D);let F=0,j=0;for(let V=0;V<P;V++){const N=S[V],q=ko(S[V+P]);for(let Y=0;Y<N;Y++)j+=q,I[F++]=j}return I})(_,y.runs,y.numRleValues):((function(S){S[0]=S[0]>>>1^-(1&S[0]);const P=S.length/4*4;let D=1;if(P>=4)for(;D<P-4;D+=4){const I=S[D],F=S[D+1],j=S[D+2],V=S[D+3];S[D]=(I>>>1^-(1&I))+S[D-1],S[D+1]=(F>>>1^-(1&F))+S[D],S[D+2]=(j>>>1^-(1&j))+S[D+1],S[D+3]=(V>>>1^-(1&V))+S[D+2]}for(;D!=S.length;++D)S[D]=(S[D]>>>1^-(1&S[D]))+S[D-1]})(_),_);case St.RLE:return(function(S,P,D){return D?(function(I,F,j){const V=new Int32Array(j);let N=0;for(let q=0;q<F;q++){const Y=I[q];let se=I[q+F];se=se>>>1^-(1&se),V.fill(se,N,N+Y),N+=Y}return V})(S,P.runs,P.numRleValues):H_(S,P.runs,P.numRleValues)})(_,y,b);case St.MORTON:return Ip(_),_;case St.COMPONENTWISE_DELTA:return Y_(_),_;case St.NONE:return b&&(function(S){for(let P=0;P<S.length;P++){const D=S[P];S[P]=D>>>1^-(1&D)}})(_),_;default:throw new Error(`The specified Logical level technique is not supported: ${y.logicalLevelTechnique1}`)}})(kh(a,e,n),n,d)}function fs(a,e,n){return(function(d,m){if(m.logicalLevelTechnique1===St.DELTA&&m.logicalLevelTechnique2===St.NONE)return(function(y){const b=new Int32Array(y.length+1);b[0]=0,b[1]=ko(y[0]);let S=b[1],P=2;for(;P!=b.length;++P){const D=y[P-1];S+=D>>>1^-(1&D),b[P]=b[P-1]+S}return b})(d);if(m.logicalLevelTechnique1===St.RLE&&m.logicalLevelTechnique2===St.NONE)return(function(y,b,S){const P=new Int32Array(S+1);P[0]=0;let D=1,I=P[0];for(let F=0;F<b;F++){const j=y[F],V=y[F+b];for(let N=D;N<D+j;N++)P[N]=V+I,I=P[N];D+=j}return P})(d,m.runs,m.numRleValues);if(m.logicalLevelTechnique1===St.NONE&&m.logicalLevelTechnique2===St.NONE){(function(y){let b=0;for(let S=0;S<y.length;S++)y[S]+=b,b=y[S]})(d);const _=new Int32Array(m.numValues+1);return _[0]=0,_.set(d,1),_}if(m.logicalLevelTechnique1===St.DELTA&&m.logicalLevelTechnique2===St.RLE){const _=(function(y,b,S){const P=new Int32Array(S+1);P[0]=0;let D=1,I=P[0];for(let F=0;F<b;F++){const j=y[F];let V=y[F+b];V=V>>>1^-(1&V);for(let N=D;N<D+j;N++)P[N]=V+I,I=P[N];D+=j}return P})(d,m.runs,m.numRleValues);return Ip(_),_}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(kh(a,e,n),n)}function kh(a,e,n){const d=n.physicalLevelTechnique;if(d===kr.FAST_PFOR)return W_();if(d===kr.VARINT)return an(a,e,n.numValues);if(d===kr.NONE){const m=e.get();e.add(n.byteLength);const _=a.subarray(m,e.get());return new Int32Array(_)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Rp(a,e,n,d){const m=kh(a,e,n);if(m.length===1){const _=m[0];return d?ko(_):_}return d?(function(_){return ko(_[1])})(m):(function(_){return _[1]})(m)}function X_(a,e,n){return(function(d){if(d.length==2){const m=ko(d[1]);return[m,m]}return[ko(d[2]),ko(d[3])]})(kh(a,e,n))}function J_(a,e,n){return(function(d){if(d.length==2){const m=Wl(d[1]);return[m,m]}return[Wl(d[2]),Wl(d[3])]})(wh(a,e,n.numValues))}function Q_(a,e,n,d){return(function(m,_,y){switch(_.logicalLevelTechnique1){case St.DELTA:return _.logicalLevelTechnique2===St.RLE?(function(b,S,P){const D=new BigInt64Array(P);let I=0,F=0n;for(let j=0;j<S;j++){const V=Number(b[j]),N=Wl(b[j+S]);for(let q=0;q<V;q++)F+=N,D[I++]=F}return D})(m,_.runs,_.numRleValues):((function(b){b[0]=b[0]>>1n^-(1n&b[0]);const S=b.length/4*4;let P=1;if(S>=4)for(;P<S-4;P+=4){const D=b[P],I=b[P+1],F=b[P+2],j=b[P+3];b[P]=(D>>1n^-(1n&D))+b[P-1],b[P+1]=(I>>1n^-(1n&I))+b[P],b[P+2]=(F>>1n^-(1n&F))+b[P+1],b[P+3]=(j>>1n^-(1n&j))+b[P+2]}for(;P!=b.length;++P)b[P]=(b[P]>>1n^-(1n&b[P]))+b[P-1]})(m),m);case St.RLE:return(function(b,S,P){return P?(function(D,I,F){const j=new BigInt64Array(F);let V=0;for(let N=0;N<I;N++){const q=Number(D[N]);let Y=D[N+I];Y=Y>>1n^-(1n&Y),j.fill(Y,V,V+q),V+=q}return j})(b,S.runs,S.numRleValues):Z_(b,S.runs,S.numRleValues)})(m,_,y);case St.NONE:return y&&(function(b){for(let S=0;S<b.length;S++){const P=b[S];b[S]=P>>1n^-(1n&P)}})(m),m;default:throw new Error(`The specified Logical level technique is not supported: ${_.logicalLevelTechnique1}`)}})(wh(a,e,n.numValues),n,d)}function ey(a,e,n,d){const m=wh(a,e,n.numValues);if(m.length===1){const _=m[0];return d?Wl(_):_}return d?(function(_){return Wl(_[1])})(m):(function(_){return _[1]})(m)}function Fp(a,e,n,d,m){return(function(_,y,b,S){switch(y.logicalLevelTechnique1){case St.DELTA:return y.logicalLevelTechnique2===St.RLE&&(_=H_(_,y.runs,y.numRleValues)),(function(P,D){const I=new Int32Array(P.size());let F=0;P.get(0)?(I[0]=P.get(0)?D[0]>>>1^-(1&D[0]):0,F=1):I[0]=0;let j=1;for(;j!=I.length;++j)I[j]=P.get(j)?I[j-1]+(D[F]>>>1^-(1&D[F++])):I[j-1];return I})(S,_);case St.RLE:return(function(P,D,I,F){const j=D;return I?(function(V,N,q){const Y=new Int32Array(V.size());let se=0;for(let X=0;X<q;X++){const ee=N[X];let le=N[X+q];le=le>>>1^-(1&le);for(let ce=se;ce<se+ee;ce++)V.get(ce)?Y[ce]=le:(Y[ce]=0,se++);se+=ee}return Y})(F,P,j.runs):(function(V,N,q){const Y=new Int32Array(V.size());let se=0;for(let X=0;X<q;X++){const ee=N[X],le=N[X+q];for(let ce=se;ce<se+ee;ce++)V.get(ce)?Y[ce]=le:(Y[ce]=0,se++);se+=ee}return Y})(F,P,j.runs)})(_,y,b,S);case St.MORTON:return Ip(_),_;case St.COMPONENTWISE_DELTA:return Y_(_),_;case St.NONE:return _=b?(function(P,D){const I=new Int32Array(P.size());let F=0,j=0;for(;j!=I.length;++j)if(P.get(j)){const V=D[F++];I[j]=V>>>1^-(1&V)}else I[j]=0;return I})(S,_):(function(P,D){const I=new Int32Array(P.size());let F=0,j=0;for(;j!=I.length;++j)I[j]=P.get(j)?D[F++]:0;return I})(S,_),_;default:throw new Error("The specified Logical level technique is not supported")}})(n.physicalLevelTechnique===kr.FAST_PFOR?W_():an(a,e,n.numValues),n,d,m)}function Sh(a,e,n,d){const m=a.logicalLevelTechnique1;if(m===St.RLE)return a.runs===1?Hi.CONST:Hi.FLAT;const _=e instanceof Pa?e.size():e;if(m===St.DELTA&&a.logicalLevelTechnique2===St.RLE){const y=a.runs,b=2;if(a.numRleValues!==_)return Hi.FLAT;if(y===1)return Hi.SEQUENCE;if(y===2){const S=d.get();let P;if(a.physicalLevelTechnique===kr.VARINT)P=an(n,d,4);else{const D=d.get();P=new Int32Array(n.buffer,n.byteOffset+D,4)}if(d.set(S),P[2]===b&&P[3]===b)return Hi.SEQUENCE}}return a.numValues===1?Hi.CONST:Hi.FLAT}class ty extends bh{getValueFromBuffer(e){return this.dataBuffer[e]}}class iy extends G_{constructor(e,n,d,m){super(e,BigInt64Array.of(n),d,m)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class Hl{_geometryOffsets;_partOffsets;_ringOffsets;constructor(e,n,d){this._geometryOffsets=e,this._partOffsets=n,this._ringOffsets=d}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function jp(a,e,n){return{x:ny(a,e)-n,y:ny(a>>1,e)-n}}function ny(a,e){let n=0;for(let d=0;d<e;d++)n|=(a&1<<2*d)>>d;return n}(function(a){a[a.POINT=0]="POINT",a[a.LINESTRING=1]="LINESTRING",a[a.POLYGON=2]="POLYGON",a[a.MULTIPOINT=3]="MULTIPOINT",a[a.MULTILINESTRING=4]="MULTILINESTRING",a[a.MULTIPOLYGON=5]="MULTIPOLYGON"})(Zi||(Zi={})),(function(a){a[a.POINT=0]="POINT",a[a.LINESTRING=1]="LINESTRING",a[a.POLYGON=2]="POLYGON"})(q_||(q_={})),(function(a){a[a.MORTON=0]="MORTON",a[a.VEC_2=1]="VEC_2",a[a.VEC_3=2]="VEC_3"})(da||(da={}));class k1{createPoint(e){return[[e]]}createMultiPoint(e){return e.map((n=>[n]))}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,n){return[e].concat(n)}createMultiPolygon(e){return e.flat()}}function ay(a){const e=new Array(a.numGeometries);let n=1,d=1,m=1,_=0;const y=new k1;let b=0,S=0;const P=a.mortonSettings,D=a.topologyVector,I=D.geometryOffsets,F=D.partOffsets,j=D.ringOffsets,V=a.vertexOffsets,N=a.containsPolygonGeometry(),q=a.vertexBuffer;for(let Y=0;Y<a.numGeometries;Y++){const se=a.geometryType(Y);if(se===Zi.POINT){if(V&&V.length!==0)if(a.vertexBufferType===da.VEC_2){const X=2*V[S++],ee=new w(q[X],q[X+1]);e[_++]=y.createPoint(ee)}else{const X=jp(q[V[S++]],P.numBits,P.coordinateShift),ee=new w(X.x,X.y);e[_++]=y.createPoint(ee)}else{const X=new w(q[b++],q[b++]);e[_++]=y.createPoint(X)}I&&m++,F&&n++,j&&d++}else if(se===Zi.MULTIPOINT){const X=I[m]-I[m-1];m++;const ee=new Array(X);if(V&&V.length!==0){for(let le=0;le<X;le++){const ce=2*V[S++];ee[le]=new w(q[ce],q[ce+1])}e[_++]=y.createMultiPoint(ee)}else{for(let le=0;le<X;le++){const ce=q[b++],ke=q[b++];ee[le]=new w(ce,ke)}e[_++]=y.createMultiPoint(ee)}}else if(se===Zi.LINESTRING){let X,ee=0;N?(ee=j[d]-j[d-1],d++):ee=F[n]-F[n-1],n++,V&&V.length!==0?(X=a.vertexBufferType===da.VEC_2?$p(q,V,S,ee,!1):Bp(q,V,S,ee,!1,P),S+=ee):(X=Op(q,b,ee,!1),b+=2*ee),e[_++]=y.createLineString(X),I&&m++}else if(se===Zi.POLYGON){const X=F[n]-F[n-1];n++;const ee=new Array(X-1);let le=j[d]-j[d-1];if(d++,V&&V.length!==0){const ce=a.vertexBufferType===da.VEC_2?Mh(q,V,S,le):Ph(q,V,S,le,0,P);S+=le;for(let ke=0;ke<ee.length;ke++)le=j[d]-j[d-1],d++,ee[ke]=a.vertexBufferType===da.VEC_2?Mh(q,V,S,le):Ph(q,V,S,le,0,P),S+=le;e[_++]=y.createPolygon(ce,ee)}else{const ce=Th(q,b,le);b+=2*le;for(let ke=0;ke<ee.length;ke++)le=j[d]-j[d-1],d++,ee[ke]=Th(q,b,le),b+=2*le;e[_++]=y.createPolygon(ce,ee)}I&&m++}else if(se===Zi.MULTILINESTRING){const X=I[m]-I[m-1];m++;const ee=new Array(X);if(V&&V.length!==0){for(let le=0;le<X;le++){let ce=0;N?(ce=j[d]-j[d-1],d++):ce=F[n]-F[n-1],n++;const ke=a.vertexBufferType===da.VEC_2?$p(q,V,S,ce,!1):Bp(q,V,S,ce,!1,P);ee[le]=ke,S+=ce}e[_++]=y.createMultiLineString(ee)}else{for(let le=0;le<X;le++){let ce=0;N?(ce=j[d]-j[d-1],d++):ce=F[n]-F[n-1],n++,ee[le]=Op(q,b,ce,!1),b+=2*ce}e[_++]=y.createMultiLineString(ee)}}else{if(se!==Zi.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const X=I[m]-I[m-1];m++;const ee=new Array(X);let le=0;if(V&&V.length!==0){for(let ce=0;ce<X;ce++){const ke=F[n]-F[n-1];n++;const Fe=new Array(ke-1);le=j[d]-j[d-1],d++;const Ie=a.vertexBufferType===da.VEC_2?Mh(q,V,S,le):Ph(q,V,S,le,0,P);S+=le;for(let Oe=0;Oe<Fe.length;Oe++)le=j[d]-j[d-1],d++,Fe[Oe]=a.vertexBufferType===da.VEC_2?Mh(q,V,S,le):Ph(q,V,S,le,0,P),S+=le;ee[ce]=y.createPolygon(Ie,Fe)}e[_++]=y.createMultiPolygon(ee)}else{for(let ce=0;ce<X;ce++){const ke=F[n]-F[n-1];n++;const Fe=new Array(ke-1);le=j[d]-j[d-1],d++;const Ie=Th(q,b,le);b+=2*le;for(let Oe=0;Oe<Fe.length;Oe++){const Ze=j[d]-j[d-1];d++,Fe[Oe]=Th(q,b,Ze),b+=2*Ze}ee[ce]=y.createPolygon(Ie,Fe)}e[_++]=y.createMultiPolygon(ee)}}}}return e}function Th(a,e,n){return Op(a,e,n,!0)}function Mh(a,e,n,d){return $p(a,e,n,d,!0)}function Ph(a,e,n,d,m,_){return Bp(a,e,n,d,!0,_)}function Op(a,e,n,d){const m=new Array(d?n+1:n);for(let _=0;_<2*n;_+=2)m[_/2]=new w(a[e+_],a[e+_+1]);return d&&(m[m.length-1]=m[0]),m}function $p(a,e,n,d,m){const _=new Array(m?d+1:d);for(let y=0;y<2*d;y+=2){const b=2*e[n+y/2];_[y/2]=new w(a[b],a[b+1])}return m&&(_[_.length-1]=_[0]),_}function Bp(a,e,n,d,m,_){const y=new Array(m?d+1:d);for(let b=0;b<d;b++){const S=jp(a[e[n+b]],_.numBits,_.coordinateShift);y[b]=new w(S.x,S.y)}return m&&(y[y.length-1]=y[0]),y}class ry{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(e,n,d,m,_){this._vertexBufferType=e,this._topologyVector=n,this._vertexOffsets=d,this._vertexBuffer=m,this._mortonSettings=_}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const e=ay(this);let n=0;for(;n<this.numGeometries;)yield{coordinates:e[n],type:this.geometryType(n)},n++}getSimpleEncodedVertex(e){const n=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[n],this.vertexBuffer[n+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){const d=jp(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[d.x,d.y]}const n=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[n],this.vertexBuffer[n+1]]}getGeometries(){return ay(this)}get mortonSettings(){return this._mortonSettings}}class sy extends ry{_numGeometries;_geometryType;constructor(e,n,d,m,_,y,b){super(d,m,_,y,b),this._numGeometries=e,this._geometryType=n}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Zi.POLYGON||this._geometryType===Zi.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class oy extends ry{_geometryTypes;constructor(e,n,d,m,_,y){super(e,d,m,_,y),this._geometryTypes=n}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let e=0;e<this.numGeometries;e++)if(this.geometryType(e)===Zi.POLYGON||this.geometryType(e)===Zi.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class ly{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(e,n,d,m){this._triangleOffsets=e,this._indexBuffer=n,this._vertexBuffer=d,this._topologyVector=m}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const e=new Array(this.numGeometries),n=this._topologyVector,d=n.partOffsets,m=n.ringOffsets,_=n.geometryOffsets;let y=0,b=1,S=1,P=1;for(let D=0;D<this.numGeometries;D++)switch(this.geometryType(D)){case Zi.POLYGON:{const I=d[b]-d[b-1];b++;const F=[];for(let j=0;j<I;j++){const V=m[S]-m[S-1];S++;const N=[];for(let q=0;q<V;q++){const Y=this._vertexBuffer[y++],se=this._vertexBuffer[y++];N.push(new w(Y,se))}N.length>0&&N.push(N[0]),F.push(N)}e[D]=F,_&&P++}break;case Zi.MULTIPOLYGON:{const I=_[P]-_[P-1];P++;const F=[];for(let j=0;j<I;j++){const V=d[b]-d[b-1];b++;for(let N=0;N<V;N++){const q=m[S]-m[S-1];S++;const Y=[];for(let se=0;se<q;se++){const X=this._vertexBuffer[y++],ee=this._vertexBuffer[y++];Y.push(new w(X,ee))}Y.length>0&&Y.push(Y[0]),F.push(Y)}}e[D]=F}}return e}[Symbol.iterator](){return null}}function uy(a,e,n,d,m,_){return new S1(a,e,n,d,m,_)}class S1 extends ly{_numGeometries;_geometryType;constructor(e,n,d,m,_,y){super(d,m,_,y),this._numGeometries=e,this._geometryType=n}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function dy(a,e,n,d,m){return new T1(a,e,n,d,m)}class T1 extends ly{_geometryTypes;constructor(e,n,d,m,_){super(n,d,m,_),this._geometryTypes=e}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function M1(a,e,n,d,m){const _=Cn(a,n);let y=null,b=null,S=null,P=null,D=null,I=null,F=null,j=null;if(Sh(_,d,a,n)===Hi.CONST){const N=Rp(a,n,_,!1);for(let q=0;q<e-1;q++){const Y=Cn(a,n);switch(Y.physicalStreamType){case ln.LENGTH:switch(Y.logicalStreamType.lengthType){case Yn.GEOMETRIES:y=fs(a,n,Y);break;case Yn.PARTS:b=fs(a,n,Y);break;case Yn.RINGS:S=fs(a,n,Y);break;case Yn.TRIANGLES:F=fs(a,n,Y)}break;case ln.OFFSET:switch(Y.logicalStreamType.offsetType){case wo.VERTEX:P=En(a,n,Y,!1);break;case wo.INDEX:j=En(a,n,Y,!1)}break;case ln.DATA:Ma.VERTEX===Y.logicalStreamType.dictionaryType?D=En(a,n,Y,!0):(I={numBits:Y.numBits,coordinateShift:Y.coordinateShift},D=En(a,n,Y,!1))}}return j!==null?y!=null||b!=null?uy(d,N,F,j,D,new Hl(y,b,S)):uy(d,N,F,j,D):I===null?(function(q,Y,se,X,ee){return new sy(q,Y,da.VEC_2,se,X,ee)})(d,N,new Hl(y,b,S),P,D):(function(q,Y,se,X,ee,le){return new sy(q,Y,da.MORTON,se,X,ee,le)})(d,N,new Hl(y,b,S),P,D,I)}const V=En(a,n,_,!1);for(let N=0;N<e-1;N++){const q=Cn(a,n);switch(q.physicalStreamType){case ln.LENGTH:switch(q.logicalStreamType.lengthType){case Yn.GEOMETRIES:y=En(a,n,q,!1);break;case Yn.PARTS:b=En(a,n,q,!1);break;case Yn.RINGS:S=En(a,n,q,!1);break;case Yn.TRIANGLES:F=fs(a,n,q)}break;case ln.OFFSET:switch(q.logicalStreamType.offsetType){case wo.VERTEX:P=En(a,n,q,!1);break;case wo.INDEX:j=En(a,n,q,!1)}break;case ln.DATA:Ma.VERTEX===q.logicalStreamType.dictionaryType?D=En(a,n,q,!0):(I={numBits:q.numBits,coordinateShift:q.coordinateShift},D=En(a,n,q,!1))}}return j!==null&&b===null?dy(V,F,j,D):(y!==null?(y=Vp(V,y,2),b!==null&&S!==null?(b=cy(V,y,b,!1),S=(function(N,q,Y,se){const X=new Int32Array(Y[Y.length-1]+1);let ee=0;X[0]=ee;let le=1,ce=1,ke=0;for(let Fe=0;Fe<N.length;Fe++){const Ie=N[Fe],Oe=q[Fe+1]-q[Fe];if(Ie!==0&&Ie!==3)for(let Ze=0;Ze<Oe;Ze++){const Be=Y[le]-Y[le-1];le++;for(let Re=0;Re<Be;Re++)ee=X[ce++]=ee+se[ke++]}else for(let Ze=0;Ze<Oe;Ze++)X[ce++]=++ee,le++}return X})(V,y,b,S)):b!==null&&(b=(function(N,q,Y){const se=new Int32Array(q[q.length-1]+1);let X=0;se[0]=X;let ee=1,le=0;for(let ce=0;ce<N.length;ce++){const ke=N[ce],Fe=q[ce+1]-q[ce];if(ke===4||ke===1)for(let Ie=0;Ie<Fe;Ie++)X=se[ee++]=X+Y[le++];else for(let Ie=0;Ie<Fe;Ie++)se[ee++]=++X}return se})(V,y,b))):b!==null&&S!==null?(b=Vp(V,b,1),S=cy(V,b,S,!0)):b!==null&&(b=Vp(V,b,0)),j!==null?dy(V,F,j,D,new Hl(y,b,S)):I===null?(function(N,q,Y,se){return new oy(da.VEC_2,N,q,Y,se)})(V,new Hl(y,b,S),P,D):(function(N,q,Y,se,X){return new oy(da.MORTON,N,q,Y,se,X)})(V,new Hl(y,b,S),P,D,I))}function Vp(a,e,n){const d=new Int32Array(a.length+1);let m=0;d[0]=m;let _=0;for(let y=0;y<a.length;y++)m=d[y+1]=m+(a[y]>n?e[_++]:1);return d}function cy(a,e,n,d){const m=new Int32Array(e[e.length-1]+1);let _=0;m[0]=_;let y=1,b=0;for(let S=0;S<a.length;S++){const P=a[S],D=e[S+1]-e[S];if(P===5||P===2||d&&(P===4||P===1))for(let I=0;I<D;I++)_=m[y++]=_+n[b++];else for(let I=0;I<D;I++)m[y++]=++_}return m}class P1 extends ql{dataVector;constructor(e,n,d){super(e,n.getBuffer(),d),this.dataVector=n}getValueFromBuffer(e){return this.dataVector.get(e)}}class C1 extends bh{getValueFromBuffer(e){return this.dataBuffer[e]}}class hy extends ql{constructor(e,n,d){super(e,BigInt64Array.of(n),d)}getValueFromBuffer(e){return this.dataBuffer[0]}}function bd(a,e,n){return fy(a,Math.ceil(e/8),n)}function fy(a,e,n){const d=new Uint8Array(e);let m=0;for(;m<e;){const _=a[n.increment()];if(_<=127){const y=_+3,b=a[n.increment()],S=m+y;d.fill(b,m,S),m=S}else{const y=256-_;for(let b=0;b<y;b++)d[m++]=a[n.increment()]}}return d}const E1=new TextDecoder;function Np(a,e,n){return n-e>=12?E1.decode(a.subarray(e,n)):(function(d,m,_){let y="",b=m;for(;b<_;){const S=d[b];let P,D,I,F=null,j=S>239?4:S>223?3:S>191?2:1;if(b+j>_)break;j===1?S<128&&(F=S):j===2?(P=d[b+1],(192&P)==128&&(F=(31&S)<<6|63&P,F<=127&&(F=null))):j===3?(P=d[b+1],D=d[b+2],(192&P)==128&&(192&D)==128&&(F=(15&S)<<12|(63&P)<<6|63&D,(F<=2047||F>=55296&&F<=57343)&&(F=null))):j===4&&(P=d[b+1],D=d[b+2],I=d[b+3],(192&P)==128&&(192&D)==128&&(192&I)==128&&(F=(15&S)<<18|(63&P)<<12|(63&D)<<6|63&I,(F<=65535||F>=1114112)&&(F=null))),F===null?(F=65533,j=1):F>65535&&(F-=65536,y+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),y+=String.fromCharCode(F),b+=j}return y})(a,e,n)}class Up extends ql{offsetBuffer;constructor(e,n,d,m){super(e,d,m),this.offsetBuffer=n}}class py extends Up{textEncoder;constructor(e,n,d,m){super(e,n,d,m??n.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(e){return Np(this.dataBuffer,this.offsetBuffer[e],this.offsetBuffer[e+1])}}class Zl extends Up{indexBuffer;textEncoder;constructor(e,n,d,m,_){super(e,d,m,_??n.length),this.indexBuffer=n,this.indexBuffer=n,this.textEncoder=new TextEncoder}getValueFromBuffer(e){const n=this.indexBuffer[e];return Np(this.dataBuffer,this.offsetBuffer[n],this.offsetBuffer[n+1])}}class my extends Up{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(e,n,d,m,_,y,b){super(e,d,m,b),this.indexBuffer=n,this.symbolOffsetBuffer=_,this.symbolTableBuffer=y,this.textEncoder=new TextEncoder}getValueFromBuffer(e){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(d,m,_){const y=[],b=new Array(m.length).fill(0);for(let S=1;S<m.length;S++)b[S]=b[S-1]+m[S-1];for(let S=0;S<_.length;S++)if(_[S]===255)y.push(_[++S]);else{const P=m[_[S]],D=b[_[S]];for(let I=0;I<P;I++)y.push(d[D+I])}return new Uint8Array(y)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const n=this.indexBuffer[e];return Np(this.decodedDictionary,this.offsetBuffer[n],this.offsetBuffer[n+1])}offsetToLengthBuffer(e){const n=new Uint32Array(e.length-1);let d=e[0];for(let m=1;m<e.length;m++){const _=e[m];n[m-1]=_-d,d=_}return n}}function L1(a,e,n,d,m,_){return n.type==="scalarType"?(function(y,b,S,P,D,I){let F=null,j=0;if(y===0)return null;if(I.nullable){const N=Cn(b,S);j=N.numValues;const q=S.get(),Y=bd(b,j,S);S.set(q+N.byteLength),F=new Pa(Y,N.numValues)}const V=F??P;switch(D.physicalType){case 4:case 3:return(function(N,q,Y,se,X){const ee=Cn(N,q),le=Sh(ee,X,N,q),ce=se.physicalType===3;if(le===Hi.FLAT){const ke=wd(X)?Fp(N,q,ee,ce,X):En(N,q,ee,ce);return new Ep(Y.name,ke,X)}if(le===Hi.SEQUENCE){const ke=X_(N,q,ee);return new Dp(Y.name,ke[0],ke[1],ee.numRleValues)}{const ke=Rp(N,q,ee,ce);return new Ap(Y.name,ke,X)}})(b,S,I,D,V);case 9:return(function(N,q,Y,se,X){let ee=null,le=null,ce=null,ke=null,Fe=null,Ie=null,Oe=null,Ze=null;for(let Be=0;Be<se;Be++){const Re=Cn(q,Y);if(Re.byteLength!==0)switch(Re.physicalStreamType){case ln.PRESENT:{const Ee=bd(q,Re.numValues,Y);Ie=new Pa(Ee,Re.numValues);break}case ln.OFFSET:le=X!=null||Ie!=null?Fp(q,Y,Re,!1,X??Ie):En(q,Y,Re,!1);break;case ln.LENGTH:{const Ee=fs(q,Y,Re);Yn.DICTIONARY===Re.logicalStreamType.lengthType?ee=Ee:Yn.SYMBOL===Re.logicalStreamType.lengthType?ke=Ee:Oe=Ee;break}case ln.DATA:{const Ee=q.subarray(Y.get(),Y.get()+Re.byteLength);Y.add(Re.byteLength);const et=Re.logicalStreamType.dictionaryType;Ma.FSST===et?Fe=Ee:Ma.SINGLE===et||Ma.SHARED===et?ce=Ee:Ma.NONE===et&&(Ze=Ee);break}}}return(function(Be,Re,Ee,et,Je,it,Ye){return Re?new my(Be,Ee,et,Je,it,Re,Ye):null})(N,Fe,le,ee,ce,ke,X??Ie)??(function(Be,Re,Ee,et,Je){return Re?Je?new Zl(Be,Ee,et,Re,Je):new Zl(Be,Ee,et,Re):null})(N,ce,le,ee,X??Ie)??(function(Be,Re,Ee,et,Je){if(!Re||!Ee)return null;if(et)return Je?new Zl(Be,et,Re,Ee,Je):new Zl(Be,et,Re,Ee);if(Je&&Je.size()!==Re.length-1){const it=new Int32Array(Je.size());let Ye=0;for(let st=0;st<Je.size();st++)it[st]=Je.get(st)?Ye++:0;return new Zl(Be,it,Re,Ee,Je)}return Je?new py(Be,Re,Ee,Je):new py(Be,Re,Ee)})(N,Oe,Ze,le,X??Ie)})(I.name,b,S,I.nullable?y-1:y,F);case 0:return(function(N,q,Y,se,X){const ee=Cn(N,q),le=ee.numValues,ce=q.get(),ke=wd(X)?(function(Ie,Oe,Ze,Be){const Re=fy(Ie,Math.ceil(Oe/8),Ze),Ee=new Pa(Re,Oe),et=Be.size(),Je=new Pa(new Uint8Array(et),et);let it=0;for(let Ye=0;Ye<Be.size();Ye++){const st=!!Be.get(Ye)&&Ee.get(it++);Je.set(Ye,st)}return Je.getBuffer()})(N,le,q,X):bd(N,le,q);q.set(ce+ee.byteLength);const Fe=new Pa(ke,le);return new P1(Y.name,Fe,X)})(b,S,I,0,V);case 6:case 5:return(function(N,q,Y,se,X){const ee=Cn(N,q),le=Sh(ee,se,N,q),ce=X.physicalType===5;if(le===Hi.FLAT){const ke=wd(se)?(function(Fe,Ie,Oe,Ze,Be){return(function(Re,Ee,et,Je){switch(Ee.logicalLevelTechnique1){case St.DELTA:return Ee.logicalLevelTechnique2===St.RLE&&(Re=Z_(Re,Ee.runs,Ee.numRleValues)),(function(it,Ye){const st=new BigInt64Array(it.size());let Et=0;it.get(0)?(st[0]=it.get(0)?Ye[0]>>1n^-(1n&Ye[0]):0n,Et=1):st[0]=0n;let kt=1;for(;kt!=st.length;++kt)st[kt]=it.get(kt)?st[kt-1]+(Ye[Et]>>1n^-(1n&Ye[Et++])):st[kt-1];return st})(Je,Re);case St.RLE:return(function(it,Ye,st,Et){const kt=Ye;return st?(function(ri,dn,ji){const si=new BigInt64Array(ri.size());let ti=0;for(let zt=0;zt<ji;zt++){const yi=Number(dn[zt]);let Mi=dn[zt+ji];Mi=Mi>>1n^-(1n&Mi);for(let Xt=ti;Xt<ti+yi;Xt++)ri.get(Xt)?si[Xt]=Mi:(si[Xt]=0n,ti++);ti+=yi}return si})(Et,it,kt.runs):(function(ri,dn,ji){const si=new BigInt64Array(ri.size());let ti=0;for(let zt=0;zt<ji;zt++){const yi=Number(dn[zt]),Mi=dn[zt+ji];for(let Xt=ti;Xt<ti+yi;Xt++)ri.get(Xt)?si[Xt]=Mi:(si[Xt]=0n,ti++);ti+=yi}return si})(Et,it,kt.runs)})(Re,Ee,et,Je);case St.NONE:return Re=et?(function(it,Ye){const st=new BigInt64Array(it.size());let Et=0,kt=0;for(;kt!=st.length;++kt)if(it.get(kt)){const ri=Ye[Et++];st[kt]=ri>>1n^-(1n&ri)}else st[kt]=0n;return st})(Je,Re):(function(it,Ye){const st=new BigInt64Array(it.size());let Et=0,kt=0;for(;kt!=st.length;++kt)st[kt]=it.get(kt)?Ye[Et++]:0n;return st})(Je,Re),Re;default:throw new Error("The specified Logical level technique is not supported")}})(wh(Fe,Ie,Oe.numValues),Oe,Ze,Be)})(N,q,ee,ce,se):Q_(N,q,ee,ce);return new ty(Y.name,ke,se)}if(le===Hi.SEQUENCE){const ke=J_(N,q,ee);return new iy(Y.name,ke[0],ke[1],ee.numRleValues)}{const ke=ey(N,q,ee,ce);return new hy(Y.name,ke,se)}})(b,S,I,V,D);case 7:return(function(N,q,Y,se){const X=Cn(N,q),ee=wd(se)?(function(le,ce,ke,Fe){const Ie=ce.get(),Oe=Ie+Fe*Float32Array.BYTES_PER_ELEMENT,Ze=new Uint8Array(le.subarray(Ie,Oe)).buffer,Be=new Float32Array(Ze);ce.set(Oe);const Re=ke.size(),Ee=new Float32Array(Re);let et=0;for(let Je=0;Je<Re;Je++)Ee[Je]=ke.get(Je)?Be[et++]:0;return Ee})(N,q,se,X.numValues):(function(le,ce,ke){const Fe=ce.get(),Ie=Fe+ke*Float32Array.BYTES_PER_ELEMENT,Oe=new Uint8Array(le.subarray(Fe,Ie)).buffer,Ze=new Float32Array(Oe);return ce.set(Ie),Ze})(N,q,X.numValues);return new C1(Y.name,ee,se)})(b,S,I,V);case 8:return(function(N,q,Y,se){const X=Cn(N,q),ee=wd(se)?(function(le,ce,ke,Fe){const Ie=ce.get(),Oe=Ie+Fe*Float64Array.BYTES_PER_ELEMENT,Ze=new Uint8Array(le.subarray(Ie,Oe)).buffer,Be=new Float64Array(Ze);ce.set(Oe);const Re=ke.size(),Ee=new Float64Array(Re);let et=0;for(let Je=0;Je<Re;Je++)Ee[Je]=ke.get(Je)?Be[et++]:0;return Ee})(N,q,se,X.numValues):(function(le,ce,ke){const Fe=ce.get(),Ie=Fe+ke*Float64Array.BYTES_PER_ELEMENT,Oe=new Uint8Array(le.subarray(Fe,Ie)).buffer,Ze=new Float64Array(Oe);return ce.set(Ie),Ze})(N,q,X.numValues);return new Lp(Y.name,ee,se)})(b,S,I,V);default:throw new Error(`The specified data type for the field is currently not supported: ${D}`)}})(d,a,e,m,n.scalarType,n):d!=1?null:(function(y,b,S,P){let D=null,I=null,F=null,j=null,V=!1;for(;!V;){const se=Cn(y,b);switch(se.physicalStreamType){case ln.LENGTH:Yn.DICTIONARY===se.logicalStreamType.lengthType?D=fs(y,b,se):F=fs(y,b,se);break;case ln.DATA:Ma.SINGLE===se.logicalStreamType.dictionaryType||Ma.SHARED===se.logicalStreamType.dictionaryType?(I=y.subarray(b.get(),b.get()+se.byteLength),V=!0):j=y.subarray(b.get(),b.get()+se.byteLength),b.add(se.byteLength)}}const N=S.complexType.children,q=[];let Y=0;for(const se of N){const X=an(y,b,1)[0];if(X==0)continue;const ee=`${S.name}${se.name==="default"?"":":"+se.name}`;if(X!==2||se.type!=="scalarField"||se.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const le=Cn(y,b),ce=bd(y,le.numValues,b),ke=Cn(y,b),Fe=ke.decompressedCount!==P?Fp(y,b,ke,!1,new Pa(ce,le.numValues)):En(y,b,ke,!1);q[Y++]=j?new my(ee,Fe,D,I,F,j,new Pa(ce,le.numValues)):new Zl(ee,Fe,D,I,new Pa(ce,le.numValues))}return q})(a,e,n,m)}function wd(a){return a instanceof Pa}function D1(a){if(a.name==="id")return!1;if(a.type==="scalarType"){const e=a.scalarType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(e.type==="logicalType")return!1}else if(a.type==="complexType"){const e=a.complexType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",a),!1}const A1=new TextDecoder;function gy(a,e){const n=an(a,e,1)[0];if(n===0)return"";const d=e.get(),m=a.subarray(d,d+n);return e.add(n),A1.decode(m)}function _y(a,e){const n=an(a,e,1)[0]>>>0,d=!!(4&n),m=!!(2&n),_=an(a,e,1)[0]>>>0,y={};if(1&n&&(y.nullable=!0),m){const b={};if(d?(b.type="logicalType",b.logicalType=_):(b.type="physicalType",b.physicalType=_),8&n){const S=an(a,e,1)[0]>>>0;b.children=new Array(S);for(let P=0;P<S;P++)b.children[P]=_y(a,e)}y.type="complexField",y.complexField=b}else{const b={};d?(b.type="logicalType",b.logicalType=_):(b.type="physicalType",b.physicalType=_),y.type="scalarField",y.scalarField=b}return y}function I1(a,e){const n=an(a,e,1)[0]>>>0,d=(function(m){switch(m){case 0:case 1:case 2:case 3:{const _={};_.nullable=!!(1&m),_.columnScope=0;const y={};return y.physicalType=m>1?6:4,y.type="physicalType",_.scalarType=y,_.type="scalarType",_}case 4:{const _={nullable:!1,columnScope:0},y={type:"physicalType",physicalType:0};return _.type="complexType",_.complexType=y,_}case 30:{const _={nullable:!1,columnScope:0},y={type:"physicalType",physicalType:1};return _.type="complexType",_.complexType=y,_}default:return(function(_){let y=null;switch(_){case 10:case 11:y=0;break;case 12:case 13:y=1;break;case 14:case 15:y=2;break;case 16:case 17:y=3;break;case 18:case 19:y=4;break;case 20:case 21:y=5;break;case 22:case 23:y=6;break;case 24:case 25:y=7;break;case 26:case 27:y=8;break;case 28:case 29:y=9;break;default:return null}const b={};b.nullable=!!(1&_),b.columnScope=0;const S={type:"physicalType"};return S.physicalType=y,b.type="scalarType",b.scalarType=S,b})(m)}})(n);if(!d)throw new Error(`Unsupported column type code: ${n}`);if((function(m){return m>=10})(n)?d.name=gy(a,e):n>=0&&n<=3?d.name="id":n===4&&(d.name="geometry"),(function(m){return m===30})(n)){const m=an(a,e,1)[0]>>>0,_=d.complexType;_.children=new Array(m);for(let y=0;y<m;y++)_.children[y]=_y(a,e)}return d}function z1(a,e){const n={featureTables:[]},d={};d.name=gy(a,e);const m=an(a,e,1)[0]>>>0,_=an(a,e,1)[0]>>>0;d.columns=new Array(_);for(let y=0;y<_;y++)d.columns[y]=I1(a,e);return n.featureTables.push(d),[n,m]}function R1(a,e,n,d,m,_,y=!1){const b=e.scalarType.physicalType,S=Sh(m,_,a,n);if(b===4)switch(S){case Hi.FLAT:{const P=En(a,n,m,!1);return new Ep(d,P,_)}case Hi.SEQUENCE:{const P=X_(a,n,m);return new Dp(d,P[0],P[1],m.numRleValues)}case Hi.CONST:{const P=Rp(a,n,m,!1);return new Ap(d,P,_)}}else switch(S){case Hi.FLAT:{if(y){const D=(function(I,F,j,V){const N=(function(q,Y,se){const X=new Float64Array(Y);for(let ee=0;ee<Y;ee++)X[ee]=b1(q,se);return X})(I,j.numValues,F);return(function(q,Y,se){switch(Y.logicalLevelTechnique1){case St.DELTA:return Y.logicalLevelTechnique2===St.RLE&&(q=K_(q,Y.runs,Y.numRleValues)),(function(X){X[0]=X[0]%2==1?(X[0]+1)/-2:X[0]/2;const ee=X.length/4*4;let le=1;if(ee>=4)for(;le<ee-4;le+=4){const ce=X[le],ke=X[le+1],Fe=X[le+2],Ie=X[le+3];X[le]=(ce%2==1?(ce+1)/-2:ce/2)+X[le-1],X[le+1]=(ke%2==1?(ke+1)/-2:ke/2)+X[le],X[le+2]=(Fe%2==1?(Fe+1)/-2:Fe/2)+X[le+1],X[le+3]=(Ie%2==1?(Ie+1)/-2:Ie/2)+X[le+2]}for(;le!=X.length;++le)X[le]=(X[le]%2==1?(X[le]+1)/-2:X[le]/2)+X[le-1]})(q),q;case St.RLE:return(function(X,ee,le){return K_(X,ee.runs,ee.numRleValues)})(q,Y);case St.NONE:return q;default:throw new Error(`The specified Logical level technique is not supported: ${Y.logicalLevelTechnique1}`)}})(N,j)})(a,n,m);return new Lp(d,D,_)}const P=Q_(a,n,m,!1);return new ty(d,P,_)}case Hi.SEQUENCE:{const P=J_(a,n,m);return new iy(d,P[0],P[1],m.numRleValues)}case Hi.CONST:{const P=ey(a,n,m,!1);return new hy(d,P,_)}}throw new Error("Vector type not supported for id column.")}class F1{constructor(e,n){var d;switch(this._featureData=e,this.properties=this._featureData.properties||{},(d=this._featureData.geometry)===null||d===void 0?void 0:d.type){case Zi.POINT:case Zi.MULTIPOINT:this.type=1;break;case Zi.LINESTRING:case Zi.MULTILINESTRING:this.type=2;break;case Zi.POLYGON:case Zi.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=n,this.id=Number(this._featureData.id)}loadGeometry(){const e=[];for(const n of this._featureData.geometry.coordinates){const d=[];for(const m of n)d.push(new w(m.x,m.y));e.push(d)}return e}}class j1{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new F1(this.features[e],this.extent)}}class yy{constructor(e){this.layers={};const n=(function(d,m,_=!0){const y=new x1(0),b=[];for(;y.get()<d.length;){const S=an(d,y,1)[0]>>>0,P=y.get()+S;if(P>d.length)throw new Error(`Block overruns tile: ${P} > ${d.length}`);if(an(d,y,1)[0]>>>0!=1){y.set(P);continue}const D=z1(d,y),I=D[1],F=D[0].featureTables[0];let j=null,V=null;const N=[];let q=0;for(const se of F.columns){const X=se.name;if(X==="id"){let ee=null;if(se.nullable){const ce=Cn(d,y),ke=y.get(),Fe=bd(d,ce.numValues,y);y.set(ke+ce.byteLength),ee=new Pa(Fe,ce.numValues)}const le=Cn(d,y);q=le.decompressedCount,j=R1(d,se,y,X,le,ee??q,_)}else if(X==="geometry"){const ee=an(d,y,1)[0];if(q===0){const le=y.get();q=Cn(d,y).decompressedCount,y.set(le)}V=M1(d,ee,y,q)}else{const ee=D1(se)?an(d,y,1)[0]:1;if(ee===0&&se.type==="scalarType")continue;const le=L1(d,y,se,ee,q);if(le)if(Array.isArray(le))for(const ce of le)N.push(ce);else N.push(le)}}const Y=new v1(F.name,V,j,N,I);b.push(Y),y.set(P)}return b})(new Uint8Array(e));this.layers=n.reduce(((d,m)=>Object.assign(Object.assign({},d),{[m.name]:new j1(m)})),{})}}class O1{constructor(e,n){this.feature=e,this.type=e.type,this.properties=e.tags?e.tags:{},this.extent=n,"id"in e&&(typeof e.id=="string"?this.id=parseInt(e.id,10):typeof e.id!="number"||isNaN(e.id)||(this.id=e.id))}loadGeometry(){const e=[],n=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const d of n){const m=[];for(const _ of d)m.push(new w(_[0],_[1]));e.push(m)}return e}}const kd="_geojsonTileLayer";function $1(a,e){e.writeVarintField(15,a.version||1),e.writeStringField(1,a.name||""),e.writeVarintField(5,a.extent||4096);const n={keys:[],values:[],keycache:{},valuecache:{}};for(let _=0;_<a.length;_++)n.feature=a.feature(_),e.writeMessage(2,B1,n);const d=n.keys;for(const _ of d)e.writeStringField(3,_);const m=n.values;for(const _ of m)e.writeMessage(4,U1,_)}function B1(a,e){if(!a.feature)return;const n=a.feature;n.id!==void 0&&e.writeVarintField(1,n.id),e.writeMessage(2,V1,a),e.writeVarintField(3,n.type),e.writeMessage(4,N1,n)}function V1(a,e){for(const n in a.feature?.properties){let d=a.feature.properties[n],m=a.keycache[n];if(d==null)continue;m===void 0&&(a.keys.push(n),m=a.keys.length-1,a.keycache[n]=m),e.writeVarint(m),typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"&&(d=JSON.stringify(d));const _=typeof d+":"+d;let y=a.valuecache[_];y===void 0&&(a.values.push(d),y=a.values.length-1,a.valuecache[_]=y),e.writeVarint(y)}}function Gp(a,e){return(e<<3)+(7&a)}function vy(a){return a<<1^a>>31}function N1(a,e){const n=a.loadGeometry(),d=a.type;let m=0,_=0;for(const y of n){let b=1;d===1&&(b=y.length),e.writeVarint(Gp(1,b));const S=d===3?y.length-1:y.length;for(let P=0;P<S;P++){P===1&&d!==1&&e.writeVarint(Gp(2,S-1));const D=y[P].x-m,I=y[P].y-_;e.writeVarint(vy(D)),e.writeVarint(vy(I)),m+=D,_+=I}a.type===3&&e.writeVarint(Gp(7,1))}}function U1(a,e){const n=typeof a;n==="string"?e.writeStringField(1,a):n==="boolean"?e.writeBooleanField(7,a):n==="number"&&(a%1!=0?e.writeDoubleField(3,a):a<0?e.writeSVarintField(6,a):e.writeVarintField(5,a))}class xy{constructor(e,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new ss(dt,16,0),this.grid3D=new ss(dt,16,0),this.featureIndexArray=new K,this.promoteId=n}insert(e,n,d,m,_,y){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,_);const S=y?this.grid3D:this.grid;for(let P=0;P<n.length;P++){const D=n[P],I=[1/0,1/0,-1/0,-1/0];for(let F=0;F<D.length;F++){const j=D[F];I[0]=Math.min(I[0],j.x),I[1]=Math.min(I[1],j.y),I[2]=Math.max(I[2],j.x),I[3]=Math.max(I[3],j.y)}I[0]<dt&&I[1]<dt&&I[2]>=0&&I[3]>=0&&S.insert(b,I[0],I[1],I[2],I[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new r_(new gh(this.rawTileData)).layers:new yy(this.rawTileData).layers,this.sourceLayerCoder=new N_(this.vtLayers?Object.keys(this.vtLayers).sort():[kd])),this.vtLayers}query(e,n,d,m){this.loadVTLayers();const _=e.params,y=dt/e.tileSize/e.scale,b=Ys(_.filter,_.globalState),S=e.queryGeometry,P=e.queryPadding*y,D=bo.fromPoints(S),I=this.grid.query(D.minX-P,D.minY-P,D.maxX+P,D.maxY+P),F=bo.fromPoints(e.cameraQueryGeometry).expandBy(P),j=this.grid3D.query(F.minX,F.minY,F.maxX,F.maxY,((q,Y,se,X)=>(function(ee,le,ce,ke,Fe){for(const Oe of ee)if(le<=Oe.x&&ce<=Oe.y&&ke>=Oe.x&&Fe>=Oe.y)return!0;const Ie=[new w(le,ce),new w(le,Fe),new w(ke,Fe),new w(ke,ce)];if(ee.length>2){for(const Oe of Ie)if(Fl(ee,Oe))return!0}for(let Oe=0;Oe<ee.length-1;Oe++)if(qw(ee[Oe],ee[Oe+1],Ie))return!0;return!1})(e.cameraQueryGeometry,q-P,Y-P,se+P,X+P)));for(const q of j)I.push(q);I.sort(G1);const V={};let N;for(let q=0;q<I.length;q++){const Y=I[q];if(Y===N)continue;N=Y;const se=this.featureIndexArray.get(Y);let X=null;this.loadMatchingFeature(V,se.bucketIndex,se.sourceLayerIndex,se.featureIndex,b,_.layers,_.availableImages,n,d,m,((ee,le,ce)=>(X||(X=Ha(ee)),le.queryIntersectsFeature({queryGeometry:S,feature:ee,featureState:ce,geometry:X,zoom:this.z,transform:e.transform,pixelsToTileUnits:y,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation}))))}return V}loadMatchingFeature(e,n,d,m,_,y,b,S,P,D,I){const F=this.bucketLayerIDs[n];if(y&&!F.some((q=>y.has(q))))return;const j=this.sourceLayerCoder.decode(d),V=this.vtLayers[j].feature(m);if(_.needGeometry){const q=Za(V,!0);if(!_.filter(new Nt(this.tileID.overscaledZ),q,this.tileID.canonical))return}else if(!_.filter(new Nt(this.tileID.overscaledZ),V))return;const N=this.getId(V,j);for(let q=0;q<F.length;q++){const Y=F[q];if(y&&!y.has(Y))continue;const se=S[Y];if(!se)continue;let X={};N&&D&&(X=D.getState(se.sourceLayer||kd,N));const ee=Qi({},P[Y]);ee.paint=by(ee.paint,se.paint,V,X,b),ee.layout=by(ee.layout,se.layout,V,X,b);const le=!I||I(V,se,X);if(!le)continue;const ce=new U_(V,this.z,this.x,this.y,N);ce.layer=ee;let ke=e[Y];ke===void 0&&(ke=e[Y]=[]),ke.push({featureIndex:m,feature:ce,intersectionZ:le})}}lookupSymbolFeatures(e,n,d,m,_,y,b,S){const P={};this.loadVTLayers();const D=Ys(_.filterSpec,_.globalState);for(const I of e)this.loadMatchingFeature(P,d,m,I,D,y,b,S,n);return P}hasLayer(e){for(const n of this.bucketLayerIDs)for(const d of n)if(e===d)return!0;return!1}getId(e,n){var d;let m=e.id;return this.promoteId&&(m=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((d=e.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(m=Number(e.properties.cluster_id))),m}}function by(a,e,n,d,m){return kn(a,((_,y)=>{const b=e instanceof uo?e.get(y):null;return b&&b.evaluate?b.evaluate(n,d,m):b}))}function G1(a,e){return e-a}function wy(a,e,n,d,m){const _=[];for(let y=0;y<a.length;y++){const b=a[y];let S;for(let P=0;P<b.length-1;P++){let D=b[P],I=b[P+1];D.x<e&&I.x<e||(D.x<e?D=new w(e,D.y+(e-D.x)/(I.x-D.x)*(I.y-D.y))._round():I.x<e&&(I=new w(e,D.y+(e-D.x)/(I.x-D.x)*(I.y-D.y))._round()),D.y<n&&I.y<n||(D.y<n?D=new w(D.x+(n-D.y)/(I.y-D.y)*(I.x-D.x),n)._round():I.y<n&&(I=new w(D.x+(n-D.y)/(I.y-D.y)*(I.x-D.x),n)._round()),D.x>=d&&I.x>=d||(D.x>=d?D=new w(d,D.y+(d-D.x)/(I.x-D.x)*(I.y-D.y))._round():I.x>=d&&(I=new w(d,D.y+(d-D.x)/(I.x-D.x)*(I.y-D.y))._round()),D.y>=m&&I.y>=m||(D.y>=m?D=new w(D.x+(m-D.y)/(I.y-D.y)*(I.x-D.x),m)._round():I.y>=m&&(I=new w(D.x+(m-D.y)/(I.y-D.y)*(I.x-D.x),m)._round()),S&&D.equals(S[S.length-1])||(S=[D],_.push(S)),S.push(I)))))}}return _}function ky(a,e,n,d,m){switch(e){case 1:return(function(_,y,b,S){const P=[];for(const D of _)for(const I of D){const F=S===0?I.x:I.y;F>=y&&F<=b&&P.push([I])}return P})(a,n,d,m);case 2:return Sy(a,n,d,m,!1);case 3:return Sy(a,n,d,m,!0)}return[]}function q1(a,e,n,d,m){const _=d===0?W1:H1;let y=[];const b=[];for(let D=0;D<a.length-1;D++){const I=a[D],F=a[D+1],j=d===0?I.x:I.y,V=d===0?F.x:F.y;let N=!1;j<e?V>e&&y.push(_(I,F,e)):j>n?V<n&&y.push(_(I,F,n)):y.push(I),V<e&&j>=e&&(y.push(_(I,F,e)),N=!0),V>n&&j<=n&&(y.push(_(I,F,n)),N=!0),!m&&N&&(b.push(y),y=[])}const S=a.length-1,P=d===0?a[S].x:a[S].y;return P>=e&&P<=n&&y.push(a[S]),m&&y.length>0&&!y[0].equals(y[y.length-1])&&y.push(new w(y[0].x,y[0].y)),y.length>0&&b.push(y),b}function Sy(a,e,n,d,m){const _=[];for(const y of a){const b=q1(y,e,n,d,m);b.length>0&&_.push(...b)}return _}function W1(a,e,n){return new w(n,a.y+(n-a.x)/(e.x-a.x)*(e.y-a.y))}function H1(a,e,n){return new w(a.x+(n-a.y)/(e.y-a.y)*(e.x-a.x),n)}tt("FeatureIndex",xy,{omit:["rawTileData","sourceLayerCoder"]});class ps extends w{constructor(e,n,d,m){super(e,n),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new ps(this.x,this.y,this.angle,this.segment)}}function Ty(a,e,n,d,m){if(e.segment===void 0||n===0)return!0;let _=e,y=e.segment+1,b=0;for(;b>-n/2;){if(y--,y<0)return!1;b-=a[y].dist(_),_=a[y]}b+=a[y].dist(a[y+1]),y++;const S=[];let P=0;for(;b<n/2;){const D=a[y],I=a[y+1];if(!I)return!1;let F=a[y-1].angleTo(D)-D.angleTo(I);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:b,angleDelta:F}),P+=F;b-S[0].distance>d;)P-=S.shift().angleDelta;if(P>m)return!1;y++,b+=D.dist(I)}return!0}function My(a){let e=0;for(let n=0;n<a.length-1;n++)e+=a[n].dist(a[n+1]);return e}function Py(a,e,n){return a?.6*e*n:0}function Cy(a,e){return Math.max(a?a.right-a.left:0,e?e.right-e.left:0)}function Z1(a,e,n,d,m,_){const y=Py(n,m,_),b=Cy(n,d)*_;let S=0;const P=My(a)/2;for(let D=0;D<a.length-1;D++){const I=a[D],F=a[D+1],j=I.dist(F);if(S+j>P){const V=(P-S)/j,N=ii.number(I.x,F.x,V),q=ii.number(I.y,F.y,V),Y=new ps(N,q,F.angleTo(I),D);return Y._round(),!y||Ty(a,Y,b,y,e)?Y:void 0}S+=j}}function K1(a,e,n,d,m,_,y,b,S){const P=Py(d,_,y),D=Cy(d,m),I=D*y,F=a[0].x===0||a[0].x===S||a[0].y===0||a[0].y===S;return e-I<e/4&&(e=I+e/4),Ey(a,F?e/2*b%e:(D/2+2*_)*y*b%e,e,P,n,I,F,!1,S)}function Ey(a,e,n,d,m,_,y,b,S){const P=_/2,D=My(a);let I=0,F=e-n,j=[];for(let V=0;V<a.length-1;V++){const N=a[V],q=a[V+1],Y=N.dist(q),se=q.angleTo(N);for(;F+n<I+Y;){F+=n;const X=(F-I)/Y,ee=ii.number(N.x,q.x,X),le=ii.number(N.y,q.y,X);if(ee>=0&&ee<S&&le>=0&&le<S&&F-P>=0&&F+P<=D){const ce=new ps(ee,le,se,V);ce._round(),d&&!Ty(a,ce,_,d,m)||j.push(ce)}}I+=Y}return b||j.length||y||(j=Ey(a,I/2,n,d,m,_,y,!0,S)),j}function Ly(a,e,n,d){const m=[],_=a.image,y=_.pixelRatio,b=_.paddedRect.w-2,S=_.paddedRect.h-2;let P={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const D=_.stretchX||[[0,b]],I=_.stretchY||[[0,S]],F=(Ee,et)=>Ee+et[1]-et[0],j=D.reduce(F,0),V=I.reduce(F,0),N=b-j,q=S-V;let Y=0,se=j,X=0,ee=V,le=0,ce=N,ke=0,Fe=q;if(_.content&&d){const Ee=_.content,et=Ee[2]-Ee[0],Je=Ee[3]-Ee[1];(_.textFitWidth||_.textFitHeight)&&(P=T_(a)),Y=Ch(D,0,Ee[0]),X=Ch(I,0,Ee[1]),se=Ch(D,Ee[0],Ee[2]),ee=Ch(I,Ee[1],Ee[3]),le=Ee[0]-Y,ke=Ee[1]-X,ce=et-se,Fe=Je-ee}const Ie=P.x1,Oe=P.y1,Ze=P.x2-Ie,Be=P.y2-Oe,Re=(Ee,et,Je,it)=>{const Ye=Eh(Ee.stretch-Y,se,Ze,Ie),st=Lh(Ee.fixed-le,ce,Ee.stretch,j),Et=Eh(et.stretch-X,ee,Be,Oe),kt=Lh(et.fixed-ke,Fe,et.stretch,V),ri=Eh(Je.stretch-Y,se,Ze,Ie),dn=Lh(Je.fixed-le,ce,Je.stretch,j),ji=Eh(it.stretch-X,ee,Be,Oe),si=Lh(it.fixed-ke,Fe,it.stretch,V),ti=new w(Ye,Et),zt=new w(ri,Et),yi=new w(ri,ji),Mi=new w(Ye,ji),Xt=new w(st/y,kt/y),Bn=new w(dn/y,si/y),cn=e*Math.PI/180;if(cn){const Ki=Math.sin(cn),di=Math.cos(cn),Oi=[di,-Ki,Ki,di];ti._matMult(Oi),zt._matMult(Oi),Mi._matMult(Oi),yi._matMult(Oi)}const Vn=Ee.stretch+Ee.fixed,ya=et.stretch+et.fixed;return{tl:ti,tr:zt,bl:Mi,br:yi,tex:{x:_.paddedRect.x+1+Vn,y:_.paddedRect.y+1+ya,w:Je.stretch+Je.fixed-Vn,h:it.stretch+it.fixed-ya},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xt,pixelOffsetBR:Bn,minFontScaleX:ce/y/Ze,minFontScaleY:Fe/y/Be,isSDF:n}};if(d&&(_.stretchX||_.stretchY)){const Ee=Dy(D,N,j),et=Dy(I,q,V);for(let Je=0;Je<Ee.length-1;Je++){const it=Ee[Je],Ye=Ee[Je+1];for(let st=0;st<et.length-1;st++)m.push(Re(it,et[st],Ye,et[st+1]))}}else m.push(Re({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:S+1}));return m}function Ch(a,e,n){let d=0;for(const m of a)d+=Math.max(e,Math.min(n,m[1]))-Math.max(e,Math.min(n,m[0]));return d}function Dy(a,e,n){const d=[{fixed:-1,stretch:0}];for(const[m,_]of a){const y=d[d.length-1];d.push({fixed:m-y.stretch,stretch:y.stretch}),d.push({fixed:m-y.stretch,stretch:y.stretch+(_-m)})}return d.push({fixed:e+1,stretch:n}),d}function Eh(a,e,n,d){return a/e*n+d}function Lh(a,e,n,d){return a-e*n/d}tt("Anchor",ps);class Dh{constructor(e,n,d,m,_,y,b,S,P,D){var I;if(this.boxStartIndex=e.length,P){let F=y.top,j=y.bottom;const V=y.collisionPadding;V&&(F-=V[1],j+=V[3]);let N=j-F;N>0&&(N=Math.max(10,N),this.circleDiameter=N)}else{const F=!((I=y.image)===null||I===void 0)&&I.content&&(y.image.textFitWidth||y.image.textFitHeight)?T_(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};F.y1=F.y1*b-S[0],F.y2=F.y2*b+S[2],F.x1=F.x1*b-S[3],F.x2=F.x2*b+S[1];const j=y.collisionPadding;if(j&&(F.x1-=j[0]*b,F.y1-=j[1]*b,F.x2+=j[2]*b,F.y2+=j[3]*b),D){const V=new w(F.x1,F.y1),N=new w(F.x2,F.y1),q=new w(F.x1,F.y2),Y=new w(F.x2,F.y2),se=D*Math.PI/180;V._rotate(se),N._rotate(se),q._rotate(se),Y._rotate(se),F.x1=Math.min(V.x,N.x,q.x,Y.x),F.x2=Math.max(V.x,N.x,q.x,Y.x),F.y1=Math.min(V.y,N.y,q.y,Y.y),F.y2=Math.max(V.y,N.y,q.y,Y.y)}e.emplaceBack(n.x,n.y,F.x1,F.y1,F.x2,F.y2,d,m,_)}this.boxEndIndex=e.length}}class Y1{constructor(e=[],n=(d,m)=>d<m?-1:d>m?1:0){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:d}=this,m=n[e];for(;e>0;){const _=e-1>>1,y=n[_];if(d(m,y)>=0)break;n[e]=y,e=_}n[e]=m}_down(e){const{data:n,compare:d}=this,m=this.length>>1,_=n[e];for(;e<m;){let y=1+(e<<1);const b=y+1;if(b<this.length&&d(n[b],n[y])<0&&(y=b),d(n[y],_)>=0)break;n[e]=n[y],e=y}n[e]=_}}function X1(a,e=1,n=!1){const d=bo.fromPoints(a[0]),m=Math.min(d.width(),d.height());let _=m/2;const y=new Y1([],J1),{minX:b,minY:S,maxX:P,maxY:D}=d;if(m===0)return new w(b,S);for(let j=b;j<P;j+=m)for(let V=S;V<D;V+=m)y.push(new Kl(j+_,V+_,_,a));let I=(function(j){let V=0,N=0,q=0;const Y=j[0];for(let se=0,X=Y.length,ee=X-1;se<X;ee=se++){const le=Y[se],ce=Y[ee],ke=le.x*ce.y-ce.x*le.y;N+=(le.x+ce.x)*ke,q+=(le.y+ce.y)*ke,V+=3*ke}return new Kl(N/V,q/V,0,j)})(a),F=y.length;for(;y.length;){const j=y.pop();(j.d>I.d||!I.d)&&(I=j,n&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,F)),j.max-I.d<=e||(_=j.h/2,y.push(new Kl(j.p.x-_,j.p.y-_,_,a)),y.push(new Kl(j.p.x+_,j.p.y-_,_,a)),y.push(new Kl(j.p.x-_,j.p.y+_,_,a)),y.push(new Kl(j.p.x+_,j.p.y+_,_,a)),F+=4)}return n&&(console.log(`num probes: ${F}`),console.log(`best distance: ${I.d}`)),I.p}function J1(a,e){return e.max-a.max}function Kl(a,e,n,d){this.p=new w(a,e),this.h=n,this.d=(function(m,_){let y=!1,b=1/0;for(let S=0;S<_.length;S++){const P=_[S];for(let D=0,I=P.length,F=I-1;D<I;F=D++){const j=P[D],V=P[F];j.y>m.y!=V.y>m.y&&m.x<(V.x-j.x)*(m.y-j.y)/(V.y-j.y)+j.x&&(y=!y),b=Math.min(b,Fg(m,j,V))}}return(y?1:-1)*Math.sqrt(b)})(this.p,d),this.max=this.d+this.h*Math.SQRT2}var un;h.aP=void 0,(un=h.aP||(h.aP={}))[un.center=1]="center",un[un.left=2]="left",un[un.right=3]="right",un[un.top=4]="top",un[un.bottom=5]="bottom",un[un["top-left"]=6]="top-left",un[un["top-right"]=7]="top-right",un[un["bottom-left"]=8]="bottom-left",un[un["bottom-right"]=9]="bottom-right";const qp=Number.POSITIVE_INFINITY;function Ay(a,e){return e[1]!==qp?(function(n,d,m){let _=0,y=0;switch(d=Math.abs(d),m=Math.abs(m),n){case"top-right":case"top-left":case"top":y=m-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-m}switch(n){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,y]})(a,e[0],e[1]):(function(n,d){let m=0,_=0;d<0&&(d=0);const y=d/Math.SQRT2;switch(n){case"top-right":case"top-left":_=y-7;break;case"bottom-right":case"bottom-left":_=7-y;break;case"bottom":_=7-d;break;case"top":_=d-7}switch(n){case"top-right":case"bottom-right":m=-y;break;case"top-left":case"bottom-left":m=y;break;case"left":m=d;break;case"right":m=-d}return[m,_]})(a,e[0])}function Iy(a,e,n){var d;const m=a.layout,_=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(e,{},n);if(_){const b=_.values,S=[];for(let P=0;P<b.length;P+=2){const D=S[P]=b[P],I=b[P+1].map((F=>F*Wi));D.startsWith("top")?I[1]-=7:D.startsWith("bottom")&&(I[1]+=7),S[P+1]=I}return new yn(S)}const y=m.get("text-variable-anchor");if(y){let b;b=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(e,{},n)*Wi,qp]:m.get("text-offset").evaluate(e,{},n).map((P=>P*Wi));const S=[];for(const P of y)S.push(P,Ay(P,b));return new yn(S)}return null}function Wp(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Q1(a,e,n,d,m,_,y,b,S,P,D,I){let F=_.textMaxSize.evaluate(e,{});F===void 0&&(F=y);const j=a.layers[0].layout,V=j.get("icon-offset").evaluate(e,{},D),N=Ry(n.horizontal),q=y/24,Y=a.tilePixelRatio*q,se=a.tilePixelRatio*F/24,X=a.tilePixelRatio*b,ee=a.tilePixelRatio*j.get("symbol-spacing"),le=j.get("text-padding")*a.tilePixelRatio,ce=(function(Je,it,Ye,st=1){const Et=Je.get("icon-padding").evaluate(it,{},Ye),kt=Et&&Et.values;return[kt[0]*st,kt[1]*st,kt[2]*st,kt[3]*st]})(j,e,D,a.tilePixelRatio),ke=j.get("text-max-angle")/180*Math.PI,Fe=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",Ie=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",Oe=j.get("symbol-placement"),Ze=ee/2,Be=j.get("icon-text-fit");let Re;d&&Be!=="none"&&(a.allowVerticalPlacement&&n.vertical&&(Re=M_(d,n.vertical,Be,j.get("icon-text-fit-padding"),V,q)),N&&(d=M_(d,N,Be,j.get("icon-text-fit-padding"),V,q)));const Ee=D?I.line.getGranularityForZoomLevel(D.z):1,et=(Je,it)=>{it.x<0||it.x>=dt||it.y<0||it.y>=dt||(function(Ye,st,Et,kt,ri,dn,ji,si,ti,zt,yi,Mi,Xt,Bn,cn,Vn,ya,Ki,di,Oi,vi,Yi,Sr,Ca,Md){const ms=Ye.addToLineVertexArray(st,Et);let So,Yl,Xl,Jl,$y=0,By=0,Vy=0,Ny=0,em=-1,tm=-1;const Tr={};let Uy=Ti("");if(Ye.allowVerticalPlacement&&kt.vertical){const wn=si.layout.get("text-rotate").evaluate(vi,{},Ca)+90;Xl=new Dh(ti,st,zt,yi,Mi,kt.vertical,Xt,Bn,cn,wn),ji&&(Jl=new Dh(ti,st,zt,yi,Mi,ji,ya,Ki,cn,wn))}if(ri){const wn=si.layout.get("icon-rotate").evaluate(vi,{}),ca=si.layout.get("icon-text-fit")!=="none",To=Ly(ri,wn,Sr,ca),La=ji?Ly(ji,wn,Sr,ca):void 0;Yl=new Dh(ti,st,zt,yi,Mi,ri,ya,Ki,!1,wn),$y=4*To.length;const Mo=Ye.iconSizeData;let Ka=null;Mo.kind==="source"?(Ka=[wr*si.layout.get("icon-size").evaluate(vi,{})],Ka[0]>cs&&Ui(`${Ye.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Mo.kind==="composite"&&(Ka=[wr*Yi.compositeIconSizes[0].evaluate(vi,{},Ca),wr*Yi.compositeIconSizes[1].evaluate(vi,{},Ca)],(Ka[0]>cs||Ka[1]>cs)&&Ui(`${Ye.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ye.addSymbols(Ye.icon,To,Ka,Oi,di,vi,h.az.none,st,ms.lineStartIndex,ms.lineLength,-1,Ca),em=Ye.icon.placedSymbolArray.length-1,La&&(By=4*La.length,Ye.addSymbols(Ye.icon,La,Ka,Oi,di,vi,h.az.vertical,st,ms.lineStartIndex,ms.lineLength,-1,Ca),tm=Ye.icon.placedSymbolArray.length-1)}const Gy=Object.keys(kt.horizontal);for(const wn of Gy){const ca=kt.horizontal[wn];if(!So){Uy=Ti(ca.text);const La=si.layout.get("text-rotate").evaluate(vi,{},Ca);So=new Dh(ti,st,zt,yi,Mi,ca,Xt,Bn,cn,La)}const To=ca.positionedLines.length===1;if(Vy+=zy(Ye,st,ca,dn,si,cn,vi,Vn,ms,kt.vertical?h.az.horizontal:h.az.horizontalOnly,To?Gy:[wn],Tr,em,Yi,Ca),To)break}kt.vertical&&(Ny+=zy(Ye,st,kt.vertical,dn,si,cn,vi,Vn,ms,h.az.vertical,["vertical"],Tr,tm,Yi,Ca));const ik=So?So.boxStartIndex:Ye.collisionBoxArray.length,nk=So?So.boxEndIndex:Ye.collisionBoxArray.length,ak=Xl?Xl.boxStartIndex:Ye.collisionBoxArray.length,rk=Xl?Xl.boxEndIndex:Ye.collisionBoxArray.length,sk=Yl?Yl.boxStartIndex:Ye.collisionBoxArray.length,ok=Yl?Yl.boxEndIndex:Ye.collisionBoxArray.length,lk=Jl?Jl.boxStartIndex:Ye.collisionBoxArray.length,uk=Jl?Jl.boxEndIndex:Ye.collisionBoxArray.length;let Ea=-1;const Ih=(wn,ca)=>wn&&wn.circleDiameter?Math.max(wn.circleDiameter,ca):ca;Ea=Ih(So,Ea),Ea=Ih(Xl,Ea),Ea=Ih(Yl,Ea),Ea=Ih(Jl,Ea);const qy=Ea>-1?1:0;qy&&(Ea*=Md/Wi),Ye.glyphOffsetArray.length>=Ul.MAX_GLYPHS&&Ui("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),vi.sortKey!==void 0&&Ye.addToSortKeyRanges(Ye.symbolInstances.length,vi.sortKey);const dk=Iy(si,vi,Ca),[ck,hk]=(function(wn,ca){const To=wn.length,La=ca?.values;if(La?.length>0)for(let Mo=0;Mo<La.length;Mo+=2){const Ka=La[Mo+1];wn.emplaceBack(h.aP[La[Mo]],Ka[0],Ka[1])}return[To,wn.length]})(Ye.textAnchorOffsets,dk);Ye.symbolInstances.emplaceBack(st.x,st.y,Tr.right>=0?Tr.right:-1,Tr.center>=0?Tr.center:-1,Tr.left>=0?Tr.left:-1,Tr.vertical||-1,em,tm,Uy,ik,nk,ak,rk,sk,ok,lk,uk,zt,Vy,Ny,$y,By,qy,0,Xt,Ea,ck,hk)})(a,it,Je,n,d,m,Re,a.layers[0],a.collisionBoxArray,e.index,e.sourceLayerIndex,a.index,Y,[le,le,le,le],Fe,S,X,ce,Ie,V,e,_,P,D,y)};if(Oe==="line")for(const Je of wy(e.geometry,0,0,dt,dt)){const it=xo(Je,Ee),Ye=K1(it,ee,ke,n.vertical||N,d,24,se,a.overscaling,dt);for(const st of Ye)N&&ek(a,N.text,Ze,st)||et(it,st)}else if(Oe==="line-center"){for(const Je of e.geometry)if(Je.length>1){const it=xo(Je,Ee),Ye=Z1(it,ke,n.vertical||N,d,24,se);Ye&&et(it,Ye)}}else if(e.type==="Polygon")for(const Je of nl(e.geometry,0)){const it=X1(Je,16);et(xo(Je[0],Ee,!0),new ps(it.x,it.y,0))}else if(e.type==="LineString")for(const Je of e.geometry){const it=xo(Je,Ee);et(it,new ps(it[0].x,it[0].y,0))}else if(e.type==="Point")for(const Je of e.geometry)for(const it of Je)et([it],new ps(it.x,it.y,0))}function zy(a,e,n,d,m,_,y,b,S,P,D,I,F,j,V){const N=(function(se,X,ee,le,ce,ke,Fe,Ie){const Oe=le.layout.get("text-rotate").evaluate(ke,{})*Math.PI/180,Ze=[];for(const Be of X.positionedLines)for(const Re of Be.positionedGlyphs){if(!Re.rect)continue;const Ee=Re.rect||{};let et=4,Je=!0,it=1,Ye=0;const st=(ce||Ie)&&Re.vertical,Et=Re.metrics.advance*Re.scale/2;if(Ie&&X.verticalizable&&(Ye=Be.lineOffset/2-(Re.imageName?-(Wi-Re.metrics.width*Re.scale)/2:(Re.scale-1)*Wi)),Re.imageName){const Ki=Fe[Re.imageName];Je=Ki.sdf,it=Ki.pixelRatio,et=1/it}const kt=ce?[Re.x+Et,Re.y]:[0,0];let ri=ce?[0,0]:[Re.x+Et+ee[0],Re.y+ee[1]-Ye],dn=[0,0];st&&(dn=ri,ri=[0,0]);const ji=Re.metrics.isDoubleResolution?2:1,si=(Re.metrics.left-et)*Re.scale-Et+ri[0],ti=(-Re.metrics.top-et)*Re.scale+ri[1],zt=si+Ee.w/ji*Re.scale/it,yi=ti+Ee.h/ji*Re.scale/it,Mi=new w(si,ti),Xt=new w(zt,ti),Bn=new w(si,yi),cn=new w(zt,yi);if(st){const Ki=new w(-Et,Et- -17),di=-Math.PI/2,Oi=12-Et,vi=new w(22-Oi,-(Re.imageName?Oi:0)),Yi=new w(...dn);Mi._rotateAround(di,Ki)._add(vi)._add(Yi),Xt._rotateAround(di,Ki)._add(vi)._add(Yi),Bn._rotateAround(di,Ki)._add(vi)._add(Yi),cn._rotateAround(di,Ki)._add(vi)._add(Yi)}if(Oe){const Ki=Math.sin(Oe),di=Math.cos(Oe),Oi=[di,-Ki,Ki,di];Mi._matMult(Oi),Xt._matMult(Oi),Bn._matMult(Oi),cn._matMult(Oi)}const Vn=new w(0,0),ya=new w(0,0);Ze.push({tl:Mi,tr:Xt,bl:Bn,br:cn,tex:Ee,writingMode:X.writingMode,glyphOffset:kt,sectionIndex:Re.sectionIndex,isSDF:Je,pixelOffsetTL:Vn,pixelOffsetBR:ya,minFontScaleX:0,minFontScaleY:0})}return Ze})(0,n,b,m,_,y,d,a.allowVerticalPlacement),q=a.textSizeData;let Y=null;q.kind==="source"?(Y=[wr*m.layout.get("text-size").evaluate(y,{})],Y[0]>cs&&Ui(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):q.kind==="composite"&&(Y=[wr*j.compositeTextSizes[0].evaluate(y,{},V),wr*j.compositeTextSizes[1].evaluate(y,{},V)],(Y[0]>cs||Y[1]>cs)&&Ui(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,N,Y,b,_,y,P,e,S.lineStartIndex,S.lineLength,F,V);for(const se of D)I[se]=a.text.placedSymbolArray.length-1;return 4*N.length}function Ry(a){for(const e in a)return a[e];return null}function ek(a,e,n,d){const m=a.compareText;if(e in m){const _=m[e];for(let y=_.length-1;y>=0;y--)if(d.dist(_[y])<n)return!0}else m[e]=[];return m[e].push(d),!1}const Fy=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Hp{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,d]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const _=Fy[15&d];if(!_)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(e,2,1),[b]=new Uint32Array(e,4,1);return new Hp(b,y,_,e)}constructor(e,n=64,d=Float64Array,m){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=d,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const _=Fy.indexOf(this.ArrayType),y=2*e*this.ArrayType.BYTES_PER_ELEMENT,b=e*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-b%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+b+S,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+y+b+S),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+b+S,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=e,this.coords[this._pos++]=n,d}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Zp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:y,nodeSize:b}=this,S=[0,_.length-1,0],P=[];for(;S.length;){const D=S.pop()||0,I=S.pop()||0,F=S.pop()||0;if(I-F<=b){for(let q=F;q<=I;q++){const Y=y[2*q],se=y[2*q+1];Y>=e&&Y<=d&&se>=n&&se<=m&&P.push(_[q])}continue}const j=F+I>>1,V=y[2*j],N=y[2*j+1];V>=e&&V<=d&&N>=n&&N<=m&&P.push(_[j]),(D===0?e<=V:n<=N)&&(S.push(F),S.push(j-1),S.push(1-D)),(D===0?d>=V:m>=N)&&(S.push(j+1),S.push(I),S.push(1-D))}return P}within(e,n,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:y}=this,b=[0,m.length-1,0],S=[],P=d*d;for(;b.length;){const D=b.pop()||0,I=b.pop()||0,F=b.pop()||0;if(I-F<=y){for(let q=F;q<=I;q++)Oy(_[2*q],_[2*q+1],e,n)<=P&&S.push(m[q]);continue}const j=F+I>>1,V=_[2*j],N=_[2*j+1];Oy(V,N,e,n)<=P&&S.push(m[j]),(D===0?e-d<=V:n-d<=N)&&(b.push(F),b.push(j-1),b.push(1-D)),(D===0?e+d>=V:n+d>=N)&&(b.push(j+1),b.push(I),b.push(1-D))}return S}}function Zp(a,e,n,d,m,_){if(m-d<=n)return;const y=d+m>>1;jy(a,e,y,d,m,_),Zp(a,e,n,d,y-1,1-_),Zp(a,e,n,y+1,m,1-_)}function jy(a,e,n,d,m,_){for(;m>d;){if(m-d>600){const P=m-d+1,D=n-d+1,I=Math.log(P),F=.5*Math.exp(2*I/3),j=.5*Math.sqrt(I*F*(P-F)/P)*(D-P/2<0?-1:1);jy(a,e,n,Math.max(d,Math.floor(n-D*F/P+j)),Math.min(m,Math.floor(n+(P-D)*F/P+j)),_)}const y=e[2*n+_];let b=d,S=m;for(Sd(a,e,d,n),e[2*m+_]>y&&Sd(a,e,d,m);b<S;){for(Sd(a,e,b,S),b++,S--;e[2*b+_]<y;)b++;for(;e[2*S+_]>y;)S--}e[2*d+_]===y?Sd(a,e,d,S):(S++,Sd(a,e,S,m)),S<=n&&(d=S+1),n<=S&&(m=S-1)}}function Sd(a,e,n,d){Kp(a,n,d),Kp(e,2*n,2*d),Kp(e,2*n+1,2*d+1)}function Kp(a,e,n){const d=a[e];a[e]=a[n],a[n]=d}function Oy(a,e,n,d){const m=a-n,_=e-d;return m*m+_*_}var Yp;h.cH=void 0,(Yp=h.cH||(h.cH={})).create="create",Yp.load="load",Yp.fullLoad="fullLoad";let Ah=null,Td=[];const Xp=1e3/60,Jp="loadTime",Qp="fullLoadTime",tk={mark(a){performance.mark(a)},frame(a){const e=a;Ah!=null&&Td.push(e-Ah),Ah=e},clearMetrics(){Ah=null,Td=[],performance.clearMeasures(Jp),performance.clearMeasures(Qp);for(const a in h.cH)performance.clearMarks(h.cH[a])},getPerformanceMetrics(){performance.measure(Jp,h.cH.create,h.cH.load),performance.measure(Qp,h.cH.create,h.cH.fullLoad);const a=performance.getEntriesByName(Jp)[0].duration,e=performance.getEntriesByName(Qp)[0].duration,n=Td.length,d=1/(Td.reduce(((_,y)=>_+y),0)/n/1e3),m=Td.filter((_=>_>Xp)).reduce(((_,y)=>_+(y-Xp)/Xp),0);return{loadTime:a,fullLoadTime:e,fps:d,percentDroppedFrames:m/(n+m)*100,totalFrames:n}}};h.$=U,h.A=xe,h.B=rs,h.C=Gi,h.D=at,h.E=At,h.F=function([a,e,n]){return e+=90,e*=Math.PI/180,n*=Math.PI/180,{x:a*Math.cos(e)*Math.sin(n),y:a*Math.sin(e)*Math.sin(n),z:a*Math.cos(n)}},h.G=ii,h.H=Nt,h.I=vp,h.J=Yc,h.K=function(a){if(fi==null){const e=a.navigator?a.navigator.userAgent:null;fi=!!a.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return fi},h.L=class{constructor(a,e){this.target=a,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new g1((()=>this.process())),this.subscription=Fr(this.target,"message",(n=>this.receive(n)),!1),this.globalScope=fa(self)?a:window}registerMessageHandler(a,e){this.messageHandlers[a]=e}unregisterMessageHandler(a){delete this.messageHandlers[a]}sendAsync(a,e){return new Promise(((n,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=e?Fr(e.signal,"abort",(()=>{_?.unsubscribe(),delete this.resolveRejects[m];const S={id:m,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)}),_1):null;this.resolveRejects[m]={resolve:S=>{_?.unsubscribe(),n(S)},reject:S=>{_?.unsubscribe(),d(S)}};const y=[],b=Object.assign(Object.assign({},a),{id:m,sourceMapId:this.mapId,origin:location.origin,data:ro(a.data,y)});this.target.postMessage(b,{transfer:y})}))}receive(a){const e=a.data,n=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[n];const d=this.abortControllers[n];return delete this.abortControllers[n],void(d&&d.abort())}if(fa(self)||e.mustQueue)return this.tasks[n]=e,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,e)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),e=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(a,e)}processTask(a,e){return s(this,void 0,void 0,(function*(){if(e.type==="<response>"){const m=this.resolveRejects[a];return delete this.resolveRejects[a],m?void(e.error?m.reject(so(e.error)):m.resolve(so(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const n=so(e.data),d=new AbortController;this.abortControllers[a]=d;try{const m=yield this.messageHandlers[e.type](e.sourceMapId,n,d);this.completeTask(a,null,m)}catch(m){this.completeTask(a,m)}}))}completeTask(a,e,n){const d=[];delete this.abortControllers[a];const m={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?ro(e):null,data:ro(n,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.M=be,h.N=function(){var a=new xe(16);return xe!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},h.O=function(a,e,n){var d,m,_,y,b,S,P,D,I,F,j,V,N=n[0],q=n[1],Y=n[2];return e===a?(a[12]=e[0]*N+e[4]*q+e[8]*Y+e[12],a[13]=e[1]*N+e[5]*q+e[9]*Y+e[13],a[14]=e[2]*N+e[6]*q+e[10]*Y+e[14],a[15]=e[3]*N+e[7]*q+e[11]*Y+e[15]):(m=e[1],_=e[2],y=e[3],b=e[4],S=e[5],P=e[6],D=e[7],I=e[8],F=e[9],j=e[10],V=e[11],a[0]=d=e[0],a[1]=m,a[2]=_,a[3]=y,a[4]=b,a[5]=S,a[6]=P,a[7]=D,a[8]=I,a[9]=F,a[10]=j,a[11]=V,a[12]=d*N+b*q+I*Y+e[12],a[13]=m*N+S*q+F*Y+e[13],a[14]=_*N+P*q+j*Y+e[14],a[15]=y*N+D*q+V*Y+e[15]),a},h.P=w,h.Q=function(a,e,n){var d=n[0],m=n[1],_=n[2];return a[0]=e[0]*d,a[1]=e[1]*d,a[2]=e[2]*d,a[3]=e[3]*d,a[4]=e[4]*m,a[5]=e[5]*m,a[6]=e[6]*m,a[7]=e[7]*m,a[8]=e[8]*_,a[9]=e[9]*_,a[10]=e[10]*_,a[11]=e[11]*_,a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a},h.R=$n,h.S=function(a,e,n){var d=e[0],m=e[1],_=e[2],y=e[3],b=e[4],S=e[5],P=e[6],D=e[7],I=e[8],F=e[9],j=e[10],V=e[11],N=e[12],q=e[13],Y=e[14],se=e[15],X=n[0],ee=n[1],le=n[2],ce=n[3];return a[0]=X*d+ee*b+le*I+ce*N,a[1]=X*m+ee*S+le*F+ce*q,a[2]=X*_+ee*P+le*j+ce*Y,a[3]=X*y+ee*D+le*V+ce*se,a[4]=(X=n[4])*d+(ee=n[5])*b+(le=n[6])*I+(ce=n[7])*N,a[5]=X*m+ee*S+le*F+ce*q,a[6]=X*_+ee*P+le*j+ce*Y,a[7]=X*y+ee*D+le*V+ce*se,a[8]=(X=n[8])*d+(ee=n[9])*b+(le=n[10])*I+(ce=n[11])*N,a[9]=X*m+ee*S+le*F+ce*q,a[10]=X*_+ee*P+le*j+ce*Y,a[11]=X*y+ee*D+le*V+ce*se,a[12]=(X=n[12])*d+(ee=n[13])*b+(le=n[14])*I+(ce=n[15])*N,a[13]=X*m+ee*S+le*F+ce*q,a[14]=X*_+ee*P+le*j+ce*Y,a[15]=X*y+ee*D+le*V+ce*se,a},h.T=dp,h.U=function(a,e){const n={};for(let d=0;d<e.length;d++){const m=e[d];m in a&&(n[m]=a[m])}return n},h.V=hs,h.W=Qn,h.X=R_,h.Y=z_,h.Z=fe,h._=s,h.a=J,h.a$=lt,h.a0=_e,h.a1=Rr,h.a2=ua,h.a3=j_,h.a4=xh,h.a5=dt,h.a6=function(a,e,n){if(!a)return e||{};if(!e)return a||{};const d=V_(a),m=V_(e);(function(y,b){b.removeAll&&(y.add.clear(),y.update.clear(),y.remove.clear(),b.remove.clear());for(const S of b.remove)y.add.delete(S),y.update.delete(S);for(const[S,P]of b.update){const D=y.update.get(S);D&&(b.update.set(S,y1(D,P)),y.update.delete(S))}})(d,m);const _={};if((d.removeAll||m.removeAll)&&(_.removeAll=!0),_.remove=new Set([...d.remove,...m.remove]),_.add=new Map([...d.add,...m.add]),_.update=new Map([...d.update,...m.update]),_.remove.size&&_.add.size)for(const y of _.add.keys())_.remove.delete(y);return(function(y){const b={};return y.removeAll&&(b.removeAll=y.removeAll),y.remove&&(b.remove=Array.from(y.remove)),y.add&&(b.add=Array.from(y.add.values())),y.update&&(b.update=Array.from(y.update.values())),b})(_)},h.a7=function(a,e){const n=new Map;if(a==null||a.type==null)return n;if(a.type==="Feature"){const d=Cp(a,e);return d==null?void 0:(n.set(d,a),n)}if(a.type==="FeatureCollection"){const d=new Set;for(const m of a.features){const _=Cp(m,e);if(_==null||d.has(_))return;d.add(_),n.set(_,m)}return n}},h.a8=function(a,e,n){var d,m;const _=[];if(e.removeAll)a.clear();else if(e.remove)for(const y of e.remove){const b=a.get(y);b&&(_.push(b.geometry),a.delete(y))}if(e.add)for(const y of e.add){const b=Cp(y,n);if(b==null)continue;const S=a.get(b);S&&_.push(S.geometry),_.push(y.geometry),a.set(b,y)}if(e.update)for(const y of e.update){const b=a.get(y.id);if(!b)continue;const S=!!y.newGeometry,P=y.removeAllProperties||((d=y.removeProperties)===null||d===void 0?void 0:d.length)>0||((m=y.addOrUpdateProperties)===null||m===void 0?void 0:m.length)>0;if(!S&&!P)continue;_.push(b.geometry);const D=Object.assign({},b);if(a.set(y.id,D),S&&(_.push(y.newGeometry),D.geometry=y.newGeometry),P){if(D.properties=y.removeAllProperties?{}:Object.assign({},D.properties||{}),y.removeProperties)for(const I of y.removeProperties)delete D.properties[I];if(y.addOrUpdateProperties)for(const{key:I,value:F}of y.addOrUpdateProperties)D.properties[I]=F}}return _},h.a9=xd,h.aA=function(a,{uSize:e,uSizeT:n},{lowerSize:d,upperSize:m}){return a.kind==="source"?d/wr:a.kind==="composite"?ii.number(d/wr,m/wr,n):e},h.aB=function(a,e){var n=e[0],d=e[1],m=e[2],_=e[3],y=e[4],b=e[5],S=e[6],P=e[7],D=e[8],I=e[9],F=e[10],j=e[11],V=e[12],N=e[13],q=e[14],Y=e[15],se=n*b-d*y,X=n*S-m*y,ee=n*P-_*y,le=d*S-m*b,ce=d*P-_*b,ke=m*P-_*S,Fe=D*N-I*V,Ie=D*q-F*V,Oe=D*Y-j*V,Ze=I*q-F*N,Be=I*Y-j*N,Re=F*Y-j*q,Ee=se*Re-X*Be+ee*Ze+le*Oe-ce*Ie+ke*Fe;return Ee?(a[0]=(b*Re-S*Be+P*Ze)*(Ee=1/Ee),a[1]=(m*Be-d*Re-_*Ze)*Ee,a[2]=(N*ke-q*ce+Y*le)*Ee,a[3]=(F*ce-I*ke-j*le)*Ee,a[4]=(S*Oe-y*Re-P*Ie)*Ee,a[5]=(n*Re-m*Oe+_*Ie)*Ee,a[6]=(q*ee-V*ke-Y*X)*Ee,a[7]=(D*ke-F*ee+j*X)*Ee,a[8]=(y*Be-b*Oe+P*Fe)*Ee,a[9]=(d*Oe-n*Be-_*Fe)*Ee,a[10]=(V*ce-N*ee+Y*se)*Ee,a[11]=(I*ee-D*ce-j*se)*Ee,a[12]=(b*Ie-y*Ze-S*Fe)*Ee,a[13]=(n*Ze-d*Ie+m*Fe)*Ee,a[14]=(N*X-V*le-q*se)*Ee,a[15]=(D*le-I*X+F*se)*Ee,a):null},h.aC=Mt,h.aD=function(a){var e=a[0],n=a[1];return Math.sqrt(e*e+n*n)},h.aE=function(a){return a[0]=0,a[1]=0,a},h.aF=function(a,e,n){return a[0]=e[0]*n,a[1]=e[1]*n,a},h.aG=wp,h.aH=Ei,h.aI=function(a,e,n,d){const m=e.y-a.y,_=e.x-a.x,y=d.y-n.y,b=d.x-n.x,S=y*_-b*m;if(S===0)return null;const P=(b*(a.y-n.y)-y*(a.x-n.x))/S;return new w(a.x+P*_,a.y+P*m)},h.aJ=wy,h.aK=Rl,h.aL=function(a){let e=1/0,n=1/0,d=-1/0,m=-1/0;for(const _ of a)e=Math.min(e,_.x),n=Math.min(n,_.y),d=Math.max(d,_.x),m=Math.max(m,_.y);return[e,n,d,m]},h.aM=Wi,h.aN=fn,h.aO=function(a,e,n,d,m=!1){if(!n[0]&&!n[1])return[0,0];const _=m?d==="map"?-a.bearingInRadians:0:d==="viewport"?a.bearingInRadians:0;if(_){const y=Math.sin(_),b=Math.cos(_);n=[n[0]*b-n[1]*y,n[0]*y+n[1]*b]}return[m?n[0]:fn(e,n[0],a.zoom),m?n[1]:fn(e,n[1],a.zoom)]},h.aQ=bp,h.aR=Wp,h.aS=xp,h.aT=Hp,h.aU=Si,h.aV=ph,h.aW=ie,h.aX=Ke,h.aY=Ce,h.aZ=Sn,h.a_=O_,h.aa=bo,h.ab=25,h.ac=Pp,h.ad=a=>{const e=window.document.createElement("video");return e.muted=!0,new Promise((n=>{e.onloadstart=()=>{n(e)};for(const d of a){const m=window.document.createElement("source");je(d)||(e.crossOrigin="Anonymous"),m.src=d,e.appendChild(m)}}))},h.ae=Ue,h.af=function(){return ba++},h.ag=g,h.ah=Ul,h.ai=kd,h.aj=Ys,h.ak=Za,h.al=U_,h.am=function(a){const e={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((n,d,m,_)=>{const y=m||_;return e[d]=!y||y.toLowerCase(),""})),e["max-age"]){const n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e},h.an=Di,h.ao=85.051129,h.ap=jr,h.aq=function(a){return Math.pow(2,a)},h.ar=ze,h.as=F_,h.at=function(a){return Math.log(a)/Math.LN2},h.au=function(a){var e=a[0],n=a[1];return e*e+n*n},h.av=function(a){if(!a.length)return new Set;const e=Math.max(...a.map((S=>S.canonical.z)));let n=1/0,d=-1/0,m=1/0,_=-1/0;const y=[];for(const S of a){const{x:P,y:D,z:I}=S.canonical,F=Math.pow(2,e-I),j=P*F,V=D*F;y.push({id:S,x:j,y:V}),j<n&&(n=j),j>d&&(d=j),V<m&&(m=V),V>_&&(_=V)}const b=new Set;for(const S of y)S.x!==n&&S.x!==d&&S.y!==m&&S.y!==_||b.add(S.id);return b},h.aw=function(a,e){const n=Math.abs(2*a.wrap)-+(a.wrap<0),d=Math.abs(2*e.wrap)-+(e.wrap<0);return a.overscaledZ-e.overscaledZ||d-n||e.canonical.y-a.canonical.y||e.canonical.x-a.canonical.x},h.ax=class{constructor(a,e){this.max=a,this.onRemove=e,this.reset()}reset(){for(const a in this.data)for(const e of this.data[a])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(a,e,n){const d=a.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const m={value:e,timeout:void 0};if(n!==void 0&&(m.timeout=setTimeout((()=>{this.remove(a,m)}),n)),this.data[d].push(m),this.order.push(d),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const e=this.data[a].shift();return e.timeout&&clearTimeout(e.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),e.value}getByKey(a){const e=this.data[a];return e?e[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,e){if(!this.has(a))return this;const n=a.wrapped().key,d=e===void 0?0:this.data[n].indexOf(e),m=this.data[n][d];return this.data[n].splice(d,1),m.timeout&&clearTimeout(m.timeout),this.data[n].length===0&&delete this.data[n],this.onRemove(m.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(a){const e=[];for(const n in this.data)for(const d of this.data[n])a(d.value)||e.push(d);for(const n of e)this.remove(n.value.tileID,n)}},h.ay=function(a,e){let n=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:y}=a,b=m?Di(xn.interpolationFactor(m,e,_,y),0,1):0;a.kind==="camera"?d=ii.number(a.minSize,a.maxSize,b):n=b}return{uSizeT:n,uSize:d}},h.b=za,h.b$=xr,h.b0=rt,h.b1=function(a){var e=new xe(3);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e},h.b2=function(a,e,n){return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],a},h.b3=function(a,e){var n=e[0],d=e[1],m=e[2],_=n*n+d*d+m*m;return _>0&&(_=1/Math.sqrt(_)),a[0]=e[0]*_,a[1]=e[1]*_,a[2]=e[2]*_,a},h.b4=ct,h.b5=function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]},h.b6=function(a,e,n){return a[0]=e[0]*n[0],a[1]=e[1]*n[1],a[2]=e[2]*n[2],a[3]=e[3]*n[3],a},h.b7=Ne,h.b8=function(a,e,n){const d=e[0]*n[0]+e[1]*n[1]+e[2]*n[2];return d===0?null:(-(a[0]*n[0]+a[1]*n[1]+a[2]*n[2])-n[3])/d},h.b9=jt,h.bA=function(a,e,n,d){return a[0]=e[0]+n[0]*d,a[1]=e[1]+n[1]*d,a[2]=e[2]+n[2]*d,a},h.bB=Rt,h.bC=function(a,e,n){var d=n[0],m=n[1],_=n[2],y=n[3],b=e[0],S=e[1],P=e[2],D=m*P-_*S,I=_*b-d*P,F=d*S-m*b;return a[0]=b+y*(D+=D)+m*(F+=F)-_*(I+=I),a[1]=S+y*I+_*D-d*F,a[2]=P+y*F+d*I-m*D,a},h.bD=function(a,e,n){const d=(function(S){var P=S[3],D=S[4],I=S[5],F=S[6],j=S[7],V=S[8];return S[0]*(V*D-I*j)+S[1]*(-V*P+I*F)+S[2]*(j*P-D*F)})([a[0],a[1],a[2],e[0],e[1],e[2],n[0],n[1],n[2]]);if(d===0)return null;const m=ct([],[e[0],e[1],e[2]],[n[0],n[1],n[2]]),_=ct([],[n[0],n[1],n[2]],[a[0],a[1],a[2]]),y=ct([],[a[0],a[1],a[2]],[e[0],e[1],e[2]]),b=lt([],m,-a[3]);return rt(b,b,lt([],_,-e[3])),rt(b,b,lt([],y,-n[3])),lt(b,b,1/d),b},h.bE=Mp,h.bF=function(){return new Float64Array(4)},h.bG=function(a,e,n,d){var m=[],_=[];return m[0]=e[0]-n[0],m[1]=e[1]-n[1],m[2]=e[2]-n[2],_[0]=m[0]*Math.cos(d)-m[1]*Math.sin(d),_[1]=m[0]*Math.sin(d)+m[1]*Math.cos(d),_[2]=m[2],a[0]=_[0]+n[0],a[1]=_[1]+n[1],a[2]=_[2]+n[2],a},h.bH=function(a,e,n,d){var m=[],_=[];return m[0]=e[0]-n[0],m[1]=e[1]-n[1],m[2]=e[2]-n[2],_[0]=m[0],_[1]=m[1]*Math.cos(d)-m[2]*Math.sin(d),_[2]=m[1]*Math.sin(d)+m[2]*Math.cos(d),a[0]=_[0]+n[0],a[1]=_[1]+n[1],a[2]=_[2]+n[2],a},h.bI=function(a,e,n,d){var m=[],_=[];return m[0]=e[0]-n[0],m[1]=e[1]-n[1],m[2]=e[2]-n[2],_[0]=m[2]*Math.sin(d)+m[0]*Math.cos(d),_[1]=m[1],_[2]=m[2]*Math.cos(d)-m[0]*Math.sin(d),a[0]=_[0]+n[0],a[1]=_[1]+n[1],a[2]=_[2]+n[2],a},h.bJ=function(a,e,n){var d=Math.sin(n),m=Math.cos(n),_=e[0],y=e[1],b=e[2],S=e[3],P=e[8],D=e[9],I=e[10],F=e[11];return e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[0]=_*m-P*d,a[1]=y*m-D*d,a[2]=b*m-I*d,a[3]=S*m-F*d,a[8]=_*d+P*m,a[9]=y*d+D*m,a[10]=b*d+I*m,a[11]=S*d+F*m,a},h.bK=function(a,e){const n=sn(a,360),d=sn(e,360),m=d-n,_=d>n?m-360:m+360;return Math.abs(m)<Math.abs(_)?m:_},h.bL=function(a){return a[0]=0,a[1]=0,a[2]=0,a},h.bM=function(a,e,n,d){const m=Math.sqrt(a*a+e*e),_=Math.sqrt(n*n+d*d);a/=m,e/=m,n/=_,d/=_;const y=Math.acos(a*n+e*d);return-e*n+a*d>0?y:-y},h.bN=function(a,e){const n=sn(a,2*Math.PI),d=sn(e,2*Math.PI);return Math.min(Math.abs(n-d),Math.abs(n-d+2*Math.PI),Math.abs(n-d-2*Math.PI))},h.bO=function(){const a={},e=Me.$version;for(const n in Me.$root){const d=Me.$root[n];if(d.required){let m=null;m=n==="version"?e:d.type==="array"?[]:{},m!=null&&(a[n]=m)}}return a},h.bP=Le,h.bQ=Hu,h.bR=function a(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let d=0;d<e.length;d++)if(!a(e[d],n[d]))return!1;return!0}if(typeof e=="object"&&e!==null&&n!==null){if(typeof n!="object"||Object.keys(e).length!==Object.keys(n).length)return!1;for(const d in e)if(!a(e[d],n[d]))return!1;return!0}return e===n},h.bS=function(a){a=a.slice();const e=Object.create(null);for(let n=0;n<a.length;n++)e[a[n].id]=a[n];for(let n=0;n<a.length;n++)"ref"in a[n]&&(a[n]=en(a[n],e[a[n].ref]));return a},h.bT=function(a,e){if(a.type==="custom")return new m1(a,e);switch(a.type){case"background":return new p1(a,e);case"circle":return new Jw(a,e);case"color-relief":return new a0(a,e);case"fill":return new v0(a,e);case"fill-extrusion":return new D0(a,e);case"heatmap":return new e0(a,e);case"hillshade":return new i0(a,e);case"line":return new O0(a,e);case"raster":return new tp(a,e);case"symbol":return new vh(a,e)}},h.bU=a=>a.type==="raster",h.bV=Rn,h.bW=function(a,e){if(!a)return[{command:"setStyle",args:[e]}];let n=[];try{if(!ft(a.version,e.version))return[{command:"setStyle",args:[e]}];ft(a.center,e.center)||n.push({command:"setCenter",args:[e.center]}),ft(a.state,e.state)||n.push({command:"setGlobalState",args:[e.state]}),ft(a.centerAltitude,e.centerAltitude)||n.push({command:"setCenterAltitude",args:[e.centerAltitude]}),ft(a.zoom,e.zoom)||n.push({command:"setZoom",args:[e.zoom]}),ft(a.bearing,e.bearing)||n.push({command:"setBearing",args:[e.bearing]}),ft(a.pitch,e.pitch)||n.push({command:"setPitch",args:[e.pitch]}),ft(a.roll,e.roll)||n.push({command:"setRoll",args:[e.roll]}),ft(a.sprite,e.sprite)||n.push({command:"setSprite",args:[e.sprite]}),ft(a.glyphs,e.glyphs)||n.push({command:"setGlyphs",args:[e.glyphs]}),ft(a.transition,e.transition)||n.push({command:"setTransition",args:[e.transition]}),ft(a.light,e.light)||n.push({command:"setLight",args:[e.light]}),ft(a.terrain,e.terrain)||n.push({command:"setTerrain",args:[e.terrain]}),ft(a.sky,e.sky)||n.push({command:"setSky",args:[e.sky]}),ft(a.projection,e.projection)||n.push({command:"setProjection",args:[e.projection]});const d={},m=[];(function(y,b,S,P){let D;for(D in b=b||{},y=y||{})Object.prototype.hasOwnProperty.call(y,D)&&(Object.prototype.hasOwnProperty.call(b,D)||Qt(D,S,P));for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&(Object.prototype.hasOwnProperty.call(y,D)?ft(y[D],b[D])||(y[D].type==="geojson"&&b[D].type==="geojson"&&Gt(y,b,D)?Ot(S,{command:"setGeoJSONSourceData",args:[D,b[D].data]}):pi(D,b,S,P)):tn(D,b,S))})(a.sources,e.sources,m,d);const _=[];a.layers&&a.layers.forEach((y=>{"source"in y&&d[y.source]?n.push({command:"removeLayer",args:[y.id]}):_.push(y)})),n=n.concat(m),(function(y,b,S){b=b||[];const P=(y=y||[]).map(Ls),D=b.map(Ls),I=y.reduce(Ds,{}),F=b.reduce(Ds,{}),j=P.slice(),V=Object.create(null);let N,q,Y,se,X;for(let ee=0,le=0;ee<P.length;ee++)N=P[ee],Object.prototype.hasOwnProperty.call(F,N)?le++:(Ot(S,{command:"removeLayer",args:[N]}),j.splice(j.indexOf(N,le),1));for(let ee=0,le=0;ee<D.length;ee++)N=D[D.length-1-ee],j[j.length-1-ee]!==N&&(Object.prototype.hasOwnProperty.call(I,N)?(Ot(S,{command:"removeLayer",args:[N]}),j.splice(j.lastIndexOf(N,j.length-le),1)):le++,se=j[j.length-ee],Ot(S,{command:"addLayer",args:[F[N],se]}),j.splice(j.length-ee,0,N),V[N]=!0);for(let ee=0;ee<D.length;ee++)if(N=D[ee],q=I[N],Y=F[N],!V[N]&&!ft(q,Y))if(ft(q.source,Y.source)&&ft(q["source-layer"],Y["source-layer"])&&ft(q.type,Y.type)){for(X in Ri(q.layout,Y.layout,S,N,null,"setLayoutProperty"),Ri(q.paint,Y.paint,S,N,null,"setPaintProperty"),ft(q.filter,Y.filter)||Ot(S,{command:"setFilter",args:[N,Y.filter]}),ft(q.minzoom,Y.minzoom)&&ft(q.maxzoom,Y.maxzoom)||Ot(S,{command:"setLayerZoomRange",args:[N,Y.minzoom,Y.maxzoom]}),q)Object.prototype.hasOwnProperty.call(q,X)&&X!=="layout"&&X!=="paint"&&X!=="filter"&&X!=="metadata"&&X!=="minzoom"&&X!=="maxzoom"&&(X.indexOf("paint.")===0?Ri(q[X],Y[X],S,N,X.slice(6),"setPaintProperty"):ft(q[X],Y[X])||Ot(S,{command:"setLayerProperty",args:[N,X,Y[X]]}));for(X in Y)Object.prototype.hasOwnProperty.call(Y,X)&&!Object.prototype.hasOwnProperty.call(q,X)&&X!=="layout"&&X!=="paint"&&X!=="filter"&&X!=="metadata"&&X!=="minzoom"&&X!=="maxzoom"&&(X.indexOf("paint.")===0?Ri(q[X],Y[X],S,N,X.slice(6),"setPaintProperty"):ft(q[X],Y[X])||Ot(S,{command:"setLayerProperty",args:[N,X,Y[X]]}))}else Ot(S,{command:"removeLayer",args:[N]}),se=j[j.lastIndexOf(N)+1],Ot(S,{command:"addLayer",args:[Y,se]})})(_,e.layers,n)}catch(d){console.warn("Unable to compute style diff:",d),n=[{command:"setStyle",args:[e]}]}return n},h.bX=function(a){const e=[],n=a.id;return n===void 0&&e.push({message:`layers.${n}: missing required property "id"`}),a.render===void 0&&e.push({message:`layers.${n}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},h.bY=kn,h.bZ=er,h.b_=class extends Pn{constructor(a,e){super(a,e),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},h.ba=function(a,e,n){return a[0]=e[0]*n,a[1]=e[1]*n,a[2]=e[2]*n,a[3]=e[3]*n,a},h.bb=function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]},h.bc=B_,h.bd=Gl,h.be=function(a,e,n,d,m){var _=1/Math.tan(e/2);if(a[0]=_/n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=_,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0){var y=1/(d-m);a[10]=(m+d)*y,a[14]=2*m*d*y}else a[10]=-1,a[14]=-2*d;return a},h.bf=function(a){var e=new xe(16);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15],e},h.bg=function(a,e,n){var d=Math.sin(n),m=Math.cos(n),_=e[0],y=e[1],b=e[2],S=e[3],P=e[4],D=e[5],I=e[6],F=e[7];return e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[0]=_*m+P*d,a[1]=y*m+D*d,a[2]=b*m+I*d,a[3]=S*m+F*d,a[4]=P*m-_*d,a[5]=D*m-y*d,a[6]=I*m-b*d,a[7]=F*m-S*d,a},h.bh=function(a,e,n){var d=Math.sin(n),m=Math.cos(n),_=e[4],y=e[5],b=e[6],S=e[7],P=e[8],D=e[9],I=e[10],F=e[11];return e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[4]=_*m+P*d,a[5]=y*m+D*d,a[6]=b*m+I*d,a[7]=S*m+F*d,a[8]=P*m-_*d,a[9]=D*m-y*d,a[10]=I*m-b*d,a[11]=F*m-S*d,a},h.bi=function(){const a=new Float32Array(16);return ze(a),a},h.bj=function(){const a=new Float64Array(16);return ze(a),a},h.bk=function(){return new Float64Array(16)},h.bl=function(a,e,n){const d=new Float64Array(4);return Rt(d,a,e-90,n),d},h.bm=function(a,e,n,d){var m,_,y,b,S,P=e[0],D=e[1],I=e[2],F=e[3],j=n[0],V=n[1],N=n[2],q=n[3];return(_=P*j+D*V+I*N+F*q)<0&&(_=-_,j=-j,V=-V,N=-N,q=-q),1-_>pe?(m=Math.acos(_),y=Math.sin(m),b=Math.sin((1-d)*m)/y,S=Math.sin(d*m)/y):(b=1-d,S=d),a[0]=b*P+S*j,a[1]=b*D+S*V,a[2]=b*I+S*N,a[3]=b*F+S*q,a},h.bn=function(a){const e=new Float64Array(9);(function(_,y){var b=y[0],S=y[1],P=y[2],D=y[3],I=b+b,F=S+S,j=P+P,V=b*I,N=S*I,q=S*F,Y=P*I,se=P*F,X=P*j,ee=D*I,le=D*F,ce=D*j;_[0]=1-q-X,_[3]=N-ce,_[6]=Y+le,_[1]=N+ce,_[4]=1-V-X,_[7]=se-ee,_[2]=Y-le,_[5]=se+ee,_[8]=1-V-q})(e,a);const n=Sn(-Math.asin(Di(e[2],-1,1)));let d,m;return Math.hypot(e[5],e[8])<.001?(d=0,m=-Sn(Math.atan2(e[3],e[4]))):(d=Sn(e[5]===0&&e[8]===0?0:Math.atan2(e[5],e[8])),m=Sn(e[1]===0&&e[0]===0?0:Math.atan2(e[1],e[0]))),{roll:d,pitch:n+90,bearing:m}},h.bo=function(a,e){return a.roll==e.roll&&a.pitch==e.pitch&&a.bearing==e.bearing},h.bp=xt,h.bq=vr,h.br=Bl,h.bs=pd,h.bt=$l,h.bu=pn,h.bv=zn,h.bw=vn,h.bx=function(a,e,n,d,m){return pn(d,m,Di((a-e)/(n-e),0,1))},h.by=sn,h.bz=function(){return new Float64Array(3)},h.c=ge,h.c$=function(a,e,n,d,m){return s(this,void 0,void 0,(function*(){if(_e())try{return yield Rr(a,e,n,d,m)}catch{}return(function(_,y,b,S,P){const D=_.width,I=_.height;Ra&&ea||(Ra=new OffscreenCanvas(D,I),ea=Ra.getContext("2d",{willReadFrequently:!0})),Ra.width=D,Ra.height=I,ea.drawImage(_,0,0,D,I);const F=ea.getImageData(y,b,S,P);return ea.clearRect(0,0,D,I),F.data})(a,e,n,d,m)}))},h.c0=class extends Pn{constructor(a,e){super(a,e),this.current=Kn}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let e=1;e<16;e++)if(a[e]!==this.current[e]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},h.c1=yo,h.c2=class extends Pn{constructor(a,e){super(a,e),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},h.c3=class extends Pn{constructor(a,e){super(a,e),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},h.c4=Ae,h.c5=function(a,e){var n=Math.sin(e),d=Math.cos(e);return a[0]=d,a[1]=n,a[2]=0,a[3]=-n,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},h.c6=function(a,e,n){var d=e[0],m=e[1],_=e[2];return a[0]=d*n[0]+m*n[3]+_*n[6],a[1]=d*n[1]+m*n[4]+_*n[7],a[2]=d*n[2]+m*n[5]+_*n[8],a},h.c7=function(a,e,n,d,m,_,y){var b=1/(e-n),S=1/(d-m),P=1/(_-y);return a[0]=-2*b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*S,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*P,a[11]=0,a[12]=(e+n)*b,a[13]=(m+d)*S,a[14]=(y+_)*P,a[15]=1,a},h.c8=class extends Pn{constructor(a,e){super(a,e),this.current=new Array}set(a){if(a!=this.current){this.current=a;const e=new Float32Array(4*a.length);for(let n=0;n<a.length;n++)e[4*n]=a[n].r,e[4*n+1]=a[n].g,e[4*n+2]=a[n].b,e[4*n+3]=a[n].a;this.gl.uniform4fv(this.location,e)}}},h.c9=class extends Pn{constructor(a,e){super(a,e),this.current=new Array}set(a){if(a!=this.current){this.current=a;const e=new Float32Array(a);this.gl.uniform1fv(this.location,e)}}},h.cA=function(a,e){return we[e]&&"touches"in a},h.cB=function(a){return we[a]||Z[a]},h.cC=function(a,e,n){var d=e[0],m=e[1];return a[0]=n[0]*d+n[4]*m+n[12],a[1]=n[1]*d+n[5]*m+n[13],a},h.cD=function(a,e){const{x:n,y:d}=xd.fromLngLat(e);return!(a<0||a>25||d<0||d>=1||n<0||n>=1)},h.cE=function(a,e){return a[0]=e[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=e[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=e[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},h.cF=class extends Cl{},h.cG=tk,h.cI=ye,h.cJ=function(a,e){ge.REGISTERED_PROTOCOLS[a]=e},h.cK=function(a){delete ge.REGISTERED_PROTOCOLS[a]},h.cL=function(a,e){const n={};for(let m=0;m<a.length;m++){const _=e&&e[a[m].id]||$c(a[m]);e&&(e[a[m].id]=_);let y=n[_];y||(y=n[_]=[]),y.push(a[m])}const d=[];for(const m in n)d.push(n[m]);return d},h.cM=tt,h.cN=N_,h.cO=xy,h.cP=k_,h.cQ=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=dt/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const e=a.bucket.layers[0],n=e.layout,d=e._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new Nt(a.bucket.zoom+1),a.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Nt(a.bucket.zoom+1),a.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Nt(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:P,maxZoom:D}=a.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Nt(P),a.canonical),d["text-size"].possiblyEvaluate(new Nt(D),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:P,maxZoom:D}=a.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Nt(P),a.canonical),d["icon-size"].possiblyEvaluate(new Nt(D),a.canonical)]}const _=n.get("text-line-height")*Wi,y=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",b=n.get("text-keep-upright"),S=n.get("text-size");for(const P of a.bucket.features){const D=n.get("text-font").evaluate(P,{},a.canonical).join(","),I=S.evaluate(P,{},a.canonical),F=m.layoutTextSize.evaluate(P,{},a.canonical),j=m.layoutIconSize.evaluate(P,{},a.canonical),V={horizontal:{},vertical:void 0},N=P.text;let q,Y=[0,0];if(N){const ee=N.toString(),le=n.get("text-letter-spacing").evaluate(P,{},a.canonical)*Wi,ce=Qf(ee)?le:0,ke=n.get("text-anchor").evaluate(P,{},a.canonical),Fe=Iy(e,P,a.canonical);if(!Fe){const Be=n.get("text-radial-offset").evaluate(P,{},a.canonical);Y=Be?Ay(ke,[Be*Wi,qp]):n.get("text-offset").evaluate(P,{},a.canonical).map((Re=>Re*Wi))}let Ie=y?"center":n.get("text-justify").evaluate(P,{},a.canonical);const Oe=n.get("symbol-placement")==="point"?n.get("text-max-width").evaluate(P,{},a.canonical)*Wi:1/0,Ze=()=>{a.bucket.allowVerticalPlacement&&ls(ee)&&(V.vertical=_h(N,a.glyphMap,a.glyphPositions,a.imagePositions,D,Oe,_,ke,"left",ce,Y,h.az.vertical,!0,F,I))};if(!y&&Fe){const Be=new Set;if(Ie==="auto")for(let Ee=0;Ee<Fe.values.length;Ee+=2)Be.add(Wp(Fe.values[Ee]));else Be.add(Ie);let Re=!1;for(const Ee of Be)if(!V.horizontal[Ee])if(Re)V.horizontal[Ee]=V.horizontal[0];else{const et=_h(N,a.glyphMap,a.glyphPositions,a.imagePositions,D,Oe,_,"center",Ee,ce,Y,h.az.horizontal,!1,F,I);et&&(V.horizontal[Ee]=et,Re=et.positionedLines.length===1)}Ze()}else{Ie==="auto"&&(Ie=Wp(ke));const Be=_h(N,a.glyphMap,a.glyphPositions,a.imagePositions,D,Oe,_,ke,Ie,ce,Y,h.az.horizontal,!1,F,I);Be&&(V.horizontal[Ie]=Be),Ze(),ls(ee)&&y&&b&&(V.vertical=_h(N,a.glyphMap,a.glyphPositions,a.imagePositions,D,Oe,_,ke,Ie,ce,Y,h.az.vertical,!1,F,I))}}let se=!1;if(P.icon&&P.icon.name){const ee=a.imageMap[P.icon.name];ee&&(q=d1(a.imagePositions[P.icon.name],n.get("icon-offset").evaluate(P,{},a.canonical),n.get("icon-anchor").evaluate(P,{},a.canonical)),se=!!ee.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=se:a.bucket.sdfIcons!==se&&Ui("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ee.pixelRatio!==a.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const X=Ry(V.horizontal)||V.vertical;a.bucket.iconsInText=!!X&&X.iconsInText,(X||q)&&Q1(a.bucket,P,V,q,a.imageMap,m,F,j,Y,se,a.canonical,a.subdivisionGranularity)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},h.cR=pp,h.cS=gp,h.cT=_p,h.cU=function(a){const e=new gh;return(function(n,d){for(const m in n.layers)d.writeMessage(3,$1,n.layers[m])})(a,e),e.finish()},h.cV=function(a,e,n,d,m,_){let y=ky(a,e,n,m,0);return y=ky(y,e,d,_,1),y},h.cW=class{constructor(a){this.maxEntries=a,this.map=new Map}get(a){const e=this.map.get(a);return e!==void 0&&(this.map.delete(a),this.map.set(a,e)),e}set(a,e){if(this.map.has(a))this.map.delete(a);else if(this.map.size>=this.maxEntries){const n=this.map.keys().next().value;this.map.delete(n)}this.map.set(a,e)}clear(){this.map.clear()}},h.cX=r_,h.cY=gh,h.cZ=yy,h.c_=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},h.ca=class extends _r{},h.cb=N0,h.cc=class extends _o{},h.cd=up,h.ce=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},h.cf=Gg,h.cg=function(a,e,n){var d=e[0],m=e[1],_=e[2],y=n[3]*d+n[7]*m+n[11]*_+n[15];return a[0]=(n[0]*d+n[4]*m+n[8]*_+n[12])/(y=y||1),a[1]=(n[1]*d+n[5]*m+n[9]*_+n[13])/y,a[2]=(n[2]*d+n[6]*m+n[10]*_+n[14])/y,a},h.ch=class extends ed{},h.ci=class extends t{},h.cj=function(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&a[7]===e[7]&&a[8]===e[8]&&a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]},h.ck=function(a,e){var n=a[0],d=a[1],m=a[2],_=a[3],y=a[4],b=a[5],S=a[6],P=a[7],D=a[8],I=a[9],F=a[10],j=a[11],V=a[12],N=a[13],q=a[14],Y=a[15],se=e[0],X=e[1],ee=e[2],le=e[3],ce=e[4],ke=e[5],Fe=e[6],Ie=e[7],Oe=e[8],Ze=e[9],Be=e[10],Re=e[11],Ee=e[12],et=e[13],Je=e[14],it=e[15];return Math.abs(n-se)<=pe*Math.max(1,Math.abs(n),Math.abs(se))&&Math.abs(d-X)<=pe*Math.max(1,Math.abs(d),Math.abs(X))&&Math.abs(m-ee)<=pe*Math.max(1,Math.abs(m),Math.abs(ee))&&Math.abs(_-le)<=pe*Math.max(1,Math.abs(_),Math.abs(le))&&Math.abs(y-ce)<=pe*Math.max(1,Math.abs(y),Math.abs(ce))&&Math.abs(b-ke)<=pe*Math.max(1,Math.abs(b),Math.abs(ke))&&Math.abs(S-Fe)<=pe*Math.max(1,Math.abs(S),Math.abs(Fe))&&Math.abs(P-Ie)<=pe*Math.max(1,Math.abs(P),Math.abs(Ie))&&Math.abs(D-Oe)<=pe*Math.max(1,Math.abs(D),Math.abs(Oe))&&Math.abs(I-Ze)<=pe*Math.max(1,Math.abs(I),Math.abs(Ze))&&Math.abs(F-Be)<=pe*Math.max(1,Math.abs(F),Math.abs(Be))&&Math.abs(j-Re)<=pe*Math.max(1,Math.abs(j),Math.abs(Re))&&Math.abs(V-Ee)<=pe*Math.max(1,Math.abs(V),Math.abs(Ee))&&Math.abs(N-et)<=pe*Math.max(1,Math.abs(N),Math.abs(et))&&Math.abs(q-Je)<=pe*Math.max(1,Math.abs(q),Math.abs(Je))&&Math.abs(Y-it)<=pe*Math.max(1,Math.abs(Y),Math.abs(it))},h.cl=function(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a},h.cm=a=>a.type==="symbol",h.cn=a=>a.type==="circle",h.co=a=>a.type==="heatmap",h.cp=a=>a.type==="line",h.cq=a=>a.type==="fill",h.cr=a=>a.type==="fill-extrusion",h.cs=a=>a.type==="hillshade",h.ct=a=>a.type==="color-relief",h.cu=a=>a.type==="background",h.cv=a=>a.type==="custom",h.cw=Ji,h.cx=function(a,e,n){const d=Li(e.x-n.x,e.y-n.y),m=Li(a.x-n.x,a.y-n.y),_=Math.atan2(d[0]*m[1]-d[1]*m[0],(function(y,b){return y[0]*b[0]+y[1]*b[1]})(d,m));return Sn(_)},h.cy=oi,h.cz=function(a,e){return Z[e]&&(a instanceof MouseEvent||a instanceof WheelEvent)},h.d=je,h.d0=Hg,h.d1=T,h.d2=class{constructor(a,e){this.layers={[kd]:this},this.name=kd,this.version=e?e.version:1,this.extent=e?e.extent:4096,this.length=a.length,this.features=a}feature(a){return new O1(this.features[a],this.extent)}},h.d3=Ks,h.d4=Ga,h.e=Qi,h.f=a=>s(void 0,void 0,void 0,(function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(e)}catch(n){throw new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),h.g=Se,h.h=a=>new Promise(((e,n)=>{const d=new Image;d.onload=()=>{e(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame((()=>{d.src=tr}))},d.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(a)],{type:"image/png"});d.src=a.byteLength?URL.createObjectURL(m):tr})),h.i=fa,h.j=(a,e)=>Ve(Qi(a,{type:"json"}),e),h.k=Vt,h.l=ht,h.m=Ve,h.n=(a,e)=>Ve(Qi(a,{type:"arrayBuffer"}),e),h.o=function(a){return new gh(a).readFields(i1,[])},h.p=w_,h.q=function(a){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))},h.r=ud,h.s=Fr,h.t=bn,h.u=Me,h.v=no,h.w=Ui,h.x=Ju,h.y=ao,h.z=lo})),u("worker",["./shared"],(function(h){class s{constructor(Z,H){this.keyCache={},Z&&this.replace(Z,H)}replace(Z,H){this._layerConfigs={},this._layers={},this.update(Z,[],H)}update(Z,H,J){for(const ge of Z){this._layerConfigs[ge.id]=ge;const Se=this._layers[ge.id]=h.bT(ge,J);Se._featureFilter=h.aj(Se.filter,J),this.keyCache[ge.id]&&delete this.keyCache[ge.id]}for(const ge of H)delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge];this.familiesBySource={};const fe=h.cL(Object.values(this._layerConfigs),this.keyCache);for(const ge of fe){const Se=ge.map((Qe=>this._layers[Qe.id])),be=Se[0];if(be.isHidden())continue;const ye=be.source||"";let Le=this.familiesBySource[ye];Le||(Le=this.familiesBySource[ye]={});const Ve=be.sourceLayer||h.ai;let je=Le[Ve];je||(je=Le[Ve]=[]),je.push(Se)}}}class w{constructor(Z){const H={},J=[];for(const be in Z){const ye=Z[be],Le=H[be]={};for(const Ve in ye){const je=ye[+Ve];if(!je||je.bitmap.width===0||je.bitmap.height===0)continue;const Qe={x:0,y:0,w:je.bitmap.width+2,h:je.bitmap.height+2};J.push(Qe),Le[Ve]={rect:Qe,metrics:je.metrics}}}const{w:fe,h:ge}=h.p(J),Se=new h.r({width:fe||1,height:ge||1});for(const be in Z){const ye=Z[be];for(const Le in ye){const Ve=ye[+Le];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const je=H[be][Le].rect;h.r.copy(Ve.bitmap,Se,{x:0,y:0},{x:je.x+1,y:je.y+1},Ve.bitmap)}}this.image=Se,this.positions=H}}h.cM("GlyphAtlas",w);class T{constructor(Z){this.tileID=new h.a2(Z.tileID.overscaledZ,Z.tileID.wrap,Z.tileID.canonical.z,Z.tileID.canonical.x,Z.tileID.canonical.y),this.uid=Z.uid,this.zoom=Z.zoom,this.pixelRatio=Z.pixelRatio,this.tileSize=Z.tileSize,this.source=Z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Z.showCollisionBoxes,this.collectResourceTiming=!!Z.collectResourceTiming,this.returnDependencies=!!Z.returnDependencies,this.promoteId=Z.promoteId,this.inFlightDependencies=[]}parse(Z,H,J,fe,ge){return h._(this,void 0,void 0,(function*(){this.status="parsing",this.data=Z,this.collisionBoxArray=new h.ag;const Se=new h.cN(Object.keys(Z.layers).sort()),be=new h.cO(this.tileID,this.promoteId);be.bucketLayerIDs=[];const ye={},Le={featureIndex:be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:J,subdivisionGranularity:ge},Ve=H.familiesBySource[this.source];for(const Gt in Ve){const Ri=Z.layers[Gt];if(!Ri)continue;Ri.version===1&&h.w(`Vector tile source "${this.source}" layer "${Gt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ls=Se.encode(Gt),Ds=[];for(let Ue=0;Ue<Ri.length;Ue++){const mn=Ri.feature(Ue),gn=be.getId(mn,Gt);Ds.push({feature:mn,id:gn,index:Ue,sourceLayerIndex:Ls})}for(const Ue of Ve[Gt]){const mn=Ue[0];mn.source!==this.source&&h.w(`layer.source = ${mn.source} does not equal this.source = ${this.source}`),mn.isHidden(this.zoom,!0)||(E(Ue,this.zoom,J),(ye[mn.id]=mn.createBucket({index:be.bucketLayerIDs.length,layers:Ue,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ls,sourceID:this.source})).populate(Ds,Le,this.tileID.canonical),be.bucketLayerIDs.push(Ue.map((gn=>gn.id))))}}const je=h.bY(Le.glyphDependencies,(Gt=>Object.keys(Gt).map(Number)));this.inFlightDependencies.forEach((Gt=>Gt?.abort())),this.inFlightDependencies=[];let Qe=Promise.resolve({});if(Object.keys(je).length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),Qe=fe.sendAsync({type:"GG",data:{stacks:je,source:this.source,tileID:this.tileID,type:"glyphs"}},Gt)}const nt=Object.keys(Le.iconDependencies);let ht=Promise.resolve({});if(nt.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),ht=fe.sendAsync({type:"GI",data:{icons:nt,source:this.source,tileID:this.tileID,type:"icons"}},Gt)}const Vt=Object.keys(Le.patternDependencies);let At=Promise.resolve({});if(Vt.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),At=fe.sendAsync({type:"GI",data:{icons:Vt,source:this.source,tileID:this.tileID,type:"patterns"}},Gt)}const Me=Le.dashDependencies;let Ut=Promise.resolve({});if(Object.keys(Me).length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),Ut=fe.sendAsync({type:"GDA",data:{dashes:Me}},Gt)}const[en,ft,Ot,tn]=yield Promise.all([Qe,ht,At,Ut]),Qt=new w(en),pi=new h.cP(ft,Ot);for(const Gt in ye){const Ri=ye[Gt];Ri instanceof h.ah?(E(Ri.layers,this.zoom,J),h.cQ({bucket:Ri,glyphMap:en,glyphPositions:Qt.positions,imageMap:ft,imagePositions:pi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Le.subdivisionGranularity})):Ri.hasDependencies&&(Ri instanceof h.cR||Ri instanceof h.cS||Ri instanceof h.cT)&&(E(Ri.layers,this.zoom,J),Ri.addFeatures(Le,this.tileID.canonical,pi.patternPositions,tn))}return this.status="done",{buckets:Object.values(ye).filter((Gt=>!Gt.isEmpty())),featureIndex:be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qt.image,imageAtlas:pi,dashPositions:tn,glyphMap:this.returnDependencies?en:null,iconMap:this.returnDependencies?ft:null,glyphPositions:this.returnDependencies?Qt.positions:null}}))}}function E(we,Z,H){const J=new h.H(Z);for(const fe of we)fe.recalculate(J,H)}class z{constructor(Z,H,J,fe,ge){this.type=Z,this.properties=J||{},this.extent=ge,this.pointsArray=H,this.id=fe}loadGeometry(){return this.pointsArray.map((Z=>Z.map((H=>new h.P(H.x,H.y)))))}}class O{constructor(Z,H,J){this.version=2,this._myFeatures=Z,this.name=H,this.length=Z.length,this.extent=J}feature(Z){return this._myFeatures[Z]}}class W{constructor(){this.layers={}}addLayer(Z){this.layers[Z.name]=Z}}function Q(we){let Z=h.cU(we);return Z.byteOffset===0&&Z.byteLength===Z.buffer.byteLength||(Z=new Uint8Array(Z)),{vectorTile:we,rawData:Z.buffer}}function te(we,Z,H){const{extent:J}=we,fe=Math.pow(2,H.z-Z.z),ge=(H.x-Z.x*fe)*J,Se=(H.y-Z.y*fe)*J,be=[];for(let ye=0;ye<we.length;ye++){const Le=we.feature(ye);let Ve=Le.loadGeometry();for(const Qe of Ve)for(const nt of Qe)nt.x=nt.x*fe-ge,nt.y=nt.y*fe-Se;const je=128;Ve=h.cV(Ve,Le.type,-je,-je,J+je,J+je),Ve.length!==0&&be.push(new z(Le.type,Ve,Le.properties,Le.id,J))}return new O(be,we.name,J)}class U{constructor(Z,H,J){this.actor=Z,this.layerIndex=H,this.availableImages=J,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new h.cW(1e3)}loadVectorTile(Z,H){return h._(this,void 0,void 0,(function*(){const J=yield h.n(Z.request,H);try{return{vectorTile:Z.encoding!=="mlt"?new h.cX(new h.cY(J.data)):new h.cZ(J.data),rawData:J.data,cacheControl:J.cacheControl,expires:J.expires}}catch(fe){const ge=new Uint8Array(J.data);let Se=`Unable to parse the tile at ${Z.request.url}, `;throw Se+=ge[0]===31&&ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${fe.message}`,new Error(Se)}}))}loadTile(Z){return h._(this,void 0,void 0,(function*(){const{uid:H,overzoomParameters:J}=Z;J&&(Z.request=J.overzoomRequest);const fe=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new h.c_(Z.request),ge=new T(Z);this.loading[H]=ge;const Se=new AbortController;ge.abort=Se;try{const be=yield this.loadVectorTile(Z,Se);if(delete this.loading[H],!be)return null;if(J){const Qe=this._getOverzoomTile(Z,be.vectorTile);be.rawData=Qe.rawData,be.vectorTile=Qe.vectorTile}const ye=be.rawData,Le={};be.expires&&(Le.expires=be.expires),be.cacheControl&&(Le.cacheControl=be.cacheControl);const Ve={};if(fe){const Qe=fe.finish();Qe&&(Ve.resourceTiming=JSON.parse(JSON.stringify(Qe)))}ge.vectorTile=be.vectorTile;const je=ge.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity);this.loaded[H]=ge,this.fetching[H]={rawTileData:ye,cacheControl:Le,resourceTiming:Ve};try{const Qe=yield je;return h.e({rawTileData:ye.slice(0),encoding:Z.encoding},Qe,Le,Ve)}finally{delete this.fetching[H]}}catch(be){throw delete this.loading[H],ge.status="done",this.loaded[H]=ge,be}}))}_getOverzoomTile(Z,H){const{tileID:J,source:fe,overzoomParameters:ge}=Z,{maxZoomTileID:Se}=ge,be=`${Se.key}_${J.key}`,ye=this.overzoomedTileResultCache.get(be);if(ye)return ye;const Le=new W,Ve=this.layerIndex.familiesBySource[fe];for(const Qe in Ve){const nt=H.layers[Qe];if(!nt)continue;const ht=te(nt,Se,J.canonical);ht.length>0&&Le.addLayer(ht)}const je=Q(Le);return this.overzoomedTileResultCache.set(be,je),je}reloadTile(Z){return h._(this,void 0,void 0,(function*(){const H=Z.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const J=this.loaded[H];if(J.showCollisionBoxes=Z.showCollisionBoxes,J.status==="parsing"){const fe=yield J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity);let ge;if(this.fetching[H]){const{rawTileData:Se,cacheControl:be,resourceTiming:ye}=this.fetching[H];delete this.fetching[H],ge=h.e({rawTileData:Se.slice(0),encoding:Z.encoding},fe,be,ye)}else ge=fe;return ge}if(J.status==="done"&&J.vectorTile)return J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity)}))}abortTile(Z){return h._(this,void 0,void 0,(function*(){const H=this.loading,J=Z.uid;H&&H[J]&&H[J].abort&&(H[J].abort.abort(),delete H[J])}))}removeTile(Z){return h._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[Z.uid]&&delete this.loaded[Z.uid]}))}}class _e{constructor(){this.loaded={}}loadTile(Z){return h._(this,void 0,void 0,(function*(){const{uid:H,encoding:J,rawImageData:fe,redFactor:ge,greenFactor:Se,blueFactor:be,baseShift:ye}=Z,Le=fe.width+2,Ve=fe.height+2,je=h.b(fe)?new h.R({width:Le,height:Ve},yield h.c$(fe,-1,-1,Le,Ve)):fe,Qe=new h.d0(H,je,J,ge,Se,be,ye);return this.loaded=this.loaded||{},this.loaded[H]=Qe,Qe}))}removeTile(Z){const H=this.loaded,J=Z.uid;H&&H[J]&&delete H[J]}}var pe,xe,Ae=(function(){if(xe)return pe;function we(H,J){if(H.length!==0){Z(H[0],J);for(var fe=1;fe<H.length;fe++)Z(H[fe],!J)}}function Z(H,J){for(var fe=0,ge=0,Se=0,be=H.length,ye=be-1;Se<be;ye=Se++){var Le=(H[Se][0]-H[ye][0])*(H[ye][1]+H[Se][1]),Ve=fe+Le;ge+=Math.abs(fe)>=Math.abs(Le)?fe-Ve+Le:Le-Ve+fe,fe=Ve}fe+ge>=0!=!!J&&H.reverse()}return xe=1,pe=function H(J,fe){var ge,Se=J&&J.type;if(Se==="FeatureCollection")for(ge=0;ge<J.features.length;ge++)H(J.features[ge],fe);else if(Se==="GeometryCollection")for(ge=0;ge<J.geometries.length;ge++)H(J.geometries[ge],fe);else if(Se==="Feature")H(J.geometry,fe);else if(Se==="Polygon")we(J.coordinates,fe);else if(Se==="MultiPolygon")for(ge=0;ge<J.coordinates.length;ge++)we(J.coordinates[ge],fe);return J}})(),ze=h.d1(Ae);const qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:we=>we},Ne=Math.fround||(He=new Float32Array(1),we=>(He[0]=+we,He[0]));var He;class rt{constructor(Z){this.options=Object.assign(Object.create(qe),Z),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Z){const{log:H,minZoom:J,maxZoom:fe}=this.options;H&&console.time("total time");const ge=`prepare ${Z.length} points`;H&&console.time(ge),this.points=Z;const Se=[];for(let ye=0;ye<Z.length;ye++){const Le=Z[ye];if(!Le.geometry)continue;const[Ve,je]=Le.geometry.coordinates,Qe=Ne(mt(Ve)),nt=Ne(jt(je));Se.push(Qe,nt,1/0,ye,-1,1),this.options.reduce&&Se.push(0)}let be=this.trees[fe+1]=this._createTree(Se);H&&console.timeEnd(ge);for(let ye=fe;ye>=J;ye--){const Le=+Date.now();be=this.trees[ye]=this._createTree(this._cluster(be,ye)),H&&console.log("z%d: %d clusters in %dms",ye,be.numItems,+Date.now()-Le)}return H&&console.timeEnd("total time"),this}getClusters(Z,H){let J=((Z[0]+180)%360+360)%360-180;const fe=Math.max(-90,Math.min(90,Z[1]));let ge=Z[2]===180?180:((Z[2]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,Z[3]));if(Z[2]-Z[0]>=360)J=-180,ge=180;else if(J>ge){const je=this.getClusters([J,fe,180,Se],H),Qe=this.getClusters([-180,fe,ge,Se],H);return je.concat(Qe)}const be=this.trees[this._limitZoom(H)],ye=be.range(mt(J),jt(Se),mt(ge),jt(fe)),Le=be.data,Ve=[];for(const je of ye){const Qe=this.stride*je;Ve.push(Le[Qe+5]>1?lt(Le,Qe,this.clusterProps):this.points[Le[Qe+3]])}return Ve}getChildren(Z){const H=this._getOriginId(Z),J=this._getOriginZoom(Z),fe="No cluster with the specified id.",ge=this.trees[J];if(!ge)throw new Error(fe);const Se=ge.data;if(H*this.stride>=Se.length)throw new Error(fe);const be=this.options.radius/(this.options.extent*Math.pow(2,J-1)),ye=ge.within(Se[H*this.stride],Se[H*this.stride+1],be),Le=[];for(const Ve of ye){const je=Ve*this.stride;Se[je+4]===Z&&Le.push(Se[je+5]>1?lt(Se,je,this.clusterProps):this.points[Se[je+3]])}if(Le.length===0)throw new Error(fe);return Le}getLeaves(Z,H,J){const fe=[];return this._appendLeaves(fe,Z,H=H||10,J=J||0,0),fe}getTile(Z,H,J){const fe=this.trees[this._limitZoom(Z)],ge=Math.pow(2,Z),{extent:Se,radius:be}=this.options,ye=be/Se,Le=(J-ye)/ge,Ve=(J+1+ye)/ge,je={features:[]};return this._addTileFeatures(fe.range((H-ye)/ge,Le,(H+1+ye)/ge,Ve),fe.data,H,J,ge,je),H===0&&this._addTileFeatures(fe.range(1-ye/ge,Le,1,Ve),fe.data,ge,J,ge,je),H===ge-1&&this._addTileFeatures(fe.range(0,Le,ye/ge,Ve),fe.data,-1,J,ge,je),je.features.length?je:null}getClusterExpansionZoom(Z){let H=this._getOriginZoom(Z)-1;for(;H<=this.options.maxZoom;){const J=this.getChildren(Z);if(H++,J.length!==1)break;Z=J[0].properties.cluster_id}return H}_appendLeaves(Z,H,J,fe,ge){const Se=this.getChildren(H);for(const be of Se){const ye=be.properties;if(ye&&ye.cluster?ge+ye.point_count<=fe?ge+=ye.point_count:ge=this._appendLeaves(Z,ye.cluster_id,J,fe,ge):ge<fe?ge++:Z.push(be),Z.length===J)break}return ge}_createTree(Z){const H=new h.aT(Z.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<Z.length;J+=this.stride)H.add(Z[J],Z[J+1]);return H.finish(),H.data=Z,H}_addTileFeatures(Z,H,J,fe,ge,Se){for(const be of Z){const ye=be*this.stride,Le=H[ye+5]>1;let Ve,je,Qe;if(Le)Ve=ct(H,ye,this.clusterProps),je=H[ye],Qe=H[ye+1];else{const Vt=this.points[H[ye+3]];Ve=Vt.properties;const[At,Me]=Vt.geometry.coordinates;je=mt(At),Qe=jt(Me)}const nt={type:1,geometry:[[Math.round(this.options.extent*(je*ge-J)),Math.round(this.options.extent*(Qe*ge-fe))]],tags:Ve};let ht;ht=Le||this.options.generateId?H[ye+3]:this.points[H[ye+3]].id,ht!==void 0&&(nt.id=ht),Se.features.push(nt)}}_limitZoom(Z){return Math.max(this.options.minZoom,Math.min(Math.floor(+Z),this.options.maxZoom+1))}_cluster(Z,H){const{radius:J,extent:fe,reduce:ge,minPoints:Se}=this.options,be=J/(fe*Math.pow(2,H)),ye=Z.data,Le=[],Ve=this.stride;for(let je=0;je<ye.length;je+=Ve){if(ye[je+2]<=H)continue;ye[je+2]=H;const Qe=ye[je],nt=ye[je+1],ht=Z.within(ye[je],ye[je+1],be),Vt=ye[je+5];let At=Vt;for(const Me of ht){const Ut=Me*Ve;ye[Ut+2]>H&&(At+=ye[Ut+5])}if(At>Vt&&At>=Se){let Me,Ut=Qe*Vt,en=nt*Vt,ft=-1;const Ot=(je/Ve<<5)+(H+1)+this.points.length;for(const tn of ht){const Qt=tn*Ve;if(ye[Qt+2]<=H)continue;ye[Qt+2]=H;const pi=ye[Qt+5];Ut+=ye[Qt]*pi,en+=ye[Qt+1]*pi,ye[Qt+4]=Ot,ge&&(Me||(Me=this._map(ye,je,!0),ft=this.clusterProps.length,this.clusterProps.push(Me)),ge(Me,this._map(ye,Qt)))}ye[je+4]=Ot,Le.push(Ut/At,en/At,1/0,Ot,-1,At),ge&&Le.push(ft)}else{for(let Me=0;Me<Ve;Me++)Le.push(ye[je+Me]);if(At>1)for(const Me of ht){const Ut=Me*Ve;if(!(ye[Ut+2]<=H)){ye[Ut+2]=H;for(let en=0;en<Ve;en++)Le.push(ye[Ut+en])}}}}return Le}_getOriginId(Z){return Z-this.points.length>>5}_getOriginZoom(Z){return(Z-this.points.length)%32}_map(Z,H,J){if(Z[H+5]>1){const Se=this.clusterProps[Z[H+6]];return J?Object.assign({},Se):Se}const fe=this.points[Z[H+3]].properties,ge=this.options.map(fe);return J&&ge===fe?Object.assign({},ge):ge}}function lt(we,Z,H){return{type:"Feature",id:we[Z+3],properties:ct(we,Z,H),geometry:{type:"Point",coordinates:[(J=we[Z],360*(J-.5)),Ei(we[Z+1])]}};var J}function ct(we,Z,H){const J=we[Z+5],fe=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,ge=we[Z+6],Se=ge===-1?{}:Object.assign({},H[ge]);return Object.assign(Se,{cluster:!0,cluster_id:we[Z+3],point_count:J,point_count_abbreviated:fe})}function mt(we){return we/360+.5}function jt(we){const Z=Math.sin(we*Math.PI/180),H=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return H<0?0:H>1?1:H}function Ei(we){const Z=(180-360*we)*Math.PI/180;return 360*Math.atan(Math.exp(Z))/Math.PI-90}function Tt(we,Z,H,J){let fe=J;const ge=Z+(H-Z>>1);let Se,be=H-Z;const ye=we[Z],Le=we[Z+1],Ve=we[H],je=we[H+1];for(let Qe=Z+3;Qe<H;Qe+=3){const nt=Rt(we[Qe],we[Qe+1],ye,Le,Ve,je);if(nt>fe)Se=Qe,fe=nt;else if(nt===fe){const ht=Math.abs(Qe-ge);ht<be&&(Se=Qe,be=ht)}}fe>J&&(Se-Z>3&&Tt(we,Z,Se,J),we[Se+2]=fe,H-Se>3&&Tt(we,Se,H,J))}function Rt(we,Z,H,J,fe,ge){let Se=fe-H,be=ge-J;if(Se!==0||be!==0){const ye=((we-H)*Se+(Z-J)*be)/(Se*Se+be*be);ye>1?(H=fe,J=ge):ye>0&&(H+=Se*ye,J+=be*ye)}return Se=we-H,be=Z-J,Se*Se+be*be}function Mt(we,Z,H,J){const fe={id:we??null,type:Z,geometry:H,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Z==="Point"||Z==="MultiPoint"||Z==="LineString")Li(fe,H);else if(Z==="Polygon")Li(fe,H[0]);else if(Z==="MultiLineString")for(const ge of H)Li(fe,ge);else if(Z==="MultiPolygon")for(const ge of H)Li(fe,ge[0]);return fe}function Li(we,Z){for(let H=0;H<Z.length;H+=3)we.minX=Math.min(we.minX,Z[H]),we.minY=Math.min(we.minY,Z[H+1]),we.maxX=Math.max(we.maxX,Z[H]),we.maxY=Math.max(we.maxY,Z[H+1])}function dt(we,Z,H,J){if(!Z.geometry)return;const fe=Z.geometry.coordinates;if(fe&&fe.length===0)return;const ge=Z.geometry.type,Se=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2);let be=[],ye=Z.id;if(H.promoteId?ye=Z.properties[H.promoteId]:H.generateId&&(ye=J||0),ge==="Point")fn(fe,be);else if(ge==="MultiPoint")for(const Le of fe)fn(Le,be);else if(ge==="LineString")sn(fe,be,Se,!1);else if(ge==="MultiLineString"){if(H.lineMetrics){for(const Le of fe)be=[],sn(Le,be,Se,!1),we.push(Mt(ye,"LineString",be,Z.properties));return}pn(fe,be,Se,!1)}else if(ge==="Polygon")pn(fe,be,Se,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(const Le of Z.geometry.geometries)dt(we,{id:ye,geometry:Le,properties:Z.properties},H,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Le of fe){const Ve=[];pn(Le,Ve,Se,!0),be.push(Ve)}}we.push(Mt(ye,ge,be,Z.properties))}function fn(we,Z){Z.push(zn(we[0]),Ji(we[1]),0)}function sn(we,Z,H,J){let fe,ge,Se=0;for(let ye=0;ye<we.length;ye++){const Le=zn(we[ye][0]),Ve=Ji(we[ye][1]);Z.push(Le,Ve,0),ye>0&&(Se+=J?(fe*Ve-Le*ge)/2:Math.sqrt(Math.pow(Le-fe,2)+Math.pow(Ve-ge,2))),fe=Le,ge=Ve}const be=Z.length-3;Z[2]=1,Tt(Z,0,be,H),Z[be+2]=1,Z.size=Math.abs(Se),Z.start=0,Z.end=Z.size}function pn(we,Z,H,J){for(let fe=0;fe<we.length;fe++){const ge=[];sn(we[fe],ge,H,J),Z.push(ge)}}function zn(we){return we/360+.5}function Ji(we){const Z=Math.sin(we*Math.PI/180),H=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return H<0?0:H>1?1:H}function oi(we,Z,H,J,fe,ge,Se,be){if(J/=Z,ge>=(H/=Z)&&Se<J)return we;if(Se<H||ge>=J)return null;const ye=[];for(const Le of we){const Ve=Le.geometry;let je=Le.type;const Qe=fe===0?Le.minX:Le.minY,nt=fe===0?Le.maxX:Le.maxY;if(Qe>=H&&nt<J){ye.push(Le);continue}if(nt<H||Qe>=J)continue;let ht=[];if(je==="Point"||je==="MultiPoint")Di(Ve,ht,H,J,fe);else if(je==="LineString")Qn(Ve,ht,H,J,fe,!1,be.lineMetrics);else if(je==="MultiLineString")ba(Ve,ht,H,J,fe,!1);else if(je==="Polygon")ba(Ve,ht,H,J,fe,!0);else if(je==="MultiPolygon")for(const Vt of Ve){const At=[];ba(Vt,At,H,J,fe,!0),At.length&&ht.push(At)}if(ht.length){if(be.lineMetrics&&je==="LineString"){for(const Vt of ht)ye.push(Mt(Le.id,je,Vt,Le.tags));continue}je!=="LineString"&&je!=="MultiLineString"||(ht.length===1?(je="LineString",ht=ht[0]):je="MultiLineString"),je!=="Point"&&je!=="MultiPoint"||(je=ht.length===3?"Point":"MultiPoint"),ye.push(Mt(Le.id,je,ht,Le.tags))}}return ye.length?ye:null}function Di(we,Z,H,J,fe){for(let ge=0;ge<we.length;ge+=3){const Se=we[ge+fe];Se>=H&&Se<=J&&kn(Z,we[ge],we[ge+1],we[ge+2])}}function Qn(we,Z,H,J,fe,ge,Se){let be=Qi(we);const ye=fe===0?er:Rn;let Le,Ve,je=we.start;for(let At=0;At<we.length-3;At+=3){const Me=we[At],Ut=we[At+1],en=we[At+2],ft=we[At+3],Ot=we[At+4],tn=fe===0?Me:Ut,Qt=fe===0?ft:Ot;let pi=!1;Se&&(Le=Math.sqrt(Math.pow(Me-ft,2)+Math.pow(Ut-Ot,2))),tn<H?Qt>H&&(Ve=ye(be,Me,Ut,ft,Ot,H),Se&&(be.start=je+Le*Ve)):tn>J?Qt<J&&(Ve=ye(be,Me,Ut,ft,Ot,J),Se&&(be.start=je+Le*Ve)):kn(be,Me,Ut,en),Qt<H&&tn>=H&&(Ve=ye(be,Me,Ut,ft,Ot,H),pi=!0),Qt>J&&tn<=J&&(Ve=ye(be,Me,Ut,ft,Ot,J),pi=!0),!ge&&pi&&(Se&&(be.end=je+Le*Ve),Z.push(be),be=Qi(we)),Se&&(je+=Le)}let Qe=we.length-3;const nt=we[Qe],ht=we[Qe+1],Vt=fe===0?nt:ht;Vt>=H&&Vt<=J&&kn(be,nt,ht,we[Qe+2]),Qe=be.length-3,ge&&Qe>=3&&(be[Qe]!==be[0]||be[Qe+1]!==be[1])&&kn(be,be[0],be[1],be[2]),be.length&&Z.push(be)}function Qi(we){const Z=[];return Z.size=we.size,Z.start=we.start,Z.end=we.end,Z}function ba(we,Z,H,J,fe,ge){for(const Se of we)Qn(Se,Z,H,J,fe,ge,!1)}function kn(we,Z,H,J){we.push(Z,H,J)}function er(we,Z,H,J,fe,ge){const Se=(ge-Z)/(J-Z);return kn(we,ge,H+(fe-H)*Se,1),Se}function Rn(we,Z,H,J,fe,ge){const Se=(ge-H)/(fe-H);return kn(we,Z+(J-Z)*Se,ge,1),Se}function Es(we,Z){const H=[];for(let J=0;J<we.length;J++){const fe=we[J],ge=fe.type;let Se;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")Se=Ui(fe.geometry,Z);else if(ge==="MultiLineString"||ge==="Polygon"){Se=[];for(const be of fe.geometry)Se.push(Ui(be,Z))}else if(ge==="MultiPolygon"){Se=[];for(const be of fe.geometry){const ye=[];for(const Le of be)ye.push(Ui(Le,Z));Se.push(ye)}}H.push(Mt(fe.id,ge,Se,fe.tags))}return H}function Ui(we,Z){const H=[];H.size=we.size,we.start!==void 0&&(H.start=we.start,H.end=we.end);for(let J=0;J<we.length;J+=3)H.push(we[J]+Z,we[J+1],we[J+2]);return H}function Un(we,Z){if(we.transformed)return we;const H=1<<we.z,J=we.x,fe=we.y;for(const ge of we.features){const Se=ge.geometry,be=ge.type;if(ge.geometry=[],be===1)for(let ye=0;ye<Se.length;ye+=2)ge.geometry.push(fa(Se[ye],Se[ye+1],Z,H,J,fe));else for(let ye=0;ye<Se.length;ye++){const Le=[];for(let Ve=0;Ve<Se[ye].length;Ve+=2)Le.push(fa(Se[ye][Ve],Se[ye][Ve+1],Z,H,J,fe));ge.geometry.push(Le)}}return we.transformed=!0,we}function fa(we,Z,H,J,fe,ge){return[Math.round(H*(we*J-fe)),Math.round(H*(Z*J-ge))]}function fi(we,Z,H,J,fe){const ge=Z===fe.maxZoom?0:fe.tolerance/((1<<Z)*fe.extent),Se={features:[],numPoints:0,numSimplified:0,numFeatures:we.length,source:null,x:H,y:J,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const be of we)za(Se,be,ge,fe);return Se}function za(we,Z,H,J){const fe=Z.geometry,ge=Z.type,Se=[];if(we.minX=Math.min(we.minX,Z.minX),we.minY=Math.min(we.minY,Z.minY),we.maxX=Math.max(we.maxX,Z.maxX),we.maxY=Math.max(we.maxY,Z.maxY),ge==="Point"||ge==="MultiPoint")for(let be=0;be<fe.length;be+=3)Se.push(fe[be],fe[be+1]),we.numPoints++,we.numSimplified++;else if(ge==="LineString")tr(Se,fe,we,H,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(let be=0;be<fe.length;be++)tr(Se,fe[be],we,H,ge==="Polygon",be===0);else if(ge==="MultiPolygon")for(let be=0;be<fe.length;be++){const ye=fe[be];for(let Le=0;Le<ye.length;Le++)tr(Se,ye[Le],we,H,!0,Le===0)}if(Se.length){let be=Z.tags||null;if(ge==="LineString"&&J.lineMetrics){be={};for(const Le in Z.tags)be[Le]=Z.tags[Le];be.mapbox_clip_start=fe.start/fe.size,be.mapbox_clip_end=fe.end/fe.size}const ye={geometry:Se,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:be};Z.id!==null&&(ye.id=Z.id),we.features.push(ye)}}function tr(we,Z,H,J,fe,ge){const Se=J*J;if(J>0&&Z.size<(fe?Se:J))return void(H.numPoints+=Z.length/3);const be=[];for(let ye=0;ye<Z.length;ye+=3)(J===0||Z[ye+2]>Se)&&(H.numSimplified++,be.push(Z[ye],Z[ye+1])),H.numPoints++;fe&&(function(ye,Le){let Ve=0;for(let je=0,Qe=ye.length,nt=Qe-2;je<Qe;nt=je,je+=2)Ve+=(ye[je]-ye[nt])*(ye[je+1]+ye[nt+1]);if(Ve>0===Le)for(let je=0,Qe=ye.length;je<Qe/2;je+=2){const nt=ye[je],ht=ye[je+1];ye[je]=ye[Qe-2-je],ye[je+1]=ye[Qe-1-je],ye[Qe-2-je]=nt,ye[Qe-1-je]=ht}})(be,ge),we.push(be)}const Rr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ra{constructor(Z,H){const J=(H=this.options=(function(ge,Se){for(const be in Se)ge[be]=Se[be];return ge})(Object.create(Rr),H)).debug;if(J&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");let fe=(function(ge,Se){const be=[];if(ge.type==="FeatureCollection")for(let ye=0;ye<ge.features.length;ye++)dt(be,ge.features[ye],Se,ye);else dt(be,ge.type==="Feature"?ge:{geometry:ge},Se);return be})(Z,H);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fe=(function(ge,Se){const be=Se.buffer/Se.extent;let ye=ge;const Le=oi(ge,1,-1-be,be,0,-1,2,Se),Ve=oi(ge,1,1-be,2+be,0,-1,2,Se);return(Le||Ve)&&(ye=oi(ge,1,-be,1+be,0,-1,2,Se)||[],Le&&(ye=Es(Le,1).concat(ye)),Ve&&(ye=ye.concat(Es(Ve,-1)))),ye})(fe,H),fe.length&&this.splitTile(fe,0,0,0),J&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Z,H,J,fe,ge,Se,be){const ye=[Z,H,J,fe],Le=this.options,Ve=Le.debug;for(;ye.length;){fe=ye.pop(),J=ye.pop(),H=ye.pop(),Z=ye.pop();const je=1<<H,Qe=ea(H,J,fe);let nt=this.tiles[Qe];if(!nt&&(Ve>1&&console.time("creation"),nt=this.tiles[Qe]=fi(Z,H,J,fe,Le),this.tileCoords.push({z:H,x:J,y:fe}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,J,fe,nt.numFeatures,nt.numPoints,nt.numSimplified),console.timeEnd("creation"));const pi=`z${H}`;this.stats[pi]=(this.stats[pi]||0)+1,this.total++}if(nt.source=Z,ge==null){if(H===Le.indexMaxZoom||nt.numPoints<=Le.indexMaxPoints)continue}else{if(H===Le.maxZoom||H===ge)continue;if(ge!=null){const pi=ge-H;if(J!==Se>>pi||fe!==be>>pi)continue}}if(nt.source=null,Z.length===0)continue;Ve>1&&console.time("clipping");const ht=.5*Le.buffer/Le.extent,Vt=.5-ht,At=.5+ht,Me=1+ht;let Ut=null,en=null,ft=null,Ot=null,tn=oi(Z,je,J-ht,J+At,0,nt.minX,nt.maxX,Le),Qt=oi(Z,je,J+Vt,J+Me,0,nt.minX,nt.maxX,Le);Z=null,tn&&(Ut=oi(tn,je,fe-ht,fe+At,1,nt.minY,nt.maxY,Le),en=oi(tn,je,fe+Vt,fe+Me,1,nt.minY,nt.maxY,Le),tn=null),Qt&&(ft=oi(Qt,je,fe-ht,fe+At,1,nt.minY,nt.maxY,Le),Ot=oi(Qt,je,fe+Vt,fe+Me,1,nt.minY,nt.maxY,Le),Qt=null),Ve>1&&console.timeEnd("clipping"),ye.push(Ut||[],H+1,2*J,2*fe),ye.push(en||[],H+1,2*J,2*fe+1),ye.push(ft||[],H+1,2*J+1,2*fe),ye.push(Ot||[],H+1,2*J+1,2*fe+1)}}getTile(Z,H,J){Z=+Z,H=+H,J=+J;const fe=this.options,{extent:ge,debug:Se}=fe;if(Z<0||Z>24)return null;const be=1<<Z,ye=ea(Z,H=H+be&be-1,J);if(this.tiles[ye])return Un(this.tiles[ye],ge);Se>1&&console.log("drilling down to z%d-%d-%d",Z,H,J);let Le,Ve=Z,je=H,Qe=J;for(;!Le&&Ve>0;)Ve--,je>>=1,Qe>>=1,Le=this.tiles[ea(Ve,je,Qe)];return Le&&Le.source?(Se>1&&(console.log("found parent tile z%d-%d-%d",Ve,je,Qe),console.time("drilling down")),this.splitTile(Le.source,Ve,je,Qe,Z,H,J),Se>1&&console.timeEnd("drilling down"),this.tiles[ye]?Un(this.tiles[ye],ge):null):null}}function ea(we,Z,H){return 32*((1<<we)*H+Z)+we}class Fr extends U{constructor(Z,H,J,fe=jr){super(Z,H,J),this._dataUpdateable=new Map,this._createGeoJSONIndex=fe}loadVectorTile(Z,H){return h._(this,void 0,void 0,(function*(){const J=Z.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const fe=this._geoJSONIndex.getTile(J.z,J.x,J.y);return fe?Q(new h.d2(fe.features,{version:2,extent:h.a5})):null}))}loadData(Z){return h._(this,void 0,void 0,(function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();const J=this._startPerformance(Z);this._pendingRequest=new AbortController;try{(!this._pendingData||Z.request||Z.data||Z.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(Z,this._pendingRequest));const fe=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(fe,Z),this.loaded={};const ge={};return Z.request&&(ge.data=fe),this._finishPerformance(J,Z,ge),ge}catch(fe){if(delete this._pendingRequest,h.Z(fe))return{abandoned:!0};throw fe}}))}_startPerformance(Z){var H;if(!((H=Z?.request)===null||H===void 0)&&H.collectResourceTiming)return new h.c_(Z.request)}_finishPerformance(Z,H,J){if(!Z)return;const fe=Z.finish();fe&&(J.resourceTiming={},J.resourceTiming[H.source]=JSON.parse(JSON.stringify(fe)))}getData(){return h._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(Z){const H=this.loaded;return H&&H[Z.uid]?super.reloadTile(Z):this.loadTile(Z)}loadAndProcessGeoJSON(Z,H){return h._(this,void 0,void 0,(function*(){let J;if(Z.request?J=yield this.loadGeoJSONFromUrl(Z.request,Z.promoteId,H):Z.data?J=this._loadGeoJSONFromObject(Z.data,Z.promoteId):Z.dataDiff&&(J=this._loadGeoJSONFromDiff(Z.dataDiff,Z.promoteId,Z.source)),delete this._pendingRequest,typeof J!="object")throw new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`);return ze(J,!0),Z.filter&&(J=this._filterGeoJSON(J,Z.filter)),J}))}loadGeoJSONFromUrl(Z,H,J){return h._(this,void 0,void 0,(function*(){const fe=yield h.j(Z,J);return this._dataUpdateable=h.a7(fe.data,H),fe.data}))}_loadGeoJSONFromObject(Z,H){return this._dataUpdateable=h.a7(Z,H),Z}_loadGeoJSONFromDiff(Z,H,J){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J}`);h.a8(this._dataUpdateable,Z,H);const fe=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(fe)}_filterGeoJSON(Z,H){const J=h.d3(H,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(J.result==="error")throw new Error(J.value.map((ge=>`${ge.key}: ${ge.message}`)).join(", "));const fe=Z.features.filter((ge=>J.value.evaluate({zoom:0},ge)));return this._toFeatureCollection(fe)}_toFeatureCollection(Z){return{type:"FeatureCollection",features:Z}}removeSource(Z){return h._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(Z){return this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId)}getClusterChildren(Z){return this._geoJSONIndex.getChildren(Z.clusterId)}getClusterLeaves(Z){return this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset)}}function jr(we,Z){return Z.cluster?new rt((function({superclusterOptions:H,clusterProperties:J}){if(!J||!H)return H;const fe={},ge={},Se={accumulated:null,zoom:0},be={properties:null},ye=Object.keys(J);for(const Le of ye){const[Ve,je]=J[Le],Qe=h.d3(je),nt=h.d3(typeof Ve=="string"?[Ve,["accumulated"],["get",Le]]:Ve);fe[Le]=Qe.value,ge[Le]=nt.value}return H.map=Le=>{be.properties=Le;const Ve={};for(const je of ye)Ve[je]=fe[je].evaluate(Se,be);return Ve},H.reduce=(Le,Ve)=>{be.properties=Ve;for(const je of ye)Se.accumulated=Le[je],Le[je]=ge[je].evaluate(Se,be)},H})(Z)).load(we.features):(function(H,J){return new Ra(H,J)})(we,Z.geojsonVtOptions)}class Sn{constructor(Z){this.self=Z,this.actor=new h.L(Z),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(H,J)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=J},this.self.addProtocol=h.cJ,this.self.removeProtocol=h.cK,this.self.registerRTLTextPlugin=H=>{h.d4.setMethods(H)},this.actor.registerMessageHandler("LDT",((H,J)=>this._getDEMWorkerSource(H,J.source).loadTile(J))),this.actor.registerMessageHandler("RDT",((H,J)=>h._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(H,J.source).removeTile(J)})))),this.actor.registerMessageHandler("GCEZ",((H,J)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(H,J.type,J.source).getClusterExpansionZoom(J)})))),this.actor.registerMessageHandler("GCC",((H,J)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(H,J.type,J.source).getClusterChildren(J)})))),this.actor.registerMessageHandler("GCL",((H,J)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(H,J.type,J.source).getClusterLeaves(J)})))),this.actor.registerMessageHandler("LD",((H,J)=>this._getWorkerSource(H,J.type,J.source).loadData(J))),this.actor.registerMessageHandler("GD",((H,J)=>this._getWorkerSource(H,J.type,J.source).getData())),this.actor.registerMessageHandler("LT",((H,J)=>this._getWorkerSource(H,J.type,J.source).loadTile(J))),this.actor.registerMessageHandler("RT",((H,J)=>this._getWorkerSource(H,J.type,J.source).reloadTile(J))),this.actor.registerMessageHandler("AT",((H,J)=>this._getWorkerSource(H,J.type,J.source).abortTile(J))),this.actor.registerMessageHandler("RMT",((H,J)=>this._getWorkerSource(H,J.type,J.source).removeTile(J))),this.actor.registerMessageHandler("RS",((H,J)=>h._(this,void 0,void 0,(function*(){if(!this.workerSources[H]||!this.workerSources[H][J.type]||!this.workerSources[H][J.type][J.source])return;const fe=this.workerSources[H][J.type][J.source];delete this.workerSources[H][J.type][J.source],fe.removeSource!==void 0&&fe.removeSource(J)})))),this.actor.registerMessageHandler("RM",(H=>h._(this,void 0,void 0,(function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H],this.globalStates.delete(H)})))),this.actor.registerMessageHandler("SR",((H,J)=>h._(this,void 0,void 0,(function*(){this.referrer=J})))),this.actor.registerMessageHandler("SRPS",((H,J)=>this._syncRTLPluginState(H,J))),this.actor.registerMessageHandler("IS",((H,J)=>h._(this,void 0,void 0,(function*(){this.self.importScripts(J)})))),this.actor.registerMessageHandler("SI",((H,J)=>this._setImages(H,J))),this.actor.registerMessageHandler("UL",((H,J)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(H).update(J.layers,J.removedIds,this._getGlobalState(H))})))),this.actor.registerMessageHandler("UGS",((H,J)=>h._(this,void 0,void 0,(function*(){const fe=this._getGlobalState(H);for(const ge in J)fe[ge]=J[ge]})))),this.actor.registerMessageHandler("SL",((H,J)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(H).replace(J,this._getGlobalState(H))}))))}_getGlobalState(Z){let H=this.globalStates.get(Z);return H||(H={},this.globalStates.set(Z,H)),H}_setImages(Z,H){return h._(this,void 0,void 0,(function*(){this.availableImages[Z]=H;for(const J in this.workerSources[Z]){const fe=this.workerSources[Z][J];for(const ge in fe)fe[ge].availableImages=H}}))}_syncRTLPluginState(Z,H){return h._(this,void 0,void 0,(function*(){return yield h.d4.syncState(H,this.self.importScripts)}))}_getAvailableImages(Z){let H=this.availableImages[Z];return H||(H=[]),H}_getLayerIndex(Z){let H=this.layerIndexes[Z];return H||(H=this.layerIndexes[Z]=new s),H}_getWorkerSource(Z,H,J){if(this.workerSources[Z]||(this.workerSources[Z]={}),this.workerSources[Z][H]||(this.workerSources[Z][H]={}),!this.workerSources[Z][H][J]){const fe={sendAsync:(ge,Se)=>(ge.targetMapId=Z,this.actor.sendAsync(ge,Se))};switch(H){case"vector":this.workerSources[Z][H][J]=new U(fe,this._getLayerIndex(Z),this._getAvailableImages(Z));break;case"geojson":this.workerSources[Z][H][J]=new Fr(fe,this._getLayerIndex(Z),this._getAvailableImages(Z));break;default:this.workerSources[Z][H][J]=new this.externalWorkerSourceTypes[H](fe,this._getLayerIndex(Z),this._getAvailableImages(Z))}}return this.workerSources[Z][H][J]}_getDEMWorkerSource(Z,H){return this.demWorkerSources[Z]||(this.demWorkerSources[Z]={}),this.demWorkerSources[Z][H]||(this.demWorkerSources[Z][H]=new _e),this.demWorkerSources[Z][H]}}return h.i(self)&&(self.worker=new Sn(self)),Sn})),u("index",["exports","./shared"],(function(h,s){var w="5.15.0";function T(){var v=new s.A(4);return s.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}let E,z,O;const W={frame(v,t,o){const p=requestAnimationFrame((x=>{g(),t(x)})),{unsubscribe:g}=s.s(v.signal,"abort",(()=>{g(),cancelAnimationFrame(p),o(new s.a(v.signal.reason))}),!1)},frameAsync(v){return new Promise(((t,o)=>{this.frame(v,t,o)}))},getImageData(v,t=0){return this.getImageCanvasContext(v).getImageData(-t,-t,v.width+2*t,v.height+2*t)},getImageCanvasContext(v){const t=window.document.createElement("canvas"),o=t.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return t.width=v.width,t.height=v.height,o.drawImage(v,0,0,v.width,v.height),o},resolveURL:v=>(E||(E=document.createElement("a")),E.href=v,E.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return O!==void 0?O:!!matchMedia&&(z==null&&(z=matchMedia("(prefers-reduced-motion: reduce)")),z.matches)},set prefersReducedMotion(v){O=v}},Q=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(v){this._frozenAt=v}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function te(){return Q.getCurrentTime()}class U{static testProp(t){if(!U.docStyle)return t[0];for(let o=0;o<t.length;o++)if(t[o]in U.docStyle)return t[o];return t[0]}static create(t,o,p){const g=window.document.createElement(t);return o!==void 0&&(g.className=o),p&&p.appendChild(g),g}static createNS(t,o){return window.document.createElementNS(t,o)}static disableDrag(){U.docStyle&&U.selectProp&&(U.userSelect=U.docStyle[U.selectProp],U.docStyle[U.selectProp]="none")}static enableDrag(){U.docStyle&&U.selectProp&&(U.docStyle[U.selectProp]=U.userSelect)}static setTransform(t,o){t.style[U.transformProp]=o}static addEventListener(t,o,p,g={}){t.addEventListener(o,p,"passive"in g?g:g.capture)}static removeEventListener(t,o,p,g={}){t.removeEventListener(o,p,"passive"in g?g:g.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",U.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",U.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",U.suppressClickInternal,!0)}),0)}static getScale(t){const o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}static getPoint(t,o,p){const g=o.boundingClientRect;return new s.P((p.clientX-g.left)/o.x-t.clientLeft,(p.clientY-g.top)/o.y-t.clientTop)}static mousePos(t,o){const p=U.getScale(t);return U.getPoint(t,p,o)}static touchPos(t,o){const p=[],g=U.getScale(t);for(let x=0;x<o.length;x++)p.push(U.getPoint(t,g,o[x]));return p}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const o=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),p=o.querySelectorAll("script");for(const g of p)g.remove();return U.clean(o),o.innerHTML}static isPossiblyDangerous(t,o){const p=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!p.includes("javascript:")&&!p.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const o=t.children;for(const p of o)U.removeAttributes(p),U.clean(p)}static removeAttributes(t){for(const{name:o,value:p}of t.attributes)U.isPossiblyDangerous(o,p)&&t.removeAttribute(o)}}U.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,U.selectProp=U.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),U.transformProp=U.testProp(["transform","WebkitTransform"]);const _e={supported:!1,testSupport:function(v){!Ae&&xe&&(ze?qe(v):pe=v)}};let pe,xe,Ae=!1,ze=!1;function qe(v){const t=v.createTexture();v.bindTexture(v.TEXTURE_2D,t);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,xe),v.isContextLost())return;_e.supported=!0}catch{}v.deleteTexture(t),Ae=!0}var Ne;typeof document<"u"&&(xe=document.createElement("img"),xe.onload=()=>{pe&&qe(pe),pe=null,ze=!0},xe.onerror=()=>{Ae=!0,pe=null},xe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(v){let t,o,p,g;v.resetRequestQueue=()=>{t=[],o=0,p=0,g={}},v.addThrottleControl=C=>{const A=p++;return g[A]=C,A},v.removeThrottleControl=C=>{delete g[C],k()},v.getImage=(C,A,R=!0)=>new Promise(((B,$)=>{_e.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),s.e(C,{type:"image"}),t.push({abortController:A,requestParameters:C,supportImageRefresh:R,state:"queued",onError:G=>{$(G)},onSuccess:G=>{B(G)}}),k()}));const x=C=>s._(this,void 0,void 0,(function*(){C.state="running";const{requestParameters:A,supportImageRefresh:R,onError:B,onSuccess:$,abortController:G}=C,K=R===!1&&!s.i(self)&&!s.g(A.url)&&(!A.headers||Object.keys(A.headers).reduce(((ne,oe)=>ne&&oe==="accept"),!0));o++;const ie=K?M(A,G):s.m(A,G);try{const ne=yield ie;delete C.abortController,C.state="completed",ne.data instanceof HTMLImageElement||s.b(ne.data)?$(ne):ne.data&&$({data:yield(ae=ne.data,typeof createImageBitmap=="function"?s.f(ae):s.h(ae)),cacheControl:ne.cacheControl,expires:ne.expires})}catch(ne){delete C.abortController,B(ne)}finally{o--,k()}var ae})),k=()=>{const C=(()=>{for(const A of Object.keys(g))if(g[A]())return!0;return!1})()?s.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let A=o;A<C&&t.length>0;A++){const R=t.shift();R.abortController.signal.aborted?A--:x(R)}},M=(C,A)=>new Promise(((R,B)=>{const $=new Image,G=C.url,K=C.credentials;K&&K==="include"?$.crossOrigin="use-credentials":(K&&K==="same-origin"||!s.d(G))&&($.crossOrigin="anonymous"),A.signal.addEventListener("abort",(()=>{$.src="",B(new s.a(A.signal.reason))})),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,R({data:$})},$.onerror=()=>{$.onerror=$.onload=null,A.signal.aborted||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=G}))})(Ne||(Ne={})),Ne.resetRequestQueue();class He{constructor(t){this._transformRequestFn=t??null}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function rt(v){const t=[];if(typeof v=="string")t.push({id:"default",url:v});else if(v&&v.length>0){const o=[];for(const{id:p,url:g}of v){const x=`${p}${g}`;o.indexOf(x)===-1&&(o.push(x),t.push({id:p,url:g}))}}return t}function lt(v,t,o){try{const p=new URL(v);return p.pathname+=`${t}${o}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${v}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ct(v){const{userImage:t}=v;return!!(t&&t.render&&t.render())&&(v.data.replace(new Uint8Array(t.data.buffer)),!0)}class mt extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const t of Object.keys(this.images))this.removeImage(t);this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,promiseResolve:p}of this.requestors)p(this._getImagesForIds(o));this.requestors=[]}}getImage(t){const o=this.images[t];if(o&&!o.data&&o.spriteData){const p=o.spriteData;o.data=new s.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),o.spriteData=null}return o}addImage(t,o){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let p=!0;const g=o.data||o.spriteData;return this._validateStretch(o.stretchX,g&&g.width)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "stretchX" value`))),p=!1),this._validateStretch(o.stretchY,g&&g.height)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "stretchY" value`))),p=!1),this._validateContent(o.content,o)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "content" value`))),p=!1),p}_validateStretch(t,o){if(!t)return!0;let p=0;for(const g of t){if(g[0]<p||g[1]<g[0]||o<g[1])return!1;p=g[1]}return!0}_validateContent(t,o){if(!t)return!0;if(t.length!==4)return!1;const p=o.spriteData,g=p&&p.width||o.data.width,x=p&&p.height||o.data.height;return!(t[0]<0||g<t[0]||t[1]<0||x<t[1]||t[2]<0||g<t[2]||t[3]<0||x<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,o,p=!0){const g=this.getImage(t);if(p&&(g.data.width!==o.data.width||g.data.height!==o.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=g.version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((o,p)=>{let g=!0;if(!this.isLoaded())for(const x of t)this.images[x]||(g=!1);this.isLoaded()||g?o(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:o})}))}_getImagesForIds(t){const o={};for(const p of t){let g=this.getImage(p);g||(this.fire(new s.l("styleimagemissing",{id:p})),g=this.getImage(p)),g?o[p]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:s.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],p=this.getImage(t);if(!p)return null;if(o&&o.position.version===p.version)return o.position;if(o)o.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new s.I(g,p);this.patterns[t]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const x in this.patterns)t.push(this.patterns[x].bin);const{w:o,h:p}=s.p(t),g=this.atlasImage;g.resize({width:o||1,height:p||1});for(const x in this.patterns){const{bin:k}=this.patterns[x],M=k.x+1,C=k.y+1,A=this.getImage(x).data,R=A.width,B=A.height;s.R.copy(A,g,{x:0,y:0},{x:M,y:C},{width:R,height:B}),s.R.copy(A,g,{x:0,y:B-1},{x:M,y:C-1},{width:R,height:1}),s.R.copy(A,g,{x:0,y:0},{x:M,y:C+B},{width:R,height:1}),s.R.copy(A,g,{x:R-1,y:0},{x:M-1,y:C},{width:1,height:B}),s.R.copy(A,g,{x:0,y:0},{x:M+R,y:C},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const p=this.getImage(o);p||s.w(`Image with ID: "${o}" was not found`),ct(p)&&this.updateImage(o,p)}}cloneImages(){const t={};for(const o in this.images){const p=this.images[o];t[o]=Object.assign(Object.assign({},p),{data:p.data?p.data.clone():null})}return t}}const jt=1e20;function Ei(v,t,o,p,g,x,k,M,C){for(let A=t;A<t+p;A++)Tt(v,o*x+A,x,g,k,M,C);for(let A=o;A<o+g;A++)Tt(v,A*x+t,1,p,k,M,C)}function Tt(v,t,o,p,g,x,k){x[0]=0,k[0]=-jt,k[1]=jt,g[0]=v[t];for(let M=1,C=0,A=0;M<p;M++){g[M]=v[t+M*o];const R=M*M;do{const B=x[C];A=(g[M]-g[B]+R-B*B)/(M-B)/2}while(A<=k[C]&&--C>-1);C++,x[C]=M,k[C]=A,k[C+1]=jt}for(let M=0,C=0;M<p;M++){for(;k[C+1]<M;)C++;const A=x[C],R=M-A;v[t+M*o]=g[A]+R*R}}const Rt=s.v.layout_symbol["text-font"].default.join(",");class Mt{constructor(t,o,p){this.requestManager=t,this.localIdeographFontFamily=o,this.entries={},this.lang=p}setURL(t){this.url=t}getGlyphs(t){return s._(this,void 0,void 0,(function*(){const o=[];for(const x in t)for(const k of t[x])o.push(this._getAndCacheGlyphsPromise(x,k));const p=yield Promise.all(o),g={};for(const{stack:x,id:k,glyph:M}of p)g[x]||(g[x]={}),g[x][k]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return g}))}_getAndCacheGlyphsPromise(t,o){return s._(this,void 0,void 0,(function*(){let p=this.entries[t];p||(p=this.entries[t]={glyphs:{},requests:{},ranges:{}});let g=p.glyphs[o];return g!==void 0?{stack:t,id:o,glyph:g}:!this.url||this._charUsesLocalIdeographFontFamily(o)?(g=p.glyphs[o]=this._drawGlyph(p,t,o),{stack:t,id:o,glyph:g}):yield this._downloadAndCacheRangePromise(t,o)}))}_downloadAndCacheRangePromise(t,o){return s._(this,void 0,void 0,(function*(){const p=this.entries[t],g=Math.floor(o/256);if(p.ranges[g])return{stack:t,id:o,glyph:null};if(!p.requests[g]){const x=Mt.loadGlyphRange(t,g,this.url,this.requestManager);p.requests[g]=x}try{const x=yield p.requests[g];for(const k in x)p.glyphs[+k]=x[+k];return p.ranges[g]=!0,{stack:t,id:o,glyph:x[o]||null}}catch(x){const k=p.glyphs[o]=this._drawGlyph(p,t,o);return this._warnOnMissingGlyphRange(k,g,o,x),{stack:t,id:o,glyph:k}}}))}_warnOnMissingGlyphRange(t,o,p,g){const x=256*o,k=x+255,M=p.toString(16).padStart(4,"0").toUpperCase();s.w(`Unable to load glyph range ${o}, ${x}-${k}. Rendering codepoint U+${M} locally instead. ${g}`)}_charUsesLocalIdeographFontFamily(t){return!!this.localIdeographFontFamily&&s.q(t)}_drawGlyph(t,o,p){const g=o===Rt&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(p),x=g?"ideographTinySDF":"tinySDF";t[x]||(t[x]=this._createTinySDF(g?this.localIdeographFontFamily:o));const k=t[x].draw(String.fromCodePoint(p));return{id:p,bitmap:new s.r({width:k.width||60,height:k.height||60},k.data),metrics:{width:k.glyphWidth/2||24,height:k.glyphHeight/2||24,left:k.glyphLeft/2+.5||0,top:k.glyphTop/2-27.5||-8,advance:k.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(t){const o=t?t.split(","):[];o.push("sans-serif");const p=o.map((g=>/[-\w]+/.test(g)?g:`'${CSS.escape(g)}'`)).join(",");return new Mt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:this._fontWeight(o[0]),fontStyle:this._fontStyle(o[0]),lang:this.lang})}_fontStyle(t){return/italic/i.test(t)?"italic":/oblique/i.test(t)?"oblique":"normal"}_fontWeight(t){const o={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let p;for(const[g,x]of Object.entries(o))new RegExp(`\\b${g}\\b`,"i").test(t)&&(p=`${x}`);return p}destroy(){for(const t in this.entries){const o=this.entries[t];o.tinySDF&&(o.tinySDF=null),o.ideographTinySDF&&(o.ideographTinySDF=null),o.glyphs={},o.requests={},o.ranges={}}this.entries={}}}Mt.loadGlyphRange=function(v,t,o,p){return s._(this,void 0,void 0,(function*(){const g=256*t,x=g+255,k=p.transformRequest(o.replace("{fontstack}",v).replace("{range}",`${g}-${x}`),"Glyphs"),M=yield s.n(k,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${t}, ${g}-${x}`);const C={};for(const A of s.o(M.data))C[A.id]=A;return C}))},Mt.TinySDF=class{constructor({fontSize:v=24,buffer:t=3,radius:o=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:k="normal",lang:M=null}={}){this.buffer=t,this.cutoff=p,this.radius=o,this.lang=M;const C=this.size=v+4*t,A=this._createCanvas(C),R=this.ctx=A.getContext("2d",{willReadFrequently:!0});R.font=`${k} ${x} ${v}px ${g}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(v){const t=document.createElement("canvas");return t.width=t.height=v,t}draw(v){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(v),k=Math.ceil(o),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),C=Math.min(this.size-this.buffer,k+Math.ceil(p)),A=M+2*this.buffer,R=C+2*this.buffer,B=Math.max(A*R,0),$=new Uint8ClampedArray(B),G={data:$,width:A,height:R,glyphWidth:M,glyphHeight:C,glyphTop:k,glyphLeft:0,glyphAdvance:t};if(M===0||C===0)return G;const{ctx:K,buffer:ie,gridInner:ae,gridOuter:ne}=this;this.lang&&(K.lang=this.lang),K.clearRect(ie,ie,M,C),K.fillText(v,ie,ie+k);const oe=K.getImageData(ie,ie,M,C);ne.fill(jt,0,B),ae.fill(0,0,B);for(let he=0;he<C;he++)for(let re=0;re<M;re++){const de=oe.data[4*(he*M+re)+3]/255;if(de===0)continue;const me=(he+ie)*A+re+ie;if(de===1)ne[me]=0,ae[me]=jt;else{const ue=.5-de;ne[me]=ue>0?ue*ue:0,ae[me]=ue<0?ue*ue:0}}Ei(ne,0,0,A,R,A,this.f,this.v,this.z),Ei(ae,ie,ie,M,C,A,this.f,this.v,this.z);for(let he=0;he<B;he++){const re=Math.sqrt(ne[he])-Math.sqrt(ae[he]);$[he]=Math.round(255-255*(re/this.radius+this.cutoff))}return G}};class Li{constructor(){this.specification=s.u.light.position}possiblyEvaluate(t,o){return s.F(t.expression.evaluate(o))}interpolate(t,o,p){return{x:s.G.number(t.x,o.x,p),y:s.G.number(t.y,o.y,p),z:s.G.number(t.z,o.z,p)}}}let dt;class fn extends s.E{constructor(t){super(),dt=dt||new s.t({anchor:new s.D(s.u.light.anchor),position:new Li,color:new s.D(s.u.light.color),intensity:new s.D(s.u.light.intensity)}),this._transitionable=new s.x(dt,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(s.y,t,o))for(const p in t){const g=t[p];p.endsWith(s.z)?this._transitionable.setTransition(p.slice(0,-s.z.length),g):this._transitionable.setValue(p,g)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,p){return(!p||p.validate!==!1)&&s.B(this,t.call(s.C,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.u}))}}const sn=new s.t({"sky-color":new s.D(s.u.sky["sky-color"]),"horizon-color":new s.D(s.u.sky["horizon-color"]),"fog-color":new s.D(s.u.sky["fog-color"]),"fog-ground-blend":new s.D(s.u.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.u.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.u.sky["atmosphere-blend"])});class pn extends s.E{constructor(t){super(),this._transitionable=new s.x(sn,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0))}setSky(t,o={}){if(!this._validate(s.J,t,o)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in t){const g=t[p];p.endsWith(s.z)?this._transitionable.setTransition(p.slice(0,-s.z.length),g):this._transitionable.setValue(p,g)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,p={}){return p?.validate!==!1&&s.B(this,t.call(s.C,s.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.u})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class zn{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,o){const p=t.join(",")+String(o);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(t,o)),this.dashEntry[p]}getDashRanges(t,o,p){const g=[];let x=t.length%2==1?-t[t.length-1]*p:0,k=t[0]*p,M=!0;g.push({left:x,right:k,isDash:M,zeroLength:t[0]===0});let C=t[0];for(let A=1;A<t.length;A++){M=!M;const R=t[A];x=C*p,C+=R,k=C*p,g.push({left:x,right:k,isDash:M,zeroLength:R===0})}return g}addRoundDash(t,o,p){const g=o/2;for(let x=-p;x<=p;x++){const k=this.width*(this.nextRow+p+x);let M=0,C=t[M];for(let A=0;A<this.width;A++){A/C.right>1&&(C=t[++M]);const R=Math.abs(A-C.left),B=Math.abs(A-C.right),$=Math.min(R,B);let G;const K=x/p*(g+1);if(C.isDash){const ie=g-Math.abs(K);G=Math.sqrt($*$+ie*ie)}else G=g-Math.sqrt($*$+K*K);this.data[k+A]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(t){for(let M=t.length-1;M>=0;--M){const C=t[M],A=t[M+1];C.zeroLength?t.splice(M,1):A&&A.isDash===C.isDash&&(A.left=C.left,t.splice(M,1))}const o=t[0],p=t[t.length-1];o.isDash===p.isDash&&(o.left=p.left-this.width,p.right=o.right+this.width);const g=this.width*this.nextRow;let x=0,k=t[x];for(let M=0;M<this.width;M++){M/k.right>1&&(k=t[++x]);const C=Math.abs(M-k.left),A=Math.abs(M-k.right),R=Math.min(C,A);this.data[g+M]=Math.max(0,Math.min(255,(k.isDash?R:-R)+128))}}addDash(t,o){const p=o?7:0,g=2*p+1;if(this.nextRow+g>this.height)return s.w("LineAtlas out of space"),null;let x=0;for(let M=0;M<t.length;M++)x+=t[M];if(x!==0){const M=this.width/x,C=this.getDashRanges(t,this.width,M);o?this.addRoundDash(C,M,p):this.addRegularDash(C)}const k={y:this.nextRow+p,height:2*p,width:x};return this.nextRow+=g,this.dirty=!0,k}bind(t){const o=t.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const Ji="maplibre_preloaded_worker_pool";class oi{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<oi.workerCount;)this.workers.push(new Worker(s.c.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((o=>{o.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ji]}numActive(){return Object.keys(this.active).length}}const Di=Math.floor(W.hardwareConcurrency/2);let Qn,Qi;function ba(){return Qn||(Qn=new oi),Qn}oi.workerCount=s.K(globalThis)?Math.max(Math.min(Di,3),1):1;class kn{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=o;const p=this.workerPool.acquire(o);for(let g=0;g<p.length;g++){const x=new s.L(p[g],o);x.name=`Worker ${g}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,o){const p=[];for(const g of this.actors)p.push(g.sendAsync({type:t,data:o}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((o=>{o.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,o){for(const p of this.actors)p.registerMessageHandler(t,o)}unregisterMessageHandler(t){for(const o of this.actors)o.unregisterMessageHandler(t)}}function er(){return Qi||(Qi=new kn(ba(),s.M),Qi.registerMessageHandler("GR",((v,t,o)=>s.m(t,o)))),Qi}function Rn(v,t){const o=s.N();return s.O(o,o,[1,1,0]),s.Q(o,o,[.5*v.width,.5*v.height,1]),v.calculatePosMatrix?s.S(o,o,v.calculatePosMatrix(t.toUnwrapped())):o}function Es(v,t,o,p,g,x,k){var M;const C=(function($,G,K){if($)for(const ie of $){const ae=G[ie];if(ae&&ae.source===K&&ae.type==="fill-extrusion")return!0}else for(const ie in G){const ae=G[ie];if(ae.source===K&&ae.type==="fill-extrusion")return!0}return!1})((M=g?.layers)!==null&&M!==void 0?M:null,t,v.id),A=x.maxPitchScaleFactor(),R=v.tilesIn(p,A,C);R.sort(Ui);const B=[];for(const $ of R)B.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(t,o,v.getState(),$.queryGeometry,$.cameraQueryGeometry,$.scale,g,x,A,Rn(x,$.tileID),k?(G,K)=>k($.tileID,G,K):void 0)});return(function($,G){for(const K in $)for(const ie of $[K])Un(ie,G);return $})((function($){const G={},K={};for(const ie of $){const ae=ie.queryResults,ne=ie.wrappedTileID,oe=K[ne]=K[ne]||{};for(const he in ae){const re=ae[he],de=oe[he]=oe[he]||{},me=G[he]=G[he]||[];for(const ue of re)de[ue.featureIndex]||(de[ue.featureIndex]=!0,me.push(ue))}}return G})(B),v)}function Ui(v,t){const o=v.tileID,p=t.tileID;return o.overscaledZ-p.overscaledZ||o.canonical.y-p.canonical.y||o.wrap-p.wrap||o.canonical.x-p.canonical.x}function Un(v,t){const o=v.feature,p=t.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=p}function fa(v,t,o){return s._(this,void 0,void 0,(function*(){let p=v;if(v.url?p=(yield s.j(t.transformRequest(v.url,"Source"),o)).data:yield W.frameAsync(o),!p)return null;const g=s.U(s.e(p,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(g.vectorLayerIds=p.vector_layers.map((x=>x.id))),g}))}class fi{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof s.V?new s.V(t.lng,t.lat):s.V.convert(t),this}setSouthWest(t){return this._sw=t instanceof s.V?new s.V(t.lng,t.lat):s.V.convert(t),this}extend(t){const o=this._sw,p=this._ne;let g,x;if(t instanceof s.V)g=t,x=t;else{if(!(t instanceof fi))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(fi.convert(t)):this.extend(s.V.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(s.V.convert(t)):this;if(g=t._sw,x=t._ne,!g||!x)return this}return o||p?(o.lng=Math.min(g.lng,o.lng),o.lat=Math.min(g.lat,o.lat),p.lng=Math.max(x.lng,p.lng),p.lat=Math.max(x.lat,p.lat)):(this._sw=new s.V(g.lng,g.lat),this._ne=new s.V(x.lng,x.lat)),this}getCenter(){return new s.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.V(this.getWest(),this.getNorth())}getSouthEast(){return new s.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:p}=s.V.convert(t);let g=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}intersects(t){if(!((t=fi.convert(t)).getNorth()>=this.getSouth()&&t.getSouth()<=this.getNorth()))return!1;const o=Math.abs(this.getEast()-this.getWest()),p=Math.abs(t.getEast()-t.getWest());if(o>=360||p>=360)return!0;const g=s.W(this.getWest(),-180,180),x=s.W(this.getEast(),-180,180),k=s.W(t.getWest(),-180,180),M=s.W(t.getEast(),-180,180),C=g>=x,A=k>=M;return!(!C||!A)||(C?M>=g||k<=x:A?x>=k||g<=M:k<=x&&M>=g)}static convert(t){return t instanceof fi?t:t&&new fi(t)}static fromLngLat(t,o=0){const p=360*o/40075017,g=p/Math.cos(Math.PI/180*t.lat);return new fi(new s.V(t.lng-g,t.lat-p),new s.V(t.lng+g,t.lat+p))}adjustAntiMeridian(){const t=new s.V(this._sw.lng,this._sw.lat),o=new s.V(this._ne.lng,this._ne.lat);return new fi(t,t.lng>o.lng?new s.V(o.lng+360,o.lat):o)}}class za{constructor(t,o,p){this.bounds=fi.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=p||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),p=Math.floor(s.Y(this.bounds.getWest())*o),g=Math.floor(s.X(this.bounds.getNorth())*o),x=Math.ceil(s.Y(this.bounds.getEast())*o),k=Math.ceil(s.X(this.bounds.getSouth())*o);return t.x>=p&&t.x<x&&t.y>=g&&t.y<k}}class tr extends s.E{constructor(t,o,p,g){if(super(),this.id=t,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.U(o,["url","scheme","tileSize","promoteId","encoding"])),this._options=s.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield fa(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),t&&(s.e(this,t),t.bounds&&(this.tileBounds=new za(t.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,s.Z(t)||this.fire(new s.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(t){return s._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(o,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(t)};p.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((x,k)=>{t.reloadPromise={resolve:x,reject:k}}))}else t.actor=this.dispatcher.getActor(),g="LT";t.abortController=new AbortController;try{const x=yield t.actor.sendAsync({type:g,data:p},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,x)}catch(x){if(delete t.abortController,t.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(t,null)}}))}_getOverzoomParameters(t){if(t.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const o=t.tileID.scaledTo(this.maxzoom).canonical,p=o.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:o,overzoomRequest:this.map._requestManager.transformRequest(p,"Tile")}}_afterTileLoadWorkerResponse(t,o){if(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),t.reloadPromise){const p=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(p.resolve).catch(p.reject)}}abortTile(t){return s._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return s._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Rr extends s.E{constructor(t,o,p,g){super(),this.id=t,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},o),s.e(this,s.U(o,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield fa(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(s.e(this,o),o.bounds&&(this.tileBounds=new za(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(o){this._tileJSONRequest=null,this._loaded=!0,s.Z(o)||this.fire(new s.k(o))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return s.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return s._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const p=yield Ne.getImage(this.map._requestManager.transformRequest(o,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&t.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const g=this.map.painter.context,x=g.gl,k=p.data;t.texture=this.map.painter.getTileTexture(k.width),t.texture?t.texture.update(k,{useMipmap:!0}):(t.texture=new s.T(g,k,x.RGBA,{useMipmap:!0}),t.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(p){if(delete t.abortController,t.aborted)t.state="unloaded";else if(p)throw t.state="errored",p}}))}abortTile(t){return s._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return s._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class Ra extends Rr{constructor(t,o,p,g){super(t,o,p,g),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(t){return s._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(o,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const g=yield Ne.getImage(p,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(g&&g.data){const x=g.data;this.map._refreshExpiredTiles&&(g.cacheControl||g.expires)&&t.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const k=s.b(x)&&s.$()?x:yield this.readImageNow(x),M={type:this.type,uid:t.uid,source:this.id,rawImageData:k,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const C=yield t.actor.sendAsync({type:"LDT",data:M});t.dem=C,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(g){if(delete t.abortController,t.aborted)t.state="unloaded";else if(g)throw t.state="errored",g}}))}readImageNow(t){return s._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&s.a0()){const o=t.width+2,p=t.height+2;try{return new s.R({width:o,height:p},yield s.a1(t,-1,-1,o,p))}catch{}}return W.getImageData(t,1)}))}_getNeighboringTiles(t){const o=t.canonical,p=Math.pow(2,o.z),g=(o.x-1+p)%p,x=o.x===0?t.wrap-1:t.wrap,k=(o.x+1+p)%p,M=o.x+1===p?t.wrap+1:t.wrap,C={};return C[new s.a2(t.overscaledZ,x,o.z,g,o.y).key]={backfilled:!1},C[new s.a2(t.overscaledZ,M,o.z,k,o.y).key]={backfilled:!1},o.y>0&&(C[new s.a2(t.overscaledZ,x,o.z,g,o.y-1).key]={backfilled:!1},C[new s.a2(t.overscaledZ,t.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},C[new s.a2(t.overscaledZ,M,o.z,k,o.y-1).key]={backfilled:!1}),o.y+1<p&&(C[new s.a2(t.overscaledZ,x,o.z,g,o.y+1).key]={backfilled:!1},C[new s.a2(t.overscaledZ,t.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},C[new s.a2(t.overscaledZ,M,o.z,k,o.y+1).key]={backfilled:!1}),C}unloadTile(t){return s._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}function ea(v){return v.type==="GeometryCollection"?v.geometries.map((t=>t.coordinates)).flat(1/0):v.coordinates.flat(1/0)}function Fr(v){const t=new fi;let o;switch(v.type){case"FeatureCollection":o=v.features.map((p=>ea(p.geometry))).flat(1/0);break;case"Feature":o=ea(v.geometry);break;default:o=ea(v)}if(o.length==0)return t;for(let p=0;p<o.length-1;p+=2)t.extend([o[p],o[p+1]]);return t}class jr extends s.E{constructor(t,o,p,g){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:o.data},this.actor=p.getActor(),this.setEventedParent(g),this._data=typeof o.data=="string"?{url:o.data}:{geojson:o.data},this._options=s.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:s.a5,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(o.clusterMaxZoom),minPoints:Math.max(2,o.clusterMinPoints||2),extent:s.a5,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(t){return t*(s.a5/this.tileSize)}_getClusterMaxZoom(t){const o=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${o}"`),o}load(){return s._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t,o){this._data=typeof t=="string"?{url:t}:{geojson:t},this._pendingWorkerUpdate={data:t};const p=this._updateWorkerData();return o?p:this}updateData(t,o){this._pendingWorkerUpdate.diff=s.a6(this._pendingWorkerUpdate.diff,t);const p=this._updateWorkerData();return o?p:this}getData(){return s._(this,void 0,void 0,(function*(){const t=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getBounds(){return s._(this,void 0,void 0,(function*(){return Fr(yield this.getData())}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,o,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:o,offset:p}})}_updateWorkerData(){return s._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void s.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:t,diff:o}=this._pendingWorkerUpdate,p=s.e({type:this.type},this.workerOptions);t!==void 0?(typeof t=="string"?(p.request=this.map._requestManager.transformRequest(W.resolveURL(t),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=t,this._pendingWorkerUpdate.data=void 0):o&&(p.dataDiff=o,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:p});if(this._isUpdatingWorker=!1,this._removed||g.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));g.data&&(this._data={geojson:g.data});const x=this._applyDiffToSource(o),k=this._getShouldReloadTileOptions(x);let M=null;g.resourceTiming&&g.resourceTiming[this.id]&&(M=g.resourceTiming[this.id].slice(0));const C={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&s.e(C,{resourceTiming:M}),this.fire(new s.l("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},C),{sourceDataType:"content",shouldReloadTileOptions:k})))}catch(g){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(g))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(t){if(!t)return;const o=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const g=s.a7(this._data.geojson,o);if(!g)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:g}}if(!this._data.updateable)return;const p=s.a8(this._data.updateable,t,o);return t.removeAll||this._options.cluster?void 0:p}_getShouldReloadTileOptions(t){if(t)return{affectedBounds:t.filter(Boolean).map((o=>Fr(o)))}}shouldReloadTile(t,{affectedBounds:o}){if(t.state==="loading")return!0;if(t.state==="unloaded")return!1;const{buffer:p,extent:g}=this.workerOptions.geojsonVtOptions,x=(function({x:k,y:M,z:C},A=0){const R=s.a3((k-A)/Math.pow(2,C)),B=s.a4((M+1+A)/Math.pow(2,C)),$=s.a3((k+1+A)/Math.pow(2,C)),G=s.a4((M-A)/Math.pow(2,C));return new fi([R,B],[$,G])})(t.tileID.canonical,p/g);for(const k of o)if(x.intersects(k))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(t){return s._(this,void 0,void 0,(function*(){const o=t.actor?"RT":"LT";t.actor=this.actor;const p={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;const g=yield this.actor.sendAsync({type:o,data:p},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(g,this.map.painter,o==="RT")}))}abortTile(t){return s._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return s._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Sn extends s.E{constructor(t,o,p,g){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=p,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=o}load(t){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield Ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,t&&(this.coordinates=t),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,s.Z(o)||this.fire(new s.k(o))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const o=t.map(s.a9.fromLngLat);var p;return this.tileID=(function(g){const x=s.aa.fromPoints(g),k=x.width(),M=x.height(),C=Math.max(k,M),A=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),R=Math.pow(2,A);return new s.ac(A,Math.floor((x.minX+x.maxX)/2*R),Math.floor((x.minY+x.maxY)/2*R))})(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map((g=>this.tileID.getTilePoint(g)._round())),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.texture||(this.texture=new s.T(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,p=!0)}p&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return s._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:o,minY:p,maxX:g,maxY:x}=s.aa.fromPoints(t),k={};for(let M=0;M<=s.ab;M++){const C=Math.pow(2,M),A=Math.floor(o*C),R=Math.floor(p*C),B=Math.floor(g*C),$=Math.floor(x*C);k[M]={minTileX:A,minTileY:R,maxTileX:B,maxTileY:$}}return k}}class we extends Sn{constructor(t,o,p,g){super(t,o,p,g),this.roundZoom=!0,this.type="video",this.options=o}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const o of t.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield s.ad(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new s.k(o))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const o=this.video.seekable;t<o.start(0)||t>o.end(0)?this.fire(new s.k(new s.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,o=t.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(t,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,p=!0)}p&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Z extends Sn{constructor(t,o,p,g){super(t,o,p,g),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some((x=>!Array.isArray(x)||x.length!==2||x.some((k=>typeof k!="number"))))||this.fire(new s.k(new s.ae(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.ae(`sources.${t}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new s.k(new s.ae(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.ae(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.ae(`sources.${t}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,p=o.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new s.T(o,this.canvas,p.RGBA,{premultiply:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(const x in this.tiles){const k=this.tiles[x];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,g=!0)}g&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const H={},J=v=>{switch(v){case"geojson":return jr;case"image":return Sn;case"raster":return Rr;case"raster-dem":return Ra;case"vector":return tr;case"video":return we;case"canvas":return Z}return H[v]},fe="RTLPluginLoaded";class ge extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=er()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((o=>{throw this.status="error",o}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return s._(this,arguments,void 0,(function*(o,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=W.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return s._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(fe))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Se=null;function be(){return Se||(Se=new ge),Se}var ye,Le;(function(v){v[v.Base=0]="Base",v[v.Parent=1]="Parent"})(ye||(ye={})),(function(v){v[v.Departing=0]="Departing",v[v.Incoming=1]="Incoming"})(Le||(Le={}));class Ve{constructor(t,o){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=t,this.uid=s.af(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(t){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(t||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:t,fadingDirection:o,fadingParentID:p,fadeEndTime:g}){this.resetFadeLogic(),this.fadingRole=t,this.fadingDirection=o,this.fadingParentID=p,this.fadeEndTime=g}setSelfFadeLogic(t){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=t}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=te(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,o,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData,this.latestFeatureIndex.encoding=t.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(g,x){const k={};if(!x)return k;for(const M of g){const C=M.layerIds.map((A=>x.getLayer(A))).filter(Boolean);if(C.length!==0){M.layers=C,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map((A=>C.filter((R=>R.id===A))[0])));for(const A of C)k[A.id]=M}}return k})(t.buckets,o?.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof s.ah){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof s.ah&&x.hasRTLText){this.hasRTLText=!0,be().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(g).queryRadius(x))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),this.dashPositions=t.dashPositions}else this.collisionBoxArray=new s.ag}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,p,g,x,k,M,C,A,R,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:k,tileSize:this.tileSize,pixelPosMatrix:R,transform:C,params:M,queryPadding:this.queryPadding*A,getElevation:B},t,o,p):{}}querySourceFeatures(t,o){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),x=o&&o.sourceLayer?o.sourceLayer:"",k=g[s.ai]||g[x];if(!k)return;const M=s.aj(o?.filter,o?.globalState),{z:C,x:A,y:R}=this.tileID.canonical,B={z:C,x:A,y:R};for(let $=0;$<k.length;$++){const G=k.feature($);if(M.needGeometry){const ae=s.ak(G,!0);if(!M.filter(new s.H(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!M.filter(new s.H(this.tileID.overscaledZ),G))continue;const K=p.getId(G,x),ie=new s.al(G,C,A,R,K);ie.tile=B,t.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const p=s.am(t.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(o)if(this.expirationTime<o)g=!0;else{const x=this.expirationTime-o;x?this.expirationTime=p+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!o.style.hasLayer(g))continue;const x=this.buckets[g],k=x.layers[0].sourceLayer||s.ai,M=p[k],C=t[k];if(!M||!C||Object.keys(C).length===0)continue;x.update(C,M,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const A=o&&o.style&&o.style.getLayer(g);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(x)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<te()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(t){this.symbolFadeHoldUntil=te()+t}setDependencies(t,o){const p={};for(const g of o)p[g]=!0;this.dependencies[t]=p}hasDependency(t,o){for(const p of t){const g=this.dependencies[p];if(g){for(const x of o)if(g[x])return!0}}return!1}}class je{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,p){const g=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][g]=this.stateChanges[t][g]||{},s.e(this.stateChanges[t][g],p),this.deletedStates[t]===null){this.deletedStates[t]={};for(const x in this.state[t])x!==g&&(this.deletedStates[t][x]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][g]===null){this.deletedStates[t][g]={};for(const x in this.state[t][g])p[x]||(this.deletedStates[t][g][x]=null)}else for(const x in p)this.deletedStates[t]&&this.deletedStates[t][g]&&this.deletedStates[t][g][x]===null&&delete this.deletedStates[t][g][x]}removeFeatureState(t,o,p){if(this.deletedStates[t]===null)return;const g=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},p&&o!==void 0)this.deletedStates[t][g]!==null&&(this.deletedStates[t][g]=this.deletedStates[t][g]||{},this.deletedStates[t][g][p]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][g])for(p in this.deletedStates[t][g]={},this.stateChanges[t][g])this.deletedStates[t][g][p]=null;else this.deletedStates[t][g]=null;else this.deletedStates[t]=null}getState(t,o){const p=String(o),g=s.e({},(this.state[t]||{})[p],(this.stateChanges[t]||{})[p]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const x=this.deletedStates[t][o];if(x===null)return{};for(const k in x)delete g[k]}return g}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const k in this.stateChanges[g])this.state[g][k]||(this.state[g][k]={}),s.e(this.state[g][k],this.stateChanges[g][k]),x[k]=this.state[g][k];p[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const k in this.state[g])x[k]={},this.state[g][k]={};else for(const k in this.deletedStates[g]){if(this.deletedStates[g][k]===null)this.state[g][k]={};else for(const M of Object.keys(this.deletedStates[g][k]))delete this.state[g][k][M];x[k]=this.state[g][k]}p[g]=p[g]||{},s.e(p[g],x)}this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0&&t.setFeatureState(p,o)}}const Qe=89.25;function nt(v,t){const o=s.an(t.lat,-s.ao,s.ao);return new s.P(s.Y(t.lng)*v,s.X(o)*v)}function ht(v,t){return new s.a9(t.x/v,t.y/v).toLngLat()}function Vt(v){return v.cameraToCenterDistance*Math.min(.85*Math.tan(s.ap(90-v.pitch)),Math.tan(s.ap(Qe-v.pitch)))}function At(v,t){const o=v.canonical,p=t/s.aq(o.z),g=o.x+Math.pow(2,o.z)*v.wrap,x=s.ar(new Float64Array(16));return s.O(x,x,[g*p,o.y*p,0]),s.Q(x,x,[p/s.a5,p/s.a5,1]),x}function Me(v,t,o,p,g){const x=s.a9.fromLngLat(v,t),k=g*s.as(1,v.lat),{x:M,y:C,z:A}=Ut(o,p);return new s.a9(x.x+k*-M,x.y+k*-C,x.z+k*-A)}function Ut(v,t){const o=s.ap(v),p=s.ap(t),g=Math.cos(-o),x=Math.sin(o);return{x:x*Math.sin(p),y:-x*Math.cos(p),z:g}}function en(v,t,o){const p=t.intersectsFrustum(v);if(!o||p===0)return p;const g=t.intersectsPlane(o);return g===0?0:p===2&&g===2?2:1}function ft(v,t,o){let p=0;const g=(o-t)/10;for(let x=0;x<10;x++)p+=g*Math.pow(Math.cos(t+(x+.5)/10*(o-t)),v);return p}function Ot(v,t){return function(o,p,g,x,k){const M=2*((v-1)/s.at(Math.cos(s.ap(Qe-k))/Math.cos(s.ap(Qe)))-1),C=Math.acos(g/x),A=2*ft(M-1,0,s.ap(k/2)),R=Math.min(s.ap(Qe),C+s.ap(k/2)),B=ft(M-1,Math.min(R,C-s.ap(k/2)),R),$=Math.atan(p/g),G=Math.hypot(p,g);let K=o;return K+=s.at(x/G/Math.max(.5,Math.cos(s.ap(k/2)))),K+=M*s.at(Math.cos($))/2,K-=s.at(Math.max(1,B/A/t))/2,K}}const tn=Ot(9.314,3);function Qt(v,t){const o=(t.roundZoom?Math.round:Math.floor)(v.zoom+s.at(v.tileSize/t.tileSize));return Math.max(0,o)}function pi(v,t){const o=v.getCameraFrustum(),p=v.getClippingPlane(),g=v.screenPointToMercatorCoordinate(v.getCameraPoint()),x=s.a9.fromLngLat(v.center,v.elevation);g.z=x.z+Math.cos(v.pitchInRadians)*v.cameraToCenterDistance/v.worldSize;const k=v.getCoveringTilesDetailsProvider(),M=k.allowVariableZoom(v,t),C=Qt(v,t),A=t.minzoom||0,R=t.maxzoom!==void 0?t.maxzoom:v.maxZoom,B=Math.min(Math.max(0,C),R),$=Math.pow(2,B),G=[$*g.x,$*g.y,0],K=[$*x.x,$*x.y,0],ie=Math.hypot(x.x-g.x,x.y-g.y),ae=Math.abs(x.z-g.z),ne=Math.hypot(ie,ae),oe=de=>({zoom:0,x:0,y:0,wrap:de,fullyVisible:!1}),he=[],re=[];if(v.renderWorldCopies&&k.allowWorldCopies())for(let de=1;de<=3;de++)he.push(oe(-de)),he.push(oe(de));for(he.push(oe(0));he.length>0;){const de=he.pop(),me=de.x,ue=de.y;let ve=de.fullyVisible;const De={x:me,y:ue,z:de.zoom},Te=k.getTileBoundingVolume(De,de.wrap,v.elevation,t);if(!ve){const We=en(o,Te,p);if(We===0)continue;ve=We===2}const Pe=k.distanceToTile2d(g.x,g.y,De,Te);let Ce=C;M&&(Ce=(t.calculateTileZoom||tn)(v.zoom+s.at(v.tileSize/t.tileSize),Pe,ae,ne,v.fov)),Ce=(t.roundZoom?Math.round:Math.floor)(Ce),Ce=Math.max(0,Ce);const Ge=Math.min(Ce,R);if(de.wrap=k.getWrap(x,De,de.wrap),de.zoom>=Ge){if(de.zoom<A)continue;const We=B-de.zoom,$e=G[0]-.5-(me<<We),Ke=G[1]-.5-(ue<<We),pt=t.reparseOverscaled?Math.max(de.zoom,Ce):de.zoom;re.push({tileID:new s.a2(de.zoom===R?pt:de.zoom,de.wrap,de.zoom,me,ue),distanceSq:s.au([K[0]-.5-me,K[1]-.5-ue]),tileDistanceToCamera:Math.sqrt($e*$e+Ke*Ke)})}else for(let We=0;We<4;We++)he.push({zoom:de.zoom+1,x:(me<<1)+We%2,y:(ue<<1)+(We>>1),wrap:de.wrap,fullyVisible:ve})}return re.sort(((de,me)=>de.distanceSq-me.distanceSq)).map((de=>de.tileID))}const Gt=s.aa.fromPoints([new s.P(0,0),new s.P(s.a5,s.a5)]);function Ri(v){return v==="raster"||v==="image"||v==="video"}function Ls(v,t,o,p,g,x,k){if(!t.hasData())return!1;const{tileID:M,fadingRole:C,fadingDirection:A,fadingParentID:R}=t;if(C===ye.Base&&A===Le.Incoming&&R)return o[R.key]=R,!0;const B=Math.max(M.overscaledZ-g,x);for(let $=M.overscaledZ-1;$>=B;$--){const G=M.scaledTo($),K=v.getLoadedTile(G);if(K)return t.setCrossFadeLogic({fadingRole:ye.Base,fadingDirection:Le.Incoming,fadingParentID:K.tileID,fadeEndTime:p+k}),K.setCrossFadeLogic({fadingRole:ye.Parent,fadingDirection:Le.Departing,fadeEndTime:p+k}),o[G.key]=G,!0}return!1}function Ds(v,t,o,p,g,x){if(!t.hasData())return!1;const k=t.tileID.children(g);let M=Ue(v,t,k,o,p,g,x);if(M)return!0;for(const C of k)Ue(v,t,C.children(g),o,p,g,x)&&(M=!0);return M}function Ue(v,t,o,p,g,x,k){if(o[0].overscaledZ>=x)return!1;let M=!1;for(const C of o){const A=v.getLoadedTile(C);if(!A)continue;const{fadingRole:R,fadingDirection:B,fadingParentID:$}=A;R===ye.Base&&B===Le.Departing&&$||(A.setCrossFadeLogic({fadingRole:ye.Base,fadingDirection:Le.Departing,fadingParentID:t.tileID,fadeEndTime:g+k}),t.setCrossFadeLogic({fadingRole:ye.Parent,fadingDirection:Le.Incoming,fadeEndTime:g+k})),p[C.key]=C,M=!0}return M}function mn(v,t,o,p){const g=v.tileID;return!!v.selfFading||!v.hasData()&&!!t.has(g)&&(v.setSelfFadeLogic(o+p),!0)}function gn(v,t){var o;v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let p=t.tileID.canonical.x-v.tileID.canonical.x;const g=t.tileID.canonical.y-v.tileID.canonical.y,x=Math.pow(2,v.tileID.canonical.z),k=t.tileID.key;p===0&&g===0||Math.abs(g)>1||(Math.abs(p)>1&&(Math.abs(p+x)===1?p+=x:Math.abs(p-x)===1&&(p-=x)),t.dem&&v.dem&&(v.dem.backfillBorder(t.dem,p,g),!((o=v.neighboringTiles)===null||o===void 0)&&o[k]&&(v.neighboringTiles[k].backfilled=!0)))}class Wo{constructor(){this._tiles={}}handleWrapJump(t){const o={};for(const p in this._tiles){const g=this._tiles[p];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+t),o[g.tileID.key]=g}this._tiles=o}setFeatureState(t,o){for(const p in this._tiles)this._tiles[p].setFeatureState(t,o)}getAllTiles(){return Object.values(this._tiles)}getAllIds(t=!1){return t?Object.values(this._tiles).map((o=>o.tileID)).sort(s.aw).map((o=>o.key)):Object.keys(this._tiles)}getTileById(t){return this._tiles[t]}setTile(t,o){this._tiles[t]=o}deleteTileById(t){delete this._tiles[t]}getLoadedTile(t){const o=this.getTileById(t.key);return o?.hasData()?o:null}isIdRenderable(t,o=!1){var p;return(p=this.getTileById(t))===null||p===void 0?void 0:p.isRenderable(o)}getRenderableIds(t=0,o){const p=[];for(const g of this.getAllIds())this.isIdRenderable(g,o)&&p.push(this.getTileById(g));return o?p.sort(((g,x)=>{const k=g.tileID,M=x.tileID,C=new s.P(k.canonical.x,k.canonical.y)._rotate(-t),A=new s.P(M.canonical.x,M.canonical.y)._rotate(-t);return k.overscaledZ-M.overscaledZ||A.y-C.y||A.x-C.x})).map((g=>g.tileID.key)):p.map((g=>g.tileID)).sort(s.aw).map((g=>g.key))}}class Gn extends s.E{constructor(t,o,p){super(),this.id=t,this.dispatcher=p,this.on("data",(g=>this._dataHandler(g))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((g,x,k,M)=>{const C=new(J(x.type))(g,x,k,M);if(C.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${C.id}`);return C})(t,o,p,this),this._inViewTiles=new Wo,this._outOfViewCache=new s.ax(0,(g=>this._unloadTile(g))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new je,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){for(const o of this._inViewTiles.getAllTiles())o.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t),this._inViewTiles=new Wo}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,o,p){return s._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,o,p)}catch(g){t.state="errored",g.status!==404?this._source.fire(new s.k(g,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new s.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const o of this._inViewTiles.getAllTiles())o.upload(t),o.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(t){var o;return this._inViewTiles.getRenderableIds((o=this.transform)===null||o===void 0?void 0:o.bearingInRadians,t)}hasRenderableParent(t){const o=t.overscaledZ-1;if(o>=this._source.minzoom){const p=this.getLoadedTile(t.scaledTo(o));if(p)return this._inViewTiles.isIdRenderable(p.tileID.key)}return!1}reload(t,o=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const p of this._inViewTiles.getAllIds()){const g=this._inViewTiles.getTileById(p);o&&!this._source.shouldReloadTile(g,o)||(t?this._reloadTile(p,"expired"):g.state!=="errored"&&this._reloadTile(p,"reloading"))}}}_reloadTile(t,o){return s._(this,void 0,void 0,(function*(){const p=this._inViewTiles.getTileById(t);p&&(p.state!=="loading"&&(p.state=o),yield this._loadTile(p,t,o))}))}_tileLoaded(t,o,p){t.timeAdded=te(),t.selfFading&&(t.fadeEndTime=t.timeAdded+this._rasterFadeDuration),p==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this.getSource().type==="raster-dem"&&t.dem&&(function(g,x){var k,M;const C=x.getRenderableIds();for(const A of C){if(!g.neighboringTiles||!g.neighboringTiles[A])continue;const R=x.getTileById(A);g.neighboringTiles[A].backfilled||gn(g,R),!((M=(k=R.neighboringTiles)===null||k===void 0?void 0:k[g.tileID.key])===null||M===void 0)&&M.backfilled||gn(R,g)}})(t,this._inViewTiles),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:t,coord:t.tileID}))}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._inViewTiles.getTileById(t)}_retainLoadedChildren(t,o){const p=this._getLoadedDescendents(o),g=new Set;for(const x of o){const k=p[x.key];if(!k?.length){g.add(x);continue}const M=x.overscaledZ+Gn.maxOverzooming,C=k.filter((B=>B.tileID.overscaledZ<=M));if(!C.length){g.add(x);continue}const A=Math.min(...C.map((B=>B.tileID.overscaledZ))),R=C.filter((B=>B.tileID.overscaledZ===A)).map((B=>B.tileID));for(const B of R)t[B.key]=B;this._areDescendentsComplete(R,A,x.overscaledZ)||g.add(x)}return g}_getLoadedDescendents(t){var o;const p={};for(const g of this._inViewTiles.getAllTiles().filter((x=>x.hasData())))for(const x of t)g.tileID.isChildOf(x)&&(p[o=x.key]||(p[o]=[])).push(g);return p}_areDescendentsComplete(t,o,p){return t.length===1&&t[0].isOverscaled()?t[0].overscaledZ===o:Math.pow(4,o-p)===t.length}getLoadedTile(t){return this._inViewTiles.getLoadedTile(t)}updateCacheSize(t){const o=Math.ceil(t.width/this._source.tileSize)+1,p=Math.ceil(t.height/this._source.tileSize)+1,g=Math.floor(o*p*(this._maxTileCacheZoomLevels===null?s.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._outOfViewCache.setMaxSize(x)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);this._prevLng=t,o&&(this._inViewTiles.handleWrapJump(o),this._resetTileReloadTimers())}update(t,o){if(!this._sourceLoaded||this._paused)return;let p;this.transform=t,this.terrain=o,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?p=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((C=>new s.a2(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y))):(p=pi(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?t.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter((C=>this._source.hasTile(C))))):p=[],this.usedForTerrain&&(p=this._addTerrainIdealTiles(p));const g=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,g&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const x=Qt(t,this._source),k=this._updateRetainedTiles(p,x),M=Ri(this._source.type);M&&this._rasterFadeDuration>0&&!o&&(function(C,A,R,B,$,G,K){const ie=te(),ae=s.av(A);for(const ne of A){const oe=C.getTileById(ne.key);oe.fadingDirection!==Le.Departing&&oe.fadeOpacity!==0||oe.resetFadeLogic(),Ls(C,oe,R,ie,B,$,K)||Ds(C,oe,R,ie,G,K)||mn(oe,ae,ie,K)||oe.resetFadeLogic()}})(this._inViewTiles,p,k,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),M?this._cleanUpRasterTiles(k):this._cleanUpVectorTiles(k)}_cleanUpRasterTiles(t){for(const o of this._inViewTiles.getAllIds())t[o]||this._removeTile(o)}_cleanUpVectorTiles(t){for(const o of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(o);t[o]?p.clearSymbolFadeHold():p.hasSymbolBuckets?p.holdingForSymbolFade()?p.symbolFadeFinished()&&this._removeTile(o):p.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(o)}}_addTerrainIdealTiles(t){const o=[];for(const p of t)if(p.canonical.z>this._source.minzoom){const g=p.scaledTo(p.canonical.z-1);o.push(g);const x=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));o.push(x)}return t.concat(o)}releaseSymbolFadeTiles(){for(const t of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(t).holdingForSymbolFade()&&this._removeTile(t)}_updateRetainedTiles(t,o){var p;const g=new Set;for(const A of t)this._addTile(A).hasData()||g.add(A);const x=t.reduce(((A,R)=>(A[R.key]=R,A)),{}),k=this._retainLoadedChildren(x,g),M={},C=Math.max(o-Gn.maxUnderzooming,this._source.minzoom);for(const A of k){let R=this._inViewTiles.getTileById(A.key),B=R?.wasRequested();for(let $=A.overscaledZ-1;$>=C;--$){const G=A.scaledTo($);if(M[G.key])break;if(M[G.key]=!0,R=this.getTile(G),!R&&B&&(R=this._addTile(G)),R){const K=R.hasData();if((K||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||B)&&(x[G.key]=G),B=R.wasRequested(),K)break}}}return x}_addTile(t){let o=this._inViewTiles.getTileById(t.key);if(o)return o;o=this._outOfViewCache.getAndRemove(t),o&&(o.resetFadeLogic(),this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null));const p=o;return o||(o=new Ve(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(o,t.key,o.state)),o.uses++,this._inViewTiles.setTile(t.key,o),p||this._source.fire(new s.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(t,o){this._clearTileReloadTimer(t);const p=o.getExpiryTimeout();p&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),p))}_clearTileReloadTimer(t){const o=this._timers[t];o&&(clearTimeout(o),delete this._timers[t])}_resetTileReloadTimers(){for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t of this._inViewTiles.getAllIds()){const o=this._inViewTiles.getTileById(t);this._setTileReloadTimer(t,o)}}refreshTiles(t){for(const o of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(o);(this._inViewTiles.isIdRenderable(o)||p.state=="errored")&&t.some((g=>g.equals(p.tileID.canonical)))&&this._reloadTile(o,"expired")}}_removeTile(t){const o=this._inViewTiles.getTileById(t);o&&(o.uses--,this._inViewTiles.deleteTileById(t),this._clearTileReloadTimer(t),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._outOfViewCache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(t){t.dataType==="source"&&(t.sourceDataType!=="metadata"?t.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(t.sourceDataChanged,t.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t of this._inViewTiles.getAllIds())this._removeTile(t);this._outOfViewCache.reset()}tilesIn(t,o,p){const g=[],x=this.transform;if(!x)return g;const k=x.getCoveringTilesDetailsProvider().allowWorldCopies(),M=p?x.getCameraQueryGeometry(t):t,C=G=>x.screenPointToMercatorCoordinate(G,this.terrain),A=this.transformBbox(t,C,!k),R=this.transformBbox(M,C,!k),B=this.getIds(),$=s.aa.fromPoints(R);for(let G=0;G<B.length;G++){const K=this._inViewTiles.getTileById(B[G]);if(K.holdingForSymbolFade())continue;const ie=k?[K.tileID]:[K.tileID.unwrapTo(-1),K.tileID.unwrapTo(0)],ae=Math.pow(2,x.zoom-K.tileID.overscaledZ),ne=o*K.queryPadding*s.a5/K.tileSize/ae;for(const oe of ie){const he=$.map((re=>oe.getTilePoint(new s.a9(re.x,re.y))));if(he.expandBy(ne),he.intersects(Gt)){const re=A.map((me=>oe.getTilePoint(me))),de=R.map((me=>oe.getTilePoint(me)));g.push({tile:K,tileID:k?oe:oe.unwrapTo(0),queryGeometry:re,cameraQueryGeometry:de,scale:ae})}}}return g}transformBbox(t,o,p){let g=t.map(o);if(p){const x=s.aa.fromPoints(t);x.shrinkBy(.001*Math.min(x.width(),x.height()));const k=x.map(o);s.aa.fromPoints(g).covers(k)||(g=g.map((M=>M.x>.5?new s.a9(M.x-1,M.y,M.z):M)))}return g}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map((p=>this._inViewTiles.getTileById(p).tileID));return this.transform&&this.transform.populateCache(o),o}hasTransition(){return!!this._source.hasTransition()||!(!Ri(this._source.type)||!(function(t,o){if(o<=0)return!1;const p=te();for(const g of t.getAllTiles())if(g.fadeEndTime>=p)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(t){this._rasterFadeDuration=t}setFeatureState(t,o,p){this._state.updateState(t=t||s.ai,o,p)}removeFeatureState(t,o,p){this._state.removeFeatureState(t=t||s.ai,o,p)}getFeatureState(t,o){return this._state.getState(t=t||s.ai,o)}setDependencies(t,o,p){const g=this._inViewTiles.getTileById(t);g&&g.setDependencies(o,p)}reloadTilesForDependencies(t,o){for(const p of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(p).hasDependency(t,o)&&this._reloadTile(p,"reloading");this._outOfViewCache.filter((p=>!p.hasDependency(t,o)))}areTilesLoaded(){for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}}Gn.maxUnderzooming=10,Gn.maxOverzooming=3;class Xe{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=s.an(t,0,1);let o=1,p=this._distances[o];const g=t*this.paddedLength+this.padding;for(;p<g&&o<this._distances.length;)p=this._distances[++o];const x=o-1,k=this._distances[x],M=p-k,C=M>0?(g-k)/M:0;return this.points[x].mult(1-C).add(this.points[o].mult(C))}}function yt(v,t){let o=!0;return v==="always"||v!=="never"&&t!=="never"||(o=!1),o}class vt{constructor(t,o,p){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(t/p),this.yCellCount=Math.ceil(o/p);for(let k=0;k<this.xCellCount*this.yCellCount;k++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,p,g,x){this._forEachCell(o,p,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(t,o,p,g){this._forEachCell(o-g,p-g,o+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(p),this.circles.push(g)}_insertBoxCell(t,o,p,g,x,k){this.boxCells[x].push(k)}_insertCircleCell(t,o,p,g,x,k){this.circleCells[x].push(k)}_query(t,o,p,g,x,k,M){if(p<0||t>this.width||g<0||o>this.height)return[];const C=[];if(t<=0&&o<=0&&this.width<=p&&this.height<=g){if(x)return[{key:null,x1:t,y1:o,x2:p,y2:g}];for(let A=0;A<this.boxKeys.length;A++)C.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){const R=this.circles[3*A],B=this.circles[3*A+1],$=this.circles[3*A+2];C.push({key:this.circleKeys[A],x1:R-$,y1:B-$,x2:R+$,y2:B+$})}}else this._forEachCell(t,o,p,g,this._queryCell,C,{hitTest:x,overlapMode:k,seenUids:{box:{},circle:{}}},M);return C}query(t,o,p,g){return this._query(t,o,p,g,!1,null)}hitTest(t,o,p,g,x,k){return this._query(t,o,p,g,!0,x,k).length>0}hitTestCircle(t,o,p,g,x){const k=t-p,M=t+p,C=o-p,A=o+p;if(M<0||k>this.width||A<0||C>this.height)return!1;const R=[];return this._forEachCell(k,C,M,A,this._queryCellCircle,R,{hitTest:!0,overlapMode:g,circle:{x:t,y:o,radius:p},seenUids:{box:{},circle:{}}},x),R.length>0}_queryCell(t,o,p,g,x,k,M,C){const{seenUids:A,hitTest:R,overlapMode:B}=M,$=this.boxCells[x];if($!==null){const K=this.bboxes;for(const ie of $)if(!A.box[ie]){A.box[ie]=!0;const ae=4*ie,ne=this.boxKeys[ie];if(t<=K[ae+2]&&o<=K[ae+3]&&p>=K[ae+0]&&g>=K[ae+1]&&(!C||C(ne))&&(!R||!yt(B,ne.overlapMode))&&(k.push({key:ne,x1:K[ae],y1:K[ae+1],x2:K[ae+2],y2:K[ae+3]}),R))return!0}}const G=this.circleCells[x];if(G!==null){const K=this.circles;for(const ie of G)if(!A.circle[ie]){A.circle[ie]=!0;const ae=3*ie,ne=this.circleKeys[ie];if(this._circleAndRectCollide(K[ae],K[ae+1],K[ae+2],t,o,p,g)&&(!C||C(ne))&&(!R||!yt(B,ne.overlapMode))){const oe=K[ae],he=K[ae+1],re=K[ae+2];if(k.push({key:ne,x1:oe-re,y1:he-re,x2:oe+re,y2:he+re}),R)return!0}}}return!1}_queryCellCircle(t,o,p,g,x,k,M,C){const{circle:A,seenUids:R,overlapMode:B}=M,$=this.boxCells[x];if($!==null){const K=this.bboxes;for(const ie of $)if(!R.box[ie]){R.box[ie]=!0;const ae=4*ie,ne=this.boxKeys[ie];if(this._circleAndRectCollide(A.x,A.y,A.radius,K[ae+0],K[ae+1],K[ae+2],K[ae+3])&&(!C||C(ne))&&!yt(B,ne.overlapMode))return k.push(!0),!0}}const G=this.circleCells[x];if(G!==null){const K=this.circles;for(const ie of G)if(!R.circle[ie]){R.circle[ie]=!0;const ae=3*ie,ne=this.circleKeys[ie];if(this._circlesCollide(K[ae],K[ae+1],K[ae+2],A.x,A.y,A.radius)&&(!C||C(ne))&&!yt(B,ne.overlapMode))return k.push(!0),!0}}}_forEachCell(t,o,p,g,x,k,M,C){const A=this._convertToXCellCoord(t),R=this._convertToYCellCoord(o),B=this._convertToXCellCoord(p),$=this._convertToYCellCoord(g);for(let G=A;G<=B;G++)for(let K=R;K<=$;K++)if(x.call(this,t,o,p,g,this.xCellCount*K+G,k,M,C))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,p,g,x,k){const M=g-t,C=x-o,A=p+k;return A*A>M*M+C*C}_circleAndRectCollide(t,o,p,g,x,k,M){const C=(k-g)/2,A=Math.abs(t-(g+C));if(A>C+p)return!1;const R=(M-x)/2,B=Math.abs(o-(x+R));if(B>R+p)return!1;if(A<=C||B<=R)return!0;const $=A-C,G=B-R;return $*$+G*G<=p*p}}function Fn(v,t,o){const p=s.N();if(!v){const{vecSouth:B,vecEast:$}=wa(t),G=T();G[0]=$[0],G[1]=$[1],G[2]=B[0],G[3]=B[1],g=G,(R=(k=(x=G)[0])*(A=x[3])-(C=x[2])*(M=x[1]))&&(g[0]=A*(R=1/R),g[1]=-M*R,g[2]=-C*R,g[3]=k*R),p[0]=G[0],p[1]=G[1],p[4]=G[2],p[5]=G[3]}var g,x,k,M,C,A,R;return s.Q(p,p,[1/o,1/o,1]),p}function Ho(v,t,o,p){if(v){const g=s.N();if(!t){const{vecSouth:x,vecEast:k}=wa(o);g[0]=k[0],g[1]=k[1],g[4]=x[0],g[5]=x[1]}return s.Q(g,g,[p,p,1]),g}return o.pixelsToClipSpaceMatrix}function wa(v){const t=Math.cos(v.rollInRadians),o=Math.sin(v.rollInRadians),p=Math.cos(v.pitchInRadians),g=Math.cos(v.bearingInRadians),x=Math.sin(v.bearingInRadians),k=s.aC();k[0]=-g*p*o-x*t,k[1]=-x*p*o+g*t;const M=s.aD(k);M<1e-9?s.aE(k):s.aF(k,k,1/M);const C=s.aC();C[0]=g*p*t-x*o,C[1]=x*p*t+g*o;const A=s.aD(C);return A<1e-9?s.aE(C):s.aF(C,C,1/A),{vecEast:C,vecSouth:k}}function gt(v,t,o,p){let g;p?(g=[v,t,p(v,t),1],s.aH(g,g,o)):(g=[v,t,0,1],Yo(g,g,o));const x=g[3];return{point:new s.P(g[0]/x,g[1]/x),signedDistanceFromCamera:x,isOccluded:!1}}function As(v,t){return .5+v/t*.5}function Is(v,t){return v.x>=-t[0]&&v.x<=t[0]&&v.y>=-t[1]&&v.y<=t[1]}function Zo(v,t,o,p,g,x,k,M,C,A,R,B,$){const G=o?v.textSizeData:v.iconSizeData,K=s.ay(G,t.transform.zoom),ie=[256/t.width*2+1,256/t.height*2+1],ae=o?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ae.clear();const ne=v.lineVertexArray,oe=o?v.text.placedSymbolArray:v.icon.placedSymbolArray,he=t.transform.width/t.transform.height;let re=!1;for(let de=0;de<oe.length;de++){const me=oe.get(de);if(me.hidden||me.writingMode===s.az.vertical&&!re){nr(me.numGlyphs,ae);continue}re=!1;const ue=new s.P(me.anchorX,me.anchorY),ve={getElevation:$,pitchedLabelPlaneMatrix:p,lineVertexArray:ne,pitchWithMap:x,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:ue,unwrappedTileID:C,width:A,height:R,translation:B},De=Br(me.anchorX,me.anchorY,ve);if(!Is(De.point,ie)){nr(me.numGlyphs,ae);continue}const Te=As(t.transform.cameraToCenterDistance,De.signedDistanceFromCamera),Pe=s.aA(G,K,me),Ce=x?Pe*t.transform.getPitchedTextCorrection(me.anchorX,me.anchorY,C)/Te:Pe*Te,Ge=$r({projectionContext:ve,pitchedLabelPlaneMatrixInverse:g,symbol:me,fontSize:Ce,flip:!1,keepUpright:k,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ae,aspectRatio:he,rotateToLine:M});re=Ge.useVertical,(Ge.notEnoughRoom||re||Ge.needsFlipping&&$r({projectionContext:ve,pitchedLabelPlaneMatrixInverse:g,symbol:me,fontSize:Ce,flip:!0,keepUpright:k,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ae,aspectRatio:he,rotateToLine:M}).notEnoughRoom)&&nr(me.numGlyphs,ae)}o?v.text.dynamicLayoutVertexBuffer.updateData(ae):v.icon.dynamicLayoutVertexBuffer.updateData(ae)}function Or(v,t,o,p,g,x,k,M){const C=x.glyphStartIndex+x.numGlyphs,A=x.lineStartIndex,R=x.lineStartIndex+x.lineLength,B=t.getoffsetX(x.glyphStartIndex),$=t.getoffsetX(C-1),G=ta(v*B,o,p,g,x.segment,A,R,M,k);if(!G)return null;const K=ta(v*$,o,p,g,x.segment,A,R,M,k);return K?M.projectionCache.anyProjectionOccluded?null:{first:G,last:K}:null}function zs(v,t,o,p){return v===s.az.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*p?{useVertical:!0}:(v===s.az.vertical?t.y<o.y:t.x>o.x)?{needsFlipping:!0}:null}function $r(v){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:o,symbol:p,fontSize:g,flip:x,keepUpright:k,glyphOffsetArray:M,dynamicLayoutVertexArray:C,aspectRatio:A,rotateToLine:R}=v,B=g/24,$=p.lineOffsetX*B,G=p.lineOffsetY*B;let K;if(p.numGlyphs>1){const ie=p.glyphStartIndex+p.numGlyphs,ae=p.lineStartIndex,ne=p.lineStartIndex+p.lineLength,oe=Or(B,M,$,G,x,p,R,t);if(!oe)return{notEnoughRoom:!0};const he=Ko(oe.first.point.x,oe.first.point.y,t,o),re=Ko(oe.last.point.x,oe.last.point.y,t,o);if(k&&!x){const de=zs(p.writingMode,he,re,A);if(de)return de}K=[oe.first];for(let de=p.glyphStartIndex+1;de<ie-1;de++){const me=ta(B*M.getoffsetX(de),$,G,x,p.segment,ae,ne,t,R);if(!me)return{notEnoughRoom:!0};K.push(me)}K.push(oe.last)}else{if(k&&!x){const ae=$t(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,ne=p.lineStartIndex+p.segment+1,oe=new s.P(t.lineVertexArray.getx(ne),t.lineVertexArray.gety(ne)),he=$t(oe.x,oe.y,t),re=he.signedDistanceFromCamera>0?he.point:Rs(t.tileAnchorPoint,oe,ae,1,t),de=Ko(ae.x,ae.y,t,o),me=Ko(re.x,re.y,t,o),ue=zs(p.writingMode,de,me,A);if(ue)return ue}const ie=ta(B*M.getoffsetX(p.glyphStartIndex),$,G,x,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,t,R);if(!ie||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};K=[ie]}for(const ie of K)s.aG(C,ie.point,ie.angle);return{}}function Rs(v,t,o,p,g){const x=v.add(v.sub(t)._unit()),k=$t(x.x,x.y,g).point,M=o.sub(k);return o.add(M._mult(p/M.mag()))}function _n(v,t,o){const p=t.projectionCache;if(p.projections[v])return p.projections[v];const g=new s.P(t.lineVertexArray.getx(v),t.lineVertexArray.gety(v)),x=$t(g.x,g.y,t);if(x.signedDistanceFromCamera>0)return p.projections[v]=x.point,p.anyProjectionOccluded=p.anyProjectionOccluded||x.isOccluded,x.point;const k=v-o.direction;return Rs(o.distanceFromAnchor===0?t.tileAnchorPoint:new s.P(t.lineVertexArray.getx(k),t.lineVertexArray.gety(k)),g,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,t)}function $t(v,t,o){const p=v+o.translation[0],g=t+o.translation[1];let x;return o.pitchWithMap?(x=gt(p,g,o.pitchedLabelPlaneMatrix,o.getElevation),x.isOccluded=!1):(x=o.transform.projectTileCoordinates(p,g,o.unwrappedTileID,o.getElevation),x.point.x=(.5*x.point.x+.5)*o.width,x.point.y=(.5*-x.point.y+.5)*o.height),x}function Ko(v,t,o,p){if(o.pitchWithMap){const g=[v,t,0,1];return s.aH(g,g,p),o.transform.projectTileCoordinates(g[0]/g[3],g[1]/g[3],o.unwrappedTileID,o.getElevation).point}return{x:v/o.width*2-1,y:1-t/o.height*2}}function Br(v,t,o){return o.transform.projectTileCoordinates(v,t,o.unwrappedTileID,o.getElevation)}function Fs(v,t,o){return v._unit()._perp()._mult(t*o)}function ir(v,t,o,p,g,x,k,M,C){if(M.projectionCache.offsets[v])return M.projectionCache.offsets[v];const A=o.add(t);if(v+C.direction<p||v+C.direction>=g)return M.projectionCache.offsets[v]=A,A;const R=_n(v+C.direction,M,C),B=Fs(R.sub(o),k,C.direction),$=o.add(B),G=R.add(B);return M.projectionCache.offsets[v]=s.aI(x,A,$,G)||A,M.projectionCache.offsets[v]}function ta(v,t,o,p,g,x,k,M,C){const A=p?v-t:v+t;let R=A>0?1:-1,B=0;p&&(R*=-1,B=Math.PI),R<0&&(B+=Math.PI);let $,G=R>0?x+g:x+g+1;M.projectionCache.cachedAnchorPoint?$=M.projectionCache.cachedAnchorPoint:($=$t(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=$);let K,ie,ae=$,ne=$,oe=0,he=0;const re=Math.abs(A),de=[];let me;for(;oe+he<=re;){if(G+=R,G<x||G>=k)return null;oe+=he,ne=ae,ie=K;const De={absOffsetX:re,direction:R,distanceFromAnchor:oe,previousVertex:ne};if(ae=_n(G,M,De),o===0)de.push(ne),me=ae.sub(ne);else{let Te;const Pe=ae.sub(ne);Te=Pe.mag()===0?Fs(_n(G+R,M,De).sub(ae),o,R):Fs(Pe,o,R),ie||(ie=ne.add(Te)),K=ir(G,Te,ae,x,k,ie,o,M,De),de.push(ie),me=K.sub(ie)}he=me.mag()}const ue=me._mult((re-oe)/he)._add(ie||ne),ve=B+Math.atan2(ae.y-ne.y,ae.x-ne.x);return de.push(ue),{point:ue,angle:C?ve:0,path:de}}const rc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function nr(v,t){for(let o=0;o<v;o++){const p=t.length;t.resize(p+4),t.float32.set(rc,3*p)}}function Yo(v,t,o){const p=t[0],g=t[1];return v[0]=o[0]*p+o[4]*g+o[12],v[1]=o[1]*p+o[5]*g+o[13],v[3]=o[3]*p+o[7]*g+o[15],v}const mi=100;class sc{constructor(t,o=new vt(t.width+200,t.height+200,25),p=new vt(t.width+200,t.height+200,25)){this.transform=t,this.grid=o,this.ignoredGrid=p,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+mi,this.screenBottomBoundary=t.height+mi,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,o,p,g,x,k,M,C,A,R,B,$){const G=this.projectAndGetPerspectiveRatio(t.anchorPointX+C[0],t.anchorPointY+C[1],x,R,$),K=p*G.perspectiveRatio;let ie;if(k||M)ie=this._projectCollisionBox(t,K,g,x,k,M,C,G,R,B,$);else{const me=G.x+(B?B.x*K:0),ue=G.y+(B?B.y*K:0);ie={allPointsOccluded:!1,box:[me+t.x1*K,ue+t.y1*K,me+t.x2*K,ue+t.y2*K]}}const[ae,ne,oe,he]=ie.box,re=k?ie.allPointsOccluded:G.isOccluded;let de=re;return de||(de=G.perspectiveRatio<this.perspectiveRatioCutoff),de||(de=!this.isInsideGrid(ae,ne,oe,he)),de||o!=="always"&&this.grid.hitTest(ae,ne,oe,he,o,A)?{box:[ae,ne,oe,he],placeable:!1,offscreen:!1,occluded:re}:{box:[ae,ne,oe,he],placeable:!0,offscreen:this.isOffscreen(ae,ne,oe,he),occluded:re}}placeCollisionCircles(t,o,p,g,x,k,M,C,A,R,B,$,G,K){const ie=[],ae=new s.P(o.anchorX,o.anchorY),ne=this.getPerspectiveRatio(ae.x,ae.y,k,K),oe=(A?x*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,k)/ne:x*ne)/s.aM,he={getElevation:K,pitchedLabelPlaneMatrix:M,lineVertexArray:p,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ae,unwrappedTileID:k,width:this.transform.width,height:this.transform.height,translation:G},re=Or(oe,g,o.lineOffsetX*oe,o.lineOffsetY*oe,!1,o,!1,he);let de=!1,me=!1,ue=!0;if(re){const ve=.5*B*ne+$,De=new s.P(-100,-100),Te=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Pe=new Xe,Ce=re.first,Ge=re.last;let We=[];for(let pt=Ce.path.length-1;pt>=1;pt--)We.push(Ce.path[pt]);for(let pt=1;pt<Ge.path.length;pt++)We.push(Ge.path[pt]);const $e=2.5*ve;if(A){const pt=this.projectPathToScreenSpace(We,he);We=pt.some((Ft=>Ft.signedDistanceFromCamera<=0))?[]:pt.map((Ft=>Ft.point))}let Ke=[];if(We.length>0){const pt=We[0].clone(),Ft=We[0].clone();for(let ei=1;ei<We.length;ei++)pt.x=Math.min(pt.x,We[ei].x),pt.y=Math.min(pt.y,We[ei].y),Ft.x=Math.max(Ft.x,We[ei].x),Ft.y=Math.max(Ft.y,We[ei].y);Ke=pt.x>=De.x&&Ft.x<=Te.x&&pt.y>=De.y&&Ft.y<=Te.y?[We]:Ft.x<De.x||pt.x>Te.x||Ft.y<De.y||pt.y>Te.y?[]:s.aJ([We],De.x,De.y,Te.x,Te.y)}for(const pt of Ke){Pe.reset(pt,.25*ve);let Ft=0;Ft=Pe.length<=.5*ve?1:Math.ceil(Pe.paddedLength/$e)+1;for(let ei=0;ei<Ft;ei++){const Ht=ei/Math.max(Ft-1,1),ni=Pe.lerp(Ht),Zt=ni.x+mi,_i=ni.y+mi;ie.push(Zt,_i,ve,0);const ai=Zt-ve,qi=_i-ve,Ai=Zt+ve,Ti=_i+ve;if(ue=ue&&this.isOffscreen(ai,qi,Ai,Ti),me=me||this.isInsideGrid(ai,qi,Ai,Ti),t!=="always"&&this.grid.hitTestCircle(Zt,_i,ve,t,R)&&(de=!0,!C))return{circles:[],offscreen:!1,collisionDetected:de}}}}return{circles:!C&&de||!me||ne<this.perspectiveRatioCutoff?[]:ie,offscreen:ue,collisionDetected:de}}projectPathToScreenSpace(t,o){const p=(function(g,x){const k=s.N();return s.aB(k,x.pitchedLabelPlaneMatrix),g.map((M=>{const C=gt(M.x,M.y,k,x.getElevation),A=x.transform.projectTileCoordinates(C.point.x,C.point.y,x.unwrappedTileID,x.getElevation);return A.point.x=(.5*A.point.x+.5)*x.width,A.point.y=(.5*-A.point.y+.5)*x.height,A}))})(t,o);return(function(g){let x=0,k=0,M=0,C=0;for(let A=0;A<g.length;A++)g[A].isOccluded?(M=A+1,C=0):(C++,C>k&&(k=C,x=M));return g.slice(x,x+k)})(p)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[],p=new s.aa;for(const B of t){const $=new s.P(B.x+mi,B.y+mi);p.extend($),o.push($)}const{minX:g,minY:x,maxX:k,maxY:M}=p,C=this.grid.query(g,x,k,M).concat(this.ignoredGrid.query(g,x,k,M)),A={},R={};for(const B of C){const $=B.key;if(A[$.bucketInstanceId]===void 0&&(A[$.bucketInstanceId]={}),A[$.bucketInstanceId][$.featureIndex])continue;const G=[new s.P(B.x1,B.y1),new s.P(B.x2,B.y1),new s.P(B.x2,B.y2),new s.P(B.x1,B.y2)];s.aK(o,G)&&(A[$.bucketInstanceId][$.featureIndex]=!0,R[$.bucketInstanceId]===void 0&&(R[$.bucketInstanceId]=[]),R[$.bucketInstanceId].push($.featureIndex))}return R}insertCollisionBox(t,o,p,g,x,k){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:k,overlapMode:o},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,p,g,x,k){const M=p?this.ignoredGrid:this.grid,C={bucketInstanceId:g,featureIndex:x,collisionGroupID:k,overlapMode:o};for(let A=0;A<t.length;A+=4)M.insertCircle(C,t[A],t[A+1],t[A+2])}projectAndGetPerspectiveRatio(t,o,p,g,x){if(x){let k;g?(k=[t,o,g(t,o),1],s.aH(k,k,x)):(k=[t,o,0,1],Yo(k,k,x));const M=k[3];return{x:(k[0]/M+1)/2*this.transform.width+mi,y:(-k[1]/M+1)/2*this.transform.height+mi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M*.5,isOccluded:!1,signedDistanceFromCamera:M}}{const k=this.transform.projectTileCoordinates(t,o,p,g);return{x:(k.point.x+1)/2*this.transform.width+mi,y:(1-k.point.y)/2*this.transform.height+mi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5,isOccluded:k.isOccluded,signedDistanceFromCamera:k.signedDistanceFromCamera}}}getPerspectiveRatio(t,o,p,g){const x=this.transform.projectTileCoordinates(t,o,p,g);return .5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5}isOffscreen(t,o,p,g){return p<mi||t>=this.screenRightBoundary||g<mi||o>this.screenBottomBoundary}isInsideGrid(t,o,p,g){return p>=0&&t<this.gridRightBoundary&&g>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=s.ar([]);return s.O(t,t,[-100,-100,0]),t}_projectCollisionBox(t,o,p,g,x,k,M,C,A,R,B){let $=1,G=0,K=0,ie=1;const ae=t.anchorPointX+M[0],ne=t.anchorPointY+M[1];if(k&&!x){const We=this.projectAndGetPerspectiveRatio(ae+1,ne,g,A,B),$e=We.x-C.x,Ke=Math.atan((We.y-C.y)/$e)+($e<0?Math.PI:0),pt=Math.sin(Ke),Ft=Math.cos(Ke);$=Ft,G=pt,K=-pt,ie=Ft}else if(!k&&x){const We=wa(this.transform);$=We.vecEast[0],G=We.vecEast[1],K=We.vecSouth[0],ie=We.vecSouth[1]}let oe=C.x,he=C.y,re=o;x&&(oe=ae,he=ne,re=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),re*=this.transform.getPitchedTextCorrection(ae,ne,g),R||(re*=s.an(.5+C.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),R&&(oe+=$*R.x*re+K*R.y*re,he+=G*R.x*re+ie*R.y*re);const de=t.x1*re,me=t.x2*re,ue=(de+me)/2,ve=t.y1*re,De=t.y2*re,Te=(ve+De)/2,Pe=[{offsetX:de,offsetY:ve},{offsetX:ue,offsetY:ve},{offsetX:me,offsetY:ve},{offsetX:me,offsetY:Te},{offsetX:me,offsetY:De},{offsetX:ue,offsetY:De},{offsetX:de,offsetY:De},{offsetX:de,offsetY:Te}];let Ce=[];for(const{offsetX:We,offsetY:$e}of Pe)Ce.push(new s.P(oe+$*We+K*$e,he+G*We+ie*$e));let Ge=!1;if(x){const We=Ce.map(($e=>this.projectAndGetPerspectiveRatio($e.x,$e.y,g,A,B)));Ge=We.some(($e=>!$e.isOccluded)),Ce=We.map(($e=>new s.P($e.x,$e.y)))}else Ge=!0;return{box:s.aL(Ce),allPointsOccluded:!Ge}}}class oc{constructor(t,o,p,g){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class js{constructor(t,o,p,g,x){this.text=new oc(t?t.text:null,o,p,x),this.icon=new oc(t?t.icon:null,o,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class lc{constructor(t,o,p){this.text=t,this.icon=o,this.skipFade=p}}class uc{constructor(t,o,p,g,x){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=x}}class dc{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:p=>p.collisionGroupID===o}}return this.collisionGroups[t]}}function Xo(v,t,o,p,g){const{horizontalAlign:x,verticalAlign:k}=s.aS(v);return new s.P(-(x-.5)*t+p[0]*g,-(k-.5)*o+p[1]*g)}class hu{constructor(t,o,p,g,x){this.transform=t.clone(),this.terrain=o,this.collisionIndex=new sc(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new dc(g),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const o=this.terrain;return o?(p,g)=>o.getElevation(t,p,g):null}getBucketParts(t,o,p,g){const x=p.getBucket(o),k=p.latestFeatureIndex;if(!x||!k||o.id!==x.layerIds[0])return;const M=p.collisionBoxArray,C=x.layers[0].layout,A=x.layers[0].paint,R=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),B=p.tileSize/s.a5,$=p.tileID.toUnwrapped(),G=C.get("text-rotation-alignment")==="map",K=s.aN(p,1,this.transform.zoom),ie=s.aO(this.collisionIndex.transform,p,A.get("text-translate"),A.get("text-translate-anchor")),ae=s.aO(this.collisionIndex.transform,p,A.get("icon-translate"),A.get("icon-translate-anchor")),ne=Fn(G,this.transform,K);this.retainedQueryData[x.bucketInstanceId]=new uc(x.bucketInstanceId,k,x.sourceLayerIndex,x.index,p.tileID);const oe={bucket:x,layout:C,translationText:ie,translationIcon:ae,unwrappedTileID:$,pitchedLabelPlaneMatrix:ne,scale:R,textPixelRatio:B,holdingForFade:p.holdingForSymbolFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:s.ay(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const he of x.sortKeyRanges){const{sortKey:re,symbolInstanceStart:de,symbolInstanceEnd:me}=he;t.push({sortKey:re,symbolInstanceStart:de,symbolInstanceEnd:me,parameters:oe})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:oe})}attemptAnchorPlacement(t,o,p,g,x,k,M,C,A,R,B,$,G,K,ie,ae,ne,oe,he,re){const de=s.aP[t.textAnchor],me=[t.textOffset0,t.textOffset1],ue=Xo(de,p,g,me,x),ve=this.collisionIndex.placeCollisionBox(o,$,C,A,R,M,k,ae,B.predicate,he,ue,re);if((!oe||this.collisionIndex.placeCollisionBox(oe,$,C,A,R,M,k,ne,B.predicate,he,ue,re).placeable)&&ve.placeable){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(De=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:me,width:p,height:g,anchor:de,textBoxScale:x,prevAnchor:De},this.markUsedJustification(K,de,G,ie),K.allowVerticalPlacement&&(this.markUsedOrientation(K,ie,G),this.placedOrientations[G.crossTileID]=ie),{shift:ue,placedGlyphBoxes:ve}}}placeLayerBucketPart(t,o,p){const{bucket:g,layout:x,translationText:k,translationIcon:M,unwrappedTileID:C,pitchedLabelPlaneMatrix:A,textPixelRatio:R,holdingForFade:B,collisionBoxArray:$,partiallyEvaluatedTextSize:G,collisionGroup:K}=t.parameters,ie=x.get("text-optional"),ae=x.get("icon-optional"),ne=s.aQ(x,"text-overlap","text-allow-overlap"),oe=ne==="always",he=s.aQ(x,"icon-overlap","icon-allow-overlap"),re=he==="always",de=x.get("text-rotation-alignment")==="map",me=x.get("text-pitch-alignment")==="map",ue=x.get("icon-text-fit")!=="none",ve=x.get("symbol-z-order")==="viewport-y",De=oe&&(re||!g.hasIconData()||ae),Te=re&&(oe||!g.hasTextData()||ie);!g.collisionArrays&&$&&g.deserializeCollisionBoxes($);const Pe=this.retainedQueryData[g.bucketInstanceId].tileID,Ce=this._getTerrainElevationFunc(Pe),Ge=this.transform.getFastPathSimpleProjectionMatrix(Pe),We=($e,Ke,pt)=>{var Ft,ei;if(o[$e.crossTileID])return;if(B)return void(this.placements[$e.crossTileID]=new lc(!1,!1,!1));let Ht=!1,ni=!1,Zt=!0,_i=null,ai={box:null,placeable:!1,offscreen:null,occluded:!1},qi={placeable:!1},Ai=null,Ti=null,nn=null,qa=0,Ta=0,ga=0;Ke.textFeatureIndex?qa=Ke.textFeatureIndex:$e.useRuntimeCollisionCircles&&(qa=$e.featureIndex),Ke.verticalTextFeatureIndex&&(Ta=Ke.verticalTextFeatureIndex);const Pn=Ke.textBox;if(Pn){const Kn=Yt=>{let Kt=s.az.horizontal;if(g.allowVerticalPlacement&&!Yt&&this.prevPlacement){const Bi=this.prevPlacement.placedOrientations[$e.crossTileID];Bi&&(this.placedOrientations[$e.crossTileID]=Bi,Kt=Bi,this.markUsedOrientation(g,Kt,$e))}return Kt},_a=(Yt,Kt)=>{if(g.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&Ke.verticalTextBox){for(const Bi of g.writingModes)if(Bi===s.az.vertical?(ai=Kt(),qi=ai):ai=Yt(),ai&&ai.placeable)break}else ai=Yt()},oa=$e.textAnchorOffsetStartIndex,la=$e.textAnchorOffsetEndIndex;if(la===oa){const Yt=(Kt,Bi)=>{const Vi=this.collisionIndex.placeCollisionBox(Kt,ne,R,Pe,C,me,de,k,K.predicate,Ce,void 0,Ge);return Vi&&Vi.placeable&&(this.markUsedOrientation(g,Bi,$e),this.placedOrientations[$e.crossTileID]=Bi),Vi};_a((()=>Yt(Pn,s.az.horizontal)),(()=>{const Kt=Ke.verticalTextBox;return g.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&Kt?Yt(Kt,s.az.vertical):{box:null,offscreen:null}})),Kn(ai&&ai.placeable)}else{let Yt=s.aP[(ei=(Ft=this.prevPlacement)===null||Ft===void 0?void 0:Ft.variableOffsets[$e.crossTileID])===null||ei===void 0?void 0:ei.anchor];const Kt=(Vi,rh,sh)=>{const br=Vi.x2-Vi.x1,np=Vi.y2-Vi.y1,oh=$e.textBoxScale,sd=ue&&he==="never"?rh:null;let Wa=null,Ha=ne==="never"?1:2,Za="never";Yt&&Ha++;for(let od=0;od<Ha;od++){for(let ld=oa;ld<la;ld++){const zl=g.textAnchorOffsets.get(ld);if(Yt&&zl.textAnchor!==Yt)continue;const Rl=this.attemptAnchorPlacement(zl,Vi,br,np,oh,de,me,R,Pe,C,K,Za,$e,g,sh,k,M,sd,Ce);if(Rl&&(Wa=Rl.placedGlyphBoxes,Wa&&Wa.placeable))return Ht=!0,_i=Rl.shift,Wa}Yt?Yt=null:Za=ne}return p&&!Wa&&(Wa={box:this.collisionIndex.placeCollisionBox(Pn,"always",R,Pe,C,me,de,k,K.predicate,Ce,void 0,Ge).box,offscreen:!1,placeable:!1,occluded:!1}),Wa};_a((()=>Kt(Pn,Ke.iconBox,s.az.horizontal)),(()=>{const Vi=Ke.verticalTextBox;return g.allowVerticalPlacement&&(!ai||!ai.placeable)&&$e.numVerticalGlyphVertices>0&&Vi?Kt(Vi,Ke.verticalIconBox,s.az.vertical):{box:null,occluded:!0,offscreen:null}})),ai&&(Ht=ai.placeable,Zt=ai.offscreen);const Bi=Kn(ai&&ai.placeable);if(!Ht&&this.prevPlacement){const Vi=this.prevPlacement.variableOffsets[$e.crossTileID];Vi&&(this.variableOffsets[$e.crossTileID]=Vi,this.markUsedJustification(g,Vi.anchor,$e,Bi))}}}if(Ai=ai,Ht=Ai&&Ai.placeable,Zt=Ai&&Ai.offscreen,$e.useRuntimeCollisionCircles&&$e.centerJustifiedTextSymbolIndex>=0){const Kn=g.text.placedSymbolArray.get($e.centerJustifiedTextSymbolIndex),_a=s.aA(g.textSizeData,G,Kn),oa=x.get("text-padding");Ti=this.collisionIndex.placeCollisionCircles(ne,Kn,g.lineVertexArray,g.glyphOffsetArray,_a,C,A,p,me,K.predicate,$e.collisionCircleDiameter,oa,k,Ce),Ti.circles.length&&Ti.collisionDetected&&!p&&s.w("Collisions detected, but collision boxes are not shown"),Ht=oe||Ti.circles.length>0&&!Ti.collisionDetected,Zt=Zt&&Ti.offscreen}if(Ke.iconFeatureIndex&&(ga=Ke.iconFeatureIndex),Ke.iconBox){const Kn=_a=>this.collisionIndex.placeCollisionBox(_a,he,R,Pe,C,me,de,M,K.predicate,Ce,ue&&_i?_i:void 0,Ge);qi&&qi.placeable&&Ke.verticalIconBox?(nn=Kn(Ke.verticalIconBox),ni=nn.placeable):(nn=Kn(Ke.iconBox),ni=nn.placeable),Zt=Zt&&nn.offscreen}const vr=ie||$e.numHorizontalGlyphVertices===0&&$e.numVerticalGlyphVertices===0,yo=ae||$e.numIconVertices===0;vr||yo?yo?vr||(ni=ni&&Ht):Ht=ni&&Ht:ni=Ht=ni&&Ht;const xr=ni&&nn.placeable;if(Ht&&Ai.placeable&&this.collisionIndex.insertCollisionBox(Ai.box,ne,x.get("text-ignore-placement"),g.bucketInstanceId,qi&&qi.placeable&&Ta?Ta:qa,K.ID),xr&&this.collisionIndex.insertCollisionBox(nn.box,he,x.get("icon-ignore-placement"),g.bucketInstanceId,ga,K.ID),Ti&&Ht&&this.collisionIndex.insertCollisionCircles(Ti.circles,ne,x.get("text-ignore-placement"),g.bucketInstanceId,qa,K.ID),p&&this.storeCollisionData(g.bucketInstanceId,pt,Ke,Ai,nn,Ti),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$e.crossTileID]=new lc((Ht||De)&&!Ai?.occluded,(ni||Te)&&!nn?.occluded,Zt||g.justReloaded),o[$e.crossTileID]=!0};if(ve){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const $e=g.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Ke=$e.length-1;Ke>=0;--Ke){const pt=$e[Ke];We(g.symbolInstances.get(pt),g.collisionArrays[pt],pt)}}else for(let $e=t.symbolInstanceStart;$e<t.symbolInstanceEnd;$e++)We(g.symbolInstances.get($e),g.collisionArrays[$e],$e);g.justReloaded=!1}storeCollisionData(t,o,p,g,x,k){if(p.textBox||p.iconBox){let M,C;this.collisionBoxArrays.has(t)?M=this.collisionBoxArrays.get(t):(M=new Map,this.collisionBoxArrays.set(t,M)),M.has(o)?C=M.get(o):(C={text:null,icon:null},M.set(o,C)),p.textBox&&(C.text=g.box),p.iconBox&&(C.icon=x.box)}if(k){let M=this.collisionCircleArrays[t];M===void 0&&(M=this.collisionCircleArrays[t]=[]);for(let C=0;C<k.circles.length;C+=4)M.push(k.circles[C+0]-mi),M.push(k.circles[C+1]-mi),M.push(k.circles[C+2]),M.push(k.collisionDetected?1:0)}}markUsedJustification(t,o,p,g){let x;x=g===s.az.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[s.aR(o)];const k=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const M of k)M>=0&&(t.text.placedSymbolArray.get(M).crossTileID=x>=0&&M!==x?0:p.crossTileID)}markUsedOrientation(t,o,p){const g=o===s.az.horizontal||o===s.az.horizontalOnly?o:0,x=o===s.az.vertical?o:0,k=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const M of k)t.text.placedSymbolArray.get(M).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let p=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const g=o?o.symbolFadeChange(t):1,x=o?o.opacities:{},k=o?o.variableOffsets:{},M=o?o.placedOrientations:{};for(const C in this.placements){const A=this.placements[C],R=x[C];R?(this.opacities[C]=new js(R,g,A.text,A.icon),p=p||A.text!==R.text.placed||A.icon!==R.icon.placed):(this.opacities[C]=new js(null,g,A.text,A.icon,A.skipFade),p=p||A.text||A.icon)}for(const C in x){const A=x[C];if(!this.opacities[C]){const R=new js(A,g,!1,!1);R.isHidden()||(this.opacities[C]=R,p=p||A.text.placed||A.icon.placed)}}for(const C in k)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=k[C]);for(const C in M)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=M[C]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const p={};for(const g of o){const x=g.getBucket(t);x&&g.latestFeatureIndex&&t.id===x.layerIds[0]&&this.updateBucketOpacities(x,g.tileID,p,g.collisionBoxArray)}}updateBucketOpacities(t,o,p,g){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const x=t.layers[0],k=x.layout,M=new js(null,0,!1,!1,!0),C=k.get("text-allow-overlap"),A=k.get("icon-allow-overlap"),R=x._unevaluatedLayout.hasValue("text-variable-anchor")||x._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=k.get("text-rotation-alignment")==="map",$=k.get("text-pitch-alignment")==="map",G=k.get("icon-text-fit")!=="none",K=new js(null,0,C&&(A||!t.hasIconData()||k.get("icon-optional")),A&&(C||!t.hasTextData()||k.get("text-optional")),!0);!t.collisionArrays&&g&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(g);const ie=(ne,oe,he)=>{for(let re=0;re<oe/4;re++)ne.opacityVertexArray.emplaceBack(he);ne.hasVisibleVertices=ne.hasVisibleVertices||he!==$s},ae=this.collisionBoxArrays.get(t.bucketInstanceId);for(let ne=0;ne<t.symbolInstances.length;ne++){const oe=t.symbolInstances.get(ne),{numHorizontalGlyphVertices:he,numVerticalGlyphVertices:re,crossTileID:de}=oe;let me=this.opacities[de];p[de]?me=M:me||(me=K,this.opacities[de]=me),p[de]=!0;const ue=oe.numIconVertices>0,ve=this.placedOrientations[oe.crossTileID],De=ve===s.az.vertical,Te=ve===s.az.horizontal||ve===s.az.horizontalOnly;if(he>0||re>0){const Ce=gu(me.text);ie(t.text,he,De?$s:Ce),ie(t.text,re,Te?$s:Ce);const Ge=me.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach((Ke=>{Ke>=0&&(t.text.placedSymbolArray.get(Ke).hidden=Ge||De?1:0)})),oe.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=Ge||Te?1:0);const We=this.variableOffsets[oe.crossTileID];We&&this.markUsedJustification(t,We.anchor,oe,ve);const $e=this.placedOrientations[oe.crossTileID];$e&&(this.markUsedJustification(t,"left",oe,$e),this.markUsedOrientation(t,$e,oe))}if(ue){const Ce=gu(me.icon),Ge=!(G&&oe.verticalPlacedIconSymbolIndex&&De);oe.placedIconSymbolIndex>=0&&(ie(t.icon,oe.numIconVertices,Ge?Ce:$s),t.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=me.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(ie(t.icon,oe.numVerticalIconVertices,Ge?$s:Ce),t.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=me.icon.isHidden())}const Pe=ae&&ae.has(ne)?ae.get(ne):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Ce=t.collisionArrays[ne];if(Ce){let Ge=new s.P(0,0);if(Ce.textBox||Ce.verticalTextBox){let We=!0;if(R){const $e=this.variableOffsets[de];$e?(Ge=Xo($e.anchor,$e.width,$e.height,$e.textOffset,$e.textBoxScale),B&&Ge._rotate($?-this.transform.bearingInRadians:this.transform.bearingInRadians)):We=!1}if(Ce.textBox||Ce.verticalTextBox){let $e;Ce.textBox&&($e=De),Ce.verticalTextBox&&($e=Te),fu(t.textCollisionBox.collisionVertexArray,me.text.placed,!We||$e,Pe.text,Ge.x,Ge.y)}}if(Ce.iconBox||Ce.verticalIconBox){const We=!!(!Te&&Ce.verticalIconBox);let $e;Ce.iconBox&&($e=We),Ce.verticalIconBox&&($e=!We),fu(t.iconCollisionBox.collisionVertexArray,me.icon.placed,$e,Pe.icon,G?Ge.x:0,G?Ge.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const p=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*p>t}setStale(){this.stale=!0}}function fu(v,t,o,p,g,x){p&&p.length!==0||(p=[0,0,0,0]);const k=p[0]-mi,M=p[1]-mi,C=p[2]-mi,A=p[3]-mi;v.emplaceBack(t?1:0,o?1:0,g||0,x||0,k,M),v.emplaceBack(t?1:0,o?1:0,g||0,x||0,C,M),v.emplaceBack(t?1:0,o?1:0,g||0,x||0,C,A),v.emplaceBack(t?1:0,o?1:0,g||0,x||0,k,A)}const pu=Math.pow(2,25),mu=Math.pow(2,24),Af=Math.pow(2,17),Os=Math.pow(2,16),Jo=Math.pow(2,9),cc=Math.pow(2,8),Vr=Math.pow(2,1);function gu(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const t=v.placed?1:0,o=Math.floor(127*v.opacity);return o*pu+t*mu+o*Af+t*Os+o*Jo+t*cc+o*Vr+t}const $s=0;class Fa{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,p,g,x){const k=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(k,g,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort(((M,C)=>M.sortKey-C.sortKey)));this._currentPartIndex<k.length;)if(o.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class Nr{constructor(t,o,p,g,x,k,M,C){this.placement=new hu(t,o,k,M,C),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(t,o,p){const g=te(),x=()=>!this._forceFullPlacement&&te()-g>2;for(;this._currentPlacementIndex>=0;){const k=o[t[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=M)&&(!k.maxzoom||k.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new Fa(k)),this._inProgressLayer.continuePlacement(p[k.source],this.placement,this._showCollisionBoxes,k,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const xt=512/s.a5/2;class _u{constructor(t,o,p){this.tileID=t,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let x=0;x<o.length;x++){const k=o.get(x),M=k.key,C=g.get(M);C?C.push(k):g.set(M,[k])}for(const[x,k]of g){const M={positions:k.map((C=>({x:Math.floor(C.anchorX*xt),y:Math.floor(C.anchorY*xt)}))),crossTileIDs:k.map((C=>C.crossTileID))};if(M.positions.length>128){const C=new s.aT(M.positions.length,16,Uint16Array);for(const{x:A,y:R}of M.positions)C.add(A,R);C.finish(),delete M.positions,M.index=C}this._symbolsByKey[x]=M}}getScaledCoordinates(t,o){const{x:p,y:g,z:x}=this.tileID.canonical,{x:k,y:M,z:C}=o.canonical,A=xt/Math.pow(2,C-x),R=(M*s.a5+t.anchorY)*A,B=g*s.a5*xt;return{x:Math.floor((k*s.a5+t.anchorX)*A-p*s.a5*xt),y:Math.floor(R-B)}}findMatches(t,o,p){const g=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let x=0;x<t.length;x++){const k=t.get(x);if(k.crossTileID)continue;const M=this._symbolsByKey[k.key];if(!M)continue;const C=this.getScaledCoordinates(k,o);if(M.index){const A=M.index.range(C.x-g,C.y-g,C.x+g,C.y+g).sort();for(const R of A){const B=M.crossTileIDs[R];if(!p[B]){p[B]=!0,k.crossTileID=B;break}}}else if(M.positions)for(let A=0;A<M.positions.length;A++){const R=M.positions[A],B=M.crossTileIDs[A];if(Math.abs(R.x-C.x)<=g&&Math.abs(R.y-C.y)<=g&&!p[B]){p[B]=!0,k.crossTileID=B;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class If{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const p in this.indexes){const g=this.indexes[p],x={};for(const k in g){const M=g[k];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+o),x[M.tileID.key]=M}this.indexes[p]=x}this.lng=t}addBucket(t,o,p){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let x=0;x<o.symbolInstances.length;x++)o.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const g=this.usedCrossTileIDs[t.overscaledZ];for(const x in this.indexes){const k=this.indexes[x];if(Number(x)>t.overscaledZ)for(const M in k){const C=k[M];C.tileID.isChildOf(t)&&C.findMatches(o.symbolInstances,t,g)}else{const M=k[t.scaledTo(Number(x)).key];M&&M.findMatches(o.symbolInstances,t,g)}}for(let x=0;x<o.symbolInstances.length;x++){const k=o.symbolInstances.get(x);k.crossTileID||(k.crossTileID=p.generate(),g[k.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new _u(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const p of o.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[t][g]}removeStaleBuckets(t){let o=!1;for(const p in this.indexes){const g=this.indexes[p];for(const x in g)t[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[x]),delete g[x],o=!0)}return o}}class Tn{constructor(){this.layerIndexes={},this.crossTileIDs=new If,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,p){let g=this.layerIndexes[t.id];g===void 0&&(g=this.layerIndexes[t.id]=new yu);let x=!1;const k={};g.handleWrapJump(p);for(const M of o){const C=M.getBucket(t);C&&t.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(M.tileID,C,this.crossTileIDs)&&(x=!0),k[C.bucketInstanceId]=!0)}return g.removeStaleBuckets(k)&&(x=!0),x}pruneUnusedLayers(t){const o={};t.forEach((p=>{o[p]=!0}));for(const p in this.layerIndexes)o[p]||delete this.layerIndexes[p]}}var on="void main() {fragColor=vec4(1.0);}";const li={prelude:ut(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ut("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ut("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ut(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ut(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ut(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ut(on,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ut(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ut(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ut("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ut("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:ut(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:ut("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ut(on,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ut(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ut(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ut(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ut(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ut(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ut(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ut(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ut(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ut(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ut(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ut(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ut(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:ut(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:ut(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ut(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ut(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ut(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ut("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ut("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ut("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ut("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ut(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ut("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ut(v,t){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=t.match(/in ([\w]+) ([\w]+)/g),g=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=x?x.concat(g):g,M={};return{fragmentSource:v=v.replace(o,((C,A,R,B,$)=>(M[$]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${$}
in ${R} ${B} ${$};
#else
uniform ${R} ${B} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${R} ${B} ${$} = u_${$};
#endif
`))),vertexSource:t=t.replace(o,((C,A,R,B,$)=>{const G=B==="float"?"vec2":"vec4",K=$.match(/color/)?"color":G;return M[$]?A==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${R} ${G} a_${$};
out ${R} ${B} ${$};
#else
uniform ${R} ${B} u_${$};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${R} ${B} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${K}(a_${$}, u_${$}_t);
#else
    ${R} ${B} ${$} = u_${$};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${R} ${G} a_${$};
#else
uniform ${R} ${B} u_${$};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${R} ${B} ${$} = a_${$};
#else
    ${R} ${B} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${R} ${B} ${$} = unpack_mix_${K}(a_${$}, u_${$}_t);
#else
    ${R} ${B} ${$} = u_${$};
#endif
`})),staticAttributes:p,staticUniforms:k}}class qt{constructor(t,o,p){this.vertexBuffer=t,this.indexBuffer=o,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ja=s.aU([{name:"a_pos",type:"Int16",components:2}]);const yn="#define PROJECTION_MERCATOR",jn="mercator";class vn{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return jn}get shaderDefine(){return yn}get shaderPreludeCode(){return li.projectionMercator}get vertexShaderPreludeCode(){return li.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,o,p,g,x){if(this._cachedMesh)return this._cachedMesh;const k=new s.aW;k.emplaceBack(0,0),k.emplaceBack(s.a5,0),k.emplaceBack(0,s.a5),k.emplaceBack(s.a5,s.a5);const M=t.createVertexBuffer(k,ja.members),C=s.aX.simpleSegment(0,0,4,2),A=new s.aY;A.emplaceBack(1,0,2),A.emplaceBack(1,2,3);const R=t.createIndexBuffer(A);return this._cachedMesh=new qt(M,R,C),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class Ur{constructor(t=0,o=0,p=0,g=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=p,this.right=g}interpolate(t,o,p){return o.top!=null&&t.top!=null&&(this.top=s.G.number(t.top,o.top,p)),o.bottom!=null&&t.bottom!=null&&(this.bottom=s.G.number(t.bottom,o.bottom,p)),o.left!=null&&t.left!=null&&(this.left=s.G.number(t.left,o.left,p)),o.right!=null&&t.right!=null&&(this.right=s.G.number(t.right,o.right,p)),this}getCenter(t,o){const p=s.an((this.left+t-this.right)/2,0,t),g=s.an((this.top+o-this.bottom)/2,0,o);return new s.P(p,g)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Ur(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Oa(v,t){if(!v.renderWorldCopies||v.lngRange)return;const o=t.lng-v.center.lng;t.lng+=o>180?-360:o<-180?360:0}function wi(v){return Math.max(0,Math.floor(v))}class ar{constructor(t,o){var p;this.applyConstrain=(g,x)=>this._constrainOverride!==null?this._constrainOverride(g,x):this._callbacks.defaultConstrain(g,x),this._callbacks=t,this._tileSize=512,this._renderWorldCopies=o?.renderWorldCopies===void 0||!!o?.renderWorldCopies,this._minZoom=o?.minZoom||0,this._maxZoom=o?.maxZoom||22,this._minPitch=o?.minPitch==null?0:o?.minPitch,this._maxPitch=o?.maxPitch==null?60:o?.maxPitch,this._constrainOverride=(p=o?.constrainOverride)!==null&&p!==void 0?p:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=wi(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ur,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,o,p){this._constrainOverride=t.constrainOverride,this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=wi(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new Ur(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!p&&t.autoCalculateNearFarZ,o&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get constrainOverride(){return this._constrainOverride}setConstrainOverride(t){t===void 0&&(t=null),this._constrainOverride!==t&&(this._constrainOverride=t,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const o=s.W(t,-180,180)*Math.PI/180;var p,g,x,k,M,C,A,R,B;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=T(),p=this._rotationMatrix,x=-this._bearingInRadians,k=(g=this._rotationMatrix)[0],M=g[1],C=g[2],A=g[3],R=Math.sin(x),B=Math.cos(x),p[0]=k*B+C*R,p[1]=M*B+A*R,p[2]=k*-R+C*B,p[3]=M*-R+A*B)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const o=s.an(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const o=t/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aZ(this._fovInRadians)}setFov(t){t=s.an(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=s.ap(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const o=this.applyConstrain(this._center,t).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=s.aq(o),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,o){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,p){this._unmodified=!1,this._edgeInsets.interpolate(t,o,p),this.constrainInternal(),this._calcMatrices()}resize(t,o,p=!0){this._width=t,this._height=o,p&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new fi([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-s.ao,s.ao])}getCameraQueryGeometry(t,o){if(o.length===1)return[o[0],t];{const{minX:p,minY:g,maxX:x,maxY:k}=s.aa.fromPoints(o).extend(t);return[new s.P(p,g),new s.P(x,g),new s.P(x,k),new s.P(p,k),new s.P(p,g)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:o,zoom:p}=this.applyConstrain(this.center,this.zoom);this.setCenter(o),this.setZoom(p),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=s.ar(new Float64Array(16));s.Q(t,t,[this._width/2,-this._height/2,1]),s.O(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=s.ar(new Float64Array(16)),s.Q(t,t,[1,-1,1]),s.O(t,t,[-1,-1,0]),s.Q(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,o,p,g){const x=p!==void 0?p:this.bearing,k=g=g!==void 0?g:this.pitch,{distanceToCenter:M,clampedElevation:C}=this._distanceToCenterFromAltElevationPitch(o,this.elevation,k),{x:A,y:R}=Ut(k,x),B=s.a9.fromLngLat(t,o);let $,G,K=s.a_(1,B.y),ie=0;do{if(ie+=1,ie>10)break;G=M/K,$=new s.a9(B.x+A*G,B.y+R*G),K=1/$.meterInMercatorCoordinateUnits()}while(Math.abs(M-G*K)>1e-12);return{center:$.toLngLat(),elevation:C,zoom:s.at(this.height/2/Math.tan(this.fovInRadians/2)/G/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const o=1/this.worldSize,p=s.as(1,this.center.lat)*this.worldSize,g=s.a9.fromLngLat(this.center,this.elevation),x=g.x/o,k=g.y/o,M=g.z/o,C=this.pitch,A=this.bearing,{x:R,y:B,z:$}=Ut(C,A),G=this.cameraToCenterDistance,K=x+G*-R,ie=k+G*-B,ae=M+G*$,{distanceToCenter:ne,clampedElevation:oe}=this._distanceToCenterFromAltElevationPitch(ae/p,t,C),he=ne*p,re=new s.a9((K+R*he)*o,(ie+B*he)*o,0).toLngLat(),de=s.as(1,re.lat),me=s.at(this.height/2/Math.tan(this.fovInRadians/2)/ne/de/this.tileSize);this._elevation=oe,this._center=re,this.setZoom(me)}_distanceToCenterFromAltElevationPitch(t,o,p){const g=-Math.cos(s.ap(p)),x=t-o;let k,M=o;return g*x>=0||Math.abs(g)<.1?(k=1e4,M=t+k*g):k=-x/g,{distanceToCenter:k,clampedElevation:M}}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=s.as(1,this.center.lat)*this.worldSize;return Me(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const o=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/o,t.canonical.y/o,1/o/s.a5,1/o/s.a5]}}class pa{constructor(t,o){this.min=t,this.max=o,this.center=s.a$([],s.b0([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],p=s.b1(this.min),g=s.b1(this.max);for(let x=0;x<o.length;x++)p[x]=o[x]?this.min[x]:this.center[x],g[x]=o[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new pa(p,g)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let o=!0;for(let p=0;p<t.planes.length;p++){const g=this.intersectsPlane(t.planes[p]);if(g===0)return 0;g===1&&(o=!1)}return o?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let o=t[3],p=t[3];for(let g=0;g<3;g++)t[g]>0?(o+=t[g]*this.min[g],p+=t[g]*this.max[g]):(p+=t[g]*this.min[g],o+=t[g]*this.max[g]);return o>=0?2:p<0?0:1}}class Qo{distanceToTile2d(t,o,p,g){const x=g.distanceX([t,o]),k=g.distanceY([t,o]);return Math.hypot(x,k)}getWrap(t,o,p){return p}getTileBoundingVolume(t,o,p,g){var x,k;let M=0,C=0;if(g?.terrain){const R=new s.a2(t.z,o,t.z,t.x,t.y),B=g.terrain.getMinMaxElevation(R);M=(x=B.minElevation)!==null&&x!==void 0?x:Math.min(0,p),C=(k=B.maxElevation)!==null&&k!==void 0?k:Math.max(0,p)}const A=1<<t.z;return new pa([o+t.x/A,t.y/A,M],[o+(t.x+1)/A,(t.y+1)/A,C])}allowVariableZoom(t,o){const p=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,g=s.an(78.5-p/2,0,60);return!!o.terrain||t.pitch>g}allowWorldCopies(){return!0}prepareNextFrame(){}}class Mn{constructor(t,o,p){this.points=t,this.planes=o,this.aabb=p}static fromInvProjectionMatrix(t,o=1,p=0,g,x){const k=x?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],M=Math.pow(2,p),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(($=>(function(G,K,ie,ae){const ne=s.aH([],G,K),oe=1/ne[3]/ie*ae;return s.b6(ne,ne,[oe,oe,1/ne[3],oe])})($,t,o,M)));g&&(function($,G,K,ie){const ae=ie?4:0,ne=ie?0:4;let oe=0;const he=[],re=[];for(let ue=0;ue<4;ue++){const ve=s.b2([],$[ue+ne],$[ue+ae]),De=s.b7(ve);s.a$(ve,ve,1/De),he.push(De),re.push(ve)}for(let ue=0;ue<4;ue++){const ve=s.b8($[ue+ae],re[ue],K);oe=ve!==null&&ve>=0?Math.max(oe,ve):Math.max(oe,he[ue])}const de=(function(ue,ve){const De=s.b2([],ue[ve[0]],ue[ve[1]]),Te=s.b2([],ue[ve[2]],ue[ve[1]]),Pe=[0,0,0,0];return s.b3(Pe,s.b4([],De,Te)),Pe[3]=-s.b5(Pe,ue[ve[0]]),Pe})($,G),me=(function(ue,ve){const De=s.b9(ue),Te=s.ba([],ue,1/De),Pe=s.b2([],ve,s.a$([],Te,s.b5(ve,Te))),Ce=s.b9(Pe);if(Ce>0){const Ge=Math.sqrt(1-Te[3]*Te[3]),We=s.a$([],Te,-Te[3]),$e=s.b0([],We,s.a$([],Pe,Ge/Ce));return s.bb(ve,$e)}return null})(K,de);if(me!==null){const ue=me/s.b5(re[0],de);oe=Math.min(oe,ue)}for(let ue=0;ue<4;ue++){const ve=Math.min(oe,he[ue]);$[ue+ne]=[$[ue+ae][0]+re[ue][0]*ve,$[ue+ae][1]+re[ue][1]*ve,$[ue+ae][2]+re[ue][2]*ve,1]}})(C,k[0],g,x);const A=k.map(($=>{const G=s.b2([],C[$[0]],C[$[1]]),K=s.b2([],C[$[2]],C[$[1]]),ie=s.b3([],s.b4([],G,K)),ae=-s.b5(ie,C[$[1]]);return ie.concat(ae)})),R=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],B=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const $ of C)for(let G=0;G<3;G++)R[G]=Math.min(R[G],$[G]),B[G]=Math.max(B[G],$[G]);return new Mn(C,A,new pa(R,B))}}class rr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,p){return this._helper.interpolatePadding(t,o,p)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,p=!0){this._helper.resize(t,o,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,o){}constructor(t){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(o,p)=>{p=s.an(+p,this.minZoom,this.maxZoom);const g={center:new s.V(o.lng,o.lat),zoom:p};let x=this._helper._lngRange;if(!this._helper._renderWorldCopies&&x===null){const re=179.9999999999;x=[-re,re]}const k=this.tileSize*s.aq(g.zoom);let M=0,C=k,A=0,R=k,B=0,$=0;const{x:G,y:K}=this.size;if(this._helper._latRange){const re=this._helper._latRange;M=s.X(re[1])*k,C=s.X(re[0])*k,C-M<K&&(B=K/(C-M))}x&&(A=s.W(s.Y(x[0])*k,0,k),R=s.W(s.Y(x[1])*k,0,k),R<A&&(R+=k),R-A<G&&($=G/(R-A)));const{x:ie,y:ae}=nt(k,o);let ne,oe;const he=Math.max($||0,B||0);if(he){const re=new s.P($?(R+A)/2:ie,B?(C+M)/2:ae);return g.center=ht(k,re).wrap(),g.zoom+=s.at(he),g}if(this._helper._latRange){const re=K/2;ae-re<M&&(oe=M+re),ae+re>C&&(oe=C-re)}if(x){const re=(A+R)/2;let de=ie;this._helper._renderWorldCopies&&(de=s.W(ie,re-k/2,re+k/2));const me=G/2;de-me<A&&(ne=A+me),de+me>R&&(ne=R-me)}if(ne!==void 0||oe!==void 0){const re=new s.P(ne??ie,oe??ae);g.center=ht(k,re).wrap()}return g},this.applyConstrain=(o,p)=>this._helper.applyConstrain(o,p),this._helper=new ar({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,p)=>this.defaultConstrain(o,p)},t),this._coveringTilesDetailsProvider=new Qo}clone(){const t=new rr;return t.apply(this),t}apply(t,o,p){this._helper.apply(t,o,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const o=[new s.bc(0,t)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new s.P(0,0)),g=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),x=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),k=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),M=Math.floor(Math.min(p.x,g.x,x.x,k.x)),C=Math.floor(Math.max(p.x,g.x,x.x,k.x)),A=1;for(let R=M-A;R<=C+A;R++)R!==0&&o.push(new s.bc(R,t))}return o}getCameraFrustum(){return Mn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const o=this.screenPointToLocation(this.centerPoint,t),p=t?t.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(t,o){const p=s.as(this.elevation,this.center.lat),g=this.screenPointToMercatorCoordinateAtZ(o,p),x=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),k=s.a9.fromLngLat(t),M=new s.a9(k.x-(g.x-x.x),k.y-(g.y-x.y));this.setCenter(M?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,o){return o?this.coordinatePoint(s.a9.fromLngLat(t),o.getElevationForLngLat(t,this),this._pixelMatrix3D):this.coordinatePoint(s.a9.fromLngLat(t))}screenPointToLocation(t,o){var p;return(p=this.screenPointToMercatorCoordinate(t,o))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(t,o){if(o){const p=o.pointCoordinate(t);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,o){const p=o||0,g=[t.x,t.y,0,1],x=[t.x,t.y,1,1];s.aH(g,g,this._pixelMatrixInverse),s.aH(x,x,this._pixelMatrixInverse);const k=g[3],M=x[3],C=g[1]/k,A=x[1]/M,R=g[2]/k,B=x[2]/M,$=R===B?0:(p-R)/(B-R);return new s.a9(s.G.number(g[0]/k,x[0]/M,$)/this.worldSize,s.G.number(C,A,$)/this.worldSize,p)}coordinatePoint(t,o=0,p=this._pixelMatrix){const g=[t.x*this.worldSize,t.y*this.worldSize,o,1];return s.aH(g,g,p),new s.P(g[0]/g[3],g[1]/g[3])}getBounds(){const t=Math.max(0,this._helper._height/2-Vt(this));return new fi().extend(this.screenPointToLocation(new s.P(0,t))).extend(this.screenPointToLocation(new s.P(this._helper._width,t))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(t,o){return o?o.pointCoordinate(t)!=null:t.y>this.height/2-Vt(this)}calculatePosMatrix(t,o=!1,p){var g;const x=(g=t.key)!==null&&g!==void 0?g:s.bd(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),k=o?this._alignedPosMatrixCache:this._posMatrixCache;if(k.has(x)){const A=k.get(x);return p?A.f32:A.f64}const M=At(t,this.worldSize);s.S(M,o?this._alignedProjMatrix:this._viewProjMatrix,M);const C={f64:M,f32:new Float32Array(M)};return k.set(x,C),p?C.f32:C.f64}calculateFogMatrix(t){const o=t.key,p=this._fogMatrixCacheF32;if(p.has(o))return p.get(o);const g=At(t,this.worldSize);return s.S(g,this._fogMatrix,g),p.set(o,new Float32Array(g)),p.get(o)}calculateCenterFromCameraLngLatAlt(t,o,p,g){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,p,g)}_calculateNearFarZIfNeeded(t,o,p){if(!this._helper.autoCalculateNearFarZ)return;const g=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),x=t-g*this._helper._pixelPerMeter/Math.cos(o),k=g<0?x:t,M=Math.PI/2+this.pitchInRadians,C=s.ap(this.fov)*(Math.abs(Math.cos(s.ap(this.roll)))*this.height+Math.abs(Math.sin(s.ap(this.roll)))*this.width)/this.height*(.5+p.y/this.height),A=Math.sin(C)*k/Math.sin(s.an(Math.PI-M-C,.01,Math.PI-.01)),R=Vt(this),B=Math.atan(R/this._helper.cameraToCenterDistance),$=s.ap(.75),G=B>$?2*B*(.5+p.y/(2*R)):$,K=Math.sin(G)*k/Math.sin(s.an(Math.PI-M-G,.01,Math.PI-.01)),ie=Math.min(A,K);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*ie+k),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,o=nt(this.worldSize,this.center),p=o.x,g=o.y;this._helper._pixelPerMeter=s.as(1,this.center.lat)*this.worldSize;const x=s.ap(Math.min(this.pitch,Qe)),k=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(x));let M;this._calculateNearFarZIfNeeded(k,x,t),M=new Float64Array(16),s.be(M,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aB(this._invProjMatrix,M),M[8]=2*-t.x/this._helper._width,M[9]=2*t.y/this._helper._height,this._projectionMatrix=s.bf(M),s.Q(M,M,[1,-1,1]),s.O(M,M,[0,0,-this._helper.cameraToCenterDistance]),s.bg(M,M,-this.rollInRadians),s.bh(M,M,this.pitchInRadians),s.bg(M,M,-this.bearingInRadians),s.O(M,M,[-p,-g,0]),this._mercatorMatrix=s.Q([],M,[this.worldSize,this.worldSize,this.worldSize]),s.Q(M,M,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,M),s.O(M,M,[0,0,-this.elevation]),this._viewProjMatrix=M,this._invViewProjMatrix=s.aB([],M);const C=[0,0,-1,1];s.aH(C,C,this._invViewProjMatrix),this._cameraPosition=[C[0]/C[3],C[1]/C[3],C[2]/C[3]],this._fogMatrix=new Float64Array(16),s.be(this._fogMatrix,this.fovInRadians,this.width/this.height,k,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,s.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.O(this._fogMatrix,this._fogMatrix,[-p,-g,0]),s.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,M);const A=this._helper._width%2/2,R=this._helper._height%2/2,B=Math.cos(this.bearingInRadians),$=Math.sin(-this.bearingInRadians),G=p-Math.round(p)+B*A+$*R,K=g-Math.round(g)+B*R+$*A,ie=new Float64Array(M);if(s.O(ie,ie,[G>.5?G-1:G,K>.5?K-1:K,0]),this._alignedProjMatrix=ie,M=s.aB(new Float64Array(16),this._pixelMatrix),!M)throw new Error("failed to invert matrix");this._pixelMatrixInverse=M,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new s.P(0,0)),o=[t.x*this.worldSize,t.y*this.worldSize,0,1];return s.aH(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=s.as(1,this.center.lat)*this.worldSize;return Me(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,o){const p=s.a9.fromLngLat(t),g=[p.x*this.worldSize,p.y*this.worldSize,o,1];return s.aH(g,g,this._viewProjMatrix),g[2]/g[3]}getProjectionData(t){const{overscaledTileID:o,aligned:p,applyTerrainMatrix:g}=t,x=this._helper.getMercatorTileCoordinates(o),k=o?this.calculatePosMatrix(o,p,!0):null;let M;return M=o&&o.terrainRttPosMatrix32f&&g?o.terrainRttPosMatrix32f:k||s.bi(),{mainMatrix:M,tileMercatorCoords:x,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:M}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,o,p){return 1}transformLightDirection(t){return s.b1(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,o,p,g){const x=this.calculatePosMatrix(p);let k;g?(k=[t,o,g(t,o),1],s.aH(k,k,x)):(k=[t,o,0,1],Yo(k,k,x));const M=k[3];return{point:new s.P(k[0]/M,k[1]/M),signedDistanceFromCamera:M,isOccluded:!1}}populateCache(t){for(const o of t)this.calculatePosMatrix(o)}getMatrixForModel(t,o){const p=s.a9.fromLngLat(t,o),g=p.meterInMercatorCoordinateUnits(),x=s.bj();return s.O(x,x,[p.x,p.y,p.z]),s.bg(x,x,Math.PI),s.bh(x,x,Math.PI/2),s.Q(x,x,[-g,g,g]),x}getProjectionDataForCustomLayer(t=!0){const o=new s.a2(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:t}),g=At(o,this.worldSize);s.S(g,this._viewProjMatrix,g),p.tileMercatorCoords=[0,0,1,1];const x=[s.a5,s.a5,this.worldSize/this._helper.pixelsPerMeter],k=s.bk();return s.Q(k,g,x),p.fallbackMatrix=k,p.mainMatrix=k,p}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function ka(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function hc(v){if(v.useSlerp)if(v.k<1){const t=s.bl(v.startEulerAngles.roll,v.startEulerAngles.pitch,v.startEulerAngles.bearing),o=s.bl(v.endEulerAngles.roll,v.endEulerAngles.pitch,v.endEulerAngles.bearing),p=new Float64Array(4);s.bm(p,t,o,v.k);const g=s.bn(p);v.tr.setRoll(g.roll),v.tr.setPitch(g.pitch),v.tr.setBearing(g.bearing)}else v.tr.setRoll(v.endEulerAngles.roll),v.tr.setPitch(v.endEulerAngles.pitch),v.tr.setBearing(v.endEulerAngles.bearing);else v.tr.setRoll(s.G.number(v.startEulerAngles.roll,v.endEulerAngles.roll,v.k)),v.tr.setPitch(s.G.number(v.startEulerAngles.pitch,v.endEulerAngles.pitch,v.k)),v.tr.setBearing(s.G.number(v.startEulerAngles.bearing,v.endEulerAngles.bearing,v.k))}function vu(v,t,o,p,g){const x=g.padding,k=nt(g.worldSize,o.getNorthWest()),M=nt(g.worldSize,o.getNorthEast()),C=nt(g.worldSize,o.getSouthEast()),A=nt(g.worldSize,o.getSouthWest()),R=s.ap(-p),B=k.rotate(R),$=M.rotate(R),G=C.rotate(R),K=A.rotate(R),ie=new s.P(Math.max(B.x,$.x,K.x,G.x),Math.max(B.y,$.y,K.y,G.y)),ae=new s.P(Math.min(B.x,$.x,K.x,G.x),Math.min(B.y,$.y,K.y,G.y)),ne=ie.sub(ae),oe=(g.width-(x.left+x.right+t.left+t.right))/ne.x,he=(g.height-(x.top+x.bottom+t.top+t.bottom))/ne.y;if(he<0||oe<0)return void ka();const re=Math.min(s.at(g.scale*Math.min(oe,he)),v.maxZoom),de=s.P.convert(v.offset),me=new s.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(s.ap(p)),ue=de.add(me).mult(g.scale/s.aq(re));return{center:ht(g.worldSize,k.add(C).div(2).sub(ue)),zoom:re,bearing:p}}class sr{get useGlobeControls(){return!1}handlePanInertia(t,o){const p=t.mag(),g=Math.abs(Vt(o));return{easingOffset:t.mult(Math.min(.75*g/p,1)),easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(t,o){t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta),t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta)}handleMapControlsPan(t,o,p){t.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(p,t.around)}cameraForBoxAndBearing(t,o,p,g,x){return vu(t,o,p,g,x)}handleJumpToCenterZoom(t,o){t.zoom!==(o.zoom!==void 0?+o.zoom:t.zoom)&&t.setZoom(+o.zoom),o.center!==void 0&&t.setCenter(s.V.convert(o.center))}handleEaseTo(t,o){const p=t.zoom,g=t.padding,x={roll:t.roll,pitch:t.pitch,bearing:t.bearing},k={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},M=o.zoom!==void 0,C=!t.isPaddingEqual(o.padding);let A=!1;const R=M?+o.zoom:t.zoom;let B=t.centerPoint.add(o.offsetAsPoint);const $=t.screenPointToLocation(B),{center:G,zoom:K}=t.applyConstrain(s.V.convert(o.center||$),R??p);Oa(t,G);const ie=nt(t.worldSize,$),ae=nt(t.worldSize,G).sub(ie),ne=s.aq(K-p);return A=K!==p,{easeFunc:oe=>{if(A&&t.setZoom(s.G.number(p,K,oe)),s.bo(x,k)||hc({startEulerAngles:x,endEulerAngles:k,tr:t,k:oe,useSlerp:x.roll!=k.roll}),C&&(t.interpolatePadding(g,o.padding,oe),B=t.centerPoint.add(o.offsetAsPoint)),o.around)t.setLocationAtPoint(o.around,o.aroundPoint);else{const he=s.aq(t.zoom-p),re=K>p?Math.min(2,ne):Math.max(.5,ne),de=Math.pow(re,1-oe),me=ht(t.worldSize,ie.add(ae.mult(oe*de)).mult(he));t.setLocationAtPoint(t.renderWorldCopies?me.wrap():me,B)}},isZooming:A,elevationCenter:G}}handleFlyTo(t,o){const p=o.zoom!==void 0,g=t.zoom,x=t.applyConstrain(s.V.convert(o.center||o.locationAtOffset),p?+o.zoom:g),k=x.center,M=x.zoom;Oa(t,k);const C=nt(t.worldSize,o.locationAtOffset),A=nt(t.worldSize,k).sub(C),R=A.mag(),B=s.aq(M-g);let $;if(o.minZoom!==void 0){const G=Math.min(+o.minZoom,g,M),K=t.applyConstrain(k,G).zoom;$=s.aq(K-g)}return{easeFunc:(G,K,ie,ae)=>{t.setZoom(G===1?M:g+s.at(K));const ne=G===1?k:ht(t.worldSize,C.add(A.mult(ie)).mult(K));t.setLocationAtPoint(t.renderWorldCopies?ne.wrap():ne,ae)},scaleOfZoom:B,targetCenter:k,scaleOfMinZoom:$,pixelPathLength:R}}}class Wt{constructor(t,o,p){this.blendFunction=t,this.blendColor=o,this.mask=p}}Wt.Replace=[1,0],Wt.disabled=new Wt(Wt.Replace,s.bp.transparent,[!1,!1,!1,!1]),Wt.unblended=new Wt(Wt.Replace,s.bp.transparent,[!0,!0,!0,!0]),Wt.alphaBlended=new Wt([1,771],s.bp.transparent,[!0,!0,!0,!0]);const Gr=2305;class Pt{constructor(t,o,p){this.enable=t,this.mode=o,this.frontFace=p}}Pt.disabled=new Pt(!1,1029,Gr),Pt.backCCW=new Pt(!0,1029,Gr),Pt.frontCCW=new Pt(!0,1028,Gr);class _t{constructor(t,o,p){this.func=t,this.mask=o,this.range=p}}_t.ReadOnly=!1,_t.ReadWrite=!0,_t.disabled=new _t(519,_t.ReadOnly,[0,1]);const qr=7680;class Ct{constructor(t,o,p,g,x,k){this.test=t,this.ref=o,this.mask=p,this.fail=g,this.depthFail=x,this.pass=k}}Ct.disabled=new Ct({func:519,mask:0},0,0,qr,qr,qr);const Bs=new WeakMap;function qn(v){var t;if(Bs.has(v))return Bs.get(v);{const o=(t=v.getParameter(v.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return Bs.set(v,o),o}}class Wr{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const o=t.context,p=o.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const g=new s.aW;g.emplaceBack(-1,-1),g.emplaceBack(2,-1),g.emplaceBack(-1,2);const x=new s.aY;x.emplaceBack(0,1,2),this._fullscreenTriangle=new qt(o.createVertexBuffer(g,ja.members),o.createIndexBuffer(x),s.aX.simpleSegment(0,0,g.length,x.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(p.TEXTURE1);const k=p.createTexture();p.bindTexture(p.TEXTURE_2D,k),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(k),qn(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,o){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,o=t.gl;t.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,o){const p=this._cachedRenderContext.context,g=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:s.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,g.TRIANGLES,_t.disabled,Ct.disabled,Wt.unblended,Pt.disabled,((x,k)=>({u_input:x,u_output_expected:k}))(t,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&qn(g)){g.bindBuffer(g.PIXEL_PACK_BUFFER,this._pbo),g.readBuffer(g.COLOR_ATTACHMENT0),g.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),g.bindBuffer(g.PIXEL_PACK_BUFFER,null);const x=g.fenceSync(g.SYNC_GPU_COMMANDS_COMPLETE,0);g.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:x}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&qn(t)){const o=t.clientWaitSync(this._readbackQueue.sync,0,0);if(o===t.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Wr._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let o=0;return o+=t[0]/256,o+=t[1]/65536,o+=t[2]/16777216,t[3]<127&&(o=-o),o/128}}const $a=s.a5/128;function fc(v,t){const o=v.granularity!==void 0?Math.max(v.granularity,1):1,p=o+(v.generateBorders?2:0),g=o+(v.extendToNorthPole||v.generateBorders?1:0)+(v.extendToSouthPole||v.generateBorders?1:0),x=p+1,k=g+1,M=v.generateBorders?-1:0,C=v.generateBorders||v.extendToNorthPole?-1:0,A=o+(v.generateBorders?1:0),R=o+(v.generateBorders||v.extendToSouthPole?1:0),B=x*k,$=p*g*6,G=x*k>65536;if(G&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const K=G||t==="32bit",ie=new Int16Array(2*B);let ae=0;for(let he=C;he<=R;he++)for(let re=M;re<=A;re++){let de=re/o*s.a5;re===-1&&(de=-$a),re===o+1&&(de=s.a5+$a);let me=he/o*s.a5;he===-1&&(me=v.extendToNorthPole?s.br:-$a),he===o+1&&(me=v.extendToSouthPole?s.bs:s.a5+$a),ie[ae++]=de,ie[ae++]=me}const ne=K?new Uint32Array($):new Uint16Array($);let oe=0;for(let he=0;he<g;he++)for(let re=0;re<p;re++){const de=re+1+he*x,me=re+(he+1)*x,ue=re+1+(he+1)*x;ne[oe++]=re+he*x,ne[oe++]=me,ne[oe++]=de,ne[oe++]=de,ne[oe++]=me,ne[oe++]=ue}return{vertices:ie.buffer.slice(0),indices:ne.buffer.slice(0),uses32bitIndices:K}}const Vs=new s.aV({fill:new s.bt(128,2),line:new s.bt(512,0),tile:new s.bt(128,32),stencil:new s.bt(128,1),circle:3});class xu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return li.projectionGlobe}get vertexShaderPreludeCode(){return li.projectionMercator.vertexSource}get subdivisionGranularity(){return Vs}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new Wr(t));const o=s.X(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,g=this._errorMeasurement.updateErrorLoop(o,p),x=te();g!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=g,this._errorMeasurementLastChangeTime=x);const k=Math.min(Math.max((x-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bv(k))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,o,p,g,x){const k=(x==="stencil"?Vs.stencil:Vs.tile).getGranularityForZoomLevel(o.z);return this._getMesh(t,{granularity:k,generateBorders:p,extendToNorthPole:o.y===0&&g,extendToSouthPole:o.y===(1<<o.z)-1&&g})}_getMesh(t,o){const p=this._getMeshKey(o);if(p in this._tileMeshCache)return this._tileMeshCache[p];const g=(function(x,k){const M=fc(k,"16bit"),C=s.aW.deserialize({arrayBuffer:M.vertices,length:M.vertices.byteLength/2/2}),A=s.aY.deserialize({arrayBuffer:M.indices,length:M.indices.byteLength/2/3});return new qt(x.createVertexBuffer(C,ja.members),x.createIndexBuffer(A),s.aX.simpleSegment(0,0,C.length,A.length))})(t,o);return this._tileMeshCache[p]=g,g}recalculate(t){}hasTransition(){const t=te();let o=!1;return o=o||(t-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const zf=new s.t({type:new s.D(s.u.projection.type)});class pc extends s.E{constructor(t){super(),this._transitionable=new s.x(zf,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0)),this._mercatorProjection=new vn,this._verticalPerspectiveProjection=new xu}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof s.bw){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,o,p,g,x){return this.currentProjection.getMeshFromTileID(t,o,p,g,x)}setProjection(t){this._transitionable.setValue("type",t?.type||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function xn(v){const t=or(v.worldSize,v.center.lat);return 2*Math.PI*t}function ma(v,t,o,p,g){const x=1/(1<<g),k=t/s.a5*x+p*x,M=s.by((v/s.a5*x+o*x)*Math.PI*2+Math.PI,2*Math.PI),C=2*Math.atan(Math.exp(Math.PI-k*Math.PI*2))-.5*Math.PI,A=Math.cos(C),R=new Float64Array(3);return R[0]=Math.sin(M)*A,R[1]=Math.sin(C),R[2]=Math.cos(M)*A,R}function ii(v){return(function(t,o){const p=Math.cos(o),g=new Float64Array(3);return g[0]=Math.sin(t)*p,g[1]=Math.sin(o),g[2]=Math.cos(t)*p,g})(v.lng*Math.PI/180,v.lat*Math.PI/180)}function or(v,t){return v/(2*Math.PI)/Math.cos(t*Math.PI/180)}function bu(v){const t=Math.asin(v[1])/Math.PI*180,o=Math.sqrt(v[0]*v[0]+v[2]*v[2]);if(o>1e-6){const p=v[0]/o,g=Math.acos(v[2]/o),x=(p>0?g:-g)/Math.PI*180;return new s.V(s.W(x,-180,180),t)}return new s.V(0,t)}function Ns(v){return Math.cos(v*Math.PI/180)}function gi(v,t){const o=Ns(v),p=Ns(t);return s.at(p/o)}function mc(v,t){const o=v.rotate(t.bearingInRadians),p=t.zoom+gi(t.center.lat,0),g=s.bu(1/Ns(t.center.lat),1/Ns(Math.min(Math.abs(t.center.lat),60)),s.bx(p,7,3,0,1)),x=360/xn({worldSize:t.worldSize,center:{lat:t.center.lat}});return new s.V(t.center.lng-o.x*x*g,s.an(t.center.lat+o.y*x,-s.ao,s.ao))}function wu(v){const t=.5*v,o=Math.sin(t),p=Math.cos(t);return Math.log(o+p)-Math.log(p-o)}function gc(v,t,o,p){const g=v.lat+o*p;if(Math.abs(o)>1){const x=(Math.sign(v.lat+o)!==Math.sign(v.lat)?-Math.abs(v.lat):Math.abs(v.lat))*Math.PI/180,k=Math.abs(v.lat+o)*Math.PI/180,M=wu(x+p*(k-x)),C=wu(x),A=wu(k);return new s.V(v.lng+t*((M-C)/(A-C)),g)}return new s.V(v.lng+t*p,g)}class Rf{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,o,p,g){const x=`${t.z}_${t.x}_${t.y}_${g?.terrain?"t":""}`,k=this._cache.get(x);if(k)return k;const M=this._cachePrevious.get(x);if(M)return this._cache.set(x,M),M;const C=this._boundingVolumeFactory(t,o,p,g);return this._cache.set(x,C),this._hadAnyChanges=!0,C}}class Hr{constructor(t,o,p,g){this.min=p,this.max=g,this.points=t,this.planes=o}static fromAabb(t,o){const p=[];for(let g=0;g<8;g++)p.push([1&~g?t[0]:o[0],(g>>1&1)==1?o[1]:t[1],(g>>2&1)==1?o[2]:t[2]]);return new Hr(p,[[-1,0,0,o[0]],[1,0,0,-t[0]],[0,-1,0,o[1]],[0,1,0,-t[1]],[0,0,-1,o[2]],[0,0,1,-t[2]]],t,o)}static fromCenterSizeAngles(t,o,p){const g=s.bB([],p[0],p[1],p[2]),x=s.bC([],[o[0],0,0],g),k=s.bC([],[0,o[1],0],g),M=s.bC([],[0,0,o[2]],g),C=[...t],A=[...t];for(let B=0;B<8;B++)for(let $=0;$<3;$++){const G=t[$]+x[$]*(1&~B?-1:1)+k[$]*((B>>1&1)==1?1:-1)+M[$]*((B>>2&1)==1?1:-1);C[$]=Math.min(C[$],G),A[$]=Math.max(A[$],G)}const R=[];for(let B=0;B<8;B++){const $=[...t];s.b0($,$,s.a$([],x,1&~B?-1:1)),s.b0($,$,s.a$([],k,(B>>1&1)==1?1:-1)),s.b0($,$,s.a$([],M,(B>>2&1)==1?1:-1)),R.push($)}return new Hr(R,[[...x,-s.b5(x,R[0])],[...k,-s.b5(k,R[0])],[...M,-s.b5(M,R[0])],[-x[0],-x[1],-x[2],-s.b5(x,R[7])],[-k[0],-k[1],-k[2],-s.b5(k,R[7])],[-M[0],-M[1],-M[2],-s.b5(M,R[7])]],C,A)}intersectsFrustum(t){let o=!0;const p=this.points.length,g=this.planes.length,x=t.planes.length,k=t.points.length;for(let M=0;M<x;M++){const C=t.planes[M];let A=0;for(let R=0;R<p;R++){const B=this.points[R];C[0]*B[0]+C[1]*B[1]+C[2]*B[2]+C[3]>=0&&A++}if(A===0)return 0;A<p&&(o=!1)}if(o)return 2;for(let M=0;M<g;M++){const C=this.planes[M];let A=0;for(let R=0;R<k;R++){const B=t.points[R];C[0]*B[0]+C[1]*B[1]+C[2]*B[2]+C[3]>=0&&A++}if(A===0)return 0}return 1}intersectsPlane(t){const o=this.points.length;let p=0;for(let g=0;g<o;g++){const x=this.points[g];t[0]*x[0]+t[1]*x[1]+t[2]*x[2]+t[3]>=0&&p++}return p===o?2:p===0?0:1}}function el(v,t,o){const p=v-t;return p<0?-p:Math.max(0,p-o)}function Zr(v,t,o,p,g){const x=v-o;let k;return k=x<0?Math.min(-x,1+x-g):x>1?Math.min(Math.max(x-g,0),1-x):0,Math.max(k,el(t,p,g))}class ku{constructor(){this._boundingVolumeCache=new Rf(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,o,p,g){const x=1<<p.z,k=1/x,M=p.x/x,C=p.y/x;let A=2;return A=Math.min(A,Zr(t,o,M,C,k)),A=Math.min(A,Zr(t,o,M+.5,-C-k,k)),A=Math.min(A,Zr(t,o,M+.5,2-C-k,k)),A}getWrap(t,o,p){const g=1<<o.z,x=1/g,k=o.x/g,M=el(t.x,k,x),C=el(t.x,k-1,x),A=el(t.x,k+1,x),R=Math.min(M,C,A);return R===A?1:R===C?-1:0}allowVariableZoom(t,o){return Qt(t,o)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,o,p,g){return this._boundingVolumeCache.getTileBoundingVolume(t,o,p,g)}_computeTileBoundingVolume(t,o,p,g){var x,k;let M=0,C=0;if(g?.terrain){const A=new s.a2(t.z,o,t.z,t.x,t.y),R=g.terrain.getMinMaxElevation(A);M=(x=R.minElevation)!==null&&x!==void 0?x:Math.min(0,p),C=(k=R.maxElevation)!==null&&k!==void 0?k:Math.max(0,p)}if(M/=s.bE,C/=s.bE,M+=1,C+=1,t.z<=0)return Hr.fromAabb([-C,-C,-C],[C,C,C]);if(t.z===1)return Hr.fromAabb([t.x===0?-C:0,t.y===0?0:-C,-C],[t.x===0?0:C,t.y===0?C:0,C]);{const A=[ma(0,0,t.x,t.y,t.z),ma(s.a5,0,t.x,t.y,t.z),ma(s.a5,s.a5,t.x,t.y,t.z),ma(0,s.a5,t.x,t.y,t.z)],R=[];for(const Pe of A)R.push(s.a$([],Pe,C));if(C!==M)for(const Pe of A)R.push(s.a$([],Pe,M));t.y===0&&R.push([0,1,0]),t.y===(1<<t.z)-1&&R.push([0,-1,0]);const B=[1,1,1],$=[-1,-1,-1];for(const Pe of R)for(let Ce=0;Ce<3;Ce++)B[Ce]=Math.min(B[Ce],Pe[Ce]),$[Ce]=Math.max($[Ce],Pe[Ce]);const G=ma(s.a5/2,s.a5/2,t.x,t.y,t.z),K=s.b4([],[0,1,0],G);s.b3(K,K);const ie=s.b4([],G,K);s.b3(ie,ie);const ae=s.b4([],A[2],A[1]);s.b3(ae,ae);const ne=s.b4([],A[0],A[3]);s.b3(ne,ne),R.push(s.a$([],G,C)),t.y>=(1<<t.z)/2&&R.push(s.a$([],ma(s.a5/2,0,t.x,t.y,t.z),C)),t.y<(1<<t.z)/2&&R.push(s.a$([],ma(s.a5/2,s.a5,t.x,t.y,t.z),C));const oe=Us(G,R),he=Us(ie,R),re=[-G[0],-G[1],-G[2],oe.max],de=[G[0],G[1],G[2],-oe.min],me=[-ie[0],-ie[1],-ie[2],he.max],ue=[ie[0],ie[1],ie[2],-he.min],ve=[...ae,0],De=[...ne,0],Te=[];return t.y===0?Te.push(s.bD(De,ve,re),s.bD(De,ve,de)):Te.push(s.bD(me,ve,re),s.bD(me,ve,de),s.bD(me,De,re),s.bD(me,De,de)),t.y===(1<<t.z)-1?Te.push(s.bD(De,ve,re),s.bD(De,ve,de)):Te.push(s.bD(ue,ve,re),s.bD(ue,ve,de),s.bD(ue,De,re),s.bD(ue,De,de)),new Hr(Te,[re,de,me,ue,ve,De],B,$)}}}function Us(v,t){let o=1/0,p=-1/0;for(const g of t){const x=s.b5(v,g);o=Math.min(o,x),p=Math.max(p,x)}return{min:o,max:p}}class Kr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,p){return this._helper.interpolatePadding(t,o,p)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o){this._helper.resize(t,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(t){this._cachedClippingPlane=s.bF(),this._projectionMatrix=s.bj(),this._globeViewProjMatrix32f=s.bi(),this._globeViewProjMatrixNoCorrection=s.bj(),this._globeViewProjMatrixNoCorrectionInverted=s.bj(),this._globeProjMatrixInverted=s.bj(),this._cameraPosition=s.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(o,p)=>{const g=s.an(o.lat,-s.ao,s.ao),x=s.an(+p,this.minZoom+gi(0,g),this.maxZoom);return{center:new s.V(o.lng,g),zoom:x}},this.applyConstrain=(o,p)=>this._helper.applyConstrain(o,p),this._helper=new ar({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,p)=>this.defaultConstrain(o,p)},t),this._coveringTilesDetailsProvider=new ku}clone(){const t=new Kr;return t.apply(this),t}apply(t,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=s.bz();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:o,applyGlobeMatrix:p}=t,g=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:g,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const o=this.pitchInRadians,p=this.cameraToCenterDistance/t,g=Math.sin(o)*p,x=Math.cos(o)*p+1,k=1/Math.sqrt(g*g+x*x)*1;let M=-g,C=x;const A=Math.sqrt(M*M+C*C);M/=A,C/=A;const R=[0,M,C];s.bG(R,R,[0,0,0],-this.bearingInRadians),s.bH(R,R,[0,0,0],-1*this.center.lat*Math.PI/180),s.bI(R,R,[0,0,0],this.center.lng*Math.PI/180);const B=1/s.b7(R);return s.a$(R,R,B),[...R,-k*B]}isLocationOccluded(t){return!this.isSurfacePointVisible(ii(t))}transformLightDirection(t){const o=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,g=Math.cos(p),x=[Math.sin(o)*g,Math.sin(p),Math.cos(o)*g],k=[x[2],0,-x[0]],M=[0,0,0];s.b4(M,k,x),s.b3(k,k),s.b3(M,M);const C=[0,0,0];return s.b3(C,[k[0]*t[0]+M[0]*t[1]+x[0]*t[2],k[1]*t[0]+M[1]*t[1]+x[1]*t[2],k[2]*t[0]+M[2]*t[1]+x[2]*t[2]]),C}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,o,p){const g=(function(M,C,A){const R=1/(1<<A.z);return new s.a9(M/s.a5*R+A.x*R,C/s.a5*R+A.y*R)})(t,o,p.canonical),x=(k=g.y,[s.by(g.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-k*Math.PI*2))-.5*Math.PI]);var k;return this.getCircleRadiusCorrection()/Math.cos(x[1])}projectTileCoordinates(t,o,p,g){const x=p.canonical,k=ma(t,o,x.x,x.y,x.z),M=1+(g?g(t,o):0)/s.bE,C=[k[0]*M,k[1]*M,k[2]*M,1];s.aH(C,C,this._globeViewProjMatrixNoCorrection);const A=this._cachedClippingPlane,R=A[0]*k[0]+A[1]*k[1]+A[2]*k[2]+A[3]<0;return{point:new s.P(C[0]/C[3],C[1]/C[3]),signedDistanceFromCamera:C[3],isOccluded:R}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=or(this.worldSize,this.center.lat),o=s.bk(),p=s.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),s.be(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const g=this.centerOffset;o[8]=2*-g.x/this._helper._width,o[9]=2*g.y/this._helper._height,this._projectionMatrix=s.bf(o),this._globeProjMatrixInverted=s.bk(),s.aB(this._globeProjMatrixInverted,o),s.O(o,o,[0,0,-this.cameraToCenterDistance]),s.bg(o,o,this.rollInRadians),s.bh(o,o,-this.pitchInRadians),s.bg(o,o,this.bearingInRadians),s.O(o,o,[0,0,-t]);const x=s.bz();x[0]=t,x[1]=t,x[2]=t,s.bh(p,o,this.center.lat*Math.PI/180),s.bJ(p,p,-this.center.lng*Math.PI/180),s.Q(p,p,x),this._globeViewProjMatrixNoCorrection=p,s.bh(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bJ(o,o,-this.center.lng*Math.PI/180),s.Q(o,o,x),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=s.bk(),s.aB(this._globeViewProjMatrixNoCorrectionInverted,p);const k=s.bz();this._cameraPosition=s.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/t,s.bG(this._cameraPosition,this._cameraPosition,k,-this.rollInRadians),s.bH(this._cameraPosition,this._cameraPosition,k,this.pitchInRadians),s.bG(this._cameraPosition,this._cameraPosition,k,-this.bearingInRadians),s.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bH(this._cameraPosition,this._cameraPosition,k,-this.center.lat*Math.PI/180),s.bI(this._cameraPosition,this._cameraPosition,k,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const M=s.bf(this._globeViewProjMatrixNoCorrectionInverted);s.Q(M,M,[1,1,-1]),this._cachedFrustum=Mn.fromInvProjectionMatrix(M,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){s.w("calculateFogMatrix is not supported on globe projection.");const o=s.bk();return s.ar(o),o}getVisibleUnwrappedCoordinates(t){return[new s.bc(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=ii(t);s.a$(p,p,1+o/s.bE);const g=s.bF();return s.aH(g,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),g[2]/g[3]}populateCache(t){}getBounds(){const t=.5*this.width,o=.5*this.height,p=[new s.P(0,0),new s.P(t,0),new s.P(this.width,0),new s.P(this.width,o),new s.P(this.width,this.height),new s.P(t,this.height),new s.P(0,this.height),new s.P(0,o)],g=[];for(const B of p)g.push(this.unprojectScreenPoint(B));let x=0,k=0,M=0,C=0;const A=this.center;for(const B of g){const $=s.bK(A.lng,B.lng),G=s.bK(A.lat,B.lat);$<k&&(k=$),$>x&&(x=$),G<C&&(C=G),G>M&&(M=G)}const R=[A.lng+k,A.lat+C,A.lng+x,A.lat+M];return this.isSurfacePointOnScreen([0,1,0])&&(R[3]=90,R[0]=-180,R[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(R[1]=-90,R[0]=-180,R[2]=180),new fi(R)}calculateCenterFromCameraLngLatAlt(t,o,p,g){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,p,g)}setLocationAtPoint(t,o){const p=ii(this.unprojectScreenPoint(o)),g=ii(t),x=s.bz();s.bL(x);const k=s.bz();s.bI(k,p,x,-this.center.lng*Math.PI/180),s.bH(k,k,x,this.center.lat*Math.PI/180);const M=g[0]*g[0]+g[2]*g[2],C=k[0]*k[0];if(M<C)return;const A=Math.sqrt(M-C),R=-A,B=s.bM(g[0],g[2],k[0],A),$=s.bM(g[0],g[2],k[0],R),G=s.bz();s.bI(G,g,x,-B);const K=s.bM(G[1],G[2],k[1],k[2]),ie=s.bz();s.bI(ie,g,x,-$);const ae=s.bM(ie[1],ie[2],k[1],k[2]),ne=.5*Math.PI,oe=K>=-ne&&K<=ne,he=ae>=-ne&&ae<=ne;let re,de;if(oe&&he){const De=this.center.lng*Math.PI/180,Te=this.center.lat*Math.PI/180;s.bN(B,De)+s.bN(K,Te)<s.bN($,De)+s.bN(ae,Te)?(re=B,de=K):(re=$,de=ae)}else if(oe)re=B,de=K;else{if(!he)return;re=$,de=ae}const me=re/Math.PI*180,ue=de/Math.PI*180,ve=this.center.lat;this.setCenter(new s.V(me,s.an(ue,-90,90))),this.setZoom(this.zoom+gi(ve,this.center.lat))}locationToScreenPoint(t,o){const p=ii(t);if(o){const g=o.getElevationForLngLatZoom(t,this._helper._tileZoom);s.a$(p,p,1+g/s.bE)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(t){const o=s.bF();return s.aH(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new s.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,o){if(o){const p=o.pointCoordinate(t);if(p)return p}return s.a9.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,o){var p;return(p=this.screenPointToMercatorCoordinate(t,o))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(t,o){const p=this._cameraPosition,g=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(p,g)}getRayDirectionFromPixel(t){const o=s.bF();o[0]=t.x/this.width*2-1,o[1]=-1*(t.y/this.height*2-1),o[2]=1,o[3]=1,s.aH(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const p=s.bz();p[0]=o[0]-this._cameraPosition[0],p[1]=o[1]-this._cameraPosition[1],p[2]=o[2]-this._cameraPosition[2];const g=s.bz();return s.b3(g,p),g}isSurfacePointVisible(t){const o=this._cachedClippingPlane;return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const o=s.bF();return s.aH(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(t,o){const p=s.b5(t,o),g=s.bz(),x=s.bz();s.a$(x,o,p),s.b2(g,t,x);const k=1-s.b5(g,g);if(k<0)return null;const M=s.b5(t,t)-1,C=-p+(p<0?1:-1)*Math.sqrt(k),A=M/C,R=C;return{tMin:Math.min(A,R),tMax:Math.max(A,R)}}unprojectScreenPoint(t){const o=this._cameraPosition,p=this.getRayDirectionFromPixel(t),g=this.rayPlanetIntersection(o,p);if(g){const R=s.bz();s.b0(R,o,[p[0]*g.tMin,p[1]*g.tMin,p[2]*g.tMin]);const B=s.bz();return s.b3(B,R),bu(B)}const x=this._cachedClippingPlane,k=x[0]*p[0]+x[1]*p[1]+x[2]*p[2],M=-s.bb(x,o)/k,C=s.bz();if(M>0)s.b0(C,o,[p[0]*M,p[1]*M,p[2]*M]);else{const R=s.bz();s.b0(R,o,[2*p[0],2*p[1],2*p[2]]);const B=s.bb(this._cachedClippingPlane,R);s.b2(C,R,[this._cachedClippingPlane[0]*B,this._cachedClippingPlane[1]*B,this._cachedClippingPlane[2]*B])}const A=(function(R){const B=s.bz();return B[0]=R[0]*-R[3],B[1]=R[1]*-R[3],B[2]=R[2]*-R[3],{center:B,radius:Math.sqrt(1-R[3]*R[3])}})(x);return bu((function(R,B,$){const G=s.bz();s.b2(G,$,R);const K=s.bz();return s.bA(K,R,G,B/s.b9(G)),K})(A.center,A.radius,C))}getMatrixForModel(t,o){const p=s.V.convert(t),g=1/s.bE,x=s.bj();return s.bJ(x,x,p.lng/180*Math.PI),s.bh(x,x,-p.lat/180*Math.PI),s.O(x,x,[0,0,1+o/s.bE]),s.bh(x,x,.5*Math.PI),s.Q(x,x,[g,g,g]),x}getProjectionDataForCustomLayer(t=!0){const o=this.getProjectionData({overscaledTileID:new s.a2(0,0,0,0,0),applyGlobeMatrix:t});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(t){}}class Yr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,p){return this._helper.interpolatePadding(t,o,p)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,p=!0){this._helper.resize(t,o,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,o){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(t){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(o,p)=>this.currentTransform.defaultConstrain(o,p),this.applyConstrain=(o,p)=>this._helper.applyConstrain(o,p),this._helper=new ar({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,p)=>this.defaultConstrain(o,p)},t),this._globeness=1,this._mercatorTransform=new rr,this._verticalPerspectiveTransform=new Kr}clone(){const t=new Yr;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const o=this._mercatorTransform.getProjectionData(t),p=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:o.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return s.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,o,p){const g=this._mercatorTransform.getPitchedTextCorrection(t,o,p),x=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,o,p);return s.bu(g,x,this._globeness)}projectTileCoordinates(t,o,p,g){return this.currentTransform.projectTileCoordinates(t,o,p,g)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){return this.currentTransform.lngLatToCameraDepth(t,o)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(t,o,p,g){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,p,g)}setLocationAtPoint(t,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,o){return this.currentTransform.locationToScreenPoint(t,o)}screenPointToMercatorCoordinate(t,o){return this.currentTransform.screenPointToMercatorCoordinate(t,o)}screenPointToLocation(t,o){return this.currentTransform.screenPointToLocation(t,o)}isPointOnMapSurface(t,o){return this.currentTransform.isPointOnMapSurface(t,o)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,o){return this.currentTransform.getMatrixForModel(t,o)}getProjectionDataForCustomLayer(t=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return o;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return p.fallbackMatrix=o.mainMatrix,p}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class Fi{get useGlobeControls(){return!0}handlePanInertia(t,o){const p=mc(t,o);return Math.abs(p.lng-o.center.lng)>180&&(p.lng=o.center.lng+179.5*Math.sign(p.lng-o.center.lng)),{easingCenter:p,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,o){const p=t.around,g=o.screenPointToLocation(p);t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta);const x=o.zoom;t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta);const k=o.zoom-x;if(k===0)return;const M=s.bK(o.center.lng,g.lng),C=M/(Math.abs(M/180)+1),A=s.bK(o.center.lat,g.lat),R=o.getRayDirectionFromPixel(p),B=o.cameraPosition,$=-1*s.b5(B,R),G=s.bz();s.b0(G,B,[R[0]*$,R[1]*$,R[2]*$]);const K=s.b7(G)-1,ie=Math.exp(.5*-Math.max(K-.3,0)),ae=or(o.worldSize,o.center.lat)/Math.min(o.width,o.height),ne=s.bx(ae,.9,.5,1,.25),oe=(1-s.aq(-k))*Math.min(ie,ne),he=o.center.lat,re=o.zoom,de=new s.V(o.center.lng+C*oe,s.an(o.center.lat+A*oe,-s.ao,s.ao));o.setLocationAtPoint(g,p);const me=o.center,ue=s.bx(Math.abs(M),45,85,0,1),ve=s.bx(ae,.75,.35,0,1),De=Math.pow(Math.max(ue,ve),.25),Te=s.bK(me.lng,de.lng),Pe=s.bK(me.lat,de.lat);o.setCenter(new s.V(me.lng+Te*De,me.lat+Pe*De).wrap()),o.setZoom(re+gi(he,o.center.lat))}handleMapControlsPan(t,o,p){if(!t.panDelta)return;const g=o.center.lat,x=o.zoom;o.setCenter(mc(t.panDelta,o).wrap()),o.setZoom(x+gi(g,o.center.lat))}cameraForBoxAndBearing(t,o,p,g,x){const k=vu(t,o,p,g,x),M=o.left/x.width*2-1,C=(x.width-o.right)/x.width*2-1,A=o.top/x.height*-2+1,R=(x.height-o.bottom)/x.height*-2+1,B=s.bK(p.getWest(),p.getEast())<0,$=B?p.getEast():p.getWest(),G=B?p.getWest():p.getEast(),K=Math.max(p.getNorth(),p.getSouth()),ie=Math.min(p.getNorth(),p.getSouth()),ae=$+.5*s.bK($,G),ne=K+.5*s.bK(K,ie),oe=x.clone();oe.setCenter(k.center),oe.setBearing(k.bearing),oe.setPitch(0),oe.setRoll(0),oe.setZoom(k.zoom);const he=oe.modelViewProjectionMatrix,re=[ii(p.getNorthWest()),ii(p.getNorthEast()),ii(p.getSouthWest()),ii(p.getSouthEast()),ii(new s.V(G,ne)),ii(new s.V($,ne)),ii(new s.V(ae,K)),ii(new s.V(ae,ie))],de=ii(k.center);let me=Number.POSITIVE_INFINITY;for(const ue of re)M<0&&(me=Fi.getLesserNonNegativeNonNull(me,Fi.solveVectorScale(ue,de,he,"x",M))),C>0&&(me=Fi.getLesserNonNegativeNonNull(me,Fi.solveVectorScale(ue,de,he,"x",C))),A>0&&(me=Fi.getLesserNonNegativeNonNull(me,Fi.solveVectorScale(ue,de,he,"y",A))),R<0&&(me=Fi.getLesserNonNegativeNonNull(me,Fi.solveVectorScale(ue,de,he,"y",R)));if(Number.isFinite(me)&&me!==0)return k.zoom=oe.zoom+s.at(me),k;ka()}handleJumpToCenterZoom(t,o){const p=t.center.lat,g=t.applyConstrain(o.center?s.V.convert(o.center):t.center,t.zoom).center;t.setCenter(g.wrap());const x=o.zoom!==void 0?+o.zoom:t.zoom+gi(p,g.lat);t.zoom!==x&&t.setZoom(x)}handleEaseTo(t,o){const p=t.zoom,g=t.center,x=t.padding,k={roll:t.roll,pitch:t.pitch,bearing:t.bearing},M={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},C=o.zoom!==void 0,A=!t.isPaddingEqual(o.padding);let R=!1;const B=o.center?s.V.convert(o.center):g,$=t.applyConstrain(B,p).center;Oa(t,$);const G=t.clone();G.setCenter($),G.setZoom(C?+o.zoom:p+gi(g.lat,B.lat)),G.setBearing(o.bearing);const K=new s.P(s.an(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),s.an(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));G.setLocationAtPoint($,K);const ie=(o.offset&&o.offsetAsPoint.mag())>0?G.center:$,ae=C?+o.zoom:p+gi(g.lat,ie.lat),ne=p+gi(g.lat,0),oe=ae+gi(ie.lat,0),he=s.bK(g.lng,ie.lng),re=s.bK(g.lat,ie.lat),de=s.aq(oe-ne);return R=ae!==p,{easeFunc:me=>{if(s.bo(k,M)||hc({startEulerAngles:k,endEulerAngles:M,tr:t,k:me,useSlerp:k.roll!=M.roll}),A&&t.interpolatePadding(x,o.padding,me),o.around)s.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(o.around,o.aroundPoint);else{const ue=oe>ne?Math.min(2,de):Math.max(.5,de),ve=Math.pow(ue,1-me),De=gc(g,he,re,me*ve);t.setCenter(De.wrap())}if(R){const ue=s.G.number(ne,oe,me)+gi(0,t.center.lat);t.setZoom(ue)}},isZooming:R,elevationCenter:ie}}handleFlyTo(t,o){const p=o.zoom!==void 0,g=t.center,x=t.zoom,k=t.padding,M=!t.isPaddingEqual(o.padding),C=t.applyConstrain(s.V.convert(o.center||o.locationAtOffset),x).center,A=p?+o.zoom:t.zoom+gi(t.center.lat,C.lat),R=t.clone();R.setCenter(C),R.setZoom(A),R.setBearing(o.bearing);const B=new s.P(s.an(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),s.an(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));R.setLocationAtPoint(C,B);const $=R.center;Oa(t,$);const G=(function(re,de,me){const ue=ii(de),ve=ii(me),De=s.b5(ue,ve),Te=Math.acos(De),Pe=xn(re);return Te/(2*Math.PI)*Pe})(t,g,$),K=x+gi(g.lat,0),ie=A+gi($.lat,0),ae=s.aq(ie-K);let ne;if(typeof o.minZoom=="number"){const re=+o.minZoom+gi($.lat,0),de=Math.min(re,K,ie)+gi(0,$.lat),me=t.applyConstrain($,de).zoom+gi($.lat,0);ne=s.aq(me-K)}const oe=s.bK(g.lng,$.lng),he=s.bK(g.lat,$.lat);return{easeFunc:(re,de,me,ue)=>{const ve=gc(g,oe,he,me);M&&t.interpolatePadding(k,o.padding,re);const De=re===1?$:ve;t.setCenter(De.wrap());const Te=K+s.at(de);t.setZoom(re===1?A:Te+gi(0,De.lat))},scaleOfZoom:ae,targetCenter:$,scaleOfMinZoom:ne,pixelPathLength:G}}static solveVectorScale(t,o,p,g,x){const k=g==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],M=[p[3],p[7],p[11],p[15]],C=t[0]*k[0]+t[1]*k[1]+t[2]*k[2],A=t[0]*M[0]+t[1]*M[1]+t[2]*M[2],R=o[0]*k[0]+o[1]*k[1]+o[2]*k[2],B=o[0]*M[0]+o[1]*M[1]+o[2]*M[2];return R+x*A===C+x*B||M[3]*(C-R)+k[3]*(B-A)+C*B==R*A?null:(R+k[3]-x*B-x*M[3])/(R-C-x*B+x*A)}static getLesserNonNegativeNonNull(t,o){return o!==null&&o>=0&&o<t?o:t}}class _c{constructor(t){this._globe=t,this._mercatorCameraHelper=new sr,this._verticalPerspectiveCameraHelper=new Fi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,o){return this.currentHelper.handlePanInertia(t,o)}handleMapControlsRollPitchBearingZoom(t,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,o)}handleMapControlsPan(t,o,p){this.currentHelper.handleMapControlsPan(t,o,p)}cameraForBoxAndBearing(t,o,p,g,x){return this.currentHelper.cameraForBoxAndBearing(t,o,p,g,x)}handleJumpToCenterZoom(t,o){this.currentHelper.handleJumpToCenterZoom(t,o)}handleEaseTo(t,o){return this.currentHelper.handleEaseTo(t,o)}handleFlyTo(t,o){return this.currentHelper.handleFlyTo(t,o)}}const Xr=(v,t)=>s.B(v,t&&t.filter((o=>o.identifier!=="source.canvas"))),Gs=s.bO();class lr extends s.E{constructor(t,o={}){var p,g;super(),this._rtlPluginLoaded=()=>{for(const k in this.tileManagers){const M=this.tileManagers[k].getSource().type;M!=="vector"&&M!=="geojson"||this.tileManagers[k].reload()}},this.map=t,this.dispatcher=new kn(ba(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((k,M)=>this.getGlyphs(k,M))),this.dispatcher.registerMessageHandler("GI",((k,M)=>this.getImages(k,M))),this.dispatcher.registerMessageHandler("GDA",((k,M)=>this.getDashes(k,M))),this.imageManager=new mt,this.imageManager.setEventedParent(this);const x=((p=t._container)===null||p===void 0?void 0:p.lang)||typeof document<"u"&&((g=document.documentElement)===null||g===void 0?void 0:g.lang)||void 0;this.glyphManager=new Mt(t._requestManager,o.localIdeographFontFamily,x),this.lineAtlas=new zn(256,512),this.crossTileSymbolIndex=new Tn,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",s.bP()),be().on(fe,this._rtlPluginLoaded),this.on("data",(k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const M=this.tileManagers[k.sourceId];if(!M)return;const C=M.getSource();if(C&&C.vectorLayerIds)for(const A in this._layers){const R=this._layers[A];R.source===C.id&&this._validateLayer(R)}}))}_setInitialValues(){var t;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new s.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((t=this.crossTileSymbolIndex)===null||t===void 0?void 0:t.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(t,o){var p,g,x;this._checkLoaded();const k=o===null?(x=(g=(p=this.stylesheet.state)===null||p===void 0?void 0:p[t])===null||g===void 0?void 0:g.default)!==null&&x!==void 0?x:null:o;if(s.bR(k,this._globalState[t]))return this;this._globalState[t]=k,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const o=[];for(const p in t)!s.bR(this._globalState[p],t[p].default)&&(o.push(p),this._globalState[p]=t[p].default);this._applyGlobalStateChanges(o)}_applyGlobalStateChanges(t){if(t.length===0)return;const o=new Set,p={};for(const g of t){p[g]=this._globalState[g];for(const x in this._layers){const k=this._layers[x],M=k.getLayoutAffectingGlobalStateRefs(),C=k.getPaintAffectingGlobalStateRefs(),A=k.getVisibilityAffectingGlobalStateRefs();if(M.has(g)&&o.add(k.source),C.has(g))for(const{name:R,value:B}of C.get(g))this._updatePaintProperty(k,R,B);A?.has(g)&&(k.recalculateVisibility(),this._updateLayer(k))}}this.dispatcher.broadcast("UGS",p);for(const g in this.tileManagers)o.has(g)&&(this._reloadSource(g),this._changed=!0)}loadURL(t,o={},p){this.fire(new s.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const g=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const x=this._loadStyleRequest;s.j(g,this._loadStyleRequest).then((k=>{this._loadStyleRequest=null,this._load(k.data,o,p)})).catch((k=>{this._loadStyleRequest=null,k&&!x.signal.aborted&&this.fire(new s.k(k))}))}loadJSON(t,o={},p){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,W.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(t,o,p)})).catch((()=>{}))}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(Gs,{validate:!1})}_load(t,o,p){var g,x;let k=o.transformStyle?o.transformStyle(p,t):t;if(!o.validate||!Xr(this,s.C(k))){k=Object.assign({},k),this._loaded=!0,this.stylesheet=k;for(const M in k.sources)this.addSource(M,k.sources[M],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new fn(this.stylesheet.light),this._setProjectionInternal(((g=this.stylesheet.projection)===null||g===void 0?void 0:g.type)||"mercator"),this.sky=new pn(this.stylesheet.sky),this.map.setTerrain((x=this.stylesheet.terrain)!==null&&x!==void 0?x:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var t,o,p;const g=s.bS(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",g),this._order=g.map((x=>x.id)),this._layers={},this._serializedLayers=null;for(const x of g){const k=s.bT(x,this._globalState);if(k.setEventedParent(this,{layer:{id:x.id}}),this._layers[x.id]=k,s.bU(k)&&this.tileManagers[k.source]){const M=(p=(o=x.paint)===null||o===void 0?void 0:o["raster-fade-duration"])!==null&&p!==void 0?p:k.paint.get("raster-fade-duration");this.tileManagers[k.source].setRasterFadeDuration(M)}}}_loadSprite(t,o=!1,p=void 0){this.imageManager.setLoaded(!1);const g=new AbortController;let x;this._spriteRequest=g,(function(k,M,C,A){return s._(this,void 0,void 0,(function*(){const R=rt(k),B=C>1?"@2x":"",$={},G={};for(const{id:K,url:ie}of R){const ae=M.transformRequest(lt(ie,B,".json"),"SpriteJSON");$[K]=s.j(ae,A);const ne=M.transformRequest(lt(ie,B,".png"),"SpriteImage");G[K]=Ne.getImage(ne,A)}return yield Promise.all([...Object.values($),...Object.values(G)]),(function(K,ie){return s._(this,void 0,void 0,(function*(){const ae={};for(const ne in K){ae[ne]={};const oe=W.getImageCanvasContext((yield ie[ne]).data),he=(yield K[ne]).data;for(const re in he){const{width:de,height:me,x:ue,y:ve,sdf:De,pixelRatio:Te,stretchX:Pe,stretchY:Ce,content:Ge,textFitWidth:We,textFitHeight:$e}=he[re];ae[ne][re]={data:null,pixelRatio:Te,sdf:De,stretchX:Pe,stretchY:Ce,content:Ge,textFitWidth:We,textFitHeight:$e,spriteData:{width:de,height:me,x:ue,y:ve,context:oe}}}}return ae}))})($,G)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((k=>{if(this._spriteRequest=null,k)for(const M in k){this._spritesImagesIds[M]=[];const C=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter((A=>!(A in k))):[];for(const A of C)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(const A in k[M]){const R=M==="default"?A:`${M}:${A}`;this._spritesImagesIds[M].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,k[M][A],!1):this.imageManager.addImage(R,k[M][A]),o&&(this._changedImages[R]=!0)}}})).catch((k=>{this._spriteRequest=null,x=k,g.signal.aborted||this.fire(new s.k(x))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),p&&p(x)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(t){const o=this.tileManagers[t.source];if(!o)return;const p=t.sourceLayer;if(!p)return;const g=o.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new s.k(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.tileManagers)if(!this.tileManagers[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,o=!1){const p=this._serializedAllLayers();if(!t||t.length===0)return Object.values(o?s.bV(p):p);const g=[];for(const x of t)if(p[x]){const k=o?s.bV(p[x]):p[x];g.push(k)}return g}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const o=Object.keys(this._layers);for(const p of o){const g=this._layers[p];g.type!=="custom"&&(t[p]=g.serialize())}return t}hasTransitions(){var t,o,p;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const g in this.tileManagers)if(this.tileManagers[g].hasTransition())return!0;for(const g in this._layers)if(this._layers[g].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const o=this._changed;if(o){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const k in this._updatedSources){const M=this._updatedSources[k];if(M==="reload")this._reloadSource(k);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(k)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const p={};for(const g in this.tileManagers){const x=this.tileManagers[g];p[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(t,this._availableImages),!x.isHidden(t.zoom)&&x.source&&(this.tileManagers[x.source].used=!0)}for(const g in p){const x=this.tileManagers[g];!!p[g]!=!!x.used&&x.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,o&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this.tileManagers)this.tileManagers[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,o={}){var p;this._checkLoaded();const g=this.serialize();if(t=o.transformStyle?o.transformStyle(g,t):t,((p=o.validate)===null||p===void 0||p)&&Xr(this,s.C(t)))return!1;(t=s.bV(t)).layers=s.bS(t.layers);const x=s.bW(g,t),k=this._getOperationsToPerform(x);if(k.unimplemented.length>0)throw new Error(`Unimplemented: ${k.unimplemented.join(", ")}.`);if(k.operations.length===0)return!1;for(const M of k.operations)M();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const o=[],p=[];for(const g of t)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push((()=>this.addLayer.apply(this,g.args)));break;case"removeLayer":o.push((()=>this.removeLayer.apply(this,g.args)));break;case"setPaintProperty":o.push((()=>this.setPaintProperty.apply(this,g.args)));break;case"setLayoutProperty":o.push((()=>this.setLayoutProperty.apply(this,g.args)));break;case"setFilter":o.push((()=>this.setFilter.apply(this,g.args)));break;case"addSource":o.push((()=>this.addSource.apply(this,g.args)));break;case"removeSource":o.push((()=>this.removeSource.apply(this,g.args)));break;case"setLayerZoomRange":o.push((()=>this.setLayerZoomRange.apply(this,g.args)));break;case"setLight":o.push((()=>this.setLight.apply(this,g.args)));break;case"setGeoJSONSourceData":o.push((()=>this.setGeoJSONSourceData.apply(this,g.args)));break;case"setGlyphs":o.push((()=>this.setGlyphs.apply(this,g.args)));break;case"setSprite":o.push((()=>this.setSprite.apply(this,g.args)));break;case"setTerrain":o.push((()=>this.map.setTerrain.apply(this,g.args)));break;case"setSky":o.push((()=>this.setSky.apply(this,g.args)));break;case"setProjection":this.setProjection.apply(this,g.args);break;case"setGlobalState":o.push((()=>this.setGlobalState.apply(this,g.args)));break;case"setTransition":o.push((()=>{}));break;default:p.push(g.command)}return{operations:o,unimplemented:p}}addImage(t,o){if(this.getImage(t))return this.fire(new s.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,o),this._afterImageUpdated(t)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new s.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,o,p={}){if(this._checkLoaded(),this.tileManagers[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(s.C.source,`sources.${t}`,o,null,p))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const g=this.tileManagers[t]=new Gn(t,o,this.dispatcher);g.style=this,g.setEventedParent(this,(()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:t}))),g.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===t)return this.fire(new s.k(new Error(`Source "${t}" cannot be removed while layer "${p}" is using it.`)));const o=this.tileManagers[t];delete this.tileManagers[t],delete this._updatedSources[t],o.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,o){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const p=this.tileManagers[t].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(o),this._changed=!0}getSource(t){return this.tileManagers[t]&&this.tileManagers[t].getSource()}addLayer(t,o,p={}){this._checkLoaded();const g=t.id;if(this.getLayer(g))return void this.fire(new s.k(new Error(`Layer "${g}" already exists on this map.`)));let x;if(t.type==="custom"){if(Xr(this,s.bX(t)))return;x=s.bT(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(g,t.source),t=s.bV(t),t=s.e(t,{source:g})),this._validate(s.C.layer,`layers.${g}`,t,{arrayIndex:-1},p))return;x=s.bT(t,this._globalState),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const k=o?this._order.indexOf(o):this._order.length;if(o&&k===-1)this.fire(new s.k(new Error(`Cannot add layer "${g}" before non-existing layer "${o}".`)));else{if(this._order.splice(k,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const M=this._removedLayers[g];delete this._removedLayers[g],M.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.tileManagers[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new s.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const p=this._order.indexOf(t);this._order.splice(p,1);const g=o?this._order.indexOf(o):this._order.length;o&&g===-1?this.fire(new s.k(new Error(`Cannot move layer "${t}" before non-existing layer "${o}".`))):(this._order.splice(g,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${t}".`)));o.setEventedParent(null);const p=this._order.indexOf(t);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,o,p){this._checkLoaded();const g=this.getLayer(t);g?g.minzoom===o&&g.maxzoom===p||(o!=null&&(g.minzoom=o),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,o,p={}){this._checkLoaded();const g=this.getLayer(t);if(g){if(!s.bR(g.filter,o))return o==null?(g.setFilter(void 0),void this._updateLayer(g)):void(this._validate(s.C.filter,`layers.${g.id}.filter`,o,null,p)||(g.setFilter(s.bV(o)),this._updateLayer(g)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return s.bV(this.getLayer(t).filter)}setLayoutProperty(t,o,p,g={}){this._checkLoaded();const x=this.getLayer(t);x?s.bR(x.getLayoutProperty(o),p)||(x.setLayoutProperty(o,p,g),this._updateLayer(x)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,o){const p=this.getLayer(t);if(p)return p.getLayoutProperty(o);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,o,p,g={}){this._checkLoaded();const x=this.getLayer(t);x?s.bR(x.getPaintProperty(o),p)||this._updatePaintProperty(x,o,p,g):this.fire(new s.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,o,p,g={}){t.setPaintProperty(o,p,g)&&this._updateLayer(t),s.bU(t)&&o==="raster-fade-duration"&&this.tileManagers[t.source].setRasterFadeDuration(p),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,o){return this.getLayer(t).getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const p=t.source,g=t.sourceLayer,x=this.tileManagers[p];if(x===void 0)return void this.fire(new s.k(new Error(`The source '${p}' does not exist in the map's style.`)));const k=x.getSource().type;k==="geojson"&&g?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||g?(t.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,t.id,o)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,o){this._checkLoaded();const p=t.source,g=this.tileManagers[p];if(g===void 0)return void this.fire(new s.k(new Error(`The source '${p}' does not exist in the map's style.`)));const x=g.getSource().type,k=x==="vector"?t.sourceLayer:void 0;x!=="vector"||k?o&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(k,t.id,o):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const o=t.source,p=t.sourceLayer,g=this.tileManagers[o];if(g!==void 0)return g.getSource().type!=="vector"||p?(t.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,t.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=s.bY(this.tileManagers,(x=>x.serialize())),o=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,g=this.stylesheet;return s.bZ({version:g.version,name:g.name,metadata:g.metadata,light:g.light,sky:g.sky,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,projection:g.projection,sources:t,layers:o,terrain:p},(x=>x!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.tileManagers[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.tileManagers[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const o=k=>this._layers[k].type==="fill-extrusion",p={},g=[];for(let k=this._order.length-1;k>=0;k--){const M=this._order[k];if(o(M)){p[M]=k;for(const C of t){const A=C[M];if(A)for(const R of A)g.push(R)}}}g.sort(((k,M)=>M.intersectionZ-k.intersectionZ));const x=[];for(let k=this._order.length-1;k>=0;k--){const M=this._order[k];if(o(M))for(let C=g.length-1;C>=0;C--){const A=g[C].feature;if(p[A.layer.id]<k)break;x.push(A),g.pop()}else for(const C of t){const A=C[M];if(A)for(const R of A)x.push(R.feature)}}return x}queryRenderedFeatures(t,o,p){o&&o.filter&&this._validate(s.C.filter,"queryRenderedFeatures.filter",o.filter,null,o);const g={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const A of o.layers){const R=this._layers[A];if(!R)return this.fire(new s.k(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];g[R.source]=!0}}const x=[];o.availableImages=this._availableImages;const k=this._serializedAllLayers(),M=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,C=Object.assign(Object.assign({},o),{layers:M,globalState:this._globalState});for(const A in this.tileManagers)o.layers&&!g[A]||x.push(Es(this.tileManagers[A],this._layers,k,t,C,p,this.map.terrain?(R,B,$)=>this.map.terrain.getElevation(R,B,$):void 0));return this.placement&&x.push((function(A,R,B,$,G,K,ie){const ae={},ne=K.queryRenderedSymbols($),oe=[];for(const he of Object.keys(ne).map(Number))oe.push(ie[he]);oe.sort(Ui);for(const he of oe){const re=he.featureIndex.lookupSymbolFeatures(ne[he.bucketInstanceId],R,he.bucketIndex,he.sourceLayerIndex,{filterSpec:G.filter,globalState:G.globalState},G.layers,G.availableImages,A);for(const de in re){const me=ae[de]=ae[de]||[],ue=re[de];ue.sort(((ve,De)=>{const Te=he.featureSortOrder;if(Te){const Pe=Te.indexOf(ve.featureIndex);return Te.indexOf(De.featureIndex)-Pe}return De.featureIndex-ve.featureIndex}));for(const ve of ue)me.push(ve)}}return(function(he,re,de){for(const me in he)for(const ue of he[me])Un(ue,de[re[me].source]);return he})(ae,A,B)})(this._layers,k,this.tileManagers,t,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(t,o){o?.filter&&this._validate(s.C.filter,"querySourceFeatures.filter",o.filter,null,o);const p=this.tileManagers[t];return p?(function(g,x){const k=g.getRenderableIds().map((A=>g.getTileByID(A))),M=[],C={};for(let A=0;A<k.length;A++){const R=k[A],B=R.tileID.canonical.key;C[B]||(C[B]=!0,R.querySourceFeatures(M,x))}return M})(p,o?Object.assign(Object.assign({},o),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const k in t)if(!s.bR(t[k],p[k])){g=!0;break}if(!g)return;const x={now:te(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(x)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,o={}){this._checkLoaded();const p=this.getSky();let g=!1;if(!t&&!p)return;if(t&&!p)g=!0;else if(!t&&p)g=!0;else for(const k in t)if(!s.bR(t[k],p[k])){g=!0;break}if(!g)return;const x={now:te(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,o),this.sky.updateTransitions(x)}_setProjectionInternal(t){const o=(function(p,g){const x={constrainOverride:g};if(Array.isArray(p)){const k=new pc({type:p});return{projection:k,transform:new Yr(x),cameraHelper:new _c(k)}}switch(p){case"mercator":return{projection:new vn,transform:new rr(x),cameraHelper:new sr};case"globe":{const k=new pc({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:k,transform:new Yr(x),cameraHelper:new _c(k)}}case"vertical-perspective":return{projection:new xu,transform:new Kr(x),cameraHelper:new Fi};default:return s.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new vn,transform:new rr(x),cameraHelper:new sr}}})(t,this.map.transformConstrain);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const p in this.tileManagers)this.tileManagers[p].reload()}_validate(t,o,p,g,x={}){return(!x||x.validate!==!1)&&Xr(this,t.call(s.C,s.e({key:o,style:this.serialize(),value:p,styleSpec:s.u},g)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),be().off(fe,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.tileManagers){const p=this.tileManagers[o];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.tileManagers[t].clearTiles()}_reloadSource(t){this.tileManagers[t].resume(),this.tileManagers[t].reload()}_updateSources(t){for(const o in this.tileManagers)this.tileManagers[o].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.tileManagers)this._reloadSource(t)}_updatePlacement(t,o,p,g,x=!1){let k=!1,M=!1;const C={};for(const A of this._order){const R=this._layers[A];if(R.type!=="symbol")continue;if(!C[R.source]){const $=this.tileManagers[R.source];C[R.source]=$.getRenderableIds(!0).map((G=>$.getTileByID(G))).sort(((G,K)=>K.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(K.tileID)?-1:1)))}const B=this.crossTileSymbolIndex.addLayer(R,C[R.source],t.center.lng);k=k||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(te(),t.zoom))&&(this.pauseablePlacement=new Nr(t,this.map.terrain,this._order,x,o,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(te()),M=!0),k&&this.pauseablePlacement.placement.setStale()),M||k)for(const A of this._order){const R=this._layers[A];R.type==="symbol"&&this.placement.updateLayerOpacities(R,C[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(te())}_releaseSymbolFadeTiles(){for(const t in this.tileManagers)this.tileManagers[t].releaseSymbolFadeTiles()}getImages(t,o){return s._(this,void 0,void 0,(function*(){const p=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const g=this.tileManagers[o.source];return g&&g.setDependencies(o.tileID.key,o.type,o.icons),p}))}getGlyphs(t,o){return s._(this,void 0,void 0,(function*(){const p=yield this.glyphManager.getGlyphs(o.stacks),g=this.tileManagers[o.source];return g&&g.setDependencies(o.tileID.key,o.type,[""]),p}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,o={}){this._checkLoaded(),t&&this._validate(s.C.glyphs,"glyphs",t,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}getDashes(t,o){return s._(this,void 0,void 0,(function*(){const p={};for(const[g,x]of Object.entries(o.dashes))p[g]=this.lineAtlas.getDash(x.dasharray,x.round);return p}))}addSprite(t,o,p={},g){this._checkLoaded();const x=[{id:t,url:o}],k=[...rt(this.stylesheet.sprite),...x];this._validate(s.C.sprite,"sprite",k,null,p)||(this.stylesheet.sprite=k,this._loadSprite(x,!0,g))}removeSprite(t){this._checkLoaded();const o=rt(this.stylesheet.sprite);if(o.find((p=>p.id===t))){if(this._spritesImagesIds[t])for(const p of this._spritesImagesIds[t])this.imageManager.removeImage(p),this._changedImages[p]=!0;o.splice(o.findIndex((p=>p.id===t)),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return rt(this.stylesheet.sprite)}setSprite(t,o={},p){this._checkLoaded(),t&&this._validate(s.C.sprite,"sprite",t,null,o)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,p):(this._unloadSprite(),p&&p(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const t in this.tileManagers){const o=this.tileManagers[t];o.setEventedParent(null),o.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const t in this._layers){const o=this._layers[t];o.setEventedParent(null),o.onRemove&&o.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Ff=s.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class tl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,p,g,x,k,M,C,A){this.context=t;let R=this.boundPaintVertexBuffers.length!==g.length;for(let B=0;!R&&B<g.length;B++)this.boundPaintVertexBuffers[B]!==g[B]&&(R=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==p||R||this.boundIndexBuffer!==x||this.boundVertexOffset!==k||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==A?this.freshBind(o,p,g,x,k,M,C,A):(t.bindVertexArray.set(this.vao),M&&M.bind(),x&&x.dynamicDraw&&x.bind(),C&&C.bind(),A&&A.bind())}freshBind(t,o,p,g,x,k,M,C){const A=t.numAttributes,R=this.context,B=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=C,o.enableAttributes(B,t);for(const $ of p)$.enableAttributes(B,t);k&&k.enableAttributes(B,t),M&&M.enableAttributes(B,t),C&&C.enableAttributes(B,t),o.bind(),o.setVertexAttribPointers(B,t,x);for(const $ of p)$.bind(),$.setVertexAttribPointers(B,t,x);k&&(k.bind(),k.setVertexAttribPointers(B,t,x)),g&&g.bind(),M&&(M.bind(),M.setVertexAttribPointers(B,t,x)),C&&(C.bind(),C.setVertexAttribPointers(B,t,x)),R.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const jf=(v,t,o,p,g)=>({u_texture:0,u_ele_delta:v,u_fog_matrix:t,u_fog_color:o?o.properties.get("fog-color"):s.bp.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?0:o?o.calculateFogBlendOpacity(p):0,u_horizon_color:o?o.properties.get("horizon-color"):s.bp.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:g?1:0}),Jr={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function il(v){const t=[];for(let o=0;o<v.length;o++){if(v[o]===null)continue;const p=v[o].split(" ");t.push(p.pop())}return t}class yc{constructor(t,o,p,g,x,k,M,C,A=[]){const R=t.gl;this.program=R.createProgram();const B=il(o.staticAttributes),$=p?p.getBinderAttributes():[],G=B.concat($),K=li.prelude.staticUniforms?il(li.prelude.staticUniforms):[],ie=M.staticUniforms?il(M.staticUniforms):[],ae=o.staticUniforms?il(o.staticUniforms):[],ne=p?p.getBinderUniforms():[],oe=K.concat(ie).concat(ae).concat(ne),he=[];for(const Te of oe)he.indexOf(Te)<0&&he.push(Te);const re=p?p.defines():[];qn(R)&&re.unshift("#version 300 es"),x&&re.push("#define OVERDRAW_INSPECTOR;"),k&&re.push("#define TERRAIN3D;"),C&&re.push(C),A&&re.push(...A);let de=re.concat(li.prelude.fragmentSource,M.fragmentSource,o.fragmentSource).join(`
`),me=re.concat(li.prelude.vertexSource,M.vertexSource,o.vertexSource).join(`
`);qn(R)||(de=(function(Te){return Te.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(de),me=(function(Te){return Te.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(me));const ue=R.createShader(R.FRAGMENT_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);if(R.shaderSource(ue,de),R.compileShader(ue),!R.getShaderParameter(ue,R.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${R.getShaderInfoLog(ue)}`);R.attachShader(this.program,ue);const ve=R.createShader(R.VERTEX_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);if(R.shaderSource(ve,me),R.compileShader(ve),!R.getShaderParameter(ve,R.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${R.getShaderInfoLog(ve)}`);R.attachShader(this.program,ve),this.attributes={};const De={};this.numAttributes=G.length;for(let Te=0;Te<this.numAttributes;Te++)G[Te]&&(R.bindAttribLocation(this.program,Te,G[Te]),this.attributes[G[Te]]=Te);if(R.linkProgram(this.program),!R.getProgramParameter(this.program,R.LINK_STATUS))throw new Error(`Program failed to link: ${R.getProgramInfoLog(this.program)}`);R.deleteShader(ve),R.deleteShader(ue);for(let Te=0;Te<he.length;Te++){const Pe=he[Te];if(Pe&&!De[Pe]){const Ce=R.getUniformLocation(this.program,Pe);Ce&&(De[Pe]=Ce)}}this.fixedUniforms=g(t,De),this.terrainUniforms=((Te,Pe)=>({u_depth:new s.b_(Te,Pe.u_depth),u_terrain:new s.b_(Te,Pe.u_terrain),u_terrain_dim:new s.bq(Te,Pe.u_terrain_dim),u_terrain_matrix:new s.c0(Te,Pe.u_terrain_matrix),u_terrain_unpack:new s.c1(Te,Pe.u_terrain_unpack),u_terrain_exaggeration:new s.bq(Te,Pe.u_terrain_exaggeration)}))(t,De),this.projectionUniforms=((Te,Pe)=>({u_projection_matrix:new s.c0(Te,Pe.u_projection_matrix),u_projection_tile_mercator_coords:new s.c1(Te,Pe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.c1(Te,Pe.u_projection_clipping_plane),u_projection_transition:new s.bq(Te,Pe.u_projection_transition),u_projection_fallback_matrix:new s.c0(Te,Pe.u_projection_fallback_matrix)}))(t,De),this.binderUniforms=p?p.getUniforms(t,De):[]}draw(t,o,p,g,x,k,M,C,A,R,B,$,G,K,ie,ae,ne,oe,he){const re=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(p),t.setStencilMode(g),t.setColorMode(x),t.setCullFace(k),C){t.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,C.depthTexture),t.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,C.texture);for(const me in this.terrainUniforms)this.terrainUniforms[me].set(C[me])}if(A)for(const me in A)this.projectionUniforms[Jr[me]].set(A[me]);if(M)for(const me in this.fixedUniforms)this.fixedUniforms[me].set(M[me]);ae&&ae.setUniforms(t,this.binderUniforms,K,{zoom:ie});let de=0;switch(o){case re.LINES:de=2;break;case re.TRIANGLES:de=3;break;case re.LINE_STRIP:de=1}for(const me of G.get()){const ue=me.vaos||(me.vaos={});(ue[R]||(ue[R]=new tl)).bind(t,this,B,ae?ae.getPaintVertexBuffers():[],$,me.vertexOffset,ne,oe,he),re.drawElements(o,me.primitiveLength*de,re.UNSIGNED_SHORT,me.primitiveOffset*de*2)}}}function vc(v,t,o){const p=1/s.aN(o,1,t.transform.tileZoom),g=Math.pow(2,o.tileID.overscaledZ),x=o.tileSize*Math.pow(2,t.transform.tileZoom)/g,k=x*(o.tileID.canonical.x+o.tileID.wrap*g),M=x*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[k>>16,M>>16],u_pixel_coord_lower:[65535&k,65535&M]}}const Su=(v,t,o,p)=>{const g=v.style.light,x=g.properties.get("position"),k=[x.x,x.y,x.z],M=s.c4();g.properties.get("anchor")==="viewport"&&s.c5(M,v.transform.bearingInRadians),s.c6(k,k,M);const C=v.transform.transformLightDirection(k),A=g.properties.get("color");return{u_lightpos:k,u_lightpos_globe:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+t,u_opacity:o,u_fill_translate:p}},Tu=(v,t,o,p,g,x,k)=>s.e(Su(v,t,o,p),vc(x,v,k),{u_height_factor:-Math.pow(2,g.overscaledZ)/k.tileSize/8}),Mu=(v,t,o,p)=>s.e(vc(t,v,o),{u_fill_translate:p}),xc=(v,t)=>({u_world:v,u_fill_translate:t}),bc=(v,t,o,p,g)=>s.e(Mu(v,t,o,g),{u_world:p}),wc=(v,t,o,p,g)=>{const x=v.transform;let k,M,C=0;if(o.paint.get("circle-pitch-alignment")==="map"){const A=s.aN(t,1,x.zoom);k=!0,M=[A,A],C=A/(s.a5*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*g}else k=!1,M=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+k,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:M,u_globe_extrude_scale:C,u_translate:p}},ur=v=>({u_pixel_extrude_scale:[1/v.width,1/v.height]}),kc=v=>({u_viewport_size:[v.width,v.height]}),Pu=(v,t=1)=>({u_color:v,u_overlay:0,u_overlay_scale:t}),Qr=(v,t,o,p)=>{const g=s.aN(v,1,t)/(s.a5*Math.pow(2,v.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:s.aN(v,1,t),u_intensity:o,u_globe_extrude_scale:g}},Sc=(v,t,o,p)=>{const g=s.N();s.c7(g,0,v.width,v.height,0,0,1);const x=v.context.gl;return{u_matrix:g,u_world:[x.drawingBufferWidth,x.drawingBufferHeight],u_image:o,u_color_ramp:p,u_opacity:t.paint.get("heatmap-opacity")}},nl=(v,t,o)=>{const p=o.paint.get("hillshade-accent-color");let g;switch(o.paint.get("hillshade-method")){case"basic":g=4;break;case"combined":g=1;break;case"igor":g=2;break;case"multidirectional":g=3;break;default:g=0}const x=o.getIlluminationProperties();for(let k=0;k<x.directionRadians.length;k++)o.paint.get("hillshade-illumination-anchor")==="viewport"&&(x.directionRadians[k]+=v.transform.bearingInRadians);return{u_image:0,u_latrange:$f(0,t.tileID),u_exaggeration:o.paint.get("hillshade-exaggeration"),u_altitudes:x.altitudeRadians,u_azimuths:x.directionRadians,u_accent:p,u_method:g,u_highlights:x.highlightColor,u_shadows:x.shadowColor}},Of=(v,t)=>{const o=t.stride,p=s.N();return s.c7(p,0,s.a5,-s.a5,0,0,1),s.O(p,p,[0,-s.a5,0]),{u_matrix:p,u_image:1,u_dimension:[o,o],u_zoom:v.overscaledZ,u_unpack:t.getUnpackVector()}};function $f(v,t){const o=Math.pow(2,t.canonical.z),p=t.canonical.y;return[new s.a9(0,p/o).toLngLat().lat,new s.a9(0,(p+1)/o).toLngLat().lat]}const Tc=(v,t,o=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:o,u_opacity:v.paint.get("color-relief-opacity")}),qs=(v,t,o,p)=>{const g=v.transform;return{u_translation:rl(v,t,o),u_ratio:p/s.aN(t,1,g.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Mc=(v,t,o,p,g)=>s.e(qs(v,t,o,p),{u_image:0,u_image_height:g}),Cu=(v,t,o,p,g)=>{const x=v.transform,k=ia(t,x);return{u_translation:rl(v,t,o),u_texsize:t.imageAtlasTexture.size,u_ratio:p/s.aN(t,1,x.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[k,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Pc=(v,t,o,p,g)=>{const x=ia(t,v.transform);return s.e(qs(v,t,o,p),{u_tileratio:x,u_crossfade_from:g.fromScale,u_crossfade_to:g.toScale,u_image:0,u_mix:g.t,u_lineatlas_width:v.lineAtlas.width,u_lineatlas_height:v.lineAtlas.height})},al=(v,t,o,p,g,x)=>{const k=ia(t,v.transform);return s.e(qs(v,t,o,p),{u_image:0,u_image_height:x,u_tileratio:k,u_crossfade_from:g.fromScale,u_crossfade_to:g.toScale,u_image_dash:1,u_mix:g.t,u_lineatlas_width:v.lineAtlas.width,u_lineatlas_height:v.lineAtlas.height})};function ia(v,t){return 1/s.aN(v,1,t.tileZoom)}function rl(v,t,o){return s.aO(v.transform,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const Eu=(v,t,o,p,g)=>{return{u_tl_parent:v,u_scale_parent:t,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(k=p.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(x=p.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Lu(p.paint.get("raster-hue-rotate")),u_coords_top:[g[0].x,g[0].y,g[1].x,g[1].y],u_coords_bottom:[g[3].x,g[3].y,g[2].x,g[2].y]};var x,k};function Lu(v){v*=Math.PI/180;const t=Math.sin(v),o=Math.cos(v);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const Du=(v,t,o,p,g,x,k,M,C,A,R,B,$)=>{const G=k.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:G.width/G.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_label_plane_matrix:M,u_coord_matrix:C,u_is_text:+R,u_pitch_with_map:+p,u_is_along_line:g,u_is_variable_anchor:x,u_texsize:B,u_texture:0,u_translation:A,u_pitched_scale:$}},sl=(v,t,o,p,g,x,k,M,C,A,R,B,$,G)=>{const K=k.transform;return s.e(Du(v,t,o,p,g,x,k,M,C,A,R,B,G),{u_gamma_scale:p?Math.cos(K.pitch*Math.PI/180)*K.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:1})},dr=(v,t,o,p,g,x,k,M,C,A,R,B,$)=>s.e(sl(v,t,o,p,g,x,k,M,C,A,!0,R,0,$),{u_texsize_icon:B,u_texture_icon:1}),Au=(v,t)=>({u_opacity:v,u_color:t}),Bf=(v,t,o,p,g)=>s.e((function(x,k,M,C){const A=M.imageManager.getPattern(x.from.toString()),R=M.imageManager.getPattern(x.to.toString()),{width:B,height:$}=M.imageManager.getPixelSize(),G=Math.pow(2,C.tileID.overscaledZ),K=C.tileSize*Math.pow(2,M.transform.tileZoom)/G,ie=K*(C.tileID.canonical.x+C.tileID.wrap*G),ae=K*C.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:A.tl,u_pattern_br_a:A.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[B,$],u_mix:k.t,u_pattern_size_a:A.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/s.aN(C,1,M.transform.tileZoom),u_pixel_coord_upper:[ie>>16,ae>>16],u_pixel_coord_lower:[65535&ie,65535&ae]}})(o,g,t,p),{u_opacity:v}),Cc=(v,t)=>{},Vf={fillExtrusion:(v,t)=>({u_lightpos:new s.c2(v,t.u_lightpos),u_lightpos_globe:new s.c2(v,t.u_lightpos_globe),u_lightintensity:new s.bq(v,t.u_lightintensity),u_lightcolor:new s.c2(v,t.u_lightcolor),u_vertical_gradient:new s.bq(v,t.u_vertical_gradient),u_opacity:new s.bq(v,t.u_opacity),u_fill_translate:new s.c3(v,t.u_fill_translate)}),fillExtrusionPattern:(v,t)=>({u_lightpos:new s.c2(v,t.u_lightpos),u_lightpos_globe:new s.c2(v,t.u_lightpos_globe),u_lightintensity:new s.bq(v,t.u_lightintensity),u_lightcolor:new s.c2(v,t.u_lightcolor),u_vertical_gradient:new s.bq(v,t.u_vertical_gradient),u_height_factor:new s.bq(v,t.u_height_factor),u_opacity:new s.bq(v,t.u_opacity),u_fill_translate:new s.c3(v,t.u_fill_translate),u_image:new s.b_(v,t.u_image),u_texsize:new s.c3(v,t.u_texsize),u_pixel_coord_upper:new s.c3(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(v,t.u_pixel_coord_lower),u_scale:new s.c2(v,t.u_scale),u_fade:new s.bq(v,t.u_fade)}),fill:(v,t)=>({u_fill_translate:new s.c3(v,t.u_fill_translate)}),fillPattern:(v,t)=>({u_image:new s.b_(v,t.u_image),u_texsize:new s.c3(v,t.u_texsize),u_pixel_coord_upper:new s.c3(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(v,t.u_pixel_coord_lower),u_scale:new s.c2(v,t.u_scale),u_fade:new s.bq(v,t.u_fade),u_fill_translate:new s.c3(v,t.u_fill_translate)}),fillOutline:(v,t)=>({u_world:new s.c3(v,t.u_world),u_fill_translate:new s.c3(v,t.u_fill_translate)}),fillOutlinePattern:(v,t)=>({u_world:new s.c3(v,t.u_world),u_image:new s.b_(v,t.u_image),u_texsize:new s.c3(v,t.u_texsize),u_pixel_coord_upper:new s.c3(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(v,t.u_pixel_coord_lower),u_scale:new s.c2(v,t.u_scale),u_fade:new s.bq(v,t.u_fade),u_fill_translate:new s.c3(v,t.u_fill_translate)}),circle:(v,t)=>({u_camera_to_center_distance:new s.bq(v,t.u_camera_to_center_distance),u_scale_with_map:new s.b_(v,t.u_scale_with_map),u_pitch_with_map:new s.b_(v,t.u_pitch_with_map),u_extrude_scale:new s.c3(v,t.u_extrude_scale),u_device_pixel_ratio:new s.bq(v,t.u_device_pixel_ratio),u_globe_extrude_scale:new s.bq(v,t.u_globe_extrude_scale),u_translate:new s.c3(v,t.u_translate)}),collisionBox:(v,t)=>({u_pixel_extrude_scale:new s.c3(v,t.u_pixel_extrude_scale)}),collisionCircle:(v,t)=>({u_viewport_size:new s.c3(v,t.u_viewport_size)}),debug:(v,t)=>({u_color:new s.b$(v,t.u_color),u_overlay:new s.b_(v,t.u_overlay),u_overlay_scale:new s.bq(v,t.u_overlay_scale)}),depth:Cc,clippingMask:Cc,heatmap:(v,t)=>({u_extrude_scale:new s.bq(v,t.u_extrude_scale),u_intensity:new s.bq(v,t.u_intensity),u_globe_extrude_scale:new s.bq(v,t.u_globe_extrude_scale)}),heatmapTexture:(v,t)=>({u_matrix:new s.c0(v,t.u_matrix),u_world:new s.c3(v,t.u_world),u_image:new s.b_(v,t.u_image),u_color_ramp:new s.b_(v,t.u_color_ramp),u_opacity:new s.bq(v,t.u_opacity)}),hillshade:(v,t)=>({u_image:new s.b_(v,t.u_image),u_latrange:new s.c3(v,t.u_latrange),u_exaggeration:new s.bq(v,t.u_exaggeration),u_altitudes:new s.c9(v,t.u_altitudes),u_azimuths:new s.c9(v,t.u_azimuths),u_accent:new s.b$(v,t.u_accent),u_method:new s.b_(v,t.u_method),u_shadows:new s.c8(v,t.u_shadows),u_highlights:new s.c8(v,t.u_highlights)}),hillshadePrepare:(v,t)=>({u_matrix:new s.c0(v,t.u_matrix),u_image:new s.b_(v,t.u_image),u_dimension:new s.c3(v,t.u_dimension),u_zoom:new s.bq(v,t.u_zoom),u_unpack:new s.c1(v,t.u_unpack)}),colorRelief:(v,t)=>({u_image:new s.b_(v,t.u_image),u_unpack:new s.c1(v,t.u_unpack),u_dimension:new s.c3(v,t.u_dimension),u_elevation_stops:new s.b_(v,t.u_elevation_stops),u_color_stops:new s.b_(v,t.u_color_stops),u_color_ramp_size:new s.b_(v,t.u_color_ramp_size),u_opacity:new s.bq(v,t.u_opacity)}),line:(v,t)=>({u_translation:new s.c3(v,t.u_translation),u_ratio:new s.bq(v,t.u_ratio),u_device_pixel_ratio:new s.bq(v,t.u_device_pixel_ratio),u_units_to_pixels:new s.c3(v,t.u_units_to_pixels)}),lineGradient:(v,t)=>({u_translation:new s.c3(v,t.u_translation),u_ratio:new s.bq(v,t.u_ratio),u_device_pixel_ratio:new s.bq(v,t.u_device_pixel_ratio),u_units_to_pixels:new s.c3(v,t.u_units_to_pixels),u_image:new s.b_(v,t.u_image),u_image_height:new s.bq(v,t.u_image_height)}),linePattern:(v,t)=>({u_translation:new s.c3(v,t.u_translation),u_texsize:new s.c3(v,t.u_texsize),u_ratio:new s.bq(v,t.u_ratio),u_device_pixel_ratio:new s.bq(v,t.u_device_pixel_ratio),u_image:new s.b_(v,t.u_image),u_units_to_pixels:new s.c3(v,t.u_units_to_pixels),u_scale:new s.c2(v,t.u_scale),u_fade:new s.bq(v,t.u_fade)}),lineSDF:(v,t)=>({u_translation:new s.c3(v,t.u_translation),u_ratio:new s.bq(v,t.u_ratio),u_device_pixel_ratio:new s.bq(v,t.u_device_pixel_ratio),u_units_to_pixels:new s.c3(v,t.u_units_to_pixels),u_image:new s.b_(v,t.u_image),u_mix:new s.bq(v,t.u_mix),u_tileratio:new s.bq(v,t.u_tileratio),u_crossfade_from:new s.bq(v,t.u_crossfade_from),u_crossfade_to:new s.bq(v,t.u_crossfade_to),u_lineatlas_width:new s.bq(v,t.u_lineatlas_width),u_lineatlas_height:new s.bq(v,t.u_lineatlas_height)}),lineGradientSDF:(v,t)=>({u_translation:new s.c3(v,t.u_translation),u_ratio:new s.bq(v,t.u_ratio),u_device_pixel_ratio:new s.bq(v,t.u_device_pixel_ratio),u_units_to_pixels:new s.c3(v,t.u_units_to_pixels),u_image:new s.b_(v,t.u_image),u_image_height:new s.bq(v,t.u_image_height),u_tileratio:new s.bq(v,t.u_tileratio),u_crossfade_from:new s.bq(v,t.u_crossfade_from),u_crossfade_to:new s.bq(v,t.u_crossfade_to),u_image_dash:new s.b_(v,t.u_image_dash),u_mix:new s.bq(v,t.u_mix),u_lineatlas_width:new s.bq(v,t.u_lineatlas_width),u_lineatlas_height:new s.bq(v,t.u_lineatlas_height)}),raster:(v,t)=>({u_tl_parent:new s.c3(v,t.u_tl_parent),u_scale_parent:new s.bq(v,t.u_scale_parent),u_buffer_scale:new s.bq(v,t.u_buffer_scale),u_fade_t:new s.bq(v,t.u_fade_t),u_opacity:new s.bq(v,t.u_opacity),u_image0:new s.b_(v,t.u_image0),u_image1:new s.b_(v,t.u_image1),u_brightness_low:new s.bq(v,t.u_brightness_low),u_brightness_high:new s.bq(v,t.u_brightness_high),u_saturation_factor:new s.bq(v,t.u_saturation_factor),u_contrast_factor:new s.bq(v,t.u_contrast_factor),u_spin_weights:new s.c2(v,t.u_spin_weights),u_coords_top:new s.c1(v,t.u_coords_top),u_coords_bottom:new s.c1(v,t.u_coords_bottom)}),symbolIcon:(v,t)=>({u_is_size_zoom_constant:new s.b_(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(v,t.u_is_size_feature_constant),u_size_t:new s.bq(v,t.u_size_t),u_size:new s.bq(v,t.u_size),u_camera_to_center_distance:new s.bq(v,t.u_camera_to_center_distance),u_pitch:new s.bq(v,t.u_pitch),u_rotate_symbol:new s.b_(v,t.u_rotate_symbol),u_aspect_ratio:new s.bq(v,t.u_aspect_ratio),u_fade_change:new s.bq(v,t.u_fade_change),u_label_plane_matrix:new s.c0(v,t.u_label_plane_matrix),u_coord_matrix:new s.c0(v,t.u_coord_matrix),u_is_text:new s.b_(v,t.u_is_text),u_pitch_with_map:new s.b_(v,t.u_pitch_with_map),u_is_along_line:new s.b_(v,t.u_is_along_line),u_is_variable_anchor:new s.b_(v,t.u_is_variable_anchor),u_texsize:new s.c3(v,t.u_texsize),u_texture:new s.b_(v,t.u_texture),u_translation:new s.c3(v,t.u_translation),u_pitched_scale:new s.bq(v,t.u_pitched_scale)}),symbolSDF:(v,t)=>({u_is_size_zoom_constant:new s.b_(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(v,t.u_is_size_feature_constant),u_size_t:new s.bq(v,t.u_size_t),u_size:new s.bq(v,t.u_size),u_camera_to_center_distance:new s.bq(v,t.u_camera_to_center_distance),u_pitch:new s.bq(v,t.u_pitch),u_rotate_symbol:new s.b_(v,t.u_rotate_symbol),u_aspect_ratio:new s.bq(v,t.u_aspect_ratio),u_fade_change:new s.bq(v,t.u_fade_change),u_label_plane_matrix:new s.c0(v,t.u_label_plane_matrix),u_coord_matrix:new s.c0(v,t.u_coord_matrix),u_is_text:new s.b_(v,t.u_is_text),u_pitch_with_map:new s.b_(v,t.u_pitch_with_map),u_is_along_line:new s.b_(v,t.u_is_along_line),u_is_variable_anchor:new s.b_(v,t.u_is_variable_anchor),u_texsize:new s.c3(v,t.u_texsize),u_texture:new s.b_(v,t.u_texture),u_gamma_scale:new s.bq(v,t.u_gamma_scale),u_device_pixel_ratio:new s.bq(v,t.u_device_pixel_ratio),u_is_halo:new s.b_(v,t.u_is_halo),u_translation:new s.c3(v,t.u_translation),u_pitched_scale:new s.bq(v,t.u_pitched_scale)}),symbolTextAndIcon:(v,t)=>({u_is_size_zoom_constant:new s.b_(v,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(v,t.u_is_size_feature_constant),u_size_t:new s.bq(v,t.u_size_t),u_size:new s.bq(v,t.u_size),u_camera_to_center_distance:new s.bq(v,t.u_camera_to_center_distance),u_pitch:new s.bq(v,t.u_pitch),u_rotate_symbol:new s.b_(v,t.u_rotate_symbol),u_aspect_ratio:new s.bq(v,t.u_aspect_ratio),u_fade_change:new s.bq(v,t.u_fade_change),u_label_plane_matrix:new s.c0(v,t.u_label_plane_matrix),u_coord_matrix:new s.c0(v,t.u_coord_matrix),u_is_text:new s.b_(v,t.u_is_text),u_pitch_with_map:new s.b_(v,t.u_pitch_with_map),u_is_along_line:new s.b_(v,t.u_is_along_line),u_is_variable_anchor:new s.b_(v,t.u_is_variable_anchor),u_texsize:new s.c3(v,t.u_texsize),u_texsize_icon:new s.c3(v,t.u_texsize_icon),u_texture:new s.b_(v,t.u_texture),u_texture_icon:new s.b_(v,t.u_texture_icon),u_gamma_scale:new s.bq(v,t.u_gamma_scale),u_device_pixel_ratio:new s.bq(v,t.u_device_pixel_ratio),u_is_halo:new s.b_(v,t.u_is_halo),u_translation:new s.c3(v,t.u_translation),u_pitched_scale:new s.bq(v,t.u_pitched_scale)}),background:(v,t)=>({u_opacity:new s.bq(v,t.u_opacity),u_color:new s.b$(v,t.u_color)}),backgroundPattern:(v,t)=>({u_opacity:new s.bq(v,t.u_opacity),u_image:new s.b_(v,t.u_image),u_pattern_tl_a:new s.c3(v,t.u_pattern_tl_a),u_pattern_br_a:new s.c3(v,t.u_pattern_br_a),u_pattern_tl_b:new s.c3(v,t.u_pattern_tl_b),u_pattern_br_b:new s.c3(v,t.u_pattern_br_b),u_texsize:new s.c3(v,t.u_texsize),u_mix:new s.bq(v,t.u_mix),u_pattern_size_a:new s.c3(v,t.u_pattern_size_a),u_pattern_size_b:new s.c3(v,t.u_pattern_size_b),u_scale_a:new s.bq(v,t.u_scale_a),u_scale_b:new s.bq(v,t.u_scale_b),u_pixel_coord_upper:new s.c3(v,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(v,t.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bq(v,t.u_tile_units_to_pixels)}),terrain:(v,t)=>({u_texture:new s.b_(v,t.u_texture),u_ele_delta:new s.bq(v,t.u_ele_delta),u_fog_matrix:new s.c0(v,t.u_fog_matrix),u_fog_color:new s.b$(v,t.u_fog_color),u_fog_ground_blend:new s.bq(v,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bq(v,t.u_fog_ground_blend_opacity),u_horizon_color:new s.b$(v,t.u_horizon_color),u_horizon_fog_blend:new s.bq(v,t.u_horizon_fog_blend),u_is_globe_mode:new s.bq(v,t.u_is_globe_mode)}),terrainDepth:(v,t)=>({u_ele_delta:new s.bq(v,t.u_ele_delta)}),terrainCoords:(v,t)=>({u_texture:new s.b_(v,t.u_texture),u_terrain_coords_id:new s.bq(v,t.u_terrain_coords_id),u_ele_delta:new s.bq(v,t.u_ele_delta)}),projectionErrorMeasurement:(v,t)=>({u_input:new s.bq(v,t.u_input),u_output_expected:new s.bq(v,t.u_output_expected)}),atmosphere:(v,t)=>({u_sun_pos:new s.c2(v,t.u_sun_pos),u_atmosphere_blend:new s.bq(v,t.u_atmosphere_blend),u_globe_position:new s.c2(v,t.u_globe_position),u_globe_radius:new s.bq(v,t.u_globe_radius),u_inv_proj_matrix:new s.c0(v,t.u_inv_proj_matrix)}),sky:(v,t)=>({u_sky_color:new s.b$(v,t.u_sky_color),u_horizon_color:new s.b$(v,t.u_horizon_color),u_horizon:new s.c3(v,t.u_horizon),u_horizon_normal:new s.c3(v,t.u_horizon_normal),u_sky_horizon_blend:new s.bq(v,t.u_sky_horizon_blend),u_sky_blend:new s.bq(v,t.u_sky_blend)})};class Nf{constructor(t,o,p){this.context=t;const g=t.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ec={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Uf{constructor(t,o,p,g){this.length=o.length,this.attributes=p,this.itemSize=o.bytesPerElement,this.dynamicDraw=g,this.context=t;const x=t.gl;this.buffer=x.createBuffer(),t.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let p=0;p<this.attributes.length;p++){const g=o.attributes[this.attributes[p].name];g!==void 0&&t.enableVertexAttribArray(g)}}setVertexAttribPointers(t,o,p){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],k=o.attributes[x.name];k!==void 0&&t.vertexAttribPointer(k,x.components,t[Ec[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class It{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ol extends It{getDefault(){return s.bp.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ll extends It{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class ul extends It{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Iu extends It{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class cr extends It{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Ws extends It{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class es extends It{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Wn extends It{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Lc extends It{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class Dc extends It{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class zu extends It{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class hr extends It{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class dl extends It{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class cl extends It{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Hs extends It{getDefault(){return s.bp.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class hl extends It{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Ac extends It{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class ts extends It{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class is extends It{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Ic extends It{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Ru extends It{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class bt extends It{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class fl extends It{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Gf extends It{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class zc extends It{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Zs extends It{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class qf extends It{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Wf extends It{getDefault(){return null}set(t){var o;if(t===this.current&&!this.dirty)return;const p=this.gl;qn(p)?p.bindVertexArray(t):(o=p.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Rc extends It{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Hf extends It{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Fu extends It{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class ns extends It{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class Ks extends ns{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class pl extends ns{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ju extends ns{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const Ou="Framebuffer is not complete";class ml{constructor(t,o,p,g,x){this.context=t,this.width=o,this.height=p;const k=t.gl,M=this.framebuffer=k.createFramebuffer();if(this.colorAttachment=new Ks(t,M),g)this.depthAttachment=x?new ju(t,M):new pl(t,M);else if(x)throw new Error("Stencil cannot be set without depth");if(k.checkFramebufferStatus(k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)throw new Error(Ou)}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const p=this.depthAttachment.get();p&&t.deleteRenderbuffer(p)}t.deleteFramebuffer(this.framebuffer)}}class gl{constructor(t){var o,p;if(this.gl=t,this.clearColor=new ol(this),this.clearDepth=new ll(this),this.clearStencil=new ul(this),this.colorMask=new Iu(this),this.depthMask=new cr(this),this.stencilMask=new Ws(this),this.stencilFunc=new es(this),this.stencilOp=new Wn(this),this.stencilTest=new Lc(this),this.depthRange=new Dc(this),this.depthTest=new zu(this),this.depthFunc=new hr(this),this.blend=new dl(this),this.blendFunc=new cl(this),this.blendColor=new Hs(this),this.blendEquation=new hl(this),this.cullFace=new Ac(this),this.cullFaceSide=new ts(this),this.frontFace=new is(this),this.program=new Ic(this),this.activeTexture=new Ru(this),this.viewport=new bt(this),this.bindFramebuffer=new fl(this),this.bindRenderbuffer=new Gf(this),this.bindTexture=new zc(this),this.bindVertexBuffer=new Zs(this),this.bindElementBuffer=new qf(this),this.bindVertexArray=new Wf(this),this.pixelStoreUnpack=new Rc(this),this.pixelStoreUnpackPremultiplyAlpha=new Hf(this),this.pixelStoreUnpackFlipY=new Fu(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),qn(t)){this.HALF_FLOAT=t.HALF_FLOAT;const g=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=t.RGBA16F)!==null&&o!==void 0?o:g?.RGBA16F_EXT,this.RGB16F=(p=t.RGB16F)!==null&&p!==void 0?p:g?.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const g=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=g?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new Nf(this,t,o)}createVertexBuffer(t,o,p){return new Uf(this,t,o,p)}createRenderbuffer(t,o,p){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,t,o,p),this.bindRenderbuffer.set(null),x}createFramebuffer(t,o,p,g){return new ml(this,t,o,p,g)}clear({color:t,depth:o,stencil:p}){const g=this.gl;let x=0;t&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),p!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(x)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){s.bR(t.blendFunction,Wt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return qn(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var o;return qn(this.gl)?this.gl.deleteVertexArray(t):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let Ba;function fr(v,t,o,p,g){const x=v.context,k=v.transform,M=x.gl,C=v.useProgram("collisionBox"),A=[];let R=0,B=0;for(let ne=0;ne<p.length;ne++){const oe=p[ne],he=t.getTile(oe).getBucket(o);if(!he)continue;const re=g?he.textCollisionBox:he.iconCollisionBox,de=he.collisionCircleArray;de.length>0&&(A.push({circleArray:de,circleOffset:B,coord:oe}),R+=de.length/4,B=R),re&&C.draw(x,M.LINES,_t.disabled,Ct.disabled,v.colorModeForRenderPass(),Pt.disabled,ur(v.transform),v.style.map.terrain&&v.style.map.terrain.getTerrainData(oe),k.getProjectionData({overscaledTileID:oe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,null,v.transform.zoom,null,null,re.collisionVertexBuffer)}if(!g||!A.length)return;const $=v.useProgram("collisionCircle"),G=new s.ca;G.resize(4*R),G._trim();let K=0;for(const ne of A)for(let oe=0;oe<ne.circleArray.length/4;oe++){const he=4*oe,re=ne.circleArray[he+0],de=ne.circleArray[he+1],me=ne.circleArray[he+2],ue=ne.circleArray[he+3];G.emplace(K++,re,de,me,ue,0),G.emplace(K++,re,de,me,ue,1),G.emplace(K++,re,de,me,ue,2),G.emplace(K++,re,de,me,ue,3)}(!Ba||Ba.length<2*R)&&(Ba=(function(ne){const oe=2*ne,he=new s.cc;he.resize(oe),he._trim();for(let re=0;re<oe;re++){const de=6*re;he.uint16[de+0]=4*re+0,he.uint16[de+1]=4*re+1,he.uint16[de+2]=4*re+2,he.uint16[de+3]=4*re+2,he.uint16[de+4]=4*re+3,he.uint16[de+5]=4*re+0}return he})(R));const ie=x.createIndexBuffer(Ba,!0),ae=x.createVertexBuffer(G,s.cb.members,!0);for(const ne of A){const oe=kc(v.transform);$.draw(x,M.TRIANGLES,_t.disabled,Ct.disabled,v.colorModeForRenderPass(),Pt.disabled,oe,v.style.map.terrain&&v.style.map.terrain.getTerrainData(ne.coord),null,o.id,ae,ie,s.aX.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,v.transform.zoom,null,null,null)}ae.destroy(),ie.destroy()}const $u=s.ar(new Float32Array(16));function Zf(v,t,o,p,g,x){const{horizontalAlign:k,verticalAlign:M}=s.aS(v);return new s.P((-(k-.5)*t/g+p[0])*x,(-(M-.5)*o/g+p[1])*x)}function Ys(v,t,o,p,g,x){const k=t.tileAnchorPoint.add(new s.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let M=p.mult(x);o||(M=M.rotate(-g));const C=k.add(M);return gt(C.x,C.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(o){const M=$t(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(v),C=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return v.add(p.rotate(C))}return v.add(p)}function Kf(v,t,o,p,g,x,k,M,C,A,R,B){const $=v.text.placedSymbolArray,G=v.text.dynamicLayoutVertexArray,K=v.icon.dynamicLayoutVertexArray,ie={};G.clear();for(let ae=0;ae<$.length;ae++){const ne=$.get(ae),oe=ne.hidden||!ne.crossTileID||v.allowVerticalPlacement&&!ne.placedOrientation?null:p[ne.crossTileID];if(oe){const he=new s.P(ne.anchorX,ne.anchorY),re={getElevation:B,width:g.width,height:g.height,pitchedLabelPlaneMatrix:x,pitchWithMap:o,transform:g,tileAnchorPoint:he,translation:A,unwrappedTileID:R},de=o?Br(he.x,he.y,re):$t(he.x,he.y,re),me=As(g.cameraToCenterDistance,de.signedDistanceFromCamera);let ue=s.aA(v.textSizeData,M,ne)*me/s.aM;o&&(ue*=v.tilePixelRatio/k);const{width:ve,height:De,anchor:Te,textOffset:Pe,textBoxScale:Ce}=oe,Ge=Zf(Te,ve,De,Pe,Ce,ue),We=g.getPitchedTextCorrection(he.x+A[0],he.y+A[1],R),$e=Ys(de.point,re,t,Ge,-g.bearingInRadians,We),Ke=v.allowVerticalPlacement&&ne.placedOrientation===s.az.vertical?Math.PI/2:0;for(let pt=0;pt<ne.numGlyphs;pt++)s.aG(G,$e,Ke);C&&ne.associatedIconIndex>=0&&(ie[ne.associatedIconIndex]={shiftedAnchor:$e,angle:Ke})}else nr(ne.numGlyphs,G)}if(C){K.clear();const ae=v.icon.placedSymbolArray;for(let ne=0;ne<ae.length;ne++){const oe=ae.get(ne);if(oe.hidden)nr(oe.numGlyphs,K);else{const he=ie[ne];if(he)for(let re=0;re<oe.numGlyphs;re++)s.aG(K,he.shiftedAnchor,he.angle);else nr(oe.numGlyphs,K)}}v.icon.dynamicLayoutVertexBuffer.updateData(K)}v.text.dynamicLayoutVertexBuffer.updateData(G)}function Fc(v,t,o){return o.iconsInText&&t?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Xs(v,t,o,p,g,x,k,M,C,A,R,B,$){const G=v.context,K=G.gl,ie=v.transform,ae=M==="map",ne=C==="map",oe=M!=="viewport"&&o.layout.get("symbol-placement")!=="point",he=ae&&!ne&&!oe,re=!o.layout.get("symbol-sort-key").isConstant();let de=!1;const me=v.getDepthModeForSublayer(0,_t.ReadOnly),ue=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ve=[],De=ie.getCircleRadiusCorrection();for(const Te of p){const Pe=t.getTile(Te),Ce=Pe.getBucket(o);if(!Ce)continue;const Ge=g?Ce.text:Ce.icon;if(!Ge||!Ge.segments.get().length||!Ge.hasVisibleVertices)continue;const We=Ge.programConfigurations.get(o.id),$e=g||Ce.sdfIcons,Ke=g?Ce.textSizeData:Ce.iconSizeData,pt=ne||ie.pitch!==0,Ft=v.useProgram(Fc($e,g,Ce),We),ei=s.ay(Ke,ie.zoom),Ht=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Te);let ni,Zt,_i,ai,qi=[0,0],Ai=null;if(g)Zt=Pe.glyphAtlasTexture,_i=K.LINEAR,ni=Pe.glyphAtlasTexture.size,Ce.iconsInText&&(qi=Pe.imageAtlasTexture.size,Ai=Pe.imageAtlasTexture,ai=pt||v.options.rotating||v.options.zooming||Ke.kind==="composite"||Ke.kind==="camera"?K.LINEAR:K.NEAREST);else{const Yt=o.layout.get("icon-size").constantOr(0)!==1||Ce.iconsNeedLinear;Zt=Pe.imageAtlasTexture,_i=$e||v.options.rotating||v.options.zooming||Yt||pt?K.LINEAR:K.NEAREST,ni=Pe.imageAtlasTexture.size}const Ti=s.aN(Pe,1,v.transform.zoom),nn=Fn(ae,v.transform,Ti),qa=s.N();s.aB(qa,nn);const Ta=Ho(ne,ae,v.transform,Ti),ga=s.aO(ie,Pe,x,k),Pn=ie.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),vr=ue&&Ce.hasTextData(),yo=o.layout.get("icon-text-fit")!=="none"&&vr&&Ce.hasIconData();if(oe){const Yt=v.style.map.terrain?(Bi,Vi)=>v.style.map.terrain.getElevation(Te,Bi,Vi):null,Kt=o.layout.get("text-rotation-alignment")==="map";Zo(Ce,v,g,nn,qa,ne,A,Kt,Te.toUnwrapped(),ie.width,ie.height,ga,Yt)}const xr=g&&ue||yo,Kn=oe||xr?$u:ne?nn:v.transform.clipSpaceToPixelsMatrix,_a=$e&&o.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oa;oa=$e?Ce.iconsInText?dr(Ke.kind,ei,he,ne,oe,xr,v,Kn,Ta,ga,ni,qi,De):sl(Ke.kind,ei,he,ne,oe,xr,v,Kn,Ta,ga,g,ni,0,De):Du(Ke.kind,ei,he,ne,oe,xr,v,Kn,Ta,ga,g,ni,De);const la={program:Ft,buffers:Ge,uniformValues:oa,projectionData:Pn,atlasTexture:Zt,atlasTextureIcon:Ai,atlasInterpolation:_i,atlasInterpolationIcon:ai,isSDF:$e,hasHalo:_a};if(re&&Ce.canOverlap){de=!0;const Yt=Ge.segments.get();for(const Kt of Yt)ve.push({segments:new s.aX([Kt]),sortKey:Kt.sortKey,state:la,terrainData:Ht})}else ve.push({segments:Ge.segments,sortKey:0,state:la,terrainData:Ht})}de&&ve.sort(((Te,Pe)=>Te.sortKey-Pe.sortKey));for(const Te of ve){const Pe=Te.state;if(G.activeTexture.set(K.TEXTURE0),Pe.atlasTexture.bind(Pe.atlasInterpolation,K.CLAMP_TO_EDGE),Pe.atlasTextureIcon&&(G.activeTexture.set(K.TEXTURE1),Pe.atlasTextureIcon&&Pe.atlasTextureIcon.bind(Pe.atlasInterpolationIcon,K.CLAMP_TO_EDGE)),Pe.isSDF){const Ce=Pe.uniformValues;Pe.hasHalo&&(Ce.u_is_halo=1,_l(Pe.buffers,Te.segments,o,v,Pe.program,me,R,B,Ce,Pe.projectionData,Te.terrainData)),Ce.u_is_halo=0}_l(Pe.buffers,Te.segments,o,v,Pe.program,me,R,B,Pe.uniformValues,Pe.projectionData,Te.terrainData)}}function _l(v,t,o,p,g,x,k,M,C,A,R){const B=p.context;g.draw(B,B.gl.TRIANGLES,x,k,M,Pt.backCCW,C,R,A,o.id,v.layoutVertexBuffer,v.indexBuffer,t,o.paint,p.transform.zoom,v.programConfigurations.get(o.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function jc(v,t,o,p,g){const x=v.context,k=x.gl,M=Ct.disabled,C=new Wt([k.ONE,k.ONE],s.bp.transparent,[!0,!0,!0,!0]),A=t.getBucket(o);if(!A)return;const R=p.key;let B=o.heatmapFbos.get(R);B||(B=Js(x,t.tileSize,t.tileSize),o.heatmapFbos.set(R,B)),x.bindFramebuffer.set(B.framebuffer),x.viewport.set([0,0,t.tileSize,t.tileSize]),x.clear({color:s.bp.transparent});const $=A.programConfigurations.get(o.id),G=v.useProgram("heatmap",$,!g),K=v.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ie=v.style.map.terrain.getTerrainData(p);G.draw(x,k.TRIANGLES,_t.disabled,M,C,Pt.disabled,Qr(t,v.transform.zoom,o.paint.get("heatmap-intensity"),1),ie,K,o.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,o.paint,v.transform.zoom,$)}function Oc(v,t,o,p,g){const x=v.context,k=x.gl,M=v.transform;x.setColorMode(v.colorModeForRenderPass());const C=yl(x,t),A=o.key,R=t.heatmapFbos.get(A);if(!R)return;x.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,R.colorAttachment.get()),x.activeTexture.set(k.TEXTURE1),C.bind(k.LINEAR,k.CLAMP_TO_EDGE);const B=M.getProjectionData({overscaledTileID:o,applyTerrainMatrix:g,applyGlobeMatrix:!p});v.useProgram("heatmapTexture").draw(x,k.TRIANGLES,_t.disabled,Ct.disabled,v.colorModeForRenderPass(),Pt.disabled,Sc(v,t,0,1),null,B,t.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,t.paint,M.zoom),R.destroy(),t.heatmapFbos.delete(A)}function Js(v,t,o){var p,g;const x=v.gl,k=x.createTexture();x.bindTexture(x.TEXTURE_2D,k),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR);const M=(p=v.HALF_FLOAT)!==null&&p!==void 0?p:x.UNSIGNED_BYTE,C=(g=v.RGBA16F)!==null&&g!==void 0?g:x.RGBA;x.texImage2D(x.TEXTURE_2D,0,C,t,o,0,x.RGBA,M,null);const A=v.createFramebuffer(t,o,!1,!1);return A.colorAttachment.set(k),A}function yl(v,t){return t.colorRampTexture||(t.colorRampTexture=new s.T(v,t.colorRamp,v.gl.RGBA)),t.colorRampTexture}function $c(v,t,o,p,g,x,k,M){let C=256;if(g.stepInterpolant){const A=t.getSource().maxzoom,R=k.canonical.z===A?Math.ceil(1<<v.transform.maxZoom-k.canonical.z):1;C=s.an(s.ce(x.maxLineLength/s.a5*1024*R),256,o.maxTextureSize)}return M.gradient=s.cf({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:C,image:M.gradient||void 0,clips:x.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new s.T(o,M.gradient,p.RGBA),M.version=g.gradientVersion,M.texture}function Bc(v,t,o,p,g){v.activeTexture.set(t.TEXTURE0),o.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),p.updatePaintBuffers(g)}function ki(v,t,o,p,g,x){(g||v.lineAtlas.dirty)&&(t.activeTexture.set(o.TEXTURE0),v.lineAtlas.bind(t)),p.updatePaintBuffers(x)}function pr(v,t,o,p,g,x,k){const M=x.gradients[g.id];let C=M.texture;g.gradientVersion!==M.version&&(C=$c(v,t,o,p,g,x,k,M)),o.activeTexture.set(p.TEXTURE0),C.bind(g.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE)}function On(v,t,o,p,g,x,k,M,C){const A=x.gradients[g.id];let R=A.texture;g.gradientVersion!==A.version&&(R=$c(v,t,o,p,g,x,k,A)),o.activeTexture.set(p.TEXTURE0),R.bind(g.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE),o.activeTexture.set(p.TEXTURE1),v.lineAtlas.bind(o),M.updatePaintBuffers(C)}function vl(v,t,o,p,g){if(!o||!p||!p.imageAtlas)return;const x=p.imageAtlas.patternPositions;let k=x[o.to.toString()],M=x[o.from.toString()];if(!k&&M&&(k=M),!M&&k&&(M=k),!k||!M){const C=g.getPaintProperty(t);k=x[C],M=x[C]}k&&M&&v.setConstantPatternPositions(k,M)}function Qs(v,t,o,p,g,x,k,M){const C=v.context.gl,A="fill-pattern",R=o.paint.get(A),B=R&&R.constantOr(1),$=o.getCrossfadeParameters();let G,K,ie,ae,ne;const oe=v.transform,he=o.paint.get("fill-translate"),re=o.paint.get("fill-translate-anchor");k?(K=B&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=C.LINES):(K=B?"fillPattern":"fill",G=C.TRIANGLES);const de=R.constantOr(null);for(const me of p){const ue=t.getTile(me);if(B&&!ue.patternsLoaded())continue;const ve=ue.getBucket(o);if(!ve)continue;const De=ve.programConfigurations.get(o.id),Te=v.useProgram(K,De),Pe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(me);B&&(v.context.activeTexture.set(C.TEXTURE0),ue.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),De.updatePaintBuffers($)),vl(De,A,de,ue,o);const Ce=oe.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!M,applyTerrainMatrix:!0}),Ge=s.aO(oe,ue,he,re);if(k){ae=ve.indexBuffer2,ne=ve.segments2;const $e=[C.drawingBufferWidth,C.drawingBufferHeight];ie=K==="fillOutlinePattern"&&B?bc(v,$,ue,$e,Ge):xc($e,Ge)}else ae=ve.indexBuffer,ne=ve.segments,ie=B?Mu(v,$,ue,Ge):{u_fill_translate:Ge};const We=v.stencilModeForClipping(me);Te.draw(v.context,G,g,We,x,Pt.backCCW,ie,Pe,Ce,o.id,ve.layoutVertexBuffer,ae,ne,o.paint,v.transform.zoom,De)}}function xl(v,t,o,p,g,x,k,M){const C=v.context,A=C.gl,R="fill-extrusion-pattern",B=o.paint.get(R),$=B.constantOr(1),G=o.getCrossfadeParameters(),K=o.paint.get("fill-extrusion-opacity"),ie=B.constantOr(null),ae=v.transform;for(const ne of p){const oe=t.getTile(ne),he=oe.getBucket(o);if(!he)continue;const re=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ne),de=he.programConfigurations.get(o.id),me=v.useProgram($?"fillExtrusionPattern":"fillExtrusion",de);$&&(v.context.activeTexture.set(A.TEXTURE0),oe.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),de.updatePaintBuffers(G));const ue=ae.getProjectionData({overscaledTileID:ne,applyGlobeMatrix:!M,applyTerrainMatrix:!0});vl(de,R,ie,oe,o);const ve=s.aO(ae,oe,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),De=o.paint.get("fill-extrusion-vertical-gradient"),Te=$?Tu(v,De,K,ve,ne,G,oe):Su(v,De,K,ve);me.draw(C,C.gl.TRIANGLES,g,x,k,Pt.backCCW,Te,re,ue,o.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,o.paint,v.transform.zoom,de,v.style.map.terrain&&he.centroidVertexBuffer)}}function Va(v,t,o,p,g,x,k,M,C){var A;const R=v.style.projection,B=v.context,$=v.transform,G=B.gl,K=[`#define NUM_ILLUMINATION_SOURCES ${o.paint.get("hillshade-highlight-color").values.length}`],ie=v.useProgram("hillshade",null,!1,K),ae=!v.options.moving;for(const ne of p){const oe=t.getTile(ne),he=oe.fbo;if(!he)continue;const re=R.getMeshFromTileID(B,ne.canonical,M,!0,"raster"),de=(A=v.style.map.terrain)===null||A===void 0?void 0:A.getTerrainData(ne);B.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,he.colorAttachment.get());const me=$.getProjectionData({overscaledTileID:ne,aligned:ae,applyGlobeMatrix:!C,applyTerrainMatrix:!0});ie.draw(B,G.TRIANGLES,x,g[ne.overscaledZ],k,Pt.backCCW,nl(v,oe,o),de,me,o.id,re.vertexBuffer,re.indexBuffer,re.segments)}}function eo(v,t,o,p,g,x,k,M,C){var A;const R=v.style.projection,B=v.context,$=v.transform,G=B.gl,K=v.useProgram("colorRelief"),ie=!v.options.moving;let ae=!0,ne=0;for(const oe of p){const he=t.getTile(oe),re=he.dem;if(ae){const Te=G.getParameter(G.MAX_TEXTURE_SIZE),{elevationTexture:Pe,colorTexture:Ce}=o.getColorRampTextures(B,Te,re.getUnpackVector());B.activeTexture.set(G.TEXTURE1),Pe.bind(G.NEAREST,G.CLAMP_TO_EDGE),B.activeTexture.set(G.TEXTURE4),Ce.bind(G.LINEAR,G.CLAMP_TO_EDGE),ae=!1,ne=Pe.size[0]}if(!re||!re.data)continue;const de=re.stride,me=re.getPixels();if(B.activeTexture.set(G.TEXTURE0),B.pixelStoreUnpackPremultiplyAlpha.set(!1),he.demTexture=he.demTexture||v.getTileTexture(de),he.demTexture){const Te=he.demTexture;Te.update(me,{premultiply:!1}),Te.bind(G.LINEAR,G.CLAMP_TO_EDGE)}else he.demTexture=new s.T(B,me,G.RGBA,{premultiply:!1}),he.demTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE);const ue=R.getMeshFromTileID(B,oe.canonical,M,!0,"raster"),ve=(A=v.style.map.terrain)===null||A===void 0?void 0:A.getTerrainData(oe),De=$.getProjectionData({overscaledTileID:oe,aligned:ie,applyGlobeMatrix:!C,applyTerrainMatrix:!0});K.draw(B,G.TRIANGLES,x,g[oe.overscaledZ],k,Pt.backCCW,Tc(o,he.dem,ne),ve,De,o.id,ue.vertexBuffer,ue.indexBuffer,ue.segments)}}const mr=[new s.P(0,0),new s.P(s.a5,0),new s.P(s.a5,s.a5),new s.P(0,s.a5)];function as(v,t,o,p,g,x,k,M,C=!1,A=!1){const R=p[p.length-1].overscaledZ,B=v.context,$=B.gl,G=v.useProgram("raster"),K=v.transform,ie=v.style.projection,ae=v.colorModeForRenderPass(),ne=!v.options.moving,oe=o.paint.get("raster-opacity"),he=o.paint.get("raster-resampling"),re=o.paint.get("raster-fade-duration"),de=!!v.style.map.terrain;for(const me of p){const ue=v.getDepthModeForSublayer(me.overscaledZ-R,oe===1?_t.ReadWrite:_t.ReadOnly,$.LESS),ve=t.getTile(me),De=he==="nearest"?$.NEAREST:$.LINEAR;B.activeTexture.set($.TEXTURE0),ve.texture.bind(De,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),B.activeTexture.set($.TEXTURE1);const{parentTile:Te,parentScaleBy:Pe,parentTopLeft:Ce,fadeValues:Ge}=Vc(ve,t,re,de);ve.fadeOpacity=Ge.tileOpacity,Te?(Te.fadeOpacity=Ge.parentTileOpacity,Te.texture.bind(De,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST)):ve.texture.bind(De,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),ve.texture.useMipmap&&B.extTextureFilterAnisotropic&&v.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax);const We=v.style.map.terrain&&v.style.map.terrain.getTerrainData(me),$e=K.getProjectionData({overscaledTileID:me,aligned:ne,applyGlobeMatrix:!A,applyTerrainMatrix:!0}),Ke=Eu(Ce,Pe,Ge.fadeMix,o,M),pt=ie.getMeshFromTileID(B,me.canonical,x,k,"raster");G.draw(B,$.TRIANGLES,ue,g?g[me.overscaledZ]:Ct.disabled,ae,C?Pt.frontCCW:Pt.backCCW,Ke,We,$e,o.id,pt.vertexBuffer,pt.indexBuffer,pt.segments)}}function Vc(v,t,o,p){const g={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(o===0||p)return g;if(v.fadingParentID){const x=t.getLoadedTile(v.fadingParentID);if(!x)return g;const k=Math.pow(2,x.tileID.overscaledZ-v.tileID.overscaledZ),M=[v.tileID.canonical.x*k%1,v.tileID.canonical.y*k%1],C=(function(A,R,B){const $=te(),G=($-R.timeAdded)/B,K=A.fadingDirection===Le.Incoming,ie=s.an(($-A.timeAdded)/B,0,1),ae=s.an(1-G,0,1),ne=K?ie:ae;return{tileOpacity:ne,parentTileOpacity:K?ae:ie,fadeMix:{opacity:1,mix:1-ne}}})(v,x,o);return{parentTile:x,parentScaleBy:k,parentTopLeft:M,fadeValues:C}}if(v.selfFading){const x=(function(k,M){const C=(te()-k.timeAdded)/M,A=s.an(C,0,1);return{tileOpacity:A,fadeMix:{opacity:A,mix:0}}})(v,o);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:x}}return g}const Nc=new s.bp(1,0,0,1),Uc=new s.bp(0,1,0,1),Gc=new s.bp(0,0,1,1),qc=new s.bp(1,0,1,1),Na=new s.bp(0,1,1,1);function Bu(v,t,o,p){to(v,0,t+o/2,v.transform.width,o,p)}function Vu(v,t,o,p){to(v,t-o/2,0,o,v.transform.height,p)}function to(v,t,o,p,g,x){const k=v.context,M=k.gl;M.enable(M.SCISSOR_TEST),M.scissor(t*v.pixelRatio,o*v.pixelRatio,p*v.pixelRatio,g*v.pixelRatio),k.clear({color:x}),M.disable(M.SCISSOR_TEST)}function Wc(v,t,o){const p=v.context,g=p.gl,x=v.useProgram("debug"),k=_t.disabled,M=Ct.disabled,C=v.colorModeForRenderPass(),A="$debug",R=v.style.map.terrain&&v.style.map.terrain.getTerrainData(o);p.activeTexture.set(g.TEXTURE0);const B=t.getTileByID(o.key).latestRawTileData,$=Math.floor((B&&B.byteLength||0)/1024),G=t.getTile(o).tileSize,K=512/Math.min(G,512)*(o.overscaledZ/v.transform.zoom)*.5;let ie=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ie+=` => ${o.overscaledZ}`),(function(ne,oe){ne.initDebugOverlayCanvas();const he=ne.debugOverlayCanvas,re=ne.context.gl,de=ne.debugOverlayCanvas.getContext("2d");de.clearRect(0,0,he.width,he.height),de.shadowColor="white",de.shadowBlur=2,de.lineWidth=1.5,de.strokeStyle="white",de.textBaseline="top",de.font="bold 36px Open Sans, sans-serif",de.fillText(oe,5,5),de.strokeText(oe,5,5),ne.debugOverlayTexture.update(he),ne.debugOverlayTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE)})(v,`${ie} ${$}kB`);const ae=v.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(p,g.TRIANGLES,k,M,Wt.alphaBlended,Pt.disabled,Pu(s.bp.transparent,K),null,ae,A,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),x.draw(p,g.LINE_STRIP,k,M,C,Pt.disabled,Pu(s.bp.red),R,ae,A,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Nu(v,t,o,p){const{isRenderingGlobe:g}=p,x=v.context,k=x.gl,M=v.transform,C=v.colorModeForRenderPass(),A=v.getDepthModeFor3D(),R=v.useProgram("terrain");x.bindFramebuffer.set(null),x.viewport.set([0,0,v.width,v.height]);for(const B of o){const $=t.getTerrainMesh(B.tileID),G=v.renderToTexture.getTexture(B),K=t.getTerrainData(B.tileID);x.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,G.texture);const ie=t.getMeshFrameDelta(M.zoom),ae=M.calculateFogMatrix(B.tileID.toUnwrapped()),ne=jf(ie,ae,v.style.sky,M.pitch,g),oe=M.getProjectionData({overscaledTileID:B.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});R.draw(x,k.TRIANGLES,A,Ct.disabled,C,Pt.backCCW,ne,K,oe,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}function Uu(v,t){if(!t.mesh){const o=new s.aW;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const p=new s.aY;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),t.mesh=new qt(v.createVertexBuffer(o,ja.members),v.createIndexBuffer(p),s.aX.simpleSegment(0,0,o.length,p.length))}return t.mesh}class Hc{constructor(t,o){this.context=new gl(t),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Gn.maxOverzooming+Gn.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Tn}resize(t,o,p){if(this.width=Math.floor(t*p),this.height=Math.floor(o*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const t=this.context,o=new s.aW;o.emplaceBack(0,0),o.emplaceBack(s.a5,0),o.emplaceBack(0,s.a5),o.emplaceBack(s.a5,s.a5),this.tileExtentBuffer=t.createVertexBuffer(o,ja.members),this.tileExtentSegments=s.aX.simpleSegment(0,0,4,2);const p=new s.aW;p.emplaceBack(0,0),p.emplaceBack(s.a5,0),p.emplaceBack(0,s.a5),p.emplaceBack(s.a5,s.a5),this.debugBuffer=t.createVertexBuffer(p,ja.members),this.debugSegments=s.aX.simpleSegment(0,0,4,5);const g=new s.ch;g.emplaceBack(0,0,0,0),g.emplaceBack(s.a5,0,s.a5,0),g.emplaceBack(0,s.a5,0,s.a5),g.emplaceBack(s.a5,s.a5,s.a5,s.a5),this.rasterBoundsBuffer=t.createVertexBuffer(g,Ff.members),this.rasterBoundsSegments=s.aX.simpleSegment(0,0,4,2);const x=new s.aW;x.emplaceBack(0,0),x.emplaceBack(s.a5,0),x.emplaceBack(0,s.a5),x.emplaceBack(s.a5,s.a5),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(x,ja.members),this.rasterBoundsSegmentsPosOnly=s.aX.simpleSegment(0,0,4,5);const k=new s.aW;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(k,ja.members),this.viewportSegments=s.aX.simpleSegment(0,0,4,2);const M=new s.ci;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(M);const C=new s.aY;C.emplaceBack(1,0,2),C.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(C);const A=this.context.gl;this.stencilClearMode=new Ct({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO),this.tileExtentMesh=new qt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=s.N();s.c7(p,0,this.width,this.height,0,0,1),s.Q(p,p,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const g={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(t,o.TRIANGLES,_t.disabled,this.stencilClearMode,Wt.disabled,Pt.disabled,null,null,g,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,o,p){if(this.currentStencilSource===t.source||!t.isTileClipped()||!o||!o.length)return;this.currentStencilSource=t.source,this.nextStencilID+o.length>256&&this.clearStencil();const g=this.context;g.setColorMode(Wt.disabled),g.setDepthMode(_t.disabled);const x={};for(const k of o)x[k.key]=this.nextStencilID++;this._renderTileMasks(x,o,p,!0),this._renderTileMasks(x,o,p,!1),this._tileClippingMaskIDs=x}_renderTileMasks(t,o,p,g){const x=this.context,k=x.gl,M=this.style.projection,C=this.transform,A=this.useProgram("clippingMask");for(const R of o){const B=t[R.key],$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),G=M.getMeshFromTileID(this.context,R.canonical,g,!0,"stencil"),K=C.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!p,applyTerrainMatrix:!0});A.draw(x,k.TRIANGLES,_t.disabled,new Ct({func:k.ALWAYS,mask:0},B,255,k.KEEP,k.KEEP,k.REPLACE),Wt.disabled,p?Pt.disabled:Pt.backCCW,null,$,K,"$clipping",G.vertexBuffer,G.indexBuffer,G.segments)}}_renderTilesDepthBuffer(){const t=this.context,o=t.gl,p=this.style.projection,g=this.transform,x=this.useProgram("depth"),k=this.getDepthModeFor3D(),M=pi(g,{tileSize:g.tileSize});for(const C of M){const A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C),R=p.getMeshFromTileID(this.context,C.canonical,!0,!0,"raster"),B=g.getProjectionData({overscaledTileID:C,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(t,o.TRIANGLES,k,Ct.disabled,Wt.disabled,Pt.backCCW,null,A,B,"$clipping",R.vertexBuffer,R.indexBuffer,R.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new Ct({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){const o=this.context.gl;return new Ct({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const o=this.context.gl,p=t.sort(((k,M)=>M.overscaledZ-k.overscaledZ)),g=p[p.length-1].overscaledZ,x=p[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const k={};for(let M=0;M<x;M++)k[M+g]=new Ct({func:o.GEQUAL,mask:255},M+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=x,[k,p]}return[{[g]:Ct.disabled},p]}stencilConfigForOverlapTwoPass(t){const o=this.context.gl,p=t.sort(((k,M)=>M.overscaledZ-k.overscaledZ)),g=p[p.length-1].overscaledZ,x=p[0].overscaledZ-g+1;if(this.clearStencil(),x>1){const k={},M={};for(let C=0;C<x;C++)k[C+g]=new Ct({func:o.GREATER,mask:255},x+1+C,255,o.KEEP,o.KEEP,o.REPLACE),M[C+g]=new Ct({func:o.GREATER,mask:255},1+C,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*x+1,[k,M,p]}return this.nextStencilID=3,[{[g]:new Ct({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[g]:new Ct({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},p]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Wt([t.CONSTANT_COLOR,t.ONE],new s.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Wt.unblended:Wt.alphaBlended}getDepthModeForSublayer(t,o,p){if(!this.opaquePassEnabledForLayer())return _t.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new _t(p||this.context.gl.LEQUAL,o,[g,g])}getDepthModeFor3D(){return new _t(this.context.gl.LEQUAL,_t.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){var p,g;this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(te()),this.imageManager.beginFrame();const x=this.style._order,k=this.style.tileManagers,M={},C={},A={},R={isRenderingToTexture:!1,isRenderingGlobe:((p=t.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const $ in k){const G=k[$];G.used&&G.prepare(this.context),M[$]=G.getVisibleCoordinates(!1),C[$]=M[$].slice().reverse(),A[$]=G.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<x.length;$++)if(this.style._layers[x[$]].is3D()){this.opaquePassCutoff=$;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const $ of x){const G=this.style._layers[$];if(!G.hasOffscreenPass()||G.isHidden(this.transform.zoom))continue;const K=C[G.source];(G.type==="custom"||K.length)&&this.renderLayer(this,k[G.source],G,K,R)}if((g=this.style.projection)===null||g===void 0||g.updateGPUdependent({context:this.context,useProgram:$=>this.useProgram($)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?s.bp.black:s.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function($,G){const K=$.context,ie=K.gl,ae=((me,ue,ve)=>{const De=Math.cos(ue.rollInRadians),Te=Math.sin(ue.rollInRadians),Pe=Vt(ue),Ce=ue.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:me.properties.get("sky-color"),u_horizon_color:me.properties.get("horizon-color"),u_horizon:[(ue.width/2-Pe*Te)*ve,(ue.height/2+Pe*De)*ve],u_horizon_normal:[-Te,De],u_sky_horizon_blend:me.properties.get("sky-horizon-blend")*ue.height/2*ve,u_sky_blend:Ce}})(G,$.style.map.transform,$.pixelRatio),ne=new _t(ie.LEQUAL,_t.ReadWrite,[0,1]),oe=Ct.disabled,he=$.colorModeForRenderPass(),re=$.useProgram("sky"),de=Uu(K,G);re.draw(K,ie.TRIANGLES,ne,oe,he,Pt.disabled,ae,null,void 0,"sky",de.vertexBuffer,de.indexBuffer,de.segments)})(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[x[this.currentLayer]],G=k[$.source],K=M[$.source];this._renderTileClippingMasks($,K,!1),this.renderLayer(this,G,$,K,R)}this.renderPass="translucent";let B=!1;for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const $=this.style._layers[x[this.currentLayer]],G=k[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($,R))continue;this.opaquePassEnabledForLayer()||B||(B=!0,R.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const K=($.type==="symbol"?A:C)[$.source];this._renderTileClippingMasks($,M[$.source],!!this.renderToTexture),this.renderLayer(this,G,$,K,R)}if(R.isRenderingGlobe&&(function($,G,K){const ie=$.context,ae=ie.gl,ne=$.useProgram("atmosphere"),oe=new _t(ae.LEQUAL,_t.ReadOnly,[0,1]),he=$.transform,re=(function(Ce,Ge){const We=Ce.properties.get("position"),$e=[-We.x,-We.y,-We.z],Ke=s.ar(new Float64Array(16));return Ce.properties.get("anchor")==="map"&&(s.bg(Ke,Ke,Ge.rollInRadians),s.bh(Ke,Ke,-Ge.pitchInRadians),s.bg(Ke,Ke,Ge.bearingInRadians),s.bh(Ke,Ke,Ge.center.lat*Math.PI/180),s.bJ(Ke,Ke,-Ge.center.lng*Math.PI/180)),s.cg($e,$e,Ke),$e})(K,$.transform),de=he.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),me=G.properties.get("atmosphere-blend")*de.projectionTransition;if(me===0)return;const ue=or(he.worldSize,he.center.lat),ve=he.inverseProjectionMatrix,De=new Float64Array(4);De[3]=1,s.aH(De,De,he.modelViewProjectionMatrix),De[0]/=De[3],De[1]/=De[3],De[2]/=De[3],De[3]=1,s.aH(De,De,ve),De[0]/=De[3],De[1]/=De[3],De[2]/=De[3],De[3]=1;const Te=((Ce,Ge,We,$e,Ke)=>({u_sun_pos:Ce,u_atmosphere_blend:Ge,u_globe_position:We,u_globe_radius:$e,u_inv_proj_matrix:Ke}))(re,me,[De[0],De[1],De[2]],ue,ve),Pe=Uu(ie,G);ne.draw(ie,ae.TRIANGLES,oe,Ct.disabled,Wt.alphaBlended,Pt.disabled,Te,null,null,"atmosphere",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const $=(function(G,K){let ie=null;const ae=Object.values(G._layers).flatMap((re=>re.source&&!re.isHidden(K)?[G.tileManagers[re.source]]:[])),ne=ae.filter((re=>re.getSource().type==="vector")),oe=ae.filter((re=>re.getSource().type!=="vector")),he=re=>{(!ie||ie.getSource().maxzoom<re.getSource().maxzoom)&&(ie=re)};return ne.forEach((re=>he(re))),ie||oe.forEach((re=>he(re))),ie})(this.style,this.transform.zoom);$&&(function(G,K,ie){for(let ae=0;ae<ie.length;ae++)Wc(G,K,ie[ae])})(this,$,$.getVisibleCoordinates())}this.options.showPadding&&(function($){const G=$.transform.padding;Bu($,$.transform.height-(G.top||0),3,Nc),Bu($,G.bottom||0,3,Uc),Vu($,G.left||0,3,Gc),Vu($,$.transform.width-(G.right||0),3,qc);const K=$.transform.centerPoint;(function(ie,ae,ne,oe){to(ie,ae-1,ne-10,2,20,oe),to(ie,ae-10,ne-1,20,2,oe)})($,K.x,$.transform.height-K.y,Na)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let g=this.terrainFacilitator.dirty;g||(g=t?!s.cj(o,p):!s.ck(o,p)),g||(g=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),g&&(s.cl(o,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(x,k){const M=x.context,C=M.gl,A=x.transform,R=Wt.unblended,B=new _t(C.LEQUAL,_t.ReadWrite,[0,1]),$=k.tileManager.getRenderableTiles(),G=x.useProgram("terrainDepth");M.bindFramebuffer.set(k.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),M.clear({color:s.bp.transparent,depth:1});for(const K of $){const ie=k.getTerrainMesh(K.tileID),ae=k.getTerrainData(K.tileID),ne=A.getProjectionData({overscaledTileID:K.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),oe={u_ele_delta:k.getMeshFrameDelta(A.zoom)};G.draw(M,C.TRIANGLES,B,Ct.disabled,R,Pt.backCCW,oe,ae,ne,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,x.width,x.height])})(this,this.style.map.terrain),(function(x,k){const M=x.context,C=M.gl,A=x.transform,R=Wt.unblended,B=new _t(C.LEQUAL,_t.ReadWrite,[0,1]),$=k.getCoordsTexture(),G=k.tileManager.getRenderableTiles(),K=x.useProgram("terrainCoords");M.bindFramebuffer.set(k.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),M.clear({color:s.bp.transparent,depth:1}),k.coordsIndex=[];for(const ie of G){const ae=k.getTerrainMesh(ie.tileID),ne=k.getTerrainData(ie.tileID);M.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,$.texture);const oe={u_terrain_coords_id:(255-k.coordsIndex.length)/255,u_texture:0,u_ele_delta:k.getMeshFrameDelta(A.zoom)},he=A.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});K.draw(M,C.TRIANGLES,B,Ct.disabled,R,Pt.backCCW,oe,ne,he,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments),k.coordsIndex.push(ie.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,x.width,x.height])})(this,this.style.map.terrain))}renderLayer(t,o,p,g,x){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(g||[]).length)&&(this.id=p.id,s.cm(p)?(function(k,M,C,A,R,B){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:$}=B,G=Ct.disabled,K=k.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ie,ae,ne,oe,he,re,de,me,ue){const ve=ae.transform,De=ae.style.map.terrain,Te=he==="map",Pe=re==="map";for(const Ce of ie){const Ge=oe.getTile(Ce),We=Ge.getBucket(ne);if(!We||!We.text||!We.text.segments.get().length)continue;const $e=s.ay(We.textSizeData,ve.zoom),Ke=s.aN(Ge,1,ae.transform.zoom),pt=Fn(Te,ae.transform,Ke),Ft=ne.layout.get("icon-text-fit")!=="none"&&We.hasIconData();if($e){const ei=Math.pow(2,ve.zoom-Ge.tileID.overscaledZ),Ht=De?(ni,Zt)=>De.getElevation(Ce,ni,Zt):null;Kf(We,Te,Pe,ue,ve,pt,ei,$e,Ft,s.aO(ve,Ge,de,me),Ce.toUnwrapped(),Ht)}}})(A,k,C,M,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),R),C.paint.get("icon-opacity").constantOr(1)!==0&&Xs(k,M,C,A,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),G,K,$),C.paint.get("text-opacity").constantOr(1)!==0&&Xs(k,M,C,A,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),G,K,$),M.map.showCollisionBoxes&&(fr(k,M,C,A,!0),fr(k,M,C,A,!1))})(t,o,p,g,this.style.placement.variableOffsets,x):s.cn(p)?(function(k,M,C,A,R){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:B}=R,$=C.paint.get("circle-opacity"),G=C.paint.get("circle-stroke-width"),K=C.paint.get("circle-stroke-opacity"),ie=!C.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(G.constantOr(1)===0||K.constantOr(1)===0))return;const ae=k.context,ne=ae.gl,oe=k.transform,he=k.getDepthModeForSublayer(0,_t.ReadOnly),re=Ct.disabled,de=k.colorModeForRenderPass(),me=[],ue=oe.getCircleRadiusCorrection();for(let ve=0;ve<A.length;ve++){const De=A[ve],Te=M.getTile(De),Pe=Te.getBucket(C);if(!Pe)continue;const Ce=C.paint.get("circle-translate"),Ge=C.paint.get("circle-translate-anchor"),We=s.aO(oe,Te,Ce,Ge),$e=Pe.programConfigurations.get(C.id),Ke=k.useProgram("circle",$e),pt=Pe.layoutVertexBuffer,Ft=Pe.indexBuffer,ei=k.style.map.terrain&&k.style.map.terrain.getTerrainData(De),Ht={programConfiguration:$e,program:Ke,layoutVertexBuffer:pt,indexBuffer:Ft,uniformValues:wc(k,Te,C,We,ue),terrainData:ei,projectionData:oe.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!B,applyTerrainMatrix:!0})};if(ie){const ni=Pe.segments.get();for(const Zt of ni)me.push({segments:new s.aX([Zt]),sortKey:Zt.sortKey,state:Ht})}else me.push({segments:Pe.segments,sortKey:0,state:Ht})}ie&&me.sort(((ve,De)=>ve.sortKey-De.sortKey));for(const ve of me){const{programConfiguration:De,program:Te,layoutVertexBuffer:Pe,indexBuffer:Ce,uniformValues:Ge,terrainData:We,projectionData:$e}=ve.state;Te.draw(ae,ne.TRIANGLES,he,re,de,Pt.backCCW,Ge,We,$e,C.id,Pe,Ce,ve.segments,C.paint,k.transform.zoom,De)}})(t,o,p,g,x):s.co(p)?(function(k,M,C,A,R){if(C.paint.get("heatmap-opacity")===0)return;const B=k.context,{isRenderingToTexture:$,isRenderingGlobe:G}=R;if(k.style.map.terrain){for(const K of A){const ie=M.getTile(K);M.hasRenderableParent(K)||(k.renderPass==="offscreen"?jc(k,ie,C,K,G):k.renderPass==="translucent"&&Oc(k,C,K,$,G))}B.viewport.set([0,0,k.width,k.height])}else k.renderPass==="offscreen"?(function(K,ie,ae,ne){const oe=K.context,he=oe.gl,re=K.transform,de=Ct.disabled,me=new Wt([he.ONE,he.ONE],s.bp.transparent,[!0,!0,!0,!0]);(function(ue,ve,De){const Te=ue.gl;ue.activeTexture.set(Te.TEXTURE1),ue.viewport.set([0,0,ve.width/4,ve.height/4]);let Pe=De.heatmapFbos.get(s.cd);Pe?(Te.bindTexture(Te.TEXTURE_2D,Pe.colorAttachment.get()),ue.bindFramebuffer.set(Pe.framebuffer)):(Pe=Js(ue,ve.width/4,ve.height/4),De.heatmapFbos.set(s.cd,Pe))})(oe,K,ae),oe.clear({color:s.bp.transparent});for(let ue=0;ue<ne.length;ue++){const ve=ne[ue];if(ie.hasRenderableParent(ve))continue;const De=ie.getTile(ve),Te=De.getBucket(ae);if(!Te)continue;const Pe=Te.programConfigurations.get(ae.id),Ce=K.useProgram("heatmap",Pe),Ge=re.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),We=re.getCircleRadiusCorrection();Ce.draw(oe,he.TRIANGLES,_t.disabled,de,me,Pt.backCCW,Qr(De,re.zoom,ae.paint.get("heatmap-intensity"),We),null,Ge,ae.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,ae.paint,re.zoom,Pe)}oe.viewport.set([0,0,K.width,K.height])})(k,M,C,A):k.renderPass==="translucent"&&(function(K,ie){const ae=K.context,ne=ae.gl;ae.setColorMode(K.colorModeForRenderPass());const oe=ie.heatmapFbos.get(s.cd);oe&&(ae.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,oe.colorAttachment.get()),ae.activeTexture.set(ne.TEXTURE1),yl(ae,ie).bind(ne.LINEAR,ne.CLAMP_TO_EDGE),K.useProgram("heatmapTexture").draw(ae,ne.TRIANGLES,_t.disabled,Ct.disabled,K.colorModeForRenderPass(),Pt.disabled,Sc(K,ie,0,1),null,null,ie.id,K.viewportBuffer,K.quadTriangleIndexBuffer,K.viewportSegments,ie.paint,K.transform.zoom))})(k,C)})(t,o,p,g,x):s.cp(p)?(function(k,M,C,A,R){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:B}=R,$=C.paint.get("line-opacity"),G=C.paint.get("line-width");if($.constantOr(1)===0||G.constantOr(1)===0)return;const K=k.getDepthModeForSublayer(0,_t.ReadOnly),ie=k.colorModeForRenderPass(),ae=C.paint.get("line-dasharray"),ne=ae.constantOr(1),oe=C.paint.get("line-pattern"),he=oe.constantOr(1),re=C.paint.get("line-gradient"),de=C.getCrossfadeParameters();let me;me=he?"linePattern":ne&&re?"lineGradientSDF":ne?"lineSDF":re?"lineGradient":"line";const ue=k.context,ve=ue.gl,De=k.transform;let Te=!0;for(const Pe of A){const Ce=M.getTile(Pe);if(he&&!Ce.patternsLoaded())continue;const Ge=Ce.getBucket(C);if(!Ge)continue;const We=Ge.programConfigurations.get(C.id),$e=k.context.program.get(),Ke=k.useProgram(me,We),pt=Te||Ke.program!==$e,Ft=k.style.map.terrain&&k.style.map.terrain.getTerrainData(Pe),ei=oe.constantOr(null),Ht=ae&&ae.constantOr(null);if(ei&&Ce.imageAtlas){const qi=Ce.imageAtlas,Ai=qi.patternPositions[ei.to.toString()],Ti=qi.patternPositions[ei.from.toString()];Ai&&Ti&&We.setConstantPatternPositions(Ai,Ti)}else if(Ht){const qi=C.layout.get("line-cap")==="round",Ai=k.lineAtlas.getDash(Ht.to,qi),Ti=k.lineAtlas.getDash(Ht.from,qi);We.setConstantDashPositions(Ai,Ti)}const ni=De.getProjectionData({overscaledTileID:Pe,applyGlobeMatrix:!B,applyTerrainMatrix:!0}),Zt=De.getPixelScale();let _i;he?(_i=Cu(k,Ce,C,Zt,de),Bc(ue,ve,Ce,We,de)):ne&&re?(_i=al(k,Ce,C,Zt,de,Ge.lineClipsArray.length),On(k,M,ue,ve,C,Ge,Pe,We,de)):ne?(_i=Pc(k,Ce,C,Zt,de),ki(k,ue,ve,We,pt,de)):re?(_i=Mc(k,Ce,C,Zt,Ge.lineClipsArray.length),pr(k,M,ue,ve,C,Ge,Pe)):_i=qs(k,Ce,C,Zt);const ai=k.stencilModeForClipping(Pe);Ke.draw(ue,ve.TRIANGLES,K,ai,ie,Pt.disabled,_i,Ft,ni,C.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,C.paint,k.transform.zoom,We,Ge.layoutVertexBuffer2),Te=!1}})(t,o,p,g,x):s.cq(p)?(function(k,M,C,A,R){const B=C.paint.get("fill-color"),$=C.paint.get("fill-opacity");if($.constantOr(1)===0)return;const{isRenderingToTexture:G}=R,K=k.colorModeForRenderPass(),ie=C.paint.get("fill-pattern"),ae=k.opaquePassEnabledForLayer()&&!ie.constantOr(1)&&B.constantOr(s.bp.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(k.renderPass===ae){const ne=k.getDepthModeForSublayer(1,k.renderPass==="opaque"?_t.ReadWrite:_t.ReadOnly);Qs(k,M,C,A,ne,K,!1,G)}if(k.renderPass==="translucent"&&C.paint.get("fill-antialias")){const ne=k.getDepthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,_t.ReadOnly);Qs(k,M,C,A,ne,K,!0,G)}})(t,o,p,g,x):s.cr(p)?(function(k,M,C,A,R){const B=C.paint.get("fill-extrusion-opacity");if(B===0)return;const{isRenderingToTexture:$}=R;if(k.renderPass==="translucent"){const G=new _t(k.context.gl.LEQUAL,_t.ReadWrite,k.depthRangeFor3D);if(B!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))xl(k,M,C,A,G,Ct.disabled,Wt.disabled,$),xl(k,M,C,A,G,k.stencilModeFor3D(),k.colorModeForRenderPass(),$);else{const K=k.colorModeForRenderPass();xl(k,M,C,A,G,Ct.disabled,K,$)}}})(t,o,p,g,x):s.cs(p)?(function(k,M,C,A,R){if(k.renderPass!=="offscreen"&&k.renderPass!=="translucent")return;const{isRenderingToTexture:B}=R,$=k.context,G=k.style.projection.useSubdivision,K=k.getDepthModeForSublayer(0,_t.ReadOnly),ie=k.colorModeForRenderPass();if(k.renderPass==="offscreen")(function(ae,ne,oe,he,re,de,me){const ue=ae.context,ve=ue.gl;for(const De of oe){const Te=ne.getTile(De),Pe=Te.dem;if(!Pe||!Pe.data||!Te.needsHillshadePrepare)continue;const Ce=Pe.dim,Ge=Pe.stride,We=Pe.getPixels();if(ue.activeTexture.set(ve.TEXTURE1),ue.pixelStoreUnpackPremultiplyAlpha.set(!1),Te.demTexture=Te.demTexture||ae.getTileTexture(Ge),Te.demTexture){const Ke=Te.demTexture;Ke.update(We,{premultiply:!1}),Ke.bind(ve.NEAREST,ve.CLAMP_TO_EDGE)}else Te.demTexture=new s.T(ue,We,ve.RGBA,{premultiply:!1}),Te.demTexture.bind(ve.NEAREST,ve.CLAMP_TO_EDGE);ue.activeTexture.set(ve.TEXTURE0);let $e=Te.fbo;if(!$e){const Ke=new s.T(ue,{width:Ce,height:Ce,data:null},ve.RGBA);Ke.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),$e=Te.fbo=ue.createFramebuffer(Ce,Ce,!0,!1),$e.colorAttachment.set(Ke.texture)}ue.bindFramebuffer.set($e.framebuffer),ue.viewport.set([0,0,Ce,Ce]),ae.useProgram("hillshadePrepare").draw(ue,ve.TRIANGLES,re,de,me,Pt.disabled,Of(Te.tileID,Pe),null,null,he.id,ae.rasterBoundsBuffer,ae.quadTriangleIndexBuffer,ae.rasterBoundsSegments),Te.needsHillshadePrepare=!1}})(k,M,A,C,K,Ct.disabled,ie),$.viewport.set([0,0,k.width,k.height]);else if(k.renderPass==="translucent")if(G){const[ae,ne,oe]=k.stencilConfigForOverlapTwoPass(A);Va(k,M,C,oe,ae,K,ie,!1,B),Va(k,M,C,oe,ne,K,ie,!0,B)}else{const[ae,ne]=k.getStencilConfigForOverlapAndUpdateStencilID(A);Va(k,M,C,ne,ae,K,ie,!1,B)}})(t,o,p,g,x):s.ct(p)?(function(k,M,C,A,R){if(k.renderPass!=="translucent"||!A.length)return;const{isRenderingToTexture:B}=R,$=k.style.projection.useSubdivision,G=k.getDepthModeForSublayer(0,_t.ReadOnly),K=k.colorModeForRenderPass();if($){const[ie,ae,ne]=k.stencilConfigForOverlapTwoPass(A);eo(k,M,C,ne,ie,G,K,!1,B),eo(k,M,C,ne,ae,G,K,!0,B)}else{const[ie,ae]=k.getStencilConfigForOverlapAndUpdateStencilID(A);eo(k,M,C,ae,ie,G,K,!1,B)}})(t,o,p,g,x):s.bU(p)?(function(k,M,C,A,R){if(k.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!A.length)return;const{isRenderingToTexture:B}=R,$=M.getSource(),G=k.style.projection.useSubdivision;if($ instanceof Sn)as(k,M,C,A,null,!1,!1,$.tileCoords,$.flippedWindingOrder,B);else if(G){const[K,ie,ae]=k.stencilConfigForOverlapTwoPass(A);as(k,M,C,ae,K,!1,!0,mr,!1,B),as(k,M,C,ae,ie,!0,!0,mr,!1,B)}else{const[K,ie]=k.getStencilConfigForOverlapAndUpdateStencilID(A);as(k,M,C,ie,K,!1,!0,mr,!1,B)}})(t,o,p,g,x):s.cu(p)?(function(k,M,C,A,R){const B=C.paint.get("background-color"),$=C.paint.get("background-opacity");if($===0)return;const{isRenderingToTexture:G}=R,K=k.context,ie=K.gl,ae=k.style.projection,ne=k.transform,oe=ne.tileSize,he=C.paint.get("background-pattern");if(k.isPatternMissing(he))return;const re=!he&&B.a===1&&$===1&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==re)return;const de=Ct.disabled,me=k.getDepthModeForSublayer(0,re==="opaque"?_t.ReadWrite:_t.ReadOnly),ue=k.colorModeForRenderPass(),ve=k.useProgram(he?"backgroundPattern":"background"),De=A||pi(ne,{tileSize:oe,terrain:k.style.map.terrain});he&&(K.activeTexture.set(ie.TEXTURE0),k.imageManager.bind(k.context));const Te=C.getCrossfadeParameters();for(const Pe of De){const Ce=ne.getProjectionData({overscaledTileID:Pe,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Ge=he?Bf($,k,he,{tileID:Pe,tileSize:oe},Te):Au($,B),We=k.style.map.terrain&&k.style.map.terrain.getTerrainData(Pe),$e=ae.getMeshFromTileID(K,Pe.canonical,!1,!0,"raster");ve.draw(K,ie.TRIANGLES,me,de,ue,Pt.backCCW,Ge,We,Ce,C.id,$e.vertexBuffer,$e.indexBuffer,$e.segments)}})(t,0,p,g,x):s.cv(p)&&(function(k,M,C,A){const{isRenderingGlobe:R}=A,B=k.context,$=C.implementation,G=k.style.projection,K=k.transform,ie=K.getProjectionDataForCustomLayer(R),ae={farZ:K.farZ,nearZ:K.nearZ,fov:K.fov*Math.PI/180,modelViewProjectionMatrix:K.modelViewProjectionMatrix,projectionMatrix:K.projectionMatrix,shaderData:{variantName:G.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${G.shaderPreludeCode.vertexSource}`,define:G.shaderDefine},defaultProjectionData:ie},ne=$.renderingMode?$.renderingMode:"2d";if(k.renderPass==="offscreen"){const oe=$.prerender;oe&&(k.setCustomLayerDefaults(),B.setColorMode(k.colorModeForRenderPass()),oe.call($,B.gl,ae),B.setDirty(),k.setBaseState())}else if(k.renderPass==="translucent"){k.setCustomLayerDefaults(),B.setColorMode(k.colorModeForRenderPass()),B.setStencilMode(Ct.disabled);const oe=ne==="3d"?k.getDepthModeFor3D():k.getDepthModeForSublayer(0,_t.ReadOnly);B.setDepthMode(oe),$.render(B.gl,ae),B.setDirty(),k.setBaseState(),B.bindFramebuffer.set(null)}})(t,0,p,x))}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),p=this.imageManager.getPattern(t.to.toString());return!o||!p}useProgram(t,o,p=!1,g=[]){this.cache=this.cache||{};const x=!!this.style.map.terrain,k=this.style.projection,M=p?li.projectionMercator:k.shaderPreludeCode,C=p?yn:k.shaderDefine,A=t+(o?o.cacheKey:"")+`/${p?jn:k.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(x?"/terrain":"")+(g?`/${g.join("/")}`:"");return this.cache[A]||(this.cache[A]=new yc(this.context,li[t],o,Vf[t],this._showOverdrawInspector,x,M,C,g)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var t,o;if(this._tileTextures){for(const p in this._tileTextures){const g=this._tileTextures[p];if(g)for(const x of g)x.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((t=this.tileExtentMesh.vertexBuffer)===null||t===void 0||t.destroy()),this.tileExtentMesh&&((o=this.tileExtentMesh.indexBuffer)===null||o===void 0||o.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const p in this.cache){const g=this.cache[p];g&&g.program&&this.context.gl.deleteProgram(g.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:o}=this.context.gl;return this.width!==t||this.height!==o}}function Gu(v,t){let o,p=!1,g=null,x=null;const k=()=>{g=null,p&&(v.apply(x,o),g=setTimeout(k,t),p=!1)};return(...M)=>(p=!0,x=this,o=M,g||k(),g)}class qu{constructor(t){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let p;return o.split("&").map((g=>g.split("="))).forEach((g=>{g[0]===this._hashName&&(p=g)})),(p&&p[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:p,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const p=o.join("/");let g=p;g.split("&").length>0&&(g=g.split("&")[0]),this._hashName&&(g=`${this._hashName}=${p}`);let x=window.location.hash.replace(g,"");x.startsWith("#&")?x=x.slice(0,1)+x.slice(2):x==="#"&&(x="");let k=window.location.href.replace(/(#.+)?$/,x);k=k.replace("&&","&"),window.history.replaceState(window.history.state,null,k)},this._updateHash=Gu(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const o=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),k=Math.round(o.lng*x)/x,M=Math.round(o.lat*x)/x,C=this._map.getBearing(),A=this._map.getPitch();let R="";if(R+=t?`/${k}/${M}/${p}`:`${p}/${M}/${k}`,(C||A)&&(R+="/"+Math.round(10*C)/10),A&&(R+=`/${Math.round(A)}`),this._hashName){const B=this._hashName;let $=!1;const G=window.location.hash.slice(1).split("&").map((K=>{const ie=K.split("=")[0];return ie===B?($=!0,`${ie}=${R}`):K})).filter((K=>K));return $||G.push(`${B}=${R}`),`#${G.join("&")}`}return`#${R}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new s.V(+t[2],+t[1])}catch{return!1}const o=+t[0],p=+(t[3]||0),g=+(t[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&p>=-180&&p<=180&&g>=this._map.getMinPitch()&&g<=this._map.getMaxPitch()}}const Ua={linearity:.3,easing:s.cw(0,0,.3,1)},Zc=s.e({deceleration:2500,maxSpeed:1400},Ua),Hn=s.e({deceleration:20,maxSpeed:1400},Ua),na=s.e({deceleration:1e3,maxSpeed:360},Ua),Kc=s.e({deceleration:1e3,maxSpeed:90},Ua),aa=s.e({deceleration:1e3,maxSpeed:360},Ua);class Yf{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:te(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=te();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)o.zoom+=x.zoomDelta||0,o.bearing+=x.bearingDelta||0,o.pitch+=x.pitchDelta||0,o.roll+=x.rollDelta||0,x.panDelta&&o.pan._add(x.panDelta),x.around&&(o.around=x.around),x.pinchAround&&(o.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(o.pan.mag()){const x=no(o.pan.mag(),p,s.e({},Zc,t||{})),k=o.pan.mult(x.amount/o.pan.mag()),M=this._map.cameraHelper.handlePanInertia(k,this._map.transform);g.center=M.easingCenter,g.offset=M.easingOffset,io(g,x)}if(o.zoom){const x=no(o.zoom,p,Hn);g.zoom=this._map.transform.zoom+x.amount,io(g,x)}if(o.bearing){const x=no(o.bearing,p,na);g.bearing=this._map.transform.bearing+s.an(x.amount,-179,179),io(g,x)}if(o.pitch){const x=no(o.pitch,p,Kc);g.pitch=this._map.transform.pitch+x.amount,io(g,x)}if(o.roll){const x=no(o.roll,p,aa);g.roll=this._map.transform.roll+s.an(x.amount,-179,179),io(g,x)}if(g.zoom||g.bearing){const x=o.pinchAround===void 0?o.around:o.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),s.e(g,{noMoveStart:!0})}}function io(v,t){(!v.duration||v.duration<t.duration)&&(v.duration=t.duration,v.easing=t.easing)}function no(v,t,o){const{maxSpeed:p,linearity:g,deceleration:x}=o,k=s.an(v*g/(t/1e3),-p,p),M=Math.abs(k)/(x*g);return{easing:o.easing,duration:1e3*M,amount:k*(M/2)}}class Gi extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,p,g={}){p=p instanceof MouseEvent?p:new MouseEvent(t,p);const x=U.mousePos(o.getCanvas(),p),k=o.unproject(x);super(t,s.e({point:x,lngLat:k,originalEvent:p},g)),this._defaultPrevented=!1,this.target=o}}class ao extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,p){const g=t==="touchend"?p.changedTouches:p.touches,x=U.touchPos(o.getCanvasContainer(),g),k=x.map((C=>o.unproject(C))),M=x.reduce(((C,A,R,B)=>C.add(A.div(B.length))),new s.P(0,0));super(t,{points:x,point:M,lngLats:k,lngLat:o.unproject(M),originalEvent:p}),this._defaultPrevented=!1}}class Yc extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,p){super(t,{originalEvent:p}),this._defaultPrevented=!1}}class Xf{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Yc(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Gi(t.type,this._map,t))}mouseup(t){this._map.fire(new Gi(t.type,this._map,t))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Gi(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Gi(t.type,this._map,t))}mouseover(t){this._map.fire(new Gi(t.type,this._map,t))}mouseout(t){this._map.fire(new Gi(t.type,this._map,t))}touchstart(t){return this._firePreventable(new ao(t.type,this._map,t))}touchmove(t){this._map.fire(new ao(t.type,this._map,t))}touchend(t){this._map.fire(new ao(t.type,this._map,t))}touchcancel(t){this._map.fire(new ao(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jf{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Gi(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Gi(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rs{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(s.P.convert(t),this._map.terrain)}}class ss{constructor(t,o){this._map=t,this._tr=new rs(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(U.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const p=o;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=U.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const x=Math.min(g.x,p.x),k=Math.max(g.x,p.x),M=Math.min(g.y,p.y),C=Math.max(g.y,p.y);U.setTransform(this._box,`translate(${x}px,${M}px)`),this._box.style.width=k-x+"px",this._box.style.height=C-M+"px"}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const p=this._startPos,g=o;if(this.reset(),U.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:t})),{cameraAnimation:x=>x.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(U.remove(this._box),this._box=null),U.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new s.l(t,{originalEvent:o}))}}function ra(v,t){if(v.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${t.length}`);const o={};for(let p=0;p<v.length;p++)o[v[p].identifier]=t[p];return o}class tt{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,o,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),p.length===this.numTouches&&(this.centroid=(function(g){const x=new s.P(0,0);for(const k of g)x._add(k);return x.div(g.length)})(o),this.touches=ra(p,o)))}touchmove(t,o,p){if(this.aborted||!this.centroid)return;const g=ra(p,o);for(const x in this.touches){const k=g[x];(!k||k.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(t,o,p){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class bl{constructor(t){this.singleTap=new tt(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,o,p){this.singleTap.touchstart(t,o,p)}touchmove(t,o,p){this.singleTap.touchmove(t,o,p)}touchend(t,o,p){const g=this.singleTap.touchend(t,o,p);if(g){const x=t.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(g)<30;if(x&&k||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Wu{constructor(t){this._tr=new rs(t),this._zoomIn=new bl({numTouches:1,numTaps:2}),this._zoomOut=new bl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,p){this._zoomIn.touchstart(t,o,p),this._zoomOut.touchstart(t,o,p)}touchmove(t,o,p){this._zoomIn.touchmove(t,o,p),this._zoomOut.touchmove(t,o,p)}touchend(t,o,p){const g=this._zoomIn.touchend(t,o,p),x=this._zoomOut.touchend(t,o,p),k=this._tr;return g?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:k.zoom+1,around:k.unproject(g)},{originalEvent:t})}):x?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:k.zoom-1,around:k.unproject(x)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class os{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const o=this._moveFunction(...t);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(t,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,o){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const g=Array.isArray(o)?o[0]:o;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&U.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ro=0,so=2,Hu={[ro]:1,[so]:2};class oo{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const o=U.mouseButton(t);this._eventButton=o}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(o,p){const g=Hu[p];return o.buttons===void 0||(o.buttons&g)!==g})(t,this._eventButton)}isValidEndEvent(t){return U.mouseButton(t)===this._eventButton}}class Zu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class Xc{constructor(t=new oo({checkCorrectEvent:()=>!0}),o=new Zu){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(t,o,p){return t instanceof MouseEvent?o(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?p(t):void 0}startMove(t){this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.startMove(o)),(o=>this.oneFingerTouchMoveStateManager.startMove(o)))}endMove(t){this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.endMove(o)),(o=>this.oneFingerTouchMoveStateManager.endMove(o)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidStartEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidMoveEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidEndEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o)))}}const ls=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=t=>{t.preventDefault()}};class Qf{constructor(t,o){this._clickTolerance=t.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,o,p){return this._calculateTransform(t,o,p)}touchmove(t,o,p){if(this._active){if(!this._shouldBePrevented(p.length))return t.preventDefault(),this._calculateTransform(t,o,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,o,p){this._calculateTransform(t,o,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,p){p.length>0&&(this._active=!0);const g=ra(p,o),x=new s.P(0,0),k=new s.P(0,0);let M=0;for(const A in g){const R=g[A],B=this._touches[A];B&&(x._add(R),k._add(R.sub(B)),M++,g[A]=R)}if(this._touches=g,this._shouldBePrevented(M)||!k.mag())return;const C=k.div(M);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(M),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,o,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,p){if(!this._firstTwoTouches)return;t.preventDefault();const[g,x]=this._firstTwoTouches,k=kl(p,o,g),M=kl(p,o,x);if(!k||!M)return;const C=this._aroundCenter?null:k.add(M).div(2);return this._move([k,M],C,t)}touchend(t,o,p){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,k=kl(p,o,g),M=kl(p,o,x);k&&M||(this._active&&U.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function kl(v,t,o){for(let p=0;p<v.length;p++)if(v[p].identifier===o)return t[p]}function Jc(v,t){return Math.log(v/t)/Math.LN2}class Ku extends wl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const p=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Jc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Jc(this._distance,p),pinchAround:o}}}function Qc(v,t){return 180*v.angleWith(t)/Math.PI}class Yu extends wl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o,p){const g=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qc(this._vector,g),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,p=Qc(t,this._startVector);return Math.abs(p)<o}}function Xu(v){return Math.abs(v.y)>Math.abs(v.x)}class eh extends wl{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,o,p){super.touchstart(t,o,p),this._currentTouchCount=p.length}_start(t){this._lastPoints=t,Xu(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=t[0].sub(this._lastPoints[0]),x=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,p.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(t,o,p){if(this._valid!==void 0)return this._valid;const g=t.mag()>=2,x=o.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const k=t.y>0==o.y>0;return Xu(t)&&Xu(o)&&k}}const Ga={panStep:100,bearingStep:15,pitchStep:10};class Nt{constructor(t){this._tr=new rs(t);const o=Ga;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,p=0,g=0,x=0,k=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?p=-1:(t.preventDefault(),x=-1);break;case 39:t.shiftKey?p=1:(t.preventDefault(),x=1);break;case 38:t.shiftKey?g=1:(t.preventDefault(),k=-1);break;case 40:t.shiftKey?g=-1:(t.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:M=>{const C=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:ep,zoom:o?Math.round(C.zoom)+o*(t.shiftKey?2:1):C.zoom,bearing:C.bearing+p*this._bearingStep,pitch:C.pitch+g*this._pitchStep,offset:[-x*this._panStep,-k*this._panStep],center:C.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ep(v){return v*(2-v)}const lo=4.000244140625,Sl=1/450;class Tl{constructor(t,o){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=t,this._tr=new rs(t),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Sl}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const p=te(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,o!==0&&o%lo==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(g*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=U.mousePos(this._map.getCanvas(),t),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(s.V.convert(p.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const M=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=M),typeof this._targetZoom=="number"&&(this._targetZoom+=M)}if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>lo?this._wheelZoomRate:this._defaultZoomRate;let C=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&C!==0&&(C=1/C);const A=typeof this._targetZoom!="number"?t.scale:s.aq(this._targetZoom);this._targetZoom=t.applyConstrain(t.getCameraLngLat(),s.at(A*C)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,p=this._startZoom,g=this._easing;let x,k=!1;if(this._type==="wheel"&&p&&g){const M=te()-this._lastWheelEventTime,C=Math.min((M+5)/200,1),A=g(C);x=s.G.number(p,o,A),C<1?this._frameId||(this._frameId=!0):k=!0}else x=o,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=x,{noInertia:!0,needsRenderFrame:!k,zoomDelta:x-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=s.cy;if(this._prevEase){const p=this._prevEase,g=(te()-p.start)/p.duration,x=p.easing(g+.01)-p.easing(g),k=.27/Math.sqrt(x*x+1e-4)*.01,M=Math.sqrt(.0729-k*k);o=s.cw(k,M,.25,1)}return this._prevEase={start:te(),duration:t,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ju{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class th{constructor(t){this._tr=new rs(t),this.reset()}reset(){this._active=!1}dblclick(t,o){return t.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ih{constructor(){this._tap=new bl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,o,p){if(!this._swipePoint)if(this._tapTime){const g=o[0],x=t.timeStamp-this._tapTime<500,k=this._tapPoint.dist(g)<30;x&&k?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(t,o,p)}touchmove(t,o,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=o[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,t.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(t,o,p)}touchend(t,o,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(t,o,p);g&&(this._tapTime=t.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nh{constructor(t,o,p){this._el=t,this._mousePan=o,this._touchPan=p}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sa{constructor(t,o,p,g){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=o,this._mousePitch=p,this._mouseRoll=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class uo{constructor(t,o,p,g){this._el=t,this._touchZoom=o,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class at{constructor(t,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=U.create("div","maplibregl-cooperative-gesture-screen",t);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=o,this._container.appendChild(g);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=p,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(U.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,o){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:t,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const ot=v=>v.zoom||v.drag||v.roll||v.pitch||v.rotate;class co extends s.l{}function Ml(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta||v.rollDelta}class Pl{constructor(t,o){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=g.type==="renderFrame"?void 0:g,M={needsRenderFrame:!1},C={},A={};for(const{handlerName:$,handler:G,allowed:K}of this._handlers){if(!G.isEnabled())continue;let ie;if(this._blockedByActive(A,K,$))G.reset();else if(G[x||g.type]){if(s.cz(g,x||g.type)){const ae=U.mousePos(this._map.getCanvas(),g);ie=G[x||g.type](g,ae)}else if(s.cA(g,x||g.type)){const ae=this._getMapTouches(g.touches),ne=U.touchPos(this._map.getCanvas(),ae);ie=G[x||g.type](g,ne,ae)}else s.cB(x||g.type)||(ie=G[x||g.type](g));this.mergeHandlerResult(M,C,ie,$,k),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()}(ie||G.isActive())&&(A[$]=G)}const R={};for(const $ in this._previousActiveHandlers)A[$]||(R[$]=k);this._previousActiveHandlers=A,(Object.keys(R).length||Ml(M))&&(this._changes.push([M,C,R]),this._triggerRenderFrame()),(Object.keys(A).length||Ml(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:B}=M;B&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],B(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yf(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,k]of this._listeners)U.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[t,o,p]of this._listeners)U.removeEventListener(t,o,t===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(t){const o=this._map,p=o.getCanvasContainer();this._add("mapEvent",new Xf(o,t));const g=o.boxZoom=new ss(o,t);this._add("boxZoom",g),t.interactive&&t.boxZoom&&g.enable();const x=o.cooperativeGestures=new at(o,t.cooperativeGestures);this._add("cooperativeGestures",x),t.cooperativeGestures&&x.enable();const k=new Wu(o),M=new th(o);o.doubleClickZoom=new Ju(M,k),this._add("tapZoom",k),this._add("clickZoom",M),t.interactive&&t.doubleClickZoom&&o.doubleClickZoom.enable();const C=new ih;this._add("tapDragZoom",C);const A=o.touchPitch=new eh(o);this._add("touchPitch",A),t.interactive&&t.touchPitch&&o.touchPitch.enable(t.touchPitch);const R=()=>o.project(o.getCenter()),B=(function({enable:re,clickTolerance:de,aroundCenter:me=!0,minPixelCenterThreshold:ue=100,rotateDegreesPerPixelMoved:ve=.8},De){const Te=new oo({checkCorrectEvent:Pe=>U.mouseButton(Pe)===0&&Pe.ctrlKey||U.mouseButton(Pe)===2&&!Pe.ctrlKey});return new os({clickTolerance:de,move:(Pe,Ce)=>{const Ge=De();if(me&&Math.abs(Ge.y-Pe.y)>ue)return{bearingDelta:s.cx(new s.P(Pe.x,Ce.y),Ce,Ge)};let We=(Ce.x-Pe.x)*ve;return me&&Ce.y<Ge.y&&(We=-We),{bearingDelta:We}},moveStateManager:Te,enable:re,assignEvents:ls})})(t,R),$=(function({enable:re,clickTolerance:de,pitchDegreesPerPixelMoved:me=-.5}){const ue=new oo({checkCorrectEvent:ve=>U.mouseButton(ve)===0&&ve.ctrlKey||U.mouseButton(ve)===2});return new os({clickTolerance:de,move:(ve,De)=>({pitchDelta:(De.y-ve.y)*me}),moveStateManager:ue,enable:re,assignEvents:ls})})(t),G=(function({enable:re,clickTolerance:de,rollDegreesPerPixelMoved:me=.3},ue){const ve=new oo({checkCorrectEvent:De=>U.mouseButton(De)===2&&De.ctrlKey});return new os({clickTolerance:de,move:(De,Te)=>{const Pe=ue();let Ce=(Te.x-De.x)*me;return Te.y<Pe.y&&(Ce=-Ce),{rollDelta:Ce}},moveStateManager:ve,enable:re,assignEvents:ls})})(t,R);o.dragRotate=new sa(t,B,$,G),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",$,["mouseRotate","mouseRoll"]),this._add("mouseRoll",G,["mousePitch"]),t.interactive&&t.dragRotate&&o.dragRotate.enable();const K=(function({enable:re,clickTolerance:de}){const me=new oo({checkCorrectEvent:ue=>U.mouseButton(ue)===0&&!ue.ctrlKey});return new os({clickTolerance:de,move:(ue,ve)=>({around:ve,panDelta:ve.sub(ue)}),activateOnStart:!0,moveStateManager:me,enable:re,assignEvents:ls})})(t),ie=new Qf(t,o);o.dragPan=new nh(p,K,ie),this._add("mousePan",K),this._add("touchPan",ie,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&o.dragPan.enable(t.dragPan);const ae=new Yu,ne=new Ku;o.touchZoomRotate=new uo(p,ne,ae,C),this._add("touchRotate",ae,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&o.touchZoomRotate.enable(t.touchZoomRotate),this._add("blockableMapEvent",new Jf(o));const oe=o.scrollZoom=new Tl(o,(()=>this._triggerRenderFrame()));this._add("scrollZoom",oe,["mousePan"]),t.interactive&&t.scrollZoom&&o.scrollZoom.enable(t.scrollZoom);const he=o.keyboard=new Nt(o);this._add("keyboard",he),t.interactive&&t.keyboard&&o.keyboard.enable()}_add(t,o,p){this._handlers.push({handlerName:t,handler:o,allowed:p}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ot(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,o,p){for(const g in t)if(g!==p&&(!o||o.indexOf(g)<0))return!0;return!1}_getMapTouches(t){const o=[];for(const p of t)this._el.contains(p.target)&&o.push(p);return o}mergeHandlerResult(t,o,p,g,x){if(!p)return;s.e(t,p);const k={handlerName:g,originalEvent:p.originalEvent||x};p.zoomDelta!==void 0&&(o.zoom=k),p.panDelta!==void 0&&(o.drag=k),p.rollDelta!==void 0&&(o.roll=k),p.pitchDelta!==void 0&&(o.pitch=k),p.bearingDelta!==void 0&&(o.rotate=k)}_applyChanges(){const t={},o={},p={};for(const[g,x,k]of this._changes)g.panDelta&&(t.panDelta=(t.panDelta||new s.P(0,0))._add(g.panDelta)),g.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+g.pitchDelta),g.rollDelta&&(t.rollDelta=(t.rollDelta||0)+g.rollDelta),g.around!==void 0&&(t.around=g.around),g.pinchAround!==void 0&&(t.pinchAround=g.pinchAround),g.noInertia&&(t.noInertia=g.noInertia),s.e(o,x),s.e(p,k);this._updateMapTransform(t,o,p),this._changes=[]}_updateMapTransform(t,o,p){const g=this._map,x=g._getTransformForUpdate(),k=g.terrain;if(!(Ml(t)||k&&this._terrainMovement))return this._fireEvents(o,p,!0);g._stop(!0);let{panDelta:M,zoomDelta:C,bearingDelta:A,pitchDelta:R,rollDelta:B,around:$,pinchAround:G}=t;G!==void 0&&($=G),$=$||g.transform.centerPoint,k&&!x.isPointOnMapSurface($)&&($=x.centerPoint);const K={panDelta:M,zoomDelta:C,rollDelta:B,pitchDelta:R,bearingDelta:A,around:$};this._map.cameraHelper.useGlobeControls&&!x.isPointOnMapSurface($)&&($=x.centerPoint);const ie=$.distSqr(x.centerPoint)<.01?x.center:x.screenPointToLocation(M?$.sub(M):$);this._handleMapControls({terrain:k,tr:x,deltasForHelper:K,preZoomAroundLoc:ie,combinedEventsInProgress:o,panDelta:M}),g._applyUpdatedTransform(x),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,p,!0)}_handleMapControls({terrain:t,tr:o,deltasForHelper:p,preZoomAroundLoc:g,combinedEventsInProgress:x,panDelta:k}){const M=this._map.cameraHelper;if(M.handleMapControlsRollPitchBearingZoom(p,o),t)return M.useGlobeControls?(this._terrainMovement||!x.drag&&!x.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void M.handleMapControlsPan(p,o,g)):this._terrainMovement||!x.drag&&!x.zoom?void(x.drag&&this._terrainMovement&&k?o.setCenter(o.screenPointToLocation(o.centerPoint.sub(k))):M.handleMapControlsPan(p,o,g)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void M.handleMapControlsPan(p,o,g));M.handleMapControlsPan(p,o,g)}_fireEvents(t,o,p){const g=ot(this._eventsInProgress),x=ot(t),k={};for(const B in t){const{originalEvent:$}=t[B];this._eventsInProgress[B]||(k[`${B}start`]=$),this._eventsInProgress[B]=t[B]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const B in k)this._fireEvent(B,k[B]);x&&this._fireEvent("move",x.originalEvent);for(const B in t){const{originalEvent:$}=t[B];this._fireEvent(B,$)}const M={};let C;for(const B in this._eventsInProgress){const{handlerName:$,originalEvent:G}=this._eventsInProgress[B];this._handlersById[$].isActive()||(delete this._eventsInProgress[B],C=o[$]||G,M[`${B}end`]=C)}for(const B in M)this._fireEvent(B,M[B]);const A=ot(this._eventsInProgress),R=(g||x)&&!A;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const B=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&B.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(B)}if(p&&R){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!B||!B.essential&&W.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:C})),$(this._map.getBearing())&&this._map.resetNorth()):($(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:C})),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new s.l(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new co("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class bn extends s.E{constructor(t,o,p){super(),this._renderFrameCallback=()=>{const g=Math.min((te()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=p.bearingSnap,this.cameraHelper=o,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,o){t.apply(this.transform),this.transform=t,this.cameraHelper=o}getCenter(){return new s.V(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,o){return this.jumpTo({elevation:t},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,o,p){return t=s.P.convert(t).mult(-1),this.panTo(this.transform.center,s.e({offset:t},o),p)}panTo(t,o,p){return this.easeTo(s.e({center:t},o),p)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,p){return this.easeTo(s.e({zoom:t},o),p)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,o){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new s.l("movestart",o)).fire(new s.l("move",o)).fire(new s.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,p){return this.easeTo(s.e({bearing:t},o),p)}resetNorth(t,o){return this.rotateTo(0,s.e({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}getRoll(){return this.transform.roll}setRoll(t,o){return this.jumpTo({roll:t},o),this}cameraForBounds(t,o){t=fi.convert(t).adjustAntiMeridian();const p=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),p,o)}_cameraForBoxAndBearing(t,o,p,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=s.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const A=g.padding;g.padding={top:A,bottom:A,right:A,left:A}}const k=s.e(x,g.padding);g.padding=k;const M=this.transform,C=new fi(t,o);return this.cameraHelper.cameraForBoxAndBearing(g,k,C,p,M)}fitBounds(t,o,p){return this._fitInternal(this.cameraForBounds(t,o),o,p)}fitScreenCoordinates(t,o,p,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(t)),this.transform.screenPointToLocation(s.P.convert(o)),p,g),g,x)}_fitInternal(t,o,p){return t?(delete(o=s.e(t,o)).padding,o.linear?this.easeTo(o,p):this.flyTo(o,p)):this}jumpTo(t,o){this.stop();const p=this._getTransformForUpdate();let g=!1,x=!1,k=!1;const M=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,t);const C=p.zoom!==M;return"elevation"in t&&p.elevation!==+t.elevation&&p.setElevation(+t.elevation),"bearing"in t&&p.bearing!==+t.bearing&&(g=!0,p.setBearing(+t.bearing)),"pitch"in t&&p.pitch!==+t.pitch&&(x=!0,p.setPitch(+t.pitch)),"roll"in t&&p.roll!==+t.roll&&(k=!0,p.setRoll(+t.roll)),t.padding==null||p.isPaddingEqual(t.padding)||p.setPadding(t.padding),this._applyUpdatedTransform(p),this.fire(new s.l("movestart",o)).fire(new s.l("move",o)),C&&this.fire(new s.l("zoomstart",o)).fire(new s.l("zoom",o)).fire(new s.l("zoomend",o)),g&&this.fire(new s.l("rotatestart",o)).fire(new s.l("rotate",o)).fire(new s.l("rotateend",o)),x&&this.fire(new s.l("pitchstart",o)).fire(new s.l("pitch",o)).fire(new s.l("pitchend",o)),k&&this.fire(new s.l("rollstart",o)).fire(new s.l("roll",o)).fire(new s.l("rollend",o)),this.fire(new s.l("moveend",o))}calculateCameraOptionsFromTo(t,o,p,g=0){const x=s.a9.fromLngLat(t,o),k=s.a9.fromLngLat(p,g),M=k.x-x.x,C=k.y-x.y,A=k.z-x.z,R=Math.hypot(M,C,A);if(R===0)throw new Error("Can't calculate camera options with same From and To");const B=Math.hypot(M,C),$=s.at(this.transform.cameraToCenterDistance/R/this.transform.tileSize),G=180*Math.atan2(M,-C)/Math.PI;let K=180*Math.acos(B/R)/Math.PI;return K=A<0?90-K:90+K,{center:k.toLngLat(),elevation:g,zoom:$,pitch:K,bearing:G}}calculateCameraOptionsFromCameraLngLatAltRotation(t,o,p,g,x){const k=this.transform.calculateCenterFromCameraLngLatAlt(t,o,p,g);return{center:k.center,elevation:k.elevation,zoom:k.zoom,bearing:p,pitch:g,roll:x}}easeTo(t,o){this._stop(!1,t.easeId),((t=s.e({offset:[0,0],duration:500,easing:s.cy},t)).animate===!1||!t.essential&&W.prefersReducedMotion)&&(t.duration=0);const p=this._getTransformForUpdate(),g=this.getBearing(),x=p.pitch,k=p.roll,M="bearing"in t?this._normalizeBearing(t.bearing,g):g,C="pitch"in t?+t.pitch:x,A="roll"in t?this._normalizeBearing(t.roll,k):k,R="padding"in t?t.padding:p.padding,B=s.P.convert(t.offset);let $,G;t.around&&($=s.V.convert(t.around),G=p.locationToScreenPoint($));const K={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ie=this.cameraHelper.handleEaseTo(p,{bearing:M,pitch:C,roll:A,padding:R,around:$,aroundPoint:G,offsetAsPoint:B,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||g!==M,this._pitching=this._pitching||C!==x,this._rolling=this._rolling||A!==k,this._padding=!p.isPaddingEqual(R),this._zooming=this._zooming||ie.isZooming,this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,K),this.terrain&&this._prepareElevation(ie.elevationCenter),this._ease((ae=>{ie.easeFunc(ae),this.terrain&&!t.freezeElevation&&this._updateElevation(ae),this._applyUpdatedTransform(p),this._fireMoveEvents(o)}),(ae=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o,ae)}),t),this}_prepareEase(t,o,p={}){this._moving=!0,o||p.moving||this.fire(new s.l("movestart",t)),this._zooming&&!p.zooming&&this.fire(new s.l("zoomstart",t)),this._rotating&&!p.rotating&&this.fire(new s.l("rotatestart",t)),this._pitching&&!p.pitching&&this.fire(new s.l("pitchstart",t)),this._rolling&&!p.rolling&&this.fire(new s.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&o!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(p-(o-(p*t+this._elevationStart))/(1-t)),this._elevationTarget=o}this.transform.setElevation(s.G.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const o=t.getCameraLngLat(),p=t.getCameraAltitude(),g=this.terrain?this.terrain.getElevationForLngLatZoom(o,t.zoom):0;if(p<g){const x=this.calculateCameraOptionsFromTo(o,g,t.center,t.elevation);return{pitch:x.pitch,zoom:x.zoom}}return{}}_applyUpdatedTransform(t){const o=[];if(o.push((g=>this._elevateCameraIfInsideTerrain(g))),this.transformCameraUpdate&&o.push((g=>this.transformCameraUpdate(g))),!o.length)return;const p=t.clone();for(const g of o){const x=p.clone(),{center:k,zoom:M,roll:C,pitch:A,bearing:R,elevation:B}=g(x);k&&x.setCenter(k),B!==void 0&&x.setElevation(B),M!==void 0&&x.setZoom(M),C!==void 0&&x.setRoll(C),A!==void 0&&x.setPitch(A),R!==void 0&&x.setBearing(R),p.apply(x)}this.transform.apply(p)}_fireMoveEvents(t){this.fire(new s.l("move",t)),this._zooming&&this.fire(new s.l("zoom",t)),this._rotating&&this.fire(new s.l("rotate",t)),this._pitching&&this.fire(new s.l("pitch",t)),this._rolling&&this.fire(new s.l("roll",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const p=this._zooming,g=this._rotating,x=this._pitching,k=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new s.l("zoomend",t)),g&&this.fire(new s.l("rotateend",t)),x&&this.fire(new s.l("pitchend",t)),k&&this.fire(new s.l("rollend",t)),this.fire(new s.l("moveend",t))}flyTo(t,o){if(!t.essential&&W.prefersReducedMotion){const Ce=s.U(t,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Ce,o)}this.stop(),t=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cy},t);const p=this._getTransformForUpdate(),g=p.bearing,x=p.pitch,k=p.roll,M=p.padding,C="bearing"in t?this._normalizeBearing(t.bearing,g):g,A="pitch"in t?+t.pitch:x,R="roll"in t?this._normalizeBearing(t.roll,k):k,B="padding"in t?t.padding:p.padding,$=s.P.convert(t.offset);let G=p.centerPoint.add($);const K=p.screenPointToLocation(G),ie=this.cameraHelper.handleFlyTo(p,{bearing:C,pitch:A,roll:R,padding:B,locationAtOffset:K,offsetAsPoint:$,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let ae=t.curve;const ne=Math.max(p.width,p.height),oe=ne/ie.scaleOfZoom,he=ie.pixelPathLength;typeof ie.scaleOfMinZoom=="number"&&(ae=Math.sqrt(ne/ie.scaleOfMinZoom/he*2));const re=ae*ae;function de(Ce){const Ge=(oe*oe-ne*ne+(Ce?-1:1)*re*re*he*he)/(2*(Ce?oe:ne)*re*he);return Math.log(Math.sqrt(Ge*Ge+1)-Ge)}function me(Ce){return(Math.exp(Ce)-Math.exp(-Ce))/2}function ue(Ce){return(Math.exp(Ce)+Math.exp(-Ce))/2}const ve=de(!1);let De=function(Ce){return ue(ve)/ue(ve+ae*Ce)},Te=function(Ce){return ne*((ue(ve)*(me(Ge=ve+ae*Ce)/ue(Ge))-me(ve))/re)/he;var Ge},Pe=(de(!0)-ve)/ae;if(Math.abs(he)<2e-6||!isFinite(Pe)){if(Math.abs(ne-oe)<1e-6)return this.easeTo(t,o);const Ce=oe<ne?-1:1;Pe=Math.abs(Math.log(oe/ne))/ae,Te=()=>0,De=Ge=>Math.exp(Ce*ae*Ge)}return t.duration="duration"in t?+t.duration:1e3*Pe/("screenSpeed"in t?+t.screenSpeed/ae:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=g!==C,this._pitching=A!==x,this._rolling=R!==k,this._padding=!p.isPaddingEqual(B),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(ie.targetCenter),this._ease((Ce=>{const Ge=Ce*Pe,We=1/De(Ge),$e=Te(Ge);this._rotating&&p.setBearing(s.G.number(g,C,Ce)),this._pitching&&p.setPitch(s.G.number(x,A,Ce)),this._rolling&&p.setRoll(s.G.number(k,R,Ce)),this._padding&&(p.interpolatePadding(M,B,Ce),G=p.centerPoint.add($)),ie.easeFunc(Ce,We,$e,G),this.terrain&&!t.freezeElevation&&this._updateElevation(Ce),this._applyUpdatedTransform(p),this._fireMoveEvents(o)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,o)}return t||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(t,o,p){p.animate===!1||p.duration===0?(t(1),o()):(this._easeStart=te(),this._easeOptions=p,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,o){t=s.W(t,-180,180);const p=Math.abs(t-o);return Math.abs(t-360-o)<p&&(t-=360),Math.abs(t+360-o)<p&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLat(s.V.convert(t),this.transform):null}}const Zn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Qu{constructor(t=Zn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=U.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=U.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const p=this._map._getUIString(`AttributionControl.${o}`);t.title=p,t.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((g=>typeof g!="string"?"":g))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const o=this._map.style.tileManagers;for(const g in o){const x=o[g];if(x.used||x.usedForTerrain){const k=x.getSource();k.attribution&&t.indexOf(k.attribution)<0&&t.push(k.attribution)}}t=t.filter((g=>String(g).trim())),t.sort(((g,x)=>g.length-x.length)),t=t.filter(((g,x)=>{for(let k=x+1;k<t.length;k++)if(t[k].indexOf(g)>=0)return!1;return!0}));const p=t.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,t.length?(this._innerContainer.innerHTML=U.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ah{constructor(t={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const p=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=U.create("div","maplibregl-ctrl");const o=U.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){U.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class tp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,p=o?this._queue.concat(o):this._queue;for(const g of p)if(g.id===t)return void(g.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const p of o)if(!p.cancelled&&(p.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ip=s.aU([{name:"a_pos3d",type:"Int16",components:3}]);class ho extends s.E{constructor(t){super(),this._lastTilesetChange=te(),this.tileManager=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(t,o){this.tileManager.update(t,o),this._renderableTilesKeys=[];const p={};for(const g of pi(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.tileManager._source.calculateTileZoom}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.terrainRttPosMatrix32f=new Float64Array(16),s.c7(g.terrainRttPosMatrix32f,0,s.a5,s.a5,0,0,1),this._tiles[g.key]=new Ve(g,this.tileSize),this._lastTilesetChange=te());for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(t){for(const o in this._tiles){const p=this._tiles[o];(!t||p.tileID.equals(t)||p.tileID.isChildOf(t)||t.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,o){return o?this._getTerrainCoordsForTileRanges(t,o):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const o={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID,x=t.clone(),k=s.bk();if(g.canonical.equals(t.canonical))s.c7(k,0,s.a5,s.a5,0,0,1);else if(g.canonical.isChildOf(t.canonical)){const M=g.canonical.z-t.canonical.z,C=g.canonical.x-(g.canonical.x>>M<<M),A=g.canonical.y-(g.canonical.y>>M<<M),R=s.a5>>M;s.c7(k,0,R,R,0,0,1),s.O(k,k,[-C*R,-A*R,0])}else{if(!t.canonical.isChildOf(g.canonical))continue;{const M=t.canonical.z-g.canonical.z,C=t.canonical.x-(t.canonical.x>>M<<M),A=t.canonical.y-(t.canonical.y>>M<<M),R=s.a5>>M;s.c7(k,0,s.a5,s.a5,0,0,1),s.O(k,k,[C*R,A*R,0]),s.Q(k,k,[1/2**M,1/2**M,0])}}x.terrainRttPosMatrix32f=new Float32Array(k),o[p]=x}return o}_getTerrainCoordsForTileRanges(t,o){const p={};for(const g of this._renderableTilesKeys){const x=this._tiles[g].tileID;if(!this._isWithinTileRanges(x,o))continue;const k=t.clone(),M=s.bk();if(x.canonical.z===t.canonical.z){const C=t.canonical.x-x.canonical.x,A=t.canonical.y-x.canonical.y;s.c7(M,0,s.a5,s.a5,0,0,1),s.O(M,M,[C*s.a5,A*s.a5,0])}else if(x.canonical.z>t.canonical.z){const C=x.canonical.z-t.canonical.z,A=x.canonical.x-(x.canonical.x>>C<<C),R=x.canonical.y-(x.canonical.y>>C<<C),B=t.canonical.x-(x.canonical.x>>C),$=t.canonical.y-(x.canonical.y>>C),G=s.a5>>C;s.c7(M,0,G,G,0,0,1),s.O(M,M,[-A*G+B*s.a5,-R*G+$*s.a5,0])}else{const C=t.canonical.z-x.canonical.z,A=t.canonical.x-(t.canonical.x>>C<<C),R=t.canonical.y-(t.canonical.y>>C<<C),B=(t.canonical.x>>C)-x.canonical.x,$=(t.canonical.y>>C)-x.canonical.y,G=s.a5<<C;s.c7(M,0,G,G,0,0,1),s.O(M,M,[A*s.a5+B*G,R*s.a5+$*G,0])}k.terrainRttPosMatrix32f=new Float32Array(M),p[g]=k}return p}getSourceTile(t,o){const p=this.tileManager._source;let g=t.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(g).key);let x=this.findTileInCaches(this._sourceTileCache[t.key]);if(!x?.dem&&o)for(;g>=p.minzoom&&!x?.dem;)x=this.findTileInCaches(t.scaledTo(g--).key);return x}findTileInCaches(t){let o=this.tileManager.getTileByID(t);return o||(o=this.tileManager._outOfViewCache.getByKey(t),o)}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,o){return o[t.canonical.z]&&t.canonical.x>=o[t.canonical.z].minTileX&&t.canonical.x<=o[t.canonical.z].maxTileX&&t.canonical.y>=o[t.canonical.z].minTileY&&t.canonical.y<=o[t.canonical.z].maxTileY}}class ui{constructor(t,o,p){this._meshCache={},this.painter=t,this.tileManager=new ho(o),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,o,p,g=s.a5){var x;if(!(o>=0&&o<g&&p>=0&&p<g))return 0;const k=this.getTerrainData(t),M=(x=k.tile)===null||x===void 0?void 0:x.dem;if(!M)return 0;const C=s.cC([],[o/g*s.a5,p/g*s.a5],k.u_terrain_matrix),A=[C[0]*M.dim,C[1]*M.dim],R=Math.floor(A[0]),B=Math.floor(A[1]),$=A[0]-R,G=A[1]-B;return M.get(R,B)*(1-$)*(1-G)+M.get(R+1,B)*$*(1-G)+M.get(R,B+1)*(1-$)*G+M.get(R+1,B+1)*$*G}getElevationForLngLatZoom(t,o){if(!s.cD(o,t.wrap()))return 0;const{tileID:p,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(t,o);return this.getElevation(p,g%s.a5,x%s.a5,s.a5)}getElevationForLngLat(t,o){const p=pi(o,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let g=0;for(const x of p)x.canonical.z>g&&(g=Math.min(x.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(t,g)}getElevation(t,o,p,g=s.a5){return this.getDEMElevation(t,o,p,g)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const g=this.painter.context,x=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(g,new s.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ar([])}const o=this.tileManager.getSourceTile(t,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const g=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new s.T(g,o.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),o.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const p=o&&o.toString()+o.tileID.key+t.key;if(p&&!this._demMatrixCache[p]){const g=this.tileManager.getSource().maxzoom;let x=t.canonical.z-o.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=g?x=t.canonical.z-g:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=t.canonical.x-(t.canonical.x>>x<<x),M=t.canonical.y-(t.canonical.y>>x<<x),C=s.cE(new Float64Array(16),[1/(s.a5<<x),1/(s.a5<<x),0]);s.O(C,C,[k*s.a5,M*s.a5,0]),this._demMatrixCache[t.key]={matrix:C,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(t){const o=this.painter,p=o.width/devicePixelRatio,g=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(o.context,{width:p,height:g,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(o.context,{width:p,height:g,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,k=0;x<this._coordsTextureSize;x++)for(let M=0;M<this._coordsTextureSize;M++,k+=4)o[k+0]=255&M,o[k+1]=255&x,o[k+2]=M>>8<<4|x>>8,o[k+3]=0;const p=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),g=new s.T(t,p,t.gl.RGBA,{premultiply:!1});return g.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),p=this.painter.context,g=p.gl,x=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),k=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(x,M-k-1,1,1,g.RGBA,g.UNSIGNED_BYTE,o),p.bindFramebuffer.set(null);const C=o[0]+(o[2]>>4<<8),A=o[1]+((15&o[2])<<8),R=this.coordsIndex[255-o[3]],B=R&&this.tileManager.getTileByID(R);if(!B)return null;const $=this._coordsTextureSize,G=(1<<B.tileID.canonical.z)*$;return new s.a9((B.tileID.canonical.x*$+C)/G+B.tileID.wrap,(B.tileID.canonical.y*$+A)/G,this.getElevation(B.tileID,C,A,$))}depthAtPoint(t){const o=new Uint8Array(4),p=this.painter.context,g=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,o),p.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(t){var o;const p=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,g=p&&t.canonical.y===0,x=p&&t.canonical.y===(1<<t.canonical.z)-1,k=`m_${g?"n":""}_${x?"s":""}`;if(this._meshCache[k])return this._meshCache[k];const M=this.painter.context,C=new s.cF,A=new s.aY,R=this.meshSize,B=s.a5/R,$=R*R;for(let ue=0;ue<=R;ue++)for(let ve=0;ve<=R;ve++)C.emplaceBack(ve*B,ue*B,0);for(let ue=0;ue<$;ue+=R+1)for(let ve=0;ve<R;ve++)A.emplaceBack(ve+ue,R+ve+ue+1,R+ve+ue+2),A.emplaceBack(ve+ue,R+ve+ue+2,ve+ue+1);const G=C.length,K=G+(R+1),ie=(R+1)*R,ae=g?s.br:0,ne=g?0:1,oe=x?s.bs:s.a5,he=x?0:1;for(let ue=0;ue<=R;ue++)C.emplaceBack(ue*B,ae,ne);for(let ue=0;ue<=R;ue++)C.emplaceBack(ue*B,oe,he);for(let ue=0;ue<R;ue++)A.emplaceBack(ie+ue,K+ue,K+ue+1),A.emplaceBack(ie+ue,K+ue+1,ie+ue+1),A.emplaceBack(0+ue,G+ue+1,G+ue),A.emplaceBack(0+ue,0+ue+1,G+ue+1);const re=C.length,de=re+2*(R+1);for(const ue of[0,1])for(let ve=0;ve<=R;ve++)for(const De of[0,1])C.emplaceBack(ue*s.a5,ve*B,De);for(let ue=0;ue<2*R;ue+=2)A.emplaceBack(re+ue,re+ue+1,re+ue+3),A.emplaceBack(re+ue,re+ue+3,re+ue+2),A.emplaceBack(de+ue,de+ue+3,de+ue+1),A.emplaceBack(de+ue,de+ue+2,de+ue+3);const me=new qt(M.createVertexBuffer(C,ip.members),M.createIndexBuffer(A),s.aX.simpleSegment(0,0,C.length,A.length));return this._meshCache[k]=me,me}getMeshFrameDelta(t){return 2*Math.PI*s.bE/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,o){var p;if(!s.cD(o,t.wrap()))return 0;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(t,o);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(t){const o=this.getTerrainData(t).tile,p={minElevation:null,maxElevation:null};return o&&o.dem&&(p.minElevation=o.dem.min*this.exaggeration,p.maxElevation=o.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(t,o){const p=s.a9.fromLngLat(t.wrap()),g=(1<<o)*s.a5,x=p.x*g,k=p.y*g,M=Math.floor(x/s.a5),C=Math.floor(k/s.a5);return{tileID:new s.a2(o,0,o,M,C),mercatorX:x,mercatorY:k}}}class Si{constructor(t,o,p){this._context=t,this._size=o,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(p.texture),{id:t,fbo:o,texture:p,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((o=>t.id!==o)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}const gr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class fo{constructor(t,o){this.painter=t,this.terrain=o,this.pool=new Si(t.context,30,o.tileManager.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=t._order.filter((p=>!t._layers[p].isHidden(o))),this._coordsAscending={};for(const p in t.tileManagers){this._coordsAscending[p]={};const g=t.tileManagers[p].getVisibleCoordinates(),x=t.tileManagers[p].getSource(),k=x instanceof Sn?x.terrainTileRanges:null;for(const M of g){const C=this.terrain.tileManager.getTerrainCoords(M,k);for(const A in C)this._coordsAscending[p][A]||(this._coordsAscending[p][A]=[]),this._coordsAscending[p][A].push(C[A])}}this._coordsAscendingStr={};for(const p of t._order){const g=t._layers[p],x=g.source;if(gr[g.type]&&!this._coordsAscendingStr[x]){this._coordsAscendingStr[x]={};for(const k in this._coordsAscending[x])this._coordsAscendingStr[x][k]=this._coordsAscending[x][k].map((M=>M.key)).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsAscendingStr){const x=this._coordsAscendingStr[g][p.tileID.key];x&&x!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(t,o){if(t.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),g=t.type,x=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(gr[g]&&(this._prevType&&gr[this._prevType]||this._stacks.push([]),this._prevType=g,this._stacks[this._stacks.length-1].push(t.id),!k))return!0;if(gr[this._prevType]||gr[g]&&k){this._prevType=g;const M=this._stacks.length-1,C=this._stacks[M]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Nu(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[M]){const B=this.pool.getObjectForId(A.rtt[M].id);if(B.stamp===A.rtt[M].stamp){this.pool.useObject(B);continue}}const R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),A.rtt[M]={id:R.id,stamp:R.stamp},x.context.bindFramebuffer.set(R.fbo.framebuffer),x.context.clear({color:s.bp.transparent,stencil:0}),x.currentStencilSource=void 0;for(let B=0;B<C.length;B++){const $=x.style._layers[C[B]],G=$.source?this._coordsAscending[$.source][A.tileID.key]:[A.tileID];x.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),x._renderTileClippingMasks($,G,!0),x.renderLayer(x,x.style.tileManagers[$.source],$,G,p),$.source&&(A.rttCoords[$.source]=this._coordsAscendingStr[$.source][A.tileID.key])}}return Nu(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),gr[g]}return!1}}const Cl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ed=w,El={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},td={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class po{constructor(t,o,p=!1){this.mousedown=x=>{this.startMove(x,U.mousePos(this.element,x)),U.addEventListener(window,"mousemove",this.mousemove),U.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=x=>{this.move(x,U.mousePos(this.element,x))},this.mouseup=x=>{this._rotatePitchHandler.dragEnd(x),this.offTemp()},this.touchstart=x=>{x.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=U.touchPos(this.element,x.targetTouches)[0],this.startMove(x,this._startPos),U.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.addEventListener(window,"touchend",this.touchend))},this.touchmove=x=>{x.targetTouches.length!==1?this.reset():(this._lastPos=U.touchPos(this.element,x.targetTouches)[0],this.move(x,this._lastPos))},this.touchend=x=>{x.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const g=new Xc;this._rotatePitchHandler=new os({clickTolerance:3,move:(x,k)=>{const M=o.getBoundingClientRect(),C=new s.P((M.bottom-M.top)/2,(M.right-M.left)/2);return{bearingDelta:s.cx(new s.P(x.x,k.y),k,C),pitchDelta:p?-.5*(k.y-x.y):void 0}},moveStateManager:g,enable:!0,assignEvents:()=>{}}),this.map=t,U.addEventListener(o,"mousedown",this.mousedown),U.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),U.addEventListener(o,"touchcancel",this.reset)}startMove(t,o){this._rotatePitchHandler.dragStart(t,o),U.disableDrag()}move(t,o){const p=this.map,{bearingDelta:g,pitchDelta:x}=this._rotatePitchHandler.dragMove(t,o)||{};g&&p.setBearing(p.getBearing()+g),x&&p.setPitch(p.getPitch()+x)}off(){const t=this.element;U.removeEventListener(t,"mousedown",this.mousedown),U.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),U.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.removeEventListener(window,"touchend",this.touchend),U.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){U.enableDrag(),U.removeEventListener(window,"mousemove",this.mousemove),U.removeEventListener(window,"mouseup",this.mouseup),U.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.removeEventListener(window,"touchend",this.touchend)}}let Sa;function Ll(v,t,o,p=!1){if(p||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return v?.wrap();const g=new s.V(v.lng,v.lat);if(v=new s.V(v.lng,v.lat),t){const x=new s.V(v.lng-360,v.lat),k=new s.V(v.lng+360,v.lat),M=o.locationToScreenPoint(v).distSqr(t);o.locationToScreenPoint(x).distSqr(t)<M?v=x:o.locationToScreenPoint(k).distSqr(t)<M&&(v=k)}for(;Math.abs(v.lng-o.center.lng)>180;){const x=o.locationToScreenPoint(v);if(x.x>=0&&x.y>=0&&x.x<=o.width&&x.y<=o.height)break;v.lng>o.center.lng?v.lng-=360:v.lng+=360}return v.lng!==g.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(v))?v:g}const mo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Dl(v,t,o){const p=v.classList;for(const g in mo)p.remove(`maplibregl-${o}-anchor-${g}`);p.add(`maplibregl-${o}-anchor-${t}`)}class go extends s.E{constructor(t){if(super(),this._onKeyPress=o=>{const p=o.code,g=o.charCode||o.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=o=>{const p=o.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();(o?.type==="terrain"||o?.type==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=Ll(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),U.setTransform(this._element,`${mo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${g}`),W.frameAsync(new AbortController).then((()=>{this._updateOpacity(o&&o.type==="moveend")})).catch((()=>{}))},this._onMove=o=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t?.opacity,t?.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=s.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=U.create("div");const o=U.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${p}px`),o.setAttributeNS(null,"width",`${g}px`),o.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const x=U.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const k=U.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const M=U.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ne of C){const oe=U.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",ne.rx),oe.setAttributeNS(null,"ry",ne.ry),M.appendChild(oe)}const A=U.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill",this._color);const R=U.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),A.appendChild(R);const B=U.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"opacity","0.25"),B.setAttributeNS(null,"fill","#000000");const $=U.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),B.appendChild($);const G=U.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");const K=U.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ie=U.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#000000"),ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962");const ae=U.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),K.appendChild(ie),K.appendChild(ae),k.appendChild(M),k.appendChild(A),k.appendChild(B),k.appendChild(G),k.appendChild(K),o.appendChild(k),o.setAttributeNS(null,"height",p*this._scale+"px"),o.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(o),this._offset=s.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(o=>{o.preventDefault()})),this._element.addEventListener("mousedown",(o=>{o.preventDefault()})),Dl(this._element,this._anchor,"marker"),t&&t.className)for(const o of t.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),U.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=s.V.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const g=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var o,p;const g=(o=this._map)===null||o===void 0?void 0:o.terrain,x=this._map.transform.isLocationOccluded(this._lngLat);if(!g||x){const G=x?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==G&&(this._element.style.opacity=G))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const k=this._map,M=k.terrain.depthAtPoint(this._pos),C=k.terrain.getElevationForLngLat(this._lngLat,k.transform);if(k.transform.lngLatToCameraDepth(this._lngLat,C)-M<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/k.transform.pixelsPerMeter,R=Math.sin(k.getPitch()*Math.PI/180)*A,B=k.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),$=k.transform.lngLatToCameraDepth(this._lngLat,C+R)-B>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&$&&this._popup.remove(),this._element.style.opacity=$?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=s.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,o){return(this._opacity===void 0||t===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const id={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let us=0,_r=!1;const nd={maxWidth:100,unit:"metric"};function _o(v,t,o){const p=o&&o.maxWidth||100,g=v._container.clientHeight/2,x=v._container.clientWidth/2,k=v.unproject([x-p/2,g]),M=v.unproject([x+p/2,g]),C=Math.round(v.project(M).x-v.project(k).x),A=Math.min(p,C,v._container.clientWidth),R=k.distanceTo(M);if(o&&o.unit==="imperial"){const B=3.2808*R;B>5280?yr(t,A,B/5280,v._getUIString("ScaleControl.Miles")):yr(t,A,B,v._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?yr(t,A,R/1852,v._getUIString("ScaleControl.NauticalMiles")):R>=1e3?yr(t,A,R/1e3,v._getUIString("ScaleControl.Kilometers")):yr(t,A,R,v._getUIString("ScaleControl.Meters"))}function yr(v,t,o,p){const g=(function(x){const k=Math.pow(10,`${Math.floor(x)}`.length-1);let M=x/k;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:(function(C){const A=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*A)/A})(M),k*M})(o);v.style.width=t*(g/o)+"px",v.innerHTML=`${g}&nbsp;${p}`}const ad={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Al=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Il(v){if(v){if(typeof v=="number"){const t=Math.round(Math.abs(v)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,v),"top-left":new s.P(t,t),"top-right":new s.P(-t,t),bottom:new s.P(0,-v),"bottom-left":new s.P(t,-t),"bottom-right":new s.P(-t,-t),left:new s.P(v,0),right:new s.P(-v,0)}}if(v instanceof s.P||Array.isArray(v)){const t=s.P.convert(v);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:s.P.convert(v.center||[0,0]),top:s.P.convert(v.top||[0,0]),"top-left":s.P.convert(v["top-left"]||[0,0]),"top-right":s.P.convert(v["top-right"]||[0,0]),bottom:s.P.convert(v.bottom||[0,0]),"bottom-left":s.P.convert(v["bottom-left"]||[0,0]),"bottom-right":s.P.convert(v["bottom-right"]||[0,0]),left:s.P.convert(v.left||[0,0]),right:s.P.convert(v.right||[0,0])}}return Il(new s.P(0,0))}const rd=w;h.AJAXError=s.cI,h.Event=s.l,h.Evented=s.E,h.LngLat=s.V,h.MercatorCoordinate=s.a9,h.Point=s.P,h.addProtocol=s.cJ,h.config=s.c,h.removeProtocol=s.cK,h.AttributionControl=Qu,h.BoxZoomHandler=ss,h.CanvasSource=Z,h.CooperativeGesturesHandler=at,h.DoubleClickZoomHandler=Ju,h.DragPanHandler=nh,h.DragRotateHandler=sa,h.EdgeInsets=Ur,h.FullscreenControl=class extends s.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var t;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=o?.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){U.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=U.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);U.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=jr,h.GeolocateControl=class extends s.E{constructor(v){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const o=new s.V(t.coords.longitude,t.coords.latitude),p=t.coords.accuracy,g=this._map.getBearing(),x=s.e({bearing:g},this.options.fitBoundsOptions),k=fi.fromLngLat(o,p);this._map.fitBounds(k,x,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const o=new s.V(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&_r)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=U.create("button","maplibregl-ctrl-geolocate",this._container),U.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new go({element:this._dotElement}),this._circleElement=U.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new go({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(o=>{const p=o?.[0]instanceof ResizeObserverEntry;o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))}))}},this.options=s.e({},id,v)}onAdd(v){return this._map=v,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return s._(this,arguments,void 0,(function*(t=!1){if(Sa!==void 0&&!t)return Sa;if(window.navigator.permissions===void 0)return Sa=!!window.navigator.geolocation,Sa;try{Sa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Sa=!!window.navigator.geolocation}return Sa}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),U.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,us=0,_r=!1}_isOutOfMapMaxBounds(v){const t=this._map.getMaxBounds(),o=v.coords;return t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const v=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&v))return;const t=this._map.project(v),o=this._map.unproject([t.x+100,t.y]),p=v.distanceTo(o)/100,g=2*this._accuracy/p;this._circleElement.style.width=`${g.toFixed(2)}px`,this._circleElement.style.height=`${g.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":us--,_r=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),us++,us>1?(v={maximumAge:6e5,timeout:0},_r=!0):(v=this.options.positionOptions,_r=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.GlobeControl=class{constructor(){this._toggleProjection=()=>{var v;const t=(v=this._map.getProjection())===null||v===void 0?void 0:v.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var v;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((v=this._map.getProjection())===null||v===void 0?void 0:v.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(v){return this._map=v,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=U.create("button","maplibregl-ctrl-globe",this._container),U.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},h.Hash=qu,h.ImageSource=Sn,h.KeyboardHandler=Nt,h.LngLatBounds=fi,h.LogoControl=ah,h.Map=class extends bn{constructor(v){var t,o;s.cG.mark(s.cH.create);const p=Object.assign(Object.assign(Object.assign({},El),v),{canvasContextAttributes:Object.assign(Object.assign({},El.canvasContextAttributes),v.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const g=new rr,x=new sr;if(p.minZoom!==void 0&&g.setMinZoom(p.minZoom),p.maxZoom!==void 0&&g.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&g.setMinPitch(p.minPitch),p.maxPitch!==void 0&&g.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&g.setRenderWorldCopies(p.renderWorldCopies),p.transformConstrain!==null&&g.setConstrainOverride(p.transformConstrain),super(g,x,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new tp,this._controls=[],this._mapId=s.af(),this._lostContextStyle={style:null,images:null},this._contextLost=M=>{M.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const C of Object.values(this.style._layers))if(C.type==="custom"&&console.warn(`Custom layer with id '${C.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),C._listeners)for(const[A]of Object.entries(C._listeners))console.warn(`Custom layer with id '${C.id}' had event listeners for event '${A}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new s.l("webglcontextlost",{originalEvent:M}))},this._contextRestored=M=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:M}))},this._onMapScroll=M=>{if(M.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Cl),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this._zoomLevelsToOverscale=p.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=p.transformCameraUpdate,this.transformConstrain=p.transformConstrain,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,p.reduceMotion!==void 0&&(W.prefersReducedMotion=p.reduceMotion),this._imageQueueHandle=Ne.addThrottleControl((()=>this.isMoving())),this._requestManager=new He(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let M=!1;const C=Gu((A=>{this._trackResize&&!this._removed&&(this.resize(A),this.redraw())}),50);this._resizeObserver=new ResizeObserver((A=>{M?C(A):M=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Pl(this,p),this._hash=p.hash&&new qu(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,s.e({},p.fitBoundsOptions,{duration:0}))));const k=typeof p.style=="string"||((o=(t=p.style)===null||t===void 0?void 0:t.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,k),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Qu(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new ah,p.logoPosition),this.on("style.load",(()=>{if(k||this._resizeTransform(),this.transform.unmodified){const M=s.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(M)}})),this.on("data",(M=>{this._update(M.dataType==="style"),this.fire(new s.l(`${M.dataType}data`,M))})),this.on("dataloading",(M=>{this.fire(new s.l(`${M.dataType}dataloading`,M))})),this.on("dataabort",(M=>{this.fire(new s.l("sourcedataabort",M))}))}_getMapId(){return this._mapId}setGlobalStateProperty(v,t){return this.style.setGlobalStateProperty(v,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(v,t){if(t===void 0&&(t=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[t];return t.indexOf("bottom")!==-1?p.insertBefore(o,p.firstChild):p.appendChild(o),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(v);return t>-1&&this._controls.splice(t,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}coveringTiles(v){return pi(this.transform,v)}calculateCameraOptionsFromTo(v,t,o,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLat(o,this.transform)),super.calculateCameraOptionsFromTo(v,t,o,p)}resize(v,t=!0){const[o,p]=this._containerDimensions(),g=this._getClampedPixelRatio(o,p);if(this._resizeCanvas(o,p,g),this.painter.resize(o,p,g),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const M=this._getClampedPixelRatio(o,p);this._resizeCanvas(o,p,M),this.painter.resize(o,p,M)}this._resizeTransform(t);const x=!this._moving;return x&&(this.stop(),this.fire(new s.l("movestart",v)).fire(new s.l("move",v))),this.fire(new s.l("resize",v)),x&&this.fire(new s.l("moveend",v)),this}_resizeTransform(v=!0){var t;const[o,p]=this._containerDimensions();this.transform.resize(o,p,v),(t=this._requestedCameraState)===null||t===void 0||t.resize(o,p,v)}_getClampedPixelRatio(v,t){const{0:o,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),x=v*g,k=t*g;return Math.min(x>o?o/x:1,k>p?p/k:1)*g}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(fi.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom){const t=this._getTransformForUpdate();return t.setMinZoom(v),this._applyUpdatedTransform(t),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom){const t=this._getTransformForUpdate();return t.setMaxZoom(v),this._applyUpdatedTransform(t),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.setMinPitch(v),this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(v>=this.transform.minPitch)return this.transform.setMaxPitch(v),this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.setRenderWorldCopies(v),this._update()}setTransformConstrain(v){return this.transform.setConstrainOverride(v),this._update()}project(v){return this.transform.locationToScreenPoint(s.V.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.screenPointToLocation(s.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,t,o){if(v==="mouseenter"||v==="mouseover"){let p=!1;return{layers:t,listener:o,delegates:{mousemove:x=>{const k=t.filter((C=>this.getLayer(C))),M=k.length!==0?this.queryRenderedFeatures(x.point,{layers:k}):[];M.length?p||(p=!0,o.call(this,new Gi(v,this,x.originalEvent,{features:M}))):p=!1},mouseout:()=>{p=!1}}}}if(v==="mouseleave"||v==="mouseout"){let p=!1;return{layers:t,listener:o,delegates:{mousemove:k=>{const M=t.filter((C=>this.getLayer(C)));(M.length!==0?this.queryRenderedFeatures(k.point,{layers:M}):[]).length?p=!0:p&&(p=!1,o.call(this,new Gi(v,this,k.originalEvent)))},mouseout:k=>{p&&(p=!1,o.call(this,new Gi(v,this,k.originalEvent)))}}}}{const p=g=>{const x=t.filter((M=>this.getLayer(M))),k=x.length!==0?this.queryRenderedFeatures(g.point,{layers:x}):[];k.length&&(g.features=k,o.call(this,g),delete g.features)};return{layers:t,listener:o,delegates:{[v]:p}}}}_saveDelegatedListener(v,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(t)}_removeDelegatedListener(v,t,o){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const p=this._delegatedListeners[v];for(let g=0;g<p.length;g++){const x=p[g];if(x.listener===o&&x.layers.length===t.length&&x.layers.every((k=>t.includes(k)))){for(const k in x.delegates)this.off(k,x.delegates[k]);return void p.splice(g,1)}}}on(v,t,o){if(o===void 0)return super.on(v,t);const p=typeof t=="string"?[t]:t,g=this._createDelegatedListener(v,p,o);this._saveDelegatedListener(v,g);for(const x in g.delegates)this.on(x,g.delegates[x]);return{unsubscribe:()=>{this._removeDelegatedListener(v,p,o)}}}once(v,t,o){if(o===void 0)return super.once(v,t);const p=typeof t=="string"?[t]:t,g=this._createDelegatedListener(v,p,o);for(const x in g.delegates){const k=g.delegates[x];g.delegates[x]=(...M)=>{this._removeDelegatedListener(v,p,o),k(...M)}}this._saveDelegatedListener(v,g);for(const x in g.delegates)this.once(x,g.delegates[x]);return this}off(v,t,o){return o===void 0?super.off(v,t):(this._removeDelegatedListener(v,typeof t=="string"?[t]:t,o),this)}queryRenderedFeatures(v,t){if(!this.style)return[];let o;const p=v instanceof s.P||Array.isArray(v),g=p?v:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(p?{}:v)||{},g instanceof s.P||typeof g[0]=="number")o=[s.P.convert(g)];else{const x=s.P.convert(g[0]),k=s.P.convert(g[1]);o=[x,new s.P(k.x,x.y),k,new s.P(x.x,k.y),x]}return this.style.queryRenderedFeatures(o,t,this.transform)}querySourceFeatures(v,t){return this.style.querySourceFeatures(v,t)}setStyle(v,t){return(t=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(v,t))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const t=this._locale[v];if(t==null)throw new Error(`Missing UI string '${v}'`);return t}_updateStyle(v,t){var o,p;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(v,t)));const g=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new lr(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,t,g):this.style.loadJSON(v,t,g),this):((p=(o=this.style)===null||o===void 0?void 0:o.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new lr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,t){if(typeof v=="string"){const o=this._requestManager.transformRequest(v,"Style");s.j(o,new AbortController).then((p=>{this._updateDiff(p.data,t)})).catch((p=>{p&&this.fire(new s.k(p))}))}else typeof v=="object"&&this._updateDiff(v,t)}_updateDiff(v,t){try{this.style.setState(v,t)&&this._update(!0)}catch(o){s.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(v,t)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(v,t){return this._lazyInitEmptyStyle(),this.style.addSource(v,t),this._update(!0)}isSourceLoaded(v){const t=this.style&&this.style.tileManagers[v];if(t!==void 0)return t.loaded();this.fire(new s.k(new Error(`There is no tile manager with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const t=this.style.tileManagers[v.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&t.reload();for(const o in this.style._layers){const p=this.style._layers[o];p.type==="hillshade"&&p.source===v.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===v.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ui(this.painter,t,v),this.painter.renderToTexture=new fo(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var p;o.dataType==="style"?this.terrain.tileManager.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==v.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=o.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:v})),this}getTerrain(){var v,t;return(t=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const v=this.style&&this.style.tileManagers;for(const t of Object.values(v))if(!t.areTilesLoaded())return!1;return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}setSourceTileLodParams(v,t,o){if(o){const p=this.getSource(o);if(!p)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);p.calculateTileZoom=Ot(Math.max(1,v),Math.max(1,t))}else for(const p in this.style.tileManagers)this.style.tileManagers[p].getSource().calculateTileZoom=Ot(Math.max(1,v),Math.max(1,t));return this._update(!0),this}refreshTiles(v,t){const o=this.style.tileManagers[v];if(!o)throw new Error(`There is no tile manager with ID "${v}", cannot refresh tile`);t===void 0?o.reload(!0):o.refreshTiles(t.map((p=>new s.ac(p.z,p.x,p.y))))}addImage(v,t,o={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:x,stretchY:k,content:M,textFitWidth:C,textFitHeight:A}=o;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||s.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:B,data:$}=t,G=t;return this.style.addImage(v,{data:new s.R({width:R,height:B},new Uint8Array($)),pixelRatio:p,stretchX:x,stretchY:k,content:M,textFitWidth:C,textFitHeight:A,sdf:g,version:0,userImage:G}),G.onAdd&&G.onAdd(this,v),this}}{const{width:R,height:B,data:$}=W.getImageData(t);this.style.addImage(v,{data:new s.R({width:R,height:B},$),pixelRatio:p,stretchX:x,stretchY:k,content:M,textFitWidth:C,textFitHeight:A,sdf:g,version:0})}}updateImage(v,t){const o=this.style.getImage(v);if(!o)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=t instanceof HTMLImageElement||s.b(t)?W.getImageData(t):t,{width:g,height:x,data:k}=p;if(g===void 0||x===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==o.data.width||x!==o.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(t instanceof HTMLImageElement||s.b(t));return o.data.replace(k,M),this.style.updateImage(v,o),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return Ne.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,t){return this._lazyInitEmptyStyle(),this.style.addLayer(v,t),this._update(!0)}moveLayer(v,t){return this.style.moveLayer(v,t),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,t,o){return this.style.setLayerZoomRange(v,t,o),this._update(!0)}setFilter(v,t,o={}){return this.style.setFilter(v,t,o),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,t,o,p={}){return this.style.setPaintProperty(v,t,o,p),this._update(!0)}getPaintProperty(v,t){return this.style.getPaintProperty(v,t)}setLayoutProperty(v,t,o,p={}){return this.style.setLayoutProperty(v,t,o,p),this._update(!0)}getLayoutProperty(v,t){return this.style.getLayoutProperty(v,t)}setGlyphs(v,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,t,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,t,o,(p=>{p||this._update(!0)})),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,t,(o=>{o||this._update(!0)})),this}setLight(v,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(v,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(v,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,t){return this.style.setFeatureState(v,t),this._update()}removeFeatureState(v,t){return this.style.removeFeatureState(v,t),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,t=0;return this._container&&(v=this._container.clientWidth||400,t=this._container.clientHeight||300),[v,t]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const t=this._canvasContainer=U.create("div","maplibregl-canvas-container",v);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=U.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),p=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],p);const g=this._controlContainer=U.create("div","maplibregl-control-container",v),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((k=>{x[k]=U.create("div",`maplibregl-ctrl-${k} `,g)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,t,o){this._canvas.width=Math.floor(o*v),this._canvas.height=Math.floor(o*t),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const v=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(p=>{t={requestedAttributes:v},p&&(t.statusMessage=p.statusMessage,t.type=p.type)}),{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,v):this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v),!o){const p="Failed to initialize WebGL";throw t?(t.message=p,new Error(JSON.stringify(t))):new Error(p)}this.painter=new Hc(o,this.transform),_e.testSupport(o)}migrateProjection(v,t){super.migrateProjection(v,t),this.painter.transform=v,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){var t,o,p,g,x;const k=this._idleTriggered?this._fadeDuration:0,M=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let C=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const B=this.transform.zoom,$=te();this.style.zoomHistory.update(B,$);const G=new s.H(B,{now:$,fadeDuration:k,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),K=G.crossFadingFactor();K===1&&K===this._crossFadingFactor||(C=!0,this._crossFadingFactor=K),this.style.update(G)}const A=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==M;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((g=this.style.projection)===null||g===void 0?void 0:g.transitionState,(x=this.style.projection)===null||x===void 0?void 0:x.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||A)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,k,this._crossSourceCollisions,A),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:k,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cG.mark(s.cH.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||C)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const R=this._sourcesDirty||this._styleDirty||this._placementDirty;return R||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,s.cG.mark(s.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ne.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t?.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),U.remove(this._canvasContainer),U.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cG.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,W.frame(this._frameRequest,(v=>{s.cG.frame(v),this._frameRequest=null;try{this._render(v)}catch(t){if(!s.Z(t)&&!(function(o){return o.message===Ou})(t))throw t}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return ed}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(v){return this._lazyInitEmptyStyle(),this.style.setProjection(v),this._update(!0)}},h.MapMouseEvent=Gi,h.MapTouchEvent=ao,h.MapWheelEvent=Yc,h.Marker=go,h.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const t=this._map.getZoom(),o=t===this._map.getMaxZoom(),p=t===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,o)=>{const p=this._map._getUIString(`NavigationControl.${o}`);t.title=p,t.setAttribute("aria-label",p)},this.options=s.e({},td,v),this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),U.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),U.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=U.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new po(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){U.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,t){const o=U.create("button",v,this._container);return o.type="button",o.addEventListener("click",t),o}},h.Popup=class extends s.E{constructor(v){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&U.remove(this._content),this._container&&(U.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=U.create("div","maplibregl-popup",this._map.getContainer()),this._tip=U.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const k of this.options.className.split(" "))this._container.classList.add(k);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Ll(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const o=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const g=Il(this.options.offset);if(!p){const k=this._container.offsetWidth,M=this._container.offsetHeight;let C;C=o.y+g.bottom.y<M?["top"]:o.y>this._map.transform.height-M?["bottom"]:[],o.x<k/2?C.push("left"):o.x>this._map.transform.width-k/2&&C.push("right"),p=C.length===0?"bottom":C.join("-")}let x=o.add(g[p]);this.options.subpixelPositioning||(x=x.round()),U.setTransform(this._container,`${mo[p]} translate(${x.x}px,${x.y}px)`),Dl(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(ad),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=s.V.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const t=document.createDocumentFragment(),o=document.createElement("body");let p;for(o.innerHTML=v;p=o.firstChild,p;)t.appendChild(p);return this.setDOMContent(t)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=U.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=U.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Al);v&&v.focus()}},h.RasterDEMTileSource=Ra,h.RasterTileSource=Rr,h.ScaleControl=class{constructor(v){this._onMove=()=>{_o(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,_o(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},nd),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){U.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=Tl,h.Style=lr,h.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=U.create("button","maplibregl-ctrl-terrain",this._container),U.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){U.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=eh,h.TwoFingersTouchRotateHandler=Yu,h.TwoFingersTouchZoomHandler=Ku,h.TwoFingersTouchZoomRotateHandler=uo,h.VectorTileSource=tr,h.VideoSource=we,h.addSourceType=(v,t)=>s._(void 0,void 0,void 0,(function*(){if(J(v))throw new Error(`A source type called "${v}" already exists.`);((o,p)=>{H[o]=p})(v,t)})),h.clearPrewarmedResources=function(){const v=Qn;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Ji),Qn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.createTileMesh=fc,h.getMaxParallelImageRequests=function(){return s.c.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return be().getRTLTextPluginStatus()},h.getVersion=function(){return rd},h.getWorkerCount=function(){return oi.workerCount},h.getWorkerUrl=function(){return s.c.WORKER_URL},h.importScriptInWorkers=function(v){return er().broadcast("IS",v)},h.isTimeFrozen=function(){return Q.isFrozen()},h.now=te,h.prewarm=function(){ba().acquire(Ji)},h.restoreNow=function(){Q.restoreNow()},h.setMaxParallelImageRequests=function(v){s.c.MAX_PARALLEL_IMAGE_REQUESTS=v},h.setNow=function(v){Q.setNow(v)},h.setRTLTextPlugin=function(v,t){return be().setRTLTextPlugin(v,t)},h.setWorkerCount=function(v){oi.workerCount=v},h.setWorkerUrl=function(v){s.c.WORKER_URL=v}}));var f=l;return f}))})(Qh)),Qh.exports}var _k=gk();const yk=fk(_k);(function(r,i,l){function c(u,f){for(;(u=u.parentElement)&&!u.classList.contains(f););return u}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(u,f){this._map=u,this._container=u._container,this._overlayPane=u._panes.overlayPane,this._popupPane=u._panes.popupPane,f&&f.shapeOptions&&(f.shapeOptions=L.Util.extend({},this.options.shapeOptions,f.shapeOptions)),L.setOptions(this,f);var h=L.version.split(".");parseInt(h[0],10)===1&&parseInt(h[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(L.DomUtil.disableTextSelection(),u.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(u){L.setOptions(this,u)},_fireCreatedEvent:function(u){this._map.fire(L.Draw.Event.CREATED,{layer:u,layerType:this.type})},_cancelDrawing:function(u){u.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(u,f){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,f&&f.drawError&&(f.drawError=L.Util.extend({},this.options.drawError,f.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,u,f)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var u=this._markers.pop(),f=this._poly,h=f.getLatLngs(),s=h.splice(-1,1)[0];this._poly.setLatLngs(h),this._markerGroup.removeLayer(u),f.getLatLngs().length<2&&this._map.removeLayer(f),this._vertexChanged(s,!1)}},addVertex:function(u){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(u))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(u)),this._poly.addLatLng(u),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(u,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var u=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),f=this._poly.newLatLngIntersects(u[u.length-1]);if(!this.options.allowIntersection&&f||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(u){var f=this._map.mouseEventToLayerPoint(u.originalEvent),h=this._map.layerPointToLatLng(f);this._currentLatLng=h,this._updateTooltip(h),this._updateGuide(f),this._mouseMarker.setLatLng(h),L.DomEvent.preventDefault(u.originalEvent)},_vertexChanged:function(u,f){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(u,f),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(u){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(u),this._clickHandled=!0,this._disableNewMarkers();var f=u.originalEvent,h=f.clientX,s=f.clientY;this._startPoint.call(this,h,s)}},_startPoint:function(u,f){this._mouseDownOrigin=L.point(u,f)},_onMouseUp:function(u){var f=u.originalEvent,h=f.clientX,s=f.clientY;this._endPoint.call(this,h,s,u),this._clickHandled=null},_endPoint:function(u,f,h){if(this._mouseDownOrigin){var s=L.point(u,f).distanceTo(this._mouseDownOrigin),w=this._calculateFinishDistance(h.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(h.latlng),this._finishShape()):w<10&&L.Browser.touch?this._finishShape():Math.abs(s)<9*(r.devicePixelRatio||1)&&this.addVertex(h.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(u){var f,h,s=u.originalEvent;!s.touches||!s.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(f=s.touches[0].clientX,h=s.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,f,h),this._endPoint.call(this,f,h,u),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(u){var f;if(this._markers.length>0){var h;if(this.type===L.Draw.Polyline.TYPE)h=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;h=this._markers[0]}var s=this._map.latLngToContainerPoint(h.getLatLng()),w=new L.Marker(u,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),T=this._map.latLngToContainerPoint(w.getLatLng());f=s.distanceTo(T)}else f=1/0;return f},_updateFinishHandler:function(){var u=this._markers.length;u>1&&this._markers[u-1].on("click",this._finishShape,this),u>2&&this._markers[u-2].off("click",this._finishShape,this)},_createMarker:function(u){var f=new L.Marker(u,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(f),f},_updateGuide:function(u){var f=this._markers?this._markers.length:0;f>0&&(u=u||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[f-1].getLatLng()),u))},_updateTooltip:function(u){var f=this._getTooltipText();u&&this._tooltip.updatePosition(u),this._errorShown||this._tooltip.updateContent(f)},_drawGuide:function(u,f){var h,s,w,T=Math.floor(Math.sqrt(Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2))),E=this.options.guidelineDistance,z=this.options.maxGuideLineLength,O=T>z?T-z:E;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));O<T;O+=this.options.guidelineDistance)h=O/T,s={x:Math.floor(u.x*(1-h)+h*f.x),y:Math.floor(u.y*(1-h)+h*f.y)},w=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),w.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(w,s)},_updateGuideColor:function(u){if(this._guidesContainer)for(var f=0,h=this._guidesContainer.childNodes.length;f<h;f++)this._guidesContainer.childNodes[f].style.backgroundColor=u},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var u,f,h=this.options.showLength;return this._markers.length===0?u={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(f=h?this._getMeasurementString():"",u=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:f}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:f}),u},_updateRunningMeasure:function(u,f){var h,s,w=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(h=w-(f?2:1),s=L.GeometryUtil.isVersion07x()?u.distanceTo(this._markers[h].getLatLng())*(this.options.factor||1):this._map.distance(u,this._markers[h].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=s*(f?1:-1))},_getMeasurementString:function(){var u,f=this._currentLatLng,h=this._markers[this._markers.length-1].getLatLng();return u=L.GeometryUtil.isVersion07x()?h&&f&&f.distanceTo?this._measurementRunningTotal+f.distanceTo(h)*(this.options.factor||1):this._measurementRunningTotal||0:h&&f?this._measurementRunningTotal+this._map.distance(f,h)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(u,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var u=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(u,f){L.Draw.Polyline.prototype.initialize.call(this,u,f),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var u=this._markers.length;u===1&&this._markers[0].on("click",this._finishShape,this),u>2&&(this._markers[u-1].on("dblclick",this._finishShape,this),u>3&&this._markers[u-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var u,f;return this._markers.length===0?u=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(u=L.drawLocal.draw.handlers.polygon.tooltip.cont,f=this._getMeasurementString()):(u=L.drawLocal.draw.handlers.polygon.tooltip.end,f=this._getMeasurementString()),{text:u,subtext:f}},_getMeasurementString:function(){var u=this._area,f="";return u||this.options.showLength?(this.options.showLength&&(f=L.Draw.Polyline.prototype._getMeasurementString.call(this)),u&&(f+="<br>"+L.GeometryUtil.readableArea(u,this.options.metric,this.options.precision)),f):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(u,f){var h;!this.options.allowIntersection&&this.options.showArea&&(h=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(h)),L.Draw.Polyline.prototype._vertexChanged.call(this,u,f)},_cleanUpShape:function(){var u=this._markers.length;u>0&&(this._markers[0].off("click",this._finishShape,this),u>2&&this._markers[u-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(u,f){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,u,f)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),i.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(i,"mouseup",this._onMouseUp,this),L.DomEvent.off(i,"touchend",this._onMouseUp,this),i.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(u){this._isDrawing=!0,this._startLatLng=u.latlng,L.DomEvent.on(i,"mouseup",this._onMouseUp,this).on(i,"touchend",this._onMouseUp,this).preventDefault(u.originalEvent)},_onMouseMove:function(u){var f=u.latlng;this._tooltip.updatePosition(f),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(f))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(u,f){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,u,f)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(u){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!c(u.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(u){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,u)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,u),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var u=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,u)},_getTooltipText:function(){var u,f,h,s=L.Draw.SimpleShape.prototype._getTooltipText.call(this),w=this._shape,T=this.options.showArea;return w&&(u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),f=L.GeometryUtil.geodesicArea(u),h=T?L.GeometryUtil.readableArea(f,this.options.metric):""),{text:s.text,subtext:h}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(u,f){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,u,f)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(u){var f=u.latlng;this._tooltip.updatePosition(f),this._mouseMarker.setLatLng(f),this._marker?(f=this._mouseMarker.getLatLng(),this._marker.setLatLng(f)):(this._marker=this._createMarker(f),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(u){return new L.Marker(u,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(u){this._onMouseMove(u),this._onClick()},_fireCreatedEvent:function(){var u=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(u,f){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,u,f)},_fireCreatedEvent:function(){var u=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)},_createMarker:function(u){return new L.CircleMarker(u,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(u,f){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,u,f)},_drawShape:function(u){if(L.GeometryUtil.isVersion07x())var f=this._startLatLng.distanceTo(u);else var f=this._map.distance(this._startLatLng,u);this._shape?this._shape.setRadius(f):(this._shape=new L.Circle(this._startLatLng,f,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var u=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,u)},_onMouseMove:function(u){var f,h=u.latlng,s=this.options.showRadius,w=this.options.metric;if(this._tooltip.updatePosition(h),this._isDrawing){this._drawShape(h),f=this._shape.getRadius().toFixed(1);var T="";s&&(T=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(f,w,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:T})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(u,f){this._marker=u,L.setOptions(this,f)},addHooks:function(){var u=this._marker;u.dragging.enable(),u.on("dragend",this._onDragEnd,u),this._toggleMarkerHighlight()},removeHooks:function(){var u=this._marker;u.dragging.disable(),u.off("dragend",this._onDragEnd,u),this._toggleMarkerHighlight()},_onDragEnd:function(u){var f=u.target;f.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:f})},_toggleMarkerHighlight:function(){var u=this._marker._icon;u&&(u.style.display="none",L.DomUtil.hasClass(u,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(u,"leaflet-edit-marker-selected"),this._offsetMarker(u,-4)):(L.DomUtil.addClass(u,"leaflet-edit-marker-selected"),this._offsetMarker(u,4)),u.style.display="")},_offsetMarker:function(u,f){var h=parseInt(u.style.marginTop,10)-f,s=parseInt(u.style.marginLeft,10)-f;u.style.marginTop=h+"px",u.style.marginLeft=s+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(u){this.latlngs=[u._latlngs],u._holes&&(this.latlngs=this.latlngs.concat(u._holes)),this._poly=u,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(u){for(var f=0;f<this._verticesHandlers.length;f++)u(this._verticesHandlers[f])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(u){u.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(u){u.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(u){u.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var u=0;u<this.latlngs.length;u++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[u],this._poly.options.poly))},_updateLatLngs:function(u){this.latlngs=[u.layer._latlngs],u.layer._holes&&(this.latlngs=this.latlngs.concat(u.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(u,f,h){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=u,h&&h.drawError&&(h.drawError=L.Util.extend({},this.options.drawError,h.drawError)),this._latlngs=f,L.setOptions(this,h)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var u=this._poly,f=u._path;u instanceof L.Polygon||(u.options.fill=!1,u.options.editing&&(u.options.editing.fill=!1)),f&&u.options.editing&&u.options.editing.className&&(u.options.original.className&&u.options.original.className.split(" ").forEach(function(h){L.DomUtil.removeClass(f,h)}),u.options.editing.className.split(" ").forEach(function(h){L.DomUtil.addClass(f,h)})),u.setStyle(u.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var u=this._poly,f=u._path;f&&u.options.editing&&u.options.editing.className&&(u.options.editing.className.split(" ").forEach(function(h){L.DomUtil.removeClass(f,h)}),u.options.original.className&&u.options.original.className.split(" ").forEach(function(h){L.DomUtil.addClass(f,h)})),u.setStyle(u.options.original),u._map&&(u._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var u,f,h,s,w=this._defaultShape();for(u=0,h=w.length;u<h;u++)s=this._createMarker(w[u],u),s.on("click",this._onMarkerClick,this),s.on("contextmenu",this._onContextMenu,this),this._markers.push(s);var T,E;for(u=0,f=h-1;u<h;f=u++)(u!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(T=this._markers[f],E=this._markers[u],this._createMiddleMarker(T,E),this._updatePrevNext(T,E))},_createMarker:function(u,f){var h=new L.Marker.Touch(u,{draggable:!0,icon:this.options.icon});return h._origLatLng=u,h._index=f,h.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(h),h},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var u=this._defaultShape(),f=[].splice.apply(u,arguments);return this._poly._convertLatLngs(u,!0),this._poly.redraw(),f},_removeMarker:function(u){var f=u._index;this._markerGroup.removeLayer(u),this._markers.splice(f,1),this._spliceLatLngs(f,1),this._updateIndexes(f,-1),u.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(u){var f=u.target,h=this._poly,s=L.LatLngUtil.cloneLatLng(f._origLatLng);if(L.extend(f._origLatLng,f._latlng),h.options.poly){var w=h._map._editTooltip;if(!h.options.poly.allowIntersection&&h.intersects()){L.extend(f._origLatLng,s),f.setLatLng(s);var T=h.options.color;h.setStyle({color:this.options.drawError.color}),w&&w.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){h.setStyle({color:T}),w&&w.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}f._middleLeft&&f._middleLeft.setLatLng(this._getMiddleLatLng(f._prev,f)),f._middleRight&&f._middleRight.setLatLng(this._getMiddleLatLng(f,f._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var E=this._poly.getLatLngs();this._poly._convertLatLngs(E,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(u){var f=L.Polygon&&this._poly instanceof L.Polygon?4:3,h=u.target;this._defaultShape().length<f||(this._removeMarker(h),this._updatePrevNext(h._prev,h._next),h._middleLeft&&this._markerGroup.removeLayer(h._middleLeft),h._middleRight&&this._markerGroup.removeLayer(h._middleRight),h._prev&&h._next?this._createMiddleMarker(h._prev,h._next):h._prev?h._next||(h._prev._middleRight=null):h._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(u){var f=u.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:f,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(u){var f=this._map.mouseEventToLayerPoint(u.originalEvent.touches[0]),h=this._map.layerPointToLatLng(f),s=u.target;L.extend(s._origLatLng,h),s._middleLeft&&s._middleLeft.setLatLng(this._getMiddleLatLng(s._prev,s)),s._middleRight&&s._middleRight.setLatLng(this._getMiddleLatLng(s,s._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(u,f){this._markerGroup.eachLayer(function(h){h._index>u&&(h._index+=f)})},_createMiddleMarker:function(u,f){var h,s,w,T=this._getMiddleLatLng(u,f),E=this._createMarker(T);E.setOpacity(.6),u._middleRight=f._middleLeft=E,s=function(){E.off("touchmove",s,this);var z=f._index;E._index=z,E.off("click",h,this).on("click",this._onMarkerClick,this),T.lat=E.getLatLng().lat,T.lng=E.getLatLng().lng,this._spliceLatLngs(z,0,T),this._markers.splice(z,0,E),E.setOpacity(1),this._updateIndexes(z,1),f._index++,this._updatePrevNext(u,E),this._updatePrevNext(E,f),this._poly.fire("editstart")},w=function(){E.off("dragstart",s,this),E.off("dragend",w,this),E.off("touchmove",s,this),this._createMiddleMarker(u,E),this._createMiddleMarker(E,f)},h=function(){s.call(this),w.call(this),this._fireEdit()},E.on("click",h,this).on("dragstart",s,this).on("dragend",w,this).on("touchmove",s,this),this._markerGroup.addLayer(E)},_updatePrevNext:function(u,f){u&&(u._next=f),f&&(f._prev=u)},_getMiddleLatLng:function(u,f){var h=this._poly._map,s=h.project(u.getLatLng()),w=h.project(f.getLatLng());return h.unproject(s._add(w)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(u,f){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=u,L.Util.setOptions(this,f)},addHooks:function(){var u=this._shape;this._shape._map&&(this._map=this._shape._map,u.setStyle(u.options.editing),u._map&&(this._map=u._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var u=this._shape;if(u.setStyle(u.options.original),u._map){this._unbindMarker(this._moveMarker);for(var f=0,h=this._resizeMarkers.length;f<h;f++)this._unbindMarker(this._resizeMarkers[f]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(u,f){var h=new L.Marker.Touch(u,{draggable:!0,icon:f,zIndexOffset:10});return this._bindMarker(h),this._markerGroup.addLayer(h),h},_bindMarker:function(u){u.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(u){u.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(u){u.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(u){var f=u.target,h=f.getLatLng();f===this._moveMarker?this._move(h):this._resize(h),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(u){u.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(u){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,u),typeof this._getCorners=="function"){var f=this._getCorners(),h=u.target,s=h._cornerIndex;h.setOpacity(0),this._oppositeCorner=f[(s+2)%4],this._toggleCornerMarkers(0,s)}this._shape.fire("editstart")},_onTouchMove:function(u){var f=this._map.mouseEventToLayerPoint(u.originalEvent.touches[0]),h=this._map.layerPointToLatLng(f);return u.target===this._moveMarker?this._move(h):this._resize(h),this._shape.redraw(),!1},_onTouchEnd:function(u){u.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var u=this._shape.getBounds(),f=u.getCenter();this._moveMarker=this._createMarker(f,this.options.moveIcon)},_createResizeMarker:function(){var u=this._getCorners();this._resizeMarkers=[];for(var f=0,h=u.length;f<h;f++)this._resizeMarkers.push(this._createMarker(u[f],this.options.resizeIcon)),this._resizeMarkers[f]._cornerIndex=f},_onMarkerDragStart:function(u){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,u);var f=this._getCorners(),h=u.target,s=h._cornerIndex;this._oppositeCorner=f[(s+2)%4],this._toggleCornerMarkers(0,s)},_onMarkerDragEnd:function(u){var f,h,s=u.target;s===this._moveMarker&&(f=this._shape.getBounds(),h=f.getCenter(),s.setLatLng(h)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,u)},_move:function(u){for(var f,h=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),s=this._shape.getBounds(),w=s.getCenter(),T=[],E=0,z=h.length;E<z;E++)f=[h[E].lat-w.lat,h[E].lng-w.lng],T.push([u.lat+f[0],u.lng+f[1]]);this._shape.setLatLngs(T),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(u){var f;this._shape.setBounds(L.latLngBounds(u,this._oppositeCorner)),f=this._shape.getBounds(),this._moveMarker.setLatLng(f.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var u=this._shape.getBounds();return[u.getNorthWest(),u.getNorthEast(),u.getSouthEast(),u.getSouthWest()]},_toggleCornerMarkers:function(u){for(var f=0,h=this._resizeMarkers.length;f<h;f++)this._resizeMarkers[f].setOpacity(u)},_repositionCornerMarkers:function(){for(var u=this._getCorners(),f=0,h=this._resizeMarkers.length;f<h;f++)this._resizeMarkers[f].setLatLng(u[f])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var u=this._shape.getLatLng();this._moveMarker=this._createMarker(u,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(u){if(this._resizeMarkers.length){var f=this._getResizeMarkerPoint(u);this._resizeMarkers[0].setLatLng(f)}this._shape.setLatLng(u),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var u=this._shape.getLatLng(),f=this._getResizeMarkerPoint(u);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(f,this.options.resizeIcon))},_getResizeMarkerPoint:function(u){var f=this._shape._radius*Math.cos(Math.PI/4),h=this._map.project(u);return this._map.unproject([h.x+f,h.y-f])},_resize:function(u){var f=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=f.distanceTo(u):radius=this._map.distance(f,u),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(u,f){var h={};if(u.touches!==void 0){if(!u.touches.length)return;h=u.touches[0]}else if(u.pointerType!=="touch"||(h=u,!this._filterClick(u)))return;var s=this._map.mouseEventToContainerPoint(h),w=this._map.mouseEventToLayerPoint(h),T=this._map.layerPointToLatLng(w);this._map.fire(f,{latlng:T,layerPoint:w,containerPoint:s,pageX:h.pageX,pageY:h.pageY,originalEvent:u})},_filterClick:function(u){var f=u.timeStamp||u.originalEvent.timeStamp,h=L.DomEvent._lastClick&&f-L.DomEvent._lastClick;return h&&h>100&&h<500||u.target._simulatedClick&&!u._simulated?(L.DomEvent.stop(u),!1):(L.DomEvent._lastClick=f,!0)},_onTouchStart:function(u){this._map._loaded&&this._touchEvent(u,"touchstart")},_onTouchEnd:function(u){this._map._loaded&&this._touchEvent(u,"touchend")},_onTouchCancel:function(u){if(this._map._loaded){var f="touchcancel";this._detectIE()&&(f="pointercancel"),this._touchEvent(u,f)}},_onTouchLeave:function(u){this._map._loaded&&this._touchEvent(u,"touchleave")},_onTouchMove:function(u){this._map._loaded&&this._touchEvent(u,"touchmove")},_detectIE:function(){var u=r.navigator.userAgent,f=u.indexOf("MSIE ");if(f>0)return parseInt(u.substring(f+5,u.indexOf(".",f)),10);if(u.indexOf("Trident/")>0){var h=u.indexOf("rv:");return parseInt(u.substring(h+3,u.indexOf(".",h)),10)}var s=u.indexOf("Edge/");return s>0&&parseInt(u.substring(s+5,u.indexOf(".",s)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var u=this._icon,f=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?f.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):f.concat(["touchcancel"]),L.DomUtil.addClass(u,"leaflet-clickable"),L.DomEvent.on(u,"click",this._onMouseClick,this),L.DomEvent.on(u,"keypress",this._onKeyPress,this);for(var h=0;h<f.length;h++)L.DomEvent.on(u,f[h],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var u=r.navigator.userAgent,f=u.indexOf("MSIE ");if(f>0)return parseInt(u.substring(f+5,u.indexOf(".",f)),10);if(u.indexOf("Trident/")>0){var h=u.indexOf("rv:");return parseInt(u.substring(h+3,u.indexOf(".",h)),10)}var s=u.indexOf("Edge/");return s>0&&parseInt(u.substring(s+5,u.indexOf(".",s)),10)}}),L.LatLngUtil={cloneLatLngs:function(u){for(var f=[],h=0,s=u.length;h<s;h++)Array.isArray(u[h])?f.push(L.LatLngUtil.cloneLatLngs(u[h])):f.push(this.cloneLatLng(u[h]));return f},cloneLatLng:function(u){return L.latLng(u.lat,u.lng)}},(function(){var u={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(f){var h,s,w=f.length,T=0,E=Math.PI/180;if(w>2){for(var z=0;z<w;z++)h=f[z],s=f[(z+1)%w],T+=(s.lng-h.lng)*E*(2+Math.sin(h.lat*E)+Math.sin(s.lat*E));T=6378137*T*6378137/2}return Math.abs(T)},formattedNumber:function(f,h){var s=parseFloat(f).toFixed(h),w=L.drawLocal.format&&L.drawLocal.format.numeric,T=w&&w.delimiters,E=T&&T.thousands,z=T&&T.decimal;if(E||z){var O=s.split(".");s=E?O[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+E):O[0],z=z||".",O.length>1&&(s=s+z+O[1])}return s},readableArea:function(f,h,E){var w,T,E=L.Util.extend({},u,E);return h?(T=["ha","m"],type=typeof h,type==="string"?T=[h]:type!=="boolean"&&(T=h),w=f>=1e6&&T.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*f,E.km)+" km":f>=1e4&&T.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*f,E.ha)+" ha":L.GeometryUtil.formattedNumber(f,E.m)+" m"):(f/=.836127,w=f>=3097600?L.GeometryUtil.formattedNumber(f/3097600,E.mi)+" mi":f>=4840?L.GeometryUtil.formattedNumber(f/4840,E.ac)+" acres":L.GeometryUtil.formattedNumber(f,E.yd)+" yd"),w},readableDistance:function(f,h,s,w,z){var E,z=L.Util.extend({},u,z);switch(h?typeof h=="string"?h:"metric":s?"feet":w?"nauticalMile":"yards"){case"metric":E=f>1e3?L.GeometryUtil.formattedNumber(f/1e3,z.km)+" km":L.GeometryUtil.formattedNumber(f,z.m)+" m";break;case"feet":f*=3.28083,E=L.GeometryUtil.formattedNumber(f,z.ft)+" ft";break;case"nauticalMile":f*=.53996,E=L.GeometryUtil.formattedNumber(f/1e3,z.nm)+" nm";break;case"yards":default:f*=1.09361,E=f>1760?L.GeometryUtil.formattedNumber(f/1760,z.mi)+" miles":L.GeometryUtil.formattedNumber(f,z.yd)+" yd"}return E},isVersion07x:function(){var f=L.version.split(".");return parseInt(f[0],10)===0&&parseInt(f[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(u,f,h,s){return this._checkCounterclockwise(u,h,s)!==this._checkCounterclockwise(f,h,s)&&this._checkCounterclockwise(u,f,h)!==this._checkCounterclockwise(u,f,s)},_checkCounterclockwise:function(u,f,h){return(h.y-u.y)*(f.x-u.x)>(f.y-u.y)*(h.x-u.x)}}),L.Polyline.include({intersects:function(){var u,f,h,s=this._getProjectedPoints(),w=s?s.length:0;if(this._tooFewPointsForIntersection())return!1;for(u=w-1;u>=3;u--)if(f=s[u-1],h=s[u],this._lineSegmentsIntersectsRange(f,h,u-2))return!0;return!1},newLatLngIntersects:function(u,f){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(u),f)},newPointIntersects:function(u,f){var h=this._getProjectedPoints(),s=h?h.length:0,w=h?h[s-1]:null,T=s-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(w,u,T,f?1:0)},_tooFewPointsForIntersection:function(u){var f=this._getProjectedPoints(),h=f?f.length:0;return h+=u||0,!f||h<=3},_lineSegmentsIntersectsRange:function(u,f,h,s){var w,T,E=this._getProjectedPoints();s=s||0;for(var z=h;z>s;z--)if(w=E[z-1],T=E[z],L.LineUtil.segmentsIntersect(u,f,w,T))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var u=[],f=this._defaultShape(),h=0;h<f.length;h++)u.push(this._map.latLngToLayerPoint(f[h]));return u}}),L.Polygon.include({intersects:function(){var u,f,h,s,w=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(u=w.length,f=w[0],h=w[u-1],s=u-2,this._lineSegmentsIntersectsRange(h,f,s,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(u){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,u);var f;this._toolbars={},L.DrawToolbar&&this.options.draw&&(f=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=f,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(f=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=f,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(u){var f,h=L.DomUtil.create("div","leaflet-draw"),s=!1;for(var w in this._toolbars)this._toolbars.hasOwnProperty(w)&&(f=this._toolbars[w].addToolbar(u))&&(s||(L.DomUtil.hasClass(f,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(f.childNodes[0],"leaflet-draw-toolbar-top"),s=!0),h.appendChild(f));return h},onRemove:function(){for(var u in this._toolbars)this._toolbars.hasOwnProperty(u)&&this._toolbars[u].removeToolbar()},setDrawingOptions:function(u){for(var f in this._toolbars)this._toolbars[f]instanceof L.DrawToolbar&&this._toolbars[f].setOptions(u)},_toolbarEnabled:function(u){var f=u.target;for(var h in this._toolbars)this._toolbars[h]!==f&&this._toolbars[h].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(u){L.setOptions(this,u),this._modes={},this._actionButtons=[],this._activeMode=null;var f=L.version.split(".");parseInt(f[0],10)===1&&parseInt(f[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(u){var f,h=L.DomUtil.create("div","leaflet-draw-section"),s=0,w=this._toolbarClass||"",T=this.getModeHandlers(u);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=u,f=0;f<T.length;f++)T[f].enabled&&this._initModeHandler(T[f].handler,this._toolbarContainer,s++,w,T[f].title);if(s)return this._lastButtonIndex=--s,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),h.appendChild(this._toolbarContainer),h.appendChild(this._actionsContainer),h},removeToolbar:function(){for(var u in this._modes)this._modes.hasOwnProperty(u)&&(this._disposeButton(this._modes[u].button,this._modes[u].handler.enable,this._modes[u].handler),this._modes[u].handler.disable(),this._modes[u].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var f=0,h=this._actionButtons.length;f<h;f++)this._disposeButton(this._actionButtons[f].button,this._actionButtons[f].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(u,f,h,s,w){var T=u.type;this._modes[T]={},this._modes[T].handler=u,this._modes[T].button=this._createButton({type:T,title:w,className:s+"-"+T,container:f,callback:this._modes[T].handler.enable,context:this._modes[T].handler}),this._modes[T].buttonIndex=h,this._modes[T].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!r.MSStream},_createButton:function(u){var f=L.DomUtil.create("a",u.className||"",u.container),h=L.DomUtil.create("span","sr-only",u.container);f.href="#",f.appendChild(h),u.title&&(f.title=u.title,h.innerHTML=u.title),u.text&&(f.innerHTML=u.text,h.innerHTML=u.text);var s=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(f,"click",L.DomEvent.stopPropagation).on(f,"mousedown",L.DomEvent.stopPropagation).on(f,"dblclick",L.DomEvent.stopPropagation).on(f,"touchstart",L.DomEvent.stopPropagation).on(f,"click",L.DomEvent.preventDefault).on(f,s,u.callback,u.context),f},_disposeButton:function(u,f){var h=this._detectIOS()?"touchstart":"click";L.DomEvent.off(u,"click",L.DomEvent.stopPropagation).off(u,"mousedown",L.DomEvent.stopPropagation).off(u,"dblclick",L.DomEvent.stopPropagation).off(u,"touchstart",L.DomEvent.stopPropagation).off(u,"click",L.DomEvent.preventDefault).off(u,h,f)},_handlerActivated:function(u){this.disable(),this._activeMode=this._modes[u.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(u){var f,h,s,w,T=this._actionsContainer,E=this.getActions(u),z=E.length;for(h=0,s=this._actionButtons.length;h<s;h++)this._disposeButton(this._actionButtons[h].button,this._actionButtons[h].callback);for(this._actionButtons=[];T.firstChild;)T.removeChild(T.firstChild);for(var O=0;O<z;O++)"enabled"in E[O]&&!E[O].enabled||(f=L.DomUtil.create("li","",T),w=this._createButton({title:E[O].title,text:E[O].text,container:f,callback:E[O].callback,context:E[O].context}),this._actionButtons.push({button:w,callback:E[O].callback}))},_showActionsToolbar:function(){var u=this._activeMode.buttonIndex,f=this._lastButtonIndex,h=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=h+"px",u===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),u===f&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(u){this._map=u,this._popupPane=u._panes.popupPane,this._visible=!1,this._container=u.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(u){return this._container?(u.subtext=u.subtext||"",u.subtext.length!==0||this._singleLineLabel?u.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(u.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+u.subtext+"</span><br />":"")+"<span>"+u.text+"</span>",u.text||u.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(u){var f=this._map.latLngToLayerPoint(u),h=this._container;return this._container&&(this._visible&&(h.style.visibility="inherit"),L.DomUtil.setPosition(h,f)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(u){for(var f in this.options)this.options.hasOwnProperty(f)&&u[f]&&(u[f]=L.extend({},this.options[f],u[f]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,u)},getModeHandlers:function(u){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(u,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(u,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(u,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(u,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(u,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(u,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(u){return[{enabled:u.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:u.completeShape,context:u},{enabled:u.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:u.deleteLastVertex,context:u},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(u){L.setOptions(this,u);for(var f in this._modes)this._modes.hasOwnProperty(f)&&u.hasOwnProperty(f)&&this._modes[f].handler.setOptions(u[f])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(u){u.edit&&(u.edit.selectedPathOptions===void 0&&(u.edit.selectedPathOptions=this.options.edit.selectedPathOptions),u.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,u.edit.selectedPathOptions)),u.remove&&(u.remove=L.extend({},this.options.remove,u.remove)),u.poly&&(u.poly=L.extend({},this.options.poly,u.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,u),this._selectedFeatureCount=0},getModeHandlers:function(u){var f=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(u,{featureGroup:f,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(u,{featureGroup:f}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(u){var f=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return u.removeAllLayers&&f.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),f},addToolbar:function(u){var f=L.Toolbar.prototype.addToolbar.call(this,u);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),f},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var u,f=this.options.featureGroup,h=f.getLayers().length!==0;this.options.edit&&(u=this._modes[L.EditToolbar.Edit.TYPE].button,h?L.DomUtil.removeClass(u,"leaflet-disabled"):L.DomUtil.addClass(u,"leaflet-disabled"),u.setAttribute("title",h?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(u=this._modes[L.EditToolbar.Delete.TYPE].button,h?L.DomUtil.removeClass(u,"leaflet-disabled"):L.DomUtil.addClass(u,"leaflet-disabled"),u.setAttribute("title",h?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(u,f){if(L.Handler.prototype.initialize.call(this,u),L.setOptions(this,f),this._featureGroup=f.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var h=L.version.split(".");parseInt(h[0],10)===1&&parseInt(h[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(u.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),u._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(u){this._revertLayer(u)},this)},save:function(){var u=new L.LayerGroup;this._featureGroup.eachLayer(function(f){f.edited&&(u.addLayer(f),f.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:u})},_backupLayer:function(u){var f=L.Util.stamp(u);this._uneditedLayerProps[f]||(u instanceof L.Polyline||u instanceof L.Polygon||u instanceof L.Rectangle?this._uneditedLayerProps[f]={latlngs:L.LatLngUtil.cloneLatLngs(u.getLatLngs())}:u instanceof L.Circle?this._uneditedLayerProps[f]={latlng:L.LatLngUtil.cloneLatLng(u.getLatLng()),radius:u.getRadius()}:(u instanceof L.Marker||u instanceof L.CircleMarker)&&(this._uneditedLayerProps[f]={latlng:L.LatLngUtil.cloneLatLng(u.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(u){var f=L.Util.stamp(u);u.edited=!1,this._uneditedLayerProps.hasOwnProperty(f)&&(u instanceof L.Polyline||u instanceof L.Polygon||u instanceof L.Rectangle?u.setLatLngs(this._uneditedLayerProps[f].latlngs):u instanceof L.Circle?(u.setLatLng(this._uneditedLayerProps[f].latlng),u.setRadius(this._uneditedLayerProps[f].radius)):(u instanceof L.Marker||u instanceof L.CircleMarker)&&u.setLatLng(this._uneditedLayerProps[f].latlng),u.fire("revert-edited",{layer:u}))},_enableLayerEdit:function(u){var f,h,s=u.layer||u.target||u;this._backupLayer(s),this.options.poly&&(h=L.Util.extend({},this.options.poly),s.options.poly=h),this.options.selectedPathOptions&&(f=L.Util.extend({},this.options.selectedPathOptions),f.maintainColor&&(f.color=s.options.color,f.fillColor=s.options.fillColor),s.options.original=L.extend({},s.options),s.options.editing=f),s instanceof L.Marker?(s.editing&&s.editing.enable(),s.dragging.enable(),s.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):s.editing.enable()},_disableLayerEdit:function(u){var f=u.layer||u.target||u;f.edited=!1,f.editing&&f.editing.disable(),delete f.options.editing,delete f.options.original,this._selectedPathOptions&&(f instanceof L.Marker?this._toggleMarkerHighlight(f):(f.setStyle(f.options.previousOptions),delete f.options.previousOptions)),f instanceof L.Marker?(f.dragging.disable(),f.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):f.editing.disable()},_onMouseMove:function(u){this._tooltip.updatePosition(u.latlng)},_onMarkerDragEnd:function(u){var f=u.target;f.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:f})},_onTouchMove:function(u){var f=u.originalEvent.changedTouches[0],h=this._map.mouseEventToLayerPoint(f),s=this._map.layerPointToLatLng(h);u.target.setLatLng(s)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(u,f){if(L.Handler.prototype.initialize.call(this,u),L.Util.setOptions(this,f),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var h=L.version.split(".");parseInt(h[0],10)===1&&parseInt(h[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(u.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(u){this._deletableLayers.addLayer(u),u.fire("revert-deleted",{layer:u})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(u){this._removeLayer({layer:u})},this),this.save()},_enableLayerDelete:function(u){(u.layer||u.target||u).on("click",this._removeLayer,this)},_disableLayerDelete:function(u){var f=u.layer||u.target||u;f.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(f)},_removeLayer:function(u){var f=u.layer||u.target||u;this._deletableLayers.removeLayer(f),this._deletedLayers.addLayer(f),f.fire("deleted")},_onMouseMove:function(u){this._tooltip.updatePosition(u.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);function zh(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hy={},Zy;function vk(){return Zy||(Zy=1,(function(){function r(i,l,c){function u(s,w){if(!l[s]){if(!i[s]){var T=typeof zh=="function"&&zh;if(!w&&T)return T(s,!0);if(f)return f(s,!0);var E=new Error("Cannot find module '"+s+"'");throw E.code="MODULE_NOT_FOUND",E}var z=l[s]={exports:{}};i[s][0].call(z.exports,function(O){var W=i[s][1][O];return u(W||O)},z,z.exports,r,i,l,c)}return l[s].exports}for(var f=typeof zh=="function"&&zh,h=0;h<c.length;h++)u(c[h]);return u}return r})()({1:[function(r,i,l){function c(u,f,h){var s=!1;if(typeof window.XMLHttpRequest>"u")return f(Error("Browser not supported"));if(typeof h>"u"){var w=u.match(/^\s*https?:\/\/[^\/]*/);h=w&&w[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var T=new window.XMLHttpRequest;function E(W){return W>=200&&W<300||W===304}if(h&&!("withCredentials"in T)){T=new window.XDomainRequest;var z=f;f=function(){if(s)z.apply(this,arguments);else{var W=this,Q=arguments;setTimeout(function(){z.apply(W,Q)},0)}}}function O(){T.status===void 0||E(T.status)?f.call(T,null,T):f.call(T,T,null)}return"onload"in T?T.onload=O:T.onreadystatechange=function(){T.readyState===4&&O()},T.onerror=function(Q){f.call(this,Q||!0,null),f=function(){}},T.onprogress=function(){},T.ontimeout=function(W){f.call(this,W,null),f=function(){}},T.onabort=function(W){f.call(this,W,null),f=function(){}},T.open("GET",u,!0),T.send(null),s=!0,T}typeof i<"u"&&(i.exports=c)},{}],2:[function(r,i,l){var c={};function u(s){return Math.floor(Math.abs(s)+.5)*Math.sign(s)}function f(s,w,T){s=u(s*T),w=u(w*T);var E=s-w;E<<=1,s-w<0&&(E=~E);for(var z="";E>=32;)z+=String.fromCharCode((32|E&31)+63),E>>=5;return z+=String.fromCharCode(E+63),z}c.decode=function(s,w){for(var T=0,E=0,z=0,O=[],W=0,Q=0,te=null,U,_e,pe=Math.pow(10,w||5);T<s.length;){te=null,W=0,Q=0;do te=s.charCodeAt(T++)-63,Q|=(te&31)<<W,W+=5;while(te>=32);U=Q&1?~(Q>>1):Q>>1,W=Q=0;do te=s.charCodeAt(T++)-63,Q|=(te&31)<<W,W+=5;while(te>=32);_e=Q&1?~(Q>>1):Q>>1,E+=U,z+=_e,O.push([E/pe,z/pe])}return O},c.encode=function(s,w){if(!s.length)return"";for(var T=Math.pow(10,w||5),E=f(s[0][0],0,T)+f(s[0][1],0,T),z=1;z<s.length;z++){var O=s[z],W=s[z-1];E+=f(O[0],W[0],T),E+=f(O[1],W[1],T)}return E};function h(s){for(var w=[],T=0;T<s.length;T++)w.push(s[T].slice().reverse());return w}c.fromGeoJSON=function(s,w){if(s&&s.type==="Feature"&&(s=s.geometry),!s||s.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return c.encode(h(s.coordinates),w)},c.toGeoJSON=function(s,w){var T=c.decode(s,w);return{type:"LineString",coordinates:h(T)}},typeof i=="object"&&i.exports&&(i.exports=c)},{}],3:[function(r,i,l){var c=r("./languages"),u=c.instructions,f=c.grammars,h=c.abbreviations;i.exports=function(s){return Object.keys(u).forEach(function(w){if(!u[w][s])throw"invalid version "+s+": "+w+" not supported"}),{capitalizeFirstLetter:function(w,T){return T.charAt(0).toLocaleUpperCase(w)+T.slice(1)},ordinalize:function(w,T){if(!w)throw new Error("No language code provided");return u[w][s].constants.ordinalize[T.toString()]||""},directionFromDegree:function(w,T){if(!w)throw new Error("No language code provided");if(!T&&T!==0)return"";if(T>=0&&T<=20)return u[w][s].constants.direction.north;if(T>20&&T<70)return u[w][s].constants.direction.northeast;if(T>=70&&T<=110)return u[w][s].constants.direction.east;if(T>110&&T<160)return u[w][s].constants.direction.southeast;if(T>=160&&T<=200)return u[w][s].constants.direction.south;if(T>200&&T<250)return u[w][s].constants.direction.southwest;if(T>=250&&T<=290)return u[w][s].constants.direction.west;if(T>290&&T<340)return u[w][s].constants.direction.northwest;if(T>=340&&T<=360)return u[w][s].constants.direction.north;throw new Error("Degree "+T+" invalid")},laneConfig:function(w){if(!w.intersections||!w.intersections[0].lanes)throw new Error("No lanes object");var T=[],E=null;return w.intersections[0].lanes.forEach(function(z){(E===null||E!==z.valid)&&(z.valid?T.push("o"):T.push("x"),E=z.valid)}),T.join("")},getWayName:function(w,T,E){var z=E?E.classes||[]:[];if(typeof T!="object")throw new Error("step must be an Object");if(!w)throw new Error("No language code provided");if(!Array.isArray(z))throw new Error("classes must be an Array or undefined");var O,W=T.name||"",Q=(T.ref||"").split(";")[0];W===T.ref&&(W=""),W=W.replace(" ("+T.ref+")","");var te=z.indexOf("motorway")!==-1;if(W&&Q&&W!==Q&&!te){var U=u[w][s].phrase["name and ref"]||u.en[s].phrase["name and ref"];O=this.tokenize(w,U,{name:W,ref:Q},E)}else W&&Q&&te&&/\d/.test(Q)||!W&&Q?O=E&&E.formatToken?E.formatToken("ref",Q):Q:O=E&&E.formatToken?E.formatToken("name",W):W;return O},compile:function(w,T,E){if(!w)throw new Error("No language code provided");if(c.supportedCodes.indexOf(w)===-1)throw new Error("language code "+w+" not loaded");if(!T.maneuver)throw new Error("No step maneuver provided");var z=E||{},O=T.maneuver.type,W=T.maneuver.modifier,Q=T.mode,te=T.driving_side;if(!O)throw new Error("Missing step maneuver type");if(O!=="depart"&&O!=="arrive"&&!W)throw new Error("Missing step maneuver modifier");u[w][s][O]||(console.log("Encountered unknown instruction type: "+O),O="turn");var U;if(u[w][s].modes[Q])U=u[w][s].modes[Q];else{var _e=O==="off ramp"&&W.indexOf(te)>=0;u[w][s][O][W]&&!_e?U=u[w][s][O][W]:U=u[w][s][O].default}var pe;switch(O){case"use lane":pe=u[w][s].constants.lanes[this.laneConfig(T)],pe||(U=u[w][s]["use lane"].no_lanes);break;case"rotary":case"roundabout":T.rotary_name&&T.maneuver.exit&&U.name_exit?U=U.name_exit:T.rotary_name&&U.name?U=U.name:T.maneuver.exit&&U.exit?U=U.exit:U=U.default;break}var xe=this.getWayName(w,T,z),Ae;T.destinations&&T.exits&&U.exit_destination?Ae=U.exit_destination:T.destinations&&U.destination?Ae=U.destination:T.exits&&U.exit?Ae=U.exit:xe&&U.name?Ae=U.name:z.waypointName&&U.named?Ae=U.named:Ae=U.default;var ze=T.destinations&&T.destinations.split(": "),qe=ze&&ze[0].split(",")[0],Ne=ze&&ze[1]&&ze[1].split(",")[0],He;Ne&&qe?He=qe+": "+Ne:He=qe||Ne||"";var rt=z.legIndex>=0&&z.legIndex!==z.legCount-1?this.ordinalize(w,z.legIndex+1):"",lt={way_name:xe,destination:He,exit:(T.exits||"").split(";")[0],exit_number:this.ordinalize(w,T.maneuver.exit||1),rotary_name:T.rotary_name,lane_instruction:pe,modifier:u[w][s].constants.modifier[W],direction:this.directionFromDegree(w,T.maneuver.bearing_after),nth:rt,waypoint_name:z.waypointName};return this.tokenize(w,Ae,lt,z)},grammarize:function(w,T,E){if(!w)throw new Error("No language code provided");if(T&&E&&f&&f[w]&&f[w][s]){var z=f[w][s][E];if(z){var O=" "+T+" ",W=f[w].meta.regExpFlags||"";return z.forEach(function(Q){var te=new RegExp(Q[0],W);O=O.replace(te,Q[1])}),O.trim()}}return T},abbreviations:h,tokenize:function(w,T,E,z){if(!w)throw new Error("No language code provided");var O=this,W=!1,Q=T.replace(/\{(\w+)(?::(\w+))?\}/g,function(te,U,_e,pe){var xe=E[U];return typeof xe>"u"?te:(xe=O.grammarize(w,xe,_e),pe===0&&u[w].meta.capitalizeFirstLetter&&(W=!0,xe=O.capitalizeFirstLetter(w,xe)),z&&z.formatToken&&(xe=z.formatToken(U,xe)),xe)}).replace(/ {2}/g," ");return!W&&u[w].meta.capitalizeFirstLetter?this.capitalizeFirstLetter(w,Q):Q}}}},{"./languages":4}],4:[function(r,i,l){var c=r("./languages/translations/da.json"),u=r("./languages/translations/de.json"),f=r("./languages/translations/en.json"),h=r("./languages/translations/eo.json"),s=r("./languages/translations/es.json"),w=r("./languages/translations/es-ES.json"),T=r("./languages/translations/fi.json"),E=r("./languages/translations/fr.json"),z=r("./languages/translations/he.json"),O=r("./languages/translations/id.json"),W=r("./languages/translations/it.json"),Q=r("./languages/translations/ko.json"),te=r("./languages/translations/my.json"),U=r("./languages/translations/nl.json"),_e=r("./languages/translations/no.json"),pe=r("./languages/translations/pl.json"),xe=r("./languages/translations/pt-BR.json"),Ae=r("./languages/translations/pt-PT.json"),ze=r("./languages/translations/ro.json"),qe=r("./languages/translations/ru.json"),Ne=r("./languages/translations/sv.json"),He=r("./languages/translations/tr.json"),rt=r("./languages/translations/uk.json"),lt=r("./languages/translations/vi.json"),ct=r("./languages/translations/zh-Hans.json"),mt=r("./languages/grammar/fr.json"),jt=r("./languages/grammar/ru.json"),Ei=r("./languages/abbreviations/bg.json"),Tt=r("./languages/abbreviations/ca.json"),Rt=r("./languages/abbreviations/da.json"),Mt=r("./languages/abbreviations/de.json"),Li=r("./languages/abbreviations/en.json"),dt=r("./languages/abbreviations/es.json"),fn=r("./languages/abbreviations/fr.json"),sn=r("./languages/abbreviations/he.json"),pn=r("./languages/abbreviations/hu.json"),zn=r("./languages/abbreviations/lt.json"),Ji=r("./languages/abbreviations/nl.json"),oi=r("./languages/abbreviations/ru.json"),Di=r("./languages/abbreviations/sl.json"),Qn=r("./languages/abbreviations/sv.json"),Qi=r("./languages/abbreviations/uk.json"),ba=r("./languages/abbreviations/vi.json"),kn={da:c,de:u,en:f,eo:h,es:s,"es-ES":w,fi:T,fr:E,he:z,id:O,it:W,ko:Q,my:te,nl:U,no:_e,pl:pe,"pt-BR":xe,"pt-PT":Ae,ro:ze,ru:qe,sv:Ne,tr:He,uk:rt,vi:lt,"zh-Hans":ct},er={fr:mt,ru:jt},Rn={bg:Ei,ca:Tt,da:Rt,de:Mt,en:Li,es:dt,fr:fn,he:sn,hu:pn,lt:zn,nl:Ji,ru:oi,sl:Di,sv:Qn,uk:Qi,vi:ba};i.exports={supportedCodes:Object.keys(kn),instructions:kn,grammars:er,abbreviations:Rn}},{"./languages/abbreviations/bg.json":5,"./languages/abbreviations/ca.json":6,"./languages/abbreviations/da.json":7,"./languages/abbreviations/de.json":8,"./languages/abbreviations/en.json":9,"./languages/abbreviations/es.json":10,"./languages/abbreviations/fr.json":11,"./languages/abbreviations/he.json":12,"./languages/abbreviations/hu.json":13,"./languages/abbreviations/lt.json":14,"./languages/abbreviations/nl.json":15,"./languages/abbreviations/ru.json":16,"./languages/abbreviations/sl.json":17,"./languages/abbreviations/sv.json":18,"./languages/abbreviations/uk.json":19,"./languages/abbreviations/vi.json":20,"./languages/grammar/fr.json":21,"./languages/grammar/ru.json":22,"./languages/translations/da.json":23,"./languages/translations/de.json":24,"./languages/translations/en.json":25,"./languages/translations/eo.json":26,"./languages/translations/es-ES.json":27,"./languages/translations/es.json":28,"./languages/translations/fi.json":29,"./languages/translations/fr.json":30,"./languages/translations/he.json":31,"./languages/translations/id.json":32,"./languages/translations/it.json":33,"./languages/translations/ko.json":34,"./languages/translations/my.json":35,"./languages/translations/nl.json":36,"./languages/translations/no.json":37,"./languages/translations/pl.json":38,"./languages/translations/pt-BR.json":39,"./languages/translations/pt-PT.json":40,"./languages/translations/ro.json":41,"./languages/translations/ru.json":42,"./languages/translations/sv.json":43,"./languages/translations/tr.json":44,"./languages/translations/uk.json":45,"./languages/translations/vi.json":46,"./languages/translations/zh-Hans.json":47}],5:[function(r,i,l){i.exports={abbreviations:{:"",:"",:"",:"Mkt",:"",:"",:"",:"",:"",:"",:"-",:"",:"-",:"",:"",:"",:"",:"-",:"-",:"-",:"",:"",:"",:"",:"",:".",:"",:"",:"-",:"",:""},classifications:{:"",:"",:"",:"",:"-",:"",:"",:"-",:"-",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},directions:{:"",:"",:"",:"",:"",:"",:""}}},{}],6:[function(r,i,l){i.exports={abbreviations:{comunicacions:"Com.","entitat de poblaci":"Nucli",disseminat:"Diss.","cap de municipi":"Cap",indret:"Indr.",comarca:"Cca.","relleu del litoral":"Lit.",municipi:"Mun.","xarxa hidrogrfica":"Curs Fluv.",equipament:"Equip.",orografia:"Orogr.",barri:"Barri",edificaci:"Edif.","edificaci histrica":"Edif. Hist.","entitat descentralitzada":"E.M.D.","element hidrogrfic":"Hidr."},classifications:{rotonda:"Rot.",carrerada:"Ca.",jard:"J.",paratge:"Pge.",pont:"Pont",lloc:"Lloc",rambla:"Rbla.",cases:"Cses.",barranc:"Bnc.",plana:"Plana",polgon:"Pol.",muralla:"Mur.",enlla:"Ella","antiga carretera":"Actra",glorieta:"Glor.",autovia:"Autv.",prolongaci:"Prol.",calada:"Cda.",carretera:"Ctra.",pujada:"Pda.",torrent:"T.",disseminat:"Disse",barri:"B.",cintur:"Cinto",passera:"Psera",sender:"Send.",carrer:"C.",squia:"Sq.",blocs:"Bloc",rambleta:"Rblt.",partida:"Par.",costa:"Cos.",sector:"Sec.",corral:"Crral",urbanitzaci:"Urb.",autopista:"Autp.",grup:"Gr.",platja:"Pja.",jardins:"J.",complex:"Comp.",portals:"Ptals",finca:"Fin.",travessera:"Trav.",plaa:"Pl.",travessia:"Trv.","polgon industrial":"PI.",passatge:"Ptge.",apartaments:"Apmt.",mirador:"Mira.",antic:"Antic",accs:"Acc.",colnia:"Col.",corriol:"Crol.",portal:"Ptal.",porta:"Pta.",port:"Port",carrer:"Cr.",riera:"Ra.","circumvallaci":"Cval.",baixada:"Bda.",placeta:"Plta.",escala:"Esc.","gran via":"GV",rial:"Rial",conjunt:"Conj.",avinguda:"Av.",esplanada:"Esp.",cantonada:"Cant.",ronda:"Rda.",corredor:"Cdor.",drecera:"Drec.",passads:"Pds.",viaducte:"Vdct.",passeig:"Pg.",venat:"Ve."},directions:{sudest:"SE",sudoest:"SO",nordest:"NE",nordoest:"NO",est:"E",nord:"N",oest:"O",sud:"S"}}},{}],7:[function(r,i,l){i.exports={abbreviations:{skole:"Sk.",ved:"v.",centrum:"C.",sankt:"Skt.",vestre:"v.",hospital:"Hosp.",strde:"Str.",nordre:"Nr.",plads:"Pl.",universitet:"Uni.",vnge:"vg.",station:"St."},classifications:{avenue:"Ave",gammel:"Gl.",dronning:"Dronn.",snder:"Sdr.",nrre:"Nr.",vester:"V.",vestre:"V.",ster:".",stre:".",boulevard:"Boul."},directions:{sydst:"S",nordvest:"NV",syd:"S",nordst:"N",sydvest:"SV",vest:"V",nord:"N",st:""}}},{}],8:[function(r,i,l){i.exports={abbreviations:{},classifications:{},directions:{osten:"O",nordosten:"NO",sden:"S",nordwest:"NW",norden:"N",sdost:"SO",sdwest:"SW",westen:"W"}}},{}],9:[function(r,i,l){i.exports={abbreviations:{square:"Sq",centre:"Ctr",sister:"Sr",lake:"Lk",fort:"Ft",route:"Rte",william:"Wm",national:"Natl",junction:"Jct",center:"Ctr",saint:"St",saints:"SS",station:"Sta",mount:"Mt",junior:"Jr",mountain:"Mtn",heights:"Hts",university:"Univ",school:"Sch",international:"Intl",apartments:"Apts",crossing:"Xing",creek:"Crk",township:"Twp",downtown:"Dtwn",father:"Fr",senior:"Sr",point:"Pt",river:"Riv",market:"Mkt",village:"Vil",park:"Pk",memorial:"Mem"},classifications:{place:"Pl",circle:"Cir",bypass:"Byp",motorway:"Mwy",crescent:"Cres",road:"Rd",cove:"Cv",lane:"Ln",square:"Sq",street:"St",freeway:"Fwy",walk:"Wk",plaza:"Plz",parkway:"Pky",avenue:"Ave",pike:"Pk",drive:"Dr",highway:"Hwy",footway:"Ftwy",point:"Pt",court:"Ct",terrace:"Ter",walkway:"Wky",alley:"Aly",expressway:"Expy",bridge:"Br",boulevard:"Blvd",turnpike:"Tpk"},directions:{southeast:"SE",northwest:"NW",south:"S",west:"W",southwest:"SW",north:"N",east:"E",northeast:"NE"}}},{}],10:[function(r,i,l){i.exports={abbreviations:{segunda:"2",octubre:"8bre",doctores:"Drs",doctora:"Dra",internacional:"Intl",doctor:"Dr",segundo:"2",seorita:"Srta",doctoras:"Drs",primera:"1",primero:"1",san:"S",colonia:"Col",doa:"Da",septiembre:"7bre",diciembre:"10bre",seor:"Sr",ayuntamiento:"Ayto",seora:"Sra",tercera:"3",tercero:"3",don:"D",santa:"Sta",ciudad:"Cdad",noviembre:"9bre",departamento:"Dep"},classifications:{camino:"Cmno",avenida:"Av",paseo:"P",autopista:"Auto",calle:"C",plaza:"Pza",carretera:"Crta"},directions:{este:"E",noreste:"NE",sur:"S",suroeste:"SO",noroeste:"NO",oeste:"O",sureste:"SE",norte:"N"}}},{}],11:[function(r,i,l){i.exports={abbreviations:{alle:"All",arodrome:"Arod",aroport:"Arop"},classifications:{centrale:"Ctrale",campings:"Camp.",urbains:"Urb.",mineure:"Min.",publique:"Publ.",suprieur:"Sup.",fdration:"Fd.","notre-dame":"ND",saint:"St","centre hospitalier rgional":"CHR",exploitation:"Exploit.",gnral:"Gal",civiles:"Civ.",maritimes:"Marit.",aviation:"Aviat.",iii:"3",archologique:"Archo.",musical:"Music.",musicale:"Music.",immeuble:"Imm.",xv:"15",htel:"Ht.",alpine:"Alp.",communale:"Commun.",v:"5",global:"Glob.",universit:"Univ.",confdral:"Confd.",xx:"20",x:"10",piscine:"Pisc.",dimanche:"di.",fleuve:"Flv",postaux:"Post.",musicienne:"Music.",dpartement:"Dpt",fvrier:"Fvr.",municipales:"Munic.",province:"Prov.",communauts:"Commts",barrage:"Barr.",mercredi:"me.",prsidentes:"Pdtes",caftrias:"Caft.",thtral:"Th.",viticulteur:"Vitic.",poste:"Post.",spcialise:"Spc.",agriculture:"Agric.",infirmier:"Infirm.",animation:"Anim.",mondiale:"Mond.",arrt:"Arr.",zone:"zon.",municipaux:"Munic.",grand:"Gd",janvier:"Janv.",fondateur:"Fond.",premire:"1re",municipale:"Munic.",direction:"Dir.",anonyme:"Anon.",dpartementale:"Dpt",moyens:"Moy.",novembre:"Nov.",jardin:"Jard.",petites:"Pet.",priv:"Priv.",centres:"Ctres",forestier:"Forest.",xiv:"14",africaines:"Afric.",sergent:"Sgt",europenne:"Eur.",prive:"Priv.",caf:"Cf",xix:"19",hautes:"Htes",major:"Mjr",vendredi:"ve.",municipalit:"Munic.","sous-prfecture":"Ss-prf.",spciales:"Spc.",secondaires:"Second.",viie:"7e",moyenne:"Moy.",commerciale:"Commerc.",rgion:"Rg.",amricaines:"Amr.",amricains:"Amr.",service:"Sce",professeur:"Prof.",dpartemental:"Dpt",htels:"Ht.",mondiales:"Mond.",ire:"1re",caporal:"Capo.",militaire:"Milit.","lyce d'enseignement professionnel":"LEP",adjudant:"Adj.",mdicale:"Md.",confrences:"Confr.",universelle:"Univ.",xiie:"12e",suprieures:"Sup.",naturel:"Natur.","socit nationale":"SN",hospitalier:"Hosp.",culturelle:"Cult.",amricain:"Amr.","son altesse royale":"S.A.R.",infirmire:"Infirm.",viii:"8",fondatrice:"Fond.",madame:"Mme",mtropolitain:"Mtrop.",ophtalmologues:"Ophtalmos",xviie:"18e",viiie:"8e",commerante:"Commer.","centre d'enseignement du second degr":"CES",septembre:"Sept.",agriculteur:"Agric.",xiii:"13",pontifical:"Pontif.",caftria:"Caft.",prince:"Pce",vie:"6e",archiduchesse:"Archid.",occidental:"Occ.",spectacles:"Spect.",camping:"Camp.",mtro:"M",arrondissement:"Arrond.",viticole:"Vitic.",ii:"2",sicle:"Si.",chapelles:"Chap.",centre:"Ctre","sapeur-pompiers":"Sap.-pomp.",tablissements:"tabts","socit anonyme":"SA",directeurs:"Dir.",vii:"7",culturel:"Cult.",central:"Ctral",mtropolitaine:"Mtrop.",administrations:"Admin.",amiraux:"Amir.",sur:"s/",premiers:"1ers","provence-alpes-cte d'azur":"PACA",cathdrale:"Cathd.",iv:"4",postale:"Post.",social:"Soc.",spcialis:"Spc.",district:"Distr.",technologique:"Techno.",viticoles:"Vitic.",ix:"9",protgs:"Prot.",historiques:"Hist.",sous:"s/s",national:"Nal",ambassade:"Amb.",cafs:"Cfs",agronomie:"Agro.",sapeurs:"Sap.",petits:"Pet.",monsieur:"M.",boucher:"Bouch.",restaurant:"Restau.",lyce:"Lyc.",urbaine:"Urb.",prfecture:"Prf.",districts:"Distr.",civil:"Civ.",protges:"Prot.",sapeur:"Sap.",thtre:"Th.",collge:"Coll.",mardi:"ma.",mmorial:"Mmor.",africain:"Afric.",rpublicaine:"Rpubl.",sociale:"Soc.",spcial:"Spc.",technologie:"Techno.",charcuterie:"Charc.",commerces:"Commerc.",fluviale:"Flv",parachutistes:"Para.",primaires:"Prim.",directions:"Dir.",prsidentiel:"Pdtl",nationales:"Nales",aprs:"apr.",samedi:"sa.",unit:"U.",xxiii:"23",associ:"Assoc.",lectrique:"lectr.",populaire:"Pop.",asiatique:"Asiat.",navigable:"Navig.",prsidente:"Pdte",xive:"14e",associs:"Assoc.",pompiers:"Pomp.",agricoles:"Agric.",lm:"lm.",dcembre:"Dc.","son altesse":"S.Alt.","aprs-midi":"a.-m.",mineures:"Min.",juillet:"Juil.",aviatrices:"Aviat.",fondation:"Fond.",pontificaux:"Pontif.",temple:"Tple",europennes:"Eur.",rgionale:"Rg.",informations:"Infos",mondiaux:"Mond.",infanterie:"Infant.",archologie:"Archo.",dans:"d/",hospice:"Hosp.",spectacle:"Spect.","htels-restaurants":"Ht.-Rest.","htel-restaurant":"Ht.-Rest.",hlicoptre:"hlico",xixe:"19e",cliniques:"Clin.",docteur:"Dr",secondaire:"Second.",municipal:"Munic.",gnrale:"Gale",chteau:"Cht.",commerant:"Commer.",avril:"Avr.",clinique:"Clin.",urbaines:"Urb.",navale:"Nav.",navigation:"Navig.",asiatiques:"Asiat.",pontificales:"Pontif.",administrative:"Admin.",syndicat:"Synd.",lundi:"lu.",petite:"Pet.",maritime:"Marit.",mtros:"M",enseignement:"Enseign.",fluviales:"Flv",historique:"Hist.",comts:"Cts",rsidentiel:"Rsid.",international:"Int.",suprieure:"Sup.","centre hospitalier universitaire":"CHU",confdration:"Confd.",boucherie:"Bouch.",fondatrices:"Fond.",mdicaux:"Md.",europens:"Eur.",orientaux:"Ori.",naval:"Nav.",tang:"tg",provincial:"Prov.",junior:"Jr",dpartementales:"Dpt",musique:"Musiq.",directrices:"Dir.",marchal:"Mal",civils:"Civ.",protg:"Prot.",tablissement:"tabt",trafic:"Traf.",aviateur:"Aviat.",archives:"Arch.",africains:"Afric.",maternelle:"Matern.",industrielle:"Ind.",administratif:"Admin.",oriental:"Ori.",universitaire:"Univ.",majeur:"Maj.",haute:"Hte",communal:"Commun.",petit:"Pet.",commune:"Commun.",exploitant:"Exploit.",confrence:"Confr.",monseigneur:"Mgr",pharmacien:"Pharm.",jeudi:"je.",primaire:"Prim.",hlicoptres:"hlicos",agronomique:"Agro.",mdecin:"Md.",ve:"5e",pontificale:"Pontif.",ier:"1er",cinma:"Cin",fluvial:"Flv",occidentaux:"Occ.",commerants:"Commer.",banque:"Bq",moyennes:"Moy.",pharmacienne:"Pharm.",dmocratique:"Dm.",cinmas:"Cins",spciale:"Spc.",prsidents:"Pdts",directrice:"Dir.",vi:"6",basse:"Bas.",xve:"15e",tat:".",aviateurs:"Aviat.",majeurs:"Maj.",infirmiers:"Infirm.",glise:"gl.",confdrale:"Confd.",xxie:"21e",comte:"Cte",europen:"Eur.",union:"U.",pharmacie:"Pharm.",infirmires:"Infirm.",comt:"Ct",sportive:"Sport.",deuxime:"2e",xvi:"17",haut:"Ht",mdicales:"Md.",dvelopp:"Dvelop.",btiment:"Bt.",commerce:"Commerc.",ive:"4e",associatif:"Assoc.",rural:"Rur.",cimetire:"Cim.",rgional:"Rg.",ferroviaire:"Ferr.",vers:"v/",mosque:"Mosq.",mineurs:"Min.",nautique:"Naut.",chteaux:"Cht.",sportif:"Sport.",mademoiselle:"Mle",cole:"c.",doyen:"Doy.",industriel:"Ind.",chapelle:"Chap.",socits:"Sts",internationale:"Int.",coopratif:"Coop.",hospices:"Hosp.",xxii:"22",parachutiste:"Para.",alpines:"Alp.",civile:"Civ.",xvie:"17e",tats:".",muse:"Mse",centrales:"Ctrales",globaux:"Glob.",suprieurs:"Sup.",syndicats:"Synd.",archevque:"Archev.",docteurs:"Drs",bibliothque:"Biblio.",lieutenant:"Lieut.",rpublique:"Rp.",vtrinaire:"Vt.",dpartementaux:"Dpt",premier:"1er",fluviaux:"Flv",anim:"Anim.",orientales:"Ori.",technologiques:"Techno.",princesse:"Pse",routire:"Rout.",cooprative:"Coop.",scolaire:"Scol.",coles:"c.",football:"Foot",territoriale:"Territ.",commercial:"Commerc.",mineur:"Min.",millnaires:"Mill.",association:"Assoc.",catholique:"Cathol.",administration:"Admin.",mairie:"Mair.",portuaire:"Port.",tertiaires:"Terti.",thtrale:"Th.",palais:"Pal.",troisime:"3e",directeur:"Dir.",vtrinaires:"Vt.",facult:"Fac.",occidentales:"Occ.",viticulteurs:"Vitic.",xvii:"18",occidentale:"Occ.",amiral:"Amir.",professionnel:"Profess.",administratives:"Admin.",commerciales:"Commerc.",saints:"Sts",agronomes:"Agro.",stade:"Std","sous-prfet":"Ss-prf.",senior:"Sr",agronome:"Agro.",terrain:"Terr.",catholiques:"Cathol.",rsidentielle:"Rsid.",grands:"Gds",exploitants:"Exploit.",xiiie:"13e",croix:"Cx",gnraux:"Gaux",crdit:"Crd.",cimetires:"Cim.",antenne:"Ant.",mdical:"Md.",collges:"Coll.",musicien:"Music.",apostolique:"Apost.",postal:"Post.",territorial:"Territ.",urbanisme:"Urb.",prfectorale:"Prf.",fondateurs:"Fond.",information:"Info.",glises:"gl.",ophtalmologue:"Ophtalmo",congrgation:"Congrg.",charcutier:"Charc.",tage:"t.",consulat:"Consul.",public:"Publ.",ferre:"Ferr.",matin:"mat.","socit anonyme  responsabilit limite":"SARL",monuments:"Mmts",protection:"Prot.",universel:"Univ.",nationale:"Nale",prsident:"Pdt",provinciale:"Prov.",agriculteurs:"Agric.",prfectoral:"Prf.",xxe:"20e",alpins:"Alp.",avant:"av.",infirmerie:"Infirm.","deux mil":"2000",rurale:"Rur.",administratifs:"Admin.",octobre:"Oct.",archipel:"Archip.",communaut:"Commt",globales:"Glob.",alpin:"Alp.",numros:"N","lieutenant-colonel":"Lieut.-Col.","jsus-christ":"J.-C.",agricole:"Agric.","sa majest":"S.Maj.",associative:"Assoc.",xxi:"21",prsidentielle:"Pdtle",moyen:"Moy.",fdral:"Fd.",professionnelle:"Profess.",tertiaire:"Terti.",ixe:"9e",hpital:"Hp.",technologies:"Techno.",iiie:"3e",dveloppement:"Dvelop.",monument:"Mmt",forestire:"Forest.",numro:"N",viticulture:"Vitic.",traversire:"Traver.",technique:"Tech.",lectriques:"lectr.",militaires:"Milit.",pompier:"Pomp.",amricaine:"Amr.",prfet:"Prf.",congrgations:"Congrg.",ptissier:"Ptiss.",mondial:"Mond.",ophtalmologie:"Ophtalm.",sainte:"Ste",africaine:"Afric.",aviatrice:"Aviat.",doyens:"Doy.",socit:"St",majeures:"Maj.",orientale:"Ori.",ministre:"Min.",archiduc:"Archid.",territoire:"Territ.",techniques:"Tech.","le-de-france":"IDF",globale:"Glob.",xe:"10e",xie:"11e",majeure:"Maj.",commerciaux:"Commerc.",maire:"Mair.",spciaux:"Spc.",grande:"Gde",messieurs:"MM",colonel:"Col.",millnaire:"Mill.",xi:"11",urbain:"Urb.",fdrale:"Fd.",ferr:"Ferr.",rivire:"Riv.",rpublicain:"Rpubl.",grandes:"Gdes",rgiment:"Rgim.",hauts:"Hts",catgorie:"Catg.",basses:"Bas.",xii:"12",agronomiques:"Agro.",iie:"2e",protge:"Prot.","sapeur-pompier":"Sap.-pomp."},directions:{"est-nord-est":"ENE","nord-est":"NE",ouest:"O","sud-est":"SE","est-sud-est":"ESE","nord-nord-est":"NNE",sud:"S","nord-nord-ouest":"NNO","nord-ouest":"NO",nord:"N","ouest-sud-ouest":"OSO","ouest-nord-ouest":"ONO","sud-ouest":"SO","sud-sud-est":"SSE","sud-sud-ouest":"SSO",est:"E"}}},{}],12:[function(r,i,l){i.exports={abbreviations:{:"'"},classifications:{},directions:{}}},{}],13:[function(r,i,l){i.exports={abbreviations:{},classifications:{},directions:{kelet:"K",szakkelet:"K",dl:"D",szaknyugat:"NY",szak:"",dlkelet:"DK",dlnyugat:"DNY",nyugat:"NY"}}},{}],14:[function(r,i,l){i.exports={abbreviations:{apartamentai:"Apt",auktumos:"Auk",centras:"Ctr",eeras:"E",fortas:"Ft",greitkelis:"Grtkl",juosta:"Jst",kaimas:"Km",kalnas:"Kln",kelias:"Kl",kiemelis:"Kml",miestelis:"Mstl","miesto centras":"M.Ctr",mokykla:"Mok",nacionalinis:"Nac",paminklas:"Pmkl",parkas:"Pk",pusratis:"Psrt",sankrya:"Skr",ses:"Ses",skveras:"Skv",stotis:"St",v:"v",tarptautinis:"Trptaut",takas:"Tk",tvas:"Tv",turgus:"Tgs",universitetas:"Univ",up:"Up",upelis:"Up",vieta:"Vt"},classifications:{aikt:"a.",alja:"al.",aplinkkelis:"aplinkl.",autostrada:"auto.",bulvaras:"b.",gatv:"g.",kelias:"kel.",krantin:"krant.",prospektas:"pr.",plentas:"pl.",skersgatvis:"skg.",takas:"tak.",tiltas:"tlt."},directions:{piets:"P",vakarai:"V",iaur:"","iaurs vakarai":"V",pietryiai:"PR","iaurs rytai":"R",rytai:"R",pietvakariai:"PV"}}},{}],15:[function(r,i,l){i.exports={abbreviations:{centrum:"Cntrm",nationaal:"Natl",berg:"Brg",meer:"Mr",kruising:"Krsng",toetreden:"Ttrdn"},classifications:{bypass:"Pass",brug:"Br",straat:"Str",rechtbank:"Rbank",snoek:"Snk",autobaan:"Baan",terras:"Trrs",punt:"Pt",plaza:"Plz",rijden:"Rijd",parkway:"Pky",inham:"Nham",snelweg:"Weg","halve maan":"Maan",cirkel:"Crkl",laan:"Ln",rijbaan:"Strook",weg:"Weg",lopen:"Lpn",autoweg:"Weg",boulevard:"Blvd",plaats:"Plts",steeg:"Stg",voetpad:"Stoep"},directions:{noordoost:"NO",westen:"W",zuiden:"Z",zuidwest:"ZW",oost:"O",zuidoost:"ZO",noordwest:"NW",noorden:"N"}}},{}],16:[function(r,i,l){i.exports={abbreviations:{:".",:".",:"",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:"."},classifications:{:"-",:".",:".",:".",:".",:".",:".",:".",:"."},directions:{:"","-":"","-":"","-":"","-":"",:"",:"",:""}}},{}],17:[function(r,i,l){i.exports={abbreviations:{},classifications:{},directions:{vzhod:"V",severovzhod:"SV",jug:"J",severozahod:"SZ",sever:"S",jugovzhod:"JV",jugozahod:"JZ",zahod:"Z"}}},{}],18:[function(r,i,l){i.exports={abbreviations:{sankta:"s:ta",gamla:"G:la",sankt:"s:t"},classifications:{Bro:"Br"},directions:{norr:"N",sydst:"SO",vster:"V",ster:"O",nordvst:"NV",sydvst:"SV",sder:"S",nordst:"NO"}}},{}],19:[function(r,i,l){i.exports={abbreviations:{},classifications:{},directions:{:""," ":"",:""," ":"",:""," ":""," ":"",:""}}},{}],20:[function(r,i,l){i.exports={abbreviations:{"vin bo tng":"VBT","th trn":"Tt","i hc":"H","cn c khng quan":"CCKQ","cu lc b":"CLB","bu in":"B","khch sn":"KS","khu du lch":"KDL","khu cng nghip":"KCN","khu ngh mt":"KNM","th x":"Tx","khu chung c":"KCC","phi trng":"PT","trung tm":"TT","tng cng ty":"TCty","trung hc c s":"THCS","sn bay quc t":"SBQT","trung hc ph thng":"THPT","cao ng":"C","cng ty":"Cty","sn bay":"SB","thnh ph":"Tp","cng vin":"CV","sn vn ng":"SV","linh mc":"LM","vn quc gia":"VQG"},classifications:{"huyn l":"HL","ng tnh":"T","quc l":"QL","xa l":"XL","hng l":"HL","tnh l":"TL","ng huyn":"H","ng cao tc":"CT","i l":"L","vit nam":"VN","qung trng":"QT","ng b":"B"},directions:{ty:"T",nam:"N","ng nam":"N","ng bc":"B","ty nam":"TN",ng:"",bc:"B"}}},{}],21:[function(r,i,l){i.exports={meta:{regExpFlags:"gi"},v5:{article:[["^ Acc[e]s "," laccs "],["^ Aire "," laire "],["^ All[e]e "," lalle "],["^ Anse "," lanse "],["^ (L['])?Autoroute "," lautoroute "],["^ Avenue "," lavenue "],["^ Barreau "," le barreau "],["^ Boulevard "," le boulevard "],["^ Chemin "," le chemin "],["^ Petit[\\- ]Chemin "," le petit chemin "],["^ Cit[e] "," la cit "],["^ Clos "," le clos "],["^ Corniche "," la corniche "],["^ Cour "," la cour "],["^ Cours "," le cours "],["^ D[e]viation "," la dviation "],["^ Entr[e]e "," lentre "],["^ Esplanade "," lesplanade "],["^ Galerie "," la galerie "],["^ Impasse "," limpasse "],["^ Lotissement "," le lotissement "],["^ Mont[e]e "," la monte "],["^ Parc "," le parc "],["^ Parvis "," le parvis "],["^ Passage "," le passage "],["^ Place "," la place "],["^ Petit[\\- ]Pont "," le petit-pont "],["^ Pont "," le pont "],["^ Promenade "," la promenade "],["^ Quai "," le quai "],["^ Rocade "," la rocade "],["^ Rond[\\- ]?Point "," le rond-point "],["^ Route "," la route "],["^ Rue "," la rue "],["^ Grande Rue "," la grande rue "],["^ Sente "," la sente "],["^ Sentier "," le sentier "],["^ Sortie "," la sortie "],["^ Souterrain "," le souterrain "],["^ Square "," le square "],["^ Terrasse "," la terrasse "],["^ Traverse "," la traverse "],["^ Tunnel "," le tunnel "],["^ Viaduc "," le viaduc "],["^ Villa "," la villa "],["^ Village "," le village "],["^ Voie "," la voie "],[" ([dl])'"," $1"]],preposition:[["^ Le ","  du "],["^ Les ","  des "],["^ La ","  de La "],["^ Acc[e]s ","  de laccs "],["^ Aire ","  de laire "],["^ All[e]e ","  de lalle "],["^ Anse ","  de lanse "],["^ (L['])?Autoroute ","  de lautoroute "],["^ Avenue ","  de lavenue "],["^ Barreau ","  du barreau "],["^ Boulevard ","  du boulevard "],["^ Chemin ","  du chemin "],["^ Petit[\\- ]Chemin ","  du petit chemin "],["^ Cit[e] ","  de la cit "],["^ Clos ","  du clos "],["^ Corniche ","  de la corniche "],["^ Cour ","  de la cour "],["^ Cours ","  du cours "],["^ D[e]viation ","  de la dviation "],["^ Entr[e]e ","  de lentre "],["^ Esplanade ","  de lesplanade "],["^ Galerie ","  de la galerie "],["^ Impasse ","  de limpasse "],["^ Lotissement ","  du lotissement "],["^ Mont[e]e ","  de la monte "],["^ Parc ","  du parc "],["^ Parvis ","  du parvis "],["^ Passage ","  du passage "],["^ Place ","  de la place "],["^ Petit[\\- ]Pont ","  du petit-pont "],["^ Pont ","  du pont "],["^ Promenade ","  de la promenade "],["^ Quai ","  du quai "],["^ Rocade ","  de la rocade "],["^ Rond[\\- ]?Point ","  du rond-point "],["^ Route ","  de la route "],["^ Rue ","  de la rue "],["^ Grande Rue ","  de la grande rue "],["^ Sente ","  de la sente "],["^ Sentier ","  du sentier "],["^ Sortie ","  de la sortie "],["^ Souterrain ","  du souterrain "],["^ Square ","  du square "],["^ Terrasse ","  de la terrasse "],["^ Traverse ","  de la traverse "],["^ Tunnel ","  du tunnel "],["^ Viaduc ","  du viaduc "],["^ Villa ","  de la villa "],["^ Village ","  du village "],["^ Voie ","  de la voie "],["^ ([AEIOUY])","  d$1"],["^ (\\S)","  de $1"],[" ([dl])'"," $1"]],rotary:[["^ Le ","  le rond-point du "],["^ Les ","  le rond-point des "],["^ La ","  le rond-point de La "],["^ Acc[e]s "," le rond-point de laccs "],["^ Aire ","  le rond-point de laire "],["^ All[e]e ","  le rond-point de lalle "],["^ Anse ","  le rond-point de lanse "],["^ (L['])?Autoroute ","  le rond-point de lautoroute "],["^ Avenue ","  le rond-point de lavenue "],["^ Barreau ","  le rond-point du barreau "],["^ Boulevard ","  le rond-point du boulevard "],["^ Chemin ","  le rond-point du chemin "],["^ Petit[\\- ]Chemin ","  le rond-point du petit chemin "],["^ Cit[e] ","  le rond-point de la cit "],["^ Clos ","  le rond-point du clos "],["^ Corniche ","  le rond-point de la corniche "],["^ Cour ","  le rond-point de la cour "],["^ Cours ","  le rond-point du cours "],["^ D[e]viation ","  le rond-point de la dviation "],["^ Entr[e]e ","  le rond-point de lentre "],["^ Esplanade ","  le rond-point de lesplanade "],["^ Galerie ","  le rond-point de la galerie "],["^ Impasse ","  le rond-point de limpasse "],["^ Lotissement ","  le rond-point du lotissement "],["^ Mont[e]e ","  le rond-point de la monte "],["^ Parc ","  le rond-point du parc "],["^ Parvis ","  le rond-point du parvis "],["^ Passage ","  le rond-point du passage "],["^ Place ","  le rond-point de la place "],["^ Petit[\\- ]Pont ","  le rond-point du petit-pont "],["^ Pont ","  le rond-point du pont "],["^ Promenade ","  le rond-point de la promenade "],["^ Quai ","  le rond-point du quai "],["^ Rocade ","  le rond-point de la rocade "],["^ Rond[\\- ]?Point ","  le rond-point "],["^ Route ","  le rond-point de la route "],["^ Rue ","  le rond-point de la rue "],["^ Grande Rue ","  le rond-point de la grande rue "],["^ Sente ","  le rond-point de la sente "],["^ Sentier ","  le rond-point du sentier "],["^ Sortie ","  le rond-point de la sortie "],["^ Souterrain ","  le rond-point du souterrain "],["^ Square ","  le rond-point du square "],["^ Terrasse ","  le rond-point de la terrasse "],["^ Traverse ","  le rond-point de la traverse "],["^ Tunnel ","  le rond-point du tunnel "],["^ Viaduc ","  le rond-point du viaduc "],["^ Villa ","  le rond-point de la villa "],["^ Village ","  le rond-point du village "],["^ Voie ","  le rond-point de la voie "],["^ ([AEIOUY])","  le rond-point d$1"],["^ (\\S)","  le rond-point de $1"],[" ([dl])'"," $1"]],arrival:[["^ Le ","  au "],["^ Les ","  aux "],["^ La ","   La "],["^ (\\S)","   $1"],[" ([dl])'"," $1"]]}}},{}],22:[function(r,i,l){i.exports={meta:{regExpFlags:""},v5:{accusative:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ [][] ","  "]],dative:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "],["([]) ","$1 "]],genitive:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "]],prepositional:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "]]}}},{}],23:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"frste",2:"anden",3:"tredje",4:"fjerde",5:"femte",6:"sjette",7:"syvende",8:"ottende",9:"niende",10:"tiende"},direction:{north:"Nord",northeast:"Nordst",east:"st",southeast:"Sydst",south:"Syd",southwest:"Sydvest",west:"Vest",northwest:"Nordvest"},modifier:{left:"venstresving",right:"hjresving","sharp left":"skarpt venstresving","sharp right":"skarpt hjresving","slight left":"svagt venstresving","slight right":"svagt hjresving",straight:"ligeud",uturn:"U-vending"},lanes:{xo:"Hold til hjre",ox:"Hold til venstre",xox:"Benyt midterste spor",oxo:"Hold til hjre eller venstre"}},modes:{ferry:{default:"Tag frgen",name:"Tag frgen {way_name}",destination:"Tag frgen i retning {destination}"}},phrase:{"two linked by distance":"{instruction_one} derefter, efter {distance}, {instruction_two}","two linked":"{instruction_one}, derefter {instruction_two}","one in distance":"Efter {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":"afkrsel {exit}"},arrive:{default:{default:"Du er ankommet til din {nth} destination",upcoming:"Du vil ankomme til din {nth} destination",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}"},left:{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},right:{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"sharp left":{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},"sharp right":{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"slight right":{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"slight left":{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},straight:{default:"Du er ankommet til din {nth} destination, der befinder sig lige frem",upcoming:"Du vil ankomme til din {nth} destination foran dig",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, der befinder sig lige frem"}},continue:{default:{default:"Drej til {modifier}",name:"Drej til {modifier} videre ad {way_name}",destination:"Drej til {modifier} mod {destination}",exit:"Drej til {modifier} ad {way_name}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst mod {destination}",distance:"Fortst {distance} ligeud",namedistance:"Fortst {distance} ad {way_name}"},"sharp left":{default:"Drej skarpt til venstre",name:"Drej skarpt til venstre videre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre",name:"Drej skarpt til hjre videre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},"slight left":{default:"Drej left til venstre",name:"Drej let til venstre videre ad {way_name}",destination:"Drej let til venstre mod {destination}"},"slight right":{default:"Drej let til hjre",name:"Drej let til hjre videre ad {way_name}",destination:"Drej let til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending tilbage ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},depart:{default:{default:"Kr mod {direction}",name:"Kr mod {direction} ad {way_name}",namedistance:"Fortst {distance} ad {way_name}mod {direction}"}},"end of road":{default:{default:"Drej til {modifier}",name:"Drej til {modifier} ad {way_name}",destination:"Drej til {modifier} mof {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst ligeud mod {destination}"},uturn:{default:"Foretag en U-vending for enden af vejen",name:"Foretag en U-vending ad {way_name} for enden af vejen",destination:"Foretag en U-vending mod {destination} for enden af vejen"}},fork:{default:{default:"Hold til {modifier} ved udfletningen",name:"Hold mod {modifier} p {way_name}",destination:"Hold mod {modifier} mod {destination}"},"slight left":{default:"Hold til venstre ved udfletningen",name:"Hold til venstre p {way_name}",destination:"Hold til venstre mod {destination}"},"slight right":{default:"Hold til hjre ved udfletningen",name:"Hold til hjre p {way_name}",destination:"Hold til hjre mod {destination}"},"sharp left":{default:"Drej skarpt til venstre ved udfletningen",name:"Drej skarpt til venstre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre ved udfletningen",name:"Drej skarpt til hjre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},merge:{default:{default:"Flet til {modifier}",name:"Flet til {modifier} ad {way_name}",destination:"Flet til {modifier} mod {destination}"},straight:{default:"Flet",name:"Flet ind p {way_name}",destination:"Flet ind mod {destination}"},"slight left":{default:"Flet til venstre",name:"Flet til venstre ad {way_name}",destination:"Flet til venstre mod {destination}"},"slight right":{default:"Flet til hjre",name:"Flet til hjre ad {way_name}",destination:"Flet til hjre mod {destination}"},"sharp left":{default:"Flet til venstre",name:"Flet til venstre ad {way_name}",destination:"Flet til venstre mod {destination}"},"sharp right":{default:"Flet til hjre",name:"Flet til hjre ad {way_name}",destination:"Flet til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},"new name":{default:{default:"Fortst {modifier}",name:"Fortst {modifier} ad {way_name}",destination:"Fortst {modifier} mod {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ad {way_name}",destination:"Fortst mod {destination}"},"sharp left":{default:"Drej skarpt til venstre",name:"Drej skarpt til venstre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre",name:"Drej skarpt til hjre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},"slight left":{default:"Fortst til venstre",name:"Fortst til venstre ad {way_name}",destination:"Fortst til venstre mod {destination}"},"slight right":{default:"Fortst til hjre",name:"Fortst til hjre ad {way_name}",destination:"Fortst til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},notification:{default:{default:"Fortst {modifier}",name:"Fortst {modifier} ad {way_name}",destination:"Fortst {modifier} mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},"off ramp":{default:{default:"Tag afkrslen",name:"Tag afkrslen ad {way_name}",destination:"Tag afkrslen mod {destination}",exit:"Vlg afkrsel {exit}",exit_destination:"Vlg afkrsel {exit} mod {destination}"},left:{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},right:{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"},"sharp left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},"sharp right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"},"slight left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},"slight right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"}},"on ramp":{default:{default:"Tag afkrslen",name:"Tag afkrslen ad {way_name}",destination:"Tag afkrslen mod {destination}"},left:{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},right:{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"},"sharp left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},"sharp right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"},"slight left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},"slight right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"}},rotary:{default:{default:{default:"Kr ind i rundkrslen",name:"Tag rundkrslen og kr fra ad {way_name}",destination:"Tag rundkrslen og kr mod {destination}"},name:{default:"Kr ind i {rotary_name}",name:"Kr ind i {rotary_name} og kr ad {way_name} ",destination:"Kr ind i {rotary_name} og kr mod {destination}"},exit:{default:"Tag rundkrslen og forlad ved {exit_number} afkrsel",name:"Tag rundkrslen og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Tag rundkrslen og forlad ved {exit_number} afkrsel mod {destination}"},name_exit:{default:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel",name:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel mod {destination}"}}},roundabout:{default:{exit:{default:"Tag rundkrslen og forlad ved {exit_number} afkrsel",name:"Tag rundkrslen og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Tag rundkrslen og forlad ved {exit_number} afkrsel mod {destination}"},default:{default:"Kr ind i rundkrslen",name:"Tag rundkrslen og kr fra ad {way_name}",destination:"Tag rundkrslen og kr mod {destination}"}}},"roundabout turn":{default:{default:"Foretag et {modifier}",name:"Foretag et {modifier} ad {way_name}",destination:"Foretag et {modifier} mod {destination}"},left:{default:"Drej til venstre",name:"Drej til venstre ad {way_name}",destination:"Drej til venstre mod {destination}"},right:{default:"Drej til hjre",name:"Drej til hjre ad {way_name}",destination:"Drej til hjre mod {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst ligeud mod {destination}"}},"exit roundabout":{default:{default:"Forlad rundkrslen",name:"Forlad rundkrslen ad {way_name}",destination:"Forlad rundkrslen mod  {destination}"}},"exit rotary":{default:{default:"Forlad rundkrslen",name:"Forlad rundkrslen ad {way_name}",destination:"Forlad rundkrslen mod {destination}"}},turn:{default:{default:"Foretag et {modifier}",name:"Foretag et {modifier} ad {way_name}",destination:"Foretag et {modifier} mod {destination}"},left:{default:"Drej til venstre",name:"Drej til venstre ad {way_name}",destination:"Drej til venstre mod {destination}"},right:{default:"Drej til hjre",name:"Drej til hjre ad {way_name}",destination:"Drej til hjre mod {destination}"},straight:{default:"Fortst ligeud",name:"Kr ligeud ad {way_name}",destination:"Kr ligeud mod {destination}"}},"use lane":{no_lanes:{default:"Fortst ligeud"},default:{default:"{lane_instruction}"}}}}},{}],24:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"erste",2:"zweite",3:"dritte",4:"vierte",5:"fnfte",6:"sechste",7:"siebente",8:"achte",9:"neunte",10:"zehnte"},direction:{north:"Norden",northeast:"Nordosten",east:"Osten",southeast:"Sdosten",south:"Sden",southwest:"Sdwesten",west:"Westen",northwest:"Nordwesten"},modifier:{left:"links",right:"rechts","sharp left":"scharf links","sharp right":"scharf rechts","slight left":"leicht links","slight right":"leicht rechts",straight:"geradeaus",uturn:"180-Wendung"},lanes:{xo:"Rechts halten",ox:"Links halten",xox:"Mittlere Spur nutzen",oxo:"Rechts oder links halten"}},modes:{ferry:{default:"Fhre nehmen",name:"Fhre nehmen {way_name}",destination:"Fhre nehmen Richtung {destination}"}},phrase:{"two linked by distance":"{instruction_one} danach in {distance} {instruction_two}","two linked":"{instruction_one} danach {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Sie haben Ihr {nth} Ziel erreicht",upcoming:"Sie haben Ihr {nth} Ziel erreicht",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}"},left:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},right:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"sharp left":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},"sharp right":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"slight right":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"slight left":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},straight:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich geradeaus",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich geradeaus",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich geradeaus"}},continue:{default:{default:"{modifier} abbiegen",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}",exit:"{modifier} abbiegen auf {way_name}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Weiterfahren in Richtung {destination}",distance:"Geradeaus weiterfahren fr {distance}",namedistance:"Geradeaus weiterfahren auf {way_name} fr {distance}"},"sharp left":{default:"Scharf links",name:"Scharf links weiterfahren auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts",name:"Scharf rechts weiterfahren auf {way_name}",destination:"Scharf rechts Richtung {destination}"},"slight left":{default:"Leicht links",name:"Leicht links weiter auf {way_name}",destination:"Leicht links weiter Richtung {destination}"},"slight right":{default:"Leicht rechts weiter",name:"Leicht rechts weiter auf {way_name}",destination:"Leicht rechts weiter Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},depart:{default:{default:"Fahren Sie Richtung {direction}",name:"Fahren Sie Richtung {direction} auf {way_name}",namedistance:"Fahren Sie Richtung {direction} auf {way_name} fr {distance}"}},"end of road":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"},uturn:{default:"180-Wendung am Ende der Strae",name:"180-Wendung auf {way_name} am Ende der Strae",destination:"180-Wendung Richtung {destination} am Ende der Strae"}},fork:{default:{default:"{modifier} halten an der Gabelung",name:"{modifier} halten an der Gabelung auf {way_name}",destination:"{modifier}  halten an der Gabelung Richtung {destination}"},"slight left":{default:"Links halten an der Gabelung",name:"Links halten an der Gabelung auf {way_name}",destination:"Links halten an der Gabelung Richtung {destination}"},"slight right":{default:"Rechts halten an der Gabelung",name:"Rechts halten an der Gabelung auf {way_name}",destination:"Rechts halten an der Gabelung Richtung {destination}"},"sharp left":{default:"Scharf links abbiegen an der Gabelung",name:"Scharf links auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts abbiegen an der Gabelung",name:"Scharf rechts auf {way_name}",destination:"Scharf rechts Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},merge:{default:{default:"{modifier} auffahren",name:"{modifier} auffahren auf {way_name}",destination:"{modifier} auffahren Richtung {destination}"},straight:{default:"geradeaus auffahren",name:"geradeaus auffahren auf {way_name}",destination:"geradeaus auffahren Richtung {destination}"},"slight left":{default:"Leicht links auffahren",name:"Leicht links auffahren auf {way_name}",destination:"Leicht links auffahren Richtung {destination}"},"slight right":{default:"Leicht rechts auffahren",name:"Leicht rechts auffahren auf {way_name}",destination:"Leicht rechts auffahren Richtung {destination}"},"sharp left":{default:"Scharf links auffahren",name:"Scharf links auffahren auf {way_name}",destination:"Scharf links auffahren Richtung {destination}"},"sharp right":{default:"Scharf rechts auffahren",name:"Scharf rechts auffahren auf {way_name}",destination:"Scharf rechts auffahren Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},"new name":{default:{default:"{modifier} weiterfahren",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} weiterfahren Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Weiterfahren auf {way_name}",destination:"Weiterfahren in Richtung {destination}"},"sharp left":{default:"Scharf links",name:"Scharf links auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts",name:"Scharf rechts auf {way_name}",destination:"Scharf rechts Richtung {destination}"},"slight left":{default:"Leicht links weiter",name:"Leicht links weiter auf {way_name}",destination:"Leicht links weiter Richtung {destination}"},"slight right":{default:"Leicht rechts weiter",name:"Leicht rechts weiter auf {way_name}",destination:"Leicht rechts weiter Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},notification:{default:{default:"{modifier} weiterfahren",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} weiterfahren Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},"off ramp":{default:{default:"Ausfahrt nehmen",name:"Ausfahrt nehmen auf {way_name}",destination:"Ausfahrt nehmen Richtung {destination}",exit:"Ausfahrt {exit} nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},left:{default:"Ausfahrt links nehmen",name:"Ausfahrt links nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} links nehmen",exit_destination:"Ausfahrt {exit} links nehmen Richtung {destination}"},right:{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen Richtung {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},"sharp left":{default:"Ausfahrt links nehmen",name:"Ausfahrt links Seite nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} links nehmen",exit_destination:"Ausfahrt{exit} links nehmen Richtung {destination}"},"sharp right":{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen auf {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},"slight left":{default:"Ausfahrt links nehmen",name:"Ausfahrt links nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} nehmen",exit_destination:"Ausfahrt {exit} links nehmen Richtung {destination}"},"slight right":{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen auf {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"}},"on ramp":{default:{default:"Auffahrt nehmen",name:"Auffahrt nehmen auf {way_name}",destination:"Auffahrt nehmen Richtung {destination}"},left:{default:"Auffahrt links nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},right:{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"},"sharp left":{default:"Auffahrt links nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},"sharp right":{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"},"slight left":{default:"Auffahrt links Seite nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},"slight right":{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"}},rotary:{default:{default:{default:"In den Kreisverkehr fahren",name:"Im Kreisverkehr die Ausfahrt auf {way_name} nehmen",destination:"Im Kreisverkehr die Ausfahrt Richtung {destination} nehmen"},name:{default:"In {rotary_name} fahren",name:"In {rotary_name} die Ausfahrt auf {way_name} nehmen",destination:"In {rotary_name} die Ausfahrt Richtung {destination} nehmen"},exit:{default:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen",name:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen auf {way_name}",destination:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen Richtung {destination}"},name_exit:{default:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen",name:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen auf {way_name}",destination:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen Richtung {destination}"}}},roundabout:{default:{exit:{default:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen",name:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen auf {way_name}",destination:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen Richtung {destination}"},default:{default:"In den Kreisverkehr fahren",name:"Im Kreisverkehr die Ausfahrt auf {way_name} nehmen",destination:"Im Kreisverkehr die Ausfahrt Richtung {destination} nehmen"}}},"roundabout turn":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"exit roundabout":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"exit rotary":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},turn:{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"use lane":{no_lanes:{default:"Geradeaus weiterfahren"},default:{default:"{lane_instruction}"}}}}},{}],25:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th"},direction:{north:"north",northeast:"northeast",east:"east",southeast:"southeast",south:"south",southwest:"southwest",west:"west",northwest:"northwest"},modifier:{left:"left",right:"right","sharp left":"sharp left","sharp right":"sharp right","slight left":"slight left","slight right":"slight right",straight:"straight",uturn:"U-turn"},lanes:{xo:"Keep right",ox:"Keep left",xox:"Keep in the middle",oxo:"Keep left or right"}},modes:{ferry:{default:"Take the ferry",name:"Take the ferry {way_name}",destination:"Take the ferry towards {destination}"}},phrase:{"two linked by distance":"{instruction_one}, then, in {distance}, {instruction_two}","two linked":"{instruction_one}, then {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"You have arrived at your {nth} destination",upcoming:"You will arrive at your {nth} destination",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}"},left:{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},right:{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"sharp left":{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},"sharp right":{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"slight right":{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"slight left":{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},straight:{default:"You have arrived at your {nth} destination, straight ahead",upcoming:"You will arrive at your {nth} destination, straight ahead",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, straight ahead"}},continue:{default:{default:"Turn {modifier}",name:"Turn {modifier} to stay on {way_name}",destination:"Turn {modifier} towards {destination}",exit:"Turn {modifier} onto {way_name}"},straight:{default:"Continue straight",name:"Continue straight to stay on {way_name}",destination:"Continue towards {destination}",distance:"Continue straight for {distance}",namedistance:"Continue on {way_name} for {distance}"},"sharp left":{default:"Make a sharp left",name:"Make a sharp left to stay on {way_name}",destination:"Make a sharp left towards {destination}"},"sharp right":{default:"Make a sharp right",name:"Make a sharp right to stay on {way_name}",destination:"Make a sharp right towards {destination}"},"slight left":{default:"Make a slight left",name:"Make a slight left to stay on {way_name}",destination:"Make a slight left towards {destination}"},"slight right":{default:"Make a slight right",name:"Make a slight right to stay on {way_name}",destination:"Make a slight right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn and continue on {way_name}",destination:"Make a U-turn towards {destination}"}},depart:{default:{default:"Head {direction}",name:"Head {direction} on {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Turn {modifier}",name:"Turn {modifier} onto {way_name}",destination:"Turn {modifier} towards {destination}"},straight:{default:"Continue straight",name:"Continue straight onto {way_name}",destination:"Continue straight towards {destination}"},uturn:{default:"Make a U-turn at the end of the road",name:"Make a U-turn onto {way_name} at the end of the road",destination:"Make a U-turn towards {destination} at the end of the road"}},fork:{default:{default:"Keep {modifier} at the fork",name:"Keep {modifier} onto {way_name}",destination:"Keep {modifier} towards {destination}"},"slight left":{default:"Keep left at the fork",name:"Keep left onto {way_name}",destination:"Keep left towards {destination}"},"slight right":{default:"Keep right at the fork",name:"Keep right onto {way_name}",destination:"Keep right towards {destination}"},"sharp left":{default:"Take a sharp left at the fork",name:"Take a sharp left onto {way_name}",destination:"Take a sharp left towards {destination}"},"sharp right":{default:"Take a sharp right at the fork",name:"Take a sharp right onto {way_name}",destination:"Take a sharp right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},merge:{default:{default:"Merge {modifier}",name:"Merge {modifier} onto {way_name}",destination:"Merge {modifier} towards {destination}"},straight:{default:"Merge",name:"Merge onto {way_name}",destination:"Merge towards {destination}"},"slight left":{default:"Merge left",name:"Merge left onto {way_name}",destination:"Merge left towards {destination}"},"slight right":{default:"Merge right",name:"Merge right onto {way_name}",destination:"Merge right towards {destination}"},"sharp left":{default:"Merge left",name:"Merge left onto {way_name}",destination:"Merge left towards {destination}"},"sharp right":{default:"Merge right",name:"Merge right onto {way_name}",destination:"Merge right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} onto {way_name}",destination:"Continue {modifier} towards {destination}"},straight:{default:"Continue straight",name:"Continue onto {way_name}",destination:"Continue towards {destination}"},"sharp left":{default:"Take a sharp left",name:"Take a sharp left onto {way_name}",destination:"Take a sharp left towards {destination}"},"sharp right":{default:"Take a sharp right",name:"Take a sharp right onto {way_name}",destination:"Take a sharp right towards {destination}"},"slight left":{default:"Continue slightly left",name:"Continue slightly left onto {way_name}",destination:"Continue slightly left towards {destination}"},"slight right":{default:"Continue slightly right",name:"Continue slightly right onto {way_name}",destination:"Continue slightly right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} onto {way_name}",destination:"Continue {modifier} towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},"off ramp":{default:{default:"Take the ramp",name:"Take the ramp onto {way_name}",destination:"Take the ramp towards {destination}",exit:"Take exit {exit}",exit_destination:"Take exit {exit} towards {destination}"},left:{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},right:{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"sharp left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"sharp right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"slight left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"slight right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"}},"on ramp":{default:{default:"Take the ramp",name:"Take the ramp onto {way_name}",destination:"Take the ramp towards {destination}"},left:{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},right:{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"},"sharp left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},"sharp right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"},"slight left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},"slight right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"}},rotary:{default:{default:{default:"Enter the traffic circle",name:"Enter the traffic circle and exit onto {way_name}",destination:"Enter the traffic circle and exit towards {destination}"},name:{default:"Enter {rotary_name}",name:"Enter {rotary_name} and exit onto {way_name}",destination:"Enter {rotary_name} and exit towards {destination}"},exit:{default:"Enter the traffic circle and take the {exit_number} exit",name:"Enter the traffic circle and take the {exit_number} exit onto {way_name}",destination:"Enter the traffic circle and take the {exit_number} exit towards {destination}"},name_exit:{default:"Enter {rotary_name} and take the {exit_number} exit",name:"Enter {rotary_name} and take the {exit_number} exit onto {way_name}",destination:"Enter {rotary_name} and take the {exit_number} exit towards {destination}"}}},roundabout:{default:{exit:{default:"Enter the traffic circle and take the {exit_number} exit",name:"Enter the traffic circle and take the {exit_number} exit onto {way_name}",destination:"Enter the traffic circle and take the {exit_number} exit towards {destination}"},default:{default:"Enter the traffic circle",name:"Enter the traffic circle and exit onto {way_name}",destination:"Enter the traffic circle and exit towards {destination}"}}},"roundabout turn":{default:{default:"Make a {modifier}",name:"Make a {modifier} onto {way_name}",destination:"Make a {modifier} towards {destination}"},left:{default:"Turn left",name:"Turn left onto {way_name}",destination:"Turn left towards {destination}"},right:{default:"Turn right",name:"Turn right onto {way_name}",destination:"Turn right towards {destination}"},straight:{default:"Continue straight",name:"Continue straight onto {way_name}",destination:"Continue straight towards {destination}"}},"exit roundabout":{default:{default:"Exit the traffic circle",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},"exit rotary":{default:{default:"Exit the traffic circle",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},turn:{default:{default:"Make a {modifier}",name:"Make a {modifier} onto {way_name}",destination:"Make a {modifier} towards {destination}"},left:{default:"Turn left",name:"Turn left onto {way_name}",destination:"Turn left towards {destination}"},right:{default:"Turn right",name:"Turn right onto {way_name}",destination:"Turn right towards {destination}"},straight:{default:"Go straight",name:"Go straight onto {way_name}",destination:"Go straight towards {destination}"}},"use lane":{no_lanes:{default:"Continue straight"},default:{default:"{lane_instruction}"}}}}},{}],26:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"norden",northeast:"nord-orienten",east:"orienten",southeast:"sud-orienten",south:"suden",southwest:"sud-okcidenten",west:"okcidenten",northwest:"nord-okcidenten"},modifier:{left:"maldekstren",right:"dekstren","sharp left":"maldekstregen","sharp right":"dekstregen","slight left":"maldekstreten","slight right":"dekstreten",straight:"rekten",uturn:"turniu malantaen"},lanes:{xo:"Veturu dekstre",ox:"Veturu maldekstre",xox:"Veturu meze",oxo:"Veturu dekstre a maldekstre"}},modes:{ferry:{default:"Enpramiu",name:"Enpramiu {way_name}",destination:"Enpramiu direkte al {destination}"}},phrase:{"two linked by distance":"{instruction_one} kaj post {distance} {instruction_two}","two linked":"{instruction_one} kaj sekve {instruction_two}","one in distance":"Post {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"elveturejo {exit}"},arrive:{default:{default:"Vi atingis vian {nth} celon",upcoming:"Vi atingos vian {nth} celon",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}"},left:{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},right:{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"sharp left":{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},"sharp right":{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"slight right":{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"slight left":{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},straight:{default:"Vi atingis vian {nth} celon",upcoming:"Vi atingos vian {nth} celon rekte",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name} antae"}},continue:{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}",exit:"Veturu {modifier} direkte al {way_name}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}",distance:"Veturu rekten dum {distance}",namedistance:"Veturu rekten al {way_name} dum {distance}"},"sharp left":{default:"Turniu ege maldekstren",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Turniu ege dekstren",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},"slight left":{default:"Turniu ete maldekstren",name:"Turniu ete maldekstren al {way_name}",destination:"Turniu ete maldekstren direkte al {destination}"},"slight right":{default:"Turniu ete dekstren",name:"Turniu ete dekstren al {way_name}",destination:"Turniu ete dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},depart:{default:{default:"Direktiu {direction}",name:"Direktiu {direction} al {way_name}",namedistance:"Direktiu {direction} al {way_name} tra {distance}"}},"end of road":{default:{default:"Veturu {modifier}",name:"Veturu {modifier} direkte al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"},uturn:{default:"Turniu malantaen e fino de la vojo",name:"Turniu malantaen al {way_name} e fino de la vojo",destination:"Turniu malantaen direkte al {destination} e fino de la vojo"}},fork:{default:{default:"Daru {modifier} e la vojforko",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},"slight left":{default:"Maldekstren e la vojforko",name:"Pluu maldekstren al {way_name}",destination:"Pluu maldekstren direkte al {destination}"},"slight right":{default:"Dekstren e la vojforko",name:"Pluu dekstren al {way_name}",destination:"Pluu dekstren direkte al {destination}"},"sharp left":{default:"Ege maldekstren e la vojforko",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Ege dekstren e la vojforko",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},merge:{default:{default:"Enveturu {modifier}",name:"Enveturu {modifier} al {way_name}",destination:"Enveturu {modifier} direkte al {destination}"},straight:{default:"Enveturu",name:"Enveturu al {way_name}",destination:"Enveturu direkte al {destination}"},"slight left":{default:"Enveturu de maldekstre",name:"Enveturu de maldekstre al {way_name}",destination:"Enveturu de maldekstre direkte al {destination}"},"slight right":{default:"Enveturu de dekstre",name:"Enveturu de dekstre al {way_name}",destination:"Enveturu de dekstre direkte al {destination}"},"sharp left":{default:"Enveturu de maldekstre",name:"Enveture de maldekstre al {way_name}",destination:"Enveturu de maldekstre direkte al {destination}"},"sharp right":{default:"Enveturu de dekstre",name:"Enveturu de dekstre al {way_name}",destination:"Enveturu de dekstre direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},"new name":{default:{default:"Pluu {modifier}",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"},"sharp left":{default:"Turniu ege maldekstren",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Turniu ege dekstren",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},"slight left":{default:"Pluu ete maldekstren",name:"Pluu ete maldekstren al {way_name}",destination:"Pluu ete maldekstren direkte al {destination}"},"slight right":{default:"Pluu ete dekstren",name:"Pluu ete dekstren al {way_name}",destination:"Pluu ete dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},notification:{default:{default:"Pluu {modifier}",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},"off ramp":{default:{default:"Direktiu al enveturejo",name:"Direktiu al enveturejo al {way_name}",destination:"Direktiu al enveturejo direkte al {destination}",exit:"Direktiu al elveturejo {exit}",exit_destination:"Direktiu al elveturejo {exit} direkte al {destination}"},left:{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al elveturejo {exit} e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},right:{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al {exit} elveturejo e ldekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"},"sharp left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al {exit} elveturejo e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},"sharp right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al elveturejo {exit} e dekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"},"slight left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al {exit} elveturejo e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},"slight right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al {exit} elveturejo e ldekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"}},"on ramp":{default:{default:"Direktiu al enveturejo",name:"Direktiu al enveturejo al {way_name}",destination:"Direktiu al enveturejo direkte al {destination}"},left:{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},right:{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"},"sharp left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},"sharp right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"},"slight left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},"slight right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"}},rotary:{default:{default:{default:"Enveturu trafikcirklegon",name:"Enveturu trafikcirklegon kaj elveturu al {way_name}",destination:"Enveturu trafikcirklegon kaj elveturu direkte al {destination}"},name:{default:"Enveturu {rotary_name}",name:"Enveturu {rotary_name} kaj elveturu al {way_name}",destination:"Enveturu {rotary_name} kaj elveturu direkte al {destination}"},exit:{default:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo",name:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo direkte al {destination}"},name_exit:{default:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo",name:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo direkte al {destination}"}}},roundabout:{default:{exit:{default:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo",name:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo direkte al {destination}"},default:{default:"Enveturu trafikcirklegon",name:"Enveturu trafikcirklegon kaj elveturu al {way_name}",destination:"Enveturu trafikcirklegon kaj elveturu direkte al {destination}"}}},"roundabout turn":{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},left:{default:"Turniu maldekstren",name:"Turniu maldekstren al {way_name}",destination:"Turniu maldekstren direkte al {destination}"},right:{default:"Turniu dekstren",name:"Turniu dekstren al {way_name}",destination:"Turniu dekstren direkte al {destination}"},straight:{default:"Pluu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"}},"exit roundabout":{default:{default:"Elveturu trafikcirklegon",name:"Elveturu trafikcirklegon al {way_name}",destination:"Elveturu trafikcirklegon direkte al {destination}"}},"exit rotary":{default:{default:"Eliru trafikcirklegon",name:"Elveturu trafikcirklegon al {way_name}",destination:"Elveturu trafikcirklegon direkte al {destination}"}},turn:{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},left:{default:"Turniu maldekstren",name:"Turniu maldekstren al {way_name}",destination:"Turniu maldekstren direkte al {destination}"},right:{default:"Turniu dekstren",name:"Turniu dekstren al {way_name}",destination:"Turniu dekstren direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"}},"use lane":{no_lanes:{default:"Pluu rekten"},default:{default:"{lane_instruction}"}}}}},{}],27:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"noreste",east:"este",southeast:"sureste",south:"sur",southwest:"suroeste",west:"oeste",northwest:"noroeste"},modifier:{left:"a la izquierda",right:"a la derecha","sharp left":"cerrada a la izquierda","sharp right":"cerrada a la derecha","slight left":"ligeramente a la izquierda","slight right":"ligeramente a la derecha",straight:"recto",uturn:"cambio de sentido"},lanes:{xo:"Mantente a la derecha",ox:"Mantente a la izquierda",xox:"Mantente en el medio",oxo:"Mantente a la izquierda o a la derecha"}},modes:{ferry:{default:"Coge el ferry",name:"Coge el ferry {way_name}",destination:"Coge el ferry hacia {destination}"}},phrase:{"two linked by distance":"{instruction_one} y luego en {distance}, {instruction_two}","two linked":"{instruction_one} y luego {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"salida {exit}"},arrive:{default:{default:"Has llegado a tu {nth} destino",upcoming:"Vas a llegar a tu {nth} destino",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}"},left:{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},right:{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"sharp left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},"sharp right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},straight:{default:"Has llegado a tu {nth} destino, en frente",upcoming:"Vas a llegar a tu {nth} destino, en frente",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, en frente"}},continue:{default:{default:"Gire {modifier}",name:"Cruce {modifier} en {way_name}",destination:"Gire {modifier} hacia {destination}",exit:"Gire {modifier} en {way_name}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}",distance:"Contina recto por {distance}",namedistance:"Contina recto en {way_name} por {distance}"},"sharp left":{default:"Gire a la izquierda",name:"Gire a la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},"sharp right":{default:"Gire a la derecha",name:"Gire a la derecha en {way_name}",destination:"Gire a la derecha hacia {destination}"},"slight left":{default:"Gire a la izquierda",name:"Doble levementea la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},"slight right":{default:"Gire a la izquierda",name:"Doble levemente a la derecha en {way_name}",destination:"Gire a la izquierda hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido y contina en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},depart:{default:{default:"Dirgete al {direction}",name:"Dirgete al {direction} por {way_name}",namedistance:"Dirgete al {direction} en {way_name} por {distance}"}},"end of road":{default:{default:"Al final de la calle gira {modifier}",name:"Al final de la calle gira {modifier} por {way_name}",destination:"Al final de la calle gira {modifier} hacia {destination}"},straight:{default:"Al final de la calle contina recto",name:"Al final de la calle contina recto por {way_name}",destination:"Al final de la calle contina recto hacia {destination}"},uturn:{default:"Al final de la calle haz un cambio de sentido",name:"Al final de la calle haz un cambio de sentido en {way_name}",destination:"Al final de la calle haz un cambio de sentido hacia {destination}"}},fork:{default:{default:"Mantente {modifier} en el cruce",name:"Mantente {modifier} por {way_name}",destination:"Mantente {modifier} hacia {destination}"},"slight left":{default:"Mantente a la izquierda en el cruce",name:"Mantente a la izquierda por {way_name}",destination:"Mantente a la izquierda hacia {destination}"},"slight right":{default:"Mantente a la derecha en el cruce",name:"Mantente a la derecha por {way_name}",destination:"Mantente a la derecha hacia {destination}"},"sharp left":{default:"Gira la izquierda en el cruce",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha en el cruce",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},merge:{default:{default:"Incorprate {modifier}",name:"Incorprate {modifier} por {way_name}",destination:"Incorprate {modifier} hacia {destination}"},straight:{default:"Incorprate",name:"Incorprate por {way_name}",destination:"Incorprate hacia {destination}"},"slight left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda por {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"slight right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha por {way_name}",destination:"Incorprate a la derecha hacia {destination}"},"sharp left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda por {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"sharp right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha por {way_name}",destination:"Incorprate a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"new name":{default:{default:"Contina {modifier}",name:"Contina {modifier} por {way_name}",destination:"Contina {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina por {way_name}",destination:"Contina hacia {destination}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Contina ligeramente por la izquierda",name:"Contina ligeramente por la izquierda por {way_name}",destination:"Contina ligeramente por la izquierda hacia {destination}"},"slight right":{default:"Contina ligeramente por la derecha",name:"Contina ligeramente por la derecha por {way_name}",destination:"Contina ligeramente por la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},notification:{default:{default:"Contina {modifier}",name:"Contina {modifier} por {way_name}",destination:"Contina {modifier} hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"off ramp":{default:{default:"Coge la cuesta abajo",name:"Coge la cuesta abajo por {way_name}",destination:"Coge la cuesta abajo hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},left:{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo {exit} a tu izquierda hacia {destination}"},right:{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},"sharp left":{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo {exit} a tu izquierda hacia {destination}"},"sharp right":{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},"slight left":{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo{exit} a tu izquierda hacia {destination}"},"slight right":{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"}},"on ramp":{default:{default:"Coge la cuesta",name:"Coge la cuesta por {way_name}",destination:"Coge la cuesta hacia {destination}"},left:{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},right:{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"},"sharp left":{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},"sharp right":{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"},"slight left":{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},"slight right":{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"}},rotary:{default:{default:{default:"Incorprate en la rotonda",name:"En la rotonda sal por {way_name}",destination:"En la rotonda sal hacia {destination}"},name:{default:"En {rotary_name}",name:"En {rotary_name} sal por {way_name}",destination:"En {rotary_name} sal hacia {destination}"},exit:{default:"En la rotonda toma la {exit_number} salida",name:"En la rotonda toma la {exit_number} salida por {way_name}",destination:"En la rotonda toma la {exit_number} salida hacia {destination}"},name_exit:{default:"En {rotary_name} toma la {exit_number} salida",name:"En {rotary_name} toma la {exit_number} salida por {way_name}",destination:"En {rotary_name} toma la {exit_number} salida hacia {destination}"}}},roundabout:{default:{exit:{default:"En la rotonda toma la {exit_number} salida",name:"En la rotonda toma la {exit_number} salida por {way_name}",destination:"En la rotonda toma la {exit_number} salida hacia {destination}"},default:{default:"Incorprate en la rotonda",name:"Incorprate en la rotonda y sal en {way_name}",destination:"Incorprate en la rotonda y sal hacia {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} en {way_name}",destination:"Siga {modifier} hacia {destination}"},left:{default:"Gire a la izquierda",name:"Gire a la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},right:{default:"Gire a la derecha",name:"Gire a la derecha en {way_name}",destination:"Gire a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto por {way_name}",destination:"Contina recto hacia {destination}"}},"exit roundabout":{default:{default:"Sal la rotonda",name:"Toma la salida por {way_name}",destination:"Toma la salida hacia {destination}"}},"exit rotary":{default:{default:"Sal la rotonda",name:"Toma la salida por {way_name}",destination:"Toma la salida hacia {destination}"}},turn:{default:{default:"Gira {modifier}",name:"Gira {modifier} por {way_name}",destination:"Gira {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto por {way_name}",destination:"Contina recto hacia {destination}"}},"use lane":{no_lanes:{default:"Contina recto"},default:{default:"{lane_instruction}"}}}}},{}],28:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"noreste",east:"este",southeast:"sureste",south:"sur",southwest:"suroeste",west:"oeste",northwest:"noroeste"},modifier:{left:"izquierda",right:"derecha","sharp left":"cerrada a la izquierda","sharp right":"cerrada a la derecha","slight left":"levemente a la izquierda","slight right":"levemente a la derecha",straight:"recto",uturn:"cambio de sentido"},lanes:{xo:"Mantente a la derecha",ox:"Mantente a la izquierda",xox:"Mantente en el medio",oxo:"Mantente a la izquierda o derecha"}},modes:{ferry:{default:"Coge el ferry",name:"Coge el ferry {way_name}",destination:"Coge el ferry a {destination}"}},phrase:{"two linked by distance":"{instruction_one} y luego a {distance}, {instruction_two}","two linked":"{instruction_one} y luego {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"salida {exit}"},arrive:{default:{default:"Has llegado a tu {nth} destino",upcoming:"Vas a llegar a tu {nth} destino",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}"},left:{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},right:{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"sharp left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},"sharp right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},straight:{default:"Has llegado a tu {nth} destino, en frente",upcoming:"Vas a llegar a tu {nth} destino, en frente",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, en frente"}},continue:{default:{default:"Gira a {modifier}",name:"Cruza a la{modifier}  en {way_name}",destination:"Gira a {modifier} hacia {destination}",exit:"Gira a {modifier} en {way_name}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}",distance:"Contina recto por {distance}",namedistance:"Contina recto en {way_name} por {distance}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Gira a la izquierda",name:"Dobla levemente a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"slight right":{default:"Gira a la izquierda",name:"Dobla levemente a la derecha en {way_name}",destination:"Gira a la izquierda hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido y contina en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},depart:{default:{default:"Ve a {direction}",name:"Ve a {direction} en {way_name}",namedistance:"Ve a {direction} en {way_name} por {distance}"}},"end of road":{default:{default:"Gira  a {modifier}",name:"Gira a {modifier} en {way_name}",destination:"Gira a {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto en {way_name}",destination:"Contina recto hacia {destination}"},uturn:{default:"Haz un cambio de sentido al final de la via",name:"Haz un cambio de sentido en {way_name} al final de la via",destination:"Haz un cambio de sentido hacia {destination} al final de la via"}},fork:{default:{default:"Mantente  {modifier} en el cruza",name:"Mantente {modifier} en {way_name}",destination:"Mantente {modifier} hacia {destination}"},"slight left":{default:"Mantente a la izquierda en el cruza",name:"Mantente a la izquierda en {way_name}",destination:"Mantente a la izquierda hacia {destination}"},"slight right":{default:"Mantente a la derecha en el cruza",name:"Mantente a la derecha en {way_name}",destination:"Mantente a la derecha hacia {destination}"},"sharp left":{default:"Gira a la izquierda en el cruza",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha en el cruza",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},merge:{default:{default:"Incorprate a {modifier}",name:"Incorprate a {modifier} en {way_name}",destination:"Incorprate a {modifier} hacia {destination}"},straight:{default:"Incorprate",name:"Incorprate a {way_name}",destination:"Incorprate hacia {destination}"},"slight left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda en {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"slight right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha en {way_name}",destination:"Incorprate a la derecha hacia {destination}"},"sharp left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda en {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"sharp right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha en {way_name}",destination:"Incorprate a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"new name":{default:{default:"Contina {modifier}",name:"Contina {modifier} en {way_name}",destination:"Contina {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Contina levemente a la izquierda",name:"Contina levemente a la izquierda en {way_name}",destination:"Contina levemente a la izquierda hacia {destination}"},"slight right":{default:"Contina levemente a la derecha",name:"Contina levemente a la derecha en {way_name}",destination:"Contina levemente a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},notification:{default:{default:"Contina {modifier}",name:"Contina {modifier} en {way_name}",destination:"Contina {modifier} hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"off ramp":{default:{default:"Toma la salida",name:"Toma la salida en {way_name}",destination:"Toma la salida hacia {destination}",exit:"Toma la salida {exit}",exit_destination:"Toma la salida {exit} hacia {destination}"},left:{default:"Toma la salida en la izquierda",name:"Toma la salida en la izquierda en {way_name}",destination:"Toma la salida en la izquierda en {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},right:{default:"Toma la salida en la derecha",name:"Toma la salida en la derecha en {way_name}",destination:"Toma la salida en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"},"sharp left":{default:"Ve cuesta abajo en la izquierda",name:"Ve cuesta abajo en la izquierda en {way_name}",destination:"Ve cuesta abajo en la izquierda hacia {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},"sharp right":{default:"Ve cuesta abajo en la derecha",name:"Ve cuesta abajo en la derecha en {way_name}",destination:"Ve cuesta abajo en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"},"slight left":{default:"Ve cuesta abajo en la izquierda",name:"Ve cuesta abajo en la izquierda en {way_name}",destination:"Ve cuesta abajo en la izquierda hacia {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},"slight right":{default:"Toma la salida en la derecha",name:"Toma la salida en la derecha en {way_name}",destination:"Toma la salida en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"}},"on ramp":{default:{default:"Toma la rampa",name:"Toma la rampa en {way_name}",destination:"Toma la rampa hacia {destination}"},left:{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},right:{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"},"sharp left":{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},"sharp right":{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"},"slight left":{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},"slight right":{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"}},rotary:{default:{default:{default:"Entra en la rotonda",name:"Entra en la rotonda y sal en {way_name}",destination:"Entra en la rotonda y sal hacia {destination}"},name:{default:"Entra en {rotary_name}",name:"Entra en {rotary_name} y sal en {way_name}",destination:"Entra en {rotary_name} y sal hacia {destination}"},exit:{default:"Entra en la rotonda y toma la {exit_number} salida",name:"Entra en la rotonda y toma la {exit_number} salida a {way_name}",destination:"Entra en la rotonda y toma la {exit_number} salida hacia {destination}"},name_exit:{default:"Entra en {rotary_name} y coge la {exit_number} salida",name:"Entra en {rotary_name} y coge la {exit_number} salida en {way_name}",destination:"Entra en {rotary_name} y coge la {exit_number} salida hacia {destination}"}}},roundabout:{default:{exit:{default:"Entra en la rotonda y toma la {exit_number} salida",name:"Entra en la rotonda y toma la {exit_number} salida a {way_name}",destination:"Entra en la rotonda y toma la {exit_number} salida hacia {destination}"},default:{default:"Entra en la rotonda",name:"Entra en la rotonda y sal en {way_name}",destination:"Entra en la rotonda y sal hacia {destination}"}}},"roundabout turn":{default:{default:"Sigue {modifier}",name:"Sigue {modifier} en {way_name}",destination:"Sigue {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto en {way_name}",destination:"Contina recto hacia {destination}"}},"exit roundabout":{default:{default:"Sal la rotonda",name:"Sal la rotonda en {way_name}",destination:"Sal la rotonda hacia {destination}"}},"exit rotary":{default:{default:"Sal la rotonda",name:"Sal la rotonda en {way_name}",destination:"Sal la rotonda hacia {destination}"}},turn:{default:{default:"Sigue {modifier}",name:"Sigue {modifier} en {way_name}",destination:"Sigue {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Ve recto",name:"Ve recto en {way_name}",destination:"Ve recto hacia {destination}"}},"use lane":{no_lanes:{default:"Contina recto"},default:{default:"{lane_instruction}"}}}}},{}],29:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"pohjoiseen",northeast:"koilliseen",east:"itn",southeast:"kaakkoon",south:"eteln",southwest:"lounaaseen",west:"lnteen",northwest:"luoteeseen"},modifier:{left:"vasemmall(e/a)",right:"oikeall(e/a)","sharp left":"jyrksti vasempaan","sharp right":"jyrksti oikeaan","slight left":"loivasti vasempaan","slight right":"loivasti oikeaan",straight:"suoraan eteenpin",uturn:"U-knns"},lanes:{xo:"Pysy oikealla",ox:"Pysy vasemmalla",xox:"Pysy keskell",oxo:"Pysy vasemmalla tai oikealla"}},modes:{ferry:{default:"Aja lautalle",name:"Aja lautalle {way_name}",destination:"Aja lautalle, jonka mrnp on {destination}"}},phrase:{"two linked by distance":"{instruction_one}, sitten {distance} pst, {instruction_two}","two linked":"{instruction_one}, sitten {instruction_two}","one in distance":"{distance} pst, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"{exit}"},arrive:{default:{default:"Olet saapunut {nth} mrnphsi",upcoming:"Saavut {nth} mrnphsi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}"},left:{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},right:{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"sharp left":{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},"sharp right":{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"slight right":{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"slight left":{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},straight:{default:"Olet saapunut {nth} mrnphsi, joka on suoraan edesssi",upcoming:"Saavut {nth} mrnphsi, suoraan edess",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on suoraan edesssi"}},continue:{default:{default:"Knny {modifier}",name:"Knny {modifier} pysyksesi tiell {way_name}",destination:"Knny {modifier} suuntana {destination}",exit:"Knny {modifier} tielle {way_name}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan pysyksesi tiell {way_name}",destination:"Jatka suuntana {destination}",distance:"Jatka suoraan {distance}",namedistance:"Jatka tiell {way_name} {distance}"},"sharp left":{default:"Jatka jyrksti vasempaan",name:"Jatka jyrksti vasempaan pysyksesi tiell {way_name}",destination:"Jatka jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Jatka jyrksti oikeaan",name:"Jatka jyrksti oikeaan pysyksesi tiell {way_name}",destination:"Jatka jyrksti oikeaan suuntana {destination}"},"slight left":{default:"Jatka loivasti vasempaan",name:"Jatka loivasti vasempaan pysyksesi tiell {way_name}",destination:"Jatka loivasti vasempaan suuntana {destination}"},"slight right":{default:"Jatka loivasti oikeaan",name:"Jatka loivasti oikeaan pysyksesi tiell {way_name}",destination:"Jatka loivasti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns ja jatka tiet {way_name}",destination:"Tee U-knns suuntana {destination}"}},depart:{default:{default:"Aja {direction}",name:"Aja tiet {way_name} {direction}",namedistance:"Aja {distance} {direction} tiet {way_name} "}},"end of road":{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan eteenpin tielle {way_name}",destination:"Jatka suoraan eteenpin suuntana {destination}"},uturn:{default:"Tien pss tee U-knns",name:"Tien pss tee U-knns tielle {way_name}",destination:"Tien pss tee U-knns suuntana {destination}"}},fork:{default:{default:"Jatka tienhaarassa {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},"slight left":{default:"Pysy vasemmalla tienhaarassa",name:"Pysy vasemmalla tielle {way_name}",destination:"Pysy vasemmalla suuntana {destination}"},"slight right":{default:"Pysy oikealla tienhaarassa",name:"Pysy oikealla tielle {way_name}",destination:"Pysy oikealla suuntana {destination}"},"sharp left":{default:"Knny tienhaarassa jyrksti vasempaan",name:"Knny tienhaarassa jyrksti vasempaan tielle {way_name}",destination:"Knny tienhaarassa jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Knny tienhaarassa jyrksti oikeaan",name:"Knny tienhaarassa jyrksti oikeaan tielle {way_name}",destination:"Knny tienhaarassa jyrksti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},merge:{default:{default:"Liity {modifier}",name:"Liity {modifier}, tielle {way_name}",destination:"Liity {modifier}, suuntana {destination}"},straight:{default:"Liity",name:"Liity tielle {way_name}",destination:"Liity suuntana {destination}"},"slight left":{default:"Liity vasemmalle",name:"Liity vasemmalle, tielle {way_name}",destination:"Liity vasemmalle, suuntana {destination}"},"slight right":{default:"Liity oikealle",name:"Liity oikealle, tielle {way_name}",destination:"Liity oikealle, suuntana {destination}"},"sharp left":{default:"Liity vasemmalle",name:"Liity vasemmalle, tielle {way_name}",destination:"Liity vasemmalle, suuntana {destination}"},"sharp right":{default:"Liity oikealle",name:"Liity oikealle, tielle {way_name}",destination:"Liity oikealle, suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},"new name":{default:{default:"Jatka {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka tielle {way_name}",destination:"Jatka suuntana {destination}"},"sharp left":{default:"Knny jyrksti vasempaan",name:"Knny jyrksti vasempaan tielle {way_name}",destination:"Knny jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Knny jyrksti oikeaan",name:"Knny jyrksti oikeaan tielle {way_name}",destination:"Knny jyrksti oikeaan suuntana {destination}"},"slight left":{default:"Jatka loivasti vasempaan",name:"Jatka loivasti vasempaan tielle {way_name}",destination:"Jatka loivasti vasempaan suuntana {destination}"},"slight right":{default:"Jatka loivasti oikeaan",name:"Jatka loivasti oikeaan tielle {way_name}",destination:"Jatka loivasti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},notification:{default:{default:"Jatka {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},"off ramp":{default:{default:"Aja erkanemiskaistalle",name:"Aja erkanemiskaistaa tielle {way_name}",destination:"Aja erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit}",exit_destination:"Ota poistuminen {exit}, suuntana {destination}"},left:{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},right:{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"},"sharp left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},"sharp right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"},"slight left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},"slight right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"}},"on ramp":{default:{default:"Aja erkanemiskaistalle",name:"Aja erkanemiskaistaa tielle {way_name}",destination:"Aja erkanemiskaistalle suuntana {destination}"},left:{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},right:{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"},"sharp left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},"sharp right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"},"slight left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},"slight right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"}},rotary:{default:{default:{default:"Aja liikenneympyrn",name:"Aja liikenneympyrn ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse erkanemiskaista suuntana {destination}"},name:{default:"Aja liikenneympyrn {rotary_name}",name:"Aja liikenneympyrn {rotary_name} ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn {rotary_name} ja valitse erkanemiskaista suuntana {destination}"},exit:{default:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista suuntana {destination}"},name_exit:{default:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista suuntana {destination}"}}},roundabout:{default:{exit:{default:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista suuntana {destination}"},default:{default:"Aja liikenneympyrn",name:"Aja liikenneympyrn ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse erkanemiskaista suuntana {destination}"}}},"roundabout turn":{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},left:{default:"Knny vasempaan",name:"Knny vasempaan tielle {way_name}",destination:"Knny vasempaan suuntana {destination}"},right:{default:"Knny oikeaan",name:"Knny oikeaan tielle {way_name}",destination:"Knny oikeaan suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan eteenpin tielle {way_name}",destination:"Jatka suoraan eteenpin suuntana {destination}"}},"exit roundabout":{default:{default:"Poistu liikenneympyrst",name:"Poistu liikenneympyrst tielle {way_name}",destination:"Poistu liikenneympyrst suuntana {destination}"}},"exit rotary":{default:{default:"Poistu liikenneympyrst",name:"Poistu liikenneympyrst tielle {way_name}",destination:"Poistu liikenneympyrst suuntana {destination}"}},turn:{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},left:{default:"Knny vasempaan",name:"Knny vasempaan tielle {way_name}",destination:"Knny vasempaan suuntana {destination}"},right:{default:"Knny oikeaan",name:"Knny oikeaan tielle {way_name}",destination:"Knny oikeaan suuntana {destination}"},straight:{default:"Aja suoraan eteenpin",name:"Aja suoraan eteenpin tielle {way_name}",destination:"Aja suoraan eteenpin suuntana {destination}"}},"use lane":{no_lanes:{default:"Jatka suoraan eteenpin"},default:{default:"{lane_instruction}"}}}}},{}],30:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"premire",2:"seconde",3:"troisime",4:"quatrime",5:"cinquime",6:"sixime",7:"septime",8:"huitime",9:"neuvime",10:"dixime"},direction:{north:"le nord",northeast:"le nord-est",east:"lest",southeast:"le sud-est",south:"le sud",southwest:"le sud-ouest",west:"louest",northwest:"le nord-ouest"},modifier:{left:" gauche",right:" droite","sharp left":"franchement  gauche","sharp right":"franchement  droite","slight left":"lgrement  gauche","slight right":"lgrement  droite",straight:"tout droit",uturn:"demi-tour"},lanes:{xo:"Tenir la droite",ox:"Tenir la gauche",xox:"Rester au milieu",oxo:"Tenir la gauche ou la droite"}},modes:{ferry:{default:"Prendre le ferry",name:"Prendre le ferry {way_name:article}",destination:"Prendre le ferry en direction {destination:preposition}"}},phrase:{"two linked by distance":"{instruction_one}, puis, dans {distance}, {instruction_two}","two linked":"{instruction_one}, puis {instruction_two}","one in distance":"Dans {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sortie n{exit}"},arrive:{default:{default:"Vous tes arriv  votre {nth} destination",upcoming:"Vous arriverez  votre {nth} destination",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}"},left:{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},right:{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv   {waypoint_name:arrival}, sur la droite"},"sharp left":{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},"sharp right":{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la droite"},"slight right":{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la droite"},"slight left":{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous tes arriv",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},straight:{default:"Vous tes arriv  votre {nth} destination, droit devant",upcoming:"Vous arriverez  votre {nth} destination, droit devant",short:"Vous tes arriv","short-upcoming":"Vous tes arriv",named:"Vous tes arriv {waypoint_name:arrival}, droit devant"}},continue:{default:{default:"Tourner {modifier}",name:"Tourner {modifier} pour rester sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}",exit:"Tourner {modifier} sur {way_name:article}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit pour rester sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}",distance:"Continuer tout droit sur {distance}",namedistance:"Continuer sur {way_name:article} sur {distance}"},"sharp left":{default:"Tourner franchement  gauche",name:"Tourner franchement  gauche pour rester sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite",name:"Tourner franchement  droite pour rester sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},"slight left":{default:"Tourner lgrement  gauche",name:"Tourner lgrement  gauche pour rester sur {way_name:article}",destination:"Tourner lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Tourner lgrement  droite",name:"Tourner lgrement  droite pour rester sur {way_name:article}",destination:"Tourner lgrement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour et continuer sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},depart:{default:{default:"Se diriger vers {direction}",name:"Se diriger vers {direction} sur {way_name:article}",namedistance:"Se diriger vers {direction} sur {way_name:article} sur {distance}"}},"end of road":{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"},uturn:{default:"Faire demi-tour  la fin de la route",name:"Faire demi-tour  la fin {way_name:preposition}",destination:"Faire demi-tour  la fin de la route en direction {destination:preposition}"}},fork:{default:{default:"Tenir {modifier}  lembranchement",name:"Tenir {modifier} sur {way_name:article}",destination:"Tenir {modifier} en direction {destination:preposition}"},"slight left":{default:"Tenir la gauche  lembranchement",name:"Tenir la gauche sur {way_name:article}",destination:"Tenir la gauche en direction {destination:preposition}"},"slight right":{default:"Tenir la droite  lembranchement",name:"Tenir la droite sur {way_name:article}",destination:"Tenir la droite en direction {destination:preposition}"},"sharp left":{default:"Tourner franchement  gauche  lembranchement",name:"Tourner franchement  gauche sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite  lembranchement",name:"Tourner franchement  droite sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},merge:{default:{default:"Sinsrer {modifier}",name:"Sinsrer {modifier} sur {way_name:article}",destination:"Sinsrer {modifier} en direction {destination:preposition}"},straight:{default:"Sinsrer",name:"Sinsrer sur {way_name:article}",destination:"Sinsrer en direction {destination:preposition}"},"slight left":{default:"Sinsrer lgrement  gauche",name:"Sinsrer lgrement  gauche sur {way_name:article}",destination:"Sinsrer lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Sinsrer lgrement  droite",name:"Sinsrer lgrement  droite sur {way_name:article}",destination:"Sinsrer  droite en direction {destination:preposition}"},"sharp left":{default:"Sinsrer  gauche",name:"Sinsrer  gauche sur {way_name:article}",destination:"Sinsrer  gauche en direction {destination:preposition}"},"sharp right":{default:"Sinsrer  droite",name:"Sinsrer  droite sur {way_name:article}",destination:"Sinsrer  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},"new name":{default:{default:"Continuer {modifier}",name:"Continuer {modifier} sur {way_name:article}",destination:"Continuer {modifier} en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"},"sharp left":{default:"Tourner franchement  gauche",name:"Tourner franchement  gauche sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite",name:"Tourner franchement  droite sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},"slight left":{default:"Continuer lgrement  gauche",name:"Continuer lgrement  gauche sur {way_name:article}",destination:"Continuer lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Continuer lgrement  droite",name:"Continuer lgrement  droite sur {way_name:article}",destination:"Continuer lgrement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},notification:{default:{default:"Continuer {modifier}",name:"Continuer {modifier} sur {way_name:article}",destination:"Continuer {modifier} en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},"off ramp":{default:{default:"Prendre la sortie",name:"Prendre la sortie sur {way_name:article}",destination:"Prendre la sortie en direction {destination:preposition}",exit:"Prendre la sortie {exit}",exit_destination:"Prendre la sortie {exit} en direction {destination:preposition}"},left:{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},right:{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"},"sharp left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},"sharp right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"},"slight left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},"slight right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"}},"on ramp":{default:{default:"Prendre la sortie",name:"Prendre la sortie sur {way_name:article}",destination:"Prendre la sortie en direction {destination:preposition}"},left:{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},right:{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"},"sharp left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},"sharp right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"},"slight left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},"slight right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"}},rotary:{default:{default:{default:"Prendre le rond-point",name:"Prendre le rond-point, puis sortir sur {way_name:article}",destination:"Prendre le rond-point, puis sortir en direction {destination:preposition}"},name:{default:"Prendre {rotary_name:rotary}",name:"Prendre {rotary_name:rotary}, puis sortir par {way_name:article}",destination:"Prendre {rotary_name:rotary}, puis sortir en direction {destination:preposition}"},exit:{default:"Prendre le rond-point, puis la {exit_number} sortie",name:"Prendre le rond-point, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre le rond-point, puis la {exit_number} sortie en direction {destination:preposition}"},name_exit:{default:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie",name:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie en direction {destination:preposition}"}}},roundabout:{default:{exit:{default:"Prendre le rond-point, puis la {exit_number} sortie",name:"Prendre le rond-point, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre le rond-point, puis la {exit_number} sortie en direction {destination:preposition}"},default:{default:"Prendre le rond-point",name:"Prendre le rond-point, puis sortir sur {way_name:article}",destination:"Prendre le rond-point, puis sortir en direction {destination:preposition}"}}},"roundabout turn":{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},left:{default:"Tourner  gauche",name:"Tourner  gauche sur {way_name:article}",destination:"Tourner  gauche en direction {destination:preposition}"},right:{default:"Tourner  droite",name:"Tourner  droite sur {way_name:article}",destination:"Tourner  droite en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"}},"exit roundabout":{default:{default:"Sortir du rond-point",name:"Sortir du rond-point sur {way_name:article}",destination:"Sortir du rond-point en direction {destination:preposition}"}},"exit rotary":{default:{default:"Sortir du rond-point",name:"Sortir du rond-point sur {way_name:article}",destination:"Sortir du rond-point en direction {destination:preposition}"}},turn:{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},left:{default:"Tourner  gauche",name:"Tourner  gauche sur {way_name:article}",destination:"Tourner  gauche en direction {destination:preposition}"},right:{default:"Tourner  droite",name:"Tourner  droite sur {way_name:article}",destination:"Tourner  droite en direction {destination:preposition}"},straight:{default:"Aller tout droit",name:"Aller tout droit sur {way_name:article}",destination:"Aller tout droit en direction {destination:preposition}"}},"use lane":{no_lanes:{default:"Continuer tout droit"},default:{default:"{lane_instruction}"}}}}},{}],31:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:" ",east:"",southeast:" ",south:"",southwest:" ",west:"",northwest:" "},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:" "},lanes:{xo:" ",ox:" ",xox:"  ",oxo:"   "}},modes:{ferry:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},phrase:{"two linked by distance":"{instruction_one}, , {distance}, {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":" {exit}"},arrive:{default:{default:"   {nth} ",upcoming:"    {nth} ",short:"","short-upcoming":"",named:"  {waypoint_name}"},left:{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},right:{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"sharp left":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"sharp right":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"slight right":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"slight left":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},straight:{default:"   {nth} , ",upcoming:"    {nth} , ",short:"","short-upcoming":"",named:"  {waypoint_name}, "}},continue:{default:{default:" {modifier}",name:" {modifier}   {way_name}",destination:" {modifier}  {destination}",exit:" {modifier}  {way_name}"},straight:{default:" ",name:"     {way_name}",destination:"  {destination}",distance:"   {distance}",namedistance:"  {way_name}  {distance}"},"sharp left":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"slight left":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"slight right":{default:"  ",name:"      {way_name}",destination:"    {destination}"},uturn:{default:"  ",name:"     {way_name}",destination:"    {destination}"}},depart:{default:{default:" {direction}",name:" {direction}  {way_name}",namedistance:" {direction}  {way_name}  {distance}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:" ",name:"   {way_name}",destination:"   {destination}"},uturn:{default:"    ",name:"    {way_name}  ",destination:"    {destination}  "}},fork:{default:{default:" {modifier} ",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},"slight left":{default:"  ",name:"   {way_name}",destination:"   {destination}"},"slight right":{default:"  ",name:"   {way_name}",destination:"   {destination}"},"sharp left":{default:"   ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"   ",name:"    {way_name}",destination:"    {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},merge:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:"",name:"  {way_name}",destination:"  {destination}"},"slight left":{default:" ",name:"   {way_name}",destination:"   {destination}"},"slight right":{default:" ",name:"   {way_name}",destination:"   {destination}"},"sharp left":{default:" ",name:"   {way_name}",destination:"   {destination}"},"sharp right":{default:" ",name:"   {way_name}",destination:"   {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:" ",name:"  {way_name}",destination:"  {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"     {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"     {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},"off ramp":{default:{default:" ",name:"   {way_name}",destination:"   {destination}",exit:"  {exit}",exit_destination:"  {exit}  {destination}"},left:{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},right:{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"}},"on ramp":{default:{default:" ",name:"   {way_name}",destination:"   {destination}"},left:{default:"  ",name:"    {way_name}",destination:"    {destination}"},right:{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"    {destination}"}},rotary:{default:{default:{default:"  ",name:"     {way_name}",destination:"     {destination}"},name:{default:" {rotary_name}",name:" {rotary_name}   {way_name}",destination:" {rotary_name}   {destination}"},exit:{default:"     {exit_number}",name:"     {exit_number} {way_name}",destination:"     {exit_number}  {destination}"},name_exit:{default:" {rotary_name}   {exit_number}",name:" {rotary_name}   {exit_number} {way_name}",destination:" {rotary_name}   {exit_number}  {destination}"}}},roundabout:{default:{exit:{default:"     {exit_number}",name:"     {exit_number} {way_name}",destination:"     {exit_number}  {destination}"},default:{default:"  ",name:"     {way_name}",destination:"     {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},left:{default:" ",name:"  {way_name}",destination:"   {destination}"},right:{default:" ",name:"  {way_name}",destination:"   {destination}"},straight:{default:" ",name:"   {way_name}",destination:"   {destination}"}},"exit roundabout":{default:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},"exit rotary":{default:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},left:{default:" ",name:"  {way_name}",destination:"   {destination}"},right:{default:" ",name:"  {way_name}",destination:"   {destination}"},straight:{default:" ",name:"  {way_name}",destination:"   {destination}"}},"use lane":{no_lanes:{default:" "},default:{default:"{lane_instruction}"}}}}},{}],32:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"utara",northeast:"timur laut",east:"timur",southeast:"tenggara",south:"selatan",southwest:"barat daya",west:"barat",northwest:"barat laut"},modifier:{left:"kiri",right:"kanan","sharp left":"tajam kiri","sharp right":"tajam kanan","slight left":"agak ke kiri","slight right":"agak ke kanan",straight:"lurus",uturn:"putar balik"},lanes:{xo:"Tetap di kanan",ox:"Tetap di kiri",xox:"Tetap di tengah",oxo:"Tetap di kiri atau kanan"}},modes:{ferry:{default:"Naik ferry",name:"Naik ferry di {way_name}",destination:"Naik ferry menuju {destination}"}},phrase:{"two linked by distance":"{instruction_one}, then, in {distance}, {instruction_two}","two linked":"{instruction_one}, then {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Anda telah tiba di tujuan ke-{nth}",upcoming:"Anda telah tiba di tujuan ke-{nth}",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}"},left:{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},right:{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"sharp left":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},"sharp right":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"slight right":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"slight left":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},straight:{default:"Anda telah tiba di tujuan ke-{nth}, lurus saja",upcoming:"Anda telah tiba di tujuan ke-{nth}, lurus saja",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, lurus saja"}},continue:{default:{default:"Belok {modifier}",name:"Terus {modifier} ke {way_name}",destination:"Belok {modifier} menuju {destination}",exit:"Belok {modifier} ke {way_name}"},straight:{default:"Lurus terus",name:"Terus ke {way_name}",destination:"Terus menuju {destination}",distance:"Continue straight for {distance}",namedistance:"Continue on {way_name} for {distance}"},"sharp left":{default:"Belok kiri tajam",name:"Make a sharp left to stay on {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan tajam",name:"Make a sharp right to stay on {way_name}",destination:"Belok kanan tajam menuju {destination}"},"slight left":{default:"Tetap agak di kiri",name:"Tetap agak di kiri ke {way_name}",destination:"Tetap agak di kiri menuju {destination}"},"slight right":{default:"Tetap agak di kanan",name:"Tetap agak di kanan ke {way_name}",destination:"Tetap agak di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},depart:{default:{default:"Arah {direction}",name:"Arah {direction} di {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Belok {modifier}",name:"Belok {modifier} ke {way_name}",destination:"Belok {modifier} menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"},uturn:{default:"Putar balik di akhir jalan",name:"Putar balik di {way_name} di akhir jalan",destination:"Putar balik menuju {destination} di akhir jalan"}},fork:{default:{default:"Tetap {modifier} di pertigaan",name:"Tetap {modifier} di pertigaan ke {way_name}",destination:"Tetap {modifier} di pertigaan menuju {destination}"},"slight left":{default:"Tetap di kiri pada pertigaan",name:"Tetap di kiri pada pertigaan ke arah {way_name}",destination:"Tetap di kiri pada pertigaan menuju {destination}"},"slight right":{default:"Tetap di kanan pada pertigaan",name:"Tetap di kanan pada pertigaan ke arah {way_name}",destination:"Tetap di kanan pada pertigaan menuju {destination}"},"sharp left":{default:"Belok kiri pada pertigaan",name:"Belok kiri tajam ke arah {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan pada pertigaan",name:"Belok kanan tajam ke arah {way_name}",destination:"Belok kanan tajam menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},merge:{default:{default:"Bergabung {modifier}",name:"Bergabung {modifier} ke arah {way_name}",destination:"Bergabung {modifier} menuju {destination}"},straight:{default:"Bergabung lurus",name:"Bergabung lurus ke arah {way_name}",destination:"Bergabung lurus menuju {destination}"},"slight left":{default:"Bergabung di kiri",name:"Bergabung di kiri ke arah {way_name}",destination:"Bergabung di kiri menuju {destination}"},"slight right":{default:"Bergabung di kanan",name:"Bergabung di kanan ke arah {way_name}",destination:"Bergabung di kanan menuju {destination}"},"sharp left":{default:"Bergabung di kiri",name:"Bergabung di kiri ke arah {way_name}",destination:"Bergabung di kiri menuju {destination}"},"sharp right":{default:"Bergabung di kanan",name:"Bergabung di kanan ke arah {way_name}",destination:"Bergabung di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},"new name":{default:{default:"Lanjutkan {modifier}",name:"Lanjutkan {modifier} menuju {way_name}",destination:"Lanjutkan {modifier} menuju {destination}"},straight:{default:"Lurus terus",name:"Terus ke {way_name}",destination:"Terus menuju {destination}"},"sharp left":{default:"Belok kiri tajam",name:"Belok kiri tajam ke arah {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan tajam",name:"Belok kanan tajam ke arah {way_name}",destination:"Belok kanan tajam menuju {destination}"},"slight left":{default:"Lanjut dengan agak ke kiri",name:"Lanjut dengan agak di kiri ke {way_name}",destination:"Tetap agak di kiri menuju {destination}"},"slight right":{default:"Tetap agak di kanan",name:"Tetap agak di kanan ke {way_name}",destination:"Tetap agak di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},notification:{default:{default:"Lanjutkan {modifier}",name:"Lanjutkan {modifier} menuju {way_name}",destination:"Lanjutkan {modifier} menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},"off ramp":{default:{default:"Ambil jalan melandai",name:"Ambil jalan melandai ke {way_name}",destination:"Ambil jalan melandai menuju {destination}",exit:"Take exit {exit}",exit_destination:"Take exit {exit} towards {destination}"},left:{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},right:{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"sharp left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"sharp right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"slight left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"slight right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"}},"on ramp":{default:{default:"Ambil jalan melandai",name:"Ambil jalan melandai ke {way_name}",destination:"Ambil jalan melandai menuju {destination}"},left:{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},right:{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"},"sharp left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},"sharp right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"},"slight left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},"slight right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"}},rotary:{default:{default:{default:"Masuk bundaran",name:"Masuk bundaran dan keluar arah {way_name}",destination:"Masuk bundaran dan keluar menuju {destination}"},name:{default:"Masuk {rotary_name}",name:"Masuk {rotary_name} dan keluar arah {way_name}",destination:"Masuk {rotary_name} dan keluar menuju {destination}"},exit:{default:"Masuk bundaran dan ambil jalan keluar {exit_number}",name:"Masuk bundaran dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk bundaran dan ambil jalan keluar {exit_number} menuju {destination}"},name_exit:{default:"Masuk {rotary_name} dan ambil jalan keluar {exit_number}",name:"Masuk {rotary_name} dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk {rotary_name} dan ambil jalan keluar {exit_number} menuju {destination}"}}},roundabout:{default:{exit:{default:"Masuk bundaran dan ambil jalan keluar {exit_number}",name:"Masuk bundaran dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk bundaran dan ambil jalan keluar {exit_number} menuju {destination}"},default:{default:"Masuk bundaran",name:"Masuk bundaran dan keluar arah {way_name}",destination:"Masuk bundaran dan keluar menuju {destination}"}}},"roundabout turn":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"}},"exit roundabout":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"}},"exit rotary":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus",name:"Lurus arah {way_name}",destination:"Lurus menuju {destination}"}},turn:{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus",name:"Lurus arah {way_name}",destination:"Lurus menuju {destination}"}},"use lane":{no_lanes:{default:"Lurus terus"},default:{default:"{lane_instruction}"}}}}},{}],33:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"nord",northeast:"nord-est",east:"est",southeast:"sud-est",south:"sud",southwest:"sud-ovest",west:"ovest",northwest:"nord-ovest"},modifier:{left:"sinistra",right:"destra","sharp left":"sinistra","sharp right":"destra","slight left":"sinistra leggermente","slight right":"destra leggermente",straight:"dritto",uturn:"inversione a U"},lanes:{xo:"Mantieni la destra",ox:"Mantieni la sinistra",xox:"Rimani in mezzo",oxo:"Mantieni la destra o la sinistra"}},modes:{ferry:{default:"Prendi il traghetto",name:"Prendi il traghetto {way_name}",destination:"Prendi il traghetto verso {destination}"}},phrase:{"two linked by distance":"{instruction_one}, poi tra {distance},{instruction_two}","two linked":"{instruction_one}, poi {instruction_two}","one in distance":"tra {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Sei arrivato alla tua {nth} destinazione",upcoming:"Sei arrivato alla tua {nth} destinazione",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"Sei arrivato a {waypoint_name}"},left:{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},right:{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"sharp left":{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},"sharp right":{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"slight right":{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"slight left":{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},straight:{default:"sei arrivato alla tua {nth} destinazione, si trova davanti a te",upcoming:"sei arrivato alla tua {nth} destinazione, si trova davanti a te",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, si trova davanti a te"}},continue:{default:{default:"Gira a {modifier}",name:"Gira a {modifier} per stare su {way_name}",destination:"Gira a {modifier} verso {destination}",exit:"Gira a {modifier} in {way_name}"},straight:{default:"Continua dritto",name:"Continua dritto per stare su {way_name}",destination:"Continua verso {destination}",distance:"Continua dritto per {distance}",namedistance:"Continua su {way_name} per {distance}"},"sharp left":{default:"Svolta a sinistra",name:"Fai una stretta curva a sinistra per stare su {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra",name:"Fau una stretta curva a destra per stare su {way_name}",destination:"Svolta a destra verso {destination}"},"slight left":{default:"Fai una leggera curva a sinistra",name:"Fai una leggera curva a sinistra per stare su {way_name}",destination:"Fai una leggera curva a sinistra verso {destination}"},"slight right":{default:"Fai una leggera curva a destra",name:"Fai una leggera curva a destra per stare su {way_name}",destination:"Fai una leggera curva a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione ad U poi continua su {way_name}",destination:"Fai un'inversione a U verso {destination}"}},depart:{default:{default:"Continua verso {direction}",name:"Continua verso {direction} in {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Gira a {modifier}",name:"Gira a {modifier} in {way_name}",destination:"Gira a {modifier} verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"},uturn:{default:"Fai un'inversione a U alla fine della strada",name:"Fai un'inversione a U in {way_name} alla fine della strada",destination:"Fai un'inversione a U verso {destination} alla fine della strada"}},fork:{default:{default:"Mantieni la {modifier} al bivio",name:"Mantieni la {modifier} al bivio in {way_name}",destination:"Mantieni la {modifier} al bivio verso {destination}"},"slight left":{default:"Mantieni la sinistra al bivio",name:"Mantieni la sinistra al bivio in {way_name}",destination:"Mantieni la sinistra al bivio verso {destination}"},"slight right":{default:"Mantieni la destra al bivio",name:"Mantieni la destra al bivio in {way_name}",destination:"Mantieni la destra al bivio verso {destination}"},"sharp left":{default:"Svolta a sinistra al bivio",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra al bivio",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},merge:{default:{default:"Immettiti a {modifier}",name:"Immettiti {modifier} in {way_name}",destination:"Immettiti {modifier} verso {destination}"},straight:{default:"Immettiti a dritto",name:"Immettiti dritto in {way_name}",destination:"Immettiti dritto verso {destination}"},"slight left":{default:"Immettiti a sinistra",name:"Immettiti a sinistra in {way_name}",destination:"Immettiti a sinistra verso {destination}"},"slight right":{default:"Immettiti a destra",name:"Immettiti a destra in {way_name}",destination:"Immettiti a destra verso {destination}"},"sharp left":{default:"Immettiti a sinistra",name:"Immettiti a sinistra in {way_name}",destination:"Immettiti a sinistra verso {destination}"},"sharp right":{default:"Immettiti a destra",name:"Immettiti a destra in {way_name}",destination:"Immettiti a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},"new name":{default:{default:"Continua a {modifier}",name:"Continua a {modifier} in {way_name}",destination:"Continua a {modifier} verso {destination}"},straight:{default:"Continua dritto",name:"Continua in {way_name}",destination:"Continua verso {destination}"},"sharp left":{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},"slight left":{default:"Continua leggermente a sinistra",name:"Continua leggermente a sinistra in {way_name}",destination:"Continua leggermente a sinistra verso {destination}"},"slight right":{default:"Continua leggermente a destra",name:"Continua leggermente a destra in {way_name} ",destination:"Continua leggermente a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},notification:{default:{default:"Continua a {modifier}",name:"Continua a {modifier} in {way_name}",destination:"Continua a {modifier} verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},"off ramp":{default:{default:"Prendi la rampa",name:"Prendi la rampa in {way_name}",destination:"Prendi la rampa verso {destination}",exit:"Prendi l'uscita {exit}",exit_destination:"Prendi l'uscita  {exit} verso {destination}"},left:{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},right:{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"},"sharp left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},"sharp right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"},"slight left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},"slight right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"}},"on ramp":{default:{default:"Prendi la rampa",name:"Prendi la rampa in {way_name}",destination:"Prendi la rampa verso {destination}"},left:{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},right:{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"},"sharp left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},"sharp right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"},"slight left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},"slight right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"}},rotary:{default:{default:{default:"Immettiti nella rotonda",name:"Immettiti nella ritonda ed esci in {way_name}",destination:"Immettiti nella ritonda ed esci verso {destination}"},name:{default:"Immettiti in {rotary_name}",name:"Immettiti in {rotary_name} ed esci su {way_name}",destination:"Immettiti in {rotary_name} ed esci verso {destination}"},exit:{default:"Immettiti nella rotonda e prendi la {exit_number} uscita",name:"Immettiti nella rotonda e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti nella rotonda e prendi la {exit_number} uscita verso   {destination}"},name_exit:{default:"Immettiti in {rotary_name} e prendi la {exit_number} uscita",name:"Immettiti in {rotary_name} e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti in {rotary_name} e prendi la {exit_number}  uscita verso {destination}"}}},roundabout:{default:{exit:{default:"Immettiti nella rotonda e prendi la {exit_number} uscita",name:"Immettiti nella rotonda e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti nella rotonda e prendi la {exit_number} uscita verso {destination}"},default:{default:"Entra nella rotonda",name:"Entra nella rotonda e prendi l'uscita in {way_name}",destination:"Entra nella rotonda e prendi l'uscita verso {destination}"}}},"roundabout turn":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"}},"exit roundabout":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"}},"exit rotary":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Prosegui dritto",name:"Continua su {way_name}",destination:"Continua verso {destination}"}},turn:{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Prosegui dritto",name:"Continua su {way_name}",destination:"Continua verso {destination}"}},"use lane":{no_lanes:{default:"Continua dritto"},default:{default:"{lane_instruction}"}}}}},{}],34:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:""},lanes:{xo:" ",ox:" ",xox:"",oxo:"    "}},modes:{ferry:{default:" ",name:"  {way_name}",destination:"  {destination} ."}},phrase:{"two linked by distance":"{instruction_one}, , {distance} , {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":"{distance} , {instruction_one}","name and ref":"{name} ({ref})","exit with number":"{exit} ."},arrive:{default:{default:" {nth} .",upcoming:"{nth}   .",short:"","short-upcoming":" .",named:" {waypoint_name} ."},left:{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},right:{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"sharp left":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"sharp right":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"slight right":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"slight left":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},straight:{default:"  {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."}},continue:{default:{default:"{modifier} ",name:"{modifier}  {way_name}  .",destination:"{modifier}  {destination} .",exit:"{way_name}  {modifier}  ."},straight:{default:"  .",name:"{way_name}    .",destination:"{destination}  .",distance:"{distance}  .",namedistance:"{distance} {way_name} ."},"sharp left":{default:" .",name:"   {way_name} .",destination:"   {destination} ."},"sharp right":{default:" .",name:"  {way_name} .",destination:"   {destination} ."},"slight left":{default:" .",name:"   {way_name} .",destination:"    {destination} ."},"slight right":{default:" .",name:"   {way_name} .",destination:"    {destination} ."},uturn:{default:" ",name:" {way_name} .",destination:"  {destination} ."}},depart:{default:{default:"{direction} ",name:"{direction}   {way_name}  . ",namedistance:"{direction} {way_name}  {distance} ."}},"end of road":{default:{default:"{modifier} .",name:"{modifier} {way_name} .",destination:"{modifier}   {destination} ."},straight:{default:"  .",name:"{way_name}   .",destination:"{destination}  ."},uturn:{default:"    .",name:"    {way_name} .",destination:"    {destination}  ."}},fork:{default:{default:" {modifier}  .",name:"{modifier} {way_name} .",destination:"{modifier} {destination} ."},"slight left":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"slight right":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"sharp left":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"sharp right":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},merge:{default:{default:"{modifier} ",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},straight:{default:"",name:"{way_name} .",destination:"{destination} ."},"slight left":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"slight right":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"sharp left":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"sharp right":{default:" .",name:"{way_name} .",destination:"  {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},"new name":{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},straight:{default:".",name:"{way_name}  .",destination:"{destination}  ."},"sharp left":{default:" .",name:"  {way_name} .",destination:"  {destination} ."},"sharp right":{default:" .",name:"  {way_name} .",destination:"  {destination} ."},"slight left":{default:"  .",name:"  {way_name} .",destination:"   {destination} ."},"slight right":{default:"  .",name:"  {way_name} .",destination:"   {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},notification:{default:{default:"{modifier} .",name:"{modifier} {way_name} .",destination:"{modifier} {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},"off ramp":{default:{default:"  ..",name:"  {way_name} .",destination:"  {destination} .",exit:"{exit}  .",exit_destination:"{exit}   {destination} ."},left:{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},right:{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"sharp left":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"sharp right":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"slight left":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"slight right":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."}},"on ramp":{default:{default:"  ..",name:"  {way_name} .",destination:"  {destination} ."},left:{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},right:{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"sharp left":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"sharp right":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"slight left":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"slight right":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."}},rotary:{default:{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},name:{default:"{rotary_name} .",name:"{rotary_name}  {way_name} .",destination:"{rotary_name}  {destination} ."},exit:{default:"  {exit_number}  .",name:"  {exit_number}   {way_name} .",destination:"  {exit_number}   {destination} ."},name_exit:{default:"{rotary_name}  {exit_number}  .",name:"{rotary_name}  {exit_number}   {way_name} .",destination:"{rotary_name}  {exit_number}   {destination} ."}}},roundabout:{default:{exit:{default:"  {exit_number} .",name:"  {exit_number}  {way_name} .",destination:"  {exit_number}  {destination} ."},default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}}},"roundabout turn":{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},left:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},right:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},straight:{default:" .",name:" {way_name} .",destination:" {destination} ."}},"exit roundabout":{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}},"exit rotary":{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}},turn:{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},left:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},right:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},straight:{default:" .",name:" {way_name} .",destination:" {destination} ."}},"use lane":{no_lanes:{default:"."},default:{default:"{lane_instruction}"}}}}},{}],35:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:"-"},lanes:{xo:"",ox:"",xox:"",oxo:"   "}},modes:{ferry:{default:" ",name:"{way_name} ",destination:"{destination} "}},phrase:{"two linked by distance":"{instruction_one} {distance} {instruction_two}","two linked":"{instruction_one} {instruction_two}","one in distance":"{distance} {instruction_one}","name and ref":"{name}( {ref})","exit with number":"{exit}"},arrive:{default:{default:"{nth}  ",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},left:{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},right:{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"sharp left":{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},"sharp right":{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"slight right":{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"slight left":{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},straight:{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "}},continue:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} ",exit:"{way_name} {modifier}"},straight:{default:" ",name:"{way_name}",destination:"{destination}",distance:"{distance}  ",namedistance:"{way_name}{distance}"},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight left":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight right":{default:" ",name:"{way_name} ",destination:"{destination} "},uturn:{default:"- ",name:"{way_name} -",destination:"{destination} "}},depart:{default:{default:"{direction} ",name:"{direction} {way_name} ",namedistance:"{direction} {way_name}{distance} "}},"end of road":{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"},uturn:{default:" -",name:" {way_name}-",destination:"{destination} "}},fork:{default:{default:" {modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},"slight left":{default:"",name:"{way_name}",destination:"{destination} "},"slight right":{default:"",name:"{way_name}",destination:"{destination} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} "},uturn:{default:"- ",name:"{way_name}-",destination:"{destination} "}},merge:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:"",name:"{way_name}",destination:"{destination} "},"slight left":{default:"",name:"{way_name}",destination:"{destination} "},"slight right":{default:"",name:"{way_name}",destination:"{destination} "},"sharp left":{default:"",name:"{way_name}",destination:"{destination} "},"sharp right":{default:"",name:"{way_name}",destination:"{destination} "},uturn:{default:"- ",name:"{way_name} -  ",destination:"{destination} "}},"new name":{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight left":{default:" ",name:"{way_name} ",destination:"{destination}"},"slight right":{default:" ",name:"{way_name} ",destination:"{destination}"},uturn:{default:"- ",name:"{way_name} - ",destination:"{destination} "}},notification:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},uturn:{default:"- ",name:"{way_name} - ",destination:"{destination} "}},"off ramp":{default:{default:"",name:"{way_name}",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},left:{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},right:{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"slight left":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"slight right":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "}},"on ramp":{default:{default:"",name:"{way_name}",destination:"{destination} "},left:{default:"",name:"{way_name} ",destination:"{destination} "},right:{default:"",name:"{way_name} ",destination:"{destination} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} "},"slight left":{default:"",name:"{way_name} ",destination:"{destination} "},"slight right":{default:"",name:"{way_name} ",destination:"{destination} "}},rotary:{default:{default:{default:"",name:"{way_name}",destination:"{destination}"},name:{default:"{rotary_name}",name:"{rotary_name}{way_name}",destination:"{rotary_name}{destination}"},exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},name_exit:{default:"{rotary_name} {exit_number}",name:"{rotary_name}{exit_number}{way_name}",destination:"{rotary_name}{exit_number}{destination}"}}},roundabout:{default:{exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},default:{default:"",name:"{way_name}",destination:"{destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination} "},left:{default:"",name:"{way_name}",destination:"{destination} "},right:{default:"",name:"{way_name}",destination:"{destination} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"}},"exit roundabout":{default:{default:"",name:"{way_name}",destination:"{destination}"}},"exit rotary":{default:{default:"",name:"{way_name}",destination:"{destination}"}},turn:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination} "},left:{default:"",name:"{way_name}",destination:"{destination} "},right:{default:"",name:"{way_name}",destination:"{destination} "},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"use lane":{no_lanes:{default:" "},default:{default:"{lane_instruction}"}}}}},{}],36:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1e",2:"2e",3:"3e",4:"4e",5:"5e",6:"6e",7:"7e",8:"8e",9:"9e",10:"10e"},direction:{north:"noord",northeast:"noordoost",east:"oost",southeast:"zuidoost",south:"zuid",southwest:"zuidwest",west:"west",northwest:"noordwest"},modifier:{left:"links",right:"rechts","sharp left":"scherpe bocht naar links","sharp right":"scherpe bocht naar rechts","slight left":"iets naar links","slight right":"iets naar rechts",straight:"rechtdoor",uturn:"omkeren"},lanes:{xo:"Rechts aanhouden",ox:"Links aanhouden",xox:"In het midden blijven",oxo:"Links of rechts blijven"}},modes:{ferry:{default:"Neem de veerpont",name:"Neem de veerpont {way_name}",destination:"Neem de veerpont richting {destination}"}},phrase:{"two linked by distance":"{instruction_one}, dan na {distance}, {instruction_two}","two linked":"{instruction_one}, daarna {instruction_two}","one in distance":"Over {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"afslag {exit}"},arrive:{default:{default:"Je bent gearriveerd op de {nth} bestemming.",upcoming:"U arriveert op de {nth} bestemming",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}"},left:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de linkerkant"},right:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de  rechterkant"},"sharp left":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de linkerkant"},"sharp right":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de rechterkant"},"slight right":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de rechterkant"},"slight left":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de linkerkant"},straight:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich voor je.",upcoming:"Uw {nth} bestemming is recht voor u",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is recht voor u"}},continue:{default:{default:"Ga {modifier}",name:"Sla {modifier} om op {way_name} te blijven",destination:"Ga {modifier} richting {destination}",exit:"Ga {modifier} naar {way_name}"},straight:{default:"Ga rechtdoor",name:"Blijf rechtdoor gaan op {way_name}",destination:"Ga rechtdoor richting {destination}",distance:"Ga rechtdoor voor {distance}",namedistance:"Ga verder op {way_name} voor {distance}"},"sharp left":{default:"Linksaf",name:"Sla scherp links af om op {way_name} te blijven",destination:"Linksaf richting {destination}"},"sharp right":{default:"Rechtsaf",name:"Sla scherp rechts af om op {way_name} te blijven",destination:"Rechtsaf richting {destination}"},"slight left":{default:"Ga links",name:"Links afbuigen om op {way_name} te blijven",destination:"Rechts afbuigen om op {destination} te blijven"},"slight right":{default:"Rechts afbuigen",name:"Rechts afbuigen om op {way_name} te blijven",destination:"Rechts afbuigen richting {destination}"},uturn:{default:"Keer om",name:"Draai om en ga verder op {way_name}",destination:"Keer om richting {destination}"}},depart:{default:{default:"Vertrek in {direction}elijke richting",name:"Neem {way_name} in {direction}elijke richting",namedistance:"Ga richting {direction} op {way_name} voor {distance}"}},"end of road":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga naar {way_name}",destination:"Ga richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},fork:{default:{default:"Ga {modifier} op de splitsing",name:"Houd {modifier} aan, tot {way_name}",destination:"Houd {modifier}, in de richting van {destination}"},"slight left":{default:"Links aanhouden op de splitsing",name:"Houd links aan, tot {way_name}",destination:"Houd links aan, richting {destination}"},"slight right":{default:"Rechts aanhouden op de splitsing",name:"Houd rechts aan, tot {way_name}",destination:"Houd rechts aan, richting {destination}"},"sharp left":{default:"Neem bij de splitsing, een scherpe bocht, naar links ",name:"Neem een scherpe bocht naar links, tot aan {way_name}",destination:"Neem een scherpe bocht naar links, richting {destination}"},"sharp right":{default:"Neem  op de splitsing, een scherpe bocht, naar rechts",name:"Neem een scherpe bocht naar rechts, tot aan {way_name}",destination:"Neem een scherpe bocht naar rechts, richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},merge:{default:{default:"Bij de splitsing {modifier}",name:"Bij de splitsing {modifier} naar {way_name}",destination:"Bij de splitsing {modifier} richting {destination}"},straight:{default:"Samenvoegen",name:"Ga verder op {way_name}",destination:"Ga verder richting {destination}"},"slight left":{default:"Bij de splitsing links aanhouden",name:"Bij de splitsing links aanhouden naar {way_name}",destination:"Bij de splitsing links aanhouden richting {destination}"},"slight right":{default:"Bij de splitsing rechts aanhouden",name:"Bij de splitsing rechts aanhouden naar {way_name}",destination:"Bij de splitsing rechts aanhouden richting {destination}"},"sharp left":{default:"Bij de splitsing linksaf",name:"Bij de splitsing linksaf naar {way_name}",destination:"Bij de splitsing linksaf richting {destination}"},"sharp right":{default:"Bij de splitsing rechtsaf",name:"Bij de splitsing rechtsaf naar {way_name}",destination:"Bij de splitsing rechtsaf richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},"new name":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga rechtdoor naar {way_name}",destination:"Ga rechtdoor richting {destination}"},"sharp left":{default:"Neem een scherpe bocht, naar links",name:"Linksaf naar {way_name}",destination:"Linksaf richting {destination}"},"sharp right":{default:"Neem een scherpe bocht, naar rechts",name:"Rechtsaf naar {way_name}",destination:"Rechtsaf richting {destination}"},"slight left":{default:"Links aanhouden",name:"Links aanhouden naar {way_name}",destination:"Links aanhouden richting {destination}"},"slight right":{default:"Rechts aanhouden",name:"Rechts aanhouden naar {way_name}",destination:"Rechts aanhouden richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},notification:{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},"off ramp":{default:{default:"Neem de afrit",name:"Neem de afrit naar {way_name}",destination:"Neem de afrit richting {destination}",exit:"Neem afslag {exit}",exit_destination:"Neem afslag {exit} richting {destination}"},left:{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},right:{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"},"sharp left":{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},"sharp right":{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"},"slight left":{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},"slight right":{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"}},"on ramp":{default:{default:"Neem de oprit",name:"Neem de oprit naar {way_name}",destination:"Neem de oprit richting {destination}"},left:{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},right:{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"},"sharp left":{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},"sharp right":{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"},"slight left":{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},"slight right":{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"}},rotary:{default:{default:{default:"Betreedt de rotonde",name:"Betreedt rotonde en sla af op {way_name}",destination:"Betreedt rotonde en sla af richting {destination}"},name:{default:"Ga het knooppunt {rotary_name} op",name:"Verlaat het knooppunt {rotary_name} naar {way_name}",destination:"Verlaat het knooppunt {rotary_name} richting {destination}"},exit:{default:"Betreedt rotonde en neem afslag {exit_number}",name:"Betreedt rotonde en neem afslag {exit_number} naar {way_name}",destination:"Betreedt rotonde en neem afslag {exit_number} richting {destination}"},name_exit:{default:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number}",name:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number} naar {way_name}",destination:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number} richting {destination}"}}},roundabout:{default:{exit:{default:"Betreedt rotonde en neem afslag {exit_number}",name:"Betreedt rotonde en neem afslag {exit_number} naar {way_name}",destination:"Betreedt rotonde en neem afslag {exit_number} richting {destination}"},default:{default:"Betreedt de rotonde",name:"Betreedt rotonde en sla af op {way_name}",destination:"Betreedt rotonde en sla af richting {destination}"}}},"roundabout turn":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},left:{default:"Ga linksaf",name:"Ga linksaf naar {way_name}",destination:"Ga linksaf richting {destination}"},right:{default:"Ga rechtsaf",name:"Ga rechtsaf naar {way_name}",destination:"Ga rechtsaf richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga naar {way_name}",destination:"Ga richting {destination}"}},"exit roundabout":{default:{default:"Verlaat de rotonde",name:"Verlaat de rotonde en ga verder op {way_name}",destination:"Verlaat de rotonde richting {destination}"}},"exit rotary":{default:{default:"Verlaat de rotonde",name:"Verlaat de rotonde en ga verder op {way_name}",destination:"Verlaat de rotonde richting {destination}"}},turn:{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},left:{default:"Ga linksaf",name:"Ga linksaf naar {way_name}",destination:"Ga linksaf richting {destination}"},right:{default:"Ga rechtsaf",name:"Ga rechtsaf naar {way_name}",destination:"Ga rechtsaf richting {destination}"},straight:{default:"Ga rechtdoor",name:"Ga rechtdoor naar {way_name}",destination:"Ga rechtdoor richting {destination}"}},"use lane":{no_lanes:{default:"Rechtdoor"},default:{default:"{lane_instruction}"}}}}},{}],37:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"nord",northeast:"nordst",east:"st",southeast:"srst",south:"sr",southwest:"srvest",west:"vest",northwest:"nordvest"},modifier:{left:"venstre",right:"hyre","sharp left":"skarp venstre","sharp right":"skarp hyre","slight left":"litt til venstre","slight right":"litt til hyre",straight:"rett frem",uturn:"U-sving"},lanes:{xo:"Hold til hyre",ox:"Hold til venstre",xox:"Hold deg i midten",oxo:"Hold til venstre eller hyre"}},modes:{ferry:{default:"Ta ferja",name:"Ta ferja {way_name}",destination:"Ta ferja til {destination}"}},phrase:{"two linked by distance":"{instruction_one}, deretter {instruction_two} om {distance}","two linked":"{instruction_one}, deretter {instruction_two}","one in distance":"Om {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"avkjrsel {exit}"},arrive:{default:{default:"Du har ankommet din {nth} destinasjon",upcoming:"Du vil ankomme din {nth} destinasjon",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}"},left:{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},right:{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"sharp left":{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},"sharp right":{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"slight right":{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"slight left":{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},straight:{default:"Du har ankommet din {nth} destinasjon, rett forut",upcoming:"Du vil ankomme din {nth} destinasjon, rett forut",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, rett forut"}},continue:{default:{default:"Ta til {modifier}",name:"Ta til {modifier} for  bli vrende p {way_name}",destination:"Ta til {modifier} mot {destination}",exit:"Ta til {modifier} inn p {way_name}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem for  bli vrende p {way_name}",destination:"Fortsett mot {destination}",distance:"Fortsett rett frem, {distance} ",namedistance:"Fortsett p {way_name}, {distance}"},"sharp left":{default:"Sving skarpt til venstre",name:"Sving skarpt til venstre for  bli vrende p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre",name:"Sving skarpt til hyre for  bli vrende p {way_name}",destination:"Sving skarpt mot {destination}"},"slight left":{default:"Sving svakt til venstre",name:"Sving svakt til venstre for  bli vrende p {way_name}",destination:"Sving svakt til venstre mot {destination}"},"slight right":{default:"Sving svakt til hyre",name:"Sving svakt til hyre for  bli vrende p {way_name}",destination:"Sving svakt til hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving og fortsett p {way_name}",destination:"Ta en U-sving mot {destination}"}},depart:{default:{default:"Kjr i retning {direction}",name:"Kjr i retning {direction} p {way_name}",namedistance:"Kjr i retning {direction} p {way_name}, {distance}"}},"end of road":{default:{default:"Sving {modifier}",name:"Ta til {modifier} inn p {way_name}",destination:"Sving {modifier} mot {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem til  {way_name}",destination:"Fortsett rett frem mot {destination}"},uturn:{default:"Ta en U-sving i enden av veien",name:"Ta en U-sving til {way_name} i enden av veien",destination:"Ta en U-sving mot {destination} i enden av veien"}},fork:{default:{default:"Hold til {modifier} i veikrysset",name:"Hold til {modifier} inn p {way_name}",destination:"Hold til {modifier} mot {destination}"},"slight left":{default:"Hold til venstre i veikrysset",name:"Hold til venstre inn p {way_name}",destination:"Hold til venstre mot {destination}"},"slight right":{default:"Hold til hyre i veikrysset",name:"Hold til hyre inn p {way_name}",destination:"Hold til hyre mot {destination}"},"sharp left":{default:"Sving skarpt til venstre i veikrysset",name:"Sving skarpt til venstre inn p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre i veikrysset",name:"Sving skarpt til hyre inn p {way_name}",destination:"Svings skarpt til hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},merge:{default:{default:"Hold {modifier} kjrefelt",name:"Hold {modifier} kjrefelt inn p {way_name}",destination:"Hold {modifier} kjrefelt mot {destination}"},straight:{default:"Hold kjrefelt",name:"Hold kjrefelt inn p {way_name}",destination:"Hold kjrefelt mot {destination}"},"slight left":{default:"Hold venstre kjrefelt",name:"Hold venstre kjrefelt inn p {way_name}",destination:"Hold venstre kjrefelt mot {destination}"},"slight right":{default:"Hold hyre kjrefelt",name:"Hold hyre kjrefelt inn p {way_name}",destination:"Hold hyre kjrefelt mot {destination}"},"sharp left":{default:"Hold venstre kjrefelt",name:"Hold venstre kjrefelt inn p {way_name}",destination:"Hold venstre kjrefelt mot {destination}"},"sharp right":{default:"Hold hyre kjrefelt",name:"Hold hyre kjrefelt inn p {way_name}",destination:"Hold hyre kjrefelt mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},"new name":{default:{default:"Fortsett {modifier}",name:"Fortsett {modifier} til {way_name}",destination:"Fortsett {modifier} mot  {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett inn p {way_name}",destination:"Fortsett mot {destination}"},"sharp left":{default:"Sving skarpt til venstre",name:"Sving skarpt til venstre inn p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre",name:"Sving skarpt til hyre inn p {way_name}",destination:"Svings skarpt til hyre mot {destination}"},"slight left":{default:"Fortsett litt mot venstre",name:"Fortsett litt mot venstre til {way_name}",destination:"Fortsett litt mot venstre mot {destination}"},"slight right":{default:"Fortsett litt mot hyre",name:"Fortsett litt mot hyre til {way_name}",destination:"Fortsett litt mot hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},notification:{default:{default:"Fortsett {modifier}",name:"Fortsett {modifier} til {way_name}",destination:"Fortsett {modifier} mot  {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},"off ramp":{default:{default:"Ta avkjrselen",name:"Ta avkjrselen inn p {way_name}",destination:"Ta avkjrselen mot {destination}",exit:"Ta avkjrsel {exit}",exit_destination:"Ta avkjrsel {exit} mot {destination}"},left:{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},right:{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"},"sharp left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},"sharp right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"},"slight left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},"slight right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"}},"on ramp":{default:{default:"Ta avkjrselen",name:"Ta avkjrselen inn p {way_name}",destination:"Ta avkjrselen mot {destination}"},left:{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},right:{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"},"sharp left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},"sharp right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"},"slight left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},"slight right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"}},rotary:{default:{default:{default:"Kjr inn i rundkjringen",name:"Kjr inn i rundkjringen og deretter ut p {way_name}",destination:"Kjr inn i rundkjringen og deretter ut mot {destination}"},name:{default:"Kjr inn i {rotary_name}",name:"Kjr inn i {rotary_name} og deretter ut p {way_name}",destination:"Kjr inn i {rotary_name} og deretter ut mot {destination}"},exit:{default:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel",name:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut p {way_name}",destination:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut mot {destination} "},name_exit:{default:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel",name:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel inn p {way_name}",destination:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel mot {destination}"}}},roundabout:{default:{exit:{default:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel",name:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel inn p {way_name}",destination:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut mot {destination} "},default:{default:"Kjr inn i rundkjringen",name:"Kjr inn i rundkjringen og deretter ut p {way_name}",destination:"Kjr inn i rundkjringen og deretter ut mot {destination}"}}},"roundabout turn":{default:{default:"Ta en {modifier}",name:"Ta en {modifier} inn p {way_name}",destination:"Ta en {modifier} mot {destination}"},left:{default:"Sving til venstre",name:"Sving til venstre inn p {way_name}",destination:"Sving til venstre mot {destination}"},right:{default:"Sving til hyre",name:"Sving til hyre inn p {way_name}",destination:"Sving til hyre mot {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem til  {way_name}",destination:"Fortsett rett frem mot {destination}"}},"exit roundabout":{default:{default:"Kjr ut av rundkjringen",name:"Kjr ut av rundkjringen og inn p {way_name}",destination:"Kjr ut av rundkjringen mot {destination}"}},"exit rotary":{default:{default:"Kjr ut av rundkjringen",name:"Kjr ut av rundkjringen og inn p {way_name}",destination:"Kjr ut av rundkjringen mot {destination}"}},turn:{default:{default:"Ta en {modifier}",name:"Ta en {modifier} inn p {way_name}",destination:"Ta en {modifier} mot {destination}"},left:{default:"Sving til venstre",name:"Sving til venstre inn p {way_name}",destination:"Sving til venstre mot {destination}"},right:{default:"Sving til hyre",name:"Sving til hyre inn p {way_name}",destination:"Sving til hyre mot {destination}"},straight:{default:"Kjr rett frem",name:"Kjr rett frem og inn p {way_name}",destination:"Kjr rett frem mot {destination}"}},"use lane":{no_lanes:{default:"Fortsett rett frem"},default:{default:"{lane_instruction}"}}}}},{}],38:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"pnoc",northeast:"pnocny wschd",east:"wschd",southeast:"poudniowy wschd",south:"poudnie",southwest:"poudniowy zachd",west:"zachd",northwest:"pnocny zachd"},modifier:{left:"lewo",right:"prawo","sharp left":"ostro w lewo","sharp right":"ostro w prawo","slight left":"agodnie w lewo","slight right":"agodnie w prawo",straight:"prosto",uturn:"zawr"},lanes:{xo:"Trzymaj si prawej strony",ox:"Trzymaj si lewej strony",xox:"Trzymaj si rodka",oxo:"Trzymaj si lewej lub prawej strony"}},modes:{ferry:{default:"We prom",name:"We prom {way_name}",destination:"We prom w kierunku {destination}"}},phrase:{"two linked by distance":"{instruction_one}, nastpnie za {distance} {instruction_two}","two linked":"{instruction_one}, nastpnie {instruction_two}","one in distance":"Za {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Dojechano do miejsca docelowego {nth}",upcoming:"Dojechano do miejsca docelowego {nth}",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}"},left:{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},right:{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"sharp left":{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},"sharp right":{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"slight right":{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"slight left":{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},straight:{default:"Dojechano do miejsca docelowego {nth} , prosto",upcoming:"Dojechano do miejsca docelowego {nth} , prosto",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, prosto"}},continue:{default:{default:"Skr {modifier}",name:"Skr w {modifier}, aby pozosta na {way_name}",destination:"Skr {modifier} w kierunku {destination}",exit:"Skr {modifier} na {way_name}"},straight:{default:"Kontynuuj prosto",name:"Jed dalej prosto, aby pozosta na {way_name}",destination:"Kontynuuj w kierunku {destination}",distance:"Jed dalej prosto przez {distance}",namedistance:"Jed dalej {way_name} przez {distance}"},"sharp left":{default:"Skr ostro w lewo",name:"Skr w lewo w ostry zakrt, aby pozosta na {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Skr ostro w prawo",name:"Skr w prawo w ostry zakrt, aby pozosta na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},"slight left":{default:"Skr w lewo w agodny zakrt",name:"Skr w lewo w agodny zakrt, aby pozosta na {way_name}",destination:"Skr w lewo w agodny zakrt na {destination}"},"slight right":{default:"Skr w prawo w agodny zakrt",name:"Skr w prawo w agodny zakrt, aby pozosta na {way_name}",destination:"Skr w prawo w agodny zakrt na {destination}"},uturn:{default:"Zawr",name:"Zawr i jed dalej {way_name}",destination:"Zawr w kierunku {destination}"}},depart:{default:{default:"Kieruj si {direction}",name:"Kieruj si {direction} na {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Skr {modifier}",name:"Skr {modifier} na {way_name}",destination:"Skr {modifier} w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"},uturn:{default:"Zawr na kocu ulicy",name:"Zawr na kocu ulicy na {way_name}",destination:"Zawr na kocu ulicy w kierunku {destination}"}},fork:{default:{default:"Na rozwidleniu trzymaj si {modifier}",name:"Na rozwidleniu trzymaj si {modifier} na {way_name}",destination:"Na rozwidleniu trzymaj si {modifier} w kierunku {destination}"},"slight left":{default:"Na rozwidleniu trzymaj si lewej strony",name:"Na rozwidleniu trzymaj si lewej strony w {way_name}",destination:"Na rozwidleniu trzymaj si lewej strony w kierunku {destination}"},"slight right":{default:"Na rozwidleniu trzymaj si prawej strony",name:"Na rozwidleniu trzymaj si prawej strony na {way_name}",destination:"Na rozwidleniu trzymaj si prawej strony w kierunku {destination}"},"sharp left":{default:"Na rozwidleniu skr ostro w lewo",name:"Skr ostro w lewo w {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Na rozwidleniu skr ostro w prawo",name:"Skr ostro w prawo na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},merge:{default:{default:"Wcz si {modifier}",name:"Wcz si {modifier} na {way_name}",destination:"Wcz si {modifier} w kierunku {destination}"},straight:{default:"Wcz si prosto",name:"Wcz si prosto na {way_name}",destination:"Wcz si prosto w kierunku {destination}"},"slight left":{default:"Wcz si z lewej strony",name:"Wcz si z lewej strony na {way_name}",destination:"Wcz si z lewej strony w kierunku {destination}"},"slight right":{default:"Wcz si z prawej strony",name:"Wcz si z prawej strony na {way_name}",destination:"Wcz si z prawej strony w kierunku {destination}"},"sharp left":{default:"Wcz si z lewej strony",name:"Wcz si z lewej strony na {way_name}",destination:"Wcz si z lewej strony w kierunku {destination}"},"sharp right":{default:"Wcz si z prawej strony",name:"Wcz si z prawej strony na {way_name}",destination:"Wcz si z prawej strony w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},"new name":{default:{default:"Kontynuuj {modifier}",name:"Kontynuuj {modifier} na {way_name}",destination:"Kontynuuj {modifier} w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj na {way_name}",destination:"Kontynuuj w kierunku {destination}"},"sharp left":{default:"Skr ostro w lewo",name:"Skr ostro w lewo w {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Skr ostro w prawo",name:"Skr ostro w prawo na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},"slight left":{default:"Kontynuuj agodnie w lewo",name:"Kontynuuj agodnie w lewo na {way_name}",destination:"Kontynuuj agodnie w lewo w kierunku {destination}"},"slight right":{default:"Kontynuuj agodnie w prawo",name:"Kontynuuj agodnie w prawo na {way_name}",destination:"Kontynuuj agodnie w prawo w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},notification:{default:{default:"Kontynuuj {modifier}",name:"Kontynuuj {modifier} na {way_name}",destination:"Kontynuuj {modifier} w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},"off ramp":{default:{default:"Zjed",name:"We zjazd na {way_name}",destination:"We zjazd w kierunku {destination}",exit:"Zjed zjazdem {exit}",exit_destination:"Zjed zjazdem {exit} na {destination}"},left:{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},right:{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"},"sharp left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},"sharp right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"},"slight left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},"slight right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"}},"on ramp":{default:{default:"We zjazd",name:"We zjazd na {way_name}",destination:"We zjazd w kierunku {destination}"},left:{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},right:{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"},"sharp left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},"sharp right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"},"slight left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},"slight right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"}},rotary:{default:{default:{default:"Wjed na rondo",name:"Wjed na rondo i skr na {way_name}",destination:"Wjed na rondo i skr w kierunku {destination}"},name:{default:"Wjed na {rotary_name}",name:"Wjed na {rotary_name} i skr na {way_name}",destination:"Wjed na {rotary_name} i skr w kierunku {destination}"},exit:{default:"Wjed na rondo i wyjed {exit_number} zjazdem",name:"Wjed na rondo i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na rondo i wyjed {exit_number} zjazdem w kierunku {destination}"},name_exit:{default:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem",name:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem w kierunku {destination}"}}},roundabout:{default:{exit:{default:"Wjed na rondo i wyjed {exit_number} zjazdem",name:"Wjed na rondo i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na rondo i wyjed {exit_number} zjazdem w kierunku {destination}"},default:{default:"Wjed na rondo",name:"Wjed na rondo i wyjed na {way_name}",destination:"Wjed na rondo i wyjed w kierunku {destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"}},"exit roundabout":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"}},"exit rotary":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Jed prosto",name:"Jed prosto na {way_name}",destination:"Jed prosto w kierunku {destination}"}},turn:{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Jed prosto",name:"Jed prosto na {way_name}",destination:"Jed prosto w kierunku {destination}"}},"use lane":{no_lanes:{default:"Kontynuuj prosto"},default:{default:"{lane_instruction}"}}}}},{}],39:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"nordeste",east:"leste",southeast:"sudeste",south:"sul",southwest:"sudoeste",west:"oeste",northwest:"noroeste"},modifier:{left:" esquerda",right:" direita","sharp left":"fechada  esquerda","sharp right":"fechada  direita","slight left":"suave  esquerda","slight right":"suave  direita",straight:"em frente",uturn:"retorno"},lanes:{xo:"Mantenha-se  direita",ox:"Mantenha-se  esquerda",xox:"Mantenha-se ao centro",oxo:"Mantenha-se  esquerda ou direita"}},modes:{ferry:{default:"Pegue a balsa",name:"Pegue a balsa {way_name}",destination:"Pegue a balsa sentido {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ento, em {distance}, {instruction_two}","two linked":"{instruction_one}, ento {instruction_two}","one in distance":"Em {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sada {exit}"},arrive:{default:{default:"Voc chegou ao seu {nth} destino",upcoming:"Voc chegar ao seu {nth} destino",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou a {waypoint_name}"},left:{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},right:{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"sharp left":{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},"sharp right":{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"slight right":{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"slight left":{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},straight:{default:"Voc chegou ao seu {nth} destino, em frente",upcoming:"Voc vai chegar ao seu {nth} destino, em frente",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"You have arrived at {waypoint_name}, straight ahead"}},continue:{default:{default:"Vire {modifier}",name:"Vire {modifier} para manter-se na {way_name}",destination:"Vire {modifier} sentido {destination}",exit:"Vire {modifier} em {way_name}"},straight:{default:"Continue em frente",name:"Continue em frente para manter-se na {way_name}",destination:"Continue em direo  {destination}",distance:"Continue em frente por {distance}",namedistance:"Continue na {way_name} por {distance}"},"sharp left":{default:"Faa uma curva fechada a esquerda",name:"Faa uma curva fechada a esquerda para manter-se na {way_name}",destination:"Faa uma curva fechada a esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada a direita",name:"Faa uma curva fechada a direita para manter-se na {way_name}",destination:"Faa uma curva fechada a direita sentido {destination}"},"slight left":{default:"Faa uma curva suave a esquerda",name:"Faa uma curva suave a esquerda para manter-se na {way_name}",destination:"Faa uma curva suave a esquerda em direo a {destination}"},"slight right":{default:"Faa uma curva suave a direita",name:"Faa uma curva suave a direita para manter-se na {way_name}",destination:"Faa uma curva suave a direita em direo a {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno e continue em {way_name}",destination:"Faa o retorno sentido {destination}"}},depart:{default:{default:"Siga {direction}",name:"Siga {direction} em {way_name}",namedistance:"Siga {direction} na {way_name} por {distance}"}},"end of road":{default:{default:"Vire {modifier}",name:"Vire {modifier} em {way_name}",destination:"Vire {modifier} sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em frente em {way_name}",destination:"Continue em frente sentido {destination}"},uturn:{default:"Faa o retorno no fim da rua",name:"Faa o retorno em {way_name} no fim da rua",destination:"Faa o retorno sentido {destination} no fim da rua"}},fork:{default:{default:"Mantenha-se {modifier} na bifurcao",name:"Mantenha-se {modifier} na bifurcao em {way_name}",destination:"Mantenha-se {modifier} na bifurcao sentido {destination}"},"slight left":{default:"Mantenha-se  esquerda na bifurcao",name:"Mantenha-se  esquerda na bifurcao em {way_name}",destination:"Mantenha-se  esquerda na bifurcao sentido {destination}"},"slight right":{default:"Mantenha-se  direita na bifurcao",name:"Mantenha-se  direita na bifurcao em {way_name}",destination:"Mantenha-se  direita na bifurcao sentido {destination}"},"sharp left":{default:"Faa uma curva fechada  esquerda na bifurcao",name:"Faa uma curva fechada  esquerda em {way_name}",destination:"Faa uma curva fechada  esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada  direita na bifurcao",name:"Faa uma curva fechada  direita em {way_name}",destination:"Faa uma curva fechada  direita sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},merge:{default:{default:"Entre {modifier}",name:"Entre {modifier} na {way_name}",destination:"Entre {modifier} em direo  {destination}"},straight:{default:"Mesclar",name:"Entre reto na {way_name}",destination:"Entre reto em direo  {destination}"},"slight left":{default:"Entre  esquerda",name:"Entre  esquerda na {way_name}",destination:"Entre  esquerda em direo  {destination}"},"slight right":{default:"Entre  direita",name:"Entre  direita na {way_name}",destination:"Entre  direita em direo  {destination}"},"sharp left":{default:"Entre  esquerda",name:"Entre  esquerda na {way_name}",destination:"Entre  esquerda em direo  {destination}"},"sharp right":{default:"Entre  direita",name:"Entre  direita na {way_name}",destination:"Entre  direita em direo  {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} em {way_name}",destination:"Continue {modifier} sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em {way_name}",destination:"Continue em direo  {destination}"},"sharp left":{default:"Faa uma curva fechada  esquerda",name:"Faa uma curva fechada  esquerda em {way_name}",destination:"Faa uma curva fechada  esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada  direita",name:"Faa uma curva fechada  direita em {way_name}",destination:"Faa uma curva fechada  direita sentido {destination}"},"slight left":{default:"Continue ligeiramente  esquerda",name:"Continue ligeiramente  esquerda em {way_name}",destination:"Continue ligeiramente  esquerda sentido {destination}"},"slight right":{default:"Continue ligeiramente  direita",name:"Continue ligeiramente  direita em {way_name}",destination:"Continue ligeiramente  direita sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} em {way_name}",destination:"Continue {modifier} sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},"off ramp":{default:{default:"Pegue a rampa",name:"Pegue a rampa em {way_name}",destination:"Pegue a rampa sentido {destination}",exit:"Pegue a sada {exit}",exit_destination:"Pegue a sada {exit} em direo  {destination}"},left:{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},right:{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"},"sharp left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},"sharp right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"},"slight left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},"slight right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"}},"on ramp":{default:{default:"Pegue a rampa",name:"Pegue a rampa em {way_name}",destination:"Pegue a rampa sentido {destination}"},left:{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},right:{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentid {destination}"},"sharp left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},"sharp right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}"},"slight left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},"slight right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}"}},rotary:{default:{default:{default:"Entre na rotatria",name:"Entre na rotatria e saia na {way_name}",destination:"Entre na rotatria e saia sentido {destination}"},name:{default:"Entre em {rotary_name}",name:"Entre em {rotary_name} e saia em {way_name}",destination:"Entre em {rotary_name} e saia sentido {destination}"},exit:{default:"Entre na rotatria e pegue a {exit_number} sada",name:"Entre na rotatria e pegue a {exit_number} sada na {way_name}",destination:"Entre na rotatria e pegue a {exit_number} sada sentido {destination}"},name_exit:{default:"Entre em {rotary_name} e saia na {exit_number} sada",name:"Entre em {rotary_name} e saia na {exit_number} sada em {way_name}",destination:"Entre em {rotary_name} e saia na {exit_number} sada sentido {destination}"}}},roundabout:{default:{exit:{default:"Entre na rotatria e pegue a {exit_number} sada",name:"Entre na rotatria e pegue a {exit_number} sada na {way_name}",destination:"Entre na rotatria e pegue a {exit_number} sada sentido {destination}"},default:{default:"Entre na rotatria",name:"Entre na rotatria e saia na {way_name}",destination:"Entre na rotatria e saia sentido {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} em {way_name}",destination:"Siga {modifier} sentido {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda em {way_name}",destination:"Vire  esquerda sentido {destination}"},right:{default:"Vire  direita",name:"Vire  direita em {way_name}",destination:"Vire  direita sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em frente em {way_name}",destination:"Continue em frente sentido {destination}"}},"exit roundabout":{default:{default:"Saia da rotatria",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},"exit rotary":{default:{default:"Saia da rotatria",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},turn:{default:{default:"Siga {modifier}",name:"Siga {modifier} em {way_name}",destination:"Siga {modifier} sentido {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda em {way_name}",destination:"Vire  esquerda sentido {destination}"},right:{default:"Vire  direita",name:"Vire  direita em {way_name}",destination:"Vire  direita sentido {destination}"},straight:{default:"Siga em frente",name:"Siga em frente em {way_name}",destination:"Siga em frente sentido {destination}"}},"use lane":{no_lanes:{default:"Continue em frente"},default:{default:"{lane_instruction}"}}}}},{}],40:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"nordeste",east:"este",southeast:"sudeste",south:"sul",southwest:"sudoeste",west:"oeste",northwest:"noroeste"},modifier:{left:" esquerda",right:" direita","sharp left":"acentuadamente  esquerda","sharp right":"acentuadamente  direita","slight left":"ligeiramente  esquerda","slight right":"ligeiramente  direita",straight:"em frente",uturn:"inverso de marcha"},lanes:{xo:"Mantenha-se  direita",ox:"Mantenha-se  esquerda",xox:"Mantenha-se ao meio",oxo:"Mantenha-se  esquerda ou  direita"}},modes:{ferry:{default:"Apanhe o ferry",name:"Apanhe o ferry {way_name}",destination:"Apanhe o ferry para {destination}"}},phrase:{"two linked by distance":"{instruction_one}, depois, a {distance}, {instruction_two}","two linked":"{instruction_one}, depois {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sada {exit}"},arrive:{default:{default:"Chegou ao seu {nth} destino",upcoming:"Est a chegar ao seu {nth} destino",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name}"},left:{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},right:{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"sharp left":{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},"sharp right":{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"slight right":{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"slight left":{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},straight:{default:"Chegou ao seu {nth} destino, em frente",upcoming:"Est a chegar ao seu {nth} destino, em frente",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name}, em frente"}},continue:{default:{default:"Vire {modifier}",name:"Vire {modifier} para se manter em {way_name}",destination:"Vire {modifier} em direo a {destination}",exit:"Vire {modifier} para {way_name}"},straight:{default:"Continue em frente",name:"Continue em frente para se manter em {way_name}",destination:"Continue em direo a {destination}",distance:"Continue em frente por {distance}",namedistance:"Continue em {way_name} por {distance}"},"sharp left":{default:"Vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para se manter em {way_name}",destination:"Vire acentuadamente  esquerda em direo a {destination}"},"sharp right":{default:"Vire acentuadamente  direita",name:"Vire acentuadamente  direita para se manter em {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},"slight left":{default:"Vire ligeiramente  esquerda",name:"Vire ligeiramente  esquerda para se manter em {way_name}",destination:"Vire ligeiramente  esquerda em direo a {destination}"},"slight right":{default:"Vire ligeiramente  direita",name:"Vire ligeiramente  direita para se manter em {way_name}",destination:"Vire ligeiramente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha e continue em {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},depart:{default:{default:"Dirija-se para {direction}",name:"Dirija-se para {direction} em {way_name}",namedistance:"Dirija-se para {direction} em {way_name} por {distance}"}},"end of road":{default:{default:"Vire {modifier}",name:"Vire {modifier} para {way_name}",destination:"Vire {modifier} em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue em frente para {way_name}",destination:"Continue em frente em direo a {destination}"},uturn:{default:"No final da estrada faa uma inverso de marcha",name:"No final da estrada faa uma inverso de marcha para {way_name} ",destination:"No final da estrada faa uma inverso de marcha em direo a {destination}"}},fork:{default:{default:"Na bifurcao mantenha-se {modifier}",name:"Mantenha-se {modifier} para {way_name}",destination:"Mantenha-se {modifier} em direo a {destination}"},"slight left":{default:"Na bifurcao mantenha-se  esquerda",name:"Mantenha-se  esquerda para {way_name}",destination:"Mantenha-se  esquerda em direo a {destination}"},"slight right":{default:"Na bifurcao mantenha-se  direita",name:"Mantenha-se  direita para {way_name}",destination:"Mantenha-se  direita em direo a {destination}"},"sharp left":{default:"Na bifurcao vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para {way_name}",destination:"Vire acentuadamente  esquerda em direo a {destination}"},"sharp right":{default:"Na bifurcao vire acentuadamente  direita",name:"Vire acentuadamente  direita para {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},merge:{default:{default:"Una-se ao trfego {modifier}",name:"Una-se ao trfego {modifier} para {way_name}",destination:"Una-se ao trfego {modifier} em direo a {destination}"},straight:{default:"Una-se ao trfego",name:" Una-se ao trfego para {way_name}",destination:"Una-se ao trfego em direo a {destination}"},"slight left":{default:"Una-se ao trfego  esquerda",name:"Una-se ao trfego  esquerda para {way_name}",destination:"Una-se ao trfego  esquerda em direo a {destination}"},"slight right":{default:"Una-se ao trfego  direita",name:"Una-se ao trfego  direita para {way_name}",destination:"Una-se ao trfego  direita em direo a {destination}"},"sharp left":{default:"Una-se ao trfego  esquerda",name:"Una-se ao trfego  esquerda para {way_name}",destination:"Una-se ao trfego  esquerda em direo a {destination}"},"sharp right":{default:"Una-se ao trfego  direita",name:"Una-se ao trfego  direita para {way_name}",destination:"Una-se ao trfego  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} para {way_name}",destination:"Continue {modifier} em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue para {way_name}",destination:"Continue em direo a {destination}"},"sharp left":{default:"Vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para {way_name}",destination:"Vire acentuadamente  esquerda em direo a{destination}"},"sharp right":{default:"Vire acentuadamente  direita",name:"Vire acentuadamente  direita para {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},"slight left":{default:"Continue ligeiramente  esquerda",name:"Continue ligeiramente  esquerda para {way_name}",destination:"Continue ligeiramente  esquerda em direo a {destination}"},"slight right":{default:"Continue ligeiramente  direita",name:"Continue ligeiramente  direita para {way_name}",destination:"Continue ligeiramente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} para {way_name}",destination:"Continue {modifier} em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},"off ramp":{default:{default:"Saia na sada",name:"Saia na sada para {way_name}",destination:"Saia na sada em direo a {destination}",exit:"Saia na sada {exit}",exit_destination:"Saia na sada {exit} em direo a {destination}"},left:{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},right:{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"},"sharp left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},"sharp right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"},"slight left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},"slight right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"}},"on ramp":{default:{default:"Saia na sada",name:"Saia na sada para {way_name}",destination:"Saia na sada em direo a {destination}"},left:{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},right:{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"},"sharp left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},"sharp right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"},"slight left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},"slight right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"}},rotary:{default:{default:{default:"Entre na rotunda",name:"Entre na rotunda e saia para {way_name}",destination:"Entre na rotunda e saia em direo a {destination}"},name:{default:"Entre em {rotary_name}",name:"Entre em {rotary_name} e saia para {way_name}",destination:"Entre em {rotary_name} e saia em direo a {destination}"},exit:{default:"Entre na rotunda e saia na sada {exit_number}",name:"Entre na rotunda e saia na sada {exit_number} para {way_name}",destination:"Entre na rotunda e saia na sada {exit_number} em direo a {destination}"},name_exit:{default:"Entre em {rotary_name} e saia na sada {exit_number}",name:"Entre em {rotary_name} e saia na sada {exit_number} para {way_name}",destination:"Entre em{rotary_name} e saia na sada {exit_number} em direo a {destination}"}}},roundabout:{default:{exit:{default:"Entre na rotunda e saia na sada {exit_number}",name:"Entre na rotunda e saia na sada {exit_number} para {way_name}",destination:"Entre na rotunda e saia na sada {exit_number} em direo a {destination}"},default:{default:"Entre na rotunda",name:"Entre na rotunda e saia para {way_name}",destination:"Entre na rotunda e saia em direo a {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} para {way_name}",destination:"Siga {modifier} em direo a {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda para {way_name}",destination:"Vire  esquerda em direo a {destination}"},right:{default:"Vire  direita",name:"Vire  direita para {way_name}",destination:"Vire  direita em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue em frente para {way_name}",destination:"Continue em frente em direo a {destination}"}},"exit roundabout":{default:{default:"Saia da rotunda",name:"Saia da rotunda para {way_name}",destination:"Saia da rotunda em direo a {destination}"}},"exit rotary":{default:{default:"Saia da rotunda",name:"Saia da rotunda para {way_name}",destination:"Saia da rotunda em direo a {destination}"}},turn:{default:{default:"Siga {modifier}",name:"Siga {modifier} para{way_name}",destination:"Siga {modifier} em direo a {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda para {way_name}",destination:"Vire  esquerda em direo a {destination}"},right:{default:"Vire  direita",name:"Vire  direita para {way_name}",destination:"Vire  direita em direo a {destination}"},straight:{default:"V em frente",name:"V em frente para {way_name}",destination:"V em frente em direo a {destination}"}},"use lane":{no_lanes:{default:"Continue em frente"},default:{default:"{lane_instruction}"}}}}},{}],41:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"prima",2:"a doua",3:"a treia",4:"a patra",5:"a cincea",6:"a asea",7:"a aptea",8:"a opta",9:"a noua",10:"a zecea"},direction:{north:"nord",northeast:"nord-est",east:"est",southeast:"sud-est",south:"sud",southwest:"sud-vest",west:"vest",northwest:"nord-vest"},modifier:{left:"stnga",right:"dreapta","sharp left":"puternic stnga","sharp right":"puternic dreapta","slight left":"uor stnga","slight right":"uor dreapta",straight:"nainte",uturn:"ntoarcere"},lanes:{xo:"inei stnga",ox:"inei dreapta",xox:"inei pe mijloc",oxo:"inei pe laterale"}},modes:{ferry:{default:"Luai feribotul",name:"Luai feribotul {way_name}",destination:"Luai feribotul spre {destination}"}},phrase:{"two linked by distance":"{instruction_one}, apoi n {distance}, {instruction_two}","two linked":"{instruction_one} apoi {instruction_two}","one in distance":"n {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"ieirea {exit}"},arrive:{default:{default:"Ai ajuns la {nth} destinaie",upcoming:"Ai ajuns la {nth} destinaie",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}"},left:{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},right:{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"sharp left":{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},"sharp right":{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"slight right":{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"slight left":{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},straight:{default:"Ai ajuns la {nth} destinaie, n fa",upcoming:"Ai ajuns la {nth} destinaie, n fa",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, n fa"}},continue:{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}",exit:"Virai {modifier} pe {way_name}"},straight:{default:"Mergei nainte",name:"Mergei nainte pe {way_name}",destination:"Continuai spre {destination}",distance:"Mergei nainte pentru {distance}",namedistance:"Continuai pe {way_name} pentru {distance}"},"sharp left":{default:"Virai puternic la stnga",name:"Virai puternic la stnga pe {way_name}",destination:"Virai puternic la stnga spre {destination}"},"sharp right":{default:"Virai puternic la dreapta",name:"Virai puternic la dreapta pe {way_name}",destination:"Virai puternic la dreapta spre {destination}"},"slight left":{default:"Virai uor la stnga",name:"Virai uor la stnga pe {way_name}",destination:"Virai uor la stnga spre {destination}"},"slight right":{default:"Virai uor la dreapta",name:"Virai uor la dreapta pe {way_name}",destination:"Virai uor la dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v i continuai pe {way_name}",destination:"ntoarcei-v spre {destination}"}},depart:{default:{default:"Mergei spre {direction}",name:"Mergei spre {direction} pe {way_name}",namedistance:"Mergei spre {direction} pe {way_name} pentru {distance}"}},"end of road":{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}"},straight:{default:"Continuai nainte",name:"Continuai nainte pe {way_name}",destination:"Continuai nainte spre {destination}"},uturn:{default:"ntoarcei-v la sfritul drumului",name:"ntoarcei-v pe {way_name} la sfritul drumului",destination:"ntoarcei-v spre {destination} la sfritul drumului"}},fork:{default:{default:"inei {modifier} la bifurcaie",name:"inei {modifier} la bifurcaie pe {way_name}",destination:"inei {modifier} la bifurcaie spre {destination}"},"slight left":{default:"inei pe stnga la bifurcaie",name:"inei pe stnga la bifurcaie pe {way_name}",destination:"inei pe stnga la bifurcaie spre {destination}"},"slight right":{default:"inei pe dreapta la bifurcaie",name:"inei pe dreapta la bifurcaie pe {way_name}",destination:"inei pe dreapta la bifurcaie spre {destination}"},"sharp left":{default:"Virai puternic stnga la bifurcaie",name:"Virai puternic stnga la bifurcaie pe {way_name}",destination:"Virai puternic stnga la bifurcaie spre {destination}"},"sharp right":{default:"Virai puternic dreapta la bifurcaie",name:"Virai puternic dreapta la bifurcaie pe {way_name}",destination:"Virai puternic dreapta la bifurcaie spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},merge:{default:{default:"Intrai n {modifier}",name:"Intrai n {modifier} pe {way_name}",destination:"Intrai n {modifier} spre {destination}"},straight:{default:"Intrai",name:"Intrai pe {way_name}",destination:"Intrai spre {destination}"},"slight left":{default:"Intrai n stnga",name:"Intrai n stnga pe {way_name}",destination:"Intrai n stnga spre {destination}"},"slight right":{default:"Intrai n dreapta",name:"Intrai n dreapta pe {way_name}",destination:"Intrai n dreapta spre {destination}"},"sharp left":{default:"Intrai n stnga",name:"Intrai n stnga pe {way_name}",destination:"Intrai n stnga spre {destination}"},"sharp right":{default:"Intrai n dreapta",name:"Intrai n dreapta pe {way_name}",destination:"Intrai n dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},"new name":{default:{default:"Continuai {modifier}",name:"Continuai {modifier} pe {way_name}",destination:"Continuai {modifier} spre {destination}"},straight:{default:"Continuai nainte",name:"Continuai pe {way_name}",destination:"Continuai spre {destination}"},"sharp left":{default:"Virai puternic la stnga",name:"Virai puternic la stnga pe {way_name}",destination:"Virai puternic la stnga spre {destination}"},"sharp right":{default:"Virai puternic la dreapta",name:"Virai puternic la dreapta pe {way_name}",destination:"Virai puternic la dreapta spre {destination}"},"slight left":{default:"Continuai uor la stnga",name:"Continuai uor la stnga pe {way_name}",destination:"Continuai uor la stnga spre {destination}"},"slight right":{default:"Continuai uor la dreapta",name:"Continuai uor la dreapta pe {way_name}",destination:"Continuai uor la dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},notification:{default:{default:"Continuai {modifier}",name:"Continuai {modifier} pe {way_name}",destination:"Continuai {modifier} spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},"off ramp":{default:{default:"Urmai breteaua",name:"Urmai breteaua pe {way_name}",destination:"Urmai breteaua spre {destination}",exit:"Urmai ieirea {exit}",exit_destination:"Urmai ieirea {exit} spre {destination}"},left:{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},right:{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"},"sharp left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},"sharp right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"},"slight left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},"slight right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"}},"on ramp":{default:{default:"Urmai breteaua de intrare",name:"Urmai breteaua pe {way_name}",destination:"Urmai breteaua spre {destination}"},left:{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},right:{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"},"sharp left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},"sharp right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"},"slight left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},"slight right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"}},rotary:{default:{default:{default:"Intrai n sensul giratoriu",name:"Intrai n sensul giratoriu i ieii pe {way_name}",destination:"Intrai n sensul giratoriu i ieii spre {destination}"},name:{default:"Intrai n {rotary_name}",name:"Intrai n {rotary_name} i ieii pe {way_name}",destination:"Intrai n {rotary_name} i ieii spre {destination}"},exit:{default:"Intrai n sensul giratoriu i urmai {exit_number} ieire",name:"Intrai n sensul giratoriu i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n sensul giratoriu i urmai {exit_number} ieire spre {destination}"},name_exit:{default:"Intrai n {rotary_name} i urmai {exit_number} ieire",name:"Intrai n {rotary_name} i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n  {rotary_name} i urmai {exit_number} ieire spre {destination}"}}},roundabout:{default:{exit:{default:"Intrai n sensul giratoriu i urmai {exit_number} ieire",name:"Intrai n sensul giratoriu i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n sensul giratoriu i urmai {exit_number} ieire spre {destination}"},default:{default:"Intrai n sensul giratoriu",name:"Intrai n sensul giratoriu i ieii pe {way_name}",destination:"Intrai n sensul giratoriu i ieii spre {destination}"}}},"roundabout turn":{default:{default:"La sensul giratoriu virai {modifier}",name:"La sensul giratoriu virai {modifier} pe {way_name}",destination:"La sensul giratoriu virai {modifier} spre {destination}"},left:{default:"La sensul giratoriu virai la stnga",name:"La sensul giratoriu virai la stnga pe {way_name}",destination:"La sensul giratoriu virai la stnga spre {destination}"},right:{default:"La sensul giratoriu virai la dreapta",name:"La sensul giratoriu virai la dreapta pe {way_name}",destination:"La sensul giratoriu virai la dreapta spre {destination}"},straight:{default:"La sensul giratoriu continuai nainte",name:"La sensul giratoriu continuai nainte pe {way_name}",destination:"La sensul giratoriu continuai nainte spre {destination}"}},"exit roundabout":{default:{default:"Ieii din sensul giratoriu",name:"Ieii din sensul giratoriu pe {way_name}",destination:"Ieii din sensul giratoriu spre {destination}"}},"exit rotary":{default:{default:"Ieii din sensul giratoriu",name:"Ieii din sensul giratoriu pe {way_name}",destination:"Ieii din sensul giratoriu spre {destination}"}},turn:{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}"},left:{default:"Virai la stnga",name:"Virai la stnga pe {way_name}",destination:"Virai la stnga spre {destination}"},right:{default:"Virai la dreapta",name:"Virai la dreapta pe {way_name}",destination:"Virai la dreapta spre {destination}"},straight:{default:"Mergei nainte",name:"Mergei nainte pe {way_name}",destination:"Mergei nainte spre {destination}"}},"use lane":{no_lanes:{default:"Mergei nainte"},default:{default:"{lane_instruction}"}}}}},{}],42:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"-",east:"",southeast:"-",south:"",southwest:"-",west:"",northwest:"-"},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:" "},lanes:{xo:" ",ox:" ",xox:" ",oxo:"   "}},modes:{ferry:{default:"  ",name:"   {way_name}",destination:"     {destination}"}},phrase:{"two linked by distance":"{instruction_one},   {distance} {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":" {exit}"},arrive:{default:{default:"   {nth}  ",upcoming:"   {nth}  ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name}"},left:{default:"   {nth}  ,   ",upcoming:"   {nth}  ,   ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},   "},right:{default:"   {nth}  ,   ",upcoming:"   {nth}  ,   ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},   "},"sharp left":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"sharp right":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"slight right":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"slight left":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},straight:{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "}},continue:{default:{default:" {modifier}",name:" {modifier}  {way_name:dative}",destination:" {modifier}   {destination}",exit:" {modifier}  {way_name:accusative}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}",distance:"  {distance}",namedistance:"  {distance}  {way_name:dative}"},"sharp left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"sharp right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},uturn:{default:"",name:"     {way_name:dative}",destination:"   {destination}"}},depart:{default:{default:"  {direction} ",name:"  {direction}   {way_name:dative}",namedistance:" {distance}  {direction}   {way_name:dative}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},uturn:{default:"   ",name:"   {way_name:genitive}",destination:"      {destination}"}},fork:{default:{default:"   {modifier}",name:"   {modifier}  {way_name:accusative}",destination:"   {modifier}   {destination}"},"slight left":{default:"   ",name:"     {way_name:accusative}",destination:"         {destination}"},"slight right":{default:"   ",name:"     {way_name:accusative}",destination:"         {destination}"},"sharp left":{default:"    ",name:"    {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"    ",name:"    {way_name:accusative}",destination:"        {destination}"},uturn:{default:"  ",name:"    {way_name:prepositional}",destination:"        {destination}"}},merge:{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},"slight left":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"slight right":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"sharp left":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"sharp right":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"   {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},"sharp left":{default:"  ",name:"    {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"  ",name:"    {way_name:accusative}",destination:"        {destination}"},"slight left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"      {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name:dative}",destination:" {modifier}   {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"      {destination}"}},"off ramp":{default:{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}",exit:"   {exit}",exit_destination:"   {exit}   {destination}"},left:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit} ",exit_destination:"   {exit}    {destination}"},right:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit} ",exit_destination:"   {exit}    {destination}"},"sharp left":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"},"sharp right":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"},"slight left":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit}",exit_destination:"    {exit}   {destination}"},"slight right":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"}},"on ramp":{default:{default:"  ",name:"    {way_name:accusative}",destination:"       {destination}"},left:{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},right:{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"sharp left":{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"slight left":{default:"     ",name:"   {way_name:accusative}",destination:"      {destination}"},"slight right":{default:"     ",name:"   {way_name:accusative}",destination:"      {destination}"}},rotary:{default:{default:{default:"    ",name:"     {way_name:accusative}",destination:"      {destination}"},name:{default:"   {rotary_name:dative}",name:" {rotary_name:prepositional}   {way_name:accusative}",destination:" {rotary_name:prepositional}    {destination}"},exit:{default:"     {exit_number} ",name:"     {exit_number}   {way_name:accusative}",destination:"     {exit_number}    {destination}"},name_exit:{default:" {rotary_name:prepositional}   {exit_number} ",name:" {rotary_name:prepositional}   {exit_number}   {way_name:accusative}",destination:" {rotary_name:prepositional}   {exit_number}    {destination}"}}},roundabout:{default:{exit:{default:"     {exit_number} ",name:"     {exit_number}   {way_name:accusative}",destination:"     {exit_number}    {destination}"},default:{default:"    ",name:"     {way_name:accusative}",destination:"      {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},right:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"}},"exit roundabout":{default:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}"}},"exit rotary":{default:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}    {destination}"},left:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},right:{default:" ",name:"   {way_name:accusative}",destination:"     {destination}"},straight:{default:" ",name:"  {way_name:dative}",destination:"   {destination}"}},"use lane":{no_lanes:{default:"  "},default:{default:"{lane_instruction}"}}}}},{}],43:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1:a",2:"2:a",3:"3:e",4:"4:e",5:"5:e",6:"6:e",7:"7:e",8:"8:e",9:"9:e",10:"10:e"},direction:{north:"norr",northeast:"nordost",east:"ster",southeast:"sydost",south:"sder",southwest:"sydvst",west:"vster",northwest:"nordvst"},modifier:{left:"vnster",right:"hger","sharp left":"vnster","sharp right":"hger","slight left":"vnster","slight right":"hger",straight:"rakt fram",uturn:"U-svng"},lanes:{xo:"Hll till hger",ox:"Hll till vnster",xox:"Hll till mitten",oxo:"Hll till vnster eller hger"}},modes:{ferry:{default:"Ta frjan",name:"Ta frjan p {way_name}",destination:"Ta frjan mot {destination}"}},phrase:{"two linked by distance":"{instruction_one}, sedan efter {distance}, {instruction_two}","two linked":"{instruction_one}, sedan {instruction_two}","one in distance":"Om {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Du r framme vid din {nth} destination",upcoming:"Du r snart framme vid din {nth} destination",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}"},left:{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},right:{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"sharp left":{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},"sharp right":{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"slight right":{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"slight left":{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},straight:{default:"Du r framme vid din {nth} destination, rakt fram",upcoming:"Du r snart framme vid din {nth} destination, rakt fram",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, rakt fram"}},continue:{default:{default:"Svng {modifier}",name:"Svng {modifier} och fortstt p {way_name}",destination:"Svng {modifier} mot {destination}",exit:"Svng {modifier} in p {way_name}"},straight:{default:"Fortstt rakt fram",name:"Kr rakt fram och fortstt p {way_name}",destination:"Fortstt mot {destination}",distance:"Fortstt rakt fram i {distance}",namedistance:"Fortstt p {way_name} i {distance}"},"sharp left":{default:"Svng vnster",name:"Svng vnster och fortstt p {way_name}",destination:"Svng vnster mot {destination}"},"sharp right":{default:"Svng hger",name:"Svng hger och fortstt p {way_name}",destination:"Svng hger mot {destination}"},"slight left":{default:"Svng vnster",name:"Svng vnster och fortstt p {way_name}",destination:"Svng vnster mot {destination}"},"slight right":{default:"Svng hger",name:"Svng hger och fortstt p {way_name}",destination:"Svng hger mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng och fortstt p {way_name}",destination:"Gr en U-svng mot {destination}"}},depart:{default:{default:"Kr t {direction}",name:"Kr t {direction} p {way_name}",namedistance:"Kr {distance} t {direction} p {way_name}"}},"end of road":{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt rakt fram in p {way_name}",destination:"Fortstt rakt fram mot {destination}"},uturn:{default:"Gr en U-svng i slutet av vgen",name:"Gr en U-svng in p {way_name} i slutet av vgen",destination:"Gr en U-svng mot {destination} i slutet av vgen"}},fork:{default:{default:"Hll till {modifier} dr vgen delar sig",name:"Hll till {modifier} in p {way_name}",destination:"Hll till {modifier} mot {destination}"},"slight left":{default:"Hll till vnster dr vgen delar sig",name:"Hll till vnster in p {way_name}",destination:"Hll till vnster mot {destination}"},"slight right":{default:"Hll till hger dr vgen delar sig",name:"Hll till hger in p {way_name}",destination:"Hll till hger mot {destination}"},"sharp left":{default:"Svng vnster dr vgen delar sig",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},"sharp right":{default:"Svng hger dr vgen delar sig",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},merge:{default:{default:"Byt till {modifier} krflt",name:"Byt till {modifier} krflt, in p {way_name}",destination:"Byt till {modifier} krflt, mot {destination}"},straight:{default:"Fortstt",name:"Kr in p {way_name}",destination:"Kr mot {destination}"},"slight left":{default:"Byt till vnstra krfltet",name:"Byt till vnstra krfltet, in p {way_name}",destination:"Byt till vnstra krfltet, mot {destination}"},"slight right":{default:"Byt till hgra krfltet",name:"Byt till hgra krfltet, in p {way_name}",destination:"Byt till hgra krfltet, mot {destination}"},"sharp left":{default:"Byt till vnstra krfltet",name:"Byt till vnstra krfltet, in p {way_name}",destination:"Byt till vnstra krfltet, mot {destination}"},"sharp right":{default:"Byt till hgra krfltet",name:"Byt till hgra krfltet, in p {way_name}",destination:"Byt till hgra krfltet, mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},"new name":{default:{default:"Fortstt {modifier}",name:"Fortstt {modifier} p {way_name}",destination:"Fortstt {modifier} mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt in p {way_name}",destination:"Fortstt mot {destination}"},"sharp left":{default:"Gr en skarp vnstersvng",name:"Gr en skarp vnstersvng in p {way_name}",destination:"Gr en skarp vnstersvng mot {destination}"},"sharp right":{default:"Gr en skarp hgersvng",name:"Gr en skarp hgersvng in p {way_name}",destination:"Gr en skarp hgersvng mot {destination}"},"slight left":{default:"Fortstt med ltt vnstersvng",name:"Fortstt med ltt vnstersvng in p {way_name}",destination:"Fortstt med ltt vnstersvng mot {destination}"},"slight right":{default:"Fortstt med ltt hgersvng",name:"Fortstt med ltt hgersvng in p {way_name}",destination:"Fortstt med ltt hgersvng mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},notification:{default:{default:"Fortstt {modifier}",name:"Fortstt {modifier} p {way_name}",destination:"Fortstt {modifier} mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},"off ramp":{default:{default:"Ta avfarten",name:"Ta avfarten in p {way_name}",destination:"Ta avfarten mot {destination}",exit:"Ta avfart {exit} ",exit_destination:"Ta avfart {exit} mot {destination}"},left:{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart {exit} till vnster mot {destination}"},right:{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"},"sharp left":{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart {exit} till vnster mot {destination}"},"sharp right":{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"},"slight left":{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart{exit} till vnster mot {destination}"},"slight right":{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"}},"on ramp":{default:{default:"Ta pfarten",name:"Ta pfarten in p {way_name}",destination:"Ta pfarten mot {destination}"},left:{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},right:{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"},"sharp left":{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},"sharp right":{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"},"slight left":{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},"slight right":{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"}},rotary:{default:{default:{default:"Kr in i rondellen",name:"I rondellen, ta avfarten in p {way_name}",destination:"I rondellen, ta av mot {destination}"},name:{default:"Kr in i {rotary_name}",name:"I {rotary_name}, ta av in p {way_name}",destination:"I {rotary_name}, ta av mot {destination}"},exit:{default:"I rondellen, ta {exit_number} avfarten",name:"I rondellen, ta {exit_number} avfarten in p {way_name}",destination:"I rondellen, ta {exit_number} avfarten mot {destination}"},name_exit:{default:"I {rotary_name}, ta {exit_number} avfarten",name:"I {rotary_name}, ta {exit_number}  avfarten in p {way_name}",destination:"I {rotary_name}, ta {exit_number} avfarten mot {destination}"}}},roundabout:{default:{exit:{default:"I rondellen, ta {exit_number} avfarten",name:"I rondellen, ta {exit_number} avfarten in p {way_name}",destination:"I rondellen, ta {exit_number} avfarten mot {destination}"},default:{default:"Kr in i rondellen",name:"I rondellen, ta avfarten in p {way_name}",destination:"I rondellen, ta av mot {destination}"}}},"roundabout turn":{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},left:{default:"Svng vnster",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},right:{default:"Svng hger",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt rakt fram in p {way_name}",destination:"Fortstt rakt fram mot {destination}"}},"exit roundabout":{default:{default:"Kr ut ur rondellen",name:"Kr ut ur rondellen in p {way_name}",destination:"Kr ut ur rondellen mot {destination}"}},"exit rotary":{default:{default:"Kr ut ur rondellen",name:"Kr ut ur rondellen in p {way_name}",destination:"Kr ut ur rondellen mot {destination}"}},turn:{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},left:{default:"Svng vnster",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},right:{default:"Svng hger",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},straight:{default:"Kr rakt fram",name:"Kr rakt fram in p {way_name}",destination:"Kr rakt fram mot {destination}"}},"use lane":{no_lanes:{default:"Fortstt rakt fram"},default:{default:"{lane_instruction}"}}}}},{}],44:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"birinci",2:"ikinci",3:"nc",4:"drdnc",5:"beinci",6:"altnc",7:"yedinci",8:"sekizinci",9:"dokuzuncu",10:"onuncu"},direction:{north:"kuzey",northeast:"kuzeydou",east:"dou",southeast:"gneydou",south:"gney",southwest:"gneybat",west:"bat",northwest:"kuzeybat"},modifier:{left:"sol",right:"sa","sharp left":"keskin sol","sharp right":"keskin sa","slight left":"hafif sol","slight right":"hafif sa",straight:"dz",uturn:"U dn"},lanes:{xo:"Sada kaln",ox:"Solda kaln",xox:"Ortada kaln",oxo:"Solda veya sada kaln"}},modes:{ferry:{default:"Vapur kullan",name:"{way_name} vapurunu kullan",destination:"{destination} istikametine giden vapuru kullan"}},phrase:{"two linked by distance":"{instruction_one} ve {distance} sonra {instruction_two}","two linked":"{instruction_one} ve sonra {instruction_two}","one in distance":"{distance} sonra, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"{nth} hedefinize ulatnz",upcoming:"{nth} hedefinize ulatnz",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz"},left:{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},right:{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"sharp left":{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},"sharp right":{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"slight right":{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"slight left":{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},straight:{default:"{nth} hedefinize ulatnz, hedefiniz karnzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz karnzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz karnzdadr"}},continue:{default:{default:"{modifier} yne dn",name:"{way_name} zerinde kalmak iin {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn",exit:"{way_name} zerinde {modifier} yne dn"},straight:{default:"Dz devam edin",name:"{way_name} zerinde kalmak iin dz devam et",destination:"{destination} istikametinde devam et",distance:"{distance} boyunca dz devam et",namedistance:"{distance} boyunca {way_name} zerinde devam et"},"sharp left":{default:"Sola keskin dn yap",name:"{way_name} zerinde kalmak iin sola keskin dn yap",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"Saa keskin dn yap",name:"{way_name} zerinde kalmak iin saa keskin dn yap",destination:"{destination} istikametinde saa keskin dn yap"},"slight left":{default:"Sola hafif dn yap",name:"{way_name} zerinde kalmak iin sola hafif dn yap",destination:"{destination} istikametinde sola hafif dn yap"},"slight right":{default:"Saa hafif dn yap",name:"{way_name} zerinde kalmak iin saa hafif dn yap",destination:"{destination} istikametinde saa hafif dn yap"},uturn:{default:"U dn yapn",name:"Bir U-dn yap ve {way_name} devam et",destination:"{destination} istikametinde bir U-dn yap"}},depart:{default:{default:"{direction} tarafna ynelin",name:"{way_name} zerinde {direction} yne git",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"{modifier} tarafa dnn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},straight:{default:"Dz devam edin",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"},uturn:{default:"Yolun sonunda U dn yapn",name:"Yolun sonunda {way_name} zerinde bir U-dn yap",destination:"Yolun sonunda {destination} istikametinde bir U-dn yap"}},fork:{default:{default:"Yol ayrmnda {modifier} ynde kal",name:"{way_name} zerindeki yol ayrmnda {modifier} ynde kal",destination:"{destination} istikametindeki yol ayrmnda {modifier} ynde kal"},"slight left":{default:"ataln solundan devam edin",name:"ataln solundan {way_name} yoluna doru ",destination:"{destination} istikametindeki yol ayrmnda solda kal"},"slight right":{default:"ataln sandan devam edin",name:"{way_name} zerindeki yol ayrmnda sada kal",destination:"{destination} istikametindeki yol ayrmnda sada kal"},"sharp left":{default:"atalda keskin sola dnn",name:"{way_name} yoluna doru sola keskin dn yapn",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"atalda keskin saa dnn",name:"{way_name} yoluna doru saa keskin dn yapn",destination:"{destination} istikametinde saa keskin dn yap"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},merge:{default:{default:"{modifier} yne gir",name:"{way_name} zerinde {modifier} yne gir",destination:"{destination} istikametinde {modifier} yne gir"},straight:{default:"dz yne gir",name:"{way_name} zerinde dz yne gir",destination:"{destination} istikametinde dz yne gir"},"slight left":{default:"Sola gir",name:"{way_name} zerinde sola gir",destination:"{destination} istikametinde sola gir"},"slight right":{default:"Saa gir",name:"{way_name} zerinde saa gir",destination:"{destination} istikametinde saa gir"},"sharp left":{default:"Sola gir",name:"{way_name} zerinde sola gir",destination:"{destination} istikametinde sola gir"},"sharp right":{default:"Saa gir",name:"{way_name} zerinde saa gir",destination:"{destination} istikametinde saa gir"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},"new name":{default:{default:"{modifier} ynde devam et",name:"{way_name} zerinde {modifier} ynde devam et",destination:"{destination} istikametinde {modifier} ynde devam et"},straight:{default:"Dz devam et",name:"{way_name} zerinde devam et",destination:"{destination} istikametinde devam et"},"sharp left":{default:"Sola keskin dn yapn",name:"{way_name} yoluna doru sola keskin dn yapn",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"Saa keskin dn yapn",name:"{way_name} yoluna doru saa keskin dn yapn",destination:"{destination} istikametinde saa keskin dn yap"},"slight left":{default:"Hafif soldan devam edin",name:"{way_name} zerinde hafif solda devam et",destination:"{destination} istikametinde hafif solda devam et"},"slight right":{default:"Hafif sadan devam edin",name:"{way_name} zerinde hafif sada devam et",destination:"{destination} istikametinde hafif sada devam et"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},notification:{default:{default:"{modifier} ynde devam et",name:"{way_name} zerinde {modifier} ynde devam et",destination:"{destination} istikametinde {modifier} ynde devam et"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},"off ramp":{default:{default:"Balant yoluna ge",name:"{way_name} zerindeki balant yoluna ge",destination:"{destination} istikametine giden balant yoluna ge",exit:"{exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} k yoluna ge"},left:{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},right:{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"},"sharp left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},"sharp right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"},"slight left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},"slight right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"}},"on ramp":{default:{default:"Balant yoluna ge",name:"{way_name} zerindeki balant yoluna ge",destination:"{destination} istikametine giden balant yoluna ge"},left:{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},right:{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"},"sharp left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},"sharp right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"},"slight left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},"slight right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"}},rotary:{default:{default:{default:"Dnel kavaa gir",name:"Dnel kavaa gir ve {way_name} zerinde k",destination:"Dnel kavaa gir ve {destination} istikametinde k"},name:{default:"{rotary_name} dnel kavaa gir",name:"{rotary_name} dnel kavaa gir ve {way_name} zerinde k",destination:"{rotary_name} dnel kavaa gir ve {destination} istikametinde k"},exit:{default:"Dnel kavaa gir ve {exit_number} numaral ka gir",name:"Dnel kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"Dnel kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"},name_exit:{default:"{rotary_name} dnel kavaa gir ve {exit_number} numaral ka gir",name:"{rotary_name} dnel kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"{rotary_name} dnel kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"}}},roundabout:{default:{exit:{default:"Gbekli kavaa gir ve {exit_number} numaral ka gir",name:"Gbekli kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"Gbekli kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"},default:{default:"Gbekli kavaa gir",name:"Gbekli kavaa gir ve {way_name} zerinde k",destination:"Gbekli kavaa gir ve {destination} istikametinde k"}}},"roundabout turn":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},"exit roundabout":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},"exit rotary":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},turn:{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dnn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dnn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz git",name:"{way_name} zerinde dz git",destination:"{destination} istikametinde dz git"}},"use lane":{no_lanes:{default:"Dz devam edin"},default:{default:"{lane_instruction}"}}}}},{}],45:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"",northeast:" ",east:"",southeast:" ",south:"",southwest:" ",west:"",northwest:" "},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:""},lanes:{xo:" ",ox:" ",xox:"  ",oxo:"   "}},modes:{ferry:{default:" ",name:"  {way_name}",destination:"    {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ,  {distance}, {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"' {exit}"},arrive:{default:{default:"    {nth}  ",upcoming:"    {nth}  ",short:" ","short-upcoming":" ",named:"   {waypoint_name}"},left:{default:"    {nth}  ,  ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},right:{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"sharp left":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"sharp right":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"slight right":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"slight left":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},straight:{default:"    {nth}  ,     ",upcoming:"    {nth}  ,   ",short:" ","short-upcoming":" ",named:"   {waypoint_name}   "}},continue:{default:{default:" {modifier}",name:"{modifier}   {way_name}",destination:" {modifier}   {destination}",exit:" {modifier}  {way_name}"},straight:{default:"  ",name:"     {way_name}",destination:"   {destination}",distance:"   {distance}",namedistance:"   {way_name} {distance}"},"sharp left":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"sharp right":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"slight left":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"slight right":{default:"  ",name:"      {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"     {way_name}",destination:"    {destination}"}},depart:{default:{default:"  {direction}",name:"  {direction}  {way_name}",namedistance:"  {direction}  {way_name} {distance}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},straight:{default:"  ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:"    ",name:"   {way_name}   ",destination:"    {destination}   "}},fork:{default:{default:"   {modifier}",name:" {modifier}    {way_name}",destination:" {modifier}   {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"    {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"    {destination}"},"sharp left":{default:"    ",name:"    {way_name}",destination:"     {destination}"},"sharp right":{default:"    ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},merge:{default:{default:"   {modifier}",name:"   {modifier}  {way_name}",destination:"   {modifier}   {destination}"},straight:{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"  {way_name}",destination:"   {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"off ramp":{default:{default:"  ",name:"    {way_name}",destination:"     {destination}",exit:" ' {exit}",exit_destination:" ' {exit}   {destination}"},left:{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},right:{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"}},"on ramp":{default:{default:"  ",name:"    {way_name}",destination:"     {destination}"},left:{default:"   ",name:"     {way_name}",destination:"      {destination}"},right:{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}"}},rotary:{default:{default:{default:"  ",name:"    {way_name}",destination:"     {destination}"},name:{default:"  {rotary_name}",name:"  {rotary_name}    {way_name}",destination:"  {rotary_name}     {destination}"},exit:{default:"      {exit_number} '",name:"      {exit_number} '  {way_name}",destination:"      {exit_number} '   {destination}"},name_exit:{default:"  {rotary_name}    {exit_number} '",name:"  {rotary_name}    {exit_number} '  {way_name}",destination:"  {rotary_name}    {exit_number} '   {destination}"}}},roundabout:{default:{exit:{default:"      {exit_number} '",name:"      {exit_number} '  {way_name}",destination:"      {exit_number} '   {destination}"},default:{default:"  ",name:"    {way_name}",destination:"     {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name}",destination:"    {destination}"},right:{default:" ",name:"   {way_name}",destination:"    {destination}"},straight:{default:" ",name:"    {way_name}",destination:"     {destination}"}},"exit roundabout":{default:{default:" ",name:"   {way_name} ",destination:"    {destination}"}},"exit rotary":{default:{default:" ",name:"   {way_name} ",destination:"    {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name}",destination:"    {destination}"},right:{default:" ",name:"   {way_name}",destination:"    {destination}"},straight:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"use lane":{no_lanes:{default:"  "},default:{default:"{lane_instruction}"}}}}},{}],46:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"u tin",2:"th 2",3:"th 3",4:"th 4",5:"th 5",6:"th 6",7:"th 7",8:"th 8",9:"th 9",10:"th 10"},direction:{north:"bc",northeast:"ng bc",east:"ng",southeast:"ng nam",south:"nam",southwest:"ty nam",west:"ty",northwest:"ty bc"},modifier:{left:"tri",right:"phi","sharp left":"tri gt","sharp right":"phi gt","slight left":"tri nghing","slight right":"phi nghing",straight:"thng",uturn:"ngc"},lanes:{xo:"i bn phi",ox:"i bn tri",xox:"i vo gia",oxo:"i bn tri hay bn phi"}},modes:{ferry:{default:"Ln ph",name:"Ln ph {way_name}",destination:"Ln ph i {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ri {distance} na th {instruction_two}","two linked":"{instruction_one}, ri {instruction_two}","one in distance":"{distance} na th {instruction_one}","name and ref":"{name} ({ref})","exit with number":"li ra {exit}"},arrive:{default:{default:"n ni {nth}",upcoming:"n ni {nth}",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}"},left:{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},right:{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"sharp left":{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},"sharp right":{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"slight right":{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"slight left":{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},straight:{default:"n ni {nth}  trc mt",upcoming:"n ni {nth}  trc mt",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  trc mt"}},continue:{default:{default:"Quo {modifier}",name:"Quo {modifier}  chy tip trn {way_name}",destination:"Quo {modifier} v {destination}",exit:"Quo {modifier} vo {way_name}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}",distance:"Chy thng cho {distance}",namedistance:"Chy tip trn {way_name} cho {distance}"},"sharp left":{default:"Quo gt bn tri",name:"Quo gt bn tri  chy tip trn {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi",name:"Quo gt bn phi  chy tip trn {way_name}",destination:"Quo gt bn phi v {destination}"},"slight left":{default:"Nghing v bn tri",name:"Nghing v bn tri  chy tip trn {way_name}",destination:"Nghing v bn tri v {destination}"},"slight right":{default:"Nghing v bn phi",name:"Nghing v bn phi  chy tip trn {way_name}",destination:"Nghing v bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li trn {way_name}",destination:"Quo ngc v {destination}"}},depart:{default:{default:"i v hng {direction}",name:"i v hng {direction} trn {way_name}",namedistance:"i v hng {direction} trn {way_name} cho {distance}"}},"end of road":{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"},uturn:{default:"Quo ngc li ti cui ng",name:"Quo ngc vo {way_name} ti cui ng",destination:"Quo ngc v {destination} ti cui ng"}},fork:{default:{default:"i bn {modifier}  ng ba",name:"Gi bn {modifier} vo {way_name}",destination:"Gi bn {modifier} v {destination}"},"slight left":{default:"Nghing v bn tri  ng ba",name:"Gi bn tri vo {way_name}",destination:"Gi bn tri v {destination}"},"slight right":{default:"Nghing v bn phi  ng ba",name:"Gi bn phi vo {way_name}",destination:"Gi bn phi v {destination}"},"sharp left":{default:"Quo gt bn tri  ng ba",name:"Quo gt bn tri vo {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi  ng ba",name:"Quo gt bn phi vo {way_name}",destination:"Quo gt bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},merge:{default:{default:"Nhp sang {modifier}",name:"Nhp sang {modifier} vo {way_name}",destination:"Nhp sang {modifier} v {destination}"},straight:{default:"Nhp ng",name:"Nhp vo {way_name}",destination:"Nhp ng v {destination}"},"slight left":{default:"Nhp sang tri",name:"Nhp sang tri vo {way_name}",destination:"Nhp sang tri v {destination}"},"slight right":{default:"Nhp sang phi",name:"Nhp sang phi vo {way_name}",destination:"Nhp sang phi v {destination}"},"sharp left":{default:"Nhp sang tri",name:"Nhp sang tri vo {way_name}",destination:"Nhp sang tri v {destination}"},"sharp right":{default:"Nhp sang phi",name:"Nhp sang phi vo {way_name}",destination:"Nhp sang phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},"new name":{default:{default:"Chy tip bn {modifier}",name:"Chy tip bn {modifier} trn {way_name}",destination:"Chy tip bn {modifier} v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"},"sharp left":{default:"Quo gt bn tri",name:"Quo gt bn tri vo {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi",name:"Quo gt bn phi vo {way_name}",destination:"Quo gt bn phi v {destination}"},"slight left":{default:"Nghing v bn tri",name:"Nghing v bn tri vo {way_name}",destination:"Nghing v bn tri v {destination}"},"slight right":{default:"Nghing v bn phi",name:"Nghing v bn phi vo {way_name}",destination:"Nghing v bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},notification:{default:{default:"Chy tip bn {modifier}",name:"Chy tip bn {modifier} trn {way_name}",destination:"Chy tip bn {modifier} v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},"off ramp":{default:{default:"i ng nhnh",name:"i ng nhnh {way_name}",destination:"i ng nhnh v {destination}",exit:"i theo li ra {exit}",exit_destination:"i theo li ra {exit} v {destination}"},left:{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},right:{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"},"sharp left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},"sharp right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"},"slight left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},"slight right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"}},"on ramp":{default:{default:"i ng nhnh",name:"i ng nhnh {way_name}",destination:"i ng nhnh v {destination}"},left:{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},right:{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"},"sharp left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},"sharp right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"},"slight left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},"slight right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"}},rotary:{default:{default:{default:"i vo bng binh",name:"i vo bng binh v ra ti {way_name}",destination:"i vo bng binh v ra v {destination}"},name:{default:"i vo {rotary_name}",name:"i vo {rotary_name} v ra ti {way_name}",destination:"i v {rotary_name} v ra v {destination}"},exit:{default:"i vo bng binh v ra ti ng {exit_number}",name:"i vo bng binh v ra ti ng {exit_number} tc {way_name}",destination:"i vo bng binh v ra ti ng {exit_number} v {destination}"},name_exit:{default:"i vo {rotary_name} v ra ti ng {exit_number}",name:"i vo {rotary_name} v ra ti ng {exit_number} tc {way_name}",destination:"i vo {rotary_name} v ra ti ng {exit_number} v {destination}"}}},roundabout:{default:{exit:{default:"i vo bng binh v ra ti ng {exit_number}",name:"i vo bng binh v ra ti ng {exit_number} tc {way_name}",destination:"i vo bng binh v ra ti ng {exit_number} v {destination}"},default:{default:"i vo bng binh",name:"i vo bng binh v ra ti {way_name}",destination:"i vo bng binh v ra v {destination}"}}},"roundabout turn":{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},left:{default:"Quo tri",name:"Quo tri vo {way_name}",destination:"Quo tri v {destination}"},right:{default:"Quo phi",name:"Quo phi vo {way_name}",destination:"Quo phi v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"}},"exit roundabout":{default:{default:"Ra bng binh",name:"Ra bng binh vo {way_name}",destination:"Ra bng binh v {destination}"}},"exit rotary":{default:{default:"Ra bng binh",name:"Ra bng binh vo {way_name}",destination:"Ra bng binh v {destination}"}},turn:{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},left:{default:"Quo tri",name:"Quo tri vo {way_name}",destination:"Quo tri v {destination}"},right:{default:"Quo phi",name:"Quo phi vo {way_name}",destination:"Quo phi v {destination}"},straight:{default:"Chy thng",name:"Chy thng vo {way_name}",destination:"Chy thng v {destination}"}},"use lane":{no_lanes:{default:"Chy thng"},default:{default:"{lane_instruction}"}}}}},{}],47:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:""},lanes:{xo:"",ox:"",xox:"",oxo:""}},modes:{ferry:{default:"",name:"{way_name}",destination:"{destination}"}},phrase:{"two linked by distance":"{instruction_one}{distance}{instruction_two}","two linked":"{instruction_one}{instruction_two}","one in distance":"{distance}{instruction_one}","name and ref":"{name}{ref}","exit with number":"{exit}"},arrive:{default:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},left:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},right:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"sharp left":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"sharp right":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"slight right":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"slight left":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},straight:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"}},continue:{default:{default:"{modifier}",name:"{way_name}{modifier}",destination:"{modifier}{destination}",exit:"{modifier}{way_name}"},straight:{default:"",name:"{way_name}",destination:"{destination}",distance:"{distance}",namedistance:"{way_name}{distance}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},depart:{default:{default:"{direction}",name:"{direction}{way_name}",namedistance:"{direction}{way_name}{distance}"}},"end of road":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},fork:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},merge:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},"new name":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},notification:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},"off ramp":{default:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"}},"on ramp":{default:{default:"",name:"{way_name}",destination:"{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"}},rotary:{default:{default:{default:"",name:"{way_name}",destination:"{destination}"},name:{default:"{rotary_name}",name:"{rotary_name}{way_name}",destination:"{rotary_name}{destination}"},exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},name_exit:{default:"{rotary_name}{exit_number}",name:"{rotary_name}{exit_number}{way_name}",destination:"{rotary_name}{exit_number}{destination}"}}},roundabout:{default:{exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},default:{default:"",name:"{way_name}",destination:"{destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"exit roundabout":{default:{default:"",name:"{way_name}",destination:"{destination}"}},"exit rotary":{default:{default:"",name:"{way_name}",destination:"{destination}"}},turn:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"use lane":{no_lanes:{default:""},default:{default:"{lane_instruction}"}}}}},{}],48:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(f,h,s,w){u.setOptions(this,w),this._elem=f,this._resultFn=w.resultFn?u.Util.bind(w.resultFn,w.resultContext):null,this._autocomplete=w.autocompleteFn?u.Util.bind(w.autocompleteFn,w.autocompleteContext):null,this._selectFn=u.Util.bind(h,s),this._container=u.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=u.DomUtil.create("table","",this._container),u.DomEvent.addListener(this._elem,"input",this._keyPressed,this),u.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),u.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),u.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){u.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var f=this._elem.getBoundingClientRect();if(!this._container.parentElement){var h=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,s=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._container.style.left=f.left+h+"px",this._container.style.top=f.bottom+s+"px",this._container.style.width=f.right-f.left+"px",document.body.appendChild(this._container)}u.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(f){var h,s,w,T;for(delete this._selection,this._results=f;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(h=0;h<f.length;h++)s=u.DomUtil.create("tr","",this._resultTable),s.setAttribute("data-result-index",h),w=u.DomUtil.create("td","",s),T=document.createTextNode(f[h].name),w.appendChild(T),u.DomEvent.addListener(w,"mousedown",u.DomEvent.preventDefault),u.DomEvent.addListener(w,"click",this._createClickListener(f[h]));h||(s=u.DomUtil.create("tr","",this._resultTable),w=u.DomUtil.create("td","leaflet-routing-geocoder-no-results",s),w.innerHTML=this.options.noResultsMessage),this._open(),f.length>0&&this._select(1)},_createClickListener:function(f){var h=this._resultSelected(f);return u.bind(function(){this._elem.blur(),h()},this)},_resultSelected:function(f){return u.bind(function(){this.close(),this._elem.value=f.name,this._lastCompletedText=f.name,this._selectFn(f)},this)},_keyPressed:function(f){var h;if(this._isOpen&&f.keyCode===13&&this._selection){h=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[h])(),u.DomEvent.preventDefault(f);return}if(f.keyCode===13){u.DomEvent.preventDefault(f),this._complete(this._resultFn,!0);return}if(this._autocomplete&&document.activeElement===this._elem){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(u.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout);return}this._unselect()},_select:function(f){var h=this._selection;h&&(u.DomUtil.removeClass(h.firstChild,"leaflet-routing-geocoder-selected"),h=h[f>0?"nextSibling":"previousSibling"]),h||(h=this._resultTable[f>0?"firstChild":"lastChild"]),h&&(u.DomUtil.addClass(h.firstChild,"leaflet-routing-geocoder-selected"),this._selection=h)},_unselect:function(){this._selection&&u.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(f){if(this._isOpen)switch(f.keyCode){case 27:this.close(),u.DomEvent.preventDefault(f);return;case 38:this._select(-1),u.DomEvent.preventDefault(f);return;case 40:this._select(1),u.DomEvent.preventDefault(f);return}},_complete:function(f,h){var s=this._elem.value;function w(T){this._lastCompletedText=s,h&&T.length===1?this._resultSelected(T[0])():this._setResults(T)}s&&(s!==this._lastCompletedText?f(s,w,this):h&&w.call(this,this._results))}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],49:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,f=r("./itinerary"),h=r("./line"),s=r("./plan"),w=r("./osrm-v1");i.exports=f.extend({options:{fitSelectedRoutes:"smart",routeLine:function(T,E){return new h(T,E)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",showAlternatives:!1,defaultErrorHandler:function(T){console.error("Routing error:",T.error)}},initialize:function(T){u.Util.setOptions(this,T),this._router=this.options.router||new w(T),this._plan=this.options.plan||new s(this.options.waypoints,T),this._requestCount=0,f.prototype.initialize.call(this,T),this.on("routeselected",this._routeSelected,this),this.options.defaultErrorHandler&&this.on("routingerror",this.options.defaultErrorHandler),this._plan.on("waypointschanged",this._onWaypointsChanged,this),T.routeWhileDragging&&this._setupRouteDragging()},_onZoomEnd:function(){if(!(!this._selectedRoute||!this._router.requiresMoreDetail)){var T=this._map;this._router.requiresMoreDetail(this._selectedRoute,T.getZoom(),T.getBounds())&&this.route({callback:u.bind(function(E,z){var O;if(!E){for(O=0;O<z.length;O++)this._routes[O].properties=z[O].properties;this._updateLineCallback(E,z)}},this),simplifyGeometry:!1,geometryOnly:!0})}},onAdd:function(T){this.options.autoRoute&&this.route();var E=f.prototype.onAdd.call(this,T);return this._map=T,this._map.addLayer(this._plan),this._map.on("zoomend",this._onZoomEnd,this),this._plan.options.geocoder&&E.insertBefore(this._plan.createGeocoders(),E.firstChild),E},onRemove:function(T){if(T.off("zoomend",this._onZoomEnd,this),this._line&&T.removeLayer(this._line),T.removeLayer(this._plan),this._alternatives&&this._alternatives.length>0)for(var E=0,z=this._alternatives.length;E<z;E++)T.removeLayer(this._alternatives[E]);return f.prototype.onRemove.call(this,T)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(T){return this._plan.setWaypoints(T),this},spliceWaypoints:function(){var T=this._plan.spliceWaypoints.apply(this._plan,arguments);return T},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(T){var E=this._selectedRoute=T.route,z=this.options.showAlternatives&&T.alternatives,O=this.options.fitSelectedRoutes,W=O==="smart"&&!this._waypointsVisible()||O!=="smart"&&O;this._updateLines({route:E,alternatives:z}),W&&this._map.fitBounds(this._line.getBounds()),this.options.waypointMode==="snap"&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(E.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var T=this.getWaypoints(),E,z,O,W,Q;try{for(E=this._map.getSize(),W=0;W<T.length;W++)Q=this._map.latLngToLayerPoint(T[W].latLng),z?z.extend(Q):z=u.bounds([Q]);return O=z.getSize(),(O.x>E.x/5||O.y>E.y/5)&&this._waypointsInViewport()}catch{return!1}},_waypointsInViewport:function(){var T=this.getWaypoints(),E,z;try{E=this._map.getBounds()}catch{return!1}for(z=0;z<T.length;z++)if(E.contains(T[z].latLng))return!0;return!1},_updateLines:function(T){var E=this.options.addWaypoints!==void 0?this.options.addWaypoints:!0;this._clearLines(),this._alternatives=[],T.alternatives&&T.alternatives.forEach(function(z,O){this._alternatives[O]=this.options.routeLine(z,u.extend({isAlternative:!0},this.options.altLineOptions||this.options.lineOptions)),this._alternatives[O].addTo(this._map),this._hookAltEvents(this._alternatives[O])},this),this._line=this.options.routeLine(T.route,u.extend({addWaypoints:E,extendToWaypoints:this.options.waypointMode==="connect"},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(T){T.on("linetouched",function(E){this._plan.dragNewWaypoint(E)},this)},_hookAltEvents:function(T){T.on("linetouched",function(E){var z=this._routes.slice(),O=z.splice(E.target._route.routesIndex,1)[0];this.fire("routeselected",{route:O,alternatives:z})},this)},_onWaypointsChanged:function(T){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLines(),this._clearAlts()),this.fire("waypointschanged",{waypoints:T.waypoints})},_setupRouteDragging:function(){var T=0,E;this._plan.on("waypointdrag",u.bind(function(z){E=z.waypoints,T||(T=setTimeout(u.bind(function(){this.route({waypoints:E,geometryOnly:!0,callback:u.bind(this._updateLineCallback,this)}),T=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){T&&(clearTimeout(T),T=void 0),this.route()},this)},_updateLineCallback:function(T,E){if(T)T.type!=="abort"&&this._clearLines();else{E=E.slice();var z=E.splice(this._selectedRoute.routesIndex,1)[0];this._updateLines({route:z,alternatives:this.options.showAlternatives?E:[]})}},route:function(T){var E=++this._requestCount,z;this._pendingRequest&&this._pendingRequest.abort&&(this._pendingRequest.abort(),this._pendingRequest=null),T=T||{},this._plan.isReady()&&(this.options.useZoomParameter&&(T.z=this._map&&this._map.getZoom()),z=T&&T.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:z}),this._pendingRequest=this._router.route(z,function(O,W){if(this._pendingRequest=null,T.callback)return T.callback.call(this,O,W);if(E===this._requestCount){if(this._clearLines(),this._clearAlts(),O&&O.type!=="abort"){this.fire("routingerror",{error:O});return}if(W.forEach(function(te,U){te.routesIndex=U}),!T.geometryOnly)this.fire("routesfound",{waypoints:z,routes:W}),this.setAlternatives(W);else{var Q=W.splice(0,1)[0];this._routeSelected({route:Q,alternatives:W})}}},this,T))},_clearLines:function(){if(this._line&&(this._map.removeLayer(this._line),delete this._line),this._alternatives&&this._alternatives.length){for(var T in this._alternatives)this._map.removeLayer(this._alternatives[T]);this._alternatives=[]}}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{"./itinerary":55,"./line":56,"./osrm-v1":59,"./plan":60}],50:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.Control.extend({options:{header:"Routing error",formatMessage:function(f){return f.status<0?"Calculating the route caused an error. Technical description follows: <code><pre>"+f.message+"</pre></code":"The route could not be calculated. "+f.message}},initialize:function(f,h){u.Control.prototype.initialize.call(this,h),f.on("routingerror",u.bind(function(s){this._element&&(this._element.children[1].innerHTML=this.options.formatMessage(s.error),this._element.style.visibility="visible")},this)).on("routingstart",u.bind(function(){this._element&&(this._element.style.visibility="hidden")},this))},onAdd:function(){var f;return this._element=u.DomUtil.create("div","leaflet-bar leaflet-routing-error"),this._element.style.visibility="hidden",f=u.DomUtil.create("h3",null,this._element),u.DomUtil.create("span",null,this._element),f.innerHTML=this.options.header,this._element},onRemove:function(){delete this._element}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],51:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,f=r("./localization");i.exports=u.Class.extend({options:{units:"metric",unitNames:null,language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(h){u.setOptions(this,h);var s=u.Util.isArray(this.options.language)?this.options.language:[this.options.language,"en"];this._localization=new f(s)},formatDistance:function(h,s){var w=this.options.unitNames||this._localization.localize("units"),T=s<=0,E=T?function(Q){return Q}:u.bind(this._round,this),z,O,W;return this.options.units==="imperial"?(O=h/.9144,O>=1e3?W={value:E(h/1609.344,s),unit:w.miles}:W={value:E(O,s),unit:w.yards}):(z=E(h,s),W={value:z>=1e3?z/1e3:z,unit:z>=1e3?w.kilometers:w.meters}),T&&(W.value=W.value.toFixed(-s)),u.Util.template(this.options.distanceTemplate,W)},_round:function(h,s){var w=s||this.options.roundingSensitivity,T=Math.pow(10,(Math.floor(h/w)+"").length-1),E=Math.floor(h/T),z=E>5?T:T/2;return Math.round(h/z)*z},formatTime:function(h){var s=this.options.unitNames||this._localization.localize("units");return h=Math.round(h/30)*30,h>86400?Math.round(h/3600)+" "+s.hours:h>3600?Math.floor(h/3600)+" "+s.hours+" "+Math.round(h%3600/60)+" "+s.minutes:h>300?Math.round(h/60)+" "+s.minutes:h>60?Math.floor(h/60)+" "+s.minutes+(h%60!==0?" "+h%60+" "+s.seconds:""):h+" "+s.seconds},formatInstruction:function(h,s){return h.text===void 0?this.capitalize(u.Util.template(this._getInstructionTemplate(h,s),u.extend({},h,{exitStr:h.exit?this._localization.localize("formatOrder")(h.exit):"",dir:this._localization.localize(["directions",h.direction]),modifier:this._localization.localize(["directions",h.modifier])}))):h.text},getIconName:function(h,s){switch(h.type){case"Head":if(s===0)return"depart";break;case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}switch(h.modifier){case"Straight":return"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":case"Uturn":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left"}},capitalize:function(h){return h.charAt(0).toUpperCase()+h.substring(1)},_getInstructionTemplate:function(h,s){var w=h.type==="Straight"?s===0?"Head":"Continue":h.type,T=this._localization.localize(["instructions",w]);return T||(T=[this._localization.localize(["directions",w])," "+this._localization.localize(["instructions","Onto"])]),T[0]+(T.length>1&&h.road?T[1]:"")}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{"./localization":57}],52:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,f=r("./autocomplete"),h=r("./localization");function s(w){w.setSelectionRange?w.setSelectionRange(0,9999):w.select()}i.exports=u.Class.extend({includes:typeof u.Evented<"u"&&u.Evented.prototype||u.Mixin.Events,options:{createGeocoder:function(w,T,E){var z=u.DomUtil.create("div","leaflet-routing-geocoder"),O=u.DomUtil.create("input","",z),W=E.addWaypoints?u.DomUtil.create("span","leaflet-routing-remove-waypoint",z):void 0;return O.disabled=!E.addWaypoints,{container:z,input:O,closeButton:W}},geocoderPlaceholder:function(w,T,E){var z=new h(E.options.language).localize("ui");return w===0?z.startPlaceholder:w<T-1?u.Util.template(z.viaPlaceholder,{viaNumber:w}):z.endPlaceholder},geocoderClass:function(){return""},waypointNameFallback:function(w){var T=w.lat<0?"S":"N",E=w.lng<0?"W":"E",z=(Math.round(Math.abs(w.lat)*1e4)/1e4).toString(),O=(Math.round(Math.abs(w.lng)*1e4)/1e4).toString();return T+z+", "+E+O},maxGeocoderTolerance:200,autocompleteOptions:{},language:"en"},initialize:function(w,T,E,z){u.setOptions(this,z);var O=this.options.createGeocoder(T,E,this.options),W=O.closeButton,Q=O.input;Q.setAttribute("placeholder",this.options.geocoderPlaceholder(T,E,this)),Q.className=this.options.geocoderClass(T,E),this._element=O,this._waypoint=w,this.update(),Q.value=w.name,u.DomEvent.addListener(Q,"click",function(){s(this)},Q),W&&u.DomEvent.addListener(W,"click",function(){this.fire("delete",{waypoint:this._waypoint})},this),new f(Q,function(te){Q.value=te.name,w.name=te.name,w.latLng=te.center,this.fire("geocoded",{waypoint:w,value:te})},this,u.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions))},getContainer:function(){return this._element.container},setValue:function(w){this._element.input.value=w},update:function(w){var T=this._waypoint,E;T.name=T.name||"",T.latLng&&(w||!T.name)&&(E=this.options.waypointNameFallback(T.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(T.latLng,67108864,function(z){z.length>0&&z[0].center.distanceTo(T.latLng)<this.options.maxGeocoderTolerance?T.name=z[0].name:T.name=E,this._update()},this):(T.name=E,this._update()))},focus:function(){var w=this._element.input;w.focus(),s(w)},_update:function(){var w=this._waypoint,T=w&&w.name?w.name:"";this.setValue(T),this.fire("reversegeocoded",{waypoint:w,value:T})}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{"./autocomplete":48,"./localization":57}],53:[function(r,i,l){(function(c){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,f=r("./control"),h=r("./itinerary"),s=r("./line"),w=r("./osrm-v1"),T=r("./plan"),E=r("./waypoint"),z=r("./autocomplete"),O=r("./formatter"),W=r("./geocoder-element"),Q=r("./localization"),te=r("./itinerary-builder"),U=r("./mapbox"),_e=r("./error-control");u.routing={control:function(pe){return new f(pe)},itinerary:function(pe){return h(pe)},line:function(pe,xe){return new s(pe,xe)},plan:function(pe,xe){return new T(pe,xe)},waypoint:function(pe,xe,Ae){return new E(pe,xe,Ae)},osrmv1:function(pe){return new w(pe)},localization:function(pe){return new Q(pe)},formatter:function(pe){return new O(pe)},geocoderElement:function(pe,xe,Ae,ze){return new u.Routing.GeocoderElement(pe,xe,Ae,ze)},itineraryBuilder:function(pe){return new te(pe)},mapbox:function(pe,xe){return new U(pe,xe)},errorControl:function(pe,xe){return new _e(pe,xe)},autocomplete:function(pe,xe,Ae,ze){return new z(pe,xe,Ae,ze)}},i.exports=u.Routing={Control:f,Itinerary:h,Line:s,OSRMv1:w,Plan:T,Waypoint:E,Autocomplete:z,Formatter:O,GeocoderElement:W,Localization:Q,Formatter:O,ItineraryBuilder:te,control:u.routing.control,itinerary:u.routing.itinerary,line:u.routing.line,plan:u.routing.plan,waypoint:u.routing.waypoint,osrmv1:u.routing.osrmv1,geocoderElement:u.routing.geocoderElement,mapbox:u.routing.mapbox,errorControl:u.routing.errorControl}}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{"./autocomplete":48,"./control":49,"./error-control":50,"./formatter":51,"./geocoder-element":52,"./itinerary":55,"./itinerary-builder":54,"./line":56,"./localization":57,"./mapbox":58,"./osrm-v1":59,"./plan":60,"./waypoint":61}],54:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.Class.extend({options:{containerClassName:""},initialize:function(f){u.setOptions(this,f)},createContainer:function(f){var h=u.DomUtil.create("table",(f||"")+" "+this.options.containerClassName),s=u.DomUtil.create("colgroup","",h);return u.DomUtil.create("col","leaflet-routing-instruction-icon",s),u.DomUtil.create("col","leaflet-routing-instruction-text",s),u.DomUtil.create("col","leaflet-routing-instruction-distance",s),h},createStepsContainer:function(){return u.DomUtil.create("tbody","")},createStep:function(f,h,s,w){var T=u.DomUtil.create("tr","",w),E,z;return z=u.DomUtil.create("td","",T),E=u.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+s,z),z.appendChild(E),z=u.DomUtil.create("td","",T),z.appendChild(document.createTextNode(f)),z=u.DomUtil.create("td","",T),z.appendChild(document.createTextNode(h)),T}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],55:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,f=r("./formatter"),h=r("./itinerary-builder");i.exports=u.Control.extend({includes:typeof u.Evented<"u"&&u.Evented.prototype||u.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",totalDistanceRoundingSensitivity:-1,show:!0,collapsible:void 0,collapseBtn:function(s){var w=u.DomUtil.create("span",s.options.collapseBtnClass);u.DomEvent.on(w,"click",s._toggle,s),s._container.insertBefore(w,s._container.firstChild)},collapseBtnClass:"leaflet-routing-collapse-btn"},initialize:function(s){u.setOptions(this,s),this._formatter=this.options.formatter||new f(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new h({containerClassName:this.options.itineraryClassName})},onAdd:function(s){var w=this.options.collapsible;return w=w||w===void 0&&s.getSize().x<=640,this._container=u.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide ")+(w?"leaflet-routing-collapsible ":"")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),u.DomEvent.disableClickPropagation(this._container),u.DomEvent.addListener(this._container,"mousewheel",function(T){u.DomEvent.stopPropagation(T)}),w&&this.options.collapseBtn(this),this._container},onRemove:function(){},createAlternativesContainer:function(){return u.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(s){var w,T,E;for(this._clearAlts(),this._routes=s,w=0;w<this._routes.length;w++)T=this._routes[w],E=this._createAlternative(T,w),this._altContainer.appendChild(E),this._altElements.push(E);return this._selectRoute({route:this._routes[0],alternatives:this._routes.slice(1)}),this},show:function(){u.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){u.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_toggle:function(){var s=u.DomUtil.hasClass(this._container,"leaflet-routing-container-hide");this[s?"show":"hide"]()},_createAlternative:function(s,w){var T=u.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(w>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),E=this.options.summaryTemplate,z=u.extend({name:s.name,distance:this._formatter.formatDistance(s.summary.totalDistance,this.options.totalDistanceRoundingSensitivity),time:this._formatter.formatTime(s.summary.totalTime)},s);return T.innerHTML=typeof E=="function"?E(z):u.Util.template(E,z),u.DomEvent.addListener(T,"click",this._onAltClicked,this),this.on("routeselected",this._selectAlt,this),T.appendChild(this._createItineraryContainer(s)),T},_clearAlts:function(){for(var s=this._altContainer;s&&s.firstChild;)s.removeChild(s.firstChild);this._altElements=[]},_createItineraryContainer:function(s){var w=this._itineraryBuilder.createContainer(),T=this._itineraryBuilder.createStepsContainer(),E,z,O,W,Q,te;for(w.appendChild(T),E=0;E<s.instructions.length;E++)z=s.instructions[E],Q=this._formatter.formatInstruction(z,E),W=this._formatter.formatDistance(z.distance),te=this._formatter.getIconName(z,E),O=this._itineraryBuilder.createStep(Q,W,te,T),z.index&&this._addRowListeners(O,s.coordinates[z.index]);return w},_addRowListeners:function(s,w){u.DomEvent.addListener(s,"mouseover",function(){this._marker=u.circleMarker(w,this.options.pointMarkerStyle).addTo(this._map)},this),u.DomEvent.addListener(s,"mouseout",function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)},this),u.DomEvent.addListener(s,"click",function(T){this._map.panTo(w),u.DomEvent.stopPropagation(T)},this)},_onAltClicked:function(s){for(var w=s.target||window.event.srcElement;!u.DomUtil.hasClass(w,"leaflet-routing-alt");)w=w.parentElement;var T=this._altElements.indexOf(w),E=this._routes.slice(),z=E.splice(T,1)[0];this.fire("routeselected",{route:z,alternatives:E})},_selectAlt:function(s){var w,T,E,z;if(w=this._altElements[s.route.routesIndex],u.DomUtil.hasClass(w,"leaflet-routing-alt-minimized"))for(T=0;T<this._altElements.length;T++)E=this._altElements[T],z=T===s.route.routesIndex?"removeClass":"addClass",u.DomUtil[z](E,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&u.DomUtil[z](E,this.options.minimizedClassName),T!==s.route.routesIndex&&(E.scrollTop=0);u.DomEvent.stop(s)},_selectRoute:function(s){this._marker&&(this._map.removeLayer(this._marker),delete this._marker),this.fire("routeselected",s)}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{"./formatter":51,"./itinerary-builder":54}],56:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.LayerGroup.extend({includes:typeof u.Evented<"u"&&u.Evented.prototype||u.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(f,h){u.setOptions(this,h),u.LayerGroup.prototype.initialize.call(this,h),this._route=f,this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(f.coordinates,this.options.styles,this.options.addWaypoints)},getBounds:function(){return u.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var f=this._route.inputWaypoints,h=[],s;for(s=0;s<f.length;s++)h.push(this._findClosestRoutePoint(f[s].latLng));return h},_findClosestRoutePoint:function(f){var h=Number.MAX_VALUE,s,w,T;for(w=this._route.coordinates.length-1;w>=0;w--)T=f.distanceTo(this._route.coordinates[w]),T<h&&(s=w,h=T);return s},_extendToWaypoints:function(){var f=this._route.inputWaypoints,h=this._getWaypointIndices(),s,w,T;for(s=0;s<f.length;s++)w=f[s].latLng,T=u.latLng(this._route.coordinates[h[s]]),w.distanceTo(T)>this.options.missingRouteTolerance&&this._addSegment([w,T],this.options.missingRouteStyles)},_addSegment:function(f,h,s){var w,T;for(w=0;w<h.length;w++)T=u.polyline(f,h[w]),this.addLayer(T),s&&T.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(f){for(var h=this._getWaypointIndices(),s=h.length-1;s>=0&&h[s]>f;)s--;return s},_onLineTouched:function(f){var h=this._findNearestWpBefore(this._findClosestRoutePoint(f.latlng));this.fire("linetouched",{afterIndex:h,latlng:f.latlng}),u.DomEvent.stop(f)},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],57:[function(r,i,l){(function(){var c={directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste",SlightRight:"leve giro a la derecha",Right:"derecha",SharpRight:"giro pronunciado a la derecha",SlightLeft:"leve giro a la izquierda",Left:"izquierda",SharpLeft:"giro pronunciado a la izquierda",Uturn:"media vuelta"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],TurnAround:["Dar vuelta"],WaypointReached:["Lleg a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"],Fork:["En el cruce gira a {modifier}"," hacia {road}"],Merge:["Incorprate {modifier}"," hacia {road}"],OnRamp:["Gira {modifier} en la salida"," hacia {road}"],OffRamp:["Toma la salida {modifier}"," hacia {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," hacia {road}"],Onto:"hacia {road}"},formatOrder:function(f){return f+""},ui:{startPlaceholder:"Inicio",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Destino"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}};L.Routing=L.Routing||{};var u=L.Class.extend({initialize:function(f){this._langs=L.Util.isArray(f)?f.slice():[f,"en"];for(var h=0,s=this._langs.length;h<s;h++){var w=/([A-Za-z]+)/.exec(this._langs[h])[1];if(!u[this._langs[h]])if(u[w])this._langs[h]=w;else throw new Error('No localization for language "'+this._langs[h]+'".')}},localize:function(f){var h,s,w;f=L.Util.isArray(f)?f:[f];for(var T=0,E=this._langs.length;T<E;T++){h=u[this._langs[T]];for(var z=0,O=f.length;h&&z<O;z++)s=f[z],w=h[s],h=w;if(w)return w}}});i.exports=L.extend(u,{en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest",SlightRight:"slight right",Right:"right",SharpRight:"sharp right",SlightLeft:"slight left",Left:"left",SharpLeft:"sharp left",Uturn:"Turn around"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"],TurnAround:["Turn around"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"],Fork:["At the fork, turn {modifier}"," onto {road}"],Merge:["Merge {modifier}"," onto {road}"],OnRamp:["Turn {modifier} on the ramp"," onto {road}"],OffRamp:["Take the ramp on the {modifier}"," onto {road}"],EndOfRoad:["Turn {modifier} at the end of the road"," onto {road}"],Onto:"onto {road}"},formatOrder:function(f){var h=f%10-1,s=["st","nd","rd"];return s[h]?f+s[h]:f+"th"},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"End"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"Sdosten",S:"Sden",SW:"Sdwesten",W:"Westen",NW:"Nordwesten",SlightRight:"leicht rechts",Right:"rechts",SharpRight:"scharf rechts",SlightLeft:"leicht links",Left:"links",SharpLeft:"scharf links",Uturn:"Wenden"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"],Fork:["An der Kreuzung {modifier}"," auf {road}"],Merge:["Fahren Sie {modifier} weiter"," auf {road}"],OnRamp:["Fahren Sie {modifier} auf die Auffahrt"," auf {road}"],OffRamp:["Nehmen Sie die Ausfahrt {modifier}"," auf {road}"],EndOfRoad:["Fahren Sie {modifier} am Ende der Strae"," auf {road}"],Onto:"auf {road}"},formatOrder:function(f){return f+"."},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Ziel"}},sv:{directions:{N:"norr",NE:"nordost",E:"st",SE:"sydost",S:"syd",SW:"sydvst",W:"vst",NW:"nordvst",SlightRight:"svagt hger",Right:"hger",SharpRight:"skarpt hger",SlightLeft:"svagt vnster",Left:"vnster",SharpLeft:"skarpt vnster",Uturn:"Vnd"},instructions:{Head:["k t {dir}"," till {road}"],Continue:["Fortstt {dir}"],SlightRight:["Svagt hger"," till {road}"],Right:["Svng hger"," till {road}"],SharpRight:["Skarpt hger"," till {road}"],TurnAround:["Vnd"],SharpLeft:["Skarpt vnster"," till {road}"],Left:["Svng vnster"," till {road}"],SlightLeft:["Svagt vnster"," till {road}"],WaypointReached:["Viapunkt ndd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans ml"],Fork:["Tag av {modifier}"," till {road}"],Merge:["Anslut {modifier} "," till {road}"],OnRamp:["Tag pfarten {modifier}"," till {road}"],OffRamp:["Tag avfarten {modifier}"," till {road}"],EndOfRoad:["Svng {modifier} vid vgens slut"," till {road}"],Onto:"till {road}"},formatOrder:function(f){return["frsta","andra","tredje","fjrde","femte","sjtte","sjunde","ttonde","nionde","tionde"][f-1]},ui:{startPlaceholder:"Frn",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Till"}},es:c,sp:c,nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(f){return f===1||f>=20?f+"ste":f+"de"},ui:{startPlaceholder:"Vertrekpunt",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Bestemming"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["Lgrement  droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Compltement  droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Compltement  gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["Lgrement  gauche"," sur {road}"],WaypointReached:["Point d'tape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(f){return f+""},ui:{startPlaceholder:"Dpart",viaPlaceholder:"Intermdiaire {viaNumber}",endPlaceholder:"Arrive"}},it:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ovest",W:"ovest",NW:"nord-ovest"},instructions:{Head:["Dritto verso {dir}"," su {road}"],Continue:["Continuare verso {dir}"," su {road}"],SlightRight:["Mantenere la destra"," su {road}"],Right:["A destra"," su {road}"],SharpRight:["Strettamente a destra"," su {road}"],TurnAround:["Fare inversione di marcia"],SharpLeft:["Strettamente a sinistra"," su {road}"],Left:["A sinistra"," sur {road}"],SlightLeft:["Mantenere la sinistra"," su {road}"],WaypointReached:["Punto di passaggio raggiunto"],Roundabout:["Alla rotonda, prendere la {exitStr} uscita"],DestinationReached:["Destinazione raggiunta"]},formatOrder:function(f){return f+""},ui:{startPlaceholder:"Partenza",viaPlaceholder:"Intermedia {viaNumber}",endPlaceholder:"Destinazione"}},pt:{directions:{N:"norte",NE:"nordeste",E:"leste",SE:"sudeste",S:"sul",SW:"sudoeste",W:"oeste",NW:"noroeste",SlightRight:"curva ligeira a direita",Right:"direita",SharpRight:"curva fechada a direita",SlightLeft:"ligeira a esquerda",Left:"esquerda",SharpLeft:"curva fechada a esquerda",Uturn:"Meia volta"},instructions:{Head:["Siga {dir}"," na {road}"],Continue:["Continue {dir}"," na {road}"],SlightRight:["Curva ligeira a direita"," na {road}"],Right:["Curva a direita"," na {road}"],SharpRight:["Curva fechada a direita"," na {road}"],TurnAround:["Retorne"],SharpLeft:["Curva fechada a esquerda"," na {road}"],Left:["Curva a esquerda"," na {road}"],SlightLeft:["Curva ligueira a esquerda"," na {road}"],WaypointReached:["Ponto de interesse atingido"],Roundabout:["Pegue a {exitStr} sada na rotatria"," na {road}"],DestinationReached:["Destino atingido"],Fork:["Na encruzilhada, vire a {modifier}"," na {road}"],Merge:["Entre  {modifier}"," na {road}"],OnRamp:["Vire {modifier} na rampa"," na {road}"],OffRamp:["Entre na rampa na {modifier}"," na {road}"],EndOfRoad:["Vire {modifier} no fim da rua"," na {road}"],Onto:"na {road}"},formatOrder:function(f){return f+""},ui:{startPlaceholder:"Origem",viaPlaceholder:"Intermdio {viaNumber}",endPlaceholder:"Destino"}},sk:{directions:{N:"sever",NE:"serverovchod",E:"vchod",SE:"juhovchod",S:"juh",SW:"juhozpad",W:"zpad",NW:"serverozpad"},instructions:{Head:["Mierte na {dir}"," na {road}"],Continue:["Pokraujte na {dir}"," na {road}"],SlightRight:["Mierne doprava"," na {road}"],Right:["Doprava"," na {road}"],SharpRight:["Prudko doprava"," na {road}"],TurnAround:["Otote sa"],SharpLeft:["Prudko doava"," na {road}"],Left:["Doava"," na {road}"],SlightLeft:["Mierne doava"," na {road}"],WaypointReached:["Ste v prejazdovom bode."],Roundabout:["Odbote na {exitStr} vjazde"," na {road}"],DestinationReached:["Prili ste do ciea."]},formatOrder:function(f){var h=f%10-1,s=[".",".","."];return s[h]?f+s[h]:f+"."},ui:{startPlaceholder:"Zaiatok",viaPlaceholder:"Cez {viaNumber}",endPlaceholder:"Koniec"}},el:{directions:{N:"",NE:"",E:"",SE:"",S:"",SW:"",W:"",NW:""},instructions:{Head:[" {dir}","  {road}"],Continue:[" {dir}","  {road}"],SlightRight:[" ","  {road}"],Right:["","  {road}"],SharpRight:["  ","  {road}"],TurnAround:[" "],SharpLeft:["  ","  {road}"],Left:["","  {road}"],SlightLeft:[" ","  {road}"],WaypointReached:["   "],Roundabout:["  {exitStr}    ","  {road}"],DestinationReached:["   "]},formatOrder:function(f){return f+""},ui:{startPlaceholder:"",viaPlaceholder:" {viaNumber}",endPlaceholder:""}},ca:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-oest",W:"oest",NW:"nord-oest",SlightRight:"lleu gir a la dreta",Right:"dreta",SharpRight:"gir pronunciat a la dreta",SlightLeft:"gir pronunciat a l'esquerra",Left:"esquerra",SharpLeft:"lleu gir a l'esquerra",Uturn:"mitja volta"},instructions:{Head:["Recte {dir}"," sobre {road}"],Continue:["Continuar {dir}"],TurnAround:["Donar la volta"],WaypointReached:["Ha arribat a un punt del cam"],Roundabout:["Agafar {exitStr} sortida a la rotonda"," a {road}"],DestinationReached:["Arribada al dest"],Fork:["A la crulla gira a la {modifier}"," cap a {road}"],Merge:["Incorpora't {modifier}"," a {road}"],OnRamp:["Gira {modifier} a la sortida"," cap a {road}"],OffRamp:["Pren la sortida {modifier}"," cap a {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," cap a {road}"],Onto:"cap a {road}"},formatOrder:function(f){return f+""},ui:{startPlaceholder:"Origen",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Dest"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},ru:{directions:{N:"",NE:"",E:"",SE:"",S:"",SW:"",W:"",NW:"",SlightRight:" ",Right:"",SharpRight:" ",SlightLeft:" ",Left:"",SharpLeft:" ",Uturn:""},instructions:{Head:["   {dir}","  {road}"],Continue:["   {dir}","  {road}"],SlightRight:["  ","  {road}"],Right:["","  {road}"],SharpRight:["  ","  {road}"],TurnAround:[""],SharpLeft:["  ","  {road}"],Left:[" ","  {road}"],SlightLeft:["  ","  {road}"],WaypointReached:[" "],Roundabout:["{exitStr}   ","  {road}"],DestinationReached:[" "],Fork:["   {modifier}","  {road}"],Merge:[" {modifier}","  {road}"],OnRamp:[" {modifier}  ","  {road}"],OffRamp:["  {modifier}","  {road}"],EndOfRoad:[" {modifier}   ","  {road}"],Onto:" {road}"},formatOrder:function(f){return f+"-"},ui:{startPlaceholder:"",viaPlaceholder:" {viaNumber}",endPlaceholder:""},units:{meters:"",kilometers:"",yards:"",miles:"",hours:"",minutes:"",seconds:""}},pl:{directions:{N:"pnoc",NE:"pnocny wschd",E:"wschd",SE:"poudniowy wschd",S:"poudnie",SW:"poudniowy zachd",W:"zachd",NW:"pnocny zachd",SlightRight:"lekko w prawo",Right:"w prawo",SharpRight:"ostro w prawo",SlightLeft:"lekko w lewo",Left:"w lewo",SharpLeft:"ostro w lewo",Uturn:"zawr"},instructions:{Head:["Kieruj si na {dir}"," na {road}"],Continue:["Jed dalej przez {dir}"],TurnAround:["Zawr"],WaypointReached:["Punkt poredni"],Roundabout:["Wyjed {exitStr} zjazdem na rondzie"," na {road}"],DestinationReached:["Dojechano do miejsca docelowego"],Fork:["Na rozwidleniu {modifier}"," na {road}"],Merge:["Zjed {modifier}"," na {road}"],OnRamp:["Wjazd {modifier}"," na {road}"],OffRamp:["Zjazd {modifier}"," na {road}"],EndOfRoad:["Skr {modifier} na kocu drogi"," na {road}"],Onto:"na {road}"},formatOrder:function(f){return f+"."},ui:{startPlaceholder:"Pocztek",viaPlaceholder:"Przez {viaNumber}",endPlaceholder:"Koniec"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"godz",minutes:"min",seconds:"s"}}})})()},{}],58:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,f=r("./osrm-v1");i.exports=f.extend({options:{serviceUrl:"https://api.mapbox.com/directions/v5",profile:"mapbox/driving",useHints:!1},initialize:function(h,s){u.Routing.OSRMv1.prototype.initialize.call(this,s),this.options.requestParameters=this.options.requestParameters||{},this.options.requestParameters.access_token=h}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{"./osrm-v1":59}],59:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,f=r("@mapbox/corslite"),h=r("@mapbox/polyline"),s=r("osrm-text-instructions")("v5"),w=r("./waypoint");i.exports=u.Class.extend({options:{serviceUrl:"https://router.project-osrm.org/route/v1",profile:"driving",timeout:30*1e3,routingOptions:{alternatives:!0,steps:!0},polylinePrecision:5,useHints:!0,suppressDemoServerWarning:!1,language:"en"},initialize:function(T){u.Util.setOptions(this,T),this._hints={locations:{}},!this.options.suppressDemoServerWarning&&this.options.serviceUrl.indexOf("//router.project-osrm.org")>=0&&console.warn(`You are using OSRM's demo server. Please note that it is **NOT SUITABLE FOR PRODUCTION USE**.
Refer to the demo server's usage policy: https://github.com/Project-OSRM/osrm-backend/wiki/Api-usage-policy

To change, set the serviceUrl option.

Please do not report issues with this server to neither Leaflet Routing Machine or OSRM - it's for
demo only, and will sometimes not be available, or work in unexpected ways.

Please set up your own OSRM server, or use a paid service provider for production.`)},route:function(T,E,z,O){var W=!1,Q=[],te,U,_e,pe,xe;for(O=u.extend({},this.options.routingOptions,O),te=this.buildRouteUrl(T,O),this.options.requestParameters&&(te+=u.Util.getParamString(this.options.requestParameters,te)),U=setTimeout(function(){W=!0,E.call(z||E,{status:-1,message:"OSRM request timed out."})},this.options.timeout),pe=0;pe<T.length;pe++)_e=T[pe],Q.push(new w(_e.latLng,_e.name,_e.options));return xe=f(te,u.bind(function(Ae,ze){var qe,Ne={};if(clearTimeout(U),W)xe.abort();else{if(Ae)Ne.message="HTTP request failed: "+Ae.type+(Ae.target&&Ae.target.status?" HTTP "+Ae.target.status+": "+Ae.target.statusText:""),Ne.url=te,Ne.status=-1,Ne.target=Ae;else try{qe=JSON.parse(ze.responseText);try{return this._routeDone(qe,Q,O,E,z)}catch(He){Ne.status=-3,Ne.message=He.toString()}}catch(He){Ne.status=-2,Ne.message="Error parsing OSRM response: "+He.toString()}E.call(z||E,Ne)}},this))},requiresMoreDetail:function(T,E,z){if(!T.properties.isSimplified)return!1;var O=T.inputWaypoints,W;for(W=0;W<O.length;++W)if(!z.contains(O[W].latLng))return!0;return!1},_routeDone:function(T,E,z,O,W){var Q=[],te,U,_e;if(W=W||O,T.code!=="Ok"){O.call(W,{status:T.code});return}for(te=this._toWaypoints(E,T.waypoints),U=0;U<T.routes.length;U++)_e=this._convertRoute(T.routes[U]),_e.inputWaypoints=E,_e.waypoints=te,_e.properties={isSimplified:!z||!z.geometryOnly||z.simplifyGeometry},Q.push(_e);this._saveHintData(T.waypoints,E),O.call(W,null,Q)},_convertRoute:function(T){var E={name:"",coordinates:[],instructions:[],summary:{totalDistance:T.distance,totalTime:T.duration}},z=[],O=[],W=0,Q=T.legs.length,te=T.legs[0].steps.length>0,U,_e,pe,xe,Ae,ze,qe,Ne,He;for(this.options.stepToText?He=this.options.stepToText:He=u.bind(s.compile,s,this.options.language),U=0;U<Q;U++)for(pe=T.legs[U],z.push(pe.summary&&pe.summary.charAt(0).toUpperCase()+pe.summary.substring(1)),_e=0;_e<pe.steps.length;_e++)xe=pe.steps[_e],Ae=this._decodePolyline(xe.geometry),E.coordinates.push.apply(E.coordinates,Ae),ze=this._maneuverToInstructionType(xe.maneuver,U===Q-1),qe=this._maneuverToModifier(xe.maneuver),Ne=He(xe,{legCount:Q,legIndex:U}),ze&&((U==0&&xe.maneuver.type=="depart"||xe.maneuver.type=="arrive")&&O.push(W),E.instructions.push({type:ze,distance:xe.distance,time:xe.duration,road:xe.name,direction:this._bearingToDirection(xe.maneuver.bearing_after),exit:xe.maneuver.exit,index:W,mode:xe.mode,modifier:qe,text:Ne})),W+=Ae.length;return E.name=z.join(", "),te?E.waypointIndices=O:E.coordinates=this._decodePolyline(T.geometry),E},_bearingToDirection:function(T){var E=Math.round(T/45)%8;return["N","NE","E","SE","S","SW","W","NW"][E]},_maneuverToInstructionType:function(T,E){switch(T.type){case"new name":return"Continue";case"depart":return"Head";case"arrive":return E?"DestinationReached":"WaypointReached";case"roundabout":case"rotary":return"Roundabout";case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":return this._camelCase(T.type);default:return this._camelCase(T.modifier)}},_maneuverToModifier:function(T){var E=T.modifier;switch(T.type){case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":E=this._leftOrRight(E)}return E&&this._camelCase(E)},_camelCase:function(T){for(var E=T.split(" "),z="",O=0,W=E.length;O<W;O++)z+=E[O].charAt(0).toUpperCase()+E[O].substring(1);return z},_leftOrRight:function(T){return T.indexOf("left")>=0?"Left":"Right"},_decodePolyline:function(T){var E=h.decode(T,this.options.polylinePrecision),z=new Array(E.length),O;for(O=E.length-1;O>=0;O--)z[O]=u.latLng(E[O]);return z},_toWaypoints:function(T,E){var z=[],O,W;for(O=0;O<E.length;O++)W=E[O].location,z.push(new w(u.latLng(W[1],W[0]),T[O].name,T[O].options));return z},buildRouteUrl:function(T,E){for(var z=[],O=[],W,Q,te,U=!0,_e=0;_e<T.length;_e++)W=T[_e],Q=W.latLng,z.push(Q.lng+","+Q.lat),O.push(this._hints.locations[this._locationKey(Q)]||"");return te=!0,this.options.serviceUrl+"/"+this.options.profile+"/"+z.join(";")+"?"+(E.geometryOnly?E.simplifyGeometry?"":"overview=full":"overview=false")+"&alternatives="+U.toString()+"&steps="+te.toString()+(this.options.useHints?"&hints="+O.join(";"):"")+(E.allowUTurns?"&continue_straight="+!E.allowUTurns:"")},_locationKey:function(T){return T.lat+","+T.lng},_saveHintData:function(T,E){var z;this._hints={locations:{}};for(var O=T.length-1;O>=0;O--)z=E[O].latLng,this._hints.locations[this._locationKey(z)]=T[O].hint}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{"./waypoint":61,"@mapbox/corslite":1,"@mapbox/polyline":2,"osrm-text-instructions":3}],60:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,f=r("./geocoder-element"),h=r("./waypoint");i.exports=(u.Layer||u.Class).extend({includes:typeof u.Evented<"u"&&u.Evented.prototype||u.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,reverseWaypoints:!1,addButtonClassName:"",language:"en",createGeocoderElement:function(s,w,T,E){return new f(s,w,T,E)},createMarker:function(s,w){var T={draggable:this.draggableWaypoints},E=u.marker(w.latLng,T);return E},geocodersClassName:""},initialize:function(s,w){u.Util.setOptions(this,w),this._waypoints=[],this.setWaypoints(s)},isReady:function(){var s;for(s=0;s<this._waypoints.length;s++)if(!this._waypoints[s].latLng)return!1;return!0},getWaypoints:function(){var s,w=[];for(s=0;s<this._waypoints.length;s++)w.push(this._waypoints[s]);return w},setWaypoints:function(s){var w=[0,this._waypoints.length].concat(s);return this.spliceWaypoints.apply(this,w),this},spliceWaypoints:function(){var s=[arguments[0],arguments[1]],w;for(w=2;w<arguments.length;w++)s.push(arguments[w]&&arguments[w].hasOwnProperty("latLng")?arguments[w]:new h(arguments[w]));for([].splice.apply(this._waypoints,s);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null);this._updateMarkers(),this._fireChanged.apply(this,s)},onAdd:function(s){this._map=s,this._updateMarkers()},onRemove:function(){var s;if(this._removeMarkers(),this._newWp)for(s=0;s<this._newWp.lines.length;s++)this._map.removeLayer(this._newWp.lines[s]);delete this._map},createGeocoders:function(){var s=u.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),w=this._waypoints,T,E;return this._geocoderContainer=s,this._geocoderElems=[],this.options.addWaypoints&&(T=u.DomUtil.create("button","leaflet-routing-add-waypoint "+this.options.addButtonClassName,s),T.setAttribute("type","button"),u.DomEvent.addListener(T,"click",function(){this.spliceWaypoints(w.length,0,null)},this)),this.options.reverseWaypoints&&(E=u.DomUtil.create("button","leaflet-routing-reverse-waypoints",s),E.setAttribute("type","button"),u.DomEvent.addListener(E,"click",function(){this._waypoints.reverse(),this.setWaypoints(this._waypoints)},this)),this._updateGeocoders(),this.on("waypointsspliced",this._updateGeocoders),s},_createGeocoder:function(s){var w=this.options.createGeocoderElement(this._waypoints[s],s,this._waypoints.length,this.options);return w.on("delete",function(){s>0||this._waypoints.length>2?this.spliceWaypoints(s,1):this.spliceWaypoints(s,1,new h)},this).on("geocoded",function(T){this._updateMarkers(),this._fireChanged(),this._focusGeocoder(s+1),this.fire("waypointgeocoded",{waypointIndex:s,waypoint:T.waypoint})},this).on("reversegeocoded",function(T){this.fire("waypointgeocoded",{waypointIndex:s,waypoint:T.waypoint})},this),w},_updateGeocoders:function(){var s=[],w,T;for(w=0;w<this._geocoderElems.length;w++)this._geocoderContainer.removeChild(this._geocoderElems[w].getContainer());for(w=this._waypoints.length-1;w>=0;w--)T=this._createGeocoder(w),this._geocoderContainer.insertBefore(T.getContainer(),this._geocoderContainer.firstChild),s.push(T);this._geocoderElems=s.reverse()},_removeMarkers:function(){var s;if(this._markers)for(s=0;s<this._markers.length;s++)this._markers[s]&&this._map.removeLayer(this._markers[s]);this._markers=[]},_updateMarkers:function(){var s,w;if(this._map)for(this._removeMarkers(),s=0;s<this._waypoints.length;s++)this._waypoints[s].latLng?(w=this.options.createMarker(s,this._waypoints[s],this._waypoints.length),w&&(w.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(w,s))):w=null,this._markers.push(w)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(s,w,T){var E=function(U){return T?U.latlng:U.target.getLatLng()},z=u.bind(function(U){this.fire("waypointdragstart",{index:w,latlng:E(U)})},this),O=u.bind(function(U){this._waypoints[w].latLng=E(U),this.fire("waypointdrag",{index:w,latlng:E(U)})},this),W=u.bind(function(U){this._waypoints[w].latLng=E(U),this._waypoints[w].name="",this._geocoderElems&&this._geocoderElems[w].update(!0),this.fire("waypointdragend",{index:w,latlng:E(U)}),this._fireChanged()},this),Q,te;T?(Q=u.bind(function(U){this._markers[w].setLatLng(U.latlng),O(U)},this),te=u.bind(function(U){this._map.dragging.enable(),this._map.off("mouseup",te),this._map.off("mousemove",Q),W(U)},this),this._map.dragging.disable(),this._map.on("mousemove",Q),this._map.on("mouseup",te),z({latlng:this._waypoints[w].latLng})):(s.on("dragstart",z),s.on("drag",O),s.on("dragend",W))},dragNewWaypoint:function(s){var w=s.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(w,0,s.latlng),this._hookWaypointEvents(this._markers[w],w,!0)):this._dragNewWaypoint(w,s.latlng)},_dragNewWaypoint:function(s,w){var T=new h(w),E=this._waypoints[s-1],z=this._waypoints[s],O=this.options.createMarker(s,T,this._waypoints.length+1),W=[],Q=this._map.dragging.enabled(),te=u.bind(function(pe){var xe,Ae;for(O&&O.setLatLng(pe.latlng),xe=0;xe<W.length;xe++)Ae=W[xe].getLatLngs(),Ae.splice(1,1,pe.latlng),W[xe].setLatLngs(Ae);u.DomEvent.stop(pe)},this),U=u.bind(function(pe){var xe;for(O&&this._map.removeLayer(O),xe=0;xe<W.length;xe++)this._map.removeLayer(W[xe]);this._map.off("mousemove",te),this._map.off("mouseup",U),this.spliceWaypoints(s,0,pe.latlng),Q&&this._map.dragging.enable(),u.DomEvent.stop(pe)},this),_e;for(O&&O.addTo(this._map),_e=0;_e<this.options.dragStyles.length;_e++)W.push(u.polyline([E.latLng,w,z.latLng],this.options.dragStyles[_e]).addTo(this._map));Q&&this._map.dragging.disable(),this._map.on("mousemove",te),this._map.on("mouseup",U)},_focusGeocoder:function(s){this._geocoderElems[s]?this._geocoderElems[s].focus():document.activeElement.blur()}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{"./geocoder-element":52,"./waypoint":61}],61:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.Class.extend({options:{allowUTurn:!1},initialize:function(f,h,s){u.Util.setOptions(this,s),this.latLng=u.latLng(f),this.name=h}})})()}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[53])),Hy}vk();function ec(r){return r+.5|0}const _s=(r,i,l)=>Math.max(Math.min(r,l),i);function Rd(r){return _s(ec(r*2.55),0,255)}function bs(r){return _s(ec(r*255),0,255)}function Er(r){return _s(ec(r/2.55)/100,0,1)}function Ky(r){return _s(ec(r*100),0,100)}const va={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bm=[..."0123456789ABCDEF"],xk=r=>bm[r&15],bk=r=>bm[(r&240)>>4]+bm[r&15],Rh=r=>(r&240)>>4===(r&15),wk=r=>Rh(r.r)&&Rh(r.g)&&Rh(r.b)&&Rh(r.a);function kk(r){var i=r.length,l;return r[0]==="#"&&(i===4||i===5?l={r:255&va[r[1]]*17,g:255&va[r[2]]*17,b:255&va[r[3]]*17,a:i===5?va[r[4]]*17:255}:(i===7||i===9)&&(l={r:va[r[1]]<<4|va[r[2]],g:va[r[3]]<<4|va[r[4]],b:va[r[5]]<<4|va[r[6]],a:i===9?va[r[7]]<<4|va[r[8]]:255})),l}const Sk=(r,i)=>r<255?i(r):"";function Tk(r){var i=wk(r)?xk:bk;return r?"#"+i(r.r)+i(r.g)+i(r.b)+Sk(r.a,i):void 0}const Mk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ix(r,i,l){const c=i*Math.min(l,1-l),u=(f,h=(f+r/30)%12)=>l-c*Math.max(Math.min(h-3,9-h,1),-1);return[u(0),u(8),u(4)]}function Pk(r,i,l){const c=(u,f=(u+r/60)%6)=>l-l*i*Math.max(Math.min(f,4-f,1),0);return[c(5),c(3),c(1)]}function Ck(r,i,l){const c=Ix(r,1,.5);let u;for(i+l>1&&(u=1/(i+l),i*=u,l*=u),u=0;u<3;u++)c[u]*=1-i-l,c[u]+=i;return c}function Ek(r,i,l,c,u){return r===u?(i-l)/c+(i<l?6:0):i===u?(l-r)/c+2:(r-i)/c+4}function Km(r){const l=r.r/255,c=r.g/255,u=r.b/255,f=Math.max(l,c,u),h=Math.min(l,c,u),s=(f+h)/2;let w,T,E;return f!==h&&(E=f-h,T=s>.5?E/(2-f-h):E/(f+h),w=Ek(l,c,u,E,f),w=w*60+.5),[w|0,T||0,s]}function Ym(r,i,l,c){return(Array.isArray(i)?r(i[0],i[1],i[2]):r(i,l,c)).map(bs)}function Xm(r,i,l){return Ym(Ix,r,i,l)}function Lk(r,i,l){return Ym(Ck,r,i,l)}function Dk(r,i,l){return Ym(Pk,r,i,l)}function zx(r){return(r%360+360)%360}function Ak(r){const i=Mk.exec(r);let l=255,c;if(!i)return;i[5]!==c&&(l=i[6]?Rd(+i[5]):bs(+i[5]));const u=zx(+i[2]),f=+i[3]/100,h=+i[4]/100;return i[1]==="hwb"?c=Lk(u,f,h):i[1]==="hsv"?c=Dk(u,f,h):c=Xm(u,f,h),{r:c[0],g:c[1],b:c[2],a:l}}function Ik(r,i){var l=Km(r);l[0]=zx(l[0]+i),l=Xm(l),r.r=l[0],r.g=l[1],r.b=l[2]}function zk(r){if(!r)return;const i=Km(r),l=i[0],c=Ky(i[1]),u=Ky(i[2]);return r.a<255?`hsla(${l}, ${c}%, ${u}%, ${Er(r.a)})`:`hsl(${l}, ${c}%, ${u}%)`}const Yy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Rk(){const r={},i=Object.keys(Xy),l=Object.keys(Yy);let c,u,f,h,s;for(c=0;c<i.length;c++){for(h=s=i[c],u=0;u<l.length;u++)f=l[u],s=s.replace(f,Yy[f]);f=parseInt(Xy[h],16),r[s]=[f>>16&255,f>>8&255,f&255]}return r}let Fh;function Fk(r){Fh||(Fh=Rk(),Fh.transparent=[0,0,0,0]);const i=Fh[r.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:i.length===4?i[3]:255}}const jk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ok(r){const i=jk.exec(r);let l=255,c,u,f;if(i){if(i[7]!==c){const h=+i[7];l=i[8]?Rd(h):_s(h*255,0,255)}return c=+i[1],u=+i[3],f=+i[5],c=255&(i[2]?Rd(c):_s(c,0,255)),u=255&(i[4]?Rd(u):_s(u,0,255)),f=255&(i[6]?Rd(f):_s(f,0,255)),{r:c,g:u,b:f,a:l}}}function $k(r){return r&&(r.a<255?`rgba(${r.r}, ${r.g}, ${r.b}, ${Er(r.a)})`:`rgb(${r.r}, ${r.g}, ${r.b})`)}const im=r=>r<=.0031308?r*12.92:Math.pow(r,1/2.4)*1.055-.055,Ql=r=>r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4);function Bk(r,i,l){const c=Ql(Er(r.r)),u=Ql(Er(r.g)),f=Ql(Er(r.b));return{r:bs(im(c+l*(Ql(Er(i.r))-c))),g:bs(im(u+l*(Ql(Er(i.g))-u))),b:bs(im(f+l*(Ql(Er(i.b))-f))),a:r.a+l*(i.a-r.a)}}function jh(r,i,l){if(r){let c=Km(r);c[i]=Math.max(0,Math.min(c[i]+c[i]*l,i===0?360:1)),c=Xm(c),r.r=c[0],r.g=c[1],r.b=c[2]}}function Rx(r,i){return r&&Object.assign(i||{},r)}function Jy(r){var i={r:0,g:0,b:0,a:255};return Array.isArray(r)?r.length>=3&&(i={r:r[0],g:r[1],b:r[2],a:255},r.length>3&&(i.a=bs(r[3]))):(i=Rx(r,{r:0,g:0,b:0,a:1}),i.a=bs(i.a)),i}function Vk(r){return r.charAt(0)==="r"?Ok(r):Ak(r)}class Wd{constructor(i){if(i instanceof Wd)return i;const l=typeof i;let c;l==="object"?c=Jy(i):l==="string"&&(c=kk(i)||Fk(i)||Vk(i)),this._rgb=c,this._valid=!!c}get valid(){return this._valid}get rgb(){var i=Rx(this._rgb);return i&&(i.a=Er(i.a)),i}set rgb(i){this._rgb=Jy(i)}rgbString(){return this._valid?$k(this._rgb):void 0}hexString(){return this._valid?Tk(this._rgb):void 0}hslString(){return this._valid?zk(this._rgb):void 0}mix(i,l){if(i){const c=this.rgb,u=i.rgb;let f;const h=l===f?.5:l,s=2*h-1,w=c.a-u.a,T=((s*w===-1?s:(s+w)/(1+s*w))+1)/2;f=1-T,c.r=255&T*c.r+f*u.r+.5,c.g=255&T*c.g+f*u.g+.5,c.b=255&T*c.b+f*u.b+.5,c.a=h*c.a+(1-h)*u.a,this.rgb=c}return this}interpolate(i,l){return i&&(this._rgb=Bk(this._rgb,i._rgb,l)),this}clone(){return new Wd(this.rgb)}alpha(i){return this._rgb.a=bs(i),this}clearer(i){const l=this._rgb;return l.a*=1-i,this}greyscale(){const i=this._rgb,l=ec(i.r*.3+i.g*.59+i.b*.11);return i.r=i.g=i.b=l,this}opaquer(i){const l=this._rgb;return l.a*=1+i,this}negate(){const i=this._rgb;return i.r=255-i.r,i.g=255-i.g,i.b=255-i.b,this}lighten(i){return jh(this._rgb,2,i),this}darken(i){return jh(this._rgb,2,-i),this}saturate(i){return jh(this._rgb,1,i),this}desaturate(i){return jh(this._rgb,1,-i),this}rotate(i){return Ik(this._rgb,i),this}}function Mr(){}const Nk=(()=>{let r=0;return()=>r++})();function Lt(r){return r==null}function Pi(r){if(Array.isArray&&Array.isArray(r))return!0;const i=Object.prototype.toString.call(r);return i.slice(0,7)==="[object"&&i.slice(-6)==="Array]"}function Dt(r){return r!==null&&Object.prototype.toString.call(r)==="[object Object]"}function $i(r){return(typeof r=="number"||r instanceof Number)&&isFinite(+r)}function ha(r,i){return $i(r)?r:i}function wt(r,i){return typeof r>"u"?i:r}const Uk=(r,i)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100:+r/i,Fx=(r,i)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100*i:+r;function hi(r,i,l){if(r&&typeof r.call=="function")return r.apply(l,i)}function Jt(r,i,l,c){let u,f,h;if(Pi(r))for(f=r.length,u=0;u<f;u++)i.call(l,r[u],u);else if(Dt(r))for(h=Object.keys(r),f=h.length,u=0;u<f;u++)i.call(l,r[h[u]],h[u])}function rf(r,i){let l,c,u,f;if(!r||!i||r.length!==i.length)return!1;for(l=0,c=r.length;l<c;++l)if(u=r[l],f=i[l],u.datasetIndex!==f.datasetIndex||u.index!==f.index)return!1;return!0}function sf(r){if(Pi(r))return r.map(sf);if(Dt(r)){const i=Object.create(null),l=Object.keys(r),c=l.length;let u=0;for(;u<c;++u)i[l[u]]=sf(r[l[u]]);return i}return r}function jx(r){return["__proto__","prototype","constructor"].indexOf(r)===-1}function Gk(r,i,l,c){if(!jx(r))return;const u=i[r],f=l[r];Dt(u)&&Dt(f)?Hd(u,f,c):i[r]=sf(f)}function Hd(r,i,l){const c=Pi(i)?i:[i],u=c.length;if(!Dt(r))return r;l=l||{};const f=l.merger||Gk;let h;for(let s=0;s<u;++s){if(h=c[s],!Dt(h))continue;const w=Object.keys(h);for(let T=0,E=w.length;T<E;++T)f(w[T],r,h,l)}return r}function Bd(r,i){return Hd(r,i,{merger:qk})}function qk(r,i,l){if(!jx(r))return;const c=i[r],u=l[r];Dt(c)&&Dt(u)?Bd(c,u):Object.prototype.hasOwnProperty.call(i,r)||(i[r]=sf(u))}const Qy={"":r=>r,x:r=>r.x,y:r=>r.y};function Wk(r){const i=r.split("."),l=[];let c="";for(const u of i)c+=u,c.endsWith("\\")?c=c.slice(0,-1)+".":(l.push(c),c="");return l}function Hk(r){const i=Wk(r);return l=>{for(const c of i){if(c==="")break;l=l&&l[c]}return l}}function ws(r,i){return(Qy[i]||(Qy[i]=Hk(i)))(r)}function Jm(r){return r.charAt(0).toUpperCase()+r.slice(1)}const Zd=r=>typeof r<"u",ks=r=>typeof r=="function",ev=(r,i)=>{if(r.size!==i.size)return!1;for(const l of r)if(!i.has(l))return!1;return!0};function Zk(r){return r.type==="mouseup"||r.type==="click"||r.type==="contextmenu"}const Bt=Math.PI,xi=2*Bt,Kk=xi+Bt,of=Number.POSITIVE_INFINITY,Yk=Bt/180,Ni=Bt/2,Po=Bt/4,tv=Bt*2/3,ys=Math.log10,Qa=Math.sign;function Vd(r,i,l){return Math.abs(r-i)<l}function iv(r){const i=Math.round(r);r=Vd(r,i,r/1e3)?i:r;const l=Math.pow(10,Math.floor(ys(r))),c=r/l;return(c<=1?1:c<=2?2:c<=5?5:10)*l}function Xk(r){const i=[],l=Math.sqrt(r);let c;for(c=1;c<l;c++)r%c===0&&(i.push(c),i.push(r/c));return l===(l|0)&&i.push(l),i.sort((u,f)=>u-f).pop(),i}function Jk(r){return typeof r=="symbol"||typeof r=="object"&&r!==null&&!(Symbol.toPrimitive in r||"toString"in r||"valueOf"in r)}function iu(r){return!Jk(r)&&!isNaN(parseFloat(r))&&isFinite(r)}function Qk(r,i){const l=Math.round(r);return l-i<=r&&l+i>=r}function Ox(r,i,l){let c,u,f;for(c=0,u=r.length;c<u;c++)f=r[c][l],isNaN(f)||(i.min=Math.min(i.min,f),i.max=Math.max(i.max,f))}function Da(r){return r*(Bt/180)}function Qm(r){return r*(180/Bt)}function nv(r){if(!$i(r))return;let i=1,l=0;for(;Math.round(r*i)/i!==r;)i*=10,l++;return l}function $x(r,i){const l=i.x-r.x,c=i.y-r.y,u=Math.sqrt(l*l+c*c);let f=Math.atan2(c,l);return f<-.5*Bt&&(f+=xi),{angle:f,distance:u}}function wm(r,i){return Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2))}function eS(r,i){return(r-i+Kk)%xi-Bt}function Dn(r){return(r%xi+xi)%xi}function Kd(r,i,l,c){const u=Dn(r),f=Dn(i),h=Dn(l),s=Dn(f-u),w=Dn(h-u),T=Dn(u-f),E=Dn(u-h);return u===f||u===h||c&&f===h||s>w&&T<E}function hn(r,i,l){return Math.max(i,Math.min(l,r))}function tS(r){return hn(r,-32768,32767)}function Lr(r,i,l,c=1e-6){return r>=Math.min(i,l)-c&&r<=Math.max(i,l)+c}function eg(r,i,l){l=l||(h=>r[h]<i);let c=r.length-1,u=0,f;for(;c-u>1;)f=u+c>>1,l(f)?u=f:c=f;return{lo:u,hi:c}}const Dr=(r,i,l,c)=>eg(r,l,c?u=>{const f=r[u][i];return f<l||f===l&&r[u+1][i]===l}:u=>r[u][i]<l),iS=(r,i,l)=>eg(r,l,c=>r[c][i]>=l);function nS(r,i,l){let c=0,u=r.length;for(;c<u&&r[c]<i;)c++;for(;u>c&&r[u-1]>l;)u--;return c>0||u<r.length?r.slice(c,u):r}const Bx=["push","pop","shift","splice","unshift"];function aS(r,i){if(r._chartjs){r._chartjs.listeners.push(i);return}Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Bx.forEach(l=>{const c="_onData"+Jm(l),u=r[l];Object.defineProperty(r,l,{configurable:!0,enumerable:!1,value(...f){const h=u.apply(this,f);return r._chartjs.listeners.forEach(s=>{typeof s[c]=="function"&&s[c](...f)}),h}})})}function av(r,i){const l=r._chartjs;if(!l)return;const c=l.listeners,u=c.indexOf(i);u!==-1&&c.splice(u,1),!(c.length>0)&&(Bx.forEach(f=>{delete r[f]}),delete r._chartjs)}function Vx(r){const i=new Set(r);return i.size===r.length?r:Array.from(i)}const Nx=(function(){return typeof window>"u"?function(r){return r()}:window.requestAnimationFrame})();function Ux(r,i){let l=[],c=!1;return function(...u){l=u,c||(c=!0,Nx.call(window,()=>{c=!1,r.apply(i,l)}))}}function rS(r,i){let l;return function(...c){return i?(clearTimeout(l),l=setTimeout(r,i,c)):r.apply(this,c),i}}const tg=r=>r==="start"?"left":r==="end"?"right":"center",Ln=(r,i,l)=>r==="start"?i:r==="end"?l:(i+l)/2,sS=(r,i,l,c)=>r===(c?"left":"right")?l:r==="center"?(i+l)/2:i;function Gx(r,i,l){const c=i.length;let u=0,f=c;if(r._sorted){const{iScale:h,vScale:s,_parsed:w}=r,T=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null,E=h.axis,{min:z,max:O,minDefined:W,maxDefined:Q}=h.getUserBounds();if(W){if(u=Math.min(Dr(w,E,z).lo,l?c:Dr(i,E,h.getPixelForValue(z)).lo),T){const te=w.slice(0,u+1).reverse().findIndex(U=>!Lt(U[s.axis]));u-=Math.max(0,te)}u=hn(u,0,c-1)}if(Q){let te=Math.max(Dr(w,h.axis,O,!0).hi+1,l?0:Dr(i,E,h.getPixelForValue(O),!0).hi+1);if(T){const U=w.slice(te-1).findIndex(_e=>!Lt(_e[s.axis]));te+=Math.max(0,U)}f=hn(te,u,c)-u}else f=c-u}return{start:u,count:f}}function qx(r){const{xScale:i,yScale:l,_scaleRanges:c}=r,u={xmin:i.min,xmax:i.max,ymin:l.min,ymax:l.max};if(!c)return r._scaleRanges=u,!0;const f=c.xmin!==i.min||c.xmax!==i.max||c.ymin!==l.min||c.ymax!==l.max;return Object.assign(c,u),f}const Oh=r=>r===0||r===1,rv=(r,i,l)=>-(Math.pow(2,10*(r-=1))*Math.sin((r-i)*xi/l)),sv=(r,i,l)=>Math.pow(2,-10*r)*Math.sin((r-i)*xi/l)+1,Nd={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>-r*(r-2),easeInOutQuad:r=>(r/=.5)<1?.5*r*r:-.5*(--r*(r-2)-1),easeInCubic:r=>r*r*r,easeOutCubic:r=>(r-=1)*r*r+1,easeInOutCubic:r=>(r/=.5)<1?.5*r*r*r:.5*((r-=2)*r*r+2),easeInQuart:r=>r*r*r*r,easeOutQuart:r=>-((r-=1)*r*r*r-1),easeInOutQuart:r=>(r/=.5)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2),easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>(r-=1)*r*r*r*r+1,easeInOutQuint:r=>(r/=.5)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2),easeInSine:r=>-Math.cos(r*Ni)+1,easeOutSine:r=>Math.sin(r*Ni),easeInOutSine:r=>-.5*(Math.cos(Bt*r)-1),easeInExpo:r=>r===0?0:Math.pow(2,10*(r-1)),easeOutExpo:r=>r===1?1:-Math.pow(2,-10*r)+1,easeInOutExpo:r=>Oh(r)?r:r<.5?.5*Math.pow(2,10*(r*2-1)):.5*(-Math.pow(2,-10*(r*2-1))+2),easeInCirc:r=>r>=1?r:-(Math.sqrt(1-r*r)-1),easeOutCirc:r=>Math.sqrt(1-(r-=1)*r),easeInOutCirc:r=>(r/=.5)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1),easeInElastic:r=>Oh(r)?r:rv(r,.075,.3),easeOutElastic:r=>Oh(r)?r:sv(r,.075,.3),easeInOutElastic(r){return Oh(r)?r:r<.5?.5*rv(r*2,.1125,.45):.5+.5*sv(r*2-1,.1125,.45)},easeInBack(r){return r*r*((1.70158+1)*r-1.70158)},easeOutBack(r){return(r-=1)*r*((1.70158+1)*r+1.70158)+1},easeInOutBack(r){let i=1.70158;return(r/=.5)<1?.5*(r*r*(((i*=1.525)+1)*r-i)):.5*((r-=2)*r*(((i*=1.525)+1)*r+i)+2)},easeInBounce:r=>1-Nd.easeOutBounce(1-r),easeOutBounce(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},easeInOutBounce:r=>r<.5?Nd.easeInBounce(r*2)*.5:Nd.easeOutBounce(r*2-1)*.5+.5};function ig(r){if(r&&typeof r=="object"){const i=r.toString();return i==="[object CanvasPattern]"||i==="[object CanvasGradient]"}return!1}function ov(r){return ig(r)?r:new Wd(r)}function nm(r){return ig(r)?r:new Wd(r).saturate(.5).darken(.1).hexString()}const oS=["x","y","borderWidth","radius","tension"],lS=["color","borderColor","backgroundColor"];function uS(r){r.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),r.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>i!=="onProgress"&&i!=="onComplete"&&i!=="fn"}),r.set("animations",{colors:{type:"color",properties:lS},numbers:{type:"number",properties:oS}}),r.describe("animations",{_fallback:"animation"}),r.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>i|0}}}})}function dS(r){r.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const lv=new Map;function cS(r,i){i=i||{};const l=r+JSON.stringify(i);let c=lv.get(l);return c||(c=new Intl.NumberFormat(r,i),lv.set(l,c)),c}function tc(r,i,l){return cS(i,l).format(r)}const Wx={values(r){return Pi(r)?r:""+r},numeric(r,i,l){if(r===0)return"0";const c=this.chart.options.locale;let u,f=r;if(l.length>1){const T=Math.max(Math.abs(l[0].value),Math.abs(l[l.length-1].value));(T<1e-4||T>1e15)&&(u="scientific"),f=hS(r,l)}const h=ys(Math.abs(f)),s=isNaN(h)?1:Math.max(Math.min(-1*Math.floor(h),20),0),w={notation:u,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(w,this.options.ticks.format),tc(r,c,w)},logarithmic(r,i,l){if(r===0)return"0";const c=l[i].significand||r/Math.pow(10,Math.floor(ys(r)));return[1,2,3,5,10,15].includes(c)||i>.8*l.length?Wx.numeric.call(this,r,i,l):""}};function hS(r,i){let l=i.length>3?i[2].value-i[1].value:i[1].value-i[0].value;return Math.abs(l)>=1&&r!==Math.floor(r)&&(l=r-Math.floor(r)),l}var _f={formatters:Wx};function fS(r){r.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,l)=>l.lineWidth,tickColor:(i,l)=>l.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_f.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),r.route("scale.ticks","color","","color"),r.route("scale.grid","color","","borderColor"),r.route("scale.border","color","","borderColor"),r.route("scale.title","color","","color"),r.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&i!=="callback"&&i!=="parser",_indexable:i=>i!=="borderDash"&&i!=="tickBorderDash"&&i!=="dash"}),r.describe("scales",{_fallback:"scale"}),r.describe("scale.ticks",{_scriptable:i=>i!=="backdropPadding"&&i!=="callback",_indexable:i=>i!=="backdropPadding"})}const Vo=Object.create(null),km=Object.create(null);function Ud(r,i){if(!i)return r;const l=i.split(".");for(let c=0,u=l.length;c<u;++c){const f=l[c];r=r[f]||(r[f]=Object.create(null))}return r}function am(r,i,l){return typeof i=="string"?Hd(Ud(r,i),l):Hd(Ud(r,""),i)}class pS{constructor(i,l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=c=>c.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(c,u)=>nm(u.backgroundColor),this.hoverBorderColor=(c,u)=>nm(u.borderColor),this.hoverColor=(c,u)=>nm(u.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(i),this.apply(l)}set(i,l){return am(this,i,l)}get(i){return Ud(this,i)}describe(i,l){return am(km,i,l)}override(i,l){return am(Vo,i,l)}route(i,l,c,u){const f=Ud(this,i),h=Ud(this,c),s="_"+l;Object.defineProperties(f,{[s]:{value:f[l],writable:!0},[l]:{enumerable:!0,get(){const w=this[s],T=h[u];return Dt(w)?Object.assign({},T,w):wt(w,T)},set(w){this[s]=w}}})}apply(i){i.forEach(l=>l(this))}}var Ci=new pS({_scriptable:r=>!r.startsWith("on"),_indexable:r=>r!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[uS,dS,fS]);function mS(r){return!r||Lt(r.size)||Lt(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family}function lf(r,i,l,c,u){let f=i[u];return f||(f=i[u]=r.measureText(u).width,l.push(u)),f>c&&(c=f),c}function gS(r,i,l,c){c=c||{};let u=c.data=c.data||{},f=c.garbageCollect=c.garbageCollect||[];c.font!==i&&(u=c.data={},f=c.garbageCollect=[],c.font=i),r.save(),r.font=i;let h=0;const s=l.length;let w,T,E,z,O;for(w=0;w<s;w++)if(z=l[w],z!=null&&!Pi(z))h=lf(r,u,f,h,z);else if(Pi(z))for(T=0,E=z.length;T<E;T++)O=z[T],O!=null&&!Pi(O)&&(h=lf(r,u,f,h,O));r.restore();const W=f.length/2;if(W>l.length){for(w=0;w<W;w++)delete u[f[w]];f.splice(0,W)}return h}function Co(r,i,l){const c=r.currentDevicePixelRatio,u=l!==0?Math.max(l/2,.5):0;return Math.round((i-u)*c)/c+u}function uv(r,i){!i&&!r||(i=i||r.getContext("2d"),i.save(),i.resetTransform(),i.clearRect(0,0,r.width,r.height),i.restore())}function Sm(r,i,l,c){Hx(r,i,l,c,null)}function Hx(r,i,l,c,u){let f,h,s,w,T,E,z,O;const W=i.pointStyle,Q=i.rotation,te=i.radius;let U=(Q||0)*Yk;if(W&&typeof W=="object"&&(f=W.toString(),f==="[object HTMLImageElement]"||f==="[object HTMLCanvasElement]")){r.save(),r.translate(l,c),r.rotate(U),r.drawImage(W,-W.width/2,-W.height/2,W.width,W.height),r.restore();return}if(!(isNaN(te)||te<=0)){switch(r.beginPath(),W){default:u?r.ellipse(l,c,u/2,te,0,0,xi):r.arc(l,c,te,0,xi),r.closePath();break;case"triangle":E=u?u/2:te,r.moveTo(l+Math.sin(U)*E,c-Math.cos(U)*te),U+=tv,r.lineTo(l+Math.sin(U)*E,c-Math.cos(U)*te),U+=tv,r.lineTo(l+Math.sin(U)*E,c-Math.cos(U)*te),r.closePath();break;case"rectRounded":T=te*.516,w=te-T,h=Math.cos(U+Po)*w,z=Math.cos(U+Po)*(u?u/2-T:w),s=Math.sin(U+Po)*w,O=Math.sin(U+Po)*(u?u/2-T:w),r.arc(l-z,c-s,T,U-Bt,U-Ni),r.arc(l+O,c-h,T,U-Ni,U),r.arc(l+z,c+s,T,U,U+Ni),r.arc(l-O,c+h,T,U+Ni,U+Bt),r.closePath();break;case"rect":if(!Q){w=Math.SQRT1_2*te,E=u?u/2:w,r.rect(l-E,c-w,2*E,2*w);break}U+=Po;case"rectRot":z=Math.cos(U)*(u?u/2:te),h=Math.cos(U)*te,s=Math.sin(U)*te,O=Math.sin(U)*(u?u/2:te),r.moveTo(l-z,c-s),r.lineTo(l+O,c-h),r.lineTo(l+z,c+s),r.lineTo(l-O,c+h),r.closePath();break;case"crossRot":U+=Po;case"cross":z=Math.cos(U)*(u?u/2:te),h=Math.cos(U)*te,s=Math.sin(U)*te,O=Math.sin(U)*(u?u/2:te),r.moveTo(l-z,c-s),r.lineTo(l+z,c+s),r.moveTo(l+O,c-h),r.lineTo(l-O,c+h);break;case"star":z=Math.cos(U)*(u?u/2:te),h=Math.cos(U)*te,s=Math.sin(U)*te,O=Math.sin(U)*(u?u/2:te),r.moveTo(l-z,c-s),r.lineTo(l+z,c+s),r.moveTo(l+O,c-h),r.lineTo(l-O,c+h),U+=Po,z=Math.cos(U)*(u?u/2:te),h=Math.cos(U)*te,s=Math.sin(U)*te,O=Math.sin(U)*(u?u/2:te),r.moveTo(l-z,c-s),r.lineTo(l+z,c+s),r.moveTo(l+O,c-h),r.lineTo(l-O,c+h);break;case"line":h=u?u/2:Math.cos(U)*te,s=Math.sin(U)*te,r.moveTo(l-h,c-s),r.lineTo(l+h,c+s);break;case"dash":r.moveTo(l,c),r.lineTo(l+Math.cos(U)*(u?u/2:te),c+Math.sin(U)*te);break;case!1:r.closePath();break}r.fill(),i.borderWidth>0&&r.stroke()}}function Ar(r,i,l){return l=l||.5,!i||r&&r.x>i.left-l&&r.x<i.right+l&&r.y>i.top-l&&r.y<i.bottom+l}function yf(r,i){r.save(),r.beginPath(),r.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),r.clip()}function vf(r){r.restore()}function _S(r,i,l,c,u){if(!i)return r.lineTo(l.x,l.y);if(u==="middle"){const f=(i.x+l.x)/2;r.lineTo(f,i.y),r.lineTo(f,l.y)}else u==="after"!=!!c?r.lineTo(i.x,l.y):r.lineTo(l.x,i.y);r.lineTo(l.x,l.y)}function yS(r,i,l,c){if(!i)return r.lineTo(l.x,l.y);r.bezierCurveTo(c?i.cp1x:i.cp2x,c?i.cp1y:i.cp2y,c?l.cp2x:l.cp1x,c?l.cp2y:l.cp1y,l.x,l.y)}function vS(r,i){i.translation&&r.translate(i.translation[0],i.translation[1]),Lt(i.rotation)||r.rotate(i.rotation),i.color&&(r.fillStyle=i.color),i.textAlign&&(r.textAlign=i.textAlign),i.textBaseline&&(r.textBaseline=i.textBaseline)}function xS(r,i,l,c,u){if(u.strikethrough||u.underline){const f=r.measureText(c),h=i-f.actualBoundingBoxLeft,s=i+f.actualBoundingBoxRight,w=l-f.actualBoundingBoxAscent,T=l+f.actualBoundingBoxDescent,E=u.strikethrough?(w+T)/2:T;r.strokeStyle=r.fillStyle,r.beginPath(),r.lineWidth=u.decorationWidth||2,r.moveTo(h,E),r.lineTo(s,E),r.stroke()}}function bS(r,i){const l=r.fillStyle;r.fillStyle=i.color,r.fillRect(i.left,i.top,i.width,i.height),r.fillStyle=l}function No(r,i,l,c,u,f={}){const h=Pi(i)?i:[i],s=f.strokeWidth>0&&f.strokeColor!=="";let w,T;for(r.save(),r.font=u.string,vS(r,f),w=0;w<h.length;++w)T=h[w],f.backdrop&&bS(r,f.backdrop),s&&(f.strokeColor&&(r.strokeStyle=f.strokeColor),Lt(f.strokeWidth)||(r.lineWidth=f.strokeWidth),r.strokeText(T,l,c,f.maxWidth)),r.fillText(T,l,c,f.maxWidth),xS(r,l,c,T,f),c+=Number(u.lineHeight);r.restore()}function Yd(r,i){const{x:l,y:c,w:u,h:f,radius:h}=i;r.arc(l+h.topLeft,c+h.topLeft,h.topLeft,1.5*Bt,Bt,!0),r.lineTo(l,c+f-h.bottomLeft),r.arc(l+h.bottomLeft,c+f-h.bottomLeft,h.bottomLeft,Bt,Ni,!0),r.lineTo(l+u-h.bottomRight,c+f),r.arc(l+u-h.bottomRight,c+f-h.bottomRight,h.bottomRight,Ni,0,!0),r.lineTo(l+u,c+h.topRight),r.arc(l+u-h.topRight,c+h.topRight,h.topRight,0,-Ni,!0),r.lineTo(l+h.topLeft,c)}const wS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,kS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function SS(r,i){const l=(""+r).match(wS);if(!l||l[1]==="normal")return i*1.2;switch(r=+l[2],l[3]){case"px":return r;case"%":r/=100;break}return i*r}const TS=r=>+r||0;function ng(r,i){const l={},c=Dt(i),u=c?Object.keys(i):i,f=Dt(r)?c?h=>wt(r[h],r[i[h]]):h=>r[h]:()=>r;for(const h of u)l[h]=TS(f(h));return l}function Zx(r){return ng(r,{top:"y",right:"x",bottom:"y",left:"x"})}function Ro(r){return ng(r,["topLeft","topRight","bottomLeft","bottomRight"])}function In(r){const i=Zx(r);return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function rn(r,i){r=r||{},i=i||Ci.font;let l=wt(r.size,i.size);typeof l=="string"&&(l=parseInt(l,10));let c=wt(r.style,i.style);c&&!(""+c).match(kS)&&(console.warn('Invalid font style specified: "'+c+'"'),c=void 0);const u={family:wt(r.family,i.family),lineHeight:SS(wt(r.lineHeight,i.lineHeight),l),size:l,style:c,weight:wt(r.weight,i.weight),string:""};return u.string=mS(u),u}function Fd(r,i,l,c){let u,f,h;for(u=0,f=r.length;u<f;++u)if(h=r[u],h!==void 0&&h!==void 0)return h}function MS(r,i,l){const{min:c,max:u}=r,f=Fx(i,(u-c)/2),h=(s,w)=>l&&s===0?0:s+w;return{min:h(c,-Math.abs(f)),max:h(u,f)}}function Ms(r,i){return Object.assign(Object.create(r),i)}function ag(r,i=[""],l,c,u=()=>r[0]){const f=l||r;typeof c>"u"&&(c=Jx("_fallback",r));const h={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:r,_rootScopes:f,_fallback:c,_getTarget:u,override:s=>ag([s,...r],i,f,c)};return new Proxy(h,{deleteProperty(s,w){return delete s[w],delete s._keys,delete r[0][w],!0},get(s,w){return Yx(s,w,()=>zS(w,i,r,s))},getOwnPropertyDescriptor(s,w){return Reflect.getOwnPropertyDescriptor(s._scopes[0],w)},getPrototypeOf(){return Reflect.getPrototypeOf(r[0])},has(s,w){return cv(s).includes(w)},ownKeys(s){return cv(s)},set(s,w,T){const E=s._storage||(s._storage=u());return s[w]=E[w]=T,delete s._keys,!0}})}function nu(r,i,l,c){const u={_cacheable:!1,_proxy:r,_context:i,_subProxy:l,_stack:new Set,_descriptors:Kx(r,c),setContext:f=>nu(r,f,l,c),override:f=>nu(r.override(f),i,l,c)};return new Proxy(u,{deleteProperty(f,h){return delete f[h],delete r[h],!0},get(f,h,s){return Yx(f,h,()=>CS(f,h,s))},getOwnPropertyDescriptor(f,h){return f._descriptors.allKeys?Reflect.has(r,h)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(r,h)},getPrototypeOf(){return Reflect.getPrototypeOf(r)},has(f,h){return Reflect.has(r,h)},ownKeys(){return Reflect.ownKeys(r)},set(f,h,s){return r[h]=s,delete f[h],!0}})}function Kx(r,i={scriptable:!0,indexable:!0}){const{_scriptable:l=i.scriptable,_indexable:c=i.indexable,_allKeys:u=i.allKeys}=r;return{allKeys:u,scriptable:l,indexable:c,isScriptable:ks(l)?l:()=>l,isIndexable:ks(c)?c:()=>c}}const PS=(r,i)=>r?r+Jm(i):i,rg=(r,i)=>Dt(i)&&r!=="adapters"&&(Object.getPrototypeOf(i)===null||i.constructor===Object);function Yx(r,i,l){if(Object.prototype.hasOwnProperty.call(r,i)||i==="constructor")return r[i];const c=l();return r[i]=c,c}function CS(r,i,l){const{_proxy:c,_context:u,_subProxy:f,_descriptors:h}=r;let s=c[i];return ks(s)&&h.isScriptable(i)&&(s=ES(i,s,r,l)),Pi(s)&&s.length&&(s=LS(i,s,r,h.isIndexable)),rg(i,s)&&(s=nu(s,u,f&&f[i],h)),s}function ES(r,i,l,c){const{_proxy:u,_context:f,_subProxy:h,_stack:s}=l;if(s.has(r))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+r);s.add(r);let w=i(f,h||c);return s.delete(r),rg(r,w)&&(w=sg(u._scopes,u,r,w)),w}function LS(r,i,l,c){const{_proxy:u,_context:f,_subProxy:h,_descriptors:s}=l;if(typeof f.index<"u"&&c(r))return i[f.index%i.length];if(Dt(i[0])){const w=i,T=u._scopes.filter(E=>E!==w);i=[];for(const E of w){const z=sg(T,u,r,E);i.push(nu(z,f,h&&h[r],s))}}return i}function Xx(r,i,l){return ks(r)?r(i,l):r}const DS=(r,i)=>r===!0?i:typeof r=="string"?ws(i,r):void 0;function AS(r,i,l,c,u){for(const f of i){const h=DS(l,f);if(h){r.add(h);const s=Xx(h._fallback,l,u);if(typeof s<"u"&&s!==l&&s!==c)return s}else if(h===!1&&typeof c<"u"&&l!==c)return null}return!1}function sg(r,i,l,c){const u=i._rootScopes,f=Xx(i._fallback,l,c),h=[...r,...u],s=new Set;s.add(c);let w=dv(s,h,l,f||l,c);return w===null||typeof f<"u"&&f!==l&&(w=dv(s,h,f,w,c),w===null)?!1:ag(Array.from(s),[""],u,f,()=>IS(i,l,c))}function dv(r,i,l,c,u){for(;l;)l=AS(r,i,l,c,u);return l}function IS(r,i,l){const c=r._getTarget();i in c||(c[i]={});const u=c[i];return Pi(u)&&Dt(l)?l:u||{}}function zS(r,i,l,c){let u;for(const f of i)if(u=Jx(PS(f,r),l),typeof u<"u")return rg(r,u)?sg(l,c,r,u):u}function Jx(r,i){for(const l of i){if(!l)continue;const c=l[r];if(typeof c<"u")return c}}function cv(r){let i=r._keys;return i||(i=r._keys=RS(r._scopes)),i}function RS(r){const i=new Set;for(const l of r)for(const c of Object.keys(l).filter(u=>!u.startsWith("_")))i.add(c);return Array.from(i)}function Qx(r,i,l,c){const{iScale:u}=r,{key:f="r"}=this._parsing,h=new Array(c);let s,w,T,E;for(s=0,w=c;s<w;++s)T=s+l,E=i[T],h[s]={r:u.parse(ws(E,f),T)};return h}const FS=Number.EPSILON||1e-14,au=(r,i)=>i<r.length&&!r[i].skip&&r[i],eb=r=>r==="x"?"y":"x";function jS(r,i,l,c){const u=r.skip?i:r,f=i,h=l.skip?i:l,s=wm(f,u),w=wm(h,f);let T=s/(s+w),E=w/(s+w);T=isNaN(T)?0:T,E=isNaN(E)?0:E;const z=c*T,O=c*E;return{previous:{x:f.x-z*(h.x-u.x),y:f.y-z*(h.y-u.y)},next:{x:f.x+O*(h.x-u.x),y:f.y+O*(h.y-u.y)}}}function OS(r,i,l){const c=r.length;let u,f,h,s,w,T=au(r,0);for(let E=0;E<c-1;++E)if(w=T,T=au(r,E+1),!(!w||!T)){if(Vd(i[E],0,FS)){l[E]=l[E+1]=0;continue}u=l[E]/i[E],f=l[E+1]/i[E],s=Math.pow(u,2)+Math.pow(f,2),!(s<=9)&&(h=3/Math.sqrt(s),l[E]=u*h*i[E],l[E+1]=f*h*i[E])}}function $S(r,i,l="x"){const c=eb(l),u=r.length;let f,h,s,w=au(r,0);for(let T=0;T<u;++T){if(h=s,s=w,w=au(r,T+1),!s)continue;const E=s[l],z=s[c];h&&(f=(E-h[l])/3,s[`cp1${l}`]=E-f,s[`cp1${c}`]=z-f*i[T]),w&&(f=(w[l]-E)/3,s[`cp2${l}`]=E+f,s[`cp2${c}`]=z+f*i[T])}}function BS(r,i="x"){const l=eb(i),c=r.length,u=Array(c).fill(0),f=Array(c);let h,s,w,T=au(r,0);for(h=0;h<c;++h)if(s=w,w=T,T=au(r,h+1),!!w){if(T){const E=T[i]-w[i];u[h]=E!==0?(T[l]-w[l])/E:0}f[h]=s?T?Qa(u[h-1])!==Qa(u[h])?0:(u[h-1]+u[h])/2:u[h-1]:u[h]}OS(r,u,f),$S(r,f,i)}function $h(r,i,l){return Math.max(Math.min(r,l),i)}function VS(r,i){let l,c,u,f,h,s=Ar(r[0],i);for(l=0,c=r.length;l<c;++l)h=f,f=s,s=l<c-1&&Ar(r[l+1],i),f&&(u=r[l],h&&(u.cp1x=$h(u.cp1x,i.left,i.right),u.cp1y=$h(u.cp1y,i.top,i.bottom)),s&&(u.cp2x=$h(u.cp2x,i.left,i.right),u.cp2y=$h(u.cp2y,i.top,i.bottom)))}function NS(r,i,l,c,u){let f,h,s,w;if(i.spanGaps&&(r=r.filter(T=>!T.skip)),i.cubicInterpolationMode==="monotone")BS(r,u);else{let T=c?r[r.length-1]:r[0];for(f=0,h=r.length;f<h;++f)s=r[f],w=jS(T,s,r[Math.min(f+1,h-(c?0:1))%h],i.tension),s.cp1x=w.previous.x,s.cp1y=w.previous.y,s.cp2x=w.next.x,s.cp2y=w.next.y,T=s}i.capBezierPoints&&VS(r,l)}function og(){return typeof window<"u"&&typeof document<"u"}function lg(r){let i=r.parentNode;return i&&i.toString()==="[object ShadowRoot]"&&(i=i.host),i}function uf(r,i,l){let c;return typeof r=="string"?(c=parseInt(r,10),r.indexOf("%")!==-1&&(c=c/100*i.parentNode[l])):c=r,c}const xf=r=>r.ownerDocument.defaultView.getComputedStyle(r,null);function US(r,i){return xf(r).getPropertyValue(i)}const GS=["top","right","bottom","left"];function Fo(r,i,l){const c={};l=l?"-"+l:"";for(let u=0;u<4;u++){const f=GS[u];c[f]=parseFloat(r[i+"-"+f+l])||0}return c.width=c.left+c.right,c.height=c.top+c.bottom,c}const qS=(r,i,l)=>(r>0||i>0)&&(!l||!l.shadowRoot);function WS(r,i){const l=r.touches,c=l&&l.length?l[0]:r,{offsetX:u,offsetY:f}=c;let h=!1,s,w;if(qS(u,f,r.target))s=u,w=f;else{const T=i.getBoundingClientRect();s=c.clientX-T.left,w=c.clientY-T.top,h=!0}return{x:s,y:w,box:h}}function Do(r,i){if("native"in r)return r;const{canvas:l,currentDevicePixelRatio:c}=i,u=xf(l),f=u.boxSizing==="border-box",h=Fo(u,"padding"),s=Fo(u,"border","width"),{x:w,y:T,box:E}=WS(r,l),z=h.left+(E&&s.left),O=h.top+(E&&s.top);let{width:W,height:Q}=i;return f&&(W-=h.width+s.width,Q-=h.height+s.height),{x:Math.round((w-z)/W*l.width/c),y:Math.round((T-O)/Q*l.height/c)}}function HS(r,i,l){let c,u;if(i===void 0||l===void 0){const f=r&&lg(r);if(!f)i=r.clientWidth,l=r.clientHeight;else{const h=f.getBoundingClientRect(),s=xf(f),w=Fo(s,"border","width"),T=Fo(s,"padding");i=h.width-T.width-w.width,l=h.height-T.height-w.height,c=uf(s.maxWidth,f,"clientWidth"),u=uf(s.maxHeight,f,"clientHeight")}}return{width:i,height:l,maxWidth:c||of,maxHeight:u||of}}const vs=r=>Math.round(r*10)/10;function ZS(r,i,l,c){const u=xf(r),f=Fo(u,"margin"),h=uf(u.maxWidth,r,"clientWidth")||of,s=uf(u.maxHeight,r,"clientHeight")||of,w=HS(r,i,l);let{width:T,height:E}=w;if(u.boxSizing==="content-box"){const O=Fo(u,"border","width"),W=Fo(u,"padding");T-=W.width+O.width,E-=W.height+O.height}return T=Math.max(0,T-f.width),E=Math.max(0,c?T/c:E-f.height),T=vs(Math.min(T,h,w.maxWidth)),E=vs(Math.min(E,s,w.maxHeight)),T&&!E&&(E=vs(T/2)),(i!==void 0||l!==void 0)&&c&&w.height&&E>w.height&&(E=w.height,T=vs(Math.floor(E*c))),{width:T,height:E}}function hv(r,i,l){const c=i||1,u=vs(r.height*c),f=vs(r.width*c);r.height=vs(r.height),r.width=vs(r.width);const h=r.canvas;return h.style&&(l||!h.style.height&&!h.style.width)&&(h.style.height=`${r.height}px`,h.style.width=`${r.width}px`),r.currentDevicePixelRatio!==c||h.height!==u||h.width!==f?(r.currentDevicePixelRatio=c,h.height=u,h.width=f,r.ctx.setTransform(c,0,0,c,0,0),!0):!1}const KS=(function(){let r=!1;try{const i={get passive(){return r=!0,!1}};og()&&(window.addEventListener("test",null,i),window.removeEventListener("test",null,i))}catch{}return r})();function fv(r,i){const l=US(r,i),c=l&&l.match(/^(\d+)(\.\d+)?px$/);return c?+c[1]:void 0}function Ao(r,i,l,c){return{x:r.x+l*(i.x-r.x),y:r.y+l*(i.y-r.y)}}function YS(r,i,l,c){return{x:r.x+l*(i.x-r.x),y:c==="middle"?l<.5?r.y:i.y:c==="after"?l<1?r.y:i.y:l>0?i.y:r.y}}function XS(r,i,l,c){const u={x:r.cp2x,y:r.cp2y},f={x:i.cp1x,y:i.cp1y},h=Ao(r,u,l),s=Ao(u,f,l),w=Ao(f,i,l),T=Ao(h,s,l),E=Ao(s,w,l);return Ao(T,E,l)}const JS=function(r,i){return{x(l){return r+r+i-l},setWidth(l){i=l},textAlign(l){return l==="center"?l:l==="right"?"left":"right"},xPlus(l,c){return l-c},leftForLtr(l,c){return l-c}}},QS=function(){return{x(r){return r},setWidth(r){},textAlign(r){return r},xPlus(r,i){return r+i},leftForLtr(r,i){return r}}};function tu(r,i,l){return r?JS(i,l):QS()}function tb(r,i){let l,c;(i==="ltr"||i==="rtl")&&(l=r.canvas.style,c=[l.getPropertyValue("direction"),l.getPropertyPriority("direction")],l.setProperty("direction",i,"important"),r.prevTextDirection=c)}function ib(r,i){i!==void 0&&(delete r.prevTextDirection,r.canvas.style.setProperty("direction",i[0],i[1]))}function nb(r){return r==="angle"?{between:Kd,compare:eS,normalize:Dn}:{between:Lr,compare:(i,l)=>i-l,normalize:i=>i}}function pv({start:r,end:i,count:l,loop:c,style:u}){return{start:r%l,end:i%l,loop:c&&(i-r+1)%l===0,style:u}}function eT(r,i,l){const{property:c,start:u,end:f}=l,{between:h,normalize:s}=nb(c),w=i.length;let{start:T,end:E,loop:z}=r,O,W;if(z){for(T+=w,E+=w,O=0,W=w;O<W&&h(s(i[T%w][c]),u,f);++O)T--,E--;T%=w,E%=w}return E<T&&(E+=w),{start:T,end:E,loop:z,style:r.style}}function ab(r,i,l){if(!l)return[r];const{property:c,start:u,end:f}=l,h=i.length,{compare:s,between:w,normalize:T}=nb(c),{start:E,end:z,loop:O,style:W}=eT(r,i,l),Q=[];let te=!1,U=null,_e,pe,xe;const Ae=()=>w(u,xe,_e)&&s(u,xe)!==0,ze=()=>s(f,_e)===0||w(f,xe,_e),qe=()=>te||Ae(),Ne=()=>!te||ze();for(let He=E,rt=E;He<=z;++He)pe=i[He%h],!pe.skip&&(_e=T(pe[c]),_e!==xe&&(te=w(_e,u,f),U===null&&qe()&&(U=s(_e,u)===0?He:rt),U!==null&&Ne()&&(Q.push(pv({start:U,end:He,loop:O,count:h,style:W})),U=null),rt=He,xe=_e));return U!==null&&Q.push(pv({start:U,end:z,loop:O,count:h,style:W})),Q}function rb(r,i){const l=[],c=r.segments;for(let u=0;u<c.length;u++){const f=ab(c[u],r.points,i);f.length&&l.push(...f)}return l}function tT(r,i,l,c){let u=0,f=i-1;if(l&&!c)for(;u<i&&!r[u].skip;)u++;for(;u<i&&r[u].skip;)u++;for(u%=i,l&&(f+=u);f>u&&r[f%i].skip;)f--;return f%=i,{start:u,end:f}}function iT(r,i,l,c){const u=r.length,f=[];let h=i,s=r[i],w;for(w=i+1;w<=l;++w){const T=r[w%u];T.skip||T.stop?s.skip||(c=!1,f.push({start:i%u,end:(w-1)%u,loop:c}),i=h=T.stop?w:null):(h=w,s.skip&&(i=w)),s=T}return h!==null&&f.push({start:i%u,end:h%u,loop:c}),f}function nT(r,i){const l=r.points,c=r.options.spanGaps,u=l.length;if(!u)return[];const f=!!r._loop,{start:h,end:s}=tT(l,u,f,c);if(c===!0)return mv(r,[{start:h,end:s,loop:f}],l,i);const w=s<h?s+u:s,T=!!r._fullLoop&&h===0&&s===u-1;return mv(r,iT(l,h,w,T),l,i)}function mv(r,i,l,c){return!c||!c.setContext||!l?i:aT(r,i,l,c)}function aT(r,i,l,c){const u=r._chart.getContext(),f=gv(r.options),{_datasetIndex:h,options:{spanGaps:s}}=r,w=l.length,T=[];let E=f,z=i[0].start,O=z;function W(Q,te,U,_e){const pe=s?-1:1;if(Q!==te){for(Q+=w;l[Q%w].skip;)Q-=pe;for(;l[te%w].skip;)te+=pe;Q%w!==te%w&&(T.push({start:Q%w,end:te%w,loop:U,style:_e}),E=_e,z=te%w)}}for(const Q of i){z=s?z:Q.start;let te=l[z%w],U;for(O=z+1;O<=Q.end;O++){const _e=l[O%w];U=gv(c.setContext(Ms(u,{type:"segment",p0:te,p1:_e,p0DataIndex:(O-1)%w,p1DataIndex:O%w,datasetIndex:h}))),rT(U,E)&&W(z,O-1,Q.loop,E),te=_e,E=U}z<O-1&&W(z,O-1,Q.loop,E)}return T}function gv(r){return{backgroundColor:r.backgroundColor,borderCapStyle:r.borderCapStyle,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderJoinStyle:r.borderJoinStyle,borderWidth:r.borderWidth,borderColor:r.borderColor}}function rT(r,i){if(!i)return!1;const l=[],c=function(u,f){return ig(f)?(l.includes(f)||l.push(f),l.indexOf(f)):f};return JSON.stringify(r,c)!==JSON.stringify(i,c)}function Bh(r,i,l){return r.options.clip?r[l]:i[l]}function sT(r,i){const{xScale:l,yScale:c}=r;return l&&c?{left:Bh(l,i,"left"),right:Bh(l,i,"right"),top:Bh(c,i,"top"),bottom:Bh(c,i,"bottom")}:i}function sb(r,i){const l=i._clip;if(l.disabled)return!1;const c=sT(i,r.chartArea);return{left:l.left===!1?0:c.left-(l.left===!0?0:l.left),right:l.right===!1?r.width:c.right+(l.right===!0?0:l.right),top:l.top===!1?0:c.top-(l.top===!0?0:l.top),bottom:l.bottom===!1?r.height:c.bottom+(l.bottom===!0?0:l.bottom)}}class oT{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(i,l,c,u){const f=l.listeners[u],h=l.duration;f.forEach(s=>s({chart:i,initial:l.initial,numSteps:h,currentStep:Math.min(c-l.start,h)}))}_refresh(){this._request||(this._running=!0,this._request=Nx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(i=Date.now()){let l=0;this._charts.forEach((c,u)=>{if(!c.running||!c.items.length)return;const f=c.items;let h=f.length-1,s=!1,w;for(;h>=0;--h)w=f[h],w._active?(w._total>c.duration&&(c.duration=w._total),w.tick(i),s=!0):(f[h]=f[f.length-1],f.pop());s&&(u.draw(),this._notify(u,c,i,"progress")),f.length||(c.running=!1,this._notify(u,c,i,"complete"),c.initial=!1),l+=f.length}),this._lastDate=i,l===0&&(this._running=!1)}_getAnims(i){const l=this._charts;let c=l.get(i);return c||(c={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},l.set(i,c)),c}listen(i,l,c){this._getAnims(i).listeners[l].push(c)}add(i,l){!l||!l.length||this._getAnims(i).items.push(...l)}has(i){return this._getAnims(i).items.length>0}start(i){const l=this._charts.get(i);l&&(l.running=!0,l.start=Date.now(),l.duration=l.items.reduce((c,u)=>Math.max(c,u._duration),0),this._refresh())}running(i){if(!this._running)return!1;const l=this._charts.get(i);return!(!l||!l.running||!l.items.length)}stop(i){const l=this._charts.get(i);if(!l||!l.items.length)return;const c=l.items;let u=c.length-1;for(;u>=0;--u)c[u].cancel();l.items=[],this._notify(i,l,Date.now(),"complete")}remove(i){return this._charts.delete(i)}}var Pr=new oT;const _v="transparent",lT={boolean(r,i,l){return l>.5?i:r},color(r,i,l){const c=ov(r||_v),u=c.valid&&ov(i||_v);return u&&u.valid?u.mix(c,l).hexString():i},number(r,i,l){return r+(i-r)*l}};class uT{constructor(i,l,c,u){const f=l[c];u=Fd([i.to,u,f,i.from]);const h=Fd([i.from,f,u]);this._active=!0,this._fn=i.fn||lT[i.type||typeof h],this._easing=Nd[i.easing]||Nd.linear,this._start=Math.floor(Date.now()+(i.delay||0)),this._duration=this._total=Math.floor(i.duration),this._loop=!!i.loop,this._target=l,this._prop=c,this._from=h,this._to=u,this._promises=void 0}active(){return this._active}update(i,l,c){if(this._active){this._notify(!1);const u=this._target[this._prop],f=c-this._start,h=this._duration-f;this._start=c,this._duration=Math.floor(Math.max(h,i.duration)),this._total+=f,this._loop=!!i.loop,this._to=Fd([i.to,l,u,i.from]),this._from=Fd([i.from,u,l])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(i){const l=i-this._start,c=this._duration,u=this._prop,f=this._from,h=this._loop,s=this._to;let w;if(this._active=f!==s&&(h||l<c),!this._active){this._target[u]=s,this._notify(!0);return}if(l<0){this._target[u]=f;return}w=l/c%2,w=h&&w>1?2-w:w,w=this._easing(Math.min(1,Math.max(0,w))),this._target[u]=this._fn(f,s,w)}wait(){const i=this._promises||(this._promises=[]);return new Promise((l,c)=>{i.push({res:l,rej:c})})}_notify(i){const l=i?"res":"rej",c=this._promises||[];for(let u=0;u<c.length;u++)c[u][l]()}}class ob{constructor(i,l){this._chart=i,this._properties=new Map,this.configure(l)}configure(i){if(!Dt(i))return;const l=Object.keys(Ci.animation),c=this._properties;Object.getOwnPropertyNames(i).forEach(u=>{const f=i[u];if(!Dt(f))return;const h={};for(const s of l)h[s]=f[s];(Pi(f.properties)&&f.properties||[u]).forEach(s=>{(s===u||!c.has(s))&&c.set(s,h)})})}_animateOptions(i,l){const c=l.options,u=cT(i,c);if(!u)return[];const f=this._createAnimations(u,c);return c.$shared&&dT(i.options.$animations,c).then(()=>{i.options=c},()=>{}),f}_createAnimations(i,l){const c=this._properties,u=[],f=i.$animations||(i.$animations={}),h=Object.keys(l),s=Date.now();let w;for(w=h.length-1;w>=0;--w){const T=h[w];if(T.charAt(0)==="$")continue;if(T==="options"){u.push(...this._animateOptions(i,l));continue}const E=l[T];let z=f[T];const O=c.get(T);if(z)if(O&&z.active()){z.update(O,E,s);continue}else z.cancel();if(!O||!O.duration){i[T]=E;continue}f[T]=z=new uT(O,i,T,E),u.push(z)}return u}update(i,l){if(this._properties.size===0){Object.assign(i,l);return}const c=this._createAnimations(i,l);if(c.length)return Pr.add(this._chart,c),!0}}function dT(r,i){const l=[],c=Object.keys(i);for(let u=0;u<c.length;u++){const f=r[c[u]];f&&f.active()&&l.push(f.wait())}return Promise.all(l)}function cT(r,i){if(!i)return;let l=r.options;if(!l){r.options=i;return}return l.$shared&&(r.options=l=Object.assign({},l,{$shared:!1,$animations:{}})),l}function yv(r,i){const l=r&&r.options||{},c=l.reverse,u=l.min===void 0?i:0,f=l.max===void 0?i:0;return{start:c?f:u,end:c?u:f}}function hT(r,i,l){if(l===!1)return!1;const c=yv(r,l),u=yv(i,l);return{top:u.end,right:c.end,bottom:u.start,left:c.start}}function fT(r){let i,l,c,u;return Dt(r)?(i=r.top,l=r.right,c=r.bottom,u=r.left):i=l=c=u=r,{top:i,right:l,bottom:c,left:u,disabled:r===!1}}function lb(r,i){const l=[],c=r._getSortedDatasetMetas(i);let u,f;for(u=0,f=c.length;u<f;++u)l.push(c[u].index);return l}function vv(r,i,l,c={}){const u=r.keys,f=c.mode==="single";let h,s,w,T;if(i===null)return;let E=!1;for(h=0,s=u.length;h<s;++h){if(w=+u[h],w===l){if(E=!0,c.all)continue;break}T=r.values[w],$i(T)&&(f||i===0||Qa(i)===Qa(T))&&(i+=T)}return!E&&!c.all?0:i}function pT(r,i){const{iScale:l,vScale:c}=i,u=l.axis==="x"?"x":"y",f=c.axis==="x"?"x":"y",h=Object.keys(r),s=new Array(h.length);let w,T,E;for(w=0,T=h.length;w<T;++w)E=h[w],s[w]={[u]:E,[f]:r[E]};return s}function rm(r,i){const l=r&&r.options.stacked;return l||l===void 0&&i.stack!==void 0}function mT(r,i,l){return`${r.id}.${i.id}.${l.stack||l.type}`}function gT(r){const{min:i,max:l,minDefined:c,maxDefined:u}=r.getUserBounds();return{min:c?i:Number.NEGATIVE_INFINITY,max:u?l:Number.POSITIVE_INFINITY}}function _T(r,i,l){const c=r[i]||(r[i]={});return c[l]||(c[l]={})}function xv(r,i,l,c){for(const u of i.getMatchingVisibleMetas(c).reverse()){const f=r[u.index];if(l&&f>0||!l&&f<0)return u.index}return null}function bv(r,i){const{chart:l,_cachedMeta:c}=r,u=l._stacks||(l._stacks={}),{iScale:f,vScale:h,index:s}=c,w=f.axis,T=h.axis,E=mT(f,h,c),z=i.length;let O;for(let W=0;W<z;++W){const Q=i[W],{[w]:te,[T]:U}=Q,_e=Q._stacks||(Q._stacks={});O=_e[T]=_T(u,E,te),O[s]=U,O._top=xv(O,h,!0,c.type),O._bottom=xv(O,h,!1,c.type);const pe=O._visualValues||(O._visualValues={});pe[s]=U}}function sm(r,i){const l=r.scales;return Object.keys(l).filter(c=>l[c].axis===i).shift()}function yT(r,i){return Ms(r,{active:!1,dataset:void 0,datasetIndex:i,index:i,mode:"default",type:"dataset"})}function vT(r,i,l){return Ms(r,{active:!1,dataIndex:i,parsed:void 0,raw:void 0,element:l,index:i,mode:"default",type:"data"})}function Pd(r,i){const l=r.controller.index,c=r.vScale&&r.vScale.axis;if(c){i=i||r._parsed;for(const u of i){const f=u._stacks;if(!f||f[c]===void 0||f[c][l]===void 0)return;delete f[c][l],f[c]._visualValues!==void 0&&f[c]._visualValues[l]!==void 0&&delete f[c]._visualValues[l]}}}const om=r=>r==="reset"||r==="none",wv=(r,i)=>i?r:Object.assign({},r),xT=(r,i,l)=>r&&!i.hidden&&i._stacked&&{keys:lb(l,!0),values:null};class Ps{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(i,l){this.chart=i,this._ctx=i.ctx,this.index=l,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const i=this._cachedMeta;this.configure(),this.linkScales(),i._stacked=rm(i.vScale,i),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(i){this.index!==i&&Pd(this._cachedMeta),this.index=i}linkScales(){const i=this.chart,l=this._cachedMeta,c=this.getDataset(),u=(z,O,W,Q)=>z==="x"?O:z==="r"?Q:W,f=l.xAxisID=wt(c.xAxisID,sm(i,"x")),h=l.yAxisID=wt(c.yAxisID,sm(i,"y")),s=l.rAxisID=wt(c.rAxisID,sm(i,"r")),w=l.indexAxis,T=l.iAxisID=u(w,f,h,s),E=l.vAxisID=u(w,h,f,s);l.xScale=this.getScaleForId(f),l.yScale=this.getScaleForId(h),l.rScale=this.getScaleForId(s),l.iScale=this.getScaleForId(T),l.vScale=this.getScaleForId(E)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(i){return this.chart.scales[i]}_getOtherScale(i){const l=this._cachedMeta;return i===l.iScale?l.vScale:l.iScale}reset(){this._update("reset")}_destroy(){const i=this._cachedMeta;this._data&&av(this._data,this),i._stacked&&Pd(i)}_dataCheck(){const i=this.getDataset(),l=i.data||(i.data=[]),c=this._data;if(Dt(l)){const u=this._cachedMeta;this._data=pT(l,u)}else if(c!==l){if(c){av(c,this);const u=this._cachedMeta;Pd(u),u._parsed=[]}l&&Object.isExtensible(l)&&aS(l,this),this._syncList=[],this._data=l}}addElements(){const i=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(i.dataset=new this.datasetElementType)}buildOrUpdateElements(i){const l=this._cachedMeta,c=this.getDataset();let u=!1;this._dataCheck();const f=l._stacked;l._stacked=rm(l.vScale,l),l.stack!==c.stack&&(u=!0,Pd(l),l.stack=c.stack),this._resyncElements(i),(u||f!==l._stacked)&&(bv(this,l._parsed),l._stacked=rm(l.vScale,l))}configure(){const i=this.chart.config,l=i.datasetScopeKeys(this._type),c=i.getOptionScopes(this.getDataset(),l,!0);this.options=i.createResolver(c,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(i,l){const{_cachedMeta:c,_data:u}=this,{iScale:f,_stacked:h}=c,s=f.axis;let w=i===0&&l===u.length?!0:c._sorted,T=i>0&&c._parsed[i-1],E,z,O;if(this._parsing===!1)c._parsed=u,c._sorted=!0,O=u;else{Pi(u[i])?O=this.parseArrayData(c,u,i,l):Dt(u[i])?O=this.parseObjectData(c,u,i,l):O=this.parsePrimitiveData(c,u,i,l);const W=()=>z[s]===null||T&&z[s]<T[s];for(E=0;E<l;++E)c._parsed[E+i]=z=O[E],w&&(W()&&(w=!1),T=z);c._sorted=w}h&&bv(this,O)}parsePrimitiveData(i,l,c,u){const{iScale:f,vScale:h}=i,s=f.axis,w=h.axis,T=f.getLabels(),E=f===h,z=new Array(u);let O,W,Q;for(O=0,W=u;O<W;++O)Q=O+c,z[O]={[s]:E||f.parse(T[Q],Q),[w]:h.parse(l[Q],Q)};return z}parseArrayData(i,l,c,u){const{xScale:f,yScale:h}=i,s=new Array(u);let w,T,E,z;for(w=0,T=u;w<T;++w)E=w+c,z=l[E],s[w]={x:f.parse(z[0],E),y:h.parse(z[1],E)};return s}parseObjectData(i,l,c,u){const{xScale:f,yScale:h}=i,{xAxisKey:s="x",yAxisKey:w="y"}=this._parsing,T=new Array(u);let E,z,O,W;for(E=0,z=u;E<z;++E)O=E+c,W=l[O],T[E]={x:f.parse(ws(W,s),O),y:h.parse(ws(W,w),O)};return T}getParsed(i){return this._cachedMeta._parsed[i]}getDataElement(i){return this._cachedMeta.data[i]}applyStack(i,l,c){const u=this.chart,f=this._cachedMeta,h=l[i.axis],s={keys:lb(u,!0),values:l._stacks[i.axis]._visualValues};return vv(s,h,f.index,{mode:c})}updateRangeFromParsed(i,l,c,u){const f=c[l.axis];let h=f===null?NaN:f;const s=u&&c._stacks[l.axis];u&&s&&(u.values=s,h=vv(u,f,this._cachedMeta.index)),i.min=Math.min(i.min,h),i.max=Math.max(i.max,h)}getMinMax(i,l){const c=this._cachedMeta,u=c._parsed,f=c._sorted&&i===c.iScale,h=u.length,s=this._getOtherScale(i),w=xT(l,c,this.chart),T={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:E,max:z}=gT(s);let O,W;function Q(){W=u[O];const te=W[s.axis];return!$i(W[i.axis])||E>te||z<te}for(O=0;O<h&&!(!Q()&&(this.updateRangeFromParsed(T,i,W,w),f));++O);if(f){for(O=h-1;O>=0;--O)if(!Q()){this.updateRangeFromParsed(T,i,W,w);break}}return T}getAllParsedValues(i){const l=this._cachedMeta._parsed,c=[];let u,f,h;for(u=0,f=l.length;u<f;++u)h=l[u][i.axis],$i(h)&&c.push(h);return c}getMaxOverflow(){return!1}getLabelAndValue(i){const l=this._cachedMeta,c=l.iScale,u=l.vScale,f=this.getParsed(i);return{label:c?""+c.getLabelForValue(f[c.axis]):"",value:u?""+u.getLabelForValue(f[u.axis]):""}}_update(i){const l=this._cachedMeta;this.update(i||"default"),l._clip=fT(wt(this.options.clip,hT(l.xScale,l.yScale,this.getMaxOverflow())))}update(i){}draw(){const i=this._ctx,l=this.chart,c=this._cachedMeta,u=c.data||[],f=l.chartArea,h=[],s=this._drawStart||0,w=this._drawCount||u.length-s,T=this.options.drawActiveElementsOnTop;let E;for(c.dataset&&c.dataset.draw(i,f,s,w),E=s;E<s+w;++E){const z=u[E];z.hidden||(z.active&&T?h.push(z):z.draw(i,f))}for(E=0;E<h.length;++E)h[E].draw(i,f)}getStyle(i,l){const c=l?"active":"default";return i===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(c):this.resolveDataElementOptions(i||0,c)}getContext(i,l,c){const u=this.getDataset();let f;if(i>=0&&i<this._cachedMeta.data.length){const h=this._cachedMeta.data[i];f=h.$context||(h.$context=vT(this.getContext(),i,h)),f.parsed=this.getParsed(i),f.raw=u.data[i],f.index=f.dataIndex=i}else f=this.$context||(this.$context=yT(this.chart.getContext(),this.index)),f.dataset=u,f.index=f.datasetIndex=this.index;return f.active=!!l,f.mode=c,f}resolveDatasetElementOptions(i){return this._resolveElementOptions(this.datasetElementType.id,i)}resolveDataElementOptions(i,l){return this._resolveElementOptions(this.dataElementType.id,l,i)}_resolveElementOptions(i,l="default",c){const u=l==="active",f=this._cachedDataOpts,h=i+"-"+l,s=f[h],w=this.enableOptionSharing&&Zd(c);if(s)return wv(s,w);const T=this.chart.config,E=T.datasetElementScopeKeys(this._type,i),z=u?[`${i}Hover`,"hover",i,""]:[i,""],O=T.getOptionScopes(this.getDataset(),E),W=Object.keys(Ci.elements[i]),Q=()=>this.getContext(c,u,l),te=T.resolveNamedOptions(O,W,Q,z);return te.$shared&&(te.$shared=w,f[h]=Object.freeze(wv(te,w))),te}_resolveAnimations(i,l,c){const u=this.chart,f=this._cachedDataOpts,h=`animation-${l}`,s=f[h];if(s)return s;let w;if(u.options.animation!==!1){const E=this.chart.config,z=E.datasetAnimationScopeKeys(this._type,l),O=E.getOptionScopes(this.getDataset(),z);w=E.createResolver(O,this.getContext(i,c,l))}const T=new ob(u,w&&w.animations);return w&&w._cacheable&&(f[h]=Object.freeze(T)),T}getSharedOptions(i){if(i.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},i))}includeOptions(i,l){return!l||om(i)||this.chart._animationsDisabled}_getSharedOptions(i,l){const c=this.resolveDataElementOptions(i,l),u=this._sharedOptions,f=this.getSharedOptions(c),h=this.includeOptions(l,f)||f!==u;return this.updateSharedOptions(f,l,c),{sharedOptions:f,includeOptions:h}}updateElement(i,l,c,u){om(u)?Object.assign(i,c):this._resolveAnimations(l,u).update(i,c)}updateSharedOptions(i,l,c){i&&!om(l)&&this._resolveAnimations(void 0,l).update(i,c)}_setStyle(i,l,c,u){i.active=u;const f=this.getStyle(l,u);this._resolveAnimations(l,c,u).update(i,{options:!u&&this.getSharedOptions(f)||f})}removeHoverStyle(i,l,c){this._setStyle(i,c,"active",!1)}setHoverStyle(i,l,c){this._setStyle(i,c,"active",!0)}_removeDatasetHoverStyle(){const i=this._cachedMeta.dataset;i&&this._setStyle(i,void 0,"active",!1)}_setDatasetHoverStyle(){const i=this._cachedMeta.dataset;i&&this._setStyle(i,void 0,"active",!0)}_resyncElements(i){const l=this._data,c=this._cachedMeta.data;for(const[s,w,T]of this._syncList)this[s](w,T);this._syncList=[];const u=c.length,f=l.length,h=Math.min(f,u);h&&this.parse(0,h),f>u?this._insertElements(u,f-u,i):f<u&&this._removeElements(f,u-f)}_insertElements(i,l,c=!0){const u=this._cachedMeta,f=u.data,h=i+l;let s;const w=T=>{for(T.length+=l,s=T.length-1;s>=h;s--)T[s]=T[s-l]};for(w(f),s=i;s<h;++s)f[s]=new this.dataElementType;this._parsing&&w(u._parsed),this.parse(i,l),c&&this.updateElements(f,i,l,"reset")}updateElements(i,l,c,u){}_removeElements(i,l){const c=this._cachedMeta;if(this._parsing){const u=c._parsed.splice(i,l);c._stacked&&Pd(c,u)}c.data.splice(i,l)}_sync(i){if(this._parsing)this._syncList.push(i);else{const[l,c,u]=i;this[l](c,u)}this.chart._dataChanges.push([this.index,...i])}_onDataPush(){const i=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-i,i])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(i,l){l&&this._sync(["_removeElements",i,l]);const c=arguments.length-2;c&&this._sync(["_insertElements",i,c])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function bT(r,i){if(!r._cache.$bar){const l=r.getMatchingVisibleMetas(i);let c=[];for(let u=0,f=l.length;u<f;u++)c=c.concat(l[u].controller.getAllParsedValues(r));r._cache.$bar=Vx(c.sort((u,f)=>u-f))}return r._cache.$bar}function wT(r){const i=r.iScale,l=bT(i,r.type);let c=i._length,u,f,h,s;const w=()=>{h===32767||h===-32768||(Zd(s)&&(c=Math.min(c,Math.abs(h-s)||c)),s=h)};for(u=0,f=l.length;u<f;++u)h=i.getPixelForValue(l[u]),w();for(s=void 0,u=0,f=i.ticks.length;u<f;++u)h=i.getPixelForTick(u),w();return c}function kT(r,i,l,c){const u=l.barThickness;let f,h;return Lt(u)?(f=i.min*l.categoryPercentage,h=l.barPercentage):(f=u*c,h=1),{chunk:f/c,ratio:h,start:i.pixels[r]-f/2}}function ST(r,i,l,c){const u=i.pixels,f=u[r];let h=r>0?u[r-1]:null,s=r<u.length-1?u[r+1]:null;const w=l.categoryPercentage;h===null&&(h=f-(s===null?i.end-i.start:s-f)),s===null&&(s=f+f-h);const T=f-(f-Math.min(h,s))/2*w;return{chunk:Math.abs(s-h)/2*w/c,ratio:l.barPercentage,start:T}}function TT(r,i,l,c){const u=l.parse(r[0],c),f=l.parse(r[1],c),h=Math.min(u,f),s=Math.max(u,f);let w=h,T=s;Math.abs(h)>Math.abs(s)&&(w=s,T=h),i[l.axis]=T,i._custom={barStart:w,barEnd:T,start:u,end:f,min:h,max:s}}function ub(r,i,l,c){return Pi(r)?TT(r,i,l,c):i[l.axis]=l.parse(r,c),i}function kv(r,i,l,c){const u=r.iScale,f=r.vScale,h=u.getLabels(),s=u===f,w=[];let T,E,z,O;for(T=l,E=l+c;T<E;++T)O=i[T],z={},z[u.axis]=s||u.parse(h[T],T),w.push(ub(O,z,f,T));return w}function lm(r){return r&&r.barStart!==void 0&&r.barEnd!==void 0}function MT(r,i,l){return r!==0?Qa(r):(i.isHorizontal()?1:-1)*(i.min>=l?1:-1)}function PT(r){let i,l,c,u,f;return r.horizontal?(i=r.base>r.x,l="left",c="right"):(i=r.base<r.y,l="bottom",c="top"),i?(u="end",f="start"):(u="start",f="end"),{start:l,end:c,reverse:i,top:u,bottom:f}}function CT(r,i,l,c){let u=i.borderSkipped;const f={};if(!u){r.borderSkipped=f;return}if(u===!0){r.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:h,end:s,reverse:w,top:T,bottom:E}=PT(r);u==="middle"&&l&&(r.enableBorderRadius=!0,(l._top||0)===c?u=T:(l._bottom||0)===c?u=E:(f[Sv(E,h,s,w)]=!0,u=T)),f[Sv(u,h,s,w)]=!0,r.borderSkipped=f}function Sv(r,i,l,c){return c?(r=ET(r,i,l),r=Tv(r,l,i)):r=Tv(r,i,l),r}function ET(r,i,l){return r===i?l:r===l?i:r}function Tv(r,i,l){return r==="start"?i:r==="end"?l:r}function LT(r,{inflateAmount:i},l){r.inflateAmount=i==="auto"?l===1?.33:0:i}class DT extends Ps{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(i,l,c,u){return kv(i,l,c,u)}parseArrayData(i,l,c,u){return kv(i,l,c,u)}parseObjectData(i,l,c,u){const{iScale:f,vScale:h}=i,{xAxisKey:s="x",yAxisKey:w="y"}=this._parsing,T=f.axis==="x"?s:w,E=h.axis==="x"?s:w,z=[];let O,W,Q,te;for(O=c,W=c+u;O<W;++O)te=l[O],Q={},Q[f.axis]=f.parse(ws(te,T),O),z.push(ub(ws(te,E),Q,h,O));return z}updateRangeFromParsed(i,l,c,u){super.updateRangeFromParsed(i,l,c,u);const f=c._custom;f&&l===this._cachedMeta.vScale&&(i.min=Math.min(i.min,f.min),i.max=Math.max(i.max,f.max))}getMaxOverflow(){return 0}getLabelAndValue(i){const l=this._cachedMeta,{iScale:c,vScale:u}=l,f=this.getParsed(i),h=f._custom,s=lm(h)?"["+h.start+", "+h.end+"]":""+u.getLabelForValue(f[u.axis]);return{label:""+c.getLabelForValue(f[c.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();const i=this._cachedMeta;i.stack=this.getDataset().stack}update(i){const l=this._cachedMeta;this.updateElements(l.data,0,l.data.length,i)}updateElements(i,l,c,u){const f=u==="reset",{index:h,_cachedMeta:{vScale:s}}=this,w=s.getBasePixel(),T=s.isHorizontal(),E=this._getRuler(),{sharedOptions:z,includeOptions:O}=this._getSharedOptions(l,u);for(let W=l;W<l+c;W++){const Q=this.getParsed(W),te=f||Lt(Q[s.axis])?{base:w,head:w}:this._calculateBarValuePixels(W),U=this._calculateBarIndexPixels(W,E),_e=(Q._stacks||{})[s.axis],pe={horizontal:T,base:te.base,enableBorderRadius:!_e||lm(Q._custom)||h===_e._top||h===_e._bottom,x:T?te.head:U.center,y:T?U.center:te.head,height:T?U.size:Math.abs(te.size),width:T?Math.abs(te.size):U.size};O&&(pe.options=z||this.resolveDataElementOptions(W,i[W].active?"active":u));const xe=pe.options||i[W].options;CT(pe,xe,_e,h),LT(pe,xe,E.ratio),this.updateElement(i[W],W,pe,u)}}_getStacks(i,l){const{iScale:c}=this._cachedMeta,u=c.getMatchingVisibleMetas(this._type).filter(E=>E.controller.options.grouped),f=c.options.stacked,h=[],s=this._cachedMeta.controller.getParsed(l),w=s&&s[c.axis],T=E=>{const z=E._parsed.find(W=>W[c.axis]===w),O=z&&z[E.vScale.axis];if(Lt(O)||isNaN(O))return!0};for(const E of u)if(!(l!==void 0&&T(E))&&((f===!1||h.indexOf(E.stack)===-1||f===void 0&&E.stack===void 0)&&h.push(E.stack),E.index===i))break;return h.length||h.push(void 0),h}_getStackCount(i){return this._getStacks(void 0,i).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const i=this.chart.scales,l=this.chart.options.indexAxis;return Object.keys(i).filter(c=>i[c].axis===l).shift()}_getAxis(){const i={},l=this.getFirstScaleIdForIndexAxis();for(const c of this.chart.data.datasets)i[wt(this.chart.options.indexAxis==="x"?c.xAxisID:c.yAxisID,l)]=!0;return Object.keys(i)}_getStackIndex(i,l,c){const u=this._getStacks(i,c),f=l!==void 0?u.indexOf(l):-1;return f===-1?u.length-1:f}_getRuler(){const i=this.options,l=this._cachedMeta,c=l.iScale,u=[];let f,h;for(f=0,h=l.data.length;f<h;++f)u.push(c.getPixelForValue(this.getParsed(f)[c.axis],f));const s=i.barThickness;return{min:s||wT(l),pixels:u,start:c._startPixel,end:c._endPixel,stackCount:this._getStackCount(),scale:c,grouped:i.grouped,ratio:s?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(i){const{_cachedMeta:{vScale:l,_stacked:c,index:u},options:{base:f,minBarLength:h}}=this,s=f||0,w=this.getParsed(i),T=w._custom,E=lm(T);let z=w[l.axis],O=0,W=c?this.applyStack(l,w,c):z,Q,te;W!==z&&(O=W-z,W=z),E&&(z=T.barStart,W=T.barEnd-T.barStart,z!==0&&Qa(z)!==Qa(T.barEnd)&&(O=0),O+=z);const U=!Lt(f)&&!E?f:O;let _e=l.getPixelForValue(U);if(this.chart.getDataVisibility(i)?Q=l.getPixelForValue(O+W):Q=_e,te=Q-_e,Math.abs(te)<h){te=MT(te,l,s)*h,z===s&&(_e-=te/2);const pe=l.getPixelForDecimal(0),xe=l.getPixelForDecimal(1),Ae=Math.min(pe,xe),ze=Math.max(pe,xe);_e=Math.max(Math.min(_e,ze),Ae),Q=_e+te,c&&!E&&(w._stacks[l.axis]._visualValues[u]=l.getValueForPixel(Q)-l.getValueForPixel(_e))}if(_e===l.getPixelForValue(s)){const pe=Qa(te)*l.getLineWidthForValue(s)/2;_e+=pe,te-=pe}return{size:te,base:_e,head:Q,center:Q+te/2}}_calculateBarIndexPixels(i,l){const c=l.scale,u=this.options,f=u.skipNull,h=wt(u.maxBarThickness,1/0);let s,w;const T=this._getAxisCount();if(l.grouped){const E=f?this._getStackCount(i):l.stackCount,z=u.barThickness==="flex"?ST(i,l,u,E*T):kT(i,l,u,E*T),O=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,W=this._getAxis().indexOf(wt(O,this.getFirstScaleIdForIndexAxis())),Q=this._getStackIndex(this.index,this._cachedMeta.stack,f?i:void 0)+W;s=z.start+z.chunk*Q+z.chunk/2,w=Math.min(h,z.chunk*z.ratio)}else s=c.getPixelForValue(this.getParsed(i)[c.axis],i),w=Math.min(h,l.min*l.ratio);return{base:s-w/2,head:s+w/2,center:s,size:w}}draw(){const i=this._cachedMeta,l=i.vScale,c=i.data,u=c.length;let f=0;for(;f<u;++f)this.getParsed(f)[l.axis]!==null&&!c[f].hidden&&c[f].draw(this._ctx)}}class AT extends Ps{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(i,l,c,u){const f=super.parsePrimitiveData(i,l,c,u);for(let h=0;h<f.length;h++)f[h]._custom=this.resolveDataElementOptions(h+c).radius;return f}parseArrayData(i,l,c,u){const f=super.parseArrayData(i,l,c,u);for(let h=0;h<f.length;h++){const s=l[c+h];f[h]._custom=wt(s[2],this.resolveDataElementOptions(h+c).radius)}return f}parseObjectData(i,l,c,u){const f=super.parseObjectData(i,l,c,u);for(let h=0;h<f.length;h++){const s=l[c+h];f[h]._custom=wt(s&&s.r&&+s.r,this.resolveDataElementOptions(h+c).radius)}return f}getMaxOverflow(){const i=this._cachedMeta.data;let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}getLabelAndValue(i){const l=this._cachedMeta,c=this.chart.data.labels||[],{xScale:u,yScale:f}=l,h=this.getParsed(i),s=u.getLabelForValue(h.x),w=f.getLabelForValue(h.y),T=h._custom;return{label:c[i]||"",value:"("+s+", "+w+(T?", "+T:"")+")"}}update(i){const l=this._cachedMeta.data;this.updateElements(l,0,l.length,i)}updateElements(i,l,c,u){const f=u==="reset",{iScale:h,vScale:s}=this._cachedMeta,{sharedOptions:w,includeOptions:T}=this._getSharedOptions(l,u),E=h.axis,z=s.axis;for(let O=l;O<l+c;O++){const W=i[O],Q=!f&&this.getParsed(O),te={},U=te[E]=f?h.getPixelForDecimal(.5):h.getPixelForValue(Q[E]),_e=te[z]=f?s.getBasePixel():s.getPixelForValue(Q[z]);te.skip=isNaN(U)||isNaN(_e),T&&(te.options=w||this.resolveDataElementOptions(O,W.active?"active":u),f&&(te.options.radius=0)),this.updateElement(W,O,te,u)}}resolveDataElementOptions(i,l){const c=this.getParsed(i);let u=super.resolveDataElementOptions(i,l);u.$shared&&(u=Object.assign({},u,{$shared:!1}));const f=u.radius;return l!=="active"&&(u.radius=0),u.radius+=wt(c&&c._custom,f),u}}function IT(r,i,l){let c=1,u=1,f=0,h=0;if(i<xi){const s=r,w=s+i,T=Math.cos(s),E=Math.sin(s),z=Math.cos(w),O=Math.sin(w),W=(xe,Ae,ze)=>Kd(xe,s,w,!0)?1:Math.max(Ae,Ae*l,ze,ze*l),Q=(xe,Ae,ze)=>Kd(xe,s,w,!0)?-1:Math.min(Ae,Ae*l,ze,ze*l),te=W(0,T,z),U=W(Ni,E,O),_e=Q(Bt,T,z),pe=Q(Bt+Ni,E,O);c=(te-_e)/2,u=(U-pe)/2,f=-(te+_e)/2,h=-(U+pe)/2}return{ratioX:c,ratioY:u,offsetX:f,offsetY:h}}class ug extends Ps{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:i=>i!=="spacing",_indexable:i=>i!=="spacing"&&!i.startsWith("borderDash")&&!i.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const l=i.data,{labels:{pointStyle:c,textAlign:u,color:f,useBorderRadius:h,borderRadius:s}}=i.legend.options;return l.labels.length&&l.datasets.length?l.labels.map((w,T)=>{const z=i.getDatasetMeta(0).controller.getStyle(T);return{text:w,fillStyle:z.backgroundColor,fontColor:f,hidden:!i.getDataVisibility(T),lineDash:z.borderDash,lineDashOffset:z.borderDashOffset,lineJoin:z.borderJoinStyle,lineWidth:z.borderWidth,strokeStyle:z.borderColor,textAlign:u,pointStyle:c,borderRadius:h&&(s||z.borderRadius),index:T}}):[]}},onClick(i,l,c){c.chart.toggleDataVisibility(l.index),c.chart.update()}}}};constructor(i,l){super(i,l),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(i,l){const c=this.getDataset().data,u=this._cachedMeta;if(this._parsing===!1)u._parsed=c;else{let f=w=>+c[w];if(Dt(c[i])){const{key:w="value"}=this._parsing;f=T=>+ws(c[T],w)}let h,s;for(h=i,s=i+l;h<s;++h)u._parsed[h]=f(h)}}_getRotation(){return Da(this.options.rotation-90)}_getCircumference(){return Da(this.options.circumference)}_getRotationExtents(){let i=xi,l=-xi;for(let c=0;c<this.chart.data.datasets.length;++c)if(this.chart.isDatasetVisible(c)&&this.chart.getDatasetMeta(c).type===this._type){const u=this.chart.getDatasetMeta(c).controller,f=u._getRotation(),h=u._getCircumference();i=Math.min(i,f),l=Math.max(l,f+h)}return{rotation:i,circumference:l-i}}update(i){const l=this.chart,{chartArea:c}=l,u=this._cachedMeta,f=u.data,h=this.getMaxBorderWidth()+this.getMaxOffset(f)+this.options.spacing,s=Math.max((Math.min(c.width,c.height)-h)/2,0),w=Math.min(Uk(this.options.cutout,s),1),T=this._getRingWeight(this.index),{circumference:E,rotation:z}=this._getRotationExtents(),{ratioX:O,ratioY:W,offsetX:Q,offsetY:te}=IT(z,E,w),U=(c.width-h)/O,_e=(c.height-h)/W,pe=Math.max(Math.min(U,_e)/2,0),xe=Fx(this.options.radius,pe),Ae=Math.max(xe*w,0),ze=(xe-Ae)/this._getVisibleDatasetWeightTotal();this.offsetX=Q*xe,this.offsetY=te*xe,u.total=this.calculateTotal(),this.outerRadius=xe-ze*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ze*T,0),this.updateElements(f,0,f.length,i)}_circumference(i,l){const c=this.options,u=this._cachedMeta,f=this._getCircumference();return l&&c.animation.animateRotate||!this.chart.getDataVisibility(i)||u._parsed[i]===null||u.data[i].hidden?0:this.calculateCircumference(u._parsed[i]*f/xi)}updateElements(i,l,c,u){const f=u==="reset",h=this.chart,s=h.chartArea,T=h.options.animation,E=(s.left+s.right)/2,z=(s.top+s.bottom)/2,O=f&&T.animateScale,W=O?0:this.innerRadius,Q=O?0:this.outerRadius,{sharedOptions:te,includeOptions:U}=this._getSharedOptions(l,u);let _e=this._getRotation(),pe;for(pe=0;pe<l;++pe)_e+=this._circumference(pe,f);for(pe=l;pe<l+c;++pe){const xe=this._circumference(pe,f),Ae=i[pe],ze={x:E+this.offsetX,y:z+this.offsetY,startAngle:_e,endAngle:_e+xe,circumference:xe,outerRadius:Q,innerRadius:W};U&&(ze.options=te||this.resolveDataElementOptions(pe,Ae.active?"active":u)),_e+=xe,this.updateElement(Ae,pe,ze,u)}}calculateTotal(){const i=this._cachedMeta,l=i.data;let c=0,u;for(u=0;u<l.length;u++){const f=i._parsed[u];f!==null&&!isNaN(f)&&this.chart.getDataVisibility(u)&&!l[u].hidden&&(c+=Math.abs(f))}return c}calculateCircumference(i){const l=this._cachedMeta.total;return l>0&&!isNaN(i)?xi*(Math.abs(i)/l):0}getLabelAndValue(i){const l=this._cachedMeta,c=this.chart,u=c.data.labels||[],f=tc(l._parsed[i],c.options.locale);return{label:u[i]||"",value:f}}getMaxBorderWidth(i){let l=0;const c=this.chart;let u,f,h,s,w;if(!i){for(u=0,f=c.data.datasets.length;u<f;++u)if(c.isDatasetVisible(u)){h=c.getDatasetMeta(u),i=h.data,s=h.controller;break}}if(!i)return 0;for(u=0,f=i.length;u<f;++u)w=s.resolveDataElementOptions(u),w.borderAlign!=="inner"&&(l=Math.max(l,w.borderWidth||0,w.hoverBorderWidth||0));return l}getMaxOffset(i){let l=0;for(let c=0,u=i.length;c<u;++c){const f=this.resolveDataElementOptions(c);l=Math.max(l,f.offset||0,f.hoverOffset||0)}return l}_getRingWeightOffset(i){let l=0;for(let c=0;c<i;++c)this.chart.isDatasetVisible(c)&&(l+=this._getRingWeight(c));return l}_getRingWeight(i){return Math.max(wt(this.chart.data.datasets[i].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class zT extends Ps{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(i){const l=this._cachedMeta,{dataset:c,data:u=[],_dataset:f}=l,h=this.chart._animationsDisabled;let{start:s,count:w}=Gx(l,u,h);this._drawStart=s,this._drawCount=w,qx(l)&&(s=0,w=u.length),c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!f._decimated,c.points=u;const T=this.resolveDatasetElementOptions(i);this.options.showLine||(T.borderWidth=0),T.segment=this.options.segment,this.updateElement(c,void 0,{animated:!h,options:T},i),this.updateElements(u,s,w,i)}updateElements(i,l,c,u){const f=u==="reset",{iScale:h,vScale:s,_stacked:w,_dataset:T}=this._cachedMeta,{sharedOptions:E,includeOptions:z}=this._getSharedOptions(l,u),O=h.axis,W=s.axis,{spanGaps:Q,segment:te}=this.options,U=iu(Q)?Q:Number.POSITIVE_INFINITY,_e=this.chart._animationsDisabled||f||u==="none",pe=l+c,xe=i.length;let Ae=l>0&&this.getParsed(l-1);for(let ze=0;ze<xe;++ze){const qe=i[ze],Ne=_e?qe:{};if(ze<l||ze>=pe){Ne.skip=!0;continue}const He=this.getParsed(ze),rt=Lt(He[W]),lt=Ne[O]=h.getPixelForValue(He[O],ze),ct=Ne[W]=f||rt?s.getBasePixel():s.getPixelForValue(w?this.applyStack(s,He,w):He[W],ze);Ne.skip=isNaN(lt)||isNaN(ct)||rt,Ne.stop=ze>0&&Math.abs(He[O]-Ae[O])>U,te&&(Ne.parsed=He,Ne.raw=T.data[ze]),z&&(Ne.options=E||this.resolveDataElementOptions(ze,qe.active?"active":u)),_e||this.updateElement(qe,ze,Ne,u),Ae=He}}getMaxOverflow(){const i=this._cachedMeta,l=i.dataset,c=l.options&&l.options.borderWidth||0,u=i.data||[];if(!u.length)return c;const f=u[0].size(this.resolveDataElementOptions(0)),h=u[u.length-1].size(this.resolveDataElementOptions(u.length-1));return Math.max(c,f,h)/2}draw(){const i=this._cachedMeta;i.dataset.updateControlPoints(this.chart.chartArea,i.iScale.axis),super.draw()}}class db extends Ps{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const l=i.data;if(l.labels.length&&l.datasets.length){const{labels:{pointStyle:c,color:u}}=i.legend.options;return l.labels.map((f,h)=>{const w=i.getDatasetMeta(0).controller.getStyle(h);return{text:f,fillStyle:w.backgroundColor,strokeStyle:w.borderColor,fontColor:u,lineWidth:w.borderWidth,pointStyle:c,hidden:!i.getDataVisibility(h),index:h}})}return[]}},onClick(i,l,c){c.chart.toggleDataVisibility(l.index),c.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(i,l){super(i,l),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(i){const l=this._cachedMeta,c=this.chart,u=c.data.labels||[],f=tc(l._parsed[i].r,c.options.locale);return{label:u[i]||"",value:f}}parseObjectData(i,l,c,u){return Qx.bind(this)(i,l,c,u)}update(i){const l=this._cachedMeta.data;this._updateRadius(),this.updateElements(l,0,l.length,i)}getMinMax(){const i=this._cachedMeta,l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return i.data.forEach((c,u)=>{const f=this.getParsed(u).r;!isNaN(f)&&this.chart.getDataVisibility(u)&&(f<l.min&&(l.min=f),f>l.max&&(l.max=f))}),l}_updateRadius(){const i=this.chart,l=i.chartArea,c=i.options,u=Math.min(l.right-l.left,l.bottom-l.top),f=Math.max(u/2,0),h=Math.max(c.cutoutPercentage?f/100*c.cutoutPercentage:1,0),s=(f-h)/i.getVisibleDatasetCount();this.outerRadius=f-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(i,l,c,u){const f=u==="reset",h=this.chart,w=h.options.animation,T=this._cachedMeta.rScale,E=T.xCenter,z=T.yCenter,O=T.getIndexAngle(0)-.5*Bt;let W=O,Q;const te=360/this.countVisibleElements();for(Q=0;Q<l;++Q)W+=this._computeAngle(Q,u,te);for(Q=l;Q<l+c;Q++){const U=i[Q];let _e=W,pe=W+this._computeAngle(Q,u,te),xe=h.getDataVisibility(Q)?T.getDistanceFromCenterForValue(this.getParsed(Q).r):0;W=pe,f&&(w.animateScale&&(xe=0),w.animateRotate&&(_e=pe=O));const Ae={x:E,y:z,innerRadius:0,outerRadius:xe,startAngle:_e,endAngle:pe,options:this.resolveDataElementOptions(Q,U.active?"active":u)};this.updateElement(U,Q,Ae,u)}}countVisibleElements(){const i=this._cachedMeta;let l=0;return i.data.forEach((c,u)=>{!isNaN(this.getParsed(u).r)&&this.chart.getDataVisibility(u)&&l++}),l}_computeAngle(i,l,c){return this.chart.getDataVisibility(i)?Da(this.resolveDataElementOptions(i,l).angle||c):0}}class RT extends ug{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class FT extends Ps{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(i){const l=this._cachedMeta.vScale,c=this.getParsed(i);return{label:l.getLabels()[i],value:""+l.getLabelForValue(c[l.axis])}}parseObjectData(i,l,c,u){return Qx.bind(this)(i,l,c,u)}update(i){const l=this._cachedMeta,c=l.dataset,u=l.data||[],f=l.iScale.getLabels();if(c.points=u,i!=="resize"){const h=this.resolveDatasetElementOptions(i);this.options.showLine||(h.borderWidth=0);const s={_loop:!0,_fullLoop:f.length===u.length,options:h};this.updateElement(c,void 0,s,i)}this.updateElements(u,0,u.length,i)}updateElements(i,l,c,u){const f=this._cachedMeta.rScale,h=u==="reset";for(let s=l;s<l+c;s++){const w=i[s],T=this.resolveDataElementOptions(s,w.active?"active":u),E=f.getPointPositionForValue(s,this.getParsed(s).r),z=h?f.xCenter:E.x,O=h?f.yCenter:E.y,W={x:z,y:O,angle:E.angle,skip:isNaN(z)||isNaN(O),options:T};this.updateElement(w,s,W,u)}}}class jT extends Ps{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(i){const l=this._cachedMeta,c=this.chart.data.labels||[],{xScale:u,yScale:f}=l,h=this.getParsed(i),s=u.getLabelForValue(h.x),w=f.getLabelForValue(h.y);return{label:c[i]||"",value:"("+s+", "+w+")"}}update(i){const l=this._cachedMeta,{data:c=[]}=l,u=this.chart._animationsDisabled;let{start:f,count:h}=Gx(l,c,u);if(this._drawStart=f,this._drawCount=h,qx(l)&&(f=0,h=c.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:w}=l;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!w._decimated,s.points=c;const T=this.resolveDatasetElementOptions(i);T.segment=this.options.segment,this.updateElement(s,void 0,{animated:!u,options:T},i)}else this.datasetElementType&&(delete l.dataset,this.datasetElementType=!1);this.updateElements(c,f,h,i)}addElements(){const{showLine:i}=this.options;!this.datasetElementType&&i&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(i,l,c,u){const f=u==="reset",{iScale:h,vScale:s,_stacked:w,_dataset:T}=this._cachedMeta,E=this.resolveDataElementOptions(l,u),z=this.getSharedOptions(E),O=this.includeOptions(u,z),W=h.axis,Q=s.axis,{spanGaps:te,segment:U}=this.options,_e=iu(te)?te:Number.POSITIVE_INFINITY,pe=this.chart._animationsDisabled||f||u==="none";let xe=l>0&&this.getParsed(l-1);for(let Ae=l;Ae<l+c;++Ae){const ze=i[Ae],qe=this.getParsed(Ae),Ne=pe?ze:{},He=Lt(qe[Q]),rt=Ne[W]=h.getPixelForValue(qe[W],Ae),lt=Ne[Q]=f||He?s.getBasePixel():s.getPixelForValue(w?this.applyStack(s,qe,w):qe[Q],Ae);Ne.skip=isNaN(rt)||isNaN(lt)||He,Ne.stop=Ae>0&&Math.abs(qe[W]-xe[W])>_e,U&&(Ne.parsed=qe,Ne.raw=T.data[Ae]),O&&(Ne.options=z||this.resolveDataElementOptions(Ae,ze.active?"active":u)),pe||this.updateElement(ze,Ae,Ne,u),xe=qe}this.updateSharedOptions(z,u,E)}getMaxOverflow(){const i=this._cachedMeta,l=i.data||[];if(!this.options.showLine){let s=0;for(let w=l.length-1;w>=0;--w)s=Math.max(s,l[w].size(this.resolveDataElementOptions(w))/2);return s>0&&s}const c=i.dataset,u=c.options&&c.options.borderWidth||0;if(!l.length)return u;const f=l[0].size(this.resolveDataElementOptions(0)),h=l[l.length-1].size(this.resolveDataElementOptions(l.length-1));return Math.max(u,f,h)/2}}var OT=Object.freeze({__proto__:null,BarController:DT,BubbleController:AT,DoughnutController:ug,LineController:zT,PieController:RT,PolarAreaController:db,RadarController:FT,ScatterController:jT});function Eo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dg{static override(i){Object.assign(dg.prototype,i)}options;constructor(i){this.options=i||{}}init(){}formats(){return Eo()}parse(){return Eo()}format(){return Eo()}add(){return Eo()}diff(){return Eo()}startOf(){return Eo()}endOf(){return Eo()}}var $T={_date:dg};function BT(r,i,l,c){const{controller:u,data:f,_sorted:h}=r,s=u._cachedMeta.iScale,w=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null;if(s&&i===s.axis&&i!=="r"&&h&&f.length){const T=s._reversePixels?iS:Dr;if(c){if(u._sharedOptions){const E=f[0],z=typeof E.getRange=="function"&&E.getRange(i);if(z){const O=T(f,i,l-z),W=T(f,i,l+z);return{lo:O.lo,hi:W.hi}}}}else{const E=T(f,i,l);if(w){const{vScale:z}=u._cachedMeta,{_parsed:O}=r,W=O.slice(0,E.lo+1).reverse().findIndex(te=>!Lt(te[z.axis]));E.lo-=Math.max(0,W);const Q=O.slice(E.hi).findIndex(te=>!Lt(te[z.axis]));E.hi+=Math.max(0,Q)}return E}}return{lo:0,hi:f.length-1}}function bf(r,i,l,c,u){const f=r.getSortedVisibleDatasetMetas(),h=l[i];for(let s=0,w=f.length;s<w;++s){const{index:T,data:E}=f[s],{lo:z,hi:O}=BT(f[s],i,h,u);for(let W=z;W<=O;++W){const Q=E[W];Q.skip||c(Q,T,W)}}}function VT(r){const i=r.indexOf("x")!==-1,l=r.indexOf("y")!==-1;return function(c,u){const f=i?Math.abs(c.x-u.x):0,h=l?Math.abs(c.y-u.y):0;return Math.sqrt(Math.pow(f,2)+Math.pow(h,2))}}function um(r,i,l,c,u){const f=[];return!u&&!r.isPointInArea(i)||bf(r,l,i,function(s,w,T){!u&&!Ar(s,r.chartArea,0)||s.inRange(i.x,i.y,c)&&f.push({element:s,datasetIndex:w,index:T})},!0),f}function NT(r,i,l,c){let u=[];function f(h,s,w){const{startAngle:T,endAngle:E}=h.getProps(["startAngle","endAngle"],c),{angle:z}=$x(h,{x:i.x,y:i.y});Kd(z,T,E)&&u.push({element:h,datasetIndex:s,index:w})}return bf(r,l,i,f),u}function UT(r,i,l,c,u,f){let h=[];const s=VT(l);let w=Number.POSITIVE_INFINITY;function T(E,z,O){const W=E.inRange(i.x,i.y,u);if(c&&!W)return;const Q=E.getCenterPoint(u);if(!(!!f||r.isPointInArea(Q))&&!W)return;const U=s(i,Q);U<w?(h=[{element:E,datasetIndex:z,index:O}],w=U):U===w&&h.push({element:E,datasetIndex:z,index:O})}return bf(r,l,i,T),h}function dm(r,i,l,c,u,f){return!f&&!r.isPointInArea(i)?[]:l==="r"&&!c?NT(r,i,l,u):UT(r,i,l,c,u,f)}function Mv(r,i,l,c,u){const f=[],h=l==="x"?"inXRange":"inYRange";let s=!1;return bf(r,l,i,(w,T,E)=>{w[h]&&w[h](i[l],u)&&(f.push({element:w,datasetIndex:T,index:E}),s=s||w.inRange(i.x,i.y,u))}),c&&!s?[]:f}var GT={modes:{index(r,i,l,c){const u=Do(i,r),f=l.axis||"x",h=l.includeInvisible||!1,s=l.intersect?um(r,u,f,c,h):dm(r,u,f,!1,c,h),w=[];return s.length?(r.getSortedVisibleDatasetMetas().forEach(T=>{const E=s[0].index,z=T.data[E];z&&!z.skip&&w.push({element:z,datasetIndex:T.index,index:E})}),w):[]},dataset(r,i,l,c){const u=Do(i,r),f=l.axis||"xy",h=l.includeInvisible||!1;let s=l.intersect?um(r,u,f,c,h):dm(r,u,f,!1,c,h);if(s.length>0){const w=s[0].datasetIndex,T=r.getDatasetMeta(w).data;s=[];for(let E=0;E<T.length;++E)s.push({element:T[E],datasetIndex:w,index:E})}return s},point(r,i,l,c){const u=Do(i,r),f=l.axis||"xy",h=l.includeInvisible||!1;return um(r,u,f,c,h)},nearest(r,i,l,c){const u=Do(i,r),f=l.axis||"xy",h=l.includeInvisible||!1;return dm(r,u,f,l.intersect,c,h)},x(r,i,l,c){const u=Do(i,r);return Mv(r,u,"x",l.intersect,c)},y(r,i,l,c){const u=Do(i,r);return Mv(r,u,"y",l.intersect,c)}}};const cb=["left","top","right","bottom"];function Cd(r,i){return r.filter(l=>l.pos===i)}function Pv(r,i){return r.filter(l=>cb.indexOf(l.pos)===-1&&l.box.axis===i)}function Ed(r,i){return r.sort((l,c)=>{const u=i?c:l,f=i?l:c;return u.weight===f.weight?u.index-f.index:u.weight-f.weight})}function qT(r){const i=[];let l,c,u,f,h,s;for(l=0,c=(r||[]).length;l<c;++l)u=r[l],{position:f,options:{stack:h,stackWeight:s=1}}=u,i.push({index:l,box:u,pos:f,horizontal:u.isHorizontal(),weight:u.weight,stack:h&&f+h,stackWeight:s});return i}function WT(r){const i={};for(const l of r){const{stack:c,pos:u,stackWeight:f}=l;if(!c||!cb.includes(u))continue;const h=i[c]||(i[c]={count:0,placed:0,weight:0,size:0});h.count++,h.weight+=f}return i}function HT(r,i){const l=WT(r),{vBoxMaxWidth:c,hBoxMaxHeight:u}=i;let f,h,s;for(f=0,h=r.length;f<h;++f){s=r[f];const{fullSize:w}=s.box,T=l[s.stack],E=T&&s.stackWeight/T.weight;s.horizontal?(s.width=E?E*c:w&&i.availableWidth,s.height=u):(s.width=c,s.height=E?E*u:w&&i.availableHeight)}return l}function ZT(r){const i=qT(r),l=Ed(i.filter(T=>T.box.fullSize),!0),c=Ed(Cd(i,"left"),!0),u=Ed(Cd(i,"right")),f=Ed(Cd(i,"top"),!0),h=Ed(Cd(i,"bottom")),s=Pv(i,"x"),w=Pv(i,"y");return{fullSize:l,leftAndTop:c.concat(f),rightAndBottom:u.concat(w).concat(h).concat(s),chartArea:Cd(i,"chartArea"),vertical:c.concat(u).concat(w),horizontal:f.concat(h).concat(s)}}function Cv(r,i,l,c){return Math.max(r[l],i[l])+Math.max(r[c],i[c])}function hb(r,i){r.top=Math.max(r.top,i.top),r.left=Math.max(r.left,i.left),r.bottom=Math.max(r.bottom,i.bottom),r.right=Math.max(r.right,i.right)}function KT(r,i,l,c){const{pos:u,box:f}=l,h=r.maxPadding;if(!Dt(u)){l.size&&(r[u]-=l.size);const z=c[l.stack]||{size:0,count:1};z.size=Math.max(z.size,l.horizontal?f.height:f.width),l.size=z.size/z.count,r[u]+=l.size}f.getPadding&&hb(h,f.getPadding());const s=Math.max(0,i.outerWidth-Cv(h,r,"left","right")),w=Math.max(0,i.outerHeight-Cv(h,r,"top","bottom")),T=s!==r.w,E=w!==r.h;return r.w=s,r.h=w,l.horizontal?{same:T,other:E}:{same:E,other:T}}function YT(r){const i=r.maxPadding;function l(c){const u=Math.max(i[c]-r[c],0);return r[c]+=u,u}r.y+=l("top"),r.x+=l("left"),l("right"),l("bottom")}function XT(r,i){const l=i.maxPadding;function c(u){const f={left:0,top:0,right:0,bottom:0};return u.forEach(h=>{f[h]=Math.max(i[h],l[h])}),f}return c(r?["left","right"]:["top","bottom"])}function jd(r,i,l,c){const u=[];let f,h,s,w,T,E;for(f=0,h=r.length,T=0;f<h;++f){s=r[f],w=s.box,w.update(s.width||i.w,s.height||i.h,XT(s.horizontal,i));const{same:z,other:O}=KT(i,l,s,c);T|=z&&u.length,E=E||O,w.fullSize||u.push(s)}return T&&jd(u,i,l,c)||E}function Vh(r,i,l,c,u){r.top=l,r.left=i,r.right=i+c,r.bottom=l+u,r.width=c,r.height=u}function Ev(r,i,l,c){const u=l.padding;let{x:f,y:h}=i;for(const s of r){const w=s.box,T=c[s.stack]||{placed:0,weight:1},E=s.stackWeight/T.weight||1;if(s.horizontal){const z=i.w*E,O=T.size||w.height;Zd(T.start)&&(h=T.start),w.fullSize?Vh(w,u.left,h,l.outerWidth-u.right-u.left,O):Vh(w,i.left+T.placed,h,z,O),T.start=h,T.placed+=z,h=w.bottom}else{const z=i.h*E,O=T.size||w.width;Zd(T.start)&&(f=T.start),w.fullSize?Vh(w,f,u.top,O,l.outerHeight-u.bottom-u.top):Vh(w,f,i.top+T.placed,O,z),T.start=f,T.placed+=z,f=w.right}}i.x=f,i.y=h}var An={addBox(r,i){r.boxes||(r.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(l){i.draw(l)}}]},r.boxes.push(i)},removeBox(r,i){const l=r.boxes?r.boxes.indexOf(i):-1;l!==-1&&r.boxes.splice(l,1)},configure(r,i,l){i.fullSize=l.fullSize,i.position=l.position,i.weight=l.weight},update(r,i,l,c){if(!r)return;const u=In(r.options.layout.padding),f=Math.max(i-u.width,0),h=Math.max(l-u.height,0),s=ZT(r.boxes),w=s.vertical,T=s.horizontal;Jt(r.boxes,te=>{typeof te.beforeLayout=="function"&&te.beforeLayout()});const E=w.reduce((te,U)=>U.box.options&&U.box.options.display===!1?te:te+1,0)||1,z=Object.freeze({outerWidth:i,outerHeight:l,padding:u,availableWidth:f,availableHeight:h,vBoxMaxWidth:f/2/E,hBoxMaxHeight:h/2}),O=Object.assign({},u);hb(O,In(c));const W=Object.assign({maxPadding:O,w:f,h,x:u.left,y:u.top},u),Q=HT(w.concat(T),z);jd(s.fullSize,W,z,Q),jd(w,W,z,Q),jd(T,W,z,Q)&&jd(w,W,z,Q),YT(W),Ev(s.leftAndTop,W,z,Q),W.x+=W.w,W.y+=W.h,Ev(s.rightAndBottom,W,z,Q),r.chartArea={left:W.left,top:W.top,right:W.left+W.w,bottom:W.top+W.h,height:W.h,width:W.w},Jt(s.chartArea,te=>{const U=te.box;Object.assign(U,r.chartArea),U.update(W.w,W.h,{left:0,top:0,right:0,bottom:0})})}};class fb{acquireContext(i,l){}releaseContext(i){return!1}addEventListener(i,l,c){}removeEventListener(i,l,c){}getDevicePixelRatio(){return 1}getMaximumSize(i,l,c,u){return l=Math.max(0,l||i.width),c=c||i.height,{width:l,height:Math.max(0,u?Math.floor(l/u):c)}}isAttached(i){return!0}updateConfig(i){}}class JT extends fb{acquireContext(i){return i&&i.getContext&&i.getContext("2d")||null}updateConfig(i){i.options.animation=!1}}const ef="$chartjs",QT={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Lv=r=>r===null||r==="";function e2(r,i){const l=r.style,c=r.getAttribute("height"),u=r.getAttribute("width");if(r[ef]={initial:{height:c,width:u,style:{display:l.display,height:l.height,width:l.width}}},l.display=l.display||"block",l.boxSizing=l.boxSizing||"border-box",Lv(u)){const f=fv(r,"width");f!==void 0&&(r.width=f)}if(Lv(c))if(r.style.height==="")r.height=r.width/(i||2);else{const f=fv(r,"height");f!==void 0&&(r.height=f)}return r}const pb=KS?{passive:!0}:!1;function t2(r,i,l){r&&r.addEventListener(i,l,pb)}function i2(r,i,l){r&&r.canvas&&r.canvas.removeEventListener(i,l,pb)}function n2(r,i){const l=QT[r.type]||r.type,{x:c,y:u}=Do(r,i);return{type:l,chart:i,native:r,x:c!==void 0?c:null,y:u!==void 0?u:null}}function df(r,i){for(const l of r)if(l===i||l.contains(i))return!0}function a2(r,i,l){const c=r.canvas,u=new MutationObserver(f=>{let h=!1;for(const s of f)h=h||df(s.addedNodes,c),h=h&&!df(s.removedNodes,c);h&&l()});return u.observe(document,{childList:!0,subtree:!0}),u}function r2(r,i,l){const c=r.canvas,u=new MutationObserver(f=>{let h=!1;for(const s of f)h=h||df(s.removedNodes,c),h=h&&!df(s.addedNodes,c);h&&l()});return u.observe(document,{childList:!0,subtree:!0}),u}const Xd=new Map;let Dv=0;function mb(){const r=window.devicePixelRatio;r!==Dv&&(Dv=r,Xd.forEach((i,l)=>{l.currentDevicePixelRatio!==r&&i()}))}function s2(r,i){Xd.size||window.addEventListener("resize",mb),Xd.set(r,i)}function o2(r){Xd.delete(r),Xd.size||window.removeEventListener("resize",mb)}function l2(r,i,l){const c=r.canvas,u=c&&lg(c);if(!u)return;const f=Ux((s,w)=>{const T=u.clientWidth;l(s,w),T<u.clientWidth&&l()},window),h=new ResizeObserver(s=>{const w=s[0],T=w.contentRect.width,E=w.contentRect.height;T===0&&E===0||f(T,E)});return h.observe(u),s2(r,f),h}function cm(r,i,l){l&&l.disconnect(),i==="resize"&&o2(r)}function u2(r,i,l){const c=r.canvas,u=Ux(f=>{r.ctx!==null&&l(n2(f,r))},r);return t2(c,i,u),u}class d2 extends fb{acquireContext(i,l){const c=i&&i.getContext&&i.getContext("2d");return c&&c.canvas===i?(e2(i,l),c):null}releaseContext(i){const l=i.canvas;if(!l[ef])return!1;const c=l[ef].initial;["height","width"].forEach(f=>{const h=c[f];Lt(h)?l.removeAttribute(f):l.setAttribute(f,h)});const u=c.style||{};return Object.keys(u).forEach(f=>{l.style[f]=u[f]}),l.width=l.width,delete l[ef],!0}addEventListener(i,l,c){this.removeEventListener(i,l);const u=i.$proxies||(i.$proxies={}),h={attach:a2,detach:r2,resize:l2}[l]||u2;u[l]=h(i,l,c)}removeEventListener(i,l){const c=i.$proxies||(i.$proxies={}),u=c[l];if(!u)return;({attach:cm,detach:cm,resize:cm}[l]||i2)(i,l,u),c[l]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(i,l,c,u){return ZS(i,l,c,u)}isAttached(i){const l=i&&lg(i);return!!(l&&l.isConnected)}}function c2(r){return!og()||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?JT:d2}let zr=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(i){const{x:l,y:c}=this.getProps(["x","y"],i);return{x:l,y:c}}hasValue(){return iu(this.x)&&iu(this.y)}getProps(i,l){const c=this.$animations;if(!l||!c)return this;const u={};return i.forEach(f=>{u[f]=c[f]&&c[f].active()?c[f]._to:this[f]}),u}};function h2(r,i){const l=r.options.ticks,c=f2(r),u=Math.min(l.maxTicksLimit||c,c),f=l.major.enabled?m2(i):[],h=f.length,s=f[0],w=f[h-1],T=[];if(h>u)return g2(i,T,f,h/u),T;const E=p2(f,i,u);if(h>0){let z,O;const W=h>1?Math.round((w-s)/(h-1)):null;for(Nh(i,T,E,Lt(W)?0:s-W,s),z=0,O=h-1;z<O;z++)Nh(i,T,E,f[z],f[z+1]);return Nh(i,T,E,w,Lt(W)?i.length:w+W),T}return Nh(i,T,E),T}function f2(r){const i=r.options.offset,l=r._tickSize(),c=r._length/l+(i?0:1),u=r._maxLength/l;return Math.floor(Math.min(c,u))}function p2(r,i,l){const c=_2(r),u=i.length/l;if(!c)return Math.max(u,1);const f=Xk(c);for(let h=0,s=f.length-1;h<s;h++){const w=f[h];if(w>u)return w}return Math.max(u,1)}function m2(r){const i=[];let l,c;for(l=0,c=r.length;l<c;l++)r[l].major&&i.push(l);return i}function g2(r,i,l,c){let u=0,f=l[0],h;for(c=Math.ceil(c),h=0;h<r.length;h++)h===f&&(i.push(r[h]),u++,f=l[u*c])}function Nh(r,i,l,c,u){const f=wt(c,0),h=Math.min(wt(u,r.length),r.length);let s=0,w,T,E;for(l=Math.ceil(l),u&&(w=u-c,l=w/Math.floor(w/l)),E=f;E<0;)s++,E=Math.round(f+s*l);for(T=Math.max(f,0);T<h;T++)T===E&&(i.push(r[T]),s++,E=Math.round(f+s*l))}function _2(r){const i=r.length;let l,c;if(i<2)return!1;for(c=r[0],l=1;l<i;++l)if(r[l]-r[l-1]!==c)return!1;return c}const y2=r=>r==="left"?"right":r==="right"?"left":r,Av=(r,i,l)=>i==="top"||i==="left"?r[i]+l:r[i]-l,Iv=(r,i)=>Math.min(i||r,r);function zv(r,i){const l=[],c=r.length/i,u=r.length;let f=0;for(;f<u;f+=c)l.push(r[Math.floor(f)]);return l}function v2(r,i,l){const c=r.ticks.length,u=Math.min(i,c-1),f=r._startPixel,h=r._endPixel,s=1e-6;let w=r.getPixelForTick(u),T;if(!(l&&(c===1?T=Math.max(w-f,h-w):i===0?T=(r.getPixelForTick(1)-w)/2:T=(w-r.getPixelForTick(u-1))/2,w+=u<i?T:-T,w<f-s||w>h+s)))return w}function x2(r,i){Jt(r,l=>{const c=l.gc,u=c.length/2;let f;if(u>i){for(f=0;f<u;++f)delete l.data[c[f]];c.splice(0,u)}})}function Ld(r){return r.drawTicks?r.tickLength:0}function Rv(r,i){if(!r.display)return 0;const l=rn(r.font,i),c=In(r.padding);return(Pi(r.text)?r.text.length:1)*l.lineHeight+c.height}function b2(r,i){return Ms(r,{scale:i,type:"scale"})}function w2(r,i,l){return Ms(r,{tick:l,index:i,type:"tick"})}function k2(r,i,l){let c=tg(r);return(l&&i!=="right"||!l&&i==="right")&&(c=y2(c)),c}function S2(r,i,l,c){const{top:u,left:f,bottom:h,right:s,chart:w}=r,{chartArea:T,scales:E}=w;let z=0,O,W,Q;const te=h-u,U=s-f;if(r.isHorizontal()){if(W=Ln(c,f,s),Dt(l)){const _e=Object.keys(l)[0],pe=l[_e];Q=E[_e].getPixelForValue(pe)+te-i}else l==="center"?Q=(T.bottom+T.top)/2+te-i:Q=Av(r,l,i);O=s-f}else{if(Dt(l)){const _e=Object.keys(l)[0],pe=l[_e];W=E[_e].getPixelForValue(pe)-U+i}else l==="center"?W=(T.left+T.right)/2-U+i:W=Av(r,l,i);Q=Ln(c,h,u),z=l==="left"?-Ni:Ni}return{titleX:W,titleY:Q,maxWidth:O,rotation:z}}class Go extends zr{constructor(i){super(),this.id=i.id,this.type=i.type,this.options=void 0,this.ctx=i.ctx,this.chart=i.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(i){this.options=i.setContext(this.getContext()),this.axis=i.axis,this._userMin=this.parse(i.min),this._userMax=this.parse(i.max),this._suggestedMin=this.parse(i.suggestedMin),this._suggestedMax=this.parse(i.suggestedMax)}parse(i,l){return i}getUserBounds(){let{_userMin:i,_userMax:l,_suggestedMin:c,_suggestedMax:u}=this;return i=ha(i,Number.POSITIVE_INFINITY),l=ha(l,Number.NEGATIVE_INFINITY),c=ha(c,Number.POSITIVE_INFINITY),u=ha(u,Number.NEGATIVE_INFINITY),{min:ha(i,c),max:ha(l,u),minDefined:$i(i),maxDefined:$i(l)}}getMinMax(i){let{min:l,max:c,minDefined:u,maxDefined:f}=this.getUserBounds(),h;if(u&&f)return{min:l,max:c};const s=this.getMatchingVisibleMetas();for(let w=0,T=s.length;w<T;++w)h=s[w].controller.getMinMax(this,i),u||(l=Math.min(l,h.min)),f||(c=Math.max(c,h.max));return l=f&&l>c?c:l,c=u&&l>c?l:c,{min:ha(l,ha(c,l)),max:ha(c,ha(l,c))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const i=this.chart.data;return this.options.labels||(this.isHorizontal()?i.xLabels:i.yLabels)||i.labels||[]}getLabelItems(i=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(i))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){hi(this.options.beforeUpdate,[this])}update(i,l,c){const{beginAtZero:u,grace:f,ticks:h}=this.options,s=h.sampleSize;this.beforeUpdate(),this.maxWidth=i,this.maxHeight=l,this._margins=c=Object.assign({left:0,right:0,top:0,bottom:0},c),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+c.left+c.right:this.height+c.top+c.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=MS(this,f,u),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const w=s<this.ticks.length;this._convertTicksToLabels(w?zv(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),h.display&&(h.autoSkip||h.source==="auto")&&(this.ticks=h2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),w&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let i=this.options.reverse,l,c;this.isHorizontal()?(l=this.left,c=this.right):(l=this.top,c=this.bottom,i=!i),this._startPixel=l,this._endPixel=c,this._reversePixels=i,this._length=c-l,this._alignToPixels=this.options.alignToPixels}afterUpdate(){hi(this.options.afterUpdate,[this])}beforeSetDimensions(){hi(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){hi(this.options.afterSetDimensions,[this])}_callHooks(i){this.chart.notifyPlugins(i,this.getContext()),hi(this.options[i],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){hi(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(i){const l=this.options.ticks;let c,u,f;for(c=0,u=i.length;c<u;c++)f=i[c],f.label=hi(l.callback,[f.value,c,i],this)}afterTickToLabelConversion(){hi(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){hi(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const i=this.options,l=i.ticks,c=Iv(this.ticks.length,i.ticks.maxTicksLimit),u=l.minRotation||0,f=l.maxRotation;let h=u,s,w,T;if(!this._isVisible()||!l.display||u>=f||c<=1||!this.isHorizontal()){this.labelRotation=u;return}const E=this._getLabelSizes(),z=E.widest.width,O=E.highest.height,W=hn(this.chart.width-z,0,this.maxWidth);s=i.offset?this.maxWidth/c:W/(c-1),z+6>s&&(s=W/(c-(i.offset?.5:1)),w=this.maxHeight-Ld(i.grid)-l.padding-Rv(i.title,this.chart.options.font),T=Math.sqrt(z*z+O*O),h=Qm(Math.min(Math.asin(hn((E.highest.height+6)/s,-1,1)),Math.asin(hn(w/T,-1,1))-Math.asin(hn(O/T,-1,1)))),h=Math.max(u,Math.min(f,h))),this.labelRotation=h}afterCalculateLabelRotation(){hi(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){hi(this.options.beforeFit,[this])}fit(){const i={width:0,height:0},{chart:l,options:{ticks:c,title:u,grid:f}}=this,h=this._isVisible(),s=this.isHorizontal();if(h){const w=Rv(u,l.options.font);if(s?(i.width=this.maxWidth,i.height=Ld(f)+w):(i.height=this.maxHeight,i.width=Ld(f)+w),c.display&&this.ticks.length){const{first:T,last:E,widest:z,highest:O}=this._getLabelSizes(),W=c.padding*2,Q=Da(this.labelRotation),te=Math.cos(Q),U=Math.sin(Q);if(s){const _e=c.mirror?0:U*z.width+te*O.height;i.height=Math.min(this.maxHeight,i.height+_e+W)}else{const _e=c.mirror?0:te*z.width+U*O.height;i.width=Math.min(this.maxWidth,i.width+_e+W)}this._calculatePadding(T,E,U,te)}}this._handleMargins(),s?(this.width=this._length=l.width-this._margins.left-this._margins.right,this.height=i.height):(this.width=i.width,this.height=this._length=l.height-this._margins.top-this._margins.bottom)}_calculatePadding(i,l,c,u){const{ticks:{align:f,padding:h},position:s}=this.options,w=this.labelRotation!==0,T=s!=="top"&&this.axis==="x";if(this.isHorizontal()){const E=this.getPixelForTick(0)-this.left,z=this.right-this.getPixelForTick(this.ticks.length-1);let O=0,W=0;w?T?(O=u*i.width,W=c*l.height):(O=c*i.height,W=u*l.width):f==="start"?W=l.width:f==="end"?O=i.width:f!=="inner"&&(O=i.width/2,W=l.width/2),this.paddingLeft=Math.max((O-E+h)*this.width/(this.width-E),0),this.paddingRight=Math.max((W-z+h)*this.width/(this.width-z),0)}else{let E=l.height/2,z=i.height/2;f==="start"?(E=0,z=i.height):f==="end"&&(E=l.height,z=0),this.paddingTop=E+h,this.paddingBottom=z+h}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){hi(this.options.afterFit,[this])}isHorizontal(){const{axis:i,position:l}=this.options;return l==="top"||l==="bottom"||i==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(i){this.beforeTickToLabelConversion(),this.generateTickLabels(i);let l,c;for(l=0,c=i.length;l<c;l++)Lt(i[l].label)&&(i.splice(l,1),c--,l--);this.afterTickToLabelConversion()}_getLabelSizes(){let i=this._labelSizes;if(!i){const l=this.options.ticks.sampleSize;let c=this.ticks;l<c.length&&(c=zv(c,l)),this._labelSizes=i=this._computeLabelSizes(c,c.length,this.options.ticks.maxTicksLimit)}return i}_computeLabelSizes(i,l,c){const{ctx:u,_longestTextCache:f}=this,h=[],s=[],w=Math.floor(l/Iv(l,c));let T=0,E=0,z,O,W,Q,te,U,_e,pe,xe,Ae,ze;for(z=0;z<l;z+=w){if(Q=i[z].label,te=this._resolveTickFontOptions(z),u.font=U=te.string,_e=f[U]=f[U]||{data:{},gc:[]},pe=te.lineHeight,xe=Ae=0,!Lt(Q)&&!Pi(Q))xe=lf(u,_e.data,_e.gc,xe,Q),Ae=pe;else if(Pi(Q))for(O=0,W=Q.length;O<W;++O)ze=Q[O],!Lt(ze)&&!Pi(ze)&&(xe=lf(u,_e.data,_e.gc,xe,ze),Ae+=pe);h.push(xe),s.push(Ae),T=Math.max(xe,T),E=Math.max(Ae,E)}x2(f,l);const qe=h.indexOf(T),Ne=s.indexOf(E),He=rt=>({width:h[rt]||0,height:s[rt]||0});return{first:He(0),last:He(l-1),widest:He(qe),highest:He(Ne),widths:h,heights:s}}getLabelForValue(i){return i}getPixelForValue(i,l){return NaN}getValueForPixel(i){}getPixelForTick(i){const l=this.ticks;return i<0||i>l.length-1?null:this.getPixelForValue(l[i].value)}getPixelForDecimal(i){this._reversePixels&&(i=1-i);const l=this._startPixel+i*this._length;return tS(this._alignToPixels?Co(this.chart,l,0):l)}getDecimalForPixel(i){const l=(i-this._startPixel)/this._length;return this._reversePixels?1-l:l}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:i,max:l}=this;return i<0&&l<0?l:i>0&&l>0?i:0}getContext(i){const l=this.ticks||[];if(i>=0&&i<l.length){const c=l[i];return c.$context||(c.$context=w2(this.getContext(),i,c))}return this.$context||(this.$context=b2(this.chart.getContext(),this))}_tickSize(){const i=this.options.ticks,l=Da(this.labelRotation),c=Math.abs(Math.cos(l)),u=Math.abs(Math.sin(l)),f=this._getLabelSizes(),h=i.autoSkipPadding||0,s=f?f.widest.width+h:0,w=f?f.highest.height+h:0;return this.isHorizontal()?w*c>s*u?s/c:w/u:w*u<s*c?w/c:s/u}_isVisible(){const i=this.options.display;return i!=="auto"?!!i:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(i){const l=this.axis,c=this.chart,u=this.options,{grid:f,position:h,border:s}=u,w=f.offset,T=this.isHorizontal(),z=this.ticks.length+(w?1:0),O=Ld(f),W=[],Q=s.setContext(this.getContext()),te=Q.display?Q.width:0,U=te/2,_e=function(Rt){return Co(c,Rt,te)};let pe,xe,Ae,ze,qe,Ne,He,rt,lt,ct,mt,jt;if(h==="top")pe=_e(this.bottom),Ne=this.bottom-O,rt=pe-U,ct=_e(i.top)+U,jt=i.bottom;else if(h==="bottom")pe=_e(this.top),ct=i.top,jt=_e(i.bottom)-U,Ne=pe+U,rt=this.top+O;else if(h==="left")pe=_e(this.right),qe=this.right-O,He=pe-U,lt=_e(i.left)+U,mt=i.right;else if(h==="right")pe=_e(this.left),lt=i.left,mt=_e(i.right)-U,qe=pe+U,He=this.left+O;else if(l==="x"){if(h==="center")pe=_e((i.top+i.bottom)/2+.5);else if(Dt(h)){const Rt=Object.keys(h)[0],Mt=h[Rt];pe=_e(this.chart.scales[Rt].getPixelForValue(Mt))}ct=i.top,jt=i.bottom,Ne=pe+U,rt=Ne+O}else if(l==="y"){if(h==="center")pe=_e((i.left+i.right)/2);else if(Dt(h)){const Rt=Object.keys(h)[0],Mt=h[Rt];pe=_e(this.chart.scales[Rt].getPixelForValue(Mt))}qe=pe-U,He=qe-O,lt=i.left,mt=i.right}const Ei=wt(u.ticks.maxTicksLimit,z),Tt=Math.max(1,Math.ceil(z/Ei));for(xe=0;xe<z;xe+=Tt){const Rt=this.getContext(xe),Mt=f.setContext(Rt),Li=s.setContext(Rt),dt=Mt.lineWidth,fn=Mt.color,sn=Li.dash||[],pn=Li.dashOffset,zn=Mt.tickWidth,Ji=Mt.tickColor,oi=Mt.tickBorderDash||[],Di=Mt.tickBorderDashOffset;Ae=v2(this,xe,w),Ae!==void 0&&(ze=Co(c,Ae,dt),T?qe=He=lt=mt=ze:Ne=rt=ct=jt=ze,W.push({tx1:qe,ty1:Ne,tx2:He,ty2:rt,x1:lt,y1:ct,x2:mt,y2:jt,width:dt,color:fn,borderDash:sn,borderDashOffset:pn,tickWidth:zn,tickColor:Ji,tickBorderDash:oi,tickBorderDashOffset:Di}))}return this._ticksLength=z,this._borderValue=pe,W}_computeLabelItems(i){const l=this.axis,c=this.options,{position:u,ticks:f}=c,h=this.isHorizontal(),s=this.ticks,{align:w,crossAlign:T,padding:E,mirror:z}=f,O=Ld(c.grid),W=O+E,Q=z?-E:W,te=-Da(this.labelRotation),U=[];let _e,pe,xe,Ae,ze,qe,Ne,He,rt,lt,ct,mt,jt="middle";if(u==="top")qe=this.bottom-Q,Ne=this._getXAxisLabelAlignment();else if(u==="bottom")qe=this.top+Q,Ne=this._getXAxisLabelAlignment();else if(u==="left"){const Tt=this._getYAxisLabelAlignment(O);Ne=Tt.textAlign,ze=Tt.x}else if(u==="right"){const Tt=this._getYAxisLabelAlignment(O);Ne=Tt.textAlign,ze=Tt.x}else if(l==="x"){if(u==="center")qe=(i.top+i.bottom)/2+W;else if(Dt(u)){const Tt=Object.keys(u)[0],Rt=u[Tt];qe=this.chart.scales[Tt].getPixelForValue(Rt)+W}Ne=this._getXAxisLabelAlignment()}else if(l==="y"){if(u==="center")ze=(i.left+i.right)/2-W;else if(Dt(u)){const Tt=Object.keys(u)[0],Rt=u[Tt];ze=this.chart.scales[Tt].getPixelForValue(Rt)}Ne=this._getYAxisLabelAlignment(O).textAlign}l==="y"&&(w==="start"?jt="top":w==="end"&&(jt="bottom"));const Ei=this._getLabelSizes();for(_e=0,pe=s.length;_e<pe;++_e){xe=s[_e],Ae=xe.label;const Tt=f.setContext(this.getContext(_e));He=this.getPixelForTick(_e)+f.labelOffset,rt=this._resolveTickFontOptions(_e),lt=rt.lineHeight,ct=Pi(Ae)?Ae.length:1;const Rt=ct/2,Mt=Tt.color,Li=Tt.textStrokeColor,dt=Tt.textStrokeWidth;let fn=Ne;h?(ze=He,Ne==="inner"&&(_e===pe-1?fn=this.options.reverse?"left":"right":_e===0?fn=this.options.reverse?"right":"left":fn="center"),u==="top"?T==="near"||te!==0?mt=-ct*lt+lt/2:T==="center"?mt=-Ei.highest.height/2-Rt*lt+lt:mt=-Ei.highest.height+lt/2:T==="near"||te!==0?mt=lt/2:T==="center"?mt=Ei.highest.height/2-Rt*lt:mt=Ei.highest.height-ct*lt,z&&(mt*=-1),te!==0&&!Tt.showLabelBackdrop&&(ze+=lt/2*Math.sin(te))):(qe=He,mt=(1-ct)*lt/2);let sn;if(Tt.showLabelBackdrop){const pn=In(Tt.backdropPadding),zn=Ei.heights[_e],Ji=Ei.widths[_e];let oi=mt-pn.top,Di=0-pn.left;switch(jt){case"middle":oi-=zn/2;break;case"bottom":oi-=zn;break}switch(Ne){case"center":Di-=Ji/2;break;case"right":Di-=Ji;break;case"inner":_e===pe-1?Di-=Ji:_e>0&&(Di-=Ji/2);break}sn={left:Di,top:oi,width:Ji+pn.width,height:zn+pn.height,color:Tt.backdropColor}}U.push({label:Ae,font:rt,textOffset:mt,options:{rotation:te,color:Mt,strokeColor:Li,strokeWidth:dt,textAlign:fn,textBaseline:jt,translation:[ze,qe],backdrop:sn}})}return U}_getXAxisLabelAlignment(){const{position:i,ticks:l}=this.options;if(-Da(this.labelRotation))return i==="top"?"left":"right";let u="center";return l.align==="start"?u="left":l.align==="end"?u="right":l.align==="inner"&&(u="inner"),u}_getYAxisLabelAlignment(i){const{position:l,ticks:{crossAlign:c,mirror:u,padding:f}}=this.options,h=this._getLabelSizes(),s=i+f,w=h.widest.width;let T,E;return l==="left"?u?(E=this.right+f,c==="near"?T="left":c==="center"?(T="center",E+=w/2):(T="right",E+=w)):(E=this.right-s,c==="near"?T="right":c==="center"?(T="center",E-=w/2):(T="left",E=this.left)):l==="right"?u?(E=this.left+f,c==="near"?T="right":c==="center"?(T="center",E-=w/2):(T="left",E-=w)):(E=this.left+s,c==="near"?T="left":c==="center"?(T="center",E+=w/2):(T="right",E=this.right)):T="right",{textAlign:T,x:E}}_computeLabelArea(){if(this.options.ticks.mirror)return;const i=this.chart,l=this.options.position;if(l==="left"||l==="right")return{top:0,left:this.left,bottom:i.height,right:this.right};if(l==="top"||l==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:i.width}}drawBackground(){const{ctx:i,options:{backgroundColor:l},left:c,top:u,width:f,height:h}=this;l&&(i.save(),i.fillStyle=l,i.fillRect(c,u,f,h),i.restore())}getLineWidthForValue(i){const l=this.options.grid;if(!this._isVisible()||!l.display)return 0;const u=this.ticks.findIndex(f=>f.value===i);return u>=0?l.setContext(this.getContext(u)).lineWidth:0}drawGrid(i){const l=this.options.grid,c=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(i));let f,h;const s=(w,T,E)=>{!E.width||!E.color||(c.save(),c.lineWidth=E.width,c.strokeStyle=E.color,c.setLineDash(E.borderDash||[]),c.lineDashOffset=E.borderDashOffset,c.beginPath(),c.moveTo(w.x,w.y),c.lineTo(T.x,T.y),c.stroke(),c.restore())};if(l.display)for(f=0,h=u.length;f<h;++f){const w=u[f];l.drawOnChartArea&&s({x:w.x1,y:w.y1},{x:w.x2,y:w.y2},w),l.drawTicks&&s({x:w.tx1,y:w.ty1},{x:w.tx2,y:w.ty2},{color:w.tickColor,width:w.tickWidth,borderDash:w.tickBorderDash,borderDashOffset:w.tickBorderDashOffset})}}drawBorder(){const{chart:i,ctx:l,options:{border:c,grid:u}}=this,f=c.setContext(this.getContext()),h=c.display?f.width:0;if(!h)return;const s=u.setContext(this.getContext(0)).lineWidth,w=this._borderValue;let T,E,z,O;this.isHorizontal()?(T=Co(i,this.left,h)-h/2,E=Co(i,this.right,s)+s/2,z=O=w):(z=Co(i,this.top,h)-h/2,O=Co(i,this.bottom,s)+s/2,T=E=w),l.save(),l.lineWidth=f.width,l.strokeStyle=f.color,l.beginPath(),l.moveTo(T,z),l.lineTo(E,O),l.stroke(),l.restore()}drawLabels(i){if(!this.options.ticks.display)return;const c=this.ctx,u=this._computeLabelArea();u&&yf(c,u);const f=this.getLabelItems(i);for(const h of f){const s=h.options,w=h.font,T=h.label,E=h.textOffset;No(c,T,0,E,w,s)}u&&vf(c)}drawTitle(){const{ctx:i,options:{position:l,title:c,reverse:u}}=this;if(!c.display)return;const f=rn(c.font),h=In(c.padding),s=c.align;let w=f.lineHeight/2;l==="bottom"||l==="center"||Dt(l)?(w+=h.bottom,Pi(c.text)&&(w+=f.lineHeight*(c.text.length-1))):w+=h.top;const{titleX:T,titleY:E,maxWidth:z,rotation:O}=S2(this,w,l,s);No(i,c.text,0,0,f,{color:c.color,maxWidth:z,rotation:O,textAlign:k2(s,l,u),textBaseline:"middle",translation:[T,E]})}draw(i){this._isVisible()&&(this.drawBackground(),this.drawGrid(i),this.drawBorder(),this.drawTitle(),this.drawLabels(i))}_layers(){const i=this.options,l=i.ticks&&i.ticks.z||0,c=wt(i.grid&&i.grid.z,-1),u=wt(i.border&&i.border.z,0);return!this._isVisible()||this.draw!==Go.prototype.draw?[{z:l,draw:f=>{this.draw(f)}}]:[{z:c,draw:f=>{this.drawBackground(),this.drawGrid(f),this.drawTitle()}},{z:u,draw:()=>{this.drawBorder()}},{z:l,draw:f=>{this.drawLabels(f)}}]}getMatchingVisibleMetas(i){const l=this.chart.getSortedVisibleDatasetMetas(),c=this.axis+"AxisID",u=[];let f,h;for(f=0,h=l.length;f<h;++f){const s=l[f];s[c]===this.id&&(!i||s.type===i)&&u.push(s)}return u}_resolveTickFontOptions(i){const l=this.options.ticks.setContext(this.getContext(i));return rn(l.font)}_maxDigits(){const i=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/i}}class Uh{constructor(i,l,c){this.type=i,this.scope=l,this.override=c,this.items=Object.create(null)}isForType(i){return Object.prototype.isPrototypeOf.call(this.type.prototype,i.prototype)}register(i){const l=Object.getPrototypeOf(i);let c;P2(l)&&(c=this.register(l));const u=this.items,f=i.id,h=this.scope+"."+f;if(!f)throw new Error("class does not have id: "+i);return f in u||(u[f]=i,T2(i,h,c),this.override&&Ci.override(i.id,i.overrides)),h}get(i){return this.items[i]}unregister(i){const l=this.items,c=i.id,u=this.scope;c in l&&delete l[c],u&&c in Ci[u]&&(delete Ci[u][c],this.override&&delete Vo[c])}}function T2(r,i,l){const c=Hd(Object.create(null),[l?Ci.get(l):{},Ci.get(i),r.defaults]);Ci.set(i,c),r.defaultRoutes&&M2(i,r.defaultRoutes),r.descriptors&&Ci.describe(i,r.descriptors)}function M2(r,i){Object.keys(i).forEach(l=>{const c=l.split("."),u=c.pop(),f=[r].concat(c).join("."),h=i[l].split("."),s=h.pop(),w=h.join(".");Ci.route(f,u,w,s)})}function P2(r){return"id"in r&&"defaults"in r}class C2{constructor(){this.controllers=new Uh(Ps,"datasets",!0),this.elements=new Uh(zr,"elements"),this.plugins=new Uh(Object,"plugins"),this.scales=new Uh(Go,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...i){this._each("register",i)}remove(...i){this._each("unregister",i)}addControllers(...i){this._each("register",i,this.controllers)}addElements(...i){this._each("register",i,this.elements)}addPlugins(...i){this._each("register",i,this.plugins)}addScales(...i){this._each("register",i,this.scales)}getController(i){return this._get(i,this.controllers,"controller")}getElement(i){return this._get(i,this.elements,"element")}getPlugin(i){return this._get(i,this.plugins,"plugin")}getScale(i){return this._get(i,this.scales,"scale")}removeControllers(...i){this._each("unregister",i,this.controllers)}removeElements(...i){this._each("unregister",i,this.elements)}removePlugins(...i){this._each("unregister",i,this.plugins)}removeScales(...i){this._each("unregister",i,this.scales)}_each(i,l,c){[...l].forEach(u=>{const f=c||this._getRegistryForType(u);c||f.isForType(u)||f===this.plugins&&u.id?this._exec(i,f,u):Jt(u,h=>{const s=c||this._getRegistryForType(h);this._exec(i,s,h)})})}_exec(i,l,c){const u=Jm(i);hi(c["before"+u],[],c),l[i](c),hi(c["after"+u],[],c)}_getRegistryForType(i){for(let l=0;l<this._typedRegistries.length;l++){const c=this._typedRegistries[l];if(c.isForType(i))return c}return this.plugins}_get(i,l,c){const u=l.get(i);if(u===void 0)throw new Error('"'+i+'" is not a registered '+c+".");return u}}var Xa=new C2;class E2{constructor(){this._init=void 0}notify(i,l,c,u){if(l==="beforeInit"&&(this._init=this._createDescriptors(i,!0),this._notify(this._init,i,"install")),this._init===void 0)return;const f=u?this._descriptors(i).filter(u):this._descriptors(i),h=this._notify(f,i,l,c);return l==="afterDestroy"&&(this._notify(f,i,"stop"),this._notify(this._init,i,"uninstall"),this._init=void 0),h}_notify(i,l,c,u){u=u||{};for(const f of i){const h=f.plugin,s=h[c],w=[l,u,f.options];if(hi(s,w,h)===!1&&u.cancelable)return!1}return!0}invalidate(){Lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(i){if(this._cache)return this._cache;const l=this._cache=this._createDescriptors(i);return this._notifyStateChanges(i),l}_createDescriptors(i,l){const c=i&&i.config,u=wt(c.options&&c.options.plugins,{}),f=L2(c);return u===!1&&!l?[]:A2(i,f,u,l)}_notifyStateChanges(i){const l=this._oldCache||[],c=this._cache,u=(f,h)=>f.filter(s=>!h.some(w=>s.plugin.id===w.plugin.id));this._notify(u(l,c),i,"stop"),this._notify(u(c,l),i,"start")}}function L2(r){const i={},l=[],c=Object.keys(Xa.plugins.items);for(let f=0;f<c.length;f++)l.push(Xa.getPlugin(c[f]));const u=r.plugins||[];for(let f=0;f<u.length;f++){const h=u[f];l.indexOf(h)===-1&&(l.push(h),i[h.id]=!0)}return{plugins:l,localIds:i}}function D2(r,i){return!i&&r===!1?null:r===!0?{}:r}function A2(r,{plugins:i,localIds:l},c,u){const f=[],h=r.getContext();for(const s of i){const w=s.id,T=D2(c[w],u);T!==null&&f.push({plugin:s,options:I2(r.config,{plugin:s,local:l[w]},T,h)})}return f}function I2(r,{plugin:i,local:l},c,u){const f=r.pluginScopeKeys(i),h=r.getOptionScopes(c,f);return l&&i.defaults&&h.push(i.defaults),r.createResolver(h,u,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Tm(r,i){const l=Ci.datasets[r]||{};return((i.datasets||{})[r]||{}).indexAxis||i.indexAxis||l.indexAxis||"x"}function z2(r,i){let l=r;return r==="_index_"?l=i:r==="_value_"&&(l=i==="x"?"y":"x"),l}function R2(r,i){return r===i?"_index_":"_value_"}function Fv(r){if(r==="x"||r==="y"||r==="r")return r}function F2(r){if(r==="top"||r==="bottom")return"x";if(r==="left"||r==="right")return"y"}function Mm(r,...i){if(Fv(r))return r;for(const l of i){const c=l.axis||F2(l.position)||r.length>1&&Fv(r[0].toLowerCase());if(c)return c}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function jv(r,i,l){if(l[i+"AxisID"]===r)return{axis:i}}function j2(r,i){if(i.data&&i.data.datasets){const l=i.data.datasets.filter(c=>c.xAxisID===r||c.yAxisID===r);if(l.length)return jv(r,"x",l[0])||jv(r,"y",l[0])}return{}}function O2(r,i){const l=Vo[r.type]||{scales:{}},c=i.scales||{},u=Tm(r.type,i),f=Object.create(null);return Object.keys(c).forEach(h=>{const s=c[h];if(!Dt(s))return console.error(`Invalid scale configuration for scale: ${h}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${h}`);const w=Mm(h,s,j2(h,r),Ci.scales[s.type]),T=R2(w,u),E=l.scales||{};f[h]=Bd(Object.create(null),[{axis:w},s,E[w],E[T]])}),r.data.datasets.forEach(h=>{const s=h.type||r.type,w=h.indexAxis||Tm(s,i),E=(Vo[s]||{}).scales||{};Object.keys(E).forEach(z=>{const O=z2(z,w),W=h[O+"AxisID"]||O;f[W]=f[W]||Object.create(null),Bd(f[W],[{axis:O},c[W],E[z]])})}),Object.keys(f).forEach(h=>{const s=f[h];Bd(s,[Ci.scales[s.type],Ci.scale])}),f}function gb(r){const i=r.options||(r.options={});i.plugins=wt(i.plugins,{}),i.scales=O2(r,i)}function _b(r){return r=r||{},r.datasets=r.datasets||[],r.labels=r.labels||[],r}function $2(r){return r=r||{},r.data=_b(r.data),gb(r),r}const Ov=new Map,yb=new Set;function Gh(r,i){let l=Ov.get(r);return l||(l=i(),Ov.set(r,l),yb.add(l)),l}const Dd=(r,i,l)=>{const c=ws(i,l);c!==void 0&&r.add(c)};class B2{constructor(i){this._config=$2(i),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(i){this._config.type=i}get data(){return this._config.data}set data(i){this._config.data=_b(i)}get options(){return this._config.options}set options(i){this._config.options=i}get plugins(){return this._config.plugins}update(){const i=this._config;this.clearCache(),gb(i)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(i){return Gh(i,()=>[[`datasets.${i}`,""]])}datasetAnimationScopeKeys(i,l){return Gh(`${i}.transition.${l}`,()=>[[`datasets.${i}.transitions.${l}`,`transitions.${l}`],[`datasets.${i}`,""]])}datasetElementScopeKeys(i,l){return Gh(`${i}-${l}`,()=>[[`datasets.${i}.elements.${l}`,`datasets.${i}`,`elements.${l}`,""]])}pluginScopeKeys(i){const l=i.id,c=this.type;return Gh(`${c}-plugin-${l}`,()=>[[`plugins.${l}`,...i.additionalOptionScopes||[]]])}_cachedScopes(i,l){const c=this._scopeCache;let u=c.get(i);return(!u||l)&&(u=new Map,c.set(i,u)),u}getOptionScopes(i,l,c){const{options:u,type:f}=this,h=this._cachedScopes(i,c),s=h.get(l);if(s)return s;const w=new Set;l.forEach(E=>{i&&(w.add(i),E.forEach(z=>Dd(w,i,z))),E.forEach(z=>Dd(w,u,z)),E.forEach(z=>Dd(w,Vo[f]||{},z)),E.forEach(z=>Dd(w,Ci,z)),E.forEach(z=>Dd(w,km,z))});const T=Array.from(w);return T.length===0&&T.push(Object.create(null)),yb.has(l)&&h.set(l,T),T}chartOptionScopes(){const{options:i,type:l}=this;return[i,Vo[l]||{},Ci.datasets[l]||{},{type:l},Ci,km]}resolveNamedOptions(i,l,c,u=[""]){const f={$shared:!0},{resolver:h,subPrefixes:s}=$v(this._resolverCache,i,u);let w=h;if(N2(h,l)){f.$shared=!1,c=ks(c)?c():c;const T=this.createResolver(i,c,s);w=nu(h,c,T)}for(const T of l)f[T]=w[T];return f}createResolver(i,l,c=[""],u){const{resolver:f}=$v(this._resolverCache,i,c);return Dt(l)?nu(f,l,void 0,u):f}}function $v(r,i,l){let c=r.get(i);c||(c=new Map,r.set(i,c));const u=l.join();let f=c.get(u);return f||(f={resolver:ag(i,l),subPrefixes:l.filter(s=>!s.toLowerCase().includes("hover"))},c.set(u,f)),f}const V2=r=>Dt(r)&&Object.getOwnPropertyNames(r).some(i=>ks(r[i]));function N2(r,i){const{isScriptable:l,isIndexable:c}=Kx(r);for(const u of i){const f=l(u),h=c(u),s=(h||f)&&r[u];if(f&&(ks(s)||V2(s))||h&&Pi(s))return!0}return!1}var U2="4.5.1";const G2=["top","bottom","left","right","chartArea"];function Bv(r,i){return r==="top"||r==="bottom"||G2.indexOf(r)===-1&&i==="x"}function Vv(r,i){return function(l,c){return l[r]===c[r]?l[i]-c[i]:l[r]-c[r]}}function Nv(r){const i=r.chart,l=i.options.animation;i.notifyPlugins("afterRender"),hi(l&&l.onComplete,[r],i)}function q2(r){const i=r.chart,l=i.options.animation;hi(l&&l.onProgress,[r],i)}function vb(r){return og()&&typeof r=="string"?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const tf={},Uv=r=>{const i=vb(r);return Object.values(tf).filter(l=>l.canvas===i).pop()};function W2(r,i,l){const c=Object.keys(r);for(const u of c){const f=+u;if(f>=i){const h=r[u];delete r[u],(l>0||f>i)&&(r[f+l]=h)}}}function H2(r,i,l,c){return!l||r.type==="mouseout"?null:c?i:r}class cg{static defaults=Ci;static instances=tf;static overrides=Vo;static registry=Xa;static version=U2;static getChart=Uv;static register(...i){Xa.add(...i),Gv()}static unregister(...i){Xa.remove(...i),Gv()}constructor(i,l){const c=this.config=new B2(l),u=vb(i),f=Uv(u);if(f)throw new Error("Canvas is already in use. Chart with ID '"+f.id+"' must be destroyed before the canvas with ID '"+f.canvas.id+"' can be reused.");const h=c.createResolver(c.chartOptionScopes(),this.getContext());this.platform=new(c.platform||c2(u)),this.platform.updateConfig(c);const s=this.platform.acquireContext(u,h.aspectRatio),w=s&&s.canvas,T=w&&w.height,E=w&&w.width;if(this.id=Nk(),this.ctx=s,this.canvas=w,this.width=E,this.height=T,this._options=h,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new E2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rS(z=>this.update(z),h.resizeDelay||0),this._dataChanges=[],tf[this.id]=this,!s||!w){console.error("Failed to create chart: can't acquire context from the given item");return}Pr.listen(this,"complete",Nv),Pr.listen(this,"progress",q2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:i,maintainAspectRatio:l},width:c,height:u,_aspectRatio:f}=this;return Lt(i)?l&&f?f:u?c/u:null:i}get data(){return this.config.data}set data(i){this.config.data=i}get options(){return this._options}set options(i){this.config.options=i}get registry(){return Xa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return uv(this.canvas,this.ctx),this}stop(){return Pr.stop(this),this}resize(i,l){Pr.running(this)?this._resizeBeforeDraw={width:i,height:l}:this._resize(i,l)}_resize(i,l){const c=this.options,u=this.canvas,f=c.maintainAspectRatio&&this.aspectRatio,h=this.platform.getMaximumSize(u,i,l,f),s=c.devicePixelRatio||this.platform.getDevicePixelRatio(),w=this.width?"resize":"attach";this.width=h.width,this.height=h.height,this._aspectRatio=this.aspectRatio,hv(this,s,!0)&&(this.notifyPlugins("resize",{size:h}),hi(c.onResize,[this,h],this),this.attached&&this._doResize(w)&&this.render())}ensureScalesHaveIDs(){const l=this.options.scales||{};Jt(l,(c,u)=>{c.id=u})}buildOrUpdateScales(){const i=this.options,l=i.scales,c=this.scales,u=Object.keys(c).reduce((h,s)=>(h[s]=!1,h),{});let f=[];l&&(f=f.concat(Object.keys(l).map(h=>{const s=l[h],w=Mm(h,s),T=w==="r",E=w==="x";return{options:s,dposition:T?"chartArea":E?"bottom":"left",dtype:T?"radialLinear":E?"category":"linear"}}))),Jt(f,h=>{const s=h.options,w=s.id,T=Mm(w,s),E=wt(s.type,h.dtype);(s.position===void 0||Bv(s.position,T)!==Bv(h.dposition))&&(s.position=h.dposition),u[w]=!0;let z=null;if(w in c&&c[w].type===E)z=c[w];else{const O=Xa.getScale(E);z=new O({id:w,type:E,ctx:this.ctx,chart:this}),c[z.id]=z}z.init(s,i)}),Jt(u,(h,s)=>{h||delete c[s]}),Jt(c,h=>{An.configure(this,h,h.options),An.addBox(this,h)})}_updateMetasets(){const i=this._metasets,l=this.data.datasets.length,c=i.length;if(i.sort((u,f)=>u.index-f.index),c>l){for(let u=l;u<c;++u)this._destroyDatasetMeta(u);i.splice(l,c-l)}this._sortedMetasets=i.slice(0).sort(Vv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:i,data:{datasets:l}}=this;i.length>l.length&&delete this._stacks,i.forEach((c,u)=>{l.filter(f=>f===c._dataset).length===0&&this._destroyDatasetMeta(u)})}buildOrUpdateControllers(){const i=[],l=this.data.datasets;let c,u;for(this._removeUnreferencedMetasets(),c=0,u=l.length;c<u;c++){const f=l[c];let h=this.getDatasetMeta(c);const s=f.type||this.config.type;if(h.type&&h.type!==s&&(this._destroyDatasetMeta(c),h=this.getDatasetMeta(c)),h.type=s,h.indexAxis=f.indexAxis||Tm(s,this.options),h.order=f.order||0,h.index=c,h.label=""+f.label,h.visible=this.isDatasetVisible(c),h.controller)h.controller.updateIndex(c),h.controller.linkScales();else{const w=Xa.getController(s),{datasetElementType:T,dataElementType:E}=Ci.datasets[s];Object.assign(w,{dataElementType:Xa.getElement(E),datasetElementType:T&&Xa.getElement(T)}),h.controller=new w(this,c),i.push(h.controller)}}return this._updateMetasets(),i}_resetElements(){Jt(this.data.datasets,(i,l)=>{this.getDatasetMeta(l).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(i){const l=this.config;l.update();const c=this._options=l.createResolver(l.chartOptionScopes(),this.getContext()),u=this._animationsDisabled=!c.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:i,cancelable:!0})===!1)return;const f=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let h=0;for(let T=0,E=this.data.datasets.length;T<E;T++){const{controller:z}=this.getDatasetMeta(T),O=!u&&f.indexOf(z)===-1;z.buildOrUpdateElements(O),h=Math.max(+z.getMaxOverflow(),h)}h=this._minPadding=c.layout.autoPadding?h:0,this._updateLayout(h),u||Jt(f,T=>{T.reset()}),this._updateDatasets(i),this.notifyPlugins("afterUpdate",{mode:i}),this._layers.sort(Vv("z","_idx"));const{_active:s,_lastEvent:w}=this;w?this._eventHandler(w,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Jt(this.scales,i=>{An.removeBox(this,i)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const i=this.options,l=new Set(Object.keys(this._listeners)),c=new Set(i.events);(!ev(l,c)||!!this._responsiveListeners!==i.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:i}=this,l=this._getUniformDataChanges()||[];for(const{method:c,start:u,count:f}of l){const h=c==="_removeElements"?-f:f;W2(i,u,h)}}_getUniformDataChanges(){const i=this._dataChanges;if(!i||!i.length)return;this._dataChanges=[];const l=this.data.datasets.length,c=f=>new Set(i.filter(h=>h[0]===f).map((h,s)=>s+","+h.splice(1).join(","))),u=c(0);for(let f=1;f<l;f++)if(!ev(u,c(f)))return;return Array.from(u).map(f=>f.split(",")).map(f=>({method:f[1],start:+f[2],count:+f[3]}))}_updateLayout(i){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;An.update(this,this.width,this.height,i);const l=this.chartArea,c=l.width<=0||l.height<=0;this._layers=[],Jt(this.boxes,u=>{c&&u.position==="chartArea"||(u.configure&&u.configure(),this._layers.push(...u._layers()))},this),this._layers.forEach((u,f)=>{u._idx=f}),this.notifyPlugins("afterLayout")}_updateDatasets(i){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:i,cancelable:!0})!==!1){for(let l=0,c=this.data.datasets.length;l<c;++l)this.getDatasetMeta(l).controller.configure();for(let l=0,c=this.data.datasets.length;l<c;++l)this._updateDataset(l,ks(i)?i({datasetIndex:l}):i);this.notifyPlugins("afterDatasetsUpdate",{mode:i})}}_updateDataset(i,l){const c=this.getDatasetMeta(i),u={meta:c,index:i,mode:l,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",u)!==!1&&(c.controller._update(l),u.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",u))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Pr.has(this)?this.attached&&!Pr.running(this)&&Pr.start(this):(this.draw(),Nv({chart:this})))}draw(){let i;if(this._resizeBeforeDraw){const{width:c,height:u}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(c,u)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const l=this._layers;for(i=0;i<l.length&&l[i].z<=0;++i)l[i].draw(this.chartArea);for(this._drawDatasets();i<l.length;++i)l[i].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(i){const l=this._sortedMetasets,c=[];let u,f;for(u=0,f=l.length;u<f;++u){const h=l[u];(!i||h.visible)&&c.push(h)}return c}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const i=this.getSortedVisibleDatasetMetas();for(let l=i.length-1;l>=0;--l)this._drawDataset(i[l]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(i){const l=this.ctx,c={meta:i,index:i.index,cancelable:!0},u=sb(this,i);this.notifyPlugins("beforeDatasetDraw",c)!==!1&&(u&&yf(l,u),i.controller.draw(),u&&vf(l),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(i){return Ar(i,this.chartArea,this._minPadding)}getElementsAtEventForMode(i,l,c,u){const f=GT.modes[l];return typeof f=="function"?f(this,i,c,u):[]}getDatasetMeta(i){const l=this.data.datasets[i],c=this._metasets;let u=c.filter(f=>f&&f._dataset===l).pop();return u||(u={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:l&&l.order||0,index:i,_dataset:l,_parsed:[],_sorted:!1},c.push(u)),u}getContext(){return this.$context||(this.$context=Ms(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(i){const l=this.data.datasets[i];if(!l)return!1;const c=this.getDatasetMeta(i);return typeof c.hidden=="boolean"?!c.hidden:!l.hidden}setDatasetVisibility(i,l){const c=this.getDatasetMeta(i);c.hidden=!l}toggleDataVisibility(i){this._hiddenIndices[i]=!this._hiddenIndices[i]}getDataVisibility(i){return!this._hiddenIndices[i]}_updateVisibility(i,l,c){const u=c?"show":"hide",f=this.getDatasetMeta(i),h=f.controller._resolveAnimations(void 0,u);Zd(l)?(f.data[l].hidden=!c,this.update()):(this.setDatasetVisibility(i,c),h.update(f,{visible:c}),this.update(s=>s.datasetIndex===i?u:void 0))}hide(i,l){this._updateVisibility(i,l,!1)}show(i,l){this._updateVisibility(i,l,!0)}_destroyDatasetMeta(i){const l=this._metasets[i];l&&l.controller&&l.controller._destroy(),delete this._metasets[i]}_stop(){let i,l;for(this.stop(),Pr.remove(this),i=0,l=this.data.datasets.length;i<l;++i)this._destroyDatasetMeta(i)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:i,ctx:l}=this;this._stop(),this.config.clearCache(),i&&(this.unbindEvents(),uv(i,l),this.platform.releaseContext(l),this.canvas=null,this.ctx=null),delete tf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...i){return this.canvas.toDataURL(...i)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const i=this._listeners,l=this.platform,c=(f,h)=>{l.addEventListener(this,f,h),i[f]=h},u=(f,h,s)=>{f.offsetX=h,f.offsetY=s,this._eventHandler(f)};Jt(this.options.events,f=>c(f,u))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const i=this._responsiveListeners,l=this.platform,c=(w,T)=>{l.addEventListener(this,w,T),i[w]=T},u=(w,T)=>{i[w]&&(l.removeEventListener(this,w,T),delete i[w])},f=(w,T)=>{this.canvas&&this.resize(w,T)};let h;const s=()=>{u("attach",s),this.attached=!0,this.resize(),c("resize",f),c("detach",h)};h=()=>{this.attached=!1,u("resize",f),this._stop(),this._resize(0,0),c("attach",s)},l.isAttached(this.canvas)?s():h()}unbindEvents(){Jt(this._listeners,(i,l)=>{this.platform.removeEventListener(this,l,i)}),this._listeners={},Jt(this._responsiveListeners,(i,l)=>{this.platform.removeEventListener(this,l,i)}),this._responsiveListeners=void 0}updateHoverStyle(i,l,c){const u=c?"set":"remove";let f,h,s,w;for(l==="dataset"&&(f=this.getDatasetMeta(i[0].datasetIndex),f.controller["_"+u+"DatasetHoverStyle"]()),s=0,w=i.length;s<w;++s){h=i[s];const T=h&&this.getDatasetMeta(h.datasetIndex).controller;T&&T[u+"HoverStyle"](h.element,h.datasetIndex,h.index)}}getActiveElements(){return this._active||[]}setActiveElements(i){const l=this._active||[],c=i.map(({datasetIndex:f,index:h})=>{const s=this.getDatasetMeta(f);if(!s)throw new Error("No dataset found at index "+f);return{datasetIndex:f,element:s.data[h],index:h}});!rf(c,l)&&(this._active=c,this._lastEvent=null,this._updateHoverStyles(c,l))}notifyPlugins(i,l,c){return this._plugins.notify(this,i,l,c)}isPluginEnabled(i){return this._plugins._cache.filter(l=>l.plugin.id===i).length===1}_updateHoverStyles(i,l,c){const u=this.options.hover,f=(w,T)=>w.filter(E=>!T.some(z=>E.datasetIndex===z.datasetIndex&&E.index===z.index)),h=f(l,i),s=c?i:f(i,l);h.length&&this.updateHoverStyle(h,u.mode,!1),s.length&&u.mode&&this.updateHoverStyle(s,u.mode,!0)}_eventHandler(i,l){const c={event:i,replay:l,cancelable:!0,inChartArea:this.isPointInArea(i)},u=h=>(h.options.events||this.options.events).includes(i.native.type);if(this.notifyPlugins("beforeEvent",c,u)===!1)return;const f=this._handleEvent(i,l,c.inChartArea);return c.cancelable=!1,this.notifyPlugins("afterEvent",c,u),(f||c.changed)&&this.render(),this}_handleEvent(i,l,c){const{_active:u=[],options:f}=this,h=l,s=this._getActiveElements(i,u,c,h),w=Zk(i),T=H2(i,this._lastEvent,c,w);c&&(this._lastEvent=null,hi(f.onHover,[i,s,this],this),w&&hi(f.onClick,[i,s,this],this));const E=!rf(s,u);return(E||l)&&(this._active=s,this._updateHoverStyles(s,u,l)),this._lastEvent=T,E}_getActiveElements(i,l,c,u){if(i.type==="mouseout")return[];if(!c)return l;const f=this.options.hover;return this.getElementsAtEventForMode(i,f.mode,f,u)}}function Gv(){return Jt(cg.instances,r=>r._plugins.invalidate())}function Z2(r,i,l){const{startAngle:c,x:u,y:f,outerRadius:h,innerRadius:s,options:w}=i,{borderWidth:T,borderJoinStyle:E}=w,z=Math.min(T/h,Dn(c-l));if(r.beginPath(),r.arc(u,f,h-T/2,c+z/2,l-z/2),s>0){const O=Math.min(T/s,Dn(c-l));r.arc(u,f,s+T/2,l-O/2,c+O/2,!0)}else{const O=Math.min(T/2,h*Dn(c-l));if(E==="round")r.arc(u,f,O,l-Bt/2,c+Bt/2,!0);else if(E==="bevel"){const W=2*O*O,Q=-W*Math.cos(l+Bt/2)+u,te=-W*Math.sin(l+Bt/2)+f,U=W*Math.cos(c+Bt/2)+u,_e=W*Math.sin(c+Bt/2)+f;r.lineTo(Q,te),r.lineTo(U,_e)}}r.closePath(),r.moveTo(0,0),r.rect(0,0,r.canvas.width,r.canvas.height),r.clip("evenodd")}function K2(r,i,l){const{startAngle:c,pixelMargin:u,x:f,y:h,outerRadius:s,innerRadius:w}=i;let T=u/s;r.beginPath(),r.arc(f,h,s,c-T,l+T),w>u?(T=u/w,r.arc(f,h,w,l+T,c-T,!0)):r.arc(f,h,u,l+Ni,c-Ni),r.closePath(),r.clip()}function Y2(r){return ng(r,["outerStart","outerEnd","innerStart","innerEnd"])}function X2(r,i,l,c){const u=Y2(r.options.borderRadius),f=(l-i)/2,h=Math.min(f,c*i/2),s=w=>{const T=(l-Math.min(f,w))*c/2;return hn(w,0,Math.min(f,T))};return{outerStart:s(u.outerStart),outerEnd:s(u.outerEnd),innerStart:hn(u.innerStart,0,h),innerEnd:hn(u.innerEnd,0,h)}}function eu(r,i,l,c){return{x:l+r*Math.cos(i),y:c+r*Math.sin(i)}}function cf(r,i,l,c,u,f){const{x:h,y:s,startAngle:w,pixelMargin:T,innerRadius:E}=i,z=Math.max(i.outerRadius+c+l-T,0),O=E>0?E+c+l+T:0;let W=0;const Q=u-w;if(c){const Tt=E>0?E-c:0,Rt=z>0?z-c:0,Mt=(Tt+Rt)/2,Li=Mt!==0?Q*Mt/(Mt+c):Q;W=(Q-Li)/2}const te=Math.max(.001,Q*z-l/Bt)/z,U=(Q-te)/2,_e=w+U+W,pe=u-U-W,{outerStart:xe,outerEnd:Ae,innerStart:ze,innerEnd:qe}=X2(i,O,z,pe-_e),Ne=z-xe,He=z-Ae,rt=_e+xe/Ne,lt=pe-Ae/He,ct=O+ze,mt=O+qe,jt=_e+ze/ct,Ei=pe-qe/mt;if(r.beginPath(),f){const Tt=(rt+lt)/2;if(r.arc(h,s,z,rt,Tt),r.arc(h,s,z,Tt,lt),Ae>0){const dt=eu(He,lt,h,s);r.arc(dt.x,dt.y,Ae,lt,pe+Ni)}const Rt=eu(mt,pe,h,s);if(r.lineTo(Rt.x,Rt.y),qe>0){const dt=eu(mt,Ei,h,s);r.arc(dt.x,dt.y,qe,pe+Ni,Ei+Math.PI)}const Mt=(pe-qe/O+(_e+ze/O))/2;if(r.arc(h,s,O,pe-qe/O,Mt,!0),r.arc(h,s,O,Mt,_e+ze/O,!0),ze>0){const dt=eu(ct,jt,h,s);r.arc(dt.x,dt.y,ze,jt+Math.PI,_e-Ni)}const Li=eu(Ne,_e,h,s);if(r.lineTo(Li.x,Li.y),xe>0){const dt=eu(Ne,rt,h,s);r.arc(dt.x,dt.y,xe,_e-Ni,rt)}}else{r.moveTo(h,s);const Tt=Math.cos(rt)*z+h,Rt=Math.sin(rt)*z+s;r.lineTo(Tt,Rt);const Mt=Math.cos(lt)*z+h,Li=Math.sin(lt)*z+s;r.lineTo(Mt,Li)}r.closePath()}function J2(r,i,l,c,u){const{fullCircles:f,startAngle:h,circumference:s}=i;let w=i.endAngle;if(f){cf(r,i,l,c,w,u);for(let T=0;T<f;++T)r.fill();isNaN(s)||(w=h+(s%xi||xi))}return cf(r,i,l,c,w,u),r.fill(),w}function Q2(r,i,l,c,u){const{fullCircles:f,startAngle:h,circumference:s,options:w}=i,{borderWidth:T,borderJoinStyle:E,borderDash:z,borderDashOffset:O,borderRadius:W}=w,Q=w.borderAlign==="inner";if(!T)return;r.setLineDash(z||[]),r.lineDashOffset=O,Q?(r.lineWidth=T*2,r.lineJoin=E||"round"):(r.lineWidth=T,r.lineJoin=E||"bevel");let te=i.endAngle;if(f){cf(r,i,l,c,te,u);for(let U=0;U<f;++U)r.stroke();isNaN(s)||(te=h+(s%xi||xi))}Q&&K2(r,i,te),w.selfJoin&&te-h>=Bt&&W===0&&E!=="miter"&&Z2(r,i,te),f||(cf(r,i,l,c,te,u),r.stroke())}class eM extends zr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,l,c){const u=this.getProps(["x","y"],c),{angle:f,distance:h}=$x(u,{x:i,y:l}),{startAngle:s,endAngle:w,innerRadius:T,outerRadius:E,circumference:z}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],c),O=(this.options.spacing+this.options.borderWidth)/2,W=wt(z,w-s),Q=Kd(f,s,w)&&s!==w,te=W>=xi||Q,U=Lr(h,T+O,E+O);return te&&U}getCenterPoint(i){const{x:l,y:c,startAngle:u,endAngle:f,innerRadius:h,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:w,spacing:T}=this.options,E=(u+f)/2,z=(h+s+T+w)/2;return{x:l+Math.cos(E)*z,y:c+Math.sin(E)*z}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:l,circumference:c}=this,u=(l.offset||0)/4,f=(l.spacing||0)/2,h=l.circular;if(this.pixelMargin=l.borderAlign==="inner"?.33:0,this.fullCircles=c>xi?Math.floor(c/xi):0,c===0||this.innerRadius<0||this.outerRadius<0)return;i.save();const s=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(s)*u,Math.sin(s)*u);const w=1-Math.sin(Math.min(Bt,c||0)),T=u*w;i.fillStyle=l.backgroundColor,i.strokeStyle=l.borderColor,J2(i,this,T,f,h),Q2(i,this,T,f,h),i.restore()}}function xb(r,i,l=i){r.lineCap=wt(l.borderCapStyle,i.borderCapStyle),r.setLineDash(wt(l.borderDash,i.borderDash)),r.lineDashOffset=wt(l.borderDashOffset,i.borderDashOffset),r.lineJoin=wt(l.borderJoinStyle,i.borderJoinStyle),r.lineWidth=wt(l.borderWidth,i.borderWidth),r.strokeStyle=wt(l.borderColor,i.borderColor)}function tM(r,i,l){r.lineTo(l.x,l.y)}function iM(r){return r.stepped?_S:r.tension||r.cubicInterpolationMode==="monotone"?yS:tM}function bb(r,i,l={}){const c=r.length,{start:u=0,end:f=c-1}=l,{start:h,end:s}=i,w=Math.max(u,h),T=Math.min(f,s),E=u<h&&f<h||u>s&&f>s;return{count:c,start:w,loop:i.loop,ilen:T<w&&!E?c+T-w:T-w}}function nM(r,i,l,c){const{points:u,options:f}=i,{count:h,start:s,loop:w,ilen:T}=bb(u,l,c),E=iM(f);let{move:z=!0,reverse:O}=c||{},W,Q,te;for(W=0;W<=T;++W)Q=u[(s+(O?T-W:W))%h],!Q.skip&&(z?(r.moveTo(Q.x,Q.y),z=!1):E(r,te,Q,O,f.stepped),te=Q);return w&&(Q=u[(s+(O?T:0))%h],E(r,te,Q,O,f.stepped)),!!w}function aM(r,i,l,c){const u=i.points,{count:f,start:h,ilen:s}=bb(u,l,c),{move:w=!0,reverse:T}=c||{};let E=0,z=0,O,W,Q,te,U,_e;const pe=Ae=>(h+(T?s-Ae:Ae))%f,xe=()=>{te!==U&&(r.lineTo(E,U),r.lineTo(E,te),r.lineTo(E,_e))};for(w&&(W=u[pe(0)],r.moveTo(W.x,W.y)),O=0;O<=s;++O){if(W=u[pe(O)],W.skip)continue;const Ae=W.x,ze=W.y,qe=Ae|0;qe===Q?(ze<te?te=ze:ze>U&&(U=ze),E=(z*E+Ae)/++z):(xe(),r.lineTo(Ae,ze),Q=qe,z=0,te=U=ze),_e=ze}xe()}function Pm(r){const i=r.options,l=i.borderDash&&i.borderDash.length;return!r._decimated&&!r._loop&&!i.tension&&i.cubicInterpolationMode!=="monotone"&&!i.stepped&&!l?aM:nM}function rM(r){return r.stepped?YS:r.tension||r.cubicInterpolationMode==="monotone"?XS:Ao}function sM(r,i,l,c){let u=i._path;u||(u=i._path=new Path2D,i.path(u,l,c)&&u.closePath()),xb(r,i.options),r.stroke(u)}function oM(r,i,l,c){const{segments:u,options:f}=i,h=Pm(i);for(const s of u)xb(r,f,s.style),r.beginPath(),h(r,i,s,{start:l,end:l+c-1})&&r.closePath(),r.stroke()}const lM=typeof Path2D=="function";function uM(r,i,l,c){lM&&!i.options.segment?sM(r,i,l,c):oM(r,i,l,c)}class wf extends zr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"&&i!=="fill"};constructor(i){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,i&&Object.assign(this,i)}updateControlPoints(i,l){const c=this.options;if((c.tension||c.cubicInterpolationMode==="monotone")&&!c.stepped&&!this._pointsUpdated){const u=c.spanGaps?this._loop:this._fullLoop;NS(this._points,c,i,u,l),this._pointsUpdated=!0}}set points(i){this._points=i,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=nT(this,this.options.segment))}first(){const i=this.segments,l=this.points;return i.length&&l[i[0].start]}last(){const i=this.segments,l=this.points,c=i.length;return c&&l[i[c-1].end]}interpolate(i,l){const c=this.options,u=i[l],f=this.points,h=rb(this,{property:l,start:u,end:u});if(!h.length)return;const s=[],w=rM(c);let T,E;for(T=0,E=h.length;T<E;++T){const{start:z,end:O}=h[T],W=f[z],Q=f[O];if(W===Q){s.push(W);continue}const te=Math.abs((u-W[l])/(Q[l]-W[l])),U=w(W,Q,te,c.stepped);U[l]=i[l],s.push(U)}return s.length===1?s[0]:s}pathSegment(i,l,c){return Pm(this)(i,this,l,c)}path(i,l,c){const u=this.segments,f=Pm(this);let h=this._loop;l=l||0,c=c||this.points.length-l;for(const s of u)h&=f(i,this,s,{start:l,end:l+c-1});return!!h}draw(i,l,c,u){const f=this.options||{};(this.points||[]).length&&f.borderWidth&&(i.save(),uM(i,this,c,u),i.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function qv(r,i,l,c){const u=r.options,{[l]:f}=r.getProps([l],c);return Math.abs(i-f)<u.radius+u.hitRadius}class dM extends zr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,l,c){const u=this.options,{x:f,y:h}=this.getProps(["x","y"],c);return Math.pow(i-f,2)+Math.pow(l-h,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(i,l){return qv(this,i,"x",l)}inYRange(i,l){return qv(this,i,"y",l)}getCenterPoint(i){const{x:l,y:c}=this.getProps(["x","y"],i);return{x:l,y:c}}size(i){i=i||this.options||{};let l=i.radius||0;l=Math.max(l,l&&i.hoverRadius||0);const c=l&&i.borderWidth||0;return(l+c)*2}draw(i,l){const c=this.options;this.skip||c.radius<.1||!Ar(this,l,this.size(c)/2)||(i.strokeStyle=c.borderColor,i.lineWidth=c.borderWidth,i.fillStyle=c.backgroundColor,Sm(i,c,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}function wb(r,i){const{x:l,y:c,base:u,width:f,height:h}=r.getProps(["x","y","base","width","height"],i);let s,w,T,E,z;return r.horizontal?(z=h/2,s=Math.min(l,u),w=Math.max(l,u),T=c-z,E=c+z):(z=f/2,s=l-z,w=l+z,T=Math.min(c,u),E=Math.max(c,u)),{left:s,top:T,right:w,bottom:E}}function xs(r,i,l,c){return r?0:hn(i,l,c)}function cM(r,i,l){const c=r.options.borderWidth,u=r.borderSkipped,f=Zx(c);return{t:xs(u.top,f.top,0,l),r:xs(u.right,f.right,0,i),b:xs(u.bottom,f.bottom,0,l),l:xs(u.left,f.left,0,i)}}function hM(r,i,l){const{enableBorderRadius:c}=r.getProps(["enableBorderRadius"]),u=r.options.borderRadius,f=Ro(u),h=Math.min(i,l),s=r.borderSkipped,w=c||Dt(u);return{topLeft:xs(!w||s.top||s.left,f.topLeft,0,h),topRight:xs(!w||s.top||s.right,f.topRight,0,h),bottomLeft:xs(!w||s.bottom||s.left,f.bottomLeft,0,h),bottomRight:xs(!w||s.bottom||s.right,f.bottomRight,0,h)}}function fM(r){const i=wb(r),l=i.right-i.left,c=i.bottom-i.top,u=cM(r,l/2,c/2),f=hM(r,l/2,c/2);return{outer:{x:i.left,y:i.top,w:l,h:c,radius:f},inner:{x:i.left+u.l,y:i.top+u.t,w:l-u.l-u.r,h:c-u.t-u.b,radius:{topLeft:Math.max(0,f.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,f.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,f.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,f.bottomRight-Math.max(u.b,u.r))}}}}function hm(r,i,l,c){const u=i===null,f=l===null,s=r&&!(u&&f)&&wb(r,c);return s&&(u||Lr(i,s.left,s.right))&&(f||Lr(l,s.top,s.bottom))}function pM(r){return r.topLeft||r.topRight||r.bottomLeft||r.bottomRight}function mM(r,i){r.rect(i.x,i.y,i.w,i.h)}function fm(r,i,l={}){const c=r.x!==l.x?-i:0,u=r.y!==l.y?-i:0,f=(r.x+r.w!==l.x+l.w?i:0)-c,h=(r.y+r.h!==l.y+l.h?i:0)-u;return{x:r.x+c,y:r.y+u,w:r.w+f,h:r.h+h,radius:r.radius}}class gM extends zr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){const{inflateAmount:l,options:{borderColor:c,backgroundColor:u}}=this,{inner:f,outer:h}=fM(this),s=pM(h.radius)?Yd:mM;i.save(),(h.w!==f.w||h.h!==f.h)&&(i.beginPath(),s(i,fm(h,l,f)),i.clip(),s(i,fm(f,-l,h)),i.fillStyle=c,i.fill("evenodd")),i.beginPath(),s(i,fm(f,l)),i.fillStyle=u,i.fill(),i.restore()}inRange(i,l,c){return hm(this,i,l,c)}inXRange(i,l){return hm(this,i,null,l)}inYRange(i,l){return hm(this,null,i,l)}getCenterPoint(i){const{x:l,y:c,base:u,horizontal:f}=this.getProps(["x","y","base","horizontal"],i);return{x:f?(l+u)/2:l,y:f?c:(c+u)/2}}getRange(i){return i==="x"?this.width/2:this.height/2}}var _M=Object.freeze({__proto__:null,ArcElement:eM,BarElement:gM,LineElement:wf,PointElement:dM});const Cm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Wv=Cm.map(r=>r.replace("rgb(","rgba(").replace(")",", 0.5)"));function kb(r){return Cm[r%Cm.length]}function Sb(r){return Wv[r%Wv.length]}function yM(r,i){return r.borderColor=kb(i),r.backgroundColor=Sb(i),++i}function vM(r,i){return r.backgroundColor=r.data.map(()=>kb(i++)),i}function xM(r,i){return r.backgroundColor=r.data.map(()=>Sb(i++)),i}function bM(r){let i=0;return(l,c)=>{const u=r.getDatasetMeta(c).controller;u instanceof ug?i=vM(l,i):u instanceof db?i=xM(l,i):u&&(i=yM(l,i))}}function Hv(r){let i;for(i in r)if(r[i].borderColor||r[i].backgroundColor)return!0;return!1}function wM(r){return r&&(r.borderColor||r.backgroundColor)}function kM(){return Ci.borderColor!=="rgba(0,0,0,0.1)"||Ci.backgroundColor!=="rgba(0,0,0,0.1)"}var SM={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(r,i,l){if(!l.enabled)return;const{data:{datasets:c},options:u}=r.config,{elements:f}=u,h=Hv(c)||wM(u)||f&&Hv(f)||kM();if(!l.forceOverride&&h)return;const s=bM(r);c.forEach(s)}};function TM(r,i,l,c,u){const f=u.samples||c;if(f>=l)return r.slice(i,i+l);const h=[],s=(l-2)/(f-2);let w=0;const T=i+l-1;let E=i,z,O,W,Q,te;for(h[w++]=r[E],z=0;z<f-2;z++){let U=0,_e=0,pe;const xe=Math.floor((z+1)*s)+1+i,Ae=Math.min(Math.floor((z+2)*s)+1,l)+i,ze=Ae-xe;for(pe=xe;pe<Ae;pe++)U+=r[pe].x,_e+=r[pe].y;U/=ze,_e/=ze;const qe=Math.floor(z*s)+1+i,Ne=Math.min(Math.floor((z+1)*s)+1,l)+i,{x:He,y:rt}=r[E];for(W=Q=-1,pe=qe;pe<Ne;pe++)Q=.5*Math.abs((He-U)*(r[pe].y-rt)-(He-r[pe].x)*(_e-rt)),Q>W&&(W=Q,O=r[pe],te=pe);h[w++]=O,E=te}return h[w++]=r[T],h}function MM(r,i,l,c){let u=0,f=0,h,s,w,T,E,z,O,W,Q,te;const U=[],_e=i+l-1,pe=r[i].x,Ae=r[_e].x-pe;for(h=i;h<i+l;++h){s=r[h],w=(s.x-pe)/Ae*c,T=s.y;const ze=w|0;if(ze===E)T<Q?(Q=T,z=h):T>te&&(te=T,O=h),u=(f*u+s.x)/++f;else{const qe=h-1;if(!Lt(z)&&!Lt(O)){const Ne=Math.min(z,O),He=Math.max(z,O);Ne!==W&&Ne!==qe&&U.push({...r[Ne],x:u}),He!==W&&He!==qe&&U.push({...r[He],x:u})}h>0&&qe!==W&&U.push(r[qe]),U.push(s),E=ze,f=0,Q=te=T,z=O=W=h}}return U}function Tb(r){if(r._decimated){const i=r._data;delete r._decimated,delete r._data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,writable:!0,value:i})}}function Zv(r){r.data.datasets.forEach(i=>{Tb(i)})}function PM(r,i){const l=i.length;let c=0,u;const{iScale:f}=r,{min:h,max:s,minDefined:w,maxDefined:T}=f.getUserBounds();return w&&(c=hn(Dr(i,f.axis,h).lo,0,l-1)),T?u=hn(Dr(i,f.axis,s).hi+1,c,l)-c:u=l-c,{start:c,count:u}}var CM={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(r,i,l)=>{if(!l.enabled){Zv(r);return}const c=r.width;r.data.datasets.forEach((u,f)=>{const{_data:h,indexAxis:s}=u,w=r.getDatasetMeta(f),T=h||u.data;if(Fd([s,r.options.indexAxis])==="y"||!w.controller.supportsDecimation)return;const E=r.scales[w.xAxisID];if(E.type!=="linear"&&E.type!=="time"||r.options.parsing)return;let{start:z,count:O}=PM(w,T);const W=l.threshold||4*c;if(O<=W){Tb(u);return}Lt(h)&&(u._data=T,delete u.data,Object.defineProperty(u,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(te){this._data=te}}));let Q;switch(l.algorithm){case"lttb":Q=TM(T,z,O,c,l);break;case"min-max":Q=MM(T,z,O,c);break;default:throw new Error(`Unsupported decimation algorithm '${l.algorithm}'`)}u._decimated=Q})},destroy(r){Zv(r)}};function EM(r,i,l){const c=r.segments,u=r.points,f=i.points,h=[];for(const s of c){let{start:w,end:T}=s;T=kf(w,T,u);const E=Em(l,u[w],u[T],s.loop);if(!i.segments){h.push({source:s,target:E,start:u[w],end:u[T]});continue}const z=rb(i,E);for(const O of z){const W=Em(l,f[O.start],f[O.end],O.loop),Q=ab(s,u,W);for(const te of Q)h.push({source:te,target:O,start:{[l]:Kv(E,W,"start",Math.max)},end:{[l]:Kv(E,W,"end",Math.min)}})}}return h}function Em(r,i,l,c){if(c)return;let u=i[r],f=l[r];return r==="angle"&&(u=Dn(u),f=Dn(f)),{property:r,start:u,end:f}}function LM(r,i){const{x:l=null,y:c=null}=r||{},u=i.points,f=[];return i.segments.forEach(({start:h,end:s})=>{s=kf(h,s,u);const w=u[h],T=u[s];c!==null?(f.push({x:w.x,y:c}),f.push({x:T.x,y:c})):l!==null&&(f.push({x:l,y:w.y}),f.push({x:l,y:T.y}))}),f}function kf(r,i,l){for(;i>r;i--){const c=l[i];if(!isNaN(c.x)&&!isNaN(c.y))break}return i}function Kv(r,i,l,c){return r&&i?c(r[l],i[l]):r?r[l]:i?i[l]:0}function Mb(r,i){let l=[],c=!1;return Pi(r)?(c=!0,l=r):l=LM(r,i),l.length?new wf({points:l,options:{tension:0},_loop:c,_fullLoop:c}):null}function Yv(r){return r&&r.fill!==!1}function DM(r,i,l){let u=r[i].fill;const f=[i];let h;if(!l)return u;for(;u!==!1&&f.indexOf(u)===-1;){if(!$i(u))return u;if(h=r[u],!h)return!1;if(h.visible)return u;f.push(u),u=h.fill}return!1}function AM(r,i,l){const c=FM(r);if(Dt(c))return isNaN(c.value)?!1:c;let u=parseFloat(c);return $i(u)&&Math.floor(u)===u?IM(c[0],i,u,l):["origin","start","end","stack","shape"].indexOf(c)>=0&&c}function IM(r,i,l,c){return(r==="-"||r==="+")&&(l=i+l),l===i||l<0||l>=c?!1:l}function zM(r,i){let l=null;return r==="start"?l=i.bottom:r==="end"?l=i.top:Dt(r)?l=i.getPixelForValue(r.value):i.getBasePixel&&(l=i.getBasePixel()),l}function RM(r,i,l){let c;return r==="start"?c=l:r==="end"?c=i.options.reverse?i.min:i.max:Dt(r)?c=r.value:c=i.getBaseValue(),c}function FM(r){const i=r.options,l=i.fill;let c=wt(l&&l.target,l);return c===void 0&&(c=!!i.backgroundColor),c===!1||c===null?!1:c===!0?"origin":c}function jM(r){const{scale:i,index:l,line:c}=r,u=[],f=c.segments,h=c.points,s=OM(i,l);s.push(Mb({x:null,y:i.bottom},c));for(let w=0;w<f.length;w++){const T=f[w];for(let E=T.start;E<=T.end;E++)$M(u,h[E],s)}return new wf({points:u,options:{}})}function OM(r,i){const l=[],c=r.getMatchingVisibleMetas("line");for(let u=0;u<c.length;u++){const f=c[u];if(f.index===i)break;f.hidden||l.unshift(f.dataset)}return l}function $M(r,i,l){const c=[];for(let u=0;u<l.length;u++){const f=l[u],{first:h,last:s,point:w}=BM(f,i,"x");if(!(!w||h&&s)){if(h)c.unshift(w);else if(r.push(w),!s)break}}r.push(...c)}function BM(r,i,l){const c=r.interpolate(i,l);if(!c)return{};const u=c[l],f=r.segments,h=r.points;let s=!1,w=!1;for(let T=0;T<f.length;T++){const E=f[T],z=h[E.start][l],O=h[E.end][l];if(Lr(u,z,O)){s=u===z,w=u===O;break}}return{first:s,last:w,point:c}}class Pb{constructor(i){this.x=i.x,this.y=i.y,this.radius=i.radius}pathSegment(i,l,c){const{x:u,y:f,radius:h}=this;return l=l||{start:0,end:xi},i.arc(u,f,h,l.end,l.start,!0),!c.bounds}interpolate(i){const{x:l,y:c,radius:u}=this,f=i.angle;return{x:l+Math.cos(f)*u,y:c+Math.sin(f)*u,angle:f}}}function VM(r){const{chart:i,fill:l,line:c}=r;if($i(l))return NM(i,l);if(l==="stack")return jM(r);if(l==="shape")return!0;const u=UM(r);return u instanceof Pb?u:Mb(u,c)}function NM(r,i){const l=r.getDatasetMeta(i);return l&&r.isDatasetVisible(i)?l.dataset:null}function UM(r){return(r.scale||{}).getPointPositionForValue?qM(r):GM(r)}function GM(r){const{scale:i={},fill:l}=r,c=zM(l,i);if($i(c)){const u=i.isHorizontal();return{x:u?c:null,y:u?null:c}}return null}function qM(r){const{scale:i,fill:l}=r,c=i.options,u=i.getLabels().length,f=c.reverse?i.max:i.min,h=RM(l,i,f),s=[];if(c.grid.circular){const w=i.getPointPositionForValue(0,f);return new Pb({x:w.x,y:w.y,radius:i.getDistanceFromCenterForValue(h)})}for(let w=0;w<u;++w)s.push(i.getPointPositionForValue(w,h));return s}function pm(r,i,l){const c=VM(i),{chart:u,index:f,line:h,scale:s,axis:w}=i,T=h.options,E=T.fill,z=T.backgroundColor,{above:O=z,below:W=z}=E||{},Q=u.getDatasetMeta(f),te=sb(u,Q);c&&h.points.length&&(yf(r,l),WM(r,{line:h,target:c,above:O,below:W,area:l,scale:s,axis:w,clip:te}),vf(r))}function WM(r,i){const{line:l,target:c,above:u,below:f,area:h,scale:s,clip:w}=i,T=l._loop?"angle":i.axis;r.save();let E=f;f!==u&&(T==="x"?(Xv(r,c,h.top),mm(r,{line:l,target:c,color:u,scale:s,property:T,clip:w}),r.restore(),r.save(),Xv(r,c,h.bottom)):T==="y"&&(Jv(r,c,h.left),mm(r,{line:l,target:c,color:f,scale:s,property:T,clip:w}),r.restore(),r.save(),Jv(r,c,h.right),E=u)),mm(r,{line:l,target:c,color:E,scale:s,property:T,clip:w}),r.restore()}function Xv(r,i,l){const{segments:c,points:u}=i;let f=!0,h=!1;r.beginPath();for(const s of c){const{start:w,end:T}=s,E=u[w],z=u[kf(w,T,u)];f?(r.moveTo(E.x,E.y),f=!1):(r.lineTo(E.x,l),r.lineTo(E.x,E.y)),h=!!i.pathSegment(r,s,{move:h}),h?r.closePath():r.lineTo(z.x,l)}r.lineTo(i.first().x,l),r.closePath(),r.clip()}function Jv(r,i,l){const{segments:c,points:u}=i;let f=!0,h=!1;r.beginPath();for(const s of c){const{start:w,end:T}=s,E=u[w],z=u[kf(w,T,u)];f?(r.moveTo(E.x,E.y),f=!1):(r.lineTo(l,E.y),r.lineTo(E.x,E.y)),h=!!i.pathSegment(r,s,{move:h}),h?r.closePath():r.lineTo(l,z.y)}r.lineTo(l,i.first().y),r.closePath(),r.clip()}function mm(r,i){const{line:l,target:c,property:u,color:f,scale:h,clip:s}=i,w=EM(l,c,u);for(const{source:T,target:E,start:z,end:O}of w){const{style:{backgroundColor:W=f}={}}=T,Q=c!==!0;r.save(),r.fillStyle=W,HM(r,h,s,Q&&Em(u,z,O)),r.beginPath();const te=!!l.pathSegment(r,T);let U;if(Q){te?r.closePath():Qv(r,c,O,u);const _e=!!c.pathSegment(r,E,{move:te,reverse:!0});U=te&&_e,U||Qv(r,c,z,u)}r.closePath(),r.fill(U?"evenodd":"nonzero"),r.restore()}}function HM(r,i,l,c){const u=i.chart.chartArea,{property:f,start:h,end:s}=c||{};if(f==="x"||f==="y"){let w,T,E,z;f==="x"?(w=h,T=u.top,E=s,z=u.bottom):(w=u.left,T=h,E=u.right,z=s),r.beginPath(),l&&(w=Math.max(w,l.left),E=Math.min(E,l.right),T=Math.max(T,l.top),z=Math.min(z,l.bottom)),r.rect(w,T,E-w,z-T),r.clip()}}function Qv(r,i,l,c){const u=i.interpolate(l,c);u&&r.lineTo(u.x,u.y)}var ZM={id:"filler",afterDatasetsUpdate(r,i,l){const c=(r.data.datasets||[]).length,u=[];let f,h,s,w;for(h=0;h<c;++h)f=r.getDatasetMeta(h),s=f.dataset,w=null,s&&s.options&&s instanceof wf&&(w={visible:r.isDatasetVisible(h),index:h,fill:AM(s,h,c),chart:r,axis:f.controller.options.indexAxis,scale:f.vScale,line:s}),f.$filler=w,u.push(w);for(h=0;h<c;++h)w=u[h],!(!w||w.fill===!1)&&(w.fill=DM(u,h,l.propagate))},beforeDraw(r,i,l){const c=l.drawTime==="beforeDraw",u=r.getSortedVisibleDatasetMetas(),f=r.chartArea;for(let h=u.length-1;h>=0;--h){const s=u[h].$filler;s&&(s.line.updateControlPoints(f,s.axis),c&&s.fill&&pm(r.ctx,s,f))}},beforeDatasetsDraw(r,i,l){if(l.drawTime!=="beforeDatasetsDraw")return;const c=r.getSortedVisibleDatasetMetas();for(let u=c.length-1;u>=0;--u){const f=c[u].$filler;Yv(f)&&pm(r.ctx,f,r.chartArea)}},beforeDatasetDraw(r,i,l){const c=i.meta.$filler;!Yv(c)||l.drawTime!=="beforeDatasetDraw"||pm(r.ctx,c,r.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ex=(r,i)=>{let{boxHeight:l=i,boxWidth:c=i}=r;return r.usePointStyle&&(l=Math.min(l,i),c=r.pointStyleWidth||Math.min(c,i)),{boxWidth:c,boxHeight:l,itemHeight:Math.max(i,l)}},KM=(r,i)=>r!==null&&i!==null&&r.datasetIndex===i.datasetIndex&&r.index===i.index;class tx extends zr{constructor(i){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,l,c){this.maxWidth=i,this.maxHeight=l,this._margins=c,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const i=this.options.labels||{};let l=hi(i.generateLabels,[this.chart],this)||[];i.filter&&(l=l.filter(c=>i.filter(c,this.chart.data))),i.sort&&(l=l.sort((c,u)=>i.sort(c,u,this.chart.data))),this.options.reverse&&l.reverse(),this.legendItems=l}fit(){const{options:i,ctx:l}=this;if(!i.display){this.width=this.height=0;return}const c=i.labels,u=rn(c.font),f=u.size,h=this._computeTitleHeight(),{boxWidth:s,itemHeight:w}=ex(c,f);let T,E;l.font=u.string,this.isHorizontal()?(T=this.maxWidth,E=this._fitRows(h,f,s,w)+10):(E=this.maxHeight,T=this._fitCols(h,u,s,w)+10),this.width=Math.min(T,i.maxWidth||this.maxWidth),this.height=Math.min(E,i.maxHeight||this.maxHeight)}_fitRows(i,l,c,u){const{ctx:f,maxWidth:h,options:{labels:{padding:s}}}=this,w=this.legendHitBoxes=[],T=this.lineWidths=[0],E=u+s;let z=i;f.textAlign="left",f.textBaseline="middle";let O=-1,W=-E;return this.legendItems.forEach((Q,te)=>{const U=c+l/2+f.measureText(Q.text).width;(te===0||T[T.length-1]+U+2*s>h)&&(z+=E,T[T.length-(te>0?0:1)]=0,W+=E,O++),w[te]={left:0,top:W,row:O,width:U,height:u},T[T.length-1]+=U+s}),z}_fitCols(i,l,c,u){const{ctx:f,maxHeight:h,options:{labels:{padding:s}}}=this,w=this.legendHitBoxes=[],T=this.columnSizes=[],E=h-i;let z=s,O=0,W=0,Q=0,te=0;return this.legendItems.forEach((U,_e)=>{const{itemWidth:pe,itemHeight:xe}=YM(c,l,f,U,u);_e>0&&W+xe+2*s>E&&(z+=O+s,T.push({width:O,height:W}),Q+=O+s,te++,O=W=0),w[_e]={left:Q,top:W,col:te,width:pe,height:xe},O=Math.max(O,pe),W+=xe+s}),z+=O,T.push({width:O,height:W}),z}adjustHitBoxes(){if(!this.options.display)return;const i=this._computeTitleHeight(),{legendHitBoxes:l,options:{align:c,labels:{padding:u},rtl:f}}=this,h=tu(f,this.left,this.width);if(this.isHorizontal()){let s=0,w=Ln(c,this.left+u,this.right-this.lineWidths[s]);for(const T of l)s!==T.row&&(s=T.row,w=Ln(c,this.left+u,this.right-this.lineWidths[s])),T.top+=this.top+i+u,T.left=h.leftForLtr(h.x(w),T.width),w+=T.width+u}else{let s=0,w=Ln(c,this.top+i+u,this.bottom-this.columnSizes[s].height);for(const T of l)T.col!==s&&(s=T.col,w=Ln(c,this.top+i+u,this.bottom-this.columnSizes[s].height)),T.top=w,T.left+=this.left+u,T.left=h.leftForLtr(h.x(T.left),T.width),w+=T.height+u}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const i=this.ctx;yf(i,this),this._draw(),vf(i)}}_draw(){const{options:i,columnSizes:l,lineWidths:c,ctx:u}=this,{align:f,labels:h}=i,s=Ci.color,w=tu(i.rtl,this.left,this.width),T=rn(h.font),{padding:E}=h,z=T.size,O=z/2;let W;this.drawTitle(),u.textAlign=w.textAlign("left"),u.textBaseline="middle",u.lineWidth=.5,u.font=T.string;const{boxWidth:Q,boxHeight:te,itemHeight:U}=ex(h,z),_e=function(qe,Ne,He){if(isNaN(Q)||Q<=0||isNaN(te)||te<0)return;u.save();const rt=wt(He.lineWidth,1);if(u.fillStyle=wt(He.fillStyle,s),u.lineCap=wt(He.lineCap,"butt"),u.lineDashOffset=wt(He.lineDashOffset,0),u.lineJoin=wt(He.lineJoin,"miter"),u.lineWidth=rt,u.strokeStyle=wt(He.strokeStyle,s),u.setLineDash(wt(He.lineDash,[])),h.usePointStyle){const lt={radius:te*Math.SQRT2/2,pointStyle:He.pointStyle,rotation:He.rotation,borderWidth:rt},ct=w.xPlus(qe,Q/2),mt=Ne+O;Hx(u,lt,ct,mt,h.pointStyleWidth&&Q)}else{const lt=Ne+Math.max((z-te)/2,0),ct=w.leftForLtr(qe,Q),mt=Ro(He.borderRadius);u.beginPath(),Object.values(mt).some(jt=>jt!==0)?Yd(u,{x:ct,y:lt,w:Q,h:te,radius:mt}):u.rect(ct,lt,Q,te),u.fill(),rt!==0&&u.stroke()}u.restore()},pe=function(qe,Ne,He){No(u,He.text,qe,Ne+U/2,T,{strikethrough:He.hidden,textAlign:w.textAlign(He.textAlign)})},xe=this.isHorizontal(),Ae=this._computeTitleHeight();xe?W={x:Ln(f,this.left+E,this.right-c[0]),y:this.top+E+Ae,line:0}:W={x:this.left+E,y:Ln(f,this.top+Ae+E,this.bottom-l[0].height),line:0},tb(this.ctx,i.textDirection);const ze=U+E;this.legendItems.forEach((qe,Ne)=>{u.strokeStyle=qe.fontColor,u.fillStyle=qe.fontColor;const He=u.measureText(qe.text).width,rt=w.textAlign(qe.textAlign||(qe.textAlign=h.textAlign)),lt=Q+O+He;let ct=W.x,mt=W.y;w.setWidth(this.width),xe?Ne>0&&ct+lt+E>this.right&&(mt=W.y+=ze,W.line++,ct=W.x=Ln(f,this.left+E,this.right-c[W.line])):Ne>0&&mt+ze>this.bottom&&(ct=W.x=ct+l[W.line].width+E,W.line++,mt=W.y=Ln(f,this.top+Ae+E,this.bottom-l[W.line].height));const jt=w.x(ct);if(_e(jt,mt,qe),ct=sS(rt,ct+Q+O,xe?ct+lt:this.right,i.rtl),pe(w.x(ct),mt,qe),xe)W.x+=lt+E;else if(typeof qe.text!="string"){const Ei=T.lineHeight;W.y+=Cb(qe,Ei)+E}else W.y+=ze}),ib(this.ctx,i.textDirection)}drawTitle(){const i=this.options,l=i.title,c=rn(l.font),u=In(l.padding);if(!l.display)return;const f=tu(i.rtl,this.left,this.width),h=this.ctx,s=l.position,w=c.size/2,T=u.top+w;let E,z=this.left,O=this.width;if(this.isHorizontal())O=Math.max(...this.lineWidths),E=this.top+T,z=Ln(i.align,z,this.right-O);else{const Q=this.columnSizes.reduce((te,U)=>Math.max(te,U.height),0);E=T+Ln(i.align,this.top,this.bottom-Q-i.labels.padding-this._computeTitleHeight())}const W=Ln(s,z,z+O);h.textAlign=f.textAlign(tg(s)),h.textBaseline="middle",h.strokeStyle=l.color,h.fillStyle=l.color,h.font=c.string,No(h,l.text,W,E,c)}_computeTitleHeight(){const i=this.options.title,l=rn(i.font),c=In(i.padding);return i.display?l.lineHeight+c.height:0}_getLegendItemAt(i,l){let c,u,f;if(Lr(i,this.left,this.right)&&Lr(l,this.top,this.bottom)){for(f=this.legendHitBoxes,c=0;c<f.length;++c)if(u=f[c],Lr(i,u.left,u.left+u.width)&&Lr(l,u.top,u.top+u.height))return this.legendItems[c]}return null}handleEvent(i){const l=this.options;if(!QM(i.type,l))return;const c=this._getLegendItemAt(i.x,i.y);if(i.type==="mousemove"||i.type==="mouseout"){const u=this._hoveredItem,f=KM(u,c);u&&!f&&hi(l.onLeave,[i,u,this],this),this._hoveredItem=c,c&&!f&&hi(l.onHover,[i,c,this],this)}else c&&hi(l.onClick,[i,c,this],this)}}function YM(r,i,l,c,u){const f=XM(c,r,i,l),h=JM(u,c,i.lineHeight);return{itemWidth:f,itemHeight:h}}function XM(r,i,l,c){let u=r.text;return u&&typeof u!="string"&&(u=u.reduce((f,h)=>f.length>h.length?f:h)),i+l.size/2+c.measureText(u).width}function JM(r,i,l){let c=r;return typeof i.text!="string"&&(c=Cb(i,l)),c}function Cb(r,i){const l=r.text?r.text.length:0;return i*l}function QM(r,i){return!!((r==="mousemove"||r==="mouseout")&&(i.onHover||i.onLeave)||i.onClick&&(r==="click"||r==="mouseup"))}var eP={id:"legend",_element:tx,start(r,i,l){const c=r.legend=new tx({ctx:r.ctx,options:l,chart:r});An.configure(r,c,l),An.addBox(r,c)},stop(r){An.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,i,l){const c=r.legend;An.configure(r,c,l),c.options=l},afterUpdate(r){const i=r.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(r,i){i.replay||r.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,i,l){const c=i.datasetIndex,u=l.chart;u.isDatasetVisible(c)?(u.hide(c),i.hidden=!0):(u.show(c),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const i=r.data.datasets,{labels:{usePointStyle:l,pointStyle:c,textAlign:u,color:f,useBorderRadius:h,borderRadius:s}}=r.legend.options;return r._getSortedDatasetMetas().map(w=>{const T=w.controller.getStyle(l?0:void 0),E=In(T.borderWidth);return{text:i[w.index].label,fillStyle:T.backgroundColor,fontColor:f,hidden:!w.visible,lineCap:T.borderCapStyle,lineDash:T.borderDash,lineDashOffset:T.borderDashOffset,lineJoin:T.borderJoinStyle,lineWidth:(E.width+E.height)/4,strokeStyle:T.borderColor,pointStyle:c||T.pointStyle,rotation:T.rotation,textAlign:u||T.textAlign,borderRadius:h&&(s||T.borderRadius),datasetIndex:w.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};class hg extends zr{constructor(i){super(),this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,l){const c=this.options;if(this.left=0,this.top=0,!c.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=i,this.height=this.bottom=l;const u=Pi(c.text)?c.text.length:1;this._padding=In(c.padding);const f=u*rn(c.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=f:this.width=f}isHorizontal(){const i=this.options.position;return i==="top"||i==="bottom"}_drawArgs(i){const{top:l,left:c,bottom:u,right:f,options:h}=this,s=h.align;let w=0,T,E,z;return this.isHorizontal()?(E=Ln(s,c,f),z=l+i,T=f-c):(h.position==="left"?(E=c+i,z=Ln(s,u,l),w=Bt*-.5):(E=f-i,z=Ln(s,l,u),w=Bt*.5),T=u-l),{titleX:E,titleY:z,maxWidth:T,rotation:w}}draw(){const i=this.ctx,l=this.options;if(!l.display)return;const c=rn(l.font),f=c.lineHeight/2+this._padding.top,{titleX:h,titleY:s,maxWidth:w,rotation:T}=this._drawArgs(f);No(i,l.text,0,0,c,{color:l.color,maxWidth:w,rotation:T,textAlign:tg(l.align),textBaseline:"middle",translation:[h,s]})}}function tP(r,i){const l=new hg({ctx:r.ctx,options:i,chart:r});An.configure(r,l,i),An.addBox(r,l),r.titleBlock=l}var iP={id:"title",_element:hg,start(r,i,l){tP(r,l)},stop(r){const i=r.titleBlock;An.removeBox(r,i),delete r.titleBlock},beforeUpdate(r,i,l){const c=r.titleBlock;An.configure(r,c,l),c.options=l},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qh=new WeakMap;var nP={id:"subtitle",start(r,i,l){const c=new hg({ctx:r.ctx,options:l,chart:r});An.configure(r,c,l),An.addBox(r,c),qh.set(r,c)},stop(r){An.removeBox(r,qh.get(r)),qh.delete(r)},beforeUpdate(r,i,l){const c=qh.get(r);An.configure(r,c,l),c.options=l},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Od={average(r){if(!r.length)return!1;let i,l,c=new Set,u=0,f=0;for(i=0,l=r.length;i<l;++i){const s=r[i].element;if(s&&s.hasValue()){const w=s.tooltipPosition();c.add(w.x),u+=w.y,++f}}return f===0||c.size===0?!1:{x:[...c].reduce((s,w)=>s+w)/c.size,y:u/f}},nearest(r,i){if(!r.length)return!1;let l=i.x,c=i.y,u=Number.POSITIVE_INFINITY,f,h,s;for(f=0,h=r.length;f<h;++f){const w=r[f].element;if(w&&w.hasValue()){const T=w.getCenterPoint(),E=wm(i,T);E<u&&(u=E,s=w)}}if(s){const w=s.tooltipPosition();l=w.x,c=w.y}return{x:l,y:c}}};function Ya(r,i){return i&&(Pi(i)?Array.prototype.push.apply(r,i):r.push(i)),r}function Cr(r){return(typeof r=="string"||r instanceof String)&&r.indexOf(`
`)>-1?r.split(`
`):r}function aP(r,i){const{element:l,datasetIndex:c,index:u}=i,f=r.getDatasetMeta(c).controller,{label:h,value:s}=f.getLabelAndValue(u);return{chart:r,label:h,parsed:f.getParsed(u),raw:r.data.datasets[c].data[u],formattedValue:s,dataset:f.getDataset(),dataIndex:u,datasetIndex:c,element:l}}function ix(r,i){const l=r.chart.ctx,{body:c,footer:u,title:f}=r,{boxWidth:h,boxHeight:s}=i,w=rn(i.bodyFont),T=rn(i.titleFont),E=rn(i.footerFont),z=f.length,O=u.length,W=c.length,Q=In(i.padding);let te=Q.height,U=0,_e=c.reduce((Ae,ze)=>Ae+ze.before.length+ze.lines.length+ze.after.length,0);if(_e+=r.beforeBody.length+r.afterBody.length,z&&(te+=z*T.lineHeight+(z-1)*i.titleSpacing+i.titleMarginBottom),_e){const Ae=i.displayColors?Math.max(s,w.lineHeight):w.lineHeight;te+=W*Ae+(_e-W)*w.lineHeight+(_e-1)*i.bodySpacing}O&&(te+=i.footerMarginTop+O*E.lineHeight+(O-1)*i.footerSpacing);let pe=0;const xe=function(Ae){U=Math.max(U,l.measureText(Ae).width+pe)};return l.save(),l.font=T.string,Jt(r.title,xe),l.font=w.string,Jt(r.beforeBody.concat(r.afterBody),xe),pe=i.displayColors?h+2+i.boxPadding:0,Jt(c,Ae=>{Jt(Ae.before,xe),Jt(Ae.lines,xe),Jt(Ae.after,xe)}),pe=0,l.font=E.string,Jt(r.footer,xe),l.restore(),U+=Q.width,{width:U,height:te}}function rP(r,i){const{y:l,height:c}=i;return l<c/2?"top":l>r.height-c/2?"bottom":"center"}function sP(r,i,l,c){const{x:u,width:f}=c,h=l.caretSize+l.caretPadding;if(r==="left"&&u+f+h>i.width||r==="right"&&u-f-h<0)return!0}function oP(r,i,l,c){const{x:u,width:f}=l,{width:h,chartArea:{left:s,right:w}}=r;let T="center";return c==="center"?T=u<=(s+w)/2?"left":"right":u<=f/2?T="left":u>=h-f/2&&(T="right"),sP(T,r,i,l)&&(T="center"),T}function nx(r,i,l){const c=l.yAlign||i.yAlign||rP(r,l);return{xAlign:l.xAlign||i.xAlign||oP(r,i,l,c),yAlign:c}}function lP(r,i){let{x:l,width:c}=r;return i==="right"?l-=c:i==="center"&&(l-=c/2),l}function uP(r,i,l){let{y:c,height:u}=r;return i==="top"?c+=l:i==="bottom"?c-=u+l:c-=u/2,c}function ax(r,i,l,c){const{caretSize:u,caretPadding:f,cornerRadius:h}=r,{xAlign:s,yAlign:w}=l,T=u+f,{topLeft:E,topRight:z,bottomLeft:O,bottomRight:W}=Ro(h);let Q=lP(i,s);const te=uP(i,w,T);return w==="center"?s==="left"?Q+=T:s==="right"&&(Q-=T):s==="left"?Q-=Math.max(E,O)+u:s==="right"&&(Q+=Math.max(z,W)+u),{x:hn(Q,0,c.width-i.width),y:hn(te,0,c.height-i.height)}}function Wh(r,i,l){const c=In(l.padding);return i==="center"?r.x+r.width/2:i==="right"?r.x+r.width-c.right:r.x+c.left}function rx(r){return Ya([],Cr(r))}function dP(r,i,l){return Ms(r,{tooltip:i,tooltipItems:l,type:"tooltip"})}function sx(r,i){const l=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return l?r.override(l):r}const Eb={beforeTitle:Mr,title(r){if(r.length>0){const i=r[0],l=i.chart.data.labels,c=l?l.length:0;if(this&&this.options&&this.options.mode==="dataset")return i.dataset.label||"";if(i.label)return i.label;if(c>0&&i.dataIndex<c)return l[i.dataIndex]}return""},afterTitle:Mr,beforeBody:Mr,beforeLabel:Mr,label(r){if(this&&this.options&&this.options.mode==="dataset")return r.label+": "+r.formattedValue||r.formattedValue;let i=r.dataset.label||"";i&&(i+=": ");const l=r.formattedValue;return Lt(l)||(i+=l),i},labelColor(r){const l=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:l.borderColor,backgroundColor:l.backgroundColor,borderWidth:l.borderWidth,borderDash:l.borderDash,borderDashOffset:l.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const l=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:l.pointStyle,rotation:l.rotation}},afterLabel:Mr,afterBody:Mr,beforeFooter:Mr,footer:Mr,afterFooter:Mr};function Xn(r,i,l,c){const u=r[i].call(l,c);return typeof u>"u"?Eb[i].call(l,c):u}class ox extends zr{static positioners=Od;constructor(i){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=i.chart,this.options=i.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(i){this.options=i,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const i=this._cachedAnimations;if(i)return i;const l=this.chart,c=this.options.setContext(this.getContext()),u=c.enabled&&l.options.animation&&c.animations,f=new ob(this.chart,u);return u._cacheable&&(this._cachedAnimations=Object.freeze(f)),f}getContext(){return this.$context||(this.$context=dP(this.chart.getContext(),this,this._tooltipItems))}getTitle(i,l){const{callbacks:c}=l,u=Xn(c,"beforeTitle",this,i),f=Xn(c,"title",this,i),h=Xn(c,"afterTitle",this,i);let s=[];return s=Ya(s,Cr(u)),s=Ya(s,Cr(f)),s=Ya(s,Cr(h)),s}getBeforeBody(i,l){return rx(Xn(l.callbacks,"beforeBody",this,i))}getBody(i,l){const{callbacks:c}=l,u=[];return Jt(i,f=>{const h={before:[],lines:[],after:[]},s=sx(c,f);Ya(h.before,Cr(Xn(s,"beforeLabel",this,f))),Ya(h.lines,Xn(s,"label",this,f)),Ya(h.after,Cr(Xn(s,"afterLabel",this,f))),u.push(h)}),u}getAfterBody(i,l){return rx(Xn(l.callbacks,"afterBody",this,i))}getFooter(i,l){const{callbacks:c}=l,u=Xn(c,"beforeFooter",this,i),f=Xn(c,"footer",this,i),h=Xn(c,"afterFooter",this,i);let s=[];return s=Ya(s,Cr(u)),s=Ya(s,Cr(f)),s=Ya(s,Cr(h)),s}_createItems(i){const l=this._active,c=this.chart.data,u=[],f=[],h=[];let s=[],w,T;for(w=0,T=l.length;w<T;++w)s.push(aP(this.chart,l[w]));return i.filter&&(s=s.filter((E,z,O)=>i.filter(E,z,O,c))),i.itemSort&&(s=s.sort((E,z)=>i.itemSort(E,z,c))),Jt(s,E=>{const z=sx(i.callbacks,E);u.push(Xn(z,"labelColor",this,E)),f.push(Xn(z,"labelPointStyle",this,E)),h.push(Xn(z,"labelTextColor",this,E))}),this.labelColors=u,this.labelPointStyles=f,this.labelTextColors=h,this.dataPoints=s,s}update(i,l){const c=this.options.setContext(this.getContext()),u=this._active;let f,h=[];if(!u.length)this.opacity!==0&&(f={opacity:0});else{const s=Od[c.position].call(this,u,this._eventPosition);h=this._createItems(c),this.title=this.getTitle(h,c),this.beforeBody=this.getBeforeBody(h,c),this.body=this.getBody(h,c),this.afterBody=this.getAfterBody(h,c),this.footer=this.getFooter(h,c);const w=this._size=ix(this,c),T=Object.assign({},s,w),E=nx(this.chart,c,T),z=ax(c,T,E,this.chart);this.xAlign=E.xAlign,this.yAlign=E.yAlign,f={opacity:1,x:z.x,y:z.y,width:w.width,height:w.height,caretX:s.x,caretY:s.y}}this._tooltipItems=h,this.$context=void 0,f&&this._resolveAnimations().update(this,f),i&&c.external&&c.external.call(this,{chart:this.chart,tooltip:this,replay:l})}drawCaret(i,l,c,u){const f=this.getCaretPosition(i,c,u);l.lineTo(f.x1,f.y1),l.lineTo(f.x2,f.y2),l.lineTo(f.x3,f.y3)}getCaretPosition(i,l,c){const{xAlign:u,yAlign:f}=this,{caretSize:h,cornerRadius:s}=c,{topLeft:w,topRight:T,bottomLeft:E,bottomRight:z}=Ro(s),{x:O,y:W}=i,{width:Q,height:te}=l;let U,_e,pe,xe,Ae,ze;return f==="center"?(Ae=W+te/2,u==="left"?(U=O,_e=U-h,xe=Ae+h,ze=Ae-h):(U=O+Q,_e=U+h,xe=Ae-h,ze=Ae+h),pe=U):(u==="left"?_e=O+Math.max(w,E)+h:u==="right"?_e=O+Q-Math.max(T,z)-h:_e=this.caretX,f==="top"?(xe=W,Ae=xe-h,U=_e-h,pe=_e+h):(xe=W+te,Ae=xe+h,U=_e+h,pe=_e-h),ze=xe),{x1:U,x2:_e,x3:pe,y1:xe,y2:Ae,y3:ze}}drawTitle(i,l,c){const u=this.title,f=u.length;let h,s,w;if(f){const T=tu(c.rtl,this.x,this.width);for(i.x=Wh(this,c.titleAlign,c),l.textAlign=T.textAlign(c.titleAlign),l.textBaseline="middle",h=rn(c.titleFont),s=c.titleSpacing,l.fillStyle=c.titleColor,l.font=h.string,w=0;w<f;++w)l.fillText(u[w],T.x(i.x),i.y+h.lineHeight/2),i.y+=h.lineHeight+s,w+1===f&&(i.y+=c.titleMarginBottom-s)}}_drawColorBox(i,l,c,u,f){const h=this.labelColors[c],s=this.labelPointStyles[c],{boxHeight:w,boxWidth:T}=f,E=rn(f.bodyFont),z=Wh(this,"left",f),O=u.x(z),W=w<E.lineHeight?(E.lineHeight-w)/2:0,Q=l.y+W;if(f.usePointStyle){const te={radius:Math.min(T,w)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},U=u.leftForLtr(O,T)+T/2,_e=Q+w/2;i.strokeStyle=f.multiKeyBackground,i.fillStyle=f.multiKeyBackground,Sm(i,te,U,_e),i.strokeStyle=h.borderColor,i.fillStyle=h.backgroundColor,Sm(i,te,U,_e)}else{i.lineWidth=Dt(h.borderWidth)?Math.max(...Object.values(h.borderWidth)):h.borderWidth||1,i.strokeStyle=h.borderColor,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset||0;const te=u.leftForLtr(O,T),U=u.leftForLtr(u.xPlus(O,1),T-2),_e=Ro(h.borderRadius);Object.values(_e).some(pe=>pe!==0)?(i.beginPath(),i.fillStyle=f.multiKeyBackground,Yd(i,{x:te,y:Q,w:T,h:w,radius:_e}),i.fill(),i.stroke(),i.fillStyle=h.backgroundColor,i.beginPath(),Yd(i,{x:U,y:Q+1,w:T-2,h:w-2,radius:_e}),i.fill()):(i.fillStyle=f.multiKeyBackground,i.fillRect(te,Q,T,w),i.strokeRect(te,Q,T,w),i.fillStyle=h.backgroundColor,i.fillRect(U,Q+1,T-2,w-2))}i.fillStyle=this.labelTextColors[c]}drawBody(i,l,c){const{body:u}=this,{bodySpacing:f,bodyAlign:h,displayColors:s,boxHeight:w,boxWidth:T,boxPadding:E}=c,z=rn(c.bodyFont);let O=z.lineHeight,W=0;const Q=tu(c.rtl,this.x,this.width),te=function(He){l.fillText(He,Q.x(i.x+W),i.y+O/2),i.y+=O+f},U=Q.textAlign(h);let _e,pe,xe,Ae,ze,qe,Ne;for(l.textAlign=h,l.textBaseline="middle",l.font=z.string,i.x=Wh(this,U,c),l.fillStyle=c.bodyColor,Jt(this.beforeBody,te),W=s&&U!=="right"?h==="center"?T/2+E:T+2+E:0,Ae=0,qe=u.length;Ae<qe;++Ae){for(_e=u[Ae],pe=this.labelTextColors[Ae],l.fillStyle=pe,Jt(_e.before,te),xe=_e.lines,s&&xe.length&&(this._drawColorBox(l,i,Ae,Q,c),O=Math.max(z.lineHeight,w)),ze=0,Ne=xe.length;ze<Ne;++ze)te(xe[ze]),O=z.lineHeight;Jt(_e.after,te)}W=0,O=z.lineHeight,Jt(this.afterBody,te),i.y-=f}drawFooter(i,l,c){const u=this.footer,f=u.length;let h,s;if(f){const w=tu(c.rtl,this.x,this.width);for(i.x=Wh(this,c.footerAlign,c),i.y+=c.footerMarginTop,l.textAlign=w.textAlign(c.footerAlign),l.textBaseline="middle",h=rn(c.footerFont),l.fillStyle=c.footerColor,l.font=h.string,s=0;s<f;++s)l.fillText(u[s],w.x(i.x),i.y+h.lineHeight/2),i.y+=h.lineHeight+c.footerSpacing}}drawBackground(i,l,c,u){const{xAlign:f,yAlign:h}=this,{x:s,y:w}=i,{width:T,height:E}=c,{topLeft:z,topRight:O,bottomLeft:W,bottomRight:Q}=Ro(u.cornerRadius);l.fillStyle=u.backgroundColor,l.strokeStyle=u.borderColor,l.lineWidth=u.borderWidth,l.beginPath(),l.moveTo(s+z,w),h==="top"&&this.drawCaret(i,l,c,u),l.lineTo(s+T-O,w),l.quadraticCurveTo(s+T,w,s+T,w+O),h==="center"&&f==="right"&&this.drawCaret(i,l,c,u),l.lineTo(s+T,w+E-Q),l.quadraticCurveTo(s+T,w+E,s+T-Q,w+E),h==="bottom"&&this.drawCaret(i,l,c,u),l.lineTo(s+W,w+E),l.quadraticCurveTo(s,w+E,s,w+E-W),h==="center"&&f==="left"&&this.drawCaret(i,l,c,u),l.lineTo(s,w+z),l.quadraticCurveTo(s,w,s+z,w),l.closePath(),l.fill(),u.borderWidth>0&&l.stroke()}_updateAnimationTarget(i){const l=this.chart,c=this.$animations,u=c&&c.x,f=c&&c.y;if(u||f){const h=Od[i.position].call(this,this._active,this._eventPosition);if(!h)return;const s=this._size=ix(this,i),w=Object.assign({},h,this._size),T=nx(l,i,w),E=ax(i,w,T,l);(u._to!==E.x||f._to!==E.y)&&(this.xAlign=T.xAlign,this.yAlign=T.yAlign,this.width=s.width,this.height=s.height,this.caretX=h.x,this.caretY=h.y,this._resolveAnimations().update(this,E))}}_willRender(){return!!this.opacity}draw(i){const l=this.options.setContext(this.getContext());let c=this.opacity;if(!c)return;this._updateAnimationTarget(l);const u={width:this.width,height:this.height},f={x:this.x,y:this.y};c=Math.abs(c)<.001?0:c;const h=In(l.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;l.enabled&&s&&(i.save(),i.globalAlpha=c,this.drawBackground(f,i,u,l),tb(i,l.textDirection),f.y+=h.top,this.drawTitle(f,i,l),this.drawBody(f,i,l),this.drawFooter(f,i,l),ib(i,l.textDirection),i.restore())}getActiveElements(){return this._active||[]}setActiveElements(i,l){const c=this._active,u=i.map(({datasetIndex:s,index:w})=>{const T=this.chart.getDatasetMeta(s);if(!T)throw new Error("Cannot find a dataset at index "+s);return{datasetIndex:s,element:T.data[w],index:w}}),f=!rf(c,u),h=this._positionChanged(u,l);(f||h)&&(this._active=u,this._eventPosition=l,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(i,l,c=!0){if(l&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const u=this.options,f=this._active||[],h=this._getActiveElements(i,f,l,c),s=this._positionChanged(h,i),w=l||!rf(h,f)||s;return w&&(this._active=h,(u.enabled||u.external)&&(this._eventPosition={x:i.x,y:i.y},this.update(!0,l))),w}_getActiveElements(i,l,c,u){const f=this.options;if(i.type==="mouseout")return[];if(!u)return l.filter(s=>this.chart.data.datasets[s.datasetIndex]&&this.chart.getDatasetMeta(s.datasetIndex).controller.getParsed(s.index)!==void 0);const h=this.chart.getElementsAtEventForMode(i,f.mode,f,c);return f.reverse&&h.reverse(),h}_positionChanged(i,l){const{caretX:c,caretY:u,options:f}=this,h=Od[f.position].call(this,i,l);return h!==!1&&(c!==h.x||u!==h.y)}}var cP={id:"tooltip",_element:ox,positioners:Od,afterInit(r,i,l){l&&(r.tooltip=new ox({chart:r,options:l}))},beforeUpdate(r,i,l){r.tooltip&&r.tooltip.initialize(l)},reset(r,i,l){r.tooltip&&r.tooltip.initialize(l)},afterDraw(r){const i=r.tooltip;if(i&&i._willRender()){const l={tooltip:i};if(r.notifyPlugins("beforeTooltipDraw",{...l,cancelable:!0})===!1)return;i.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",l)}},afterEvent(r,i){if(r.tooltip){const l=i.replay;r.tooltip.handleEvent(i.event,l,i.inChartArea)&&(i.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,i)=>i.bodyFont.size,boxWidth:(r,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Eb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>r!=="filter"&&r!=="itemSort"&&r!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},hP=Object.freeze({__proto__:null,Colors:SM,Decimation:CM,Filler:ZM,Legend:eP,SubTitle:nP,Title:iP,Tooltip:cP});const fP=(r,i,l,c)=>(typeof i=="string"?(l=r.push(i)-1,c.unshift({index:l,label:i})):isNaN(i)&&(l=null),l);function pP(r,i,l,c){const u=r.indexOf(i);if(u===-1)return fP(r,i,l,c);const f=r.lastIndexOf(i);return u!==f?l:u}const mP=(r,i)=>r===null?null:hn(Math.round(r),0,i);function lx(r){const i=this.getLabels();return r>=0&&r<i.length?i[r]:r}class gP extends Go{static id="category";static defaults={ticks:{callback:lx}};constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){const l=this._addedLabels;if(l.length){const c=this.getLabels();for(const{index:u,label:f}of l)c[u]===f&&c.splice(u,1);this._addedLabels=[]}super.init(i)}parse(i,l){if(Lt(i))return null;const c=this.getLabels();return l=isFinite(l)&&c[l]===i?l:pP(c,i,wt(l,i),this._addedLabels),mP(l,c.length-1)}determineDataLimits(){const{minDefined:i,maxDefined:l}=this.getUserBounds();let{min:c,max:u}=this.getMinMax(!0);this.options.bounds==="ticks"&&(i||(c=0),l||(u=this.getLabels().length-1)),this.min=c,this.max=u}buildTicks(){const i=this.min,l=this.max,c=this.options.offset,u=[];let f=this.getLabels();f=i===0&&l===f.length-1?f:f.slice(i,l+1),this._valueRange=Math.max(f.length-(c?0:1),1),this._startValue=this.min-(c?.5:0);for(let h=i;h<=l;h++)u.push({value:h});return u}getLabelForValue(i){return lx.call(this,i)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return typeof i!="number"&&(i=this.parse(i)),i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){const l=this.ticks;return i<0||i>l.length-1?null:this.getPixelForValue(l[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}}function _P(r,i){const l=[],{bounds:u,step:f,min:h,max:s,precision:w,count:T,maxTicks:E,maxDigits:z,includeBounds:O}=r,W=f||1,Q=E-1,{min:te,max:U}=i,_e=!Lt(h),pe=!Lt(s),xe=!Lt(T),Ae=(U-te)/(z+1);let ze=iv((U-te)/Q/W)*W,qe,Ne,He,rt;if(ze<1e-14&&!_e&&!pe)return[{value:te},{value:U}];rt=Math.ceil(U/ze)-Math.floor(te/ze),rt>Q&&(ze=iv(rt*ze/Q/W)*W),Lt(w)||(qe=Math.pow(10,w),ze=Math.ceil(ze*qe)/qe),u==="ticks"?(Ne=Math.floor(te/ze)*ze,He=Math.ceil(U/ze)*ze):(Ne=te,He=U),_e&&pe&&f&&Qk((s-h)/f,ze/1e3)?(rt=Math.round(Math.min((s-h)/ze,E)),ze=(s-h)/rt,Ne=h,He=s):xe?(Ne=_e?h:Ne,He=pe?s:He,rt=T-1,ze=(He-Ne)/rt):(rt=(He-Ne)/ze,Vd(rt,Math.round(rt),ze/1e3)?rt=Math.round(rt):rt=Math.ceil(rt));const lt=Math.max(nv(ze),nv(Ne));qe=Math.pow(10,Lt(w)?lt:w),Ne=Math.round(Ne*qe)/qe,He=Math.round(He*qe)/qe;let ct=0;for(_e&&(O&&Ne!==h?(l.push({value:h}),Ne<h&&ct++,Vd(Math.round((Ne+ct*ze)*qe)/qe,h,ux(h,Ae,r))&&ct++):Ne<h&&ct++);ct<rt;++ct){const mt=Math.round((Ne+ct*ze)*qe)/qe;if(pe&&mt>s)break;l.push({value:mt})}return pe&&O&&He!==s?l.length&&Vd(l[l.length-1].value,s,ux(s,Ae,r))?l[l.length-1].value=s:l.push({value:s}):(!pe||He===s)&&l.push({value:He}),l}function ux(r,i,{horizontal:l,minRotation:c}){const u=Da(c),f=(l?Math.sin(u):Math.cos(u))||.001,h=.75*i*(""+r).length;return Math.min(i/f,h)}class hf extends Go{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(i,l){return Lt(i)||(typeof i=="number"||i instanceof Number)&&!isFinite(+i)?null:+i}handleTickRangeOptions(){const{beginAtZero:i}=this.options,{minDefined:l,maxDefined:c}=this.getUserBounds();let{min:u,max:f}=this;const h=w=>u=l?u:w,s=w=>f=c?f:w;if(i){const w=Qa(u),T=Qa(f);w<0&&T<0?s(0):w>0&&T>0&&h(0)}if(u===f){let w=f===0?1:Math.abs(f*.05);s(f+w),i||h(u-w)}this.min=u,this.max=f}getTickLimit(){const i=this.options.ticks;let{maxTicksLimit:l,stepSize:c}=i,u;return c?(u=Math.ceil(this.max/c)-Math.floor(this.min/c)+1,u>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${c} would result generating up to ${u} ticks. Limiting to 1000.`),u=1e3)):(u=this.computeTickLimit(),l=l||11),l&&(u=Math.min(l,u)),u}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const i=this.options,l=i.ticks;let c=this.getTickLimit();c=Math.max(2,c);const u={maxTicks:c,bounds:i.bounds,min:i.min,max:i.max,precision:l.precision,step:l.stepSize,count:l.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:l.minRotation||0,includeBounds:l.includeBounds!==!1},f=this._range||this,h=_P(u,f);return i.bounds==="ticks"&&Ox(h,this,"value"),i.reverse?(h.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),h}configure(){const i=this.ticks;let l=this.min,c=this.max;if(super.configure(),this.options.offset&&i.length){const u=(c-l)/Math.max(i.length-1,1)/2;l-=u,c+=u}this._startValue=l,this._endValue=c,this._valueRange=c-l}getLabelForValue(i){return tc(i,this.chart.options.locale,this.options.ticks.format)}}class yP extends hf{static id="linear";static defaults={ticks:{callback:_f.formatters.numeric}};determineDataLimits(){const{min:i,max:l}=this.getMinMax(!0);this.min=$i(i)?i:0,this.max=$i(l)?l:1,this.handleTickRangeOptions()}computeTickLimit(){const i=this.isHorizontal(),l=i?this.width:this.height,c=Da(this.options.ticks.minRotation),u=(i?Math.sin(c):Math.cos(c))||.001,f=this._resolveTickFontOptions(0);return Math.ceil(l/Math.min(40,f.lineHeight/u))}getPixelForValue(i){return i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getValueForPixel(i){return this._startValue+this.getDecimalForPixel(i)*this._valueRange}}const Jd=r=>Math.floor(ys(r)),Lo=(r,i)=>Math.pow(10,Jd(r)+i);function dx(r){return r/Math.pow(10,Jd(r))===1}function cx(r,i,l){const c=Math.pow(10,l),u=Math.floor(r/c);return Math.ceil(i/c)-u}function vP(r,i){const l=i-r;let c=Jd(l);for(;cx(r,i,c)>10;)c++;for(;cx(r,i,c)<10;)c--;return Math.min(c,Jd(r))}function xP(r,{min:i,max:l}){i=ha(r.min,i);const c=[],u=Jd(i);let f=vP(i,l),h=f<0?Math.pow(10,Math.abs(f)):1;const s=Math.pow(10,f),w=u>f?Math.pow(10,u):0,T=Math.round((i-w)*h)/h,E=Math.floor((i-w)/s/10)*s*10;let z=Math.floor((T-E)/Math.pow(10,f)),O=ha(r.min,Math.round((w+E+z*Math.pow(10,f))*h)/h);for(;O<l;)c.push({value:O,major:dx(O),significand:z}),z>=10?z=z<15?15:20:z++,z>=20&&(f++,z=2,h=f>=0?1:h),O=Math.round((w+E+z*Math.pow(10,f))*h)/h;const W=ha(r.max,O);return c.push({value:W,major:dx(W),significand:z}),c}class bP extends Go{static id="logarithmic";static defaults={ticks:{callback:_f.formatters.logarithmic,major:{enabled:!0}}};constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(i,l){const c=hf.prototype.parse.apply(this,[i,l]);if(c===0){this._zero=!0;return}return $i(c)&&c>0?c:null}determineDataLimits(){const{min:i,max:l}=this.getMinMax(!0);this.min=$i(i)?Math.max(0,i):null,this.max=$i(l)?Math.max(0,l):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!$i(this._userMin)&&(this.min=i===Lo(this.min,0)?Lo(this.min,-1):Lo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:i,maxDefined:l}=this.getUserBounds();let c=this.min,u=this.max;const f=s=>c=i?c:s,h=s=>u=l?u:s;c===u&&(c<=0?(f(1),h(10)):(f(Lo(c,-1)),h(Lo(u,1)))),c<=0&&f(Lo(u,-1)),u<=0&&h(Lo(c,1)),this.min=c,this.max=u}buildTicks(){const i=this.options,l={min:this._userMin,max:this._userMax},c=xP(l,this);return i.bounds==="ticks"&&Ox(c,this,"value"),i.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}getLabelForValue(i){return i===void 0?"0":tc(i,this.chart.options.locale,this.options.ticks.format)}configure(){const i=this.min;super.configure(),this._startValue=ys(i),this._valueRange=ys(this.max)-ys(i)}getPixelForValue(i){return(i===void 0||i===0)&&(i=this.min),i===null||isNaN(i)?NaN:this.getPixelForDecimal(i===this.min?0:(ys(i)-this._startValue)/this._valueRange)}getValueForPixel(i){const l=this.getDecimalForPixel(i);return Math.pow(10,this._startValue+l*this._valueRange)}}function Lm(r){const i=r.ticks;if(i.display&&r.display){const l=In(i.backdropPadding);return wt(i.font&&i.font.size,Ci.font.size)+l.height}return 0}function wP(r,i,l){return l=Pi(l)?l:[l],{w:gS(r,i.string,l),h:l.length*i.lineHeight}}function hx(r,i,l,c,u){return r===c||r===u?{start:i-l/2,end:i+l/2}:r<c||r>u?{start:i-l,end:i}:{start:i,end:i+l}}function kP(r){const i={l:r.left+r._padding.left,r:r.right-r._padding.right,t:r.top+r._padding.top,b:r.bottom-r._padding.bottom},l=Object.assign({},i),c=[],u=[],f=r._pointLabels.length,h=r.options.pointLabels,s=h.centerPointLabels?Bt/f:0;for(let w=0;w<f;w++){const T=h.setContext(r.getPointLabelContext(w));u[w]=T.padding;const E=r.getPointPosition(w,r.drawingArea+u[w],s),z=rn(T.font),O=wP(r.ctx,z,r._pointLabels[w]);c[w]=O;const W=Dn(r.getIndexAngle(w)+s),Q=Math.round(Qm(W)),te=hx(Q,E.x,O.w,0,180),U=hx(Q,E.y,O.h,90,270);SP(l,i,W,te,U)}r.setCenterPoint(i.l-l.l,l.r-i.r,i.t-l.t,l.b-i.b),r._pointLabelItems=PP(r,c,u)}function SP(r,i,l,c,u){const f=Math.abs(Math.sin(l)),h=Math.abs(Math.cos(l));let s=0,w=0;c.start<i.l?(s=(i.l-c.start)/f,r.l=Math.min(r.l,i.l-s)):c.end>i.r&&(s=(c.end-i.r)/f,r.r=Math.max(r.r,i.r+s)),u.start<i.t?(w=(i.t-u.start)/h,r.t=Math.min(r.t,i.t-w)):u.end>i.b&&(w=(u.end-i.b)/h,r.b=Math.max(r.b,i.b+w))}function TP(r,i,l){const c=r.drawingArea,{extra:u,additionalAngle:f,padding:h,size:s}=l,w=r.getPointPosition(i,c+u+h,f),T=Math.round(Qm(Dn(w.angle+Ni))),E=LP(w.y,s.h,T),z=CP(T),O=EP(w.x,s.w,z);return{visible:!0,x:w.x,y:E,textAlign:z,left:O,top:E,right:O+s.w,bottom:E+s.h}}function MP(r,i){if(!i)return!0;const{left:l,top:c,right:u,bottom:f}=r;return!(Ar({x:l,y:c},i)||Ar({x:l,y:f},i)||Ar({x:u,y:c},i)||Ar({x:u,y:f},i))}function PP(r,i,l){const c=[],u=r._pointLabels.length,f=r.options,{centerPointLabels:h,display:s}=f.pointLabels,w={extra:Lm(f)/2,additionalAngle:h?Bt/u:0};let T;for(let E=0;E<u;E++){w.padding=l[E],w.size=i[E];const z=TP(r,E,w);c.push(z),s==="auto"&&(z.visible=MP(z,T),z.visible&&(T=z))}return c}function CP(r){return r===0||r===180?"center":r<180?"left":"right"}function EP(r,i,l){return l==="right"?r-=i:l==="center"&&(r-=i/2),r}function LP(r,i,l){return l===90||l===270?r-=i/2:(l>270||l<90)&&(r-=i),r}function DP(r,i,l){const{left:c,top:u,right:f,bottom:h}=l,{backdropColor:s}=i;if(!Lt(s)){const w=Ro(i.borderRadius),T=In(i.backdropPadding);r.fillStyle=s;const E=c-T.left,z=u-T.top,O=f-c+T.width,W=h-u+T.height;Object.values(w).some(Q=>Q!==0)?(r.beginPath(),Yd(r,{x:E,y:z,w:O,h:W,radius:w}),r.fill()):r.fillRect(E,z,O,W)}}function AP(r,i){const{ctx:l,options:{pointLabels:c}}=r;for(let u=i-1;u>=0;u--){const f=r._pointLabelItems[u];if(!f.visible)continue;const h=c.setContext(r.getPointLabelContext(u));DP(l,h,f);const s=rn(h.font),{x:w,y:T,textAlign:E}=f;No(l,r._pointLabels[u],w,T+s.lineHeight/2,s,{color:h.color,textAlign:E,textBaseline:"middle"})}}function Lb(r,i,l,c){const{ctx:u}=r;if(l)u.arc(r.xCenter,r.yCenter,i,0,xi);else{let f=r.getPointPosition(0,i);u.moveTo(f.x,f.y);for(let h=1;h<c;h++)f=r.getPointPosition(h,i),u.lineTo(f.x,f.y)}}function IP(r,i,l,c,u){const f=r.ctx,h=i.circular,{color:s,lineWidth:w}=i;!h&&!c||!s||!w||l<0||(f.save(),f.strokeStyle=s,f.lineWidth=w,f.setLineDash(u.dash||[]),f.lineDashOffset=u.dashOffset,f.beginPath(),Lb(r,l,h,c),f.closePath(),f.stroke(),f.restore())}function zP(r,i,l){return Ms(r,{label:l,index:i,type:"pointLabel"})}class RP extends hf{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_f.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(i){return i},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(i){super(i),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const i=this._padding=In(Lm(this.options)/2),l=this.width=this.maxWidth-i.width,c=this.height=this.maxHeight-i.height;this.xCenter=Math.floor(this.left+l/2+i.left),this.yCenter=Math.floor(this.top+c/2+i.top),this.drawingArea=Math.floor(Math.min(l,c)/2)}determineDataLimits(){const{min:i,max:l}=this.getMinMax(!1);this.min=$i(i)&&!isNaN(i)?i:0,this.max=$i(l)&&!isNaN(l)?l:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Lm(this.options))}generateTickLabels(i){hf.prototype.generateTickLabels.call(this,i),this._pointLabels=this.getLabels().map((l,c)=>{const u=hi(this.options.pointLabels.callback,[l,c],this);return u||u===0?u:""}).filter((l,c)=>this.chart.getDataVisibility(c))}fit(){const i=this.options;i.display&&i.pointLabels.display?kP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(i,l,c,u){this.xCenter+=Math.floor((i-l)/2),this.yCenter+=Math.floor((c-u)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(i,l,c,u))}getIndexAngle(i){const l=xi/(this._pointLabels.length||1),c=this.options.startAngle||0;return Dn(i*l+Da(c))}getDistanceFromCenterForValue(i){if(Lt(i))return NaN;const l=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-i)*l:(i-this.min)*l}getValueForDistanceFromCenter(i){if(Lt(i))return NaN;const l=i/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-l:this.min+l}getPointLabelContext(i){const l=this._pointLabels||[];if(i>=0&&i<l.length){const c=l[i];return zP(this.getContext(),i,c)}}getPointPosition(i,l,c=0){const u=this.getIndexAngle(i)-Ni+c;return{x:Math.cos(u)*l+this.xCenter,y:Math.sin(u)*l+this.yCenter,angle:u}}getPointPositionForValue(i,l){return this.getPointPosition(i,this.getDistanceFromCenterForValue(l))}getBasePosition(i){return this.getPointPositionForValue(i||0,this.getBaseValue())}getPointLabelPosition(i){const{left:l,top:c,right:u,bottom:f}=this._pointLabelItems[i];return{left:l,top:c,right:u,bottom:f}}drawBackground(){const{backgroundColor:i,grid:{circular:l}}=this.options;if(i){const c=this.ctx;c.save(),c.beginPath(),Lb(this,this.getDistanceFromCenterForValue(this._endValue),l,this._pointLabels.length),c.closePath(),c.fillStyle=i,c.fill(),c.restore()}}drawGrid(){const i=this.ctx,l=this.options,{angleLines:c,grid:u,border:f}=l,h=this._pointLabels.length;let s,w,T;if(l.pointLabels.display&&AP(this,h),u.display&&this.ticks.forEach((E,z)=>{if(z!==0||z===0&&this.min<0){w=this.getDistanceFromCenterForValue(E.value);const O=this.getContext(z),W=u.setContext(O),Q=f.setContext(O);IP(this,W,w,h,Q)}}),c.display){for(i.save(),s=h-1;s>=0;s--){const E=c.setContext(this.getPointLabelContext(s)),{color:z,lineWidth:O}=E;!O||!z||(i.lineWidth=O,i.strokeStyle=z,i.setLineDash(E.borderDash),i.lineDashOffset=E.borderDashOffset,w=this.getDistanceFromCenterForValue(l.reverse?this.min:this.max),T=this.getPointPosition(s,w),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(T.x,T.y),i.stroke())}i.restore()}}drawBorder(){}drawLabels(){const i=this.ctx,l=this.options,c=l.ticks;if(!c.display)return;const u=this.getIndexAngle(0);let f,h;i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(u),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((s,w)=>{if(w===0&&this.min>=0&&!l.reverse)return;const T=c.setContext(this.getContext(w)),E=rn(T.font);if(f=this.getDistanceFromCenterForValue(this.ticks[w].value),T.showLabelBackdrop){i.font=E.string,h=i.measureText(s.label).width,i.fillStyle=T.backdropColor;const z=In(T.backdropPadding);i.fillRect(-h/2-z.left,-f-E.size/2-z.top,h+z.width,E.size+z.height)}No(i,s.label,0,-f,E,{color:T.color,strokeColor:T.textStrokeColor,strokeWidth:T.textStrokeWidth})}),i.restore()}drawTitle(){}}const Sf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(Sf);function fx(r,i){return r-i}function px(r,i){if(Lt(i))return null;const l=r._adapter,{parser:c,round:u,isoWeekday:f}=r._parseOpts;let h=i;return typeof c=="function"&&(h=c(h)),$i(h)||(h=typeof c=="string"?l.parse(h,c):l.parse(h)),h===null?null:(u&&(h=u==="week"&&(iu(f)||f===!0)?l.startOf(h,"isoWeek",f):l.startOf(h,u)),+h)}function mx(r,i,l,c){const u=Jn.length;for(let f=Jn.indexOf(r);f<u-1;++f){const h=Sf[Jn[f]],s=h.steps?h.steps:Number.MAX_SAFE_INTEGER;if(h.common&&Math.ceil((l-i)/(s*h.size))<=c)return Jn[f]}return Jn[u-1]}function FP(r,i,l,c,u){for(let f=Jn.length-1;f>=Jn.indexOf(l);f--){const h=Jn[f];if(Sf[h].common&&r._adapter.diff(u,c,h)>=i-1)return h}return Jn[l?Jn.indexOf(l):0]}function jP(r){for(let i=Jn.indexOf(r)+1,l=Jn.length;i<l;++i)if(Sf[Jn[i]].common)return Jn[i]}function gx(r,i,l){if(!l)r[i]=!0;else if(l.length){const{lo:c,hi:u}=eg(l,i),f=l[c]>=i?l[c]:l[u];r[f]=!0}}function OP(r,i,l,c){const u=r._adapter,f=+u.startOf(i[0].value,c),h=i[i.length-1].value;let s,w;for(s=f;s<=h;s=+u.add(s,1,c))w=l[s],w>=0&&(i[w].major=!0);return i}function _x(r,i,l){const c=[],u={},f=i.length;let h,s;for(h=0;h<f;++h)s=i[h],u[s]=h,c.push({value:s,major:!1});return f===0||!l?c:OP(r,c,u,l)}class Dm extends Go{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(i){super(i),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(i,l={}){const c=i.time||(i.time={}),u=this._adapter=new $T._date(i.adapters.date);u.init(l),Bd(c.displayFormats,u.formats()),this._parseOpts={parser:c.parser,round:c.round,isoWeekday:c.isoWeekday},super.init(i),this._normalized=l.normalized}parse(i,l){return i===void 0?null:px(this,i)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const i=this.options,l=this._adapter,c=i.time.unit||"day";let{min:u,max:f,minDefined:h,maxDefined:s}=this.getUserBounds();function w(T){!h&&!isNaN(T.min)&&(u=Math.min(u,T.min)),!s&&!isNaN(T.max)&&(f=Math.max(f,T.max))}(!h||!s)&&(w(this._getLabelBounds()),(i.bounds!=="ticks"||i.ticks.source!=="labels")&&w(this.getMinMax(!1))),u=$i(u)&&!isNaN(u)?u:+l.startOf(Date.now(),c),f=$i(f)&&!isNaN(f)?f:+l.endOf(Date.now(),c)+1,this.min=Math.min(u,f-1),this.max=Math.max(u+1,f)}_getLabelBounds(){const i=this.getLabelTimestamps();let l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return i.length&&(l=i[0],c=i[i.length-1]),{min:l,max:c}}buildTicks(){const i=this.options,l=i.time,c=i.ticks,u=c.source==="labels"?this.getLabelTimestamps():this._generate();i.bounds==="ticks"&&u.length&&(this.min=this._userMin||u[0],this.max=this._userMax||u[u.length-1]);const f=this.min,h=this.max,s=nS(u,f,h);return this._unit=l.unit||(c.autoSkip?mx(l.minUnit,this.min,this.max,this._getLabelCapacity(f)):FP(this,s.length,l.minUnit,this.min,this.max)),this._majorUnit=!c.major.enabled||this._unit==="year"?void 0:jP(this._unit),this.initOffsets(u),i.reverse&&s.reverse(),_x(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(i=>+i.value))}initOffsets(i=[]){let l=0,c=0,u,f;this.options.offset&&i.length&&(u=this.getDecimalForValue(i[0]),i.length===1?l=1-u:l=(this.getDecimalForValue(i[1])-u)/2,f=this.getDecimalForValue(i[i.length-1]),i.length===1?c=f:c=(f-this.getDecimalForValue(i[i.length-2]))/2);const h=i.length<3?.5:.25;l=hn(l,0,h),c=hn(c,0,h),this._offsets={start:l,end:c,factor:1/(l+1+c)}}_generate(){const i=this._adapter,l=this.min,c=this.max,u=this.options,f=u.time,h=f.unit||mx(f.minUnit,l,c,this._getLabelCapacity(l)),s=wt(u.ticks.stepSize,1),w=h==="week"?f.isoWeekday:!1,T=iu(w)||w===!0,E={};let z=l,O,W;if(T&&(z=+i.startOf(z,"isoWeek",w)),z=+i.startOf(z,T?"day":h),i.diff(c,l,h)>1e5*s)throw new Error(l+" and "+c+" are too far apart with stepSize of "+s+" "+h);const Q=u.ticks.source==="data"&&this.getDataTimestamps();for(O=z,W=0;O<c;O=+i.add(O,s,h),W++)gx(E,O,Q);return(O===c||u.bounds==="ticks"||W===1)&&gx(E,O,Q),Object.keys(E).sort(fx).map(te=>+te)}getLabelForValue(i){const l=this._adapter,c=this.options.time;return c.tooltipFormat?l.format(i,c.tooltipFormat):l.format(i,c.displayFormats.datetime)}format(i,l){const u=this.options.time.displayFormats,f=this._unit,h=l||u[f];return this._adapter.format(i,h)}_tickFormatFunction(i,l,c,u){const f=this.options,h=f.ticks.callback;if(h)return hi(h,[i,l,c],this);const s=f.time.displayFormats,w=this._unit,T=this._majorUnit,E=w&&s[w],z=T&&s[T],O=c[l],W=T&&z&&O&&O.major;return this._adapter.format(i,u||(W?z:E))}generateTickLabels(i){let l,c,u;for(l=0,c=i.length;l<c;++l)u=i[l],u.label=this._tickFormatFunction(u.value,l,i)}getDecimalForValue(i){return i===null?NaN:(i-this.min)/(this.max-this.min)}getPixelForValue(i){const l=this._offsets,c=this.getDecimalForValue(i);return this.getPixelForDecimal((l.start+c)*l.factor)}getValueForPixel(i){const l=this._offsets,c=this.getDecimalForPixel(i)/l.factor-l.end;return this.min+c*(this.max-this.min)}_getLabelSize(i){const l=this.options.ticks,c=this.ctx.measureText(i).width,u=Da(this.isHorizontal()?l.maxRotation:l.minRotation),f=Math.cos(u),h=Math.sin(u),s=this._resolveTickFontOptions(0).size;return{w:c*f+s*h,h:c*h+s*f}}_getLabelCapacity(i){const l=this.options.time,c=l.displayFormats,u=c[l.unit]||c.millisecond,f=this._tickFormatFunction(i,0,_x(this,[i],this._majorUnit),u),h=this._getLabelSize(f),s=Math.floor(this.isHorizontal()?this.width/h.w:this.height/h.h)-1;return s>0?s:1}getDataTimestamps(){let i=this._cache.data||[],l,c;if(i.length)return i;const u=this.getMatchingVisibleMetas();if(this._normalized&&u.length)return this._cache.data=u[0].controller.getAllParsedValues(this);for(l=0,c=u.length;l<c;++l)i=i.concat(u[l].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const i=this._cache.labels||[];let l,c;if(i.length)return i;const u=this.getLabels();for(l=0,c=u.length;l<c;++l)i.push(px(this,u[l]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(i){return Vx(i.sort(fx))}}function Hh(r,i,l){let c=0,u=r.length-1,f,h,s,w;l?(i>=r[c].pos&&i<=r[u].pos&&({lo:c,hi:u}=Dr(r,"pos",i)),{pos:f,time:s}=r[c],{pos:h,time:w}=r[u]):(i>=r[c].time&&i<=r[u].time&&({lo:c,hi:u}=Dr(r,"time",i)),{time:f,pos:s}=r[c],{time:h,pos:w}=r[u]);const T=h-f;return T?s+(w-s)*(i-f)/T:s}class $P extends Dm{static id="timeseries";static defaults=Dm.defaults;constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const i=this._getTimestampsForTable(),l=this._table=this.buildLookupTable(i);this._minPos=Hh(l,this.min),this._tableRange=Hh(l,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){const{min:l,max:c}=this,u=[],f=[];let h,s,w,T,E;for(h=0,s=i.length;h<s;++h)T=i[h],T>=l&&T<=c&&u.push(T);if(u.length<2)return[{time:l,pos:0},{time:c,pos:1}];for(h=0,s=u.length;h<s;++h)E=u[h+1],w=u[h-1],T=u[h],Math.round((E+w)/2)!==T&&f.push({time:T,pos:h/(s-1)});return f}_generate(){const i=this.min,l=this.max;let c=super.getDataTimestamps();return(!c.includes(i)||!c.length)&&c.splice(0,0,i),(!c.includes(l)||c.length===1)&&c.push(l),c.sort((u,f)=>u-f)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;const l=this.getDataTimestamps(),c=this.getLabelTimestamps();return l.length&&c.length?i=this.normalize(l.concat(c)):i=l.length?l:c,i=this._cache.all=i,i}getDecimalForValue(i){return(Hh(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){const l=this._offsets,c=this.getDecimalForPixel(i)/l.factor-l.end;return Hh(this._table,c*this._tableRange+this._minPos,!0)}}var BP=Object.freeze({__proto__:null,CategoryScale:gP,LinearScale:yP,LogarithmicScale:bP,RadialLinearScale:RP,TimeScale:Dm,TimeSeriesScale:$P});const VP=[OT,_M,hP,BP];cg.register(...VP);var Am=!1,Im=!1,jo=[],zm=-1;function NP(r){UP(r)}function UP(r){jo.includes(r)||jo.push(r),qP()}function GP(r){let i=jo.indexOf(r);i!==-1&&i>zm&&jo.splice(i,1)}function qP(){!Im&&!Am&&(Am=!0,queueMicrotask(WP))}function WP(){Am=!1,Im=!0;for(let r=0;r<jo.length;r++)jo[r](),zm=r;jo.length=0,zm=-1,Im=!1}var ou,qo,lu,Db,Rm=!0;function HP(r){Rm=!1,r(),Rm=!0}function ZP(r){ou=r.reactive,lu=r.release,qo=i=>r.effect(i,{scheduler:l=>{Rm?NP(l):l()}}),Db=r.raw}function yx(r){qo=r}function KP(r){let i=()=>{};return[c=>{let u=qo(c);return r._x_effects||(r._x_effects=new Set,r._x_runEffects=()=>{r._x_effects.forEach(f=>f())}),r._x_effects.add(u),i=()=>{u!==void 0&&(r._x_effects.delete(u),lu(u))},u},()=>{i()}]}function Ab(r,i){let l=!0,c,u=qo(()=>{let f=r();JSON.stringify(f),l?c=f:queueMicrotask(()=>{i(f,c),c=f}),l=!1});return()=>lu(u)}var Ib=[],zb=[],Rb=[];function YP(r){Rb.push(r)}function fg(r,i){typeof i=="function"?(r._x_cleanups||(r._x_cleanups=[]),r._x_cleanups.push(i)):(i=r,zb.push(i))}function Fb(r){Ib.push(r)}function jb(r,i,l){r._x_attributeCleanups||(r._x_attributeCleanups={}),r._x_attributeCleanups[i]||(r._x_attributeCleanups[i]=[]),r._x_attributeCleanups[i].push(l)}function Ob(r,i){r._x_attributeCleanups&&Object.entries(r._x_attributeCleanups).forEach(([l,c])=>{(i===void 0||i.includes(l))&&(c.forEach(u=>u()),delete r._x_attributeCleanups[l])})}function XP(r){for(r._x_effects?.forEach(GP);r._x_cleanups?.length;)r._x_cleanups.pop()()}var pg=new MutationObserver(yg),mg=!1;function gg(){pg.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),mg=!0}function $b(){JP(),pg.disconnect(),mg=!1}var Ad=[];function JP(){let r=pg.takeRecords();Ad.push(()=>r.length>0&&yg(r));let i=Ad.length;queueMicrotask(()=>{if(Ad.length===i)for(;Ad.length>0;)Ad.shift()()})}function zi(r){if(!mg)return r();$b();let i=r();return gg(),i}var _g=!1,ff=[];function QP(){_g=!0}function eC(){_g=!1,yg(ff),ff=[]}function yg(r){if(_g){ff=ff.concat(r);return}let i=[],l=new Set,c=new Map,u=new Map;for(let f=0;f<r.length;f++)if(!r[f].target._x_ignoreMutationObserver&&(r[f].type==="childList"&&(r[f].removedNodes.forEach(h=>{h.nodeType===1&&h._x_marker&&l.add(h)}),r[f].addedNodes.forEach(h=>{if(h.nodeType===1){if(l.has(h)){l.delete(h);return}h._x_marker||i.push(h)}})),r[f].type==="attributes")){let h=r[f].target,s=r[f].attributeName,w=r[f].oldValue,T=()=>{c.has(h)||c.set(h,[]),c.get(h).push({name:s,value:h.getAttribute(s)})},E=()=>{u.has(h)||u.set(h,[]),u.get(h).push(s)};h.hasAttribute(s)&&w===null?T():h.hasAttribute(s)?(E(),T()):E()}u.forEach((f,h)=>{Ob(h,f)}),c.forEach((f,h)=>{Ib.forEach(s=>s(h,f))});for(let f of l)i.some(h=>h.contains(f))||zb.forEach(h=>h(f));for(let f of i)f.isConnected&&Rb.forEach(h=>h(f));i=null,l=null,c=null,u=null}function Bb(r){return nc(ru(r))}function ic(r,i,l){return r._x_dataStack=[i,...ru(l||r)],()=>{r._x_dataStack=r._x_dataStack.filter(c=>c!==i)}}function ru(r){return r._x_dataStack?r._x_dataStack:typeof ShadowRoot=="function"&&r instanceof ShadowRoot?ru(r.host):r.parentNode?ru(r.parentNode):[]}function nc(r){return new Proxy({objects:r},tC)}var tC={ownKeys({objects:r}){return Array.from(new Set(r.flatMap(i=>Object.keys(i))))},has({objects:r},i){return i==Symbol.unscopables?!1:r.some(l=>Object.prototype.hasOwnProperty.call(l,i)||Reflect.has(l,i))},get({objects:r},i,l){return i=="toJSON"?iC:Reflect.get(r.find(c=>Reflect.has(c,i))||{},i,l)},set({objects:r},i,l,c){const u=r.find(h=>Object.prototype.hasOwnProperty.call(h,i))||r[r.length-1],f=Object.getOwnPropertyDescriptor(u,i);return f?.set&&f?.get?f.set.call(c,l)||!0:Reflect.set(u,i,l)}};function iC(){return Reflect.ownKeys(this).reduce((i,l)=>(i[l]=Reflect.get(this,l),i),{})}function Vb(r){let i=c=>typeof c=="object"&&!Array.isArray(c)&&c!==null,l=(c,u="")=>{Object.entries(Object.getOwnPropertyDescriptors(c)).forEach(([f,{value:h,enumerable:s}])=>{if(s===!1||h===void 0||typeof h=="object"&&h!==null&&h.__v_skip)return;let w=u===""?f:`${u}.${f}`;typeof h=="object"&&h!==null&&h._x_interceptor?c[f]=h.initialize(r,w,f):i(h)&&h!==c&&!(h instanceof Element)&&l(h,w)})};return l(r)}function Nb(r,i=()=>{}){let l={initialValue:void 0,_x_interceptor:!0,initialize(c,u,f){return r(this.initialValue,()=>nC(c,u),h=>Fm(c,u,h),u,f)}};return i(l),c=>{if(typeof c=="object"&&c!==null&&c._x_interceptor){let u=l.initialize.bind(l);l.initialize=(f,h,s)=>{let w=c.initialize(f,h,s);return l.initialValue=w,u(f,h,s)}}else l.initialValue=c;return l}}function nC(r,i){return i.split(".").reduce((l,c)=>l[c],r)}function Fm(r,i,l){if(typeof i=="string"&&(i=i.split(".")),i.length===1)r[i[0]]=l;else{if(i.length===0)throw error;return r[i[0]]||(r[i[0]]={}),Fm(r[i[0]],i.slice(1),l)}}var Ub={};function Ia(r,i){Ub[r]=i}function jm(r,i){let l=aC(i);return Object.entries(Ub).forEach(([c,u])=>{Object.defineProperty(r,`$${c}`,{get(){return u(i,l)},enumerable:!1})}),r}function aC(r){let[i,l]=Yb(r),c={interceptor:Nb,...i};return fg(r,l),c}function rC(r,i,l,...c){try{return l(...c)}catch(u){Qd(u,r,i)}}function Qd(...r){return Gb(...r)}var Gb=oC;function sC(r){Gb=r}function oC(r,i,l=void 0){r=Object.assign(r??{message:"No error message given."},{el:i,expression:l}),console.warn(`Alpine Expression Error: ${r.message}

${l?'Expression: "'+l+`"

`:""}`,i),setTimeout(()=>{throw r},0)}var nf=!0;function qb(r){let i=nf;nf=!1;let l=r();return nf=i,l}function Oo(r,i,l={}){let c;return Nn(r,i)(u=>c=u,l),c}function Nn(...r){return Wb(...r)}var Wb=Hb;function lC(r){Wb=r}function Hb(r,i){let l={};jm(l,r);let c=[l,...ru(r)],u=typeof i=="function"?uC(c,i):cC(c,i,r);return rC.bind(null,r,i,u)}function uC(r,i){return(l=()=>{},{scope:c={},params:u=[],context:f}={})=>{let h=i.apply(nc([c,...r]),u);pf(l,h)}}var gm={};function dC(r,i){if(gm[r])return gm[r];let l=Object.getPrototypeOf(async function(){}).constructor,c=/^[\n\s]*if.*\(.*\)/.test(r.trim())||/^(let|const)\s/.test(r.trim())?`(async()=>{ ${r} })()`:r,f=(()=>{try{let h=new l(["__self","scope"],`with (scope) { __self.result = ${c} }; __self.finished = true; return __self.result;`);return Object.defineProperty(h,"name",{value:`[Alpine] ${r}`}),h}catch(h){return Qd(h,i,r),Promise.resolve()}})();return gm[r]=f,f}function cC(r,i,l){let c=dC(i,l);return(u=()=>{},{scope:f={},params:h=[],context:s}={})=>{c.result=void 0,c.finished=!1;let w=nc([f,...r]);if(typeof c=="function"){let T=c.call(s,c,w).catch(E=>Qd(E,l,i));c.finished?(pf(u,c.result,w,h,l),c.result=void 0):T.then(E=>{pf(u,E,w,h,l)}).catch(E=>Qd(E,l,i)).finally(()=>c.result=void 0)}}}function pf(r,i,l,c,u){if(nf&&typeof i=="function"){let f=i.apply(l,c);f instanceof Promise?f.then(h=>pf(r,h,l,c)).catch(h=>Qd(h,u,i)):r(f)}else typeof i=="object"&&i instanceof Promise?i.then(f=>r(f)):r(i)}var vg="x-";function uu(r=""){return vg+r}function hC(r){vg=r}var mf={};function Xi(r,i){return mf[r]=i,{before(l){if(!mf[l]){console.warn(String.raw`Cannot find directive \`${l}\`. \`${r}\` will use the default order of execution`);return}const c=zo.indexOf(l);zo.splice(c>=0?c:zo.indexOf("DEFAULT"),0,r)}}}function fC(r){return Object.keys(mf).includes(r)}function xg(r,i,l){if(i=Array.from(i),r._x_virtualDirectives){let f=Object.entries(r._x_virtualDirectives).map(([s,w])=>({name:s,value:w})),h=Zb(f);f=f.map(s=>h.find(w=>w.name===s.name)?{name:`x-bind:${s.name}`,value:`"${s.value}"`}:s),i=i.concat(f)}let c={};return i.map(Qb((f,h)=>c[f]=h)).filter(tw).map(gC(c,l)).sort(_C).map(f=>mC(r,f))}function Zb(r){return Array.from(r).map(Qb()).filter(i=>!tw(i))}var Om=!1,$d=new Map,Kb=Symbol();function pC(r){Om=!0;let i=Symbol();Kb=i,$d.set(i,[]);let l=()=>{for(;$d.get(i).length;)$d.get(i).shift()();$d.delete(i)},c=()=>{Om=!1,l()};r(l),c()}function Yb(r){let i=[],l=s=>i.push(s),[c,u]=KP(r);return i.push(u),[{Alpine:ac,effect:c,cleanup:l,evaluateLater:Nn.bind(Nn,r),evaluate:Oo.bind(Oo,r)},()=>i.forEach(s=>s())]}function mC(r,i){let l=()=>{},c=mf[i.type]||l,[u,f]=Yb(r);jb(r,i.original,f);let h=()=>{r._x_ignore||r._x_ignoreSelf||(c.inline&&c.inline(r,i,u),c=c.bind(c,r,i,u),Om?$d.get(Kb).push(c):c())};return h.runCleanups=f,h}var Xb=(r,i)=>({name:l,value:c})=>(l.startsWith(r)&&(l=l.replace(r,i)),{name:l,value:c}),Jb=r=>r;function Qb(r=()=>{}){return({name:i,value:l})=>{let{name:c,value:u}=ew.reduce((f,h)=>h(f),{name:i,value:l});return c!==i&&r(c,i),{name:c,value:u}}}var ew=[];function bg(r){ew.push(r)}function tw({name:r}){return iw().test(r)}var iw=()=>new RegExp(`^${vg}([^:^.]+)\\b`);function gC(r,i){return({name:l,value:c})=>{let u=l.match(iw()),f=l.match(/:([a-zA-Z0-9\-_:]+)/),h=l.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],s=i||r[l]||l;return{type:u?u[1]:null,value:f?f[1]:null,modifiers:h.map(w=>w.replace(".","")),expression:c,original:s}}}var $m="DEFAULT",zo=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",$m,"teleport"];function _C(r,i){let l=zo.indexOf(r.type)===-1?$m:r.type,c=zo.indexOf(i.type)===-1?$m:i.type;return zo.indexOf(l)-zo.indexOf(c)}function Gd(r,i,l={}){r.dispatchEvent(new CustomEvent(i,{detail:l,bubbles:!0,composed:!0,cancelable:!0}))}function Uo(r,i){if(typeof ShadowRoot=="function"&&r instanceof ShadowRoot){Array.from(r.children).forEach(u=>Uo(u,i));return}let l=!1;if(i(r,()=>l=!0),l)return;let c=r.firstElementChild;for(;c;)Uo(c,i),c=c.nextElementSibling}function xa(r,...i){console.warn(`Alpine Warning: ${r}`,...i)}var vx=!1;function yC(){vx&&xa("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),vx=!0,document.body||xa("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Gd(document,"alpine:init"),Gd(document,"alpine:initializing"),gg(),YP(i=>Ir(i,Uo)),fg(i=>cu(i)),Fb((i,l)=>{xg(i,l).forEach(c=>c())});let r=i=>!Tf(i.parentElement,!0);Array.from(document.querySelectorAll(rw().join(","))).filter(r).forEach(i=>{Ir(i)}),Gd(document,"alpine:initialized"),setTimeout(()=>{wC()})}var wg=[],nw=[];function aw(){return wg.map(r=>r())}function rw(){return wg.concat(nw).map(r=>r())}function sw(r){wg.push(r)}function ow(r){nw.push(r)}function Tf(r,i=!1){return du(r,l=>{if((i?rw():aw()).some(u=>l.matches(u)))return!0})}function du(r,i){if(r){if(i(r))return r;if(r._x_teleportBack&&(r=r._x_teleportBack),!!r.parentElement)return du(r.parentElement,i)}}function vC(r){return aw().some(i=>r.matches(i))}var lw=[];function xC(r){lw.push(r)}var bC=1;function Ir(r,i=Uo,l=()=>{}){du(r,c=>c._x_ignore)||pC(()=>{i(r,(c,u)=>{c._x_marker||(l(c,u),lw.forEach(f=>f(c,u)),xg(c,c.attributes).forEach(f=>f()),c._x_ignore||(c._x_marker=bC++),c._x_ignore&&u())})})}function cu(r,i=Uo){i(r,l=>{XP(l),Ob(l),delete l._x_marker})}function wC(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([i,l,c])=>{fC(l)||c.some(u=>{if(document.querySelector(u))return xa(`found "${u}", but missing ${i} plugin`),!0})})}var Bm=[],kg=!1;function Sg(r=()=>{}){return queueMicrotask(()=>{kg||setTimeout(()=>{Vm()})}),new Promise(i=>{Bm.push(()=>{r(),i()})})}function Vm(){for(kg=!1;Bm.length;)Bm.shift()()}function kC(){kg=!0}function Tg(r,i){return Array.isArray(i)?xx(r,i.join(" ")):typeof i=="object"&&i!==null?SC(r,i):typeof i=="function"?Tg(r,i()):xx(r,i)}function xx(r,i){let l=u=>u.split(" ").filter(f=>!r.classList.contains(f)).filter(Boolean),c=u=>(r.classList.add(...u),()=>{r.classList.remove(...u)});return i=i===!0?i="":i||"",c(l(i))}function SC(r,i){let l=s=>s.split(" ").filter(Boolean),c=Object.entries(i).flatMap(([s,w])=>w?l(s):!1).filter(Boolean),u=Object.entries(i).flatMap(([s,w])=>w?!1:l(s)).filter(Boolean),f=[],h=[];return u.forEach(s=>{r.classList.contains(s)&&(r.classList.remove(s),h.push(s))}),c.forEach(s=>{r.classList.contains(s)||(r.classList.add(s),f.push(s))}),()=>{h.forEach(s=>r.classList.add(s)),f.forEach(s=>r.classList.remove(s))}}function Mf(r,i){return typeof i=="object"&&i!==null?TC(r,i):MC(r,i)}function TC(r,i){let l={};return Object.entries(i).forEach(([c,u])=>{l[c]=r.style[c],c.startsWith("--")||(c=PC(c)),r.style.setProperty(c,u)}),setTimeout(()=>{r.style.length===0&&r.removeAttribute("style")}),()=>{Mf(r,l)}}function MC(r,i){let l=r.getAttribute("style",i);return r.setAttribute("style",i),()=>{r.setAttribute("style",l||"")}}function PC(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nm(r,i=()=>{}){let l=!1;return function(){l?i.apply(this,arguments):(l=!0,r.apply(this,arguments))}}Xi("transition",(r,{value:i,modifiers:l,expression:c},{evaluate:u})=>{typeof c=="function"&&(c=u(c)),c!==!1&&(!c||typeof c=="boolean"?EC(r,l,i):CC(r,c,i))});function CC(r,i,l){uw(r,Tg,""),{enter:u=>{r._x_transition.enter.during=u},"enter-start":u=>{r._x_transition.enter.start=u},"enter-end":u=>{r._x_transition.enter.end=u},leave:u=>{r._x_transition.leave.during=u},"leave-start":u=>{r._x_transition.leave.start=u},"leave-end":u=>{r._x_transition.leave.end=u}}[l](i)}function EC(r,i,l){uw(r,Mf);let c=!i.includes("in")&&!i.includes("out")&&!l,u=c||i.includes("in")||["enter"].includes(l),f=c||i.includes("out")||["leave"].includes(l);i.includes("in")&&!c&&(i=i.filter((_e,pe)=>pe<i.indexOf("out"))),i.includes("out")&&!c&&(i=i.filter((_e,pe)=>pe>i.indexOf("out")));let h=!i.includes("opacity")&&!i.includes("scale"),s=h||i.includes("opacity"),w=h||i.includes("scale"),T=s?0:1,E=w?Id(i,"scale",95)/100:1,z=Id(i,"delay",0)/1e3,O=Id(i,"origin","center"),W="opacity, transform",Q=Id(i,"duration",150)/1e3,te=Id(i,"duration",75)/1e3,U="cubic-bezier(0.4, 0.0, 0.2, 1)";u&&(r._x_transition.enter.during={transformOrigin:O,transitionDelay:`${z}s`,transitionProperty:W,transitionDuration:`${Q}s`,transitionTimingFunction:U},r._x_transition.enter.start={opacity:T,transform:`scale(${E})`},r._x_transition.enter.end={opacity:1,transform:"scale(1)"}),f&&(r._x_transition.leave.during={transformOrigin:O,transitionDelay:`${z}s`,transitionProperty:W,transitionDuration:`${te}s`,transitionTimingFunction:U},r._x_transition.leave.start={opacity:1,transform:"scale(1)"},r._x_transition.leave.end={opacity:T,transform:`scale(${E})`})}function uw(r,i,l={}){r._x_transition||(r._x_transition={enter:{during:l,start:l,end:l},leave:{during:l,start:l,end:l},in(c=()=>{},u=()=>{}){Um(r,i,{during:this.enter.during,start:this.enter.start,end:this.enter.end},c,u)},out(c=()=>{},u=()=>{}){Um(r,i,{during:this.leave.during,start:this.leave.start,end:this.leave.end},c,u)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(r,i,l,c){const u=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let f=()=>u(l);if(i){r._x_transition&&(r._x_transition.enter||r._x_transition.leave)?r._x_transition.enter&&(Object.entries(r._x_transition.enter.during).length||Object.entries(r._x_transition.enter.start).length||Object.entries(r._x_transition.enter.end).length)?r._x_transition.in(l):f():r._x_transition?r._x_transition.in(l):f();return}r._x_hidePromise=r._x_transition?new Promise((h,s)=>{r._x_transition.out(()=>{},()=>h(c)),r._x_transitioning&&r._x_transitioning.beforeCancel(()=>s({isFromCancelledTransition:!0}))}):Promise.resolve(c),queueMicrotask(()=>{let h=dw(r);h?(h._x_hideChildren||(h._x_hideChildren=[]),h._x_hideChildren.push(r)):u(()=>{let s=w=>{let T=Promise.all([w._x_hidePromise,...(w._x_hideChildren||[]).map(s)]).then(([E])=>E?.());return delete w._x_hidePromise,delete w._x_hideChildren,T};s(r).catch(w=>{if(!w.isFromCancelledTransition)throw w})})})};function dw(r){let i=r.parentNode;if(i)return i._x_hidePromise?i:dw(i)}function Um(r,i,{during:l,start:c,end:u}={},f=()=>{},h=()=>{}){if(r._x_transitioning&&r._x_transitioning.cancel(),Object.keys(l).length===0&&Object.keys(c).length===0&&Object.keys(u).length===0){f(),h();return}let s,w,T;LC(r,{start(){s=i(r,c)},during(){w=i(r,l)},before:f,end(){s(),T=i(r,u)},after:h,cleanup(){w(),T()}})}function LC(r,i){let l,c,u,f=Nm(()=>{zi(()=>{l=!0,c||i.before(),u||(i.end(),Vm()),i.after(),r.isConnected&&i.cleanup(),delete r._x_transitioning})});r._x_transitioning={beforeCancels:[],beforeCancel(h){this.beforeCancels.push(h)},cancel:Nm(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();f()}),finish:f},zi(()=>{i.start(),i.during()}),kC(),requestAnimationFrame(()=>{if(l)return;let h=Number(getComputedStyle(r).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,s=Number(getComputedStyle(r).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;h===0&&(h=Number(getComputedStyle(r).animationDuration.replace("s",""))*1e3),zi(()=>{i.before()}),c=!0,requestAnimationFrame(()=>{l||(zi(()=>{i.end()}),Vm(),setTimeout(r._x_transitioning.finish,h+s),u=!0)})})}function Id(r,i,l){if(r.indexOf(i)===-1)return l;const c=r[r.indexOf(i)+1];if(!c||i==="scale"&&isNaN(c))return l;if(i==="duration"||i==="delay"){let u=c.match(/([0-9]+)ms/);if(u)return u[1]}return i==="origin"&&["top","right","left","center","bottom"].includes(r[r.indexOf(i)+2])?[c,r[r.indexOf(i)+2]].join(" "):c}var Ss=!1;function Cs(r,i=()=>{}){return(...l)=>Ss?i(...l):r(...l)}function DC(r){return(...i)=>Ss&&r(...i)}var cw=[];function Pf(r){cw.push(r)}function AC(r,i){cw.forEach(l=>l(r,i)),Ss=!0,hw(()=>{Ir(i,(l,c)=>{c(l,()=>{})})}),Ss=!1}var Gm=!1;function IC(r,i){i._x_dataStack||(i._x_dataStack=r._x_dataStack),Ss=!0,Gm=!0,hw(()=>{zC(i)}),Ss=!1,Gm=!1}function zC(r){let i=!1;Ir(r,(c,u)=>{Uo(c,(f,h)=>{if(i&&vC(f))return h();i=!0,u(f,h)})})}function hw(r){let i=qo;yx((l,c)=>{let u=i(l);return lu(u),()=>{}}),r(),yx(i)}function fw(r,i,l,c=[]){switch(r._x_bindings||(r._x_bindings=ou({})),r._x_bindings[i]=l,i=c.includes("camel")?NC(i):i,i){case"value":RC(r,l);break;case"style":jC(r,l);break;case"class":FC(r,l);break;case"selected":case"checked":OC(r,i,l);break;default:pw(r,i,l);break}}function RC(r,i){if(_w(r))r.attributes.value===void 0&&(r.value=i),window.fromModel&&(typeof i=="boolean"?r.checked=af(r.value)===i:r.checked=bx(r.value,i));else if(Mg(r))Number.isInteger(i)?r.value=i:!Array.isArray(i)&&typeof i!="boolean"&&![null,void 0].includes(i)?r.value=String(i):Array.isArray(i)?r.checked=i.some(l=>bx(l,r.value)):r.checked=!!i;else if(r.tagName==="SELECT")VC(r,i);else{if(r.value===i)return;r.value=i===void 0?"":i}}function FC(r,i){r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedClasses=Tg(r,i)}function jC(r,i){r._x_undoAddedStyles&&r._x_undoAddedStyles(),r._x_undoAddedStyles=Mf(r,i)}function OC(r,i,l){pw(r,i,l),BC(r,i,l)}function pw(r,i,l){[null,void 0,!1].includes(l)&&GC(i)?r.removeAttribute(i):(mw(i)&&(l=i),$C(r,i,l))}function $C(r,i,l){r.getAttribute(i)!=l&&r.setAttribute(i,l)}function BC(r,i,l){r[i]!==l&&(r[i]=l)}function VC(r,i){const l=[].concat(i).map(c=>c+"");Array.from(r.options).forEach(c=>{c.selected=l.includes(c.value)})}function NC(r){return r.toLowerCase().replace(/-(\w)/g,(i,l)=>l.toUpperCase())}function bx(r,i){return r==i}function af(r){return[1,"1","true","on","yes",!0].includes(r)?!0:[0,"0","false","off","no",!1].includes(r)?!1:r?!!r:null}var UC=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function mw(r){return UC.has(r)}function GC(r){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(r)}function qC(r,i,l){return r._x_bindings&&r._x_bindings[i]!==void 0?r._x_bindings[i]:gw(r,i,l)}function WC(r,i,l,c=!0){if(r._x_bindings&&r._x_bindings[i]!==void 0)return r._x_bindings[i];if(r._x_inlineBindings&&r._x_inlineBindings[i]!==void 0){let u=r._x_inlineBindings[i];return u.extract=c,qb(()=>Oo(r,u.expression))}return gw(r,i,l)}function gw(r,i,l){let c=r.getAttribute(i);return c===null?typeof l=="function"?l():l:c===""?!0:mw(i)?!![i,"true"].includes(c):c}function Mg(r){return r.type==="checkbox"||r.localName==="ui-checkbox"||r.localName==="ui-switch"}function _w(r){return r.type==="radio"||r.localName==="ui-radio"}function yw(r,i){let l;return function(){const c=this,u=arguments,f=function(){l=null,r.apply(c,u)};clearTimeout(l),l=setTimeout(f,i)}}function vw(r,i){let l;return function(){let c=this,u=arguments;l||(r.apply(c,u),l=!0,setTimeout(()=>l=!1,i))}}function xw({get:r,set:i},{get:l,set:c}){let u=!0,f,h=qo(()=>{let s=r(),w=l();if(u)c(_m(s)),u=!1;else{let T=JSON.stringify(s),E=JSON.stringify(w);T!==f?c(_m(s)):T!==E&&i(_m(w))}f=JSON.stringify(r()),JSON.stringify(l())});return()=>{lu(h)}}function _m(r){return typeof r=="object"?JSON.parse(JSON.stringify(r)):r}function HC(r){(Array.isArray(r)?r:[r]).forEach(l=>l(ac))}var Io={},wx=!1;function ZC(r,i){if(wx||(Io=ou(Io),wx=!0),i===void 0)return Io[r];Io[r]=i,Vb(Io[r]),typeof i=="object"&&i!==null&&i.hasOwnProperty("init")&&typeof i.init=="function"&&Io[r].init()}function KC(){return Io}var bw={};function YC(r,i){let l=typeof i!="function"?()=>i:i;return r instanceof Element?ww(r,l()):(bw[r]=l,()=>{})}function XC(r){return Object.entries(bw).forEach(([i,l])=>{Object.defineProperty(r,i,{get(){return(...c)=>l(...c)}})}),r}function ww(r,i,l){let c=[];for(;c.length;)c.pop()();let u=Object.entries(i).map(([h,s])=>({name:h,value:s})),f=Zb(u);return u=u.map(h=>f.find(s=>s.name===h.name)?{name:`x-bind:${h.name}`,value:`"${h.value}"`}:h),xg(r,u,l).map(h=>{c.push(h.runCleanups),h()}),()=>{for(;c.length;)c.pop()()}}var kw={};function JC(r,i){kw[r]=i}function QC(r,i){return Object.entries(kw).forEach(([l,c])=>{Object.defineProperty(r,l,{get(){return(...u)=>c.bind(i)(...u)},enumerable:!1})}),r}var eE={get reactive(){return ou},get release(){return lu},get effect(){return qo},get raw(){return Db},version:"3.15.2",flushAndStopDeferringMutations:eC,dontAutoEvaluateFunctions:qb,disableEffectScheduling:HP,startObservingMutations:gg,stopObservingMutations:$b,setReactivityEngine:ZP,onAttributeRemoved:jb,onAttributesAdded:Fb,closestDataStack:ru,skipDuringClone:Cs,onlyDuringClone:DC,addRootSelector:sw,addInitSelector:ow,setErrorHandler:sC,interceptClone:Pf,addScopeToNode:ic,deferMutations:QP,mapAttributes:bg,evaluateLater:Nn,interceptInit:xC,setEvaluator:lC,mergeProxies:nc,extractProp:WC,findClosest:du,onElRemoved:fg,closestRoot:Tf,destroyTree:cu,interceptor:Nb,transition:Um,setStyles:Mf,mutateDom:zi,directive:Xi,entangle:xw,throttle:vw,debounce:yw,evaluate:Oo,initTree:Ir,nextTick:Sg,prefixed:uu,prefix:hC,plugin:HC,magic:Ia,store:ZC,start:yC,clone:IC,cloneNode:AC,bound:qC,$data:Bb,watch:Ab,walk:Uo,data:JC,bind:YC},ac=eE;function tE(r,i){const l=Object.create(null),c=r.split(",");for(let u=0;u<c.length;u++)l[c[u]]=!0;return u=>!!l[u]}var iE=Object.freeze({}),nE=Object.prototype.hasOwnProperty,Cf=(r,i)=>nE.call(r,i),$o=Array.isArray,qd=r=>Sw(r)==="[object Map]",aE=r=>typeof r=="string",Pg=r=>typeof r=="symbol",Ef=r=>r!==null&&typeof r=="object",rE=Object.prototype.toString,Sw=r=>rE.call(r),Tw=r=>Sw(r).slice(8,-1),Cg=r=>aE(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,sE=r=>{const i=Object.create(null);return l=>i[l]||(i[l]=r(l))},oE=sE(r=>r.charAt(0).toUpperCase()+r.slice(1)),Mw=(r,i)=>r!==i&&(r===r||i===i),qm=new WeakMap,zd=[],Ja,Bo=Symbol("iterate"),Wm=Symbol("Map key iterate");function lE(r){return r&&r._isEffect===!0}function uE(r,i=iE){lE(r)&&(r=r.raw);const l=hE(r,i);return i.lazy||l(),l}function dE(r){r.active&&(Pw(r),r.options.onStop&&r.options.onStop(),r.active=!1)}var cE=0;function hE(r,i){const l=function(){if(!l.active)return r();if(!zd.includes(l)){Pw(l);try{return pE(),zd.push(l),Ja=l,r()}finally{zd.pop(),Cw(),Ja=zd[zd.length-1]}}};return l.id=cE++,l.allowRecurse=!!i.allowRecurse,l._isEffect=!0,l.active=!0,l.raw=r,l.deps=[],l.options=i,l}function Pw(r){const{deps:i}=r;if(i.length){for(let l=0;l<i.length;l++)i[l].delete(r);i.length=0}}var su=!0,Eg=[];function fE(){Eg.push(su),su=!1}function pE(){Eg.push(su),su=!0}function Cw(){const r=Eg.pop();su=r===void 0?!0:r}function Aa(r,i,l){if(!su||Ja===void 0)return;let c=qm.get(r);c||qm.set(r,c=new Map);let u=c.get(l);u||c.set(l,u=new Set),u.has(Ja)||(u.add(Ja),Ja.deps.push(u),Ja.options.onTrack&&Ja.options.onTrack({effect:Ja,target:r,type:i,key:l}))}function Ts(r,i,l,c,u,f){const h=qm.get(r);if(!h)return;const s=new Set,w=E=>{E&&E.forEach(z=>{(z!==Ja||z.allowRecurse)&&s.add(z)})};if(i==="clear")h.forEach(w);else if(l==="length"&&$o(r))h.forEach((E,z)=>{(z==="length"||z>=c)&&w(E)});else switch(l!==void 0&&w(h.get(l)),i){case"add":$o(r)?Cg(l)&&w(h.get("length")):(w(h.get(Bo)),qd(r)&&w(h.get(Wm)));break;case"delete":$o(r)||(w(h.get(Bo)),qd(r)&&w(h.get(Wm)));break;case"set":qd(r)&&w(h.get(Bo));break}const T=E=>{E.options.onTrigger&&E.options.onTrigger({effect:E,target:r,key:l,type:i,newValue:c,oldValue:u,oldTarget:f}),E.options.scheduler?E.options.scheduler(E):E()};s.forEach(T)}var mE=tE("__proto__,__v_isRef,__isVue"),Ew=new Set(Object.getOwnPropertyNames(Symbol).map(r=>Symbol[r]).filter(Pg)),gE=Lw(),_E=Lw(!0),kx=yE();function yE(){const r={};return["includes","indexOf","lastIndexOf"].forEach(i=>{r[i]=function(...l){const c=bi(this);for(let f=0,h=this.length;f<h;f++)Aa(c,"get",f+"");const u=c[i](...l);return u===-1||u===!1?c[i](...l.map(bi)):u}}),["push","pop","shift","unshift","splice"].forEach(i=>{r[i]=function(...l){fE();const c=bi(this)[i].apply(this,l);return Cw(),c}}),r}function Lw(r=!1,i=!1){return function(c,u,f){if(u==="__v_isReactive")return!r;if(u==="__v_isReadonly")return r;if(u==="__v_raw"&&f===(r?i?AE:zw:i?DE:Iw).get(c))return c;const h=$o(c);if(!r&&h&&Cf(kx,u))return Reflect.get(kx,u,f);const s=Reflect.get(c,u,f);return(Pg(u)?Ew.has(u):mE(u))||(r||Aa(c,"get",u),i)?s:Hm(s)?!h||!Cg(u)?s.value:s:Ef(s)?r?Rw(s):Ig(s):s}}var vE=xE();function xE(r=!1){return function(l,c,u,f){let h=l[c];if(!r&&(u=bi(u),h=bi(h),!$o(l)&&Hm(h)&&!Hm(u)))return h.value=u,!0;const s=$o(l)&&Cg(c)?Number(c)<l.length:Cf(l,c),w=Reflect.set(l,c,u,f);return l===bi(f)&&(s?Mw(u,h)&&Ts(l,"set",c,u,h):Ts(l,"add",c,u)),w}}function bE(r,i){const l=Cf(r,i),c=r[i],u=Reflect.deleteProperty(r,i);return u&&l&&Ts(r,"delete",i,void 0,c),u}function wE(r,i){const l=Reflect.has(r,i);return(!Pg(i)||!Ew.has(i))&&Aa(r,"has",i),l}function kE(r){return Aa(r,"iterate",$o(r)?"length":Bo),Reflect.ownKeys(r)}var SE={get:gE,set:vE,deleteProperty:bE,has:wE,ownKeys:kE},TE={get:_E,set(r,i){return console.warn(`Set operation on key "${String(i)}" failed: target is readonly.`,r),!0},deleteProperty(r,i){return console.warn(`Delete operation on key "${String(i)}" failed: target is readonly.`,r),!0}},Lg=r=>Ef(r)?Ig(r):r,Dg=r=>Ef(r)?Rw(r):r,Ag=r=>r,Lf=r=>Reflect.getPrototypeOf(r);function Zh(r,i,l=!1,c=!1){r=r.__v_raw;const u=bi(r),f=bi(i);i!==f&&!l&&Aa(u,"get",i),!l&&Aa(u,"get",f);const{has:h}=Lf(u),s=c?Ag:l?Dg:Lg;if(h.call(u,i))return s(r.get(i));if(h.call(u,f))return s(r.get(f));r!==u&&r.get(i)}function Kh(r,i=!1){const l=this.__v_raw,c=bi(l),u=bi(r);return r!==u&&!i&&Aa(c,"has",r),!i&&Aa(c,"has",u),r===u?l.has(r):l.has(r)||l.has(u)}function Yh(r,i=!1){return r=r.__v_raw,!i&&Aa(bi(r),"iterate",Bo),Reflect.get(r,"size",r)}function Sx(r){r=bi(r);const i=bi(this);return Lf(i).has.call(i,r)||(i.add(r),Ts(i,"add",r,r)),this}function Tx(r,i){i=bi(i);const l=bi(this),{has:c,get:u}=Lf(l);let f=c.call(l,r);f?Aw(l,c,r):(r=bi(r),f=c.call(l,r));const h=u.call(l,r);return l.set(r,i),f?Mw(i,h)&&Ts(l,"set",r,i,h):Ts(l,"add",r,i),this}function Mx(r){const i=bi(this),{has:l,get:c}=Lf(i);let u=l.call(i,r);u?Aw(i,l,r):(r=bi(r),u=l.call(i,r));const f=c?c.call(i,r):void 0,h=i.delete(r);return u&&Ts(i,"delete",r,void 0,f),h}function Px(){const r=bi(this),i=r.size!==0,l=qd(r)?new Map(r):new Set(r),c=r.clear();return i&&Ts(r,"clear",void 0,void 0,l),c}function Xh(r,i){return function(c,u){const f=this,h=f.__v_raw,s=bi(h),w=i?Ag:r?Dg:Lg;return!r&&Aa(s,"iterate",Bo),h.forEach((T,E)=>c.call(u,w(T),w(E),f))}}function Jh(r,i,l){return function(...c){const u=this.__v_raw,f=bi(u),h=qd(f),s=r==="entries"||r===Symbol.iterator&&h,w=r==="keys"&&h,T=u[r](...c),E=l?Ag:i?Dg:Lg;return!i&&Aa(f,"iterate",w?Wm:Bo),{next(){const{value:z,done:O}=T.next();return O?{value:z,done:O}:{value:s?[E(z[0]),E(z[1])]:E(z),done:O}},[Symbol.iterator](){return this}}}}function gs(r){return function(...i){{const l=i[0]?`on key "${i[0]}" `:"";console.warn(`${oE(r)} operation ${l}failed: target is readonly.`,bi(this))}return r==="delete"?!1:this}}function ME(){const r={get(f){return Zh(this,f)},get size(){return Yh(this)},has:Kh,add:Sx,set:Tx,delete:Mx,clear:Px,forEach:Xh(!1,!1)},i={get(f){return Zh(this,f,!1,!0)},get size(){return Yh(this)},has:Kh,add:Sx,set:Tx,delete:Mx,clear:Px,forEach:Xh(!1,!0)},l={get(f){return Zh(this,f,!0)},get size(){return Yh(this,!0)},has(f){return Kh.call(this,f,!0)},add:gs("add"),set:gs("set"),delete:gs("delete"),clear:gs("clear"),forEach:Xh(!0,!1)},c={get(f){return Zh(this,f,!0,!0)},get size(){return Yh(this,!0)},has(f){return Kh.call(this,f,!0)},add:gs("add"),set:gs("set"),delete:gs("delete"),clear:gs("clear"),forEach:Xh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(f=>{r[f]=Jh(f,!1,!1),l[f]=Jh(f,!0,!1),i[f]=Jh(f,!1,!0),c[f]=Jh(f,!0,!0)}),[r,l,i,c]}var[PE,CE]=ME();function Dw(r,i){const l=r?CE:PE;return(c,u,f)=>u==="__v_isReactive"?!r:u==="__v_isReadonly"?r:u==="__v_raw"?c:Reflect.get(Cf(l,u)&&u in c?l:c,u,f)}var EE={get:Dw(!1)},LE={get:Dw(!0)};function Aw(r,i,l){const c=bi(l);if(c!==l&&i.call(r,c)){const u=Tw(r);console.warn(`Reactive ${u} contains both the raw and reactive versions of the same object${u==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Iw=new WeakMap,DE=new WeakMap,zw=new WeakMap,AE=new WeakMap;function IE(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zE(r){return r.__v_skip||!Object.isExtensible(r)?0:IE(Tw(r))}function Ig(r){return r&&r.__v_isReadonly?r:Fw(r,!1,SE,EE,Iw)}function Rw(r){return Fw(r,!0,TE,LE,zw)}function Fw(r,i,l,c,u){if(!Ef(r))return console.warn(`value cannot be made reactive: ${String(r)}`),r;if(r.__v_raw&&!(i&&r.__v_isReactive))return r;const f=u.get(r);if(f)return f;const h=zE(r);if(h===0)return r;const s=new Proxy(r,h===2?c:l);return u.set(r,s),s}function bi(r){return r&&bi(r.__v_raw)||r}function Hm(r){return!!(r&&r.__v_isRef===!0)}Ia("nextTick",()=>Sg);Ia("dispatch",r=>Gd.bind(Gd,r));Ia("watch",(r,{evaluateLater:i,cleanup:l})=>(c,u)=>{let f=i(c),s=Ab(()=>{let w;return f(T=>w=T),w},u);l(s)});Ia("store",KC);Ia("data",r=>Bb(r));Ia("root",r=>Tf(r));Ia("refs",r=>(r._x_refs_proxy||(r._x_refs_proxy=nc(RE(r))),r._x_refs_proxy));function RE(r){let i=[];return du(r,l=>{l._x_refs&&i.push(l._x_refs)}),i}var ym={};function jw(r){return ym[r]||(ym[r]=0),++ym[r]}function FE(r,i){return du(r,l=>{if(l._x_ids&&l._x_ids[i])return!0})}function jE(r,i){r._x_ids||(r._x_ids={}),r._x_ids[i]||(r._x_ids[i]=jw(i))}Ia("id",(r,{cleanup:i})=>(l,c=null)=>{let u=`${l}${c?`-${c}`:""}`;return OE(r,u,i,()=>{let f=FE(r,l),h=f?f._x_ids[l]:jw(l);return c?`${l}-${h}-${c}`:`${l}-${h}`})});Pf((r,i)=>{r._x_id&&(i._x_id=r._x_id)});function OE(r,i,l,c){if(r._x_id||(r._x_id={}),r._x_id[i])return r._x_id[i];let u=c();return r._x_id[i]=u,l(()=>{delete r._x_id[i]}),u}Ia("el",r=>r);Ow("Focus","focus","focus");Ow("Persist","persist","persist");function Ow(r,i,l){Ia(i,c=>xa(`You can't use [$${i}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${l}`,c))}Xi("modelable",(r,{expression:i},{effect:l,evaluateLater:c,cleanup:u})=>{let f=c(i),h=()=>{let E;return f(z=>E=z),E},s=c(`${i} = __placeholder`),w=E=>s(()=>{},{scope:{__placeholder:E}}),T=h();w(T),queueMicrotask(()=>{if(!r._x_model)return;r._x_removeModelListeners.default();let E=r._x_model.get,z=r._x_model.set,O=xw({get(){return E()},set(W){z(W)}},{get(){return h()},set(W){w(W)}});u(O)})});Xi("teleport",(r,{modifiers:i,expression:l},{cleanup:c})=>{r.tagName.toLowerCase()!=="template"&&xa("x-teleport can only be used on a <template> tag",r);let u=Cx(l),f=r.content.cloneNode(!0).firstElementChild;r._x_teleport=f,f._x_teleportBack=r,r.setAttribute("data-teleport-template",!0),f.setAttribute("data-teleport-target",!0),r._x_forwardEvents&&r._x_forwardEvents.forEach(s=>{f.addEventListener(s,w=>{w.stopPropagation(),r.dispatchEvent(new w.constructor(w.type,w))})}),ic(f,{},r);let h=(s,w,T)=>{T.includes("prepend")?w.parentNode.insertBefore(s,w):T.includes("append")?w.parentNode.insertBefore(s,w.nextSibling):w.appendChild(s)};zi(()=>{h(f,u,i),Cs(()=>{Ir(f)})()}),r._x_teleportPutBack=()=>{let s=Cx(l);zi(()=>{h(r._x_teleport,s,i)})},c(()=>zi(()=>{f.remove(),cu(f)}))});var $E=document.createElement("div");function Cx(r){let i=Cs(()=>document.querySelector(r),()=>$E)();return i||xa(`Cannot find x-teleport element for selector: "${r}"`),i}var $w=()=>{};$w.inline=(r,{modifiers:i},{cleanup:l})=>{i.includes("self")?r._x_ignoreSelf=!0:r._x_ignore=!0,l(()=>{i.includes("self")?delete r._x_ignoreSelf:delete r._x_ignore})};Xi("ignore",$w);Xi("effect",Cs((r,{expression:i},{effect:l})=>{l(Nn(r,i))}));function Zm(r,i,l,c){let u=r,f=w=>c(w),h={},s=(w,T)=>E=>T(w,E);if(l.includes("dot")&&(i=BE(i)),l.includes("camel")&&(i=VE(i)),l.includes("passive")&&(h.passive=!0),l.includes("capture")&&(h.capture=!0),l.includes("window")&&(u=window),l.includes("document")&&(u=document),l.includes("debounce")){let w=l[l.indexOf("debounce")+1]||"invalid-wait",T=gf(w.split("ms")[0])?Number(w.split("ms")[0]):250;f=yw(f,T)}if(l.includes("throttle")){let w=l[l.indexOf("throttle")+1]||"invalid-wait",T=gf(w.split("ms")[0])?Number(w.split("ms")[0]):250;f=vw(f,T)}return l.includes("prevent")&&(f=s(f,(w,T)=>{T.preventDefault(),w(T)})),l.includes("stop")&&(f=s(f,(w,T)=>{T.stopPropagation(),w(T)})),l.includes("once")&&(f=s(f,(w,T)=>{w(T),u.removeEventListener(i,f,h)})),(l.includes("away")||l.includes("outside"))&&(u=document,f=s(f,(w,T)=>{r.contains(T.target)||T.target.isConnected!==!1&&(r.offsetWidth<1&&r.offsetHeight<1||r._x_isShown!==!1&&w(T))})),l.includes("self")&&(f=s(f,(w,T)=>{T.target===r&&w(T)})),(UE(i)||Bw(i))&&(f=s(f,(w,T)=>{GE(T,l)||w(T)})),u.addEventListener(i,f,h),()=>{u.removeEventListener(i,f,h)}}function BE(r){return r.replace(/-/g,".")}function VE(r){return r.toLowerCase().replace(/-(\w)/g,(i,l)=>l.toUpperCase())}function gf(r){return!Array.isArray(r)&&!isNaN(r)}function NE(r){return[" ","_"].includes(r)?r:r.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function UE(r){return["keydown","keyup"].includes(r)}function Bw(r){return["contextmenu","click","mouse"].some(i=>r.includes(i))}function GE(r,i){let l=i.filter(f=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll"].includes(f));if(l.includes("debounce")){let f=l.indexOf("debounce");l.splice(f,gf((l[f+1]||"invalid-wait").split("ms")[0])?2:1)}if(l.includes("throttle")){let f=l.indexOf("throttle");l.splice(f,gf((l[f+1]||"invalid-wait").split("ms")[0])?2:1)}if(l.length===0||l.length===1&&Ex(r.key).includes(l[0]))return!1;const u=["ctrl","shift","alt","meta","cmd","super"].filter(f=>l.includes(f));return l=l.filter(f=>!u.includes(f)),!(u.length>0&&u.filter(h=>((h==="cmd"||h==="super")&&(h="meta"),r[`${h}Key`])).length===u.length&&(Bw(r.type)||Ex(r.key).includes(l[0])))}function Ex(r){if(!r)return[];r=NE(r);let i={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return i[r]=r,Object.keys(i).map(l=>{if(i[l]===r)return l}).filter(l=>l)}Xi("model",(r,{modifiers:i,expression:l},{effect:c,cleanup:u})=>{let f=r;i.includes("parent")&&(f=r.parentNode);let h=Nn(f,l),s;typeof l=="string"?s=Nn(f,`${l} = __placeholder`):typeof l=="function"&&typeof l()=="string"?s=Nn(f,`${l()} = __placeholder`):s=()=>{};let w=()=>{let O;return h(W=>O=W),Lx(O)?O.get():O},T=O=>{let W;h(Q=>W=Q),Lx(W)?W.set(O):s(()=>{},{scope:{__placeholder:O}})};typeof l=="string"&&r.type==="radio"&&zi(()=>{r.hasAttribute("name")||r.setAttribute("name",l)});let E=r.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(r.type)||i.includes("lazy")?"change":"input",z=Ss?()=>{}:Zm(r,E,i,O=>{T(vm(r,i,O,w()))});if(i.includes("fill")&&([void 0,null,""].includes(w())||Mg(r)&&Array.isArray(w())||r.tagName.toLowerCase()==="select"&&r.multiple)&&T(vm(r,i,{target:r},w())),r._x_removeModelListeners||(r._x_removeModelListeners={}),r._x_removeModelListeners.default=z,u(()=>r._x_removeModelListeners.default()),r.form){let O=Zm(r.form,"reset",[],W=>{Sg(()=>r._x_model&&r._x_model.set(vm(r,i,{target:r},w())))});u(()=>O())}r._x_model={get(){return w()},set(O){T(O)}},r._x_forceModelUpdate=O=>{O===void 0&&typeof l=="string"&&l.match(/\./)&&(O=""),window.fromModel=!0,zi(()=>fw(r,"value",O)),delete window.fromModel},c(()=>{let O=w();i.includes("unintrusive")&&document.activeElement.isSameNode(r)||r._x_forceModelUpdate(O)})});function vm(r,i,l,c){return zi(()=>{if(l instanceof CustomEvent&&l.detail!==void 0)return l.detail!==null&&l.detail!==void 0?l.detail:l.target.value;if(Mg(r))if(Array.isArray(c)){let u=null;return i.includes("number")?u=xm(l.target.value):i.includes("boolean")?u=af(l.target.value):u=l.target.value,l.target.checked?c.includes(u)?c:c.concat([u]):c.filter(f=>!qE(f,u))}else return l.target.checked;else{if(r.tagName.toLowerCase()==="select"&&r.multiple)return i.includes("number")?Array.from(l.target.selectedOptions).map(u=>{let f=u.value||u.text;return xm(f)}):i.includes("boolean")?Array.from(l.target.selectedOptions).map(u=>{let f=u.value||u.text;return af(f)}):Array.from(l.target.selectedOptions).map(u=>u.value||u.text);{let u;return _w(r)?l.target.checked?u=l.target.value:u=c:u=l.target.value,i.includes("number")?xm(u):i.includes("boolean")?af(u):i.includes("trim")?u.trim():u}}})}function xm(r){let i=r?parseFloat(r):null;return WE(i)?i:r}function qE(r,i){return r==i}function WE(r){return!Array.isArray(r)&&!isNaN(r)}function Lx(r){return r!==null&&typeof r=="object"&&typeof r.get=="function"&&typeof r.set=="function"}Xi("cloak",r=>queueMicrotask(()=>zi(()=>r.removeAttribute(uu("cloak")))));ow(()=>`[${uu("init")}]`);Xi("init",Cs((r,{expression:i},{evaluate:l})=>typeof i=="string"?!!i.trim()&&l(i,{},!1):l(i,{},!1)));Xi("text",(r,{expression:i},{effect:l,evaluateLater:c})=>{let u=c(i);l(()=>{u(f=>{zi(()=>{r.textContent=f})})})});Xi("html",(r,{expression:i},{effect:l,evaluateLater:c})=>{let u=c(i);l(()=>{u(f=>{zi(()=>{r.innerHTML=f,r._x_ignoreSelf=!0,Ir(r),delete r._x_ignoreSelf})})})});bg(Xb(":",Jb(uu("bind:"))));var Vw=(r,{value:i,modifiers:l,expression:c,original:u},{effect:f,cleanup:h})=>{if(!i){let w={};XC(w),Nn(r,c)(E=>{ww(r,E,u)},{scope:w});return}if(i==="key")return HE(r,c);if(r._x_inlineBindings&&r._x_inlineBindings[i]&&r._x_inlineBindings[i].extract)return;let s=Nn(r,c);f(()=>s(w=>{w===void 0&&typeof c=="string"&&c.match(/\./)&&(w=""),zi(()=>fw(r,i,w,l))})),h(()=>{r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedStyles&&r._x_undoAddedStyles()})};Vw.inline=(r,{value:i,modifiers:l,expression:c})=>{i&&(r._x_inlineBindings||(r._x_inlineBindings={}),r._x_inlineBindings[i]={expression:c,extract:!1})};Xi("bind",Vw);function HE(r,i){r._x_keyExpression=i}sw(()=>`[${uu("data")}]`);Xi("data",(r,{expression:i},{cleanup:l})=>{if(ZE(r))return;i=i===""?"{}":i;let c={};jm(c,r);let u={};QC(u,c);let f=Oo(r,i,{scope:u});(f===void 0||f===!0)&&(f={}),jm(f,r);let h=ou(f);Vb(h);let s=ic(r,h);h.init&&Oo(r,h.init),l(()=>{h.destroy&&Oo(r,h.destroy),s()})});Pf((r,i)=>{r._x_dataStack&&(i._x_dataStack=r._x_dataStack,i.setAttribute("data-has-alpine-state",!0))});function ZE(r){return Ss?Gm?!0:r.hasAttribute("data-has-alpine-state"):!1}Xi("show",(r,{modifiers:i,expression:l},{effect:c})=>{let u=Nn(r,l);r._x_doHide||(r._x_doHide=()=>{zi(()=>{r.style.setProperty("display","none",i.includes("important")?"important":void 0)})}),r._x_doShow||(r._x_doShow=()=>{zi(()=>{r.style.length===1&&r.style.display==="none"?r.removeAttribute("style"):r.style.removeProperty("display")})});let f=()=>{r._x_doHide(),r._x_isShown=!1},h=()=>{r._x_doShow(),r._x_isShown=!0},s=()=>setTimeout(h),w=Nm(z=>z?h():f(),z=>{typeof r._x_toggleAndCascadeWithTransitions=="function"?r._x_toggleAndCascadeWithTransitions(r,z,h,f):z?s():f()}),T,E=!0;c(()=>u(z=>{!E&&z===T||(i.includes("immediate")&&(z?s():f()),w(z),T=z,E=!1)}))});Xi("for",(r,{expression:i},{effect:l,cleanup:c})=>{let u=YE(i),f=Nn(r,u.items),h=Nn(r,r._x_keyExpression||"index");r._x_prevKeys=[],r._x_lookup={},l(()=>KE(r,u,f,h)),c(()=>{Object.values(r._x_lookup).forEach(s=>zi(()=>{cu(s),s.remove()})),delete r._x_prevKeys,delete r._x_lookup})});function KE(r,i,l,c){let u=h=>typeof h=="object"&&!Array.isArray(h),f=r;l(h=>{XE(h)&&h>=0&&(h=Array.from(Array(h).keys(),U=>U+1)),h===void 0&&(h=[]);let s=r._x_lookup,w=r._x_prevKeys,T=[],E=[];if(u(h))h=Object.entries(h).map(([U,_e])=>{let pe=Dx(i,_e,U,h);c(xe=>{E.includes(xe)&&xa("Duplicate key on x-for",r),E.push(xe)},{scope:{index:U,...pe}}),T.push(pe)});else for(let U=0;U<h.length;U++){let _e=Dx(i,h[U],U,h);c(pe=>{E.includes(pe)&&xa("Duplicate key on x-for",r),E.push(pe)},{scope:{index:U,..._e}}),T.push(_e)}let z=[],O=[],W=[],Q=[];for(let U=0;U<w.length;U++){let _e=w[U];E.indexOf(_e)===-1&&W.push(_e)}w=w.filter(U=>!W.includes(U));let te="template";for(let U=0;U<E.length;U++){let _e=E[U],pe=w.indexOf(_e);if(pe===-1)w.splice(U,0,_e),z.push([te,U]);else if(pe!==U){let xe=w.splice(U,1)[0],Ae=w.splice(pe-1,1)[0];w.splice(U,0,Ae),w.splice(pe,0,xe),O.push([xe,Ae])}else Q.push(_e);te=_e}for(let U=0;U<W.length;U++){let _e=W[U];_e in s&&(zi(()=>{cu(s[_e]),s[_e].remove()}),delete s[_e])}for(let U=0;U<O.length;U++){let[_e,pe]=O[U],xe=s[_e],Ae=s[pe],ze=document.createElement("div");zi(()=>{Ae||xa('x-for ":key" is undefined or invalid',f,pe,s),Ae.after(ze),xe.after(Ae),Ae._x_currentIfEl&&Ae.after(Ae._x_currentIfEl),ze.before(xe),xe._x_currentIfEl&&xe.after(xe._x_currentIfEl),ze.remove()}),Ae._x_refreshXForScope(T[E.indexOf(pe)])}for(let U=0;U<z.length;U++){let[_e,pe]=z[U],xe=_e==="template"?f:s[_e];xe._x_currentIfEl&&(xe=xe._x_currentIfEl);let Ae=T[pe],ze=E[pe],qe=document.importNode(f.content,!0).firstElementChild,Ne=ou(Ae);ic(qe,Ne,f),qe._x_refreshXForScope=He=>{Object.entries(He).forEach(([rt,lt])=>{Ne[rt]=lt})},zi(()=>{xe.after(qe),Cs(()=>Ir(qe))()}),typeof ze=="object"&&xa("x-for key cannot be an object, it must be a string or an integer",f),s[ze]=qe}for(let U=0;U<Q.length;U++)s[Q[U]]._x_refreshXForScope(T[E.indexOf(Q[U])]);f._x_prevKeys=E})}function YE(r){let i=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,l=/^\s*\(|\)\s*$/g,c=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,u=r.match(c);if(!u)return;let f={};f.items=u[2].trim();let h=u[1].replace(l,"").trim(),s=h.match(i);return s?(f.item=h.replace(i,"").trim(),f.index=s[1].trim(),s[2]&&(f.collection=s[2].trim())):f.item=h,f}function Dx(r,i,l,c){let u={};return/^\[.*\]$/.test(r.item)&&Array.isArray(i)?r.item.replace("[","").replace("]","").split(",").map(h=>h.trim()).forEach((h,s)=>{u[h]=i[s]}):/^\{.*\}$/.test(r.item)&&!Array.isArray(i)&&typeof i=="object"?r.item.replace("{","").replace("}","").split(",").map(h=>h.trim()).forEach(h=>{u[h]=i[h]}):u[r.item]=i,r.index&&(u[r.index]=l),r.collection&&(u[r.collection]=c),u}function XE(r){return!Array.isArray(r)&&!isNaN(r)}function Nw(){}Nw.inline=(r,{expression:i},{cleanup:l})=>{let c=Tf(r);c._x_refs||(c._x_refs={}),c._x_refs[i]=r,l(()=>delete c._x_refs[i])};Xi("ref",Nw);Xi("if",(r,{expression:i},{effect:l,cleanup:c})=>{r.tagName.toLowerCase()!=="template"&&xa("x-if can only be used on a <template> tag",r);let u=Nn(r,i),f=()=>{if(r._x_currentIfEl)return r._x_currentIfEl;let s=r.content.cloneNode(!0).firstElementChild;return ic(s,{},r),zi(()=>{r.after(s),Cs(()=>Ir(s))()}),r._x_currentIfEl=s,r._x_undoIf=()=>{zi(()=>{cu(s),s.remove()}),delete r._x_currentIfEl},s},h=()=>{r._x_undoIf&&(r._x_undoIf(),delete r._x_undoIf)};l(()=>u(s=>{s?f():h()})),c(()=>r._x_undoIf&&r._x_undoIf())});Xi("id",(r,{expression:i},{evaluate:l})=>{l(i).forEach(u=>jE(r,u))});Pf((r,i)=>{r._x_ids&&(i._x_ids=r._x_ids)});bg(Xb("@",Jb(uu("on:"))));Xi("on",Cs((r,{value:i,modifiers:l,expression:c},{cleanup:u})=>{let f=c?Nn(r,c):()=>{};r.tagName.toLowerCase()==="template"&&(r._x_forwardEvents||(r._x_forwardEvents=[]),r._x_forwardEvents.includes(i)||r._x_forwardEvents.push(i));let h=Zm(r,i,l,s=>{f(()=>{},{scope:{$event:s},params:[s]})});u(()=>h())}));Df("Collapse","collapse","collapse");Df("Intersect","intersect","intersect");Df("Focus","trap","focus");Df("Mask","mask","mask");function Df(r,i,l){Xi(i,c=>xa(`You can't use [x-${i}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${l}`,c))}ac.setEvaluator(Hb);ac.setReactivityEngine({reactive:Ig,effect:uE,release:dE,raw:bi});var JE=ac,zg=JE;function QE(r){r.directive("intersect",r.skipDuringClone((i,{value:l,expression:c,modifiers:u},{evaluateLater:f,cleanup:h})=>{let s=f(c),w={rootMargin:iL(u),threshold:eL(u)},T=new IntersectionObserver(E=>{E.forEach(z=>{z.isIntersecting!==(l==="leave")&&(s(),u.includes("once")&&T.disconnect())})},w);T.observe(i),h(()=>{T.disconnect()})}))}function eL(r){if(r.includes("full"))return .99;if(r.includes("half"))return .5;if(!r.includes("threshold"))return 0;let i=r[r.indexOf("threshold")+1];return i==="100"?1:i==="0"?0:+`.${i}`}function tL(r){let i=r.match(/^(-?[0-9]+)(px|%)?$/);return i?i[1]+(i[2]||"px"):void 0}function iL(r){const i="margin",l="0px 0px 0px 0px",c=r.indexOf(i);if(c===-1)return l;let u=[];for(let f=1;f<5;f++)u.push(tL(r[c+f]||""));return u=u.filter(f=>f!==void 0),u.length?u.join(" ").trim():l}var nL=QE;window.L=pk;window.maplibregl=yk;window.Chart=cg;zg.plugin(nL);window.Alpine=zg;zg.start();
