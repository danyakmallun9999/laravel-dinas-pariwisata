import{g as rE,c as mr,L as as}from"./leaflet-src-eHmD5uJa.js";function uO(a,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in a)){const r=Object.getOwnPropertyDescriptor(i,n);r&&Object.defineProperty(a,n,r.get?r:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}var V0={exports:{}};var hO=V0.exports,Tk;function dO(){return Tk||(Tk=1,(function(a,e){(function(t,i){a.exports=i()})(hO,(function(){var t={},i={};function n(o,s,h){if(i[o]=h,o==="index"){var f="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",y={};return i.shared(y),i.index(t,y),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"}))),t}}n("shared",["exports"],(function(o){function s(d,l,u,m){return new(u||(u=Promise))((function(b,C){function A($){try{B(m.next($))}catch(q){C(q)}}function R($){try{B(m.throw($))}catch(q){C(q)}}function B($){var q;$.done?b($.value):(q=$.value,q instanceof u?q:new u((function(te){te(q)}))).then(A,R)}B((m=m.apply(d,l||[])).next())}))}function h(d,l){this.x=d,this.y=l}function f(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var y,x;typeof SuppressedError=="function"&&SuppressedError,h.prototype={clone(){return new h(this.x,this.y)},add(d){return this.clone()._add(d)},sub(d){return this.clone()._sub(d)},multByPoint(d){return this.clone()._multByPoint(d)},divByPoint(d){return this.clone()._divByPoint(d)},mult(d){return this.clone()._mult(d)},div(d){return this.clone()._div(d)},rotate(d){return this.clone()._rotate(d)},rotateAround(d,l){return this.clone()._rotateAround(d,l)},matMult(d){return this.clone()._matMult(d)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(d){return this.x===d.x&&this.y===d.y},dist(d){return Math.sqrt(this.distSqr(d))},distSqr(d){const l=d.x-this.x,u=d.y-this.y;return l*l+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith(d){return this.angleWithSep(d.x,d.y)},angleWithSep(d,l){return Math.atan2(this.x*l-this.y*d,this.x*d+this.y*l)},_matMult(d){const l=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=l,this},_add(d){return this.x+=d.x,this.y+=d.y,this},_sub(d){return this.x-=d.x,this.y-=d.y,this},_mult(d){return this.x*=d,this.y*=d,this},_div(d){return this.x/=d,this.y/=d,this},_multByPoint(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint(d){return this.x/=d.x,this.y/=d.y,this},_unit(){return this._div(this.mag()),this},_perp(){const d=this.y;return this.y=this.x,this.x=-d,this},_rotate(d){const l=Math.cos(d),u=Math.sin(d),m=u*this.x+l*this.y;return this.x=l*this.x-u*this.y,this.y=m,this},_rotateAround(d,l){const u=Math.cos(d),m=Math.sin(d),b=l.y+m*(this.x-l.x)+u*(this.y-l.y);return this.x=l.x+u*(this.x-l.x)-m*(this.y-l.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:h},h.convert=function(d){if(d instanceof h)return d;if(Array.isArray(d))return new h(+d[0],+d[1]);if(d.x!==void 0&&d.y!==void 0)return new h(+d.x,+d.y);throw new Error("Expected [x, y] or {x, y} point format")};var S=(function(){if(x)return y;function d(l,u,m,b){this.cx=3*l,this.bx=3*(m-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=u,this.p2x=m,this.p2y=b}return x=1,y=d,d.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,u){if(u===void 0&&(u=1e-6),l<0)return 0;if(l>1)return 1;for(var m=l,b=0;b<8;b++){var C=this.sampleCurveX(m)-l;if(Math.abs(C)<u)return m;var A=this.sampleCurveDerivativeX(m);if(Math.abs(A)<1e-6)break;m-=C/A}var R=0,B=1;for(m=l,b=0;b<20&&(C=this.sampleCurveX(m),!(Math.abs(C-l)<u));b++)l>C?R=m:B=m,m=.5*(B-R)+R;return m},solve:function(l,u){return this.sampleCurveY(this.solveCurveX(l,u))}},y})(),E=f(S);let z,D;function F(){return z==null&&(z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),z}function U(){if(D==null&&(D=!1,F())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<25;m++){const b=4*m;l.fillStyle=`rgb(${b},${b+1},${b+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}const u=l.getImageData(0,0,5,5).data;for(let m=0;m<100;m++)if(m%4!=3&&u[m]!==m){D=!0;break}}}return D||!1}var G=1e-6,Z=typeof Float32Array<"u"?Float32Array:Array;function ee(){var d=new Z(9);return Z!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function ie(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function le(){var d=new Z(3);return Z!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function J(d){var l=d[0],u=d[1],m=d[2];return Math.sqrt(l*l+u*u+m*m)}function re(d,l,u){var m=new Z(3);return m[0]=d,m[1]=l,m[2]=u,m}function ae(d,l,u){return d[0]=l[0]+u[0],d[1]=l[1]+u[1],d[2]=l[2]+u[2],d}function me(d,l,u){return d[0]=l[0]*u,d[1]=l[1]*u,d[2]=l[2]*u,d}function Te(d,l,u){var m=l[0],b=l[1],C=l[2],A=u[0],R=u[1],B=u[2];return d[0]=b*B-C*R,d[1]=C*A-m*B,d[2]=m*R-b*A,d}var ye,Re=J;function We(d,l,u){var m=l[0],b=l[1],C=l[2],A=l[3];return d[0]=u[0]*m+u[4]*b+u[8]*C+u[12]*A,d[1]=u[1]*m+u[5]*b+u[9]*C+u[13]*A,d[2]=u[2]*m+u[6]*b+u[10]*C+u[14]*A,d[3]=u[3]*m+u[7]*b+u[11]*C+u[15]*A,d}function Le(){var d=new Z(4);return Z!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function ht(d,l,u,m){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",C=Math.PI/360;l*=C,m*=C,u*=C;var A=Math.sin(l),R=Math.cos(l),B=Math.sin(u),$=Math.cos(u),q=Math.sin(m),te=Math.cos(m);switch(b){case"xyz":d[0]=A*$*te+R*B*q,d[1]=R*B*te-A*$*q,d[2]=R*$*q+A*B*te,d[3]=R*$*te-A*B*q;break;case"xzy":d[0]=A*$*te-R*B*q,d[1]=R*B*te-A*$*q,d[2]=R*$*q+A*B*te,d[3]=R*$*te+A*B*q;break;case"yxz":d[0]=A*$*te+R*B*q,d[1]=R*B*te-A*$*q,d[2]=R*$*q-A*B*te,d[3]=R*$*te+A*B*q;break;case"yzx":d[0]=A*$*te+R*B*q,d[1]=R*B*te+A*$*q,d[2]=R*$*q-A*B*te,d[3]=R*$*te-A*B*q;break;case"zxy":d[0]=A*$*te-R*B*q,d[1]=R*B*te+A*$*q,d[2]=R*$*q+A*B*te,d[3]=R*$*te-A*B*q;break;case"zyx":d[0]=A*$*te-R*B*q,d[1]=R*B*te+A*$*q,d[2]=R*$*q-A*B*te,d[3]=R*$*te+A*B*q;break;default:throw new Error("Unknown angle order "+b)}return d}function $e(){var d=new Z(2);return Z!=Float32Array&&(d[0]=0,d[1]=0),d}function pt(d,l){var u=new Z(2);return u[0]=d,u[1]=l,u}le(),ye=new Z(4),Z!=Float32Array&&(ye[0]=0,ye[1]=0,ye[2]=0,ye[3]=0),le(),re(1,0,0),re(0,1,0),Le(),Le(),ee(),$e();const Dt=8192;function qe(d,l,u){return l*(Dt/(d.tileSize*Math.pow(2,u-d.tileID.overscaledZ)))}function Nt(d,l){return(d%l+l)%l}function ni(d,l,u){return d*(1-u)+l*u}function xi(d){if(d<=0)return 0;if(d>=1)return 1;const l=d*d,u=l*d;return 4*(d<.5?u:3*(d-l)+u-.75)}function Lt(d,l,u,m){const b=new E(d,l,u,m);return C=>b.solve(C)}const Tt=Lt(.25,.1,.25,1);function wt(d,l,u){return Math.min(u,Math.max(l,d))}function mi(d,l,u){const m=u-l,b=((d-l)%m+m)%m+l;return b===l?u:b}function bi(d,...l){for(const u of l)for(const m in u)d[m]=u[m];return d}let Zi=1;function Li(d,l,u){const m={};for(const b in d)m[b]=l.call(this,d[b],b,d);return m}function si(d,l,u){const m={};for(const b in d)l.call(this,d[b],b,d)&&(m[b]=d[b]);return m}function fn(d){return Array.isArray(d)?d.map(fn):typeof d=="object"&&d?Li(d,fn):d}const Ii={};function Qi(d){Ii[d]||(typeof console<"u"&&console.warn(d),Ii[d]=!0)}function rn(d,l,u){return(u.y-d.y)*(l.x-d.x)>(l.y-d.y)*(u.x-d.x)}function xn(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let Ye=null;function qt(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const li="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Fi(d,l,u,m,b){return s(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const C=new VideoFrame(d,{timestamp:0});try{const A=C?.format;if(!A||!A.startsWith("BGR")&&!A.startsWith("RGB"))throw new Error(`Unrecognized format ${A}`);const R=A.startsWith("BGR"),B=new Uint8ClampedArray(m*b*4);if(yield C.copyTo(B,(function($,q,te,oe,ce){const fe=4*Math.max(-q,0),ge=(Math.max(0,te)-te)*oe*4+fe,ve=4*oe,Ie=Math.max(0,q),Qe=Math.max(0,te);return{rect:{x:Ie,y:Qe,width:Math.min($.width,q+oe)-Ie,height:Math.min($.height,te+ce)-Qe},layout:[{offset:ge,stride:ve}]}})(d,l,u,m,b)),R)for(let $=0;$<B.length;$+=4){const q=B[$];B[$]=B[$+2],B[$+2]=q}return B}finally{C.close()}}))}let ci,Wi;function wi(d,l,u,m){return d.addEventListener(l,u,m),{unsubscribe:()=>{d.removeEventListener(l,u,m)}}}function Ti(d){return d*Math.PI/180}function Di(d){return d/Math.PI*180}const dt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},xe={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},be="AbortError";class Ce extends Error{constructor(l=be){super(l instanceof Error?l.message:l),this.name=be,l instanceof Error&&l.stack&&(this.stack=l.stack)}}function tt(d){return d.name===be}const rt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function St(d){return rt.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const yt="global-dispatcher";class He extends Error{constructor(l,u,m,b){super(`AJAXError: ${u} (${l}): ${m}`),this.status=l,this.statusText=u,this.url=m,this.body=b}}const _t=()=>xn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ut=function(d,l){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const m=St(d.url);if(m)return m(d,l);if(xn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:yt},l)}if(!(/^file:/.test(u=d.url)||/^file:/.test(_t())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(m,b){return s(this,void 0,void 0,(function*(){const C=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:_t(),signal:b.signal});let A,R;m.type!=="json"||C.headers.has("Accept")||C.headers.set("Accept","application/json");try{A=yield fetch(C)}catch($){throw tt($)?$:new He(0,$.message,m.url,new Blob)}if(!A.ok){const $=yield A.blob();throw new He(A.status,A.statusText,m.url,$)}R=m.type==="arrayBuffer"||m.type==="image"?A.arrayBuffer():m.type==="json"?A.json():A.text();const B=yield R;return b.signal.throwIfAborted(),{data:B,cacheControl:A.headers.get("Cache-Control"),expires:A.headers.get("Expires")}}))})(d,l);if(xn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:yt},l)}var u;return(function(m,b){return new Promise(((C,A)=>{var R;const B=new XMLHttpRequest;B.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(B.responseType="arraybuffer");for(const $ in m.headers)B.setRequestHeader($,m.headers[$]);m.type==="json"&&(B.responseType="text",!((R=m.headers)===null||R===void 0)&&R.Accept||B.setRequestHeader("Accept","application/json")),B.withCredentials=m.credentials==="include",B.onerror=()=>{A(new Error(B.statusText))},B.onload=()=>{if(!b.signal.aborted)if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){let $=B.response;if(m.type==="json")try{$=JSON.parse(B.response)}catch(q){return void A(q)}C({data:$,cacheControl:B.getResponseHeader("Cache-Control"),expires:B.getResponseHeader("Expires")})}else{const $=new Blob([B.response],{type:B.getResponseHeader("Content-Type")});A(new He(B.status,B.statusText,m.url,$))}},b.signal.addEventListener("abort",(()=>{B.abort(),A(new Ce(b.signal.reason))})),B.send(m.body)}))})(d,l)};function Et(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const l=new URL(d),u=window.location;return l.protocol===u.protocol&&l.host===u.host}function It(d,l,u){u[d]&&u[d].indexOf(l)!==-1||(u[d]=u[d]||[],u[d].push(l))}function ai(d,l,u){if(u&&u[d]){const m=u[d].indexOf(l);m!==-1&&u[d].splice(m,1)}}class Si{constructor(l,u={}){bi(this,u),this.type=l}}class Ai extends Si{constructor(l,u={}){super("error",bi({error:l},u))}}class Mn{on(l,u){return this._listeners=this._listeners||{},It(l,u,this._listeners),{unsubscribe:()=>{this.off(l,u)}}}off(l,u){return ai(l,u,this._listeners),ai(l,u,this._oneTimeListeners),this}once(l,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},It(l,u,this._oneTimeListeners),this):new Promise((m=>this.once(l,m)))}fire(l,u){typeof l=="string"&&(l=new Si(l,u||{}));const m=l.type;if(this.listens(m)){l.target=this;const b=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const R of b)R.call(this,l);const C=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const R of C)ai(m,R,this._oneTimeListeners),R.call(this,l);const A=this._eventedParent;A&&(bi(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(l))}else l instanceof Ai&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,u){return this._eventedParent=l,this._eventedParentData=u,this}}var Mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Dn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Yn(d,l){const u={};for(const m in d)m!=="ref"&&(u[m]=d[m]);return Dn.forEach((m=>{m in l&&(u[m]=l[m])})),u}function _n(d,l){if(Array.isArray(d)){if(!Array.isArray(l)||d.length!==l.length)return!1;for(let u=0;u<d.length;u++)if(!_n(d[u],l[u]))return!1;return!0}if(typeof d=="object"&&d!==null&&l!==null){if(typeof l!="object"||Object.keys(d).length!==Object.keys(l).length)return!1;for(const u in d)if(!_n(d[u],l[u]))return!1;return!0}return d===l}function pn(d,l){d.push(l)}function Bi(d,l,u){pn(u,{command:"addSource",args:[d,l[d]]})}function Oi(d,l,u){pn(l,{command:"removeSource",args:[d]}),u[d]=!0}function mn(d,l,u,m){Oi(d,u,m),Bi(d,l,u)}function hi(d,l,u){let m;for(m in d[u])if(Object.prototype.hasOwnProperty.call(d[u],m)&&m!=="data"&&!_n(d[u][m],l[u][m]))return!1;for(m in l[u])if(Object.prototype.hasOwnProperty.call(l[u],m)&&m!=="data"&&!_n(d[u][m],l[u][m]))return!1;return!0}function Xi(d,l,u,m,b,C){d=d||{},l=l||{};for(const A in d)Object.prototype.hasOwnProperty.call(d,A)&&(_n(d[A],l[A])||u.push({command:C,args:[m,A,l[A],b]}));for(const A in l)Object.prototype.hasOwnProperty.call(l,A)&&!Object.prototype.hasOwnProperty.call(d,A)&&(_n(d[A],l[A])||u.push({command:C,args:[m,A,l[A],b]}))}function sn(d){return d.id}function Fe(d,l){return d[l.id]=l,d}class Oe{constructor(l,u,m,b){this.message=(l?`${l}: `:"")+m,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function xt(d,...l){for(const u of l)for(const m in u)d[m]=u[m];return d}class ct extends Error{constructor(l,u){super(u),this.message=u,this.key=l}}class Jt{constructor(l,u=[]){this.parent=l,this.bindings={};for(const[m,b]of u)this.bindings[m]=b}concat(l){return new Jt(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const ii={kind:"null"},gt={kind:"number"},Gt={kind:"string"},ei={kind:"boolean"},ki={kind:"color"},gn={kind:"projectionDefinition"},$i={kind:"object"},Ei={kind:"value"},Vi={kind:"collator"},Yi={kind:"formatted"},on={kind:"padding"},ca={kind:"colorArray"},vn={kind:"numberArray"},$n={kind:"resolvedImage"},Zt={kind:"variableAnchorOffsetCollection"};function Ma(d,l){return{kind:"array",itemType:d,N:l}}function nn(d){if(d.kind==="array"){const l=nn(d.itemType);return typeof d.N=="number"?`array<${l}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${l}>`}return d.kind}const Za=[ii,gt,Gt,ei,ki,gn,Yi,$i,Ma(Ei),on,vn,ca,$n,Zt];function er(d,l){if(l.kind==="error")return null;if(d.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!er(d.itemType,l.itemType))&&(typeof d.N!="number"||d.N===l.N))return null}else{if(d.kind===l.kind)return null;if(d.kind==="value"){for(const u of Za)if(!er(u,l))return null}}return`Expected ${nn(d)} but found ${nn(l)} instead.`}function qn(d,l){return l.some((u=>u.kind===d.kind))}function Zn(d,l){return l.some((u=>u==="null"?d===null:u==="array"?Array.isArray(d):u==="object"?d&&!Array.isArray(d)&&typeof d=="object":u===typeof d))}function kn(d,l){return d.kind==="array"&&l.kind==="array"?d.itemType.kind===l.itemType.kind&&typeof d.N=="number":d.kind===l.kind}const Oo=.96422,bn=.82521,ks=4/29,Bn=6/29,os=3*Bn*Bn,ls=Bn*Bn*Bn,ha=Math.PI/180,Ga=180/Math.PI;function jl(d){return(d%=360)<0&&(d+=360),d}function So([d,l,u,m]){let b,C;const A=cr((.2225045*(d=Ca(d))+.7168786*(l=Ca(l))+.0606169*(u=Ca(u)))/1);d===l&&l===u?b=C=A:(b=cr((.4360747*d+.3850649*l+.1430804*u)/Oo),C=cr((.0139322*d+.0971045*l+.7141733*u)/bn));const R=116*A-16;return[R<0?0:R,500*(b-A),200*(A-C),m]}function Ca(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function cr(d){return d>ls?Math.pow(d,1/3):d/os+ks}function Rt([d,l,u,m]){let b=(d+16)/116,C=isNaN(l)?b:b+l/500,A=isNaN(u)?b:b-u/200;return b=1*In(b),C=Oo*In(C),A=bn*In(A),[Be(3.1338561*C-1.6168667*b-.4906146*A),Be(-.9787684*C+1.9161415*b+.033454*A),Be(.0719453*C-.2289914*b+1.4052427*A),m]}function Be(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function In(d){return d>Bn?d*d*d:os*(d-ks)}const ur=Object.hasOwn||function(d,l){return Object.prototype.hasOwnProperty.call(d,l)};function Er(d,l){return ur(d,l)?d[l]:void 0}function Mr(d){return parseInt(d.padEnd(2,d),16)/255}function yl(d,l){return hr(l?d/100:d,0,1)}function hr(d,l,u){return Math.min(Math.max(l,d),u)}function Fn(d){return!d.some(Number.isNaN)}const za={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function xr(d,l,u){return d+u*(l-d)}function vr(d,l,u){return d.map(((m,b)=>xr(m,l[b],u)))}class yn{constructor(l,u,m,b=1,C=!0){this.r=l,this.g=u,this.b=m,this.a=b,C||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[l,u,m,b]))}static parse(l){if(l instanceof yn)return l;if(typeof l!="string")return;const u=(function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const b=Er(za,m);if(b){const[A,R,B]=b;return[A/255,R/255,B/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const A=m.length<6?1:2;let R=1;return[Mr(m.slice(R,R+=A)),Mr(m.slice(R,R+=A)),Mr(m.slice(R,R+=A)),Mr(m.slice(R,R+A)||"ff")]}if(m.startsWith("rgb")){const A=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(A){const[R,B,$,q,te,oe,ce,fe,ge,ve,Ie,Qe]=A,De=[q||" ",ce||" ",ve].join("");if(De==="  "||De==="  /"||De===",,"||De===",,,"){const ze=[$,oe,ge].join(""),it=ze==="%%%"?100:ze===""?255:0;if(it){const ot=[hr(+B/it,0,1),hr(+te/it,0,1),hr(+fe/it,0,1),Ie?yl(+Ie,Qe):1];if(Fn(ot))return ot}}return}}const C=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[A,R,B,$,q,te,oe,ce,fe]=C,ge=[B||" ",q||" ",oe].join("");if(ge==="  "||ge==="  /"||ge===",,"||ge===",,,"){const ve=[+R,hr(+$,0,100),hr(+te,0,100),ce?yl(+ce,fe):1];if(Fn(ve))return(function([Ie,Qe,De,ze]){function it(ot){const Ot=(ot+Ie/30)%12,ri=Qe*Math.min(De,1-De);return De-ri*Math.max(-1,Math.min(Ot-3,9-Ot,1))}return Ie=jl(Ie),Qe/=100,De/=100,[it(0),it(8),it(4),ze]})(ve)}}})(l);return u?new yn(...u,!1):void 0}get rgb(){const{r:l,g:u,b:m,a:b}=this,C=b||1/0;return this.overwriteGetter("rgb",[l/C,u/C,m/C,b])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[u,m,b,C]=So(l),A=Math.sqrt(m*m+b*b);return[Math.round(1e4*A)?jl(Math.atan2(b,m)*Ga):NaN,A,u,C]})(this.rgb))}get lab(){return this.overwriteGetter("lab",So(this.rgb))}overwriteGetter(l,u){return Object.defineProperty(this,l,{value:u}),u}toString(){const[l,u,m,b]=this.rgb;return`rgba(${[l,u,m].map((C=>Math.round(255*C))).join(",")},${b})`}static interpolate(l,u,m,b="rgb"){switch(b){case"rgb":{const[C,A,R,B]=vr(l.rgb,u.rgb,m);return new yn(C,A,R,B,!1)}case"hcl":{const[C,A,R,B]=l.hcl,[$,q,te,oe]=u.hcl;let ce,fe;if(isNaN(C)||isNaN($))isNaN(C)?isNaN($)?ce=NaN:(ce=$,R!==1&&R!==0||(fe=q)):(ce=C,te!==1&&te!==0||(fe=A));else{let De=$-C;$>C&&De>180?De-=360:$<C&&C-$>180&&(De+=360),ce=C+m*De}const[ge,ve,Ie,Qe]=(function([De,ze,it,ot]){return De=isNaN(De)?0:De*ha,Rt([it,Math.cos(De)*ze,Math.sin(De)*ze,ot])})([ce,fe??xr(A,q,m),xr(R,te,m),xr(B,oe,m)]);return new yn(ge,ve,Ie,Qe,!1)}case"lab":{const[C,A,R,B]=Rt(vr(l.lab,u.lab,m));return new yn(C,A,R,B,!1)}}}}yn.black=new yn(0,0,0,1),yn.white=new yn(1,1,1,1),yn.transparent=new yn(0,0,0,0),yn.red=new yn(1,0,0,1);class Ws{constructor(l,u,m){this.sensitivity=l?u?"variant":"case":u?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,u){return this.collator.compare(l,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const zo=["bottom","center","top"];class Kn{constructor(l,u,m,b,C,A){this.text=l,this.image=u,this.scale=m,this.fontStack=b,this.textColor=C,this.verticalAlign=A}}class ta{constructor(l){this.sections=l}static fromString(l){return new ta([new Kn(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof ta?l:ta.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class tr{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof tr)return l;if(typeof l=="number")return new tr([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const u of l)if(typeof u!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new tr(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,m){return new tr(vr(l.values,u.values,m))}}class ea{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ea)return l;if(typeof l=="number")return new ea([l]);if(Array.isArray(l)){for(const u of l)if(typeof u!="number")return;return new ea(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,m){return new ea(vr(l.values,u.values,m))}}class _i{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof _i)return l;if(typeof l=="string"){const m=yn.parse(l);return m?new _i([m]):void 0}if(!Array.isArray(l))return;const u=[];for(const m of l){if(typeof m!="string")return;const b=yn.parse(m);if(!b)return;u.push(b)}return new _i(u)}toString(){return JSON.stringify(this.values)}static interpolate(l,u,m,b="rgb"){const C=[];if(l.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let A=0;A<l.values.length;A++)C.push(yn.interpolate(l.values[A],u.values[A],m,b));return new _i(C)}}class Fa extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const Gn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class pe{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof pe)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let u=0;u<l.length;u+=2){const m=l[u],b=l[u+1];if(typeof m!="string"||!Gn.has(m)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new pe(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,m){const b=l.values,C=u.values;if(b.length!==C.length)throw new Fa(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${u.toString()}`);const A=[];for(let R=0;R<b.length;R+=2){if(b[R]!==C[R])throw new Fa(`Cannot interpolate values containing mismatched anchors. from[${R}]: ${b[R]}, to[${R}]: ${C[R]}`);A.push(b[R]);const[B,$]=b[R+1],[q,te]=C[R+1];A.push([xr(B,q,m),xr($,te,m)])}return new pe(A)}}class we{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new we({name:l,available:!1}):null}}class Me{constructor(l,u,m){this.from=l,this.to=u,this.transition=m}static interpolate(l,u,m){return new Me(l,u,m)}static parse(l){return l instanceof Me?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new Me(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new Me(l.from,l.to,l.transition):typeof l=="string"?new Me(l,l,1):void 0}}function Ke(d,l,u,m){return typeof d=="number"&&d>=0&&d<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof u=="number"&&u>=0&&u<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[d,l,u,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[d,l,u,m]:[d,l,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ge(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof Me||d instanceof yn||d instanceof Ws||d instanceof ta||d instanceof tr||d instanceof ea||d instanceof _i||d instanceof pe||d instanceof we)return!0;if(Array.isArray(d)){for(const l of d)if(!Ge(l))return!1;return!0}if(typeof d=="object"){for(const l in d)if(!Ge(d[l]))return!1;return!0}return!1}function Ct(d){if(d===null)return ii;if(typeof d=="string")return Gt;if(typeof d=="boolean")return ei;if(typeof d=="number")return gt;if(d instanceof yn)return ki;if(d instanceof Me)return gn;if(d instanceof Ws)return Vi;if(d instanceof ta)return Yi;if(d instanceof tr)return on;if(d instanceof ea)return vn;if(d instanceof _i)return ca;if(d instanceof pe)return Zt;if(d instanceof we)return $n;if(Array.isArray(d)){const l=d.length;let u;for(const m of d){const b=Ct(m);if(u){if(u===b)continue;u=Ei;break}u=b}return Ma(u||Ei,l)}return $i}function Ht(d){const l=typeof d;return d===null?"":l==="string"||l==="number"||l==="boolean"?String(d):d instanceof yn||d instanceof Me||d instanceof ta||d instanceof tr||d instanceof ea||d instanceof _i||d instanceof pe||d instanceof we?d.toString():JSON.stringify(d)}class Pt{constructor(l,u){this.type=l,this.value=u}static parse(l,u){if(l.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Ge(l[1]))return u.error("invalid value");const m=l[1];let b=Ct(m);const C=u.expectedType;return b.kind!=="array"||b.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(b=C),new Pt(b,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const oi={string:Gt,number:gt,boolean:ei,object:$i};class Hi{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");let m,b=1;const C=l[0];if(C==="array"){let R,B;if(l.length>2){const $=l[1];if(typeof $!="string"||!($ in oi)||$==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);R=oi[$],b++}else R=Ei;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return u.error('The length argument to "array" must be a positive integer literal',2);B=l[2],b++}m=Ma(R,B)}else{if(!oi[C])throw new Error(`Types doesn't contain name = ${C}`);m=oi[C]}const A=[];for(;b<l.length;b++){const R=u.parse(l[b],b,Ei);if(!R)return null;A.push(R)}return new Hi(m,A)}evaluate(l){for(let u=0;u<this.args.length;u++){const m=this.args[u].evaluate(l);if(!er(this.type,Ct(m)))return m;if(u===this.args.length-1)throw new Fa(`Expected value to be of type ${nn(this.type)}, but found ${nn(Ct(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const cn={"to-boolean":ei,"to-color":ki,"to-number":gt,"to-string":Gt};class Pn{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");const m=l[0];if(!cn[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return u.error("Expected one argument.");const b=cn[m],C=[];for(let A=1;A<l.length;A++){const R=u.parse(l[A],A,Ei);if(!R)return null;C.push(R)}return new Pn(b,C)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let u,m;for(const b of this.args){if(u=b.evaluate(l),m=null,u instanceof yn)return u;if(typeof u=="string"){const C=l.parseColor(u);if(C)return C}else if(Array.isArray(u)&&(m=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Ke(u[0],u[1],u[2],u[3]),!m))return new yn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Fa(m||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const m of this.args){u=m.evaluate(l);const b=tr.parse(u);if(b)return b}throw new Fa(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(const m of this.args){u=m.evaluate(l);const b=ea.parse(u);if(b)return b}throw new Fa(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(const m of this.args){u=m.evaluate(l);const b=_i.parse(u);if(b)return b}throw new Fa(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const m of this.args){u=m.evaluate(l);const b=pe.parse(u);if(b)return b}throw new Fa(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const m of this.args){if(u=m.evaluate(l),u===null)return 0;const b=Number(u);if(!isNaN(b))return b}throw new Fa(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return ta.fromString(Ht(this.args[0].evaluate(l)));case"resolvedImage":return we.fromString(Ht(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return Ht(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const na=["Unknown","Point","LineString","Polygon"];class fa{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?na[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let u=this._parseColorCache.get(l);return u||(u=yn.parse(l),this._parseColorCache.set(l,u)),u}}class aa{constructor(l,u,m=[],b,C=new Jt,A=[]){this.registry=l,this.path=m,this.key=m.map((R=>`[${R}]`)).join(""),this.scope=C,this.errors=A,this.expectedType=b,this._isConstant=u}parse(l,u,m,b,C={}){return u?this.concat(u,m,b)._parse(l,C):this._parse(l,C)}_parse(l,u){function m(b,C,A){return A==="assert"?new Hi(C,[b]):A==="coerce"?new Pn(C,[b]):b}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=l[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[b];if(C){let A=C.parse(l,this);if(!A)return null;if(this.expectedType){const R=this.expectedType,B=A.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||B.kind!=="value"){if(R.kind==="projectionDefinition"&&["string","array"].includes(B.kind)||["color","formatted","resolvedImage"].includes(R.kind)&&["value","string"].includes(B.kind)||["padding","numberArray"].includes(R.kind)&&["value","number","array"].includes(B.kind)||R.kind==="colorArray"&&["value","string","array"].includes(B.kind)||R.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(B.kind))A=m(A,R,u.typeAnnotation||"coerce");else if(this.checkSubtype(R,B))return null}else A=m(A,R,u.typeAnnotation||"assert")}if(!(A instanceof Pt)&&A.type.kind!=="resolvedImage"&&this._isConstant(A)){const R=new fa;try{A=new Pt(A.type,A.evaluate(R))}catch(B){return this.error(B.message),null}}return A}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,u,m){const b=typeof l=="number"?this.path.concat(l):this.path,C=m?this.scope.concat(m):this.scope;return new aa(this.registry,this._isConstant,b,u||null,C,this.errors)}error(l,...u){const m=`${this.key}${u.map((b=>`[${b}]`)).join("")}`;this.errors.push(new ct(m,l))}checkSubtype(l,u){const m=er(l,u);return m&&this.error(m),m}}class zn{constructor(l,u){this.type=u.type,this.bindings=[].concat(l),this.result=u}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const u of this.bindings)l(u[1]);l(this.result)}static parse(l,u){if(l.length<4)return u.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const m=[];for(let C=1;C<l.length-1;C+=2){const A=l[C];if(typeof A!="string")return u.error(`Expected string, but found ${typeof A} instead.`,C);if(/[^a-zA-Z0-9_]/.test(A))return u.error("Variable names must contain only alphanumeric characters or '_'.",C);const R=u.parse(l[C+1],C+1);if(!R)return null;m.push([A,R])}const b=u.parse(l[l.length-1],l.length-1,u.expectedType,m);return b?new zn(m,b):null}outputDefined(){return this.result.outputDefined()}}class Va{constructor(l,u){this.type=u.type,this.name=l,this.boundExpression=u}static parse(l,u){if(l.length!==2||typeof l[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const m=l[1];return u.scope.has(m)?new Va(m,u.scope.get(m)):u.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class Hn{constructor(l,u,m){this.type=l,this.index=u,this.input=m}static parse(l,u){if(l.length!==3)return u.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=u.parse(l[1],1,gt),b=u.parse(l[2],2,Ma(u.expectedType||Ei));return m&&b?new Hn(b.type.itemType,m,b):null}evaluate(l){const u=this.index.evaluate(l),m=this.input.evaluate(l);if(u<0)throw new Fa(`Array index out of bounds: ${u} < 0.`);if(u>=m.length)throw new Fa(`Array index out of bounds: ${u} > ${m.length-1}.`);if(u!==Math.floor(u))throw new Fa(`Array index must be an integer, but found ${u} instead.`);return m[u]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class an{constructor(l,u){this.type=ei,this.needle=l,this.haystack=u}static parse(l,u){if(l.length!==3)return u.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=u.parse(l[1],1,Ei),b=u.parse(l[2],2,Ei);return m&&b?qn(m.type,[ei,Gt,gt,ii,Ei])?new an(m,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${nn(m.type)} instead`):null}evaluate(l){const u=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!Zn(u,["boolean","string","number","null"]))throw new Fa(`Expected first argument to be of type boolean, string, number or null, but found ${nn(Ct(u))} instead.`);if(!Zn(m,["string","array"]))throw new Fa(`Expected second argument to be of type array or string, but found ${nn(Ct(m))} instead.`);return m.indexOf(u)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class oa{constructor(l,u,m){this.type=gt,this.needle=l,this.haystack=u,this.fromIndex=m}static parse(l,u){if(l.length<=2||l.length>=5)return u.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const m=u.parse(l[1],1,Ei),b=u.parse(l[2],2,Ei);if(!m||!b)return null;if(!qn(m.type,[ei,Gt,gt,ii,Ei]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${nn(m.type)} instead`);if(l.length===4){const C=u.parse(l[3],3,gt);return C?new oa(m,b,C):null}return new oa(m,b)}evaluate(l){const u=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!Zn(u,["boolean","string","number","null"]))throw new Fa(`Expected first argument to be of type boolean, string, number or null, but found ${nn(Ct(u))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(l)),Zn(m,["string"])){const C=m.indexOf(u,b);return C===-1?-1:[...m.slice(0,C)].length}if(Zn(m,["array"]))return m.indexOf(u,b);throw new Fa(`Expected second argument to be of type array or string, but found ${nn(Ct(m))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ia{constructor(l,u,m,b,C,A){this.inputType=l,this.type=u,this.input=m,this.cases=b,this.outputs=C,this.otherwise=A}static parse(l,u){if(l.length<5)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return u.error("Expected an even number of arguments.");let m,b;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);const C={},A=[];for(let $=2;$<l.length-1;$+=2){let q=l[$];const te=l[$+1];Array.isArray(q)||(q=[q]);const oe=u.concat($);if(q.length===0)return oe.error("Expected at least one branch label.");for(const fe of q){if(typeof fe!="number"&&typeof fe!="string")return oe.error("Branch labels must be numbers or strings.");if(typeof fe=="number"&&Math.abs(fe)>Number.MAX_SAFE_INTEGER)return oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof fe=="number"&&Math.floor(fe)!==fe)return oe.error("Numeric branch labels must be integer values.");if(m){if(oe.checkSubtype(m,Ct(fe)))return null}else m=Ct(fe);if(C[String(fe)]!==void 0)return oe.error("Branch labels must be unique.");C[String(fe)]=A.length}const ce=u.parse(te,$,b);if(!ce)return null;b=b||ce.type,A.push(ce)}const R=u.parse(l[1],1,Ei);if(!R)return null;const B=u.parse(l[l.length-1],l.length-1,b);return B?R.type.kind!=="value"&&u.concat(1).checkSubtype(m,R.type)?null:new ia(m,b,R,C,A,B):null}evaluate(l){const u=this.input.evaluate(l);return(Ct(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class br{constructor(l,u,m){this.type=l,this.branches=u,this.otherwise=m}static parse(l,u){if(l.length<4)return u.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return u.error("Expected an odd number of arguments.");let m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);const b=[];for(let A=1;A<l.length-1;A+=2){const R=u.parse(l[A],A,ei);if(!R)return null;const B=u.parse(l[A+1],A+1,m);if(!B)return null;b.push([R,B]),m=m||B.type}const C=u.parse(l[l.length-1],l.length-1,m);if(!C)return null;if(!m)throw new Error("Can't infer output type");return new br(m,b,C)}evaluate(l){for(const[u,m]of this.branches)if(u.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[u,m]of this.branches)l(u),l(m);l(this.otherwise)}outputDefined(){return this.branches.every((([l,u])=>u.outputDefined()))&&this.otherwise.outputDefined()}}class va{constructor(l,u,m,b){this.type=l,this.input=u,this.beginIndex=m,this.endIndex=b}static parse(l,u){if(l.length<=2||l.length>=5)return u.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const m=u.parse(l[1],1,Ei),b=u.parse(l[2],2,gt);if(!m||!b)return null;if(!qn(m.type,[Ma(Ei),Gt,Ei]))return u.error(`Expected first argument to be of type array or string, but found ${nn(m.type)} instead`);if(l.length===4){const C=u.parse(l[3],3,gt);return C?new va(m.type,m,b,C):null}return new va(m.type,m,b)}evaluate(l){const u=this.input.evaluate(l),m=this.beginIndex.evaluate(l);let b;if(this.endIndex&&(b=this.endIndex.evaluate(l)),Zn(u,["string"]))return[...u].slice(m,b).join("");if(Zn(u,["array"]))return u.slice(m,b);throw new Fa(`Expected first argument to be of type array or string, but found ${nn(Ct(u))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Ha(d,l){const u=d.length-1;let m,b,C=0,A=u,R=0;for(;C<=A;)if(R=Math.floor((C+A)/2),m=d[R],b=d[R+1],m<=l){if(R===u||l<b)return R;C=R+1}else{if(!(m>l))throw new Fa("Input is not a number.");A=R-1}return 0}class Wt{constructor(l,u,m){this.type=l,this.input=u,this.labels=[],this.outputs=[];for(const[b,C]of m)this.labels.push(b),this.outputs.push(C)}static parse(l,u){if(l.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return u.error("Expected an even number of arguments.");const m=u.parse(l[1],1,gt);if(!m)return null;const b=[];let C=null;u.expectedType&&u.expectedType.kind!=="value"&&(C=u.expectedType);for(let A=1;A<l.length;A+=2){const R=A===1?-1/0:l[A],B=l[A+1],$=A,q=A+1;if(typeof R!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(b.length&&b[b.length-1][0]>=R)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const te=u.parse(B,q,C);if(!te)return null;C=C||te.type,b.push([R,te])}return new Wt(C,m,b)}evaluate(l){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(l);const b=this.input.evaluate(l);if(b<=u[0])return m[0].evaluate(l);const C=u.length;return b>=u[C-1]?m[C-1].evaluate(l):m[Ha(u,b)].evaluate(l)}eachChild(l){l(this.input);for(const u of this.outputs)l(u)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function En(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Jn,Aa,lo=(function(){if(Aa)return Jn;function d(l,u,m,b){this.cx=3*l,this.bx=3*(m-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=u,this.p2x=m,this.p2y=b}return Aa=1,Jn=d,d.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,u){if(u===void 0&&(u=1e-6),l<0)return 0;if(l>1)return 1;for(var m=l,b=0;b<8;b++){var C=this.sampleCurveX(m)-l;if(Math.abs(C)<u)return m;var A=this.sampleCurveDerivativeX(m);if(Math.abs(A)<1e-6)break;m-=C/A}var R=0,B=1;for(m=l,b=0;b<20&&(C=this.sampleCurveX(m),!(Math.abs(C-l)<u));b++)l>C?R=m:B=m,m=.5*(B-R)+R;return m},solve:function(l,u){return this.sampleCurveY(this.solveCurveX(l,u))}},Jn})(),Fo=En(lo);class ir{constructor(l,u,m,b,C){this.type=l,this.operator=u,this.interpolation=m,this.input=b,this.labels=[],this.outputs=[];for(const[A,R]of C)this.labels.push(A),this.outputs.push(R)}static interpolationFactor(l,u,m,b){let C=0;if(l.name==="exponential")C=Cs(u,l.base,m,b);else if(l.name==="linear")C=Cs(u,1,m,b);else if(l.name==="cubic-bezier"){const A=l.controlPoints;C=new Fo(A[0],A[1],A[2],A[3]).solve(Cs(u,1,m,b))}return C}static parse(l,u){let[m,b,C,...A]=l;if(!Array.isArray(b)||b.length===0)return u.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const $=b[1];if(typeof $!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:$}}else{if(b[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const $=b.slice(1);if($.length!==4||$.some((q=>typeof q!="number"||q<0||q>1)))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:$}}}if(l.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(C=u.parse(C,2,gt),!C)return null;const R=[];let B=null;m!=="interpolate-hcl"&&m!=="interpolate-lab"||u.expectedType==ca?u.expectedType&&u.expectedType.kind!=="value"&&(B=u.expectedType):B=ki;for(let $=0;$<A.length;$+=2){const q=A[$],te=A[$+1],oe=$+3,ce=$+4;if(typeof q!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(R.length&&R[R.length-1][0]>=q)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',oe);const fe=u.parse(te,ce,B);if(!fe)return null;B=B||fe.type,R.push([q,fe])}return kn(B,gt)||kn(B,gn)||kn(B,ki)||kn(B,on)||kn(B,vn)||kn(B,ca)||kn(B,Zt)||kn(B,Ma(gt))?new ir(B,m,b,C,R):u.error(`Type ${nn(B)} is not interpolatable.`)}evaluate(l){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(l);const b=this.input.evaluate(l);if(b<=u[0])return m[0].evaluate(l);const C=u.length;if(b>=u[C-1])return m[C-1].evaluate(l);const A=Ha(u,b),R=ir.interpolationFactor(this.interpolation,b,u[A],u[A+1]),B=m[A].evaluate(l),$=m[A+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return xr(B,$,R);case"color":return yn.interpolate(B,$,R);case"padding":return tr.interpolate(B,$,R);case"colorArray":return _i.interpolate(B,$,R);case"numberArray":return ea.interpolate(B,$,R);case"variableAnchorOffsetCollection":return pe.interpolate(B,$,R);case"array":return vr(B,$,R);case"projectionDefinition":return Me.interpolate(B,$,R)}case"interpolate-hcl":switch(this.type.kind){case"color":return yn.interpolate(B,$,R,"hcl");case"colorArray":return _i.interpolate(B,$,R,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return yn.interpolate(B,$,R,"lab");case"colorArray":return _i.interpolate(B,$,R,"lab")}}}eachChild(l){l(this.input);for(const u of this.outputs)l(u)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Cs(d,l,u,m){const b=m-u,C=d-u;return b===0?0:l===1?C/b:(Math.pow(l,C)-1)/(Math.pow(l,b)-1)}const ba={color:yn.interpolate,number:xr,padding:tr.interpolate,numberArray:ea.interpolate,colorArray:_i.interpolate,variableAnchorOffsetCollection:pe.interpolate,array:vr};class Ka{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");let m=null;const b=u.expectedType;b&&b.kind!=="value"&&(m=b);const C=[];for(const R of l.slice(1)){const B=u.parse(R,1+C.length,m,void 0,{typeAnnotation:"omit"});if(!B)return null;m=m||B.type,C.push(B)}if(!m)throw new Error("No output type");const A=b&&C.some((R=>er(b,R.type)));return new Ka(A?Ei:m,C)}evaluate(l){let u,m=null,b=0;for(const C of this.args)if(b++,m=C.evaluate(l),m&&m instanceof we&&!m.available&&(u||(u=m.name),m=null,b===this.args.length&&(m=u)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function ko(d,l){return d==="=="||d==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Wa(d,l,u,m){return m.compare(l,u)===0}function nr(d,l,u){const m=d!=="=="&&d!=="!=";return class sE{constructor(C,A,R){this.type=ei,this.lhs=C,this.rhs=A,this.collator=R,this.hasUntypedArgument=C.type.kind==="value"||A.type.kind==="value"}static parse(C,A){if(C.length!==3&&C.length!==4)return A.error("Expected two or three arguments.");const R=C[0];let B=A.parse(C[1],1,Ei);if(!B)return null;if(!ko(R,B.type))return A.concat(1).error(`"${R}" comparisons are not supported for type '${nn(B.type)}'.`);let $=A.parse(C[2],2,Ei);if(!$)return null;if(!ko(R,$.type))return A.concat(2).error(`"${R}" comparisons are not supported for type '${nn($.type)}'.`);if(B.type.kind!==$.type.kind&&B.type.kind!=="value"&&$.type.kind!=="value")return A.error(`Cannot compare types '${nn(B.type)}' and '${nn($.type)}'.`);m&&(B.type.kind==="value"&&$.type.kind!=="value"?B=new Hi($.type,[B]):B.type.kind!=="value"&&$.type.kind==="value"&&($=new Hi(B.type,[$])));let q=null;if(C.length===4){if(B.type.kind!=="string"&&$.type.kind!=="string"&&B.type.kind!=="value"&&$.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(q=A.parse(C[3],3,Vi),!q)return null}return new sE(B,$,q)}evaluate(C){const A=this.lhs.evaluate(C),R=this.rhs.evaluate(C);if(m&&this.hasUntypedArgument){const B=Ct(A),$=Ct(R);if(B.kind!==$.kind||B.kind!=="string"&&B.kind!=="number")throw new Fa(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${B.kind}, ${$.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const B=Ct(A),$=Ct(R);if(B.kind!=="string"||$.kind!=="string")return l(C,A,R)}return this.collator?u(C,A,R,this.collator.evaluate(C)):l(C,A,R)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const co=nr("==",(function(d,l,u){return l===u}),Wa),Ta=nr("!=",(function(d,l,u){return l!==u}),(function(d,l,u,m){return!Wa(0,l,u,m)})),jn=nr("<",(function(d,l,u){return l<u}),(function(d,l,u,m){return m.compare(l,u)<0})),lu=nr(">",(function(d,l,u){return l>u}),(function(d,l,u,m){return m.compare(l,u)>0})),da=nr("<=",(function(d,l,u){return l<=u}),(function(d,l,u,m){return m.compare(l,u)<=0})),Ur=nr(">=",(function(d,l,u){return l>=u}),(function(d,l,u,m){return m.compare(l,u)>=0}));class zr{constructor(l,u,m){this.type=Vi,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=u}static parse(l,u){if(l.length!==2)return u.error("Expected one argument.");const m=l[1];if(typeof m!="object"||Array.isArray(m))return u.error("Collator options argument must be an object.");const b=u.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,ei);if(!b)return null;const C=u.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,ei);if(!C)return null;let A=null;return m.locale&&(A=u.parse(m.locale,1,Gt),!A)?null:new zr(b,C,A)}evaluate(l){return new Ws(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class Fs{constructor(l,u,m,b,C){this.type=Gt,this.number=l,this.locale=u,this.currency=m,this.minFractionDigits=b,this.maxFractionDigits=C}static parse(l,u){if(l.length!==3)return u.error("Expected two arguments.");const m=u.parse(l[1],1,gt);if(!m)return null;const b=l[2];if(typeof b!="object"||Array.isArray(b))return u.error("NumberFormat options argument must be an object.");let C=null;if(b.locale&&(C=u.parse(b.locale,1,Gt),!C))return null;let A=null;if(b.currency&&(A=u.parse(b.currency,1,Gt),!A))return null;let R=null;if(b["min-fraction-digits"]&&(R=u.parse(b["min-fraction-digits"],1,gt),!R))return null;let B=null;return b["max-fraction-digits"]&&(B=u.parse(b["max-fraction-digits"],1,gt),!B)?null:new Fs(m,C,A,R,B)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class rr{constructor(l){this.type=Yi,this.sections=l}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");const m=l[1];if(!Array.isArray(m)&&typeof m=="object")return u.error("First argument must be an image or text section.");const b=[];let C=!1;for(let A=1;A<=l.length-1;++A){const R=l[A];if(C&&typeof R=="object"&&!Array.isArray(R)){C=!1;let B=null;if(R["font-scale"]&&(B=u.parse(R["font-scale"],1,gt),!B))return null;let $=null;if(R["text-font"]&&($=u.parse(R["text-font"],1,Ma(Gt)),!$))return null;let q=null;if(R["text-color"]&&(q=u.parse(R["text-color"],1,ki),!q))return null;let te=null;if(R["vertical-align"]){if(typeof R["vertical-align"]=="string"&&!zo.includes(R["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${R["vertical-align"]}' instead.`);if(te=u.parse(R["vertical-align"],1,Gt),!te)return null}const oe=b[b.length-1];oe.scale=B,oe.font=$,oe.textColor=q,oe.verticalAlign=te}else{const B=u.parse(l[A],1,Ei);if(!B)return null;const $=B.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,b.push({content:B,scale:null,font:null,textColor:null,verticalAlign:null})}}return new rr(b)}evaluate(l){return new ta(this.sections.map((u=>{const m=u.content.evaluate(l);return Ct(m)===$n?new Kn("",m,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(l):null):new Kn(Ht(m),null,u.scale?u.scale.evaluate(l):null,u.font?u.font.evaluate(l).join(","):null,u.textColor?u.textColor.evaluate(l):null,u.verticalAlign?u.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const u of this.sections)l(u.content),u.scale&&l(u.scale),u.font&&l(u.font),u.textColor&&l(u.textColor),u.verticalAlign&&l(u.verticalAlign)}outputDefined(){return!1}}class As{constructor(l){this.type=$n,this.input=l}static parse(l,u){if(l.length!==2)return u.error("Expected two arguments.");const m=u.parse(l[1],1,Gt);return m?new As(m):u.error("No image name provided.")}evaluate(l){const u=this.input.evaluate(l),m=we.fromString(u);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(u)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class _l{constructor(l){this.type=gt,this.input=l}static parse(l,u){if(l.length!==2)return u.error(`Expected 1 argument, but found ${l.length-1} instead.`);const m=u.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${nn(m.type)} instead.`):new _l(m):null}evaluate(l){const u=this.input.evaluate(l);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new Fa(`Expected value to be of type string or array, but found ${nn(Ct(u))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const Ir=8192;function Yu(d,l){const u=(180+d[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,b=Math.pow(2,l.z);return[Math.round(u*b*Ir),Math.round(m*b*Ir)]}function xl(d,l){const u=Math.pow(2,l.z);return[(b=(d[0]/Ir+l.x)/u,360*b-180),(m=(d[1]/Ir+l.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,b}function Fc(d,l){d[0]=Math.min(d[0],l[0]),d[1]=Math.min(d[1],l[1]),d[2]=Math.max(d[2],l[0]),d[3]=Math.max(d[3],l[1])}function uo(d,l){return!(d[0]<=l[0]||d[2]>=l[2]||d[1]<=l[1]||d[3]>=l[3])}function cu(d,l,u){const m=d[0]-l[0],b=d[1]-l[1],C=d[0]-u[0],A=d[1]-u[1];return m*A-C*b==0&&m*C<=0&&b*A<=0}function Nc(d,l,u,m){return(b=[m[0]-u[0],m[1]-u[1]])[0]*(C=[l[0]-d[0],l[1]-d[1]])[1]-b[1]*C[0]!=0&&!(!uu(d,l,u,m)||!uu(u,m,d,l));var b,C}function Bc(d,l,u){for(const m of u)for(let b=0;b<m.length-1;++b)if(Nc(d,l,m[b],m[b+1]))return!0;return!1}function gc(d,l,u=!1){let m=!1;for(const R of l)for(let B=0;B<R.length-1;B++){if(cu(d,R[B],R[B+1]))return u;(C=R[B])[1]>(b=d)[1]!=(A=R[B+1])[1]>b[1]&&b[0]<(A[0]-C[0])*(b[1]-C[1])/(A[1]-C[1])+C[0]&&(m=!m)}var b,C,A;return m}function Co(d,l){for(const u of l)if(gc(d,u))return!0;return!1}function No(d,l){for(const u of d)if(!gc(u,l))return!1;for(let u=0;u<d.length-1;++u)if(Bc(d[u],d[u+1],l))return!1;return!0}function Ts(d,l){for(const u of l)if(No(d,u))return!0;return!1}function uu(d,l,u,m){const b=m[0]-u[0],C=m[1]-u[1],A=(d[0]-u[0])*C-b*(d[1]-u[1]),R=(l[0]-u[0])*C-b*(l[1]-u[1]);return A>0&&R<0||A<0&&R>0}function Xs(d,l,u){const m=[];for(let b=0;b<d.length;b++){const C=[];for(let A=0;A<d[b].length;A++){const R=Yu(d[b][A],u);Fc(l,R),C.push(R)}m.push(C)}return m}function hu(d,l,u){const m=[];for(let b=0;b<d.length;b++){const C=Xs(d[b],l,u);m.push(C)}return m}function du(d,l,u,m){if(d[0]<u[0]||d[0]>u[2]){const b=.5*m;let C=d[0]-u[0]>b?-m:u[0]-d[0]>b?m:0;C===0&&(C=d[0]-u[2]>b?-m:u[2]-d[0]>b?m:0),d[0]+=C}Fc(l,d)}function jh(d,l,u,m){const b=Math.pow(2,m.z)*Ir,C=[m.x*Ir,m.y*Ir],A=[];for(const R of d)for(const B of R){const $=[B.x+C[0],B.y+C[1]];du($,l,u,b),A.push($)}return A}function qu(d,l,u,m){const b=Math.pow(2,m.z)*Ir,C=[m.x*Ir,m.y*Ir],A=[];for(const B of d){const $=[];for(const q of B){const te=[q.x+C[0],q.y+C[1]];Fc(l,te),$.push(te)}A.push($)}if(l[2]-l[0]<=b/2){(R=l)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const B of A)for(const $ of B)du($,l,u,b)}var R;return A}class gs{constructor(l,u){this.type=ei,this.geojson=l,this.geometries=u}static parse(l,u){if(l.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Ge(l[1])){const m=l[1];if(m.type==="FeatureCollection"){const b=[];for(const C of m.features){const{type:A,coordinates:R}=C.geometry;A==="Polygon"&&b.push(R),A==="MultiPolygon"&&b.push(...R)}if(b.length)return new gs(m,{type:"MultiPolygon",coordinates:b})}else if(m.type==="Feature"){const b=m.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new gs(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new gs(m,m)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(u,m){const b=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=u.canonicalID();if(m.type==="Polygon"){const R=Xs(m.coordinates,C,A),B=jh(u.geometry(),b,C,A);if(!uo(b,C))return!1;for(const $ of B)if(!gc($,R))return!1}if(m.type==="MultiPolygon"){const R=hu(m.coordinates,C,A),B=jh(u.geometry(),b,C,A);if(!uo(b,C))return!1;for(const $ of B)if(!Co($,R))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(u,m){const b=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=u.canonicalID();if(m.type==="Polygon"){const R=Xs(m.coordinates,C,A),B=qu(u.geometry(),b,C,A);if(!uo(b,C))return!1;for(const $ of B)if(!No($,R))return!1}if(m.type==="MultiPolygon"){const R=hu(m.coordinates,C,A),B=qu(u.geometry(),b,C,A);if(!uo(b,C))return!1;for(const $ of B)if(!Ts($,R))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Vh=class{constructor(d=[],l=(u,m)=>u<m?-1:u>m?1:0){if(this.data=d,this.length=this.data.length,this.compare=l,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:l,compare:u}=this,m=l[d];for(;d>0;){const b=d-1>>1,C=l[b];if(u(m,C)>=0)break;l[d]=C,d=b}l[d]=m}_down(d){const{data:l,compare:u}=this,m=this.length>>1,b=l[d];for(;d<m;){let C=1+(d<<1);const A=C+1;if(A<this.length&&u(l[A],l[C])<0&&(C=A),u(l[C],b)>=0)break;l[d]=l[C],d=C}l[d]=b}};function mc(d,l,u=0,m=d.length-1,b=pa){for(;m>u;){if(m-u>600){const B=m-u+1,$=l-u+1,q=Math.log(B),te=.5*Math.exp(2*q/3),oe=.5*Math.sqrt(q*te*(B-te)/B)*($-B/2<0?-1:1);mc(d,l,Math.max(u,Math.floor(l-$*te/B+oe)),Math.min(m,Math.floor(l+(B-$)*te/B+oe)),b)}const C=d[l];let A=u,R=m;for(Ao(d,u,l),b(d[m],C)>0&&Ao(d,u,m);A<R;){for(Ao(d,A,R),A++,R--;b(d[A],C)<0;)A++;for(;b(d[R],C)>0;)R--}b(d[u],C)===0?Ao(d,u,R):(R++,Ao(d,R,m)),R<=l&&(u=R+1),l<=R&&(m=R-1)}}function Ao(d,l,u){const m=d[l];d[l]=d[u],d[u]=m}function pa(d,l){return d<l?-1:d>l?1:0}function Vl(d,l){if(d.length<=1)return[d];const u=[];let m,b;for(const C of d){const A=g(C);A!==0&&(C.area=Math.abs(A),b===void 0&&(b=A<0),b===A<0?(m&&u.push(m),m=[C]):m.push(C))}if(m&&u.push(m),l>1)for(let C=0;C<u.length;C++)u[C].length<=l||(mc(u[C],l,1,u[C].length-1,Se),u[C]=u[C].slice(0,l));return u}function Se(d,l){return l.area-d.area}function g(d){let l=0;for(let u,m,b=0,C=d.length,A=C-1;b<C;A=b++)u=d[b],m=d[A],l+=(m.x-u.x)*(u.y+m.y);return l}const _=1/298.257223563,w=_*(2-_),T=Math.PI/180;class M{constructor(l){const u=6378.137*T*1e3,m=Math.cos(l*T),b=1/(1-w*(1-m*m)),C=Math.sqrt(b);this.kx=u*C*m,this.ky=u*C*b*(1-w)}distance(l,u){const m=this.wrap(l[0]-u[0])*this.kx,b=(l[1]-u[1])*this.ky;return Math.sqrt(m*m+b*b)}pointOnLine(l,u){let m,b,C,A,R=1/0;for(let B=0;B<l.length-1;B++){let $=l[B][0],q=l[B][1],te=this.wrap(l[B+1][0]-$)*this.kx,oe=(l[B+1][1]-q)*this.ky,ce=0;te===0&&oe===0||(ce=(this.wrap(u[0]-$)*this.kx*te+(u[1]-q)*this.ky*oe)/(te*te+oe*oe),ce>1?($=l[B+1][0],q=l[B+1][1]):ce>0&&($+=te/this.kx*ce,q+=oe/this.ky*ce)),te=this.wrap(u[0]-$)*this.kx,oe=(u[1]-q)*this.ky;const fe=te*te+oe*oe;fe<R&&(R=fe,m=$,b=q,C=B,A=ce)}return{point:[m,b],index:C,t:Math.max(0,Math.min(1,A))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function O(d,l){return l[0]-d[0]}function V(d){return d[1]-d[0]+1}function W(d,l){return d[1]>=d[0]&&d[1]<l}function K(d,l){if(d[0]>d[1])return[null,null];const u=V(d);if(l){if(u===2)return[d,null];const b=Math.floor(u/2);return[[d[0],d[0]+b],[d[0]+b,d[1]]]}if(u===1)return[d,null];const m=Math.floor(u/2)-1;return[[d[0],d[0]+m],[d[0]+m+1,d[1]]]}function de(d,l){if(!W(l,d.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let m=l[0];m<=l[1];++m)Fc(u,d[m]);return u}function ke(d){const l=[1/0,1/0,-1/0,-1/0];for(const u of d)for(const m of u)Fc(l,m);return l}function Pe(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function Ze(d,l,u){if(!Pe(d)||!Pe(l))return NaN;let m=0,b=0;return d[2]<l[0]&&(m=l[0]-d[2]),d[0]>l[2]&&(m=d[0]-l[2]),d[1]>l[3]&&(b=d[1]-l[3]),d[3]<l[1]&&(b=l[1]-d[3]),u.distance([0,0],[m,b])}function mt(d,l,u){const m=u.pointOnLine(l,d);return u.distance(d,m.point)}function vt(d,l,u,m,b){const C=Math.min(mt(d,[u,m],b),mt(l,[u,m],b)),A=Math.min(mt(u,[d,l],b),mt(m,[d,l],b));return Math.min(C,A)}function zt(d,l,u,m,b){if(!W(l,d.length)||!W(m,u.length))return 1/0;let C=1/0;for(let A=l[0];A<l[1];++A){const R=d[A],B=d[A+1];for(let $=m[0];$<m[1];++$){const q=u[$],te=u[$+1];if(Nc(R,B,q,te))return 0;C=Math.min(C,vt(R,B,q,te,b))}}return C}function Kt(d,l,u,m,b){if(!W(l,d.length)||!W(m,u.length))return NaN;let C=1/0;for(let A=l[0];A<=l[1];++A)for(let R=m[0];R<=m[1];++R)if(C=Math.min(C,b.distance(d[A],u[R])),C===0)return C;return C}function Ri(d,l,u){if(gc(d,l,!0))return 0;let m=1/0;for(const b of l){const C=b[0],A=b[b.length-1];if(C!==A&&(m=Math.min(m,mt(d,[A,C],u)),m===0))return m;const R=u.pointOnLine(b,d);if(m=Math.min(m,u.distance(d,R.point)),m===0)return m}return m}function zi(d,l,u,m){if(!W(l,d.length))return NaN;for(let C=l[0];C<=l[1];++C)if(gc(d[C],u,!0))return 0;let b=1/0;for(let C=l[0];C<l[1];++C){const A=d[C],R=d[C+1];for(const B of u)for(let $=0,q=B.length,te=q-1;$<q;te=$++){const oe=B[te],ce=B[$];if(Nc(A,R,oe,ce))return 0;b=Math.min(b,vt(A,R,oe,ce,m))}}return b}function Ci(d,l){for(const u of d)for(const m of u)if(gc(m,l,!0))return!0;return!1}function _a(d,l,u,m=1/0){const b=ke(d),C=ke(l);if(m!==1/0&&Ze(b,C,u)>=m)return m;if(uo(b,C)){if(Ci(d,l))return 0}else if(Ci(l,d))return 0;let A=1/0;for(const R of d)for(let B=0,$=R.length,q=$-1;B<$;q=B++){const te=R[q],oe=R[B];for(const ce of l)for(let fe=0,ge=ce.length,ve=ge-1;fe<ge;ve=fe++){const Ie=ce[ve],Qe=ce[fe];if(Nc(te,oe,Ie,Qe))return 0;A=Math.min(A,vt(te,oe,Ie,Qe,u))}}return A}function un(d,l,u,m,b,C){if(!C)return;const A=Ze(de(m,C),b,u);A<l&&d.push([A,C,[0,0]])}function X(d,l,u,m,b,C,A){if(!C||!A)return;const R=Ze(de(m,C),de(b,A),u);R<l&&d.push([R,C,A])}function se(d,l,u,m,b=1/0){let C=Math.min(m.distance(d[0],u[0][0]),b);if(C===0)return C;const A=new Vh([[0,[0,d.length-1],[0,0]]],O),R=ke(u);for(;A.length>0;){const B=A.pop();if(B[0]>=C)continue;const $=B[1],q=l?50:100;if(V($)<=q){if(!W($,d.length))return NaN;if(l){const te=zi(d,$,u,m);if(isNaN(te)||te===0)return te;C=Math.min(C,te)}else for(let te=$[0];te<=$[1];++te){const oe=Ri(d[te],u,m);if(C=Math.min(C,oe),C===0)return 0}}else{const te=K($,l);un(A,C,m,d,R,te[0]),un(A,C,m,d,R,te[1])}}return C}function Ae(d,l,u,m,b,C=1/0){let A=Math.min(C,b.distance(d[0],u[0]));if(A===0)return A;const R=new Vh([[0,[0,d.length-1],[0,u.length-1]]],O);for(;R.length>0;){const B=R.pop();if(B[0]>=A)continue;const $=B[1],q=B[2],te=l?50:100,oe=m?50:100;if(V($)<=te&&V(q)<=oe){if(!W($,d.length)&&W(q,u.length))return NaN;let ce;if(l&&m)ce=zt(d,$,u,q,b),A=Math.min(A,ce);else if(l&&!m){const fe=d.slice($[0],$[1]+1);for(let ge=q[0];ge<=q[1];++ge)if(ce=mt(u[ge],fe,b),A=Math.min(A,ce),A===0)return A}else if(!l&&m){const fe=u.slice(q[0],q[1]+1);for(let ge=$[0];ge<=$[1];++ge)if(ce=mt(d[ge],fe,b),A=Math.min(A,ce),A===0)return A}else ce=Kt(d,$,u,q,b),A=Math.min(A,ce)}else{const ce=K($,l),fe=K(q,m);X(R,A,b,d,u,ce[0],fe[0]),X(R,A,b,d,u,ce[0],fe[1]),X(R,A,b,d,u,ce[1],fe[0]),X(R,A,b,d,u,ce[1],fe[1])}}return A}function Ve(d){return d.type==="MultiPolygon"?d.coordinates.map((l=>({type:"Polygon",coordinates:l}))):d.type==="MultiLineString"?d.coordinates.map((l=>({type:"LineString",coordinates:l}))):d.type==="MultiPoint"?d.coordinates.map((l=>({type:"Point",coordinates:l}))):[d]}class nt{constructor(l,u){this.type=gt,this.geojson=l,this.geometries=u}static parse(l,u){if(l.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Ge(l[1])){const m=l[1];if(m.type==="FeatureCollection")return new nt(m,m.features.map((b=>Ve(b.geometry))).flat());if(m.type==="Feature")return new nt(m,Ve(m.geometry));if("type"in m&&"coordinates"in m)return new nt(m,Ve(m))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(u,m){const b=u.geometry(),C=b.flat().map((B=>xl([B.x,B.y],u.canonical)));if(b.length===0)return NaN;const A=new M(C[0][1]);let R=1/0;for(const B of m){switch(B.type){case"Point":R=Math.min(R,Ae(C,!1,[B.coordinates],!1,A,R));break;case"LineString":R=Math.min(R,Ae(C,!1,B.coordinates,!0,A,R));break;case"Polygon":R=Math.min(R,se(C,!1,B.coordinates,A,R))}if(R===0)return R}return R})(l,this.geometries);if(l.geometryType()==="LineString")return(function(u,m){const b=u.geometry(),C=b.flat().map((B=>xl([B.x,B.y],u.canonical)));if(b.length===0)return NaN;const A=new M(C[0][1]);let R=1/0;for(const B of m){switch(B.type){case"Point":R=Math.min(R,Ae(C,!0,[B.coordinates],!1,A,R));break;case"LineString":R=Math.min(R,Ae(C,!0,B.coordinates,!0,A,R));break;case"Polygon":R=Math.min(R,se(C,!0,B.coordinates,A,R))}if(R===0)return R}return R})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(u,m){const b=u.geometry();if(b.length===0||b[0].length===0)return NaN;const C=Vl(b,0).map((B=>B.map(($=>$.map((q=>xl([q.x,q.y],u.canonical))))))),A=new M(C[0][0][0][1]);let R=1/0;for(const B of m)for(const $ of C){switch(B.type){case"Point":R=Math.min(R,se([B.coordinates],!1,$,A,R));break;case"LineString":R=Math.min(R,se(B.coordinates,!0,$,A,R));break;case"Polygon":R=Math.min(R,_a($,B.coordinates,A,R))}if(R===0)return R}return R})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class ut{constructor(l){this.type=Ei,this.key=l}static parse(l,u){if(l.length!==2)return u.error(`Expected 1 argument, but found ${l.length-1} instead.`);const m=l[1];return m==null?u.error("Global state property must be defined."):typeof m!="string"?u.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new ut(m)}evaluate(l){var u;const m=(u=l.globals)===null||u===void 0?void 0:u.globalState;return m&&Object.keys(m).length!==0?Er(m,this.key):null}eachChild(){}outputDefined(){return!1}}const bt={"==":co,"!=":Ta,">":lu,"<":jn,">=":Ur,"<=":da,array:Hi,at:Hn,boolean:Hi,case:br,coalesce:Ka,collator:zr,format:rr,image:As,in:an,"index-of":oa,interpolate:ir,"interpolate-hcl":ir,"interpolate-lab":ir,length:_l,let:zn,literal:Pt,match:ia,number:Hi,"number-format":Fs,object:Hi,slice:va,step:Wt,string:Hi,"to-boolean":Pn,"to-color":Pn,"to-number":Pn,"to-string":Pn,var:Va,within:gs,distance:nt,"global-state":ut};class Xt{constructor(l,u,m,b){this.name=l,this.type=u,this._evaluate=m,this.args=b}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,u){const m=l[0],b=Xt.definitions[m];if(!b)return u.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(b)?b[0]:b.type,A=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,R=A.filter((([$])=>!Array.isArray($)||$.length===l.length-1));let B=null;for(const[$,q]of R){B=new aa(u.registry,$r,u.path,null,u.scope);const te=[];let oe=!1;for(let ce=1;ce<l.length;ce++){const fe=l[ce],ge=Array.isArray($)?$[ce-1]:$.type,ve=B.parse(fe,1+te.length,ge);if(!ve){oe=!0;break}te.push(ve)}if(!oe)if(Array.isArray($)&&$.length!==te.length)B.error(`Expected ${$.length} arguments, but found ${te.length} instead.`);else{for(let ce=0;ce<te.length;ce++){const fe=Array.isArray($)?$[ce]:$.type,ge=te[ce];B.concat(ce+1).checkSubtype(fe,ge.type)}if(B.errors.length===0)return new Xt(m,C,q,te)}}if(R.length===1)u.errors.push(...B.errors);else{const $=(R.length?R:A).map((([te])=>{return oe=te,Array.isArray(oe)?`(${oe.map(nn).join(", ")})`:`(${nn(oe.type)}...)`;var oe})).join(" | "),q=[];for(let te=1;te<l.length;te++){const oe=u.parse(l[te],1+q.length);if(!oe)return null;q.push(nn(oe.type))}u.error(`Expected arguments of type ${$}, but found (${q.join(", ")}) instead.`)}return null}static register(l,u){Xt.definitions=u;for(const m in u)l[m]=Xt}}function pi(d,[l,u,m,b]){l=l.evaluate(d),u=u.evaluate(d),m=m.evaluate(d);const C=b?b.evaluate(d):1,A=Ke(l,u,m,C);if(A)throw new Fa(A);return new yn(l/255,u/255,m/255,C,!1)}function hn(d,l){return d in l}function Wn(d,l){const u=l[d];return u===void 0?null:u}function wa(d){return{type:d}}function $r(d){if(d instanceof Va)return $r(d.boundExpression);if(d instanceof Xt&&d.name==="error"||d instanceof zr||d instanceof gs||d instanceof nt||d instanceof ut)return!1;const l=d instanceof Pn||d instanceof Hi;let u=!0;return d.eachChild((m=>{u=l?u&&$r(m):u&&m instanceof Pt})),!!u&&wr(d)&&Sa(d,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function wr(d){if(d instanceof Xt&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof gs||d instanceof nt)return!1;let l=!0;return d.eachChild((u=>{l&&!wr(u)&&(l=!1)})),l}function Jr(d){if(d instanceof Xt&&d.name==="feature-state")return!1;let l=!0;return d.eachChild((u=>{l&&!Jr(u)&&(l=!1)})),l}function Sa(d,l){if(d instanceof Xt&&l.indexOf(d.name)>=0)return!1;let u=!0;return d.eachChild((m=>{u&&!Sa(m,l)&&(u=!1)})),u}function Ln(d){return{result:"success",value:d}}function ra(d){return{result:"error",value:d}}function ua(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function Na(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function ms(d){return!!d.expression&&d.expression.interpolated}function Qn(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function To(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)&&Ct(d)===$i}function fu(d){return d}function pu(d,l){const u=d.stops&&typeof d.stops[0][0]=="object",m=u||!(u||d.property!==void 0),b=d.type||(ms(l)?"exponential":"interval"),C=(function(q){switch(q.type){case"color":return yn.parse;case"padding":return tr.parse;case"numberArray":return ea.parse;case"colorArray":return _i.parse;default:return null}})(l);if(C&&((d=xt({},d)).stops&&(d.stops=d.stops.map((q=>[q[0],C(q[1])]))),d.default=C(d.default?d.default:l.default)),d.colorSpace&&(A=d.colorSpace)!=="rgb"&&A!=="hcl"&&A!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var A;const R=(function(q){switch(q){case"exponential":return jc;case"interval":return Ed;case"categorical":return gu;case"identity":return Md;default:throw new Error(`Unknown function type "${q}"`)}})(b);let B,$;if(b==="categorical"){B=Object.create(null);for(const q of d.stops)B[q[0]]=q[1];$=typeof d.stops[0][0]}if(u){const q={},te=[];for(let fe=0;fe<d.stops.length;fe++){const ge=d.stops[fe],ve=ge[0].zoom;q[ve]===void 0&&(q[ve]={zoom:ve,type:d.type,property:d.property,default:d.default,stops:[]},te.push(ve)),q[ve].stops.push([ge[0].value,ge[1]])}const oe=[];for(const fe of te)oe.push([q[fe].zoom,pu(q[fe],l)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:ir.interpolationFactor.bind(void 0,ce),zoomStops:oe.map((fe=>fe[0])),evaluate:({zoom:fe},ge)=>jc({stops:oe,base:d.base},l,fe).evaluate(fe,ge)}}if(m){const q=b==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:q,interpolationFactor:ir.interpolationFactor.bind(void 0,q),zoomStops:d.stops.map((te=>te[0])),evaluate:({zoom:te})=>R(d,l,te,B,$)}}return{kind:"source",evaluate(q,te){const oe=te&&te.properties?te.properties[d.property]:void 0;return oe===void 0?Hl(d.default,l.default):R(d,l,oe,B,$)}}}function Hl(d,l,u){return d!==void 0?d:l!==void 0?l:u!==void 0?u:void 0}function gu(d,l,u,m,b){return Hl(typeof u===b?m[u]:void 0,d.default,l.default)}function Ed(d,l,u){if(Qn(u)!=="number")return Hl(d.default,l.default);const m=d.stops.length;if(m===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[m-1][0])return d.stops[m-1][1];const b=Ha(d.stops.map((C=>C[0])),u);return d.stops[b][1]}function jc(d,l,u){const m=d.base!==void 0?d.base:1;if(Qn(u)!=="number")return Hl(d.default,l.default);const b=d.stops.length;if(b===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[b-1][0])return d.stops[b-1][1];const C=Ha(d.stops.map((q=>q[0])),u),A=(function(q,te,oe,ce){const fe=ce-oe,ge=q-oe;return fe===0?0:te===1?ge/fe:(Math.pow(te,ge)-1)/(Math.pow(te,fe)-1)})(u,m,d.stops[C][0],d.stops[C+1][0]),R=d.stops[C][1],B=d.stops[C+1][1],$=ba[l.type]||fu;return typeof R.evaluate=="function"?{evaluate(...q){const te=R.evaluate.apply(void 0,q),oe=B.evaluate.apply(void 0,q);if(te!==void 0&&oe!==void 0)return $(te,oe,A,d.colorSpace)}}:$(R,B,A,d.colorSpace)}function Md(d,l,u){switch(l.type){case"color":u=yn.parse(u);break;case"formatted":u=ta.fromString(u.toString());break;case"resolvedImage":u=we.fromString(u.toString());break;case"padding":u=tr.parse(u);break;case"colorArray":u=_i.parse(u);break;case"numberArray":u=ea.parse(u);break;default:Qn(u)===l.type||l.type==="enum"&&l.values[u]||(u=void 0)}return Hl(u,d.default,l.default)}Xt.register(bt,{error:[{kind:"error"},[Gt],(d,[l])=>{throw new Fa(l.evaluate(d))}],typeof:[Gt,[Ei],(d,[l])=>nn(Ct(l.evaluate(d)))],"to-rgba":[Ma(gt,4),[ki],(d,[l])=>{const[u,m,b,C]=l.evaluate(d).rgb;return[255*u,255*m,255*b,C]}],rgb:[ki,[gt,gt,gt],pi],rgba:[ki,[gt,gt,gt,gt],pi],has:{type:ei,overloads:[[[Gt],(d,[l])=>hn(l.evaluate(d),d.properties())],[[Gt,$i],(d,[l,u])=>hn(l.evaluate(d),u.evaluate(d))]]},get:{type:Ei,overloads:[[[Gt],(d,[l])=>Wn(l.evaluate(d),d.properties())],[[Gt,$i],(d,[l,u])=>Wn(l.evaluate(d),u.evaluate(d))]]},"feature-state":[Ei,[Gt],(d,[l])=>Wn(l.evaluate(d),d.featureState||{})],properties:[$i,[],d=>d.properties()],"geometry-type":[Gt,[],d=>d.geometryType()],id:[Ei,[],d=>d.id()],zoom:[gt,[],d=>d.globals.zoom],"heatmap-density":[gt,[],d=>d.globals.heatmapDensity||0],elevation:[gt,[],d=>d.globals.elevation||0],"line-progress":[gt,[],d=>d.globals.lineProgress||0],accumulated:[Ei,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[gt,wa(gt),(d,l)=>{let u=0;for(const m of l)u+=m.evaluate(d);return u}],"*":[gt,wa(gt),(d,l)=>{let u=1;for(const m of l)u*=m.evaluate(d);return u}],"-":{type:gt,overloads:[[[gt,gt],(d,[l,u])=>l.evaluate(d)-u.evaluate(d)],[[gt],(d,[l])=>-l.evaluate(d)]]},"/":[gt,[gt,gt],(d,[l,u])=>l.evaluate(d)/u.evaluate(d)],"%":[gt,[gt,gt],(d,[l,u])=>l.evaluate(d)%u.evaluate(d)],ln2:[gt,[],()=>Math.LN2],pi:[gt,[],()=>Math.PI],e:[gt,[],()=>Math.E],"^":[gt,[gt,gt],(d,[l,u])=>Math.pow(l.evaluate(d),u.evaluate(d))],sqrt:[gt,[gt],(d,[l])=>Math.sqrt(l.evaluate(d))],log10:[gt,[gt],(d,[l])=>Math.log(l.evaluate(d))/Math.LN10],ln:[gt,[gt],(d,[l])=>Math.log(l.evaluate(d))],log2:[gt,[gt],(d,[l])=>Math.log(l.evaluate(d))/Math.LN2],sin:[gt,[gt],(d,[l])=>Math.sin(l.evaluate(d))],cos:[gt,[gt],(d,[l])=>Math.cos(l.evaluate(d))],tan:[gt,[gt],(d,[l])=>Math.tan(l.evaluate(d))],asin:[gt,[gt],(d,[l])=>Math.asin(l.evaluate(d))],acos:[gt,[gt],(d,[l])=>Math.acos(l.evaluate(d))],atan:[gt,[gt],(d,[l])=>Math.atan(l.evaluate(d))],min:[gt,wa(gt),(d,l)=>Math.min(...l.map((u=>u.evaluate(d))))],max:[gt,wa(gt),(d,l)=>Math.max(...l.map((u=>u.evaluate(d))))],abs:[gt,[gt],(d,[l])=>Math.abs(l.evaluate(d))],round:[gt,[gt],(d,[l])=>{const u=l.evaluate(d);return u<0?-Math.round(-u):Math.round(u)}],floor:[gt,[gt],(d,[l])=>Math.floor(l.evaluate(d))],ceil:[gt,[gt],(d,[l])=>Math.ceil(l.evaluate(d))],"filter-==":[ei,[Gt,Ei],(d,[l,u])=>d.properties()[l.value]===u.value],"filter-id-==":[ei,[Ei],(d,[l])=>d.id()===l.value],"filter-type-==":[ei,[Gt],(d,[l])=>d.geometryType()===l.value],"filter-<":[ei,[Gt,Ei],(d,[l,u])=>{const m=d.properties()[l.value],b=u.value;return typeof m==typeof b&&m<b}],"filter-id-<":[ei,[Ei],(d,[l])=>{const u=d.id(),m=l.value;return typeof u==typeof m&&u<m}],"filter->":[ei,[Gt,Ei],(d,[l,u])=>{const m=d.properties()[l.value],b=u.value;return typeof m==typeof b&&m>b}],"filter-id->":[ei,[Ei],(d,[l])=>{const u=d.id(),m=l.value;return typeof u==typeof m&&u>m}],"filter-<=":[ei,[Gt,Ei],(d,[l,u])=>{const m=d.properties()[l.value],b=u.value;return typeof m==typeof b&&m<=b}],"filter-id-<=":[ei,[Ei],(d,[l])=>{const u=d.id(),m=l.value;return typeof u==typeof m&&u<=m}],"filter->=":[ei,[Gt,Ei],(d,[l,u])=>{const m=d.properties()[l.value],b=u.value;return typeof m==typeof b&&m>=b}],"filter-id->=":[ei,[Ei],(d,[l])=>{const u=d.id(),m=l.value;return typeof u==typeof m&&u>=m}],"filter-has":[ei,[Ei],(d,[l])=>l.value in d.properties()],"filter-has-id":[ei,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[ei,[Ma(Gt)],(d,[l])=>l.value.indexOf(d.geometryType())>=0],"filter-id-in":[ei,[Ma(Ei)],(d,[l])=>l.value.indexOf(d.id())>=0],"filter-in-small":[ei,[Gt,Ma(Ei)],(d,[l,u])=>u.value.indexOf(d.properties()[l.value])>=0],"filter-in-large":[ei,[Gt,Ma(Ei)],(d,[l,u])=>(function(m,b,C,A){for(;C<=A;){const R=C+A>>1;if(b[R]===m)return!0;b[R]>m?A=R-1:C=R+1}return!1})(d.properties()[l.value],u.value,0,u.value.length-1)],all:{type:ei,overloads:[[[ei,ei],(d,[l,u])=>l.evaluate(d)&&u.evaluate(d)],[wa(ei),(d,l)=>{for(const u of l)if(!u.evaluate(d))return!1;return!0}]]},any:{type:ei,overloads:[[[ei,ei],(d,[l,u])=>l.evaluate(d)||u.evaluate(d)],[wa(ei),(d,l)=>{for(const u of l)if(u.evaluate(d))return!0;return!1}]]},"!":[ei,[ei],(d,[l])=>!l.evaluate(d)],"is-supported-script":[ei,[Gt],(d,[l])=>{const u=d.globals&&d.globals.isSupportedScript;return!u||u(l.evaluate(d))}],upcase:[Gt,[Gt],(d,[l])=>l.evaluate(d).toUpperCase()],downcase:[Gt,[Gt],(d,[l])=>l.evaluate(d).toLowerCase()],concat:[Gt,wa(Ei),(d,l)=>l.map((u=>Ht(u.evaluate(d)))).join("")],"resolved-locale":[Gt,[Vi],(d,[l])=>l.evaluate(d).resolvedLocale()]});class Zu{constructor(l,u,m){this.expression=l,this._warningHistory={},this._evaluator=new fa,this._defaultValue=u?(function(b){if(b.type==="color"&&To(b.default))return new yn(0,0,0,0);switch(b.type){case"color":return yn.parse(b.default)||null;case"padding":return tr.parse(b.default)||null;case"numberArray":return ea.parse(b.default)||null;case"colorArray":return _i.parse(b.default)||null;case"variableAnchorOffsetCollection":return pe.parse(b.default)||null;case"projectionDefinition":return Me.parse(b.default)||null;default:return b.default===void 0?null:b.default}})(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this._globalState=m}evaluateWithoutErrorHandling(l,u,m,b,C,A){return this._globalState&&(l=Qo(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=u,this._evaluator.featureState=m,this._evaluator.canonical=b,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A,this.expression.evaluate(this._evaluator)}evaluate(l,u,m,b,C,A){this._globalState&&(l=Qo(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=u||null,this._evaluator.featureState=m||null,this._evaluator.canonical=b,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new Fa(`Expected value to be one of ${Object.keys(this._enumValues).map((B=>JSON.stringify(B))).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}}}function Ul(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in bt}function Vc(d,l,u){const m=new aa(bt,$r,[],l?(function(C){const A={color:ki,string:Gt,number:gt,enum:Gt,boolean:ei,formatted:Yi,padding:on,numberArray:vn,colorArray:ca,projectionDefinition:gn,resolvedImage:$n,variableAnchorOffsetCollection:Zt};return C.type==="array"?Ma(A[C.value]||Ei,C.length):A[C.type]})(l):void 0),b=m.parse(d,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return b?Ln(new Zu(b,l,u)):ra(m.errors)}class mu{constructor(l,u,m){this.kind=l,this._styleExpression=u,this.isStateDependent=l!=="constant"&&!Jr(u.expression),this.globalStateRefs=vl(u.expression),this._globalState=m}evaluateWithoutErrorHandling(l,u,m,b,C,A){return this._globalState&&(l=Qo(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,u,m,b,C,A)}evaluate(l,u,m,b,C,A){return this._globalState&&(l=Qo(l,this._globalState)),this._styleExpression.evaluate(l,u,m,b,C,A)}}class yc{constructor(l,u,m,b,C){this.kind=l,this.zoomStops=m,this._styleExpression=u,this.isStateDependent=l!=="camera"&&!Jr(u.expression),this.globalStateRefs=vl(u.expression),this.interpolationType=b,this._globalState=C}evaluateWithoutErrorHandling(l,u,m,b,C,A){return this._globalState&&(l=Qo(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,u,m,b,C,A)}evaluate(l,u,m,b,C,A){return this._globalState&&(l=Qo(l,this._globalState)),this._styleExpression.evaluate(l,u,m,b,C,A)}interpolationFactor(l,u,m){return this.interpolationType?ir.interpolationFactor(this.interpolationType,l,u,m):0}}function yu(d,l,u){const m=Vc(d,l,u);if(m.result==="error")return m;const b=m.value.expression,C=wr(b);if(!C&&!ua(l))return ra([new ct("","data expressions not supported")]);const A=Sa(b,["zoom"]);if(!A&&!Na(l))return ra([new ct("","zoom expressions not supported")]);const R=_u(b);return R||A?R instanceof ct?ra([R]):R instanceof ir&&!ms(l)?ra([new ct("",'"interpolate" expressions cannot be used with this property')]):Ln(R?new yc(C?"camera":"composite",m.value,R.labels,R instanceof ir?R.interpolation:void 0,u):new mu(C?"constant":"source",m.value,u)):ra([new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Hc{constructor(l,u){this._parameters=l,this._specification=u,xt(this,pu(this._parameters,this._specification))}static deserialize(l){return new Hc(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function _u(d){let l=null;if(d instanceof zn)l=_u(d.result);else if(d instanceof Ka){for(const u of d.args)if(l=_u(u),l)break}else(d instanceof Wt||d instanceof ir)&&d.input instanceof Xt&&d.input.name==="zoom"&&(l=d);return l instanceof ct||d.eachChild((u=>{const m=_u(u);m instanceof ct?l=m:!l&&m?l=new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&m&&l!==m&&(l=new ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function vl(d,l=new Set){return d instanceof ut&&l.add(d.key),d.eachChild((u=>{vl(u,l)})),l}function Qo(d,l){const{zoom:u,heatmapDensity:m,elevation:b,lineProgress:C,isSupportedScript:A,accumulated:R}=d??{};return{zoom:u,heatmapDensity:m,elevation:b,lineProgress:C,isSupportedScript:A,accumulated:R,globalState:l}}function Uc(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const l of d.slice(1))if(!Uc(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const Ku={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function bl(d,l){if(d==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Uc(d)||(d=wl(d));const u=Vc(d,Ku,l);if(u.result==="error")throw new Error(u.value.map((m=>`${m.key}: ${m.message}`)).join(", "));return{filter:(m,b,C)=>u.value.evaluate(m,b,{},C),needGeometry:$c(d),getGlobalStateRefs:()=>vl(u.value.expression)}}function xu(d,l){return d<l?-1:d>l?1:0}function $c(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let l=1;l<d.length;l++)if($c(d[l]))return!0;return!1}function wl(d){if(!d)return!0;const l=d[0];return d.length<=1?l!=="any":l==="=="?Gc(d[1],d[2],"=="):l==="!="?_c(Gc(d[1],d[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Gc(d[1],d[2],l):l==="any"?(u=d.slice(1),["any"].concat(u.map(wl))):l==="all"?["all"].concat(d.slice(1).map(wl)):l==="none"?["all"].concat(d.slice(1).map(wl).map(_c)):l==="in"?Ju(d[1],d.slice(2)):l==="!in"?_c(Ju(d[1],d.slice(2))):l==="has"?Qu(d[1]):l!=="!has"||_c(Qu(d[1]));var u}function Gc(d,l,u){switch(d){case"$type":return[`filter-type-${u}`,l];case"$id":return[`filter-id-${u}`,l];default:return[`filter-${u}`,d,l]}}function Ju(d,l){if(l.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((u=>typeof u!=typeof l[0]))?["filter-in-large",d,["literal",l.sort(xu)]]:["filter-in-small",d,["literal",l]]}}function Qu(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function _c(d){return["!",d]}function ho(d){const l=typeof d;if(l==="number"||l==="boolean"||l==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let b="[";for(const C of d)b+=`${ho(C)},`;return`${b}]`}const u=Object.keys(d).sort();let m="{";for(let b=0;b<u.length;b++)m+=`${JSON.stringify(u[b])}:${ho(d[u[b]])},`;return`${m}}`}function xc(d){let l="";for(const u of Dn)l+=`/${ho(d[u])}`;return l}function Bo(d){const l=d.value;return l?[new Oe(d.key,l,"constants have been deprecated as of v8")]:[]}function dr(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function el(d){if(Array.isArray(d))return d.map(el);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const l={};for(const u in d)l[u]=el(d[u]);return l}return dr(d)}function ys(d){const l=d.key,u=d.value,m=d.valueSpec||{},b=d.objectElementValidators||{},C=d.style,A=d.styleSpec,R=d.validateSpec;let B=[];const $=Qn(u);if($!=="object")return[new Oe(l,u,`object expected, ${$} found`)];for(const q in u){const te=q.split(".")[0],oe=Er(m,te)||m["*"];let ce;if(Er(b,te))ce=b[te];else if(Er(m,te)){if(u[q]===void 0)continue;ce=R}else if(b["*"])ce=b["*"];else{if(!m["*"]){B.push(new Oe(l,u[q],`unknown property "${q}"`));continue}ce=R}B=B.concat(ce({key:(l&&`${l}.`)+q,value:u[q],valueSpec:oe,style:C,styleSpec:A,object:u,objectKey:q,validateSpec:R},u))}for(const q in m)b[q]||m[q].required&&m[q].default===void 0&&u[q]===void 0&&B.push(new Oe(l,u,`missing required property "${q}"`));return B}function vu(d){const l=d.value,u=d.valueSpec,m=d.style,b=d.styleSpec,C=d.key,A=d.arrayElementValidator||d.validateSpec;if(Qn(l)!=="array")return[new Oe(C,l,`array expected, ${Qn(l)} found`)];if(u.length&&l.length!==u.length)return[new Oe(C,l,`array length ${u.length} expected, length ${l.length} found`)];let R={type:u.value,values:u.values};b.$version<7&&(R.function=u.function),Qn(u.value)==="object"&&(R=u.value);let B=[];for(let $=0;$<l.length;$++)B=B.concat(A({array:l,arrayIndex:$,value:l[$],valueSpec:R,validateSpec:d.validateSpec,style:m,styleSpec:b,key:`${C}[${$}]`}));return B}function fo(d){const l=d.key,u=d.value,m=d.valueSpec;let b=Qn(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new Oe(l,u,`number expected, ${b} found`)]:"minimum"in m&&u<m.minimum?[new Oe(l,u,`${u} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&u>m.maximum?[new Oe(l,u,`${u} is greater than the maximum value ${m.maximum}`)]:[]}function $l(d){const l=d.valueSpec,u=dr(d.value.type);let m,b,C,A={};const R=u!=="categorical"&&d.value.property===void 0,B=!R,$=Qn(d.value.stops)==="array"&&Qn(d.value.stops[0])==="array"&&Qn(d.value.stops[0][0])==="object",q=ys({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(ce){if(u==="identity")return[new Oe(ce.key,ce.value,'identity function may not have a "stops" property')];let fe=[];const ge=ce.value;return fe=fe.concat(vu({key:ce.key,value:ge,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:te})),Qn(ge)==="array"&&ge.length===0&&fe.push(new Oe(ce.key,ge,"array must have at least one stop")),fe},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:l,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return u==="identity"&&R&&q.push(new Oe(d.key,d.value,'missing required property "property"')),u==="identity"||d.value.stops||q.push(new Oe(d.key,d.value,'missing required property "stops"')),u==="exponential"&&d.valueSpec.expression&&!ms(d.valueSpec)&&q.push(new Oe(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(B&&!ua(d.valueSpec)?q.push(new Oe(d.key,d.value,"property functions not supported")):R&&!Na(d.valueSpec)&&q.push(new Oe(d.key,d.value,"zoom functions not supported"))),u!=="categorical"&&!$||d.value.property!==void 0||q.push(new Oe(d.key,d.value,'"property" property is required')),q;function te(ce){let fe=[];const ge=ce.value,ve=ce.key;if(Qn(ge)!=="array")return[new Oe(ve,ge,`array expected, ${Qn(ge)} found`)];if(ge.length!==2)return[new Oe(ve,ge,`array length 2 expected, length ${ge.length} found`)];if($){if(Qn(ge[0])!=="object")return[new Oe(ve,ge,`object expected, ${Qn(ge[0])} found`)];if(ge[0].zoom===void 0)return[new Oe(ve,ge,"object stop key must have zoom")];if(ge[0].value===void 0)return[new Oe(ve,ge,"object stop key must have value")];if(C&&C>dr(ge[0].zoom))return[new Oe(ve,ge[0].zoom,"stop zoom values must appear in ascending order")];dr(ge[0].zoom)!==C&&(C=dr(ge[0].zoom),b=void 0,A={}),fe=fe.concat(ys({key:`${ve}[0]`,value:ge[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:fo,value:oe}}))}else fe=fe.concat(oe({key:`${ve}[0]`,value:ge[0],validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},ge));return Ul(el(ge[1]))?fe.concat([new Oe(`${ve}[1]`,ge[1],"expressions are not allowed in function stops.")]):fe.concat(ce.validateSpec({key:`${ve}[1]`,value:ge[1],valueSpec:l,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function oe(ce,fe){const ge=Qn(ce.value),ve=dr(ce.value),Ie=ce.value!==null?ce.value:fe;if(m){if(ge!==m)return[new Oe(ce.key,Ie,`${ge} stop domain type must match previous stop domain type ${m}`)]}else m=ge;if(ge!=="number"&&ge!=="string"&&ge!=="boolean")return[new Oe(ce.key,Ie,"stop domain value must be a number, string, or boolean")];if(ge!=="number"&&u!=="categorical"){let Qe=`number expected, ${ge} found`;return ua(l)&&u===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Oe(ce.key,Ie,Qe)]}return u!=="categorical"||ge!=="number"||isFinite(ve)&&Math.floor(ve)===ve?u!=="categorical"&&ge==="number"&&b!==void 0&&ve<b?[new Oe(ce.key,Ie,"stop domain values must appear in ascending order")]:(b=ve,u==="categorical"&&ve in A?[new Oe(ce.key,Ie,"stop domain values must be unique")]:(A[ve]=!0,[])):[new Oe(ce.key,Ie,`integer expected, found ${ve}`)]}}function tl(d){const l=(d.expressionContext==="property"?yu:Vc)(el(d.value),d.valueSpec);if(l.result==="error")return l.value.map((m=>new Oe(`${d.key}${m.key}`,d.value,m.message)));const u=l.value.expression||l.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!u.outputDefined())return[new Oe(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!Jr(u))return[new Oe(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!Jr(u))return[new Oe(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Sa(u,["zoom","feature-state"]))return[new Oe(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!wr(u))return[new Oe(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function il(d){const l=d.key,u=d.value,m=Qn(u);return m!=="string"?[new Oe(l,u,`color expected, ${m} found`)]:yn.parse(String(u))?[]:[new Oe(l,u,`color expected, "${u}" found`)]}function Gl(d){const l=d.key,u=d.value,m=d.valueSpec,b=[];return Array.isArray(m.values)?m.values.indexOf(dr(u))===-1&&b.push(new Oe(l,u,`expected one of [${m.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(m.values).indexOf(dr(u))===-1&&b.push(new Oe(l,u,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(u)} found`)),b}function Wl(d){return Uc(el(d.value))?tl(xt({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):eh(d)}function eh(d){const l=d.value,u=d.key;if(Qn(l)!=="array")return[new Oe(u,l,`array expected, ${Qn(l)} found`)];const m=d.styleSpec;let b,C=[];if(l.length<1)return[new Oe(u,l,"filter array must have at least 1 element")];switch(C=C.concat(Gl({key:`${u}[0]`,value:l[0],valueSpec:m.filter_operator,style:d.style,styleSpec:d.styleSpec})),dr(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&dr(l[1])==="$type"&&C.push(new Oe(u,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&C.push(new Oe(u,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(b=Qn(l[1]),b!=="string"&&C.push(new Oe(`${u}[1]`,l[1],`string expected, ${b} found`)));for(let A=2;A<l.length;A++)b=Qn(l[A]),dr(l[1])==="$type"?C=C.concat(Gl({key:`${u}[${A}]`,value:l[A],valueSpec:m.geometry_type,style:d.style,styleSpec:d.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&C.push(new Oe(`${u}[${A}]`,l[A],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let A=1;A<l.length;A++)C=C.concat(eh({key:`${u}[${A}]`,value:l[A],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":b=Qn(l[1]),l.length!==2?C.push(new Oe(u,l,`filter array for "${l[0]}" operator must have 2 elements`)):b!=="string"&&C.push(new Oe(`${u}[1]`,l[1],`string expected, ${b} found`))}return C}function th(d,l){const u=d.key,m=d.validateSpec,b=d.style,C=d.styleSpec,A=d.value,R=d.objectKey,B=C[`${l}_${d.layerType}`];if(!B)return[];const $=R.match(/^(.*)-transition$/);if(l==="paint"&&$&&B[$[1]]&&B[$[1]].transition)return m({key:u,value:A,valueSpec:C.transition,style:b,styleSpec:C});const q=d.valueSpec||B[R];if(!q)return[new Oe(u,A,`unknown property "${R}"`)];let te;if(Qn(A)==="string"&&ua(q)&&!q.tokens&&(te=/^{([^}]+)}$/.exec(A)))return[new Oe(u,A,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(te[1])} }\`.`)];const oe=[];return d.layerType==="symbol"&&R==="text-font"&&To(el(A))&&dr(A.type)==="identity"&&oe.push(new Oe(u,A,'"text-font" does not support identity functions')),oe.concat(m({key:d.key,value:A,valueSpec:q,style:b,styleSpec:C,expressionContext:"property",propertyType:l,propertyKey:R}))}function vc(d){return th(d,"paint")}function ih(d){return th(d,"layout")}function nh(d){let l=[];const u=d.value,m=d.key,b=d.style,C=d.styleSpec;if(Qn(u)!=="object")return[new Oe(m,u,`object expected, ${Qn(u)} found`)];u.type||u.ref||l.push(new Oe(m,u,'either "type" or "ref" is required'));let A=dr(u.type);const R=dr(u.ref);if(u.id){const B=dr(u.id);for(let $=0;$<d.arrayIndex;$++){const q=b.layers[$];dr(q.id)===B&&l.push(new Oe(m,u.id,`duplicate layer id "${u.id}", previously used at line ${q.id.__line__}`))}}if("ref"in u){let B;["type","source","source-layer","filter","layout"].forEach(($=>{$ in u&&l.push(new Oe(m,u[$],`"${$}" is prohibited for ref layers`))})),b.layers.forEach(($=>{dr($.id)===R&&(B=$)})),B?B.ref?l.push(new Oe(m,u.ref,"ref cannot reference another ref layer")):A=dr(B.type):l.push(new Oe(m,u.ref,`ref layer "${R}" not found`))}else if(A!=="background")if(u.source){const B=b.sources&&b.sources[u.source],$=B&&dr(B.type);B?$==="vector"&&A==="raster"?l.push(new Oe(m,u.source,`layer "${u.id}" requires a raster source`)):$!=="raster-dem"&&A==="hillshade"||$!=="raster-dem"&&A==="color-relief"?l.push(new Oe(m,u.source,`layer "${u.id}" requires a raster-dem source`)):$==="raster"&&A!=="raster"?l.push(new Oe(m,u.source,`layer "${u.id}" requires a vector source`)):$!=="vector"||u["source-layer"]?$==="raster-dem"&&A!=="hillshade"&&A!=="color-relief"?l.push(new Oe(m,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):A!=="line"||!u.paint||!u.paint["line-gradient"]||$==="geojson"&&B.lineMetrics||l.push(new Oe(m,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Oe(m,u,`layer "${u.id}" must specify a "source-layer"`)):l.push(new Oe(m,u.source,`source "${u.source}" not found`))}else l.push(new Oe(m,u,'missing required property "source"'));return l=l.concat(ys({key:m,value:u,valueSpec:C.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${m}.type`,value:u.type,valueSpec:C.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:u,objectKey:"type"}),filter:Wl,layout:B=>ys({layer:u,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":$=>ih(xt({layerType:A},$))}}),paint:B=>ys({layer:u,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":$=>vc(xt({layerType:A},$))}})}})),l}function Sl(d){const l=d.value,u=d.key,m=Qn(l);return m!=="string"?[new Oe(u,l,`string expected, ${m} found`)]:[]}const bu={promoteId:function({key:d,value:l}){if(Qn(l)==="string")return Sl({key:d,value:l});{const u=[];for(const m in l)u.push(...Sl({key:`${d}.${m}`,value:l[m]}));return u}}};function Xl(d){const l=d.value,u=d.key,m=d.styleSpec,b=d.style,C=d.validateSpec;if(!l.type)return[new Oe(u,l,'"type" is required')];const A=dr(l.type);let R;switch(A){case"vector":case"raster":return R=ys({key:u,value:l,valueSpec:m[`source_${A.replace("-","_")}`],style:d.style,styleSpec:m,objectElementValidators:bu,validateSpec:C}),R;case"raster-dem":return R=(function(B){var $;const q=($=B.sourceName)!==null&&$!==void 0?$:"",te=B.value,oe=B.styleSpec,ce=oe.source_raster_dem,fe=B.style;let ge=[];const ve=Qn(te);if(te===void 0)return ge;if(ve!=="object")return ge.push(new Oe("source_raster_dem",te,`object expected, ${ve} found`)),ge;const Ie=dr(te.encoding)==="custom",Qe=["redFactor","greenFactor","blueFactor","baseShift"],De=B.value.encoding?`"${B.value.encoding}"`:"Default";for(const ze in te)!Ie&&Qe.includes(ze)?ge.push(new Oe(ze,te[ze],`In "${q}": "${ze}" is only valid when "encoding" is set to "custom". ${De} encoding found`)):ce[ze]?ge=ge.concat(B.validateSpec({key:ze,value:te[ze],valueSpec:ce[ze],validateSpec:B.validateSpec,style:fe,styleSpec:oe})):ge.push(new Oe(ze,te[ze],`unknown property "${ze}"`));return ge})({sourceName:u,value:l,style:d.style,styleSpec:m,validateSpec:C}),R;case"geojson":if(R=ys({key:u,value:l,valueSpec:m.source_geojson,style:b,styleSpec:m,validateSpec:C,objectElementValidators:bu}),l.cluster)for(const B in l.clusterProperties){const[$,q]=l.clusterProperties[B],te=typeof $=="string"?[$,["accumulated"],["get",B]]:$;R.push(...tl({key:`${u}.${B}.map`,value:q,expressionContext:"cluster-map"})),R.push(...tl({key:`${u}.${B}.reduce`,value:te,expressionContext:"cluster-reduce"}))}return R;case"video":return ys({key:u,value:l,valueSpec:m.source_video,style:b,validateSpec:C,styleSpec:m});case"image":return ys({key:u,value:l,valueSpec:m.source_image,style:b,validateSpec:C,styleSpec:m});case"canvas":return[new Oe(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gl({key:`${u}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Wc(d){const l=d.value,u=d.styleSpec,m=u.light,b=d.style;let C=[];const A=Qn(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new Oe("light",l,`object expected, ${A} found`)]),C;for(const R in l){const B=R.match(/^(.*)-transition$/);C=C.concat(B&&m[B[1]]&&m[B[1]].transition?d.validateSpec({key:R,value:l[R],valueSpec:u.transition,validateSpec:d.validateSpec,style:b,styleSpec:u}):m[R]?d.validateSpec({key:R,value:l[R],valueSpec:m[R],validateSpec:d.validateSpec,style:b,styleSpec:u}):[new Oe(R,l[R],`unknown property "${R}"`)])}return C}function wu(d){const l=d.value,u=d.styleSpec,m=u.sky,b=d.style,C=Qn(l);if(l===void 0)return[];if(C!=="object")return[new Oe("sky",l,`object expected, ${C} found`)];let A=[];for(const R in l)A=A.concat(m[R]?d.validateSpec({key:R,value:l[R],valueSpec:m[R],style:b,styleSpec:u}):[new Oe(R,l[R],`unknown property "${R}"`)]);return A}function ah(d){const l=d.value,u=d.styleSpec,m=u.terrain,b=d.style;let C=[];const A=Qn(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new Oe("terrain",l,`object expected, ${A} found`)]),C;for(const R in l)C=C.concat(m[R]?d.validateSpec({key:R,value:l[R],valueSpec:m[R],validateSpec:d.validateSpec,style:b,styleSpec:u}):[new Oe(R,l[R],`unknown property "${R}"`)]);return C}function bc(d){let l=[];const u=d.value,m=d.key;if(Array.isArray(u)){const b=[],C=[];for(const A in u)u[A].id&&b.includes(u[A].id)&&l.push(new Oe(m,u,`all the sprites' ids must be unique, but ${u[A].id} is duplicated`)),b.push(u[A].id),u[A].url&&C.includes(u[A].url)&&l.push(new Oe(m,u,`all the sprites' URLs must be unique, but ${u[A].url} is duplicated`)),C.push(u[A].url),l=l.concat(ys({key:`${m}[${A}]`,value:u[A],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return l}return Sl({key:m,value:u})}function Xc(d){return!!d&&d.constructor===Object}function wc(d){return Xc(d.value)?[]:[new Oe(d.key,d.value,`object expected, ${Qn(d.value)} found`)]}const Su={"*":()=>[],array:vu,boolean:function(d){const l=d.value,u=d.key,m=Qn(l);return m!=="boolean"?[new Oe(u,l,`boolean expected, ${m} found`)]:[]},number:fo,color:il,constants:Bo,enum:Gl,filter:Wl,function:$l,layer:nh,object:ys,source:Xl,light:Wc,sky:wu,terrain:ah,projection:function(d){const l=d.value,u=d.styleSpec,m=u.projection,b=d.style,C=Qn(l);if(l===void 0)return[];if(C!=="object")return[new Oe("projection",l,`object expected, ${C} found`)];let A=[];for(const R in l)A=A.concat(m[R]?d.validateSpec({key:R,value:l[R],valueSpec:m[R],style:b,styleSpec:u}):[new Oe(R,l[R],`unknown property "${R}"`)]);return A},projectionDefinition:function(d){const l=d.key;let u=d.value;u=u instanceof String?u.valueOf():u;const m=Qn(u);return m!=="array"||(function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"})(u)||(function(b){return!!["interpolate","step","literal"].includes(b[0])})(u)?["array","string"].includes(m)?[]:[new Oe(l,u,`projection expected, invalid type "${m}" found`)]:[new Oe(l,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:Sl,formatted:function(d){return Sl(d).length===0?[]:tl(d)},resolvedImage:function(d){return Sl(d).length===0?[]:tl(d)},padding:function(d){const l=d.key,u=d.value;if(Qn(u)==="array"){if(u.length<1||u.length>4)return[new Oe(l,u,`padding requires 1 to 4 values; ${u.length} values found`)];const m={type:"number"};let b=[];for(let C=0;C<u.length;C++)b=b.concat(d.validateSpec({key:`${l}[${C}]`,value:u[C],validateSpec:d.validateSpec,valueSpec:m}));return b}return fo({key:l,value:u,valueSpec:{}})},numberArray:function(d){const l=d.key,u=d.value;if(Qn(u)==="array"){const m={type:"number"};if(u.length<1)return[new Oe(l,u,"array length at least 1 expected, length 0 found")];let b=[];for(let C=0;C<u.length;C++)b=b.concat(d.validateSpec({key:`${l}[${C}]`,value:u[C],validateSpec:d.validateSpec,valueSpec:m}));return b}return fo({key:l,value:u,valueSpec:{}})},colorArray:function(d){const l=d.key,u=d.value;if(Qn(u)==="array"){if(u.length<1)return[new Oe(l,u,"array length at least 1 expected, length 0 found")];let m=[];for(let b=0;b<u.length;b++)m=m.concat(il({key:`${l}[${b}]`,value:u[b]}));return m}return il({key:l,value:u})},variableAnchorOffsetCollection:function(d){const l=d.key,u=d.value,m=Qn(u),b=d.styleSpec;if(m!=="array"||u.length<1||u.length%2!=0)return[new Oe(l,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let A=0;A<u.length;A+=2)C=C.concat(Gl({key:`${l}[${A}]`,value:u[A],valueSpec:b.layout_symbol["text-anchor"]})),C=C.concat(vu({key:`${l}[${A+1}]`,value:u[A+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:b}));return C},sprite:bc,state:wc,fontFaces:function(d){const l=d.key,u=d.value,m=d.validateSpec,b=d.styleSpec,C=d.style;if(!Xc(u))return[new Oe(l,u,`object expected, ${Qn(u)} found`)];const A=[];for(const R in u){const B=u[R],$=Qn(B);if($==="string")A.push(...Sl({key:`${l}.${R}`,value:B}));else if($==="array"){const q={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[te,oe]of B.entries())A.push(...ys({key:`${l}.${R}[${te}]`,value:oe,valueSpec:q,styleSpec:b,style:C,validateSpec:m}))}else A.push(new Oe(`${l}.${R}`,B,`string or array expected, ${$} found`))}return A}};function Bt(d){const l=d.value,u=d.valueSpec,m=d.styleSpec;return d.validateSpec=Bt,u.expression&&To(dr(l))?$l(d):u.expression&&Ul(el(l))?tl(d):u.type&&Su[u.type]?Su[u.type](d):ys(xt({},d,{valueSpec:u.type?m[u.type]:u}))}function Ki(d){const l=d.value,u=d.key,m=Sl(d);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new Oe(u,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&m.push(new Oe(u,l,'"glyphs" url must include a "{range}" token'))),m}function en(d,l=Mt){let u=[];return u=u.concat(Bt({key:"",value:d,valueSpec:l.$root,styleSpec:l,style:d,validateSpec:Bt,objectElementValidators:{glyphs:Ki,"*":()=>[]}})),d.constants&&(u=u.concat(Bo({key:"constants",value:d.constants}))),Ba(u)}function Cn(d){return function(l){return d(Object.assign({},l,{validateSpec:Bt}))}}function Ba(d){return[].concat(d).sort(((l,u)=>l.line-u.line))}function Ia(d){return function(...l){return Ba(d.apply(this,l))}}en.source=Ia(Cn(Xl)),en.sprite=Ia(Cn(bc)),en.glyphs=Ia(Cn(Ki)),en.light=Ia(Cn(Wc)),en.sky=Ia(Cn(wu)),en.terrain=Ia(Cn(ah)),en.state=Ia(Cn(wc)),en.layer=Ia(Cn(nh)),en.filter=Ia(Cn(Wl)),en.paintProperty=Ia(Cn(vc)),en.layoutProperty=Ia(Cn(ih));const Ns={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class Qr{constructor(l,u){this._globalState=u,this.setValue(l)}evaluate(){var l;return(l=this._literalValue)!==null&&l!==void 0?l:this._compiledValue.evaluate({})}setValue(l){if(l==null||l==="visible"||l==="none")return this._literalValue=l==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const u=Vc(l,Ns,this._globalState);if(u.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(u.value.map((m=>`${m.key}: ${m.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=u.value,this._globalStateRefs=vl(u.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Pr=Mt,Gr=en,kl=Gr.light,rh=Gr.sky,ku=Gr.paintProperty,Id=Gr.layoutProperty;function Cu(d,l){let u=!1;if(l&&l.length)for(const m of l)d.fire(new Ai(new Error(m.message))),u=!0;return u}class Au{constructor(l,u,m){const b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const A=new Int32Array(this.arrayBuffer);l=A[0],this.d=(u=A[1])+2*(m=A[2]);for(let B=0;B<this.d*this.d;B++){const $=A[3+B],q=A[3+B+1];b.push($===q?null:A.subarray($,q))}const R=A[3+b.length+1];this.keys=A.subarray(A[3+b.length],R),this.bboxes=A.subarray(R),this.insert=this._insertReadonly}else{this.d=u+2*m;for(let A=0;A<this.d*this.d;A++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=l,this.padding=m,this.scale=u/l,this.uid=0;const C=m/u*l;this.min=-C,this.max=l+C}insert(l,u,m,b,C){this._forEachCell(u,m,b,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,u,m,b,C,A){this.cells[C].push(A)}query(l,u,m,b,C){const A=this.min,R=this.max;if(l<=A&&u<=A&&R<=m&&R<=b&&!C)return Array.prototype.slice.call(this.keys);{const B=[];return this._forEachCell(l,u,m,b,this._queryCell,B,{},C),B}}_queryCell(l,u,m,b,C,A,R,B){const $=this.cells[C];if($!==null){const q=this.keys,te=this.bboxes;for(let oe=0;oe<$.length;oe++){const ce=$[oe];if(R[ce]===void 0){const fe=4*ce;(B?B(te[fe+0],te[fe+1],te[fe+2],te[fe+3]):l<=te[fe+2]&&u<=te[fe+3]&&m>=te[fe+0]&&b>=te[fe+1])?(R[ce]=!0,A.push(q[ce])):R[ce]=!1}}}}_forEachCell(l,u,m,b,C,A,R,B){const $=this._convertToCellCoord(l),q=this._convertToCellCoord(u),te=this._convertToCellCoord(m),oe=this._convertToCellCoord(b);for(let ce=$;ce<=te;ce++)for(let fe=q;fe<=oe;fe++){const ge=this.d*fe+ce;if((!B||B(this._convertFromCellCoord(ce),this._convertFromCellCoord(fe),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(fe+1)))&&C.call(this,l,u,m,b,ge,A,R,B))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,u=3+this.cells.length+1+1;let m=0;for(let A=0;A<this.cells.length;A++)m+=this.cells[A].length;const b=new Int32Array(u+m+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let C=u;for(let A=0;A<l.length;A++){const R=l[A];b[3+A]=C,b.set(R,C),C+=R.length}return b[3+l.length]=C,b.set(this.keys,C),C+=this.keys.length,b[3+l.length+1]=C,b.set(this.bboxes,C),C+=this.bboxes.length,b.buffer}static serialize(l,u){const m=l.toArrayBuffer();return u&&u.push(m),{buffer:m}}static deserialize(l){return new Au(l.buffer)}}const jo={};function Ji(d,l,u={}){if(jo[d])throw new Error(`${d} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:d,writeable:!1}),jo[d]={klass:l,omit:u.omit||[],shallow:u.shallow||[]}}Ji("Object",Object),Ji("Set",Set),Ji("TransferableGridIndex",Au),Ji("Color",yn),Ji("Error",Error),Ji("AJAXError",He),Ji("ResolvedImage",we),Ji("StylePropertyFunction",Hc),Ji("StyleExpression",Zu,{omit:["_evaluator"]}),Ji("ZoomDependentExpression",yc),Ji("ZoomConstantExpression",mu),Ji("CompoundExpression",Xt,{omit:["_evaluate"]});for(const d in bt)bt[d]._classRegistryKey||Ji(`Expression_${d}`,bt[d]);function Hh(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Xe(d){return d.$name||d.constructor._classRegistryKey}function ui(d){return!(function(l){if(l===null||typeof l!="object")return!1;const u=Xe(l);return!(!u||u==="Object")})(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||Hh(d)||qt(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function yi(d,l){if(ui(d))return(Hh(d)||qt(d))&&l&&l.push(d),ArrayBuffer.isView(d)&&l&&l.push(d.buffer),d instanceof ImageData&&l&&l.push(d.data.buffer),d;if(Array.isArray(d)){const C=[];for(const A of d)C.push(yi(A,l));return C}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const u=Xe(d);if(!u)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!jo[u])throw new Error(`${u} is not registered.`);const{klass:m}=jo[u],b=m.serialize?m.serialize(d,l):{};if(m.serialize){if(l&&b===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in d){if(!d.hasOwnProperty(C)||jo[u].omit.indexOf(C)>=0)continue;const A=d[C];b[C]=jo[u].shallow.indexOf(C)>=0?A:yi(A,l)}d instanceof Error&&(b.message=d.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(b.$name=u),b}function An(d){if(ui(d))return d;if(Array.isArray(d))return d.map(An);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const l=Xe(d)||"Object";if(!jo[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:u}=jo[l];if(!u)throw new Error(`can't deserialize unregistered class ${l}`);if(u.deserialize)return u.deserialize(d);const m=Object.create(u.prototype);for(const b of Object.keys(d)){if(b==="$name")continue;const C=d[b];m[b]=jo[l].shallow.indexOf(b)>=0?C:An(C)}return m}class ln{constructor(){this.first=!0}update(l,u){const m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=u),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}function Vn(d){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))}function ga(d){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))}function Sr(d){return/\s/u.test(String.fromCodePoint(d))}function Wr(d){for(const l of d)if(ga(l.codePointAt(0)))return!0;return!1}function sh(d){for(const l of d)if(!Uh(l.codePointAt(0)))return!1;return!0}function es(d){const l=d.map((u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}})).filter((u=>u));return new RegExp(l.join("|"),"u")}const po=es(["Arab","Dupl","Mong","Ougr","Syrc"]);function Uh(d){return!po.test(String.fromCodePoint(d))}function wg(d){return!(ga(d)||(l=d,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(l))));var l}const Ey=es(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sg(d){return Ey.test(String.fromCodePoint(d))}function kg(d,l){return!(!l&&Sg(d)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(d)))}function My(d){for(const l of d)if(Sg(l.codePointAt(0)))return!0;return!1}const Tu=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){if(Tu.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(d,l){return s(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(d.pluginStatus!=="loading")return this.setState(d),d;const u=d.pluginURL,m=new Promise((C=>{this.loadScriptResolve=C}));l(u);const b=new Promise((C=>setTimeout((()=>C()),this.TIMEOUT)));if(yield Promise.race([m,b]),this.isParsed()){const C={pluginStatus:"loaded",pluginURL:u};return this.setState(C),C}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)}))}};class sr{constructor(l,u){this.isSupportedScript=px,this.zoom=l,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new ln,this.transition=u.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ln,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,u=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*u}}}function px(d){return(function(l,u){for(const m of l)if(!kg(m.codePointAt(0),u))return!1;return!0})(d,Tu.getRTLTextPluginStatus()==="loaded")}const Pd="-transition";class Wf{constructor(l,u,m){this.property=l,this.value=u,this.expression=(function(b,C,A){if(To(b))return new Hc(b,C);if(Ul(b)){const R=yu(b,C,A);if(R.result==="error")throw new Error(R.value.map((B=>`${B.key}: ${B.message}`)).join(", "));return R.value}{let R=b;return C.type==="color"&&typeof b=="string"?R=yn.parse(b):C.type!=="padding"||typeof b!="number"&&!Array.isArray(b)?C.type!=="numberArray"||typeof b!="number"&&!Array.isArray(b)?C.type!=="colorArray"||typeof b!="string"&&!Array.isArray(b)?C.type==="variableAnchorOffsetCollection"&&Array.isArray(b)?R=pe.parse(b):C.type==="projectionDefinition"&&typeof b=="string"&&(R=Me.parse(b)):R=_i.parse(b):R=ea.parse(b):R=tr.parse(b),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>R}}})(u===void 0?l.specification.default:u,l.specification,m)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,u,m){return this.property.possiblyEvaluate(this,l,u,m)}}class Xf{constructor(l,u){this.property=l,this.value=new Wf(l,void 0,u)}transitioned(l,u){return new Iy(this.property,this.value,u,bi({},l.transition,this.transition),l.now)}untransitioned(){return new Iy(this.property,this.value,null,{},0)}}class Cg{constructor(l,u){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=u}getValue(l){return fn(this._values[l].value.value)}setValue(l,u){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Xf(this._values[l].property,this._globalState)),this._values[l].value=new Wf(this._values[l].property,u===null?void 0:fn(u),this._globalState)}getTransition(l){return fn(this._values[l].transition)}setTransition(l,u){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Xf(this._values[l].property,this._globalState)),this._values[l].transition=fn(u)||void 0}serialize(){const l={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(l[u]=m);const b=this.getTransition(u);b!==void 0&&(l[`${u}${Pd}`]=b)}return l}transitioned(l,u){const m=new Py(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].transitioned(l,u._values[b]);return m}untransitioned(){const l=new Py(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].untransitioned();return l}}class Iy{constructor(l,u,m,b,C){this.property=l,this.value=u,this.begin=C+b.delay||0,this.end=this.begin+b.duration||0,l.specification.transition&&(b.delay||b.duration)&&(this.prior=m)}possiblyEvaluate(l,u,m){const b=l.now||0,C=this.value.possiblyEvaluate(l,u,m),A=this.prior;if(A){if(b>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(b<this.begin)return A.possiblyEvaluate(l,u,m);{const R=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(l,u,m),C,xi(R))}}return C}}class Py{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,u,m){const b=new Ld(this._properties);for(const C of Object.keys(this._values))b._values[C]=this._values[C].possiblyEvaluate(l,u,m);return b}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Ly{constructor(l,u){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=u}hasValue(l){return this._values[l].value!==void 0}getValue(l){return fn(this._values[l].value)}setValue(l,u){this._values[l]=new Wf(this._values[l].property,u===null?void 0:fn(u),this._globalState)}serialize(){const l={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(l[u]=m)}return l}possiblyEvaluate(l,u,m){const b=new Ld(this._properties);for(const C of Object.keys(this._values))b._values[C]=this._values[C].possiblyEvaluate(l,u,m);return b}}class Yl{constructor(l,u,m){this.property=l,this.value=u,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,u,m,b){return this.property.evaluate(this.value,this.parameters,l,u,m,b)}}class Ld{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Tn{constructor(l){this.specification=l}possiblyEvaluate(l,u){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(u)}interpolate(l,u,m){const b=ba[this.specification.type];return b?b(l,u,m):l}}class Un{constructor(l,u){this.specification=l,this.overrides=u}possiblyEvaluate(l,u,m,b){return new Yl(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(u,null,{},m,b)}:l.expression,u)}interpolate(l,u,m){if(l.value.kind!=="constant"||u.value.kind!=="constant")return l;if(l.value.value===void 0||u.value.value===void 0)return new Yl(this,{kind:"constant",value:void 0},l.parameters);const b=ba[this.specification.type];if(b){const C=b(l.value.value,u.value.value,m);return new Yl(this,{kind:"constant",value:C},l.parameters)}return l}evaluate(l,u,m,b,C,A){return l.kind==="constant"?l.value:l.evaluate(u,m,b,C,A)}}class Dd extends Un{possiblyEvaluate(l,u,m,b){if(l.value===void 0)return new Yl(this,{kind:"constant",value:void 0},u);if(l.expression.kind==="constant"){const C=l.expression.evaluate(u,null,{},m,b),A=l.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,R=this._calculate(A,A,A,u);return new Yl(this,{kind:"constant",value:R},u)}if(l.expression.kind==="camera"){const C=this._calculate(l.expression.evaluate({zoom:u.zoom-1}),l.expression.evaluate({zoom:u.zoom}),l.expression.evaluate({zoom:u.zoom+1}),u);return new Yl(this,{kind:"constant",value:C},u)}return new Yl(this,l.expression,u)}evaluate(l,u,m,b,C,A){if(l.kind==="source"){const R=l.evaluate(u,m,b,C,A);return this._calculate(R,R,R,u)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(u.zoom)-1},m,b),l.evaluate({zoom:Math.floor(u.zoom)},m,b),l.evaluate({zoom:Math.floor(u.zoom)+1},m,b),u):l.value}_calculate(l,u,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:u}:{from:m,to:u}}interpolate(l){return l}}class Yf{constructor(l){this.specification=l}possiblyEvaluate(l,u,m,b){if(l.value!==void 0){if(l.expression.kind==="constant"){const C=l.expression.evaluate(u,null,{},m,b);return this._calculate(C,C,C,u)}return this._calculate(l.expression.evaluate(new sr(Math.floor(u.zoom-1),u)),l.expression.evaluate(new sr(Math.floor(u.zoom),u)),l.expression.evaluate(new sr(Math.floor(u.zoom+1),u)),u)}}_calculate(l,u,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:u}:{from:m,to:u}}interpolate(l){return l}}class qf{constructor(l){this.specification=l}possiblyEvaluate(l,u,m,b){return!!l.expression.evaluate(u,null,{},m,b)}interpolate(){return!1}}class Eo{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in l){const m=l[u];m.specification.overridable&&this.overridableProperties.push(u);const b=this.defaultPropertyValues[u]=new Wf(m,void 0,void 0),C=this.defaultTransitionablePropertyValues[u]=new Xf(m,void 0);this.defaultTransitioningPropertyValues[u]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}Ji("DataDrivenProperty",Un),Ji("DataConstantProperty",Tn),Ji("CrossFadedDataDrivenProperty",Dd),Ji("CrossFadedProperty",Yf),Ji("ColorRampProperty",qf);class Cl extends Mn{constructor(l,u,m){if(super(),this.id=l.id,this.type=l.type,this._globalState=m,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,this._visibilityExpression=(function(b,C){return new Qr(b,C)})(this.visibility,m),l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=bl(l.filter,m)),u.layout&&(this._unevaluatedLayout=new Ly(u.layout,m)),u.paint)){this._transitionablePaint=new Cg(u.paint,m);for(const b in l.paint)this.setPaintProperty(b,l.paint[b],{validate:!1});for(const b in l.layout)this.setLayoutProperty(b,l.layout[b],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ld(u.paint)}}setFilter(l){this.filter=l,this._featureFilter=bl(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;for(const u of this._visibilityExpression.getGlobalStateRefs())l.add(u);if(this._unevaluatedLayout)for(const u in this._unevaluatedLayout._values){const m=this._unevaluatedLayout._values[u];for(const b of m.getGlobalStateRefs())l.add(b)}for(const u of this._featureFilter.getGlobalStateRefs())l.add(u);return l}getPaintAffectingGlobalStateRefs(){var l;const u=new globalThis.Map;if(this._transitionablePaint)for(const m in this._transitionablePaint._values){const b=this._transitionablePaint._values[m].value;for(const C of b.getGlobalStateRefs()){const A=(l=u.get(C))!==null&&l!==void 0?l:[];A.push({name:m,value:b.value}),u.set(C,A)}}return u}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(l,u,m={}){if(u==null||!this._validate(Id,`layers.${this.id}.layout.${l}`,l,u,m))return l==="visibility"?(this.visibility=u,this._visibilityExpression.setValue(u),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(l,u)}getPaintProperty(l){return l.endsWith(Pd)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,u,m={}){if(u!=null&&this._validate(ku,`layers.${this.id}.paint.${l}`,l,u,m))return!1;if(l.endsWith(Pd))return this._transitionablePaint.setTransition(l.slice(0,-11),u||void 0),!1;{const b=this._transitionablePaint._values[l],C=b.property.specification["property-type"]==="cross-faded-data-driven",A=b.value.isDataDriven(),R=b.value;this._transitionablePaint.setValue(l,u),this._handleSpecialPaintPropertyUpdate(l);const B=this._transitionablePaint._values[l].value;return B.isDataDriven()||A||C||this._handleOverridablePaintPropertyUpdate(l,R,B)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,u,m){return!1}isHidden(l=this.minzoom,u=!1){return!!(this.minzoom&&l<(u?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&l>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(l,u){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,u)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),si(l,((u,m)=>!(u===void 0||m==="layout"&&!Object.keys(u).length||m==="paint"&&!Object.keys(u).length)))}_validate(l,u,m,b,C={}){return(!C||C.validate!==!1)&&Cu(this,l.call(Gr,{key:u,layerType:this.type,objectKey:m,value:b,styleSpec:Mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const u=this.paint.get(l);if(u instanceof Yl&&ua(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}let Ag;var Dy={get paint(){return Ag=Ag||new Eo({"raster-opacity":new Tn(Mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tn(Mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tn(Mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tn(Mt.paint_raster["raster-brightness-max"]),"raster-saturation":new Tn(Mt.paint_raster["raster-saturation"]),"raster-contrast":new Tn(Mt.paint_raster["raster-contrast"]),"raster-resampling":new Tn(Mt.paint_raster["raster-resampling"]),"raster-fade-duration":new Tn(Mt.paint_raster["raster-fade-duration"])})}};class gx extends Cl{constructor(l,u){super(l,Dy,u)}}const mx={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Rd{constructor(l,u){this._structArray=l,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Xr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,u){return l._trim(),u&&(l.isTransferred=!0,u.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const u=Object.create(this.prototype);return u.arrayBuffer=l.arrayBuffer,u.length=l.length,u.capacity=l.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function cs(d,l=1){let u=0,m=0;return{members:d.map((b=>{const C=mx[b.type].BYTES_PER_ELEMENT,A=u=oh(u,Math.max(l,C)),R=b.components||1;return m=Math.max(m,C),u+=C*R,{name:b.name,type:b.type,components:R,offset:A}})),size:oh(u,Math.max(m,l)),alignment:l}}function oh(d,l){return Math.ceil(d/l)*l}class Od extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u){const m=this.length;return this.resize(m+1),this.emplace(m,l,u)}emplace(l,u,m){const b=2*l;return this.int16[b+0]=u,this.int16[b+1]=m,l}}Od.prototype.bytesPerElement=4,Ji("StructArrayLayout2i4",Od);class Zf extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,m)}emplace(l,u,m,b){const C=3*l;return this.int16[C+0]=u,this.int16[C+1]=m,this.int16[C+2]=b,l}}Zf.prototype.bytesPerElement=6,Ji("StructArrayLayout3i6",Zf);class Tg extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,m,b){const C=this.length;return this.resize(C+1),this.emplace(C,l,u,m,b)}emplace(l,u,m,b,C){const A=4*l;return this.int16[A+0]=u,this.int16[A+1]=m,this.int16[A+2]=b,this.int16[A+3]=C,l}}Tg.prototype.bytesPerElement=8,Ji("StructArrayLayout4i8",Tg);class Kf extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,l,u,m,b,C,A)}emplace(l,u,m,b,C,A,R){const B=6*l;return this.int16[B+0]=u,this.int16[B+1]=m,this.int16[B+2]=b,this.int16[B+3]=C,this.int16[B+4]=A,this.int16[B+5]=R,l}}Kf.prototype.bytesPerElement=12,Ji("StructArrayLayout2i4i12",Kf);class Eg extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,l,u,m,b,C,A)}emplace(l,u,m,b,C,A,R){const B=4*l,$=8*l;return this.int16[B+0]=u,this.int16[B+1]=m,this.uint8[$+4]=b,this.uint8[$+5]=C,this.uint8[$+6]=A,this.uint8[$+7]=R,l}}Eg.prototype.bytesPerElement=8,Ji("StructArrayLayout2i4ub8",Eg);class zd extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u){const m=this.length;return this.resize(m+1),this.emplace(m,l,u)}emplace(l,u,m){const b=2*l;return this.float32[b+0]=u,this.float32[b+1]=m,l}}zd.prototype.bytesPerElement=8,Ji("StructArrayLayout2f8",zd);class Yc extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A,R,B,$,q){const te=this.length;return this.resize(te+1),this.emplace(te,l,u,m,b,C,A,R,B,$,q)}emplace(l,u,m,b,C,A,R,B,$,q,te){const oe=10*l;return this.uint16[oe+0]=u,this.uint16[oe+1]=m,this.uint16[oe+2]=b,this.uint16[oe+3]=C,this.uint16[oe+4]=A,this.uint16[oe+5]=R,this.uint16[oe+6]=B,this.uint16[oe+7]=$,this.uint16[oe+8]=q,this.uint16[oe+9]=te,l}}Yc.prototype.bytesPerElement=20,Ji("StructArrayLayout10ui20",Yc);class Jf extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A,R,B){const $=this.length;return this.resize($+1),this.emplace($,l,u,m,b,C,A,R,B)}emplace(l,u,m,b,C,A,R,B,$){const q=8*l;return this.uint16[q+0]=u,this.uint16[q+1]=m,this.uint16[q+2]=b,this.uint16[q+3]=C,this.uint16[q+4]=A,this.uint16[q+5]=R,this.uint16[q+6]=B,this.uint16[q+7]=$,l}}Jf.prototype.bytesPerElement=16,Ji("StructArrayLayout8ui16",Jf);class Fd extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A,R,B,$,q,te,oe){const ce=this.length;return this.resize(ce+1),this.emplace(ce,l,u,m,b,C,A,R,B,$,q,te,oe)}emplace(l,u,m,b,C,A,R,B,$,q,te,oe,ce){const fe=12*l;return this.int16[fe+0]=u,this.int16[fe+1]=m,this.int16[fe+2]=b,this.int16[fe+3]=C,this.uint16[fe+4]=A,this.uint16[fe+5]=R,this.uint16[fe+6]=B,this.uint16[fe+7]=$,this.int16[fe+8]=q,this.int16[fe+9]=te,this.int16[fe+10]=oe,this.int16[fe+11]=ce,l}}Fd.prototype.bytesPerElement=24,Ji("StructArrayLayout4i4ui4i24",Fd);class Qf extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,m)}emplace(l,u,m,b){const C=3*l;return this.float32[C+0]=u,this.float32[C+1]=m,this.float32[C+2]=b,l}}Qf.prototype.bytesPerElement=12,Ji("StructArrayLayout3f12",Qf);class Nd extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.uint32[1*l+0]=u,l}}Nd.prototype.bytesPerElement=4,Ji("StructArrayLayout1ul4",Nd);class Mg extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A,R,B,$){const q=this.length;return this.resize(q+1),this.emplace(q,l,u,m,b,C,A,R,B,$)}emplace(l,u,m,b,C,A,R,B,$,q){const te=10*l,oe=5*l;return this.int16[te+0]=u,this.int16[te+1]=m,this.int16[te+2]=b,this.int16[te+3]=C,this.int16[te+4]=A,this.int16[te+5]=R,this.uint32[oe+3]=B,this.uint16[te+8]=$,this.uint16[te+9]=q,l}}Mg.prototype.bytesPerElement=20,Ji("StructArrayLayout6i1ul2ui20",Mg);class $h extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,l,u,m,b,C,A)}emplace(l,u,m,b,C,A,R){const B=6*l;return this.int16[B+0]=u,this.int16[B+1]=m,this.int16[B+2]=b,this.int16[B+3]=C,this.int16[B+4]=A,this.int16[B+5]=R,l}}$h.prototype.bytesPerElement=12,Ji("StructArrayLayout2i2i2i12",$h);class lh extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C){const A=this.length;return this.resize(A+1),this.emplace(A,l,u,m,b,C)}emplace(l,u,m,b,C,A){const R=4*l,B=8*l;return this.float32[R+0]=u,this.float32[R+1]=m,this.float32[R+2]=b,this.int16[B+6]=C,this.int16[B+7]=A,l}}lh.prototype.bytesPerElement=16,Ji("StructArrayLayout2f1f2i16",lh);class Ig extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,l,u,m,b,C,A)}emplace(l,u,m,b,C,A,R){const B=16*l,$=4*l,q=8*l;return this.uint8[B+0]=u,this.uint8[B+1]=m,this.float32[$+1]=b,this.float32[$+2]=C,this.int16[q+6]=A,this.int16[q+7]=R,l}}Ig.prototype.bytesPerElement=16,Ji("StructArrayLayout2ub2f2i16",Ig);class Bd extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,m)}emplace(l,u,m,b){const C=3*l;return this.uint16[C+0]=u,this.uint16[C+1]=m,this.uint16[C+2]=b,l}}Bd.prototype.bytesPerElement=6,Ji("StructArrayLayout3ui6",Bd);class ch extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A,R,B,$,q,te,oe,ce,fe,ge,ve,Ie){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,l,u,m,b,C,A,R,B,$,q,te,oe,ce,fe,ge,ve,Ie)}emplace(l,u,m,b,C,A,R,B,$,q,te,oe,ce,fe,ge,ve,Ie,Qe){const De=24*l,ze=12*l,it=48*l;return this.int16[De+0]=u,this.int16[De+1]=m,this.uint16[De+2]=b,this.uint16[De+3]=C,this.uint32[ze+2]=A,this.uint32[ze+3]=R,this.uint32[ze+4]=B,this.uint16[De+10]=$,this.uint16[De+11]=q,this.uint16[De+12]=te,this.float32[ze+7]=oe,this.float32[ze+8]=ce,this.uint8[it+36]=fe,this.uint8[it+37]=ge,this.uint8[it+38]=ve,this.uint32[ze+10]=Ie,this.int16[De+22]=Qe,l}}ch.prototype.bytesPerElement=48,Ji("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ch);class Pg extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,m,b,C,A,R,B,$,q,te,oe,ce,fe,ge,ve,Ie,Qe,De,ze,it,ot,Ot,ri,Qt,di,Ni,gi){const ti=this.length;return this.resize(ti+1),this.emplace(ti,l,u,m,b,C,A,R,B,$,q,te,oe,ce,fe,ge,ve,Ie,Qe,De,ze,it,ot,Ot,ri,Qt,di,Ni,gi)}emplace(l,u,m,b,C,A,R,B,$,q,te,oe,ce,fe,ge,ve,Ie,Qe,De,ze,it,ot,Ot,ri,Qt,di,Ni,gi,ti){const $t=32*l,tn=16*l;return this.int16[$t+0]=u,this.int16[$t+1]=m,this.int16[$t+2]=b,this.int16[$t+3]=C,this.int16[$t+4]=A,this.int16[$t+5]=R,this.int16[$t+6]=B,this.int16[$t+7]=$,this.uint16[$t+8]=q,this.uint16[$t+9]=te,this.uint16[$t+10]=oe,this.uint16[$t+11]=ce,this.uint16[$t+12]=fe,this.uint16[$t+13]=ge,this.uint16[$t+14]=ve,this.uint16[$t+15]=Ie,this.uint16[$t+16]=Qe,this.uint16[$t+17]=De,this.uint16[$t+18]=ze,this.uint16[$t+19]=it,this.uint16[$t+20]=ot,this.uint16[$t+21]=Ot,this.uint16[$t+22]=ri,this.uint32[tn+12]=Qt,this.float32[tn+13]=di,this.float32[tn+14]=Ni,this.uint16[$t+30]=gi,this.uint16[$t+31]=ti,l}}Pg.prototype.bytesPerElement=64,Ji("StructArrayLayout8i15ui1ul2f2ui64",Pg);class ep extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.float32[1*l+0]=u,l}}ep.prototype.bytesPerElement=4,Ji("StructArrayLayout1f4",ep);class tp extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,m)}emplace(l,u,m,b){const C=3*l;return this.uint16[6*l+0]=u,this.float32[C+1]=m,this.float32[C+2]=b,l}}tp.prototype.bytesPerElement=12,Ji("StructArrayLayout1ui2f12",tp);class Lg extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,m){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,m)}emplace(l,u,m,b){const C=4*l;return this.uint32[2*l+0]=u,this.uint16[C+2]=m,this.uint16[C+3]=b,l}}Lg.prototype.bytesPerElement=8,Ji("StructArrayLayout1ul2ui8",Lg);class I extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u){const m=this.length;return this.resize(m+1),this.emplace(m,l,u)}emplace(l,u,m){const b=2*l;return this.uint16[b+0]=u,this.uint16[b+1]=m,l}}I.prototype.bytesPerElement=4,Ji("StructArrayLayout2ui4",I);class c extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.uint16[1*l+0]=u,l}}c.prototype.bytesPerElement=2,Ji("StructArrayLayout1ui2",c);class p extends Xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,m,b){const C=this.length;return this.resize(C+1),this.emplace(C,l,u,m,b)}emplace(l,u,m,b,C){const A=4*l;return this.float32[A+0]=u,this.float32[A+1]=m,this.float32[A+2]=b,this.float32[A+3]=C,l}}p.prototype.bytesPerElement=16,Ji("StructArrayLayout4f16",p);class v extends Rd{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new h(this.anchorPointX,this.anchorPointY)}}v.prototype.size=20;class k extends Mg{get(l){return new v(this,l)}}Ji("CollisionBoxArray",k);class P extends Rd{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}P.prototype.size=48;class N extends ch{get(l){return new P(this,l)}}Ji("PlacedSymbolArray",N);class H extends Rd{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}H.prototype.size=64;class Y extends Pg{get(l){return new H(this,l)}}Ji("SymbolInstanceArray",Y);class Q extends ep{getoffsetX(l){return this.float32[1*l+0]}}Ji("GlyphOffsetArray",Q);class ne extends Zf{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Ji("SymbolLineVertexArray",ne);class he extends Rd{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}he.prototype.size=12;class ue extends tp{get(l){return new he(this,l)}}Ji("TextAnchorOffsetArray",ue);class _e extends Rd{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}_e.prototype.size=8;class Ee extends Lg{get(l){return new _e(this,l)}}Ji("FeatureIndexArray",Ee);class Ne extends Od{}class Ue extends Od{}class je extends Od{}class et extends Kf{}class lt extends Eg{}class Je extends zd{}class st extends Yc{}class ft extends Jf{}class at extends Fd{}class kt extends Qf{}class Yt extends Nd{}class Ft extends $h{}class jt extends Ig{}class Vt extends Bd{}class Mi extends I{}const Pi=cs([{name:"a_pos",components:2,type:"Int16"}],4),{members:fi}=Pi;class ji{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,u,m,b){const C=this.segments[this.segments.length-1];return l>ji.MAX_VERTEX_ARRAY_LENGTH&&Qi(`Max vertices per segment is ${ji.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${ji.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!C||C.vertexLength+l>ji.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==b?this.createNewSegment(u,m,b):C}createNewSegment(l,u,m){const b={vertexOffset:l.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return m!==void 0&&(b.sortKey=m),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(l,u,m){return this.prepareSegment(0,l,u,m)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const u in l.vaos)l.vaos[u].destroy()}static simpleSegment(l,u,m,b){return new ji([{vertexOffset:l,primitiveOffset:u,vertexLength:m,primitiveLength:b,vaos:{},sortKey:0}])}}function la(d,l){return 256*(d=wt(Math.floor(d),0,255))+wt(Math.floor(l),0,255)}ji.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ji("SegmentVector",ji);const Ja=cs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Lr=cs([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var fr,Fr,pr,ts={exports:{}},Nr={exports:{}},Ys={exports:{}},_s=(function(){if(pr)return ts.exports;pr=1;var d=(fr||(fr=1,Nr.exports=function(u,m){var b,C,A,R,B,$,q,te;for(C=u.length-(b=3&u.length),A=m,B=3432918353,$=461845907,te=0;te<C;)q=255&u.charCodeAt(te)|(255&u.charCodeAt(++te))<<8|(255&u.charCodeAt(++te))<<16|(255&u.charCodeAt(++te))<<24,++te,A=27492+(65535&(R=5*(65535&(A=(A^=q=(65535&(q=(q=(65535&q)*B+(((q>>>16)*B&65535)<<16)&4294967295)<<15|q>>>17))*$+(((q>>>16)*$&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(R>>>16)&65535)<<16);switch(q=0,b){case 3:q^=(255&u.charCodeAt(te+2))<<16;case 2:q^=(255&u.charCodeAt(te+1))<<8;case 1:A^=q=(65535&(q=(q=(65535&(q^=255&u.charCodeAt(te)))*B+(((q>>>16)*B&65535)<<16)&4294967295)<<15|q>>>17))*$+(((q>>>16)*$&65535)<<16)&4294967295}return A^=u.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0}),Nr.exports),l=(Fr||(Fr=1,Ys.exports=function(u,m){for(var b,C=u.length,A=m^C,R=0;C>=4;)b=1540483477*(65535&(b=255&u.charCodeAt(R)|(255&u.charCodeAt(++R))<<8|(255&u.charCodeAt(++R))<<16|(255&u.charCodeAt(++R))<<24))+((1540483477*(b>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),C-=4,++R;switch(C){case 3:A^=(255&u.charCodeAt(R+2))<<16;case 2:A^=(255&u.charCodeAt(R+1))<<8;case 1:A=1540483477*(65535&(A^=255&u.charCodeAt(R)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0}),Ys.exports);return ts.exports=d,ts.exports.murmur3=d,ts.exports.murmur2=l,ts.exports})(),us=f(_s);class io{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,u,m,b){this.ids.push(Eu(l)),this.positions.push(u,m,b)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Eu(l);let m=0,b=this.ids.length-1;for(;m<b;){const A=m+b>>1;this.ids[A]>=u?b=A:m=A+1}const C=[];for(;this.ids[m]===u;)C.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return C}static serialize(l,u){const m=new Float64Array(l.ids),b=new Uint32Array(l.positions);return qc(m,b,0,m.length-1),u&&u.push(m.buffer,b.buffer),{ids:m,positions:b}}static deserialize(l){const u=new io;return u.ids=l.ids,u.positions=l.positions,u.indexed=!0,u}}function Eu(d){const l=+d;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:us(String(d))}function qc(d,l,u,m){for(;u<m;){const b=d[u+m>>1];let C=u-1,A=m+1;for(;;){do C++;while(d[C]<b);do A--;while(d[A]>b);if(C>=A)break;Sc(d,C,A),Sc(l,3*C,3*A),Sc(l,3*C+1,3*A+1),Sc(l,3*C+2,3*A+2)}A-u<m-A?(qc(d,l,u,A),u=A+1):(qc(d,l,A+1,m),m=A)}}function Sc(d,l,u){const m=d[l];d[l]=d[u],d[u]=m}Ji("FeaturePositionMap",io);class Vo{constructor(l,u){this.gl=l.gl,this.location=u}}class uh extends Vo{constructor(l,u){super(l,u),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class jd extends Vo{constructor(l,u){super(l,u),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class hh extends Vo{constructor(l,u){super(l,u),this.current=yn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Al=new Float32Array(16);function kc(d){return[la(255*d.r,255*d.g),la(255*d.b,255*d.a)]}class ql{constructor(l,u,m){this.value=l,this.uniformNames=u.map((b=>`u_${b}`)),this.type=m}setUniform(l,u,m){l.set(m.constantOr(this.value))}getBinding(l,u,m){return this.type==="color"?new hh(l,u):new uh(l,u)}}class Zl{constructor(l,u){this.uniformNames=u.map((m=>`u_${m}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,u){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,u.y,u.height,u.width]}setUniform(l,u,m,b){let C=null;b==="u_pattern_to"?C=this.patternTo:b==="u_pattern_from"?C=this.patternFrom:b==="u_dasharray_to"?C=this.dashTo:b==="u_dasharray_from"?C=this.dashFrom:b==="u_pixel_ratio_to"?C=this.pixelRatioTo:b==="u_pixel_ratio_from"&&(C=this.pixelRatioFrom),C!==null&&l.set(C)}getBinding(l,u,m){return m.substr(0,9)==="u_pattern"||m.substr(0,12)==="u_dasharray_"?new jd(l,u):new uh(l,u)}}class kr{constructor(l,u,m,b){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=u.map((C=>({name:`a_${C}`,type:"Float32",components:m==="color"?2:1,offset:0}))),this.paintVertexArray=new b}populatePaintArray(l,u,m){const b=this.paintVertexArray.length,C=this.expression.evaluate(new sr(0,m),u,{},m.canonical,[],m.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(b,l,C)}updatePaintArray(l,u,m,b,C){const A=this.expression.evaluate(new sr(0,C),m,b);this._setPaintValue(l,u,A)}_setPaintValue(l,u,m){if(this.type==="color"){const b=kc(m);for(let C=l;C<u;C++)this.paintVertexArray.emplace(C,b[0],b[1])}else{for(let b=l;b<u;b++)this.paintVertexArray.emplace(b,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gr{constructor(l,u,m,b,C,A){this.expression=l,this.uniformNames=u.map((R=>`u_${R}_t`)),this.type=m,this.useIntegerZoom=b,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=u.map((R=>({name:`a_${R}`,type:"Float32",components:m==="color"?4:2,offset:0}))),this.paintVertexArray=new A}populatePaintArray(l,u,m){const b=this.expression.evaluate(new sr(this.zoom,m),u,{},m.canonical,[],m.formattedSection),C=this.expression.evaluate(new sr(this.zoom+1,m),u,{},m.canonical,[],m.formattedSection),A=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(A,l,b,C)}updatePaintArray(l,u,m,b,C){const A=this.expression.evaluate(new sr(this.zoom,C),m,b),R=this.expression.evaluate(new sr(this.zoom+1,C),m,b);this._setPaintValue(l,u,A,R)}_setPaintValue(l,u,m,b){if(this.type==="color"){const C=kc(m),A=kc(b);for(let R=l;R<u;R++)this.paintVertexArray.emplace(R,C[0],C[1],A[0],A[1])}else{for(let C=l;C<u;C++)this.paintVertexArray.emplace(C,m,b);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,u){const m=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=wt(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(b)}getBinding(l,u,m){return new uh(l,u)}}class Bs{constructor(l,u,m,b,C,A){this.expression=l,this.type=u,this.useIntegerZoom=m,this.zoom=b,this.layerId=A,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(l,u,m){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(b,l,this.getPositionIds(u),m)}updatePaintArray(l,u,m,b,C){this._setPaintValues(l,u,this.getPositionIds(m),C)}_setPaintValues(l,u,m,b){const C=this.getPositions(b);if(!C||!m)return;const A=C[m.min],R=C[m.mid],B=C[m.max];if(A&&R&&B)for(let $=l;$<u;$++)this.emplace(this.zoomInPaintVertexArray,$,R,A),this.emplace(this.zoomOutPaintVertexArray,$,R,B)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const u=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,u,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,u,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class js extends Bs{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return Ja.members}emplace(l,u,m,b){l.emplace(u,m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],m.pixelRatio,b.pixelRatio)}}class Ry extends Bs{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return Lr.members}emplace(l,u,m,b){l.emplace(u,0,m.y,m.height,m.width,0,b.y,b.height,b.width)}}class Oy{constructor(l,u,m){this.binders={},this._buffers=[];const b=[];for(const C in l.paint._values){if(!m(C))continue;const A=l.paint.get(C);if(!(A instanceof Yl&&ua(A.property.specification)))continue;const R=yx(C,l.type),B=A.value,$=A.property.specification.type,q=A.property.useIntegerZoom,te=A.property.specification["property-type"],oe=te==="cross-faded"||te==="cross-faded-data-driven";if(B.kind==="constant")this.binders[C]=oe?new Zl(B.value,R):new ql(B.value,R,$),b.push(`/u_${C}`);else if(B.kind==="source"||oe){const ce=zy(C,$,"source");this.binders[C]=oe?C==="line-dasharray"?new Ry(B,$,q,u,ce,l.id):new js(B,$,q,u,ce,l.id):new kr(B,R,$,ce),b.push(`/a_${C}`)}else{const ce=zy(C,$,"composite");this.binders[C]=new gr(B,R,$,q,u,ce),b.push(`/z_${C}`)}}this.cacheKey=b.sort().join("")}getMaxValue(l){const u=this.binders[l];return u instanceof kr||u instanceof gr?u.maxValue:0}populatePaintArrays(l,u,m){for(const b in this.binders){const C=this.binders[b];(C instanceof kr||C instanceof gr||C instanceof Bs)&&C.populatePaintArray(l,u,m)}}setConstantPatternPositions(l,u){for(const m in this.binders){const b=this.binders[m];b instanceof Zl&&b.setConstantPatternPositions(l,u)}}setConstantDashPositions(l,u){for(const m in this.binders){const b=this.binders[m];b instanceof Zl&&b.setConstantDashPositions(l,u)}}updatePaintArrays(l,u,m,b,C){let A=!1;for(const R in l){const B=u.getPositions(R);for(const $ of B){const q=m.feature($.index);for(const te in this.binders){const oe=this.binders[te];if((oe instanceof kr||oe instanceof gr||oe instanceof Bs)&&oe.expression.isStateDependent===!0){const ce=b.paint.get(te);oe.expression=ce.value,oe.updatePaintArray($.start,$.end,q,l[R],C),A=!0}}}}return A}defines(){const l=[];for(const u in this.binders){const m=this.binders[u];(m instanceof ql||m instanceof Zl)&&l.push(...m.uniformNames.map((b=>`#define HAS_UNIFORM_${b}`)))}return l}getBinderAttributes(){const l=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof kr||m instanceof gr)for(let b=0;b<m.paintVertexAttributes.length;b++)l.push(m.paintVertexAttributes[b].name);else if(m instanceof Bs){const b=m.getVertexAttributes();for(const C of b)l.push(C.name)}}return l}getBinderUniforms(){const l=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof ql||m instanceof Zl||m instanceof gr)for(const b of m.uniformNames)l.push(b)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,u){const m=[];for(const b in this.binders){const C=this.binders[b];if(C instanceof ql||C instanceof Zl||C instanceof gr){for(const A of C.uniformNames)if(u[A]){const R=C.getBinding(l,u[A],A);m.push({name:A,property:b,binding:R})}}}return m}setUniforms(l,u,m,b){for(const{name:C,property:A,binding:R}of u)this.binders[A].setUniform(R,b,m.get(A),C)}updatePaintBuffers(l){this._buffers=[];for(const u in this.binders){const m=this.binders[u];if(l&&m instanceof Bs){const b=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(m instanceof kr||m instanceof gr)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(const u in this.binders){const m=this.binders[u];(m instanceof kr||m instanceof gr||m instanceof Bs)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const u=this.binders[l];(u instanceof kr||u instanceof gr||u instanceof Bs)&&u.destroy()}}}class dh{constructor(l,u,m=()=>!0){this.programConfigurations={};for(const b of l)this.programConfigurations[b.id]=new Oy(b,u,m);this.needsUpload=!1,this._featureMap=new io,this._bufferOffset=0}populatePaintArrays(l,u,m,b){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(l,u,b);u.id!==void 0&&this._featureMap.add(u.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,u,m,b){for(const C of m)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(l,this._featureMap,u,C,b)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function yx(d,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${l}-`,"").replace(/-/g,"_")]}function zy(d,l,u){const m={color:{source:zd,composite:p},number:{source:ep,composite:zd}},b=(function(C){return{"line-pattern":{source:st,composite:st},"fill-pattern":{source:st,composite:st},"fill-extrusion-pattern":{source:st,composite:st},"line-dasharray":{source:ft,composite:ft}}[C]})(d);return b&&b[u]||m[l][u]}Ji("ConstantBinder",ql),Ji("CrossFadedConstantBinder",Zl),Ji("SourceExpressionBinder",kr),Ji("CrossFadedPatternBinder",js),Ji("CrossFadedDasharrayBinder",Ry),Ji("CompositeExpressionBinder",gr),Ji("ProgramConfiguration",Oy,{omit:["_buffers"]}),Ji("ProgramConfigurationSet",dh);const Dg=Math.pow(2,14)-1,Mu=-Dg-1;function Iu(d){const l=Dt/d.extent,u=d.loadGeometry();for(let m=0;m<u.length;m++){const b=u[m];for(let C=0;C<b.length;C++){const A=b[C],R=Math.round(A.x*l),B=Math.round(A.y*l);A.x=wt(R,Mu,Dg),A.y=wt(B,Mu,Dg),(R<A.x||R>A.x+1||B<A.y||B>A.y+1)&&Qi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Pu(d,l){return{type:d.type,id:d.id,properties:d.properties,geometry:l?Iu(d):[]}}const Rg=-32768;function Og(d,l,u,m,b){d.emplaceBack(Rg+8*l+m,Rg+8*u+b)}class ip{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Ue,this.indexArray=new Vt,this.segments=new ji,this.programConfigurations=new dh(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(l,u,m){const b=this.layers[0],C=[];let A=null,R=!1,B=b.type==="heatmap";if(b.type==="circle"){const q=b;A=q.layout.get("circle-sort-key"),R=!A.isConstant(),B=B||q.paint.get("circle-pitch-alignment")==="map"}const $=B?u.subdivisionGranularity.circle:1;for(const{feature:q,id:te,index:oe,sourceLayerIndex:ce}of l){const fe=this.layers[0]._featureFilter.needGeometry,ge=Pu(q,fe);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),ge,m))continue;const ve=R?A.evaluate(ge,{},m):void 0,Ie={id:te,properties:q.properties,type:q.type,sourceLayerIndex:ce,index:oe,geometry:fe?ge.geometry:Iu(q),patterns:{},sortKey:ve};C.push(Ie)}R&&C.sort(((q,te)=>q.sortKey-te.sortKey));for(const q of C){const{geometry:te,index:oe,sourceLayerIndex:ce}=q,fe=l[oe].feature;this.addFeature(q,te,oe,m,$),u.featureIndex.insert(fe,te,oe,ce,this.index)}}update(l,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:m})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,fi),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,u,m,b,C=1){let A;switch(C){case 1:A=[0,7];break;case 3:A=[0,2,5,7];break;case 5:A=[0,1,3,4,6,7];break;case 7:A=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${C}; valid values are 1, 3, 5, 7.`)}const R=A.length;for(const B of u)for(const $ of B){const q=$.x,te=$.y;if(q<0||q>=Dt||te<0||te>=Dt)continue;const oe=this.segments.prepareSegment(R*R,this.layoutVertexArray,this.indexArray,l.sortKey),ce=oe.vertexLength;for(let fe=0;fe<R;fe++)for(let ge=0;ge<R;ge++)Og(this.layoutVertexArray,q,te,A[ge],A[fe]);for(let fe=0;fe<R-1;fe++)for(let ge=0;ge<R-1;ge++){const ve=ce+fe*R+ge,Ie=ce+(fe+1)*R+ge;this.indexArray.emplaceBack(ve,Ie+1,ve+1),this.indexArray.emplaceBack(ve,Ie,Ie+1)}oe.vertexLength+=R*R,oe.primitiveLength+=(R-1)*(R-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{imagePositions:{},canonical:b})}}function np(d,l){for(let u=0;u<d.length;u++)if(ap(l,d[u]))return!0;for(let u=0;u<l.length;u++)if(ap(d,l[u]))return!0;return!!_x(d,l)}function Fy(d,l,u){return!!ap(d,l)||!!xx(l,d,u)}function mS(d,l){if(d.length===1)return _S(l,d[0]);for(let u=0;u<l.length;u++){const m=l[u];for(let b=0;b<m.length;b++)if(ap(d,m[b]))return!0}for(let u=0;u<d.length;u++)if(_S(l,d[u]))return!0;for(let u=0;u<l.length;u++)if(_x(d,l[u]))return!0;return!1}function jL(d,l,u){if(d.length>1){if(_x(d,l))return!0;for(let m=0;m<l.length;m++)if(xx(l[m],d,u))return!0}for(let m=0;m<d.length;m++)if(xx(d[m],l,u))return!0;return!1}function _x(d,l){if(d.length===0||l.length===0)return!1;for(let u=0;u<d.length-1;u++){const m=d[u],b=d[u+1];for(let C=0;C<l.length-1;C++)if(VL(m,b,l[C],l[C+1]))return!0}return!1}function VL(d,l,u,m){return rn(d,u,m)!==rn(l,u,m)&&rn(d,l,u)!==rn(d,l,m)}function xx(d,l,u){const m=u*u;if(l.length===1)return d.distSqr(l[0])<m;for(let b=1;b<l.length;b++)if(yS(d,l[b-1],l[b])<m)return!0;return!1}function yS(d,l,u){const m=l.distSqr(u);if(m===0)return d.distSqr(l);const b=((d.x-l.x)*(u.x-l.x)+(d.y-l.y)*(u.y-l.y))/m;return d.distSqr(b<0?l:b>1?u:u.sub(l)._mult(b)._add(l))}function _S(d,l){let u,m,b,C=!1;for(let A=0;A<d.length;A++){u=d[A];for(let R=0,B=u.length-1;R<u.length;B=R++)m=u[R],b=u[B],m.y>l.y!=b.y>l.y&&l.x<(b.x-m.x)*(l.y-m.y)/(b.y-m.y)+m.x&&(C=!C)}return C}function ap(d,l){let u=!1;for(let m=0,b=d.length-1;m<d.length;b=m++){const C=d[m],A=d[b];C.y>l.y!=A.y>l.y&&l.x<(A.x-C.x)*(l.y-C.y)/(A.y-C.y)+C.x&&(u=!u)}return u}function HL(d,l,u){const m=u[0],b=u[2];if(d.x<m.x&&l.x<m.x||d.x>b.x&&l.x>b.x||d.y<m.y&&l.y<m.y||d.y>b.y&&l.y>b.y)return!1;const C=rn(d,l,u[0]);return C!==rn(d,l,u[1])||C!==rn(d,l,u[2])||C!==rn(d,l,u[3])}function rp(d,l,u){const m=l.paint.get(d).value;return m.kind==="constant"?m.value:u.programConfigurations.get(l.id).getMaxValue(d)}function Ny(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function By(d,l,u,m,b){if(!l[0]&&!l[1])return d;const C=h.convert(l)._mult(b);u==="viewport"&&C._rotate(-m);const A=[];for(let R=0;R<d.length;R++)A.push(d[R].sub(C));return A}function UL(d){const l=[];for(let u=0;u<d.length;u++){const m=d[u],b=l.at(-1);(u===0||b&&!m.equals(b))&&l.push(m)}return l}function $L({queryGeometry:d,size:l},u){return Fy(d,u,l)}function GL({queryGeometry:d,size:l,transform:u,unwrappedTileID:m,getElevation:b},C){return Fy(d,C,l*(u.projectTileCoordinates(C.x,C.y,m,b).signedDistanceFromCamera/u.cameraToCenterDistance))}function WL({queryGeometry:d,size:l,transform:u,unwrappedTileID:m,getElevation:b},C){const A=u.projectTileCoordinates(C.x,C.y,m,b).signedDistanceFromCamera,R=l*(u.cameraToCenterDistance/A);return Fy(d,vx(C,u,m,b),R)}function XL({queryGeometry:d,size:l,transform:u,unwrappedTileID:m,getElevation:b},C){return Fy(d,vx(C,u,m,b),l)}function xS({queryGeometry:d,size:l,transform:u,unwrappedTileID:m,getElevation:b,pitchAlignment:C="map",pitchScale:A="map"},R){const B=C==="map"?A==="map"?$L:GL:A==="map"?WL:XL,$={queryGeometry:d,size:l,transform:u,unwrappedTileID:m,getElevation:b};for(const q of R)for(const te of q)if(B($,te))return!0;return!1}function vx(d,l,u,m){const b=l.projectTileCoordinates(d.x,d.y,u,m).point;return new h((.5*b.x+.5)*l.width,(.5*-b.y+.5)*l.height)}let vS,bS;Ji("CircleBucket",ip,{omit:["layers"]});var YL={get paint(){return bS=bS||new Eo({"circle-radius":new Un(Mt.paint_circle["circle-radius"]),"circle-color":new Un(Mt.paint_circle["circle-color"]),"circle-blur":new Un(Mt.paint_circle["circle-blur"]),"circle-opacity":new Un(Mt.paint_circle["circle-opacity"]),"circle-translate":new Tn(Mt.paint_circle["circle-translate"]),"circle-translate-anchor":new Tn(Mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tn(Mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tn(Mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Un(Mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Un(Mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Un(Mt.paint_circle["circle-stroke-opacity"])})},get layout(){return vS=vS||new Eo({"circle-sort-key":new Un(Mt.layout_circle["circle-sort-key"])})}};class qL extends Cl{constructor(l,u){super(l,YL,u)}createBucket(l){return new ip(l)}queryRadius(l){const u=l;return rp("circle-radius",this,u)+rp("circle-stroke-width",this,u)+Ny(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:m,geometry:b,transform:C,pixelsToTileUnits:A,unwrappedTileID:R,getElevation:B}){const $=By(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-C.bearingInRadians,A),q=this.paint.get("circle-radius").evaluate(u,m)+this.paint.get("circle-stroke-width").evaluate(u,m),te=this.paint.get("circle-pitch-scale"),oe=this.paint.get("circle-pitch-alignment");let ce,fe;return oe==="map"?(ce=$,fe=q*A):(ce=(function(ge,ve,Ie,Qe){return ge.map((De=>vx(De,ve,Ie,Qe)))})($,C,R,B),fe=q),xS({queryGeometry:ce,size:fe,transform:C,unwrappedTileID:R,getElevation:B,pitchAlignment:oe,pitchScale:te},b)}}class wS extends ip{}let SS;Ji("HeatmapBucket",wS,{omit:["layers"]});var ZL={get paint(){return SS=SS||new Eo({"heatmap-radius":new Un(Mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Un(Mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tn(Mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qf(Mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tn(Mt.paint_heatmap["heatmap-opacity"])})}};function bx(d,{width:l,height:u},m,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==l*u*m)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${l*u*m}`)}else b=new Uint8Array(l*u*m);return d.width=l,d.height=u,d.data=b,d}function kS(d,{width:l,height:u},m){if(l===d.width&&u===d.height)return;const b=bx({},{width:l,height:u},m);wx(d,b,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,l),height:Math.min(d.height,u)},m),d.width=l,d.height=u,d.data=b.data}function wx(d,l,u,m,b,C){if(b.width===0||b.height===0)return l;if(b.width>d.width||b.height>d.height||u.x>d.width-b.width||u.y>d.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>l.width||b.height>l.height||m.x>l.width-b.width||m.y>l.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const A=d.data,R=l.data;if(A===R)throw new Error("srcData equals dstData, so image is already copied");for(let B=0;B<b.height;B++){const $=((u.y+B)*d.width+u.x)*C,q=((m.y+B)*l.width+m.x)*C;for(let te=0;te<b.width*C;te++)R[q+te]=A[$+te]}return l}class zg{constructor(l,u){bx(this,l,1,u)}resize(l){kS(this,l,1)}clone(){return new zg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,u,m,b,C){wx(l,u,m,b,C,1)}}class nl{constructor(l,u){bx(this,l,4,u)}resize(l){kS(this,l,4)}replace(l,u){u?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new nl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,u,m,b,C){wx(l,u,m,b,C,4)}setPixel(l,u,m){const b=4*(l*this.width+u);this.data[b+0]=Math.round(255*m.r/m.a),this.data[b+1]=Math.round(255*m.g/m.a),this.data[b+2]=Math.round(255*m.b/m.a),this.data[b+3]=Math.round(255*m.a)}}function CS(d){const l={},u=d.resolution||256,m=d.clips?d.clips.length:1,b=d.image||new nl({width:u,height:m});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const C=(A,R,B)=>{l[d.evaluationKey]=B;const $=d.expression.evaluate(l);b.setPixel(A/4/u,R/4,$)};if(d.clips)for(let A=0,R=0;A<m;++A,R+=4*u)for(let B=0,$=0;B<u;B++,$+=4){const q=B/(u-1),{start:te,end:oe}=d.clips[A];C(R,$,te*(1-q)+oe*q)}else for(let A=0,R=0;A<u;A++,R+=4)C(0,R,A/(u-1));return b}Ji("AlphaImage",zg),Ji("RGBAImage",nl);const Sx="big-fb";class KL extends Cl{createBucket(l){return new wS(l)}constructor(l,u){super(l,ZL,u),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=CS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Sx)&&this.heatmapFbos.delete(Sx)}queryRadius(l){return rp("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:m,geometry:b,transform:C,pixelsToTileUnits:A,unwrappedTileID:R,getElevation:B}){return xS({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(u,m)*A,transform:C,unwrappedTileID:R,getElevation:B},b)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let AS;var JL={get paint(){return AS=AS||new Eo({"hillshade-illumination-direction":new Tn(Mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Tn(Mt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Tn(Mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tn(Mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tn(Mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tn(Mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tn(Mt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Tn(Mt.paint_hillshade["hillshade-method"])})}};class QL extends Cl{constructor(l,u){super(l,JL,u),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,m=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values;const C=Math.max(l.length,u.length,m.length,b.length);l=l.concat(Array(C-l.length).fill(l.at(-1))),u=u.concat(Array(C-u.length).fill(u.at(-1))),m=m.concat(Array(C-m.length).fill(m.at(-1))),b=b.concat(Array(C-b.length).fill(b.at(-1)));const A=u.map(Ti);return{directionRadians:l.map(Ti),altitudeRadians:A,shadowColor:b,highlightColor:m}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let TS;var eD={get paint(){return TS=TS||new Eo({"color-relief-opacity":new Tn(Mt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new qf(Mt["paint_color-relief"]["color-relief-color"])})}};class kx{constructor(l,u,m,b){this.context=l,this.format=m,this.texture=l.gl.createTexture(),this.update(u,b)}update(l,u,m){const{width:b,height:C}=l,A=!(this.size&&this.size[0]===b&&this.size[1]===C||m),{context:R}=this,{gl:B}=R;if(this.useMipmap=!!(u&&u.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!u||u.premultiply!==!1)),A)this.size=[b,C],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||qt(l)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,l):B.texImage2D(B.TEXTURE_2D,0,this.format,b,C,0,this.format,B.UNSIGNED_BYTE,l.data);else{const{x:$,y:q}=m||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||qt(l)?B.texSubImage2D(B.TEXTURE_2D,0,$,q,B.RGBA,B.UNSIGNED_BYTE,l):B.texSubImage2D(B.TEXTURE_2D,0,$,q,b,C,B.RGBA,B.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D),R.pixelStoreUnpackFlipY.setDefault(),R.pixelStoreUnpack.setDefault(),R.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,u,m){const{context:b}=this,{gl:C}=b;C.bindTexture(C.TEXTURE_2D,this.texture),m!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=C.LINEAR),l!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,l),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,m||l),this.filter=l),u!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,u),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class ES{constructor(l,u,m,b=1,C=1,A=1,R=0){if(this.uid=l,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Qi(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const B=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=C,this.blueFactor=A,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let $=0;$<B;$++)this.data[this._idx(-1,$)]=this.data[this._idx(0,$)],this.data[this._idx(B,$)]=this.data[this._idx(B-1,$)],this.data[this._idx($,-1)]=this.data[this._idx($,0)],this.data[this._idx($,B)]=this.data[this._idx($,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let $=0;$<B;$++)for(let q=0;q<B;q++){const te=this.get($,q);te>this.max&&(this.max=te),te<this.min&&(this.min=te)}}get(l,u){const m=new Uint8Array(this.data.buffer),b=4*this._idx(l,u);return this.unpack(m[b],m[b+1],m[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,u){if(l<-1||l>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${l}, y: ${u}, dim: ${this.dim}`);return(u+1)*this.stride+(l+1)}unpack(l,u,m){return l*this.redFactor+u*this.greenFactor+m*this.blueFactor-this.baseShift}pack(l){return MS(l,this.getUnpackVector())}getPixels(){return new nl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,u,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let b=u*this.dim,C=u*this.dim+this.dim,A=m*this.dim,R=m*this.dim+this.dim;switch(u){case-1:b=C-1;break;case 1:C=b+1}switch(m){case-1:A=R-1;break;case 1:R=A+1}const B=-u*this.dim,$=-m*this.dim;for(let q=A;q<R;q++)for(let te=b;te<C;te++)this.data[this._idx(te,q)]=l.data[this._idx(te+B,q+$)]}}function MS(d,l){const u=l[0],m=l[1],b=l[2],C=l[3],A=Math.min(u,m,b),R=Math.round((d+C)/A);return{r:Math.floor(R*A/u)%256,g:Math.floor(R*A/m)%256,b:Math.floor(R*A/b)%256}}Ji("DEMData",ES);class tD extends Cl{constructor(l,u){super(l,eD,u)}_createColorRamp(l){const u={elevationStops:[],colorStops:[]},m=this._transitionablePaint._values["color-relief-color"].value.expression;if(m instanceof mu&&m._styleExpression.expression instanceof ir){this.colorRampExpression=m;const A=m._styleExpression.expression;u.elevationStops=A.labels,u.colorStops=[];for(const R of u.elevationStops)u.colorStops.push(A.evaluate({globals:{elevation:R}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[yn.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=l)return u;const b={elevationStops:[],colorStops:[]},C=(u.elevationStops.length-1)/(l-1);for(let A=0;A<u.elevationStops.length-.5;A+=C)b.elevationStops.push(u.elevationStops[Math.round(A)]),b.colorStops.push(u.colorStops[Math.round(A)]);return Qi(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${l}, provided: ${u.elevationStops.length}`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,u,m){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const b=this._createColorRamp(u),C=new nl({width:b.colorStops.length,height:1}),A=new nl({width:b.colorStops.length,height:1});for(let R=0;R<b.elevationStops.length;R++){const B=MS(b.elevationStops[R],m);A.setPixel(0,R,new yn(B.r/255,B.g/255,B.b/255,1)),C.setPixel(0,R,b.colorStops[R])}return this.colorRampTextures={elevationTexture:new kx(l,A,l.gl.RGBA),colorTexture:new kx(l,C,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const iD=cs([{name:"a_pos",components:2,type:"Int16"}],4),{members:nD}=iD;function jy(d,l,u){const m=u.patternDependencies;let b=!1;for(const C of l){const A=C.paint.get(`${d}-pattern`);A.isConstant()||(b=!0);const R=A.constantOr(null);R&&(b=!0,m[R.to]=!0,m[R.from]=!0)}return b}function Cx(d,l,u,m,b){const{zoom:C}=m,A=b.patternDependencies;for(const R of l){const B=R.paint.get(`${d}-pattern`).value;if(B.kind!=="constant"){let $=B.evaluate({zoom:C-1},u,{},b.availableImages),q=B.evaluate({zoom:C},u,{},b.availableImages),te=B.evaluate({zoom:C+1},u,{},b.availableImages);$=$&&$.name?$.name:$,q=q&&q.name?q.name:q,te=te&&te.name?te.name:te,A[$]=!0,A[q]=!0,A[te]=!0,u.patterns[R.id]={min:$,mid:q,max:te}}}return u}function IS(d,l,u,m,b){let C;if(b===(function(A,R,B,$){let q=0;for(let te=R,oe=B-$;te<B;te+=$)q+=(A[oe]-A[te])*(A[te+1]+A[oe+1]),oe=te;return q})(d,l,u,m)>0)for(let A=l;A<u;A+=m)C=RS(A/m|0,d[A],d[A+1],C);else for(let A=u-m;A>=l;A-=m)C=RS(A/m|0,d[A],d[A+1],C);return C&&sp(C,C.next)&&(jg(C),C=C.next),C}function Vd(d,l){if(!d)return d;l||(l=d);let u,m=d;do if(u=!1,m.steiner||!sp(m,m.next)&&xs(m.prev,m,m.next)!==0)m=m.next;else{if(jg(m),m=l=m.prev,m===m.next)break;u=!0}while(u||m!==l);return l}function Fg(d,l,u,m,b,C,A){if(!d)return;!A&&C&&(function(B,$,q,te){let oe=B;do oe.z===0&&(oe.z=Ax(oe.x,oe.y,$,q,te)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==B);oe.prevZ.nextZ=null,oe.prevZ=null,(function(ce){let fe,ge=1;do{let ve,Ie=ce;ce=null;let Qe=null;for(fe=0;Ie;){fe++;let De=Ie,ze=0;for(let ot=0;ot<ge&&(ze++,De=De.nextZ,De);ot++);let it=ge;for(;ze>0||it>0&&De;)ze!==0&&(it===0||!De||Ie.z<=De.z)?(ve=Ie,Ie=Ie.nextZ,ze--):(ve=De,De=De.nextZ,it--),Qe?Qe.nextZ=ve:ce=ve,ve.prevZ=Qe,Qe=ve;Ie=De}Qe.nextZ=null,ge*=2}while(fe>1)})(oe)})(d,m,b,C);let R=d;for(;d.prev!==d.next;){const B=d.prev,$=d.next;if(C?rD(d,m,b,C):aD(d))l.push(B.i,d.i,$.i),jg(d),d=$.next,R=$.next;else if((d=$)===R){A?A===1?Fg(d=sD(Vd(d),l),l,u,m,b,C,2):A===2&&oD(d,l,u,m,b,C):Fg(Vd(d),l,u,m,b,C,1);break}}}function aD(d){const l=d.prev,u=d,m=d.next;if(xs(l,u,m)>=0)return!1;const b=l.x,C=u.x,A=m.x,R=l.y,B=u.y,$=m.y,q=Math.min(b,C,A),te=Math.min(R,B,$),oe=Math.max(b,C,A),ce=Math.max(R,B,$);let fe=m.next;for(;fe!==l;){if(fe.x>=q&&fe.x<=oe&&fe.y>=te&&fe.y<=ce&&Ng(b,R,C,B,A,$,fe.x,fe.y)&&xs(fe.prev,fe,fe.next)>=0)return!1;fe=fe.next}return!0}function rD(d,l,u,m){const b=d.prev,C=d,A=d.next;if(xs(b,C,A)>=0)return!1;const R=b.x,B=C.x,$=A.x,q=b.y,te=C.y,oe=A.y,ce=Math.min(R,B,$),fe=Math.min(q,te,oe),ge=Math.max(R,B,$),ve=Math.max(q,te,oe),Ie=Ax(ce,fe,l,u,m),Qe=Ax(ge,ve,l,u,m);let De=d.prevZ,ze=d.nextZ;for(;De&&De.z>=Ie&&ze&&ze.z<=Qe;){if(De.x>=ce&&De.x<=ge&&De.y>=fe&&De.y<=ve&&De!==b&&De!==A&&Ng(R,q,B,te,$,oe,De.x,De.y)&&xs(De.prev,De,De.next)>=0||(De=De.prevZ,ze.x>=ce&&ze.x<=ge&&ze.y>=fe&&ze.y<=ve&&ze!==b&&ze!==A&&Ng(R,q,B,te,$,oe,ze.x,ze.y)&&xs(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;De&&De.z>=Ie;){if(De.x>=ce&&De.x<=ge&&De.y>=fe&&De.y<=ve&&De!==b&&De!==A&&Ng(R,q,B,te,$,oe,De.x,De.y)&&xs(De.prev,De,De.next)>=0)return!1;De=De.prevZ}for(;ze&&ze.z<=Qe;){if(ze.x>=ce&&ze.x<=ge&&ze.y>=fe&&ze.y<=ve&&ze!==b&&ze!==A&&Ng(R,q,B,te,$,oe,ze.x,ze.y)&&xs(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function sD(d,l){let u=d;do{const m=u.prev,b=u.next.next;!sp(m,b)&&LS(m,u,u.next,b)&&Bg(m,b)&&Bg(b,m)&&(l.push(m.i,u.i,b.i),jg(u),jg(u.next),u=d=b),u=u.next}while(u!==d);return Vd(u)}function oD(d,l,u,m,b,C){let A=d;do{let R=A.next.next;for(;R!==A.prev;){if(A.i!==R.i&&dD(A,R)){let B=DS(A,R);return A=Vd(A,A.next),B=Vd(B,B.next),Fg(A,l,u,m,b,C,0),void Fg(B,l,u,m,b,C,0)}R=R.next}A=A.next}while(A!==d)}function lD(d,l){let u=d.x-l.x;return u===0&&(u=d.y-l.y,u===0)&&(u=(d.next.y-d.y)/(d.next.x-d.x)-(l.next.y-l.y)/(l.next.x-l.x)),u}function cD(d,l){const u=(function(b,C){let A=C;const R=b.x,B=b.y;let $,q=-1/0;if(sp(b,A))return A;do{if(sp(b,A.next))return A.next;if(B<=A.y&&B>=A.next.y&&A.next.y!==A.y){const ge=A.x+(B-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(ge<=R&&ge>q&&(q=ge,$=A.x<A.next.x?A:A.next,ge===R))return $}A=A.next}while(A!==C);if(!$)return null;const te=$,oe=$.x,ce=$.y;let fe=1/0;A=$;do{if(R>=A.x&&A.x>=oe&&R!==A.x&&PS(B<ce?R:q,B,oe,ce,B<ce?q:R,B,A.x,A.y)){const ge=Math.abs(B-A.y)/(R-A.x);Bg(A,b)&&(ge<fe||ge===fe&&(A.x>$.x||A.x===$.x&&uD($,A)))&&($=A,fe=ge)}A=A.next}while(A!==te);return $})(d,l);if(!u)return l;const m=DS(u,d);return Vd(m,m.next),Vd(u,u.next)}function uD(d,l){return xs(d.prev,d,l.prev)<0&&xs(l.next,d,d.next)<0}function Ax(d,l,u,m,b){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-u)*b|0)|d<<8))|d<<4))|d<<2))|d<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function hD(d){let l=d,u=d;do(l.x<u.x||l.x===u.x&&l.y<u.y)&&(u=l),l=l.next;while(l!==d);return u}function PS(d,l,u,m,b,C,A,R){return(b-A)*(l-R)>=(d-A)*(C-R)&&(d-A)*(m-R)>=(u-A)*(l-R)&&(u-A)*(C-R)>=(b-A)*(m-R)}function Ng(d,l,u,m,b,C,A,R){return!(d===A&&l===R)&&PS(d,l,u,m,b,C,A,R)}function dD(d,l){return d.next.i!==l.i&&d.prev.i!==l.i&&!(function(u,m){let b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==m.i&&b.next.i!==m.i&&LS(b,b.next,u,m))return!0;b=b.next}while(b!==u);return!1})(d,l)&&(Bg(d,l)&&Bg(l,d)&&(function(u,m){let b=u,C=!1;const A=(u.x+m.x)/2,R=(u.y+m.y)/2;do b.y>R!=b.next.y>R&&b.next.y!==b.y&&A<(b.next.x-b.x)*(R-b.y)/(b.next.y-b.y)+b.x&&(C=!C),b=b.next;while(b!==u);return C})(d,l)&&(xs(d.prev,d,l.prev)||xs(d,l.prev,l))||sp(d,l)&&xs(d.prev,d,d.next)>0&&xs(l.prev,l,l.next)>0)}function xs(d,l,u){return(l.y-d.y)*(u.x-l.x)-(l.x-d.x)*(u.y-l.y)}function sp(d,l){return d.x===l.x&&d.y===l.y}function LS(d,l,u,m){const b=Hy(xs(d,l,u)),C=Hy(xs(d,l,m)),A=Hy(xs(u,m,d)),R=Hy(xs(u,m,l));return b!==C&&A!==R||!(b!==0||!Vy(d,u,l))||!(C!==0||!Vy(d,m,l))||!(A!==0||!Vy(u,d,m))||!(R!==0||!Vy(u,l,m))}function Vy(d,l,u){return l.x<=Math.max(d.x,u.x)&&l.x>=Math.min(d.x,u.x)&&l.y<=Math.max(d.y,u.y)&&l.y>=Math.min(d.y,u.y)}function Hy(d){return d>0?1:d<0?-1:0}function Bg(d,l){return xs(d.prev,d,d.next)<0?xs(d,l,d.next)>=0&&xs(d,d.prev,l)>=0:xs(d,l,d.prev)<0||xs(d,d.next,l)<0}function DS(d,l){const u=Tx(d.i,d.x,d.y),m=Tx(l.i,l.x,l.y),b=d.next,C=l.prev;return d.next=l,l.prev=d,u.next=b,b.prev=u,m.next=u,u.prev=m,C.next=m,m.prev=C,m}function RS(d,l,u,m){const b=Tx(d,l,u);return m?(b.next=m.next,b.prev=m,m.next.prev=b,m.next=b):(b.prev=b,b.next=b),b}function jg(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Tx(d,l,u){return{i:d,x:l,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class op{constructor(l,u){if(u>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=u}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class Uy{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}Uy.noSubdivision=new Uy({fill:new op(0,0),line:new op(0,0),tile:new op(0,0),stencil:new op(0,0),circle:1}),Ji("SubdivisionGranularityExpression",op),Ji("SubdivisionGranularitySetting",Uy);const lp=-32768,Vg=32767;class fD{constructor(l,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=Dt/l,this._canonical=u}_getKey(l,u){return(l+=32768)<<16|u+32768}_vertexToIndex(l,u){if(l<-32768||u<-32768||l>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const m=0|Math.round(l),b=0|Math.round(u),C=this._getKey(m,b);if(this._vertexDictionary.has(C))return this._vertexDictionary.get(C);const A=this._vertexBuffer.length/2;return this._vertexDictionary.set(C,A),this._vertexBuffer.push(m,b),A}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(b,C){const A=[];for(let R=0;R<C.length;R+=3){const B=C[R],$=C[R+1],q=C[R+2],te=b[2*B],oe=b[2*B+1];(b[2*$]-te)*(b[2*q+1]-oe)-(b[2*$+1]-oe)*(b[2*q]-te)>0?(A.push(B),A.push(q),A.push($)):(A.push(B),A.push($),A.push(q))}return A})(this._vertexBuffer,l);const u=[],m=l.length;for(let b=0;b<m;b+=3){const C=[l[b+0],l[b+1],l[b+2]],A=[this._vertexBuffer[2*l[b+0]+0],this._vertexBuffer[2*l[b+0]+1],this._vertexBuffer[2*l[b+1]+0],this._vertexBuffer[2*l[b+1]+1],this._vertexBuffer[2*l[b+2]+0],this._vertexBuffer[2*l[b+2]+1]];let R=1/0,B=1/0,$=-1/0,q=-1/0;for(let ge=0;ge<3;ge++){const ve=A[2*ge],Ie=A[2*ge+1];R=Math.min(R,ve),$=Math.max($,ve),B=Math.min(B,Ie),q=Math.max(q,Ie)}if(R===$||B===q)continue;const te=Math.floor(R/this._granularityCellSize),oe=Math.ceil($/this._granularityCellSize),ce=Math.floor(B/this._granularityCellSize),fe=Math.ceil(q/this._granularityCellSize);if(te!==oe||ce!==fe)for(let ge=ce;ge<fe;ge++){const ve=this._scanlineGenerateVertexRingForCellRow(ge,A,C);pD(this._vertexBuffer,ve,u)}else u.push(...C)}return u}_scanlineGenerateVertexRingForCellRow(l,u,m){const b=l*this._granularityCellSize,C=b+this._granularityCellSize,A=[];for(let R=0;R<3;R++){const B=u[2*R],$=u[2*R+1],q=u[2*(R+1)%6],te=u[(2*(R+1)+1)%6],oe=u[2*(R+2)%6],ce=u[(2*(R+2)+1)%6],fe=q-B,ge=te-$,ve=fe===0,Ie=ge===0,Qe=(b-$)/ge,De=(C-$)/ge,ze=Math.min(Qe,De),it=Math.max(Qe,De);if(!Ie&&(ze>=1||it<=0)||Ie&&($<b||$>C)){te>=b&&te<=C&&A.push(m[(R+1)%3]);continue}!Ie&&ze>0&&A.push(this._vertexToIndex(B+fe*ze,$+ge*ze));const ot=B+fe*Math.max(ze,0),Ot=B+fe*Math.min(it,1);ve||this._generateIntraEdgeVertices(A,B,$,q,te,ot,Ot),!Ie&&it<1&&A.push(this._vertexToIndex(B+fe*it,$+ge*it)),(Ie||te>=b&&te<=C)&&A.push(m[(R+1)%3]),!Ie&&(te<=b||te>=C)&&this._generateInterEdgeVertices(A,B,$,q,te,oe,ce,Ot,b,C)}return A}_generateIntraEdgeVertices(l,u,m,b,C,A,R){const B=b-u,$=C-m,q=$===0,te=q?Math.min(u,b):Math.min(A,R),oe=q?Math.max(u,b):Math.max(A,R),ce=Math.floor(te/this._granularityCellSize)+1,fe=Math.ceil(oe/this._granularityCellSize)-1;if(q?u<b:A<R)for(let ge=ce;ge<=fe;ge++){const ve=ge*this._granularityCellSize;l.push(this._vertexToIndex(ve,m+$*(ve-u)/B))}else for(let ge=fe;ge>=ce;ge--){const ve=ge*this._granularityCellSize;l.push(this._vertexToIndex(ve,m+$*(ve-u)/B))}}_generateInterEdgeVertices(l,u,m,b,C,A,R,B,$,q){const te=C-m,oe=A-b,ce=R-C,fe=($-C)/ce,ge=(q-C)/ce,ve=Math.min(fe,ge),Ie=Math.max(fe,ge),Qe=b+oe*ve;let De=Math.floor(Math.min(Qe,B)/this._granularityCellSize)+1,ze=Math.ceil(Math.max(Qe,B)/this._granularityCellSize)-1,it=B<Qe;const ot=ce===0;if(ot&&(R===$||R===q))return;if(ot||ve>=1||Ie<=0){const ri=m-R,Qt=A+(u-A)*Math.min(($-R)/ri,(q-R)/ri);De=Math.floor(Math.min(Qt,B)/this._granularityCellSize)+1,ze=Math.ceil(Math.max(Qt,B)/this._granularityCellSize)-1,it=B<Qt}const Ot=te>0?q:$;if(it)for(let ri=De;ri<=ze;ri++)l.push(this._vertexToIndex(ri*this._granularityCellSize,Ot));else for(let ri=ze;ri>=De;ri--)l.push(this._vertexToIndex(ri*this._granularityCellSize,Ot))}_generateOutline(l){const u=[];for(const m of l){const b=Hd(m,this._granularity,!0),C=this._pointArrayToIndices(b),A=[];for(let R=1;R<C.length;R++)A.push(C[R-1]),A.push(C[R]);u.push(A)}return u}_handlePoles(l){let u=!1,m=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(m=!0)),(u||m)&&this._fillPoles(l,u,m)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let u=0;u<l.length;u+=2){const m=l[u+1];m===lp&&(l[u+1]=-32767),m===Vg&&(l[u+1]=32766)}}_generatePoleQuad(l,u,m,b,C,A){b>C!=(A===lp)?(l.push(u),l.push(m),l.push(this._vertexToIndex(b,A)),l.push(m),l.push(this._vertexToIndex(C,A)),l.push(this._vertexToIndex(b,A))):(l.push(m),l.push(u),l.push(this._vertexToIndex(b,A)),l.push(this._vertexToIndex(C,A)),l.push(m),l.push(this._vertexToIndex(b,A)))}_fillPoles(l,u,m){const b=this._vertexBuffer,C=Dt,A=l.length;for(let R=2;R<A;R+=3){const B=l[R-2],$=l[R-1],q=l[R],te=b[2*B],oe=b[2*B+1],ce=b[2*$],fe=b[2*$+1],ge=b[2*q],ve=b[2*q+1];u&&(oe===0&&fe===0&&this._generatePoleQuad(l,B,$,te,ce,lp),fe===0&&ve===0&&this._generatePoleQuad(l,$,q,ce,ge,lp),ve===0&&oe===0&&this._generatePoleQuad(l,q,B,ge,te,lp)),m&&(oe===C&&fe===C&&this._generatePoleQuad(l,B,$,te,ce,Vg),fe===C&&ve===C&&this._generatePoleQuad(l,$,q,ce,ge,Vg),ve===C&&oe===C&&this._generatePoleQuad(l,q,B,ge,te,Vg))}}_initializeVertices(l){for(let u=0;u<l.length;u+=2)this._vertexToIndex(l[u],l[u+1])}subdividePolygonInternal(l,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:m,holeIndices:b}=(function(R){const B=[],$=[];for(const q of R)if(q.length!==0){q!==R[0]&&B.push($.length/2);for(let te=0;te<q.length;te++)$.push(q[te].x),$.push(q[te].y)}return{flattened:$,holeIndices:B}})(l);let C;this._initializeVertices(m);try{const R=(function($,q,te=2){const oe=q&&q.length,ce=oe?q[0]*te:$.length;let fe=IS($,0,ce,te,!0);const ge=[];if(!fe||fe.next===fe.prev)return ge;let ve,Ie,Qe;if(oe&&(fe=(function(De,ze,it,ot){const Ot=[];for(let ri=0,Qt=ze.length;ri<Qt;ri++){const di=IS(De,ze[ri]*ot,ri<Qt-1?ze[ri+1]*ot:De.length,ot,!1);di===di.next&&(di.steiner=!0),Ot.push(hD(di))}Ot.sort(lD);for(let ri=0;ri<Ot.length;ri++)it=cD(Ot[ri],it);return it})($,q,fe,te)),$.length>80*te){ve=$[0],Ie=$[1];let De=ve,ze=Ie;for(let it=te;it<ce;it+=te){const ot=$[it],Ot=$[it+1];ot<ve&&(ve=ot),Ot<Ie&&(Ie=Ot),ot>De&&(De=ot),Ot>ze&&(ze=Ot)}Qe=Math.max(De-ve,ze-Ie),Qe=Qe!==0?32767/Qe:0}return Fg(fe,ge,te,ve,Ie,Qe,0),ge})(m,b),B=this._convertIndices(m,R);C=this._subdivideTrianglesScanline(B)}catch(R){console.error(R)}let A=[];return u&&(A=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(C),{verticesFlattened:this._vertexBuffer,indicesTriangles:C,indicesLineList:A}}_convertIndices(l,u){const m=[];for(let b=0;b<u.length;b++)m.push(this._vertexToIndex(l[2*u[b]],l[2*u[b]+1]));return m}_pointArrayToIndices(l){const u=[];for(let m=0;m<l.length;m++){const b=l[m];u.push(this._vertexToIndex(b.x,b.y))}return u}}function OS(d,l,u,m=!0){return new fD(u,l).subdividePolygonInternal(d,m)}function Hd(d,l,u=!1){if(!d||d.length<1)return[];if(d.length<2)return[];const m=d[0],b=d[d.length-1],C=u&&(m.x!==b.x||m.y!==b.y);if(l<2)return C?[...d,d[0]]:[...d];const A=Math.floor(Dt/l),R=[];R.push(new h(d[0].x,d[0].y));const B=d.length,$=C?B:B-1;for(let q=0;q<$;q++){const te=d[q],oe=q<B-1?d[q+1]:d[0],ce=te.x,fe=te.y,ge=oe.x,ve=oe.y,Ie=ce!==ge,Qe=fe!==ve;if(!Ie&&!Qe)continue;const De=ge-ce,ze=ve-fe,it=Math.abs(De),ot=Math.abs(ze);let Ot=ce,ri=fe;for(;;){const di=De>0?(Math.floor(Ot/A)+1)*A:(Math.ceil(Ot/A)-1)*A,Ni=ze>0?(Math.floor(ri/A)+1)*A:(Math.ceil(ri/A)-1)*A,gi=Math.abs(Ot-di),ti=Math.abs(ri-Ni),$t=Math.abs(Ot-ge),tn=Math.abs(ri-ve),qi=Ie?gi/it:Number.POSITIVE_INFINITY,dn=Qe?ti/ot:Number.POSITIVE_INFINITY;if(($t<=gi||!Ie)&&(tn<=ti||!Qe))break;if(qi<dn&&Ie||!Qe){Ot=di,ri+=ze*qi;const Gi=new h(Ot,Math.round(ri));R[R.length-1].x===Gi.x&&R[R.length-1].y===Gi.y||R.push(Gi)}else{Ot+=De*dn,ri=Ni;const Gi=new h(Math.round(Ot),ri);R[R.length-1].x===Gi.x&&R[R.length-1].y===Gi.y||R.push(Gi)}}const Qt=new h(ge,ve);R[R.length-1].x===Qt.x&&R[R.length-1].y===Qt.y||R.push(Qt)}return R}function pD(d,l,u){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let m=0,b=d[2*l[0]];for(let B=1;B<l.length;B++){const $=d[2*l[B]];$<b&&(b=$,m=B)}const C=l.length;let A=m,R=(A+1)%C;for(;;){const B=A-1>=0?A-1:C-1,$=(R+1)%C,q=d[2*l[B]],te=d[2*l[$]],oe=d[2*l[A]],ce=d[2*l[A]+1],fe=d[2*l[R]+1];let ge=!1;if(q<te)ge=!0;else if(q>te)ge=!1;else{const ve=fe-ce,Ie=-(d[2*l[R]]-oe),Qe=ce<fe?1:-1;((q-oe)*ve+(d[2*l[B]+1]-ce)*Ie)*Qe>((te-oe)*ve+(d[2*l[$]+1]-ce)*Ie)*Qe&&(ge=!0)}if(ge){const ve=l[B],Ie=l[A],Qe=l[R];ve!==Ie&&ve!==Qe&&Ie!==Qe&&u.push(Qe,Ie,ve),A--,A<0&&(A=C-1)}else{const ve=l[$],Ie=l[A],Qe=l[R];ve!==Ie&&ve!==Qe&&Ie!==Qe&&u.push(Qe,Ie,ve),R++,R>=C&&(R=0)}if(B===$)break}}function zS(d,l,u,m,b,C,A,R,B){const $=b.length/2,q=A&&R&&B;if($<ji.MAX_VERTEX_ARRAY_LENGTH){const te=l.prepareSegment($,u,m),oe=te.vertexLength;for(let ge=0;ge<C.length;ge+=3)m.emplaceBack(oe+C[ge],oe+C[ge+1],oe+C[ge+2]);let ce,fe;te.vertexLength+=$,te.primitiveLength+=C.length/3,q&&(fe=A.prepareSegment($,u,R),ce=fe.vertexLength,fe.vertexLength+=$);for(let ge=0;ge<b.length;ge+=2)d(b[ge],b[ge+1]);if(q)for(let ge=0;ge<B.length;ge++){const ve=B[ge];for(let Ie=1;Ie<ve.length;Ie+=2)R.emplaceBack(ce+ve[Ie-1],ce+ve[Ie]);fe.primitiveLength+=ve.length/2}}else(function(te,oe,ce,fe,ge,ve){const Ie=[];for(let ot=0;ot<fe.length/2;ot++)Ie.push(-1);const Qe={count:0};let De=0,ze=te.getOrCreateLatestSegment(oe,ce),it=ze.vertexLength;for(let ot=2;ot<ge.length;ot+=3){const Ot=ge[ot-2],ri=ge[ot-1],Qt=ge[ot];let di=Ie[Ot]<De,Ni=Ie[ri]<De,gi=Ie[Qt]<De;ze.vertexLength+((di?1:0)+(Ni?1:0)+(gi?1:0))>ji.MAX_VERTEX_ARRAY_LENGTH&&(ze=te.createNewSegment(oe,ce),De=Qe.count,di=!0,Ni=!0,gi=!0,it=0);const ti=Hg(Ie,fe,ve,Qe,Ot,di,ze),$t=Hg(Ie,fe,ve,Qe,ri,Ni,ze),tn=Hg(Ie,fe,ve,Qe,Qt,gi,ze);ce.emplaceBack(it+ti-De,it+$t-De,it+tn-De),ze.primitiveLength++}})(l,u,m,b,C,d),q&&(function(te,oe,ce,fe,ge,ve){const Ie=[];for(let ot=0;ot<fe.length/2;ot++)Ie.push(-1);const Qe={count:0};let De=0,ze=te.getOrCreateLatestSegment(oe,ce),it=ze.vertexLength;for(let ot=0;ot<ge.length;ot++){const Ot=ge[ot];for(let ri=1;ri<ge[ot].length;ri+=2){const Qt=Ot[ri-1],di=Ot[ri];let Ni=Ie[Qt]<De,gi=Ie[di]<De;ze.vertexLength+((Ni?1:0)+(gi?1:0))>ji.MAX_VERTEX_ARRAY_LENGTH&&(ze=te.createNewSegment(oe,ce),De=Qe.count,Ni=!0,gi=!0,it=0);const ti=Hg(Ie,fe,ve,Qe,Qt,Ni,ze),$t=Hg(Ie,fe,ve,Qe,di,gi,ze);ce.emplaceBack(it+ti-De,it+$t-De),ze.primitiveLength++}}})(A,u,R,b,B,d),l.forceNewSegmentOnNextPrepare(),A?.forceNewSegmentOnNextPrepare()}function Hg(d,l,u,m,b,C,A){if(C){const R=m.count;return u(l[2*b],l[2*b+1]),d[b]=m.count,m.count++,A.vertexLength++,R}return d[b]}class Ex{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new je,this.indexArray=new Vt,this.indexArray2=new Mi,this.programConfigurations=new dh(l.layers,l.zoom),this.segments=new ji,this.segments2=new ji,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(l,u,m){this.hasDependencies=jy("fill",this.layers,u);const b=this.layers[0].layout.get("fill-sort-key"),C=!b.isConstant(),A=[];for(const{feature:R,id:B,index:$,sourceLayerIndex:q}of l){const te=this.layers[0]._featureFilter.needGeometry,oe=Pu(R,te);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),oe,m))continue;const ce=C?b.evaluate(oe,{},m,u.availableImages):void 0,fe={id:B,properties:R.properties,type:R.type,sourceLayerIndex:q,index:$,geometry:te?oe.geometry:Iu(R),patterns:{},sortKey:ce};A.push(fe)}C&&A.sort(((R,B)=>R.sortKey-B.sortKey));for(const R of A){const{geometry:B,index:$,sourceLayerIndex:q}=R;if(this.hasDependencies){const te=Cx("fill",this.layers,R,{zoom:this.zoom},u);this.patternFeatures.push(te)}else this.addFeature(R,B,$,m,{},u.subdivisionGranularity);u.featureIndex.insert(l[$].feature,B,$,q,this.index)}}update(l,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:m})}addFeatures(l,u,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,m,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,nD),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,u,m,b,C,A){for(const R of Vl(u,500)){const B=OS(R,b,A.fill.getGranularityForZoomLevel(b.z)),$=this.layoutVertexArray;zS(((q,te)=>{$.emplaceBack(q,te)}),this.segments,this.layoutVertexArray,this.indexArray,B.verticesFlattened,B.indicesTriangles,this.segments2,this.indexArray2,B.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{imagePositions:C,canonical:b})}}let FS,NS;Ji("FillBucket",Ex,{omit:["layers","patternFeatures"]});var gD={get paint(){return NS=NS||new Eo({"fill-antialias":new Tn(Mt.paint_fill["fill-antialias"]),"fill-opacity":new Un(Mt.paint_fill["fill-opacity"]),"fill-color":new Un(Mt.paint_fill["fill-color"]),"fill-outline-color":new Un(Mt.paint_fill["fill-outline-color"]),"fill-translate":new Tn(Mt.paint_fill["fill-translate"]),"fill-translate-anchor":new Tn(Mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Dd(Mt.paint_fill["fill-pattern"])})},get layout(){return FS=FS||new Eo({"fill-sort-key":new Un(Mt.layout_fill["fill-sort-key"])})}};class mD extends Cl{constructor(l,u){super(l,gD,u)}recalculate(l,u){super.recalculate(l,u);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Ex(l)}queryRadius(){return Ny(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:u,transform:m,pixelsToTileUnits:b}){return mS(By(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-m.bearingInRadians,b),u)}isTileClipped(){return!0}}const yD=cs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),_D=cs([{name:"a_centroid",components:2,type:"Int16"}],4),{members:xD}=yD;class Ug{constructor(l,u,m,b,C){this.properties={},this.extent=m,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=b,this._values=C,l.readFields(vD,this,u)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const u=l.readVarint()+l.pos,m=[];let b,C=1,A=0,R=0,B=0;for(;l.pos<u;){if(A<=0){const $=l.readVarint();C=7&$,A=$>>3}if(A--,C===1||C===2)R+=l.readSVarint(),B+=l.readSVarint(),C===1&&(b&&m.push(b),b=[]),b&&b.push(new h(R,B));else{if(C!==7)throw new Error(`unknown command ${C}`);b&&b.push(b[0].clone())}}return b&&m.push(b),m}bbox(){const l=this._pbf;l.pos=this._geometry;const u=l.readVarint()+l.pos;let m=1,b=0,C=0,A=0,R=1/0,B=-1/0,$=1/0,q=-1/0;for(;l.pos<u;){if(b<=0){const te=l.readVarint();m=7&te,b=te>>3}if(b--,m===1||m===2)C+=l.readSVarint(),A+=l.readSVarint(),C<R&&(R=C),C>B&&(B=C),A<$&&($=A),A>q&&(q=A);else if(m!==7)throw new Error(`unknown command ${m}`)}return[R,$,B,q]}toGeoJSON(l,u,m){const b=this.extent*Math.pow(2,m),C=this.extent*l,A=this.extent*u,R=this.loadGeometry();function B(oe){return[360*(oe.x+C)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(oe.y+A)/b)*Math.PI))-90]}function $(oe){return oe.map(B)}let q;if(this.type===1){const oe=[];for(const fe of R)oe.push(fe[0]);const ce=$(oe);q=oe.length===1?{type:"Point",coordinates:ce[0]}:{type:"MultiPoint",coordinates:ce}}else if(this.type===2){const oe=R.map($);q=oe.length===1?{type:"LineString",coordinates:oe[0]}:{type:"MultiLineString",coordinates:oe}}else{if(this.type!==3)throw new Error("unknown feature type");{const oe=BS(R),ce=[];for(const fe of oe)ce.push(fe.map($));q=ce.length===1?{type:"Polygon",coordinates:ce[0]}:{type:"MultiPolygon",coordinates:ce}}}const te={type:"Feature",geometry:q,properties:this.properties};return this.id!=null&&(te.id=this.id),te}}function vD(d,l,u){d===1?l.id=u.readVarint():d===2?(function(m,b){const C=m.readVarint()+m.pos;for(;m.pos<C;){const A=b._keys[m.readVarint()],R=b._values[m.readVarint()];b.properties[A]=R}})(u,l):d===3?l.type=u.readVarint():d===4&&(l._geometry=u.pos)}function BS(d){const l=d.length;if(l<=1)return[d];const u=[];let m,b;for(let C=0;C<l;C++){const A=bD(d[C]);A!==0&&(b===void 0&&(b=A<0),b===A<0?(m&&u.push(m),m=[d[C]]):m&&m.push(d[C]))}return m&&u.push(m),u}function bD(d){let l=0;for(let u,m,b=0,C=d.length,A=C-1;b<C;A=b++)u=d[b],m=d[A],l+=(m.x-u.x)*(u.y+m.y);return l}Ug.types=["Unknown","Point","LineString","Polygon"];class wD{constructor(l,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(SD,this,u),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const u=this._pbf.readVarint()+this._pbf.pos;return new Ug(this._pbf,u,this.extent,this._keys,this._values)}}function SD(d,l,u){d===15?l.version=u.readVarint():d===1?l.name=u.readString():d===5?l.extent=u.readVarint():d===2?l._features.push(u.pos):d===3?l._keys.push(u.readString()):d===4&&l._values.push((function(m){let b=null;const C=m.readVarint()+m.pos;for(;m.pos<C;){const A=m.readVarint()>>3;b=A===1?m.readString():A===2?m.readFloat():A===3?m.readDouble():A===4?m.readVarint64():A===5?m.readVarint():A===6?m.readSVarint():A===7?m.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b})(u))}class jS{constructor(l,u){this.layers=l.readFields(kD,{},u)}}function kD(d,l,u){if(d===3){const m=new wD(u,u.readVarint()+u.pos);m.length&&(l[m.name]=m)}}const Mx=Math.pow(2,13);function $g(d,l,u,m,b,C,A,R){d.emplaceBack(l,u,2*Math.floor(m*Mx)+A,b*Mx*2,C*Mx*2,Math.round(R))}class Ix{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new et,this.centroidVertexArray=new Ne,this.indexArray=new Vt,this.programConfigurations=new dh(l.layers,l.zoom),this.segments=new ji,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(l,u,m){this.features=[],this.hasDependencies=jy("fill-extrusion",this.layers,u);for(const{feature:b,id:C,index:A,sourceLayerIndex:R}of l){const B=this.layers[0]._featureFilter.needGeometry,$=Pu(b,B);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),$,m))continue;const q={id:C,sourceLayerIndex:R,index:A,geometry:B?$.geometry:Iu(b),properties:b.properties,type:b.type,patterns:{}};this.hasDependencies?this.features.push(Cx("fill-extrusion",this.layers,q,{zoom:this.zoom},u)):this.addFeature(q,q.geometry,A,m,{},u.subdivisionGranularity),u.featureIndex.insert(b,q.geometry,A,R,this.index,!0)}}addFeatures(l,u,m){for(const b of this.features){const{geometry:C}=b;this.addFeature(b,C,b.index,u,m,l.subdivisionGranularity)}}update(l,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:m})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,xD),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,_D.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,u,m,b,C,A){for(const R of Vl(u,500)){const B={x:0,y:0,sampleCount:0},$=this.layoutVertexArray.length;this.processPolygon(B,b,l,R,A);const q=this.layoutVertexArray.length-$,te=Math.floor(B.x/B.sampleCount),oe=Math.floor(B.y/B.sampleCount);for(let ce=0;ce<q;ce++)this.centroidVertexArray.emplaceBack(te,oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{imagePositions:C,canonical:b})}processPolygon(l,u,m,b,C){if(b.length<1||VS(b[0]))return;for(const te of b)te.length!==0&&CD(l,te);const A={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},R=C.fill.getGranularityForZoomLevel(u.z),B=Ug.types[m.type]==="Polygon";for(const te of b){if(te.length===0||VS(te))continue;const oe=Hd(te,R,B);this._generateSideFaces(oe,A)}if(!B)return;const $=OS(b,u,R,!1),q=this.layoutVertexArray;zS(((te,oe)=>{$g(q,te,oe,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,$.verticesFlattened,$.indicesTriangles)}_generateSideFaces(l,u){let m=0;for(let b=1;b<l.length;b++){const C=l[b],A=l[b-1];if(AD(C,A))continue;u.segment.vertexLength+4>ji.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const R=C.sub(A)._perp()._unit(),B=A.dist(C);m+B>32768&&(m=0),$g(this.layoutVertexArray,C.x,C.y,R.x,R.y,0,0,m),$g(this.layoutVertexArray,C.x,C.y,R.x,R.y,0,1,m),m+=B,$g(this.layoutVertexArray,A.x,A.y,R.x,R.y,0,0,m),$g(this.layoutVertexArray,A.x,A.y,R.x,R.y,0,1,m);const $=u.segment.vertexLength;this.indexArray.emplaceBack($,$+2,$+1),this.indexArray.emplaceBack($+1,$+2,$+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function CD(d,l){for(let u=0;u<l.length;u++){const m=l[u];u===l.length-1&&l[0].x===m.x&&l[0].y===m.y||(d.x+=m.x,d.y+=m.y,d.sampleCount++)}}function AD(d,l){return d.x===l.x&&(d.x<0||d.x>Dt)||d.y===l.y&&(d.y<0||d.y>Dt)}function VS(d){return d.every((l=>l.x<0))||d.every((l=>l.x>Dt))||d.every((l=>l.y<0))||d.every((l=>l.y>Dt))}let HS;Ji("FillExtrusionBucket",Ix,{omit:["layers","features"]});var TD={get paint(){return HS=HS||new Eo({"fill-extrusion-opacity":new Tn(Mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Un(Mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tn(Mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tn(Mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Dd(Mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Un(Mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Un(Mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tn(Mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ED extends Cl{constructor(l,u){super(l,TD,u)}createBucket(l){return new Ix(l)}queryRadius(){return Ny(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:m,geometry:b,transform:C,pixelsToTileUnits:A,pixelPosMatrix:R}){const B=By(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-C.bearingInRadians,A),$=this.paint.get("fill-extrusion-height").evaluate(u,m),q=this.paint.get("fill-extrusion-base").evaluate(u,m),te=(function(ce,fe){const ge=[];for(const ve of ce){const Ie=[ve.x,ve.y,0,1];We(Ie,Ie,fe),ge.push(new h(Ie[0]/Ie[3],Ie[1]/Ie[3]))}return ge})(B,R),oe=(function(ce,fe,ge,ve){const Ie=[],Qe=[],De=ve[8]*fe,ze=ve[9]*fe,it=ve[10]*fe,ot=ve[11]*fe,Ot=ve[8]*ge,ri=ve[9]*ge,Qt=ve[10]*ge,di=ve[11]*ge;for(const Ni of ce){const gi=[],ti=[];for(const $t of Ni){const tn=$t.x,qi=$t.y,dn=ve[0]*tn+ve[4]*qi+ve[12],Gi=ve[1]*tn+ve[5]*qi+ve[13],Rn=ve[2]*tn+ve[6]*qi+ve[14],La=ve[3]*tn+ve[7]*qi+ve[15],xa=Rn+it,Br=La+ot,yo=dn+Ot,Es=Gi+ri,jr=Rn+Qt,Dr=La+di,Xa=new h((dn+De)/Br,(Gi+ze)/Br);Xa.z=xa/Br,gi.push(Xa);const is=new h(yo/Dr,Es/Dr);is.z=jr/Dr,ti.push(is)}Ie.push(gi),Qe.push(ti)}return[Ie,Qe]})(b,q,$,R);return(function(ce,fe,ge){let ve=1/0;mS(ge,fe)&&(ve=US(ge,fe[0]));for(let Ie=0;Ie<fe.length;Ie++){const Qe=fe[Ie],De=ce[Ie];for(let ze=0;ze<Qe.length-1;ze++){const it=Qe[ze],ot=[it,Qe[ze+1],De[ze+1],De[ze],it];np(ge,ot)&&(ve=Math.min(ve,US(ge,ot)))}}return ve!==1/0&&ve})(oe[0],oe[1],te)}}function Gg(d,l){return d.x*l.x+d.y*l.y}function US(d,l){if(d.length===1){let u=0;const m=l[u++];let b;for(;!b||m.equals(b);)if(b=l[u++],!b)return 1/0;for(;u<l.length;u++){const C=l[u],A=d[0],R=b.sub(m),B=C.sub(m),$=A.sub(m),q=Gg(R,R),te=Gg(R,B),oe=Gg(B,B),ce=Gg($,R),fe=Gg($,B),ge=q*oe-te*te,ve=(oe*ce-te*fe)/ge,Ie=(q*fe-te*ce)/ge,Qe=m.z*(1-ve-Ie)+b.z*ve+C.z*Ie;if(isFinite(Qe))return Qe}return 1/0}{let u=1/0;for(const m of l)u=Math.min(u,m.z);return u}}const MD=cs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ID}=MD,PD=cs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:LD}=PD,DD=Math.cos(Math.PI/180*37.5),$S=Math.pow(2,14)/.5;class Px{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((u=>{this.gradients[u.id]={}})),this.layoutVertexArray=new lt,this.layoutVertexArray2=new Je,this.indexArray=new Vt,this.programConfigurations=new dh(l.layers,l.zoom),this.segments=new ji,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(l,u,m){this.hasDependencies=jy("line",this.layers,u)||this.hasLineDasharray(this.layers);const b=this.layers[0].layout.get("line-sort-key"),C=!b.isConstant(),A=[];for(const{feature:R,id:B,index:$,sourceLayerIndex:q}of l){const te=this.layers[0]._featureFilter.needGeometry,oe=Pu(R,te);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),oe,m))continue;const ce=C?b.evaluate(oe,{},m):void 0,fe={id:B,properties:R.properties,type:R.type,sourceLayerIndex:q,index:$,geometry:te?oe.geometry:Iu(R),patterns:{},dashes:{},sortKey:ce};A.push(fe)}C&&A.sort(((R,B)=>R.sortKey-B.sortKey));for(const R of A){const{geometry:B,index:$,sourceLayerIndex:q}=R;this.hasDependencies?(jy("line",this.layers,u)?Cx("line",this.layers,R,{zoom:this.zoom},u):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,R,this.zoom,u),this.patternFeatures.push(R)):this.addFeature(R,B,$,m,{},{},u.subdivisionGranularity),u.featureIndex.insert(l[$].feature,B,$,q,this.index)}}update(l,u,m,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:m,dashPositions:b})}addFeatures(l,u,m,b){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,u,m,b,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,LD)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ID),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,u,m,b,C,A,R){const B=this.layers[0].layout,$=B.get("line-join").evaluate(l,{}),q=B.get("line-cap"),te=B.get("line-miter-limit"),oe=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const ce of u)this.addLine(ce,l,$,q,te,oe,b,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{imagePositions:C,dashPositions:A,canonical:b})}addLine(l,u,m,b,C,A,R,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=Hd(l,R?B.line.getGranularityForZoomLevel(R.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let De=0;De<l.length-1;De++)this.totalDistance+=l[De].dist(l[De+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const $=Ug.types[u.type]==="Polygon";let q=l.length;for(;q>=2&&l[q-1].equals(l[q-2]);)q--;let te=0;for(;te<q-1&&l[te].equals(l[te+1]);)te++;if(q<($?3:2))return;m==="bevel"&&(C=1.05);const oe=this.overscaling<=16?122880/(512*this.overscaling):0,ce=this.segments.prepareSegment(10*q,this.layoutVertexArray,this.indexArray);let fe,ge,ve,Ie,Qe;this.e1=this.e2=-1,$&&(fe=l[q-2],Qe=l[te].sub(fe)._unit()._perp());for(let De=te;De<q;De++){if(ve=De===q-1?$?l[te+1]:void 0:l[De+1],ve&&l[De].equals(ve))continue;Qe&&(Ie=Qe),fe&&(ge=fe),fe=l[De],Qe=ve?ve.sub(fe)._unit()._perp():Ie,Ie=Ie||Qe;let ze=Ie.add(Qe);ze.x===0&&ze.y===0||ze._unit();const it=Ie.x*Qe.x+Ie.y*Qe.y,ot=ze.x*Qe.x+ze.y*Qe.y,Ot=ot!==0?1/ot:1/0,ri=2*Math.sqrt(2-2*ot),Qt=ot<DD&&ge&&ve,di=Ie.x*Qe.y-Ie.y*Qe.x>0;if(Qt&&De>te){const ti=fe.dist(ge);if(ti>2*oe){const $t=fe.sub(fe.sub(ge)._mult(oe/ti)._round());this.updateDistance(ge,$t),this.addCurrentVertex($t,Ie,0,0,ce),ge=$t}}const Ni=ge&&ve;let gi=Ni?m:$?"butt":b;if(Ni&&gi==="round"&&(Ot<A?gi="miter":Ot<=2&&(gi="fakeround")),gi==="miter"&&Ot>C&&(gi="bevel"),gi==="bevel"&&(Ot>2&&(gi="flipbevel"),Ot<C&&(gi="miter")),ge&&this.updateDistance(ge,fe),gi==="miter")ze._mult(Ot),this.addCurrentVertex(fe,ze,0,0,ce);else if(gi==="flipbevel"){if(Ot>100)ze=Qe.mult(-1);else{const ti=Ot*Ie.add(Qe).mag()/Ie.sub(Qe).mag();ze._perp()._mult(ti*(di?-1:1))}this.addCurrentVertex(fe,ze,0,0,ce),this.addCurrentVertex(fe,ze.mult(-1),0,0,ce)}else if(gi==="bevel"||gi==="fakeround"){const ti=-Math.sqrt(Ot*Ot-1),$t=di?ti:0,tn=di?0:ti;if(ge&&this.addCurrentVertex(fe,Ie,$t,tn,ce),gi==="fakeround"){const qi=Math.round(180*ri/Math.PI/20);for(let dn=1;dn<qi;dn++){let Gi=dn/qi;if(Gi!==.5){const La=Gi-.5;Gi+=Gi*La*(Gi-1)*((1.0904+it*(it*(3.55645-1.43519*it)-3.2452))*La*La+(.848013+it*(.215638*it-1.06021)))}const Rn=Qe.sub(Ie)._mult(Gi)._add(Ie)._unit()._mult(di?-1:1);this.addHalfVertex(fe,Rn.x,Rn.y,!1,di,0,ce)}}ve&&this.addCurrentVertex(fe,Qe,-$t,-tn,ce)}else if(gi==="butt")this.addCurrentVertex(fe,ze,0,0,ce);else if(gi==="square"){const ti=ge?1:-1;this.addCurrentVertex(fe,ze,ti,ti,ce)}else gi==="round"&&(ge&&(this.addCurrentVertex(fe,Ie,0,0,ce),this.addCurrentVertex(fe,Ie,1,1,ce,!0)),ve&&(this.addCurrentVertex(fe,Qe,-1,-1,ce,!0),this.addCurrentVertex(fe,Qe,0,0,ce)));if(Qt&&De<q-1){const ti=fe.dist(ve);if(ti>2*oe){const $t=fe.add(ve.sub(fe)._mult(oe/ti)._round());this.updateDistance(fe,$t),this.addCurrentVertex($t,Qe,0,0,ce),fe=$t}}}}addCurrentVertex(l,u,m,b,C,A=!1){const R=u.y*b-u.x,B=-u.y-u.x*b;this.addHalfVertex(l,u.x+u.y*m,u.y-u.x*m,A,!1,m,C),this.addHalfVertex(l,R,B,A,!0,-b,C),this.distance>$S/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,u,m,b,C,A))}addHalfVertex({x:l,y:u},m,b,C,A,R,B){const $=.5*(this.lineClips?this.scaledDistance*($S-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(C?1:0),(u<<1)+(A?1:0),Math.round(63*m)+128,Math.round(63*b)+128,1+(R===0?0:R<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const q=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,q,this.e2),B.primitiveLength++),A?this.e2=q:this.e1=q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,u){this.distance+=l.dist(u),this.updateScaledDistance()}hasLineDasharray(l){for(const u of l){const m=u.paint.get("line-dasharray");if(m&&!m.isConstant())return!0}return!1}addLineDashDependencies(l,u,m,b){for(const C of l){const A=C.paint.get("line-dasharray");if(!A||A.value.kind==="constant")continue;const R=C.layout.get("line-cap")==="round",B={dasharray:A.value.evaluate({zoom:m-1},u,{}),round:R},$={dasharray:A.value.evaluate({zoom:m},u,{}),round:R},q={dasharray:A.value.evaluate({zoom:m+1},u,{}),round:R},te=`${B.dasharray.join(",")},${B.round}`,oe=`${$.dasharray.join(",")},${$.round}`,ce=`${q.dasharray.join(",")},${q.round}`;b.dashDependencies[te]=B,b.dashDependencies[oe]=$,b.dashDependencies[ce]=q,u.dashes[C.id]={min:te,mid:oe,max:ce}}}}let GS,WS;Ji("LineBucket",Px,{omit:["layers","patternFeatures"]});var XS={get paint(){return WS=WS||new Eo({"line-opacity":new Un(Mt.paint_line["line-opacity"]),"line-color":new Un(Mt.paint_line["line-color"]),"line-translate":new Tn(Mt.paint_line["line-translate"]),"line-translate-anchor":new Tn(Mt.paint_line["line-translate-anchor"]),"line-width":new Un(Mt.paint_line["line-width"]),"line-gap-width":new Un(Mt.paint_line["line-gap-width"]),"line-offset":new Un(Mt.paint_line["line-offset"]),"line-blur":new Un(Mt.paint_line["line-blur"]),"line-dasharray":new Dd(Mt.paint_line["line-dasharray"]),"line-pattern":new Dd(Mt.paint_line["line-pattern"]),"line-gradient":new qf(Mt.paint_line["line-gradient"])})},get layout(){return GS=GS||new Eo({"line-cap":new Tn(Mt.layout_line["line-cap"]),"line-join":new Un(Mt.layout_line["line-join"]),"line-miter-limit":new Tn(Mt.layout_line["line-miter-limit"]),"line-round-limit":new Tn(Mt.layout_line["line-round-limit"]),"line-sort-key":new Un(Mt.layout_line["line-sort-key"])})}};class RD extends Un{possiblyEvaluate(l,u){return u=new sr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(l,u)}evaluate(l,u,m,b){return u=bi({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(l,u,m,b)}}let $y;class OD extends Cl{constructor(l,u){super(l,XS,u),this.gradientVersion=0,$y||($y=new RD(XS.paint.properties["line-width"].specification),$y.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!(function(m){return m._styleExpression!==void 0})(u)&&u._styleExpression.expression instanceof Wt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,u){super.recalculate(l,u),this.paint._values["line-floorwidth"]=$y.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Px(l)}queryRadius(l){const u=l,m=YS(rp("line-width",this,u),rp("line-gap-width",this,u)),b=rp("line-offset",this,u);return m/2+Math.abs(b)+Ny(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:m,geometry:b,transform:C,pixelsToTileUnits:A}){const R=By(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-C.bearingInRadians,A),B=A/2*YS(this.paint.get("line-width").evaluate(u,m),this.paint.get("line-gap-width").evaluate(u,m)),$=this.paint.get("line-offset").evaluate(u,m);return $&&(b=(function(q,te){const oe=[];for(let ce=0;ce<q.length;ce++){const fe=UL(q[ce]),ge=[];for(let ve=0;ve<fe.length;ve++){const Ie=fe[ve],Qe=fe[ve-1],De=fe[ve+1],ze=ve===0?new h(0,0):Ie.sub(Qe)._unit()._perp(),it=ve===fe.length-1?new h(0,0):De.sub(Ie)._unit()._perp(),ot=ze._add(it)._unit(),Ot=ot.x*it.x+ot.y*it.y;Ot!==0&&ot._mult(1/Ot),ge.push(ot._mult(te)._add(Ie))}oe.push(ge)}return oe})(b,$*A)),(function(q,te,oe){for(let ce=0;ce<te.length;ce++){const fe=te[ce];if(q.length>=3){for(let ge=0;ge<fe.length;ge++)if(ap(q,fe[ge]))return!0}if(jL(q,fe,oe))return!0}return!1})(R,b,B)}isTileClipped(){return!0}}function YS(d,l){return l>0?l+2*d:d}const zD=cs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),FD=cs([{name:"a_projected_pos",components:3,type:"Float32"}],4);cs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ND=cs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);cs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const qS=cs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),BD=cs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function jD(d,l,u){return d.sections.forEach((m=>{m.text=(function(b,C,A){const R=C.layout.get("text-transform").evaluate(A,{});return R==="uppercase"?b=b.toLocaleUpperCase():R==="lowercase"&&(b=b.toLocaleLowerCase()),Tu.applyArabicShaping&&(b=Tu.applyArabicShaping(b)),b})(m.text,l,u)})),d}cs([{name:"triangle",components:3,type:"Uint16"}]),cs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),cs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),cs([{type:"Float32",name:"offsetX"}]),cs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),cs([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var qs=24;const Wg={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},VD={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},HD={40:!0};function ZS(d,l,u,m,b,C){if("fontStack"in l){const A=u[l.fontStack],R=A&&A[d];return R?R.metrics.advance*l.scale+b:0}{const A=m[l.imageName];return A?A.displaySize[0]*l.scale*qs/C+b:0}}function KS(d,l,u,m){const b=Math.pow(d-l,2);return m?d<l?b/2:2*b:b+Math.abs(u)*u}function UD(d,l,u){let m=0;return d===10&&(m-=1e4),u&&(m+=150),d!==40&&d!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function JS(d,l,u,m,b,C){let A=null,R=KS(l,u,b,C);for(const B of m){const $=KS(l-B.x,u,b,C)+B.badness;$<=R&&(A=B,R=$)}return{index:d,x:l,priorBreak:A,badness:R}}function QS(d){return d?QS(d.priorBreak).concat(d.index):[]}class cp{constructor(l="",u=[],m=[]){this.text=l,this.sections=u,this.sectionIndex=m,this.imageSectionID=null}static fromFeature(l,u){const m=new cp;for(let b=0;b<l.sections.length;b++){const C=l.sections[b];C.image?m.addImageSection(C):m.addTextSection(C,u)}return m}length(){return[...this.text].length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}verticalizePunctuation(){this.text=(function(l){let u="",m={premature:!0,value:void 0};const b=l[Symbol.iterator]();let C=b.next();const A=l[Symbol.iterator]();A.next();let R=A.next();for(;!C.done;)u+=!R.done&&wg(R.value.codePointAt(0))&&!Wg[R.value]||!m.premature&&wg(m.value.codePointAt(0))&&!Wg[m.value]||!Wg[C.value]?C.value:Wg[C.value],m={value:C.value,premature:!1},C=b.next(),R=A.next();return u})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const l=this.text.match(/^\s*/),u=l?l[0].length:0,m=this.text.match(/\S\s*$/),b=m?m[0].length-1:0;this.text=this.text.substring(u,this.text.length-b),this.sectionIndex=this.sectionIndex.slice(u,this.sectionIndex.length-b)}substring(l,u){const m=[...this.text].slice(l,u).join(""),b=this.sectionIndex.slice(l,u);return new cp(m,this.sections,b)}toCodeUnitIndex(l){return[...this.text].slice(0,l).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,u)=>Math.max(l,this.sections[u].scale)),0)}getMaxImageSize(l){let u=0,m=0;for(let b=0;b<this.length();b++){const C=this.getSection(b);if("imageName"in C){const A=l[C.imageName];if(!A)continue;const R=A.displaySize;u=Math.max(u,R[0]),m=Math.max(m,R[1])}}return{maxImageWidth:u,maxImageHeight:m}}addTextSection(l,u){this.text+=l.text,this.sections.push({scale:l.scale||1,verticalAlign:l.verticalAlign||"bottom",fontStack:l.fontStack||u});const m=this.sections.length-1;this.sectionIndex.push(...[...l.text].map((()=>m)))}addImageSection(l){const u=l.image?l.image.name:"";if(u.length===0)return void Qi("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push({scale:1,verticalAlign:l.verticalAlign||"bottom",imageName:u}),this.sectionIndex.push(this.sections.length-1)):Qi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(l,u,m,b,C){const A=[],R=this.determineAverageLineWidth(l,u,m,b,C),B=this.hasZeroWidthSpaces();let $=0,q=0;const te=this.text[Symbol.iterator]();let oe=te.next();const ce=this.text[Symbol.iterator]();ce.next();let fe=ce.next();const ge=this.text[Symbol.iterator]();ge.next(),ge.next();let ve=ge.next();for(;!oe.done;){const Ie=this.getSection(q),Qe=oe.value.codePointAt(0);if(Sr(Qe)||($+=ZS(Qe,Ie,m,b,l,C)),!fe.done){const De=Vn(Qe),ze=fe.value.codePointAt(0);(VD[Qe]||De||"imageName"in Ie||!ve.done&&HD[ze])&&A.push(JS(q+1,$,R,A,UD(Qe,ze,De&&B),!1))}q++,oe=te.next(),fe=ce.next(),ve=ge.next()}return QS(JS(this.length(),$,R,A,0,!0))}determineAverageLineWidth(l,u,m,b,C){let A=0,R=0;for(const B of this.text){const $=this.getSection(R);A+=ZS(B.codePointAt(0),$,m,b,l,C),R++}return A/Math.max(1,Math.ceil(A/u))}}const Lx=4294967296,e2=1/Lx,t2=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Gy{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,u,m=this.length){for(;this.pos<m;){const b=this.readVarint(),C=b>>3,A=this.pos;this.type=7&b,l(C,u,this),this.pos===A&&this.skip(b)}return u}readMessage(l,u){return this.readFields(l,u,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Lx;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Lx;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const u=this.buf;let m,b;return b=u[this.pos++],m=127&b,b<128?m:(b=u[this.pos++],m|=(127&b)<<7,b<128?m:(b=u[this.pos++],m|=(127&b)<<14,b<128?m:(b=u[this.pos++],m|=(127&b)<<21,b<128?m:(b=u[this.pos],m|=(15&b)<<28,(function(C,A,R){const B=R.buf;let $,q;if(q=B[R.pos++],$=(112&q)>>4,q<128||(q=B[R.pos++],$|=(127&q)<<3,q<128)||(q=B[R.pos++],$|=(127&q)<<10,q<128)||(q=B[R.pos++],$|=(127&q)<<17,q<128)||(q=B[R.pos++],$|=(127&q)<<24,q<128)||(q=B[R.pos++],$|=(1&q)<<31,q<128))return up(C,$,A);throw new Error("Expected varint not more than 10 bytes")})(m,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,u=this.pos;return this.pos=l,l-u>=12&&t2?t2.decode(this.buf.subarray(u,l)):(function(m,b,C){let A="",R=b;for(;R<C;){const B=m[R];let $,q,te,oe=null,ce=B>239?4:B>223?3:B>191?2:1;if(R+ce>C)break;ce===1?B<128&&(oe=B):ce===2?($=m[R+1],(192&$)==128&&(oe=(31&B)<<6|63&$,oe<=127&&(oe=null))):ce===3?($=m[R+1],q=m[R+2],(192&$)==128&&(192&q)==128&&(oe=(15&B)<<12|(63&$)<<6|63&q,(oe<=2047||oe>=55296&&oe<=57343)&&(oe=null))):ce===4&&($=m[R+1],q=m[R+2],te=m[R+3],(192&$)==128&&(192&q)==128&&(192&te)==128&&(oe=(15&B)<<18|(63&$)<<12|(63&q)<<6|63&te,(oe<=65535||oe>=1114112)&&(oe=null))),oe===null?(oe=65533,ce=1):oe>65535&&(oe-=65536,A+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),A+=String.fromCharCode(oe),R+=ce}return A})(this.buf,u,l)}readBytes(){const l=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,l);return this.pos=l,u}readPackedVarint(l=[],u){const m=this.readPackedEnd();for(;this.pos<m;)l.push(this.readVarint(u));return l}readPackedSVarint(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const u=7&l;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(l,u){this.writeVarint(l<<3|u)}realloc(l){let u=this.length||16;for(;u<this.pos+l;)u*=2;if(u!==this.length){const m=new Uint8Array(u);m.set(this.buf),this.buf=m,this.dataView=new DataView(m.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*e2),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*e2),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(u,m){let b,C;if(u>=0?(b=u%4294967296|0,C=u/4294967296|0):(b=~(-u%4294967296),C=~(-u/4294967296),4294967295^b?b=b+1|0:(b=0,C=C+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),(function(A,R,B){B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,B.buf[B.pos]=127&(A>>>=7)})(b,0,m),(function(A,R){const B=(7&A)<<4;R.buf[R.pos++]|=B|((A>>>=3)?128:0),A&&(R.buf[R.pos++]=127&A|((A>>>=7)?128:0),A&&(R.buf[R.pos++]=127&A|((A>>>=7)?128:0),A&&(R.buf[R.pos++]=127&A|((A>>>=7)?128:0),A&&(R.buf[R.pos++]=127&A|((A>>>=7)?128:0),A&&(R.buf[R.pos++]=127&A)))))})(C,m)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const u=this.pos;this.pos=(function(b,C,A){for(let R,B,$=0;$<C.length;$++){if(R=C.charCodeAt($),R>55295&&R<57344){if(!B){R>56319||$+1===C.length?(b[A++]=239,b[A++]=191,b[A++]=189):B=R;continue}if(R<56320){b[A++]=239,b[A++]=191,b[A++]=189,B=R;continue}R=B-55296<<10|R-56320|65536,B=null}else B&&(b[A++]=239,b[A++]=191,b[A++]=189,B=null);R<128?b[A++]=R:(R<2048?b[A++]=R>>6|192:(R<65536?b[A++]=R>>12|224:(b[A++]=R>>18|240,b[A++]=R>>12&63|128),b[A++]=R>>6&63|128),b[A++]=63&R|128)}return A})(this.buf,l,this.pos);const m=this.pos-u;m>=128&&i2(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const u=l.length;this.writeVarint(u),this.realloc(u);for(let m=0;m<u;m++)this.buf[this.pos++]=l[m]}writeRawMessage(l,u){this.pos++;const m=this.pos;l(u,this);const b=this.pos-m;b>=128&&i2(m,b,this),this.pos=m-1,this.writeVarint(b),this.pos+=b}writeMessage(l,u,m){this.writeTag(l,2),this.writeRawMessage(u,m)}writePackedVarint(l,u){u.length&&this.writeMessage(l,$D,u)}writePackedSVarint(l,u){u.length&&this.writeMessage(l,GD,u)}writePackedBoolean(l,u){u.length&&this.writeMessage(l,YD,u)}writePackedFloat(l,u){u.length&&this.writeMessage(l,WD,u)}writePackedDouble(l,u){u.length&&this.writeMessage(l,XD,u)}writePackedFixed32(l,u){u.length&&this.writeMessage(l,qD,u)}writePackedSFixed32(l,u){u.length&&this.writeMessage(l,ZD,u)}writePackedFixed64(l,u){u.length&&this.writeMessage(l,KD,u)}writePackedSFixed64(l,u){u.length&&this.writeMessage(l,JD,u)}writeBytesField(l,u){this.writeTag(l,2),this.writeBytes(u)}writeFixed32Field(l,u){this.writeTag(l,5),this.writeFixed32(u)}writeSFixed32Field(l,u){this.writeTag(l,5),this.writeSFixed32(u)}writeFixed64Field(l,u){this.writeTag(l,1),this.writeFixed64(u)}writeSFixed64Field(l,u){this.writeTag(l,1),this.writeSFixed64(u)}writeVarintField(l,u){this.writeTag(l,0),this.writeVarint(u)}writeSVarintField(l,u){this.writeTag(l,0),this.writeSVarint(u)}writeStringField(l,u){this.writeTag(l,2),this.writeString(u)}writeFloatField(l,u){this.writeTag(l,5),this.writeFloat(u)}writeDoubleField(l,u){this.writeTag(l,1),this.writeDouble(u)}writeBooleanField(l,u){this.writeVarintField(l,+u)}}function up(d,l,u){return u?4294967296*l+(d>>>0):4294967296*(l>>>0)+(d>>>0)}function i2(d,l,u){const m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));u.realloc(m);for(let b=u.pos-1;b>=d;b--)u.buf[b+m]=u.buf[b]}function $D(d,l){for(let u=0;u<d.length;u++)l.writeVarint(d[u])}function GD(d,l){for(let u=0;u<d.length;u++)l.writeSVarint(d[u])}function WD(d,l){for(let u=0;u<d.length;u++)l.writeFloat(d[u])}function XD(d,l){for(let u=0;u<d.length;u++)l.writeDouble(d[u])}function YD(d,l){for(let u=0;u<d.length;u++)l.writeBoolean(d[u])}function qD(d,l){for(let u=0;u<d.length;u++)l.writeFixed32(d[u])}function ZD(d,l){for(let u=0;u<d.length;u++)l.writeSFixed32(d[u])}function KD(d,l){for(let u=0;u<d.length;u++)l.writeFixed64(d[u])}function JD(d,l){for(let u=0;u<d.length;u++)l.writeSFixed64(d[u])}function QD(d,l,u){d===1&&u.readMessage(eR,l)}function eR(d,l,u){if(d===3){const{id:m,bitmap:b,width:C,height:A,left:R,top:B,advance:$}=u.readMessage(tR,{});l.push({id:m,bitmap:new zg({width:C+6,height:A+6},b),metrics:{width:C,height:A,left:R,top:B,advance:$}})}}function tR(d,l,u){d===1?l.id=u.readVarint():d===2?l.bitmap=u.readBytes():d===3?l.width=u.readVarint():d===4?l.height=u.readVarint():d===5?l.left=u.readSVarint():d===6?l.top=u.readSVarint():d===7&&(l.advance=u.readVarint())}function n2(d){let l=0,u=0;for(const A of d)l+=A.w*A.h,u=Math.max(u,A.w);d.sort(((A,R)=>R.h-A.h));const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),u),h:1/0}];let b=0,C=0;for(const A of d)for(let R=m.length-1;R>=0;R--){const B=m[R];if(!(A.w>B.w||A.h>B.h)){if(A.x=B.x,A.y=B.y,C=Math.max(C,A.y+A.h),b=Math.max(b,A.x+A.w),A.w===B.w&&A.h===B.h){const $=m.pop();$&&R<m.length&&(m[R]=$)}else A.h===B.h?(B.x+=A.w,B.w-=A.w):A.w===B.w?(B.y+=A.h,B.h-=A.h):(m.push({x:B.x+A.w,y:B.y,w:B.w-A.w,h:A.h}),B.y+=A.h,B.h-=A.h);break}}return{w:b,h:C,fill:l/(b*C)||0}}class Dx{constructor(l,{pixelRatio:u,version:m,stretchX:b,stretchY:C,content:A,textFitWidth:R,textFitHeight:B}){this.paddedRect=l,this.pixelRatio=u,this.stretchX=b,this.stretchY=C,this.content=A,this.version=m,this.textFitWidth=R,this.textFitHeight=B}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class a2{constructor(l,u){const m={},b={};this.haveRenderCallbacks=[];const C=[];this.addImages(l,m,C),this.addImages(u,b,C);const{w:A,h:R}=n2(C),B=new nl({width:A||1,height:R||1});for(const $ in l){const q=l[$],te=m[$].paddedRect;nl.copy(q.data,B,{x:0,y:0},{x:te.x+1,y:te.y+1},q.data)}for(const $ in u){const q=u[$],te=b[$].paddedRect,oe=te.x+1,ce=te.y+1,fe=q.data.width,ge=q.data.height;nl.copy(q.data,B,{x:0,y:0},{x:oe,y:ce},q.data),nl.copy(q.data,B,{x:0,y:ge-1},{x:oe,y:ce-1},{width:fe,height:1}),nl.copy(q.data,B,{x:0,y:0},{x:oe,y:ce+ge},{width:fe,height:1}),nl.copy(q.data,B,{x:fe-1,y:0},{x:oe-1,y:ce},{width:1,height:ge}),nl.copy(q.data,B,{x:0,y:0},{x:oe+fe,y:ce},{width:1,height:ge})}this.image=B,this.iconPositions=m,this.patternPositions=b}addImages(l,u,m){for(const b in l){const C=l[b],A={x:0,y:0,w:C.data.width+2,h:C.data.height+2};m.push(A),u[b]=new Dx(A,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(l,u){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),u),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),u)}patchUpdatedImage(l,u,m){if(!l||!u||l.version===u.version)return;l.version=u.version;const[b,C]=l.tl;m.update(u.data,void 0,{x:b,y:C})}}var Gh;function Wy(d,l,u,m,b,C,A,R,B,$,q,te,oe,ce,fe){const ge=cp.fromFeature(d,b);let ve;te===o.az.vertical&&ge.verticalizePunctuation();let Ie=ge.determineLineBreaks($,C,l,m,ce);const{processBidirectionalText:Qe,processStyledBidirectionalText:De}=Tu;if(Qe&&ge.sections.length===1){ve=[],Ie=Ie.map((Ot=>ge.toCodeUnitIndex(Ot)));const ot=Qe(ge.toString(),Ie);for(const Ot of ot){const ri=[...Ot].map((()=>0));ve.push(new cp(Ot,ge.sections,ri))}}else if(De){ve=[],Ie=Ie.map((Qt=>ge.toCodeUnitIndex(Qt)));let ot=0;const Ot=[];for(const Qt of ge.text)Ot.push(...Array(Qt.length).fill(ge.sectionIndex[ot])),ot++;const ri=De(ge.text,Ot,Ie);for(const Qt of ri){const di=[];let Ni="";for(const gi of Qt[0])di.push(Qt[1][Ni.length]),Ni+=gi;ve.push(new cp(Qt[0],ge.sections,di))}}else ve=(function(ot,Ot){const ri=[];let Qt=0;for(const di of Ot)ri.push(ot.substring(Qt,di)),Qt=di;return Qt<ot.length()&&ri.push(ot.substring(Qt,ot.length())),ri})(ge,Ie);const ze=[],it={positionedLines:ze,text:ge.toString(),top:q[1],bottom:q[1],left:q[0],right:q[0],writingMode:te,iconsInText:!1,verticalizable:!1};return(function(ot,Ot,ri,Qt,di,Ni,gi,ti,$t,tn,qi,dn){let Gi=0,Rn=0,La=0,xa=0;const Br=ti==="right"?1:ti==="left"?0:.5,yo=qs/dn;let Es=0;for(const Xa of di){Xa.trim();const is=Xa.getMaxScale(),hs={positionedGlyphs:[],lineOffset:0};ot.positionedLines[Es]=hs;const Cr=hs.positionedGlyphs;let al=0;if(!Xa.length()){Rn+=Ni,++Es;continue}const _o=iR(Qt,Xa,yo);let rl=0;for(const Js of Xa.text){const Yr=Xa.getSection(rl),Ms=Js.codePointAt(0),ns=nR($t,qi,Ms),Qs={glyph:Ms,imageName:null,x:Gi,y:Rn+-17,vertical:ns,scale:1,fontStack:"",sectionIndex:Xa.getSectionIndex(rl),metrics:null,rect:null};let gh;if("fontStack"in Yr){if(gh=aR(Yr,Ms,ns,_o,Ot,ri),!gh)continue;Qs.fontStack=Yr.fontStack}else{if(ot.iconsInText=!0,Yr.scale*=yo,gh=rR(Yr,ns,is,_o,Qt),!gh)continue;al=Math.max(al,gh.imageOffset),Qs.imageName=Yr.imageName}const{rect:Jc,metrics:Qg,baselineOffset:Zh}=gh;Qs.y+=Zh,Qs.scale=Yr.scale,Qs.metrics=Qg,Qs.rect=Jc,Cr.push(Qs),ns?(ot.verticalizable=!0,Gi+=("imageName"in Yr?Qg.advance:qs)*Yr.scale+tn):Gi+=Qg.advance*Yr.scale+tn,rl++}Cr.length!==0&&(La=Math.max(Gi-tn,La),sR(Cr,0,Cr.length-1,Br)),Gi=0,hs.lineOffset=Math.max(al,(is-1)*qs);const Cc=Ni*is+al;Rn+=Cc,xa=Math.max(Cc,xa),++Es}const{horizontalAlign:jr,verticalAlign:Dr}=Rx(gi);(function(Xa,is,hs,Cr,al,_o,rl,Cc,Js){const Yr=(is-hs)*al;let Ms=0;Ms=_o!==rl?-Cc*Cr- -17:-Cr*Js*rl+.5*rl;for(const ns of Xa)for(const Qs of ns.positionedGlyphs)Qs.x+=Yr,Qs.y+=Ms})(ot.positionedLines,Br,jr,Dr,La,xa,Ni,Rn,di.length),ot.top+=-Dr*Rn,ot.bottom=ot.top+Rn,ot.left+=-jr*La,ot.right=ot.left+La})(it,l,u,m,ve,A,R,B,te,$,oe,fe),!(function(ot){for(const Ot of ot)if(Ot.positionedGlyphs.length!==0)return!1;return!0})(ze)&&it}function Rx(d){let l=.5,u=.5;switch(d){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:l,verticalAlign:u}}function iR(d,l,u){const m=l.getMaxScale()*qs,{maxImageWidth:b,maxImageHeight:C}=l.getMaxImageSize(d),A=Math.max(m,C*u);return{verticalLineContentWidth:Math.max(m,b*u),horizontalLineContentHeight:A}}function r2(d){switch(d){case"top":return 0;case"center":return .5;default:return 1}}function nR(d,l,u){return!(d===o.az.horizontal||!l&&!ga(u)||l&&(Sr(u)||(m=u,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(m)))));var m}function aR(d,l,u,m,b,C){const A=C[d.fontStack],R=(function($,q,te,oe){if($&&$.rect)return $;const ce=q[te.fontStack],fe=ce&&ce[oe];return fe?{rect:null,metrics:fe.metrics}:null})(A&&A[l],b,d,l);if(R===null)return null;let B;if(u)B=m.verticalLineContentWidth-d.scale*qs;else{const $=r2(d.verticalAlign);B=(m.horizontalLineContentHeight-d.scale*qs)*$}return{rect:R.rect,metrics:R.metrics,baselineOffset:B}}function rR(d,l,u,m,b){const C=b[d.imageName];if(!C)return null;const A=C.paddedRect,R=C.displaySize,B={width:R[0],height:R[1],left:1,top:-3,advance:l?R[1]:R[0]};let $;if(l)$=m.verticalLineContentWidth-R[1]*d.scale;else{const q=r2(d.verticalAlign);$=(m.horizontalLineContentHeight-R[1]*d.scale)*q}return{rect:A,metrics:B,baselineOffset:$,imageOffset:(l?R[0]:R[1])*d.scale-qs*u}}function sR(d,l,u,m){if(m===0)return;const b=d[u],C=(d[u].x+b.metrics.advance*b.scale)*m;for(let A=l;A<=u;A++)d[A].x-=C}function oR(d,l,u){const{horizontalAlign:m,verticalAlign:b}=Rx(u),C=l[0]-d.displaySize[0]*m,A=l[1]-d.displaySize[1]*b;return{image:d,top:A,bottom:A+d.displaySize[1],left:C,right:C+d.displaySize[0]}}function s2(d){var l,u;let m=d.left,b=d.top,C=d.right-m,A=d.bottom-b;const R=(l=d.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",B=(u=d.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",$=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(B==="proportional"){if(R==="stretchOnly"&&C/A<$||R==="proportional"){const q=Math.ceil(A*$);m*=q/C,C=q}}else if(R==="proportional"&&B==="stretchOnly"&&$!==0&&C/A>$){const q=Math.ceil(C/$);b*=q/A,A=q}return{x1:m,y1:b,x2:m+C,y2:b+A}}function o2(d,l,u,m,b,C){const A=d.image;let R;if(A.content){const ve=A.content,Ie=A.pixelRatio||1;R=[ve[0]/Ie,ve[1]/Ie,A.displaySize[0]-ve[2]/Ie,A.displaySize[1]-ve[3]/Ie]}const B=l.left*C,$=l.right*C;let q,te,oe,ce;u==="width"||u==="both"?(ce=b[0]+B-m[3],te=b[0]+$+m[1]):(ce=b[0]+(B+$-A.displaySize[0])/2,te=ce+A.displaySize[0]);const fe=l.top*C,ge=l.bottom*C;return u==="height"||u==="both"?(q=b[1]+fe-m[0],oe=b[1]+ge+m[2]):(q=b[1]+(fe+ge-A.displaySize[1])/2,oe=q+A.displaySize[1]),{image:A,top:q,right:te,bottom:oe,left:ce,collisionPadding:R}}Ji("ImagePosition",Dx),Ji("ImageAtlas",a2),o.az=void 0,(Gh=o.az||(o.az={}))[Gh.none=0]="none",Gh[Gh.horizontal=1]="horizontal",Gh[Gh.vertical=2]="vertical",Gh[Gh.horizontalOnly=3]="horizontalOnly";const fh=128,Wh=32640;function l2(d,l){const{expression:u}=l;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new sr(d+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:b}=u;let C=0;for(;C<m.length&&m[C]<=d;)C++;C=Math.max(0,C-1);let A=C;for(;A<m.length&&m[A]<d+1;)A++;A=Math.min(m.length-1,A);const R=m[C],B=m[A];return u.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:B,interpolationType:b}:{kind:"camera",minZoom:R,maxZoom:B,minSize:u.evaluate(new sr(R)),maxSize:u.evaluate(new sr(B)),interpolationType:b}}}function Ox(d,l,u){let m="never";const b=d.get(l);return b?m=b:d.get(u)&&(m="always"),m}const lR=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xy(d,l,u,m,b,C,A,R,B,$,q,te,oe){const ce=R?Math.min(Wh,Math.round(R[0])):0,fe=R?Math.min(Wh,Math.round(R[1])):0;d.emplaceBack(l,u,Math.round(32*m),Math.round(32*b),C,A,(ce<<1)+(B?1:0),fe,16*$,16*q,256*te,256*oe)}function zx(d,l,u){d.emplaceBack(l.x,l.y,u),d.emplaceBack(l.x,l.y,u),d.emplaceBack(l.x,l.y,u),d.emplaceBack(l.x,l.y,u)}function cR(d){for(const l of d.sections)if(My(l.text))return!0;return!1}class Fx{constructor(l){this.layoutVertexArray=new at,this.indexArray=new Vt,this.programConfigurations=l,this.segments=new ji,this.dynamicLayoutVertexArray=new kt,this.opacityVertexArray=new Yt,this.hasVisibleVertices=!1,this.placedSymbolArray=new N}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,u,m,b){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,zD.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,FD.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,lR,!0),this.opacityVertexBuffer.itemSize=1),(m||b)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ji("SymbolBuffers",Fx);class Nx{constructor(l,u,m){this.layoutVertexArray=new l,this.layoutAttributes=u,this.indexArray=new m,this.segments=new ji,this.collisionVertexArray=new jt}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,ND.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ji("CollisionBuffers",Nx);class hp{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=l2(this.zoom,u["text-size"]),this.iconSizeData=l2(this.zoom,u["icon-size"]);const m=this.layers[0].layout,b=m.get("symbol-sort-key"),C=m.get("symbol-z-order");this.canOverlap=Ox(m,"text-overlap","text-allow-overlap")!=="never"||Ox(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map((A=>o.az[A]))),this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id)),this.sourceID=l.sourceID}createArrays(){this.text=new Fx(new dh(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new Fx(new dh(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new Q,this.lineVertexArray=new ne,this.symbolInstances=new Y,this.textAnchorOffsets=new ue}calculateGlyphDependencies(l,u,m,b,C){for(const A of l)if(u[A.codePointAt(0)]=!0,(m||b)&&C){const R=Wg[A];R&&(u[R.codePointAt(0)]=!0)}}populate(l,u,m){const b=this.layers[0],C=b.layout,A=C.get("text-font"),R=C.get("text-field"),B=C.get("icon-image"),$=(R.value.kind!=="constant"||R.value.value instanceof ta&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),q=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,te=C.get("symbol-sort-key");if(this.features=[],!$&&!q)return;const oe=u.iconDependencies,ce=u.glyphDependencies,fe=u.availableImages,ge=new sr(this.zoom);for(const{feature:ve,id:Ie,index:Qe,sourceLayerIndex:De}of l){const ze=b._featureFilter.needGeometry,it=Pu(ve,ze);if(!b._featureFilter.filter(ge,it,m))continue;let ot,Ot;if(ze||(it.geometry=Iu(ve)),$){const Qt=b.getValueAndResolveTokens("text-field",it,m,fe),di=ta.factory(Qt),Ni=this.hasRTLText=this.hasRTLText||cR(di);(!Ni||Tu.getRTLTextPluginStatus()==="unavailable"||Ni&&Tu.isParsed())&&(ot=jD(di,b,it))}if(q){const Qt=b.getValueAndResolveTokens("icon-image",it,m,fe);Ot=Qt instanceof we?Qt:we.fromString(Qt)}if(!ot&&!Ot)continue;const ri=this.sortFeaturesByKey?te.evaluate(it,{},m):void 0;if(this.features.push({id:Ie,text:ot,icon:Ot,index:Qe,sourceLayerIndex:De,geometry:it.geometry,properties:ve.properties,type:Ug.types[ve.type],sortKey:ri}),Ot&&(oe[Ot.name]=!0),ot){const Qt=A.evaluate(it,{},m).join(","),di=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.az.vertical)>=0;for(const Ni of ot.sections)if(Ni.image)oe[Ni.image.name]=!0;else{const gi=Wr(ot.toString()),ti=Ni.fontStack||Qt,$t=ce[ti]=ce[ti]||{};this.calculateGlyphDependencies(Ni.text,$t,di,this.allowVerticalPlacement,gi)}}}C.get("symbol-placement")==="line"&&(this.features=(function(ve){const Ie={},Qe={},De=[];let ze=0;function it(Qt){De.push(ve[Qt]),ze++}function ot(Qt,di,Ni){const gi=Qe[Qt];return delete Qe[Qt],Qe[di]=gi,De[gi].geometry[0].pop(),De[gi].geometry[0]=De[gi].geometry[0].concat(Ni[0]),gi}function Ot(Qt,di,Ni){const gi=Ie[di];return delete Ie[di],Ie[Qt]=gi,De[gi].geometry[0].shift(),De[gi].geometry[0]=Ni[0].concat(De[gi].geometry[0]),gi}function ri(Qt,di,Ni){const gi=Ni?di[0][di[0].length-1]:di[0][0];return`${Qt}:${gi.x}:${gi.y}`}for(let Qt=0;Qt<ve.length;Qt++){const di=ve[Qt],Ni=di.geometry,gi=di.text?di.text.toString():null;if(!gi){it(Qt);continue}const ti=ri(gi,Ni),$t=ri(gi,Ni,!0);if(ti in Qe&&$t in Ie&&Qe[ti]!==Ie[$t]){const tn=Ot(ti,$t,Ni),qi=ot(ti,$t,De[tn].geometry);delete Ie[ti],delete Qe[$t],Qe[ri(gi,De[qi].geometry,!0)]=qi,De[tn].geometry=null}else ti in Qe?ot(ti,$t,Ni):$t in Ie?Ot(ti,$t,Ni):(it(Qt),Ie[ti]=ze-1,Qe[$t]=ze-1)}return De.filter((Qt=>Qt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ve,Ie)=>ve.sortKey-Ie.sortKey))}update(l,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,u,this.layers,{imagePositions:m}),this.icon.programConfigurations.updatePaintArrays(l,u,this.layers,{imagePositions:m}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,u){const m=this.lineVertexArray.length;if(l.segment!==void 0){let b=l.dist(u[l.segment+1]),C=l.dist(u[l.segment]);const A={};for(let R=l.segment+1;R<u.length;R++)A[R]={x:u[R].x,y:u[R].y,tileUnitDistanceFromAnchor:b},R<u.length-1&&(b+=u[R+1].dist(u[R]));for(let R=l.segment||0;R>=0;R--)A[R]={x:u[R].x,y:u[R].y,tileUnitDistanceFromAnchor:C},R>0&&(C+=u[R-1].dist(u[R]));for(let R=0;R<u.length;R++){const B=A[R];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,u,m,b,C,A,R,B,$,q,te,oe){const ce=l.indexArray,fe=l.layoutVertexArray,ge=l.segments.prepareSegment(4*u.length,fe,ce,this.canOverlap?A.sortKey:void 0),ve=this.glyphOffsetArray.length,Ie=ge.vertexLength,Qe=this.allowVerticalPlacement&&R===o.az.vertical?Math.PI/2:0,De=A.text&&A.text.sections;for(let ze=0;ze<u.length;ze++){const{tl:it,tr:ot,bl:Ot,br:ri,tex:Qt,pixelOffsetTL:di,pixelOffsetBR:Ni,minFontScaleX:gi,minFontScaleY:ti,glyphOffset:$t,isSDF:tn,sectionIndex:qi}=u[ze],dn=ge.vertexLength,Gi=$t[1];Xy(fe,B.x,B.y,it.x,Gi+it.y,Qt.x,Qt.y,m,tn,di.x,di.y,gi,ti),Xy(fe,B.x,B.y,ot.x,Gi+ot.y,Qt.x+Qt.w,Qt.y,m,tn,Ni.x,di.y,gi,ti),Xy(fe,B.x,B.y,Ot.x,Gi+Ot.y,Qt.x,Qt.y+Qt.h,m,tn,di.x,Ni.y,gi,ti),Xy(fe,B.x,B.y,ri.x,Gi+ri.y,Qt.x+Qt.w,Qt.y+Qt.h,m,tn,Ni.x,Ni.y,gi,ti),zx(l.dynamicLayoutVertexArray,B,Qe),ce.emplaceBack(dn,dn+2,dn+1),ce.emplaceBack(dn+1,dn+2,dn+3),ge.vertexLength+=4,ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($t[0]),ze!==u.length-1&&qi===u[ze+1].sectionIndex||l.programConfigurations.populatePaintArrays(fe.length,A,A.index,{imagePositions:{},canonical:oe,formattedSection:De&&De[qi]})}l.placedSymbolArray.emplaceBack(B.x,B.y,ve,this.glyphOffsetArray.length-ve,Ie,$,q,B.segment,m?m[0]:0,m?m[1]:0,b[0],b[1],R,0,!1,0,te)}_addCollisionDebugVertex(l,u,m,b,C,A){return u.emplaceBack(0,0),l.emplaceBack(m.x,m.y,b,C,Math.round(A.x),Math.round(A.y))}addCollisionDebugVertices(l,u,m,b,C,A,R){const B=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),$=B.vertexLength,q=C.layoutVertexArray,te=C.collisionVertexArray,oe=R.anchorX,ce=R.anchorY;this._addCollisionDebugVertex(q,te,A,oe,ce,new h(l,u)),this._addCollisionDebugVertex(q,te,A,oe,ce,new h(m,u)),this._addCollisionDebugVertex(q,te,A,oe,ce,new h(m,b)),this._addCollisionDebugVertex(q,te,A,oe,ce,new h(l,b)),B.vertexLength+=4;const fe=C.indexArray;fe.emplaceBack($,$+1),fe.emplaceBack($+1,$+2),fe.emplaceBack($+2,$+3),fe.emplaceBack($+3,$),B.primitiveLength+=4}addDebugCollisionBoxes(l,u,m,b){for(let C=l;C<u;C++){const A=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(A.x1,A.y1,A.x2,A.y2,b?this.textCollisionBox:this.iconCollisionBox,A.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nx(Ft,qS.members,Mi),this.iconCollisionBox=new Nx(Ft,qS.members,Mi);for(let l=0;l<this.symbolInstances.length;l++){const u=this.symbolInstances.get(l);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(l,u,m,b,C,A,R,B,$){const q={};for(let te=u;te<m;te++){const oe=l.get(te);q.textBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},q.textFeatureIndex=oe.featureIndex;break}for(let te=b;te<C;te++){const oe=l.get(te);q.verticalTextBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},q.verticalTextFeatureIndex=oe.featureIndex;break}for(let te=A;te<R;te++){const oe=l.get(te);q.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},q.iconFeatureIndex=oe.featureIndex;break}for(let te=B;te<$;te++){const oe=l.get(te);q.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},q.verticalIconFeatureIndex=oe.featureIndex;break}return q}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const m=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,u){const m=l.placedSymbolArray.get(u),b=m.vertexStartIndex+4*m.numGlyphs;for(let C=m.vertexStartIndex;C<b;C+=4)l.indexArray.emplaceBack(C,C+2,C+1),l.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(l),m=Math.cos(l),b=[],C=[],A=[];for(let R=0;R<this.symbolInstances.length;++R){A.push(R);const B=this.symbolInstances.get(R);b.push(0|Math.round(u*B.anchorX+m*B.anchorY)),C.push(B.featureIndex)}return A.sort(((R,B)=>b[R]-b[B]||C[B]-C[R])),A}addToSortKeyRanges(l,u){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===u?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const m=this.symbolInstances.get(u);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(((b,C,A)=>{b>=0&&A.indexOf(b)===C&&this.addIndicesForPlacedSymbol(this.text,b)})),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let c2,u2;Ji("SymbolBucket",hp,{omit:["layers","collisionBoxArray","features","compareText"]}),hp.MAX_GLYPHS=65535,hp.addDynamicAttributes=zx;var Bx={get paint(){return u2=u2||new Eo({"icon-opacity":new Un(Mt.paint_symbol["icon-opacity"]),"icon-color":new Un(Mt.paint_symbol["icon-color"]),"icon-halo-color":new Un(Mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Un(Mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Un(Mt.paint_symbol["icon-halo-blur"]),"icon-translate":new Tn(Mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tn(Mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Un(Mt.paint_symbol["text-opacity"]),"text-color":new Un(Mt.paint_symbol["text-color"],{runtimeType:ki,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Un(Mt.paint_symbol["text-halo-color"]),"text-halo-width":new Un(Mt.paint_symbol["text-halo-width"]),"text-halo-blur":new Un(Mt.paint_symbol["text-halo-blur"]),"text-translate":new Tn(Mt.paint_symbol["text-translate"]),"text-translate-anchor":new Tn(Mt.paint_symbol["text-translate-anchor"])})},get layout(){return c2=c2||new Eo({"symbol-placement":new Tn(Mt.layout_symbol["symbol-placement"]),"symbol-spacing":new Tn(Mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tn(Mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Un(Mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Tn(Mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tn(Mt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Tn(Mt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Tn(Mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tn(Mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tn(Mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Un(Mt.layout_symbol["icon-size"]),"icon-text-fit":new Tn(Mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tn(Mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Un(Mt.layout_symbol["icon-image"]),"icon-rotate":new Un(Mt.layout_symbol["icon-rotate"]),"icon-padding":new Un(Mt.layout_symbol["icon-padding"]),"icon-keep-upright":new Tn(Mt.layout_symbol["icon-keep-upright"]),"icon-offset":new Un(Mt.layout_symbol["icon-offset"]),"icon-anchor":new Un(Mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tn(Mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tn(Mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tn(Mt.layout_symbol["text-rotation-alignment"]),"text-field":new Un(Mt.layout_symbol["text-field"]),"text-font":new Un(Mt.layout_symbol["text-font"]),"text-size":new Un(Mt.layout_symbol["text-size"]),"text-max-width":new Un(Mt.layout_symbol["text-max-width"]),"text-line-height":new Tn(Mt.layout_symbol["text-line-height"]),"text-letter-spacing":new Un(Mt.layout_symbol["text-letter-spacing"]),"text-justify":new Un(Mt.layout_symbol["text-justify"]),"text-radial-offset":new Un(Mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Tn(Mt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Un(Mt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Un(Mt.layout_symbol["text-anchor"]),"text-max-angle":new Tn(Mt.layout_symbol["text-max-angle"]),"text-writing-mode":new Tn(Mt.layout_symbol["text-writing-mode"]),"text-rotate":new Un(Mt.layout_symbol["text-rotate"]),"text-padding":new Tn(Mt.layout_symbol["text-padding"]),"text-keep-upright":new Tn(Mt.layout_symbol["text-keep-upright"]),"text-transform":new Un(Mt.layout_symbol["text-transform"]),"text-offset":new Un(Mt.layout_symbol["text-offset"]),"text-allow-overlap":new Tn(Mt.layout_symbol["text-allow-overlap"]),"text-overlap":new Tn(Mt.layout_symbol["text-overlap"]),"text-ignore-placement":new Tn(Mt.layout_symbol["text-ignore-placement"]),"text-optional":new Tn(Mt.layout_symbol["text-optional"])})}};class h2{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:ii,this.defaultValue=l}evaluate(l){if(l.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(l.formattedSection))return u.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ji("FormatSectionOverride",h2,{omit:["defaultValue"]});class Yy extends Cl{constructor(l,u){super(l,Bx,u)}recalculate(l,u){if(super.recalculate(l,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const b=[];for(const C of m)b.indexOf(C)<0&&b.push(C);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,u,m,b){const C=this.layout.get(l).evaluate(u,{},m,b),A=this._unevaluatedLayout._values[l];return A.isDataDriven()||Ul(A.value)||!C?C:(function(R,B){return B.replace(/{([^{}]+)}/g,(($,q)=>R&&q in R?String(R[q]):""))})(u.properties,C)}createBucket(l){return new hp(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of Bx.paint.overridableProperties){if(!Yy.hasPaintOverride(this.layout,l))continue;const u=this.paint.get(l),m=new h2(u),b=new Zu(m,u.property.specification);let C=null;C=u.value.kind==="constant"||u.value.kind==="source"?new mu("source",b):new yc("composite",b,u.value.zoomStops),this.paint._values[l]=new Yl(u.property,C,u.parameters)}}_handleOverridablePaintPropertyUpdate(l,u,m){return!(!this.layout||u.isDataDriven()||m.isDataDriven())&&Yy.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,u){const m=l.get("text-field"),b=Bx.paint.properties[u];let C=!1;const A=R=>{for(const B of R)if(b.overrides&&b.overrides.hasOverride(B))return void(C=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ta)A(m.value.value.sections);else if(m.value.kind==="source"||m.value.kind==="composite"){const R=$=>{C||($ instanceof Pt&&Ct($.value)===Yi?A($.value.sections):$ instanceof rr?A($.sections):$.eachChild(R))},B=m.value;B._styleExpression&&R(B._styleExpression.expression)}return C}}let d2;var uR={get paint(){return d2=d2||new Eo({"background-color":new Tn(Mt.paint_background["background-color"]),"background-pattern":new Yf(Mt.paint_background["background-pattern"]),"background-opacity":new Tn(Mt.paint_background["background-opacity"])})}};class hR extends Cl{constructor(l,u){super(l,uR,u)}}class dR extends Cl{constructor(l,u){super(l,{},u),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class fR{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const pR={once:!0},jx=63710088e-1;class Xh{constructor(l,u){if(isNaN(l)||isNaN(u))throw new Error(`Invalid LngLat object: (${l}, ${u})`);if(this.lng=+l,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xh(mi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const u=Math.PI/180,m=this.lat*u,b=l.lat*u,C=Math.sin(m)*Math.sin(b)+Math.cos(m)*Math.cos(b)*Math.cos((l.lng-this.lng)*u);return jx*Math.acos(Math.min(C,1))}static convert(l){if(l instanceof Xh)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Xh(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Xh(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const f2=2*Math.PI*jx;function p2(d){return f2*Math.cos(d*Math.PI/180)}function g2(d){return(180+d)/360}function m2(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function y2(d,l){return d/p2(l)}function _2(d){return 360*d-180}function qy(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function x2(d,l){return d*p2(qy(l))}class Xg{constructor(l,u,m=0){this.x=+l,this.y=+u,this.z=+m}static fromLngLat(l,u=0){const m=Xh.convert(l);return new Xg(g2(m.lng),m2(m.lat),y2(u,m.lat))}toLngLat(){return new Xh(_2(this.x),qy(this.y))}toAltitude(){return x2(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/f2*(l=qy(this.y),1/Math.cos(l*Math.PI/180));var l}}function v2(d,l,u){var m=2*Math.PI*6378137/256/Math.pow(2,u);return[d*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class Vx{constructor(l,u,m){if(!(function(b,C,A){return!(b<0||b>25||A<0||A>=Math.pow(2,b)||C<0||C>=Math.pow(2,b))})(l,u,m))throw new Error(`x=${u}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=u,this.y=m,this.key=dp(0,l,l,u,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,u,m){const b=(function(A,R,B){var $=v2(256*A,256*(R=Math.pow(2,B)-R-1),B),q=v2(256*(A+1),256*(R+1),B);return $[0]+","+$[1]+","+q[0]+","+q[1]})(this.x,this.y,this.z),C=(function(A,R,B){let $,q="";for(let te=A;te>0;te--)$=1<<te-1,q+=(R&$?1:0)+(B&$?2:0);return q})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,C).replace(/{bbox-epsg-3857}/g,b)}isChildOf(l){const u=this.z-l.z;return u>0&&l.x===this.x>>u&&l.y===this.y>>u}getTilePoint(l){const u=Math.pow(2,this.z);return new h((l.x*u-this.x)*Dt,(l.y*u-this.y)*Dt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class b2{constructor(l,u){this.wrap=l,this.canonical=u,this.key=dp(l,u.z,u.z,u.x,u.y)}}class Kl{constructor(l,u,m,b,C){if(this.terrainRttPosMatrix32f=null,l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=u,this.canonical=new Vx(m,+b,+C),this.key=dp(u,l,m,b,C)}clone(){return new Kl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-l;return l>this.canonical.z?new Kl(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Kl(l,this.wrap,l,this.canonical.x>>u,this.canonical.y>>u)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,u){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-l;return l>this.canonical.z?dp(this.wrap*+u,l,this.canonical.z,this.canonical.x,this.canonical.y):dp(this.wrap*+u,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const u=this.canonical.z-l.canonical.z;return!(u<0)&&l.canonical.x===this.canonical.x>>u&&l.canonical.y===this.canonical.y>>u}children(l){if(this.overscaledZ>=l)return[new Kl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,m=2*this.canonical.x,b=2*this.canonical.y;return[new Kl(u,this.wrap,u,m,b),new Kl(u,this.wrap,u,m+1,b),new Kl(u,this.wrap,u,m,b+1),new Kl(u,this.wrap,u,m+1,b+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Kl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Kl(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new b2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new Xg(l.x-this.wrap,l.y))}}function dp(d,l,u,m,b){(d*=2)<0&&(d=-1*d-1);const C=1<<u;return(C*C*d+C*b+m).toString(36)+u.toString(36)+l.toString(36)}function Hx(d,l){return l?d.properties[l]:d.id}function gR(d,l){const u={id:d.id};if(l.removeAllProperties&&(delete d.removeProperties,delete d.addOrUpdateProperties,delete l.removeProperties),l.removeProperties)for(const m of l.removeProperties){const b=d.addOrUpdateProperties.findIndex((C=>C.key===m));b>-1&&d.addOrUpdateProperties.splice(b,1)}return(d.removeAllProperties||l.removeAllProperties)&&(u.removeAllProperties=!0),(d.removeProperties||l.removeProperties)&&(u.removeProperties=[...d.removeProperties||[],...l.removeProperties||[]]),(d.addOrUpdateProperties||l.addOrUpdateProperties)&&(u.addOrUpdateProperties=[...d.addOrUpdateProperties||[],...l.addOrUpdateProperties||[]]),(d.newGeometry||l.newGeometry)&&(u.newGeometry=l.newGeometry||d.newGeometry),u}function w2(d){var l,u;if(!d)return{};const m={};return m.removeAll=d.removeAll,m.remove=new Set(d.remove||[]),m.add=new Map((l=d.add)===null||l===void 0?void 0:l.map((b=>[b.id,b]))),m.update=new Map((u=d.update)===null||u===void 0?void 0:u.map((b=>[b.id,b]))),m}Ji("CanonicalTileID",Vx),Ji("OverscaledTileID",Kl,{omit:["terrainRttPosMatrix32f"]});class Ud{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const u=new Ud;return u.extend(l(new h(this.minX,this.minY))),u.extend(l(new h(this.maxX,this.minY))),u.extend(l(new h(this.minX,this.maxY))),u.extend(l(new h(this.maxX,this.maxY))),u}static fromPoints(l){const u=new Ud;for(const m of l)u.extend(m);return u}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class S2{constructor(l){this._stringToNumber={},this._numberToString=[];for(let u=0;u<l.length;u++){const m=l[u];this._stringToNumber[m]=u,this._numberToString[u]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class k2{constructor(l,u,m,b,C){this.type="Feature",this._vectorTileFeature=l,this._x=m,this._y=b,this._z=u,this.properties=l.properties,this.id=C}projectPoint(l,u,m,b){return[360*(l.x+u)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(l.y+m)/b)*Math.PI))-90]}projectLine(l,u,m,b){return l.map((C=>this.projectPoint(C,u,m,b)))}get geometry(){if(this._geometry)return this._geometry;const l=this._vectorTileFeature,u=l.extent*Math.pow(2,this._z),m=l.extent*this._x,b=l.extent*this._y,C=l.loadGeometry();switch(l.type){case 1:{const A=[];for(const B of C)A.push(B[0]);const R=this.projectLine(A,m,b,u);this._geometry=A.length===1?{type:"Point",coordinates:R[0]}:{type:"MultiPoint",coordinates:R};break}case 2:{const A=C.map((R=>this.projectLine(R,m,b,u)));this._geometry=A.length===1?{type:"LineString",coordinates:A[0]}:{type:"MultiLineString",coordinates:A};break}case 3:{const A=BS(C),R=[];for(const B of A)R.push(B.map(($=>this.projectLine($,m,b,u))));this._geometry=R.length===1?{type:"Polygon",coordinates:R[0]}:{type:"MultiPolygon",coordinates:R};break}default:throw new Error(`unknown feature type: ${l.type}`)}return this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&u!=="_x"&&u!=="_y"&&u!=="_z"&&(l[u]=this[u]);return l}}class fp{_name;dataBuffer;nullabilityBuffer;_size;constructor(l,u,m){this._name=l,this.dataBuffer=u,typeof m=="number"?this._size=m:(this.nullabilityBuffer=m,this._size=m.size())}getValue(l){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(l)?null:this.getValueFromBuffer(l)}has(l){return this.nullabilityBuffer&&this.nullabilityBuffer.get(l)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Zy extends fp{}class Ux extends Zy{getValueFromBuffer(l){return this.dataBuffer[l]}}class $x extends Zy{getValueFromBuffer(l){return this.dataBuffer[l]}}class C2 extends fp{delta;constructor(l,u,m,b){super(l,u,b),this.delta=m}}class Gx extends C2{constructor(l,u,m,b){super(l,Int32Array.of(u),m,b)}getValueFromBuffer(l){return this.dataBuffer[0]+l*this.delta}}class Wx extends fp{constructor(l,u,m){super(l,Int32Array.of(u),m)}getValueFromBuffer(l){return this.dataBuffer[0]}}class mR{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(l,u,m,b,C=4096){this._name=l,this._geometryVector=u,this._idVector=m,this._propertyVectors=b,this._extent=C}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(l){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((u=>[u.name,u])))),this.propertyVectorsMap.get(l)}*[Symbol.iterator](){const l=this.geometryVector[Symbol.iterator]();let u=0;for(;u<this.numFeatures;){let m;this.idVector&&(m=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(u)):this.idVector.getValue(u));const b=l?.next().value,C={};for(const A of this.propertyVectors){if(!A)continue;const R=A.name,B=A.getValue(u);B!==null&&(C[R]=B)}u++,yield{id:m,geometry:b,properties:C}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const l=[],u=this.geometryVector.getGeometries();for(let m=0;m<this.numFeatures;m++){let b;this.idVector&&(b=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(m)):this.idVector.getValue(m));const C={coordinates:u[m],type:this.geometryVector.geometryType(m)},A={};for(const R of this.propertyVectors){if(!R)continue;const B=R.name,$=R.getValue(m);$!==null&&(A[B]=$)}l.push({id:b,geometry:C,properties:A})}return l}containsMaxSaveIntegerValues(l){return l instanceof Ux||l instanceof Wx&&l instanceof Gx||l instanceof $x}}class yR{value;constructor(l){this.value=l}get(){return this.value}set(l){this.value=l}increment(){return this.value++}add(l){this.value+=l}}var ka,ph,go,Zc,$d,Tl,Zs,Ks,A2,Jl;function no(d,l,u){const m=new Int32Array(u);let b=0,C=l.get();for(let A=0;A<m.length;A++){let R=d[C++],B=127&R;R<128||(R=d[C++],B|=(127&R)<<7,R<128||(R=d[C++],B|=(127&R)<<14,R<128||(R=d[C++],B|=(127&R)<<21,R<128||(R=d[C++],B|=(15&R)<<28)))),m[b++]=B}return l.set(C),m}function Ky(d,l,u){const m=new BigInt64Array(u);for(let b=0;b<m.length;b++)m[b]=xR(d,l);return m}function _R(d,l){let u,m;return m=d[l.get()],l.increment(),u=127&m,m<128?u:(m=d[l.get()],l.increment(),u|=(127&m)<<7,m<128?u:(m=d[l.get()],l.increment(),u|=(127&m)<<14,m<128?u:(m=d[l.get()],l.increment(),u|=(127&m)<<21,m<128?u:(m=d[l.get()],u|=(15&m)<<28,(function(b,C,A){let R,B;if(B=C[A.get()],A.increment(),R=(112&B)>>4,B<128||(B=C[A.get()],A.increment(),R|=(127&B)<<3,B<128)||(B=C[A.get()],A.increment(),R|=(127&B)<<10,B<128)||(B=C[A.get()],A.increment(),R|=(127&B)<<17,B<128)||(B=C[A.get()],A.increment(),R|=(127&B)<<24,B<128)||(B=C[A.get()],A.increment(),R|=(1&B)<<31,B<128))return 4294967296*R+(b>>>0);throw new Error("Expected varint not more than 10 bytes")})(u,d,l)))))}function T2(d,l,u,m){throw new Error("FastPFor is not implemented yet.")}function Gd(d){return d>>>1^-(1&d)}function pp(d){return d>>1n^-(1n&d)}function xR(d,l){let u=0n,m=0,b=l.get();for(;b<d.length;){const C=d[b++];if(u|=BigInt(127&C)<<BigInt(m),!(128&C))break;if(m+=7,m>=64)throw new Error("Varint too long")}return l.set(b),u}function E2(d,l,u){const m=new Int32Array(u);let b=0;for(let C=0;C<l;C++){const A=d[C];m.fill(d[C+l],b,b+A),b+=A}return m}function M2(d,l,u){const m=new BigInt64Array(u);let b=0;for(let C=0;C<l;C++){const A=Number(d[C]);m.fill(d[C+l],b,b+A),b+=A}return m}function I2(d,l,u){const m=new Float64Array(u);let b=0;for(let C=0;C<l;C++){const A=d[C];m.fill(d[C+l],b,b+A),b+=A}return m}function Xx(d){const l=d.length/4*4;let u=1;if(l>=4)for(let m=d[0];u<l-4;u+=4)m=d[u]+=m,m=d[u+1]+=m,m=d[u+2]+=m,m=d[u+3]+=m;for(;u!=d.length;)d[u]+=d[u-1],++u}function P2(d){d[0]=d[0]>>>1^-(1&d[0]),d[1]=d[1]>>>1^-(1&d[1]);const l=d.length/4*4;let u=2;if(l>=4)for(;u<l-4;u+=4){const m=d[u],b=d[u+1],C=d[u+2],A=d[u+3];d[u]=(m>>>1^-(1&m))+d[u-2],d[u+1]=(b>>>1^-(1&b))+d[u-1],d[u+2]=(C>>>1^-(1&C))+d[u],d[u+3]=(A>>>1^-(1&A))+d[u+1]}for(;u!=d.length;u+=2)d[u]=(d[u]>>>1^-(1&d[u]))+d[u-2],d[u+1]=(d[u+1]>>>1^-(1&d[u+1]))+d[u-1]}(function(d){d.NONE="NONE",d.DELTA="DELTA",d.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",d.RLE="RLE",d.MORTON="MORTON",d.PDE="PDE"})(ka||(ka={})),(function(d){d.NONE="NONE",d.FAST_PFOR="FAST_PFOR",d.VARINT="VARINT",d.ALP="ALP"})(ph||(ph={})),(function(d){d.PRESENT="PRESENT",d.DATA="DATA",d.OFFSET="OFFSET",d.LENGTH="LENGTH"})(go||(go={}));class Yx{_dictionaryType;_offsetType;_lengthType;constructor(l,u,m){this._dictionaryType=l,this._offsetType=u,this._lengthType=m}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Ho(d,l){const u=(function(m,b){const C=m[b.get()],A=Object.values(go)[C>>4];let R=null;switch(A){case go.DATA:R=new Yx(Object.values(Zc)[15&C]);break;case go.OFFSET:R=new Yx(null,Object.values($d)[15&C]);break;case go.LENGTH:R=new Yx(null,null,Object.values(Tl)[15&C])}b.increment();const B=m[b.get()],$=Object.values(ka)[B>>5],q=Object.values(ka)[B>>2&7],te=Object.values(ph)[3&B];b.increment();const oe=no(m,b,2),ce=oe[0];return{physicalStreamType:A,logicalStreamType:R,logicalLevelTechnique1:$,logicalLevelTechnique2:q,physicalLevelTechnique:te,numValues:ce,byteLength:oe[1],decompressedCount:ce}})(d,l);return u.logicalLevelTechnique1===ka.MORTON?(function(m,b,C){const A=no(b,C,2);return{physicalStreamType:m.physicalStreamType,logicalStreamType:m.logicalStreamType,logicalLevelTechnique1:m.logicalLevelTechnique1,logicalLevelTechnique2:m.logicalLevelTechnique2,physicalLevelTechnique:m.physicalLevelTechnique,numValues:m.numValues,byteLength:m.byteLength,decompressedCount:m.decompressedCount,numBits:A[0],coordinateShift:A[1]}})(u,d,l):ka.RLE!==u.logicalLevelTechnique1&&ka.RLE!==u.logicalLevelTechnique2||ph.NONE===u.physicalLevelTechnique?u:(function(m,b,C){const A=no(b,C,2);return{physicalStreamType:m.physicalStreamType,logicalStreamType:m.logicalStreamType,logicalLevelTechnique1:m.logicalLevelTechnique1,logicalLevelTechnique2:m.logicalLevelTechnique2,physicalLevelTechnique:m.physicalLevelTechnique,numValues:m.numValues,byteLength:m.byteLength,decompressedCount:A[1],runs:A[0],numRleValues:A[1]}})(u,d,l)}(function(d){d.NONE="NONE",d.SINGLE="SINGLE",d.SHARED="SHARED",d.VERTEX="VERTEX",d.MORTON="MORTON",d.FSST="FSST"})(Zc||(Zc={})),(function(d){d.VERTEX="VERTEX",d.INDEX="INDEX",d.STRING="STRING",d.KEY="KEY"})($d||($d={})),(function(d){d.VAR_BINARY="VAR_BINARY",d.GEOMETRIES="GEOMETRIES",d.PARTS="PARTS",d.RINGS="RINGS",d.TRIANGLES="TRIANGLES",d.SYMBOL="SYMBOL",d.DICTIONARY="DICTIONARY"})(Tl||(Tl={})),(function(d){d[d.FLAT=0]="FLAT",d[d.CONST=1]="CONST",d[d.SEQUENCE=2]="SEQUENCE",d[d.DICTIONARY=3]="DICTIONARY",d[d.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Zs||(Zs={}));class Kc{values;_size;constructor(l,u){this.values=l,this._size=u}get(l){const u=Math.floor(l/8);return(this.values[u]>>l%8&1)==1}set(l,u){const m=Math.floor(l/8);this.values[m]=this.values[m]|(u?1:0)<<l%8}getInt(l){const u=Math.floor(l/8);return this.values[u]>>l%8&1}size(){return this._size}getBuffer(){return this.values}}function Uo(d,l,u,m,b){return(function(C,A,R){switch(A.logicalLevelTechnique1){case ka.DELTA:return A.logicalLevelTechnique2===ka.RLE?(function(B,$,q){const te=new Int32Array(q);let oe=0,ce=0;for(let fe=0;fe<$;fe++){const ge=B[fe],ve=Gd(B[fe+$]);for(let Ie=0;Ie<ge;Ie++)ce+=ve,te[oe++]=ce}return te})(C,A.runs,A.numRleValues):((function(B){B[0]=B[0]>>>1^-(1&B[0]);const $=B.length/4*4;let q=1;if($>=4)for(;q<$-4;q+=4){const te=B[q],oe=B[q+1],ce=B[q+2],fe=B[q+3];B[q]=(te>>>1^-(1&te))+B[q-1],B[q+1]=(oe>>>1^-(1&oe))+B[q],B[q+2]=(ce>>>1^-(1&ce))+B[q+1],B[q+3]=(fe>>>1^-(1&fe))+B[q+2]}for(;q!=B.length;++q)B[q]=(B[q]>>>1^-(1&B[q]))+B[q-1]})(C),C);case ka.RLE:return(function(B,$,q){return q?(function(te,oe,ce){const fe=new Int32Array(ce);let ge=0;for(let ve=0;ve<oe;ve++){const Ie=te[ve];let Qe=te[ve+oe];Qe=Qe>>>1^-(1&Qe),fe.fill(Qe,ge,ge+Ie),ge+=Ie}return fe})(B,$.runs,$.numRleValues):E2(B,$.runs,$.numRleValues)})(C,A,R);case ka.MORTON:return Xx(C),C;case ka.COMPONENTWISE_DELTA:return P2(C),C;case ka.NONE:return R&&(function(B){for(let $=0;$<B.length;$++){const q=B[$];B[$]=q>>>1^-(1&q)}})(C),C;default:throw new Error(`The specified Logical level technique is not supported: ${A.logicalLevelTechnique1}`)}})(Jy(d,l,u),u,m)}function Yh(d,l,u){return(function(m,b){if(b.logicalLevelTechnique1===ka.DELTA&&b.logicalLevelTechnique2===ka.NONE)return(function(A){const R=new Int32Array(A.length+1);R[0]=0,R[1]=Gd(A[0]);let B=R[1],$=2;for(;$!=R.length;++$){const q=A[$-1];B+=q>>>1^-(1&q),R[$]=R[$-1]+B}return R})(m);if(b.logicalLevelTechnique1===ka.RLE&&b.logicalLevelTechnique2===ka.NONE)return(function(A,R,B){const $=new Int32Array(B+1);$[0]=0;let q=1,te=$[0];for(let oe=0;oe<R;oe++){const ce=A[oe],fe=A[oe+R];for(let ge=q;ge<q+ce;ge++)$[ge]=fe+te,te=$[ge];q+=ce}return $})(m,b.runs,b.numRleValues);if(b.logicalLevelTechnique1===ka.NONE&&b.logicalLevelTechnique2===ka.NONE){(function(A){let R=0;for(let B=0;B<A.length;B++)A[B]+=R,R=A[B]})(m);const C=new Int32Array(b.numValues+1);return C[0]=0,C.set(m,1),C}if(b.logicalLevelTechnique1===ka.DELTA&&b.logicalLevelTechnique2===ka.RLE){const C=(function(A,R,B){const $=new Int32Array(B+1);$[0]=0;let q=1,te=$[0];for(let oe=0;oe<R;oe++){const ce=A[oe];let fe=A[oe+R];fe=fe>>>1^-(1&fe);for(let ge=q;ge<q+ce;ge++)$[ge]=fe+te,te=$[ge];q+=ce}return $})(m,b.runs,b.numRleValues);return Xx(C),C}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Jy(d,l,u),u)}function Jy(d,l,u){const m=u.physicalLevelTechnique;if(m===ph.FAST_PFOR)return T2();if(m===ph.VARINT)return no(d,l,u.numValues);if(m===ph.NONE){const b=l.get();l.add(u.byteLength);const C=d.subarray(b,l.get());return new Int32Array(C)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function qx(d,l,u,m){const b=Jy(d,l,u);if(b.length===1){const C=b[0];return m?Gd(C):C}return m?(function(C){return Gd(C[1])})(b):(function(C){return C[1]})(b)}function L2(d,l,u){return(function(m){if(m.length==2){const b=Gd(m[1]);return[b,b]}return[Gd(m[2]),Gd(m[3])]})(Jy(d,l,u))}function D2(d,l,u){return(function(m){if(m.length==2){const b=pp(m[1]);return[b,b]}return[pp(m[2]),pp(m[3])]})(Ky(d,l,u.numValues))}function R2(d,l,u,m){return(function(b,C,A){switch(C.logicalLevelTechnique1){case ka.DELTA:return C.logicalLevelTechnique2===ka.RLE?(function(R,B,$){const q=new BigInt64Array($);let te=0,oe=0n;for(let ce=0;ce<B;ce++){const fe=Number(R[ce]),ge=pp(R[ce+B]);for(let ve=0;ve<fe;ve++)oe+=ge,q[te++]=oe}return q})(b,C.runs,C.numRleValues):((function(R){R[0]=R[0]>>1n^-(1n&R[0]);const B=R.length/4*4;let $=1;if(B>=4)for(;$<B-4;$+=4){const q=R[$],te=R[$+1],oe=R[$+2],ce=R[$+3];R[$]=(q>>1n^-(1n&q))+R[$-1],R[$+1]=(te>>1n^-(1n&te))+R[$],R[$+2]=(oe>>1n^-(1n&oe))+R[$+1],R[$+3]=(ce>>1n^-(1n&ce))+R[$+2]}for(;$!=R.length;++$)R[$]=(R[$]>>1n^-(1n&R[$]))+R[$-1]})(b),b);case ka.RLE:return(function(R,B,$){return $?(function(q,te,oe){const ce=new BigInt64Array(oe);let fe=0;for(let ge=0;ge<te;ge++){const ve=Number(q[ge]);let Ie=q[ge+te];Ie=Ie>>1n^-(1n&Ie),ce.fill(Ie,fe,fe+ve),fe+=ve}return ce})(R,B.runs,B.numRleValues):M2(R,B.runs,B.numRleValues)})(b,C,A);case ka.NONE:return A&&(function(R){for(let B=0;B<R.length;B++){const $=R[B];R[B]=$>>1n^-(1n&$)}})(b),b;default:throw new Error(`The specified Logical level technique is not supported: ${C.logicalLevelTechnique1}`)}})(Ky(d,l,u.numValues),u,m)}function O2(d,l,u,m){const b=Ky(d,l,u.numValues);if(b.length===1){const C=b[0];return m?pp(C):C}return m?(function(C){return pp(C[1])})(b):(function(C){return C[1]})(b)}function Zx(d,l,u,m,b){return(function(C,A,R,B){switch(A.logicalLevelTechnique1){case ka.DELTA:return A.logicalLevelTechnique2===ka.RLE&&(C=E2(C,A.runs,A.numRleValues)),(function($,q){const te=new Int32Array($.size());let oe=0;$.get(0)?(te[0]=$.get(0)?q[0]>>>1^-(1&q[0]):0,oe=1):te[0]=0;let ce=1;for(;ce!=te.length;++ce)te[ce]=$.get(ce)?te[ce-1]+(q[oe]>>>1^-(1&q[oe++])):te[ce-1];return te})(B,C);case ka.RLE:return(function($,q,te,oe){const ce=q;return te?(function(fe,ge,ve){const Ie=new Int32Array(fe.size());let Qe=0;for(let De=0;De<ve;De++){const ze=ge[De];let it=ge[De+ve];it=it>>>1^-(1&it);for(let ot=Qe;ot<Qe+ze;ot++)fe.get(ot)?Ie[ot]=it:(Ie[ot]=0,Qe++);Qe+=ze}return Ie})(oe,$,ce.runs):(function(fe,ge,ve){const Ie=new Int32Array(fe.size());let Qe=0;for(let De=0;De<ve;De++){const ze=ge[De],it=ge[De+ve];for(let ot=Qe;ot<Qe+ze;ot++)fe.get(ot)?Ie[ot]=it:(Ie[ot]=0,Qe++);Qe+=ze}return Ie})(oe,$,ce.runs)})(C,A,R,B);case ka.MORTON:return Xx(C),C;case ka.COMPONENTWISE_DELTA:return P2(C),C;case ka.NONE:return C=R?(function($,q){const te=new Int32Array($.size());let oe=0,ce=0;for(;ce!=te.length;++ce)if($.get(ce)){const fe=q[oe++];te[ce]=fe>>>1^-(1&fe)}else te[ce]=0;return te})(B,C):(function($,q){const te=new Int32Array($.size());let oe=0,ce=0;for(;ce!=te.length;++ce)te[ce]=$.get(ce)?q[oe++]:0;return te})(B,C),C;default:throw new Error("The specified Logical level technique is not supported")}})(u.physicalLevelTechnique===ph.FAST_PFOR?T2():no(d,l,u.numValues),u,m,b)}function Qy(d,l,u,m){const b=d.logicalLevelTechnique1;if(b===ka.RLE)return d.runs===1?Zs.CONST:Zs.FLAT;const C=l instanceof Kc?l.size():l;if(b===ka.DELTA&&d.logicalLevelTechnique2===ka.RLE){const A=d.runs,R=2;if(d.numRleValues!==C)return Zs.FLAT;if(A===1)return Zs.SEQUENCE;if(A===2){const B=m.get();let $;if(d.physicalLevelTechnique===ph.VARINT)$=no(u,m,4);else{const q=m.get();$=new Int32Array(u.buffer,u.byteOffset+q,4)}if(m.set(B),$[2]===R&&$[3]===R)return Zs.SEQUENCE}}return d.numValues===1?Zs.CONST:Zs.FLAT}class z2 extends Zy{getValueFromBuffer(l){return this.dataBuffer[l]}}class F2 extends C2{constructor(l,u,m,b){super(l,BigInt64Array.of(u),m,b)}getValueFromBuffer(l){return this.dataBuffer[0]+BigInt(l)*this.delta}}class gp{_geometryOffsets;_partOffsets;_ringOffsets;constructor(l,u,m){this._geometryOffsets=l,this._partOffsets=u,this._ringOffsets=m}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Kx(d,l,u){return{x:N2(d,l)-u,y:N2(d>>1,l)-u}}function N2(d,l){let u=0;for(let m=0;m<l;m++)u|=(d&1<<2*m)>>m;return u}(function(d){d[d.POINT=0]="POINT",d[d.LINESTRING=1]="LINESTRING",d[d.POLYGON=2]="POLYGON",d[d.MULTIPOINT=3]="MULTIPOINT",d[d.MULTILINESTRING=4]="MULTILINESTRING",d[d.MULTIPOLYGON=5]="MULTIPOLYGON"})(Ks||(Ks={})),(function(d){d[d.POINT=0]="POINT",d[d.LINESTRING=1]="LINESTRING",d[d.POLYGON=2]="POLYGON"})(A2||(A2={})),(function(d){d[d.MORTON=0]="MORTON",d[d.VEC_2=1]="VEC_2",d[d.VEC_3=2]="VEC_3"})(Jl||(Jl={}));class vR{createPoint(l){return[[l]]}createMultiPoint(l){return l.map((u=>[u]))}createLineString(l){return[l]}createMultiLineString(l){return l}createPolygon(l,u){return[l].concat(u)}createMultiPolygon(l){return l.flat()}}function B2(d){const l=new Array(d.numGeometries);let u=1,m=1,b=1,C=0;const A=new vR;let R=0,B=0;const $=d.mortonSettings,q=d.topologyVector,te=q.geometryOffsets,oe=q.partOffsets,ce=q.ringOffsets,fe=d.vertexOffsets,ge=d.containsPolygonGeometry(),ve=d.vertexBuffer;for(let Ie=0;Ie<d.numGeometries;Ie++){const Qe=d.geometryType(Ie);if(Qe===Ks.POINT){if(fe&&fe.length!==0)if(d.vertexBufferType===Jl.VEC_2){const De=2*fe[B++],ze=new h(ve[De],ve[De+1]);l[C++]=A.createPoint(ze)}else{const De=Kx(ve[fe[B++]],$.numBits,$.coordinateShift),ze=new h(De.x,De.y);l[C++]=A.createPoint(ze)}else{const De=new h(ve[R++],ve[R++]);l[C++]=A.createPoint(De)}te&&b++,oe&&u++,ce&&m++}else if(Qe===Ks.MULTIPOINT){const De=te[b]-te[b-1];b++;const ze=new Array(De);if(fe&&fe.length!==0){for(let it=0;it<De;it++){const ot=2*fe[B++];ze[it]=new h(ve[ot],ve[ot+1])}l[C++]=A.createMultiPoint(ze)}else{for(let it=0;it<De;it++){const ot=ve[R++],Ot=ve[R++];ze[it]=new h(ot,Ot)}l[C++]=A.createMultiPoint(ze)}}else if(Qe===Ks.LINESTRING){let De,ze=0;ge?(ze=ce[m]-ce[m-1],m++):ze=oe[u]-oe[u-1],u++,fe&&fe.length!==0?(De=d.vertexBufferType===Jl.VEC_2?Qx(ve,fe,B,ze,!1):ev(ve,fe,B,ze,!1,$),B+=ze):(De=Jx(ve,R,ze,!1),R+=2*ze),l[C++]=A.createLineString(De),te&&b++}else if(Qe===Ks.POLYGON){const De=oe[u]-oe[u-1];u++;const ze=new Array(De-1);let it=ce[m]-ce[m-1];if(m++,fe&&fe.length!==0){const ot=d.vertexBufferType===Jl.VEC_2?t0(ve,fe,B,it):i0(ve,fe,B,it,0,$);B+=it;for(let Ot=0;Ot<ze.length;Ot++)it=ce[m]-ce[m-1],m++,ze[Ot]=d.vertexBufferType===Jl.VEC_2?t0(ve,fe,B,it):i0(ve,fe,B,it,0,$),B+=it;l[C++]=A.createPolygon(ot,ze)}else{const ot=e0(ve,R,it);R+=2*it;for(let Ot=0;Ot<ze.length;Ot++)it=ce[m]-ce[m-1],m++,ze[Ot]=e0(ve,R,it),R+=2*it;l[C++]=A.createPolygon(ot,ze)}te&&b++}else if(Qe===Ks.MULTILINESTRING){const De=te[b]-te[b-1];b++;const ze=new Array(De);if(fe&&fe.length!==0){for(let it=0;it<De;it++){let ot=0;ge?(ot=ce[m]-ce[m-1],m++):ot=oe[u]-oe[u-1],u++;const Ot=d.vertexBufferType===Jl.VEC_2?Qx(ve,fe,B,ot,!1):ev(ve,fe,B,ot,!1,$);ze[it]=Ot,B+=ot}l[C++]=A.createMultiLineString(ze)}else{for(let it=0;it<De;it++){let ot=0;ge?(ot=ce[m]-ce[m-1],m++):ot=oe[u]-oe[u-1],u++,ze[it]=Jx(ve,R,ot,!1),R+=2*ot}l[C++]=A.createMultiLineString(ze)}}else{if(Qe!==Ks.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const De=te[b]-te[b-1];b++;const ze=new Array(De);let it=0;if(fe&&fe.length!==0){for(let ot=0;ot<De;ot++){const Ot=oe[u]-oe[u-1];u++;const ri=new Array(Ot-1);it=ce[m]-ce[m-1],m++;const Qt=d.vertexBufferType===Jl.VEC_2?t0(ve,fe,B,it):i0(ve,fe,B,it,0,$);B+=it;for(let di=0;di<ri.length;di++)it=ce[m]-ce[m-1],m++,ri[di]=d.vertexBufferType===Jl.VEC_2?t0(ve,fe,B,it):i0(ve,fe,B,it,0,$),B+=it;ze[ot]=A.createPolygon(Qt,ri)}l[C++]=A.createMultiPolygon(ze)}else{for(let ot=0;ot<De;ot++){const Ot=oe[u]-oe[u-1];u++;const ri=new Array(Ot-1);it=ce[m]-ce[m-1],m++;const Qt=e0(ve,R,it);R+=2*it;for(let di=0;di<ri.length;di++){const Ni=ce[m]-ce[m-1];m++,ri[di]=e0(ve,R,Ni),R+=2*Ni}ze[ot]=A.createPolygon(Qt,ri)}l[C++]=A.createMultiPolygon(ze)}}}}return l}function e0(d,l,u){return Jx(d,l,u,!0)}function t0(d,l,u,m){return Qx(d,l,u,m,!0)}function i0(d,l,u,m,b,C){return ev(d,l,u,m,!0,C)}function Jx(d,l,u,m){const b=new Array(m?u+1:u);for(let C=0;C<2*u;C+=2)b[C/2]=new h(d[l+C],d[l+C+1]);return m&&(b[b.length-1]=b[0]),b}function Qx(d,l,u,m,b){const C=new Array(b?m+1:m);for(let A=0;A<2*m;A+=2){const R=2*l[u+A/2];C[A/2]=new h(d[R],d[R+1])}return b&&(C[C.length-1]=C[0]),C}function ev(d,l,u,m,b,C){const A=new Array(b?m+1:m);for(let R=0;R<m;R++){const B=Kx(d[l[u+R]],C.numBits,C.coordinateShift);A[R]=new h(B.x,B.y)}return b&&(A[A.length-1]=A[0]),A}class j2{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(l,u,m,b,C){this._vertexBufferType=l,this._topologyVector=u,this._vertexOffsets=m,this._vertexBuffer=b,this._mortonSettings=C}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const l=B2(this);let u=0;for(;u<this.numGeometries;)yield{coordinates:l[u],type:this.geometryType(u)},u++}getSimpleEncodedVertex(l){const u=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[u],this.vertexBuffer[u+1]]}getVertex(l){if(this.vertexOffsets&&this.mortonSettings){const m=Kx(this.vertexBuffer[this.vertexOffsets[l]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[m.x,m.y]}const u=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[u],this.vertexBuffer[u+1]]}getGeometries(){return B2(this)}get mortonSettings(){return this._mortonSettings}}class V2 extends j2{_numGeometries;_geometryType;constructor(l,u,m,b,C,A,R){super(m,b,C,A,R),this._numGeometries=l,this._geometryType=u}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Ks.POLYGON||this._geometryType===Ks.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class H2 extends j2{_geometryTypes;constructor(l,u,m,b,C,A){super(l,m,b,C,A),this._geometryTypes=u}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let l=0;l<this.numGeometries;l++)if(this.geometryType(l)===Ks.POLYGON||this.geometryType(l)===Ks.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class U2{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(l,u,m,b){this._triangleOffsets=l,this._indexBuffer=u,this._vertexBuffer=m,this._topologyVector=b}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const l=new Array(this.numGeometries),u=this._topologyVector,m=u.partOffsets,b=u.ringOffsets,C=u.geometryOffsets;let A=0,R=1,B=1,$=1;for(let q=0;q<this.numGeometries;q++)switch(this.geometryType(q)){case Ks.POLYGON:{const te=m[R]-m[R-1];R++;const oe=[];for(let ce=0;ce<te;ce++){const fe=b[B]-b[B-1];B++;const ge=[];for(let ve=0;ve<fe;ve++){const Ie=this._vertexBuffer[A++],Qe=this._vertexBuffer[A++];ge.push(new h(Ie,Qe))}ge.length>0&&ge.push(ge[0]),oe.push(ge)}l[q]=oe,C&&$++}break;case Ks.MULTIPOLYGON:{const te=C[$]-C[$-1];$++;const oe=[];for(let ce=0;ce<te;ce++){const fe=m[R]-m[R-1];R++;for(let ge=0;ge<fe;ge++){const ve=b[B]-b[B-1];B++;const Ie=[];for(let Qe=0;Qe<ve;Qe++){const De=this._vertexBuffer[A++],ze=this._vertexBuffer[A++];Ie.push(new h(De,ze))}Ie.length>0&&Ie.push(Ie[0]),oe.push(Ie)}}l[q]=oe}}return l}[Symbol.iterator](){return null}}function $2(d,l,u,m,b,C){return new bR(d,l,u,m,b,C)}class bR extends U2{_numGeometries;_geometryType;constructor(l,u,m,b,C,A){super(m,b,C,A),this._numGeometries=l,this._geometryType=u}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function G2(d,l,u,m,b){return new wR(d,l,u,m,b)}class wR extends U2{_geometryTypes;constructor(l,u,m,b,C){super(u,m,b,C),this._geometryTypes=l}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function SR(d,l,u,m,b){const C=Ho(d,u);let A=null,R=null,B=null,$=null,q=null,te=null,oe=null,ce=null;if(Qy(C,m,d,u)===Zs.CONST){const ge=qx(d,u,C,!1);for(let ve=0;ve<l-1;ve++){const Ie=Ho(d,u);switch(Ie.physicalStreamType){case go.LENGTH:switch(Ie.logicalStreamType.lengthType){case Tl.GEOMETRIES:A=Yh(d,u,Ie);break;case Tl.PARTS:R=Yh(d,u,Ie);break;case Tl.RINGS:B=Yh(d,u,Ie);break;case Tl.TRIANGLES:oe=Yh(d,u,Ie)}break;case go.OFFSET:switch(Ie.logicalStreamType.offsetType){case $d.VERTEX:$=Uo(d,u,Ie,!1);break;case $d.INDEX:ce=Uo(d,u,Ie,!1)}break;case go.DATA:Zc.VERTEX===Ie.logicalStreamType.dictionaryType?q=Uo(d,u,Ie,!0):(te={numBits:Ie.numBits,coordinateShift:Ie.coordinateShift},q=Uo(d,u,Ie,!1))}}return ce!==null?A!=null||R!=null?$2(m,ge,oe,ce,q,new gp(A,R,B)):$2(m,ge,oe,ce,q):te===null?(function(ve,Ie,Qe,De,ze){return new V2(ve,Ie,Jl.VEC_2,Qe,De,ze)})(m,ge,new gp(A,R,B),$,q):(function(ve,Ie,Qe,De,ze,it){return new V2(ve,Ie,Jl.MORTON,Qe,De,ze,it)})(m,ge,new gp(A,R,B),$,q,te)}const fe=Uo(d,u,C,!1);for(let ge=0;ge<l-1;ge++){const ve=Ho(d,u);switch(ve.physicalStreamType){case go.LENGTH:switch(ve.logicalStreamType.lengthType){case Tl.GEOMETRIES:A=Uo(d,u,ve,!1);break;case Tl.PARTS:R=Uo(d,u,ve,!1);break;case Tl.RINGS:B=Uo(d,u,ve,!1);break;case Tl.TRIANGLES:oe=Yh(d,u,ve)}break;case go.OFFSET:switch(ve.logicalStreamType.offsetType){case $d.VERTEX:$=Uo(d,u,ve,!1);break;case $d.INDEX:ce=Uo(d,u,ve,!1)}break;case go.DATA:Zc.VERTEX===ve.logicalStreamType.dictionaryType?q=Uo(d,u,ve,!0):(te={numBits:ve.numBits,coordinateShift:ve.coordinateShift},q=Uo(d,u,ve,!1))}}return ce!==null&&R===null?G2(fe,oe,ce,q):(A!==null?(A=tv(fe,A,2),R!==null&&B!==null?(R=W2(fe,A,R,!1),B=(function(ge,ve,Ie,Qe){const De=new Int32Array(Ie[Ie.length-1]+1);let ze=0;De[0]=ze;let it=1,ot=1,Ot=0;for(let ri=0;ri<ge.length;ri++){const Qt=ge[ri],di=ve[ri+1]-ve[ri];if(Qt!==0&&Qt!==3)for(let Ni=0;Ni<di;Ni++){const gi=Ie[it]-Ie[it-1];it++;for(let ti=0;ti<gi;ti++)ze=De[ot++]=ze+Qe[Ot++]}else for(let Ni=0;Ni<di;Ni++)De[ot++]=++ze,it++}return De})(fe,A,R,B)):R!==null&&(R=(function(ge,ve,Ie){const Qe=new Int32Array(ve[ve.length-1]+1);let De=0;Qe[0]=De;let ze=1,it=0;for(let ot=0;ot<ge.length;ot++){const Ot=ge[ot],ri=ve[ot+1]-ve[ot];if(Ot===4||Ot===1)for(let Qt=0;Qt<ri;Qt++)De=Qe[ze++]=De+Ie[it++];else for(let Qt=0;Qt<ri;Qt++)Qe[ze++]=++De}return Qe})(fe,A,R))):R!==null&&B!==null?(R=tv(fe,R,1),B=W2(fe,R,B,!0)):R!==null&&(R=tv(fe,R,0)),ce!==null?G2(fe,oe,ce,q,new gp(A,R,B)):te===null?(function(ge,ve,Ie,Qe){return new H2(Jl.VEC_2,ge,ve,Ie,Qe)})(fe,new gp(A,R,B),$,q):(function(ge,ve,Ie,Qe,De){return new H2(Jl.MORTON,ge,ve,Ie,Qe,De)})(fe,new gp(A,R,B),$,q,te))}function tv(d,l,u){const m=new Int32Array(d.length+1);let b=0;m[0]=b;let C=0;for(let A=0;A<d.length;A++)b=m[A+1]=b+(d[A]>u?l[C++]:1);return m}function W2(d,l,u,m){const b=new Int32Array(l[l.length-1]+1);let C=0;b[0]=C;let A=1,R=0;for(let B=0;B<d.length;B++){const $=d[B],q=l[B+1]-l[B];if($===5||$===2||m&&($===4||$===1))for(let te=0;te<q;te++)C=b[A++]=C+u[R++];else for(let te=0;te<q;te++)b[A++]=++C}return b}class kR extends fp{dataVector;constructor(l,u,m){super(l,u.getBuffer(),m),this.dataVector=u}getValueFromBuffer(l){return this.dataVector.get(l)}}class CR extends Zy{getValueFromBuffer(l){return this.dataBuffer[l]}}class X2 extends fp{constructor(l,u,m){super(l,BigInt64Array.of(u),m)}getValueFromBuffer(l){return this.dataBuffer[0]}}function Yg(d,l,u){return Y2(d,Math.ceil(l/8),u)}function Y2(d,l,u){const m=new Uint8Array(l);let b=0;for(;b<l;){const C=d[u.increment()];if(C<=127){const A=C+3,R=d[u.increment()],B=b+A;m.fill(R,b,B),b=B}else{const A=256-C;for(let R=0;R<A;R++)m[b++]=d[u.increment()]}}return m}const AR=new TextDecoder;function iv(d,l,u){return u-l>=12?AR.decode(d.subarray(l,u)):(function(m,b,C){let A="",R=b;for(;R<C;){const B=m[R];let $,q,te,oe=null,ce=B>239?4:B>223?3:B>191?2:1;if(R+ce>C)break;ce===1?B<128&&(oe=B):ce===2?($=m[R+1],(192&$)==128&&(oe=(31&B)<<6|63&$,oe<=127&&(oe=null))):ce===3?($=m[R+1],q=m[R+2],(192&$)==128&&(192&q)==128&&(oe=(15&B)<<12|(63&$)<<6|63&q,(oe<=2047||oe>=55296&&oe<=57343)&&(oe=null))):ce===4&&($=m[R+1],q=m[R+2],te=m[R+3],(192&$)==128&&(192&q)==128&&(192&te)==128&&(oe=(15&B)<<18|(63&$)<<12|(63&q)<<6|63&te,(oe<=65535||oe>=1114112)&&(oe=null))),oe===null?(oe=65533,ce=1):oe>65535&&(oe-=65536,A+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),A+=String.fromCharCode(oe),R+=ce}return A})(d,l,u)}class nv extends fp{offsetBuffer;constructor(l,u,m,b){super(l,m,b),this.offsetBuffer=u}}class q2 extends nv{textEncoder;constructor(l,u,m,b){super(l,u,m,b??u.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(l){return iv(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class mp extends nv{indexBuffer;textEncoder;constructor(l,u,m,b,C){super(l,m,b,C??u.length),this.indexBuffer=u,this.indexBuffer=u,this.textEncoder=new TextEncoder}getValueFromBuffer(l){const u=this.indexBuffer[l];return iv(this.dataBuffer,this.offsetBuffer[u],this.offsetBuffer[u+1])}}class Z2 extends nv{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(l,u,m,b,C,A,R){super(l,m,b,R),this.indexBuffer=u,this.symbolOffsetBuffer=C,this.symbolTableBuffer=A,this.textEncoder=new TextEncoder}getValueFromBuffer(l){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(m,b,C){const A=[],R=new Array(b.length).fill(0);for(let B=1;B<b.length;B++)R[B]=R[B-1]+b[B-1];for(let B=0;B<C.length;B++)if(C[B]===255)A.push(C[++B]);else{const $=b[C[B]],q=R[C[B]];for(let te=0;te<$;te++)A.push(m[q+te])}return new Uint8Array(A)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const u=this.indexBuffer[l];return iv(this.decodedDictionary,this.offsetBuffer[u],this.offsetBuffer[u+1])}offsetToLengthBuffer(l){const u=new Uint32Array(l.length-1);let m=l[0];for(let b=1;b<l.length;b++){const C=l[b];u[b-1]=C-m,m=C}return u}}function TR(d,l,u,m,b,C){return u.type==="scalarType"?(function(A,R,B,$,q,te){let oe=null,ce=0;if(A===0)return null;if(te.nullable){const ge=Ho(R,B);ce=ge.numValues;const ve=B.get(),Ie=Yg(R,ce,B);B.set(ve+ge.byteLength),oe=new Kc(Ie,ge.numValues)}const fe=oe??$;switch(q.physicalType){case 4:case 3:return(function(ge,ve,Ie,Qe,De){const ze=Ho(ge,ve),it=Qy(ze,De,ge,ve),ot=Qe.physicalType===3;if(it===Zs.FLAT){const Ot=qg(De)?Zx(ge,ve,ze,ot,De):Uo(ge,ve,ze,ot);return new Ux(Ie.name,Ot,De)}if(it===Zs.SEQUENCE){const Ot=L2(ge,ve,ze);return new Gx(Ie.name,Ot[0],Ot[1],ze.numRleValues)}{const Ot=qx(ge,ve,ze,ot);return new Wx(Ie.name,Ot,De)}})(R,B,te,q,fe);case 9:return(function(ge,ve,Ie,Qe,De){let ze=null,it=null,ot=null,Ot=null,ri=null,Qt=null,di=null,Ni=null;for(let gi=0;gi<Qe;gi++){const ti=Ho(ve,Ie);if(ti.byteLength!==0)switch(ti.physicalStreamType){case go.PRESENT:{const $t=Yg(ve,ti.numValues,Ie);Qt=new Kc($t,ti.numValues);break}case go.OFFSET:it=De!=null||Qt!=null?Zx(ve,Ie,ti,!1,De??Qt):Uo(ve,Ie,ti,!1);break;case go.LENGTH:{const $t=Yh(ve,Ie,ti);Tl.DICTIONARY===ti.logicalStreamType.lengthType?ze=$t:Tl.SYMBOL===ti.logicalStreamType.lengthType?Ot=$t:di=$t;break}case go.DATA:{const $t=ve.subarray(Ie.get(),Ie.get()+ti.byteLength);Ie.add(ti.byteLength);const tn=ti.logicalStreamType.dictionaryType;Zc.FSST===tn?ri=$t:Zc.SINGLE===tn||Zc.SHARED===tn?ot=$t:Zc.NONE===tn&&(Ni=$t);break}}}return(function(gi,ti,$t,tn,qi,dn,Gi){return ti?new Z2(gi,$t,tn,qi,dn,ti,Gi):null})(ge,ri,it,ze,ot,Ot,De??Qt)??(function(gi,ti,$t,tn,qi){return ti?qi?new mp(gi,$t,tn,ti,qi):new mp(gi,$t,tn,ti):null})(ge,ot,it,ze,De??Qt)??(function(gi,ti,$t,tn,qi){if(!ti||!$t)return null;if(tn)return qi?new mp(gi,tn,ti,$t,qi):new mp(gi,tn,ti,$t);if(qi&&qi.size()!==ti.length-1){const dn=new Int32Array(qi.size());let Gi=0;for(let Rn=0;Rn<qi.size();Rn++)dn[Rn]=qi.get(Rn)?Gi++:0;return new mp(gi,dn,ti,$t,qi)}return qi?new q2(gi,ti,$t,qi):new q2(gi,ti,$t)})(ge,di,Ni,it,De??Qt)})(te.name,R,B,te.nullable?A-1:A,oe);case 0:return(function(ge,ve,Ie,Qe,De){const ze=Ho(ge,ve),it=ze.numValues,ot=ve.get(),Ot=qg(De)?(function(Qt,di,Ni,gi){const ti=Y2(Qt,Math.ceil(di/8),Ni),$t=new Kc(ti,di),tn=gi.size(),qi=new Kc(new Uint8Array(tn),tn);let dn=0;for(let Gi=0;Gi<gi.size();Gi++){const Rn=!!gi.get(Gi)&&$t.get(dn++);qi.set(Gi,Rn)}return qi.getBuffer()})(ge,it,ve,De):Yg(ge,it,ve);ve.set(ot+ze.byteLength);const ri=new Kc(Ot,it);return new kR(Ie.name,ri,De)})(R,B,te,0,fe);case 6:case 5:return(function(ge,ve,Ie,Qe,De){const ze=Ho(ge,ve),it=Qy(ze,Qe,ge,ve),ot=De.physicalType===5;if(it===Zs.FLAT){const Ot=qg(Qe)?(function(ri,Qt,di,Ni,gi){return(function(ti,$t,tn,qi){switch($t.logicalLevelTechnique1){case ka.DELTA:return $t.logicalLevelTechnique2===ka.RLE&&(ti=M2(ti,$t.runs,$t.numRleValues)),(function(dn,Gi){const Rn=new BigInt64Array(dn.size());let La=0;dn.get(0)?(Rn[0]=dn.get(0)?Gi[0]>>1n^-(1n&Gi[0]):0n,La=1):Rn[0]=0n;let xa=1;for(;xa!=Rn.length;++xa)Rn[xa]=dn.get(xa)?Rn[xa-1]+(Gi[La]>>1n^-(1n&Gi[La++])):Rn[xa-1];return Rn})(qi,ti);case ka.RLE:return(function(dn,Gi,Rn,La){const xa=Gi;return Rn?(function(Br,yo,Es){const jr=new BigInt64Array(Br.size());let Dr=0;for(let Xa=0;Xa<Es;Xa++){const is=Number(yo[Xa]);let hs=yo[Xa+Es];hs=hs>>1n^-(1n&hs);for(let Cr=Dr;Cr<Dr+is;Cr++)Br.get(Cr)?jr[Cr]=hs:(jr[Cr]=0n,Dr++);Dr+=is}return jr})(La,dn,xa.runs):(function(Br,yo,Es){const jr=new BigInt64Array(Br.size());let Dr=0;for(let Xa=0;Xa<Es;Xa++){const is=Number(yo[Xa]),hs=yo[Xa+Es];for(let Cr=Dr;Cr<Dr+is;Cr++)Br.get(Cr)?jr[Cr]=hs:(jr[Cr]=0n,Dr++);Dr+=is}return jr})(La,dn,xa.runs)})(ti,$t,tn,qi);case ka.NONE:return ti=tn?(function(dn,Gi){const Rn=new BigInt64Array(dn.size());let La=0,xa=0;for(;xa!=Rn.length;++xa)if(dn.get(xa)){const Br=Gi[La++];Rn[xa]=Br>>1n^-(1n&Br)}else Rn[xa]=0n;return Rn})(qi,ti):(function(dn,Gi){const Rn=new BigInt64Array(dn.size());let La=0,xa=0;for(;xa!=Rn.length;++xa)Rn[xa]=dn.get(xa)?Gi[La++]:0n;return Rn})(qi,ti),ti;default:throw new Error("The specified Logical level technique is not supported")}})(Ky(ri,Qt,di.numValues),di,Ni,gi)})(ge,ve,ze,ot,Qe):R2(ge,ve,ze,ot);return new z2(Ie.name,Ot,Qe)}if(it===Zs.SEQUENCE){const Ot=D2(ge,ve,ze);return new F2(Ie.name,Ot[0],Ot[1],ze.numRleValues)}{const Ot=O2(ge,ve,ze,ot);return new X2(Ie.name,Ot,Qe)}})(R,B,te,fe,q);case 7:return(function(ge,ve,Ie,Qe){const De=Ho(ge,ve),ze=qg(Qe)?(function(it,ot,Ot,ri){const Qt=ot.get(),di=Qt+ri*Float32Array.BYTES_PER_ELEMENT,Ni=new Uint8Array(it.subarray(Qt,di)).buffer,gi=new Float32Array(Ni);ot.set(di);const ti=Ot.size(),$t=new Float32Array(ti);let tn=0;for(let qi=0;qi<ti;qi++)$t[qi]=Ot.get(qi)?gi[tn++]:0;return $t})(ge,ve,Qe,De.numValues):(function(it,ot,Ot){const ri=ot.get(),Qt=ri+Ot*Float32Array.BYTES_PER_ELEMENT,di=new Uint8Array(it.subarray(ri,Qt)).buffer,Ni=new Float32Array(di);return ot.set(Qt),Ni})(ge,ve,De.numValues);return new CR(Ie.name,ze,Qe)})(R,B,te,fe);case 8:return(function(ge,ve,Ie,Qe){const De=Ho(ge,ve),ze=qg(Qe)?(function(it,ot,Ot,ri){const Qt=ot.get(),di=Qt+ri*Float64Array.BYTES_PER_ELEMENT,Ni=new Uint8Array(it.subarray(Qt,di)).buffer,gi=new Float64Array(Ni);ot.set(di);const ti=Ot.size(),$t=new Float64Array(ti);let tn=0;for(let qi=0;qi<ti;qi++)$t[qi]=Ot.get(qi)?gi[tn++]:0;return $t})(ge,ve,Qe,De.numValues):(function(it,ot,Ot){const ri=ot.get(),Qt=ri+Ot*Float64Array.BYTES_PER_ELEMENT,di=new Uint8Array(it.subarray(ri,Qt)).buffer,Ni=new Float64Array(di);return ot.set(Qt),Ni})(ge,ve,De.numValues);return new $x(Ie.name,ze,Qe)})(R,B,te,fe);default:throw new Error(`The specified data type for the field is currently not supported: ${q}`)}})(m,d,l,b,u.scalarType,u):m!=1?null:(function(A,R,B,$){let q=null,te=null,oe=null,ce=null,fe=!1;for(;!fe;){const Qe=Ho(A,R);switch(Qe.physicalStreamType){case go.LENGTH:Tl.DICTIONARY===Qe.logicalStreamType.lengthType?q=Yh(A,R,Qe):oe=Yh(A,R,Qe);break;case go.DATA:Zc.SINGLE===Qe.logicalStreamType.dictionaryType||Zc.SHARED===Qe.logicalStreamType.dictionaryType?(te=A.subarray(R.get(),R.get()+Qe.byteLength),fe=!0):ce=A.subarray(R.get(),R.get()+Qe.byteLength),R.add(Qe.byteLength)}}const ge=B.complexType.children,ve=[];let Ie=0;for(const Qe of ge){const De=no(A,R,1)[0];if(De==0)continue;const ze=`${B.name}${Qe.name==="default"?"":":"+Qe.name}`;if(De!==2||Qe.type!=="scalarField"||Qe.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const it=Ho(A,R),ot=Yg(A,it.numValues,R),Ot=Ho(A,R),ri=Ot.decompressedCount!==$?Zx(A,R,Ot,!1,new Kc(ot,it.numValues)):Uo(A,R,Ot,!1);ve[Ie++]=ce?new Z2(ze,ri,q,te,oe,ce,new Kc(ot,it.numValues)):new mp(ze,ri,q,te,new Kc(ot,it.numValues))}return ve})(d,l,u,b)}function qg(d){return d instanceof Kc}function ER(d){if(d.name==="id")return!1;if(d.type==="scalarType"){const l=d.scalarType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(l.type==="logicalType")return!1}else if(d.type==="complexType"){const l=d.complexType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",d),!1}const MR=new TextDecoder;function K2(d,l){const u=no(d,l,1)[0];if(u===0)return"";const m=l.get(),b=d.subarray(m,m+u);return l.add(u),MR.decode(b)}function J2(d,l){const u=no(d,l,1)[0]>>>0,m=!!(4&u),b=!!(2&u),C=no(d,l,1)[0]>>>0,A={};if(1&u&&(A.nullable=!0),b){const R={};if(m?(R.type="logicalType",R.logicalType=C):(R.type="physicalType",R.physicalType=C),8&u){const B=no(d,l,1)[0]>>>0;R.children=new Array(B);for(let $=0;$<B;$++)R.children[$]=J2(d,l)}A.type="complexField",A.complexField=R}else{const R={};m?(R.type="logicalType",R.logicalType=C):(R.type="physicalType",R.physicalType=C),A.type="scalarField",A.scalarField=R}return A}function IR(d,l){const u=no(d,l,1)[0]>>>0,m=(function(b){switch(b){case 0:case 1:case 2:case 3:{const C={};C.nullable=!!(1&b),C.columnScope=0;const A={};return A.physicalType=b>1?6:4,A.type="physicalType",C.scalarType=A,C.type="scalarType",C}case 4:{const C={nullable:!1,columnScope:0},A={type:"physicalType",physicalType:0};return C.type="complexType",C.complexType=A,C}case 30:{const C={nullable:!1,columnScope:0},A={type:"physicalType",physicalType:1};return C.type="complexType",C.complexType=A,C}default:return(function(C){let A=null;switch(C){case 10:case 11:A=0;break;case 12:case 13:A=1;break;case 14:case 15:A=2;break;case 16:case 17:A=3;break;case 18:case 19:A=4;break;case 20:case 21:A=5;break;case 22:case 23:A=6;break;case 24:case 25:A=7;break;case 26:case 27:A=8;break;case 28:case 29:A=9;break;default:return null}const R={};R.nullable=!!(1&C),R.columnScope=0;const B={type:"physicalType"};return B.physicalType=A,R.type="scalarType",R.scalarType=B,R})(b)}})(u);if(!m)throw new Error(`Unsupported column type code: ${u}`);if((function(b){return b>=10})(u)?m.name=K2(d,l):u>=0&&u<=3?m.name="id":u===4&&(m.name="geometry"),(function(b){return b===30})(u)){const b=no(d,l,1)[0]>>>0,C=m.complexType;C.children=new Array(b);for(let A=0;A<b;A++)C.children[A]=J2(d,l)}return m}function PR(d,l){const u={featureTables:[]},m={};m.name=K2(d,l);const b=no(d,l,1)[0]>>>0,C=no(d,l,1)[0]>>>0;m.columns=new Array(C);for(let A=0;A<C;A++)m.columns[A]=IR(d,l);return u.featureTables.push(m),[u,b]}function LR(d,l,u,m,b,C,A=!1){const R=l.scalarType.physicalType,B=Qy(b,C,d,u);if(R===4)switch(B){case Zs.FLAT:{const $=Uo(d,u,b,!1);return new Ux(m,$,C)}case Zs.SEQUENCE:{const $=L2(d,u,b);return new Gx(m,$[0],$[1],b.numRleValues)}case Zs.CONST:{const $=qx(d,u,b,!1);return new Wx(m,$,C)}}else switch(B){case Zs.FLAT:{if(A){const q=(function(te,oe,ce,fe){const ge=(function(ve,Ie,Qe){const De=new Float64Array(Ie);for(let ze=0;ze<Ie;ze++)De[ze]=_R(ve,Qe);return De})(te,ce.numValues,oe);return(function(ve,Ie,Qe){switch(Ie.logicalLevelTechnique1){case ka.DELTA:return Ie.logicalLevelTechnique2===ka.RLE&&(ve=I2(ve,Ie.runs,Ie.numRleValues)),(function(De){De[0]=De[0]%2==1?(De[0]+1)/-2:De[0]/2;const ze=De.length/4*4;let it=1;if(ze>=4)for(;it<ze-4;it+=4){const ot=De[it],Ot=De[it+1],ri=De[it+2],Qt=De[it+3];De[it]=(ot%2==1?(ot+1)/-2:ot/2)+De[it-1],De[it+1]=(Ot%2==1?(Ot+1)/-2:Ot/2)+De[it],De[it+2]=(ri%2==1?(ri+1)/-2:ri/2)+De[it+1],De[it+3]=(Qt%2==1?(Qt+1)/-2:Qt/2)+De[it+2]}for(;it!=De.length;++it)De[it]=(De[it]%2==1?(De[it]+1)/-2:De[it]/2)+De[it-1]})(ve),ve;case ka.RLE:return(function(De,ze,it){return I2(De,ze.runs,ze.numRleValues)})(ve,Ie);case ka.NONE:return ve;default:throw new Error(`The specified Logical level technique is not supported: ${Ie.logicalLevelTechnique1}`)}})(ge,ce)})(d,u,b);return new $x(m,q,C)}const $=R2(d,u,b,!1);return new z2(m,$,C)}case Zs.SEQUENCE:{const $=D2(d,u,b);return new F2(m,$[0],$[1],b.numRleValues)}case Zs.CONST:{const $=O2(d,u,b,!1);return new X2(m,$,C)}}throw new Error("Vector type not supported for id column.")}class DR{constructor(l,u){var m;switch(this._featureData=l,this.properties=this._featureData.properties||{},(m=this._featureData.geometry)===null||m===void 0?void 0:m.type){case Ks.POINT:case Ks.MULTIPOINT:this.type=1;break;case Ks.LINESTRING:case Ks.MULTILINESTRING:this.type=2;break;case Ks.POLYGON:case Ks.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=u,this.id=Number(this._featureData.id)}loadGeometry(){const l=[];for(const u of this._featureData.geometry.coordinates){const m=[];for(const b of u)m.push(new h(b.x,b.y));l.push(m)}return l}}class RR{constructor(l){this.features=[],this.featureTable=l,this.name=l.name,this.extent=l.extent,this.version=2,this.features=l.getFeatures(),this.length=this.features.length}feature(l){return new DR(this.features[l],this.extent)}}class Q2{constructor(l){this.layers={};const u=(function(m,b,C=!0){const A=new yR(0),R=[];for(;A.get()<m.length;){const B=no(m,A,1)[0]>>>0,$=A.get()+B;if($>m.length)throw new Error(`Block overruns tile: ${$} > ${m.length}`);if(no(m,A,1)[0]>>>0!=1){A.set($);continue}const q=PR(m,A),te=q[1],oe=q[0].featureTables[0];let ce=null,fe=null;const ge=[];let ve=0;for(const Qe of oe.columns){const De=Qe.name;if(De==="id"){let ze=null;if(Qe.nullable){const ot=Ho(m,A),Ot=A.get(),ri=Yg(m,ot.numValues,A);A.set(Ot+ot.byteLength),ze=new Kc(ri,ot.numValues)}const it=Ho(m,A);ve=it.decompressedCount,ce=LR(m,Qe,A,De,it,ze??ve,C)}else if(De==="geometry"){const ze=no(m,A,1)[0];if(ve===0){const it=A.get();ve=Ho(m,A).decompressedCount,A.set(it)}fe=SR(m,ze,A,ve)}else{const ze=ER(Qe)?no(m,A,1)[0]:1;if(ze===0&&Qe.type==="scalarType")continue;const it=TR(m,A,Qe,ze,ve);if(it)if(Array.isArray(it))for(const ot of it)ge.push(ot);else ge.push(it)}}const Ie=new mR(oe.name,fe,ce,ge,te);R.push(Ie),A.set($)}return R})(new Uint8Array(l));this.layers=u.reduce(((m,b)=>Object.assign(Object.assign({},m),{[b.name]:new RR(b)})),{})}}class OR{constructor(l,u){this.feature=l,this.type=l.type,this.properties=l.tags?l.tags:{},this.extent=u,"id"in l&&(typeof l.id=="string"?this.id=parseInt(l.id,10):typeof l.id!="number"||isNaN(l.id)||(this.id=l.id))}loadGeometry(){const l=[],u=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const m of u){const b=[];for(const C of m)b.push(new h(C[0],C[1]));l.push(b)}return l}}const Zg="_geojsonTileLayer";function zR(d,l){l.writeVarintField(15,d.version||1),l.writeStringField(1,d.name||""),l.writeVarintField(5,d.extent||4096);const u={keys:[],values:[],keycache:{},valuecache:{}};for(let C=0;C<d.length;C++)u.feature=d.feature(C),l.writeMessage(2,FR,u);const m=u.keys;for(const C of m)l.writeStringField(3,C);const b=u.values;for(const C of b)l.writeMessage(4,jR,C)}function FR(d,l){if(!d.feature)return;const u=d.feature;u.id!==void 0&&l.writeVarintField(1,u.id),l.writeMessage(2,NR,d),l.writeVarintField(3,u.type),l.writeMessage(4,BR,u)}function NR(d,l){for(const u in d.feature?.properties){let m=d.feature.properties[u],b=d.keycache[u];if(m==null)continue;b===void 0&&(d.keys.push(u),b=d.keys.length-1,d.keycache[u]=b),l.writeVarint(b),typeof m!="string"&&typeof m!="boolean"&&typeof m!="number"&&(m=JSON.stringify(m));const C=typeof m+":"+m;let A=d.valuecache[C];A===void 0&&(d.values.push(m),A=d.values.length-1,d.valuecache[C]=A),l.writeVarint(A)}}function av(d,l){return(l<<3)+(7&d)}function ek(d){return d<<1^d>>31}function BR(d,l){const u=d.loadGeometry(),m=d.type;let b=0,C=0;for(const A of u){let R=1;m===1&&(R=A.length),l.writeVarint(av(1,R));const B=m===3?A.length-1:A.length;for(let $=0;$<B;$++){$===1&&m!==1&&l.writeVarint(av(2,B-1));const q=A[$].x-b,te=A[$].y-C;l.writeVarint(ek(q)),l.writeVarint(ek(te)),b+=q,C+=te}d.type===3&&l.writeVarint(av(7,1))}}function jR(d,l){const u=typeof d;u==="string"?l.writeStringField(1,d):u==="boolean"?l.writeBooleanField(7,d):u==="number"&&(d%1!=0?l.writeDoubleField(3,d):d<0?l.writeSVarintField(6,d):l.writeVarintField(5,d))}class tk{constructor(l,u){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Au(Dt,16,0),this.grid3D=new Au(Dt,16,0),this.featureIndexArray=new Ee,this.promoteId=u}insert(l,u,m,b,C,A){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,b,C);const B=A?this.grid3D:this.grid;for(let $=0;$<u.length;$++){const q=u[$],te=[1/0,1/0,-1/0,-1/0];for(let oe=0;oe<q.length;oe++){const ce=q[oe];te[0]=Math.min(te[0],ce.x),te[1]=Math.min(te[1],ce.y),te[2]=Math.max(te[2],ce.x),te[3]=Math.max(te[3],ce.y)}te[0]<Dt&&te[1]<Dt&&te[2]>=0&&te[3]>=0&&B.insert(R,te[0],te[1],te[2],te[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new jS(new Gy(this.rawTileData)).layers:new Q2(this.rawTileData).layers,this.sourceLayerCoder=new S2(this.vtLayers?Object.keys(this.vtLayers).sort():[Zg])),this.vtLayers}query(l,u,m,b){this.loadVTLayers();const C=l.params,A=Dt/l.tileSize/l.scale,R=bl(C.filter,C.globalState),B=l.queryGeometry,$=l.queryPadding*A,q=Ud.fromPoints(B),te=this.grid.query(q.minX-$,q.minY-$,q.maxX+$,q.maxY+$),oe=Ud.fromPoints(l.cameraQueryGeometry).expandBy($),ce=this.grid3D.query(oe.minX,oe.minY,oe.maxX,oe.maxY,((ve,Ie,Qe,De)=>(function(ze,it,ot,Ot,ri){for(const di of ze)if(it<=di.x&&ot<=di.y&&Ot>=di.x&&ri>=di.y)return!0;const Qt=[new h(it,ot),new h(it,ri),new h(Ot,ri),new h(Ot,ot)];if(ze.length>2){for(const di of Qt)if(ap(ze,di))return!0}for(let di=0;di<ze.length-1;di++)if(HL(ze[di],ze[di+1],Qt))return!0;return!1})(l.cameraQueryGeometry,ve-$,Ie-$,Qe+$,De+$)));for(const ve of ce)te.push(ve);te.sort(VR);const fe={};let ge;for(let ve=0;ve<te.length;ve++){const Ie=te[ve];if(Ie===ge)continue;ge=Ie;const Qe=this.featureIndexArray.get(Ie);let De=null;this.loadMatchingFeature(fe,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,R,C.layers,C.availableImages,u,m,b,((ze,it,ot)=>(De||(De=Iu(ze)),it.queryIntersectsFeature({queryGeometry:B,feature:ze,featureState:ot,geometry:De,zoom:this.z,transform:l.transform,pixelsToTileUnits:A,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return fe}loadMatchingFeature(l,u,m,b,C,A,R,B,$,q,te){const oe=this.bucketLayerIDs[u];if(A&&!oe.some((ve=>A.has(ve))))return;const ce=this.sourceLayerCoder.decode(m),fe=this.vtLayers[ce].feature(b);if(C.needGeometry){const ve=Pu(fe,!0);if(!C.filter(new sr(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!C.filter(new sr(this.tileID.overscaledZ),fe))return;const ge=this.getId(fe,ce);for(let ve=0;ve<oe.length;ve++){const Ie=oe[ve];if(A&&!A.has(Ie))continue;const Qe=B[Ie];if(!Qe)continue;let De={};ge&&q&&(De=q.getState(Qe.sourceLayer||Zg,ge));const ze=bi({},$[Ie]);ze.paint=ik(ze.paint,Qe.paint,fe,De,R),ze.layout=ik(ze.layout,Qe.layout,fe,De,R);const it=!te||te(fe,Qe,De);if(!it)continue;const ot=new k2(fe,this.z,this.x,this.y,ge);ot.layer=ze;let Ot=l[Ie];Ot===void 0&&(Ot=l[Ie]=[]),Ot.push({featureIndex:b,feature:ot,intersectionZ:it})}}lookupSymbolFeatures(l,u,m,b,C,A,R,B){const $={};this.loadVTLayers();const q=bl(C.filterSpec,C.globalState);for(const te of l)this.loadMatchingFeature($,m,b,te,q,A,R,B,u);return $}hasLayer(l){for(const u of this.bucketLayerIDs)for(const m of u)if(l===m)return!0;return!1}getId(l,u){var m;let b=l.id;return this.promoteId&&(b=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&(!((m=l.properties)===null||m===void 0)&&m.cluster)&&this.promoteId&&(b=Number(l.properties.cluster_id))),b}}function ik(d,l,u,m,b){return Li(d,((C,A)=>{const R=l instanceof Ld?l.get(A):null;return R&&R.evaluate?R.evaluate(u,m,b):R}))}function VR(d,l){return l-d}function nk(d,l,u,m,b){const C=[];for(let A=0;A<d.length;A++){const R=d[A];let B;for(let $=0;$<R.length-1;$++){let q=R[$],te=R[$+1];q.x<l&&te.x<l||(q.x<l?q=new h(l,q.y+(l-q.x)/(te.x-q.x)*(te.y-q.y))._round():te.x<l&&(te=new h(l,q.y+(l-q.x)/(te.x-q.x)*(te.y-q.y))._round()),q.y<u&&te.y<u||(q.y<u?q=new h(q.x+(u-q.y)/(te.y-q.y)*(te.x-q.x),u)._round():te.y<u&&(te=new h(q.x+(u-q.y)/(te.y-q.y)*(te.x-q.x),u)._round()),q.x>=m&&te.x>=m||(q.x>=m?q=new h(m,q.y+(m-q.x)/(te.x-q.x)*(te.y-q.y))._round():te.x>=m&&(te=new h(m,q.y+(m-q.x)/(te.x-q.x)*(te.y-q.y))._round()),q.y>=b&&te.y>=b||(q.y>=b?q=new h(q.x+(b-q.y)/(te.y-q.y)*(te.x-q.x),b)._round():te.y>=b&&(te=new h(q.x+(b-q.y)/(te.y-q.y)*(te.x-q.x),b)._round()),B&&q.equals(B[B.length-1])||(B=[q],C.push(B)),B.push(te)))))}}return C}function ak(d,l,u,m,b){switch(l){case 1:return(function(C,A,R,B){const $=[];for(const q of C)for(const te of q){const oe=B===0?te.x:te.y;oe>=A&&oe<=R&&$.push([te])}return $})(d,u,m,b);case 2:return rk(d,u,m,b,!1);case 3:return rk(d,u,m,b,!0)}return[]}function HR(d,l,u,m,b){const C=m===0?UR:$R;let A=[];const R=[];for(let q=0;q<d.length-1;q++){const te=d[q],oe=d[q+1],ce=m===0?te.x:te.y,fe=m===0?oe.x:oe.y;let ge=!1;ce<l?fe>l&&A.push(C(te,oe,l)):ce>u?fe<u&&A.push(C(te,oe,u)):A.push(te),fe<l&&ce>=l&&(A.push(C(te,oe,l)),ge=!0),fe>u&&ce<=u&&(A.push(C(te,oe,u)),ge=!0),!b&&ge&&(R.push(A),A=[])}const B=d.length-1,$=m===0?d[B].x:d[B].y;return $>=l&&$<=u&&A.push(d[B]),b&&A.length>0&&!A[0].equals(A[A.length-1])&&A.push(new h(A[0].x,A[0].y)),A.length>0&&R.push(A),R}function rk(d,l,u,m,b){const C=[];for(const A of d){const R=HR(A,l,u,m,b);R.length>0&&C.push(...R)}return C}function UR(d,l,u){return new h(u,d.y+(u-d.x)/(l.x-d.x)*(l.y-d.y))}function $R(d,l,u){return new h(d.x+(u-d.y)/(l.y-d.y)*(l.x-d.x),u)}Ji("FeatureIndex",tk,{omit:["rawTileData","sourceLayerCoder"]});class qh extends h{constructor(l,u,m,b){super(l,u),this.angle=m,b!==void 0&&(this.segment=b)}clone(){return new qh(this.x,this.y,this.angle,this.segment)}}function sk(d,l,u,m,b){if(l.segment===void 0||u===0)return!0;let C=l,A=l.segment+1,R=0;for(;R>-u/2;){if(A--,A<0)return!1;R-=d[A].dist(C),C=d[A]}R+=d[A].dist(d[A+1]),A++;const B=[];let $=0;for(;R<u/2;){const q=d[A],te=d[A+1];if(!te)return!1;let oe=d[A-1].angleTo(q)-q.angleTo(te);for(oe=Math.abs((oe+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:R,angleDelta:oe}),$+=oe;R-B[0].distance>m;)$-=B.shift().angleDelta;if($>b)return!1;A++,R+=q.dist(te)}return!0}function ok(d){let l=0;for(let u=0;u<d.length-1;u++)l+=d[u].dist(d[u+1]);return l}function lk(d,l,u){return d?.6*l*u:0}function ck(d,l){return Math.max(d?d.right-d.left:0,l?l.right-l.left:0)}function GR(d,l,u,m,b,C){const A=lk(u,b,C),R=ck(u,m)*C;let B=0;const $=ok(d)/2;for(let q=0;q<d.length-1;q++){const te=d[q],oe=d[q+1],ce=te.dist(oe);if(B+ce>$){const fe=($-B)/ce,ge=ba.number(te.x,oe.x,fe),ve=ba.number(te.y,oe.y,fe),Ie=new qh(ge,ve,oe.angleTo(te),q);return Ie._round(),!A||sk(d,Ie,R,A,l)?Ie:void 0}B+=ce}}function WR(d,l,u,m,b,C,A,R,B){const $=lk(m,C,A),q=ck(m,b),te=q*A,oe=d[0].x===0||d[0].x===B||d[0].y===0||d[0].y===B;return l-te<l/4&&(l=te+l/4),uk(d,oe?l/2*R%l:(q/2+2*C)*A*R%l,l,$,u,te,oe,!1,B)}function uk(d,l,u,m,b,C,A,R,B){const $=C/2,q=ok(d);let te=0,oe=l-u,ce=[];for(let fe=0;fe<d.length-1;fe++){const ge=d[fe],ve=d[fe+1],Ie=ge.dist(ve),Qe=ve.angleTo(ge);for(;oe+u<te+Ie;){oe+=u;const De=(oe-te)/Ie,ze=ba.number(ge.x,ve.x,De),it=ba.number(ge.y,ve.y,De);if(ze>=0&&ze<B&&it>=0&&it<B&&oe-$>=0&&oe+$<=q){const ot=new qh(ze,it,Qe,fe);ot._round(),m&&!sk(d,ot,C,m,b)||ce.push(ot)}}te+=Ie}return R||ce.length||A||(ce=uk(d,te/2,u,m,b,C,A,!0,B)),ce}function hk(d,l,u,m){const b=[],C=d.image,A=C.pixelRatio,R=C.paddedRect.w-2,B=C.paddedRect.h-2;let $={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const q=C.stretchX||[[0,R]],te=C.stretchY||[[0,B]],oe=($t,tn)=>$t+tn[1]-tn[0],ce=q.reduce(oe,0),fe=te.reduce(oe,0),ge=R-ce,ve=B-fe;let Ie=0,Qe=ce,De=0,ze=fe,it=0,ot=ge,Ot=0,ri=ve;if(C.content&&m){const $t=C.content,tn=$t[2]-$t[0],qi=$t[3]-$t[1];(C.textFitWidth||C.textFitHeight)&&($=s2(d)),Ie=n0(q,0,$t[0]),De=n0(te,0,$t[1]),Qe=n0(q,$t[0],$t[2]),ze=n0(te,$t[1],$t[3]),it=$t[0]-Ie,Ot=$t[1]-De,ot=tn-Qe,ri=qi-ze}const Qt=$.x1,di=$.y1,Ni=$.x2-Qt,gi=$.y2-di,ti=($t,tn,qi,dn)=>{const Gi=a0($t.stretch-Ie,Qe,Ni,Qt),Rn=r0($t.fixed-it,ot,$t.stretch,ce),La=a0(tn.stretch-De,ze,gi,di),xa=r0(tn.fixed-Ot,ri,tn.stretch,fe),Br=a0(qi.stretch-Ie,Qe,Ni,Qt),yo=r0(qi.fixed-it,ot,qi.stretch,ce),Es=a0(dn.stretch-De,ze,gi,di),jr=r0(dn.fixed-Ot,ri,dn.stretch,fe),Dr=new h(Gi,La),Xa=new h(Br,La),is=new h(Br,Es),hs=new h(Gi,Es),Cr=new h(Rn/A,xa/A),al=new h(yo/A,jr/A),_o=l*Math.PI/180;if(_o){const Js=Math.sin(_o),Yr=Math.cos(_o),Ms=[Yr,-Js,Js,Yr];Dr._matMult(Ms),Xa._matMult(Ms),hs._matMult(Ms),is._matMult(Ms)}const rl=$t.stretch+$t.fixed,Cc=tn.stretch+tn.fixed;return{tl:Dr,tr:Xa,bl:hs,br:is,tex:{x:C.paddedRect.x+1+rl,y:C.paddedRect.y+1+Cc,w:qi.stretch+qi.fixed-rl,h:dn.stretch+dn.fixed-Cc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Cr,pixelOffsetBR:al,minFontScaleX:ot/A/Ni,minFontScaleY:ri/A/gi,isSDF:u}};if(m&&(C.stretchX||C.stretchY)){const $t=dk(q,ge,ce),tn=dk(te,ve,fe);for(let qi=0;qi<$t.length-1;qi++){const dn=$t[qi],Gi=$t[qi+1];for(let Rn=0;Rn<tn.length-1;Rn++)b.push(ti(dn,tn[Rn],Gi,tn[Rn+1]))}}else b.push(ti({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:B+1}));return b}function n0(d,l,u){let m=0;for(const b of d)m+=Math.max(l,Math.min(u,b[1]))-Math.max(l,Math.min(u,b[0]));return m}function dk(d,l,u){const m=[{fixed:-1,stretch:0}];for(const[b,C]of d){const A=m[m.length-1];m.push({fixed:b-A.stretch,stretch:A.stretch}),m.push({fixed:b-A.stretch,stretch:A.stretch+(C-b)})}return m.push({fixed:l+1,stretch:u}),m}function a0(d,l,u,m){return d/l*u+m}function r0(d,l,u,m){return d-l*u/m}Ji("Anchor",qh);class s0{constructor(l,u,m,b,C,A,R,B,$,q){var te;if(this.boxStartIndex=l.length,$){let oe=A.top,ce=A.bottom;const fe=A.collisionPadding;fe&&(oe-=fe[1],ce+=fe[3]);let ge=ce-oe;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{const oe=!((te=A.image)===null||te===void 0)&&te.content&&(A.image.textFitWidth||A.image.textFitHeight)?s2(A):{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};oe.y1=oe.y1*R-B[0],oe.y2=oe.y2*R+B[2],oe.x1=oe.x1*R-B[3],oe.x2=oe.x2*R+B[1];const ce=A.collisionPadding;if(ce&&(oe.x1-=ce[0]*R,oe.y1-=ce[1]*R,oe.x2+=ce[2]*R,oe.y2+=ce[3]*R),q){const fe=new h(oe.x1,oe.y1),ge=new h(oe.x2,oe.y1),ve=new h(oe.x1,oe.y2),Ie=new h(oe.x2,oe.y2),Qe=q*Math.PI/180;fe._rotate(Qe),ge._rotate(Qe),ve._rotate(Qe),Ie._rotate(Qe),oe.x1=Math.min(fe.x,ge.x,ve.x,Ie.x),oe.x2=Math.max(fe.x,ge.x,ve.x,Ie.x),oe.y1=Math.min(fe.y,ge.y,ve.y,Ie.y),oe.y2=Math.max(fe.y,ge.y,ve.y,Ie.y)}l.emplaceBack(u.x,u.y,oe.x1,oe.y1,oe.x2,oe.y2,m,b,C)}this.boxEndIndex=l.length}}class XR{constructor(l=[],u=(m,b)=>m<b?-1:m>b?1:0){if(this.data=l,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:u,compare:m}=this,b=u[l];for(;l>0;){const C=l-1>>1,A=u[C];if(m(b,A)>=0)break;u[l]=A,l=C}u[l]=b}_down(l){const{data:u,compare:m}=this,b=this.length>>1,C=u[l];for(;l<b;){let A=1+(l<<1);const R=A+1;if(R<this.length&&m(u[R],u[A])<0&&(A=R),m(u[A],C)>=0)break;u[l]=u[A],l=A}u[l]=C}}function YR(d,l=1,u=!1){const m=Ud.fromPoints(d[0]),b=Math.min(m.width(),m.height());let C=b/2;const A=new XR([],qR),{minX:R,minY:B,maxX:$,maxY:q}=m;if(b===0)return new h(R,B);for(let ce=R;ce<$;ce+=b)for(let fe=B;fe<q;fe+=b)A.push(new yp(ce+C,fe+C,C,d));let te=(function(ce){let fe=0,ge=0,ve=0;const Ie=ce[0];for(let Qe=0,De=Ie.length,ze=De-1;Qe<De;ze=Qe++){const it=Ie[Qe],ot=Ie[ze],Ot=it.x*ot.y-ot.x*it.y;ge+=(it.x+ot.x)*Ot,ve+=(it.y+ot.y)*Ot,fe+=3*Ot}return new yp(ge/fe,ve/fe,0,ce)})(d),oe=A.length;for(;A.length;){const ce=A.pop();(ce.d>te.d||!te.d)&&(te=ce,u&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,oe)),ce.max-te.d<=l||(C=ce.h/2,A.push(new yp(ce.p.x-C,ce.p.y-C,C,d)),A.push(new yp(ce.p.x+C,ce.p.y-C,C,d)),A.push(new yp(ce.p.x-C,ce.p.y+C,C,d)),A.push(new yp(ce.p.x+C,ce.p.y+C,C,d)),oe+=4)}return u&&(console.log(`num probes: ${oe}`),console.log(`best distance: ${te.d}`)),te.p}function qR(d,l){return l.max-d.max}function yp(d,l,u,m){this.p=new h(d,l),this.h=u,this.d=(function(b,C){let A=!1,R=1/0;for(let B=0;B<C.length;B++){const $=C[B];for(let q=0,te=$.length,oe=te-1;q<te;oe=q++){const ce=$[q],fe=$[oe];ce.y>b.y!=fe.y>b.y&&b.x<(fe.x-ce.x)*(b.y-ce.y)/(fe.y-ce.y)+ce.x&&(A=!A),R=Math.min(R,yS(b,ce,fe))}}return(A?1:-1)*Math.sqrt(R)})(this.p,m),this.max=this.d+this.h*Math.SQRT2}var mo;o.aP=void 0,(mo=o.aP||(o.aP={}))[mo.center=1]="center",mo[mo.left=2]="left",mo[mo.right=3]="right",mo[mo.top=4]="top",mo[mo.bottom=5]="bottom",mo[mo["top-left"]=6]="top-left",mo[mo["top-right"]=7]="top-right",mo[mo["bottom-left"]=8]="bottom-left",mo[mo["bottom-right"]=9]="bottom-right";const rv=Number.POSITIVE_INFINITY;function fk(d,l){return l[1]!==rv?(function(u,m,b){let C=0,A=0;switch(m=Math.abs(m),b=Math.abs(b),u){case"top-right":case"top-left":case"top":A=b-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-b}switch(u){case"top-right":case"bottom-right":case"right":C=-m;break;case"top-left":case"bottom-left":case"left":C=m}return[C,A]})(d,l[0],l[1]):(function(u,m){let b=0,C=0;m<0&&(m=0);const A=m/Math.SQRT2;switch(u){case"top-right":case"top-left":C=A-7;break;case"bottom-right":case"bottom-left":C=7-A;break;case"bottom":C=7-m;break;case"top":C=m-7}switch(u){case"top-right":case"bottom-right":b=-A;break;case"top-left":case"bottom-left":b=A;break;case"left":b=m;break;case"right":b=-m}return[b,C]})(d,l[0])}function pk(d,l,u){var m;const b=d.layout,C=(m=b.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},u);if(C){const R=C.values,B=[];for(let $=0;$<R.length;$+=2){const q=B[$]=R[$],te=R[$+1].map((oe=>oe*qs));q.startsWith("top")?te[1]-=7:q.startsWith("bottom")&&(te[1]+=7),B[$+1]=te}return new pe(B)}const A=b.get("text-variable-anchor");if(A){let R;R=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(l,{},u)*qs,rv]:b.get("text-offset").evaluate(l,{},u).map(($=>$*qs));const B=[];for(const $ of A)B.push($,fk($,R));return new pe(B)}return null}function sv(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ZR(d,l,u,m,b,C,A,R,B,$,q,te){let oe=C.textMaxSize.evaluate(l,{});oe===void 0&&(oe=A);const ce=d.layers[0].layout,fe=ce.get("icon-offset").evaluate(l,{},q),ge=mk(u.horizontal),ve=A/24,Ie=d.tilePixelRatio*ve,Qe=d.tilePixelRatio*oe/24,De=d.tilePixelRatio*R,ze=d.tilePixelRatio*ce.get("symbol-spacing"),it=ce.get("text-padding")*d.tilePixelRatio,ot=(function(qi,dn,Gi,Rn=1){const La=qi.get("icon-padding").evaluate(dn,{},Gi),xa=La&&La.values;return[xa[0]*Rn,xa[1]*Rn,xa[2]*Rn,xa[3]*Rn]})(ce,l,q,d.tilePixelRatio),Ot=ce.get("text-max-angle")/180*Math.PI,ri=ce.get("text-rotation-alignment")!=="viewport"&&ce.get("symbol-placement")!=="point",Qt=ce.get("icon-rotation-alignment")==="map"&&ce.get("symbol-placement")!=="point",di=ce.get("symbol-placement"),Ni=ze/2,gi=ce.get("icon-text-fit");let ti;m&&gi!=="none"&&(d.allowVerticalPlacement&&u.vertical&&(ti=o2(m,u.vertical,gi,ce.get("icon-text-fit-padding"),fe,ve)),ge&&(m=o2(m,ge,gi,ce.get("icon-text-fit-padding"),fe,ve)));const $t=q?te.line.getGranularityForZoomLevel(q.z):1,tn=(qi,dn)=>{dn.x<0||dn.x>=Dt||dn.y<0||dn.y>=Dt||(function(Gi,Rn,La,xa,Br,yo,Es,jr,Dr,Xa,is,hs,Cr,al,_o,rl,Cc,Js,Yr,Ms,ns,Qs,gh,Jc,Qg){const Zh=Gi.addToLineVertexArray(Rn,La);let Wd,_p,xp,vp,vk=0,bk=0,wk=0,Sk=0,pv=-1,gv=-1;const mh={};let kk=us("");if(Gi.allowVerticalPlacement&&xa.vertical){const Mo=jr.layout.get("text-rotate").evaluate(ns,{},Jc)+90;xp=new s0(Dr,Rn,Xa,is,hs,xa.vertical,Cr,al,_o,Mo),Es&&(vp=new s0(Dr,Rn,Xa,is,hs,Es,Cc,Js,_o,Mo))}if(Br){const Mo=jr.layout.get("icon-rotate").evaluate(ns,{}),Ql=jr.layout.get("icon-text-fit")!=="none",Xd=hk(Br,Mo,gh,Ql),eu=Es?hk(Es,Mo,gh,Ql):void 0;_p=new s0(Dr,Rn,Xa,is,hs,Br,Cc,Js,!1,Mo),vk=4*Xd.length;const Yd=Gi.iconSizeData;let Lu=null;Yd.kind==="source"?(Lu=[fh*jr.layout.get("icon-size").evaluate(ns,{})],Lu[0]>Wh&&Qi(`${Gi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Yd.kind==="composite"&&(Lu=[fh*Qs.compositeIconSizes[0].evaluate(ns,{},Jc),fh*Qs.compositeIconSizes[1].evaluate(ns,{},Jc)],(Lu[0]>Wh||Lu[1]>Wh)&&Qi(`${Gi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Gi.addSymbols(Gi.icon,Xd,Lu,Ms,Yr,ns,o.az.none,Rn,Zh.lineStartIndex,Zh.lineLength,-1,Jc),pv=Gi.icon.placedSymbolArray.length-1,eu&&(bk=4*eu.length,Gi.addSymbols(Gi.icon,eu,Lu,Ms,Yr,ns,o.az.vertical,Rn,Zh.lineStartIndex,Zh.lineLength,-1,Jc),gv=Gi.icon.placedSymbolArray.length-1)}const Ck=Object.keys(xa.horizontal);for(const Mo of Ck){const Ql=xa.horizontal[Mo];if(!Wd){kk=us(Ql.text);const eu=jr.layout.get("text-rotate").evaluate(ns,{},Jc);Wd=new s0(Dr,Rn,Xa,is,hs,Ql,Cr,al,_o,eu)}const Xd=Ql.positionedLines.length===1;if(wk+=gk(Gi,Rn,Ql,yo,jr,_o,ns,rl,Zh,xa.vertical?o.az.horizontal:o.az.horizontalOnly,Xd?Ck:[Mo],mh,pv,Qs,Jc),Xd)break}xa.vertical&&(Sk+=gk(Gi,Rn,xa.vertical,yo,jr,_o,ns,rl,Zh,o.az.vertical,["vertical"],mh,gv,Qs,Jc));const QR=Wd?Wd.boxStartIndex:Gi.collisionBoxArray.length,eO=Wd?Wd.boxEndIndex:Gi.collisionBoxArray.length,tO=xp?xp.boxStartIndex:Gi.collisionBoxArray.length,iO=xp?xp.boxEndIndex:Gi.collisionBoxArray.length,nO=_p?_p.boxStartIndex:Gi.collisionBoxArray.length,aO=_p?_p.boxEndIndex:Gi.collisionBoxArray.length,rO=vp?vp.boxStartIndex:Gi.collisionBoxArray.length,sO=vp?vp.boxEndIndex:Gi.collisionBoxArray.length;let Qc=-1;const l0=(Mo,Ql)=>Mo&&Mo.circleDiameter?Math.max(Mo.circleDiameter,Ql):Ql;Qc=l0(Wd,Qc),Qc=l0(xp,Qc),Qc=l0(_p,Qc),Qc=l0(vp,Qc);const Ak=Qc>-1?1:0;Ak&&(Qc*=Qg/qs),Gi.glyphOffsetArray.length>=hp.MAX_GLYPHS&&Qi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ns.sortKey!==void 0&&Gi.addToSortKeyRanges(Gi.symbolInstances.length,ns.sortKey);const oO=pk(jr,ns,Jc),[lO,cO]=(function(Mo,Ql){const Xd=Mo.length,eu=Ql?.values;if(eu?.length>0)for(let Yd=0;Yd<eu.length;Yd+=2){const Lu=eu[Yd+1];Mo.emplaceBack(o.aP[eu[Yd]],Lu[0],Lu[1])}return[Xd,Mo.length]})(Gi.textAnchorOffsets,oO);Gi.symbolInstances.emplaceBack(Rn.x,Rn.y,mh.right>=0?mh.right:-1,mh.center>=0?mh.center:-1,mh.left>=0?mh.left:-1,mh.vertical||-1,pv,gv,kk,QR,eO,tO,iO,nO,aO,rO,sO,Xa,wk,Sk,vk,bk,Ak,0,Cr,Qc,lO,cO)})(d,dn,qi,u,m,b,ti,d.layers[0],d.collisionBoxArray,l.index,l.sourceLayerIndex,d.index,Ie,[it,it,it,it],ri,B,De,ot,Qt,fe,l,C,$,q,A)};if(di==="line")for(const qi of nk(l.geometry,0,0,Dt,Dt)){const dn=Hd(qi,$t),Gi=WR(dn,ze,Ot,u.vertical||ge,m,24,Qe,d.overscaling,Dt);for(const Rn of Gi)ge&&KR(d,ge.text,Ni,Rn)||tn(dn,Rn)}else if(di==="line-center"){for(const qi of l.geometry)if(qi.length>1){const dn=Hd(qi,$t),Gi=GR(dn,Ot,u.vertical||ge,m,24,Qe);Gi&&tn(dn,Gi)}}else if(l.type==="Polygon")for(const qi of Vl(l.geometry,0)){const dn=YR(qi,16);tn(Hd(qi[0],$t,!0),new qh(dn.x,dn.y,0))}else if(l.type==="LineString")for(const qi of l.geometry){const dn=Hd(qi,$t);tn(dn,new qh(dn[0].x,dn[0].y,0))}else if(l.type==="Point")for(const qi of l.geometry)for(const dn of qi)tn([dn],new qh(dn.x,dn.y,0))}function gk(d,l,u,m,b,C,A,R,B,$,q,te,oe,ce,fe){const ge=(function(Qe,De,ze,it,ot,Ot,ri,Qt){const di=it.layout.get("text-rotate").evaluate(Ot,{})*Math.PI/180,Ni=[];for(const gi of De.positionedLines)for(const ti of gi.positionedGlyphs){if(!ti.rect)continue;const $t=ti.rect||{};let tn=4,qi=!0,dn=1,Gi=0;const Rn=(ot||Qt)&&ti.vertical,La=ti.metrics.advance*ti.scale/2;if(Qt&&De.verticalizable&&(Gi=gi.lineOffset/2-(ti.imageName?-(qs-ti.metrics.width*ti.scale)/2:(ti.scale-1)*qs)),ti.imageName){const Js=ri[ti.imageName];qi=Js.sdf,dn=Js.pixelRatio,tn=1/dn}const xa=ot?[ti.x+La,ti.y]:[0,0];let Br=ot?[0,0]:[ti.x+La+ze[0],ti.y+ze[1]-Gi],yo=[0,0];Rn&&(yo=Br,Br=[0,0]);const Es=ti.metrics.isDoubleResolution?2:1,jr=(ti.metrics.left-tn)*ti.scale-La+Br[0],Dr=(-ti.metrics.top-tn)*ti.scale+Br[1],Xa=jr+$t.w/Es*ti.scale/dn,is=Dr+$t.h/Es*ti.scale/dn,hs=new h(jr,Dr),Cr=new h(Xa,Dr),al=new h(jr,is),_o=new h(Xa,is);if(Rn){const Js=new h(-La,La- -17),Yr=-Math.PI/2,Ms=12-La,ns=new h(22-Ms,-(ti.imageName?Ms:0)),Qs=new h(...yo);hs._rotateAround(Yr,Js)._add(ns)._add(Qs),Cr._rotateAround(Yr,Js)._add(ns)._add(Qs),al._rotateAround(Yr,Js)._add(ns)._add(Qs),_o._rotateAround(Yr,Js)._add(ns)._add(Qs)}if(di){const Js=Math.sin(di),Yr=Math.cos(di),Ms=[Yr,-Js,Js,Yr];hs._matMult(Ms),Cr._matMult(Ms),al._matMult(Ms),_o._matMult(Ms)}const rl=new h(0,0),Cc=new h(0,0);Ni.push({tl:hs,tr:Cr,bl:al,br:_o,tex:$t,writingMode:De.writingMode,glyphOffset:xa,sectionIndex:ti.sectionIndex,isSDF:qi,pixelOffsetTL:rl,pixelOffsetBR:Cc,minFontScaleX:0,minFontScaleY:0})}return Ni})(0,u,R,b,C,A,m,d.allowVerticalPlacement),ve=d.textSizeData;let Ie=null;ve.kind==="source"?(Ie=[fh*b.layout.get("text-size").evaluate(A,{})],Ie[0]>Wh&&Qi(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ve.kind==="composite"&&(Ie=[fh*ce.compositeTextSizes[0].evaluate(A,{},fe),fh*ce.compositeTextSizes[1].evaluate(A,{},fe)],(Ie[0]>Wh||Ie[1]>Wh)&&Qi(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),d.addSymbols(d.text,ge,Ie,R,C,A,$,l,B.lineStartIndex,B.lineLength,oe,fe);for(const Qe of q)te[Qe]=d.text.placedSymbolArray.length-1;return 4*ge.length}function mk(d){for(const l in d)return d[l];return null}function KR(d,l,u,m){const b=d.compareText;if(l in b){const C=b[l];for(let A=C.length-1;A>=0;A--)if(m.dist(C[A])<u)return!0}else b[l]=[];return b[l].push(m),!1}const yk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ov{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,m]=new Uint8Array(l,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const b=m>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);const C=yk[15&m];if(!C)throw new Error("Unrecognized array type.");const[A]=new Uint16Array(l,2,1),[R]=new Uint32Array(l,4,1);return new ov(R,A,C,l)}constructor(l,u=64,m=Float64Array,b){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const C=yk.indexOf(this.ArrayType),A=2*l*this.ArrayType.BYTES_PER_ELEMENT,R=l*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-R%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${m}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+R+B,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+A+R+B),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+R+B,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=l)}add(l,u){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=u,m}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return lv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,u,m,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:A,nodeSize:R}=this,B=[0,C.length-1,0],$=[];for(;B.length;){const q=B.pop()||0,te=B.pop()||0,oe=B.pop()||0;if(te-oe<=R){for(let ve=oe;ve<=te;ve++){const Ie=A[2*ve],Qe=A[2*ve+1];Ie>=l&&Ie<=m&&Qe>=u&&Qe<=b&&$.push(C[ve])}continue}const ce=oe+te>>1,fe=A[2*ce],ge=A[2*ce+1];fe>=l&&fe<=m&&ge>=u&&ge<=b&&$.push(C[ce]),(q===0?l<=fe:u<=ge)&&(B.push(oe),B.push(ce-1),B.push(1-q)),(q===0?m>=fe:b>=ge)&&(B.push(ce+1),B.push(te),B.push(1-q))}return $}within(l,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:C,nodeSize:A}=this,R=[0,b.length-1,0],B=[],$=m*m;for(;R.length;){const q=R.pop()||0,te=R.pop()||0,oe=R.pop()||0;if(te-oe<=A){for(let ve=oe;ve<=te;ve++)xk(C[2*ve],C[2*ve+1],l,u)<=$&&B.push(b[ve]);continue}const ce=oe+te>>1,fe=C[2*ce],ge=C[2*ce+1];xk(fe,ge,l,u)<=$&&B.push(b[ce]),(q===0?l-m<=fe:u-m<=ge)&&(R.push(oe),R.push(ce-1),R.push(1-q)),(q===0?l+m>=fe:u+m>=ge)&&(R.push(ce+1),R.push(te),R.push(1-q))}return B}}function lv(d,l,u,m,b,C){if(b-m<=u)return;const A=m+b>>1;_k(d,l,A,m,b,C),lv(d,l,u,m,A-1,1-C),lv(d,l,u,A+1,b,1-C)}function _k(d,l,u,m,b,C){for(;b>m;){if(b-m>600){const $=b-m+1,q=u-m+1,te=Math.log($),oe=.5*Math.exp(2*te/3),ce=.5*Math.sqrt(te*oe*($-oe)/$)*(q-$/2<0?-1:1);_k(d,l,u,Math.max(m,Math.floor(u-q*oe/$+ce)),Math.min(b,Math.floor(u+($-q)*oe/$+ce)),C)}const A=l[2*u+C];let R=m,B=b;for(Kg(d,l,m,u),l[2*b+C]>A&&Kg(d,l,m,b);R<B;){for(Kg(d,l,R,B),R++,B--;l[2*R+C]<A;)R++;for(;l[2*B+C]>A;)B--}l[2*m+C]===A?Kg(d,l,m,B):(B++,Kg(d,l,B,b)),B<=u&&(m=B+1),u<=B&&(b=B-1)}}function Kg(d,l,u,m){cv(d,u,m),cv(l,2*u,2*m),cv(l,2*u+1,2*m+1)}function cv(d,l,u){const m=d[l];d[l]=d[u],d[u]=m}function xk(d,l,u,m){const b=d-u,C=l-m;return b*b+C*C}var uv;o.cH=void 0,(uv=o.cH||(o.cH={})).create="create",uv.load="load",uv.fullLoad="fullLoad";let o0=null,Jg=[];const hv=1e3/60,dv="loadTime",fv="fullLoadTime",JR={mark(d){performance.mark(d)},frame(d){const l=d;o0!=null&&Jg.push(l-o0),o0=l},clearMetrics(){o0=null,Jg=[],performance.clearMeasures(dv),performance.clearMeasures(fv);for(const d in o.cH)performance.clearMarks(o.cH[d])},getPerformanceMetrics(){performance.measure(dv,o.cH.create,o.cH.load),performance.measure(fv,o.cH.create,o.cH.fullLoad);const d=performance.getEntriesByName(dv)[0].duration,l=performance.getEntriesByName(fv)[0].duration,u=Jg.length,m=1/(Jg.reduce(((C,A)=>C+A),0)/u/1e3),b=Jg.filter((C=>C>hv)).reduce(((C,A)=>C+(A-hv)/hv),0);return{loadTime:d,fullLoadTime:l,fps:m,percentDroppedFrames:b/(u+b)*100,totalFrames:u}}};o.$=F,o.A=Z,o.B=Cu,o.C=Gr,o.D=Tn,o.E=Mn,o.F=function([d,l,u]){return l+=90,l*=Math.PI/180,u*=Math.PI/180,{x:d*Math.cos(l)*Math.sin(u),y:d*Math.sin(l)*Math.sin(u),z:d*Math.cos(u)}},o.G=ba,o.H=sr,o.I=Dx,o.J=rh,o.K=function(d){if(Ye==null){const l=d.navigator?d.navigator.userAgent:null;Ye=!!d.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Ye},o.L=class{constructor(d,l){this.target=d,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new fR((()=>this.process())),this.subscription=wi(this.target,"message",(u=>this.receive(u)),!1),this.globalScope=xn(self)?d:window}registerMessageHandler(d,l){this.messageHandlers[d]=l}unregisterMessageHandler(d){delete this.messageHandlers[d]}sendAsync(d,l){return new Promise(((u,m)=>{const b=Math.round(1e18*Math.random()).toString(36).substring(0,10),C=l?wi(l.signal,"abort",(()=>{C?.unsubscribe(),delete this.resolveRejects[b];const B={id:b,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(B)}),pR):null;this.resolveRejects[b]={resolve:B=>{C?.unsubscribe(),u(B)},reject:B=>{C?.unsubscribe(),m(B)}};const A=[],R=Object.assign(Object.assign({},d),{id:b,sourceMapId:this.mapId,origin:location.origin,data:yi(d.data,A)});this.target.postMessage(R,{transfer:A})}))}receive(d){const l=d.data,u=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[u];const m=this.abortControllers[u];return delete this.abortControllers[u],void(m&&m.abort())}if(xn(self)||l.mustQueue)return this.tasks[u]=l,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,l)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),l=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(d,l)}processTask(d,l){return s(this,void 0,void 0,(function*(){if(l.type==="<response>"){const b=this.resolveRejects[d];return delete this.resolveRejects[d],b?void(l.error?b.reject(An(l.error)):b.resolve(An(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=An(l.data),m=new AbortController;this.abortControllers[d]=m;try{const b=yield this.messageHandlers[l.type](l.sourceMapId,u,m);this.completeTask(d,null,b)}catch(b){this.completeTask(d,b)}}))}completeTask(d,l,u){const m=[];delete this.abortControllers[d];const b={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?yi(l):null,data:yi(u,m)};this.target.postMessage(b,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.M=yt,o.N=function(){var d=new Z(16);return Z!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},o.O=function(d,l,u){var m,b,C,A,R,B,$,q,te,oe,ce,fe,ge=u[0],ve=u[1],Ie=u[2];return l===d?(d[12]=l[0]*ge+l[4]*ve+l[8]*Ie+l[12],d[13]=l[1]*ge+l[5]*ve+l[9]*Ie+l[13],d[14]=l[2]*ge+l[6]*ve+l[10]*Ie+l[14],d[15]=l[3]*ge+l[7]*ve+l[11]*Ie+l[15]):(b=l[1],C=l[2],A=l[3],R=l[4],B=l[5],$=l[6],q=l[7],te=l[8],oe=l[9],ce=l[10],fe=l[11],d[0]=m=l[0],d[1]=b,d[2]=C,d[3]=A,d[4]=R,d[5]=B,d[6]=$,d[7]=q,d[8]=te,d[9]=oe,d[10]=ce,d[11]=fe,d[12]=m*ge+R*ve+te*Ie+l[12],d[13]=b*ge+B*ve+oe*Ie+l[13],d[14]=C*ge+$*ve+ce*Ie+l[14],d[15]=A*ge+q*ve+fe*Ie+l[15]),d},o.P=h,o.Q=function(d,l,u){var m=u[0],b=u[1],C=u[2];return d[0]=l[0]*m,d[1]=l[1]*m,d[2]=l[2]*m,d[3]=l[3]*m,d[4]=l[4]*b,d[5]=l[5]*b,d[6]=l[6]*b,d[7]=l[7]*b,d[8]=l[8]*C,d[9]=l[9]*C,d[10]=l[10]*C,d[11]=l[11]*C,d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15],d},o.R=nl,o.S=function(d,l,u){var m=l[0],b=l[1],C=l[2],A=l[3],R=l[4],B=l[5],$=l[6],q=l[7],te=l[8],oe=l[9],ce=l[10],fe=l[11],ge=l[12],ve=l[13],Ie=l[14],Qe=l[15],De=u[0],ze=u[1],it=u[2],ot=u[3];return d[0]=De*m+ze*R+it*te+ot*ge,d[1]=De*b+ze*B+it*oe+ot*ve,d[2]=De*C+ze*$+it*ce+ot*Ie,d[3]=De*A+ze*q+it*fe+ot*Qe,d[4]=(De=u[4])*m+(ze=u[5])*R+(it=u[6])*te+(ot=u[7])*ge,d[5]=De*b+ze*B+it*oe+ot*ve,d[6]=De*C+ze*$+it*ce+ot*Ie,d[7]=De*A+ze*q+it*fe+ot*Qe,d[8]=(De=u[8])*m+(ze=u[9])*R+(it=u[10])*te+(ot=u[11])*ge,d[9]=De*b+ze*B+it*oe+ot*ve,d[10]=De*C+ze*$+it*ce+ot*Ie,d[11]=De*A+ze*q+it*fe+ot*Qe,d[12]=(De=u[12])*m+(ze=u[13])*R+(it=u[14])*te+(ot=u[15])*ge,d[13]=De*b+ze*B+it*oe+ot*ve,d[14]=De*C+ze*$+it*ce+ot*Ie,d[15]=De*A+ze*q+it*fe+ot*Qe,d},o.T=kx,o.U=function(d,l){const u={};for(let m=0;m<l.length;m++){const b=l[m];b in d&&(u[b]=d[b])}return u},o.V=Xh,o.W=mi,o.X=m2,o.Y=g2,o.Z=tt,o._=s,o.a=Ce,o.a$=me,o.a0=U,o.a1=Fi,o.a2=Kl,o.a3=_2,o.a4=qy,o.a5=Dt,o.a6=function(d,l,u){if(!d)return l||{};if(!l)return d||{};const m=w2(d),b=w2(l);(function(A,R){R.removeAll&&(A.add.clear(),A.update.clear(),A.remove.clear(),R.remove.clear());for(const B of R.remove)A.add.delete(B),A.update.delete(B);for(const[B,$]of R.update){const q=A.update.get(B);q&&(R.update.set(B,gR(q,$)),A.update.delete(B))}})(m,b);const C={};if((m.removeAll||b.removeAll)&&(C.removeAll=!0),C.remove=new Set([...m.remove,...b.remove]),C.add=new Map([...m.add,...b.add]),C.update=new Map([...m.update,...b.update]),C.remove.size&&C.add.size)for(const A of C.add.keys())C.remove.delete(A);return(function(A){const R={};return A.removeAll&&(R.removeAll=A.removeAll),A.remove&&(R.remove=Array.from(A.remove)),A.add&&(R.add=Array.from(A.add.values())),A.update&&(R.update=Array.from(A.update.values())),R})(C)},o.a7=function(d,l){const u=new Map;if(d==null||d.type==null)return u;if(d.type==="Feature"){const m=Hx(d,l);return m==null?void 0:(u.set(m,d),u)}if(d.type==="FeatureCollection"){const m=new Set;for(const b of d.features){const C=Hx(b,l);if(C==null||m.has(C))return;m.add(C),u.set(C,b)}return u}},o.a8=function(d,l,u){var m,b;const C=[];if(l.removeAll)d.clear();else if(l.remove)for(const A of l.remove){const R=d.get(A);R&&(C.push(R.geometry),d.delete(A))}if(l.add)for(const A of l.add){const R=Hx(A,u);if(R==null)continue;const B=d.get(R);B&&C.push(B.geometry),C.push(A.geometry),d.set(R,A)}if(l.update)for(const A of l.update){const R=d.get(A.id);if(!R)continue;const B=!!A.newGeometry,$=A.removeAllProperties||((m=A.removeProperties)===null||m===void 0?void 0:m.length)>0||((b=A.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0;if(!B&&!$)continue;C.push(R.geometry);const q=Object.assign({},R);if(d.set(A.id,q),B&&(C.push(A.newGeometry),q.geometry=A.newGeometry),$){if(q.properties=A.removeAllProperties?{}:Object.assign({},q.properties||{}),A.removeProperties)for(const te of A.removeProperties)delete q.properties[te];if(A.addOrUpdateProperties)for(const{key:te,value:oe}of A.addOrUpdateProperties)q.properties[te]=oe}}return C},o.a9=Xg,o.aA=function(d,{uSize:l,uSizeT:u},{lowerSize:m,upperSize:b}){return d.kind==="source"?m/fh:d.kind==="composite"?ba.number(m/fh,b/fh,u):l},o.aB=function(d,l){var u=l[0],m=l[1],b=l[2],C=l[3],A=l[4],R=l[5],B=l[6],$=l[7],q=l[8],te=l[9],oe=l[10],ce=l[11],fe=l[12],ge=l[13],ve=l[14],Ie=l[15],Qe=u*R-m*A,De=u*B-b*A,ze=u*$-C*A,it=m*B-b*R,ot=m*$-C*R,Ot=b*$-C*B,ri=q*ge-te*fe,Qt=q*ve-oe*fe,di=q*Ie-ce*fe,Ni=te*ve-oe*ge,gi=te*Ie-ce*ge,ti=oe*Ie-ce*ve,$t=Qe*ti-De*gi+ze*Ni+it*di-ot*Qt+Ot*ri;return $t?(d[0]=(R*ti-B*gi+$*Ni)*($t=1/$t),d[1]=(b*gi-m*ti-C*Ni)*$t,d[2]=(ge*Ot-ve*ot+Ie*it)*$t,d[3]=(oe*ot-te*Ot-ce*it)*$t,d[4]=(B*di-A*ti-$*Qt)*$t,d[5]=(u*ti-b*di+C*Qt)*$t,d[6]=(ve*ze-fe*Ot-Ie*De)*$t,d[7]=(q*Ot-oe*ze+ce*De)*$t,d[8]=(A*gi-R*di+$*ri)*$t,d[9]=(m*di-u*gi-C*ri)*$t,d[10]=(fe*ot-ge*ze+Ie*Qe)*$t,d[11]=(te*ze-q*ot-ce*Qe)*$t,d[12]=(R*Qt-A*Ni-B*ri)*$t,d[13]=(u*Ni-m*Qt+b*ri)*$t,d[14]=(ge*De-fe*it-ve*Qe)*$t,d[15]=(q*it-te*De+oe*Qe)*$t,d):null},o.aC=$e,o.aD=function(d){var l=d[0],u=d[1];return Math.sqrt(l*l+u*u)},o.aE=function(d){return d[0]=0,d[1]=0,d},o.aF=function(d,l,u){return d[0]=l[0]*u,d[1]=l[1]*u,d},o.aG=zx,o.aH=We,o.aI=function(d,l,u,m){const b=l.y-d.y,C=l.x-d.x,A=m.y-u.y,R=m.x-u.x,B=A*C-R*b;if(B===0)return null;const $=(R*(d.y-u.y)-A*(d.x-u.x))/B;return new h(d.x+$*C,d.y+$*b)},o.aJ=nk,o.aK=np,o.aL=function(d){let l=1/0,u=1/0,m=-1/0,b=-1/0;for(const C of d)l=Math.min(l,C.x),u=Math.min(u,C.y),m=Math.max(m,C.x),b=Math.max(b,C.y);return[l,u,m,b]},o.aM=qs,o.aN=qe,o.aO=function(d,l,u,m,b=!1){if(!u[0]&&!u[1])return[0,0];const C=b?m==="map"?-d.bearingInRadians:0:m==="viewport"?d.bearingInRadians:0;if(C){const A=Math.sin(C),R=Math.cos(C);u=[u[0]*R-u[1]*A,u[0]*A+u[1]*R]}return[b?u[0]:qe(l,u[0],d.zoom),b?u[1]:qe(l,u[1],d.zoom)]},o.aQ=Ox,o.aR=sv,o.aS=Rx,o.aT=ov,o.aU=cs,o.aV=Uy,o.aW=Ne,o.aX=ji,o.aY=Vt,o.aZ=Di,o.a_=x2,o.aa=Ud,o.ab=25,o.ac=Vx,o.ad=d=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((u=>{l.onloadstart=()=>{u(l)};for(const m of d){const b=window.document.createElement("source");Et(m)||(l.crossOrigin="Anonymous"),b.src=m,l.appendChild(b)}}))},o.ae=Oe,o.af=function(){return Zi++},o.ag=k,o.ah=hp,o.ai=Zg,o.aj=bl,o.ak=Pu,o.al=k2,o.am=function(d){const l={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((u,m,b,C)=>{const A=b||C;return l[m]=!A||A.toLowerCase(),""})),l["max-age"]){const u=parseInt(l["max-age"],10);isNaN(u)?delete l["max-age"]:l["max-age"]=u}return l},o.an=wt,o.ao=85.051129,o.ap=Ti,o.aq=function(d){return Math.pow(2,d)},o.ar=ie,o.as=y2,o.at=function(d){return Math.log(d)/Math.LN2},o.au=function(d){var l=d[0],u=d[1];return l*l+u*u},o.av=function(d){if(!d.length)return new Set;const l=Math.max(...d.map((B=>B.canonical.z)));let u=1/0,m=-1/0,b=1/0,C=-1/0;const A=[];for(const B of d){const{x:$,y:q,z:te}=B.canonical,oe=Math.pow(2,l-te),ce=$*oe,fe=q*oe;A.push({id:B,x:ce,y:fe}),ce<u&&(u=ce),ce>m&&(m=ce),fe<b&&(b=fe),fe>C&&(C=fe)}const R=new Set;for(const B of A)B.x!==u&&B.x!==m&&B.y!==b&&B.y!==C||R.add(B.id);return R},o.aw=function(d,l){const u=Math.abs(2*d.wrap)-+(d.wrap<0),m=Math.abs(2*l.wrap)-+(l.wrap<0);return d.overscaledZ-l.overscaledZ||m-u||l.canonical.y-d.canonical.y||l.canonical.x-d.canonical.x},o.ax=class{constructor(d,l){this.max=d,this.onRemove=l,this.reset()}reset(){for(const d in this.data)for(const l of this.data[d])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(d,l,u){const m=d.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const b={value:l,timeout:void 0};if(u!==void 0&&(b.timeout=setTimeout((()=>{this.remove(d,b)}),u)),this.data[m].push(b),this.order.push(m),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const l=this.data[d].shift();return l.timeout&&clearTimeout(l.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),l.value}getByKey(d){const l=this.data[d];return l?l[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,l){if(!this.has(d))return this;const u=d.wrapped().key,m=l===void 0?0:this.data[u].indexOf(l),b=this.data[u][m];return this.data[u].splice(m,1),b.timeout&&clearTimeout(b.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(b.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(d){const l=[];for(const u in this.data)for(const m of this.data[u])d(m.value)||l.push(m);for(const u of l)this.remove(u.value.tileID,u)}},o.ay=function(d,l){let u=0,m=0;if(d.kind==="constant")m=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:b,minZoom:C,maxZoom:A}=d,R=b?wt(ir.interpolationFactor(b,l,C,A),0,1):0;d.kind==="camera"?m=ba.number(d.minSize,d.maxSize,R):u=R}return{uSizeT:u,uSize:m}},o.b=qt,o.b$=hh,o.b0=ae,o.b1=function(d){var l=new Z(3);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l},o.b2=function(d,l,u){return d[0]=l[0]-u[0],d[1]=l[1]-u[1],d[2]=l[2]-u[2],d},o.b3=function(d,l){var u=l[0],m=l[1],b=l[2],C=u*u+m*m+b*b;return C>0&&(C=1/Math.sqrt(C)),d[0]=l[0]*C,d[1]=l[1]*C,d[2]=l[2]*C,d},o.b4=Te,o.b5=function(d,l){return d[0]*l[0]+d[1]*l[1]+d[2]*l[2]},o.b6=function(d,l,u){return d[0]=l[0]*u[0],d[1]=l[1]*u[1],d[2]=l[2]*u[2],d[3]=l[3]*u[3],d},o.b7=J,o.b8=function(d,l,u){const m=l[0]*u[0]+l[1]*u[1]+l[2]*u[2];return m===0?null:(-(d[0]*u[0]+d[1]*u[1]+d[2]*u[2])-u[3])/m},o.b9=Re,o.bA=function(d,l,u,m){return d[0]=l[0]+u[0]*m,d[1]=l[1]+u[1]*m,d[2]=l[2]+u[2]*m,d},o.bB=ht,o.bC=function(d,l,u){var m=u[0],b=u[1],C=u[2],A=u[3],R=l[0],B=l[1],$=l[2],q=b*$-C*B,te=C*R-m*$,oe=m*B-b*R;return d[0]=R+A*(q+=q)+b*(oe+=oe)-C*(te+=te),d[1]=B+A*te+C*q-m*oe,d[2]=$+A*oe+m*te-b*q,d},o.bD=function(d,l,u){const m=(function(B){var $=B[3],q=B[4],te=B[5],oe=B[6],ce=B[7],fe=B[8];return B[0]*(fe*q-te*ce)+B[1]*(-fe*$+te*oe)+B[2]*(ce*$-q*oe)})([d[0],d[1],d[2],l[0],l[1],l[2],u[0],u[1],u[2]]);if(m===0)return null;const b=Te([],[l[0],l[1],l[2]],[u[0],u[1],u[2]]),C=Te([],[u[0],u[1],u[2]],[d[0],d[1],d[2]]),A=Te([],[d[0],d[1],d[2]],[l[0],l[1],l[2]]),R=me([],b,-d[3]);return ae(R,R,me([],C,-l[3])),ae(R,R,me([],A,-u[3])),me(R,R,1/m),R},o.bE=jx,o.bF=function(){return new Float64Array(4)},o.bG=function(d,l,u,m){var b=[],C=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],C[0]=b[0]*Math.cos(m)-b[1]*Math.sin(m),C[1]=b[0]*Math.sin(m)+b[1]*Math.cos(m),C[2]=b[2],d[0]=C[0]+u[0],d[1]=C[1]+u[1],d[2]=C[2]+u[2],d},o.bH=function(d,l,u,m){var b=[],C=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],C[0]=b[0],C[1]=b[1]*Math.cos(m)-b[2]*Math.sin(m),C[2]=b[1]*Math.sin(m)+b[2]*Math.cos(m),d[0]=C[0]+u[0],d[1]=C[1]+u[1],d[2]=C[2]+u[2],d},o.bI=function(d,l,u,m){var b=[],C=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],C[0]=b[2]*Math.sin(m)+b[0]*Math.cos(m),C[1]=b[1],C[2]=b[2]*Math.cos(m)-b[0]*Math.sin(m),d[0]=C[0]+u[0],d[1]=C[1]+u[1],d[2]=C[2]+u[2],d},o.bJ=function(d,l,u){var m=Math.sin(u),b=Math.cos(u),C=l[0],A=l[1],R=l[2],B=l[3],$=l[8],q=l[9],te=l[10],oe=l[11];return l!==d&&(d[4]=l[4],d[5]=l[5],d[6]=l[6],d[7]=l[7],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[0]=C*b-$*m,d[1]=A*b-q*m,d[2]=R*b-te*m,d[3]=B*b-oe*m,d[8]=C*m+$*b,d[9]=A*m+q*b,d[10]=R*m+te*b,d[11]=B*m+oe*b,d},o.bK=function(d,l){const u=Nt(d,360),m=Nt(l,360),b=m-u,C=m>u?b-360:b+360;return Math.abs(b)<Math.abs(C)?b:C},o.bL=function(d){return d[0]=0,d[1]=0,d[2]=0,d},o.bM=function(d,l,u,m){const b=Math.sqrt(d*d+l*l),C=Math.sqrt(u*u+m*m);d/=b,l/=b,u/=C,m/=C;const A=Math.acos(d*u+l*m);return-l*u+d*m>0?A:-A},o.bN=function(d,l){const u=Nt(d,2*Math.PI),m=Nt(l,2*Math.PI);return Math.min(Math.abs(u-m),Math.abs(u-m+2*Math.PI),Math.abs(u-m-2*Math.PI))},o.bO=function(){const d={},l=Mt.$version;for(const u in Mt.$root){const m=Mt.$root[u];if(m.required){let b=null;b=u==="version"?l:m.type==="array"?[]:{},b!=null&&(d[u]=b)}}return d},o.bP=_t,o.bQ=ln,o.bR=function d(l,u){if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(let m=0;m<l.length;m++)if(!d(l[m],u[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&u!==null){if(typeof u!="object"||Object.keys(l).length!==Object.keys(u).length)return!1;for(const m in l)if(!d(l[m],u[m]))return!1;return!0}return l===u},o.bS=function(d){d=d.slice();const l=Object.create(null);for(let u=0;u<d.length;u++)l[d[u].id]=d[u];for(let u=0;u<d.length;u++)"ref"in d[u]&&(d[u]=Yn(d[u],l[d[u].ref]));return d},o.bT=function(d,l){if(d.type==="custom")return new dR(d,l);switch(d.type){case"background":return new hR(d,l);case"circle":return new qL(d,l);case"color-relief":return new tD(d,l);case"fill":return new mD(d,l);case"fill-extrusion":return new ED(d,l);case"heatmap":return new KL(d,l);case"hillshade":return new QL(d,l);case"line":return new OD(d,l);case"raster":return new gx(d,l);case"symbol":return new Yy(d,l)}},o.bU=d=>d.type==="raster",o.bV=fn,o.bW=function(d,l){if(!d)return[{command:"setStyle",args:[l]}];let u=[];try{if(!_n(d.version,l.version))return[{command:"setStyle",args:[l]}];_n(d.center,l.center)||u.push({command:"setCenter",args:[l.center]}),_n(d.state,l.state)||u.push({command:"setGlobalState",args:[l.state]}),_n(d.centerAltitude,l.centerAltitude)||u.push({command:"setCenterAltitude",args:[l.centerAltitude]}),_n(d.zoom,l.zoom)||u.push({command:"setZoom",args:[l.zoom]}),_n(d.bearing,l.bearing)||u.push({command:"setBearing",args:[l.bearing]}),_n(d.pitch,l.pitch)||u.push({command:"setPitch",args:[l.pitch]}),_n(d.roll,l.roll)||u.push({command:"setRoll",args:[l.roll]}),_n(d.sprite,l.sprite)||u.push({command:"setSprite",args:[l.sprite]}),_n(d.glyphs,l.glyphs)||u.push({command:"setGlyphs",args:[l.glyphs]}),_n(d.transition,l.transition)||u.push({command:"setTransition",args:[l.transition]}),_n(d.light,l.light)||u.push({command:"setLight",args:[l.light]}),_n(d.terrain,l.terrain)||u.push({command:"setTerrain",args:[l.terrain]}),_n(d.sky,l.sky)||u.push({command:"setSky",args:[l.sky]}),_n(d.projection,l.projection)||u.push({command:"setProjection",args:[l.projection]});const m={},b=[];(function(A,R,B,$){let q;for(q in R=R||{},A=A||{})Object.prototype.hasOwnProperty.call(A,q)&&(Object.prototype.hasOwnProperty.call(R,q)||Oi(q,B,$));for(q in R)Object.prototype.hasOwnProperty.call(R,q)&&(Object.prototype.hasOwnProperty.call(A,q)?_n(A[q],R[q])||(A[q].type==="geojson"&&R[q].type==="geojson"&&hi(A,R,q)?pn(B,{command:"setGeoJSONSourceData",args:[q,R[q].data]}):mn(q,R,B,$)):Bi(q,R,B))})(d.sources,l.sources,b,m);const C=[];d.layers&&d.layers.forEach((A=>{"source"in A&&m[A.source]?u.push({command:"removeLayer",args:[A.id]}):C.push(A)})),u=u.concat(b),(function(A,R,B){R=R||[];const $=(A=A||[]).map(sn),q=R.map(sn),te=A.reduce(Fe,{}),oe=R.reduce(Fe,{}),ce=$.slice(),fe=Object.create(null);let ge,ve,Ie,Qe,De;for(let ze=0,it=0;ze<$.length;ze++)ge=$[ze],Object.prototype.hasOwnProperty.call(oe,ge)?it++:(pn(B,{command:"removeLayer",args:[ge]}),ce.splice(ce.indexOf(ge,it),1));for(let ze=0,it=0;ze<q.length;ze++)ge=q[q.length-1-ze],ce[ce.length-1-ze]!==ge&&(Object.prototype.hasOwnProperty.call(te,ge)?(pn(B,{command:"removeLayer",args:[ge]}),ce.splice(ce.lastIndexOf(ge,ce.length-it),1)):it++,Qe=ce[ce.length-ze],pn(B,{command:"addLayer",args:[oe[ge],Qe]}),ce.splice(ce.length-ze,0,ge),fe[ge]=!0);for(let ze=0;ze<q.length;ze++)if(ge=q[ze],ve=te[ge],Ie=oe[ge],!fe[ge]&&!_n(ve,Ie))if(_n(ve.source,Ie.source)&&_n(ve["source-layer"],Ie["source-layer"])&&_n(ve.type,Ie.type)){for(De in Xi(ve.layout,Ie.layout,B,ge,null,"setLayoutProperty"),Xi(ve.paint,Ie.paint,B,ge,null,"setPaintProperty"),_n(ve.filter,Ie.filter)||pn(B,{command:"setFilter",args:[ge,Ie.filter]}),_n(ve.minzoom,Ie.minzoom)&&_n(ve.maxzoom,Ie.maxzoom)||pn(B,{command:"setLayerZoomRange",args:[ge,Ie.minzoom,Ie.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?Xi(ve[De],Ie[De],B,ge,De.slice(6),"setPaintProperty"):_n(ve[De],Ie[De])||pn(B,{command:"setLayerProperty",args:[ge,De,Ie[De]]}));for(De in Ie)Object.prototype.hasOwnProperty.call(Ie,De)&&!Object.prototype.hasOwnProperty.call(ve,De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?Xi(ve[De],Ie[De],B,ge,De.slice(6),"setPaintProperty"):_n(ve[De],Ie[De])||pn(B,{command:"setLayerProperty",args:[ge,De,Ie[De]]}))}else pn(B,{command:"removeLayer",args:[ge]}),Qe=ce[ce.lastIndexOf(ge)+1],pn(B,{command:"addLayer",args:[Ie,Qe]})})(C,l.layers,u)}catch(m){console.warn("Unable to compute style diff:",m),u=[{command:"setStyle",args:[l]}]}return u},o.bX=function(d){const l=[],u=d.id;return u===void 0&&l.push({message:`layers.${u}: missing required property "id"`}),d.render===void 0&&l.push({message:`layers.${u}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&l.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),l},o.bY=Li,o.bZ=si,o.b_=class extends Vo{constructor(d,l){super(d,l),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},o.ba=function(d,l,u){return d[0]=l[0]*u,d[1]=l[1]*u,d[2]=l[2]*u,d[3]=l[3]*u,d},o.bb=function(d,l){return d[0]*l[0]+d[1]*l[1]+d[2]*l[2]+d[3]},o.bc=b2,o.bd=dp,o.be=function(d,l,u,m,b){var C=1/Math.tan(l/2);if(d[0]=C/u,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=C,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,b!=null&&b!==1/0){var A=1/(m-b);d[10]=(b+m)*A,d[14]=2*b*m*A}else d[10]=-1,d[14]=-2*m;return d},o.bf=function(d){var l=new Z(16);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=d[7],l[8]=d[8],l[9]=d[9],l[10]=d[10],l[11]=d[11],l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15],l},o.bg=function(d,l,u){var m=Math.sin(u),b=Math.cos(u),C=l[0],A=l[1],R=l[2],B=l[3],$=l[4],q=l[5],te=l[6],oe=l[7];return l!==d&&(d[8]=l[8],d[9]=l[9],d[10]=l[10],d[11]=l[11],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[0]=C*b+$*m,d[1]=A*b+q*m,d[2]=R*b+te*m,d[3]=B*b+oe*m,d[4]=$*b-C*m,d[5]=q*b-A*m,d[6]=te*b-R*m,d[7]=oe*b-B*m,d},o.bh=function(d,l,u){var m=Math.sin(u),b=Math.cos(u),C=l[4],A=l[5],R=l[6],B=l[7],$=l[8],q=l[9],te=l[10],oe=l[11];return l!==d&&(d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[4]=C*b+$*m,d[5]=A*b+q*m,d[6]=R*b+te*m,d[7]=B*b+oe*m,d[8]=$*b-C*m,d[9]=q*b-A*m,d[10]=te*b-R*m,d[11]=oe*b-B*m,d},o.bi=function(){const d=new Float32Array(16);return ie(d),d},o.bj=function(){const d=new Float64Array(16);return ie(d),d},o.bk=function(){return new Float64Array(16)},o.bl=function(d,l,u){const m=new Float64Array(4);return ht(m,d,l-90,u),m},o.bm=function(d,l,u,m){var b,C,A,R,B,$=l[0],q=l[1],te=l[2],oe=l[3],ce=u[0],fe=u[1],ge=u[2],ve=u[3];return(C=$*ce+q*fe+te*ge+oe*ve)<0&&(C=-C,ce=-ce,fe=-fe,ge=-ge,ve=-ve),1-C>G?(b=Math.acos(C),A=Math.sin(b),R=Math.sin((1-m)*b)/A,B=Math.sin(m*b)/A):(R=1-m,B=m),d[0]=R*$+B*ce,d[1]=R*q+B*fe,d[2]=R*te+B*ge,d[3]=R*oe+B*ve,d},o.bn=function(d){const l=new Float64Array(9);(function(C,A){var R=A[0],B=A[1],$=A[2],q=A[3],te=R+R,oe=B+B,ce=$+$,fe=R*te,ge=B*te,ve=B*oe,Ie=$*te,Qe=$*oe,De=$*ce,ze=q*te,it=q*oe,ot=q*ce;C[0]=1-ve-De,C[3]=ge-ot,C[6]=Ie+it,C[1]=ge+ot,C[4]=1-fe-De,C[7]=Qe-ze,C[2]=Ie-it,C[5]=Qe+ze,C[8]=1-fe-ve})(l,d);const u=Di(-Math.asin(wt(l[2],-1,1)));let m,b;return Math.hypot(l[5],l[8])<.001?(m=0,b=-Di(Math.atan2(l[3],l[4]))):(m=Di(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),b=Di(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:m,pitch:u+90,bearing:b}},o.bo=function(d,l){return d.roll==l.roll&&d.pitch==l.pitch&&d.bearing==l.bearing},o.bp=yn,o.bq=uh,o.br=lp,o.bs=Vg,o.bt=op,o.bu=ni,o.bv=xi,o.bw=Me,o.bx=function(d,l,u,m,b){return ni(m,b,wt((d-l)/(u-l),0,1))},o.by=Nt,o.bz=function(){return new Float64Array(3)},o.c=rt,o.c$=function(d,l,u,m,b){return s(this,void 0,void 0,(function*(){if(U())try{return yield Fi(d,l,u,m,b)}catch{}return(function(C,A,R,B,$){const q=C.width,te=C.height;ci&&Wi||(ci=new OffscreenCanvas(q,te),Wi=ci.getContext("2d",{willReadFrequently:!0})),ci.width=q,ci.height=te,Wi.drawImage(C,0,0,q,te);const oe=Wi.getImageData(A,R,B,$);return Wi.clearRect(0,0,q,te),oe.data})(d,l,u,m,b)}))},o.c0=class extends Vo{constructor(d,l){super(d,l),this.current=Al}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let l=1;l<16;l++)if(d[l]!==this.current[l]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},o.c1=jd,o.c2=class extends Vo{constructor(d,l){super(d,l),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},o.c3=class extends Vo{constructor(d,l){super(d,l),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},o.c4=ee,o.c5=function(d,l){var u=Math.sin(l),m=Math.cos(l);return d[0]=m,d[1]=u,d[2]=0,d[3]=-u,d[4]=m,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},o.c6=function(d,l,u){var m=l[0],b=l[1],C=l[2];return d[0]=m*u[0]+b*u[3]+C*u[6],d[1]=m*u[1]+b*u[4]+C*u[7],d[2]=m*u[2]+b*u[5]+C*u[8],d},o.c7=function(d,l,u,m,b,C,A){var R=1/(l-u),B=1/(m-b),$=1/(C-A);return d[0]=-2*R,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*B,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*$,d[11]=0,d[12]=(l+u)*R,d[13]=(b+m)*B,d[14]=(A+C)*$,d[15]=1,d},o.c8=class extends Vo{constructor(d,l){super(d,l),this.current=new Array}set(d){if(d!=this.current){this.current=d;const l=new Float32Array(4*d.length);for(let u=0;u<d.length;u++)l[4*u]=d[u].r,l[4*u+1]=d[u].g,l[4*u+2]=d[u].b,l[4*u+3]=d[u].a;this.gl.uniform4fv(this.location,l)}}},o.c9=class extends Vo{constructor(d,l){super(d,l),this.current=new Array}set(d){if(d!=this.current){this.current=d;const l=new Float32Array(d);this.gl.uniform1fv(this.location,l)}}},o.cA=function(d,l){return dt[l]&&"touches"in d},o.cB=function(d){return dt[d]||xe[d]},o.cC=function(d,l,u){var m=l[0],b=l[1];return d[0]=u[0]*m+u[4]*b+u[12],d[1]=u[1]*m+u[5]*b+u[13],d},o.cD=function(d,l){const{x:u,y:m}=Xg.fromLngLat(l);return!(d<0||d>25||m<0||m>=1||u<0||u>=1)},o.cE=function(d,l){return d[0]=l[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=l[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=l[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},o.cF=class extends Zf{},o.cG=JR,o.cI=He,o.cJ=function(d,l){rt.REGISTERED_PROTOCOLS[d]=l},o.cK=function(d){delete rt.REGISTERED_PROTOCOLS[d]},o.cL=function(d,l){const u={};for(let b=0;b<d.length;b++){const C=l&&l[d[b].id]||xc(d[b]);l&&(l[d[b].id]=C);let A=u[C];A||(A=u[C]=[]),A.push(d[b])}const m=[];for(const b in u)m.push(u[b]);return m},o.cM=Ji,o.cN=S2,o.cO=tk,o.cP=a2,o.cQ=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=Dt/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const l=d.bucket.layers[0],u=l.layout,m=l._unevaluatedLayout._values,b={layoutIconSize:m["icon-size"].possiblyEvaluate(new sr(d.bucket.zoom+1),d.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new sr(d.bucket.zoom+1),d.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new sr(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:$,maxZoom:q}=d.bucket.textSizeData;b.compositeTextSizes=[m["text-size"].possiblyEvaluate(new sr($),d.canonical),m["text-size"].possiblyEvaluate(new sr(q),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:$,maxZoom:q}=d.bucket.iconSizeData;b.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new sr($),d.canonical),m["icon-size"].possiblyEvaluate(new sr(q),d.canonical)]}const C=u.get("text-line-height")*qs,A=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",R=u.get("text-keep-upright"),B=u.get("text-size");for(const $ of d.bucket.features){const q=u.get("text-font").evaluate($,{},d.canonical).join(","),te=B.evaluate($,{},d.canonical),oe=b.layoutTextSize.evaluate($,{},d.canonical),ce=b.layoutIconSize.evaluate($,{},d.canonical),fe={horizontal:{},vertical:void 0},ge=$.text;let ve,Ie=[0,0];if(ge){const ze=ge.toString(),it=u.get("text-letter-spacing").evaluate($,{},d.canonical)*qs,ot=sh(ze)?it:0,Ot=u.get("text-anchor").evaluate($,{},d.canonical),ri=pk(l,$,d.canonical);if(!ri){const gi=u.get("text-radial-offset").evaluate($,{},d.canonical);Ie=gi?fk(Ot,[gi*qs,rv]):u.get("text-offset").evaluate($,{},d.canonical).map((ti=>ti*qs))}let Qt=A?"center":u.get("text-justify").evaluate($,{},d.canonical);const di=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate($,{},d.canonical)*qs:1/0,Ni=()=>{d.bucket.allowVerticalPlacement&&Wr(ze)&&(fe.vertical=Wy(ge,d.glyphMap,d.glyphPositions,d.imagePositions,q,di,C,Ot,"left",ot,Ie,o.az.vertical,!0,oe,te))};if(!A&&ri){const gi=new Set;if(Qt==="auto")for(let $t=0;$t<ri.values.length;$t+=2)gi.add(sv(ri.values[$t]));else gi.add(Qt);let ti=!1;for(const $t of gi)if(!fe.horizontal[$t])if(ti)fe.horizontal[$t]=fe.horizontal[0];else{const tn=Wy(ge,d.glyphMap,d.glyphPositions,d.imagePositions,q,di,C,"center",$t,ot,Ie,o.az.horizontal,!1,oe,te);tn&&(fe.horizontal[$t]=tn,ti=tn.positionedLines.length===1)}Ni()}else{Qt==="auto"&&(Qt=sv(Ot));const gi=Wy(ge,d.glyphMap,d.glyphPositions,d.imagePositions,q,di,C,Ot,Qt,ot,Ie,o.az.horizontal,!1,oe,te);gi&&(fe.horizontal[Qt]=gi),Ni(),Wr(ze)&&A&&R&&(fe.vertical=Wy(ge,d.glyphMap,d.glyphPositions,d.imagePositions,q,di,C,Ot,Qt,ot,Ie,o.az.vertical,!1,oe,te))}}let Qe=!1;if($.icon&&$.icon.name){const ze=d.imageMap[$.icon.name];ze&&(ve=oR(d.imagePositions[$.icon.name],u.get("icon-offset").evaluate($,{},d.canonical),u.get("icon-anchor").evaluate($,{},d.canonical)),Qe=!!ze.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=Qe:d.bucket.sdfIcons!==Qe&&Qi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ze.pixelRatio!==d.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const De=mk(fe.horizontal)||fe.vertical;d.bucket.iconsInText=!!De&&De.iconsInText,(De||ve)&&ZR(d.bucket,$,fe,ve,d.imageMap,b,oe,ce,Ie,Qe,d.canonical,d.subdivisionGranularity)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},o.cR=Ex,o.cS=Ix,o.cT=Px,o.cU=function(d){const l=new Gy;return(function(u,m){for(const b in u.layers)m.writeMessage(3,zR,u.layers[b])})(d,l),l.finish()},o.cV=function(d,l,u,m,b,C){let A=ak(d,l,u,b,0);return A=ak(A,l,m,C,1),A},o.cW=class{constructor(d){this.maxEntries=d,this.map=new Map}get(d){const l=this.map.get(d);return l!==void 0&&(this.map.delete(d),this.map.set(d,l)),l}set(d,l){if(this.map.has(d))this.map.delete(d);else if(this.map.size>=this.maxEntries){const u=this.map.keys().next().value;this.map.delete(u)}this.map.set(d,l)}clear(){this.map.clear()}},o.cX=jS,o.cY=Gy,o.cZ=Q2,o.c_=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},o.ca=class extends lh{},o.cb=BD,o.cc=class extends Bd{},o.cd=Sx,o.ce=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},o.cf=CS,o.cg=function(d,l,u){var m=l[0],b=l[1],C=l[2],A=u[3]*m+u[7]*b+u[11]*C+u[15];return d[0]=(u[0]*m+u[4]*b+u[8]*C+u[12])/(A=A||1),d[1]=(u[1]*m+u[5]*b+u[9]*C+u[13])/A,d[2]=(u[2]*m+u[6]*b+u[10]*C+u[14])/A,d},o.ch=class extends Tg{},o.ci=class extends c{},o.cj=function(d,l){return d[0]===l[0]&&d[1]===l[1]&&d[2]===l[2]&&d[3]===l[3]&&d[4]===l[4]&&d[5]===l[5]&&d[6]===l[6]&&d[7]===l[7]&&d[8]===l[8]&&d[9]===l[9]&&d[10]===l[10]&&d[11]===l[11]&&d[12]===l[12]&&d[13]===l[13]&&d[14]===l[14]&&d[15]===l[15]},o.ck=function(d,l){var u=d[0],m=d[1],b=d[2],C=d[3],A=d[4],R=d[5],B=d[6],$=d[7],q=d[8],te=d[9],oe=d[10],ce=d[11],fe=d[12],ge=d[13],ve=d[14],Ie=d[15],Qe=l[0],De=l[1],ze=l[2],it=l[3],ot=l[4],Ot=l[5],ri=l[6],Qt=l[7],di=l[8],Ni=l[9],gi=l[10],ti=l[11],$t=l[12],tn=l[13],qi=l[14],dn=l[15];return Math.abs(u-Qe)<=G*Math.max(1,Math.abs(u),Math.abs(Qe))&&Math.abs(m-De)<=G*Math.max(1,Math.abs(m),Math.abs(De))&&Math.abs(b-ze)<=G*Math.max(1,Math.abs(b),Math.abs(ze))&&Math.abs(C-it)<=G*Math.max(1,Math.abs(C),Math.abs(it))&&Math.abs(A-ot)<=G*Math.max(1,Math.abs(A),Math.abs(ot))&&Math.abs(R-Ot)<=G*Math.max(1,Math.abs(R),Math.abs(Ot))&&Math.abs(B-ri)<=G*Math.max(1,Math.abs(B),Math.abs(ri))&&Math.abs($-Qt)<=G*Math.max(1,Math.abs($),Math.abs(Qt))&&Math.abs(q-di)<=G*Math.max(1,Math.abs(q),Math.abs(di))&&Math.abs(te-Ni)<=G*Math.max(1,Math.abs(te),Math.abs(Ni))&&Math.abs(oe-gi)<=G*Math.max(1,Math.abs(oe),Math.abs(gi))&&Math.abs(ce-ti)<=G*Math.max(1,Math.abs(ce),Math.abs(ti))&&Math.abs(fe-$t)<=G*Math.max(1,Math.abs(fe),Math.abs($t))&&Math.abs(ge-tn)<=G*Math.max(1,Math.abs(ge),Math.abs(tn))&&Math.abs(ve-qi)<=G*Math.max(1,Math.abs(ve),Math.abs(qi))&&Math.abs(Ie-dn)<=G*Math.max(1,Math.abs(Ie),Math.abs(dn))},o.cl=function(d,l){return d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[4]=l[4],d[5]=l[5],d[6]=l[6],d[7]=l[7],d[8]=l[8],d[9]=l[9],d[10]=l[10],d[11]=l[11],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15],d},o.cm=d=>d.type==="symbol",o.cn=d=>d.type==="circle",o.co=d=>d.type==="heatmap",o.cp=d=>d.type==="line",o.cq=d=>d.type==="fill",o.cr=d=>d.type==="fill-extrusion",o.cs=d=>d.type==="hillshade",o.ct=d=>d.type==="color-relief",o.cu=d=>d.type==="background",o.cv=d=>d.type==="custom",o.cw=Lt,o.cx=function(d,l,u){const m=pt(l.x-u.x,l.y-u.y),b=pt(d.x-u.x,d.y-u.y),C=Math.atan2(m[0]*b[1]-m[1]*b[0],(function(A,R){return A[0]*R[0]+A[1]*R[1]})(m,b));return Di(C)},o.cy=Tt,o.cz=function(d,l){return xe[l]&&(d instanceof MouseEvent||d instanceof WheelEvent)},o.d=Et,o.d0=ES,o.d1=f,o.d2=class{constructor(d,l){this.layers={[Zg]:this},this.name=Zg,this.version=l?l.version:1,this.extent=l?l.extent:4096,this.length=d.length,this.features=d}feature(d){return new OR(this.features[d],this.extent)}},o.d3=Vc,o.d4=Tu,o.e=bi,o.f=d=>s(void 0,void 0,void 0,(function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(l)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),o.g=St,o.h=d=>new Promise(((l,u)=>{const m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame((()=>{m.src=li}))},m.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const b=new Blob([new Uint8Array(d)],{type:"image/png"});m.src=d.byteLength?URL.createObjectURL(b):li})),o.i=xn,o.j=(d,l)=>Ut(bi(d,{type:"json"}),l),o.k=Ai,o.l=Si,o.m=Ut,o.n=(d,l)=>Ut(bi(d,{type:"arrayBuffer"}),l),o.o=function(d){return new Gy(d).readFields(QD,[])},o.p=n2,o.q=function(d){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))},o.r=zg,o.s=wi,o.t=Eo,o.u=Mt,o.v=Pr,o.w=Qi,o.x=Cg,o.y=kl,o.z=Pd})),n("worker",["./shared"],(function(o){class s{constructor(xe,be){this.keyCache={},xe&&this.replace(xe,be)}replace(xe,be){this._layerConfigs={},this._layers={},this.update(xe,[],be)}update(xe,be,Ce){for(const rt of xe){this._layerConfigs[rt.id]=rt;const St=this._layers[rt.id]=o.bT(rt,Ce);St._featureFilter=o.aj(St.filter,Ce),this.keyCache[rt.id]&&delete this.keyCache[rt.id]}for(const rt of be)delete this.keyCache[rt],delete this._layerConfigs[rt],delete this._layers[rt];this.familiesBySource={};const tt=o.cL(Object.values(this._layerConfigs),this.keyCache);for(const rt of tt){const St=rt.map((It=>this._layers[It.id])),yt=St[0];if(yt.isHidden())continue;const He=yt.source||"";let _t=this.familiesBySource[He];_t||(_t=this.familiesBySource[He]={});const Ut=yt.sourceLayer||o.ai;let Et=_t[Ut];Et||(Et=_t[Ut]=[]),Et.push(St)}}}class h{constructor(xe){const be={},Ce=[];for(const yt in xe){const He=xe[yt],_t=be[yt]={};for(const Ut in He){const Et=He[+Ut];if(!Et||Et.bitmap.width===0||Et.bitmap.height===0)continue;const It={x:0,y:0,w:Et.bitmap.width+2,h:Et.bitmap.height+2};Ce.push(It),_t[Ut]={rect:It,metrics:Et.metrics}}}const{w:tt,h:rt}=o.p(Ce),St=new o.r({width:tt||1,height:rt||1});for(const yt in xe){const He=xe[yt];for(const _t in He){const Ut=He[+_t];if(!Ut||Ut.bitmap.width===0||Ut.bitmap.height===0)continue;const Et=be[yt][_t].rect;o.r.copy(Ut.bitmap,St,{x:0,y:0},{x:Et.x+1,y:Et.y+1},Ut.bitmap)}}this.image=St,this.positions=be}}o.cM("GlyphAtlas",h);class f{constructor(xe){this.tileID=new o.a2(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.uid=xe.uid,this.zoom=xe.zoom,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=xe.showCollisionBoxes,this.collectResourceTiming=!!xe.collectResourceTiming,this.returnDependencies=!!xe.returnDependencies,this.promoteId=xe.promoteId,this.inFlightDependencies=[]}parse(xe,be,Ce,tt,rt){return o._(this,void 0,void 0,(function*(){this.status="parsing",this.data=xe,this.collisionBoxArray=new o.ag;const St=new o.cN(Object.keys(xe.layers).sort()),yt=new o.cO(this.tileID,this.promoteId);yt.bucketLayerIDs=[];const He={},_t={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Ce,subdivisionGranularity:rt},Ut=be.familiesBySource[this.source];for(const hi in Ut){const Xi=xe.layers[hi];if(!Xi)continue;Xi.version===1&&o.w(`Vector tile source "${this.source}" layer "${hi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const sn=St.encode(hi),Fe=[];for(let Oe=0;Oe<Xi.length;Oe++){const xt=Xi.feature(Oe),ct=yt.getId(xt,hi);Fe.push({feature:xt,id:ct,index:Oe,sourceLayerIndex:sn})}for(const Oe of Ut[hi]){const xt=Oe[0];xt.source!==this.source&&o.w(`layer.source = ${xt.source} does not equal this.source = ${this.source}`),xt.isHidden(this.zoom,!0)||(y(Oe,this.zoom,Ce),(He[xt.id]=xt.createBucket({index:yt.bucketLayerIDs.length,layers:Oe,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sn,sourceID:this.source})).populate(Fe,_t,this.tileID.canonical),yt.bucketLayerIDs.push(Oe.map((ct=>ct.id))))}}const Et=o.bY(_t.glyphDependencies,(hi=>Object.keys(hi).map(Number)));this.inFlightDependencies.forEach((hi=>hi?.abort())),this.inFlightDependencies=[];let It=Promise.resolve({});if(Object.keys(Et).length){const hi=new AbortController;this.inFlightDependencies.push(hi),It=tt.sendAsync({type:"GG",data:{stacks:Et,source:this.source,tileID:this.tileID,type:"glyphs"}},hi)}const ai=Object.keys(_t.iconDependencies);let Si=Promise.resolve({});if(ai.length){const hi=new AbortController;this.inFlightDependencies.push(hi),Si=tt.sendAsync({type:"GI",data:{icons:ai,source:this.source,tileID:this.tileID,type:"icons"}},hi)}const Ai=Object.keys(_t.patternDependencies);let Mn=Promise.resolve({});if(Ai.length){const hi=new AbortController;this.inFlightDependencies.push(hi),Mn=tt.sendAsync({type:"GI",data:{icons:Ai,source:this.source,tileID:this.tileID,type:"patterns"}},hi)}const Mt=_t.dashDependencies;let Dn=Promise.resolve({});if(Object.keys(Mt).length){const hi=new AbortController;this.inFlightDependencies.push(hi),Dn=tt.sendAsync({type:"GDA",data:{dashes:Mt}},hi)}const[Yn,_n,pn,Bi]=yield Promise.all([It,Si,Mn,Dn]),Oi=new h(Yn),mn=new o.cP(_n,pn);for(const hi in He){const Xi=He[hi];Xi instanceof o.ah?(y(Xi.layers,this.zoom,Ce),o.cQ({bucket:Xi,glyphMap:Yn,glyphPositions:Oi.positions,imageMap:_n,imagePositions:mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:_t.subdivisionGranularity})):Xi.hasDependencies&&(Xi instanceof o.cR||Xi instanceof o.cS||Xi instanceof o.cT)&&(y(Xi.layers,this.zoom,Ce),Xi.addFeatures(_t,this.tileID.canonical,mn.patternPositions,Bi))}return this.status="done",{buckets:Object.values(He).filter((hi=>!hi.isEmpty())),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Oi.image,imageAtlas:mn,dashPositions:Bi,glyphMap:this.returnDependencies?Yn:null,iconMap:this.returnDependencies?_n:null,glyphPositions:this.returnDependencies?Oi.positions:null}}))}}function y(dt,xe,be){const Ce=new o.H(xe);for(const tt of dt)tt.recalculate(Ce,be)}class x{constructor(xe,be,Ce,tt,rt){this.type=xe,this.properties=Ce||{},this.extent=rt,this.pointsArray=be,this.id=tt}loadGeometry(){return this.pointsArray.map((xe=>xe.map((be=>new o.P(be.x,be.y)))))}}class S{constructor(xe,be,Ce){this.version=2,this._myFeatures=xe,this.name=be,this.length=xe.length,this.extent=Ce}feature(xe){return this._myFeatures[xe]}}class E{constructor(){this.layers={}}addLayer(xe){this.layers[xe.name]=xe}}function z(dt){let xe=o.cU(dt);return xe.byteOffset===0&&xe.byteLength===xe.buffer.byteLength||(xe=new Uint8Array(xe)),{vectorTile:dt,rawData:xe.buffer}}function D(dt,xe,be){const{extent:Ce}=dt,tt=Math.pow(2,be.z-xe.z),rt=(be.x-xe.x*tt)*Ce,St=(be.y-xe.y*tt)*Ce,yt=[];for(let He=0;He<dt.length;He++){const _t=dt.feature(He);let Ut=_t.loadGeometry();for(const It of Ut)for(const ai of It)ai.x=ai.x*tt-rt,ai.y=ai.y*tt-St;const Et=128;Ut=o.cV(Ut,_t.type,-Et,-Et,Ce+Et,Ce+Et),Ut.length!==0&&yt.push(new x(_t.type,Ut,_t.properties,_t.id,Ce))}return new S(yt,dt.name,Ce)}class F{constructor(xe,be,Ce){this.actor=xe,this.layerIndex=be,this.availableImages=Ce,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new o.cW(1e3)}loadVectorTile(xe,be){return o._(this,void 0,void 0,(function*(){const Ce=yield o.n(xe.request,be);try{return{vectorTile:xe.encoding!=="mlt"?new o.cX(new o.cY(Ce.data)):new o.cZ(Ce.data),rawData:Ce.data,cacheControl:Ce.cacheControl,expires:Ce.expires}}catch(tt){const rt=new Uint8Array(Ce.data);let St=`Unable to parse the tile at ${xe.request.url}, `;throw St+=rt[0]===31&&rt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${tt.message}`,new Error(St)}}))}loadTile(xe){return o._(this,void 0,void 0,(function*(){const{uid:be,overzoomParameters:Ce}=xe;Ce&&(xe.request=Ce.overzoomRequest);const tt=!!(xe&&xe.request&&xe.request.collectResourceTiming)&&new o.c_(xe.request),rt=new f(xe);this.loading[be]=rt;const St=new AbortController;rt.abort=St;try{const yt=yield this.loadVectorTile(xe,St);if(delete this.loading[be],!yt)return null;if(Ce){const It=this._getOverzoomTile(xe,yt.vectorTile);yt.rawData=It.rawData,yt.vectorTile=It.vectorTile}const He=yt.rawData,_t={};yt.expires&&(_t.expires=yt.expires),yt.cacheControl&&(_t.cacheControl=yt.cacheControl);const Ut={};if(tt){const It=tt.finish();It&&(Ut.resourceTiming=JSON.parse(JSON.stringify(It)))}rt.vectorTile=yt.vectorTile;const Et=rt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,xe.subdivisionGranularity);this.loaded[be]=rt,this.fetching[be]={rawTileData:He,cacheControl:_t,resourceTiming:Ut};try{const It=yield Et;return o.e({rawTileData:He.slice(0),encoding:xe.encoding},It,_t,Ut)}finally{delete this.fetching[be]}}catch(yt){throw delete this.loading[be],rt.status="done",this.loaded[be]=rt,yt}}))}_getOverzoomTile(xe,be){const{tileID:Ce,source:tt,overzoomParameters:rt}=xe,{maxZoomTileID:St}=rt,yt=`${St.key}_${Ce.key}`,He=this.overzoomedTileResultCache.get(yt);if(He)return He;const _t=new E,Ut=this.layerIndex.familiesBySource[tt];for(const It in Ut){const ai=be.layers[It];if(!ai)continue;const Si=D(ai,St,Ce.canonical);Si.length>0&&_t.addLayer(Si)}const Et=z(_t);return this.overzoomedTileResultCache.set(yt,Et),Et}reloadTile(xe){return o._(this,void 0,void 0,(function*(){const be=xe.uid;if(!this.loaded||!this.loaded[be])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ce=this.loaded[be];if(Ce.showCollisionBoxes=xe.showCollisionBoxes,Ce.status==="parsing"){const tt=yield Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,xe.subdivisionGranularity);let rt;if(this.fetching[be]){const{rawTileData:St,cacheControl:yt,resourceTiming:He}=this.fetching[be];delete this.fetching[be],rt=o.e({rawTileData:St.slice(0),encoding:xe.encoding},tt,yt,He)}else rt=tt;return rt}if(Ce.status==="done"&&Ce.vectorTile)return Ce.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,xe.subdivisionGranularity)}))}abortTile(xe){return o._(this,void 0,void 0,(function*(){const be=this.loading,Ce=xe.uid;be&&be[Ce]&&be[Ce].abort&&(be[Ce].abort.abort(),delete be[Ce])}))}removeTile(xe){return o._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[xe.uid]&&delete this.loaded[xe.uid]}))}}class U{constructor(){this.loaded={}}loadTile(xe){return o._(this,void 0,void 0,(function*(){const{uid:be,encoding:Ce,rawImageData:tt,redFactor:rt,greenFactor:St,blueFactor:yt,baseShift:He}=xe,_t=tt.width+2,Ut=tt.height+2,Et=o.b(tt)?new o.R({width:_t,height:Ut},yield o.c$(tt,-1,-1,_t,Ut)):tt,It=new o.d0(be,Et,Ce,rt,St,yt,He);return this.loaded=this.loaded||{},this.loaded[be]=It,It}))}removeTile(xe){const be=this.loaded,Ce=xe.uid;be&&be[Ce]&&delete be[Ce]}}var G,Z,ee=(function(){if(Z)return G;function dt(be,Ce){if(be.length!==0){xe(be[0],Ce);for(var tt=1;tt<be.length;tt++)xe(be[tt],!Ce)}}function xe(be,Ce){for(var tt=0,rt=0,St=0,yt=be.length,He=yt-1;St<yt;He=St++){var _t=(be[St][0]-be[He][0])*(be[He][1]+be[St][1]),Ut=tt+_t;rt+=Math.abs(tt)>=Math.abs(_t)?tt-Ut+_t:_t-Ut+tt,tt=Ut}tt+rt>=0!=!!Ce&&be.reverse()}return Z=1,G=function be(Ce,tt){var rt,St=Ce&&Ce.type;if(St==="FeatureCollection")for(rt=0;rt<Ce.features.length;rt++)be(Ce.features[rt],tt);else if(St==="GeometryCollection")for(rt=0;rt<Ce.geometries.length;rt++)be(Ce.geometries[rt],tt);else if(St==="Feature")be(Ce.geometry,tt);else if(St==="Polygon")dt(Ce.coordinates,tt);else if(St==="MultiPolygon")for(rt=0;rt<Ce.coordinates.length;rt++)dt(Ce.coordinates[rt],tt);return Ce}})(),ie=o.d1(ee);const le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:dt=>dt},J=Math.fround||(re=new Float32Array(1),dt=>(re[0]=+dt,re[0]));var re;class ae{constructor(xe){this.options=Object.assign(Object.create(le),xe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(xe){const{log:be,minZoom:Ce,maxZoom:tt}=this.options;be&&console.time("total time");const rt=`prepare ${xe.length} points`;be&&console.time(rt),this.points=xe;const St=[];for(let He=0;He<xe.length;He++){const _t=xe[He];if(!_t.geometry)continue;const[Ut,Et]=_t.geometry.coordinates,It=J(ye(Ut)),ai=J(Re(Et));St.push(It,ai,1/0,He,-1,1),this.options.reduce&&St.push(0)}let yt=this.trees[tt+1]=this._createTree(St);be&&console.timeEnd(rt);for(let He=tt;He>=Ce;He--){const _t=+Date.now();yt=this.trees[He]=this._createTree(this._cluster(yt,He)),be&&console.log("z%d: %d clusters in %dms",He,yt.numItems,+Date.now()-_t)}return be&&console.timeEnd("total time"),this}getClusters(xe,be){let Ce=((xe[0]+180)%360+360)%360-180;const tt=Math.max(-90,Math.min(90,xe[1]));let rt=xe[2]===180?180:((xe[2]+180)%360+360)%360-180;const St=Math.max(-90,Math.min(90,xe[3]));if(xe[2]-xe[0]>=360)Ce=-180,rt=180;else if(Ce>rt){const Et=this.getClusters([Ce,tt,180,St],be),It=this.getClusters([-180,tt,rt,St],be);return Et.concat(It)}const yt=this.trees[this._limitZoom(be)],He=yt.range(ye(Ce),Re(St),ye(rt),Re(tt)),_t=yt.data,Ut=[];for(const Et of He){const It=this.stride*Et;Ut.push(_t[It+5]>1?me(_t,It,this.clusterProps):this.points[_t[It+3]])}return Ut}getChildren(xe){const be=this._getOriginId(xe),Ce=this._getOriginZoom(xe),tt="No cluster with the specified id.",rt=this.trees[Ce];if(!rt)throw new Error(tt);const St=rt.data;if(be*this.stride>=St.length)throw new Error(tt);const yt=this.options.radius/(this.options.extent*Math.pow(2,Ce-1)),He=rt.within(St[be*this.stride],St[be*this.stride+1],yt),_t=[];for(const Ut of He){const Et=Ut*this.stride;St[Et+4]===xe&&_t.push(St[Et+5]>1?me(St,Et,this.clusterProps):this.points[St[Et+3]])}if(_t.length===0)throw new Error(tt);return _t}getLeaves(xe,be,Ce){const tt=[];return this._appendLeaves(tt,xe,be=be||10,Ce=Ce||0,0),tt}getTile(xe,be,Ce){const tt=this.trees[this._limitZoom(xe)],rt=Math.pow(2,xe),{extent:St,radius:yt}=this.options,He=yt/St,_t=(Ce-He)/rt,Ut=(Ce+1+He)/rt,Et={features:[]};return this._addTileFeatures(tt.range((be-He)/rt,_t,(be+1+He)/rt,Ut),tt.data,be,Ce,rt,Et),be===0&&this._addTileFeatures(tt.range(1-He/rt,_t,1,Ut),tt.data,rt,Ce,rt,Et),be===rt-1&&this._addTileFeatures(tt.range(0,_t,He/rt,Ut),tt.data,-1,Ce,rt,Et),Et.features.length?Et:null}getClusterExpansionZoom(xe){let be=this._getOriginZoom(xe)-1;for(;be<=this.options.maxZoom;){const Ce=this.getChildren(xe);if(be++,Ce.length!==1)break;xe=Ce[0].properties.cluster_id}return be}_appendLeaves(xe,be,Ce,tt,rt){const St=this.getChildren(be);for(const yt of St){const He=yt.properties;if(He&&He.cluster?rt+He.point_count<=tt?rt+=He.point_count:rt=this._appendLeaves(xe,He.cluster_id,Ce,tt,rt):rt<tt?rt++:xe.push(yt),xe.length===Ce)break}return rt}_createTree(xe){const be=new o.aT(xe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ce=0;Ce<xe.length;Ce+=this.stride)be.add(xe[Ce],xe[Ce+1]);return be.finish(),be.data=xe,be}_addTileFeatures(xe,be,Ce,tt,rt,St){for(const yt of xe){const He=yt*this.stride,_t=be[He+5]>1;let Ut,Et,It;if(_t)Ut=Te(be,He,this.clusterProps),Et=be[He],It=be[He+1];else{const Ai=this.points[be[He+3]];Ut=Ai.properties;const[Mn,Mt]=Ai.geometry.coordinates;Et=ye(Mn),It=Re(Mt)}const ai={type:1,geometry:[[Math.round(this.options.extent*(Et*rt-Ce)),Math.round(this.options.extent*(It*rt-tt))]],tags:Ut};let Si;Si=_t||this.options.generateId?be[He+3]:this.points[be[He+3]].id,Si!==void 0&&(ai.id=Si),St.features.push(ai)}}_limitZoom(xe){return Math.max(this.options.minZoom,Math.min(Math.floor(+xe),this.options.maxZoom+1))}_cluster(xe,be){const{radius:Ce,extent:tt,reduce:rt,minPoints:St}=this.options,yt=Ce/(tt*Math.pow(2,be)),He=xe.data,_t=[],Ut=this.stride;for(let Et=0;Et<He.length;Et+=Ut){if(He[Et+2]<=be)continue;He[Et+2]=be;const It=He[Et],ai=He[Et+1],Si=xe.within(He[Et],He[Et+1],yt),Ai=He[Et+5];let Mn=Ai;for(const Mt of Si){const Dn=Mt*Ut;He[Dn+2]>be&&(Mn+=He[Dn+5])}if(Mn>Ai&&Mn>=St){let Mt,Dn=It*Ai,Yn=ai*Ai,_n=-1;const pn=(Et/Ut<<5)+(be+1)+this.points.length;for(const Bi of Si){const Oi=Bi*Ut;if(He[Oi+2]<=be)continue;He[Oi+2]=be;const mn=He[Oi+5];Dn+=He[Oi]*mn,Yn+=He[Oi+1]*mn,He[Oi+4]=pn,rt&&(Mt||(Mt=this._map(He,Et,!0),_n=this.clusterProps.length,this.clusterProps.push(Mt)),rt(Mt,this._map(He,Oi)))}He[Et+4]=pn,_t.push(Dn/Mn,Yn/Mn,1/0,pn,-1,Mn),rt&&_t.push(_n)}else{for(let Mt=0;Mt<Ut;Mt++)_t.push(He[Et+Mt]);if(Mn>1)for(const Mt of Si){const Dn=Mt*Ut;if(!(He[Dn+2]<=be)){He[Dn+2]=be;for(let Yn=0;Yn<Ut;Yn++)_t.push(He[Dn+Yn])}}}}return _t}_getOriginId(xe){return xe-this.points.length>>5}_getOriginZoom(xe){return(xe-this.points.length)%32}_map(xe,be,Ce){if(xe[be+5]>1){const St=this.clusterProps[xe[be+6]];return Ce?Object.assign({},St):St}const tt=this.points[xe[be+3]].properties,rt=this.options.map(tt);return Ce&&rt===tt?Object.assign({},rt):rt}}function me(dt,xe,be){return{type:"Feature",id:dt[xe+3],properties:Te(dt,xe,be),geometry:{type:"Point",coordinates:[(Ce=dt[xe],360*(Ce-.5)),We(dt[xe+1])]}};var Ce}function Te(dt,xe,be){const Ce=dt[xe+5],tt=Ce>=1e4?`${Math.round(Ce/1e3)}k`:Ce>=1e3?Math.round(Ce/100)/10+"k":Ce,rt=dt[xe+6],St=rt===-1?{}:Object.assign({},be[rt]);return Object.assign(St,{cluster:!0,cluster_id:dt[xe+3],point_count:Ce,point_count_abbreviated:tt})}function ye(dt){return dt/360+.5}function Re(dt){const xe=Math.sin(dt*Math.PI/180),be=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return be<0?0:be>1?1:be}function We(dt){const xe=(180-360*dt)*Math.PI/180;return 360*Math.atan(Math.exp(xe))/Math.PI-90}function Le(dt,xe,be,Ce){let tt=Ce;const rt=xe+(be-xe>>1);let St,yt=be-xe;const He=dt[xe],_t=dt[xe+1],Ut=dt[be],Et=dt[be+1];for(let It=xe+3;It<be;It+=3){const ai=ht(dt[It],dt[It+1],He,_t,Ut,Et);if(ai>tt)St=It,tt=ai;else if(ai===tt){const Si=Math.abs(It-rt);Si<yt&&(St=It,yt=Si)}}tt>Ce&&(St-xe>3&&Le(dt,xe,St,Ce),dt[St+2]=tt,be-St>3&&Le(dt,St,be,Ce))}function ht(dt,xe,be,Ce,tt,rt){let St=tt-be,yt=rt-Ce;if(St!==0||yt!==0){const He=((dt-be)*St+(xe-Ce)*yt)/(St*St+yt*yt);He>1?(be=tt,Ce=rt):He>0&&(be+=St*He,Ce+=yt*He)}return St=dt-be,yt=xe-Ce,St*St+yt*yt}function $e(dt,xe,be,Ce){const tt={id:dt??null,type:xe,geometry:be,tags:Ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")pt(tt,be);else if(xe==="Polygon")pt(tt,be[0]);else if(xe==="MultiLineString")for(const rt of be)pt(tt,rt);else if(xe==="MultiPolygon")for(const rt of be)pt(tt,rt[0]);return tt}function pt(dt,xe){for(let be=0;be<xe.length;be+=3)dt.minX=Math.min(dt.minX,xe[be]),dt.minY=Math.min(dt.minY,xe[be+1]),dt.maxX=Math.max(dt.maxX,xe[be]),dt.maxY=Math.max(dt.maxY,xe[be+1])}function Dt(dt,xe,be,Ce){if(!xe.geometry)return;const tt=xe.geometry.coordinates;if(tt&&tt.length===0)return;const rt=xe.geometry.type,St=Math.pow(be.tolerance/((1<<be.maxZoom)*be.extent),2);let yt=[],He=xe.id;if(be.promoteId?He=xe.properties[be.promoteId]:be.generateId&&(He=Ce||0),rt==="Point")qe(tt,yt);else if(rt==="MultiPoint")for(const _t of tt)qe(_t,yt);else if(rt==="LineString")Nt(tt,yt,St,!1);else if(rt==="MultiLineString"){if(be.lineMetrics){for(const _t of tt)yt=[],Nt(_t,yt,St,!1),dt.push($e(He,"LineString",yt,xe.properties));return}ni(tt,yt,St,!1)}else if(rt==="Polygon")ni(tt,yt,St,!0);else{if(rt!=="MultiPolygon"){if(rt==="GeometryCollection"){for(const _t of xe.geometry.geometries)Dt(dt,{id:He,geometry:_t,properties:xe.properties},be,Ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const _t of tt){const Ut=[];ni(_t,Ut,St,!0),yt.push(Ut)}}dt.push($e(He,rt,yt,xe.properties))}function qe(dt,xe){xe.push(xi(dt[0]),Lt(dt[1]),0)}function Nt(dt,xe,be,Ce){let tt,rt,St=0;for(let He=0;He<dt.length;He++){const _t=xi(dt[He][0]),Ut=Lt(dt[He][1]);xe.push(_t,Ut,0),He>0&&(St+=Ce?(tt*Ut-_t*rt)/2:Math.sqrt(Math.pow(_t-tt,2)+Math.pow(Ut-rt,2))),tt=_t,rt=Ut}const yt=xe.length-3;xe[2]=1,Le(xe,0,yt,be),xe[yt+2]=1,xe.size=Math.abs(St),xe.start=0,xe.end=xe.size}function ni(dt,xe,be,Ce){for(let tt=0;tt<dt.length;tt++){const rt=[];Nt(dt[tt],rt,be,Ce),xe.push(rt)}}function xi(dt){return dt/360+.5}function Lt(dt){const xe=Math.sin(dt*Math.PI/180),be=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return be<0?0:be>1?1:be}function Tt(dt,xe,be,Ce,tt,rt,St,yt){if(Ce/=xe,rt>=(be/=xe)&&St<Ce)return dt;if(St<be||rt>=Ce)return null;const He=[];for(const _t of dt){const Ut=_t.geometry;let Et=_t.type;const It=tt===0?_t.minX:_t.minY,ai=tt===0?_t.maxX:_t.maxY;if(It>=be&&ai<Ce){He.push(_t);continue}if(ai<be||It>=Ce)continue;let Si=[];if(Et==="Point"||Et==="MultiPoint")wt(Ut,Si,be,Ce,tt);else if(Et==="LineString")mi(Ut,Si,be,Ce,tt,!1,yt.lineMetrics);else if(Et==="MultiLineString")Zi(Ut,Si,be,Ce,tt,!1);else if(Et==="Polygon")Zi(Ut,Si,be,Ce,tt,!0);else if(Et==="MultiPolygon")for(const Ai of Ut){const Mn=[];Zi(Ai,Mn,be,Ce,tt,!0),Mn.length&&Si.push(Mn)}if(Si.length){if(yt.lineMetrics&&Et==="LineString"){for(const Ai of Si)He.push($e(_t.id,Et,Ai,_t.tags));continue}Et!=="LineString"&&Et!=="MultiLineString"||(Si.length===1?(Et="LineString",Si=Si[0]):Et="MultiLineString"),Et!=="Point"&&Et!=="MultiPoint"||(Et=Si.length===3?"Point":"MultiPoint"),He.push($e(_t.id,Et,Si,_t.tags))}}return He.length?He:null}function wt(dt,xe,be,Ce,tt){for(let rt=0;rt<dt.length;rt+=3){const St=dt[rt+tt];St>=be&&St<=Ce&&Li(xe,dt[rt],dt[rt+1],dt[rt+2])}}function mi(dt,xe,be,Ce,tt,rt,St){let yt=bi(dt);const He=tt===0?si:fn;let _t,Ut,Et=dt.start;for(let Mn=0;Mn<dt.length-3;Mn+=3){const Mt=dt[Mn],Dn=dt[Mn+1],Yn=dt[Mn+2],_n=dt[Mn+3],pn=dt[Mn+4],Bi=tt===0?Mt:Dn,Oi=tt===0?_n:pn;let mn=!1;St&&(_t=Math.sqrt(Math.pow(Mt-_n,2)+Math.pow(Dn-pn,2))),Bi<be?Oi>be&&(Ut=He(yt,Mt,Dn,_n,pn,be),St&&(yt.start=Et+_t*Ut)):Bi>Ce?Oi<Ce&&(Ut=He(yt,Mt,Dn,_n,pn,Ce),St&&(yt.start=Et+_t*Ut)):Li(yt,Mt,Dn,Yn),Oi<be&&Bi>=be&&(Ut=He(yt,Mt,Dn,_n,pn,be),mn=!0),Oi>Ce&&Bi<=Ce&&(Ut=He(yt,Mt,Dn,_n,pn,Ce),mn=!0),!rt&&mn&&(St&&(yt.end=Et+_t*Ut),xe.push(yt),yt=bi(dt)),St&&(Et+=_t)}let It=dt.length-3;const ai=dt[It],Si=dt[It+1],Ai=tt===0?ai:Si;Ai>=be&&Ai<=Ce&&Li(yt,ai,Si,dt[It+2]),It=yt.length-3,rt&&It>=3&&(yt[It]!==yt[0]||yt[It+1]!==yt[1])&&Li(yt,yt[0],yt[1],yt[2]),yt.length&&xe.push(yt)}function bi(dt){const xe=[];return xe.size=dt.size,xe.start=dt.start,xe.end=dt.end,xe}function Zi(dt,xe,be,Ce,tt,rt){for(const St of dt)mi(St,xe,be,Ce,tt,rt,!1)}function Li(dt,xe,be,Ce){dt.push(xe,be,Ce)}function si(dt,xe,be,Ce,tt,rt){const St=(rt-xe)/(Ce-xe);return Li(dt,rt,be+(tt-be)*St,1),St}function fn(dt,xe,be,Ce,tt,rt){const St=(rt-be)/(tt-be);return Li(dt,xe+(Ce-xe)*St,rt,1),St}function Ii(dt,xe){const be=[];for(let Ce=0;Ce<dt.length;Ce++){const tt=dt[Ce],rt=tt.type;let St;if(rt==="Point"||rt==="MultiPoint"||rt==="LineString")St=Qi(tt.geometry,xe);else if(rt==="MultiLineString"||rt==="Polygon"){St=[];for(const yt of tt.geometry)St.push(Qi(yt,xe))}else if(rt==="MultiPolygon"){St=[];for(const yt of tt.geometry){const He=[];for(const _t of yt)He.push(Qi(_t,xe));St.push(He)}}be.push($e(tt.id,rt,St,tt.tags))}return be}function Qi(dt,xe){const be=[];be.size=dt.size,dt.start!==void 0&&(be.start=dt.start,be.end=dt.end);for(let Ce=0;Ce<dt.length;Ce+=3)be.push(dt[Ce]+xe,dt[Ce+1],dt[Ce+2]);return be}function rn(dt,xe){if(dt.transformed)return dt;const be=1<<dt.z,Ce=dt.x,tt=dt.y;for(const rt of dt.features){const St=rt.geometry,yt=rt.type;if(rt.geometry=[],yt===1)for(let He=0;He<St.length;He+=2)rt.geometry.push(xn(St[He],St[He+1],xe,be,Ce,tt));else for(let He=0;He<St.length;He++){const _t=[];for(let Ut=0;Ut<St[He].length;Ut+=2)_t.push(xn(St[He][Ut],St[He][Ut+1],xe,be,Ce,tt));rt.geometry.push(_t)}}return dt.transformed=!0,dt}function xn(dt,xe,be,Ce,tt,rt){return[Math.round(be*(dt*Ce-tt)),Math.round(be*(xe*Ce-rt))]}function Ye(dt,xe,be,Ce,tt){const rt=xe===tt.maxZoom?0:tt.tolerance/((1<<xe)*tt.extent),St={features:[],numPoints:0,numSimplified:0,numFeatures:dt.length,source:null,x:be,y:Ce,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const yt of dt)qt(St,yt,rt,tt);return St}function qt(dt,xe,be,Ce){const tt=xe.geometry,rt=xe.type,St=[];if(dt.minX=Math.min(dt.minX,xe.minX),dt.minY=Math.min(dt.minY,xe.minY),dt.maxX=Math.max(dt.maxX,xe.maxX),dt.maxY=Math.max(dt.maxY,xe.maxY),rt==="Point"||rt==="MultiPoint")for(let yt=0;yt<tt.length;yt+=3)St.push(tt[yt],tt[yt+1]),dt.numPoints++,dt.numSimplified++;else if(rt==="LineString")li(St,tt,dt,be,!1,!1);else if(rt==="MultiLineString"||rt==="Polygon")for(let yt=0;yt<tt.length;yt++)li(St,tt[yt],dt,be,rt==="Polygon",yt===0);else if(rt==="MultiPolygon")for(let yt=0;yt<tt.length;yt++){const He=tt[yt];for(let _t=0;_t<He.length;_t++)li(St,He[_t],dt,be,!0,_t===0)}if(St.length){let yt=xe.tags||null;if(rt==="LineString"&&Ce.lineMetrics){yt={};for(const _t in xe.tags)yt[_t]=xe.tags[_t];yt.mapbox_clip_start=tt.start/tt.size,yt.mapbox_clip_end=tt.end/tt.size}const He={geometry:St,type:rt==="Polygon"||rt==="MultiPolygon"?3:rt==="LineString"||rt==="MultiLineString"?2:1,tags:yt};xe.id!==null&&(He.id=xe.id),dt.features.push(He)}}function li(dt,xe,be,Ce,tt,rt){const St=Ce*Ce;if(Ce>0&&xe.size<(tt?St:Ce))return void(be.numPoints+=xe.length/3);const yt=[];for(let He=0;He<xe.length;He+=3)(Ce===0||xe[He+2]>St)&&(be.numSimplified++,yt.push(xe[He],xe[He+1])),be.numPoints++;tt&&(function(He,_t){let Ut=0;for(let Et=0,It=He.length,ai=It-2;Et<It;ai=Et,Et+=2)Ut+=(He[Et]-He[ai])*(He[Et+1]+He[ai+1]);if(Ut>0===_t)for(let Et=0,It=He.length;Et<It/2;Et+=2){const ai=He[Et],Si=He[Et+1];He[Et]=He[It-2-Et],He[Et+1]=He[It-1-Et],He[It-2-Et]=ai,He[It-1-Et]=Si}})(yt,rt),dt.push(yt)}const Fi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ci{constructor(xe,be){const Ce=(be=this.options=(function(rt,St){for(const yt in St)rt[yt]=St[yt];return rt})(Object.create(Fi),be)).debug;if(Ce&&console.time("preprocess data"),be.maxZoom<0||be.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(be.promoteId&&be.generateId)throw new Error("promoteId and generateId cannot be used together.");let tt=(function(rt,St){const yt=[];if(rt.type==="FeatureCollection")for(let He=0;He<rt.features.length;He++)Dt(yt,rt.features[He],St,He);else Dt(yt,rt.type==="Feature"?rt:{geometry:rt},St);return yt})(xe,be);this.tiles={},this.tileCoords=[],Ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",be.indexMaxZoom,be.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),tt=(function(rt,St){const yt=St.buffer/St.extent;let He=rt;const _t=Tt(rt,1,-1-yt,yt,0,-1,2,St),Ut=Tt(rt,1,1-yt,2+yt,0,-1,2,St);return(_t||Ut)&&(He=Tt(rt,1,-yt,1+yt,0,-1,2,St)||[],_t&&(He=Ii(_t,1).concat(He)),Ut&&(He=He.concat(Ii(Ut,-1)))),He})(tt,be),tt.length&&this.splitTile(tt,0,0,0),Ce&&(tt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(xe,be,Ce,tt,rt,St,yt){const He=[xe,be,Ce,tt],_t=this.options,Ut=_t.debug;for(;He.length;){tt=He.pop(),Ce=He.pop(),be=He.pop(),xe=He.pop();const Et=1<<be,It=Wi(be,Ce,tt);let ai=this.tiles[It];if(!ai&&(Ut>1&&console.time("creation"),ai=this.tiles[It]=Ye(xe,be,Ce,tt,_t),this.tileCoords.push({z:be,x:Ce,y:tt}),Ut)){Ut>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",be,Ce,tt,ai.numFeatures,ai.numPoints,ai.numSimplified),console.timeEnd("creation"));const mn=`z${be}`;this.stats[mn]=(this.stats[mn]||0)+1,this.total++}if(ai.source=xe,rt==null){if(be===_t.indexMaxZoom||ai.numPoints<=_t.indexMaxPoints)continue}else{if(be===_t.maxZoom||be===rt)continue;if(rt!=null){const mn=rt-be;if(Ce!==St>>mn||tt!==yt>>mn)continue}}if(ai.source=null,xe.length===0)continue;Ut>1&&console.time("clipping");const Si=.5*_t.buffer/_t.extent,Ai=.5-Si,Mn=.5+Si,Mt=1+Si;let Dn=null,Yn=null,_n=null,pn=null,Bi=Tt(xe,Et,Ce-Si,Ce+Mn,0,ai.minX,ai.maxX,_t),Oi=Tt(xe,Et,Ce+Ai,Ce+Mt,0,ai.minX,ai.maxX,_t);xe=null,Bi&&(Dn=Tt(Bi,Et,tt-Si,tt+Mn,1,ai.minY,ai.maxY,_t),Yn=Tt(Bi,Et,tt+Ai,tt+Mt,1,ai.minY,ai.maxY,_t),Bi=null),Oi&&(_n=Tt(Oi,Et,tt-Si,tt+Mn,1,ai.minY,ai.maxY,_t),pn=Tt(Oi,Et,tt+Ai,tt+Mt,1,ai.minY,ai.maxY,_t),Oi=null),Ut>1&&console.timeEnd("clipping"),He.push(Dn||[],be+1,2*Ce,2*tt),He.push(Yn||[],be+1,2*Ce,2*tt+1),He.push(_n||[],be+1,2*Ce+1,2*tt),He.push(pn||[],be+1,2*Ce+1,2*tt+1)}}getTile(xe,be,Ce){xe=+xe,be=+be,Ce=+Ce;const tt=this.options,{extent:rt,debug:St}=tt;if(xe<0||xe>24)return null;const yt=1<<xe,He=Wi(xe,be=be+yt&yt-1,Ce);if(this.tiles[He])return rn(this.tiles[He],rt);St>1&&console.log("drilling down to z%d-%d-%d",xe,be,Ce);let _t,Ut=xe,Et=be,It=Ce;for(;!_t&&Ut>0;)Ut--,Et>>=1,It>>=1,_t=this.tiles[Wi(Ut,Et,It)];return _t&&_t.source?(St>1&&(console.log("found parent tile z%d-%d-%d",Ut,Et,It),console.time("drilling down")),this.splitTile(_t.source,Ut,Et,It,xe,be,Ce),St>1&&console.timeEnd("drilling down"),this.tiles[He]?rn(this.tiles[He],rt):null):null}}function Wi(dt,xe,be){return 32*((1<<dt)*be+xe)+dt}class wi extends F{constructor(xe,be,Ce,tt=Ti){super(xe,be,Ce),this._dataUpdateable=new Map,this._createGeoJSONIndex=tt}loadVectorTile(xe,be){return o._(this,void 0,void 0,(function*(){const Ce=xe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const tt=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);return tt?z(new o.d2(tt.features,{version:2,extent:o.a5})):null}))}loadData(xe){return o._(this,void 0,void 0,(function*(){var be;(be=this._pendingRequest)===null||be===void 0||be.abort();const Ce=this._startPerformance(xe);this._pendingRequest=new AbortController;try{(!this._pendingData||xe.request||xe.data||xe.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(xe,this._pendingRequest));const tt=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(tt,xe),this.loaded={};const rt={};return xe.request&&(rt.data=tt),this._finishPerformance(Ce,xe,rt),rt}catch(tt){if(delete this._pendingRequest,o.Z(tt))return{abandoned:!0};throw tt}}))}_startPerformance(xe){var be;if(!((be=xe?.request)===null||be===void 0)&&be.collectResourceTiming)return new o.c_(xe.request)}_finishPerformance(xe,be,Ce){if(!xe)return;const tt=xe.finish();tt&&(Ce.resourceTiming={},Ce.resourceTiming[be.source]=JSON.parse(JSON.stringify(tt)))}getData(){return o._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(xe){const be=this.loaded;return be&&be[xe.uid]?super.reloadTile(xe):this.loadTile(xe)}loadAndProcessGeoJSON(xe,be){return o._(this,void 0,void 0,(function*(){let Ce;if(xe.request?Ce=yield this.loadGeoJSONFromUrl(xe.request,xe.promoteId,be):xe.data?Ce=this._loadGeoJSONFromObject(xe.data,xe.promoteId):xe.dataDiff&&(Ce=this._loadGeoJSONFromDiff(xe.dataDiff,xe.promoteId,xe.source)),delete this._pendingRequest,typeof Ce!="object")throw new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`);return ie(Ce,!0),xe.filter&&(Ce=this._filterGeoJSON(Ce,xe.filter)),Ce}))}loadGeoJSONFromUrl(xe,be,Ce){return o._(this,void 0,void 0,(function*(){const tt=yield o.j(xe,Ce);return this._dataUpdateable=o.a7(tt.data,be),tt.data}))}_loadGeoJSONFromObject(xe,be){return this._dataUpdateable=o.a7(xe,be),xe}_loadGeoJSONFromDiff(xe,be,Ce){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Ce}`);o.a8(this._dataUpdateable,xe,be);const tt=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(tt)}_filterGeoJSON(xe,be){const Ce=o.d3(be,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ce.result==="error")throw new Error(Ce.value.map((rt=>`${rt.key}: ${rt.message}`)).join(", "));const tt=xe.features.filter((rt=>Ce.value.evaluate({zoom:0},rt)));return this._toFeatureCollection(tt)}_toFeatureCollection(xe){return{type:"FeatureCollection",features:xe}}removeSource(xe){return o._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(xe){return this._geoJSONIndex.getClusterExpansionZoom(xe.clusterId)}getClusterChildren(xe){return this._geoJSONIndex.getChildren(xe.clusterId)}getClusterLeaves(xe){return this._geoJSONIndex.getLeaves(xe.clusterId,xe.limit,xe.offset)}}function Ti(dt,xe){return xe.cluster?new ae((function({superclusterOptions:be,clusterProperties:Ce}){if(!Ce||!be)return be;const tt={},rt={},St={accumulated:null,zoom:0},yt={properties:null},He=Object.keys(Ce);for(const _t of He){const[Ut,Et]=Ce[_t],It=o.d3(Et),ai=o.d3(typeof Ut=="string"?[Ut,["accumulated"],["get",_t]]:Ut);tt[_t]=It.value,rt[_t]=ai.value}return be.map=_t=>{yt.properties=_t;const Ut={};for(const Et of He)Ut[Et]=tt[Et].evaluate(St,yt);return Ut},be.reduce=(_t,Ut)=>{yt.properties=Ut;for(const Et of He)St.accumulated=_t[Et],_t[Et]=rt[Et].evaluate(St,yt)},be})(xe)).load(dt.features):(function(be,Ce){return new ci(be,Ce)})(dt,xe.geojsonVtOptions)}class Di{constructor(xe){this.self=xe,this.actor=new o.L(xe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(be,Ce)=>{if(this.externalWorkerSourceTypes[be])throw new Error(`Worker source with name "${be}" already registered.`);this.externalWorkerSourceTypes[be]=Ce},this.self.addProtocol=o.cJ,this.self.removeProtocol=o.cK,this.self.registerRTLTextPlugin=be=>{o.d4.setMethods(be)},this.actor.registerMessageHandler("LDT",((be,Ce)=>this._getDEMWorkerSource(be,Ce.source).loadTile(Ce))),this.actor.registerMessageHandler("RDT",((be,Ce)=>o._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(be,Ce.source).removeTile(Ce)})))),this.actor.registerMessageHandler("GCEZ",((be,Ce)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(be,Ce.type,Ce.source).getClusterExpansionZoom(Ce)})))),this.actor.registerMessageHandler("GCC",((be,Ce)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(be,Ce.type,Ce.source).getClusterChildren(Ce)})))),this.actor.registerMessageHandler("GCL",((be,Ce)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(be,Ce.type,Ce.source).getClusterLeaves(Ce)})))),this.actor.registerMessageHandler("LD",((be,Ce)=>this._getWorkerSource(be,Ce.type,Ce.source).loadData(Ce))),this.actor.registerMessageHandler("GD",((be,Ce)=>this._getWorkerSource(be,Ce.type,Ce.source).getData())),this.actor.registerMessageHandler("LT",((be,Ce)=>this._getWorkerSource(be,Ce.type,Ce.source).loadTile(Ce))),this.actor.registerMessageHandler("RT",((be,Ce)=>this._getWorkerSource(be,Ce.type,Ce.source).reloadTile(Ce))),this.actor.registerMessageHandler("AT",((be,Ce)=>this._getWorkerSource(be,Ce.type,Ce.source).abortTile(Ce))),this.actor.registerMessageHandler("RMT",((be,Ce)=>this._getWorkerSource(be,Ce.type,Ce.source).removeTile(Ce))),this.actor.registerMessageHandler("RS",((be,Ce)=>o._(this,void 0,void 0,(function*(){if(!this.workerSources[be]||!this.workerSources[be][Ce.type]||!this.workerSources[be][Ce.type][Ce.source])return;const tt=this.workerSources[be][Ce.type][Ce.source];delete this.workerSources[be][Ce.type][Ce.source],tt.removeSource!==void 0&&tt.removeSource(Ce)})))),this.actor.registerMessageHandler("RM",(be=>o._(this,void 0,void 0,(function*(){delete this.layerIndexes[be],delete this.availableImages[be],delete this.workerSources[be],delete this.demWorkerSources[be],this.globalStates.delete(be)})))),this.actor.registerMessageHandler("SR",((be,Ce)=>o._(this,void 0,void 0,(function*(){this.referrer=Ce})))),this.actor.registerMessageHandler("SRPS",((be,Ce)=>this._syncRTLPluginState(be,Ce))),this.actor.registerMessageHandler("IS",((be,Ce)=>o._(this,void 0,void 0,(function*(){this.self.importScripts(Ce)})))),this.actor.registerMessageHandler("SI",((be,Ce)=>this._setImages(be,Ce))),this.actor.registerMessageHandler("UL",((be,Ce)=>o._(this,void 0,void 0,(function*(){this._getLayerIndex(be).update(Ce.layers,Ce.removedIds,this._getGlobalState(be))})))),this.actor.registerMessageHandler("UGS",((be,Ce)=>o._(this,void 0,void 0,(function*(){const tt=this._getGlobalState(be);for(const rt in Ce)tt[rt]=Ce[rt]})))),this.actor.registerMessageHandler("SL",((be,Ce)=>o._(this,void 0,void 0,(function*(){this._getLayerIndex(be).replace(Ce,this._getGlobalState(be))}))))}_getGlobalState(xe){let be=this.globalStates.get(xe);return be||(be={},this.globalStates.set(xe,be)),be}_setImages(xe,be){return o._(this,void 0,void 0,(function*(){this.availableImages[xe]=be;for(const Ce in this.workerSources[xe]){const tt=this.workerSources[xe][Ce];for(const rt in tt)tt[rt].availableImages=be}}))}_syncRTLPluginState(xe,be){return o._(this,void 0,void 0,(function*(){return yield o.d4.syncState(be,this.self.importScripts)}))}_getAvailableImages(xe){let be=this.availableImages[xe];return be||(be=[]),be}_getLayerIndex(xe){let be=this.layerIndexes[xe];return be||(be=this.layerIndexes[xe]=new s),be}_getWorkerSource(xe,be,Ce){if(this.workerSources[xe]||(this.workerSources[xe]={}),this.workerSources[xe][be]||(this.workerSources[xe][be]={}),!this.workerSources[xe][be][Ce]){const tt={sendAsync:(rt,St)=>(rt.targetMapId=xe,this.actor.sendAsync(rt,St))};switch(be){case"vector":this.workerSources[xe][be][Ce]=new F(tt,this._getLayerIndex(xe),this._getAvailableImages(xe));break;case"geojson":this.workerSources[xe][be][Ce]=new wi(tt,this._getLayerIndex(xe),this._getAvailableImages(xe));break;default:this.workerSources[xe][be][Ce]=new this.externalWorkerSourceTypes[be](tt,this._getLayerIndex(xe),this._getAvailableImages(xe))}}return this.workerSources[xe][be][Ce]}_getDEMWorkerSource(xe,be){return this.demWorkerSources[xe]||(this.demWorkerSources[xe]={}),this.demWorkerSources[xe][be]||(this.demWorkerSources[xe][be]=new U),this.demWorkerSources[xe][be]}}return o.i(self)&&(self.worker=new Di(self)),Di})),n("index",["exports","./shared"],(function(o,s){var h="5.15.0";function f(){var I=new s.A(4);return s.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let y,x,S;const E={frame(I,c,p){const v=requestAnimationFrame((P=>{k(),c(P)})),{unsubscribe:k}=s.s(I.signal,"abort",(()=>{k(),cancelAnimationFrame(v),p(new s.a(I.signal.reason))}),!1)},frameAsync(I){return new Promise(((c,p)=>{this.frame(I,c,p)}))},getImageData(I,c=0){return this.getImageCanvasContext(I).getImageData(-c,-c,I.width+2*c,I.height+2*c)},getImageCanvasContext(I){const c=window.document.createElement("canvas"),p=c.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return c.width=I.width,c.height=I.height,p.drawImage(I,0,0,I.width,I.height),p},resolveURL:I=>(y||(y=document.createElement("a")),y.href=I,y.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return S!==void 0?S:!!matchMedia&&(x==null&&(x=matchMedia("(prefers-reduced-motion: reduce)")),x.matches)},set prefersReducedMotion(I){S=I}},z=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(I){this._frozenAt=I}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function D(){return z.getCurrentTime()}class F{static testProp(c){if(!F.docStyle)return c[0];for(let p=0;p<c.length;p++)if(c[p]in F.docStyle)return c[p];return c[0]}static create(c,p,v){const k=window.document.createElement(c);return p!==void 0&&(k.className=p),v&&v.appendChild(k),k}static createNS(c,p){return window.document.createElementNS(c,p)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(c,p){c.style[F.transformProp]=p}static addEventListener(c,p,v,k={}){c.addEventListener(p,v,"passive"in k?k:k.capture)}static removeEventListener(c,p,v,k={}){c.removeEventListener(p,v,"passive"in k?k:k.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",F.suppressClickInternal,!0)}),0)}static getScale(c){const p=c.getBoundingClientRect();return{x:p.width/c.offsetWidth||1,y:p.height/c.offsetHeight||1,boundingClientRect:p}}static getPoint(c,p,v){const k=p.boundingClientRect;return new s.P((v.clientX-k.left)/p.x-c.clientLeft,(v.clientY-k.top)/p.y-c.clientTop)}static mousePos(c,p){const v=F.getScale(c);return F.getPoint(c,v,p)}static touchPos(c,p){const v=[],k=F.getScale(c);for(let P=0;P<p.length;P++)v.push(F.getPoint(c,k,p[P]));return v}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}static sanitize(c){const p=new DOMParser().parseFromString(c,"text/html").body||document.createElement("body"),v=p.querySelectorAll("script");for(const k of v)k.remove();return F.clean(p),p.innerHTML}static isPossiblyDangerous(c,p){const v=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(c)||!v.includes("javascript:")&&!v.includes("data:"))||!!c.startsWith("on")||void 0}static clean(c){const p=c.children;for(const v of p)F.removeAttributes(v),F.clean(v)}static removeAttributes(c){for(const{name:p,value:v}of c.attributes)F.isPossiblyDangerous(p,v)&&c.removeAttribute(p)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);const U={supported:!1,testSupport:function(I){!ee&&Z&&(ie?le(I):G=I)}};let G,Z,ee=!1,ie=!1;function le(I){const c=I.createTexture();I.bindTexture(I.TEXTURE_2D,c);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,Z),I.isContextLost())return;U.supported=!0}catch{}I.deleteTexture(c),ee=!0}var J;typeof document<"u"&&(Z=document.createElement("img"),Z.onload=()=>{G&&le(G),G=null,ie=!0},Z.onerror=()=>{ee=!0,G=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(I){let c,p,v,k;I.resetRequestQueue=()=>{c=[],p=0,v=0,k={}},I.addThrottleControl=Y=>{const Q=v++;return k[Q]=Y,Q},I.removeThrottleControl=Y=>{delete k[Y],N()},I.getImage=(Y,Q,ne=!0)=>new Promise(((he,ue)=>{U.supported&&(Y.headers||(Y.headers={}),Y.headers.accept="image/webp,*/*"),s.e(Y,{type:"image"}),c.push({abortController:Q,requestParameters:Y,supportImageRefresh:ne,state:"queued",onError:_e=>{ue(_e)},onSuccess:_e=>{he(_e)}}),N()}));const P=Y=>s._(this,void 0,void 0,(function*(){Y.state="running";const{requestParameters:Q,supportImageRefresh:ne,onError:he,onSuccess:ue,abortController:_e}=Y,Ee=ne===!1&&!s.i(self)&&!s.g(Q.url)&&(!Q.headers||Object.keys(Q.headers).reduce(((je,et)=>je&&et==="accept"),!0));p++;const Ne=Ee?H(Q,_e):s.m(Q,_e);try{const je=yield Ne;delete Y.abortController,Y.state="completed",je.data instanceof HTMLImageElement||s.b(je.data)?ue(je):je.data&&ue({data:yield(Ue=je.data,typeof createImageBitmap=="function"?s.f(Ue):s.h(Ue)),cacheControl:je.cacheControl,expires:je.expires})}catch(je){delete Y.abortController,he(je)}finally{p--,N()}var Ue})),N=()=>{const Y=(()=>{for(const Q of Object.keys(k))if(k[Q]())return!0;return!1})()?s.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let Q=p;Q<Y&&c.length>0;Q++){const ne=c.shift();ne.abortController.signal.aborted?Q--:P(ne)}},H=(Y,Q)=>new Promise(((ne,he)=>{const ue=new Image,_e=Y.url,Ee=Y.credentials;Ee&&Ee==="include"?ue.crossOrigin="use-credentials":(Ee&&Ee==="same-origin"||!s.d(_e))&&(ue.crossOrigin="anonymous"),Q.signal.addEventListener("abort",(()=>{ue.src="",he(new s.a(Q.signal.reason))})),ue.fetchPriority="high",ue.onload=()=>{ue.onerror=ue.onload=null,ne({data:ue})},ue.onerror=()=>{ue.onerror=ue.onload=null,Q.signal.aborted||he(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ue.src=_e}))})(J||(J={})),J.resetRequestQueue();class re{constructor(c){this._transformRequestFn=c??null}transformRequest(c,p){return this._transformRequestFn&&this._transformRequestFn(c,p)||{url:c}}setTransformRequest(c){this._transformRequestFn=c}}function ae(I){const c=[];if(typeof I=="string")c.push({id:"default",url:I});else if(I&&I.length>0){const p=[];for(const{id:v,url:k}of I){const P=`${v}${k}`;p.indexOf(P)===-1&&(p.push(P),c.push({id:v,url:k}))}}return c}function me(I,c,p){try{const v=new URL(I);return v.pathname+=`${c}${p}`,v.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Te(I){const{userImage:c}=I;return!!(c&&c.render&&c.render())&&(I.data.replace(new Uint8Array(c.data.buffer)),!0)}class ye extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const c of Object.keys(this.images))this.removeImage(c);this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:p,promiseResolve:v}of this.requestors)v(this._getImagesForIds(p));this.requestors=[]}}getImage(c){const p=this.images[c];if(p&&!p.data&&p.spriteData){const v=p.spriteData;p.data=new s.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),p.spriteData=null}return p}addImage(c,p){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,p)&&(this.images[c]=p)}_validate(c,p){let v=!0;const k=p.data||p.spriteData;return this._validateStretch(p.stretchX,k&&k.width)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "stretchX" value`))),v=!1),this._validateStretch(p.stretchY,k&&k.height)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "stretchY" value`))),v=!1),this._validateContent(p.content,p)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "content" value`))),v=!1),v}_validateStretch(c,p){if(!c)return!0;let v=0;for(const k of c){if(k[0]<v||k[1]<k[0]||p<k[1])return!1;v=k[1]}return!0}_validateContent(c,p){if(!c)return!0;if(c.length!==4)return!1;const v=p.spriteData,k=v&&v.width||p.data.width,P=v&&v.height||p.data.height;return!(c[0]<0||k<c[0]||c[1]<0||P<c[1]||c[2]<0||k<c[2]||c[3]<0||P<c[3]||c[2]<c[0]||c[3]<c[1])}updateImage(c,p,v=!0){const k=this.getImage(c);if(v&&(k.data.width!==p.data.width||k.data.height!==p.data.height))throw new Error(`size mismatch between old image (${k.data.width}x${k.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=k.version+1,this.images[c]=p,this.updatedImages[c]=!0}removeImage(c){const p=this.images[c];delete this.images[c],delete this.patterns[c],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c){return new Promise(((p,v)=>{let k=!0;if(!this.isLoaded())for(const P of c)this.images[P]||(k=!1);this.isLoaded()||k?p(this._getImagesForIds(c)):this.requestors.push({ids:c,promiseResolve:p})}))}_getImagesForIds(c){const p={};for(const v of c){let k=this.getImage(v);k||(this.fire(new s.l("styleimagemissing",{id:v})),k=this.getImage(v)),k?p[v]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,textFitWidth:k.textFitWidth,textFitHeight:k.textFitHeight,hasRenderCallback:!!(k.userImage&&k.userImage.render)}:s.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:c,height:p}=this.atlasImage;return{width:c,height:p}}getPattern(c){const p=this.patterns[c],v=this.getImage(c);if(!v)return null;if(p&&p.position.version===v.version)return p.position;if(p)p.position.version=v.version;else{const k={w:v.data.width+2,h:v.data.height+2,x:0,y:0},P=new s.I(k,v);this.patterns[c]={bin:k,position:P}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const p=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(c,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const P in this.patterns)c.push(this.patterns[P].bin);const{w:p,h:v}=s.p(c),k=this.atlasImage;k.resize({width:p||1,height:v||1});for(const P in this.patterns){const{bin:N}=this.patterns[P],H=N.x+1,Y=N.y+1,Q=this.getImage(P).data,ne=Q.width,he=Q.height;s.R.copy(Q,k,{x:0,y:0},{x:H,y:Y},{width:ne,height:he}),s.R.copy(Q,k,{x:0,y:he-1},{x:H,y:Y-1},{width:ne,height:1}),s.R.copy(Q,k,{x:0,y:0},{x:H,y:Y+he},{width:ne,height:1}),s.R.copy(Q,k,{x:ne-1,y:0},{x:H-1,y:Y},{width:1,height:he}),s.R.copy(Q,k,{x:0,y:0},{x:H+ne,y:Y},{width:1,height:he})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const p of c){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const v=this.getImage(p);v||s.w(`Image with ID: "${p}" was not found`),Te(v)&&this.updateImage(p,v)}}cloneImages(){const c={};for(const p in this.images){const v=this.images[p];c[p]=Object.assign(Object.assign({},v),{data:v.data?v.data.clone():null})}return c}}const Re=1e20;function We(I,c,p,v,k,P,N,H,Y){for(let Q=c;Q<c+v;Q++)Le(I,p*P+Q,P,k,N,H,Y);for(let Q=p;Q<p+k;Q++)Le(I,Q*P+c,1,v,N,H,Y)}function Le(I,c,p,v,k,P,N){P[0]=0,N[0]=-Re,N[1]=Re,k[0]=I[c];for(let H=1,Y=0,Q=0;H<v;H++){k[H]=I[c+H*p];const ne=H*H;do{const he=P[Y];Q=(k[H]-k[he]+ne-he*he)/(H-he)/2}while(Q<=N[Y]&&--Y>-1);Y++,P[Y]=H,N[Y]=Q,N[Y+1]=Re}for(let H=0,Y=0;H<v;H++){for(;N[Y+1]<H;)Y++;const Q=P[Y],ne=H-Q;I[c+H*p]=k[Q]+ne*ne}}const ht=s.v.layout_symbol["text-font"].default.join(",");class $e{constructor(c,p,v){this.requestManager=c,this.localIdeographFontFamily=p,this.entries={},this.lang=v}setURL(c){this.url=c}getGlyphs(c){return s._(this,void 0,void 0,(function*(){const p=[];for(const P in c)for(const N of c[P])p.push(this._getAndCacheGlyphsPromise(P,N));const v=yield Promise.all(p),k={};for(const{stack:P,id:N,glyph:H}of v)k[P]||(k[P]={}),k[P][N]=H&&{id:H.id,bitmap:H.bitmap.clone(),metrics:H.metrics};return k}))}_getAndCacheGlyphsPromise(c,p){return s._(this,void 0,void 0,(function*(){let v=this.entries[c];v||(v=this.entries[c]={glyphs:{},requests:{},ranges:{}});let k=v.glyphs[p];return k!==void 0?{stack:c,id:p,glyph:k}:!this.url||this._charUsesLocalIdeographFontFamily(p)?(k=v.glyphs[p]=this._drawGlyph(v,c,p),{stack:c,id:p,glyph:k}):yield this._downloadAndCacheRangePromise(c,p)}))}_downloadAndCacheRangePromise(c,p){return s._(this,void 0,void 0,(function*(){const v=this.entries[c],k=Math.floor(p/256);if(v.ranges[k])return{stack:c,id:p,glyph:null};if(!v.requests[k]){const P=$e.loadGlyphRange(c,k,this.url,this.requestManager);v.requests[k]=P}try{const P=yield v.requests[k];for(const N in P)v.glyphs[+N]=P[+N];return v.ranges[k]=!0,{stack:c,id:p,glyph:P[p]||null}}catch(P){const N=v.glyphs[p]=this._drawGlyph(v,c,p);return this._warnOnMissingGlyphRange(N,k,p,P),{stack:c,id:p,glyph:N}}}))}_warnOnMissingGlyphRange(c,p,v,k){const P=256*p,N=P+255,H=v.toString(16).padStart(4,"0").toUpperCase();s.w(`Unable to load glyph range ${p}, ${P}-${N}. Rendering codepoint U+${H} locally instead. ${k}`)}_charUsesLocalIdeographFontFamily(c){return!!this.localIdeographFontFamily&&s.q(c)}_drawGlyph(c,p,v){const k=p===ht&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(v),P=k?"ideographTinySDF":"tinySDF";c[P]||(c[P]=this._createTinySDF(k?this.localIdeographFontFamily:p));const N=c[P].draw(String.fromCodePoint(v));return{id:v,bitmap:new s.r({width:N.width||60,height:N.height||60},N.data),metrics:{width:N.glyphWidth/2||24,height:N.glyphHeight/2||24,left:N.glyphLeft/2+.5||0,top:N.glyphTop/2-27.5||-8,advance:N.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(c){const p=c?c.split(","):[];p.push("sans-serif");const v=p.map((k=>/[-\w]+/.test(k)?k:`'${CSS.escape(k)}'`)).join(",");return new $e.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:this._fontWeight(p[0]),fontStyle:this._fontStyle(p[0]),lang:this.lang})}_fontStyle(c){return/italic/i.test(c)?"italic":/oblique/i.test(c)?"oblique":"normal"}_fontWeight(c){const p={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let v;for(const[k,P]of Object.entries(p))new RegExp(`\\b${k}\\b`,"i").test(c)&&(v=`${P}`);return v}destroy(){for(const c in this.entries){const p=this.entries[c];p.tinySDF&&(p.tinySDF=null),p.ideographTinySDF&&(p.ideographTinySDF=null),p.glyphs={},p.requests={},p.ranges={}}this.entries={}}}$e.loadGlyphRange=function(I,c,p,v){return s._(this,void 0,void 0,(function*(){const k=256*c,P=k+255,N=v.transformRequest(p.replace("{fontstack}",I).replace("{range}",`${k}-${P}`),"Glyphs"),H=yield s.n(N,new AbortController);if(!H||!H.data)throw new Error(`Could not load glyph range. range: ${c}, ${k}-${P}`);const Y={};for(const Q of s.o(H.data))Y[Q.id]=Q;return Y}))},$e.TinySDF=class{constructor({fontSize:I=24,buffer:c=3,radius:p=8,cutoff:v=.25,fontFamily:k="sans-serif",fontWeight:P="normal",fontStyle:N="normal",lang:H=null}={}){this.buffer=c,this.cutoff=v,this.radius=p,this.lang=H;const Y=this.size=I+4*c,Q=this._createCanvas(Y),ne=this.ctx=Q.getContext("2d",{willReadFrequently:!0});ne.font=`${N} ${P} ${I}px ${k}`,ne.textBaseline="alphabetic",ne.textAlign="left",ne.fillStyle="black",this.gridOuter=new Float64Array(Y*Y),this.gridInner=new Float64Array(Y*Y),this.f=new Float64Array(Y),this.z=new Float64Array(Y+1),this.v=new Uint16Array(Y)}_createCanvas(I){const c=document.createElement("canvas");return c.width=c.height=I,c}draw(I){const{width:c,actualBoundingBoxAscent:p,actualBoundingBoxDescent:v,actualBoundingBoxLeft:k,actualBoundingBoxRight:P}=this.ctx.measureText(I),N=Math.ceil(p),H=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(P-k))),Y=Math.min(this.size-this.buffer,N+Math.ceil(v)),Q=H+2*this.buffer,ne=Y+2*this.buffer,he=Math.max(Q*ne,0),ue=new Uint8ClampedArray(he),_e={data:ue,width:Q,height:ne,glyphWidth:H,glyphHeight:Y,glyphTop:N,glyphLeft:0,glyphAdvance:c};if(H===0||Y===0)return _e;const{ctx:Ee,buffer:Ne,gridInner:Ue,gridOuter:je}=this;this.lang&&(Ee.lang=this.lang),Ee.clearRect(Ne,Ne,H,Y),Ee.fillText(I,Ne,Ne+N);const et=Ee.getImageData(Ne,Ne,H,Y);je.fill(Re,0,he),Ue.fill(0,0,he);for(let lt=0;lt<Y;lt++)for(let Je=0;Je<H;Je++){const st=et.data[4*(lt*H+Je)+3]/255;if(st===0)continue;const ft=(lt+Ne)*Q+Je+Ne;if(st===1)je[ft]=0,Ue[ft]=Re;else{const at=.5-st;je[ft]=at>0?at*at:0,Ue[ft]=at<0?at*at:0}}We(je,0,0,Q,ne,Q,this.f,this.v,this.z),We(Ue,Ne,Ne,H,Y,Q,this.f,this.v,this.z);for(let lt=0;lt<he;lt++){const Je=Math.sqrt(je[lt])-Math.sqrt(Ue[lt]);ue[lt]=Math.round(255-255*(Je/this.radius+this.cutoff))}return _e}};class pt{constructor(){this.specification=s.u.light.position}possiblyEvaluate(c,p){return s.F(c.expression.evaluate(p))}interpolate(c,p,v){return{x:s.G.number(c.x,p.x,v),y:s.G.number(c.y,p.y,v),z:s.G.number(c.z,p.z,v)}}}let Dt;class qe extends s.E{constructor(c){super(),Dt=Dt||new s.t({anchor:new s.D(s.u.light.anchor),position:new pt,color:new s.D(s.u.light.color),intensity:new s.D(s.u.light.intensity)}),this._transitionable=new s.x(Dt,void 0),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,p={}){if(!this._validate(s.y,c,p))for(const v in c){const k=c[v];v.endsWith(s.z)?this._transitionable.setTransition(v.slice(0,-s.z.length),k):this._transitionable.setValue(v,k)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,p,v){return(!v||v.validate!==!1)&&s.B(this,c.call(s.C,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:s.u}))}}const Nt=new s.t({"sky-color":new s.D(s.u.sky["sky-color"]),"horizon-color":new s.D(s.u.sky["horizon-color"]),"fog-color":new s.D(s.u.sky["fog-color"]),"fog-ground-blend":new s.D(s.u.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.u.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.u.sky["atmosphere-blend"])});class ni extends s.E{constructor(c){super(),this._transitionable=new s.x(Nt,void 0),this.setSky(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0))}setSky(c,p={}){if(!this._validate(s.J,c,p)){c||(c={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const v in c){const k=c[v];v.endsWith(s.z)?this._transitionable.setTransition(v.slice(0,-s.z.length),k):this._transitionable.setValue(v,k)}}}getSky(){return this._transitionable.serialize()}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,p,v={}){return v?.validate!==!1&&s.B(this,c.call(s.C,s.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:s.u})))}calculateFogBlendOpacity(c){return c<60?0:c<70?(c-60)/10:1}}class xi{constructor(c,p){this.width=c,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,p){const v=c.join(",")+String(p);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(c,p)),this.dashEntry[v]}getDashRanges(c,p,v){const k=[];let P=c.length%2==1?-c[c.length-1]*v:0,N=c[0]*v,H=!0;k.push({left:P,right:N,isDash:H,zeroLength:c[0]===0});let Y=c[0];for(let Q=1;Q<c.length;Q++){H=!H;const ne=c[Q];P=Y*v,Y+=ne,N=Y*v,k.push({left:P,right:N,isDash:H,zeroLength:ne===0})}return k}addRoundDash(c,p,v){const k=p/2;for(let P=-v;P<=v;P++){const N=this.width*(this.nextRow+v+P);let H=0,Y=c[H];for(let Q=0;Q<this.width;Q++){Q/Y.right>1&&(Y=c[++H]);const ne=Math.abs(Q-Y.left),he=Math.abs(Q-Y.right),ue=Math.min(ne,he);let _e;const Ee=P/v*(k+1);if(Y.isDash){const Ne=k-Math.abs(Ee);_e=Math.sqrt(ue*ue+Ne*Ne)}else _e=k-Math.sqrt(ue*ue+Ee*Ee);this.data[N+Q]=Math.max(0,Math.min(255,_e+128))}}}addRegularDash(c){for(let H=c.length-1;H>=0;--H){const Y=c[H],Q=c[H+1];Y.zeroLength?c.splice(H,1):Q&&Q.isDash===Y.isDash&&(Q.left=Y.left,c.splice(H,1))}const p=c[0],v=c[c.length-1];p.isDash===v.isDash&&(p.left=v.left-this.width,v.right=p.right+this.width);const k=this.width*this.nextRow;let P=0,N=c[P];for(let H=0;H<this.width;H++){H/N.right>1&&(N=c[++P]);const Y=Math.abs(H-N.left),Q=Math.abs(H-N.right),ne=Math.min(Y,Q);this.data[k+H]=Math.max(0,Math.min(255,(N.isDash?ne:-ne)+128))}}addDash(c,p){const v=p?7:0,k=2*v+1;if(this.nextRow+k>this.height)return s.w("LineAtlas out of space"),null;let P=0;for(let H=0;H<c.length;H++)P+=c[H];if(P!==0){const H=this.width/P,Y=this.getDashRanges(c,this.width,H);p?this.addRoundDash(Y,H,v):this.addRegularDash(Y)}const N={y:this.nextRow+v,height:2*v,width:P};return this.nextRow+=k,this.dirty=!0,N}bind(c){const p=c.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const Lt="maplibre_preloaded_worker_pool";class Tt{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<Tt.workerCount;)this.workers.push(new Worker(s.c.WORKER_URL));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach((p=>{p.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Lt]}numActive(){return Object.keys(this.active).length}}const wt=Math.floor(E.hardwareConcurrency/2);let mi,bi;function Zi(){return mi||(mi=new Tt),mi}Tt.workerCount=s.K(globalThis)?Math.max(Math.min(wt,3),1):1;class Li{constructor(c,p){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=p;const v=this.workerPool.acquire(p);for(let k=0;k<v.length;k++){const P=new s.L(v[k],p);P.name=`Worker ${k}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,p){const v=[];for(const k of this.actors)v.push(k.sendAsync({type:c,data:p}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(c=!0){this.actors.forEach((p=>{p.remove()})),this.actors=[],c&&this.workerPool.release(this.id)}registerMessageHandler(c,p){for(const v of this.actors)v.registerMessageHandler(c,p)}unregisterMessageHandler(c){for(const p of this.actors)p.unregisterMessageHandler(c)}}function si(){return bi||(bi=new Li(Zi(),s.M),bi.registerMessageHandler("GR",((I,c,p)=>s.m(c,p)))),bi}function fn(I,c){const p=s.N();return s.O(p,p,[1,1,0]),s.Q(p,p,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?s.S(p,p,I.calculatePosMatrix(c.toUnwrapped())):p}function Ii(I,c,p,v,k,P,N){var H;const Y=(function(ue,_e,Ee){if(ue)for(const Ne of ue){const Ue=_e[Ne];if(Ue&&Ue.source===Ee&&Ue.type==="fill-extrusion")return!0}else for(const Ne in _e){const Ue=_e[Ne];if(Ue.source===Ee&&Ue.type==="fill-extrusion")return!0}return!1})((H=k?.layers)!==null&&H!==void 0?H:null,c,I.id),Q=P.maxPitchScaleFactor(),ne=I.tilesIn(v,Q,Y);ne.sort(Qi);const he=[];for(const ue of ne)he.push({wrappedTileID:ue.tileID.wrapped().key,queryResults:ue.tile.queryRenderedFeatures(c,p,I.getState(),ue.queryGeometry,ue.cameraQueryGeometry,ue.scale,k,P,Q,fn(P,ue.tileID),N?(_e,Ee)=>N(ue.tileID,_e,Ee):void 0)});return(function(ue,_e){for(const Ee in ue)for(const Ne of ue[Ee])rn(Ne,_e);return ue})((function(ue){const _e={},Ee={};for(const Ne of ue){const Ue=Ne.queryResults,je=Ne.wrappedTileID,et=Ee[je]=Ee[je]||{};for(const lt in Ue){const Je=Ue[lt],st=et[lt]=et[lt]||{},ft=_e[lt]=_e[lt]||[];for(const at of Je)st[at.featureIndex]||(st[at.featureIndex]=!0,ft.push(at))}}return _e})(he),I)}function Qi(I,c){const p=I.tileID,v=c.tileID;return p.overscaledZ-v.overscaledZ||p.canonical.y-v.canonical.y||p.wrap-v.wrap||p.canonical.x-v.canonical.x}function rn(I,c){const p=I.feature,v=c.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=v}function xn(I,c,p){return s._(this,void 0,void 0,(function*(){let v=I;if(I.url?v=(yield s.j(c.transformRequest(I.url,"Source"),p)).data:yield E.frameAsync(p),!v)return null;const k=s.U(s.e(v,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(k.vectorLayerIds=v.vector_layers.map((P=>P.id))),k}))}class Ye{constructor(c,p){c&&(p?this.setSouthWest(c).setNorthEast(p):Array.isArray(c)&&(c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1])))}setNorthEast(c){return this._ne=c instanceof s.V?new s.V(c.lng,c.lat):s.V.convert(c),this}setSouthWest(c){return this._sw=c instanceof s.V?new s.V(c.lng,c.lat):s.V.convert(c),this}extend(c){const p=this._sw,v=this._ne;let k,P;if(c instanceof s.V)k=c,P=c;else{if(!(c instanceof Ye))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(Ye.convert(c)):this.extend(s.V.convert(c)):c&&("lng"in c||"lon"in c)&&"lat"in c?this.extend(s.V.convert(c)):this;if(k=c._sw,P=c._ne,!k||!P)return this}return p||v?(p.lng=Math.min(k.lng,p.lng),p.lat=Math.min(k.lat,p.lat),v.lng=Math.max(P.lng,v.lng),v.lat=Math.max(P.lat,v.lat)):(this._sw=new s.V(k.lng,k.lat),this._ne=new s.V(P.lng,P.lat)),this}getCenter(){return new s.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.V(this.getWest(),this.getNorth())}getSouthEast(){return new s.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:p,lat:v}=s.V.convert(c);let k=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&k}intersects(c){if(!((c=Ye.convert(c)).getNorth()>=this.getSouth()&&c.getSouth()<=this.getNorth()))return!1;const p=Math.abs(this.getEast()-this.getWest()),v=Math.abs(c.getEast()-c.getWest());if(p>=360||v>=360)return!0;const k=s.W(this.getWest(),-180,180),P=s.W(this.getEast(),-180,180),N=s.W(c.getWest(),-180,180),H=s.W(c.getEast(),-180,180),Y=k>=P,Q=N>=H;return!(!Y||!Q)||(Y?H>=k||N<=P:Q?P>=N||k<=H:N<=P&&H>=k)}static convert(c){return c instanceof Ye?c:c&&new Ye(c)}static fromLngLat(c,p=0){const v=360*p/40075017,k=v/Math.cos(Math.PI/180*c.lat);return new Ye(new s.V(c.lng-k,c.lat-v),new s.V(c.lng+k,c.lat+v))}adjustAntiMeridian(){const c=new s.V(this._sw.lng,this._sw.lat),p=new s.V(this._ne.lng,this._ne.lat);return new Ye(c,c.lng>p.lng?new s.V(p.lng+360,p.lat):p)}}class qt{constructor(c,p,v){this.bounds=Ye.convert(this.validateBounds(c)),this.minzoom=p||0,this.maxzoom=v||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const p=Math.pow(2,c.z),v=Math.floor(s.Y(this.bounds.getWest())*p),k=Math.floor(s.X(this.bounds.getNorth())*p),P=Math.ceil(s.Y(this.bounds.getEast())*p),N=Math.ceil(s.X(this.bounds.getSouth())*p);return c.x>=v&&c.x<P&&c.y>=k&&c.y<N}}class li extends s.E{constructor(c,p,v,k){if(super(),this.id=c,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.U(p,["url","scheme","tileSize","promoteId","encoding"])),this._options=s.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield xn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),c&&(s.e(this,c),c.bounds&&(this.tileBounds=new qt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,s.Z(c)||this.fire(new s.k(c))}}))}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.abort(),c(),this.load()}setTiles(c){return this.setSourceProperty((()=>{this._options.tiles=c})),this}setUrl(c){return this.setSourceProperty((()=>{this.url=c,this._options.url=c})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(c){return s._(this,void 0,void 0,(function*(){const p=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(p,"Tile"),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(c)};v.request.collectResourceTiming=this._collectResourceTiming;let k="RT";if(c.actor&&c.state!=="expired"){if(c.state==="loading")return new Promise(((P,N)=>{c.reloadPromise={resolve:P,reject:N}}))}else c.actor=this.dispatcher.getActor(),k="LT";c.abortController=new AbortController;try{const P=yield c.actor.sendAsync({type:k,data:v},c.abortController);if(delete c.abortController,c.aborted)return;this._afterTileLoadWorkerResponse(c,P)}catch(P){if(delete c.abortController,c.aborted)return;if(P&&P.status!==404)throw P;this._afterTileLoadWorkerResponse(c,null)}}))}_getOverzoomParameters(c){if(c.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const p=c.tileID.scaledTo(this.maxzoom).canonical,v=p.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:p,overzoomRequest:this.map._requestManager.transformRequest(v,"Tile")}}_afterTileLoadWorkerResponse(c,p){if(p&&p.resourceTiming&&(c.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&c.setExpiryData(p),c.loadVectorData(p,this.map.painter),c.reloadPromise){const v=c.reloadPromise;c.reloadPromise=null,this.loadTile(c).then(v.resolve).catch(v.reject)}}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.actor&&(yield c.actor.sendAsync({type:"AT",data:{uid:c.uid,type:this.type,source:this.id}}))}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.unloadVectorData(),c.actor&&(yield c.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Fi extends s.E{constructor(c,p,v,k){super(),this.id=c,this.dispatcher=v,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},p),s.e(this,s.U(p,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,(function*(c=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield xn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(s.e(this,p),p.bounds&&(this.tileBounds=new qt(p.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:c})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,s.Z(p)||this.fire(new s.k(p))}}))}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(c){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),c(),this.load(!0)}setTiles(c){return this.setSourceProperty((()=>{this._options.tiles=c})),this}setUrl(c){return this.setSourceProperty((()=>{this.url=c,this._options.url=c})),this}serialize(){return s.e({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c){return s._(this,void 0,void 0,(function*(){const p=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.abortController=new AbortController;try{const v=yield J.getImage(this.map._requestManager.transformRequest(p,"Tile"),c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&c.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const k=this.map.painter.context,P=k.gl,N=v.data;c.texture=this.map.painter.getTileTexture(N.width),c.texture?c.texture.update(N,{useMipmap:!0}):(c.texture=new s.T(k,N,P.RGBA,{useMipmap:!0}),c.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST)),c.state="loaded"}}catch(v){if(delete c.abortController,c.aborted)c.state="unloaded";else if(v)throw c.state="errored",v}}))}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController)}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.texture&&this.map.painter.saveTileTexture(c.texture)}))}hasTransition(){return!1}}class ci extends Fi{constructor(c,p,v,k){super(c,p,v,k),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(c){return s._(this,void 0,void 0,(function*(){const p=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(p,"Tile");c.neighboringTiles=this._getNeighboringTiles(c.tileID),c.abortController=new AbortController;try{const k=yield J.getImage(v,c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(k&&k.data){const P=k.data;this.map._refreshExpiredTiles&&(k.cacheControl||k.expires)&&c.setExpiryData({cacheControl:k.cacheControl,expires:k.expires});const N=s.b(P)&&s.$()?P:yield this.readImageNow(P),H={type:this.type,uid:c.uid,source:this.id,rawImageData:N,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!c.actor||c.state==="expired"){c.actor=this.dispatcher.getActor();const Y=yield c.actor.sendAsync({type:"LDT",data:H});c.dem=Y,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded"}}}catch(k){if(delete c.abortController,c.aborted)c.state="unloaded";else if(k)throw c.state="errored",k}}))}readImageNow(c){return s._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&s.a0()){const p=c.width+2,v=c.height+2;try{return new s.R({width:p,height:v},yield s.a1(c,-1,-1,p,v))}catch{}}return E.getImageData(c,1)}))}_getNeighboringTiles(c){const p=c.canonical,v=Math.pow(2,p.z),k=(p.x-1+v)%v,P=p.x===0?c.wrap-1:c.wrap,N=(p.x+1+v)%v,H=p.x+1===v?c.wrap+1:c.wrap,Y={};return Y[new s.a2(c.overscaledZ,P,p.z,k,p.y).key]={backfilled:!1},Y[new s.a2(c.overscaledZ,H,p.z,N,p.y).key]={backfilled:!1},p.y>0&&(Y[new s.a2(c.overscaledZ,P,p.z,k,p.y-1).key]={backfilled:!1},Y[new s.a2(c.overscaledZ,c.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},Y[new s.a2(c.overscaledZ,H,p.z,N,p.y-1).key]={backfilled:!1}),p.y+1<v&&(Y[new s.a2(c.overscaledZ,P,p.z,k,p.y+1).key]={backfilled:!1},Y[new s.a2(c.overscaledZ,c.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},Y[new s.a2(c.overscaledZ,H,p.z,N,p.y+1).key]={backfilled:!1}),Y}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&(yield c.actor.sendAsync({type:"RDT",data:{type:this.type,uid:c.uid,source:this.id}}))}))}}function Wi(I){return I.type==="GeometryCollection"?I.geometries.map((c=>c.coordinates)).flat(1/0):I.coordinates.flat(1/0)}function wi(I){const c=new Ye;let p;switch(I.type){case"FeatureCollection":p=I.features.map((v=>Wi(v.geometry))).flat(1/0);break;case"Feature":p=Wi(I.geometry);break;default:p=Wi(I)}if(p.length==0)return c;for(let v=0;v<p.length-1;v+=2)c.extend([p[v],p[v+1]]);return c}class Ti extends s.E{constructor(c,p,v,k){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=v.getActor(),this.setEventedParent(k),this._data=typeof p.data=="string"?{url:p.data}:{geojson:p.data},this._options=s.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:s.a5,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:s.a5,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(c){return c*(s.a5/this.tileSize)}_getClusterMaxZoom(c){const p=c?Math.round(c):this.maxzoom-1;return Number.isInteger(c)||c===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${c}" rounded to "${p}"`),p}load(){return s._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(c){this.map=c,this.load()}setData(c,p){this._data=typeof c=="string"?{url:c}:{geojson:c},this._pendingWorkerUpdate={data:c};const v=this._updateWorkerData();return p?v:this}updateData(c,p){this._pendingWorkerUpdate.diff=s.a6(this._pendingWorkerUpdate.diff,c);const v=this._updateWorkerData();return p?v:this}getData(){return s._(this,void 0,void 0,(function*(){const c=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:c})}))}getBounds(){return s._(this,void 0,void 0,(function*(){return wi(yield this.getData())}))}setClusterOptions(c){return this.workerOptions.cluster=c.cluster,c.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(c.clusterRadius)),c.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(c.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(c){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:c,source:this.id}})}getClusterChildren(c){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:c,source:this.id}})}getClusterLeaves(c,p,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:c,limit:p,offset:v}})}_updateWorkerData(){return s._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void s.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:c,diff:p}=this._pendingWorkerUpdate,v=s.e({type:this.type},this.workerOptions);c!==void 0?(typeof c=="string"?(v.request=this.map._requestManager.transformRequest(E.resolveURL(c),"Source"),v.request.collectResourceTiming=this._collectResourceTiming):v.data=c,this._pendingWorkerUpdate.data=void 0):p&&(v.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const k=yield this.actor.sendAsync({type:"LD",data:v});if(this._isUpdatingWorker=!1,this._removed||k.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));k.data&&(this._data={geojson:k.data});const P=this._applyDiffToSource(p),N=this._getShouldReloadTileOptions(P);let H=null;k.resourceTiming&&k.resourceTiming[this.id]&&(H=k.resourceTiming[this.id].slice(0));const Y={dataType:"source"};this._collectResourceTiming&&H&&H.length>0&&s.e(Y,{resourceTiming:H}),this.fire(new s.l("data",Object.assign(Object.assign({},Y),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},Y),{sourceDataType:"content",shouldReloadTileOptions:N})))}catch(k){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(k))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(c){if(!c)return;const p=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const k=s.a7(this._data.geojson,p);if(!k)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:k}}if(!this._data.updateable)return;const v=s.a8(this._data.updateable,c,p);return c.removeAll||this._options.cluster?void 0:v}_getShouldReloadTileOptions(c){if(c)return{affectedBounds:c.filter(Boolean).map((p=>wi(p)))}}shouldReloadTile(c,{affectedBounds:p}){if(c.state==="loading")return!0;if(c.state==="unloaded")return!1;const{buffer:v,extent:k}=this.workerOptions.geojsonVtOptions,P=(function({x:N,y:H,z:Y},Q=0){const ne=s.a3((N-Q)/Math.pow(2,Y)),he=s.a4((H+1+Q)/Math.pow(2,Y)),ue=s.a3((N+1+Q)/Math.pow(2,Y)),_e=s.a4((H-Q)/Math.pow(2,Y));return new Ye([ne,he],[ue,_e])})(c.tileID.canonical,v/k);for(const N of p)if(P.intersects(N))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(c){return s._(this,void 0,void 0,(function*(){const p=c.actor?"RT":"LT";c.actor=this.actor;const v={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};c.abortController=new AbortController;const k=yield this.actor.sendAsync({type:p,data:v},c.abortController);delete c.abortController,c.unloadVectorData(),c.aborted||c.loadVectorData(k,this.map.painter,p==="RT")}))}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.aborted=!0}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Di extends s.E{constructor(c,p,v,k){super(),this.flippedWindingOrder=!1,this.id=c,this.dispatcher=v,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=p}load(c){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield J.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,c&&(this.coordinates=c),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,s.Z(p)||this.fire(new s.k(p))}}))}loaded(){return this._loaded}updateImage(c){return c.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=c.url,this.load(c.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(c){this.coordinates=c;const p=c.map(s.a9.fromLngLat);var v;return this.tileID=(function(k){const P=s.aa.fromPoints(k),N=P.width(),H=P.height(),Y=Math.max(N,H),Q=Math.max(0,Math.floor(-Math.log(Y)/Math.LN2)),ne=Math.pow(2,Q);return new s.ac(Q,Math.floor((P.minX+P.maxX)/2*ne),Math.floor((P.minY+P.maxY)/2*ne))})(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map((k=>this.tileID.getTilePoint(k)._round())),this.flippedWindingOrder=((v=this.tileCoords)[1].x-v[0].x)*(v[2].y-v[0].y)-(v[1].y-v[0].y)*(v[2].x-v[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,p=c.gl;this.texture||(this.texture=new s.T(c,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let v=!1;for(const k in this.tiles){const P=this.tiles[k];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,v=!0)}v&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(c){return s._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={}):c.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(c){const{minX:p,minY:v,maxX:k,maxY:P}=s.aa.fromPoints(c),N={};for(let H=0;H<=s.ab;H++){const Y=Math.pow(2,H),Q=Math.floor(p*Y),ne=Math.floor(v*Y),he=Math.floor(k*Y),ue=Math.floor(P*Y);N[H]={minTileX:Q,minTileY:ne,maxTileX:he,maxTileY:ue}}return N}}class dt extends Di{constructor(c,p,v,k){super(c,p,v,k),this.roundZoom=!0,this.type="video",this.options=p}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1;const c=this.options;this.urls=[];for(const p of c.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield s.ad(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new s.k(p))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const p=this.video.seekable;c<p.start(0)||c>p.end(0)?this.fire(new s.k(new s.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const c=this.map.painter.context,p=c.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(c,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let v=!1;for(const k in this.tiles){const P=this.tiles[k];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,v=!0)}v&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xe extends Di{constructor(c,p,v,k){super(c,p,v,k),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some((P=>!Array.isArray(P)||P.length!==2||P.some((N=>typeof N!="number"))))||this.fire(new s.k(new s.ae(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.ae(`sources.${c}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new s.k(new s.ae(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.ae(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.ae(`sources.${c}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,v=p.gl;this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new s.T(p,this.canvas,v.RGBA,{premultiply:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE));let k=!1;for(const P in this.tiles){const N=this.tiles[P];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,k=!0)}k&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const be={},Ce=I=>{switch(I){case"geojson":return Ti;case"image":return Di;case"raster":return Fi;case"raster-dem":return ci;case"vector":return li;case"video":return dt;case"canvas":return xe}return be[I]},tt="RTLPluginLoaded";class rt extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=si()}_syncState(c){return this.status=c,this.dispatcher.broadcast("SRPS",{pluginStatus:c,pluginURL:this.url}).catch((p=>{throw this.status="error",p}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(c){return s._(this,arguments,void 0,(function*(p,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=E.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return s._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(tt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let St=null;function yt(){return St||(St=new rt),St}var He,_t;(function(I){I[I.Base=0]="Base",I[I.Parent=1]="Parent"})(He||(He={})),(function(I){I[I.Departing=0]="Departing",I[I.Incoming=1]="Incoming"})(_t||(_t={}));class Ut{constructor(c,p){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=c,this.uid=s.af(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(c){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(c||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:c,fadingDirection:p,fadingParentID:v,fadeEndTime:k}){this.resetFadeLogic(),this.fadingRole=c,this.fadingDirection=p,this.fadingParentID=v,this.fadeEndTime=k}setSelfFadeLogic(c){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=c}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=D(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(c,p,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData,this.latestFeatureIndex.encoding=c.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=(function(k,P){const N={};if(!P)return N;for(const H of k){const Y=H.layerIds.map((Q=>P.getLayer(Q))).filter(Boolean);if(Y.length!==0){H.layers=Y,H.stateDependentLayerIds&&(H.stateDependentLayers=H.stateDependentLayerIds.map((Q=>Y.filter((ne=>ne.id===Q))[0])));for(const Q of Y)N[Q.id]=H}}return N})(c.buckets,p?.style),this.hasSymbolBuckets=!1;for(const k in this.buckets){const P=this.buckets[k];if(P instanceof s.ah){if(this.hasSymbolBuckets=!0,!v)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const k in this.buckets){const P=this.buckets[k];if(P instanceof s.ah&&P.hasRTLText){this.hasRTLText=!0,yt().lazyLoad();break}}this.queryPadding=0;for(const k in this.buckets){const P=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(k).queryRadius(P))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage),this.dashPositions=c.dashPositions}else this.collisionBoxArray=new s.ag}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const v in this.buckets){const k=this.buckets[v];k.uploadPending()&&k.upload(c)}const p=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(c,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(c,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,p,v,k,P,N,H,Y,Q,ne,he){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:k,cameraQueryGeometry:P,scale:N,tileSize:this.tileSize,pixelPosMatrix:ne,transform:Y,params:H,queryPadding:this.queryPadding*Q,getElevation:he},c,p,v):{}}querySourceFeatures(c,p){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const k=v.loadVTLayers(),P=p&&p.sourceLayer?p.sourceLayer:"",N=k[s.ai]||k[P];if(!N)return;const H=s.aj(p?.filter,p?.globalState),{z:Y,x:Q,y:ne}=this.tileID.canonical,he={z:Y,x:Q,y:ne};for(let ue=0;ue<N.length;ue++){const _e=N.feature(ue);if(H.needGeometry){const Ue=s.ak(_e,!0);if(!H.filter(new s.H(this.tileID.overscaledZ),Ue,this.tileID.canonical))continue}else if(!H.filter(new s.H(this.tileID.overscaledZ),_e))continue;const Ee=v.getId(_e,P),Ne=new s.al(_e,Y,Q,ne,Ee);Ne.tile=he,c.push(Ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const p=this.expirationTime;if(c.cacheControl){const v=s.am(c.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const v=Date.now();let k=!1;if(this.expirationTime>v)k=!1;else if(p)if(this.expirationTime<p)k=!0;else{const P=this.expirationTime-p;P?this.expirationTime=v+Math.max(P,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const k in this.buckets){if(!p.style.hasLayer(k))continue;const P=this.buckets[k],N=P.layers[0].sourceLayer||s.ai,H=v[N],Y=c[N];if(!H||!Y||Object.keys(Y).length===0)continue;P.update(Y,H,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const Q=p&&p.style&&p.style.getLayer(k);Q&&(this.queryPadding=Math.max(this.queryPadding,Q.queryRadius(P)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(c){this.symbolFadeHoldUntil=D()+c}setDependencies(c,p){const v={};for(const k of p)v[k]=!0;this.dependencies[c]=v}hasDependency(c,p){for(const v of c){const k=this.dependencies[v];if(k){for(const P of p)if(k[P])return!0}}return!1}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,p,v){const k=String(p);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][k]=this.stateChanges[c][k]||{},s.e(this.stateChanges[c][k],v),this.deletedStates[c]===null){this.deletedStates[c]={};for(const P in this.state[c])P!==k&&(this.deletedStates[c][P]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][k]===null){this.deletedStates[c][k]={};for(const P in this.state[c][k])v[P]||(this.deletedStates[c][k][P]=null)}else for(const P in v)this.deletedStates[c]&&this.deletedStates[c][k]&&this.deletedStates[c][k][P]===null&&delete this.deletedStates[c][k][P]}removeFeatureState(c,p,v){if(this.deletedStates[c]===null)return;const k=String(p);if(this.deletedStates[c]=this.deletedStates[c]||{},v&&p!==void 0)this.deletedStates[c][k]!==null&&(this.deletedStates[c][k]=this.deletedStates[c][k]||{},this.deletedStates[c][k][v]=null);else if(p!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][k])for(v in this.deletedStates[c][k]={},this.stateChanges[c][k])this.deletedStates[c][k][v]=null;else this.deletedStates[c][k]=null;else this.deletedStates[c]=null}getState(c,p){const v=String(p),k=s.e({},(this.state[c]||{})[v],(this.stateChanges[c]||{})[v]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const P=this.deletedStates[c][p];if(P===null)return{};for(const N in P)delete k[N]}return k}initializeTileState(c,p){c.setFeatureState(this.state,p)}coalesceChanges(c,p){const v={};for(const k in this.stateChanges){this.state[k]=this.state[k]||{};const P={};for(const N in this.stateChanges[k])this.state[k][N]||(this.state[k][N]={}),s.e(this.state[k][N],this.stateChanges[k][N]),P[N]=this.state[k][N];v[k]=P}for(const k in this.deletedStates){this.state[k]=this.state[k]||{};const P={};if(this.deletedStates[k]===null)for(const N in this.state[k])P[N]={},this.state[k][N]={};else for(const N in this.deletedStates[k]){if(this.deletedStates[k][N]===null)this.state[k][N]={};else for(const H of Object.keys(this.deletedStates[k][N]))delete this.state[k][N][H];P[N]=this.state[k][N]}v[k]=v[k]||{},s.e(v[k],P)}this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0&&c.setFeatureState(v,p)}}const It=89.25;function ai(I,c){const p=s.an(c.lat,-s.ao,s.ao);return new s.P(s.Y(c.lng)*I,s.X(p)*I)}function Si(I,c){return new s.a9(c.x/I,c.y/I).toLngLat()}function Ai(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(s.ap(90-I.pitch)),Math.tan(s.ap(It-I.pitch)))}function Mn(I,c){const p=I.canonical,v=c/s.aq(p.z),k=p.x+Math.pow(2,p.z)*I.wrap,P=s.ar(new Float64Array(16));return s.O(P,P,[k*v,p.y*v,0]),s.Q(P,P,[v/s.a5,v/s.a5,1]),P}function Mt(I,c,p,v,k){const P=s.a9.fromLngLat(I,c),N=k*s.as(1,I.lat),{x:H,y:Y,z:Q}=Dn(p,v);return new s.a9(P.x+N*-H,P.y+N*-Y,P.z+N*-Q)}function Dn(I,c){const p=s.ap(I),v=s.ap(c),k=Math.cos(-p),P=Math.sin(p);return{x:P*Math.sin(v),y:-P*Math.cos(v),z:k}}function Yn(I,c,p){const v=c.intersectsFrustum(I);if(!p||v===0)return v;const k=c.intersectsPlane(p);return k===0?0:v===2&&k===2?2:1}function _n(I,c,p){let v=0;const k=(p-c)/10;for(let P=0;P<10;P++)v+=k*Math.pow(Math.cos(c+(P+.5)/10*(p-c)),I);return v}function pn(I,c){return function(p,v,k,P,N){const H=2*((I-1)/s.at(Math.cos(s.ap(It-N))/Math.cos(s.ap(It)))-1),Y=Math.acos(k/P),Q=2*_n(H-1,0,s.ap(N/2)),ne=Math.min(s.ap(It),Y+s.ap(N/2)),he=_n(H-1,Math.min(ne,Y-s.ap(N/2)),ne),ue=Math.atan(v/k),_e=Math.hypot(v,k);let Ee=p;return Ee+=s.at(P/_e/Math.max(.5,Math.cos(s.ap(N/2)))),Ee+=H*s.at(Math.cos(ue))/2,Ee-=s.at(Math.max(1,he/Q/c))/2,Ee}}const Bi=pn(9.314,3);function Oi(I,c){const p=(c.roundZoom?Math.round:Math.floor)(I.zoom+s.at(I.tileSize/c.tileSize));return Math.max(0,p)}function mn(I,c){const p=I.getCameraFrustum(),v=I.getClippingPlane(),k=I.screenPointToMercatorCoordinate(I.getCameraPoint()),P=s.a9.fromLngLat(I.center,I.elevation);k.z=P.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const N=I.getCoveringTilesDetailsProvider(),H=N.allowVariableZoom(I,c),Y=Oi(I,c),Q=c.minzoom||0,ne=c.maxzoom!==void 0?c.maxzoom:I.maxZoom,he=Math.min(Math.max(0,Y),ne),ue=Math.pow(2,he),_e=[ue*k.x,ue*k.y,0],Ee=[ue*P.x,ue*P.y,0],Ne=Math.hypot(P.x-k.x,P.y-k.y),Ue=Math.abs(P.z-k.z),je=Math.hypot(Ne,Ue),et=st=>({zoom:0,x:0,y:0,wrap:st,fullyVisible:!1}),lt=[],Je=[];if(I.renderWorldCopies&&N.allowWorldCopies())for(let st=1;st<=3;st++)lt.push(et(-st)),lt.push(et(st));for(lt.push(et(0));lt.length>0;){const st=lt.pop(),ft=st.x,at=st.y;let kt=st.fullyVisible;const Yt={x:ft,y:at,z:st.zoom},Ft=N.getTileBoundingVolume(Yt,st.wrap,I.elevation,c);if(!kt){const Pi=Yn(p,Ft,v);if(Pi===0)continue;kt=Pi===2}const jt=N.distanceToTile2d(k.x,k.y,Yt,Ft);let Vt=Y;H&&(Vt=(c.calculateTileZoom||Bi)(I.zoom+s.at(I.tileSize/c.tileSize),jt,Ue,je,I.fov)),Vt=(c.roundZoom?Math.round:Math.floor)(Vt),Vt=Math.max(0,Vt);const Mi=Math.min(Vt,ne);if(st.wrap=N.getWrap(P,Yt,st.wrap),st.zoom>=Mi){if(st.zoom<Q)continue;const Pi=he-st.zoom,fi=_e[0]-.5-(ft<<Pi),ji=_e[1]-.5-(at<<Pi),la=c.reparseOverscaled?Math.max(st.zoom,Vt):st.zoom;Je.push({tileID:new s.a2(st.zoom===ne?la:st.zoom,st.wrap,st.zoom,ft,at),distanceSq:s.au([Ee[0]-.5-ft,Ee[1]-.5-at]),tileDistanceToCamera:Math.sqrt(fi*fi+ji*ji)})}else for(let Pi=0;Pi<4;Pi++)lt.push({zoom:st.zoom+1,x:(ft<<1)+Pi%2,y:(at<<1)+(Pi>>1),wrap:st.wrap,fullyVisible:kt})}return Je.sort(((st,ft)=>st.distanceSq-ft.distanceSq)).map((st=>st.tileID))}const hi=s.aa.fromPoints([new s.P(0,0),new s.P(s.a5,s.a5)]);function Xi(I){return I==="raster"||I==="image"||I==="video"}function sn(I,c,p,v,k,P,N){if(!c.hasData())return!1;const{tileID:H,fadingRole:Y,fadingDirection:Q,fadingParentID:ne}=c;if(Y===He.Base&&Q===_t.Incoming&&ne)return p[ne.key]=ne,!0;const he=Math.max(H.overscaledZ-k,P);for(let ue=H.overscaledZ-1;ue>=he;ue--){const _e=H.scaledTo(ue),Ee=I.getLoadedTile(_e);if(Ee)return c.setCrossFadeLogic({fadingRole:He.Base,fadingDirection:_t.Incoming,fadingParentID:Ee.tileID,fadeEndTime:v+N}),Ee.setCrossFadeLogic({fadingRole:He.Parent,fadingDirection:_t.Departing,fadeEndTime:v+N}),p[_e.key]=_e,!0}return!1}function Fe(I,c,p,v,k,P){if(!c.hasData())return!1;const N=c.tileID.children(k);let H=Oe(I,c,N,p,v,k,P);if(H)return!0;for(const Y of N)Oe(I,c,Y.children(k),p,v,k,P)&&(H=!0);return H}function Oe(I,c,p,v,k,P,N){if(p[0].overscaledZ>=P)return!1;let H=!1;for(const Y of p){const Q=I.getLoadedTile(Y);if(!Q)continue;const{fadingRole:ne,fadingDirection:he,fadingParentID:ue}=Q;ne===He.Base&&he===_t.Departing&&ue||(Q.setCrossFadeLogic({fadingRole:He.Base,fadingDirection:_t.Departing,fadingParentID:c.tileID,fadeEndTime:k+N}),c.setCrossFadeLogic({fadingRole:He.Parent,fadingDirection:_t.Incoming,fadeEndTime:k+N})),v[Y.key]=Y,H=!0}return H}function xt(I,c,p,v){const k=I.tileID;return!!I.selfFading||!I.hasData()&&!!c.has(k)&&(I.setSelfFadeLogic(p+v),!0)}function ct(I,c){var p;I.needsHillshadePrepare=!0,I.needsTerrainPrepare=!0;let v=c.tileID.canonical.x-I.tileID.canonical.x;const k=c.tileID.canonical.y-I.tileID.canonical.y,P=Math.pow(2,I.tileID.canonical.z),N=c.tileID.key;v===0&&k===0||Math.abs(k)>1||(Math.abs(v)>1&&(Math.abs(v+P)===1?v+=P:Math.abs(v-P)===1&&(v-=P)),c.dem&&I.dem&&(I.dem.backfillBorder(c.dem,v,k),!((p=I.neighboringTiles)===null||p===void 0)&&p[N]&&(I.neighboringTiles[N].backfilled=!0)))}class Jt{constructor(){this._tiles={}}handleWrapJump(c){const p={};for(const v in this._tiles){const k=this._tiles[v];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),p[k.tileID.key]=k}this._tiles=p}setFeatureState(c,p){for(const v in this._tiles)this._tiles[v].setFeatureState(c,p)}getAllTiles(){return Object.values(this._tiles)}getAllIds(c=!1){return c?Object.values(this._tiles).map((p=>p.tileID)).sort(s.aw).map((p=>p.key)):Object.keys(this._tiles)}getTileById(c){return this._tiles[c]}setTile(c,p){this._tiles[c]=p}deleteTileById(c){delete this._tiles[c]}getLoadedTile(c){const p=this.getTileById(c.key);return p?.hasData()?p:null}isIdRenderable(c,p=!1){var v;return(v=this.getTileById(c))===null||v===void 0?void 0:v.isRenderable(p)}getRenderableIds(c=0,p){const v=[];for(const k of this.getAllIds())this.isIdRenderable(k,p)&&v.push(this.getTileById(k));return p?v.sort(((k,P)=>{const N=k.tileID,H=P.tileID,Y=new s.P(N.canonical.x,N.canonical.y)._rotate(-c),Q=new s.P(H.canonical.x,H.canonical.y)._rotate(-c);return N.overscaledZ-H.overscaledZ||Q.y-Y.y||Q.x-Y.x})).map((k=>k.tileID.key)):v.map((k=>k.tileID)).sort(s.aw).map((k=>k.key))}}class ii extends s.E{constructor(c,p,v){super(),this.id=c,this.dispatcher=v,this.on("data",(k=>this._dataHandler(k))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((k,P,N,H)=>{const Y=new(Ce(P.type))(k,P,N,H);if(Y.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${Y.id}`);return Y})(c,p,v,this),this._inViewTiles=new Jt,this._outOfViewCache=new s.ax(0,(k=>this._unloadTile(k))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._maxTileCacheZoomLevels=c?c._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){for(const p of this._inViewTiles.getAllTiles())p.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c),this._inViewTiles=new Jt}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const c of this._inViewTiles.getAllTiles())if(c.state!=="loaded"&&c.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,p,v){return s._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(c),this._tileLoaded(c,p,v)}catch(k){c.state="errored",k.status!==404?this._source.fire(new s.k(k,{tile:c})):this.update(this.transform,this.terrain)}}))}_unloadTile(c){this._source.unloadTile&&this._source.unloadTile(c)}_abortTile(c){this._source.abortTile&&this._source.abortTile(c),this._source.fire(new s.l("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const p of this._inViewTiles.getAllTiles())p.upload(c),p.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(c){var p;return this._inViewTiles.getRenderableIds((p=this.transform)===null||p===void 0?void 0:p.bearingInRadians,c)}hasRenderableParent(c){const p=c.overscaledZ-1;if(p>=this._source.minzoom){const v=this.getLoadedTile(c.scaledTo(p));if(v)return this._inViewTiles.isIdRenderable(v.tileID.key)}return!1}reload(c,p=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const v of this._inViewTiles.getAllIds()){const k=this._inViewTiles.getTileById(v);p&&!this._source.shouldReloadTile(k,p)||(c?this._reloadTile(v,"expired"):k.state!=="errored"&&this._reloadTile(v,"reloading"))}}}_reloadTile(c,p){return s._(this,void 0,void 0,(function*(){const v=this._inViewTiles.getTileById(c);v&&(v.state!=="loading"&&(v.state=p),yield this._loadTile(v,c,p))}))}_tileLoaded(c,p,v){c.timeAdded=D(),c.selfFading&&(c.fadeEndTime=c.timeAdded+this._rasterFadeDuration),v==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(p,c),this.getSource().type==="raster-dem"&&c.dem&&(function(k,P){var N,H;const Y=P.getRenderableIds();for(const Q of Y){if(!k.neighboringTiles||!k.neighboringTiles[Q])continue;const ne=P.getTileById(Q);k.neighboringTiles[Q].backfilled||ct(k,ne),!((H=(N=ne.neighboringTiles)===null||N===void 0?void 0:N[k.tileID.key])===null||H===void 0)&&H.backfilled||ct(ne,k)}})(c,this._inViewTiles),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:c,coord:c.tileID}))}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._inViewTiles.getTileById(c)}_retainLoadedChildren(c,p){const v=this._getLoadedDescendents(p),k=new Set;for(const P of p){const N=v[P.key];if(!N?.length){k.add(P);continue}const H=P.overscaledZ+ii.maxOverzooming,Y=N.filter((he=>he.tileID.overscaledZ<=H));if(!Y.length){k.add(P);continue}const Q=Math.min(...Y.map((he=>he.tileID.overscaledZ))),ne=Y.filter((he=>he.tileID.overscaledZ===Q)).map((he=>he.tileID));for(const he of ne)c[he.key]=he;this._areDescendentsComplete(ne,Q,P.overscaledZ)||k.add(P)}return k}_getLoadedDescendents(c){var p;const v={};for(const k of this._inViewTiles.getAllTiles().filter((P=>P.hasData())))for(const P of c)k.tileID.isChildOf(P)&&(v[p=P.key]||(v[p]=[])).push(k);return v}_areDescendentsComplete(c,p,v){return c.length===1&&c[0].isOverscaled()?c[0].overscaledZ===p:Math.pow(4,p-v)===c.length}getLoadedTile(c){return this._inViewTiles.getLoadedTile(c)}updateCacheSize(c){const p=Math.ceil(c.width/this._source.tileSize)+1,v=Math.ceil(c.height/this._source.tileSize)+1,k=Math.floor(p*v*(this._maxTileCacheZoomLevels===null?s.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),P=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._outOfViewCache.setMaxSize(P)}handleWrapJump(c){const p=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);this._prevLng=c,p&&(this._inViewTiles.handleWrapJump(p),this._resetTileReloadTimers())}update(c,p){if(!this._sourceLoaded||this._paused)return;let v;this.transform=c,this.terrain=p,this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?v=c.getVisibleUnwrappedCoordinates(this._source.tileID).map((Y=>new s.a2(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y))):(v=mn(c,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?c.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(v=v.filter((Y=>this._source.hasTile(Y))))):v=[],this.usedForTerrain&&(v=this._addTerrainIdealTiles(v));const k=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=Oi(c,this._source),N=this._updateRetainedTiles(v,P),H=Xi(this._source.type);H&&this._rasterFadeDuration>0&&!p&&(function(Y,Q,ne,he,ue,_e,Ee){const Ne=D(),Ue=s.av(Q);for(const je of Q){const et=Y.getTileById(je.key);et.fadingDirection!==_t.Departing&&et.fadeOpacity!==0||et.resetFadeLogic(),sn(Y,et,ne,Ne,he,ue,Ee)||Fe(Y,et,ne,Ne,_e,Ee)||xt(et,Ue,Ne,Ee)||et.resetFadeLogic()}})(this._inViewTiles,v,N,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),H?this._cleanUpRasterTiles(N):this._cleanUpVectorTiles(N)}_cleanUpRasterTiles(c){for(const p of this._inViewTiles.getAllIds())c[p]||this._removeTile(p)}_cleanUpVectorTiles(c){for(const p of this._inViewTiles.getAllIds()){const v=this._inViewTiles.getTileById(p);c[p]?v.clearSymbolFadeHold():v.hasSymbolBuckets?v.holdingForSymbolFade()?v.symbolFadeFinished()&&this._removeTile(p):v.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(p)}}_addTerrainIdealTiles(c){const p=[];for(const v of c)if(v.canonical.z>this._source.minzoom){const k=v.scaledTo(v.canonical.z-1);p.push(k);const P=v.scaledTo(Math.max(this._source.minzoom,Math.min(v.canonical.z,5)));p.push(P)}return c.concat(p)}releaseSymbolFadeTiles(){for(const c of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(c).holdingForSymbolFade()&&this._removeTile(c)}_updateRetainedTiles(c,p){var v;const k=new Set;for(const Q of c)this._addTile(Q).hasData()||k.add(Q);const P=c.reduce(((Q,ne)=>(Q[ne.key]=ne,Q)),{}),N=this._retainLoadedChildren(P,k),H={},Y=Math.max(p-ii.maxUnderzooming,this._source.minzoom);for(const Q of N){let ne=this._inViewTiles.getTileById(Q.key),he=ne?.wasRequested();for(let ue=Q.overscaledZ-1;ue>=Y;--ue){const _e=Q.scaledTo(ue);if(H[_e.key])break;if(H[_e.key]=!0,ne=this.getTile(_e),!ne&&he&&(ne=this._addTile(_e)),ne){const Ee=ne.hasData();if((Ee||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||he)&&(P[_e.key]=_e),he=ne.wasRequested(),Ee)break}}}return P}_addTile(c){let p=this._inViewTiles.getTileById(c.key);if(p)return p;p=this._outOfViewCache.getAndRemove(c),p&&(p.resetFadeLogic(),this._setTileReloadTimer(c.key,p),p.tileID=c,this._state.initializeTileState(p,this.map?this.map.painter:null));const v=p;return p||(p=new Ut(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(p,c.key,p.state)),p.uses++,this._inViewTiles.setTile(c.key,p),v||this._source.fire(new s.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(c,p){this._clearTileReloadTimer(c);const v=p.getExpiryTimeout();v&&(this._timers[c]=setTimeout((()=>{this._reloadTile(c,"expired"),delete this._timers[c]}),v))}_clearTileReloadTimer(c){const p=this._timers[c];p&&(clearTimeout(p),delete this._timers[c])}_resetTileReloadTimers(){for(const c in this._timers)clearTimeout(this._timers[c]),delete this._timers[c];for(const c of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(c);this._setTileReloadTimer(c,p)}}refreshTiles(c){for(const p of this._inViewTiles.getAllIds()){const v=this._inViewTiles.getTileById(p);(this._inViewTiles.isIdRenderable(p)||v.state=="errored")&&c.some((k=>k.equals(v.tileID.canonical)))&&this._reloadTile(p,"expired")}}_removeTile(c){const p=this._inViewTiles.getTileById(c);p&&(p.uses--,this._inViewTiles.deleteTileById(c),this._clearTileReloadTimer(c),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._outOfViewCache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(c){c.dataType==="source"&&(c.sourceDataType!=="metadata"?c.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(c.sourceDataChanged,c.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c of this._inViewTiles.getAllIds())this._removeTile(c);this._outOfViewCache.reset()}tilesIn(c,p,v){const k=[],P=this.transform;if(!P)return k;const N=P.getCoveringTilesDetailsProvider().allowWorldCopies(),H=v?P.getCameraQueryGeometry(c):c,Y=_e=>P.screenPointToMercatorCoordinate(_e,this.terrain),Q=this.transformBbox(c,Y,!N),ne=this.transformBbox(H,Y,!N),he=this.getIds(),ue=s.aa.fromPoints(ne);for(let _e=0;_e<he.length;_e++){const Ee=this._inViewTiles.getTileById(he[_e]);if(Ee.holdingForSymbolFade())continue;const Ne=N?[Ee.tileID]:[Ee.tileID.unwrapTo(-1),Ee.tileID.unwrapTo(0)],Ue=Math.pow(2,P.zoom-Ee.tileID.overscaledZ),je=p*Ee.queryPadding*s.a5/Ee.tileSize/Ue;for(const et of Ne){const lt=ue.map((Je=>et.getTilePoint(new s.a9(Je.x,Je.y))));if(lt.expandBy(je),lt.intersects(hi)){const Je=Q.map((ft=>et.getTilePoint(ft))),st=ne.map((ft=>et.getTilePoint(ft)));k.push({tile:Ee,tileID:N?et:et.unwrapTo(0),queryGeometry:Je,cameraQueryGeometry:st,scale:Ue})}}}return k}transformBbox(c,p,v){let k=c.map(p);if(v){const P=s.aa.fromPoints(c);P.shrinkBy(.001*Math.min(P.width(),P.height()));const N=P.map(p);s.aa.fromPoints(k).covers(N)||(k=k.map((H=>H.x>.5?new s.a9(H.x-1,H.y,H.z):H)))}return k}getVisibleCoordinates(c){const p=this.getRenderableIds(c).map((v=>this._inViewTiles.getTileById(v).tileID));return this.transform&&this.transform.populateCache(p),p}hasTransition(){return!!this._source.hasTransition()||!(!Xi(this._source.type)||!(function(c,p){if(p<=0)return!1;const v=D();for(const k of c.getAllTiles())if(k.fadeEndTime>=v)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(c){this._rasterFadeDuration=c}setFeatureState(c,p,v){this._state.updateState(c=c||s.ai,p,v)}removeFeatureState(c,p,v){this._state.removeFeatureState(c=c||s.ai,p,v)}getFeatureState(c,p){return this._state.getState(c=c||s.ai,p)}setDependencies(c,p,v){const k=this._inViewTiles.getTileById(c);k&&k.setDependencies(p,v)}reloadTilesForDependencies(c,p){for(const v of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(v).hasDependency(c,p)&&this._reloadTile(v,"reloading");this._outOfViewCache.filter((v=>!v.hasDependency(c,p)))}areTilesLoaded(){for(const c of this._inViewTiles.getAllTiles())if(c.state!=="loaded"&&c.state!=="errored")return!1;return!0}}ii.maxUnderzooming=10,ii.maxOverzooming=3;class gt{constructor(c,p){this.reset(c,p)}reset(c,p){this.points=c||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=s.an(c,0,1);let p=1,v=this._distances[p];const k=c*this.paddedLength+this.padding;for(;v<k&&p<this._distances.length;)v=this._distances[++p];const P=p-1,N=this._distances[P],H=v-N,Y=H>0?(k-N)/H:0;return this.points[P].mult(1-Y).add(this.points[p].mult(Y))}}function Gt(I,c){let p=!0;return I==="always"||I!=="never"&&c!=="never"||(p=!1),p}class ei{constructor(c,p,v){const k=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(c/v),this.yCellCount=Math.ceil(p/v);for(let N=0;N<this.xCellCount*this.yCellCount;N++)k.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=p,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,p,v,k,P){this._forEachCell(p,v,k,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(k),this.bboxes.push(P)}insertCircle(c,p,v,k){this._forEachCell(p-k,v-k,p+k,v+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(p),this.circles.push(v),this.circles.push(k)}_insertBoxCell(c,p,v,k,P,N){this.boxCells[P].push(N)}_insertCircleCell(c,p,v,k,P,N){this.circleCells[P].push(N)}_query(c,p,v,k,P,N,H){if(v<0||c>this.width||k<0||p>this.height)return[];const Y=[];if(c<=0&&p<=0&&this.width<=v&&this.height<=k){if(P)return[{key:null,x1:c,y1:p,x2:v,y2:k}];for(let Q=0;Q<this.boxKeys.length;Q++)Y.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(let Q=0;Q<this.circleKeys.length;Q++){const ne=this.circles[3*Q],he=this.circles[3*Q+1],ue=this.circles[3*Q+2];Y.push({key:this.circleKeys[Q],x1:ne-ue,y1:he-ue,x2:ne+ue,y2:he+ue})}}else this._forEachCell(c,p,v,k,this._queryCell,Y,{hitTest:P,overlapMode:N,seenUids:{box:{},circle:{}}},H);return Y}query(c,p,v,k){return this._query(c,p,v,k,!1,null)}hitTest(c,p,v,k,P,N){return this._query(c,p,v,k,!0,P,N).length>0}hitTestCircle(c,p,v,k,P){const N=c-v,H=c+v,Y=p-v,Q=p+v;if(H<0||N>this.width||Q<0||Y>this.height)return!1;const ne=[];return this._forEachCell(N,Y,H,Q,this._queryCellCircle,ne,{hitTest:!0,overlapMode:k,circle:{x:c,y:p,radius:v},seenUids:{box:{},circle:{}}},P),ne.length>0}_queryCell(c,p,v,k,P,N,H,Y){const{seenUids:Q,hitTest:ne,overlapMode:he}=H,ue=this.boxCells[P];if(ue!==null){const Ee=this.bboxes;for(const Ne of ue)if(!Q.box[Ne]){Q.box[Ne]=!0;const Ue=4*Ne,je=this.boxKeys[Ne];if(c<=Ee[Ue+2]&&p<=Ee[Ue+3]&&v>=Ee[Ue+0]&&k>=Ee[Ue+1]&&(!Y||Y(je))&&(!ne||!Gt(he,je.overlapMode))&&(N.push({key:je,x1:Ee[Ue],y1:Ee[Ue+1],x2:Ee[Ue+2],y2:Ee[Ue+3]}),ne))return!0}}const _e=this.circleCells[P];if(_e!==null){const Ee=this.circles;for(const Ne of _e)if(!Q.circle[Ne]){Q.circle[Ne]=!0;const Ue=3*Ne,je=this.circleKeys[Ne];if(this._circleAndRectCollide(Ee[Ue],Ee[Ue+1],Ee[Ue+2],c,p,v,k)&&(!Y||Y(je))&&(!ne||!Gt(he,je.overlapMode))){const et=Ee[Ue],lt=Ee[Ue+1],Je=Ee[Ue+2];if(N.push({key:je,x1:et-Je,y1:lt-Je,x2:et+Je,y2:lt+Je}),ne)return!0}}}return!1}_queryCellCircle(c,p,v,k,P,N,H,Y){const{circle:Q,seenUids:ne,overlapMode:he}=H,ue=this.boxCells[P];if(ue!==null){const Ee=this.bboxes;for(const Ne of ue)if(!ne.box[Ne]){ne.box[Ne]=!0;const Ue=4*Ne,je=this.boxKeys[Ne];if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,Ee[Ue+0],Ee[Ue+1],Ee[Ue+2],Ee[Ue+3])&&(!Y||Y(je))&&!Gt(he,je.overlapMode))return N.push(!0),!0}}const _e=this.circleCells[P];if(_e!==null){const Ee=this.circles;for(const Ne of _e)if(!ne.circle[Ne]){ne.circle[Ne]=!0;const Ue=3*Ne,je=this.circleKeys[Ne];if(this._circlesCollide(Ee[Ue],Ee[Ue+1],Ee[Ue+2],Q.x,Q.y,Q.radius)&&(!Y||Y(je))&&!Gt(he,je.overlapMode))return N.push(!0),!0}}}_forEachCell(c,p,v,k,P,N,H,Y){const Q=this._convertToXCellCoord(c),ne=this._convertToYCellCoord(p),he=this._convertToXCellCoord(v),ue=this._convertToYCellCoord(k);for(let _e=Q;_e<=he;_e++)for(let Ee=ne;Ee<=ue;Ee++)if(P.call(this,c,p,v,k,this.xCellCount*Ee+_e,N,H,Y))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,p,v,k,P,N){const H=k-c,Y=P-p,Q=v+N;return Q*Q>H*H+Y*Y}_circleAndRectCollide(c,p,v,k,P,N,H){const Y=(N-k)/2,Q=Math.abs(c-(k+Y));if(Q>Y+v)return!1;const ne=(H-P)/2,he=Math.abs(p-(P+ne));if(he>ne+v)return!1;if(Q<=Y||he<=ne)return!0;const ue=Q-Y,_e=he-ne;return ue*ue+_e*_e<=v*v}}function ki(I,c,p){const v=s.N();if(!I){const{vecSouth:he,vecEast:ue}=$i(c),_e=f();_e[0]=ue[0],_e[1]=ue[1],_e[2]=he[0],_e[3]=he[1],k=_e,(ne=(N=(P=_e)[0])*(Q=P[3])-(Y=P[2])*(H=P[1]))&&(k[0]=Q*(ne=1/ne),k[1]=-H*ne,k[2]=-Y*ne,k[3]=N*ne),v[0]=_e[0],v[1]=_e[1],v[4]=_e[2],v[5]=_e[3]}var k,P,N,H,Y,Q,ne;return s.Q(v,v,[1/p,1/p,1]),v}function gn(I,c,p,v){if(I){const k=s.N();if(!c){const{vecSouth:P,vecEast:N}=$i(p);k[0]=N[0],k[1]=N[1],k[4]=P[0],k[5]=P[1]}return s.Q(k,k,[v,v,1]),k}return p.pixelsToClipSpaceMatrix}function $i(I){const c=Math.cos(I.rollInRadians),p=Math.sin(I.rollInRadians),v=Math.cos(I.pitchInRadians),k=Math.cos(I.bearingInRadians),P=Math.sin(I.bearingInRadians),N=s.aC();N[0]=-k*v*p-P*c,N[1]=-P*v*p+k*c;const H=s.aD(N);H<1e-9?s.aE(N):s.aF(N,N,1/H);const Y=s.aC();Y[0]=k*v*c-P*p,Y[1]=P*v*c+k*p;const Q=s.aD(Y);return Q<1e-9?s.aE(Y):s.aF(Y,Y,1/Q),{vecEast:Y,vecSouth:N}}function Ei(I,c,p,v){let k;v?(k=[I,c,v(I,c),1],s.aH(k,k,p)):(k=[I,c,0,1],ks(k,k,p));const P=k[3];return{point:new s.P(k[0]/P,k[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}function Vi(I,c){return .5+I/c*.5}function Yi(I,c){return I.x>=-c[0]&&I.x<=c[0]&&I.y>=-c[1]&&I.y<=c[1]}function on(I,c,p,v,k,P,N,H,Y,Q,ne,he,ue){const _e=p?I.textSizeData:I.iconSizeData,Ee=s.ay(_e,c.transform.zoom),Ne=[256/c.width*2+1,256/c.height*2+1],Ue=p?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;Ue.clear();const je=I.lineVertexArray,et=p?I.text.placedSymbolArray:I.icon.placedSymbolArray,lt=c.transform.width/c.transform.height;let Je=!1;for(let st=0;st<et.length;st++){const ft=et.get(st);if(ft.hidden||ft.writingMode===s.az.vertical&&!Je){bn(ft.numGlyphs,Ue);continue}Je=!1;const at=new s.P(ft.anchorX,ft.anchorY),kt={getElevation:ue,pitchedLabelPlaneMatrix:v,lineVertexArray:je,pitchWithMap:P,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:c.transform,tileAnchorPoint:at,unwrappedTileID:Y,width:Q,height:ne,translation:he},Yt=er(ft.anchorX,ft.anchorY,kt);if(!Yi(Yt.point,Ne)){bn(ft.numGlyphs,Ue);continue}const Ft=Vi(c.transform.cameraToCenterDistance,Yt.signedDistanceFromCamera),jt=s.aA(_e,Ee,ft),Vt=P?jt*c.transform.getPitchedTextCorrection(ft.anchorX,ft.anchorY,Y)/Ft:jt*Ft,Mi=$n({projectionContext:kt,pitchedLabelPlaneMatrixInverse:k,symbol:ft,fontSize:Vt,flip:!1,keepUpright:N,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:Ue,aspectRatio:lt,rotateToLine:H});Je=Mi.useVertical,(Mi.notEnoughRoom||Je||Mi.needsFlipping&&$n({projectionContext:kt,pitchedLabelPlaneMatrixInverse:k,symbol:ft,fontSize:Vt,flip:!0,keepUpright:N,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:Ue,aspectRatio:lt,rotateToLine:H}).notEnoughRoom)&&bn(ft.numGlyphs,Ue)}p?I.text.dynamicLayoutVertexBuffer.updateData(Ue):I.icon.dynamicLayoutVertexBuffer.updateData(Ue)}function ca(I,c,p,v,k,P,N,H){const Y=P.glyphStartIndex+P.numGlyphs,Q=P.lineStartIndex,ne=P.lineStartIndex+P.lineLength,he=c.getoffsetX(P.glyphStartIndex),ue=c.getoffsetX(Y-1),_e=kn(I*he,p,v,k,P.segment,Q,ne,H,N);if(!_e)return null;const Ee=kn(I*ue,p,v,k,P.segment,Q,ne,H,N);return Ee?H.projectionCache.anyProjectionOccluded?null:{first:_e,last:Ee}:null}function vn(I,c,p,v){return I===s.az.horizontal&&Math.abs(p.y-c.y)>Math.abs(p.x-c.x)*v?{useVertical:!0}:(I===s.az.vertical?c.y<p.y:c.x>p.x)?{needsFlipping:!0}:null}function $n(I){const{projectionContext:c,pitchedLabelPlaneMatrixInverse:p,symbol:v,fontSize:k,flip:P,keepUpright:N,glyphOffsetArray:H,dynamicLayoutVertexArray:Y,aspectRatio:Q,rotateToLine:ne}=I,he=k/24,ue=v.lineOffsetX*he,_e=v.lineOffsetY*he;let Ee;if(v.numGlyphs>1){const Ne=v.glyphStartIndex+v.numGlyphs,Ue=v.lineStartIndex,je=v.lineStartIndex+v.lineLength,et=ca(he,H,ue,_e,P,v,ne,c);if(!et)return{notEnoughRoom:!0};const lt=Za(et.first.point.x,et.first.point.y,c,p),Je=Za(et.last.point.x,et.last.point.y,c,p);if(N&&!P){const st=vn(v.writingMode,lt,Je,Q);if(st)return st}Ee=[et.first];for(let st=v.glyphStartIndex+1;st<Ne-1;st++){const ft=kn(he*H.getoffsetX(st),ue,_e,P,v.segment,Ue,je,c,ne);if(!ft)return{notEnoughRoom:!0};Ee.push(ft)}Ee.push(et.last)}else{if(N&&!P){const Ue=nn(c.tileAnchorPoint.x,c.tileAnchorPoint.y,c).point,je=v.lineStartIndex+v.segment+1,et=new s.P(c.lineVertexArray.getx(je),c.lineVertexArray.gety(je)),lt=nn(et.x,et.y,c),Je=lt.signedDistanceFromCamera>0?lt.point:Zt(c.tileAnchorPoint,et,Ue,1,c),st=Za(Ue.x,Ue.y,c,p),ft=Za(Je.x,Je.y,c,p),at=vn(v.writingMode,st,ft,Q);if(at)return at}const Ne=kn(he*H.getoffsetX(v.glyphStartIndex),ue,_e,P,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,c,ne);if(!Ne||c.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ee=[Ne]}for(const Ne of Ee)s.aG(Y,Ne.point,Ne.angle);return{}}function Zt(I,c,p,v,k){const P=I.add(I.sub(c)._unit()),N=nn(P.x,P.y,k).point,H=p.sub(N);return p.add(H._mult(v/H.mag()))}function Ma(I,c,p){const v=c.projectionCache;if(v.projections[I])return v.projections[I];const k=new s.P(c.lineVertexArray.getx(I),c.lineVertexArray.gety(I)),P=nn(k.x,k.y,c);if(P.signedDistanceFromCamera>0)return v.projections[I]=P.point,v.anyProjectionOccluded=v.anyProjectionOccluded||P.isOccluded,P.point;const N=I-p.direction;return Zt(p.distanceFromAnchor===0?c.tileAnchorPoint:new s.P(c.lineVertexArray.getx(N),c.lineVertexArray.gety(N)),k,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,c)}function nn(I,c,p){const v=I+p.translation[0],k=c+p.translation[1];let P;return p.pitchWithMap?(P=Ei(v,k,p.pitchedLabelPlaneMatrix,p.getElevation),P.isOccluded=!1):(P=p.transform.projectTileCoordinates(v,k,p.unwrappedTileID,p.getElevation),P.point.x=(.5*P.point.x+.5)*p.width,P.point.y=(.5*-P.point.y+.5)*p.height),P}function Za(I,c,p,v){if(p.pitchWithMap){const k=[I,c,0,1];return s.aH(k,k,v),p.transform.projectTileCoordinates(k[0]/k[3],k[1]/k[3],p.unwrappedTileID,p.getElevation).point}return{x:I/p.width*2-1,y:1-c/p.height*2}}function er(I,c,p){return p.transform.projectTileCoordinates(I,c,p.unwrappedTileID,p.getElevation)}function qn(I,c,p){return I._unit()._perp()._mult(c*p)}function Zn(I,c,p,v,k,P,N,H,Y){if(H.projectionCache.offsets[I])return H.projectionCache.offsets[I];const Q=p.add(c);if(I+Y.direction<v||I+Y.direction>=k)return H.projectionCache.offsets[I]=Q,Q;const ne=Ma(I+Y.direction,H,Y),he=qn(ne.sub(p),N,Y.direction),ue=p.add(he),_e=ne.add(he);return H.projectionCache.offsets[I]=s.aI(P,Q,ue,_e)||Q,H.projectionCache.offsets[I]}function kn(I,c,p,v,k,P,N,H,Y){const Q=v?I-c:I+c;let ne=Q>0?1:-1,he=0;v&&(ne*=-1,he=Math.PI),ne<0&&(he+=Math.PI);let ue,_e=ne>0?P+k:P+k+1;H.projectionCache.cachedAnchorPoint?ue=H.projectionCache.cachedAnchorPoint:(ue=nn(H.tileAnchorPoint.x,H.tileAnchorPoint.y,H).point,H.projectionCache.cachedAnchorPoint=ue);let Ee,Ne,Ue=ue,je=ue,et=0,lt=0;const Je=Math.abs(Q),st=[];let ft;for(;et+lt<=Je;){if(_e+=ne,_e<P||_e>=N)return null;et+=lt,je=Ue,Ne=Ee;const Yt={absOffsetX:Je,direction:ne,distanceFromAnchor:et,previousVertex:je};if(Ue=Ma(_e,H,Yt),p===0)st.push(je),ft=Ue.sub(je);else{let Ft;const jt=Ue.sub(je);Ft=jt.mag()===0?qn(Ma(_e+ne,H,Yt).sub(Ue),p,ne):qn(jt,p,ne),Ne||(Ne=je.add(Ft)),Ee=Zn(_e,Ft,Ue,P,N,Ne,p,H,Yt),st.push(Ne),ft=Ee.sub(Ne)}lt=ft.mag()}const at=ft._mult((Je-et)/lt)._add(Ne||je),kt=he+Math.atan2(Ue.y-je.y,Ue.x-je.x);return st.push(at),{point:at,angle:Y?kt:0,path:st}}const Oo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function bn(I,c){for(let p=0;p<I;p++){const v=c.length;c.resize(v+4),c.float32.set(Oo,3*v)}}function ks(I,c,p){const v=c[0],k=c[1];return I[0]=p[0]*v+p[4]*k+p[12],I[1]=p[1]*v+p[5]*k+p[13],I[3]=p[3]*v+p[7]*k+p[15],I}const Bn=100;class os{constructor(c,p=new ei(c.width+200,c.height+200,25),v=new ei(c.width+200,c.height+200,25)){this.transform=c,this.grid=p,this.ignoredGrid=v,this.pitchFactor=Math.cos(c.pitch*Math.PI/180)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Bn,this.screenBottomBoundary=c.height+Bn,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,p,v,k,P,N,H,Y,Q,ne,he,ue){const _e=this.projectAndGetPerspectiveRatio(c.anchorPointX+Y[0],c.anchorPointY+Y[1],P,ne,ue),Ee=v*_e.perspectiveRatio;let Ne;if(N||H)Ne=this._projectCollisionBox(c,Ee,k,P,N,H,Y,_e,ne,he,ue);else{const ft=_e.x+(he?he.x*Ee:0),at=_e.y+(he?he.y*Ee:0);Ne={allPointsOccluded:!1,box:[ft+c.x1*Ee,at+c.y1*Ee,ft+c.x2*Ee,at+c.y2*Ee]}}const[Ue,je,et,lt]=Ne.box,Je=N?Ne.allPointsOccluded:_e.isOccluded;let st=Je;return st||(st=_e.perspectiveRatio<this.perspectiveRatioCutoff),st||(st=!this.isInsideGrid(Ue,je,et,lt)),st||p!=="always"&&this.grid.hitTest(Ue,je,et,lt,p,Q)?{box:[Ue,je,et,lt],placeable:!1,offscreen:!1,occluded:Je}:{box:[Ue,je,et,lt],placeable:!0,offscreen:this.isOffscreen(Ue,je,et,lt),occluded:Je}}placeCollisionCircles(c,p,v,k,P,N,H,Y,Q,ne,he,ue,_e,Ee){const Ne=[],Ue=new s.P(p.anchorX,p.anchorY),je=this.getPerspectiveRatio(Ue.x,Ue.y,N,Ee),et=(Q?P*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,N)/je:P*je)/s.aM,lt={getElevation:Ee,pitchedLabelPlaneMatrix:H,lineVertexArray:v,pitchWithMap:Q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ue,unwrappedTileID:N,width:this.transform.width,height:this.transform.height,translation:_e},Je=ca(et,k,p.lineOffsetX*et,p.lineOffsetY*et,!1,p,!1,lt);let st=!1,ft=!1,at=!0;if(Je){const kt=.5*he*je+ue,Yt=new s.P(-100,-100),Ft=new s.P(this.screenRightBoundary,this.screenBottomBoundary),jt=new gt,Vt=Je.first,Mi=Je.last;let Pi=[];for(let la=Vt.path.length-1;la>=1;la--)Pi.push(Vt.path[la]);for(let la=1;la<Mi.path.length;la++)Pi.push(Mi.path[la]);const fi=2.5*kt;if(Q){const la=this.projectPathToScreenSpace(Pi,lt);Pi=la.some((Ja=>Ja.signedDistanceFromCamera<=0))?[]:la.map((Ja=>Ja.point))}let ji=[];if(Pi.length>0){const la=Pi[0].clone(),Ja=Pi[0].clone();for(let Lr=1;Lr<Pi.length;Lr++)la.x=Math.min(la.x,Pi[Lr].x),la.y=Math.min(la.y,Pi[Lr].y),Ja.x=Math.max(Ja.x,Pi[Lr].x),Ja.y=Math.max(Ja.y,Pi[Lr].y);ji=la.x>=Yt.x&&Ja.x<=Ft.x&&la.y>=Yt.y&&Ja.y<=Ft.y?[Pi]:Ja.x<Yt.x||la.x>Ft.x||Ja.y<Yt.y||la.y>Ft.y?[]:s.aJ([Pi],Yt.x,Yt.y,Ft.x,Ft.y)}for(const la of ji){jt.reset(la,.25*kt);let Ja=0;Ja=jt.length<=.5*kt?1:Math.ceil(jt.paddedLength/fi)+1;for(let Lr=0;Lr<Ja;Lr++){const fr=Lr/Math.max(Ja-1,1),Fr=jt.lerp(fr),pr=Fr.x+Bn,ts=Fr.y+Bn;Ne.push(pr,ts,kt,0);const Nr=pr-kt,Ys=ts-kt,_s=pr+kt,us=ts+kt;if(at=at&&this.isOffscreen(Nr,Ys,_s,us),ft=ft||this.isInsideGrid(Nr,Ys,_s,us),c!=="always"&&this.grid.hitTestCircle(pr,ts,kt,c,ne)&&(st=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:st}}}}return{circles:!Y&&st||!ft||je<this.perspectiveRatioCutoff?[]:Ne,offscreen:at,collisionDetected:st}}projectPathToScreenSpace(c,p){const v=(function(k,P){const N=s.N();return s.aB(N,P.pitchedLabelPlaneMatrix),k.map((H=>{const Y=Ei(H.x,H.y,N,P.getElevation),Q=P.transform.projectTileCoordinates(Y.point.x,Y.point.y,P.unwrappedTileID,P.getElevation);return Q.point.x=(.5*Q.point.x+.5)*P.width,Q.point.y=(.5*-Q.point.y+.5)*P.height,Q}))})(c,p);return(function(k){let P=0,N=0,H=0,Y=0;for(let Q=0;Q<k.length;Q++)k[Q].isOccluded?(H=Q+1,Y=0):(Y++,Y>N&&(N=Y,P=H));return k.slice(P,P+N)})(v)}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],v=new s.aa;for(const he of c){const ue=new s.P(he.x+Bn,he.y+Bn);v.extend(ue),p.push(ue)}const{minX:k,minY:P,maxX:N,maxY:H}=v,Y=this.grid.query(k,P,N,H).concat(this.ignoredGrid.query(k,P,N,H)),Q={},ne={};for(const he of Y){const ue=he.key;if(Q[ue.bucketInstanceId]===void 0&&(Q[ue.bucketInstanceId]={}),Q[ue.bucketInstanceId][ue.featureIndex])continue;const _e=[new s.P(he.x1,he.y1),new s.P(he.x2,he.y1),new s.P(he.x2,he.y2),new s.P(he.x1,he.y2)];s.aK(p,_e)&&(Q[ue.bucketInstanceId][ue.featureIndex]=!0,ne[ue.bucketInstanceId]===void 0&&(ne[ue.bucketInstanceId]=[]),ne[ue.bucketInstanceId].push(ue.featureIndex))}return ne}insertCollisionBox(c,p,v,k,P,N){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:k,featureIndex:P,collisionGroupID:N,overlapMode:p},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,p,v,k,P,N){const H=v?this.ignoredGrid:this.grid,Y={bucketInstanceId:k,featureIndex:P,collisionGroupID:N,overlapMode:p};for(let Q=0;Q<c.length;Q+=4)H.insertCircle(Y,c[Q],c[Q+1],c[Q+2])}projectAndGetPerspectiveRatio(c,p,v,k,P){if(P){let N;k?(N=[c,p,k(c,p),1],s.aH(N,N,P)):(N=[c,p,0,1],ks(N,N,P));const H=N[3];return{x:(N[0]/H+1)/2*this.transform.width+Bn,y:(-N[1]/H+1)/2*this.transform.height+Bn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/H*.5,isOccluded:!1,signedDistanceFromCamera:H}}{const N=this.transform.projectTileCoordinates(c,p,v,k);return{x:(N.point.x+1)/2*this.transform.width+Bn,y:(1-N.point.y)/2*this.transform.height+Bn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N.signedDistanceFromCamera*.5,isOccluded:N.isOccluded,signedDistanceFromCamera:N.signedDistanceFromCamera}}}getPerspectiveRatio(c,p,v,k){const P=this.transform.projectTileCoordinates(c,p,v,k);return .5+this.transform.cameraToCenterDistance/P.signedDistanceFromCamera*.5}isOffscreen(c,p,v,k){return v<Bn||c>=this.screenRightBoundary||k<Bn||p>this.screenBottomBoundary}isInsideGrid(c,p,v,k){return v>=0&&c<this.gridRightBoundary&&k>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const c=s.ar([]);return s.O(c,c,[-100,-100,0]),c}_projectCollisionBox(c,p,v,k,P,N,H,Y,Q,ne,he){let ue=1,_e=0,Ee=0,Ne=1;const Ue=c.anchorPointX+H[0],je=c.anchorPointY+H[1];if(N&&!P){const Pi=this.projectAndGetPerspectiveRatio(Ue+1,je,k,Q,he),fi=Pi.x-Y.x,ji=Math.atan((Pi.y-Y.y)/fi)+(fi<0?Math.PI:0),la=Math.sin(ji),Ja=Math.cos(ji);ue=Ja,_e=la,Ee=-la,Ne=Ja}else if(!N&&P){const Pi=$i(this.transform);ue=Pi.vecEast[0],_e=Pi.vecEast[1],Ee=Pi.vecSouth[0],Ne=Pi.vecSouth[1]}let et=Y.x,lt=Y.y,Je=p;P&&(et=Ue,lt=je,Je=Math.pow(2,-(this.transform.zoom-v.overscaledZ)),Je*=this.transform.getPitchedTextCorrection(Ue,je,k),ne||(Je*=s.an(.5+Y.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ne&&(et+=ue*ne.x*Je+Ee*ne.y*Je,lt+=_e*ne.x*Je+Ne*ne.y*Je);const st=c.x1*Je,ft=c.x2*Je,at=(st+ft)/2,kt=c.y1*Je,Yt=c.y2*Je,Ft=(kt+Yt)/2,jt=[{offsetX:st,offsetY:kt},{offsetX:at,offsetY:kt},{offsetX:ft,offsetY:kt},{offsetX:ft,offsetY:Ft},{offsetX:ft,offsetY:Yt},{offsetX:at,offsetY:Yt},{offsetX:st,offsetY:Yt},{offsetX:st,offsetY:Ft}];let Vt=[];for(const{offsetX:Pi,offsetY:fi}of jt)Vt.push(new s.P(et+ue*Pi+Ee*fi,lt+_e*Pi+Ne*fi));let Mi=!1;if(P){const Pi=Vt.map((fi=>this.projectAndGetPerspectiveRatio(fi.x,fi.y,k,Q,he)));Mi=Pi.some((fi=>!fi.isOccluded)),Vt=Pi.map((fi=>new s.P(fi.x,fi.y)))}else Mi=!0;return{box:s.aL(Vt),allPointsOccluded:!Mi}}}class ls{constructor(c,p,v,k){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?p:-p))):k&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class ha{constructor(c,p,v,k,P){this.text=new ls(c?c.text:null,p,v,P),this.icon=new ls(c?c.icon:null,p,k,P)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ga{constructor(c,p,v){this.text=c,this.icon=p,this.skipFade=v}}class jl{constructor(c,p,v,k,P){this.bucketInstanceId=c,this.featureIndex=p,this.sourceLayerIndex=v,this.bucketIndex=k,this.tileID=P}}class So{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const p=++this.maxGroupID;this.collisionGroups[c]={ID:p,predicate:v=>v.collisionGroupID===p}}return this.collisionGroups[c]}}function Ca(I,c,p,v,k){const{horizontalAlign:P,verticalAlign:N}=s.aS(I);return new s.P(-(P-.5)*c+v[0]*k,-(N-.5)*p+v[1]*k)}class cr{constructor(c,p,v,k,P){this.transform=c.clone(),this.terrain=p,this.collisionIndex=new os(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new So(k),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(c){const p=this.terrain;return p?(v,k)=>p.getElevation(c,v,k):null}getBucketParts(c,p,v,k){const P=v.getBucket(p),N=v.latestFeatureIndex;if(!P||!N||p.id!==P.layerIds[0])return;const H=v.collisionBoxArray,Y=P.layers[0].layout,Q=P.layers[0].paint,ne=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),he=v.tileSize/s.a5,ue=v.tileID.toUnwrapped(),_e=Y.get("text-rotation-alignment")==="map",Ee=s.aN(v,1,this.transform.zoom),Ne=s.aO(this.collisionIndex.transform,v,Q.get("text-translate"),Q.get("text-translate-anchor")),Ue=s.aO(this.collisionIndex.transform,v,Q.get("icon-translate"),Q.get("icon-translate-anchor")),je=ki(_e,this.transform,Ee);this.retainedQueryData[P.bucketInstanceId]=new jl(P.bucketInstanceId,N,P.sourceLayerIndex,P.index,v.tileID);const et={bucket:P,layout:Y,translationText:Ne,translationIcon:Ue,unwrappedTileID:ue,pitchedLabelPlaneMatrix:je,scale:ne,textPixelRatio:he,holdingForFade:v.holdingForSymbolFade(),collisionBoxArray:H,partiallyEvaluatedTextSize:s.ay(P.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(P.sourceID)};if(k)for(const lt of P.sortKeyRanges){const{sortKey:Je,symbolInstanceStart:st,symbolInstanceEnd:ft}=lt;c.push({sortKey:Je,symbolInstanceStart:st,symbolInstanceEnd:ft,parameters:et})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:et})}attemptAnchorPlacement(c,p,v,k,P,N,H,Y,Q,ne,he,ue,_e,Ee,Ne,Ue,je,et,lt,Je){const st=s.aP[c.textAnchor],ft=[c.textOffset0,c.textOffset1],at=Ca(st,v,k,ft,P),kt=this.collisionIndex.placeCollisionBox(p,ue,Y,Q,ne,H,N,Ue,he.predicate,lt,at,Je);if((!et||this.collisionIndex.placeCollisionBox(et,ue,Y,Q,ne,H,N,je,he.predicate,lt,at,Je).placeable)&&kt.placeable){let Yt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[_e.crossTileID]&&this.prevPlacement.placements[_e.crossTileID]&&this.prevPlacement.placements[_e.crossTileID].text&&(Yt=this.prevPlacement.variableOffsets[_e.crossTileID].anchor),_e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[_e.crossTileID]={textOffset:ft,width:v,height:k,anchor:st,textBoxScale:P,prevAnchor:Yt},this.markUsedJustification(Ee,st,_e,Ne),Ee.allowVerticalPlacement&&(this.markUsedOrientation(Ee,Ne,_e),this.placedOrientations[_e.crossTileID]=Ne),{shift:at,placedGlyphBoxes:kt}}}placeLayerBucketPart(c,p,v){const{bucket:k,layout:P,translationText:N,translationIcon:H,unwrappedTileID:Y,pitchedLabelPlaneMatrix:Q,textPixelRatio:ne,holdingForFade:he,collisionBoxArray:ue,partiallyEvaluatedTextSize:_e,collisionGroup:Ee}=c.parameters,Ne=P.get("text-optional"),Ue=P.get("icon-optional"),je=s.aQ(P,"text-overlap","text-allow-overlap"),et=je==="always",lt=s.aQ(P,"icon-overlap","icon-allow-overlap"),Je=lt==="always",st=P.get("text-rotation-alignment")==="map",ft=P.get("text-pitch-alignment")==="map",at=P.get("icon-text-fit")!=="none",kt=P.get("symbol-z-order")==="viewport-y",Yt=et&&(Je||!k.hasIconData()||Ue),Ft=Je&&(et||!k.hasTextData()||Ne);!k.collisionArrays&&ue&&k.deserializeCollisionBoxes(ue);const jt=this.retainedQueryData[k.bucketInstanceId].tileID,Vt=this._getTerrainElevationFunc(jt),Mi=this.transform.getFastPathSimpleProjectionMatrix(jt),Pi=(fi,ji,la)=>{var Ja,Lr;if(p[fi.crossTileID])return;if(he)return void(this.placements[fi.crossTileID]=new Ga(!1,!1,!1));let fr=!1,Fr=!1,pr=!0,ts=null,Nr={box:null,placeable:!1,offscreen:null,occluded:!1},Ys={placeable:!1},_s=null,us=null,io=null,Eu=0,qc=0,Sc=0;ji.textFeatureIndex?Eu=ji.textFeatureIndex:fi.useRuntimeCollisionCircles&&(Eu=fi.featureIndex),ji.verticalTextFeatureIndex&&(qc=ji.verticalTextFeatureIndex);const Vo=ji.textBox;if(Vo){const Al=kr=>{let gr=s.az.horizontal;if(k.allowVerticalPlacement&&!kr&&this.prevPlacement){const Bs=this.prevPlacement.placedOrientations[fi.crossTileID];Bs&&(this.placedOrientations[fi.crossTileID]=Bs,gr=Bs,this.markUsedOrientation(k,gr,fi))}return gr},kc=(kr,gr)=>{if(k.allowVerticalPlacement&&fi.numVerticalGlyphVertices>0&&ji.verticalTextBox){for(const Bs of k.writingModes)if(Bs===s.az.vertical?(Nr=gr(),Ys=Nr):Nr=kr(),Nr&&Nr.placeable)break}else Nr=kr()},ql=fi.textAnchorOffsetStartIndex,Zl=fi.textAnchorOffsetEndIndex;if(Zl===ql){const kr=(gr,Bs)=>{const js=this.collisionIndex.placeCollisionBox(gr,je,ne,jt,Y,ft,st,N,Ee.predicate,Vt,void 0,Mi);return js&&js.placeable&&(this.markUsedOrientation(k,Bs,fi),this.placedOrientations[fi.crossTileID]=Bs),js};kc((()=>kr(Vo,s.az.horizontal)),(()=>{const gr=ji.verticalTextBox;return k.allowVerticalPlacement&&fi.numVerticalGlyphVertices>0&&gr?kr(gr,s.az.vertical):{box:null,offscreen:null}})),Al(Nr&&Nr.placeable)}else{let kr=s.aP[(Lr=(Ja=this.prevPlacement)===null||Ja===void 0?void 0:Ja.variableOffsets[fi.crossTileID])===null||Lr===void 0?void 0:Lr.anchor];const gr=(js,Ry,Oy)=>{const dh=js.x2-js.x1,yx=js.y2-js.y1,zy=fi.textBoxScale,Dg=at&&lt==="never"?Ry:null;let Mu=null,Iu=je==="never"?1:2,Pu="never";kr&&Iu++;for(let Rg=0;Rg<Iu;Rg++){for(let Og=ql;Og<Zl;Og++){const ip=k.textAnchorOffsets.get(Og);if(kr&&ip.textAnchor!==kr)continue;const np=this.attemptAnchorPlacement(ip,js,dh,yx,zy,st,ft,ne,jt,Y,Ee,Pu,fi,k,Oy,N,H,Dg,Vt);if(np&&(Mu=np.placedGlyphBoxes,Mu&&Mu.placeable))return fr=!0,ts=np.shift,Mu}kr?kr=null:Pu=je}return v&&!Mu&&(Mu={box:this.collisionIndex.placeCollisionBox(Vo,"always",ne,jt,Y,ft,st,N,Ee.predicate,Vt,void 0,Mi).box,offscreen:!1,placeable:!1,occluded:!1}),Mu};kc((()=>gr(Vo,ji.iconBox,s.az.horizontal)),(()=>{const js=ji.verticalTextBox;return k.allowVerticalPlacement&&(!Nr||!Nr.placeable)&&fi.numVerticalGlyphVertices>0&&js?gr(js,ji.verticalIconBox,s.az.vertical):{box:null,occluded:!0,offscreen:null}})),Nr&&(fr=Nr.placeable,pr=Nr.offscreen);const Bs=Al(Nr&&Nr.placeable);if(!fr&&this.prevPlacement){const js=this.prevPlacement.variableOffsets[fi.crossTileID];js&&(this.variableOffsets[fi.crossTileID]=js,this.markUsedJustification(k,js.anchor,fi,Bs))}}}if(_s=Nr,fr=_s&&_s.placeable,pr=_s&&_s.offscreen,fi.useRuntimeCollisionCircles&&fi.centerJustifiedTextSymbolIndex>=0){const Al=k.text.placedSymbolArray.get(fi.centerJustifiedTextSymbolIndex),kc=s.aA(k.textSizeData,_e,Al),ql=P.get("text-padding");us=this.collisionIndex.placeCollisionCircles(je,Al,k.lineVertexArray,k.glyphOffsetArray,kc,Y,Q,v,ft,Ee.predicate,fi.collisionCircleDiameter,ql,N,Vt),us.circles.length&&us.collisionDetected&&!v&&s.w("Collisions detected, but collision boxes are not shown"),fr=et||us.circles.length>0&&!us.collisionDetected,pr=pr&&us.offscreen}if(ji.iconFeatureIndex&&(Sc=ji.iconFeatureIndex),ji.iconBox){const Al=kc=>this.collisionIndex.placeCollisionBox(kc,lt,ne,jt,Y,ft,st,H,Ee.predicate,Vt,at&&ts?ts:void 0,Mi);Ys&&Ys.placeable&&ji.verticalIconBox?(io=Al(ji.verticalIconBox),Fr=io.placeable):(io=Al(ji.iconBox),Fr=io.placeable),pr=pr&&io.offscreen}const uh=Ne||fi.numHorizontalGlyphVertices===0&&fi.numVerticalGlyphVertices===0,jd=Ue||fi.numIconVertices===0;uh||jd?jd?uh||(Fr=Fr&&fr):fr=Fr&&fr:Fr=fr=Fr&&fr;const hh=Fr&&io.placeable;if(fr&&_s.placeable&&this.collisionIndex.insertCollisionBox(_s.box,je,P.get("text-ignore-placement"),k.bucketInstanceId,Ys&&Ys.placeable&&qc?qc:Eu,Ee.ID),hh&&this.collisionIndex.insertCollisionBox(io.box,lt,P.get("icon-ignore-placement"),k.bucketInstanceId,Sc,Ee.ID),us&&fr&&this.collisionIndex.insertCollisionCircles(us.circles,je,P.get("text-ignore-placement"),k.bucketInstanceId,Eu,Ee.ID),v&&this.storeCollisionData(k.bucketInstanceId,la,ji,_s,io,us),fi.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(k.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[fi.crossTileID]=new Ga((fr||Yt)&&!_s?.occluded,(Fr||Ft)&&!io?.occluded,pr||k.justReloaded),p[fi.crossTileID]=!0};if(kt){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const fi=k.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ji=fi.length-1;ji>=0;--ji){const la=fi[ji];Pi(k.symbolInstances.get(la),k.collisionArrays[la],la)}}else for(let fi=c.symbolInstanceStart;fi<c.symbolInstanceEnd;fi++)Pi(k.symbolInstances.get(fi),k.collisionArrays[fi],fi);k.justReloaded=!1}storeCollisionData(c,p,v,k,P,N){if(v.textBox||v.iconBox){let H,Y;this.collisionBoxArrays.has(c)?H=this.collisionBoxArrays.get(c):(H=new Map,this.collisionBoxArrays.set(c,H)),H.has(p)?Y=H.get(p):(Y={text:null,icon:null},H.set(p,Y)),v.textBox&&(Y.text=k.box),v.iconBox&&(Y.icon=P.box)}if(N){let H=this.collisionCircleArrays[c];H===void 0&&(H=this.collisionCircleArrays[c]=[]);for(let Y=0;Y<N.circles.length;Y+=4)H.push(N.circles[Y+0]-Bn),H.push(N.circles[Y+1]-Bn),H.push(N.circles[Y+2]),H.push(N.collisionDetected?1:0)}}markUsedJustification(c,p,v,k){let P;P=k===s.az.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[s.aR(p)];const N=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const H of N)H>=0&&(c.text.placedSymbolArray.get(H).crossTileID=P>=0&&H!==P?0:v.crossTileID)}markUsedOrientation(c,p,v){const k=p===s.az.horizontal||p===s.az.horizontalOnly?p:0,P=p===s.az.vertical?p:0,N=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const H of N)c.text.placedSymbolArray.get(H).placedOrientation=k;v.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=P)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let v=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const k=p?p.symbolFadeChange(c):1,P=p?p.opacities:{},N=p?p.variableOffsets:{},H=p?p.placedOrientations:{};for(const Y in this.placements){const Q=this.placements[Y],ne=P[Y];ne?(this.opacities[Y]=new ha(ne,k,Q.text,Q.icon),v=v||Q.text!==ne.text.placed||Q.icon!==ne.icon.placed):(this.opacities[Y]=new ha(null,k,Q.text,Q.icon,Q.skipFade),v=v||Q.text||Q.icon)}for(const Y in P){const Q=P[Y];if(!this.opacities[Y]){const ne=new ha(Q,k,!1,!1);ne.isHidden()||(this.opacities[Y]=ne,v=v||Q.text.placed||Q.icon.placed)}}for(const Y in N)this.variableOffsets[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.variableOffsets[Y]=N[Y]);for(const Y in H)this.placedOrientations[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.placedOrientations[Y]=H[Y]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:c)}updateLayerOpacities(c,p){const v={};for(const k of p){const P=k.getBucket(c);P&&k.latestFeatureIndex&&c.id===P.layerIds[0]&&this.updateBucketOpacities(P,k.tileID,v,k.collisionBoxArray)}}updateBucketOpacities(c,p,v,k){c.hasTextData()&&(c.text.opacityVertexArray.clear(),c.text.hasVisibleVertices=!1),c.hasIconData()&&(c.icon.opacityVertexArray.clear(),c.icon.hasVisibleVertices=!1),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const P=c.layers[0],N=P.layout,H=new ha(null,0,!1,!1,!0),Y=N.get("text-allow-overlap"),Q=N.get("icon-allow-overlap"),ne=P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"),he=N.get("text-rotation-alignment")==="map",ue=N.get("text-pitch-alignment")==="map",_e=N.get("icon-text-fit")!=="none",Ee=new ha(null,0,Y&&(Q||!c.hasIconData()||N.get("icon-optional")),Q&&(Y||!c.hasTextData()||N.get("text-optional")),!0);!c.collisionArrays&&k&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(k);const Ne=(je,et,lt)=>{for(let Je=0;Je<et/4;Je++)je.opacityVertexArray.emplaceBack(lt);je.hasVisibleVertices=je.hasVisibleVertices||lt!==za},Ue=this.collisionBoxArrays.get(c.bucketInstanceId);for(let je=0;je<c.symbolInstances.length;je++){const et=c.symbolInstances.get(je),{numHorizontalGlyphVertices:lt,numVerticalGlyphVertices:Je,crossTileID:st}=et;let ft=this.opacities[st];v[st]?ft=H:ft||(ft=Ee,this.opacities[st]=ft),v[st]=!0;const at=et.numIconVertices>0,kt=this.placedOrientations[et.crossTileID],Yt=kt===s.az.vertical,Ft=kt===s.az.horizontal||kt===s.az.horizontalOnly;if(lt>0||Je>0){const Vt=Fn(ft.text);Ne(c.text,lt,Yt?za:Vt),Ne(c.text,Je,Ft?za:Vt);const Mi=ft.text.isHidden();[et.rightJustifiedTextSymbolIndex,et.centerJustifiedTextSymbolIndex,et.leftJustifiedTextSymbolIndex].forEach((ji=>{ji>=0&&(c.text.placedSymbolArray.get(ji).hidden=Mi||Yt?1:0)})),et.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(et.verticalPlacedTextSymbolIndex).hidden=Mi||Ft?1:0);const Pi=this.variableOffsets[et.crossTileID];Pi&&this.markUsedJustification(c,Pi.anchor,et,kt);const fi=this.placedOrientations[et.crossTileID];fi&&(this.markUsedJustification(c,"left",et,fi),this.markUsedOrientation(c,fi,et))}if(at){const Vt=Fn(ft.icon),Mi=!(_e&&et.verticalPlacedIconSymbolIndex&&Yt);et.placedIconSymbolIndex>=0&&(Ne(c.icon,et.numIconVertices,Mi?Vt:za),c.icon.placedSymbolArray.get(et.placedIconSymbolIndex).hidden=ft.icon.isHidden()),et.verticalPlacedIconSymbolIndex>=0&&(Ne(c.icon,et.numVerticalIconVertices,Mi?za:Vt),c.icon.placedSymbolArray.get(et.verticalPlacedIconSymbolIndex).hidden=ft.icon.isHidden())}const jt=Ue&&Ue.has(je)?Ue.get(je):{text:null,icon:null};if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const Vt=c.collisionArrays[je];if(Vt){let Mi=new s.P(0,0);if(Vt.textBox||Vt.verticalTextBox){let Pi=!0;if(ne){const fi=this.variableOffsets[st];fi?(Mi=Ca(fi.anchor,fi.width,fi.height,fi.textOffset,fi.textBoxScale),he&&Mi._rotate(ue?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Pi=!1}if(Vt.textBox||Vt.verticalTextBox){let fi;Vt.textBox&&(fi=Yt),Vt.verticalTextBox&&(fi=Ft),Rt(c.textCollisionBox.collisionVertexArray,ft.text.placed,!Pi||fi,jt.text,Mi.x,Mi.y)}}if(Vt.iconBox||Vt.verticalIconBox){const Pi=!!(!Ft&&Vt.verticalIconBox);let fi;Vt.iconBox&&(fi=Pi),Vt.verticalIconBox&&(fi=!Pi),Rt(c.iconCollisionBox.collisionVertexArray,ft.icon.placed,fi,jt.icon,_e?Mi.x:0,_e?Mi.y:0)}}}}if(c.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);c.bucketInstanceId in this.collisionCircleArrays&&(c.collisionCircleArray=this.collisionCircleArrays[c.bucketInstanceId],delete this.collisionCircleArrays[c.bucketInstanceId])}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,p){const v=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*v>c}setStale(){this.stale=!0}}function Rt(I,c,p,v,k,P){v&&v.length!==0||(v=[0,0,0,0]);const N=v[0]-Bn,H=v[1]-Bn,Y=v[2]-Bn,Q=v[3]-Bn;I.emplaceBack(c?1:0,p?1:0,k||0,P||0,N,H),I.emplaceBack(c?1:0,p?1:0,k||0,P||0,Y,H),I.emplaceBack(c?1:0,p?1:0,k||0,P||0,Y,Q),I.emplaceBack(c?1:0,p?1:0,k||0,P||0,N,Q)}const Be=Math.pow(2,25),In=Math.pow(2,24),ur=Math.pow(2,17),Er=Math.pow(2,16),Mr=Math.pow(2,9),yl=Math.pow(2,8),hr=Math.pow(2,1);function Fn(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const c=I.placed?1:0,p=Math.floor(127*I.opacity);return p*Be+c*In+p*ur+c*Er+p*Mr+c*yl+p*hr+c}const za=0;class xr{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,p,v,k,P){const N=this._bucketParts;for(;this._currentTileIndex<c.length;)if(p.getBucketParts(N,k,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,P())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort(((H,Y)=>H.sortKey-Y.sortKey)));this._currentPartIndex<N.length;)if(p.placeLayerBucketPart(N[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,P())return!0;return!1}}class vr{constructor(c,p,v,k,P,N,H,Y){this.placement=new cr(c,p,N,H,Y),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=k,this._showCollisionBoxes=P,this._done=!1}isDone(){return this._done}continuePlacement(c,p,v){const k=D(),P=()=>!this._forceFullPlacement&&D()-k>2;for(;this._currentPlacementIndex>=0;){const N=p[c[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if(N.type==="symbol"&&(!N.minzoom||N.minzoom<=H)&&(!N.maxzoom||N.maxzoom>H)){if(this._inProgressLayer||(this._inProgressLayer=new xr(N)),this._inProgressLayer.continuePlacement(v[N.source],this.placement,this._showCollisionBoxes,N,P))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const yn=512/s.a5/2;class Ws{constructor(c,p,v){this.tileID=c,this.bucketInstanceId=v,this._symbolsByKey={};const k=new Map;for(let P=0;P<p.length;P++){const N=p.get(P),H=N.key,Y=k.get(H);Y?Y.push(N):k.set(H,[N])}for(const[P,N]of k){const H={positions:N.map((Y=>({x:Math.floor(Y.anchorX*yn),y:Math.floor(Y.anchorY*yn)}))),crossTileIDs:N.map((Y=>Y.crossTileID))};if(H.positions.length>128){const Y=new s.aT(H.positions.length,16,Uint16Array);for(const{x:Q,y:ne}of H.positions)Y.add(Q,ne);Y.finish(),delete H.positions,H.index=Y}this._symbolsByKey[P]=H}}getScaledCoordinates(c,p){const{x:v,y:k,z:P}=this.tileID.canonical,{x:N,y:H,z:Y}=p.canonical,Q=yn/Math.pow(2,Y-P),ne=(H*s.a5+c.anchorY)*Q,he=k*s.a5*yn;return{x:Math.floor((N*s.a5+c.anchorX)*Q-v*s.a5*yn),y:Math.floor(ne-he)}}findMatches(c,p,v){const k=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let P=0;P<c.length;P++){const N=c.get(P);if(N.crossTileID)continue;const H=this._symbolsByKey[N.key];if(!H)continue;const Y=this.getScaledCoordinates(N,p);if(H.index){const Q=H.index.range(Y.x-k,Y.y-k,Y.x+k,Y.y+k).sort();for(const ne of Q){const he=H.crossTileIDs[ne];if(!v[he]){v[he]=!0,N.crossTileID=he;break}}}else if(H.positions)for(let Q=0;Q<H.positions.length;Q++){const ne=H.positions[Q],he=H.crossTileIDs[Q];if(Math.abs(ne.x-Y.x)<=k&&Math.abs(ne.y-Y.y)<=k&&!v[he]){v[he]=!0,N.crossTileID=he;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:c})=>c))}}class zo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Kn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const p=Math.round((c-this.lng)/360);if(p!==0)for(const v in this.indexes){const k=this.indexes[v],P={};for(const N in k){const H=k[N];H.tileID=H.tileID.unwrapTo(H.tileID.wrap+p),P[H.tileID.key]=H}this.indexes[v]=P}this.lng=c}addBucket(c,p,v){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let P=0;P<p.symbolInstances.length;P++)p.symbolInstances.get(P).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const k=this.usedCrossTileIDs[c.overscaledZ];for(const P in this.indexes){const N=this.indexes[P];if(Number(P)>c.overscaledZ)for(const H in N){const Y=N[H];Y.tileID.isChildOf(c)&&Y.findMatches(p.symbolInstances,c,k)}else{const H=N[c.scaledTo(Number(P)).key];H&&H.findMatches(p.symbolInstances,c,k)}}for(let P=0;P<p.symbolInstances.length;P++){const N=p.symbolInstances.get(P);N.crossTileID||(N.crossTileID=v.generate(),k[N.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Ws(c,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(c,p){for(const v of p.getCrossTileIDsLists())for(const k of v)delete this.usedCrossTileIDs[c][k]}removeStaleBuckets(c){let p=!1;for(const v in this.indexes){const k=this.indexes[v];for(const P in k)c[k[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,k[P]),delete k[P],p=!0)}return p}}class ta{constructor(){this.layerIndexes={},this.crossTileIDs=new zo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,p,v){let k=this.layerIndexes[c.id];k===void 0&&(k=this.layerIndexes[c.id]=new Kn);let P=!1;const N={};k.handleWrapJump(v);for(const H of p){const Y=H.getBucket(c);Y&&c.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(H.tileID,Y,this.crossTileIDs)&&(P=!0),N[Y.bucketInstanceId]=!0)}return k.removeStaleBuckets(N)&&(P=!0),P}pruneUnusedLayers(c){const p={};c.forEach((v=>{p[v]=!0}));for(const v in this.layerIndexes)p[v]||delete this.layerIndexes[v]}}var tr="void main() {fragColor=vec4(1.0);}";const ea={prelude:_i(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:_i("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:_i("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:_i(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:_i(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_i(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_i(tr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:_i(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:_i(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_i("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_i("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:_i("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:_i(tr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:_i(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:_i(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:_i(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_i(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_i(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_i(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:_i(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_i(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:_i(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:_i(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_i(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_i(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_i("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:_i("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:_i("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:_i("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:_i(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:_i("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function _i(I,c){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=c.match(/in ([\w]+) ([\w]+)/g),k=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=P?P.concat(k):k,H={};return{fragmentSource:I=I.replace(p,((Y,Q,ne,he,ue)=>(H[ue]=!0,Q==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
in ${ne} ${he} ${ue};
#else
uniform ${ne} ${he} u_${ue};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ue}
    ${ne} ${he} ${ue} = u_${ue};
#endif
`))),vertexSource:c=c.replace(p,((Y,Q,ne,he,ue)=>{const _e=he==="float"?"vec2":"vec4",Ee=ue.match(/color/)?"color":_e;return H[ue]?Q==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
uniform lowp float u_${ue}_t;
in ${ne} ${_e} a_${ue};
out ${ne} ${he} ${ue};
#else
uniform ${ne} ${he} u_${ue};
#endif
`:Ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${ue}
    ${ue} = a_${ue};
#else
    ${ne} ${he} ${ue} = u_${ue};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ue}
    ${ue} = unpack_mix_${Ee}(a_${ue}, u_${ue}_t);
#else
    ${ne} ${he} ${ue} = u_${ue};
#endif
`:Q==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
uniform lowp float u_${ue}_t;
in ${ne} ${_e} a_${ue};
#else
uniform ${ne} ${he} u_${ue};
#endif
`:Ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${ue}
    ${ne} ${he} ${ue} = a_${ue};
#else
    ${ne} ${he} ${ue} = u_${ue};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ue}
    ${ne} ${he} ${ue} = unpack_mix_${Ee}(a_${ue}, u_${ue}_t);
#else
    ${ne} ${he} ${ue} = u_${ue};
#endif
`})),staticAttributes:v,staticUniforms:N}}class Fa{constructor(c,p,v){this.vertexBuffer=c,this.indexBuffer=p,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Gn=s.aU([{name:"a_pos",type:"Int16",components:2}]);const pe="#define PROJECTION_MERCATOR",we="mercator";class Me{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return we}get shaderDefine(){return pe}get shaderPreludeCode(){return ea.projectionMercator}get vertexShaderPreludeCode(){return ea.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(c){}getMeshFromTileID(c,p,v,k,P){if(this._cachedMesh)return this._cachedMesh;const N=new s.aW;N.emplaceBack(0,0),N.emplaceBack(s.a5,0),N.emplaceBack(0,s.a5),N.emplaceBack(s.a5,s.a5);const H=c.createVertexBuffer(N,Gn.members),Y=s.aX.simpleSegment(0,0,4,2),Q=new s.aY;Q.emplaceBack(1,0,2),Q.emplaceBack(1,2,3);const ne=c.createIndexBuffer(Q);return this._cachedMesh=new Fa(H,ne,Y),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(c){}}class Ke{constructor(c=0,p=0,v=0,k=0){if(isNaN(c)||c<0||isNaN(p)||p<0||isNaN(v)||v<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=p,this.left=v,this.right=k}interpolate(c,p,v){return p.top!=null&&c.top!=null&&(this.top=s.G.number(c.top,p.top,v)),p.bottom!=null&&c.bottom!=null&&(this.bottom=s.G.number(c.bottom,p.bottom,v)),p.left!=null&&c.left!=null&&(this.left=s.G.number(c.left,p.left,v)),p.right!=null&&c.right!=null&&(this.right=s.G.number(c.right,p.right,v)),this}getCenter(c,p){const v=s.an((this.left+c-this.right)/2,0,c),k=s.an((this.top+p-this.bottom)/2,0,p);return new s.P(v,k)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new Ke(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ge(I,c){if(!I.renderWorldCopies||I.lngRange)return;const p=c.lng-I.center.lng;c.lng+=p>180?-360:p<-180?360:0}function Ct(I){return Math.max(0,Math.floor(I))}class Ht{constructor(c,p){var v;this.applyConstrain=(k,P)=>this._constrainOverride!==null?this._constrainOverride(k,P):this._callbacks.defaultConstrain(k,P),this._callbacks=c,this._tileSize=512,this._renderWorldCopies=p?.renderWorldCopies===void 0||!!p?.renderWorldCopies,this._minZoom=p?.minZoom||0,this._maxZoom=p?.maxZoom||22,this._minPitch=p?.minPitch==null?0:p?.minPitch,this._maxPitch=p?.maxPitch==null?60:p?.maxPitch,this._constrainOverride=(v=p?.constrainOverride)!==null&&v!==void 0?v:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ct(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ke,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(c,p,v){this._constrainOverride=c.constrainOverride,this._latRange=c.latRange,this._lngRange=c.lngRange,this._width=c.width,this._height=c.height,this._center=c.center,this._elevation=c.elevation,this._minElevationForCurrentTile=c.minElevationForCurrentTile,this._zoom=c.zoom,this._tileZoom=Ct(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=c.bearingInRadians,this._fovInRadians=c.fovInRadians,this._pitchInRadians=c.pitchInRadians,this._rollInRadians=c.rollInRadians,this._unmodified=c.unmodified,this._edgeInsets=new Ke(c.padding.top,c.padding.bottom,c.padding.left,c.padding.right),this._minZoom=c.minZoom,this._maxZoom=c.maxZoom,this._minPitch=c.minPitch,this._maxPitch=c.maxPitch,this._renderWorldCopies=c.renderWorldCopies,this._cameraToCenterDistance=c.cameraToCenterDistance,this._nearZ=c.nearZ,this._farZ=c.farZ,this._autoCalculateNearFarZ=!v&&c.autoCalculateNearFarZ,p&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(c){this._minElevationForCurrentTile=c}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(c){this._minZoom!==c&&(this._minZoom=c,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(c){this._minPitch!==c&&(this._minPitch=c,this.setPitch(Math.max(this.pitch,c)))}get maxPitch(){return this._maxPitch}setMaxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.setPitch(Math.min(this.pitch,c)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get constrainOverride(){return this._constrainOverride}setConstrainOverride(c){c===void 0&&(c=null),this._constrainOverride!==c&&(this._constrainOverride=c,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(c){const p=s.W(c,-180,180)*Math.PI/180;var v,k,P,N,H,Y,Q,ne,he;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=f(),v=this._rotationMatrix,P=-this._bearingInRadians,N=(k=this._rotationMatrix)[0],H=k[1],Y=k[2],Q=k[3],ne=Math.sin(P),he=Math.cos(P),v[0]=N*he+Y*ne,v[1]=H*he+Q*ne,v[2]=N*-ne+Y*he,v[3]=H*-ne+Q*he)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(c){const p=s.an(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(c){const p=c/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aZ(this._fovInRadians)}setFov(c){c=s.an(c,.1,150),this.fov!==c&&(this._unmodified=!1,this._fovInRadians=s.ap(c),this._calcMatrices())}get zoom(){return this._zoom}setZoom(c){const p=this.applyConstrain(this._center,c).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=s.aq(p),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(c){c!==this._elevation&&(this._elevation=c,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(c,p){this._autoCalculateNearFarZ=!1,this._nearZ=c,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,p,v){this._unmodified=!1,this._edgeInsets.interpolate(c,p,v),this.constrainInternal(),this._calcMatrices()}resize(c,p,v=!0){this._width=c,this._height=p,v&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ye([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(c){c?(this._lngRange=[c.getWest(),c.getEast()],this._latRange=[c.getSouth(),c.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-s.ao,s.ao])}getCameraQueryGeometry(c,p){if(p.length===1)return[p[0],c];{const{minX:v,minY:k,maxX:P,maxY:N}=s.aa.fromPoints(p).extend(c);return[new s.P(v,k),new s.P(P,k),new s.P(P,N),new s.P(v,N),new s.P(v,k)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const c=this._unmodified,{center:p,zoom:v}=this.applyConstrain(this.center,this.zoom);this.setCenter(p),this.setZoom(v),this._unmodified=c,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let c=s.ar(new Float64Array(16));s.Q(c,c,[this._width/2,-this._height/2,1]),s.O(c,c,[1,-1,0]),this._clipSpaceToPixelsMatrix=c,c=s.ar(new Float64Array(16)),s.Q(c,c,[1,-1,1]),s.O(c,c,[-1,-1,0]),s.Q(c,c,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=c,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(c,p,v,k){const P=v!==void 0?v:this.bearing,N=k=k!==void 0?k:this.pitch,{distanceToCenter:H,clampedElevation:Y}=this._distanceToCenterFromAltElevationPitch(p,this.elevation,N),{x:Q,y:ne}=Dn(N,P),he=s.a9.fromLngLat(c,p);let ue,_e,Ee=s.a_(1,he.y),Ne=0;do{if(Ne+=1,Ne>10)break;_e=H/Ee,ue=new s.a9(he.x+Q*_e,he.y+ne*_e),Ee=1/ue.meterInMercatorCoordinateUnits()}while(Math.abs(H-_e*Ee)>1e-12);return{center:ue.toLngLat(),elevation:Y,zoom:s.at(this.height/2/Math.tan(this.fovInRadians/2)/_e/this.tileSize)}}recalculateZoomAndCenter(c){if(this.elevation-c==0)return;const p=1/this.worldSize,v=s.as(1,this.center.lat)*this.worldSize,k=s.a9.fromLngLat(this.center,this.elevation),P=k.x/p,N=k.y/p,H=k.z/p,Y=this.pitch,Q=this.bearing,{x:ne,y:he,z:ue}=Dn(Y,Q),_e=this.cameraToCenterDistance,Ee=P+_e*-ne,Ne=N+_e*-he,Ue=H+_e*ue,{distanceToCenter:je,clampedElevation:et}=this._distanceToCenterFromAltElevationPitch(Ue/v,c,Y),lt=je*v,Je=new s.a9((Ee+ne*lt)*p,(Ne+he*lt)*p,0).toLngLat(),st=s.as(1,Je.lat),ft=s.at(this.height/2/Math.tan(this.fovInRadians/2)/je/st/this.tileSize);this._elevation=et,this._center=Je,this.setZoom(ft)}_distanceToCenterFromAltElevationPitch(c,p,v){const k=-Math.cos(s.ap(v)),P=c-p;let N,H=p;return k*P>=0||Math.abs(k)<.1?(N=1e4,H=c+N*k):N=-P/k,{distanceToCenter:N,clampedElevation:H}}getCameraPoint(){const c=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(c*Math.sin(this.rollInRadians),c*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const c=s.as(1,this.center.lat)*this.worldSize;return Mt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/c).toLngLat()}getMercatorTileCoordinates(c){if(!c)return[0,0,1,1];const p=c.canonical.z>=0?1<<c.canonical.z:Math.pow(2,c.canonical.z);return[c.canonical.x/p,c.canonical.y/p,1/p/s.a5,1/p/s.a5]}}class Pt{constructor(c,p){this.min=c,this.max=p,this.center=s.a$([],s.b0([],this.min,this.max),.5)}quadrant(c){const p=[c%2==0,c<2],v=s.b1(this.min),k=s.b1(this.max);for(let P=0;P<p.length;P++)v[P]=p[P]?this.min[P]:this.center[P],k[P]=p[P]?this.center[P]:this.max[P];return k[2]=this.max[2],new Pt(v,k)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersectsFrustum(c){let p=!0;for(let v=0;v<c.planes.length;v++){const k=this.intersectsPlane(c.planes[v]);if(k===0)return 0;k===1&&(p=!1)}return p?2:c.aabb.min[0]>this.max[0]||c.aabb.min[1]>this.max[1]||c.aabb.min[2]>this.max[2]||c.aabb.max[0]<this.min[0]||c.aabb.max[1]<this.min[1]||c.aabb.max[2]<this.min[2]?0:1}intersectsPlane(c){let p=c[3],v=c[3];for(let k=0;k<3;k++)c[k]>0?(p+=c[k]*this.min[k],v+=c[k]*this.max[k]):(v+=c[k]*this.min[k],p+=c[k]*this.max[k]);return p>=0?2:v<0?0:1}}class oi{distanceToTile2d(c,p,v,k){const P=k.distanceX([c,p]),N=k.distanceY([c,p]);return Math.hypot(P,N)}getWrap(c,p,v){return v}getTileBoundingVolume(c,p,v,k){var P,N;let H=0,Y=0;if(k?.terrain){const ne=new s.a2(c.z,p,c.z,c.x,c.y),he=k.terrain.getMinMaxElevation(ne);H=(P=he.minElevation)!==null&&P!==void 0?P:Math.min(0,v),Y=(N=he.maxElevation)!==null&&N!==void 0?N:Math.max(0,v)}const Q=1<<c.z;return new Pt([p+c.x/Q,c.y/Q,H],[p+(c.x+1)/Q,(c.y+1)/Q,Y])}allowVariableZoom(c,p){const v=c.fov*(Math.abs(Math.cos(c.rollInRadians))*c.height+Math.abs(Math.sin(c.rollInRadians))*c.width)/c.height,k=s.an(78.5-v/2,0,60);return!!p.terrain||c.pitch>k}allowWorldCopies(){return!0}prepareNextFrame(){}}class Hi{constructor(c,p,v){this.points=c,this.planes=p,this.aabb=v}static fromInvProjectionMatrix(c,p=1,v=0,k,P){const N=P?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],H=Math.pow(2,v),Y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((ue=>(function(_e,Ee,Ne,Ue){const je=s.aH([],_e,Ee),et=1/je[3]/Ne*Ue;return s.b6(je,je,[et,et,1/je[3],et])})(ue,c,p,H)));k&&(function(ue,_e,Ee,Ne){const Ue=Ne?4:0,je=Ne?0:4;let et=0;const lt=[],Je=[];for(let at=0;at<4;at++){const kt=s.b2([],ue[at+je],ue[at+Ue]),Yt=s.b7(kt);s.a$(kt,kt,1/Yt),lt.push(Yt),Je.push(kt)}for(let at=0;at<4;at++){const kt=s.b8(ue[at+Ue],Je[at],Ee);et=kt!==null&&kt>=0?Math.max(et,kt):Math.max(et,lt[at])}const st=(function(at,kt){const Yt=s.b2([],at[kt[0]],at[kt[1]]),Ft=s.b2([],at[kt[2]],at[kt[1]]),jt=[0,0,0,0];return s.b3(jt,s.b4([],Yt,Ft)),jt[3]=-s.b5(jt,at[kt[0]]),jt})(ue,_e),ft=(function(at,kt){const Yt=s.b9(at),Ft=s.ba([],at,1/Yt),jt=s.b2([],kt,s.a$([],Ft,s.b5(kt,Ft))),Vt=s.b9(jt);if(Vt>0){const Mi=Math.sqrt(1-Ft[3]*Ft[3]),Pi=s.a$([],Ft,-Ft[3]),fi=s.b0([],Pi,s.a$([],jt,Mi/Vt));return s.bb(kt,fi)}return null})(Ee,st);if(ft!==null){const at=ft/s.b5(Je[0],st);et=Math.min(et,at)}for(let at=0;at<4;at++){const kt=Math.min(et,lt[at]);ue[at+je]=[ue[at+Ue][0]+Je[at][0]*kt,ue[at+Ue][1]+Je[at][1]*kt,ue[at+Ue][2]+Je[at][2]*kt,1]}})(Y,N[0],k,P);const Q=N.map((ue=>{const _e=s.b2([],Y[ue[0]],Y[ue[1]]),Ee=s.b2([],Y[ue[2]],Y[ue[1]]),Ne=s.b3([],s.b4([],_e,Ee)),Ue=-s.b5(Ne,Y[ue[1]]);return Ne.concat(Ue)})),ne=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],he=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ue of Y)for(let _e=0;_e<3;_e++)ne[_e]=Math.min(ne[_e],ue[_e]),he[_e]=Math.max(he[_e],ue[_e]);return new Hi(Y,Q,new Pt(ne,he))}}class cn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,p,v){return this._helper.interpolatePadding(c,p,v)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,p,v=!0){this._helper.resize(c,p,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,p){this._helper.overrideNearFarZ(c,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(c,p){}constructor(c){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(p,v)=>{v=s.an(+v,this.minZoom,this.maxZoom);const k={center:new s.V(p.lng,p.lat),zoom:v};let P=this._helper._lngRange;if(!this._helper._renderWorldCopies&&P===null){const Je=179.9999999999;P=[-Je,Je]}const N=this.tileSize*s.aq(k.zoom);let H=0,Y=N,Q=0,ne=N,he=0,ue=0;const{x:_e,y:Ee}=this.size;if(this._helper._latRange){const Je=this._helper._latRange;H=s.X(Je[1])*N,Y=s.X(Je[0])*N,Y-H<Ee&&(he=Ee/(Y-H))}P&&(Q=s.W(s.Y(P[0])*N,0,N),ne=s.W(s.Y(P[1])*N,0,N),ne<Q&&(ne+=N),ne-Q<_e&&(ue=_e/(ne-Q)));const{x:Ne,y:Ue}=ai(N,p);let je,et;const lt=Math.max(ue||0,he||0);if(lt){const Je=new s.P(ue?(ne+Q)/2:Ne,he?(Y+H)/2:Ue);return k.center=Si(N,Je).wrap(),k.zoom+=s.at(lt),k}if(this._helper._latRange){const Je=Ee/2;Ue-Je<H&&(et=H+Je),Ue+Je>Y&&(et=Y-Je)}if(P){const Je=(Q+ne)/2;let st=Ne;this._helper._renderWorldCopies&&(st=s.W(Ne,Je-N/2,Je+N/2));const ft=_e/2;st-ft<Q&&(je=Q+ft),st+ft>ne&&(je=ne-ft)}if(je!==void 0||et!==void 0){const Je=new s.P(je??Ne,et??Ue);k.center=Si(N,Je).wrap()}return k},this.applyConstrain=(p,v)=>this._helper.applyConstrain(p,v),this._helper=new Ht({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(p,v)=>this.defaultConstrain(p,v)},c),this._coveringTilesDetailsProvider=new oi}clone(){const c=new cn;return c.apply(this),c}apply(c,p,v){this._helper.apply(c,p,v)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(c){const p=[new s.bc(0,c)];if(this._helper._renderWorldCopies){const v=this.screenPointToMercatorCoordinate(new s.P(0,0)),k=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),P=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),N=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),H=Math.floor(Math.min(v.x,k.x,P.x,N.x)),Y=Math.floor(Math.max(v.x,k.x,P.x,N.x)),Q=1;for(let ne=H-Q;ne<=Y+Q;ne++)ne!==0&&p.push(new s.bc(ne,c))}return p}getCameraFrustum(){return Hi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(c){const p=this.screenPointToLocation(this.centerPoint,c),v=c?c.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(v)}setLocationAtPoint(c,p){const v=s.as(this.elevation,this.center.lat),k=this.screenPointToMercatorCoordinateAtZ(p,v),P=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,v),N=s.a9.fromLngLat(c),H=new s.a9(N.x-(k.x-P.x),N.y-(k.y-P.y));this.setCenter(H?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(c,p){return p?this.coordinatePoint(s.a9.fromLngLat(c),p.getElevationForLngLat(c,this),this._pixelMatrix3D):this.coordinatePoint(s.a9.fromLngLat(c))}screenPointToLocation(c,p){var v;return(v=this.screenPointToMercatorCoordinate(c,p))===null||v===void 0?void 0:v.toLngLat()}screenPointToMercatorCoordinate(c,p){if(p){const v=p.pointCoordinate(c);if(v!=null)return v}return this.screenPointToMercatorCoordinateAtZ(c)}screenPointToMercatorCoordinateAtZ(c,p){const v=p||0,k=[c.x,c.y,0,1],P=[c.x,c.y,1,1];s.aH(k,k,this._pixelMatrixInverse),s.aH(P,P,this._pixelMatrixInverse);const N=k[3],H=P[3],Y=k[1]/N,Q=P[1]/H,ne=k[2]/N,he=P[2]/H,ue=ne===he?0:(v-ne)/(he-ne);return new s.a9(s.G.number(k[0]/N,P[0]/H,ue)/this.worldSize,s.G.number(Y,Q,ue)/this.worldSize,v)}coordinatePoint(c,p=0,v=this._pixelMatrix){const k=[c.x*this.worldSize,c.y*this.worldSize,p,1];return s.aH(k,k,v),new s.P(k[0]/k[3],k[1]/k[3])}getBounds(){const c=Math.max(0,this._helper._height/2-Ai(this));return new Ye().extend(this.screenPointToLocation(new s.P(0,c))).extend(this.screenPointToLocation(new s.P(this._helper._width,c))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(c,p){return p?p.pointCoordinate(c)!=null:c.y>this.height/2-Ai(this)}calculatePosMatrix(c,p=!1,v){var k;const P=(k=c.key)!==null&&k!==void 0?k:s.bd(c.wrap,c.canonical.z,c.canonical.z,c.canonical.x,c.canonical.y),N=p?this._alignedPosMatrixCache:this._posMatrixCache;if(N.has(P)){const Q=N.get(P);return v?Q.f32:Q.f64}const H=Mn(c,this.worldSize);s.S(H,p?this._alignedProjMatrix:this._viewProjMatrix,H);const Y={f64:H,f32:new Float32Array(H)};return N.set(P,Y),v?Y.f32:Y.f64}calculateFogMatrix(c){const p=c.key,v=this._fogMatrixCacheF32;if(v.has(p))return v.get(p);const k=Mn(c,this.worldSize);return s.S(k,this._fogMatrix,k),v.set(p,new Float32Array(k)),v.get(p)}calculateCenterFromCameraLngLatAlt(c,p,v,k){return this._helper.calculateCenterFromCameraLngLatAlt(c,p,v,k)}_calculateNearFarZIfNeeded(c,p,v){if(!this._helper.autoCalculateNearFarZ)return;const k=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),P=c-k*this._helper._pixelPerMeter/Math.cos(p),N=k<0?P:c,H=Math.PI/2+this.pitchInRadians,Y=s.ap(this.fov)*(Math.abs(Math.cos(s.ap(this.roll)))*this.height+Math.abs(Math.sin(s.ap(this.roll)))*this.width)/this.height*(.5+v.y/this.height),Q=Math.sin(Y)*N/Math.sin(s.an(Math.PI-H-Y,.01,Math.PI-.01)),ne=Ai(this),he=Math.atan(ne/this._helper.cameraToCenterDistance),ue=s.ap(.75),_e=he>ue?2*he*(.5+v.y/(2*ne)):ue,Ee=Math.sin(_e)*N/Math.sin(s.an(Math.PI-H-_e,.01,Math.PI-.01)),Ne=Math.min(Q,Ee);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Ne+N),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const c=this.centerOffset,p=ai(this.worldSize,this.center),v=p.x,k=p.y;this._helper._pixelPerMeter=s.as(1,this.center.lat)*this.worldSize;const P=s.ap(Math.min(this.pitch,It)),N=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(P));let H;this._calculateNearFarZIfNeeded(N,P,c),H=new Float64Array(16),s.be(H,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aB(this._invProjMatrix,H),H[8]=2*-c.x/this._helper._width,H[9]=2*c.y/this._helper._height,this._projectionMatrix=s.bf(H),s.Q(H,H,[1,-1,1]),s.O(H,H,[0,0,-this._helper.cameraToCenterDistance]),s.bg(H,H,-this.rollInRadians),s.bh(H,H,this.pitchInRadians),s.bg(H,H,-this.bearingInRadians),s.O(H,H,[-v,-k,0]),this._mercatorMatrix=s.Q([],H,[this.worldSize,this.worldSize,this.worldSize]),s.Q(H,H,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,H),s.O(H,H,[0,0,-this.elevation]),this._viewProjMatrix=H,this._invViewProjMatrix=s.aB([],H);const Y=[0,0,-1,1];s.aH(Y,Y,this._invViewProjMatrix),this._cameraPosition=[Y[0]/Y[3],Y[1]/Y[3],Y[2]/Y[3]],this._fogMatrix=new Float64Array(16),s.be(this._fogMatrix,this.fovInRadians,this.width/this.height,N,this._helper._farZ),this._fogMatrix[8]=2*-c.x/this.width,this._fogMatrix[9]=2*c.y/this.height,s.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.O(this._fogMatrix,this._fogMatrix,[-v,-k,0]),s.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,H);const Q=this._helper._width%2/2,ne=this._helper._height%2/2,he=Math.cos(this.bearingInRadians),ue=Math.sin(-this.bearingInRadians),_e=v-Math.round(v)+he*Q+ue*ne,Ee=k-Math.round(k)+he*ne+ue*Q,Ne=new Float64Array(H);if(s.O(Ne,Ne,[_e>.5?_e-1:_e,Ee>.5?Ee-1:Ee,0]),this._alignedProjMatrix=Ne,H=s.aB(new Float64Array(16),this._pixelMatrix),!H)throw new Error("failed to invert matrix");this._pixelMatrixInverse=H,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const c=this.screenPointToMercatorCoordinate(new s.P(0,0)),p=[c.x*this.worldSize,c.y*this.worldSize,0,1];return s.aH(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const c=s.as(1,this.center.lat)*this.worldSize;return Mt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/c).toLngLat()}lngLatToCameraDepth(c,p){const v=s.a9.fromLngLat(c),k=[v.x*this.worldSize,v.y*this.worldSize,p,1];return s.aH(k,k,this._viewProjMatrix),k[2]/k[3]}getProjectionData(c){const{overscaledTileID:p,aligned:v,applyTerrainMatrix:k}=c,P=this._helper.getMercatorTileCoordinates(p),N=p?this.calculatePosMatrix(p,v,!0):null;let H;return H=p&&p.terrainRttPosMatrix32f&&k?p.terrainRttPosMatrix32f:N||s.bi(),{mainMatrix:H,tileMercatorCoords:P,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:H}}isLocationOccluded(c){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(c,p,v){return 1}transformLightDirection(c){return s.b1(c)}getRayDirectionFromPixel(c){throw new Error("Not implemented.")}projectTileCoordinates(c,p,v,k){const P=this.calculatePosMatrix(v);let N;k?(N=[c,p,k(c,p),1],s.aH(N,N,P)):(N=[c,p,0,1],ks(N,N,P));const H=N[3];return{point:new s.P(N[0]/H,N[1]/H),signedDistanceFromCamera:H,isOccluded:!1}}populateCache(c){for(const p of c)this.calculatePosMatrix(p)}getMatrixForModel(c,p){const v=s.a9.fromLngLat(c,p),k=v.meterInMercatorCoordinateUnits(),P=s.bj();return s.O(P,P,[v.x,v.y,v.z]),s.bg(P,P,Math.PI),s.bh(P,P,Math.PI/2),s.Q(P,P,[-k,k,k]),P}getProjectionDataForCustomLayer(c=!0){const p=new s.a2(0,0,0,0,0),v=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:c}),k=Mn(p,this.worldSize);s.S(k,this._viewProjMatrix,k),v.tileMercatorCoords=[0,0,1,1];const P=[s.a5,s.a5,this.worldSize/this._helper.pixelsPerMeter],N=s.bk();return s.Q(N,k,P),v.fallbackMatrix=N,v.mainMatrix=N,v}getFastPathSimpleProjectionMatrix(c){return this.calculatePosMatrix(c)}}function Pn(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function na(I){if(I.useSlerp)if(I.k<1){const c=s.bl(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),p=s.bl(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),v=new Float64Array(4);s.bm(v,c,p,I.k);const k=s.bn(v);I.tr.setRoll(k.roll),I.tr.setPitch(k.pitch),I.tr.setBearing(k.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(s.G.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(s.G.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(s.G.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function fa(I,c,p,v,k){const P=k.padding,N=ai(k.worldSize,p.getNorthWest()),H=ai(k.worldSize,p.getNorthEast()),Y=ai(k.worldSize,p.getSouthEast()),Q=ai(k.worldSize,p.getSouthWest()),ne=s.ap(-v),he=N.rotate(ne),ue=H.rotate(ne),_e=Y.rotate(ne),Ee=Q.rotate(ne),Ne=new s.P(Math.max(he.x,ue.x,Ee.x,_e.x),Math.max(he.y,ue.y,Ee.y,_e.y)),Ue=new s.P(Math.min(he.x,ue.x,Ee.x,_e.x),Math.min(he.y,ue.y,Ee.y,_e.y)),je=Ne.sub(Ue),et=(k.width-(P.left+P.right+c.left+c.right))/je.x,lt=(k.height-(P.top+P.bottom+c.top+c.bottom))/je.y;if(lt<0||et<0)return void Pn();const Je=Math.min(s.at(k.scale*Math.min(et,lt)),I.maxZoom),st=s.P.convert(I.offset),ft=new s.P((c.left-c.right)/2,(c.top-c.bottom)/2).rotate(s.ap(v)),at=st.add(ft).mult(k.scale/s.aq(Je));return{center:Si(k.worldSize,N.add(Y).div(2).sub(at)),zoom:Je,bearing:v}}class aa{get useGlobeControls(){return!1}handlePanInertia(c,p){const v=c.mag(),k=Math.abs(Ai(p));return{easingOffset:c.mult(Math.min(.75*k/v,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(c,p){c.bearingDelta&&p.setBearing(p.bearing+c.bearingDelta),c.pitchDelta&&p.setPitch(p.pitch+c.pitchDelta),c.rollDelta&&p.setRoll(p.roll+c.rollDelta),c.zoomDelta&&p.setZoom(p.zoom+c.zoomDelta)}handleMapControlsPan(c,p,v){c.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(v,c.around)}cameraForBoxAndBearing(c,p,v,k,P){return fa(c,p,v,k,P)}handleJumpToCenterZoom(c,p){c.zoom!==(p.zoom!==void 0?+p.zoom:c.zoom)&&c.setZoom(+p.zoom),p.center!==void 0&&c.setCenter(s.V.convert(p.center))}handleEaseTo(c,p){const v=c.zoom,k=c.padding,P={roll:c.roll,pitch:c.pitch,bearing:c.bearing},N={roll:p.roll===void 0?c.roll:p.roll,pitch:p.pitch===void 0?c.pitch:p.pitch,bearing:p.bearing===void 0?c.bearing:p.bearing},H=p.zoom!==void 0,Y=!c.isPaddingEqual(p.padding);let Q=!1;const ne=H?+p.zoom:c.zoom;let he=c.centerPoint.add(p.offsetAsPoint);const ue=c.screenPointToLocation(he),{center:_e,zoom:Ee}=c.applyConstrain(s.V.convert(p.center||ue),ne??v);Ge(c,_e);const Ne=ai(c.worldSize,ue),Ue=ai(c.worldSize,_e).sub(Ne),je=s.aq(Ee-v);return Q=Ee!==v,{easeFunc:et=>{if(Q&&c.setZoom(s.G.number(v,Ee,et)),s.bo(P,N)||na({startEulerAngles:P,endEulerAngles:N,tr:c,k:et,useSlerp:P.roll!=N.roll}),Y&&(c.interpolatePadding(k,p.padding,et),he=c.centerPoint.add(p.offsetAsPoint)),p.around)c.setLocationAtPoint(p.around,p.aroundPoint);else{const lt=s.aq(c.zoom-v),Je=Ee>v?Math.min(2,je):Math.max(.5,je),st=Math.pow(Je,1-et),ft=Si(c.worldSize,Ne.add(Ue.mult(et*st)).mult(lt));c.setLocationAtPoint(c.renderWorldCopies?ft.wrap():ft,he)}},isZooming:Q,elevationCenter:_e}}handleFlyTo(c,p){const v=p.zoom!==void 0,k=c.zoom,P=c.applyConstrain(s.V.convert(p.center||p.locationAtOffset),v?+p.zoom:k),N=P.center,H=P.zoom;Ge(c,N);const Y=ai(c.worldSize,p.locationAtOffset),Q=ai(c.worldSize,N).sub(Y),ne=Q.mag(),he=s.aq(H-k);let ue;if(p.minZoom!==void 0){const _e=Math.min(+p.minZoom,k,H),Ee=c.applyConstrain(N,_e).zoom;ue=s.aq(Ee-k)}return{easeFunc:(_e,Ee,Ne,Ue)=>{c.setZoom(_e===1?H:k+s.at(Ee));const je=_e===1?N:Si(c.worldSize,Y.add(Q.mult(Ne)).mult(Ee));c.setLocationAtPoint(c.renderWorldCopies?je.wrap():je,Ue)},scaleOfZoom:he,targetCenter:N,scaleOfMinZoom:ue,pixelPathLength:ne}}}class zn{constructor(c,p,v){this.blendFunction=c,this.blendColor=p,this.mask=v}}zn.Replace=[1,0],zn.disabled=new zn(zn.Replace,s.bp.transparent,[!1,!1,!1,!1]),zn.unblended=new zn(zn.Replace,s.bp.transparent,[!0,!0,!0,!0]),zn.alphaBlended=new zn([1,771],s.bp.transparent,[!0,!0,!0,!0]);const Va=2305;class Hn{constructor(c,p,v){this.enable=c,this.mode=p,this.frontFace=v}}Hn.disabled=new Hn(!1,1029,Va),Hn.backCCW=new Hn(!0,1029,Va),Hn.frontCCW=new Hn(!0,1028,Va);class an{constructor(c,p,v){this.func=c,this.mask=p,this.range=v}}an.ReadOnly=!1,an.ReadWrite=!0,an.disabled=new an(519,an.ReadOnly,[0,1]);const oa=7680;class ia{constructor(c,p,v,k,P,N){this.test=c,this.ref=p,this.mask=v,this.fail=k,this.depthFail=P,this.pass=N}}ia.disabled=new ia({func:519,mask:0},0,0,oa,oa,oa);const br=new WeakMap;function va(I){var c;if(br.has(I))return br.get(I);{const p=(c=I.getParameter(I.VERSION))===null||c===void 0?void 0:c.startsWith("WebGL 2.0");return br.set(I,p),p}}class Ha{get awaitingQuery(){return!!this._readbackQueue}constructor(c){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=c;const p=c.context,v=p.gl;this._texFormat=v.RGBA,this._texType=v.UNSIGNED_BYTE;const k=new s.aW;k.emplaceBack(-1,-1),k.emplaceBack(2,-1),k.emplaceBack(-1,2);const P=new s.aY;P.emplaceBack(0,1,2),this._fullscreenTriangle=new Fa(p.createVertexBuffer(k,Gn.members),p.createIndexBuffer(P),s.aX.simpleSegment(0,0,k.length,P.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(v.TEXTURE1);const N=v.createTexture();v.bindTexture(v.TEXTURE_2D,N),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texImage2D(v.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(N),va(v)&&(this._pbo=v.createBuffer(),v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.bufferData(v.PIXEL_PACK_BUFFER,4,v.STREAM_READ),v.bindBuffer(v.PIXEL_PACK_BUFFER,null))}destroy(){const c=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),c.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(c,p){const v=this._updateCount;return this._readbackQueue?v>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():v>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(c,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const c=this._cachedRenderContext.context,p=c.gl;c.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),c.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(c,p){const v=this._cachedRenderContext.context,k=v.gl;if(this._bindFramebuffer(),v.viewport.set([0,0,this._texWidth,this._texHeight]),v.clear({color:s.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(v,k.TRIANGLES,an.disabled,ia.disabled,zn.unblended,Hn.disabled,((P,N)=>({u_input:P,u_output_expected:N}))(c,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&va(k)){k.bindBuffer(k.PIXEL_PACK_BUFFER,this._pbo),k.readBuffer(k.COLOR_ATTACHMENT0),k.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),k.bindBuffer(k.PIXEL_PACK_BUFFER,null);const P=k.fenceSync(k.SYNC_GPU_COMMANDS_COMPLETE,0);k.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:P}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const c=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&va(c)){const p=c.clientWaitSync(this._readbackQueue.sync,0,0);if(p===c.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===c.TIMEOUT_EXPIRED)return;c.bindBuffer(c.PIXEL_PACK_BUFFER,this._pbo),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),c.bindBuffer(c.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),c.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ha._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(c){let p=0;return p+=c[0]/256,p+=c[1]/65536,p+=c[2]/16777216,c[3]<127&&(p=-p),p/128}}const Wt=s.a5/128;function En(I,c){const p=I.granularity!==void 0?Math.max(I.granularity,1):1,v=p+(I.generateBorders?2:0),k=p+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),P=v+1,N=k+1,H=I.generateBorders?-1:0,Y=I.generateBorders||I.extendToNorthPole?-1:0,Q=p+(I.generateBorders?1:0),ne=p+(I.generateBorders||I.extendToSouthPole?1:0),he=P*N,ue=v*k*6,_e=P*N>65536;if(_e&&c==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ee=_e||c==="32bit",Ne=new Int16Array(2*he);let Ue=0;for(let lt=Y;lt<=ne;lt++)for(let Je=H;Je<=Q;Je++){let st=Je/p*s.a5;Je===-1&&(st=-Wt),Je===p+1&&(st=s.a5+Wt);let ft=lt/p*s.a5;lt===-1&&(ft=I.extendToNorthPole?s.br:-Wt),lt===p+1&&(ft=I.extendToSouthPole?s.bs:s.a5+Wt),Ne[Ue++]=st,Ne[Ue++]=ft}const je=Ee?new Uint32Array(ue):new Uint16Array(ue);let et=0;for(let lt=0;lt<k;lt++)for(let Je=0;Je<v;Je++){const st=Je+1+lt*P,ft=Je+(lt+1)*P,at=Je+1+(lt+1)*P;je[et++]=Je+lt*P,je[et++]=ft,je[et++]=st,je[et++]=st,je[et++]=ft,je[et++]=at}return{vertices:Ne.buffer.slice(0),indices:je.buffer.slice(0),uses32bitIndices:Ee}}const Jn=new s.aV({fill:new s.bt(128,2),line:new s.bt(512,0),tile:new s.bt(128,32),stencil:new s.bt(128,1),circle:3});class Aa{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ea.projectionGlobe}get vertexShaderPreludeCode(){return ea.projectionMercator.vertexSource}get subdivisionGranularity(){return Jn}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(c){this._errorMeasurement||(this._errorMeasurement=new Ha(c));const p=s.X(this._errorQueryLatitudeDegrees),v=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,k=this._errorMeasurement.updateErrorLoop(p,v),P=D();k!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=k,this._errorMeasurementLastChangeTime=P);const N=Math.min(Math.max((P-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bv(N))}_getMeshKey(c){return`${c.granularity.toString(36)}_${c.generateBorders?"b":""}${c.extendToNorthPole?"n":""}${c.extendToSouthPole?"s":""}`}getMeshFromTileID(c,p,v,k,P){const N=(P==="stencil"?Jn.stencil:Jn.tile).getGranularityForZoomLevel(p.z);return this._getMesh(c,{granularity:N,generateBorders:v,extendToNorthPole:p.y===0&&k,extendToSouthPole:p.y===(1<<p.z)-1&&k})}_getMesh(c,p){const v=this._getMeshKey(p);if(v in this._tileMeshCache)return this._tileMeshCache[v];const k=(function(P,N){const H=En(N,"16bit"),Y=s.aW.deserialize({arrayBuffer:H.vertices,length:H.vertices.byteLength/2/2}),Q=s.aY.deserialize({arrayBuffer:H.indices,length:H.indices.byteLength/2/3});return new Fa(P.createVertexBuffer(Y,Gn.members),P.createIndexBuffer(Q),s.aX.simpleSegment(0,0,Y.length,Q.length))})(c,p);return this._tileMeshCache[v]=k,k}recalculate(c){}hasTransition(){const c=D();let p=!1;return p=p||(c-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(c){this._errorQueryLatitudeDegrees=c}}const lo=new s.t({type:new s.D(s.u.projection.type)});class Fo extends s.E{constructor(c){super(),this._transitionable=new s.x(lo,void 0),this.setProjection(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0)),this._mercatorProjection=new Me,this._verticalPerspectiveProjection=new Aa}get transitionState(){const c=this.properties.get("type");if(typeof c=="string"&&c==="mercator")return 0;if(typeof c=="string"&&c==="vertical-perspective")return 1;if(c instanceof s.bw){if(c.from==="vertical-perspective"&&c.to==="mercator")return 1-c.transition;if(c.from==="mercator"&&c.to==="vertical-perspective")return c.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(c){this._mercatorProjection.updateGPUdependent(c),this._verticalPerspectiveProjection.updateGPUdependent(c)}getMeshFromTileID(c,p,v,k,P){return this.currentProjection.getMeshFromTileID(c,p,v,k,P)}setProjection(c){this._transitionable.setValue("type",c?.type||"mercator")}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}setErrorQueryLatitudeDegrees(c){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(c),this._mercatorProjection.setErrorQueryLatitudeDegrees(c)}}function ir(I){const c=Ka(I.worldSize,I.center.lat);return 2*Math.PI*c}function Cs(I,c,p,v,k){const P=1/(1<<k),N=c/s.a5*P+v*P,H=s.by((I/s.a5*P+p*P)*Math.PI*2+Math.PI,2*Math.PI),Y=2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI,Q=Math.cos(Y),ne=new Float64Array(3);return ne[0]=Math.sin(H)*Q,ne[1]=Math.sin(Y),ne[2]=Math.cos(H)*Q,ne}function ba(I){return(function(c,p){const v=Math.cos(p),k=new Float64Array(3);return k[0]=Math.sin(c)*v,k[1]=Math.sin(p),k[2]=Math.cos(c)*v,k})(I.lng*Math.PI/180,I.lat*Math.PI/180)}function Ka(I,c){return I/(2*Math.PI)/Math.cos(c*Math.PI/180)}function ko(I){const c=Math.asin(I[1])/Math.PI*180,p=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(p>1e-6){const v=I[0]/p,k=Math.acos(I[2]/p),P=(v>0?k:-k)/Math.PI*180;return new s.V(s.W(P,-180,180),c)}return new s.V(0,c)}function Wa(I){return Math.cos(I*Math.PI/180)}function nr(I,c){const p=Wa(I),v=Wa(c);return s.at(v/p)}function co(I,c){const p=I.rotate(c.bearingInRadians),v=c.zoom+nr(c.center.lat,0),k=s.bu(1/Wa(c.center.lat),1/Wa(Math.min(Math.abs(c.center.lat),60)),s.bx(v,7,3,0,1)),P=360/ir({worldSize:c.worldSize,center:{lat:c.center.lat}});return new s.V(c.center.lng-p.x*P*k,s.an(c.center.lat+p.y*P,-s.ao,s.ao))}function Ta(I){const c=.5*I,p=Math.sin(c),v=Math.cos(c);return Math.log(p+v)-Math.log(v-p)}function jn(I,c,p,v){const k=I.lat+p*v;if(Math.abs(p)>1){const P=(Math.sign(I.lat+p)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,N=Math.abs(I.lat+p)*Math.PI/180,H=Ta(P+v*(N-P)),Y=Ta(P),Q=Ta(N);return new s.V(I.lng+c*((H-Y)/(Q-Y)),k)}return new s.V(I.lng+c*v,k)}class lu{constructor(c){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=c}swapBuffers(){if(!this._hadAnyChanges)return;const c=this._cachePrevious;this._cachePrevious=this._cache,this._cache=c,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(c,p,v,k){const P=`${c.z}_${c.x}_${c.y}_${k?.terrain?"t":""}`,N=this._cache.get(P);if(N)return N;const H=this._cachePrevious.get(P);if(H)return this._cache.set(P,H),H;const Y=this._boundingVolumeFactory(c,p,v,k);return this._cache.set(P,Y),this._hadAnyChanges=!0,Y}}class da{constructor(c,p,v,k){this.min=v,this.max=k,this.points=c,this.planes=p}static fromAabb(c,p){const v=[];for(let k=0;k<8;k++)v.push([1&~k?c[0]:p[0],(k>>1&1)==1?p[1]:c[1],(k>>2&1)==1?p[2]:c[2]]);return new da(v,[[-1,0,0,p[0]],[1,0,0,-c[0]],[0,-1,0,p[1]],[0,1,0,-c[1]],[0,0,-1,p[2]],[0,0,1,-c[2]]],c,p)}static fromCenterSizeAngles(c,p,v){const k=s.bB([],v[0],v[1],v[2]),P=s.bC([],[p[0],0,0],k),N=s.bC([],[0,p[1],0],k),H=s.bC([],[0,0,p[2]],k),Y=[...c],Q=[...c];for(let he=0;he<8;he++)for(let ue=0;ue<3;ue++){const _e=c[ue]+P[ue]*(1&~he?-1:1)+N[ue]*((he>>1&1)==1?1:-1)+H[ue]*((he>>2&1)==1?1:-1);Y[ue]=Math.min(Y[ue],_e),Q[ue]=Math.max(Q[ue],_e)}const ne=[];for(let he=0;he<8;he++){const ue=[...c];s.b0(ue,ue,s.a$([],P,1&~he?-1:1)),s.b0(ue,ue,s.a$([],N,(he>>1&1)==1?1:-1)),s.b0(ue,ue,s.a$([],H,(he>>2&1)==1?1:-1)),ne.push(ue)}return new da(ne,[[...P,-s.b5(P,ne[0])],[...N,-s.b5(N,ne[0])],[...H,-s.b5(H,ne[0])],[-P[0],-P[1],-P[2],-s.b5(P,ne[7])],[-N[0],-N[1],-N[2],-s.b5(N,ne[7])],[-H[0],-H[1],-H[2],-s.b5(H,ne[7])]],Y,Q)}intersectsFrustum(c){let p=!0;const v=this.points.length,k=this.planes.length,P=c.planes.length,N=c.points.length;for(let H=0;H<P;H++){const Y=c.planes[H];let Q=0;for(let ne=0;ne<v;ne++){const he=this.points[ne];Y[0]*he[0]+Y[1]*he[1]+Y[2]*he[2]+Y[3]>=0&&Q++}if(Q===0)return 0;Q<v&&(p=!1)}if(p)return 2;for(let H=0;H<k;H++){const Y=this.planes[H];let Q=0;for(let ne=0;ne<N;ne++){const he=c.points[ne];Y[0]*he[0]+Y[1]*he[1]+Y[2]*he[2]+Y[3]>=0&&Q++}if(Q===0)return 0}return 1}intersectsPlane(c){const p=this.points.length;let v=0;for(let k=0;k<p;k++){const P=this.points[k];c[0]*P[0]+c[1]*P[1]+c[2]*P[2]+c[3]>=0&&v++}return v===p?2:v===0?0:1}}function Ur(I,c,p){const v=I-c;return v<0?-v:Math.max(0,v-p)}function zr(I,c,p,v,k){const P=I-p;let N;return N=P<0?Math.min(-P,1+P-k):P>1?Math.min(Math.max(P-k,0),1-P):0,Math.max(N,Ur(c,v,k))}class Fs{constructor(){this._boundingVolumeCache=new lu(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(c,p,v,k){const P=1<<v.z,N=1/P,H=v.x/P,Y=v.y/P;let Q=2;return Q=Math.min(Q,zr(c,p,H,Y,N)),Q=Math.min(Q,zr(c,p,H+.5,-Y-N,N)),Q=Math.min(Q,zr(c,p,H+.5,2-Y-N,N)),Q}getWrap(c,p,v){const k=1<<p.z,P=1/k,N=p.x/k,H=Ur(c.x,N,P),Y=Ur(c.x,N-1,P),Q=Ur(c.x,N+1,P),ne=Math.min(H,Y,Q);return ne===Q?1:ne===Y?-1:0}allowVariableZoom(c,p){return Oi(c,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(c,p,v,k){return this._boundingVolumeCache.getTileBoundingVolume(c,p,v,k)}_computeTileBoundingVolume(c,p,v,k){var P,N;let H=0,Y=0;if(k?.terrain){const Q=new s.a2(c.z,p,c.z,c.x,c.y),ne=k.terrain.getMinMaxElevation(Q);H=(P=ne.minElevation)!==null&&P!==void 0?P:Math.min(0,v),Y=(N=ne.maxElevation)!==null&&N!==void 0?N:Math.max(0,v)}if(H/=s.bE,Y/=s.bE,H+=1,Y+=1,c.z<=0)return da.fromAabb([-Y,-Y,-Y],[Y,Y,Y]);if(c.z===1)return da.fromAabb([c.x===0?-Y:0,c.y===0?0:-Y,-Y],[c.x===0?0:Y,c.y===0?Y:0,Y]);{const Q=[Cs(0,0,c.x,c.y,c.z),Cs(s.a5,0,c.x,c.y,c.z),Cs(s.a5,s.a5,c.x,c.y,c.z),Cs(0,s.a5,c.x,c.y,c.z)],ne=[];for(const jt of Q)ne.push(s.a$([],jt,Y));if(Y!==H)for(const jt of Q)ne.push(s.a$([],jt,H));c.y===0&&ne.push([0,1,0]),c.y===(1<<c.z)-1&&ne.push([0,-1,0]);const he=[1,1,1],ue=[-1,-1,-1];for(const jt of ne)for(let Vt=0;Vt<3;Vt++)he[Vt]=Math.min(he[Vt],jt[Vt]),ue[Vt]=Math.max(ue[Vt],jt[Vt]);const _e=Cs(s.a5/2,s.a5/2,c.x,c.y,c.z),Ee=s.b4([],[0,1,0],_e);s.b3(Ee,Ee);const Ne=s.b4([],_e,Ee);s.b3(Ne,Ne);const Ue=s.b4([],Q[2],Q[1]);s.b3(Ue,Ue);const je=s.b4([],Q[0],Q[3]);s.b3(je,je),ne.push(s.a$([],_e,Y)),c.y>=(1<<c.z)/2&&ne.push(s.a$([],Cs(s.a5/2,0,c.x,c.y,c.z),Y)),c.y<(1<<c.z)/2&&ne.push(s.a$([],Cs(s.a5/2,s.a5,c.x,c.y,c.z),Y));const et=rr(_e,ne),lt=rr(Ne,ne),Je=[-_e[0],-_e[1],-_e[2],et.max],st=[_e[0],_e[1],_e[2],-et.min],ft=[-Ne[0],-Ne[1],-Ne[2],lt.max],at=[Ne[0],Ne[1],Ne[2],-lt.min],kt=[...Ue,0],Yt=[...je,0],Ft=[];return c.y===0?Ft.push(s.bD(Yt,kt,Je),s.bD(Yt,kt,st)):Ft.push(s.bD(ft,kt,Je),s.bD(ft,kt,st),s.bD(ft,Yt,Je),s.bD(ft,Yt,st)),c.y===(1<<c.z)-1?Ft.push(s.bD(Yt,kt,Je),s.bD(Yt,kt,st)):Ft.push(s.bD(at,kt,Je),s.bD(at,kt,st),s.bD(at,Yt,Je),s.bD(at,Yt,st)),new da(Ft,[Je,st,ft,at,kt,Yt],he,ue)}}}function rr(I,c){let p=1/0,v=-1/0;for(const k of c){const P=s.b5(I,k);p=Math.min(p,P),v=Math.max(v,P)}return{min:p,max:v}}class As{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,p,v){return this._helper.interpolatePadding(c,p,v)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,p){this._helper.resize(c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,p){this._helper.overrideNearFarZ(c,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(c){}constructor(c){this._cachedClippingPlane=s.bF(),this._projectionMatrix=s.bj(),this._globeViewProjMatrix32f=s.bi(),this._globeViewProjMatrixNoCorrection=s.bj(),this._globeViewProjMatrixNoCorrectionInverted=s.bj(),this._globeProjMatrixInverted=s.bj(),this._cameraPosition=s.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(p,v)=>{const k=s.an(p.lat,-s.ao,s.ao),P=s.an(+v,this.minZoom+nr(0,k),this.maxZoom);return{center:new s.V(p.lng,k),zoom:P}},this.applyConstrain=(p,v)=>this._helper.applyConstrain(p,v),this._helper=new Ht({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(p,v)=>this.defaultConstrain(p,v)},c),this._coveringTilesDetailsProvider=new Fs}clone(){const c=new As;return c.apply(this),c}apply(c,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(c)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const c=s.bz();return c[0]=this._cameraPosition[0],c[1]=this._cameraPosition[1],c[2]=this._cameraPosition[2],c}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(c){const{overscaledTileID:p,applyGlobeMatrix:v}=c,k=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:k,clippingPlane:this._cachedClippingPlane,projectionTransition:v?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(c){const p=this.pitchInRadians,v=this.cameraToCenterDistance/c,k=Math.sin(p)*v,P=Math.cos(p)*v+1,N=1/Math.sqrt(k*k+P*P)*1;let H=-k,Y=P;const Q=Math.sqrt(H*H+Y*Y);H/=Q,Y/=Q;const ne=[0,H,Y];s.bG(ne,ne,[0,0,0],-this.bearingInRadians),s.bH(ne,ne,[0,0,0],-1*this.center.lat*Math.PI/180),s.bI(ne,ne,[0,0,0],this.center.lng*Math.PI/180);const he=1/s.b7(ne);return s.a$(ne,ne,he),[...ne,-N*he]}isLocationOccluded(c){return!this.isSurfacePointVisible(ba(c))}transformLightDirection(c){const p=this._helper._center.lng*Math.PI/180,v=this._helper._center.lat*Math.PI/180,k=Math.cos(v),P=[Math.sin(p)*k,Math.sin(v),Math.cos(p)*k],N=[P[2],0,-P[0]],H=[0,0,0];s.b4(H,N,P),s.b3(N,N),s.b3(H,H);const Y=[0,0,0];return s.b3(Y,[N[0]*c[0]+H[0]*c[1]+P[0]*c[2],N[1]*c[0]+H[1]*c[1]+P[1]*c[2],N[2]*c[0]+H[2]*c[1]+P[2]*c[2]]),Y}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(c,p,v){const k=(function(H,Y,Q){const ne=1/(1<<Q.z);return new s.a9(H/s.a5*ne+Q.x*ne,Y/s.a5*ne+Q.y*ne)})(c,p,v.canonical),P=(N=k.y,[s.by(k.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-N*Math.PI*2))-.5*Math.PI]);var N;return this.getCircleRadiusCorrection()/Math.cos(P[1])}projectTileCoordinates(c,p,v,k){const P=v.canonical,N=Cs(c,p,P.x,P.y,P.z),H=1+(k?k(c,p):0)/s.bE,Y=[N[0]*H,N[1]*H,N[2]*H,1];s.aH(Y,Y,this._globeViewProjMatrixNoCorrection);const Q=this._cachedClippingPlane,ne=Q[0]*N[0]+Q[1]*N[1]+Q[2]*N[2]+Q[3]<0;return{point:new s.P(Y[0]/Y[3],Y[1]/Y[3]),signedDistanceFromCamera:Y[3],isOccluded:ne}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const c=Ka(this.worldSize,this.center.lat),p=s.bk(),v=s.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*c),s.be(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const k=this.centerOffset;p[8]=2*-k.x/this._helper._width,p[9]=2*k.y/this._helper._height,this._projectionMatrix=s.bf(p),this._globeProjMatrixInverted=s.bk(),s.aB(this._globeProjMatrixInverted,p),s.O(p,p,[0,0,-this.cameraToCenterDistance]),s.bg(p,p,this.rollInRadians),s.bh(p,p,-this.pitchInRadians),s.bg(p,p,this.bearingInRadians),s.O(p,p,[0,0,-c]);const P=s.bz();P[0]=c,P[1]=c,P[2]=c,s.bh(v,p,this.center.lat*Math.PI/180),s.bJ(v,v,-this.center.lng*Math.PI/180),s.Q(v,v,P),this._globeViewProjMatrixNoCorrection=v,s.bh(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bJ(p,p,-this.center.lng*Math.PI/180),s.Q(p,p,P),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=s.bk(),s.aB(this._globeViewProjMatrixNoCorrectionInverted,v);const N=s.bz();this._cameraPosition=s.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/c,s.bG(this._cameraPosition,this._cameraPosition,N,-this.rollInRadians),s.bH(this._cameraPosition,this._cameraPosition,N,this.pitchInRadians),s.bG(this._cameraPosition,this._cameraPosition,N,-this.bearingInRadians),s.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bH(this._cameraPosition,this._cameraPosition,N,-this.center.lat*Math.PI/180),s.bI(this._cameraPosition,this._cameraPosition,N,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(c);const H=s.bf(this._globeViewProjMatrixNoCorrectionInverted);s.Q(H,H,[1,1,-1]),this._cachedFrustum=Hi.fromInvProjectionMatrix(H,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(c){s.w("calculateFogMatrix is not supported on globe projection.");const p=s.bk();return s.ar(p),p}getVisibleUnwrappedCoordinates(c){return[new s.bc(0,c)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(c){c&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(c,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const v=ba(c);s.a$(v,v,1+p/s.bE);const k=s.bF();return s.aH(k,[v[0],v[1],v[2],1],this._globeViewProjMatrixNoCorrection),k[2]/k[3]}populateCache(c){}getBounds(){const c=.5*this.width,p=.5*this.height,v=[new s.P(0,0),new s.P(c,0),new s.P(this.width,0),new s.P(this.width,p),new s.P(this.width,this.height),new s.P(c,this.height),new s.P(0,this.height),new s.P(0,p)],k=[];for(const he of v)k.push(this.unprojectScreenPoint(he));let P=0,N=0,H=0,Y=0;const Q=this.center;for(const he of k){const ue=s.bK(Q.lng,he.lng),_e=s.bK(Q.lat,he.lat);ue<N&&(N=ue),ue>P&&(P=ue),_e<Y&&(Y=_e),_e>H&&(H=_e)}const ne=[Q.lng+N,Q.lat+Y,Q.lng+P,Q.lat+H];return this.isSurfacePointOnScreen([0,1,0])&&(ne[3]=90,ne[0]=-180,ne[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ne[1]=-90,ne[0]=-180,ne[2]=180),new Ye(ne)}calculateCenterFromCameraLngLatAlt(c,p,v,k){return this._helper.calculateCenterFromCameraLngLatAlt(c,p,v,k)}setLocationAtPoint(c,p){const v=ba(this.unprojectScreenPoint(p)),k=ba(c),P=s.bz();s.bL(P);const N=s.bz();s.bI(N,v,P,-this.center.lng*Math.PI/180),s.bH(N,N,P,this.center.lat*Math.PI/180);const H=k[0]*k[0]+k[2]*k[2],Y=N[0]*N[0];if(H<Y)return;const Q=Math.sqrt(H-Y),ne=-Q,he=s.bM(k[0],k[2],N[0],Q),ue=s.bM(k[0],k[2],N[0],ne),_e=s.bz();s.bI(_e,k,P,-he);const Ee=s.bM(_e[1],_e[2],N[1],N[2]),Ne=s.bz();s.bI(Ne,k,P,-ue);const Ue=s.bM(Ne[1],Ne[2],N[1],N[2]),je=.5*Math.PI,et=Ee>=-je&&Ee<=je,lt=Ue>=-je&&Ue<=je;let Je,st;if(et&&lt){const Yt=this.center.lng*Math.PI/180,Ft=this.center.lat*Math.PI/180;s.bN(he,Yt)+s.bN(Ee,Ft)<s.bN(ue,Yt)+s.bN(Ue,Ft)?(Je=he,st=Ee):(Je=ue,st=Ue)}else if(et)Je=he,st=Ee;else{if(!lt)return;Je=ue,st=Ue}const ft=Je/Math.PI*180,at=st/Math.PI*180,kt=this.center.lat;this.setCenter(new s.V(ft,s.an(at,-90,90))),this.setZoom(this.zoom+nr(kt,this.center.lat))}locationToScreenPoint(c,p){const v=ba(c);if(p){const k=p.getElevationForLngLatZoom(c,this._helper._tileZoom);s.a$(v,v,1+k/s.bE)}return this._projectSurfacePointToScreen(v)}_projectSurfacePointToScreen(c){const p=s.bF();return s.aH(p,[...c,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new s.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(c,p){if(p){const v=p.pointCoordinate(c);if(v)return v}return s.a9.fromLngLat(this.unprojectScreenPoint(c))}screenPointToLocation(c,p){var v;return(v=this.screenPointToMercatorCoordinate(c,p))===null||v===void 0?void 0:v.toLngLat()}isPointOnMapSurface(c,p){const v=this._cameraPosition,k=this.getRayDirectionFromPixel(c);return!!this.rayPlanetIntersection(v,k)}getRayDirectionFromPixel(c){const p=s.bF();p[0]=c.x/this.width*2-1,p[1]=-1*(c.y/this.height*2-1),p[2]=1,p[3]=1,s.aH(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const v=s.bz();v[0]=p[0]-this._cameraPosition[0],v[1]=p[1]-this._cameraPosition[1],v[2]=p[2]-this._cameraPosition[2];const k=s.bz();return s.b3(k,v),k}isSurfacePointVisible(c){const p=this._cachedClippingPlane;return p[0]*c[0]+p[1]*c[1]+p[2]*c[2]+p[3]>=0}isSurfacePointOnScreen(c){if(!this.isSurfacePointVisible(c))return!1;const p=s.bF();return s.aH(p,[...c,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(c,p){const v=s.b5(c,p),k=s.bz(),P=s.bz();s.a$(P,p,v),s.b2(k,c,P);const N=1-s.b5(k,k);if(N<0)return null;const H=s.b5(c,c)-1,Y=-v+(v<0?1:-1)*Math.sqrt(N),Q=H/Y,ne=Y;return{tMin:Math.min(Q,ne),tMax:Math.max(Q,ne)}}unprojectScreenPoint(c){const p=this._cameraPosition,v=this.getRayDirectionFromPixel(c),k=this.rayPlanetIntersection(p,v);if(k){const ne=s.bz();s.b0(ne,p,[v[0]*k.tMin,v[1]*k.tMin,v[2]*k.tMin]);const he=s.bz();return s.b3(he,ne),ko(he)}const P=this._cachedClippingPlane,N=P[0]*v[0]+P[1]*v[1]+P[2]*v[2],H=-s.bb(P,p)/N,Y=s.bz();if(H>0)s.b0(Y,p,[v[0]*H,v[1]*H,v[2]*H]);else{const ne=s.bz();s.b0(ne,p,[2*v[0],2*v[1],2*v[2]]);const he=s.bb(this._cachedClippingPlane,ne);s.b2(Y,ne,[this._cachedClippingPlane[0]*he,this._cachedClippingPlane[1]*he,this._cachedClippingPlane[2]*he])}const Q=(function(ne){const he=s.bz();return he[0]=ne[0]*-ne[3],he[1]=ne[1]*-ne[3],he[2]=ne[2]*-ne[3],{center:he,radius:Math.sqrt(1-ne[3]*ne[3])}})(P);return ko((function(ne,he,ue){const _e=s.bz();s.b2(_e,ue,ne);const Ee=s.bz();return s.bA(Ee,ne,_e,he/s.b9(_e)),Ee})(Q.center,Q.radius,Y))}getMatrixForModel(c,p){const v=s.V.convert(c),k=1/s.bE,P=s.bj();return s.bJ(P,P,v.lng/180*Math.PI),s.bh(P,P,-v.lat/180*Math.PI),s.O(P,P,[0,0,1+p/s.bE]),s.bh(P,P,.5*Math.PI),s.Q(P,P,[k,k,k]),P}getProjectionDataForCustomLayer(c=!0){const p=this.getProjectionData({overscaledTileID:new s.a2(0,0,0,0,0),applyGlobeMatrix:c});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(c){}}class _l{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,p,v){return this._helper.interpolatePadding(c,p,v)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,p,v=!0){this._helper.resize(c,p,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,p){this._helper.overrideNearFarZ(c,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(c,p){this._globeness=c,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(c){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(p,v)=>this.currentTransform.defaultConstrain(p,v),this.applyConstrain=(p,v)=>this._helper.applyConstrain(p,v),this._helper=new Ht({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(p,v)=>this.defaultConstrain(p,v)},c),this._globeness=1,this._mercatorTransform=new cn,this._verticalPerspectiveTransform=new As}clone(){const c=new _l;return c._globeness=this._globeness,c._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,c.apply(this),c}apply(c){this._helper.apply(c),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(c){const p=this._mercatorTransform.getProjectionData(c),v=this._verticalPerspectiveTransform.getProjectionData(c);return{mainMatrix:this.isGlobeRendering?v.mainMatrix:p.mainMatrix,clippingPlane:v.clippingPlane,tileMercatorCoords:v.tileMercatorCoords,projectionTransition:c.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(c){return this.currentTransform.isLocationOccluded(c)}transformLightDirection(c){return this.currentTransform.transformLightDirection(c)}getPixelScale(){return s.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(c,p,v){const k=this._mercatorTransform.getPitchedTextCorrection(c,p,v),P=this._verticalPerspectiveTransform.getPitchedTextCorrection(c,p,v);return s.bu(k,P,this._globeness)}projectTileCoordinates(c,p,v,k){return this.currentTransform.projectTileCoordinates(c,p,v,k)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(c){return this.currentTransform.calculateFogMatrix(c)}getVisibleUnwrappedCoordinates(c){return this.currentTransform.getVisibleUnwrappedCoordinates(c)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(c){this._mercatorTransform.recalculateZoomAndCenter(c),this._verticalPerspectiveTransform.recalculateZoomAndCenter(c)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(c,p){return this.currentTransform.lngLatToCameraDepth(c,p)}populateCache(c){this._mercatorTransform.populateCache(c),this._verticalPerspectiveTransform.populateCache(c)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(c,p,v,k){return this._helper.calculateCenterFromCameraLngLatAlt(c,p,v,k)}setLocationAtPoint(c,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(c,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(c,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(c,p){return this.currentTransform.locationToScreenPoint(c,p)}screenPointToMercatorCoordinate(c,p){return this.currentTransform.screenPointToMercatorCoordinate(c,p)}screenPointToLocation(c,p){return this.currentTransform.screenPointToLocation(c,p)}isPointOnMapSurface(c,p){return this.currentTransform.isPointOnMapSurface(c,p)}getRayDirectionFromPixel(c){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(c)}getMatrixForModel(c,p){return this.currentTransform.getMatrixForModel(c,p)}getProjectionDataForCustomLayer(c=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(c);if(!this.isGlobeRendering)return p;const v=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(c);return v.fallbackMatrix=p.mainMatrix,v}getFastPathSimpleProjectionMatrix(c){return this.currentTransform.getFastPathSimpleProjectionMatrix(c)}}class Ir{get useGlobeControls(){return!0}handlePanInertia(c,p){const v=co(c,p);return Math.abs(v.lng-p.center.lng)>180&&(v.lng=p.center.lng+179.5*Math.sign(v.lng-p.center.lng)),{easingCenter:v,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(c,p){const v=c.around,k=p.screenPointToLocation(v);c.bearingDelta&&p.setBearing(p.bearing+c.bearingDelta),c.pitchDelta&&p.setPitch(p.pitch+c.pitchDelta),c.rollDelta&&p.setRoll(p.roll+c.rollDelta);const P=p.zoom;c.zoomDelta&&p.setZoom(p.zoom+c.zoomDelta);const N=p.zoom-P;if(N===0)return;const H=s.bK(p.center.lng,k.lng),Y=H/(Math.abs(H/180)+1),Q=s.bK(p.center.lat,k.lat),ne=p.getRayDirectionFromPixel(v),he=p.cameraPosition,ue=-1*s.b5(he,ne),_e=s.bz();s.b0(_e,he,[ne[0]*ue,ne[1]*ue,ne[2]*ue]);const Ee=s.b7(_e)-1,Ne=Math.exp(.5*-Math.max(Ee-.3,0)),Ue=Ka(p.worldSize,p.center.lat)/Math.min(p.width,p.height),je=s.bx(Ue,.9,.5,1,.25),et=(1-s.aq(-N))*Math.min(Ne,je),lt=p.center.lat,Je=p.zoom,st=new s.V(p.center.lng+Y*et,s.an(p.center.lat+Q*et,-s.ao,s.ao));p.setLocationAtPoint(k,v);const ft=p.center,at=s.bx(Math.abs(H),45,85,0,1),kt=s.bx(Ue,.75,.35,0,1),Yt=Math.pow(Math.max(at,kt),.25),Ft=s.bK(ft.lng,st.lng),jt=s.bK(ft.lat,st.lat);p.setCenter(new s.V(ft.lng+Ft*Yt,ft.lat+jt*Yt).wrap()),p.setZoom(Je+nr(lt,p.center.lat))}handleMapControlsPan(c,p,v){if(!c.panDelta)return;const k=p.center.lat,P=p.zoom;p.setCenter(co(c.panDelta,p).wrap()),p.setZoom(P+nr(k,p.center.lat))}cameraForBoxAndBearing(c,p,v,k,P){const N=fa(c,p,v,k,P),H=p.left/P.width*2-1,Y=(P.width-p.right)/P.width*2-1,Q=p.top/P.height*-2+1,ne=(P.height-p.bottom)/P.height*-2+1,he=s.bK(v.getWest(),v.getEast())<0,ue=he?v.getEast():v.getWest(),_e=he?v.getWest():v.getEast(),Ee=Math.max(v.getNorth(),v.getSouth()),Ne=Math.min(v.getNorth(),v.getSouth()),Ue=ue+.5*s.bK(ue,_e),je=Ee+.5*s.bK(Ee,Ne),et=P.clone();et.setCenter(N.center),et.setBearing(N.bearing),et.setPitch(0),et.setRoll(0),et.setZoom(N.zoom);const lt=et.modelViewProjectionMatrix,Je=[ba(v.getNorthWest()),ba(v.getNorthEast()),ba(v.getSouthWest()),ba(v.getSouthEast()),ba(new s.V(_e,je)),ba(new s.V(ue,je)),ba(new s.V(Ue,Ee)),ba(new s.V(Ue,Ne))],st=ba(N.center);let ft=Number.POSITIVE_INFINITY;for(const at of Je)H<0&&(ft=Ir.getLesserNonNegativeNonNull(ft,Ir.solveVectorScale(at,st,lt,"x",H))),Y>0&&(ft=Ir.getLesserNonNegativeNonNull(ft,Ir.solveVectorScale(at,st,lt,"x",Y))),Q>0&&(ft=Ir.getLesserNonNegativeNonNull(ft,Ir.solveVectorScale(at,st,lt,"y",Q))),ne<0&&(ft=Ir.getLesserNonNegativeNonNull(ft,Ir.solveVectorScale(at,st,lt,"y",ne)));if(Number.isFinite(ft)&&ft!==0)return N.zoom=et.zoom+s.at(ft),N;Pn()}handleJumpToCenterZoom(c,p){const v=c.center.lat,k=c.applyConstrain(p.center?s.V.convert(p.center):c.center,c.zoom).center;c.setCenter(k.wrap());const P=p.zoom!==void 0?+p.zoom:c.zoom+nr(v,k.lat);c.zoom!==P&&c.setZoom(P)}handleEaseTo(c,p){const v=c.zoom,k=c.center,P=c.padding,N={roll:c.roll,pitch:c.pitch,bearing:c.bearing},H={roll:p.roll===void 0?c.roll:p.roll,pitch:p.pitch===void 0?c.pitch:p.pitch,bearing:p.bearing===void 0?c.bearing:p.bearing},Y=p.zoom!==void 0,Q=!c.isPaddingEqual(p.padding);let ne=!1;const he=p.center?s.V.convert(p.center):k,ue=c.applyConstrain(he,v).center;Ge(c,ue);const _e=c.clone();_e.setCenter(ue),_e.setZoom(Y?+p.zoom:v+nr(k.lat,he.lat)),_e.setBearing(p.bearing);const Ee=new s.P(s.an(c.centerPoint.x+p.offsetAsPoint.x,0,c.width),s.an(c.centerPoint.y+p.offsetAsPoint.y,0,c.height));_e.setLocationAtPoint(ue,Ee);const Ne=(p.offset&&p.offsetAsPoint.mag())>0?_e.center:ue,Ue=Y?+p.zoom:v+nr(k.lat,Ne.lat),je=v+nr(k.lat,0),et=Ue+nr(Ne.lat,0),lt=s.bK(k.lng,Ne.lng),Je=s.bK(k.lat,Ne.lat),st=s.aq(et-je);return ne=Ue!==v,{easeFunc:ft=>{if(s.bo(N,H)||na({startEulerAngles:N,endEulerAngles:H,tr:c,k:ft,useSlerp:N.roll!=H.roll}),Q&&c.interpolatePadding(P,p.padding,ft),p.around)s.w("Easing around a point is not supported under globe projection."),c.setLocationAtPoint(p.around,p.aroundPoint);else{const at=et>je?Math.min(2,st):Math.max(.5,st),kt=Math.pow(at,1-ft),Yt=jn(k,lt,Je,ft*kt);c.setCenter(Yt.wrap())}if(ne){const at=s.G.number(je,et,ft)+nr(0,c.center.lat);c.setZoom(at)}},isZooming:ne,elevationCenter:Ne}}handleFlyTo(c,p){const v=p.zoom!==void 0,k=c.center,P=c.zoom,N=c.padding,H=!c.isPaddingEqual(p.padding),Y=c.applyConstrain(s.V.convert(p.center||p.locationAtOffset),P).center,Q=v?+p.zoom:c.zoom+nr(c.center.lat,Y.lat),ne=c.clone();ne.setCenter(Y),ne.setZoom(Q),ne.setBearing(p.bearing);const he=new s.P(s.an(c.centerPoint.x+p.offsetAsPoint.x,0,c.width),s.an(c.centerPoint.y+p.offsetAsPoint.y,0,c.height));ne.setLocationAtPoint(Y,he);const ue=ne.center;Ge(c,ue);const _e=(function(Je,st,ft){const at=ba(st),kt=ba(ft),Yt=s.b5(at,kt),Ft=Math.acos(Yt),jt=ir(Je);return Ft/(2*Math.PI)*jt})(c,k,ue),Ee=P+nr(k.lat,0),Ne=Q+nr(ue.lat,0),Ue=s.aq(Ne-Ee);let je;if(typeof p.minZoom=="number"){const Je=+p.minZoom+nr(ue.lat,0),st=Math.min(Je,Ee,Ne)+nr(0,ue.lat),ft=c.applyConstrain(ue,st).zoom+nr(ue.lat,0);je=s.aq(ft-Ee)}const et=s.bK(k.lng,ue.lng),lt=s.bK(k.lat,ue.lat);return{easeFunc:(Je,st,ft,at)=>{const kt=jn(k,et,lt,ft);H&&c.interpolatePadding(N,p.padding,Je);const Yt=Je===1?ue:kt;c.setCenter(Yt.wrap());const Ft=Ee+s.at(st);c.setZoom(Je===1?Q:Ft+nr(0,Yt.lat))},scaleOfZoom:Ue,targetCenter:ue,scaleOfMinZoom:je,pixelPathLength:_e}}static solveVectorScale(c,p,v,k,P){const N=k==="x"?[v[0],v[4],v[8],v[12]]:[v[1],v[5],v[9],v[13]],H=[v[3],v[7],v[11],v[15]],Y=c[0]*N[0]+c[1]*N[1]+c[2]*N[2],Q=c[0]*H[0]+c[1]*H[1]+c[2]*H[2],ne=p[0]*N[0]+p[1]*N[1]+p[2]*N[2],he=p[0]*H[0]+p[1]*H[1]+p[2]*H[2];return ne+P*Q===Y+P*he||H[3]*(Y-ne)+N[3]*(he-Q)+Y*he==ne*Q?null:(ne+N[3]-P*he-P*H[3])/(ne-Y-P*he+P*Q)}static getLesserNonNegativeNonNull(c,p){return p!==null&&p>=0&&p<c?p:c}}class Yu{constructor(c){this._globe=c,this._mercatorCameraHelper=new aa,this._verticalPerspectiveCameraHelper=new Ir}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(c,p){return this.currentHelper.handlePanInertia(c,p)}handleMapControlsRollPitchBearingZoom(c,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(c,p)}handleMapControlsPan(c,p,v){this.currentHelper.handleMapControlsPan(c,p,v)}cameraForBoxAndBearing(c,p,v,k,P){return this.currentHelper.cameraForBoxAndBearing(c,p,v,k,P)}handleJumpToCenterZoom(c,p){this.currentHelper.handleJumpToCenterZoom(c,p)}handleEaseTo(c,p){return this.currentHelper.handleEaseTo(c,p)}handleFlyTo(c,p){return this.currentHelper.handleFlyTo(c,p)}}const xl=(I,c)=>s.B(I,c&&c.filter((p=>p.identifier!=="source.canvas"))),Fc=s.bO();class uo extends s.E{constructor(c,p={}){var v,k;super(),this._rtlPluginLoaded=()=>{for(const N in this.tileManagers){const H=this.tileManagers[N].getSource().type;H!=="vector"&&H!=="geojson"||this.tileManagers[N].reload()}},this.map=c,this.dispatcher=new Li(Zi(),c._getMapId()),this.dispatcher.registerMessageHandler("GG",((N,H)=>this.getGlyphs(N,H))),this.dispatcher.registerMessageHandler("GI",((N,H)=>this.getImages(N,H))),this.dispatcher.registerMessageHandler("GDA",((N,H)=>this.getDashes(N,H))),this.imageManager=new ye,this.imageManager.setEventedParent(this);const P=((v=c._container)===null||v===void 0?void 0:v.lang)||typeof document<"u"&&((k=document.documentElement)===null||k===void 0?void 0:k.lang)||void 0;this.glyphManager=new $e(c._requestManager,p.localIdeographFontFamily,P),this.lineAtlas=new xi(256,512),this.crossTileSymbolIndex=new ta,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",s.bP()),yt().on(tt,this._rtlPluginLoaded),this.on("data",(N=>{if(N.dataType!=="source"||N.sourceDataType!=="metadata")return;const H=this.tileManagers[N.sourceId];if(!H)return;const Y=H.getSource();if(Y&&Y.vectorLayerIds)for(const Q in this._layers){const ne=this._layers[Q];ne.source===Y.id&&this._validateLayer(ne)}}))}_setInitialValues(){var c;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new s.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((c=this.crossTileSymbolIndex)===null||c===void 0?void 0:c.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(c,p){var v,k,P;this._checkLoaded();const N=p===null?(P=(k=(v=this.stylesheet.state)===null||v===void 0?void 0:v[c])===null||k===void 0?void 0:k.default)!==null&&P!==void 0?P:null:p;if(s.bR(N,this._globalState[c]))return this;this._globalState[c]=N,this._applyGlobalStateChanges([c])}getGlobalState(){return this._globalState}setGlobalState(c){this._checkLoaded();const p=[];for(const v in c)!s.bR(this._globalState[v],c[v].default)&&(p.push(v),this._globalState[v]=c[v].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(c){if(c.length===0)return;const p=new Set,v={};for(const k of c){v[k]=this._globalState[k];for(const P in this._layers){const N=this._layers[P],H=N.getLayoutAffectingGlobalStateRefs(),Y=N.getPaintAffectingGlobalStateRefs(),Q=N.getVisibilityAffectingGlobalStateRefs();if(H.has(k)&&p.add(N.source),Y.has(k))for(const{name:ne,value:he}of Y.get(k))this._updatePaintProperty(N,ne,he);Q?.has(k)&&(N.recalculateVisibility(),this._updateLayer(N))}}this.dispatcher.broadcast("UGS",v);for(const k in this.tileManagers)p.has(k)&&(this._reloadSource(k),this._changed=!0)}loadURL(c,p={},v){this.fire(new s.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const k=this.map._requestManager.transformRequest(c,"Style");this._loadStyleRequest=new AbortController;const P=this._loadStyleRequest;s.j(k,this._loadStyleRequest).then((N=>{this._loadStyleRequest=null,this._load(N.data,p,v)})).catch((N=>{this._loadStyleRequest=null,N&&!P.signal.aborted&&this.fire(new s.k(N))}))}loadJSON(c,p={},v){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(c,p,v)})).catch((()=>{}))}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(Fc,{validate:!1})}_load(c,p,v){var k,P;let N=p.transformStyle?p.transformStyle(v,c):c;if(!p.validate||!xl(this,s.C(N))){N=Object.assign({},N),this._loaded=!0,this.stylesheet=N;for(const H in N.sources)this.addSource(H,N.sources[H],{validate:!1});N.sprite?this._loadSprite(N.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(N.glyphs),this._createLayers(),this.light=new qe(this.stylesheet.light),this._setProjectionInternal(((k=this.stylesheet.projection)===null||k===void 0?void 0:k.type)||"mercator"),this.sky=new ni(this.stylesheet.sky),this.map.setTerrain((P=this.stylesheet.terrain)!==null&&P!==void 0?P:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var c,p,v;const k=s.bS(this.stylesheet.layers);this.setGlobalState((c=this.stylesheet.state)!==null&&c!==void 0?c:null),this.dispatcher.broadcast("SL",k),this._order=k.map((P=>P.id)),this._layers={},this._serializedLayers=null;for(const P of k){const N=s.bT(P,this._globalState);if(N.setEventedParent(this,{layer:{id:P.id}}),this._layers[P.id]=N,s.bU(N)&&this.tileManagers[N.source]){const H=(v=(p=P.paint)===null||p===void 0?void 0:p["raster-fade-duration"])!==null&&v!==void 0?v:N.paint.get("raster-fade-duration");this.tileManagers[N.source].setRasterFadeDuration(H)}}}_loadSprite(c,p=!1,v=void 0){this.imageManager.setLoaded(!1);const k=new AbortController;let P;this._spriteRequest=k,(function(N,H,Y,Q){return s._(this,void 0,void 0,(function*(){const ne=ae(N),he=Y>1?"@2x":"",ue={},_e={};for(const{id:Ee,url:Ne}of ne){const Ue=H.transformRequest(me(Ne,he,".json"),"SpriteJSON");ue[Ee]=s.j(Ue,Q);const je=H.transformRequest(me(Ne,he,".png"),"SpriteImage");_e[Ee]=J.getImage(je,Q)}return yield Promise.all([...Object.values(ue),...Object.values(_e)]),(function(Ee,Ne){return s._(this,void 0,void 0,(function*(){const Ue={};for(const je in Ee){Ue[je]={};const et=E.getImageCanvasContext((yield Ne[je]).data),lt=(yield Ee[je]).data;for(const Je in lt){const{width:st,height:ft,x:at,y:kt,sdf:Yt,pixelRatio:Ft,stretchX:jt,stretchY:Vt,content:Mi,textFitWidth:Pi,textFitHeight:fi}=lt[Je];Ue[je][Je]={data:null,pixelRatio:Ft,sdf:Yt,stretchX:jt,stretchY:Vt,content:Mi,textFitWidth:Pi,textFitHeight:fi,spriteData:{width:st,height:ft,x:at,y:kt,context:et}}}}return Ue}))})(ue,_e)}))})(c,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((N=>{if(this._spriteRequest=null,N)for(const H in N){this._spritesImagesIds[H]=[];const Y=this._spritesImagesIds[H]?this._spritesImagesIds[H].filter((Q=>!(Q in N))):[];for(const Q of Y)this.imageManager.removeImage(Q),this._changedImages[Q]=!0;for(const Q in N[H]){const ne=H==="default"?Q:`${H}:${Q}`;this._spritesImagesIds[H].push(ne),ne in this.imageManager.images?this.imageManager.updateImage(ne,N[H][Q],!1):this.imageManager.addImage(ne,N[H][Q]),p&&(this._changedImages[ne]=!0)}}})).catch((N=>{this._spriteRequest=null,P=N,k.signal.aborted||this.fire(new s.k(P))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),v&&v(P)}))}_unloadSprite(){for(const c of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(c),this._changedImages[c]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(c){const p=this.tileManagers[c.source];if(!p)return;const v=c.sourceLayer;if(!v)return;const k=p.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(v)===-1)&&this.fire(new s.k(new Error(`Source layer "${v}" does not exist on source "${k.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.tileManagers)if(!this.tileManagers[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(c,p=!1){const v=this._serializedAllLayers();if(!c||c.length===0)return Object.values(p?s.bV(v):v);const k=[];for(const P of c)if(v[P]){const N=p?s.bV(v[P]):v[P];k.push(N)}return k}_serializedAllLayers(){let c=this._serializedLayers;if(c)return c;c=this._serializedLayers={};const p=Object.keys(this._layers);for(const v of p){const k=this._layers[v];k.type!=="custom"&&(c[v]=k.serialize())}return c}hasTransitions(){var c,p,v;if(!((c=this.light)===null||c===void 0)&&c.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((v=this.projection)===null||v===void 0)&&v.hasTransition())return!0;for(const k in this.tileManagers)if(this.tileManagers[k].hasTransition())return!0;for(const k in this._layers)if(this._layers[k].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const p=this._changed;if(p){const k=Object.keys(this._updatedLayers),P=Object.keys(this._removedLayers);(k.length||P.length)&&this._updateWorkerLayers(k,P);for(const N in this._updatedSources){const H=this._updatedSources[N];if(H==="reload")this._reloadSource(N);else{if(H!=="clear")throw new Error(`Invalid action ${H}`);this._clearSource(N)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const N in this._updatedPaintProps)this._layers[N].updateTransitions(c);this.light.updateTransitions(c),this.sky.updateTransitions(c),this._resetUpdates()}const v={};for(const k in this.tileManagers){const P=this.tileManagers[k];v[k]=P.used,P.used=!1}for(const k of this._order){const P=this._layers[k];P.recalculate(c,this._availableImages),!P.isHidden(c.zoom)&&P.source&&(this.tileManagers[P.source].used=!0)}for(const k in v){const P=this.tileManagers[k];!!v[k]!=!!P.used&&P.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:k}))}this.light.recalculate(c),this.sky.recalculate(c),this.projection.recalculate(c),this.z=c.zoom,p&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const p in this.tileManagers)this.tileManagers[p].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(c,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(c,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(c,p={}){var v;this._checkLoaded();const k=this.serialize();if(c=p.transformStyle?p.transformStyle(k,c):c,((v=p.validate)===null||v===void 0||v)&&xl(this,s.C(c)))return!1;(c=s.bV(c)).layers=s.bS(c.layers);const P=s.bW(k,c),N=this._getOperationsToPerform(P);if(N.unimplemented.length>0)throw new Error(`Unimplemented: ${N.unimplemented.join(", ")}.`);if(N.operations.length===0)return!1;for(const H of N.operations)H();return this.stylesheet=c,this._serializedLayers=null,!0}_getOperationsToPerform(c){const p=[],v=[];for(const k of c)switch(k.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push((()=>this.addLayer.apply(this,k.args)));break;case"removeLayer":p.push((()=>this.removeLayer.apply(this,k.args)));break;case"setPaintProperty":p.push((()=>this.setPaintProperty.apply(this,k.args)));break;case"setLayoutProperty":p.push((()=>this.setLayoutProperty.apply(this,k.args)));break;case"setFilter":p.push((()=>this.setFilter.apply(this,k.args)));break;case"addSource":p.push((()=>this.addSource.apply(this,k.args)));break;case"removeSource":p.push((()=>this.removeSource.apply(this,k.args)));break;case"setLayerZoomRange":p.push((()=>this.setLayerZoomRange.apply(this,k.args)));break;case"setLight":p.push((()=>this.setLight.apply(this,k.args)));break;case"setGeoJSONSourceData":p.push((()=>this.setGeoJSONSourceData.apply(this,k.args)));break;case"setGlyphs":p.push((()=>this.setGlyphs.apply(this,k.args)));break;case"setSprite":p.push((()=>this.setSprite.apply(this,k.args)));break;case"setTerrain":p.push((()=>this.map.setTerrain.apply(this,k.args)));break;case"setSky":p.push((()=>this.setSky.apply(this,k.args)));break;case"setProjection":this.setProjection.apply(this,k.args);break;case"setGlobalState":p.push((()=>this.setGlobalState.apply(this,k.args)));break;case"setTransition":p.push((()=>{}));break;default:v.push(k.command)}return{operations:p,unimplemented:v}}addImage(c,p){if(this.getImage(c))return this.fire(new s.k(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,p),this._afterImageUpdated(c)}updateImage(c,p){this.imageManager.updateImage(c,p)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new s.k(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,p,v={}){if(this._checkLoaded(),this.tileManagers[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(s.C.source,`sources.${c}`,p,null,v))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const k=this.tileManagers[c]=new ii(c,p,this.dispatcher);k.style=this,k.setEventedParent(this,(()=>({isSourceLoaded:k.loaded(),source:k.serialize(),sourceId:c}))),k.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.tileManagers[c]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===c)return this.fire(new s.k(new Error(`Source "${c}" cannot be removed while layer "${v}" is using it.`)));const p=this.tileManagers[c];delete this.tileManagers[c],delete this._updatedSources[c],p.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,p){if(this._checkLoaded(),this.tileManagers[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const v=this.tileManagers[c].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(p),this._changed=!0}getSource(c){return this.tileManagers[c]&&this.tileManagers[c].getSource()}addLayer(c,p,v={}){this._checkLoaded();const k=c.id;if(this.getLayer(k))return void this.fire(new s.k(new Error(`Layer "${k}" already exists on this map.`)));let P;if(c.type==="custom"){if(xl(this,s.bX(c)))return;P=s.bT(c,this._globalState)}else{if("source"in c&&typeof c.source=="object"&&(this.addSource(k,c.source),c=s.bV(c),c=s.e(c,{source:k})),this._validate(s.C.layer,`layers.${k}`,c,{arrayIndex:-1},v))return;P=s.bT(c,this._globalState),this._validateLayer(P),P.setEventedParent(this,{layer:{id:k}})}const N=p?this._order.indexOf(p):this._order.length;if(p&&N===-1)this.fire(new s.k(new Error(`Cannot add layer "${k}" before non-existing layer "${p}".`)));else{if(this._order.splice(N,0,k),this._layerOrderChanged=!0,this._layers[k]=P,this._removedLayers[k]&&P.source&&P.type!=="custom"){const H=this._removedLayers[k];delete this._removedLayers[k],H.type!==P.type?this._updatedSources[P.source]="clear":(this._updatedSources[P.source]="reload",this.tileManagers[P.source].pause())}this._updateLayer(P),P.onAdd&&P.onAdd(this.map)}}moveLayer(c,p){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new s.k(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===p)return;const v=this._order.indexOf(c);this._order.splice(v,1);const k=p?this._order.indexOf(p):this._order.length;p&&k===-1?this.fire(new s.k(new Error(`Cannot move layer "${c}" before non-existing layer "${p}".`))):(this._order.splice(k,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const p=this._layers[c];if(!p)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${c}".`)));p.setEventedParent(null);const v=this._order.indexOf(c);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=p,delete this._layers[c],this._serializedLayers&&delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],p.onRemove&&p.onRemove(this.map)}getLayer(c){return this._layers[c]}getLayersOrder(){return[...this._order]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,p,v){this._checkLoaded();const k=this.getLayer(c);k?k.minzoom===p&&k.maxzoom===v||(p!=null&&(k.minzoom=p),v!=null&&(k.maxzoom=v),this._updateLayer(k)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,p,v={}){this._checkLoaded();const k=this.getLayer(c);if(k){if(!s.bR(k.filter,p))return p==null?(k.setFilter(void 0),void this._updateLayer(k)):void(this._validate(s.C.filter,`layers.${k.id}.filter`,p,null,v)||(k.setFilter(s.bV(p)),this._updateLayer(k)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return s.bV(this.getLayer(c).filter)}setLayoutProperty(c,p,v,k={}){this._checkLoaded();const P=this.getLayer(c);P?s.bR(P.getLayoutProperty(p),v)||(P.setLayoutProperty(p,v,k),this._updateLayer(P)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,p){const v=this.getLayer(c);if(v)return v.getLayoutProperty(p);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,p,v,k={}){this._checkLoaded();const P=this.getLayer(c);P?s.bR(P.getPaintProperty(p),v)||this._updatePaintProperty(P,p,v,k):this.fire(new s.k(new Error(`Cannot style non-existing layer "${c}".`)))}_updatePaintProperty(c,p,v,k={}){c.setPaintProperty(p,v,k)&&this._updateLayer(c),s.bU(c)&&p==="raster-fade-duration"&&this.tileManagers[c.source].setRasterFadeDuration(v),this._changed=!0,this._updatedPaintProps[c.id]=!0,this._serializedLayers=null}getPaintProperty(c,p){return this.getLayer(c).getPaintProperty(p)}setFeatureState(c,p){this._checkLoaded();const v=c.source,k=c.sourceLayer,P=this.tileManagers[v];if(P===void 0)return void this.fire(new s.k(new Error(`The source '${v}' does not exist in the map's style.`)));const N=P.getSource().type;N==="geojson"&&k?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):N!=="vector"||k?(c.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),P.setFeatureState(k,c.id,p)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,p){this._checkLoaded();const v=c.source,k=this.tileManagers[v];if(k===void 0)return void this.fire(new s.k(new Error(`The source '${v}' does not exist in the map's style.`)));const P=k.getSource().type,N=P==="vector"?c.sourceLayer:void 0;P!=="vector"||N?p&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(N,c.id,p):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const p=c.source,v=c.sourceLayer,k=this.tileManagers[p];if(k!==void 0)return k.getSource().type!=="vector"||v?(c.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),k.getFeatureState(v,c.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const c=s.bY(this.tileManagers,(P=>P.serialize())),p=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,k=this.stylesheet;return s.bZ({version:k.version,name:k.name,metadata:k.metadata,light:k.light,sky:k.sky,center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch,sprite:k.sprite,glyphs:k.glyphs,transition:k.transition,projection:k.projection,sources:c,layers:p,terrain:v},(P=>P!==void 0))}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.tileManagers[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.tileManagers[c.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(c){const p=N=>this._layers[N].type==="fill-extrusion",v={},k=[];for(let N=this._order.length-1;N>=0;N--){const H=this._order[N];if(p(H)){v[H]=N;for(const Y of c){const Q=Y[H];if(Q)for(const ne of Q)k.push(ne)}}}k.sort(((N,H)=>H.intersectionZ-N.intersectionZ));const P=[];for(let N=this._order.length-1;N>=0;N--){const H=this._order[N];if(p(H))for(let Y=k.length-1;Y>=0;Y--){const Q=k[Y].feature;if(v[Q.layer.id]<N)break;P.push(Q),k.pop()}else for(const Y of c){const Q=Y[H];if(Q)for(const ne of Q)P.push(ne.feature)}}return P}queryRenderedFeatures(c,p,v){p&&p.filter&&this._validate(s.C.filter,"queryRenderedFeatures.filter",p.filter,null,p);const k={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const Q of p.layers){const ne=this._layers[Q];if(!ne)return this.fire(new s.k(new Error(`The layer '${Q}' does not exist in the map's style and cannot be queried for features.`))),[];k[ne.source]=!0}}const P=[];p.availableImages=this._availableImages;const N=this._serializedAllLayers(),H=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,Y=Object.assign(Object.assign({},p),{layers:H,globalState:this._globalState});for(const Q in this.tileManagers)p.layers&&!k[Q]||P.push(Ii(this.tileManagers[Q],this._layers,N,c,Y,v,this.map.terrain?(ne,he,ue)=>this.map.terrain.getElevation(ne,he,ue):void 0));return this.placement&&P.push((function(Q,ne,he,ue,_e,Ee,Ne){const Ue={},je=Ee.queryRenderedSymbols(ue),et=[];for(const lt of Object.keys(je).map(Number))et.push(Ne[lt]);et.sort(Qi);for(const lt of et){const Je=lt.featureIndex.lookupSymbolFeatures(je[lt.bucketInstanceId],ne,lt.bucketIndex,lt.sourceLayerIndex,{filterSpec:_e.filter,globalState:_e.globalState},_e.layers,_e.availableImages,Q);for(const st in Je){const ft=Ue[st]=Ue[st]||[],at=Je[st];at.sort(((kt,Yt)=>{const Ft=lt.featureSortOrder;if(Ft){const jt=Ft.indexOf(kt.featureIndex);return Ft.indexOf(Yt.featureIndex)-jt}return Yt.featureIndex-kt.featureIndex}));for(const kt of at)ft.push(kt)}}return(function(lt,Je,st){for(const ft in lt)for(const at of lt[ft])rn(at,st[Je[ft].source]);return lt})(Ue,Q,he)})(this._layers,N,this.tileManagers,c,Y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(P)}querySourceFeatures(c,p){p?.filter&&this._validate(s.C.filter,"querySourceFeatures.filter",p.filter,null,p);const v=this.tileManagers[c];return v?(function(k,P){const N=k.getRenderableIds().map((Q=>k.getTileByID(Q))),H=[],Y={};for(let Q=0;Q<N.length;Q++){const ne=N[Q],he=ne.tileID.canonical.key;Y[he]||(Y[he]=!0,ne.querySourceFeatures(H,P))}return H})(v,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(c,p={}){this._checkLoaded();const v=this.light.getLight();let k=!1;for(const N in c)if(!s.bR(c[N],v[N])){k=!0;break}if(!k)return;const P={now:D(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,p),this.light.updateTransitions(P)}getProjection(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.projection}setProjection(c){if(this._checkLoaded(),this.projection){if(this.projection.name===c.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=c,this._setProjectionInternal(c.type)}getSky(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.sky}setSky(c,p={}){this._checkLoaded();const v=this.getSky();let k=!1;if(!c&&!v)return;if(c&&!v)k=!0;else if(!c&&v)k=!0;else for(const N in c)if(!s.bR(c[N],v[N])){k=!0;break}if(!k)return;const P={now:D(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=c,this.sky.setSky(c,p),this.sky.updateTransitions(P)}_setProjectionInternal(c){const p=(function(v,k){const P={constrainOverride:k};if(Array.isArray(v)){const N=new Fo({type:v});return{projection:N,transform:new _l(P),cameraHelper:new Yu(N)}}switch(v){case"mercator":return{projection:new Me,transform:new cn(P),cameraHelper:new aa};case"globe":{const N=new Fo({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:N,transform:new _l(P),cameraHelper:new Yu(N)}}case"vertical-perspective":return{projection:new Aa,transform:new As(P),cameraHelper:new Ir};default:return s.w(`Unknown projection name: ${v}. Falling back to mercator projection.`),{projection:new Me,transform:new cn(P),cameraHelper:new aa}}})(c,this.map.transformConstrain);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const v in this.tileManagers)this.tileManagers[v].reload()}_validate(c,p,v,k,P={}){return(!P||P.validate!==!1)&&xl(this,c.call(s.C,s.e({key:p,style:this.serialize(),value:v,styleSpec:s.u},k)))}_remove(c=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),yt().off(tt,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.tileManagers){const v=this.tileManagers[p];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),c&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(c)}_clearSource(c){this.tileManagers[c].clearTiles()}_reloadSource(c){this.tileManagers[c].resume(),this.tileManagers[c].reload()}_updateSources(c){for(const p in this.tileManagers)this.tileManagers[p].update(c,this.map.terrain)}_generateCollisionBoxes(){for(const c in this.tileManagers)this._reloadSource(c)}_updatePlacement(c,p,v,k,P=!1){let N=!1,H=!1;const Y={};for(const Q of this._order){const ne=this._layers[Q];if(ne.type!=="symbol")continue;if(!Y[ne.source]){const ue=this.tileManagers[ne.source];Y[ne.source]=ue.getRenderableIds(!0).map((_e=>ue.getTileByID(_e))).sort(((_e,Ee)=>Ee.tileID.overscaledZ-_e.tileID.overscaledZ||(_e.tileID.isLessThan(Ee.tileID)?-1:1)))}const he=this.crossTileSymbolIndex.addLayer(ne,Y[ne.source],c.center.lng);N=N||he}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((P=P||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D(),c.zoom))&&(this.pauseablePlacement=new vr(c,this.map.terrain,this._order,P,p,v,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Y),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D()),H=!0),N&&this.pauseablePlacement.placement.setStale()),H||N)for(const Q of this._order){const ne=this._layers[Q];ne.type==="symbol"&&this.placement.updateLayerOpacities(ne,Y[ne.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D())}_releaseSymbolFadeTiles(){for(const c in this.tileManagers)this.tileManagers[c].releaseSymbolFadeTiles()}getImages(c,p){return s._(this,void 0,void 0,(function*(){const v=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const k=this.tileManagers[p.source];return k&&k.setDependencies(p.tileID.key,p.type,p.icons),v}))}getGlyphs(c,p){return s._(this,void 0,void 0,(function*(){const v=yield this.glyphManager.getGlyphs(p.stacks),k=this.tileManagers[p.source];return k&&k.setDependencies(p.tileID.key,p.type,[""]),v}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(c,p={}){this._checkLoaded(),c&&this._validate(s.C.glyphs,"glyphs",c,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=c,this.glyphManager.entries={},this.glyphManager.setURL(c))}getDashes(c,p){return s._(this,void 0,void 0,(function*(){const v={};for(const[k,P]of Object.entries(p.dashes))v[k]=this.lineAtlas.getDash(P.dasharray,P.round);return v}))}addSprite(c,p,v={},k){this._checkLoaded();const P=[{id:c,url:p}],N=[...ae(this.stylesheet.sprite),...P];this._validate(s.C.sprite,"sprite",N,null,v)||(this.stylesheet.sprite=N,this._loadSprite(P,!0,k))}removeSprite(c){this._checkLoaded();const p=ae(this.stylesheet.sprite);if(p.find((v=>v.id===c))){if(this._spritesImagesIds[c])for(const v of this._spritesImagesIds[c])this.imageManager.removeImage(v),this._changedImages[v]=!0;p.splice(p.findIndex((v=>v.id===c)),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[c],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${c}" doesn't exists on this map.`)))}getSprite(){return ae(this.stylesheet.sprite)}setSprite(c,p={},v){this._checkLoaded(),c&&this._validate(s.C.sprite,"sprite",c,null,p)||(this.stylesheet.sprite=c,c?this._loadSprite(c,!0,v):(this._unloadSprite(),v&&v(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const c in this.tileManagers){const p=this.tileManagers[c];p.setEventedParent(null),p.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const c in this._layers){const p=this._layers[c];p.setEventedParent(null),p.onRemove&&p.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var cu=s.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Nc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,p,v,k,P,N,H,Y,Q){this.context=c;let ne=this.boundPaintVertexBuffers.length!==k.length;for(let he=0;!ne&&he<k.length;he++)this.boundPaintVertexBuffers[he]!==k[he]&&(ne=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==v||ne||this.boundIndexBuffer!==P||this.boundVertexOffset!==N||this.boundDynamicVertexBuffer!==H||this.boundDynamicVertexBuffer2!==Y||this.boundDynamicVertexBuffer3!==Q?this.freshBind(p,v,k,P,N,H,Y,Q):(c.bindVertexArray.set(this.vao),H&&H.bind(),P&&P.dynamicDraw&&P.bind(),Y&&Y.bind(),Q&&Q.bind())}freshBind(c,p,v,k,P,N,H,Y){const Q=c.numAttributes,ne=this.context,he=ne.gl;this.vao&&this.destroy(),this.vao=ne.createVertexArray(),ne.bindVertexArray.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=k,this.boundVertexOffset=P,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=H,this.boundDynamicVertexBuffer3=Y,p.enableAttributes(he,c);for(const ue of v)ue.enableAttributes(he,c);N&&N.enableAttributes(he,c),H&&H.enableAttributes(he,c),Y&&Y.enableAttributes(he,c),p.bind(),p.setVertexAttribPointers(he,c,P);for(const ue of v)ue.bind(),ue.setVertexAttribPointers(he,c,P);N&&(N.bind(),N.setVertexAttribPointers(he,c,P)),k&&k.bind(),H&&(H.bind(),H.setVertexAttribPointers(he,c,P)),Y&&(Y.bind(),Y.setVertexAttribPointers(he,c,P)),ne.currentNumAttributes=Q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Bc=(I,c,p,v,k)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:c,u_fog_color:p?p.properties.get("fog-color"):s.bp.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:k?0:p?p.calculateFogBlendOpacity(v):0,u_horizon_color:p?p.properties.get("horizon-color"):s.bp.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:k?1:0}),gc={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Co(I){const c=[];for(let p=0;p<I.length;p++){if(I[p]===null)continue;const v=I[p].split(" ");c.push(v.pop())}return c}class No{constructor(c,p,v,k,P,N,H,Y,Q=[]){const ne=c.gl;this.program=ne.createProgram();const he=Co(p.staticAttributes),ue=v?v.getBinderAttributes():[],_e=he.concat(ue),Ee=ea.prelude.staticUniforms?Co(ea.prelude.staticUniforms):[],Ne=H.staticUniforms?Co(H.staticUniforms):[],Ue=p.staticUniforms?Co(p.staticUniforms):[],je=v?v.getBinderUniforms():[],et=Ee.concat(Ne).concat(Ue).concat(je),lt=[];for(const Ft of et)lt.indexOf(Ft)<0&&lt.push(Ft);const Je=v?v.defines():[];va(ne)&&Je.unshift("#version 300 es"),P&&Je.push("#define OVERDRAW_INSPECTOR;"),N&&Je.push("#define TERRAIN3D;"),Y&&Je.push(Y),Q&&Je.push(...Q);let st=Je.concat(ea.prelude.fragmentSource,H.fragmentSource,p.fragmentSource).join(`
`),ft=Je.concat(ea.prelude.vertexSource,H.vertexSource,p.vertexSource).join(`
`);va(ne)||(st=(function(Ft){return Ft.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(st),ft=(function(Ft){return Ft.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ft));const at=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())return void(this.failedToCreate=!0);if(ne.shaderSource(at,st),ne.compileShader(at),!ne.getShaderParameter(at,ne.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ne.getShaderInfoLog(at)}`);ne.attachShader(this.program,at);const kt=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())return void(this.failedToCreate=!0);if(ne.shaderSource(kt,ft),ne.compileShader(kt),!ne.getShaderParameter(kt,ne.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ne.getShaderInfoLog(kt)}`);ne.attachShader(this.program,kt),this.attributes={};const Yt={};this.numAttributes=_e.length;for(let Ft=0;Ft<this.numAttributes;Ft++)_e[Ft]&&(ne.bindAttribLocation(this.program,Ft,_e[Ft]),this.attributes[_e[Ft]]=Ft);if(ne.linkProgram(this.program),!ne.getProgramParameter(this.program,ne.LINK_STATUS))throw new Error(`Program failed to link: ${ne.getProgramInfoLog(this.program)}`);ne.deleteShader(kt),ne.deleteShader(at);for(let Ft=0;Ft<lt.length;Ft++){const jt=lt[Ft];if(jt&&!Yt[jt]){const Vt=ne.getUniformLocation(this.program,jt);Vt&&(Yt[jt]=Vt)}}this.fixedUniforms=k(c,Yt),this.terrainUniforms=((Ft,jt)=>({u_depth:new s.b_(Ft,jt.u_depth),u_terrain:new s.b_(Ft,jt.u_terrain),u_terrain_dim:new s.bq(Ft,jt.u_terrain_dim),u_terrain_matrix:new s.c0(Ft,jt.u_terrain_matrix),u_terrain_unpack:new s.c1(Ft,jt.u_terrain_unpack),u_terrain_exaggeration:new s.bq(Ft,jt.u_terrain_exaggeration)}))(c,Yt),this.projectionUniforms=((Ft,jt)=>({u_projection_matrix:new s.c0(Ft,jt.u_projection_matrix),u_projection_tile_mercator_coords:new s.c1(Ft,jt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.c1(Ft,jt.u_projection_clipping_plane),u_projection_transition:new s.bq(Ft,jt.u_projection_transition),u_projection_fallback_matrix:new s.c0(Ft,jt.u_projection_fallback_matrix)}))(c,Yt),this.binderUniforms=v?v.getUniforms(c,Yt):[]}draw(c,p,v,k,P,N,H,Y,Q,ne,he,ue,_e,Ee,Ne,Ue,je,et,lt){const Je=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(v),c.setStencilMode(k),c.setColorMode(P),c.setCullFace(N),Y){c.activeTexture.set(Je.TEXTURE2),Je.bindTexture(Je.TEXTURE_2D,Y.depthTexture),c.activeTexture.set(Je.TEXTURE3),Je.bindTexture(Je.TEXTURE_2D,Y.texture);for(const ft in this.terrainUniforms)this.terrainUniforms[ft].set(Y[ft])}if(Q)for(const ft in Q)this.projectionUniforms[gc[ft]].set(Q[ft]);if(H)for(const ft in this.fixedUniforms)this.fixedUniforms[ft].set(H[ft]);Ue&&Ue.setUniforms(c,this.binderUniforms,Ee,{zoom:Ne});let st=0;switch(p){case Je.LINES:st=2;break;case Je.TRIANGLES:st=3;break;case Je.LINE_STRIP:st=1}for(const ft of _e.get()){const at=ft.vaos||(ft.vaos={});(at[ne]||(at[ne]=new Nc)).bind(c,this,he,Ue?Ue.getPaintVertexBuffers():[],ue,ft.vertexOffset,je,et,lt),Je.drawElements(p,ft.primitiveLength*st,Je.UNSIGNED_SHORT,ft.primitiveOffset*st*2)}}}function Ts(I,c,p){const v=1/s.aN(p,1,c.transform.tileZoom),k=Math.pow(2,p.tileID.overscaledZ),P=p.tileSize*Math.pow(2,c.transform.tileZoom)/k,N=P*(p.tileID.canonical.x+p.tileID.wrap*k),H=P*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[v,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[N>>16,H>>16],u_pixel_coord_lower:[65535&N,65535&H]}}const uu=(I,c,p,v)=>{const k=I.style.light,P=k.properties.get("position"),N=[P.x,P.y,P.z],H=s.c4();k.properties.get("anchor")==="viewport"&&s.c5(H,I.transform.bearingInRadians),s.c6(N,N,H);const Y=I.transform.transformLightDirection(N),Q=k.properties.get("color");return{u_lightpos:N,u_lightpos_globe:Y,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[Q.r,Q.g,Q.b],u_vertical_gradient:+c,u_opacity:p,u_fill_translate:v}},Xs=(I,c,p,v,k,P,N)=>s.e(uu(I,c,p,v),Ts(P,I,N),{u_height_factor:-Math.pow(2,k.overscaledZ)/N.tileSize/8}),hu=(I,c,p,v)=>s.e(Ts(c,I,p),{u_fill_translate:v}),du=(I,c)=>({u_world:I,u_fill_translate:c}),jh=(I,c,p,v,k)=>s.e(hu(I,c,p,k),{u_world:v}),qu=(I,c,p,v,k)=>{const P=I.transform;let N,H,Y=0;if(p.paint.get("circle-pitch-alignment")==="map"){const Q=s.aN(c,1,P.zoom);N=!0,H=[Q,Q],Y=Q/(s.a5*Math.pow(2,c.tileID.overscaledZ))*2*Math.PI*k}else N=!1,H=P.pixelsToGLUnits;return{u_camera_to_center_distance:P.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+N,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:H,u_globe_extrude_scale:Y,u_translate:v}},gs=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),Vh=I=>({u_viewport_size:[I.width,I.height]}),mc=(I,c=1)=>({u_color:I,u_overlay:0,u_overlay_scale:c}),Ao=(I,c,p,v)=>{const k=s.aN(I,1,c)/(s.a5*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*v;return{u_extrude_scale:s.aN(I,1,c),u_intensity:p,u_globe_extrude_scale:k}},pa=(I,c,p,v)=>{const k=s.N();s.c7(k,0,I.width,I.height,0,0,1);const P=I.context.gl;return{u_matrix:k,u_world:[P.drawingBufferWidth,P.drawingBufferHeight],u_image:p,u_color_ramp:v,u_opacity:c.paint.get("heatmap-opacity")}},Vl=(I,c,p)=>{const v=p.paint.get("hillshade-accent-color");let k;switch(p.paint.get("hillshade-method")){case"basic":k=4;break;case"combined":k=1;break;case"igor":k=2;break;case"multidirectional":k=3;break;default:k=0}const P=p.getIlluminationProperties();for(let N=0;N<P.directionRadians.length;N++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(P.directionRadians[N]+=I.transform.bearingInRadians);return{u_image:0,u_latrange:g(0,c.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:P.altitudeRadians,u_azimuths:P.directionRadians,u_accent:v,u_method:k,u_highlights:P.highlightColor,u_shadows:P.shadowColor}},Se=(I,c)=>{const p=c.stride,v=s.N();return s.c7(v,0,s.a5,-s.a5,0,0,1),s.O(v,v,[0,-s.a5,0]),{u_matrix:v,u_image:1,u_dimension:[p,p],u_zoom:I.overscaledZ,u_unpack:c.getUnpackVector()}};function g(I,c){const p=Math.pow(2,c.canonical.z),v=c.canonical.y;return[new s.a9(0,v/p).toLngLat().lat,new s.a9(0,(v+1)/p).toLngLat().lat]}const _=(I,c,p=0)=>({u_image:0,u_unpack:c.getUnpackVector(),u_dimension:[c.stride,c.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:I.paint.get("color-relief-opacity")}),w=(I,c,p,v)=>{const k=I.transform;return{u_translation:K(I,c,p),u_ratio:v/s.aN(c,1,k.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},T=(I,c,p,v,k)=>s.e(w(I,c,p,v),{u_image:0,u_image_height:k}),M=(I,c,p,v,k)=>{const P=I.transform,N=W(c,P);return{u_translation:K(I,c,p),u_texsize:c.imageAtlasTexture.size,u_ratio:v/s.aN(c,1,P.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[N,k.fromScale,k.toScale],u_fade:k.t,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},O=(I,c,p,v,k)=>{const P=W(c,I.transform);return s.e(w(I,c,p,v),{u_tileratio:P,u_crossfade_from:k.fromScale,u_crossfade_to:k.toScale,u_image:0,u_mix:k.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})},V=(I,c,p,v,k,P)=>{const N=W(c,I.transform);return s.e(w(I,c,p,v),{u_image:0,u_image_height:P,u_tileratio:N,u_crossfade_from:k.fromScale,u_crossfade_to:k.toScale,u_image_dash:1,u_mix:k.t,u_lineatlas_width:I.lineAtlas.width,u_lineatlas_height:I.lineAtlas.height})};function W(I,c){return 1/s.aN(I,1,c.tileZoom)}function K(I,c,p){return s.aO(I.transform,c,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const de=(I,c,p,v,k)=>{return{u_tl_parent:I,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(N=v.paint.get("raster-saturation"),N>0?1-1/(1.001-N):-N),u_contrast_factor:(P=v.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:ke(v.paint.get("raster-hue-rotate")),u_coords_top:[k[0].x,k[0].y,k[1].x,k[1].y],u_coords_bottom:[k[3].x,k[3].y,k[2].x,k[2].y]};var P,N};function ke(I){I*=Math.PI/180;const c=Math.sin(I),p=Math.cos(I);return[(2*p+1)/3,(-Math.sqrt(3)*c-p+1)/3,(Math.sqrt(3)*c-p+1)/3]}const Pe=(I,c,p,v,k,P,N,H,Y,Q,ne,he,ue)=>{const _e=N.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:_e.cameraToCenterDistance,u_pitch:_e.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:_e.width/_e.height,u_fade_change:N.options.fadeDuration?N.symbolFadeChange:1,u_label_plane_matrix:H,u_coord_matrix:Y,u_is_text:+ne,u_pitch_with_map:+v,u_is_along_line:k,u_is_variable_anchor:P,u_texsize:he,u_texture:0,u_translation:Q,u_pitched_scale:ue}},Ze=(I,c,p,v,k,P,N,H,Y,Q,ne,he,ue,_e)=>{const Ee=N.transform;return s.e(Pe(I,c,p,v,k,P,N,H,Y,Q,ne,he,_e),{u_gamma_scale:v?Math.cos(Ee.pitch*Math.PI/180)*Ee.cameraToCenterDistance:1,u_device_pixel_ratio:N.pixelRatio,u_is_halo:1})},mt=(I,c,p,v,k,P,N,H,Y,Q,ne,he,ue)=>s.e(Ze(I,c,p,v,k,P,N,H,Y,Q,!0,ne,0,ue),{u_texsize_icon:he,u_texture_icon:1}),vt=(I,c)=>({u_opacity:I,u_color:c}),zt=(I,c,p,v,k)=>s.e((function(P,N,H,Y){const Q=H.imageManager.getPattern(P.from.toString()),ne=H.imageManager.getPattern(P.to.toString()),{width:he,height:ue}=H.imageManager.getPixelSize(),_e=Math.pow(2,Y.tileID.overscaledZ),Ee=Y.tileSize*Math.pow(2,H.transform.tileZoom)/_e,Ne=Ee*(Y.tileID.canonical.x+Y.tileID.wrap*_e),Ue=Ee*Y.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:ne.tl,u_pattern_br_b:ne.br,u_texsize:[he,ue],u_mix:N.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:ne.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/s.aN(Y,1,H.transform.tileZoom),u_pixel_coord_upper:[Ne>>16,Ue>>16],u_pixel_coord_lower:[65535&Ne,65535&Ue]}})(p,k,c,v),{u_opacity:I}),Kt=(I,c)=>{},Ri={fillExtrusion:(I,c)=>({u_lightpos:new s.c2(I,c.u_lightpos),u_lightpos_globe:new s.c2(I,c.u_lightpos_globe),u_lightintensity:new s.bq(I,c.u_lightintensity),u_lightcolor:new s.c2(I,c.u_lightcolor),u_vertical_gradient:new s.bq(I,c.u_vertical_gradient),u_opacity:new s.bq(I,c.u_opacity),u_fill_translate:new s.c3(I,c.u_fill_translate)}),fillExtrusionPattern:(I,c)=>({u_lightpos:new s.c2(I,c.u_lightpos),u_lightpos_globe:new s.c2(I,c.u_lightpos_globe),u_lightintensity:new s.bq(I,c.u_lightintensity),u_lightcolor:new s.c2(I,c.u_lightcolor),u_vertical_gradient:new s.bq(I,c.u_vertical_gradient),u_height_factor:new s.bq(I,c.u_height_factor),u_opacity:new s.bq(I,c.u_opacity),u_fill_translate:new s.c3(I,c.u_fill_translate),u_image:new s.b_(I,c.u_image),u_texsize:new s.c3(I,c.u_texsize),u_pixel_coord_upper:new s.c3(I,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(I,c.u_pixel_coord_lower),u_scale:new s.c2(I,c.u_scale),u_fade:new s.bq(I,c.u_fade)}),fill:(I,c)=>({u_fill_translate:new s.c3(I,c.u_fill_translate)}),fillPattern:(I,c)=>({u_image:new s.b_(I,c.u_image),u_texsize:new s.c3(I,c.u_texsize),u_pixel_coord_upper:new s.c3(I,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(I,c.u_pixel_coord_lower),u_scale:new s.c2(I,c.u_scale),u_fade:new s.bq(I,c.u_fade),u_fill_translate:new s.c3(I,c.u_fill_translate)}),fillOutline:(I,c)=>({u_world:new s.c3(I,c.u_world),u_fill_translate:new s.c3(I,c.u_fill_translate)}),fillOutlinePattern:(I,c)=>({u_world:new s.c3(I,c.u_world),u_image:new s.b_(I,c.u_image),u_texsize:new s.c3(I,c.u_texsize),u_pixel_coord_upper:new s.c3(I,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(I,c.u_pixel_coord_lower),u_scale:new s.c2(I,c.u_scale),u_fade:new s.bq(I,c.u_fade),u_fill_translate:new s.c3(I,c.u_fill_translate)}),circle:(I,c)=>({u_camera_to_center_distance:new s.bq(I,c.u_camera_to_center_distance),u_scale_with_map:new s.b_(I,c.u_scale_with_map),u_pitch_with_map:new s.b_(I,c.u_pitch_with_map),u_extrude_scale:new s.c3(I,c.u_extrude_scale),u_device_pixel_ratio:new s.bq(I,c.u_device_pixel_ratio),u_globe_extrude_scale:new s.bq(I,c.u_globe_extrude_scale),u_translate:new s.c3(I,c.u_translate)}),collisionBox:(I,c)=>({u_pixel_extrude_scale:new s.c3(I,c.u_pixel_extrude_scale)}),collisionCircle:(I,c)=>({u_viewport_size:new s.c3(I,c.u_viewport_size)}),debug:(I,c)=>({u_color:new s.b$(I,c.u_color),u_overlay:new s.b_(I,c.u_overlay),u_overlay_scale:new s.bq(I,c.u_overlay_scale)}),depth:Kt,clippingMask:Kt,heatmap:(I,c)=>({u_extrude_scale:new s.bq(I,c.u_extrude_scale),u_intensity:new s.bq(I,c.u_intensity),u_globe_extrude_scale:new s.bq(I,c.u_globe_extrude_scale)}),heatmapTexture:(I,c)=>({u_matrix:new s.c0(I,c.u_matrix),u_world:new s.c3(I,c.u_world),u_image:new s.b_(I,c.u_image),u_color_ramp:new s.b_(I,c.u_color_ramp),u_opacity:new s.bq(I,c.u_opacity)}),hillshade:(I,c)=>({u_image:new s.b_(I,c.u_image),u_latrange:new s.c3(I,c.u_latrange),u_exaggeration:new s.bq(I,c.u_exaggeration),u_altitudes:new s.c9(I,c.u_altitudes),u_azimuths:new s.c9(I,c.u_azimuths),u_accent:new s.b$(I,c.u_accent),u_method:new s.b_(I,c.u_method),u_shadows:new s.c8(I,c.u_shadows),u_highlights:new s.c8(I,c.u_highlights)}),hillshadePrepare:(I,c)=>({u_matrix:new s.c0(I,c.u_matrix),u_image:new s.b_(I,c.u_image),u_dimension:new s.c3(I,c.u_dimension),u_zoom:new s.bq(I,c.u_zoom),u_unpack:new s.c1(I,c.u_unpack)}),colorRelief:(I,c)=>({u_image:new s.b_(I,c.u_image),u_unpack:new s.c1(I,c.u_unpack),u_dimension:new s.c3(I,c.u_dimension),u_elevation_stops:new s.b_(I,c.u_elevation_stops),u_color_stops:new s.b_(I,c.u_color_stops),u_color_ramp_size:new s.b_(I,c.u_color_ramp_size),u_opacity:new s.bq(I,c.u_opacity)}),line:(I,c)=>({u_translation:new s.c3(I,c.u_translation),u_ratio:new s.bq(I,c.u_ratio),u_device_pixel_ratio:new s.bq(I,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(I,c.u_units_to_pixels)}),lineGradient:(I,c)=>({u_translation:new s.c3(I,c.u_translation),u_ratio:new s.bq(I,c.u_ratio),u_device_pixel_ratio:new s.bq(I,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(I,c.u_units_to_pixels),u_image:new s.b_(I,c.u_image),u_image_height:new s.bq(I,c.u_image_height)}),linePattern:(I,c)=>({u_translation:new s.c3(I,c.u_translation),u_texsize:new s.c3(I,c.u_texsize),u_ratio:new s.bq(I,c.u_ratio),u_device_pixel_ratio:new s.bq(I,c.u_device_pixel_ratio),u_image:new s.b_(I,c.u_image),u_units_to_pixels:new s.c3(I,c.u_units_to_pixels),u_scale:new s.c2(I,c.u_scale),u_fade:new s.bq(I,c.u_fade)}),lineSDF:(I,c)=>({u_translation:new s.c3(I,c.u_translation),u_ratio:new s.bq(I,c.u_ratio),u_device_pixel_ratio:new s.bq(I,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(I,c.u_units_to_pixels),u_image:new s.b_(I,c.u_image),u_mix:new s.bq(I,c.u_mix),u_tileratio:new s.bq(I,c.u_tileratio),u_crossfade_from:new s.bq(I,c.u_crossfade_from),u_crossfade_to:new s.bq(I,c.u_crossfade_to),u_lineatlas_width:new s.bq(I,c.u_lineatlas_width),u_lineatlas_height:new s.bq(I,c.u_lineatlas_height)}),lineGradientSDF:(I,c)=>({u_translation:new s.c3(I,c.u_translation),u_ratio:new s.bq(I,c.u_ratio),u_device_pixel_ratio:new s.bq(I,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(I,c.u_units_to_pixels),u_image:new s.b_(I,c.u_image),u_image_height:new s.bq(I,c.u_image_height),u_tileratio:new s.bq(I,c.u_tileratio),u_crossfade_from:new s.bq(I,c.u_crossfade_from),u_crossfade_to:new s.bq(I,c.u_crossfade_to),u_image_dash:new s.b_(I,c.u_image_dash),u_mix:new s.bq(I,c.u_mix),u_lineatlas_width:new s.bq(I,c.u_lineatlas_width),u_lineatlas_height:new s.bq(I,c.u_lineatlas_height)}),raster:(I,c)=>({u_tl_parent:new s.c3(I,c.u_tl_parent),u_scale_parent:new s.bq(I,c.u_scale_parent),u_buffer_scale:new s.bq(I,c.u_buffer_scale),u_fade_t:new s.bq(I,c.u_fade_t),u_opacity:new s.bq(I,c.u_opacity),u_image0:new s.b_(I,c.u_image0),u_image1:new s.b_(I,c.u_image1),u_brightness_low:new s.bq(I,c.u_brightness_low),u_brightness_high:new s.bq(I,c.u_brightness_high),u_saturation_factor:new s.bq(I,c.u_saturation_factor),u_contrast_factor:new s.bq(I,c.u_contrast_factor),u_spin_weights:new s.c2(I,c.u_spin_weights),u_coords_top:new s.c1(I,c.u_coords_top),u_coords_bottom:new s.c1(I,c.u_coords_bottom)}),symbolIcon:(I,c)=>({u_is_size_zoom_constant:new s.b_(I,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(I,c.u_is_size_feature_constant),u_size_t:new s.bq(I,c.u_size_t),u_size:new s.bq(I,c.u_size),u_camera_to_center_distance:new s.bq(I,c.u_camera_to_center_distance),u_pitch:new s.bq(I,c.u_pitch),u_rotate_symbol:new s.b_(I,c.u_rotate_symbol),u_aspect_ratio:new s.bq(I,c.u_aspect_ratio),u_fade_change:new s.bq(I,c.u_fade_change),u_label_plane_matrix:new s.c0(I,c.u_label_plane_matrix),u_coord_matrix:new s.c0(I,c.u_coord_matrix),u_is_text:new s.b_(I,c.u_is_text),u_pitch_with_map:new s.b_(I,c.u_pitch_with_map),u_is_along_line:new s.b_(I,c.u_is_along_line),u_is_variable_anchor:new s.b_(I,c.u_is_variable_anchor),u_texsize:new s.c3(I,c.u_texsize),u_texture:new s.b_(I,c.u_texture),u_translation:new s.c3(I,c.u_translation),u_pitched_scale:new s.bq(I,c.u_pitched_scale)}),symbolSDF:(I,c)=>({u_is_size_zoom_constant:new s.b_(I,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(I,c.u_is_size_feature_constant),u_size_t:new s.bq(I,c.u_size_t),u_size:new s.bq(I,c.u_size),u_camera_to_center_distance:new s.bq(I,c.u_camera_to_center_distance),u_pitch:new s.bq(I,c.u_pitch),u_rotate_symbol:new s.b_(I,c.u_rotate_symbol),u_aspect_ratio:new s.bq(I,c.u_aspect_ratio),u_fade_change:new s.bq(I,c.u_fade_change),u_label_plane_matrix:new s.c0(I,c.u_label_plane_matrix),u_coord_matrix:new s.c0(I,c.u_coord_matrix),u_is_text:new s.b_(I,c.u_is_text),u_pitch_with_map:new s.b_(I,c.u_pitch_with_map),u_is_along_line:new s.b_(I,c.u_is_along_line),u_is_variable_anchor:new s.b_(I,c.u_is_variable_anchor),u_texsize:new s.c3(I,c.u_texsize),u_texture:new s.b_(I,c.u_texture),u_gamma_scale:new s.bq(I,c.u_gamma_scale),u_device_pixel_ratio:new s.bq(I,c.u_device_pixel_ratio),u_is_halo:new s.b_(I,c.u_is_halo),u_translation:new s.c3(I,c.u_translation),u_pitched_scale:new s.bq(I,c.u_pitched_scale)}),symbolTextAndIcon:(I,c)=>({u_is_size_zoom_constant:new s.b_(I,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(I,c.u_is_size_feature_constant),u_size_t:new s.bq(I,c.u_size_t),u_size:new s.bq(I,c.u_size),u_camera_to_center_distance:new s.bq(I,c.u_camera_to_center_distance),u_pitch:new s.bq(I,c.u_pitch),u_rotate_symbol:new s.b_(I,c.u_rotate_symbol),u_aspect_ratio:new s.bq(I,c.u_aspect_ratio),u_fade_change:new s.bq(I,c.u_fade_change),u_label_plane_matrix:new s.c0(I,c.u_label_plane_matrix),u_coord_matrix:new s.c0(I,c.u_coord_matrix),u_is_text:new s.b_(I,c.u_is_text),u_pitch_with_map:new s.b_(I,c.u_pitch_with_map),u_is_along_line:new s.b_(I,c.u_is_along_line),u_is_variable_anchor:new s.b_(I,c.u_is_variable_anchor),u_texsize:new s.c3(I,c.u_texsize),u_texsize_icon:new s.c3(I,c.u_texsize_icon),u_texture:new s.b_(I,c.u_texture),u_texture_icon:new s.b_(I,c.u_texture_icon),u_gamma_scale:new s.bq(I,c.u_gamma_scale),u_device_pixel_ratio:new s.bq(I,c.u_device_pixel_ratio),u_is_halo:new s.b_(I,c.u_is_halo),u_translation:new s.c3(I,c.u_translation),u_pitched_scale:new s.bq(I,c.u_pitched_scale)}),background:(I,c)=>({u_opacity:new s.bq(I,c.u_opacity),u_color:new s.b$(I,c.u_color)}),backgroundPattern:(I,c)=>({u_opacity:new s.bq(I,c.u_opacity),u_image:new s.b_(I,c.u_image),u_pattern_tl_a:new s.c3(I,c.u_pattern_tl_a),u_pattern_br_a:new s.c3(I,c.u_pattern_br_a),u_pattern_tl_b:new s.c3(I,c.u_pattern_tl_b),u_pattern_br_b:new s.c3(I,c.u_pattern_br_b),u_texsize:new s.c3(I,c.u_texsize),u_mix:new s.bq(I,c.u_mix),u_pattern_size_a:new s.c3(I,c.u_pattern_size_a),u_pattern_size_b:new s.c3(I,c.u_pattern_size_b),u_scale_a:new s.bq(I,c.u_scale_a),u_scale_b:new s.bq(I,c.u_scale_b),u_pixel_coord_upper:new s.c3(I,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(I,c.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bq(I,c.u_tile_units_to_pixels)}),terrain:(I,c)=>({u_texture:new s.b_(I,c.u_texture),u_ele_delta:new s.bq(I,c.u_ele_delta),u_fog_matrix:new s.c0(I,c.u_fog_matrix),u_fog_color:new s.b$(I,c.u_fog_color),u_fog_ground_blend:new s.bq(I,c.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bq(I,c.u_fog_ground_blend_opacity),u_horizon_color:new s.b$(I,c.u_horizon_color),u_horizon_fog_blend:new s.bq(I,c.u_horizon_fog_blend),u_is_globe_mode:new s.bq(I,c.u_is_globe_mode)}),terrainDepth:(I,c)=>({u_ele_delta:new s.bq(I,c.u_ele_delta)}),terrainCoords:(I,c)=>({u_texture:new s.b_(I,c.u_texture),u_terrain_coords_id:new s.bq(I,c.u_terrain_coords_id),u_ele_delta:new s.bq(I,c.u_ele_delta)}),projectionErrorMeasurement:(I,c)=>({u_input:new s.bq(I,c.u_input),u_output_expected:new s.bq(I,c.u_output_expected)}),atmosphere:(I,c)=>({u_sun_pos:new s.c2(I,c.u_sun_pos),u_atmosphere_blend:new s.bq(I,c.u_atmosphere_blend),u_globe_position:new s.c2(I,c.u_globe_position),u_globe_radius:new s.bq(I,c.u_globe_radius),u_inv_proj_matrix:new s.c0(I,c.u_inv_proj_matrix)}),sky:(I,c)=>({u_sky_color:new s.b$(I,c.u_sky_color),u_horizon_color:new s.b$(I,c.u_horizon_color),u_horizon:new s.c3(I,c.u_horizon),u_horizon_normal:new s.c3(I,c.u_horizon_normal),u_sky_horizon_blend:new s.bq(I,c.u_sky_horizon_blend),u_sky_blend:new s.bq(I,c.u_sky_blend)})};class zi{constructor(c,p,v){this.context=c;const k=c.gl;this.buffer=k.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ci={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _a{constructor(c,p,v,k){this.length=p.length,this.attributes=v,this.itemSize=p.bytesPerElement,this.dynamicDraw=k,this.context=c;const P=c.gl;this.buffer=P.createBuffer(),c.bindVertexBuffer.set(this.buffer),P.bufferData(P.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,p){for(let v=0;v<this.attributes.length;v++){const k=p.attributes[this.attributes[v].name];k!==void 0&&c.enableVertexAttribArray(k)}}setVertexAttribPointers(c,p,v){for(let k=0;k<this.attributes.length;k++){const P=this.attributes[k],N=p.attributes[P.name];N!==void 0&&c.vertexAttribPointer(N,P.components,c[Ci[P.type]],!1,this.itemSize,P.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class un{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class X extends un{getDefault(){return s.bp.transparent}set(c){const p=this.current;(c.r!==p.r||c.g!==p.g||c.b!==p.b||c.a!==p.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class se extends un{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Ae extends un{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Ve extends un{getDefault(){return[!0,!0,!0,!0]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||c[3]!==p[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class nt extends un{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class ut extends un{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class bt extends un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const p=this.current;(c.func!==p.func||c.ref!==p.ref||c.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class Xt extends un{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class pi extends un{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;c?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=c,this.dirty=!1}}class hn extends un{getDefault(){return[0,1]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class Wn extends un{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;c?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=c,this.dirty=!1}}class wa extends un{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class $r extends un{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;c?p.enable(p.BLEND):p.disable(p.BLEND),this.current=c,this.dirty=!1}}class wr extends un{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Jr extends un{getDefault(){return s.bp.transparent}set(c){const p=this.current;(c.r!==p.r||c.g!==p.g||c.b!==p.b||c.a!==p.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Sa extends un{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Ln extends un{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;c?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=c,this.dirty=!1}}class ra extends un{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class ua extends un{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Na extends un{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class ms extends un{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Qn extends un{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||c[3]!==p[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class To extends un{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class fu extends un{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class pu extends un{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Hl extends un{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class gu extends un{getDefault(){return null}set(c){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Ed extends un{getDefault(){return null}set(c){var p;if(c===this.current&&!this.dirty)return;const v=this.gl;va(v)?v.bindVertexArray(c):(p=v.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(c),this.current=c,this.dirty=!1}}class jc extends un{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Md extends un{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Zu extends un{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Ul extends un{constructor(c,p){super(c),this.context=c,this.parent=p}getDefault(){return null}}class Vc extends Ul{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class mu extends Ul{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class yc extends Ul{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,c),this.current=c,this.dirty=!1}}const yu="Framebuffer is not complete";class Hc{constructor(c,p,v,k,P){this.context=c,this.width=p,this.height=v;const N=c.gl,H=this.framebuffer=N.createFramebuffer();if(this.colorAttachment=new Vc(c,H),k)this.depthAttachment=P?new yc(c,H):new mu(c,H);else if(P)throw new Error("Stencil cannot be set without depth");if(N.checkFramebufferStatus(N.FRAMEBUFFER)!==N.FRAMEBUFFER_COMPLETE)throw new Error(yu)}destroy(){const c=this.context.gl,p=this.colorAttachment.get();if(p&&c.deleteTexture(p),this.depthAttachment){const v=this.depthAttachment.get();v&&c.deleteRenderbuffer(v)}c.deleteFramebuffer(this.framebuffer)}}class _u{constructor(c){var p,v;if(this.gl=c,this.clearColor=new X(this),this.clearDepth=new se(this),this.clearStencil=new Ae(this),this.colorMask=new Ve(this),this.depthMask=new nt(this),this.stencilMask=new ut(this),this.stencilFunc=new bt(this),this.stencilOp=new Xt(this),this.stencilTest=new pi(this),this.depthRange=new hn(this),this.depthTest=new Wn(this),this.depthFunc=new wa(this),this.blend=new $r(this),this.blendFunc=new wr(this),this.blendColor=new Jr(this),this.blendEquation=new Sa(this),this.cullFace=new Ln(this),this.cullFaceSide=new ra(this),this.frontFace=new ua(this),this.program=new Na(this),this.activeTexture=new ms(this),this.viewport=new Qn(this),this.bindFramebuffer=new To(this),this.bindRenderbuffer=new fu(this),this.bindTexture=new pu(this),this.bindVertexBuffer=new Hl(this),this.bindElementBuffer=new gu(this),this.bindVertexArray=new Ed(this),this.pixelStoreUnpack=new jc(this),this.pixelStoreUnpackPremultiplyAlpha=new Md(this),this.pixelStoreUnpackFlipY=new Zu(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),va(c)){this.HALF_FLOAT=c.HALF_FLOAT;const k=c.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=c.RGBA16F)!==null&&p!==void 0?p:k?.RGBA16F_EXT,this.RGB16F=(v=c.RGB16F)!==null&&v!==void 0?v:k?.RGB16F_EXT,c.getExtension("EXT_color_buffer_float")}else{c.getExtension("EXT_color_buffer_half_float"),c.getExtension("OES_texture_half_float_linear");const k=c.getExtension("OES_texture_half_float");this.HALF_FLOAT=k?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,p){return new zi(this,c,p)}createVertexBuffer(c,p,v){return new _a(this,c,p,v)}createRenderbuffer(c,p,v){const k=this.gl,P=k.createRenderbuffer();return this.bindRenderbuffer.set(P),k.renderbufferStorage(k.RENDERBUFFER,c,p,v),this.bindRenderbuffer.set(null),P}createFramebuffer(c,p,v,k){return new Hc(this,c,p,v,k)}clear({color:c,depth:p,stencil:v}){const k=this.gl;let P=0;c&&(P|=k.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(P|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),v!==void 0&&(P|=k.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),k.clear(P)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){s.bR(c.blendFunction,zn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}createVertexArray(){var c;return va(this.gl)?this.gl.createVertexArray():(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.createVertexArrayOES()}deleteVertexArray(c){var p;return va(this.gl)?this.gl.deleteVertexArray(c):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(c)}unbindVAO(){this.bindVertexArray.set(null)}}let vl;function Qo(I,c,p,v,k){const P=I.context,N=I.transform,H=P.gl,Y=I.useProgram("collisionBox"),Q=[];let ne=0,he=0;for(let je=0;je<v.length;je++){const et=v[je],lt=c.getTile(et).getBucket(p);if(!lt)continue;const Je=k?lt.textCollisionBox:lt.iconCollisionBox,st=lt.collisionCircleArray;st.length>0&&(Q.push({circleArray:st,circleOffset:he,coord:et}),ne+=st.length/4,he=ne),Je&&Y.draw(P,H.LINES,an.disabled,ia.disabled,I.colorModeForRenderPass(),Hn.disabled,gs(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(et),N.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,I.transform.zoom,null,null,Je.collisionVertexBuffer)}if(!k||!Q.length)return;const ue=I.useProgram("collisionCircle"),_e=new s.ca;_e.resize(4*ne),_e._trim();let Ee=0;for(const je of Q)for(let et=0;et<je.circleArray.length/4;et++){const lt=4*et,Je=je.circleArray[lt+0],st=je.circleArray[lt+1],ft=je.circleArray[lt+2],at=je.circleArray[lt+3];_e.emplace(Ee++,Je,st,ft,at,0),_e.emplace(Ee++,Je,st,ft,at,1),_e.emplace(Ee++,Je,st,ft,at,2),_e.emplace(Ee++,Je,st,ft,at,3)}(!vl||vl.length<2*ne)&&(vl=(function(je){const et=2*je,lt=new s.cc;lt.resize(et),lt._trim();for(let Je=0;Je<et;Je++){const st=6*Je;lt.uint16[st+0]=4*Je+0,lt.uint16[st+1]=4*Je+1,lt.uint16[st+2]=4*Je+2,lt.uint16[st+3]=4*Je+2,lt.uint16[st+4]=4*Je+3,lt.uint16[st+5]=4*Je+0}return lt})(ne));const Ne=P.createIndexBuffer(vl,!0),Ue=P.createVertexBuffer(_e,s.cb.members,!0);for(const je of Q){const et=Vh(I.transform);ue.draw(P,H.TRIANGLES,an.disabled,ia.disabled,I.colorModeForRenderPass(),Hn.disabled,et,I.style.map.terrain&&I.style.map.terrain.getTerrainData(je.coord),null,p.id,Ue,Ne,s.aX.simpleSegment(0,2*je.circleOffset,je.circleArray.length,je.circleArray.length/2),null,I.transform.zoom,null,null,null)}Ue.destroy(),Ne.destroy()}const Uc=s.ar(new Float32Array(16));function Ku(I,c,p,v,k,P){const{horizontalAlign:N,verticalAlign:H}=s.aS(I);return new s.P((-(N-.5)*c/k+v[0])*P,(-(H-.5)*p/k+v[1])*P)}function bl(I,c,p,v,k,P){const N=c.tileAnchorPoint.add(new s.P(c.translation[0],c.translation[1]));if(c.pitchWithMap){let H=v.mult(P);p||(H=H.rotate(-k));const Y=N.add(H);return Ei(Y.x,Y.y,c.pitchedLabelPlaneMatrix,c.getElevation).point}if(p){const H=nn(c.tileAnchorPoint.x+1,c.tileAnchorPoint.y,c).point.sub(I),Y=Math.atan(H.y/H.x)+(H.x<0?Math.PI:0);return I.add(v.rotate(Y))}return I.add(v)}function xu(I,c,p,v,k,P,N,H,Y,Q,ne,he){const ue=I.text.placedSymbolArray,_e=I.text.dynamicLayoutVertexArray,Ee=I.icon.dynamicLayoutVertexArray,Ne={};_e.clear();for(let Ue=0;Ue<ue.length;Ue++){const je=ue.get(Ue),et=je.hidden||!je.crossTileID||I.allowVerticalPlacement&&!je.placedOrientation?null:v[je.crossTileID];if(et){const lt=new s.P(je.anchorX,je.anchorY),Je={getElevation:he,width:k.width,height:k.height,pitchedLabelPlaneMatrix:P,pitchWithMap:p,transform:k,tileAnchorPoint:lt,translation:Q,unwrappedTileID:ne},st=p?er(lt.x,lt.y,Je):nn(lt.x,lt.y,Je),ft=Vi(k.cameraToCenterDistance,st.signedDistanceFromCamera);let at=s.aA(I.textSizeData,H,je)*ft/s.aM;p&&(at*=I.tilePixelRatio/N);const{width:kt,height:Yt,anchor:Ft,textOffset:jt,textBoxScale:Vt}=et,Mi=Ku(Ft,kt,Yt,jt,Vt,at),Pi=k.getPitchedTextCorrection(lt.x+Q[0],lt.y+Q[1],ne),fi=bl(st.point,Je,c,Mi,-k.bearingInRadians,Pi),ji=I.allowVerticalPlacement&&je.placedOrientation===s.az.vertical?Math.PI/2:0;for(let la=0;la<je.numGlyphs;la++)s.aG(_e,fi,ji);Y&&je.associatedIconIndex>=0&&(Ne[je.associatedIconIndex]={shiftedAnchor:fi,angle:ji})}else bn(je.numGlyphs,_e)}if(Y){Ee.clear();const Ue=I.icon.placedSymbolArray;for(let je=0;je<Ue.length;je++){const et=Ue.get(je);if(et.hidden)bn(et.numGlyphs,Ee);else{const lt=Ne[je];if(lt)for(let Je=0;Je<et.numGlyphs;Je++)s.aG(Ee,lt.shiftedAnchor,lt.angle);else bn(et.numGlyphs,Ee)}}I.icon.dynamicLayoutVertexBuffer.updateData(Ee)}I.text.dynamicLayoutVertexBuffer.updateData(_e)}function $c(I,c,p){return p.iconsInText&&c?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function wl(I,c,p,v,k,P,N,H,Y,Q,ne,he,ue){const _e=I.context,Ee=_e.gl,Ne=I.transform,Ue=H==="map",je=Y==="map",et=H!=="viewport"&&p.layout.get("symbol-placement")!=="point",lt=Ue&&!je&&!et,Je=!p.layout.get("symbol-sort-key").isConstant();let st=!1;const ft=I.getDepthModeForSublayer(0,an.ReadOnly),at=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),kt=[],Yt=Ne.getCircleRadiusCorrection();for(const Ft of v){const jt=c.getTile(Ft),Vt=jt.getBucket(p);if(!Vt)continue;const Mi=k?Vt.text:Vt.icon;if(!Mi||!Mi.segments.get().length||!Mi.hasVisibleVertices)continue;const Pi=Mi.programConfigurations.get(p.id),fi=k||Vt.sdfIcons,ji=k?Vt.textSizeData:Vt.iconSizeData,la=je||Ne.pitch!==0,Ja=I.useProgram($c(fi,k,Vt),Pi),Lr=s.ay(ji,Ne.zoom),fr=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ft);let Fr,pr,ts,Nr,Ys=[0,0],_s=null;if(k)pr=jt.glyphAtlasTexture,ts=Ee.LINEAR,Fr=jt.glyphAtlasTexture.size,Vt.iconsInText&&(Ys=jt.imageAtlasTexture.size,_s=jt.imageAtlasTexture,Nr=la||I.options.rotating||I.options.zooming||ji.kind==="composite"||ji.kind==="camera"?Ee.LINEAR:Ee.NEAREST);else{const kr=p.layout.get("icon-size").constantOr(0)!==1||Vt.iconsNeedLinear;pr=jt.imageAtlasTexture,ts=fi||I.options.rotating||I.options.zooming||kr||la?Ee.LINEAR:Ee.NEAREST,Fr=jt.imageAtlasTexture.size}const us=s.aN(jt,1,I.transform.zoom),io=ki(Ue,I.transform,us),Eu=s.N();s.aB(Eu,io);const qc=gn(je,Ue,I.transform,us),Sc=s.aO(Ne,jt,P,N),Vo=Ne.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!ue,applyTerrainMatrix:!0}),uh=at&&Vt.hasTextData(),jd=p.layout.get("icon-text-fit")!=="none"&&uh&&Vt.hasIconData();if(et){const kr=I.style.map.terrain?(Bs,js)=>I.style.map.terrain.getElevation(Ft,Bs,js):null,gr=p.layout.get("text-rotation-alignment")==="map";on(Vt,I,k,io,Eu,je,Q,gr,Ft.toUnwrapped(),Ne.width,Ne.height,Sc,kr)}const hh=k&&at||jd,Al=et||hh?Uc:je?io:I.transform.clipSpaceToPixelsMatrix,kc=fi&&p.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ql;ql=fi?Vt.iconsInText?mt(ji.kind,Lr,lt,je,et,hh,I,Al,qc,Sc,Fr,Ys,Yt):Ze(ji.kind,Lr,lt,je,et,hh,I,Al,qc,Sc,k,Fr,0,Yt):Pe(ji.kind,Lr,lt,je,et,hh,I,Al,qc,Sc,k,Fr,Yt);const Zl={program:Ja,buffers:Mi,uniformValues:ql,projectionData:Vo,atlasTexture:pr,atlasTextureIcon:_s,atlasInterpolation:ts,atlasInterpolationIcon:Nr,isSDF:fi,hasHalo:kc};if(Je&&Vt.canOverlap){st=!0;const kr=Mi.segments.get();for(const gr of kr)kt.push({segments:new s.aX([gr]),sortKey:gr.sortKey,state:Zl,terrainData:fr})}else kt.push({segments:Mi.segments,sortKey:0,state:Zl,terrainData:fr})}st&&kt.sort(((Ft,jt)=>Ft.sortKey-jt.sortKey));for(const Ft of kt){const jt=Ft.state;if(_e.activeTexture.set(Ee.TEXTURE0),jt.atlasTexture.bind(jt.atlasInterpolation,Ee.CLAMP_TO_EDGE),jt.atlasTextureIcon&&(_e.activeTexture.set(Ee.TEXTURE1),jt.atlasTextureIcon&&jt.atlasTextureIcon.bind(jt.atlasInterpolationIcon,Ee.CLAMP_TO_EDGE)),jt.isSDF){const Vt=jt.uniformValues;jt.hasHalo&&(Vt.u_is_halo=1,Gc(jt.buffers,Ft.segments,p,I,jt.program,ft,ne,he,Vt,jt.projectionData,Ft.terrainData)),Vt.u_is_halo=0}Gc(jt.buffers,Ft.segments,p,I,jt.program,ft,ne,he,jt.uniformValues,jt.projectionData,Ft.terrainData)}}function Gc(I,c,p,v,k,P,N,H,Y,Q,ne){const he=v.context;k.draw(he,he.gl.TRIANGLES,P,N,H,Hn.backCCW,Y,ne,Q,p.id,I.layoutVertexBuffer,I.indexBuffer,c,p.paint,v.transform.zoom,I.programConfigurations.get(p.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function Ju(I,c,p,v,k){const P=I.context,N=P.gl,H=ia.disabled,Y=new zn([N.ONE,N.ONE],s.bp.transparent,[!0,!0,!0,!0]),Q=c.getBucket(p);if(!Q)return;const ne=v.key;let he=p.heatmapFbos.get(ne);he||(he=_c(P,c.tileSize,c.tileSize),p.heatmapFbos.set(ne,he)),P.bindFramebuffer.set(he.framebuffer),P.viewport.set([0,0,c.tileSize,c.tileSize]),P.clear({color:s.bp.transparent});const ue=Q.programConfigurations.get(p.id),_e=I.useProgram("heatmap",ue,!k),Ee=I.transform.getProjectionData({overscaledTileID:c.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ne=I.style.map.terrain.getTerrainData(v);_e.draw(P,N.TRIANGLES,an.disabled,H,Y,Hn.disabled,Ao(c,I.transform.zoom,p.paint.get("heatmap-intensity"),1),Ne,Ee,p.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,p.paint,I.transform.zoom,ue)}function Qu(I,c,p,v,k){const P=I.context,N=P.gl,H=I.transform;P.setColorMode(I.colorModeForRenderPass());const Y=ho(P,c),Q=p.key,ne=c.heatmapFbos.get(Q);if(!ne)return;P.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,ne.colorAttachment.get()),P.activeTexture.set(N.TEXTURE1),Y.bind(N.LINEAR,N.CLAMP_TO_EDGE);const he=H.getProjectionData({overscaledTileID:p,applyTerrainMatrix:k,applyGlobeMatrix:!v});I.useProgram("heatmapTexture").draw(P,N.TRIANGLES,an.disabled,ia.disabled,I.colorModeForRenderPass(),Hn.disabled,pa(I,c,0,1),null,he,c.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,c.paint,H.zoom),ne.destroy(),c.heatmapFbos.delete(Q)}function _c(I,c,p){var v,k;const P=I.gl,N=P.createTexture();P.bindTexture(P.TEXTURE_2D,N),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,P.LINEAR),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,P.LINEAR);const H=(v=I.HALF_FLOAT)!==null&&v!==void 0?v:P.UNSIGNED_BYTE,Y=(k=I.RGBA16F)!==null&&k!==void 0?k:P.RGBA;P.texImage2D(P.TEXTURE_2D,0,Y,c,p,0,P.RGBA,H,null);const Q=I.createFramebuffer(c,p,!1,!1);return Q.colorAttachment.set(N),Q}function ho(I,c){return c.colorRampTexture||(c.colorRampTexture=new s.T(I,c.colorRamp,I.gl.RGBA)),c.colorRampTexture}function xc(I,c,p,v,k,P,N,H){let Y=256;if(k.stepInterpolant){const Q=c.getSource().maxzoom,ne=N.canonical.z===Q?Math.ceil(1<<I.transform.maxZoom-N.canonical.z):1;Y=s.an(s.ce(P.maxLineLength/s.a5*1024*ne),256,p.maxTextureSize)}return H.gradient=s.cf({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Y,image:H.gradient||void 0,clips:P.lineClipsArray}),H.texture?H.texture.update(H.gradient):H.texture=new s.T(p,H.gradient,v.RGBA),H.version=k.gradientVersion,H.texture}function Bo(I,c,p,v,k){I.activeTexture.set(c.TEXTURE0),p.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),v.updatePaintBuffers(k)}function dr(I,c,p,v,k,P){(k||I.lineAtlas.dirty)&&(c.activeTexture.set(p.TEXTURE0),I.lineAtlas.bind(c)),v.updatePaintBuffers(P)}function el(I,c,p,v,k,P,N){const H=P.gradients[k.id];let Y=H.texture;k.gradientVersion!==H.version&&(Y=xc(I,c,p,v,k,P,N,H)),p.activeTexture.set(v.TEXTURE0),Y.bind(k.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}function ys(I,c,p,v,k,P,N,H,Y){const Q=P.gradients[k.id];let ne=Q.texture;k.gradientVersion!==Q.version&&(ne=xc(I,c,p,v,k,P,N,Q)),p.activeTexture.set(v.TEXTURE0),ne.bind(k.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE),p.activeTexture.set(v.TEXTURE1),I.lineAtlas.bind(p),H.updatePaintBuffers(Y)}function vu(I,c,p,v,k){if(!p||!v||!v.imageAtlas)return;const P=v.imageAtlas.patternPositions;let N=P[p.to.toString()],H=P[p.from.toString()];if(!N&&H&&(N=H),!H&&N&&(H=N),!N||!H){const Y=k.getPaintProperty(c);N=P[Y],H=P[Y]}N&&H&&I.setConstantPatternPositions(N,H)}function fo(I,c,p,v,k,P,N,H){const Y=I.context.gl,Q="fill-pattern",ne=p.paint.get(Q),he=ne&&ne.constantOr(1),ue=p.getCrossfadeParameters();let _e,Ee,Ne,Ue,je;const et=I.transform,lt=p.paint.get("fill-translate"),Je=p.paint.get("fill-translate-anchor");N?(Ee=he&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_e=Y.LINES):(Ee=he?"fillPattern":"fill",_e=Y.TRIANGLES);const st=ne.constantOr(null);for(const ft of v){const at=c.getTile(ft);if(he&&!at.patternsLoaded())continue;const kt=at.getBucket(p);if(!kt)continue;const Yt=kt.programConfigurations.get(p.id),Ft=I.useProgram(Ee,Yt),jt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(ft);he&&(I.context.activeTexture.set(Y.TEXTURE0),at.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Yt.updatePaintBuffers(ue)),vu(Yt,Q,st,at,p);const Vt=et.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Mi=s.aO(et,at,lt,Je);if(N){Ue=kt.indexBuffer2,je=kt.segments2;const fi=[Y.drawingBufferWidth,Y.drawingBufferHeight];Ne=Ee==="fillOutlinePattern"&&he?jh(I,ue,at,fi,Mi):du(fi,Mi)}else Ue=kt.indexBuffer,je=kt.segments,Ne=he?hu(I,ue,at,Mi):{u_fill_translate:Mi};const Pi=I.stencilModeForClipping(ft);Ft.draw(I.context,_e,k,Pi,P,Hn.backCCW,Ne,jt,Vt,p.id,kt.layoutVertexBuffer,Ue,je,p.paint,I.transform.zoom,Yt)}}function $l(I,c,p,v,k,P,N,H){const Y=I.context,Q=Y.gl,ne="fill-extrusion-pattern",he=p.paint.get(ne),ue=he.constantOr(1),_e=p.getCrossfadeParameters(),Ee=p.paint.get("fill-extrusion-opacity"),Ne=he.constantOr(null),Ue=I.transform;for(const je of v){const et=c.getTile(je),lt=et.getBucket(p);if(!lt)continue;const Je=I.style.map.terrain&&I.style.map.terrain.getTerrainData(je),st=lt.programConfigurations.get(p.id),ft=I.useProgram(ue?"fillExtrusionPattern":"fillExtrusion",st);ue&&(I.context.activeTexture.set(Q.TEXTURE0),et.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),st.updatePaintBuffers(_e));const at=Ue.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!H,applyTerrainMatrix:!0});vu(st,ne,Ne,et,p);const kt=s.aO(Ue,et,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Yt=p.paint.get("fill-extrusion-vertical-gradient"),Ft=ue?Xs(I,Yt,Ee,kt,je,_e,et):uu(I,Yt,Ee,kt);ft.draw(Y,Y.gl.TRIANGLES,k,P,N,Hn.backCCW,Ft,Je,at,p.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,p.paint,I.transform.zoom,st,I.style.map.terrain&&lt.centroidVertexBuffer)}}function tl(I,c,p,v,k,P,N,H,Y){var Q;const ne=I.style.projection,he=I.context,ue=I.transform,_e=he.gl,Ee=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],Ne=I.useProgram("hillshade",null,!1,Ee),Ue=!I.options.moving;for(const je of v){const et=c.getTile(je),lt=et.fbo;if(!lt)continue;const Je=ne.getMeshFromTileID(he,je.canonical,H,!0,"raster"),st=(Q=I.style.map.terrain)===null||Q===void 0?void 0:Q.getTerrainData(je);he.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,lt.colorAttachment.get());const ft=ue.getProjectionData({overscaledTileID:je,aligned:Ue,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});Ne.draw(he,_e.TRIANGLES,P,k[je.overscaledZ],N,Hn.backCCW,Vl(I,et,p),st,ft,p.id,Je.vertexBuffer,Je.indexBuffer,Je.segments)}}function il(I,c,p,v,k,P,N,H,Y){var Q;const ne=I.style.projection,he=I.context,ue=I.transform,_e=he.gl,Ee=I.useProgram("colorRelief"),Ne=!I.options.moving;let Ue=!0,je=0;for(const et of v){const lt=c.getTile(et),Je=lt.dem;if(Ue){const Ft=_e.getParameter(_e.MAX_TEXTURE_SIZE),{elevationTexture:jt,colorTexture:Vt}=p.getColorRampTextures(he,Ft,Je.getUnpackVector());he.activeTexture.set(_e.TEXTURE1),jt.bind(_e.NEAREST,_e.CLAMP_TO_EDGE),he.activeTexture.set(_e.TEXTURE4),Vt.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),Ue=!1,je=jt.size[0]}if(!Je||!Je.data)continue;const st=Je.stride,ft=Je.getPixels();if(he.activeTexture.set(_e.TEXTURE0),he.pixelStoreUnpackPremultiplyAlpha.set(!1),lt.demTexture=lt.demTexture||I.getTileTexture(st),lt.demTexture){const Ft=lt.demTexture;Ft.update(ft,{premultiply:!1}),Ft.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}else lt.demTexture=new s.T(he,ft,_e.RGBA,{premultiply:!1}),lt.demTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE);const at=ne.getMeshFromTileID(he,et.canonical,H,!0,"raster"),kt=(Q=I.style.map.terrain)===null||Q===void 0?void 0:Q.getTerrainData(et),Yt=ue.getProjectionData({overscaledTileID:et,aligned:Ne,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});Ee.draw(he,_e.TRIANGLES,P,k[et.overscaledZ],N,Hn.backCCW,_(p,lt.dem,je),kt,Yt,p.id,at.vertexBuffer,at.indexBuffer,at.segments)}}const Gl=[new s.P(0,0),new s.P(s.a5,0),new s.P(s.a5,s.a5),new s.P(0,s.a5)];function Wl(I,c,p,v,k,P,N,H,Y=!1,Q=!1){const ne=v[v.length-1].overscaledZ,he=I.context,ue=he.gl,_e=I.useProgram("raster"),Ee=I.transform,Ne=I.style.projection,Ue=I.colorModeForRenderPass(),je=!I.options.moving,et=p.paint.get("raster-opacity"),lt=p.paint.get("raster-resampling"),Je=p.paint.get("raster-fade-duration"),st=!!I.style.map.terrain;for(const ft of v){const at=I.getDepthModeForSublayer(ft.overscaledZ-ne,et===1?an.ReadWrite:an.ReadOnly,ue.LESS),kt=c.getTile(ft),Yt=lt==="nearest"?ue.NEAREST:ue.LINEAR;he.activeTexture.set(ue.TEXTURE0),kt.texture.bind(Yt,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),he.activeTexture.set(ue.TEXTURE1);const{parentTile:Ft,parentScaleBy:jt,parentTopLeft:Vt,fadeValues:Mi}=eh(kt,c,Je,st);kt.fadeOpacity=Mi.tileOpacity,Ft?(Ft.fadeOpacity=Mi.parentTileOpacity,Ft.texture.bind(Yt,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST)):kt.texture.bind(Yt,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),kt.texture.useMipmap&&he.extTextureFilterAnisotropic&&I.transform.pitch>20&&ue.texParameterf(ue.TEXTURE_2D,he.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,he.extTextureFilterAnisotropicMax);const Pi=I.style.map.terrain&&I.style.map.terrain.getTerrainData(ft),fi=Ee.getProjectionData({overscaledTileID:ft,aligned:je,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),ji=de(Vt,jt,Mi.fadeMix,p,H),la=Ne.getMeshFromTileID(he,ft.canonical,P,N,"raster");_e.draw(he,ue.TRIANGLES,at,k?k[ft.overscaledZ]:ia.disabled,Ue,Y?Hn.frontCCW:Hn.backCCW,ji,Pi,fi,p.id,la.vertexBuffer,la.indexBuffer,la.segments)}}function eh(I,c,p,v){const k={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(p===0||v)return k;if(I.fadingParentID){const P=c.getLoadedTile(I.fadingParentID);if(!P)return k;const N=Math.pow(2,P.tileID.overscaledZ-I.tileID.overscaledZ),H=[I.tileID.canonical.x*N%1,I.tileID.canonical.y*N%1],Y=(function(Q,ne,he){const ue=D(),_e=(ue-ne.timeAdded)/he,Ee=Q.fadingDirection===_t.Incoming,Ne=s.an((ue-Q.timeAdded)/he,0,1),Ue=s.an(1-_e,0,1),je=Ee?Ne:Ue;return{tileOpacity:je,parentTileOpacity:Ee?Ue:Ne,fadeMix:{opacity:1,mix:1-je}}})(I,P,p);return{parentTile:P,parentScaleBy:N,parentTopLeft:H,fadeValues:Y}}if(I.selfFading){const P=(function(N,H){const Y=(D()-N.timeAdded)/H,Q=s.an(Y,0,1);return{tileOpacity:Q,fadeMix:{opacity:Q,mix:0}}})(I,p);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:P}}return k}const th=new s.bp(1,0,0,1),vc=new s.bp(0,1,0,1),ih=new s.bp(0,0,1,1),nh=new s.bp(1,0,1,1),Sl=new s.bp(0,1,1,1);function bu(I,c,p,v){Wc(I,0,c+p/2,I.transform.width,p,v)}function Xl(I,c,p,v){Wc(I,c-p/2,0,p,I.transform.height,v)}function Wc(I,c,p,v,k,P){const N=I.context,H=N.gl;H.enable(H.SCISSOR_TEST),H.scissor(c*I.pixelRatio,p*I.pixelRatio,v*I.pixelRatio,k*I.pixelRatio),N.clear({color:P}),H.disable(H.SCISSOR_TEST)}function wu(I,c,p){const v=I.context,k=v.gl,P=I.useProgram("debug"),N=an.disabled,H=ia.disabled,Y=I.colorModeForRenderPass(),Q="$debug",ne=I.style.map.terrain&&I.style.map.terrain.getTerrainData(p);v.activeTexture.set(k.TEXTURE0);const he=c.getTileByID(p.key).latestRawTileData,ue=Math.floor((he&&he.byteLength||0)/1024),_e=c.getTile(p).tileSize,Ee=512/Math.min(_e,512)*(p.overscaledZ/I.transform.zoom)*.5;let Ne=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Ne+=` => ${p.overscaledZ}`),(function(je,et){je.initDebugOverlayCanvas();const lt=je.debugOverlayCanvas,Je=je.context.gl,st=je.debugOverlayCanvas.getContext("2d");st.clearRect(0,0,lt.width,lt.height),st.shadowColor="white",st.shadowBlur=2,st.lineWidth=1.5,st.strokeStyle="white",st.textBaseline="top",st.font="bold 36px Open Sans, sans-serif",st.fillText(et,5,5),st.strokeText(et,5,5),je.debugOverlayTexture.update(lt),je.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)})(I,`${Ne} ${ue}kB`);const Ue=I.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});P.draw(v,k.TRIANGLES,N,H,zn.alphaBlended,Hn.disabled,mc(s.bp.transparent,Ee),null,Ue,Q,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),P.draw(v,k.LINE_STRIP,N,H,Y,Hn.disabled,mc(s.bp.red),ne,Ue,Q,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function ah(I,c,p,v){const{isRenderingGlobe:k}=v,P=I.context,N=P.gl,H=I.transform,Y=I.colorModeForRenderPass(),Q=I.getDepthModeFor3D(),ne=I.useProgram("terrain");P.bindFramebuffer.set(null),P.viewport.set([0,0,I.width,I.height]);for(const he of p){const ue=c.getTerrainMesh(he.tileID),_e=I.renderToTexture.getTexture(he),Ee=c.getTerrainData(he.tileID);P.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,_e.texture);const Ne=c.getMeshFrameDelta(H.zoom),Ue=H.calculateFogMatrix(he.tileID.toUnwrapped()),je=Bc(Ne,Ue,I.style.sky,H.pitch,k),et=H.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ne.draw(P,N.TRIANGLES,Q,ia.disabled,Y,Hn.backCCW,je,Ee,et,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments)}}function bc(I,c){if(!c.mesh){const p=new s.aW;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const v=new s.aY;v.emplaceBack(0,1,2),v.emplaceBack(0,2,3),c.mesh=new Fa(I.createVertexBuffer(p,Gn.members),I.createIndexBuffer(v),s.aX.simpleSegment(0,0,p.length,v.length))}return c.mesh}class Xc{constructor(c,p){this.context=new _u(c),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ii.maxOverzooming+ii.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ta}resize(c,p,v){if(this.width=Math.floor(c*v),this.height=Math.floor(p*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const k of this.style._order)this.style._layers[k].resize()}setup(){const c=this.context,p=new s.aW;p.emplaceBack(0,0),p.emplaceBack(s.a5,0),p.emplaceBack(0,s.a5),p.emplaceBack(s.a5,s.a5),this.tileExtentBuffer=c.createVertexBuffer(p,Gn.members),this.tileExtentSegments=s.aX.simpleSegment(0,0,4,2);const v=new s.aW;v.emplaceBack(0,0),v.emplaceBack(s.a5,0),v.emplaceBack(0,s.a5),v.emplaceBack(s.a5,s.a5),this.debugBuffer=c.createVertexBuffer(v,Gn.members),this.debugSegments=s.aX.simpleSegment(0,0,4,5);const k=new s.ch;k.emplaceBack(0,0,0,0),k.emplaceBack(s.a5,0,s.a5,0),k.emplaceBack(0,s.a5,0,s.a5),k.emplaceBack(s.a5,s.a5,s.a5,s.a5),this.rasterBoundsBuffer=c.createVertexBuffer(k,cu.members),this.rasterBoundsSegments=s.aX.simpleSegment(0,0,4,2);const P=new s.aW;P.emplaceBack(0,0),P.emplaceBack(s.a5,0),P.emplaceBack(0,s.a5),P.emplaceBack(s.a5,s.a5),this.rasterBoundsBufferPosOnly=c.createVertexBuffer(P,Gn.members),this.rasterBoundsSegmentsPosOnly=s.aX.simpleSegment(0,0,4,5);const N=new s.aW;N.emplaceBack(0,0),N.emplaceBack(1,0),N.emplaceBack(0,1),N.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(N,Gn.members),this.viewportSegments=s.aX.simpleSegment(0,0,4,2);const H=new s.ci;H.emplaceBack(0),H.emplaceBack(1),H.emplaceBack(3),H.emplaceBack(2),H.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(H);const Y=new s.aY;Y.emplaceBack(1,0,2),Y.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(Y);const Q=this.context.gl;this.stencilClearMode=new ia({func:Q.ALWAYS,mask:0},0,255,Q.ZERO,Q.ZERO,Q.ZERO),this.tileExtentMesh=new Fa(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const c=this.context,p=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=s.N();s.c7(v,0,this.width,this.height,0,0,1),s.Q(v,v,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const k={mainMatrix:v,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:v};this.useProgram("clippingMask",null,!0).draw(c,p.TRIANGLES,an.disabled,this.stencilClearMode,zn.disabled,Hn.disabled,null,null,k,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,p,v){if(this.currentStencilSource===c.source||!c.isTileClipped()||!p||!p.length)return;this.currentStencilSource=c.source,this.nextStencilID+p.length>256&&this.clearStencil();const k=this.context;k.setColorMode(zn.disabled),k.setDepthMode(an.disabled);const P={};for(const N of p)P[N.key]=this.nextStencilID++;this._renderTileMasks(P,p,v,!0),this._renderTileMasks(P,p,v,!1),this._tileClippingMaskIDs=P}_renderTileMasks(c,p,v,k){const P=this.context,N=P.gl,H=this.style.projection,Y=this.transform,Q=this.useProgram("clippingMask");for(const ne of p){const he=c[ne.key],ue=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ne),_e=H.getMeshFromTileID(this.context,ne.canonical,k,!0,"stencil"),Ee=Y.getProjectionData({overscaledTileID:ne,applyGlobeMatrix:!v,applyTerrainMatrix:!0});Q.draw(P,N.TRIANGLES,an.disabled,new ia({func:N.ALWAYS,mask:0},he,255,N.KEEP,N.KEEP,N.REPLACE),zn.disabled,v?Hn.disabled:Hn.backCCW,null,ue,Ee,"$clipping",_e.vertexBuffer,_e.indexBuffer,_e.segments)}}_renderTilesDepthBuffer(){const c=this.context,p=c.gl,v=this.style.projection,k=this.transform,P=this.useProgram("depth"),N=this.getDepthModeFor3D(),H=mn(k,{tileSize:k.tileSize});for(const Y of H){const Q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Y),ne=v.getMeshFromTileID(this.context,Y.canonical,!0,!0,"raster"),he=k.getProjectionData({overscaledTileID:Y,applyGlobeMatrix:!0,applyTerrainMatrix:!0});P.draw(c,p.TRIANGLES,N,ia.disabled,zn.disabled,Hn.backCCW,null,Q,he,"$clipping",ne.vertexBuffer,ne.indexBuffer,ne.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,p=this.context.gl;return new ia({func:p.NOTEQUAL,mask:255},c,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(c){const p=this.context.gl;return new ia({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(c){const p=this.context.gl,v=c.sort(((N,H)=>H.overscaledZ-N.overscaledZ)),k=v[v.length-1].overscaledZ,P=v[0].overscaledZ-k+1;if(P>1){this.currentStencilSource=void 0,this.nextStencilID+P>256&&this.clearStencil();const N={};for(let H=0;H<P;H++)N[H+k]=new ia({func:p.GEQUAL,mask:255},H+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=P,[N,v]}return[{[k]:ia.disabled},v]}stencilConfigForOverlapTwoPass(c){const p=this.context.gl,v=c.sort(((N,H)=>H.overscaledZ-N.overscaledZ)),k=v[v.length-1].overscaledZ,P=v[0].overscaledZ-k+1;if(this.clearStencil(),P>1){const N={},H={};for(let Y=0;Y<P;Y++)N[Y+k]=new ia({func:p.GREATER,mask:255},P+1+Y,255,p.KEEP,p.KEEP,p.REPLACE),H[Y+k]=new ia({func:p.GREATER,mask:255},1+Y,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*P+1,[N,H,v]}return this.nextStencilID=3,[{[k]:new ia({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[k]:new ia({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},v]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new zn([c.CONSTANT_COLOR,c.ONE],new s.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?zn.unblended:zn.alphaBlended}getDepthModeForSublayer(c,p,v){if(!this.opaquePassEnabledForLayer())return an.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new an(v||this.context.gl.LEQUAL,p,[k,k])}getDepthModeFor3D(){return new an(this.context.gl.LEQUAL,an.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,p){var v,k;this.style=c,this.options=p,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(D()),this.imageManager.beginFrame();const P=this.style._order,N=this.style.tileManagers,H={},Y={},Q={},ne={isRenderingToTexture:!1,isRenderingGlobe:((v=c.projection)===null||v===void 0?void 0:v.transitionState)>0};for(const ue in N){const _e=N[ue];_e.used&&_e.prepare(this.context),H[ue]=_e.getVisibleCoordinates(!1),Y[ue]=H[ue].slice().reverse(),Q[ue]=_e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ue=0;ue<P.length;ue++)if(this.style._layers[P[ue]].is3D()){this.opaquePassCutoff=ue;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ue of P){const _e=this.style._layers[ue];if(!_e.hasOffscreenPass()||_e.isHidden(this.transform.zoom))continue;const Ee=Y[_e.source];(_e.type==="custom"||Ee.length)&&this.renderLayer(this,N[_e.source],_e,Ee,ne)}if((k=this.style.projection)===null||k===void 0||k.updateGPUdependent({context:this.context,useProgram:ue=>this.useProgram(ue)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?s.bp.black:s.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(ue,_e){const Ee=ue.context,Ne=Ee.gl,Ue=((ft,at,kt)=>{const Yt=Math.cos(at.rollInRadians),Ft=Math.sin(at.rollInRadians),jt=Ai(at),Vt=at.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ft.properties.get("sky-color"),u_horizon_color:ft.properties.get("horizon-color"),u_horizon:[(at.width/2-jt*Ft)*kt,(at.height/2+jt*Yt)*kt],u_horizon_normal:[-Ft,Yt],u_sky_horizon_blend:ft.properties.get("sky-horizon-blend")*at.height/2*kt,u_sky_blend:Vt}})(_e,ue.style.map.transform,ue.pixelRatio),je=new an(Ne.LEQUAL,an.ReadWrite,[0,1]),et=ia.disabled,lt=ue.colorModeForRenderPass(),Je=ue.useProgram("sky"),st=bc(Ee,_e);Je.draw(Ee,Ne.TRIANGLES,je,et,lt,Hn.disabled,Ue,null,void 0,"sky",st.vertexBuffer,st.indexBuffer,st.segments)})(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=P.length-1;this.currentLayer>=0;this.currentLayer--){const ue=this.style._layers[P[this.currentLayer]],_e=N[ue.source],Ee=H[ue.source];this._renderTileClippingMasks(ue,Ee,!1),this.renderLayer(this,_e,ue,Ee,ne)}this.renderPass="translucent";let he=!1;for(this.currentLayer=0;this.currentLayer<P.length;this.currentLayer++){const ue=this.style._layers[P[this.currentLayer]],_e=N[ue.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ue,ne))continue;this.opaquePassEnabledForLayer()||he||(he=!0,ne.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ee=(ue.type==="symbol"?Q:Y)[ue.source];this._renderTileClippingMasks(ue,H[ue.source],!!this.renderToTexture),this.renderLayer(this,_e,ue,Ee,ne)}if(ne.isRenderingGlobe&&(function(ue,_e,Ee){const Ne=ue.context,Ue=Ne.gl,je=ue.useProgram("atmosphere"),et=new an(Ue.LEQUAL,an.ReadOnly,[0,1]),lt=ue.transform,Je=(function(Vt,Mi){const Pi=Vt.properties.get("position"),fi=[-Pi.x,-Pi.y,-Pi.z],ji=s.ar(new Float64Array(16));return Vt.properties.get("anchor")==="map"&&(s.bg(ji,ji,Mi.rollInRadians),s.bh(ji,ji,-Mi.pitchInRadians),s.bg(ji,ji,Mi.bearingInRadians),s.bh(ji,ji,Mi.center.lat*Math.PI/180),s.bJ(ji,ji,-Mi.center.lng*Math.PI/180)),s.cg(fi,fi,ji),fi})(Ee,ue.transform),st=lt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ft=_e.properties.get("atmosphere-blend")*st.projectionTransition;if(ft===0)return;const at=Ka(lt.worldSize,lt.center.lat),kt=lt.inverseProjectionMatrix,Yt=new Float64Array(4);Yt[3]=1,s.aH(Yt,Yt,lt.modelViewProjectionMatrix),Yt[0]/=Yt[3],Yt[1]/=Yt[3],Yt[2]/=Yt[3],Yt[3]=1,s.aH(Yt,Yt,kt),Yt[0]/=Yt[3],Yt[1]/=Yt[3],Yt[2]/=Yt[3],Yt[3]=1;const Ft=((Vt,Mi,Pi,fi,ji)=>({u_sun_pos:Vt,u_atmosphere_blend:Mi,u_globe_position:Pi,u_globe_radius:fi,u_inv_proj_matrix:ji}))(Je,ft,[Yt[0],Yt[1],Yt[2]],at,kt),jt=bc(Ne,_e);je.draw(Ne,Ue.TRIANGLES,et,ia.disabled,zn.alphaBlended,Hn.disabled,Ft,null,null,"atmosphere",jt.vertexBuffer,jt.indexBuffer,jt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ue=(function(_e,Ee){let Ne=null;const Ue=Object.values(_e._layers).flatMap((Je=>Je.source&&!Je.isHidden(Ee)?[_e.tileManagers[Je.source]]:[])),je=Ue.filter((Je=>Je.getSource().type==="vector")),et=Ue.filter((Je=>Je.getSource().type!=="vector")),lt=Je=>{(!Ne||Ne.getSource().maxzoom<Je.getSource().maxzoom)&&(Ne=Je)};return je.forEach((Je=>lt(Je))),Ne||et.forEach((Je=>lt(Je))),Ne})(this.style,this.transform.zoom);ue&&(function(_e,Ee,Ne){for(let Ue=0;Ue<Ne.length;Ue++)wu(_e,Ee,Ne[Ue])})(this,ue,ue.getVisibleCoordinates())}this.options.showPadding&&(function(ue){const _e=ue.transform.padding;bu(ue,ue.transform.height-(_e.top||0),3,th),bu(ue,_e.bottom||0,3,vc),Xl(ue,_e.left||0,3,ih),Xl(ue,ue.transform.width-(_e.right||0),3,nh);const Ee=ue.transform.centerPoint;(function(Ne,Ue,je,et){Wc(Ne,Ue-1,je-10,2,20,et),Wc(Ne,Ue-10,je-1,20,2,et)})(ue,Ee.x,ue.transform.height-Ee.y,Sl)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(c){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix;let k=this.terrainFacilitator.dirty;k||(k=c?!s.cj(p,v):!s.ck(p,v)),k||(k=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),k&&(s.cl(p,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(P,N){const H=P.context,Y=H.gl,Q=P.transform,ne=zn.unblended,he=new an(Y.LEQUAL,an.ReadWrite,[0,1]),ue=N.tileManager.getRenderableTiles(),_e=P.useProgram("terrainDepth");H.bindFramebuffer.set(N.getFramebuffer("depth").framebuffer),H.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),H.clear({color:s.bp.transparent,depth:1});for(const Ee of ue){const Ne=N.getTerrainMesh(Ee.tileID),Ue=N.getTerrainData(Ee.tileID),je=Q.getProjectionData({overscaledTileID:Ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),et={u_ele_delta:N.getMeshFrameDelta(Q.zoom)};_e.draw(H,Y.TRIANGLES,he,ia.disabled,ne,Hn.backCCW,et,Ue,je,"terrain",Ne.vertexBuffer,Ne.indexBuffer,Ne.segments)}H.bindFramebuffer.set(null),H.viewport.set([0,0,P.width,P.height])})(this,this.style.map.terrain),(function(P,N){const H=P.context,Y=H.gl,Q=P.transform,ne=zn.unblended,he=new an(Y.LEQUAL,an.ReadWrite,[0,1]),ue=N.getCoordsTexture(),_e=N.tileManager.getRenderableTiles(),Ee=P.useProgram("terrainCoords");H.bindFramebuffer.set(N.getFramebuffer("coords").framebuffer),H.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),H.clear({color:s.bp.transparent,depth:1}),N.coordsIndex=[];for(const Ne of _e){const Ue=N.getTerrainMesh(Ne.tileID),je=N.getTerrainData(Ne.tileID);H.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,ue.texture);const et={u_terrain_coords_id:(255-N.coordsIndex.length)/255,u_texture:0,u_ele_delta:N.getMeshFrameDelta(Q.zoom)},lt=Q.getProjectionData({overscaledTileID:Ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ee.draw(H,Y.TRIANGLES,he,ia.disabled,ne,Hn.backCCW,et,je,lt,"terrain",Ue.vertexBuffer,Ue.indexBuffer,Ue.segments),N.coordsIndex.push(Ne.tileID.key)}H.bindFramebuffer.set(null),H.viewport.set([0,0,P.width,P.height])})(this,this.style.map.terrain))}renderLayer(c,p,v,k,P){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="custom"||(k||[]).length)&&(this.id=v.id,s.cm(v)?(function(N,H,Y,Q,ne,he){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:ue}=he,_e=ia.disabled,Ee=N.colorModeForRenderPass();(Y._unevaluatedLayout.hasValue("text-variable-anchor")||Y._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Ne,Ue,je,et,lt,Je,st,ft,at){const kt=Ue.transform,Yt=Ue.style.map.terrain,Ft=lt==="map",jt=Je==="map";for(const Vt of Ne){const Mi=et.getTile(Vt),Pi=Mi.getBucket(je);if(!Pi||!Pi.text||!Pi.text.segments.get().length)continue;const fi=s.ay(Pi.textSizeData,kt.zoom),ji=s.aN(Mi,1,Ue.transform.zoom),la=ki(Ft,Ue.transform,ji),Ja=je.layout.get("icon-text-fit")!=="none"&&Pi.hasIconData();if(fi){const Lr=Math.pow(2,kt.zoom-Mi.tileID.overscaledZ),fr=Yt?(Fr,pr)=>Yt.getElevation(Vt,Fr,pr):null;xu(Pi,Ft,jt,at,kt,la,Lr,fi,Ja,s.aO(kt,Mi,st,ft),Vt.toUnwrapped(),fr)}}})(Q,N,Y,H,Y.layout.get("text-rotation-alignment"),Y.layout.get("text-pitch-alignment"),Y.paint.get("text-translate"),Y.paint.get("text-translate-anchor"),ne),Y.paint.get("icon-opacity").constantOr(1)!==0&&wl(N,H,Y,Q,!1,Y.paint.get("icon-translate"),Y.paint.get("icon-translate-anchor"),Y.layout.get("icon-rotation-alignment"),Y.layout.get("icon-pitch-alignment"),Y.layout.get("icon-keep-upright"),_e,Ee,ue),Y.paint.get("text-opacity").constantOr(1)!==0&&wl(N,H,Y,Q,!0,Y.paint.get("text-translate"),Y.paint.get("text-translate-anchor"),Y.layout.get("text-rotation-alignment"),Y.layout.get("text-pitch-alignment"),Y.layout.get("text-keep-upright"),_e,Ee,ue),H.map.showCollisionBoxes&&(Qo(N,H,Y,Q,!0),Qo(N,H,Y,Q,!1))})(c,p,v,k,this.style.placement.variableOffsets,P):s.cn(v)?(function(N,H,Y,Q,ne){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:he}=ne,ue=Y.paint.get("circle-opacity"),_e=Y.paint.get("circle-stroke-width"),Ee=Y.paint.get("circle-stroke-opacity"),Ne=!Y.layout.get("circle-sort-key").isConstant();if(ue.constantOr(1)===0&&(_e.constantOr(1)===0||Ee.constantOr(1)===0))return;const Ue=N.context,je=Ue.gl,et=N.transform,lt=N.getDepthModeForSublayer(0,an.ReadOnly),Je=ia.disabled,st=N.colorModeForRenderPass(),ft=[],at=et.getCircleRadiusCorrection();for(let kt=0;kt<Q.length;kt++){const Yt=Q[kt],Ft=H.getTile(Yt),jt=Ft.getBucket(Y);if(!jt)continue;const Vt=Y.paint.get("circle-translate"),Mi=Y.paint.get("circle-translate-anchor"),Pi=s.aO(et,Ft,Vt,Mi),fi=jt.programConfigurations.get(Y.id),ji=N.useProgram("circle",fi),la=jt.layoutVertexBuffer,Ja=jt.indexBuffer,Lr=N.style.map.terrain&&N.style.map.terrain.getTerrainData(Yt),fr={programConfiguration:fi,program:ji,layoutVertexBuffer:la,indexBuffer:Ja,uniformValues:qu(N,Ft,Y,Pi,at),terrainData:Lr,projectionData:et.getProjectionData({overscaledTileID:Yt,applyGlobeMatrix:!he,applyTerrainMatrix:!0})};if(Ne){const Fr=jt.segments.get();for(const pr of Fr)ft.push({segments:new s.aX([pr]),sortKey:pr.sortKey,state:fr})}else ft.push({segments:jt.segments,sortKey:0,state:fr})}Ne&&ft.sort(((kt,Yt)=>kt.sortKey-Yt.sortKey));for(const kt of ft){const{programConfiguration:Yt,program:Ft,layoutVertexBuffer:jt,indexBuffer:Vt,uniformValues:Mi,terrainData:Pi,projectionData:fi}=kt.state;Ft.draw(Ue,je.TRIANGLES,lt,Je,st,Hn.backCCW,Mi,Pi,fi,Y.id,jt,Vt,kt.segments,Y.paint,N.transform.zoom,Yt)}})(c,p,v,k,P):s.co(v)?(function(N,H,Y,Q,ne){if(Y.paint.get("heatmap-opacity")===0)return;const he=N.context,{isRenderingToTexture:ue,isRenderingGlobe:_e}=ne;if(N.style.map.terrain){for(const Ee of Q){const Ne=H.getTile(Ee);H.hasRenderableParent(Ee)||(N.renderPass==="offscreen"?Ju(N,Ne,Y,Ee,_e):N.renderPass==="translucent"&&Qu(N,Y,Ee,ue,_e))}he.viewport.set([0,0,N.width,N.height])}else N.renderPass==="offscreen"?(function(Ee,Ne,Ue,je){const et=Ee.context,lt=et.gl,Je=Ee.transform,st=ia.disabled,ft=new zn([lt.ONE,lt.ONE],s.bp.transparent,[!0,!0,!0,!0]);(function(at,kt,Yt){const Ft=at.gl;at.activeTexture.set(Ft.TEXTURE1),at.viewport.set([0,0,kt.width/4,kt.height/4]);let jt=Yt.heatmapFbos.get(s.cd);jt?(Ft.bindTexture(Ft.TEXTURE_2D,jt.colorAttachment.get()),at.bindFramebuffer.set(jt.framebuffer)):(jt=_c(at,kt.width/4,kt.height/4),Yt.heatmapFbos.set(s.cd,jt))})(et,Ee,Ue),et.clear({color:s.bp.transparent});for(let at=0;at<je.length;at++){const kt=je[at];if(Ne.hasRenderableParent(kt))continue;const Yt=Ne.getTile(kt),Ft=Yt.getBucket(Ue);if(!Ft)continue;const jt=Ft.programConfigurations.get(Ue.id),Vt=Ee.useProgram("heatmap",jt),Mi=Je.getProjectionData({overscaledTileID:kt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Pi=Je.getCircleRadiusCorrection();Vt.draw(et,lt.TRIANGLES,an.disabled,st,ft,Hn.backCCW,Ao(Yt,Je.zoom,Ue.paint.get("heatmap-intensity"),Pi),null,Mi,Ue.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,Ue.paint,Je.zoom,jt)}et.viewport.set([0,0,Ee.width,Ee.height])})(N,H,Y,Q):N.renderPass==="translucent"&&(function(Ee,Ne){const Ue=Ee.context,je=Ue.gl;Ue.setColorMode(Ee.colorModeForRenderPass());const et=Ne.heatmapFbos.get(s.cd);et&&(Ue.activeTexture.set(je.TEXTURE0),je.bindTexture(je.TEXTURE_2D,et.colorAttachment.get()),Ue.activeTexture.set(je.TEXTURE1),ho(Ue,Ne).bind(je.LINEAR,je.CLAMP_TO_EDGE),Ee.useProgram("heatmapTexture").draw(Ue,je.TRIANGLES,an.disabled,ia.disabled,Ee.colorModeForRenderPass(),Hn.disabled,pa(Ee,Ne,0,1),null,null,Ne.id,Ee.viewportBuffer,Ee.quadTriangleIndexBuffer,Ee.viewportSegments,Ne.paint,Ee.transform.zoom))})(N,Y)})(c,p,v,k,P):s.cp(v)?(function(N,H,Y,Q,ne){if(N.renderPass!=="translucent")return;const{isRenderingToTexture:he}=ne,ue=Y.paint.get("line-opacity"),_e=Y.paint.get("line-width");if(ue.constantOr(1)===0||_e.constantOr(1)===0)return;const Ee=N.getDepthModeForSublayer(0,an.ReadOnly),Ne=N.colorModeForRenderPass(),Ue=Y.paint.get("line-dasharray"),je=Ue.constantOr(1),et=Y.paint.get("line-pattern"),lt=et.constantOr(1),Je=Y.paint.get("line-gradient"),st=Y.getCrossfadeParameters();let ft;ft=lt?"linePattern":je&&Je?"lineGradientSDF":je?"lineSDF":Je?"lineGradient":"line";const at=N.context,kt=at.gl,Yt=N.transform;let Ft=!0;for(const jt of Q){const Vt=H.getTile(jt);if(lt&&!Vt.patternsLoaded())continue;const Mi=Vt.getBucket(Y);if(!Mi)continue;const Pi=Mi.programConfigurations.get(Y.id),fi=N.context.program.get(),ji=N.useProgram(ft,Pi),la=Ft||ji.program!==fi,Ja=N.style.map.terrain&&N.style.map.terrain.getTerrainData(jt),Lr=et.constantOr(null),fr=Ue&&Ue.constantOr(null);if(Lr&&Vt.imageAtlas){const Ys=Vt.imageAtlas,_s=Ys.patternPositions[Lr.to.toString()],us=Ys.patternPositions[Lr.from.toString()];_s&&us&&Pi.setConstantPatternPositions(_s,us)}else if(fr){const Ys=Y.layout.get("line-cap")==="round",_s=N.lineAtlas.getDash(fr.to,Ys),us=N.lineAtlas.getDash(fr.from,Ys);Pi.setConstantDashPositions(_s,us)}const Fr=Yt.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!he,applyTerrainMatrix:!0}),pr=Yt.getPixelScale();let ts;lt?(ts=M(N,Vt,Y,pr,st),Bo(at,kt,Vt,Pi,st)):je&&Je?(ts=V(N,Vt,Y,pr,st,Mi.lineClipsArray.length),ys(N,H,at,kt,Y,Mi,jt,Pi,st)):je?(ts=O(N,Vt,Y,pr,st),dr(N,at,kt,Pi,la,st)):Je?(ts=T(N,Vt,Y,pr,Mi.lineClipsArray.length),el(N,H,at,kt,Y,Mi,jt)):ts=w(N,Vt,Y,pr);const Nr=N.stencilModeForClipping(jt);ji.draw(at,kt.TRIANGLES,Ee,Nr,Ne,Hn.disabled,ts,Ja,Fr,Y.id,Mi.layoutVertexBuffer,Mi.indexBuffer,Mi.segments,Y.paint,N.transform.zoom,Pi,Mi.layoutVertexBuffer2),Ft=!1}})(c,p,v,k,P):s.cq(v)?(function(N,H,Y,Q,ne){const he=Y.paint.get("fill-color"),ue=Y.paint.get("fill-opacity");if(ue.constantOr(1)===0)return;const{isRenderingToTexture:_e}=ne,Ee=N.colorModeForRenderPass(),Ne=Y.paint.get("fill-pattern"),Ue=N.opaquePassEnabledForLayer()&&!Ne.constantOr(1)&&he.constantOr(s.bp.transparent).a===1&&ue.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===Ue){const je=N.getDepthModeForSublayer(1,N.renderPass==="opaque"?an.ReadWrite:an.ReadOnly);fo(N,H,Y,Q,je,Ee,!1,_e)}if(N.renderPass==="translucent"&&Y.paint.get("fill-antialias")){const je=N.getDepthModeForSublayer(Y.getPaintProperty("fill-outline-color")?2:0,an.ReadOnly);fo(N,H,Y,Q,je,Ee,!0,_e)}})(c,p,v,k,P):s.cr(v)?(function(N,H,Y,Q,ne){const he=Y.paint.get("fill-extrusion-opacity");if(he===0)return;const{isRenderingToTexture:ue}=ne;if(N.renderPass==="translucent"){const _e=new an(N.context.gl.LEQUAL,an.ReadWrite,N.depthRangeFor3D);if(he!==1||Y.paint.get("fill-extrusion-pattern").constantOr(1))$l(N,H,Y,Q,_e,ia.disabled,zn.disabled,ue),$l(N,H,Y,Q,_e,N.stencilModeFor3D(),N.colorModeForRenderPass(),ue);else{const Ee=N.colorModeForRenderPass();$l(N,H,Y,Q,_e,ia.disabled,Ee,ue)}}})(c,p,v,k,P):s.cs(v)?(function(N,H,Y,Q,ne){if(N.renderPass!=="offscreen"&&N.renderPass!=="translucent")return;const{isRenderingToTexture:he}=ne,ue=N.context,_e=N.style.projection.useSubdivision,Ee=N.getDepthModeForSublayer(0,an.ReadOnly),Ne=N.colorModeForRenderPass();if(N.renderPass==="offscreen")(function(Ue,je,et,lt,Je,st,ft){const at=Ue.context,kt=at.gl;for(const Yt of et){const Ft=je.getTile(Yt),jt=Ft.dem;if(!jt||!jt.data||!Ft.needsHillshadePrepare)continue;const Vt=jt.dim,Mi=jt.stride,Pi=jt.getPixels();if(at.activeTexture.set(kt.TEXTURE1),at.pixelStoreUnpackPremultiplyAlpha.set(!1),Ft.demTexture=Ft.demTexture||Ue.getTileTexture(Mi),Ft.demTexture){const ji=Ft.demTexture;ji.update(Pi,{premultiply:!1}),ji.bind(kt.NEAREST,kt.CLAMP_TO_EDGE)}else Ft.demTexture=new s.T(at,Pi,kt.RGBA,{premultiply:!1}),Ft.demTexture.bind(kt.NEAREST,kt.CLAMP_TO_EDGE);at.activeTexture.set(kt.TEXTURE0);let fi=Ft.fbo;if(!fi){const ji=new s.T(at,{width:Vt,height:Vt,data:null},kt.RGBA);ji.bind(kt.LINEAR,kt.CLAMP_TO_EDGE),fi=Ft.fbo=at.createFramebuffer(Vt,Vt,!0,!1),fi.colorAttachment.set(ji.texture)}at.bindFramebuffer.set(fi.framebuffer),at.viewport.set([0,0,Vt,Vt]),Ue.useProgram("hillshadePrepare").draw(at,kt.TRIANGLES,Je,st,ft,Hn.disabled,Se(Ft.tileID,jt),null,null,lt.id,Ue.rasterBoundsBuffer,Ue.quadTriangleIndexBuffer,Ue.rasterBoundsSegments),Ft.needsHillshadePrepare=!1}})(N,H,Q,Y,Ee,ia.disabled,Ne),ue.viewport.set([0,0,N.width,N.height]);else if(N.renderPass==="translucent")if(_e){const[Ue,je,et]=N.stencilConfigForOverlapTwoPass(Q);tl(N,H,Y,et,Ue,Ee,Ne,!1,he),tl(N,H,Y,et,je,Ee,Ne,!0,he)}else{const[Ue,je]=N.getStencilConfigForOverlapAndUpdateStencilID(Q);tl(N,H,Y,je,Ue,Ee,Ne,!1,he)}})(c,p,v,k,P):s.ct(v)?(function(N,H,Y,Q,ne){if(N.renderPass!=="translucent"||!Q.length)return;const{isRenderingToTexture:he}=ne,ue=N.style.projection.useSubdivision,_e=N.getDepthModeForSublayer(0,an.ReadOnly),Ee=N.colorModeForRenderPass();if(ue){const[Ne,Ue,je]=N.stencilConfigForOverlapTwoPass(Q);il(N,H,Y,je,Ne,_e,Ee,!1,he),il(N,H,Y,je,Ue,_e,Ee,!0,he)}else{const[Ne,Ue]=N.getStencilConfigForOverlapAndUpdateStencilID(Q);il(N,H,Y,Ue,Ne,_e,Ee,!1,he)}})(c,p,v,k,P):s.bU(v)?(function(N,H,Y,Q,ne){if(N.renderPass!=="translucent"||Y.paint.get("raster-opacity")===0||!Q.length)return;const{isRenderingToTexture:he}=ne,ue=H.getSource(),_e=N.style.projection.useSubdivision;if(ue instanceof Di)Wl(N,H,Y,Q,null,!1,!1,ue.tileCoords,ue.flippedWindingOrder,he);else if(_e){const[Ee,Ne,Ue]=N.stencilConfigForOverlapTwoPass(Q);Wl(N,H,Y,Ue,Ee,!1,!0,Gl,!1,he),Wl(N,H,Y,Ue,Ne,!0,!0,Gl,!1,he)}else{const[Ee,Ne]=N.getStencilConfigForOverlapAndUpdateStencilID(Q);Wl(N,H,Y,Ne,Ee,!1,!0,Gl,!1,he)}})(c,p,v,k,P):s.cu(v)?(function(N,H,Y,Q,ne){const he=Y.paint.get("background-color"),ue=Y.paint.get("background-opacity");if(ue===0)return;const{isRenderingToTexture:_e}=ne,Ee=N.context,Ne=Ee.gl,Ue=N.style.projection,je=N.transform,et=je.tileSize,lt=Y.paint.get("background-pattern");if(N.isPatternMissing(lt))return;const Je=!lt&&he.a===1&&ue===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass!==Je)return;const st=ia.disabled,ft=N.getDepthModeForSublayer(0,Je==="opaque"?an.ReadWrite:an.ReadOnly),at=N.colorModeForRenderPass(),kt=N.useProgram(lt?"backgroundPattern":"background"),Yt=Q||mn(je,{tileSize:et,terrain:N.style.map.terrain});lt&&(Ee.activeTexture.set(Ne.TEXTURE0),N.imageManager.bind(N.context));const Ft=Y.getCrossfadeParameters();for(const jt of Yt){const Vt=je.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!_e,applyTerrainMatrix:!0}),Mi=lt?zt(ue,N,lt,{tileID:jt,tileSize:et},Ft):vt(ue,he),Pi=N.style.map.terrain&&N.style.map.terrain.getTerrainData(jt),fi=Ue.getMeshFromTileID(Ee,jt.canonical,!1,!0,"raster");kt.draw(Ee,Ne.TRIANGLES,ft,st,at,Hn.backCCW,Mi,Pi,Vt,Y.id,fi.vertexBuffer,fi.indexBuffer,fi.segments)}})(c,0,v,k,P):s.cv(v)&&(function(N,H,Y,Q){const{isRenderingGlobe:ne}=Q,he=N.context,ue=Y.implementation,_e=N.style.projection,Ee=N.transform,Ne=Ee.getProjectionDataForCustomLayer(ne),Ue={farZ:Ee.farZ,nearZ:Ee.nearZ,fov:Ee.fov*Math.PI/180,modelViewProjectionMatrix:Ee.modelViewProjectionMatrix,projectionMatrix:Ee.projectionMatrix,shaderData:{variantName:_e.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${_e.shaderPreludeCode.vertexSource}`,define:_e.shaderDefine},defaultProjectionData:Ne},je=ue.renderingMode?ue.renderingMode:"2d";if(N.renderPass==="offscreen"){const et=ue.prerender;et&&(N.setCustomLayerDefaults(),he.setColorMode(N.colorModeForRenderPass()),et.call(ue,he.gl,Ue),he.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),he.setColorMode(N.colorModeForRenderPass()),he.setStencilMode(ia.disabled);const et=je==="3d"?N.getDepthModeFor3D():N.getDepthModeForSublayer(0,an.ReadOnly);he.setDepthMode(et),ue.render(he.gl,Ue),he.setDirty(),N.setBaseState(),he.bindFramebuffer.set(null)}})(c,0,v,P))}saveTileTexture(c){const p=this._tileTextures[c.size[0]];p?p.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const p=this._tileTextures[c];return p&&p.length>0?p.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const p=this.imageManager.getPattern(c.from.toString()),v=this.imageManager.getPattern(c.to.toString());return!p||!v}useProgram(c,p,v=!1,k=[]){this.cache=this.cache||{};const P=!!this.style.map.terrain,N=this.style.projection,H=v?ea.projectionMercator:N.shaderPreludeCode,Y=v?pe:N.shaderDefine,Q=c+(p?p.cacheKey:"")+`/${v?we:N.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(P?"/terrain":"")+(k?`/${k.join("/")}`:"");return this.cache[Q]||(this.cache[Q]=new No(this.context,ea[c],p,Ri[c],this._showOverdrawInspector,P,H,Y,k)),this.cache[Q]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var c,p;if(this._tileTextures){for(const v in this._tileTextures){const k=this._tileTextures[v];if(k)for(const P of k)P.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((c=this.tileExtentMesh.vertexBuffer)===null||c===void 0||c.destroy()),this.tileExtentMesh&&((p=this.tileExtentMesh.indexBuffer)===null||p===void 0||p.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const v in this.cache){const k=this.cache[v];k&&k.program&&this.context.gl.deleteProgram(k.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:c,drawingBufferHeight:p}=this.context.gl;return this.width!==c||this.height!==p}}function wc(I,c){let p,v=!1,k=null,P=null;const N=()=>{k=null,v&&(I.apply(P,p),k=setTimeout(N,c),v=!1)};return(...H)=>(v=!0,P=this,p=H,k||N(),k)}class Su{constructor(c){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let v;return p.split("&").map((k=>k.split("="))).forEach((k=>{k[0]===this._hashName&&(v=k)})),(v&&v[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:v,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const v=p.join("/");let k=v;k.split("&").length>0&&(k=k.split("&")[0]),this._hashName&&(k=`${this._hashName}=${v}`);let P=window.location.hash.replace(k,"");P.startsWith("#&")?P=P.slice(0,1)+P.slice(2):P==="#"&&(P="");let N=window.location.href.replace(/(#.+)?$/,P);N=N.replace("&&","&"),window.history.replaceState(window.history.state,null,N)},this._updateHash=wc(this._updateHashUnthrottled,300),this._hashName=c&&encodeURIComponent(c)}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(c){const p=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,k=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,k),N=Math.round(p.lng*P)/P,H=Math.round(p.lat*P)/P,Y=this._map.getBearing(),Q=this._map.getPitch();let ne="";if(ne+=c?`/${N}/${H}/${v}`:`${v}/${H}/${N}`,(Y||Q)&&(ne+="/"+Math.round(10*Y)/10),Q&&(ne+=`/${Math.round(Q)}`),this._hashName){const he=this._hashName;let ue=!1;const _e=window.location.hash.slice(1).split("&").map((Ee=>{const Ne=Ee.split("=")[0];return Ne===he?(ue=!0,`${Ne}=${ne}`):Ee})).filter((Ee=>Ee));return ue||_e.push(`${he}=${ne}`),`#${_e.join("&")}`}return`#${ne}`}_isValidHash(c){if(c.length<3||c.some(isNaN))return!1;try{new s.V(+c[2],+c[1])}catch{return!1}const p=+c[0],v=+(c[3]||0),k=+(c[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&v>=-180&&v<=180&&k>=this._map.getMinPitch()&&k<=this._map.getMaxPitch()}}const Bt={linearity:.3,easing:s.cw(0,0,.3,1)},Ki=s.e({deceleration:2500,maxSpeed:1400},Bt),en=s.e({deceleration:20,maxSpeed:1400},Bt),Cn=s.e({deceleration:1e3,maxSpeed:360},Bt),Ba=s.e({deceleration:1e3,maxSpeed:90},Bt),Ia=s.e({deceleration:1e3,maxSpeed:360},Bt);class Ns{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,p=D();for(;c.length>0&&p-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:P}of this._inertiaBuffer)p.zoom+=P.zoomDelta||0,p.bearing+=P.bearingDelta||0,p.pitch+=P.pitchDelta||0,p.roll+=P.rollDelta||0,P.panDelta&&p.pan._add(P.panDelta),P.around&&(p.around=P.around),P.pinchAround&&(p.pinchAround=P.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(p.pan.mag()){const P=Pr(p.pan.mag(),v,s.e({},Ki,c||{})),N=p.pan.mult(P.amount/p.pan.mag()),H=this._map.cameraHelper.handlePanInertia(N,this._map.transform);k.center=H.easingCenter,k.offset=H.easingOffset,Qr(k,P)}if(p.zoom){const P=Pr(p.zoom,v,en);k.zoom=this._map.transform.zoom+P.amount,Qr(k,P)}if(p.bearing){const P=Pr(p.bearing,v,Cn);k.bearing=this._map.transform.bearing+s.an(P.amount,-179,179),Qr(k,P)}if(p.pitch){const P=Pr(p.pitch,v,Ba);k.pitch=this._map.transform.pitch+P.amount,Qr(k,P)}if(p.roll){const P=Pr(p.roll,v,Ia);k.roll=this._map.transform.roll+s.an(P.amount,-179,179),Qr(k,P)}if(k.zoom||k.bearing){const P=p.pinchAround===void 0?p.around:p.pinchAround;k.around=P?this._map.unproject(P):this._map.getCenter()}return this.clear(),s.e(k,{noMoveStart:!0})}}function Qr(I,c){(!I.duration||I.duration<c.duration)&&(I.duration=c.duration,I.easing=c.easing)}function Pr(I,c,p){const{maxSpeed:v,linearity:k,deceleration:P}=p,N=s.an(I*k/(c/1e3),-v,v),H=Math.abs(N)/(P*k);return{easing:p.easing,duration:1e3*H,amount:N*(H/2)}}class Gr extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,p,v,k={}){v=v instanceof MouseEvent?v:new MouseEvent(c,v);const P=F.mousePos(p.getCanvas(),v),N=p.unproject(P);super(c,s.e({point:P,lngLat:N,originalEvent:v},k)),this._defaultPrevented=!1,this.target=p}}class kl extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,p,v){const k=c==="touchend"?v.changedTouches:v.touches,P=F.touchPos(p.getCanvasContainer(),k),N=P.map((Y=>p.unproject(Y))),H=P.reduce(((Y,Q,ne,he)=>Y.add(Q.div(he.length))),new s.P(0,0));super(c,{points:P,point:H,lngLats:N,lngLat:p.unproject(H),originalEvent:v}),this._defaultPrevented=!1}}class rh extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,p,v){super(c,{originalEvent:v}),this._defaultPrevented=!1}}class ku{constructor(c,p){this._map=c,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new rh(c.type,this._map,c))}mousedown(c,p){return this._mousedownPos=p,this._firePreventable(new Gr(c.type,this._map,c))}mouseup(c){this._map.fire(new Gr(c.type,this._map,c))}click(c,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Gr(c.type,this._map,c))}dblclick(c){return this._firePreventable(new Gr(c.type,this._map,c))}mouseover(c){this._map.fire(new Gr(c.type,this._map,c))}mouseout(c){this._map.fire(new Gr(c.type,this._map,c))}touchstart(c){return this._firePreventable(new kl(c.type,this._map,c))}touchmove(c){this._map.fire(new kl(c.type,this._map,c))}touchend(c){this._map.fire(new kl(c.type,this._map,c))}touchcancel(c){this._map.fire(new kl(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Id{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new Gr(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new Gr(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cu{constructor(c){this._map=c}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(c){return this.transform.screenPointToLocation(s.P.convert(c),this._map.terrain)}}class Au{constructor(c,p){this._map=c,this._tr=new Cu(c),this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,p){this.isEnabled()&&c.shiftKey&&c.button===0&&(F.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(c,p){if(!this._active)return;const v=p;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const k=this._startPos;this._lastPos=v,this._box||(this._box=F.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",c));const P=Math.min(k.x,v.x),N=Math.max(k.x,v.x),H=Math.min(k.y,v.y),Y=Math.max(k.y,v.y);F.setTransform(this._box,`translate(${P}px,${H}px)`),this._box.style.width=N-P+"px",this._box.style.height=Y-H+"px"}mouseupWindow(c,p){if(!this._active||c.button!==0)return;const v=this._startPos,k=p;if(this.reset(),F.suppressClick(),v.x!==k.x||v.y!==k.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:c})),{cameraAnimation:P=>P.fitScreenCoordinates(v,k,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,p){return this._map.fire(new s.l(c,{originalEvent:p}))}}function jo(I,c){if(I.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${c.length}`);const p={};for(let v=0;v<I.length;v++)p[I[v].identifier]=c[v];return p}class Ji{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,p,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),v.length===this.numTouches&&(this.centroid=(function(k){const P=new s.P(0,0);for(const N of k)P._add(N);return P.div(k.length)})(p),this.touches=jo(v,p)))}touchmove(c,p,v){if(this.aborted||!this.centroid)return;const k=jo(v,p);for(const P in this.touches){const N=k[P];(!N||N.dist(this.touches[P])>30)&&(this.aborted=!0)}}touchend(c,p,v){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class Hh{constructor(c){this.singleTap=new Ji(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,p,v){this.singleTap.touchstart(c,p,v)}touchmove(c,p,v){this.singleTap.touchmove(c,p,v)}touchend(c,p,v){const k=this.singleTap.touchend(c,p,v);if(k){const P=c.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(k)<30;if(P&&N||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class Xe{constructor(c){this._tr=new Cu(c),this._zoomIn=new Hh({numTouches:1,numTaps:2}),this._zoomOut=new Hh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,p,v){this._zoomIn.touchstart(c,p,v),this._zoomOut.touchstart(c,p,v)}touchmove(c,p,v){this._zoomIn.touchmove(c,p,v),this._zoomOut.touchmove(c,p,v)}touchend(c,p,v){const k=this._zoomIn.touchend(c,p,v),P=this._zoomOut.touchend(c,p,v),N=this._tr;return k?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:H=>H.easeTo({duration:300,zoom:N.zoom+1,around:N.unproject(k)},{originalEvent:c})}):P?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:H=>H.easeTo({duration:300,zoom:N.zoom-1,around:N.unproject(P)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ui{constructor(c){this._enabled=!!c.enable,this._moveStateManager=c.moveStateManager,this._clickTolerance=c.clickTolerance||1,this._moveFunction=c.move,this._activateOnStart=!!c.activateOnStart,c.assignEvents(this),this.reset()}reset(c){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(c)}_move(...c){const p=this._moveFunction(...c);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(c,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(c)&&(this._moveStateManager.startMove(c),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(c,p){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(c.preventDefault(),!this._moveStateManager.isValidMoveEvent(c))return void this.reset(c);const k=Array.isArray(p)?p[0]:p;return!this._moved&&k.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=k,this._move(v,k))}dragEnd(c){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(c)&&(this._moved&&F.suppressClick(),this.reset(c))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const yi=0,An=2,ln={[yi]:1,[An]:2};class Vn{constructor(c){this._correctEvent=c.checkCorrectEvent}startMove(c){const p=F.mouseButton(c);this._eventButton=p}endMove(c){delete this._eventButton}isValidStartEvent(c){return this._correctEvent(c)}isValidMoveEvent(c){return!(function(p,v){const k=ln[v];return p.buttons===void 0||(p.buttons&k)!==k})(c,this._eventButton)}isValidEndEvent(c){return F.mouseButton(c)===this._eventButton}}class ga{constructor(){this._firstTouch=void 0}_isOneFingerTouch(c){return c.targetTouches.length===1}_isSameTouchEvent(c){return c.targetTouches[0].identifier===this._firstTouch}startMove(c){this._firstTouch=c.targetTouches[0].identifier}endMove(c){delete this._firstTouch}isValidStartEvent(c){return this._isOneFingerTouch(c)}isValidMoveEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}isValidEndEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}}class Sr{constructor(c=new Vn({checkCorrectEvent:()=>!0}),p=new ga){this.mouseMoveStateManager=c,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(c,p,v){return c instanceof MouseEvent?p(c):typeof TouchEvent<"u"&&c instanceof TouchEvent?v(c):void 0}startMove(c){this._executeRelevantHandler(c,(p=>this.mouseMoveStateManager.startMove(p)),(p=>this.oneFingerTouchMoveStateManager.startMove(p)))}endMove(c){this._executeRelevantHandler(c,(p=>this.mouseMoveStateManager.endMove(p)),(p=>this.oneFingerTouchMoveStateManager.endMove(p)))}isValidStartEvent(c){return this._executeRelevantHandler(c,(p=>this.mouseMoveStateManager.isValidStartEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p)))}isValidMoveEvent(c){return this._executeRelevantHandler(c,(p=>this.mouseMoveStateManager.isValidMoveEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p)))}isValidEndEvent(c){return this._executeRelevantHandler(c,(p=>this.mouseMoveStateManager.isValidEndEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p)))}}const Wr=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=c=>{c.preventDefault()}};class sh{constructor(c,p){this._clickTolerance=c.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(c){return c<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(c,p,v){return this._calculateTransform(c,p,v)}touchmove(c,p,v){if(this._active){if(!this._shouldBePrevented(v.length))return c.preventDefault(),this._calculateTransform(c,p,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",c)}}touchend(c,p,v){this._calculateTransform(c,p,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,p,v){v.length>0&&(this._active=!0);const k=jo(v,p),P=new s.P(0,0),N=new s.P(0,0);let H=0;for(const Q in k){const ne=k[Q],he=this._touches[Q];he&&(P._add(ne),N._add(ne.sub(he)),H++,k[Q]=ne)}if(this._touches=k,this._shouldBePrevented(H)||!N.mag())return;const Y=N.div(H);return this._sum._add(Y),this._sum.mag()<this._clickTolerance?void 0:{around:P.div(H),panDelta:Y}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class es{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(c,p,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([p[0],p[1]]))}touchmove(c,p,v){if(!this._firstTwoTouches)return;c.preventDefault();const[k,P]=this._firstTwoTouches,N=po(v,p,k),H=po(v,p,P);if(!N||!H)return;const Y=this._aroundCenter?null:N.add(H).div(2);return this._move([N,H],Y,c)}touchend(c,p,v){if(!this._firstTwoTouches)return;const[k,P]=this._firstTwoTouches,N=po(v,p,k),H=po(v,p,P);N&&H||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function po(I,c,p){for(let v=0;v<I.length;v++)if(I[v].identifier===p)return c[v]}function Uh(I,c){return Math.log(I/c)/Math.LN2}class wg extends es{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,p){const v=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Uh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Uh(this._distance,v),pinchAround:p}}}function Ey(I,c){return 180*I.angleWith(c)/Math.PI}class Sg extends es{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,p,v){const k=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ey(this._vector,k),pinchAround:p}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const p=25/(Math.PI*this._minDiameter)*360,v=Ey(c,this._startVector);return Math.abs(v)<p}}function kg(I){return Math.abs(I.y)>Math.abs(I.x)}class My extends es{constructor(c){super(),this._currentTouchCount=0,this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,p,v){super.touchstart(c,p,v),this._currentTouchCount=v.length}_start(c){this._lastPoints=c,kg(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,p,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const k=c[0].sub(this._lastPoints[0]),P=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(k,P,v.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(k.y+P.y)/2*-.5}):void 0}gestureBeginsVertically(c,p,v){if(this._valid!==void 0)return this._valid;const k=c.mag()>=2,P=p.mag()>=2;if(!k&&!P)return;if(!k||!P)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const N=c.y>0==p.y>0;return kg(c)&&kg(p)&&N}}const Tu={panStep:100,bearingStep:15,pitchStep:10};class sr{constructor(c){this._tr=new Cu(c);const p=Tu;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let p=0,v=0,k=0,P=0,N=0;switch(c.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:c.shiftKey?v=-1:(c.preventDefault(),P=-1);break;case 39:c.shiftKey?v=1:(c.preventDefault(),P=1);break;case 38:c.shiftKey?k=1:(c.preventDefault(),N=-1);break;case 40:c.shiftKey?k=-1:(c.preventDefault(),N=1);break;default:return}return this._rotationDisabled&&(v=0,k=0),{cameraAnimation:H=>{const Y=this._tr;H.easeTo({duration:300,easeId:"keyboardHandler",easing:px,zoom:p?Math.round(Y.zoom)+p*(c.shiftKey?2:1):Y.zoom,bearing:Y.bearing+v*this._bearingStep,pitch:Y.pitch+k*this._pitchStep,offset:[-P*this._panStep,-N*this._panStep],center:Y.center},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function px(I){return I*(2-I)}const Pd=4.000244140625,Wf=1/450;class Xf{constructor(c,p){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=c,this._tr=new Cu(c),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Wf}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(c){return!!this._map.cooperativeGestures.isEnabled()&&!(c.ctrlKey||this._map.cooperativeGestures.isBypassed(c))}wheel(c){if(!this.isEnabled())return;if(this._shouldBePrevented(c))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",c);let p=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const v=D(),k=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,p!==0&&p%Pd==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(k*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),c.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=c,this._delta-=p,this._active||this._start(c)),c.preventDefault()}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=F.mousePos(this._map.getCanvas(),c),v=this._tr;this._aroundPoint=this._aroundCenter?v.transform.locationToScreenPoint(s.V.convert(v.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const H=c.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=H),typeof this._targetZoom=="number"&&(this._targetZoom+=H)}if(this._delta!==0){const H=this._type==="wheel"&&Math.abs(this._delta)>Pd?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&Y!==0&&(Y=1/Y);const Q=typeof this._targetZoom!="number"?c.scale:s.aq(this._targetZoom);this._targetZoom=c.applyConstrain(c.getCameraLngLat(),s.at(Q*Y)).zoom,this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?c.zoom:this._targetZoom,v=this._startZoom,k=this._easing;let P,N=!1;if(this._type==="wheel"&&v&&k){const H=D()-this._lastWheelEventTime,Y=Math.min((H+5)/200,1),Q=k(Y);P=s.G.number(v,p,Q),Y<1?this._frameId||(this._frameId=!0):N=!0}else P=p,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=P,{noInertia:!0,needsRenderFrame:!N,zoomDelta:P-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let p=s.cy;if(this._prevEase){const v=this._prevEase,k=(D()-v.start)/v.duration,P=v.easing(k+.01)-v.easing(k),N=.27/Math.sqrt(P*P+1e-4)*.01,H=Math.sqrt(.0729-N*N);p=s.cw(N,H,.25,1)}return this._prevEase={start:D(),duration:c,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Cg{constructor(c,p){this._clickZoom=c,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Iy{constructor(c){this._tr=new Cu(c),this.reset()}reset(){this._active=!1}dblclick(c,p){return c.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(c.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Py{constructor(){this._tap=new Hh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(c,p,v){if(!this._swipePoint)if(this._tapTime){const k=p[0],P=c.timeStamp-this._tapTime<500,N=this._tapPoint.dist(k)<30;P&&N?v.length>0&&(this._swipePoint=k,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(c,p,v)}touchmove(c,p,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const k=p[0],P=k.y-this._swipePoint.y;return this._swipePoint=k,c.preventDefault(),this._active=!0,{zoomDelta:P/128}}}else this._tap.touchmove(c,p,v)}touchend(c,p,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const k=this._tap.touchend(c,p,v);k&&(this._tapTime=c.timeStamp,this._tapPoint=k)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ly{constructor(c,p,v){this._el=c,this._mousePan=p,this._touchPan=v}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Yl{constructor(c,p,v,k){this._pitchWithRotate=c.pitchWithRotate,this._rollEnabled=c.rollEnabled,this._mouseRotate=p,this._mousePitch=v,this._mouseRoll=k}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ld{constructor(c,p,v,k){this._el=c,this._touchZoom=p,this._touchRotate=v,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Tn{constructor(c,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=c,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const c=this._map.getCanvasContainer();c.classList.add("maplibregl-cooperative-gestures"),this._container=F.create("div","maplibregl-cooperative-gesture-screen",c);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),k=document.createElement("div");k.className="maplibregl-desktop-message",k.textContent=p,this._container.appendChild(k);const P=document.createElement("div");P.className="maplibregl-mobile-message",P.textContent=v,this._container.appendChild(P),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(F.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(c){return c[this._bypassKey]}notifyGestureBlocked(c,p){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:c,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Un=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class Dd extends s.l{}function Yf(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class qf{constructor(c,p){this.handleWindowEvent=k=>{this.handleEvent(k,`${k.type}Window`)},this.handleEvent=(k,P)=>{if(k.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const N=k.type==="renderFrame"?void 0:k,H={needsRenderFrame:!1},Y={},Q={};for(const{handlerName:ue,handler:_e,allowed:Ee}of this._handlers){if(!_e.isEnabled())continue;let Ne;if(this._blockedByActive(Q,Ee,ue))_e.reset();else if(_e[P||k.type]){if(s.cz(k,P||k.type)){const Ue=F.mousePos(this._map.getCanvas(),k);Ne=_e[P||k.type](k,Ue)}else if(s.cA(k,P||k.type)){const Ue=this._getMapTouches(k.touches),je=F.touchPos(this._map.getCanvas(),Ue);Ne=_e[P||k.type](k,je,Ue)}else s.cB(P||k.type)||(Ne=_e[P||k.type](k));this.mergeHandlerResult(H,Y,Ne,ue,N),Ne&&Ne.needsRenderFrame&&this._triggerRenderFrame()}(Ne||_e.isActive())&&(Q[ue]=_e)}const ne={};for(const ue in this._previousActiveHandlers)Q[ue]||(ne[ue]=N);this._previousActiveHandlers=Q,(Object.keys(ne).length||Yf(H))&&(this._changes.push([H,Y,ne]),this._triggerRenderFrame()),(Object.keys(Q).length||Yf(H))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=H;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))},this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ns(c),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[k,P,N]of this._listeners)F.addEventListener(k,P,k===document?this.handleWindowEvent:this.handleEvent,N)}destroy(){for(const[c,p,v]of this._listeners)F.removeEventListener(c,p,c===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(c){const p=this._map,v=p.getCanvasContainer();this._add("mapEvent",new ku(p,c));const k=p.boxZoom=new Au(p,c);this._add("boxZoom",k),c.interactive&&c.boxZoom&&k.enable();const P=p.cooperativeGestures=new Tn(p,c.cooperativeGestures);this._add("cooperativeGestures",P),c.cooperativeGestures&&P.enable();const N=new Xe(p),H=new Iy(p);p.doubleClickZoom=new Cg(H,N),this._add("tapZoom",N),this._add("clickZoom",H),c.interactive&&c.doubleClickZoom&&p.doubleClickZoom.enable();const Y=new Py;this._add("tapDragZoom",Y);const Q=p.touchPitch=new My(p);this._add("touchPitch",Q),c.interactive&&c.touchPitch&&p.touchPitch.enable(c.touchPitch);const ne=()=>p.project(p.getCenter()),he=(function({enable:Je,clickTolerance:st,aroundCenter:ft=!0,minPixelCenterThreshold:at=100,rotateDegreesPerPixelMoved:kt=.8},Yt){const Ft=new Vn({checkCorrectEvent:jt=>F.mouseButton(jt)===0&&jt.ctrlKey||F.mouseButton(jt)===2&&!jt.ctrlKey});return new ui({clickTolerance:st,move:(jt,Vt)=>{const Mi=Yt();if(ft&&Math.abs(Mi.y-jt.y)>at)return{bearingDelta:s.cx(new s.P(jt.x,Vt.y),Vt,Mi)};let Pi=(Vt.x-jt.x)*kt;return ft&&Vt.y<Mi.y&&(Pi=-Pi),{bearingDelta:Pi}},moveStateManager:Ft,enable:Je,assignEvents:Wr})})(c,ne),ue=(function({enable:Je,clickTolerance:st,pitchDegreesPerPixelMoved:ft=-.5}){const at=new Vn({checkCorrectEvent:kt=>F.mouseButton(kt)===0&&kt.ctrlKey||F.mouseButton(kt)===2});return new ui({clickTolerance:st,move:(kt,Yt)=>({pitchDelta:(Yt.y-kt.y)*ft}),moveStateManager:at,enable:Je,assignEvents:Wr})})(c),_e=(function({enable:Je,clickTolerance:st,rollDegreesPerPixelMoved:ft=.3},at){const kt=new Vn({checkCorrectEvent:Yt=>F.mouseButton(Yt)===2&&Yt.ctrlKey});return new ui({clickTolerance:st,move:(Yt,Ft)=>{const jt=at();let Vt=(Ft.x-Yt.x)*ft;return Ft.y<jt.y&&(Vt=-Vt),{rollDelta:Vt}},moveStateManager:kt,enable:Je,assignEvents:Wr})})(c,ne);p.dragRotate=new Yl(c,he,ue,_e),this._add("mouseRotate",he,["mousePitch"]),this._add("mousePitch",ue,["mouseRotate","mouseRoll"]),this._add("mouseRoll",_e,["mousePitch"]),c.interactive&&c.dragRotate&&p.dragRotate.enable();const Ee=(function({enable:Je,clickTolerance:st}){const ft=new Vn({checkCorrectEvent:at=>F.mouseButton(at)===0&&!at.ctrlKey});return new ui({clickTolerance:st,move:(at,kt)=>({around:kt,panDelta:kt.sub(at)}),activateOnStart:!0,moveStateManager:ft,enable:Je,assignEvents:Wr})})(c),Ne=new sh(c,p);p.dragPan=new Ly(v,Ee,Ne),this._add("mousePan",Ee),this._add("touchPan",Ne,["touchZoom","touchRotate"]),c.interactive&&c.dragPan&&p.dragPan.enable(c.dragPan);const Ue=new Sg,je=new wg;p.touchZoomRotate=new Ld(v,je,Ue,Y),this._add("touchRotate",Ue,["touchPan","touchZoom"]),this._add("touchZoom",je,["touchPan","touchRotate"]),c.interactive&&c.touchZoomRotate&&p.touchZoomRotate.enable(c.touchZoomRotate),this._add("blockableMapEvent",new Id(p));const et=p.scrollZoom=new Xf(p,(()=>this._triggerRenderFrame()));this._add("scrollZoom",et,["mousePan"]),c.interactive&&c.scrollZoom&&p.scrollZoom.enable(c.scrollZoom);const lt=p.keyboard=new sr(p);this._add("keyboard",lt),c.interactive&&c.keyboard&&p.keyboard.enable()}_add(c,p,v){this._handlers.push({handlerName:c,handler:p,allowed:v}),this._handlersById[c]=p}stop(c){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Un(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,p,v){for(const k in c)if(k!==v&&(!p||p.indexOf(k)<0))return!0;return!1}_getMapTouches(c){const p=[];for(const v of c)this._el.contains(v.target)&&p.push(v);return p}mergeHandlerResult(c,p,v,k,P){if(!v)return;s.e(c,v);const N={handlerName:k,originalEvent:v.originalEvent||P};v.zoomDelta!==void 0&&(p.zoom=N),v.panDelta!==void 0&&(p.drag=N),v.rollDelta!==void 0&&(p.roll=N),v.pitchDelta!==void 0&&(p.pitch=N),v.bearingDelta!==void 0&&(p.rotate=N)}_applyChanges(){const c={},p={},v={};for(const[k,P,N]of this._changes)k.panDelta&&(c.panDelta=(c.panDelta||new s.P(0,0))._add(k.panDelta)),k.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+k.pitchDelta),k.rollDelta&&(c.rollDelta=(c.rollDelta||0)+k.rollDelta),k.around!==void 0&&(c.around=k.around),k.pinchAround!==void 0&&(c.pinchAround=k.pinchAround),k.noInertia&&(c.noInertia=k.noInertia),s.e(p,P),s.e(v,N);this._updateMapTransform(c,p,v),this._changes=[]}_updateMapTransform(c,p,v){const k=this._map,P=k._getTransformForUpdate(),N=k.terrain;if(!(Yf(c)||N&&this._terrainMovement))return this._fireEvents(p,v,!0);k._stop(!0);let{panDelta:H,zoomDelta:Y,bearingDelta:Q,pitchDelta:ne,rollDelta:he,around:ue,pinchAround:_e}=c;_e!==void 0&&(ue=_e),ue=ue||k.transform.centerPoint,N&&!P.isPointOnMapSurface(ue)&&(ue=P.centerPoint);const Ee={panDelta:H,zoomDelta:Y,rollDelta:he,pitchDelta:ne,bearingDelta:Q,around:ue};this._map.cameraHelper.useGlobeControls&&!P.isPointOnMapSurface(ue)&&(ue=P.centerPoint);const Ne=ue.distSqr(P.centerPoint)<.01?P.center:P.screenPointToLocation(H?ue.sub(H):ue);this._handleMapControls({terrain:N,tr:P,deltasForHelper:Ee,preZoomAroundLoc:Ne,combinedEventsInProgress:p,panDelta:H}),k._applyUpdatedTransform(P),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(p,v,!0)}_handleMapControls({terrain:c,tr:p,deltasForHelper:v,preZoomAroundLoc:k,combinedEventsInProgress:P,panDelta:N}){const H=this._map.cameraHelper;if(H.handleMapControlsRollPitchBearingZoom(v,p),c)return H.useGlobeControls?(this._terrainMovement||!P.drag&&!P.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void H.handleMapControlsPan(v,p,k)):this._terrainMovement||!P.drag&&!P.zoom?void(P.drag&&this._terrainMovement&&N?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(N))):H.handleMapControlsPan(v,p,k)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void H.handleMapControlsPan(v,p,k));H.handleMapControlsPan(v,p,k)}_fireEvents(c,p,v){const k=Un(this._eventsInProgress),P=Un(c),N={};for(const he in c){const{originalEvent:ue}=c[he];this._eventsInProgress[he]||(N[`${he}start`]=ue),this._eventsInProgress[he]=c[he]}!k&&P&&this._fireEvent("movestart",P.originalEvent);for(const he in N)this._fireEvent(he,N[he]);P&&this._fireEvent("move",P.originalEvent);for(const he in c){const{originalEvent:ue}=c[he];this._fireEvent(he,ue)}const H={};let Y;for(const he in this._eventsInProgress){const{handlerName:ue,originalEvent:_e}=this._eventsInProgress[he];this._handlersById[ue].isActive()||(delete this._eventsInProgress[he],Y=p[ue]||_e,H[`${he}end`]=Y)}for(const he in H)this._fireEvent(he,H[he]);const Q=Un(this._eventsInProgress),ne=(k||P)&&!Q;if(ne&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const he=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&he.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(he)}if(v&&ne){this._updatingCamera=!0;const he=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ue=_e=>_e!==0&&-this._bearingSnap<_e&&_e<this._bearingSnap;!he||!he.essential&&E.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:Y})),ue(this._map.getBearing())&&this._map.resetNorth()):(ue(he.bearing||this._map.getBearing())&&(he.bearing=0),he.freezeElevation=!0,this._map.easeTo(he,{originalEvent:Y})),this._updatingCamera=!1}}_fireEvent(c,p){this._map.fire(new s.l(c,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((c=>{delete this._frameId,this.handleEvent(new Dd("renderFrame",{timeStamp:c})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Eo extends s.E{constructor(c,p,v){super(),this._renderFrameCallback=()=>{const k=Math.min((D()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(k)),k<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=v.bearingSnap,this.cameraHelper=p,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(c,p){c.apply(this.transform),this.transform=c,this.cameraHelper=p}getCenter(){return new s.V(this.transform.center.lng,this.transform.center.lat)}setCenter(c,p){return this.jumpTo({center:c},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(c,p){return this.jumpTo({elevation:c},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(c){this._centerClampedToGround=c}panBy(c,p,v){return c=s.P.convert(c).mult(-1),this.panTo(this.transform.center,s.e({offset:c},p),v)}panTo(c,p,v){return this.easeTo(s.e({center:c},p),v)}getZoom(){return this.transform.zoom}setZoom(c,p){return this.jumpTo({zoom:c},p),this}zoomTo(c,p,v){return this.easeTo(s.e({zoom:c},p),v)}zoomIn(c,p){return this.zoomTo(this.getZoom()+1,c,p),this}zoomOut(c,p){return this.zoomTo(this.getZoom()-1,c,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(c,p){return c!=this.transform.fov&&(this.transform.setFov(c),this.fire(new s.l("movestart",p)).fire(new s.l("move",p)).fire(new s.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(c,p){return this.jumpTo({bearing:c},p),this}getPadding(){return this.transform.padding}setPadding(c,p){return this.jumpTo({padding:c},p),this}rotateTo(c,p,v){return this.easeTo(s.e({bearing:c},p),v)}resetNorth(c,p){return this.rotateTo(0,s.e({duration:1e3},c),p),this}resetNorthPitch(c,p){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},c),p),this}snapToNorth(c,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,p):this}getPitch(){return this.transform.pitch}setPitch(c,p){return this.jumpTo({pitch:c},p),this}getRoll(){return this.transform.roll}setRoll(c,p){return this.jumpTo({roll:c},p),this}cameraForBounds(c,p){c=Ye.convert(c).adjustAntiMeridian();const v=p&&p.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),v,p)}_cameraForBoxAndBearing(c,p,v,k){const P={top:0,bottom:0,right:0,left:0};if(typeof(k=s.e({padding:P,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){const Q=k.padding;k.padding={top:Q,bottom:Q,right:Q,left:Q}}const N=s.e(P,k.padding);k.padding=N;const H=this.transform,Y=new Ye(c,p);return this.cameraHelper.cameraForBoxAndBearing(k,N,Y,v,H)}fitBounds(c,p,v){return this._fitInternal(this.cameraForBounds(c,p),p,v)}fitScreenCoordinates(c,p,v,k,P){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(c)),this.transform.screenPointToLocation(s.P.convert(p)),v,k),k,P)}_fitInternal(c,p,v){return c?(delete(p=s.e(c,p)).padding,p.linear?this.easeTo(p,v):this.flyTo(p,v)):this}jumpTo(c,p){this.stop();const v=this._getTransformForUpdate();let k=!1,P=!1,N=!1;const H=v.zoom;this.cameraHelper.handleJumpToCenterZoom(v,c);const Y=v.zoom!==H;return"elevation"in c&&v.elevation!==+c.elevation&&v.setElevation(+c.elevation),"bearing"in c&&v.bearing!==+c.bearing&&(k=!0,v.setBearing(+c.bearing)),"pitch"in c&&v.pitch!==+c.pitch&&(P=!0,v.setPitch(+c.pitch)),"roll"in c&&v.roll!==+c.roll&&(N=!0,v.setRoll(+c.roll)),c.padding==null||v.isPaddingEqual(c.padding)||v.setPadding(c.padding),this._applyUpdatedTransform(v),this.fire(new s.l("movestart",p)).fire(new s.l("move",p)),Y&&this.fire(new s.l("zoomstart",p)).fire(new s.l("zoom",p)).fire(new s.l("zoomend",p)),k&&this.fire(new s.l("rotatestart",p)).fire(new s.l("rotate",p)).fire(new s.l("rotateend",p)),P&&this.fire(new s.l("pitchstart",p)).fire(new s.l("pitch",p)).fire(new s.l("pitchend",p)),N&&this.fire(new s.l("rollstart",p)).fire(new s.l("roll",p)).fire(new s.l("rollend",p)),this.fire(new s.l("moveend",p))}calculateCameraOptionsFromTo(c,p,v,k=0){const P=s.a9.fromLngLat(c,p),N=s.a9.fromLngLat(v,k),H=N.x-P.x,Y=N.y-P.y,Q=N.z-P.z,ne=Math.hypot(H,Y,Q);if(ne===0)throw new Error("Can't calculate camera options with same From and To");const he=Math.hypot(H,Y),ue=s.at(this.transform.cameraToCenterDistance/ne/this.transform.tileSize),_e=180*Math.atan2(H,-Y)/Math.PI;let Ee=180*Math.acos(he/ne)/Math.PI;return Ee=Q<0?90-Ee:90+Ee,{center:N.toLngLat(),elevation:k,zoom:ue,pitch:Ee,bearing:_e}}calculateCameraOptionsFromCameraLngLatAltRotation(c,p,v,k,P){const N=this.transform.calculateCenterFromCameraLngLatAlt(c,p,v,k);return{center:N.center,elevation:N.elevation,zoom:N.zoom,bearing:v,pitch:k,roll:P}}easeTo(c,p){this._stop(!1,c.easeId),((c=s.e({offset:[0,0],duration:500,easing:s.cy},c)).animate===!1||!c.essential&&E.prefersReducedMotion)&&(c.duration=0);const v=this._getTransformForUpdate(),k=this.getBearing(),P=v.pitch,N=v.roll,H="bearing"in c?this._normalizeBearing(c.bearing,k):k,Y="pitch"in c?+c.pitch:P,Q="roll"in c?this._normalizeBearing(c.roll,N):N,ne="padding"in c?c.padding:v.padding,he=s.P.convert(c.offset);let ue,_e;c.around&&(ue=s.V.convert(c.around),_e=v.locationToScreenPoint(ue));const Ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ne=this.cameraHelper.handleEaseTo(v,{bearing:H,pitch:Y,roll:Q,padding:ne,around:ue,aroundPoint:_e,offsetAsPoint:he,offset:c.offset,zoom:c.zoom,center:c.center});return this._rotating=this._rotating||k!==H,this._pitching=this._pitching||Y!==P,this._rolling=this._rolling||Q!==N,this._padding=!v.isPaddingEqual(ne),this._zooming=this._zooming||Ne.isZooming,this._easeId=c.easeId,this._prepareEase(p,c.noMoveStart,Ee),this.terrain&&this._prepareElevation(Ne.elevationCenter),this._ease((Ue=>{Ne.easeFunc(Ue),this.terrain&&!c.freezeElevation&&this._updateElevation(Ue),this._applyUpdatedTransform(v),this._fireMoveEvents(p)}),(Ue=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(p,Ue)}),c),this}_prepareEase(c,p,v={}){this._moving=!0,p||v.moving||this.fire(new s.l("movestart",c)),this._zooming&&!v.zooming&&this.fire(new s.l("zoomstart",c)),this._rotating&&!v.rotating&&this.fire(new s.l("rotatestart",c)),this._pitching&&!v.pitching&&this.fire(new s.l("pitchstart",c)),this._rolling&&!v.rolling&&this.fire(new s.l("rollstart",c))}_prepareElevation(c){this._elevationCenter=c,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(c){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(c<1&&p!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=c*(v-(p-(v*c+this._elevationStart))/(1-c)),this._elevationTarget=p}this.transform.setElevation(s.G.number(this._elevationStart,this._elevationTarget,c))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(c){if(!this.terrain&&c.elevation>=0&&c.pitch<=90)return{};const p=c.getCameraLngLat(),v=c.getCameraAltitude(),k=this.terrain?this.terrain.getElevationForLngLatZoom(p,c.zoom):0;if(v<k){const P=this.calculateCameraOptionsFromTo(p,k,c.center,c.elevation);return{pitch:P.pitch,zoom:P.zoom}}return{}}_applyUpdatedTransform(c){const p=[];if(p.push((k=>this._elevateCameraIfInsideTerrain(k))),this.transformCameraUpdate&&p.push((k=>this.transformCameraUpdate(k))),!p.length)return;const v=c.clone();for(const k of p){const P=v.clone(),{center:N,zoom:H,roll:Y,pitch:Q,bearing:ne,elevation:he}=k(P);N&&P.setCenter(N),he!==void 0&&P.setElevation(he),H!==void 0&&P.setZoom(H),Y!==void 0&&P.setRoll(Y),Q!==void 0&&P.setPitch(Q),ne!==void 0&&P.setBearing(ne),v.apply(P)}this.transform.apply(v)}_fireMoveEvents(c){this.fire(new s.l("move",c)),this._zooming&&this.fire(new s.l("zoom",c)),this._rotating&&this.fire(new s.l("rotate",c)),this._pitching&&this.fire(new s.l("pitch",c)),this._rolling&&this.fire(new s.l("roll",c))}_afterEase(c,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const v=this._zooming,k=this._rotating,P=this._pitching,N=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,v&&this.fire(new s.l("zoomend",c)),k&&this.fire(new s.l("rotateend",c)),P&&this.fire(new s.l("pitchend",c)),N&&this.fire(new s.l("rollend",c)),this.fire(new s.l("moveend",c))}flyTo(c,p){if(!c.essential&&E.prefersReducedMotion){const Vt=s.U(c,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Vt,p)}this.stop(),c=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cy},c);const v=this._getTransformForUpdate(),k=v.bearing,P=v.pitch,N=v.roll,H=v.padding,Y="bearing"in c?this._normalizeBearing(c.bearing,k):k,Q="pitch"in c?+c.pitch:P,ne="roll"in c?this._normalizeBearing(c.roll,N):N,he="padding"in c?c.padding:v.padding,ue=s.P.convert(c.offset);let _e=v.centerPoint.add(ue);const Ee=v.screenPointToLocation(_e),Ne=this.cameraHelper.handleFlyTo(v,{bearing:Y,pitch:Q,roll:ne,padding:he,locationAtOffset:Ee,offsetAsPoint:ue,center:c.center,minZoom:c.minZoom,zoom:c.zoom});let Ue=c.curve;const je=Math.max(v.width,v.height),et=je/Ne.scaleOfZoom,lt=Ne.pixelPathLength;typeof Ne.scaleOfMinZoom=="number"&&(Ue=Math.sqrt(je/Ne.scaleOfMinZoom/lt*2));const Je=Ue*Ue;function st(Vt){const Mi=(et*et-je*je+(Vt?-1:1)*Je*Je*lt*lt)/(2*(Vt?et:je)*Je*lt);return Math.log(Math.sqrt(Mi*Mi+1)-Mi)}function ft(Vt){return(Math.exp(Vt)-Math.exp(-Vt))/2}function at(Vt){return(Math.exp(Vt)+Math.exp(-Vt))/2}const kt=st(!1);let Yt=function(Vt){return at(kt)/at(kt+Ue*Vt)},Ft=function(Vt){return je*((at(kt)*(ft(Mi=kt+Ue*Vt)/at(Mi))-ft(kt))/Je)/lt;var Mi},jt=(st(!0)-kt)/Ue;if(Math.abs(lt)<2e-6||!isFinite(jt)){if(Math.abs(je-et)<1e-6)return this.easeTo(c,p);const Vt=et<je?-1:1;jt=Math.abs(Math.log(et/je))/Ue,Ft=()=>0,Yt=Mi=>Math.exp(Vt*Ue*Mi)}return c.duration="duration"in c?+c.duration:1e3*jt/("screenSpeed"in c?+c.screenSpeed/Ue:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=k!==Y,this._pitching=Q!==P,this._rolling=ne!==N,this._padding=!v.isPaddingEqual(he),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Ne.targetCenter),this._ease((Vt=>{const Mi=Vt*jt,Pi=1/Yt(Mi),fi=Ft(Mi);this._rotating&&v.setBearing(s.G.number(k,Y,Vt)),this._pitching&&v.setPitch(s.G.number(P,Q,Vt)),this._rolling&&v.setRoll(s.G.number(N,ne,Vt)),this._padding&&(v.interpolatePadding(H,he,Vt),_e=v.centerPoint.add(ue)),Ne.easeFunc(Vt,Pi,fi,_e),this.terrain&&!c.freezeElevation&&this._updateElevation(Vt),this._applyUpdatedTransform(v),this._fireMoveEvents(p)}),(()=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(p)}),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,p){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,p)}return c||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(c,p,v){v.animate===!1||v.duration===0?(c(1),p()):(this._easeStart=D(),this._easeOptions=v,this._onEaseFrame=c,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(c,p){c=s.W(c,-180,180);const v=Math.abs(c-p);return Math.abs(c-360-p)<v&&(c-=360),Math.abs(c+360-p)<v&&(c+=360),c}queryTerrainElevation(c){return this.terrain?this.terrain.getElevationForLngLat(s.V.convert(c),this.transform):null}}const Cl={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ag{constructor(c=Cl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=c}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,p){const v=this._map._getUIString(`AttributionControl.${p}`);c.title=v,c.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map((k=>typeof k!="string"?"":k))):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const p=this._map.style.tileManagers;for(const k in p){const P=p[k];if(P.used||P.usedForTerrain){const N=P.getSource();N.attribution&&c.indexOf(N.attribution)<0&&c.push(N.attribution)}}c=c.filter((k=>String(k).trim())),c.sort(((k,P)=>k.length-P.length)),c=c.filter(((k,P)=>{for(let N=P+1;N<c.length;N++)if(c[N].indexOf(k)>=0)return!1;return!0}));const v=c.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,c.length?(this._innerContainer.innerHTML=F.sanitize(v),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Dy{constructor(c={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const v=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=c}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl");const p=F.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class gx{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const p=++this._id;return this._queue.push({callback:c,id:p,cancelled:!1}),p}remove(c){const p=this._currentlyRunning,v=p?this._queue.concat(p):this._queue;for(const k of v)if(k.id===c)return void(k.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const v of p)if(!v.cancelled&&(v.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var mx=s.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Rd extends s.E{constructor(c){super(),this._lastTilesetChange=D(),this.tileManager=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=c._source.tileSize*2**this.deltaZoom,c.usedForTerrain=!0,c.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(c,p){this.tileManager.update(c,p),this._renderableTilesKeys=[];const v={};for(const k of mn(c,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.tileManager._source.calculateTileZoom}))v[k.key]=!0,this._renderableTilesKeys.push(k.key),this._tiles[k.key]||(k.terrainRttPosMatrix32f=new Float64Array(16),s.c7(k.terrainRttPosMatrix32f,0,s.a5,s.a5,0,0,1),this._tiles[k.key]=new Ut(k,this.tileSize),this._lastTilesetChange=D());for(const k in this._tiles)v[k]||delete this._tiles[k]}freeRtt(c){for(const p in this._tiles){const v=this._tiles[p];(!c||v.tileID.equals(c)||v.tileID.isChildOf(c)||c.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((c=>this.getTileByID(c)))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c,p){return p?this._getTerrainCoordsForTileRanges(c,p):this._getTerrainCoordsForRegularTile(c)}_getTerrainCoordsForRegularTile(c){const p={};for(const v of this._renderableTilesKeys){const k=this._tiles[v].tileID,P=c.clone(),N=s.bk();if(k.canonical.equals(c.canonical))s.c7(N,0,s.a5,s.a5,0,0,1);else if(k.canonical.isChildOf(c.canonical)){const H=k.canonical.z-c.canonical.z,Y=k.canonical.x-(k.canonical.x>>H<<H),Q=k.canonical.y-(k.canonical.y>>H<<H),ne=s.a5>>H;s.c7(N,0,ne,ne,0,0,1),s.O(N,N,[-Y*ne,-Q*ne,0])}else{if(!c.canonical.isChildOf(k.canonical))continue;{const H=c.canonical.z-k.canonical.z,Y=c.canonical.x-(c.canonical.x>>H<<H),Q=c.canonical.y-(c.canonical.y>>H<<H),ne=s.a5>>H;s.c7(N,0,s.a5,s.a5,0,0,1),s.O(N,N,[Y*ne,Q*ne,0]),s.Q(N,N,[1/2**H,1/2**H,0])}}P.terrainRttPosMatrix32f=new Float32Array(N),p[v]=P}return p}_getTerrainCoordsForTileRanges(c,p){const v={};for(const k of this._renderableTilesKeys){const P=this._tiles[k].tileID;if(!this._isWithinTileRanges(P,p))continue;const N=c.clone(),H=s.bk();if(P.canonical.z===c.canonical.z){const Y=c.canonical.x-P.canonical.x,Q=c.canonical.y-P.canonical.y;s.c7(H,0,s.a5,s.a5,0,0,1),s.O(H,H,[Y*s.a5,Q*s.a5,0])}else if(P.canonical.z>c.canonical.z){const Y=P.canonical.z-c.canonical.z,Q=P.canonical.x-(P.canonical.x>>Y<<Y),ne=P.canonical.y-(P.canonical.y>>Y<<Y),he=c.canonical.x-(P.canonical.x>>Y),ue=c.canonical.y-(P.canonical.y>>Y),_e=s.a5>>Y;s.c7(H,0,_e,_e,0,0,1),s.O(H,H,[-Q*_e+he*s.a5,-ne*_e+ue*s.a5,0])}else{const Y=c.canonical.z-P.canonical.z,Q=c.canonical.x-(c.canonical.x>>Y<<Y),ne=c.canonical.y-(c.canonical.y>>Y<<Y),he=(c.canonical.x>>Y)-P.canonical.x,ue=(c.canonical.y>>Y)-P.canonical.y,_e=s.a5<<Y;s.c7(H,0,_e,_e,0,0,1),s.O(H,H,[Q*s.a5+he*_e,ne*s.a5+ue*_e,0])}N.terrainRttPosMatrix32f=new Float32Array(H),v[k]=N}return v}getSourceTile(c,p){const v=this.tileManager._source;let k=c.overscaledZ-this.deltaZoom;if(k>v.maxzoom&&(k=v.maxzoom),k<v.minzoom)return;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(k).key);let P=this.findTileInCaches(this._sourceTileCache[c.key]);if(!P?.dem&&p)for(;k>=v.minzoom&&!P?.dem;)P=this.findTileInCaches(c.scaledTo(k--).key);return P}findTileInCaches(c){let p=this.tileManager.getTileByID(c);return p||(p=this.tileManager._outOfViewCache.getByKey(c),p)}anyTilesAfterTime(c=Date.now()){return this._lastTilesetChange>=c}_isWithinTileRanges(c,p){return p[c.canonical.z]&&c.canonical.x>=p[c.canonical.z].minTileX&&c.canonical.x<=p[c.canonical.z].maxTileX&&c.canonical.y>=p[c.canonical.z].minTileY&&c.canonical.y<=p[c.canonical.z].maxTileY}}class Xr{constructor(c,p,v){this._meshCache={},this.painter=c,this.tileManager=new Rd(p),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(c,p,v,k=s.a5){var P;if(!(p>=0&&p<k&&v>=0&&v<k))return 0;const N=this.getTerrainData(c),H=(P=N.tile)===null||P===void 0?void 0:P.dem;if(!H)return 0;const Y=s.cC([],[p/k*s.a5,v/k*s.a5],N.u_terrain_matrix),Q=[Y[0]*H.dim,Y[1]*H.dim],ne=Math.floor(Q[0]),he=Math.floor(Q[1]),ue=Q[0]-ne,_e=Q[1]-he;return H.get(ne,he)*(1-ue)*(1-_e)+H.get(ne+1,he)*ue*(1-_e)+H.get(ne,he+1)*(1-ue)*_e+H.get(ne+1,he+1)*ue*_e}getElevationForLngLatZoom(c,p){if(!s.cD(p,c.wrap()))return 0;const{tileID:v,mercatorX:k,mercatorY:P}=this._getOverscaledTileIDFromLngLatZoom(c,p);return this.getElevation(v,k%s.a5,P%s.a5,s.a5)}getElevationForLngLat(c,p){const v=mn(p,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let k=0;for(const P of v)P.canonical.z>k&&(k=Math.min(P.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(c,k)}getElevation(c,p,v,k=s.a5){return this.getDEMElevation(c,p,v,k)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const k=this.painter.context,P=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(k,P,k.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(k,new s.R({width:1,height:1}),k.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ar([])}const p=this.tileManager.getSourceTile(c,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const k=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new s.T(k,p.dem.getPixels(),k.gl.RGBA,{premultiply:!1}),p.demTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const v=p&&p.toString()+p.tileID.key+c.key;if(v&&!this._demMatrixCache[v]){const k=this.tileManager.getSource().maxzoom;let P=c.canonical.z-p.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=k?P=c.canonical.z-k:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const N=c.canonical.x-(c.canonical.x>>P<<P),H=c.canonical.y-(c.canonical.y>>P<<P),Y=s.cE(new Float64Array(16),[1/(s.a5<<P),1/(s.a5<<P),0]);s.O(Y,Y,[N*s.a5,H*s.a5,0]),this._demMatrixCache[c.key]={matrix:Y,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(c){const p=this.painter,v=p.width/devicePixelRatio,k=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===k||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(p.context,{width:v,height:k,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(p.context,{width:v,height:k,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(v,k,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,v,k))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let P=0,N=0;P<this._coordsTextureSize;P++)for(let H=0;H<this._coordsTextureSize;H++,N+=4)p[N+0]=255&H,p[N+1]=255&P,p[N+2]=H>>8<<4|P>>8,p[N+3]=0;const v=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),k=new s.T(c,v,c.gl.RGBA,{premultiply:!1});return k.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=k,k}pointCoordinate(c){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),v=this.painter.context,k=v.gl,P=Math.round(c.x*this.painter.pixelRatio/devicePixelRatio),N=Math.round(c.y*this.painter.pixelRatio/devicePixelRatio),H=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),k.readPixels(P,H-N-1,1,1,k.RGBA,k.UNSIGNED_BYTE,p),v.bindFramebuffer.set(null);const Y=p[0]+(p[2]>>4<<8),Q=p[1]+((15&p[2])<<8),ne=this.coordsIndex[255-p[3]],he=ne&&this.tileManager.getTileByID(ne);if(!he)return null;const ue=this._coordsTextureSize,_e=(1<<he.tileID.canonical.z)*ue;return new s.a9((he.tileID.canonical.x*ue+Y)/_e+he.tileID.wrap,(he.tileID.canonical.y*ue+Q)/_e,this.getElevation(he.tileID,Y,Q,ue))}depthAtPoint(c){const p=new Uint8Array(4),v=this.painter.context,k=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),k.readPixels(c.x,this.painter.height/devicePixelRatio-c.y-1,1,1,k.RGBA,k.UNSIGNED_BYTE,p),v.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(c){var p;const v=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,k=v&&c.canonical.y===0,P=v&&c.canonical.y===(1<<c.canonical.z)-1,N=`m_${k?"n":""}_${P?"s":""}`;if(this._meshCache[N])return this._meshCache[N];const H=this.painter.context,Y=new s.cF,Q=new s.aY,ne=this.meshSize,he=s.a5/ne,ue=ne*ne;for(let at=0;at<=ne;at++)for(let kt=0;kt<=ne;kt++)Y.emplaceBack(kt*he,at*he,0);for(let at=0;at<ue;at+=ne+1)for(let kt=0;kt<ne;kt++)Q.emplaceBack(kt+at,ne+kt+at+1,ne+kt+at+2),Q.emplaceBack(kt+at,ne+kt+at+2,kt+at+1);const _e=Y.length,Ee=_e+(ne+1),Ne=(ne+1)*ne,Ue=k?s.br:0,je=k?0:1,et=P?s.bs:s.a5,lt=P?0:1;for(let at=0;at<=ne;at++)Y.emplaceBack(at*he,Ue,je);for(let at=0;at<=ne;at++)Y.emplaceBack(at*he,et,lt);for(let at=0;at<ne;at++)Q.emplaceBack(Ne+at,Ee+at,Ee+at+1),Q.emplaceBack(Ne+at,Ee+at+1,Ne+at+1),Q.emplaceBack(0+at,_e+at+1,_e+at),Q.emplaceBack(0+at,0+at+1,_e+at+1);const Je=Y.length,st=Je+2*(ne+1);for(const at of[0,1])for(let kt=0;kt<=ne;kt++)for(const Yt of[0,1])Y.emplaceBack(at*s.a5,kt*he,Yt);for(let at=0;at<2*ne;at+=2)Q.emplaceBack(Je+at,Je+at+1,Je+at+3),Q.emplaceBack(Je+at,Je+at+3,Je+at+2),Q.emplaceBack(st+at,st+at+3,st+at+1),Q.emplaceBack(st+at,st+at+2,st+at+3);const ft=new Fa(H.createVertexBuffer(Y,mx.members),H.createIndexBuffer(Q),s.aX.simpleSegment(0,0,Y.length,Q.length));return this._meshCache[N]=ft,ft}getMeshFrameDelta(c){return 2*Math.PI*s.bE/Math.pow(2,Math.max(c,0))/5}getMinTileElevationForLngLatZoom(c,p){var v;if(!s.cD(p,c.wrap()))return 0;const{tileID:k}=this._getOverscaledTileIDFromLngLatZoom(c,p);return(v=this.getMinMaxElevation(k).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(c){const p=this.getTerrainData(c).tile,v={minElevation:null,maxElevation:null};return p&&p.dem&&(v.minElevation=p.dem.min*this.exaggeration,v.maxElevation=p.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(c,p){const v=s.a9.fromLngLat(c.wrap()),k=(1<<p)*s.a5,P=v.x*k,N=v.y*k,H=Math.floor(P/s.a5),Y=Math.floor(N/s.a5);return{tileID:new s.a2(p,0,p,H,Y),mercatorX:P,mercatorY:N}}}class cs{constructor(c,p,v){this._context=c,this._size=p,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const c of this._objects)c.texture.destroy(),c.fbo.destroy()}_createObject(c){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(v.texture),{id:c,fbo:p,texture:v,stamp:-1,inUse:!1}}getObjectForId(c){return this._objects[c]}useObject(c){c.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((p=>c.id!==p)),this._recentlyUsed.push(c.id)}stampObject(c){c.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const c=this._createObject(this._objects.length);return this._objects.push(c),c}freeObject(c){c.inUse=!1}freeAllObjects(){for(const c of this._objects)this.freeObject(c)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((c=>!c.inUse))===!1}}const oh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Od{constructor(c,p){this.painter=c,this.terrain=p,this.pool=new cs(c.context,30,p.tileManager.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(c){return this.pool.getObjectForId(c.rtt[this._stacks.length-1].id).texture}prepareForRender(c,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=c._order.filter((v=>!c._layers[v].isHidden(p))),this._coordsAscending={};for(const v in c.tileManagers){this._coordsAscending[v]={};const k=c.tileManagers[v].getVisibleCoordinates(),P=c.tileManagers[v].getSource(),N=P instanceof Di?P.terrainTileRanges:null;for(const H of k){const Y=this.terrain.tileManager.getTerrainCoords(H,N);for(const Q in Y)this._coordsAscending[v][Q]||(this._coordsAscending[v][Q]=[]),this._coordsAscending[v][Q].push(Y[Q])}}this._coordsAscendingStr={};for(const v of c._order){const k=c._layers[v],P=k.source;if(oh[k.type]&&!this._coordsAscendingStr[P]){this._coordsAscendingStr[P]={};for(const N in this._coordsAscending[P])this._coordsAscendingStr[P][N]=this._coordsAscending[P][N].map((H=>H.key)).sort().join()}}for(const v of this._renderableTiles)for(const k in this._coordsAscendingStr){const P=this._coordsAscendingStr[k][v.tileID.key];P&&P!==v.rttCoords[k]&&(v.rtt=[])}}renderLayer(c,p){if(c.isHidden(this.painter.transform.zoom))return!1;const v=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),k=c.type,P=this.painter,N=this._renderableLayerIds[this._renderableLayerIds.length-1]===c.id;if(oh[k]&&(this._prevType&&oh[this._prevType]||this._stacks.push([]),this._prevType=k,this._stacks[this._stacks.length-1].push(c.id),!N))return!0;if(oh[this._prevType]||oh[k]&&N){this._prevType=k;const H=this._stacks.length-1,Y=this._stacks[H]||[];for(const Q of this._renderableTiles){if(this.pool.isFull()&&(ah(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Q),Q.rtt[H]){const he=this.pool.getObjectForId(Q.rtt[H].id);if(he.stamp===Q.rtt[H].stamp){this.pool.useObject(he);continue}}const ne=this.pool.getOrCreateFreeObject();this.pool.useObject(ne),this.pool.stampObject(ne),Q.rtt[H]={id:ne.id,stamp:ne.stamp},P.context.bindFramebuffer.set(ne.fbo.framebuffer),P.context.clear({color:s.bp.transparent,stencil:0}),P.currentStencilSource=void 0;for(let he=0;he<Y.length;he++){const ue=P.style._layers[Y[he]],_e=ue.source?this._coordsAscending[ue.source][Q.tileID.key]:[Q.tileID];P.context.viewport.set([0,0,ne.fbo.width,ne.fbo.height]),P._renderTileClippingMasks(ue,_e,!0),P.renderLayer(P,P.style.tileManagers[ue.source],ue,_e,v),ue.source&&(Q.rttCoords[ue.source]=this._coordsAscendingStr[ue.source][Q.tileID.key])}}return ah(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects(),oh[k]}return!1}}const Zf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Tg=h,Kf={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Cl,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Eg={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class zd{constructor(c,p,v=!1){this.mousedown=P=>{this.startMove(P,F.mousePos(this.element,P)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.move(P,F.mousePos(this.element,P))},this.mouseup=P=>{this._rotatePitchHandler.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,P.targetTouches)[0],this.startMove(P,this._startPos),F.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,P.targetTouches)[0],this.move(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const k=new Sr;this._rotatePitchHandler=new ui({clickTolerance:3,move:(P,N)=>{const H=p.getBoundingClientRect(),Y=new s.P((H.bottom-H.top)/2,(H.right-H.left)/2);return{bearingDelta:s.cx(new s.P(P.x,N.y),N,Y),pitchDelta:v?-.5*(N.y-P.y):void 0}},moveStateManager:k,enable:!0,assignEvents:()=>{}}),this.map=c,F.addEventListener(p,"mousedown",this.mousedown),F.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(p,"touchcancel",this.reset)}startMove(c,p){this._rotatePitchHandler.dragStart(c,p),F.disableDrag()}move(c,p){const v=this.map,{bearingDelta:k,pitchDelta:P}=this._rotatePitchHandler.dragMove(c,p)||{};k&&v.setBearing(v.getBearing()+k),P&&v.setPitch(v.getPitch()+P)}off(){const c=this.element;F.removeEventListener(c,"mousedown",this.mousedown),F.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend),F.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup),F.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),F.removeEventListener(window,"touchend",this.touchend)}}let Yc;function Jf(I,c,p,v=!1){if(v||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return I?.wrap();const k=new s.V(I.lng,I.lat);if(I=new s.V(I.lng,I.lat),c){const P=new s.V(I.lng-360,I.lat),N=new s.V(I.lng+360,I.lat),H=p.locationToScreenPoint(I).distSqr(c);p.locationToScreenPoint(P).distSqr(c)<H?I=P:p.locationToScreenPoint(N).distSqr(c)<H&&(I=N)}for(;Math.abs(I.lng-p.center.lng)>180;){const P=p.locationToScreenPoint(I);if(P.x>=0&&P.y>=0&&P.x<=p.width&&P.y<=p.height)break;I.lng>p.center.lng?I.lng-=360:I.lng+=360}return I.lng!==k.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(I))?I:k}const Fd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qf(I,c,p){const v=I.classList;for(const k in Fd)v.remove(`maplibregl-${p}-anchor-${k}`);v.add(`maplibregl-${p}-anchor-${c}`)}class Nd extends s.E{constructor(c){if(super(),this._onKeyPress=p=>{const v=p.code,k=p.charCode||p.keyCode;v!=="Space"&&v!=="Enter"&&k!==32&&k!==13||this.togglePopup()},this._onMapClick=p=>{const v=p.originalEvent.target,k=this._element;this._popup&&(v===k||k.contains(v))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();(p?.type==="terrain"||p?.type==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=Jf(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let P="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?P="rotateX(0deg)":this._pitchAlignment==="map"&&(P=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${Fd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${P} ${k}`),E.frameAsync(new AbortController).then((()=>{this._updateOpacity(p&&p.type==="moveend")})).catch((()=>{}))},this._onMove=p=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._subpixelPositioning=c&&c.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,this.setOpacity(c?.opacity,c?.opacityWhenCovered),c&&c.element)this._element=c.element,this._offset=s.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div");const p=F.createNS("http://www.w3.org/2000/svg","svg"),v=41,k=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${v}px`),p.setAttributeNS(null,"width",`${k}px`),p.setAttributeNS(null,"viewBox",`0 0 ${k} ${v}`);const P=F.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const N=F.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill-rule","nonzero");const H=F.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(3.0, 29.0)"),H.setAttributeNS(null,"fill","#000000");const Y=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const je of Y){const et=F.createNS("http://www.w3.org/2000/svg","ellipse");et.setAttributeNS(null,"opacity","0.04"),et.setAttributeNS(null,"cx","10.5"),et.setAttributeNS(null,"cy","5.80029008"),et.setAttributeNS(null,"rx",je.rx),et.setAttributeNS(null,"ry",je.ry),H.appendChild(et)}const Q=F.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);const ne=F.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(ne);const he=F.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"fill","#000000");const ue=F.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),he.appendChild(ue);const _e=F.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_e.setAttributeNS(null,"fill","#FFFFFF");const Ee=F.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ne=F.createNS("http://www.w3.org/2000/svg","circle");Ne.setAttributeNS(null,"fill","#000000"),Ne.setAttributeNS(null,"opacity","0.25"),Ne.setAttributeNS(null,"cx","5.5"),Ne.setAttributeNS(null,"cy","5.5"),Ne.setAttributeNS(null,"r","5.4999962");const Ue=F.createNS("http://www.w3.org/2000/svg","circle");Ue.setAttributeNS(null,"fill","#FFFFFF"),Ue.setAttributeNS(null,"cx","5.5"),Ue.setAttributeNS(null,"cy","5.5"),Ue.setAttributeNS(null,"r","5.4999962"),Ee.appendChild(Ne),Ee.appendChild(Ue),N.appendChild(H),N.appendChild(Q),N.appendChild(he),N.appendChild(_e),N.appendChild(Ee),p.appendChild(N),p.setAttributeNS(null,"height",v*this._scale+"px"),p.setAttributeNS(null,"width",k*this._scale+"px"),this._element.appendChild(p),this._offset=s.P.convert(c&&c.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(p=>{p.preventDefault()})),this._element.addEventListener("mousedown",(p=>{p.preventDefault()})),Qf(this._element,this._anchor,"marker"),c&&c.className)for(const p of c.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(c){return this.remove(),this._map=c,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",c._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),c.on("terrain",this._update),c.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=s.V.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const k=Math.abs(13.5)/Math.SQRT2;c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(c){return this._subpixelPositioning=c,this}getPopup(){return this._popup}togglePopup(){const c=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:c?(c.isOpen()?c.remove():(c.setLngLat(this._lngLat),c.addTo(this._map)),this):this}_updateOpacity(c=!1){var p,v;const k=(p=this._map)===null||p===void 0?void 0:p.terrain,P=this._map.transform.isLocationOccluded(this._lngLat);if(!k||P){const _e=P?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==_e&&(this._element.style.opacity=_e))}if(c)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const N=this._map,H=N.terrain.depthAtPoint(this._pos),Y=N.terrain.getElevationForLngLat(this._lngLat,N.transform);if(N.transform.lngLatToCameraDepth(this._lngLat,Y)-H<.006)return void(this._element.style.opacity=this._opacity);const Q=-this._offset.y/N.transform.pixelsPerMeter,ne=Math.sin(N.getPitch()*Math.PI/180)*Q,he=N.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),ue=N.transform.lngLatToCameraDepth(this._lngLat,Y+ne)-he>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&ue&&this._popup.remove(),this._element.style.opacity=ue?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(c){return this._offset=s.P.convert(c),this._update(),this}addClassName(c){this._element.classList.add(c)}removeClassName(c){this._element.classList.remove(c)}toggleClassName(c){return this._element.classList.toggle(c)}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(c,p){return(this._opacity===void 0||c===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),c!==void 0&&(this._opacity=c),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const Mg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $h=0,lh=!1;const Ig={maxWidth:100,unit:"metric"};function Bd(I,c,p){const v=p&&p.maxWidth||100,k=I._container.clientHeight/2,P=I._container.clientWidth/2,N=I.unproject([P-v/2,k]),H=I.unproject([P+v/2,k]),Y=Math.round(I.project(H).x-I.project(N).x),Q=Math.min(v,Y,I._container.clientWidth),ne=N.distanceTo(H);if(p&&p.unit==="imperial"){const he=3.2808*ne;he>5280?ch(c,Q,he/5280,I._getUIString("ScaleControl.Miles")):ch(c,Q,he,I._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?ch(c,Q,ne/1852,I._getUIString("ScaleControl.NauticalMiles")):ne>=1e3?ch(c,Q,ne/1e3,I._getUIString("ScaleControl.Kilometers")):ch(c,Q,ne,I._getUIString("ScaleControl.Meters"))}function ch(I,c,p,v){const k=(function(P){const N=Math.pow(10,`${Math.floor(P)}`.length-1);let H=P/N;return H=H>=10?10:H>=5?5:H>=3?3:H>=2?2:H>=1?1:(function(Y){const Q=Math.pow(10,Math.ceil(-Math.log(Y)/Math.LN10));return Math.round(Y*Q)/Q})(H),N*H})(p);I.style.width=c*(k/p)+"px",I.innerHTML=`${k}&nbsp;${v}`}const Pg={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ep=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function tp(I){if(I){if(typeof I=="number"){const c=Math.round(Math.abs(I)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,I),"top-left":new s.P(c,c),"top-right":new s.P(-c,c),bottom:new s.P(0,-I),"bottom-left":new s.P(c,-c),"bottom-right":new s.P(-c,-c),left:new s.P(I,0),right:new s.P(-I,0)}}if(I instanceof s.P||Array.isArray(I)){const c=s.P.convert(I);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:s.P.convert(I.center||[0,0]),top:s.P.convert(I.top||[0,0]),"top-left":s.P.convert(I["top-left"]||[0,0]),"top-right":s.P.convert(I["top-right"]||[0,0]),bottom:s.P.convert(I.bottom||[0,0]),"bottom-left":s.P.convert(I["bottom-left"]||[0,0]),"bottom-right":s.P.convert(I["bottom-right"]||[0,0]),left:s.P.convert(I.left||[0,0]),right:s.P.convert(I.right||[0,0])}}return tp(new s.P(0,0))}const Lg=h;o.AJAXError=s.cI,o.Event=s.l,o.Evented=s.E,o.LngLat=s.V,o.MercatorCoordinate=s.a9,o.Point=s.P,o.addProtocol=s.cJ,o.config=s.c,o.removeProtocol=s.cK,o.AttributionControl=Ag,o.BoxZoomHandler=Au,o.CanvasSource=xe,o.CooperativeGesturesHandler=Tn,o.DoubleClickZoomHandler=Cg,o.DragPanHandler=Ly,o.DragRotateHandler=Yl,o.EdgeInsets=Ke,o.FullscreenControl=class extends s.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var c;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((c=p?.shadowRoot)===null||c===void 0)&&c.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=Ti,o.GeolocateControl=class extends s.E{constructor(I){super(),this._onSuccess=c=>{if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",c)),this._finish()}},this._updateCamera=c=>{const p=new s.V(c.coords.longitude,c.coords.latitude),v=c.coords.accuracy,k=this._map.getBearing(),P=s.e({bearing:k},this.options.fitBoundsOptions),N=Ye.fromLngLat(p,v);this._map.fitBounds(N,P,{geolocateSource:!0})},this._updateMarker=c=>{if(c){const p=new s.V(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=c.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=c=>{if(this._map){if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&lh)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",c)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=c=>{if(this._map){if(c===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Nd({element:this._dotElement}),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(p=>{const v=p?.[0]instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||v||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))}))}},this.options=s.e({},Mg,I)}onAdd(I){return this._map=I,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return s._(this,arguments,void 0,(function*(c=!1){if(Yc!==void 0&&!c)return Yc;if(window.navigator.permissions===void 0)return Yc=!!window.navigator.geolocation,Yc;try{Yc=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Yc=!!window.navigator.geolocation}return Yc}))})().then((c=>this._finishSetupUI(c))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,$h=0,lh=!1}_isOutOfMapMaxBounds(I){const c=this._map.getMaxBounds(),p=I.coords;return c&&(p.longitude<c.getWest()||p.longitude>c.getEast()||p.latitude<c.getSouth()||p.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const I=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&I))return;const c=this._map.project(I),p=this._map.unproject([c.x+100,c.y]),v=I.distanceTo(p)/100,k=2*this._accuracy/v;this._circleElement.style.width=`${k.toFixed(2)}px`,this._circleElement.style.height=`${k.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$h--,lh=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$h++,$h>1?(I={maximumAge:6e5,timeout:0},lh=!0):(I=this.options.positionOptions,lh=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const c=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(c!=="mercator"&&c?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=F.create("button","maplibregl-ctrl-globe",this._container),F.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},o.Hash=Su,o.ImageSource=Di,o.KeyboardHandler=sr,o.LngLatBounds=Ye,o.LogoControl=Dy,o.Map=class extends Eo{constructor(I){var c,p;s.cG.mark(s.cH.create);const v=Object.assign(Object.assign(Object.assign({},Kf),I),{canvasContextAttributes:Object.assign(Object.assign({},Kf.canvasContextAttributes),I.canvasContextAttributes)});if(v.minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const k=new cn,P=new aa;if(v.minZoom!==void 0&&k.setMinZoom(v.minZoom),v.maxZoom!==void 0&&k.setMaxZoom(v.maxZoom),v.minPitch!==void 0&&k.setMinPitch(v.minPitch),v.maxPitch!==void 0&&k.setMaxPitch(v.maxPitch),v.renderWorldCopies!==void 0&&k.setRenderWorldCopies(v.renderWorldCopies),v.transformConstrain!==null&&k.setConstrainOverride(v.transformConstrain),super(k,P,{bearingSnap:v.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new gx,this._controls=[],this._mapId=s.af(),this._lostContextStyle={style:null,images:null},this._contextLost=H=>{H.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const Y of Object.values(this.style._layers))if(Y.type==="custom"&&console.warn(`Custom layer with id '${Y.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),Y._listeners)for(const[Q]of Object.entries(Y._listeners))console.warn(`Custom layer with id '${Y.id}' had event listeners for event '${Q}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new s.l("webglcontextlost",{originalEvent:H}))},this._contextRestored=H=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:H}))},this._onMapScroll=H=>{if(H.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},v.canvasContextAttributes),this._trackResize=v.trackResize===!0,this._bearingSnap=v.bearingSnap,this._centerClampedToGround=v.centerClampedToGround,this._refreshExpiredTiles=v.refreshExpiredTiles===!0,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions===!0,this._collectResourceTiming=v.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Zf),v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this._zoomLevelsToOverscale=v.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=v.transformCameraUpdate,this.transformConstrain=v.transformConstrain,this.cancelPendingTileRequestsWhileZooming=v.cancelPendingTileRequestsWhileZooming===!0,v.reduceMotion!==void 0&&(E.prefersReducedMotion=v.reduceMotion),this._imageQueueHandle=J.addThrottleControl((()=>this.isMoving())),this._requestManager=new re(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let H=!1;const Y=wc((Q=>{this._trackResize&&!this._removed&&(this.resize(Q),this.redraw())}),50);this._resizeObserver=new ResizeObserver((Q=>{H?Y(Q):H=!0})),this._resizeObserver.observe(this._container)}this.handlers=new qf(this,v),this._hash=v.hash&&new Su(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,elevation:v.elevation,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,roll:v.roll}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,s.e({},v.fitBoundsOptions,{duration:0}))));const N=typeof v.style=="string"||((p=(c=v.style)===null||c===void 0?void 0:c.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,N),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new Ag(typeof v.attributionControl=="boolean"?void 0:v.attributionControl)),v.maplibreLogo&&this.addControl(new Dy,v.logoPosition),this.on("style.load",(()=>{if(N||this._resizeTransform(),this.transform.unmodified){const H=s.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(H)}})),this.on("data",(H=>{this._update(H.dataType==="style"),this.fire(new s.l(`${H.dataType}data`,H))})),this.on("dataloading",(H=>{this.fire(new s.l(`${H.dataType}dataloading`,H))})),this.on("dataabort",(H=>{this.fire(new s.l("sourcedataabort",H))}))}_getMapId(){return this._mapId}setGlobalStateProperty(I,c){return this.style.setGlobalStateProperty(I,c),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(I,c){if(c===void 0&&(c=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=I.onAdd(this);this._controls.push(I);const v=this._controlPositions[c];return c.indexOf("bottom")!==-1?v.insertBefore(p,v.firstChild):v.appendChild(p),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(I);return c>-1&&this._controls.splice(c,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}coveringTiles(I){return mn(this.transform,I)}calculateCameraOptionsFromTo(I,c,p,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLat(p,this.transform)),super.calculateCameraOptionsFromTo(I,c,p,v)}resize(I,c=!0){const[p,v]=this._containerDimensions(),k=this._getClampedPixelRatio(p,v);if(this._resizeCanvas(p,v,k),this.painter.resize(p,v,k),this.painter.overLimit()){const N=this.painter.context.gl;this._maxCanvasSize=[N.drawingBufferWidth,N.drawingBufferHeight];const H=this._getClampedPixelRatio(p,v);this._resizeCanvas(p,v,H),this.painter.resize(p,v,H)}this._resizeTransform(c);const P=!this._moving;return P&&(this.stop(),this.fire(new s.l("movestart",I)).fire(new s.l("move",I))),this.fire(new s.l("resize",I)),P&&this.fire(new s.l("moveend",I)),this}_resizeTransform(I=!0){var c;const[p,v]=this._containerDimensions();this.transform.resize(p,v,I),(c=this._requestedCameraState)===null||c===void 0||c.resize(p,v,I)}_getClampedPixelRatio(I,c){const{0:p,1:v}=this._maxCanvasSize,k=this.getPixelRatio(),P=I*k,N=c*k;return Math.min(P>p?p/P:1,N>v?v/N:1)*k}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(Ye.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom){const c=this._getTransformForUpdate();return c.setMinZoom(I),this._applyUpdatedTransform(c),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom){const c=this._getTransformForUpdate();return c.setMaxZoom(I),this._applyUpdatedTransform(c),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}setTransformConstrain(I){return this.transform.setConstrainOverride(I),this._update()}project(I){return this.transform.locationToScreenPoint(s.V.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(s.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,c,p){if(I==="mouseenter"||I==="mouseover"){let v=!1;return{layers:c,listener:p,delegates:{mousemove:P=>{const N=c.filter((Y=>this.getLayer(Y))),H=N.length!==0?this.queryRenderedFeatures(P.point,{layers:N}):[];H.length?v||(v=!0,p.call(this,new Gr(I,this,P.originalEvent,{features:H}))):v=!1},mouseout:()=>{v=!1}}}}if(I==="mouseleave"||I==="mouseout"){let v=!1;return{layers:c,listener:p,delegates:{mousemove:N=>{const H=c.filter((Y=>this.getLayer(Y)));(H.length!==0?this.queryRenderedFeatures(N.point,{layers:H}):[]).length?v=!0:v&&(v=!1,p.call(this,new Gr(I,this,N.originalEvent)))},mouseout:N=>{v&&(v=!1,p.call(this,new Gr(I,this,N.originalEvent)))}}}}{const v=k=>{const P=c.filter((H=>this.getLayer(H))),N=P.length!==0?this.queryRenderedFeatures(k.point,{layers:P}):[];N.length&&(k.features=N,p.call(this,k),delete k.features)};return{layers:c,listener:p,delegates:{[I]:v}}}}_saveDelegatedListener(I,c){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(c)}_removeDelegatedListener(I,c,p){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const v=this._delegatedListeners[I];for(let k=0;k<v.length;k++){const P=v[k];if(P.listener===p&&P.layers.length===c.length&&P.layers.every((N=>c.includes(N)))){for(const N in P.delegates)this.off(N,P.delegates[N]);return void v.splice(k,1)}}}on(I,c,p){if(p===void 0)return super.on(I,c);const v=typeof c=="string"?[c]:c,k=this._createDelegatedListener(I,v,p);this._saveDelegatedListener(I,k);for(const P in k.delegates)this.on(P,k.delegates[P]);return{unsubscribe:()=>{this._removeDelegatedListener(I,v,p)}}}once(I,c,p){if(p===void 0)return super.once(I,c);const v=typeof c=="string"?[c]:c,k=this._createDelegatedListener(I,v,p);for(const P in k.delegates){const N=k.delegates[P];k.delegates[P]=(...H)=>{this._removeDelegatedListener(I,v,p),N(...H)}}this._saveDelegatedListener(I,k);for(const P in k.delegates)this.once(P,k.delegates[P]);return this}off(I,c,p){return p===void 0?super.off(I,c):(this._removeDelegatedListener(I,typeof c=="string"?[c]:c,p),this)}queryRenderedFeatures(I,c){if(!this.style)return[];let p;const v=I instanceof s.P||Array.isArray(I),k=v?I:[[0,0],[this.transform.width,this.transform.height]];if(c=c||(v?{}:I)||{},k instanceof s.P||typeof k[0]=="number")p=[s.P.convert(k)];else{const P=s.P.convert(k[0]),N=s.P.convert(k[1]);p=[P,new s.P(N.x,P.y),N,new s.P(P.x,N.y),P]}return this.style.queryRenderedFeatures(p,c,this.transform)}querySourceFeatures(I,c){return this.style.querySourceFeatures(I,c)}setStyle(I,c){return(c=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(I,c))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const c=this._locale[I];if(c==null)throw new Error(`Missing UI string '${I}'`);return c}_updateStyle(I,c){var p,v;if(c.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(I,c)));const k=this.style&&c.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new uo(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,c,k):this.style.loadJSON(I,c,k),this):((v=(p=this.style)===null||p===void 0?void 0:p.projection)===null||v===void 0||v.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new uo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,c){if(typeof I=="string"){const p=this._requestManager.transformRequest(I,"Style");s.j(p,new AbortController).then((v=>{this._updateDiff(v.data,c)})).catch((v=>{v&&this.fire(new s.k(v))}))}else typeof I=="object"&&this._updateDiff(I,c)}_updateDiff(I,c){try{this.style.setState(I,c)&&this._update(!0)}catch(p){s.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(I,c)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(I,c){return this._lazyInitEmptyStyle(),this.style.addSource(I,c),this._update(!0)}isSourceLoaded(I){const c=this.style&&this.style.tileManagers[I];if(c!==void 0)return c.loaded();this.fire(new s.k(new Error(`There is no tile manager with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const c=this.style.tileManagers[I.source];if(!c)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&c.reload();for(const p in this.style._layers){const v=this.style._layers[p];v.type==="hillshade"&&v.source===I.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),v.type==="color-relief"&&v.source===I.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Xr(this.painter,c,I),this.painter.renderToTexture=new Od(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var v;p.dataType==="style"?this.terrain.tileManager.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((v=p.source)===null||v===void 0?void 0:v.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:I})),this}getTerrain(){var I,c;return(c=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&c!==void 0?c:null}areTilesLoaded(){const I=this.style&&this.style.tileManagers;for(const c of Object.values(I))if(!c.areTilesLoaded())return!1;return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}setSourceTileLodParams(I,c,p){if(p){const v=this.getSource(p);if(!v)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);v.calculateTileZoom=pn(Math.max(1,I),Math.max(1,c))}else for(const v in this.style.tileManagers)this.style.tileManagers[v].getSource().calculateTileZoom=pn(Math.max(1,I),Math.max(1,c));return this._update(!0),this}refreshTiles(I,c){const p=this.style.tileManagers[I];if(!p)throw new Error(`There is no tile manager with ID "${I}", cannot refresh tile`);c===void 0?p.reload(!0):p.refreshTiles(c.map((v=>new s.ac(v.z,v.x,v.y))))}addImage(I,c,p={}){const{pixelRatio:v=1,sdf:k=!1,stretchX:P,stretchY:N,content:H,textFitWidth:Y,textFitHeight:Q}=p;if(this._lazyInitEmptyStyle(),!(c instanceof HTMLImageElement||s.b(c))){if(c.width===void 0||c.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ne,height:he,data:ue}=c,_e=c;return this.style.addImage(I,{data:new s.R({width:ne,height:he},new Uint8Array(ue)),pixelRatio:v,stretchX:P,stretchY:N,content:H,textFitWidth:Y,textFitHeight:Q,sdf:k,version:0,userImage:_e}),_e.onAdd&&_e.onAdd(this,I),this}}{const{width:ne,height:he,data:ue}=E.getImageData(c);this.style.addImage(I,{data:new s.R({width:ne,height:he},ue),pixelRatio:v,stretchX:P,stretchY:N,content:H,textFitWidth:Y,textFitHeight:Q,sdf:k,version:0})}}updateImage(I,c){const p=this.style.getImage(I);if(!p)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=c instanceof HTMLImageElement||s.b(c)?E.getImageData(c):c,{width:k,height:P,data:N}=v;if(k===void 0||P===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(k!==p.data.width||P!==p.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const H=!(c instanceof HTMLImageElement||s.b(c));return p.data.replace(N,H),this.style.updateImage(I,p),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return J.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,c){return this._lazyInitEmptyStyle(),this.style.addLayer(I,c),this._update(!0)}moveLayer(I,c){return this.style.moveLayer(I,c),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,c,p){return this.style.setLayerZoomRange(I,c,p),this._update(!0)}setFilter(I,c,p={}){return this.style.setFilter(I,c,p),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,c,p,v={}){return this.style.setPaintProperty(I,c,p,v),this._update(!0)}getPaintProperty(I,c){return this.style.getPaintProperty(I,c)}setLayoutProperty(I,c,p,v={}){return this.style.setLayoutProperty(I,c,p,v),this._update(!0)}getLayoutProperty(I,c){return this.style.getLayoutProperty(I,c)}setGlyphs(I,c={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,c),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,c,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,c,p,(v=>{v||this._update(!0)})),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,c={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,c,(p=>{p||this._update(!0)})),this}setLight(I,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,c),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,c={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,c),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,c){return this.style.setFeatureState(I,c),this._update()}removeFeatureState(I,c){return this.style.removeFeatureState(I,c),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,c=0;return this._container&&(I=this._container.clientWidth||400,c=this._container.clientHeight||300),[I,c]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const c=this._canvasContainer=F.create("div","maplibregl-canvas-container",I);this._interactive&&c.classList.add("maplibregl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),v=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],v);const k=this._controlContainer=F.create("div","maplibregl-control-container",I),P=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((N=>{P[N]=F.create("div",`maplibregl-ctrl-${N} `,k)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,c,p){this._canvas.width=Math.floor(p*I),this._canvas.height=Math.floor(p*c),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let c=null;this._canvas.addEventListener("webglcontextcreationerror",(v=>{c={requestedAttributes:I},v&&(c.statusMessage=v.statusMessage,c.type=v.type)}),{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!p){const v="Failed to initialize WebGL";throw c?(c.message=v,new Error(JSON.stringify(c))):new Error(v)}this.painter=new Xc(p,this.transform),U.testSupport(p)}migrateProjection(I,c){super.migrateProjection(I,c),this.painter.transform=I,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var c,p,v,k,P;const N=this._idleTriggered?this._fadeDuration:0,H=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let Y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const he=this.transform.zoom,ue=D();this.style.zoomHistory.update(he,ue);const _e=new s.H(he,{now:ue,fadeDuration:N,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ee=_e.crossFadingFactor();Ee===1&&Ee===this._crossFadingFactor||(Y=!0,this._crossFadingFactor=Ee),this.style.update(_e)}const Q=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==H;(v=this.style.projection)===null||v===void 0||v.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((k=this.style.projection)===null||k===void 0?void 0:k.transitionState,(P=this.style.projection)===null||P===void 0?void 0:P.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||Q)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,N,this._crossSourceCollisions,Q),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:N,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cG.mark(s.cH.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||Y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ne=this._sourcesDirty||this._styleDirty||this._placementDirty;return ne||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||ne||(this._fullyLoaded=!0,s.cG.mark(s.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),J.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const c=this.painter.context.gl.getExtension("WEBGL_lose_context");c?.loseContext&&c.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cG.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,E.frame(this._frameRequest,(I=>{s.cG.frame(I),this._frameRequest=null;try{this._render(I)}catch(c){if(!s.Z(c)&&!(function(p){return p.message===yu})(c))throw c}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return Tg}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},o.MapMouseEvent=Gr,o.MapTouchEvent=kl,o.MapWheelEvent=rh,o.Marker=Nd,o.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const c=this._map.getZoom(),p=c===this._map.getMaxZoom(),v=c===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(c,p)=>{const v=this._map._getUIString(`NavigationControl.${p}`);c.title=v,c.setAttribute("aria-label",v)},this.options=s.e({},Eg,I),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(c=>this._map.zoomIn({},{originalEvent:c}))),F.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(c=>this._map.zoomOut({},{originalEvent:c}))),F.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})})),this._compassIcon=F.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,c){const p=F.create("button",I,this._container);return p.type="button",p.addEventListener("click",c),p}},o.Popup=class extends s.E{constructor(I){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=c=>{this._update(c.point)},this._onMouseMove=c=>{this._update(c.point)},this._onDrag=c=>{this._update(c.point)},this._update=c=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=F.create("div","maplibregl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const N of this.options.className.split(" "))this._container.classList.add(N);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Jf(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!c)return;const p=this._flatPos=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&c?c:this._map.transform.locationToScreenPoint(this._lngLat));let v=this.options.anchor;const k=tp(this.options.offset);if(!v){const N=this._container.offsetWidth,H=this._container.offsetHeight;let Y;Y=p.y+k.bottom.y<H?["top"]:p.y>this._map.transform.height-H?["bottom"]:[],p.x<N/2?Y.push("left"):p.x>this._map.transform.width-N/2&&Y.push("right"),v=Y.length===0?"bottom":Y.join("-")}let P=p.add(k[v]);this.options.subpixelPositioning||(P=P.round()),F.setTransform(this._container,`${Fd[v]} translate(${P.x}px,${P.y}px)`),Qf(this._container,v,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Pg),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=s.V.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const c=document.createDocumentFragment(),p=document.createElement("body");let v;for(p.innerHTML=I;v=p.firstChild,v;)c.appendChild(v);return this.setDOMContent(c)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(ep);I&&I.focus()}},o.RasterDEMTileSource=ci,o.RasterTileSource=Fi,o.ScaleControl=class{constructor(I){this._onMove=()=>{Bd(this._map,this._container,this.options)},this.setUnit=c=>{this.options.unit=c,Bd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ig),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=Xf,o.Style=uo,o.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=My,o.TwoFingersTouchRotateHandler=Sg,o.TwoFingersTouchZoomHandler=wg,o.TwoFingersTouchZoomRotateHandler=Ld,o.VectorTileSource=li,o.VideoSource=dt,o.addSourceType=(I,c)=>s._(void 0,void 0,void 0,(function*(){if(Ce(I))throw new Error(`A source type called "${I}" already exists.`);((p,v)=>{be[p]=v})(I,c)})),o.clearPrewarmedResources=function(){const I=mi;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(Lt),mi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.createTileMesh=En,o.getMaxParallelImageRequests=function(){return s.c.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return yt().getRTLTextPluginStatus()},o.getVersion=function(){return Lg},o.getWorkerCount=function(){return Tt.workerCount},o.getWorkerUrl=function(){return s.c.WORKER_URL},o.importScriptInWorkers=function(I){return si().broadcast("IS",I)},o.isTimeFrozen=function(){return z.isFrozen()},o.now=D,o.prewarm=function(){Zi().acquire(Lt)},o.restoreNow=function(){z.restoreNow()},o.setMaxParallelImageRequests=function(I){s.c.MAX_PARALLEL_IMAGE_REQUESTS=I},o.setNow=function(I){z.setNow(I)},o.setRTLTextPlugin=function(I,c){return yt().setRTLTextPlugin(I,c)},o.setWorkerCount=function(I){Tt.workerCount=I},o.setWorkerUrl=function(I){s.c.WORKER_URL=I}}));var r=t;return r}))})(V0)),V0.exports}var fO=dO();const pO=rE(fO);(function(a,e,t){function i(n,r){for(;(n=n.parentElement)&&!n.classList.contains(r););return n}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(n,r){this._map=n,this._container=n._container,this._overlayPane=n._panes.overlayPane,this._popupPane=n._panes.popupPane,r&&r.shapeOptions&&(r.shapeOptions=L.Util.extend({},this.options.shapeOptions,r.shapeOptions)),L.setOptions(this,r);var o=L.version.split(".");parseInt(o[0],10)===1&&parseInt(o[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(L.DomUtil.disableTextSelection(),n.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(n){L.setOptions(this,n)},_fireCreatedEvent:function(n){this._map.fire(L.Draw.Event.CREATED,{layer:n,layerType:this.type})},_cancelDrawing:function(n){n.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(n,r){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,r&&r.drawError&&(r.drawError=L.Util.extend({},this.options.drawError,r.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var n=this._markers.pop(),r=this._poly,o=r.getLatLngs(),s=o.splice(-1,1)[0];this._poly.setLatLngs(o),this._markerGroup.removeLayer(n),r.getLatLngs().length<2&&this._map.removeLayer(r),this._vertexChanged(s,!1)}},addVertex:function(n){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(n))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(n)),this._poly.addLatLng(n),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(n,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var n=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),r=this._poly.newLatLngIntersects(n[n.length-1]);if(!this.options.allowIntersection&&r||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent),o=this._map.layerPointToLatLng(r);this._currentLatLng=o,this._updateTooltip(o),this._updateGuide(r),this._mouseMarker.setLatLng(o),L.DomEvent.preventDefault(n.originalEvent)},_vertexChanged:function(n,r){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(n,r),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(n){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(n),this._clickHandled=!0,this._disableNewMarkers();var r=n.originalEvent,o=r.clientX,s=r.clientY;this._startPoint.call(this,o,s)}},_startPoint:function(n,r){this._mouseDownOrigin=L.point(n,r)},_onMouseUp:function(n){var r=n.originalEvent,o=r.clientX,s=r.clientY;this._endPoint.call(this,o,s,n),this._clickHandled=null},_endPoint:function(n,r,o){if(this._mouseDownOrigin){var s=L.point(n,r).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(o.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(o.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(s)<9*(a.devicePixelRatio||1)&&this.addVertex(o.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(n){var r,o,s=n.originalEvent;!s.touches||!s.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(r=s.touches[0].clientX,o=s.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,r,o),this._endPoint.call(this,r,o,n),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(n){var r;if(this._markers.length>0){var o;if(this.type===L.Draw.Polyline.TYPE)o=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;o=this._markers[0]}var s=this._map.latLngToContainerPoint(o.getLatLng()),h=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),f=this._map.latLngToContainerPoint(h.getLatLng());r=s.distanceTo(f)}else r=1/0;return r},_updateFinishHandler:function(){var n=this._markers.length;n>1&&this._markers[n-1].on("click",this._finishShape,this),n>2&&this._markers[n-2].off("click",this._finishShape,this)},_createMarker:function(n){var r=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(r),r},_updateGuide:function(n){var r=this._markers?this._markers.length:0;r>0&&(n=n||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[r-1].getLatLng()),n))},_updateTooltip:function(n){var r=this._getTooltipText();n&&this._tooltip.updatePosition(n),this._errorShown||this._tooltip.updateContent(r)},_drawGuide:function(n,r){var o,s,h,f=Math.floor(Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))),y=this.options.guidelineDistance,x=this.options.maxGuideLineLength,S=f>x?f-x:y;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));S<f;S+=this.options.guidelineDistance)o=S/f,s={x:Math.floor(n.x*(1-o)+o*r.x),y:Math.floor(n.y*(1-o)+o*r.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,s)},_updateGuideColor:function(n){if(this._guidesContainer)for(var r=0,o=this._guidesContainer.childNodes.length;r<o;r++)this._guidesContainer.childNodes[r].style.backgroundColor=n},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var n,r,o=this.options.showLength;return this._markers.length===0?n={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(r=o?this._getMeasurementString():"",n=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:r}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:r}),n},_updateRunningMeasure:function(n,r){var o,s,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(o=h-(r?2:1),s=L.GeometryUtil.isVersion07x()?n.distanceTo(this._markers[o].getLatLng())*(this.options.factor||1):this._map.distance(n,this._markers[o].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=s*(r?1:-1))},_getMeasurementString:function(){var n,r=this._currentLatLng,o=this._markers[this._markers.length-1].getLatLng();return n=L.GeometryUtil.isVersion07x()?o&&r&&r.distanceTo?this._measurementRunningTotal+r.distanceTo(o)*(this.options.factor||1):this._measurementRunningTotal||0:o&&r?this._measurementRunningTotal+this._map.distance(r,o)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(n,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var n=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(n,r){L.Draw.Polyline.prototype.initialize.call(this,n,r),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var n=this._markers.length;n===1&&this._markers[0].on("click",this._finishShape,this),n>2&&(this._markers[n-1].on("dblclick",this._finishShape,this),n>3&&this._markers[n-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var n,r;return this._markers.length===0?n=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(n=L.drawLocal.draw.handlers.polygon.tooltip.cont,r=this._getMeasurementString()):(n=L.drawLocal.draw.handlers.polygon.tooltip.end,r=this._getMeasurementString()),{text:n,subtext:r}},_getMeasurementString:function(){var n=this._area,r="";return n||this.options.showLength?(this.options.showLength&&(r=L.Draw.Polyline.prototype._getMeasurementString.call(this)),n&&(r+="<br>"+L.GeometryUtil.readableArea(n,this.options.metric,this.options.precision)),r):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(n,r){var o;!this.options.allowIntersection&&this.options.showArea&&(o=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(o)),L.Draw.Polyline.prototype._vertexChanged.call(this,n,r)},_cleanUpShape:function(){var n=this._markers.length;n>0&&(this._markers[0].off("click",this._finishShape,this),n>2&&this._markers[n-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(n,r){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(n){this._isDrawing=!0,this._startLatLng=n.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(n.originalEvent)},_onMouseMove:function(n){var r=n.latlng;this._tooltip.updatePosition(r),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(r))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(n,r){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,r)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(n){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!i(n.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(n){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,n)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,n),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_getTooltipText:function(){var n,r,o,s=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,f=this.options.showArea;return h&&(n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=L.GeometryUtil.geodesicArea(n),o=f?L.GeometryUtil.readableArea(r,this.options.metric):""),{text:s.text,subtext:o}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(n,r){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,r)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(n){var r=n.latlng;this._tooltip.updatePosition(r),this._mouseMarker.setLatLng(r),this._marker?(r=this._mouseMarker.getLatLng(),this._marker.setLatLng(r)):(this._marker=this._createMarker(r),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(n){return new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(n){this._onMouseMove(n),this._onClick()},_fireCreatedEvent:function(){var n=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(n,r){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,r)},_fireCreatedEvent:function(){var n=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)},_createMarker:function(n){return new L.CircleMarker(n,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(n,r){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,r)},_drawShape:function(n){if(L.GeometryUtil.isVersion07x())var r=this._startLatLng.distanceTo(n);else var r=this._map.distance(this._startLatLng,n);this._shape?this._shape.setRadius(r):(this._shape=new L.Circle(this._startLatLng,r,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_onMouseMove:function(n){var r,o=n.latlng,s=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(o),this._isDrawing){this._drawShape(o),r=this._shape.getRadius().toFixed(1);var f="";s&&(f=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(r,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:f})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(n,r){this._marker=n,L.setOptions(this,r)},addHooks:function(){var n=this._marker;n.dragging.enable(),n.on("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},removeHooks:function(){var n=this._marker;n.dragging.disable(),n.off("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},_onDragEnd:function(n){var r=n.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_toggleMarkerHighlight:function(){var n=this._marker._icon;n&&(n.style.display="none",L.DomUtil.hasClass(n,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,-4)):(L.DomUtil.addClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,4)),n.style.display="")},_offsetMarker:function(n,r){var o=parseInt(n.style.marginTop,10)-r,s=parseInt(n.style.marginLeft,10)-r;n.style.marginTop=o+"px",n.style.marginLeft=s+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(n){this.latlngs=[n._latlngs],n._holes&&(this.latlngs=this.latlngs.concat(n._holes)),this._poly=n,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(n){for(var r=0;r<this._verticesHandlers.length;r++)n(this._verticesHandlers[r])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(n){n.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(n){n.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(n){n.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var n=0;n<this.latlngs.length;n++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[n],this._poly.options.poly))},_updateLatLngs:function(n){this.latlngs=[n.layer._latlngs],n.layer._holes&&(this.latlngs=this.latlngs.concat(n.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(n,r,o){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=n,o&&o.drawError&&(o.drawError=L.Util.extend({},this.options.drawError,o.drawError)),this._latlngs=r,L.setOptions(this,o)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var n=this._poly,r=n._path;n instanceof L.Polygon||(n.options.fill=!1,n.options.editing&&(n.options.editing.fill=!1)),r&&n.options.editing&&n.options.editing.className&&(n.options.original.className&&n.options.original.className.split(" ").forEach(function(o){L.DomUtil.removeClass(r,o)}),n.options.editing.className.split(" ").forEach(function(o){L.DomUtil.addClass(r,o)})),n.setStyle(n.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var n=this._poly,r=n._path;r&&n.options.editing&&n.options.editing.className&&(n.options.editing.className.split(" ").forEach(function(o){L.DomUtil.removeClass(r,o)}),n.options.original.className&&n.options.original.className.split(" ").forEach(function(o){L.DomUtil.addClass(r,o)})),n.setStyle(n.options.original),n._map&&(n._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var n,r,o,s,h=this._defaultShape();for(n=0,o=h.length;n<o;n++)s=this._createMarker(h[n],n),s.on("click",this._onMarkerClick,this),s.on("contextmenu",this._onContextMenu,this),this._markers.push(s);var f,y;for(n=0,r=o-1;n<o;r=n++)(n!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(f=this._markers[r],y=this._markers[n],this._createMiddleMarker(f,y),this._updatePrevNext(f,y))},_createMarker:function(n,r){var o=new L.Marker.Touch(n,{draggable:!0,icon:this.options.icon});return o._origLatLng=n,o._index=r,o.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(o),o},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var n=this._defaultShape(),r=[].splice.apply(n,arguments);return this._poly._convertLatLngs(n,!0),this._poly.redraw(),r},_removeMarker:function(n){var r=n._index;this._markerGroup.removeLayer(n),this._markers.splice(r,1),this._spliceLatLngs(r,1),this._updateIndexes(r,-1),n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(n){var r=n.target,o=this._poly,s=L.LatLngUtil.cloneLatLng(r._origLatLng);if(L.extend(r._origLatLng,r._latlng),o.options.poly){var h=o._map._editTooltip;if(!o.options.poly.allowIntersection&&o.intersects()){L.extend(r._origLatLng,s),r.setLatLng(s);var f=o.options.color;o.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){o.setStyle({color:f}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var y=this._poly.getLatLngs();this._poly._convertLatLngs(y,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(n){var r=L.Polygon&&this._poly instanceof L.Polygon?4:3,o=n.target;this._defaultShape().length<r||(this._removeMarker(o),this._updatePrevNext(o._prev,o._next),o._middleLeft&&this._markerGroup.removeLayer(o._middleLeft),o._middleRight&&this._markerGroup.removeLayer(o._middleRight),o._prev&&o._next?this._createMiddleMarker(o._prev,o._next):o._prev?o._next||(o._prev._middleRight=null):o._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(n){var r=n.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:r,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),o=this._map.layerPointToLatLng(r),s=n.target;L.extend(s._origLatLng,o),s._middleLeft&&s._middleLeft.setLatLng(this._getMiddleLatLng(s._prev,s)),s._middleRight&&s._middleRight.setLatLng(this._getMiddleLatLng(s,s._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(n,r){this._markerGroup.eachLayer(function(o){o._index>n&&(o._index+=r)})},_createMiddleMarker:function(n,r){var o,s,h,f=this._getMiddleLatLng(n,r),y=this._createMarker(f);y.setOpacity(.6),n._middleRight=r._middleLeft=y,s=function(){y.off("touchmove",s,this);var x=r._index;y._index=x,y.off("click",o,this).on("click",this._onMarkerClick,this),f.lat=y.getLatLng().lat,f.lng=y.getLatLng().lng,this._spliceLatLngs(x,0,f),this._markers.splice(x,0,y),y.setOpacity(1),this._updateIndexes(x,1),r._index++,this._updatePrevNext(n,y),this._updatePrevNext(y,r),this._poly.fire("editstart")},h=function(){y.off("dragstart",s,this),y.off("dragend",h,this),y.off("touchmove",s,this),this._createMiddleMarker(n,y),this._createMiddleMarker(y,r)},o=function(){s.call(this),h.call(this),this._fireEdit()},y.on("click",o,this).on("dragstart",s,this).on("dragend",h,this).on("touchmove",s,this),this._markerGroup.addLayer(y)},_updatePrevNext:function(n,r){n&&(n._next=r),r&&(r._prev=n)},_getMiddleLatLng:function(n,r){var o=this._poly._map,s=o.project(n.getLatLng()),h=o.project(r.getLatLng());return o.unproject(s._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(n,r){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=n,L.Util.setOptions(this,r)},addHooks:function(){var n=this._shape;this._shape._map&&(this._map=this._shape._map,n.setStyle(n.options.editing),n._map&&(this._map=n._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var n=this._shape;if(n.setStyle(n.options.original),n._map){this._unbindMarker(this._moveMarker);for(var r=0,o=this._resizeMarkers.length;r<o;r++)this._unbindMarker(this._resizeMarkers[r]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(n,r){var o=new L.Marker.Touch(n,{draggable:!0,icon:r,zIndexOffset:10});return this._bindMarker(o),this._markerGroup.addLayer(o),o},_bindMarker:function(n){n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(n){n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(n){n.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(n){var r=n.target,o=r.getLatLng();r===this._moveMarker?this._move(o):this._resize(o),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(n){n.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(n){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n),typeof this._getCorners=="function"){var r=this._getCorners(),o=n.target,s=o._cornerIndex;o.setOpacity(0),this._oppositeCorner=r[(s+2)%4],this._toggleCornerMarkers(0,s)}this._shape.fire("editstart")},_onTouchMove:function(n){var r=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),o=this._map.layerPointToLatLng(r);return n.target===this._moveMarker?this._move(o):this._resize(o),this._shape.redraw(),!1},_onTouchEnd:function(n){n.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getBounds(),r=n.getCenter();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){var n=this._getCorners();this._resizeMarkers=[];for(var r=0,o=n.length;r<o;r++)this._resizeMarkers.push(this._createMarker(n[r],this.options.resizeIcon)),this._resizeMarkers[r]._cornerIndex=r},_onMarkerDragStart:function(n){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n);var r=this._getCorners(),o=n.target,s=o._cornerIndex;this._oppositeCorner=r[(s+2)%4],this._toggleCornerMarkers(0,s)},_onMarkerDragEnd:function(n){var r,o,s=n.target;s===this._moveMarker&&(r=this._shape.getBounds(),o=r.getCenter(),s.setLatLng(o)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,n)},_move:function(n){for(var r,o=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),s=this._shape.getBounds(),h=s.getCenter(),f=[],y=0,x=o.length;y<x;y++)r=[o[y].lat-h.lat,o[y].lng-h.lng],f.push([n.lat+r[0],n.lng+r[1]]);this._shape.setLatLngs(f),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(n){var r;this._shape.setBounds(L.latLngBounds(n,this._oppositeCorner)),r=this._shape.getBounds(),this._moveMarker.setLatLng(r.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var n=this._shape.getBounds();return[n.getNorthWest(),n.getNorthEast(),n.getSouthEast(),n.getSouthWest()]},_toggleCornerMarkers:function(n){for(var r=0,o=this._resizeMarkers.length;r<o;r++)this._resizeMarkers[r].setOpacity(n)},_repositionCornerMarkers:function(){for(var n=this._getCorners(),r=0,o=this._resizeMarkers.length;r<o;r++)this._resizeMarkers[r].setLatLng(n[r])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getLatLng();this._moveMarker=this._createMarker(n,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(n){if(this._resizeMarkers.length){var r=this._getResizeMarkerPoint(n);this._resizeMarkers[0].setLatLng(r)}this._shape.setLatLng(n),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var n=this._shape.getLatLng(),r=this._getResizeMarkerPoint(n);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(r,this.options.resizeIcon))},_getResizeMarkerPoint:function(n){var r=this._shape._radius*Math.cos(Math.PI/4),o=this._map.project(n);return this._map.unproject([o.x+r,o.y-r])},_resize:function(n){var r=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=r.distanceTo(n):radius=this._map.distance(r,n),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(n,r){var o={};if(n.touches!==void 0){if(!n.touches.length)return;o=n.touches[0]}else if(n.pointerType!=="touch"||(o=n,!this._filterClick(n)))return;var s=this._map.mouseEventToContainerPoint(o),h=this._map.mouseEventToLayerPoint(o),f=this._map.layerPointToLatLng(h);this._map.fire(r,{latlng:f,layerPoint:h,containerPoint:s,pageX:o.pageX,pageY:o.pageY,originalEvent:n})},_filterClick:function(n){var r=n.timeStamp||n.originalEvent.timeStamp,o=L.DomEvent._lastClick&&r-L.DomEvent._lastClick;return o&&o>100&&o<500||n.target._simulatedClick&&!n._simulated?(L.DomEvent.stop(n),!1):(L.DomEvent._lastClick=r,!0)},_onTouchStart:function(n){this._map._loaded&&this._touchEvent(n,"touchstart")},_onTouchEnd:function(n){this._map._loaded&&this._touchEvent(n,"touchend")},_onTouchCancel:function(n){if(this._map._loaded){var r="touchcancel";this._detectIE()&&(r="pointercancel"),this._touchEvent(n,r)}},_onTouchLeave:function(n){this._map._loaded&&this._touchEvent(n,"touchleave")},_onTouchMove:function(n){this._map._loaded&&this._touchEvent(n,"touchmove")},_detectIE:function(){var n=a.navigator.userAgent,r=n.indexOf("MSIE ");if(r>0)return parseInt(n.substring(r+5,n.indexOf(".",r)),10);if(n.indexOf("Trident/")>0){var o=n.indexOf("rv:");return parseInt(n.substring(o+3,n.indexOf(".",o)),10)}var s=n.indexOf("Edge/");return s>0&&parseInt(n.substring(s+5,n.indexOf(".",s)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var n=this._icon,r=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?r.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):r.concat(["touchcancel"]),L.DomUtil.addClass(n,"leaflet-clickable"),L.DomEvent.on(n,"click",this._onMouseClick,this),L.DomEvent.on(n,"keypress",this._onKeyPress,this);for(var o=0;o<r.length;o++)L.DomEvent.on(n,r[o],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var n=a.navigator.userAgent,r=n.indexOf("MSIE ");if(r>0)return parseInt(n.substring(r+5,n.indexOf(".",r)),10);if(n.indexOf("Trident/")>0){var o=n.indexOf("rv:");return parseInt(n.substring(o+3,n.indexOf(".",o)),10)}var s=n.indexOf("Edge/");return s>0&&parseInt(n.substring(s+5,n.indexOf(".",s)),10)}}),L.LatLngUtil={cloneLatLngs:function(n){for(var r=[],o=0,s=n.length;o<s;o++)Array.isArray(n[o])?r.push(L.LatLngUtil.cloneLatLngs(n[o])):r.push(this.cloneLatLng(n[o]));return r},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}},(function(){var n={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(r){var o,s,h=r.length,f=0,y=Math.PI/180;if(h>2){for(var x=0;x<h;x++)o=r[x],s=r[(x+1)%h],f+=(s.lng-o.lng)*y*(2+Math.sin(o.lat*y)+Math.sin(s.lat*y));f=6378137*f*6378137/2}return Math.abs(f)},formattedNumber:function(r,o){var s=parseFloat(r).toFixed(o),h=L.drawLocal.format&&L.drawLocal.format.numeric,f=h&&h.delimiters,y=f&&f.thousands,x=f&&f.decimal;if(y||x){var S=s.split(".");s=y?S[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+y):S[0],x=x||".",S.length>1&&(s=s+x+S[1])}return s},readableArea:function(r,o,y){var h,f,y=L.Util.extend({},n,y);return o?(f=["ha","m"],type=typeof o,type==="string"?f=[o]:type!=="boolean"&&(f=o),h=r>=1e6&&f.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*r,y.km)+" km":r>=1e4&&f.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*r,y.ha)+" ha":L.GeometryUtil.formattedNumber(r,y.m)+" m"):(r/=.836127,h=r>=3097600?L.GeometryUtil.formattedNumber(r/3097600,y.mi)+" mi":r>=4840?L.GeometryUtil.formattedNumber(r/4840,y.ac)+" acres":L.GeometryUtil.formattedNumber(r,y.yd)+" yd"),h},readableDistance:function(r,o,s,h,x){var y,x=L.Util.extend({},n,x);switch(o?typeof o=="string"?o:"metric":s?"feet":h?"nauticalMile":"yards"){case"metric":y=r>1e3?L.GeometryUtil.formattedNumber(r/1e3,x.km)+" km":L.GeometryUtil.formattedNumber(r,x.m)+" m";break;case"feet":r*=3.28083,y=L.GeometryUtil.formattedNumber(r,x.ft)+" ft";break;case"nauticalMile":r*=.53996,y=L.GeometryUtil.formattedNumber(r/1e3,x.nm)+" nm";break;case"yards":default:r*=1.09361,y=r>1760?L.GeometryUtil.formattedNumber(r/1760,x.mi)+" miles":L.GeometryUtil.formattedNumber(r,x.yd)+" yd"}return y},isVersion07x:function(){var r=L.version.split(".");return parseInt(r[0],10)===0&&parseInt(r[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(n,r,o,s){return this._checkCounterclockwise(n,o,s)!==this._checkCounterclockwise(r,o,s)&&this._checkCounterclockwise(n,r,o)!==this._checkCounterclockwise(n,r,s)},_checkCounterclockwise:function(n,r,o){return(o.y-n.y)*(r.x-n.x)>(r.y-n.y)*(o.x-n.x)}}),L.Polyline.include({intersects:function(){var n,r,o,s=this._getProjectedPoints(),h=s?s.length:0;if(this._tooFewPointsForIntersection())return!1;for(n=h-1;n>=3;n--)if(r=s[n-1],o=s[n],this._lineSegmentsIntersectsRange(r,o,n-2))return!0;return!1},newLatLngIntersects:function(n,r){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(n),r)},newPointIntersects:function(n,r){var o=this._getProjectedPoints(),s=o?o.length:0,h=o?o[s-1]:null,f=s-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,n,f,r?1:0)},_tooFewPointsForIntersection:function(n){var r=this._getProjectedPoints(),o=r?r.length:0;return o+=n||0,!r||o<=3},_lineSegmentsIntersectsRange:function(n,r,o,s){var h,f,y=this._getProjectedPoints();s=s||0;for(var x=o;x>s;x--)if(h=y[x-1],f=y[x],L.LineUtil.segmentsIntersect(n,r,h,f))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var n=[],r=this._defaultShape(),o=0;o<r.length;o++)n.push(this._map.latLngToLayerPoint(r[o]));return n}}),L.Polygon.include({intersects:function(){var n,r,o,s,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(n=h.length,r=h[0],o=h[n-1],s=n-2,this._lineSegmentsIntersectsRange(o,r,s,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(n){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,n);var r;this._toolbars={},L.DrawToolbar&&this.options.draw&&(r=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=r,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(r=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=r,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(n){var r,o=L.DomUtil.create("div","leaflet-draw"),s=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(r=this._toolbars[h].addToolbar(n))&&(s||(L.DomUtil.hasClass(r,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(r.childNodes[0],"leaflet-draw-toolbar-top"),s=!0),o.appendChild(r));return o},onRemove:function(){for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&this._toolbars[n].removeToolbar()},setDrawingOptions:function(n){for(var r in this._toolbars)this._toolbars[r]instanceof L.DrawToolbar&&this._toolbars[r].setOptions(n)},_toolbarEnabled:function(n){var r=n.target;for(var o in this._toolbars)this._toolbars[o]!==r&&this._toolbars[o].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(n){L.setOptions(this,n),this._modes={},this._actionButtons=[],this._activeMode=null;var r=L.version.split(".");parseInt(r[0],10)===1&&parseInt(r[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(n){var r,o=L.DomUtil.create("div","leaflet-draw-section"),s=0,h=this._toolbarClass||"",f=this.getModeHandlers(n);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=n,r=0;r<f.length;r++)f[r].enabled&&this._initModeHandler(f[r].handler,this._toolbarContainer,s++,h,f[r].title);if(s)return this._lastButtonIndex=--s,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),o.appendChild(this._toolbarContainer),o.appendChild(this._actionsContainer),o},removeToolbar:function(){for(var n in this._modes)this._modes.hasOwnProperty(n)&&(this._disposeButton(this._modes[n].button,this._modes[n].handler.enable,this._modes[n].handler),this._modes[n].handler.disable(),this._modes[n].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var r=0,o=this._actionButtons.length;r<o;r++)this._disposeButton(this._actionButtons[r].button,this._actionButtons[r].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(n,r,o,s,h){var f=n.type;this._modes[f]={},this._modes[f].handler=n,this._modes[f].button=this._createButton({type:f,title:h,className:s+"-"+f,container:r,callback:this._modes[f].handler.enable,context:this._modes[f].handler}),this._modes[f].buttonIndex=o,this._modes[f].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!a.MSStream},_createButton:function(n){var r=L.DomUtil.create("a",n.className||"",n.container),o=L.DomUtil.create("span","sr-only",n.container);r.href="#",r.appendChild(o),n.title&&(r.title=n.title,o.innerHTML=n.title),n.text&&(r.innerHTML=n.text,o.innerHTML=n.text);var s=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(r,"click",L.DomEvent.stopPropagation).on(r,"mousedown",L.DomEvent.stopPropagation).on(r,"dblclick",L.DomEvent.stopPropagation).on(r,"touchstart",L.DomEvent.stopPropagation).on(r,"click",L.DomEvent.preventDefault).on(r,s,n.callback,n.context),r},_disposeButton:function(n,r){var o=this._detectIOS()?"touchstart":"click";L.DomEvent.off(n,"click",L.DomEvent.stopPropagation).off(n,"mousedown",L.DomEvent.stopPropagation).off(n,"dblclick",L.DomEvent.stopPropagation).off(n,"touchstart",L.DomEvent.stopPropagation).off(n,"click",L.DomEvent.preventDefault).off(n,o,r)},_handlerActivated:function(n){this.disable(),this._activeMode=this._modes[n.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(n){var r,o,s,h,f=this._actionsContainer,y=this.getActions(n),x=y.length;for(o=0,s=this._actionButtons.length;o<s;o++)this._disposeButton(this._actionButtons[o].button,this._actionButtons[o].callback);for(this._actionButtons=[];f.firstChild;)f.removeChild(f.firstChild);for(var S=0;S<x;S++)"enabled"in y[S]&&!y[S].enabled||(r=L.DomUtil.create("li","",f),h=this._createButton({title:y[S].title,text:y[S].text,container:r,callback:y[S].callback,context:y[S].context}),this._actionButtons.push({button:h,callback:y[S].callback}))},_showActionsToolbar:function(){var n=this._activeMode.buttonIndex,r=this._lastButtonIndex,o=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=o+"px",n===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),n===r&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(n){this._map=n,this._popupPane=n._panes.popupPane,this._visible=!1,this._container=n.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(n){return this._container?(n.subtext=n.subtext||"",n.subtext.length!==0||this._singleLineLabel?n.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(n.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+n.subtext+"</span><br />":"")+"<span>"+n.text+"</span>",n.text||n.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(n){var r=this._map.latLngToLayerPoint(n),o=this._container;return this._container&&(this._visible&&(o.style.visibility="inherit"),L.DomUtil.setPosition(o,r)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(n){for(var r in this.options)this.options.hasOwnProperty(r)&&n[r]&&(n[r]=L.extend({},this.options[r],n[r]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,n)},getModeHandlers:function(n){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(n,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(n,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(n,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(n,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(n,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(n,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(n){return[{enabled:n.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:n.completeShape,context:n},{enabled:n.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:n.deleteLastVertex,context:n},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(n){L.setOptions(this,n);for(var r in this._modes)this._modes.hasOwnProperty(r)&&n.hasOwnProperty(r)&&this._modes[r].handler.setOptions(n[r])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(n){n.edit&&(n.edit.selectedPathOptions===void 0&&(n.edit.selectedPathOptions=this.options.edit.selectedPathOptions),n.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,n.edit.selectedPathOptions)),n.remove&&(n.remove=L.extend({},this.options.remove,n.remove)),n.poly&&(n.poly=L.extend({},this.options.poly,n.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,n),this._selectedFeatureCount=0},getModeHandlers:function(n){var r=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(n,{featureGroup:r,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(n,{featureGroup:r}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(n){var r=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return n.removeAllLayers&&r.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),r},addToolbar:function(n){var r=L.Toolbar.prototype.addToolbar.call(this,n);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),r},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var n,r=this.options.featureGroup,o=r.getLayers().length!==0;this.options.edit&&(n=this._modes[L.EditToolbar.Edit.TYPE].button,o?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",o?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(n=this._modes[L.EditToolbar.Delete.TYPE].button,o?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",o?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(n,r){if(L.Handler.prototype.initialize.call(this,n),L.setOptions(this,r),this._featureGroup=r.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var o=L.version.split(".");parseInt(o[0],10)===1&&parseInt(o[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),n._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(n){this._revertLayer(n)},this)},save:function(){var n=new L.LayerGroup;this._featureGroup.eachLayer(function(r){r.edited&&(n.addLayer(r),r.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:n})},_backupLayer:function(n){var r=L.Util.stamp(n);this._uneditedLayerProps[r]||(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?this._uneditedLayerProps[r]={latlngs:L.LatLngUtil.cloneLatLngs(n.getLatLngs())}:n instanceof L.Circle?this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng()),radius:n.getRadius()}:(n instanceof L.Marker||n instanceof L.CircleMarker)&&(this._uneditedLayerProps[r]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(n){var r=L.Util.stamp(n);n.edited=!1,this._uneditedLayerProps.hasOwnProperty(r)&&(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?n.setLatLngs(this._uneditedLayerProps[r].latlngs):n instanceof L.Circle?(n.setLatLng(this._uneditedLayerProps[r].latlng),n.setRadius(this._uneditedLayerProps[r].radius)):(n instanceof L.Marker||n instanceof L.CircleMarker)&&n.setLatLng(this._uneditedLayerProps[r].latlng),n.fire("revert-edited",{layer:n}))},_enableLayerEdit:function(n){var r,o,s=n.layer||n.target||n;this._backupLayer(s),this.options.poly&&(o=L.Util.extend({},this.options.poly),s.options.poly=o),this.options.selectedPathOptions&&(r=L.Util.extend({},this.options.selectedPathOptions),r.maintainColor&&(r.color=s.options.color,r.fillColor=s.options.fillColor),s.options.original=L.extend({},s.options),s.options.editing=r),s instanceof L.Marker?(s.editing&&s.editing.enable(),s.dragging.enable(),s.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):s.editing.enable()},_disableLayerEdit:function(n){var r=n.layer||n.target||n;r.edited=!1,r.editing&&r.editing.disable(),delete r.options.editing,delete r.options.original,this._selectedPathOptions&&(r instanceof L.Marker?this._toggleMarkerHighlight(r):(r.setStyle(r.options.previousOptions),delete r.options.previousOptions)),r instanceof L.Marker?(r.dragging.disable(),r.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.disable()},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_onMarkerDragEnd:function(n){var r=n.target;r.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:r})},_onTouchMove:function(n){var r=n.originalEvent.changedTouches[0],o=this._map.mouseEventToLayerPoint(r),s=this._map.layerPointToLatLng(o);n.target.setLatLng(s)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(n,r){if(L.Handler.prototype.initialize.call(this,n),L.Util.setOptions(this,r),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var o=L.version.split(".");parseInt(o[0],10)===1&&parseInt(o[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(n){this._deletableLayers.addLayer(n),n.fire("revert-deleted",{layer:n})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(n){this._removeLayer({layer:n})},this),this.save()},_enableLayerDelete:function(n){(n.layer||n.target||n).on("click",this._removeLayer,this)},_disableLayerDelete:function(n){var r=n.layer||n.target||n;r.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(r)},_removeLayer:function(n){var r=n.layer||n.target||n;this._deletableLayers.removeLayer(r),this._deletedLayers.addLayer(r),r.fire("deleted")},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);function c0(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ek={},Mk;function gO(){return Mk||(Mk=1,(function(){function a(e,t,i){function n(s,h){if(!t[s]){if(!e[s]){var f=typeof c0=="function"&&c0;if(!h&&f)return f(s,!0);if(r)return r(s,!0);var y=new Error("Cannot find module '"+s+"'");throw y.code="MODULE_NOT_FOUND",y}var x=t[s]={exports:{}};e[s][0].call(x.exports,function(S){var E=e[s][1][S];return n(E||S)},x,x.exports,a,e,t,i)}return t[s].exports}for(var r=typeof c0=="function"&&c0,o=0;o<i.length;o++)n(i[o]);return n}return a})()({1:[function(a,e,t){function i(n,r,o){var s=!1;if(typeof window.XMLHttpRequest>"u")return r(Error("Browser not supported"));if(typeof o>"u"){var h=n.match(/^\s*https?:\/\/[^\/]*/);o=h&&h[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var f=new window.XMLHttpRequest;function y(E){return E>=200&&E<300||E===304}if(o&&!("withCredentials"in f)){f=new window.XDomainRequest;var x=r;r=function(){if(s)x.apply(this,arguments);else{var E=this,z=arguments;setTimeout(function(){x.apply(E,z)},0)}}}function S(){f.status===void 0||y(f.status)?r.call(f,null,f):r.call(f,f,null)}return"onload"in f?f.onload=S:f.onreadystatechange=function(){f.readyState===4&&S()},f.onerror=function(z){r.call(this,z||!0,null),r=function(){}},f.onprogress=function(){},f.ontimeout=function(E){r.call(this,E,null),r=function(){}},f.onabort=function(E){r.call(this,E,null),r=function(){}},f.open("GET",n,!0),f.send(null),s=!0,f}typeof e<"u"&&(e.exports=i)},{}],2:[function(a,e,t){var i={};function n(s){return Math.floor(Math.abs(s)+.5)*Math.sign(s)}function r(s,h,f){s=n(s*f),h=n(h*f);var y=s-h;y<<=1,s-h<0&&(y=~y);for(var x="";y>=32;)x+=String.fromCharCode((32|y&31)+63),y>>=5;return x+=String.fromCharCode(y+63),x}i.decode=function(s,h){for(var f=0,y=0,x=0,S=[],E=0,z=0,D=null,F,U,G=Math.pow(10,h||5);f<s.length;){D=null,E=0,z=0;do D=s.charCodeAt(f++)-63,z|=(D&31)<<E,E+=5;while(D>=32);F=z&1?~(z>>1):z>>1,E=z=0;do D=s.charCodeAt(f++)-63,z|=(D&31)<<E,E+=5;while(D>=32);U=z&1?~(z>>1):z>>1,y+=F,x+=U,S.push([y/G,x/G])}return S},i.encode=function(s,h){if(!s.length)return"";for(var f=Math.pow(10,h||5),y=r(s[0][0],0,f)+r(s[0][1],0,f),x=1;x<s.length;x++){var S=s[x],E=s[x-1];y+=r(S[0],E[0],f),y+=r(S[1],E[1],f)}return y};function o(s){for(var h=[],f=0;f<s.length;f++)h.push(s[f].slice().reverse());return h}i.fromGeoJSON=function(s,h){if(s&&s.type==="Feature"&&(s=s.geometry),!s||s.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return i.encode(o(s.coordinates),h)},i.toGeoJSON=function(s,h){var f=i.decode(s,h);return{type:"LineString",coordinates:o(f)}},typeof e=="object"&&e.exports&&(e.exports=i)},{}],3:[function(a,e,t){var i=a("./languages"),n=i.instructions,r=i.grammars,o=i.abbreviations;e.exports=function(s){return Object.keys(n).forEach(function(h){if(!n[h][s])throw"invalid version "+s+": "+h+" not supported"}),{capitalizeFirstLetter:function(h,f){return f.charAt(0).toLocaleUpperCase(h)+f.slice(1)},ordinalize:function(h,f){if(!h)throw new Error("No language code provided");return n[h][s].constants.ordinalize[f.toString()]||""},directionFromDegree:function(h,f){if(!h)throw new Error("No language code provided");if(!f&&f!==0)return"";if(f>=0&&f<=20)return n[h][s].constants.direction.north;if(f>20&&f<70)return n[h][s].constants.direction.northeast;if(f>=70&&f<=110)return n[h][s].constants.direction.east;if(f>110&&f<160)return n[h][s].constants.direction.southeast;if(f>=160&&f<=200)return n[h][s].constants.direction.south;if(f>200&&f<250)return n[h][s].constants.direction.southwest;if(f>=250&&f<=290)return n[h][s].constants.direction.west;if(f>290&&f<340)return n[h][s].constants.direction.northwest;if(f>=340&&f<=360)return n[h][s].constants.direction.north;throw new Error("Degree "+f+" invalid")},laneConfig:function(h){if(!h.intersections||!h.intersections[0].lanes)throw new Error("No lanes object");var f=[],y=null;return h.intersections[0].lanes.forEach(function(x){(y===null||y!==x.valid)&&(x.valid?f.push("o"):f.push("x"),y=x.valid)}),f.join("")},getWayName:function(h,f,y){var x=y?y.classes||[]:[];if(typeof f!="object")throw new Error("step must be an Object");if(!h)throw new Error("No language code provided");if(!Array.isArray(x))throw new Error("classes must be an Array or undefined");var S,E=f.name||"",z=(f.ref||"").split(";")[0];E===f.ref&&(E=""),E=E.replace(" ("+f.ref+")","");var D=x.indexOf("motorway")!==-1;if(E&&z&&E!==z&&!D){var F=n[h][s].phrase["name and ref"]||n.en[s].phrase["name and ref"];S=this.tokenize(h,F,{name:E,ref:z},y)}else E&&z&&D&&/\d/.test(z)||!E&&z?S=y&&y.formatToken?y.formatToken("ref",z):z:S=y&&y.formatToken?y.formatToken("name",E):E;return S},compile:function(h,f,y){if(!h)throw new Error("No language code provided");if(i.supportedCodes.indexOf(h)===-1)throw new Error("language code "+h+" not loaded");if(!f.maneuver)throw new Error("No step maneuver provided");var x=y||{},S=f.maneuver.type,E=f.maneuver.modifier,z=f.mode,D=f.driving_side;if(!S)throw new Error("Missing step maneuver type");if(S!=="depart"&&S!=="arrive"&&!E)throw new Error("Missing step maneuver modifier");n[h][s][S]||(console.log("Encountered unknown instruction type: "+S),S="turn");var F;if(n[h][s].modes[z])F=n[h][s].modes[z];else{var U=S==="off ramp"&&E.indexOf(D)>=0;n[h][s][S][E]&&!U?F=n[h][s][S][E]:F=n[h][s][S].default}var G;switch(S){case"use lane":G=n[h][s].constants.lanes[this.laneConfig(f)],G||(F=n[h][s]["use lane"].no_lanes);break;case"rotary":case"roundabout":f.rotary_name&&f.maneuver.exit&&F.name_exit?F=F.name_exit:f.rotary_name&&F.name?F=F.name:f.maneuver.exit&&F.exit?F=F.exit:F=F.default;break}var Z=this.getWayName(h,f,x),ee;f.destinations&&f.exits&&F.exit_destination?ee=F.exit_destination:f.destinations&&F.destination?ee=F.destination:f.exits&&F.exit?ee=F.exit:Z&&F.name?ee=F.name:x.waypointName&&F.named?ee=F.named:ee=F.default;var ie=f.destinations&&f.destinations.split(": "),le=ie&&ie[0].split(",")[0],J=ie&&ie[1]&&ie[1].split(",")[0],re;J&&le?re=le+": "+J:re=le||J||"";var ae=x.legIndex>=0&&x.legIndex!==x.legCount-1?this.ordinalize(h,x.legIndex+1):"",me={way_name:Z,destination:re,exit:(f.exits||"").split(";")[0],exit_number:this.ordinalize(h,f.maneuver.exit||1),rotary_name:f.rotary_name,lane_instruction:G,modifier:n[h][s].constants.modifier[E],direction:this.directionFromDegree(h,f.maneuver.bearing_after),nth:ae,waypoint_name:x.waypointName};return this.tokenize(h,ee,me,x)},grammarize:function(h,f,y){if(!h)throw new Error("No language code provided");if(f&&y&&r&&r[h]&&r[h][s]){var x=r[h][s][y];if(x){var S=" "+f+" ",E=r[h].meta.regExpFlags||"";return x.forEach(function(z){var D=new RegExp(z[0],E);S=S.replace(D,z[1])}),S.trim()}}return f},abbreviations:o,tokenize:function(h,f,y,x){if(!h)throw new Error("No language code provided");var S=this,E=!1,z=f.replace(/\{(\w+)(?::(\w+))?\}/g,function(D,F,U,G){var Z=y[F];return typeof Z>"u"?D:(Z=S.grammarize(h,Z,U),G===0&&n[h].meta.capitalizeFirstLetter&&(E=!0,Z=S.capitalizeFirstLetter(h,Z)),x&&x.formatToken&&(Z=x.formatToken(F,Z)),Z)}).replace(/ {2}/g," ");return!E&&n[h].meta.capitalizeFirstLetter?this.capitalizeFirstLetter(h,z):z}}}},{"./languages":4}],4:[function(a,e,t){var i=a("./languages/translations/da.json"),n=a("./languages/translations/de.json"),r=a("./languages/translations/en.json"),o=a("./languages/translations/eo.json"),s=a("./languages/translations/es.json"),h=a("./languages/translations/es-ES.json"),f=a("./languages/translations/fi.json"),y=a("./languages/translations/fr.json"),x=a("./languages/translations/he.json"),S=a("./languages/translations/id.json"),E=a("./languages/translations/it.json"),z=a("./languages/translations/ko.json"),D=a("./languages/translations/my.json"),F=a("./languages/translations/nl.json"),U=a("./languages/translations/no.json"),G=a("./languages/translations/pl.json"),Z=a("./languages/translations/pt-BR.json"),ee=a("./languages/translations/pt-PT.json"),ie=a("./languages/translations/ro.json"),le=a("./languages/translations/ru.json"),J=a("./languages/translations/sv.json"),re=a("./languages/translations/tr.json"),ae=a("./languages/translations/uk.json"),me=a("./languages/translations/vi.json"),Te=a("./languages/translations/zh-Hans.json"),ye=a("./languages/grammar/fr.json"),Re=a("./languages/grammar/ru.json"),We=a("./languages/abbreviations/bg.json"),Le=a("./languages/abbreviations/ca.json"),ht=a("./languages/abbreviations/da.json"),$e=a("./languages/abbreviations/de.json"),pt=a("./languages/abbreviations/en.json"),Dt=a("./languages/abbreviations/es.json"),qe=a("./languages/abbreviations/fr.json"),Nt=a("./languages/abbreviations/he.json"),ni=a("./languages/abbreviations/hu.json"),xi=a("./languages/abbreviations/lt.json"),Lt=a("./languages/abbreviations/nl.json"),Tt=a("./languages/abbreviations/ru.json"),wt=a("./languages/abbreviations/sl.json"),mi=a("./languages/abbreviations/sv.json"),bi=a("./languages/abbreviations/uk.json"),Zi=a("./languages/abbreviations/vi.json"),Li={da:i,de:n,en:r,eo:o,es:s,"es-ES":h,fi:f,fr:y,he:x,id:S,it:E,ko:z,my:D,nl:F,no:U,pl:G,"pt-BR":Z,"pt-PT":ee,ro:ie,ru:le,sv:J,tr:re,uk:ae,vi:me,"zh-Hans":Te},si={fr:ye,ru:Re},fn={bg:We,ca:Le,da:ht,de:$e,en:pt,es:Dt,fr:qe,he:Nt,hu:ni,lt:xi,nl:Lt,ru:Tt,sl:wt,sv:mi,uk:bi,vi:Zi};e.exports={supportedCodes:Object.keys(Li),instructions:Li,grammars:si,abbreviations:fn}},{"./languages/abbreviations/bg.json":5,"./languages/abbreviations/ca.json":6,"./languages/abbreviations/da.json":7,"./languages/abbreviations/de.json":8,"./languages/abbreviations/en.json":9,"./languages/abbreviations/es.json":10,"./languages/abbreviations/fr.json":11,"./languages/abbreviations/he.json":12,"./languages/abbreviations/hu.json":13,"./languages/abbreviations/lt.json":14,"./languages/abbreviations/nl.json":15,"./languages/abbreviations/ru.json":16,"./languages/abbreviations/sl.json":17,"./languages/abbreviations/sv.json":18,"./languages/abbreviations/uk.json":19,"./languages/abbreviations/vi.json":20,"./languages/grammar/fr.json":21,"./languages/grammar/ru.json":22,"./languages/translations/da.json":23,"./languages/translations/de.json":24,"./languages/translations/en.json":25,"./languages/translations/eo.json":26,"./languages/translations/es-ES.json":27,"./languages/translations/es.json":28,"./languages/translations/fi.json":29,"./languages/translations/fr.json":30,"./languages/translations/he.json":31,"./languages/translations/id.json":32,"./languages/translations/it.json":33,"./languages/translations/ko.json":34,"./languages/translations/my.json":35,"./languages/translations/nl.json":36,"./languages/translations/no.json":37,"./languages/translations/pl.json":38,"./languages/translations/pt-BR.json":39,"./languages/translations/pt-PT.json":40,"./languages/translations/ro.json":41,"./languages/translations/ru.json":42,"./languages/translations/sv.json":43,"./languages/translations/tr.json":44,"./languages/translations/uk.json":45,"./languages/translations/vi.json":46,"./languages/translations/zh-Hans.json":47}],5:[function(a,e,t){e.exports={abbreviations:{:"",:"",:"",:"Mkt",:"",:"",:"",:"",:"",:"",:"-",:"",:"-",:"",:"",:"",:"",:"-",:"-",:"-",:"",:"",:"",:"",:"",:".",:"",:"",:"-",:"",:""},classifications:{:"",:"",:"",:"",:"-",:"",:"",:"-",:"-",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},directions:{:"",:"",:"",:"",:"",:"",:""}}},{}],6:[function(a,e,t){e.exports={abbreviations:{comunicacions:"Com.","entitat de poblaci":"Nucli",disseminat:"Diss.","cap de municipi":"Cap",indret:"Indr.",comarca:"Cca.","relleu del litoral":"Lit.",municipi:"Mun.","xarxa hidrogrfica":"Curs Fluv.",equipament:"Equip.",orografia:"Orogr.",barri:"Barri",edificaci:"Edif.","edificaci histrica":"Edif. Hist.","entitat descentralitzada":"E.M.D.","element hidrogrfic":"Hidr."},classifications:{rotonda:"Rot.",carrerada:"Ca.",jard:"J.",paratge:"Pge.",pont:"Pont",lloc:"Lloc",rambla:"Rbla.",cases:"Cses.",barranc:"Bnc.",plana:"Plana",polgon:"Pol.",muralla:"Mur.",enlla:"Ella","antiga carretera":"Actra",glorieta:"Glor.",autovia:"Autv.",prolongaci:"Prol.",calada:"Cda.",carretera:"Ctra.",pujada:"Pda.",torrent:"T.",disseminat:"Disse",barri:"B.",cintur:"Cinto",passera:"Psera",sender:"Send.",carrer:"C.",squia:"Sq.",blocs:"Bloc",rambleta:"Rblt.",partida:"Par.",costa:"Cos.",sector:"Sec.",corral:"Crral",urbanitzaci:"Urb.",autopista:"Autp.",grup:"Gr.",platja:"Pja.",jardins:"J.",complex:"Comp.",portals:"Ptals",finca:"Fin.",travessera:"Trav.",plaa:"Pl.",travessia:"Trv.","polgon industrial":"PI.",passatge:"Ptge.",apartaments:"Apmt.",mirador:"Mira.",antic:"Antic",accs:"Acc.",colnia:"Col.",corriol:"Crol.",portal:"Ptal.",porta:"Pta.",port:"Port",carrer:"Cr.",riera:"Ra.","circumvallaci":"Cval.",baixada:"Bda.",placeta:"Plta.",escala:"Esc.","gran via":"GV",rial:"Rial",conjunt:"Conj.",avinguda:"Av.",esplanada:"Esp.",cantonada:"Cant.",ronda:"Rda.",corredor:"Cdor.",drecera:"Drec.",passads:"Pds.",viaducte:"Vdct.",passeig:"Pg.",venat:"Ve."},directions:{sudest:"SE",sudoest:"SO",nordest:"NE",nordoest:"NO",est:"E",nord:"N",oest:"O",sud:"S"}}},{}],7:[function(a,e,t){e.exports={abbreviations:{skole:"Sk.",ved:"v.",centrum:"C.",sankt:"Skt.",vestre:"v.",hospital:"Hosp.",strde:"Str.",nordre:"Nr.",plads:"Pl.",universitet:"Uni.",vnge:"vg.",station:"St."},classifications:{avenue:"Ave",gammel:"Gl.",dronning:"Dronn.",snder:"Sdr.",nrre:"Nr.",vester:"V.",vestre:"V.",ster:".",stre:".",boulevard:"Boul."},directions:{sydst:"S",nordvest:"NV",syd:"S",nordst:"N",sydvest:"SV",vest:"V",nord:"N",st:""}}},{}],8:[function(a,e,t){e.exports={abbreviations:{},classifications:{},directions:{osten:"O",nordosten:"NO",sden:"S",nordwest:"NW",norden:"N",sdost:"SO",sdwest:"SW",westen:"W"}}},{}],9:[function(a,e,t){e.exports={abbreviations:{square:"Sq",centre:"Ctr",sister:"Sr",lake:"Lk",fort:"Ft",route:"Rte",william:"Wm",national:"Natl",junction:"Jct",center:"Ctr",saint:"St",saints:"SS",station:"Sta",mount:"Mt",junior:"Jr",mountain:"Mtn",heights:"Hts",university:"Univ",school:"Sch",international:"Intl",apartments:"Apts",crossing:"Xing",creek:"Crk",township:"Twp",downtown:"Dtwn",father:"Fr",senior:"Sr",point:"Pt",river:"Riv",market:"Mkt",village:"Vil",park:"Pk",memorial:"Mem"},classifications:{place:"Pl",circle:"Cir",bypass:"Byp",motorway:"Mwy",crescent:"Cres",road:"Rd",cove:"Cv",lane:"Ln",square:"Sq",street:"St",freeway:"Fwy",walk:"Wk",plaza:"Plz",parkway:"Pky",avenue:"Ave",pike:"Pk",drive:"Dr",highway:"Hwy",footway:"Ftwy",point:"Pt",court:"Ct",terrace:"Ter",walkway:"Wky",alley:"Aly",expressway:"Expy",bridge:"Br",boulevard:"Blvd",turnpike:"Tpk"},directions:{southeast:"SE",northwest:"NW",south:"S",west:"W",southwest:"SW",north:"N",east:"E",northeast:"NE"}}},{}],10:[function(a,e,t){e.exports={abbreviations:{segunda:"2",octubre:"8bre",doctores:"Drs",doctora:"Dra",internacional:"Intl",doctor:"Dr",segundo:"2",seorita:"Srta",doctoras:"Drs",primera:"1",primero:"1",san:"S",colonia:"Col",doa:"Da",septiembre:"7bre",diciembre:"10bre",seor:"Sr",ayuntamiento:"Ayto",seora:"Sra",tercera:"3",tercero:"3",don:"D",santa:"Sta",ciudad:"Cdad",noviembre:"9bre",departamento:"Dep"},classifications:{camino:"Cmno",avenida:"Av",paseo:"P",autopista:"Auto",calle:"C",plaza:"Pza",carretera:"Crta"},directions:{este:"E",noreste:"NE",sur:"S",suroeste:"SO",noroeste:"NO",oeste:"O",sureste:"SE",norte:"N"}}},{}],11:[function(a,e,t){e.exports={abbreviations:{alle:"All",arodrome:"Arod",aroport:"Arop"},classifications:{centrale:"Ctrale",campings:"Camp.",urbains:"Urb.",mineure:"Min.",publique:"Publ.",suprieur:"Sup.",fdration:"Fd.","notre-dame":"ND",saint:"St","centre hospitalier rgional":"CHR",exploitation:"Exploit.",gnral:"Gal",civiles:"Civ.",maritimes:"Marit.",aviation:"Aviat.",iii:"3",archologique:"Archo.",musical:"Music.",musicale:"Music.",immeuble:"Imm.",xv:"15",htel:"Ht.",alpine:"Alp.",communale:"Commun.",v:"5",global:"Glob.",universit:"Univ.",confdral:"Confd.",xx:"20",x:"10",piscine:"Pisc.",dimanche:"di.",fleuve:"Flv",postaux:"Post.",musicienne:"Music.",dpartement:"Dpt",fvrier:"Fvr.",municipales:"Munic.",province:"Prov.",communauts:"Commts",barrage:"Barr.",mercredi:"me.",prsidentes:"Pdtes",caftrias:"Caft.",thtral:"Th.",viticulteur:"Vitic.",poste:"Post.",spcialise:"Spc.",agriculture:"Agric.",infirmier:"Infirm.",animation:"Anim.",mondiale:"Mond.",arrt:"Arr.",zone:"zon.",municipaux:"Munic.",grand:"Gd",janvier:"Janv.",fondateur:"Fond.",premire:"1re",municipale:"Munic.",direction:"Dir.",anonyme:"Anon.",dpartementale:"Dpt",moyens:"Moy.",novembre:"Nov.",jardin:"Jard.",petites:"Pet.",priv:"Priv.",centres:"Ctres",forestier:"Forest.",xiv:"14",africaines:"Afric.",sergent:"Sgt",europenne:"Eur.",prive:"Priv.",caf:"Cf",xix:"19",hautes:"Htes",major:"Mjr",vendredi:"ve.",municipalit:"Munic.","sous-prfecture":"Ss-prf.",spciales:"Spc.",secondaires:"Second.",viie:"7e",moyenne:"Moy.",commerciale:"Commerc.",rgion:"Rg.",amricaines:"Amr.",amricains:"Amr.",service:"Sce",professeur:"Prof.",dpartemental:"Dpt",htels:"Ht.",mondiales:"Mond.",ire:"1re",caporal:"Capo.",militaire:"Milit.","lyce d'enseignement professionnel":"LEP",adjudant:"Adj.",mdicale:"Md.",confrences:"Confr.",universelle:"Univ.",xiie:"12e",suprieures:"Sup.",naturel:"Natur.","socit nationale":"SN",hospitalier:"Hosp.",culturelle:"Cult.",amricain:"Amr.","son altesse royale":"S.A.R.",infirmire:"Infirm.",viii:"8",fondatrice:"Fond.",madame:"Mme",mtropolitain:"Mtrop.",ophtalmologues:"Ophtalmos",xviie:"18e",viiie:"8e",commerante:"Commer.","centre d'enseignement du second degr":"CES",septembre:"Sept.",agriculteur:"Agric.",xiii:"13",pontifical:"Pontif.",caftria:"Caft.",prince:"Pce",vie:"6e",archiduchesse:"Archid.",occidental:"Occ.",spectacles:"Spect.",camping:"Camp.",mtro:"M",arrondissement:"Arrond.",viticole:"Vitic.",ii:"2",sicle:"Si.",chapelles:"Chap.",centre:"Ctre","sapeur-pompiers":"Sap.-pomp.",tablissements:"tabts","socit anonyme":"SA",directeurs:"Dir.",vii:"7",culturel:"Cult.",central:"Ctral",mtropolitaine:"Mtrop.",administrations:"Admin.",amiraux:"Amir.",sur:"s/",premiers:"1ers","provence-alpes-cte d'azur":"PACA",cathdrale:"Cathd.",iv:"4",postale:"Post.",social:"Soc.",spcialis:"Spc.",district:"Distr.",technologique:"Techno.",viticoles:"Vitic.",ix:"9",protgs:"Prot.",historiques:"Hist.",sous:"s/s",national:"Nal",ambassade:"Amb.",cafs:"Cfs",agronomie:"Agro.",sapeurs:"Sap.",petits:"Pet.",monsieur:"M.",boucher:"Bouch.",restaurant:"Restau.",lyce:"Lyc.",urbaine:"Urb.",prfecture:"Prf.",districts:"Distr.",civil:"Civ.",protges:"Prot.",sapeur:"Sap.",thtre:"Th.",collge:"Coll.",mardi:"ma.",mmorial:"Mmor.",africain:"Afric.",rpublicaine:"Rpubl.",sociale:"Soc.",spcial:"Spc.",technologie:"Techno.",charcuterie:"Charc.",commerces:"Commerc.",fluviale:"Flv",parachutistes:"Para.",primaires:"Prim.",directions:"Dir.",prsidentiel:"Pdtl",nationales:"Nales",aprs:"apr.",samedi:"sa.",unit:"U.",xxiii:"23",associ:"Assoc.",lectrique:"lectr.",populaire:"Pop.",asiatique:"Asiat.",navigable:"Navig.",prsidente:"Pdte",xive:"14e",associs:"Assoc.",pompiers:"Pomp.",agricoles:"Agric.",lm:"lm.",dcembre:"Dc.","son altesse":"S.Alt.","aprs-midi":"a.-m.",mineures:"Min.",juillet:"Juil.",aviatrices:"Aviat.",fondation:"Fond.",pontificaux:"Pontif.",temple:"Tple",europennes:"Eur.",rgionale:"Rg.",informations:"Infos",mondiaux:"Mond.",infanterie:"Infant.",archologie:"Archo.",dans:"d/",hospice:"Hosp.",spectacle:"Spect.","htels-restaurants":"Ht.-Rest.","htel-restaurant":"Ht.-Rest.",hlicoptre:"hlico",xixe:"19e",cliniques:"Clin.",docteur:"Dr",secondaire:"Second.",municipal:"Munic.",gnrale:"Gale",chteau:"Cht.",commerant:"Commer.",avril:"Avr.",clinique:"Clin.",urbaines:"Urb.",navale:"Nav.",navigation:"Navig.",asiatiques:"Asiat.",pontificales:"Pontif.",administrative:"Admin.",syndicat:"Synd.",lundi:"lu.",petite:"Pet.",maritime:"Marit.",mtros:"M",enseignement:"Enseign.",fluviales:"Flv",historique:"Hist.",comts:"Cts",rsidentiel:"Rsid.",international:"Int.",suprieure:"Sup.","centre hospitalier universitaire":"CHU",confdration:"Confd.",boucherie:"Bouch.",fondatrices:"Fond.",mdicaux:"Md.",europens:"Eur.",orientaux:"Ori.",naval:"Nav.",tang:"tg",provincial:"Prov.",junior:"Jr",dpartementales:"Dpt",musique:"Musiq.",directrices:"Dir.",marchal:"Mal",civils:"Civ.",protg:"Prot.",tablissement:"tabt",trafic:"Traf.",aviateur:"Aviat.",archives:"Arch.",africains:"Afric.",maternelle:"Matern.",industrielle:"Ind.",administratif:"Admin.",oriental:"Ori.",universitaire:"Univ.",majeur:"Maj.",haute:"Hte",communal:"Commun.",petit:"Pet.",commune:"Commun.",exploitant:"Exploit.",confrence:"Confr.",monseigneur:"Mgr",pharmacien:"Pharm.",jeudi:"je.",primaire:"Prim.",hlicoptres:"hlicos",agronomique:"Agro.",mdecin:"Md.",ve:"5e",pontificale:"Pontif.",ier:"1er",cinma:"Cin",fluvial:"Flv",occidentaux:"Occ.",commerants:"Commer.",banque:"Bq",moyennes:"Moy.",pharmacienne:"Pharm.",dmocratique:"Dm.",cinmas:"Cins",spciale:"Spc.",prsidents:"Pdts",directrice:"Dir.",vi:"6",basse:"Bas.",xve:"15e",tat:".",aviateurs:"Aviat.",majeurs:"Maj.",infirmiers:"Infirm.",glise:"gl.",confdrale:"Confd.",xxie:"21e",comte:"Cte",europen:"Eur.",union:"U.",pharmacie:"Pharm.",infirmires:"Infirm.",comt:"Ct",sportive:"Sport.",deuxime:"2e",xvi:"17",haut:"Ht",mdicales:"Md.",dvelopp:"Dvelop.",btiment:"Bt.",commerce:"Commerc.",ive:"4e",associatif:"Assoc.",rural:"Rur.",cimetire:"Cim.",rgional:"Rg.",ferroviaire:"Ferr.",vers:"v/",mosque:"Mosq.",mineurs:"Min.",nautique:"Naut.",chteaux:"Cht.",sportif:"Sport.",mademoiselle:"Mle",cole:"c.",doyen:"Doy.",industriel:"Ind.",chapelle:"Chap.",socits:"Sts",internationale:"Int.",coopratif:"Coop.",hospices:"Hosp.",xxii:"22",parachutiste:"Para.",alpines:"Alp.",civile:"Civ.",xvie:"17e",tats:".",muse:"Mse",centrales:"Ctrales",globaux:"Glob.",suprieurs:"Sup.",syndicats:"Synd.",archevque:"Archev.",docteurs:"Drs",bibliothque:"Biblio.",lieutenant:"Lieut.",rpublique:"Rp.",vtrinaire:"Vt.",dpartementaux:"Dpt",premier:"1er",fluviaux:"Flv",anim:"Anim.",orientales:"Ori.",technologiques:"Techno.",princesse:"Pse",routire:"Rout.",cooprative:"Coop.",scolaire:"Scol.",coles:"c.",football:"Foot",territoriale:"Territ.",commercial:"Commerc.",mineur:"Min.",millnaires:"Mill.",association:"Assoc.",catholique:"Cathol.",administration:"Admin.",mairie:"Mair.",portuaire:"Port.",tertiaires:"Terti.",thtrale:"Th.",palais:"Pal.",troisime:"3e",directeur:"Dir.",vtrinaires:"Vt.",facult:"Fac.",occidentales:"Occ.",viticulteurs:"Vitic.",xvii:"18",occidentale:"Occ.",amiral:"Amir.",professionnel:"Profess.",administratives:"Admin.",commerciales:"Commerc.",saints:"Sts",agronomes:"Agro.",stade:"Std","sous-prfet":"Ss-prf.",senior:"Sr",agronome:"Agro.",terrain:"Terr.",catholiques:"Cathol.",rsidentielle:"Rsid.",grands:"Gds",exploitants:"Exploit.",xiiie:"13e",croix:"Cx",gnraux:"Gaux",crdit:"Crd.",cimetires:"Cim.",antenne:"Ant.",mdical:"Md.",collges:"Coll.",musicien:"Music.",apostolique:"Apost.",postal:"Post.",territorial:"Territ.",urbanisme:"Urb.",prfectorale:"Prf.",fondateurs:"Fond.",information:"Info.",glises:"gl.",ophtalmologue:"Ophtalmo",congrgation:"Congrg.",charcutier:"Charc.",tage:"t.",consulat:"Consul.",public:"Publ.",ferre:"Ferr.",matin:"mat.","socit anonyme  responsabilit limite":"SARL",monuments:"Mmts",protection:"Prot.",universel:"Univ.",nationale:"Nale",prsident:"Pdt",provinciale:"Prov.",agriculteurs:"Agric.",prfectoral:"Prf.",xxe:"20e",alpins:"Alp.",avant:"av.",infirmerie:"Infirm.","deux mil":"2000",rurale:"Rur.",administratifs:"Admin.",octobre:"Oct.",archipel:"Archip.",communaut:"Commt",globales:"Glob.",alpin:"Alp.",numros:"N","lieutenant-colonel":"Lieut.-Col.","jsus-christ":"J.-C.",agricole:"Agric.","sa majest":"S.Maj.",associative:"Assoc.",xxi:"21",prsidentielle:"Pdtle",moyen:"Moy.",fdral:"Fd.",professionnelle:"Profess.",tertiaire:"Terti.",ixe:"9e",hpital:"Hp.",technologies:"Techno.",iiie:"3e",dveloppement:"Dvelop.",monument:"Mmt",forestire:"Forest.",numro:"N",viticulture:"Vitic.",traversire:"Traver.",technique:"Tech.",lectriques:"lectr.",militaires:"Milit.",pompier:"Pomp.",amricaine:"Amr.",prfet:"Prf.",congrgations:"Congrg.",ptissier:"Ptiss.",mondial:"Mond.",ophtalmologie:"Ophtalm.",sainte:"Ste",africaine:"Afric.",aviatrice:"Aviat.",doyens:"Doy.",socit:"St",majeures:"Maj.",orientale:"Ori.",ministre:"Min.",archiduc:"Archid.",territoire:"Territ.",techniques:"Tech.","le-de-france":"IDF",globale:"Glob.",xe:"10e",xie:"11e",majeure:"Maj.",commerciaux:"Commerc.",maire:"Mair.",spciaux:"Spc.",grande:"Gde",messieurs:"MM",colonel:"Col.",millnaire:"Mill.",xi:"11",urbain:"Urb.",fdrale:"Fd.",ferr:"Ferr.",rivire:"Riv.",rpublicain:"Rpubl.",grandes:"Gdes",rgiment:"Rgim.",hauts:"Hts",catgorie:"Catg.",basses:"Bas.",xii:"12",agronomiques:"Agro.",iie:"2e",protge:"Prot.","sapeur-pompier":"Sap.-pomp."},directions:{"est-nord-est":"ENE","nord-est":"NE",ouest:"O","sud-est":"SE","est-sud-est":"ESE","nord-nord-est":"NNE",sud:"S","nord-nord-ouest":"NNO","nord-ouest":"NO",nord:"N","ouest-sud-ouest":"OSO","ouest-nord-ouest":"ONO","sud-ouest":"SO","sud-sud-est":"SSE","sud-sud-ouest":"SSO",est:"E"}}},{}],12:[function(a,e,t){e.exports={abbreviations:{:"'"},classifications:{},directions:{}}},{}],13:[function(a,e,t){e.exports={abbreviations:{},classifications:{},directions:{kelet:"K",szakkelet:"K",dl:"D",szaknyugat:"NY",szak:"",dlkelet:"DK",dlnyugat:"DNY",nyugat:"NY"}}},{}],14:[function(a,e,t){e.exports={abbreviations:{apartamentai:"Apt",auktumos:"Auk",centras:"Ctr",eeras:"E",fortas:"Ft",greitkelis:"Grtkl",juosta:"Jst",kaimas:"Km",kalnas:"Kln",kelias:"Kl",kiemelis:"Kml",miestelis:"Mstl","miesto centras":"M.Ctr",mokykla:"Mok",nacionalinis:"Nac",paminklas:"Pmkl",parkas:"Pk",pusratis:"Psrt",sankrya:"Skr",ses:"Ses",skveras:"Skv",stotis:"St",v:"v",tarptautinis:"Trptaut",takas:"Tk",tvas:"Tv",turgus:"Tgs",universitetas:"Univ",up:"Up",upelis:"Up",vieta:"Vt"},classifications:{aikt:"a.",alja:"al.",aplinkkelis:"aplinkl.",autostrada:"auto.",bulvaras:"b.",gatv:"g.",kelias:"kel.",krantin:"krant.",prospektas:"pr.",plentas:"pl.",skersgatvis:"skg.",takas:"tak.",tiltas:"tlt."},directions:{piets:"P",vakarai:"V",iaur:"","iaurs vakarai":"V",pietryiai:"PR","iaurs rytai":"R",rytai:"R",pietvakariai:"PV"}}},{}],15:[function(a,e,t){e.exports={abbreviations:{centrum:"Cntrm",nationaal:"Natl",berg:"Brg",meer:"Mr",kruising:"Krsng",toetreden:"Ttrdn"},classifications:{bypass:"Pass",brug:"Br",straat:"Str",rechtbank:"Rbank",snoek:"Snk",autobaan:"Baan",terras:"Trrs",punt:"Pt",plaza:"Plz",rijden:"Rijd",parkway:"Pky",inham:"Nham",snelweg:"Weg","halve maan":"Maan",cirkel:"Crkl",laan:"Ln",rijbaan:"Strook",weg:"Weg",lopen:"Lpn",autoweg:"Weg",boulevard:"Blvd",plaats:"Plts",steeg:"Stg",voetpad:"Stoep"},directions:{noordoost:"NO",westen:"W",zuiden:"Z",zuidwest:"ZW",oost:"O",zuidoost:"ZO",noordwest:"NW",noorden:"N"}}},{}],16:[function(a,e,t){e.exports={abbreviations:{:".",:".",:"",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:"."},classifications:{:"-",:".",:".",:".",:".",:".",:".",:".",:"."},directions:{:"","-":"","-":"","-":"","-":"",:"",:"",:""}}},{}],17:[function(a,e,t){e.exports={abbreviations:{},classifications:{},directions:{vzhod:"V",severovzhod:"SV",jug:"J",severozahod:"SZ",sever:"S",jugovzhod:"JV",jugozahod:"JZ",zahod:"Z"}}},{}],18:[function(a,e,t){e.exports={abbreviations:{sankta:"s:ta",gamla:"G:la",sankt:"s:t"},classifications:{Bro:"Br"},directions:{norr:"N",sydst:"SO",vster:"V",ster:"O",nordvst:"NV",sydvst:"SV",sder:"S",nordst:"NO"}}},{}],19:[function(a,e,t){e.exports={abbreviations:{},classifications:{},directions:{:""," ":"",:""," ":"",:""," ":""," ":"",:""}}},{}],20:[function(a,e,t){e.exports={abbreviations:{"vin bo tng":"VBT","th trn":"Tt","i hc":"H","cn c khng quan":"CCKQ","cu lc b":"CLB","bu in":"B","khch sn":"KS","khu du lch":"KDL","khu cng nghip":"KCN","khu ngh mt":"KNM","th x":"Tx","khu chung c":"KCC","phi trng":"PT","trung tm":"TT","tng cng ty":"TCty","trung hc c s":"THCS","sn bay quc t":"SBQT","trung hc ph thng":"THPT","cao ng":"C","cng ty":"Cty","sn bay":"SB","thnh ph":"Tp","cng vin":"CV","sn vn ng":"SV","linh mc":"LM","vn quc gia":"VQG"},classifications:{"huyn l":"HL","ng tnh":"T","quc l":"QL","xa l":"XL","hng l":"HL","tnh l":"TL","ng huyn":"H","ng cao tc":"CT","i l":"L","vit nam":"VN","qung trng":"QT","ng b":"B"},directions:{ty:"T",nam:"N","ng nam":"N","ng bc":"B","ty nam":"TN",ng:"",bc:"B"}}},{}],21:[function(a,e,t){e.exports={meta:{regExpFlags:"gi"},v5:{article:[["^ Acc[e]s "," laccs "],["^ Aire "," laire "],["^ All[e]e "," lalle "],["^ Anse "," lanse "],["^ (L['])?Autoroute "," lautoroute "],["^ Avenue "," lavenue "],["^ Barreau "," le barreau "],["^ Boulevard "," le boulevard "],["^ Chemin "," le chemin "],["^ Petit[\\- ]Chemin "," le petit chemin "],["^ Cit[e] "," la cit "],["^ Clos "," le clos "],["^ Corniche "," la corniche "],["^ Cour "," la cour "],["^ Cours "," le cours "],["^ D[e]viation "," la dviation "],["^ Entr[e]e "," lentre "],["^ Esplanade "," lesplanade "],["^ Galerie "," la galerie "],["^ Impasse "," limpasse "],["^ Lotissement "," le lotissement "],["^ Mont[e]e "," la monte "],["^ Parc "," le parc "],["^ Parvis "," le parvis "],["^ Passage "," le passage "],["^ Place "," la place "],["^ Petit[\\- ]Pont "," le petit-pont "],["^ Pont "," le pont "],["^ Promenade "," la promenade "],["^ Quai "," le quai "],["^ Rocade "," la rocade "],["^ Rond[\\- ]?Point "," le rond-point "],["^ Route "," la route "],["^ Rue "," la rue "],["^ Grande Rue "," la grande rue "],["^ Sente "," la sente "],["^ Sentier "," le sentier "],["^ Sortie "," la sortie "],["^ Souterrain "," le souterrain "],["^ Square "," le square "],["^ Terrasse "," la terrasse "],["^ Traverse "," la traverse "],["^ Tunnel "," le tunnel "],["^ Viaduc "," le viaduc "],["^ Villa "," la villa "],["^ Village "," le village "],["^ Voie "," la voie "],[" ([dl])'"," $1"]],preposition:[["^ Le ","  du "],["^ Les ","  des "],["^ La ","  de La "],["^ Acc[e]s ","  de laccs "],["^ Aire ","  de laire "],["^ All[e]e ","  de lalle "],["^ Anse ","  de lanse "],["^ (L['])?Autoroute ","  de lautoroute "],["^ Avenue ","  de lavenue "],["^ Barreau ","  du barreau "],["^ Boulevard ","  du boulevard "],["^ Chemin ","  du chemin "],["^ Petit[\\- ]Chemin ","  du petit chemin "],["^ Cit[e] ","  de la cit "],["^ Clos ","  du clos "],["^ Corniche ","  de la corniche "],["^ Cour ","  de la cour "],["^ Cours ","  du cours "],["^ D[e]viation ","  de la dviation "],["^ Entr[e]e ","  de lentre "],["^ Esplanade ","  de lesplanade "],["^ Galerie ","  de la galerie "],["^ Impasse ","  de limpasse "],["^ Lotissement ","  du lotissement "],["^ Mont[e]e ","  de la monte "],["^ Parc ","  du parc "],["^ Parvis ","  du parvis "],["^ Passage ","  du passage "],["^ Place ","  de la place "],["^ Petit[\\- ]Pont ","  du petit-pont "],["^ Pont ","  du pont "],["^ Promenade ","  de la promenade "],["^ Quai ","  du quai "],["^ Rocade ","  de la rocade "],["^ Rond[\\- ]?Point ","  du rond-point "],["^ Route ","  de la route "],["^ Rue ","  de la rue "],["^ Grande Rue ","  de la grande rue "],["^ Sente ","  de la sente "],["^ Sentier ","  du sentier "],["^ Sortie ","  de la sortie "],["^ Souterrain ","  du souterrain "],["^ Square ","  du square "],["^ Terrasse ","  de la terrasse "],["^ Traverse ","  de la traverse "],["^ Tunnel ","  du tunnel "],["^ Viaduc ","  du viaduc "],["^ Villa ","  de la villa "],["^ Village ","  du village "],["^ Voie ","  de la voie "],["^ ([AEIOUY])","  d$1"],["^ (\\S)","  de $1"],[" ([dl])'"," $1"]],rotary:[["^ Le ","  le rond-point du "],["^ Les ","  le rond-point des "],["^ La ","  le rond-point de La "],["^ Acc[e]s "," le rond-point de laccs "],["^ Aire ","  le rond-point de laire "],["^ All[e]e ","  le rond-point de lalle "],["^ Anse ","  le rond-point de lanse "],["^ (L['])?Autoroute ","  le rond-point de lautoroute "],["^ Avenue ","  le rond-point de lavenue "],["^ Barreau ","  le rond-point du barreau "],["^ Boulevard ","  le rond-point du boulevard "],["^ Chemin ","  le rond-point du chemin "],["^ Petit[\\- ]Chemin ","  le rond-point du petit chemin "],["^ Cit[e] ","  le rond-point de la cit "],["^ Clos ","  le rond-point du clos "],["^ Corniche ","  le rond-point de la corniche "],["^ Cour ","  le rond-point de la cour "],["^ Cours ","  le rond-point du cours "],["^ D[e]viation ","  le rond-point de la dviation "],["^ Entr[e]e ","  le rond-point de lentre "],["^ Esplanade ","  le rond-point de lesplanade "],["^ Galerie ","  le rond-point de la galerie "],["^ Impasse ","  le rond-point de limpasse "],["^ Lotissement ","  le rond-point du lotissement "],["^ Mont[e]e ","  le rond-point de la monte "],["^ Parc ","  le rond-point du parc "],["^ Parvis ","  le rond-point du parvis "],["^ Passage ","  le rond-point du passage "],["^ Place ","  le rond-point de la place "],["^ Petit[\\- ]Pont ","  le rond-point du petit-pont "],["^ Pont ","  le rond-point du pont "],["^ Promenade ","  le rond-point de la promenade "],["^ Quai ","  le rond-point du quai "],["^ Rocade ","  le rond-point de la rocade "],["^ Rond[\\- ]?Point ","  le rond-point "],["^ Route ","  le rond-point de la route "],["^ Rue ","  le rond-point de la rue "],["^ Grande Rue ","  le rond-point de la grande rue "],["^ Sente ","  le rond-point de la sente "],["^ Sentier ","  le rond-point du sentier "],["^ Sortie ","  le rond-point de la sortie "],["^ Souterrain ","  le rond-point du souterrain "],["^ Square ","  le rond-point du square "],["^ Terrasse ","  le rond-point de la terrasse "],["^ Traverse ","  le rond-point de la traverse "],["^ Tunnel ","  le rond-point du tunnel "],["^ Viaduc ","  le rond-point du viaduc "],["^ Villa ","  le rond-point de la villa "],["^ Village ","  le rond-point du village "],["^ Voie ","  le rond-point de la voie "],["^ ([AEIOUY])","  le rond-point d$1"],["^ (\\S)","  le rond-point de $1"],[" ([dl])'"," $1"]],arrival:[["^ Le ","  au "],["^ Les ","  aux "],["^ La ","   La "],["^ (\\S)","   $1"],[" ([dl])'"," $1"]]}}},{}],22:[function(a,e,t){e.exports={meta:{regExpFlags:""},v5:{accusative:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ [][] ","  "]],dative:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "],["([]) ","$1 "]],genitive:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "]],prepositional:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "]]}}},{}],23:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"frste",2:"anden",3:"tredje",4:"fjerde",5:"femte",6:"sjette",7:"syvende",8:"ottende",9:"niende",10:"tiende"},direction:{north:"Nord",northeast:"Nordst",east:"st",southeast:"Sydst",south:"Syd",southwest:"Sydvest",west:"Vest",northwest:"Nordvest"},modifier:{left:"venstresving",right:"hjresving","sharp left":"skarpt venstresving","sharp right":"skarpt hjresving","slight left":"svagt venstresving","slight right":"svagt hjresving",straight:"ligeud",uturn:"U-vending"},lanes:{xo:"Hold til hjre",ox:"Hold til venstre",xox:"Benyt midterste spor",oxo:"Hold til hjre eller venstre"}},modes:{ferry:{default:"Tag frgen",name:"Tag frgen {way_name}",destination:"Tag frgen i retning {destination}"}},phrase:{"two linked by distance":"{instruction_one} derefter, efter {distance}, {instruction_two}","two linked":"{instruction_one}, derefter {instruction_two}","one in distance":"Efter {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":"afkrsel {exit}"},arrive:{default:{default:"Du er ankommet til din {nth} destination",upcoming:"Du vil ankomme til din {nth} destination",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}"},left:{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},right:{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"sharp left":{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},"sharp right":{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"slight right":{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"slight left":{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},straight:{default:"Du er ankommet til din {nth} destination, der befinder sig lige frem",upcoming:"Du vil ankomme til din {nth} destination foran dig",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, der befinder sig lige frem"}},continue:{default:{default:"Drej til {modifier}",name:"Drej til {modifier} videre ad {way_name}",destination:"Drej til {modifier} mod {destination}",exit:"Drej til {modifier} ad {way_name}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst mod {destination}",distance:"Fortst {distance} ligeud",namedistance:"Fortst {distance} ad {way_name}"},"sharp left":{default:"Drej skarpt til venstre",name:"Drej skarpt til venstre videre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre",name:"Drej skarpt til hjre videre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},"slight left":{default:"Drej left til venstre",name:"Drej let til venstre videre ad {way_name}",destination:"Drej let til venstre mod {destination}"},"slight right":{default:"Drej let til hjre",name:"Drej let til hjre videre ad {way_name}",destination:"Drej let til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending tilbage ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},depart:{default:{default:"Kr mod {direction}",name:"Kr mod {direction} ad {way_name}",namedistance:"Fortst {distance} ad {way_name}mod {direction}"}},"end of road":{default:{default:"Drej til {modifier}",name:"Drej til {modifier} ad {way_name}",destination:"Drej til {modifier} mof {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst ligeud mod {destination}"},uturn:{default:"Foretag en U-vending for enden af vejen",name:"Foretag en U-vending ad {way_name} for enden af vejen",destination:"Foretag en U-vending mod {destination} for enden af vejen"}},fork:{default:{default:"Hold til {modifier} ved udfletningen",name:"Hold mod {modifier} p {way_name}",destination:"Hold mod {modifier} mod {destination}"},"slight left":{default:"Hold til venstre ved udfletningen",name:"Hold til venstre p {way_name}",destination:"Hold til venstre mod {destination}"},"slight right":{default:"Hold til hjre ved udfletningen",name:"Hold til hjre p {way_name}",destination:"Hold til hjre mod {destination}"},"sharp left":{default:"Drej skarpt til venstre ved udfletningen",name:"Drej skarpt til venstre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre ved udfletningen",name:"Drej skarpt til hjre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},merge:{default:{default:"Flet til {modifier}",name:"Flet til {modifier} ad {way_name}",destination:"Flet til {modifier} mod {destination}"},straight:{default:"Flet",name:"Flet ind p {way_name}",destination:"Flet ind mod {destination}"},"slight left":{default:"Flet til venstre",name:"Flet til venstre ad {way_name}",destination:"Flet til venstre mod {destination}"},"slight right":{default:"Flet til hjre",name:"Flet til hjre ad {way_name}",destination:"Flet til hjre mod {destination}"},"sharp left":{default:"Flet til venstre",name:"Flet til venstre ad {way_name}",destination:"Flet til venstre mod {destination}"},"sharp right":{default:"Flet til hjre",name:"Flet til hjre ad {way_name}",destination:"Flet til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},"new name":{default:{default:"Fortst {modifier}",name:"Fortst {modifier} ad {way_name}",destination:"Fortst {modifier} mod {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ad {way_name}",destination:"Fortst mod {destination}"},"sharp left":{default:"Drej skarpt til venstre",name:"Drej skarpt til venstre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre",name:"Drej skarpt til hjre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},"slight left":{default:"Fortst til venstre",name:"Fortst til venstre ad {way_name}",destination:"Fortst til venstre mod {destination}"},"slight right":{default:"Fortst til hjre",name:"Fortst til hjre ad {way_name}",destination:"Fortst til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},notification:{default:{default:"Fortst {modifier}",name:"Fortst {modifier} ad {way_name}",destination:"Fortst {modifier} mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},"off ramp":{default:{default:"Tag afkrslen",name:"Tag afkrslen ad {way_name}",destination:"Tag afkrslen mod {destination}",exit:"Vlg afkrsel {exit}",exit_destination:"Vlg afkrsel {exit} mod {destination}"},left:{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},right:{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"},"sharp left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},"sharp right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"},"slight left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},"slight right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"}},"on ramp":{default:{default:"Tag afkrslen",name:"Tag afkrslen ad {way_name}",destination:"Tag afkrslen mod {destination}"},left:{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},right:{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"},"sharp left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},"sharp right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"},"slight left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},"slight right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"}},rotary:{default:{default:{default:"Kr ind i rundkrslen",name:"Tag rundkrslen og kr fra ad {way_name}",destination:"Tag rundkrslen og kr mod {destination}"},name:{default:"Kr ind i {rotary_name}",name:"Kr ind i {rotary_name} og kr ad {way_name} ",destination:"Kr ind i {rotary_name} og kr mod {destination}"},exit:{default:"Tag rundkrslen og forlad ved {exit_number} afkrsel",name:"Tag rundkrslen og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Tag rundkrslen og forlad ved {exit_number} afkrsel mod {destination}"},name_exit:{default:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel",name:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel mod {destination}"}}},roundabout:{default:{exit:{default:"Tag rundkrslen og forlad ved {exit_number} afkrsel",name:"Tag rundkrslen og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Tag rundkrslen og forlad ved {exit_number} afkrsel mod {destination}"},default:{default:"Kr ind i rundkrslen",name:"Tag rundkrslen og kr fra ad {way_name}",destination:"Tag rundkrslen og kr mod {destination}"}}},"roundabout turn":{default:{default:"Foretag et {modifier}",name:"Foretag et {modifier} ad {way_name}",destination:"Foretag et {modifier} mod {destination}"},left:{default:"Drej til venstre",name:"Drej til venstre ad {way_name}",destination:"Drej til venstre mod {destination}"},right:{default:"Drej til hjre",name:"Drej til hjre ad {way_name}",destination:"Drej til hjre mod {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst ligeud mod {destination}"}},"exit roundabout":{default:{default:"Forlad rundkrslen",name:"Forlad rundkrslen ad {way_name}",destination:"Forlad rundkrslen mod  {destination}"}},"exit rotary":{default:{default:"Forlad rundkrslen",name:"Forlad rundkrslen ad {way_name}",destination:"Forlad rundkrslen mod {destination}"}},turn:{default:{default:"Foretag et {modifier}",name:"Foretag et {modifier} ad {way_name}",destination:"Foretag et {modifier} mod {destination}"},left:{default:"Drej til venstre",name:"Drej til venstre ad {way_name}",destination:"Drej til venstre mod {destination}"},right:{default:"Drej til hjre",name:"Drej til hjre ad {way_name}",destination:"Drej til hjre mod {destination}"},straight:{default:"Fortst ligeud",name:"Kr ligeud ad {way_name}",destination:"Kr ligeud mod {destination}"}},"use lane":{no_lanes:{default:"Fortst ligeud"},default:{default:"{lane_instruction}"}}}}},{}],24:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"erste",2:"zweite",3:"dritte",4:"vierte",5:"fnfte",6:"sechste",7:"siebente",8:"achte",9:"neunte",10:"zehnte"},direction:{north:"Norden",northeast:"Nordosten",east:"Osten",southeast:"Sdosten",south:"Sden",southwest:"Sdwesten",west:"Westen",northwest:"Nordwesten"},modifier:{left:"links",right:"rechts","sharp left":"scharf links","sharp right":"scharf rechts","slight left":"leicht links","slight right":"leicht rechts",straight:"geradeaus",uturn:"180-Wendung"},lanes:{xo:"Rechts halten",ox:"Links halten",xox:"Mittlere Spur nutzen",oxo:"Rechts oder links halten"}},modes:{ferry:{default:"Fhre nehmen",name:"Fhre nehmen {way_name}",destination:"Fhre nehmen Richtung {destination}"}},phrase:{"two linked by distance":"{instruction_one} danach in {distance} {instruction_two}","two linked":"{instruction_one} danach {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Sie haben Ihr {nth} Ziel erreicht",upcoming:"Sie haben Ihr {nth} Ziel erreicht",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}"},left:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},right:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"sharp left":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},"sharp right":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"slight right":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"slight left":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},straight:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich geradeaus",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich geradeaus",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich geradeaus"}},continue:{default:{default:"{modifier} abbiegen",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}",exit:"{modifier} abbiegen auf {way_name}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Weiterfahren in Richtung {destination}",distance:"Geradeaus weiterfahren fr {distance}",namedistance:"Geradeaus weiterfahren auf {way_name} fr {distance}"},"sharp left":{default:"Scharf links",name:"Scharf links weiterfahren auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts",name:"Scharf rechts weiterfahren auf {way_name}",destination:"Scharf rechts Richtung {destination}"},"slight left":{default:"Leicht links",name:"Leicht links weiter auf {way_name}",destination:"Leicht links weiter Richtung {destination}"},"slight right":{default:"Leicht rechts weiter",name:"Leicht rechts weiter auf {way_name}",destination:"Leicht rechts weiter Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},depart:{default:{default:"Fahren Sie Richtung {direction}",name:"Fahren Sie Richtung {direction} auf {way_name}",namedistance:"Fahren Sie Richtung {direction} auf {way_name} fr {distance}"}},"end of road":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"},uturn:{default:"180-Wendung am Ende der Strae",name:"180-Wendung auf {way_name} am Ende der Strae",destination:"180-Wendung Richtung {destination} am Ende der Strae"}},fork:{default:{default:"{modifier} halten an der Gabelung",name:"{modifier} halten an der Gabelung auf {way_name}",destination:"{modifier}  halten an der Gabelung Richtung {destination}"},"slight left":{default:"Links halten an der Gabelung",name:"Links halten an der Gabelung auf {way_name}",destination:"Links halten an der Gabelung Richtung {destination}"},"slight right":{default:"Rechts halten an der Gabelung",name:"Rechts halten an der Gabelung auf {way_name}",destination:"Rechts halten an der Gabelung Richtung {destination}"},"sharp left":{default:"Scharf links abbiegen an der Gabelung",name:"Scharf links auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts abbiegen an der Gabelung",name:"Scharf rechts auf {way_name}",destination:"Scharf rechts Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},merge:{default:{default:"{modifier} auffahren",name:"{modifier} auffahren auf {way_name}",destination:"{modifier} auffahren Richtung {destination}"},straight:{default:"geradeaus auffahren",name:"geradeaus auffahren auf {way_name}",destination:"geradeaus auffahren Richtung {destination}"},"slight left":{default:"Leicht links auffahren",name:"Leicht links auffahren auf {way_name}",destination:"Leicht links auffahren Richtung {destination}"},"slight right":{default:"Leicht rechts auffahren",name:"Leicht rechts auffahren auf {way_name}",destination:"Leicht rechts auffahren Richtung {destination}"},"sharp left":{default:"Scharf links auffahren",name:"Scharf links auffahren auf {way_name}",destination:"Scharf links auffahren Richtung {destination}"},"sharp right":{default:"Scharf rechts auffahren",name:"Scharf rechts auffahren auf {way_name}",destination:"Scharf rechts auffahren Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},"new name":{default:{default:"{modifier} weiterfahren",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} weiterfahren Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Weiterfahren auf {way_name}",destination:"Weiterfahren in Richtung {destination}"},"sharp left":{default:"Scharf links",name:"Scharf links auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts",name:"Scharf rechts auf {way_name}",destination:"Scharf rechts Richtung {destination}"},"slight left":{default:"Leicht links weiter",name:"Leicht links weiter auf {way_name}",destination:"Leicht links weiter Richtung {destination}"},"slight right":{default:"Leicht rechts weiter",name:"Leicht rechts weiter auf {way_name}",destination:"Leicht rechts weiter Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},notification:{default:{default:"{modifier} weiterfahren",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} weiterfahren Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},"off ramp":{default:{default:"Ausfahrt nehmen",name:"Ausfahrt nehmen auf {way_name}",destination:"Ausfahrt nehmen Richtung {destination}",exit:"Ausfahrt {exit} nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},left:{default:"Ausfahrt links nehmen",name:"Ausfahrt links nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} links nehmen",exit_destination:"Ausfahrt {exit} links nehmen Richtung {destination}"},right:{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen Richtung {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},"sharp left":{default:"Ausfahrt links nehmen",name:"Ausfahrt links Seite nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} links nehmen",exit_destination:"Ausfahrt{exit} links nehmen Richtung {destination}"},"sharp right":{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen auf {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},"slight left":{default:"Ausfahrt links nehmen",name:"Ausfahrt links nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} nehmen",exit_destination:"Ausfahrt {exit} links nehmen Richtung {destination}"},"slight right":{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen auf {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"}},"on ramp":{default:{default:"Auffahrt nehmen",name:"Auffahrt nehmen auf {way_name}",destination:"Auffahrt nehmen Richtung {destination}"},left:{default:"Auffahrt links nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},right:{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"},"sharp left":{default:"Auffahrt links nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},"sharp right":{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"},"slight left":{default:"Auffahrt links Seite nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},"slight right":{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"}},rotary:{default:{default:{default:"In den Kreisverkehr fahren",name:"Im Kreisverkehr die Ausfahrt auf {way_name} nehmen",destination:"Im Kreisverkehr die Ausfahrt Richtung {destination} nehmen"},name:{default:"In {rotary_name} fahren",name:"In {rotary_name} die Ausfahrt auf {way_name} nehmen",destination:"In {rotary_name} die Ausfahrt Richtung {destination} nehmen"},exit:{default:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen",name:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen auf {way_name}",destination:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen Richtung {destination}"},name_exit:{default:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen",name:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen auf {way_name}",destination:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen Richtung {destination}"}}},roundabout:{default:{exit:{default:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen",name:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen auf {way_name}",destination:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen Richtung {destination}"},default:{default:"In den Kreisverkehr fahren",name:"Im Kreisverkehr die Ausfahrt auf {way_name} nehmen",destination:"Im Kreisverkehr die Ausfahrt Richtung {destination} nehmen"}}},"roundabout turn":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"exit roundabout":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"exit rotary":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},turn:{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"use lane":{no_lanes:{default:"Geradeaus weiterfahren"},default:{default:"{lane_instruction}"}}}}},{}],25:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th"},direction:{north:"north",northeast:"northeast",east:"east",southeast:"southeast",south:"south",southwest:"southwest",west:"west",northwest:"northwest"},modifier:{left:"left",right:"right","sharp left":"sharp left","sharp right":"sharp right","slight left":"slight left","slight right":"slight right",straight:"straight",uturn:"U-turn"},lanes:{xo:"Keep right",ox:"Keep left",xox:"Keep in the middle",oxo:"Keep left or right"}},modes:{ferry:{default:"Take the ferry",name:"Take the ferry {way_name}",destination:"Take the ferry towards {destination}"}},phrase:{"two linked by distance":"{instruction_one}, then, in {distance}, {instruction_two}","two linked":"{instruction_one}, then {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"You have arrived at your {nth} destination",upcoming:"You will arrive at your {nth} destination",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}"},left:{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},right:{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"sharp left":{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},"sharp right":{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"slight right":{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"slight left":{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},straight:{default:"You have arrived at your {nth} destination, straight ahead",upcoming:"You will arrive at your {nth} destination, straight ahead",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, straight ahead"}},continue:{default:{default:"Turn {modifier}",name:"Turn {modifier} to stay on {way_name}",destination:"Turn {modifier} towards {destination}",exit:"Turn {modifier} onto {way_name}"},straight:{default:"Continue straight",name:"Continue straight to stay on {way_name}",destination:"Continue towards {destination}",distance:"Continue straight for {distance}",namedistance:"Continue on {way_name} for {distance}"},"sharp left":{default:"Make a sharp left",name:"Make a sharp left to stay on {way_name}",destination:"Make a sharp left towards {destination}"},"sharp right":{default:"Make a sharp right",name:"Make a sharp right to stay on {way_name}",destination:"Make a sharp right towards {destination}"},"slight left":{default:"Make a slight left",name:"Make a slight left to stay on {way_name}",destination:"Make a slight left towards {destination}"},"slight right":{default:"Make a slight right",name:"Make a slight right to stay on {way_name}",destination:"Make a slight right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn and continue on {way_name}",destination:"Make a U-turn towards {destination}"}},depart:{default:{default:"Head {direction}",name:"Head {direction} on {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Turn {modifier}",name:"Turn {modifier} onto {way_name}",destination:"Turn {modifier} towards {destination}"},straight:{default:"Continue straight",name:"Continue straight onto {way_name}",destination:"Continue straight towards {destination}"},uturn:{default:"Make a U-turn at the end of the road",name:"Make a U-turn onto {way_name} at the end of the road",destination:"Make a U-turn towards {destination} at the end of the road"}},fork:{default:{default:"Keep {modifier} at the fork",name:"Keep {modifier} onto {way_name}",destination:"Keep {modifier} towards {destination}"},"slight left":{default:"Keep left at the fork",name:"Keep left onto {way_name}",destination:"Keep left towards {destination}"},"slight right":{default:"Keep right at the fork",name:"Keep right onto {way_name}",destination:"Keep right towards {destination}"},"sharp left":{default:"Take a sharp left at the fork",name:"Take a sharp left onto {way_name}",destination:"Take a sharp left towards {destination}"},"sharp right":{default:"Take a sharp right at the fork",name:"Take a sharp right onto {way_name}",destination:"Take a sharp right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},merge:{default:{default:"Merge {modifier}",name:"Merge {modifier} onto {way_name}",destination:"Merge {modifier} towards {destination}"},straight:{default:"Merge",name:"Merge onto {way_name}",destination:"Merge towards {destination}"},"slight left":{default:"Merge left",name:"Merge left onto {way_name}",destination:"Merge left towards {destination}"},"slight right":{default:"Merge right",name:"Merge right onto {way_name}",destination:"Merge right towards {destination}"},"sharp left":{default:"Merge left",name:"Merge left onto {way_name}",destination:"Merge left towards {destination}"},"sharp right":{default:"Merge right",name:"Merge right onto {way_name}",destination:"Merge right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} onto {way_name}",destination:"Continue {modifier} towards {destination}"},straight:{default:"Continue straight",name:"Continue onto {way_name}",destination:"Continue towards {destination}"},"sharp left":{default:"Take a sharp left",name:"Take a sharp left onto {way_name}",destination:"Take a sharp left towards {destination}"},"sharp right":{default:"Take a sharp right",name:"Take a sharp right onto {way_name}",destination:"Take a sharp right towards {destination}"},"slight left":{default:"Continue slightly left",name:"Continue slightly left onto {way_name}",destination:"Continue slightly left towards {destination}"},"slight right":{default:"Continue slightly right",name:"Continue slightly right onto {way_name}",destination:"Continue slightly right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} onto {way_name}",destination:"Continue {modifier} towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},"off ramp":{default:{default:"Take the ramp",name:"Take the ramp onto {way_name}",destination:"Take the ramp towards {destination}",exit:"Take exit {exit}",exit_destination:"Take exit {exit} towards {destination}"},left:{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},right:{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"sharp left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"sharp right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"slight left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"slight right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"}},"on ramp":{default:{default:"Take the ramp",name:"Take the ramp onto {way_name}",destination:"Take the ramp towards {destination}"},left:{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},right:{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"},"sharp left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},"sharp right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"},"slight left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},"slight right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"}},rotary:{default:{default:{default:"Enter the traffic circle",name:"Enter the traffic circle and exit onto {way_name}",destination:"Enter the traffic circle and exit towards {destination}"},name:{default:"Enter {rotary_name}",name:"Enter {rotary_name} and exit onto {way_name}",destination:"Enter {rotary_name} and exit towards {destination}"},exit:{default:"Enter the traffic circle and take the {exit_number} exit",name:"Enter the traffic circle and take the {exit_number} exit onto {way_name}",destination:"Enter the traffic circle and take the {exit_number} exit towards {destination}"},name_exit:{default:"Enter {rotary_name} and take the {exit_number} exit",name:"Enter {rotary_name} and take the {exit_number} exit onto {way_name}",destination:"Enter {rotary_name} and take the {exit_number} exit towards {destination}"}}},roundabout:{default:{exit:{default:"Enter the traffic circle and take the {exit_number} exit",name:"Enter the traffic circle and take the {exit_number} exit onto {way_name}",destination:"Enter the traffic circle and take the {exit_number} exit towards {destination}"},default:{default:"Enter the traffic circle",name:"Enter the traffic circle and exit onto {way_name}",destination:"Enter the traffic circle and exit towards {destination}"}}},"roundabout turn":{default:{default:"Make a {modifier}",name:"Make a {modifier} onto {way_name}",destination:"Make a {modifier} towards {destination}"},left:{default:"Turn left",name:"Turn left onto {way_name}",destination:"Turn left towards {destination}"},right:{default:"Turn right",name:"Turn right onto {way_name}",destination:"Turn right towards {destination}"},straight:{default:"Continue straight",name:"Continue straight onto {way_name}",destination:"Continue straight towards {destination}"}},"exit roundabout":{default:{default:"Exit the traffic circle",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},"exit rotary":{default:{default:"Exit the traffic circle",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},turn:{default:{default:"Make a {modifier}",name:"Make a {modifier} onto {way_name}",destination:"Make a {modifier} towards {destination}"},left:{default:"Turn left",name:"Turn left onto {way_name}",destination:"Turn left towards {destination}"},right:{default:"Turn right",name:"Turn right onto {way_name}",destination:"Turn right towards {destination}"},straight:{default:"Go straight",name:"Go straight onto {way_name}",destination:"Go straight towards {destination}"}},"use lane":{no_lanes:{default:"Continue straight"},default:{default:"{lane_instruction}"}}}}},{}],26:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"norden",northeast:"nord-orienten",east:"orienten",southeast:"sud-orienten",south:"suden",southwest:"sud-okcidenten",west:"okcidenten",northwest:"nord-okcidenten"},modifier:{left:"maldekstren",right:"dekstren","sharp left":"maldekstregen","sharp right":"dekstregen","slight left":"maldekstreten","slight right":"dekstreten",straight:"rekten",uturn:"turniu malantaen"},lanes:{xo:"Veturu dekstre",ox:"Veturu maldekstre",xox:"Veturu meze",oxo:"Veturu dekstre a maldekstre"}},modes:{ferry:{default:"Enpramiu",name:"Enpramiu {way_name}",destination:"Enpramiu direkte al {destination}"}},phrase:{"two linked by distance":"{instruction_one} kaj post {distance} {instruction_two}","two linked":"{instruction_one} kaj sekve {instruction_two}","one in distance":"Post {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"elveturejo {exit}"},arrive:{default:{default:"Vi atingis vian {nth} celon",upcoming:"Vi atingos vian {nth} celon",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}"},left:{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},right:{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"sharp left":{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},"sharp right":{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"slight right":{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"slight left":{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},straight:{default:"Vi atingis vian {nth} celon",upcoming:"Vi atingos vian {nth} celon rekte",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name} antae"}},continue:{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}",exit:"Veturu {modifier} direkte al {way_name}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}",distance:"Veturu rekten dum {distance}",namedistance:"Veturu rekten al {way_name} dum {distance}"},"sharp left":{default:"Turniu ege maldekstren",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Turniu ege dekstren",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},"slight left":{default:"Turniu ete maldekstren",name:"Turniu ete maldekstren al {way_name}",destination:"Turniu ete maldekstren direkte al {destination}"},"slight right":{default:"Turniu ete dekstren",name:"Turniu ete dekstren al {way_name}",destination:"Turniu ete dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},depart:{default:{default:"Direktiu {direction}",name:"Direktiu {direction} al {way_name}",namedistance:"Direktiu {direction} al {way_name} tra {distance}"}},"end of road":{default:{default:"Veturu {modifier}",name:"Veturu {modifier} direkte al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"},uturn:{default:"Turniu malantaen e fino de la vojo",name:"Turniu malantaen al {way_name} e fino de la vojo",destination:"Turniu malantaen direkte al {destination} e fino de la vojo"}},fork:{default:{default:"Daru {modifier} e la vojforko",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},"slight left":{default:"Maldekstren e la vojforko",name:"Pluu maldekstren al {way_name}",destination:"Pluu maldekstren direkte al {destination}"},"slight right":{default:"Dekstren e la vojforko",name:"Pluu dekstren al {way_name}",destination:"Pluu dekstren direkte al {destination}"},"sharp left":{default:"Ege maldekstren e la vojforko",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Ege dekstren e la vojforko",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},merge:{default:{default:"Enveturu {modifier}",name:"Enveturu {modifier} al {way_name}",destination:"Enveturu {modifier} direkte al {destination}"},straight:{default:"Enveturu",name:"Enveturu al {way_name}",destination:"Enveturu direkte al {destination}"},"slight left":{default:"Enveturu de maldekstre",name:"Enveturu de maldekstre al {way_name}",destination:"Enveturu de maldekstre direkte al {destination}"},"slight right":{default:"Enveturu de dekstre",name:"Enveturu de dekstre al {way_name}",destination:"Enveturu de dekstre direkte al {destination}"},"sharp left":{default:"Enveturu de maldekstre",name:"Enveture de maldekstre al {way_name}",destination:"Enveturu de maldekstre direkte al {destination}"},"sharp right":{default:"Enveturu de dekstre",name:"Enveturu de dekstre al {way_name}",destination:"Enveturu de dekstre direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},"new name":{default:{default:"Pluu {modifier}",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"},"sharp left":{default:"Turniu ege maldekstren",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Turniu ege dekstren",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},"slight left":{default:"Pluu ete maldekstren",name:"Pluu ete maldekstren al {way_name}",destination:"Pluu ete maldekstren direkte al {destination}"},"slight right":{default:"Pluu ete dekstren",name:"Pluu ete dekstren al {way_name}",destination:"Pluu ete dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},notification:{default:{default:"Pluu {modifier}",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},"off ramp":{default:{default:"Direktiu al enveturejo",name:"Direktiu al enveturejo al {way_name}",destination:"Direktiu al enveturejo direkte al {destination}",exit:"Direktiu al elveturejo {exit}",exit_destination:"Direktiu al elveturejo {exit} direkte al {destination}"},left:{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al elveturejo {exit} e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},right:{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al {exit} elveturejo e ldekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"},"sharp left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al {exit} elveturejo e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},"sharp right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al elveturejo {exit} e dekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"},"slight left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al {exit} elveturejo e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},"slight right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al {exit} elveturejo e ldekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"}},"on ramp":{default:{default:"Direktiu al enveturejo",name:"Direktiu al enveturejo al {way_name}",destination:"Direktiu al enveturejo direkte al {destination}"},left:{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},right:{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"},"sharp left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},"sharp right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"},"slight left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},"slight right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"}},rotary:{default:{default:{default:"Enveturu trafikcirklegon",name:"Enveturu trafikcirklegon kaj elveturu al {way_name}",destination:"Enveturu trafikcirklegon kaj elveturu direkte al {destination}"},name:{default:"Enveturu {rotary_name}",name:"Enveturu {rotary_name} kaj elveturu al {way_name}",destination:"Enveturu {rotary_name} kaj elveturu direkte al {destination}"},exit:{default:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo",name:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo direkte al {destination}"},name_exit:{default:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo",name:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo direkte al {destination}"}}},roundabout:{default:{exit:{default:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo",name:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo direkte al {destination}"},default:{default:"Enveturu trafikcirklegon",name:"Enveturu trafikcirklegon kaj elveturu al {way_name}",destination:"Enveturu trafikcirklegon kaj elveturu direkte al {destination}"}}},"roundabout turn":{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},left:{default:"Turniu maldekstren",name:"Turniu maldekstren al {way_name}",destination:"Turniu maldekstren direkte al {destination}"},right:{default:"Turniu dekstren",name:"Turniu dekstren al {way_name}",destination:"Turniu dekstren direkte al {destination}"},straight:{default:"Pluu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"}},"exit roundabout":{default:{default:"Elveturu trafikcirklegon",name:"Elveturu trafikcirklegon al {way_name}",destination:"Elveturu trafikcirklegon direkte al {destination}"}},"exit rotary":{default:{default:"Eliru trafikcirklegon",name:"Elveturu trafikcirklegon al {way_name}",destination:"Elveturu trafikcirklegon direkte al {destination}"}},turn:{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},left:{default:"Turniu maldekstren",name:"Turniu maldekstren al {way_name}",destination:"Turniu maldekstren direkte al {destination}"},right:{default:"Turniu dekstren",name:"Turniu dekstren al {way_name}",destination:"Turniu dekstren direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"}},"use lane":{no_lanes:{default:"Pluu rekten"},default:{default:"{lane_instruction}"}}}}},{}],27:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"noreste",east:"este",southeast:"sureste",south:"sur",southwest:"suroeste",west:"oeste",northwest:"noroeste"},modifier:{left:"a la izquierda",right:"a la derecha","sharp left":"cerrada a la izquierda","sharp right":"cerrada a la derecha","slight left":"ligeramente a la izquierda","slight right":"ligeramente a la derecha",straight:"recto",uturn:"cambio de sentido"},lanes:{xo:"Mantente a la derecha",ox:"Mantente a la izquierda",xox:"Mantente en el medio",oxo:"Mantente a la izquierda o a la derecha"}},modes:{ferry:{default:"Coge el ferry",name:"Coge el ferry {way_name}",destination:"Coge el ferry hacia {destination}"}},phrase:{"two linked by distance":"{instruction_one} y luego en {distance}, {instruction_two}","two linked":"{instruction_one} y luego {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"salida {exit}"},arrive:{default:{default:"Has llegado a tu {nth} destino",upcoming:"Vas a llegar a tu {nth} destino",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}"},left:{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},right:{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"sharp left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},"sharp right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},straight:{default:"Has llegado a tu {nth} destino, en frente",upcoming:"Vas a llegar a tu {nth} destino, en frente",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, en frente"}},continue:{default:{default:"Gire {modifier}",name:"Cruce {modifier} en {way_name}",destination:"Gire {modifier} hacia {destination}",exit:"Gire {modifier} en {way_name}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}",distance:"Contina recto por {distance}",namedistance:"Contina recto en {way_name} por {distance}"},"sharp left":{default:"Gire a la izquierda",name:"Gire a la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},"sharp right":{default:"Gire a la derecha",name:"Gire a la derecha en {way_name}",destination:"Gire a la derecha hacia {destination}"},"slight left":{default:"Gire a la izquierda",name:"Doble levementea la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},"slight right":{default:"Gire a la izquierda",name:"Doble levemente a la derecha en {way_name}",destination:"Gire a la izquierda hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido y contina en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},depart:{default:{default:"Dirgete al {direction}",name:"Dirgete al {direction} por {way_name}",namedistance:"Dirgete al {direction} en {way_name} por {distance}"}},"end of road":{default:{default:"Al final de la calle gira {modifier}",name:"Al final de la calle gira {modifier} por {way_name}",destination:"Al final de la calle gira {modifier} hacia {destination}"},straight:{default:"Al final de la calle contina recto",name:"Al final de la calle contina recto por {way_name}",destination:"Al final de la calle contina recto hacia {destination}"},uturn:{default:"Al final de la calle haz un cambio de sentido",name:"Al final de la calle haz un cambio de sentido en {way_name}",destination:"Al final de la calle haz un cambio de sentido hacia {destination}"}},fork:{default:{default:"Mantente {modifier} en el cruce",name:"Mantente {modifier} por {way_name}",destination:"Mantente {modifier} hacia {destination}"},"slight left":{default:"Mantente a la izquierda en el cruce",name:"Mantente a la izquierda por {way_name}",destination:"Mantente a la izquierda hacia {destination}"},"slight right":{default:"Mantente a la derecha en el cruce",name:"Mantente a la derecha por {way_name}",destination:"Mantente a la derecha hacia {destination}"},"sharp left":{default:"Gira la izquierda en el cruce",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha en el cruce",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},merge:{default:{default:"Incorprate {modifier}",name:"Incorprate {modifier} por {way_name}",destination:"Incorprate {modifier} hacia {destination}"},straight:{default:"Incorprate",name:"Incorprate por {way_name}",destination:"Incorprate hacia {destination}"},"slight left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda por {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"slight right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha por {way_name}",destination:"Incorprate a la derecha hacia {destination}"},"sharp left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda por {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"sharp right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha por {way_name}",destination:"Incorprate a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"new name":{default:{default:"Contina {modifier}",name:"Contina {modifier} por {way_name}",destination:"Contina {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina por {way_name}",destination:"Contina hacia {destination}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Contina ligeramente por la izquierda",name:"Contina ligeramente por la izquierda por {way_name}",destination:"Contina ligeramente por la izquierda hacia {destination}"},"slight right":{default:"Contina ligeramente por la derecha",name:"Contina ligeramente por la derecha por {way_name}",destination:"Contina ligeramente por la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},notification:{default:{default:"Contina {modifier}",name:"Contina {modifier} por {way_name}",destination:"Contina {modifier} hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"off ramp":{default:{default:"Coge la cuesta abajo",name:"Coge la cuesta abajo por {way_name}",destination:"Coge la cuesta abajo hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},left:{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo {exit} a tu izquierda hacia {destination}"},right:{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},"sharp left":{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo {exit} a tu izquierda hacia {destination}"},"sharp right":{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},"slight left":{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo{exit} a tu izquierda hacia {destination}"},"slight right":{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"}},"on ramp":{default:{default:"Coge la cuesta",name:"Coge la cuesta por {way_name}",destination:"Coge la cuesta hacia {destination}"},left:{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},right:{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"},"sharp left":{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},"sharp right":{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"},"slight left":{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},"slight right":{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"}},rotary:{default:{default:{default:"Incorprate en la rotonda",name:"En la rotonda sal por {way_name}",destination:"En la rotonda sal hacia {destination}"},name:{default:"En {rotary_name}",name:"En {rotary_name} sal por {way_name}",destination:"En {rotary_name} sal hacia {destination}"},exit:{default:"En la rotonda toma la {exit_number} salida",name:"En la rotonda toma la {exit_number} salida por {way_name}",destination:"En la rotonda toma la {exit_number} salida hacia {destination}"},name_exit:{default:"En {rotary_name} toma la {exit_number} salida",name:"En {rotary_name} toma la {exit_number} salida por {way_name}",destination:"En {rotary_name} toma la {exit_number} salida hacia {destination}"}}},roundabout:{default:{exit:{default:"En la rotonda toma la {exit_number} salida",name:"En la rotonda toma la {exit_number} salida por {way_name}",destination:"En la rotonda toma la {exit_number} salida hacia {destination}"},default:{default:"Incorprate en la rotonda",name:"Incorprate en la rotonda y sal en {way_name}",destination:"Incorprate en la rotonda y sal hacia {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} en {way_name}",destination:"Siga {modifier} hacia {destination}"},left:{default:"Gire a la izquierda",name:"Gire a la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},right:{default:"Gire a la derecha",name:"Gire a la derecha en {way_name}",destination:"Gire a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto por {way_name}",destination:"Contina recto hacia {destination}"}},"exit roundabout":{default:{default:"Sal la rotonda",name:"Toma la salida por {way_name}",destination:"Toma la salida hacia {destination}"}},"exit rotary":{default:{default:"Sal la rotonda",name:"Toma la salida por {way_name}",destination:"Toma la salida hacia {destination}"}},turn:{default:{default:"Gira {modifier}",name:"Gira {modifier} por {way_name}",destination:"Gira {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto por {way_name}",destination:"Contina recto hacia {destination}"}},"use lane":{no_lanes:{default:"Contina recto"},default:{default:"{lane_instruction}"}}}}},{}],28:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"noreste",east:"este",southeast:"sureste",south:"sur",southwest:"suroeste",west:"oeste",northwest:"noroeste"},modifier:{left:"izquierda",right:"derecha","sharp left":"cerrada a la izquierda","sharp right":"cerrada a la derecha","slight left":"levemente a la izquierda","slight right":"levemente a la derecha",straight:"recto",uturn:"cambio de sentido"},lanes:{xo:"Mantente a la derecha",ox:"Mantente a la izquierda",xox:"Mantente en el medio",oxo:"Mantente a la izquierda o derecha"}},modes:{ferry:{default:"Coge el ferry",name:"Coge el ferry {way_name}",destination:"Coge el ferry a {destination}"}},phrase:{"two linked by distance":"{instruction_one} y luego a {distance}, {instruction_two}","two linked":"{instruction_one} y luego {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"salida {exit}"},arrive:{default:{default:"Has llegado a tu {nth} destino",upcoming:"Vas a llegar a tu {nth} destino",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}"},left:{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},right:{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"sharp left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},"sharp right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},straight:{default:"Has llegado a tu {nth} destino, en frente",upcoming:"Vas a llegar a tu {nth} destino, en frente",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, en frente"}},continue:{default:{default:"Gira a {modifier}",name:"Cruza a la{modifier}  en {way_name}",destination:"Gira a {modifier} hacia {destination}",exit:"Gira a {modifier} en {way_name}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}",distance:"Contina recto por {distance}",namedistance:"Contina recto en {way_name} por {distance}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Gira a la izquierda",name:"Dobla levemente a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"slight right":{default:"Gira a la izquierda",name:"Dobla levemente a la derecha en {way_name}",destination:"Gira a la izquierda hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido y contina en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},depart:{default:{default:"Ve a {direction}",name:"Ve a {direction} en {way_name}",namedistance:"Ve a {direction} en {way_name} por {distance}"}},"end of road":{default:{default:"Gira  a {modifier}",name:"Gira a {modifier} en {way_name}",destination:"Gira a {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto en {way_name}",destination:"Contina recto hacia {destination}"},uturn:{default:"Haz un cambio de sentido al final de la via",name:"Haz un cambio de sentido en {way_name} al final de la via",destination:"Haz un cambio de sentido hacia {destination} al final de la via"}},fork:{default:{default:"Mantente  {modifier} en el cruza",name:"Mantente {modifier} en {way_name}",destination:"Mantente {modifier} hacia {destination}"},"slight left":{default:"Mantente a la izquierda en el cruza",name:"Mantente a la izquierda en {way_name}",destination:"Mantente a la izquierda hacia {destination}"},"slight right":{default:"Mantente a la derecha en el cruza",name:"Mantente a la derecha en {way_name}",destination:"Mantente a la derecha hacia {destination}"},"sharp left":{default:"Gira a la izquierda en el cruza",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha en el cruza",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},merge:{default:{default:"Incorprate a {modifier}",name:"Incorprate a {modifier} en {way_name}",destination:"Incorprate a {modifier} hacia {destination}"},straight:{default:"Incorprate",name:"Incorprate a {way_name}",destination:"Incorprate hacia {destination}"},"slight left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda en {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"slight right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha en {way_name}",destination:"Incorprate a la derecha hacia {destination}"},"sharp left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda en {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"sharp right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha en {way_name}",destination:"Incorprate a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"new name":{default:{default:"Contina {modifier}",name:"Contina {modifier} en {way_name}",destination:"Contina {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Contina levemente a la izquierda",name:"Contina levemente a la izquierda en {way_name}",destination:"Contina levemente a la izquierda hacia {destination}"},"slight right":{default:"Contina levemente a la derecha",name:"Contina levemente a la derecha en {way_name}",destination:"Contina levemente a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},notification:{default:{default:"Contina {modifier}",name:"Contina {modifier} en {way_name}",destination:"Contina {modifier} hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"off ramp":{default:{default:"Toma la salida",name:"Toma la salida en {way_name}",destination:"Toma la salida hacia {destination}",exit:"Toma la salida {exit}",exit_destination:"Toma la salida {exit} hacia {destination}"},left:{default:"Toma la salida en la izquierda",name:"Toma la salida en la izquierda en {way_name}",destination:"Toma la salida en la izquierda en {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},right:{default:"Toma la salida en la derecha",name:"Toma la salida en la derecha en {way_name}",destination:"Toma la salida en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"},"sharp left":{default:"Ve cuesta abajo en la izquierda",name:"Ve cuesta abajo en la izquierda en {way_name}",destination:"Ve cuesta abajo en la izquierda hacia {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},"sharp right":{default:"Ve cuesta abajo en la derecha",name:"Ve cuesta abajo en la derecha en {way_name}",destination:"Ve cuesta abajo en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"},"slight left":{default:"Ve cuesta abajo en la izquierda",name:"Ve cuesta abajo en la izquierda en {way_name}",destination:"Ve cuesta abajo en la izquierda hacia {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},"slight right":{default:"Toma la salida en la derecha",name:"Toma la salida en la derecha en {way_name}",destination:"Toma la salida en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"}},"on ramp":{default:{default:"Toma la rampa",name:"Toma la rampa en {way_name}",destination:"Toma la rampa hacia {destination}"},left:{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},right:{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"},"sharp left":{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},"sharp right":{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"},"slight left":{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},"slight right":{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"}},rotary:{default:{default:{default:"Entra en la rotonda",name:"Entra en la rotonda y sal en {way_name}",destination:"Entra en la rotonda y sal hacia {destination}"},name:{default:"Entra en {rotary_name}",name:"Entra en {rotary_name} y sal en {way_name}",destination:"Entra en {rotary_name} y sal hacia {destination}"},exit:{default:"Entra en la rotonda y toma la {exit_number} salida",name:"Entra en la rotonda y toma la {exit_number} salida a {way_name}",destination:"Entra en la rotonda y toma la {exit_number} salida hacia {destination}"},name_exit:{default:"Entra en {rotary_name} y coge la {exit_number} salida",name:"Entra en {rotary_name} y coge la {exit_number} salida en {way_name}",destination:"Entra en {rotary_name} y coge la {exit_number} salida hacia {destination}"}}},roundabout:{default:{exit:{default:"Entra en la rotonda y toma la {exit_number} salida",name:"Entra en la rotonda y toma la {exit_number} salida a {way_name}",destination:"Entra en la rotonda y toma la {exit_number} salida hacia {destination}"},default:{default:"Entra en la rotonda",name:"Entra en la rotonda y sal en {way_name}",destination:"Entra en la rotonda y sal hacia {destination}"}}},"roundabout turn":{default:{default:"Sigue {modifier}",name:"Sigue {modifier} en {way_name}",destination:"Sigue {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto en {way_name}",destination:"Contina recto hacia {destination}"}},"exit roundabout":{default:{default:"Sal la rotonda",name:"Sal la rotonda en {way_name}",destination:"Sal la rotonda hacia {destination}"}},"exit rotary":{default:{default:"Sal la rotonda",name:"Sal la rotonda en {way_name}",destination:"Sal la rotonda hacia {destination}"}},turn:{default:{default:"Sigue {modifier}",name:"Sigue {modifier} en {way_name}",destination:"Sigue {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Ve recto",name:"Ve recto en {way_name}",destination:"Ve recto hacia {destination}"}},"use lane":{no_lanes:{default:"Contina recto"},default:{default:"{lane_instruction}"}}}}},{}],29:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"pohjoiseen",northeast:"koilliseen",east:"itn",southeast:"kaakkoon",south:"eteln",southwest:"lounaaseen",west:"lnteen",northwest:"luoteeseen"},modifier:{left:"vasemmall(e/a)",right:"oikeall(e/a)","sharp left":"jyrksti vasempaan","sharp right":"jyrksti oikeaan","slight left":"loivasti vasempaan","slight right":"loivasti oikeaan",straight:"suoraan eteenpin",uturn:"U-knns"},lanes:{xo:"Pysy oikealla",ox:"Pysy vasemmalla",xox:"Pysy keskell",oxo:"Pysy vasemmalla tai oikealla"}},modes:{ferry:{default:"Aja lautalle",name:"Aja lautalle {way_name}",destination:"Aja lautalle, jonka mrnp on {destination}"}},phrase:{"two linked by distance":"{instruction_one}, sitten {distance} pst, {instruction_two}","two linked":"{instruction_one}, sitten {instruction_two}","one in distance":"{distance} pst, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"{exit}"},arrive:{default:{default:"Olet saapunut {nth} mrnphsi",upcoming:"Saavut {nth} mrnphsi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}"},left:{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},right:{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"sharp left":{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},"sharp right":{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"slight right":{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"slight left":{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},straight:{default:"Olet saapunut {nth} mrnphsi, joka on suoraan edesssi",upcoming:"Saavut {nth} mrnphsi, suoraan edess",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on suoraan edesssi"}},continue:{default:{default:"Knny {modifier}",name:"Knny {modifier} pysyksesi tiell {way_name}",destination:"Knny {modifier} suuntana {destination}",exit:"Knny {modifier} tielle {way_name}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan pysyksesi tiell {way_name}",destination:"Jatka suuntana {destination}",distance:"Jatka suoraan {distance}",namedistance:"Jatka tiell {way_name} {distance}"},"sharp left":{default:"Jatka jyrksti vasempaan",name:"Jatka jyrksti vasempaan pysyksesi tiell {way_name}",destination:"Jatka jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Jatka jyrksti oikeaan",name:"Jatka jyrksti oikeaan pysyksesi tiell {way_name}",destination:"Jatka jyrksti oikeaan suuntana {destination}"},"slight left":{default:"Jatka loivasti vasempaan",name:"Jatka loivasti vasempaan pysyksesi tiell {way_name}",destination:"Jatka loivasti vasempaan suuntana {destination}"},"slight right":{default:"Jatka loivasti oikeaan",name:"Jatka loivasti oikeaan pysyksesi tiell {way_name}",destination:"Jatka loivasti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns ja jatka tiet {way_name}",destination:"Tee U-knns suuntana {destination}"}},depart:{default:{default:"Aja {direction}",name:"Aja tiet {way_name} {direction}",namedistance:"Aja {distance} {direction} tiet {way_name} "}},"end of road":{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan eteenpin tielle {way_name}",destination:"Jatka suoraan eteenpin suuntana {destination}"},uturn:{default:"Tien pss tee U-knns",name:"Tien pss tee U-knns tielle {way_name}",destination:"Tien pss tee U-knns suuntana {destination}"}},fork:{default:{default:"Jatka tienhaarassa {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},"slight left":{default:"Pysy vasemmalla tienhaarassa",name:"Pysy vasemmalla tielle {way_name}",destination:"Pysy vasemmalla suuntana {destination}"},"slight right":{default:"Pysy oikealla tienhaarassa",name:"Pysy oikealla tielle {way_name}",destination:"Pysy oikealla suuntana {destination}"},"sharp left":{default:"Knny tienhaarassa jyrksti vasempaan",name:"Knny tienhaarassa jyrksti vasempaan tielle {way_name}",destination:"Knny tienhaarassa jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Knny tienhaarassa jyrksti oikeaan",name:"Knny tienhaarassa jyrksti oikeaan tielle {way_name}",destination:"Knny tienhaarassa jyrksti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},merge:{default:{default:"Liity {modifier}",name:"Liity {modifier}, tielle {way_name}",destination:"Liity {modifier}, suuntana {destination}"},straight:{default:"Liity",name:"Liity tielle {way_name}",destination:"Liity suuntana {destination}"},"slight left":{default:"Liity vasemmalle",name:"Liity vasemmalle, tielle {way_name}",destination:"Liity vasemmalle, suuntana {destination}"},"slight right":{default:"Liity oikealle",name:"Liity oikealle, tielle {way_name}",destination:"Liity oikealle, suuntana {destination}"},"sharp left":{default:"Liity vasemmalle",name:"Liity vasemmalle, tielle {way_name}",destination:"Liity vasemmalle, suuntana {destination}"},"sharp right":{default:"Liity oikealle",name:"Liity oikealle, tielle {way_name}",destination:"Liity oikealle, suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},"new name":{default:{default:"Jatka {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka tielle {way_name}",destination:"Jatka suuntana {destination}"},"sharp left":{default:"Knny jyrksti vasempaan",name:"Knny jyrksti vasempaan tielle {way_name}",destination:"Knny jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Knny jyrksti oikeaan",name:"Knny jyrksti oikeaan tielle {way_name}",destination:"Knny jyrksti oikeaan suuntana {destination}"},"slight left":{default:"Jatka loivasti vasempaan",name:"Jatka loivasti vasempaan tielle {way_name}",destination:"Jatka loivasti vasempaan suuntana {destination}"},"slight right":{default:"Jatka loivasti oikeaan",name:"Jatka loivasti oikeaan tielle {way_name}",destination:"Jatka loivasti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},notification:{default:{default:"Jatka {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},"off ramp":{default:{default:"Aja erkanemiskaistalle",name:"Aja erkanemiskaistaa tielle {way_name}",destination:"Aja erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit}",exit_destination:"Ota poistuminen {exit}, suuntana {destination}"},left:{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},right:{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"},"sharp left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},"sharp right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"},"slight left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},"slight right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"}},"on ramp":{default:{default:"Aja erkanemiskaistalle",name:"Aja erkanemiskaistaa tielle {way_name}",destination:"Aja erkanemiskaistalle suuntana {destination}"},left:{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},right:{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"},"sharp left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},"sharp right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"},"slight left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},"slight right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"}},rotary:{default:{default:{default:"Aja liikenneympyrn",name:"Aja liikenneympyrn ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse erkanemiskaista suuntana {destination}"},name:{default:"Aja liikenneympyrn {rotary_name}",name:"Aja liikenneympyrn {rotary_name} ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn {rotary_name} ja valitse erkanemiskaista suuntana {destination}"},exit:{default:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista suuntana {destination}"},name_exit:{default:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista suuntana {destination}"}}},roundabout:{default:{exit:{default:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista suuntana {destination}"},default:{default:"Aja liikenneympyrn",name:"Aja liikenneympyrn ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse erkanemiskaista suuntana {destination}"}}},"roundabout turn":{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},left:{default:"Knny vasempaan",name:"Knny vasempaan tielle {way_name}",destination:"Knny vasempaan suuntana {destination}"},right:{default:"Knny oikeaan",name:"Knny oikeaan tielle {way_name}",destination:"Knny oikeaan suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan eteenpin tielle {way_name}",destination:"Jatka suoraan eteenpin suuntana {destination}"}},"exit roundabout":{default:{default:"Poistu liikenneympyrst",name:"Poistu liikenneympyrst tielle {way_name}",destination:"Poistu liikenneympyrst suuntana {destination}"}},"exit rotary":{default:{default:"Poistu liikenneympyrst",name:"Poistu liikenneympyrst tielle {way_name}",destination:"Poistu liikenneympyrst suuntana {destination}"}},turn:{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},left:{default:"Knny vasempaan",name:"Knny vasempaan tielle {way_name}",destination:"Knny vasempaan suuntana {destination}"},right:{default:"Knny oikeaan",name:"Knny oikeaan tielle {way_name}",destination:"Knny oikeaan suuntana {destination}"},straight:{default:"Aja suoraan eteenpin",name:"Aja suoraan eteenpin tielle {way_name}",destination:"Aja suoraan eteenpin suuntana {destination}"}},"use lane":{no_lanes:{default:"Jatka suoraan eteenpin"},default:{default:"{lane_instruction}"}}}}},{}],30:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"premire",2:"seconde",3:"troisime",4:"quatrime",5:"cinquime",6:"sixime",7:"septime",8:"huitime",9:"neuvime",10:"dixime"},direction:{north:"le nord",northeast:"le nord-est",east:"lest",southeast:"le sud-est",south:"le sud",southwest:"le sud-ouest",west:"louest",northwest:"le nord-ouest"},modifier:{left:" gauche",right:" droite","sharp left":"franchement  gauche","sharp right":"franchement  droite","slight left":"lgrement  gauche","slight right":"lgrement  droite",straight:"tout droit",uturn:"demi-tour"},lanes:{xo:"Tenir la droite",ox:"Tenir la gauche",xox:"Rester au milieu",oxo:"Tenir la gauche ou la droite"}},modes:{ferry:{default:"Prendre le ferry",name:"Prendre le ferry {way_name:article}",destination:"Prendre le ferry en direction {destination:preposition}"}},phrase:{"two linked by distance":"{instruction_one}, puis, dans {distance}, {instruction_two}","two linked":"{instruction_one}, puis {instruction_two}","one in distance":"Dans {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sortie n{exit}"},arrive:{default:{default:"Vous tes arriv  votre {nth} destination",upcoming:"Vous arriverez  votre {nth} destination",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}"},left:{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},right:{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv   {waypoint_name:arrival}, sur la droite"},"sharp left":{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},"sharp right":{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la droite"},"slight right":{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la droite"},"slight left":{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous tes arriv",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},straight:{default:"Vous tes arriv  votre {nth} destination, droit devant",upcoming:"Vous arriverez  votre {nth} destination, droit devant",short:"Vous tes arriv","short-upcoming":"Vous tes arriv",named:"Vous tes arriv {waypoint_name:arrival}, droit devant"}},continue:{default:{default:"Tourner {modifier}",name:"Tourner {modifier} pour rester sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}",exit:"Tourner {modifier} sur {way_name:article}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit pour rester sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}",distance:"Continuer tout droit sur {distance}",namedistance:"Continuer sur {way_name:article} sur {distance}"},"sharp left":{default:"Tourner franchement  gauche",name:"Tourner franchement  gauche pour rester sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite",name:"Tourner franchement  droite pour rester sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},"slight left":{default:"Tourner lgrement  gauche",name:"Tourner lgrement  gauche pour rester sur {way_name:article}",destination:"Tourner lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Tourner lgrement  droite",name:"Tourner lgrement  droite pour rester sur {way_name:article}",destination:"Tourner lgrement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour et continuer sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},depart:{default:{default:"Se diriger vers {direction}",name:"Se diriger vers {direction} sur {way_name:article}",namedistance:"Se diriger vers {direction} sur {way_name:article} sur {distance}"}},"end of road":{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"},uturn:{default:"Faire demi-tour  la fin de la route",name:"Faire demi-tour  la fin {way_name:preposition}",destination:"Faire demi-tour  la fin de la route en direction {destination:preposition}"}},fork:{default:{default:"Tenir {modifier}  lembranchement",name:"Tenir {modifier} sur {way_name:article}",destination:"Tenir {modifier} en direction {destination:preposition}"},"slight left":{default:"Tenir la gauche  lembranchement",name:"Tenir la gauche sur {way_name:article}",destination:"Tenir la gauche en direction {destination:preposition}"},"slight right":{default:"Tenir la droite  lembranchement",name:"Tenir la droite sur {way_name:article}",destination:"Tenir la droite en direction {destination:preposition}"},"sharp left":{default:"Tourner franchement  gauche  lembranchement",name:"Tourner franchement  gauche sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite  lembranchement",name:"Tourner franchement  droite sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},merge:{default:{default:"Sinsrer {modifier}",name:"Sinsrer {modifier} sur {way_name:article}",destination:"Sinsrer {modifier} en direction {destination:preposition}"},straight:{default:"Sinsrer",name:"Sinsrer sur {way_name:article}",destination:"Sinsrer en direction {destination:preposition}"},"slight left":{default:"Sinsrer lgrement  gauche",name:"Sinsrer lgrement  gauche sur {way_name:article}",destination:"Sinsrer lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Sinsrer lgrement  droite",name:"Sinsrer lgrement  droite sur {way_name:article}",destination:"Sinsrer  droite en direction {destination:preposition}"},"sharp left":{default:"Sinsrer  gauche",name:"Sinsrer  gauche sur {way_name:article}",destination:"Sinsrer  gauche en direction {destination:preposition}"},"sharp right":{default:"Sinsrer  droite",name:"Sinsrer  droite sur {way_name:article}",destination:"Sinsrer  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},"new name":{default:{default:"Continuer {modifier}",name:"Continuer {modifier} sur {way_name:article}",destination:"Continuer {modifier} en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"},"sharp left":{default:"Tourner franchement  gauche",name:"Tourner franchement  gauche sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite",name:"Tourner franchement  droite sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},"slight left":{default:"Continuer lgrement  gauche",name:"Continuer lgrement  gauche sur {way_name:article}",destination:"Continuer lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Continuer lgrement  droite",name:"Continuer lgrement  droite sur {way_name:article}",destination:"Continuer lgrement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},notification:{default:{default:"Continuer {modifier}",name:"Continuer {modifier} sur {way_name:article}",destination:"Continuer {modifier} en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},"off ramp":{default:{default:"Prendre la sortie",name:"Prendre la sortie sur {way_name:article}",destination:"Prendre la sortie en direction {destination:preposition}",exit:"Prendre la sortie {exit}",exit_destination:"Prendre la sortie {exit} en direction {destination:preposition}"},left:{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},right:{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"},"sharp left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},"sharp right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"},"slight left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},"slight right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"}},"on ramp":{default:{default:"Prendre la sortie",name:"Prendre la sortie sur {way_name:article}",destination:"Prendre la sortie en direction {destination:preposition}"},left:{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},right:{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"},"sharp left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},"sharp right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"},"slight left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},"slight right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"}},rotary:{default:{default:{default:"Prendre le rond-point",name:"Prendre le rond-point, puis sortir sur {way_name:article}",destination:"Prendre le rond-point, puis sortir en direction {destination:preposition}"},name:{default:"Prendre {rotary_name:rotary}",name:"Prendre {rotary_name:rotary}, puis sortir par {way_name:article}",destination:"Prendre {rotary_name:rotary}, puis sortir en direction {destination:preposition}"},exit:{default:"Prendre le rond-point, puis la {exit_number} sortie",name:"Prendre le rond-point, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre le rond-point, puis la {exit_number} sortie en direction {destination:preposition}"},name_exit:{default:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie",name:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie en direction {destination:preposition}"}}},roundabout:{default:{exit:{default:"Prendre le rond-point, puis la {exit_number} sortie",name:"Prendre le rond-point, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre le rond-point, puis la {exit_number} sortie en direction {destination:preposition}"},default:{default:"Prendre le rond-point",name:"Prendre le rond-point, puis sortir sur {way_name:article}",destination:"Prendre le rond-point, puis sortir en direction {destination:preposition}"}}},"roundabout turn":{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},left:{default:"Tourner  gauche",name:"Tourner  gauche sur {way_name:article}",destination:"Tourner  gauche en direction {destination:preposition}"},right:{default:"Tourner  droite",name:"Tourner  droite sur {way_name:article}",destination:"Tourner  droite en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"}},"exit roundabout":{default:{default:"Sortir du rond-point",name:"Sortir du rond-point sur {way_name:article}",destination:"Sortir du rond-point en direction {destination:preposition}"}},"exit rotary":{default:{default:"Sortir du rond-point",name:"Sortir du rond-point sur {way_name:article}",destination:"Sortir du rond-point en direction {destination:preposition}"}},turn:{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},left:{default:"Tourner  gauche",name:"Tourner  gauche sur {way_name:article}",destination:"Tourner  gauche en direction {destination:preposition}"},right:{default:"Tourner  droite",name:"Tourner  droite sur {way_name:article}",destination:"Tourner  droite en direction {destination:preposition}"},straight:{default:"Aller tout droit",name:"Aller tout droit sur {way_name:article}",destination:"Aller tout droit en direction {destination:preposition}"}},"use lane":{no_lanes:{default:"Continuer tout droit"},default:{default:"{lane_instruction}"}}}}},{}],31:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:" ",east:"",southeast:" ",south:"",southwest:" ",west:"",northwest:" "},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:" "},lanes:{xo:" ",ox:" ",xox:"  ",oxo:"   "}},modes:{ferry:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},phrase:{"two linked by distance":"{instruction_one}, , {distance}, {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":" {exit}"},arrive:{default:{default:"   {nth} ",upcoming:"    {nth} ",short:"","short-upcoming":"",named:"  {waypoint_name}"},left:{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},right:{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"sharp left":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"sharp right":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"slight right":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"slight left":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},straight:{default:"   {nth} , ",upcoming:"    {nth} , ",short:"","short-upcoming":"",named:"  {waypoint_name}, "}},continue:{default:{default:" {modifier}",name:" {modifier}   {way_name}",destination:" {modifier}  {destination}",exit:" {modifier}  {way_name}"},straight:{default:" ",name:"     {way_name}",destination:"  {destination}",distance:"   {distance}",namedistance:"  {way_name}  {distance}"},"sharp left":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"slight left":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"slight right":{default:"  ",name:"      {way_name}",destination:"    {destination}"},uturn:{default:"  ",name:"     {way_name}",destination:"    {destination}"}},depart:{default:{default:" {direction}",name:" {direction}  {way_name}",namedistance:" {direction}  {way_name}  {distance}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:" ",name:"   {way_name}",destination:"   {destination}"},uturn:{default:"    ",name:"    {way_name}  ",destination:"    {destination}  "}},fork:{default:{default:" {modifier} ",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},"slight left":{default:"  ",name:"   {way_name}",destination:"   {destination}"},"slight right":{default:"  ",name:"   {way_name}",destination:"   {destination}"},"sharp left":{default:"   ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"   ",name:"    {way_name}",destination:"    {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},merge:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:"",name:"  {way_name}",destination:"  {destination}"},"slight left":{default:" ",name:"   {way_name}",destination:"   {destination}"},"slight right":{default:" ",name:"   {way_name}",destination:"   {destination}"},"sharp left":{default:" ",name:"   {way_name}",destination:"   {destination}"},"sharp right":{default:" ",name:"   {way_name}",destination:"   {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:" ",name:"  {way_name}",destination:"  {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"     {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"     {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},"off ramp":{default:{default:" ",name:"   {way_name}",destination:"   {destination}",exit:"  {exit}",exit_destination:"  {exit}  {destination}"},left:{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},right:{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"}},"on ramp":{default:{default:" ",name:"   {way_name}",destination:"   {destination}"},left:{default:"  ",name:"    {way_name}",destination:"    {destination}"},right:{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"    {destination}"}},rotary:{default:{default:{default:"  ",name:"     {way_name}",destination:"     {destination}"},name:{default:" {rotary_name}",name:" {rotary_name}   {way_name}",destination:" {rotary_name}   {destination}"},exit:{default:"     {exit_number}",name:"     {exit_number} {way_name}",destination:"     {exit_number}  {destination}"},name_exit:{default:" {rotary_name}   {exit_number}",name:" {rotary_name}   {exit_number} {way_name}",destination:" {rotary_name}   {exit_number}  {destination}"}}},roundabout:{default:{exit:{default:"     {exit_number}",name:"     {exit_number} {way_name}",destination:"     {exit_number}  {destination}"},default:{default:"  ",name:"     {way_name}",destination:"     {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},left:{default:" ",name:"  {way_name}",destination:"   {destination}"},right:{default:" ",name:"  {way_name}",destination:"   {destination}"},straight:{default:" ",name:"   {way_name}",destination:"   {destination}"}},"exit roundabout":{default:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},"exit rotary":{default:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},left:{default:" ",name:"  {way_name}",destination:"   {destination}"},right:{default:" ",name:"  {way_name}",destination:"   {destination}"},straight:{default:" ",name:"  {way_name}",destination:"   {destination}"}},"use lane":{no_lanes:{default:" "},default:{default:"{lane_instruction}"}}}}},{}],32:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"utara",northeast:"timur laut",east:"timur",southeast:"tenggara",south:"selatan",southwest:"barat daya",west:"barat",northwest:"barat laut"},modifier:{left:"kiri",right:"kanan","sharp left":"tajam kiri","sharp right":"tajam kanan","slight left":"agak ke kiri","slight right":"agak ke kanan",straight:"lurus",uturn:"putar balik"},lanes:{xo:"Tetap di kanan",ox:"Tetap di kiri",xox:"Tetap di tengah",oxo:"Tetap di kiri atau kanan"}},modes:{ferry:{default:"Naik ferry",name:"Naik ferry di {way_name}",destination:"Naik ferry menuju {destination}"}},phrase:{"two linked by distance":"{instruction_one}, then, in {distance}, {instruction_two}","two linked":"{instruction_one}, then {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Anda telah tiba di tujuan ke-{nth}",upcoming:"Anda telah tiba di tujuan ke-{nth}",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}"},left:{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},right:{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"sharp left":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},"sharp right":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"slight right":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"slight left":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},straight:{default:"Anda telah tiba di tujuan ke-{nth}, lurus saja",upcoming:"Anda telah tiba di tujuan ke-{nth}, lurus saja",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, lurus saja"}},continue:{default:{default:"Belok {modifier}",name:"Terus {modifier} ke {way_name}",destination:"Belok {modifier} menuju {destination}",exit:"Belok {modifier} ke {way_name}"},straight:{default:"Lurus terus",name:"Terus ke {way_name}",destination:"Terus menuju {destination}",distance:"Continue straight for {distance}",namedistance:"Continue on {way_name} for {distance}"},"sharp left":{default:"Belok kiri tajam",name:"Make a sharp left to stay on {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan tajam",name:"Make a sharp right to stay on {way_name}",destination:"Belok kanan tajam menuju {destination}"},"slight left":{default:"Tetap agak di kiri",name:"Tetap agak di kiri ke {way_name}",destination:"Tetap agak di kiri menuju {destination}"},"slight right":{default:"Tetap agak di kanan",name:"Tetap agak di kanan ke {way_name}",destination:"Tetap agak di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},depart:{default:{default:"Arah {direction}",name:"Arah {direction} di {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Belok {modifier}",name:"Belok {modifier} ke {way_name}",destination:"Belok {modifier} menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"},uturn:{default:"Putar balik di akhir jalan",name:"Putar balik di {way_name} di akhir jalan",destination:"Putar balik menuju {destination} di akhir jalan"}},fork:{default:{default:"Tetap {modifier} di pertigaan",name:"Tetap {modifier} di pertigaan ke {way_name}",destination:"Tetap {modifier} di pertigaan menuju {destination}"},"slight left":{default:"Tetap di kiri pada pertigaan",name:"Tetap di kiri pada pertigaan ke arah {way_name}",destination:"Tetap di kiri pada pertigaan menuju {destination}"},"slight right":{default:"Tetap di kanan pada pertigaan",name:"Tetap di kanan pada pertigaan ke arah {way_name}",destination:"Tetap di kanan pada pertigaan menuju {destination}"},"sharp left":{default:"Belok kiri pada pertigaan",name:"Belok kiri tajam ke arah {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan pada pertigaan",name:"Belok kanan tajam ke arah {way_name}",destination:"Belok kanan tajam menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},merge:{default:{default:"Bergabung {modifier}",name:"Bergabung {modifier} ke arah {way_name}",destination:"Bergabung {modifier} menuju {destination}"},straight:{default:"Bergabung lurus",name:"Bergabung lurus ke arah {way_name}",destination:"Bergabung lurus menuju {destination}"},"slight left":{default:"Bergabung di kiri",name:"Bergabung di kiri ke arah {way_name}",destination:"Bergabung di kiri menuju {destination}"},"slight right":{default:"Bergabung di kanan",name:"Bergabung di kanan ke arah {way_name}",destination:"Bergabung di kanan menuju {destination}"},"sharp left":{default:"Bergabung di kiri",name:"Bergabung di kiri ke arah {way_name}",destination:"Bergabung di kiri menuju {destination}"},"sharp right":{default:"Bergabung di kanan",name:"Bergabung di kanan ke arah {way_name}",destination:"Bergabung di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},"new name":{default:{default:"Lanjutkan {modifier}",name:"Lanjutkan {modifier} menuju {way_name}",destination:"Lanjutkan {modifier} menuju {destination}"},straight:{default:"Lurus terus",name:"Terus ke {way_name}",destination:"Terus menuju {destination}"},"sharp left":{default:"Belok kiri tajam",name:"Belok kiri tajam ke arah {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan tajam",name:"Belok kanan tajam ke arah {way_name}",destination:"Belok kanan tajam menuju {destination}"},"slight left":{default:"Lanjut dengan agak ke kiri",name:"Lanjut dengan agak di kiri ke {way_name}",destination:"Tetap agak di kiri menuju {destination}"},"slight right":{default:"Tetap agak di kanan",name:"Tetap agak di kanan ke {way_name}",destination:"Tetap agak di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},notification:{default:{default:"Lanjutkan {modifier}",name:"Lanjutkan {modifier} menuju {way_name}",destination:"Lanjutkan {modifier} menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},"off ramp":{default:{default:"Ambil jalan melandai",name:"Ambil jalan melandai ke {way_name}",destination:"Ambil jalan melandai menuju {destination}",exit:"Take exit {exit}",exit_destination:"Take exit {exit} towards {destination}"},left:{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},right:{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"sharp left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"sharp right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"slight left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"slight right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"}},"on ramp":{default:{default:"Ambil jalan melandai",name:"Ambil jalan melandai ke {way_name}",destination:"Ambil jalan melandai menuju {destination}"},left:{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},right:{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"},"sharp left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},"sharp right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"},"slight left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},"slight right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"}},rotary:{default:{default:{default:"Masuk bundaran",name:"Masuk bundaran dan keluar arah {way_name}",destination:"Masuk bundaran dan keluar menuju {destination}"},name:{default:"Masuk {rotary_name}",name:"Masuk {rotary_name} dan keluar arah {way_name}",destination:"Masuk {rotary_name} dan keluar menuju {destination}"},exit:{default:"Masuk bundaran dan ambil jalan keluar {exit_number}",name:"Masuk bundaran dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk bundaran dan ambil jalan keluar {exit_number} menuju {destination}"},name_exit:{default:"Masuk {rotary_name} dan ambil jalan keluar {exit_number}",name:"Masuk {rotary_name} dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk {rotary_name} dan ambil jalan keluar {exit_number} menuju {destination}"}}},roundabout:{default:{exit:{default:"Masuk bundaran dan ambil jalan keluar {exit_number}",name:"Masuk bundaran dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk bundaran dan ambil jalan keluar {exit_number} menuju {destination}"},default:{default:"Masuk bundaran",name:"Masuk bundaran dan keluar arah {way_name}",destination:"Masuk bundaran dan keluar menuju {destination}"}}},"roundabout turn":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"}},"exit roundabout":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"}},"exit rotary":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus",name:"Lurus arah {way_name}",destination:"Lurus menuju {destination}"}},turn:{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus",name:"Lurus arah {way_name}",destination:"Lurus menuju {destination}"}},"use lane":{no_lanes:{default:"Lurus terus"},default:{default:"{lane_instruction}"}}}}},{}],33:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"nord",northeast:"nord-est",east:"est",southeast:"sud-est",south:"sud",southwest:"sud-ovest",west:"ovest",northwest:"nord-ovest"},modifier:{left:"sinistra",right:"destra","sharp left":"sinistra","sharp right":"destra","slight left":"sinistra leggermente","slight right":"destra leggermente",straight:"dritto",uturn:"inversione a U"},lanes:{xo:"Mantieni la destra",ox:"Mantieni la sinistra",xox:"Rimani in mezzo",oxo:"Mantieni la destra o la sinistra"}},modes:{ferry:{default:"Prendi il traghetto",name:"Prendi il traghetto {way_name}",destination:"Prendi il traghetto verso {destination}"}},phrase:{"two linked by distance":"{instruction_one}, poi tra {distance},{instruction_two}","two linked":"{instruction_one}, poi {instruction_two}","one in distance":"tra {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Sei arrivato alla tua {nth} destinazione",upcoming:"Sei arrivato alla tua {nth} destinazione",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"Sei arrivato a {waypoint_name}"},left:{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},right:{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"sharp left":{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},"sharp right":{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"slight right":{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"slight left":{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},straight:{default:"sei arrivato alla tua {nth} destinazione, si trova davanti a te",upcoming:"sei arrivato alla tua {nth} destinazione, si trova davanti a te",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, si trova davanti a te"}},continue:{default:{default:"Gira a {modifier}",name:"Gira a {modifier} per stare su {way_name}",destination:"Gira a {modifier} verso {destination}",exit:"Gira a {modifier} in {way_name}"},straight:{default:"Continua dritto",name:"Continua dritto per stare su {way_name}",destination:"Continua verso {destination}",distance:"Continua dritto per {distance}",namedistance:"Continua su {way_name} per {distance}"},"sharp left":{default:"Svolta a sinistra",name:"Fai una stretta curva a sinistra per stare su {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra",name:"Fau una stretta curva a destra per stare su {way_name}",destination:"Svolta a destra verso {destination}"},"slight left":{default:"Fai una leggera curva a sinistra",name:"Fai una leggera curva a sinistra per stare su {way_name}",destination:"Fai una leggera curva a sinistra verso {destination}"},"slight right":{default:"Fai una leggera curva a destra",name:"Fai una leggera curva a destra per stare su {way_name}",destination:"Fai una leggera curva a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione ad U poi continua su {way_name}",destination:"Fai un'inversione a U verso {destination}"}},depart:{default:{default:"Continua verso {direction}",name:"Continua verso {direction} in {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Gira a {modifier}",name:"Gira a {modifier} in {way_name}",destination:"Gira a {modifier} verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"},uturn:{default:"Fai un'inversione a U alla fine della strada",name:"Fai un'inversione a U in {way_name} alla fine della strada",destination:"Fai un'inversione a U verso {destination} alla fine della strada"}},fork:{default:{default:"Mantieni la {modifier} al bivio",name:"Mantieni la {modifier} al bivio in {way_name}",destination:"Mantieni la {modifier} al bivio verso {destination}"},"slight left":{default:"Mantieni la sinistra al bivio",name:"Mantieni la sinistra al bivio in {way_name}",destination:"Mantieni la sinistra al bivio verso {destination}"},"slight right":{default:"Mantieni la destra al bivio",name:"Mantieni la destra al bivio in {way_name}",destination:"Mantieni la destra al bivio verso {destination}"},"sharp left":{default:"Svolta a sinistra al bivio",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra al bivio",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},merge:{default:{default:"Immettiti a {modifier}",name:"Immettiti {modifier} in {way_name}",destination:"Immettiti {modifier} verso {destination}"},straight:{default:"Immettiti a dritto",name:"Immettiti dritto in {way_name}",destination:"Immettiti dritto verso {destination}"},"slight left":{default:"Immettiti a sinistra",name:"Immettiti a sinistra in {way_name}",destination:"Immettiti a sinistra verso {destination}"},"slight right":{default:"Immettiti a destra",name:"Immettiti a destra in {way_name}",destination:"Immettiti a destra verso {destination}"},"sharp left":{default:"Immettiti a sinistra",name:"Immettiti a sinistra in {way_name}",destination:"Immettiti a sinistra verso {destination}"},"sharp right":{default:"Immettiti a destra",name:"Immettiti a destra in {way_name}",destination:"Immettiti a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},"new name":{default:{default:"Continua a {modifier}",name:"Continua a {modifier} in {way_name}",destination:"Continua a {modifier} verso {destination}"},straight:{default:"Continua dritto",name:"Continua in {way_name}",destination:"Continua verso {destination}"},"sharp left":{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},"slight left":{default:"Continua leggermente a sinistra",name:"Continua leggermente a sinistra in {way_name}",destination:"Continua leggermente a sinistra verso {destination}"},"slight right":{default:"Continua leggermente a destra",name:"Continua leggermente a destra in {way_name} ",destination:"Continua leggermente a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},notification:{default:{default:"Continua a {modifier}",name:"Continua a {modifier} in {way_name}",destination:"Continua a {modifier} verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},"off ramp":{default:{default:"Prendi la rampa",name:"Prendi la rampa in {way_name}",destination:"Prendi la rampa verso {destination}",exit:"Prendi l'uscita {exit}",exit_destination:"Prendi l'uscita  {exit} verso {destination}"},left:{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},right:{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"},"sharp left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},"sharp right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"},"slight left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},"slight right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"}},"on ramp":{default:{default:"Prendi la rampa",name:"Prendi la rampa in {way_name}",destination:"Prendi la rampa verso {destination}"},left:{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},right:{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"},"sharp left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},"sharp right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"},"slight left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},"slight right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"}},rotary:{default:{default:{default:"Immettiti nella rotonda",name:"Immettiti nella ritonda ed esci in {way_name}",destination:"Immettiti nella ritonda ed esci verso {destination}"},name:{default:"Immettiti in {rotary_name}",name:"Immettiti in {rotary_name} ed esci su {way_name}",destination:"Immettiti in {rotary_name} ed esci verso {destination}"},exit:{default:"Immettiti nella rotonda e prendi la {exit_number} uscita",name:"Immettiti nella rotonda e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti nella rotonda e prendi la {exit_number} uscita verso   {destination}"},name_exit:{default:"Immettiti in {rotary_name} e prendi la {exit_number} uscita",name:"Immettiti in {rotary_name} e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti in {rotary_name} e prendi la {exit_number}  uscita verso {destination}"}}},roundabout:{default:{exit:{default:"Immettiti nella rotonda e prendi la {exit_number} uscita",name:"Immettiti nella rotonda e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti nella rotonda e prendi la {exit_number} uscita verso {destination}"},default:{default:"Entra nella rotonda",name:"Entra nella rotonda e prendi l'uscita in {way_name}",destination:"Entra nella rotonda e prendi l'uscita verso {destination}"}}},"roundabout turn":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"}},"exit roundabout":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"}},"exit rotary":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Prosegui dritto",name:"Continua su {way_name}",destination:"Continua verso {destination}"}},turn:{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Prosegui dritto",name:"Continua su {way_name}",destination:"Continua verso {destination}"}},"use lane":{no_lanes:{default:"Continua dritto"},default:{default:"{lane_instruction}"}}}}},{}],34:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:""},lanes:{xo:" ",ox:" ",xox:"",oxo:"    "}},modes:{ferry:{default:" ",name:"  {way_name}",destination:"  {destination} ."}},phrase:{"two linked by distance":"{instruction_one}, , {distance} , {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":"{distance} , {instruction_one}","name and ref":"{name} ({ref})","exit with number":"{exit} ."},arrive:{default:{default:" {nth} .",upcoming:"{nth}   .",short:"","short-upcoming":" .",named:" {waypoint_name} ."},left:{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},right:{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"sharp left":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"sharp right":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"slight right":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"slight left":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},straight:{default:"  {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."}},continue:{default:{default:"{modifier} ",name:"{modifier}  {way_name}  .",destination:"{modifier}  {destination} .",exit:"{way_name}  {modifier}  ."},straight:{default:"  .",name:"{way_name}    .",destination:"{destination}  .",distance:"{distance}  .",namedistance:"{distance} {way_name} ."},"sharp left":{default:" .",name:"   {way_name} .",destination:"   {destination} ."},"sharp right":{default:" .",name:"  {way_name} .",destination:"   {destination} ."},"slight left":{default:" .",name:"   {way_name} .",destination:"    {destination} ."},"slight right":{default:" .",name:"   {way_name} .",destination:"    {destination} ."},uturn:{default:" ",name:" {way_name} .",destination:"  {destination} ."}},depart:{default:{default:"{direction} ",name:"{direction}   {way_name}  . ",namedistance:"{direction} {way_name}  {distance} ."}},"end of road":{default:{default:"{modifier} .",name:"{modifier} {way_name} .",destination:"{modifier}   {destination} ."},straight:{default:"  .",name:"{way_name}   .",destination:"{destination}  ."},uturn:{default:"    .",name:"    {way_name} .",destination:"    {destination}  ."}},fork:{default:{default:" {modifier}  .",name:"{modifier} {way_name} .",destination:"{modifier} {destination} ."},"slight left":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"slight right":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"sharp left":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"sharp right":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},merge:{default:{default:"{modifier} ",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},straight:{default:"",name:"{way_name} .",destination:"{destination} ."},"slight left":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"slight right":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"sharp left":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"sharp right":{default:" .",name:"{way_name} .",destination:"  {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},"new name":{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},straight:{default:".",name:"{way_name}  .",destination:"{destination}  ."},"sharp left":{default:" .",name:"  {way_name} .",destination:"  {destination} ."},"sharp right":{default:" .",name:"  {way_name} .",destination:"  {destination} ."},"slight left":{default:"  .",name:"  {way_name} .",destination:"   {destination} ."},"slight right":{default:"  .",name:"  {way_name} .",destination:"   {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},notification:{default:{default:"{modifier} .",name:"{modifier} {way_name} .",destination:"{modifier} {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},"off ramp":{default:{default:"  ..",name:"  {way_name} .",destination:"  {destination} .",exit:"{exit}  .",exit_destination:"{exit}   {destination} ."},left:{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},right:{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"sharp left":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"sharp right":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"slight left":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"slight right":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."}},"on ramp":{default:{default:"  ..",name:"  {way_name} .",destination:"  {destination} ."},left:{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},right:{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"sharp left":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"sharp right":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"slight left":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"slight right":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."}},rotary:{default:{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},name:{default:"{rotary_name} .",name:"{rotary_name}  {way_name} .",destination:"{rotary_name}  {destination} ."},exit:{default:"  {exit_number}  .",name:"  {exit_number}   {way_name} .",destination:"  {exit_number}   {destination} ."},name_exit:{default:"{rotary_name}  {exit_number}  .",name:"{rotary_name}  {exit_number}   {way_name} .",destination:"{rotary_name}  {exit_number}   {destination} ."}}},roundabout:{default:{exit:{default:"  {exit_number} .",name:"  {exit_number}  {way_name} .",destination:"  {exit_number}  {destination} ."},default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}}},"roundabout turn":{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},left:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},right:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},straight:{default:" .",name:" {way_name} .",destination:" {destination} ."}},"exit roundabout":{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}},"exit rotary":{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}},turn:{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},left:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},right:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},straight:{default:" .",name:" {way_name} .",destination:" {destination} ."}},"use lane":{no_lanes:{default:"."},default:{default:"{lane_instruction}"}}}}},{}],35:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:"-"},lanes:{xo:"",ox:"",xox:"",oxo:"   "}},modes:{ferry:{default:" ",name:"{way_name} ",destination:"{destination} "}},phrase:{"two linked by distance":"{instruction_one} {distance} {instruction_two}","two linked":"{instruction_one} {instruction_two}","one in distance":"{distance} {instruction_one}","name and ref":"{name}( {ref})","exit with number":"{exit}"},arrive:{default:{default:"{nth}  ",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},left:{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},right:{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"sharp left":{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},"sharp right":{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"slight right":{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"slight left":{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},straight:{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "}},continue:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} ",exit:"{way_name} {modifier}"},straight:{default:" ",name:"{way_name}",destination:"{destination}",distance:"{distance}  ",namedistance:"{way_name}{distance}"},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight left":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight right":{default:" ",name:"{way_name} ",destination:"{destination} "},uturn:{default:"- ",name:"{way_name} -",destination:"{destination} "}},depart:{default:{default:"{direction} ",name:"{direction} {way_name} ",namedistance:"{direction} {way_name}{distance} "}},"end of road":{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"},uturn:{default:" -",name:" {way_name}-",destination:"{destination} "}},fork:{default:{default:" {modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},"slight left":{default:"",name:"{way_name}",destination:"{destination} "},"slight right":{default:"",name:"{way_name}",destination:"{destination} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} "},uturn:{default:"- ",name:"{way_name}-",destination:"{destination} "}},merge:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:"",name:"{way_name}",destination:"{destination} "},"slight left":{default:"",name:"{way_name}",destination:"{destination} "},"slight right":{default:"",name:"{way_name}",destination:"{destination} "},"sharp left":{default:"",name:"{way_name}",destination:"{destination} "},"sharp right":{default:"",name:"{way_name}",destination:"{destination} "},uturn:{default:"- ",name:"{way_name} -  ",destination:"{destination} "}},"new name":{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight left":{default:" ",name:"{way_name} ",destination:"{destination}"},"slight right":{default:" ",name:"{way_name} ",destination:"{destination}"},uturn:{default:"- ",name:"{way_name} - ",destination:"{destination} "}},notification:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},uturn:{default:"- ",name:"{way_name} - ",destination:"{destination} "}},"off ramp":{default:{default:"",name:"{way_name}",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},left:{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},right:{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"slight left":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"slight right":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "}},"on ramp":{default:{default:"",name:"{way_name}",destination:"{destination} "},left:{default:"",name:"{way_name} ",destination:"{destination} "},right:{default:"",name:"{way_name} ",destination:"{destination} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} "},"slight left":{default:"",name:"{way_name} ",destination:"{destination} "},"slight right":{default:"",name:"{way_name} ",destination:"{destination} "}},rotary:{default:{default:{default:"",name:"{way_name}",destination:"{destination}"},name:{default:"{rotary_name}",name:"{rotary_name}{way_name}",destination:"{rotary_name}{destination}"},exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},name_exit:{default:"{rotary_name} {exit_number}",name:"{rotary_name}{exit_number}{way_name}",destination:"{rotary_name}{exit_number}{destination}"}}},roundabout:{default:{exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},default:{default:"",name:"{way_name}",destination:"{destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination} "},left:{default:"",name:"{way_name}",destination:"{destination} "},right:{default:"",name:"{way_name}",destination:"{destination} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"}},"exit roundabout":{default:{default:"",name:"{way_name}",destination:"{destination}"}},"exit rotary":{default:{default:"",name:"{way_name}",destination:"{destination}"}},turn:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination} "},left:{default:"",name:"{way_name}",destination:"{destination} "},right:{default:"",name:"{way_name}",destination:"{destination} "},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"use lane":{no_lanes:{default:" "},default:{default:"{lane_instruction}"}}}}},{}],36:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1e",2:"2e",3:"3e",4:"4e",5:"5e",6:"6e",7:"7e",8:"8e",9:"9e",10:"10e"},direction:{north:"noord",northeast:"noordoost",east:"oost",southeast:"zuidoost",south:"zuid",southwest:"zuidwest",west:"west",northwest:"noordwest"},modifier:{left:"links",right:"rechts","sharp left":"scherpe bocht naar links","sharp right":"scherpe bocht naar rechts","slight left":"iets naar links","slight right":"iets naar rechts",straight:"rechtdoor",uturn:"omkeren"},lanes:{xo:"Rechts aanhouden",ox:"Links aanhouden",xox:"In het midden blijven",oxo:"Links of rechts blijven"}},modes:{ferry:{default:"Neem de veerpont",name:"Neem de veerpont {way_name}",destination:"Neem de veerpont richting {destination}"}},phrase:{"two linked by distance":"{instruction_one}, dan na {distance}, {instruction_two}","two linked":"{instruction_one}, daarna {instruction_two}","one in distance":"Over {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"afslag {exit}"},arrive:{default:{default:"Je bent gearriveerd op de {nth} bestemming.",upcoming:"U arriveert op de {nth} bestemming",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}"},left:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de linkerkant"},right:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de  rechterkant"},"sharp left":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de linkerkant"},"sharp right":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de rechterkant"},"slight right":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de rechterkant"},"slight left":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de linkerkant"},straight:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich voor je.",upcoming:"Uw {nth} bestemming is recht voor u",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is recht voor u"}},continue:{default:{default:"Ga {modifier}",name:"Sla {modifier} om op {way_name} te blijven",destination:"Ga {modifier} richting {destination}",exit:"Ga {modifier} naar {way_name}"},straight:{default:"Ga rechtdoor",name:"Blijf rechtdoor gaan op {way_name}",destination:"Ga rechtdoor richting {destination}",distance:"Ga rechtdoor voor {distance}",namedistance:"Ga verder op {way_name} voor {distance}"},"sharp left":{default:"Linksaf",name:"Sla scherp links af om op {way_name} te blijven",destination:"Linksaf richting {destination}"},"sharp right":{default:"Rechtsaf",name:"Sla scherp rechts af om op {way_name} te blijven",destination:"Rechtsaf richting {destination}"},"slight left":{default:"Ga links",name:"Links afbuigen om op {way_name} te blijven",destination:"Rechts afbuigen om op {destination} te blijven"},"slight right":{default:"Rechts afbuigen",name:"Rechts afbuigen om op {way_name} te blijven",destination:"Rechts afbuigen richting {destination}"},uturn:{default:"Keer om",name:"Draai om en ga verder op {way_name}",destination:"Keer om richting {destination}"}},depart:{default:{default:"Vertrek in {direction}elijke richting",name:"Neem {way_name} in {direction}elijke richting",namedistance:"Ga richting {direction} op {way_name} voor {distance}"}},"end of road":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga naar {way_name}",destination:"Ga richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},fork:{default:{default:"Ga {modifier} op de splitsing",name:"Houd {modifier} aan, tot {way_name}",destination:"Houd {modifier}, in de richting van {destination}"},"slight left":{default:"Links aanhouden op de splitsing",name:"Houd links aan, tot {way_name}",destination:"Houd links aan, richting {destination}"},"slight right":{default:"Rechts aanhouden op de splitsing",name:"Houd rechts aan, tot {way_name}",destination:"Houd rechts aan, richting {destination}"},"sharp left":{default:"Neem bij de splitsing, een scherpe bocht, naar links ",name:"Neem een scherpe bocht naar links, tot aan {way_name}",destination:"Neem een scherpe bocht naar links, richting {destination}"},"sharp right":{default:"Neem  op de splitsing, een scherpe bocht, naar rechts",name:"Neem een scherpe bocht naar rechts, tot aan {way_name}",destination:"Neem een scherpe bocht naar rechts, richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},merge:{default:{default:"Bij de splitsing {modifier}",name:"Bij de splitsing {modifier} naar {way_name}",destination:"Bij de splitsing {modifier} richting {destination}"},straight:{default:"Samenvoegen",name:"Ga verder op {way_name}",destination:"Ga verder richting {destination}"},"slight left":{default:"Bij de splitsing links aanhouden",name:"Bij de splitsing links aanhouden naar {way_name}",destination:"Bij de splitsing links aanhouden richting {destination}"},"slight right":{default:"Bij de splitsing rechts aanhouden",name:"Bij de splitsing rechts aanhouden naar {way_name}",destination:"Bij de splitsing rechts aanhouden richting {destination}"},"sharp left":{default:"Bij de splitsing linksaf",name:"Bij de splitsing linksaf naar {way_name}",destination:"Bij de splitsing linksaf richting {destination}"},"sharp right":{default:"Bij de splitsing rechtsaf",name:"Bij de splitsing rechtsaf naar {way_name}",destination:"Bij de splitsing rechtsaf richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},"new name":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga rechtdoor naar {way_name}",destination:"Ga rechtdoor richting {destination}"},"sharp left":{default:"Neem een scherpe bocht, naar links",name:"Linksaf naar {way_name}",destination:"Linksaf richting {destination}"},"sharp right":{default:"Neem een scherpe bocht, naar rechts",name:"Rechtsaf naar {way_name}",destination:"Rechtsaf richting {destination}"},"slight left":{default:"Links aanhouden",name:"Links aanhouden naar {way_name}",destination:"Links aanhouden richting {destination}"},"slight right":{default:"Rechts aanhouden",name:"Rechts aanhouden naar {way_name}",destination:"Rechts aanhouden richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},notification:{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},"off ramp":{default:{default:"Neem de afrit",name:"Neem de afrit naar {way_name}",destination:"Neem de afrit richting {destination}",exit:"Neem afslag {exit}",exit_destination:"Neem afslag {exit} richting {destination}"},left:{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},right:{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"},"sharp left":{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},"sharp right":{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"},"slight left":{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},"slight right":{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"}},"on ramp":{default:{default:"Neem de oprit",name:"Neem de oprit naar {way_name}",destination:"Neem de oprit richting {destination}"},left:{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},right:{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"},"sharp left":{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},"sharp right":{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"},"slight left":{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},"slight right":{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"}},rotary:{default:{default:{default:"Betreedt de rotonde",name:"Betreedt rotonde en sla af op {way_name}",destination:"Betreedt rotonde en sla af richting {destination}"},name:{default:"Ga het knooppunt {rotary_name} op",name:"Verlaat het knooppunt {rotary_name} naar {way_name}",destination:"Verlaat het knooppunt {rotary_name} richting {destination}"},exit:{default:"Betreedt rotonde en neem afslag {exit_number}",name:"Betreedt rotonde en neem afslag {exit_number} naar {way_name}",destination:"Betreedt rotonde en neem afslag {exit_number} richting {destination}"},name_exit:{default:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number}",name:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number} naar {way_name}",destination:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number} richting {destination}"}}},roundabout:{default:{exit:{default:"Betreedt rotonde en neem afslag {exit_number}",name:"Betreedt rotonde en neem afslag {exit_number} naar {way_name}",destination:"Betreedt rotonde en neem afslag {exit_number} richting {destination}"},default:{default:"Betreedt de rotonde",name:"Betreedt rotonde en sla af op {way_name}",destination:"Betreedt rotonde en sla af richting {destination}"}}},"roundabout turn":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},left:{default:"Ga linksaf",name:"Ga linksaf naar {way_name}",destination:"Ga linksaf richting {destination}"},right:{default:"Ga rechtsaf",name:"Ga rechtsaf naar {way_name}",destination:"Ga rechtsaf richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga naar {way_name}",destination:"Ga richting {destination}"}},"exit roundabout":{default:{default:"Verlaat de rotonde",name:"Verlaat de rotonde en ga verder op {way_name}",destination:"Verlaat de rotonde richting {destination}"}},"exit rotary":{default:{default:"Verlaat de rotonde",name:"Verlaat de rotonde en ga verder op {way_name}",destination:"Verlaat de rotonde richting {destination}"}},turn:{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},left:{default:"Ga linksaf",name:"Ga linksaf naar {way_name}",destination:"Ga linksaf richting {destination}"},right:{default:"Ga rechtsaf",name:"Ga rechtsaf naar {way_name}",destination:"Ga rechtsaf richting {destination}"},straight:{default:"Ga rechtdoor",name:"Ga rechtdoor naar {way_name}",destination:"Ga rechtdoor richting {destination}"}},"use lane":{no_lanes:{default:"Rechtdoor"},default:{default:"{lane_instruction}"}}}}},{}],37:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"nord",northeast:"nordst",east:"st",southeast:"srst",south:"sr",southwest:"srvest",west:"vest",northwest:"nordvest"},modifier:{left:"venstre",right:"hyre","sharp left":"skarp venstre","sharp right":"skarp hyre","slight left":"litt til venstre","slight right":"litt til hyre",straight:"rett frem",uturn:"U-sving"},lanes:{xo:"Hold til hyre",ox:"Hold til venstre",xox:"Hold deg i midten",oxo:"Hold til venstre eller hyre"}},modes:{ferry:{default:"Ta ferja",name:"Ta ferja {way_name}",destination:"Ta ferja til {destination}"}},phrase:{"two linked by distance":"{instruction_one}, deretter {instruction_two} om {distance}","two linked":"{instruction_one}, deretter {instruction_two}","one in distance":"Om {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"avkjrsel {exit}"},arrive:{default:{default:"Du har ankommet din {nth} destinasjon",upcoming:"Du vil ankomme din {nth} destinasjon",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}"},left:{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},right:{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"sharp left":{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},"sharp right":{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"slight right":{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"slight left":{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},straight:{default:"Du har ankommet din {nth} destinasjon, rett forut",upcoming:"Du vil ankomme din {nth} destinasjon, rett forut",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, rett forut"}},continue:{default:{default:"Ta til {modifier}",name:"Ta til {modifier} for  bli vrende p {way_name}",destination:"Ta til {modifier} mot {destination}",exit:"Ta til {modifier} inn p {way_name}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem for  bli vrende p {way_name}",destination:"Fortsett mot {destination}",distance:"Fortsett rett frem, {distance} ",namedistance:"Fortsett p {way_name}, {distance}"},"sharp left":{default:"Sving skarpt til venstre",name:"Sving skarpt til venstre for  bli vrende p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre",name:"Sving skarpt til hyre for  bli vrende p {way_name}",destination:"Sving skarpt mot {destination}"},"slight left":{default:"Sving svakt til venstre",name:"Sving svakt til venstre for  bli vrende p {way_name}",destination:"Sving svakt til venstre mot {destination}"},"slight right":{default:"Sving svakt til hyre",name:"Sving svakt til hyre for  bli vrende p {way_name}",destination:"Sving svakt til hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving og fortsett p {way_name}",destination:"Ta en U-sving mot {destination}"}},depart:{default:{default:"Kjr i retning {direction}",name:"Kjr i retning {direction} p {way_name}",namedistance:"Kjr i retning {direction} p {way_name}, {distance}"}},"end of road":{default:{default:"Sving {modifier}",name:"Ta til {modifier} inn p {way_name}",destination:"Sving {modifier} mot {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem til  {way_name}",destination:"Fortsett rett frem mot {destination}"},uturn:{default:"Ta en U-sving i enden av veien",name:"Ta en U-sving til {way_name} i enden av veien",destination:"Ta en U-sving mot {destination} i enden av veien"}},fork:{default:{default:"Hold til {modifier} i veikrysset",name:"Hold til {modifier} inn p {way_name}",destination:"Hold til {modifier} mot {destination}"},"slight left":{default:"Hold til venstre i veikrysset",name:"Hold til venstre inn p {way_name}",destination:"Hold til venstre mot {destination}"},"slight right":{default:"Hold til hyre i veikrysset",name:"Hold til hyre inn p {way_name}",destination:"Hold til hyre mot {destination}"},"sharp left":{default:"Sving skarpt til venstre i veikrysset",name:"Sving skarpt til venstre inn p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre i veikrysset",name:"Sving skarpt til hyre inn p {way_name}",destination:"Svings skarpt til hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},merge:{default:{default:"Hold {modifier} kjrefelt",name:"Hold {modifier} kjrefelt inn p {way_name}",destination:"Hold {modifier} kjrefelt mot {destination}"},straight:{default:"Hold kjrefelt",name:"Hold kjrefelt inn p {way_name}",destination:"Hold kjrefelt mot {destination}"},"slight left":{default:"Hold venstre kjrefelt",name:"Hold venstre kjrefelt inn p {way_name}",destination:"Hold venstre kjrefelt mot {destination}"},"slight right":{default:"Hold hyre kjrefelt",name:"Hold hyre kjrefelt inn p {way_name}",destination:"Hold hyre kjrefelt mot {destination}"},"sharp left":{default:"Hold venstre kjrefelt",name:"Hold venstre kjrefelt inn p {way_name}",destination:"Hold venstre kjrefelt mot {destination}"},"sharp right":{default:"Hold hyre kjrefelt",name:"Hold hyre kjrefelt inn p {way_name}",destination:"Hold hyre kjrefelt mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},"new name":{default:{default:"Fortsett {modifier}",name:"Fortsett {modifier} til {way_name}",destination:"Fortsett {modifier} mot  {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett inn p {way_name}",destination:"Fortsett mot {destination}"},"sharp left":{default:"Sving skarpt til venstre",name:"Sving skarpt til venstre inn p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre",name:"Sving skarpt til hyre inn p {way_name}",destination:"Svings skarpt til hyre mot {destination}"},"slight left":{default:"Fortsett litt mot venstre",name:"Fortsett litt mot venstre til {way_name}",destination:"Fortsett litt mot venstre mot {destination}"},"slight right":{default:"Fortsett litt mot hyre",name:"Fortsett litt mot hyre til {way_name}",destination:"Fortsett litt mot hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},notification:{default:{default:"Fortsett {modifier}",name:"Fortsett {modifier} til {way_name}",destination:"Fortsett {modifier} mot  {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},"off ramp":{default:{default:"Ta avkjrselen",name:"Ta avkjrselen inn p {way_name}",destination:"Ta avkjrselen mot {destination}",exit:"Ta avkjrsel {exit}",exit_destination:"Ta avkjrsel {exit} mot {destination}"},left:{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},right:{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"},"sharp left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},"sharp right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"},"slight left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},"slight right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"}},"on ramp":{default:{default:"Ta avkjrselen",name:"Ta avkjrselen inn p {way_name}",destination:"Ta avkjrselen mot {destination}"},left:{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},right:{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"},"sharp left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},"sharp right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"},"slight left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},"slight right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"}},rotary:{default:{default:{default:"Kjr inn i rundkjringen",name:"Kjr inn i rundkjringen og deretter ut p {way_name}",destination:"Kjr inn i rundkjringen og deretter ut mot {destination}"},name:{default:"Kjr inn i {rotary_name}",name:"Kjr inn i {rotary_name} og deretter ut p {way_name}",destination:"Kjr inn i {rotary_name} og deretter ut mot {destination}"},exit:{default:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel",name:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut p {way_name}",destination:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut mot {destination} "},name_exit:{default:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel",name:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel inn p {way_name}",destination:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel mot {destination}"}}},roundabout:{default:{exit:{default:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel",name:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel inn p {way_name}",destination:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut mot {destination} "},default:{default:"Kjr inn i rundkjringen",name:"Kjr inn i rundkjringen og deretter ut p {way_name}",destination:"Kjr inn i rundkjringen og deretter ut mot {destination}"}}},"roundabout turn":{default:{default:"Ta en {modifier}",name:"Ta en {modifier} inn p {way_name}",destination:"Ta en {modifier} mot {destination}"},left:{default:"Sving til venstre",name:"Sving til venstre inn p {way_name}",destination:"Sving til venstre mot {destination}"},right:{default:"Sving til hyre",name:"Sving til hyre inn p {way_name}",destination:"Sving til hyre mot {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem til  {way_name}",destination:"Fortsett rett frem mot {destination}"}},"exit roundabout":{default:{default:"Kjr ut av rundkjringen",name:"Kjr ut av rundkjringen og inn p {way_name}",destination:"Kjr ut av rundkjringen mot {destination}"}},"exit rotary":{default:{default:"Kjr ut av rundkjringen",name:"Kjr ut av rundkjringen og inn p {way_name}",destination:"Kjr ut av rundkjringen mot {destination}"}},turn:{default:{default:"Ta en {modifier}",name:"Ta en {modifier} inn p {way_name}",destination:"Ta en {modifier} mot {destination}"},left:{default:"Sving til venstre",name:"Sving til venstre inn p {way_name}",destination:"Sving til venstre mot {destination}"},right:{default:"Sving til hyre",name:"Sving til hyre inn p {way_name}",destination:"Sving til hyre mot {destination}"},straight:{default:"Kjr rett frem",name:"Kjr rett frem og inn p {way_name}",destination:"Kjr rett frem mot {destination}"}},"use lane":{no_lanes:{default:"Fortsett rett frem"},default:{default:"{lane_instruction}"}}}}},{}],38:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"pnoc",northeast:"pnocny wschd",east:"wschd",southeast:"poudniowy wschd",south:"poudnie",southwest:"poudniowy zachd",west:"zachd",northwest:"pnocny zachd"},modifier:{left:"lewo",right:"prawo","sharp left":"ostro w lewo","sharp right":"ostro w prawo","slight left":"agodnie w lewo","slight right":"agodnie w prawo",straight:"prosto",uturn:"zawr"},lanes:{xo:"Trzymaj si prawej strony",ox:"Trzymaj si lewej strony",xox:"Trzymaj si rodka",oxo:"Trzymaj si lewej lub prawej strony"}},modes:{ferry:{default:"We prom",name:"We prom {way_name}",destination:"We prom w kierunku {destination}"}},phrase:{"two linked by distance":"{instruction_one}, nastpnie za {distance} {instruction_two}","two linked":"{instruction_one}, nastpnie {instruction_two}","one in distance":"Za {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Dojechano do miejsca docelowego {nth}",upcoming:"Dojechano do miejsca docelowego {nth}",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}"},left:{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},right:{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"sharp left":{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},"sharp right":{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"slight right":{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"slight left":{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},straight:{default:"Dojechano do miejsca docelowego {nth} , prosto",upcoming:"Dojechano do miejsca docelowego {nth} , prosto",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, prosto"}},continue:{default:{default:"Skr {modifier}",name:"Skr w {modifier}, aby pozosta na {way_name}",destination:"Skr {modifier} w kierunku {destination}",exit:"Skr {modifier} na {way_name}"},straight:{default:"Kontynuuj prosto",name:"Jed dalej prosto, aby pozosta na {way_name}",destination:"Kontynuuj w kierunku {destination}",distance:"Jed dalej prosto przez {distance}",namedistance:"Jed dalej {way_name} przez {distance}"},"sharp left":{default:"Skr ostro w lewo",name:"Skr w lewo w ostry zakrt, aby pozosta na {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Skr ostro w prawo",name:"Skr w prawo w ostry zakrt, aby pozosta na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},"slight left":{default:"Skr w lewo w agodny zakrt",name:"Skr w lewo w agodny zakrt, aby pozosta na {way_name}",destination:"Skr w lewo w agodny zakrt na {destination}"},"slight right":{default:"Skr w prawo w agodny zakrt",name:"Skr w prawo w agodny zakrt, aby pozosta na {way_name}",destination:"Skr w prawo w agodny zakrt na {destination}"},uturn:{default:"Zawr",name:"Zawr i jed dalej {way_name}",destination:"Zawr w kierunku {destination}"}},depart:{default:{default:"Kieruj si {direction}",name:"Kieruj si {direction} na {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Skr {modifier}",name:"Skr {modifier} na {way_name}",destination:"Skr {modifier} w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"},uturn:{default:"Zawr na kocu ulicy",name:"Zawr na kocu ulicy na {way_name}",destination:"Zawr na kocu ulicy w kierunku {destination}"}},fork:{default:{default:"Na rozwidleniu trzymaj si {modifier}",name:"Na rozwidleniu trzymaj si {modifier} na {way_name}",destination:"Na rozwidleniu trzymaj si {modifier} w kierunku {destination}"},"slight left":{default:"Na rozwidleniu trzymaj si lewej strony",name:"Na rozwidleniu trzymaj si lewej strony w {way_name}",destination:"Na rozwidleniu trzymaj si lewej strony w kierunku {destination}"},"slight right":{default:"Na rozwidleniu trzymaj si prawej strony",name:"Na rozwidleniu trzymaj si prawej strony na {way_name}",destination:"Na rozwidleniu trzymaj si prawej strony w kierunku {destination}"},"sharp left":{default:"Na rozwidleniu skr ostro w lewo",name:"Skr ostro w lewo w {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Na rozwidleniu skr ostro w prawo",name:"Skr ostro w prawo na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},merge:{default:{default:"Wcz si {modifier}",name:"Wcz si {modifier} na {way_name}",destination:"Wcz si {modifier} w kierunku {destination}"},straight:{default:"Wcz si prosto",name:"Wcz si prosto na {way_name}",destination:"Wcz si prosto w kierunku {destination}"},"slight left":{default:"Wcz si z lewej strony",name:"Wcz si z lewej strony na {way_name}",destination:"Wcz si z lewej strony w kierunku {destination}"},"slight right":{default:"Wcz si z prawej strony",name:"Wcz si z prawej strony na {way_name}",destination:"Wcz si z prawej strony w kierunku {destination}"},"sharp left":{default:"Wcz si z lewej strony",name:"Wcz si z lewej strony na {way_name}",destination:"Wcz si z lewej strony w kierunku {destination}"},"sharp right":{default:"Wcz si z prawej strony",name:"Wcz si z prawej strony na {way_name}",destination:"Wcz si z prawej strony w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},"new name":{default:{default:"Kontynuuj {modifier}",name:"Kontynuuj {modifier} na {way_name}",destination:"Kontynuuj {modifier} w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj na {way_name}",destination:"Kontynuuj w kierunku {destination}"},"sharp left":{default:"Skr ostro w lewo",name:"Skr ostro w lewo w {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Skr ostro w prawo",name:"Skr ostro w prawo na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},"slight left":{default:"Kontynuuj agodnie w lewo",name:"Kontynuuj agodnie w lewo na {way_name}",destination:"Kontynuuj agodnie w lewo w kierunku {destination}"},"slight right":{default:"Kontynuuj agodnie w prawo",name:"Kontynuuj agodnie w prawo na {way_name}",destination:"Kontynuuj agodnie w prawo w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},notification:{default:{default:"Kontynuuj {modifier}",name:"Kontynuuj {modifier} na {way_name}",destination:"Kontynuuj {modifier} w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},"off ramp":{default:{default:"Zjed",name:"We zjazd na {way_name}",destination:"We zjazd w kierunku {destination}",exit:"Zjed zjazdem {exit}",exit_destination:"Zjed zjazdem {exit} na {destination}"},left:{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},right:{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"},"sharp left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},"sharp right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"},"slight left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},"slight right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"}},"on ramp":{default:{default:"We zjazd",name:"We zjazd na {way_name}",destination:"We zjazd w kierunku {destination}"},left:{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},right:{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"},"sharp left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},"sharp right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"},"slight left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},"slight right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"}},rotary:{default:{default:{default:"Wjed na rondo",name:"Wjed na rondo i skr na {way_name}",destination:"Wjed na rondo i skr w kierunku {destination}"},name:{default:"Wjed na {rotary_name}",name:"Wjed na {rotary_name} i skr na {way_name}",destination:"Wjed na {rotary_name} i skr w kierunku {destination}"},exit:{default:"Wjed na rondo i wyjed {exit_number} zjazdem",name:"Wjed na rondo i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na rondo i wyjed {exit_number} zjazdem w kierunku {destination}"},name_exit:{default:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem",name:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem w kierunku {destination}"}}},roundabout:{default:{exit:{default:"Wjed na rondo i wyjed {exit_number} zjazdem",name:"Wjed na rondo i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na rondo i wyjed {exit_number} zjazdem w kierunku {destination}"},default:{default:"Wjed na rondo",name:"Wjed na rondo i wyjed na {way_name}",destination:"Wjed na rondo i wyjed w kierunku {destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"}},"exit roundabout":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"}},"exit rotary":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Jed prosto",name:"Jed prosto na {way_name}",destination:"Jed prosto w kierunku {destination}"}},turn:{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Jed prosto",name:"Jed prosto na {way_name}",destination:"Jed prosto w kierunku {destination}"}},"use lane":{no_lanes:{default:"Kontynuuj prosto"},default:{default:"{lane_instruction}"}}}}},{}],39:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"nordeste",east:"leste",southeast:"sudeste",south:"sul",southwest:"sudoeste",west:"oeste",northwest:"noroeste"},modifier:{left:" esquerda",right:" direita","sharp left":"fechada  esquerda","sharp right":"fechada  direita","slight left":"suave  esquerda","slight right":"suave  direita",straight:"em frente",uturn:"retorno"},lanes:{xo:"Mantenha-se  direita",ox:"Mantenha-se  esquerda",xox:"Mantenha-se ao centro",oxo:"Mantenha-se  esquerda ou direita"}},modes:{ferry:{default:"Pegue a balsa",name:"Pegue a balsa {way_name}",destination:"Pegue a balsa sentido {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ento, em {distance}, {instruction_two}","two linked":"{instruction_one}, ento {instruction_two}","one in distance":"Em {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sada {exit}"},arrive:{default:{default:"Voc chegou ao seu {nth} destino",upcoming:"Voc chegar ao seu {nth} destino",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou a {waypoint_name}"},left:{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},right:{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"sharp left":{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},"sharp right":{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"slight right":{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"slight left":{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},straight:{default:"Voc chegou ao seu {nth} destino, em frente",upcoming:"Voc vai chegar ao seu {nth} destino, em frente",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"You have arrived at {waypoint_name}, straight ahead"}},continue:{default:{default:"Vire {modifier}",name:"Vire {modifier} para manter-se na {way_name}",destination:"Vire {modifier} sentido {destination}",exit:"Vire {modifier} em {way_name}"},straight:{default:"Continue em frente",name:"Continue em frente para manter-se na {way_name}",destination:"Continue em direo  {destination}",distance:"Continue em frente por {distance}",namedistance:"Continue na {way_name} por {distance}"},"sharp left":{default:"Faa uma curva fechada a esquerda",name:"Faa uma curva fechada a esquerda para manter-se na {way_name}",destination:"Faa uma curva fechada a esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada a direita",name:"Faa uma curva fechada a direita para manter-se na {way_name}",destination:"Faa uma curva fechada a direita sentido {destination}"},"slight left":{default:"Faa uma curva suave a esquerda",name:"Faa uma curva suave a esquerda para manter-se na {way_name}",destination:"Faa uma curva suave a esquerda em direo a {destination}"},"slight right":{default:"Faa uma curva suave a direita",name:"Faa uma curva suave a direita para manter-se na {way_name}",destination:"Faa uma curva suave a direita em direo a {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno e continue em {way_name}",destination:"Faa o retorno sentido {destination}"}},depart:{default:{default:"Siga {direction}",name:"Siga {direction} em {way_name}",namedistance:"Siga {direction} na {way_name} por {distance}"}},"end of road":{default:{default:"Vire {modifier}",name:"Vire {modifier} em {way_name}",destination:"Vire {modifier} sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em frente em {way_name}",destination:"Continue em frente sentido {destination}"},uturn:{default:"Faa o retorno no fim da rua",name:"Faa o retorno em {way_name} no fim da rua",destination:"Faa o retorno sentido {destination} no fim da rua"}},fork:{default:{default:"Mantenha-se {modifier} na bifurcao",name:"Mantenha-se {modifier} na bifurcao em {way_name}",destination:"Mantenha-se {modifier} na bifurcao sentido {destination}"},"slight left":{default:"Mantenha-se  esquerda na bifurcao",name:"Mantenha-se  esquerda na bifurcao em {way_name}",destination:"Mantenha-se  esquerda na bifurcao sentido {destination}"},"slight right":{default:"Mantenha-se  direita na bifurcao",name:"Mantenha-se  direita na bifurcao em {way_name}",destination:"Mantenha-se  direita na bifurcao sentido {destination}"},"sharp left":{default:"Faa uma curva fechada  esquerda na bifurcao",name:"Faa uma curva fechada  esquerda em {way_name}",destination:"Faa uma curva fechada  esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada  direita na bifurcao",name:"Faa uma curva fechada  direita em {way_name}",destination:"Faa uma curva fechada  direita sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},merge:{default:{default:"Entre {modifier}",name:"Entre {modifier} na {way_name}",destination:"Entre {modifier} em direo  {destination}"},straight:{default:"Mesclar",name:"Entre reto na {way_name}",destination:"Entre reto em direo  {destination}"},"slight left":{default:"Entre  esquerda",name:"Entre  esquerda na {way_name}",destination:"Entre  esquerda em direo  {destination}"},"slight right":{default:"Entre  direita",name:"Entre  direita na {way_name}",destination:"Entre  direita em direo  {destination}"},"sharp left":{default:"Entre  esquerda",name:"Entre  esquerda na {way_name}",destination:"Entre  esquerda em direo  {destination}"},"sharp right":{default:"Entre  direita",name:"Entre  direita na {way_name}",destination:"Entre  direita em direo  {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} em {way_name}",destination:"Continue {modifier} sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em {way_name}",destination:"Continue em direo  {destination}"},"sharp left":{default:"Faa uma curva fechada  esquerda",name:"Faa uma curva fechada  esquerda em {way_name}",destination:"Faa uma curva fechada  esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada  direita",name:"Faa uma curva fechada  direita em {way_name}",destination:"Faa uma curva fechada  direita sentido {destination}"},"slight left":{default:"Continue ligeiramente  esquerda",name:"Continue ligeiramente  esquerda em {way_name}",destination:"Continue ligeiramente  esquerda sentido {destination}"},"slight right":{default:"Continue ligeiramente  direita",name:"Continue ligeiramente  direita em {way_name}",destination:"Continue ligeiramente  direita sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} em {way_name}",destination:"Continue {modifier} sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},"off ramp":{default:{default:"Pegue a rampa",name:"Pegue a rampa em {way_name}",destination:"Pegue a rampa sentido {destination}",exit:"Pegue a sada {exit}",exit_destination:"Pegue a sada {exit} em direo  {destination}"},left:{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},right:{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"},"sharp left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},"sharp right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"},"slight left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},"slight right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"}},"on ramp":{default:{default:"Pegue a rampa",name:"Pegue a rampa em {way_name}",destination:"Pegue a rampa sentido {destination}"},left:{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},right:{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentid {destination}"},"sharp left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},"sharp right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}"},"slight left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},"slight right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}"}},rotary:{default:{default:{default:"Entre na rotatria",name:"Entre na rotatria e saia na {way_name}",destination:"Entre na rotatria e saia sentido {destination}"},name:{default:"Entre em {rotary_name}",name:"Entre em {rotary_name} e saia em {way_name}",destination:"Entre em {rotary_name} e saia sentido {destination}"},exit:{default:"Entre na rotatria e pegue a {exit_number} sada",name:"Entre na rotatria e pegue a {exit_number} sada na {way_name}",destination:"Entre na rotatria e pegue a {exit_number} sada sentido {destination}"},name_exit:{default:"Entre em {rotary_name} e saia na {exit_number} sada",name:"Entre em {rotary_name} e saia na {exit_number} sada em {way_name}",destination:"Entre em {rotary_name} e saia na {exit_number} sada sentido {destination}"}}},roundabout:{default:{exit:{default:"Entre na rotatria e pegue a {exit_number} sada",name:"Entre na rotatria e pegue a {exit_number} sada na {way_name}",destination:"Entre na rotatria e pegue a {exit_number} sada sentido {destination}"},default:{default:"Entre na rotatria",name:"Entre na rotatria e saia na {way_name}",destination:"Entre na rotatria e saia sentido {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} em {way_name}",destination:"Siga {modifier} sentido {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda em {way_name}",destination:"Vire  esquerda sentido {destination}"},right:{default:"Vire  direita",name:"Vire  direita em {way_name}",destination:"Vire  direita sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em frente em {way_name}",destination:"Continue em frente sentido {destination}"}},"exit roundabout":{default:{default:"Saia da rotatria",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},"exit rotary":{default:{default:"Saia da rotatria",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},turn:{default:{default:"Siga {modifier}",name:"Siga {modifier} em {way_name}",destination:"Siga {modifier} sentido {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda em {way_name}",destination:"Vire  esquerda sentido {destination}"},right:{default:"Vire  direita",name:"Vire  direita em {way_name}",destination:"Vire  direita sentido {destination}"},straight:{default:"Siga em frente",name:"Siga em frente em {way_name}",destination:"Siga em frente sentido {destination}"}},"use lane":{no_lanes:{default:"Continue em frente"},default:{default:"{lane_instruction}"}}}}},{}],40:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"nordeste",east:"este",southeast:"sudeste",south:"sul",southwest:"sudoeste",west:"oeste",northwest:"noroeste"},modifier:{left:" esquerda",right:" direita","sharp left":"acentuadamente  esquerda","sharp right":"acentuadamente  direita","slight left":"ligeiramente  esquerda","slight right":"ligeiramente  direita",straight:"em frente",uturn:"inverso de marcha"},lanes:{xo:"Mantenha-se  direita",ox:"Mantenha-se  esquerda",xox:"Mantenha-se ao meio",oxo:"Mantenha-se  esquerda ou  direita"}},modes:{ferry:{default:"Apanhe o ferry",name:"Apanhe o ferry {way_name}",destination:"Apanhe o ferry para {destination}"}},phrase:{"two linked by distance":"{instruction_one}, depois, a {distance}, {instruction_two}","two linked":"{instruction_one}, depois {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sada {exit}"},arrive:{default:{default:"Chegou ao seu {nth} destino",upcoming:"Est a chegar ao seu {nth} destino",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name}"},left:{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},right:{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"sharp left":{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},"sharp right":{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"slight right":{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"slight left":{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},straight:{default:"Chegou ao seu {nth} destino, em frente",upcoming:"Est a chegar ao seu {nth} destino, em frente",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name}, em frente"}},continue:{default:{default:"Vire {modifier}",name:"Vire {modifier} para se manter em {way_name}",destination:"Vire {modifier} em direo a {destination}",exit:"Vire {modifier} para {way_name}"},straight:{default:"Continue em frente",name:"Continue em frente para se manter em {way_name}",destination:"Continue em direo a {destination}",distance:"Continue em frente por {distance}",namedistance:"Continue em {way_name} por {distance}"},"sharp left":{default:"Vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para se manter em {way_name}",destination:"Vire acentuadamente  esquerda em direo a {destination}"},"sharp right":{default:"Vire acentuadamente  direita",name:"Vire acentuadamente  direita para se manter em {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},"slight left":{default:"Vire ligeiramente  esquerda",name:"Vire ligeiramente  esquerda para se manter em {way_name}",destination:"Vire ligeiramente  esquerda em direo a {destination}"},"slight right":{default:"Vire ligeiramente  direita",name:"Vire ligeiramente  direita para se manter em {way_name}",destination:"Vire ligeiramente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha e continue em {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},depart:{default:{default:"Dirija-se para {direction}",name:"Dirija-se para {direction} em {way_name}",namedistance:"Dirija-se para {direction} em {way_name} por {distance}"}},"end of road":{default:{default:"Vire {modifier}",name:"Vire {modifier} para {way_name}",destination:"Vire {modifier} em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue em frente para {way_name}",destination:"Continue em frente em direo a {destination}"},uturn:{default:"No final da estrada faa uma inverso de marcha",name:"No final da estrada faa uma inverso de marcha para {way_name} ",destination:"No final da estrada faa uma inverso de marcha em direo a {destination}"}},fork:{default:{default:"Na bifurcao mantenha-se {modifier}",name:"Mantenha-se {modifier} para {way_name}",destination:"Mantenha-se {modifier} em direo a {destination}"},"slight left":{default:"Na bifurcao mantenha-se  esquerda",name:"Mantenha-se  esquerda para {way_name}",destination:"Mantenha-se  esquerda em direo a {destination}"},"slight right":{default:"Na bifurcao mantenha-se  direita",name:"Mantenha-se  direita para {way_name}",destination:"Mantenha-se  direita em direo a {destination}"},"sharp left":{default:"Na bifurcao vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para {way_name}",destination:"Vire acentuadamente  esquerda em direo a {destination}"},"sharp right":{default:"Na bifurcao vire acentuadamente  direita",name:"Vire acentuadamente  direita para {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},merge:{default:{default:"Una-se ao trfego {modifier}",name:"Una-se ao trfego {modifier} para {way_name}",destination:"Una-se ao trfego {modifier} em direo a {destination}"},straight:{default:"Una-se ao trfego",name:" Una-se ao trfego para {way_name}",destination:"Una-se ao trfego em direo a {destination}"},"slight left":{default:"Una-se ao trfego  esquerda",name:"Una-se ao trfego  esquerda para {way_name}",destination:"Una-se ao trfego  esquerda em direo a {destination}"},"slight right":{default:"Una-se ao trfego  direita",name:"Una-se ao trfego  direita para {way_name}",destination:"Una-se ao trfego  direita em direo a {destination}"},"sharp left":{default:"Una-se ao trfego  esquerda",name:"Una-se ao trfego  esquerda para {way_name}",destination:"Una-se ao trfego  esquerda em direo a {destination}"},"sharp right":{default:"Una-se ao trfego  direita",name:"Una-se ao trfego  direita para {way_name}",destination:"Una-se ao trfego  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} para {way_name}",destination:"Continue {modifier} em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue para {way_name}",destination:"Continue em direo a {destination}"},"sharp left":{default:"Vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para {way_name}",destination:"Vire acentuadamente  esquerda em direo a{destination}"},"sharp right":{default:"Vire acentuadamente  direita",name:"Vire acentuadamente  direita para {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},"slight left":{default:"Continue ligeiramente  esquerda",name:"Continue ligeiramente  esquerda para {way_name}",destination:"Continue ligeiramente  esquerda em direo a {destination}"},"slight right":{default:"Continue ligeiramente  direita",name:"Continue ligeiramente  direita para {way_name}",destination:"Continue ligeiramente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} para {way_name}",destination:"Continue {modifier} em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},"off ramp":{default:{default:"Saia na sada",name:"Saia na sada para {way_name}",destination:"Saia na sada em direo a {destination}",exit:"Saia na sada {exit}",exit_destination:"Saia na sada {exit} em direo a {destination}"},left:{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},right:{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"},"sharp left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},"sharp right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"},"slight left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},"slight right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"}},"on ramp":{default:{default:"Saia na sada",name:"Saia na sada para {way_name}",destination:"Saia na sada em direo a {destination}"},left:{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},right:{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"},"sharp left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},"sharp right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"},"slight left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},"slight right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"}},rotary:{default:{default:{default:"Entre na rotunda",name:"Entre na rotunda e saia para {way_name}",destination:"Entre na rotunda e saia em direo a {destination}"},name:{default:"Entre em {rotary_name}",name:"Entre em {rotary_name} e saia para {way_name}",destination:"Entre em {rotary_name} e saia em direo a {destination}"},exit:{default:"Entre na rotunda e saia na sada {exit_number}",name:"Entre na rotunda e saia na sada {exit_number} para {way_name}",destination:"Entre na rotunda e saia na sada {exit_number} em direo a {destination}"},name_exit:{default:"Entre em {rotary_name} e saia na sada {exit_number}",name:"Entre em {rotary_name} e saia na sada {exit_number} para {way_name}",destination:"Entre em{rotary_name} e saia na sada {exit_number} em direo a {destination}"}}},roundabout:{default:{exit:{default:"Entre na rotunda e saia na sada {exit_number}",name:"Entre na rotunda e saia na sada {exit_number} para {way_name}",destination:"Entre na rotunda e saia na sada {exit_number} em direo a {destination}"},default:{default:"Entre na rotunda",name:"Entre na rotunda e saia para {way_name}",destination:"Entre na rotunda e saia em direo a {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} para {way_name}",destination:"Siga {modifier} em direo a {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda para {way_name}",destination:"Vire  esquerda em direo a {destination}"},right:{default:"Vire  direita",name:"Vire  direita para {way_name}",destination:"Vire  direita em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue em frente para {way_name}",destination:"Continue em frente em direo a {destination}"}},"exit roundabout":{default:{default:"Saia da rotunda",name:"Saia da rotunda para {way_name}",destination:"Saia da rotunda em direo a {destination}"}},"exit rotary":{default:{default:"Saia da rotunda",name:"Saia da rotunda para {way_name}",destination:"Saia da rotunda em direo a {destination}"}},turn:{default:{default:"Siga {modifier}",name:"Siga {modifier} para{way_name}",destination:"Siga {modifier} em direo a {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda para {way_name}",destination:"Vire  esquerda em direo a {destination}"},right:{default:"Vire  direita",name:"Vire  direita para {way_name}",destination:"Vire  direita em direo a {destination}"},straight:{default:"V em frente",name:"V em frente para {way_name}",destination:"V em frente em direo a {destination}"}},"use lane":{no_lanes:{default:"Continue em frente"},default:{default:"{lane_instruction}"}}}}},{}],41:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"prima",2:"a doua",3:"a treia",4:"a patra",5:"a cincea",6:"a asea",7:"a aptea",8:"a opta",9:"a noua",10:"a zecea"},direction:{north:"nord",northeast:"nord-est",east:"est",southeast:"sud-est",south:"sud",southwest:"sud-vest",west:"vest",northwest:"nord-vest"},modifier:{left:"stnga",right:"dreapta","sharp left":"puternic stnga","sharp right":"puternic dreapta","slight left":"uor stnga","slight right":"uor dreapta",straight:"nainte",uturn:"ntoarcere"},lanes:{xo:"inei stnga",ox:"inei dreapta",xox:"inei pe mijloc",oxo:"inei pe laterale"}},modes:{ferry:{default:"Luai feribotul",name:"Luai feribotul {way_name}",destination:"Luai feribotul spre {destination}"}},phrase:{"two linked by distance":"{instruction_one}, apoi n {distance}, {instruction_two}","two linked":"{instruction_one} apoi {instruction_two}","one in distance":"n {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"ieirea {exit}"},arrive:{default:{default:"Ai ajuns la {nth} destinaie",upcoming:"Ai ajuns la {nth} destinaie",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}"},left:{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},right:{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"sharp left":{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},"sharp right":{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"slight right":{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"slight left":{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},straight:{default:"Ai ajuns la {nth} destinaie, n fa",upcoming:"Ai ajuns la {nth} destinaie, n fa",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, n fa"}},continue:{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}",exit:"Virai {modifier} pe {way_name}"},straight:{default:"Mergei nainte",name:"Mergei nainte pe {way_name}",destination:"Continuai spre {destination}",distance:"Mergei nainte pentru {distance}",namedistance:"Continuai pe {way_name} pentru {distance}"},"sharp left":{default:"Virai puternic la stnga",name:"Virai puternic la stnga pe {way_name}",destination:"Virai puternic la stnga spre {destination}"},"sharp right":{default:"Virai puternic la dreapta",name:"Virai puternic la dreapta pe {way_name}",destination:"Virai puternic la dreapta spre {destination}"},"slight left":{default:"Virai uor la stnga",name:"Virai uor la stnga pe {way_name}",destination:"Virai uor la stnga spre {destination}"},"slight right":{default:"Virai uor la dreapta",name:"Virai uor la dreapta pe {way_name}",destination:"Virai uor la dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v i continuai pe {way_name}",destination:"ntoarcei-v spre {destination}"}},depart:{default:{default:"Mergei spre {direction}",name:"Mergei spre {direction} pe {way_name}",namedistance:"Mergei spre {direction} pe {way_name} pentru {distance}"}},"end of road":{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}"},straight:{default:"Continuai nainte",name:"Continuai nainte pe {way_name}",destination:"Continuai nainte spre {destination}"},uturn:{default:"ntoarcei-v la sfritul drumului",name:"ntoarcei-v pe {way_name} la sfritul drumului",destination:"ntoarcei-v spre {destination} la sfritul drumului"}},fork:{default:{default:"inei {modifier} la bifurcaie",name:"inei {modifier} la bifurcaie pe {way_name}",destination:"inei {modifier} la bifurcaie spre {destination}"},"slight left":{default:"inei pe stnga la bifurcaie",name:"inei pe stnga la bifurcaie pe {way_name}",destination:"inei pe stnga la bifurcaie spre {destination}"},"slight right":{default:"inei pe dreapta la bifurcaie",name:"inei pe dreapta la bifurcaie pe {way_name}",destination:"inei pe dreapta la bifurcaie spre {destination}"},"sharp left":{default:"Virai puternic stnga la bifurcaie",name:"Virai puternic stnga la bifurcaie pe {way_name}",destination:"Virai puternic stnga la bifurcaie spre {destination}"},"sharp right":{default:"Virai puternic dreapta la bifurcaie",name:"Virai puternic dreapta la bifurcaie pe {way_name}",destination:"Virai puternic dreapta la bifurcaie spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},merge:{default:{default:"Intrai n {modifier}",name:"Intrai n {modifier} pe {way_name}",destination:"Intrai n {modifier} spre {destination}"},straight:{default:"Intrai",name:"Intrai pe {way_name}",destination:"Intrai spre {destination}"},"slight left":{default:"Intrai n stnga",name:"Intrai n stnga pe {way_name}",destination:"Intrai n stnga spre {destination}"},"slight right":{default:"Intrai n dreapta",name:"Intrai n dreapta pe {way_name}",destination:"Intrai n dreapta spre {destination}"},"sharp left":{default:"Intrai n stnga",name:"Intrai n stnga pe {way_name}",destination:"Intrai n stnga spre {destination}"},"sharp right":{default:"Intrai n dreapta",name:"Intrai n dreapta pe {way_name}",destination:"Intrai n dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},"new name":{default:{default:"Continuai {modifier}",name:"Continuai {modifier} pe {way_name}",destination:"Continuai {modifier} spre {destination}"},straight:{default:"Continuai nainte",name:"Continuai pe {way_name}",destination:"Continuai spre {destination}"},"sharp left":{default:"Virai puternic la stnga",name:"Virai puternic la stnga pe {way_name}",destination:"Virai puternic la stnga spre {destination}"},"sharp right":{default:"Virai puternic la dreapta",name:"Virai puternic la dreapta pe {way_name}",destination:"Virai puternic la dreapta spre {destination}"},"slight left":{default:"Continuai uor la stnga",name:"Continuai uor la stnga pe {way_name}",destination:"Continuai uor la stnga spre {destination}"},"slight right":{default:"Continuai uor la dreapta",name:"Continuai uor la dreapta pe {way_name}",destination:"Continuai uor la dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},notification:{default:{default:"Continuai {modifier}",name:"Continuai {modifier} pe {way_name}",destination:"Continuai {modifier} spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},"off ramp":{default:{default:"Urmai breteaua",name:"Urmai breteaua pe {way_name}",destination:"Urmai breteaua spre {destination}",exit:"Urmai ieirea {exit}",exit_destination:"Urmai ieirea {exit} spre {destination}"},left:{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},right:{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"},"sharp left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},"sharp right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"},"slight left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},"slight right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"}},"on ramp":{default:{default:"Urmai breteaua de intrare",name:"Urmai breteaua pe {way_name}",destination:"Urmai breteaua spre {destination}"},left:{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},right:{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"},"sharp left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},"sharp right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"},"slight left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},"slight right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"}},rotary:{default:{default:{default:"Intrai n sensul giratoriu",name:"Intrai n sensul giratoriu i ieii pe {way_name}",destination:"Intrai n sensul giratoriu i ieii spre {destination}"},name:{default:"Intrai n {rotary_name}",name:"Intrai n {rotary_name} i ieii pe {way_name}",destination:"Intrai n {rotary_name} i ieii spre {destination}"},exit:{default:"Intrai n sensul giratoriu i urmai {exit_number} ieire",name:"Intrai n sensul giratoriu i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n sensul giratoriu i urmai {exit_number} ieire spre {destination}"},name_exit:{default:"Intrai n {rotary_name} i urmai {exit_number} ieire",name:"Intrai n {rotary_name} i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n  {rotary_name} i urmai {exit_number} ieire spre {destination}"}}},roundabout:{default:{exit:{default:"Intrai n sensul giratoriu i urmai {exit_number} ieire",name:"Intrai n sensul giratoriu i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n sensul giratoriu i urmai {exit_number} ieire spre {destination}"},default:{default:"Intrai n sensul giratoriu",name:"Intrai n sensul giratoriu i ieii pe {way_name}",destination:"Intrai n sensul giratoriu i ieii spre {destination}"}}},"roundabout turn":{default:{default:"La sensul giratoriu virai {modifier}",name:"La sensul giratoriu virai {modifier} pe {way_name}",destination:"La sensul giratoriu virai {modifier} spre {destination}"},left:{default:"La sensul giratoriu virai la stnga",name:"La sensul giratoriu virai la stnga pe {way_name}",destination:"La sensul giratoriu virai la stnga spre {destination}"},right:{default:"La sensul giratoriu virai la dreapta",name:"La sensul giratoriu virai la dreapta pe {way_name}",destination:"La sensul giratoriu virai la dreapta spre {destination}"},straight:{default:"La sensul giratoriu continuai nainte",name:"La sensul giratoriu continuai nainte pe {way_name}",destination:"La sensul giratoriu continuai nainte spre {destination}"}},"exit roundabout":{default:{default:"Ieii din sensul giratoriu",name:"Ieii din sensul giratoriu pe {way_name}",destination:"Ieii din sensul giratoriu spre {destination}"}},"exit rotary":{default:{default:"Ieii din sensul giratoriu",name:"Ieii din sensul giratoriu pe {way_name}",destination:"Ieii din sensul giratoriu spre {destination}"}},turn:{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}"},left:{default:"Virai la stnga",name:"Virai la stnga pe {way_name}",destination:"Virai la stnga spre {destination}"},right:{default:"Virai la dreapta",name:"Virai la dreapta pe {way_name}",destination:"Virai la dreapta spre {destination}"},straight:{default:"Mergei nainte",name:"Mergei nainte pe {way_name}",destination:"Mergei nainte spre {destination}"}},"use lane":{no_lanes:{default:"Mergei nainte"},default:{default:"{lane_instruction}"}}}}},{}],42:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"-",east:"",southeast:"-",south:"",southwest:"-",west:"",northwest:"-"},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:" "},lanes:{xo:" ",ox:" ",xox:" ",oxo:"   "}},modes:{ferry:{default:"  ",name:"   {way_name}",destination:"     {destination}"}},phrase:{"two linked by distance":"{instruction_one},   {distance} {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":" {exit}"},arrive:{default:{default:"   {nth}  ",upcoming:"   {nth}  ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name}"},left:{default:"   {nth}  ,   ",upcoming:"   {nth}  ,   ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},   "},right:{default:"   {nth}  ,   ",upcoming:"   {nth}  ,   ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},   "},"sharp left":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"sharp right":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"slight right":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"slight left":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},straight:{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "}},continue:{default:{default:" {modifier}",name:" {modifier}  {way_name:dative}",destination:" {modifier}   {destination}",exit:" {modifier}  {way_name:accusative}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}",distance:"  {distance}",namedistance:"  {distance}  {way_name:dative}"},"sharp left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"sharp right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},uturn:{default:"",name:"     {way_name:dative}",destination:"   {destination}"}},depart:{default:{default:"  {direction} ",name:"  {direction}   {way_name:dative}",namedistance:" {distance}  {direction}   {way_name:dative}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},uturn:{default:"   ",name:"   {way_name:genitive}",destination:"      {destination}"}},fork:{default:{default:"   {modifier}",name:"   {modifier}  {way_name:accusative}",destination:"   {modifier}   {destination}"},"slight left":{default:"   ",name:"     {way_name:accusative}",destination:"         {destination}"},"slight right":{default:"   ",name:"     {way_name:accusative}",destination:"         {destination}"},"sharp left":{default:"    ",name:"    {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"    ",name:"    {way_name:accusative}",destination:"        {destination}"},uturn:{default:"  ",name:"    {way_name:prepositional}",destination:"        {destination}"}},merge:{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},"slight left":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"slight right":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"sharp left":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"sharp right":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"   {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},"sharp left":{default:"  ",name:"    {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"  ",name:"    {way_name:accusative}",destination:"        {destination}"},"slight left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"      {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name:dative}",destination:" {modifier}   {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"      {destination}"}},"off ramp":{default:{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}",exit:"   {exit}",exit_destination:"   {exit}   {destination}"},left:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit} ",exit_destination:"   {exit}    {destination}"},right:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit} ",exit_destination:"   {exit}    {destination}"},"sharp left":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"},"sharp right":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"},"slight left":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit}",exit_destination:"    {exit}   {destination}"},"slight right":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"}},"on ramp":{default:{default:"  ",name:"    {way_name:accusative}",destination:"       {destination}"},left:{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},right:{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"sharp left":{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"slight left":{default:"     ",name:"   {way_name:accusative}",destination:"      {destination}"},"slight right":{default:"     ",name:"   {way_name:accusative}",destination:"      {destination}"}},rotary:{default:{default:{default:"    ",name:"     {way_name:accusative}",destination:"      {destination}"},name:{default:"   {rotary_name:dative}",name:" {rotary_name:prepositional}   {way_name:accusative}",destination:" {rotary_name:prepositional}    {destination}"},exit:{default:"     {exit_number} ",name:"     {exit_number}   {way_name:accusative}",destination:"     {exit_number}    {destination}"},name_exit:{default:" {rotary_name:prepositional}   {exit_number} ",name:" {rotary_name:prepositional}   {exit_number}   {way_name:accusative}",destination:" {rotary_name:prepositional}   {exit_number}    {destination}"}}},roundabout:{default:{exit:{default:"     {exit_number} ",name:"     {exit_number}   {way_name:accusative}",destination:"     {exit_number}    {destination}"},default:{default:"    ",name:"     {way_name:accusative}",destination:"      {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},right:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"}},"exit roundabout":{default:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}"}},"exit rotary":{default:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}    {destination}"},left:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},right:{default:" ",name:"   {way_name:accusative}",destination:"     {destination}"},straight:{default:" ",name:"  {way_name:dative}",destination:"   {destination}"}},"use lane":{no_lanes:{default:"  "},default:{default:"{lane_instruction}"}}}}},{}],43:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1:a",2:"2:a",3:"3:e",4:"4:e",5:"5:e",6:"6:e",7:"7:e",8:"8:e",9:"9:e",10:"10:e"},direction:{north:"norr",northeast:"nordost",east:"ster",southeast:"sydost",south:"sder",southwest:"sydvst",west:"vster",northwest:"nordvst"},modifier:{left:"vnster",right:"hger","sharp left":"vnster","sharp right":"hger","slight left":"vnster","slight right":"hger",straight:"rakt fram",uturn:"U-svng"},lanes:{xo:"Hll till hger",ox:"Hll till vnster",xox:"Hll till mitten",oxo:"Hll till vnster eller hger"}},modes:{ferry:{default:"Ta frjan",name:"Ta frjan p {way_name}",destination:"Ta frjan mot {destination}"}},phrase:{"two linked by distance":"{instruction_one}, sedan efter {distance}, {instruction_two}","two linked":"{instruction_one}, sedan {instruction_two}","one in distance":"Om {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Du r framme vid din {nth} destination",upcoming:"Du r snart framme vid din {nth} destination",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}"},left:{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},right:{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"sharp left":{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},"sharp right":{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"slight right":{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"slight left":{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},straight:{default:"Du r framme vid din {nth} destination, rakt fram",upcoming:"Du r snart framme vid din {nth} destination, rakt fram",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, rakt fram"}},continue:{default:{default:"Svng {modifier}",name:"Svng {modifier} och fortstt p {way_name}",destination:"Svng {modifier} mot {destination}",exit:"Svng {modifier} in p {way_name}"},straight:{default:"Fortstt rakt fram",name:"Kr rakt fram och fortstt p {way_name}",destination:"Fortstt mot {destination}",distance:"Fortstt rakt fram i {distance}",namedistance:"Fortstt p {way_name} i {distance}"},"sharp left":{default:"Svng vnster",name:"Svng vnster och fortstt p {way_name}",destination:"Svng vnster mot {destination}"},"sharp right":{default:"Svng hger",name:"Svng hger och fortstt p {way_name}",destination:"Svng hger mot {destination}"},"slight left":{default:"Svng vnster",name:"Svng vnster och fortstt p {way_name}",destination:"Svng vnster mot {destination}"},"slight right":{default:"Svng hger",name:"Svng hger och fortstt p {way_name}",destination:"Svng hger mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng och fortstt p {way_name}",destination:"Gr en U-svng mot {destination}"}},depart:{default:{default:"Kr t {direction}",name:"Kr t {direction} p {way_name}",namedistance:"Kr {distance} t {direction} p {way_name}"}},"end of road":{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt rakt fram in p {way_name}",destination:"Fortstt rakt fram mot {destination}"},uturn:{default:"Gr en U-svng i slutet av vgen",name:"Gr en U-svng in p {way_name} i slutet av vgen",destination:"Gr en U-svng mot {destination} i slutet av vgen"}},fork:{default:{default:"Hll till {modifier} dr vgen delar sig",name:"Hll till {modifier} in p {way_name}",destination:"Hll till {modifier} mot {destination}"},"slight left":{default:"Hll till vnster dr vgen delar sig",name:"Hll till vnster in p {way_name}",destination:"Hll till vnster mot {destination}"},"slight right":{default:"Hll till hger dr vgen delar sig",name:"Hll till hger in p {way_name}",destination:"Hll till hger mot {destination}"},"sharp left":{default:"Svng vnster dr vgen delar sig",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},"sharp right":{default:"Svng hger dr vgen delar sig",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},merge:{default:{default:"Byt till {modifier} krflt",name:"Byt till {modifier} krflt, in p {way_name}",destination:"Byt till {modifier} krflt, mot {destination}"},straight:{default:"Fortstt",name:"Kr in p {way_name}",destination:"Kr mot {destination}"},"slight left":{default:"Byt till vnstra krfltet",name:"Byt till vnstra krfltet, in p {way_name}",destination:"Byt till vnstra krfltet, mot {destination}"},"slight right":{default:"Byt till hgra krfltet",name:"Byt till hgra krfltet, in p {way_name}",destination:"Byt till hgra krfltet, mot {destination}"},"sharp left":{default:"Byt till vnstra krfltet",name:"Byt till vnstra krfltet, in p {way_name}",destination:"Byt till vnstra krfltet, mot {destination}"},"sharp right":{default:"Byt till hgra krfltet",name:"Byt till hgra krfltet, in p {way_name}",destination:"Byt till hgra krfltet, mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},"new name":{default:{default:"Fortstt {modifier}",name:"Fortstt {modifier} p {way_name}",destination:"Fortstt {modifier} mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt in p {way_name}",destination:"Fortstt mot {destination}"},"sharp left":{default:"Gr en skarp vnstersvng",name:"Gr en skarp vnstersvng in p {way_name}",destination:"Gr en skarp vnstersvng mot {destination}"},"sharp right":{default:"Gr en skarp hgersvng",name:"Gr en skarp hgersvng in p {way_name}",destination:"Gr en skarp hgersvng mot {destination}"},"slight left":{default:"Fortstt med ltt vnstersvng",name:"Fortstt med ltt vnstersvng in p {way_name}",destination:"Fortstt med ltt vnstersvng mot {destination}"},"slight right":{default:"Fortstt med ltt hgersvng",name:"Fortstt med ltt hgersvng in p {way_name}",destination:"Fortstt med ltt hgersvng mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},notification:{default:{default:"Fortstt {modifier}",name:"Fortstt {modifier} p {way_name}",destination:"Fortstt {modifier} mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},"off ramp":{default:{default:"Ta avfarten",name:"Ta avfarten in p {way_name}",destination:"Ta avfarten mot {destination}",exit:"Ta avfart {exit} ",exit_destination:"Ta avfart {exit} mot {destination}"},left:{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart {exit} till vnster mot {destination}"},right:{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"},"sharp left":{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart {exit} till vnster mot {destination}"},"sharp right":{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"},"slight left":{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart{exit} till vnster mot {destination}"},"slight right":{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"}},"on ramp":{default:{default:"Ta pfarten",name:"Ta pfarten in p {way_name}",destination:"Ta pfarten mot {destination}"},left:{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},right:{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"},"sharp left":{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},"sharp right":{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"},"slight left":{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},"slight right":{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"}},rotary:{default:{default:{default:"Kr in i rondellen",name:"I rondellen, ta avfarten in p {way_name}",destination:"I rondellen, ta av mot {destination}"},name:{default:"Kr in i {rotary_name}",name:"I {rotary_name}, ta av in p {way_name}",destination:"I {rotary_name}, ta av mot {destination}"},exit:{default:"I rondellen, ta {exit_number} avfarten",name:"I rondellen, ta {exit_number} avfarten in p {way_name}",destination:"I rondellen, ta {exit_number} avfarten mot {destination}"},name_exit:{default:"I {rotary_name}, ta {exit_number} avfarten",name:"I {rotary_name}, ta {exit_number}  avfarten in p {way_name}",destination:"I {rotary_name}, ta {exit_number} avfarten mot {destination}"}}},roundabout:{default:{exit:{default:"I rondellen, ta {exit_number} avfarten",name:"I rondellen, ta {exit_number} avfarten in p {way_name}",destination:"I rondellen, ta {exit_number} avfarten mot {destination}"},default:{default:"Kr in i rondellen",name:"I rondellen, ta avfarten in p {way_name}",destination:"I rondellen, ta av mot {destination}"}}},"roundabout turn":{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},left:{default:"Svng vnster",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},right:{default:"Svng hger",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt rakt fram in p {way_name}",destination:"Fortstt rakt fram mot {destination}"}},"exit roundabout":{default:{default:"Kr ut ur rondellen",name:"Kr ut ur rondellen in p {way_name}",destination:"Kr ut ur rondellen mot {destination}"}},"exit rotary":{default:{default:"Kr ut ur rondellen",name:"Kr ut ur rondellen in p {way_name}",destination:"Kr ut ur rondellen mot {destination}"}},turn:{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},left:{default:"Svng vnster",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},right:{default:"Svng hger",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},straight:{default:"Kr rakt fram",name:"Kr rakt fram in p {way_name}",destination:"Kr rakt fram mot {destination}"}},"use lane":{no_lanes:{default:"Fortstt rakt fram"},default:{default:"{lane_instruction}"}}}}},{}],44:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"birinci",2:"ikinci",3:"nc",4:"drdnc",5:"beinci",6:"altnc",7:"yedinci",8:"sekizinci",9:"dokuzuncu",10:"onuncu"},direction:{north:"kuzey",northeast:"kuzeydou",east:"dou",southeast:"gneydou",south:"gney",southwest:"gneybat",west:"bat",northwest:"kuzeybat"},modifier:{left:"sol",right:"sa","sharp left":"keskin sol","sharp right":"keskin sa","slight left":"hafif sol","slight right":"hafif sa",straight:"dz",uturn:"U dn"},lanes:{xo:"Sada kaln",ox:"Solda kaln",xox:"Ortada kaln",oxo:"Solda veya sada kaln"}},modes:{ferry:{default:"Vapur kullan",name:"{way_name} vapurunu kullan",destination:"{destination} istikametine giden vapuru kullan"}},phrase:{"two linked by distance":"{instruction_one} ve {distance} sonra {instruction_two}","two linked":"{instruction_one} ve sonra {instruction_two}","one in distance":"{distance} sonra, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"{nth} hedefinize ulatnz",upcoming:"{nth} hedefinize ulatnz",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz"},left:{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},right:{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"sharp left":{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},"sharp right":{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"slight right":{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"slight left":{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},straight:{default:"{nth} hedefinize ulatnz, hedefiniz karnzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz karnzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz karnzdadr"}},continue:{default:{default:"{modifier} yne dn",name:"{way_name} zerinde kalmak iin {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn",exit:"{way_name} zerinde {modifier} yne dn"},straight:{default:"Dz devam edin",name:"{way_name} zerinde kalmak iin dz devam et",destination:"{destination} istikametinde devam et",distance:"{distance} boyunca dz devam et",namedistance:"{distance} boyunca {way_name} zerinde devam et"},"sharp left":{default:"Sola keskin dn yap",name:"{way_name} zerinde kalmak iin sola keskin dn yap",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"Saa keskin dn yap",name:"{way_name} zerinde kalmak iin saa keskin dn yap",destination:"{destination} istikametinde saa keskin dn yap"},"slight left":{default:"Sola hafif dn yap",name:"{way_name} zerinde kalmak iin sola hafif dn yap",destination:"{destination} istikametinde sola hafif dn yap"},"slight right":{default:"Saa hafif dn yap",name:"{way_name} zerinde kalmak iin saa hafif dn yap",destination:"{destination} istikametinde saa hafif dn yap"},uturn:{default:"U dn yapn",name:"Bir U-dn yap ve {way_name} devam et",destination:"{destination} istikametinde bir U-dn yap"}},depart:{default:{default:"{direction} tarafna ynelin",name:"{way_name} zerinde {direction} yne git",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"{modifier} tarafa dnn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},straight:{default:"Dz devam edin",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"},uturn:{default:"Yolun sonunda U dn yapn",name:"Yolun sonunda {way_name} zerinde bir U-dn yap",destination:"Yolun sonunda {destination} istikametinde bir U-dn yap"}},fork:{default:{default:"Yol ayrmnda {modifier} ynde kal",name:"{way_name} zerindeki yol ayrmnda {modifier} ynde kal",destination:"{destination} istikametindeki yol ayrmnda {modifier} ynde kal"},"slight left":{default:"ataln solundan devam edin",name:"ataln solundan {way_name} yoluna doru ",destination:"{destination} istikametindeki yol ayrmnda solda kal"},"slight right":{default:"ataln sandan devam edin",name:"{way_name} zerindeki yol ayrmnda sada kal",destination:"{destination} istikametindeki yol ayrmnda sada kal"},"sharp left":{default:"atalda keskin sola dnn",name:"{way_name} yoluna doru sola keskin dn yapn",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"atalda keskin saa dnn",name:"{way_name} yoluna doru saa keskin dn yapn",destination:"{destination} istikametinde saa keskin dn yap"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},merge:{default:{default:"{modifier} yne gir",name:"{way_name} zerinde {modifier} yne gir",destination:"{destination} istikametinde {modifier} yne gir"},straight:{default:"dz yne gir",name:"{way_name} zerinde dz yne gir",destination:"{destination} istikametinde dz yne gir"},"slight left":{default:"Sola gir",name:"{way_name} zerinde sola gir",destination:"{destination} istikametinde sola gir"},"slight right":{default:"Saa gir",name:"{way_name} zerinde saa gir",destination:"{destination} istikametinde saa gir"},"sharp left":{default:"Sola gir",name:"{way_name} zerinde sola gir",destination:"{destination} istikametinde sola gir"},"sharp right":{default:"Saa gir",name:"{way_name} zerinde saa gir",destination:"{destination} istikametinde saa gir"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},"new name":{default:{default:"{modifier} ynde devam et",name:"{way_name} zerinde {modifier} ynde devam et",destination:"{destination} istikametinde {modifier} ynde devam et"},straight:{default:"Dz devam et",name:"{way_name} zerinde devam et",destination:"{destination} istikametinde devam et"},"sharp left":{default:"Sola keskin dn yapn",name:"{way_name} yoluna doru sola keskin dn yapn",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"Saa keskin dn yapn",name:"{way_name} yoluna doru saa keskin dn yapn",destination:"{destination} istikametinde saa keskin dn yap"},"slight left":{default:"Hafif soldan devam edin",name:"{way_name} zerinde hafif solda devam et",destination:"{destination} istikametinde hafif solda devam et"},"slight right":{default:"Hafif sadan devam edin",name:"{way_name} zerinde hafif sada devam et",destination:"{destination} istikametinde hafif sada devam et"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},notification:{default:{default:"{modifier} ynde devam et",name:"{way_name} zerinde {modifier} ynde devam et",destination:"{destination} istikametinde {modifier} ynde devam et"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},"off ramp":{default:{default:"Balant yoluna ge",name:"{way_name} zerindeki balant yoluna ge",destination:"{destination} istikametine giden balant yoluna ge",exit:"{exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} k yoluna ge"},left:{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},right:{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"},"sharp left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},"sharp right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"},"slight left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},"slight right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"}},"on ramp":{default:{default:"Balant yoluna ge",name:"{way_name} zerindeki balant yoluna ge",destination:"{destination} istikametine giden balant yoluna ge"},left:{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},right:{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"},"sharp left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},"sharp right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"},"slight left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},"slight right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"}},rotary:{default:{default:{default:"Dnel kavaa gir",name:"Dnel kavaa gir ve {way_name} zerinde k",destination:"Dnel kavaa gir ve {destination} istikametinde k"},name:{default:"{rotary_name} dnel kavaa gir",name:"{rotary_name} dnel kavaa gir ve {way_name} zerinde k",destination:"{rotary_name} dnel kavaa gir ve {destination} istikametinde k"},exit:{default:"Dnel kavaa gir ve {exit_number} numaral ka gir",name:"Dnel kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"Dnel kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"},name_exit:{default:"{rotary_name} dnel kavaa gir ve {exit_number} numaral ka gir",name:"{rotary_name} dnel kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"{rotary_name} dnel kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"}}},roundabout:{default:{exit:{default:"Gbekli kavaa gir ve {exit_number} numaral ka gir",name:"Gbekli kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"Gbekli kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"},default:{default:"Gbekli kavaa gir",name:"Gbekli kavaa gir ve {way_name} zerinde k",destination:"Gbekli kavaa gir ve {destination} istikametinde k"}}},"roundabout turn":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},"exit roundabout":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},"exit rotary":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},turn:{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dnn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dnn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz git",name:"{way_name} zerinde dz git",destination:"{destination} istikametinde dz git"}},"use lane":{no_lanes:{default:"Dz devam edin"},default:{default:"{lane_instruction}"}}}}},{}],45:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"",northeast:" ",east:"",southeast:" ",south:"",southwest:" ",west:"",northwest:" "},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:""},lanes:{xo:" ",ox:" ",xox:"  ",oxo:"   "}},modes:{ferry:{default:" ",name:"  {way_name}",destination:"    {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ,  {distance}, {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"' {exit}"},arrive:{default:{default:"    {nth}  ",upcoming:"    {nth}  ",short:" ","short-upcoming":" ",named:"   {waypoint_name}"},left:{default:"    {nth}  ,  ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},right:{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"sharp left":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"sharp right":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"slight right":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"slight left":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},straight:{default:"    {nth}  ,     ",upcoming:"    {nth}  ,   ",short:" ","short-upcoming":" ",named:"   {waypoint_name}   "}},continue:{default:{default:" {modifier}",name:"{modifier}   {way_name}",destination:" {modifier}   {destination}",exit:" {modifier}  {way_name}"},straight:{default:"  ",name:"     {way_name}",destination:"   {destination}",distance:"   {distance}",namedistance:"   {way_name} {distance}"},"sharp left":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"sharp right":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"slight left":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"slight right":{default:"  ",name:"      {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"     {way_name}",destination:"    {destination}"}},depart:{default:{default:"  {direction}",name:"  {direction}  {way_name}",namedistance:"  {direction}  {way_name} {distance}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},straight:{default:"  ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:"    ",name:"   {way_name}   ",destination:"    {destination}   "}},fork:{default:{default:"   {modifier}",name:" {modifier}    {way_name}",destination:" {modifier}   {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"    {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"    {destination}"},"sharp left":{default:"    ",name:"    {way_name}",destination:"     {destination}"},"sharp right":{default:"    ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},merge:{default:{default:"   {modifier}",name:"   {modifier}  {way_name}",destination:"   {modifier}   {destination}"},straight:{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"  {way_name}",destination:"   {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"off ramp":{default:{default:"  ",name:"    {way_name}",destination:"     {destination}",exit:" ' {exit}",exit_destination:" ' {exit}   {destination}"},left:{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},right:{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"}},"on ramp":{default:{default:"  ",name:"    {way_name}",destination:"     {destination}"},left:{default:"   ",name:"     {way_name}",destination:"      {destination}"},right:{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}"}},rotary:{default:{default:{default:"  ",name:"    {way_name}",destination:"     {destination}"},name:{default:"  {rotary_name}",name:"  {rotary_name}    {way_name}",destination:"  {rotary_name}     {destination}"},exit:{default:"      {exit_number} '",name:"      {exit_number} '  {way_name}",destination:"      {exit_number} '   {destination}"},name_exit:{default:"  {rotary_name}    {exit_number} '",name:"  {rotary_name}    {exit_number} '  {way_name}",destination:"  {rotary_name}    {exit_number} '   {destination}"}}},roundabout:{default:{exit:{default:"      {exit_number} '",name:"      {exit_number} '  {way_name}",destination:"      {exit_number} '   {destination}"},default:{default:"  ",name:"    {way_name}",destination:"     {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name}",destination:"    {destination}"},right:{default:" ",name:"   {way_name}",destination:"    {destination}"},straight:{default:" ",name:"    {way_name}",destination:"     {destination}"}},"exit roundabout":{default:{default:" ",name:"   {way_name} ",destination:"    {destination}"}},"exit rotary":{default:{default:" ",name:"   {way_name} ",destination:"    {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name}",destination:"    {destination}"},right:{default:" ",name:"   {way_name}",destination:"    {destination}"},straight:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"use lane":{no_lanes:{default:"  "},default:{default:"{lane_instruction}"}}}}},{}],46:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"u tin",2:"th 2",3:"th 3",4:"th 4",5:"th 5",6:"th 6",7:"th 7",8:"th 8",9:"th 9",10:"th 10"},direction:{north:"bc",northeast:"ng bc",east:"ng",southeast:"ng nam",south:"nam",southwest:"ty nam",west:"ty",northwest:"ty bc"},modifier:{left:"tri",right:"phi","sharp left":"tri gt","sharp right":"phi gt","slight left":"tri nghing","slight right":"phi nghing",straight:"thng",uturn:"ngc"},lanes:{xo:"i bn phi",ox:"i bn tri",xox:"i vo gia",oxo:"i bn tri hay bn phi"}},modes:{ferry:{default:"Ln ph",name:"Ln ph {way_name}",destination:"Ln ph i {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ri {distance} na th {instruction_two}","two linked":"{instruction_one}, ri {instruction_two}","one in distance":"{distance} na th {instruction_one}","name and ref":"{name} ({ref})","exit with number":"li ra {exit}"},arrive:{default:{default:"n ni {nth}",upcoming:"n ni {nth}",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}"},left:{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},right:{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"sharp left":{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},"sharp right":{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"slight right":{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"slight left":{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},straight:{default:"n ni {nth}  trc mt",upcoming:"n ni {nth}  trc mt",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  trc mt"}},continue:{default:{default:"Quo {modifier}",name:"Quo {modifier}  chy tip trn {way_name}",destination:"Quo {modifier} v {destination}",exit:"Quo {modifier} vo {way_name}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}",distance:"Chy thng cho {distance}",namedistance:"Chy tip trn {way_name} cho {distance}"},"sharp left":{default:"Quo gt bn tri",name:"Quo gt bn tri  chy tip trn {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi",name:"Quo gt bn phi  chy tip trn {way_name}",destination:"Quo gt bn phi v {destination}"},"slight left":{default:"Nghing v bn tri",name:"Nghing v bn tri  chy tip trn {way_name}",destination:"Nghing v bn tri v {destination}"},"slight right":{default:"Nghing v bn phi",name:"Nghing v bn phi  chy tip trn {way_name}",destination:"Nghing v bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li trn {way_name}",destination:"Quo ngc v {destination}"}},depart:{default:{default:"i v hng {direction}",name:"i v hng {direction} trn {way_name}",namedistance:"i v hng {direction} trn {way_name} cho {distance}"}},"end of road":{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"},uturn:{default:"Quo ngc li ti cui ng",name:"Quo ngc vo {way_name} ti cui ng",destination:"Quo ngc v {destination} ti cui ng"}},fork:{default:{default:"i bn {modifier}  ng ba",name:"Gi bn {modifier} vo {way_name}",destination:"Gi bn {modifier} v {destination}"},"slight left":{default:"Nghing v bn tri  ng ba",name:"Gi bn tri vo {way_name}",destination:"Gi bn tri v {destination}"},"slight right":{default:"Nghing v bn phi  ng ba",name:"Gi bn phi vo {way_name}",destination:"Gi bn phi v {destination}"},"sharp left":{default:"Quo gt bn tri  ng ba",name:"Quo gt bn tri vo {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi  ng ba",name:"Quo gt bn phi vo {way_name}",destination:"Quo gt bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},merge:{default:{default:"Nhp sang {modifier}",name:"Nhp sang {modifier} vo {way_name}",destination:"Nhp sang {modifier} v {destination}"},straight:{default:"Nhp ng",name:"Nhp vo {way_name}",destination:"Nhp ng v {destination}"},"slight left":{default:"Nhp sang tri",name:"Nhp sang tri vo {way_name}",destination:"Nhp sang tri v {destination}"},"slight right":{default:"Nhp sang phi",name:"Nhp sang phi vo {way_name}",destination:"Nhp sang phi v {destination}"},"sharp left":{default:"Nhp sang tri",name:"Nhp sang tri vo {way_name}",destination:"Nhp sang tri v {destination}"},"sharp right":{default:"Nhp sang phi",name:"Nhp sang phi vo {way_name}",destination:"Nhp sang phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},"new name":{default:{default:"Chy tip bn {modifier}",name:"Chy tip bn {modifier} trn {way_name}",destination:"Chy tip bn {modifier} v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"},"sharp left":{default:"Quo gt bn tri",name:"Quo gt bn tri vo {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi",name:"Quo gt bn phi vo {way_name}",destination:"Quo gt bn phi v {destination}"},"slight left":{default:"Nghing v bn tri",name:"Nghing v bn tri vo {way_name}",destination:"Nghing v bn tri v {destination}"},"slight right":{default:"Nghing v bn phi",name:"Nghing v bn phi vo {way_name}",destination:"Nghing v bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},notification:{default:{default:"Chy tip bn {modifier}",name:"Chy tip bn {modifier} trn {way_name}",destination:"Chy tip bn {modifier} v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},"off ramp":{default:{default:"i ng nhnh",name:"i ng nhnh {way_name}",destination:"i ng nhnh v {destination}",exit:"i theo li ra {exit}",exit_destination:"i theo li ra {exit} v {destination}"},left:{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},right:{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"},"sharp left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},"sharp right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"},"slight left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},"slight right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"}},"on ramp":{default:{default:"i ng nhnh",name:"i ng nhnh {way_name}",destination:"i ng nhnh v {destination}"},left:{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},right:{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"},"sharp left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},"sharp right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"},"slight left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},"slight right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"}},rotary:{default:{default:{default:"i vo bng binh",name:"i vo bng binh v ra ti {way_name}",destination:"i vo bng binh v ra v {destination}"},name:{default:"i vo {rotary_name}",name:"i vo {rotary_name} v ra ti {way_name}",destination:"i v {rotary_name} v ra v {destination}"},exit:{default:"i vo bng binh v ra ti ng {exit_number}",name:"i vo bng binh v ra ti ng {exit_number} tc {way_name}",destination:"i vo bng binh v ra ti ng {exit_number} v {destination}"},name_exit:{default:"i vo {rotary_name} v ra ti ng {exit_number}",name:"i vo {rotary_name} v ra ti ng {exit_number} tc {way_name}",destination:"i vo {rotary_name} v ra ti ng {exit_number} v {destination}"}}},roundabout:{default:{exit:{default:"i vo bng binh v ra ti ng {exit_number}",name:"i vo bng binh v ra ti ng {exit_number} tc {way_name}",destination:"i vo bng binh v ra ti ng {exit_number} v {destination}"},default:{default:"i vo bng binh",name:"i vo bng binh v ra ti {way_name}",destination:"i vo bng binh v ra v {destination}"}}},"roundabout turn":{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},left:{default:"Quo tri",name:"Quo tri vo {way_name}",destination:"Quo tri v {destination}"},right:{default:"Quo phi",name:"Quo phi vo {way_name}",destination:"Quo phi v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"}},"exit roundabout":{default:{default:"Ra bng binh",name:"Ra bng binh vo {way_name}",destination:"Ra bng binh v {destination}"}},"exit rotary":{default:{default:"Ra bng binh",name:"Ra bng binh vo {way_name}",destination:"Ra bng binh v {destination}"}},turn:{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},left:{default:"Quo tri",name:"Quo tri vo {way_name}",destination:"Quo tri v {destination}"},right:{default:"Quo phi",name:"Quo phi vo {way_name}",destination:"Quo phi v {destination}"},straight:{default:"Chy thng",name:"Chy thng vo {way_name}",destination:"Chy thng v {destination}"}},"use lane":{no_lanes:{default:"Chy thng"},default:{default:"{lane_instruction}"}}}}},{}],47:[function(a,e,t){e.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:""},lanes:{xo:"",ox:"",xox:"",oxo:""}},modes:{ferry:{default:"",name:"{way_name}",destination:"{destination}"}},phrase:{"two linked by distance":"{instruction_one}{distance}{instruction_two}","two linked":"{instruction_one}{instruction_two}","one in distance":"{distance}{instruction_one}","name and ref":"{name}{ref}","exit with number":"{exit}"},arrive:{default:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},left:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},right:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"sharp left":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"sharp right":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"slight right":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"slight left":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},straight:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"}},continue:{default:{default:"{modifier}",name:"{way_name}{modifier}",destination:"{modifier}{destination}",exit:"{modifier}{way_name}"},straight:{default:"",name:"{way_name}",destination:"{destination}",distance:"{distance}",namedistance:"{way_name}{distance}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},depart:{default:{default:"{direction}",name:"{direction}{way_name}",namedistance:"{direction}{way_name}{distance}"}},"end of road":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},fork:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},merge:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},"new name":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},notification:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},"off ramp":{default:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"}},"on ramp":{default:{default:"",name:"{way_name}",destination:"{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"}},rotary:{default:{default:{default:"",name:"{way_name}",destination:"{destination}"},name:{default:"{rotary_name}",name:"{rotary_name}{way_name}",destination:"{rotary_name}{destination}"},exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},name_exit:{default:"{rotary_name}{exit_number}",name:"{rotary_name}{exit_number}{way_name}",destination:"{rotary_name}{exit_number}{destination}"}}},roundabout:{default:{exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},default:{default:"",name:"{way_name}",destination:"{destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"exit roundabout":{default:{default:"",name:"{way_name}",destination:"{destination}"}},"exit rotary":{default:{default:"",name:"{way_name}",destination:"{destination}"}},turn:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"use lane":{no_lanes:{default:""},default:{default:"{lane_instruction}"}}}}},{}],48:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(r,o,s,h){n.setOptions(this,h),this._elem=r,this._resultFn=h.resultFn?n.Util.bind(h.resultFn,h.resultContext):null,this._autocomplete=h.autocompleteFn?n.Util.bind(h.autocompleteFn,h.autocompleteContext):null,this._selectFn=n.Util.bind(o,s),this._container=n.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=n.DomUtil.create("table","",this._container),n.DomEvent.addListener(this._elem,"input",this._keyPressed,this),n.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),n.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),n.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){n.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var r=this._elem.getBoundingClientRect();if(!this._container.parentElement){var o=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,s=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._container.style.left=r.left+o+"px",this._container.style.top=r.bottom+s+"px",this._container.style.width=r.right-r.left+"px",document.body.appendChild(this._container)}n.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(r){var o,s,h,f;for(delete this._selection,this._results=r;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(o=0;o<r.length;o++)s=n.DomUtil.create("tr","",this._resultTable),s.setAttribute("data-result-index",o),h=n.DomUtil.create("td","",s),f=document.createTextNode(r[o].name),h.appendChild(f),n.DomEvent.addListener(h,"mousedown",n.DomEvent.preventDefault),n.DomEvent.addListener(h,"click",this._createClickListener(r[o]));o||(s=n.DomUtil.create("tr","",this._resultTable),h=n.DomUtil.create("td","leaflet-routing-geocoder-no-results",s),h.innerHTML=this.options.noResultsMessage),this._open(),r.length>0&&this._select(1)},_createClickListener:function(r){var o=this._resultSelected(r);return n.bind(function(){this._elem.blur(),o()},this)},_resultSelected:function(r){return n.bind(function(){this.close(),this._elem.value=r.name,this._lastCompletedText=r.name,this._selectFn(r)},this)},_keyPressed:function(r){var o;if(this._isOpen&&r.keyCode===13&&this._selection){o=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[o])(),n.DomEvent.preventDefault(r);return}if(r.keyCode===13){n.DomEvent.preventDefault(r),this._complete(this._resultFn,!0);return}if(this._autocomplete&&document.activeElement===this._elem){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(n.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout);return}this._unselect()},_select:function(r){var o=this._selection;o&&(n.DomUtil.removeClass(o.firstChild,"leaflet-routing-geocoder-selected"),o=o[r>0?"nextSibling":"previousSibling"]),o||(o=this._resultTable[r>0?"firstChild":"lastChild"]),o&&(n.DomUtil.addClass(o.firstChild,"leaflet-routing-geocoder-selected"),this._selection=o)},_unselect:function(){this._selection&&n.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(r){if(this._isOpen)switch(r.keyCode){case 27:this.close(),n.DomEvent.preventDefault(r);return;case 38:this._select(-1),n.DomEvent.preventDefault(r);return;case 40:this._select(1),n.DomEvent.preventDefault(r);return}},_complete:function(r,o){var s=this._elem.value;function h(f){this._lastCompletedText=s,o&&f.length===1?this._resultSelected(f[0])():this._setResults(f)}s&&(s!==this._lastCompletedText?r(s,h,this):o&&h.call(this,this._results))}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],49:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,r=a("./itinerary"),o=a("./line"),s=a("./plan"),h=a("./osrm-v1");e.exports=r.extend({options:{fitSelectedRoutes:"smart",routeLine:function(f,y){return new o(f,y)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",showAlternatives:!1,defaultErrorHandler:function(f){console.error("Routing error:",f.error)}},initialize:function(f){n.Util.setOptions(this,f),this._router=this.options.router||new h(f),this._plan=this.options.plan||new s(this.options.waypoints,f),this._requestCount=0,r.prototype.initialize.call(this,f),this.on("routeselected",this._routeSelected,this),this.options.defaultErrorHandler&&this.on("routingerror",this.options.defaultErrorHandler),this._plan.on("waypointschanged",this._onWaypointsChanged,this),f.routeWhileDragging&&this._setupRouteDragging()},_onZoomEnd:function(){if(!(!this._selectedRoute||!this._router.requiresMoreDetail)){var f=this._map;this._router.requiresMoreDetail(this._selectedRoute,f.getZoom(),f.getBounds())&&this.route({callback:n.bind(function(y,x){var S;if(!y){for(S=0;S<x.length;S++)this._routes[S].properties=x[S].properties;this._updateLineCallback(y,x)}},this),simplifyGeometry:!1,geometryOnly:!0})}},onAdd:function(f){this.options.autoRoute&&this.route();var y=r.prototype.onAdd.call(this,f);return this._map=f,this._map.addLayer(this._plan),this._map.on("zoomend",this._onZoomEnd,this),this._plan.options.geocoder&&y.insertBefore(this._plan.createGeocoders(),y.firstChild),y},onRemove:function(f){if(f.off("zoomend",this._onZoomEnd,this),this._line&&f.removeLayer(this._line),f.removeLayer(this._plan),this._alternatives&&this._alternatives.length>0)for(var y=0,x=this._alternatives.length;y<x;y++)f.removeLayer(this._alternatives[y]);return r.prototype.onRemove.call(this,f)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(f){return this._plan.setWaypoints(f),this},spliceWaypoints:function(){var f=this._plan.spliceWaypoints.apply(this._plan,arguments);return f},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(f){var y=this._selectedRoute=f.route,x=this.options.showAlternatives&&f.alternatives,S=this.options.fitSelectedRoutes,E=S==="smart"&&!this._waypointsVisible()||S!=="smart"&&S;this._updateLines({route:y,alternatives:x}),E&&this._map.fitBounds(this._line.getBounds()),this.options.waypointMode==="snap"&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(y.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var f=this.getWaypoints(),y,x,S,E,z;try{for(y=this._map.getSize(),E=0;E<f.length;E++)z=this._map.latLngToLayerPoint(f[E].latLng),x?x.extend(z):x=n.bounds([z]);return S=x.getSize(),(S.x>y.x/5||S.y>y.y/5)&&this._waypointsInViewport()}catch{return!1}},_waypointsInViewport:function(){var f=this.getWaypoints(),y,x;try{y=this._map.getBounds()}catch{return!1}for(x=0;x<f.length;x++)if(y.contains(f[x].latLng))return!0;return!1},_updateLines:function(f){var y=this.options.addWaypoints!==void 0?this.options.addWaypoints:!0;this._clearLines(),this._alternatives=[],f.alternatives&&f.alternatives.forEach(function(x,S){this._alternatives[S]=this.options.routeLine(x,n.extend({isAlternative:!0},this.options.altLineOptions||this.options.lineOptions)),this._alternatives[S].addTo(this._map),this._hookAltEvents(this._alternatives[S])},this),this._line=this.options.routeLine(f.route,n.extend({addWaypoints:y,extendToWaypoints:this.options.waypointMode==="connect"},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(f){f.on("linetouched",function(y){this._plan.dragNewWaypoint(y)},this)},_hookAltEvents:function(f){f.on("linetouched",function(y){var x=this._routes.slice(),S=x.splice(y.target._route.routesIndex,1)[0];this.fire("routeselected",{route:S,alternatives:x})},this)},_onWaypointsChanged:function(f){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLines(),this._clearAlts()),this.fire("waypointschanged",{waypoints:f.waypoints})},_setupRouteDragging:function(){var f=0,y;this._plan.on("waypointdrag",n.bind(function(x){y=x.waypoints,f||(f=setTimeout(n.bind(function(){this.route({waypoints:y,geometryOnly:!0,callback:n.bind(this._updateLineCallback,this)}),f=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){f&&(clearTimeout(f),f=void 0),this.route()},this)},_updateLineCallback:function(f,y){if(f)f.type!=="abort"&&this._clearLines();else{y=y.slice();var x=y.splice(this._selectedRoute.routesIndex,1)[0];this._updateLines({route:x,alternatives:this.options.showAlternatives?y:[]})}},route:function(f){var y=++this._requestCount,x;this._pendingRequest&&this._pendingRequest.abort&&(this._pendingRequest.abort(),this._pendingRequest=null),f=f||{},this._plan.isReady()&&(this.options.useZoomParameter&&(f.z=this._map&&this._map.getZoom()),x=f&&f.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:x}),this._pendingRequest=this._router.route(x,function(S,E){if(this._pendingRequest=null,f.callback)return f.callback.call(this,S,E);if(y===this._requestCount){if(this._clearLines(),this._clearAlts(),S&&S.type!=="abort"){this.fire("routingerror",{error:S});return}if(E.forEach(function(D,F){D.routesIndex=F}),!f.geometryOnly)this.fire("routesfound",{waypoints:x,routes:E}),this.setAlternatives(E);else{var z=E.splice(0,1)[0];this._routeSelected({route:z,alternatives:E})}}},this,f))},_clearLines:function(){if(this._line&&(this._map.removeLayer(this._line),delete this._line),this._alternatives&&this._alternatives.length){for(var f in this._alternatives)this._map.removeLayer(this._alternatives[f]);this._alternatives=[]}}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./itinerary":55,"./line":56,"./osrm-v1":59,"./plan":60}],50:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.Control.extend({options:{header:"Routing error",formatMessage:function(r){return r.status<0?"Calculating the route caused an error. Technical description follows: <code><pre>"+r.message+"</pre></code":"The route could not be calculated. "+r.message}},initialize:function(r,o){n.Control.prototype.initialize.call(this,o),r.on("routingerror",n.bind(function(s){this._element&&(this._element.children[1].innerHTML=this.options.formatMessage(s.error),this._element.style.visibility="visible")},this)).on("routingstart",n.bind(function(){this._element&&(this._element.style.visibility="hidden")},this))},onAdd:function(){var r;return this._element=n.DomUtil.create("div","leaflet-bar leaflet-routing-error"),this._element.style.visibility="hidden",r=n.DomUtil.create("h3",null,this._element),n.DomUtil.create("span",null,this._element),r.innerHTML=this.options.header,this._element},onRemove:function(){delete this._element}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],51:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,r=a("./localization");e.exports=n.Class.extend({options:{units:"metric",unitNames:null,language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(o){n.setOptions(this,o);var s=n.Util.isArray(this.options.language)?this.options.language:[this.options.language,"en"];this._localization=new r(s)},formatDistance:function(o,s){var h=this.options.unitNames||this._localization.localize("units"),f=s<=0,y=f?function(z){return z}:n.bind(this._round,this),x,S,E;return this.options.units==="imperial"?(S=o/.9144,S>=1e3?E={value:y(o/1609.344,s),unit:h.miles}:E={value:y(S,s),unit:h.yards}):(x=y(o,s),E={value:x>=1e3?x/1e3:x,unit:x>=1e3?h.kilometers:h.meters}),f&&(E.value=E.value.toFixed(-s)),n.Util.template(this.options.distanceTemplate,E)},_round:function(o,s){var h=s||this.options.roundingSensitivity,f=Math.pow(10,(Math.floor(o/h)+"").length-1),y=Math.floor(o/f),x=y>5?f:f/2;return Math.round(o/x)*x},formatTime:function(o){var s=this.options.unitNames||this._localization.localize("units");return o=Math.round(o/30)*30,o>86400?Math.round(o/3600)+" "+s.hours:o>3600?Math.floor(o/3600)+" "+s.hours+" "+Math.round(o%3600/60)+" "+s.minutes:o>300?Math.round(o/60)+" "+s.minutes:o>60?Math.floor(o/60)+" "+s.minutes+(o%60!==0?" "+o%60+" "+s.seconds:""):o+" "+s.seconds},formatInstruction:function(o,s){return o.text===void 0?this.capitalize(n.Util.template(this._getInstructionTemplate(o,s),n.extend({},o,{exitStr:o.exit?this._localization.localize("formatOrder")(o.exit):"",dir:this._localization.localize(["directions",o.direction]),modifier:this._localization.localize(["directions",o.modifier])}))):o.text},getIconName:function(o,s){switch(o.type){case"Head":if(s===0)return"depart";break;case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}switch(o.modifier){case"Straight":return"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":case"Uturn":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left"}},capitalize:function(o){return o.charAt(0).toUpperCase()+o.substring(1)},_getInstructionTemplate:function(o,s){var h=o.type==="Straight"?s===0?"Head":"Continue":o.type,f=this._localization.localize(["instructions",h]);return f||(f=[this._localization.localize(["directions",h])," "+this._localization.localize(["instructions","Onto"])]),f[0]+(f.length>1&&o.road?f[1]:"")}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./localization":57}],52:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,r=a("./autocomplete"),o=a("./localization");function s(h){h.setSelectionRange?h.setSelectionRange(0,9999):h.select()}e.exports=n.Class.extend({includes:typeof n.Evented<"u"&&n.Evented.prototype||n.Mixin.Events,options:{createGeocoder:function(h,f,y){var x=n.DomUtil.create("div","leaflet-routing-geocoder"),S=n.DomUtil.create("input","",x),E=y.addWaypoints?n.DomUtil.create("span","leaflet-routing-remove-waypoint",x):void 0;return S.disabled=!y.addWaypoints,{container:x,input:S,closeButton:E}},geocoderPlaceholder:function(h,f,y){var x=new o(y.options.language).localize("ui");return h===0?x.startPlaceholder:h<f-1?n.Util.template(x.viaPlaceholder,{viaNumber:h}):x.endPlaceholder},geocoderClass:function(){return""},waypointNameFallback:function(h){var f=h.lat<0?"S":"N",y=h.lng<0?"W":"E",x=(Math.round(Math.abs(h.lat)*1e4)/1e4).toString(),S=(Math.round(Math.abs(h.lng)*1e4)/1e4).toString();return f+x+", "+y+S},maxGeocoderTolerance:200,autocompleteOptions:{},language:"en"},initialize:function(h,f,y,x){n.setOptions(this,x);var S=this.options.createGeocoder(f,y,this.options),E=S.closeButton,z=S.input;z.setAttribute("placeholder",this.options.geocoderPlaceholder(f,y,this)),z.className=this.options.geocoderClass(f,y),this._element=S,this._waypoint=h,this.update(),z.value=h.name,n.DomEvent.addListener(z,"click",function(){s(this)},z),E&&n.DomEvent.addListener(E,"click",function(){this.fire("delete",{waypoint:this._waypoint})},this),new r(z,function(D){z.value=D.name,h.name=D.name,h.latLng=D.center,this.fire("geocoded",{waypoint:h,value:D})},this,n.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions))},getContainer:function(){return this._element.container},setValue:function(h){this._element.input.value=h},update:function(h){var f=this._waypoint,y;f.name=f.name||"",f.latLng&&(h||!f.name)&&(y=this.options.waypointNameFallback(f.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(f.latLng,67108864,function(x){x.length>0&&x[0].center.distanceTo(f.latLng)<this.options.maxGeocoderTolerance?f.name=x[0].name:f.name=y,this._update()},this):(f.name=y,this._update()))},focus:function(){var h=this._element.input;h.focus(),s(h)},_update:function(){var h=this._waypoint,f=h&&h.name?h.name:"";this.setValue(f),this.fire("reversegeocoded",{waypoint:h,value:f})}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./autocomplete":48,"./localization":57}],53:[function(a,e,t){(function(i){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,r=a("./control"),o=a("./itinerary"),s=a("./line"),h=a("./osrm-v1"),f=a("./plan"),y=a("./waypoint"),x=a("./autocomplete"),S=a("./formatter"),E=a("./geocoder-element"),z=a("./localization"),D=a("./itinerary-builder"),F=a("./mapbox"),U=a("./error-control");n.routing={control:function(G){return new r(G)},itinerary:function(G){return o(G)},line:function(G,Z){return new s(G,Z)},plan:function(G,Z){return new f(G,Z)},waypoint:function(G,Z,ee){return new y(G,Z,ee)},osrmv1:function(G){return new h(G)},localization:function(G){return new z(G)},formatter:function(G){return new S(G)},geocoderElement:function(G,Z,ee,ie){return new n.Routing.GeocoderElement(G,Z,ee,ie)},itineraryBuilder:function(G){return new D(G)},mapbox:function(G,Z){return new F(G,Z)},errorControl:function(G,Z){return new U(G,Z)},autocomplete:function(G,Z,ee,ie){return new x(G,Z,ee,ie)}},e.exports=n.Routing={Control:r,Itinerary:o,Line:s,OSRMv1:h,Plan:f,Waypoint:y,Autocomplete:x,Formatter:S,GeocoderElement:E,Localization:z,Formatter:S,ItineraryBuilder:D,control:n.routing.control,itinerary:n.routing.itinerary,line:n.routing.line,plan:n.routing.plan,waypoint:n.routing.waypoint,osrmv1:n.routing.osrmv1,geocoderElement:n.routing.geocoderElement,mapbox:n.routing.mapbox,errorControl:n.routing.errorControl}}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./autocomplete":48,"./control":49,"./error-control":50,"./formatter":51,"./geocoder-element":52,"./itinerary":55,"./itinerary-builder":54,"./line":56,"./localization":57,"./mapbox":58,"./osrm-v1":59,"./plan":60,"./waypoint":61}],54:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.Class.extend({options:{containerClassName:""},initialize:function(r){n.setOptions(this,r)},createContainer:function(r){var o=n.DomUtil.create("table",(r||"")+" "+this.options.containerClassName),s=n.DomUtil.create("colgroup","",o);return n.DomUtil.create("col","leaflet-routing-instruction-icon",s),n.DomUtil.create("col","leaflet-routing-instruction-text",s),n.DomUtil.create("col","leaflet-routing-instruction-distance",s),o},createStepsContainer:function(){return n.DomUtil.create("tbody","")},createStep:function(r,o,s,h){var f=n.DomUtil.create("tr","",h),y,x;return x=n.DomUtil.create("td","",f),y=n.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+s,x),x.appendChild(y),x=n.DomUtil.create("td","",f),x.appendChild(document.createTextNode(r)),x=n.DomUtil.create("td","",f),x.appendChild(document.createTextNode(o)),f}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],55:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,r=a("./formatter"),o=a("./itinerary-builder");e.exports=n.Control.extend({includes:typeof n.Evented<"u"&&n.Evented.prototype||n.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",totalDistanceRoundingSensitivity:-1,show:!0,collapsible:void 0,collapseBtn:function(s){var h=n.DomUtil.create("span",s.options.collapseBtnClass);n.DomEvent.on(h,"click",s._toggle,s),s._container.insertBefore(h,s._container.firstChild)},collapseBtnClass:"leaflet-routing-collapse-btn"},initialize:function(s){n.setOptions(this,s),this._formatter=this.options.formatter||new r(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new o({containerClassName:this.options.itineraryClassName})},onAdd:function(s){var h=this.options.collapsible;return h=h||h===void 0&&s.getSize().x<=640,this._container=n.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide ")+(h?"leaflet-routing-collapsible ":"")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),n.DomEvent.disableClickPropagation(this._container),n.DomEvent.addListener(this._container,"mousewheel",function(f){n.DomEvent.stopPropagation(f)}),h&&this.options.collapseBtn(this),this._container},onRemove:function(){},createAlternativesContainer:function(){return n.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(s){var h,f,y;for(this._clearAlts(),this._routes=s,h=0;h<this._routes.length;h++)f=this._routes[h],y=this._createAlternative(f,h),this._altContainer.appendChild(y),this._altElements.push(y);return this._selectRoute({route:this._routes[0],alternatives:this._routes.slice(1)}),this},show:function(){n.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){n.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_toggle:function(){var s=n.DomUtil.hasClass(this._container,"leaflet-routing-container-hide");this[s?"show":"hide"]()},_createAlternative:function(s,h){var f=n.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(h>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),y=this.options.summaryTemplate,x=n.extend({name:s.name,distance:this._formatter.formatDistance(s.summary.totalDistance,this.options.totalDistanceRoundingSensitivity),time:this._formatter.formatTime(s.summary.totalTime)},s);return f.innerHTML=typeof y=="function"?y(x):n.Util.template(y,x),n.DomEvent.addListener(f,"click",this._onAltClicked,this),this.on("routeselected",this._selectAlt,this),f.appendChild(this._createItineraryContainer(s)),f},_clearAlts:function(){for(var s=this._altContainer;s&&s.firstChild;)s.removeChild(s.firstChild);this._altElements=[]},_createItineraryContainer:function(s){var h=this._itineraryBuilder.createContainer(),f=this._itineraryBuilder.createStepsContainer(),y,x,S,E,z,D;for(h.appendChild(f),y=0;y<s.instructions.length;y++)x=s.instructions[y],z=this._formatter.formatInstruction(x,y),E=this._formatter.formatDistance(x.distance),D=this._formatter.getIconName(x,y),S=this._itineraryBuilder.createStep(z,E,D,f),x.index&&this._addRowListeners(S,s.coordinates[x.index]);return h},_addRowListeners:function(s,h){n.DomEvent.addListener(s,"mouseover",function(){this._marker=n.circleMarker(h,this.options.pointMarkerStyle).addTo(this._map)},this),n.DomEvent.addListener(s,"mouseout",function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)},this),n.DomEvent.addListener(s,"click",function(f){this._map.panTo(h),n.DomEvent.stopPropagation(f)},this)},_onAltClicked:function(s){for(var h=s.target||window.event.srcElement;!n.DomUtil.hasClass(h,"leaflet-routing-alt");)h=h.parentElement;var f=this._altElements.indexOf(h),y=this._routes.slice(),x=y.splice(f,1)[0];this.fire("routeselected",{route:x,alternatives:y})},_selectAlt:function(s){var h,f,y,x;if(h=this._altElements[s.route.routesIndex],n.DomUtil.hasClass(h,"leaflet-routing-alt-minimized"))for(f=0;f<this._altElements.length;f++)y=this._altElements[f],x=f===s.route.routesIndex?"removeClass":"addClass",n.DomUtil[x](y,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&n.DomUtil[x](y,this.options.minimizedClassName),f!==s.route.routesIndex&&(y.scrollTop=0);n.DomEvent.stop(s)},_selectRoute:function(s){this._marker&&(this._map.removeLayer(this._marker),delete this._marker),this.fire("routeselected",s)}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./formatter":51,"./itinerary-builder":54}],56:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.LayerGroup.extend({includes:typeof n.Evented<"u"&&n.Evented.prototype||n.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(r,o){n.setOptions(this,o),n.LayerGroup.prototype.initialize.call(this,o),this._route=r,this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(r.coordinates,this.options.styles,this.options.addWaypoints)},getBounds:function(){return n.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var r=this._route.inputWaypoints,o=[],s;for(s=0;s<r.length;s++)o.push(this._findClosestRoutePoint(r[s].latLng));return o},_findClosestRoutePoint:function(r){var o=Number.MAX_VALUE,s,h,f;for(h=this._route.coordinates.length-1;h>=0;h--)f=r.distanceTo(this._route.coordinates[h]),f<o&&(s=h,o=f);return s},_extendToWaypoints:function(){var r=this._route.inputWaypoints,o=this._getWaypointIndices(),s,h,f;for(s=0;s<r.length;s++)h=r[s].latLng,f=n.latLng(this._route.coordinates[o[s]]),h.distanceTo(f)>this.options.missingRouteTolerance&&this._addSegment([h,f],this.options.missingRouteStyles)},_addSegment:function(r,o,s){var h,f;for(h=0;h<o.length;h++)f=n.polyline(r,o[h]),this.addLayer(f),s&&f.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(r){for(var o=this._getWaypointIndices(),s=o.length-1;s>=0&&o[s]>r;)s--;return s},_onLineTouched:function(r){var o=this._findNearestWpBefore(this._findClosestRoutePoint(r.latlng));this.fire("linetouched",{afterIndex:o,latlng:r.latlng}),n.DomEvent.stop(r)},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],57:[function(a,e,t){(function(){var i={directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste",SlightRight:"leve giro a la derecha",Right:"derecha",SharpRight:"giro pronunciado a la derecha",SlightLeft:"leve giro a la izquierda",Left:"izquierda",SharpLeft:"giro pronunciado a la izquierda",Uturn:"media vuelta"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],TurnAround:["Dar vuelta"],WaypointReached:["Lleg a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"],Fork:["En el cruce gira a {modifier}"," hacia {road}"],Merge:["Incorprate {modifier}"," hacia {road}"],OnRamp:["Gira {modifier} en la salida"," hacia {road}"],OffRamp:["Toma la salida {modifier}"," hacia {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," hacia {road}"],Onto:"hacia {road}"},formatOrder:function(r){return r+""},ui:{startPlaceholder:"Inicio",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Destino"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}};L.Routing=L.Routing||{};var n=L.Class.extend({initialize:function(r){this._langs=L.Util.isArray(r)?r.slice():[r,"en"];for(var o=0,s=this._langs.length;o<s;o++){var h=/([A-Za-z]+)/.exec(this._langs[o])[1];if(!n[this._langs[o]])if(n[h])this._langs[o]=h;else throw new Error('No localization for language "'+this._langs[o]+'".')}},localize:function(r){var o,s,h;r=L.Util.isArray(r)?r:[r];for(var f=0,y=this._langs.length;f<y;f++){o=n[this._langs[f]];for(var x=0,S=r.length;o&&x<S;x++)s=r[x],h=o[s],o=h;if(h)return h}}});e.exports=L.extend(n,{en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest",SlightRight:"slight right",Right:"right",SharpRight:"sharp right",SlightLeft:"slight left",Left:"left",SharpLeft:"sharp left",Uturn:"Turn around"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"],TurnAround:["Turn around"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"],Fork:["At the fork, turn {modifier}"," onto {road}"],Merge:["Merge {modifier}"," onto {road}"],OnRamp:["Turn {modifier} on the ramp"," onto {road}"],OffRamp:["Take the ramp on the {modifier}"," onto {road}"],EndOfRoad:["Turn {modifier} at the end of the road"," onto {road}"],Onto:"onto {road}"},formatOrder:function(r){var o=r%10-1,s=["st","nd","rd"];return s[o]?r+s[o]:r+"th"},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"End"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"Sdosten",S:"Sden",SW:"Sdwesten",W:"Westen",NW:"Nordwesten",SlightRight:"leicht rechts",Right:"rechts",SharpRight:"scharf rechts",SlightLeft:"leicht links",Left:"links",SharpLeft:"scharf links",Uturn:"Wenden"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"],Fork:["An der Kreuzung {modifier}"," auf {road}"],Merge:["Fahren Sie {modifier} weiter"," auf {road}"],OnRamp:["Fahren Sie {modifier} auf die Auffahrt"," auf {road}"],OffRamp:["Nehmen Sie die Ausfahrt {modifier}"," auf {road}"],EndOfRoad:["Fahren Sie {modifier} am Ende der Strae"," auf {road}"],Onto:"auf {road}"},formatOrder:function(r){return r+"."},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Ziel"}},sv:{directions:{N:"norr",NE:"nordost",E:"st",SE:"sydost",S:"syd",SW:"sydvst",W:"vst",NW:"nordvst",SlightRight:"svagt hger",Right:"hger",SharpRight:"skarpt hger",SlightLeft:"svagt vnster",Left:"vnster",SharpLeft:"skarpt vnster",Uturn:"Vnd"},instructions:{Head:["k t {dir}"," till {road}"],Continue:["Fortstt {dir}"],SlightRight:["Svagt hger"," till {road}"],Right:["Svng hger"," till {road}"],SharpRight:["Skarpt hger"," till {road}"],TurnAround:["Vnd"],SharpLeft:["Skarpt vnster"," till {road}"],Left:["Svng vnster"," till {road}"],SlightLeft:["Svagt vnster"," till {road}"],WaypointReached:["Viapunkt ndd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans ml"],Fork:["Tag av {modifier}"," till {road}"],Merge:["Anslut {modifier} "," till {road}"],OnRamp:["Tag pfarten {modifier}"," till {road}"],OffRamp:["Tag avfarten {modifier}"," till {road}"],EndOfRoad:["Svng {modifier} vid vgens slut"," till {road}"],Onto:"till {road}"},formatOrder:function(r){return["frsta","andra","tredje","fjrde","femte","sjtte","sjunde","ttonde","nionde","tionde"][r-1]},ui:{startPlaceholder:"Frn",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Till"}},es:i,sp:i,nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(r){return r===1||r>=20?r+"ste":r+"de"},ui:{startPlaceholder:"Vertrekpunt",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Bestemming"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["Lgrement  droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Compltement  droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Compltement  gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["Lgrement  gauche"," sur {road}"],WaypointReached:["Point d'tape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(r){return r+""},ui:{startPlaceholder:"Dpart",viaPlaceholder:"Intermdiaire {viaNumber}",endPlaceholder:"Arrive"}},it:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ovest",W:"ovest",NW:"nord-ovest"},instructions:{Head:["Dritto verso {dir}"," su {road}"],Continue:["Continuare verso {dir}"," su {road}"],SlightRight:["Mantenere la destra"," su {road}"],Right:["A destra"," su {road}"],SharpRight:["Strettamente a destra"," su {road}"],TurnAround:["Fare inversione di marcia"],SharpLeft:["Strettamente a sinistra"," su {road}"],Left:["A sinistra"," sur {road}"],SlightLeft:["Mantenere la sinistra"," su {road}"],WaypointReached:["Punto di passaggio raggiunto"],Roundabout:["Alla rotonda, prendere la {exitStr} uscita"],DestinationReached:["Destinazione raggiunta"]},formatOrder:function(r){return r+""},ui:{startPlaceholder:"Partenza",viaPlaceholder:"Intermedia {viaNumber}",endPlaceholder:"Destinazione"}},pt:{directions:{N:"norte",NE:"nordeste",E:"leste",SE:"sudeste",S:"sul",SW:"sudoeste",W:"oeste",NW:"noroeste",SlightRight:"curva ligeira a direita",Right:"direita",SharpRight:"curva fechada a direita",SlightLeft:"ligeira a esquerda",Left:"esquerda",SharpLeft:"curva fechada a esquerda",Uturn:"Meia volta"},instructions:{Head:["Siga {dir}"," na {road}"],Continue:["Continue {dir}"," na {road}"],SlightRight:["Curva ligeira a direita"," na {road}"],Right:["Curva a direita"," na {road}"],SharpRight:["Curva fechada a direita"," na {road}"],TurnAround:["Retorne"],SharpLeft:["Curva fechada a esquerda"," na {road}"],Left:["Curva a esquerda"," na {road}"],SlightLeft:["Curva ligueira a esquerda"," na {road}"],WaypointReached:["Ponto de interesse atingido"],Roundabout:["Pegue a {exitStr} sada na rotatria"," na {road}"],DestinationReached:["Destino atingido"],Fork:["Na encruzilhada, vire a {modifier}"," na {road}"],Merge:["Entre  {modifier}"," na {road}"],OnRamp:["Vire {modifier} na rampa"," na {road}"],OffRamp:["Entre na rampa na {modifier}"," na {road}"],EndOfRoad:["Vire {modifier} no fim da rua"," na {road}"],Onto:"na {road}"},formatOrder:function(r){return r+""},ui:{startPlaceholder:"Origem",viaPlaceholder:"Intermdio {viaNumber}",endPlaceholder:"Destino"}},sk:{directions:{N:"sever",NE:"serverovchod",E:"vchod",SE:"juhovchod",S:"juh",SW:"juhozpad",W:"zpad",NW:"serverozpad"},instructions:{Head:["Mierte na {dir}"," na {road}"],Continue:["Pokraujte na {dir}"," na {road}"],SlightRight:["Mierne doprava"," na {road}"],Right:["Doprava"," na {road}"],SharpRight:["Prudko doprava"," na {road}"],TurnAround:["Otote sa"],SharpLeft:["Prudko doava"," na {road}"],Left:["Doava"," na {road}"],SlightLeft:["Mierne doava"," na {road}"],WaypointReached:["Ste v prejazdovom bode."],Roundabout:["Odbote na {exitStr} vjazde"," na {road}"],DestinationReached:["Prili ste do ciea."]},formatOrder:function(r){var o=r%10-1,s=[".",".","."];return s[o]?r+s[o]:r+"."},ui:{startPlaceholder:"Zaiatok",viaPlaceholder:"Cez {viaNumber}",endPlaceholder:"Koniec"}},el:{directions:{N:"",NE:"",E:"",SE:"",S:"",SW:"",W:"",NW:""},instructions:{Head:[" {dir}","  {road}"],Continue:[" {dir}","  {road}"],SlightRight:[" ","  {road}"],Right:["","  {road}"],SharpRight:["  ","  {road}"],TurnAround:[" "],SharpLeft:["  ","  {road}"],Left:["","  {road}"],SlightLeft:[" ","  {road}"],WaypointReached:["   "],Roundabout:["  {exitStr}    ","  {road}"],DestinationReached:["   "]},formatOrder:function(r){return r+""},ui:{startPlaceholder:"",viaPlaceholder:" {viaNumber}",endPlaceholder:""}},ca:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-oest",W:"oest",NW:"nord-oest",SlightRight:"lleu gir a la dreta",Right:"dreta",SharpRight:"gir pronunciat a la dreta",SlightLeft:"gir pronunciat a l'esquerra",Left:"esquerra",SharpLeft:"lleu gir a l'esquerra",Uturn:"mitja volta"},instructions:{Head:["Recte {dir}"," sobre {road}"],Continue:["Continuar {dir}"],TurnAround:["Donar la volta"],WaypointReached:["Ha arribat a un punt del cam"],Roundabout:["Agafar {exitStr} sortida a la rotonda"," a {road}"],DestinationReached:["Arribada al dest"],Fork:["A la crulla gira a la {modifier}"," cap a {road}"],Merge:["Incorpora't {modifier}"," a {road}"],OnRamp:["Gira {modifier} a la sortida"," cap a {road}"],OffRamp:["Pren la sortida {modifier}"," cap a {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," cap a {road}"],Onto:"cap a {road}"},formatOrder:function(r){return r+""},ui:{startPlaceholder:"Origen",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Dest"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},ru:{directions:{N:"",NE:"",E:"",SE:"",S:"",SW:"",W:"",NW:"",SlightRight:" ",Right:"",SharpRight:" ",SlightLeft:" ",Left:"",SharpLeft:" ",Uturn:""},instructions:{Head:["   {dir}","  {road}"],Continue:["   {dir}","  {road}"],SlightRight:["  ","  {road}"],Right:["","  {road}"],SharpRight:["  ","  {road}"],TurnAround:[""],SharpLeft:["  ","  {road}"],Left:[" ","  {road}"],SlightLeft:["  ","  {road}"],WaypointReached:[" "],Roundabout:["{exitStr}   ","  {road}"],DestinationReached:[" "],Fork:["   {modifier}","  {road}"],Merge:[" {modifier}","  {road}"],OnRamp:[" {modifier}  ","  {road}"],OffRamp:["  {modifier}","  {road}"],EndOfRoad:[" {modifier}   ","  {road}"],Onto:" {road}"},formatOrder:function(r){return r+"-"},ui:{startPlaceholder:"",viaPlaceholder:" {viaNumber}",endPlaceholder:""},units:{meters:"",kilometers:"",yards:"",miles:"",hours:"",minutes:"",seconds:""}},pl:{directions:{N:"pnoc",NE:"pnocny wschd",E:"wschd",SE:"poudniowy wschd",S:"poudnie",SW:"poudniowy zachd",W:"zachd",NW:"pnocny zachd",SlightRight:"lekko w prawo",Right:"w prawo",SharpRight:"ostro w prawo",SlightLeft:"lekko w lewo",Left:"w lewo",SharpLeft:"ostro w lewo",Uturn:"zawr"},instructions:{Head:["Kieruj si na {dir}"," na {road}"],Continue:["Jed dalej przez {dir}"],TurnAround:["Zawr"],WaypointReached:["Punkt poredni"],Roundabout:["Wyjed {exitStr} zjazdem na rondzie"," na {road}"],DestinationReached:["Dojechano do miejsca docelowego"],Fork:["Na rozwidleniu {modifier}"," na {road}"],Merge:["Zjed {modifier}"," na {road}"],OnRamp:["Wjazd {modifier}"," na {road}"],OffRamp:["Zjazd {modifier}"," na {road}"],EndOfRoad:["Skr {modifier} na kocu drogi"," na {road}"],Onto:"na {road}"},formatOrder:function(r){return r+"."},ui:{startPlaceholder:"Pocztek",viaPlaceholder:"Przez {viaNumber}",endPlaceholder:"Koniec"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"godz",minutes:"min",seconds:"s"}}})})()},{}],58:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,r=a("./osrm-v1");e.exports=r.extend({options:{serviceUrl:"https://api.mapbox.com/directions/v5",profile:"mapbox/driving",useHints:!1},initialize:function(o,s){n.Routing.OSRMv1.prototype.initialize.call(this,s),this.options.requestParameters=this.options.requestParameters||{},this.options.requestParameters.access_token=o}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./osrm-v1":59}],59:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,r=a("@mapbox/corslite"),o=a("@mapbox/polyline"),s=a("osrm-text-instructions")("v5"),h=a("./waypoint");e.exports=n.Class.extend({options:{serviceUrl:"https://router.project-osrm.org/route/v1",profile:"driving",timeout:30*1e3,routingOptions:{alternatives:!0,steps:!0},polylinePrecision:5,useHints:!0,suppressDemoServerWarning:!1,language:"en"},initialize:function(f){n.Util.setOptions(this,f),this._hints={locations:{}},!this.options.suppressDemoServerWarning&&this.options.serviceUrl.indexOf("//router.project-osrm.org")>=0&&console.warn(`You are using OSRM's demo server. Please note that it is **NOT SUITABLE FOR PRODUCTION USE**.
Refer to the demo server's usage policy: https://github.com/Project-OSRM/osrm-backend/wiki/Api-usage-policy

To change, set the serviceUrl option.

Please do not report issues with this server to neither Leaflet Routing Machine or OSRM - it's for
demo only, and will sometimes not be available, or work in unexpected ways.

Please set up your own OSRM server, or use a paid service provider for production.`)},route:function(f,y,x,S){var E=!1,z=[],D,F,U,G,Z;for(S=n.extend({},this.options.routingOptions,S),D=this.buildRouteUrl(f,S),this.options.requestParameters&&(D+=n.Util.getParamString(this.options.requestParameters,D)),F=setTimeout(function(){E=!0,y.call(x||y,{status:-1,message:"OSRM request timed out."})},this.options.timeout),G=0;G<f.length;G++)U=f[G],z.push(new h(U.latLng,U.name,U.options));return Z=r(D,n.bind(function(ee,ie){var le,J={};if(clearTimeout(F),E)Z.abort();else{if(ee)J.message="HTTP request failed: "+ee.type+(ee.target&&ee.target.status?" HTTP "+ee.target.status+": "+ee.target.statusText:""),J.url=D,J.status=-1,J.target=ee;else try{le=JSON.parse(ie.responseText);try{return this._routeDone(le,z,S,y,x)}catch(re){J.status=-3,J.message=re.toString()}}catch(re){J.status=-2,J.message="Error parsing OSRM response: "+re.toString()}y.call(x||y,J)}},this))},requiresMoreDetail:function(f,y,x){if(!f.properties.isSimplified)return!1;var S=f.inputWaypoints,E;for(E=0;E<S.length;++E)if(!x.contains(S[E].latLng))return!0;return!1},_routeDone:function(f,y,x,S,E){var z=[],D,F,U;if(E=E||S,f.code!=="Ok"){S.call(E,{status:f.code});return}for(D=this._toWaypoints(y,f.waypoints),F=0;F<f.routes.length;F++)U=this._convertRoute(f.routes[F]),U.inputWaypoints=y,U.waypoints=D,U.properties={isSimplified:!x||!x.geometryOnly||x.simplifyGeometry},z.push(U);this._saveHintData(f.waypoints,y),S.call(E,null,z)},_convertRoute:function(f){var y={name:"",coordinates:[],instructions:[],summary:{totalDistance:f.distance,totalTime:f.duration}},x=[],S=[],E=0,z=f.legs.length,D=f.legs[0].steps.length>0,F,U,G,Z,ee,ie,le,J,re;for(this.options.stepToText?re=this.options.stepToText:re=n.bind(s.compile,s,this.options.language),F=0;F<z;F++)for(G=f.legs[F],x.push(G.summary&&G.summary.charAt(0).toUpperCase()+G.summary.substring(1)),U=0;U<G.steps.length;U++)Z=G.steps[U],ee=this._decodePolyline(Z.geometry),y.coordinates.push.apply(y.coordinates,ee),ie=this._maneuverToInstructionType(Z.maneuver,F===z-1),le=this._maneuverToModifier(Z.maneuver),J=re(Z,{legCount:z,legIndex:F}),ie&&((F==0&&Z.maneuver.type=="depart"||Z.maneuver.type=="arrive")&&S.push(E),y.instructions.push({type:ie,distance:Z.distance,time:Z.duration,road:Z.name,direction:this._bearingToDirection(Z.maneuver.bearing_after),exit:Z.maneuver.exit,index:E,mode:Z.mode,modifier:le,text:J})),E+=ee.length;return y.name=x.join(", "),D?y.waypointIndices=S:y.coordinates=this._decodePolyline(f.geometry),y},_bearingToDirection:function(f){var y=Math.round(f/45)%8;return["N","NE","E","SE","S","SW","W","NW"][y]},_maneuverToInstructionType:function(f,y){switch(f.type){case"new name":return"Continue";case"depart":return"Head";case"arrive":return y?"DestinationReached":"WaypointReached";case"roundabout":case"rotary":return"Roundabout";case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":return this._camelCase(f.type);default:return this._camelCase(f.modifier)}},_maneuverToModifier:function(f){var y=f.modifier;switch(f.type){case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":y=this._leftOrRight(y)}return y&&this._camelCase(y)},_camelCase:function(f){for(var y=f.split(" "),x="",S=0,E=y.length;S<E;S++)x+=y[S].charAt(0).toUpperCase()+y[S].substring(1);return x},_leftOrRight:function(f){return f.indexOf("left")>=0?"Left":"Right"},_decodePolyline:function(f){var y=o.decode(f,this.options.polylinePrecision),x=new Array(y.length),S;for(S=y.length-1;S>=0;S--)x[S]=n.latLng(y[S]);return x},_toWaypoints:function(f,y){var x=[],S,E;for(S=0;S<y.length;S++)E=y[S].location,x.push(new h(n.latLng(E[1],E[0]),f[S].name,f[S].options));return x},buildRouteUrl:function(f,y){for(var x=[],S=[],E,z,D,F=!0,U=0;U<f.length;U++)E=f[U],z=E.latLng,x.push(z.lng+","+z.lat),S.push(this._hints.locations[this._locationKey(z)]||"");return D=!0,this.options.serviceUrl+"/"+this.options.profile+"/"+x.join(";")+"?"+(y.geometryOnly?y.simplifyGeometry?"":"overview=full":"overview=false")+"&alternatives="+F.toString()+"&steps="+D.toString()+(this.options.useHints?"&hints="+S.join(";"):"")+(y.allowUTurns?"&continue_straight="+!y.allowUTurns:"")},_locationKey:function(f){return f.lat+","+f.lng},_saveHintData:function(f,y){var x;this._hints={locations:{}};for(var S=f.length-1;S>=0;S--)x=y[S].latLng,this._hints.locations[this._locationKey(x)]=f[S].hint}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./waypoint":61,"@mapbox/corslite":1,"@mapbox/polyline":2,"osrm-text-instructions":3}],60:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null,r=a("./geocoder-element"),o=a("./waypoint");e.exports=(n.Layer||n.Class).extend({includes:typeof n.Evented<"u"&&n.Evented.prototype||n.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,reverseWaypoints:!1,addButtonClassName:"",language:"en",createGeocoderElement:function(s,h,f,y){return new r(s,h,f,y)},createMarker:function(s,h){var f={draggable:this.draggableWaypoints},y=n.marker(h.latLng,f);return y},geocodersClassName:""},initialize:function(s,h){n.Util.setOptions(this,h),this._waypoints=[],this.setWaypoints(s)},isReady:function(){var s;for(s=0;s<this._waypoints.length;s++)if(!this._waypoints[s].latLng)return!1;return!0},getWaypoints:function(){var s,h=[];for(s=0;s<this._waypoints.length;s++)h.push(this._waypoints[s]);return h},setWaypoints:function(s){var h=[0,this._waypoints.length].concat(s);return this.spliceWaypoints.apply(this,h),this},spliceWaypoints:function(){var s=[arguments[0],arguments[1]],h;for(h=2;h<arguments.length;h++)s.push(arguments[h]&&arguments[h].hasOwnProperty("latLng")?arguments[h]:new o(arguments[h]));for([].splice.apply(this._waypoints,s);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null);this._updateMarkers(),this._fireChanged.apply(this,s)},onAdd:function(s){this._map=s,this._updateMarkers()},onRemove:function(){var s;if(this._removeMarkers(),this._newWp)for(s=0;s<this._newWp.lines.length;s++)this._map.removeLayer(this._newWp.lines[s]);delete this._map},createGeocoders:function(){var s=n.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),h=this._waypoints,f,y;return this._geocoderContainer=s,this._geocoderElems=[],this.options.addWaypoints&&(f=n.DomUtil.create("button","leaflet-routing-add-waypoint "+this.options.addButtonClassName,s),f.setAttribute("type","button"),n.DomEvent.addListener(f,"click",function(){this.spliceWaypoints(h.length,0,null)},this)),this.options.reverseWaypoints&&(y=n.DomUtil.create("button","leaflet-routing-reverse-waypoints",s),y.setAttribute("type","button"),n.DomEvent.addListener(y,"click",function(){this._waypoints.reverse(),this.setWaypoints(this._waypoints)},this)),this._updateGeocoders(),this.on("waypointsspliced",this._updateGeocoders),s},_createGeocoder:function(s){var h=this.options.createGeocoderElement(this._waypoints[s],s,this._waypoints.length,this.options);return h.on("delete",function(){s>0||this._waypoints.length>2?this.spliceWaypoints(s,1):this.spliceWaypoints(s,1,new o)},this).on("geocoded",function(f){this._updateMarkers(),this._fireChanged(),this._focusGeocoder(s+1),this.fire("waypointgeocoded",{waypointIndex:s,waypoint:f.waypoint})},this).on("reversegeocoded",function(f){this.fire("waypointgeocoded",{waypointIndex:s,waypoint:f.waypoint})},this),h},_updateGeocoders:function(){var s=[],h,f;for(h=0;h<this._geocoderElems.length;h++)this._geocoderContainer.removeChild(this._geocoderElems[h].getContainer());for(h=this._waypoints.length-1;h>=0;h--)f=this._createGeocoder(h),this._geocoderContainer.insertBefore(f.getContainer(),this._geocoderContainer.firstChild),s.push(f);this._geocoderElems=s.reverse()},_removeMarkers:function(){var s;if(this._markers)for(s=0;s<this._markers.length;s++)this._markers[s]&&this._map.removeLayer(this._markers[s]);this._markers=[]},_updateMarkers:function(){var s,h;if(this._map)for(this._removeMarkers(),s=0;s<this._waypoints.length;s++)this._waypoints[s].latLng?(h=this.options.createMarker(s,this._waypoints[s],this._waypoints.length),h&&(h.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(h,s))):h=null,this._markers.push(h)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(s,h,f){var y=function(F){return f?F.latlng:F.target.getLatLng()},x=n.bind(function(F){this.fire("waypointdragstart",{index:h,latlng:y(F)})},this),S=n.bind(function(F){this._waypoints[h].latLng=y(F),this.fire("waypointdrag",{index:h,latlng:y(F)})},this),E=n.bind(function(F){this._waypoints[h].latLng=y(F),this._waypoints[h].name="",this._geocoderElems&&this._geocoderElems[h].update(!0),this.fire("waypointdragend",{index:h,latlng:y(F)}),this._fireChanged()},this),z,D;f?(z=n.bind(function(F){this._markers[h].setLatLng(F.latlng),S(F)},this),D=n.bind(function(F){this._map.dragging.enable(),this._map.off("mouseup",D),this._map.off("mousemove",z),E(F)},this),this._map.dragging.disable(),this._map.on("mousemove",z),this._map.on("mouseup",D),x({latlng:this._waypoints[h].latLng})):(s.on("dragstart",x),s.on("drag",S),s.on("dragend",E))},dragNewWaypoint:function(s){var h=s.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(h,0,s.latlng),this._hookWaypointEvents(this._markers[h],h,!0)):this._dragNewWaypoint(h,s.latlng)},_dragNewWaypoint:function(s,h){var f=new o(h),y=this._waypoints[s-1],x=this._waypoints[s],S=this.options.createMarker(s,f,this._waypoints.length+1),E=[],z=this._map.dragging.enabled(),D=n.bind(function(G){var Z,ee;for(S&&S.setLatLng(G.latlng),Z=0;Z<E.length;Z++)ee=E[Z].getLatLngs(),ee.splice(1,1,G.latlng),E[Z].setLatLngs(ee);n.DomEvent.stop(G)},this),F=n.bind(function(G){var Z;for(S&&this._map.removeLayer(S),Z=0;Z<E.length;Z++)this._map.removeLayer(E[Z]);this._map.off("mousemove",D),this._map.off("mouseup",F),this.spliceWaypoints(s,0,G.latlng),z&&this._map.dragging.enable(),n.DomEvent.stop(G)},this),U;for(S&&S.addTo(this._map),U=0;U<this.options.dragStyles.length;U++)E.push(n.polyline([y.latLng,h,x.latLng],this.options.dragStyles[U]).addTo(this._map));z&&this._map.dragging.disable(),this._map.on("mousemove",D),this._map.on("mouseup",F)},_focusGeocoder:function(s){this._geocoderElems[s]?this._geocoderElems[s].focus():document.activeElement.blur()}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./geocoder-element":52,"./waypoint":61}],61:[function(a,e,t){(function(i){(function(){var n=typeof window<"u"?window.L:typeof i<"u"?i.L:null;e.exports=n.Class.extend({options:{allowUTurn:!1},initialize:function(r,o,s){n.Util.setOptions(this,s),this.latLng=n.latLng(r),this.name=o}})})()}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[53])),Ek}gO();var um={exports:{}},mO=um.exports,Ik;function yO(){return Ik||(Ik=1,(function(a,e){(function(t,i){i(e)})(mO,function(t){var i=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(r){L.Util.setOptions(this,r),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var o=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,o?this._withAnimation:this._noAnimation),this._markerCluster=o?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(r){if(r instanceof L.LayerGroup)return this.addLayers([r]);if(!r.getLatLng)return this._nonPointGroup.addLayer(r),this.fire("layeradd",{layer:r}),this;if(!this._map)return this._needsClustering.push(r),this.fire("layeradd",{layer:r}),this;if(this.hasLayer(r))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(r,this._maxZoom),this.fire("layeradd",{layer:r}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var o=r,s=this._zoom;if(r.__parent)for(;o.__parent._zoom>=s;)o=o.__parent;return this._currentShownBounds.contains(o.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(r,o):this._animationAddLayerNonAnimated(r,o)),this},removeLayer:function(r){return r instanceof L.LayerGroup?this.removeLayers([r]):r.getLatLng?this._map?r.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(r)),this._removeLayer(r,!0),this.fire("layerremove",{layer:r}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),r.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(r)&&(this._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,r)&&this.hasLayer(r)&&this._needsRemoving.push({layer:r,latlng:r._latlng}),this.fire("layerremove",{layer:r}),this):(this._nonPointGroup.removeLayer(r),this.fire("layerremove",{layer:r}),this)},addLayers:function(r,o){if(!L.Util.isArray(r))return this.addLayer(r);var s=this._featureGroup,h=this._nonPointGroup,f=this.options.chunkedLoading,y=this.options.chunkInterval,x=this.options.chunkProgress,S=r.length,E=0,z=!0,D;if(this._map){var F=new Date().getTime(),U=L.bind(function(){var Z=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();E<S;E++){if(f&&E%200===0){var ee=new Date().getTime()-Z;if(ee>y)break}if(D=r[E],D instanceof L.LayerGroup){z&&(r=r.slice(),z=!1),this._extractNonGroupLayers(D,r),S=r.length;continue}if(!D.getLatLng){h.addLayer(D),o||this.fire("layeradd",{layer:D});continue}if(!this.hasLayer(D)&&(this._addLayer(D,this._maxZoom),o||this.fire("layeradd",{layer:D}),D.__parent&&D.__parent.getChildCount()===2)){var ie=D.__parent.getAllChildMarkers(),le=ie[0]===D?ie[1]:ie[0];s.removeLayer(le)}}x&&x(E,S,new Date().getTime()-F),E===S?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(U,this.options.chunkDelay)},this);U()}else for(var G=this._needsClustering;E<S;E++){if(D=r[E],D instanceof L.LayerGroup){z&&(r=r.slice(),z=!1),this._extractNonGroupLayers(D,r),S=r.length;continue}if(!D.getLatLng){h.addLayer(D);continue}this.hasLayer(D)||G.push(D)}return this},removeLayers:function(r){var o,s,h=r.length,f=this._featureGroup,y=this._nonPointGroup,x=!0;if(!this._map){for(o=0;o<h;o++){if(s=r[o],s instanceof L.LayerGroup){x&&(r=r.slice(),x=!1),this._extractNonGroupLayers(s,r),h=r.length;continue}this._arraySplice(this._needsClustering,s),y.removeLayer(s),this.hasLayer(s)&&this._needsRemoving.push({layer:s,latlng:s._latlng}),this.fire("layerremove",{layer:s})}return this}if(this._unspiderfy){this._unspiderfy();var S=r.slice(),E=h;for(o=0;o<E;o++){if(s=S[o],s instanceof L.LayerGroup){this._extractNonGroupLayers(s,S),E=S.length;continue}this._unspiderfyLayer(s)}}for(o=0;o<h;o++){if(s=r[o],s instanceof L.LayerGroup){x&&(r=r.slice(),x=!1),this._extractNonGroupLayers(s,r),h=r.length;continue}if(!s.__parent){y.removeLayer(s),this.fire("layerremove",{layer:s});continue}this._removeLayer(s,!0,!0),this.fire("layerremove",{layer:s}),f.hasLayer(s)&&(f.removeLayer(s),s.clusterShow&&s.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(r){r.off(this._childMarkerEventHandlers,this),delete r.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var r=new L.LatLngBounds;this._topClusterLevel&&r.extend(this._topClusterLevel._bounds);for(var o=this._needsClustering.length-1;o>=0;o--)r.extend(this._needsClustering[o].getLatLng());return r.extend(this._nonPointGroup.getBounds()),r},eachLayer:function(r,o){var s=this._needsClustering.slice(),h=this._needsRemoving,f,y,x;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(s),y=s.length-1;y>=0;y--){for(f=!0,x=h.length-1;x>=0;x--)if(h[x].layer===s[y]){f=!1;break}f&&r.call(o,s[y])}this._nonPointGroup.eachLayer(r,o)},getLayers:function(){var r=[];return this.eachLayer(function(o){r.push(o)}),r},getLayer:function(r){var o=null;return r=parseInt(r,10),this.eachLayer(function(s){L.stamp(s)===r&&(o=s)}),o},hasLayer:function(r){if(!r)return!1;var o,s=this._needsClustering;for(o=s.length-1;o>=0;o--)if(s[o]===r)return!0;for(s=this._needsRemoving,o=s.length-1;o>=0;o--)if(s[o].layer===r)return!1;return!!(r.__parent&&r.__parent._group===this)||this._nonPointGroup.hasLayer(r)},zoomToShowLayer:function(r,o){var s=this._map;typeof o!="function"&&(o=function(){});var h=function(){(s.hasLayer(r)||s.hasLayer(r.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",h,this),this.off("animationend",h,this),s.hasLayer(r)?o():r.__parent._icon&&(this.once("spiderfied",o,this),r.__parent.spiderfy()))};r._icon&&this._map.getBounds().contains(r.getLatLng())?o():r.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",h,this),this._map.panTo(r.getLatLng())):(this._map.on("moveend",h,this),this.on("animationend",h,this),r.__parent.zoomToBounds())},onAdd:function(r){this._map=r;var o,s,h;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(r),this._nonPointGroup.addTo(r),this._gridClusters||this._generateInitialClusters(),this._maxLat=r.options.crs.projection.MAX_LATITUDE,o=0,s=this._needsRemoving.length;o<s;o++)h=this._needsRemoving[o],h.newlatlng=h.layer._latlng,h.layer._latlng=h.latlng;for(o=0,s=this._needsRemoving.length;o<s;o++)h=this._needsRemoving[o],this._removeLayer(h.layer,!0),h.layer._latlng=h.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),s=this._needsClustering,this._needsClustering=[],this.addLayers(s,!0)},onRemove:function(r){r.off("zoomend",this._zoomEnd,this),r.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(r){for(var o=r;o&&!o._icon;)o=o.__parent;return o||null},_arraySplice:function(r,o){for(var s=r.length-1;s>=0;s--)if(r[s]===o)return r.splice(s,1),!0},_removeFromGridUnclustered:function(r,o){for(var s=this._map,h=this._gridUnclustered,f=Math.floor(this._map.getMinZoom());o>=f&&h[o].removeObject(r,s.project(r.getLatLng(),o));o--);},_childMarkerDragStart:function(r){r.target.__dragStart=r.target._latlng},_childMarkerMoved:function(r){if(!this._ignoreMove&&!r.target.__dragStart){var o=r.target._popup&&r.target._popup.isOpen();this._moveChild(r.target,r.oldLatLng,r.latlng),o&&r.target.openPopup()}},_moveChild:function(r,o,s){r._latlng=o,this.removeLayer(r),r._latlng=s,this.addLayer(r)},_childMarkerDragEnd:function(r){var o=r.target.__dragStart;delete r.target.__dragStart,o&&this._moveChild(r.target,o,r.target._latlng)},_removeLayer:function(r,o,s){var h=this._gridClusters,f=this._gridUnclustered,y=this._featureGroup,x=this._map,S=Math.floor(this._map.getMinZoom());o&&this._removeFromGridUnclustered(r,this._maxZoom);var E=r.__parent,z=E._markers,D;for(this._arraySplice(z,r);E&&(E._childCount--,E._boundsNeedUpdate=!0,!(E._zoom<S));)o&&E._childCount<=1?(D=E._markers[0]===r?E._markers[1]:E._markers[0],h[E._zoom].removeObject(E,x.project(E._cLatLng,E._zoom)),f[E._zoom].addObject(D,x.project(D.getLatLng(),E._zoom)),this._arraySplice(E.__parent._childClusters,E),E.__parent._markers.push(D),D.__parent=E.__parent,E._icon&&(y.removeLayer(E),s||y.addLayer(D))):E._iconNeedsUpdate=!0,E=E.__parent;delete r.__parent},_isOrIsParent:function(r,o){for(;o;){if(r===o)return!0;o=o.parentNode}return!1},fire:function(r,o,s){if(o&&o.layer instanceof L.MarkerCluster){if(o.originalEvent&&this._isOrIsParent(o.layer._icon,o.originalEvent.relatedTarget))return;r="cluster"+r}L.FeatureGroup.prototype.fire.call(this,r,o,s)},listens:function(r,o){return L.FeatureGroup.prototype.listens.call(this,r,o)||L.FeatureGroup.prototype.listens.call(this,"cluster"+r,o)},_defaultIconCreateFunction:function(r){var o=r.getChildCount(),s=" marker-cluster-";return o<10?s+="small":o<100?s+="medium":s+="large",new L.DivIcon({html:"<div><span>"+o+"</span></div>",className:"marker-cluster"+s,iconSize:new L.Point(40,40)})},_bindEvents:function(){var r=this._map,o=this.options.spiderfyOnMaxZoom,s=this.options.showCoverageOnHover,h=this.options.zoomToBoundsOnClick,f=this.options.spiderfyOnEveryZoom;(o||h||f)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),s&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),r.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(r){var o=r.layer,s=o;if(!(r.type==="clusterkeypress"&&r.originalEvent&&r.originalEvent.keyCode!==13)){for(;s._childClusters.length===1;)s=s._childClusters[0];s._zoom===this._maxZoom&&s._childCount===o._childCount&&this.options.spiderfyOnMaxZoom?o.spiderfy():this.options.zoomToBoundsOnClick&&o.zoomToBounds(),this.options.spiderfyOnEveryZoom&&o.spiderfy(),r.originalEvent&&r.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(r){var o=this._map;this._inZoomAnimation||(this._shownPolygon&&o.removeLayer(this._shownPolygon),r.layer.getChildCount()>2&&r.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(r.layer.getConvexHull(),this.options.polygonOptions),o.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var r=this.options.spiderfyOnMaxZoom,o=this.options.showCoverageOnHover,s=this.options.zoomToBoundsOnClick,h=this.options.spiderfyOnEveryZoom,f=this._map;(r||s||h)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),o&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),f.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var r=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,r),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),r),this._currentShownBounds=r}},_generateInitialClusters:function(){var r=Math.ceil(this._map.getMaxZoom()),o=Math.floor(this._map.getMinZoom()),s=this.options.maxClusterRadius,h=s;typeof s!="function"&&(h=function(){return s}),this.options.disableClusteringAtZoom!==null&&(r=this.options.disableClusteringAtZoom-1),this._maxZoom=r,this._gridClusters={},this._gridUnclustered={};for(var f=r;f>=o;f--)this._gridClusters[f]=new L.DistanceGrid(h(f)),this._gridUnclustered[f]=new L.DistanceGrid(h(f));this._topClusterLevel=new this._markerCluster(this,o-1)},_addLayer:function(r,o){var s=this._gridClusters,h=this._gridUnclustered,f=Math.floor(this._map.getMinZoom()),y,x;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(r),r.on(this._childMarkerEventHandlers,this);o>=f;o--){y=this._map.project(r.getLatLng(),o);var S=s[o].getNearObject(y);if(S){S._addChild(r),r.__parent=S;return}if(S=h[o].getNearObject(y),S){var E=S.__parent;E&&this._removeLayer(S,!1);var z=new this._markerCluster(this,o,S,r);s[o].addObject(z,this._map.project(z._cLatLng,o)),S.__parent=z,r.__parent=z;var D=z;for(x=o-1;x>E._zoom;x--)D=new this._markerCluster(this,x,D),s[x].addObject(D,this._map.project(S.getLatLng(),x));E._addChild(D),this._removeFromGridUnclustered(S,o);return}h[o].addObject(r,y)}this._topClusterLevel._addChild(r),r.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(r){r instanceof L.MarkerCluster&&r._iconNeedsUpdate&&r._updateIcon()})},_enqueue:function(r){this._queue.push(r),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var r=0;r<this._queue.length;r++)this._queue[r].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var r=Math.round(this._map._zoom);this._processQueue(),this._zoom<r&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,r)):this._zoom>r?(this._animationStart(),this._animationZoomOut(this._zoom,r)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(r){var o=this._maxLat;return o!==void 0&&(r.getNorth()>=o&&(r._northEast.lat=1/0),r.getSouth()<=-o&&(r._southWest.lat=-1/0)),r},_animationAddLayerNonAnimated:function(r,o){if(o===r)this._featureGroup.addLayer(r);else if(o._childCount===2){o._addToMap();var s=o.getAllChildMarkers();this._featureGroup.removeLayer(s[0]),this._featureGroup.removeLayer(s[1])}else o._updateIcon()},_extractNonGroupLayers:function(r,o){var s=r.getLayers(),h=0,f;for(o=o||[];h<s.length;h++){if(f=s[h],f instanceof L.LayerGroup){this._extractNonGroupLayers(f,o);continue}o.push(f)}return o},_overrideMarkerIcon:function(r){var o=r.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[r]}});return o}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(r,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(r,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(r,o){this._animationAddLayerNonAnimated(r,o)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(r,o){var s=this._getExpandedVisibleBounds(),h=this._featureGroup,f=Math.floor(this._map.getMinZoom()),y;this._ignoreMove=!0,this._topClusterLevel._recursively(s,r,f,function(x){var S=x._latlng,E=x._markers,z;for(s.contains(S)||(S=null),x._isSingleParent()&&r+1===o?(h.removeLayer(x),x._recursivelyAddChildrenToMap(null,o,s)):(x.clusterHide(),x._recursivelyAddChildrenToMap(S,o,s)),y=E.length-1;y>=0;y--)z=E[y],s.contains(z._latlng)||h.removeLayer(z)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(s,o),h.eachLayer(function(x){!(x instanceof L.MarkerCluster)&&x._icon&&x.clusterShow()}),this._topClusterLevel._recursively(s,r,o,function(x){x._recursivelyRestoreChildPositions(o)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(s,r,f,function(x){h.removeLayer(x),x.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(r,o){this._animationZoomOutSingle(this._topClusterLevel,r-1,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),r,this._getExpandedVisibleBounds())},_animationAddLayer:function(r,o){var s=this,h=this._featureGroup;h.addLayer(r),o!==r&&(o._childCount>2?(o._updateIcon(),this._forceLayout(),this._animationStart(),r._setPos(this._map.latLngToLayerPoint(o.getLatLng())),r.clusterHide(),this._enqueue(function(){h.removeLayer(r),r.clusterShow(),s._animationEnd()})):(this._forceLayout(),s._animationStart(),s._animationZoomOutSingle(o,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(r,o,s){var h=this._getExpandedVisibleBounds(),f=Math.floor(this._map.getMinZoom());r._recursivelyAnimateChildrenInAndAddSelfToMap(h,f,o+1,s);var y=this;this._forceLayout(),r._recursivelyBecomeVisible(h,s),this._enqueue(function(){if(r._childCount===1){var x=r._markers[0];this._ignoreMove=!0,x.setLatLng(x.getLatLng()),this._ignoreMove=!1,x.clusterShow&&x.clusterShow()}else r._recursively(h,s,f,function(S){S._recursivelyRemoveChildrenFromMap(h,f,o+1)});y._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(r){return new L.MarkerClusterGroup(r)};var n=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(r,o,s,h){L.Marker.prototype.initialize.call(this,s?s._cLatLng||s.getLatLng():new L.LatLng(0,0),{icon:this,pane:r.options.clusterPane}),this._group=r,this._zoom=o,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,s&&this._addChild(s),h&&this._addChild(h)},getAllChildMarkers:function(r,o){r=r||[];for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s].getAllChildMarkers(r,o);for(var h=this._markers.length-1;h>=0;h--)o&&this._markers[h].__dragStart||r.push(this._markers[h]);return r},getChildCount:function(){return this._childCount},zoomToBounds:function(r){for(var o=this._childClusters.slice(),s=this._group._map,h=s.getBoundsZoom(this._bounds),f=this._zoom+1,y=s.getZoom(),x;o.length>0&&h>f;){f++;var S=[];for(x=0;x<o.length;x++)S=S.concat(o[x]._childClusters);o=S}h>f?this._group._map.setView(this._latlng,f):h<=y?this._group._map.setView(this._latlng,y+1):this._group._map.fitBounds(this._bounds,r)},getBounds:function(){var r=new L.LatLngBounds;return r.extend(this._bounds),r},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(r,o){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(r),r instanceof L.MarkerCluster?(o||(this._childClusters.push(r),r.__parent=this),this._childCount+=r._childCount):(o||this._markers.push(r),this._childCount++),this.__parent&&this.__parent._addChild(r,!0)},_setClusterCenter:function(r){this._cLatLng||(this._cLatLng=r._cLatLng||r._latlng)},_resetBounds:function(){var r=this._bounds;r._southWest&&(r._southWest.lat=1/0,r._southWest.lng=1/0),r._northEast&&(r._northEast.lat=-1/0,r._northEast.lng=-1/0)},_recalculateBounds:function(){var r=this._markers,o=this._childClusters,s=0,h=0,f=this._childCount,y,x,S,E;if(f!==0){for(this._resetBounds(),y=0;y<r.length;y++)S=r[y]._latlng,this._bounds.extend(S),s+=S.lat,h+=S.lng;for(y=0;y<o.length;y++)x=o[y],x._boundsNeedUpdate&&x._recalculateBounds(),this._bounds.extend(x._bounds),S=x._wLatLng,E=x._childCount,s+=S.lat*E,h+=S.lng*E;this._latlng=this._wLatLng=new L.LatLng(s/f,h/f),this._boundsNeedUpdate=!1}},_addToMap:function(r){r&&(this._backupLatlng=this._latlng,this.setLatLng(r)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(r,o,s){this._recursively(r,this._group._map.getMinZoom(),s-1,function(h){var f=h._markers,y,x;for(y=f.length-1;y>=0;y--)x=f[y],x._icon&&(x._setPos(o),x.clusterHide())},function(h){var f=h._childClusters,y,x;for(y=f.length-1;y>=0;y--)x=f[y],x._icon&&(x._setPos(o),x.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(r,o,s,h){this._recursively(r,h,o,function(f){f._recursivelyAnimateChildrenIn(r,f._group._map.latLngToLayerPoint(f.getLatLng()).round(),s),f._isSingleParent()&&s-1===h?(f.clusterShow(),f._recursivelyRemoveChildrenFromMap(r,o,s)):f.clusterHide(),f._addToMap()})},_recursivelyBecomeVisible:function(r,o){this._recursively(r,this._group._map.getMinZoom(),o,null,function(s){s.clusterShow()})},_recursivelyAddChildrenToMap:function(r,o,s){this._recursively(s,this._group._map.getMinZoom()-1,o,function(h){if(o!==h._zoom)for(var f=h._markers.length-1;f>=0;f--){var y=h._markers[f];s.contains(y._latlng)&&(r&&(y._backupLatlng=y.getLatLng(),y.setLatLng(r),y.clusterHide&&y.clusterHide()),h._group._featureGroup.addLayer(y))}},function(h){h._addToMap(r)})},_recursivelyRestoreChildPositions:function(r){for(var o=this._markers.length-1;o>=0;o--){var s=this._markers[o];s._backupLatlng&&(s.setLatLng(s._backupLatlng),delete s._backupLatlng)}if(r-1===this._zoom)for(var h=this._childClusters.length-1;h>=0;h--)this._childClusters[h]._restorePosition();else for(var f=this._childClusters.length-1;f>=0;f--)this._childClusters[f]._recursivelyRestoreChildPositions(r)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(r,o,s,h){var f,y;this._recursively(r,o-1,s-1,function(x){for(y=x._markers.length-1;y>=0;y--)f=x._markers[y],(!h||!h.contains(f._latlng))&&(x._group._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow())},function(x){for(y=x._childClusters.length-1;y>=0;y--)f=x._childClusters[y],(!h||!h.contains(f._latlng))&&(x._group._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow())})},_recursively:function(r,o,s,h,f){var y=this._childClusters,x=this._zoom,S,E;if(o<=x&&(h&&h(this),f&&x===s&&f(this)),x<o||x<s)for(S=y.length-1;S>=0;S--)E=y[S],E._boundsNeedUpdate&&E._recalculateBounds(),r.intersects(E._bounds)&&E._recursively(r,o,s,h,f)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var r=this.options.opacity;return this.setOpacity(0),this.options.opacity=r,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(r){this._cellSize=r,this._sqCellSize=r*r,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(r,o){var s=this._getCoord(o.x),h=this._getCoord(o.y),f=this._grid,y=f[h]=f[h]||{},x=y[s]=y[s]||[],S=L.Util.stamp(r);this._objectPoint[S]=o,x.push(r)},updateObject:function(r,o){this.removeObject(r),this.addObject(r,o)},removeObject:function(r,o){var s=this._getCoord(o.x),h=this._getCoord(o.y),f=this._grid,y=f[h]=f[h]||{},x=y[s]=y[s]||[],S,E;for(delete this._objectPoint[L.Util.stamp(r)],S=0,E=x.length;S<E;S++)if(x[S]===r)return x.splice(S,1),E===1&&delete y[s],!0},eachObject:function(r,o){var s,h,f,y,x,S,E,z=this._grid;for(s in z){x=z[s];for(h in x)for(S=x[h],f=0,y=S.length;f<y;f++)E=r.call(o,S[f]),E&&(f--,y--)}},getNearObject:function(r){var o=this._getCoord(r.x),s=this._getCoord(r.y),h,f,y,x,S,E,z,D,F=this._objectPoint,U=this._sqCellSize,G=null;for(h=s-1;h<=s+1;h++)if(x=this._grid[h],x){for(f=o-1;f<=o+1;f++)if(S=x[f],S)for(y=0,E=S.length;y<E;y++)z=S[y],D=this._sqDist(F[L.Util.stamp(z)],r),(D<U||D<=U&&G===null)&&(U=D,G=z)}return G},_getCoord:function(r){var o=Math.floor(r/this._cellSize);return isFinite(o)?o:r},_sqDist:function(r,o){var s=o.x-r.x,h=o.y-r.y;return s*s+h*h}},(function(){L.QuickHull={getDistant:function(r,o){var s=o[1].lat-o[0].lat,h=o[0].lng-o[1].lng;return h*(r.lat-o[0].lat)+s*(r.lng-o[0].lng)},findMostDistantPointFromBaseLine:function(r,o){var s=0,h=null,f=[],y,x,S;for(y=o.length-1;y>=0;y--){if(x=o[y],S=this.getDistant(x,r),S>0)f.push(x);else continue;S>s&&(s=S,h=x)}return{maxPoint:h,newPoints:f}},buildConvexHull:function(r,o){var s=[],h=this.findMostDistantPointFromBaseLine(r,o);return h.maxPoint?(s=s.concat(this.buildConvexHull([r[0],h.maxPoint],h.newPoints)),s=s.concat(this.buildConvexHull([h.maxPoint,r[1]],h.newPoints)),s):[r[0]]},getConvexHull:function(r){var o=!1,s=!1,h=!1,f=!1,y=null,x=null,S=null,E=null,z=null,D=null,F;for(F=r.length-1;F>=0;F--){var U=r[F];(o===!1||U.lat>o)&&(y=U,o=U.lat),(s===!1||U.lat<s)&&(x=U,s=U.lat),(h===!1||U.lng>h)&&(S=U,h=U.lng),(f===!1||U.lng<f)&&(E=U,f=U.lng)}s!==o?(D=x,z=y):(D=E,z=S);var G=[].concat(this.buildConvexHull([D,z],r),this.buildConvexHull([z,D],r));return G}}})(),L.MarkerCluster.include({getConvexHull:function(){var r=this.getAllChildMarkers(),o=[],s,h;for(h=r.length-1;h>=0;h--)s=r[h].getLatLng(),o.push(s);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var r=this.getAllChildMarkers(null,!0),o=this._group,s=o._map,h=s.latLngToLayerPoint(this._latlng),f;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?f=this._group.options.spiderfyShapePositions(r.length,h):r.length>=this._circleSpiralSwitchover?f=this._generatePointsSpiral(r.length,h):(h.y+=10,f=this._generatePointsCircle(r.length,h)),this._animationSpiderfy(r,f)}},unspiderfy:function(r){this._group._inZoomAnimation||(this._animationUnspiderfy(r),this._group._spiderfied=null)},_generatePointsCircle:function(r,o){var s=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+r),h=s/this._2PI,f=this._2PI/r,y=[],x,S;for(h=Math.max(h,35),y.length=r,x=0;x<r;x++)S=this._circleStartAngle+x*f,y[x]=new L.Point(o.x+h*Math.cos(S),o.y+h*Math.sin(S))._round();return y},_generatePointsSpiral:function(r,o){var s=this._group.options.spiderfyDistanceMultiplier,h=s*this._spiralLengthStart,f=s*this._spiralFootSeparation,y=s*this._spiralLengthFactor*this._2PI,x=0,S=[],E;for(S.length=r,E=r;E>=0;E--)E<r&&(S[E]=new L.Point(o.x+h*Math.cos(x),o.y+h*Math.sin(x))._round()),x+=f/h+E*5e-4,h+=y/x;return S},_noanimationUnspiderfy:function(){var r=this._group,o=r._map,s=r._featureGroup,h=this.getAllChildMarkers(null,!0),f,y;for(r._ignoreMove=!0,this.setOpacity(1),y=h.length-1;y>=0;y--)f=h[y],s.removeLayer(f),f._preSpiderfyLatlng&&(f.setLatLng(f._preSpiderfyLatlng),delete f._preSpiderfyLatlng),f.setZIndexOffset&&f.setZIndexOffset(0),f._spiderLeg&&(o.removeLayer(f._spiderLeg),delete f._spiderLeg);r.fire("unspiderfied",{cluster:this,markers:h}),r._ignoreMove=!1,r._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(r,o){var s=this._group,h=s._map,f=s._featureGroup,y=this._group.options.spiderLegPolylineOptions,x,S,E,z;for(s._ignoreMove=!0,x=0;x<r.length;x++)z=h.layerPointToLatLng(o[x]),S=r[x],E=new L.Polyline([this._latlng,z],y),h.addLayer(E),S._spiderLeg=E,S._preSpiderfyLatlng=S._latlng,S.setLatLng(z),S.setZIndexOffset&&S.setZIndexOffset(1e6),f.addLayer(S);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:r})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(r,o){var s=this,h=this._group,f=h._map,y=h._featureGroup,x=this._latlng,S=f.latLngToLayerPoint(x),E=L.Path.SVG,z=L.extend({},this._group.options.spiderLegPolylineOptions),D=z.opacity,F,U,G,Z,ee,ie;for(D===void 0&&(D=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),E?(z.opacity=0,z.className=(z.className||"")+" leaflet-cluster-spider-leg"):z.opacity=D,h._ignoreMove=!0,F=0;F<r.length;F++)U=r[F],ie=f.layerPointToLatLng(o[F]),G=new L.Polyline([x,ie],z),f.addLayer(G),U._spiderLeg=G,E&&(Z=G._path,ee=Z.getTotalLength()+.1,Z.style.strokeDasharray=ee,Z.style.strokeDashoffset=ee),U.setZIndexOffset&&U.setZIndexOffset(1e6),U.clusterHide&&U.clusterHide(),y.addLayer(U),U._setPos&&U._setPos(S);for(h._forceLayout(),h._animationStart(),F=r.length-1;F>=0;F--)ie=f.layerPointToLatLng(o[F]),U=r[F],U._preSpiderfyLatlng=U._latlng,U.setLatLng(ie),U.clusterShow&&U.clusterShow(),E&&(G=U._spiderLeg,Z=G._path,Z.style.strokeDashoffset=0,G.setStyle({opacity:D}));this.setOpacity(.3),h._ignoreMove=!1,setTimeout(function(){h._animationEnd(),h.fire("spiderfied",{cluster:s,markers:r})},200)},_animationUnspiderfy:function(r){var o=this,s=this._group,h=s._map,f=s._featureGroup,y=r?h._latLngToNewLayerPoint(this._latlng,r.zoom,r.center):h.latLngToLayerPoint(this._latlng),x=this.getAllChildMarkers(null,!0),S=L.Path.SVG,E,z,D,F,U,G;for(s._ignoreMove=!0,s._animationStart(),this.setOpacity(1),z=x.length-1;z>=0;z--)E=x[z],E._preSpiderfyLatlng&&(E.closePopup(),E.setLatLng(E._preSpiderfyLatlng),delete E._preSpiderfyLatlng,G=!0,E._setPos&&(E._setPos(y),G=!1),E.clusterHide&&(E.clusterHide(),G=!1),G&&f.removeLayer(E),S&&(D=E._spiderLeg,F=D._path,U=F.getTotalLength()+.1,F.style.strokeDashoffset=U,D.setStyle({opacity:0})));s._ignoreMove=!1,setTimeout(function(){var Z=0;for(z=x.length-1;z>=0;z--)E=x[z],E._spiderLeg&&Z++;for(z=x.length-1;z>=0;z--)E=x[z],E._spiderLeg&&(E.clusterShow&&E.clusterShow(),E.setZIndexOffset&&E.setZIndexOffset(0),Z>1&&f.removeLayer(E),h.removeLayer(E._spiderLeg),delete E._spiderLeg);s._animationEnd(),s.fire("unspiderfied",{cluster:o,markers:x})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(r){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(r))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(r){this._spiderfied&&this._spiderfied.unspiderfy(r)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(r){r._spiderLeg&&(this._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow(),r.setZIndexOffset&&r.setZIndexOffset(0),this._map.removeLayer(r._spiderLeg),delete r._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(r){return r?r instanceof L.MarkerClusterGroup?r=r._topClusterLevel.getAllChildMarkers():r instanceof L.LayerGroup?r=r._layers:r instanceof L.MarkerCluster?r=r.getAllChildMarkers():r instanceof L.Marker&&(r=[r]):r=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(r),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(r),this},_flagParentsIconsNeedUpdate:function(r){var o,s;for(o in r)for(s=r[o].__parent;s;)s._iconNeedsUpdate=!0,s=s.__parent},_refreshSingleMarkerModeMarkers:function(r){var o,s;for(o in r)s=r[o],this.hasLayer(s)&&s.setIcon(this._overrideMarkerIcon(s))}}),L.Marker.include({refreshIconOptions:function(r,o){var s=this.options.icon;return L.setOptions(s,r),this.setIcon(s),o&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=i,t.MarkerCluster=n,Object.defineProperty(t,"__esModule",{value:!0})})})(um,um.exports)),um.exports}yO();function wh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function oE(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.__proto__=e}var uc={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},tg={duration:.5,overwrite:!1,delay:0},B1,Do,ds,Lc=1e8,Hr=1/Lc,yb=Math.PI*2,_O=yb/4,xO=0,lE=Math.sqrt,vO=Math.cos,bO=Math.sin,wo=function(e){return typeof e=="string"},Ps=function(e){return typeof e=="function"},zh=function(e){return typeof e=="number"},j1=function(e){return typeof e>"u"},Uu=function(e){return typeof e=="object"},Ol=function(e){return e!==!1},V1=function(){return typeof window<"u"},u0=function(e){return Ps(e)||wo(e)},cE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ko=Array.isArray,wO=/random\([^)]+\)/g,SO=/,\s*/g,Pk=/(?:-?\.?\d|\.)+/gi,uE=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Op=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,mv=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,hE=/[+-]=-?[.\d]+/,kO=/[^,'"\[\]\s]+/gi,CO=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,bs,Ou,_b,H1,dc={},d_={},dE,fE=function(e){return(d_=ig(e,dc))&&Bl},U1=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},$m=function(e,t){return!t&&console.warn(e)},pE=function(e,t){return e&&(dc[e]=t)&&d_&&(d_[e]=t)||dc},Gm=function(){return 0},AO={suppressEvents:!0,isStart:!0,kill:!1},H0={suppressEvents:!0,kill:!1},TO={suppressEvents:!0},$1={},cd=[],xb={},gE,ac={},yv={},Lk=30,U0=[],G1="",W1=function(e){var t=e[0],i,n;if(Uu(t)||Ps(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(n=U0.length;n--&&!U0[n].targetTest(t););i=U0[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new BE(e[n],i)))||e.splice(n,1);return e},Sf=function(e){return e._gsap||W1(Dc(e))[0]._gsap},mE=function(e,t,i){return(i=e[t])&&Ps(i)?e[t]():j1(i)&&e.getAttribute&&e.getAttribute(t)||i},zl=function(e,t){return(e=e.split(",")).forEach(t)||e},Hs=function(e){return Math.round(e*1e5)/1e5||0},vs=function(e){return Math.round(e*1e7)/1e7||0},Wp=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+n:i==="-"?e-n:i==="*"?e*n:e/n},EO=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},f_=function(){var e=cd.length,t=cd.slice(0),i,n;for(xb={},cd.length=0,i=0;i<e;i++)n=t[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},X1=function(e){return!!(e._initted||e._startAt||e.add)},yE=function(e,t,i,n){cd.length&&!Do&&f_(),e.render(t,i,!!(Do&&t<0&&X1(e))),cd.length&&!Do&&f_()},_E=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(kO).length<2?t:wo(e)?e.trim():e},xE=function(e){return e},fc=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},MO=function(e){return function(t,i){for(var n in i)n in t||n==="duration"&&e||n==="ease"||(t[n]=i[n])}},ig=function(e,t){for(var i in t)e[i]=t[i];return e},Dk=function a(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Uu(t[i])?a(e[i]||(e[i]={}),t[i]):t[i]);return e},p_=function(e,t){var i={},n;for(n in e)n in t||(i[n]=e[n]);return i},km=function(e){var t=e.parent||bs,i=e.keyframes?MO(Ko(e.keyframes)):fc;if(Ol(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},IO=function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0},vE=function(e,t,i,n,r){var o=e[n],s;if(r)for(s=t[r];o&&o[r]>s;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=o,t.parent=t._dp=e,t},W_=function(e,t,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var r=t._prev,o=t._next;r?r._next=o:e[i]===t&&(e[i]=o),o?o._prev=r:e[n]===t&&(e[n]=r),t._next=t._prev=t.parent=null},pd=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},kf=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},PO=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},vb=function(e,t,i,n){return e._startAt&&(Do?e._startAt.revert(H0):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},LO=function a(e){return!e||e._ts&&a(e.parent)},Rk=function(e){return e._repeat?ng(e._tTime,e=e.duration()+e._rDelay)*e:0},ng=function(e,t){var i=Math.floor(e=vs(e/t));return e&&i===e?i-1:i},g_=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},X_=function(e){return e._end=vs(e._start+(e._tDur/Math.abs(e._ts||e._rts||Hr)||0))},Y_=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=vs(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),X_(e),i._dirty||kf(i,e)),e},bE=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=g_(e.rawTime(),t),(!t._dur||yy(0,t.totalDuration(),i)-t._tTime>Hr)&&t.render(i,!0)),kf(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Hr}},Nu=function(e,t,i,n){return t.parent&&pd(t),t._start=vs((zh(i)?i:i||e!==bs?Ec(e,i,t):e._time)+t._delay),t._end=vs(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),vE(e,t,"_first","_last",e._sort?"_start":0),bb(t)||(e._recent=t),n||bE(e,t),e._ts<0&&Y_(e,e._tTime),e},wE=function(e,t){return(dc.ScrollTrigger||U1("scrollTrigger",t))&&dc.ScrollTrigger.create(t,e)},SE=function(e,t,i,n,r){if(q1(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!Do&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&gE!==sc.frame)return cd.push(e),e._lazy=[r,n],1},DO=function a(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||a(t))},bb=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},RO=function(e,t,i,n){var r=e.ratio,o=t<0||!t&&(!e._start&&DO(e)&&!(!e._initted&&bb(e))||(e._ts<0||e._dp._ts<0)&&!bb(e))?0:1,s=e._rDelay,h=0,f,y,x;if(s&&e._repeat&&(h=yy(0,e._tDur,t),y=ng(h,s),e._yoyo&&y&1&&(o=1-o),y!==ng(e._tTime,s)&&(r=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==r||Do||n||e._zTime===Hr||!t&&e._zTime){if(!e._initted&&SE(e,t,n,i,h))return;for(x=e._zTime,e._zTime=t||(i?Hr:0),i||(i=t&&!x),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=h,f=e._pt;f;)f.r(o,f.d),f=f._next;t<0&&vb(e,t,i,!0),e._onUpdate&&!i&&lc(e,"onUpdate"),h&&e._repeat&&!i&&e.parent&&lc(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&pd(e,1),!i&&!Do&&(lc(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},OO=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<t)return n;n=n._prev}},ag=function(e,t,i,n){var r=e._repeat,o=vs(t)||0,s=e._tTime/e._tDur;return s&&!n&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:vs(o*(r+1)+e._rDelay*r):o,s>0&&!n&&Y_(e,e._tTime=e._tDur*s),e.parent&&X_(e),i||kf(e.parent,e),e},Ok=function(e){return e instanceof dl?kf(e):ag(e,e._dur)},zO={_start:0,endTime:Gm,totalDuration:Gm},Ec=function a(e,t,i){var n=e.labels,r=e._recent||zO,o=e.duration()>=Lc?r.endTime(!1):e._dur,s,h,f;return wo(t)&&(isNaN(t)||t in n)?(h=t.charAt(0),f=t.substr(-1)==="%",s=t.indexOf("="),h==="<"||h===">"?(s>=0&&(t=t.replace(/=/,"")),(h==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(f?(s<0?r:i).totalDuration()/100:1)):s<0?(t in n||(n[t]=o),n[t]):(h=parseFloat(t.charAt(s-1)+t.substr(s+1)),f&&i&&(h=h/100*(Ko(i)?i[0]:i).totalDuration()),s>1?a(e,t.substr(0,s-1),i)+h:o+h)):t==null?o:+t},Cm=function(e,t,i){var n=zh(t[1]),r=(n?2:1)+(e<2?0:1),o=t[r],s,h;if(n&&(o.duration=t[1]),o.parent=i,e){for(s=o,h=i;h&&!("immediateRender"in s);)s=h.vars.defaults||{},h=Ol(h.vars.inherit)&&h.parent;o.immediateRender=Ol(s.immediateRender),e<2?o.runBackwards=1:o.startAt=t[r-1]}return new to(t[0],o,t[r+1])},kd=function(e,t){return e||e===0?t(e):t},yy=function(e,t,i){return i<e?e:i>t?t:i},Yo=function(e,t){return!wo(e)||!(t=CO.exec(e))?"":t[1]},FO=function(e,t,i){return kd(i,function(n){return yy(e,t,n)})},wb=[].slice,kE=function(e,t){return e&&Uu(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Uu(e[0]))&&!e.nodeType&&e!==Ou},NO=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(n){var r;return wo(n)&&!t||kE(n,1)?(r=i).push.apply(r,Dc(n)):i.push(n)})||i},Dc=function(e,t,i){return ds&&!t&&ds.selector?ds.selector(e):wo(e)&&!i&&(_b||!rg())?wb.call((t||H1).querySelectorAll(e),0):Ko(e)?NO(e,i):kE(e)?wb.call(e,0):e?[e]:[]},Sb=function(e){return e=Dc(e)[0]||$m("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Dc(t,i.querySelectorAll?i:i===e?$m("Invalid scope")||H1.createElement("div"):e)}},CE=function(e){return e.sort(function(){return .5-Math.random()})},AE=function(e){if(Ps(e))return e;var t=Uu(e)?e:{each:e},i=Cf(t.ease),n=t.from||0,r=parseFloat(t.base)||0,o={},s=n>0&&n<1,h=isNaN(n)||s,f=t.axis,y=n,x=n;return wo(n)?y=x={center:.5,edges:.5,end:1}[n]||0:!s&&h&&(y=n[0],x=n[1]),function(S,E,z){var D=(z||t).length,F=o[D],U,G,Z,ee,ie,le,J,re,ae;if(!F){if(ae=t.grid==="auto"?0:(t.grid||[1,Lc])[1],!ae){for(J=-Lc;J<(J=z[ae++].getBoundingClientRect().left)&&ae<D;);ae<D&&ae--}for(F=o[D]=[],U=h?Math.min(ae,D)*y-.5:n%ae,G=ae===Lc?0:h?D*x/ae-.5:n/ae|0,J=0,re=Lc,le=0;le<D;le++)Z=le%ae-U,ee=G-(le/ae|0),F[le]=ie=f?Math.abs(f==="y"?ee:Z):lE(Z*Z+ee*ee),ie>J&&(J=ie),ie<re&&(re=ie);n==="random"&&CE(F),F.max=J-re,F.min=re,F.v=D=(parseFloat(t.amount)||parseFloat(t.each)*(ae>D?D-1:f?f==="y"?D/ae:ae:Math.max(ae,D/ae))||0)*(n==="edges"?-1:1),F.b=D<0?r-D:r,F.u=Yo(t.amount||t.each)||0,i=i&&D<0?zE(i):i}return D=(F[S]-F.min)/F.max||0,vs(F.b+(i?i(D):D)*F.v)+F.u}},kb=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=vs(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(zh(i)?0:Yo(i))}},TE=function(e,t){var i=Ko(e),n,r;return!i&&Uu(e)&&(n=i=e.radius||Lc,e.values?(e=Dc(e.values),(r=!zh(e[0]))&&(n*=n)):e=kb(e.increment)),kd(t,i?Ps(e)?function(o){return r=e(o),Math.abs(r-o)<=n?r:o}:function(o){for(var s=parseFloat(r?o.x:o),h=parseFloat(r?o.y:0),f=Lc,y=0,x=e.length,S,E;x--;)r?(S=e[x].x-s,E=e[x].y-h,S=S*S+E*E):S=Math.abs(e[x]-s),S<f&&(f=S,y=x);return y=!n||f<=n?e[y]:o,r||y===o||zh(o)?y:y+Yo(o)}:kb(e))},EE=function(e,t,i,n){return kd(Ko(e)?!t:i===!0?!!(i=0):!n,function(){return Ko(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*n)/n})},BO=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduce(function(r,o){return o(r)},n)}},jO=function(e,t){return function(i){return e(parseFloat(i))+(t||Yo(i))}},VO=function(e,t,i){return IE(e,t,0,1,i)},ME=function(e,t,i){return kd(i,function(n){return e[~~t(n)]})},HO=function a(e,t,i){var n=t-e;return Ko(e)?ME(e,a(0,e.length),t):kd(i,function(r){return(n+(r-e)%n)%n+e})},UO=function a(e,t,i){var n=t-e,r=n*2;return Ko(e)?ME(e,a(0,e.length-1),t):kd(i,function(o){return o=(r+(o-e)%r)%r||0,e+(o>n?r-o:o)})},Wm=function(e){return e.replace(wO,function(t){var i=t.indexOf("[")+1,n=t.substring(i||7,i?t.indexOf("]"):t.length-1).split(SO);return EE(i?n:+n[0],i?0:+n[1],+n[2]||1e-5)})},IE=function(e,t,i,n,r){var o=t-e,s=n-i;return kd(r,function(h){return i+((h-e)/o*s||0)})},$O=function a(e,t,i,n){var r=isNaN(e+t)?0:function(E){return(1-E)*e+E*t};if(!r){var o=wo(e),s={},h,f,y,x,S;if(i===!0&&(n=1)&&(i=null),o)e={p:e},t={p:t};else if(Ko(e)&&!Ko(t)){for(y=[],x=e.length,S=x-2,f=1;f<x;f++)y.push(a(e[f-1],e[f]));x--,r=function(z){z*=x;var D=Math.min(S,~~z);return y[D](z-D)},i=t}else n||(e=ig(Ko(e)?[]:{},e));if(!y){for(h in t)Y1.call(s,e,h,"get",t[h]);r=function(z){return J1(z,s)||(o?e.p:e)}}}return kd(i,r)},zk=function(e,t,i){var n=e.labels,r=Lc,o,s,h;for(o in n)s=n[o]-t,s<0==!!i&&s&&r>(s=Math.abs(s))&&(h=o,r=s);return h},lc=function(e,t,i){var n=e.vars,r=n[t],o=ds,s=e._ctx,h,f,y;if(r)return h=n[t+"Params"],f=n.callbackScope||e,i&&cd.length&&f_(),s&&(ds=s),y=h?r.apply(f,h):r.call(f),ds=o,y},hm=function(e){return pd(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Do),e.progress()<1&&lc(e,"onInterrupt"),e},zp,PE=[],LE=function(e){if(e)if(e=!e.name&&e.default||e,V1()||e.headless){var t=e.name,i=Ps(e),n=t&&!i&&e.init?function(){this._props=[]}:e,r={init:Gm,render:J1,add:Y1,kill:s3,modifier:r3,rawVars:0},o={targetTest:0,get:0,getSetter:K1,aliases:{},register:0};if(rg(),e!==n){if(ac[t])return;fc(n,fc(p_(e,r),o)),ig(n.prototype,ig(r,p_(e,o))),ac[n.prop=t]=n,e.targetTest&&(U0.push(n),$1[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}pE(t,n),e.register&&e.register(Bl,n,Fl)}else PE.push(e)},Vr=255,dm={aqua:[0,Vr,Vr],lime:[0,Vr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Vr],navy:[0,0,128],white:[Vr,Vr,Vr],olive:[128,128,0],yellow:[Vr,Vr,0],orange:[Vr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Vr,0,0],pink:[Vr,192,203],cyan:[0,Vr,Vr],transparent:[Vr,Vr,Vr,0]},_v=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Vr+.5|0},DE=function(e,t,i){var n=e?zh(e)?[e>>16,e>>8&Vr,e&Vr]:0:dm.black,r,o,s,h,f,y,x,S,E,z;if(!n){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),dm[e])n=dm[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),o=e.charAt(2),s=e.charAt(3),e="#"+r+r+o+o+s+s+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return n=parseInt(e.substr(1,6),16),[n>>16,n>>8&Vr,n&Vr,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),n=[e>>16,e>>8&Vr,e&Vr]}else if(e.substr(0,3)==="hsl"){if(n=z=e.match(Pk),!t)h=+n[0]%360/360,f=+n[1]/100,y=+n[2]/100,o=y<=.5?y*(f+1):y+f-y*f,r=y*2-o,n.length>3&&(n[3]*=1),n[0]=_v(h+1/3,r,o),n[1]=_v(h,r,o),n[2]=_v(h-1/3,r,o);else if(~e.indexOf("="))return n=e.match(uE),i&&n.length<4&&(n[3]=1),n}else n=e.match(Pk)||dm.transparent;n=n.map(Number)}return t&&!z&&(r=n[0]/Vr,o=n[1]/Vr,s=n[2]/Vr,x=Math.max(r,o,s),S=Math.min(r,o,s),y=(x+S)/2,x===S?h=f=0:(E=x-S,f=y>.5?E/(2-x-S):E/(x+S),h=x===r?(o-s)/E+(o<s?6:0):x===o?(s-r)/E+2:(r-o)/E+4,h*=60),n[0]=~~(h+.5),n[1]=~~(f*100+.5),n[2]=~~(y*100+.5)),i&&n.length<4&&(n[3]=1),n},RE=function(e){var t=[],i=[],n=-1;return e.split(ud).forEach(function(r){var o=r.match(Op)||[];t.push.apply(t,o),i.push(n+=o.length+1)}),t.c=i,t},Fk=function(e,t,i){var n="",r=(e+n).match(ud),o=t?"hsla(":"rgba(",s=0,h,f,y,x;if(!r)return e;if(r=r.map(function(S){return(S=DE(S,t,1))&&o+(t?S[0]+","+S[1]+"%,"+S[2]+"%,"+S[3]:S.join(","))+")"}),i&&(y=RE(e),h=i.c,h.join(n)!==y.c.join(n)))for(f=e.replace(ud,"1").split(Op),x=f.length-1;s<x;s++)n+=f[s]+(~h.indexOf(s)?r.shift()||o+"0,0,0,0)":(y.length?y:r.length?r:i).shift());if(!f)for(f=e.split(ud),x=f.length-1;s<x;s++)n+=f[s]+r[s];return n+f[x]},ud=(function(){var a="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in dm)a+="|"+e+"\\b";return new RegExp(a+")","gi")})(),GO=/hsl[a]?\(/,OE=function(e){var t=e.join(" "),i;if(ud.lastIndex=0,ud.test(t))return i=GO.test(t),e[1]=Fk(e[1],i),e[0]=Fk(e[0],i,RE(e[1])),!0},Xm,sc=(function(){var a=Date.now,e=500,t=33,i=a(),n=i,r=1e3/240,o=r,s=[],h,f,y,x,S,E,z=function D(F){var U=a()-n,G=F===!0,Z,ee,ie,le;if((U>e||U<0)&&(i+=U-t),n+=U,ie=n-i,Z=ie-o,(Z>0||G)&&(le=++x.frame,S=ie-x.time*1e3,x.time=ie=ie/1e3,o+=Z+(Z>=r?4:r-Z),ee=1),G||(h=f(D)),ee)for(E=0;E<s.length;E++)s[E](ie,S,le,F)};return x={time:0,frame:0,tick:function(){z(!0)},deltaRatio:function(F){return S/(1e3/(F||60))},wake:function(){dE&&(!_b&&V1()&&(Ou=_b=window,H1=Ou.document||{},dc.gsap=Bl,(Ou.gsapVersions||(Ou.gsapVersions=[])).push(Bl.version),fE(d_||Ou.GreenSockGlobals||!Ou.gsap&&Ou||{}),PE.forEach(LE)),y=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&x.sleep(),f=y||function(F){return setTimeout(F,o-x.time*1e3+1|0)},Xm=1,z(2))},sleep:function(){(y?cancelAnimationFrame:clearTimeout)(h),Xm=0,f=Gm},lagSmoothing:function(F,U){e=F||1/0,t=Math.min(U||33,e)},fps:function(F){r=1e3/(F||240),o=x.time*1e3+r},add:function(F,U,G){var Z=U?function(ee,ie,le,J){F(ee,ie,le,J),x.remove(Z)}:F;return x.remove(F),s[G?"unshift":"push"](Z),rg(),Z},remove:function(F,U){~(U=s.indexOf(F))&&s.splice(U,1)&&E>=U&&E--},_listeners:s},x})(),rg=function(){return!Xm&&sc.wake()},$a={},WO=/^[\d.\-M][\d.\-,\s]/,XO=/["']/g,YO=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),n=i[0],r=1,o=i.length,s,h,f;r<o;r++)h=i[r],s=r!==o-1?h.lastIndexOf(","):h.length,f=h.substr(0,s),t[n]=isNaN(f)?f.replace(XO,"").trim():+f,n=h.substr(s+1).trim();return t},qO=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",t);return e.substring(t,~n&&n<i?e.indexOf(")",i+1):i)},ZO=function(e){var t=(e+"").split("("),i=$a[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[YO(t[1])]:qO(e).split(",").map(_E)):$a._CE&&WO.test(e)?$a._CE("",e):i},zE=function(e){return function(t){return 1-e(1-t)}},FE=function a(e,t){for(var i=e._first,n;i;)i instanceof dl?a(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?a(i.timeline,t):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=t)),i=i._next},Cf=function(e,t){return e&&(Ps(e)?e:$a[e]||ZO(e))||t},Uf=function(e,t,i,n){i===void 0&&(i=function(h){return 1-t(1-h)}),n===void 0&&(n=function(h){return h<.5?t(h*2)/2:1-t((1-h)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:n},o;return zl(e,function(s){$a[s]=dc[s]=r,$a[o=s.toLowerCase()]=i;for(var h in r)$a[o+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=$a[s+"."+h]=r[h]}),r},NE=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},xv=function a(e,t,i){var n=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),o=r/yb*(Math.asin(1/n)||0),s=function(y){return y===1?1:n*Math.pow(2,-10*y)*bO((y-o)*r)+1},h=e==="out"?s:e==="in"?function(f){return 1-s(1-f)}:NE(s);return r=yb/r,h.config=function(f,y){return a(e,f,y)},h},vv=function a(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},n=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:NE(i);return n.config=function(r){return a(e,r)},n};zl("Linear,Quad,Cubic,Quart,Quint,Strong",function(a,e){var t=e<5?e+1:e;Uf(a+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});$a.Linear.easeNone=$a.none=$a.Linear.easeIn;Uf("Elastic",xv("in"),xv("out"),xv());(function(a,e){var t=1/e,i=2*t,n=2.5*t,r=function(s){return s<t?a*s*s:s<i?a*Math.pow(s-1.5/e,2)+.75:s<n?a*(s-=2.25/e)*s+.9375:a*Math.pow(s-2.625/e,2)+.984375};Uf("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);Uf("Expo",function(a){return Math.pow(2,10*(a-1))*a+a*a*a*a*a*a*(1-a)});Uf("Circ",function(a){return-(lE(1-a*a)-1)});Uf("Sine",function(a){return a===1?1:-vO(a*_O)+1});Uf("Back",vv("in"),vv("out"),vv());$a.SteppedEase=$a.steps=dc.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,n=e+(t?0:1),r=t?1:0,o=1-Hr;return function(s){return((n*yy(0,o,s)|0)+r)*i}}};tg.ease=$a["quad.out"];zl("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(a){return G1+=a+","+a+"Params,"});var BE=function(e,t){this.id=xO++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:mE,this.set=t?t.getSetter:K1},Ym=(function(){function a(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ag(this,+t.duration,1,1),this.data=t.data,ds&&(this._ctx=ds,ds.data.push(this)),Xm||sc.wake()}var e=a.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,ag(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,n){if(rg(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Y_(this,i),!r._dp||r.parent||bE(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Nu(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Hr||!this._initted&&this._dur&&i||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),yE(this,i,n)),this},e.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Rk(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},e.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Rk(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,n){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,n):this._repeat?ng(this._tTime,r)+1:1},e.timeScale=function(i,n){if(!arguments.length)return this._rts===-Hr?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?g_(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Hr?0:this._rts,this.totalTime(yy(-Math.abs(this._delay),this.totalDuration(),r),n!==!1),X_(this),PO(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(rg(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Hr&&(this._tTime-=Hr)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=vs(i);var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Nu(n,this,this._start-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Ol(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?g_(n.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=TO);var n=Do;return Do=i,X1(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Do=n,this},e.globalTime=function(i){for(var n=this,r=arguments.length?i:n.rawTime();n;)r=n._start+r/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Ok(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,Ok(this),n?this.time(n):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,n){return this.totalTime(Ec(this,i),Ol(n))},e.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Ol(n)),this._dur||(this._zTime=-Hr),this},e.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},e.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},e.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Hr:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Hr,this},e.isActive=function(){var i=this.parent||this._dp,n=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=n&&r<this.endTime(!0)-Hr)},e.eventCallback=function(i,n,r){var o=this.vars;return arguments.length>1?(n?(o[i]=n,r&&(o[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=n)):delete o[i],this):o[i]},e.then=function(i){var n=this,r=n._prom;return new Promise(function(o){var s=Ps(i)?i:xE,h=function(){var y=n.then;n.then=null,r&&r(),Ps(s)&&(s=s(n))&&(s.then||s===n)&&(n.then=y),o(s),n.then=y};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?h():n._prom=h})},e.kill=function(){hm(this)},a})();fc(Ym.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Hr,_prom:0,_ps:!1,_rts:1});var dl=(function(a){oE(e,a);function e(i,n){var r;return i===void 0&&(i={}),r=a.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=Ol(i.sortChildren),bs&&Nu(i.parent||bs,wh(r),n),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&wE(wh(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(n,r,o){return Cm(0,arguments,this),this},t.from=function(n,r,o){return Cm(1,arguments,this),this},t.fromTo=function(n,r,o,s){return Cm(2,arguments,this),this},t.set=function(n,r,o){return r.duration=0,r.parent=this,km(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new to(n,r,Ec(this,o),1),this},t.call=function(n,r,o){return Nu(this,to.delayedCall(0,n,r),o)},t.staggerTo=function(n,r,o,s,h,f,y){return o.duration=r,o.stagger=o.stagger||s,o.onComplete=f,o.onCompleteParams=y,o.parent=this,new to(n,o,Ec(this,h)),this},t.staggerFrom=function(n,r,o,s,h,f,y){return o.runBackwards=1,km(o).immediateRender=Ol(o.immediateRender),this.staggerTo(n,r,o,s,h,f,y)},t.staggerFromTo=function(n,r,o,s,h,f,y,x){return s.startAt=o,km(s).immediateRender=Ol(s.immediateRender),this.staggerTo(n,r,s,h,f,y,x)},t.render=function(n,r,o){var s=this._time,h=this._dirty?this.totalDuration():this._tDur,f=this._dur,y=n<=0?0:vs(n),x=this._zTime<0!=n<0&&(this._initted||!f),S,E,z,D,F,U,G,Z,ee,ie,le,J;if(this!==bs&&y>h&&n>=0&&(y=h),y!==this._tTime||o||x){if(s!==this._time&&f&&(y+=this._time-s,n+=this._time-s),S=y,ee=this._start,Z=this._ts,U=!Z,x&&(f||(s=this._zTime),(n||!r)&&(this._zTime=n)),this._repeat){if(le=this._yoyo,F=f+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(F*100+n,r,o);if(S=vs(y%F),y===h?(D=this._repeat,S=f):(ie=vs(y/F),D=~~ie,D&&D===ie&&(S=f,D--),S>f&&(S=f)),ie=ng(this._tTime,F),!s&&this._tTime&&ie!==D&&this._tTime-ie*F-this._dur<=0&&(ie=D),le&&D&1&&(S=f-S,J=1),D!==ie&&!this._lock){var re=le&&ie&1,ae=re===(le&&D&1);if(D<ie&&(re=!re),s=re?0:y%f?f:y,this._lock=1,this.render(s||(J?0:vs(D*F)),r,!f)._lock=0,this._tTime=y,!r&&this.parent&&lc(this,"onRepeat"),this.vars.repeatRefresh&&!J&&(this.invalidate()._lock=1,ie=D),s&&s!==this._time||U!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,h=this._tDur,ae&&(this._lock=2,s=re?f:-1e-4,this.render(s,!0),this.vars.repeatRefresh&&!J&&this.invalidate()),this._lock=0,!this._ts&&!U)return this;FE(this,J)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(G=OO(this,vs(s),vs(S)),G&&(y-=S-(S=G._start))),this._tTime=y,this._time=S,this._act=!Z,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,s=0),!s&&y&&f&&!r&&!ie&&(lc(this,"onStart"),this._tTime!==y))return this;if(S>=s&&n>=0)for(E=this._first;E;){if(z=E._next,(E._act||S>=E._start)&&E._ts&&G!==E){if(E.parent!==this)return this.render(n,r,o);if(E.render(E._ts>0?(S-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(S-E._start)*E._ts,r,o),S!==this._time||!this._ts&&!U){G=0,z&&(y+=this._zTime=-Hr);break}}E=z}else{E=this._last;for(var me=n<0?n:S;E;){if(z=E._prev,(E._act||me<=E._end)&&E._ts&&G!==E){if(E.parent!==this)return this.render(n,r,o);if(E.render(E._ts>0?(me-E._start)*E._ts:(E._dirty?E.totalDuration():E._tDur)+(me-E._start)*E._ts,r,o||Do&&X1(E)),S!==this._time||!this._ts&&!U){G=0,z&&(y+=this._zTime=me?-Hr:Hr);break}}E=z}}if(G&&!r&&(this.pause(),G.render(S>=s?0:-Hr)._zTime=S>=s?1:-1,this._ts))return this._start=ee,X_(this),this.render(n,r,o);this._onUpdate&&!r&&lc(this,"onUpdate",!0),(y===h&&this._tTime>=this.totalDuration()||!y&&s)&&(ee===this._start||Math.abs(Z)!==Math.abs(this._ts))&&(this._lock||((n||!f)&&(y===h&&this._ts>0||!y&&this._ts<0)&&pd(this,1),!r&&!(n<0&&!s)&&(y||s||!h)&&(lc(this,y===h&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<h&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(n,r){var o=this;if(zh(r)||(r=Ec(this,r,n)),!(n instanceof Ym)){if(Ko(n))return n.forEach(function(s){return o.add(s,r)}),this;if(wo(n))return this.addLabel(n,r);if(Ps(n))n=to.delayedCall(0,n);else return this}return this!==n?Nu(this,n,r):this},t.getChildren=function(n,r,o,s){n===void 0&&(n=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),s===void 0&&(s=-Lc);for(var h=[],f=this._first;f;)f._start>=s&&(f instanceof to?r&&h.push(f):(o&&h.push(f),n&&h.push.apply(h,f.getChildren(!0,r,o)))),f=f._next;return h},t.getById=function(n){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===n)return r[o]},t.remove=function(n){return wo(n)?this.removeLabel(n):Ps(n)?this.killTweensOf(n):(n.parent===this&&W_(this,n),n===this._recent&&(this._recent=this._last),kf(this))},t.totalTime=function(n,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=vs(sc.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),a.prototype.totalTime.call(this,n,r),this._forcing=0,this):this._tTime},t.addLabel=function(n,r){return this.labels[n]=Ec(this,r),this},t.removeLabel=function(n){return delete this.labels[n],this},t.addPause=function(n,r,o){var s=to.delayedCall(0,r||Gm,o);return s.data="isPause",this._hasPause=1,Nu(this,s,Ec(this,n))},t.removePause=function(n){var r=this._first;for(n=Ec(this,n);r;)r._start===n&&r.data==="isPause"&&pd(r),r=r._next},t.killTweensOf=function(n,r,o){for(var s=this.getTweensOf(n,o),h=s.length;h--;)ed!==s[h]&&s[h].kill(n,r);return this},t.getTweensOf=function(n,r){for(var o=[],s=Dc(n),h=this._first,f=zh(r),y;h;)h instanceof to?EO(h._targets,s)&&(f?(!ed||h._initted&&h._ts)&&h.globalTime(0)<=r&&h.globalTime(h.totalDuration())>r:!r||h.isActive())&&o.push(h):(y=h.getTweensOf(s,r)).length&&o.push.apply(o,y),h=h._next;return o},t.tweenTo=function(n,r){r=r||{};var o=this,s=Ec(o,n),h=r,f=h.startAt,y=h.onStart,x=h.onStartParams,S=h.immediateRender,E,z=to.to(o,fc({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:s,overwrite:"auto",duration:r.duration||Math.abs((s-(f&&"time"in f?f.time:o._time))/o.timeScale())||Hr,onStart:function(){if(o.pause(),!E){var F=r.duration||Math.abs((s-(f&&"time"in f?f.time:o._time))/o.timeScale());z._dur!==F&&ag(z,F,0,1).render(z._time,!0,!0),E=1}y&&y.apply(z,x||[])}},r));return S?z.render(0):z},t.tweenFromTo=function(n,r,o){return this.tweenTo(r,fc({startAt:{time:Ec(this,n)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(n){return n===void 0&&(n=this._time),zk(this,Ec(this,n))},t.previousLabel=function(n){return n===void 0&&(n=this._time),zk(this,Ec(this,n),1)},t.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Hr)},t.shiftChildren=function(n,r,o){o===void 0&&(o=0);var s=this._first,h=this.labels,f;for(n=vs(n);s;)s._start>=o&&(s._start+=n,s._end+=n),s=s._next;if(r)for(f in h)h[f]>=o&&(h[f]+=n);return kf(this)},t.invalidate=function(n){var r=this._first;for(this._lock=0;r;)r.invalidate(n),r=r._next;return a.prototype.invalidate.call(this,n)},t.clear=function(n){n===void 0&&(n=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),kf(this)},t.totalDuration=function(n){var r=0,o=this,s=o._last,h=Lc,f,y,x;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(x=o.parent;s;)f=s._prev,s._dirty&&s.totalDuration(),y=s._start,y>h&&o._sort&&s._ts&&!o._lock?(o._lock=1,Nu(o,s,y-s._delay,1)._lock=0):h=y,y<0&&s._ts&&(r-=y,(!x&&!o._dp||x&&x.smoothChildTiming)&&(o._start+=vs(y/o._ts),o._time-=y,o._tTime-=y),o.shiftChildren(-y,!1,-1/0),h=0),s._end>r&&s._ts&&(r=s._end),s=f;ag(o,o===bs&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(n){if(bs._ts&&(yE(bs,g_(n,bs)),gE=sc.frame),sc.frame>=Lk){Lk+=uc.autoSleep||120;var r=bs._first;if((!r||!r._ts)&&uc.autoSleep&&sc._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||sc.sleep()}}},e})(Ym);fc(dl.prototype,{_lock:0,_hasPause:0,_forcing:0});var KO=function(e,t,i,n,r,o,s){var h=new Fl(this._pt,e,t,0,1,GE,null,r),f=0,y=0,x,S,E,z,D,F,U,G;for(h.b=i,h.e=n,i+="",n+="",(U=~n.indexOf("random("))&&(n=Wm(n)),o&&(G=[i,n],o(G,e,t),i=G[0],n=G[1]),S=i.match(mv)||[];x=mv.exec(n);)z=x[0],D=n.substring(f,x.index),E?E=(E+1)%5:D.substr(-5)==="rgba("&&(E=1),z!==S[y++]&&(F=parseFloat(S[y-1])||0,h._pt={_next:h._pt,p:D||y===1?D:",",s:F,c:z.charAt(1)==="="?Wp(F,z)-F:parseFloat(z)-F,m:E&&E<4?Math.round:0},f=mv.lastIndex);return h.c=f<n.length?n.substring(f,n.length):"",h.fp=s,(hE.test(n)||U)&&(h.e=0),this._pt=h,h},Y1=function(e,t,i,n,r,o,s,h,f,y){Ps(n)&&(n=n(r||0,e,o));var x=e[t],S=i!=="get"?i:Ps(x)?f?e[t.indexOf("set")||!Ps(e["get"+t.substr(3)])?t:"get"+t.substr(3)](f):e[t]():x,E=Ps(x)?f?i3:UE:Z1,z;if(wo(n)&&(~n.indexOf("random(")&&(n=Wm(n)),n.charAt(1)==="="&&(z=Wp(S,n)+(Yo(S)||0),(z||z===0)&&(n=z))),!y||S!==n||Cb)return!isNaN(S*n)&&n!==""?(z=new Fl(this._pt,e,t,+S||0,n-(S||0),typeof x=="boolean"?a3:$E,0,E),f&&(z.fp=f),s&&z.modifier(s,this,e),this._pt=z):(!x&&!(t in e)&&U1(t,n),KO.call(this,e,t,S,n,E,h||uc.stringFilter,f))},JO=function(e,t,i,n,r){if(Ps(e)&&(e=Am(e,r,t,i,n)),!Uu(e)||e.style&&e.nodeType||Ko(e)||cE(e))return wo(e)?Am(e,r,t,i,n):e;var o={},s;for(s in e)o[s]=Am(e[s],r,t,i,n);return o},jE=function(e,t,i,n,r,o){var s,h,f,y;if(ac[e]&&(s=new ac[e]).init(r,s.rawVars?t[e]:JO(t[e],n,r,o,i),i,n,o)!==!1&&(i._pt=h=new Fl(i._pt,r,e,0,1,s.render,s,0,s.priority),i!==zp))for(f=i._ptLookup[i._targets.indexOf(r)],y=s._props.length;y--;)f[s._props[y]]=h;return s},ed,Cb,q1=function a(e,t,i){var n=e.vars,r=n.ease,o=n.startAt,s=n.immediateRender,h=n.lazy,f=n.onUpdate,y=n.runBackwards,x=n.yoyoEase,S=n.keyframes,E=n.autoRevert,z=e._dur,D=e._startAt,F=e._targets,U=e.parent,G=U&&U.data==="nested"?U.vars.targets:F,Z=e._overwrite==="auto"&&!B1,ee=e.timeline,ie,le,J,re,ae,me,Te,ye,Re,We,Le,ht,$e;if(ee&&(!S||!r)&&(r="none"),e._ease=Cf(r,tg.ease),e._yEase=x?zE(Cf(x===!0?r:x,tg.ease)):0,x&&e._yoyo&&!e._repeat&&(x=e._yEase,e._yEase=e._ease,e._ease=x),e._from=!ee&&!!n.runBackwards,!ee||S&&!n.stagger){if(ye=F[0]?Sf(F[0]).harness:0,ht=ye&&n[ye.prop],ie=p_(n,$1),D&&(D._zTime<0&&D.progress(1),t<0&&y&&s&&!E?D.render(-1,!0):D.revert(y&&z?H0:AO),D._lazy=0),o){if(pd(e._startAt=to.set(F,fc({data:"isStart",overwrite:!1,parent:U,immediateRender:!0,lazy:!D&&Ol(h),startAt:null,delay:0,onUpdate:f&&function(){return lc(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Do||!s&&!E)&&e._startAt.revert(H0),s&&z&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(y&&z&&!D){if(t&&(s=!1),J=fc({overwrite:!1,data:"isFromStart",lazy:s&&!D&&Ol(h),immediateRender:s,stagger:0,parent:U},ie),ht&&(J[ye.prop]=ht),pd(e._startAt=to.set(F,J)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Do?e._startAt.revert(H0):e._startAt.render(-1,!0)),e._zTime=t,!s)a(e._startAt,Hr,Hr);else if(!t)return}for(e._pt=e._ptCache=0,h=z&&Ol(h)||h&&!z,le=0;le<F.length;le++){if(ae=F[le],Te=ae._gsap||W1(F)[le]._gsap,e._ptLookup[le]=We={},xb[Te.id]&&cd.length&&f_(),Le=G===F?le:G.indexOf(ae),ye&&(Re=new ye).init(ae,ht||ie,e,Le,G)!==!1&&(e._pt=re=new Fl(e._pt,ae,Re.name,0,1,Re.render,Re,0,Re.priority),Re._props.forEach(function(pt){We[pt]=re}),Re.priority&&(me=1)),!ye||ht)for(J in ie)ac[J]&&(Re=jE(J,ie,e,Le,ae,G))?Re.priority&&(me=1):We[J]=re=Y1.call(e,ae,J,"get",ie[J],Le,G,0,n.stringFilter);e._op&&e._op[le]&&e.kill(ae,e._op[le]),Z&&e._pt&&(ed=e,bs.killTweensOf(ae,We,e.globalTime(t)),$e=!e.parent,ed=0),e._pt&&h&&(xb[Te.id]=1)}me&&WE(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!$e,S&&t<=0&&ee.render(Lc,!0,!0)},QO=function(e,t,i,n,r,o,s,h){var f=(e._pt&&e._ptCache||(e._ptCache={}))[t],y,x,S,E;if(!f)for(f=e._ptCache[t]=[],S=e._ptLookup,E=e._targets.length;E--;){if(y=S[E][t],y&&y.d&&y.d._pt)for(y=y.d._pt;y&&y.p!==t&&y.fp!==t;)y=y._next;if(!y)return Cb=1,e.vars[t]="+=0",q1(e,s),Cb=0,h?$m(t+" not eligible for reset"):1;f.push(y)}for(E=f.length;E--;)x=f[E],y=x._pt||x,y.s=(n||n===0)&&!r?n:y.s+(n||0)+o*y.c,y.c=i-y.s,x.e&&(x.e=Hs(i)+Yo(x.e)),x.b&&(x.b=y.s+Yo(x.b))},e3=function(e,t){var i=e[0]?Sf(e[0]).harness:0,n=i&&i.aliases,r,o,s,h;if(!n)return t;r=ig({},t);for(o in n)if(o in r)for(h=n[o].split(","),s=h.length;s--;)r[h[s]]=r[o];return r},t3=function(e,t,i,n){var r=t.ease||n||"power1.inOut",o,s;if(Ko(t))s=i[e]||(i[e]=[]),t.forEach(function(h,f){return s.push({t:f/(t.length-1)*100,v:h,e:r})});else for(o in t)s=i[o]||(i[o]=[]),o==="ease"||s.push({t:parseFloat(e),v:t[o],e:r})},Am=function(e,t,i,n,r){return Ps(e)?e.call(t,i,n,r):wo(e)&&~e.indexOf("random(")?Wm(e):e},VE=G1+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",HE={};zl(VE+",id,stagger,delay,duration,paused,scrollTrigger",function(a){return HE[a]=1});var to=(function(a){oE(e,a);function e(i,n,r,o){var s;typeof n=="number"&&(r.duration=n,n=r,r=null),s=a.call(this,o?n:km(n))||this;var h=s.vars,f=h.duration,y=h.delay,x=h.immediateRender,S=h.stagger,E=h.overwrite,z=h.keyframes,D=h.defaults,F=h.scrollTrigger,U=h.yoyoEase,G=n.parent||bs,Z=(Ko(i)||cE(i)?zh(i[0]):"length"in n)?[i]:Dc(i),ee,ie,le,J,re,ae,me,Te;if(s._targets=Z.length?W1(Z):$m("GSAP target "+i+" not found. https://gsap.com",!uc.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=E,z||S||u0(f)||u0(y)){if(n=s.vars,ee=s.timeline=new dl({data:"nested",defaults:D||{},targets:G&&G.data==="nested"?G.vars.targets:Z}),ee.kill(),ee.parent=ee._dp=wh(s),ee._start=0,S||u0(f)||u0(y)){if(J=Z.length,me=S&&AE(S),Uu(S))for(re in S)~VE.indexOf(re)&&(Te||(Te={}),Te[re]=S[re]);for(ie=0;ie<J;ie++)le=p_(n,HE),le.stagger=0,U&&(le.yoyoEase=U),Te&&ig(le,Te),ae=Z[ie],le.duration=+Am(f,wh(s),ie,ae,Z),le.delay=(+Am(y,wh(s),ie,ae,Z)||0)-s._delay,!S&&J===1&&le.delay&&(s._delay=y=le.delay,s._start+=y,le.delay=0),ee.to(ae,le,me?me(ie,ae,Z):0),ee._ease=$a.none;ee.duration()?f=y=0:s.timeline=0}else if(z){km(fc(ee.vars.defaults,{ease:"none"})),ee._ease=Cf(z.ease||n.ease||"none");var ye=0,Re,We,Le;if(Ko(z))z.forEach(function(ht){return ee.to(Z,ht,">")}),ee.duration();else{le={};for(re in z)re==="ease"||re==="easeEach"||t3(re,z[re],le,z.easeEach);for(re in le)for(Re=le[re].sort(function(ht,$e){return ht.t-$e.t}),ye=0,ie=0;ie<Re.length;ie++)We=Re[ie],Le={ease:We.e,duration:(We.t-(ie?Re[ie-1].t:0))/100*f},Le[re]=We.v,ee.to(Z,Le,ye),ye+=Le.duration;ee.duration()<f&&ee.to({},{duration:f-ee.duration()})}}f||s.duration(f=ee.duration())}else s.timeline=0;return E===!0&&!B1&&(ed=wh(s),bs.killTweensOf(Z),ed=0),Nu(G,wh(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(x||!f&&!z&&s._start===vs(G._time)&&Ol(x)&&LO(wh(s))&&G.data!=="nested")&&(s._tTime=-Hr,s.render(Math.max(0,-y)||0)),F&&wE(wh(s),F),s}var t=e.prototype;return t.render=function(n,r,o){var s=this._time,h=this._tDur,f=this._dur,y=n<0,x=n>h-Hr&&!y?h:n<Hr?0:n,S,E,z,D,F,U,G,Z,ee;if(!f)RO(this,n,r,o);else if(x!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==y||this._lazy){if(S=x,Z=this.timeline,this._repeat){if(D=f+this._rDelay,this._repeat<-1&&y)return this.totalTime(D*100+n,r,o);if(S=vs(x%D),x===h?(z=this._repeat,S=f):(F=vs(x/D),z=~~F,z&&z===F?(S=f,z--):S>f&&(S=f)),U=this._yoyo&&z&1,U&&(ee=this._yEase,S=f-S),F=ng(this._tTime,D),S===s&&!o&&this._initted&&z===F)return this._tTime=x,this;z!==F&&(Z&&this._yEase&&FE(Z,U),this.vars.repeatRefresh&&!U&&!this._lock&&S!==D&&this._initted&&(this._lock=o=1,this.render(vs(D*z),!0).invalidate()._lock=0))}if(!this._initted){if(SE(this,y?n:S,o,r,x))return this._tTime=0,this;if(s!==this._time&&!(o&&this.vars.repeatRefresh&&z!==F))return this;if(f!==this._dur)return this.render(n,r,o)}if(this._tTime=x,this._time=S,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=G=(ee||this._ease)(S/f),this._from&&(this.ratio=G=1-G),!s&&x&&!r&&!F&&(lc(this,"onStart"),this._tTime!==x))return this;for(E=this._pt;E;)E.r(G,E.d),E=E._next;Z&&Z.render(n<0?n:Z._dur*Z._ease(S/this._dur),r,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!r&&(y&&vb(this,n,r,o),lc(this,"onUpdate")),this._repeat&&z!==F&&this.vars.onRepeat&&!r&&this.parent&&lc(this,"onRepeat"),(x===this._tDur||!x)&&this._tTime===x&&(y&&!this._onUpdate&&vb(this,n,!0,!0),(n||!f)&&(x===this._tDur&&this._ts>0||!x&&this._ts<0)&&pd(this,1),!r&&!(y&&!s)&&(x||s||U)&&(lc(this,x===h?"onComplete":"onReverseComplete",!0),this._prom&&!(x<h&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),a.prototype.invalidate.call(this,n)},t.resetTo=function(n,r,o,s,h){Xm||sc.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),y;return this._initted||q1(this,f),y=this._ease(f/this._dur),QO(this,n,r,o,s,y,f,h)?this.resetTo(n,r,o,s,1):(Y_(this,0),this.parent||vE(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(n,r){if(r===void 0&&(r="all"),!n&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?hm(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Do),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,r,ed&&ed.vars.overwrite!==!0)._first||hm(this),this.parent&&o!==this.timeline.totalDuration()&&ag(this,this._dur*this.timeline._tDur/o,0,1),this}var s=this._targets,h=n?Dc(n):s,f=this._ptLookup,y=this._pt,x,S,E,z,D,F,U;if((!r||r==="all")&&IO(s,h))return r==="all"&&(this._pt=0),hm(this);for(x=this._op=this._op||[],r!=="all"&&(wo(r)&&(D={},zl(r,function(G){return D[G]=1}),r=D),r=e3(s,r)),U=s.length;U--;)if(~h.indexOf(s[U])){S=f[U],r==="all"?(x[U]=r,z=S,E={}):(E=x[U]=x[U]||{},z=r);for(D in z)F=S&&S[D],F&&((!("kill"in F.d)||F.d.kill(D)===!0)&&W_(this,F,"_pt"),delete S[D]),E!=="all"&&(E[D]=1)}return this._initted&&!this._pt&&y&&hm(this),this},e.to=function(n,r){return new e(n,r,arguments[2])},e.from=function(n,r){return Cm(1,arguments)},e.delayedCall=function(n,r,o,s){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:s})},e.fromTo=function(n,r,o){return Cm(2,arguments)},e.set=function(n,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(n,r)},e.killTweensOf=function(n,r,o){return bs.killTweensOf(n,r,o)},e})(Ym);fc(to.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});zl("staggerTo,staggerFrom,staggerFromTo",function(a){to[a]=function(){var e=new dl,t=wb.call(arguments,0);return t.splice(a==="staggerFromTo"?5:4,0,0),e[a].apply(e,t)}});var Z1=function(e,t,i){return e[t]=i},UE=function(e,t,i){return e[t](i)},i3=function(e,t,i,n){return e[t](n.fp,i)},n3=function(e,t,i){return e.setAttribute(t,i)},K1=function(e,t){return Ps(e[t])?UE:j1(e[t])&&e.setAttribute?n3:Z1},$E=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},a3=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},GE=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(e===1&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},J1=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},r3=function(e,t,i,n){for(var r=this._pt,o;r;)o=r._next,r.p===n&&r.modifier(e,t,i),r=o},s3=function(e){for(var t=this._pt,i,n;t;)n=t._next,t.p===e&&!t.op||t.op===e?W_(this,t,"_pt"):t.dep||(i=1),t=n;return!i},o3=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},WE=function(e){for(var t=e._pt,i,n,r,o;t;){for(i=t._next,n=r;n&&n.pr>t.pr;)n=n._next;(t._prev=n?n._prev:o)?t._prev._next=t:r=t,(t._next=n)?n._prev=t:o=t,t=i}e._pt=r},Fl=(function(){function a(t,i,n,r,o,s,h,f,y){this.t=i,this.s=r,this.c=o,this.p=n,this.r=s||$E,this.d=h||this,this.set=f||Z1,this.pr=y||0,this._next=t,t&&(t._prev=this)}var e=a.prototype;return e.modifier=function(i,n,r){this.mSet=this.mSet||this.set,this.set=o3,this.m=i,this.mt=r,this.tween=n},a})();zl(G1+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(a){return $1[a]=1});dc.TweenMax=dc.TweenLite=to;dc.TimelineLite=dc.TimelineMax=dl;bs=new dl({sortChildren:!1,defaults:tg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});uc.stringFilter=OE;var Af=[],$0={},l3=[],Nk=0,c3=0,bv=function(e){return($0[e]||l3).map(function(t){return t()})},Ab=function(){var e=Date.now(),t=[];e-Nk>2&&(bv("matchMediaInit"),Af.forEach(function(i){var n=i.queries,r=i.conditions,o,s,h,f;for(s in n)o=Ou.matchMedia(n[s]).matches,o&&(h=1),o!==r[s]&&(r[s]=o,f=1);f&&(i.revert(),h&&t.push(i))}),bv("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Nk=e,bv("matchMedia"))},XE=(function(){function a(t,i){this.selector=i&&Sb(i),this.data=[],this._r=[],this.isReverted=!1,this.id=c3++,t&&this.add(t)}var e=a.prototype;return e.add=function(i,n,r){Ps(i)&&(r=n,n=i,i=Ps);var o=this,s=function(){var f=ds,y=o.selector,x;return f&&f!==o&&f.data.push(o),r&&(o.selector=Sb(r)),ds=o,x=n.apply(o,arguments),Ps(x)&&o._r.push(x),ds=f,o.selector=y,o.isReverted=!1,x};return o.last=s,i===Ps?s(o,function(h){return o.add(null,h)}):i?o[i]=s:s},e.ignore=function(i){var n=ds;ds=null,i(this),ds=n},e.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof a?i.push.apply(i,n.getTweens()):n instanceof to&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,n){var r=this;if(i?(function(){for(var s=r.getTweens(),h=r.data.length,f;h--;)f=r.data[h],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(y){return s.splice(s.indexOf(y),1)}));for(s.map(function(y){return{g:y._dur||y._delay||y._sat&&!y._sat.vars.immediateRender?y.globalTime(0):-1/0,t:y}}).sort(function(y,x){return x.g-y.g||-1/0}).forEach(function(y){return y.t.revert(i)}),h=r.data.length;h--;)f=r.data[h],f instanceof dl?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof to)&&f.revert&&f.revert(i);r._r.forEach(function(y){return y(i,r)}),r.isReverted=!0})():this.data.forEach(function(s){return s.kill&&s.kill()}),this.clear(),n)for(var o=Af.length;o--;)Af[o].id===this.id&&Af.splice(o,1)},e.revert=function(i){this.kill(i||{})},a})(),u3=(function(){function a(t){this.contexts=[],this.scope=t,ds&&ds.data.push(this)}var e=a.prototype;return e.add=function(i,n,r){Uu(i)||(i={matches:i});var o=new XE(0,r||this.scope),s=o.conditions={},h,f,y;ds&&!o.selector&&(o.selector=ds.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=i;for(f in i)f==="all"?y=1:(h=Ou.matchMedia(i[f]),h&&(Af.indexOf(o)<0&&Af.push(o),(s[f]=h.matches)&&(y=1),h.addListener?h.addListener(Ab):h.addEventListener("change",Ab)));return y&&n(o,function(x){return o.add(null,x)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},a})(),m_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(n){return LE(n)})},timeline:function(e){return new dl(e)},getTweensOf:function(e,t){return bs.getTweensOf(e,t)},getProperty:function(e,t,i,n){wo(e)&&(e=Dc(e)[0]);var r=Sf(e||{}).get,o=i?xE:_E;return i==="native"&&(i=""),e&&(t?o((ac[t]&&ac[t].get||r)(e,t,i,n)):function(s,h,f){return o((ac[s]&&ac[s].get||r)(e,s,h,f))})},quickSetter:function(e,t,i){if(e=Dc(e),e.length>1){var n=e.map(function(y){return Bl.quickSetter(y,t,i)}),r=n.length;return function(y){for(var x=r;x--;)n[x](y)}}e=e[0]||{};var o=ac[t],s=Sf(e),h=s.harness&&(s.harness.aliases||{})[t]||t,f=o?function(y){var x=new o;zp._pt=0,x.init(e,i?y+i:y,zp,0,[e]),x.render(1,x),zp._pt&&J1(1,zp)}:s.set(e,h);return o?f:function(y){return f(e,h,i?y+i:y,s,1)}},quickTo:function(e,t,i){var n,r=Bl.to(e,fc((n={},n[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(h,f,y){return r.resetTo(t,h,f,y)};return o.tween=r,o},isTweening:function(e){return bs.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Cf(e.ease,tg.ease)),Dk(tg,e||{})},config:function(e){return Dk(uc,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,r=e.defaults,o=e.extendTimeline;(n||"").split(",").forEach(function(s){return s&&!ac[s]&&!dc[s]&&$m(t+" effect requires "+s+" plugin.")}),yv[t]=function(s,h,f){return i(Dc(s),fc(h||{},r),f)},o&&(dl.prototype[t]=function(s,h,f){return this.add(yv[t](s,Uu(h)?h:(f=h)&&{},this),f)})},registerEase:function(e,t){$a[e]=Cf(t)},parseEase:function(e,t){return arguments.length?Cf(e,t):$a},getById:function(e){return bs.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new dl(e),n,r;for(i.smoothChildTiming=Ol(e.smoothChildTiming),bs.remove(i),i._dp=0,i._time=i._tTime=bs._time,n=bs._first;n;)r=n._next,(t||!(!n._dur&&n instanceof to&&n.vars.onComplete===n._targets[0]))&&Nu(i,n,n._start-n._delay),n=r;return Nu(bs,i,0),i},context:function(e,t){return e?new XE(e,t):ds},matchMedia:function(e){return new u3(e)},matchMediaRefresh:function(){return Af.forEach(function(e){var t=e.conditions,i,n;for(n in t)t[n]&&(t[n]=!1,i=1);i&&e.revert()})||Ab()},addEventListener:function(e,t){var i=$0[e]||($0[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=$0[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:HO,wrapYoyo:UO,distribute:AE,random:EE,snap:TE,normalize:VO,getUnit:Yo,clamp:FO,splitColor:DE,toArray:Dc,selector:Sb,mapRange:IE,pipe:BO,unitize:jO,interpolate:$O,shuffle:CE},install:fE,effects:yv,ticker:sc,updateRoot:dl.updateRoot,plugins:ac,globalTimeline:bs,core:{PropTween:Fl,globals:pE,Tween:to,Timeline:dl,Animation:Ym,getCache:Sf,_removeLinkedListItem:W_,reverting:function(){return Do},context:function(e){return e&&ds&&(ds.data.push(e),e._ctx=ds),ds},suppressOverwrites:function(e){return B1=e}}};zl("to,from,fromTo,delayedCall,set,killTweensOf",function(a){return m_[a]=to[a]});sc.add(dl.updateRoot);zp=m_.to({},{duration:0});var h3=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},d3=function(e,t){var i=e._targets,n,r,o;for(n in t)for(r=i.length;r--;)o=e._ptLookup[r][n],o&&(o=o.d)&&(o._pt&&(o=h3(o,n)),o&&o.modifier&&o.modifier(t[n],e,i[r],n))},wv=function(e,t){return{name:e,headless:1,rawVars:1,init:function(n,r,o){o._onInit=function(s){var h,f;if(wo(r)&&(h={},zl(r,function(y){return h[y]=1}),r=h),t){h={};for(f in r)h[f]=t(r[f]);r=h}d3(s,r)}}}},Bl=m_.registerPlugin({name:"attr",init:function(e,t,i,n,r){var o,s,h;this.tween=i;for(o in t)h=e.getAttribute(o)||"",s=this.add(e,"setAttribute",(h||0)+"",t[o],n,r,0,0,o),s.op=o,s.b=h,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Do?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},wv("roundProps",kb),wv("modifiers"),wv("snap",TE))||m_;to.version=dl.version=Bl.version="3.14.2";dE=1;V1()&&rg();$a.Power0;$a.Power1;$a.Power2;$a.Power3;$a.Power4;$a.Linear;$a.Quad;$a.Cubic;$a.Quart;$a.Quint;$a.Strong;$a.Elastic;$a.Back;$a.SteppedEase;$a.Bounce;$a.Sine;$a.Expo;$a.Circ;var Bk,td,Xp,Q1,gf,jk,ew,f3=function(){return typeof window<"u"},Fh={},af=180/Math.PI,Yp=Math.PI/180,bp=Math.atan2,Vk=1e8,tw=/([A-Z])/g,p3=/(left|right|width|margin|padding|x)/i,g3=/[\s,\(]\S/,Bu={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Tb=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},m3=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},y3=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},_3=function(e,t){return t.set(t.t,t.p,e===1?t.e:e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},x3=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},YE=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},qE=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},v3=function(e,t,i){return e.style[t]=i},b3=function(e,t,i){return e.style.setProperty(t,i)},w3=function(e,t,i){return e._gsap[t]=i},S3=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},k3=function(e,t,i,n,r){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},C3=function(e,t,i,n,r){var o=e._gsap;o[t]=i,o.renderTransform(r,o)},Ss="transform",Nl=Ss+"Origin",A3=function a(e,t){var i=this,n=this.target,r=n.style,o=n._gsap;if(e in Fh&&r){if(this.tfm=this.tfm||{},e!=="transform")e=Bu[e]||e,~e.indexOf(",")?e.split(",").forEach(function(s){return i.tfm[s]=kh(n,s)}):this.tfm[e]=o.x?o[e]:kh(n,e),e===Nl&&(this.tfm.zOrigin=o.zOrigin);else return Bu.transform.split(",").forEach(function(s){return a.call(i,s,t)});if(this.props.indexOf(Ss)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Nl,t,"")),e=Ss}(r||t)&&this.props.push(e,t,r[e])},ZE=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},T3=function(){var e=this.props,t=this.target,i=t.style,n=t._gsap,r,o;for(r=0;r<e.length;r+=3)e[r+1]?e[r+1]===2?t[e[r]](e[r+2]):t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(tw,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=ew(),(!r||!r.isStart)&&!i[Ss]&&(ZE(i),n.zOrigin&&i[Nl]&&(i[Nl]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},KE=function(e,t){var i={target:e,props:[],revert:T3,save:A3};return e._gsap||Bl.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(n){return i.save(n)}),i},JE,Eb=function(e,t){var i=td.createElementNS?td.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):td.createElement(e);return i&&i.style?i:td.createElement(e)},cc=function a(e,t,i){var n=getComputedStyle(e);return n[t]||n.getPropertyValue(t.replace(tw,"-$1").toLowerCase())||n.getPropertyValue(t)||!i&&a(e,sg(t)||t,1)||""},Hk="O,Moz,ms,Ms,Webkit".split(","),sg=function(e,t,i){var n=t||gf,r=n.style,o=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Hk[o]+e in r););return o<0?null:(o===3?"ms":o>=0?Hk[o]:"")+e},Mb=function(){f3()&&window.document&&(Bk=window,td=Bk.document,Xp=td.documentElement,gf=Eb("div")||{style:{}},Eb("div"),Ss=sg(Ss),Nl=Ss+"Origin",gf.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",JE=!!sg("perspective"),ew=Bl.core.reverting,Q1=1)},Uk=function(e){var t=e.ownerSVGElement,i=Eb("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=e.cloneNode(!0),r;n.style.display="block",i.appendChild(n),Xp.appendChild(i);try{r=n.getBBox()}catch{}return i.removeChild(n),Xp.removeChild(i),r},$k=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},QE=function(e){var t,i;try{t=e.getBBox()}catch{t=Uk(e),i=1}return t&&(t.width||t.height)||i||(t=Uk(e)),t&&!t.width&&!t.x&&!t.y?{x:+$k(e,["x","cx","x1"])||0,y:+$k(e,["y","cy","y1"])||0,width:0,height:0}:t},eM=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&QE(e))},gd=function(e,t){if(t){var i=e.style,n;t in Fh&&t!==Nl&&(t=Ss),i.removeProperty?(n=t.substr(0,2),(n==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(n==="--"?t:t.replace(tw,"-$1").toLowerCase())):i.removeAttribute(t)}},id=function(e,t,i,n,r,o){var s=new Fl(e._pt,t,i,0,1,o?qE:YE);return e._pt=s,s.b=n,s.e=r,e._props.push(i),s},Gk={deg:1,rad:1,turn:1},E3={grid:1,flex:1},md=function a(e,t,i,n){var r=parseFloat(i)||0,o=(i+"").trim().substr((r+"").length)||"px",s=gf.style,h=p3.test(t),f=e.tagName.toLowerCase()==="svg",y=(f?"client":"offset")+(h?"Width":"Height"),x=100,S=n==="px",E=n==="%",z,D,F,U;if(n===o||!r||Gk[n]||Gk[o])return r;if(o!=="px"&&!S&&(r=a(e,t,i,"px")),U=e.getCTM&&eM(e),(E||o==="%")&&(Fh[t]||~t.indexOf("adius")))return z=U?e.getBBox()[h?"width":"height"]:e[y],Hs(E?r/z*x:r/100*z);if(s[h?"width":"height"]=x+(S?o:n),D=n!=="rem"&&~t.indexOf("adius")||n==="em"&&e.appendChild&&!f?e:e.parentNode,U&&(D=(e.ownerSVGElement||{}).parentNode),(!D||D===td||!D.appendChild)&&(D=td.body),F=D._gsap,F&&E&&F.width&&h&&F.time===sc.time&&!F.uncache)return Hs(r/F.width*x);if(E&&(t==="height"||t==="width")){var G=e.style[t];e.style[t]=x+n,z=e[y],G?e.style[t]=G:gd(e,t)}else(E||o==="%")&&!E3[cc(D,"display")]&&(s.position=cc(e,"position")),D===e&&(s.position="static"),D.appendChild(gf),z=gf[y],D.removeChild(gf),s.position="absolute";return h&&E&&(F=Sf(D),F.time=sc.time,F.width=D[y]),Hs(S?z*r/x:z&&r?x/z*r:0)},kh=function(e,t,i,n){var r;return Q1||Mb(),t in Bu&&t!=="transform"&&(t=Bu[t],~t.indexOf(",")&&(t=t.split(",")[0])),Fh[t]&&t!=="transform"?(r=Zm(e,n),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:__(cc(e,Nl))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||n||~(r+"").indexOf("calc("))&&(r=y_[t]&&y_[t](e,t,i)||cc(e,t)||mE(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?md(e,t,r,i)+i:r},M3=function(e,t,i,n){if(!i||i==="none"){var r=sg(t,e,1),o=r&&cc(e,r,1);o&&o!==i?(t=r,i=o):t==="borderColor"&&(i=cc(e,"borderTopColor"))}var s=new Fl(this._pt,e.style,t,0,1,GE),h=0,f=0,y,x,S,E,z,D,F,U,G,Z,ee,ie;if(s.b=i,s.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=cc(e,n.substring(4,n.indexOf(")")))),n==="auto"&&(D=e.style[t],e.style[t]=n,n=cc(e,t)||n,D?e.style[t]=D:gd(e,t)),y=[i,n],OE(y),i=y[0],n=y[1],S=i.match(Op)||[],ie=n.match(Op)||[],ie.length){for(;x=Op.exec(n);)F=x[0],G=n.substring(h,x.index),z?z=(z+1)%5:(G.substr(-5)==="rgba("||G.substr(-5)==="hsla(")&&(z=1),F!==(D=S[f++]||"")&&(E=parseFloat(D)||0,ee=D.substr((E+"").length),F.charAt(1)==="="&&(F=Wp(E,F)+ee),U=parseFloat(F),Z=F.substr((U+"").length),h=Op.lastIndex-Z.length,Z||(Z=Z||uc.units[t]||ee,h===n.length&&(n+=Z,s.e+=Z)),ee!==Z&&(E=md(e,t,D,Z)||0),s._pt={_next:s._pt,p:G||f===1?G:",",s:E,c:U-E,m:z&&z<4||t==="zIndex"?Math.round:0});s.c=h<n.length?n.substring(h,n.length):""}else s.r=t==="display"&&n==="none"?qE:YE;return hE.test(n)&&(s.e=0),this._pt=s,s},Wk={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},I3=function(e){var t=e.split(" "),i=t[0],n=t[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(e=i,i=n,n=e),t[0]=Wk[i]||i,t[1]=Wk[n]||n,t.join(" ")},P3=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,n=i.style,r=t.u,o=i._gsap,s,h,f;if(r==="all"||r===!0)n.cssText="",h=1;else for(r=r.split(","),f=r.length;--f>-1;)s=r[f],Fh[s]&&(h=1,s=s==="transformOrigin"?Nl:Ss),gd(i,s);h&&(gd(i,Ss),o&&(o.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",Zm(i,1),o.uncache=1,ZE(n)))}},y_={clearProps:function(e,t,i,n,r){if(r.data!=="isFromStart"){var o=e._pt=new Fl(e._pt,t,i,0,0,P3);return o.u=n,o.pr=-10,o.tween=r,e._props.push(i),1}}},qm=[1,0,0,1,0,0],tM={},iM=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Xk=function(e){var t=cc(e,Ss);return iM(t)?qm:t.substr(7).match(uE).map(Hs)},iw=function(e,t){var i=e._gsap||Sf(e),n=e.style,r=Xk(e),o,s,h,f;return i.svg&&e.getAttribute("transform")?(h=e.transform.baseVal.consolidate().matrix,r=[h.a,h.b,h.c,h.d,h.e,h.f],r.join(",")==="1,0,0,1,0,0"?qm:r):(r===qm&&!e.offsetParent&&e!==Xp&&!i.svg&&(h=n.display,n.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,s=e.nextElementSibling,Xp.appendChild(e)),r=Xk(e),h?n.display=h:gd(e,"display"),f&&(s?o.insertBefore(e,s):o?o.appendChild(e):Xp.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Ib=function(e,t,i,n,r,o){var s=e._gsap,h=r||iw(e,!0),f=s.xOrigin||0,y=s.yOrigin||0,x=s.xOffset||0,S=s.yOffset||0,E=h[0],z=h[1],D=h[2],F=h[3],U=h[4],G=h[5],Z=t.split(" "),ee=parseFloat(Z[0])||0,ie=parseFloat(Z[1])||0,le,J,re,ae;i?h!==qm&&(J=E*F-z*D)&&(re=ee*(F/J)+ie*(-D/J)+(D*G-F*U)/J,ae=ee*(-z/J)+ie*(E/J)-(E*G-z*U)/J,ee=re,ie=ae):(le=QE(e),ee=le.x+(~Z[0].indexOf("%")?ee/100*le.width:ee),ie=le.y+(~(Z[1]||Z[0]).indexOf("%")?ie/100*le.height:ie)),n||n!==!1&&s.smooth?(U=ee-f,G=ie-y,s.xOffset=x+(U*E+G*D)-U,s.yOffset=S+(U*z+G*F)-G):s.xOffset=s.yOffset=0,s.xOrigin=ee,s.yOrigin=ie,s.smooth=!!n,s.origin=t,s.originIsAbsolute=!!i,e.style[Nl]="0px 0px",o&&(id(o,s,"xOrigin",f,ee),id(o,s,"yOrigin",y,ie),id(o,s,"xOffset",x,s.xOffset),id(o,s,"yOffset",S,s.yOffset)),e.setAttribute("data-svg-origin",ee+" "+ie)},Zm=function(e,t){var i=e._gsap||new BE(e);if("x"in i&&!t&&!i.uncache)return i;var n=e.style,r=i.scaleX<0,o="px",s="deg",h=getComputedStyle(e),f=cc(e,Nl)||"0",y,x,S,E,z,D,F,U,G,Z,ee,ie,le,J,re,ae,me,Te,ye,Re,We,Le,ht,$e,pt,Dt,qe,Nt,ni,xi,Lt,Tt;return y=x=S=D=F=U=G=Z=ee=0,E=z=1,i.svg=!!(e.getCTM&&eM(e)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(n[Ss]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[Ss]!=="none"?h[Ss]:"")),n.scale=n.rotate=n.translate="none"),J=iw(e,i.svg),i.svg&&(i.uncache?(pt=e.getBBox(),f=i.xOrigin-pt.x+"px "+(i.yOrigin-pt.y)+"px",$e=""):$e=!t&&e.getAttribute("data-svg-origin"),Ib(e,$e||f,!!$e||i.originIsAbsolute,i.smooth!==!1,J)),ie=i.xOrigin||0,le=i.yOrigin||0,J!==qm&&(Te=J[0],ye=J[1],Re=J[2],We=J[3],y=Le=J[4],x=ht=J[5],J.length===6?(E=Math.sqrt(Te*Te+ye*ye),z=Math.sqrt(We*We+Re*Re),D=Te||ye?bp(ye,Te)*af:0,G=Re||We?bp(Re,We)*af+D:0,G&&(z*=Math.abs(Math.cos(G*Yp))),i.svg&&(y-=ie-(ie*Te+le*Re),x-=le-(ie*ye+le*We))):(Tt=J[6],xi=J[7],qe=J[8],Nt=J[9],ni=J[10],Lt=J[11],y=J[12],x=J[13],S=J[14],re=bp(Tt,ni),F=re*af,re&&(ae=Math.cos(-re),me=Math.sin(-re),$e=Le*ae+qe*me,pt=ht*ae+Nt*me,Dt=Tt*ae+ni*me,qe=Le*-me+qe*ae,Nt=ht*-me+Nt*ae,ni=Tt*-me+ni*ae,Lt=xi*-me+Lt*ae,Le=$e,ht=pt,Tt=Dt),re=bp(-Re,ni),U=re*af,re&&(ae=Math.cos(-re),me=Math.sin(-re),$e=Te*ae-qe*me,pt=ye*ae-Nt*me,Dt=Re*ae-ni*me,Lt=We*me+Lt*ae,Te=$e,ye=pt,Re=Dt),re=bp(ye,Te),D=re*af,re&&(ae=Math.cos(re),me=Math.sin(re),$e=Te*ae+ye*me,pt=Le*ae+ht*me,ye=ye*ae-Te*me,ht=ht*ae-Le*me,Te=$e,Le=pt),F&&Math.abs(F)+Math.abs(D)>359.9&&(F=D=0,U=180-U),E=Hs(Math.sqrt(Te*Te+ye*ye+Re*Re)),z=Hs(Math.sqrt(ht*ht+Tt*Tt)),re=bp(Le,ht),G=Math.abs(re)>2e-4?re*af:0,ee=Lt?1/(Lt<0?-Lt:Lt):0),i.svg&&($e=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!iM(cc(e,Ss)),$e&&e.setAttribute("transform",$e))),Math.abs(G)>90&&Math.abs(G)<270&&(r?(E*=-1,G+=D<=0?180:-180,D+=D<=0?180:-180):(z*=-1,G+=G<=0?180:-180)),t=t||i.uncache,i.x=y-((i.xPercent=y&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-y)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=x-((i.yPercent=x&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-x)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=S+o,i.scaleX=Hs(E),i.scaleY=Hs(z),i.rotation=Hs(D)+s,i.rotationX=Hs(F)+s,i.rotationY=Hs(U)+s,i.skewX=G+s,i.skewY=Z+s,i.transformPerspective=ee+o,(i.zOrigin=parseFloat(f.split(" ")[2])||!t&&i.zOrigin||0)&&(n[Nl]=__(f)),i.xOffset=i.yOffset=0,i.force3D=uc.force3D,i.renderTransform=i.svg?D3:JE?nM:L3,i.uncache=0,i},__=function(e){return(e=e.split(" "))[0]+" "+e[1]},Sv=function(e,t,i){var n=Yo(t);return Hs(parseFloat(t)+parseFloat(md(e,"x",i+"px",n)))+n},L3=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,nM(e,t)},qd="0deg",em="0px",Zd=") ",nM=function(e,t){var i=t||this,n=i.xPercent,r=i.yPercent,o=i.x,s=i.y,h=i.z,f=i.rotation,y=i.rotationY,x=i.rotationX,S=i.skewX,E=i.skewY,z=i.scaleX,D=i.scaleY,F=i.transformPerspective,U=i.force3D,G=i.target,Z=i.zOrigin,ee="",ie=U==="auto"&&e&&e!==1||U===!0;if(Z&&(x!==qd||y!==qd)){var le=parseFloat(y)*Yp,J=Math.sin(le),re=Math.cos(le),ae;le=parseFloat(x)*Yp,ae=Math.cos(le),o=Sv(G,o,J*ae*-Z),s=Sv(G,s,-Math.sin(le)*-Z),h=Sv(G,h,re*ae*-Z+Z)}F!==em&&(ee+="perspective("+F+Zd),(n||r)&&(ee+="translate("+n+"%, "+r+"%) "),(ie||o!==em||s!==em||h!==em)&&(ee+=h!==em||ie?"translate3d("+o+", "+s+", "+h+") ":"translate("+o+", "+s+Zd),f!==qd&&(ee+="rotate("+f+Zd),y!==qd&&(ee+="rotateY("+y+Zd),x!==qd&&(ee+="rotateX("+x+Zd),(S!==qd||E!==qd)&&(ee+="skew("+S+", "+E+Zd),(z!==1||D!==1)&&(ee+="scale("+z+", "+D+Zd),G.style[Ss]=ee||"translate(0, 0)"},D3=function(e,t){var i=t||this,n=i.xPercent,r=i.yPercent,o=i.x,s=i.y,h=i.rotation,f=i.skewX,y=i.skewY,x=i.scaleX,S=i.scaleY,E=i.target,z=i.xOrigin,D=i.yOrigin,F=i.xOffset,U=i.yOffset,G=i.forceCSS,Z=parseFloat(o),ee=parseFloat(s),ie,le,J,re,ae;h=parseFloat(h),f=parseFloat(f),y=parseFloat(y),y&&(y=parseFloat(y),f+=y,h+=y),h||f?(h*=Yp,f*=Yp,ie=Math.cos(h)*x,le=Math.sin(h)*x,J=Math.sin(h-f)*-S,re=Math.cos(h-f)*S,f&&(y*=Yp,ae=Math.tan(f-y),ae=Math.sqrt(1+ae*ae),J*=ae,re*=ae,y&&(ae=Math.tan(y),ae=Math.sqrt(1+ae*ae),ie*=ae,le*=ae)),ie=Hs(ie),le=Hs(le),J=Hs(J),re=Hs(re)):(ie=x,re=S,le=J=0),(Z&&!~(o+"").indexOf("px")||ee&&!~(s+"").indexOf("px"))&&(Z=md(E,"x",o,"px"),ee=md(E,"y",s,"px")),(z||D||F||U)&&(Z=Hs(Z+z-(z*ie+D*J)+F),ee=Hs(ee+D-(z*le+D*re)+U)),(n||r)&&(ae=E.getBBox(),Z=Hs(Z+n/100*ae.width),ee=Hs(ee+r/100*ae.height)),ae="matrix("+ie+","+le+","+J+","+re+","+Z+","+ee+")",E.setAttribute("transform",ae),G&&(E.style[Ss]=ae)},R3=function(e,t,i,n,r){var o=360,s=wo(r),h=parseFloat(r)*(s&&~r.indexOf("rad")?af:1),f=h-n,y=n+f+"deg",x,S;return s&&(x=r.split("_")[1],x==="short"&&(f%=o,f!==f%(o/2)&&(f+=f<0?o:-o)),x==="cw"&&f<0?f=(f+o*Vk)%o-~~(f/o)*o:x==="ccw"&&f>0&&(f=(f-o*Vk)%o-~~(f/o)*o)),e._pt=S=new Fl(e._pt,t,i,n,f,m3),S.e=y,S.u="deg",e._props.push(i),S},Yk=function(e,t){for(var i in t)e[i]=t[i];return e},O3=function(e,t,i){var n=Yk({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=i.style,s,h,f,y,x,S,E,z;n.svg?(f=i.getAttribute("transform"),i.setAttribute("transform",""),o[Ss]=t,s=Zm(i,1),gd(i,Ss),i.setAttribute("transform",f)):(f=getComputedStyle(i)[Ss],o[Ss]=t,s=Zm(i,1),o[Ss]=f);for(h in Fh)f=n[h],y=s[h],f!==y&&r.indexOf(h)<0&&(E=Yo(f),z=Yo(y),x=E!==z?md(i,h,f,z):parseFloat(f),S=parseFloat(y),e._pt=new Fl(e._pt,s,h,x,S-x,Tb),e._pt.u=z||0,e._props.push(h));Yk(s,n)};zl("padding,margin,Width,Radius",function(a,e){var t="Top",i="Right",n="Bottom",r="Left",o=(e<3?[t,i,n,r]:[t+r,t+i,n+i,n+r]).map(function(s){return e<2?a+s:"border"+s+a});y_[e>1?"border"+a:a]=function(s,h,f,y,x){var S,E;if(arguments.length<4)return S=o.map(function(z){return kh(s,z,f)}),E=S.join(" "),E.split(S[0]).length===5?S[0]:E;S=(y+"").split(" "),E={},o.forEach(function(z,D){return E[z]=S[D]=S[D]||S[(D-1)/2|0]}),s.init(h,E,x)}});var aM={name:"css",register:Mb,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,r){var o=this._props,s=e.style,h=i.vars.startAt,f,y,x,S,E,z,D,F,U,G,Z,ee,ie,le,J,re,ae;Q1||Mb(),this.styles=this.styles||KE(e),re=this.styles.props,this.tween=i;for(D in t)if(D!=="autoRound"&&(y=t[D],!(ac[D]&&jE(D,t,i,n,e,r)))){if(E=typeof y,z=y_[D],E==="function"&&(y=y.call(i,n,e,r),E=typeof y),E==="string"&&~y.indexOf("random(")&&(y=Wm(y)),z)z(this,e,D,y,i)&&(J=1);else if(D.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(D)+"").trim(),y+="",ud.lastIndex=0,ud.test(f)||(F=Yo(f),U=Yo(y),U?F!==U&&(f=md(e,D,f,U)+U):F&&(y+=F)),this.add(s,"setProperty",f,y,n,r,0,0,D),o.push(D),re.push(D,0,s[D]);else if(E!=="undefined"){if(h&&D in h?(f=typeof h[D]=="function"?h[D].call(i,n,e,r):h[D],wo(f)&&~f.indexOf("random(")&&(f=Wm(f)),Yo(f+"")||f==="auto"||(f+=uc.units[D]||Yo(kh(e,D))||""),(f+"").charAt(1)==="="&&(f=kh(e,D))):f=kh(e,D),S=parseFloat(f),G=E==="string"&&y.charAt(1)==="="&&y.substr(0,2),G&&(y=y.substr(2)),x=parseFloat(y),D in Bu&&(D==="autoAlpha"&&(S===1&&kh(e,"visibility")==="hidden"&&x&&(S=0),re.push("visibility",0,s.visibility),id(this,s,"visibility",S?"inherit":"hidden",x?"inherit":"hidden",!x)),D!=="scale"&&D!=="transform"&&(D=Bu[D],~D.indexOf(",")&&(D=D.split(",")[0]))),Z=D in Fh,Z){if(this.styles.save(D),ae=y,E==="string"&&y.substring(0,6)==="var(--"){if(y=cc(e,y.substring(4,y.indexOf(")"))),y.substring(0,5)==="calc("){var me=e.style.perspective;e.style.perspective=y,y=cc(e,"perspective"),me?e.style.perspective=me:gd(e,"perspective")}x=parseFloat(y)}if(ee||(ie=e._gsap,ie.renderTransform&&!t.parseTransform||Zm(e,t.parseTransform),le=t.smoothOrigin!==!1&&ie.smooth,ee=this._pt=new Fl(this._pt,s,Ss,0,1,ie.renderTransform,ie,0,-1),ee.dep=1),D==="scale")this._pt=new Fl(this._pt,ie,"scaleY",ie.scaleY,(G?Wp(ie.scaleY,G+x):x)-ie.scaleY||0,Tb),this._pt.u=0,o.push("scaleY",D),D+="X";else if(D==="transformOrigin"){re.push(Nl,0,s[Nl]),y=I3(y),ie.svg?Ib(e,y,0,le,0,this):(U=parseFloat(y.split(" ")[2])||0,U!==ie.zOrigin&&id(this,ie,"zOrigin",ie.zOrigin,U),id(this,s,D,__(f),__(y)));continue}else if(D==="svgOrigin"){Ib(e,y,1,le,0,this);continue}else if(D in tM){R3(this,ie,D,S,G?Wp(S,G+y):y);continue}else if(D==="smoothOrigin"){id(this,ie,"smooth",ie.smooth,y);continue}else if(D==="force3D"){ie[D]=y;continue}else if(D==="transform"){O3(this,y,e);continue}}else D in s||(D=sg(D)||D);if(Z||(x||x===0)&&(S||S===0)&&!g3.test(y)&&D in s)F=(f+"").substr((S+"").length),x||(x=0),U=Yo(y)||(D in uc.units?uc.units[D]:F),F!==U&&(S=md(e,D,f,U)),this._pt=new Fl(this._pt,Z?ie:s,D,S,(G?Wp(S,G+x):x)-S,!Z&&(U==="px"||D==="zIndex")&&t.autoRound!==!1?x3:Tb),this._pt.u=U||0,Z&&ae!==y?(this._pt.b=f,this._pt.e=ae,this._pt.r=_3):F!==U&&U!=="%"&&(this._pt.b=f,this._pt.r=y3);else if(D in s)M3.call(this,e,D,f,G?G+y:y);else if(D in e)this.add(e,D,f||e[D],G?G+y:y,n,r);else if(D!=="parseTransform"){U1(D,y);continue}Z||(D in s?re.push(D,0,s[D]):typeof e[D]=="function"?re.push(D,2,e[D]()):re.push(D,1,f||e[D])),o.push(D)}}J&&WE(this)},render:function(e,t){if(t.tween._time||!ew())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:kh,aliases:Bu,getSetter:function(e,t,i){var n=Bu[t];return n&&n.indexOf(",")<0&&(t=n),t in Fh&&t!==Nl&&(e._gsap.x||kh(e,"x"))?i&&jk===i?t==="scale"?S3:w3:(jk=i||{})&&(t==="scale"?k3:C3):e.style&&!j1(e.style[t])?v3:~t.indexOf("-")?b3:K1(e,t)},core:{_removeProperty:gd,_getMatrix:iw}};Bl.utils.checkPrefix=sg;Bl.core.getStyleSaver=KE;(function(a,e,t,i){var n=zl(a+","+e+","+t,function(r){Fh[r]=1});zl(e,function(r){uc.units[r]="deg",tM[r]=1}),Bu[n[13]]=a+","+e,zl(i,function(r){var o=r.split(":");Bu[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");zl("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(a){uc.units[a]="px"});Bl.registerPlugin(aM);var nw=Bl.registerPlugin(aM)||Bl;nw.core.Tween;function z3(a,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function F3(a,e,t){return e&&z3(a.prototype,e),a}var Po,G0,oc,nd,ad,qp,rM,rf,Tm,sM,Mh,tu,oM,lM=function(){return Po||typeof window<"u"&&(Po=window.gsap)&&Po.registerPlugin&&Po},cM=1,Fp=[],Ra=[],Vu=[],Em=Date.now,Pb=function(e,t){return t},N3=function(){var e=Tm.core,t=e.bridge||{},i=e._scrollers,n=e._proxies;i.push.apply(i,Ra),n.push.apply(n,Vu),Ra=i,Vu=n,Pb=function(o,s){return t[o](s)}},hd=function(e,t){return~Vu.indexOf(e)&&Vu[Vu.indexOf(e)+1][t]},Mm=function(e){return!!~sM.indexOf(e)},ol=function(e,t,i,n,r){return e.addEventListener(t,i,{passive:n!==!1,capture:!!r})},sl=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},h0="scrollLeft",d0="scrollTop",Lb=function(){return Mh&&Mh.isPressed||Ra.cache++},x_=function(e,t){var i=function n(r){if(r||r===0){cM&&(oc.history.scrollRestoration="manual");var o=Mh&&Mh.isPressed;r=n.v=Math.round(r)||(Mh&&Mh.iOS?1:0),e(r),n.cacheID=Ra.cache,o&&Pb("ss",r)}else(t||Ra.cache!==n.cacheID||Pb("ref"))&&(n.cacheID=Ra.cache,n.v=e());return n.v+n.offset};return i.offset=0,e&&i},fl={s:h0,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:x_(function(a){return arguments.length?oc.scrollTo(a,ro.sc()):oc.pageXOffset||nd[h0]||ad[h0]||qp[h0]||0})},ro={s:d0,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:fl,sc:x_(function(a){return arguments.length?oc.scrollTo(fl.sc(),a):oc.pageYOffset||nd[d0]||ad[d0]||qp[d0]||0})},Pl=function(e,t){return(t&&t._ctx&&t._ctx.selector||Po.utils.toArray)(e)[0]||(typeof e=="string"&&Po.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},B3=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},yd=function(e,t){var i=t.s,n=t.sc;Mm(e)&&(e=nd.scrollingElement||ad);var r=Ra.indexOf(e),o=n===ro.sc?1:2;!~r&&(r=Ra.push(e)-1),Ra[r+o]||ol(e,"scroll",Lb);var s=Ra[r+o],h=s||(Ra[r+o]=x_(hd(e,i),!0)||(Mm(e)?n:x_(function(f){return arguments.length?e[i]=f:e[i]})));return h.target=e,s||(h.smooth=Po.getProperty(e,"scrollBehavior")==="smooth"),h},Db=function(e,t,i){var n=e,r=e,o=Em(),s=o,h=t||50,f=Math.max(500,h*3),y=function(z,D){var F=Em();D||F-o>h?(r=n,n=z,s=o,o=F):i?n+=z:n=r+(z-r)/(F-s)*(o-s)},x=function(){r=n=i?0:n,s=o=0},S=function(z){var D=s,F=r,U=Em();return(z||z===0)&&z!==n&&y(z),o===s||U-s>f?0:(n+(i?F:-F))/((i?U:o)-D)*1e3};return{update:y,reset:x,getVelocity:S}},tm=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},qk=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},uM=function(){Tm=Po.core.globals().ScrollTrigger,Tm&&Tm.core&&N3()},hM=function(e){return Po=e||lM(),!G0&&Po&&typeof document<"u"&&document.body&&(oc=window,nd=document,ad=nd.documentElement,qp=nd.body,sM=[oc,nd,ad,qp],Po.utils.clamp,oM=Po.core.context||function(){},rf="onpointerenter"in qp?"pointer":"mouse",rM=$s.isTouch=oc.matchMedia&&oc.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in oc||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,tu=$s.eventTypes=("ontouchstart"in ad?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in ad?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return cM=0},500),uM(),G0=1),G0};fl.op=ro;Ra.cache=0;var $s=(function(){function a(t){this.init(t)}var e=a.prototype;return e.init=function(i){G0||hM(Po)||console.warn("Please gsap.registerPlugin(Observer)"),Tm||uM();var n=i.tolerance,r=i.dragMinimum,o=i.type,s=i.target,h=i.lineHeight,f=i.debounce,y=i.preventDefault,x=i.onStop,S=i.onStopDelay,E=i.ignore,z=i.wheelSpeed,D=i.event,F=i.onDragStart,U=i.onDragEnd,G=i.onDrag,Z=i.onPress,ee=i.onRelease,ie=i.onRight,le=i.onLeft,J=i.onUp,re=i.onDown,ae=i.onChangeX,me=i.onChangeY,Te=i.onChange,ye=i.onToggleX,Re=i.onToggleY,We=i.onHover,Le=i.onHoverEnd,ht=i.onMove,$e=i.ignoreCheck,pt=i.isNormalizer,Dt=i.onGestureStart,qe=i.onGestureEnd,Nt=i.onWheel,ni=i.onEnable,xi=i.onDisable,Lt=i.onClick,Tt=i.scrollSpeed,wt=i.capture,mi=i.allowClicks,bi=i.lockAxis,Zi=i.onLockAxis;this.target=s=Pl(s)||ad,this.vars=i,E&&(E=Po.utils.toArray(E)),n=n||1e-9,r=r||0,z=z||1,Tt=Tt||1,o=o||"wheel,touch,pointer",f=f!==!1,h||(h=parseFloat(oc.getComputedStyle(qp).lineHeight)||22);var Li,si,fn,Ii,Qi,rn,xn,Ye=this,qt=0,li=0,Fi=i.passive||!y&&i.passive!==!1,ci=yd(s,fl),Wi=yd(s,ro),wi=ci(),Ti=Wi(),Di=~o.indexOf("touch")&&!~o.indexOf("pointer")&&tu[0]==="pointerdown",dt=Mm(s),xe=s.ownerDocument||nd,be=[0,0,0],Ce=[0,0,0],tt=0,rt=function(){return tt=Em()},St=function(Oi,mn){return(Ye.event=Oi)&&E&&B3(Oi.target,E)||mn&&Di&&Oi.pointerType!=="touch"||$e&&$e(Oi,mn)},yt=function(){Ye._vx.reset(),Ye._vy.reset(),si.pause(),x&&x(Ye)},He=function(){var Oi=Ye.deltaX=qk(be),mn=Ye.deltaY=qk(Ce),hi=Math.abs(Oi)>=n,Xi=Math.abs(mn)>=n;Te&&(hi||Xi)&&Te(Ye,Oi,mn,be,Ce),hi&&(ie&&Ye.deltaX>0&&ie(Ye),le&&Ye.deltaX<0&&le(Ye),ae&&ae(Ye),ye&&Ye.deltaX<0!=qt<0&&ye(Ye),qt=Ye.deltaX,be[0]=be[1]=be[2]=0),Xi&&(re&&Ye.deltaY>0&&re(Ye),J&&Ye.deltaY<0&&J(Ye),me&&me(Ye),Re&&Ye.deltaY<0!=li<0&&Re(Ye),li=Ye.deltaY,Ce[0]=Ce[1]=Ce[2]=0),(Ii||fn)&&(ht&&ht(Ye),fn&&(F&&fn===1&&F(Ye),G&&G(Ye),fn=0),Ii=!1),rn&&!(rn=!1)&&Zi&&Zi(Ye),Qi&&(Nt(Ye),Qi=!1),Li=0},_t=function(Oi,mn,hi){be[hi]+=Oi,Ce[hi]+=mn,Ye._vx.update(Oi),Ye._vy.update(mn),f?Li||(Li=requestAnimationFrame(He)):He()},Ut=function(Oi,mn){bi&&!xn&&(Ye.axis=xn=Math.abs(Oi)>Math.abs(mn)?"x":"y",rn=!0),xn!=="y"&&(be[2]+=Oi,Ye._vx.update(Oi,!0)),xn!=="x"&&(Ce[2]+=mn,Ye._vy.update(mn,!0)),f?Li||(Li=requestAnimationFrame(He)):He()},Et=function(Oi){if(!St(Oi,1)){Oi=tm(Oi,y);var mn=Oi.clientX,hi=Oi.clientY,Xi=mn-Ye.x,sn=hi-Ye.y,Fe=Ye.isDragging;Ye.x=mn,Ye.y=hi,(Fe||(Xi||sn)&&(Math.abs(Ye.startX-mn)>=r||Math.abs(Ye.startY-hi)>=r))&&(fn||(fn=Fe?2:1),Fe||(Ye.isDragging=!0),Ut(Xi,sn))}},It=Ye.onPress=function(Bi){St(Bi,1)||Bi&&Bi.button||(Ye.axis=xn=null,si.pause(),Ye.isPressed=!0,Bi=tm(Bi),qt=li=0,Ye.startX=Ye.x=Bi.clientX,Ye.startY=Ye.y=Bi.clientY,Ye._vx.reset(),Ye._vy.reset(),ol(pt?s:xe,tu[1],Et,Fi,!0),Ye.deltaX=Ye.deltaY=0,Z&&Z(Ye))},ai=Ye.onRelease=function(Bi){if(!St(Bi,1)){sl(pt?s:xe,tu[1],Et,!0);var Oi=!isNaN(Ye.y-Ye.startY),mn=Ye.isDragging,hi=mn&&(Math.abs(Ye.x-Ye.startX)>3||Math.abs(Ye.y-Ye.startY)>3),Xi=tm(Bi);!hi&&Oi&&(Ye._vx.reset(),Ye._vy.reset(),y&&mi&&Po.delayedCall(.08,function(){if(Em()-tt>300&&!Bi.defaultPrevented){if(Bi.target.click)Bi.target.click();else if(xe.createEvent){var sn=xe.createEvent("MouseEvents");sn.initMouseEvent("click",!0,!0,oc,1,Xi.screenX,Xi.screenY,Xi.clientX,Xi.clientY,!1,!1,!1,!1,0,null),Bi.target.dispatchEvent(sn)}}})),Ye.isDragging=Ye.isGesturing=Ye.isPressed=!1,x&&mn&&!pt&&si.restart(!0),fn&&He(),U&&mn&&U(Ye),ee&&ee(Ye,hi)}},Si=function(Oi){return Oi.touches&&Oi.touches.length>1&&(Ye.isGesturing=!0)&&Dt(Oi,Ye.isDragging)},Ai=function(){return(Ye.isGesturing=!1)||qe(Ye)},Mn=function(Oi){if(!St(Oi)){var mn=ci(),hi=Wi();_t((mn-wi)*Tt,(hi-Ti)*Tt,1),wi=mn,Ti=hi,x&&si.restart(!0)}},Mt=function(Oi){if(!St(Oi)){Oi=tm(Oi,y),Nt&&(Qi=!0);var mn=(Oi.deltaMode===1?h:Oi.deltaMode===2?oc.innerHeight:1)*z;_t(Oi.deltaX*mn,Oi.deltaY*mn,0),x&&!pt&&si.restart(!0)}},Dn=function(Oi){if(!St(Oi)){var mn=Oi.clientX,hi=Oi.clientY,Xi=mn-Ye.x,sn=hi-Ye.y;Ye.x=mn,Ye.y=hi,Ii=!0,x&&si.restart(!0),(Xi||sn)&&Ut(Xi,sn)}},Yn=function(Oi){Ye.event=Oi,We(Ye)},_n=function(Oi){Ye.event=Oi,Le(Ye)},pn=function(Oi){return St(Oi)||tm(Oi,y)&&Lt(Ye)};si=Ye._dc=Po.delayedCall(S||.25,yt).pause(),Ye.deltaX=Ye.deltaY=0,Ye._vx=Db(0,50,!0),Ye._vy=Db(0,50,!0),Ye.scrollX=ci,Ye.scrollY=Wi,Ye.isDragging=Ye.isGesturing=Ye.isPressed=!1,oM(this),Ye.enable=function(Bi){return Ye.isEnabled||(ol(dt?xe:s,"scroll",Lb),o.indexOf("scroll")>=0&&ol(dt?xe:s,"scroll",Mn,Fi,wt),o.indexOf("wheel")>=0&&ol(s,"wheel",Mt,Fi,wt),(o.indexOf("touch")>=0&&rM||o.indexOf("pointer")>=0)&&(ol(s,tu[0],It,Fi,wt),ol(xe,tu[2],ai),ol(xe,tu[3],ai),mi&&ol(s,"click",rt,!0,!0),Lt&&ol(s,"click",pn),Dt&&ol(xe,"gesturestart",Si),qe&&ol(xe,"gestureend",Ai),We&&ol(s,rf+"enter",Yn),Le&&ol(s,rf+"leave",_n),ht&&ol(s,rf+"move",Dn)),Ye.isEnabled=!0,Ye.isDragging=Ye.isGesturing=Ye.isPressed=Ii=fn=!1,Ye._vx.reset(),Ye._vy.reset(),wi=ci(),Ti=Wi(),Bi&&Bi.type&&It(Bi),ni&&ni(Ye)),Ye},Ye.disable=function(){Ye.isEnabled&&(Fp.filter(function(Bi){return Bi!==Ye&&Mm(Bi.target)}).length||sl(dt?xe:s,"scroll",Lb),Ye.isPressed&&(Ye._vx.reset(),Ye._vy.reset(),sl(pt?s:xe,tu[1],Et,!0)),sl(dt?xe:s,"scroll",Mn,wt),sl(s,"wheel",Mt,wt),sl(s,tu[0],It,wt),sl(xe,tu[2],ai),sl(xe,tu[3],ai),sl(s,"click",rt,!0),sl(s,"click",pn),sl(xe,"gesturestart",Si),sl(xe,"gestureend",Ai),sl(s,rf+"enter",Yn),sl(s,rf+"leave",_n),sl(s,rf+"move",Dn),Ye.isEnabled=Ye.isPressed=Ye.isDragging=!1,xi&&xi(Ye))},Ye.kill=Ye.revert=function(){Ye.disable();var Bi=Fp.indexOf(Ye);Bi>=0&&Fp.splice(Bi,1),Mh===Ye&&(Mh=0)},Fp.push(Ye),pt&&Mm(s)&&(Mh=Ye),Ye.enable(D)},F3(a,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),a})();$s.version="3.14.2";$s.create=function(a){return new $s(a)};$s.register=hM;$s.getAll=function(){return Fp.slice()};$s.getById=function(a){return Fp.filter(function(e){return e.vars.id===a})[0]};lM()&&Po.registerPlugin($s);var Nn,Lp,Da,qr,rc,_r,aw,v_,Km,Im,fm,f0,$o,q_,Rb,cl,Zk,Kk,Dp,dM,kv,fM,ll,Ob,pM,gM,Kh,zb,rw,Zp,sw,Pm,Fb,Cv,p0=1,Wo=Date.now,Av=Wo(),Oc=0,pm=0,Jk=function(e,t,i){var n=nc(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=n,n?e.substr(6,e.length-7):e},Qk=function(e,t){return t&&(!nc(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},j3=function a(){return pm&&requestAnimationFrame(a)},eC=function(){return q_=1},tC=function(){return q_=0},zu=function(e){return e},gm=function(e){return Math.round(e*1e5)/1e5||0},mM=function(){return typeof window<"u"},yM=function(){return Nn||mM()&&(Nn=window.gsap)&&Nn.registerPlugin&&Nn},Rf=function(e){return!!~aw.indexOf(e)},_M=function(e){return(e==="Height"?sw:Da["inner"+e])||rc["client"+e]||_r["client"+e]},xM=function(e){return hd(e,"getBoundingClientRect")||(Rf(e)?function(){return Z0.width=Da.innerWidth,Z0.height=sw,Z0}:function(){return Ah(e)})},V3=function(e,t,i){var n=i.d,r=i.d2,o=i.a;return(o=hd(e,"getBoundingClientRect"))?function(){return o()[n]}:function(){return(t?_M(r):e["client"+r])||0}},H3=function(e,t){return!t||~Vu.indexOf(e)?xM(e):function(){return Z0}},ju=function(e,t){var i=t.s,n=t.d2,r=t.d,o=t.a;return Math.max(0,(i="scroll"+n)&&(o=hd(e,i))?o()-xM(e)()[r]:Rf(e)?(rc[i]||_r[i])-_M(n):e[i]-e["offset"+n])},g0=function(e,t){for(var i=0;i<Dp.length;i+=3)(!t||~t.indexOf(Dp[i+1]))&&e(Dp[i],Dp[i+1],Dp[i+2])},nc=function(e){return typeof e=="string"},qo=function(e){return typeof e=="function"},mm=function(e){return typeof e=="number"},sf=function(e){return typeof e=="object"},im=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},Tv=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},wp=Math.abs,vM="left",bM="top",ow="right",lw="bottom",Tf="width",Ef="height",Lm="Right",Dm="Left",Rm="Top",Om="Bottom",eo="padding",Ic="margin",og="Width",cw="Height",ao="px",Pc=function(e){return Da.getComputedStyle(e)},U3=function(e){var t=Pc(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},iC=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Ah=function(e,t){var i=t&&Pc(e)[Rb]!=="matrix(1, 0, 0, 1, 0, 0)"&&Nn.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return i&&i.progress(0).kill(),n},b_=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},wM=function(e){var t=[],i=e.labels,n=e.duration(),r;for(r in i)t.push(i[r]/n);return t},$3=function(e){return function(t){return Nn.utils.snap(wM(e),t)}},uw=function(e){var t=Nn.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(n,r){return n-r});return i?function(n,r,o){o===void 0&&(o=.001);var s;if(!r)return t(n);if(r>0){for(n-=o,s=0;s<i.length;s++)if(i[s]>=n)return i[s];return i[s-1]}else for(s=i.length,n+=o;s--;)if(i[s]<=n)return i[s];return i[0]}:function(n,r,o){o===void 0&&(o=.001);var s=t(n);return!r||Math.abs(s-n)<o||s-n<0==r<0?s:t(r<0?n-e:n+e)}},G3=function(e){return function(t,i){return uw(wM(e))(t,i.direction)}},m0=function(e,t,i,n){return i.split(",").forEach(function(r){return e(t,r,n)})},vo=function(e,t,i,n,r){return e.addEventListener(t,i,{passive:!n,capture:!!r})},xo=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},y0=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},nC={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_0={toggleActions:"play",anticipatePin:0},w_={top:0,left:0,center:.5,bottom:1,right:1},W0=function(e,t){if(nc(e)){var i=e.indexOf("="),n=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in w_?w_[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},x0=function(e,t,i,n,r,o,s,h){var f=r.startColor,y=r.endColor,x=r.fontSize,S=r.indent,E=r.fontWeight,z=qr.createElement("div"),D=Rf(i)||hd(i,"pinType")==="fixed",F=e.indexOf("scroller")!==-1,U=D?_r:i,G=e.indexOf("start")!==-1,Z=G?f:y,ee="border-color:"+Z+";font-size:"+x+";color:"+Z+";font-weight:"+E+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return ee+="position:"+((F||h)&&D?"fixed;":"absolute;"),(F||h||!D)&&(ee+=(n===ro?ow:lw)+":"+(o+parseFloat(S))+"px;"),s&&(ee+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),z._isStart=G,z.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),z.style.cssText=ee,z.innerText=t||t===0?e+"-"+t:e,U.children[0]?U.insertBefore(z,U.children[0]):U.appendChild(z),z._offset=z["offset"+n.op.d2],X0(z,0,n,G),z},X0=function(e,t,i,n){var r={display:"block"},o=i[n?"os2":"p2"],s=i[n?"p2":"os2"];e._isFlipped=n,r[i.a+"Percent"]=n?-100:0,r[i.a]=n?"1px":0,r["border"+o+og]=1,r["border"+s+og]=0,r[i.p]=t+"px",Nn.set(e,r)},Pa=[],Nb={},Jm,aC=function(){return Wo()-Oc>34&&(Jm||(Jm=requestAnimationFrame(Rh)))},Sp=function(){(!ll||!ll.isPressed||ll.startX>_r.clientWidth)&&(Ra.cache++,ll?Jm||(Jm=requestAnimationFrame(Rh)):Rh(),Oc||zf("scrollStart"),Oc=Wo())},Ev=function(){gM=Da.innerWidth,pM=Da.innerHeight},ym=function(e){Ra.cache++,(e===!0||!$o&&!fM&&!qr.fullscreenElement&&!qr.webkitFullscreenElement&&(!Ob||gM!==Da.innerWidth||Math.abs(Da.innerHeight-pM)>Da.innerHeight*.25))&&v_.restart(!0)},Of={},W3=[],SM=function a(){return xo(Oa,"scrollEnd",a)||mf(!0)},zf=function(e){return Of[e]&&Of[e].map(function(t){return t()})||W3},ic=[],kM=function(e){for(var t=0;t<ic.length;t+=5)(!e||ic[t+4]&&ic[t+4].query===e)&&(ic[t].style.cssText=ic[t+1],ic[t].getBBox&&ic[t].setAttribute("transform",ic[t+2]||""),ic[t+3].uncache=1)},CM=function(){return Ra.forEach(function(e){return qo(e)&&++e.cacheID&&(e.rec=e())})},hw=function(e,t){var i;for(cl=0;cl<Pa.length;cl++)i=Pa[cl],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));Pm=!0,t&&kM(t),t||zf("revert")},AM=function(e,t){Ra.cache++,(t||!ul)&&Ra.forEach(function(i){return qo(i)&&i.cacheID++&&(i.rec=0)}),nc(e)&&(Da.history.scrollRestoration=rw=e)},ul,Mf=0,rC,X3=function(){if(rC!==Mf){var e=rC=Mf;requestAnimationFrame(function(){return e===Mf&&mf(!0)})}},TM=function(){_r.appendChild(Zp),sw=!ll&&Zp.offsetHeight||Da.innerHeight,_r.removeChild(Zp)},sC=function(e){return Km(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},mf=function(e,t){if(rc=qr.documentElement,_r=qr.body,aw=[Da,qr,rc,_r],Oc&&!e&&!Pm){vo(Oa,"scrollEnd",SM);return}TM(),ul=Oa.isRefreshing=!0,Pm||CM();var i=zf("refreshInit");dM&&Oa.sort(),t||hw(),Ra.forEach(function(n){qo(n)&&(n.smooth&&(n.target.style.scrollBehavior="auto"),n(0))}),Pa.slice(0).forEach(function(n){return n.refresh()}),Pm=!1,Pa.forEach(function(n){if(n._subPinOffset&&n.pin){var r=n.vars.horizontal?"offsetWidth":"offsetHeight",o=n.pin[r];n.revert(!0,1),n.adjustPinSpacing(n.pin[r]-o),n.refresh()}}),Fb=1,sC(!0),Pa.forEach(function(n){var r=ju(n.scroller,n._dir),o=n.vars.end==="max"||n._endClamp&&n.end>r,s=n._startClamp&&n.start>=r;(o||s)&&n.setPositions(s?r-1:n.start,o?Math.max(s?r:n.start+1,r):n.end,!0)}),sC(!1),Fb=0,i.forEach(function(n){return n&&n.render&&n.render(-1)}),Ra.forEach(function(n){qo(n)&&(n.smooth&&requestAnimationFrame(function(){return n.target.style.scrollBehavior="smooth"}),n.rec&&n(n.rec))}),AM(rw,1),v_.pause(),Mf++,ul=2,Rh(2),Pa.forEach(function(n){return qo(n.vars.onRefresh)&&n.vars.onRefresh(n)}),ul=Oa.isRefreshing=!1,zf("refresh")},Bb=0,Y0=1,zm,Rh=function(e){if(e===2||!ul&&!Pm){Oa.isUpdating=!0,zm&&zm.update(0);var t=Pa.length,i=Wo(),n=i-Av>=50,r=t&&Pa[0].scroll();if(Y0=Bb>r?-1:1,ul||(Bb=r),n&&(Oc&&!q_&&i-Oc>200&&(Oc=0,zf("scrollEnd")),fm=Av,Av=i),Y0<0){for(cl=t;cl-- >0;)Pa[cl]&&Pa[cl].update(0,n);Y0=1}else for(cl=0;cl<t;cl++)Pa[cl]&&Pa[cl].update(0,n);Oa.isUpdating=!1}Jm=0},jb=[vM,bM,lw,ow,Ic+Om,Ic+Lm,Ic+Rm,Ic+Dm,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],q0=jb.concat([Tf,Ef,"boxSizing","max"+og,"max"+cw,"position",Ic,eo,eo+Rm,eo+Lm,eo+Om,eo+Dm]),Y3=function(e,t,i){Kp(i);var n=e._gsap;if(n.spacerIsNative)Kp(n.spacerState);else if(e._gsap.swappedIn){var r=t.parentNode;r&&(r.insertBefore(e,t),r.removeChild(t))}e._gsap.swappedIn=!1},Mv=function(e,t,i,n){if(!e._gsap.swappedIn){for(var r=jb.length,o=t.style,s=e.style,h;r--;)h=jb[r],o[h]=i[h];o.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(o.display="inline-block"),s[lw]=s[ow]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Tf]=b_(e,fl)+ao,o[Ef]=b_(e,ro)+ao,o[eo]=s[Ic]=s[bM]=s[vM]="0",Kp(n),s[Tf]=s["max"+og]=i[Tf],s[Ef]=s["max"+cw]=i[Ef],s[eo]=i[eo],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},q3=/([A-Z])/g,Kp=function(e){if(e){var t=e.t.style,i=e.length,n=0,r,o;for((e.t._gsap||Nn.core.getCache(e.t)).uncache=1;n<i;n+=2)o=e[n+1],r=e[n],o?t[r]=o:t[r]&&t.removeProperty(r.replace(q3,"-$1").toLowerCase())}},v0=function(e){for(var t=q0.length,i=e.style,n=[],r=0;r<t;r++)n.push(q0[r],i[q0[r]]);return n.t=e,n},Z3=function(e,t,i){for(var n=[],r=e.length,o=i?8:0,s;o<r;o+=2)s=e[o],n.push(s,s in t?t[s]:e[o+1]);return n.t=e.t,n},Z0={left:0,top:0},oC=function(e,t,i,n,r,o,s,h,f,y,x,S,E,z){qo(e)&&(e=e(h)),nc(e)&&e.substr(0,3)==="max"&&(e=S+(e.charAt(4)==="="?W0("0"+e.substr(3),i):0));var D=E?E.time():0,F,U,G;if(E&&E.seek(0),isNaN(e)||(e=+e),mm(e))E&&(e=Nn.utils.mapRange(E.scrollTrigger.start,E.scrollTrigger.end,0,S,e)),s&&X0(s,i,n,!0);else{qo(t)&&(t=t(h));var Z=(e||"0").split(" "),ee,ie,le,J;G=Pl(t,h)||_r,ee=Ah(G)||{},(!ee||!ee.left&&!ee.top)&&Pc(G).display==="none"&&(J=G.style.display,G.style.display="block",ee=Ah(G),J?G.style.display=J:G.style.removeProperty("display")),ie=W0(Z[0],ee[n.d]),le=W0(Z[1]||"0",i),e=ee[n.p]-f[n.p]-y+ie+r-le,s&&X0(s,le,n,i-le<20||s._isStart&&le>20),i-=i-le}if(z&&(h[z]=e||-.001,e<0&&(e=0)),o){var re=e+i,ae=o._isStart;F="scroll"+n.d2,X0(o,re,n,ae&&re>20||!ae&&(x?Math.max(_r[F],rc[F]):o.parentNode[F])<=re+1),x&&(f=Ah(s),x&&(o.style[n.op.p]=f[n.op.p]-n.op.m-o._offset+ao))}return E&&G&&(F=Ah(G),E.seek(S),U=Ah(G),E._caScrollDist=F[n.p]-U[n.p],e=e/E._caScrollDist*S),E&&E.seek(D),E?e:Math.round(e)},K3=/(webkit|moz|length|cssText|inset)/i,lC=function(e,t,i,n){if(e.parentNode!==t){var r=e.style,o,s;if(t===_r){e._stOrig=r.cssText,s=Pc(e);for(o in s)!+o&&!K3.test(o)&&s[o]&&typeof r[o]=="string"&&o!=="0"&&(r[o]=s[o]);r.top=i,r.left=n}else r.cssText=e._stOrig;Nn.core.getCache(e).uncache=1,t.appendChild(e)}},EM=function(e,t,i){var n=t,r=n;return function(o){var s=Math.round(e());return s!==n&&s!==r&&Math.abs(s-n)>3&&Math.abs(s-r)>3&&(o=s,i&&i()),r=n,n=Math.round(o),n}},b0=function(e,t,i){var n={};n[t.p]="+="+i,Nn.set(e,n)},cC=function(e,t){var i=yd(e,t),n="_scroll"+t.p2,r=function o(s,h,f,y,x){var S=o.tween,E=h.onComplete,z={};f=f||i();var D=EM(i,f,function(){S.kill(),o.tween=0});return x=y&&x||0,y=y||s-f,S&&S.kill(),h[n]=s,h.inherit=!1,h.modifiers=z,z[n]=function(){return D(f+y*S.ratio+x*S.ratio*S.ratio)},h.onUpdate=function(){Ra.cache++,o.tween&&Rh()},h.onComplete=function(){o.tween=0,E&&E.call(S)},S=o.tween=Nn.to(e,h),S};return e[n]=i,i.wheelHandler=function(){return r.tween&&r.tween.kill()&&(r.tween=0)},vo(e,"wheel",i.wheelHandler),Oa.isTouch&&vo(e,"touchmove",i.wheelHandler),r},Oa=(function(){function a(t,i){Lp||a.register(Nn)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),zb(this),this.init(t,i)}var e=a.prototype;return e.init=function(i,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!pm){this.update=this.refresh=this.kill=zu;return}i=iC(nc(i)||mm(i)||i.nodeType?{trigger:i}:i,_0);var r=i,o=r.onUpdate,s=r.toggleClass,h=r.id,f=r.onToggle,y=r.onRefresh,x=r.scrub,S=r.trigger,E=r.pin,z=r.pinSpacing,D=r.invalidateOnRefresh,F=r.anticipatePin,U=r.onScrubComplete,G=r.onSnapComplete,Z=r.once,ee=r.snap,ie=r.pinReparent,le=r.pinSpacer,J=r.containerAnimation,re=r.fastScrollEnd,ae=r.preventOverlaps,me=i.horizontal||i.containerAnimation&&i.horizontal!==!1?fl:ro,Te=!x&&x!==0,ye=Pl(i.scroller||Da),Re=Nn.core.getCache(ye),We=Rf(ye),Le=("pinType"in i?i.pinType:hd(ye,"pinType")||We&&"fixed")==="fixed",ht=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],$e=Te&&i.toggleActions.split(" "),pt="markers"in i?i.markers:_0.markers,Dt=We?0:parseFloat(Pc(ye)["border"+me.p2+og])||0,qe=this,Nt=i.onRefreshInit&&function(){return i.onRefreshInit(qe)},ni=V3(ye,We,me),xi=H3(ye,We),Lt=0,Tt=0,wt=0,mi=yd(ye,me),bi,Zi,Li,si,fn,Ii,Qi,rn,xn,Ye,qt,li,Fi,ci,Wi,wi,Ti,Di,dt,xe,be,Ce,tt,rt,St,yt,He,_t,Ut,Et,It,ai,Si,Ai,Mn,Mt,Dn,Yn,_n;if(qe._startClamp=qe._endClamp=!1,qe._dir=me,F*=45,qe.scroller=ye,qe.scroll=J?J.time.bind(J):mi,si=mi(),qe.vars=i,n=n||i.animation,"refreshPriority"in i&&(dM=1,i.refreshPriority===-9999&&(zm=qe)),Re.tweenScroll=Re.tweenScroll||{top:cC(ye,ro),left:cC(ye,fl)},qe.tweenTo=bi=Re.tweenScroll[me.p],qe.scrubDuration=function(hi){Si=mm(hi)&&hi,Si?ai?ai.duration(hi):ai=Nn.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Si,paused:!0,onComplete:function(){return U&&U(qe)}}):(ai&&ai.progress(1).kill(),ai=0)},n&&(n.vars.lazy=!1,n._initted&&!qe.isReverted||n.vars.immediateRender!==!1&&i.immediateRender!==!1&&n.duration()&&n.render(0,!0,!0),qe.animation=n.pause(),n.scrollTrigger=qe,qe.scrubDuration(x),Et=0,h||(h=n.vars.id)),ee&&((!sf(ee)||ee.push)&&(ee={snapTo:ee}),"scrollBehavior"in _r.style&&Nn.set(We?[_r,rc]:ye,{scrollBehavior:"auto"}),Ra.forEach(function(hi){return qo(hi)&&hi.target===(We?qr.scrollingElement||rc:ye)&&(hi.smooth=!1)}),Li=qo(ee.snapTo)?ee.snapTo:ee.snapTo==="labels"?$3(n):ee.snapTo==="labelsDirectional"?G3(n):ee.directional!==!1?function(hi,Xi){return uw(ee.snapTo)(hi,Wo()-Tt<500?0:Xi.direction)}:Nn.utils.snap(ee.snapTo),Ai=ee.duration||{min:.1,max:2},Ai=sf(Ai)?Im(Ai.min,Ai.max):Im(Ai,Ai),Mn=Nn.delayedCall(ee.delay||Si/2||.1,function(){var hi=mi(),Xi=Wo()-Tt<500,sn=bi.tween;if((Xi||Math.abs(qe.getVelocity())<10)&&!sn&&!q_&&Lt!==hi){var Fe=(hi-Ii)/ci,Oe=n&&!Te?n.totalProgress():Fe,xt=Xi?0:(Oe-It)/(Wo()-fm)*1e3||0,ct=Nn.utils.clamp(-Fe,1-Fe,wp(xt/2)*xt/.185),Jt=Fe+(ee.inertia===!1?0:ct),ii,gt,Gt=ee,ei=Gt.onStart,ki=Gt.onInterrupt,gn=Gt.onComplete;if(ii=Li(Jt,qe),mm(ii)||(ii=Jt),gt=Math.max(0,Math.round(Ii+ii*ci)),hi<=Qi&&hi>=Ii&&gt!==hi){if(sn&&!sn._initted&&sn.data<=wp(gt-hi))return;ee.inertia===!1&&(ct=ii-Fe),bi(gt,{duration:Ai(wp(Math.max(wp(Jt-Oe),wp(ii-Oe))*.185/xt/.05||0)),ease:ee.ease||"power3",data:wp(gt-hi),onInterrupt:function(){return Mn.restart(!0)&&ki&&ki(qe)},onComplete:function(){qe.update(),Lt=mi(),n&&!Te&&(ai?ai.resetTo("totalProgress",ii,n._tTime/n._tDur):n.progress(ii)),Et=It=n&&!Te?n.totalProgress():qe.progress,G&&G(qe),gn&&gn(qe)}},hi,ct*ci,gt-hi-ct*ci),ei&&ei(qe,bi.tween)}}else qe.isActive&&Lt!==hi&&Mn.restart(!0)}).pause()),h&&(Nb[h]=qe),S=qe.trigger=Pl(S||E!==!0&&E),_n=S&&S._gsap&&S._gsap.stRevert,_n&&(_n=_n(qe)),E=E===!0?S:Pl(E),nc(s)&&(s={targets:S,className:s}),E&&(z===!1||z===Ic||(z=!z&&E.parentNode&&E.parentNode.style&&Pc(E.parentNode).display==="flex"?!1:eo),qe.pin=E,Zi=Nn.core.getCache(E),Zi.spacer?Wi=Zi.pinState:(le&&(le=Pl(le),le&&!le.nodeType&&(le=le.current||le.nativeElement),Zi.spacerIsNative=!!le,le&&(Zi.spacerState=v0(le))),Zi.spacer=Di=le||qr.createElement("div"),Di.classList.add("pin-spacer"),h&&Di.classList.add("pin-spacer-"+h),Zi.pinState=Wi=v0(E)),i.force3D!==!1&&Nn.set(E,{force3D:!0}),qe.spacer=Di=Zi.spacer,Ut=Pc(E),rt=Ut[z+me.os2],xe=Nn.getProperty(E),be=Nn.quickSetter(E,me.a,ao),Mv(E,Di,Ut),Ti=v0(E)),pt){li=sf(pt)?iC(pt,nC):nC,Ye=x0("scroller-start",h,ye,me,li,0),qt=x0("scroller-end",h,ye,me,li,0,Ye),dt=Ye["offset"+me.op.d2];var pn=Pl(hd(ye,"content")||ye);rn=this.markerStart=x0("start",h,pn,me,li,dt,0,J),xn=this.markerEnd=x0("end",h,pn,me,li,dt,0,J),J&&(Yn=Nn.quickSetter([rn,xn],me.a,ao)),!Le&&!(Vu.length&&hd(ye,"fixedMarkers")===!0)&&(U3(We?_r:ye),Nn.set([Ye,qt],{force3D:!0}),yt=Nn.quickSetter(Ye,me.a,ao),_t=Nn.quickSetter(qt,me.a,ao))}if(J){var Bi=J.vars.onUpdate,Oi=J.vars.onUpdateParams;J.eventCallback("onUpdate",function(){qe.update(0,0,1),Bi&&Bi.apply(J,Oi||[])})}if(qe.previous=function(){return Pa[Pa.indexOf(qe)-1]},qe.next=function(){return Pa[Pa.indexOf(qe)+1]},qe.revert=function(hi,Xi){if(!Xi)return qe.kill(!0);var sn=hi!==!1||!qe.enabled,Fe=$o;sn!==qe.isReverted&&(sn&&(Mt=Math.max(mi(),qe.scroll.rec||0),wt=qe.progress,Dn=n&&n.progress()),rn&&[rn,xn,Ye,qt].forEach(function(Oe){return Oe.style.display=sn?"none":"block"}),sn&&($o=qe,qe.update(sn)),E&&(!ie||!qe.isActive)&&(sn?Y3(E,Di,Wi):Mv(E,Di,Pc(E),St)),sn||qe.update(sn),$o=Fe,qe.isReverted=sn)},qe.refresh=function(hi,Xi,sn,Fe){if(!(($o||!qe.enabled)&&!Xi)){if(E&&hi&&Oc){vo(a,"scrollEnd",SM);return}!ul&&Nt&&Nt(qe),$o=qe,bi.tween&&!sn&&(bi.tween.kill(),bi.tween=0),ai&&ai.pause(),D&&n&&(n.revert({kill:!1}).invalidate(),n.getChildren?n.getChildren(!0,!0,!1).forEach(function(kn){return kn.vars.immediateRender&&kn.render(0,!0,!0)}):n.vars.immediateRender&&n.render(0,!0,!0)),qe.isReverted||qe.revert(!0,!0),qe._subPinOffset=!1;var Oe=ni(),xt=xi(),ct=J?J.duration():ju(ye,me),Jt=ci<=.01||!ci,ii=0,gt=Fe||0,Gt=sf(sn)?sn.end:i.end,ei=i.endTrigger||S,ki=sf(sn)?sn.start:i.start||(i.start===0||!S?0:E?"0 0":"0 100%"),gn=qe.pinnedContainer=i.pinnedContainer&&Pl(i.pinnedContainer,qe),$i=S&&Math.max(0,Pa.indexOf(qe))||0,Ei=$i,Vi,Yi,on,ca,vn,$n,Zt,Ma,nn,Za,er,qn,Zn;for(pt&&sf(sn)&&(qn=Nn.getProperty(Ye,me.p),Zn=Nn.getProperty(qt,me.p));Ei-- >0;)$n=Pa[Ei],$n.end||$n.refresh(0,1)||($o=qe),Zt=$n.pin,Zt&&(Zt===S||Zt===E||Zt===gn)&&!$n.isReverted&&(Za||(Za=[]),Za.unshift($n),$n.revert(!0,!0)),$n!==Pa[Ei]&&($i--,Ei--);for(qo(ki)&&(ki=ki(qe)),ki=Jk(ki,"start",qe),Ii=oC(ki,S,Oe,me,mi(),rn,Ye,qe,xt,Dt,Le,ct,J,qe._startClamp&&"_startClamp")||(E?-.001:0),qo(Gt)&&(Gt=Gt(qe)),nc(Gt)&&!Gt.indexOf("+=")&&(~Gt.indexOf(" ")?Gt=(nc(ki)?ki.split(" ")[0]:"")+Gt:(ii=W0(Gt.substr(2),Oe),Gt=nc(ki)?ki:(J?Nn.utils.mapRange(0,J.duration(),J.scrollTrigger.start,J.scrollTrigger.end,Ii):Ii)+ii,ei=S)),Gt=Jk(Gt,"end",qe),Qi=Math.max(Ii,oC(Gt||(ei?"100% 0":ct),ei,Oe,me,mi()+ii,xn,qt,qe,xt,Dt,Le,ct,J,qe._endClamp&&"_endClamp"))||-.001,ii=0,Ei=$i;Ei--;)$n=Pa[Ei]||{},Zt=$n.pin,Zt&&$n.start-$n._pinPush<=Ii&&!J&&$n.end>0&&(Vi=$n.end-(qe._startClamp?Math.max(0,$n.start):$n.start),(Zt===S&&$n.start-$n._pinPush<Ii||Zt===gn)&&isNaN(ki)&&(ii+=Vi*(1-$n.progress)),Zt===E&&(gt+=Vi));if(Ii+=ii,Qi+=ii,qe._startClamp&&(qe._startClamp+=ii),qe._endClamp&&!ul&&(qe._endClamp=Qi||-.001,Qi=Math.min(Qi,ju(ye,me))),ci=Qi-Ii||(Ii-=.01)&&.001,Jt&&(wt=Nn.utils.clamp(0,1,Nn.utils.normalize(Ii,Qi,Mt))),qe._pinPush=gt,rn&&ii&&(Vi={},Vi[me.a]="+="+ii,gn&&(Vi[me.p]="-="+mi()),Nn.set([rn,xn],Vi)),E&&!(Fb&&qe.end>=ju(ye,me)))Vi=Pc(E),ca=me===ro,on=mi(),Ce=parseFloat(xe(me.a))+gt,!ct&&Qi>1&&(er=(We?qr.scrollingElement||rc:ye).style,er={style:er,value:er["overflow"+me.a.toUpperCase()]},We&&Pc(_r)["overflow"+me.a.toUpperCase()]!=="scroll"&&(er.style["overflow"+me.a.toUpperCase()]="scroll")),Mv(E,Di,Vi),Ti=v0(E),Yi=Ah(E,!0),Ma=Le&&yd(ye,ca?fl:ro)(),z?(St=[z+me.os2,ci+gt+ao],St.t=Di,Ei=z===eo?b_(E,me)+ci+gt:0,Ei&&(St.push(me.d,Ei+ao),Di.style.flexBasis!=="auto"&&(Di.style.flexBasis=Ei+ao)),Kp(St),gn&&Pa.forEach(function(kn){kn.pin===gn&&kn.vars.pinSpacing!==!1&&(kn._subPinOffset=!0)}),Le&&mi(Mt)):(Ei=b_(E,me),Ei&&Di.style.flexBasis!=="auto"&&(Di.style.flexBasis=Ei+ao)),Le&&(vn={top:Yi.top+(ca?on-Ii:Ma)+ao,left:Yi.left+(ca?Ma:on-Ii)+ao,boxSizing:"border-box",position:"fixed"},vn[Tf]=vn["max"+og]=Math.ceil(Yi.width)+ao,vn[Ef]=vn["max"+cw]=Math.ceil(Yi.height)+ao,vn[Ic]=vn[Ic+Rm]=vn[Ic+Lm]=vn[Ic+Om]=vn[Ic+Dm]="0",vn[eo]=Vi[eo],vn[eo+Rm]=Vi[eo+Rm],vn[eo+Lm]=Vi[eo+Lm],vn[eo+Om]=Vi[eo+Om],vn[eo+Dm]=Vi[eo+Dm],wi=Z3(Wi,vn,ie),ul&&mi(0)),n?(nn=n._initted,kv(1),n.render(n.duration(),!0,!0),tt=xe(me.a)-Ce+ci+gt,He=Math.abs(ci-tt)>1,Le&&He&&wi.splice(wi.length-2,2),n.render(0,!0,!0),nn||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),kv(0)):tt=ci,er&&(er.value?er.style["overflow"+me.a.toUpperCase()]=er.value:er.style.removeProperty("overflow-"+me.a));else if(S&&mi()&&!J)for(Yi=S.parentNode;Yi&&Yi!==_r;)Yi._pinOffset&&(Ii-=Yi._pinOffset,Qi-=Yi._pinOffset),Yi=Yi.parentNode;Za&&Za.forEach(function(kn){return kn.revert(!1,!0)}),qe.start=Ii,qe.end=Qi,si=fn=ul?Mt:mi(),!J&&!ul&&(si<Mt&&mi(Mt),qe.scroll.rec=0),qe.revert(!1,!0),Tt=Wo(),Mn&&(Lt=-1,Mn.restart(!0)),$o=0,n&&Te&&(n._initted||Dn)&&n.progress()!==Dn&&n.progress(Dn||0,!0).render(n.time(),!0,!0),(Jt||wt!==qe.progress||J||D||n&&!n._initted)&&(n&&!Te&&(n._initted||wt||n.vars.immediateRender!==!1)&&n.totalProgress(J&&Ii<-.001&&!wt?Nn.utils.normalize(Ii,Qi,0):wt,!0),qe.progress=Jt||(si-Ii)/ci===wt?0:wt),E&&z&&(Di._pinOffset=Math.round(qe.progress*tt)),ai&&ai.invalidate(),isNaN(qn)||(qn-=Nn.getProperty(Ye,me.p),Zn-=Nn.getProperty(qt,me.p),b0(Ye,me,qn),b0(rn,me,qn-(Fe||0)),b0(qt,me,Zn),b0(xn,me,Zn-(Fe||0))),Jt&&!ul&&qe.update(),y&&!ul&&!Fi&&(Fi=!0,y(qe),Fi=!1)}},qe.getVelocity=function(){return(mi()-fn)/(Wo()-fm)*1e3||0},qe.endAnimation=function(){im(qe.callbackAnimation),n&&(ai?ai.progress(1):n.paused()?Te||im(n,qe.direction<0,1):im(n,n.reversed()))},qe.labelToScroll=function(hi){return n&&n.labels&&(Ii||qe.refresh()||Ii)+n.labels[hi]/n.duration()*ci||0},qe.getTrailing=function(hi){var Xi=Pa.indexOf(qe),sn=qe.direction>0?Pa.slice(0,Xi).reverse():Pa.slice(Xi+1);return(nc(hi)?sn.filter(function(Fe){return Fe.vars.preventOverlaps===hi}):sn).filter(function(Fe){return qe.direction>0?Fe.end<=Ii:Fe.start>=Qi})},qe.update=function(hi,Xi,sn){if(!(J&&!sn&&!hi)){var Fe=ul===!0?Mt:qe.scroll(),Oe=hi?0:(Fe-Ii)/ci,xt=Oe<0?0:Oe>1?1:Oe||0,ct=qe.progress,Jt,ii,gt,Gt,ei,ki,gn,$i;if(Xi&&(fn=si,si=J?mi():Fe,ee&&(It=Et,Et=n&&!Te?n.totalProgress():xt)),F&&E&&!$o&&!p0&&Oc&&(!xt&&Ii<Fe+(Fe-fn)/(Wo()-fm)*F?xt=1e-4:xt===1&&Qi>Fe+(Fe-fn)/(Wo()-fm)*F&&(xt=.9999)),xt!==ct&&qe.enabled){if(Jt=qe.isActive=!!xt&&xt<1,ii=!!ct&&ct<1,ki=Jt!==ii,ei=ki||!!xt!=!!ct,qe.direction=xt>ct?1:-1,qe.progress=xt,ei&&!$o&&(gt=xt&&!ct?0:xt===1?1:ct===1?2:3,Te&&(Gt=!ki&&$e[gt+1]!=="none"&&$e[gt+1]||$e[gt],$i=n&&(Gt==="complete"||Gt==="reset"||Gt in n))),ae&&(ki||$i)&&($i||x||!n)&&(qo(ae)?ae(qe):qe.getTrailing(ae).forEach(function(on){return on.endAnimation()})),Te||(ai&&!$o&&!p0?(ai._dp._time-ai._start!==ai._time&&ai.render(ai._dp._time-ai._start),ai.resetTo?ai.resetTo("totalProgress",xt,n._tTime/n._tDur):(ai.vars.totalProgress=xt,ai.invalidate().restart())):n&&n.totalProgress(xt,!!($o&&(Tt||hi)))),E){if(hi&&z&&(Di.style[z+me.os2]=rt),!Le)be(gm(Ce+tt*xt));else if(ei){if(gn=!hi&&xt>ct&&Qi+1>Fe&&Fe+1>=ju(ye,me),ie)if(!hi&&(Jt||gn)){var Ei=Ah(E,!0),Vi=Fe-Ii;lC(E,_r,Ei.top+(me===ro?Vi:0)+ao,Ei.left+(me===ro?0:Vi)+ao)}else lC(E,Di);Kp(Jt||gn?wi:Ti),He&&xt<1&&Jt||be(Ce+(xt===1&&!gn?tt:0))}}ee&&!bi.tween&&!$o&&!p0&&Mn.restart(!0),s&&(ki||Z&&xt&&(xt<1||!Cv))&&Km(s.targets).forEach(function(on){return on.classList[Jt||Z?"add":"remove"](s.className)}),o&&!Te&&!hi&&o(qe),ei&&!$o?(Te&&($i&&(Gt==="complete"?n.pause().totalProgress(1):Gt==="reset"?n.restart(!0).pause():Gt==="restart"?n.restart(!0):n[Gt]()),o&&o(qe)),(ki||!Cv)&&(f&&ki&&Tv(qe,f),ht[gt]&&Tv(qe,ht[gt]),Z&&(xt===1?qe.kill(!1,1):ht[gt]=0),ki||(gt=xt===1?1:3,ht[gt]&&Tv(qe,ht[gt]))),re&&!Jt&&Math.abs(qe.getVelocity())>(mm(re)?re:2500)&&(im(qe.callbackAnimation),ai?ai.progress(1):im(n,Gt==="reverse"?1:!xt,1))):Te&&o&&!$o&&o(qe)}if(_t){var Yi=J?Fe/J.duration()*(J._caScrollDist||0):Fe;yt(Yi+(Ye._isFlipped?1:0)),_t(Yi)}Yn&&Yn(-Fe/J.duration()*(J._caScrollDist||0))}},qe.enable=function(hi,Xi){qe.enabled||(qe.enabled=!0,vo(ye,"resize",ym),We||vo(ye,"scroll",Sp),Nt&&vo(a,"refreshInit",Nt),hi!==!1&&(qe.progress=wt=0,si=fn=Lt=mi()),Xi!==!1&&qe.refresh())},qe.getTween=function(hi){return hi&&bi?bi.tween:ai},qe.setPositions=function(hi,Xi,sn,Fe){if(J){var Oe=J.scrollTrigger,xt=J.duration(),ct=Oe.end-Oe.start;hi=Oe.start+ct*hi/xt,Xi=Oe.start+ct*Xi/xt}qe.refresh(!1,!1,{start:Qk(hi,sn&&!!qe._startClamp),end:Qk(Xi,sn&&!!qe._endClamp)},Fe),qe.update()},qe.adjustPinSpacing=function(hi){if(St&&hi){var Xi=St.indexOf(me.d)+1;St[Xi]=parseFloat(St[Xi])+hi+ao,St[1]=parseFloat(St[1])+hi+ao,Kp(St)}},qe.disable=function(hi,Xi){if(hi!==!1&&qe.revert(!0,!0),qe.enabled&&(qe.enabled=qe.isActive=!1,Xi||ai&&ai.pause(),Mt=0,Zi&&(Zi.uncache=1),Nt&&xo(a,"refreshInit",Nt),Mn&&(Mn.pause(),bi.tween&&bi.tween.kill()&&(bi.tween=0)),!We)){for(var sn=Pa.length;sn--;)if(Pa[sn].scroller===ye&&Pa[sn]!==qe)return;xo(ye,"resize",ym),We||xo(ye,"scroll",Sp)}},qe.kill=function(hi,Xi){qe.disable(hi,Xi),ai&&!Xi&&ai.kill(),h&&delete Nb[h];var sn=Pa.indexOf(qe);sn>=0&&Pa.splice(sn,1),sn===cl&&Y0>0&&cl--,sn=0,Pa.forEach(function(Fe){return Fe.scroller===qe.scroller&&(sn=1)}),sn||ul||(qe.scroll.rec=0),n&&(n.scrollTrigger=null,hi&&n.revert({kill:!1}),Xi||n.kill()),rn&&[rn,xn,Ye,qt].forEach(function(Fe){return Fe.parentNode&&Fe.parentNode.removeChild(Fe)}),zm===qe&&(zm=0),E&&(Zi&&(Zi.uncache=1),sn=0,Pa.forEach(function(Fe){return Fe.pin===E&&sn++}),sn||(Zi.spacer=0)),i.onKill&&i.onKill(qe)},Pa.push(qe),qe.enable(!1,!1),_n&&_n(qe),n&&n.add&&!ci){var mn=qe.update;qe.update=function(){qe.update=mn,Ra.cache++,Ii||Qi||qe.refresh()},Nn.delayedCall(.01,qe.update),ci=.01,Ii=Qi=0}else qe.refresh();E&&X3()},a.register=function(i){return Lp||(Nn=i||yM(),mM()&&window.document&&a.enable(),Lp=pm),Lp},a.defaults=function(i){if(i)for(var n in i)_0[n]=i[n];return _0},a.disable=function(i,n){pm=0,Pa.forEach(function(o){return o[n?"kill":"disable"](i)}),xo(Da,"wheel",Sp),xo(qr,"scroll",Sp),clearInterval(f0),xo(qr,"touchcancel",zu),xo(_r,"touchstart",zu),m0(xo,qr,"pointerdown,touchstart,mousedown",eC),m0(xo,qr,"pointerup,touchend,mouseup",tC),v_.kill(),g0(xo);for(var r=0;r<Ra.length;r+=3)y0(xo,Ra[r],Ra[r+1]),y0(xo,Ra[r],Ra[r+2])},a.enable=function(){if(Da=window,qr=document,rc=qr.documentElement,_r=qr.body,Nn&&(Km=Nn.utils.toArray,Im=Nn.utils.clamp,zb=Nn.core.context||zu,kv=Nn.core.suppressOverwrites||zu,rw=Da.history.scrollRestoration||"auto",Bb=Da.pageYOffset||0,Nn.core.globals("ScrollTrigger",a),_r)){pm=1,Zp=document.createElement("div"),Zp.style.height="100vh",Zp.style.position="absolute",TM(),j3(),$s.register(Nn),a.isTouch=$s.isTouch,Kh=$s.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Ob=$s.isTouch===1,vo(Da,"wheel",Sp),aw=[Da,qr,rc,_r],Nn.matchMedia?(a.matchMedia=function(f){var y=Nn.matchMedia(),x;for(x in f)y.add(x,f[x]);return y},Nn.addEventListener("matchMediaInit",function(){CM(),hw()}),Nn.addEventListener("matchMediaRevert",function(){return kM()}),Nn.addEventListener("matchMedia",function(){mf(0,1),zf("matchMedia")}),Nn.matchMedia().add("(orientation: portrait)",function(){return Ev(),Ev})):console.warn("Requires GSAP 3.11.0 or later"),Ev(),vo(qr,"scroll",Sp);var i=_r.hasAttribute("style"),n=_r.style,r=n.borderTopStyle,o=Nn.core.Animation.prototype,s,h;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),n.borderTopStyle="solid",s=Ah(_r),ro.m=Math.round(s.top+ro.sc())||0,fl.m=Math.round(s.left+fl.sc())||0,r?n.borderTopStyle=r:n.removeProperty("border-top-style"),i||(_r.setAttribute("style",""),_r.removeAttribute("style")),f0=setInterval(aC,250),Nn.delayedCall(.5,function(){return p0=0}),vo(qr,"touchcancel",zu),vo(_r,"touchstart",zu),m0(vo,qr,"pointerdown,touchstart,mousedown",eC),m0(vo,qr,"pointerup,touchend,mouseup",tC),Rb=Nn.utils.checkPrefix("transform"),q0.push(Rb),Lp=Wo(),v_=Nn.delayedCall(.2,mf).pause(),Dp=[qr,"visibilitychange",function(){var f=Da.innerWidth,y=Da.innerHeight;qr.hidden?(Zk=f,Kk=y):(Zk!==f||Kk!==y)&&ym()},qr,"DOMContentLoaded",mf,Da,"load",mf,Da,"resize",ym],g0(vo),Pa.forEach(function(f){return f.enable(0,1)}),h=0;h<Ra.length;h+=3)y0(xo,Ra[h],Ra[h+1]),y0(xo,Ra[h],Ra[h+2])}},a.config=function(i){"limitCallbacks"in i&&(Cv=!!i.limitCallbacks);var n=i.syncInterval;n&&clearInterval(f0)||(f0=n)&&setInterval(aC,n),"ignoreMobileResize"in i&&(Ob=a.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(g0(xo)||g0(vo,i.autoRefreshEvents||"none"),fM=(i.autoRefreshEvents+"").indexOf("resize")===-1)},a.scrollerProxy=function(i,n){var r=Pl(i),o=Ra.indexOf(r),s=Rf(r);~o&&Ra.splice(o,s?6:2),n&&(s?Vu.unshift(Da,n,_r,n,rc,n):Vu.unshift(r,n))},a.clearMatchMedia=function(i){Pa.forEach(function(n){return n._ctx&&n._ctx.query===i&&n._ctx.kill(!0,!0)})},a.isInViewport=function(i,n,r){var o=(nc(i)?Pl(i):i).getBoundingClientRect(),s=o[r?Tf:Ef]*n||0;return r?o.right-s>0&&o.left+s<Da.innerWidth:o.bottom-s>0&&o.top+s<Da.innerHeight},a.positionInViewport=function(i,n,r){nc(i)&&(i=Pl(i));var o=i.getBoundingClientRect(),s=o[r?Tf:Ef],h=n==null?s/2:n in w_?w_[n]*s:~n.indexOf("%")?parseFloat(n)*s/100:parseFloat(n)||0;return r?(o.left+h)/Da.innerWidth:(o.top+h)/Da.innerHeight},a.killAll=function(i){if(Pa.slice(0).forEach(function(r){return r.vars.id!=="ScrollSmoother"&&r.kill()}),i!==!0){var n=Of.killAll||[];Of={},n.forEach(function(r){return r()})}},a})();Oa.version="3.14.2";Oa.saveStyles=function(a){return a?Km(a).forEach(function(e){if(e&&e.style){var t=ic.indexOf(e);t>=0&&ic.splice(t,5),ic.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),Nn.core.getCache(e),zb())}}):ic};Oa.revert=function(a,e){return hw(!a,e)};Oa.create=function(a,e){return new Oa(a,e)};Oa.refresh=function(a){return a?ym(!0):(Lp||Oa.register())&&mf(!0)};Oa.update=function(a){return++Ra.cache&&Rh(a===!0?2:0)};Oa.clearScrollMemory=AM;Oa.maxScroll=function(a,e){return ju(a,e?fl:ro)};Oa.getScrollFunc=function(a,e){return yd(Pl(a),e?fl:ro)};Oa.getById=function(a){return Nb[a]};Oa.getAll=function(){return Pa.filter(function(a){return a.vars.id!=="ScrollSmoother"})};Oa.isScrolling=function(){return!!Oc};Oa.snapDirectional=uw;Oa.addEventListener=function(a,e){var t=Of[a]||(Of[a]=[]);~t.indexOf(e)||t.push(e)};Oa.removeEventListener=function(a,e){var t=Of[a],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};Oa.batch=function(a,e){var t=[],i={},n=e.interval||.016,r=e.batchMax||1e9,o=function(f,y){var x=[],S=[],E=Nn.delayedCall(n,function(){y(x,S),x=[],S=[]}).pause();return function(z){x.length||E.restart(!0),x.push(z.trigger),S.push(z),r<=x.length&&E.progress(1)}},s;for(s in e)i[s]=s.substr(0,2)==="on"&&qo(e[s])&&s!=="onRefreshInit"?o(s,e[s]):e[s];return qo(r)&&(r=r(),vo(Oa,"refresh",function(){return r=e.batchMax()})),Km(a).forEach(function(h){var f={};for(s in i)f[s]=i[s];f.trigger=h,t.push(Oa.create(f))}),t};var uC=function(e,t,i,n){return t>n?e(n):t<0&&e(0),i>n?(n-t)/(i-t):i<0?t/(t-i):1},Iv=function a(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+($s.isTouch?" pinch-zoom":""):"none",e===rc&&a(_r,t)},w0={auto:1,scroll:1},J3=function(e){var t=e.event,i=e.target,n=e.axis,r=(t.changedTouches?t.changedTouches[0]:t).target,o=r._gsap||Nn.core.getCache(r),s=Wo(),h;if(!o._isScrollT||s-o._isScrollT>2e3){for(;r&&r!==_r&&(r.scrollHeight<=r.clientHeight&&r.scrollWidth<=r.clientWidth||!(w0[(h=Pc(r)).overflowY]||w0[h.overflowX]));)r=r.parentNode;o._isScroll=r&&r!==i&&!Rf(r)&&(w0[(h=Pc(r)).overflowY]||w0[h.overflowX]),o._isScrollT=s}(o._isScroll||n==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},MM=function(e,t,i,n){return $s.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:n=n&&J3,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&vo(qr,$s.eventTypes[0],dC,!1,!0)},onDisable:function(){return xo(qr,$s.eventTypes[0],dC,!0)}})},Q3=/(input|label|select|textarea)/i,hC,dC=function(e){var t=Q3.test(e.target.tagName);(t||hC)&&(e._gsapAllow=!0,hC=t)},ez=function(e){sf(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,n=t.momentum,r=t.allowNestedScroll,o=t.onRelease,s,h,f=Pl(e.target)||rc,y=Nn.core.globals().ScrollSmoother,x=y&&y.get(),S=Kh&&(e.content&&Pl(e.content)||x&&e.content!==!1&&!x.smooth()&&x.content()),E=yd(f,ro),z=yd(f,fl),D=1,F=($s.isTouch&&Da.visualViewport?Da.visualViewport.scale*Da.visualViewport.width:Da.outerWidth)/Da.innerWidth,U=0,G=qo(n)?function(){return n(s)}:function(){return n||2.8},Z,ee,ie=MM(f,e.type,!0,r),le=function(){return ee=!1},J=zu,re=zu,ae=function(){h=ju(f,ro),re=Im(Kh?1:0,h),i&&(J=Im(0,ju(f,fl))),Z=Mf},me=function(){S._gsap.y=gm(parseFloat(S._gsap.y)+E.offset)+"px",S.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(S._gsap.y)+", 0, 1)",E.offset=E.cacheID=0},Te=function(){if(ee){requestAnimationFrame(le);var pt=gm(s.deltaY/2),Dt=re(E.v-pt);if(S&&Dt!==E.v+E.offset){E.offset=Dt-E.v;var qe=gm((parseFloat(S&&S._gsap.y)||0)-E.offset);S.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+qe+", 0, 1)",S._gsap.y=qe+"px",E.cacheID=Ra.cache,Rh()}return!0}E.offset&&me(),ee=!0},ye,Re,We,Le,ht=function(){ae(),ye.isActive()&&ye.vars.scrollY>h&&(E()>h?ye.progress(1)&&E(h):ye.resetTo("scrollY",h))};return S&&Nn.set(S,{y:"+=0"}),e.ignoreCheck=function($e){return Kh&&$e.type==="touchmove"&&Te()||D>1.05&&$e.type!=="touchstart"||s.isGesturing||$e.touches&&$e.touches.length>1},e.onPress=function(){ee=!1;var $e=D;D=gm((Da.visualViewport&&Da.visualViewport.scale||1)/F),ye.pause(),$e!==D&&Iv(f,D>1.01?!0:i?!1:"x"),Re=z(),We=E(),ae(),Z=Mf},e.onRelease=e.onGestureStart=function($e,pt){if(E.offset&&me(),!pt)Le.restart(!0);else{Ra.cache++;var Dt=G(),qe,Nt;i&&(qe=z(),Nt=qe+Dt*.05*-$e.velocityX/.227,Dt*=uC(z,qe,Nt,ju(f,fl)),ye.vars.scrollX=J(Nt)),qe=E(),Nt=qe+Dt*.05*-$e.velocityY/.227,Dt*=uC(E,qe,Nt,ju(f,ro)),ye.vars.scrollY=re(Nt),ye.invalidate().duration(Dt).play(.01),(Kh&&ye.vars.scrollY>=h||qe>=h-1)&&Nn.to({},{onUpdate:ht,duration:Dt})}o&&o($e)},e.onWheel=function(){ye._ts&&ye.pause(),Wo()-U>1e3&&(Z=0,U=Wo())},e.onChange=function($e,pt,Dt,qe,Nt){if(Mf!==Z&&ae(),pt&&i&&z(J(qe[2]===pt?Re+($e.startX-$e.x):z()+pt-qe[1])),Dt){E.offset&&me();var ni=Nt[2]===Dt,xi=ni?We+$e.startY-$e.y:E()+Dt-Nt[1],Lt=re(xi);ni&&xi!==Lt&&(We+=Lt-xi),E(Lt)}(Dt||pt)&&Rh()},e.onEnable=function(){Iv(f,i?!1:"x"),Oa.addEventListener("refresh",ht),vo(Da,"resize",ht),E.smooth&&(E.target.style.scrollBehavior="auto",E.smooth=z.smooth=!1),ie.enable()},e.onDisable=function(){Iv(f,!0),xo(Da,"resize",ht),Oa.removeEventListener("refresh",ht),ie.kill()},e.lockAxis=e.lockAxis!==!1,s=new $s(e),s.iOS=Kh,Kh&&!E()&&E(1),Kh&&Nn.ticker.add(zu),Le=s._dc,ye=Nn.to(s,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:EM(E,E(),function(){return ye.pause()})},onUpdate:Rh,onComplete:Le.vars.onComplete}),s};Oa.sort=function(a){if(qo(a))return Pa.sort(a);var e=Da.pageYOffset||0;return Oa.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+Da.innerHeight}),Pa.sort(a||function(t,i){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((i.vars.containerAnimation?1e6:i._sortY)+(i.vars.refreshPriority||0)*-1e6)})};Oa.observe=function(a){return new $s(a)};Oa.normalizeScroll=function(a){if(typeof a>"u")return ll;if(a===!0&&ll)return ll.enable();if(a===!1){ll&&ll.kill(),ll=a;return}var e=a instanceof $s?a:ez(a);return ll&&ll.target===e.target&&ll.kill(),Rf(e.target)&&(ll=e),e};Oa.core={_getVelocityProp:Db,_inputObserver:MM,_scrollers:Ra,_proxies:Vu,bridge:{ss:function(){Oc||zf("scrollStart"),Oc=Wo()},ref:function(){return $o}}};yM()&&Nn.registerPlugin(Oa);function _y(a){return a+.5|0}const rd=(a,e,t)=>Math.max(Math.min(a,t),e);function _m(a){return rd(_y(a*2.55),0,255)}function dd(a){return rd(_y(a*255),0,255)}function Ch(a){return rd(_y(a/2.55)/100,0,1)}function fC(a){return rd(_y(a*100),0,100)}const Ac={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Vb=[..."0123456789ABCDEF"],tz=a=>Vb[a&15],iz=a=>Vb[(a&240)>>4]+Vb[a&15],S0=a=>(a&240)>>4===(a&15),nz=a=>S0(a.r)&&S0(a.g)&&S0(a.b)&&S0(a.a);function az(a){var e=a.length,t;return a[0]==="#"&&(e===4||e===5?t={r:255&Ac[a[1]]*17,g:255&Ac[a[2]]*17,b:255&Ac[a[3]]*17,a:e===5?Ac[a[4]]*17:255}:(e===7||e===9)&&(t={r:Ac[a[1]]<<4|Ac[a[2]],g:Ac[a[3]]<<4|Ac[a[4]],b:Ac[a[5]]<<4|Ac[a[6]],a:e===9?Ac[a[7]]<<4|Ac[a[8]]:255})),t}const rz=(a,e)=>a<255?e(a):"";function sz(a){var e=nz(a)?tz:iz;return a?"#"+e(a.r)+e(a.g)+e(a.b)+rz(a.a,e):void 0}const oz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function IM(a,e,t){const i=e*Math.min(t,1-t),n=(r,o=(r+a/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function lz(a,e,t){const i=(n,r=(n+a/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function cz(a,e,t){const i=IM(a,1,.5);let n;for(e+t>1&&(n=1/(e+t),e*=n,t*=n),n=0;n<3;n++)i[n]*=1-e-t,i[n]+=e;return i}function uz(a,e,t,i,n){return a===n?(e-t)/i+(e<t?6:0):e===n?(t-a)/i+2:(a-e)/i+4}function dw(a){const t=a.r/255,i=a.g/255,n=a.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),s=(r+o)/2;let h,f,y;return r!==o&&(y=r-o,f=s>.5?y/(2-r-o):y/(r+o),h=uz(t,i,n,y,r),h=h*60+.5),[h|0,f||0,s]}function fw(a,e,t,i){return(Array.isArray(e)?a(e[0],e[1],e[2]):a(e,t,i)).map(dd)}function pw(a,e,t){return fw(IM,a,e,t)}function hz(a,e,t){return fw(cz,a,e,t)}function dz(a,e,t){return fw(lz,a,e,t)}function PM(a){return(a%360+360)%360}function fz(a){const e=oz.exec(a);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?_m(+e[5]):dd(+e[5]));const n=PM(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=hz(n,r,o):e[1]==="hsv"?i=dz(n,r,o):i=pw(n,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function pz(a,e){var t=dw(a);t[0]=PM(t[0]+e),t=pw(t),a.r=t[0],a.g=t[1],a.b=t[2]}function gz(a){if(!a)return;const e=dw(a),t=e[0],i=fC(e[1]),n=fC(e[2]);return a.a<255?`hsla(${t}, ${i}%, ${n}%, ${Ch(a.a)})`:`hsl(${t}, ${i}%, ${n}%)`}const pC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},gC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function mz(){const a={},e=Object.keys(gC),t=Object.keys(pC);let i,n,r,o,s;for(i=0;i<e.length;i++){for(o=s=e[i],n=0;n<t.length;n++)r=t[n],s=s.replace(r,pC[r]);r=parseInt(gC[o],16),a[s]=[r>>16&255,r>>8&255,r&255]}return a}let k0;function yz(a){k0||(k0=mz(),k0.transparent=[0,0,0,0]);const e=k0[a.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const _z=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function xz(a){const e=_z.exec(a);let t=255,i,n,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?_m(o):rd(o*255,0,255)}return i=+e[1],n=+e[3],r=+e[5],i=255&(e[2]?_m(i):rd(i,0,255)),n=255&(e[4]?_m(n):rd(n,0,255)),r=255&(e[6]?_m(r):rd(r,0,255)),{r:i,g:n,b:r,a:t}}}function vz(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${Ch(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}const Pv=a=>a<=.0031308?a*12.92:Math.pow(a,1/2.4)*1.055-.055,kp=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function bz(a,e,t){const i=kp(Ch(a.r)),n=kp(Ch(a.g)),r=kp(Ch(a.b));return{r:dd(Pv(i+t*(kp(Ch(e.r))-i))),g:dd(Pv(n+t*(kp(Ch(e.g))-n))),b:dd(Pv(r+t*(kp(Ch(e.b))-r))),a:a.a+t*(e.a-a.a)}}function C0(a,e,t){if(a){let i=dw(a);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=pw(i),a.r=i[0],a.g=i[1],a.b=i[2]}}function LM(a,e){return a&&Object.assign(e||{},a)}function mC(a){var e={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(e={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(e.a=dd(a[3]))):(e=LM(a,{r:0,g:0,b:0,a:1}),e.a=dd(e.a)),e}function wz(a){return a.charAt(0)==="r"?xz(a):fz(a)}class Qm{constructor(e){if(e instanceof Qm)return e;const t=typeof e;let i;t==="object"?i=mC(e):t==="string"&&(i=az(e)||yz(e)||wz(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=LM(this._rgb);return e&&(e.a=Ch(e.a)),e}set rgb(e){this._rgb=mC(e)}rgbString(){return this._valid?vz(this._rgb):void 0}hexString(){return this._valid?sz(this._rgb):void 0}hslString(){return this._valid?gz(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,n=e.rgb;let r;const o=t===r?.5:t,s=2*o-1,h=i.a-n.a,f=((s*h===-1?s:(s+h)/(1+s*h))+1)/2;r=1-f,i.r=255&f*i.r+r*n.r+.5,i.g=255&f*i.g+r*n.g+.5,i.b=255&f*i.b+r*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=bz(this._rgb,e._rgb,t)),this}clone(){return new Qm(this.rgb)}alpha(e){return this._rgb.a=dd(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=_y(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return C0(this._rgb,2,e),this}darken(e){return C0(this._rgb,2,-e),this}saturate(e){return C0(this._rgb,1,e),this}desaturate(e){return C0(this._rgb,1,-e),this}rotate(e){return pz(this._rgb,e),this}}function yh(){}const Sz=(()=>{let a=0;return()=>a++})();function ja(a){return a==null}function fs(a){if(Array.isArray&&Array.isArray(a))return!0;const e=Object.prototype.toString.call(a);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ua(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}function Ls(a){return(typeof a=="number"||a instanceof Number)&&isFinite(+a)}function tc(a,e){return Ls(a)?a:e}function ya(a,e){return typeof a>"u"?e:a}const kz=(a,e)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100:+a/e,DM=(a,e)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100*e:+a;function Zr(a,e,t){if(a&&typeof a.call=="function")return a.apply(t,e)}function Tr(a,e,t,i){let n,r,o;if(fs(a))for(r=a.length,n=0;n<r;n++)e.call(t,a[n],n);else if(Ua(a))for(o=Object.keys(a),r=o.length,n=0;n<r;n++)e.call(t,a[o[n]],o[n])}function S_(a,e){let t,i,n,r;if(!a||!e||a.length!==e.length)return!1;for(t=0,i=a.length;t<i;++t)if(n=a[t],r=e[t],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function k_(a){if(fs(a))return a.map(k_);if(Ua(a)){const e=Object.create(null),t=Object.keys(a),i=t.length;let n=0;for(;n<i;++n)e[t[n]]=k_(a[t[n]]);return e}return a}function RM(a){return["__proto__","prototype","constructor"].indexOf(a)===-1}function Cz(a,e,t,i){if(!RM(a))return;const n=e[a],r=t[a];Ua(n)&&Ua(r)?ey(n,r,i):e[a]=k_(r)}function ey(a,e,t){const i=fs(e)?e:[e],n=i.length;if(!Ua(a))return a;t=t||{};const r=t.merger||Cz;let o;for(let s=0;s<n;++s){if(o=i[s],!Ua(o))continue;const h=Object.keys(o);for(let f=0,y=h.length;f<y;++f)r(h[f],a,o,t)}return a}function Fm(a,e){return ey(a,e,{merger:Az})}function Az(a,e,t){if(!RM(a))return;const i=e[a],n=t[a];Ua(i)&&Ua(n)?Fm(i,n):Object.prototype.hasOwnProperty.call(e,a)||(e[a]=k_(n))}const yC={"":a=>a,x:a=>a.x,y:a=>a.y};function Tz(a){const e=a.split("."),t=[];let i="";for(const n of e)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Ez(a){const e=Tz(a);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function _d(a,e){return(yC[e]||(yC[e]=Ez(e)))(a)}function gw(a){return a.charAt(0).toUpperCase()+a.slice(1)}const ty=a=>typeof a<"u",xd=a=>typeof a=="function",_C=(a,e)=>{if(a.size!==e.size)return!1;for(const t of a)if(!e.has(t))return!1;return!0};function Mz(a){return a.type==="mouseup"||a.type==="click"||a.type==="contextmenu"}const ar=Math.PI,ss=2*ar,Iz=ss+ar,C_=Number.POSITIVE_INFINITY,Pz=ar/180,Gs=ar/2,Kd=ar/4,xC=ar*2/3,sd=Math.log10,Hu=Math.sign;function Nm(a,e,t){return Math.abs(a-e)<t}function vC(a){const e=Math.round(a);a=Nm(a,e,a/1e3)?e:a;const t=Math.pow(10,Math.floor(sd(a))),i=a/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Lz(a){const e=[],t=Math.sqrt(a);let i;for(i=1;i<t;i++)a%i===0&&(e.push(i),e.push(a/i));return t===(t|0)&&e.push(t),e.sort((n,r)=>n-r).pop(),e}function Dz(a){return typeof a=="symbol"||typeof a=="object"&&a!==null&&!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a)}function lg(a){return!Dz(a)&&!isNaN(parseFloat(a))&&isFinite(a)}function Rz(a,e){const t=Math.round(a);return t-e<=a&&t+e>=a}function OM(a,e,t){let i,n,r;for(i=0,n=a.length;i<n;i++)r=a[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function nu(a){return a*(ar/180)}function mw(a){return a*(180/ar)}function bC(a){if(!Ls(a))return;let e=1,t=0;for(;Math.round(a*e)/e!==a;)e*=10,t++;return t}function zM(a,e){const t=e.x-a.x,i=e.y-a.y,n=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*ar&&(r+=ss),{angle:r,distance:n}}function Hb(a,e){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))}function Oz(a,e){return(a-e+Iz)%ss-ar}function Xo(a){return(a%ss+ss)%ss}function iy(a,e,t,i){const n=Xo(a),r=Xo(e),o=Xo(t),s=Xo(r-n),h=Xo(o-n),f=Xo(n-r),y=Xo(n-o);return n===r||n===o||i&&r===o||s>h&&f<y}function bo(a,e,t){return Math.max(e,Math.min(t,a))}function zz(a){return bo(a,-32768,32767)}function Ih(a,e,t,i=1e-6){return a>=Math.min(e,t)-i&&a<=Math.max(e,t)+i}function yw(a,e,t){t=t||(o=>a[o]<e);let i=a.length-1,n=0,r;for(;i-n>1;)r=n+i>>1,t(r)?n=r:i=r;return{lo:n,hi:i}}const Ph=(a,e,t,i)=>yw(a,t,i?n=>{const r=a[n][e];return r<t||r===t&&a[n+1][e]===t}:n=>a[n][e]<t),Fz=(a,e,t)=>yw(a,t,i=>a[i][e]>=t);function Nz(a,e,t){let i=0,n=a.length;for(;i<n&&a[i]<e;)i++;for(;n>i&&a[n-1]>t;)n--;return i>0||n<a.length?a.slice(i,n):a}const FM=["push","pop","shift","splice","unshift"];function Bz(a,e){if(a._chartjs){a._chartjs.listeners.push(e);return}Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),FM.forEach(t=>{const i="_onData"+gw(t),n=a[t];Object.defineProperty(a,t,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return a._chartjs.listeners.forEach(s=>{typeof s[i]=="function"&&s[i](...r)}),o}})})}function wC(a,e){const t=a._chartjs;if(!t)return;const i=t.listeners,n=i.indexOf(e);n!==-1&&i.splice(n,1),!(i.length>0)&&(FM.forEach(r=>{delete a[r]}),delete a._chartjs)}function NM(a){const e=new Set(a);return e.size===a.length?a:Array.from(e)}const BM=(function(){return typeof window>"u"?function(a){return a()}:window.requestAnimationFrame})();function jM(a,e){let t=[],i=!1;return function(...n){t=n,i||(i=!0,BM.call(window,()=>{i=!1,a.apply(e,t)}))}}function jz(a,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(a,e,i)):a.apply(this,i),e}}const _w=a=>a==="start"?"left":a==="end"?"right":"center",Go=(a,e,t)=>a==="start"?e:a==="end"?t:(e+t)/2,Vz=(a,e,t,i)=>a===(i?"left":"right")?t:a==="center"?(e+t)/2:e;function VM(a,e,t){const i=e.length;let n=0,r=i;if(a._sorted){const{iScale:o,vScale:s,_parsed:h}=a,f=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null,y=o.axis,{min:x,max:S,minDefined:E,maxDefined:z}=o.getUserBounds();if(E){if(n=Math.min(Ph(h,y,x).lo,t?i:Ph(e,y,o.getPixelForValue(x)).lo),f){const D=h.slice(0,n+1).reverse().findIndex(F=>!ja(F[s.axis]));n-=Math.max(0,D)}n=bo(n,0,i-1)}if(z){let D=Math.max(Ph(h,o.axis,S,!0).hi+1,t?0:Ph(e,y,o.getPixelForValue(S),!0).hi+1);if(f){const F=h.slice(D-1).findIndex(U=>!ja(U[s.axis]));D+=Math.max(0,F)}r=bo(D,n,i)-n}else r=i-n}return{start:n,count:r}}function HM(a){const{xScale:e,yScale:t,_scaleRanges:i}=a,n={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return a._scaleRanges=n,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,n),r}const A0=a=>a===0||a===1,SC=(a,e,t)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-e)*ss/t)),kC=(a,e,t)=>Math.pow(2,-10*a)*Math.sin((a-e)*ss/t)+1,Bm={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*Gs)+1,easeOutSine:a=>Math.sin(a*Gs),easeInOutSine:a=>-.5*(Math.cos(ar*a)-1),easeInExpo:a=>a===0?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>a===1?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>A0(a)?a:a<.5?.5*Math.pow(2,10*(a*2-1)):.5*(-Math.pow(2,-10*(a*2-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>A0(a)?a:SC(a,.075,.3),easeOutElastic:a=>A0(a)?a:kC(a,.075,.3),easeInOutElastic(a){return A0(a)?a:a<.5?.5*SC(a*2,.1125,.45):.5+.5*kC(a*2-1,.1125,.45)},easeInBack(a){return a*a*((1.70158+1)*a-1.70158)},easeOutBack(a){return(a-=1)*a*((1.70158+1)*a+1.70158)+1},easeInOutBack(a){let e=1.70158;return(a/=.5)<1?.5*(a*a*(((e*=1.525)+1)*a-e)):.5*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)},easeInBounce:a=>1-Bm.easeOutBounce(1-a),easeOutBounce(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:a=>a<.5?Bm.easeInBounce(a*2)*.5:Bm.easeOutBounce(a*2-1)*.5+.5};function xw(a){if(a&&typeof a=="object"){const e=a.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function CC(a){return xw(a)?a:new Qm(a)}function Lv(a){return xw(a)?a:new Qm(a).saturate(.5).darken(.1).hexString()}const Hz=["x","y","borderWidth","radius","tension"],Uz=["color","borderColor","backgroundColor"];function $z(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),a.set("animations",{colors:{type:"color",properties:Uz},numbers:{type:"number",properties:Hz}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Gz(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const AC=new Map;function Wz(a,e){e=e||{};const t=a+JSON.stringify(e);let i=AC.get(t);return i||(i=new Intl.NumberFormat(a,e),AC.set(t,i)),i}function xy(a,e,t){return Wz(e,t).format(a)}const UM={values(a){return fs(a)?a:""+a},numeric(a,e,t){if(a===0)return"0";const i=this.chart.options.locale;let n,r=a;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(n="scientific"),r=Xz(a,t)}const o=sd(Math.abs(r)),s=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),h={notation:n,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(h,this.options.ticks.format),xy(a,i,h)},logarithmic(a,e,t){if(a===0)return"0";const i=t[e].significand||a/Math.pow(10,Math.floor(sd(a)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?UM.numeric.call(this,a,e,t):""}};function Xz(a,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&a!==Math.floor(a)&&(t=a-Math.floor(a)),t}var Z_={formatters:UM};function Yz(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Z_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ff=Object.create(null),Ub=Object.create(null);function jm(a,e){if(!e)return a;const t=e.split(".");for(let i=0,n=t.length;i<n;++i){const r=t[i];a=a[r]||(a[r]=Object.create(null))}return a}function Dv(a,e,t){return typeof e=="string"?ey(jm(a,e),t):ey(jm(a,""),e)}class qz{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>Lv(n.backgroundColor),this.hoverBorderColor=(i,n)=>Lv(n.borderColor),this.hoverColor=(i,n)=>Lv(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Dv(this,e,t)}get(e){return jm(this,e)}describe(e,t){return Dv(Ub,e,t)}override(e,t){return Dv(Ff,e,t)}route(e,t,i,n){const r=jm(this,e),o=jm(this,i),s="_"+t;Object.defineProperties(r,{[s]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[s],f=o[n];return Ua(h)?Object.assign({},f,h):ya(h,f)},set(h){this[s]=h}}})}apply(e){e.forEach(t=>t(this))}}var ps=new qz({_scriptable:a=>!a.startsWith("on"),_indexable:a=>a!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$z,Gz,Yz]);function Zz(a){return!a||ja(a.size)||ja(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}function A_(a,e,t,i,n){let r=e[n];return r||(r=e[n]=a.measureText(n).width,t.push(n)),r>i&&(i=r),i}function Kz(a,e,t,i){i=i||{};let n=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(n=i.data={},r=i.garbageCollect=[],i.font=e),a.save(),a.font=e;let o=0;const s=t.length;let h,f,y,x,S;for(h=0;h<s;h++)if(x=t[h],x!=null&&!fs(x))o=A_(a,n,r,o,x);else if(fs(x))for(f=0,y=x.length;f<y;f++)S=x[f],S!=null&&!fs(S)&&(o=A_(a,n,r,o,S));a.restore();const E=r.length/2;if(E>t.length){for(h=0;h<E;h++)delete n[r[h]];r.splice(0,E)}return o}function Jd(a,e,t){const i=a.currentDevicePixelRatio,n=t!==0?Math.max(t/2,.5):0;return Math.round((e-n)*i)/i+n}function TC(a,e){!e&&!a||(e=e||a.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,a.width,a.height),e.restore())}function $b(a,e,t,i){$M(a,e,t,i,null)}function $M(a,e,t,i,n){let r,o,s,h,f,y,x,S;const E=e.pointStyle,z=e.rotation,D=e.radius;let F=(z||0)*Pz;if(E&&typeof E=="object"&&(r=E.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){a.save(),a.translate(t,i),a.rotate(F),a.drawImage(E,-E.width/2,-E.height/2,E.width,E.height),a.restore();return}if(!(isNaN(D)||D<=0)){switch(a.beginPath(),E){default:n?a.ellipse(t,i,n/2,D,0,0,ss):a.arc(t,i,D,0,ss),a.closePath();break;case"triangle":y=n?n/2:D,a.moveTo(t+Math.sin(F)*y,i-Math.cos(F)*D),F+=xC,a.lineTo(t+Math.sin(F)*y,i-Math.cos(F)*D),F+=xC,a.lineTo(t+Math.sin(F)*y,i-Math.cos(F)*D),a.closePath();break;case"rectRounded":f=D*.516,h=D-f,o=Math.cos(F+Kd)*h,x=Math.cos(F+Kd)*(n?n/2-f:h),s=Math.sin(F+Kd)*h,S=Math.sin(F+Kd)*(n?n/2-f:h),a.arc(t-x,i-s,f,F-ar,F-Gs),a.arc(t+S,i-o,f,F-Gs,F),a.arc(t+x,i+s,f,F,F+Gs),a.arc(t-S,i+o,f,F+Gs,F+ar),a.closePath();break;case"rect":if(!z){h=Math.SQRT1_2*D,y=n?n/2:h,a.rect(t-y,i-h,2*y,2*h);break}F+=Kd;case"rectRot":x=Math.cos(F)*(n?n/2:D),o=Math.cos(F)*D,s=Math.sin(F)*D,S=Math.sin(F)*(n?n/2:D),a.moveTo(t-x,i-s),a.lineTo(t+S,i-o),a.lineTo(t+x,i+s),a.lineTo(t-S,i+o),a.closePath();break;case"crossRot":F+=Kd;case"cross":x=Math.cos(F)*(n?n/2:D),o=Math.cos(F)*D,s=Math.sin(F)*D,S=Math.sin(F)*(n?n/2:D),a.moveTo(t-x,i-s),a.lineTo(t+x,i+s),a.moveTo(t+S,i-o),a.lineTo(t-S,i+o);break;case"star":x=Math.cos(F)*(n?n/2:D),o=Math.cos(F)*D,s=Math.sin(F)*D,S=Math.sin(F)*(n?n/2:D),a.moveTo(t-x,i-s),a.lineTo(t+x,i+s),a.moveTo(t+S,i-o),a.lineTo(t-S,i+o),F+=Kd,x=Math.cos(F)*(n?n/2:D),o=Math.cos(F)*D,s=Math.sin(F)*D,S=Math.sin(F)*(n?n/2:D),a.moveTo(t-x,i-s),a.lineTo(t+x,i+s),a.moveTo(t+S,i-o),a.lineTo(t-S,i+o);break;case"line":o=n?n/2:Math.cos(F)*D,s=Math.sin(F)*D,a.moveTo(t-o,i-s),a.lineTo(t+o,i+s);break;case"dash":a.moveTo(t,i),a.lineTo(t+Math.cos(F)*(n?n/2:D),i+Math.sin(F)*D);break;case!1:a.closePath();break}a.fill(),e.borderWidth>0&&a.stroke()}}function Lh(a,e,t){return t=t||.5,!e||a&&a.x>e.left-t&&a.x<e.right+t&&a.y>e.top-t&&a.y<e.bottom+t}function K_(a,e){a.save(),a.beginPath(),a.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),a.clip()}function J_(a){a.restore()}function Jz(a,e,t,i,n){if(!e)return a.lineTo(t.x,t.y);if(n==="middle"){const r=(e.x+t.x)/2;a.lineTo(r,e.y),a.lineTo(r,t.y)}else n==="after"!=!!i?a.lineTo(e.x,t.y):a.lineTo(t.x,e.y);a.lineTo(t.x,t.y)}function Qz(a,e,t,i){if(!e)return a.lineTo(t.x,t.y);a.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function eF(a,e){e.translation&&a.translate(e.translation[0],e.translation[1]),ja(e.rotation)||a.rotate(e.rotation),e.color&&(a.fillStyle=e.color),e.textAlign&&(a.textAlign=e.textAlign),e.textBaseline&&(a.textBaseline=e.textBaseline)}function tF(a,e,t,i,n){if(n.strikethrough||n.underline){const r=a.measureText(i),o=e-r.actualBoundingBoxLeft,s=e+r.actualBoundingBoxRight,h=t-r.actualBoundingBoxAscent,f=t+r.actualBoundingBoxDescent,y=n.strikethrough?(h+f)/2:f;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=n.decorationWidth||2,a.moveTo(o,y),a.lineTo(s,y),a.stroke()}}function iF(a,e){const t=a.fillStyle;a.fillStyle=e.color,a.fillRect(e.left,e.top,e.width,e.height),a.fillStyle=t}function Nf(a,e,t,i,n,r={}){const o=fs(e)?e:[e],s=r.strokeWidth>0&&r.strokeColor!=="";let h,f;for(a.save(),a.font=n.string,eF(a,r),h=0;h<o.length;++h)f=o[h],r.backdrop&&iF(a,r.backdrop),s&&(r.strokeColor&&(a.strokeStyle=r.strokeColor),ja(r.strokeWidth)||(a.lineWidth=r.strokeWidth),a.strokeText(f,t,i,r.maxWidth)),a.fillText(f,t,i,r.maxWidth),tF(a,t,i,f,r),i+=Number(n.lineHeight);a.restore()}function ny(a,e){const{x:t,y:i,w:n,h:r,radius:o}=e;a.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*ar,ar,!0),a.lineTo(t,i+r-o.bottomLeft),a.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,ar,Gs,!0),a.lineTo(t+n-o.bottomRight,i+r),a.arc(t+n-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Gs,0,!0),a.lineTo(t+n,i+o.topRight),a.arc(t+n-o.topRight,i+o.topRight,o.topRight,0,-Gs,!0),a.lineTo(t+o.topLeft,i)}const nF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,aF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function rF(a,e){const t=(""+a).match(nF);if(!t||t[1]==="normal")return e*1.2;switch(a=+t[2],t[3]){case"px":return a;case"%":a/=100;break}return e*a}const sF=a=>+a||0;function vw(a,e){const t={},i=Ua(e),n=i?Object.keys(e):e,r=Ua(a)?i?o=>ya(a[o],a[e[o]]):o=>a[o]:()=>a;for(const o of n)t[o]=sF(r(o));return t}function GM(a){return vw(a,{top:"y",right:"x",bottom:"y",left:"x"})}function If(a){return vw(a,["topLeft","topRight","bottomLeft","bottomRight"])}function Jo(a){const e=GM(a);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function so(a,e){a=a||{},e=e||ps.font;let t=ya(a.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=ya(a.style,e.style);i&&!(""+i).match(aF)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:ya(a.family,e.family),lineHeight:rF(ya(a.lineHeight,e.lineHeight),t),size:t,style:i,weight:ya(a.weight,e.weight),string:""};return n.string=Zz(n),n}function xm(a,e,t,i){let n,r,o;for(n=0,r=a.length;n<r;++n)if(o=a[n],o!==void 0&&o!==void 0)return o}function oF(a,e,t){const{min:i,max:n}=a,r=DM(e,(n-i)/2),o=(s,h)=>t&&s===0?0:s+h;return{min:o(i,-Math.abs(r)),max:o(n,r)}}function Cd(a,e){return Object.assign(Object.create(a),e)}function bw(a,e=[""],t,i,n=()=>a[0]){const r=t||a;typeof i>"u"&&(i=qM("_fallback",a));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:r,_fallback:i,_getTarget:n,override:s=>bw([s,...a],e,r,i)};return new Proxy(o,{deleteProperty(s,h){return delete s[h],delete s._keys,delete a[0][h],!0},get(s,h){return XM(s,h,()=>gF(h,e,a,s))},getOwnPropertyDescriptor(s,h){return Reflect.getOwnPropertyDescriptor(s._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(a[0])},has(s,h){return MC(s).includes(h)},ownKeys(s){return MC(s)},set(s,h,f){const y=s._storage||(s._storage=n());return s[h]=y[h]=f,delete s._keys,!0}})}function cg(a,e,t,i){const n={_cacheable:!1,_proxy:a,_context:e,_subProxy:t,_stack:new Set,_descriptors:WM(a,i),setContext:r=>cg(a,r,t,i),override:r=>cg(a.override(r),e,t,i)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete a[o],!0},get(r,o,s){return XM(r,o,()=>cF(r,o,s))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(a,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,o)},getPrototypeOf(){return Reflect.getPrototypeOf(a)},has(r,o){return Reflect.has(a,o)},ownKeys(){return Reflect.ownKeys(a)},set(r,o,s){return a[o]=s,delete r[o],!0}})}function WM(a,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:n=e.allKeys}=a;return{allKeys:n,scriptable:t,indexable:i,isScriptable:xd(t)?t:()=>t,isIndexable:xd(i)?i:()=>i}}const lF=(a,e)=>a?a+gw(e):e,ww=(a,e)=>Ua(e)&&a!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function XM(a,e,t){if(Object.prototype.hasOwnProperty.call(a,e)||e==="constructor")return a[e];const i=t();return a[e]=i,i}function cF(a,e,t){const{_proxy:i,_context:n,_subProxy:r,_descriptors:o}=a;let s=i[e];return xd(s)&&o.isScriptable(e)&&(s=uF(e,s,a,t)),fs(s)&&s.length&&(s=hF(e,s,a,o.isIndexable)),ww(e,s)&&(s=cg(s,n,r&&r[e],o)),s}function uF(a,e,t,i){const{_proxy:n,_context:r,_subProxy:o,_stack:s}=t;if(s.has(a))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+a);s.add(a);let h=e(r,o||i);return s.delete(a),ww(a,h)&&(h=Sw(n._scopes,n,a,h)),h}function hF(a,e,t,i){const{_proxy:n,_context:r,_subProxy:o,_descriptors:s}=t;if(typeof r.index<"u"&&i(a))return e[r.index%e.length];if(Ua(e[0])){const h=e,f=n._scopes.filter(y=>y!==h);e=[];for(const y of h){const x=Sw(f,n,a,y);e.push(cg(x,r,o&&o[a],s))}}return e}function YM(a,e,t){return xd(a)?a(e,t):a}const dF=(a,e)=>a===!0?e:typeof a=="string"?_d(e,a):void 0;function fF(a,e,t,i,n){for(const r of e){const o=dF(t,r);if(o){a.add(o);const s=YM(o._fallback,t,n);if(typeof s<"u"&&s!==t&&s!==i)return s}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function Sw(a,e,t,i){const n=e._rootScopes,r=YM(e._fallback,t,i),o=[...a,...n],s=new Set;s.add(i);let h=EC(s,o,t,r||t,i);return h===null||typeof r<"u"&&r!==t&&(h=EC(s,o,r,h,i),h===null)?!1:bw(Array.from(s),[""],n,r,()=>pF(e,t,i))}function EC(a,e,t,i,n){for(;t;)t=fF(a,e,t,i,n);return t}function pF(a,e,t){const i=a._getTarget();e in i||(i[e]={});const n=i[e];return fs(n)&&Ua(t)?t:n||{}}function gF(a,e,t,i){let n;for(const r of e)if(n=qM(lF(r,a),t),typeof n<"u")return ww(a,n)?Sw(t,i,a,n):n}function qM(a,e){for(const t of e){if(!t)continue;const i=t[a];if(typeof i<"u")return i}}function MC(a){let e=a._keys;return e||(e=a._keys=mF(a._scopes)),e}function mF(a){const e=new Set;for(const t of a)for(const i of Object.keys(t).filter(n=>!n.startsWith("_")))e.add(i);return Array.from(e)}function ZM(a,e,t,i){const{iScale:n}=a,{key:r="r"}=this._parsing,o=new Array(i);let s,h,f,y;for(s=0,h=i;s<h;++s)f=s+t,y=e[f],o[s]={r:n.parse(_d(y,r),f)};return o}const yF=Number.EPSILON||1e-14,ug=(a,e)=>e<a.length&&!a[e].skip&&a[e],KM=a=>a==="x"?"y":"x";function _F(a,e,t,i){const n=a.skip?e:a,r=e,o=t.skip?e:t,s=Hb(r,n),h=Hb(o,r);let f=s/(s+h),y=h/(s+h);f=isNaN(f)?0:f,y=isNaN(y)?0:y;const x=i*f,S=i*y;return{previous:{x:r.x-x*(o.x-n.x),y:r.y-x*(o.y-n.y)},next:{x:r.x+S*(o.x-n.x),y:r.y+S*(o.y-n.y)}}}function xF(a,e,t){const i=a.length;let n,r,o,s,h,f=ug(a,0);for(let y=0;y<i-1;++y)if(h=f,f=ug(a,y+1),!(!h||!f)){if(Nm(e[y],0,yF)){t[y]=t[y+1]=0;continue}n=t[y]/e[y],r=t[y+1]/e[y],s=Math.pow(n,2)+Math.pow(r,2),!(s<=9)&&(o=3/Math.sqrt(s),t[y]=n*o*e[y],t[y+1]=r*o*e[y])}}function vF(a,e,t="x"){const i=KM(t),n=a.length;let r,o,s,h=ug(a,0);for(let f=0;f<n;++f){if(o=s,s=h,h=ug(a,f+1),!s)continue;const y=s[t],x=s[i];o&&(r=(y-o[t])/3,s[`cp1${t}`]=y-r,s[`cp1${i}`]=x-r*e[f]),h&&(r=(h[t]-y)/3,s[`cp2${t}`]=y+r,s[`cp2${i}`]=x+r*e[f])}}function bF(a,e="x"){const t=KM(e),i=a.length,n=Array(i).fill(0),r=Array(i);let o,s,h,f=ug(a,0);for(o=0;o<i;++o)if(s=h,h=f,f=ug(a,o+1),!!h){if(f){const y=f[e]-h[e];n[o]=y!==0?(f[t]-h[t])/y:0}r[o]=s?f?Hu(n[o-1])!==Hu(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}xF(a,n,r),vF(a,r,e)}function T0(a,e,t){return Math.max(Math.min(a,t),e)}function wF(a,e){let t,i,n,r,o,s=Lh(a[0],e);for(t=0,i=a.length;t<i;++t)o=r,r=s,s=t<i-1&&Lh(a[t+1],e),r&&(n=a[t],o&&(n.cp1x=T0(n.cp1x,e.left,e.right),n.cp1y=T0(n.cp1y,e.top,e.bottom)),s&&(n.cp2x=T0(n.cp2x,e.left,e.right),n.cp2y=T0(n.cp2y,e.top,e.bottom)))}function SF(a,e,t,i,n){let r,o,s,h;if(e.spanGaps&&(a=a.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")bF(a,n);else{let f=i?a[a.length-1]:a[0];for(r=0,o=a.length;r<o;++r)s=a[r],h=_F(f,s,a[Math.min(r+1,o-(i?0:1))%o],e.tension),s.cp1x=h.previous.x,s.cp1y=h.previous.y,s.cp2x=h.next.x,s.cp2y=h.next.y,f=s}e.capBezierPoints&&wF(a,t)}function kw(){return typeof window<"u"&&typeof document<"u"}function Cw(a){let e=a.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function T_(a,e,t){let i;return typeof a=="string"?(i=parseInt(a,10),a.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=a,i}const Q_=a=>a.ownerDocument.defaultView.getComputedStyle(a,null);function kF(a,e){return Q_(a).getPropertyValue(e)}const CF=["top","right","bottom","left"];function Pf(a,e,t){const i={};t=t?"-"+t:"";for(let n=0;n<4;n++){const r=CF[n];i[r]=parseFloat(a[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const AF=(a,e,t)=>(a>0||e>0)&&(!t||!t.shadowRoot);function TF(a,e){const t=a.touches,i=t&&t.length?t[0]:a,{offsetX:n,offsetY:r}=i;let o=!1,s,h;if(AF(n,r,a.target))s=n,h=r;else{const f=e.getBoundingClientRect();s=i.clientX-f.left,h=i.clientY-f.top,o=!0}return{x:s,y:h,box:o}}function of(a,e){if("native"in a)return a;const{canvas:t,currentDevicePixelRatio:i}=e,n=Q_(t),r=n.boxSizing==="border-box",o=Pf(n,"padding"),s=Pf(n,"border","width"),{x:h,y:f,box:y}=TF(a,t),x=o.left+(y&&s.left),S=o.top+(y&&s.top);let{width:E,height:z}=e;return r&&(E-=o.width+s.width,z-=o.height+s.height),{x:Math.round((h-x)/E*t.width/i),y:Math.round((f-S)/z*t.height/i)}}function EF(a,e,t){let i,n;if(e===void 0||t===void 0){const r=a&&Cw(a);if(!r)e=a.clientWidth,t=a.clientHeight;else{const o=r.getBoundingClientRect(),s=Q_(r),h=Pf(s,"border","width"),f=Pf(s,"padding");e=o.width-f.width-h.width,t=o.height-f.height-h.height,i=T_(s.maxWidth,r,"clientWidth"),n=T_(s.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||C_,maxHeight:n||C_}}const od=a=>Math.round(a*10)/10;function MF(a,e,t,i){const n=Q_(a),r=Pf(n,"margin"),o=T_(n.maxWidth,a,"clientWidth")||C_,s=T_(n.maxHeight,a,"clientHeight")||C_,h=EF(a,e,t);let{width:f,height:y}=h;if(n.boxSizing==="content-box"){const S=Pf(n,"border","width"),E=Pf(n,"padding");f-=E.width+S.width,y-=E.height+S.height}return f=Math.max(0,f-r.width),y=Math.max(0,i?f/i:y-r.height),f=od(Math.min(f,o,h.maxWidth)),y=od(Math.min(y,s,h.maxHeight)),f&&!y&&(y=od(f/2)),(e!==void 0||t!==void 0)&&i&&h.height&&y>h.height&&(y=h.height,f=od(Math.floor(y*i))),{width:f,height:y}}function IC(a,e,t){const i=e||1,n=od(a.height*i),r=od(a.width*i);a.height=od(a.height),a.width=od(a.width);const o=a.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${a.height}px`,o.style.width=`${a.width}px`),a.currentDevicePixelRatio!==i||o.height!==n||o.width!==r?(a.currentDevicePixelRatio=i,o.height=n,o.width=r,a.ctx.setTransform(i,0,0,i,0,0),!0):!1}const IF=(function(){let a=!1;try{const e={get passive(){return a=!0,!1}};kw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return a})();function PC(a,e){const t=kF(a,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function lf(a,e,t,i){return{x:a.x+t*(e.x-a.x),y:a.y+t*(e.y-a.y)}}function PF(a,e,t,i){return{x:a.x+t*(e.x-a.x),y:i==="middle"?t<.5?a.y:e.y:i==="after"?t<1?a.y:e.y:t>0?e.y:a.y}}function LF(a,e,t,i){const n={x:a.cp2x,y:a.cp2y},r={x:e.cp1x,y:e.cp1y},o=lf(a,n,t),s=lf(n,r,t),h=lf(r,e,t),f=lf(o,s,t),y=lf(s,h,t);return lf(f,y,t)}const DF=function(a,e){return{x(t){return a+a+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},RF=function(){return{x(a){return a},setWidth(a){},textAlign(a){return a},xPlus(a,e){return a+e},leftForLtr(a,e){return a}}};function Jp(a,e,t){return a?DF(e,t):RF()}function JM(a,e){let t,i;(e==="ltr"||e==="rtl")&&(t=a.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),a.prevTextDirection=i)}function QM(a,e){e!==void 0&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",e[0],e[1]))}function eI(a){return a==="angle"?{between:iy,compare:Oz,normalize:Xo}:{between:Ih,compare:(e,t)=>e-t,normalize:e=>e}}function LC({start:a,end:e,count:t,loop:i,style:n}){return{start:a%t,end:e%t,loop:i&&(e-a+1)%t===0,style:n}}function OF(a,e,t){const{property:i,start:n,end:r}=t,{between:o,normalize:s}=eI(i),h=e.length;let{start:f,end:y,loop:x}=a,S,E;if(x){for(f+=h,y+=h,S=0,E=h;S<E&&o(s(e[f%h][i]),n,r);++S)f--,y--;f%=h,y%=h}return y<f&&(y+=h),{start:f,end:y,loop:x,style:a.style}}function tI(a,e,t){if(!t)return[a];const{property:i,start:n,end:r}=t,o=e.length,{compare:s,between:h,normalize:f}=eI(i),{start:y,end:x,loop:S,style:E}=OF(a,e,t),z=[];let D=!1,F=null,U,G,Z;const ee=()=>h(n,Z,U)&&s(n,Z)!==0,ie=()=>s(r,U)===0||h(r,Z,U),le=()=>D||ee(),J=()=>!D||ie();for(let re=y,ae=y;re<=x;++re)G=e[re%o],!G.skip&&(U=f(G[i]),U!==Z&&(D=h(U,n,r),F===null&&le()&&(F=s(U,n)===0?re:ae),F!==null&&J()&&(z.push(LC({start:F,end:re,loop:S,count:o,style:E})),F=null),ae=re,Z=U));return F!==null&&z.push(LC({start:F,end:x,loop:S,count:o,style:E})),z}function iI(a,e){const t=[],i=a.segments;for(let n=0;n<i.length;n++){const r=tI(i[n],a.points,e);r.length&&t.push(...r)}return t}function zF(a,e,t,i){let n=0,r=e-1;if(t&&!i)for(;n<e&&!a[n].skip;)n++;for(;n<e&&a[n].skip;)n++;for(n%=e,t&&(r+=n);r>n&&a[r%e].skip;)r--;return r%=e,{start:n,end:r}}function FF(a,e,t,i){const n=a.length,r=[];let o=e,s=a[e],h;for(h=e+1;h<=t;++h){const f=a[h%n];f.skip||f.stop?s.skip||(i=!1,r.push({start:e%n,end:(h-1)%n,loop:i}),e=o=f.stop?h:null):(o=h,s.skip&&(e=h)),s=f}return o!==null&&r.push({start:e%n,end:o%n,loop:i}),r}function NF(a,e){const t=a.points,i=a.options.spanGaps,n=t.length;if(!n)return[];const r=!!a._loop,{start:o,end:s}=zF(t,n,r,i);if(i===!0)return DC(a,[{start:o,end:s,loop:r}],t,e);const h=s<o?s+n:s,f=!!a._fullLoop&&o===0&&s===n-1;return DC(a,FF(t,o,h,f),t,e)}function DC(a,e,t,i){return!i||!i.setContext||!t?e:BF(a,e,t,i)}function BF(a,e,t,i){const n=a._chart.getContext(),r=RC(a.options),{_datasetIndex:o,options:{spanGaps:s}}=a,h=t.length,f=[];let y=r,x=e[0].start,S=x;function E(z,D,F,U){const G=s?-1:1;if(z!==D){for(z+=h;t[z%h].skip;)z-=G;for(;t[D%h].skip;)D+=G;z%h!==D%h&&(f.push({start:z%h,end:D%h,loop:F,style:U}),y=U,x=D%h)}}for(const z of e){x=s?x:z.start;let D=t[x%h],F;for(S=x+1;S<=z.end;S++){const U=t[S%h];F=RC(i.setContext(Cd(n,{type:"segment",p0:D,p1:U,p0DataIndex:(S-1)%h,p1DataIndex:S%h,datasetIndex:o}))),jF(F,y)&&E(x,S-1,z.loop,y),D=U,y=F}x<S-1&&E(x,S-1,z.loop,y)}return f}function RC(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function jF(a,e){if(!e)return!1;const t=[],i=function(n,r){return xw(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(a,i)!==JSON.stringify(e,i)}function E0(a,e,t){return a.options.clip?a[t]:e[t]}function VF(a,e){const{xScale:t,yScale:i}=a;return t&&i?{left:E0(t,e,"left"),right:E0(t,e,"right"),top:E0(i,e,"top"),bottom:E0(i,e,"bottom")}:e}function nI(a,e){const t=e._clip;if(t.disabled)return!1;const i=VF(e,a.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?a.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?a.height:i.bottom+(t.bottom===!0?0:t.bottom)}}class HF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const r=t.listeners[n],o=t.duration;r.forEach(s=>s({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=BM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,s=!1,h;for(;o>=0;--o)h=r[o],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(e),s=!0):(r[o]=r[r.length-1],r.pop());s&&(n.draw(),this._notify(n,i,e,"progress")),r.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xh=new HF;const OC="transparent",UF={boolean(a,e,t){return t>.5?e:a},color(a,e,t){const i=CC(a||OC),n=i.valid&&CC(e||OC);return n&&n.valid?n.mix(i,t).hexString():e},number(a,e,t){return a+(e-a)*t}};class $F{constructor(e,t,i,n){const r=t[i];n=xm([e.to,n,r,e.from]);const o=xm([e.from,r,n]);this._active=!0,this._fn=e.fn||UF[e.type||typeof o],this._easing=Bm[e.easing]||Bm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const n=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=xm([e.to,t,n,e.from]),this._from=xm([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,n=this._prop,r=this._from,o=this._loop,s=this._to;let h;if(this._active=r!==s&&(o||t<i),!this._active){this._target[n]=s,this._notify(!0);return}if(t<0){this._target[n]=r;return}h=t/i%2,h=o&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[n]=this._fn(r,s,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][t]()}}class aI{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ua(e))return;const t=Object.keys(ps.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];if(!Ua(r))return;const o={};for(const s of t)o[s]=r[s];(fs(r.properties)&&r.properties||[n]).forEach(s=>{(s===n||!i.has(s))&&i.set(s,o)})})}_animateOptions(e,t){const i=t.options,n=WF(e,i);if(!n)return[];const r=this._createAnimations(n,i);return i.$shared&&GF(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,n=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();let h;for(h=o.length-1;h>=0;--h){const f=o[h];if(f.charAt(0)==="$")continue;if(f==="options"){n.push(...this._animateOptions(e,t));continue}const y=t[f];let x=r[f];const S=i.get(f);if(x)if(S&&x.active()){x.update(S,y,s);continue}else x.cancel();if(!S||!S.duration){e[f]=y;continue}r[f]=x=new $F(S,e,f,y),n.push(x)}return n}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return xh.add(this._chart,i),!0}}function GF(a,e){const t=[],i=Object.keys(e);for(let n=0;n<i.length;n++){const r=a[i[n]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function WF(a,e){if(!e)return;let t=a.options;if(!t){a.options=e;return}return t.$shared&&(a.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function zC(a,e){const t=a&&a.options||{},i=t.reverse,n=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:n,end:i?n:r}}function XF(a,e,t){if(t===!1)return!1;const i=zC(a,t),n=zC(e,t);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function YF(a){let e,t,i,n;return Ua(a)?(e=a.top,t=a.right,i=a.bottom,n=a.left):e=t=i=n=a,{top:e,right:t,bottom:i,left:n,disabled:a===!1}}function rI(a,e){const t=[],i=a._getSortedDatasetMetas(e);let n,r;for(n=0,r=i.length;n<r;++n)t.push(i[n].index);return t}function FC(a,e,t,i={}){const n=a.keys,r=i.mode==="single";let o,s,h,f;if(e===null)return;let y=!1;for(o=0,s=n.length;o<s;++o){if(h=+n[o],h===t){if(y=!0,i.all)continue;break}f=a.values[h],Ls(f)&&(r||e===0||Hu(e)===Hu(f))&&(e+=f)}return!y&&!i.all?0:e}function qF(a,e){const{iScale:t,vScale:i}=e,n=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(a),s=new Array(o.length);let h,f,y;for(h=0,f=o.length;h<f;++h)y=o[h],s[h]={[n]:y,[r]:a[y]};return s}function Rv(a,e){const t=a&&a.options.stacked;return t||t===void 0&&e.stack!==void 0}function ZF(a,e,t){return`${a.id}.${e.id}.${t.stack||t.type}`}function KF(a){const{min:e,max:t,minDefined:i,maxDefined:n}=a.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:n?t:Number.POSITIVE_INFINITY}}function JF(a,e,t){const i=a[e]||(a[e]={});return i[t]||(i[t]={})}function NC(a,e,t,i){for(const n of e.getMatchingVisibleMetas(i).reverse()){const r=a[n.index];if(t&&r>0||!t&&r<0)return n.index}return null}function BC(a,e){const{chart:t,_cachedMeta:i}=a,n=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:s}=i,h=r.axis,f=o.axis,y=ZF(r,o,i),x=e.length;let S;for(let E=0;E<x;++E){const z=e[E],{[h]:D,[f]:F}=z,U=z._stacks||(z._stacks={});S=U[f]=JF(n,y,D),S[s]=F,S._top=NC(S,o,!0,i.type),S._bottom=NC(S,o,!1,i.type);const G=S._visualValues||(S._visualValues={});G[s]=F}}function Ov(a,e){const t=a.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function QF(a,e){return Cd(a,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function eN(a,e,t){return Cd(a,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function nm(a,e){const t=a.controller.index,i=a.vScale&&a.vScale.axis;if(i){e=e||a._parsed;for(const n of e){const r=n._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const zv=a=>a==="reset"||a==="none",jC=(a,e)=>e?a:Object.assign({},a),tN=(a,e,t)=>a&&!e.hidden&&e._stacked&&{keys:rI(t,!0),values:null};class Ad{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Rv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&nm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),n=(x,S,E,z)=>x==="x"?S:x==="r"?z:E,r=t.xAxisID=ya(i.xAxisID,Ov(e,"x")),o=t.yAxisID=ya(i.yAxisID,Ov(e,"y")),s=t.rAxisID=ya(i.rAxisID,Ov(e,"r")),h=t.indexAxis,f=t.iAxisID=n(h,r,o,s),y=t.vAxisID=n(h,o,r,s);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&wC(this._data,this),e._stacked&&nm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Ua(t)){const n=this._cachedMeta;this._data=qF(t,n)}else if(i!==t){if(i){wC(i,this);const n=this._cachedMeta;nm(n),n._parsed=[]}t&&Object.isExtensible(t)&&Bz(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const r=t._stacked;t._stacked=Rv(t.vScale,t),t.stack!==i.stack&&(n=!0,nm(t),t.stack=i.stack),this._resyncElements(e),(n||r!==t._stacked)&&(BC(this,t._parsed),t._stacked=Rv(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:n}=this,{iScale:r,_stacked:o}=i,s=r.axis;let h=e===0&&t===n.length?!0:i._sorted,f=e>0&&i._parsed[e-1],y,x,S;if(this._parsing===!1)i._parsed=n,i._sorted=!0,S=n;else{fs(n[e])?S=this.parseArrayData(i,n,e,t):Ua(n[e])?S=this.parseObjectData(i,n,e,t):S=this.parsePrimitiveData(i,n,e,t);const E=()=>x[s]===null||f&&x[s]<f[s];for(y=0;y<t;++y)i._parsed[y+e]=x=S[y],h&&(E()&&(h=!1),f=x);i._sorted=h}o&&BC(this,S)}parsePrimitiveData(e,t,i,n){const{iScale:r,vScale:o}=e,s=r.axis,h=o.axis,f=r.getLabels(),y=r===o,x=new Array(n);let S,E,z;for(S=0,E=n;S<E;++S)z=S+i,x[S]={[s]:y||r.parse(f[z],z),[h]:o.parse(t[z],z)};return x}parseArrayData(e,t,i,n){const{xScale:r,yScale:o}=e,s=new Array(n);let h,f,y,x;for(h=0,f=n;h<f;++h)y=h+i,x=t[y],s[h]={x:r.parse(x[0],y),y:o.parse(x[1],y)};return s}parseObjectData(e,t,i,n){const{xScale:r,yScale:o}=e,{xAxisKey:s="x",yAxisKey:h="y"}=this._parsing,f=new Array(n);let y,x,S,E;for(y=0,x=n;y<x;++y)S=y+i,E=t[S],f[y]={x:r.parse(_d(E,s),S),y:o.parse(_d(E,h),S)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,r=this._cachedMeta,o=t[e.axis],s={keys:rI(n,!0),values:t._stacks[e.axis]._visualValues};return FC(s,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const r=i[t.axis];let o=r===null?NaN:r;const s=n&&i._stacks[t.axis];n&&s&&(n.values=s,o=FC(n,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,n=i._parsed,r=i._sorted&&e===i.iScale,o=n.length,s=this._getOtherScale(e),h=tN(t,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:x}=KF(s);let S,E;function z(){E=n[S];const D=E[s.axis];return!Ls(E[e.axis])||y>D||x<D}for(S=0;S<o&&!(!z()&&(this.updateRangeFromParsed(f,e,E,h),r));++S);if(r){for(S=o-1;S>=0;--S)if(!z()){this.updateRangeFromParsed(f,e,E,h);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let n,r,o;for(n=0,r=t.length;n<r;++n)o=t[n][e.axis],Ls(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=YF(ya(this.options.clip,XF(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,n=i.data||[],r=t.chartArea,o=[],s=this._drawStart||0,h=this._drawCount||n.length-s,f=this.options.drawActiveElementsOnTop;let y;for(i.dataset&&i.dataset.draw(e,r,s,h),y=s;y<s+h;++y){const x=n[y];x.hidden||(x.active&&f?o.push(x):x.draw(e,r))}for(y=0;y<o.length;++y)o[y].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const n=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=eN(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=n.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=QF(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const n=t==="active",r=this._cachedDataOpts,o=e+"-"+t,s=r[o],h=this.enableOptionSharing&&ty(i);if(s)return jC(s,h);const f=this.chart.config,y=f.datasetElementScopeKeys(this._type,e),x=n?[`${e}Hover`,"hover",e,""]:[e,""],S=f.getOptionScopes(this.getDataset(),y),E=Object.keys(ps.elements[e]),z=()=>this.getContext(i,n,t),D=f.resolveNamedOptions(S,E,z,x);return D.$shared&&(D.$shared=h,r[o]=Object.freeze(jC(D,h))),D}_resolveAnimations(e,t,i){const n=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,s=r[o];if(s)return s;let h;if(n.options.animation!==!1){const y=this.chart.config,x=y.datasetAnimationScopeKeys(this._type,t),S=y.getOptionScopes(this.getDataset(),x);h=y.createResolver(S,this.getContext(e,i,t))}const f=new aI(n,h&&h.animations);return h&&h._cacheable&&(r[o]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||zv(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==n;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,n){zv(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!zv(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const r=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[s,h,f]of this._syncList)this[s](h,f);this._syncList=[];const n=i.length,r=t.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,e):r<n&&this._removeElements(r,n-r)}_insertElements(e,t,i=!0){const n=this._cachedMeta,r=n.data,o=e+t;let s;const h=f=>{for(f.length+=t,s=f.length-1;s>=o;s--)f[s]=f[s-t]};for(h(r),s=e;s<o;++s)r[s]=new this.dataElementType;this._parsing&&h(n._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&nm(i,n)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,n]=e;this[t](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function iN(a,e){if(!a._cache.$bar){const t=a.getMatchingVisibleMetas(e);let i=[];for(let n=0,r=t.length;n<r;n++)i=i.concat(t[n].controller.getAllParsedValues(a));a._cache.$bar=NM(i.sort((n,r)=>n-r))}return a._cache.$bar}function nN(a){const e=a.iScale,t=iN(e,a.type);let i=e._length,n,r,o,s;const h=()=>{o===32767||o===-32768||(ty(s)&&(i=Math.min(i,Math.abs(o-s)||i)),s=o)};for(n=0,r=t.length;n<r;++n)o=e.getPixelForValue(t[n]),h();for(s=void 0,n=0,r=e.ticks.length;n<r;++n)o=e.getPixelForTick(n),h();return i}function aN(a,e,t,i){const n=t.barThickness;let r,o;return ja(n)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=n*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[a]-r/2}}function rN(a,e,t,i){const n=e.pixels,r=n[a];let o=a>0?n[a-1]:null,s=a<n.length-1?n[a+1]:null;const h=t.categoryPercentage;o===null&&(o=r-(s===null?e.end-e.start:s-r)),s===null&&(s=r+r-o);const f=r-(r-Math.min(o,s))/2*h;return{chunk:Math.abs(s-o)/2*h/i,ratio:t.barPercentage,start:f}}function sN(a,e,t,i){const n=t.parse(a[0],i),r=t.parse(a[1],i),o=Math.min(n,r),s=Math.max(n,r);let h=o,f=s;Math.abs(o)>Math.abs(s)&&(h=s,f=o),e[t.axis]=f,e._custom={barStart:h,barEnd:f,start:n,end:r,min:o,max:s}}function sI(a,e,t,i){return fs(a)?sN(a,e,t,i):e[t.axis]=t.parse(a,i),e}function VC(a,e,t,i){const n=a.iScale,r=a.vScale,o=n.getLabels(),s=n===r,h=[];let f,y,x,S;for(f=t,y=t+i;f<y;++f)S=e[f],x={},x[n.axis]=s||n.parse(o[f],f),h.push(sI(S,x,r,f));return h}function Fv(a){return a&&a.barStart!==void 0&&a.barEnd!==void 0}function oN(a,e,t){return a!==0?Hu(a):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function lN(a){let e,t,i,n,r;return a.horizontal?(e=a.base>a.x,t="left",i="right"):(e=a.base<a.y,t="bottom",i="top"),e?(n="end",r="start"):(n="start",r="end"),{start:t,end:i,reverse:e,top:n,bottom:r}}function cN(a,e,t,i){let n=e.borderSkipped;const r={};if(!n){a.borderSkipped=r;return}if(n===!0){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:s,reverse:h,top:f,bottom:y}=lN(a);n==="middle"&&t&&(a.enableBorderRadius=!0,(t._top||0)===i?n=f:(t._bottom||0)===i?n=y:(r[HC(y,o,s,h)]=!0,n=f)),r[HC(n,o,s,h)]=!0,a.borderSkipped=r}function HC(a,e,t,i){return i?(a=uN(a,e,t),a=UC(a,t,e)):a=UC(a,e,t),a}function uN(a,e,t){return a===e?t:a===t?e:a}function UC(a,e,t){return a==="start"?e:a==="end"?t:a}function hN(a,{inflateAmount:e},t){a.inflateAmount=e==="auto"?t===1?.33:0:e}class dN extends Ad{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,n){return VC(e,t,i,n)}parseArrayData(e,t,i,n){return VC(e,t,i,n)}parseObjectData(e,t,i,n){const{iScale:r,vScale:o}=e,{xAxisKey:s="x",yAxisKey:h="y"}=this._parsing,f=r.axis==="x"?s:h,y=o.axis==="x"?s:h,x=[];let S,E,z,D;for(S=i,E=i+n;S<E;++S)D=t[S],z={},z[r.axis]=r.parse(_d(D,f),S),x.push(sI(_d(D,y),z,o,S));return x}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,r=this.getParsed(e),o=r._custom,s=Fv(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:s}}=this,h=s.getBasePixel(),f=s.isHorizontal(),y=this._getRuler(),{sharedOptions:x,includeOptions:S}=this._getSharedOptions(t,n);for(let E=t;E<t+i;E++){const z=this.getParsed(E),D=r||ja(z[s.axis])?{base:h,head:h}:this._calculateBarValuePixels(E),F=this._calculateBarIndexPixels(E,y),U=(z._stacks||{})[s.axis],G={horizontal:f,base:D.base,enableBorderRadius:!U||Fv(z._custom)||o===U._top||o===U._bottom,x:f?D.head:F.center,y:f?F.center:D.head,height:f?F.size:Math.abs(D.size),width:f?Math.abs(D.size):F.size};S&&(G.options=x||this.resolveDataElementOptions(E,e[E].active?"active":n));const Z=G.options||e[E].options;cN(G,Z,U,o),hN(G,Z,y.ratio),this.updateElement(e[E],E,G,n)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),r=i.options.stacked,o=[],s=this._cachedMeta.controller.getParsed(t),h=s&&s[i.axis],f=y=>{const x=y._parsed.find(E=>E[i.axis]===h),S=x&&x[y.vScale.axis];if(ja(S)||isNaN(S))return!0};for(const y of n)if(!(t!==void 0&&f(y))&&((r===!1||o.indexOf(y.stack)===-1||r===void 0&&y.stack===void 0)&&o.push(y.stack),y.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[ya(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const n=this._getStacks(e,i),r=t!==void 0?n.indexOf(t):-1;return r===-1?n.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,n=[];let r,o;for(r=0,o=t.data.length;r<o;++r)n.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const s=e.barThickness;return{min:s||nN(t),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:n},options:{base:r,minBarLength:o}}=this,s=r||0,h=this.getParsed(e),f=h._custom,y=Fv(f);let x=h[t.axis],S=0,E=i?this.applyStack(t,h,i):x,z,D;E!==x&&(S=E-x,E=x),y&&(x=f.barStart,E=f.barEnd-f.barStart,x!==0&&Hu(x)!==Hu(f.barEnd)&&(S=0),S+=x);const F=!ja(r)&&!y?r:S;let U=t.getPixelForValue(F);if(this.chart.getDataVisibility(e)?z=t.getPixelForValue(S+E):z=U,D=z-U,Math.abs(D)<o){D=oN(D,t,s)*o,x===s&&(U-=D/2);const G=t.getPixelForDecimal(0),Z=t.getPixelForDecimal(1),ee=Math.min(G,Z),ie=Math.max(G,Z);U=Math.max(Math.min(U,ie),ee),z=U+D,i&&!y&&(h._stacks[t.axis]._visualValues[n]=t.getValueForPixel(z)-t.getValueForPixel(U))}if(U===t.getPixelForValue(s)){const G=Hu(D)*t.getLineWidthForValue(s)/2;U+=G,D-=G}return{size:D,base:U,head:z,center:z+D/2}}_calculateBarIndexPixels(e,t){const i=t.scale,n=this.options,r=n.skipNull,o=ya(n.maxBarThickness,1/0);let s,h;const f=this._getAxisCount();if(t.grouped){const y=r?this._getStackCount(e):t.stackCount,x=n.barThickness==="flex"?rN(e,t,n,y*f):aN(e,t,n,y*f),S=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,E=this._getAxis().indexOf(ya(S,this.getFirstScaleIdForIndexAxis())),z=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+E;s=x.start+x.chunk*z+x.chunk/2,h=Math.min(o,x.chunk*x.ratio)}else s=i.getPixelForValue(this.getParsed(e)[i.axis],e),h=Math.min(o,t.min*t.ratio);return{base:s-h/2,head:s+h/2,center:s,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length;let r=0;for(;r<n;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}class fN extends Ad{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,n){const r=super.parsePrimitiveData(e,t,i,n);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,t,i,n){const r=super.parseArrayData(e,t,i,n);for(let o=0;o<r.length;o++){const s=t[i+o];r[o]._custom=ya(s[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,t,i,n){const r=super.parseObjectData(e,t,i,n);for(let o=0;o<r.length;o++){const s=t[i+o];r[o]._custom=ya(s&&s.r&&+s.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=t,o=this.getParsed(e),s=n.getLabelForValue(o.x),h=r.getLabelForValue(o.y),f=o._custom;return{label:i[e]||"",value:"("+s+", "+h+(f?", "+f:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,n){const r=n==="reset",{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(t,n),y=o.axis,x=s.axis;for(let S=t;S<t+i;S++){const E=e[S],z=!r&&this.getParsed(S),D={},F=D[y]=r?o.getPixelForDecimal(.5):o.getPixelForValue(z[y]),U=D[x]=r?s.getBasePixel():s.getPixelForValue(z[x]);D.skip=isNaN(F)||isNaN(U),f&&(D.options=h||this.resolveDataElementOptions(S,E.active?"active":n),r&&(D.options.radius=0)),this.updateElement(E,S,D,n)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return t!=="active"&&(n.radius=0),n.radius+=ya(i&&i._custom,r),n}}function pN(a,e,t){let i=1,n=1,r=0,o=0;if(e<ss){const s=a,h=s+e,f=Math.cos(s),y=Math.sin(s),x=Math.cos(h),S=Math.sin(h),E=(Z,ee,ie)=>iy(Z,s,h,!0)?1:Math.max(ee,ee*t,ie,ie*t),z=(Z,ee,ie)=>iy(Z,s,h,!0)?-1:Math.min(ee,ee*t,ie,ie*t),D=E(0,f,x),F=E(Gs,y,S),U=z(ar,f,x),G=z(ar+Gs,y,S);i=(D-U)/2,n=(F-G)/2,r=-(D+U)/2,o=-(F+G)/2}return{ratioX:i,ratioY:n,offsetX:r,offsetY:o}}class Aw extends Ad{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:i,textAlign:n,color:r,useBorderRadius:o,borderRadius:s}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((h,f)=>{const x=e.getDatasetMeta(0).controller.getStyle(f);return{text:h,fillStyle:x.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(f),lineDash:x.borderDash,lineDashOffset:x.borderDashOffset,lineJoin:x.borderJoinStyle,lineWidth:x.borderWidth,strokeStyle:x.borderColor,textAlign:n,pointStyle:i,borderRadius:o&&(s||x.borderRadius),index:f}}):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let r=h=>+i[h];if(Ua(i[e])){const{key:h="value"}=this._parsing;r=f=>+_d(i[f],h)}let o,s;for(o=e,s=e+t;o<s;++o)n._parsed[o]=r(o)}}_getRotation(){return nu(this.options.rotation-90)}_getCircumference(){return nu(this.options.circumference)}_getRotationExtents(){let e=ss,t=-ss;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,r=n._getRotation(),o=n._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-o)/2,0),h=Math.min(kz(this.options.cutout,s),1),f=this._getRingWeight(this.index),{circumference:y,rotation:x}=this._getRotationExtents(),{ratioX:S,ratioY:E,offsetX:z,offsetY:D}=pN(x,y,h),F=(i.width-o)/S,U=(i.height-o)/E,G=Math.max(Math.min(F,U)/2,0),Z=DM(this.options.radius,G),ee=Math.max(Z*h,0),ie=(Z-ee)/this._getVisibleDatasetWeightTotal();this.offsetX=z*Z,this.offsetY=D*Z,n.total=this.calculateTotal(),this.outerRadius=Z-ie*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ie*f,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,n=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*r/ss)}updateElements(e,t,i,n){const r=n==="reset",o=this.chart,s=o.chartArea,f=o.options.animation,y=(s.left+s.right)/2,x=(s.top+s.bottom)/2,S=r&&f.animateScale,E=S?0:this.innerRadius,z=S?0:this.outerRadius,{sharedOptions:D,includeOptions:F}=this._getSharedOptions(t,n);let U=this._getRotation(),G;for(G=0;G<t;++G)U+=this._circumference(G,r);for(G=t;G<t+i;++G){const Z=this._circumference(G,r),ee=e[G],ie={x:y+this.offsetX,y:x+this.offsetY,startAngle:U,endAngle:U+Z,circumference:Z,outerRadius:z,innerRadius:E};F&&(ie.options=D||this.resolveDataElementOptions(G,ee.active?"active":n)),U+=Z,this.updateElement(ee,G,ie,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,n;for(n=0;n<t.length;n++){const r=e._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ss*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=xy(t._parsed[e],i.options.locale);return{label:n[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let n,r,o,s,h;if(!e){for(n=0,r=i.data.datasets.length;n<r;++n)if(i.isDatasetVisible(n)){o=i.getDatasetMeta(n),e=o.data,s=o.controller;break}}if(!e)return 0;for(n=0,r=e.length;n<r;++n)h=s.resolveDataElementOptions(n),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(ya(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class gN extends Ad{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:n=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:s,count:h}=VM(t,n,o);this._drawStart=s,this._drawCount=h,HM(t)&&(s=0,h=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=n;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:f},e),this.updateElements(n,s,h,e)}updateElements(e,t,i,n){const r=n==="reset",{iScale:o,vScale:s,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:y,includeOptions:x}=this._getSharedOptions(t,n),S=o.axis,E=s.axis,{spanGaps:z,segment:D}=this.options,F=lg(z)?z:Number.POSITIVE_INFINITY,U=this.chart._animationsDisabled||r||n==="none",G=t+i,Z=e.length;let ee=t>0&&this.getParsed(t-1);for(let ie=0;ie<Z;++ie){const le=e[ie],J=U?le:{};if(ie<t||ie>=G){J.skip=!0;continue}const re=this.getParsed(ie),ae=ja(re[E]),me=J[S]=o.getPixelForValue(re[S],ie),Te=J[E]=r||ae?s.getBasePixel():s.getPixelForValue(h?this.applyStack(s,re,h):re[E],ie);J.skip=isNaN(me)||isNaN(Te)||ae,J.stop=ie>0&&Math.abs(re[S]-ee[S])>F,D&&(J.parsed=re,J.raw=f.data[ie]),x&&(J.options=y||this.resolveDataElementOptions(ie,le.active?"active":n)),U||this.updateElement(le,ie,J,n),ee=re}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class oI extends Ad{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map((r,o)=>{const h=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:n,lineWidth:h.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=xy(t._parsed[e].r,i.options.locale);return{label:n[e]||"",value:r}}parseObjectData(e,t,i,n){return ZM.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(n/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),s=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,i,n){const r=n==="reset",o=this.chart,h=o.options.animation,f=this._cachedMeta.rScale,y=f.xCenter,x=f.yCenter,S=f.getIndexAngle(0)-.5*ar;let E=S,z;const D=360/this.countVisibleElements();for(z=0;z<t;++z)E+=this._computeAngle(z,n,D);for(z=t;z<t+i;z++){const F=e[z];let U=E,G=E+this._computeAngle(z,n,D),Z=o.getDataVisibility(z)?f.getDistanceFromCenterForValue(this.getParsed(z).r):0;E=G,r&&(h.animateScale&&(Z=0),h.animateRotate&&(U=G=S));const ee={x:y,y:x,innerRadius:0,outerRadius:Z,startAngle:U,endAngle:G,options:this.resolveDataElementOptions(z,F.active?"active":n)};this.updateElement(F,z,ee,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?nu(this.resolveDataElementOptions(e,t).angle||i):0}}class mN extends Aw{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class yN extends Ad{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,n){return ZM.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta,i=t.dataset,n=t.data||[],r=t.iScale.getLabels();if(i.points=n,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===n.length,options:o};this.updateElement(i,void 0,s,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,i,n){const r=this._cachedMeta.rScale,o=n==="reset";for(let s=t;s<t+i;s++){const h=e[s],f=this.resolveDataElementOptions(s,h.active?"active":n),y=r.getPointPositionForValue(s,this.getParsed(s).r),x=o?r.xCenter:y.x,S=o?r.yCenter:y.y,E={x,y:S,angle:y.angle,skip:isNaN(x)||isNaN(S),options:f};this.updateElement(h,s,E,n)}}}class _N extends Ad{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=t,o=this.getParsed(e),s=n.getLabelForValue(o.x),h=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+s+", "+h+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,n=this.chart._animationsDisabled;let{start:r,count:o}=VM(t,i,n);if(this._drawStart=r,this._drawCount=o,HM(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:h}=t;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!h._decimated,s.points=i;const f=this.resolveDatasetElementOptions(e);f.segment=this.options.segment,this.updateElement(s,void 0,{animated:!n,options:f},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,n){const r=n==="reset",{iScale:o,vScale:s,_stacked:h,_dataset:f}=this._cachedMeta,y=this.resolveDataElementOptions(t,n),x=this.getSharedOptions(y),S=this.includeOptions(n,x),E=o.axis,z=s.axis,{spanGaps:D,segment:F}=this.options,U=lg(D)?D:Number.POSITIVE_INFINITY,G=this.chart._animationsDisabled||r||n==="none";let Z=t>0&&this.getParsed(t-1);for(let ee=t;ee<t+i;++ee){const ie=e[ee],le=this.getParsed(ee),J=G?ie:{},re=ja(le[z]),ae=J[E]=o.getPixelForValue(le[E],ee),me=J[z]=r||re?s.getBasePixel():s.getPixelForValue(h?this.applyStack(s,le,h):le[z],ee);J.skip=isNaN(ae)||isNaN(me)||re,J.stop=ee>0&&Math.abs(le[E]-Z[E])>U,F&&(J.parsed=le,J.raw=f.data[ee]),S&&(J.options=x||this.resolveDataElementOptions(ee,ie.active?"active":n)),G||this.updateElement(ie,ee,J,n),Z=le}this.updateSharedOptions(x,n,y)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let s=0;for(let h=t.length-1;h>=0;--h)s=Math.max(s,t[h].size(this.resolveDataElementOptions(h))/2);return s>0&&s}const i=e.dataset,n=i.options&&i.options.borderWidth||0;if(!t.length)return n;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,r,o)/2}}var xN=Object.freeze({__proto__:null,BarController:dN,BubbleController:fN,DoughnutController:Aw,LineController:gN,PieController:mN,PolarAreaController:oI,RadarController:yN,ScatterController:_N});function Qd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Tw{static override(e){Object.assign(Tw.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Qd()}parse(){return Qd()}format(){return Qd()}add(){return Qd()}diff(){return Qd()}startOf(){return Qd()}endOf(){return Qd()}}var vN={_date:Tw};function bN(a,e,t,i){const{controller:n,data:r,_sorted:o}=a,s=n._cachedMeta.iScale,h=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(s&&e===s.axis&&e!=="r"&&o&&r.length){const f=s._reversePixels?Fz:Ph;if(i){if(n._sharedOptions){const y=r[0],x=typeof y.getRange=="function"&&y.getRange(e);if(x){const S=f(r,e,t-x),E=f(r,e,t+x);return{lo:S.lo,hi:E.hi}}}}else{const y=f(r,e,t);if(h){const{vScale:x}=n._cachedMeta,{_parsed:S}=a,E=S.slice(0,y.lo+1).reverse().findIndex(D=>!ja(D[x.axis]));y.lo-=Math.max(0,E);const z=S.slice(y.hi).findIndex(D=>!ja(D[x.axis]));y.hi+=Math.max(0,z)}return y}}return{lo:0,hi:r.length-1}}function ex(a,e,t,i,n){const r=a.getSortedVisibleDatasetMetas(),o=t[e];for(let s=0,h=r.length;s<h;++s){const{index:f,data:y}=r[s],{lo:x,hi:S}=bN(r[s],e,o,n);for(let E=x;E<=S;++E){const z=y[E];z.skip||i(z,f,E)}}}function wN(a){const e=a.indexOf("x")!==-1,t=a.indexOf("y")!==-1;return function(i,n){const r=e?Math.abs(i.x-n.x):0,o=t?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Nv(a,e,t,i,n){const r=[];return!n&&!a.isPointInArea(e)||ex(a,t,e,function(s,h,f){!n&&!Lh(s,a.chartArea,0)||s.inRange(e.x,e.y,i)&&r.push({element:s,datasetIndex:h,index:f})},!0),r}function SN(a,e,t,i){let n=[];function r(o,s,h){const{startAngle:f,endAngle:y}=o.getProps(["startAngle","endAngle"],i),{angle:x}=zM(o,{x:e.x,y:e.y});iy(x,f,y)&&n.push({element:o,datasetIndex:s,index:h})}return ex(a,t,e,r),n}function kN(a,e,t,i,n,r){let o=[];const s=wN(t);let h=Number.POSITIVE_INFINITY;function f(y,x,S){const E=y.inRange(e.x,e.y,n);if(i&&!E)return;const z=y.getCenterPoint(n);if(!(!!r||a.isPointInArea(z))&&!E)return;const F=s(e,z);F<h?(o=[{element:y,datasetIndex:x,index:S}],h=F):F===h&&o.push({element:y,datasetIndex:x,index:S})}return ex(a,t,e,f),o}function Bv(a,e,t,i,n,r){return!r&&!a.isPointInArea(e)?[]:t==="r"&&!i?SN(a,e,t,n):kN(a,e,t,i,n,r)}function $C(a,e,t,i,n){const r=[],o=t==="x"?"inXRange":"inYRange";let s=!1;return ex(a,t,e,(h,f,y)=>{h[o]&&h[o](e[t],n)&&(r.push({element:h,datasetIndex:f,index:y}),s=s||h.inRange(e.x,e.y,n))}),i&&!s?[]:r}var CN={modes:{index(a,e,t,i){const n=of(e,a),r=t.axis||"x",o=t.includeInvisible||!1,s=t.intersect?Nv(a,n,r,i,o):Bv(a,n,r,!1,i,o),h=[];return s.length?(a.getSortedVisibleDatasetMetas().forEach(f=>{const y=s[0].index,x=f.data[y];x&&!x.skip&&h.push({element:x,datasetIndex:f.index,index:y})}),h):[]},dataset(a,e,t,i){const n=of(e,a),r=t.axis||"xy",o=t.includeInvisible||!1;let s=t.intersect?Nv(a,n,r,i,o):Bv(a,n,r,!1,i,o);if(s.length>0){const h=s[0].datasetIndex,f=a.getDatasetMeta(h).data;s=[];for(let y=0;y<f.length;++y)s.push({element:f[y],datasetIndex:h,index:y})}return s},point(a,e,t,i){const n=of(e,a),r=t.axis||"xy",o=t.includeInvisible||!1;return Nv(a,n,r,i,o)},nearest(a,e,t,i){const n=of(e,a),r=t.axis||"xy",o=t.includeInvisible||!1;return Bv(a,n,r,t.intersect,i,o)},x(a,e,t,i){const n=of(e,a);return $C(a,n,"x",t.intersect,i)},y(a,e,t,i){const n=of(e,a);return $C(a,n,"y",t.intersect,i)}}};const lI=["left","top","right","bottom"];function am(a,e){return a.filter(t=>t.pos===e)}function GC(a,e){return a.filter(t=>lI.indexOf(t.pos)===-1&&t.box.axis===e)}function rm(a,e){return a.sort((t,i)=>{const n=e?i:t,r=e?t:i;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function AN(a){const e=[];let t,i,n,r,o,s;for(t=0,i=(a||[]).length;t<i;++t)n=a[t],{position:r,options:{stack:o,stackWeight:s=1}}=n,e.push({index:t,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:s});return e}function TN(a){const e={};for(const t of a){const{stack:i,pos:n,stackWeight:r}=t;if(!i||!lI.includes(n))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function EN(a,e){const t=TN(a),{vBoxMaxWidth:i,hBoxMaxHeight:n}=e;let r,o,s;for(r=0,o=a.length;r<o;++r){s=a[r];const{fullSize:h}=s.box,f=t[s.stack],y=f&&s.stackWeight/f.weight;s.horizontal?(s.width=y?y*i:h&&e.availableWidth,s.height=n):(s.width=i,s.height=y?y*n:h&&e.availableHeight)}return t}function MN(a){const e=AN(a),t=rm(e.filter(f=>f.box.fullSize),!0),i=rm(am(e,"left"),!0),n=rm(am(e,"right")),r=rm(am(e,"top"),!0),o=rm(am(e,"bottom")),s=GC(e,"x"),h=GC(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:n.concat(h).concat(o).concat(s),chartArea:am(e,"chartArea"),vertical:i.concat(n).concat(h),horizontal:r.concat(o).concat(s)}}function WC(a,e,t,i){return Math.max(a[t],e[t])+Math.max(a[i],e[i])}function cI(a,e){a.top=Math.max(a.top,e.top),a.left=Math.max(a.left,e.left),a.bottom=Math.max(a.bottom,e.bottom),a.right=Math.max(a.right,e.right)}function IN(a,e,t,i){const{pos:n,box:r}=t,o=a.maxPadding;if(!Ua(n)){t.size&&(a[n]-=t.size);const x=i[t.stack]||{size:0,count:1};x.size=Math.max(x.size,t.horizontal?r.height:r.width),t.size=x.size/x.count,a[n]+=t.size}r.getPadding&&cI(o,r.getPadding());const s=Math.max(0,e.outerWidth-WC(o,a,"left","right")),h=Math.max(0,e.outerHeight-WC(o,a,"top","bottom")),f=s!==a.w,y=h!==a.h;return a.w=s,a.h=h,t.horizontal?{same:f,other:y}:{same:y,other:f}}function PN(a){const e=a.maxPadding;function t(i){const n=Math.max(e[i]-a[i],0);return a[i]+=n,n}a.y+=t("top"),a.x+=t("left"),t("right"),t("bottom")}function LN(a,e){const t=e.maxPadding;function i(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(a?["left","right"]:["top","bottom"])}function vm(a,e,t,i){const n=[];let r,o,s,h,f,y;for(r=0,o=a.length,f=0;r<o;++r){s=a[r],h=s.box,h.update(s.width||e.w,s.height||e.h,LN(s.horizontal,e));const{same:x,other:S}=IN(e,t,s,i);f|=x&&n.length,y=y||S,h.fullSize||n.push(s)}return f&&vm(n,e,t,i)||y}function M0(a,e,t,i,n){a.top=t,a.left=e,a.right=e+i,a.bottom=t+n,a.width=i,a.height=n}function XC(a,e,t,i){const n=t.padding;let{x:r,y:o}=e;for(const s of a){const h=s.box,f=i[s.stack]||{placed:0,weight:1},y=s.stackWeight/f.weight||1;if(s.horizontal){const x=e.w*y,S=f.size||h.height;ty(f.start)&&(o=f.start),h.fullSize?M0(h,n.left,o,t.outerWidth-n.right-n.left,S):M0(h,e.left+f.placed,o,x,S),f.start=o,f.placed+=x,o=h.bottom}else{const x=e.h*y,S=f.size||h.width;ty(f.start)&&(r=f.start),h.fullSize?M0(h,r,n.top,S,t.outerHeight-n.bottom-n.top):M0(h,r,e.top+f.placed,S,x),f.start=r,f.placed+=x,r=h.right}}e.x=r,e.y=o}var Zo={addBox(a,e){a.boxes||(a.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},a.boxes.push(e)},removeBox(a,e){const t=a.boxes?a.boxes.indexOf(e):-1;t!==-1&&a.boxes.splice(t,1)},configure(a,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(a,e,t,i){if(!a)return;const n=Jo(a.options.layout.padding),r=Math.max(e-n.width,0),o=Math.max(t-n.height,0),s=MN(a.boxes),h=s.vertical,f=s.horizontal;Tr(a.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const y=h.reduce((D,F)=>F.box.options&&F.box.options.display===!1?D:D+1,0)||1,x=Object.freeze({outerWidth:e,outerHeight:t,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/y,hBoxMaxHeight:o/2}),S=Object.assign({},n);cI(S,Jo(i));const E=Object.assign({maxPadding:S,w:r,h:o,x:n.left,y:n.top},n),z=EN(h.concat(f),x);vm(s.fullSize,E,x,z),vm(h,E,x,z),vm(f,E,x,z)&&vm(h,E,x,z),PN(E),XC(s.leftAndTop,E,x,z),E.x+=E.w,E.y+=E.h,XC(s.rightAndBottom,E,x,z),a.chartArea={left:E.left,top:E.top,right:E.left+E.w,bottom:E.top+E.h,height:E.h,width:E.w},Tr(s.chartArea,D=>{const F=D.box;Object.assign(F,a.chartArea),F.update(E.w,E.h,{left:0,top:0,right:0,bottom:0})})}};class uI{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}updateConfig(e){}}class DN extends uI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const K0="$chartjs",RN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},YC=a=>a===null||a==="";function ON(a,e){const t=a.style,i=a.getAttribute("height"),n=a.getAttribute("width");if(a[K0]={initial:{height:i,width:n,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",YC(n)){const r=PC(a,"width");r!==void 0&&(a.width=r)}if(YC(i))if(a.style.height==="")a.height=a.width/(e||2);else{const r=PC(a,"height");r!==void 0&&(a.height=r)}return a}const hI=IF?{passive:!0}:!1;function zN(a,e,t){a&&a.addEventListener(e,t,hI)}function FN(a,e,t){a&&a.canvas&&a.canvas.removeEventListener(e,t,hI)}function NN(a,e){const t=RN[a.type]||a.type,{x:i,y:n}=of(a,e);return{type:t,chart:e,native:a,x:i!==void 0?i:null,y:n!==void 0?n:null}}function E_(a,e){for(const t of a)if(t===e||t.contains(e))return!0}function BN(a,e,t){const i=a.canvas,n=new MutationObserver(r=>{let o=!1;for(const s of r)o=o||E_(s.addedNodes,i),o=o&&!E_(s.removedNodes,i);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}function jN(a,e,t){const i=a.canvas,n=new MutationObserver(r=>{let o=!1;for(const s of r)o=o||E_(s.removedNodes,i),o=o&&!E_(s.addedNodes,i);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}const ay=new Map;let qC=0;function dI(){const a=window.devicePixelRatio;a!==qC&&(qC=a,ay.forEach((e,t)=>{t.currentDevicePixelRatio!==a&&e()}))}function VN(a,e){ay.size||window.addEventListener("resize",dI),ay.set(a,e)}function HN(a){ay.delete(a),ay.size||window.removeEventListener("resize",dI)}function UN(a,e,t){const i=a.canvas,n=i&&Cw(i);if(!n)return;const r=jM((s,h)=>{const f=n.clientWidth;t(s,h),f<n.clientWidth&&t()},window),o=new ResizeObserver(s=>{const h=s[0],f=h.contentRect.width,y=h.contentRect.height;f===0&&y===0||r(f,y)});return o.observe(n),VN(a,r),o}function jv(a,e,t){t&&t.disconnect(),e==="resize"&&HN(a)}function $N(a,e,t){const i=a.canvas,n=jM(r=>{a.ctx!==null&&t(NN(r,a))},a);return zN(i,e,n),n}class GN extends uI{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(ON(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[K0])return!1;const i=t[K0].initial;["height","width"].forEach(r=>{const o=i[r];ja(o)?t.removeAttribute(r):t.setAttribute(r,o)});const n=i.style||{};return Object.keys(n).forEach(r=>{t.style[r]=n[r]}),t.width=t.width,delete t[K0],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:BN,detach:jN,resize:UN}[t]||$N;n[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];if(!n)return;({attach:jv,detach:jv,resize:jv}[t]||FN)(e,t,n),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,n){return MF(e,t,i,n)}isAttached(e){const t=e&&Cw(e);return!!(t&&t.isConnected)}}function WN(a){return!kw()||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas?DN:GN}let Nh=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return lg(this.x)&&lg(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const n={};return e.forEach(r=>{n[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),n}};function XN(a,e){const t=a.options.ticks,i=YN(a),n=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?ZN(e):[],o=r.length,s=r[0],h=r[o-1],f=[];if(o>n)return KN(e,f,r,o/n),f;const y=qN(r,e,n);if(o>0){let x,S;const E=o>1?Math.round((h-s)/(o-1)):null;for(I0(e,f,y,ja(E)?0:s-E,s),x=0,S=o-1;x<S;x++)I0(e,f,y,r[x],r[x+1]);return I0(e,f,y,h,ja(E)?e.length:h+E),f}return I0(e,f,y),f}function YN(a){const e=a.options.offset,t=a._tickSize(),i=a._length/t+(e?0:1),n=a._maxLength/t;return Math.floor(Math.min(i,n))}function qN(a,e,t){const i=JN(a),n=e.length/t;if(!i)return Math.max(n,1);const r=Lz(i);for(let o=0,s=r.length-1;o<s;o++){const h=r[o];if(h>n)return h}return Math.max(n,1)}function ZN(a){const e=[];let t,i;for(t=0,i=a.length;t<i;t++)a[t].major&&e.push(t);return e}function KN(a,e,t,i){let n=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<a.length;o++)o===r&&(e.push(a[o]),n++,r=t[n*i])}function I0(a,e,t,i,n){const r=ya(i,0),o=Math.min(ya(n,a.length),a.length);let s=0,h,f,y;for(t=Math.ceil(t),n&&(h=n-i,t=h/Math.floor(h/t)),y=r;y<0;)s++,y=Math.round(r+s*t);for(f=Math.max(r,0);f<o;f++)f===y&&(e.push(a[f]),s++,y=Math.round(r+s*t))}function JN(a){const e=a.length;let t,i;if(e<2)return!1;for(i=a[0],t=1;t<e;++t)if(a[t]-a[t-1]!==i)return!1;return i}const QN=a=>a==="left"?"right":a==="right"?"left":a,ZC=(a,e,t)=>e==="top"||e==="left"?a[e]+t:a[e]-t,KC=(a,e)=>Math.min(e||a,a);function JC(a,e){const t=[],i=a.length/e,n=a.length;let r=0;for(;r<n;r+=i)t.push(a[Math.floor(r)]);return t}function eB(a,e,t){const i=a.ticks.length,n=Math.min(e,i-1),r=a._startPixel,o=a._endPixel,s=1e-6;let h=a.getPixelForTick(n),f;if(!(t&&(i===1?f=Math.max(h-r,o-h):e===0?f=(a.getPixelForTick(1)-h)/2:f=(h-a.getPixelForTick(n-1))/2,h+=n<e?f:-f,h<r-s||h>o+s)))return h}function tB(a,e){Tr(a,t=>{const i=t.gc,n=i.length/2;let r;if(n>e){for(r=0;r<n;++r)delete t.data[i[r]];i.splice(0,n)}})}function sm(a){return a.drawTicks?a.tickLength:0}function QC(a,e){if(!a.display)return 0;const t=so(a.font,e),i=Jo(a.padding);return(fs(a.text)?a.text.length:1)*t.lineHeight+i.height}function iB(a,e){return Cd(a,{scale:e,type:"scale"})}function nB(a,e,t){return Cd(a,{tick:t,index:e,type:"tick"})}function aB(a,e,t){let i=_w(a);return(t&&e!=="right"||!t&&e==="right")&&(i=QN(i)),i}function rB(a,e,t,i){const{top:n,left:r,bottom:o,right:s,chart:h}=a,{chartArea:f,scales:y}=h;let x=0,S,E,z;const D=o-n,F=s-r;if(a.isHorizontal()){if(E=Go(i,r,s),Ua(t)){const U=Object.keys(t)[0],G=t[U];z=y[U].getPixelForValue(G)+D-e}else t==="center"?z=(f.bottom+f.top)/2+D-e:z=ZC(a,t,e);S=s-r}else{if(Ua(t)){const U=Object.keys(t)[0],G=t[U];E=y[U].getPixelForValue(G)-F+e}else t==="center"?E=(f.left+f.right)/2-F+e:E=ZC(a,t,e);z=Go(i,o,n),x=t==="left"?-Gs:Gs}return{titleX:E,titleY:z,maxWidth:S,rotation:x}}class $f extends Nh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:n}=this;return e=tc(e,Number.POSITIVE_INFINITY),t=tc(t,Number.NEGATIVE_INFINITY),i=tc(i,Number.POSITIVE_INFINITY),n=tc(n,Number.NEGATIVE_INFINITY),{min:tc(e,i),max:tc(t,n),minDefined:Ls(e),maxDefined:Ls(t)}}getMinMax(e){let{min:t,max:i,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:t,max:i};const s=this.getMatchingVisibleMetas();for(let h=0,f=s.length;h<f;++h)o=s[h].controller.getMinMax(this,e),n||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=n&&t>i?t:i,{min:tc(t,tc(i,t)),max:tc(i,tc(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zr(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:n,grace:r,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=oF(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=s<this.ticks.length;this._convertTicksToLabels(h?JC(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=XN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zr(this.options.afterUpdate,[this])}beforeSetDimensions(){Zr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Zr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,n,r;for(i=0,n=e.length;i<n;i++)r=e[i],r.label=Zr(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){Zr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=KC(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,r=t.maxRotation;let o=n,s,h,f;if(!this._isVisible()||!t.display||n>=r||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const y=this._getLabelSizes(),x=y.widest.width,S=y.highest.height,E=bo(this.chart.width-x,0,this.maxWidth);s=e.offset?this.maxWidth/i:E/(i-1),x+6>s&&(s=E/(i-(e.offset?.5:1)),h=this.maxHeight-sm(e.grid)-t.padding-QC(e.title,this.chart.options.font),f=Math.sqrt(x*x+S*S),o=mw(Math.min(Math.asin(bo((y.highest.height+6)/s,-1,1)),Math.asin(bo(h/f,-1,1))-Math.asin(bo(S/f,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Zr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:n,grid:r}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const h=QC(n,t.options.font);if(s?(e.width=this.maxWidth,e.height=sm(r)+h):(e.height=this.maxHeight,e.width=sm(r)+h),i.display&&this.ticks.length){const{first:f,last:y,widest:x,highest:S}=this._getLabelSizes(),E=i.padding*2,z=nu(this.labelRotation),D=Math.cos(z),F=Math.sin(z);if(s){const U=i.mirror?0:F*x.width+D*S.height;e.height=Math.min(this.maxHeight,e.height+U+E)}else{const U=i.mirror?0:D*x.width+F*S.height;e.width=Math.min(this.maxWidth,e.width+U+E)}this._calculatePadding(f,y,F,D)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,n){const{ticks:{align:r,padding:o},position:s}=this.options,h=this.labelRotation!==0,f=s!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,E=0;h?f?(S=n*e.width,E=i*t.height):(S=i*e.height,E=n*t.width):r==="start"?E=t.width:r==="end"?S=e.width:r!=="inner"&&(S=e.width/2,E=t.width/2),this.paddingLeft=Math.max((S-y+o)*this.width/(this.width-y),0),this.paddingRight=Math.max((E-x+o)*this.width/(this.width-x),0)}else{let y=t.height/2,x=e.height/2;r==="start"?(y=0,x=e.height):r==="end"&&(y=t.height,x=0),this.paddingTop=y+o,this.paddingBottom=x+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)ja(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=JC(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:n,_longestTextCache:r}=this,o=[],s=[],h=Math.floor(t/KC(t,i));let f=0,y=0,x,S,E,z,D,F,U,G,Z,ee,ie;for(x=0;x<t;x+=h){if(z=e[x].label,D=this._resolveTickFontOptions(x),n.font=F=D.string,U=r[F]=r[F]||{data:{},gc:[]},G=D.lineHeight,Z=ee=0,!ja(z)&&!fs(z))Z=A_(n,U.data,U.gc,Z,z),ee=G;else if(fs(z))for(S=0,E=z.length;S<E;++S)ie=z[S],!ja(ie)&&!fs(ie)&&(Z=A_(n,U.data,U.gc,Z,ie),ee+=G);o.push(Z),s.push(ee),f=Math.max(Z,f),y=Math.max(ee,y)}tB(r,t);const le=o.indexOf(f),J=s.indexOf(y),re=ae=>({width:o[ae]||0,height:s[ae]||0});return{first:re(0),last:re(t-1),widest:re(le),highest:re(J),widths:o,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return zz(this._alignToPixels?Jd(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=nB(this.getContext(),e,i))}return this.$context||(this.$context=iB(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=nu(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,s=r?r.widest.width+o:0,h=r?r.highest.height+o:0;return this.isHorizontal()?h*i>s*n?s/i:h/n:h*n<s*i?h/i:s/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,n=this.options,{grid:r,position:o,border:s}=n,h=r.offset,f=this.isHorizontal(),x=this.ticks.length+(h?1:0),S=sm(r),E=[],z=s.setContext(this.getContext()),D=z.display?z.width:0,F=D/2,U=function(ht){return Jd(i,ht,D)};let G,Z,ee,ie,le,J,re,ae,me,Te,ye,Re;if(o==="top")G=U(this.bottom),J=this.bottom-S,ae=G-F,Te=U(e.top)+F,Re=e.bottom;else if(o==="bottom")G=U(this.top),Te=e.top,Re=U(e.bottom)-F,J=G+F,ae=this.top+S;else if(o==="left")G=U(this.right),le=this.right-S,re=G-F,me=U(e.left)+F,ye=e.right;else if(o==="right")G=U(this.left),me=e.left,ye=U(e.right)-F,le=G+F,re=this.left+S;else if(t==="x"){if(o==="center")G=U((e.top+e.bottom)/2+.5);else if(Ua(o)){const ht=Object.keys(o)[0],$e=o[ht];G=U(this.chart.scales[ht].getPixelForValue($e))}Te=e.top,Re=e.bottom,J=G+F,ae=J+S}else if(t==="y"){if(o==="center")G=U((e.left+e.right)/2);else if(Ua(o)){const ht=Object.keys(o)[0],$e=o[ht];G=U(this.chart.scales[ht].getPixelForValue($e))}le=G-F,re=le-S,me=e.left,ye=e.right}const We=ya(n.ticks.maxTicksLimit,x),Le=Math.max(1,Math.ceil(x/We));for(Z=0;Z<x;Z+=Le){const ht=this.getContext(Z),$e=r.setContext(ht),pt=s.setContext(ht),Dt=$e.lineWidth,qe=$e.color,Nt=pt.dash||[],ni=pt.dashOffset,xi=$e.tickWidth,Lt=$e.tickColor,Tt=$e.tickBorderDash||[],wt=$e.tickBorderDashOffset;ee=eB(this,Z,h),ee!==void 0&&(ie=Jd(i,ee,Dt),f?le=re=me=ye=ie:J=ae=Te=Re=ie,E.push({tx1:le,ty1:J,tx2:re,ty2:ae,x1:me,y1:Te,x2:ye,y2:Re,width:Dt,color:qe,borderDash:Nt,borderDashOffset:ni,tickWidth:xi,tickColor:Lt,tickBorderDash:Tt,tickBorderDashOffset:wt}))}return this._ticksLength=x,this._borderValue=G,E}_computeLabelItems(e){const t=this.axis,i=this.options,{position:n,ticks:r}=i,o=this.isHorizontal(),s=this.ticks,{align:h,crossAlign:f,padding:y,mirror:x}=r,S=sm(i.grid),E=S+y,z=x?-y:E,D=-nu(this.labelRotation),F=[];let U,G,Z,ee,ie,le,J,re,ae,me,Te,ye,Re="middle";if(n==="top")le=this.bottom-z,J=this._getXAxisLabelAlignment();else if(n==="bottom")le=this.top+z,J=this._getXAxisLabelAlignment();else if(n==="left"){const Le=this._getYAxisLabelAlignment(S);J=Le.textAlign,ie=Le.x}else if(n==="right"){const Le=this._getYAxisLabelAlignment(S);J=Le.textAlign,ie=Le.x}else if(t==="x"){if(n==="center")le=(e.top+e.bottom)/2+E;else if(Ua(n)){const Le=Object.keys(n)[0],ht=n[Le];le=this.chart.scales[Le].getPixelForValue(ht)+E}J=this._getXAxisLabelAlignment()}else if(t==="y"){if(n==="center")ie=(e.left+e.right)/2-E;else if(Ua(n)){const Le=Object.keys(n)[0],ht=n[Le];ie=this.chart.scales[Le].getPixelForValue(ht)}J=this._getYAxisLabelAlignment(S).textAlign}t==="y"&&(h==="start"?Re="top":h==="end"&&(Re="bottom"));const We=this._getLabelSizes();for(U=0,G=s.length;U<G;++U){Z=s[U],ee=Z.label;const Le=r.setContext(this.getContext(U));re=this.getPixelForTick(U)+r.labelOffset,ae=this._resolveTickFontOptions(U),me=ae.lineHeight,Te=fs(ee)?ee.length:1;const ht=Te/2,$e=Le.color,pt=Le.textStrokeColor,Dt=Le.textStrokeWidth;let qe=J;o?(ie=re,J==="inner"&&(U===G-1?qe=this.options.reverse?"left":"right":U===0?qe=this.options.reverse?"right":"left":qe="center"),n==="top"?f==="near"||D!==0?ye=-Te*me+me/2:f==="center"?ye=-We.highest.height/2-ht*me+me:ye=-We.highest.height+me/2:f==="near"||D!==0?ye=me/2:f==="center"?ye=We.highest.height/2-ht*me:ye=We.highest.height-Te*me,x&&(ye*=-1),D!==0&&!Le.showLabelBackdrop&&(ie+=me/2*Math.sin(D))):(le=re,ye=(1-Te)*me/2);let Nt;if(Le.showLabelBackdrop){const ni=Jo(Le.backdropPadding),xi=We.heights[U],Lt=We.widths[U];let Tt=ye-ni.top,wt=0-ni.left;switch(Re){case"middle":Tt-=xi/2;break;case"bottom":Tt-=xi;break}switch(J){case"center":wt-=Lt/2;break;case"right":wt-=Lt;break;case"inner":U===G-1?wt-=Lt:U>0&&(wt-=Lt/2);break}Nt={left:wt,top:Tt,width:Lt+ni.width,height:xi+ni.height,color:Le.backdropColor}}F.push({label:ee,font:ae,textOffset:ye,options:{rotation:D,color:$e,strokeColor:pt,strokeWidth:Dt,textAlign:qe,textBaseline:Re,translation:[ie,le],backdrop:Nt}})}return F}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-nu(this.labelRotation))return e==="top"?"left":"right";let n="center";return t.align==="start"?n="left":t.align==="end"?n="right":t.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),s=e+r,h=o.widest.width;let f,y;return t==="left"?n?(y=this.right+r,i==="near"?f="left":i==="center"?(f="center",y+=h/2):(f="right",y+=h)):(y=this.right-s,i==="near"?f="right":i==="center"?(f="center",y-=h/2):(f="left",y=this.left)):t==="right"?n?(y=this.left+r,i==="near"?f="right":i==="center"?(f="center",y-=h/2):(f="left",y-=h)):(y=this.left+s,i==="near"?f="left":i==="center"?(f="center",y+=h/2):(f="right",y=this.right)):f="right",{textAlign:f,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(r=>r.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const s=(h,f,y)=>{!y.width||!y.color||(i.save(),i.lineWidth=y.width,i.strokeStyle=y.color,i.setLineDash(y.borderDash||[]),i.lineDashOffset=y.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=n.length;r<o;++r){const h=n[r];t.drawOnChartArea&&s({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&s({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:n}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const s=n.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,y,x,S;this.isHorizontal()?(f=Jd(e,this.left,o)-o/2,y=Jd(e,this.right,s)+s/2,x=S=h):(x=Jd(e,this.top,o)-o/2,S=Jd(e,this.bottom,s)+s/2,f=y=h),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(f,x),t.lineTo(y,S),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&K_(i,n);const r=this.getLabelItems(e);for(const o of r){const s=o.options,h=o.font,f=o.label,y=o.textOffset;Nf(i,f,0,y,h,s)}n&&J_(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:n}}=this;if(!i.display)return;const r=so(i.font),o=Jo(i.padding),s=i.align;let h=r.lineHeight/2;t==="bottom"||t==="center"||Ua(t)?(h+=o.bottom,fs(i.text)&&(h+=r.lineHeight*(i.text.length-1))):h+=o.top;const{titleX:f,titleY:y,maxWidth:x,rotation:S}=rB(this,h,t,s);Nf(e,i.text,0,0,r,{color:i.color,maxWidth:x,rotation:S,textAlign:aB(s,t,n),textBaseline:"middle",translation:[f,y]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=ya(e.grid&&e.grid.z,-1),n=ya(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==$f.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let r,o;for(r=0,o=t.length;r<o;++r){const s=t[r];s[i]===this.id&&(!e||s.type===e)&&n.push(s)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return so(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class P0{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;lB(t)&&(i=this.register(t));const n=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in n||(n[r]=e,sB(e,o,i),this.override&&ps.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,n=this.scope;i in t&&delete t[i],n&&i in ps[n]&&(delete ps[n][i],this.override&&delete Ff[i])}}function sB(a,e,t){const i=ey(Object.create(null),[t?ps.get(t):{},ps.get(e),a.defaults]);ps.set(e,i),a.defaultRoutes&&oB(e,a.defaultRoutes),a.descriptors&&ps.describe(e,a.descriptors)}function oB(a,e){Object.keys(e).forEach(t=>{const i=t.split("."),n=i.pop(),r=[a].concat(i).join("."),o=e[t].split("."),s=o.pop(),h=o.join(".");ps.route(r,n,h,s)})}function lB(a){return"id"in a&&"defaults"in a}class cB{constructor(){this.controllers=new P0(Ad,"datasets",!0),this.elements=new P0(Nh,"elements"),this.plugins=new P0(Object,"plugins"),this.scales=new P0($f,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(n=>{const r=i||this._getRegistryForType(n);i||r.isForType(n)||r===this.plugins&&n.id?this._exec(e,r,n):Tr(n,o=>{const s=i||this._getRegistryForType(o);this._exec(e,s,o)})})}_exec(e,t,i){const n=gw(e);Zr(i["before"+n],[],i),t[e](i),Zr(i["after"+n],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var Ru=new cB;class uB{constructor(){this._init=void 0}notify(e,t,i,n){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,n){n=n||{};for(const r of e){const o=r.plugin,s=o[i],h=[t,n,r.options];if(Zr(s,h,o)===!1&&n.cancelable)return!1}return!0}invalidate(){ja(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,n=ya(i.options&&i.options.plugins,{}),r=hB(i);return n===!1&&!t?[]:fB(e,r,n,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(r,o)=>r.filter(s=>!o.some(h=>s.plugin.id===h.plugin.id));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function hB(a){const e={},t=[],i=Object.keys(Ru.plugins.items);for(let r=0;r<i.length;r++)t.push(Ru.getPlugin(i[r]));const n=a.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function dB(a,e){return!e&&a===!1?null:a===!0?{}:a}function fB(a,{plugins:e,localIds:t},i,n){const r=[],o=a.getContext();for(const s of e){const h=s.id,f=dB(i[h],n);f!==null&&r.push({plugin:s,options:pB(a.config,{plugin:s,local:t[h]},f,o)})}return r}function pB(a,{plugin:e,local:t},i,n){const r=a.pluginScopeKeys(e),o=a.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),a.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gb(a,e){const t=ps.datasets[a]||{};return((e.datasets||{})[a]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function gB(a,e){let t=a;return a==="_index_"?t=e:a==="_value_"&&(t=e==="x"?"y":"x"),t}function mB(a,e){return a===e?"_index_":"_value_"}function eA(a){if(a==="x"||a==="y"||a==="r")return a}function yB(a){if(a==="top"||a==="bottom")return"x";if(a==="left"||a==="right")return"y"}function Wb(a,...e){if(eA(a))return a;for(const t of e){const i=t.axis||yB(t.position)||a.length>1&&eA(a[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function tA(a,e,t){if(t[e+"AxisID"]===a)return{axis:e}}function _B(a,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===a||i.yAxisID===a);if(t.length)return tA(a,"x",t[0])||tA(a,"y",t[0])}return{}}function xB(a,e){const t=Ff[a.type]||{scales:{}},i=e.scales||{},n=Gb(a.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const s=i[o];if(!Ua(s))return console.error(`Invalid scale configuration for scale: ${o}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const h=Wb(o,s,_B(o,a),ps.scales[s.type]),f=mB(h,n),y=t.scales||{};r[o]=Fm(Object.create(null),[{axis:h},s,y[h],y[f]])}),a.data.datasets.forEach(o=>{const s=o.type||a.type,h=o.indexAxis||Gb(s,e),y=(Ff[s]||{}).scales||{};Object.keys(y).forEach(x=>{const S=gB(x,h),E=o[S+"AxisID"]||S;r[E]=r[E]||Object.create(null),Fm(r[E],[{axis:S},i[E],y[x]])})}),Object.keys(r).forEach(o=>{const s=r[o];Fm(s,[ps.scales[s.type],ps.scale])}),r}function fI(a){const e=a.options||(a.options={});e.plugins=ya(e.plugins,{}),e.scales=xB(a,e)}function pI(a){return a=a||{},a.datasets=a.datasets||[],a.labels=a.labels||[],a}function vB(a){return a=a||{},a.data=pI(a.data),fI(a),a}const iA=new Map,gI=new Set;function L0(a,e){let t=iA.get(a);return t||(t=e(),iA.set(a,t),gI.add(t)),t}const om=(a,e,t)=>{const i=_d(e,t);i!==void 0&&a.add(i)};class bB{constructor(e){this._config=vB(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=pI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),fI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return L0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return L0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return L0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return L0(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return(!n||t)&&(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:n,type:r}=this,o=this._cachedScopes(e,i),s=o.get(t);if(s)return s;const h=new Set;t.forEach(y=>{e&&(h.add(e),y.forEach(x=>om(h,e,x))),y.forEach(x=>om(h,n,x)),y.forEach(x=>om(h,Ff[r]||{},x)),y.forEach(x=>om(h,ps,x)),y.forEach(x=>om(h,Ub,x))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),gI.has(t)&&o.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ff[t]||{},ps.datasets[t]||{},{type:t},ps,Ub]}resolveNamedOptions(e,t,i,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:s}=nA(this._resolverCache,e,n);let h=o;if(SB(o,t)){r.$shared=!1,i=xd(i)?i():i;const f=this.createResolver(e,i,s);h=cg(o,i,f)}for(const f of t)r[f]=h[f];return r}createResolver(e,t,i=[""],n){const{resolver:r}=nA(this._resolverCache,e,i);return Ua(t)?cg(r,t,void 0,n):r}}function nA(a,e,t){let i=a.get(e);i||(i=new Map,a.set(e,i));const n=t.join();let r=i.get(n);return r||(r={resolver:bw(e,t),subPrefixes:t.filter(s=>!s.toLowerCase().includes("hover"))},i.set(n,r)),r}const wB=a=>Ua(a)&&Object.getOwnPropertyNames(a).some(e=>xd(a[e]));function SB(a,e){const{isScriptable:t,isIndexable:i}=WM(a);for(const n of e){const r=t(n),o=i(n),s=(o||r)&&a[n];if(r&&(xd(s)||wB(s))||o&&fs(s))return!0}return!1}var kB="4.5.1";const CB=["top","bottom","left","right","chartArea"];function aA(a,e){return a==="top"||a==="bottom"||CB.indexOf(a)===-1&&e==="x"}function rA(a,e){return function(t,i){return t[a]===i[a]?t[e]-i[e]:t[a]-i[a]}}function sA(a){const e=a.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Zr(t&&t.onComplete,[a],e)}function AB(a){const e=a.chart,t=e.options.animation;Zr(t&&t.onProgress,[a],e)}function mI(a){return kw()&&typeof a=="string"?a=document.getElementById(a):a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}const J0={},oA=a=>{const e=mI(a);return Object.values(J0).filter(t=>t.canvas===e).pop()};function TB(a,e,t){const i=Object.keys(a);for(const n of i){const r=+n;if(r>=e){const o=a[n];delete a[n],(t>0||r>e)&&(a[r+t]=o)}}}function EB(a,e,t,i){return!t||a.type==="mouseout"?null:i?e:a}class Ew{static defaults=ps;static instances=J0;static overrides=Ff;static registry=Ru;static version=kB;static getChart=oA;static register(...e){Ru.add(...e),lA()}static unregister(...e){Ru.remove(...e),lA()}constructor(e,t){const i=this.config=new bB(t),n=mI(e),r=oA(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||WN(n)),this.platform.updateConfig(i);const s=this.platform.acquireContext(n,o.aspectRatio),h=s&&s.canvas,f=h&&h.height,y=h&&h.width;if(this.id=Sz(),this.ctx=s,this.canvas=h,this.width=y,this.height=f,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new uB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=jz(x=>this.update(x),o.resizeDelay||0),this._dataChanges=[],J0[this.id]=this,!s||!h){console.error("Failed to create chart: can't acquire context from the given item");return}xh.listen(this,"complete",sA),xh.listen(this,"progress",AB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:n,_aspectRatio:r}=this;return ja(e)?t&&r?r:n?i/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ru}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():IC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return TC(this.canvas,this.ctx),this}stop(){return xh.stop(this),this}resize(e,t){xh.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,n=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,t,r),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,IC(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),Zr(i.onResize,[this,o],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Tr(t,(i,n)=>{i.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,n=Object.keys(i).reduce((o,s)=>(o[s]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const s=t[o],h=Wb(o,s),f=h==="r",y=h==="x";return{options:s,dposition:f?"chartArea":y?"bottom":"left",dtype:f?"radialLinear":y?"category":"linear"}}))),Tr(r,o=>{const s=o.options,h=s.id,f=Wb(h,s),y=ya(s.type,o.dtype);(s.position===void 0||aA(s.position,f)!==aA(o.dposition))&&(s.position=o.dposition),n[h]=!0;let x=null;if(h in i&&i[h].type===y)x=i[h];else{const S=Ru.getScale(y);x=new S({id:h,type:y,ctx:this.ctx,chart:this}),i[x.id]=x}x.init(s,e)}),Tr(n,(o,s)=>{o||delete i[s]}),Tr(i,o=>{Zo.configure(this,o,o.options),Zo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((n,r)=>n.index-r.index),i>t){for(let n=t;n<i;++n)this._destroyDatasetMeta(n);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(rA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,n)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=t.length;i<n;i++){const r=t[i];let o=this.getDatasetMeta(i);const s=r.type||this.config.type;if(o.type&&o.type!==s&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=s,o.indexAxis=r.indexAxis||Gb(s,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const h=Ru.getController(s),{datasetElementType:f,dataElementType:y}=ps.datasets[s];Object.assign(h,{dataElementType:Ru.getElement(y),datasetElementType:f&&Ru.getElement(f)}),o.controller=new h(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Tr(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let f=0,y=this.data.datasets.length;f<y;f++){const{controller:x}=this.getDatasetMeta(f),S=!n&&r.indexOf(x)===-1;x.buildOrUpdateElements(S),o=Math.max(+x.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),n||Tr(r,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(rA("z","_idx"));const{_active:s,_lastEvent:h}=this;h?this._eventHandler(h,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Tr(this.scales,e=>{Zo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!_C(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:r}of t){const o=i==="_removeElements"?-r:r;TB(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,s)=>s+","+o.splice(1).join(","))),n=i(0);for(let r=1;r<t;r++)if(!_C(n,i(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zo.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Tr(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,xd(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xh.has(this)?this.attached&&!xh.running(this)&&xh.start(this):(this.draw(),sA({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,r;for(n=0,r=t.length;n<r;++n){const o=t[n];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},n=nI(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&K_(t,n),e.controller.draw(),n&&J_(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Lh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,n){const r=CN.modes[t];return typeof r=="function"?r(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter(r=>r&&r._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Cd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const n=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,n);ty(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(s=>s.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),xh.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),TC(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete J0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},n=(r,o,s)=>{r.offsetX=o,r.offsetY=s,this._eventHandler(r)};Tr(this.options.events,r=>i(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(h,f)=>{t.addEventListener(this,h,f),e[h]=f},n=(h,f)=>{e[h]&&(t.removeEventListener(this,h,f),delete e[h])},r=(h,f)=>{this.canvas&&this.resize(h,f)};let o;const s=()=>{n("attach",s),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),i("attach",s)},t.isAttached(this.canvas)?s():o()}unbindEvents(){Tr(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Tr(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let r,o,s,h;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),s=0,h=e.length;s<h;++s){o=e[s];const f=o&&this.getDatasetMeta(o.datasetIndex).controller;f&&f[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const s=this.getDatasetMeta(r);if(!s)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:s.data[o],index:o}});!S_(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const n=this.options.hover,r=(h,f)=>h.filter(y=>!f.some(x=>y.datasetIndex===x.datasetIndex&&y.index===x.index)),o=r(t,e),s=i?e:r(e,t);o.length&&this.updateHoverStyle(o,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:n=[],options:r}=this,o=t,s=this._getActiveElements(e,n,i,o),h=Mz(e),f=EB(e,this._lastEvent,i,h);i&&(this._lastEvent=null,Zr(r.onHover,[e,s,this],this),h&&Zr(r.onClick,[e,s,this],this));const y=!S_(s,n);return(y||t)&&(this._active=s,this._updateHoverStyles(s,n,t)),this._lastEvent=f,y}_getActiveElements(e,t,i,n){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,n)}}function lA(){return Tr(Ew.instances,a=>a._plugins.invalidate())}function MB(a,e,t){const{startAngle:i,x:n,y:r,outerRadius:o,innerRadius:s,options:h}=e,{borderWidth:f,borderJoinStyle:y}=h,x=Math.min(f/o,Xo(i-t));if(a.beginPath(),a.arc(n,r,o-f/2,i+x/2,t-x/2),s>0){const S=Math.min(f/s,Xo(i-t));a.arc(n,r,s+f/2,t-S/2,i+S/2,!0)}else{const S=Math.min(f/2,o*Xo(i-t));if(y==="round")a.arc(n,r,S,t-ar/2,i+ar/2,!0);else if(y==="bevel"){const E=2*S*S,z=-E*Math.cos(t+ar/2)+n,D=-E*Math.sin(t+ar/2)+r,F=E*Math.cos(i+ar/2)+n,U=E*Math.sin(i+ar/2)+r;a.lineTo(z,D),a.lineTo(F,U)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}function IB(a,e,t){const{startAngle:i,pixelMargin:n,x:r,y:o,outerRadius:s,innerRadius:h}=e;let f=n/s;a.beginPath(),a.arc(r,o,s,i-f,t+f),h>n?(f=n/h,a.arc(r,o,h,t+f,i-f,!0)):a.arc(r,o,n,t+Gs,i-Gs),a.closePath(),a.clip()}function PB(a){return vw(a,["outerStart","outerEnd","innerStart","innerEnd"])}function LB(a,e,t,i){const n=PB(a.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),s=h=>{const f=(t-Math.min(r,h))*i/2;return bo(h,0,Math.min(r,f))};return{outerStart:s(n.outerStart),outerEnd:s(n.outerEnd),innerStart:bo(n.innerStart,0,o),innerEnd:bo(n.innerEnd,0,o)}}function Cp(a,e,t,i){return{x:t+a*Math.cos(e),y:i+a*Math.sin(e)}}function M_(a,e,t,i,n,r){const{x:o,y:s,startAngle:h,pixelMargin:f,innerRadius:y}=e,x=Math.max(e.outerRadius+i+t-f,0),S=y>0?y+i+t+f:0;let E=0;const z=n-h;if(i){const Le=y>0?y-i:0,ht=x>0?x-i:0,$e=(Le+ht)/2,pt=$e!==0?z*$e/($e+i):z;E=(z-pt)/2}const D=Math.max(.001,z*x-t/ar)/x,F=(z-D)/2,U=h+F+E,G=n-F-E,{outerStart:Z,outerEnd:ee,innerStart:ie,innerEnd:le}=LB(e,S,x,G-U),J=x-Z,re=x-ee,ae=U+Z/J,me=G-ee/re,Te=S+ie,ye=S+le,Re=U+ie/Te,We=G-le/ye;if(a.beginPath(),r){const Le=(ae+me)/2;if(a.arc(o,s,x,ae,Le),a.arc(o,s,x,Le,me),ee>0){const Dt=Cp(re,me,o,s);a.arc(Dt.x,Dt.y,ee,me,G+Gs)}const ht=Cp(ye,G,o,s);if(a.lineTo(ht.x,ht.y),le>0){const Dt=Cp(ye,We,o,s);a.arc(Dt.x,Dt.y,le,G+Gs,We+Math.PI)}const $e=(G-le/S+(U+ie/S))/2;if(a.arc(o,s,S,G-le/S,$e,!0),a.arc(o,s,S,$e,U+ie/S,!0),ie>0){const Dt=Cp(Te,Re,o,s);a.arc(Dt.x,Dt.y,ie,Re+Math.PI,U-Gs)}const pt=Cp(J,U,o,s);if(a.lineTo(pt.x,pt.y),Z>0){const Dt=Cp(J,ae,o,s);a.arc(Dt.x,Dt.y,Z,U-Gs,ae)}}else{a.moveTo(o,s);const Le=Math.cos(ae)*x+o,ht=Math.sin(ae)*x+s;a.lineTo(Le,ht);const $e=Math.cos(me)*x+o,pt=Math.sin(me)*x+s;a.lineTo($e,pt)}a.closePath()}function DB(a,e,t,i,n){const{fullCircles:r,startAngle:o,circumference:s}=e;let h=e.endAngle;if(r){M_(a,e,t,i,h,n);for(let f=0;f<r;++f)a.fill();isNaN(s)||(h=o+(s%ss||ss))}return M_(a,e,t,i,h,n),a.fill(),h}function RB(a,e,t,i,n){const{fullCircles:r,startAngle:o,circumference:s,options:h}=e,{borderWidth:f,borderJoinStyle:y,borderDash:x,borderDashOffset:S,borderRadius:E}=h,z=h.borderAlign==="inner";if(!f)return;a.setLineDash(x||[]),a.lineDashOffset=S,z?(a.lineWidth=f*2,a.lineJoin=y||"round"):(a.lineWidth=f,a.lineJoin=y||"bevel");let D=e.endAngle;if(r){M_(a,e,t,i,D,n);for(let F=0;F<r;++F)a.stroke();isNaN(s)||(D=o+(s%ss||ss))}z&&IB(a,e,D),h.selfJoin&&D-o>=ar&&E===0&&y!=="miter"&&MB(a,e,D),r||(M_(a,e,t,i,D,n),a.stroke())}class OB extends Nh{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.getProps(["x","y"],i),{angle:r,distance:o}=zM(n,{x:e,y:t}),{startAngle:s,endAngle:h,innerRadius:f,outerRadius:y,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),S=(this.options.spacing+this.options.borderWidth)/2,E=ya(x,h-s),z=iy(r,s,h)&&s!==h,D=E>=ss||z,F=Ih(o,f+S,y+S);return D&&F}getCenterPoint(e){const{x:t,y:i,startAngle:n,endAngle:r,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:f}=this.options,y=(n+r)/2,x=(o+s+f+h)/2;return{x:t+Math.cos(y)*x,y:i+Math.sin(y)*x}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,n=(t.offset||0)/4,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>ss?Math.floor(i/ss):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*n,Math.sin(s)*n);const h=1-Math.sin(Math.min(ar,i||0)),f=n*h;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,DB(e,this,f,r,o),RB(e,this,f,r,o),e.restore()}}function yI(a,e,t=e){a.lineCap=ya(t.borderCapStyle,e.borderCapStyle),a.setLineDash(ya(t.borderDash,e.borderDash)),a.lineDashOffset=ya(t.borderDashOffset,e.borderDashOffset),a.lineJoin=ya(t.borderJoinStyle,e.borderJoinStyle),a.lineWidth=ya(t.borderWidth,e.borderWidth),a.strokeStyle=ya(t.borderColor,e.borderColor)}function zB(a,e,t){a.lineTo(t.x,t.y)}function FB(a){return a.stepped?Jz:a.tension||a.cubicInterpolationMode==="monotone"?Qz:zB}function _I(a,e,t={}){const i=a.length,{start:n=0,end:r=i-1}=t,{start:o,end:s}=e,h=Math.max(n,o),f=Math.min(r,s),y=n<o&&r<o||n>s&&r>s;return{count:i,start:h,loop:e.loop,ilen:f<h&&!y?i+f-h:f-h}}function NB(a,e,t,i){const{points:n,options:r}=e,{count:o,start:s,loop:h,ilen:f}=_I(n,t,i),y=FB(r);let{move:x=!0,reverse:S}=i||{},E,z,D;for(E=0;E<=f;++E)z=n[(s+(S?f-E:E))%o],!z.skip&&(x?(a.moveTo(z.x,z.y),x=!1):y(a,D,z,S,r.stepped),D=z);return h&&(z=n[(s+(S?f:0))%o],y(a,D,z,S,r.stepped)),!!h}function BB(a,e,t,i){const n=e.points,{count:r,start:o,ilen:s}=_I(n,t,i),{move:h=!0,reverse:f}=i||{};let y=0,x=0,S,E,z,D,F,U;const G=ee=>(o+(f?s-ee:ee))%r,Z=()=>{D!==F&&(a.lineTo(y,F),a.lineTo(y,D),a.lineTo(y,U))};for(h&&(E=n[G(0)],a.moveTo(E.x,E.y)),S=0;S<=s;++S){if(E=n[G(S)],E.skip)continue;const ee=E.x,ie=E.y,le=ee|0;le===z?(ie<D?D=ie:ie>F&&(F=ie),y=(x*y+ee)/++x):(Z(),a.lineTo(ee,ie),z=le,x=0,D=F=ie),U=ie}Z()}function Xb(a){const e=a.options,t=e.borderDash&&e.borderDash.length;return!a._decimated&&!a._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?BB:NB}function jB(a){return a.stepped?PF:a.tension||a.cubicInterpolationMode==="monotone"?LF:lf}function VB(a,e,t,i){let n=e._path;n||(n=e._path=new Path2D,e.path(n,t,i)&&n.closePath()),yI(a,e.options),a.stroke(n)}function HB(a,e,t,i){const{segments:n,options:r}=e,o=Xb(e);for(const s of n)yI(a,r,s.style),a.beginPath(),o(a,e,s,{start:t,end:t+i-1})&&a.closePath(),a.stroke()}const UB=typeof Path2D=="function";function $B(a,e,t,i){UB&&!e.options.segment?VB(a,e,t,i):HB(a,e,t,i)}class tx extends Nh{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;SF(this._points,i,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=NF(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,n=e[t],r=this.points,o=iI(this,{property:t,start:n,end:n});if(!o.length)return;const s=[],h=jB(i);let f,y;for(f=0,y=o.length;f<y;++f){const{start:x,end:S}=o[f],E=r[x],z=r[S];if(E===z){s.push(E);continue}const D=Math.abs((n-E[t])/(z[t]-E[t])),F=h(E,z,D,i.stepped);F[t]=e[t],s.push(F)}return s.length===1?s[0]:s}pathSegment(e,t,i){return Xb(this)(e,this,t,i)}path(e,t,i){const n=this.segments,r=Xb(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const s of n)o&=r(e,this,s,{start:t,end:t+i-1});return!!o}draw(e,t,i,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),$B(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function cA(a,e,t,i){const n=a.options,{[t]:r}=a.getProps([t],i);return Math.abs(e-r)<n.radius+n.hitRadius}class GB extends Nh{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(e-r,2)+Math.pow(t-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return cA(this,e,"x",t)}inYRange(e,t){return cA(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!Lh(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,$b(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function xI(a,e){const{x:t,y:i,base:n,width:r,height:o}=a.getProps(["x","y","base","width","height"],e);let s,h,f,y,x;return a.horizontal?(x=o/2,s=Math.min(t,n),h=Math.max(t,n),f=i-x,y=i+x):(x=r/2,s=t-x,h=t+x,f=Math.min(i,n),y=Math.max(i,n)),{left:s,top:f,right:h,bottom:y}}function ld(a,e,t,i){return a?0:bo(e,t,i)}function WB(a,e,t){const i=a.options.borderWidth,n=a.borderSkipped,r=GM(i);return{t:ld(n.top,r.top,0,t),r:ld(n.right,r.right,0,e),b:ld(n.bottom,r.bottom,0,t),l:ld(n.left,r.left,0,e)}}function XB(a,e,t){const{enableBorderRadius:i}=a.getProps(["enableBorderRadius"]),n=a.options.borderRadius,r=If(n),o=Math.min(e,t),s=a.borderSkipped,h=i||Ua(n);return{topLeft:ld(!h||s.top||s.left,r.topLeft,0,o),topRight:ld(!h||s.top||s.right,r.topRight,0,o),bottomLeft:ld(!h||s.bottom||s.left,r.bottomLeft,0,o),bottomRight:ld(!h||s.bottom||s.right,r.bottomRight,0,o)}}function YB(a){const e=xI(a),t=e.right-e.left,i=e.bottom-e.top,n=WB(a,t/2,i/2),r=XB(a,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+n.l,y:e.top+n.t,w:t-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function Vv(a,e,t,i){const n=e===null,r=t===null,s=a&&!(n&&r)&&xI(a,i);return s&&(n||Ih(e,s.left,s.right))&&(r||Ih(t,s.top,s.bottom))}function qB(a){return a.topLeft||a.topRight||a.bottomLeft||a.bottomRight}function ZB(a,e){a.rect(e.x,e.y,e.w,e.h)}function Hv(a,e,t={}){const i=a.x!==t.x?-e:0,n=a.y!==t.y?-e:0,r=(a.x+a.w!==t.x+t.w?e:0)-i,o=(a.y+a.h!==t.y+t.h?e:0)-n;return{x:a.x+i,y:a.y+n,w:a.w+r,h:a.h+o,radius:a.radius}}class KB extends Nh{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:n}}=this,{inner:r,outer:o}=YB(this),s=qB(o.radius)?ny:ZB;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),s(e,Hv(o,t,r)),e.clip(),s(e,Hv(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),s(e,Hv(r,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,i){return Vv(this,e,t,i)}inXRange(e,t){return Vv(this,e,null,t)}inYRange(e,t){return Vv(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+n)/2:t,y:r?i:(i+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var JB=Object.freeze({__proto__:null,ArcElement:OB,BarElement:KB,LineElement:tx,PointElement:GB});const Yb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],uA=Yb.map(a=>a.replace("rgb(","rgba(").replace(")",", 0.5)"));function vI(a){return Yb[a%Yb.length]}function bI(a){return uA[a%uA.length]}function QB(a,e){return a.borderColor=vI(e),a.backgroundColor=bI(e),++e}function e4(a,e){return a.backgroundColor=a.data.map(()=>vI(e++)),e}function t4(a,e){return a.backgroundColor=a.data.map(()=>bI(e++)),e}function i4(a){let e=0;return(t,i)=>{const n=a.getDatasetMeta(i).controller;n instanceof Aw?e=e4(t,e):n instanceof oI?e=t4(t,e):n&&(e=QB(t,e))}}function hA(a){let e;for(e in a)if(a[e].borderColor||a[e].backgroundColor)return!0;return!1}function n4(a){return a&&(a.borderColor||a.backgroundColor)}function a4(){return ps.borderColor!=="rgba(0,0,0,0.1)"||ps.backgroundColor!=="rgba(0,0,0,0.1)"}var r4={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(a,e,t){if(!t.enabled)return;const{data:{datasets:i},options:n}=a.config,{elements:r}=n,o=hA(i)||n4(n)||r&&hA(r)||a4();if(!t.forceOverride&&o)return;const s=i4(a);i.forEach(s)}};function s4(a,e,t,i,n){const r=n.samples||i;if(r>=t)return a.slice(e,e+t);const o=[],s=(t-2)/(r-2);let h=0;const f=e+t-1;let y=e,x,S,E,z,D;for(o[h++]=a[y],x=0;x<r-2;x++){let F=0,U=0,G;const Z=Math.floor((x+1)*s)+1+e,ee=Math.min(Math.floor((x+2)*s)+1,t)+e,ie=ee-Z;for(G=Z;G<ee;G++)F+=a[G].x,U+=a[G].y;F/=ie,U/=ie;const le=Math.floor(x*s)+1+e,J=Math.min(Math.floor((x+1)*s)+1,t)+e,{x:re,y:ae}=a[y];for(E=z=-1,G=le;G<J;G++)z=.5*Math.abs((re-F)*(a[G].y-ae)-(re-a[G].x)*(U-ae)),z>E&&(E=z,S=a[G],D=G);o[h++]=S,y=D}return o[h++]=a[f],o}function o4(a,e,t,i){let n=0,r=0,o,s,h,f,y,x,S,E,z,D;const F=[],U=e+t-1,G=a[e].x,ee=a[U].x-G;for(o=e;o<e+t;++o){s=a[o],h=(s.x-G)/ee*i,f=s.y;const ie=h|0;if(ie===y)f<z?(z=f,x=o):f>D&&(D=f,S=o),n=(r*n+s.x)/++r;else{const le=o-1;if(!ja(x)&&!ja(S)){const J=Math.min(x,S),re=Math.max(x,S);J!==E&&J!==le&&F.push({...a[J],x:n}),re!==E&&re!==le&&F.push({...a[re],x:n})}o>0&&le!==E&&F.push(a[le]),F.push(s),y=ie,r=0,z=D=f,x=S=E=o}}return F}function wI(a){if(a._decimated){const e=a._data;delete a._decimated,delete a._data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function dA(a){a.data.datasets.forEach(e=>{wI(e)})}function l4(a,e){const t=e.length;let i=0,n;const{iScale:r}=a,{min:o,max:s,minDefined:h,maxDefined:f}=r.getUserBounds();return h&&(i=bo(Ph(e,r.axis,o).lo,0,t-1)),f?n=bo(Ph(e,r.axis,s).hi+1,i,t)-i:n=t-i,{start:i,count:n}}var c4={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(a,e,t)=>{if(!t.enabled){dA(a);return}const i=a.width;a.data.datasets.forEach((n,r)=>{const{_data:o,indexAxis:s}=n,h=a.getDatasetMeta(r),f=o||n.data;if(xm([s,a.options.indexAxis])==="y"||!h.controller.supportsDecimation)return;const y=a.scales[h.xAxisID];if(y.type!=="linear"&&y.type!=="time"||a.options.parsing)return;let{start:x,count:S}=l4(h,f);const E=t.threshold||4*i;if(S<=E){wI(n);return}ja(o)&&(n._data=f,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(D){this._data=D}}));let z;switch(t.algorithm){case"lttb":z=s4(f,x,S,i,t);break;case"min-max":z=o4(f,x,S,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}n._decimated=z})},destroy(a){dA(a)}};function u4(a,e,t){const i=a.segments,n=a.points,r=e.points,o=[];for(const s of i){let{start:h,end:f}=s;f=ix(h,f,n);const y=qb(t,n[h],n[f],s.loop);if(!e.segments){o.push({source:s,target:y,start:n[h],end:n[f]});continue}const x=iI(e,y);for(const S of x){const E=qb(t,r[S.start],r[S.end],S.loop),z=tI(s,n,E);for(const D of z)o.push({source:D,target:S,start:{[t]:fA(y,E,"start",Math.max)},end:{[t]:fA(y,E,"end",Math.min)}})}}return o}function qb(a,e,t,i){if(i)return;let n=e[a],r=t[a];return a==="angle"&&(n=Xo(n),r=Xo(r)),{property:a,start:n,end:r}}function h4(a,e){const{x:t=null,y:i=null}=a||{},n=e.points,r=[];return e.segments.forEach(({start:o,end:s})=>{s=ix(o,s,n);const h=n[o],f=n[s];i!==null?(r.push({x:h.x,y:i}),r.push({x:f.x,y:i})):t!==null&&(r.push({x:t,y:h.y}),r.push({x:t,y:f.y}))}),r}function ix(a,e,t){for(;e>a;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function fA(a,e,t,i){return a&&e?i(a[t],e[t]):a?a[t]:e?e[t]:0}function SI(a,e){let t=[],i=!1;return fs(a)?(i=!0,t=a):t=h4(a,e),t.length?new tx({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function pA(a){return a&&a.fill!==!1}function d4(a,e,t){let n=a[e].fill;const r=[e];let o;if(!t)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!Ls(n))return n;if(o=a[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function f4(a,e,t){const i=y4(a);if(Ua(i))return isNaN(i.value)?!1:i;let n=parseFloat(i);return Ls(n)&&Math.floor(n)===n?p4(i[0],e,n,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function p4(a,e,t,i){return(a==="-"||a==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function g4(a,e){let t=null;return a==="start"?t=e.bottom:a==="end"?t=e.top:Ua(a)?t=e.getPixelForValue(a.value):e.getBasePixel&&(t=e.getBasePixel()),t}function m4(a,e,t){let i;return a==="start"?i=t:a==="end"?i=e.options.reverse?e.min:e.max:Ua(a)?i=a.value:i=e.getBaseValue(),i}function y4(a){const e=a.options,t=e.fill;let i=ya(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function _4(a){const{scale:e,index:t,line:i}=a,n=[],r=i.segments,o=i.points,s=x4(e,t);s.push(SI({x:null,y:e.bottom},i));for(let h=0;h<r.length;h++){const f=r[h];for(let y=f.start;y<=f.end;y++)v4(n,o[y],s)}return new tx({points:n,options:{}})}function x4(a,e){const t=[],i=a.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const r=i[n];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function v4(a,e,t){const i=[];for(let n=0;n<t.length;n++){const r=t[n],{first:o,last:s,point:h}=b4(r,e,"x");if(!(!h||o&&s)){if(o)i.unshift(h);else if(a.push(h),!s)break}}a.push(...i)}function b4(a,e,t){const i=a.interpolate(e,t);if(!i)return{};const n=i[t],r=a.segments,o=a.points;let s=!1,h=!1;for(let f=0;f<r.length;f++){const y=r[f],x=o[y.start][t],S=o[y.end][t];if(Ih(n,x,S)){s=n===x,h=n===S;break}}return{first:s,last:h,point:i}}class kI{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:n,y:r,radius:o}=this;return t=t||{start:0,end:ss},e.arc(n,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:n}=this,r=e.angle;return{x:t+Math.cos(r)*n,y:i+Math.sin(r)*n,angle:r}}}function w4(a){const{chart:e,fill:t,line:i}=a;if(Ls(t))return S4(e,t);if(t==="stack")return _4(a);if(t==="shape")return!0;const n=k4(a);return n instanceof kI?n:SI(n,i)}function S4(a,e){const t=a.getDatasetMeta(e);return t&&a.isDatasetVisible(e)?t.dataset:null}function k4(a){return(a.scale||{}).getPointPositionForValue?A4(a):C4(a)}function C4(a){const{scale:e={},fill:t}=a,i=g4(t,e);if(Ls(i)){const n=e.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}function A4(a){const{scale:e,fill:t}=a,i=e.options,n=e.getLabels().length,r=i.reverse?e.max:e.min,o=m4(t,e,r),s=[];if(i.grid.circular){const h=e.getPointPositionForValue(0,r);return new kI({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(o)})}for(let h=0;h<n;++h)s.push(e.getPointPositionForValue(h,o));return s}function Uv(a,e,t){const i=w4(e),{chart:n,index:r,line:o,scale:s,axis:h}=e,f=o.options,y=f.fill,x=f.backgroundColor,{above:S=x,below:E=x}=y||{},z=n.getDatasetMeta(r),D=nI(n,z);i&&o.points.length&&(K_(a,t),T4(a,{line:o,target:i,above:S,below:E,area:t,scale:s,axis:h,clip:D}),J_(a))}function T4(a,e){const{line:t,target:i,above:n,below:r,area:o,scale:s,clip:h}=e,f=t._loop?"angle":e.axis;a.save();let y=r;r!==n&&(f==="x"?(gA(a,i,o.top),$v(a,{line:t,target:i,color:n,scale:s,property:f,clip:h}),a.restore(),a.save(),gA(a,i,o.bottom)):f==="y"&&(mA(a,i,o.left),$v(a,{line:t,target:i,color:r,scale:s,property:f,clip:h}),a.restore(),a.save(),mA(a,i,o.right),y=n)),$v(a,{line:t,target:i,color:y,scale:s,property:f,clip:h}),a.restore()}function gA(a,e,t){const{segments:i,points:n}=e;let r=!0,o=!1;a.beginPath();for(const s of i){const{start:h,end:f}=s,y=n[h],x=n[ix(h,f,n)];r?(a.moveTo(y.x,y.y),r=!1):(a.lineTo(y.x,t),a.lineTo(y.x,y.y)),o=!!e.pathSegment(a,s,{move:o}),o?a.closePath():a.lineTo(x.x,t)}a.lineTo(e.first().x,t),a.closePath(),a.clip()}function mA(a,e,t){const{segments:i,points:n}=e;let r=!0,o=!1;a.beginPath();for(const s of i){const{start:h,end:f}=s,y=n[h],x=n[ix(h,f,n)];r?(a.moveTo(y.x,y.y),r=!1):(a.lineTo(t,y.y),a.lineTo(y.x,y.y)),o=!!e.pathSegment(a,s,{move:o}),o?a.closePath():a.lineTo(t,x.y)}a.lineTo(t,e.first().y),a.closePath(),a.clip()}function $v(a,e){const{line:t,target:i,property:n,color:r,scale:o,clip:s}=e,h=u4(t,i,n);for(const{source:f,target:y,start:x,end:S}of h){const{style:{backgroundColor:E=r}={}}=f,z=i!==!0;a.save(),a.fillStyle=E,E4(a,o,s,z&&qb(n,x,S)),a.beginPath();const D=!!t.pathSegment(a,f);let F;if(z){D?a.closePath():yA(a,i,S,n);const U=!!i.pathSegment(a,y,{move:D,reverse:!0});F=D&&U,F||yA(a,i,x,n)}a.closePath(),a.fill(F?"evenodd":"nonzero"),a.restore()}}function E4(a,e,t,i){const n=e.chart.chartArea,{property:r,start:o,end:s}=i||{};if(r==="x"||r==="y"){let h,f,y,x;r==="x"?(h=o,f=n.top,y=s,x=n.bottom):(h=n.left,f=o,y=n.right,x=s),a.beginPath(),t&&(h=Math.max(h,t.left),y=Math.min(y,t.right),f=Math.max(f,t.top),x=Math.min(x,t.bottom)),a.rect(h,f,y-h,x-f),a.clip()}}function yA(a,e,t,i){const n=e.interpolate(t,i);n&&a.lineTo(n.x,n.y)}var M4={id:"filler",afterDatasetsUpdate(a,e,t){const i=(a.data.datasets||[]).length,n=[];let r,o,s,h;for(o=0;o<i;++o)r=a.getDatasetMeta(o),s=r.dataset,h=null,s&&s.options&&s instanceof tx&&(h={visible:a.isDatasetVisible(o),index:o,fill:f4(s,o,i),chart:a,axis:r.controller.options.indexAxis,scale:r.vScale,line:s}),r.$filler=h,n.push(h);for(o=0;o<i;++o)h=n[o],!(!h||h.fill===!1)&&(h.fill=d4(n,o,t.propagate))},beforeDraw(a,e,t){const i=t.drawTime==="beforeDraw",n=a.getSortedVisibleDatasetMetas(),r=a.chartArea;for(let o=n.length-1;o>=0;--o){const s=n[o].$filler;s&&(s.line.updateControlPoints(r,s.axis),i&&s.fill&&Uv(a.ctx,s,r))}},beforeDatasetsDraw(a,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=a.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const r=i[n].$filler;pA(r)&&Uv(a.ctx,r,a.chartArea)}},beforeDatasetDraw(a,e,t){const i=e.meta.$filler;!pA(i)||t.drawTime!=="beforeDatasetDraw"||Uv(a.ctx,i,a.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _A=(a,e)=>{let{boxHeight:t=e,boxWidth:i=e}=a;return a.usePointStyle&&(t=Math.min(t,e),i=a.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},I4=(a,e)=>a!==null&&e!==null&&a.datasetIndex===e.datasetIndex&&a.index===e.index;class xA extends Nh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Zr(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,n)=>e.sort(i,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,n=so(i.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:h}=_A(i,r);let f,y;t.font=n.string,this.isHorizontal()?(f=this.maxWidth,y=this._fitRows(o,r,s,h)+10):(y=this.maxHeight,f=this._fitCols(o,n,s,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(y,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,n){const{ctx:r,maxWidth:o,options:{labels:{padding:s}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],y=n+s;let x=e;r.textAlign="left",r.textBaseline="middle";let S=-1,E=-y;return this.legendItems.forEach((z,D)=>{const F=i+t/2+r.measureText(z.text).width;(D===0||f[f.length-1]+F+2*s>o)&&(x+=y,f[f.length-(D>0?0:1)]=0,E+=y,S++),h[D]={left:0,top:E,row:S,width:F,height:n},f[f.length-1]+=F+s}),x}_fitCols(e,t,i,n){const{ctx:r,maxHeight:o,options:{labels:{padding:s}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],y=o-e;let x=s,S=0,E=0,z=0,D=0;return this.legendItems.forEach((F,U)=>{const{itemWidth:G,itemHeight:Z}=P4(i,t,r,F,n);U>0&&E+Z+2*s>y&&(x+=S+s,f.push({width:S,height:E}),z+=S+s,D++,S=E=0),h[U]={left:z,top:E,col:D,width:G,height:Z},S=Math.max(S,G),E+=Z+s}),x+=S,f.push({width:S,height:E}),x}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:n},rtl:r}}=this,o=Jp(r,this.left,this.width);if(this.isHorizontal()){let s=0,h=Go(i,this.left+n,this.right-this.lineWidths[s]);for(const f of t)s!==f.row&&(s=f.row,h=Go(i,this.left+n,this.right-this.lineWidths[s])),f.top+=this.top+e+n,f.left=o.leftForLtr(o.x(h),f.width),h+=f.width+n}else{let s=0,h=Go(i,this.top+e+n,this.bottom-this.columnSizes[s].height);for(const f of t)f.col!==s&&(s=f.col,h=Go(i,this.top+e+n,this.bottom-this.columnSizes[s].height)),f.top=h,f.left+=this.left+n,f.left=o.leftForLtr(o.x(f.left),f.width),h+=f.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;K_(e,this),this._draw(),J_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:n}=this,{align:r,labels:o}=e,s=ps.color,h=Jp(e.rtl,this.left,this.width),f=so(o.font),{padding:y}=o,x=f.size,S=x/2;let E;this.drawTitle(),n.textAlign=h.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=f.string;const{boxWidth:z,boxHeight:D,itemHeight:F}=_A(o,x),U=function(le,J,re){if(isNaN(z)||z<=0||isNaN(D)||D<0)return;n.save();const ae=ya(re.lineWidth,1);if(n.fillStyle=ya(re.fillStyle,s),n.lineCap=ya(re.lineCap,"butt"),n.lineDashOffset=ya(re.lineDashOffset,0),n.lineJoin=ya(re.lineJoin,"miter"),n.lineWidth=ae,n.strokeStyle=ya(re.strokeStyle,s),n.setLineDash(ya(re.lineDash,[])),o.usePointStyle){const me={radius:D*Math.SQRT2/2,pointStyle:re.pointStyle,rotation:re.rotation,borderWidth:ae},Te=h.xPlus(le,z/2),ye=J+S;$M(n,me,Te,ye,o.pointStyleWidth&&z)}else{const me=J+Math.max((x-D)/2,0),Te=h.leftForLtr(le,z),ye=If(re.borderRadius);n.beginPath(),Object.values(ye).some(Re=>Re!==0)?ny(n,{x:Te,y:me,w:z,h:D,radius:ye}):n.rect(Te,me,z,D),n.fill(),ae!==0&&n.stroke()}n.restore()},G=function(le,J,re){Nf(n,re.text,le,J+F/2,f,{strikethrough:re.hidden,textAlign:h.textAlign(re.textAlign)})},Z=this.isHorizontal(),ee=this._computeTitleHeight();Z?E={x:Go(r,this.left+y,this.right-i[0]),y:this.top+y+ee,line:0}:E={x:this.left+y,y:Go(r,this.top+ee+y,this.bottom-t[0].height),line:0},JM(this.ctx,e.textDirection);const ie=F+y;this.legendItems.forEach((le,J)=>{n.strokeStyle=le.fontColor,n.fillStyle=le.fontColor;const re=n.measureText(le.text).width,ae=h.textAlign(le.textAlign||(le.textAlign=o.textAlign)),me=z+S+re;let Te=E.x,ye=E.y;h.setWidth(this.width),Z?J>0&&Te+me+y>this.right&&(ye=E.y+=ie,E.line++,Te=E.x=Go(r,this.left+y,this.right-i[E.line])):J>0&&ye+ie>this.bottom&&(Te=E.x=Te+t[E.line].width+y,E.line++,ye=E.y=Go(r,this.top+ee+y,this.bottom-t[E.line].height));const Re=h.x(Te);if(U(Re,ye,le),Te=Vz(ae,Te+z+S,Z?Te+me:this.right,e.rtl),G(h.x(Te),ye,le),Z)E.x+=me+y;else if(typeof le.text!="string"){const We=f.lineHeight;E.y+=CI(le,We)+y}else E.y+=ie}),QM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=so(t.font),n=Jo(t.padding);if(!t.display)return;const r=Jp(e.rtl,this.left,this.width),o=this.ctx,s=t.position,h=i.size/2,f=n.top+h;let y,x=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),y=this.top+f,x=Go(e.align,x,this.right-S);else{const z=this.columnSizes.reduce((D,F)=>Math.max(D,F.height),0);y=f+Go(e.align,this.top,this.bottom-z-e.labels.padding-this._computeTitleHeight())}const E=Go(s,x,x+S);o.textAlign=r.textAlign(_w(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Nf(o,t.text,E,y,i)}_computeTitleHeight(){const e=this.options.title,t=so(e.font),i=Jo(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,n,r;if(Ih(e,this.left,this.right)&&Ih(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(n=r[i],Ih(e,n.left,n.left+n.width)&&Ih(t,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!R4(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,r=I4(n,i);n&&!r&&Zr(t.onLeave,[e,n,this],this),this._hoveredItem=i,i&&!r&&Zr(t.onHover,[e,i,this],this)}else i&&Zr(t.onClick,[e,i,this],this)}}function P4(a,e,t,i,n){const r=L4(i,a,e,t),o=D4(n,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function L4(a,e,t,i){let n=a.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(n).width}function D4(a,e,t){let i=a;return typeof e.text!="string"&&(i=CI(e,t)),i}function CI(a,e){const t=a.text?a.text.length:0;return e*t}function R4(a,e){return!!((a==="mousemove"||a==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(a==="click"||a==="mouseup"))}var O4={id:"legend",_element:xA,start(a,e,t){const i=a.legend=new xA({ctx:a.ctx,options:t,chart:a});Zo.configure(a,i,t),Zo.addBox(a,i)},stop(a){Zo.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,e,t){const i=a.legend;Zo.configure(a,i,t),i.options=t},afterUpdate(a){const e=a.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(a,e){e.replay||a.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,e,t){const i=e.datasetIndex,n=t.chart;n.isDatasetVisible(i)?(n.hide(i),e.hidden=!0):(n.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){const e=a.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:n,color:r,useBorderRadius:o,borderRadius:s}}=a.legend.options;return a._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(t?0:void 0),y=Jo(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:r,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:n||f.textAlign,borderRadius:o&&(s||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};class Mw extends Nh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const n=fs(i.text)?i.text.length:1;this._padding=Jo(i.padding);const r=n*so(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:n,right:r,options:o}=this,s=o.align;let h=0,f,y,x;return this.isHorizontal()?(y=Go(s,i,r),x=t+e,f=r-i):(o.position==="left"?(y=i+e,x=Go(s,n,t),h=ar*-.5):(y=r-e,x=Go(s,t,n),h=ar*.5),f=n-t),{titleX:y,titleY:x,maxWidth:f,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=so(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:s,maxWidth:h,rotation:f}=this._drawArgs(r);Nf(e,t.text,0,0,i,{color:t.color,maxWidth:h,rotation:f,textAlign:_w(t.align),textBaseline:"middle",translation:[o,s]})}}function z4(a,e){const t=new Mw({ctx:a.ctx,options:e,chart:a});Zo.configure(a,t,e),Zo.addBox(a,t),a.titleBlock=t}var F4={id:"title",_element:Mw,start(a,e,t){z4(a,t)},stop(a){const e=a.titleBlock;Zo.removeBox(a,e),delete a.titleBlock},beforeUpdate(a,e,t){const i=a.titleBlock;Zo.configure(a,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const D0=new WeakMap;var N4={id:"subtitle",start(a,e,t){const i=new Mw({ctx:a.ctx,options:t,chart:a});Zo.configure(a,i,t),Zo.addBox(a,i),D0.set(a,i)},stop(a){Zo.removeBox(a,D0.get(a)),D0.delete(a)},beforeUpdate(a,e,t){const i=D0.get(a);Zo.configure(a,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bm={average(a){if(!a.length)return!1;let e,t,i=new Set,n=0,r=0;for(e=0,t=a.length;e<t;++e){const s=a[e].element;if(s&&s.hasValue()){const h=s.tooltipPosition();i.add(h.x),n+=h.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((s,h)=>s+h)/i.size,y:n/r}},nearest(a,e){if(!a.length)return!1;let t=e.x,i=e.y,n=Number.POSITIVE_INFINITY,r,o,s;for(r=0,o=a.length;r<o;++r){const h=a[r].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),y=Hb(e,f);y<n&&(n=y,s=h)}}if(s){const h=s.tooltipPosition();t=h.x,i=h.y}return{x:t,y:i}}};function Du(a,e){return e&&(fs(e)?Array.prototype.push.apply(a,e):a.push(e)),a}function vh(a){return(typeof a=="string"||a instanceof String)&&a.indexOf(`
`)>-1?a.split(`
`):a}function B4(a,e){const{element:t,datasetIndex:i,index:n}=e,r=a.getDatasetMeta(i).controller,{label:o,value:s}=r.getLabelAndValue(n);return{chart:a,label:o,parsed:r.getParsed(n),raw:a.data.datasets[i].data[n],formattedValue:s,dataset:r.getDataset(),dataIndex:n,datasetIndex:i,element:t}}function vA(a,e){const t=a.chart.ctx,{body:i,footer:n,title:r}=a,{boxWidth:o,boxHeight:s}=e,h=so(e.bodyFont),f=so(e.titleFont),y=so(e.footerFont),x=r.length,S=n.length,E=i.length,z=Jo(e.padding);let D=z.height,F=0,U=i.reduce((ee,ie)=>ee+ie.before.length+ie.lines.length+ie.after.length,0);if(U+=a.beforeBody.length+a.afterBody.length,x&&(D+=x*f.lineHeight+(x-1)*e.titleSpacing+e.titleMarginBottom),U){const ee=e.displayColors?Math.max(s,h.lineHeight):h.lineHeight;D+=E*ee+(U-E)*h.lineHeight+(U-1)*e.bodySpacing}S&&(D+=e.footerMarginTop+S*y.lineHeight+(S-1)*e.footerSpacing);let G=0;const Z=function(ee){F=Math.max(F,t.measureText(ee).width+G)};return t.save(),t.font=f.string,Tr(a.title,Z),t.font=h.string,Tr(a.beforeBody.concat(a.afterBody),Z),G=e.displayColors?o+2+e.boxPadding:0,Tr(i,ee=>{Tr(ee.before,Z),Tr(ee.lines,Z),Tr(ee.after,Z)}),G=0,t.font=y.string,Tr(a.footer,Z),t.restore(),F+=z.width,{width:F,height:D}}function j4(a,e){const{y:t,height:i}=e;return t<i/2?"top":t>a.height-i/2?"bottom":"center"}function V4(a,e,t,i){const{x:n,width:r}=i,o=t.caretSize+t.caretPadding;if(a==="left"&&n+r+o>e.width||a==="right"&&n-r-o<0)return!0}function H4(a,e,t,i){const{x:n,width:r}=t,{width:o,chartArea:{left:s,right:h}}=a;let f="center";return i==="center"?f=n<=(s+h)/2?"left":"right":n<=r/2?f="left":n>=o-r/2&&(f="right"),V4(f,a,e,t)&&(f="center"),f}function bA(a,e,t){const i=t.yAlign||e.yAlign||j4(a,t);return{xAlign:t.xAlign||e.xAlign||H4(a,e,t,i),yAlign:i}}function U4(a,e){let{x:t,width:i}=a;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function $4(a,e,t){let{y:i,height:n}=a;return e==="top"?i+=t:e==="bottom"?i-=n+t:i-=n/2,i}function wA(a,e,t,i){const{caretSize:n,caretPadding:r,cornerRadius:o}=a,{xAlign:s,yAlign:h}=t,f=n+r,{topLeft:y,topRight:x,bottomLeft:S,bottomRight:E}=If(o);let z=U4(e,s);const D=$4(e,h,f);return h==="center"?s==="left"?z+=f:s==="right"&&(z-=f):s==="left"?z-=Math.max(y,S)+n:s==="right"&&(z+=Math.max(x,E)+n),{x:bo(z,0,i.width-e.width),y:bo(D,0,i.height-e.height)}}function R0(a,e,t){const i=Jo(t.padding);return e==="center"?a.x+a.width/2:e==="right"?a.x+a.width-i.right:a.x+i.left}function SA(a){return Du([],vh(a))}function G4(a,e,t){return Cd(a,{tooltip:e,tooltipItems:t,type:"tooltip"})}function kA(a,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?a.override(t):a}const AI={beforeTitle:yh,title(a){if(a.length>0){const e=a[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:yh,beforeBody:yh,beforeLabel:yh,label(a){if(this&&this.options&&this.options.mode==="dataset")return a.label+": "+a.formattedValue||a.formattedValue;let e=a.dataset.label||"";e&&(e+=": ");const t=a.formattedValue;return ja(t)||(e+=t),e},labelColor(a){const t=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){const t=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:yh,afterBody:yh,beforeFooter:yh,footer:yh,afterFooter:yh};function El(a,e,t,i){const n=a[e].call(t,i);return typeof n>"u"?AI[e].call(t,i):n}class CA extends Nh{static positioners=bm;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,r=new aI(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=G4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,n=El(i,"beforeTitle",this,e),r=El(i,"title",this,e),o=El(i,"afterTitle",this,e);let s=[];return s=Du(s,vh(n)),s=Du(s,vh(r)),s=Du(s,vh(o)),s}getBeforeBody(e,t){return SA(El(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,n=[];return Tr(e,r=>{const o={before:[],lines:[],after:[]},s=kA(i,r);Du(o.before,vh(El(s,"beforeLabel",this,r))),Du(o.lines,El(s,"label",this,r)),Du(o.after,vh(El(s,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(e,t){return SA(El(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,n=El(i,"beforeFooter",this,e),r=El(i,"footer",this,e),o=El(i,"afterFooter",this,e);let s=[];return s=Du(s,vh(n)),s=Du(s,vh(r)),s=Du(s,vh(o)),s}_createItems(e){const t=this._active,i=this.chart.data,n=[],r=[],o=[];let s=[],h,f;for(h=0,f=t.length;h<f;++h)s.push(B4(this.chart,t[h]));return e.filter&&(s=s.filter((y,x,S)=>e.filter(y,x,S,i))),e.itemSort&&(s=s.sort((y,x)=>e.itemSort(y,x,i))),Tr(s,y=>{const x=kA(e.callbacks,y);n.push(El(x,"labelColor",this,y)),r.push(El(x,"labelPointStyle",this,y)),o.push(El(x,"labelTextColor",this,y))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=s,s}update(e,t){const i=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const s=bm[i.position].call(this,n,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const h=this._size=vA(this,i),f=Object.assign({},s,h),y=bA(this.chart,i,f),x=wA(i,f,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,r={opacity:1,x:x.x,y:x.y,width:h.width,height:h.height,caretX:s.x,caretY:s.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,n){const r=this.getCaretPosition(e,i,n);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:s}=i,{topLeft:h,topRight:f,bottomLeft:y,bottomRight:x}=If(s),{x:S,y:E}=e,{width:z,height:D}=t;let F,U,G,Z,ee,ie;return r==="center"?(ee=E+D/2,n==="left"?(F=S,U=F-o,Z=ee+o,ie=ee-o):(F=S+z,U=F+o,Z=ee-o,ie=ee+o),G=F):(n==="left"?U=S+Math.max(h,y)+o:n==="right"?U=S+z-Math.max(f,x)-o:U=this.caretX,r==="top"?(Z=E,ee=Z-o,F=U-o,G=U+o):(Z=E+D,ee=Z+o,F=U+o,G=U-o),ie=Z),{x1:F,x2:U,x3:G,y1:Z,y2:ee,y3:ie}}drawTitle(e,t,i){const n=this.title,r=n.length;let o,s,h;if(r){const f=Jp(i.rtl,this.x,this.width);for(e.x=R0(this,i.titleAlign,i),t.textAlign=f.textAlign(i.titleAlign),t.textBaseline="middle",o=so(i.titleFont),s=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,h=0;h<r;++h)t.fillText(n[h],f.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s,h+1===r&&(e.y+=i.titleMarginBottom-s)}}_drawColorBox(e,t,i,n,r){const o=this.labelColors[i],s=this.labelPointStyles[i],{boxHeight:h,boxWidth:f}=r,y=so(r.bodyFont),x=R0(this,"left",r),S=n.x(x),E=h<y.lineHeight?(y.lineHeight-h)/2:0,z=t.y+E;if(r.usePointStyle){const D={radius:Math.min(f,h)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},F=n.leftForLtr(S,f)+f/2,U=z+h/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,$b(e,D,F,U),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,$b(e,D,F,U)}else{e.lineWidth=Ua(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const D=n.leftForLtr(S,f),F=n.leftForLtr(n.xPlus(S,1),f-2),U=If(o.borderRadius);Object.values(U).some(G=>G!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,ny(e,{x:D,y:z,w:f,h,radius:U}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ny(e,{x:F,y:z+1,w:f-2,h:h-2,radius:U}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(D,z,f,h),e.strokeRect(D,z,f,h),e.fillStyle=o.backgroundColor,e.fillRect(F,z+1,f-2,h-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:s,boxHeight:h,boxWidth:f,boxPadding:y}=i,x=so(i.bodyFont);let S=x.lineHeight,E=0;const z=Jp(i.rtl,this.x,this.width),D=function(re){t.fillText(re,z.x(e.x+E),e.y+S/2),e.y+=S+r},F=z.textAlign(o);let U,G,Z,ee,ie,le,J;for(t.textAlign=o,t.textBaseline="middle",t.font=x.string,e.x=R0(this,F,i),t.fillStyle=i.bodyColor,Tr(this.beforeBody,D),E=s&&F!=="right"?o==="center"?f/2+y:f+2+y:0,ee=0,le=n.length;ee<le;++ee){for(U=n[ee],G=this.labelTextColors[ee],t.fillStyle=G,Tr(U.before,D),Z=U.lines,s&&Z.length&&(this._drawColorBox(t,e,ee,z,i),S=Math.max(x.lineHeight,h)),ie=0,J=Z.length;ie<J;++ie)D(Z[ie]),S=x.lineHeight;Tr(U.after,D)}E=0,S=x.lineHeight,Tr(this.afterBody,D),e.y-=r}drawFooter(e,t,i){const n=this.footer,r=n.length;let o,s;if(r){const h=Jp(i.rtl,this.x,this.width);for(e.x=R0(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=h.textAlign(i.footerAlign),t.textBaseline="middle",o=so(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,s=0;s<r;++s)t.fillText(n[s],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,n){const{xAlign:r,yAlign:o}=this,{x:s,y:h}=e,{width:f,height:y}=i,{topLeft:x,topRight:S,bottomLeft:E,bottomRight:z}=If(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(s+x,h),o==="top"&&this.drawCaret(e,t,i,n),t.lineTo(s+f-S,h),t.quadraticCurveTo(s+f,h,s+f,h+S),o==="center"&&r==="right"&&this.drawCaret(e,t,i,n),t.lineTo(s+f,h+y-z),t.quadraticCurveTo(s+f,h+y,s+f-z,h+y),o==="bottom"&&this.drawCaret(e,t,i,n),t.lineTo(s+E,h+y),t.quadraticCurveTo(s,h+y,s,h+y-E),o==="center"&&r==="left"&&this.drawCaret(e,t,i,n),t.lineTo(s,h+x),t.quadraticCurveTo(s,h,s+x,h),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,n=i&&i.x,r=i&&i.y;if(n||r){const o=bm[e.position].call(this,this._active,this._eventPosition);if(!o)return;const s=this._size=vA(this,e),h=Object.assign({},o,this._size),f=bA(t,e,h),y=wA(e,h,f,t);(n._to!==y.x||r._to!==y.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=s.width,this.height=s.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Jo(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,n,t),JM(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),QM(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,n=e.map(({datasetIndex:s,index:h})=>{const f=this.chart.getDatasetMeta(s);if(!f)throw new Error("Cannot find a dataset at index "+s);return{datasetIndex:s,element:f.data[h],index:h}}),r=!S_(i,n),o=this._positionChanged(n,t);(r||o)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),s=this._positionChanged(o,e),h=t||!S_(o,r)||s;return h&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,i,n){const r=this.options;if(e.type==="mouseout")return[];if(!n)return t.filter(s=>this.chart.data.datasets[s.datasetIndex]&&this.chart.getDatasetMeta(s.datasetIndex).controller.getParsed(s.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:n,options:r}=this,o=bm[r.position].call(this,e,t);return o!==!1&&(i!==o.x||n!==o.y)}}var W4={id:"tooltip",_element:CA,positioners:bm,afterInit(a,e,t){t&&(a.tooltip=new CA({chart:a,options:t}))},beforeUpdate(a,e,t){a.tooltip&&a.tooltip.initialize(t)},reset(a,e,t){a.tooltip&&a.tooltip.initialize(t)},afterDraw(a){const e=a.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(a.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",t)}},afterEvent(a,e){if(a.tooltip){const t=e.replay;a.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,e)=>e.bodyFont.size,boxWidth:(a,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:AI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>a!=="filter"&&a!=="itemSort"&&a!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},X4=Object.freeze({__proto__:null,Colors:r4,Decimation:c4,Filler:M4,Legend:O4,SubTitle:N4,Title:F4,Tooltip:W4});const Y4=(a,e,t,i)=>(typeof e=="string"?(t=a.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function q4(a,e,t,i){const n=a.indexOf(e);if(n===-1)return Y4(a,e,t,i);const r=a.lastIndexOf(e);return n!==r?t:n}const Z4=(a,e)=>a===null?null:bo(Math.round(a),0,e);function AA(a){const e=this.getLabels();return a>=0&&a<e.length?e[a]:a}class K4 extends $f{static id="category";static defaults={ticks:{callback:AA}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:n,label:r}of t)i[n]===r&&i.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ja(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:q4(i,e,ya(t,e),this._addedLabels),Z4(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,n=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)n.push({value:o});return n}getLabelForValue(e){return AA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function J4(a,e){const t=[],{bounds:n,step:r,min:o,max:s,precision:h,count:f,maxTicks:y,maxDigits:x,includeBounds:S}=a,E=r||1,z=y-1,{min:D,max:F}=e,U=!ja(o),G=!ja(s),Z=!ja(f),ee=(F-D)/(x+1);let ie=vC((F-D)/z/E)*E,le,J,re,ae;if(ie<1e-14&&!U&&!G)return[{value:D},{value:F}];ae=Math.ceil(F/ie)-Math.floor(D/ie),ae>z&&(ie=vC(ae*ie/z/E)*E),ja(h)||(le=Math.pow(10,h),ie=Math.ceil(ie*le)/le),n==="ticks"?(J=Math.floor(D/ie)*ie,re=Math.ceil(F/ie)*ie):(J=D,re=F),U&&G&&r&&Rz((s-o)/r,ie/1e3)?(ae=Math.round(Math.min((s-o)/ie,y)),ie=(s-o)/ae,J=o,re=s):Z?(J=U?o:J,re=G?s:re,ae=f-1,ie=(re-J)/ae):(ae=(re-J)/ie,Nm(ae,Math.round(ae),ie/1e3)?ae=Math.round(ae):ae=Math.ceil(ae));const me=Math.max(bC(ie),bC(J));le=Math.pow(10,ja(h)?me:h),J=Math.round(J*le)/le,re=Math.round(re*le)/le;let Te=0;for(U&&(S&&J!==o?(t.push({value:o}),J<o&&Te++,Nm(Math.round((J+Te*ie)*le)/le,o,TA(o,ee,a))&&Te++):J<o&&Te++);Te<ae;++Te){const ye=Math.round((J+Te*ie)*le)/le;if(G&&ye>s)break;t.push({value:ye})}return G&&S&&re!==s?t.length&&Nm(t[t.length-1].value,s,TA(s,ee,a))?t[t.length-1].value=s:t.push({value:s}):(!G||re===s)&&t.push({value:re}),t}function TA(a,e,{horizontal:t,minRotation:i}){const n=nu(i),r=(t?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+a).length;return Math.min(e/r,o)}class I_ extends $f{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ja(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:r}=this;const o=h=>n=t?n:h,s=h=>r=i?r:h;if(e){const h=Hu(n),f=Hu(r);h<0&&f<0?s(0):h>0&&f>0&&o(0)}if(n===r){let h=r===0?1:Math.abs(r*.05);s(r+h),e||o(n-h)}this.min=n,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=J4(n,r);return e.bounds==="ticks"&&OM(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-t)/Math.max(e.length-1,1)/2;t-=n,i+=n}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return xy(e,this.chart.options.locale,this.options.ticks.format)}}class Q4 extends I_{static id="linear";static defaults={ticks:{callback:Z_.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ls(e)?e:0,this.max=Ls(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=nu(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const ry=a=>Math.floor(sd(a)),ef=(a,e)=>Math.pow(10,ry(a)+e);function EA(a){return a/Math.pow(10,ry(a))===1}function MA(a,e,t){const i=Math.pow(10,t),n=Math.floor(a/i);return Math.ceil(e/i)-n}function e5(a,e){const t=e-a;let i=ry(t);for(;MA(a,e,i)>10;)i++;for(;MA(a,e,i)<10;)i--;return Math.min(i,ry(a))}function t5(a,{min:e,max:t}){e=tc(a.min,e);const i=[],n=ry(e);let r=e5(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const s=Math.pow(10,r),h=n>r?Math.pow(10,n):0,f=Math.round((e-h)*o)/o,y=Math.floor((e-h)/s/10)*s*10;let x=Math.floor((f-y)/Math.pow(10,r)),S=tc(a.min,Math.round((h+y+x*Math.pow(10,r))*o)/o);for(;S<t;)i.push({value:S,major:EA(S),significand:x}),x>=10?x=x<15?15:20:x++,x>=20&&(r++,x=2,o=r>=0?1:o),S=Math.round((h+y+x*Math.pow(10,r))*o)/o;const E=tc(a.max,S);return i.push({value:E,major:EA(E),significand:x}),i}class i5 extends $f{static id="logarithmic";static defaults={ticks:{callback:Z_.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=I_.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Ls(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ls(e)?Math.max(0,e):null,this.max=Ls(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ls(this._userMin)&&(this.min=e===ef(this.min,0)?ef(this.min,-1):ef(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,n=this.max;const r=s=>i=e?i:s,o=s=>n=t?n:s;i===n&&(i<=0?(r(1),o(10)):(r(ef(i,-1)),o(ef(n,1)))),i<=0&&r(ef(n,-1)),n<=0&&o(ef(i,1)),this.min=i,this.max=n}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=t5(t,this);return e.bounds==="ticks"&&OM(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":xy(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=sd(e),this._valueRange=sd(this.max)-sd(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(sd(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Zb(a){const e=a.ticks;if(e.display&&a.display){const t=Jo(e.backdropPadding);return ya(e.font&&e.font.size,ps.font.size)+t.height}return 0}function n5(a,e,t){return t=fs(t)?t:[t],{w:Kz(a,e.string,t),h:t.length*e.lineHeight}}function IA(a,e,t,i,n){return a===i||a===n?{start:e-t/2,end:e+t/2}:a<i||a>n?{start:e-t,end:e}:{start:e,end:e+t}}function a5(a){const e={l:a.left+a._padding.left,r:a.right-a._padding.right,t:a.top+a._padding.top,b:a.bottom-a._padding.bottom},t=Object.assign({},e),i=[],n=[],r=a._pointLabels.length,o=a.options.pointLabels,s=o.centerPointLabels?ar/r:0;for(let h=0;h<r;h++){const f=o.setContext(a.getPointLabelContext(h));n[h]=f.padding;const y=a.getPointPosition(h,a.drawingArea+n[h],s),x=so(f.font),S=n5(a.ctx,x,a._pointLabels[h]);i[h]=S;const E=Xo(a.getIndexAngle(h)+s),z=Math.round(mw(E)),D=IA(z,y.x,S.w,0,180),F=IA(z,y.y,S.h,90,270);r5(t,e,E,D,F)}a.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),a._pointLabelItems=l5(a,i,n)}function r5(a,e,t,i,n){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let s=0,h=0;i.start<e.l?(s=(e.l-i.start)/r,a.l=Math.min(a.l,e.l-s)):i.end>e.r&&(s=(i.end-e.r)/r,a.r=Math.max(a.r,e.r+s)),n.start<e.t?(h=(e.t-n.start)/o,a.t=Math.min(a.t,e.t-h)):n.end>e.b&&(h=(n.end-e.b)/o,a.b=Math.max(a.b,e.b+h))}function s5(a,e,t){const i=a.drawingArea,{extra:n,additionalAngle:r,padding:o,size:s}=t,h=a.getPointPosition(e,i+n+o,r),f=Math.round(mw(Xo(h.angle+Gs))),y=h5(h.y,s.h,f),x=c5(f),S=u5(h.x,s.w,x);return{visible:!0,x:h.x,y,textAlign:x,left:S,top:y,right:S+s.w,bottom:y+s.h}}function o5(a,e){if(!e)return!0;const{left:t,top:i,right:n,bottom:r}=a;return!(Lh({x:t,y:i},e)||Lh({x:t,y:r},e)||Lh({x:n,y:i},e)||Lh({x:n,y:r},e))}function l5(a,e,t){const i=[],n=a._pointLabels.length,r=a.options,{centerPointLabels:o,display:s}=r.pointLabels,h={extra:Zb(r)/2,additionalAngle:o?ar/n:0};let f;for(let y=0;y<n;y++){h.padding=t[y],h.size=e[y];const x=s5(a,y,h);i.push(x),s==="auto"&&(x.visible=o5(x,f),x.visible&&(f=x))}return i}function c5(a){return a===0||a===180?"center":a<180?"left":"right"}function u5(a,e,t){return t==="right"?a-=e:t==="center"&&(a-=e/2),a}function h5(a,e,t){return t===90||t===270?a-=e/2:(t>270||t<90)&&(a-=e),a}function d5(a,e,t){const{left:i,top:n,right:r,bottom:o}=t,{backdropColor:s}=e;if(!ja(s)){const h=If(e.borderRadius),f=Jo(e.backdropPadding);a.fillStyle=s;const y=i-f.left,x=n-f.top,S=r-i+f.width,E=o-n+f.height;Object.values(h).some(z=>z!==0)?(a.beginPath(),ny(a,{x:y,y:x,w:S,h:E,radius:h}),a.fill()):a.fillRect(y,x,S,E)}}function f5(a,e){const{ctx:t,options:{pointLabels:i}}=a;for(let n=e-1;n>=0;n--){const r=a._pointLabelItems[n];if(!r.visible)continue;const o=i.setContext(a.getPointLabelContext(n));d5(t,o,r);const s=so(o.font),{x:h,y:f,textAlign:y}=r;Nf(t,a._pointLabels[n],h,f+s.lineHeight/2,s,{color:o.color,textAlign:y,textBaseline:"middle"})}}function TI(a,e,t,i){const{ctx:n}=a;if(t)n.arc(a.xCenter,a.yCenter,e,0,ss);else{let r=a.getPointPosition(0,e);n.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=a.getPointPosition(o,e),n.lineTo(r.x,r.y)}}function p5(a,e,t,i,n){const r=a.ctx,o=e.circular,{color:s,lineWidth:h}=e;!o&&!i||!s||!h||t<0||(r.save(),r.strokeStyle=s,r.lineWidth=h,r.setLineDash(n.dash||[]),r.lineDashOffset=n.dashOffset,r.beginPath(),TI(a,t,o,i),r.closePath(),r.stroke(),r.restore())}function g5(a,e,t){return Cd(a,{label:t,index:e,type:"pointLabel"})}class m5 extends I_{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Z_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Jo(Zb(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ls(e)&&!isNaN(e)?e:0,this.max=Ls(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Zb(this.options))}generateTickLabels(e){I_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const n=Zr(this.options.pointLabels.callback,[t,i],this);return n||n===0?n:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?a5(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,n))}getIndexAngle(e){const t=ss/(this._pointLabels.length||1),i=this.options.startAngle||0;return Xo(e*t+nu(i))}getDistanceFromCenterForValue(e){if(ja(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(ja(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return g5(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const n=this.getIndexAngle(e)-Gs+i;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:n,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:n,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),TI(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:n,border:r}=t,o=this._pointLabels.length;let s,h,f;if(t.pointLabels.display&&f5(this,o),n.display&&this.ticks.forEach((y,x)=>{if(x!==0||x===0&&this.min<0){h=this.getDistanceFromCenterForValue(y.value);const S=this.getContext(x),E=n.setContext(S),z=r.setContext(S);p5(this,E,h,o,z)}}),i.display){for(e.save(),s=o-1;s>=0;s--){const y=i.setContext(this.getPointLabelContext(s)),{color:x,lineWidth:S}=y;!S||!x||(e.lineWidth=S,e.strokeStyle=x,e.setLineDash(y.borderDash),e.lineDashOffset=y.borderDashOffset,h=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),f=this.getPointPosition(s,h),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(f.x,f.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((s,h)=>{if(h===0&&this.min>=0&&!t.reverse)return;const f=i.setContext(this.getContext(h)),y=so(f.font);if(r=this.getDistanceFromCenterForValue(this.ticks[h].value),f.showLabelBackdrop){e.font=y.string,o=e.measureText(s.label).width,e.fillStyle=f.backdropColor;const x=Jo(f.backdropPadding);e.fillRect(-o/2-x.left,-r-y.size/2-x.top,o+x.width,y.size+x.height)}Nf(e,s.label,0,-r,y,{color:f.color,strokeColor:f.textStrokeColor,strokeWidth:f.textStrokeWidth})}),e.restore()}drawTitle(){}}const nx={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rl=Object.keys(nx);function PA(a,e){return a-e}function LA(a,e){if(ja(e))return null;const t=a._adapter,{parser:i,round:n,isoWeekday:r}=a._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Ls(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(n&&(o=n==="week"&&(lg(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,n)),+o)}function DA(a,e,t,i){const n=Rl.length;for(let r=Rl.indexOf(a);r<n-1;++r){const o=nx[Rl[r]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(s*o.size))<=i)return Rl[r]}return Rl[n-1]}function y5(a,e,t,i,n){for(let r=Rl.length-1;r>=Rl.indexOf(t);r--){const o=Rl[r];if(nx[o].common&&a._adapter.diff(n,i,o)>=e-1)return o}return Rl[t?Rl.indexOf(t):0]}function _5(a){for(let e=Rl.indexOf(a)+1,t=Rl.length;e<t;++e)if(nx[Rl[e]].common)return Rl[e]}function RA(a,e,t){if(!t)a[e]=!0;else if(t.length){const{lo:i,hi:n}=yw(t,e),r=t[i]>=e?t[i]:t[n];a[r]=!0}}function x5(a,e,t,i){const n=a._adapter,r=+n.startOf(e[0].value,i),o=e[e.length-1].value;let s,h;for(s=r;s<=o;s=+n.add(s,1,i))h=t[s],h>=0&&(e[h].major=!0);return e}function OA(a,e,t){const i=[],n={},r=e.length;let o,s;for(o=0;o<r;++o)s=e[o],n[s]=o,i.push({value:s,major:!1});return r===0||!t?i:x5(a,i,n,t)}class Kb extends $f{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),n=this._adapter=new vN._date(e.adapters.date);n.init(t),Fm(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:LA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:s}=this.getUserBounds();function h(f){!o&&!isNaN(f.min)&&(n=Math.min(n,f.min)),!s&&!isNaN(f.max)&&(r=Math.max(r,f.max))}(!o||!s)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),n=Ls(n)&&!isNaN(n)?n:+t.startOf(Date.now(),i),r=Ls(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,s=Nz(n,r,o);return this._unit=t.unit||(i.autoSkip?DA(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):y5(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:_5(this._unit),this.initOffsets(n),e.reverse&&s.reverse(),OA(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,n,r;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?t=1-n:t=(this.getDecimalForValue(e[1])-n)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=bo(t,0,o),i=bo(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,n=this.options,r=n.time,o=r.unit||DA(r.minUnit,t,i,this._getLabelCapacity(t)),s=ya(n.ticks.stepSize,1),h=o==="week"?r.isoWeekday:!1,f=lg(h)||h===!0,y={};let x=t,S,E;if(f&&(x=+e.startOf(x,"isoWeek",h)),x=+e.startOf(x,f?"day":o),e.diff(i,t,o)>1e5*s)throw new Error(t+" and "+i+" are too far apart with stepSize of "+s+" "+o);const z=n.ticks.source==="data"&&this.getDataTimestamps();for(S=x,E=0;S<i;S=+e.add(S,s,o),E++)RA(y,S,z);return(S===i||n.bounds==="ticks"||E===1)&&RA(y,S,z),Object.keys(y).sort(PA).map(D=>+D)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,o=t||n[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,n){const r=this.options,o=r.ticks.callback;if(o)return Zr(o,[e,t,i],this);const s=r.time.displayFormats,h=this._unit,f=this._majorUnit,y=h&&s[h],x=f&&s[f],S=i[t],E=f&&x&&S&&S.major;return this._adapter.format(e,n||(E?x:y))}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,n=nu(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(n),o=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:i*r+s*o,h:i*o+s*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,OA(this,[e],this._majorUnit),n),o=this._getLabelSize(r),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,i=n.length;t<i;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const n=this.getLabels();for(t=0,i=n.length;t<i;++t)e.push(LA(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return NM(e.sort(PA))}}function O0(a,e,t){let i=0,n=a.length-1,r,o,s,h;t?(e>=a[i].pos&&e<=a[n].pos&&({lo:i,hi:n}=Ph(a,"pos",e)),{pos:r,time:s}=a[i],{pos:o,time:h}=a[n]):(e>=a[i].time&&e<=a[n].time&&({lo:i,hi:n}=Ph(a,"time",e)),{time:r,pos:s}=a[i],{time:o,pos:h}=a[n]);const f=o-r;return f?s+(h-s)*(e-r)/f:s}class v5 extends Kb{static id="timeseries";static defaults=Kb.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=O0(t,this.min),this._tableRange=O0(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,n=[],r=[];let o,s,h,f,y;for(o=0,s=e.length;o<s;++o)f=e[o],f>=t&&f<=i&&n.push(f);if(n.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,s=n.length;o<s;++o)y=n[o+1],h=n[o-1],f=n[o],Math.round((y+h)/2)!==f&&r.push({time:f,pos:o/(s-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((n,r)=>n-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(O0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return O0(this._table,i*this._tableRange+this._minPos,!0)}}var b5=Object.freeze({__proto__:null,CategoryScale:K4,LinearScale:Q4,LogarithmicScale:i5,RadialLinearScale:m5,TimeScale:Kb,TimeSeriesScale:v5});const w5=[xN,JB,X4,b5];Ew.register(...w5);function Jb(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,i=Array(e);t<e;t++)i[t]=a[t];return i}function EI(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function wn(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function zA(a,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,PI(i.key),i)}}function Sn(a,e,t){return e&&zA(a.prototype,e),t&&zA(a,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function wm(a,e){var t=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=Iw(a))||e){t&&(a=t);var i=0,n=function(){};return{s:n,n:function(){return i>=a.length?{done:!0}:{done:!1,value:a[i++]}},e:function(h){throw h},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,o=!0,s=!1;return{s:function(){t=t.call(a)},n:function(){var h=t.next();return o=h.done,h},e:function(h){s=!0,r=h},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw r}}}}function vy(a){var e=MI();return function(){var t,i=L_(a);if(e){var n=L_(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return(function(r,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EI(r)})(this,t)}}function P_(a,e,t){return(e=PI(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function L_(a){return L_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L_(a)}function by(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&Qb(a,e)}function MI(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(MI=function(){return!!a})()}function FA(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable}))),t.push.apply(t,i)}return t}function Ui(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FA(Object(t),!0).forEach((function(i){P_(a,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):FA(Object(t)).forEach((function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))}))}return a}function Qb(a,e){return Qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},Qb(a,e)}function II(a,e){return(function(t){if(Array.isArray(t))return t})(a)||(function(t,i){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,h,f=[],y=!0,x=!1;try{if(s=(n=n.call(t)).next,i===0){if(Object(n)!==n)return;y=!1}else for(;!(y=(r=s.call(n)).done)&&(f.push(r.value),f.length!==i);y=!0);}catch(S){x=!0,o=S}finally{try{if(!y&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(x)throw o}}return f}})(a,e)||Iw(a,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function oo(a){return(function(e){if(Array.isArray(e))return Jb(e)})(a)||(function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)})(a)||Iw(a)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function PI(a){var e=(function(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,i);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)})(a,"string");return typeof e=="symbol"?e:e+""}function hl(a){return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hl(a)}function Iw(a,e){if(a){if(typeof a=="string")return Jb(a,e);var t={}.toString.call(a).slice(8,-1);return t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set"?Array.from(a):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Jb(a,e):void 0}}var At=(function(){function a(){wn(this,a)}return Sn(a,[{key:"shadeRGBColor",value:function(e,t){var i=t.split(","),n=e<0?0:255,r=e<0?-1*e:e,o=parseInt(i[0].slice(4),10),s=parseInt(i[1],10),h=parseInt(i[2],10);return"rgb("+(Math.round((n-o)*r)+o)+","+(Math.round((n-s)*r)+s)+","+(Math.round((n-h)*r)+h)+")"}},{key:"shadeHexColor",value:function(e,t){var i=parseInt(t.slice(1),16),n=e<0?0:255,r=e<0?-1*e:e,o=i>>16,s=i>>8&255,h=255&i;return"#"+(16777216+65536*(Math.round((n-o)*r)+o)+256*(Math.round((n-s)*r)+s)+(Math.round((n-h)*r)+h)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,t){return a.isColorHex(t)?this.shadeHexColor(e,t):this.shadeRGBColor(e,t)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&hl(e)==="object"&&!Array.isArray(e)&&e!=null}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"listToArray",value:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}},{key:"extend",value:function(e,t){var i=this;typeof Object.assign!="function"&&(Object.assign=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(r),s=1;s<arguments.length;s++){var h=arguments[s];if(h!=null)for(var f in h)h.hasOwnProperty(f)&&(o[f]=h[f])}return o});var n=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(r){i.isObject(t[r])&&r in e?n[r]=i.extend(e[r],t[r]):Object.assign(n,P_({},r,t[r]))})),n}},{key:"extendArray",value:function(e,t){var i=[];return e.map((function(n){i.push(a.extend(t,n))})),e=i}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e===null||hl(e)!=="object")return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){t=[],i.set(e,t);for(var n=0;n<e.length;n++)t[n]=this.clone(e[n],i)}else if(e instanceof Date)t=new Date(e.getTime());else for(var r in t={},i.set(e,t),e)e.hasOwnProperty(r)&&(t[r]=this.clone(e[r],i));return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return typeof e=="number"||e===null?e:parseFloat(e)}},{key:"stripNumber",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(e)?e:parseFloat(e.toPrecision(t))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){return e.toString().includes("e")?Math.round(e):e}},{key:"elementExists",value:function(e){return!(!e||!e.isConnected)}},{key:"isInShadowDOM",value:function(e){if(!e||!e.getRootNode)return!1;var t=e.getRootNode();return t&&t!==document&&a.is("ShadowRoot",t)}},{key:"getShadowRootHost",value:function(e){return a.isInShadowDOM(e)&&e.getRootNode().host||null}},{key:"getDimensions",value:function(e){if(!e)return[0,0];var t,i=e.getRootNode&&e.getRootNode();if(i&&i!==document&&i.host){var n=i.host.getBoundingClientRect();return[n.width,n.height]}try{t=getComputedStyle(e,null)}catch{return[e.clientWidth||0,e.clientHeight||0]}var r=e.clientHeight,o=e.clientWidth;return r-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[o-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),r]}},{key:"getBoundingClientRect",value:function(e){if(!e)return{top:0,right:0,bottom:0,left:0,width:0,height:0,x:0,y:0};var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce((function(t,i){return Array.isArray(i)&&(i=i.reduce((function(n,r){return n.length>r.length?n:r}))),t.length>i.length?t:i}),0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;e.substring(0,1)!=="#"&&(e="#999999");var i=e.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var n=0;n<i.length;n++)i[n]=parseInt(i[n].length===1?i[n]+i[n]:i[n],16);return t!==void 0&&i.push(t),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var i=[],n=2*Math.PI/t,r=0;r<t;r++){var o={};o.x=e*Math.sin(r*n),o.y=-e*Math.cos(r*n),i.push(o)}return i}},{key:"polarToCartesian",value:function(e,t,i,n){var r=(n-90)*Math.PI/180;return{x:e+i*Math.cos(r),y:t+i*Math.sin(r)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",i=e.toString().slice();return i=i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,i){if(i>=e.length)for(var n=i-e.length+1;n--;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style.key=t[i])}},{key:"preciseAddition",value:function(e,t){var i=(String(e).split(".")[1]||"").length,n=(String(t).split(".")[1]||"").length,r=Math.pow(10,Math.max(i,n));return(Math.round(e*r)+Math.round(t*r))/r}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isMsEdge",value:function(){var e=window.navigator.userAgent,t=e.indexOf("Edge/");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}},{key:"getGCD",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,n=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));for(n>1?(e=Math.round(Math.abs(e)*n),t=Math.round(Math.abs(t)*n)):n=1;t;){var r=t;t=e%t,e=r}return e/n}},{key:"getPrimeFactors",value:function(e){for(var t=[],i=2;e>=2;)e%i==0?(t.push(i),e/=i):i++;return t}},{key:"mod",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,n=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));return(e=Math.round(Math.abs(e)*n))%(t=Math.round(Math.abs(t)*n))/n}}]),a})(),gg=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"animateLine",value:function(e,t,i,n){e.attr(t).animate(n).attr(i)}},{key:"animateMarker",value:function(e,t,i,n){e.attr({opacity:0}).animate(t).attr({opacity:1}).after((function(){n()}))}},{key:"animateRect",value:function(e,t,i,n,r){e.attr(t).animate(n).attr(i).after((function(){return r()}))}},{key:"animatePathsGradually",value:function(e){var t=e.el,i=e.realIndex,n=e.j,r=e.fill,o=e.pathFrom,s=e.pathTo,h=e.speed,f=e.delay,y=this.w,x=0;y.config.chart.animations.animateGradually.enabled&&(x=y.config.chart.animations.animateGradually.delay),y.config.chart.animations.dynamicAnimation.enabled&&y.globals.dataChanged&&y.config.chart.type!=="bar"&&(x=0),this.morphSVG(t,i,n,y.config.chart.type!=="line"||y.globals.comboCharts?r:"stroke",o,s,h,f*x)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(e){var t=e.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")}))}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),typeof t.config.chart.events.animationEnd=="function"&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,i,n,r,o,s,h){var f=this,y=this.w;r||(r=e.attr("pathFrom")),o||(o=e.attr("pathTo"));var x=function(S){return y.config.chart.type==="radar"&&(s=1),"M 0 ".concat(y.globals.gridHeight)};(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=x()),(!o.trim()||o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=x()),y.globals.shouldAnimate||(s=1),e.plot(r).animate(1,h).plot(r).animate(s,h).plot(o).after((function(){At.isNumber(i)?i===y.globals.series[y.globals.maxValsInArrayIndex].length-2&&y.globals.shouldAnimate&&f.animationCompleted(e):n!=="none"&&y.globals.shouldAnimate&&(!y.globals.comboCharts&&t===y.globals.series.length-1||y.globals.comboCharts)&&f.animationCompleted(e),f.showDelayedElements()}))}}]),a})();const e1={},LI=[];function Ea(a,e){if(Array.isArray(a))for(const t of a)Ea(t,e);else if(typeof a!="object")DI(Object.getOwnPropertyNames(e)),e1[a]=Object.assign(e1[a]||{},e);else for(const t in a)Ea(t,a[t])}function Ml(a){return e1[a]||{}}function DI(a){LI.push(...a)}function Pw(a,e){let t;const i=a.length,n=[];for(t=0;t<i;t++)n.push(e(a[t]));return n}function Gv(a){return a%360*Math.PI/180}function mg(a){return a.charAt(0).toUpperCase()+a.slice(1)}function yg(a,e,t,i){return e!=null&&t!=null||(i=i||a.bbox(),e==null?e=i.width/i.height*t:t==null&&(t=i.height/i.width*e)),{width:e,height:t}}function t1(a,e){const t=a.origin;let i=a.ox!=null?a.ox:a.originX!=null?a.originX:"center",n=a.oy!=null?a.oy:a.originY!=null?a.originY:"center";t!=null&&([i,n]=Array.isArray(t)?t:typeof t=="object"?[t.x,t.y]:[t,t]);const r=typeof i=="string",o=typeof n=="string";if(r||o){const{height:s,width:h,x:f,y}=e.bbox();r&&(i=i.includes("left")?f:i.includes("right")?f+h:f+h/2),o&&(n=n.includes("top")?y:n.includes("bottom")?y+s:y+s/2)}return[i,n]}const S5=new Set(["desc","metadata","title"]),i1=a=>S5.has(a.nodeName),RI=(a,e,t={})=>{const i={...e};for(const n in i)i[n].valueOf()===t[n]&&delete i[n];Object.keys(i).length?a.node.setAttribute("data-svgjs",JSON.stringify(i)):(a.node.removeAttribute("data-svgjs"),a.node.removeAttribute("svgjs:data"))},Lw="http://www.w3.org/2000/svg",Wv="http://www.w3.org/2000/xmlns/",_g="http://www.w3.org/1999/xlink",Ya={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function wy(){return Ya.window}let Dw=class{};const Lf={},Rw="___SYMBOL___ROOT___";function sy(a,e=Lw){return Ya.document.createElementNS(e,a)}function pl(a,e=!1){if(a instanceof Dw)return a;if(typeof a=="object")return Xv(a);if(a==null)return new Lf[Rw];if(typeof a=="string"&&a.charAt(0)!=="<")return Xv(Ya.document.querySelector(a));const t=e?Ya.document.createElement("div"):sy("svg");return t.innerHTML=a,a=Xv(t.firstChild),t.removeChild(t.firstChild),a}function Or(a,e){return e&&(e instanceof Ya.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:sy(a)}function Mc(a){if(!a)return null;if(a.instance instanceof Dw)return a.instance;if(a.nodeName==="#document-fragment")return new Lf.Fragment(a);let e=mg(a.nodeName||"Dom");return e==="LinearGradient"||e==="RadialGradient"?e="Gradient":Lf[e]||(e="Dom"),new Lf[e](a)}let Xv=Mc;function qa(a,e=a.name,t=!1){return Lf[e]=a,t&&(Lf[Rw]=a),DI(Object.getOwnPropertyNames(a.prototype)),a}let k5=1e3;function OI(a){return"Svgjs"+mg(a)+k5++}function zI(a){for(let e=a.children.length-1;e>=0;e--)zI(a.children[e]);return a.id&&(a.id=OI(a.nodeName)),a}function sa(a,e){let t,i;for(i=(a=Array.isArray(a)?a:[a]).length-1;i>=0;i--)for(t in e)a[i].prototype[t]=e[t]}function Rr(a){return function(...e){const t=e[e.length-1];return!t||t.constructor!==Object||t instanceof Array?a.apply(this,e):a.apply(this,e.slice(0,-1)).attr(t)}}Ea("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const a=this.position();return this.parent().add(this.remove(),a+1),this},backward:function(){const a=this.position();return this.parent().add(this.remove(),a?a-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(a){(a=pl(a)).remove();const e=this.position();return this.parent().add(a,e),this},after:function(a){(a=pl(a)).remove();const e=this.position();return this.parent().add(a,e+1),this},insertBefore:function(a){return(a=pl(a)).before(this),this},insertAfter:function(a){return(a=pl(a)).after(this),this}});const FI=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,C5=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,A5=/rgb\((\d+),(\d+),(\d+)\)/,T5=/(#[a-z_][a-z0-9\-_]*)/i,E5=/\)\s*,?\s*/,M5=/\s/g,NA=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,BA=/^rgb\(/,jA=/^(\s+)?$/,VA=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,I5=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Bh=/[\s,]+/,Ow=/[MLHVCSQTAZ]/i;function P5(a){const e=Math.round(a),t=Math.max(0,Math.min(255,e)).toString(16);return t.length===1?"0"+t:t}function Ap(a,e){for(let t=e.length;t--;)if(a[e[t]]==null)return!1;return!0}function Yv(a,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+6*(e-a)*t:t<.5?e:t<2/3?a+(e-a)*(2/3-t)*6:a}Ea("Dom",{classes:function(){const a=this.attr("class");return a==null?[]:a.trim().split(Bh)},hasClass:function(a){return this.classes().indexOf(a)!==-1},addClass:function(a){if(!this.hasClass(a)){const e=this.classes();e.push(a),this.attr("class",e.join(" "))}return this},removeClass:function(a){return this.hasClass(a)&&this.attr("class",this.classes().filter((function(e){return e!==a})).join(" ")),this},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)}}),Ea("Dom",{css:function(a,e){const t={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter((function(i){return!!i.length})).forEach((function(i){const n=i.split(/\s*:\s*/);t[n[0]]=n[1]})),t;if(arguments.length<2){if(Array.isArray(a)){for(const i of a){const n=i;t[i]=this.node.style.getPropertyValue(n)}return t}if(typeof a=="string")return this.node.style.getPropertyValue(a);if(typeof a=="object")for(const i in a)this.node.style.setProperty(i,a[i]==null||jA.test(a[i])?"":a[i])}return arguments.length===2&&this.node.style.setProperty(a,e==null||jA.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),Ea("Dom",{data:function(a,e,t){if(a==null)return this.data(Pw((function(i,n){let r;const o=i.length,s=[];for(r=0;r<o;r++)n(i[r])&&s.push(i[r]);return s})(this.node.attributes,(i=>i.nodeName.indexOf("data-")===0)),(i=>i.nodeName.slice(5))));if(a instanceof Array){const i={};for(const n of a)i[n]=this.data(n);return i}if(typeof a=="object")for(e in a)this.data(e,a[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch{return this.attr("data-"+a)}else this.attr("data-"+a,e===null?null:t===!0||typeof e=="string"||typeof e=="number"?e:JSON.stringify(e));return this}}),Ea("Dom",{remember:function(a,e){if(typeof arguments[0]=="object")for(const t in a)this.remember(t,a[t]);else{if(arguments.length===1)return this.memory()[a];this.memory()[a]=e}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let a=arguments.length-1;a>=0;a--)delete this.memory()[arguments[a]];return this},memory:function(){return this._memory=this._memory||{}}});class Ar{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof Ar||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"}static random(e="vibrant",t){const{random:i,round:n,sin:r,PI:o}=Math;if(e==="vibrant"){const s=24*i()+57,h=38*i()+45,f=360*i();return new Ar(s,h,f,"lch")}if(e==="sine"){const s=n(80*r(2*o*(t=t??i())/.5+.01)+150),h=n(50*r(2*o*t/.5+4.6)+200),f=n(100*r(2*o*t/.5+2.3)+150);return new Ar(s,h,f)}if(e==="pastel"){const s=8*i()+86,h=17*i()+9,f=360*i();return new Ar(s,h,f,"lch")}if(e==="dark"){const s=10+10*i(),h=50*i()+86,f=360*i();return new Ar(s,h,f,"lch")}if(e==="rgb"){const s=255*i(),h=255*i(),f=255*i();return new Ar(s,h,f)}if(e==="lab"){const s=100*i(),h=256*i()-128,f=256*i()-128;return new Ar(s,h,f,"lab")}if(e==="grey"){const s=255*i();return new Ar(s,s,s)}throw new Error("Unsupported random color mode")}static test(e){return typeof e=="string"&&(NA.test(e)||BA.test(e))}cmyk(){const{_a:e,_b:t,_c:i}=this.rgb(),[n,r,o]=[e,t,i].map((h=>h/255)),s=Math.min(1-n,1-r,1-o);return s===1?new Ar(0,0,0,1,"cmyk"):new Ar((1-n-s)/(1-s),(1-r-s)/(1-s),(1-o-s)/(1-s),s,"cmyk")}hsl(){const{_a:e,_b:t,_c:i}=this.rgb(),[n,r,o]=[e,t,i].map((S=>S/255)),s=Math.max(n,r,o),h=Math.min(n,r,o),f=(s+h)/2,y=s===h,x=s-h;return new Ar(360*(y?0:s===n?((r-o)/x+(r<o?6:0))/6:s===r?((o-n)/x+2)/6:s===o?((n-r)/x+4)/6:0),100*(y?0:f>.5?x/(2-s-h):x/(s+h)),100*f,"hsl")}init(e=0,t=0,i=0,n=0,r="rgb"){if(e=e||0,this.space)for(const x in this.space)delete this[this.space[x]];if(typeof e=="number")r=typeof n=="string"?n:r,n=typeof n=="string"?0:n,Object.assign(this,{_a:e,_b:t,_c:i,_d:n,space:r});else if(e instanceof Array)this.space=t||(typeof e[3]=="string"?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const x=(function(S,E){const z=Ap(S,"rgb")?{_a:S.r,_b:S.g,_c:S.b,_d:0,space:"rgb"}:Ap(S,"xyz")?{_a:S.x,_b:S.y,_c:S.z,_d:0,space:"xyz"}:Ap(S,"hsl")?{_a:S.h,_b:S.s,_c:S.l,_d:0,space:"hsl"}:Ap(S,"lab")?{_a:S.l,_b:S.a,_c:S.b,_d:0,space:"lab"}:Ap(S,"lch")?{_a:S.l,_b:S.c,_c:S.h,_d:0,space:"lch"}:Ap(S,"cmyk")?{_a:S.c,_b:S.m,_c:S.y,_d:S.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return z.space=E||z.space,z})(e,t);Object.assign(this,x)}else if(typeof e=="string")if(BA.test(e)){const x=e.replace(M5,""),[S,E,z]=A5.exec(x).slice(1,4).map((D=>parseInt(D)));Object.assign(this,{_a:S,_b:E,_c:z,_d:0,space:"rgb"})}else{if(!NA.test(e))throw Error("Unsupported string format, can't construct Color");{const x=D=>parseInt(D,16),[,S,E,z]=C5.exec((function(D){return D.length===4?["#",D.substring(1,2),D.substring(1,2),D.substring(2,3),D.substring(2,3),D.substring(3,4),D.substring(3,4)].join(""):D})(e)).map(x);Object.assign(this,{_a:S,_b:E,_c:z,_d:0,space:"rgb"})}}const{_a:o,_b:s,_c:h,_d:f}=this,y=this.space==="rgb"?{r:o,g:s,b:h}:this.space==="xyz"?{x:o,y:s,z:h}:this.space==="hsl"?{h:o,s,l:h}:this.space==="lab"?{l:o,a:s,b:h}:this.space==="lch"?{l:o,c:s,h}:this.space==="cmyk"?{c:o,m:s,y:h,k:f}:{};Object.assign(this,y)}lab(){const{x:e,y:t,z:i}=this.xyz();return new Ar(116*t-16,500*(e-t),200*(t-i),"lab")}lch(){const{l:e,a:t,b:i}=this.lab(),n=Math.sqrt(t**2+i**2);let r=180*Math.atan2(i,t)/Math.PI;return r<0&&(r*=-1,r=360-r),new Ar(e,n,r,"lch")}rgb(){if(this.space==="rgb")return this;if((e=this.space)==="lab"||e==="xyz"||e==="lch"){let{x:t,y:i,z:n}=this;if(this.space==="lab"||this.space==="lch"){let{l:E,a:z,b:D}=this;if(this.space==="lch"){const{c:le,h:J}=this,re=Math.PI/180;z=le*Math.cos(re*J),D=le*Math.sin(re*J)}const F=(E+16)/116,U=z/500+F,G=F-D/200,Z=16/116,ee=.008856,ie=7.787;t=.95047*(U**3>ee?U**3:(U-Z)/ie),i=1*(F**3>ee?F**3:(F-Z)/ie),n=1.08883*(G**3>ee?G**3:(G-Z)/ie)}const r=3.2406*t+-1.5372*i+-.4986*n,o=-.9689*t+1.8758*i+.0415*n,s=.0557*t+-.204*i+1.057*n,h=Math.pow,f=.0031308,y=r>f?1.055*h(r,1/2.4)-.055:12.92*r,x=o>f?1.055*h(o,1/2.4)-.055:12.92*o,S=s>f?1.055*h(s,1/2.4)-.055:12.92*s;return new Ar(255*y,255*x,255*S)}if(this.space==="hsl"){let{h:t,s:i,l:n}=this;if(t/=360,i/=100,n/=100,i===0)return n*=255,new Ar(n,n,n);const r=n<.5?n*(1+i):n+i-n*i,o=2*n-r,s=255*Yv(o,r,t+1/3),h=255*Yv(o,r,t),f=255*Yv(o,r,t-1/3);return new Ar(s,h,f)}if(this.space==="cmyk"){const{c:t,m:i,y:n,k:r}=this,o=255*(1-Math.min(1,t*(1-r)+r)),s=255*(1-Math.min(1,i*(1-r)+r)),h=255*(1-Math.min(1,n*(1-r)+r));return new Ar(o,s,h)}return this;var e}toArray(){const{_a:e,_b:t,_c:i,_d:n,space:r}=this;return[e,t,i,n,r]}toHex(){const[e,t,i]=this._clamped().map(P5);return`#${e}${t}${i}`}toRgb(){const[e,t,i]=this._clamped();return`rgb(${e},${t},${i})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:t,_c:i}=this.rgb(),[n,r,o]=[e,t,i].map((F=>F/255)),s=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,h=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,f=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,y=(.4124*s+.3576*h+.1805*f)/.95047,x=(.2126*s+.7152*h+.0722*f)/1,S=(.0193*s+.1192*h+.9505*f)/1.08883,E=y>.008856?Math.pow(y,1/3):7.787*y+16/116,z=x>.008856?Math.pow(x,1/3):7.787*x+16/116,D=S>.008856?Math.pow(S,1/3):7.787*S+16/116;return new Ar(E,z,D,"xyz")}_clamped(){const{_a:e,_b:t,_c:i}=this.rgb(),{max:n,min:r,round:o}=Math;return[e,t,i].map((s=>n(0,r(o(s),255))))}}class or{constructor(...e){this.init(...e)}clone(){return new or(this)}init(e,t){const r=Array.isArray(e)?{x:e[0],y:e[1]}:typeof e=="object"?{x:e.x,y:e.y}:{x:e,y:t};return this.x=r.x==null?0:r.x,this.y=r.y==null?0:r.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){Xn.isMatrixLike(e)||(e=new Xn(e));const{x:t,y:i}=this;return this.x=e.a*t+e.c*i+e.e,this.y=e.b*t+e.d*i+e.f,this}}function Tp(a,e,t){return Math.abs(e-a)<1e-6}class Xn{constructor(...e){this.init(...e)}static formatTransforms(e){const t=e.flip==="both"||e.flip===!0,i=e.flip&&(t||e.flip==="x")?-1:1,n=e.flip&&(t||e.flip==="y")?-1:1,r=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,o=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,s=e.scale&&e.scale.length?e.scale[0]*i:isFinite(e.scale)?e.scale*i:isFinite(e.scaleX)?e.scaleX*i:i,h=e.scale&&e.scale.length?e.scale[1]*n:isFinite(e.scale)?e.scale*n:isFinite(e.scaleY)?e.scaleY*n:n,f=e.shear||0,y=e.rotate||e.theta||0,x=new or(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),S=x.x,E=x.y,z=new or(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),D=z.x,F=z.y,U=new or(e.translate||e.tx||e.translateX,e.ty||e.translateY),G=U.x,Z=U.y,ee=new or(e.relative||e.rx||e.relativeX,e.ry||e.relativeY);return{scaleX:s,scaleY:h,skewX:r,skewY:o,shear:f,theta:y,rx:ee.x,ry:ee.y,tx:G,ty:Z,ox:S,oy:E,px:D,py:F}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return e.a!=null||e.b!=null||e.c!=null||e.d!=null||e.e!=null||e.f!=null}static matrixMultiply(e,t,i){const n=e.a*t.a+e.c*t.b,r=e.b*t.a+e.d*t.b,o=e.a*t.c+e.c*t.d,s=e.b*t.c+e.d*t.d,h=e.e+e.a*t.e+e.c*t.f,f=e.f+e.b*t.e+e.d*t.f;return i.a=n,i.b=r,i.c=o,i.d=s,i.e=h,i.f=f,i}around(e,t,i){return this.clone().aroundO(e,t,i)}aroundO(e,t,i){const n=e||0,r=t||0;return this.translateO(-n,-r).lmultiplyO(i).translateO(n,r)}clone(){return new Xn(this)}decompose(e=0,t=0){const i=this.a,n=this.b,r=this.c,o=this.d,s=this.e,h=this.f,f=i*o-n*r,y=f>0?1:-1,x=y*Math.sqrt(i*i+n*n),S=Math.atan2(y*n,y*i),E=180/Math.PI*S,z=Math.cos(S),D=Math.sin(S),F=(i*r+n*o)/f,U=r*x/(F*i-n)||o*x/(F*n+i);return{scaleX:x,scaleY:U,shear:F,rotate:E,translateX:s-e+e*z*x+t*(F*z*x-D*U),translateY:h-t+e*D*x+t*(F*D*x+z*U),originX:e,originY:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const t=new Xn(e);return Tp(this.a,t.a)&&Tp(this.b,t.b)&&Tp(this.c,t.c)&&Tp(this.d,t.d)&&Tp(this.e,t.e)&&Tp(this.f,t.f)}flip(e,t){return this.clone().flipO(e,t)}flipO(e,t){return e==="x"?this.scaleO(-1,1,t,0):e==="y"?this.scaleO(1,-1,0,t):this.scaleO(-1,-1,e,t||e)}init(e){const t=Xn.fromArray([1,0,0,1,0,0]);return e=e instanceof Ro?e.matrixify():typeof e=="string"?Xn.fromArray(e.split(Bh).map(parseFloat)):Array.isArray(e)?Xn.fromArray(e):typeof e=="object"&&Xn.isMatrixLike(e)?e:typeof e=="object"?new Xn().transform(e):arguments.length===6?Xn.fromArray([].slice.call(arguments)):t,this.a=e.a!=null?e.a:t.a,this.b=e.b!=null?e.b:t.b,this.c=e.c!=null?e.c:t.c,this.d=e.d!=null?e.d:t.d,this.e=e.e!=null?e.e:t.e,this.f=e.f!=null?e.f:t.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,t=this.b,i=this.c,n=this.d,r=this.e,o=this.f,s=e*n-t*i;if(!s)throw new Error("Cannot invert "+this);const h=n/s,f=-t/s,y=-i/s,x=e/s,S=-(h*r+y*o),E=-(f*r+x*o);return this.a=h,this.b=f,this.c=y,this.d=x,this.e=S,this.f=E,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const t=e instanceof Xn?e:new Xn(e);return Xn.matrixMultiply(t,this,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const t=e instanceof Xn?e:new Xn(e);return Xn.matrixMultiply(this,t,this)}rotate(e,t,i){return this.clone().rotateO(e,t,i)}rotateO(e,t=0,i=0){e=Gv(e);const n=Math.cos(e),r=Math.sin(e),{a:o,b:s,c:h,d:f,e:y,f:x}=this;return this.a=o*n-s*r,this.b=s*n+o*r,this.c=h*n-f*r,this.d=f*n+h*r,this.e=y*n-x*r+i*r-t*n+t,this.f=x*n+y*r-t*r-i*n+i,this}scale(){return this.clone().scaleO(...arguments)}scaleO(e,t=e,i=0,n=0){arguments.length===3&&(n=i,i=t,t=e);const{a:r,b:o,c:s,d:h,e:f,f:y}=this;return this.a=r*e,this.b=o*t,this.c=s*e,this.d=h*t,this.e=f*e-i*e+i,this.f=y*t-n*t+n,this}shear(e,t,i){return this.clone().shearO(e,t,i)}shearO(e,t=0,i=0){const{a:n,b:r,c:o,d:s,e:h,f}=this;return this.a=n+r*e,this.c=o+s*e,this.e=h+f*e-i*e,this}skew(){return this.clone().skewO(...arguments)}skewO(e,t=e,i=0,n=0){arguments.length===3&&(n=i,i=t,t=e),e=Gv(e),t=Gv(t);const r=Math.tan(e),o=Math.tan(t),{a:s,b:h,c:f,d:y,e:x,f:S}=this;return this.a=s+h*r,this.b=h+s*o,this.c=f+y*r,this.d=y+f*o,this.e=x+S*r-n*r,this.f=S+x*o-i*o,this}skewX(e,t,i){return this.skew(e,0,t,i)}skewY(e,t,i){return this.skew(0,e,t,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(Xn.isMatrixLike(e))return new Xn(e).multiplyO(this);const t=Xn.formatTransforms(e),{x:i,y:n}=new or(t.ox,t.oy).transform(this),r=new Xn().translateO(t.rx,t.ry).lmultiplyO(this).translateO(-i,-n).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(i,n);if(isFinite(t.px)||isFinite(t.py)){const o=new or(i,n).transform(r),s=isFinite(t.px)?t.px-o.x:0,h=isFinite(t.py)?t.py-o.y:0;r.translateO(s,h)}return r.translateO(t.tx,t.ty),r}translate(e,t){return this.clone().translateO(e,t)}translateO(e,t){return this.e+=e||0,this.f+=t||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Jh(){if(!Jh.nodes){const a=pl().size(2,0);a.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),a.attr("focusable","false"),a.attr("aria-hidden","true");const e=a.path().node;Jh.nodes={svg:a,path:e}}if(!Jh.nodes.svg.node.parentNode){const a=Ya.document.body||Ya.document.documentElement;Jh.nodes.svg.addTo(a)}return Jh.nodes}function NI(a){return!(a.width||a.height||a.x||a.y)}qa(Xn,"Matrix");class Ds{constructor(...e){this.init(...e)}addOffset(){return this.x+=Ya.window.pageXOffset,this.y+=Ya.window.pageYOffset,new Ds(this)}init(e){return e=typeof e=="string"?e.split(Bh).map(parseFloat):Array.isArray(e)?e:typeof e=="object"?[e.left!=null?e.left:e.x,e.top!=null?e.top:e.y,e.width,e.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return NI(this)}merge(e){const t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x+this.width,e.x+e.width)-t,r=Math.max(this.y+this.height,e.y+e.height)-i;return new Ds(t,i,n,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof Xn||(e=new Xn(e));let t=1/0,i=-1/0,n=1/0,r=-1/0;return[new or(this.x,this.y),new or(this.x2,this.y),new or(this.x,this.y2),new or(this.x2,this.y2)].forEach((function(o){o=o.transform(e),t=Math.min(t,o.x),i=Math.max(i,o.x),n=Math.min(n,o.y),r=Math.max(r,o.y)})),new Ds(t,n,i-t,r-n)}}function HA(a,e,t){let i;try{if(i=e(a.node),NI(i)&&(n=a.node)!==Ya.document&&!(Ya.document.documentElement.contains||function(r){for(;r.parentNode;)r=r.parentNode;return r===Ya.document}).call(Ya.document.documentElement,n))throw new Error("Element not in the dom")}catch{i=t(a)}var n;return i}Ea({viewbox:{viewbox(a,e,t,i){return a==null?new Ds(this.attr("viewBox")):this.attr("viewBox",new Ds(a,e,t,i))},zoom(a,e){let{width:t,height:i}=this.attr(["width","height"]);if((t||i)&&typeof t!="string"&&typeof i!="string"||(t=this.node.clientWidth,i=this.node.clientHeight),!t||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const n=this.viewbox(),r=t/n.width,o=i/n.height,s=Math.min(r,o);if(a==null)return s;let h=s/a;h===1/0&&(h=Number.MAX_SAFE_INTEGER/100),e=e||new or(t/2/r+n.x,i/2/o+n.y);const f=new Ds(n).transform(new Xn({scale:h,origin:e}));return this.viewbox(f)}}}),qa(Ds,"Box");class Bf extends Array{constructor(e=[],...t){if(super(e,...t),typeof e=="number")return this;this.length=0,this.push(...e)}}sa([Bf],{each(a,...e){return typeof a=="function"?this.map(((t,i,n)=>a.call(t,t,i,n))):this.map((t=>t[a](...e)))},toArray(){return Array.prototype.concat.apply([],this)}});const L5=["toArray","constructor","each"];function Gf(a,e){return new Bf(Pw((e||Ya.document).querySelectorAll(a),(function(t){return Mc(t)})))}Bf.extend=function(a){a=a.reduce(((e,t)=>(L5.includes(t)||t[0]==="_"||(t in Array.prototype&&(e["$"+t]=Array.prototype[t]),e[t]=function(...i){return this.each(t,...i)}),e)),{}),sa([Bf],a)};let D5=0;const BI={};function jI(a){let e=a.getEventHolder();return e===Ya.window&&(e=BI),e.events||(e.events={}),e.events}function zw(a){return a.getEventTarget()}function Dh(a,e,t,i,n){const r=t.bind(i||a),o=pl(a),s=jI(o),h=zw(o);e=Array.isArray(e)?e:e.split(Bh),t._svgjsListenerId||(t._svgjsListenerId=++D5),e.forEach((function(f){const y=f.split(".")[0],x=f.split(".")[1]||"*";s[y]=s[y]||{},s[y][x]=s[y][x]||{},s[y][x][t._svgjsListenerId]=r,h.addEventListener(y,r,n||!1)}))}function Rc(a,e,t,i){const n=pl(a),r=jI(n),o=zw(n);(typeof t!="function"||(t=t._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(Bh)).forEach((function(s){const h=s&&s.split(".")[0],f=s&&s.split(".")[1];let y,x;if(t)r[h]&&r[h][f||"*"]&&(o.removeEventListener(h,r[h][f||"*"][t],i||!1),delete r[h][f||"*"][t]);else if(h&&f){if(r[h]&&r[h][f]){for(x in r[h][f])Rc(o,[h,f].join("."),x);delete r[h][f]}}else if(f)for(s in r)for(y in r[s])f===y&&Rc(o,[s,f].join("."));else if(h){if(r[h]){for(y in r[h])Rc(o,[h,y].join("."));delete r[h]}}else{for(s in r)Rc(o,s);(function(S){let E=S.getEventHolder();E===Ya.window&&(E=BI),E.events&&(E.events={})})(n)}}))}class Sy extends Dw{addEventListener(){}dispatch(e,t,i){return(function(n,r,o,s){const h=zw(n);return r instanceof Ya.window.Event||(r=new Ya.window.CustomEvent(r,{detail:o,cancelable:!0,...s})),h.dispatchEvent(r),r})(this,e,t,i)}dispatchEvent(e){const t=this.getEventHolder().events;if(!t)return!0;const i=t[e.type];for(const n in i)for(const r in i[n])i[n][r](e);return!e.defaultPrevented}fire(e,t,i){return this.dispatch(e,t,i),this}getEventHolder(){return this}getEventTarget(){return this}off(e,t,i){return Rc(this,e,t,i),this}on(e,t,i,n){return Dh(this,e,t,i,n),this}removeEventListener(){}}function UA(){}qa(Sy,"EventTarget");const qv=400,R5=">",O5=0,z5={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class jf extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return typeof e=="number"||(this.length=0,this.push(...this.parse(e))),this}parse(e=[]){return e instanceof Array?e:e.trim().split(Bh).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class ma{constructor(...e){this.init(...e)}convert(e){return new ma(this.value,e)}divide(e){return e=new ma(e),new ma(this/e,this.unit||e.unit)}init(e,t){return t=Array.isArray(e)?e[1]:t,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=t||"",typeof e=="number"?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:typeof e=="string"?(t=e.match(FI))&&(this.value=parseFloat(t[1]),t[5]==="%"?this.value/=100:t[5]==="s"&&(this.value*=1e3),this.unit=t[5]):e instanceof ma&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new ma(e),new ma(this-e,this.unit||e.unit)}plus(e){return e=new ma(e),new ma(this+e,this.unit||e.unit)}times(e){return e=new ma(e),new ma(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const F5=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),VI=[];class vd extends Sy{constructor(e,t){super(),this.node=e,this.type=e.nodeName,t&&e!==t&&this.attr(t)}add(e,t){return(e=pl(e)).removeNamespace&&this.node instanceof Ya.window.SVGElement&&e.removeNamespace(),t==null?this.node.appendChild(e.node):e.node!==this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this}addTo(e,t){return pl(e).put(this,t)}children(){return new Bf(Pw(this.node.children,(function(e){return Mc(e)})))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,t=!0){this.writeDataToDom();let i=this.node.cloneNode(e);return t&&(i=zI(i)),new this.constructor(i)}each(e,t){const i=this.children();let n,r;for(n=0,r=i.length;n<r;n++)e.apply(i[n],[n,i]),t&&i[n].each(e,t);return this}element(e,t){return this.put(new vd(sy(e),t))}first(){return Mc(this.node.firstChild)}get(e){return Mc(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,t){return this.xml(e,t,"http://www.w3.org/1999/xhtml")}id(e){return e!==void 0||this.node.id||(this.node.id=OI(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return Mc(this.node.lastChild)}matches(e){const t=this.node,i=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return i&&i.call(t,e)}parent(e){let t=this;if(!t.node.parentNode)return null;if(t=Mc(t.node.parentNode),!e)return t;do if(typeof e=="string"?t.matches(e):t instanceof e)return t;while(t=Mc(t.node.parentNode));return t}put(e,t){return e=pl(e),this.add(e,t),e}putIn(e,t){return pl(e).add(this,t)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=pl(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,t=null){const i=10**e,n=this.attr(t);for(const r in n)typeof n[r]=="number"&&(n[r]=Math.round(n[r]*i)/i);return this.attr(n),this}svg(e,t){return this.xml(e,t,Lw)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const t=this.parent();if(!t)return this.addTo(e);const i=t.index(this);return t.put(e,i).put(this)}writeDataToDom(){return this.each((function(){this.writeDataToDom()})),this}xml(e,t,i){if(typeof e=="boolean"&&(i=t,t=e,e=null),e==null||typeof e=="function"){t=t==null||t,this.writeDataToDom();let s=this;if(e!=null){if(s=Mc(s.node.cloneNode(!0)),t){const h=e(s);if(s=h||s,h===!1)return""}s.each((function(){const h=e(this),f=h||this;h===!1?this.remove():h&&this!==f&&this.replace(f)}),!0)}return t?s.node.outerHTML:s.node.innerHTML}t=t!=null&&t;const n=sy("wrapper",i),r=Ya.document.createDocumentFragment();n.innerHTML=e;for(let s=n.children.length;s--;)r.appendChild(n.firstElementChild);const o=this.parent();return t?this.replace(r)&&o:this.add(r)}}sa(vd,{attr:function(a,e,t){if(a==null){a={},e=this.node.attributes;for(const i of e)a[i.nodeName]=VA.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return a}if(a instanceof Array)return a.reduce(((i,n)=>(i[n]=this.attr(n),i)),{});if(typeof a=="object"&&a.constructor===Object)for(e in a)this.attr(e,a[e]);else if(e===null)this.node.removeAttribute(a);else{if(e==null)return(e=this.node.getAttribute(a))==null?z5[a]:VA.test(e)?parseFloat(e):e;typeof(e=VI.reduce(((i,n)=>n(a,i,this)),e))=="number"?e=new ma(e):F5.has(a)&&Ar.isColor(e)?e=new Ar(e):e.constructor===Array&&(e=new jf(e)),a==="leading"?this.leading&&this.leading(e):typeof t=="string"?this.node.setAttributeNS(t,a,e.toString()):this.node.setAttribute(a,e.toString()),!this.rebuild||a!=="font-size"&&a!=="x"||this.rebuild()}return this},find:function(a){return Gf(a,this.node)},findOne:function(a){return Mc(this.node.querySelector(a))}}),qa(vd,"Dom");let Ro=class extends vd{constructor(a,e){super(a,e),this.dom={},this.node.instance=this,(a.hasAttribute("data-svgjs")||a.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(a.getAttribute("data-svgjs"))??JSON.parse(a.getAttribute("svgjs:data"))??{})}center(a,e){return this.cx(a).cy(e)}cx(a){return a==null?this.x()+this.width()/2:this.x(a-this.width()/2)}cy(a){return a==null?this.y()+this.height()/2:this.y(a-this.height()/2)}defs(){const a=this.root();return a&&a.defs()}dmove(a,e){return this.dx(a).dy(e)}dx(a=0){return this.x(new ma(a).plus(this.x()))}dy(a=0){return this.y(new ma(a).plus(this.y()))}getEventHolder(){return this}height(a){return this.attr("height",a)}move(a,e){return this.x(a).y(e)}parents(a=this.root()){const e=typeof a=="string";e||(a=pl(a));const t=new Bf;let i=this;for(;(i=i.parent())&&i.node!==Ya.document&&i.nodeName!=="#document-fragment"&&(t.push(i),e||i.node!==a.node)&&(!e||!i.matches(a));)if(i.node===this.root().node)return null;return t}reference(a){if(!(a=this.attr(a)))return null;const e=(a+"").match(T5);return e?pl(e[1]):null}root(){const a=this.parent((function(e){return Lf[e]})(Rw));return a&&a.root()}setData(a){return this.dom=a,this}size(a,e){const t=yg(this,a,e);return this.width(new ma(t.width)).height(new ma(t.height))}width(a){return this.attr("width",a)}writeDataToDom(){return RI(this,this.dom),super.writeDataToDom()}x(a){return this.attr("x",a)}y(a){return this.attr("y",a)}};sa(Ro,{bbox:function(){const a=HA(this,(e=>e.getBBox()),(e=>{try{const t=e.clone().addTo(Jh().svg).show(),i=t.node.getBBox();return t.remove(),i}catch(t){throw new Error(`Getting bbox of element "${e.node.nodeName}" is not possible: ${t.toString()}`)}}));return new Ds(a)},rbox:function(a){const e=HA(this,(i=>i.getBoundingClientRect()),(i=>{throw new Error(`Getting rbox of element "${i.node.nodeName}" is not possible`)})),t=new Ds(e);return a?t.transform(a.screenCTM().inverseO()):t.addOffset()},inside:function(a,e){const t=this.bbox();return a>t.x&&e>t.y&&a<t.x+t.width&&e<t.y+t.height},point:function(a,e){return new or(a,e).transformO(this.screenCTM().inverseO())},ctm:function(){return new Xn(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const a=this.rect(1,1),e=a.node.getScreenCTM();return a.remove(),new Xn(e)}return new Xn(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new Xn}}}),qa(Ro,"Element");const lm={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(a,e){return e==="color"?a:a+"-"+e}};["fill","stroke"].forEach((function(a){const e={};let t;e[a]=function(i){if(i===void 0)return this.attr(a);if(typeof i=="string"||i instanceof Ar||Ar.isRgb(i)||i instanceof Ro)this.attr(a,i);else for(t=lm[a].length-1;t>=0;t--)i[lm[a][t]]!=null&&this.attr(lm.prefix(a,lm[a][t]),i[lm[a][t]]);return this},Ea(["Element","Runner"],e)})),Ea(["Element","Runner"],{matrix:function(a,e,t,i,n,r){return a==null?new Xn(this):this.attr("transform",new Xn(a,e,t,i,n,r))},rotate:function(a,e,t){return this.transform({rotate:a,ox:e,oy:t},!0)},skew:function(a,e,t,i){return arguments.length===1||arguments.length===3?this.transform({skew:a,ox:e,oy:t},!0):this.transform({skew:[a,e],ox:t,oy:i},!0)},shear:function(a,e,t){return this.transform({shear:a,ox:e,oy:t},!0)},scale:function(a,e,t,i){return arguments.length===1||arguments.length===3?this.transform({scale:a,ox:e,oy:t},!0):this.transform({scale:[a,e],ox:t,oy:i},!0)},translate:function(a,e){return this.transform({translate:[a,e]},!0)},relative:function(a,e){return this.transform({relative:[a,e]},!0)},flip:function(a="both",e="center"){return"xybothtrue".indexOf(a)===-1&&(e=a,a="both"),this.transform({flip:a,origin:e},!0)},opacity:function(a){return this.attr("opacity",a)}}),Ea("radius",{radius:function(a,e=a){return(this._element||this).type==="radialGradient"?this.attr("r",new ma(a)):this.rx(a).ry(e)}}),Ea("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(a){return new or(this.node.getPointAtLength(a))}}),Ea(["Element","Runner"],{font:function(a,e){if(typeof a=="object"){for(e in a)this.font(e,a[e]);return this}return a==="leading"?this.leading(e):a==="anchor"?this.attr("text-anchor",e):a==="size"||a==="family"||a==="weight"||a==="stretch"||a==="variant"||a==="style"?this.attr("font-"+a,e):this.attr(a,e)}});Ea("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce((function(a,e){return a[e]=function(t){return t===null?this.off(e):this.on(e,t),this},a}),{})),Ea("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(E5).slice(0,-1).map((function(e){const t=e.trim().split("(");return[t[0],t[1].split(Bh).map((function(i){return parseFloat(i)}))]})).reverse().reduce((function(e,t){return t[0]==="matrix"?e.lmultiply(Xn.fromArray(t[1])):e[t[0]].apply(e,t[1])}),new Xn)},toParent:function(a,e){if(this===a)return this;if(i1(this.node))return this.addTo(a,e);const t=this.screenCTM(),i=a.screenCTM().inverse();return this.addTo(a,e).untransform().transform(i.multiply(t)),this},toRoot:function(a){return this.toParent(this.root(),a)},transform:function(a,e){if(a==null||typeof a=="string"){const i=new Xn(this).decompose();return a==null?i:i[a]}Xn.isMatrixLike(a)||(a={...a,origin:t1(a,this)});const t=new Xn(e===!0?this:e||!1).transform(a);return this.attr("transform",t)}});class ml extends Ro{flatten(){return this.each((function(){if(this instanceof ml)return this.flatten().ungroup()})),this}ungroup(e=this.parent(),t=e.index(this)){return t=t===-1?e.children().length:t,this.each((function(i,n){return n[n.length-i-1].toParent(e,t)})),this.remove()}}qa(ml,"Container");class ax extends ml{constructor(e,t=e){super(Or("defs",e),t)}flatten(){return this}ungroup(){return this}}qa(ax,"Defs");class pc extends Ro{}function Fw(a){return this.attr("rx",a)}function Nw(a){return this.attr("ry",a)}function HI(a){return a==null?this.cx()-this.rx():this.cx(a+this.rx())}function UI(a){return a==null?this.cy()-this.ry():this.cy(a+this.ry())}function $I(a){return this.attr("cx",a)}function GI(a){return this.attr("cy",a)}function WI(a){return a==null?2*this.rx():this.rx(new ma(a).divide(2))}function XI(a){return a==null?2*this.ry():this.ry(new ma(a).divide(2))}qa(pc,"Shape");var N5=Object.freeze({__proto__:null,cx:$I,cy:GI,height:XI,rx:Fw,ry:Nw,width:WI,x:HI,y:UI});class Q0 extends pc{constructor(e,t=e){super(Or("ellipse",e),t)}size(e,t){const i=yg(this,e,t);return this.rx(new ma(i.width).divide(2)).ry(new ma(i.height).divide(2))}}sa(Q0,N5),Ea("Container",{ellipse:Rr((function(a=0,e=a){return this.put(new Q0).size(a,e).move(0,0)}))}),qa(Q0,"Ellipse");class YI extends vd{constructor(e=Ya.document.createDocumentFragment()){super(e)}xml(e,t,i){if(typeof e=="boolean"&&(i=t,t=e,e=null),e==null||typeof e=="function"){const n=new vd(sy("wrapper",i));return n.add(this.node.cloneNode(!0)),n.xml(!1,i)}return super.xml(e,!1,i)}}function qI(a,e){return(this._element||this).type==="radialGradient"?this.attr({fx:new ma(a),fy:new ma(e)}):this.attr({x1:new ma(a),y1:new ma(e)})}function ZI(a,e){return(this._element||this).type==="radialGradient"?this.attr({cx:new ma(a),cy:new ma(e)}):this.attr({x2:new ma(a),y2:new ma(e)})}qa(YI,"Fragment");var B5=Object.freeze({__proto__:null,from:qI,to:ZI});class Vm extends ml{constructor(e,t){super(Or(e+"Gradient",typeof e=="string"?null:e),t)}attr(e,t,i){return e==="transform"&&(e="gradientTransform"),super.attr(e,t,i)}bbox(){return new Ds}targets(){return Gf("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}sa(Vm,B5),Ea({Container:{gradient(...a){return this.defs().gradient(...a)}},Defs:{gradient:Rr((function(a,e){return this.put(new Vm(a)).update(e)}))}}),qa(Vm,"Gradient");class oy extends ml{constructor(e,t=e){super(Or("pattern",e),t)}attr(e,t,i){return e==="transform"&&(e="patternTransform"),super.attr(e,t,i)}bbox(){return new Ds}targets(){return Gf("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}Ea({Container:{pattern(...a){return this.defs().pattern(...a)}},Defs:{pattern:Rr((function(a,e,t){return this.put(new oy).update(t).attr({x:0,y:0,width:a,height:e,patternUnits:"userSpaceOnUse"})}))}}),qa(oy,"Pattern");let e_=class extends pc{constructor(a,e=a){super(Or("image",a),e)}load(a,e){if(!a)return this;const t=new Ya.window.Image;return Dh(t,"load",(function(i){const n=this.parent(oy);this.width()===0&&this.height()===0&&this.size(t.width,t.height),n instanceof oy&&n.width()===0&&n.height()===0&&n.size(this.width(),this.height()),typeof e=="function"&&e.call(this,i)}),this),Dh(t,"load error",(function(){Rc(t)})),this.attr("href",t.src=a,_g)}};var $A;$A=function(a,e,t){return a!=="fill"&&a!=="stroke"||I5.test(e)&&(e=t.root().defs().image(e)),e instanceof e_&&(e=t.root().defs().pattern(0,0,(i=>{i.add(e)}))),e},VI.push($A),Ea({Container:{image:Rr((function(a,e){return this.put(new e_).size(0,0).load(a,e)}))}}),qa(e_,"Image");class bd extends jf{bbox(){let e=-1/0,t=-1/0,i=1/0,n=1/0;return this.forEach((function(r){e=Math.max(r[0],e),t=Math.max(r[1],t),i=Math.min(r[0],i),n=Math.min(r[1],n)})),new Ds(i,n,e-i,t-n)}move(e,t){const i=this.bbox();if(e-=i.x,t-=i.y,!isNaN(e)&&!isNaN(t))for(let n=this.length-1;n>=0;n--)this[n]=[this[n][0]+e,this[n][1]+t];return this}parse(e=[0,0]){const t=[];(e=e instanceof Array?Array.prototype.concat.apply([],e):e.trim().split(Bh).map(parseFloat)).length%2!=0&&e.pop();for(let i=0,n=e.length;i<n;i+=2)t.push([e[i],e[i+1]]);return t}size(e,t){let i;const n=this.bbox();for(i=this.length-1;i>=0;i--)n.width&&(this[i][0]=(this[i][0]-n.x)*e/n.width+n.x),n.height&&(this[i][1]=(this[i][1]-n.y)*t/n.height+n.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let t=0,i=this.length;t<i;t++)e.push(this[t].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){Xn.isMatrixLike(e)||(e=new Xn(e));for(let t=this.length;t--;){const[i,n]=this[t];this[t][0]=e.a*i+e.c*n+e.e,this[t][1]=e.b*i+e.d*n+e.f}return this}}const j5=bd;var Bw=Object.freeze({__proto__:null,MorphArray:j5,height:function(a){const e=this.bbox();return a==null?e.height:this.size(e.width,a)},width:function(a){const e=this.bbox();return a==null?e.width:this.size(a,e.height)},x:function(a){return a==null?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return a==null?this.bbox().y:this.move(this.bbox().x,a)}});let yf=class extends pc{constructor(a,e=a){super(Or("line",a),e)}array(){return new bd([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(a,e){return this.attr(this.array().move(a,e).toLine())}plot(a,e,t,i){return a==null?this.array():(a=e!==void 0?{x1:a,y1:e,x2:t,y2:i}:new bd(a).toLine(),this.attr(a))}size(a,e){const t=yg(this,a,e);return this.attr(this.array().size(t.width,t.height).toLine())}};sa(yf,Bw),Ea({Container:{line:Rr((function(...a){return yf.prototype.plot.apply(this.put(new yf),a[0]!=null?a:[0,0,0,0])}))}}),qa(yf,"Line");let t_=class extends ml{constructor(a,e=a){super(Or("marker",a),e)}height(a){return this.attr("markerHeight",a)}orient(a){return this.attr("orient",a)}ref(a,e){return this.attr("refX",a).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(a){return this.clear(),typeof a=="function"&&a.call(this,this),this}width(a){return this.attr("markerWidth",a)}};function Np(a,e){return function(t){return t==null?this[a]:(this[a]=t,e&&e.call(this),this)}}Ea({Container:{marker(...a){return this.defs().marker(...a)}},Defs:{marker:Rr((function(a,e,t){return this.put(new t_).size(a,e).ref(a/2,e/2).viewbox(0,0,a,e).attr("orient","auto").update(t)}))},marker:{marker(a,e,t,i){let n=["marker"];return a!=="all"&&n.push(a),n=n.join("-"),a=arguments[1]instanceof t_?arguments[1]:this.defs().marker(e,t,i),this.attr(n,a)}}}),qa(t_,"Marker");const V5={"-":function(a){return a},"<>":function(a){return-Math.cos(a*Math.PI)/2+.5},">":function(a){return Math.sin(a*Math.PI/2)},"<":function(a){return 1-Math.cos(a*Math.PI/2)},bezier:function(a,e,t,i){return function(n){return n<0?a>0?e/a*n:t>0?i/t*n:0:n>1?t<1?(1-i)/(1-t)*n+(i-t)/(1-t):a<1?(1-e)/(1-a)*n+(e-a)/(1-a):1:3*n*(1-n)**2*e+3*n**2*(1-n)*i+n**3}},steps:function(a,e="end"){e=e.split("-").reverse()[0];let t=a;return e==="none"?--t:e==="both"&&++t,(i,n=!1)=>{let r=Math.floor(i*a);const o=i*r%1==0;return e!=="start"&&e!=="both"||++r,n&&o&&--r,i>=0&&r<0&&(r=0),i<=1&&r>t&&(r=t),r/t}}};class jw{done(){return!1}}class n1 extends jw{constructor(e=R5){super(),this.ease=V5[e]||e}step(e,t,i){return typeof e!="number"?i<1?e:t:e+(t-e)*this.ease(i)}}class D_ extends jw{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,t,i,n){return this.stepper(e,t,i,n)}}function GA(){const a=(this._duration||500)/1e3,e=this._overshoot||0,t=Math.PI,i=Math.log(e/100+1e-10),n=-i/Math.sqrt(t*t+i*i),r=3.9/(n*a);this.d=2*n*r,this.k=r*r}sa(class extends D_{constructor(a=500,e=0){super(),this.duration(a).overshoot(e)}step(a,e,t,i){if(typeof a=="string")return a;if(i.done=t===1/0,t===1/0)return e;if(t===0)return a;t>100&&(t=16),t/=1e3;const n=i.velocity||0,r=-this.d*n-this.k*(a-e),o=a+n*t+r*t*t/2;return i.velocity=n+r*t,i.done=Math.abs(e-o)+Math.abs(n)<.002,i.done?e:o}},{duration:Np("_duration",GA),overshoot:Np("_overshoot",GA)});sa(class extends D_{constructor(a=.1,e=.01,t=0,i=1e3){super(),this.p(a).i(e).d(t).windup(i)}step(a,e,t,i){if(typeof a=="string")return a;if(i.done=t===1/0,t===1/0)return e;if(t===0)return a;const n=e-a;let r=(i.integral||0)+n*t;const o=(n-(i.error||0))/t,s=this._windup;return s!==!1&&(r=Math.max(-s,Math.min(r,s))),i.error=n,i.integral=r,i.done=Math.abs(n)<.001,i.done?e:a+(this.P*n+this.I*r+this.D*o)}},{windup:Np("_windup"),p:Np("P"),i:Np("I"),d:Np("D")});const H5={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},a1={M:function(a,e,t){return e.x=t.x=a[0],e.y=t.y=a[1],["M",e.x,e.y]},L:function(a,e){return e.x=a[0],e.y=a[1],["L",a[0],a[1]]},H:function(a,e){return e.x=a[0],["H",a[0]]},V:function(a,e){return e.y=a[0],["V",a[0]]},C:function(a,e){return e.x=a[4],e.y=a[5],["C",a[0],a[1],a[2],a[3],a[4],a[5]]},S:function(a,e){return e.x=a[2],e.y=a[3],["S",a[0],a[1],a[2],a[3]]},Q:function(a,e){return e.x=a[2],e.y=a[3],["Q",a[0],a[1],a[2],a[3]]},T:function(a,e){return e.x=a[0],e.y=a[1],["T",a[0],a[1]]},Z:function(a,e,t){return e.x=t.x,e.y=t.y,["Z"]},A:function(a,e){return e.x=a[5],e.y=a[6],["A",a[0],a[1],a[2],a[3],a[4],a[5],a[6]]}},Zv="mlhvqtcsaz".split("");for(let a=0,e=Zv.length;a<e;++a)a1[Zv[a]]=(function(t){return function(i,n,r){if(t==="H")i[0]=i[0]+n.x;else if(t==="V")i[0]=i[0]+n.y;else if(t==="A")i[5]=i[5]+n.x,i[6]=i[6]+n.y;else for(let o=0,s=i.length;o<s;++o)i[o]=i[o]+(o%2?n.y:n.x);return a1[t](i,n,r)}})(Zv[a].toUpperCase());function r1(a){return a.segment.length&&a.segment.length-1===H5[a.segment[0].toUpperCase()]}function U5(a,e){a.inNumber&&cf(a,!1);const t=Ow.test(e);if(t)a.segment=[e];else{const i=a.lastCommand,n=i.toLowerCase(),r=i===n;a.segment=[n==="m"?r?"l":"L":i]}return a.inSegment=!0,a.lastCommand=a.segment[0],t}function cf(a,e){if(!a.inNumber)throw new Error("Parser Error");a.number&&a.segment.push(parseFloat(a.number)),a.inNumber=e,a.number="",a.pointSeen=!1,a.hasExponent=!1,r1(a)&&s1(a)}function s1(a){a.inSegment=!1,a.absolute&&(a.segment=(function(e){const t=e.segment[0];return a1[t](e.segment.slice(1),e.p,e.p0)})(a)),a.segments.push(a.segment)}function $5(a){if(!a.segment.length)return!1;const e=a.segment[0].toUpperCase()==="A",t=a.segment.length;return e&&(t===4||t===5)}function G5(a){return a.lastToken.toUpperCase()==="E"}const W5=new Set([" ",",","	",`
`,"\r","\f"]);class au extends jf{bbox(){return Jh().path.setAttribute("d",this.toString()),new Ds(Jh.nodes.path.getBBox())}move(e,t){const i=this.bbox();if(e-=i.x,t-=i.y,!isNaN(e)&&!isNaN(t))for(let n,r=this.length-1;r>=0;r--)n=this[r][0],n==="M"||n==="L"||n==="T"?(this[r][1]+=e,this[r][2]+=t):n==="H"?this[r][1]+=e:n==="V"?this[r][1]+=t:n==="C"||n==="S"||n==="Q"?(this[r][1]+=e,this[r][2]+=t,this[r][3]+=e,this[r][4]+=t,n==="C"&&(this[r][5]+=e,this[r][6]+=t)):n==="A"&&(this[r][6]+=e,this[r][7]+=t);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),(function(t,i=!0){let n=0,r="";const o={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:i,p0:new or,p:new or};for(;o.lastToken=r,r=t.charAt(n++);)if(o.inSegment||!U5(o,r))if(r!==".")if(isNaN(parseInt(r)))if(W5.has(r))o.inNumber&&cf(o,!1);else if(r!=="-"&&r!=="+")if(r.toUpperCase()!=="E"){if(Ow.test(r)){if(o.inNumber)cf(o,!1);else{if(!r1(o))throw new Error("parser Error");s1(o)}--n}}else o.number+=r,o.hasExponent=!0;else{if(o.inNumber&&!G5(o)){cf(o,!1),--n;continue}o.number+=r,o.inNumber=!0}else{if(o.number==="0"||$5(o)){o.inNumber=!0,o.number=r,cf(o,!0);continue}o.inNumber=!0,o.number+=r}else{if(o.pointSeen||o.hasExponent){cf(o,!1),--n;continue}o.inNumber=!0,o.pointSeen=!0,o.number+=r}return o.inNumber&&cf(o,!1),o.inSegment&&r1(o)&&s1(o),o.segments})(e)}size(e,t){const i=this.bbox();let n,r;for(i.width=i.width===0?1:i.width,i.height=i.height===0?1:i.height,n=this.length-1;n>=0;n--)r=this[n][0],r==="M"||r==="L"||r==="T"?(this[n][1]=(this[n][1]-i.x)*e/i.width+i.x,this[n][2]=(this[n][2]-i.y)*t/i.height+i.y):r==="H"?this[n][1]=(this[n][1]-i.x)*e/i.width+i.x:r==="V"?this[n][1]=(this[n][1]-i.y)*t/i.height+i.y:r==="C"||r==="S"||r==="Q"?(this[n][1]=(this[n][1]-i.x)*e/i.width+i.x,this[n][2]=(this[n][2]-i.y)*t/i.height+i.y,this[n][3]=(this[n][3]-i.x)*e/i.width+i.x,this[n][4]=(this[n][4]-i.y)*t/i.height+i.y,r==="C"&&(this[n][5]=(this[n][5]-i.x)*e/i.width+i.x,this[n][6]=(this[n][6]-i.y)*t/i.height+i.y)):r==="A"&&(this[n][1]=this[n][1]*e/i.width,this[n][2]=this[n][2]*t/i.height,this[n][6]=(this[n][6]-i.x)*e/i.width+i.x,this[n][7]=(this[n][7]-i.y)*t/i.height+i.y);return this}toString(){return(function(e){let t="";for(let i=0,n=e.length;i<n;i++)t+=e[i][0],e[i][1]!=null&&(t+=e[i][1],e[i][2]!=null&&(t+=" ",t+=e[i][2],e[i][3]!=null&&(t+=" ",t+=e[i][3],t+=" ",t+=e[i][4],e[i][5]!=null&&(t+=" ",t+=e[i][5],t+=" ",t+=e[i][6],e[i][7]!=null&&(t+=" ",t+=e[i][7])))));return t+" "})(this)}}const KI=a=>{const e=typeof a;return e==="number"?ma:e==="string"?Ar.isColor(a)?Ar:Bh.test(a)?Ow.test(a)?au:jf:FI.test(a)?ma:o1:l1.indexOf(a.constructor)>-1?a.constructor:Array.isArray(a)?jf:e==="object"?ly:o1};class uf{constructor(e){this._stepper=e||new n1("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce((function(e,t){return e&&t}),!0)}from(e){return e==null?this._from:(this._from=this._set(e),this)}stepper(e){return e==null?this._stepper:(this._stepper=e,this)}to(e){return e==null?this._to:(this._to=this._set(e),this)}type(e){return e==null?this._type:(this._type=e,this)}_set(e){this._type||this.type(KI(e));let t=new this._type(e);return this._type===Ar&&(t=this._to?t[this._to[4]]():this._from?t[this._from[4]]():t),this._type===ly&&(t=this._to?t.align(this._to):this._from?t.align(this._from):t),t=t.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(t.length)).map(Object).map((function(i){return i.done=!0,i})),t}}class o1{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class ky{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,ky.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}ky.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const X5=(a,e)=>a[0]<e[0]?-1:a[0]>e[0]?1:0;class ly{constructor(...e){this.init(...e)}align(e){const t=this.values;for(let i=0,n=t.length;i<n;++i){if(t[i+1]===e[i+1]){if(t[i+1]===Ar&&e[i+7]!==t[i+7]){const s=e[i+7],h=new Ar(this.values.splice(i+3,5))[s]().toArray();this.values.splice(i+3,0,...h)}i+=t[i+2]+2;continue}if(!e[i+1])return this;const r=new e[i+1]().toArray(),o=t[i+2]+3;t.splice(i,o,e[i],e[i+1],e[i+2],...r),i+=t[i+2]+2}return this}init(e){if(this.values=[],Array.isArray(e))return void(this.values=e.slice());e=e||{};const t=[];for(const i in e){const n=KI(e[i]),r=new n(e[i]).toArray();t.push([i,n,r.length,...r])}return t.sort(X5),this.values=t.reduce(((i,n)=>i.concat(n)),[]),this}toArray(){return this.values}valueOf(){const e={},t=this.values;for(;t.length;){const i=t.shift(),n=t.shift(),r=t.shift(),o=t.splice(0,r);e[i]=new n(o)}return e}}const l1=[o1,ky,ly];class Qp extends pc{constructor(e,t=e){super(Or("path",e),t)}array(){return this._array||(this._array=new au(this.attr("d")))}clear(){return delete this._array,this}height(e){return e==null?this.bbox().height:this.size(this.bbox().width,e)}move(e,t){return this.attr("d",this.array().move(e,t))}plot(e){return e==null?this.array():this.clear().attr("d",typeof e=="string"?e:this._array=new au(e))}size(e,t){const i=yg(this,e,t);return this.attr("d",this.array().size(i.width,i.height))}width(e){return e==null?this.bbox().width:this.size(e,this.bbox().height)}x(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}y(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}}Qp.prototype.MorphArray=au,Ea({Container:{path:Rr((function(a){return this.put(new Qp).plot(a||new au)}))}}),qa(Qp,"Path");var JI=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new bd(this.attr("points")))},clear:function(){return delete this._array,this},move:function(a,e){return this.attr("points",this.array().move(a,e))},plot:function(a){return a==null?this.array():this.clear().attr("points",typeof a=="string"?a:this._array=new bd(a))},size:function(a,e){const t=yg(this,a,e);return this.attr("points",this.array().size(t.width,t.height))}});class _f extends pc{constructor(e,t=e){super(Or("polygon",e),t)}}Ea({Container:{polygon:Rr((function(a){return this.put(new _f).plot(a||new bd)}))}}),sa(_f,Bw),sa(_f,JI),qa(_f,"Polygon");class xf extends pc{constructor(e,t=e){super(Or("polyline",e),t)}}Ea({Container:{polyline:Rr((function(a){return this.put(new xf).plot(a||new bd)}))}}),sa(xf,Bw),sa(xf,JI),qa(xf,"Polyline");class i_ extends pc{constructor(e,t=e){super(Or("rect",e),t)}}sa(i_,{rx:Fw,ry:Nw}),Ea({Container:{rect:Rr((function(a,e){return this.put(new i_).size(a,e)}))}}),qa(i_,"Rect");class Kv{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const t=e.next!==void 0?e:{value:e,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const yr={nextDraw:null,frames:new Kv,timeouts:new Kv,immediates:new Kv,timer:()=>Ya.window.performance||Ya.window.Date,transforms:[],frame(a){const e=yr.frames.push({run:a});return yr.nextDraw===null&&(yr.nextDraw=Ya.window.requestAnimationFrame(yr._draw)),e},timeout(a,e){e=e||0;const t=yr.timer().now()+e,i=yr.timeouts.push({run:a,time:t});return yr.nextDraw===null&&(yr.nextDraw=Ya.window.requestAnimationFrame(yr._draw)),i},immediate(a){const e=yr.immediates.push(a);return yr.nextDraw===null&&(yr.nextDraw=Ya.window.requestAnimationFrame(yr._draw)),e},cancelFrame(a){a!=null&&yr.frames.remove(a)},clearTimeout(a){a!=null&&yr.timeouts.remove(a)},cancelImmediate(a){a!=null&&yr.immediates.remove(a)},_draw(a){let e=null;const t=yr.timeouts.last();for(;(e=yr.timeouts.shift())&&(a>=e.time?e.run():yr.timeouts.push(e),e!==t););let i=null;const n=yr.frames.last();for(;i!==n&&(i=yr.frames.shift());)i.run(a);let r=null;for(;r=yr.immediates.shift();)r();yr.nextDraw=yr.timeouts.first()||yr.frames.first()?Ya.window.requestAnimationFrame(yr._draw):null}},Y5=function(a){const e=a.start,t=a.runner.duration();return{start:e,duration:t,end:e+t,runner:a.runner}},q5=function(){const a=Ya.window;return(a.performance||a.Date).now()};class QI extends Sy{constructor(e=q5){super(),this._timeSource=e,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),t=e?e.runner.duration():0;return(e?e.start:this._time)+t}getEndTimeOfTimeline(){const e=this._runners.map((t=>t.start+t.runner.duration()));return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return e==null?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const t=this.speed();if(e==null)return this.speed(-t);const i=Math.abs(t);return this.speed(e?-i:i)}schedule(e,t,i){if(e==null)return this._runners.map(Y5);let n=0;const r=this.getEndTime();if(t=t||0,i==null||i==="last"||i==="after")n=r;else if(i==="absolute"||i==="start")n=t,t=0;else if(i==="now")n=this._time;else if(i==="relative"){const h=this.getRunnerInfoById(e.id);h&&(n=h.start+t,t=0)}else{if(i!=="with-last")throw new Error('Invalid value for the "when" parameter');{const h=this.getLastRunnerInfo();n=h?h.start:this._time}}e.unschedule(),e.timeline(this);const o=e.persist(),s={persist:o===null?this._persist:o,start:n+t,runner:e};return this._lastRunnerId=e.id,this._runners.push(s),this._runners.sort(((h,f)=>h.start-f.start)),this._runnerIds=this._runners.map((h=>h.runner.id)),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return e==null?this._timeSource:(this._timeSource=e,this)}speed(e){return e==null?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return e==null?this._time:(this._time=e,this._continue(!0))}unschedule(e){const t=this._runnerIds.indexOf(e.id);return t<0||(this._runners.splice(t,1),this._runnerIds.splice(t,1),e.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return yr.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():(this._paused||(this._nextFrame=yr.frame(this._step)),this)}_stepFn(e=!1){const t=this._timeSource();let i=t-this._lastSourceTime;e&&(i=0);const n=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=t,e||(this._time+=n,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const s=this._runners[o],h=s.runner;this._time-s.start<=0&&h.reset()}let r=!1;for(let o=0,s=this._runners.length;o<s;o++){const h=this._runners[o],f=h.runner;let y=n;const x=this._time-h.start;if(x<=0){r=!0;continue}x<y&&(y=x),f.active()&&(f.step(y).done?h.persist!==!0&&f.duration()-f.time()+this._time+h.persist<this._time&&(f.unschedule(),--o,--s):r=!0)}return r&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}Ea({Element:{timeline:function(a){return a==null?(this._timeline=this._timeline||new QI,this._timeline):(this._timeline=a,this)}}});class hc extends Sy{constructor(e){super(),this.id=hc.id++,e=typeof(e=e??qv)=="function"?new D_(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof e=="number"&&e,this._isDeclarative=e instanceof D_,this._stepper=this._isDeclarative?e:new n1,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new Xn,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(e,t,i){let n=1,r=!1,o=0;return t=t??O5,i=i||"last",typeof(e=e??qv)!="object"||e instanceof jw||(t=e.delay??t,i=e.when??i,r=e.swing||r,n=e.times??n,o=e.wait??o,e=e.duration??qv),{duration:e,delay:t,swing:r,times:n,wait:o,when:i}}active(e){return e==null?this.enabled:(this.enabled=e,this)}addTransform(e){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,t,i){const n=hc.sanitise(e,t,i),r=new hc(n.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(n).schedule(n.delay,n.when)}clearTransform(){return this.transforms=new Xn,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((e=>!e.isTransform)))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new n1(e),this}element(e){return e==null?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,t,i){return typeof e=="object"&&(t=e.swing,i=e.wait,e=e.times),this._times=e||1/0,this._swing=t||!1,this._wait=i||0,this._times===!0&&(this._times=1/0),this}loops(e){const t=this._duration+this._wait;if(e==null){const r=Math.floor(this._time/t),o=(this._time-r*t)/this._duration;return Math.min(r+o,this._times)}const i=e%1,n=t*Math.floor(e)+this._duration*i;return this.time(n)}persist(e){return e==null?this._persist:(this._persist=e,this)}position(e){const t=this._time,i=this._duration,n=this._wait,r=this._times,o=this._swing,s=this._reverse;let h;if(e==null){const x=function(E){const z=o*Math.floor(E%(2*(n+i))/(n+i)),D=z&&!s||!z&&s,F=Math.pow(-1,D)*(E%(n+i))/i+D;return Math.max(Math.min(F,1),0)},S=r*(n+i)-n;return h=t<=0?Math.round(x(1e-5)):t<S?x(t):Math.round(x(S-1e-5)),h}const f=Math.floor(this.loops()),y=o&&f%2==0;return h=f+(y&&!s||s&&y?e:1-e),this.loops(h)}progress(e){return e==null?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,t,i,n){return this._queue.push({initialiser:e||UA,runner:t||UA,retarget:i,isTransform:n,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,t,i){if(e instanceof QI||(i=t,t=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,t,i),this}step(e){if(!this.enabled)return this;e=e??16,this._time+=e;const t=this.position(),i=this._lastPosition!==t&&this._time>=0;this._lastPosition=t;const n=this.duration(),r=this._lastTime<=0&&this._time>0,o=this._lastTime<n&&this._time>=n;this._lastTime=this._time,r&&this.fire("start",this);const s=this._isDeclarative;this.done=!s&&!o&&this._time>=n,this._reseted=!1;let h=!1;return(i||s)&&(this._initialise(i),this.transforms=new Xn,h=this._run(s?e:t),this.fire("step",this)),this.done=this.done||h&&s,o&&this.fire("finished",this),this}time(e){if(e==null)return this._time;const t=e-this._time;return this.step(t),this}timeline(e){return e===void 0?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(e||this._isDeclarative)for(let t=0,i=this._queue.length;t<i;++t){const n=this._queue[t],r=this._isDeclarative||!n.initialised&&e;e=!n.finished,r&&e&&(n.initialiser.call(this),n.initialised=!0)}}_rememberMorpher(e,t){if(this._history[e]={morpher:t,caller:this._queue[this._queue.length-1]},this._isDeclarative){const i=this.timeline();i&&i.play()}}_run(e){let t=!0;for(let i=0,n=this._queue.length;i<n;++i){const r=this._queue[i],o=r.runner.call(this,e);r.finished=r.finished||o===!0,t=t&&r.finished}return t}_tryRetarget(e,t,i){if(this._history[e]){if(!this._history[e].caller.initialised){const r=this._queue.indexOf(this._history[e].caller);return this._queue.splice(r,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,t,i):this._history[e].morpher.to(t),this._history[e].caller.finished=!1;const n=this.timeline();return n&&n.play(),!0}return!1}}hc.id=0;class R_{constructor(e=new Xn,t=-1,i=!0){this.transforms=e,this.id=t,this.done=i}clearTransformsFromQueue(){}}sa([hc,R_],{mergeWith(a){return new R_(a.transforms.lmultiply(this.transforms),a.id)}});const eP=(a,e)=>a.lmultiplyO(e),tP=a=>a.transforms;function Z5(){const a=this._transformationRunners.runners.map(tP).reduce(eP,new Xn);this.transform(a),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class K5{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const t=e.id+1;return this.runners.push(e),this.ids.push(t),this}clearBefore(e){const t=this.ids.indexOf(e+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new R_).forEach((i=>i.clearTransformsFromQueue())),this}edit(e,t){const i=this.ids.indexOf(e+1);return this.ids.splice(i,1,e+1),this.runners.splice(i,1,t),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){const i=this.runners[t];if(e&&i.done&&e.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))){this.remove(i.id);const n=i.mergeWith(e);this.edit(e.id,n),e=n,--t}else e=i}return this}remove(e){const t=this.ids.indexOf(e+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}Ea({Element:{animate(a,e,t){const i=hc.sanitise(a,e,t),n=this.timeline();return new hc(i.duration).loop(i).element(this).timeline(n.play()).schedule(i.delay,i.when)},delay(a,e){return this.animate(0,a,e)},_clearTransformRunnersBefore(a){this._transformationRunners.clearBefore(a.id)},_currentTransform(a){return this._transformationRunners.runners.filter((e=>e.id<=a.id)).map(tP).reduce(eP,new Xn)},_addRunner(a){this._transformationRunners.add(a),yr.cancelImmediate(this._frameId),this._frameId=yr.immediate(Z5.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new K5().add(new R_(new Xn(this))))}}});sa(hc,{attr(a,e){return this.styleAttr("attr",a,e)},css(a,e){return this.styleAttr("css",a,e)},styleAttr(a,e,t){if(typeof e=="string")return this.styleAttr(a,{[e]:t});let i=e;if(this._tryRetarget(a,i))return this;let n=new uf(this._stepper).to(i),r=Object.keys(i);return this.queue((function(){n=n.from(this.element()[a](r))}),(function(o){return this.element()[a](n.at(o).valueOf()),n.done()}),(function(o){const s=Object.keys(o),h=(f=r,s.filter((x=>!f.includes(x))));var f;if(h.length){const x=this.element()[a](h),S=new ly(n.from()).valueOf();Object.assign(S,x),n.from(S)}const y=new ly(n.to()).valueOf();Object.assign(y,o),n.to(y),r=s,i=o})),this._rememberMorpher(a,n),this},zoom(a,e){if(this._tryRetarget("zoom",a,e))return this;let t=new uf(this._stepper).to(new ma(a));return this.queue((function(){t=t.from(this.element().zoom())}),(function(i){return this.element().zoom(t.at(i),e),t.done()}),(function(i,n){e=n,t.to(i)})),this._rememberMorpher("zoom",t),this},transform(a,e,t){if(e=a.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",a))return this;const i=Xn.isMatrixLike(a);t=a.affine!=null?a.affine:t??!i;const n=new uf(this._stepper).type(t?ky:Xn);let r,o,s,h,f;return this.queue((function(){o=o||this.element(),r=r||t1(a,o),f=new Xn(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(y){e||this.clearTransform();const{x,y:S}=new or(r).transform(o._currentTransform(this));let E=new Xn({...a,origin:[x,S]}),z=this._isDeclarative&&s?s:f;if(t){E=E.decompose(x,S),z=z.decompose(x,S);const F=E.rotate,U=z.rotate,G=[F-360,F,F+360],Z=G.map((le=>Math.abs(le-U))),ee=Math.min(...Z),ie=Z.indexOf(ee);E.rotate=G[ie]}e&&(i||(E.rotate=a.rotate||0),this._isDeclarative&&h&&(z.rotate=h)),n.from(z),n.to(E);const D=n.at(y);return h=D.rotate,s=new Xn(D),this.addTransform(s),o._addRunner(this),n.done()}),(function(y){(y.origin||"center").toString()!==(a.origin||"center").toString()&&(r=t1(y,o)),a={...y,origin:r}}),!0),this._isDeclarative&&this._rememberMorpher("transform",n),this},x(a){return this._queueNumber("x",a)},y(a){return this._queueNumber("y",a)},ax(a){return this._queueNumber("ax",a)},ay(a){return this._queueNumber("ay",a)},dx(a=0){return this._queueNumberDelta("x",a)},dy(a=0){return this._queueNumberDelta("y",a)},dmove(a,e){return this.dx(a).dy(e)},_queueNumberDelta(a,e){if(e=new ma(e),this._tryRetarget(a,e))return this;const t=new uf(this._stepper).to(e);let i=null;return this.queue((function(){i=this.element()[a](),t.from(i),t.to(i+e)}),(function(n){return this.element()[a](t.at(n)),t.done()}),(function(n){t.to(i+new ma(n))})),this._rememberMorpher(a,t),this},_queueObject(a,e){if(this._tryRetarget(a,e))return this;const t=new uf(this._stepper).to(e);return this.queue((function(){t.from(this.element()[a]())}),(function(i){return this.element()[a](t.at(i)),t.done()})),this._rememberMorpher(a,t),this},_queueNumber(a,e){return this._queueObject(a,new ma(e))},cx(a){return this._queueNumber("cx",a)},cy(a){return this._queueNumber("cy",a)},move(a,e){return this.x(a).y(e)},amove(a,e){return this.ax(a).ay(e)},center(a,e){return this.cx(a).cy(e)},size(a,e){let t;return a&&e||(t=this._element.bbox()),a||(a=t.width/t.height*e),e||(e=t.height/t.width*a),this.width(a).height(e)},width(a){return this._queueNumber("width",a)},height(a){return this._queueNumber("height",a)},plot(a,e,t,i){if(arguments.length===4)return this.plot([a,e,t,i]);if(this._tryRetarget("plot",a))return this;const n=new uf(this._stepper).type(this._element.MorphArray).to(a);return this.queue((function(){n.from(this._element.array())}),(function(r){return this._element.plot(n.at(r)),n.done()})),this._rememberMorpher("plot",n),this},leading(a){return this._queueNumber("leading",a)},viewbox(a,e,t,i){return this._queueObject("viewbox",new Ds(a,e,t,i))},update(a){return typeof a!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(a.opacity!=null&&this.attr("stop-opacity",a.opacity),a.color!=null&&this.attr("stop-color",a.color),a.offset!=null&&this.attr("offset",a.offset),this)}}),sa(hc,{rx:Fw,ry:Nw,from:qI,to:ZI}),qa(hc,"Runner");class c1 extends ml{constructor(e,t=e){super(Or("svg",e),t),this.namespace()}defs(){return this.isRoot()?Mc(this.node.querySelector("defs"))||this.put(new ax):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof Ya.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Lw,version:"1.1"}).attr("xmlns:xlink",_g,Wv):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Wv).attr("xmlns:svgjs",null,Wv)}root(){return this.isRoot()?this:super.root()}}Ea({Container:{nested:Rr((function(){return this.put(new c1)}))}}),qa(c1,"Svg",!0);let u1=class extends ml{constructor(a,e=a){super(Or("symbol",a),e)}};Ea({Container:{symbol:Rr((function(){return this.put(new u1)}))}}),qa(u1,"Symbol");var iP=Object.freeze({__proto__:null,amove:function(a,e){return this.ax(a).ay(e)},ax:function(a){return this.attr("x",a)},ay:function(a){return this.attr("y",a)},build:function(a){return this._build=!!a,this},center:function(a,e,t=this.bbox()){return this.cx(a,t).cy(e,t)},cx:function(a,e=this.bbox()){return a==null?e.cx:this.attr("x",this.attr("x")+a-e.cx)},cy:function(a,e=this.bbox()){return a==null?e.cy:this.attr("y",this.attr("y")+a-e.cy)},length:function(){return this.node.getComputedTextLength()},move:function(a,e,t=this.bbox()){return this.x(a,t).y(e,t)},plain:function(a){return this._build===!1&&this.clear(),this.node.appendChild(Ya.document.createTextNode(a)),this},x:function(a,e=this.bbox()){return a==null?e.x:this.attr("x",this.attr("x")+a-e.x)},y:function(a,e=this.bbox()){return a==null?e.y:this.attr("y",this.attr("y")+a-e.y)}});class ru extends pc{constructor(e,t=e){super(Or("text",e),t),this.dom.leading=this.dom.leading??new ma(1.3),this._rebuild=!0,this._build=!1}leading(e){return e==null?this.dom.leading:(this.dom.leading=new ma(e),this.rebuild())}rebuild(e){if(typeof e=="boolean"&&(this._rebuild=e),this._rebuild){const t=this;let i=0;const n=this.dom.leading;this.each((function(r){if(i1(this.node))return;const o=Ya.window.getComputedStyle(this.node).getPropertyValue("font-size"),s=n*new ma(o);this.dom.newLined&&(this.attr("x",t.attr("x")),this.text()===`
`?i+=s:(this.attr("dy",r?s+i:0),i=0))})),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new ma(e.leading||1.3),this}writeDataToDom(){return RI(this,this.dom,{leading:1.3}),this}text(e){if(e===void 0){const t=this.node.childNodes;let i=0;e="";for(let n=0,r=t.length;n<r;++n)t[n].nodeName==="textPath"||i1(t[n])?n===0&&(i=n+1):(n!==i&&t[n].nodeType!==3&&Mc(t[n]).dom.newLined===!0&&(e+=`
`),e+=t[n].textContent);return e}if(this.clear().build(!0),typeof e=="function")e.call(this,this);else for(let t=0,i=(e=(e+"").split(`
`)).length;t<i;t++)this.newLine(e[t]);return this.build(!1).rebuild()}}sa(ru,iP),Ea({Container:{text:Rr((function(a=""){return this.put(new ru).text(a)})),plain:Rr((function(a=""){return this.put(new ru).plain(a)}))}}),qa(ru,"Text");class n_ extends pc{constructor(e,t=e){super(Or("tspan",e),t),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof ru))return this;const t=e.index(this),i=Ya.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=e.dom.leading*new ma(i);return this.dy(t?n:0).attr("x",e.x())}text(e){return e==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof e=="function"?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}sa(n_,iP),Ea({Tspan:{tspan:Rr((function(a=""){const e=new n_;return this._build||this.clear(),this.put(e).text(a)}))},Text:{newLine:function(a=""){return this.tspan(a).newLine()}}}),qa(n_,"Tspan");class Jv extends pc{constructor(e,t=e){super(Or("circle",e),t)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new ma(e).divide(2))}}sa(Jv,{x:HI,y:UI,cx:$I,cy:GI,width:WI,height:XI}),Ea({Container:{circle:Rr((function(a=0){return this.put(new Jv).size(a).move(0,0)}))}}),qa(Jv,"Circle");class Qv extends ml{constructor(e,t=e){super(Or("clipPath",e),t)}remove(){return this.targets().forEach((function(e){e.unclip()})),super.remove()}targets(){return Gf("svg [clip-path*="+this.id()+"]")}}Ea({Container:{clip:Rr((function(){return this.defs().put(new Qv)}))},Element:{clipper(){return this.reference("clip-path")},clipWith(a){const e=a instanceof Qv?a:this.parent().clip().add(a);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}}),qa(Qv,"ClipPath");class WA extends Ro{constructor(e,t=e){super(Or("foreignObject",e),t)}}Ea({Container:{foreignObject:Rr((function(a,e){return this.put(new WA).size(a,e)}))}}),qa(WA,"ForeignObject");var nP=Object.freeze({__proto__:null,dmove:function(a,e){return this.children().forEach((t=>{let i;try{i=t.node instanceof wy().SVGSVGElement?new Ds(t.attr(["x","y","width","height"])):t.bbox()}catch{return}const n=new Xn(t),r=n.translate(a,e).transform(n.inverse()),o=new or(i.x,i.y).transform(r);t.move(o.x,o.y)})),this},dx:function(a){return this.dmove(a,0)},dy:function(a){return this.dmove(0,a)},height:function(a,e=this.bbox()){return a==null?e.height:this.size(e.width,a,e)},move:function(a=0,e=0,t=this.bbox()){const i=a-t.x,n=e-t.y;return this.dmove(i,n)},size:function(a,e,t=this.bbox()){const i=yg(this,a,e,t),n=i.width/t.width,r=i.height/t.height;return this.children().forEach((o=>{const s=new or(t).transform(new Xn(o).inverse());o.scale(n,r,s.x,s.y)})),this},width:function(a,e=this.bbox()){return a==null?e.width:this.size(a,e.height,e)},x:function(a,e=this.bbox()){return a==null?e.x:this.move(a,e.y,e)},y:function(a,e=this.bbox()){return a==null?e.y:this.move(e.x,a,e)}});class fd extends ml{constructor(e,t=e){super(Or("g",e),t)}}sa(fd,nP),Ea({Container:{group:Rr((function(){return this.put(new fd)}))}}),qa(fd,"G");class z0 extends ml{constructor(e,t=e){super(Or("a",e),t)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,_g)}}sa(z0,nP),Ea({Container:{link:Rr((function(a){return this.put(new z0).to(a)}))},Element:{unlink(){const a=this.linker();if(!a)return this;const e=a.parent();if(!e)return this.remove();const t=e.index(a);return e.add(this,t),a.remove(),this},linkTo(a){let e=this.linker();return e||(e=new z0,this.wrap(e)),typeof a=="function"?a.call(e,e):e.to(a),this},linker(){const a=this.parent();return a&&a.node.nodeName.toLowerCase()==="a"?a:null}}}),qa(z0,"A");class eb extends ml{constructor(e,t=e){super(Or("mask",e),t)}remove(){return this.targets().forEach((function(e){e.unmask()})),super.remove()}targets(){return Gf("svg [mask*="+this.id()+"]")}}Ea({Container:{mask:Rr((function(){return this.defs().put(new eb)}))},Element:{masker(){return this.reference("mask")},maskWith(a){const e=a instanceof eb?a:this.parent().mask().add(a);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}}),qa(eb,"Mask");class XA extends Ro{constructor(e,t=e){super(Or("stop",e),t)}update(e){return(typeof e=="number"||e instanceof ma)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new ma(e.offset)),this}}Ea({Gradient:{stop:function(a,e,t){return this.put(new XA).update(a,e,t)}}}),qa(XA,"Stop");class tb extends Ro{constructor(e,t=e){super(Or("style",e),t)}addText(e=""){return this.node.textContent+=e,this}font(e,t,i={}){return this.rule("@font-face",{fontFamily:e,src:t,...i})}rule(e,t){return this.addText((function(i,n){if(!i)return"";if(!n)return i;let r=i+"{";for(const o in n)r+=o.replace(/([A-Z])/g,(function(s,h){return"-"+h.toLowerCase()}))+":"+n[o]+";";return r+="}",r})(e,t))}}Ea("Dom",{style(a,e){return this.put(new tb).rule(a,e)},fontface(a,e,t){return this.put(new tb).font(a,e,t)}}),qa(tb,"Style");class ib extends ru{constructor(e,t=e){super(Or("textPath",e),t)}array(){const e=this.track();return e?e.array():null}plot(e){const t=this.track();let i=null;return t&&(i=t.plot(e)),e==null?i:this}track(){return this.reference("href")}}Ea({Container:{textPath:Rr((function(a,e){return a instanceof ru||(a=this.text(a)),a.path(e)}))},Text:{path:Rr((function(a,e=!0){const t=new ib;let i;if(a instanceof Qp||(a=this.defs().path(a)),t.attr("href","#"+a,_g),e)for(;i=this.node.firstChild;)t.node.appendChild(i);return this.put(t)})),textPath(){return this.findOne("textPath")}},Path:{text:Rr((function(a){return a instanceof ru||(a=new ru().addTo(this.parent()).text(a)),a.path(this)})),targets(){return Gf("svg textPath").filter((a=>(a.attr("href")||"").includes(this.id())))}}}),ib.prototype.MorphArray=au,qa(ib,"TextPath");class YA extends pc{constructor(e,t=e){super(Or("use",e),t)}use(e,t){return this.attr("href",(t||"")+"#"+e,_g)}}Ea({Container:{use:Rr((function(a,e){return this.put(new YA).use(a,e)}))}}),qa(YA,"Use");const J5=pl;sa([c1,u1,e_,oy,t_],Ml("viewbox")),sa([yf,xf,_f,Qp],Ml("marker")),sa(ru,Ml("Text")),sa(Qp,Ml("Path")),sa(ax,Ml("Defs")),sa([ru,n_],Ml("Tspan")),sa([i_,Q0,Vm,hc],Ml("radius")),sa(Sy,Ml("EventTarget")),sa(vd,Ml("Dom")),sa(Ro,Ml("Element")),sa(pc,Ml("Shape")),sa([ml,YI],Ml("Container")),sa(Vm,Ml("Gradient")),sa(hc,Ml("Runner")),Bf.extend([...new Set(LI)]),(function(a=[]){l1.push(...[].concat(a))})([ma,Ar,Ds,Xn,jf,bd,au,or]),sa(l1,{to(a){return new uf().type(this.constructor).from(this.toArray()).to(a)},fromArray(a){return this.init(a),this},toConsumable(){return this.toArray()},morph(a,e,t,i,n){return this.fromArray(a.map((function(r,o){return i.step(r,e[o],t,n[o],n)})))}});class Kr extends Ro{constructor(e){super(Or("filter",e),e),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(e,t){return!(e=super.put(e,t)).attr("in")&&this.$autoSetIn&&e.attr("in",this.$source),e.attr("result")||e.attr("result",e.id()),e}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return Gf('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class Vw extends Ro{constructor(e,t){super(e,t),this.result(this.id())}in(e){if(e==null){const t=this.attr("in");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in",e)}result(e){return this.attr("result",e)}toString(){return this.result()}}const Tc=a=>function(...e){for(let t=a.length;t--;)e[t]!=null&&this.attr(a[t],e[t])},Q5={blend:Tc(["in","in2","mode"]),colorMatrix:Tc(["type","values"]),composite:Tc(["in","in2","operator"]),convolveMatrix:function(a){a=new jf(a).toString(),this.attr({order:Math.sqrt(a.split(" ").length),kernelMatrix:a})},diffuseLighting:Tc(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:Tc(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:Tc(["in","dx","dy","stdDeviation"]),flood:Tc(["flood-color","flood-opacity"]),gaussianBlur:function(a=0,e=a){this.attr("stdDeviation",a+" "+e)},image:function(a){this.attr("href",a,_g)},morphology:Tc(["operator","radius"]),offset:Tc(["dx","dy"]),specularLighting:Tc(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:Tc([]),turbulence:Tc(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach((a=>{const e=mg(a),t=Q5[a];Kr[e+"Effect"]=class extends Vw{constructor(i){super(Or("fe"+e,i),i)}update(i){return t.apply(this,i),this}},Kr.prototype[a]=Rr((function(i,...n){const r=new Kr[e+"Effect"];return i==null?this.put(r):(typeof i=="function"?i.call(r,r):n.unshift(i),this.put(r).update(n))}))})),sa(Kr,{merge(a){const e=this.put(new Kr.MergeEffect);return typeof a=="function"?(a.call(e,e),e):((a instanceof Array?a:[...arguments]).forEach((t=>{t instanceof Kr.MergeNode?e.put(t):e.mergeNode(t)})),e)},componentTransfer(a={}){const e=this.put(new Kr.ComponentTransferEffect);if(typeof a=="function")return a.call(e,e),e;a.r||a.g||a.b||a.a||(a={r:a,g:a,b:a,a});for(const t in a)e.add(new Kr["Func"+t.toUpperCase()](a[t]));return e}});["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach((a=>{const e=mg(a);Kr[e]=class extends Vw{constructor(t){super(Or("fe"+e,t),t)}}}));["funcR","funcG","funcB","funcA"].forEach((function(a){const e=Kr[mg(a)],t=Rr((function(){return this.put(new e)}));Kr.ComponentTransferEffect.prototype[a]=t}));["distantLight","pointLight","spotLight"].forEach((a=>{const e=Kr[mg(a)],t=Rr((function(){return this.put(new e)}));Kr.DiffuseLightingEffect.prototype[a]=t,Kr.SpecularLightingEffect.prototype[a]=t})),sa(Kr.MergeEffect,{mergeNode(a){return this.put(new Kr.MergeNode).attr("in",a)}}),sa(ax,{filter:function(a){const e=this.put(new Kr);return typeof a=="function"&&a.call(e,e),e}}),sa(ml,{filter:function(a){return this.defs().filter(a)}}),sa(Ro,{filterWith:function(a){const e=a instanceof Kr?a:this.defs().filter(a);return this.attr("filter",e)},unfilter:function(a){return this.attr("filter",null)},filterer(){return this.reference("filter")}});const e8={blend:function(a,e){return this.parent()&&this.parent().blend(this,a,e)},colorMatrix:function(a,e){return this.parent()&&this.parent().colorMatrix(a,e).in(this)},componentTransfer:function(a){return this.parent()&&this.parent().componentTransfer(a).in(this)},composite:function(a,e){return this.parent()&&this.parent().composite(this,a,e)},convolveMatrix:function(a){return this.parent()&&this.parent().convolveMatrix(a).in(this)},diffuseLighting:function(a,e,t,i){return this.parent()&&this.parent().diffuseLighting(a,t,i).in(this)},displacementMap:function(a,e,t,i){return this.parent()&&this.parent().displacementMap(this,a,e,t,i)},dropShadow:function(a,e,t){return this.parent()&&this.parent().dropShadow(this,a,e,t).in(this)},flood:function(a,e){return this.parent()&&this.parent().flood(a,e)},gaussianBlur:function(a,e){return this.parent()&&this.parent().gaussianBlur(a,e).in(this)},image:function(a){return this.parent()&&this.parent().image(a)},merge:function(a){return a=a instanceof Array?a:[...a],this.parent()&&this.parent().merge(this,...a)},morphology:function(a,e){return this.parent()&&this.parent().morphology(a,e).in(this)},offset:function(a,e){return this.parent()&&this.parent().offset(a,e).in(this)},specularLighting:function(a,e,t,i,n){return this.parent()&&this.parent().specularLighting(a,t,i,n).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(a,e,t,i,n){return this.parent()&&this.parent().turbulence(a,e,t,i,n).in(this)}};sa(Vw,e8),sa(Kr.MergeEffect,{in:function(a){return a instanceof Kr.MergeNode?this.add(a,0):this.add(new Kr.MergeNode().in(a),0),this}}),sa([Kr.CompositeEffect,Kr.BlendEffect,Kr.DisplacementMapEffect],{in2:function(a){if(a==null){const e=this.attr("in2");return this.parent()&&this.parent().find(`[result="${e}"]`)[0]||e}return this.attr("in2",a)}}),Kr.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var Lo=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"getDefaultFilter",value:function(e,t){var i=this.w;e.unfilter(!0),new Kr().size("120%","180%","-5%","-40%"),i.config.chart.dropShadow.enabled&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"applyFilter",value:function(e,t,i){var n,r=this,o=this.w;if(e.unfilter(!0),i!=="none"){var s,h,f=o.config.chart.dropShadow,y=i==="lighten"?2:.3;e.filterWith((function(x){x.colorMatrix({type:"matrix",values:`
          `.concat(y,` 0 0 0 0
          0 `).concat(y,` 0 0 0
          0 0 `).concat(y,` 0 0
          0 0 0 1 0
        `),in:"SourceGraphic",result:"brightness"}),f.enabled&&r.addShadow(x,t,f,"brightness")})),!f.noUserSpaceOnUse&&((s=e.filterer())===null||s===void 0||(h=s.node)===null||h===void 0||h.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize((n=e.filterer())===null||n===void 0?void 0:n.node)}else this.getDefaultFilter(e,t)}},{key:"addShadow",value:function(e,t,i,n){var r,o=this.w,s=i.blur,h=i.top,f=i.left,y=i.color,x=i.opacity;if(y=Array.isArray(y)?y[t]:y,((r=o.config.chart.dropShadow.enabledOnSeries)===null||r===void 0?void 0:r.length)>0&&o.config.chart.dropShadow.enabledOnSeries.indexOf(t)===-1)return e;e.offset({in:n,dx:f,dy:h,result:"offset"}),e.gaussianBlur({in:"offset",stdDeviation:s,result:"blur"}),e.flood({"flood-color":y,"flood-opacity":x,result:"flood"}),e.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),e.merge(["shadow",n])}},{key:"dropShadow",value:function(e,t){var i,n,r,o,s,h=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=this.w;return e.unfilter(!0),At.isMsEdge()&&y.config.chart.type==="radialBar"||((i=y.config.chart.dropShadow.enabledOnSeries)===null||i===void 0?void 0:i.length)>0&&((r=y.config.chart.dropShadow.enabledOnSeries)===null||r===void 0?void 0:r.indexOf(f))===-1?e:(e.filterWith((function(x){h.addShadow(x,f,t,"SourceGraphic")})),t.noUserSpaceOnUse||(o=e.filterer())===null||o===void 0||(s=o.node)===null||s===void 0||s.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize((n=e.filterer())===null||n===void 0?void 0:n.node),e)}},{key:"setSelectionFilter",value:function(e,t,i){var n=this.w;if(n.globals.selectedDataPoints[t]!==void 0&&n.globals.selectedDataPoints[t].indexOf(i)>-1){e.node.setAttribute("selected",!0);var r=n.config.states.active.filter;r!=="none"&&this.applyFilter(e,t,r.type)}}},{key:"_scaleFilterSize",value:function(e){e&&(function(t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])})({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),a})(),vi=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"roundPathCorners",value:function(e,t){function i(re,ae,me){var Te=ae.x-re.x,ye=ae.y-re.y,Re=Math.sqrt(Te*Te+ye*ye);return n(re,ae,Math.min(1,me/Re))}function n(re,ae,me){return{x:re.x+(ae.x-re.x)*me,y:re.y+(ae.y-re.y)*me}}function r(re,ae){re.length>2&&(re[re.length-2]=ae.x,re[re.length-1]=ae.y)}function o(re){return{x:parseFloat(re[re.length-2]),y:parseFloat(re[re.length-1])}}e.indexOf("NaN")>-1&&(e="");var s=e.split(/[,\s]/).reduce((function(re,ae){var me=ae.match(/^([a-zA-Z])(.+)/);return me?(re.push(me[1]),re.push(me[2])):re.push(ae),re}),[]).reduce((function(re,ae){return parseFloat(ae)==ae&&re.length?re[re.length-1].push(ae):re.push([ae]),re}),[]),h=[];if(s.length>1){var f=o(s[0]),y=null;s[s.length-1][0]=="Z"&&s[0].length>2&&(y=["L",f.x,f.y],s[s.length-1]=y),h.push(s[0]);for(var x=1;x<s.length;x++){var S=h[h.length-1],E=s[x],z=E==y?s[1]:s[x+1];if(z&&S&&S.length>2&&E[0]=="L"&&z.length>2&&z[0]=="L"){var D,F,U=o(S),G=o(E),Z=o(z);D=i(G,U,t),F=i(G,Z,t),r(E,D),E.origPoint=G,h.push(E);var ee=n(D,G,.5),ie=n(G,F,.5),le=["C",ee.x,ee.y,ie.x,ie.y,F.x,F.y];le.origPoint=G,h.push(le)}else h.push(E)}if(y){var J=o(h[h.length-1]);h.push(["Z"]),r(h[0],J)}}else h=s;return h.reduce((function(re,ae){return re+ae.join(" ")+" "}),"")}},{key:"drawLine",value:function(e,t,i,n){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:i,y2:n,stroke:r,"stroke-dasharray":o,"stroke-width":s,"stroke-linecap":h})}},{key:"drawRect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,x=this.w.globals.dom.Paper.rect();return x.attr({x:e,y:t,width:i>0?i:0,height:n>0?n:0,rx:r,ry:r,opacity:s,"stroke-width":h!==null?h:0,stroke:f!==null?f:"none","stroke-dasharray":y}),x.node.setAttribute("fill",o),x}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:n,stroke:t,"stroke-width":i})}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e<0&&(e=0);var i=this.w.globals.dom.Paper.circle(2*e);return t!==null&&i.attr(t),i}},{key:"drawPath",value:function(e){var t=e.d,i=t===void 0?"":t,n=e.stroke,r=n===void 0?"#a8a8a8":n,o=e.strokeWidth,s=o===void 0?1:o,h=e.fill,f=e.fillOpacity,y=f===void 0?1:f,x=e.strokeOpacity,S=x===void 0?1:x,E=e.classes,z=e.strokeLinecap,D=z===void 0?null:z,F=e.strokeDashArray,U=F===void 0?0:F,G=this.w;return D===null&&(D=G.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(G.globals.gridHeight)),G.globals.dom.Paper.path(i).attr({fill:h,"fill-opacity":y,stroke:r,"stroke-opacity":S,"stroke-linecap":D,"stroke-width":s,"stroke-dasharray":U,class:E})}},{key:"group",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w.globals.dom.Paper.group();return e!==null&&t.attr(e),t}},{key:"move",value:function(e,t){var i=["M",e,t].join(" ");return i}},{key:"line",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=null;return i===null?n=[" L",e,t].join(" "):i==="H"?n=[" H",e].join(" "):i==="V"&&(n=[" V",t].join(" ")),n}},{key:"curve",value:function(e,t,i,n,r,o){var s=["C",e,t,i,n,r,o].join(" ");return s}},{key:"quadraticCurve",value:function(e,t,i,n){return["Q",e,t,i,n].join(" ")}},{key:"arc",value:function(e,t,i,n,r,o,s){var h="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(h="a");var f=[h,e,t,i,n,r,o,s].join(" ");return f}},{key:"renderPaths",value:function(e){var t,i=e.j,n=e.realIndex,r=e.pathFrom,o=e.pathTo,s=e.stroke,h=e.strokeWidth,f=e.strokeLinecap,y=e.fill,x=e.animationDelay,S=e.initialSpeed,E=e.dataChangeSpeed,z=e.className,D=e.chartType,F=e.shouldClipToGrid,U=F===void 0||F,G=e.bindEventsOnPaths,Z=G===void 0||G,ee=e.drawShadow,ie=ee===void 0||ee,le=this.w,J=new Lo(this.ctx),re=new gg(this.ctx),ae=this.w.config.chart.animations.enabled,me=ae&&this.w.config.chart.animations.dynamicAnimation.enabled;if(r&&r.startsWith("M 0 0")&&o){var Te=o.match(/^M\s+[\d.-]+\s+[\d.-]+/);Te&&(r=r.replace(/^M\s+0\s+0/,Te[0]))}var ye=!!(ae&&!le.globals.resized||me&&le.globals.dataChanged&&le.globals.shouldAnimate);ye?t=r:(t=o,le.globals.animationEnded=!0);var Re=le.config.stroke.dashArray,We=0;We=Array.isArray(Re)?Re[n]:le.config.stroke.dashArray;var Le=this.drawPath({d:t,stroke:s,strokeWidth:h,fill:y,fillOpacity:1,classes:z,strokeLinecap:f,strokeDashArray:We});Le.attr("index",n),U&&(D==="bar"&&!le.globals.isHorizontal||le.globals.comboCharts?Le.attr({"clip-path":"url(#gridRectBarMask".concat(le.globals.cuid,")")}):Le.attr({"clip-path":"url(#gridRectMask".concat(le.globals.cuid,")")})),le.config.chart.dropShadow.enabled&&ie&&J.dropShadow(Le,le.config.chart.dropShadow,n),Z&&(Le.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,Le)),Le.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,Le)),Le.node.addEventListener("mousedown",this.pathMouseDown.bind(this,Le))),Le.attr({pathTo:o,pathFrom:r});var ht={el:Le,j:i,realIndex:n,pathFrom:r,pathTo:o,fill:y,strokeWidth:h,delay:x};return!ae||le.globals.resized||le.globals.dataChanged?!le.globals.resized&&le.globals.dataChanged||re.showDelayedElements():re.animatePathsGradually(Ui(Ui({},ht),{},{speed:S})),le.globals.dataChanged&&me&&ye&&re.animatePathsGradually(Ui(Ui({},ht),{},{speed:E})),Le}},{key:"drawPattern",value:function(e,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(t,i,(function(o){e==="horizontalLines"?o.line(0,0,i,0).stroke({color:n,width:r+1}):e==="verticalLines"?o.line(0,0,0,t).stroke({color:n,width:r+1}):e==="slantedLines"?o.line(0,0,t,i).stroke({color:n,width:r}):e==="squares"?o.rect(t,i).fill("none").stroke({color:n,width:r}):e==="circles"&&o.circle(t).fill("none").stroke({color:n,width:r})}))}},{key:"drawGradient",value:function(e,t,i,n,r){var o,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],y=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,x=this.w;t.length<9&&t.indexOf("#")===0&&(t=At.hexToRgba(t,n)),i.length<9&&i.indexOf("#")===0&&(i=At.hexToRgba(i,r));var S=0,E=1,z=1,D=null;h!==null&&(S=h[0]!==void 0?h[0]/100:0,E=h[1]!==void 0?h[1]/100:1,z=h[2]!==void 0?h[2]/100:1,D=h[3]!==void 0?h[3]/100:null);var F=!(x.config.chart.type!=="donut"&&x.config.chart.type!=="pie"&&x.config.chart.type!=="polarArea"&&x.config.chart.type!=="bubble");if(o=f&&f.length!==0?x.globals.dom.Paper.gradient(F?"radial":"linear",(function(Z){(Array.isArray(f[y])?f[y]:f).forEach((function(ee){Z.stop(ee.offset/100,ee.color,ee.opacity)}))})):x.globals.dom.Paper.gradient(F?"radial":"linear",(function(Z){Z.stop(S,t,n),Z.stop(E,i,r),Z.stop(z,i,r),D!==null&&Z.stop(D,t,n)})),F){var U=x.globals.gridWidth/2,G=x.globals.gridHeight/2;x.config.chart.type!=="bubble"?o.attr({gradientUnits:"userSpaceOnUse",cx:U,cy:G,r:s}):o.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else e==="vertical"?o.from(0,0).to(0,1):e==="diagonal"?o.from(0,0).to(1,1):e==="horizontal"?o.from(0,1).to(1,1):e==="diagonal2"&&o.from(1,0).to(0,1);return o}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,i=e.maxWidth,n=e.fontSize,r=e.fontFamily,o=this.getTextRects(t,n,r),s=o.width/t.length,h=Math.floor(i/s);return i<o.width?t.slice(0,h-3)+"...":t}},{key:"drawText",value:function(e){var t=this,i=e.x,n=e.y,r=e.text,o=e.textAnchor,s=e.fontSize,h=e.fontFamily,f=e.fontWeight,y=e.foreColor,x=e.opacity,S=e.maxWidth,E=e.cssClass,z=E===void 0?"":E,D=e.isPlainText,F=D===void 0||D,U=e.dominantBaseline,G=U===void 0?"auto":U,Z=this.w;r===void 0&&(r="");var ee=r;o||(o="start"),y&&y.length||(y=Z.config.chart.foreColor),h=h||Z.config.chart.fontFamily,f=f||"regular";var ie,le={maxWidth:S,fontSize:s=s||"11px",fontFamily:h};return Array.isArray(r)?ie=Z.globals.dom.Paper.text((function(J){for(var re=0;re<r.length;re++)ee=r[re],S&&(ee=t.getTextBasedOnMaxWidth(Ui({text:r[re]},le))),re===0?J.tspan(ee):J.tspan(ee).newLine()})):(S&&(ee=this.getTextBasedOnMaxWidth(Ui({text:r},le))),ie=F?Z.globals.dom.Paper.plain(r):Z.globals.dom.Paper.text((function(J){return J.tspan(ee)}))),ie.attr({x:i,y:n,"text-anchor":o,"dominant-baseline":G,"font-size":s,"font-family":h,"font-weight":f,fill:y,class:"apexcharts-text "+z}),ie.node.style.fontFamily=h,ie.node.style.opacity=x,ie}},{key:"getMarkerPath",value:function(e,t,i,n){var r="";switch(i){case"cross":r="M ".concat(e-(n/=1.4)," ").concat(t-n," L ").concat(e+n," ").concat(t+n,"  M ").concat(e-n," ").concat(t+n," L ").concat(e+n," ").concat(t-n);break;case"plus":r="M ".concat(e-(n/=1.12)," ").concat(t," L ").concat(e+n," ").concat(t,"  M ").concat(e," ").concat(t-n," L ").concat(e," ").concat(t+n);break;case"star":case"sparkle":var o=5;n*=1.15,i==="sparkle"&&(n/=1.1,o=4);for(var s=Math.PI/o,h=0;h<=2*o;h++){var f=h*s,y=h%2==0?n:n/2;r+=(h===0?"M":"L")+(e+y*Math.sin(f))+","+(t-y*Math.cos(f))}r+="Z";break;case"triangle":r="M ".concat(e," ").concat(t-n,` 
             L `).concat(e+n," ").concat(t+n,` 
             L `).concat(e-n," ").concat(t+n,` 
             Z`);break;case"square":case"rect":r="M ".concat(e-(n/=1.125)," ").concat(t-n,` 
           L `).concat(e+n," ").concat(t-n,` 
           L `).concat(e+n," ").concat(t+n,` 
           L `).concat(e-n," ").concat(t+n,` 
           Z`);break;case"diamond":n*=1.05,r="M ".concat(e," ").concat(t-n,` 
             L `).concat(e+n," ").concat(t,` 
             L `).concat(e," ").concat(t+n,` 
             L `).concat(e-n," ").concat(t,` 
            Z`);break;case"line":r="M ".concat(e-(n/=1.1)," ").concat(t,` 
           L `).concat(e+n," ").concat(t);break;default:n*=2,r="M ".concat(e,", ").concat(t,` 
           m -`).concat(n/2,`, 0 
           a `).concat(n/2,",").concat(n/2," 0 1,0 ").concat(n,`,0 
           a `).concat(n/2,",").concat(n/2," 0 1,0 -").concat(n,",0")}return r}},{key:"drawMarkerShape",value:function(e,t,i,n,r){var o=this.drawPath({d:this.getMarkerPath(e,t,i,n,r),stroke:r.pointStrokeColor,strokeDashArray:r.pointStrokeDashArray,strokeWidth:r.pointStrokeWidth,fill:r.pointFillColor,fillOpacity:r.pointFillOpacity,strokeOpacity:r.pointStrokeOpacity});return o.attr({cx:e,cy:t,shape:r.shape,class:r.class?r.class:""}),o}},{key:"drawMarker",value:function(e,t,i){e=e||0;var n=i.pSize||0;return At.isNumber(t)||(n=0,t=0),this.drawMarkerShape(e,t,i?.shape,n,Ui(Ui({},i),i.shape==="line"||i.shape==="plus"||i.shape==="cross"?{pointStrokeColor:i.pointFillColor,pointStrokeOpacity:i.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(e,t){var i=this.w,n=new Lo(this.ctx),r=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10);if(typeof i.config.chart.events.dataPointMouseEnter=="function"&&i.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:r,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:r,dataPointIndex:o,w:i}]),(i.config.states.active.filter.type==="none"||e.node.getAttribute("selected")!=="true")&&i.config.states.hover.filter.type!=="none"&&!i.globals.isTouchDevice){var s=i.config.states.hover.filter;n.applyFilter(e,r,s.type)}}},{key:"pathMouseLeave",value:function(e,t){var i=this.w,n=new Lo(this.ctx),r=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10);typeof i.config.chart.events.dataPointMouseLeave=="function"&&i.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:r,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:r,dataPointIndex:o,w:i}]),i.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true"||i.config.states.hover.filter.type!=="none"&&n.getDefaultFilter(e,r)}},{key:"pathMouseDown",value:function(e,t){var i=this.w,n=new Lo(this.ctx),r=parseInt(e.node.getAttribute("index"),10),o=parseInt(e.node.getAttribute("j"),10),s="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),i.globals.selectedDataPoints[r].indexOf(o)>-1){var h=i.globals.selectedDataPoints[r].indexOf(o);i.globals.selectedDataPoints[r].splice(h,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var f=i.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),y=i.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),x=function(z){Array.prototype.forEach.call(z,(function(D){D.node.setAttribute("selected","false"),n.getDefaultFilter(D,r)}))};x(f),x(y)}e.node.setAttribute("selected","true"),s="true",i.globals.selectedDataPoints[r]===void 0&&(i.globals.selectedDataPoints[r]=[]),i.globals.selectedDataPoints[r].push(o)}if(s==="true"){var S=i.config.states.active.filter;if(S!=="none")n.applyFilter(e,r,S.type);else if(i.config.states.hover.filter!=="none"&&!i.globals.isTouchDevice){var E=i.config.states.hover.filter;n.applyFilter(e,r,E.type)}}else i.config.states.active.filter.type!=="none"&&(i.config.states.hover.filter.type==="none"||i.globals.isTouchDevice?n.getDefaultFilter(e,r):(E=i.config.states.hover.filter,n.applyFilter(e,r,E.type)));typeof i.config.chart.events.dataPointSelection=="function"&&i.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:o,w:i}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:o,w:i}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&typeof e.getBBox=="function"&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,i,n){var r=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=this.w,s=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:i,foreColor:"#fff",opacity:0});n&&s.attr("transform",n),o.globals.dom.Paper.add(s);var h=s.bbox();return r||(h=s.node.getBoundingClientRect()),s.remove(),{width:h.width,height:h.height}}},{key:"placeTextWithEllipsis",value:function(e,t,i){if(typeof e.getComputedTextLength=="function"&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=i/1.1)){for(var n=t.length-3;n>0;n-=3)if(e.getSubStringLength(0,n)<=i/1.1)return void(e.textContent=t.substring(0,n)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}}]),a})(),Rs=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.w,i=[];if(t.globals.series.length===0)return i;for(var n=0;n<t.globals.series[t.globals.maxValsInArrayIndex].length;n++){for(var r=0,o=0;o<t.globals.series.length;o++)t.globals.series[o][n]!==void 0&&e.indexOf(o)===-1&&(r+=t.globals.series[o][n]);i.push(r)}return i}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?this.w.config.series.reduce((function(t,i){return t+i}),0):this.w.globals.series[e].reduce((function(t,i){return t+i}),0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var e=this,t=this.w,i=[];return t.globals.seriesGroups.forEach((function(n){var r=[];t.config.series.forEach((function(s,h){n.indexOf(t.globals.seriesNames[h])>-1&&r.push(h)}));var o=t.globals.series.map((function(s,h){return r.indexOf(h)===-1?h:-1})).filter((function(s){return s!==-1}));i.push(e.getStackedSeriesTotals(o))})),i}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,t=this.w.config,i=[],n=[],r=[],o=e.series.length>t.yaxis.length||t.yaxis.some((function(x){return Array.isArray(x.seriesName)}));t.series.forEach((function(x,S){r.push(S),n.push(null)})),t.yaxis.forEach((function(x,S){i[S]=[]}));var s=[];t.yaxis.forEach((function(x,S){var E=!1;if(x.seriesName){var z=[];Array.isArray(x.seriesName)?z=x.seriesName:z.push(x.seriesName),z.forEach((function(D){t.series.forEach((function(F,U){if(F.name===D){var G=U;S===U||o?!o||r.indexOf(U)>-1?i[S].push([S,U]):console.warn("Series '"+F.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(i[U].push([U,S]),G=S),E=!0,(G=r.indexOf(G))!==-1&&r.splice(G,1)}}))}))}E||s.push(S)})),i=i.map((function(x,S){var E=[];return x.forEach((function(z){n[z[1]]=z[0],E.push(z[1])})),E}));for(var h=t.yaxis.length-1,f=0;f<s.length&&(h=s[f],i[h]=[],r);f++){var y=r[0];r.shift(),i[h].push(y),n[y]=h}r.forEach((function(x){i[h].push(x),n[x]=h})),e.seriesYAxisMap=i.map((function(x){return x})),e.seriesYAxisReverseMap=n.map((function(x){return x})),e.seriesYAxisMap.forEach((function(x,S){x.forEach((function(E){t.series[E]&&t.series[E].group===void 0&&(t.series[E].group="apexcharts-axis-".concat(S.toString()))}))}))}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(e===null?this.w.config.series.filter((function(t){return t!==null})):this.w.config.series[e].data.filter((function(t){return t!==null}))).length===0}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every((function(t,i,n){return t===n[0]}))}},{key:"getCategoryLabels",value:function(e){var t=this.w,i=e.slice();return t.config.xaxis.convertedCatToNumeric&&(i=e.map((function(n,r){return t.config.xaxis.labels.formatter(n-t.globals.minX+1)}))),i}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map((function(t){return t.length})).indexOf(Math.max.apply(Math,e.globals.series.map((function(t){return t.length}))))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach((function(i){t=Math.max(t,i)})),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach((function(i){t=Math.max(t,i.size)})),t>0&&(e.config.markers.hover.size>0?t=e.config.markers.hover.size:t+=e.config.markers.hover.sizeOffset),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map((function(t,i){var n=0;if(Array.isArray(t))for(var r=0;r<t.length;r++)n+=t[r];else n+=t;return n}))}},{key:"getSeriesTotalsXRange",value:function(e,t){var i=this.w;return i.globals.series.map((function(n,r){for(var o=0,s=0;s<n.length;s++)i.globals.seriesX[r][s]>e&&i.globals.seriesX[r][s]<t&&(o+=n[s]);return o}))}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map((function(t,i){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=e.globals.stackedSeriesTotals[r],s=0;o&&(s=100*t[r]/o),n.push(s)}else{var h=100*t/e.globals.seriesTotals.reduce((function(f,y){return f+y}),0);n.push(h)}return n}))}},{key:"getCalculatedRatios",value:function(){var e,t,i,n=this,r=this.w,o=r.globals,s=[],h=0,f=[],y=.1,x=0;if(o.yRange=[],o.isMultipleYAxis)for(var S=0;S<o.minYArr.length;S++)o.yRange.push(Math.abs(o.minYArr[S]-o.maxYArr[S])),f.push(0);else o.yRange.push(Math.abs(o.minY-o.maxY));o.xRange=Math.abs(o.maxX-o.minX),o.zRange=Math.abs(o.maxZ-o.minZ);for(var E=0;E<o.yRange.length;E++)s.push(o.yRange[E]/o.gridHeight);if(t=o.xRange/o.gridWidth,e=o.yRange/o.gridWidth,i=o.xRange/o.gridHeight,(h=o.zRange/o.gridHeight*16)||(h=1),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(o.hasNegs=!0),r.globals.seriesYAxisReverseMap.length>0){var z=function(F,U){var G=r.config.yaxis[r.globals.seriesYAxisReverseMap[U]],Z=F<0?-1:1;return F=Math.abs(F),G.logarithmic&&(F=n.getBaseLog(G.logBase,F)),-Z*F/s[U]};if(o.isMultipleYAxis){f=[];for(var D=0;D<s.length;D++)f.push(z(o.minYArr[D],D))}else(f=[]).push(z(o.minY,0)),o.minY!==Number.MIN_VALUE&&Math.abs(o.minY)!==0&&(y=-o.minY/e,x=o.minX/t)}else(f=[]).push(0),y=0,x=0;return{yRatio:s,invertedYRatio:e,zRatio:h,xRatio:t,invertedXRatio:i,baseLineInvertedY:y,baseLineY:f,baseLineX:x}}},{key:"getLogSeries",value:function(e){var t=this,i=this.w;return i.globals.seriesLog=e.map((function(n,r){var o=i.globals.seriesYAxisReverseMap[r];return i.config.yaxis[o]&&i.config.yaxis[o].logarithmic?n.map((function(s){return s===null?null:t.getLogVal(i.config.yaxis[o].logBase,s,r)})):n})),i.globals.invalidLogScale?e:i.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(e,t){if(e===null)return null;var i=this.w,n=i.globals.seriesYAxisReverseMap[t];return i.config.yaxis[n]&&i.config.yaxis[n].logarithmic?this.getLogVal(i.config.yaxis[n].logBase,e,t):e}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,i){if(t<=0)return 0;var n=this.w,r=n.globals.minYArr[i]===0?-1:this.getBaseLog(e,n.globals.minYArr[i]),o=(n.globals.maxYArr[i]===0?0:this.getBaseLog(e,n.globals.maxYArr[i]))-r;return t<1?t/o:(this.getBaseLog(e,t)-r)/o}},{key:"getLogYRatios",value:function(e){var t=this,i=this.w,n=this.w.globals;return n.yLogRatio=e.slice(),n.logYRange=n.yRange.map((function(r,o){var s=i.globals.seriesYAxisReverseMap[o];if(i.config.yaxis[s]&&t.w.config.yaxis[s].logarithmic){var h,f=-Number.MAX_VALUE,y=Number.MIN_VALUE;return n.seriesLog.forEach((function(x,S){x.forEach((function(E){i.config.yaxis[S]&&i.config.yaxis[S].logarithmic&&(f=Math.max(E,f),y=Math.min(E,y))}))})),h=Math.pow(n.yRange[o],Math.abs(y-f)/n.yRange[o]),n.yLogRatio[o]=h/n.gridHeight,h}})),n.invalidLogScale?e.slice():n.yLogRatio}},{key:"drawSeriesByGroup",value:function(e,t,i,n){var r=this.w,o=[];return e.series.length>0&&t.forEach((function(s){var h=[],f=[];e.i.forEach((function(y,x){r.config.series[y].group===s&&(h.push(e.series[x]),f.push(y))})),h.length>0&&o.push(n.draw(h,i,f))})),o}}],[{key:"checkComboSeries",value:function(e,t){var i=!1,n=0,r=0;return t===void 0&&(t="line"),e.length&&e[0].type!==void 0&&e.forEach((function(o){o.type!=="bar"&&o.type!=="column"&&o.type!=="candlestick"&&o.type!=="boxPlot"||n++,o.type!==void 0&&o.type!==t&&r++})),r>0&&(i=!0),{comboBarCount:n,comboCharts:i}}},{key:"extendArrayProps",value:function(e,t,i){var n,r,o,s,h,f;return(n=t)!==null&&n!==void 0&&n.yaxis&&(t=e.extendYAxis(t,i)),(r=t)!==null&&r!==void 0&&r.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),(o=t)!==null&&o!==void 0&&(s=o.annotations)!==null&&s!==void 0&&s.xaxis&&(t=e.extendXAxisAnnotations(t)),(h=t)!==null&&h!==void 0&&(f=h.annotations)!==null&&f!==void 0&&f.points&&(t=e.extendPointAnnotations(t))),t}}]),a})(),rx=(function(){function a(e){wn(this,a),this.w=e.w,this.annoCtx=e}return Sn(a,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.w;if(e.label.orientation==="vertical"){var n=t!==null?t:0,r=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(n,"']"));if(r!==null){var o=r.getBoundingClientRect();r.setAttribute("x",parseFloat(r.getAttribute("x"))-o.height+4);var s=e.label.position==="top"?o.width:-o.width;r.setAttribute("y",parseFloat(r.getAttribute("y"))+s);var h=this.annoCtx.graphics.rotateAroundCenter(r),f=h.x,y=h.y;r.setAttribute("transform","rotate(-90 ".concat(f," ").concat(y,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var i=this.w;if(!e||!t.label.text||!String(t.label.text).trim())return null;var n=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),r=e.getBoundingClientRect(),o=t.label.style.padding,s=o.left,h=o.right,f=o.top,y=o.bottom;if(t.label.orientation==="vertical"){var x=[s,h,f,y];f=x[0],y=x[1],s=x[2],h=x[3]}var S=r.left-n.left-s,E=r.top-n.top-f,z=this.annoCtx.graphics.drawRect(S-i.globals.barPadForNumericAxis,E,r.width+s+h,r.height+f+y,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&z.node.classList.add(t.id),z}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,i=function(n,r,o){var s=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations .apexcharts-").concat(o,"-annotation-label[rel='").concat(r,"']"));if(s){var h=s.parentNode,f=e.addBackgroundToAnno(s,n);f&&(h.insertBefore(f.node,s),n.label.mouseEnter&&f.node.addEventListener("mouseenter",n.label.mouseEnter.bind(e,n)),n.label.mouseLeave&&f.node.addEventListener("mouseleave",n.label.mouseLeave.bind(e,n)),n.label.click&&f.node.addEventListener("click",n.label.click.bind(e,n)))}};t.config.annotations.xaxis.forEach((function(n,r){return i(n,r,"xaxis")})),t.config.annotations.yaxis.forEach((function(n,r){return i(n,r,"yaxis")})),t.config.annotations.points.forEach((function(n,r){return i(n,r,"point")}))}},{key:"getY1Y2",value:function(e,t){var i,n=this.w,r=e==="y1"?t.y:t.y2,o=!1;if(this.annoCtx.invertAxis){var s=n.config.xaxis.convertedCatToNumeric?n.globals.categoryLabels:n.globals.labels,h=s.indexOf(r),f=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(h+1,")"));i=f?parseFloat(f.getAttribute("y")):(n.globals.gridHeight/s.length-1)*(h+1)-n.globals.barHeight,t.seriesIndex!==void 0&&n.globals.barHeight&&(i-=n.globals.barHeight/2*(n.globals.series.length-1)-n.globals.barHeight*t.seriesIndex)}else{var y,x=n.globals.seriesYAxisMap[t.yAxisIndex][0],S=n.config.yaxis[t.yAxisIndex].logarithmic?new Rs(this.annoCtx.ctx).getLogVal(n.config.yaxis[t.yAxisIndex].logBase,r,x)/n.globals.yLogRatio[x]:(r-n.globals.minYArr[x])/(n.globals.yRange[x]/n.globals.gridHeight);i=n.globals.gridHeight-Math.min(Math.max(S,0),n.globals.gridHeight),o=S>n.globals.gridHeight||S<0,!t.marker||t.y!==void 0&&t.y!==null||(i=0),(y=n.config.yaxis[t.yAxisIndex])!==null&&y!==void 0&&y.reversed&&(i=S)}return typeof r=="string"&&r.includes("px")&&(i=parseFloat(r)),{yP:i,clipped:o}}},{key:"getX1X2",value:function(e,t){var i=this.w,n=e==="x1"?t.x:t.x2,r=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,o=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,s=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,h=!1,f=this.annoCtx.inversedReversedAxis?(o-n)/(s/i.globals.gridWidth):(n-r)/(s/i.globals.gridWidth);return i.config.xaxis.type!=="category"&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||i.config.chart.sparkline.enabled||(f=this.getStringX(n)),typeof n=="string"&&n.includes("px")&&(f=parseFloat(n)),n==null&&t.marker&&(f=i.globals.gridWidth),t.seriesIndex!==void 0&&i.globals.barWidth&&!this.annoCtx.invertAxis&&(f-=i.globals.barWidth/2*(i.globals.series.length-1)-i.globals.barWidth*t.seriesIndex),typeof f!="number"&&(f=0,h=!0),parseFloat(f.toFixed(10))>parseFloat(i.globals.gridWidth.toFixed(10))?(f=i.globals.gridWidth,h=!0):f<0&&(f=0,h=!0),{x:f,clipped:h}}},{key:"getStringX",value:function(e){var t=this.w,i=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var n=t.globals.labels.map((function(o){return Array.isArray(o)?o.join(" "):o})).indexOf(e),r=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(n+1,")"));return r&&(i=parseFloat(r.getAttribute("x"))),i}}]),a})(),t8=(function(){function a(e){wn(this,a),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new rx(this.annoCtx)}return Sn(a,[{key:"addXaxisAnnotation",value:function(e,t,i){var n,r=this.w,o=this.helpers.getX1X2("x1",e),s=o.x,h=o.clipped,f=!0,y=e.label.text,x=e.strokeDashArray;if(At.isNumber(s)){if(e.x2===null||e.x2===void 0){if(!h){var S=this.annoCtx.graphics.drawLine(s+e.offsetX,0+e.offsetY,s+e.offsetX,r.globals.gridHeight+e.offsetY,e.borderColor,x,e.borderWidth);t.appendChild(S.node),e.id&&S.node.classList.add(e.id)}}else{var E=this.helpers.getX1X2("x2",e);if(n=E.x,f=E.clipped,n<s){var z=s;s=n,n=z}var D=this.annoCtx.graphics.drawRect(s+e.offsetX,0+e.offsetY,n-s,r.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,x);D.node.classList.add("apexcharts-annotation-rect"),D.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),t.appendChild(D.node),e.id&&D.node.classList.add(e.id)}if(!h||!f){var F=this.annoCtx.graphics.getTextRects(y,parseFloat(e.label.style.fontSize)),U=e.label.position==="top"?4:e.label.position==="center"?r.globals.gridHeight/2+(e.label.orientation==="vertical"?F.width/2:0):r.globals.gridHeight,G=this.annoCtx.graphics.drawText({x:s+e.label.offsetX,y:U+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?F.width/2-12:-F.width/2:0),text:y,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});G.attr({rel:i}),t.appendChild(G.node),this.annoCtx.helpers.setOrientations(e,i)}}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map((function(n,r){e.addXaxisAnnotation(n,i.node,r)})),i}}]),a})(),Io=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Sn(a,[{key:"isValidDate",value:function(e){return typeof e!="number"&&!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var i=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return i=this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var i=this.w.globals.locale,n=this.w.config.xaxis.labels.datetimeUTC,r=["\0"].concat(oo(i.months)),o=[""].concat(oo(i.shortMonths)),s=[""].concat(oo(i.days)),h=[""].concat(oo(i.shortDays));function f(re,ae){var me=re+"";for(ae=ae||2;me.length<ae;)me="0"+me;return me}var y=n?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+y)).replace(/(^|[^\\])yy/g,"$1"+y.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+y);var x=(n?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+r[0])).replace(/(^|[^\\])MMM/g,"$1"+o[0])).replace(/(^|[^\\])MM/g,"$1"+f(x))).replace(/(^|[^\\])M/g,"$1"+x);var S=n?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+s[0])).replace(/(^|[^\\])ddd/g,"$1"+h[0])).replace(/(^|[^\\])dd/g,"$1"+f(S))).replace(/(^|[^\\])d/g,"$1"+S);var E=n?e.getUTCHours():e.getHours(),z=E>12?E-12:E===0?12:E;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+f(E))).replace(/(^|[^\\])H/g,"$1"+E)).replace(/(^|[^\\])hh+/g,"$1"+f(z))).replace(/(^|[^\\])h/g,"$1"+z);var D=n?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+f(D))).replace(/(^|[^\\])m/g,"$1"+D);var F=n?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+f(F))).replace(/(^|[^\\])s/g,"$1"+F);var U=n?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+f(U,3)),U=Math.round(U/10),t=t.replace(/(^|[^\\])ff/g,"$1"+f(U)),U=Math.round(U/10);var G=E<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+U)).replace(/(^|[^\\])TT+/g,"$1"+G)).replace(/(^|[^\\])T/g,"$1"+G.charAt(0));var Z=G.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+Z)).replace(/(^|[^\\])t/g,"$1"+Z.charAt(0));var ee=-e.getTimezoneOffset(),ie=n||!ee?"Z":ee>0?"+":"-";if(!n){var le=(ee=Math.abs(ee))%60;ie+=f(Math.floor(ee/60))+":"+f(le)}t=t.replace(/(^|[^\\])K/g,"$1"+ie);var J=(n?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(s[0],"g"),s[J])).replace(new RegExp(h[0],"g"),h[J])).replace(new RegExp(r[0],"g"),r[x])).replace(new RegExp(o[0],"g"),o[x])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,i){var n=this.w;n.config.xaxis.min!==void 0&&(e=n.config.xaxis.min),n.config.xaxis.max!==void 0&&(t=n.config.xaxis.max);var r=this.getDate(e),o=this.getDate(t),s=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" "),h=this.formatDate(o,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(s[6],10),maxMillisecond:parseInt(h[6],10),minSecond:parseInt(s[5],10),maxSecond:parseInt(h[5],10),minMinute:parseInt(s[4],10),maxMinute:parseInt(h[4],10),minHour:parseInt(s[3],10),maxHour:parseInt(h[3],10),minDate:parseInt(s[2],10),maxDate:parseInt(h[2],10),minMonth:parseInt(s[1],10)-1,maxMonth:parseInt(h[1],10)-1,minYear:parseInt(s[0],10),maxYear:parseInt(h[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,i){return this.determineDaysOfMonths(e,t)-i}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,i){var n=this.daysCntOfYear[t]+i;return t>1&&this.isLeapYear()&&n++,n}},{key:"determineDaysOfMonths",value:function(e,t){var i=30;switch(e=At.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(i=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:i=31}return i}}]),a})(),Cy=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return Sn(a,[{key:"xLabelFormat",value:function(e,t,i,n){var r=this.w;if(r.config.xaxis.type==="datetime"&&r.config.xaxis.labels.formatter===void 0&&r.config.tooltip.x.formatter===void 0){var o=new Io(this.ctx);return o.formatDate(o.getDate(t),r.config.tooltip.x.format)}return e(t,i,n)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map((function(t){return t})):e}},{key:"defaultYFormatter",value:function(e,t,i){var n=this.w;if(At.isNumber(e))if(n.globals.yValueDecimal!==0)e=e.toFixed(t.decimalsInFloat!==void 0?t.decimalsInFloat:n.globals.yValueDecimal);else{var r=e.toFixed(0);e=e==r?r:e.toFixed(1)}return e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(i){return e.defaultGeneralFormatter(i)},t.globals.ttKeyFormatter=function(i){return e.defaultGeneralFormatter(i)},t.globals.ttZFormatter=function(i){return i},t.globals.legendFormatter=function(i){return e.defaultGeneralFormatter(i)},t.config.xaxis.labels.formatter!==void 0?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(i){if(At.isNumber(i)){if(!t.config.xaxis.convertedCatToNumeric&&t.config.xaxis.type==="numeric"){if(At.isNumber(t.config.xaxis.decimalsInFloat))return i.toFixed(t.config.xaxis.decimalsInFloat);var n=t.globals.maxX-t.globals.minX;return n>0&&n<100?i.toFixed(1):i.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?i.toFixed(1):i.toFixed(0)}return i},typeof t.config.tooltip.x.formatter=="function"?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,typeof t.config.xaxis.tooltip.formatter=="function"&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||t.config.tooltip.y.formatter!==void 0)&&(t.globals.ttVal=t.config.tooltip.y),t.config.tooltip.z.formatter!==void 0&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),t.config.legend.formatter!==void 0&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach((function(i,n){i.labels.formatter!==void 0?t.globals.yLabelFormatters[n]=i.labels.formatter:t.globals.yLabelFormatters[n]=function(r){return t.globals.xyCharts?Array.isArray(r)?r.map((function(o){return e.defaultYFormatter(o,i,n)})):e.defaultYFormatter(r,i,n):r}})),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce((function(i,n){return i.length>n.length?i:n}),0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),a})(),wd=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"getLabel",value:function(e,t,i,n){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",s=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],h=this.w,f=e[n]===void 0?"":e[n],y=f,x=h.globals.xLabelFormatter,S=h.config.xaxis.labels.formatter,E=!1,z=new Cy(this.ctx),D=f;s&&(y=z.xLabelFormat(x,f,D,{i:n,dateFormatter:new Io(this.ctx).formatDate,w:h}),S!==void 0&&(y=S(f,e[n],{i:n,dateFormatter:new Io(this.ctx).formatDate,w:h})));var F,U;t.length>0?(F=t[n].unit,U=null,t.forEach((function(ie){ie.unit==="month"?U="year":ie.unit==="day"?U="month":ie.unit==="hour"?U="day":ie.unit==="minute"&&(U="hour")})),E=U===F,i=t[n].position,y=t[n].value):h.config.xaxis.type==="datetime"&&S===void 0&&(y=""),y===void 0&&(y=""),y=Array.isArray(y)?y:y.toString();var G=new vi(this.ctx),Z={};Z=h.globals.rotateXLabels&&s?G.getTextRects(y,parseInt(o,10),null,"rotate(".concat(h.config.xaxis.labels.rotate," 0 0)"),!1):G.getTextRects(y,parseInt(o,10));var ee=!h.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(y)&&(String(y)==="NaN"||r.indexOf(y)>=0&&ee)&&(y=""),{x:i,text:y,textRect:Z,isBold:E}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,i){var n=this.w,r=n.config.xaxis.tickAmount;return r==="dataPoints"&&(r=Math.round(n.globals.gridWidth/120)),r>i||e%Math.round(i/(r+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,i,n,r){var o=this.w;if(e===0&&o.globals.skipFirstTimelinelabel&&(t.text=""),e===i-1&&o.globals.skipLastTimelinelabel&&(t.text=""),o.config.xaxis.labels.hideOverlappingLabels&&n.length>0){var s=r[r.length-1];if(o.config.xaxis.labels.trim&&o.config.xaxis.type!=="datetime")return t;t.x<s.textRect.width/(o.globals.rotateXLabels?Math.abs(o.config.xaxis.labels.rotate)/12:1.01)+s.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var i=this.w;return i.config.yaxis[e]&&i.config.yaxis[e].reversed&&t.reverse(),t}},{key:"yAxisAllSeriesCollapsed",value:function(e){var t=this.w.globals;return!t.seriesYAxisMap[e].some((function(i){return t.collapsedSeriesIndices.indexOf(i)===-1}))}},{key:"translateYAxisIndex",value:function(e){var t=this.w,i=t.globals,n=t.config.yaxis;return i.series.length>n.length||n.some((function(r){return Array.isArray(r.seriesName)}))?e:i.seriesYAxisReverseMap[e]}},{key:"isYAxisHidden",value:function(e){var t=this.w,i=t.config.yaxis[e];if(!i.show||this.yAxisAllSeriesCollapsed(e))return!0;if(!i.showForNullSeries){var n=t.globals.seriesYAxisMap[e],r=new Rs(this.ctx);return n.every((function(o){return r.isSeriesNull(o)}))}return!1}},{key:"getYAxisForeColor",value:function(e,t){var i=this.w;return Array.isArray(e)&&i.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,i.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,i,n,r,o,s){var h=this.w,f=new vi(this.ctx),y=h.globals.translateY+h.config.yaxis[r].labels.offsetY;if(h.globals.isBarHorizontal?y=0:h.config.chart.type==="heatmap"&&(y+=o/2),n.show&&t>0){h.config.yaxis[r].opposite===!0&&(e+=n.width);for(var x=t;x>=0;x--){var S=f.drawLine(e+i.offsetX-n.width+n.offsetX,y+n.offsetY,e+i.offsetX+n.offsetX,y+n.offsetY,n.color);s.add(S),y+=o}}}}]),a})(),i8=(function(){function a(e){wn(this,a),this.w=e.w,this.annoCtx=e,this.helpers=new rx(this.annoCtx),this.axesUtils=new wd(this.annoCtx)}return Sn(a,[{key:"addYaxisAnnotation",value:function(e,t,i){var n,r=this.w,o=e.strokeDashArray,s=this.helpers.getY1Y2("y1",e),h=s.yP,f=s.clipped,y=!0,x=!1,S=e.label.text;if(e.y2===null||e.y2===void 0){if(!f){x=!0;var E=this.annoCtx.graphics.drawLine(0+e.offsetX,h+e.offsetY,this._getYAxisAnnotationWidth(e),h+e.offsetY,e.borderColor,o,e.borderWidth);t.appendChild(E.node),e.id&&E.node.classList.add(e.id)}}else{if(n=(s=this.helpers.getY1Y2("y2",e)).yP,y=s.clipped,n>h){var z=h;h=n,n=z}if(!f||!y){x=!0;var D=this.annoCtx.graphics.drawRect(0+e.offsetX,n+e.offsetY,this._getYAxisAnnotationWidth(e),h-n,0,e.fillColor,e.opacity,1,e.borderColor,o);D.node.classList.add("apexcharts-annotation-rect"),D.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),t.appendChild(D.node),e.id&&D.node.classList.add(e.id)}}if(x){var F=e.label.position==="right"?r.globals.gridWidth:e.label.position==="center"?r.globals.gridWidth/2:0,U=this.annoCtx.graphics.drawText({x:F+e.label.offsetX,y:(n??h)+e.label.offsetY-3,text:S,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});U.attr({rel:i}),t.appendChild(U.node)}}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.forEach((function(n,r){n.yAxisIndex=e.axesUtils.translateYAxisIndex(n.yAxisIndex),e.axesUtils.isYAxisHidden(n.yAxisIndex)&&e.axesUtils.yAxisAllSeriesCollapsed(n.yAxisIndex)||e.addYaxisAnnotation(n,i.node,r)})),i}}]),a})(),n8=(function(){function a(e){wn(this,a),this.w=e.w,this.annoCtx=e,this.helpers=new rx(this.annoCtx)}return Sn(a,[{key:"addPointAnnotation",value:function(e,t,i){if(!(this.w.globals.collapsedSeriesIndices.indexOf(e.seriesIndex)>-1)){var n=this.helpers.getX1X2("x1",e),r=n.x,o=n.clipped,s=(n=this.helpers.getY1Y2("y1",e)).yP,h=n.clipped;if(At.isNumber(r)&&!h&&!o){var f={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},y=this.annoCtx.graphics.drawMarker(r+e.marker.offsetX,s+e.marker.offsetY,f);t.appendChild(y.node);var x=e.label.text?e.label.text:"",S=this.annoCtx.graphics.drawText({x:r+e.label.offsetX,y:s+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:x,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(S.attr({rel:i}),t.appendChild(S.node),e.customSVG.SVG){var E=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});E.attr({transform:"translate(".concat(r+e.customSVG.offsetX,", ").concat(s+e.customSVG.offsetY,")")}),E.node.innerHTML=e.customSVG.SVG,t.appendChild(E.node)}if(e.image.path){var z=e.image.width?e.image.width:20,D=e.image.height?e.image.height:20;y=this.annoCtx.addImage({x:r+e.image.offsetX-z/2,y:s+e.image.offsetY-D/2,width:z,height:D,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&y.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&y.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&y.node.addEventListener("click",e.click.bind(this,e))}}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map((function(n,r){e.addPointAnnotation(n,i.node,r)})),i}}]),a})(),aP={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},df=(function(){function a(){wn(this,a),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Sn(a,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[aP],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,injectStyleSheet:!0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},parsing:{x:void 0,y:void 0},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0},seriesTitle:{show:!0,offsetY:1,offsetX:1,borderColor:"#000",borderWidth:1,borderRadius:2,style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"12px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:6,right:6,top:2,bottom:2}}}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(t,i){return t+i}),0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(t,i){return t+i}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",backgroundColor:void 0,borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),a})(),a8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.graphics=new vi(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new rx(this),this.xAxisAnnotations=new t8(this),this.yAxisAnnotations=new i8(this),this.pointsAnnotations=new n8(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Sn(a,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts&&e.globals.dataPoints){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),n=this.pointsAnnotations.drawPointAnnotations(),r=e.config.chart.animations.enabled,o=[t,i,n],s=[i.node,t.node,n.node],h=0;h<3;h++)e.globals.dom.elGraphical.add(o[h]),!r||e.globals.resized||e.globals.dataChanged||e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&s[h].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:s[h],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map((function(t,i){e.addImage(t,i)}))}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map((function(t,i){e.addText(t,i)}))}},{key:"addXaxisAnnotation",value:function(e,t,i){this.xAxisAnnotations.addXaxisAnnotation(e,t,i)}},{key:"addYaxisAnnotation",value:function(e,t,i){this.yAxisAnnotations.addYaxisAnnotation(e,t,i)}},{key:"addPointAnnotation",value:function(e,t,i){this.pointsAnnotations.addPointAnnotation(e,t,i)}},{key:"addText",value:function(e,t){var i=e.x,n=e.y,r=e.text,o=e.textAnchor,s=e.foreColor,h=e.fontSize,f=e.fontFamily,y=e.fontWeight,x=e.cssClass,S=e.backgroundColor,E=e.borderWidth,z=e.strokeDashArray,D=e.borderRadius,F=e.borderColor,U=e.appendTo,G=U===void 0?".apexcharts-svg":U,Z=e.paddingLeft,ee=Z===void 0?4:Z,ie=e.paddingRight,le=ie===void 0?4:ie,J=e.paddingBottom,re=J===void 0?2:J,ae=e.paddingTop,me=ae===void 0?2:ae,Te=this.w,ye=this.graphics.drawText({x:i,y:n,text:r,textAnchor:o||"start",fontSize:h||"12px",fontWeight:y||"regular",fontFamily:f||Te.config.chart.fontFamily,foreColor:s||Te.config.chart.foreColor,cssClass:x}),Re=Te.globals.dom.baseEl.querySelector(G);Re&&Re.appendChild(ye.node);var We=ye.bbox();if(r){var Le=this.graphics.drawRect(We.x-ee,We.y-me,We.width+ee+le,We.height+re+me,D,S||"transparent",1,E,F,z);Re.insertBefore(Le.node,ye.node)}}},{key:"addImage",value:function(e,t){var i=this.w,n=e.path,r=e.x,o=r===void 0?0:r,s=e.y,h=s===void 0?0:s,f=e.width,y=f===void 0?20:f,x=e.height,S=x===void 0?20:x,E=e.appendTo,z=E===void 0?".apexcharts-svg":E,D=i.globals.dom.Paper.image(n);D.size(y,S).move(o,h);var F=i.globals.dom.baseEl.querySelector(z);return F&&F.appendChild(D.node),D}},{key:"addXaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(e,t,i){return this.invertAxis===void 0&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(e){var t=e.params,i=e.pushToMemory,n=e.context,r=e.type,o=e.contextMethod,s=n,h=s.w,f=h.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations")),y=f.childNodes.length+1,x=new df,S=Object.assign({},r==="xaxis"?x.xAxisAnnotation:r==="yaxis"?x.yAxisAnnotation:x.pointAnnotation),E=At.extend(S,t);switch(r){case"xaxis":this.addXaxisAnnotation(E,f,y);break;case"yaxis":this.addYaxisAnnotation(E,f,y);break;case"point":this.addPointAnnotation(E,f,y)}var z=h.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(y,"']")),D=this.helpers.addBackgroundToAnno(z,E);return D&&f.insertBefore(D.node,z),i&&h.globals.memory.methodsToExec.push({context:s,id:E.id?E.id:At.randomId(),method:o,label:"addAnnotation",params:t}),n}},{key:"clearAnnotations",value:function(e){for(var t=e.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),n=t.globals.memory.methodsToExec.length-1;n>=0;n--)t.globals.memory.methodsToExec[n].label!=="addText"&&t.globals.memory.methodsToExec[n].label!=="addAnnotation"||t.globals.memory.methodsToExec.splice(n,1);i=At.listToArray(i),Array.prototype.forEach.call(i,(function(r){for(;r.firstChild;)r.removeChild(r.firstChild)}))}},{key:"removeAnnotation",value:function(e,t){var i=e.w,n=i.globals.dom.baseEl.querySelectorAll(".".concat(t));n&&(i.globals.memory.methodsToExec.map((function(r,o){r.id===t&&i.globals.memory.methodsToExec.splice(o,1)})),Object.keys(i.config.annotations).forEach((function(r){var o=i.config.annotations[r];Array.isArray(o)&&(i.config.annotations[r]=o.filter((function(s){return s.id!==t})))})),Array.prototype.forEach.call(n,(function(r){r.parentElement.removeChild(r)})))}}]),a})(),nb=function(a){var e,t=a.isTimeline,i=a.ctx,n=a.seriesIndex,r=a.dataPointIndex,o=a.y1,s=a.y2,h=a.w,f=h.globals.seriesRangeStart[n][r],y=h.globals.seriesRangeEnd[n][r],x=h.globals.labels[r],S=h.config.series[n].name?h.config.series[n].name:"",E=h.globals.ttKeyFormatter,z=h.config.tooltip.y.title.formatter,D={w:h,seriesIndex:n,dataPointIndex:r,start:f,end:y};typeof z=="function"&&(S=z(S,D)),(e=h.config.series[n].data[r])!==null&&e!==void 0&&e.x&&(x=h.config.series[n].data[r].x),t||h.config.xaxis.type==="datetime"&&(x=new Cy(i).xLabelFormat(h.globals.ttKeyFormatter,x,x,{i:void 0,dateFormatter:new Io(i).formatDate,w:h})),typeof E=="function"&&(x=E(x,D)),Number.isFinite(o)&&Number.isFinite(s)&&(f=o,y=s);var F="",U="",G=h.globals.colors[n];if(h.config.tooltip.x.formatter===void 0)if(h.config.xaxis.type==="datetime"){var Z=new Io(i);F=Z.formatDate(Z.getDate(f),h.config.tooltip.x.format),U=Z.formatDate(Z.getDate(y),h.config.tooltip.x.format)}else F=f,U=y;else F=h.config.tooltip.x.formatter(f),U=h.config.tooltip.x.formatter(y);return{start:f,end:y,startVal:F,endVal:U,ylabel:x,color:G,seriesName:S}},ab=function(a){var e=a.color,t=a.seriesName,i=a.ylabel,n=a.start,r=a.end,o=a.seriesIndex,s=a.dataPointIndex,h=a.ctx.tooltip.tooltipLabels.getFormatters(o);n=h.yLbFormatter(n),r=h.yLbFormatter(r);var f=h.yLbFormatter(a.w.globals.series[o][s]),y=`<span class="value start-value">
  `.concat(n,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(r,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(t||"")+'</span></div><div> <span class="category">'+i+": </span> "+(a.w.globals.comboCharts?a.w.config.series[o].type==="rangeArea"||a.w.config.series[o].type==="rangeBar"?y:"<span>".concat(f,"</span>"):y)+" </div></div>"},cy=(function(){function a(e){wn(this,a),this.opts=e}return Sn(a,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.hideYAxis(),At.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(e,t){var i=t.w.config.series[t.seriesIndex].name;return e!==null?i+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Ui(Ui({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,n=t.dataPointIndex,r=t.w;return e._getBoxTooltip(r,i,n,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,n=t.dataPointIndex,r=t.w;return e._getBoxTooltip(r,i,n,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var i=t.seriesIndex,n=t.dataPointIndex,r=t.w,o=function(){var s=r.globals.seriesRangeStart[i][n];return r.globals.seriesRangeEnd[i][n]-s};return r.globals.comboCharts?r.config.series[i].type==="rangeBar"||r.config.series[i].type==="rangeArea"?o():e:o()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?(function(t){var i=nb(Ui(Ui({},t),{},{isTimeline:!0})),n=i.color,r=i.seriesName,o=i.ylabel,s=i.startVal,h=i.endVal;return ab(Ui(Ui({},t),{},{color:n,seriesName:r,ylabel:o,start:s,end:h}))})(e):(function(t){var i=nb(t),n=i.color,r=i.seriesName,o=i.ylabel,s=i.start,h=i.end;return ab(Ui(Ui({},t),{},{color:n,seriesName:r,ylabel:o,start:s,end:h}))})(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(e){var t,i;return(t=e.plotOptions.bar)!==null&&t!==void 0&&t.barHeight||(e.plotOptions.bar.barHeight=2),(i=e.plotOptions.bar)!==null&&i!==void 0&&i.columnWidth||(e.plotOptions.bar.columnWidth=2),e}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return(function(t){var i=nb(t),n=i.color,r=i.seriesName,o=i.ylabel,s=i.start,h=i.end;return ab(Ui(Ui({},t),{},{color:n,seriesName:r,ylabel:o,start:s,end:h}))})(e)}}}}},{key:"brush",value:function(e){return At.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach((function(i,n){e.yaxis[n].min=0,e.yaxis[n].max=100})),e.chart.type==="bar"&&(e.dataLabels.formatter=t||function(i){return typeof i=="number"&&i?i.toFixed(0)+"%":i}),e}},{key:"stackedBars",value:function(){var e=this.bar();return Ui(Ui({},e),{},{plotOptions:Ui(Ui({},e.plotOptions),{},{bar:Ui(Ui({},e.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,i){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(o){return At.isNumber(o)?Math.floor(o):o};var n=e.xaxis.labels.formatter,r=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return i&&i.length&&(r=i.map((function(o){return Array.isArray(o)?o:String(o)}))),r&&r.length&&(e.xaxis.labels.formatter=function(o){return At.isNumber(o)?n(r[Math.floor(o)-1]):n(o)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(e,t,i,n,r){var o=e.globals.seriesCandleO[t][i],s=e.globals.seriesCandleH[t][i],h=e.globals.seriesCandleM[t][i],f=e.globals.seriesCandleL[t][i],y=e.globals.seriesCandleC[t][i];return e.config.series[t].type&&e.config.series[t].type!==r?`<div class="apexcharts-custom-tooltip">
          `.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][i],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(n[0],': <span class="value">')+o+"</span></div>"+"<div>".concat(n[1],': <span class="value">')+s+"</span></div>"+(h?"<div>".concat(n[2],': <span class="value">')+h+"</span></div>":"")+"<div>".concat(n[3],': <span class="value">')+f+"</span></div>"+"<div>".concat(n[4],': <span class="value">')+y+"</span></div></div>"}}]),a})(),uy=(function(){function a(e){wn(this,a),this.opts=e}return Sn(a,[{key:"init",value:function(e){var t=e.responsiveOverride,i=this.opts,n=new df,r=new cy(i);this.chartType=i.chart.type,i=this.extendYAxis(i),i=this.extendAnnotations(i);var o=n.init(),s={};if(i&&hl(i)==="object"){var h,f,y,x,S,E,z,D,F,U,G={};G=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)!==-1?r[i.chart.type]():r.line(),(h=i.plotOptions)!==null&&h!==void 0&&(f=h.bar)!==null&&f!==void 0&&f.isFunnel&&(G=r.funnel()),i.chart.stacked&&i.chart.type==="bar"&&(G=r.stackedBars()),(y=i.chart.brush)!==null&&y!==void 0&&y.enabled&&(G=r.brush(G)),(x=i.plotOptions)!==null&&x!==void 0&&(S=x.line)!==null&&S!==void 0&&S.isSlopeChart&&(G=r.slope()),i.chart.stacked&&i.chart.stackType==="100%"&&(i=r.stacked100(i)),(E=i.plotOptions)!==null&&E!==void 0&&(z=E.bar)!==null&&z!==void 0&&z.isDumbbell&&(i=r.dumbbell(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},t||(i.xaxis.convertedCatToNumeric=!1),((D=(i=this.checkForCatToNumericXAxis(this.chartType,G,i)).chart.sparkline)!==null&&D!==void 0&&D.enabled||(F=window.Apex.chart)!==null&&F!==void 0&&(U=F.sparkline)!==null&&U!==void 0&&U.enabled)&&(G=r.sparkline(G)),s=At.extend(o,G)}var Z=At.extend(s,window.Apex);return o=At.extend(Z,i),o=this.handleUserInputErrors(o)}},{key:"checkForCatToNumericXAxis",value:function(e,t,i){var n,r,o=new cy(i),s=(e==="bar"||e==="boxPlot")&&((n=i.plotOptions)===null||n===void 0||(r=n.bar)===null||r===void 0?void 0:r.horizontal),h=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",f=i.xaxis.type!=="datetime"&&i.xaxis.type!=="numeric",y=i.xaxis.tickPlacement?i.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return s||h||!f||y==="between"||(i=o.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(e,t){var i=new df;(e.yaxis===void 0||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=At.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[At.extend(i.yAxis,e.yaxis)]:e.yaxis=At.extendArray(e.yaxis,i.yAxis);var n=!1;e.yaxis.forEach((function(o){o.logarithmic&&(n=!0)}));var r=e.series;return t&&!r&&(r=t.config.series),n&&r.length!==e.yaxis.length&&r.length&&(e.yaxis=r.map((function(o,s){if(o.name||(r[s].name="series-".concat(s+1)),e.yaxis[s])return e.yaxis[s].seriesName=r[s].name,e.yaxis[s];var h=At.extend(i.yAxis,e.yaxis[0]);return h.show=!1,h}))),n&&r.length>1&&r.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}},{key:"extendAnnotations",value:function(e){return e.annotations===void 0&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new df;return e.annotations.yaxis=At.extendArray(e.annotations.yaxis!==void 0?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new df;return e.annotations.xaxis=At.extendArray(e.annotations.xaxis!==void 0?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new df;return e.annotations.points=At.extendArray(e.annotations.points!==void 0?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(t.chart.type==="bar"&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return t.chart.type!=="bar"&&t.chart.type!=="rangeBar"||t.tooltip.shared&&t.xaxis.crosshairs.width==="barWidth"&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),t.chart.type!=="candlestick"&&t.chart.type!=="boxPlot"||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),a})(),rP=(function(){function a(){wn(this,a)}return Sn(a,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.dataWasParsed=!1,e.originalSeries=null,e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.barGroups=[],e.lineGroups=[],e.areaGroups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.lastWheelExecution=0,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:e.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=At.extend({},e),t.initialSeries=At.clone(e.series),t.lastXAxis=At.clone(t.initialConfig.xaxis),t.lastYAxis=At.clone(t.initialConfig.yaxis),t}}]),a})(),r8=(function(){function a(e){wn(this,a),this.opts=e}return Sn(a,[{key:"init",value:function(){var e=new uy(this.opts).init({responsiveOverride:!1});return{config:e,globals:new rP().init(e)}}}]),a})(),su=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return Sn(a,[{key:"clippedImgArea",value:function(e){var t=this.w,i=t.config,n=parseInt(t.globals.gridWidth,10),r=parseInt(t.globals.gridHeight,10),o=n>r?n:r,s=e.image,h=0,f=0;e.width===void 0&&e.height===void 0?i.fill.image.width!==void 0&&i.fill.image.height!==void 0?(h=i.fill.image.width+1,f=i.fill.image.height):(h=o+1,f=o):(h=e.width,f=e.height);var y=document.createElementNS(t.globals.SVGNS,"pattern");vi.setAttrs(y,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:h+"px",height:f+"px"});var x=document.createElementNS(t.globals.SVGNS,"image");y.appendChild(x),x.setAttributeNS(window.SVG.xlink,"href",s),vi.setAttrs(x,{x:0,y:0,preserveAspectRatio:"none",width:h+"px",height:f+"px"}),x.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(y)}},{key:"getSeriesIndex",value:function(e){var t=this.w,i=t.config.chart.type;return(i==="bar"||i==="rangeBar")&&t.config.plotOptions.bar.distributed||i==="heatmap"||i==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(e,t){var i,n=this.w,r=null,o=null,s=wm(e);try{for(s.s();!(i=s.n()).done;){var h=i.value;h>=t.threshold?(r===null||h>r)&&(r=h):(o===null||h<o)&&(o=h)}}catch(x){s.e(x)}finally{s.f()}r===null&&(r=t.threshold),o===null&&(o=t.threshold);var f=r-t.threshold+(t.threshold-o);f===0&&(f=1);var y=100-(t.threshold-o)/f*100;return[{offset:y=Math.max(0,Math.min(y,100)),color:t.colorAboveThreshold,opacity:n.config.fill.opacity},{offset:0,color:t.colorBelowThreshold,opacity:n.config.fill.opacity}]}},{key:"fillPath",value:function(e){var t,i,n,r=this.w;this.opts=e;var o,s,h,f=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var y=f.plotOptions.line.colors.colorAboveThreshold&&f.plotOptions.line.colors.colorBelowThreshold,x=this.getFillColors()[this.seriesIndex];r.globals.seriesColors[this.seriesIndex]!==void 0&&(x=r.globals.seriesColors[this.seriesIndex]),typeof x=="function"&&(x=x({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:r}));var S,E,z,D=e.fillType?e.fillType:this.getFillType(this.seriesIndex),F=Array.isArray(f.fill.opacity)?f.fill.opacity[this.seriesIndex]:f.fill.opacity,U=D==="gradient"||y;e.color&&(x=e.color),(t=r.config.series[this.seriesIndex])!==null&&t!==void 0&&(i=t.data)!==null&&i!==void 0&&(n=i[e.dataPointIndex])!==null&&n!==void 0&&n.fillColor&&(x=(S=r.config.series[this.seriesIndex])===null||S===void 0||(E=S.data)===null||E===void 0||(z=E[e.dataPointIndex])===null||z===void 0?void 0:z.fillColor),x||(x="#fff",console.warn("undefined color - ApexCharts"));var G=x;if(x.indexOf("rgb")===-1?x.indexOf("#")===-1?G=x:x.length<9&&(G=At.hexToRgba(x,F)):x.indexOf("rgba")>-1?F=At.getOpacityFromRGBA(x):G=At.hexToRgba(At.rgb2hex(x),F),e.opacity&&(F=e.opacity),D==="pattern"&&(s=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:s,fillColor:x,fillOpacity:F,defaultColor:G})),U){var Z=oo(f.fill.gradient.colorStops)||[],ee=f.fill.gradient.type;y&&(Z[this.seriesIndex]=this.computeColorStops(r.globals.series[this.seriesIndex],f.plotOptions.line.colors),ee="vertical"),h=this.handleGradientFill({type:ee,fillConfig:e.fillConfig,fillColor:x,fillOpacity:F,colorStops:Z,i:this.seriesIndex})}if(D==="image"){var ie=f.fill.image.src,le=e.patternID?e.patternID:"",J="pattern".concat(r.globals.cuid).concat(e.seriesNumber+1).concat(le);this.patternIDs.indexOf(J)===-1&&(this.clippedImgArea({opacity:F,image:Array.isArray(ie)?e.seriesNumber<ie.length?ie[e.seriesNumber]:ie[0]:ie,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:J}),this.patternIDs.push(J)),o="url(#".concat(J,")")}else o=U?h:D==="pattern"?s:G;return e.solid&&(o=G),o}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,i=this.opts,n=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors):t.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors),i.fillColors!==void 0&&(n=[],Array.isArray(i.fillColors)?n=i.fillColors.slice():n.push(i.fillColors)),n}},{key:"handlePatternFill",value:function(e){var t=e.fillConfig,i=e.patternFill,n=e.fillColor,r=e.fillOpacity,o=e.defaultColor,s=this.w.config.fill;t&&(s=t);var h=this.opts,f=new vi(this.ctx),y=Array.isArray(s.pattern.strokeWidth)?s.pattern.strokeWidth[this.seriesIndex]:s.pattern.strokeWidth,x=n;return Array.isArray(s.pattern.style)?i=s.pattern.style[h.seriesNumber]!==void 0?f.drawPattern(s.pattern.style[h.seriesNumber],s.pattern.width,s.pattern.height,x,y,r):o:i=f.drawPattern(s.pattern.style,s.pattern.width,s.pattern.height,x,y,r),i}},{key:"handleGradientFill",value:function(e){var t=e.type,i=e.fillColor,n=e.fillOpacity,r=e.fillConfig,o=e.colorStops,s=e.i,h=this.w.config.fill;r&&(h=Ui(Ui({},h),r));var f=this.opts,y=new vi(this.ctx),x=new At;t=t||h.gradient.type;var S,E=i,z=h.gradient.opacityFrom===void 0?n:Array.isArray(h.gradient.opacityFrom)?h.gradient.opacityFrom[s]:h.gradient.opacityFrom;E.indexOf("rgba")>-1&&(z=At.getOpacityFromRGBA(E));var D=h.gradient.opacityTo===void 0?n:Array.isArray(h.gradient.opacityTo)?h.gradient.opacityTo[s]:h.gradient.opacityTo;if(h.gradient.gradientToColors===void 0||h.gradient.gradientToColors.length===0)S=h.gradient.shade==="dark"?x.shadeColor(-1*parseFloat(h.gradient.shadeIntensity),i.indexOf("rgb")>-1?At.rgb2hex(i):i):x.shadeColor(parseFloat(h.gradient.shadeIntensity),i.indexOf("rgb")>-1?At.rgb2hex(i):i);else if(h.gradient.gradientToColors[f.seriesNumber]){var F=h.gradient.gradientToColors[f.seriesNumber];S=F,F.indexOf("rgba")>-1&&(D=At.getOpacityFromRGBA(F))}else S=i;if(h.gradient.gradientFrom&&(E=h.gradient.gradientFrom),h.gradient.gradientTo&&(S=h.gradient.gradientTo),h.gradient.inverseColors){var U=E;E=S,S=U}return E.indexOf("rgb")>-1&&(E=At.rgb2hex(E)),S.indexOf("rgb")>-1&&(S=At.rgb2hex(S)),y.drawGradient(t,E,S,z,D,f.size,h.gradient.stops,o,s)}}]),a})(),xg=(function(){function a(e,t){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)e.globals.markers.size[t]===void 0&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map((function(i){return e.config.markers.size}))}},{key:"plotChartMarkers",value:function(e){var t=e.pointsPos,i=e.seriesIndex,n=e.j,r=e.pSize,o=e.alwaysDrawMarker,s=o!==void 0&&o,h=e.isVirtualPoint,f=h!==void 0&&h,y=this.w,x=i,S=t,E=null,z=new vi(this.ctx),D=y.config.markers.discrete&&y.config.markers.discrete.length;if(Array.isArray(S.x))for(var F=0;F<S.x.length;F++){var U=void 0,G=n,Z=!At.isNumber(S.y[F]);y.globals.markers.largestSize===0&&y.globals.hasNullValues&&y.globals.series[x][n+1]!==null&&!f&&(Z=!0),n===1&&F===0&&(G=0),n===1&&F===1&&(G=1);var ee="apexcharts-marker";if(y.config.chart.type!=="line"&&y.config.chart.type!=="area"||y.globals.comboCharts||y.config.tooltip.intersect||(ee+=" no-pointer-events"),(Array.isArray(y.config.markers.size)?y.globals.markers.size[i]>0:y.config.markers.size>0)||s||D){Z||(ee+=" w".concat(At.randomId()));var ie=this.getMarkerConfig({cssClass:ee,seriesIndex:i,dataPointIndex:G});y.config.series[x].data[G]&&(y.config.series[x].data[G].fillColor&&(ie.pointFillColor=y.config.series[x].data[G].fillColor),y.config.series[x].data[G].strokeColor&&(ie.pointStrokeColor=y.config.series[x].data[G].strokeColor)),r!==void 0&&(ie.pSize=r),(S.x[F]<-y.globals.markers.largestSize||S.x[F]>y.globals.gridWidth+y.globals.markers.largestSize||S.y[F]<-y.globals.markers.largestSize||S.y[F]>y.globals.gridHeight+y.globals.markers.largestSize)&&(ie.pSize=0),!Z&&((y.globals.markers.size[i]>0||s||D)&&!E&&(E=z.group({class:s||D?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(y.globals.cuid,")")),(U=z.drawMarker(S.x[F],S.y[F],ie)).attr("rel",G),U.attr("j",G),U.attr("index",i),U.node.setAttribute("default-marker-size",ie.pSize),new Lo(this.ctx).setSelectionFilter(U,i,G),this.addEvents(U),E&&E.add(U))}else y.globals.pointsArray[i]===void 0&&(y.globals.pointsArray[i]=[]),y.globals.pointsArray[i].push([S.x[F],S.y[F]])}return E}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,i=e.seriesIndex,n=e.dataPointIndex,r=n===void 0?null:n,o=e.radius,s=o===void 0?null:o,h=e.size,f=h===void 0?null:h,y=e.strokeWidth,x=y===void 0?null:y,S=this.w,E=this.getMarkerStyle(i),z=f===null?S.globals.markers.size[i]:f,D=S.config.markers;return r!==null&&D.discrete.length&&D.discrete.map((function(F){F.seriesIndex===i&&F.dataPointIndex===r&&(E.pointStrokeColor=F.strokeColor,E.pointFillColor=F.fillColor,z=F.size,E.pointShape=F.shape)})),{pSize:s===null?z:s,pRadius:s!==null?s:D.radius,pointStrokeWidth:x!==null?x:Array.isArray(D.strokeWidth)?D.strokeWidth[i]:D.strokeWidth,pointStrokeColor:E.pointStrokeColor,pointFillColor:E.pointFillColor,shape:E.pointShape||(Array.isArray(D.shape)?D.shape[i]:D.shape),class:t,pointStrokeOpacity:Array.isArray(D.strokeOpacity)?D.strokeOpacity[i]:D.strokeOpacity,pointStrokeDashArray:Array.isArray(D.strokeDashArray)?D.strokeDashArray[i]:D.strokeDashArray,pointFillOpacity:Array.isArray(D.fillOpacity)?D.fillOpacity[i]:D.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(e){var t=this.w,i=new vi(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,i=t.globals.markers.colors,n=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(n)?n[e]:n,pointFillColor:Array.isArray(i)?i[e]:i}}}]),a})(),sP=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return Sn(a,[{key:"draw",value:function(e,t,i){var n=this.w,r=new vi(this.ctx),o=i.realIndex,s=i.pointsPos,h=i.zRatio,f=i.elParent,y=r.group({class:"apexcharts-series-markers apexcharts-series-".concat(n.config.chart.type)});if(y.attr("clip-path","url(#gridRectMarkerMask".concat(n.globals.cuid,")")),Array.isArray(s.x))for(var x=0;x<s.x.length;x++){var S=t+1,E=!0;t===0&&x===0&&(S=0),t===0&&x===1&&(S=1);var z=n.globals.markers.size[o];if(h!==1/0){var D=n.config.plotOptions.bubble;z=n.globals.seriesZ[o][S],D.zScaling&&(z/=h),D.minBubbleRadius&&z<D.minBubbleRadius&&(z=D.minBubbleRadius),D.maxBubbleRadius&&z>D.maxBubbleRadius&&(z=D.maxBubbleRadius)}var F=s.x[x],U=s.y[x];if(z=z||0,U!==null&&n.globals.series[o][S]!==void 0||(E=!1),E){var G=this.drawPoint(F,U,z,o,S,t);y.add(G)}f.add(y)}}},{key:"drawPoint",value:function(e,t,i,n,r,o){var s=this.w,h=n,f=new gg(this.ctx),y=new Lo(this.ctx),x=new su(this.ctx),S=new xg(this.ctx),E=new vi(this.ctx),z=S.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:h,dataPointIndex:r,radius:s.config.chart.type==="bubble"||s.globals.comboCharts&&s.config.series[n]&&s.config.series[n].type==="bubble"?i:null}),D=x.fillPath({seriesNumber:n,dataPointIndex:r,color:z.pointFillColor,patternUnits:"objectBoundingBox",value:s.globals.series[n][o]}),F=E.drawMarker(e,t,z);if(s.config.series[h].data[r]&&s.config.series[h].data[r].fillColor&&(D=s.config.series[h].data[r].fillColor),F.attr({fill:D}),s.config.chart.dropShadow.enabled){var U=s.config.chart.dropShadow;y.dropShadow(F,U,n)}if(!this.initialAnim||s.globals.dataChanged||s.globals.resized)s.globals.animationEnded=!0;else{var G=s.config.chart.animations.speed;f.animateMarker(F,G,s.globals.easing,(function(){window.setTimeout((function(){f.animationCompleted(F)}),100)}))}return F.attr({rel:r,j:r,index:n,"default-marker-size":z.pSize}),y.setSelectionFilter(F,n,r),S.addEvents(F),F.node.classList.add("apexcharts-marker"),F}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),a})(),hg=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"dataLabelsCorrection",value:function(e,t,i,n,r,o,s){var h=this.w,f=!1,y=new vi(this.ctx).getTextRects(i,s),x=y.width,S=y.height;t<0&&(t=0),t>h.globals.gridHeight+S&&(t=h.globals.gridHeight+S/2),h.globals.dataLabelsRects[n]===void 0&&(h.globals.dataLabelsRects[n]=[]),h.globals.dataLabelsRects[n].push({x:e,y:t,width:x,height:S});var E=h.globals.dataLabelsRects[n].length-2,z=h.globals.lastDrawnDataLabelsIndexes[n]!==void 0?h.globals.lastDrawnDataLabelsIndexes[n][h.globals.lastDrawnDataLabelsIndexes[n].length-1]:0;if(h.globals.dataLabelsRects[n][E]!==void 0){var D=h.globals.dataLabelsRects[n][z];(e>D.x+D.width||t>D.y+D.height||t+S<D.y||e+x<D.x)&&(f=!0)}return(r===0||o)&&(f=!0),{x:e,y:t,textRects:y,drawnextLabel:f}}},{key:"drawDataLabel",value:function(e){var t=this,i=e.type,n=e.pos,r=e.i,o=e.j,s=e.isRangeStart,h=e.strokeWidth,f=h===void 0?2:h,y=this.w,x=new vi(this.ctx),S=y.config.dataLabels,E=0,z=0,D=o,F=null;if(y.globals.collapsedSeriesIndices.indexOf(r)!==-1||!S.enabled||!Array.isArray(n.x))return F;F=x.group({class:"apexcharts-data-labels"});for(var U=0;U<n.x.length;U++)if(E=n.x[U]+S.offsetX,z=n.y[U]+S.offsetY+f,!isNaN(E)){o===1&&U===0&&(D=0),o===1&&U===1&&(D=1);var G=y.globals.series[r][D];i==="rangeArea"&&(G=s?y.globals.seriesRangeStart[r][D]:y.globals.seriesRangeEnd[r][D]);var Z="",ee=function(le){return y.config.dataLabels.formatter(le,{ctx:t.ctx,seriesIndex:r,dataPointIndex:D,w:y})};y.config.chart.type==="bubble"?(Z=ee(G=y.globals.seriesZ[r][D]),z=n.y[U],z=new sP(this.ctx).centerTextInBubble(z,r,D).y):G!==void 0&&(Z=ee(G));var ie=y.config.dataLabels.textAnchor;y.globals.isSlopeChart&&(ie=D===0?"end":D===y.config.series[r].data.length-1?"start":"middle"),this.plotDataLabelsText({x:E,y:z,text:Z,i:r,j:D,parent:F,offsetCorrection:!0,dataLabelsConfig:y.config.dataLabels,textAnchor:ie})}return F}},{key:"plotDataLabelsText",value:function(e){var t=this.w,i=new vi(this.ctx),n=e.x,r=e.y,o=e.i,s=e.j,h=e.text,f=e.textAnchor,y=e.fontSize,x=e.parent,S=e.dataLabelsConfig,E=e.color,z=e.alwaysDrawDataLabel,D=e.offsetCorrection,F=e.className,U=null;if(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(o)<0)return U;var G={x:n,y:r,drawnextLabel:!0,textRects:null};D&&(G=this.dataLabelsCorrection(n,r,h,o,s,z,parseInt(S.style.fontSize,10))),t.globals.zoomed||(n=G.x,r=G.y),G.textRects&&(n<-20-G.textRects.width||n>t.globals.gridWidth+G.textRects.width+30)&&(h="");var Z=t.globals.dataLabels.style.colors[o];((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(Z=t.globals.dataLabels.style.colors[s]),typeof Z=="function"&&(Z=Z({series:t.globals.series,seriesIndex:o,dataPointIndex:s,w:t})),E&&(Z=E);var ee=S.offsetX,ie=S.offsetY;if(t.config.chart.type!=="bar"&&t.config.chart.type!=="rangeBar"||(ee=0,ie=0),t.globals.isSlopeChart&&(s!==0&&(ee=-2*S.offsetX+5),s!==0&&s!==t.config.series[o].data.length-1&&(ee=0)),G.drawnextLabel){if(f==="middle"&&n===t.globals.gridWidth&&(f="end"),(U=i.drawText({width:100,height:parseInt(S.style.fontSize,10),x:n+ee,y:r+ie,foreColor:Z,textAnchor:f||S.textAnchor,text:h,fontSize:y||S.style.fontSize,fontFamily:S.style.fontFamily,fontWeight:S.style.fontWeight||"normal"})).attr({class:F||"apexcharts-datalabel",cx:n,cy:r}),S.dropShadow.enabled){var le=S.dropShadow;new Lo(this.ctx).dropShadow(U,le)}x.add(U),t.globals.lastDrawnDataLabelsIndexes[o]===void 0&&(t.globals.lastDrawnDataLabelsIndexes[o]=[]),t.globals.lastDrawnDataLabelsIndexes[o].push(s)}return U}},{key:"addBackgroundToDataLabel",value:function(e,t){var i=this.w,n=i.config.dataLabels.background,r=n.padding,o=n.padding/2,s=t.width,h=t.height,f=new vi(this.ctx).drawRect(t.x-r,t.y-o/2,s+2*r,h+o,n.borderRadius,i.config.chart.background!=="transparent"&&i.config.chart.background?i.config.chart.background:"#fff",n.opacity,n.borderWidth,n.borderColor);return n.dropShadow.enabled&&new Lo(this.ctx).dropShadow(f,n.dropShadow),f}},{key:"dataLabelsBackground",value:function(){var e=this.w;if(e.config.chart.type!=="bubble")for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<t.length;i++){var n=t[i],r=n.getBBox(),o=null;if(r.width&&r.height&&(o=this.addBackgroundToDataLabel(n,r)),o){n.parentNode.insertBefore(o.node,n);var s=e.config.dataLabels.background.backgroundColor||n.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?o.animate().attr({fill:s}):o.attr({fill:s}),n.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),n=0;n<t.length;n++)i&&i.insertBefore(t[n],i.nextSibling)}}]),a})(),oP=`.apexcharts-flip-y {
  transform: scaleY(-1) translateY(-100%);
  transform-origin: top;
  transform-box: fill-box;
}
.apexcharts-flip-x {
  transform: scaleX(-1);
  transform-origin: center;
  transform-box: fill-box;
}
.apexcharts-legend {
  display: flex;
  overflow: auto;
  padding: 0 10px;
}
.apexcharts-legend.apexcharts-legend-group-horizontal {
  flex-direction: column;
}
.apexcharts-legend-group {
  display: flex;
}
.apexcharts-legend-group-vertical {
  flex-direction: column-reverse;
}
.apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
  flex-wrap: wrap
}
.apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
  flex-direction: column;
  bottom: 0;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
  justify-content: flex-start;
  align-items: flex-start;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
  justify-content: center;
  align-items: center;
}
.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
  justify-content: flex-end;
  align-items: flex-end;
}
.apexcharts-legend-series {
  cursor: pointer;
  line-height: normal;
  display: flex;
  align-items: center;
}
.apexcharts-legend-text {
  position: relative;
  font-size: 14px;
}
.apexcharts-legend-text *, .apexcharts-legend-marker * {
  pointer-events: none;
}
.apexcharts-legend-marker {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  margin-right: 1px;
}

.apexcharts-legend-series.apexcharts-no-click {
  cursor: auto;
}
.apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
  display: none !important;
}
.apexcharts-inactive-legend {
  opacity: 0.45;
} `,zc=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return Sn(a,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(At.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),i=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(e,t){var i=this.w;function n(r){for(var o=0;o<r.length;o++)r[o].index===t&&e.node.classList.add("apexcharts-series-collapsed")}n(i.globals.collapsedSeries),n(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=this.w,r=At.clone(n.globals.initialSeries);n.globals.previousPaths=[],i?(n.globals.collapsedSeries=[],n.globals.ancillaryCollapsedSeries=[],n.globals.collapsedSeriesIndices=[],n.globals.ancillaryCollapsedSeriesIndices=[]):r=this.emptyCollapsedSeries(r),n.config.series=r,e&&(t&&(n.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(r,n.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,i=0;i<e.length;i++)t.globals.collapsedSeriesIndices.indexOf(i)>-1&&(e[i].data=[]);return e}},{key:"highlightSeries",value:function(e){var t=this.w,i=this.getSeriesByName(e),n=parseInt(i?.getAttribute("data:realIndex"),10),r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),o=null,s=null,h=null;if(t.globals.axisCharts||t.config.chart.type==="radialBar")if(t.globals.axisCharts){o=t.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),s=t.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"));var f=t.globals.seriesYAxisReverseMap[n];h=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(f,"']"))}else o=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']"));else o=t.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var y=0;y<r.length;y++)r[y].classList.add(this.legendInactiveClass);if(o)t.globals.axisCharts||o.parentNode.classList.remove(this.legendInactiveClass),o.classList.remove(this.legendInactiveClass),s!==null&&s.classList.remove(this.legendInactiveClass),h!==null&&h.classList.remove(this.legendInactiveClass);else for(var x=0;x<r.length;x++)r[x].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(e,t){var i=this.w;t||(t=e.target);var n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(e.type==="mousemove"){var r=parseInt(t.getAttribute("rel"),10)-1;this.highlightSeries(i.globals.seriesNames[r])}else if(e.type==="mouseout")for(var o=0;o<n.length;o++)n[o].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var i=this,n=this.w,r=n.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),o=function(f){for(var y=0;y<r.length;y++)r[y].classList[f](i.legendInactiveClass)};if(e.type==="mousemove"){var s=parseInt(t.getAttribute("rel"),10)-1;o("add");var h=n.config.plotOptions.heatmap.colorScale.ranges;(function(f,y){for(var x=0;x<r.length;x++){var S=Number(r[x].getAttribute("val"));S>=f.from&&(S<f.to||f.to===y&&S===y)&&r[x].classList.remove(i.legendInactiveClass)}})(h[s],h.reduce((function(f,y){return Math.max(f,y.to)}),0))}else e.type==="mouseout"&&o("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=this.w,n=0;if(i.config.series.length>1){for(var r=i.config.series.map((function(s,h){return s.data&&s.data.length>0&&i.globals.collapsedSeriesIndices.indexOf(h)===-1&&(!i.globals.comboCharts||t.length===0||t.length&&t.indexOf(i.config.series[h].type)>-1)?h:-1})),o=e==="asc"?0:r.length-1;e==="asc"?o<r.length:o>=0;e==="asc"?o++:o--)if(r[o]!==-1){n=r[o];break}}return n}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map((function(e,t){return e.type==="bar"||e.type==="column"?t:-1})).filter((function(e){return e!==-1})):this.w.config.series.map((function(e,t){return t}))}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(o,s,h){for(var f=o[s].childNodes,y={type:h,paths:[],realIndex:o[s].getAttribute("data:realIndex")},x=0;x<f.length;x++)if(f[x].hasAttribute("pathTo")){var S=f[x].getAttribute("pathTo");y.paths.push({d:S})}e.globals.previousPaths.push(y)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach((function(o){for(var s,h=(s=o,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(s,"-series .apexcharts-series"))),f=0;f<h.length;f++)t(h,f,o)}));var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(i.length>0)for(var n=function(o){for(var s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(o,"'] rect")),h=[],f=function(x){var S=function(z){return s[x].getAttribute(z)},E={x:parseFloat(S("x")),y:parseFloat(S("y")),width:parseFloat(S("width")),height:parseFloat(S("height"))};h.push({rect:E,color:s[x].getAttribute("color")})},y=0;y<s.length;y++)f(y);e.globals.previousPaths.push(h)},r=0;r<i.length;r++)n(r);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,i=new vi(this.ctx),n=e.globals.svgWidth/2,r=e.globals.svgHeight/2,o="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,t.align==="left"?(n=10,o="start"):t.align==="right"&&(n=e.globals.svgWidth-10,o="end"),t.verticalAlign==="top"?r=50:t.verticalAlign==="bottom"&&(r=e.globals.svgHeight-50),n+=t.offsetX,r=r+parseInt(t.style.fontSize,10)+2+t.offsetY,t.text!==void 0&&t.text!==""){var s=i.drawText({x:n,y:r,text:t.text,textAnchor:o,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(s)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,i=0;i<e.length;i++)if(e[i].length===0)for(var n=0;n<e[t.globals.maxValsInArrayIndex].length;n++)e[i].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,i=this.filteredSeriesX(),n=0;n<i.length-1;n++)if(i[n][0]!==i[n+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){var e=this.w.globals.seriesX.map((function(t){return t.length>0?t:[]}));return e}}]),a})(),Hw=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Rs(this.ctx)}return Sn(a,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new zc(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].x!==void 0&&e[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new zc(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==void 0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var i=this.w.config,n=this.w.globals,r=i.chart.type==="boxPlot"||i.series[t].type==="boxPlot",o=0;o<e[t].data.length;o++)if(e[t].data[o][1]!==void 0&&(Array.isArray(e[t].data[o][1])&&e[t].data[o][1].length===4&&!r?this.twoDSeries.push(At.parseNumber(e[t].data[o][1][3])):e[t].data[o].length>=5?this.twoDSeries.push(At.parseNumber(e[t].data[o][4])):this.twoDSeries.push(At.parseNumber(e[t].data[o][1])),n.dataFormatXNumeric=!0),i.xaxis.type==="datetime"){var s=new Date(e[t].data[o][0]);s=new Date(s).getTime(),this.twoDSeriesX.push(s)}else this.twoDSeriesX.push(e[t].data[o][0]);for(var h=0;h<e[t].data.length;h++)e[t].data[h][2]!==void 0&&(this.threeDSeries.push(e[t].data[h][2]),n.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var i=this.w.config,n=this.w.globals,r=new Io(this.ctx),o=t;n.collapsedSeriesIndices.indexOf(t)>-1&&(o=this.activeSeriesIndex);for(var s=0;s<e[t].data.length;s++)e[t].data[s].y!==void 0&&(Array.isArray(e[t].data[s].y)?this.twoDSeries.push(At.parseNumber(e[t].data[s].y[e[t].data[s].y.length-1])):this.twoDSeries.push(At.parseNumber(e[t].data[s].y))),e[t].data[s].goals!==void 0&&Array.isArray(e[t].data[s].goals)?(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[s].goals)):(this.seriesGoals[t]===void 0&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var h=0;h<e[o].data.length;h++){var f=typeof e[o].data[h].x=="string",y=Array.isArray(e[o].data[h].x),x=!y&&!!r.isValidDate(e[o].data[h].x);if(f||x)if(f||i.xaxis.convertedCatToNumeric){var S=n.isBarHorizontal&&n.isRangeData;i.xaxis.type!=="datetime"||S?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[o].data[h].x),isNaN(e[o].data[h].x)||this.w.config.xaxis.type==="category"||typeof e[o].data[h].x=="string"||(n.isXNumeric=!0)):this.twoDSeriesX.push(r.parseDate(e[o].data[h].x))}else i.xaxis.type==="datetime"?this.twoDSeriesX.push(r.parseDate(e[o].data[h].x.toString())):(n.dataFormatXNumeric=!0,n.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[o].data[h].x)));else y?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[o].data[h].x)):(n.isXNumeric=!0,n.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[o].data[h].x))}if(e[t].data[0]&&e[t].data[0].z!==void 0){for(var E=0;E<e[t].data.length;E++)this.threeDSeries.push(e[t].data[E].z);n.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleRangeDataFormat("xy",e,t)),i.seriesRangeStart[t]=n.start===void 0?[]:n.start,i.seriesRangeEnd[t]=n.end===void 0?[]:n.end,i.seriesRange[t]=n.rangeUniques,i.seriesRange.forEach((function(r,o){r&&r.forEach((function(s,h){s.y.forEach((function(f,y){for(var x=0;x<s.y.length;x++)if(y!==x){var S=f.y1,E=f.y2,z=s.y[x].y1;S<=s.y[x].y2&&z<=E&&(s.overlaps.indexOf(f.rangeName)<0&&s.overlaps.push(f.rangeName),s.overlaps.indexOf(s.y[x].rangeName)<0&&s.overlaps.push(s.y[x].rangeName))}}))}))})),n}},{key:"handleCandleStickBoxData",value:function(e,t){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleCandleStickBoxDataFormat("xy",e,t)),i.seriesCandleO[t]=n.o,i.seriesCandleH[t]=n.h,i.seriesCandleM[t]=n.m,i.seriesCandleL[t]=n.l,i.seriesCandleC[t]=n.c,n}},{key:"handleRangeDataFormat",value:function(e,t,i){var n=[],r=[],o=t[i].data.filter((function(y,x,S){return x===S.findIndex((function(E){return E.x===y.x}))})).map((function(y,x){return{x:y.x,overlaps:[],y:[]}}));if(e==="array")for(var s=0;s<t[i].data.length;s++)Array.isArray(t[i].data[s])?(n.push(t[i].data[s][1][0]),r.push(t[i].data[s][1][1])):(n.push(t[i].data[s]),r.push(t[i].data[s]));else if(e==="xy")for(var h=function(y){var x=Array.isArray(t[i].data[y].y),S=At.randomId(),E=t[i].data[y].x,z={y1:x?t[i].data[y].y[0]:t[i].data[y].y,y2:x?t[i].data[y].y[1]:t[i].data[y].y,rangeName:S};t[i].data[y].rangeName=S;var D=o.findIndex((function(F){return F.x===E}));o[D].y.push(z),n.push(z.y1),r.push(z.y2)},f=0;f<t[i].data.length;f++)h(f);return{start:n,end:r,rangeUniques:o}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,i){var n=this.w,r=n.config.chart.type==="boxPlot"||n.config.series[i].type==="boxPlot",o=[],s=[],h=[],f=[],y=[];if(e==="array")if(r&&t[i].data[0].length===6||!r&&t[i].data[0].length===5)for(var x=0;x<t[i].data.length;x++)o.push(t[i].data[x][1]),s.push(t[i].data[x][2]),r?(h.push(t[i].data[x][3]),f.push(t[i].data[x][4]),y.push(t[i].data[x][5])):(f.push(t[i].data[x][3]),y.push(t[i].data[x][4]));else for(var S=0;S<t[i].data.length;S++)Array.isArray(t[i].data[S][1])&&(o.push(t[i].data[S][1][0]),s.push(t[i].data[S][1][1]),r?(h.push(t[i].data[S][1][2]),f.push(t[i].data[S][1][3]),y.push(t[i].data[S][1][4])):(f.push(t[i].data[S][1][2]),y.push(t[i].data[S][1][3])));else if(e==="xy")for(var E=0;E<t[i].data.length;E++)Array.isArray(t[i].data[E].y)&&(o.push(t[i].data[E].y[0]),s.push(t[i].data[E].y[1]),r?(h.push(t[i].data[E].y[2]),f.push(t[i].data[E].y[3]),y.push(t[i].data[E].y[4])):(f.push(t[i].data[E].y[2]),y.push(t[i].data[E].y[3])));return{o,h:s,m:h,l:f,c:y}}},{key:"parseDataAxisCharts",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,n=this.w.config,r=this.w.globals,o=new Io(i),s=n.labels.length>0?n.labels.slice():n.xaxis.categories.slice();r.isRangeBar=n.chart.type==="rangeBar"&&r.isBarHorizontal,r.hasXaxisGroups=n.xaxis.type==="category"&&n.xaxis.group.groups.length>0,r.hasXaxisGroups&&(r.groups=n.xaxis.group.groups),e.forEach((function(E,z){E.name!==void 0?r.seriesNames.push(E.name):r.seriesNames.push("series-"+parseInt(z+1,10))})),this.coreUtils.setSeriesYAxisMappings();var h=[],f=oo(new Set(n.series.map((function(E){return E.group}))));n.series.forEach((function(E,z){var D=f.indexOf(E.group);h[D]||(h[D]=[]),h[D].push(r.seriesNames[z])})),r.seriesGroups=h;for(var y=function(){for(var E=0;E<s.length;E++)if(typeof s[E]=="string"){if(!o.isValidDate(s[E]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(o.parseDate(s[E]))}else t.twoDSeriesX.push(s[E])},x=0;x<e.length;x++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],e[x].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(n.chart.type!=="rangeBar"&&n.chart.type!=="rangeArea"&&e[x].type!=="rangeBar"&&e[x].type!=="rangeArea"||(r.isRangeData=!0,this.handleRangeData(e,x)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,x):this.isFormatXY()&&this.handleFormatXY(e,x),n.chart.type!=="candlestick"&&e[x].type!=="candlestick"&&n.chart.type!=="boxPlot"&&e[x].type!=="boxPlot"||this.handleCandleStickBoxData(e,x),r.series.push(this.twoDSeries),r.labels.push(this.twoDSeriesX),r.seriesX.push(this.twoDSeriesX),r.seriesGoals=this.seriesGoals,x!==this.activeSeriesIndex||this.fallbackToCategory||(r.isXNumeric=!0);else{n.xaxis.type==="datetime"?(r.isXNumeric=!0,y(),r.seriesX.push(this.twoDSeriesX)):n.xaxis.type==="numeric"&&(r.isXNumeric=!0,s.length>0&&(this.twoDSeriesX=s,r.seriesX.push(this.twoDSeriesX))),r.labels.push(this.twoDSeriesX);var S=e[x].data.map((function(E){return At.parseNumber(E)}));r.series.push(S)}r.seriesZ.push(this.threeDSeries),e[x].color!==void 0?r.seriesColors.push(e[x].color):r.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,i=this.w.config,n=Array.isArray(e)&&e.every((function(y){return typeof y=="number"}))&&i.labels.length>0,r=Array.isArray(e)&&e.some((function(y){return y&&hl(y)==="object"&&y.data||y&&hl(y)==="object"&&y.parsing}));if(n&&r&&console.warn("ApexCharts: Both old format (numeric series + labels) and new format (series objects with data/parsing) detected. Using old format for backward compatibility."),n){t.series=e.slice(),t.seriesNames=i.labels.slice();for(var o=0;o<t.series.length;o++)t.seriesNames[o]===void 0&&t.seriesNames.push("series-"+(o+1));return this.w}if(Array.isArray(e)&&e.every((function(y){return typeof y=="number"}))){t.series=e.slice(),t.seriesNames=[];for(var s=0;s<t.series.length;s++)t.seriesNames.push(i.labels[s]||"series-".concat(s+1));return this.w}var h=this.extractPieDataFromSeries(e);t.series=h.values,t.seriesNames=h.labels,i.chart.type==="radialBar"&&(t.series=t.series.map((function(y){var x=At.parseNumber(y);return x>100&&console.warn("ApexCharts: RadialBar value ".concat(x," > 100, consider using percentage values (0-100)")),x})));for(var f=0;f<t.series.length;f++)t.seriesNames[f]===void 0&&t.seriesNames.push("series-"+(f+1));return this.w}},{key:"resetParsingFlags",value:function(){var e=this.w;e.globals.dataWasParsed=!1,e.globals.originalSeries=null,e.config.series&&e.config.series.forEach((function(t){t.__apexParsed&&delete t.__apexParsed}))}},{key:"extractPieDataFromSeries",value:function(e){var t=[],i=[];if(!Array.isArray(e))return console.warn("ApexCharts: Expected array for series data"),{values:[],labels:[]};if(e.length===0)return console.warn("ApexCharts: Empty series array"),{values:[],labels:[]};var n=e[0];return hl(n)==="object"&&n!==null&&n.data?(this.extractPieDataFromSeriesObjects(e,t,i),{values:t,labels:i}):(console.warn("ApexCharts: Unsupported series format for pie/donut/radialBar. Expected series objects with data property."),{values:[],labels:[]})}},{key:"extractPieDataFromSeriesObjects",value:function(e,t,i){e.forEach((function(n,r){n.data&&Array.isArray(n.data)?n.data.forEach((function(o){hl(o)==="object"&&o!==null?o.x!==void 0&&o.y!==void 0?(i.push(String(o.x)),t.push(At.parseNumber(o.y))):console.warn("ApexCharts: Invalid data point format for pie chart. Expected {x, y} format:",o):console.warn("ApexCharts: Expected object data point, got:",hl(o))})):console.warn("ApexCharts: Series ".concat(r," has no valid data array"))}))}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,i=this.w.globals;t.xaxis.categories.length>0?i.labels=t.xaxis.categories:t.labels.length>0?i.labels=t.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map((function(n){n.forEach((function(r){i.labels.indexOf(r.x)<0&&r.x&&i.labels.push(r.x)}))})),i.labels=Array.from(new Set(i.labels.map(JSON.stringify)),JSON.parse)),t.xaxis.convertedCatToNumeric&&(new cy(t).convertCatToNumericXaxis(t,this.ctx,i.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,i=this.w.config,n=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var r=i.series.map((function(x,S){return x.data.filter((function(E,z,D){return D.findIndex((function(F){return F.x===E.x}))===z}))})),o=r.reduce((function(x,S,E,z){return z[x].length>S.length?x:E}),0),s=0;s<r[o].length;s++)n.push(s+1);else for(var h=0;h<t.series[t.maxValsInArrayIndex].length;h++)n.push(h+1);t.seriesX=[];for(var f=0;f<e.length;f++)t.seriesX.push(n);this.w.globals.isBarHorizontal||(t.isXNumeric=!0)}if(n.length===0){n=t.axisCharts?[]:t.series.map((function(x,S){return S+1}));for(var y=0;y<e.length;y++)t.seriesX.push(n)}t.labels=n,i.xaxis.convertedCatToNumeric&&(t.categoryLabels=n.map((function(x){return i.xaxis.labels.formatter(x)}))),t.noLabelsProvided=!0}},{key:"parseRawDataIfNeeded",value:function(e){var t=this,i=this.w.config,n=this.w.globals,r=i.parsing;if(n.dataWasParsed||!r&&!e.some((function(s){return s.parsing})))return e;var o=e.map((function(s,h){var f,y,x;if(!s.data||!Array.isArray(s.data)||s.data.length===0)return s;var S={x:((f=s.parsing)===null||f===void 0?void 0:f.x)||r?.x,y:((y=s.parsing)===null||y===void 0?void 0:y.y)||r?.y,z:((x=s.parsing)===null||x===void 0?void 0:x.z)||r?.z};if(!S.x&&!S.y)return s;var E=s.data[0];if(hl(E)==="object"&&E!==null&&(E.hasOwnProperty("x")||E.hasOwnProperty("y"))||Array.isArray(E))return s;if(!S.x||!S.y||Array.isArray(S.y)&&S.y.length===0)return console.warn("ApexCharts: Series ".concat(h," has parsing config but missing x or y field specification")),s;var z=s.data.map((function(D,F){if(hl(D)!=="object"||D===null)return console.warn("ApexCharts: Series ".concat(h,", data point ").concat(F," is not an object, skipping parsing")),D;var U,G=t.getNestedValue(D,S.x),Z=void 0;if(Array.isArray(S.y)){var ee=S.y.map((function(J){return t.getNestedValue(D,J)}));U=t.w.config.chart.type==="bubble"&&ee.length===2?ee[0]:ee}else U=t.getNestedValue(D,S.y);S.z&&(Z=t.getNestedValue(D,S.z)),G===void 0&&console.warn("ApexCharts: Series ".concat(h,", data point ").concat(F," missing field '").concat(S.x,"'")),U===void 0&&console.warn("ApexCharts: Series ".concat(h,", data point ").concat(F," missing field '").concat(S.y,"'"));var ie={x:G,y:U};if(t.w.config.chart.type==="bubble"&&Array.isArray(S.y)&&S.y.length===2){var le=t.getNestedValue(D,S.y[1]);le!==void 0&&(ie.z=le)}return Z!==void 0&&(ie.z=Z),ie}));return Ui(Ui({},s),{},{data:z,__apexParsed:!0})}));return n.dataWasParsed=!0,n.originalSeries||(n.originalSeries=At.clone(e)),o}},{key:"getNestedValue",value:function(e,t){if(e&&hl(e)==="object"&&t){if(t.indexOf(".")===-1)return e[t];for(var i=t.split("."),n=e,r=0;r<i.length;r++){if(n==null||hl(n)!=="object")return;n=n[i[r]]}return n}}},{key:"parseData",value:function(e){var t=this.w,i=t.config,n=t.globals;if(e=this.parseRawDataIfNeeded(e),i.series=e,n.initialSeries=At.clone(e),this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),n.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),i.chart.stacked){var r=new zc(this.ctx);n.series=r.setNullSeriesToZeroValues(n.series)}this.coreUtils.getSeriesTotals(),n.axisCharts&&(n.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),n.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),n.dataFormatXNumeric||n.isXNumeric&&(i.xaxis.type!=="numeric"||i.labels.length!==0||i.xaxis.categories.length!==0)||this.handleExternalLabelsData(e);for(var o=this.coreUtils.getCategoryLabels(n.labels),s=0;s<o.length;s++)if(Array.isArray(o[s])){n.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this.w,t=[];e.globals.seriesYAxisMap.forEach((function(i,n){var r=0;i.forEach((function(o){e.globals.collapsedSeriesIndices.indexOf(o)!==-1&&r++})),r>0&&r==i.length&&t.push(n)})),e.globals.ignoreYAxisIndexes=t.map((function(i){return i}))}}]),a})(),Hm=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"svgStringToNode",value:function(e){return new DOMParser().parseFromString(e,"image/svg+xml").documentElement}},{key:"scaleSvgNode",value:function(e,t){var i=parseFloat(e.getAttributeNS(null,"width")),n=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",i*t),e.setAttributeNS(null,"height",n*t),e.setAttributeNS(null,"viewBox","0 0 "+i+" "+n)}},{key:"getSvgString",value:function(e){var t=this;return new Promise((function(i){var n=t.w,r=e||n.config.chart.toolbar.export.scale||n.config.chart.toolbar.export.width/n.globals.svgWidth;r||(r=1);var o=n.globals.svgWidth*r,s=n.globals.svgHeight*r,h=n.globals.dom.elWrap.cloneNode(!0);h.style.width=o+"px",h.style.height=s+"px";var f=new XMLSerializer().serializeToString(h),y=`
        .apexcharts-tooltip, .apexcharts-toolbar, .apexcharts-xaxistooltip, .apexcharts-yaxistooltip, .apexcharts-xcrosshairs, .apexcharts-ycrosshairs, .apexcharts-zoom-rect, .apexcharts-selection-rect {
          display: none;
        }
      `;n.config.legend.show&&n.globals.dom.elLegendWrap&&n.globals.dom.elLegendWrap.children.length>0&&(y+=oP);var x=`
        <svg xmlns="http://www.w3.org/2000/svg"
          version="1.1"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          class="apexcharts-svg"
          xmlns:data="ApexChartsNS"
          transform="translate(0, 0)"
          width="`.concat(n.globals.svgWidth,'px" height="').concat(n.globals.svgHeight,`px">
          <foreignObject width="100%" height="100%">
            <div xmlns="http://www.w3.org/1999/xhtml" style="width:`).concat(o,"px; height:").concat(s,`px;">
            <style type="text/css">
              `).concat(y,`
            </style>
              `).concat(f,`
            </div>
          </foreignObject>
        </svg>
      `),S=t.svgStringToNode(x);r!==1&&t.scaleSvgNode(S,r),t.convertImagesToBase64(S).then((function(){x=new XMLSerializer().serializeToString(S),i(x.replace(/&nbsp;/g,"&#160;"))}))}))}},{key:"convertImagesToBase64",value:function(e){var t=this,i=e.getElementsByTagName("image"),n=Array.from(i).map((function(r){var o=r.getAttributeNS("http://www.w3.org/1999/xlink","href");return o&&!o.startsWith("data:")?t.getBase64FromUrl(o).then((function(s){r.setAttributeNS("http://www.w3.org/1999/xlink","href",s)})).catch((function(s){console.error("Error converting image to base64:",s)})):Promise.resolve()}));return Promise.all(n)}},{key:"getBase64FromUrl",value:function(e){return new Promise((function(t,i){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var r=document.createElement("canvas");r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0),t(r.toDataURL())},n.onerror=i,n.src=e}))}},{key:"svgUrl",value:function(){var e=this;return new Promise((function(t){e.getSvgString().then((function(i){var n=new Blob([i],{type:"image/svg+xml;charset=utf-8"});t(URL.createObjectURL(n))}))}))}},{key:"dataURI",value:function(e){var t=this;return new Promise((function(i){var n=t.w,r=e?e.scale||e.width/n.globals.svgWidth:1,o=document.createElement("canvas");o.width=n.globals.svgWidth*r,o.height=parseInt(n.globals.dom.elWrap.style.height,10)*r;var s=n.config.chart.background!=="transparent"&&n.config.chart.background?n.config.chart.background:"#fff",h=o.getContext("2d");h.fillStyle=s,h.fillRect(0,0,o.width*r,o.height*r),t.getSvgString(r).then((function(f){var y="data:image/svg+xml,"+encodeURIComponent(f),x=new Image;x.crossOrigin="anonymous",x.onload=function(){if(h.drawImage(x,0,0),o.msToBlob){var S=o.msToBlob();i({blob:S})}else{var E=o.toDataURL("image/png");i({imgURI:E})}},x.src=y}))}))}},{key:"exportToSVG",value:function(){var e=this;this.svgUrl().then((function(t){e.triggerDownload(t,e.w.config.chart.toolbar.export.svg.filename,".svg")}))}},{key:"exportToPng",value:function(){var e=this,t=this.w.config.chart.toolbar.export.scale,i=this.w.config.chart.toolbar.export.width,n=t?{scale:t}:i?{width:i}:void 0;this.dataURI(n).then((function(r){var o=r.imgURI,s=r.blob;s?navigator.msSaveOrOpenBlob(s,e.w.globals.chartID+".png"):e.triggerDownload(o,e.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(e){var t=this,i=e.series,n=e.fileName,r=e.columnDelimiter,o=r===void 0?",":r,s=e.lineDelimiter,h=s===void 0?`
`:s,f=this.w;i||(i=f.config.series);var y=[],x=[],S="",E=f.globals.series.map((function(ie,le){return f.globals.collapsedSeriesIndices.indexOf(le)===-1?ie:[]})),z=function(ie){return typeof f.config.chart.toolbar.export.csv.categoryFormatter=="function"?f.config.chart.toolbar.export.csv.categoryFormatter(ie):f.config.xaxis.type==="datetime"&&String(ie).length>=10?new Date(ie).toDateString():At.isNumber(ie)?ie:ie.split(o).join("")},D=function(ie){return typeof f.config.chart.toolbar.export.csv.valueFormatter=="function"?f.config.chart.toolbar.export.csv.valueFormatter(ie):ie},F=Math.max.apply(Math,oo(i.map((function(ie){return ie.data?ie.data.length:0})))),U=new Hw(this.ctx),G=new wd(this.ctx),Z=function(ie){var le="";if(f.globals.axisCharts){if(f.config.xaxis.type==="category"||f.config.xaxis.convertedCatToNumeric)if(f.globals.isBarHorizontal){var J=f.globals.yLabelFormatters[0],re=new zc(t.ctx).getActiveConfigSeriesIndex();le=J(f.globals.labels[ie],{seriesIndex:re,dataPointIndex:ie,w:f})}else le=G.getLabel(f.globals.labels,f.globals.timescaleLabels,0,ie).text;f.config.xaxis.type==="datetime"&&(f.config.xaxis.categories.length?le=f.config.xaxis.categories[ie]:f.config.labels.length&&(le=f.config.labels[ie]))}else le=f.config.labels[ie];return le===null?"nullvalue":(Array.isArray(le)&&(le=le.join(" ")),At.isNumber(le)?le:le.split(o).join(""))},ee=function(ie,le){if(y.length&&le===0&&x.push(y.join(o)),ie.data){ie.data=ie.data.length&&ie.data||oo(Array(F)).map((function(){return""}));for(var J=0;J<ie.data.length;J++){y=[];var re=Z(J);if(re!=="nullvalue"){if(re||(U.isFormatXY()?re=i[le].data[J].x:U.isFormat2DArray()&&(re=i[le].data[J]?i[le].data[J][0]:"")),le===0){y.push(z(re));for(var ae=0;ae<f.globals.series.length;ae++){var me,Te=U.isFormatXY()?(me=i[ae].data[J])===null||me===void 0?void 0:me.y:E[ae][J];y.push(D(Te))}}(f.config.chart.type==="candlestick"||ie.type&&ie.type==="candlestick")&&(y.pop(),y.push(f.globals.seriesCandleO[le][J]),y.push(f.globals.seriesCandleH[le][J]),y.push(f.globals.seriesCandleL[le][J]),y.push(f.globals.seriesCandleC[le][J])),(f.config.chart.type==="boxPlot"||ie.type&&ie.type==="boxPlot")&&(y.pop(),y.push(f.globals.seriesCandleO[le][J]),y.push(f.globals.seriesCandleH[le][J]),y.push(f.globals.seriesCandleM[le][J]),y.push(f.globals.seriesCandleL[le][J]),y.push(f.globals.seriesCandleC[le][J])),f.config.chart.type==="rangeBar"&&(y.pop(),y.push(f.globals.seriesRangeStart[le][J]),y.push(f.globals.seriesRangeEnd[le][J])),y.length&&x.push(y.join(o))}}}};y.push(f.config.chart.toolbar.export.csv.headerCategory),f.config.chart.type==="boxPlot"?(y.push("minimum"),y.push("q1"),y.push("median"),y.push("q3"),y.push("maximum")):f.config.chart.type==="candlestick"?(y.push("open"),y.push("high"),y.push("low"),y.push("close")):f.config.chart.type==="rangeBar"?(y.push("minimum"),y.push("maximum")):i.map((function(ie,le){var J=(ie.name?ie.name:"series-".concat(le))+"";f.globals.axisCharts&&y.push(J.split(o).join("")?J.split(o).join(""):"series-".concat(le))})),f.globals.axisCharts||(y.push(f.config.chart.toolbar.export.csv.headerValue),x.push(y.join(o))),f.globals.allSeriesHasEqualX||!f.globals.axisCharts||f.config.xaxis.categories.length||f.config.labels.length?i.map((function(ie,le){f.globals.axisCharts?ee(ie,le):((y=[]).push(z(f.globals.labels[le])),y.push(D(E[le])),x.push(y.join(o)))})):(function(){var ie=new Set,le={};i.forEach((function(J,re){J?.data.forEach((function(ae){var me,Te;if(U.isFormatXY())me=ae.x,Te=ae.y;else{if(!U.isFormat2DArray())return;me=ae[0],Te=ae[1]}le[me]||(le[me]=Array(i.length).fill("")),le[me][re]=D(Te),ie.add(me)}))})),y.length&&x.push(y.join(o)),Array.from(ie).sort().forEach((function(J){x.push([z(J),le[J].join(o)])}))})(),S+=x.join(h),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+S),n||f.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,i){var n=document.createElement("a");n.href=e,n.download=(t||this.w.globals.chartID)+i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}]),a})(),hy=(function(){function a(e,t){wn(this,a),this.ctx=e,this.elgrid=t,this.w=e.w;var i=this.w;this.axesUtils=new wd(e),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],i.config.xaxis.position==="top"?this.offY=0:this.offY=i.globals.gridHeight,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),String(this.xaxisBorderWidth).indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return Sn(a,[{key:"drawXaxis",value:function(){var e=this.w,t=new vi(this.ctx),i=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),n=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});i.add(n);for(var r=[],o=0;o<this.xaxisLabels.length;o++)r.push(this.xaxisLabels[o]);if(this.drawXAxisLabelAndGroup(!0,t,n,r,e.globals.isXNumeric,(function(z,D){return D})),e.globals.hasXaxisGroups){var s=e.globals.groups;r=[];for(var h=0;h<s.length;h++)r.push(s[h].title);var f={};e.config.xaxis.group.style&&(f.xaxisFontSize=e.config.xaxis.group.style.fontSize,f.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,f.xaxisForeColors=e.config.xaxis.group.style.colors,f.fontWeight=e.config.xaxis.group.style.fontWeight,f.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,n,r,!1,(function(z,D){return s[z].cols*D}),f)}if(e.config.xaxis.title.text!==void 0){var y=t.group({class:"apexcharts-xaxis-title"}),x=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});y.add(x),i.add(y)}if(e.config.xaxis.axisBorder.show){var S=e.globals.barPadForNumericAxis,E=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-S,this.offY,this.xaxisBorderWidth+S,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(E):i.add(E)}return i}},{key:"drawXAxisLabelAndGroup",value:function(e,t,i,n,r,o){var s,h=this,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},y=[],x=[],S=this.w,E=f.xaxisFontSize||this.xaxisFontSize,z=f.xaxisFontFamily||this.xaxisFontFamily,D=f.xaxisForeColors||this.xaxisForeColors,F=f.fontWeight||S.config.xaxis.labels.style.fontWeight,U=f.cssClass||S.config.xaxis.labels.style.cssClass,G=S.globals.padHorizontal,Z=n.length,ee=S.config.xaxis.type==="category"?S.globals.dataPoints:Z;if(ee===0&&Z>ee&&(ee=Z),r){var ie=Math.max(Number(S.config.xaxis.tickAmount)||1,ee>1?ee-1:ee);s=S.globals.gridWidth/Math.min(ie,Z-1),G=G+o(0,s)/2+S.config.xaxis.labels.offsetX}else s=S.globals.gridWidth/ee,G=G+o(0,s)+S.config.xaxis.labels.offsetX;for(var le=function(re){var ae=G-o(re,s)/2+S.config.xaxis.labels.offsetX;re===0&&Z===1&&s/2===G&&ee===1&&(ae=S.globals.gridWidth/2);var me=h.axesUtils.getLabel(n,S.globals.timescaleLabels,ae,re,y,E,e),Te=28;if(S.globals.rotateXLabels&&e&&(Te=22),S.config.xaxis.title.text&&S.config.xaxis.position==="top"&&(Te+=parseFloat(S.config.xaxis.title.style.fontSize)+2),e||(Te=Te+parseFloat(E)+(S.globals.xAxisLabelsHeight-S.globals.xAxisGroupLabelsHeight)+(S.globals.rotateXLabels?10:0)),me=S.config.xaxis.tickAmount!==void 0&&S.config.xaxis.tickAmount!=="dataPoints"&&S.config.xaxis.type!=="datetime"?h.axesUtils.checkLabelBasedOnTickamount(re,me,Z):h.axesUtils.checkForOverflowingLabels(re,me,Z,y,x),S.config.xaxis.labels.show){var ye=t.drawText({x:me.x,y:h.offY+S.config.xaxis.labels.offsetY+Te-(S.config.xaxis.position==="top"?S.globals.xAxisHeight+S.config.xaxis.axisTicks.height-2:0),text:me.text,textAnchor:"middle",fontWeight:me.isBold?600:F,fontSize:E,fontFamily:z,foreColor:Array.isArray(D)?e&&S.config.xaxis.convertedCatToNumeric?D[S.globals.minX+re-1]:D[re]:D,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+U});if(i.add(ye),ye.on("click",(function(We){if(typeof S.config.chart.events.xAxisLabelClick=="function"){var Le=Object.assign({},S,{labelIndex:re});S.config.chart.events.xAxisLabelClick(We,h.ctx,Le)}})),e){var Re=document.createElementNS(S.globals.SVGNS,"title");Re.textContent=Array.isArray(me.text)?me.text.join(" "):me.text,ye.node.appendChild(Re),me.text!==""&&(y.push(me.text),x.push(me))}}re<Z-1&&(G+=o(re+1,s))},J=0;J<=Z-1;J++)le(J)}},{key:"drawXaxisInversed",value:function(e){var t,i,n=this,r=this.w,o=new vi(this.ctx),s=r.config.yaxis[0].opposite?r.globals.translateYAxisX[e]:0,h=o.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),f=o.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+s+", 0)"});h.add(f);var y=[];if(r.config.yaxis[e].show)for(var x=0;x<this.xaxisLabels.length;x++)y.push(this.xaxisLabels[x]);t=r.globals.gridHeight/y.length,i=-t/2.2;var S=r.globals.yLabelFormatters[0],E=r.config.yaxis[0].labels;if(E.show)for(var z=function(ie){var le=y[ie]===void 0?"":y[ie];le=S(le,{seriesIndex:e,dataPointIndex:ie,w:r});var J=n.axesUtils.getYAxisForeColor(E.style.colors,e),re=0;Array.isArray(le)&&(re=le.length/2*parseInt(E.style.fontSize,10));var ae=E.offsetX-15,me="end";n.yaxis.opposite&&(me="start"),r.config.yaxis[0].labels.align==="left"?(ae=E.offsetX,me="start"):r.config.yaxis[0].labels.align==="center"?(ae=E.offsetX,me="middle"):r.config.yaxis[0].labels.align==="right"&&(me="end");var Te=o.drawText({x:ae,y:i+t+E.offsetY-re,text:le,textAnchor:me,foreColor:Array.isArray(J)?J[ie]:J,fontSize:E.style.fontSize,fontFamily:E.style.fontFamily,fontWeight:E.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+E.style.cssClass,maxWidth:E.maxWidth});f.add(Te),Te.on("click",(function(We){if(typeof r.config.chart.events.xAxisLabelClick=="function"){var Le=Object.assign({},r,{labelIndex:ie});r.config.chart.events.xAxisLabelClick(We,n.ctx,Le)}}));var ye=document.createElementNS(r.globals.SVGNS,"title");if(ye.textContent=Array.isArray(le)?le.join(" "):le,Te.node.appendChild(ye),r.config.yaxis[e].labels.rotate!==0){var Re=o.rotateAroundCenter(Te.node);Te.node.setAttribute("transform","rotate(".concat(r.config.yaxis[e].labels.rotate," 0 ").concat(Re.y,")"))}i+=t},D=0;D<=y.length-1;D++)z(D);if(r.config.yaxis[0].title.text!==void 0){var F=o.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+s+", 0)"}),U=o.drawText({x:r.config.yaxis[0].title.offsetX,y:r.globals.gridHeight/2+r.config.yaxis[0].title.offsetY,text:r.config.yaxis[0].title.text,textAnchor:"middle",foreColor:r.config.yaxis[0].title.style.color,fontSize:r.config.yaxis[0].title.style.fontSize,fontWeight:r.config.yaxis[0].title.style.fontWeight,fontFamily:r.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+r.config.yaxis[0].title.style.cssClass});F.add(U),h.add(F)}var G=0;this.isCategoryBarHorizontal&&r.config.yaxis[0].opposite&&(G=r.globals.gridWidth);var Z=r.config.xaxis.axisBorder;if(Z.show){var ee=o.drawLine(r.globals.padHorizontal+Z.offsetX+G,1+Z.offsetY,r.globals.padHorizontal+Z.offsetX+G,r.globals.gridHeight+Z.offsetY,Z.color,0);this.elgrid&&this.elgrid.elGridBorders&&r.config.grid.show?this.elgrid.elGridBorders.add(ee):h.add(ee)}return r.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(G,y.length,r.config.yaxis[0].axisBorder,r.config.yaxis[0].axisTicks,0,t,h),h}},{key:"drawXaxisTicks",value:function(e,t,i){var n=this.w,r=e;if(!(e<0||e-2>n.globals.gridWidth)){var o=this.offY+n.config.xaxis.axisTicks.offsetY;if(t=t+o+n.config.xaxis.axisTicks.height,n.config.xaxis.position==="top"&&(t=o-n.config.xaxis.axisTicks.height),n.config.xaxis.axisTicks.show){var s=new vi(this.ctx).drawLine(e+n.config.xaxis.axisTicks.offsetX,o+n.config.xaxis.offsetY,r+n.config.xaxis.axisTicks.offsetX,t+n.config.xaxis.offsetY,n.config.xaxis.axisTicks.color);i.add(s),s.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],i=this.xaxisLabels.length,n=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var r=0;r<i;r++)n=this.xaxisLabels[r].position,t.push(n);else for(var o=i,s=0;s<o;s++){var h=o;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(h-=1),n+=e.globals.gridWidth/h,t.push(n)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new vi(this.ctx),i=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var s=0;s<n.length;s++){var h=t.rotateAroundCenter(n[s]);h.y=h.y-1,h.x=h.x+1,n[s].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(h.x," ").concat(h.y,")")),n[s].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var f=n[s].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(f,(function(E){t.placeTextWithEllipsis(E,E.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))}))}else(function(){for(var E=e.globals.gridWidth/(e.globals.labels.length+1),z=0;z<n.length;z++){var D=n[z].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(D,(function(F){t.placeTextWithEllipsis(F,F.textContent,E)}))}})();if(r.length>0){var y=r[r.length-1].getBBox(),x=r[0].getBBox();y.x<-20&&r[r.length-1].parentNode.removeChild(r[r.length-1]),x.x+x.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&r[0].parentNode.removeChild(r[0]);for(var S=0;S<o.length;S++)t.placeTextWithEllipsis(o[S],o[S].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),a})(),lP=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w;var t=this.w;this.xaxisLabels=t.globals.labels.slice(),this.axesUtils=new wd(e),this.isRangeBar=t.globals.seriesRange.length&&t.globals.isBarHorizontal,t.globals.timescaleLabels.length>0&&(this.xaxisLabels=t.globals.timescaleLabels.slice())}return Sn(a,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this.w,i=new vi(this.ctx);e||(e=i.group({class:"apexcharts-grid"}));var n=i.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),r=i.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(r),e.add(n),e}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var e=this.renderGrid();return this.drawGridArea(e.el),e}return null}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,i=new vi(this.ctx),n=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,oo(e.config.stroke.width)):e.config.stroke.width,r=function(y){var x=document.createElementNS(t.SVGNS,"clipPath");return x.setAttribute("id",y),x};t.dom.elGridRectMask=r("gridRectMask".concat(t.cuid)),t.dom.elGridRectBarMask=r("gridRectBarMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=r("gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=r("forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=r("nonForecastMask".concat(t.cuid));var o=0,s=0;(["bar","rangeBar","candlestick","boxPlot"].includes(e.config.chart.type)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=Math.max(e.config.grid.padding.left,t.barPadForNumericAxis),s=Math.max(e.config.grid.padding.right,t.barPadForNumericAxis)),t.dom.elGridRect=i.drawRect(-n/2-2,-n/2-2,t.gridWidth+n+4,t.gridHeight+n+4,0,"#fff"),t.dom.elGridRectBar=i.drawRect(-n/2-o-2,-n/2-2,t.gridWidth+n+s+o+4,t.gridHeight+n+4,0,"#fff");var h=e.globals.markers.largestSize;t.dom.elGridRectMarker=i.drawRect(Math.min(-n/2-o-2,-h),-h,t.gridWidth+Math.max(n+s+o+4,2*h),t.gridHeight+2*h,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectBarMask.appendChild(t.dom.elGridRectBar.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var f=t.dom.baseEl.querySelector("defs");f.appendChild(t.dom.elGridRectMask),f.appendChild(t.dom.elGridRectBarMask),f.appendChild(t.dom.elGridRectMarkerMask),f.appendChild(t.dom.elForecastMask),f.appendChild(t.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.xCount,h=e.parent,f=this.w;if(!(t===0&&f.globals.skipFirstTimelinelabel||t===s-1&&f.globals.skipLastTimelinelabel&&!f.config.xaxis.labels.formatter||f.config.chart.type==="radar")){f.config.grid.xaxis.lines.show&&this._drawGridLine({i:t,x1:i,y1:n,x2:r,y2:o,xCount:s,parent:h});var y=0;if(f.globals.hasXaxisGroups&&f.config.xaxis.tickPlacement==="between"){var x=f.globals.groups;if(x){for(var S=0,E=0;S<t&&E<x.length;E++)S+=x[E].cols;S===t&&(y=.6*f.globals.xAxisLabelsHeight)}}new hy(this.ctx).drawXaxisTicks(i,y,f.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var t=e.i,i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.xCount,h=e.parent,f=this.w,y=h.node.classList.contains("apexcharts-gridlines-horizontal"),x=f.globals.barPadForNumericAxis,S=n===0&&o===0||i===0&&r===0||n===f.globals.gridHeight&&o===f.globals.gridHeight||f.globals.isBarHorizontal&&(t===0||t===s-1),E=new vi(this).drawLine(i-(y?x:0),n,r+(y?x:0),o,f.config.grid.borderColor,f.config.grid.strokeDashArray);E.node.classList.add("apexcharts-gridline"),S&&f.config.grid.show?this.elGridBorders.add(E):h.add(E)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.type,h=this.w,f=new vi(this.ctx),y=h.globals.barPadForNumericAxis,x=h.config.grid[s].colors[t],S=f.drawRect(i-(s==="row"?y:0),n,r+(s==="row"?2*y:0),o,0,x,h.config.grid[s].opacity);this.elg.add(S),S.attr("clip-path","url(#gridRectMask".concat(h.globals.cuid,")")),S.node.classList.add("apexcharts-grid-".concat(s))}},{key:"_drawXYLines",value:function(e){var t=this,i=e.xCount,n=e.tickAmount,r=this.w;if(r.config.grid.xaxis.lines.show||r.config.xaxis.axisTicks.show){var o,s=r.globals.padHorizontal,h=r.globals.gridHeight;r.globals.timescaleLabels.length?(function(z){for(var D=z.xC,F=z.x1,U=z.y1,G=z.x2,Z=z.y2,ee=0;ee<D;ee++)F=t.xaxisLabels[ee].position,G=t.xaxisLabels[ee].position,t._drawGridLines({i:ee,x1:F,y1:U,x2:G,y2:Z,xCount:i,parent:t.elgridLinesV})})({xC:i,x1:s,y1:0,x2:o,y2:h}):(r.globals.isXNumeric&&(i=r.globals.xAxisScale.result.length),(function(z){for(var D=z.xC,F=z.x1,U=z.y1,G=z.x2,Z=z.y2,ee=0;ee<D+(r.globals.isXNumeric?0:1);ee++)ee===0&&D===1&&r.globals.dataPoints===1&&(G=F=r.globals.gridWidth/2),t._drawGridLines({i:ee,x1:F,y1:U,x2:G,y2:Z,xCount:i,parent:t.elgridLinesV}),G=F+=r.globals.gridWidth/(r.globals.isXNumeric?D-1:D)})({xC:i,x1:s,y1:0,x2:o,y2:h}))}if(r.config.grid.yaxis.lines.show){var f=0,y=0,x=r.globals.gridWidth,S=n+1;this.isRangeBar&&(S=r.globals.labels.length);for(var E=0;E<S+(this.isRangeBar?1:0);E++)this._drawGridLine({i:E,xCount:S+(this.isRangeBar?1:0),x1:0,y1:f,x2:x,y2:y,parent:this.elgridLinesH}),y=f+=r.globals.gridHeight/(this.isRangeBar?S:n)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var n,r=i.globals.padHorizontal,o=i.globals.gridHeight,s=0;s<t+1;s++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:s,xCount:t+1,x1:r,y1:0,x2:n,y2:o,parent:this.elgridLinesV}),new hy(this.ctx).drawXaxisTicks(r,0,i.globals.dom.elGraphical),n=r+=i.globals.gridWidth/t;if(i.config.grid.yaxis.lines.show)for(var h=0,f=0,y=i.globals.gridWidth,x=0;x<i.globals.dataPoints+1;x++)this._drawGridLine({i:x,xCount:i.globals.dataPoints+1,x1:0,y1:h,x2:y,y2:f,parent:this.elgridLinesH}),f=h+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=e.globals,i=new vi(this.ctx);this.elg=i.group({class:"apexcharts-grid"}),this.elgridLinesH=i.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=i.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=i.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var n=0;n<t.seriesYAxisMap.length&&t.ignoreYAxisIndexes.includes(n);)n++;n===t.seriesYAxisMap.length&&(n=0);var r,o=t.yAxisScale[n].result.length-1;if(!t.isBarHorizontal||this.isRangeBar){var s,h,f;r=this.xaxisLabels.length,this.isRangeBar&&(o=t.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(r=e.config.xaxis.tickAmount),((s=t.yAxisScale)===null||s===void 0||(h=s[n])===null||h===void 0||(f=h.result)===null||f===void 0?void 0:f.length)>0&&e.config.xaxis.type!=="datetime"&&(r=t.yAxisScale[n].result.length-1)),this._drawXYLines({xCount:r,tickAmount:o})}else r=o,o=t.xTickAmount,this._drawInvertedXYLines({xCount:r,tickAmount:o});return this.drawGridBands(r,o),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.gridWidth/r}}},{key:"drawGridBands",value:function(e,t){var i,n,r=this,o=this.w;if(((i=o.config.grid.row.colors)===null||i===void 0?void 0:i.length)>0&&(function(z,D,F,U,G,Z){for(var ee=0,ie=0;ee<D;ee++,ie++)ie>=o.config.grid[z].colors.length&&(ie=0),r._drawGridBandRect({c:ie,x1:F,y1:U,x2:G,y2:Z,type:z}),U+=o.globals.gridHeight/t})("row",t,0,0,o.globals.gridWidth,o.globals.gridHeight/t),((n=o.config.grid.column.colors)===null||n===void 0?void 0:n.length)>0){var s=o.globals.isBarHorizontal||o.config.xaxis.tickPlacement!=="on"||o.config.xaxis.type!=="category"&&!o.config.xaxis.convertedCatToNumeric?e:e-1;o.globals.isXNumeric&&(s=o.globals.xAxisScale.result.length-1);for(var h=o.globals.padHorizontal,f=o.globals.padHorizontal+o.globals.gridWidth/s,y=o.globals.gridHeight,x=0,S=0;x<e;x++,S++){var E;S>=o.config.grid.column.colors.length&&(S=0),o.config.xaxis.type==="datetime"&&(h=this.xaxisLabels[x].position,f=(((E=this.xaxisLabels[x+1])===null||E===void 0?void 0:E.position)||o.globals.gridWidth)-this.xaxisLabels[x].position),this._drawGridBandRect({c:S,x1:h,y1:0,x2:f,y2:y,type:"column"}),h+=o.globals.gridWidth/s}}}}]),a})(),cP=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.coreUtils=new Rs(this.ctx)}return Sn(a,[{key:"niceScale",value:function(e,t){var i,n,r,o,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=1e-11,f=this.w,y=f.globals;y.isBarHorizontal?(i=f.config.xaxis,n=Math.max((y.svgWidth-100)/25,2)):(i=f.config.yaxis[s],n=Math.max((y.svgHeight-100)/15,2)),At.isNumber(n)||(n=10),r=i.min!==void 0&&i.min!==null,o=i.max!==void 0&&i.min!==null;var x=i.stepSize!==void 0&&i.stepSize!==null,S=i.tickAmount!==void 0&&i.tickAmount!==null,E=S?i.tickAmount:y.niceScaleDefaultTicks[Math.min(Math.round(n/2),y.niceScaleDefaultTicks.length-1)];if(y.isMultipleYAxis&&!S&&y.multiAxisTickAmount>0&&(E=y.multiAxisTickAmount,S=!0),E=E==="dataPoints"?y.dataPoints-1:Math.abs(Math.round(E)),(e===Number.MIN_VALUE&&t===0||!At.isNumber(e)&&!At.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)&&(e=At.isNumber(i.min)?i.min:0,t=At.isNumber(i.max)?i.max:e+E,y.allSeriesCollapsed=!1),e>t){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var z=t;t=e,e=z}else e===t&&(e=e===0?0:e-1,t=t===0?2:t+1);var D=[];E<1&&(E=1);var F=E,U=Math.abs(t-e);!r&&e>0&&e/U<.15&&(e=0,r=!0),!o&&t<0&&-t/U<.15&&(t=0,o=!0);var G=(U=Math.abs(t-e))/F,Z=G,ee=Math.floor(Math.log10(Z)),ie=Math.pow(10,ee),le=Math.ceil(Z/ie);if(G=Z=(le=y.niceScaleAllowedMagMsd[y.yValueDecimal===0?0:1][le])*ie,y.isBarHorizontal&&i.stepSize&&i.type!=="datetime"?(G=i.stepSize,x=!0):x&&(G=i.stepSize),x&&i.forceNiceScale){var J=Math.floor(Math.log10(G));G*=Math.pow(10,ee-J)}if(r&&o){var re=U/F;if(S)if(x)if(At.mod(U,G)!=0){var ae=At.getGCD(G,re);G=re/ae<10?ae:re}else At.mod(G,re)==0?G=re:(re=G,S=!1);else G=re;else if(x)At.mod(U,G)==0?re=G:G=re;else if(At.mod(U,G)==0)re=G;else{re=U/(F=Math.ceil(U/G));var me=At.getGCD(U,G);U/me<n&&(re=me),G=re}F=Math.round(U/G)}else{if(r||o){if(o)if(S)e=t-G*F;else{var Te=e;e=G*Math.floor(e/G),Math.abs(t-e)/At.getGCD(U,G)>n&&(e=t-G*E,e+=G*Math.floor((Te-e)/G))}else if(r)if(S)t=e+G*F;else{var ye=t;t=G*Math.ceil(t/G),Math.abs(t-e)/At.getGCD(U,G)>n&&(t=e+G*E,t+=G*Math.ceil((ye-t)/G))}}else if(y.isMultipleYAxis&&S){var Re=G*Math.floor(e/G),We=Re+G*F;We<t&&(G*=2),We=t,t=(e=Re)+G*F,U=Math.abs(t-e),e>0&&e<Math.abs(We-t)&&(e=0,t=G*F),t<0&&-t<Math.abs(Re-e)&&(t=0,e=-G*F)}else e=G*Math.floor(e/G),t=G*Math.ceil(t/G);U=Math.abs(t-e),G=At.getGCD(U,G),F=Math.round(U/G)}if(S||r||o||(F=Math.ceil((U-h)/(G+h)))>16&&At.getPrimeFactors(F).length<2&&F++,!S&&i.forceNiceScale&&y.yValueDecimal===0&&F>U&&(F=U,G=Math.round(U/F)),F>n&&(!S&&!x||i.forceNiceScale)){var Le=At.getPrimeFactors(F),ht=Le.length-1,$e=F;e:for(var pt=0;pt<ht;pt++)for(var Dt=0;Dt<=ht-pt;Dt++){for(var qe=Math.min(Dt+pt,ht),Nt=$e,ni=1,xi=Dt;xi<=qe;xi++)ni*=Le[xi];if((Nt/=ni)<n){$e=Nt;break e}}G=$e===F?U:U/$e,F=Math.round(U/G)}y.isMultipleYAxis&&y.multiAxisTickAmount==0&&y.ignoreYAxisIndexes.indexOf(s)<0&&(y.multiAxisTickAmount=F);var Lt=e-G,Tt=G*h;do Lt+=G,D.push(At.stripNumber(Lt,7));while(t-Lt>Tt);return{result:D,niceMin:D[0],niceMax:D[D.length-1]}}},{key:"linearScale",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,o=Math.abs(t-e),s=[];if(e===t)return{result:s=[e],niceMin:s[0],niceMax:s[s.length-1]};(i=this._adjustTicksForSmallRange(i,n,o))==="dataPoints"&&(i=this.w.globals.dataPoints-1),r||(r=o/i),r=Math.round(100*(r+Number.EPSILON))/100,i===Number.MAX_VALUE&&(i=5,r=1);for(var h=e;i>=0;)s.push(h),h=At.preciseAddition(h,r),i-=1;return{result:s,niceMin:s[0],niceMax:s[s.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var n=[],r=Math.ceil(Math.log(t)/Math.log(i)+1),o=Math.floor(Math.log(e)/Math.log(i));o<r;o++)n.push(Math.pow(i,o));return{result:n,niceMin:n[0],niceMax:n[n.length-1]}}},{key:"logarithmicScale",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var n=[],r=Math.log(t)/Math.log(i),o=Math.log(e)/Math.log(i),s=r-o,h=Math.round(s),f=s/h,y=0,x=o;y<h;y++,x+=f)n.push(Math.pow(i,x));return n.push(Math.pow(i,r)),{result:n,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,i){var n=e;if(t!==void 0&&this.w.config.yaxis[t].labels.formatter&&this.w.config.yaxis[t].tickAmount===void 0){var r=Number(this.w.config.yaxis[t].labels.formatter(1));At.isNumber(r)&&this.w.globals.yValueDecimal===0&&(n=Math.ceil(i))}return n<e?n:e}},{key:"setYScaleForIndex",value:function(e,t,i){var n=this.w.globals,r=this.w.config,o=n.isBarHorizontal?r.xaxis:r.yaxis[e];n.yAxisScale[e]===void 0&&(n.yAxisScale[e]=[]);var s=Math.abs(i-t);o.logarithmic&&s<=5&&(n.invalidLogScale=!0),o.logarithmic&&s>5?(n.allSeriesCollapsed=!1,n.yAxisScale[e]=o.forceNiceScale?this.logarithmicScaleNice(t,i,o.logBase):this.logarithmicScale(t,i,o.logBase)):i!==-Number.MAX_VALUE&&At.isNumber(i)&&t!==Number.MAX_VALUE&&At.isNumber(t)?(n.allSeriesCollapsed=!1,n.yAxisScale[e]=this.niceScale(t,i,e)):n.yAxisScale[e]=this.niceScale(Number.MIN_VALUE,0,e)}},{key:"setXScale",value:function(e,t){var i=this.w,n=i.globals;if(t!==-Number.MAX_VALUE&&At.isNumber(t)){var r=n.xTickAmount;n.xAxisScale=this.linearScale(e,t,r,0,i.config.xaxis.max===void 0?i.config.xaxis.stepSize:void 0)}else n.xAxisScale=this.linearScale(0,10,10);return n.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var e=this,t=this.w.config,i=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var n=i.seriesYAxisMap,r=i.minYArr,o=i.maxYArr;i.allSeriesCollapsed=!0,i.barGroups=[],n.forEach((function(s,h){var f=[];s.forEach((function(y){var x,S=(x=t.series[y])===null||x===void 0?void 0:x.group;f.indexOf(S)<0&&f.push(S)})),s.length>0?(function(){var y,x,S=Number.MAX_VALUE,E=-Number.MAX_VALUE,z=S,D=E;if(t.chart.stacked)(function(){var G=new Array(i.dataPoints).fill(0),Z=[],ee=[],ie=[];f.forEach((function(){Z.push(G.map((function(){return Number.MIN_VALUE}))),ee.push(G.map((function(){return Number.MIN_VALUE}))),ie.push(G.map((function(){return Number.MIN_VALUE})))}));for(var le=function(re){!y&&t.series[s[re]].type&&(y=t.series[s[re]].type);var ae=s[re];x=t.series[ae].group?t.series[ae].group:"axis-".concat(h),!(i.collapsedSeriesIndices.indexOf(ae)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(ae)<0)||(i.allSeriesCollapsed=!1,f.forEach((function(me,Te){if(t.series[ae].group===me)for(var ye=0;ye<i.series[ae].length;ye++){var Re=i.series[ae][ye];Re>=0?ee[Te][ye]+=Re:ie[Te][ye]+=Re,Z[Te][ye]+=Re,z=Math.min(z,Re),D=Math.max(D,Re)}}))),y!=="bar"&&y!=="column"||i.barGroups.push(x)},J=0;J<s.length;J++)le(J);y||(y=t.chart.type),y==="bar"||y==="column"?f.forEach((function(re,ae){S=Math.min(S,Math.min.apply(null,ie[ae])),E=Math.max(E,Math.max.apply(null,ee[ae]))})):(f.forEach((function(re,ae){z=Math.min(z,Math.min.apply(null,Z[ae])),D=Math.max(D,Math.max.apply(null,Z[ae]))})),S=z,E=D),S===Number.MIN_VALUE&&E===Number.MIN_VALUE&&(E=-Number.MAX_VALUE)})();else for(var F=0;F<s.length;F++){var U=s[F];S=Math.min(S,r[U]),E=Math.max(E,o[U]),!(i.collapsedSeriesIndices.indexOf(U)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(U)<0)||(i.allSeriesCollapsed=!1)}t.yaxis[h].min!==void 0&&(S=typeof t.yaxis[h].min=="function"?t.yaxis[h].min(S):t.yaxis[h].min),t.yaxis[h].max!==void 0&&(E=typeof t.yaxis[h].max=="function"?t.yaxis[h].max(E):t.yaxis[h].max),i.barGroups=i.barGroups.filter((function(G,Z,ee){return ee.indexOf(G)===Z})),e.setYScaleForIndex(h,S,E),s.forEach((function(G){r[G]=i.yAxisScale[h].niceMin,o[G]=i.yAxisScale[h].niceMax}))})():e.setYScaleForIndex(h,0,-Number.MAX_VALUE)}))}}]),a})(),h1=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.scales=new cP(e)}return Sn(a,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,r=this.w.config,o=this.w.globals,s=-Number.MAX_VALUE,h=Number.MIN_VALUE;n===null&&(n=e+1);var f=o.series,y=f,x=f;r.chart.type==="candlestick"?(y=o.seriesCandleL,x=o.seriesCandleH):r.chart.type==="boxPlot"?(y=o.seriesCandleO,x=o.seriesCandleC):o.isRangeData&&(y=o.seriesRangeStart,x=o.seriesRangeEnd);var S=!1;if(o.seriesX.length>=n){var E,z=(E=o.brushSource)===null||E===void 0?void 0:E.w.config.chart.brush;(r.chart.zoom.enabled&&r.chart.zoom.autoScaleYaxis||z!=null&&z.enabled&&z!=null&&z.autoScaleYaxis)&&(S=!0)}for(var D=e;D<n;D++){o.dataPoints=Math.max(o.dataPoints,f[D].length);var F=r.series[D].type;o.categoryLabels.length&&(o.dataPoints=o.categoryLabels.filter((function(ae){return ae!==void 0})).length),o.labels.length&&r.xaxis.type!=="datetime"&&o.series.reduce((function(ae,me){return ae+me.length}),0)!==0&&(o.dataPoints=Math.max(o.dataPoints,o.labels.length));var U=0,G=f[D].length-1;if(S){if(r.xaxis.min)for(;U<G&&o.seriesX[D][U]<r.xaxis.min;U++);if(r.xaxis.max)for(;G>U&&o.seriesX[D][G]>r.xaxis.max;G--);}for(var Z=U;Z<=G&&Z<o.series[D].length;Z++){var ee=f[D][Z];if(ee!==null&&At.isNumber(ee)){var ie,le,J,re;switch(((ie=x[D])===null||ie===void 0?void 0:ie[Z])!==void 0&&(s=Math.max(s,x[D][Z]),t=Math.min(t,x[D][Z])),((le=y[D])===null||le===void 0?void 0:le[Z])!==void 0&&(t=Math.min(t,y[D][Z]),i=Math.max(i,y[D][Z])),F){case"candlestick":o.seriesCandleC[D][Z]!==void 0&&(s=Math.max(s,o.seriesCandleH[D][Z]),t=Math.min(t,o.seriesCandleL[D][Z]));break;case"boxPlot":o.seriesCandleC[D][Z]!==void 0&&(s=Math.max(s,o.seriesCandleC[D][Z]),t=Math.min(t,o.seriesCandleO[D][Z]))}F&&F!=="candlestick"&&F!=="boxPlot"&&F!=="rangeArea"&&F!=="rangeBar"&&(s=Math.max(s,o.series[D][Z]),t=Math.min(t,o.series[D][Z])),o.seriesGoals[D]&&o.seriesGoals[D][Z]&&Array.isArray(o.seriesGoals[D][Z])&&o.seriesGoals[D][Z].forEach((function(ae){s=Math.max(s,ae.value),t=Math.min(t,ae.value)})),i=s,ee=At.noExponents(ee),At.isFloat(ee)&&(o.yValueDecimal=Math.max(o.yValueDecimal,ee.toString().split(".")[1].length)),h>((J=y[D])===null||J===void 0?void 0:J[Z])&&((re=y[D])===null||re===void 0?void 0:re[Z])<0&&(h=y[D][Z])}else o.hasNullValues=!0}F!=="bar"&&F!=="column"||(h<0&&s<0&&(s=0,i=Math.max(i,0)),h===Number.MIN_VALUE&&(h=0,t=Math.min(t,0)))}return r.chart.type==="rangeBar"&&o.seriesRangeStart.length&&o.isBarHorizontal&&(h=t),r.chart.type==="bar"&&(h<0&&s<0&&(s=0),h===Number.MIN_VALUE&&(h=0)),{minY:h,maxY:s,lowestY:t,highestY:i}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var i,n=Number.MAX_VALUE;if(e.isMultipleYAxis){n=Number.MAX_VALUE;for(var r=0;r<e.series.length;r++)i=this.getMinYMaxY(r),e.minYArr[r]=i.lowestY,e.maxYArr[r]=i.highestY,n=Math.min(n,i.lowestY)}return i=this.getMinYMaxY(0,n,null,e.series.length),t.chart.type==="bar"?(e.minY=i.minY,e.maxY=i.maxY):(e.minY=i.lowestY,e.maxY=i.highestY),n=i.lowestY,t.chart.stacked&&this._setStackedMinMax(),t.chart.type==="line"||t.chart.type==="area"||t.chart.type==="scatter"||t.chart.type==="candlestick"||t.chart.type==="boxPlot"||t.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==e.maxY&&(e.minY=n):e.minY=e.minY!==Number.MIN_VALUE?Math.min(i.minY,e.minY):i.minY,t.yaxis.forEach((function(o,s){o.max!==void 0&&(typeof o.max=="number"?e.maxYArr[s]=o.max:typeof o.max=="function"&&(e.maxYArr[s]=o.max(e.isMultipleYAxis?e.maxYArr[s]:e.maxY)),e.maxY=e.maxYArr[s]),o.min!==void 0&&(typeof o.min=="number"?e.minYArr[s]=o.min:typeof o.min=="function"&&(e.minYArr[s]=o.min(e.isMultipleYAxis?e.minYArr[s]===Number.MIN_VALUE?0:e.minYArr[s]:e.minY)),e.minY=e.minYArr[s])})),e.isBarHorizontal&&["min","max"].forEach((function(o){t.xaxis[o]!==void 0&&typeof t.xaxis[o]=="number"&&(o==="min"?e.minY=t.xaxis[o]:e.maxY=t.xaxis[o])})),e.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),e.minY=n):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.minY,e.maxYArr[0]=e.maxY),e.barGroups=[],e.lineGroups=[],e.areaGroups=[],t.series.forEach((function(o){switch(o.type||t.chart.type){case"bar":case"column":e.barGroups.push(o.group);break;case"line":e.lineGroups.push(o.group);break;case"area":e.areaGroups.push(o.group)}})),e.barGroups=e.barGroups.filter((function(o,s,h){return h.indexOf(o)===s})),e.lineGroups=e.lineGroups.filter((function(o,s,h){return h.indexOf(o)===s})),e.areaGroups=e.areaGroups.filter((function(o,s,h){return h.indexOf(o)===s})),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,i=t.xaxis.type==="numeric"||t.xaxis.type==="datetime"||t.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&(function(){for(var h=0;h<e.series.length;h++)if(e.labels[h])for(var f=0;f<e.labels[h].length;f++)e.labels[h][f]!==null&&At.isNumber(e.labels[h][f])&&(e.maxX=Math.max(e.maxX,e.labels[h][f]),e.initialMaxX=Math.max(e.maxX,e.labels[h][f]),e.minX=Math.min(e.minX,e.labels[h][f]),e.initialMinX=Math.min(e.minX,e.labels[h][f]))})(),e.noLabelsProvided&&t.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var n=10;if(t.xaxis.tickAmount===void 0)n=Math.round(e.svgWidth/150),t.xaxis.type==="numeric"&&e.dataPoints<30&&(n=e.dataPoints-1),n>e.dataPoints&&e.dataPoints!==0&&(n=e.dataPoints-1);else if(t.xaxis.tickAmount==="dataPoints"){if(e.series.length>1&&(n=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric){var r=Math.round(e.maxX-e.minX);r<30&&(n=r)}}else n=t.xaxis.tickAmount;if(e.xTickAmount=n,t.xaxis.max!==void 0&&typeof t.xaxis.max=="number"&&(e.maxX=t.xaxis.max),t.xaxis.min!==void 0&&typeof t.xaxis.min=="number"&&(e.minX=t.xaxis.min),t.xaxis.range!==void 0&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var o=[],s=e.minX-1;s<e.maxX;s++)o.push(s+1);e.xAxisScale={result:o,niceMin:o[0],niceMax:o[o.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,n,n,0,t.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,n-1,0,t.xaxis.stepSize),e.seriesX=e.labels.slice());i&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ){for(var t=0;t<e.series.length;t++)if(e.seriesZ[t]!==void 0)for(var i=0;i<e.seriesZ[t].length;i++)e.seriesZ[t][i]!==null&&At.isNumber(e.seriesZ[t][i])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][i]),e.minZ=Math.min(e.minZ,e.seriesZ[t][i]))}}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var i=new Io(this.ctx);if(t.xaxis.type==="datetime"){var n=i.getDate(e.minX);t.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()-2):n.setDate(n.getDate()-2),e.minX=new Date(n).getTime();var r=i.getDate(e.maxX);t.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()+2):r.setDate(r.getDate()+2),e.maxX=new Date(r).getTime()}else(t.xaxis.type==="numeric"||t.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((function(t,i){if(t.length){t.length===1&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var n=t.slice();n.sort((function(r,o){return r-o})),n.forEach((function(r,o){if(o>0){var s=r-n[o-1];s>0&&(e.minXDiff=Math.min(s,e.minXDiff))}})),e.dataPoints!==1&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}}))}},{key:"_setStackedMinMax",value:function(){var e=this,t=this.w.globals;if(t.series.length){var i=t.seriesGroups;i.length||(i=[this.w.globals.seriesNames.map((function(o){return o}))]);var n={},r={};i.forEach((function(o){n[o]=[],r[o]=[],e.w.config.series.map((function(s,h){return o.indexOf(t.seriesNames[h])>-1?h:null})).filter((function(s){return s!==null})).forEach((function(s){for(var h=0;h<t.series[t.maxValsInArrayIndex].length;h++){var f,y,x,S;n[o][h]===void 0&&(n[o][h]=0,r[o][h]=0),(e.w.config.chart.stacked&&!t.comboCharts||e.w.config.chart.stacked&&t.comboCharts&&(!e.w.config.chart.stackOnlyBar||((f=e.w.config.series)===null||f===void 0||(y=f[s])===null||y===void 0?void 0:y.type)==="bar"||((x=e.w.config.series)===null||x===void 0||(S=x[s])===null||S===void 0?void 0:S.type)==="column"))&&t.series[s][h]!==null&&At.isNumber(t.series[s][h])&&(t.series[s][h]>0?n[o][h]+=parseFloat(t.series[s][h])+1e-4:r[o][h]+=parseFloat(t.series[s][h]))}}))})),Object.entries(n).forEach((function(o){var s=II(o,1)[0];n[s].forEach((function(h,f){t.maxY=Math.max(t.maxY,n[s][f]),t.minY=Math.min(t.minY,r[s][f])}))}))}}}]),a})(),Uw=(function(){function a(e,t){wn(this,a),this.ctx=e,this.elgrid=t,this.w=e.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=i.config.xaxis.position==="bottom"?i.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new wd(e)}return Sn(a,[{key:"drawYaxis",value:function(e){var t=this.w,i=new vi(this.ctx),n=t.config.yaxis[e].labels.style,r=n.fontSize,o=n.fontFamily,s=n.fontWeight,h=i.group({class:"apexcharts-yaxis",rel:e,transform:"translate(".concat(t.globals.translateYAxisX[e],", 0)")});if(this.axesUtils.isYAxisHidden(e))return h;var f=i.group({class:"apexcharts-yaxis-texts-g"});h.add(f);var y=t.globals.yAxisScale[e].result.length-1,x=t.globals.gridHeight/y,S=t.globals.yLabelFormatters[e],E=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice());if(t.config.yaxis[e].labels.show){var z=t.globals.translateY+t.config.yaxis[e].labels.offsetY;t.globals.isBarHorizontal?z=0:t.config.chart.type==="heatmap"&&(z-=x/2),z+=parseInt(r,10)/3;for(var D=y;D>=0;D--){var F=S(E[D],D,t),U=t.config.yaxis[e].labels.padding;t.config.yaxis[e].opposite&&t.config.yaxis.length!==0&&(U*=-1);var G=this.getTextAnchor(t.config.yaxis[e].labels.align,t.config.yaxis[e].opposite),Z=this.axesUtils.getYAxisForeColor(n.colors,e),ee=Array.isArray(Z)?Z[D]:Z,ie=At.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label tspan"))).map((function(J){return J.textContent})),le=i.drawText({x:U,y:z,text:ie.includes(F)&&!t.config.yaxis[e].labels.showDuplicates?"":F,textAnchor:G,fontSize:r,fontFamily:o,fontWeight:s,maxWidth:t.config.yaxis[e].labels.maxWidth,foreColor:ee,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(n.cssClass)});f.add(le),this.addTooltip(le,F),t.config.yaxis[e].labels.rotate!==0&&this.rotateLabel(i,le,firstLabel,t.config.yaxis[e].labels.rotate),z+=x}}return this.addYAxisTitle(i,h,e),this.addAxisBorder(i,h,e,y,x),h}},{key:"getTextAnchor",value:function(e,t){return e==="left"?"start":e==="center"?"middle":e==="right"?"end":t?"start":"end"}},{key:"addTooltip",value:function(e,t){var i=document.createElementNS(this.w.globals.SVGNS,"title");i.textContent=Array.isArray(t)?t.join(" "):t,e.node.appendChild(i)}},{key:"rotateLabel",value:function(e,t,i,n){var r=e.rotateAroundCenter(i.node),o=e.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(".concat(n," ").concat(r.x," ").concat(o.y,")"))}},{key:"addYAxisTitle",value:function(e,t,i){var n=this.w;if(n.config.yaxis[i].title.text!==void 0){var r=e.group({class:"apexcharts-yaxis-title"}),o=n.config.yaxis[i].opposite?n.globals.translateYAxisX[i]:0,s=e.drawText({x:o,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[i].title.offsetY,text:n.config.yaxis[i].title.text,textAnchor:"end",foreColor:n.config.yaxis[i].title.style.color,fontSize:n.config.yaxis[i].title.style.fontSize,fontWeight:n.config.yaxis[i].title.style.fontWeight,fontFamily:n.config.yaxis[i].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(n.config.yaxis[i].title.style.cssClass)});r.add(s),t.add(r)}}},{key:"addAxisBorder",value:function(e,t,i,n,r){var o=this.w,s=o.config.yaxis[i].axisBorder,h=31+s.offsetX;if(o.config.yaxis[i].opposite&&(h=-31-s.offsetX),s.show){var f=e.drawLine(h,o.globals.translateY+s.offsetY-2,h,o.globals.gridHeight+o.globals.translateY+s.offsetY+2,s.color,0,s.width);t.add(f)}o.config.yaxis[i].axisTicks.show&&this.axesUtils.drawYAxisTicks(h,n,s,o.config.yaxis[i].axisTicks,i,r,t)}},{key:"drawYaxisInversed",value:function(e){var t=this.w,i=new vi(this.ctx),n=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),r=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});n.add(r);var o=t.globals.yAxisScale[e].result.length-1,s=t.globals.gridWidth/o+.1,h=s+t.config.xaxis.labels.offsetX,f=t.globals.xLabelFormatter,y=this.axesUtils.checkForReversedLabels(e,t.globals.yAxisScale[e].result.slice()),x=t.globals.timescaleLabels;if(x.length>0&&(this.xaxisLabels=x.slice(),o=(y=x.slice()).length),t.config.xaxis.labels.show)for(var S=x.length?0:o;x.length?S<x.length:S>=0;x.length?S++:S--){var E=f(y[S],S,t),z=t.globals.gridWidth+t.globals.padHorizontal-(h-s+t.config.xaxis.labels.offsetX);if(x.length){var D=this.axesUtils.getLabel(y,x,z,S,this.drawnLabels,this.xaxisFontSize);z=D.x,E=D.text,this.drawnLabels.push(D.text),S===0&&t.globals.skipFirstTimelinelabel&&(E=""),S===y.length-1&&t.globals.skipLastTimelinelabel&&(E="")}var F=i.drawText({x:z,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-(t.config.xaxis.position==="top"?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:E,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(t.config.xaxis.labels.style.cssClass)});r.add(F),F.tspan(E),this.addTooltip(F,E),h+=s}return this.inversedYAxisTitleText(n),this.inversedYAxisBorder(n),n}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,i=new vi(this.ctx),n=t.config.xaxis.axisBorder;if(n.show){var r=0;t.config.chart.type==="bar"&&t.globals.isXNumeric&&(r-=15);var o=i.drawLine(t.globals.padHorizontal+r+n.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,n.color,0,n.height);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(o):e.add(o)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,i=new vi(this.ctx);if(t.config.xaxis.title.text!==void 0){var n=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),r=i.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(t.config.xaxis.title.style.cssClass)});n.add(r),e.add(n)}}},{key:"yAxisTitleRotate",value:function(e,t){var i=this.w,n=new vi(this.ctx),r=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g")),o=r?r.getBoundingClientRect():{width:0,height:0},s=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text")),h=s?s.getBoundingClientRect():{width:0,height:0};if(s){var f=this.xPaddingForYAxisTitle(e,o,h,t);s.setAttribute("x",f.xPos-(t?10:0));var y=n.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(t?-1*i.config.yaxis[e].title.rotate:i.config.yaxis[e].title.rotate," ").concat(y.x," ").concat(y.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,i,n){var r=this.w,o=0,s=10;return r.config.yaxis[e].title.text===void 0||e<0?{xPos:o,padd:0}:(n?o=t.width+r.config.yaxis[e].title.offsetX+i.width/2+s/2:(o=-1*t.width+r.config.yaxis[e].title.offsetX+s/2+i.width/2,r.globals.isBarHorizontal&&(s=25,o=-1*t.width-r.config.yaxis[e].title.offsetX-s)),{xPos:o,padd:s})}},{key:"setYAxisXPosition",value:function(e,t){var i=this.w,n=0,r=0,o=18,s=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.forEach((function(h,f){var y=i.globals.ignoreYAxisIndexes.includes(f)||!h.show||h.floating||e[f].width===0,x=e[f].width+t[f].width;h.opposite?i.globals.isBarHorizontal?(r=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[f]=r-h.labels.offsetX):(r=i.globals.gridWidth+i.globals.translateX+s,y||(s+=x+20),i.globals.translateYAxisX[f]=r-h.labels.offsetX+20):(n=i.globals.translateX-o,y||(o+=x+20),i.globals.translateYAxisX[f]=n+h.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var e=this.w;At.listToArray(e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach((function(t,i){var n=e.config.yaxis[i];if(n&&!n.floating&&n.labels.align!==void 0){var r=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),o=At.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"))),s=r.getBoundingClientRect();o.forEach((function(h){h.setAttribute("text-anchor",n.labels.align)})),n.labels.align!=="left"||n.opposite?n.labels.align==="center"?r.setAttribute("transform","translate(".concat(s.width/2*(n.opposite?1:-1),", 0)")):n.labels.align==="right"&&n.opposite&&r.setAttribute("transform","translate(".concat(s.width,", 0)")):r.setAttribute("transform","translate(-".concat(s.width,", 0)"))}}))}}]),a})(),s8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.documentEvent=At.bind(this.documentEvent,this)}return Sn(a,[{key:"addEventListener",value:function(e,t){var i=this.w;i.globals.events.hasOwnProperty(e)?i.globals.events[e].push(t):i.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){var n=i.globals.events[e].indexOf(t);n!==-1&&i.globals.events[e].splice(n,1)}}},{key:"fireEvent",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var n=i.globals.events[e],r=n.length,o=0;o<r;o++)n[o].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,i=this.ctx,n=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach((function(r){n.addEventListener(r,(function(o){var s=o.target.getAttribute("i")===null&&t.globals.capturedSeriesIndex!==-1?t.globals.capturedSeriesIndex:o.target.getAttribute("i"),h=o.target.getAttribute("j")===null&&t.globals.capturedDataPointIndex!==-1?t.globals.capturedDataPointIndex:o.target.getAttribute("j"),f=Object.assign({},t,{seriesIndex:t.globals.axisCharts?s:0,dataPointIndex:h});o.type==="mousemove"||o.type==="touchmove"?typeof t.config.chart.events.mouseMove=="function"&&t.config.chart.events.mouseMove(o,i,f):o.type==="mouseleave"||o.type==="touchleave"?typeof t.config.chart.events.mouseLeave=="function"&&t.config.chart.events.mouseLeave(o,i,f):(o.type==="mouseup"&&o.which===1||o.type==="touchend")&&(typeof t.config.chart.events.click=="function"&&t.config.chart.events.click(o,i,f),i.ctx.events.fireEvent("click",[o,i,f]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(r){t.globals.dom.baseEl.addEventListener(r,e.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,i=e.target.className;if(e.type==="click"){var n=t.globals.dom.baseEl.querySelector(".apexcharts-menu");n&&n.classList.contains("apexcharts-menu-open")&&i!=="apexcharts-menu-icon"&&n.classList.remove("apexcharts-menu-open")}t.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,t.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}]),a})(),o8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=t.filter((function(r){return r.name===e}))[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var n=At.extend(aP,i);this.w.globals.locale=n.options}}]),a})(),l8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"drawAxis",value:function(e,t){var i,n,r=this,o=this.w.globals,s=this.w.config,h=new hy(this.ctx,t),f=new Uw(this.ctx,t);o.axisCharts&&e!=="radar"&&(o.isBarHorizontal?(n=f.drawYaxisInversed(0),i=h.drawXaxisInversed(0),o.dom.elGraphical.add(i),o.dom.elGraphical.add(n)):(i=h.drawXaxis(),o.dom.elGraphical.add(i),s.yaxis.map((function(y,x){if(o.ignoreYAxisIndexes.indexOf(x)===-1&&(n=f.drawYaxis(x),o.dom.Paper.add(n),r.w.config.grid.position==="back")){var S=o.dom.Paper.children()[1];S.remove(),o.dom.Paper.add(S)}}))))}}]),a})(),d1=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new vi(this.ctx),i=new Lo(this.ctx),n=e.config.xaxis.crosshairs.fill.gradient,r=e.config.xaxis.crosshairs.dropShadow,o=e.config.xaxis.crosshairs.fill.type,s=n.colorFrom,h=n.colorTo,f=n.opacityFrom,y=n.opacityTo,x=n.stops,S=r.enabled,E=r.left,z=r.top,D=r.blur,F=r.color,U=r.opacity,G=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){o==="gradient"&&(G=t.drawGradient("vertical",s,h,f,y,null,x,null));var Z=t.drawRect();e.config.xaxis.crosshairs.width===1&&(Z=t.drawLine());var ee=e.globals.gridHeight;(!At.isNumber(ee)||ee<0)&&(ee=0);var ie=e.config.xaxis.crosshairs.width;(!At.isNumber(ie)||ie<0)&&(ie=0),Z.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:ee,width:ie,height:ee,fill:G,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),S&&(Z=i.dropShadow(Z,{left:E,top:z,blur:D,color:F,opacity:U})),e.globals.dom.elGraphical.add(Z)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new vi(this.ctx),i=e.config.yaxis[0].crosshairs,n=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var r=t.drawLine(-n,0,e.globals.gridWidth+n,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);r.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(r)}var o=t.drawLine(-n,0,e.globals.gridWidth+n,0,i.stroke.color,0,0);o.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(o)}}]),a})(),c8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"checkResponsiveConfig",value:function(e){var t=this,i=this.w,n=i.config;if(n.responsive.length!==0){var r=n.responsive.slice();r.sort((function(f,y){return f.breakpoint>y.breakpoint?1:y.breakpoint>f.breakpoint?-1:0})).reverse();var o=new uy({}),s=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=r[0].breakpoint,x=window.innerWidth>0?window.innerWidth:screen.width;if(x>y){var S=At.clone(i.globals.initialConfig);S.series=At.clone(i.config.series);var E=Rs.extendArrayProps(o,S,i);f=At.extend(E,f),f=At.extend(i.config,f),t.overrideResponsiveOptions(f)}else for(var z=0;z<r.length;z++)x<r[z].breakpoint&&(f=Rs.extendArrayProps(o,r[z].options,i),f=At.extend(i.config,f),t.overrideResponsiveOptions(f))};if(e){var h=Rs.extendArrayProps(o,e,i);h=At.extend(i.config,h),s(h=At.extend(h,e))}else s({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new uy(e).init({responsiveOverride:!0});this.w.config=t}}]),a})(),u8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return Sn(a,[{key:"checkHeatmapDistributed",value:function(){var e=this.w.config,t=e.chart,i=e.plotOptions;return t.type==="treemap"&&i.treemap&&i.treemap.distributed||t.type==="heatmap"&&i.heatmap&&i.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var e=this.w.config,t=e.chart,i=e.plotOptions;return i.bar&&i.bar.distributed&&(t.type==="bar"||t.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this.w,t=new At;e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode||"light"));var i=oo(e.config.colors||e.config.fill.colors||[]);e.globals.colors=this.getColors(i),this.applySeriesColors(e.globals.seriesColors,e.globals.colors),e.config.theme.monochrome.enabled&&(e.globals.colors=this.getMonochromeColors(e.config.theme.monochrome,e.globals.series,t));var n=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),this.applyColorTypes(["fill","stroke"],n),this.applyDataLabelsColors(n),this.applyRadarPolygonsColors(),this.applyMarkersColors(n)}},{key:"getColors",value:function(e){var t=this,i=this.w;return e&&e.length!==0?Array.isArray(e)&&e.length>0&&typeof e[0]=="function"?(this.isColorFn=!0,i.config.series.map((function(n,r){var o=e[r]||e[0];return typeof o=="function"?o({value:i.globals.axisCharts?i.globals.series[r][0]||0:i.globals.series[r],seriesIndex:r,dataPointIndex:r,w:t.w}):o}))):e:this.predefined()}},{key:"applySeriesColors",value:function(e,t){e.forEach((function(i,n){i&&(t[n]=i)}))}},{key:"getMonochromeColors",value:function(e,t,i){var n=e.color,r=e.shadeIntensity,o=e.shadeTo,s=this.isBarDistributed||this.isHeatmapDistributed?t[0].length*t.length:t.length,h=1/(s/r),f=0;return Array.from({length:s},(function(){var y=o==="dark"?i.shadeColor(-1*f,n):i.shadeColor(f,n);return f+=h,y}))}},{key:"applyColorTypes",value:function(e,t){var i=this,n=this.w;e.forEach((function(r){n.globals[r].colors=n.config[r].colors===void 0?i.isColorFn?n.config.colors:t:n.config[r].colors.slice(),i.pushExtraColors(n.globals[r].colors)}))}},{key:"applyDataLabelsColors",value:function(e){var t=this.w;t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors===void 0?e:t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var e=this.w;e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors===void 0?[e.config.theme.mode==="dark"?"#343A3F":"none"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(e){var t=this.w;t.globals.markers.colors=t.config.markers.colors===void 0?e:t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=this.w,r=t||n.globals.series.length;if(i===null&&(i=this.isBarDistributed||this.isHeatmapDistributed||n.config.chart.type==="heatmap"&&n.config.plotOptions.heatmap&&n.config.plotOptions.heatmap.colorScale.inverse),i&&n.globals.series.length&&(r=n.globals.series[n.globals.maxValsInArrayIndex].length*n.globals.series.length),e.length<r)for(var o=r-e.length,s=0;s<o;s++)e.push(e[s])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode,i=t==="dark"?"palette4":t==="light"?"palette1":e.theme.palette||"palette1",n=t==="dark"?"#f6f7f8":t==="light"?"#373d3f":e.chart.foreColor||"#373d3f";return e.tooltip.theme=t||"light",e.chart.foreColor=n,e.theme.palette=i,e}},{key:"predefined",value:function(){var e=this.w.config.theme.palette,t=this.ctx.constructor.getThemePalettes();return t[e]||t.palette1}}]),a})(),h8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,i=e==="title"?t.config.title:t.config.subtitle,n=t.globals.svgWidth/2,r=i.offsetY,o="middle";if(i.align==="left"?(n=10,o="start"):i.align==="right"&&(n=t.globals.svgWidth-10,o="end"),n+=i.offsetX,r=r+parseInt(i.style.fontSize,10)+i.margin/2,i.text!==void 0){var s=new vi(this.ctx).drawText({x:n,y:r,text:i.text,textAnchor:o,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});s.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(s)}}}]),a})(),d8=(function(){function a(e){wn(this,a),this.w=e.w,this.dCtx=e}return Sn(a,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,i=0,n=0,r=e==="title"?t.config.title.floating:t.config.subtitle.floating,o=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(o!==null&&!r){var s=o.getBoundingClientRect();i=s.width,n=t.globals.axisCharts?s.height+5:s.height}return{width:i,height:n}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.elLegendWrap;e.config.legend.height||e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||(t.style.maxHeight=e.globals.svgHeight/2+"px");var i=Object.assign({},At.getBoundingClientRect(t));return t!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:i.height===0?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},e.config.legend.position!=="left"&&e.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var e=this,t=this.w,i=[];t.config.series.forEach((function(h,f){h.data.forEach((function(y,x){var S;S=t.globals.series[f][x],n=t.config.dataLabels.formatter(S,{ctx:e.dCtx.ctx,seriesIndex:f,dataPointIndex:x,w:t}),i.push(n)}))}));var n=At.getLargestStringFromArr(i),r=new vi(this.dCtx.ctx),o=t.config.dataLabels.style,s=r.getTextRects(n,parseInt(o.fontSize),o.fontFamily);return{width:1.05*s.width,height:s.height}}},{key:"getLargestStringFromMultiArr",value:function(e,t){var i=e;if(this.w.globals.isMultiLineX){var n=t.map((function(o,s){return Array.isArray(o)?o.length:1})),r=Math.max.apply(Math,oo(n));i=t[n.indexOf(r)]}return i}}]),a})(),f8=(function(){function a(e){wn(this,a),this.w=e.w,this.dCtx=e}return Sn(a,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,i=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&i.length===0&&(i=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var n=this.getxAxisTimeScaleLabelsCoords();e={width:n.width,height:n.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=t.config.legend.position!=="left"&&t.config.legend.position!=="right"||t.config.legend.floating?0:this.dCtx.lgRect.width;var r=t.globals.xLabelFormatter,o=At.getLargestStringFromArr(i),s=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,i);t.globals.isBarHorizontal&&(s=o=t.globals.yAxisScale[0].result.reduce((function(z,D){return z.length>D.length?z:D}),0));var h=new Cy(this.dCtx.ctx),f=o;o=h.xLabelFormat(r,o,f,{i:void 0,dateFormatter:new Io(this.dCtx.ctx).formatDate,w:t}),s=h.xLabelFormat(r,s,f,{i:void 0,dateFormatter:new Io(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&o===void 0||String(o).trim()==="")&&(s=o="1");var y=new vi(this.dCtx.ctx),x=y.getTextRects(o,t.config.xaxis.labels.style.fontSize),S=x;if(o!==s&&(S=y.getTextRects(s,t.config.xaxis.labels.style.fontSize)),(e={width:x.width>=S.width?x.width:S.width,height:x.height>=S.height?x.height:S.height}).width*i.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&t.config.xaxis.labels.rotate!==0||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var E=function(z){return y.getTextRects(z,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};x=E(o),o!==s&&(S=E(s)),e.height=(x.height>S.height?x.height:S.height)/1.5,e.width=x.width>S.width?x.width:S.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasXaxisGroups)return{width:0,height:0};var i,n=((e=t.config.xaxis.group.style)===null||e===void 0?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,r=t.globals.groups.map((function(x){return x.title})),o=At.getLargestStringFromArr(r),s=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,r),h=new vi(this.dCtx.ctx),f=h.getTextRects(o,n),y=f;return o!==s&&(y=h.getTextRects(s,n)),i={width:f.width>=y.width?f.width:y.width,height:f.height>=y.height?f.height:y.height},t.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,i=0;if(e.config.xaxis.title.text!==void 0){var n=new vi(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=n.width,i=n.height}return{width:t,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map((function(r){return r.value})),n=i.reduce((function(r,o){return r===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):r.length>o.length?r:o}),0);return 1.05*(e=new vi(this.dCtx.ctx).getTextRects(n,t.config.xaxis.labels.style.fontSize)).width*i.length>t.globals.gridWidth&&t.config.xaxis.labels.rotate!==0&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,i=this.w,n=i.globals,r=i.config,o=r.xaxis.type,s=e.width;n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1;var h=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,f=function(y,x){r.yaxis.length>1&&(function(S){return n.collapsedSeriesIndices.indexOf(S)!==-1})(x)||(function(S){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var E=t.dCtx.timescaleLabels[0],z=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+s/1.75-t.dCtx.yAxisWidthRight,D=E.position-s/1.75+t.dCtx.yAxisWidthLeft,F=i.config.legend.position==="right"&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;z>n.svgWidth-n.translateX-F&&(n.skipLastTimelinelabel=!0),D<-(S.show&&!S.floating||r.chart.type!=="bar"&&r.chart.type!=="candlestick"&&r.chart.type!=="rangeBar"&&r.chart.type!=="boxPlot"?10:s/1.75)&&(n.skipFirstTimelinelabel=!0)}else o==="datetime"?t.dCtx.gridPad.right<s&&!n.rotateXLabels&&(n.skipLastTimelinelabel=!0):o!=="datetime"&&t.dCtx.gridPad.right<s/2-t.dCtx.yAxisWidthRight&&!n.rotateXLabels&&!i.config.xaxis.labels.trim&&(t.dCtx.xPadRight=s/2+1)})(y)};r.yaxis.forEach((function(y,x){h?(t.dCtx.gridPad.left<s&&(t.dCtx.xPadLeft=s/2+1),t.dCtx.xPadRight=s/2+1):f(y,x)}))}}]),a})(),p8=(function(){function a(e){wn(this,a),this.w=e.w,this.dCtx=e}return Sn(a,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,i=[],n=10,r=new wd(this.dCtx.ctx);return t.config.yaxis.map((function(o,s){var h={seriesIndex:s,dataPointIndex:-1,w:t},f=t.globals.yAxisScale[s],y=0;if(!r.isYAxisHidden(s)&&o.labels.show&&o.labels.minWidth!==void 0&&(y=o.labels.minWidth),!r.isYAxisHidden(s)&&o.labels.show&&f.result.length){var x=t.globals.yLabelFormatters[s],S=f.niceMin===Number.MIN_VALUE?0:f.niceMin,E=f.result.reduce((function(ee,ie){var le,J;return((le=String(x(ee,h)))===null||le===void 0?void 0:le.length)>((J=String(x(ie,h)))===null||J===void 0?void 0:J.length)?ee:ie}),S),z=E=x(E,h);if(E!==void 0&&E.length!==0||(E=f.niceMax),t.globals.isBarHorizontal){n=0;var D=t.globals.labels.slice();E=At.getLargestStringFromArr(D),E=x(E,{seriesIndex:s,dataPointIndex:-1,w:t}),z=e.dCtx.dimHelpers.getLargestStringFromMultiArr(E,D)}var F=new vi(e.dCtx.ctx),U="rotate(".concat(o.labels.rotate," 0 0)"),G=F.getTextRects(E,o.labels.style.fontSize,o.labels.style.fontFamily,U,!1),Z=G;E!==z&&(Z=F.getTextRects(z,o.labels.style.fontSize,o.labels.style.fontFamily,U,!1)),i.push({width:(y>Z.width||y>G.width?y:Z.width>G.width?Z.width:G.width)+n,height:Z.height>G.height?Z.height:G.height})}else i.push({width:0,height:0})})),i}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,i=[];return t.config.yaxis.map((function(n,r){if(n.show&&n.title.text!==void 0){var o=new vi(e.dCtx.ctx),s="rotate(".concat(n.title.rotate," 0 0)"),h=o.getTextRects(n.title.text,n.title.style.fontSize,n.title.style.fontFamily,s,!1);i.push({width:h.width,height:h.height})}else i.push({width:0,height:0})})),i}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,i=0,n=0,r=e.globals.yAxisScale.length>1?10:0,o=new wd(this.dCtx.ctx),s=function(h,f){var y=e.config.yaxis[f].floating,x=0;h.width>0&&!y?(x=h.width+r,(function(S){return e.globals.ignoreYAxisIndexes.indexOf(S)>-1})(f)&&(x=x-h.width-r)):x=y||o.isYAxisHidden(f)?0:5,e.config.yaxis[f].opposite?n+=x:i+=x,t+=x};return e.globals.yLabelsCoords.map((function(h,f){s(h,f)})),e.globals.yTitleCoords.map((function(h,f){s(h,f)})),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=n,t}}]),a})(),g8=(function(){function a(e){wn(this,a),this.w=e.w,this.dCtx=e}return Sn(a,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w,i=t.config,n=t.globals;if(n.noData||n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.series.length)return 0;var r=function(E){return["bar","rangeBar","candlestick","boxPlot"].includes(E)},o=i.chart.type,s=0,h=r(o)?i.series.length:1;n.comboBarCount>0&&(h=n.comboBarCount),n.collapsedSeries.forEach((function(E){r(E.type)&&(h-=1)})),i.chart.stacked&&(h=1);var f=r(o)||n.comboBarCount>0,y=Math.abs(n.initialMaxX-n.initialMinX);if(f&&n.isXNumeric&&!n.isBarHorizontal&&h>0&&y!==0){y<=3&&(y=n.dataPoints);var x=y/e,S=n.minXDiff&&n.minXDiff/x>0?n.minXDiff/x:0;S>e/2&&(S/=2),(s=S*parseInt(i.plotOptions.bar.columnWidth,10)/100)<1&&(s=1),n.barPadForNumericAxis=s}return s}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,i=t.globals,n=this.dCtx.isSparkline||!i.axisCharts?0:10;["title","subtitle"].forEach((function(s){t.config[s].text!==void 0?n+=t.config[s].margin:n+=e.dCtx.isSparkline||!i.axisCharts?0:5})),!t.config.legend.show||t.config.legend.position!=="bottom"||t.config.legend.floating||i.axisCharts||(n+=10);var r=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),o=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight-=r.height+o.height+n,i.translateY+=r.height+o.height+n}},{key:"setGridXPosForDualYAxis",value:function(e,t){var i=this.w,n=new wd(this.dCtx.ctx);i.config.yaxis.forEach((function(r,o){i.globals.ignoreYAxisIndexes.indexOf(o)!==-1||r.floating||n.isYAxisHidden(o)||(r.opposite&&(i.globals.translateX-=t[o].width+e[o].width+parseInt(r.labels.style.fontSize,10)/1.2+12),i.globals.translateX<2&&(i.globals.translateX=2))}))}}]),a})(),O_=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new d8(this),this.dimYAxis=new p8(this),this.dimXAxis=new f8(this),this.dimGrid=new g8(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Sn(a,[{key:"plotCoords",value:function(){var e=this,t=this.w,i=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var n=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,oo(t.config.stroke.width)):t.config.stroke.width;this.isSparkline&&((t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(o){var s=II(o,2),h=s[0],f=s[1];e.gridPad[h]=Math.max(f,e.w.globals.markers.largestSize/1.5)})),this.gridPad.top=Math.max(n/2,this.gridPad.top),this.gridPad.bottom=Math.max(n/2,this.gridPad.bottom)),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var r=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*r,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(r>0?r:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,i=t.globals,n=this.dimYAxis.getyAxisLabelsCoords(),r=this.dimYAxis.getyAxisTitleCoords();i.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map((function(E,z){t.globals.yLabelsCoords.push({width:n[z].width,index:z}),t.globals.yTitleCoords.push({width:r[z].width,index:z})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var o=this.dimXAxis.getxAxisLabelsCoords(),s=this.dimXAxis.getxAxisGroupLabelsCoords(),h=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(o,h,s),i.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+t.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+t.config.xaxis.labels.offsetX;var f=this.yAxisWidth,y=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-h.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-o.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var x=10;(t.config.chart.type==="radar"||this.isSparkline)&&(f=0,y=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||t.config.chart.type==="treemap")&&(f=0,y=0,x=0),this.isSparkline||t.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(o);var S=function(){i.translateX=f+e.datalabelsCoords.width,i.gridHeight=i.svgHeight-e.lgRect.height-y-(e.isSparkline||t.config.chart.type==="treemap"?0:t.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-f-2*e.datalabelsCoords.width};switch(t.config.xaxis.position==="top"&&(x=i.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":i.translateY=x,S();break;case"top":i.translateY=this.lgRect.height+x,S();break;case"left":i.translateY=x,i.translateX=this.lgRect.width+f+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-y-12,i.gridWidth=i.svgWidth-this.lgRect.width-f-2*this.datalabelsCoords.width;break;case"right":i.translateY=x,i.translateX=f+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-y-12,i.gridWidth=i.svgWidth-this.lgRect.width-f-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(r,n),new Uw(this.ctx).setYAxisXPosition(n,r)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=e.config,n=0;e.config.legend.show&&!e.config.legend.floating&&(n=20);var r=i.chart.type==="pie"||i.chart.type==="polarArea"||i.chart.type==="donut"?"pie":"radialBar",o=i.plotOptions[r].offsetY,s=i.plotOptions[r].offsetX;if(!i.legend.show||i.legend.floating){t.gridHeight=t.svgHeight;var h=t.dom.elWrap.getBoundingClientRect().width;return t.gridWidth=Math.min(h,t.gridHeight),t.translateY=o,void(t.translateX=s+(t.svgWidth-t.gridWidth)/2)}switch(i.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=o-10,t.translateX=s+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+o+10,t.translateX=s+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-n,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=o,t.translateX=s+this.lgRect.width+n;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-n-5,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=o,t.translateX=s+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,i){var n=this.w,r=n.globals.hasXaxisGroups?2:1,o=i.height+e.height+t.height,s=n.globals.isMultiLineX?1.2:n.globals.LINE_HEIGHT_RATIO,h=n.globals.rotateXLabels?22:10,f=n.globals.rotateXLabels&&n.config.legend.position==="bottom"?10:0;this.xAxisHeight=o*s+r*h+f,this.xAxisWidth=e.width,this.xAxisHeight-t.height>n.config.xaxis.labels.maxHeight&&(this.xAxisHeight=n.config.xaxis.labels.maxHeight),n.config.xaxis.labels.minHeight&&this.xAxisHeight<n.config.xaxis.labels.minHeight&&(this.xAxisHeight=n.config.xaxis.labels.minHeight),n.config.xaxis.floating&&(this.xAxisHeight=0);var y=0,x=0;n.config.yaxis.forEach((function(S){y+=S.labels.minWidth,x+=S.labels.maxWidth})),this.yAxisWidth<y&&(this.yAxisWidth=y),this.yAxisWidth>x&&(this.yAxisWidth=x)}}]),a})(),m8=(function(){function a(e){wn(this,a),this.w=e.w,this.lgCtx=e}return Sn(a,[{key:"getLegendStyles",value:function(){var e,t,i,n=document.createElement("style");n.setAttribute("type","text/css");var r=((e=this.lgCtx.ctx)===null||e===void 0||(t=e.opts)===null||t===void 0||(i=t.chart)===null||i===void 0?void 0:i.nonce)||this.w.config.chart.nonce;r&&n.setAttribute("nonce",r);var o=document.createTextNode(oP);return n.appendChild(o),n}},{key:"getLegendDimensions",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;this.w.config.chart.injectStyleSheet!==!1&&e.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(e,t){var i=this,n=this.w;if(n.globals.axisCharts||n.config.chart.type==="radialBar"){n.globals.resized=!0;var r=null,o=null;n.globals.risingSeries=[],n.globals.axisCharts?(r=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),o=parseInt(r.getAttribute("data:realIndex"),10)):(r=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),o=parseInt(r.getAttribute("rel"),10)-1),t?[{cs:n.globals.collapsedSeries,csi:n.globals.collapsedSeriesIndices},{cs:n.globals.ancillaryCollapsedSeries,csi:n.globals.ancillaryCollapsedSeriesIndices}].forEach((function(y){i.riseCollapsedSeries(y.cs,y.csi,o)})):this.hideSeries({seriesEl:r,realIndex:o})}else{var s=n.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(e+1,"'] path")),h=n.config.chart.type;if(h==="pie"||h==="polarArea"||h==="donut"){var f=n.config.plotOptions.pie.donut.labels;new vi(this.lgCtx.ctx).pathMouseDown(s,null),this.lgCtx.ctx.pie.printDataLabelsInner(s.node,f)}s.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(e){var t=e.realIndex,i=this.w,n=i.globals,r=At.clone(i.config.series);if(n.axisCharts){var o=i.config.yaxis[n.seriesYAxisReverseMap[t]],s={index:t,data:r[t].data.slice(),type:r[t].type||i.config.chart.type};if(o&&o.show&&o.showAlways)n.ancillaryCollapsedSeriesIndices.indexOf(t)<0&&(n.ancillaryCollapsedSeries.push(s),n.ancillaryCollapsedSeriesIndices.push(t));else if(n.collapsedSeriesIndices.indexOf(t)<0){n.collapsedSeries.push(s),n.collapsedSeriesIndices.push(t);var h=n.risingSeries.indexOf(t);n.risingSeries.splice(h,1)}}else n.collapsedSeries.push({index:t,data:r[t]}),n.collapsedSeriesIndices.push(t);return n.allSeriesCollapsed=n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.config.series.length,this._getSeriesBasedOnCollapsedState(r)}},{key:"hideSeries",value:function(e){for(var t=e.seriesEl,i=e.realIndex,n=this.w,r=this.getSeriesAfterCollapsing({realIndex:i}),o=t.childNodes,s=0;s<o.length;s++)o[s].classList.contains("apexcharts-series-markers-wrap")&&(o[s].classList.contains("apexcharts-hide")?o[s].classList.remove("apexcharts-hide"):o[s].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(r,n.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,i){var n=this.w,r=At.clone(n.config.series);if(e.length>0){for(var o=0;o<e.length;o++)e[o].index===i&&(n.globals.axisCharts?r[i].data=e[o].data.slice():r[i]=e[o].data,typeof r[i]!="number"&&(r[i].hidden=!1),e.splice(o,1),t.splice(o,1),n.globals.risingSeries.push(i));r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,n.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w,i=0;return t.globals.axisCharts?e.forEach((function(n,r){t.globals.collapsedSeriesIndices.indexOf(r)<0&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(r)<0||(e[r].data=[],i++)})):e.forEach((function(n,r){!t.globals.collapsedSeriesIndices.indexOf(r)<0&&(e[r]=0,i++)})),t.globals.allSeriesCollapsed=i===e.length,e}}]),a})(),uP=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new m8(this)}return Sn(a,[{key:"init",value:function(){var e=this.w,t=e.globals,i=e.config,n=i.legend.showForSingleSeries&&t.series.length===1||this.isBarsDistributed||t.series.length>1;if(this.legendHelpers.appendToForeignObject(),(n||!t.axisCharts)&&i.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),i.legend.position==="bottom"||i.legend.position==="top"?this.legendAlignHorizontal():i.legend.position!=="right"&&i.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(e){var t=e.i,i=e.fillcolor,n=this.w,r=document.createElement("span");r.classList.add("apexcharts-legend-marker");var o=n.config.legend.markers.shape||n.config.markers.shape,s=o;Array.isArray(o)&&(s=o[t]);var h=Array.isArray(n.config.legend.markers.size)?parseFloat(n.config.legend.markers.size[t]):parseFloat(n.config.legend.markers.size),f=Array.isArray(n.config.legend.markers.offsetX)?parseFloat(n.config.legend.markers.offsetX[t]):parseFloat(n.config.legend.markers.offsetX),y=Array.isArray(n.config.legend.markers.offsetY)?parseFloat(n.config.legend.markers.offsetY[t]):parseFloat(n.config.legend.markers.offsetY),x=Array.isArray(n.config.legend.markers.strokeWidth)?parseFloat(n.config.legend.markers.strokeWidth[t]):parseFloat(n.config.legend.markers.strokeWidth),S=r.style;if(S.height=2*(h+x)+"px",S.width=2*(h+x)+"px",S.left=f+"px",S.top=y+"px",n.config.legend.markers.customHTML)S.background="transparent",S.color=i[t],Array.isArray(n.config.legend.markers.customHTML)?n.config.legend.markers.customHTML[t]&&(r.innerHTML=n.config.legend.markers.customHTML[t]()):r.innerHTML=n.config.legend.markers.customHTML();else{var E=new xg(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(s),seriesIndex:t,strokeWidth:x,size:h}),z=window.SVG().addTo(r).size("100%","100%"),D=new vi(this.ctx).drawMarker(0,0,Ui(Ui({},E),{},{pointFillColor:Array.isArray(i)?i[t]:E.pointFillColor,shape:s}));n.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach((function(F){F.node.classList.contains("apexcharts-marker-triangle")?F.node.style.transform="translate(50%, 45%)":F.node.style.transform="translate(50%, 50%)"})),z.add(D)}return r}},{key:"drawLegends",value:function(){var e=this,t=this,i=this.w,n=i.config.legend.fontFamily,r=i.globals.seriesNames,o=i.config.legend.markers.fillColors?i.config.legend.markers.fillColors.slice():i.globals.colors.slice();if(i.config.chart.type==="heatmap"){var s=i.config.plotOptions.heatmap.colorScale.ranges;r=s.map((function(E){return E.name?E.name:E.from+" - "+E.to})),o=s.map((function(E){return E.color}))}else this.isBarsDistributed&&(r=i.globals.labels.slice());i.config.legend.customLegendItems.length&&(r=i.config.legend.customLegendItems);var h=i.globals.legendFormatter,f=i.config.legend.inverseOrder,y=[];i.globals.seriesGroups.length>1&&i.config.legend.clusterGroupedSeries&&i.globals.seriesGroups.forEach((function(E,z){y[z]=document.createElement("div"),y[z].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(z)),i.config.legend.clusterGroupedSeriesOrientation==="horizontal"?i.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):y[z].classList.add("apexcharts-legend-group-vertical")}));for(var x=function(E){var z,D=h(r[E],{seriesIndex:E,w:i}),F=!1,U=!1;if(i.globals.collapsedSeries.length>0)for(var G=0;G<i.globals.collapsedSeries.length;G++)i.globals.collapsedSeries[G].index===E&&(F=!0);if(i.globals.ancillaryCollapsedSeriesIndices.length>0)for(var Z=0;Z<i.globals.ancillaryCollapsedSeriesIndices.length;Z++)i.globals.ancillaryCollapsedSeriesIndices[Z]===E&&(U=!0);var ee=e.createLegendMarker({i:E,fillcolor:o});vi.setAttrs(ee,{rel:E+1,"data:collapsed":F||U}),(F||U)&&ee.classList.add("apexcharts-inactive-legend");var ie=document.createElement("div"),le=document.createElement("span");le.classList.add("apexcharts-legend-text"),le.innerHTML=Array.isArray(D)?D.join(" "):D;var J=i.config.legend.labels.useSeriesColors?i.globals.colors[E]:Array.isArray(i.config.legend.labels.colors)?(z=i.config.legend.labels.colors)===null||z===void 0?void 0:z[E]:i.config.legend.labels.colors;J||(J=i.config.chart.foreColor),le.style.color=J,le.style.fontSize=parseFloat(i.config.legend.fontSize)+"px",le.style.fontWeight=i.config.legend.fontWeight,le.style.fontFamily=n||i.config.chart.fontFamily,vi.setAttrs(le,{rel:E+1,i:E,"data:default-text":encodeURIComponent(D),"data:collapsed":F||U}),ie.appendChild(ee),ie.appendChild(le);var re=new Rs(e.ctx);i.config.legend.showForZeroSeries||re.getSeriesTotalByIndex(E)===0&&re.seriesHaveSameValues(E)&&!re.isSeriesNull(E)&&i.globals.collapsedSeriesIndices.indexOf(E)===-1&&i.globals.ancillaryCollapsedSeriesIndices.indexOf(E)===-1&&ie.classList.add("apexcharts-hidden-zero-series"),i.config.legend.showForNullSeries||re.isSeriesNull(E)&&i.globals.collapsedSeriesIndices.indexOf(E)===-1&&i.globals.ancillaryCollapsedSeriesIndices.indexOf(E)===-1&&ie.classList.add("apexcharts-hidden-null-series"),y.length?i.globals.seriesGroups.forEach((function(ae,me){var Te;ae.includes((Te=i.config.series[E])===null||Te===void 0?void 0:Te.name)&&(i.globals.dom.elLegendWrap.appendChild(y[me]),y[me].appendChild(ie))})):i.globals.dom.elLegendWrap.appendChild(ie),i.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(i.config.legend.horizontalAlign)),i.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+i.config.legend.position),ie.classList.add("apexcharts-legend-series"),ie.style.margin="".concat(i.config.legend.itemMargin.vertical,"px ").concat(i.config.legend.itemMargin.horizontal,"px"),i.globals.dom.elLegendWrap.style.width=i.config.legend.width?i.config.legend.width+"px":"",i.globals.dom.elLegendWrap.style.height=i.config.legend.height?i.config.legend.height+"px":"",vi.setAttrs(ie,{rel:E+1,seriesName:At.escapeString(r[E]),"data:collapsed":F||U}),(F||U)&&ie.classList.add("apexcharts-inactive-legend"),i.config.legend.onItemClick.toggleDataSeries||ie.classList.add("apexcharts-no-click")},S=f?r.length-1:0;f?S>=0:S<=r.length-1;f?S--:S++)x(S);i.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),i.config.legend.onItemHover.highlightDataSeries&&i.config.legend.customLegendItems.length===0&&(i.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),i.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var i=this.w,n=i.globals.dom.elLegendWrap,r=n.clientHeight,o=0,s=0;if(i.config.legend.position==="bottom")s=i.globals.svgHeight-Math.min(r,i.globals.svgHeight/2)-5;else if(i.config.legend.position==="top"){var h=new O_(this.ctx),f=h.dimHelpers.getTitleSubtitleCoords("title").height,y=h.dimHelpers.getTitleSubtitleCoords("subtitle").height;s=(f>0?f-10:0)+(y>0?y-10:0)}n.style.position="absolute",o=o+e+i.config.legend.offsetX,s=s+t+i.config.legend.offsetY,n.style.left=o+"px",n.style.top=s+"px",i.config.legend.position==="right"&&(n.style.left="auto",n.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach((function(x){n.style[x]&&(n.style[x]=parseInt(i.config.legend[x],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.elLegendWrap.style.right=0;var t=new O_(this.ctx),i=t.dimHelpers.getTitleSubtitleCoords("title"),n=t.dimHelpers.getTitleSubtitleCoords("subtitle"),r=0;e.config.legend.position==="top"&&(r=i.height+n.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,r)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendDimensions(),i=0;e.config.legend.position==="left"&&(i=20),e.config.legend.position==="right"&&(i=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,i=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(t.config.chart.type==="heatmap"||this.isBarsDistributed){if(i){var n=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,n,this.w]),new zc(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&i&&new zc(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(e.target.getAttribute("rel"),10)-1,n=e.target.getAttribute("data:collapsed")==="true",r=this.w.config.chart.events.legendClick;typeof r=="function"&&r(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var o=this.w.config.legend.markers.onClick;typeof o=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(o(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),t.config.chart.type!=="treemap"&&t.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,n)}}}]),a})(),hP=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w;var t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}return Sn(a,[{key:"createToolbar",value:function(){var e=this,t=this.w,i=function(){return document.createElement("div")},n=i();if(n.setAttribute("class","apexcharts-toolbar"),n.style.top=t.config.chart.toolbar.offsetY+"px",n.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(n),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var r=0;r<this.t.customIcons.length;r++)this.elCustomIcons.push(i());var o=[],s=function(x,S,E){var z=x.toLowerCase();e.t[z]&&t.config.chart.zoom.enabled&&o.push({el:S,icon:typeof e.t[z]=="string"?e.t[z]:E,title:e.localeValues[x],class:"apexcharts-".concat(z,"-icon")})};s("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),s("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var h=function(x){e.t[x]&&t.config.chart[x].enabled&&o.push({el:x==="zoom"?e.elZoom:e.elSelection,icon:typeof e.t[x]=="string"?e.t[x]:x==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:e.localeValues[x==="zoom"?"selectionZoom":"selection"],class:"apexcharts-".concat(x,"-icon")})};h("zoom"),h("selection"),this.t.pan&&t.config.chart.zoom.enabled&&o.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:"apexcharts-pan-icon"}),s("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&o.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var f=0;f<this.elCustomIcons.length;f++)o.push({el:this.elCustomIcons[f],icon:this.t.customIcons[f].icon,title:this.t.customIcons[f].title,index:this.t.customIcons[f].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[f].class});o.forEach((function(x,S){x.index&&At.moveIndexInArray(o,S,x.index)}));for(var y=0;y<o.length;y++)vi.setAttrs(o[y].el,{class:o[y].class,title:o[y].title}),o[y].el.innerHTML=o[y].icon,n.appendChild(o[y].el);this._createHamburgerMenu(n),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),vi.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],i=0;i<t.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=t[i].title,vi.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(t[i].name),title:t[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(i){i.classList.contains("exportSVG")?i.addEventListener("click",e.handleDownload.bind(e,"svg")):i.classList.contains("exportPNG")?i.addEventListener("click",e.handleDownload.bind(e,"png")):i.classList.contains("exportCSV")&&i.addEventListener("click",e.handleDownload.bind(e,"csv"))}));for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls();var i=e==="selection"?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,n=e==="selection"?"selectionEnabled":"zoomEnabled";t.w.globals[n]=!t.w.globals[n],i.classList.contains(t.ctx.toolbar.selectedClass)?i.classList.remove(t.ctx.toolbar.selectedClass):i.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t=e==="pan"?this.elPan:this.elZoom,i=e==="pan"?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(i){i&&i.classList.remove(e.selectedClass)}))}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,i=(this.minX+t)/2,n=(this.maxX+t)/2,r=this._getNewMinXMaxX(i,n);e.globals.disableZoomIn||this.zoomUpdateOptions(r.minX,r.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!(e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,i=this.minX-(t-this.minX),n=this.maxX-(t-this.maxX),r=this._getNewMinXMaxX(i,n);e.globals.disableZoomOut||this.zoomUpdateOptions(r.minX,r.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(e):e,maxX:i?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var i=this.w;if(e!==void 0||t!==void 0){if(!(i.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=i.globals.dataPoints),t-e<2))){var n={min:e,max:t},r=this.getBeforeZoomRange(n);r&&(n=r.xaxis);var o={xaxis:n},s=At.clone(i.globals.initialConfig.yaxis);i.config.chart.group||(o.yaxis=s),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(o,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(n,s)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){typeof this.ev.zoomed=="function"&&(this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t}),this.ctx.events.fireEvent("zoomed",{xaxis:e,yaxis:t}))}},{key:"getBeforeZoomRange",value:function(e,t){var i=null;return typeof this.ev.beforeZoom=="function"&&(i=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),i}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout((function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(e){var t=this.w,i=new Hm(this.ctx);switch(e){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){var i=t.w;if(i.globals.lastXAxis.min=i.globals.initialConfig.xaxis.min,i.globals.lastXAxis.max=i.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),typeof i.config.chart.events.beforeResetZoom=="function"){var n=i.config.chart.events.beforeResetZoom(t,i);n&&t.updateHelpers.revertDefaultAxisMinMax(n)}typeof i.config.chart.events.zoomed=="function"&&t.ctx.toolbar.zoomCallback({min:i.config.xaxis.min,max:i.config.xaxis.max}),i.globals.zoomed=!1;var r=t.ctx.series.emptyCollapsedSeries(At.clone(i.globals.initialSeries));t.updateHelpers._updateSeries(r,i.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),a})(),y8=(function(a){by(t,hP);var e=vy(t);function t(i){var n;return wn(this,t),(n=e.call(this,i)).ctx=i,n.w=i.w,n.dragged=!1,n.graphics=new vi(n.ctx),n.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],n.clientX=0,n.clientY=0,n.startX=0,n.endX=0,n.dragX=0,n.startY=0,n.endY=0,n.dragY=0,n.moveDirection="none",n.debounceTimer=null,n.debounceDelay=100,n.wheelDelay=400,n}return Sn(t,[{key:"init",value:function(i){var n=this,r=i.xyRatios,o=this.w,s=this;this.xyRatios=r,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=o.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new Ds(0,0,o.globals.gridWidth,o.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),o.globals.dom.Paper.add(this.zoomRect),o.globals.dom.Paper.add(this.selectionRect),o.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:o.globals.gridWidth,maxY:o.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):o.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:o.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=o.globals.dom.baseEl.querySelector("".concat(o.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(h){n.hoverArea.addEventListener(h,s.svgMouseEvents.bind(s,r),{capture:!1,passive:!0})})),o.config.chart.zoom.enabled&&o.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",s.mouseWheelEvent.bind(s),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(i,n){var r=this.w,o=this.ctx.toolbar,s=r.globals.zoomEnabled?r.config.chart.zoom.type:r.config.chart.selection.type,h=r.config.chart.toolbar.autoSelected;if(n.shiftKey?(this.shiftWasPressed=!0,o.enableZoomPanFromToolbar(h==="pan"?"zoom":"pan")):this.shiftWasPressed&&(o.enableZoomPanFromToolbar(h),this.shiftWasPressed=!1),n.target){var f,y=n.target.classList;if(n.target.parentNode&&n.target.parentNode!==null&&(f=n.target.parentNode.classList),!(y.contains("apexcharts-legend-marker")||y.contains("apexcharts-legend-text")||f&&f.contains("apexcharts-toolbar"))){if(this.clientX=n.type==="touchmove"||n.type==="touchstart"?n.touches[0].clientX:n.type==="touchend"?n.changedTouches[0].clientX:n.clientX,this.clientY=n.type==="touchmove"||n.type==="touchstart"?n.touches[0].clientY:n.type==="touchend"?n.changedTouches[0].clientY:n.clientY,n.type==="mousedown"&&n.which===1||n.type==="touchstart"){var x=this.gridRect.getBoundingClientRect();this.startX=this.clientX-x.left-r.globals.barPadForNumericAxis,this.startY=this.clientY-x.top,this.dragged=!1,this.w.globals.mousedown=!0}(n.type==="mousemove"&&n.which===1||n.type==="touchmove")&&(this.dragged=!0,r.globals.panEnabled?(r.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:s,xyRatios:i})):(this.w.globals.mousedown&&r.globals.zoomEnabled||this.w.globals.mousedown&&r.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:s}))),n.type!=="mouseup"&&n.type!=="touchend"&&n.type!=="mouseleave"||this.handleMouseUp({zoomtype:s}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(i){var n,r=i.zoomtype,o=i.isResized,s=this.w,h=(n=this.gridRect)===null||n===void 0?void 0:n.getBoundingClientRect();h&&(this.w.globals.mousedown||o)&&(this.endX=this.clientX-h.left-s.globals.barPadForNumericAxis,this.endY=this.clientY-h.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(s.globals.zoomEnabled||s.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:r})),s.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(i){var n=this,r=this.w;i.preventDefault();var o=Date.now();o-r.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(i),r.globals.lastWheelExecution=o),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){o-r.globals.lastWheelExecution>n.wheelDelay&&(n.executeMouseWheelZoom(i),r.globals.lastWheelExecution=o)}),this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(i){var n,r=this.w;this.minX=r.globals.isRangeBar?r.globals.minY:r.globals.minX,this.maxX=r.globals.isRangeBar?r.globals.maxY:r.globals.maxX;var o=(n=this.gridRect)===null||n===void 0?void 0:n.getBoundingClientRect();if(o){var s,h,f,y=(i.clientX-o.left)/o.width,x=this.minX,S=this.maxX,E=S-x;if(i.deltaY<0){var z=x+y*E;h=z-(s=.5*E)/2,f=z+s/2}else h=x-(s=1.5*E)/2,f=S+s/2;if(!r.globals.isRangeBar){h=Math.max(h,r.globals.initialMinX),f=Math.min(f,r.globals.initialMaxX);var D=.01*(r.globals.initialMaxX-r.globals.initialMinX);if(f-h<D){var F=(h+f)/2;h=F-D/2,f=F+D/2}}var U=this._getNewMinXMaxX(h,f);isNaN(U.minX)||isNaN(U.maxX)||this.zoomUpdateOptions(U.minX,U.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var i=this,n=this.w;if(this.selectionRect){var r=this.selectionRect.node.getBoundingClientRect();r.width>0&&r.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(o,s,h,f,y){return y==="l"||y==="r"?o.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):o.circle(0)},updateHandle:function(o,s){return o.center(s[0],s[1])}}).resize().on("resize",(function(){var o=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type;i.handleMouseUp({zoomtype:o,isResized:!0})})))}}},{key:"preselectedSelection",value:function(){var i=this.w,n=this.xyRatios;if(!i.globals.zoomEnabled){if(i.globals.selection!==void 0&&i.globals.selection!==null)this.drawSelectionRect(Ui(Ui({},i.globals.selection),{},{translateX:i.globals.translateX,translateY:i.globals.translateY}));else if(i.config.chart.selection.xaxis.min!==void 0&&i.config.chart.selection.xaxis.max!==void 0){var r=(i.config.chart.selection.xaxis.min-i.globals.minX)/n.xRatio,o=i.globals.gridWidth-(i.globals.maxX-i.config.chart.selection.xaxis.max)/n.xRatio-r;i.globals.isRangeBar&&(r=(i.config.chart.selection.xaxis.min-i.globals.yAxisScale[0].niceMin)/n.invertedYRatio,o=(i.config.chart.selection.xaxis.max-i.config.chart.selection.xaxis.min)/n.invertedYRatio);var s={x:r,y:0,width:o,height:i.globals.gridHeight,translateX:i.globals.translateX,translateY:i.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(s),this.makeSelectionRectDraggable(),typeof i.config.chart.events.selection=="function"&&i.config.chart.events.selection(this.ctx,{xaxis:{min:i.config.chart.selection.xaxis.min,max:i.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(i){var n=i.x,r=i.y,o=i.width,s=i.height,h=i.translateX,f=h===void 0?0:h,y=i.translateY,x=y===void 0?0:y,S=this.w,E=this.zoomRect,z=this.selectionRect;if(this.dragged||S.globals.selection!==null){var D={transform:"translate("+f+", "+x+")"};S.globals.zoomEnabled&&this.dragged&&(o<0&&(o=1),E.attr({x:n,y:r,width:o,height:s,fill:S.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":S.config.chart.zoom.zoomedArea.fill.opacity,stroke:S.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":S.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":S.config.chart.zoom.zoomedArea.stroke.opacity}),vi.setAttrs(E.node,D)),S.globals.selectionEnabled&&(z.attr({x:n,y:r,width:o>0?o:0,height:s>0?s:0,fill:S.config.chart.selection.fill.color,"fill-opacity":S.config.chart.selection.fill.opacity,stroke:S.config.chart.selection.stroke.color,"stroke-width":S.config.chart.selection.stroke.width,"stroke-dasharray":S.config.chart.selection.stroke.dashArray,"stroke-opacity":S.config.chart.selection.stroke.opacity}),vi.setAttrs(z.node,D))}}},{key:"hideSelectionRect",value:function(i){i&&i.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(i){var n=i.context,r=i.zoomtype,o=this.w,s=n,h=this.gridRect.getBoundingClientRect(),f=s.startX-1,y=s.startY,x=!1,S=!1,E=s.clientX-h.left-o.globals.barPadForNumericAxis,z=s.clientY-h.top,D=E-f,F=z-y,U={translateX:o.globals.translateX,translateY:o.globals.translateY};return Math.abs(D+f)>o.globals.gridWidth?D=o.globals.gridWidth-f:E<0&&(D=f),f>E&&(x=!0,D=Math.abs(D)),y>z&&(S=!0,F=Math.abs(F)),U=Ui(Ui({},U=r==="x"?{x:x?f-D:f,y:0,width:D,height:o.globals.gridHeight}:r==="y"?{x:0,y:S?y-F:y,width:o.globals.gridWidth,height:F}:{x:x?f-D:f,y:S?y-F:y,width:D,height:F}),{},{translateX:o.globals.translateX,translateY:o.globals.translateY}),s.drawSelectionRect(U),s.selectionDragging("resizing"),U}},{key:"selectionDragging",value:function(i,n){var r=this,o=this.w;if(n){n.preventDefault();var s=n.detail,h=s.handler,f=s.box,y=f.x,x=f.y;y<this.constraints.x&&(y=this.constraints.x),x<this.constraints.y&&(x=this.constraints.y),f.x2>this.constraints.x2&&(y=this.constraints.x2-f.w),f.y2>this.constraints.y2&&(x=this.constraints.y2-f.h),h.move(y,x);var S=this.xyRatios,E=this.selectionRect,z=0;i==="resizing"&&(z=30);var D=function(U){return parseFloat(E.node.getAttribute(U))},F={x:D("x"),y:D("y"),width:D("width"),height:D("height")};o.globals.selection=F,typeof o.config.chart.events.selection=="function"&&o.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var U,G,Z,ee,ie=r.gridRect.getBoundingClientRect(),le=E.node.getBoundingClientRect();o.globals.isRangeBar?(U=o.globals.yAxisScale[0].niceMin+(le.left-ie.left)*S.invertedYRatio,G=o.globals.yAxisScale[0].niceMin+(le.right-ie.left)*S.invertedYRatio,Z=0,ee=1):(U=o.globals.xAxisScale.niceMin+(le.left-ie.left)*S.xRatio,G=o.globals.xAxisScale.niceMin+(le.right-ie.left)*S.xRatio,Z=o.globals.yAxisScale[0].niceMin+(ie.bottom-le.bottom)*S.yRatio[0],ee=o.globals.yAxisScale[0].niceMax-(le.top-ie.top)*S.yRatio[0]);var J={xaxis:{min:U,max:G},yaxis:{min:Z,max:ee}};o.config.chart.events.selection(r.ctx,J),o.config.chart.brush.enabled&&o.config.chart.events.brushScrolled!==void 0&&o.config.chart.events.brushScrolled(r.ctx,J)}),z))}}},{key:"selectionDrawn",value:function(i){var n,r,o=i.context,s=i.zoomtype,h=this.w,f=o,y=this.xyRatios,x=this.ctx.toolbar,S=h.globals.zoomEnabled?f.zoomRect.node.getBoundingClientRect():f.selectionRect.node.getBoundingClientRect(),E=f.gridRect.getBoundingClientRect(),z=S.left-E.left-h.globals.barPadForNumericAxis,D=S.right-E.left-h.globals.barPadForNumericAxis,F=S.top-E.top,U=S.bottom-E.top;h.globals.isRangeBar?(n=h.globals.yAxisScale[0].niceMin+z*y.invertedYRatio,r=h.globals.yAxisScale[0].niceMin+D*y.invertedYRatio):(n=h.globals.xAxisScale.niceMin+z*y.xRatio,r=h.globals.xAxisScale.niceMin+D*y.xRatio);var G=[],Z=[];if(h.config.yaxis.forEach((function(me,Te){var ye=h.globals.seriesYAxisMap[Te][0],Re=h.globals.yAxisScale[Te].niceMax-y.yRatio[ye]*F,We=h.globals.yAxisScale[Te].niceMax-y.yRatio[ye]*U;G.push(Re),Z.push(We)})),f.dragged&&(f.dragX>10||f.dragY>10)&&n!==r){if(h.globals.zoomEnabled){var ee=At.clone(h.globals.initialConfig.yaxis),ie=At.clone(h.globals.initialConfig.xaxis);if(h.globals.zoomed=!0,h.config.xaxis.convertedCatToNumeric&&(n=Math.floor(n),r=Math.floor(r),n<1&&(n=1,r=h.globals.dataPoints),r-n<2&&(r=n+1)),s!=="xy"&&s!=="x"||(ie={min:n,max:r}),s!=="xy"&&s!=="y"||ee.forEach((function(me,Te){ee[Te].min=Z[Te],ee[Te].max=G[Te]})),x){var le=x.getBeforeZoomRange(ie,ee);le&&(ie=le.xaxis?le.xaxis:ie,ee=le.yaxis?le.yaxis:ee)}var J={xaxis:ie};h.config.chart.group||(J.yaxis=ee),f.ctx.updateHelpers._updateOptions(J,!1,f.w.config.chart.animations.dynamicAnimation.enabled),typeof h.config.chart.events.zoomed=="function"&&x.zoomCallback(ie,ee)}else if(h.globals.selectionEnabled){var re,ae=null;re={min:n,max:r},s!=="xy"&&s!=="y"||(ae=At.clone(h.config.yaxis)).forEach((function(me,Te){ae[Te].min=Z[Te],ae[Te].max=G[Te]})),h.globals.selection=f.selection,typeof h.config.chart.events.selection=="function"&&h.config.chart.events.selection(f.ctx,{xaxis:re,yaxis:ae})}}}},{key:"panDragging",value:function(i){var n=i.context,r=this.w,o=n;if(r.globals.lastClientPosition.x!==void 0){var s=r.globals.lastClientPosition.x-o.clientX,h=r.globals.lastClientPosition.y-o.clientY;Math.abs(s)>Math.abs(h)&&s>0?this.moveDirection="left":Math.abs(s)>Math.abs(h)&&s<0?this.moveDirection="right":Math.abs(h)>Math.abs(s)&&h>0?this.moveDirection="up":Math.abs(h)>Math.abs(s)&&h<0&&(this.moveDirection="down")}r.globals.lastClientPosition={x:o.clientX,y:o.clientY};var f=r.globals.isRangeBar?r.globals.minY:r.globals.minX,y=r.globals.isRangeBar?r.globals.maxY:r.globals.maxX;o.panScrolled(f,y)}},{key:"panScrolled",value:function(i,n){var r=this.w,o=this.xyRatios,s=At.clone(r.globals.initialConfig.yaxis),h=o.xRatio,f=r.globals.minX,y=r.globals.maxX;r.globals.isRangeBar&&(h=o.invertedYRatio,f=r.globals.minY,y=r.globals.maxY),this.moveDirection==="left"?(i=f+r.globals.gridWidth/15*h,n=y+r.globals.gridWidth/15*h):this.moveDirection==="right"&&(i=f-r.globals.gridWidth/15*h,n=y-r.globals.gridWidth/15*h),r.globals.isRangeBar||(i<r.globals.initialMinX||n>r.globals.initialMaxX)&&(i=f,n=y);var x={xaxis:{min:i,max:n}};r.config.chart.group||(x.yaxis=s),this.updateScrolledChart(x,i,n)}},{key:"updateScrolledChart",value:function(i,n,r){var o=this.w;if(this.ctx.updateHelpers._updateOptions(i,!1,!1),typeof o.config.chart.events.scrolled=="function"){var s={xaxis:{min:n,max:r}};o.config.chart.events.scrolled(this.ctx,s),this.ctx.events.fireEvent("scrolled",s)}}}]),t})(),dP=(function(){function a(e){wn(this,a),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return Sn(a,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,i=e.elGrid,n=e.clientX,r=e.clientY,o=this.w,s=i.getBoundingClientRect(),h=s.width,f=s.height,y=h/(o.globals.dataPoints-1),x=f/o.globals.dataPoints,S=this.hasBars();!o.globals.comboCharts&&!S||o.config.xaxis.convertedCatToNumeric||(y=h/o.globals.dataPoints);var E=n-s.left-o.globals.barPadForNumericAxis,z=r-s.top;E<0||z<0||E>h||z>f?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):o.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):o.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var D=Math.round(E/y),F=Math.floor(z/x);S&&!o.config.xaxis.convertedCatToNumeric&&(D=Math.ceil(E/y),D-=1);var U=null,G=null,Z=o.globals.seriesXvalues.map((function(re){return re.filter((function(ae){return At.isNumber(ae)}))})),ee=o.globals.seriesYvalues.map((function(re){return re.filter((function(ae){return At.isNumber(ae)}))}));if(o.globals.isXNumeric){var ie=this.ttCtx.getElGrid().getBoundingClientRect(),le=E*(ie.width/h),J=z*(ie.height/f);U=(G=this.closestInMultiArray(le,J,Z,ee)).index,D=G.j,U!==null&&o.globals.hasNullValues&&(Z=o.globals.seriesXvalues[U],D=(G=this.closestInArray(le,Z)).j)}return o.globals.capturedSeriesIndex=U===null?-1:U,(!D||D<1)&&(D=0),o.globals.isBarHorizontal?o.globals.capturedDataPointIndex=F:o.globals.capturedDataPointIndex=D,{capturedSeries:U,j:o.globals.isBarHorizontal?F:D,hoverX:E,hoverY:z}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,i=0,n=e.map((function(o,s){return o.length>0?s:-1})),r=0;r<n.length;r++)if(n[r]!==-1&&t.globals.collapsedSeriesIndices.indexOf(r)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(r)===-1){i=n[r];break}return i}},{key:"closestInMultiArray",value:function(e,t,i,n){for(var r,o=this.w,s=1/0,h=null,f=null,y=0;y<i.length;y++)if(r=y,o.globals.collapsedSeriesIndices.indexOf(r)===-1&&o.globals.ancillaryCollapsedSeriesIndices.indexOf(r)===-1)for(var x=i[y],S=n[y],E=Math.min(x.length,S.length),z=0;z<E;z++){var D=e-x[z],F=Math.sqrt(D*D);if(!o.globals.allSeriesHasEqualX){var U=t-S[z];F=Math.sqrt(D*D+U*U)}F<s&&(s=F,h=y,f=z)}return{index:h,j:f}}},{key:"closestInArray",value:function(e,t){for(var i=t[0],n=null,r=Math.abs(e-i),o=0;o<t.length;o++){var s=Math.abs(e-t[o]);s<r&&(r=s,n=o)}return{j:n}}},{key:"isXoverlap",value:function(e){var t=[],i=this.w.globals.seriesX.filter((function(r){return r[0]!==void 0}));if(i.length>0)for(var n=0;n<i.length-1;n++)i[n][e]!==void 0&&i[n+1][e]!==void 0&&i[n][e]!==i[n+1][e]&&t.push("unEqual");return t.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,i=0;i<t.length-1;i++)if(t[i].data.length!==t[i+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return oo(e).reduce((function(t,i){return t+i.getBBox().height}),0)}},{key:"getElMarkers",value:function(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");i=oo(i),t&&(i=i.filter((function(r){var o=Number(r.getAttribute("data:realIndex"));return e.w.globals.collapsedSeriesIndices.indexOf(o)===-1}))),i.sort((function(r,o){var s=Number(r.getAttribute("data:realIndex")),h=Number(o.getAttribute("data:realIndex"));return h<s?1:h>s?-1:0}));var n=[];return i.forEach((function(r){n.push(r.querySelector(".apexcharts-marker"))})),n}},{key:"hasMarkers",value:function(e){return this.getElMarkers(e).length>0}},{key:"getPathFromPoint",value:function(e,t){var i=Number(e.getAttribute("cx")),n=Number(e.getAttribute("cy")),r=e.getAttribute("shape");return new vi(this.ctx).getMarkerPath(i,n,r,t)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,i=t.config.markers.hover.size;return i===void 0&&(i=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,i=this.ttCtx;i.allTooltipSeriesGroups.length===0&&(i.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var n=i.allTooltipSeriesGroups,r=0;r<n.length;r++)e==="enable"?(n[r].classList.add("apexcharts-active"),n[r].style.display=t.config.tooltip.items.display):(n[r].classList.remove("apexcharts-active"),n[r].style.display="none")}}]),a})(),_8=(function(){function a(e){wn(this,a),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new dP(e)}return Sn(a,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,i=t===void 0||t,n=e.ttItems,r=e.i,o=r===void 0?0:r,s=e.j,h=s===void 0?null:s,f=e.y1,y=e.y2,x=e.e,S=this.w;S.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:o,j:h,y1:f,y2:y,w:S}):this.toggleActiveInactiveSeries(i,o);var E=this.getValuesToPrint({i:o,j:h});this.printLabels({i:o,j:h,values:E,ttItems:n,shared:i,e:x});var z=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=z.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=z.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,i=this,n=e.i,r=e.j,o=e.values,s=e.ttItems,h=e.shared,f=e.e,y=this.w,x=[],S=function(ie){return y.globals.seriesGoals[ie]&&y.globals.seriesGoals[ie][r]&&Array.isArray(y.globals.seriesGoals[ie][r])},E=o.xVal,z=o.zVal,D=o.xAxisTTVal,F="",U=y.globals.colors[n];r!==null&&y.config.plotOptions.bar.distributed&&(U=y.globals.colors[r]);for(var G=function(ie,le){var J=i.getFormatters(n);F=i.getSeriesName({fn:J.yLbTitleFormatter,index:n,seriesIndex:n,j:r}),y.config.chart.type==="treemap"&&(F=J.yLbTitleFormatter(String(y.config.series[n].data[r].x),{series:y.globals.series,seriesIndex:n,dataPointIndex:r,w:y}));var re=y.config.tooltip.inverseOrder?le:ie;if(y.globals.axisCharts){var ae=function(ye){var Re,We,Le,ht;return y.globals.isRangeData?J.yLbFormatter((Re=y.globals.seriesRangeStart)===null||Re===void 0||(We=Re[ye])===null||We===void 0?void 0:We[r],{series:y.globals.seriesRangeStart,seriesIndex:ye,dataPointIndex:r,w:y})+" - "+J.yLbFormatter((Le=y.globals.seriesRangeEnd)===null||Le===void 0||(ht=Le[ye])===null||ht===void 0?void 0:ht[r],{series:y.globals.seriesRangeEnd,seriesIndex:ye,dataPointIndex:r,w:y}):J.yLbFormatter(y.globals.series[ye][r],{series:y.globals.series,seriesIndex:ye,dataPointIndex:r,w:y})};if(h)J=i.getFormatters(re),F=i.getSeriesName({fn:J.yLbTitleFormatter,index:re,seriesIndex:n,j:r}),U=y.globals.colors[re],t=ae(re),S(re)&&(x=y.globals.seriesGoals[re][r].map((function(ye){return{attrs:ye,val:J.yLbFormatter(ye.value,{seriesIndex:re,dataPointIndex:r,w:y})}})));else{var me,Te=f==null||(me=f.target)===null||me===void 0?void 0:me.getAttribute("fill");Te&&(Te.indexOf("url")!==-1?Te.indexOf("Pattern")!==-1&&(U=y.globals.dom.baseEl.querySelector(Te.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):U=Te),t=ae(n),S(n)&&Array.isArray(y.globals.seriesGoals[n][r])&&(x=y.globals.seriesGoals[n][r].map((function(ye){return{attrs:ye,val:J.yLbFormatter(ye.value,{seriesIndex:n,dataPointIndex:r,w:y})}})))}}r===null&&(t=J.yLbFormatter(y.globals.series[n],Ui(Ui({},y),{},{seriesIndex:n,dataPointIndex:n}))),i.DOMHandling({i:n,t:re,j:r,ttItems:s,values:{val:t,goalVals:x,xVal:E,xAxisTTVal:D,zVal:z},seriesName:F,shared:h,pColor:U})},Z=0,ee=y.globals.series.length-1;Z<y.globals.series.length;Z++,ee--)G(Z,ee)}},{key:"getFormatters",value:function(e){var t,i=this.w,n=i.globals.yLabelFormatters[e];return i.globals.ttVal!==void 0?Array.isArray(i.globals.ttVal)?(n=i.globals.ttVal[e]&&i.globals.ttVal[e].formatter,t=i.globals.ttVal[e]&&i.globals.ttVal[e].title&&i.globals.ttVal[e].title.formatter):(n=i.globals.ttVal.formatter,typeof i.globals.ttVal.title.formatter=="function"&&(t=i.globals.ttVal.title.formatter)):t=i.config.tooltip.y.title.formatter,typeof n!="function"&&(n=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(r){return r}),typeof t!="function"&&(t=function(r){return r?r+": ":""}),{yLbFormatter:n,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,i=e.index,n=e.seriesIndex,r=e.j,o=this.w;return t(String(o.globals.seriesNames[i]),{series:o.globals.series,seriesIndex:n,dataPointIndex:r,w:o})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,i=e.j,n=e.ttItems,r=e.values,o=e.seriesName,s=e.shared,h=e.pColor,f=this.w,y=this.ttCtx,x=r.val,S=r.goalVals,E=r.xVal,z=r.xAxisTTVal,D=r.zVal,F=null;F=n[t].children,f.config.tooltip.fillSeriesColor&&(n[t].style.backgroundColor=h,F[0].style.display="none"),y.showTooltipTitle&&(y.tooltipTitle===null&&(y.tooltipTitle=f.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),y.tooltipTitle.innerHTML=E),y.isXAxisTooltipEnabled&&(y.xaxisTooltipText.innerHTML=z!==""?z:E);var U=n[t].querySelector(".apexcharts-tooltip-text-y-label");U&&(U.innerHTML=o||"");var G=n[t].querySelector(".apexcharts-tooltip-text-y-value");G&&(G.innerHTML=x!==void 0?x:""),F[0]&&F[0].classList.contains("apexcharts-tooltip-marker")&&(f.config.tooltip.marker.fillColors&&Array.isArray(f.config.tooltip.marker.fillColors)&&(h=f.config.tooltip.marker.fillColors[t]),f.config.tooltip.fillSeriesColor?F[0].style.backgroundColor=h:F[0].style.color=h),f.config.tooltip.marker.show||(F[0].style.display="none");var Z=n[t].querySelector(".apexcharts-tooltip-text-goals-label"),ee=n[t].querySelector(".apexcharts-tooltip-text-goals-value");if(S.length&&f.globals.seriesGoals[t]){var ie=function(){var re="<div>",ae="<div>";S.forEach((function(me,Te){re+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(me.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(me.attrs.name,"</div>"),ae+="<div>".concat(me.val,"</div>")})),Z.innerHTML=re+"</div>",ee.innerHTML=ae+"</div>"};s?f.globals.seriesGoals[t][i]&&Array.isArray(f.globals.seriesGoals[t][i])?ie():(Z.innerHTML="",ee.innerHTML=""):ie()}else Z.innerHTML="",ee.innerHTML="";if(D!==null&&(n[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=f.config.tooltip.z.title,n[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=D!==void 0?D:""),s&&F[0]){if(f.config.tooltip.hideEmptySeries){var le=n[t].querySelector(".apexcharts-tooltip-marker"),J=n[t].querySelector(".apexcharts-tooltip-text");parseFloat(x)==0?(le.style.display="none",J.style.display="none"):(le.style.display="block",J.style.display="block")}x==null||f.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||f.globals.collapsedSeriesIndices.indexOf(t)>-1||Array.isArray(y.tConfig.enabledOnSeries)&&y.tConfig.enabledOnSeries.indexOf(t)===-1?F[0].parentNode.style.display="none":F[0].parentNode.style.display=f.config.tooltip.items.display}else Array.isArray(y.tConfig.enabledOnSeries)&&y.tConfig.enabledOnSeries.indexOf(t)===-1&&(F[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(e,t){var i=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(t));n&&(n.classList.add("apexcharts-active"),n.style.display=i.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,i=e.j,n=this.w,r=this.ctx.series.filteredSeriesX(),o="",s="",h=null,f=null,y={series:n.globals.series,seriesIndex:t,dataPointIndex:i,w:n},x=n.globals.ttZFormatter;i===null?f=n.globals.series[t]:n.globals.isXNumeric&&n.config.chart.type!=="treemap"?(o=r[t][i],r[t].length===0&&(o=r[this.tooltipUtil.getFirstActiveXArray(r)][i])):o=new Hw(this.ctx).isFormatXY()?n.config.series[t].data[i]!==void 0?n.config.series[t].data[i].x:"":n.globals.labels[i]!==void 0?n.globals.labels[i]:"";var S=o;return n.globals.isXNumeric&&n.config.xaxis.type==="datetime"?o=new Cy(this.ctx).xLabelFormat(n.globals.ttKeyFormatter,S,S,{i:void 0,dateFormatter:new Io(this.ctx).formatDate,w:this.w}):o=n.globals.isBarHorizontal?n.globals.yLabelFormatters[0](S,y):n.globals.xLabelFormatter(S,y),n.config.tooltip.x.formatter!==void 0&&(o=n.globals.ttKeyFormatter(S,y)),n.globals.seriesZ.length>0&&n.globals.seriesZ[t].length>0&&(h=x(n.globals.seriesZ[t][i],n)),s=typeof n.config.xaxis.tooltip.formatter=="function"?n.globals.xaxisTooltipFormatter(S,y):o,{val:Array.isArray(f)?f.join(" "):f,xVal:Array.isArray(o)?o.join(" "):o,xAxisTTVal:Array.isArray(s)?s.join(" "):s,zVal:h}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,i=e.j,n=e.y1,r=e.y2,o=e.w,s=this.ttCtx.getElTooltip(),h=o.config.tooltip.custom;Array.isArray(h)&&h[t]&&(h=h[t]);var f=h({ctx:this.ctx,series:o.globals.series,seriesIndex:t,dataPointIndex:i,y1:n,y2:r,w:o});typeof f=="string"||typeof f=="number"?s.innerHTML=f:(f instanceof Element||typeof f.nodeName=="string")&&(s.innerHTML="",s.appendChild(f.cloneNode(!0)))}}]),a})(),fP=(function(){function a(e){wn(this,a),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return Sn(a,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=this.ttCtx,n=this.w,r=i.getElXCrosshairs(),o=e-i.xcrosshairsWidth/2,s=n.globals.labels.slice().length;if(t!==null&&(o=n.globals.gridWidth/s*t),r===null||n.globals.isBarHorizontal||(r.setAttribute("x",o),r.setAttribute("x1",o),r.setAttribute("x2",o),r.setAttribute("y2",n.globals.gridHeight),r.classList.add("apexcharts-active")),o<0&&(o=0),o>n.globals.gridWidth&&(o=n.globals.gridWidth),i.isXAxisTooltipEnabled){var h=o;n.config.xaxis.crosshairs.width!=="tickWidth"&&n.config.xaxis.crosshairs.width!=="barWidth"||(h=o+i.xcrosshairsWidth/2),this.moveXAxisTooltip(h)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;t.ycrosshairs!==null&&vi.setAttrs(t.ycrosshairs,{y1:e,y2:e}),t.ycrosshairsHidden!==null&&vi.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;if(i.xaxisTooltip!==null&&i.xcrosshairsWidth!==0){i.xaxisTooltip.classList.add("apexcharts-active");var n=i.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e)){e+=t.globals.translateX;var r;r=new vi(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=r.width+"px",i.xaxisTooltip.style.left=e+"px",i.xaxisTooltip.style.top=n+"px"}}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;i.yaxisTTEls===null&&(i.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var n=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),r=t.globals.translateY+n,o=i.yaxisTTEls[e].getBoundingClientRect(),s=o.height,h=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(h-=o.width),r-=s/2,t.globals.ignoreYAxisIndexes.indexOf(e)===-1&&r>0&&r<t.globals.gridHeight?(i.yaxisTTEls[e].classList.add("apexcharts-active"),i.yaxisTTEls[e].style.top=r+"px",i.yaxisTTEls[e].style.left=h+t.config.yaxis[e].tooltip.offsetX+"px"):i.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=this.w,r=this.ttCtx,o=r.getElTooltip(),s=r.tooltipRect,h=i!==null?parseFloat(i):1,f=parseFloat(e)+h+5,y=parseFloat(t)+h/2;if(f>n.globals.gridWidth/2&&(f=f-s.ttWidth-h-10),f>n.globals.gridWidth-s.ttWidth-10&&(f=n.globals.gridWidth-s.ttWidth),f<-20&&(f=-20),n.config.tooltip.followCursor){var x=r.getElGrid().getBoundingClientRect();(f=r.e.clientX-x.left)>n.globals.gridWidth/2&&(f-=r.tooltipRect.ttWidth),(y=r.e.clientY+n.globals.translateY-x.top)>n.globals.gridHeight/2&&(y-=r.tooltipRect.ttHeight)}else n.globals.isBarHorizontal||s.ttHeight/2+y>n.globals.gridHeight&&(y=n.globals.gridHeight-s.ttHeight+n.globals.translateY);isNaN(f)||(f+=n.globals.translateX,o.style.left=f+"px",o.style.top=y+"px")}},{key:"moveMarkers",value:function(e,t){var i=this.w,n=this.ttCtx;if(i.globals.markers.size[e]>0)for(var r=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),o=0;o<r.length;o++)parseInt(r[o].getAttribute("rel"),10)===t&&(n.marker.resetPointsSize(),n.marker.enlargeCurrentPoint(t,r[o]));else n.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var i,n,r,o,s=this.w,h=this.ttCtx,f=new vi(this.ctx),y=s.globals.pointsArray,x=h.tooltipUtil.getHoverMarkerSize(t),S=s.config.series[t].type;if(!S||S!=="column"&&S!=="candlestick"&&S!=="boxPlot"){r=(i=y[t][e])===null||i===void 0?void 0:i[0],o=((n=y[t][e])===null||n===void 0?void 0:n[1])||0;var E=s.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers path"));if(E&&o<s.globals.gridHeight&&o>0){var z=E.getAttribute("shape"),D=f.getMarkerPath(r,o,z,1.5*x);E.setAttribute("d",D)}this.moveXCrosshairs(r),h.fixedTooltip||this.moveTooltip(r,o,x)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,i=this.ttCtx,n=i.w,r=0,o=0,s=n.globals.pointsArray,h=new zc(this.ctx),f=new vi(this.ctx);t=h.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var y=i.tooltipUtil.getHoverMarkerSize(t);if(s[t]&&(r=s[t][e][0],o=s[t][e][1]),!isNaN(r)){var x=i.tooltipUtil.getAllMarkers();if(x.length)for(var S=0;S<n.globals.series.length;S++){var E=s[S];if(n.globals.comboCharts&&E===void 0&&x.splice(S,0,null),E&&E.length){var z=s[S][e][1],D=void 0;x[S].setAttribute("cx",r);var F=x[S].getAttribute("shape");if(n.config.chart.type==="rangeArea"&&!n.globals.comboCharts){var U=e+n.globals.series[S].length;D=s[S][U][1],z-=Math.abs(z-D)/2}if(z!==null&&!isNaN(z)&&z<n.globals.gridHeight+y&&z+y>0){var G=f.getMarkerPath(r,z,F,y);x[S].setAttribute("d",G)}else x[S].setAttribute("d","")}}this.moveXCrosshairs(r),i.fixedTooltip||this.moveTooltip(r,o||n.globals.gridHeight,y)}}},{key:"moveStickyTooltipOverBars",value:function(e,t){var i=this.w,n=this.ttCtx,r=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length;i.config.chart.stacked&&(r=i.globals.barGroups.length);var o=r>=2&&r%2==0?Math.floor(r/2):Math.floor(r/2)+1;i.globals.isBarHorizontal&&(o=new zc(this.ctx).getActiveConfigSeriesIndex("desc")+1);var s=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(o,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(e,"']"));s||typeof t!="number"||(s=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(t,"'] path[j='").concat(e,"']")));var h=s?parseFloat(s.getAttribute("cx")):0,f=s?parseFloat(s.getAttribute("cy")):0,y=s?parseFloat(s.getAttribute("barWidth")):0,x=n.getElGrid().getBoundingClientRect(),S=s&&(s.classList.contains("apexcharts-candlestick-area")||s.classList.contains("apexcharts-boxPlot-area"));i.globals.isXNumeric?(s&&!S&&(h-=r%2!=0?y/2:0),s&&S&&(h-=y/2)):i.globals.isBarHorizontal||(h=n.xAxisTicksPositions[e-1]+n.dataPointsDividedWidth/2,isNaN(h)&&(h=n.xAxisTicksPositions[e]-n.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?f-=n.tooltipRect.ttHeight:i.config.tooltip.followCursor?f=n.e.clientY-x.top-n.tooltipRect.ttHeight/2:f+n.tooltipRect.ttHeight+15>i.globals.gridHeight&&(f=i.globals.gridHeight),i.globals.isBarHorizontal||this.moveXCrosshairs(h),n.fixedTooltip||this.moveTooltip(h,f||i.globals.gridHeight)}}]),a})(),x8=(function(){function a(e){wn(this,a),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new fP(e)}return Sn(a,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new vi(this.ctx),i=new xg(this.ctx),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");n=oo(n),e.config.chart.stacked&&n.sort((function(x,S){return parseFloat(x.getAttribute("data:realIndex"))-parseFloat(S.getAttribute("data:realIndex"))}));for(var r=0;r<n.length;r++){var o=n[r].querySelector(".apexcharts-series-markers-wrap");if(o!==null){var s=void 0,h="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));e.config.chart.type!=="line"&&e.config.chart.type!=="area"||e.globals.comboCharts||e.config.tooltip.intersect||(h+=" no-pointer-events");var f=i.getMarkerConfig({cssClass:h,seriesIndex:Number(o.getAttribute("data:realIndex"))});(s=t.drawMarker(0,0,f)).node.setAttribute("default-marker-size",0);var y=document.createElementNS(e.globals.SVGNS,"g");y.classList.add("apexcharts-series-markers"),y.appendChild(s.node),o.appendChild(y)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,r=this.w;r.config.chart.type!=="bubble"&&this.newPointSize(e,t);var o=t.getAttribute("cx"),s=t.getAttribute("cy");if(i!==null&&n!==null&&(o=i,s=n),this.tooltipPosition.moveXCrosshairs(o),!this.fixedTooltip){if(r.config.chart.type==="radar"){var h=this.ttCtx.getElGrid().getBoundingClientRect();o=this.ttCtx.e.clientX-h.left}this.tooltipPosition.moveTooltip(o,s,r.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,i=this,n=this.ttCtx,r=e,o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),s=t.config.markers.hover.size,h=0;h<o.length;h++){var f=o[h].getAttribute("rel"),y=o[h].getAttribute("index");if(s===void 0&&(s=t.globals.markers.size[y]+t.config.markers.hover.sizeOffset),r===parseInt(f,10)){i.newPointSize(r,o[h]);var x=o[h].getAttribute("cx"),S=o[h].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(x),n.fixedTooltip||i.tooltipPosition.moveTooltip(x,S,s)}else i.oldPointSize(o[h])}}},{key:"newPointSize",value:function(e,t){var i=this.w,n=i.config.markers.hover.size,r=e===0?t.parentNode.firstChild:t.parentNode.lastChild;if(r.getAttribute("default-marker-size")!=="0"){var o=parseInt(r.getAttribute("index"),10);n===void 0&&(n=i.globals.markers.size[o]+i.config.markers.hover.sizeOffset),n<0&&(n=0);var s=this.ttCtx.tooltipUtil.getPathFromPoint(t,n);t.setAttribute("d",s)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size")),i=this.ttCtx.tooltipUtil.getPathFromPoint(e,t);e.setAttribute("d",i)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var i=parseFloat(e[t].getAttribute("default-marker-size"));if(At.isNumber(i)&&i>0){var n=this.ttCtx.tooltipUtil.getPathFromPoint(e[t],i);e[t].setAttribute("d",n)}else e[t].setAttribute("d","M0,0")}}}]),a})(),v8=(function(){function a(e){wn(this,a),this.w=e.w;var t=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!t.globals.isBarHorizontal&&t.config.chart.type==="rangeBar"&&t.config.plotOptions.bar.rangeBarGroupRows}return Sn(a,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,i=e.opt,n=e.x,r=e.y,o=e.type,s=this.ttCtx,h=this.w;if(t.target.classList.contains("apexcharts-".concat(o,"-rect"))){var f=this.getAttr(t,"i"),y=this.getAttr(t,"j"),x=this.getAttr(t,"cx"),S=this.getAttr(t,"cy"),E=this.getAttr(t,"width"),z=this.getAttr(t,"height");if(s.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:f,j:y,shared:!1,e:t}),h.globals.capturedSeriesIndex=f,h.globals.capturedDataPointIndex=y,n=x+s.tooltipRect.ttWidth/2+E,r=S+s.tooltipRect.ttHeight/2-z/2,s.tooltipPosition.moveXCrosshairs(x+E/2),n>h.globals.gridWidth/2&&(n=x-s.tooltipRect.ttWidth/2+E),s.w.config.tooltip.followCursor){var D=h.globals.dom.elWrap.getBoundingClientRect();n=h.globals.clientX-D.left-(n>h.globals.gridWidth/2?s.tooltipRect.ttWidth:0),r=h.globals.clientY-D.top-(r>h.globals.gridHeight/2?s.tooltipRect.ttHeight:0)}}return{x:n,y:r}}},{key:"handleMarkerTooltip",value:function(e){var t,i,n=e.e,r=e.opt,o=e.x,s=e.y,h=this.w,f=this.ttCtx;if(n.target.classList.contains("apexcharts-marker")){var y=parseInt(r.paths.getAttribute("cx"),10),x=parseInt(r.paths.getAttribute("cy"),10),S=parseFloat(r.paths.getAttribute("val"));if(i=parseInt(r.paths.getAttribute("rel"),10),t=parseInt(r.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,f.intersect){var E=At.findAncestor(r.paths,"apexcharts-series");E&&(t=parseInt(E.getAttribute("data:realIndex"),10))}if(f.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:t,j:i,shared:!f.showOnIntersect&&h.config.tooltip.shared,e:n}),n.type==="mouseup"&&f.markerClick(n,t,i),h.globals.capturedSeriesIndex=t,h.globals.capturedDataPointIndex=i,o=y,s=x+h.globals.translateY-1.4*f.tooltipRect.ttHeight,f.w.config.tooltip.followCursor){var z=f.getElGrid().getBoundingClientRect();s=f.e.clientY+h.globals.translateY-z.top}S<0&&(s=x),f.marker.enlargeCurrentPoint(i,r.paths,o,s)}return{x:o,y:s}}},{key:"handleBarTooltip",value:function(e){var t,i,n=e.e,r=e.opt,o=this.w,s=this.ttCtx,h=s.getElTooltip(),f=0,y=0,x=0,S=this.getBarTooltipXY({e:n,opt:r});if(S.j!==null||S.barHeight!==0||S.barWidth!==0){t=S.i;var E=S.j;if(o.globals.capturedSeriesIndex=t,o.globals.capturedDataPointIndex=E,o.globals.isBarHorizontal&&s.tooltipUtil.hasBars()||!o.config.tooltip.shared?(y=S.x,x=S.y,i=Array.isArray(o.config.stroke.width)?o.config.stroke.width[t]:o.config.stroke.width,f=y):o.globals.comboCharts||o.config.tooltip.shared||(f/=2),isNaN(x)&&(x=o.globals.svgHeight-s.tooltipRect.ttHeight),parseInt(r.paths.parentNode.getAttribute("data:realIndex"),10),y+s.tooltipRect.ttWidth>o.globals.gridWidth?y-=s.tooltipRect.ttWidth:y<0&&(y=0),s.w.config.tooltip.followCursor){var z=s.getElGrid().getBoundingClientRect();x=s.e.clientY-z.top}s.tooltip===null&&(s.tooltip=o.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),o.config.tooltip.shared||(o.globals.comboBarCount>0?s.tooltipPosition.moveXCrosshairs(f+i/2):s.tooltipPosition.moveXCrosshairs(f)),!s.fixedTooltip&&(!o.config.tooltip.shared||o.globals.isBarHorizontal&&s.tooltipUtil.hasBars())&&(x=x+o.globals.translateY-s.tooltipRect.ttHeight/2,h.style.left=y+o.globals.translateX+"px",h.style.top=x+"px")}}},{key:"getBarTooltipXY",value:function(e){var t=this,i=e.e,n=e.opt,r=this.w,o=null,s=this.ttCtx,h=0,f=0,y=0,x=0,S=0,E=i.target.classList;if(E.contains("apexcharts-bar-area")||E.contains("apexcharts-candlestick-area")||E.contains("apexcharts-boxPlot-area")||E.contains("apexcharts-rangebar-area")){var z=i.target,D=z.getBoundingClientRect(),F=n.elGrid.getBoundingClientRect(),U=D.height;S=D.height;var G=D.width,Z=parseInt(z.getAttribute("cx"),10),ee=parseInt(z.getAttribute("cy"),10);x=parseFloat(z.getAttribute("barWidth"));var ie=i.type==="touchmove"?i.touches[0].clientX:i.clientX;o=parseInt(z.getAttribute("j"),10),h=parseInt(z.parentNode.getAttribute("rel"),10)-1;var le=z.getAttribute("data-range-y1"),J=z.getAttribute("data-range-y2");r.globals.comboCharts&&(h=parseInt(z.parentNode.getAttribute("data:realIndex"),10));var re=function(me){return r.globals.isXNumeric?Z-G/2:t.isVerticalGroupedRangeBar?Z+G/2:Z-s.dataPointsDividedWidth+G/2},ae=function(){return ee-s.dataPointsDividedHeight+U/2-s.tooltipRect.ttHeight/2};s.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:h,j:o,y1:le?parseInt(le,10):null,y2:J?parseInt(J,10):null,shared:!s.showOnIntersect&&r.config.tooltip.shared,e:i}),r.config.tooltip.followCursor?r.globals.isBarHorizontal?(f=ie-F.left+15,y=ae()):(f=re(),y=i.clientY-F.top-s.tooltipRect.ttHeight/2-15):r.globals.isBarHorizontal?((f=Z)<s.xyRatios.baseLineInvertedY&&(f=Z-s.tooltipRect.ttWidth),y=ae()):(f=re(),y=ee)}return{x:f,y,barHeight:S,barWidth:x,i:h,j:o}}}]),a})(),b8=(function(){function a(e){wn(this,a),this.w=e.w,this.ttCtx=e}return Sn(a,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,i=e.config.xaxis.position==="bottom";t.xaxisOffY=i?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var n=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",r=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+e.config.tooltip.theme),r.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,i=0;i<e.config.yaxis.length;i++){var n=e.config.yaxis[i].opposite||e.config.yaxis[i].crosshairs.opposite;t.yaxisOffX=n?e.globals.gridWidth+1:1;var r="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,n?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),o=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))===null&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+e.config.tooltip.theme),o.appendChild(t.yaxisTooltip),i===0&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[i]=document.createElement("div"),t.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[i]))}}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,i=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var n=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(n!==null&&e.config.xaxis.crosshairs.width==="barWidth"){var r=parseFloat(n.getAttribute("barWidth"));t.xcrosshairsWidth=r}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var s=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/s}else if(e.config.xaxis.crosshairs.width==="barWidth"){var h=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(h!==null){var f=parseFloat(h.getAttribute("barWidth"));t.xcrosshairsWidth=f}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),i!==null&&t.xcrosshairsWidth>0&&i.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,i){var n=this.ttCtx,r=this.w,o=r.globals,s=o.seriesYAxisMap[e];if(n.yaxisTooltips[e]&&s.length>0){var h=o.yLabelFormatters[e],f=n.getElGrid().getBoundingClientRect(),y=s[0],x=0;i.yRatio.length>1&&(x=y);var S=(t-f.top)*i.yRatio[x],E=o.maxYArr[y]-o.minYArr[y],z=o.minYArr[y]+(E-S);r.config.yaxis[e].reversed&&(z=o.maxYArr[y]-(E-S)),n.tooltipPosition.moveYCrosshairs(t-f.top),n.yaxisTooltipText[e].innerHTML=h(z),n.tooltipPosition.moveYAxisTooltip(e)}}}]),a})(),qA=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w;var t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new dP(this),this.tooltipLabels=new _8(this),this.tooltipPosition=new fP(this),this.marker=new x8(this),this.intersect=new v8(this),this.axesTooltip=new b8(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Sn(a,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((function(o,s){return!!(o.show&&o.tooltip.enabled&&t.globals.axisCharts)})),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&i.classList.add(t.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme||"light")),t.globals.dom.elWrap.appendChild(i),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var n=new hy(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&t.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),t.config.markers.size!==0&&t.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var r=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(r=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(r),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,i=this.w,n=[],r=this.getElTooltip(),o=function(h){var f=document.createElement("div");f.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(h)),f.style.order=i.config.tooltip.inverseOrder?e-h:h+1;var y=document.createElement("span");y.classList.add("apexcharts-tooltip-marker"),i.config.tooltip.fillSeriesColor?y.style.backgroundColor=i.globals.colors[h]:y.style.color=i.globals.colors[h];var x=i.config.markers.shape,S=x;Array.isArray(x)&&(S=x[h]),y.setAttribute("shape",S),f.appendChild(y);var E=document.createElement("div");E.classList.add("apexcharts-tooltip-text"),E.style.fontFamily=t.tConfig.style.fontFamily||i.config.chart.fontFamily,E.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach((function(z){var D=document.createElement("div");D.classList.add("apexcharts-tooltip-".concat(z,"-group"));var F=document.createElement("span");F.classList.add("apexcharts-tooltip-text-".concat(z,"-label")),D.appendChild(F);var U=document.createElement("span");U.classList.add("apexcharts-tooltip-text-".concat(z,"-value")),D.appendChild(U),E.appendChild(D)})),f.appendChild(E),r.appendChild(f),n.push(f)},s=0;s<e;s++)o(s);return n}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,i=this.getElTooltip(),n=!(t!=="bar"&&t!=="candlestick"&&t!=="boxPlot"&&t!=="rangeBar"),r=t==="area"||t==="line"||t==="scatter"||t==="bubble"||t==="radar",o=e.globals.dom.Paper.node,s=this.getElGrid();s&&(this.seriesBound=s.getBoundingClientRect());var h,f=[],y=[],x={hoverArea:o,elGrid:s,tooltipEl:i,tooltipY:f,tooltipX:y,ttItems:this.ttItems};if(e.globals.axisCharts&&(r?h=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):n?h=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):t!=="heatmap"&&t!=="treemap"||(h=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),h&&h.length))for(var S=0;S<h.length;S++)f.push(h[S].getAttribute("cy")),y.push(h[S].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||n&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([o],x);else if(n&&!e.globals.comboCharts||r&&this.showOnIntersect)this.addDatapointEventsListeners(x);else if(!e.globals.axisCharts||t==="heatmap"||t==="treemap"){var E=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(E,x)}if(this.showOnIntersect){var z=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");z.length>0&&this.addPathsEventListeners(z,x),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(x)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),i=t.getBoundingClientRect(),n=i.width+10,r=i.height+10,o=this.tConfig.fixed.offsetX,s=this.tConfig.fixed.offsetY,h=this.tConfig.fixed.position.toLowerCase();return h.indexOf("right")>-1&&(o=o+e.globals.svgWidth-n+10),h.indexOf("bottom")>-1&&(s=s+e.globals.svgHeight-r-10),t.style.left=o+"px",t.style.top=s+"px",{x:o,y:s,ttWidth:n,ttHeight:r}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var i=this,n=function(o){var s={paths:e[o],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(h){return e[o].addEventListener(h,i.onSeriesHover.bind(i,s),{capture:!1,passive:!0})}))},r=0;r<e.length;r++)n(r)}},{key:"onSeriesHover",value:function(e,t){var i=this,n=Date.now()-this.lastHoverTime;n>=20?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){i.seriesHover(e,t)}),20-n))}},{key:"seriesHover",value:function(e,t){var i=this;this.lastHoverTime=Date.now();var n=[],r=this.w;r.config.chart.group&&(n=this.ctx.getGroupedCharts()),r.globals.axisCharts&&(r.globals.minX===-1/0&&r.globals.maxX===1/0||r.globals.dataPoints===0)||(n.length?n.forEach((function(o){var s=i.getElTooltip(o),h={paths:e.paths,tooltipEl:s,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:o.w.globals.tooltip.ttItems};o.w.globals.minX===i.w.globals.minX&&o.w.globals.maxX===i.w.globals.maxX&&o.w.globals.tooltip.seriesHoverByContext({chartCtx:o,ttCtx:o.w.globals.tooltip,opt:h,e:t})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,i=e.ttCtx,n=e.opt,r=e.e,o=t.w,s=this.getElTooltip(t);s&&(i.tooltipRect={x:0,y:0,ttWidth:s.getBoundingClientRect().width,ttHeight:s.getBoundingClientRect().height},i.e=r,i.tooltipUtil.hasBars()&&!o.globals.comboCharts&&!i.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new zc(t).toggleSeriesOnHover(r,r.target.parentNode),o.globals.axisCharts?i.axisChartsTooltips({e:r,opt:n,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:r,opt:n,tooltipRect:i.tooltipRect}),i.fixedTooltip&&i.drawFixedTooltipRect())}},{key:"axisChartsTooltips",value:function(e){var t,i,n=e.e,r=e.opt,o=this.w,s=r.elGrid.getBoundingClientRect(),h=n.type==="touchmove"?n.touches[0].clientX:n.clientX,f=n.type==="touchmove"?n.touches[0].clientY:n.clientY;if(this.clientY=f,this.clientX=h,o.globals.capturedSeriesIndex=-1,o.globals.capturedDataPointIndex=-1,f<s.top||f>s.top+s.height)this.handleMouseOut(r);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!o.config.tooltip.shared){var y=parseInt(r.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(y)<0)return void this.handleMouseOut(r)}var x=this.getElTooltip(),S=this.getElXCrosshairs(),E=[];o.config.chart.group&&(E=this.ctx.getSyncedCharts());var z=o.globals.xyCharts||o.config.chart.type==="bar"&&!o.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||o.globals.comboCharts&&this.tooltipUtil.hasBars();if(n.type==="mousemove"||n.type==="touchmove"||n.type==="mouseup"){if(o.globals.collapsedSeries.length+o.globals.ancillaryCollapsedSeries.length===o.globals.series.length)return;S!==null&&S.classList.add("apexcharts-active");var D=this.yaxisTooltips.filter((function(G){return G===!0}));if(this.ycrosshairs!==null&&D.length&&this.ycrosshairs.classList.add("apexcharts-active"),z&&!this.showOnIntersect||E.length>1)this.handleStickyTooltip(n,h,f,r);else if(o.config.chart.type==="heatmap"||o.config.chart.type==="treemap"){var F=this.intersect.handleHeatTreeTooltip({e:n,opt:r,x:t,y:i,type:o.config.chart.type});t=F.x,i=F.y,x.style.left=t+"px",x.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:n,opt:r}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:n,opt:r,x:t,y:i});if(this.yaxisTooltips.length)for(var U=0;U<o.config.yaxis.length;U++)this.axesTooltip.drawYaxisTooltipText(U,f,this.xyRatios);o.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),r.tooltipEl.classList.add("apexcharts-active")}else n.type!=="mouseout"&&n.type!=="touchend"||this.handleMouseOut(r)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,i=e.opt,n=e.tooltipRect,r=this.w,o=i.paths.getAttribute("rel"),s=this.getElTooltip(),h=r.globals.dom.elWrap.getBoundingClientRect();if(t.type==="mousemove"||t.type==="touchmove"){r.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),s.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(o,10)-1,shared:!1});var f=r.globals.clientX-h.left-n.ttWidth/2,y=r.globals.clientY-h.top-n.ttHeight-10;if(s.style.left=f+"px",s.style.top=y+"px",r.config.legend.tooltipHoverFormatter){var x=o-1,S=(0,r.config.legend.tooltipHoverFormatter)(this.legendLabels[x].getAttribute("data:default-text"),{seriesIndex:x,dataPointIndex:x,w:r});this.legendLabels[x].innerHTML=S}}else t.type!=="mouseout"&&t.type!=="touchend"||(s.classList.remove("apexcharts-active"),r.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),r.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(E){var z=E.getAttribute("data:default-text");E.innerHTML=decodeURIComponent(z)})))}},{key:"handleStickyTooltip",value:function(e,t,i,n){var r=this.w,o=this.tooltipUtil.getNearestValues({context:this,hoverArea:n.hoverArea,elGrid:n.elGrid,clientX:t,clientY:i}),s=o.j,h=o.capturedSeries;r.globals.collapsedSeriesIndices.includes(h)&&(h=null);var f=n.elGrid.getBoundingClientRect();if(o.hoverX<0||o.hoverX>f.width)this.handleMouseOut(n);else if(h!==null)this.handleStickyCapturedSeries(e,h,n,s);else if(this.tooltipUtil.isXoverlap(s)||r.globals.isBarHorizontal){var y=r.globals.series.findIndex((function(x,S){return!r.globals.collapsedSeriesIndices.includes(S)}));this.create(e,this,y,s,n.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(e,t,i,n){var r=this.w;if(!this.tConfig.shared&&r.globals.series[t][n]===null)return void this.handleMouseOut(i);if(r.globals.series[t][n]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(n)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,n,i.ttItems):this.create(e,this,t,n,i.ttItems,!1);else if(this.tooltipUtil.isXoverlap(n)){var o=r.globals.series.findIndex((function(s,h){return!r.globals.collapsedSeriesIndices.includes(h)}));this.create(e,this,o,n,i.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new vi(this.ctx),i=e.globals.dom.Paper.find(".apexcharts-bar-area"),n=0;n<i.length;n++)t.pathMouseLeave(i[n])}},{key:"handleMouseOut",value:function(e){var t=this.w,i=this.getElXCrosshairs();if(t.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),t.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),i!==null&&i.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var n=0;n<this.yaxisTTEls.length;n++)this.yaxisTTEls[n].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(r){var o=r.getAttribute("data:default-text");r.innerHTML=decodeURIComponent(o)}))}},{key:"markerClick",value:function(e,t,i){var n=this.w;typeof n.config.chart.events.markerClick=="function"&&n.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:n}])}},{key:"create",value:function(e,t,i,n,r){var o,s,h,f,y,x,S,E,z,D,F,U,G,Z,ee,ie,le=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,J=this.w,re=t;e.type==="mouseup"&&this.markerClick(e,i,n),le===null&&(le=this.tConfig.shared);var ae=this.tooltipUtil.hasMarkers(i),me=this.tooltipUtil.getElBars(),Te=function(){J.globals.markers.largestSize>0?re.marker.enlargePoints(n):re.tooltipPosition.moveDynamicPointsOnHover(n)};if(J.config.legend.tooltipHoverFormatter){var ye=J.config.legend.tooltipHoverFormatter,Re=Array.from(this.legendLabels);Re.forEach((function(xi){var Lt=xi.getAttribute("data:default-text");xi.innerHTML=decodeURIComponent(Lt)}));for(var We=0;We<Re.length;We++){var Le=Re[We],ht=parseInt(Le.getAttribute("i"),10),$e=decodeURIComponent(Le.getAttribute("data:default-text")),pt=ye($e,{seriesIndex:le?ht:i,dataPointIndex:n,w:J});if(le)Le.innerHTML=J.globals.collapsedSeriesIndices.indexOf(ht)<0?pt:$e;else if(Le.innerHTML=ht===i?pt:$e,i===ht)break}}var Dt=Ui(Ui({ttItems:r,i,j:n},((o=J.globals.seriesRange)===null||o===void 0||(s=o[i])===null||s===void 0||(h=s[n])===null||h===void 0||(f=h.y[0])===null||f===void 0?void 0:f.y1)!==void 0&&{y1:(y=J.globals.seriesRange)===null||y===void 0||(x=y[i])===null||x===void 0||(S=x[n])===null||S===void 0||(E=S.y[0])===null||E===void 0?void 0:E.y1}),((z=J.globals.seriesRange)===null||z===void 0||(D=z[i])===null||D===void 0||(F=D[n])===null||F===void 0||(U=F.y[0])===null||U===void 0?void 0:U.y2)!==void 0&&{y2:(G=J.globals.seriesRange)===null||G===void 0||(Z=G[i])===null||Z===void 0||(ee=Z[n])===null||ee===void 0||(ie=ee.y[0])===null||ie===void 0?void 0:ie.y2});if(le){if(re.tooltipLabels.drawSeriesTexts(Ui(Ui({},Dt),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),ae)Te();else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(me),this.barSeriesHeight>0)){var qe=new vi(this.ctx),Nt=J.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(n,"']"));this.deactivateHoverFilter(),re.tooltipUtil.getAllMarkers(!0).length&&!this.barSeriesHeight&&Te(),re.tooltipPosition.moveStickyTooltipOverBars(n,i);for(var ni=0;ni<Nt.length;ni++)qe.pathMouseEnter(Nt[ni])}}else re.tooltipLabels.drawSeriesTexts(Ui({shared:!1},Dt)),this.tooltipUtil.hasBars()&&re.tooltipPosition.moveStickyTooltipOverBars(n,i),ae&&re.tooltipPosition.moveMarkers(i,n)}}]),a})(),w8=(function(){function a(e){wn(this,a),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Sn(a,[{key:"handleBarDataLabels",value:function(e){var t,i,n=e.x,r=e.y,o=e.y1,s=e.y2,h=e.i,f=e.j,y=e.realIndex,x=e.columnGroupIndex,S=e.series,E=e.barHeight,z=e.barWidth,D=e.barXPosition,F=e.barYPosition,U=e.visibleSeries,G=this.w,Z=new vi(this.barCtx.ctx),ee=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[y]:this.barCtx.strokeWidth;G.globals.isXNumeric&&!G.globals.isBarHorizontal?(t=n+parseFloat(z*(U+1)),i=r+parseFloat(E*(U+1))-ee):(t=n+parseFloat(z*U),i=r+parseFloat(E*U));var ie,le=null,J=n,re=r,ae={},me=G.config.dataLabels,Te=this.barCtx.barOptions.dataLabels,ye=this.barCtx.barOptions.dataLabels.total;F!==void 0&&this.barCtx.isRangeBar&&(i=F,re=F),D!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(t=D,J=D);var Re=me.offsetX,We=me.offsetY,Le={width:0,height:0};if(G.config.dataLabels.enabled){var ht=G.globals.series[h][f];Le=Z.getTextRects(G.config.dataLabels.formatter?G.config.dataLabels.formatter(ht,Ui(Ui({},G),{},{seriesIndex:h,dataPointIndex:f,w:G})):G.globals.yLabelFormatters[0](ht),parseFloat(me.style.fontSize))}var $e={x:n,y:r,i:h,j:f,realIndex:y,columnGroupIndex:x,bcx:t,bcy:i,barHeight:E,barWidth:z,textRects:Le,strokeWidth:ee,dataLabelsX:J,dataLabelsY:re,dataLabelsConfig:me,barDataLabelsConfig:Te,barTotalDataLabelsConfig:ye,offX:Re,offY:We};return ae=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition($e):this.calculateColumnsDataLabelsPosition($e),ie=this.drawCalculatedDataLabels({x:ae.dataLabelsX,y:ae.dataLabelsY,val:this.barCtx.isRangeBar?[o,s]:G.config.chart.stackType==="100%"?S[y][f]:G.globals.series[y][f],i:y,j:f,barWidth:z,barHeight:E,textRects:Le,dataLabelsConfig:me}),G.config.chart.stacked&&ye.enabled&&(le=this.drawTotalDataLabels({x:ae.totalDataLabelsX,y:ae.totalDataLabelsY,barWidth:z,barHeight:E,realIndex:y,textAnchor:ae.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:y,j:f}),dataLabelsConfig:me,barTotalDataLabelsConfig:ye})),{dataLabelsPos:ae,dataLabels:ie,totalDataLabels:le}}},{key:"getStackedTotalDataLabel",value:function(e){var t=e.realIndex,i=e.j,n=this.w,r=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(r=this.totalFormatter(r,Ui(Ui({},n),{},{seriesIndex:t,dataPointIndex:i,w:n}))),r}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t=this,i=this.w,n=e.i,r=e.j,o=e.realIndex;e.columnGroupIndex;var s,h,f=e.y,y=e.bcx,x=e.barWidth,S=e.barHeight,E=e.textRects,z=e.dataLabelsX,D=e.dataLabelsY,F=e.dataLabelsConfig,U=e.barDataLabelsConfig,G=e.barTotalDataLabelsConfig,Z=e.strokeWidth,ee=e.offX,ie=e.offY,le=y;S=Math.abs(S);var J=i.config.plotOptions.bar.dataLabels.orientation==="vertical",re=this.barCtx.barHelpers.getZeroValueEncounters({i:n,j:r}).zeroEncounters;y-=Z/2;var ae=i.globals.gridWidth/i.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?z+=x/2:(z=i.globals.isXNumeric?y-x/2+ee:y-ae+x/2+ee,!i.config.chart.stacked&&re>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(z-=x*re)),J&&(z=z+E.height/2-Z/2-2);var me=i.globals.series[n][r]<0,Te=f;switch(this.barCtx.isReversed&&(Te=f+(me?S:-S)),U.position){case"center":D=J?me?Te-S/2+ie:Te+S/2-ie:me?Te-S/2+E.height/2+ie:Te+S/2+E.height/2-ie;break;case"bottom":D=J?me?Te-S+ie:Te+S-ie:me?Te-S+E.height+Z+ie:Te+S-E.height/2+Z-ie;break;case"top":D=J?me?Te+ie:Te-ie:me?Te-E.height/2-ie:Te+E.height+ie}var ye=Te;if(i.globals.seriesGroups.forEach((function(Le){var ht;(ht=t.barCtx[Le.join(",")])===null||ht===void 0||ht.prevY.forEach((function($e){ye=me?Math.max($e[r],ye):Math.min($e[r],ye)}))})),this.barCtx.lastActiveBarSerieIndex===o&&G.enabled){var Re=new vi(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:r}),F.fontSize);s=me?ye-Re.height/2-ie-G.offsetY+18:ye+Re.height+ie+G.offsetY-18;var We=ae;h=le+(i.globals.isXNumeric?-x*i.globals.barGroups.length/2:i.globals.barGroups.length*x/2-(i.globals.barGroups.length-1)*x-We)+G.offsetX}return i.config.chart.stacked||(D<0?D=0+Z:D+E.height/3>i.globals.gridHeight&&(D=i.globals.gridHeight-Z)),{bcx:y,bcy:f,dataLabelsX:z,dataLabelsY:D,totalDataLabelsX:h,totalDataLabelsY:s,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this,i=this.w,n=e.x,r=e.i,o=e.j,s=e.realIndex,h=e.bcy,f=e.barHeight,y=e.barWidth,x=e.textRects,S=e.dataLabelsX,E=e.strokeWidth,z=e.dataLabelsConfig,D=e.barDataLabelsConfig,F=e.barTotalDataLabelsConfig,U=e.offX,G=e.offY,Z=i.globals.gridHeight/i.globals.dataPoints,ee=this.barCtx.barHelpers.getZeroValueEncounters({i:r,j:o}).zeroEncounters;y=Math.abs(y);var ie,le,J=h-(this.barCtx.isRangeBar?0:Z)+f/2+x.height/2+G-3;!i.config.chart.stacked&&ee>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(J-=f*ee);var re="start",ae=i.globals.series[r][o]<0,me=n;switch(this.barCtx.isReversed&&(me=n+(ae?-y:y),re=ae?"start":"end"),D.position){case"center":S=ae?me+y/2-U:Math.max(x.width/2,me-y/2)+U;break;case"bottom":S=ae?me+y-E-U:me-y+E+U;break;case"top":S=ae?me-E-U:me-E+U}var Te=me;if(i.globals.seriesGroups.forEach((function(Re){var We;(We=t.barCtx[Re.join(",")])===null||We===void 0||We.prevX.forEach((function(Le){Te=ae?Math.min(Le[o],Te):Math.max(Le[o],Te)}))})),this.barCtx.lastActiveBarSerieIndex===s&&F.enabled){var ye=new vi(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:s,j:o}),z.fontSize);ae?(ie=Te-E-U-F.offsetX,re="end"):ie=Te+U+F.offsetX+(this.barCtx.isReversed?-(y+E):E),le=J-x.height/2+ye.height/2+F.offsetY+E,i.globals.barGroups.length>1&&(le-=i.globals.barGroups.length/2*(f/2))}return i.config.chart.stacked||(z.textAnchor==="start"?S-x.width<0?S=ae?x.width+E:E:S+x.width>i.globals.gridWidth&&(S=ae?i.globals.gridWidth-E:i.globals.gridWidth-x.width-E):z.textAnchor==="middle"?S-x.width/2<0?S=x.width/2+E:S+x.width/2>i.globals.gridWidth&&(S=i.globals.gridWidth-x.width/2-E):z.textAnchor==="end"&&(S<1?S=x.width+E:S+1>i.globals.gridWidth&&(S=i.globals.gridWidth-x.width-E))),{bcx:n,bcy:h,dataLabelsX:S,dataLabelsY:J,totalDataLabelsX:ie,totalDataLabelsY:le,totalDataLabelsAnchor:re}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,i=e.y,n=e.val,r=e.i,o=e.j,s=e.textRects,h=e.barHeight,f=e.barWidth,y=e.dataLabelsConfig,x=this.w,S="rotate(0)";x.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(S="rotate(-90, ".concat(t,", ").concat(i,")"));var E=new hg(this.barCtx.ctx),z=new vi(this.barCtx.ctx),D=y.formatter,F=null,U=x.globals.collapsedSeriesIndices.indexOf(r)>-1;if(y.enabled&&!U){F=z.group({class:"apexcharts-data-labels",transform:S});var G="";n!==void 0&&(G=D(n,Ui(Ui({},x),{},{seriesIndex:r,dataPointIndex:o,w:x}))),!n&&x.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(G="");var Z=x.globals.series[r][o]<0,ee=x.config.plotOptions.bar.dataLabels.position;x.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(ee==="top"&&(y.textAnchor=Z?"end":"start"),ee==="center"&&(y.textAnchor="middle"),ee==="bottom"&&(y.textAnchor=Z?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&f<z.getTextRects(G,parseFloat(y.style.fontSize)).width&&(G=""),x.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?s.width/1.6>Math.abs(f)&&(G=""):s.height/1.6>Math.abs(h)&&(G=""));var ie=Ui({},y);this.barCtx.isHorizontal&&n<0&&(y.textAnchor==="start"?ie.textAnchor="end":y.textAnchor==="end"&&(ie.textAnchor="start")),E.plotDataLabelsText({x:t,y:i,text:G,i:r,j:o,parent:F,dataLabelsConfig:ie,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return F}},{key:"drawTotalDataLabels",value:function(e){var t=e.x,i=e.y,n=e.val,r=e.realIndex,o=e.textAnchor,s=e.barTotalDataLabelsConfig;this.w;var h,f=new vi(this.barCtx.ctx);return s.enabled&&t!==void 0&&i!==void 0&&this.barCtx.lastActiveBarSerieIndex===r&&(h=f.drawText({x:t,y:i,foreColor:s.style.color,text:n,textAnchor:o,fontFamily:s.style.fontFamily,fontSize:s.style.fontSize,fontWeight:s.style.fontWeight})),h}}]),a})(),S8=(function(){function a(e){wn(this,a),this.w=e.w,this.barCtx=e}return Sn(a,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<e.length;i++)if(e[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[i].length),t.globals.isXNumeric)for(var n=0;n<e[i].length;n++)t.globals.seriesX[i][n]>t.globals.minX&&t.globals.seriesX[i][n]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(t.globals.series),At.isSafari()&&(this.arrBorderRadius=this.arrBorderRadius.map((function(r){return r.map((function(o){return"none"}))}))),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(e){var t,i,n,r,o,s,h,f,y=this.w,x=y.globals.dataPoints;this.barCtx.isRangeBar&&(x=y.globals.labels.length);var S=this.barCtx.seriesLen;if(y.config.plotOptions.bar.rangeBarGroupRows&&(S=1),this.barCtx.isHorizontal)o=(n=y.globals.gridHeight/x)/S,y.globals.isXNumeric&&(o=(n=y.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),o=o*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(o=parseInt(this.barCtx.barOptions.barHeight,10)),f=this.barCtx.baseLineInvertedY+y.globals.padHorizontal+(this.barCtx.isReversed?y.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(f=y.globals.gridWidth/2),i=(n-o*this.barCtx.seriesLen)/2;else{if(r=y.globals.gridWidth/this.barCtx.visibleItems,y.config.xaxis.convertedCatToNumeric&&(r=y.globals.gridWidth/y.globals.dataPoints),s=r/S*parseInt(this.barCtx.barOptions.columnWidth,10)/100,y.globals.isXNumeric){var E=this.barCtx.xRatio;y.globals.minXDiff&&y.globals.minXDiff!==.5&&y.globals.minXDiff/E>0&&(r=y.globals.minXDiff/E),(s=r/S*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(s=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(s=parseInt(this.barCtx.barOptions.columnWidth,10)),h=y.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?y.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),y.globals.isXNumeric?t=this.barCtx.getBarXForNumericXAxis({x:t,j:0,realIndex:e,barWidth:s}).x:t=y.globals.padHorizontal+At.noExponents(r-s*this.barCtx.seriesLen)/2}return y.globals.barHeight=o,y.globals.barWidth=s,{x:t,y:i,yDivision:n,xDivision:r,barHeight:o,barWidth:s,zeroH:h,zeroW:f}}},{key:"initializeStackedPrevVars",value:function(e){e.w.globals.seriesGroups.forEach((function(t){e[t]||(e[t]={}),e[t].prevY=[],e[t].prevX=[],e[t].prevYF=[],e[t].prevXF=[],e[t].prevYVal=[],e[t].prevXVal=[]}))}},{key:"initializeStackedXYVars",value:function(e){e.w.globals.seriesGroups.forEach((function(t){e[t]||(e[t]={}),e[t].xArrj=[],e[t].xArrjF=[],e[t].xArrjVal=[],e[t].yArrj=[],e[t].yArrjF=[],e[t].yArrjVal=[]}))}},{key:"getPathFillColor",value:function(e,t,i,n){var r,o,s,h,f=this.w,y=this.barCtx.ctx.fill,x=null,S=this.barCtx.barOptions.distributed?i:t,E=!1;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(z){e[t][i]>=z.from&&e[t][i]<=z.to&&(x=z.color,E=!0)})),{color:y.fillPath({seriesNumber:this.barCtx.barOptions.distributed?S:n,dataPointIndex:i,color:x,value:e[t][i],fillConfig:(r=f.config.series[t].data[i])===null||r===void 0?void 0:r.fill,fillType:(o=f.config.series[t].data[i])!==null&&o!==void 0&&(s=o.fill)!==null&&s!==void 0&&s.type?(h=f.config.series[t].data[i])===null||h===void 0?void 0:h.fill.type:Array.isArray(f.config.fill.type)?f.config.fill.type[n]:f.config.fill.type}),useRangeColor:E}}},{key:"getStrokeWidth",value:function(e,t,i){var n=0,r=this.w;return this.barCtx.series[e][t]===void 0||this.barCtx.series[e][t]===null||r.config.chart.type==="bar"&&!this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,r.config.stroke.show&&(this.barCtx.isNullValue||(n=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),n}},{key:"createBorderRadiusArr",value:function(e){var t,i=this.w,n=!this.w.config.chart.stacked||i.config.plotOptions.bar.borderRadius<=0,r=e.length,o=0|((t=e[0])===null||t===void 0?void 0:t.length),s=Array.from({length:r},(function(){return Array(o).fill(n?"top":"none")}));if(n)return s;for(var h=0;h<o;h++){for(var f=[],y=[],x=0,S=0;S<r;S++){var E=e[S][h];E>0?(f.push(S),x++):E<0&&(y.push(S),x++)}if(f.length>0&&y.length===0)if(f.length===1)s[f[0]][h]="both";else{var z,D=f[0],F=f[f.length-1],U=wm(f);try{for(U.s();!(z=U.n()).done;){var G=z.value;s[G][h]=G===D?"bottom":G===F?"top":"none"}}catch(ht){U.e(ht)}finally{U.f()}}else if(y.length>0&&f.length===0)if(y.length===1)s[y[0]][h]="both";else{var Z,ee=Math.max.apply(Math,y),ie=Math.min.apply(Math,y),le=wm(y);try{for(le.s();!(Z=le.n()).done;){var J=Z.value;s[J][h]=J===ee?"bottom":J===ie?"top":"none"}}catch(ht){le.e(ht)}finally{le.f()}}else if(f.length>0&&y.length>0){var re,ae=f[f.length-1],me=wm(f);try{for(me.s();!(re=me.n()).done;){var Te=re.value;s[Te][h]=Te===ae?"top":"none"}}catch(ht){me.e(ht)}finally{me.f()}var ye,Re=Math.max.apply(Math,y),We=wm(y);try{for(We.s();!(ye=We.n()).done;){var Le=ye.value;s[Le][h]=Le===Re?"bottom":"none"}}catch(ht){We.e(ht)}finally{We.f()}}else x===1&&(s[f[0]||y[0]][h]="both")}return s}},{key:"barBackground",value:function(e){var t=e.j,i=e.i,n=e.x1,r=e.x2,o=e.y1,s=e.y2,h=e.elSeries,f=this.w,y=new vi(this.barCtx.ctx),x=new zc(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&x===i){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var S=this.barCtx.barOptions.colors.backgroundBarColors[t],E=y.drawRect(n!==void 0?n:0,o!==void 0?o:0,r!==void 0?r:f.globals.gridWidth,s!==void 0?s:f.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,S,this.barCtx.barOptions.colors.backgroundBarOpacity);h.add(E),E.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t,i=e.barWidth,n=e.barXPosition,r=e.y1,o=e.y2,s=e.strokeWidth,h=e.isReversed,f=e.series,y=e.seriesGroup,x=e.realIndex,S=e.i,E=e.j,z=e.w,D=new vi(this.barCtx.ctx);(s=Array.isArray(s)?s[x]:s)||(s=0);var F=i,U=n;(t=z.config.series[x].data[E])!==null&&t!==void 0&&t.columnWidthOffset&&(U=n-z.config.series[x].data[E].columnWidthOffset/2,F=i+z.config.series[x].data[E].columnWidthOffset);var G=s/2,Z=U+G,ee=U+F-G,ie=(f[S][E]>=0?1:-1)*(h?-1:1);r+=.001-G*ie,o+=.001+G*ie;var le=D.move(Z,r),J=D.move(Z,r),re=D.line(ee,r);if(z.globals.previousPaths.length>0&&(J=this.barCtx.getPreviousPath(x,E,!1)),le=le+D.line(Z,o)+D.line(ee,o)+re+(z.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[x][E]==="both"?" Z":" z"),J=J+D.line(Z,r)+re+re+re+re+re+D.line(Z,r)+(z.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[x][E]==="both"?" Z":" z"),this.arrBorderRadius[x][E]!=="none"&&(le=D.roundPathCorners(le,z.config.plotOptions.bar.borderRadius)),z.config.chart.stacked){var ae=this.barCtx;(ae=this.barCtx[y]).yArrj.push(o-G*ie),ae.yArrjF.push(Math.abs(r-o+s*ie)),ae.yArrjVal.push(this.barCtx.series[S][E])}return{pathTo:le,pathFrom:J}}},{key:"getBarpaths",value:function(e){var t,i=e.barYPosition,n=e.barHeight,r=e.x1,o=e.x2,s=e.strokeWidth,h=e.isReversed,f=e.series,y=e.seriesGroup,x=e.realIndex,S=e.i,E=e.j,z=e.w,D=new vi(this.barCtx.ctx);(s=Array.isArray(s)?s[x]:s)||(s=0);var F=i,U=n;(t=z.config.series[x].data[E])!==null&&t!==void 0&&t.barHeightOffset&&(F=i-z.config.series[x].data[E].barHeightOffset/2,U=n+z.config.series[x].data[E].barHeightOffset);var G=s/2,Z=F+G,ee=F+U-G,ie=(f[S][E]>=0?1:-1)*(h?-1:1);r+=.001+G*ie,o+=.001-G*ie;var le=D.move(r,Z),J=D.move(r,Z);z.globals.previousPaths.length>0&&(J=this.barCtx.getPreviousPath(x,E,!1));var re=D.line(r,ee);if(le=le+D.line(o,Z)+D.line(o,ee)+re+(z.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[x][E]==="both"?" Z":" z"),J=J+D.line(r,Z)+re+re+re+re+re+D.line(r,Z)+(z.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[x][E]==="both"?" Z":" z"),this.arrBorderRadius[x][E]!=="none"&&(le=D.roundPathCorners(le,z.config.plotOptions.bar.borderRadius)),z.config.chart.stacked){var ae=this.barCtx;(ae=this.barCtx[y]).xArrj.push(o+G*ie),ae.xArrjF.push(Math.abs(r-o-s*ie)),ae.xArrjVal.push(this.barCtx.series[S][E])}return{pathTo:le,pathFrom:J}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,i=this.w,n=0;n<t.length;n++){for(var r=0,o=0;o<t[i.globals.maxValsInArrayIndex].length;o++)r+=t[n][o];r===0&&this.barCtx.zeroSerieses.push(n)}}},{key:"getXForValue",value:function(e,t){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?t:null;return e!=null&&(i=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),i}},{key:"getYForValue",value:function(e,t,i){var n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?t:null;return e!=null&&(n=t-e/this.barCtx.yRatio[i]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[i]:0)),n}},{key:"getGoalValues",value:function(e,t,i,n,r,o){var s=this,h=this.w,f=[],y=function(E,z){var D;f.push((P_(D={},e,e==="x"?s.getXForValue(E,t,!1):s.getYForValue(E,i,o,!1)),P_(D,"attrs",z),D))};if(h.globals.seriesGoals[n]&&h.globals.seriesGoals[n][r]&&Array.isArray(h.globals.seriesGoals[n][r])&&h.globals.seriesGoals[n][r].forEach((function(E){y(E.value,E)})),this.barCtx.barOptions.isDumbbell&&h.globals.seriesRange.length){var x=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:h.globals.colors,S={strokeHeight:e==="x"?0:h.globals.markers.size[n],strokeWidth:e==="x"?h.globals.markers.size[n]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(x[n])?x[n][0]:x[n]};y(h.globals.seriesRangeStart[n][r],S),y(h.globals.seriesRangeEnd[n][r],Ui(Ui({},S),{},{strokeColor:Array.isArray(x[n])?x[n][1]:x[n]}))}return f}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,i=e.barYPosition,n=e.goalX,r=e.goalY,o=e.barWidth,s=e.barHeight,h=new vi(this.barCtx.ctx),f=h.group({className:"apexcharts-bar-goals-groups"});f.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:f.node}),f.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var y=null;return this.barCtx.isHorizontal?Array.isArray(n)&&n.forEach((function(x){if(x.x>=-1&&x.x<=h.w.globals.gridWidth+1){var S=x.attrs.strokeHeight!==void 0?x.attrs.strokeHeight:s/2,E=i+S+s/2;y=h.drawLine(x.x,E-2*S,x.x,E,x.attrs.strokeColor?x.attrs.strokeColor:void 0,x.attrs.strokeDashArray,x.attrs.strokeWidth?x.attrs.strokeWidth:2,x.attrs.strokeLineCap),f.add(y)}})):Array.isArray(r)&&r.forEach((function(x){if(x.y>=-1&&x.y<=h.w.globals.gridHeight+1){var S=x.attrs.strokeWidth!==void 0?x.attrs.strokeWidth:o/2,E=t+S+o/2;y=h.drawLine(E-2*S,x.y,E,x.y,x.attrs.strokeColor?x.attrs.strokeColor:void 0,x.attrs.strokeDashArray,x.attrs.strokeHeight?x.attrs.strokeHeight:2,x.attrs.strokeLineCap),f.add(y)}})),f}},{key:"drawBarShadow",value:function(e){var t=e.prevPaths,i=e.currPaths,n=e.color,r=this.w,o=t.x,s=t.x1,h=t.barYPosition,f=i.x,y=i.x1,x=i.barYPosition,S=h+i.barHeight,E=new vi(this.barCtx.ctx),z=new At,D=E.move(s,S)+E.line(o,S)+E.line(f,x)+E.line(y,x)+E.line(s,S)+(r.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return E.drawPath({d:D,fill:z.shadeColor(.5,At.rgb2hex(n)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(e){var t,i=e.i,n=e.j,r=this.w,o=0,s=0;return(r.config.plotOptions.bar.horizontal?r.globals.series.map((function(h,f){return f})):((t=r.globals.columnSeries)===null||t===void 0?void 0:t.i.map((function(h){return h})))||[]).forEach((function(h){var f=r.globals.seriesPercent[h][n];f&&o++,h<i&&f===0&&s++})),{nonZeroColumns:o,zeroEncounters:s}}},{key:"getGroupIndex",value:function(e){var t=this.w,i=t.globals.seriesGroups.findIndex((function(o){return o.indexOf(t.globals.seriesNames[e])>-1})),n=this.barCtx.columnGroupIndices,r=n.indexOf(i);return r<0&&(n.push(i),r=n.length-1),{groupIndex:i,columnGroupIndex:r}}}]),a})(),dg=(function(){function a(e,t){wn(this,a),this.ctx=e,this.w=e.w;var i=this.w;this.barOptions=i.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=i.config.stroke.width,this.isNullValue=!1,this.isRangeBar=i.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&i.globals.seriesRange.length&&i.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=t,this.xyRatios!==null&&(this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.invertedXRatio=t.invertedXRatio,this.invertedYRatio=t.invertedYRatio,this.baseLineY=t.baseLineY,this.baseLineInvertedY=t.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var n=new zc(this.ctx);this.lastActiveBarSerieIndex=n.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var r=n.getBarSeriesIndices(),o=new Rs(this.ctx);this.stackedSeriesTotals=o.getStackedSeriesTotals(this.w.config.series.map((function(s,h){return r.indexOf(h)===-1?h:-1})).filter((function(s){return s!==-1}))),this.barHelpers=new S8(this)}return Sn(a,[{key:"draw",value:function(e,t){var i=this.w,n=new vi(this.ctx),r=new Rs(this.ctx,i);e=r.getLogSeries(e),this.series=e,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=n.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var s=0,h=0;s<e.length;s++,h++){var f,y,x,S,E=void 0,z=void 0,D=[],F=[],U=i.globals.comboCharts?t[s]:s,G=this.barHelpers.getGroupIndex(U).columnGroupIndex,Z=n.group({class:"apexcharts-series",rel:s+1,seriesName:At.escapeString(i.globals.seriesNames[U]),"data:realIndex":U});this.ctx.series.addCollapsedClassToSeries(Z,U),e[s].length>0&&(this.visibleI=this.visibleI+1);var ee=0,ie=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[U],this.translationsIndex=U);var le=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var J=this.barHelpers.initialPositions(U);z=J.y,ee=J.barHeight,y=J.yDivision,S=J.zeroW,E=J.x,ie=J.barWidth,f=J.xDivision,x=J.zeroH,this.isHorizontal||F.push(E+ie/2);var re=n.group({class:"apexcharts-datalabels","data:realIndex":U});i.globals.delayedElements.push({el:re.node}),re.node.classList.add("apexcharts-element-hidden");var ae=n.group({class:"apexcharts-bar-goals-markers"}),me=n.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:me.node}),me.node.classList.add("apexcharts-element-hidden");for(var Te=0;Te<e[s].length;Te++){var ye=this.barHelpers.getStrokeWidth(s,Te,U),Re=null,We={indexes:{i:s,j:Te,realIndex:U,translationsIndex:le,bc:h},x:E,y:z,strokeWidth:ye,elSeries:Z};this.isHorizontal?(Re=this.drawBarPaths(Ui(Ui({},We),{},{barHeight:ee,zeroW:S,yDivision:y})),ie=this.series[s][Te]/this.invertedYRatio):(Re=this.drawColumnPaths(Ui(Ui({},We),{},{xDivision:f,barWidth:ie,zeroH:x})),ee=this.series[s][Te]/this.yRatio[le]);var Le=this.barHelpers.getPathFillColor(e,s,Te,U);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&Te>0){var ht,$e=this.barHelpers.drawBarShadow({color:typeof Le.color=="string"&&((ht=Le.color)===null||ht===void 0?void 0:ht.indexOf("url"))===-1?Le.color:At.hexToRgba(i.globals.colors[s]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:Re});me.add($e),i.config.chart.dropShadow.enabled&&new Lo(this.ctx).dropShadow($e,i.config.chart.dropShadow,U)}this.pathArr.push(Re);var pt=this.barHelpers.drawGoalLine({barXPosition:Re.barXPosition,barYPosition:Re.barYPosition,goalX:Re.goalX,goalY:Re.goalY,barHeight:ee,barWidth:ie});pt&&ae.add(pt),z=Re.y,E=Re.x,Te>0&&F.push(E+ie/2),D.push(z),this.renderSeries(Ui(Ui({realIndex:U,pathFill:Le.color},Le.useRangeColor?{lineFill:Le.color}:{}),{},{j:Te,i:s,columnGroupIndex:G,pathFrom:Re.pathFrom,pathTo:Re.pathTo,strokeWidth:ye,elSeries:Z,x:E,y:z,series:e,barHeight:Math.abs(Re.barHeight?Re.barHeight:ee),barWidth:Math.abs(Re.barWidth?Re.barWidth:ie),elDataLabelsWrap:re,elGoalsMarkers:ae,elBarShadows:me,visibleSeries:this.visibleI,type:"bar"}))}i.globals.seriesXvalues[U]=F,i.globals.seriesYvalues[U]=D,o.add(Z)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,i=e.pathFill,n=e.lineFill,r=e.j,o=e.i,s=e.columnGroupIndex,h=e.pathFrom,f=e.pathTo,y=e.strokeWidth,x=e.elSeries,S=e.x,E=e.y,z=e.y1,D=e.y2,F=e.series,U=e.barHeight,G=e.barWidth,Z=e.barXPosition,ee=e.barYPosition,ie=e.elDataLabelsWrap,le=e.elGoalsMarkers,J=e.elBarShadows,re=e.visibleSeries,ae=e.type,me=e.classes,Te=this.w,ye=new vi(this.ctx),Re=!1;if(!n){var We=typeof Te.globals.stroke.colors[t]=="function"?(function(Dt){var qe,Nt=Te.config.stroke.colors;return Array.isArray(Nt)&&Nt.length>0&&((qe=Nt[Dt])||(qe=""),typeof qe=="function")?qe({value:Te.globals.series[Dt][r],dataPointIndex:r,w:Te}):qe})(t):Te.globals.stroke.colors[t];n=this.barOptions.distributed?Te.globals.stroke.colors[r]:We}var Le=new w8(this).handleBarDataLabels({x:S,y:E,y1:z,y2:D,i:o,j:r,series:F,realIndex:t,columnGroupIndex:s,barHeight:U,barWidth:G,barXPosition:Z,barYPosition:ee,visibleSeries:re});Te.globals.isBarHorizontal||(Le.dataLabelsPos.dataLabelsX+Math.max(G,Te.globals.barPadForNumericAxis)<0||Le.dataLabelsPos.dataLabelsX-Math.max(G,Te.globals.barPadForNumericAxis)>Te.globals.gridWidth)&&(Re=!0),Te.config.series[o].data[r]&&Te.config.series[o].data[r].strokeColor&&(n=Te.config.series[o].data[r].strokeColor),this.isNullValue&&(i="none");var ht=r/Te.config.chart.animations.animateGradually.delay*(Te.config.chart.animations.speed/Te.globals.dataPoints)/2.4;if(!Re){var $e=ye.renderPaths({i:o,j:r,realIndex:t,pathFrom:h,pathTo:f,stroke:n,strokeWidth:y,strokeLineCap:Te.config.stroke.lineCap,fill:i,animationDelay:ht,initialSpeed:Te.config.chart.animations.speed,dataChangeSpeed:Te.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(ae,"-area ").concat(me),chartType:ae});$e.attr("clip-path","url(#gridRectBarMask".concat(Te.globals.cuid,")"));var pt=Te.config.forecastDataPoints;pt.count>0&&r>=Te.globals.dataPoints-pt.count&&($e.node.setAttribute("stroke-dasharray",pt.dashArray),$e.node.setAttribute("stroke-width",pt.strokeWidth),$e.node.setAttribute("fill-opacity",pt.fillOpacity)),z!==void 0&&D!==void 0&&($e.attr("data-range-y1",z),$e.attr("data-range-y2",D)),new Lo(this.ctx).setSelectionFilter($e,t,r),x.add($e),$e.attr({cy:Le.dataLabelsPos.bcy,cx:Le.dataLabelsPos.bcx,j:r,val:Te.globals.series[o][r],barHeight:U,barWidth:G}),Le.dataLabels!==null&&ie.add(Le.dataLabels),Le.totalDataLabels&&ie.add(Le.totalDataLabels),x.add(ie),le&&x.add(le),J&&x.add(J)}return x}},{key:"drawBarPaths",value:function(e){var t,i=e.indexes,n=e.barHeight,r=e.strokeWidth,o=e.zeroW,s=e.x,h=e.y,f=e.yDivision,y=e.elSeries,x=this.w,S=i.i,E=i.j;if(x.globals.isXNumeric)t=(h=(x.globals.seriesX[S][E]-x.globals.minX)/this.invertedXRatio-n)+n*this.visibleI;else if(x.config.plotOptions.bar.hideZeroBarsWhenGrouped){var z=this.barHelpers.getZeroValueEncounters({i:S,j:E}),D=z.nonZeroColumns,F=z.zeroEncounters;D>0&&(n=this.seriesLen*n/D),t=h+n*this.visibleI,t-=n*F}else t=h+n*this.visibleI;this.isFunnel&&(o-=(this.barHelpers.getXForValue(this.series[S][E],o)-o)/2),s=this.barHelpers.getXForValue(this.series[S][E],o);var U=this.barHelpers.getBarpaths({barYPosition:t,barHeight:n,x1:o,x2:s,strokeWidth:r,isReversed:this.isReversed,series:this.series,realIndex:i.realIndex,i:S,j:E,w:x});return x.globals.isXNumeric||(h+=f),this.barHelpers.barBackground({j:E,i:S,y1:t-n*this.visibleI,y2:n*this.seriesLen,elSeries:y}),{pathTo:U.pathTo,pathFrom:U.pathFrom,x1:o,x:s,y:h,goalX:this.barHelpers.getGoalValues("x",o,null,S,E),barYPosition:t,barHeight:n}}},{key:"drawColumnPaths",value:function(e){var t,i=e.indexes,n=e.x,r=e.y,o=e.xDivision,s=e.barWidth,h=e.zeroH,f=e.strokeWidth,y=e.elSeries,x=this.w,S=i.realIndex,E=i.translationsIndex,z=i.i,D=i.j,F=i.bc;if(x.globals.isXNumeric){var U=this.getBarXForNumericXAxis({x:n,j:D,realIndex:S,barWidth:s});n=U.x,t=U.barXPosition}else if(x.config.plotOptions.bar.hideZeroBarsWhenGrouped){var G=this.barHelpers.getZeroValueEncounters({i:z,j:D}),Z=G.nonZeroColumns,ee=G.zeroEncounters;Z>0&&(s=this.seriesLen*s/Z),t=n+s*this.visibleI,t-=s*ee}else t=n+s*this.visibleI;r=this.barHelpers.getYForValue(this.series[z][D],h,E);var ie=this.barHelpers.getColumnPaths({barXPosition:t,barWidth:s,y1:h,y2:r,strokeWidth:f,isReversed:this.isReversed,series:this.series,realIndex:S,i:z,j:D,w:x});return x.globals.isXNumeric||(n+=o),this.barHelpers.barBackground({bc:F,j:D,i:z,x1:t-f/2-s*this.visibleI,x2:s*this.seriesLen+f/2,elSeries:y}),{pathTo:ie.pathTo,pathFrom:ie.pathFrom,x:n,y:r,goalY:this.barHelpers.getGoalValues("y",null,h,z,D,E),barXPosition:t,barWidth:s}}},{key:"getBarXForNumericXAxis",value:function(e){var t=e.x,i=e.barWidth,n=e.realIndex,r=e.j,o=this.w,s=n;return o.globals.seriesX[n].length||(s=o.globals.maxValsInArrayIndex),At.isNumber(o.globals.seriesX[s][r])&&(t=(o.globals.seriesX[s][r]-o.globals.minX)/this.xRatio-i*this.seriesLen/2),{barXPosition:t+i*this.visibleI,x:t}}},{key:"getPreviousPath",value:function(e,t){for(var i=this.w,n="M 0 0",r=0;r<i.globals.previousPaths.length;r++){var o=i.globals.previousPaths[r];o.paths&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(e,10)&&i.globals.previousPaths[r].paths[t]!==void 0&&(n=i.globals.previousPaths[r].paths[t].d)}return n}}]),a})(),ZA=(function(a){by(t,dg);var e=vy(t);function t(){return wn(this,t),e.apply(this,arguments)}return Sn(t,[{key:"draw",value:function(i,n){var r=this,o=this.w;this.graphics=new vi(this.ctx),this.bar=new dg(this.ctx,this.xyRatios);var s=new Rs(this.ctx,o);i=s.getLogSeries(i),this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i),o.config.chart.stackType==="100%"&&(i=o.globals.comboCharts?n.map((function(z){return o.globals.seriesPercent[z]})):o.globals.seriesPercent.slice()),this.series=i,this.barHelpers.initializeStackedPrevVars(this);for(var h=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),f=0,y=0,x=function(z,D){var F=void 0,U=void 0,G=void 0,Z=void 0,ee=o.globals.comboCharts?n[z]:z,ie=r.barHelpers.getGroupIndex(ee),le=ie.groupIndex,J=ie.columnGroupIndex;r.groupCtx=r[o.globals.seriesGroups[le]];var re=[],ae=[],me=0;r.yRatio.length>1&&(r.yaxisIndex=o.globals.seriesYAxisReverseMap[ee][0],me=ee),r.isReversed=o.config.yaxis[r.yaxisIndex]&&o.config.yaxis[r.yaxisIndex].reversed;var Te=r.graphics.group({class:"apexcharts-series",seriesName:At.escapeString(o.globals.seriesNames[ee]),rel:z+1,"data:realIndex":ee});r.ctx.series.addCollapsedClassToSeries(Te,ee);var ye=r.graphics.group({class:"apexcharts-datalabels","data:realIndex":ee}),Re=r.graphics.group({class:"apexcharts-bar-goals-markers"}),We=0,Le=0,ht=r.initialPositions(f,y,F,U,G,Z,me);y=ht.y,We=ht.barHeight,U=ht.yDivision,Z=ht.zeroW,f=ht.x,Le=ht.barWidth,F=ht.xDivision,G=ht.zeroH,o.globals.barHeight=We,o.globals.barWidth=Le,r.barHelpers.initializeStackedXYVars(r),r.groupCtx.prevY.length===1&&r.groupCtx.prevY[0].every((function(Tt){return isNaN(Tt)}))&&(r.groupCtx.prevY[0]=r.groupCtx.prevY[0].map((function(){return G})),r.groupCtx.prevYF[0]=r.groupCtx.prevYF[0].map((function(){return 0})));for(var $e=0;$e<o.globals.dataPoints;$e++){var pt=r.barHelpers.getStrokeWidth(z,$e,ee),Dt={indexes:{i:z,j:$e,realIndex:ee,translationsIndex:me,bc:D},strokeWidth:pt,x:f,y,elSeries:Te,columnGroupIndex:J,seriesGroup:o.globals.seriesGroups[le]},qe=null;r.isHorizontal?(qe=r.drawStackedBarPaths(Ui(Ui({},Dt),{},{zeroW:Z,barHeight:We,yDivision:U})),Le=r.series[z][$e]/r.invertedYRatio):(qe=r.drawStackedColumnPaths(Ui(Ui({},Dt),{},{xDivision:F,barWidth:Le,zeroH:G})),We=r.series[z][$e]/r.yRatio[me]);var Nt=r.barHelpers.drawGoalLine({barXPosition:qe.barXPosition,barYPosition:qe.barYPosition,goalX:qe.goalX,goalY:qe.goalY,barHeight:We,barWidth:Le});Nt&&Re.add(Nt),y=qe.y,f=qe.x,re.push(f),ae.push(y);var ni=r.barHelpers.getPathFillColor(i,z,$e,ee),xi="",Lt=o.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";(r.barHelpers.arrBorderRadius[ee][$e]==="bottom"&&o.globals.series[ee][$e]>0||r.barHelpers.arrBorderRadius[ee][$e]==="top"&&o.globals.series[ee][$e]<0)&&(xi=Lt),Te=r.renderSeries(Ui(Ui({realIndex:ee,pathFill:ni.color},ni.useRangeColor?{lineFill:ni.color}:{}),{},{j:$e,i:z,columnGroupIndex:J,pathFrom:qe.pathFrom,pathTo:qe.pathTo,strokeWidth:pt,elSeries:Te,x:f,y,series:i,barHeight:We,barWidth:Le,elDataLabelsWrap:ye,elGoalsMarkers:Re,type:"bar",visibleSeries:J,classes:xi}))}o.globals.seriesXvalues[ee]=re,o.globals.seriesYvalues[ee]=ae,r.groupCtx.prevY.push(r.groupCtx.yArrj),r.groupCtx.prevYF.push(r.groupCtx.yArrjF),r.groupCtx.prevYVal.push(r.groupCtx.yArrjVal),r.groupCtx.prevX.push(r.groupCtx.xArrj),r.groupCtx.prevXF.push(r.groupCtx.xArrjF),r.groupCtx.prevXVal.push(r.groupCtx.xArrjVal),h.add(Te)},S=0,E=0;S<i.length;S++,E++)x(S,E);return h}},{key:"initialPositions",value:function(i,n,r,o,s,h,f){var y,x,S=this.w;if(this.isHorizontal){o=S.globals.gridHeight/S.globals.dataPoints;var E=S.config.plotOptions.bar.barHeight;y=String(E).indexOf("%")===-1?parseInt(E,10):o*parseInt(E,10)/100,h=S.globals.padHorizontal+(this.isReversed?S.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),n=(o-y)/2}else{x=r=S.globals.gridWidth/S.globals.dataPoints;var z=S.config.plotOptions.bar.columnWidth;S.globals.isXNumeric&&S.globals.dataPoints>1?x=(r=S.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(z).indexOf("%")===-1?x=parseInt(z,10):x*=parseInt(z,10)/100,s=this.isReversed?this.baseLineY[f]:S.globals.gridHeight-this.baseLineY[f],i=S.globals.padHorizontal+(r-x)/2}var D=S.globals.barGroups.length||1;return{x:i,y:n,yDivision:o,xDivision:r,barHeight:y/D,barWidth:x/D,zeroH:s,zeroW:h}}},{key:"drawStackedBarPaths",value:function(i){for(var n,r=i.indexes,o=i.barHeight,s=i.strokeWidth,h=i.zeroW,f=i.x,y=i.y,x=i.columnGroupIndex,S=i.seriesGroup,E=i.yDivision,z=i.elSeries,D=this.w,F=y+x*o,U=r.i,G=r.j,Z=r.realIndex,ee=r.translationsIndex,ie=0,le=0;le<this.groupCtx.prevXF.length;le++)ie+=this.groupCtx.prevXF[le][G];var J=U;if(D.config.series[Z].name&&(J=S.indexOf(D.config.series[Z].name)),J>0){var re=h;this.groupCtx.prevXVal[J-1][G]<0?re=this.series[U][G]>=0?this.groupCtx.prevX[J-1][G]+ie-2*(this.isReversed?ie:0):this.groupCtx.prevX[J-1][G]:this.groupCtx.prevXVal[J-1][G]>=0&&(re=this.series[U][G]>=0?this.groupCtx.prevX[J-1][G]:this.groupCtx.prevX[J-1][G]-ie+2*(this.isReversed?ie:0)),n=re}else n=h;f=this.series[U][G]===null?n:n+this.series[U][G]/this.invertedYRatio-2*(this.isReversed?this.series[U][G]/this.invertedYRatio:0);var ae=this.barHelpers.getBarpaths({barYPosition:F,barHeight:o,x1:n,x2:f,strokeWidth:s,isReversed:this.isReversed,series:this.series,realIndex:r.realIndex,seriesGroup:S,i:U,j:G,w:D});return this.barHelpers.barBackground({j:G,i:U,y1:F,y2:o,elSeries:z}),y+=E,{pathTo:ae.pathTo,pathFrom:ae.pathFrom,goalX:this.barHelpers.getGoalValues("x",h,null,U,G,ee),barXPosition:n,barYPosition:F,x:f,y}}},{key:"drawStackedColumnPaths",value:function(i){var n=i.indexes,r=i.x,o=i.y,s=i.xDivision,h=i.barWidth,f=i.zeroH,y=i.columnGroupIndex,x=i.seriesGroup,S=i.elSeries,E=this.w,z=n.i,D=n.j,F=n.bc,U=n.realIndex,G=n.translationsIndex;if(E.globals.isXNumeric){var Z=E.globals.seriesX[U][D];Z||(Z=0),r=(Z-E.globals.minX)/this.xRatio-h/2*E.globals.barGroups.length}for(var ee,ie=r+y*h,le=0,J=0;J<this.groupCtx.prevYF.length;J++)le+=isNaN(this.groupCtx.prevYF[J][D])?0:this.groupCtx.prevYF[J][D];var re=z;if(x&&(re=x.indexOf(E.globals.seriesNames[U])),re>0&&!E.globals.isXNumeric||re>0&&E.globals.isXNumeric&&E.globals.seriesX[U-1][D]===E.globals.seriesX[U][D]){var ae,me,Te,ye=Math.min(this.yRatio.length+1,U+1);if(this.groupCtx.prevY[re-1]!==void 0&&this.groupCtx.prevY[re-1].length)for(var Re=1;Re<ye;Re++){var We;if(!isNaN((We=this.groupCtx.prevY[re-Re])===null||We===void 0?void 0:We[D])){Te=this.groupCtx.prevY[re-Re][D];break}}for(var Le=1;Le<ye;Le++){var ht,$e;if(((ht=this.groupCtx.prevYVal[re-Le])===null||ht===void 0?void 0:ht[D])<0){me=this.series[z][D]>=0?Te-le+2*(this.isReversed?le:0):Te;break}if((($e=this.groupCtx.prevYVal[re-Le])===null||$e===void 0?void 0:$e[D])>=0){me=this.series[z][D]>=0?Te:Te+le-2*(this.isReversed?le:0);break}}me===void 0&&(me=E.globals.gridHeight),ee=(ae=this.groupCtx.prevYF[0])!==null&&ae!==void 0&&ae.every((function(Dt){return Dt===0}))&&this.groupCtx.prevYF.slice(1,re).every((function(Dt){return Dt.every((function(qe){return isNaN(qe)}))}))?f:me}else ee=f;o=this.series[z][D]?ee-this.series[z][D]/this.yRatio[G]+2*(this.isReversed?this.series[z][D]/this.yRatio[G]:0):ee;var pt=this.barHelpers.getColumnPaths({barXPosition:ie,barWidth:h,y1:ee,y2:o,yRatio:this.yRatio[G],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:x,realIndex:n.realIndex,i:z,j:D,w:E});return this.barHelpers.barBackground({bc:F,j:D,i:z,x1:ie,x2:h,elSeries:S}),{pathTo:pt.pathTo,pathFrom:pt.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,f,z,D),barXPosition:ie,x:E.globals.isXNumeric?r:r+s,y:o}}}]),t})(),rb=(function(a){by(t,dg);var e=vy(t);function t(){return wn(this,t),e.apply(this,arguments)}return Sn(t,[{key:"draw",value:function(i,n,r){var o=this,s=this.w,h=new vi(this.ctx),f=s.globals.comboCharts?n:s.config.chart.type,y=new su(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=s.config.plotOptions.bar.horizontal,this.isOHLC=this.candlestickOptions&&this.candlestickOptions.type==="ohlc";var x=new Rs(this.ctx,s);i=x.getLogSeries(i),this.series=i,this.yRatio=x.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);for(var S=h.group({class:"apexcharts-".concat(f,"-series apexcharts-plot-series")}),E=function(D){o.isBoxPlot=s.config.chart.type==="boxPlot"||s.config.series[D].type==="boxPlot";var F,U,G,Z,ee=void 0,ie=void 0,le=[],J=[],re=s.globals.comboCharts?r[D]:D,ae=o.barHelpers.getGroupIndex(re).columnGroupIndex,me=h.group({class:"apexcharts-series",seriesName:At.escapeString(s.globals.seriesNames[re]),rel:D+1,"data:realIndex":re});o.ctx.series.addCollapsedClassToSeries(me,re),i[D].length>0&&(o.visibleI=o.visibleI+1);var Te,ye,Re=0;o.yRatio.length>1&&(o.yaxisIndex=s.globals.seriesYAxisReverseMap[re][0],Re=re);var We=o.barHelpers.initialPositions(re);ie=We.y,Te=We.barHeight,U=We.yDivision,Z=We.zeroW,ee=We.x,ye=We.barWidth,F=We.xDivision,G=We.zeroH,J.push(ee+ye/2);for(var Le=h.group({class:"apexcharts-datalabels","data:realIndex":re}),ht=h.group({class:"apexcharts-bar-goals-markers"}),$e=function(Dt){var qe=o.barHelpers.getStrokeWidth(D,Dt,re),Nt=null,ni={indexes:{i:D,j:Dt,realIndex:re,translationsIndex:Re},x:ee,y:ie,strokeWidth:qe,elSeries:me};Nt=o.isHorizontal?o.drawHorizontalBoxPaths(Ui(Ui({},ni),{},{yDivision:U,barHeight:Te,zeroW:Z})):o.drawVerticalBoxPaths(Ui(Ui({},ni),{},{xDivision:F,barWidth:ye,zeroH:G})),ie=Nt.y,ee=Nt.x;var xi=o.barHelpers.drawGoalLine({barXPosition:Nt.barXPosition,barYPosition:Nt.barYPosition,goalX:Nt.goalX,goalY:Nt.goalY,barHeight:Te,barWidth:ye});xi&&ht.add(xi),Dt>0&&J.push(ee+ye/2),le.push(ie),Nt.pathTo.forEach((function(Lt,Tt){var wt=!o.isBoxPlot&&o.candlestickOptions.wick.useFillColor?Nt.color[Tt]:s.globals.stroke.colors[D],mi=y.fillPath({seriesNumber:re,dataPointIndex:Dt,color:Nt.color[Tt],value:i[D][Dt]});o.renderSeries({realIndex:re,pathFill:mi,lineFill:wt,j:Dt,i:D,pathFrom:Nt.pathFrom,pathTo:Lt,strokeWidth:qe,elSeries:me,x:ee,y:ie,series:i,columnGroupIndex:ae,barHeight:Te,barWidth:ye,elDataLabelsWrap:Le,elGoalsMarkers:ht,visibleSeries:o.visibleI,type:s.config.chart.type})}))},pt=0;pt<s.globals.dataPoints;pt++)$e(pt);s.globals.seriesXvalues[re]=J,s.globals.seriesYvalues[re]=le,S.add(me)},z=0;z<i.length;z++)E(z);return S}},{key:"drawVerticalBoxPaths",value:function(i){var n=i.indexes,r=i.x;i.y;var o=i.xDivision,s=i.barWidth,h=i.zeroH,f=i.strokeWidth,y=this.w,x=new vi(this.ctx),S=n.i,E=n.j,z=y.config.plotOptions.candlestick.colors,D=this.boxOptions.colors,F=n.realIndex,U=function(pt){return Array.isArray(pt)?pt[F]:pt},G=U(z.upward),Z=U(z.downward),ee=this.yRatio[n.translationsIndex],ie=this.getOHLCValue(F,E),le=h,J=h,re=ie.o<ie.c?[G]:[Z];this.isBoxPlot&&(re=[U(D.lower),U(D.upper)]);var ae=Math.min(ie.o,ie.c),me=Math.max(ie.o,ie.c),Te=ie.m;y.globals.isXNumeric&&(r=(y.globals.seriesX[F][E]-y.globals.minX)/this.xRatio-s/2);var ye=r+s*this.visibleI;this.series[S][E]===void 0||this.series[S][E]===null?(ae=h,me=h):(ae=h-ae/ee,me=h-me/ee,le=h-ie.h/ee,J=h-ie.l/ee,Te=h-ie.m/ee);var Re=x.move(ye,h),We=x.move(ye+s/2,ae);if(y.globals.previousPaths.length>0&&(We=this.getPreviousPath(F,E,!0)),this.isOHLC){var Le=ye+s/2,ht=h-ie.o/ee,$e=h-ie.c/ee;Re=[x.move(Le,le)+x.line(Le,J)+x.move(Le,ht)+x.line(ye,ht)+x.move(Le,$e)+x.line(ye+s,$e)]}else Re=this.isBoxPlot?[x.move(ye,ae)+x.line(ye+s/2,ae)+x.line(ye+s/2,le)+x.line(ye+s/4,le)+x.line(ye+s-s/4,le)+x.line(ye+s/2,le)+x.line(ye+s/2,ae)+x.line(ye+s,ae)+x.line(ye+s,Te)+x.line(ye,Te)+x.line(ye,ae+f/2),x.move(ye,Te)+x.line(ye+s,Te)+x.line(ye+s,me)+x.line(ye+s/2,me)+x.line(ye+s/2,J)+x.line(ye+s-s/4,J)+x.line(ye+s/4,J)+x.line(ye+s/2,J)+x.line(ye+s/2,me)+x.line(ye,me)+x.line(ye,Te)+"z"]:[x.move(ye,me)+x.line(ye+s/2,me)+x.line(ye+s/2,le)+x.line(ye+s/2,me)+x.line(ye+s,me)+x.line(ye+s,ae)+x.line(ye+s/2,ae)+x.line(ye+s/2,J)+x.line(ye+s/2,ae)+x.line(ye,ae)+x.line(ye,me-f/2)];return We+=x.move(ye,ae),y.globals.isXNumeric||(r+=o),{pathTo:Re,pathFrom:We,x:r,y:me,goalY:this.barHelpers.getGoalValues("y",null,h,S,E,n.translationsIndex),barXPosition:ye,color:re}}},{key:"drawHorizontalBoxPaths",value:function(i){var n=i.indexes;i.x;var r=i.y,o=i.yDivision,s=i.barHeight,h=i.zeroW,f=i.strokeWidth,y=this.w,x=new vi(this.ctx),S=n.i,E=n.j,z=this.boxOptions.colors.lower;this.isBoxPlot&&(z=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var D=this.invertedYRatio,F=n.realIndex,U=this.getOHLCValue(F,E),G=h,Z=h,ee=Math.min(U.o,U.c),ie=Math.max(U.o,U.c),le=U.m;y.globals.isXNumeric&&(r=(y.globals.seriesX[F][E]-y.globals.minX)/this.invertedXRatio-s/2);var J=r+s*this.visibleI;this.series[S][E]===void 0||this.series[S][E]===null?(ee=h,ie=h):(ee=h+ee/D,ie=h+ie/D,G=h+U.h/D,Z=h+U.l/D,le=h+U.m/D);var re=x.move(h,J),ae=x.move(ee,J+s/2);return y.globals.previousPaths.length>0&&(ae=this.getPreviousPath(F,E,!0)),re=[x.move(ee,J)+x.line(ee,J+s/2)+x.line(G,J+s/2)+x.line(G,J+s/2-s/4)+x.line(G,J+s/2+s/4)+x.line(G,J+s/2)+x.line(ee,J+s/2)+x.line(ee,J+s)+x.line(le,J+s)+x.line(le,J)+x.line(ee+f/2,J),x.move(le,J)+x.line(le,J+s)+x.line(ie,J+s)+x.line(ie,J+s/2)+x.line(Z,J+s/2)+x.line(Z,J+s-s/4)+x.line(Z,J+s/4)+x.line(Z,J+s/2)+x.line(ie,J+s/2)+x.line(ie,J)+x.line(le,J)+"z"],ae+=x.move(ee,J),y.globals.isXNumeric||(r+=o),{pathTo:re,pathFrom:ae,x:ie,y:r,goalX:this.barHelpers.getGoalValues("x",h,null,S,E),barYPosition:J,color:z}}},{key:"getOHLCValue",value:function(i,n){var r=this.w,o=new Rs(this.ctx,r),s=o.getLogValAtSeriesIndex(r.globals.seriesCandleH[i][n],i),h=o.getLogValAtSeriesIndex(r.globals.seriesCandleO[i][n],i),f=o.getLogValAtSeriesIndex(r.globals.seriesCandleM[i][n],i),y=o.getLogValAtSeriesIndex(r.globals.seriesCandleC[i][n],i),x=o.getLogValAtSeriesIndex(r.globals.seriesCandleL[i][n],i);return{o:this.isBoxPlot?s:h,h:this.isBoxPlot?h:s,m:f,l:this.isBoxPlot?y:x,c:this.isBoxPlot?x:y}}}]),t})(),pP=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,i=e.config.plotOptions[e.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(n,r){n.from<=0&&(t=!0)})),t}},{key:"getShadeColor",value:function(e,t,i,n){var r=this.w,o=1,s=r.config.plotOptions[e].shadeIntensity,h=this.determineColor(e,t,i);r.globals.hasNegs||n?o=r.config.plotOptions[e].reverseNegativeShade?h.percent<0?h.percent/100*(1.25*s):(1-h.percent/100)*(1.25*s):h.percent<=0?1-(1+h.percent/100)*s:(1-h.percent/100)*s:(o=1-h.percent/100,e==="treemap"&&(o=(1-h.percent/100)*(1.25*s)));var f=h.color,y=new At;if(r.config.plotOptions[e].enableShades)if(this.w.config.theme.mode==="dark"){var x=y.shadeColor(-1*o,h.color);f=At.hexToRgba(At.isColorHex(x)?x:At.rgb2hex(x),r.config.fill.opacity)}else{var S=y.shadeColor(o,h.color);f=At.hexToRgba(At.isColorHex(S)?S:At.rgb2hex(S),r.config.fill.opacity)}return{color:f,colorProps:h}}},{key:"determineColor",value:function(e,t,i){var n=this.w,r=n.globals.series[t][i],o=n.config.plotOptions[e],s=o.colorScale.inverse?i:t;o.distributed&&n.config.chart.type==="treemap"&&(s=i);var h=n.globals.colors[s],f=null,y=Math.min.apply(Math,oo(n.globals.series[t])),x=Math.max.apply(Math,oo(n.globals.series[t]));o.distributed||e!=="heatmap"||(y=n.globals.minY,x=n.globals.maxY),o.colorScale.min!==void 0&&(y=o.colorScale.min<n.globals.minY?o.colorScale.min:n.globals.minY,x=o.colorScale.max>n.globals.maxY?o.colorScale.max:n.globals.maxY);var S=Math.abs(x)+Math.abs(y),E=100*r/(S===0?S-1e-6:S);return o.colorScale.ranges.length>0&&o.colorScale.ranges.map((function(z,D){if(r>=z.from&&r<=z.to){h=z.color,f=z.foreColor?z.foreColor:null,y=z.from,x=z.to;var F=Math.abs(x)+Math.abs(y);E=100*r/(F===0?F-1e-6:F)}})),{color:h,foreColor:f,percent:E}}},{key:"calculateDataLabels",value:function(e){var t=e.text,i=e.x,n=e.y,r=e.i,o=e.j,s=e.colorProps,h=e.fontSize,f=this.w.config.dataLabels,y=new vi(this.ctx),x=new hg(this.ctx),S=null;if(f.enabled){S=y.group({class:"apexcharts-data-labels"});var E=f.offsetX,z=f.offsetY,D=i+E,F=n+parseFloat(f.style.fontSize)/3+z;x.plotDataLabelsText({x:D,y:F,text:t,i:r,j:o,color:s.foreColor,parent:S,fontSize:h,dataLabelsConfig:f})}return S}},{key:"addListeners",value:function(e){var t=new vi(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),a})(),k8=(function(){function a(e,t){wn(this,a),this.ctx=e,this.w=e.w,this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new pP(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Sn(a,[{key:"draw",value:function(e){var t=this.w,i=new vi(this.ctx),n=i.group({class:"apexcharts-heatmap"});n.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var r=t.globals.gridWidth/t.globals.dataPoints,o=t.globals.gridHeight/t.globals.series.length,s=0,h=!1;this.negRange=this.helpers.checkColorRange();var f=e.slice();t.config.yaxis[0].reversed&&(h=!0,f.reverse());for(var y=h?0:f.length-1;h?y<f.length:y>=0;h?y++:y--){var x=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:At.escapeString(t.globals.seriesNames[y]),rel:y+1,"data:realIndex":y});if(this.ctx.series.addCollapsedClassToSeries(x,y),t.config.chart.dropShadow.enabled){var S=t.config.chart.dropShadow;new Lo(this.ctx).dropShadow(x,S,y)}for(var E=0,z=t.config.plotOptions.heatmap.shadeIntensity,D=0,F=0;F<t.globals.dataPoints;F++)if(t.globals.seriesX.length&&!t.globals.allSeriesHasEqualX&&t.globals.minX+t.globals.minXDiff*F<t.globals.seriesX[y][D])E+=r;else{if(D>=f[y].length)break;var U=this.helpers.getShadeColor(t.config.chart.type,y,D,this.negRange),G=U.color,Z=U.colorProps;t.config.fill.type==="image"&&(G=new su(this.ctx).fillPath({seriesNumber:y,dataPointIndex:D,opacity:t.globals.hasNegs?Z.percent<0?1-(1+Z.percent/100):z+Z.percent/100:Z.percent/100,patternID:At.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:r,height:t.config.fill.image.height?t.config.fill.image.height:o}));var ee=this.rectRadius,ie=i.drawRect(E,s,r,o,ee);if(ie.attr({cx:E,cy:s}),ie.node.classList.add("apexcharts-heatmap-rect"),x.add(ie),ie.attr({fill:G,i:y,index:y,j:D,val:e[y][D],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?G:t.globals.stroke.colors[0],color:G}),this.helpers.addListeners(ie),t.config.chart.animations.enabled&&!t.globals.dataChanged){var le=1;t.globals.resized||(le=t.config.chart.animations.speed),this.animateHeatMap(ie,E,s,r,o,le)}if(t.globals.dataChanged){var J=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){J=this.dynamicAnim.speed;var re=t.globals.previousPaths[y]&&t.globals.previousPaths[y][D]&&t.globals.previousPaths[y][D].color;re||(re="rgba(255, 255, 255, 0)"),this.animateHeatColor(ie,At.isColorHex(re)?re:At.rgb2hex(re),At.isColorHex(G)?G:At.rgb2hex(G),J)}}var ae=(0,t.config.dataLabels.formatter)(t.globals.series[y][D],{value:t.globals.series[y][D],seriesIndex:y,dataPointIndex:D,w:t}),me=this.helpers.calculateDataLabels({text:ae,x:E+r/2,y:s+o/2,i:y,j:D,colorProps:Z,series:f});me!==null&&x.add(me),E+=r,D++}s+=o,n.add(x)}var Te=t.globals.yAxisScale[0].result.slice();return t.config.yaxis[0].reversed?Te.unshift(""):Te.push(""),t.globals.yAxisScale[0].result=Te,n}},{key:"animateHeatMap",value:function(e,t,i,n,r,o){var s=new gg(this.ctx);s.animateRect(e,{x:t+n/2,y:i+r/2,width:0,height:0},{x:t,y:i,width:n,height:r},o,(function(){s.animationCompleted(e)}))}},{key:"animateHeatColor",value:function(e,t,i,n){e.attr({fill:t}).animate(n).attr({fill:i})}}]),a})(),gP=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"drawYAxisTexts",value:function(e,t,i,n){var r=this.w,o=r.config.yaxis[0],s=r.globals.yLabelFormatters[0];return new vi(this.ctx).drawText({x:e+o.labels.offsetX,y:t+o.labels.offsetY,text:s(n,i),textAnchor:"middle",fontSize:o.labels.style.fontSize,fontFamily:o.labels.style.fontFamily,foreColor:Array.isArray(o.labels.style.colors)?o.labels.style.colors[i]:o.labels.style.colors})}}]),a})(),mP=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w;var t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,t.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100;var i=t.config.plotOptions.pie.customScale,n=t.globals.gridWidth/2,r=t.globals.gridHeight/2;this.translateX=n-n*i,this.translateY=r-r*i,this.dataLabelsGroup=new vi(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Sn(a,[{key:"draw",value:function(e){var t=this,i=this.w,n=new vi(this.ctx),r=n.group({class:"apexcharts-pie"});if(i.globals.noData)return r;for(var o=0,s=0;s<e.length;s++)o+=At.negToZero(e[s]);var h=[],f=n.group();o===0&&(o=1e-5),e.forEach((function(Z){t.maxY=Math.max(t.maxY,Z)})),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),i.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(r);for(var y=0;y<e.length;y++){var x=this.fullAngle*At.negToZero(e[y])/o;h.push(x),this.chartType==="polarArea"?(h[y]=this.fullAngle/e.length,this.sliceSizes.push(i.globals.radialSize*e[y]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var S,E=0,z=0;z<i.globals.previousPaths.length;z++)E+=At.negToZero(i.globals.previousPaths[z]);for(var D=0;D<i.globals.previousPaths.length;D++)S=this.fullAngle*At.negToZero(i.globals.previousPaths[D])/E,this.prevSectorAngleArr.push(S)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var F=n.drawCircle(this.donutSize);F.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),f.add(F)}var U=this.drawArcs(h,e);if(this.sliceLabels.forEach((function(Z){U.add(Z)})),f.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),f.add(U),r.add(f),this.donutDataLabels.show){var G=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});r.add(G)}return i.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(r),r}},{key:"drawArcs",value:function(e,t){var i=this.w,n=new Lo(this.ctx),r=new vi(this.ctx),o=new su(this.ctx),s=r.group({class:"apexcharts-slices"}),h=this.initialAngle,f=this.initialAngle,y=this.initialAngle,x=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var S=0;S<e.length;S++){var E=r.group({class:"apexcharts-series apexcharts-pie-series",seriesName:At.escapeString(i.globals.seriesNames[S]),rel:S+1,"data:realIndex":S});s.add(E),f=x,y=(h=y)+e[S],x=f+this.prevSectorAngleArr[S];var z=y<h?this.fullAngle+y-h:y-h,D=o.fillPath({seriesNumber:S,size:this.sliceSizes[S],value:t[S]}),F=this.getChangedPath(f,x),U=r.drawPath({d:F,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[S]:this.lineColorArr,strokeWidth:0,fill:D,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(S)});if(U.attr({index:0,j:S}),n.setSelectionFilter(U,0,S),i.config.chart.dropShadow.enabled){var G=i.config.chart.dropShadow;n.dropShadow(U,G,S)}this.addListeners(U,this.donutDataLabels),vi.setAttrs(U.node,{"data:angle":z,"data:startAngle":h,"data:strokeWidth":this.strokeWidth,"data:value":t[S]});var Z={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?Z=At.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(h+z/2)%this.fullAngle):this.chartType==="donut"&&(Z=At.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(h+z/2)%this.fullAngle)),E.add(U);var ee=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):((ee=z/this.fullAngle*i.config.chart.animations.speed)===0&&(ee=1),this.animDur=ee+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(U,{size:this.sliceSizes[S],endAngle:y,startAngle:h,prevStartAngle:f,prevEndAngle:x,animateStartingPos:!0,i:S,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(U,{size:this.sliceSizes[S],endAngle:y,startAngle:h,i:S,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:ee}),i.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&U.node.addEventListener("mouseup",this.pieClicked.bind(this,S)),i.globals.selectedDataPoints[0]!==void 0&&i.globals.selectedDataPoints[0].indexOf(S)>-1&&this.pieClicked(S),i.config.dataLabels.enabled){var ie=Z.x,le=Z.y,J=100*z/this.fullAngle+"%";if(z!==0&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[S]){var re=i.config.dataLabels.formatter;re!==void 0&&(J=re(i.globals.seriesPercent[S][0],{seriesIndex:S,w:i}));var ae=i.globals.dataLabels.style.colors[S],me=r.group({class:"apexcharts-datalabels"}),Te=r.drawText({x:ie,y:le,text:J,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:ae});if(me.add(Te),i.config.dataLabels.dropShadow.enabled){var ye=i.config.dataLabels.dropShadow;n.dropShadow(Te,ye)}Te.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&i.globals.resized===!1&&(Te.node.classList.add("apexcharts-pie-label-delay"),Te.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(me)}}}return s}},{key:"addListeners",value:function(e,t){var i=new vi(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var i=this.w,n=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,r=n,o=t.startAngle,s=t.startAngle;t.prevStartAngle!==void 0&&t.prevEndAngle!==void 0&&(o=t.prevEndAngle,r=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===i.config.series.length-1&&(n+s>this.fullAngle?t.endAngle=t.endAngle-(n+s):n+s<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(n+s)))),n===this.fullAngle&&(n=this.fullAngle-.01),this.animateArc(e,o,s,n,r,t)}},{key:"animateArc",value:function(e,t,i,n,r,o){var s,h=this,f=this.w,y=new gg(this.ctx),x=o.size;(isNaN(t)||isNaN(r))&&(t=i,r=n,o.dur=0);var S=n,E=i,z=t<i?this.fullAngle+t-i:t-i;f.globals.dataChanged&&o.shouldSetPrevPaths&&o.prevEndAngle&&(s=h.getPiePath({me:h,startAngle:o.prevStartAngle,angle:o.prevEndAngle<o.prevStartAngle?this.fullAngle+o.prevEndAngle-o.prevStartAngle:o.prevEndAngle-o.prevStartAngle,size:x}),e.attr({d:s})),o.dur!==0?e.animate(o.dur,o.animBeginArr[o.i]).after((function(){h.chartType!=="pie"&&h.chartType!=="donut"&&h.chartType!=="polarArea"||this.animate(f.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":h.strokeWidth}),o.i===f.config.series.length-1&&y.animationCompleted(e)})).during((function(D){S=z+(n-z)*D,o.animateStartingPos&&(S=r+(n-r)*D,E=t-r+(i-(t-r))*D),s=h.getPiePath({me:h,startAngle:E,angle:S,size:x}),e.node.setAttribute("data:pathOrig",s),e.attr({d:s})})):(s=h.getPiePath({me:h,startAngle:E,angle:n,size:x}),o.isTrack||(f.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",s),e.attr({d:s,"stroke-width":h.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,i=this.w,n=this,r=n.sliceSizes[e]+(i.config.plotOptions.pie.expandOnClick?4:0),o=i.globals.dom.Paper.findOne(".apexcharts-".concat(n.chartType.toLowerCase(),"-slice-").concat(e));if(o.attr("data:pieClicked")!=="true"){var s=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(s,(function(x){x.setAttribute("data:pieClicked","false");var S=x.getAttribute("data:pathOrig");S&&x.setAttribute("d",S)})),i.globals.capturedDataPointIndex=e,o.attr("data:pieClicked","true");var h=parseInt(o.attr("data:startAngle"),10),f=parseInt(o.attr("data:angle"),10);t=n.getPiePath({me:n,startAngle:h,angle:f,size:r}),f!==360&&o.plot(t)}else{o.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(o.node,this.donutDataLabels);var y=o.attr("data:pathOrig");o.attr({d:y})}}},{key:"getChangedPath",value:function(e,t){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),i}},{key:"getPiePath",value:function(e){var t,i=e.me,n=e.startAngle,r=e.angle,o=e.size,s=new vi(this.ctx),h=n,f=Math.PI*(h-90)/180,y=r+n;Math.ceil(y)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(y=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(y)>this.fullAngle&&(y-=this.fullAngle);var x=Math.PI*(y-90)/180,S=i.centerX+o*Math.cos(f),E=i.centerY+o*Math.sin(f),z=i.centerX+o*Math.cos(x),D=i.centerY+o*Math.sin(x),F=At.polarToCartesian(i.centerX,i.centerY,i.donutSize,y),U=At.polarToCartesian(i.centerX,i.centerY,i.donutSize,h),G=r>180?1:0,Z=["M",S,E,"A",o,o,0,G,1,z,D];return t=i.chartType==="donut"?[].concat(Z,["L",F.x,F.y,"A",i.donutSize,i.donutSize,0,G,0,U.x,U.y,"L",S,E,"z"]).join(" "):i.chartType==="pie"||i.chartType==="polarArea"?[].concat(Z,["L",i.centerX,i.centerY,"L",S,E]).join(" "):[].concat(Z).join(" "),s.roundPathCorners(t,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(e){var t=this.w,i=new cP(this.ctx),n=new vi(this.ctx),r=new gP(this.ctx),o=n.group(),s=n.group(),h=i.niceScale(0,Math.ceil(this.maxY),0),f=h.result.reverse(),y=h.result.length;this.maxY=h.niceMax;for(var x=t.globals.radialSize,S=x/(y-1),E=0;E<y-1;E++){var z=n.drawCircle(x);if(z.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var D=r.drawYAxisTexts(this.centerX,this.centerY-x+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,E,f[E]);s.add(D)}o.add(z),x-=S}this.drawSpokes(e),e.add(o),e.add(s)}},{key:"renderInnerDataLabels",value:function(e,t,i){var n=this.w,r=new vi(this.ctx),o=t.total.show;e.node.innerHTML="",e.node.style.opacity=i.opacity;var s,h,f=i.centerX,y=this.donutDataLabels.total.label?i.centerY:i.centerY-i.centerY/6;s=t.name.color===void 0?n.globals.colors[0]:t.name.color;var x=t.name.fontSize,S=t.name.fontFamily,E=t.name.fontWeight;h=t.value.color===void 0?n.config.chart.foreColor:t.value.color;var z=t.value.formatter,D="",F="";if(o?(s=t.total.color,x=t.total.fontSize,S=t.total.fontFamily,E=t.total.fontWeight,F=this.donutDataLabels.total.label?t.total.label:"",D=t.total.formatter(n)):n.globals.series.length===1&&(D=z(n.globals.series[0],n),F=n.globals.seriesNames[0]),F&&(F=t.name.formatter(F,t.total.show,n)),t.name.show){var U=r.drawText({x:f,y:y+parseFloat(t.name.offsetY),text:F,textAnchor:"middle",foreColor:s,fontSize:x,fontWeight:E,fontFamily:S});U.node.classList.add("apexcharts-datalabel-label"),e.add(U)}if(t.value.show){var G=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,Z=r.drawText({x:f,y:y+G,text:D,textAnchor:"middle",foreColor:h,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});Z.node.classList.add("apexcharts-datalabel-value"),e.add(Z)}return e}},{key:"printInnerLabels",value:function(e,t,i,n){var r,o=this.w;n?r=e.name.color===void 0?o.globals.colors[parseInt(n.parentNode.getAttribute("rel"),10)-1]:e.name.color:o.globals.series.length>1&&e.total.show&&(r=e.total.color);var s=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),h=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,e.value.formatter)(i,o),n||typeof e.total.formatter!="function"||(i=e.total.formatter(o));var f=t===e.total.label;t=this.donutDataLabels.total.label?e.name.formatter(t,f,o):"",s!==null&&(s.textContent=t),h!==null&&(h.textContent=i),s!==null&&(s.style.fill=r)}},{key:"printDataLabelsInner",value:function(e,t){var i=this.w,n=e.getAttribute("data:value"),r=i.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(t,r,n,e);var o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");o!==null&&(o.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,i=this.w,n=new vi(this.ctx),r=i.config.plotOptions.polarArea.spokes;if(r.strokeWidth!==0){for(var o=[],s=360/i.globals.series.length,h=0;h<i.globals.series.length;h++)o.push(At.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+s*h));o.forEach((function(f,y){var x=n.drawLine(f.x,f.y,t.centerX,t.centerY,Array.isArray(r.connectorColors)?r.connectorColors[y]:r.connectorColors);e.add(x)}))}}},{key:"revertDataLabelsInner",value:function(){var e=this.w;if(this.donutDataLabels.show){var t=e.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),i=this.renderInnerDataLabels(t,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});e.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(i)}}}]),a})(),C8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var t=this.w;this.graphics=new vi(this.ctx),this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.logBase=t.config.yaxis[0].logBase,this.coreUtils=new Rs(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),t.config.plotOptions.radar.size!==void 0&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Sn(a,[{key:"draw",value:function(e){var t=this,i=this.w,n=new su(this.ctx),r=[],o=new hg(this.ctx);e.length&&(this.dataPointsLen=e[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=i.globals.gridWidth/2,h=i.globals.gridHeight/2,f=s+i.config.plotOptions.radar.offsetX,y=h+i.config.plotOptions.radar.offsetY,x=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(f||0,", ").concat(y||0,")")}),S=[],E=null,z=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((function(F,U){var G=F.length===i.globals.dataPoints,Z=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":G,seriesName:At.escapeString(i.globals.seriesNames[U]),rel:U+1,"data:realIndex":U});t.dataRadiusOfPercent[U]=[],t.dataRadius[U]=[],t.angleArr[U]=[],F.forEach((function(Re,We){var Le=Math.abs(t.maxValue-t.minValue);Re-=t.minValue,t.isLog&&(Re=t.coreUtils.getLogVal(t.logBase,Re,0)),t.dataRadiusOfPercent[U][We]=Re/Le,t.dataRadius[U][We]=t.dataRadiusOfPercent[U][We]*t.size,t.angleArr[U][We]=We*t.disAngle})),S=t.getDataPointsPos(t.dataRadius[U],t.angleArr[U]);var ee=t.createPaths(S,{x:0,y:0});E=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),z=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":U}),i.globals.delayedElements.push({el:E.node,index:U});var ie={i:U,realIndex:U,animationDelay:U,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[U],strokeLineCap:i.config.stroke.lineCap},le=null;i.globals.previousPaths.length>0&&(le=t.getPreviousPath(U));for(var J=0;J<ee.linePathsTo.length;J++){var re=t.graphics.renderPaths(Ui(Ui({},ie),{},{pathFrom:le===null?ee.linePathsFrom[J]:le,pathTo:ee.linePathsTo[J],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[U]:t.strokeWidth,fill:"none",drawShadow:!1}));Z.add(re);var ae=n.fillPath({seriesNumber:U}),me=t.graphics.renderPaths(Ui(Ui({},ie),{},{pathFrom:le===null?ee.areaPathsFrom[J]:le,pathTo:ee.areaPathsTo[J],strokeWidth:0,fill:ae,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var Te=new Lo(t.ctx),ye=i.config.chart.dropShadow;Te.dropShadow(me,Object.assign({},ye,{noUserSpaceOnUse:!0}),U)}Z.add(me)}F.forEach((function(Re,We){var Le=new xg(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:U,dataPointIndex:We}),ht=t.graphics.drawMarker(S[We].x,S[We].y,Le);ht.attr("rel",We),ht.attr("j",We),ht.attr("index",U),ht.node.setAttribute("default-marker-size",Le.pSize);var $e=t.graphics.group({class:"apexcharts-series-markers"});$e&&$e.add(ht),E.add($e),Z.add(E);var pt=i.config.dataLabels;if(pt.enabled){var Dt=pt.formatter(i.globals.series[U][We],{seriesIndex:U,dataPointIndex:We,w:i});o.plotDataLabelsText({x:S[We].x,y:S[We].y,text:Dt,textAnchor:"middle",i:U,j:U,parent:z,offsetCorrection:!1,dataLabelsConfig:Ui({},pt)})}Z.add(z)})),r.push(Z)})),this.drawPolygons({parent:x}),i.config.xaxis.labels.show){var D=this.drawXAxisTexts();x.add(D)}return r.forEach((function(F){x.add(F)})),x.add(this.yaxisLabels),x}},{key:"drawPolygons",value:function(e){for(var t=this,i=this.w,n=e.parent,r=new gP(this.ctx),o=i.globals.yAxisScale[0].result.reverse(),s=o.length,h=[],f=this.size/(s-1),y=0;y<s;y++)h[y]=f*y;h.reverse();var x=[],S=[];h.forEach((function(E,z){var D=At.getPolygonPos(E,t.dataPointsLen),F="";D.forEach((function(U,G){if(z===0){var Z=t.graphics.drawLine(U.x,U.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[G]:t.polygons.connectorColors);S.push(Z)}G===0&&t.yaxisLabelsTextsPos.push({x:U.x,y:U.y}),F+=U.x+","+U.y+" "})),x.push(F)})),x.forEach((function(E,z){var D=t.polygons.strokeColors,F=t.polygons.strokeWidth,U=t.graphics.drawPolygon(E,Array.isArray(D)?D[z]:D,Array.isArray(F)?F[z]:F,i.globals.radarPolygons.fill.colors[z]);n.add(U)})),S.forEach((function(E){n.add(E)})),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(E,z){var D=r.drawYAxisTexts(E.x,E.y,z,o[z]);t.yaxisLabels.add(D)}))}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,i=t.config.xaxis.labels,n=this.graphics.group({class:"apexcharts-xaxis"}),r=At.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach((function(o,s){var h=t.config.xaxis.labels.formatter,f=new hg(e.ctx);if(r[s]){var y=e.getTextPos(r[s],e.size),x=h(o,{seriesIndex:-1,dataPointIndex:s,w:t});f.plotDataLabelsText({x:y.newX,y:y.newY,text:x,textAnchor:y.textAnchor,i:s,j:s,parent:n,className:"apexcharts-xaxis-label",color:Array.isArray(i.style.colors)&&i.style.colors[s]?i.style.colors[s]:"#a8a8a8",dataLabelsConfig:Ui({textAnchor:y.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1}).on("click",(function(S){if(typeof t.config.chart.events.xAxisLabelClick=="function"){var E=Object.assign({},t,{labelIndex:s});t.config.chart.events.xAxisLabelClick(S,e.ctx,E)}}))}})),n}},{key:"createPaths",value:function(e,t){var i=this,n=[],r=[],o=[],s=[];if(e.length){r=[this.graphics.move(t.x,t.y)],s=[this.graphics.move(t.x,t.y)];var h=this.graphics.move(e[0].x,e[0].y),f=this.graphics.move(e[0].x,e[0].y);e.forEach((function(y,x){h+=i.graphics.line(y.x,y.y),f+=i.graphics.line(y.x,y.y),x===e.length-1&&(h+="Z",f+="Z")})),n.push(h),o.push(f)}return{linePathsFrom:r,linePathsTo:n,areaPathsFrom:s,areaPathsTo:o}}},{key:"getTextPos",value:function(e,t){var i="middle",n=e.x,r=e.y;return Math.abs(e.x)>=10?e.x>0?(i="start",n+=10):e.x<0&&(i="end",n-=10):i="middle",Math.abs(e.y)>=t-10&&(e.y<0?r-=10:e.y>0&&(r+=10)),{textAnchor:i,newX:n,newY:r}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,i=null,n=0;n<t.globals.previousPaths.length;n++){var r=t.globals.previousPaths[n];r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(e,10)&&t.globals.previousPaths[n].paths[0]!==void 0&&(i=t.globals.previousPaths[n].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var n=[],r=0;r<i;r++){var o={};o.x=e[r]*Math.sin(t[r]),o.y=-e[r]*Math.cos(t[r]),n.push(o)}return n}}]),a})(),A8=(function(a){by(t,mP);var e=vy(t);function t(i){var n;wn(this,t),(n=e.call(this,i)).ctx=i,n.w=i.w,n.animBeginArr=[0],n.animDur=0;var r=n.w;return n.startAngle=r.config.plotOptions.radialBar.startAngle,n.endAngle=r.config.plotOptions.radialBar.endAngle,n.totalAngle=Math.abs(r.config.plotOptions.radialBar.endAngle-r.config.plotOptions.radialBar.startAngle),n.trackStartAngle=r.config.plotOptions.radialBar.track.startAngle,n.trackEndAngle=r.config.plotOptions.radialBar.track.endAngle,n.barLabels=n.w.config.plotOptions.radialBar.barLabels,n.donutDataLabels=n.w.config.plotOptions.radialBar.dataLabels,n.radialDataLabels=n.donutDataLabels,n.trackStartAngle||(n.trackStartAngle=n.startAngle),n.trackEndAngle||(n.trackEndAngle=n.endAngle),n.endAngle===360&&(n.endAngle=359.99),n.margin=parseInt(r.config.plotOptions.radialBar.track.margin,10),n.onBarLabelClick=n.onBarLabelClick.bind(EI(n)),n}return Sn(t,[{key:"draw",value:function(i){var n=this.w,r=new vi(this.ctx),o=r.group({class:"apexcharts-radialbar"});if(n.globals.noData)return o;var s=r.group(),h=this.defaultSize/2,f=n.globals.gridWidth/2,y=this.defaultSize/2.05;n.config.chart.sparkline.enabled||(y=y-n.config.stroke.width-n.config.chart.dropShadow.blur);var x=n.globals.fill.colors;if(n.config.plotOptions.radialBar.track.show){var S=this.drawTracks({size:y,centerX:f,centerY:h,colorArr:x,series:i});s.add(S)}var E=this.drawArcs({size:y,centerX:f,centerY:h,colorArr:x,series:i}),z=360;n.config.plotOptions.radialBar.startAngle<0&&(z=this.totalAngle);var D=(360-z)/360;if(n.globals.radialSize=y-y*D,this.radialDataLabels.value.show){var F=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);n.globals.radialSize+=F*D}return s.add(E.g),n.config.plotOptions.radialBar.hollow.position==="front"&&(E.g.add(E.elHollow),E.dataLabels&&E.g.add(E.dataLabels)),o.add(s),o}},{key:"drawTracks",value:function(i){var n=this.w,r=new vi(this.ctx),o=r.group({class:"apexcharts-tracks"}),s=new Lo(this.ctx),h=new su(this.ctx),f=this.getStrokeWidth(i);i.size=i.size-f/2;for(var y=0;y<i.series.length;y++){var x=r.group({class:"apexcharts-radialbar-track apexcharts-track"});o.add(x),x.attr({rel:y+1}),i.size=i.size-f-this.margin;var S=n.config.plotOptions.radialBar.track,E=h.fillPath({seriesNumber:0,size:i.size,fillColors:Array.isArray(S.background)?S.background[y]:S.background,solid:!0}),z=this.trackStartAngle,D=this.trackEndAngle;Math.abs(D)+Math.abs(z)>=360&&(D=360-Math.abs(this.startAngle)-.1);var F=r.drawPath({d:"",stroke:E,strokeWidth:f*parseInt(S.strokeWidth,10)/100,fill:"none",strokeOpacity:S.opacity,classes:"apexcharts-radialbar-area"});if(S.dropShadow.enabled){var U=S.dropShadow;s.dropShadow(F,U)}x.add(F),F.attr("id","apexcharts-radialbarTrack-"+y),this.animatePaths(F,{centerX:i.centerX,centerY:i.centerY,endAngle:D,startAngle:z,size:i.size,i:y,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return o}},{key:"drawArcs",value:function(i){var n=this.w,r=new vi(this.ctx),o=new su(this.ctx),s=new Lo(this.ctx),h=r.group(),f=this.getStrokeWidth(i);i.size=i.size-f/2;var y=n.config.plotOptions.radialBar.hollow.background,x=i.size-f*i.series.length-this.margin*i.series.length-f*parseInt(n.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,S=x-n.config.plotOptions.radialBar.hollow.margin;n.config.plotOptions.radialBar.hollow.image!==void 0&&(y=this.drawHollowImage(i,h,x,y));var E=this.drawHollow({size:S,centerX:i.centerX,centerY:i.centerY,fill:y||"transparent"});if(n.config.plotOptions.radialBar.hollow.dropShadow.enabled){var z=n.config.plotOptions.radialBar.hollow.dropShadow;s.dropShadow(E,z)}var D=1;!this.radialDataLabels.total.show&&n.globals.series.length>1&&(D=0);var F=null;if(this.radialDataLabels.show){var U=n.globals.dom.Paper.findOne(".apexcharts-datalabels-group");F=this.renderInnerDataLabels(U,this.radialDataLabels,{hollowSize:x,centerX:i.centerX,centerY:i.centerY,opacity:D})}n.config.plotOptions.radialBar.hollow.position==="back"&&(h.add(E),F&&h.add(F));var G=!1;n.config.plotOptions.radialBar.inverseOrder&&(G=!0);for(var Z=G?i.series.length-1:0;G?Z>=0:Z<i.series.length;G?Z--:Z++){var ee=r.group({class:"apexcharts-series apexcharts-radial-series",seriesName:At.escapeString(n.globals.seriesNames[Z])});h.add(ee),ee.attr({rel:Z+1,"data:realIndex":Z}),this.ctx.series.addCollapsedClassToSeries(ee,Z),i.size=i.size-f-this.margin;var ie=o.fillPath({seriesNumber:Z,size:i.size,value:i.series[Z]}),le=this.startAngle,J=void 0,re=At.negToZero(i.series[Z]>100?100:i.series[Z])/100,ae=Math.round(this.totalAngle*re)+this.startAngle,me=void 0;n.globals.dataChanged&&(J=this.startAngle,me=Math.round(this.totalAngle*At.negToZero(n.globals.previousPaths[Z])/100)+J),Math.abs(ae)+Math.abs(le)>360&&(ae-=.01),Math.abs(me)+Math.abs(J)>360&&(me-=.01);var Te=ae-le,ye=Array.isArray(n.config.stroke.dashArray)?n.config.stroke.dashArray[Z]:n.config.stroke.dashArray,Re=r.drawPath({d:"",stroke:ie,strokeWidth:f,fill:"none",fillOpacity:n.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+Z,strokeDashArray:ye});if(vi.setAttrs(Re.node,{"data:angle":Te,"data:value":i.series[Z]}),n.config.chart.dropShadow.enabled){var We=n.config.chart.dropShadow;s.dropShadow(Re,We,Z)}if(s.setSelectionFilter(Re,0,Z),this.addListeners(Re,this.radialDataLabels),ee.add(Re),Re.attr({index:0,j:Z}),this.barLabels.enabled){var Le=At.polarToCartesian(i.centerX,i.centerY,i.size,le),ht=this.barLabels.formatter(n.globals.seriesNames[Z],{seriesIndex:Z,w:n}),$e=["apexcharts-radialbar-label"];this.barLabels.onClick||$e.push("apexcharts-no-click");var pt=this.barLabels.useSeriesColors?n.globals.colors[Z]:n.config.chart.foreColor;pt||(pt=n.config.chart.foreColor);var Dt=Le.x+this.barLabels.offsetX,qe=Le.y+this.barLabels.offsetY,Nt=r.drawText({x:Dt,y:qe,text:ht,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:pt,cssClass:$e.join(" ")});Nt.on("click",this.onBarLabelClick),Nt.attr({rel:Z+1}),le!==0&&Nt.attr({"transform-origin":"".concat(Dt," ").concat(qe),transform:"rotate(".concat(le," 0 0)")}),ee.add(Nt)}var ni=0;!this.initialAnim||n.globals.resized||n.globals.dataChanged||(ni=n.config.chart.animations.speed),n.globals.dataChanged&&(ni=n.config.chart.animations.dynamicAnimation.speed),this.animDur=ni/(1.2*i.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(Re,{centerX:i.centerX,centerY:i.centerY,endAngle:ae,startAngle:le,prevEndAngle:me,prevStartAngle:J,size:i.size,i:Z,totalItems:2,animBeginArr:this.animBeginArr,dur:ni,shouldSetPrevPaths:!0})}return{g:h,elHollow:E,dataLabels:F}}},{key:"drawHollow",value:function(i){var n=new vi(this.ctx).drawCircle(2*i.size);return n.attr({class:"apexcharts-radialbar-hollow",cx:i.centerX,cy:i.centerY,r:i.size,fill:i.fill}),n}},{key:"drawHollowImage",value:function(i,n,r,o){var s=this.w,h=new su(this.ctx),f=At.randomId(),y=s.config.plotOptions.radialBar.hollow.image;if(s.config.plotOptions.radialBar.hollow.imageClipped)h.clippedImgArea({width:r,height:r,image:y,patternID:"pattern".concat(s.globals.cuid).concat(f)}),o="url(#pattern".concat(s.globals.cuid).concat(f,")");else{var x=s.config.plotOptions.radialBar.hollow.imageWidth,S=s.config.plotOptions.radialBar.hollow.imageHeight;if(x===void 0&&S===void 0){var E=s.globals.dom.Paper.image(y,(function(D){this.move(i.centerX-D.width/2+s.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-D.height/2+s.config.plotOptions.radialBar.hollow.imageOffsetY)}));n.add(E)}else{var z=s.globals.dom.Paper.image(y,(function(D){this.move(i.centerX-x/2+s.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-S/2+s.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(x,S)}));n.add(z)}}return o}},{key:"getStrokeWidth",value:function(i){var n=this.w;return i.size*(100-parseInt(n.config.plotOptions.radialBar.hollow.size,10))/100/(i.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(i){var n=parseInt(i.target.getAttribute("rel"),10)-1,r=this.barLabels.onClick,o=this.w;r&&r(o.globals.seriesNames[n],{w:o,seriesIndex:n})}}]),t})(),T8=(function(a){by(t,dg);var e=vy(t);function t(){return wn(this,t),e.apply(this,arguments)}return Sn(t,[{key:"draw",value:function(i,n){var r=this.w,o=new vi(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=i,this.seriesRangeStart=r.globals.seriesRangeStart,this.seriesRangeEnd=r.globals.seriesRangeEnd,this.barHelpers.initVariables(i);for(var s=o.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),h=0;h<i.length;h++){var f,y,x,S,E=void 0,z=void 0,D=r.globals.comboCharts?n[h]:h,F=this.barHelpers.getGroupIndex(D).columnGroupIndex,U=o.group({class:"apexcharts-series",seriesName:At.escapeString(r.globals.seriesNames[D]),rel:h+1,"data:realIndex":D});this.ctx.series.addCollapsedClassToSeries(U,D),i[h].length>0&&(this.visibleI=this.visibleI+1);var G=0,Z=0,ee=0;this.yRatio.length>1&&(this.yaxisIndex=r.globals.seriesYAxisReverseMap[D][0],ee=D);var ie=this.barHelpers.initialPositions(D);z=ie.y,S=ie.zeroW,E=ie.x,Z=ie.barWidth,G=ie.barHeight,f=ie.xDivision,y=ie.yDivision,x=ie.zeroH;for(var le=o.group({class:"apexcharts-datalabels","data:realIndex":D}),J=o.group({class:"apexcharts-rangebar-goals-markers"}),re=0;re<r.globals.dataPoints;re++){var ae=this.barHelpers.getStrokeWidth(h,re,D),me=this.seriesRangeStart[h][re],Te=this.seriesRangeEnd[h][re],ye=null,Re=null,We=null,Le={x:E,y:z,strokeWidth:ae,elSeries:U},ht=this.seriesLen;if(r.config.plotOptions.bar.rangeBarGroupRows&&(ht=1),r.config.series[h].data[re]===void 0)break;if(this.isHorizontal){We=z+G*this.visibleI;var $e=(y-G*ht)/2;if(r.config.series[h].data[re].x){var pt=this.detectOverlappingBars({i:h,j:re,barYPosition:We,srty:$e,barHeight:G,yDivision:y,initPositions:ie});G=pt.barHeight,We=pt.barYPosition}Z=(ye=this.drawRangeBarPaths(Ui({indexes:{i:h,j:re,realIndex:D},barHeight:G,barYPosition:We,zeroW:S,yDivision:y,y1:me,y2:Te},Le))).barWidth}else{r.globals.isXNumeric&&(E=(r.globals.seriesX[h][re]-r.globals.minX)/this.xRatio-Z/2),Re=E+Z*this.visibleI;var Dt=(f-Z*ht)/2;if(r.config.series[h].data[re].x){var qe=this.detectOverlappingBars({i:h,j:re,barXPosition:Re,srtx:Dt,barWidth:Z,xDivision:f,initPositions:ie});Z=qe.barWidth,Re=qe.barXPosition}G=(ye=this.drawRangeColumnPaths(Ui({indexes:{i:h,j:re,realIndex:D,translationsIndex:ee},barWidth:Z,barXPosition:Re,zeroH:x,xDivision:f},Le))).barHeight}var Nt=this.barHelpers.drawGoalLine({barXPosition:ye.barXPosition,barYPosition:We,goalX:ye.goalX,goalY:ye.goalY,barHeight:G,barWidth:Z});Nt&&J.add(Nt),z=ye.y,E=ye.x;var ni=this.barHelpers.getPathFillColor(i,h,re,D);this.renderSeries({realIndex:D,pathFill:ni.color,lineFill:ni.useRangeColor?ni.color:r.globals.stroke.colors[D],j:re,i:h,x:E,y:z,y1:me,y2:Te,pathFrom:ye.pathFrom,pathTo:ye.pathTo,strokeWidth:ae,elSeries:U,series:i,barHeight:G,barWidth:Z,barXPosition:Re,barYPosition:We,columnGroupIndex:F,elDataLabelsWrap:le,elGoalsMarkers:J,visibleSeries:this.visibleI,type:"rangebar"})}s.add(U)}return s}},{key:"detectOverlappingBars",value:function(i){var n=i.i,r=i.j,o=i.barYPosition,s=i.barXPosition,h=i.srty,f=i.srtx,y=i.barHeight,x=i.barWidth,S=i.yDivision,E=i.xDivision,z=i.initPositions,D=this.w,F=[],U=D.config.series[n].data[r].rangeName,G=D.config.series[n].data[r].x,Z=Array.isArray(G)?G.join(" "):G,ee=D.globals.labels.map((function(le){return Array.isArray(le)?le.join(" "):le})).indexOf(Z),ie=D.globals.seriesRange[n].findIndex((function(le){return le.x===Z&&le.overlaps.length>0}));return this.isHorizontal?(o=D.config.plotOptions.bar.rangeBarGroupRows?h+S*ee:h+y*this.visibleI+S*ee,ie>-1&&!D.config.plotOptions.bar.rangeBarOverlap&&(F=D.globals.seriesRange[n][ie].overlaps).indexOf(U)>-1&&(o=(y=z.barHeight/F.length)*this.visibleI+S*(100-parseInt(this.barOptions.barHeight,10))/100/2+y*(this.visibleI+F.indexOf(U))+S*ee)):(ee>-1&&!D.globals.timescaleLabels.length&&(s=D.config.plotOptions.bar.rangeBarGroupRows?f+E*ee:f+x*this.visibleI+E*ee),ie>-1&&!D.config.plotOptions.bar.rangeBarOverlap&&(F=D.globals.seriesRange[n][ie].overlaps).indexOf(U)>-1&&(s=(x=z.barWidth/F.length)*this.visibleI+E*(100-parseInt(this.barOptions.barWidth,10))/100/2+x*(this.visibleI+F.indexOf(U))+E*ee)),{barYPosition:o,barXPosition:s,barHeight:y,barWidth:x}}},{key:"drawRangeColumnPaths",value:function(i){var n=i.indexes,r=i.x,o=i.xDivision,s=i.barWidth,h=i.barXPosition,f=i.zeroH,y=this.w,x=n.i,S=n.j,E=n.realIndex,z=n.translationsIndex,D=this.yRatio[z],F=this.getRangeValue(E,S),U=Math.min(F.start,F.end),G=Math.max(F.start,F.end);this.series[x][S]===void 0||this.series[x][S]===null?U=f:(U=f-U/D,G=f-G/D);var Z=Math.abs(G-U),ee=this.barHelpers.getColumnPaths({barXPosition:h,barWidth:s,y1:U,y2:G,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:E,i:E,j:S,w:y});if(y.globals.isXNumeric){var ie=this.getBarXForNumericXAxis({x:r,j:S,realIndex:E,barWidth:s});r=ie.x,h=ie.barXPosition}else r+=o;return{pathTo:ee.pathTo,pathFrom:ee.pathFrom,barHeight:Z,x:r,y:F.start<0&&F.end<0?U:G,goalY:this.barHelpers.getGoalValues("y",null,f,x,S,z),barXPosition:h}}},{key:"preventBarOverflow",value:function(i){var n=this.w;return i<0&&(i=0),i>n.globals.gridWidth&&(i=n.globals.gridWidth),i}},{key:"drawRangeBarPaths",value:function(i){var n=i.indexes,r=i.y,o=i.y1,s=i.y2,h=i.yDivision,f=i.barHeight,y=i.barYPosition,x=i.zeroW,S=this.w,E=n.realIndex,z=n.j,D=this.preventBarOverflow(x+o/this.invertedYRatio),F=this.preventBarOverflow(x+s/this.invertedYRatio),U=this.getRangeValue(E,z),G=Math.abs(F-D),Z=this.barHelpers.getBarpaths({barYPosition:y,barHeight:f,x1:D,x2:F,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:E,realIndex:E,j:z,w:S});return S.globals.isXNumeric||(r+=h),{pathTo:Z.pathTo,pathFrom:Z.pathFrom,barWidth:G,x:U.start<0&&U.end<0?D:F,goalX:this.barHelpers.getGoalValues("x",x,null,E,z),y:r}}},{key:"getRangeValue",value:function(i,n){var r=this.w;return{start:r.globals.seriesRangeStart[i][n],end:r.globals.seriesRangeEnd[i][n]}}}]),t})(),E8=(function(){function a(e){wn(this,a),this.w=e.w,this.lineCtx=e}return Sn(a,[{key:"sameValueSeriesFix",value:function(e,t){var i=this.w;if((i.config.fill.type==="gradient"||i.config.fill.type[e]==="gradient")&&new Rs(this.lineCtx.ctx,i).seriesHaveSameValues(e)){var n=t[e].slice();n[n.length-1]=n[n.length-1]+1e-6,t[e]=n}return t}},{key:"calculatePoints",value:function(e){var t=e.series,i=e.realIndex,n=e.x,r=e.y,o=e.i,s=e.j,h=e.prevY,f=this.w,y=[],x=[],S=this.lineCtx.categoryAxisCorrection+f.config.markers.offsetX;return f.globals.isXNumeric&&(S=(f.globals.seriesX[i][0]-f.globals.minX)/this.lineCtx.xRatio+f.config.markers.offsetX),s===0&&(y.push(S),x.push(At.isNumber(t[o][0])?h+f.config.markers.offsetY:null)),y.push(n+f.config.markers.offsetX),x.push(At.isNumber(t[o][s+1])?r+f.config.markers.offsetY:null),{x:y,y:x}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,i=e.pathFromArea,n=e.realIndex,r=this.w,o=0;o<r.globals.previousPaths.length;o++){var s=r.globals.previousPaths[o];(s.type==="line"||s.type==="area")&&s.paths.length>0&&parseInt(s.realIndex,10)===parseInt(n,10)&&(s.type==="line"?(this.lineCtx.appendPathFrom=!1,t=r.globals.previousPaths[o].paths[0].d):s.type==="area"&&(this.lineCtx.appendPathFrom=!1,i=r.globals.previousPaths[o].paths[0].d,r.config.stroke.show&&r.globals.previousPaths[o].paths[1]&&(t=r.globals.previousPaths[o].paths[1].d)))}return{pathFromLine:t,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(e){var t,i,n,r=e.i,o=e.realIndex,s=e.series,h=e.prevY,f=e.lineYPosition,y=e.translationsIndex,x=this.w,S=x.config.chart.stacked&&!x.globals.comboCharts||x.config.chart.stacked&&x.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[o])===null||t===void 0?void 0:t.type)==="bar"||((i=this.w.config.series[o])===null||i===void 0?void 0:i.type)==="column");if(((n=s[r])===null||n===void 0?void 0:n[0])!==void 0)h=(f=S&&r>0?this.lineCtx.prevSeriesY[r-1][0]:this.lineCtx.zeroY)-s[r][0]/this.lineCtx.yRatio[y]+2*(this.lineCtx.isReversed?s[r][0]/this.lineCtx.yRatio[y]:0);else if(S&&r>0&&s[r][0]===void 0){for(var E=r-1;E>=0;E--)if(s[E][0]!==null&&s[E][0]!==void 0){h=f=this.lineCtx.prevSeriesY[E][0];break}}return{prevY:h,lineYPosition:f}}}]),a})(),M8=function(a){for(var e,t,i,n,r=(function(y){for(var x=[],S=y[0],E=y[1],z=x[0]=sb(S,E),D=1,F=y.length-1;D<F;D++)S=E,E=y[D+1],x[D]=.5*(z+(z=sb(S,E)));return x[D]=z,x})(a),o=a.length-1,s=[],h=0;h<o;h++)i=sb(a[h],a[h+1]),Math.abs(i)<1e-6?r[h]=r[h+1]=0:(n=(e=r[h]/i)*e+(t=r[h+1]/i)*t)>9&&(n=3*i/Math.sqrt(n),r[h]=n*e,r[h+1]=n*t);for(var f=0;f<=o;f++)n=(a[Math.min(o,f+1)][0]-a[Math.max(0,f-1)][0])/(6*(1+r[f]*r[f])),s.push([n||0,r[f]*n||0]);return s},I8=function(a){var e=M8(a),t=a[1],i=a[0],n=[],r=e[1],o=e[0];n.push(i,[i[0]+o[0],i[1]+o[1],t[0]-r[0],t[1]-r[1],t[0],t[1]]);for(var s=2,h=e.length;s<h;s++){var f=a[s],y=e[s];n.push([f[0]-y[0],f[1]-y[1],f[0],f[1]])}return n},P8=function(a,e,t){var i=a.slice(e,t);if(e){if(t-e>1&&i[1].length<6){var n=i[0].length;i[1]=[2*i[0][n-2]-i[0][n-4],2*i[0][n-1]-i[0][n-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i};function sb(a,e){return(e[1]-a[1])/(e[0]-a[0])}var ob=(function(){function a(e,t,i){wn(this,a),this.ctx=e,this.w=e.w,this.xyRatios=t,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||i,this.scatter=new sP(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new E8(this),this.markers=new xg(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Sn(a,[{key:"draw",value:function(e,t,i,n){var r,o=this.w,s=new vi(this.ctx),h=o.globals.comboCharts?t:o.config.chart.type,f=s.group({class:"apexcharts-".concat(h,"-series apexcharts-plot-series")}),y=new Rs(this.ctx,o);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=y.getLogSeries(e),this.yRatio=y.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var x=[],S=0;S<e.length;S++){e=this.lineHelpers.sameValueSeriesFix(S,e);var E=o.globals.comboCharts?i[S]:S,z=this.yRatio.length>1?E:0;this._initSerieVariables(e,S,E);var D=[],F=[],U=[],G=o.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,E),o.globals.isXNumeric&&o.globals.seriesX.length>0&&(G=(o.globals.seriesX[E][0]-o.globals.minX)/this.xRatio),U.push(G);var Z,ee=G,ie=void 0,le=ee,J=this.zeroY,re=this.zeroY;J=this.lineHelpers.determineFirstPrevY({i:S,realIndex:E,series:e,prevY:J,lineYPosition:0,translationsIndex:z}).prevY,o.config.stroke.curve==="monotoneCubic"&&e[S][0]===null?D.push(null):D.push(J),Z=J,h==="rangeArea"&&(ie=re=this.lineHelpers.determineFirstPrevY({i:S,realIndex:E,series:n,prevY:re,lineYPosition:0,translationsIndex:z}).prevY,F.push(D[0]!==null?re:null));var ae=this._calculatePathsFrom({type:h,series:e,i:S,realIndex:E,translationsIndex:z,prevX:le,prevY:J,prevY2:re}),me=[D[0]],Te=[F[0]],ye={type:h,series:e,realIndex:E,translationsIndex:z,i:S,x:G,y:1,pX:ee,pY:Z,pathsFrom:ae,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:U,yArrj:D,y2Arrj:F,seriesRangeEnd:n},Re=this._iterateOverDataPoints(Ui(Ui({},ye),{},{iterations:h==="rangeArea"?e[S].length-1:void 0,isRangeStart:!0}));if(h==="rangeArea"){for(var We=this._calculatePathsFrom({series:n,i:S,realIndex:E,prevX:le,prevY:re}),Le=this._iterateOverDataPoints(Ui(Ui({},ye),{},{series:n,xArrj:[G],yArrj:me,y2Arrj:Te,pY:ie,areaPaths:Re.areaPaths,pathsFrom:We,iterations:n[S].length-1,isRangeStart:!1})),ht=Re.linePaths.length/2,$e=0;$e<ht;$e++)Re.linePaths[$e]=Le.linePaths[$e+ht]+Re.linePaths[$e];Re.linePaths.splice(ht),Re.pathFromLine=Le.pathFromLine+Re.pathFromLine}else Re.pathFromArea+="z";this._handlePaths({type:h,realIndex:E,i:S,paths:Re}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),x.push(this.elSeries)}if(((r=o.config.series[0])===null||r===void 0?void 0:r.zIndex)!==void 0&&x.sort((function(qe,Nt){return Number(qe.node.getAttribute("zIndex"))-Number(Nt.node.getAttribute("zIndex"))})),o.config.chart.stacked)for(var pt=x.length-1;pt>=0;pt--)f.add(x[pt]);else for(var Dt=0;Dt<x.length;Dt++)f.add(x[Dt]);return f}},{key:"_initSerieVariables",value:function(e,t,i){var n=this.w,r=new vi(this.ctx);this.xDivision=n.globals.gridWidth/(n.globals.dataPoints-(n.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(n.config.stroke.width)?n.config.stroke.width[i]:n.config.stroke.width;var o=0;if(this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[i],o=i),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed,this.zeroY=n.globals.gridHeight-this.baseLineY[o]-(this.isReversed?n.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[o]:0),this.areaBottomY=this.zeroY,(this.zeroY>n.globals.gridHeight||n.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=n.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=r.group({class:"apexcharts-series",zIndex:n.config.series[i].zIndex!==void 0?n.config.series[i].zIndex:i,seriesName:At.escapeString(n.globals.seriesNames[i])}),this.elPointsMain=r.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),n.globals.hasNullValues){var s=this.markers.plotChartMarkers({pointsPos:{x:[0],y:[n.globals.gridHeight+n.globals.markers.largestSize]},seriesIndex:t,j:0,pSize:.1,alwaysDrawMarker:!0,isVirtualPoint:!0});s!==null&&this.elPointsMain.add(s)}this.elDataLabelsWrap=r.group({class:"apexcharts-datalabels","data:realIndex":i});var h=e[t].length===n.globals.dataPoints;this.elSeries.attr({"data:longestSeries":h,rel:t+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,i,n,r,o=e.type,s=e.series,h=e.i,f=e.realIndex,y=e.translationsIndex,x=e.prevX,S=e.prevY,E=e.prevY2,z=this.w,D=new vi(this.ctx);if(s[h][0]===null){for(var F=0;F<s[h].length;F++)if(s[h][F]!==null){x=this.xDivision*F,S=this.zeroY-s[h][F]/this.yRatio[y],t=D.move(x,S),i=D.move(x,this.areaBottomY);break}}else t=D.move(x,S),o==="rangeArea"&&(t=D.move(x,E)+D.line(x,S)),i=D.move(x,this.areaBottomY)+D.line(x,S);if(n=D.move(0,this.areaBottomY)+D.line(0,this.areaBottomY),r=D.move(0,this.areaBottomY)+D.line(0,this.areaBottomY),z.globals.previousPaths.length>0){var U=this.lineHelpers.checkPreviousPaths({pathFromLine:n,pathFromArea:r,realIndex:f});n=U.pathFromLine,r=U.pathFromArea}return{prevX:x,prevY:S,linePath:t,areaPath:i,pathFromLine:n,pathFromArea:r}}},{key:"_handlePaths",value:function(e){var t=e.type,i=e.realIndex,n=e.i,r=e.paths,o=this.w,s=new vi(this.ctx),h=new su(this.ctx);this.prevSeriesY.push(r.yArrj),o.globals.seriesXvalues[i]=r.xArrj,o.globals.seriesYvalues[i]=r.yArrj;var f=o.config.forecastDataPoints;if(f.count>0&&t!=="rangeArea"){var y=o.globals.seriesXvalues[i][o.globals.seriesXvalues[i].length-f.count-1],x=s.drawRect(y,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(x.node);var S=s.drawRect(0,0,y,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(S.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var E={i:n,realIndex:i,animationDelay:n,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if(t==="area")for(var z=h.fillPath({seriesNumber:i}),D=0;D<r.areaPaths.length;D++){var F=s.renderPaths(Ui(Ui({},E),{},{pathFrom:r.pathFromArea,pathTo:r.areaPaths[D],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:z}));this.elSeries.add(F)}if(o.config.stroke.show&&!this.pointsChart){var U=null;if(t==="line")U=h.fillPath({seriesNumber:i,i:n});else if(o.config.stroke.fill.type==="solid")U=o.globals.stroke.colors[i];else{var G=o.config.fill;o.config.fill=o.config.stroke.fill,U=h.fillPath({seriesNumber:i,i:n}),o.config.fill=G}for(var Z=0;Z<r.linePaths.length;Z++){var ee=U;t==="rangeArea"&&(ee=h.fillPath({seriesNumber:i}));var ie=Ui(Ui({},E),{},{pathFrom:r.pathFromLine,pathTo:r.linePaths[Z],stroke:U,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:t==="rangeArea"?ee:"none"}),le=s.renderPaths(ie);if(this.elSeries.add(le),le.attr("fill-rule","evenodd"),f.count>0&&t!=="rangeArea"){var J=s.renderPaths(ie);J.node.setAttribute("stroke-dasharray",f.dashArray),f.strokeWidth&&J.node.setAttribute("stroke-width",f.strokeWidth),this.elSeries.add(J),J.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),le.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var t,i,n=this,r=e.type,o=e.series,s=e.iterations,h=e.realIndex,f=e.translationsIndex,y=e.i,x=e.x,S=e.y,E=e.pX,z=e.pY,D=e.pathsFrom,F=e.linePaths,U=e.areaPaths,G=e.seriesIndex,Z=e.lineYPosition,ee=e.xArrj,ie=e.yArrj,le=e.y2Arrj,J=e.isRangeStart,re=e.seriesRangeEnd,ae=this.w,me=new vi(this.ctx),Te=this.yRatio,ye=D.prevY,Re=D.linePath,We=D.areaPath,Le=D.pathFromLine,ht=D.pathFromArea,$e=At.isNumber(ae.globals.minYArr[h])?ae.globals.minYArr[h]:ae.globals.minY;s||(s=ae.globals.dataPoints>1?ae.globals.dataPoints-1:ae.globals.dataPoints);var pt=function(Zi,Li){return Li-Zi/Te[f]+2*(n.isReversed?Zi/Te[f]:0)},Dt=S,qe=ae.config.chart.stacked&&!ae.globals.comboCharts||ae.config.chart.stacked&&ae.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((t=this.w.config.series[h])===null||t===void 0?void 0:t.type)==="bar"||((i=this.w.config.series[h])===null||i===void 0?void 0:i.type)==="column"),Nt=ae.config.stroke.curve;Array.isArray(Nt)&&(Nt=Array.isArray(G)?Nt[G[y]]:Nt[y]);for(var ni,xi=0,Lt=0;Lt<s&&o[y].length!==0;Lt++){var Tt=o[y][Lt+1]===void 0||o[y][Lt+1]===null;if(ae.globals.isXNumeric){var wt=ae.globals.seriesX[h][Lt+1];ae.globals.seriesX[h][Lt+1]===void 0&&(wt=ae.globals.seriesX[h][s-1]),x=(wt-ae.globals.minX)/this.xRatio}else x+=this.xDivision;qe?y>0&&ae.globals.collapsedSeries.length<ae.config.series.length-1?Z=this.prevSeriesY[(function(Zi){for(var Li=Zi;Li>0;Li--){if(!(ae.globals.collapsedSeriesIndices.indexOf(G?.[Li]||Li)>-1))return Li;Li--}return 0})(y-1)][Lt+1]:Z=this.zeroY:Z=this.zeroY,Tt?S=pt($e,Z):(S=pt(o[y][Lt+1],Z),r==="rangeArea"&&(Dt=pt(re[y][Lt+1],Z))),ee.push(o[y][Lt+1]===null?null:x),!Tt||ae.config.stroke.curve!=="smooth"&&ae.config.stroke.curve!=="monotoneCubic"?(ie.push(S),le.push(Dt)):(ie.push(null),le.push(null));var mi=this.lineHelpers.calculatePoints({series:o,x,y:S,realIndex:h,i:y,j:Lt,prevY:ye}),bi=this._createPaths({type:r,series:o,i:y,realIndex:h,j:Lt,x,y:S,y2:Dt,xArrj:ee,yArrj:ie,y2Arrj:le,pX:E,pY:z,pathState:xi,segmentStartX:ni,linePath:Re,areaPath:We,linePaths:F,areaPaths:U,curve:Nt,isRangeStart:J});U=bi.areaPaths,F=bi.linePaths,E=bi.pX,z=bi.pY,xi=bi.pathState,ni=bi.segmentStartX,We=bi.areaPath,Re=bi.linePath,!this.appendPathFrom||ae.globals.hasNullValues||Nt==="monotoneCubic"&&r==="rangeArea"||(Le+=me.line(x,this.areaBottomY),ht+=me.line(x,this.areaBottomY)),this.handleNullDataPoints(o,mi,y,Lt,h),this._handleMarkersAndLabels({type:r,pointsPos:mi,i:y,j:Lt,realIndex:h,isRangeStart:J})}return{yArrj:ie,xArrj:ee,pathFromArea:ht,areaPaths:U,pathFromLine:Le,linePaths:F,linePath:Re,areaPath:We}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.type,i=e.pointsPos,n=e.isRangeStart,r=e.i,o=e.j,s=e.realIndex,h=this.w,f=new hg(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,o,{realIndex:s,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{h.globals.series[r].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var y=this.markers.plotChartMarkers({pointsPos:i,seriesIndex:s,j:o+1});y!==null&&this.elPointsMain.add(y)}var x=f.drawDataLabel({type:t,isRangeStart:n,pos:i,i:s,j:o+1});x!==null&&this.elDataLabelsWrap.add(x)}},{key:"_createPaths",value:function(e){var t=e.type,i=e.series,n=e.i;e.realIndex;var r,o=e.j,s=e.x,h=e.y,f=e.xArrj,y=e.yArrj,x=e.y2,S=e.y2Arrj,E=e.pX,z=e.pY,D=e.pathState,F=e.segmentStartX,U=e.linePath,G=e.areaPath,Z=e.linePaths,ee=e.areaPaths,ie=e.curve,le=e.isRangeStart,J=new vi(this.ctx),re=this.areaBottomY,ae=t==="rangeArea",me=t==="rangeArea"&&le;switch(ie){case"monotoneCubic":var Te=le?y:S;switch(D){case 0:if(Te[o+1]===null)break;D=1;case 1:if(!(ae?f.length===i[n].length:o===i[n].length-2))break;case 2:var ye=le?f:f.slice().reverse(),Re=le?Te:Te.slice().reverse(),We=(r=Re,ye.map((function(wt,mi){return[wt,r[mi]]})).filter((function(wt){return wt[1]!==null}))),Le=We.length>1?I8(We):We,ht=[];ae&&(me?ee=We:ht=ee.reverse());var $e=0,pt=0;if((function(wt,mi){for(var bi=(function(fn){var Ii=[],Qi=0;return fn.forEach((function(rn){rn!==null?Qi++:Qi>0&&(Ii.push(Qi),Qi=0)})),Qi>0&&Ii.push(Qi),Ii})(wt),Zi=[],Li=0,si=0;Li<bi.length;si+=bi[Li++])Zi[Li]=P8(mi,si,si+bi[Li]);return Zi})(Re,Le).forEach((function(wt){$e++;var mi=(function(Li){for(var si="",fn=0;fn<Li.length;fn++){var Ii=Li[fn],Qi=Ii.length;Qi>4?(si+="C".concat(Ii[0],", ").concat(Ii[1]),si+=", ".concat(Ii[2],", ").concat(Ii[3]),si+=", ".concat(Ii[4],", ").concat(Ii[5])):Qi>2&&(si+="S".concat(Ii[0],", ").concat(Ii[1]),si+=", ".concat(Ii[2],", ").concat(Ii[3]))}return si})(wt),bi=pt,Zi=(pt+=wt.length)-1;me?U=J.move(We[bi][0],We[bi][1])+mi:ae?U=J.move(ht[bi][0],ht[bi][1])+J.line(We[bi][0],We[bi][1])+mi+J.line(ht[Zi][0],ht[Zi][1]):(U=J.move(We[bi][0],We[bi][1])+mi,G=U+J.line(We[Zi][0],re)+J.line(We[bi][0],re)+"z",ee.push(G)),Z.push(U)})),ae&&$e>1&&!me){var Dt=Z.slice($e).reverse();Z.splice($e),Dt.forEach((function(wt){return Z.push(wt)}))}D=0}break;case"smooth":var qe=.35*(s-E);if(i[n][o]===null)D=0;else switch(D){case 0:if(F=E,U=me?J.move(E,S[o])+J.line(E,z):J.move(E,z),G=J.move(E,z),i[n][o+1]===null||i[n][o+1]===void 0){Z.push(U),ee.push(G);break}if(D=1,o<i[n].length-2){var Nt=J.curve(E+qe,z,s-qe,h,s,h);U+=Nt,G+=Nt;break}case 1:if(i[n][o+1]===null)U+=me?J.line(E,x):J.move(E,z),G+=J.line(E,re)+J.line(F,re)+"z",Z.push(U),ee.push(G),D=-1;else{var ni=J.curve(E+qe,z,s-qe,h,s,h);U+=ni,G+=ni,o>=i[n].length-2&&(me&&(U+=J.curve(s,h,s,h,s,x)+J.move(s,x)),G+=J.curve(s,h,s,h,s,re)+J.line(F,re)+"z",Z.push(U),ee.push(G),D=-1)}}E=s,z=h;break;default:var xi=function(wt,mi,bi){var Zi=[];switch(wt){case"stepline":Zi=J.line(mi,null,"H")+J.line(null,bi,"V");break;case"linestep":Zi=J.line(null,bi,"V")+J.line(mi,null,"H");break;case"straight":Zi=J.line(mi,bi)}return Zi};if(i[n][o]===null)D=0;else switch(D){case 0:if(F=E,U=me?J.move(E,S[o])+J.line(E,z):J.move(E,z),G=J.move(E,z),i[n][o+1]===null||i[n][o+1]===void 0){Z.push(U),ee.push(G);break}if(D=1,o<i[n].length-2){var Lt=xi(ie,s,h);U+=Lt,G+=Lt;break}case 1:if(i[n][o+1]===null)U+=me?J.line(E,x):J.move(E,z),G+=J.line(E,re)+J.line(F,re)+"z",Z.push(U),ee.push(G),D=-1;else{var Tt=xi(ie,s,h);U+=Tt,G+=Tt,o>=i[n].length-2&&(me&&(U+=J.line(s,x)),G+=J.line(s,re)+J.line(F,re)+"z",Z.push(U),ee.push(G),D=-1)}}E=s,z=h}return{linePaths:Z,areaPaths:ee,pX:E,pY:z,pathState:D,segmentStartX:F,linePath:U,areaPath:G}}},{key:"handleNullDataPoints",value:function(e,t,i,n,r){var o=this.w;if(e[i][n]===null&&o.config.markers.showNullDataPoints||e[i].length===1){var s=this.strokeWidth-o.config.markers.strokeWidth/2;s>0||(s=0);var h=this.markers.plotChartMarkers({pointsPos:t,seriesIndex:r,j:n+1,pSize:s,alwaysDrawMarker:!0});h!==null&&this.elPointsMain.add(h)}}}]),a})();window.TreemapSquared={},window.TreemapSquared.generate=(function(){function a(s,h,f,y){this.xoffset=s,this.yoffset=h,this.height=y,this.width=f,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(x){var S,E=[],z=this.xoffset,D=this.yoffset,F=r(x)/this.height,U=r(x)/this.width;if(this.width>=this.height)for(S=0;S<x.length;S++)E.push([z,D,z+F,D+x[S]/F]),D+=x[S]/F;else for(S=0;S<x.length;S++)E.push([z,D,z+x[S]/U,D+U]),z+=x[S]/U;return E},this.cutArea=function(x){var S;if(this.width>=this.height){var E=x/this.height,z=this.width-E;S=new a(this.xoffset+E,this.yoffset,z,this.height)}else{var D=x/this.width,F=this.height-D;S=new a(this.xoffset,this.yoffset+D,this.width,F)}return S}}function e(s,h,f,y,x){y=y===void 0?0:y,x=x===void 0?0:x;var S=t((function(E,z){var D,F=[],U=z/r(E);for(D=0;D<E.length;D++)F[D]=E[D]*U;return F})(s,h*f),[],new a(y,x,h,f),[]);return(function(E){var z,D,F=[];for(z=0;z<E.length;z++)for(D=0;D<E[z].length;D++)F.push(E[z][D]);return F})(S)}function t(s,h,f,y){var x,S,E;if(s.length!==0)return x=f.shortestEdge(),(function(z,D,F){var U;if(z.length===0)return!0;(U=z.slice()).push(D);var G=i(z,F),Z=i(U,F);return G>=Z})(h,S=s[0],x)?(h.push(S),t(s.slice(1),h,f,y)):(E=f.cutArea(r(h),y),y.push(f.getCoordinates(h)),t(s,[],E,y)),y;y.push(f.getCoordinates(h))}function i(s,h){var f=Math.min.apply(Math,s),y=Math.max.apply(Math,s),x=r(s);return Math.max(Math.pow(h,2)*y/Math.pow(x,2),Math.pow(x,2)/(Math.pow(h,2)*f))}function n(s){return s&&s.constructor===Array}function r(s){var h,f=0;for(h=0;h<s.length;h++)f+=s[h];return f}function o(s){var h,f=0;if(n(s[0]))for(h=0;h<s.length;h++)f+=o(s[h]);else f=r(s);return f}return function s(h,f,y,x,S){x=x===void 0?0:x,S=S===void 0?0:S;var E,z,D=[],F=[];if(n(h[0])){for(z=0;z<h.length;z++)D[z]=o(h[z]);for(E=e(D,f,y,x,S),z=0;z<h.length;z++)F.push(s(h[z],E[z][2]-E[z][0],E[z][3]-E[z][1],E[z][0],E[z][1]))}else F=e(h,f,y,x,S);return F}})();var L8=(function(){function a(e,t){wn(this,a),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new pP(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Sn(a,[{key:"draw",value:function(e){var t=this,i=this.w,n=new vi(this.ctx),r=new su(this.ctx),o=n.group({class:"apexcharts-treemap"});if(i.globals.noData)return o;var s=[];return e.forEach((function(h){var f=h.map((function(y){return Math.abs(y)}));s.push(f)})),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach((function(h,f){h.data.forEach((function(y){Array.isArray(t.labels[f])||(t.labels[f]=[]),t.labels[f].push(y.x)}))})),window.TreemapSquared.generate(s,i.globals.gridWidth,i.globals.gridHeight).forEach((function(h,f){var y=n.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:At.escapeString(i.globals.seriesNames[f]),rel:f+1,"data:realIndex":f});if(i.config.chart.dropShadow.enabled){var x=i.config.chart.dropShadow;new Lo(t.ctx).dropShadow(o,x,f)}var S=n.group({class:"apexcharts-data-labels"}),E={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0};h.forEach((function(Le,ht){var $e=Le[0],pt=Le[1],Dt=Le[2],qe=Le[3];E.xMin=Math.min(E.xMin,$e),E.yMin=Math.min(E.yMin,pt),E.xMax=Math.max(E.xMax,Dt),E.yMax=Math.max(E.yMax,qe);var Nt=t.helpers.getShadeColor(i.config.chart.type,f,ht,t.negRange),ni=Nt.color,xi=r.fillPath({color:ni,seriesNumber:f,dataPointIndex:ht}),Lt=n.drawRect($e,pt,Dt-$e,qe-pt,i.config.plotOptions.treemap.borderRadius,"#fff",1,t.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?ni:i.globals.stroke.colors[f]);Lt.attr({cx:$e,cy:pt,index:f,i:f,j:ht,width:Dt-$e,height:qe-pt,fill:xi}),Lt.node.classList.add("apexcharts-treemap-rect"),t.helpers.addListeners(Lt);var Tt={x:$e+(Dt-$e)/2,y:pt+(qe-pt)/2,width:0,height:0},wt={x:$e,y:pt,width:Dt-$e,height:qe-pt};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var mi=1;i.globals.resized||(mi=i.config.chart.animations.speed),t.animateTreemap(Lt,Tt,wt,mi)}if(i.globals.dataChanged){var bi=1;t.dynamicAnim.enabled&&i.globals.shouldAnimate&&(bi=t.dynamicAnim.speed,i.globals.previousPaths[f]&&i.globals.previousPaths[f][ht]&&i.globals.previousPaths[f][ht].rect&&(Tt=i.globals.previousPaths[f][ht].rect),t.animateTreemap(Lt,Tt,wt,bi))}var Zi=t.getFontSize(Le),Li=i.config.dataLabels.formatter(t.labels[f][ht],{value:i.globals.series[f][ht],seriesIndex:f,dataPointIndex:ht,w:i});i.config.plotOptions.treemap.dataLabels.format==="truncate"&&(Zi=parseInt(i.config.dataLabels.style.fontSize,10),Li=t.truncateLabels(Li,Zi,$e,pt,Dt,qe));var si=null;i.globals.series[f][ht]&&(si=t.helpers.calculateDataLabels({text:Li,x:($e+Dt)/2,y:(pt+qe)/2+t.strokeWidth/2+Zi/3,i:f,j:ht,colorProps:Nt,fontSize:Zi,series:e})),i.config.dataLabels.enabled&&si&&t.rotateToFitLabel(si,Zi,Li,$e,pt,Dt,qe),y.add(Lt),si!==null&&y.add(si)}));var z=i.config.plotOptions.treemap.seriesTitle;if(i.config.series.length>1&&z&&z.show){var D=i.config.series[f].name||"";if(D&&E.xMin<1/0&&E.yMin<1/0){var F=z.offsetX,U=z.offsetY,G=z.borderColor,Z=z.borderWidth,ee=z.borderRadius,ie=z.style,le=ie.color||i.config.chart.foreColor,J={left:ie.padding.left,right:ie.padding.right,top:ie.padding.top,bottom:ie.padding.bottom},re=n.getTextRects(D,ie.fontSize,ie.fontFamily),ae=re.width+J.left+J.right,me=re.height+J.top+J.bottom,Te=E.xMin+(F||0),ye=E.yMin+(U||0),Re=n.drawRect(Te,ye,ae,me,ee,ie.background,1,Z,G),We=n.drawText({x:Te+J.left,y:ye+J.top+.75*re.height,text:D,fontSize:ie.fontSize,fontFamily:ie.fontFamily,fontWeight:ie.fontWeight,foreColor:le,cssClass:ie.cssClass||""});y.add(Re),y.add(We)}}y.add(S),o.add(y)})),o}},{key:"getFontSize",value:function(e){var t=this.w,i=(function n(r){var o,s=0;if(Array.isArray(r[0]))for(o=0;o<r.length;o++)s+=n(r[o]);else for(o=0;o<r.length;o++)s+=r[o].length;return s})(this.labels)/(function n(r){var o,s=0;if(Array.isArray(r[0]))for(o=0;o<r.length;o++)s+=n(r[o]);else for(o=0;o<r.length;o++)s+=1;return s})(this.labels);return(function(n,r){var o=n*r,s=Math.pow(o,.5);return Math.min(s/i,parseInt(t.config.dataLabels.style.fontSize,10))})(e[2]-e[0],e[3]-e[1])}},{key:"rotateToFitLabel",value:function(e,t,i,n,r,o,s){var h=new vi(this.ctx),f=h.getTextRects(i,t);if(f.width+this.w.config.stroke.width+5>o-n&&f.width<=s-r){var y=h.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(y.x," ").concat(y.y,") translate(").concat(f.height/3,")"))}}},{key:"truncateLabels",value:function(e,t,i,n,r,o){var s=new vi(this.ctx),h=s.getTextRects(e,t).width+this.w.config.stroke.width+5>r-i&&o-n>r-i?o-n:r-i,f=s.getTextBasedOnMaxWidth({text:e,maxWidth:h,fontSize:t});return e.length!==f.length&&h/t<5?"":f}},{key:"animateTreemap",value:function(e,t,i,n){var r=new gg(this.ctx);r.animateRect(e,t,i,n,(function(){r.animationCompleted(e)}))}}]),a})(),yP=86400,D8=10/yP,R8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Sn(a,[{key:"calculateTimeScaleTicks",value:function(e,t){var i=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var r=new Io(this.ctx),o=(t-e)/864e5;this.determineInterval(o),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,o<D8?n.globals.disableZoomIn=!0:o>5e4&&(n.globals.disableZoomOut=!0);var s=r.getTimeUnitsfromTimestamp(e,t,this.utc),h=n.globals.gridWidth/o,f=h/24,y=f/60,x=y/60,S=Math.floor(24*o),E=Math.floor(1440*o),z=Math.floor(o*yP),D=Math.floor(o),F=Math.floor(o/30),U=Math.floor(o/365),G={minMillisecond:s.minMillisecond,minSecond:s.minSecond,minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},Z={firstVal:G,currentMillisecond:G.minMillisecond,currentSecond:G.minSecond,currentMinute:G.minMinute,currentHour:G.minHour,currentMonthDate:G.minDate,currentDate:G.minDate,currentMonth:G.minMonth,currentYear:G.minYear,daysWidthOnXAxis:h,hoursWidthOnXAxis:f,minutesWidthOnXAxis:y,secondsWidthOnXAxis:x,numberOfSeconds:z,numberOfMinutes:E,numberOfHours:S,numberOfDays:D,numberOfMonths:F,numberOfYears:U};switch(this.tickInterval){case"years":this.generateYearScale(Z);break;case"months":case"half_year":this.generateMonthScale(Z);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(Z);break;case"hours":this.generateHourScale(Z);break;case"minutes_fives":case"minutes":this.generateMinuteScale(Z);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(Z)}var ee=this.timeScaleArray.map((function(ie){var le={position:ie.position,unit:ie.unit,year:ie.year,day:ie.day?ie.day:1,hour:ie.hour?ie.hour:0,month:ie.month+1};return ie.unit==="month"?Ui(Ui({},le),{},{day:1,value:ie.value+1}):ie.unit==="day"||ie.unit==="hour"?Ui(Ui({},le),{},{value:ie.value}):ie.unit==="minute"?Ui(Ui({},le),{},{value:ie.value,minute:ie.value}):ie.unit==="second"?Ui(Ui({},le),{},{value:ie.value,minute:ie.minute,second:ie.second}):ie}));return ee.filter((function(ie){var le=1,J=Math.ceil(n.globals.gridWidth/120),re=ie.value;n.config.xaxis.tickAmount!==void 0&&(J=n.config.xaxis.tickAmount),ee.length>J&&(le=Math.floor(ee.length/J));var ae=!1,me=!1;switch(i.tickInterval){case"years":ie.unit==="year"&&(ae=!0);break;case"half_year":le=7,ie.unit==="year"&&(ae=!0);break;case"months":le=1,ie.unit==="year"&&(ae=!0);break;case"months_fortnight":le=15,ie.unit!=="year"&&ie.unit!=="month"||(ae=!0),re===30&&(me=!0);break;case"months_days":le=10,ie.unit==="month"&&(ae=!0),re===30&&(me=!0);break;case"week_days":le=8,ie.unit==="month"&&(ae=!0);break;case"days":le=1,ie.unit==="month"&&(ae=!0);break;case"hours":ie.unit==="day"&&(ae=!0);break;case"minutes_fives":case"seconds_fives":re%5!=0&&(me=!0);break;case"seconds_tens":re%10!=0&&(me=!0)}if(i.tickInterval==="hours"||i.tickInterval==="minutes_fives"||i.tickInterval==="seconds_tens"||i.tickInterval==="seconds_fives"){if(!me)return!0}else if((re%le==0||ae)&&!me)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var i=this.w,n=this.formatDates(e),r=this.removeOverlappingTS(n);i.globals.timescaleLabels=r.slice(),new O_(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,i=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,i=e.currentMonth,n=e.currentYear,r=e.daysWidthOnXAxis,o=e.numberOfYears,s=t.minYear,h=0,f=new Io(this.ctx),y="year";if(t.minDate>1||t.minMonth>0){var x=f.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);h=(f.determineDaysOfYear(t.minYear)-x+1)*r,s=t.minYear+1,this.timeScaleArray.push({position:h,value:s,unit:y,year:s,month:At.monthMod(i+1)})}else t.minDate===1&&t.minMonth===0&&this.timeScaleArray.push({position:h,value:s,unit:y,year:n,month:At.monthMod(i+1)});for(var S=s,E=h,z=0;z<o;z++)S++,E=f.determineDaysOfYear(S-1)*r+E,this.timeScaleArray.push({position:E,value:S,unit:y,year:S,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,i=e.currentMonthDate,n=e.currentMonth,r=e.currentYear,o=e.daysWidthOnXAxis,s=e.numberOfMonths,h=n,f=0,y=new Io(this.ctx),x="month",S=0;if(t.minDate>1){f=(y.determineDaysOfMonths(n+1,t.minYear)-i+1)*o,h=At.monthMod(n+1);var E=r+S,z=At.monthMod(h),D=h;h===0&&(x="year",D=E,z=1,E+=S+=1),this.timeScaleArray.push({position:f,value:D,unit:x,year:E,month:z})}else this.timeScaleArray.push({position:f,value:h,unit:x,year:r,month:At.monthMod(n)});for(var F=h+1,U=f,G=0,Z=1;G<s;G++,Z++){(F=At.monthMod(F))===0?(x="year",S+=1):x="month";var ee=this._getYear(r,F,S);U=y.determineDaysOfMonths(F,ee)*o+U;var ie=F===0?ee:F;this.timeScaleArray.push({position:U,value:ie,unit:x,year:ee,month:F===0?1:F}),F++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,i=e.currentMonth,n=e.currentYear,r=e.hoursWidthOnXAxis,o=e.numberOfDays,s=new Io(this.ctx),h="day",f=t.minDate+1,y=f,x=function(Z,ee,ie){return Z>s.determineDaysOfMonths(ee+1,ie)&&(y=1,h="month",E=ee+=1),ee},S=(24-t.minHour)*r,E=f,z=x(y,i,n);t.minHour===0&&t.minDate===1?(S=0,E=At.monthMod(t.minMonth),h="month",y=t.minDate):t.minDate!==1&&t.minHour===0&&t.minMinute===0&&(S=0,f=t.minDate,E=f,z=x(y=f,i,n),E!==1&&(h="day")),this.timeScaleArray.push({position:S,value:E,unit:h,year:this._getYear(n,z,0),month:At.monthMod(z),day:y});for(var D=S,F=0;F<o;F++){h="day",z=x(y+=1,z,this._getYear(n,z,0));var U=this._getYear(n,z,0);D=24*r+D;var G=y===1?At.monthMod(z):y;this.timeScaleArray.push({position:D,value:G,unit:h,year:U,month:At.monthMod(z),day:G})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,i=e.currentDate,n=e.currentMonth,r=e.currentYear,o=e.minutesWidthOnXAxis,s=e.numberOfHours,h=new Io(this.ctx),f="hour",y=function(le,J){return le>h.determineDaysOfMonths(J+1,r)&&(F=1,J+=1),{month:J,date:F}},x=function(le,J){return le>h.determineDaysOfMonths(J+1,r)?J+=1:J},S=60-(t.minMinute+t.minSecond/60),E=S*o,z=t.minHour+1,D=z;S===60&&(E=0,D=z=t.minHour);var F=i;D>=24&&(D=0,f="day",z=F+=1);var U=y(F,n).month;U=x(F,U),z>31&&(z=F=1),this.timeScaleArray.push({position:E,value:z,unit:f,day:F,hour:D,year:r,month:At.monthMod(U)}),D++;for(var G=E,Z=0;Z<s;Z++){f="hour",D>=24&&(D=0,f="day",U=y(F+=1,U).month,U=x(F,U));var ee=this._getYear(r,U,0);G=60*o+G;var ie=D===0?F:D;this.timeScaleArray.push({position:G,value:ie,unit:f,hour:D,day:F,year:ee,month:At.monthMod(U)}),D++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,n=e.currentMinute,r=e.currentHour,o=e.currentDate,s=e.currentMonth,h=e.currentYear,f=e.minutesWidthOnXAxis,y=e.secondsWidthOnXAxis,x=e.numberOfMinutes,S=n+1,E=o,z=s,D=h,F=r,U=(60-i-t/1e3)*y,G=0;G<x;G++)S>=60&&(S=0,(F+=1)===24&&(F=0)),this.timeScaleArray.push({position:U,value:S,unit:"minute",hour:F,minute:S,day:E,year:this._getYear(D,z,0),month:At.monthMod(z)}),U+=f,S++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,n=e.currentMinute,r=e.currentHour,o=e.currentDate,s=e.currentMonth,h=e.currentYear,f=e.secondsWidthOnXAxis,y=e.numberOfSeconds,x=i+1,S=n,E=o,z=s,D=h,F=r,U=(1e3-t)/1e3*f,G=0;G<y;G++)x>=60&&(x=0,++S>=60&&(S=0,++F===24&&(F=0))),this.timeScaleArray.push({position:U,value:x,unit:"second",hour:F,minute:S,second:x,day:E,year:this._getYear(D,z,0),month:At.monthMod(z)}),U+=f,x++}},{key:"createRawDateString",value:function(e,t){var i=e.year;return e.month===0&&(e.month=1),i+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?i+=e.unit==="day"?"-"+("0"+t).slice(-2):"-01":i+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?i+=e.unit==="hour"?"T"+("0"+t).slice(-2):"T00":i+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?i+=":"+("0"+t).slice(-2):i+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?i+=":"+("0"+t).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(e){var t=this,i=this.w;return e.map((function(n){var r=n.value.toString(),o=new Io(t.ctx),s=t.createRawDateString(n,r),h=o.getDate(o.parseDate(s));if(t.utc||(h=o.getDate(o.parseDateWithTimezone(s))),i.config.xaxis.labels.format===void 0){var f="dd MMM",y=i.config.xaxis.labels.datetimeFormatter;n.unit==="year"&&(f=y.year),n.unit==="month"&&(f=y.month),n.unit==="day"&&(f=y.day),n.unit==="hour"&&(f=y.hour),n.unit==="minute"&&(f=y.minute),n.unit==="second"&&(f=y.second),r=o.formatDate(h,f)}else r=o.formatDate(h,i.config.xaxis.labels.format);return{dateString:s,position:n.position,value:r,unit:n.unit,year:n.year,month:n.month}}))}},{key:"removeOverlappingTS",value:function(e){var t,i=this,n=new vi(this.ctx),r=!1;e.length>0&&e[0].value&&e.every((function(h){return h.value.length===e[0].value.length}))&&(r=!0,t=n.getTextRects(e[0].value).width);var o=0,s=e.map((function(h,f){if(f>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var y=r?t:n.getTextRects(e[o].value).width,x=e[o].position;return h.position>x+y+10?(o=f,h):null}return h}));return s=s.filter((function(h){return h!==null}))}},{key:"_getYear",value:function(e,t,i){return e+Math.floor(t/12)+i}}]),a})(),O8=(function(){function a(e,t){wn(this,a),this.ctx=t,this.w=t.w,this.el=e}return Sn(a,[{key:"setupElements",value:function(){var e=this.w,t=e.globals,i=e.config,n=i.chart.type;t.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(n),t.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(n),t.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(n)&&i.plotOptions.bar.horizontal,t.chartClass=".apexcharts".concat(t.chartID),t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),vi.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas ".concat(t.chartClass.substring(1))}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=window.SVG().addTo(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(i.chart.offsetX,", ").concat(i.chart.offsetY,")")}),t.dom.Paper.node.style.background=i.theme.mode!=="dark"||i.chart.background?i.theme.mode!=="light"||i.chart.background?i.chart.background:"#fff":"#343A3F",this.setSVGDimensions(),t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject"),vi.setAttrs(t.dom.elLegendForeign,{x:0,y:0,width:t.svgWidth,height:t.svgHeight}),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.node.appendChild(t.dom.elLegendForeign),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var i=this.w,n=this.ctx,r=i.config,o=i.globals,s={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},bar:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},h=r.chart.type||"line",f=null,y=0;o.series.forEach((function(le,J){var re,ae,me=((re=e[J])===null||re===void 0?void 0:re.type)==="column"?"bar":((ae=e[J])===null||ae===void 0?void 0:ae.type)||(h==="column"?"bar":h);s[me]?(me==="rangeArea"?(s[me].series.push(o.seriesRangeStart[J]),s[me].seriesRangeEnd.push(o.seriesRangeEnd[J])):s[me].series.push(le),s[me].i.push(J),me==="bar"&&(i.globals.columnSeries=s.bar)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(me)?f=me:console.warn("You have specified an unrecognized series type (".concat(me,").")),h!==me&&me!=="scatter"&&y++})),y>0&&(f&&console.warn("Chart or series type ".concat(f," cannot appear with other chart or series types.")),s.bar.series.length>0&&r.plotOptions.bar.horizontal&&(y-=s.bar.series.length,s.bar={series:[],i:[]},i.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),o.comboCharts||(o.comboCharts=y>0);var x=new ob(n,t),S=new rb(n,t);n.pie=new mP(n);var E=new A8(n);n.rangeBar=new T8(n,t);var z=new C8(n),D=[];if(o.comboCharts){var F,U,G=new Rs(n);if(s.area.series.length>0&&(F=D).push.apply(F,oo(G.drawSeriesByGroup(s.area,o.areaGroups,"area",x))),s.bar.series.length>0)if(r.chart.stacked){var Z=new ZA(n,t);D.push(Z.draw(s.bar.series,s.bar.i))}else n.bar=new dg(n,t),D.push(n.bar.draw(s.bar.series,s.bar.i));if(s.rangeArea.series.length>0&&D.push(x.draw(s.rangeArea.series,"rangeArea",s.rangeArea.i,s.rangeArea.seriesRangeEnd)),s.line.series.length>0&&(U=D).push.apply(U,oo(G.drawSeriesByGroup(s.line,o.lineGroups,"line",x))),s.candlestick.series.length>0&&D.push(S.draw(s.candlestick.series,"candlestick",s.candlestick.i)),s.boxPlot.series.length>0&&D.push(S.draw(s.boxPlot.series,"boxPlot",s.boxPlot.i)),s.rangeBar.series.length>0&&D.push(n.rangeBar.draw(s.rangeBar.series,s.rangeBar.i)),s.scatter.series.length>0){var ee=new ob(n,t,!0);D.push(ee.draw(s.scatter.series,"scatter",s.scatter.i))}if(s.bubble.series.length>0){var ie=new ob(n,t,!0);D.push(ie.draw(s.bubble.series,"bubble",s.bubble.i))}}else switch(r.chart.type){case"line":D=x.draw(o.series,"line");break;case"area":D=x.draw(o.series,"area");break;case"bar":r.chart.stacked?D=new ZA(n,t).draw(o.series):(n.bar=new dg(n,t),D=n.bar.draw(o.series));break;case"candlestick":D=new rb(n,t).draw(o.series,"candlestick");break;case"boxPlot":D=new rb(n,t).draw(o.series,r.chart.type);break;case"rangeBar":D=n.rangeBar.draw(o.series);break;case"rangeArea":D=x.draw(o.seriesRangeStart,"rangeArea",void 0,o.seriesRangeEnd);break;case"heatmap":D=new k8(n,t).draw(o.series);break;case"treemap":D=new L8(n,t).draw(o.series);break;case"pie":case"donut":case"polarArea":D=n.pie.draw(o.series);break;case"radialBar":D=E.draw(o.series);break;case"radar":D=z.draw(o.series);break;default:D=x.draw(o.series)}return D}},{key:"setSVGDimensions",value:function(){var e=this.w,t=e.globals,i=e.config;i.chart.width=i.chart.width||"100%",i.chart.height=i.chart.height||"auto",t.svgWidth=i.chart.width,t.svgHeight=i.chart.height;var n=At.getDimensions(this.el),r=i.chart.width.toString().split(/[0-9]+/g).pop();r==="%"?At.isNumber(n[0])&&(n[0].width===0&&(n=At.getDimensions(this.el.parentNode)),t.svgWidth=n[0]*parseInt(i.chart.width,10)/100):r!=="px"&&r!==""||(t.svgWidth=parseInt(i.chart.width,10));var o=String(i.chart.height).toString().split(/[0-9]+/g).pop();if(t.svgHeight!=="auto"&&t.svgHeight!=="")if(o==="%"){var s=At.getDimensions(this.el.parentNode);t.svgHeight=s[1]*parseInt(i.chart.height,10)/100}else t.svgHeight=parseInt(i.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;if(t.svgWidth=Math.max(t.svgWidth,0),t.svgHeight=Math.max(t.svgHeight,0),vi.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),o!=="%"){var h=i.chart.sparkline.enabled?0:t.axisCharts?i.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(t.svgHeight+h,"px")}t.dom.elWrap.style.width="".concat(t.svgWidth,"px"),t.dom.elWrap.style.height="".concat(t.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,i=e.translateX;vi.setAttrs(e.dom.elGraphical.node,{transform:"translate(".concat(i,", ").concat(t,")")})}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=0,n=e.config.chart.sparkline.enabled?1:15;n+=e.config.grid.padding.bottom,["top","bottom"].includes(e.config.legend.position)&&e.config.legend.show&&!e.config.legend.floating&&(i=new uP(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var r=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),o=2.05*e.globals.radialSize;if(r&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){var s=At.getBoundingClientRect(r);o=s.bottom;var h=s.bottom-s.top;o=Math.max(2.05*e.globals.radialSize,h)}var f=Math.ceil(o+t.translateY+i+n);t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",f),e.config.chart.height&&String(e.config.chart.height).includes("%")||(t.dom.elWrap.style.height="".concat(f,"px"),vi.setAttrs(t.dom.Paper.node,{height:f}),t.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(f,"px"))}},{key:"coreCalculations",value:function(){new h1(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map((function(){return[]}))},i=new rP,n=this.w.globals,r={dataWasParsed:n.dataWasParsed,originalSeries:n.originalSeries};i.initGlobalVars(n),n.seriesXvalues=t(),n.seriesYvalues=t(),r.dataWasParsed&&(n.dataWasParsed=r.dataWasParsed,n.originalSeries=r.originalSeries)}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var e=this.w,t=null;if(e.globals.axisCharts){if(e.config.xaxis.crosshairs.position==="back"&&new d1(this.ctx).drawXCrosshairs(),e.config.yaxis[0].crosshairs.position==="back"&&new d1(this.ctx).drawYCrosshairs(),e.config.xaxis.type==="datetime"&&e.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new R8(this.ctx);var i=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}t=new Rs(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.ctx,i=this.w;if(i.config.chart.brush.enabled&&typeof i.config.chart.events.selection!="function"){var n=Array.isArray(i.config.chart.brush.targets)?i.config.chart.brush.targets:[i.config.chart.brush.target];n.forEach((function(r){var o=t.constructor.getChartByID(r);o.w.globals.brushSource=e.ctx,typeof o.w.config.chart.events.zoomed!="function"&&(o.w.config.chart.events.zoomed=function(){return e.updateSourceChart(o)}),typeof o.w.config.chart.events.scrolled!="function"&&(o.w.config.chart.events.scrolled=function(){return e.updateSourceChart(o)})})),i.config.chart.events.selection=function(r,o){n.forEach((function(s){t.constructor.getChartByID(s).ctx.updateHelpers._updateOptions({xaxis:{min:o.xaxis.min,max:o.xaxis.max}},!1,!1,!1,!1)}))}}}}]),a})(),z8=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"_updateOptions",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise((function(s){var h=[t.ctx];r&&(h=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(h=[t.ctx],t.ctx.w.globals.isExecCalled=!1),h.forEach((function(f,y){var x=f.w;if(x.globals.shouldAnimate=n,i||(x.globals.resized=!0,x.globals.dataChanged=!0,n&&f.series.getPreviousPaths()),e&&hl(e)==="object"&&(f.config=new uy(e),e=Rs.extendArrayProps(f.config,e,x),f.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,x.config=At.extend(x.config,e),o&&(x.globals.lastXAxis=e.xaxis?At.clone(e.xaxis):[],x.globals.lastYAxis=e.yaxis?At.clone(e.yaxis):[],x.globals.initialConfig=At.extend({},x.config),x.globals.initialSeries=At.clone(x.config.series),e.series))){for(var S=0;S<x.globals.collapsedSeriesIndices.length;S++){var E=x.config.series[x.globals.collapsedSeriesIndices[S]];x.globals.collapsedSeries[S].data=x.globals.axisCharts?E.data.slice():E}for(var z=0;z<x.globals.ancillaryCollapsedSeriesIndices.length;z++){var D=x.config.series[x.globals.ancillaryCollapsedSeriesIndices[z]];x.globals.ancillaryCollapsedSeries[z].data=x.globals.axisCharts?D.data.slice():D}f.series.emptyCollapsedSeries(x.config.series)}return f.update(e).then((function(){y===h.length-1&&s(f)}))}))}))}},{key:"_updateSeries",value:function(e,t){var i=this,n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise((function(r){var o=i.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&i.ctx.series.getPreviousPaths(),i.ctx.data.resetParsingFlags(),i.ctx.data.parseData(e),n&&(o.globals.initialConfig.series=At.clone(o.config.series),o.globals.initialSeries=At.clone(o.config.series)),i.ctx.update().then((function(){r(i.ctx)}))}))}},{key:"_extendSeries",value:function(e,t){var i=this.w,n=i.config.series[t];return Ui(Ui({},i.config.series[t]),{},{name:e.name?e.name:n?.name,color:e.color?e.color:n?.color,type:e.type?e.type:n?.type,group:e.group?e.group:n?.group,hidden:e.hidden!==void 0?e.hidden:n?.hidden,data:e.data?e.data:n?.data,zIndex:e.zIndex!==void 0?e.zIndex:t})}},{key:"toggleDataPointSelection",value:function(e,t){var i=this.w,n=null,r=".apexcharts-series[data\\:realIndex='".concat(e,"']");return i.globals.axisCharts?n=i.globals.dom.Paper.findOne("".concat(r," path[j='").concat(t,"'], ").concat(r," circle[j='").concat(t,"'], ").concat(r," rect[j='").concat(t,"']")):t===void 0&&(n=i.globals.dom.Paper.findOne("".concat(r," path[j='").concat(e,"']")),i.config.chart.type!=="pie"&&i.config.chart.type!=="polarArea"&&i.config.chart.type!=="donut"||this.ctx.pie.pieClicked(e)),n?(new vi(this.ctx).pathMouseDown(n,null),n.node?n.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach((function(n){e.xaxis[n]!==void 0&&(t.config.xaxis[n]=e.xaxis[n],t.globals.lastXAxis[n]=e.xaxis[n])})),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var i=new cy(e);e=i.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach((function(t,i){e.yaxis[i].min=0,e.yaxis[i].max=100})):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,i=this.w,n=i.globals.lastXAxis,r=i.globals.lastYAxis;e&&e.xaxis&&(n=e.xaxis),e&&e.yaxis&&(r=e.yaxis),i.config.xaxis.min=n.min,i.config.xaxis.max=n.max;var o=function(s){r[s]!==void 0&&(i.config.yaxis[s].min=r[s].min,i.config.yaxis[s].max=r[s].max)};i.config.yaxis.map((function(s,h){i.globals.zoomed||r[h]!==void 0?o(h):t.ctx.opts.yaxis[h]!==void 0&&(s.min=t.ctx.opts.yaxis[h].min,s.max=t.ctx.opts.yaxis[h].max)}))}}]),a})();(function(){function a(){for(var r=arguments.length>0&&arguments[0]!==x?arguments[0]:[],o=arguments.length>1?arguments[1]:x,s=arguments.length>2?arguments[2]:x,h=arguments.length>3?arguments[3]:x,f=arguments.length>4?arguments[4]:x,y=arguments.length>5?arguments[5]:x,x=arguments.length>6?arguments[6]:x,S=r.slice(o,s||x),E=h.slice(f,y||x),z=0,D={pos:[0,0],start:[0,0]},F={pos:[0,0],start:[0,0]};S[z]=e.call(D,S[z]),E[z]=e.call(F,E[z]),S[z][0]!=E[z][0]||S[z][0]=="M"||S[z][0]=="A"&&(S[z][4]!=E[z][4]||S[z][5]!=E[z][5])?(Array.prototype.splice.apply(S,[z,1].concat(i.call(D,S[z]))),Array.prototype.splice.apply(E,[z,1].concat(i.call(F,E[z])))):(S[z]=t.call(D,S[z]),E[z]=t.call(F,E[z])),!(++z==S.length&&z==E.length);)z==S.length&&S.push(["C",D.pos[0],D.pos[1],D.pos[0],D.pos[1],D.pos[0],D.pos[1]]),z==E.length&&E.push(["C",F.pos[0],F.pos[1],F.pos[0],F.pos[1],F.pos[0],F.pos[1]]);return{start:S,dest:E}}function e(r){switch(r[0]){case"z":case"Z":r[0]="L",r[1]=this.start[0],r[2]=this.start[1];break;case"H":r[0]="L",r[2]=this.pos[1];break;case"V":r[0]="L",r[2]=r[1],r[1]=this.pos[0];break;case"T":r[0]="Q",r[3]=r[1],r[4]=r[2],r[1]=this.reflection[1],r[2]=this.reflection[0];break;case"S":r[0]="C",r[6]=r[4],r[5]=r[3],r[4]=r[2],r[3]=r[1],r[2]=this.reflection[1],r[1]=this.reflection[0]}return r}function t(r){var o=r.length;return this.pos=[r[o-2],r[o-1]],"SCQT".indexOf(r[0])!=-1&&(this.reflection=[2*this.pos[0]-r[o-4],2*this.pos[1]-r[o-3]]),r}function i(r){var o=[r];switch(r[0]){case"M":return this.pos=this.start=[r[1],r[2]],o;case"L":r[5]=r[3]=r[1],r[6]=r[4]=r[2],r[1]=this.pos[0],r[2]=this.pos[1];break;case"Q":r[6]=r[4],r[5]=r[3],r[4]=1*r[4]/3+2*r[2]/3,r[3]=1*r[3]/3+2*r[1]/3,r[2]=1*this.pos[1]/3+2*r[2]/3,r[1]=1*this.pos[0]/3+2*r[1]/3;break;case"A":o=(function(s,h){var f,y,x,S,E,z,D,F,U,G,Z,ee,ie,le,J,re,ae,me,Te,ye,Re,We,Le,ht,$e,pt,Dt=Math.abs(h[1]),qe=Math.abs(h[2]),Nt=h[3]%360,ni=h[4],xi=h[5],Lt=h[6],Tt=h[7],wt=new or(s),mi=new or(Lt,Tt),bi=[];if(Dt===0||qe===0||wt.x===mi.x&&wt.y===mi.y)return[["C",wt.x,wt.y,mi.x,mi.y,mi.x,mi.y]];for(f=new or((wt.x-mi.x)/2,(wt.y-mi.y)/2).transform(new Xn().rotate(Nt)),y=f.x*f.x/(Dt*Dt)+f.y*f.y/(qe*qe),y>1&&(Dt*=y=Math.sqrt(y),qe*=y),x=new Xn().rotate(Nt).scale(1/Dt,1/qe).rotate(-Nt),wt=wt.transform(x),mi=mi.transform(x),S=[mi.x-wt.x,mi.y-wt.y],z=S[0]*S[0]+S[1]*S[1],E=Math.sqrt(z),S[0]/=E,S[1]/=E,D=z<4?Math.sqrt(1-z/4):0,ni===xi&&(D*=-1),F=new or((mi.x+wt.x)/2+D*-S[1],(mi.y+wt.y)/2+D*S[0]),U=new or(wt.x-F.x,wt.y-F.y),G=new or(mi.x-F.x,mi.y-F.y),Z=Math.acos(U.x/Math.sqrt(U.x*U.x+U.y*U.y)),U.y<0&&(Z*=-1),ee=Math.acos(G.x/Math.sqrt(G.x*G.x+G.y*G.y)),G.y<0&&(ee*=-1),xi&&Z>ee&&(ee+=2*Math.PI),!xi&&Z<ee&&(ee-=2*Math.PI),le=Math.ceil(2*Math.abs(Z-ee)/Math.PI),re=[],ae=Z,ie=(ee-Z)/le,J=4*Math.tan(ie/4)/3,Re=0;Re<=le;Re++)Te=Math.cos(ae),me=Math.sin(ae),ye=new or(F.x+Te,F.y+me),re[Re]=[new or(ye.x+J*me,ye.y-J*Te),ye,new or(ye.x-J*me,ye.y+J*Te)],ae+=ie;for(re[0][0]=re[0][1].clone(),re[re.length-1][2]=re[re.length-1][1].clone(),x=new Xn().rotate(Nt).scale(Dt,qe).rotate(-Nt),Re=0,We=re.length;Re<We;Re++)re[Re][0]=re[Re][0].transform(x),re[Re][1]=re[Re][1].transform(x),re[Re][2]=re[Re][2].transform(x);for(Re=1,We=re.length;Re<We;Re++)Le=(ye=re[Re-1][2]).x,ht=ye.y,$e=(ye=re[Re][0]).x,pt=ye.y,Lt=(ye=re[Re][1]).x,Tt=ye.y,bi.push(["C",Le,ht,$e,pt,Lt,Tt]);return bi})(this.pos,r),r=o[0]}return r[0]="C",this.pos=[r[5],r[6]],this.reflection=[2*r[5]-r[3],2*r[6]-r[4]],o}function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;if(o===!1)return!1;for(var s=o,h=r.length;s<h;++s)if(r[s][0]=="M")return s;return!1}sa(au,{morph:function(r,o,s,h,f){for(var y=this.parse(r),x=this.parse(o),S=0,E=0,z=!1,D=!1;S!==!1||E!==!1;){var F;z=n(y,S!==!1&&S+1),D=n(x,E!==!1&&E+1),S===!1&&(S=(F=new au(U.start).bbox()).height==0||F.width==0?y.push(y[0])-1:y.push(["M",F.x+F.width/2,F.y+F.height/2])-1),E===!1&&(E=(F=new au(U.dest).bbox()).height==0||F.width==0?x.push(x[0])-1:x.push(["M",F.x+F.width/2,F.y+F.height/2])-1);var U=a(y,S,z,x,E,D);y=y.slice(0,S).concat(U.start,z===!1?[]:y.slice(z)),x=x.slice(0,E).concat(U.dest,D===!1?[]:x.slice(D)),S=z!==!1&&S+U.start.length,E=D!==!1&&E+U.dest.length}this._array=y,this.destination=new au,this.destination._array=x;var G=this.fromArray(y.map((function(Z,ee){var ie=x[ee].map((function(le,J){return J===0?le:h.step(Z[J],x[ee][J],s,f[ee],f)}));return ie})));return G}})})();const KA=a=>(a.changedTouches&&(a=a.changedTouches[0]),{x:a.clientX,y:a.clientY});class F8{constructor(e){e.remember("_draggable",this),this.el=e,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(e){e?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(e){const t=!e.type.indexOf("mouse");if(t&&e.which!==1&&e.buttons!==0||this.el.dispatch("beforedrag",{event:e,handler:this}).defaultPrevented)return;e.preventDefault(),e.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(KA(e));const i=(t?"mouseup":"touchend")+".drag";Dh(window,(t?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),Dh(window,i,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:e,handler:this,box:this.box})}drag(e){const{box:t,lastClick:i}=this,n=this.el.point(KA(e)),r=n.x-i.x,o=n.y-i.y;if(!r&&!o)return t;const s=t.x+r,h=t.y+o;this.box=new Ds(s,h,t.w,t.h),this.lastClick=n,this.el.dispatch("dragmove",{event:e,handler:this,box:this.box}).defaultPrevented||this.move(s,h)}move(e,t){this.el.type==="svg"?fd.prototype.move.call(this.el,e,t):this.el.move(e,t)}endDrag(e){this.drag(e),this.el.fire("dragend",{event:e,handler:this,box:this.box}),Rc(window,"mousemove.drag"),Rc(window,"touchmove.drag"),Rc(window,"mouseup.drag"),Rc(window,"touchend.drag"),this.init(!0)}}function f1(a,e,t,i=null){return function(n){n.preventDefault(),n.stopPropagation();var r=n.pageX||n.touches[0].pageX,o=n.pageY||n.touches[0].pageY;e.fire(a,{x:r,y:o,event:n,index:i,points:t})}}function p1([a,e],{a:t,b:i,c:n,d:r,e:o,f:s}){return[a*t+e*n+o,a*i+e*r+s]}sa(Ro,{draggable(a=!0){return(this.remember("_draggable")||new F8(this)).init(a),this}});let _P=class{constructor(a){this.el=a,a.remember("_selectHandler",this),this.selection=new fd,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=wy();this.observer=new e.MutationObserver(this.mutationHandler)}init(a){this.createHandle=a.createHandle||this.createHandleFn,this.createRot=a.createRot||this.createRotFn,this.updateHandle=a.updateHandle||this.updateHandleFn,this.updateRot=a.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(a,e){if(!a)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach(((a,e,t)=>{const i=this.order[e];this.createHandle.call(this,this.selection,a,e,t,i),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+i).on("mousedown.selection touchstart.selection",f1(i,this.el,this.handlePoints,e))}))}createHandleFn(a){a.polyline()}updateHandleFn(a,e,t,i){const n=i.at(t-1),r=i[(t+1)%i.length],o=e,s=[o[0]-n[0],o[1]-n[1]],h=[o[0]-r[0],o[1]-r[1]],f=Math.sqrt(s[0]*s[0]+s[1]*s[1]),y=Math.sqrt(h[0]*h[0]+h[1]*h[1]),x=[s[0]/f,s[1]/f],S=[h[0]/y,h[1]/y],E=[o[0]-10*x[0],o[1]-10*x[1]],z=[o[0]-10*S[0],o[1]-10*S[1]];a.plot([E,o,z])}updateResizeHandles(){this.handlePoints.forEach(((a,e,t)=>{const i=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),a,e,t,i)}))}createRotFn(a){a.line(),a.circle(5)}getPoint(a){return this.handlePoints[this.order.indexOf(a)]}getPointHandle(a){return this.selection.get(this.order.indexOf(a)+1)}updateRotFn(a,e){const t=this.getPoint("t");a.get(0).plot(t[0],t[1],e[0],e[1]),a.get(1).center(e[0],e[1])}createRotationHandle(){const a=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",f1("rot",this.el,this.handlePoints));this.createRot.call(this,a)}updateRotationHandle(){const a=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(a,this.rotationPoint,this.handlePoints)}updatePoints(){const a=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(a).map((t=>p1(t,e))),this.rotationPoint=p1(this.getRotationPoint(a),e)}getHandlePoints({x:a,x2:e,y:t,y2:i,cx:n,cy:r}=this.el.bbox()){return[[a,t],[n,t],[e,t],[e,r],[e,i],[n,i],[a,i],[a,r]]}getRotationPoint({y:a,cx:e}=this.el.bbox()){return[e,a-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const JA=a=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let i=this.remember("_"+a.name);return i||(e.prototype instanceof _P?(i=new e(this),e=!0):i=new a(this),this.remember("_"+a.name,i)),i.active(e,t),this};function g1(a,e,t,i=null){return function(n){n.preventDefault(),n.stopPropagation();var r=n.pageX||n.touches[0].pageX,o=n.pageY||n.touches[0].pageY;e.fire(a,{x:r,y:o,event:n,index:i,points:t})}}function m1([a,e],{a:t,b:i,c:n,d:r,e:o,f:s}){return[a*t+e*n+o,a*i+e*r+s]}sa(Ro,{select:JA(_P)}),sa([_f,xf,yf],{pointSelect:JA(class{constructor(a){this.el=a,a.remember("_pointSelectHandler",this),this.selection=new fd,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=wy();this.observer=new e.MutationObserver(this.mutationHandler)}init(a){this.createHandle=a.createHandle||this.createHandleFn,this.updateHandle=a.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(a,e){if(!a)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach(((a,e,t)=>{this.createHandle.call(this,this.selection,a,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",f1("point",this.el,this.points,e))}))}createHandleFn(a){a.circle(5)}updateHandleFn(a,e){a.center(e[0],e[1])}updatePointHandles(){this.points.forEach(((a,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),a,e,t)}))}updatePoints(){const a=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map((e=>p1(e,a)))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class xP{constructor(e){this.el=e,e.remember("_selectHandler",this),this.selection=new fd,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const t=wy();this.observer=new t.MutationObserver(this.mutationHandler)}init(e){this.createHandle=e.createHandle||this.createHandleFn,this.createRot=e.createRot||this.createRotFn,this.updateHandle=e.updateHandle||this.updateHandleFn,this.updateRot=e.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(e,t){if(!e)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach(((e,t,i)=>{const n=this.order[t];this.createHandle.call(this,this.selection,e,t,i,n),this.selection.get(t+1).addClass("svg_select_handle svg_select_handle_"+n).on("mousedown.selection touchstart.selection",g1(n,this.el,this.handlePoints,t))}))}createHandleFn(e){e.polyline()}updateHandleFn(e,t,i,n){const r=n.at(i-1),o=n[(i+1)%n.length],s=t,h=[s[0]-r[0],s[1]-r[1]],f=[s[0]-o[0],s[1]-o[1]],y=Math.sqrt(h[0]*h[0]+h[1]*h[1]),x=Math.sqrt(f[0]*f[0]+f[1]*f[1]),S=[h[0]/y,h[1]/y],E=[f[0]/x,f[1]/x],z=[s[0]-10*S[0],s[1]-10*S[1]],D=[s[0]-10*E[0],s[1]-10*E[1]];e.plot([z,s,D])}updateResizeHandles(){this.handlePoints.forEach(((e,t,i)=>{const n=this.order[t];this.updateHandle.call(this,this.selection.get(t+1),e,t,i,n)}))}createRotFn(e){e.line(),e.circle(5)}getPoint(e){return this.handlePoints[this.order.indexOf(e)]}getPointHandle(e){return this.selection.get(this.order.indexOf(e)+1)}updateRotFn(e,t){const i=this.getPoint("t");e.get(0).plot(i[0],i[1],t[0],t[1]),e.get(1).center(t[0],t[1])}createRotationHandle(){const e=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",g1("rot",this.el,this.handlePoints));this.createRot.call(this,e)}updateRotationHandle(){const e=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(e,this.rotationPoint,this.handlePoints)}updatePoints(){const e=this.el.bbox(),t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(e).map((i=>m1(i,t))),this.rotationPoint=m1(this.getRotationPoint(e),t)}getHandlePoints({x:e,x2:t,y:i,y2:n,cx:r,cy:o}=this.el.bbox()){return[[e,i],[r,i],[t,i],[t,o],[t,n],[r,n],[e,n],[e,o]]}getRotationPoint({y:e,cx:t}=this.el.bbox()){return[t,e-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const QA=a=>function(e=!0,t={}){typeof e=="object"&&(t=e,e=!0);let i=this.remember("_"+a.name);return i||(e.prototype instanceof xP?(i=new e(this),e=!0):i=new a(this),this.remember("_"+a.name,i)),i.active(e,t),this};sa(Ro,{select:QA(xP)}),sa([_f,xf,yf],{pointSelect:QA(class{constructor(a){this.el=a,a.remember("_pointSelectHandler",this),this.selection=new fd,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=wy();this.observer=new e.MutationObserver(this.mutationHandler)}init(a){this.createHandle=a.createHandle||this.createHandleFn,this.updateHandle=a.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(a,e){if(!a)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach(((a,e,t)=>{this.createHandle.call(this,this.selection,a,e,t),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",g1("point",this.el,this.points,e))}))}createHandleFn(a){a.circle(5)}updateHandleFn(a,e){a.center(e[0],e[1])}updatePointHandles(){this.points.forEach(((a,e,t)=>{this.updateHandle.call(this,this.selection.get(e+1),a,e,t)}))}updatePoints(){const a=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map((e=>m1(e,a)))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const F0=a=>(a.changedTouches&&(a=a.changedTouches[0]),{x:a.clientX,y:a.clientY}),eT=a=>{let e=1/0,t=1/0,i=-1/0,n=-1/0;for(let r=0;r<a.length;r++){const o=a[r];e=Math.min(e,o[0]),t=Math.min(t,o[1]),i=Math.max(i,o[0]),n=Math.max(n,o[1])}return new Ds(e,t,i-e,n-t)};class tT{constructor(e){this.el=e,e.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(e,t){this.preserveAspectRatio=t.preserveAspectRatio??!1,this.aroundCenter=t.aroundCenter??!1,this.grid=t.grid??0,this.degree=t.degree??0,this.el.off(".resize"),e&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&(this.eventType==="rot"?this.rotate(this.lastEvent):this.eventType==="point"?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(e){this.eventType=e.type;const{event:t,index:i,points:n}=e.detail,r=!t.type.indexOf("mouse");if(r&&(t.which||t.buttons)!==1||this.el.dispatch("beforeresize",{event:e,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(F0(t)),this.index=i,this.points=n.slice();const o=(r?"mousemove":"touchmove")+".resize",s=(r?"mouseup":"touchcancel.resize touchend")+".resize";e.type==="point"?Dh(window,o,this.movePoint):e.type==="rot"?Dh(window,o,this.rotate):Dh(window,o,this.resize),Dh(window,s,this.endResize)}resize(e){this.lastEvent=e;const t=this.snapToGrid(this.el.point(F0(e)));let i=t.x-this.startPoint.x,n=t.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(i*=2,n*=2);const r=this.box.x+i,o=this.box.y+n,s=this.box.x2+i,h=this.box.y2+n;let f=new Ds(this.box);if(this.eventType.includes("l")&&(f.x=Math.min(r,this.box.x2),f.x2=Math.max(r,this.box.x2)),this.eventType.includes("r")&&(f.x=Math.min(s,this.box.x),f.x2=Math.max(s,this.box.x)),this.eventType.includes("t")&&(f.y=Math.min(o,this.box.y2),f.y2=Math.max(o,this.box.y2)),this.eventType.includes("b")&&(f.y=Math.min(h,this.box.y),f.y2=Math.max(h,this.box.y)),f.width=f.x2-f.x,f.height=f.y2-f.y,this.preserveAspectRatio){const y=f.width/this.box.width,x=f.height/this.box.height,S=["lt","t","rt","r","rb","b","lb","l"],E=(S.indexOf(this.eventType)+4)%S.length,z=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[E];let D=this.eventType.includes("t")||this.eventType.includes("b")?x:y;D=this.eventType.length===2?Math.max(y,x):D,f=(function(F,U,G){const Z=[[F.x,F.y],[F.x+F.width,F.y],[F.x+F.width,F.y+F.height],[F.x,F.y+F.height]].map((([ee,ie])=>{const le=ee-U[0],J=(ie-U[1])*G;return[le*G+U[0],J+U[1]]}));return eT(Z)})(this.box,z,D)}this.el.dispatch("resize",{box:new Ds(f),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.size(f.width,f.height).move(f.x,f.y)}movePoint(e){this.lastEvent=e;const{x:t,y:i}=this.snapToGrid(this.el.point(F0(e))),n=this.el.array().slice();n[this.index]=[t,i],this.el.dispatch("resize",{box:eT(n),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.plot(n)}rotate(e){this.lastEvent=e;const t=this.startPoint,i=this.el.point(F0(e)),{cx:n,cy:r}=this.box,o=t.x-n,s=t.y-r,h=i.x-n,f=i.y-r,y=Math.sqrt(o*o+s*s)*Math.sqrt(h*h+f*f);if(y===0)return;let x=Math.acos((o*h+s*f)/y)/Math.PI*180;if(!x)return;i.x<t.x&&(x=-x);const S=new Xn(this.el),{x:E,y:z}=new or(n,r).transformO(S),{rotate:D}=S.decompose(),F=this.snapToAngle(D+x)-D;this.el.dispatch("resize",{box:this.box,angle:F,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.transform(S.rotateO(F,E,z))}endResize(e){this.eventType!=="rot"&&this.eventType!=="point"&&this.resize(e),this.lastEvent=null,this.eventType="",Rc(window,"mousemove.resize touchmove.resize"),Rc(window,"mouseup.resize touchend.resize")}snapToGrid(e){return this.grid&&(e.x=Math.round(e.x/this.grid)*this.grid,e.y=Math.round(e.y/this.grid)*this.grid),e}snapToAngle(e){return this.degree&&(e=Math.round(e/this.degree)*this.degree),e}}sa(Ro,{resize:function(a=!0,e={}){typeof a=="object"&&(e=a,a=!0);let t=this.remember("_ResizeHandler");return t||(a.prototype instanceof tT?(t=new a(this),a=!0):t=new tT(this),this.remember("_resizeHandler",t)),t.active(a,e),this}}),window.SVG===void 0&&(window.SVG=J5),window.Apex===void 0&&(window.Apex={});var iT=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new gg(this.ctx),this.ctx.axes=new l8(this.ctx),this.ctx.core=new O8(this.ctx.el,this.ctx),this.ctx.config=new uy({}),this.ctx.data=new Hw(this.ctx),this.ctx.grid=new lP(this.ctx),this.ctx.graphics=new vi(this.ctx),this.ctx.coreUtils=new Rs(this.ctx),this.ctx.crosshairs=new d1(this.ctx),this.ctx.events=new s8(this.ctx),this.ctx.exports=new Hm(this.ctx),this.ctx.fill=new su(this.ctx),this.ctx.localization=new o8(this.ctx),this.ctx.options=new df,this.ctx.responsive=new c8(this.ctx),this.ctx.series=new zc(this.ctx),this.ctx.theme=new u8(this.ctx),this.ctx.formatters=new Cy(this.ctx),this.ctx.titleSubtitle=new h8(this.ctx),this.ctx.legend=new uP(this.ctx),this.ctx.toolbar=new hP(this.ctx),this.ctx.tooltip=new qA(this.ctx),this.ctx.dimensions=new O_(this.ctx),this.ctx.updateHelpers=new z8(this.ctx),this.ctx.zoomPanSelection=new y8(this.ctx),this.ctx.w.globals.tooltip=new qA(this.ctx)}}]),a})(),nT=(function(){function a(e){wn(this,a),this.ctx=e,this.w=e.w}return Sn(a,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each((function(){this.removeClass("*"),this.off()}),!0),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,i=e.isUpdating,n=this.w.globals.dom.Paper.node;n.parentNode&&n.parentNode.parentNode&&!i&&(n.parentNode.parentNode.style.minHeight="unset");var r=this.w.globals.dom.baseEl;r&&this.ctx.eventList.forEach((function(s){r.removeEventListener(s,t.ctx.events.documentEvent)}));var o=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(o.Paper),o.Paper.remove(),o.elWrap=null,o.elGraphical=null,o.elLegendWrap=null,o.elLegendForeign=null,o.baseEl=null,o.elGridRect=null,o.elGridRectMask=null,o.elGridRectBarMask=null,o.elGridRectMarkerMask=null,o.elForecastMask=null,o.elNonForecastMask=null,o.elDefs=null}}]),a})(),lb=new WeakMap,Us=(function(){function a(e,t){wn(this,a),this.opts=t,this.ctx=this,this.w=new r8(t).init(),this.el=e,this.w.globals.cuid=At.randomId(),this.w.globals.chartID=this.w.config.chart.id?At.escapeString(this.w.config.chart.id):this.w.globals.cuid,new iT(this).initModules(),this.lastUpdateOptions=null,this.create=At.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Sn(a,[{key:"render",value:function(){var e=this;return new Promise((function(t,i){if(At.elementExists(e.el)){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var n=e.w.config.chart.events.beforeMount;typeof n=="function"&&n(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),(function(S,E){var z=!1;if(S.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var D=S.getBoundingClientRect();S.style.display!=="none"&&D.width!==0||(z=!0)}var F=new ResizeObserver((function(U){z&&E.call(S,U),z=!0}));S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(S.children).forEach((function(U){return F.observe(U)})):F.observe(S),lb.set(E,F)})(e.el.parentNode,e.parentResizeHandler);var r=e.el.getRootNode&&e.el.getRootNode(),o=At.is("ShadowRoot",r),s=e.el.ownerDocument,h=o?r.getElementById("apexcharts-css"):s.getElementById("apexcharts-css");if(!h){var f;(h=document.createElement("style")).id="apexcharts-css",h.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  direction: ltr !important;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  display: inline-block;
  position: relative;
  width: 16px;
  height: 16px;
  font-size: 16px;
  line-height: 16px;
  margin-right: 4px;
  text-align: center;
  vertical-align: middle;
  color: inherit;
}

.apexcharts-tooltip-marker::before {
  content: "";
  display: inline-block;
  width: 100%;
  text-align: center;
  color: currentcolor;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  font-size: 26px;
  font-family: Arial, Helvetica, sans-serif;
  line-height: 14px;
  font-weight: 900;
}

.apexcharts-tooltip-marker[shape="circle"]::before {
  content: "\\25CF";
}

.apexcharts-tooltip-marker[shape="square"]::before,
.apexcharts-tooltip-marker[shape="rect"]::before {
  content: "\\25A0";
  transform: translate(-1px, -2px);
}

.apexcharts-tooltip-marker[shape="line"]::before {
  content: "\\2500";
}

.apexcharts-tooltip-marker[shape="diamond"]::before {
  content: "\\25C6";
  font-size: 28px;
}

.apexcharts-tooltip-marker[shape="triangle"]::before {
  content: "\\25B2";
  font-size: 22px;
}

.apexcharts-tooltip-marker[shape="cross"]::before {
  content: "\\2715";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="plus"]::before {
  content: "\\2715";
  transform: rotate(45deg) translate(-1px, -1px);
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="star"]::before {
  content: "\\2605";
  font-size: 18px;
}

.apexcharts-tooltip-marker[shape="sparkle"]::before {
  content: "\\2726";
  font-size: 20px;
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_shape {
  stroke-width: 1;
  stroke-dasharray: 10 10;
  stroke: black;
  stroke-opacity: 0.1;
  pointer-events: none;
  fill: none;
}

.svg_select_handle {
  stroke-width: 3;
  stroke: black;
  fill: none;
}

.svg_select_handle_r {
  cursor: e-resize;
}

.svg_select_handle_l {
  cursor: w-resize;
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect,
.no-pointer-events {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.apexcharts-radar-series .apexcharts-yaxis {
  pointer-events: none;
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}

.apexcharts-disable-transitions * {
  transition: none !important;
}`;var y=((f=e.opts.chart)===null||f===void 0?void 0:f.nonce)||e.w.config.chart.nonce;y&&h.setAttribute("nonce",y),o?r.prepend(h):e.w.config.chart.injectStyleSheet!==!1&&s.head.appendChild(h)}var x=e.create(e.w.config.series,{});if(!x)return t(e);e.mount(x).then((function(){typeof e.w.config.chart.events.mounted=="function"&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(x)})).catch((function(S){i(S)}))}else i(new Error("Element not found"))}))}},{key:"create",value:function(e,t){var i=this,n=this.w;new iT(this).initModules();var r=this.w.globals;if(r.noData=!1,r.animationEnded=!1,!At.elementExists(this.el)||(this.responsive.checkResponsiveConfig(t),n.config.xaxis.convertedCatToNumeric&&new cy(n.config).convertCatToNumericXaxis(n.config,this.ctx),this.core.setupElements(),n.config.chart.type==="treemap"&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),r.svgWidth===0))return r.animationEnded=!0,null;var o=e;e.forEach((function(S,E){S.hidden&&(o=i.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:E}))}));var s=Rs.checkComboSeries(o,n.config.chart.type);r.comboCharts=s.comboCharts,r.comboBarCount=s.comboBarCount;var h=o.every((function(S){return S.data&&S.data.length===0}));(o.length===0||h&&r.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(o),this.theme.init(),new xg(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),r.noData&&r.collapsedSeries.length!==r.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),r.axisCharts&&(this.core.coreCalculations(),n.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new Rs(this).getLargestMarkerSize(),this.dimensions.plotCoords();var f=this.core.xySettings();this.grid.createGridMask();var y=this.core.plotChartType(o,f),x=new hg(this);return x.bringForward(),n.config.dataLabels.background.enabled&&x.dataLabelsBackground(),this.core.shiftGraphPosition(),n.globals.dataPoints>50&&n.globals.dom.elWrap.classList.add("apexcharts-disable-transitions"),{elGraph:y,xyRatios:f,dimensions:{plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}}}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this,n=i.w;return new Promise((function(r,o){if(i.el===null)return o(new Error("Not enough data to display or target element not found"));(t===null||n.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new lP(i);var s,h,f=i.grid.drawGrid();if(i.annotations=new a8(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),n.config.grid.position==="back"&&(f&&n.globals.dom.elGraphical.add(f.el),f!=null&&(s=f.elGridBorders)!==null&&s!==void 0&&s.node&&n.globals.dom.elGraphical.add(f.elGridBorders)),Array.isArray(t.elGraph))for(var y=0;y<t.elGraph.length;y++)n.globals.dom.elGraphical.add(t.elGraph[y]);else n.globals.dom.elGraphical.add(t.elGraph);n.config.grid.position==="front"&&(f&&n.globals.dom.elGraphical.add(f.el),f!=null&&(h=f.elGridBorders)!==null&&h!==void 0&&h.node&&n.globals.dom.elGraphical.add(f.elGridBorders)),n.config.xaxis.crosshairs.position==="front"&&i.crosshairs.drawXCrosshairs(),n.config.yaxis[0].crosshairs.position==="front"&&i.crosshairs.drawYCrosshairs(),n.config.chart.type!=="treemap"&&i.axes.drawAxis(n.config.chart.type,f);var x=new hy(e.ctx,f),S=new Uw(e.ctx,f);if(f!==null&&(x.xAxisLabelCorrections(f.xAxisTickWidth),S.setYAxisTextAlignments(),n.config.yaxis.map((function(z,D){n.globals.ignoreYAxisIndexes.indexOf(D)===-1&&S.yAxisTitleRotate(D,z.opposite)}))),i.annotations.drawAxesAnnotations(),!n.globals.noData){if(n.config.tooltip.enabled&&!n.globals.noData&&i.w.globals.tooltip.drawTooltip(t.xyRatios),n.globals.axisCharts&&(n.globals.isXNumeric||n.config.xaxis.convertedCatToNumeric||n.globals.isRangeBar))(n.config.chart.zoom.enabled||n.config.chart.selection&&n.config.chart.selection.enabled||n.config.chart.pan&&n.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:t.xyRatios});else{var E=n.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(z){E[z]=!1}))}n.config.chart.toolbar.show&&!n.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}n.globals.memory.methodsToExec.length>0&&n.globals.memory.methodsToExec.forEach((function(z){z.method(z.params,!1,z.context)})),n.globals.axisCharts||n.globals.noData||i.core.resizeNonAxisCharts(),r(i)}))}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),(function(t,i){var n=lb.get(i);n&&(n.disconnect(),lb.delete(i))})(this.el.parentNode,this.parentResizeHandler);var e=this.w.config.chart.id;e&&Apex._chartInstances.forEach((function(t,i){t.id===At.escapeString(e)&&Apex._chartInstances.splice(i,1)})),new nT(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],s=this.w;return s.globals.selection=void 0,this.lastUpdateOptions&&JSON.stringify(this.lastUpdateOptions)===JSON.stringify(e)?this:(e.series&&(this.data.resetParsingFlags(),this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((function(h,f){return t.updateHelpers._extendSeries(h,f)}))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),s.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,i,n,r,o))}},{key:"updateSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.data.resetParsingFlags(),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,i)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.data.resetParsingFlags();var n=this.w.config.series.slice();return n.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,t,i)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this;i.data.resetParsingFlags(),i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var n=i.w.config.series.slice(),r=0;r<n.length;r++)if(e[r]!==null&&e[r]!==void 0)for(var o=0;o<e[r].data.length;o++)n[r].data.push(e[r].data[o]);return i.w.config.series=n,t&&(i.w.globals.initialSeries=At.clone(i.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise((function(i,n){if(t.lastUpdateOptions&&JSON.stringify(t.lastUpdateOptions)===JSON.stringify(e))return i(t);t.lastUpdateOptions=At.clone(e),new nT(t.ctx).clear({isUpdating:!0});var r=t.create(t.w.config.series,e);if(!r)return i(t);t.mount(r).then((function(){typeof t.w.config.chart.events.updated=="function"&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,i(t)})).catch((function(o){n(o)}))}))}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach((function(i){t.push(i)}))),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter((function(t){if(t.group)return!0})).map((function(t){return e.w.config.chart.group===t.group?t.chart:e}))}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"highlightSeries",value:function(e){this.series.highlightSeries(e)}},{key:"isSeriesHidden",value:function(e){this.series.isSeriesHidden(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addXaxisAnnotationExternal(e,t,n)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addYaxisAnnotationExternal(e,t,n)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addPointAnnotationExternal(e,t,n)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=this;t&&(i=t),i.annotations.removeAnnotation(i,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new h1(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new h1(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new Hm(this.ctx).dataURI(e)}},{key:"getSvgString",value:function(e){return new Hm(this.ctx).getSvgString(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Hm(this.ctx).exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;typeof e=="function"&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=At.escapeString(e);if(Apex._chartInstances){var i=Apex._chartInstances.filter((function(n){return n.id===t}))[0];return i&&i.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),t=0;t<e.length;t++)new a(e[t],JSON.parse(e[t].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var i=this.getChartByID(e);if(i){i.w.globals.isExecCalled=!0;var n=null;if(i.publicMethods.indexOf(t)!==-1){for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];n=i[t].apply(i,o)}return n}}},{key:"merge",value:function(e,t){return At.extend(e,t)}},{key:"getThemePalettes",value:function(){return{palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3F51B5","#03A9F4","#4CAF50","#F9CE1D","#FF9800"],palette3:["#33B2DF","#546E7A","#D4526E","#13D8AA","#A5978B"],palette4:["#4ECDC4","#C7F464","#81D4FA","#FD6A6A","#546E7A"],palette5:["#2B908F","#F9A3A4","#90EE7E","#FA4443","#69D2E7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}}}]),a})();const iu={blue:"#3b82f6",emerald:"#10b981",amber:"#f59e0b",red:"#ef4444",violet:"#8b5cf6",pink:"#ec4899",teal:"#14b8a6"},N8=[iu.blue,iu.emerald,iu.amber,iu.red,iu.violet,iu.pink,iu.teal];function a_(a){return a>=1e9?"Rp "+(a/1e9).toFixed(1)+"M":a>=1e6?"Rp "+(a/1e6).toFixed(1)+"jt":a>=1e3?"Rp "+(a/1e3).toFixed(0)+"rb":"Rp "+a}function r_(a){return"Rp "+Number(a).toLocaleString("id-ID")}const vP={"1H":1,"1M":7,"1B":30,"1T":365},bP={"1H":"Hari ini","1M":"7 hari terakhir","1B":"30 hari terakhir","1T":"1 tahun terakhir"};let Th=null,Eh=null,ff=null,Bp=null,jp=null,Vp=!1,z_=[],y1=[],_1=[],F_=[],$w=[],Gw=[];function Ww(){[Th,Eh,ff,Bp,jp].forEach(a=>{a&&a.destroy()}),Th=Eh=ff=Bp=jp=null}function B8(){if(Vp){console.log("Financial charts initialization already in progress, skipping...");return}Vp=!0,Ww();const a=window.__financialData;if(!a){Vp=!1;return}z_=a.chartLabels||a.dailyLabels||[],y1=(a.chartRevenue||a.dailyRevenue||[]).map(Number),_1=(a.chartTickets||a.dailyCounts||[]).map(Number),F_=a.monthlyLabels||[],$w=(a.monthlyRevenue||[]).map(Number),Gw=(a.monthlyTickets||[]).map(Number),console.log("Financial Charts Init:",{labelsLen:z_.length,revLen:y1.length,txLen:_1.length,monthlyLen:F_.length});try{j8(),V8(),H8(a),U8(a),console.log("Financial charts initialized successfully")}catch(e){console.error("Error initializing financial charts:",e)}finally{setTimeout(()=>{Vp=!1},100)}}function sx(a){const e=z_.length,t=Math.max(0,e-a);return{labels:z_.slice(t),revenue:y1.slice(t),tickets:_1.slice(t)}}function wP({seriesName:a,data:e,labels:t,color:i,yFormatter:n,tooltipFormatter:r,height:o}){return{series:[{name:a,data:e}],chart:{type:"area",height:o||260,fontFamily:"'Inter', 'Segoe UI', sans-serif",toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1,reset:!1}},animations:{enabled:!0,easing:"easeinout",speed:700,animateGradually:{enabled:!0,delay:80},dynamicAnimation:{enabled:!0,speed:350}},dropShadow:{enabled:!0,top:2,left:0,blur:5,color:i,opacity:.1}},colors:[i],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.05,stops:[0,85,100]}},stroke:{curve:"smooth",width:2.5},markers:{size:0,hover:{size:5,sizeOffset:3},strokeWidth:3,strokeColors:"#fff"},xaxis:{categories:t,axisBorder:{show:!1},axisTicks:{show:!1},tickAmount:15,labels:{style:{colors:"#9ca3af",fontSize:"10px"},rotate:-90,hideOverlappingLabels:!0}},yaxis:{labels:{style:{colors:"#9ca3af",fontSize:"10px"},formatter:n},min:0},grid:{borderColor:"#f3f4f6",strokeDashArray:4,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},padding:{top:-8,right:0,bottom:0,left:6}},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:r}},legend:{show:!1},dataLabels:{enabled:!1}}}function j8(){const a=document.getElementById("revenueChart");if(!a)return;Th instanceof Us&&(Th.destroy(),Th=null);const e=sx(30),t=wP({seriesName:"Pendapatan",data:e.revenue,labels:e.labels,color:iu.blue,yFormatter:a_,tooltipFormatter:r_});Th=new Us(a,t),Th.render(),SP(e)}function SP(a,e=!1){const t=a.revenue.reduce((s,h)=>s+h,0),i=a.labels.length||1,n=a.tickets.reduce((s,h)=>s+h,0),r=Math.max(...a.revenue),o=s=>document.getElementById(s);if(o("revTotal")&&(o("revTotal").textContent=a_(t)),o("revAvg")){o("revAvg").textContent=a_(Math.round(t/i));const s=o("revAvg").nextElementSibling;s&&(s.textContent=e?"Avg/Bulan":"Avg/Hari")}if(o("revTx")&&(o("revTx").textContent=n.toLocaleString("id-ID")),o("revMax")){o("revMax").textContent=a_(r);const s=o("revMax").nextElementSibling;s&&(s.textContent=e?"Bulan Tertinggi":"Tertinggi")}}window.filterFinancialRevenue=function(a){if(!Th)return;let e;const t=a==="1T";if(t)e={labels:F_,revenue:$w,tickets:Gw};else{const n=vP[a]||30;e=sx(n)}Th.updateOptions({series:[{name:"Pendapatan",data:e.revenue}],xaxis:{categories:e.labels}},!0,!0),SP(e,t);const i=document.getElementById("revenuePeriodLabel");i&&(i.textContent=bP[a]||"")};function V8(){const a=document.getElementById("ticketChart");if(!a)return;Eh instanceof Us&&(Eh.destroy(),Eh=null);const e=sx(30),t=wP({seriesName:"Transaksi",data:e.tickets,labels:e.labels,color:iu.emerald,yFormatter:i=>Math.round(i).toString(),tooltipFormatter:i=>i.toLocaleString("id-ID")+" transaksi"});Eh=new Us(a,t),Eh.render(),kP(e)}function kP(a,e=!1){const t=a.tickets.reduce((s,h)=>s+h,0),i=a.labels.length||1,n=a.tickets.filter(s=>s>0).length,r=Math.max(...a.tickets),o=s=>document.getElementById(s);if(o("txTotal")&&(o("txTotal").textContent=t.toLocaleString("id-ID")),o("txAvg")){o("txAvg").textContent=Math.round(t/i).toLocaleString("id-ID");const s=o("txAvg").nextElementSibling;s&&(s.textContent=e?"Avg/Bulan":"Avg/Hari")}if(o("txDays")){o("txDays").textContent=n+"/"+i;const s=o("txDays").nextElementSibling;s&&(s.textContent=e?"Bulan Aktif":"Hari Aktif")}if(o("txMax")){o("txMax").textContent=r.toLocaleString("id-ID");const s=o("txMax").nextElementSibling;s&&(s.textContent=e?"Bulan Tertinggi":"Tertinggi")}}window.filterFinancialTickets=function(a){if(!Eh)return;let e;const t=a==="1T";if(t)e={labels:F_,tickets:Gw,revenue:$w};else{const n=vP[a]||30;e=sx(n)}Eh.updateOptions({series:[{name:"Transaksi",data:e.tickets}],xaxis:{categories:e.labels}},!0,!0),kP(e,t);const i=document.getElementById("ticketPeriodLabel");i&&(i.textContent=bP[a]||"")};function H8(a){const e=document.getElementById("paymentMethodChart");if(!e||!a.paymentLabels||a.paymentLabels.length===0)return;ff instanceof Us&&(ff.destroy(),ff=null);const t=(a.paymentData||[]).map(Number),i={series:t,labels:a.paymentLabels,chart:{type:"donut",height:220,fontFamily:"'Inter', 'Segoe UI', sans-serif",animations:{enabled:!0}},colors:N8.slice(0,t.length),plotOptions:{pie:{donut:{size:"72%",labels:{show:!0,name:{show:!0,fontSize:"12px",fontWeight:600,color:"#6b7280",offsetY:-4},value:{show:!0,fontSize:"18px",fontWeight:800,color:"#1f2937",offsetY:4,formatter:r_},total:{show:!0,showAlways:!0,label:"Total",fontSize:"12px",fontWeight:600,color:"#6b7280",formatter:n=>{const r=n.globals.seriesTotals.reduce((o,s)=>o+s,0);return r_(r)}}}}}},stroke:{width:2,colors:["#fff"]},dataLabels:{enabled:!1},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:r_}},legend:{show:!1}};ff=new Us(e,i),ff.render()}function aT(a,e,t){const i=document.getElementById(a);if(!i||!e||e.length<2)return null;const n={series:[{data:e}],chart:{type:"area",height:36,sparkline:{enabled:!0},animations:{enabled:!0}},stroke:{curve:"smooth",width:2},colors:[t],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.3,opacityTo:.05,stops:[0,90,100]}},tooltip:{enabled:!1}},r=new Us(i,n);return r.render(),r}function U8(a){Bp instanceof Us&&(Bp.destroy(),Bp=null),jp instanceof Us&&(jp.destroy(),jp=null);const e=(a.sparkRevenue||[]).map(Number),t=(a.sparkTickets||[]).map(Number);Bp=aT("sparkGross",e,iu.blue),jp=aT("sparkTickets",t,iu.violet)}function Xw(a=0){(document.getElementById("revenueChart")||document.getElementById("ticketChart")||document.getElementById("paymentMethodChart"))&&(window.__financialData?B8():a<10?setTimeout(()=>{Xw(a+1)},100):console.warn("Financial dashboard data not found after retries"))}let vf=null;document.addEventListener("livewire:navigated",()=>{vf&&clearTimeout(vf),Ww(),Vp=!1,vf=setTimeout(()=>{Xw(),vf=null},50)});document.addEventListener("livewire:navigating",()=>{vf&&(clearTimeout(vf),vf=null),Ww(),Vp=!1});document.addEventListener("financial-dashboard-data-ready",()=>{Xw()});const Sh={blue:"#3b82f6",emerald:"#10b981",amber:"#f59e0b",red:"#ef4444",violet:"#8b5cf6",pink:"#ec4899",teal:"#14b8a6"},$8=[Sh.blue,Sh.emerald,Sh.amber,Sh.red,Sh.violet,Sh.pink,Sh.teal];function s_(a){return a>=1e9?"Rp "+(a/1e9).toFixed(1)+"M":a>=1e6?"Rp "+(a/1e6).toFixed(1)+"jt":a>=1e3?"Rp "+(a/1e3).toFixed(0)+"rb":"Rp "+a}function G8(a){return"Rp "+Number(a).toLocaleString("id-ID")}const CP={"1H":1,"1M":7,"1B":30,"1T":365},AP={"1H":"Hari ini","1M":"7 hari terakhir","1B":"30 hari terakhir","1T":"1 tahun terakhir"};let fg=null,pg=null,N_=null,x1=[],TP=[],EP=[],Yw=[],qw=[],Zw=[];function ox(a){const e=x1.length,t=Math.max(0,e-a);return{labels:x1.slice(t),revenue:TP.slice(t),tickets:EP.slice(t)}}function MP({seriesName:a,data:e,labels:t,color:i,yFormatter:n,tooltipFormatter:r,height:o}){return{series:[{name:a,data:e}],chart:{type:"area",height:o||260,fontFamily:"'Inter', 'Segoe UI', sans-serif",toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,zoomin:!1,zoomout:!1,pan:!1,reset:!1}},animations:{enabled:!0,easing:"easeinout",speed:700,animateGradually:{enabled:!0,delay:80},dynamicAnimation:{enabled:!0,speed:350}},dropShadow:{enabled:!0,top:2,left:0,blur:5,color:i,opacity:.1}},colors:[i],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.05,stops:[0,85,100]}},stroke:{curve:"smooth",width:2.5},markers:{size:0,hover:{size:5,sizeOffset:3},strokeWidth:3,strokeColors:"#fff"},xaxis:{categories:t,axisBorder:{show:!1},axisTicks:{show:!1},tickAmount:15,labels:{style:{colors:"#9ca3af",fontSize:"10px"},rotate:-90,hideOverlappingLabels:!0}},yaxis:{title:{text:""},labels:{style:{colors:"#9ca3af",fontSize:"10px"},formatter:n},min:0},grid:{borderColor:"#f3f4f6",strokeDashArray:4,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},padding:{top:-8,right:0,bottom:0,left:6}},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:r}},legend:{show:!1},dataLabels:{enabled:!1}}}function W8(){const a=document.getElementById("revenueChart");if(!a)return;const e=ox(30),t=MP({seriesName:"Pendapatan",data:e.revenue,labels:e.labels,color:Sh.blue,yFormatter:s_,tooltipFormatter:i=>G8(i)});fg=new Us(a,t),fg.render(),IP(e)}function IP(a,e=!1){const t=a.revenue.reduce((s,h)=>s+h,0),i=a.labels.length||1,n=a.tickets.reduce((s,h)=>s+h,0),r=Math.max(...a.revenue),o=s=>document.getElementById(s);if(o("revTotal")&&(o("revTotal").textContent=s_(t)),o("revAvg")){o("revAvg").textContent=s_(Math.round(t/i));const s=o("revAvg").nextElementSibling;s&&(s.textContent=e?"Rata-rata/Bulan":"Rata-rata/Hari")}if(o("revTx")&&(o("revTx").textContent=n.toLocaleString("id-ID")),o("revMax")){o("revMax").textContent=s_(r);const s=o("revMax").nextElementSibling;s&&(s.textContent=e?"Bulan Tertinggi":"Hari Tertinggi")}}window.filterRevenueChart=function(a){if(!fg)return;let e;const t=a==="1T";if(t)e={labels:Yw,revenue:qw,tickets:Zw};else{const n=CP[a]||30;e=ox(n)}fg.updateOptions({series:[{name:"Pendapatan",data:e.revenue}],xaxis:{categories:e.labels}},!0,!0),IP(e,t);const i=document.getElementById("revenuePeriodLabel");i&&(i.textContent=AP[a]||"")};function X8(){const a=document.getElementById("ticketChart");if(!a)return;const e=ox(30),t=MP({seriesName:"Tiket Terjual",data:e.tickets,labels:e.labels,color:Sh.emerald,yFormatter:i=>Math.round(i).toString(),tooltipFormatter:i=>i.toLocaleString("id-ID")+" tiket"});pg=new Us(a,t),pg.render(),PP(e)}function PP(a,e=!1){const t=a.tickets.reduce((s,h)=>s+h,0),i=a.labels.length||1,n=a.tickets.filter(s=>s>0).length,r=Math.max(...a.tickets),o=s=>document.getElementById(s);if(o("txTotal")&&(o("txTotal").textContent=t.toLocaleString("id-ID")),o("txAvg")){o("txAvg").textContent=Math.round(t/i).toLocaleString("id-ID");const s=o("txAvg").nextElementSibling;s&&(s.textContent=e?"Rata-rata/Bulan":"Rata-rata/Hari")}if(o("txDays")){o("txDays").textContent=n+"/"+i;const s=o("txDays").nextElementSibling;s&&(s.textContent=e?"Bulan Aktif":"Hari Aktif")}if(o("txMax")){o("txMax").textContent=r.toLocaleString("id-ID");const s=o("txMax").nextElementSibling;s&&(s.textContent=e?"Bulan Tertinggi":"Hari Tertinggi")}}window.filterTicketChart=function(a){if(!pg)return;let e;const t=a==="1T";if(t)e={labels:Yw,tickets:Zw,revenue:qw};else{const n=CP[a]||30;e=ox(n)}pg.updateOptions({series:[{name:"Tiket Terjual",data:e.tickets}],xaxis:{categories:e.labels}},!0,!0),PP(e,t);const i=document.getElementById("ticketPeriodLabel");i&&(i.textContent=AP[a]||"")};function Y8(a){const e=document.getElementById("ticketTypeChart");if(!e||!a.ticketTypeLabels||a.ticketTypeLabels.length===0)return;const t=(a.ticketTypeData||[]).map(Number),i={series:t,labels:a.ticketTypeLabels,chart:{type:"donut",height:220,fontFamily:"'Inter', 'Segoe UI', sans-serif",animations:{enabled:!0,easing:"easeinout",speed:800}},colors:$8.slice(0,t.length),plotOptions:{pie:{donut:{size:"72%",labels:{show:!0,name:{show:!0,fontSize:"12px",fontWeight:600,color:"#6b7280",offsetY:-4},value:{show:!0,fontSize:"20px",fontWeight:800,color:"#1f2937",offsetY:4,formatter:n=>Number(n).toLocaleString("id-ID")},total:{show:!0,showAlways:!0,label:"Total",fontSize:"12px",fontWeight:600,color:"#6b7280",formatter:n=>n.globals.seriesTotals.reduce((r,o)=>r+o,0).toLocaleString("id-ID")}}}}},stroke:{width:2,colors:["#fff"]},dataLabels:{enabled:!1},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:n=>n.toLocaleString("id-ID")+" tiket"}},legend:{show:!1},states:{hover:{filter:{type:"darken",value:.1}},active:{filter:{type:"none"}}}};N_=new Us(e,i),N_.render()}function Kw(){[fg,pg,N_].forEach(a=>{a&&a.destroy()}),fg=pg=N_=null}function q8(){Kw();const a=window.__dashboardData;a&&(x1=a.labels||[],TP=(a.revenue||[]).map(Number),EP=(a.tickets||[]).map(Number),Yw=a.monthlyLabels||[],qw=(a.monthlyRevenue||[]).map(Number),Zw=(a.monthlyTickets||[]).map(Number),W8(),X8(),Y8(a))}function Jw(a=0){(document.getElementById("revenueChart")||document.getElementById("ticketChart")||document.getElementById("ticketTypeChart"))&&(window.__dashboardData?q8():a<10?setTimeout(()=>{Jw(a+1)},100):console.warn("Ticket dashboard data not found after retries"))}document.addEventListener("livewire:navigated",()=>{Kw(),setTimeout(()=>{Jw()},50)});document.addEventListener("ticket-dashboard-data-ready",()=>{Jw()});document.addEventListener("livewire:navigating",()=>{Kw()});const v1=(a=0)=>{const e=document.getElementById("revenueTrendChart"),t=document.getElementById("postViewsChart"),i=document.getElementById("categoriesChart");if(!(e||t||i))return;const r=window.__adminDashboardData;if(!r&&a<20){setTimeout(()=>{v1(a+1)},150);return}if(!r){console.warn("No admin dashboard data found after retries. Data:",window.__adminDashboardData);return}if((!r.revenue||!r.postViews||!r.categories)&&(console.warn("Admin dashboard data structure incomplete:",r),a<10)){setTimeout(()=>{v1(a+1)},200);return}const o={chart:{fontFamily:"Inter, sans-serif",toolbar:{show:!1},zoom:{enabled:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},grid:{borderColor:"#f1f5f9",strokeDashArray:4,xaxis:{lines:{show:!1}}},xaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:"#64748b",fontSize:"12px"}}},yaxis:{labels:{style:{colors:"#64748b",fontSize:"12px"}}},legend:{show:!1},tooltip:{theme:"dark",x:{show:!1}}};if(e){console.log("Initializing Revenue Trend Chart...",{element:e,data:r.revenue,dataLength:r.revenue?.data?.length||0}),window.revenueChart instanceof Us&&window.revenueChart.destroy();const s=Array.isArray(r.revenue.data)?r.revenue.data:[],h=Array.isArray(r.revenue.labels)?r.revenue.labels:[],f={...o,series:[{name:"Pendapatan",data:s}],chart:{...o.chart,type:"area",height:300},colors:["#10b981"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.05,stops:[0,100]}},xaxis:{...o.xaxis,categories:h},yaxis:{...o.yaxis,labels:{formatter:y=>y>=1e6?"Rp "+y/1e6+"jt":y>=1e3?"Rp "+y/1e3+"rb":"Rp "+y}},tooltip:{...o.tooltip,y:{formatter:function(y){return"Rp "+new Intl.NumberFormat("id-ID").format(y)}}}};try{window.revenueChart=new Us(e,f),window.revenueChart.render().then(()=>{console.log("Revenue Trend Chart rendered successfully")}).catch(y=>{console.error("Error rendering Revenue Trend Chart:",y)})}catch(y){console.error("Error creating Revenue Trend Chart:",y)}}else console.warn("Revenue Trend Chart element not found");if(t){console.log("Initializing Post Views Chart...",{element:t,data:r.postViews,dataLength:r.postViews?.data?.length||0}),window.postViewsChart instanceof Us&&window.postViewsChart.destroy();const s=Array.isArray(r.postViews.data)?r.postViews.data:[],h=Array.isArray(r.postViews.labels)?r.postViews.labels:[],f={...o,series:[{name:"Pembaca",data:s}],chart:{...o.chart,type:"area",height:300},colors:["#8b5cf6"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.05,stops:[0,100]}},xaxis:{...o.xaxis,categories:h},yaxis:{...o.yaxis,labels:{formatter:y=>y.toFixed(0)}}};try{window.postViewsChart=new Us(t,f),window.postViewsChart.render().then(()=>{console.log("Post Views Chart rendered successfully")}).catch(y=>{console.error("Error rendering Post Views Chart:",y)})}catch(y){console.error("Error creating Post Views Chart:",y)}}else console.warn("Post Views Chart element not found");if(i&&r.categories){console.log("Initializing Categories Chart...",{element:i,data:r.categories,countsLength:r.categories?.counts?.length||0}),window.categoriesChart instanceof Us&&window.categoriesChart.destroy();const s=Array.isArray(r.categories.colors)?r.categories.colors:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"],h=Array.isArray(r.categories.counts)?r.categories.counts:[],f=Array.isArray(r.categories.names)?r.categories.names:[],y={series:h,chart:{type:"donut",height:250,fontFamily:"Inter, sans-serif",animations:{enabled:!1}},labels:f,colors:s,plotOptions:{pie:{donut:{size:"75%",labels:{show:!1}}}},dataLabels:{enabled:!1},stroke:{width:0},legend:{show:!1},tooltip:{enabled:!0,theme:"dark",y:{formatter:function(x){return x+" Destinasi"}}}};try{window.categoriesChart=new Us(i,y),window.categoriesChart.render().then(()=>{console.log("Categories Chart rendered successfully")}).catch(x=>{console.error("Error rendering Categories Chart:",x)})}catch(x){console.error("Error creating Categories Chart:",x)}}else console.warn("Categories Chart element not found or data missing");console.log("Admin Dashboard Charts initialization completed")},LP=()=>{window.revenueChart instanceof Us&&(window.revenueChart.destroy(),window.revenueChart=null),window.postViewsChart instanceof Us&&(window.postViewsChart.destroy(),window.postViewsChart=null),window.categoriesChart instanceof Us&&(window.categoriesChart.destroy(),window.categoriesChart=null)};window.revenueChart=null;window.postViewsChart=null;window.categoriesChart=null;const rT=()=>{setTimeout(()=>{v1()},100)};let Qh=null;const DP=()=>{Qh&&Qh.disconnect();const a=document.getElementById("revenueTrendChart"),e=document.getElementById("postViewsChart"),t=document.getElementById("categoriesChart");a||e||t?rT():(Qh=new MutationObserver((i,n)=>{const r=document.getElementById("revenueTrendChart"),o=document.getElementById("postViewsChart"),s=document.getElementById("categoriesChart");(r||o||s)&&(n.disconnect(),Qh=null,setTimeout(()=>{rT()},200))}),Qh.observe(document.body,{childList:!0,subtree:!0}))};document.addEventListener("livewire:navigated",()=>{LP(),setTimeout(()=>{DP()},50)});document.addEventListener("livewire:navigating",()=>{LP(),Qh&&(Qh.disconnect(),Qh=null)});document.addEventListener("admin-dashboard-data-ready",()=>{DP()});setTimeout(()=>{startPeriodicCheck()},1e3);const RP=()=>{window.tinymce&&(tinymce.remove(".settings-tiny"),tinymce.init({selector:".settings-tiny",height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount"],toolbar:"undo redo | blocks | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Inter,sans-serif; font-size:14px }",branding:!1,promotion:!1,setup:a=>{a.on("change",()=>{a.save();const e=document.getElementById(a.id);e&&e.dispatchEvent(new Event("input",{bubbles:!0}))})}}))};document.addEventListener("DOMContentLoaded",RP);document.addEventListener("livewire:navigated",RP);document.addEventListener("livewire:navigating",()=>{window.tinymce&&tinymce.remove(".settings-tiny")});var Z8=Object.create,OP=Object.defineProperty,K8=Object.getOwnPropertyDescriptor,zP=Object.getOwnPropertyNames,J8=Object.getPrototypeOf,Q8=Object.prototype.hasOwnProperty,Gu=(a,e)=>function(){return e||(0,a[zP(a)[0]])((e={exports:{}}).exports,e),e.exports},e6=(a,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of zP(e))!Q8.call(a,n)&&n!==t&&OP(a,n,{get:()=>e[n],enumerable:!(i=K8(e,n))||i.enumerable});return a},lr=(a,e,t)=>(t=a!=null?Z8(J8(a)):{},e6(!a||!a.__esModule?OP(t,"default",{value:a,enumerable:!0}):t,a)),zs=Gu({"node_modules/alpinejs/dist/module.cjs.js"(a,e){var t=Object.create,i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,h=(X,se)=>function(){return se||(0,X[r(X)[0]])((se={exports:{}}).exports,se),se.exports},f=(X,se)=>{for(var Ae in se)i(X,Ae,{get:se[Ae],enumerable:!0})},y=(X,se,Ae,Ve)=>{if(se&&typeof se=="object"||typeof se=="function")for(let nt of r(se))!s.call(X,nt)&&nt!==Ae&&i(X,nt,{get:()=>se[nt],enumerable:!(Ve=n(se,nt))||Ve.enumerable});return X},x=(X,se,Ae)=>(Ae=X!=null?t(o(X)):{},y(!X||!X.__esModule?i(Ae,"default",{value:X,enumerable:!0}):Ae,X)),S=X=>y(i({},"__esModule",{value:!0}),X),E=h({"node_modules/@vue/shared/dist/shared.cjs.js"(X){Object.defineProperty(X,"__esModule",{value:!0});function se(Bt,Ki){const en=Object.create(null),Cn=Bt.split(",");for(let Ba=0;Ba<Cn.length;Ba++)en[Cn[Ba]]=!0;return Ki?Ba=>!!en[Ba.toLowerCase()]:Ba=>!!en[Ba]}var Ae={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"HYDRATE_EVENTS",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},Ve={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},nt="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",ut=se(nt),bt=2;function Xt(Bt,Ki=0,en=Bt.length){let Cn=Bt.split(/(\r?\n)/);const Ba=Cn.filter((Qr,Pr)=>Pr%2===1);Cn=Cn.filter((Qr,Pr)=>Pr%2===0);let Ia=0;const Ns=[];for(let Qr=0;Qr<Cn.length;Qr++)if(Ia+=Cn[Qr].length+(Ba[Qr]&&Ba[Qr].length||0),Ia>=Ki){for(let Pr=Qr-bt;Pr<=Qr+bt||en>Ia;Pr++){if(Pr<0||Pr>=Cn.length)continue;const Gr=Pr+1;Ns.push(`${Gr}${" ".repeat(Math.max(3-String(Gr).length,0))}|  ${Cn[Pr]}`);const kl=Cn[Pr].length,rh=Ba[Pr]&&Ba[Pr].length||0;if(Pr===Qr){const ku=Ki-(Ia-(kl+rh)),Id=Math.max(1,en>Ia?kl-ku:en-Ki);Ns.push("   |  "+" ".repeat(ku)+"^".repeat(Id))}else if(Pr>Qr){if(en>Ia){const ku=Math.max(Math.min(en-Ia,kl),1);Ns.push("   |  "+"^".repeat(ku))}Ia+=kl+rh}}break}return Ns.join(`
`)}var pi="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hn=se(pi),Wn=se(pi+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),wa=/[>/="'\u0009\u000a\u000c\u0020]/,$r={};function wr(Bt){if($r.hasOwnProperty(Bt))return $r[Bt];const Ki=wa.test(Bt);return Ki&&console.error(`unsafe attribute name: ${Bt}`),$r[Bt]=!Ki}var Jr={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},Sa=se("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),Ln=se("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap");function ra(Bt){if(ho(Bt)){const Ki={};for(let en=0;en<Bt.length;en++){const Cn=Bt[en],Ba=ra(ys(Cn)?ms(Cn):Cn);if(Ba)for(const Ia in Ba)Ki[Ia]=Ba[Ia]}return Ki}else if(fo(Bt))return Bt}var ua=/;(?![^(]*\))/g,Na=/:(.+)/;function ms(Bt){const Ki={};return Bt.split(ua).forEach(en=>{if(en){const Cn=en.split(Na);Cn.length>1&&(Ki[Cn[0].trim()]=Cn[1].trim())}}),Ki}function Qn(Bt){let Ki="";if(!Bt)return Ki;for(const en in Bt){const Cn=Bt[en],Ba=en.startsWith("--")?en:bu(en);(ys(Cn)||typeof Cn=="number"&&Sa(Ba))&&(Ki+=`${Ba}:${Cn};`)}return Ki}function To(Bt){let Ki="";if(ys(Bt))Ki=Bt;else if(ho(Bt))for(let en=0;en<Bt.length;en++){const Cn=To(Bt[en]);Cn&&(Ki+=Cn+" ")}else if(fo(Bt))for(const en in Bt)Bt[en]&&(Ki+=en+" ");return Ki.trim()}var fu="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",pu="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Hl="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",gu=se(fu),Ed=se(pu),jc=se(Hl),Md=/["'&<>]/;function Zu(Bt){const Ki=""+Bt,en=Md.exec(Ki);if(!en)return Ki;let Cn="",Ba,Ia,Ns=0;for(Ia=en.index;Ia<Ki.length;Ia++){switch(Ki.charCodeAt(Ia)){case 34:Ba="&quot;";break;case 38:Ba="&amp;";break;case 39:Ba="&#39;";break;case 60:Ba="&lt;";break;case 62:Ba="&gt;";break;default:continue}Ns!==Ia&&(Cn+=Ki.substring(Ns,Ia)),Ns=Ia+1,Cn+=Ba}return Ns!==Ia?Cn+Ki.substring(Ns,Ia):Cn}var Ul=/^-?>|<!--|-->|--!>|<!-$/g;function Vc(Bt){return Bt.replace(Ul,"")}function mu(Bt,Ki){if(Bt.length!==Ki.length)return!1;let en=!0;for(let Cn=0;en&&Cn<Bt.length;Cn++)en=yc(Bt[Cn],Ki[Cn]);return en}function yc(Bt,Ki){if(Bt===Ki)return!0;let en=dr(Bt),Cn=dr(Ki);if(en||Cn)return en&&Cn?Bt.getTime()===Ki.getTime():!1;if(en=ho(Bt),Cn=ho(Ki),en||Cn)return en&&Cn?mu(Bt,Ki):!1;if(en=fo(Bt),Cn=fo(Ki),en||Cn){if(!en||!Cn)return!1;const Ba=Object.keys(Bt).length,Ia=Object.keys(Ki).length;if(Ba!==Ia)return!1;for(const Ns in Bt){const Qr=Bt.hasOwnProperty(Ns),Pr=Ki.hasOwnProperty(Ns);if(Qr&&!Pr||!Qr&&Pr||!yc(Bt[Ns],Ki[Ns]))return!1}}return String(Bt)===String(Ki)}function yu(Bt,Ki){return Bt.findIndex(en=>yc(en,Ki))}var Hc=Bt=>Bt==null?"":fo(Bt)?JSON.stringify(Bt,_u,2):String(Bt),_u=(Bt,Ki)=>xc(Ki)?{[`Map(${Ki.size})`]:[...Ki.entries()].reduce((en,[Cn,Ba])=>(en[`${Cn} =>`]=Ba,en),{})}:Bo(Ki)?{[`Set(${Ki.size})`]:[...Ki.values()]}:fo(Ki)&&!ho(Ki)&&!Wl(Ki)?String(Ki):Ki,vl=["bigInt","optionalChaining","nullishCoalescingOperator"],Qo=Object.freeze({}),Uc=Object.freeze([]),Ku=()=>{},bl=()=>!1,xu=/^on[^a-z]/,$c=Bt=>xu.test(Bt),wl=Bt=>Bt.startsWith("onUpdate:"),Gc=Object.assign,Ju=(Bt,Ki)=>{const en=Bt.indexOf(Ki);en>-1&&Bt.splice(en,1)},Qu=Object.prototype.hasOwnProperty,_c=(Bt,Ki)=>Qu.call(Bt,Ki),ho=Array.isArray,xc=Bt=>il(Bt)==="[object Map]",Bo=Bt=>il(Bt)==="[object Set]",dr=Bt=>Bt instanceof Date,el=Bt=>typeof Bt=="function",ys=Bt=>typeof Bt=="string",vu=Bt=>typeof Bt=="symbol",fo=Bt=>Bt!==null&&typeof Bt=="object",$l=Bt=>fo(Bt)&&el(Bt.then)&&el(Bt.catch),tl=Object.prototype.toString,il=Bt=>tl.call(Bt),Gl=Bt=>il(Bt).slice(8,-1),Wl=Bt=>il(Bt)==="[object Object]",eh=Bt=>ys(Bt)&&Bt!=="NaN"&&Bt[0]!=="-"&&""+parseInt(Bt,10)===Bt,th=se(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vc=Bt=>{const Ki=Object.create(null);return en=>Ki[en]||(Ki[en]=Bt(en))},ih=/-(\w)/g,nh=vc(Bt=>Bt.replace(ih,(Ki,en)=>en?en.toUpperCase():"")),Sl=/\B([A-Z])/g,bu=vc(Bt=>Bt.replace(Sl,"-$1").toLowerCase()),Xl=vc(Bt=>Bt.charAt(0).toUpperCase()+Bt.slice(1)),Wc=vc(Bt=>Bt?`on${Xl(Bt)}`:""),wu=(Bt,Ki)=>Bt!==Ki&&(Bt===Bt||Ki===Ki),ah=(Bt,Ki)=>{for(let en=0;en<Bt.length;en++)Bt[en](Ki)},bc=(Bt,Ki,en)=>{Object.defineProperty(Bt,Ki,{configurable:!0,enumerable:!1,value:en})},Xc=Bt=>{const Ki=parseFloat(Bt);return isNaN(Ki)?Bt:Ki},wc,Su=()=>wc||(wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});X.EMPTY_ARR=Uc,X.EMPTY_OBJ=Qo,X.NO=bl,X.NOOP=Ku,X.PatchFlagNames=Ae,X.babelParserDefaultPlugins=vl,X.camelize=nh,X.capitalize=Xl,X.def=bc,X.escapeHtml=Zu,X.escapeHtmlComment=Vc,X.extend=Gc,X.generateCodeFrame=Xt,X.getGlobalThis=Su,X.hasChanged=wu,X.hasOwn=_c,X.hyphenate=bu,X.invokeArrayFns=ah,X.isArray=ho,X.isBooleanAttr=Wn,X.isDate=dr,X.isFunction=el,X.isGloballyWhitelisted=ut,X.isHTMLTag=gu,X.isIntegerKey=eh,X.isKnownAttr=Ln,X.isMap=xc,X.isModelListener=wl,X.isNoUnitNumericStyleProp=Sa,X.isObject=fo,X.isOn=$c,X.isPlainObject=Wl,X.isPromise=$l,X.isReservedProp=th,X.isSSRSafeAttrName=wr,X.isSVGTag=Ed,X.isSet=Bo,X.isSpecialBooleanAttr=hn,X.isString=ys,X.isSymbol=vu,X.isVoidTag=jc,X.looseEqual=yc,X.looseIndexOf=yu,X.makeMap=se,X.normalizeClass=To,X.normalizeStyle=ra,X.objectToString=tl,X.parseStringStyle=ms,X.propsToAttrMap=Jr,X.remove=Ju,X.slotFlagsText=Ve,X.stringifyStyle=Qn,X.toDisplayString=Hc,X.toHandlerKey=Wc,X.toNumber=Xc,X.toRawType=Gl,X.toTypeString=il}}),z=h({"node_modules/@vue/shared/index.js"(X,se){se.exports=E()}}),D=h({"node_modules/@vue/reactivity/dist/reactivity.cjs.js"(X){Object.defineProperty(X,"__esModule",{value:!0});var se=z(),Ae=new WeakMap,Ve=[],nt,ut=Symbol("iterate"),bt=Symbol("Map key iterate");function Xt(Xe){return Xe&&Xe._isEffect===!0}function pi(Xe,ui=se.EMPTY_OBJ){Xt(Xe)&&(Xe=Xe.raw);const yi=wa(Xe,ui);return ui.lazy||yi(),yi}function hn(Xe){Xe.active&&($r(Xe),Xe.options.onStop&&Xe.options.onStop(),Xe.active=!1)}var Wn=0;function wa(Xe,ui){const yi=function(){if(!yi.active)return Xe();if(!Ve.includes(yi)){$r(yi);try{return Ln(),Ve.push(yi),nt=yi,Xe()}finally{Ve.pop(),ra(),nt=Ve[Ve.length-1]}}};return yi.id=Wn++,yi.allowRecurse=!!ui.allowRecurse,yi._isEffect=!0,yi.active=!0,yi.raw=Xe,yi.deps=[],yi.options=ui,yi}function $r(Xe){const{deps:ui}=Xe;if(ui.length){for(let yi=0;yi<ui.length;yi++)ui[yi].delete(Xe);ui.length=0}}var wr=!0,Jr=[];function Sa(){Jr.push(wr),wr=!1}function Ln(){Jr.push(wr),wr=!0}function ra(){const Xe=Jr.pop();wr=Xe===void 0?!0:Xe}function ua(Xe,ui,yi){if(!wr||nt===void 0)return;let An=Ae.get(Xe);An||Ae.set(Xe,An=new Map);let ln=An.get(yi);ln||An.set(yi,ln=new Set),ln.has(nt)||(ln.add(nt),nt.deps.push(ln),nt.options.onTrack&&nt.options.onTrack({effect:nt,target:Xe,type:ui,key:yi}))}function Na(Xe,ui,yi,An,ln,Vn){const ga=Ae.get(Xe);if(!ga)return;const Sr=new Set,Wr=es=>{es&&es.forEach(po=>{(po!==nt||po.allowRecurse)&&Sr.add(po)})};if(ui==="clear")ga.forEach(Wr);else if(yi==="length"&&se.isArray(Xe))ga.forEach((es,po)=>{(po==="length"||po>=An)&&Wr(es)});else switch(yi!==void 0&&Wr(ga.get(yi)),ui){case"add":se.isArray(Xe)?se.isIntegerKey(yi)&&Wr(ga.get("length")):(Wr(ga.get(ut)),se.isMap(Xe)&&Wr(ga.get(bt)));break;case"delete":se.isArray(Xe)||(Wr(ga.get(ut)),se.isMap(Xe)&&Wr(ga.get(bt)));break;case"set":se.isMap(Xe)&&Wr(ga.get(ut));break}const sh=es=>{es.options.onTrigger&&es.options.onTrigger({effect:es,target:Xe,key:yi,type:ui,newValue:An,oldValue:ln,oldTarget:Vn}),es.options.scheduler?es.options.scheduler(es):es()};Sr.forEach(sh)}var ms=se.makeMap("__proto__,__v_isRef,__isVue"),Qn=new Set(Object.getOwnPropertyNames(Symbol).map(Xe=>Symbol[Xe]).filter(se.isSymbol)),To=jc(),fu=jc(!1,!0),pu=jc(!0),Hl=jc(!0,!0),gu=Ed();function Ed(){const Xe={};return["includes","indexOf","lastIndexOf"].forEach(ui=>{Xe[ui]=function(...yi){const An=Bt(this);for(let Vn=0,ga=this.length;Vn<ga;Vn++)ua(An,"get",Vn+"");const ln=An[ui](...yi);return ln===-1||ln===!1?An[ui](...yi.map(Bt)):ln}}),["push","pop","shift","unshift","splice"].forEach(ui=>{Xe[ui]=function(...yi){Sa();const An=Bt(this)[ui].apply(this,yi);return ra(),An}}),Xe}function jc(Xe=!1,ui=!1){return function(An,ln,Vn){if(ln==="__v_isReactive")return!Xe;if(ln==="__v_isReadonly")return Xe;if(ln==="__v_raw"&&Vn===(Xe?ui?nh:ih:ui?vc:th).get(An))return An;const ga=se.isArray(An);if(!Xe&&ga&&se.hasOwn(gu,ln))return Reflect.get(gu,ln,Vn);const Sr=Reflect.get(An,ln,Vn);return(se.isSymbol(ln)?Qn.has(ln):ms(ln))||(Xe||ua(An,"get",ln),ui)?Sr:Cn(Sr)?!ga||!se.isIntegerKey(ln)?Sr.value:Sr:se.isObject(Sr)?Xe?wu(Sr):Xl(Sr):Sr}}var Md=Ul(),Zu=Ul(!0);function Ul(Xe=!1){return function(yi,An,ln,Vn){let ga=yi[An];if(!Xe&&(ln=Bt(ln),ga=Bt(ga),!se.isArray(yi)&&Cn(ga)&&!Cn(ln)))return ga.value=ln,!0;const Sr=se.isArray(yi)&&se.isIntegerKey(An)?Number(An)<yi.length:se.hasOwn(yi,An),Wr=Reflect.set(yi,An,ln,Vn);return yi===Bt(Vn)&&(Sr?se.hasChanged(ln,ga)&&Na(yi,"set",An,ln,ga):Na(yi,"add",An,ln)),Wr}}function Vc(Xe,ui){const yi=se.hasOwn(Xe,ui),An=Xe[ui],ln=Reflect.deleteProperty(Xe,ui);return ln&&yi&&Na(Xe,"delete",ui,void 0,An),ln}function mu(Xe,ui){const yi=Reflect.has(Xe,ui);return(!se.isSymbol(ui)||!Qn.has(ui))&&ua(Xe,"has",ui),yi}function yc(Xe){return ua(Xe,"iterate",se.isArray(Xe)?"length":ut),Reflect.ownKeys(Xe)}var yu={get:To,set:Md,deleteProperty:Vc,has:mu,ownKeys:yc},Hc={get:pu,set(Xe,ui){return console.warn(`Set operation on key "${String(ui)}" failed: target is readonly.`,Xe),!0},deleteProperty(Xe,ui){return console.warn(`Delete operation on key "${String(ui)}" failed: target is readonly.`,Xe),!0}},_u=se.extend({},yu,{get:fu,set:Zu}),vl=se.extend({},Hc,{get:Hl}),Qo=Xe=>se.isObject(Xe)?Xl(Xe):Xe,Uc=Xe=>se.isObject(Xe)?wu(Xe):Xe,Ku=Xe=>Xe,bl=Xe=>Reflect.getPrototypeOf(Xe);function xu(Xe,ui,yi=!1,An=!1){Xe=Xe.__v_raw;const ln=Bt(Xe),Vn=Bt(ui);ui!==Vn&&!yi&&ua(ln,"get",ui),!yi&&ua(ln,"get",Vn);const{has:ga}=bl(ln),Sr=An?Ku:yi?Uc:Qo;if(ga.call(ln,ui))return Sr(Xe.get(ui));if(ga.call(ln,Vn))return Sr(Xe.get(Vn));Xe!==ln&&Xe.get(ui)}function $c(Xe,ui=!1){const yi=this.__v_raw,An=Bt(yi),ln=Bt(Xe);return Xe!==ln&&!ui&&ua(An,"has",Xe),!ui&&ua(An,"has",ln),Xe===ln?yi.has(Xe):yi.has(Xe)||yi.has(ln)}function wl(Xe,ui=!1){return Xe=Xe.__v_raw,!ui&&ua(Bt(Xe),"iterate",ut),Reflect.get(Xe,"size",Xe)}function Gc(Xe){Xe=Bt(Xe);const ui=Bt(this);return bl(ui).has.call(ui,Xe)||(ui.add(Xe),Na(ui,"add",Xe,Xe)),this}function Ju(Xe,ui){ui=Bt(ui);const yi=Bt(this),{has:An,get:ln}=bl(yi);let Vn=An.call(yi,Xe);Vn?eh(yi,An,Xe):(Xe=Bt(Xe),Vn=An.call(yi,Xe));const ga=ln.call(yi,Xe);return yi.set(Xe,ui),Vn?se.hasChanged(ui,ga)&&Na(yi,"set",Xe,ui,ga):Na(yi,"add",Xe,ui),this}function Qu(Xe){const ui=Bt(this),{has:yi,get:An}=bl(ui);let ln=yi.call(ui,Xe);ln?eh(ui,yi,Xe):(Xe=Bt(Xe),ln=yi.call(ui,Xe));const Vn=An?An.call(ui,Xe):void 0,ga=ui.delete(Xe);return ln&&Na(ui,"delete",Xe,void 0,Vn),ga}function _c(){const Xe=Bt(this),ui=Xe.size!==0,yi=se.isMap(Xe)?new Map(Xe):new Set(Xe),An=Xe.clear();return ui&&Na(Xe,"clear",void 0,void 0,yi),An}function ho(Xe,ui){return function(An,ln){const Vn=this,ga=Vn.__v_raw,Sr=Bt(ga),Wr=ui?Ku:Xe?Uc:Qo;return!Xe&&ua(Sr,"iterate",ut),ga.forEach((sh,es)=>An.call(ln,Wr(sh),Wr(es),Vn))}}function xc(Xe,ui,yi){return function(...An){const ln=this.__v_raw,Vn=Bt(ln),ga=se.isMap(Vn),Sr=Xe==="entries"||Xe===Symbol.iterator&&ga,Wr=Xe==="keys"&&ga,sh=ln[Xe](...An),es=yi?Ku:ui?Uc:Qo;return!ui&&ua(Vn,"iterate",Wr?bt:ut),{next(){const{value:po,done:Uh}=sh.next();return Uh?{value:po,done:Uh}:{value:Sr?[es(po[0]),es(po[1])]:es(po),done:Uh}},[Symbol.iterator](){return this}}}}function Bo(Xe){return function(...ui){{const yi=ui[0]?`on key "${ui[0]}" `:"";console.warn(`${se.capitalize(Xe)} operation ${yi}failed: target is readonly.`,Bt(this))}return Xe==="delete"?!1:this}}function dr(){const Xe={get(Vn){return xu(this,Vn)},get size(){return wl(this)},has:$c,add:Gc,set:Ju,delete:Qu,clear:_c,forEach:ho(!1,!1)},ui={get(Vn){return xu(this,Vn,!1,!0)},get size(){return wl(this)},has:$c,add:Gc,set:Ju,delete:Qu,clear:_c,forEach:ho(!1,!0)},yi={get(Vn){return xu(this,Vn,!0)},get size(){return wl(this,!0)},has(Vn){return $c.call(this,Vn,!0)},add:Bo("add"),set:Bo("set"),delete:Bo("delete"),clear:Bo("clear"),forEach:ho(!0,!1)},An={get(Vn){return xu(this,Vn,!0,!0)},get size(){return wl(this,!0)},has(Vn){return $c.call(this,Vn,!0)},add:Bo("add"),set:Bo("set"),delete:Bo("delete"),clear:Bo("clear"),forEach:ho(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Vn=>{Xe[Vn]=xc(Vn,!1,!1),yi[Vn]=xc(Vn,!0,!1),ui[Vn]=xc(Vn,!1,!0),An[Vn]=xc(Vn,!0,!0)}),[Xe,yi,ui,An]}var[el,ys,vu,fo]=dr();function $l(Xe,ui){const yi=ui?Xe?fo:vu:Xe?ys:el;return(An,ln,Vn)=>ln==="__v_isReactive"?!Xe:ln==="__v_isReadonly"?Xe:ln==="__v_raw"?An:Reflect.get(se.hasOwn(yi,ln)&&ln in An?yi:An,ln,Vn)}var tl={get:$l(!1,!1)},il={get:$l(!1,!0)},Gl={get:$l(!0,!1)},Wl={get:$l(!0,!0)};function eh(Xe,ui,yi){const An=Bt(yi);if(An!==yi&&ui.call(Xe,An)){const ln=se.toRawType(Xe);console.warn(`Reactive ${ln} contains both the raw and reactive versions of the same object${ln==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var th=new WeakMap,vc=new WeakMap,ih=new WeakMap,nh=new WeakMap;function Sl(Xe){switch(Xe){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bu(Xe){return Xe.__v_skip||!Object.isExtensible(Xe)?0:Sl(se.toRawType(Xe))}function Xl(Xe){return Xe&&Xe.__v_isReadonly?Xe:bc(Xe,!1,yu,tl,th)}function Wc(Xe){return bc(Xe,!1,_u,il,vc)}function wu(Xe){return bc(Xe,!0,Hc,Gl,ih)}function ah(Xe){return bc(Xe,!0,vl,Wl,nh)}function bc(Xe,ui,yi,An,ln){if(!se.isObject(Xe))return console.warn(`value cannot be made reactive: ${String(Xe)}`),Xe;if(Xe.__v_raw&&!(ui&&Xe.__v_isReactive))return Xe;const Vn=ln.get(Xe);if(Vn)return Vn;const ga=bu(Xe);if(ga===0)return Xe;const Sr=new Proxy(Xe,ga===2?An:yi);return ln.set(Xe,Sr),Sr}function Xc(Xe){return wc(Xe)?Xc(Xe.__v_raw):!!(Xe&&Xe.__v_isReactive)}function wc(Xe){return!!(Xe&&Xe.__v_isReadonly)}function Su(Xe){return Xc(Xe)||wc(Xe)}function Bt(Xe){return Xe&&Bt(Xe.__v_raw)||Xe}function Ki(Xe){return se.def(Xe,"__v_skip",!0),Xe}var en=Xe=>se.isObject(Xe)?Xl(Xe):Xe;function Cn(Xe){return!!(Xe&&Xe.__v_isRef===!0)}function Ba(Xe){return Qr(Xe)}function Ia(Xe){return Qr(Xe,!0)}var Ns=class{constructor(Xe,ui=!1){this._shallow=ui,this.__v_isRef=!0,this._rawValue=ui?Xe:Bt(Xe),this._value=ui?Xe:en(Xe)}get value(){return ua(Bt(this),"get","value"),this._value}set value(Xe){Xe=this._shallow?Xe:Bt(Xe),se.hasChanged(Xe,this._rawValue)&&(this._rawValue=Xe,this._value=this._shallow?Xe:en(Xe),Na(Bt(this),"set","value",Xe))}};function Qr(Xe,ui=!1){return Cn(Xe)?Xe:new Ns(Xe,ui)}function Pr(Xe){Na(Bt(Xe),"set","value",Xe.value)}function Gr(Xe){return Cn(Xe)?Xe.value:Xe}var kl={get:(Xe,ui,yi)=>Gr(Reflect.get(Xe,ui,yi)),set:(Xe,ui,yi,An)=>{const ln=Xe[ui];return Cn(ln)&&!Cn(yi)?(ln.value=yi,!0):Reflect.set(Xe,ui,yi,An)}};function rh(Xe){return Xc(Xe)?Xe:new Proxy(Xe,kl)}var ku=class{constructor(Xe){this.__v_isRef=!0;const{get:ui,set:yi}=Xe(()=>ua(this,"get","value"),()=>Na(this,"set","value"));this._get=ui,this._set=yi}get value(){return this._get()}set value(Xe){this._set(Xe)}};function Id(Xe){return new ku(Xe)}function Cu(Xe){Su(Xe)||console.warn("toRefs() expects a reactive object but received a plain one.");const ui=se.isArray(Xe)?new Array(Xe.length):{};for(const yi in Xe)ui[yi]=jo(Xe,yi);return ui}var Au=class{constructor(Xe,ui){this._object=Xe,this._key=ui,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(Xe){this._object[this._key]=Xe}};function jo(Xe,ui){return Cn(Xe[ui])?Xe[ui]:new Au(Xe,ui)}var Ji=class{constructor(Xe,ui,yi){this._setter=ui,this._dirty=!0,this.__v_isRef=!0,this.effect=pi(Xe,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,Na(Bt(this),"set","value"))}}),this.__v_isReadonly=yi}get value(){const Xe=Bt(this);return Xe._dirty&&(Xe._value=this.effect(),Xe._dirty=!1),ua(Xe,"get","value"),Xe._value}set value(Xe){this._setter(Xe)}};function Hh(Xe){let ui,yi;return se.isFunction(Xe)?(ui=Xe,yi=()=>{console.warn("Write operation failed: computed value is readonly")}):(ui=Xe.get,yi=Xe.set),new Ji(ui,yi,se.isFunction(Xe)||!Xe.set)}X.ITERATE_KEY=ut,X.computed=Hh,X.customRef=Id,X.effect=pi,X.enableTracking=Ln,X.isProxy=Su,X.isReactive=Xc,X.isReadonly=wc,X.isRef=Cn,X.markRaw=Ki,X.pauseTracking=Sa,X.proxyRefs=rh,X.reactive=Xl,X.readonly=wu,X.ref=Ba,X.resetTracking=ra,X.shallowReactive=Wc,X.shallowReadonly=ah,X.shallowRef=Ia,X.stop=hn,X.toRaw=Bt,X.toRef=jo,X.toRefs=Cu,X.track=ua,X.trigger=Na,X.triggerRef=Pr,X.unref=Gr}}),F=h({"node_modules/@vue/reactivity/index.js"(X,se){se.exports=D()}}),U={};f(U,{Alpine:()=>_a,default:()=>un}),e.exports=S(U);var G=!1,Z=!1,ee=[],ie=-1,le=!1;function J(X){me(X)}function re(){le=!0}function ae(){le=!1,ye()}function me(X){ee.includes(X)||ee.push(X),ye()}function Te(X){let se=ee.indexOf(X);se!==-1&&se>ie&&ee.splice(se,1)}function ye(){if(!Z&&!G){if(le)return;G=!0,queueMicrotask(Re)}}function Re(){G=!1,Z=!0;for(let X=0;X<ee.length;X++)ee[X](),ie=X;ee.length=0,ie=-1,Z=!1}var We,Le,ht,$e,pt=!0;function Dt(X){pt=!1,X(),pt=!0}function qe(X){We=X.reactive,ht=X.release,Le=se=>X.effect(se,{scheduler:Ae=>{pt?J(Ae):Ae()}}),$e=X.raw}function Nt(X){Le=X}function ni(X){let se=()=>{};return[Ve=>{let nt=Le(Ve);return X._x_effects||(X._x_effects=new Set,X._x_runEffects=()=>{X._x_effects.forEach(ut=>ut())}),X._x_effects.add(nt),se=()=>{nt!==void 0&&(X._x_effects.delete(nt),ht(nt))},nt},()=>{se()}]}function xi(X,se){let Ae=!0,Ve,nt=Le(()=>{let ut=X();if(JSON.stringify(ut),!Ae&&(typeof ut=="object"||ut!==Ve)){let bt=Ve;queueMicrotask(()=>{se(ut,bt)})}Ve=ut,Ae=!1});return()=>ht(nt)}async function Lt(X){re();try{await X(),await Promise.resolve()}finally{ae()}}var Tt=[],wt=[],mi=[];function bi(X){mi.push(X)}function Zi(X,se){typeof se=="function"?(X._x_cleanups||(X._x_cleanups=[]),X._x_cleanups.push(se)):(se=X,wt.push(se))}function Li(X){Tt.push(X)}function si(X,se,Ae){X._x_attributeCleanups||(X._x_attributeCleanups={}),X._x_attributeCleanups[se]||(X._x_attributeCleanups[se]=[]),X._x_attributeCleanups[se].push(Ae)}function fn(X,se){X._x_attributeCleanups&&Object.entries(X._x_attributeCleanups).forEach(([Ae,Ve])=>{(se===void 0||se.includes(Ae))&&(Ve.forEach(nt=>nt()),delete X._x_attributeCleanups[Ae])})}function Ii(X){var se,Ae;for((se=X._x_effects)==null||se.forEach(Te);(Ae=X._x_cleanups)!=null&&Ae.length;)X._x_cleanups.pop()()}var Qi=new MutationObserver(Di),rn=!1;function xn(){Qi.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),rn=!0}function Ye(){li(),Qi.disconnect(),rn=!1}var qt=[];function li(){let X=Qi.takeRecords();qt.push(()=>X.length>0&&Di(X));let se=qt.length;queueMicrotask(()=>{if(qt.length===se)for(;qt.length>0;)qt.shift()()})}function Fi(X){if(!rn)return X();Ye();let se=X();return xn(),se}var ci=!1,Wi=[];function wi(){ci=!0}function Ti(){ci=!1,Di(Wi),Wi=[]}function Di(X){if(ci){Wi=Wi.concat(X);return}let se=[],Ae=new Set,Ve=new Map,nt=new Map;for(let ut=0;ut<X.length;ut++)if(!X[ut].target._x_ignoreMutationObserver&&(X[ut].type==="childList"&&(X[ut].removedNodes.forEach(bt=>{bt.nodeType===1&&bt._x_marker&&Ae.add(bt)}),X[ut].addedNodes.forEach(bt=>{if(bt.nodeType===1){if(Ae.has(bt)){Ae.delete(bt);return}bt._x_marker||se.push(bt)}})),X[ut].type==="attributes")){let bt=X[ut].target,Xt=X[ut].attributeName,pi=X[ut].oldValue,hn=()=>{Ve.has(bt)||Ve.set(bt,[]),Ve.get(bt).push({name:Xt,value:bt.getAttribute(Xt)})},Wn=()=>{nt.has(bt)||nt.set(bt,[]),nt.get(bt).push(Xt)};bt.hasAttribute(Xt)&&pi===null?hn():bt.hasAttribute(Xt)?(Wn(),hn()):Wn()}nt.forEach((ut,bt)=>{fn(bt,ut)}),Ve.forEach((ut,bt)=>{Tt.forEach(Xt=>Xt(bt,ut))});for(let ut of Ae)se.some(bt=>bt.contains(ut))||wt.forEach(bt=>bt(ut));for(let ut of se)ut.isConnected&&mi.forEach(bt=>bt(ut));se=null,Ae=null,Ve=null,nt=null}function dt(X){return Ce(be(X))}function xe(X,se,Ae){return X._x_dataStack=[se,...be(Ae||X)],()=>{X._x_dataStack=X._x_dataStack.filter(Ve=>Ve!==se)}}function be(X){return X._x_dataStack?X._x_dataStack:typeof ShadowRoot=="function"&&X instanceof ShadowRoot?be(X.host):X.parentNode?be(X.parentNode):[]}function Ce(X){return new Proxy({objects:X},tt)}var tt={ownKeys({objects:X}){return Array.from(new Set(X.flatMap(se=>Object.keys(se))))},has({objects:X},se){return se==Symbol.unscopables?!1:X.some(Ae=>Object.prototype.hasOwnProperty.call(Ae,se)||Reflect.has(Ae,se))},get({objects:X},se,Ae){return se=="toJSON"?rt:Reflect.get(X.find(Ve=>Reflect.has(Ve,se))||{},se,Ae)},set({objects:X},se,Ae,Ve){const nt=X.find(bt=>Object.prototype.hasOwnProperty.call(bt,se))||X[X.length-1],ut=Object.getOwnPropertyDescriptor(nt,se);return ut?.set&&ut?.get?ut.set.call(Ve,Ae)||!0:Reflect.set(nt,se,Ae)}};function rt(){return Reflect.ownKeys(this).reduce((se,Ae)=>(se[Ae]=Reflect.get(this,Ae),se),{})}function St(X){let se=Ve=>typeof Ve=="object"&&!Array.isArray(Ve)&&Ve!==null,Ae=(Ve,nt="")=>{Object.entries(Object.getOwnPropertyDescriptors(Ve)).forEach(([ut,{value:bt,enumerable:Xt}])=>{if(Xt===!1||bt===void 0||typeof bt=="object"&&bt!==null&&bt.__v_skip)return;let pi=nt===""?ut:`${nt}.${ut}`;typeof bt=="object"&&bt!==null&&bt._x_interceptor?Ve[ut]=bt.initialize(X,pi,ut):se(bt)&&bt!==Ve&&!(bt instanceof Element)&&Ae(bt,pi)})};return Ae(X)}function yt(X,se=()=>{}){let Ae={initialValue:void 0,_x_interceptor:!0,initialize(Ve,nt,ut){return X(this.initialValue,()=>He(Ve,nt),bt=>_t(Ve,nt,bt),nt,ut)}};return se(Ae),Ve=>{if(typeof Ve=="object"&&Ve!==null&&Ve._x_interceptor){let nt=Ae.initialize.bind(Ae);Ae.initialize=(ut,bt,Xt)=>{let pi=Ve.initialize(ut,bt,Xt);return Ae.initialValue=pi,nt(ut,bt,Xt)}}else Ae.initialValue=Ve;return Ae}}function He(X,se){return se.split(".").reduce((Ae,Ve)=>Ae[Ve],X)}function _t(X,se,Ae){if(typeof se=="string"&&(se=se.split(".")),se.length===1)X[se[0]]=Ae;else{if(se.length===0)throw error;return X[se[0]]||(X[se[0]]={}),_t(X[se[0]],se.slice(1),Ae)}}var Ut={};function Et(X,se){Ut[X]=se}function It(X,se){let Ae=ai(se);return Object.entries(Ut).forEach(([Ve,nt])=>{Object.defineProperty(X,`$${Ve}`,{get(){return nt(se,Ae)},enumerable:!1})}),X}function ai(X){let[se,Ae]=Zt(X),Ve={interceptor:yt,...se};return Zi(X,Ae),Ve}function Si(X,se,Ae,...Ve){try{return Ae(...Ve)}catch(nt){Ai(nt,X,se)}}function Ai(...X){return Mn(...X)}var Mn=Dn;function Mt(X){Mn=X}function Dn(X,se,Ae=void 0){X=Object.assign(X??{message:"No error message given."},{el:se,expression:Ae}),console.warn(`Alpine Expression Error: ${X.message}

${Ae?'Expression: "'+Ae+`"

`:""}`,se),setTimeout(()=>{throw X},0)}var Yn=!0;function _n(X){let se=Yn;Yn=!1;let Ae=X();return Yn=se,Ae}function pn(X,se,Ae={}){let Ve;return Bi(X,se)(nt=>Ve=nt,Ae),Ve}function Bi(...X){return Oi(...X)}var Oi=sn;function mn(X){Oi=X}var hi;function Xi(X){hi=X}function sn(X,se){let Ae={};It(Ae,X);let Ve=[Ae,...be(X)],nt=typeof se=="function"?Fe(Ve,se):ct(Ve,se,X);return Si.bind(null,X,se,nt)}function Fe(X,se){return(Ae=()=>{},{scope:Ve={},params:nt=[],context:ut}={})=>{if(!Yn){Jt(Ae,se,Ce([Ve,...X]),nt);return}let bt=se.apply(Ce([Ve,...X]),nt);Jt(Ae,bt)}}var Oe={};function xt(X,se){if(Oe[X])return Oe[X];let Ae=Object.getPrototypeOf(async function(){}).constructor,Ve=/^[\n\s]*if.*\(.*\)/.test(X.trim())||/^(let|const)\s/.test(X.trim())?`(async()=>{ ${X} })()`:X,ut=(()=>{try{let bt=new Ae(["__self","scope"],`with (scope) { __self.result = ${Ve} }; __self.finished = true; return __self.result;`);return Object.defineProperty(bt,"name",{value:`[Alpine] ${X}`}),bt}catch(bt){return Ai(bt,se,X),Promise.resolve()}})();return Oe[X]=ut,ut}function ct(X,se,Ae){let Ve=xt(se,Ae);return(nt=()=>{},{scope:ut={},params:bt=[],context:Xt}={})=>{Ve.result=void 0,Ve.finished=!1;let pi=Ce([ut,...X]);if(typeof Ve=="function"){let hn=Ve.call(Xt,Ve,pi).catch(Wn=>Ai(Wn,Ae,se));Ve.finished?(Jt(nt,Ve.result,pi,bt,Ae),Ve.result=void 0):hn.then(Wn=>{Jt(nt,Wn,pi,bt,Ae)}).catch(Wn=>Ai(Wn,Ae,se)).finally(()=>Ve.result=void 0)}}}function Jt(X,se,Ae,Ve,nt){if(Yn&&typeof se=="function"){let ut=se.apply(Ae,Ve);ut instanceof Promise?ut.then(bt=>Jt(X,bt,Ae,Ve)).catch(bt=>Ai(bt,nt,se)):X(ut)}else typeof se=="object"&&se instanceof Promise?se.then(ut=>X(ut)):X(se)}function ii(...X){return hi(...X)}function gt(X,se,Ae={}){var Ve,nt;let ut={};It(ut,X);let bt=[ut,...be(X)],Xt=Ce([(Ve=Ae.scope)!=null?Ve:{},...bt]),pi=(nt=Ae.params)!=null?nt:[];if(se.includes("await")){let hn=Object.getPrototypeOf(async function(){}).constructor,Wn=/^[\n\s]*if.*\(.*\)/.test(se.trim())||/^(let|const)\s/.test(se.trim())?`(async()=>{ ${se} })()`:se;return new hn(["scope"],`with (scope) { let __result = ${Wn}; return __result }`).call(Ae.context,Xt)}else{let hn=/^[\n\s]*if.*\(.*\)/.test(se.trim())||/^(let|const)\s/.test(se.trim())?`(()=>{ ${se} })()`:se,wa=new Function(["scope"],`with (scope) { let __result = ${hn}; return __result }`).call(Ae.context,Xt);return typeof wa=="function"&&Yn?wa.apply(Xt,pi):wa}}var Gt="x-";function ei(X=""){return Gt+X}function ki(X){Gt=X}var gn={};function $i(X,se){return gn[X]=se,{before(Ae){if(!gn[Ae]){console.warn(String.raw`Cannot find directive \`${Ae}\`. \`${X}\` will use the default order of execution`);return}const Ve=Bn.indexOf(Ae);Bn.splice(Ve>=0?Ve:Bn.indexOf("DEFAULT"),0,X)}}}function Ei(X){return Object.keys(gn).includes(X)}function Vi(X,se,Ae){if(se=Array.from(se),X._x_virtualDirectives){let ut=Object.entries(X._x_virtualDirectives).map(([Xt,pi])=>({name:Xt,value:pi})),bt=Yi(ut);ut=ut.map(Xt=>bt.find(pi=>pi.name===Xt.name)?{name:`x-bind:${Xt.name}`,value:`"${Xt.value}"`}:Xt),se=se.concat(ut)}let Ve={};return se.map(er((ut,bt)=>Ve[ut]=bt)).filter(kn).map(bn(Ve,Ae)).sort(os).map(ut=>Ma(X,ut))}function Yi(X){return Array.from(X).map(er()).filter(se=>!kn(se))}var on=!1,ca=new Map,vn=Symbol();function $n(X){on=!0;let se=Symbol();vn=se,ca.set(se,[]);let Ae=()=>{for(;ca.get(se).length;)ca.get(se).shift()();ca.delete(se)},Ve=()=>{on=!1,Ae()};X(Ae),Ve()}function Zt(X){let se=[],Ae=Xt=>se.push(Xt),[Ve,nt]=ni(X);return se.push(nt),[{Alpine:No,effect:Ve,cleanup:Ae,evaluateLater:Bi.bind(Bi,X),evaluate:pn.bind(pn,X)},()=>se.forEach(Xt=>Xt())]}function Ma(X,se){let Ae=()=>{},Ve=gn[se.type]||Ae,[nt,ut]=Zt(X);si(X,se.original,ut);let bt=()=>{X._x_ignore||X._x_ignoreSelf||(Ve.inline&&Ve.inline(X,se,nt),Ve=Ve.bind(Ve,X,se,nt),on?ca.get(vn).push(Ve):Ve())};return bt.runCleanups=ut,bt}var nn=(X,se)=>({name:Ae,value:Ve})=>(Ae.startsWith(X)&&(Ae=Ae.replace(X,se)),{name:Ae,value:Ve}),Za=X=>X;function er(X=()=>{}){return({name:se,value:Ae})=>{let{name:Ve,value:nt}=qn.reduce((ut,bt)=>bt(ut),{name:se,value:Ae});return Ve!==se&&X(Ve,se),{name:Ve,value:nt}}}var qn=[];function Zn(X){qn.push(X)}function kn({name:X}){return Oo().test(X)}var Oo=()=>new RegExp(`^${Gt}([^:^.]+)\\b`);function bn(X,se){return({name:Ae,value:Ve})=>{Ae===Ve&&(Ve="");let nt=Ae.match(Oo()),ut=Ae.match(/:([a-zA-Z0-9\-_:]+)/),bt=Ae.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],Xt=se||X[Ae]||Ae;return{type:nt?nt[1]:null,value:ut?ut[1]:null,modifiers:bt.map(pi=>pi.replace(".","")),expression:Ve,original:Xt}}}var ks="DEFAULT",Bn=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",ks,"teleport"];function os(X,se){let Ae=Bn.indexOf(X.type)===-1?ks:X.type,Ve=Bn.indexOf(se.type)===-1?ks:se.type;return Bn.indexOf(Ae)-Bn.indexOf(Ve)}function ls(X,se,Ae={}){X.dispatchEvent(new CustomEvent(se,{detail:Ae,bubbles:!0,composed:!0,cancelable:!0}))}function ha(X,se){if(typeof ShadowRoot=="function"&&X instanceof ShadowRoot){Array.from(X.children).forEach(nt=>ha(nt,se));return}let Ae=!1;if(se(X,()=>Ae=!0),Ae)return;let Ve=X.firstElementChild;for(;Ve;)ha(Ve,se),Ve=Ve.nextElementSibling}function Ga(X,...se){console.warn(`Alpine Warning: ${X}`,...se)}var jl=!1;function So(){jl&&Ga("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),jl=!0,document.body||Ga("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),ls(document,"alpine:init"),ls(document,"alpine:initializing"),xn(),bi(se=>xr(se,ha)),Zi(se=>vr(se)),Li((se,Ae)=>{Vi(se,Ae).forEach(Ve=>Ve())});let X=se=>!Er(se.parentElement,!0);Array.from(document.querySelectorAll(Be().join(","))).filter(X).forEach(se=>{xr(se)}),ls(document,"alpine:initialized"),setTimeout(()=>{yn()})}var Ca=[],cr=[];function Rt(){return Ca.map(X=>X())}function Be(){return Ca.concat(cr).map(X=>X())}function In(X){Ca.push(X)}function ur(X){cr.push(X)}function Er(X,se=!1){return Mr(X,Ae=>{if((se?Be():Rt()).some(nt=>Ae.matches(nt)))return!0})}function Mr(X,se){if(X){if(se(X))return X;if(X._x_teleportBack&&(X=X._x_teleportBack),X.parentNode instanceof ShadowRoot)return Mr(X.parentNode.host,se);if(X.parentElement)return Mr(X.parentElement,se)}}function yl(X){return Rt().some(se=>X.matches(se))}var hr=[];function Fn(X){hr.push(X)}var za=1;function xr(X,se=ha,Ae=()=>{}){Mr(X,Ve=>Ve._x_ignore)||$n(()=>{se(X,(Ve,nt)=>{Ve._x_marker||(Ae(Ve,nt),hr.forEach(ut=>ut(Ve,nt)),Vi(Ve,Ve.attributes).forEach(ut=>ut()),Ve._x_ignore||(Ve._x_marker=za++),Ve._x_ignore&&nt())})})}function vr(X,se=ha){se(X,Ae=>{Ii(Ae),fn(Ae),delete Ae._x_marker})}function yn(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([se,Ae,Ve])=>{Ei(Ae)||Ve.some(nt=>{if(document.querySelector(nt))return Ga(`found "${nt}", but missing ${se} plugin`),!0})})}var Ws=[],zo=!1;function Kn(X=()=>{}){return queueMicrotask(()=>{zo||setTimeout(()=>{ta()})}),new Promise(se=>{Ws.push(()=>{X(),se()})})}function ta(){for(zo=!1;Ws.length;)Ws.shift()()}function tr(){zo=!0}function ea(X,se){return Array.isArray(se)?_i(X,se.join(" ")):typeof se=="object"&&se!==null?Fa(X,se):typeof se=="function"?ea(X,se()):_i(X,se)}function _i(X,se){let Ae=nt=>nt.split(" ").filter(ut=>!X.classList.contains(ut)).filter(Boolean),Ve=nt=>(X.classList.add(...nt),()=>{X.classList.remove(...nt)});return se=se===!0?se="":se||"",Ve(Ae(se))}function Fa(X,se){let Ae=Xt=>Xt.split(" ").filter(Boolean),Ve=Object.entries(se).flatMap(([Xt,pi])=>pi?Ae(Xt):!1).filter(Boolean),nt=Object.entries(se).flatMap(([Xt,pi])=>pi?!1:Ae(Xt)).filter(Boolean),ut=[],bt=[];return nt.forEach(Xt=>{X.classList.contains(Xt)&&(X.classList.remove(Xt),bt.push(Xt))}),Ve.forEach(Xt=>{X.classList.contains(Xt)||(X.classList.add(Xt),ut.push(Xt))}),()=>{bt.forEach(Xt=>X.classList.add(Xt)),ut.forEach(Xt=>X.classList.remove(Xt))}}function Gn(X,se){return typeof se=="object"&&se!==null?pe(X,se):we(X,se)}function pe(X,se){let Ae={};return Object.entries(se).forEach(([Ve,nt])=>{Ae[Ve]=X.style[Ve],Ve.startsWith("--")||(Ve=Me(Ve)),X.style.setProperty(Ve,nt)}),setTimeout(()=>{X.style.length===0&&X.removeAttribute("style")}),()=>{Gn(X,Ae)}}function we(X,se){let Ae=X.getAttribute("style",se);return X.setAttribute("style",se),()=>{X.setAttribute("style",Ae||"")}}function Me(X){return X.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ke(X,se=()=>{}){let Ae=!1;return function(){Ae?se.apply(this,arguments):(Ae=!0,X.apply(this,arguments))}}$i("transition",(X,{value:se,modifiers:Ae,expression:Ve},{evaluate:nt})=>{typeof Ve=="function"&&(Ve=nt(Ve)),Ve!==!1&&(!Ve||typeof Ve=="boolean"?Ct(X,Ae,se):Ge(X,Ve,se))});function Ge(X,se,Ae){Ht(X,ea,""),{enter:nt=>{X._x_transition.enter.during=nt},"enter-start":nt=>{X._x_transition.enter.start=nt},"enter-end":nt=>{X._x_transition.enter.end=nt},leave:nt=>{X._x_transition.leave.during=nt},"leave-start":nt=>{X._x_transition.leave.start=nt},"leave-end":nt=>{X._x_transition.leave.end=nt}}[Ae](se)}function Ct(X,se,Ae){Ht(X,Gn);let Ve=!se.includes("in")&&!se.includes("out")&&!Ae,nt=Ve||se.includes("in")||["enter"].includes(Ae),ut=Ve||se.includes("out")||["leave"].includes(Ae);se.includes("in")&&!Ve&&(se=se.filter((ra,ua)=>ua<se.indexOf("out"))),se.includes("out")&&!Ve&&(se=se.filter((ra,ua)=>ua>se.indexOf("out")));let bt=!se.includes("opacity")&&!se.includes("scale"),Xt=bt||se.includes("opacity"),pi=bt||se.includes("scale"),hn=Xt?0:1,Wn=pi?cn(se,"scale",95)/100:1,wa=cn(se,"delay",0)/1e3,$r=cn(se,"origin","center"),wr="opacity, transform",Jr=cn(se,"duration",150)/1e3,Sa=cn(se,"duration",75)/1e3,Ln="cubic-bezier(0.4, 0.0, 0.2, 1)";nt&&(X._x_transition.enter.during={transformOrigin:$r,transitionDelay:`${wa}s`,transitionProperty:wr,transitionDuration:`${Jr}s`,transitionTimingFunction:Ln},X._x_transition.enter.start={opacity:hn,transform:`scale(${Wn})`},X._x_transition.enter.end={opacity:1,transform:"scale(1)"}),ut&&(X._x_transition.leave.during={transformOrigin:$r,transitionDelay:`${wa}s`,transitionProperty:wr,transitionDuration:`${Sa}s`,transitionTimingFunction:Ln},X._x_transition.leave.start={opacity:1,transform:"scale(1)"},X._x_transition.leave.end={opacity:hn,transform:`scale(${Wn})`})}function Ht(X,se,Ae={}){X._x_transition||(X._x_transition={enter:{during:Ae,start:Ae,end:Ae},leave:{during:Ae,start:Ae,end:Ae},in(Ve=()=>{},nt=()=>{}){oi(X,se,{during:this.enter.during,start:this.enter.start,end:this.enter.end},Ve,nt)},out(Ve=()=>{},nt=()=>{}){oi(X,se,{during:this.leave.during,start:this.leave.start,end:this.leave.end},Ve,nt)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(X,se,Ae,Ve){const nt=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let ut=()=>nt(Ae);if(se){X._x_transition&&(X._x_transition.enter||X._x_transition.leave)?X._x_transition.enter&&(Object.entries(X._x_transition.enter.during).length||Object.entries(X._x_transition.enter.start).length||Object.entries(X._x_transition.enter.end).length)?X._x_transition.in(Ae):ut():X._x_transition?X._x_transition.in(Ae):ut();return}X._x_hidePromise=X._x_transition?new Promise((bt,Xt)=>{X._x_transition.out(()=>{},()=>bt(Ve)),X._x_transitioning&&X._x_transitioning.beforeCancel(()=>Xt({isFromCancelledTransition:!0}))}):Promise.resolve(Ve),queueMicrotask(()=>{let bt=Pt(X);bt?(bt._x_hideChildren||(bt._x_hideChildren=[]),bt._x_hideChildren.push(X)):nt(()=>{let Xt=pi=>{let hn=Promise.all([pi._x_hidePromise,...(pi._x_hideChildren||[]).map(Xt)]).then(([Wn])=>Wn?.());return delete pi._x_hidePromise,delete pi._x_hideChildren,hn};Xt(X).catch(pi=>{if(!pi.isFromCancelledTransition)throw pi})})})};function Pt(X){let se=X.parentNode;if(se)return se._x_hidePromise?se:Pt(se)}function oi(X,se,{during:Ae,start:Ve,end:nt}={},ut=()=>{},bt=()=>{}){if(X._x_transitioning&&X._x_transitioning.cancel(),Object.keys(Ae).length===0&&Object.keys(Ve).length===0&&Object.keys(nt).length===0){ut(),bt();return}let Xt,pi,hn;Hi(X,{start(){Xt=se(X,Ve)},during(){pi=se(X,Ae)},before:ut,end(){Xt(),hn=se(X,nt)},after:bt,cleanup(){pi(),hn()}})}function Hi(X,se){let Ae,Ve,nt,ut=Ke(()=>{Fi(()=>{Ae=!0,Ve||se.before(),nt||(se.end(),ta()),se.after(),X.isConnected&&se.cleanup(),delete X._x_transitioning})});X._x_transitioning={beforeCancels:[],beforeCancel(bt){this.beforeCancels.push(bt)},cancel:Ke(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();ut()}),finish:ut},Fi(()=>{se.start(),se.during()}),tr(),requestAnimationFrame(()=>{if(Ae)return;let bt=Number(getComputedStyle(X).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,Xt=Number(getComputedStyle(X).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;bt===0&&(bt=Number(getComputedStyle(X).animationDuration.replace("s",""))*1e3),Fi(()=>{se.before()}),Ve=!0,requestAnimationFrame(()=>{Ae||(Fi(()=>{se.end()}),ta(),setTimeout(X._x_transitioning.finish,bt+Xt),nt=!0)})})}function cn(X,se,Ae){if(X.indexOf(se)===-1)return Ae;const Ve=X[X.indexOf(se)+1];if(!Ve||se==="scale"&&isNaN(Ve))return Ae;if(se==="duration"||se==="delay"){let nt=Ve.match(/([0-9]+)ms/);if(nt)return nt[1]}return se==="origin"&&["top","right","left","center","bottom"].includes(X[X.indexOf(se)+2])?[Ve,X[X.indexOf(se)+2]].join(" "):Ve}var Pn=!1;function na(X,se=()=>{}){return(...Ae)=>Pn?se(...Ae):X(...Ae)}function fa(X){return(...se)=>Pn&&X(...se)}var aa=[];function zn(X){aa.push(X)}function Va(X,se){aa.forEach(Ae=>Ae(X,se)),Pn=!0,ia(()=>{xr(se,(Ae,Ve)=>{Ve(Ae,()=>{})})}),Pn=!1}var Hn=!1;function an(X,se){se._x_dataStack||(se._x_dataStack=X._x_dataStack),Pn=!0,Hn=!0,ia(()=>{oa(se)}),Pn=!1,Hn=!1}function oa(X){let se=!1;xr(X,(Ve,nt)=>{ha(Ve,(ut,bt)=>{if(se&&yl(ut))return bt();se=!0,nt(ut,bt)})})}function ia(X){let se=Le;Nt((Ae,Ve)=>{let nt=se(Ae);return ht(nt),()=>{}}),X(),Nt(se)}function br(X,se,Ae,Ve=[]){switch(X._x_bindings||(X._x_bindings=We({})),X._x_bindings[se]=Ae,se=Ve.includes("camel")?ir(se):se,se){case"value":va(X,Ae);break;case"style":Wt(X,Ae);break;case"class":Ha(X,Ae);break;case"selected":case"checked":En(X,se,Ae);break;default:Jn(X,se,Ae);break}}function va(X,se){if(lu(X))X.attributes.value===void 0&&(X.value=se),window.fromModel&&(typeof se=="boolean"?X.checked=ba(X.value)===se:X.checked=Cs(X.value,se));else if(jn(X))Number.isInteger(se)?X.value=se:!Array.isArray(se)&&typeof se!="boolean"&&![null,void 0].includes(se)?X.value=String(se):Array.isArray(se)?X.checked=se.some(Ae=>Cs(Ae,X.value)):X.checked=!!se;else if(X.tagName==="SELECT")Fo(X,se);else{if(X.value===se)return;X.value=se===void 0?"":se}}function Ha(X,se){X._x_undoAddedClasses&&X._x_undoAddedClasses(),X._x_undoAddedClasses=ea(X,se)}function Wt(X,se){X._x_undoAddedStyles&&X._x_undoAddedStyles(),X._x_undoAddedStyles=Gn(X,se)}function En(X,se,Ae){Jn(X,se,Ae),lo(X,se,Ae)}function Jn(X,se,Ae){[null,void 0,!1].includes(Ae)&&Wa(se)?X.removeAttribute(se):(ko(se)&&(Ae=se),Aa(X,se,Ae))}function Aa(X,se,Ae){X.getAttribute(se)!=Ae&&X.setAttribute(se,Ae)}function lo(X,se,Ae){X[se]!==Ae&&(X[se]=Ae)}function Fo(X,se){const Ae=[].concat(se).map(Ve=>Ve+"");Array.from(X.options).forEach(Ve=>{Ve.selected=Ae.includes(Ve.value)})}function ir(X){return X.toLowerCase().replace(/-(\w)/g,(se,Ae)=>Ae.toUpperCase())}function Cs(X,se){return X==se}function ba(X){return[1,"1","true","on","yes",!0].includes(X)?!0:[0,"0","false","off","no",!1].includes(X)?!1:X?!!X:null}var Ka=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function ko(X){return Ka.has(X)}function Wa(X){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(X)}function nr(X,se,Ae){return X._x_bindings&&X._x_bindings[se]!==void 0?X._x_bindings[se]:Ta(X,se,Ae)}function co(X,se,Ae,Ve=!0){if(X._x_bindings&&X._x_bindings[se]!==void 0)return X._x_bindings[se];if(X._x_inlineBindings&&X._x_inlineBindings[se]!==void 0){let nt=X._x_inlineBindings[se];return nt.extract=Ve,_n(()=>pn(X,nt.expression))}return Ta(X,se,Ae)}function Ta(X,se,Ae){let Ve=X.getAttribute(se);return Ve===null?typeof Ae=="function"?Ae():Ae:Ve===""?!0:ko(se)?!![se,"true"].includes(Ve):Ve}function jn(X){return X.type==="checkbox"||X.localName==="ui-checkbox"||X.localName==="ui-switch"}function lu(X){return X.type==="radio"||X.localName==="ui-radio"}function da(X,se){let Ae;return function(){const Ve=this,nt=arguments,ut=function(){Ae=null,X.apply(Ve,nt)};clearTimeout(Ae),Ae=setTimeout(ut,se)}}function Ur(X,se){let Ae;return function(){let Ve=this,nt=arguments;Ae||(X.apply(Ve,nt),Ae=!0,setTimeout(()=>Ae=!1,se))}}function zr({get:X,set:se},{get:Ae,set:Ve}){let nt=!0,ut,bt=Le(()=>{let Xt=X(),pi=Ae();if(nt)Ve(Fs(Xt)),nt=!1;else{let hn=JSON.stringify(Xt),Wn=JSON.stringify(pi);hn!==ut?Ve(Fs(Xt)):hn!==Wn&&se(Fs(pi))}ut=JSON.stringify(X()),JSON.stringify(Ae())});return()=>{ht(bt)}}function Fs(X){return typeof X=="object"?JSON.parse(JSON.stringify(X)):X}function rr(X){(Array.isArray(X)?X:[X]).forEach(Ae=>Ae(No))}var As={},_l=!1;function Ir(X,se){if(_l||(As=We(As),_l=!0),se===void 0)return As[X];As[X]=se,St(As[X]),typeof se=="object"&&se!==null&&se.hasOwnProperty("init")&&typeof se.init=="function"&&As[X].init()}function Yu(){return As}var xl={};function Fc(X,se){let Ae=typeof se!="function"?()=>se:se;return X instanceof Element?cu(X,Ae()):(xl[X]=Ae,()=>{})}function uo(X){return Object.entries(xl).forEach(([se,Ae])=>{Object.defineProperty(X,se,{get(){return(...Ve)=>Ae(...Ve)}})}),X}function cu(X,se,Ae){let Ve=[];for(;Ve.length;)Ve.pop()();let nt=Object.entries(se).map(([bt,Xt])=>({name:bt,value:Xt})),ut=Yi(nt);return nt=nt.map(bt=>ut.find(Xt=>Xt.name===bt.name)?{name:`x-bind:${bt.name}`,value:`"${bt.value}"`}:bt),Vi(X,nt,Ae).map(bt=>{Ve.push(bt.runCleanups),bt()}),()=>{for(;Ve.length;)Ve.pop()()}}var Nc={};function Bc(X,se){Nc[X]=se}function gc(X,se){return Object.entries(Nc).forEach(([Ae,Ve])=>{Object.defineProperty(X,Ae,{get(){return(...nt)=>Ve.bind(se)(...nt)},enumerable:!1})}),X}var Co={get reactive(){return We},get release(){return ht},get effect(){return Le},get raw(){return $e},get transaction(){return Lt},version:"3.15.8",flushAndStopDeferringMutations:Ti,dontAutoEvaluateFunctions:_n,disableEffectScheduling:Dt,startObservingMutations:xn,stopObservingMutations:Ye,setReactivityEngine:qe,onAttributeRemoved:si,onAttributesAdded:Li,closestDataStack:be,skipDuringClone:na,onlyDuringClone:fa,addRootSelector:In,addInitSelector:ur,setErrorHandler:Mt,interceptClone:zn,addScopeToNode:xe,deferMutations:wi,mapAttributes:Zn,evaluateLater:Bi,interceptInit:Fn,initInterceptors:St,injectMagics:It,setEvaluator:mn,setRawEvaluator:Xi,mergeProxies:Ce,extractProp:co,findClosest:Mr,onElRemoved:Zi,closestRoot:Er,destroyTree:vr,interceptor:yt,transition:oi,setStyles:Gn,mutateDom:Fi,directive:$i,entangle:zr,throttle:Ur,debounce:da,evaluate:pn,evaluateRaw:ii,initTree:xr,nextTick:Kn,prefixed:ei,prefix:ki,plugin:rr,magic:Et,store:Ir,start:So,clone:an,cloneNode:Va,bound:nr,$data:dt,watch:xi,walk:ha,data:Bc,bind:Fc},No=Co,Ts=x(F());Et("nextTick",()=>Kn),Et("dispatch",X=>ls.bind(ls,X)),Et("watch",(X,{evaluateLater:se,cleanup:Ae})=>(Ve,nt)=>{let ut=se(Ve),Xt=xi(()=>{let pi;return ut(hn=>pi=hn),pi},nt);Ae(Xt)}),Et("store",Yu),Et("data",X=>dt(X)),Et("root",X=>Er(X)),Et("refs",X=>(X._x_refs_proxy||(X._x_refs_proxy=Ce(uu(X))),X._x_refs_proxy));function uu(X){let se=[];return Mr(X,Ae=>{Ae._x_refs&&se.push(Ae._x_refs)}),se}var Xs={};function hu(X){return Xs[X]||(Xs[X]=0),++Xs[X]}function du(X,se){return Mr(X,Ae=>{if(Ae._x_ids&&Ae._x_ids[se])return!0})}function jh(X,se){X._x_ids||(X._x_ids={}),X._x_ids[se]||(X._x_ids[se]=hu(se))}Et("id",(X,{cleanup:se})=>(Ae,Ve=null)=>{let nt=`${Ae}${Ve?`-${Ve}`:""}`;return qu(X,nt,se,()=>{let ut=du(X,Ae),bt=ut?ut._x_ids[Ae]:hu(Ae);return Ve?`${Ae}-${bt}-${Ve}`:`${Ae}-${bt}`})}),zn((X,se)=>{X._x_id&&(se._x_id=X._x_id)});function qu(X,se,Ae,Ve){if(X._x_id||(X._x_id={}),X._x_id[se])return X._x_id[se];let nt=Ve();return X._x_id[se]=nt,Ae(()=>{delete X._x_id[se]}),nt}Et("el",X=>X),gs("Focus","focus","focus"),gs("Persist","persist","persist");function gs(X,se,Ae){Et(se,Ve=>Ga(`You can't use [$${se}] without first installing the "${X}" plugin here: https://alpinejs.dev/plugins/${Ae}`,Ve))}$i("modelable",(X,{expression:se},{effect:Ae,evaluateLater:Ve,cleanup:nt})=>{let ut=Ve(se),bt=()=>{let Wn;return ut(wa=>Wn=wa),Wn},Xt=Ve(`${se} = __placeholder`),pi=Wn=>Xt(()=>{},{scope:{__placeholder:Wn}}),hn=bt();pi(hn),queueMicrotask(()=>{if(!X._x_model)return;X._x_removeModelListeners.default();let Wn=X._x_model.get,wa=X._x_model.set,$r=zr({get(){return Wn()},set(wr){wa(wr)}},{get(){return bt()},set(wr){pi(wr)}});nt($r)})}),$i("teleport",(X,{modifiers:se,expression:Ae},{cleanup:Ve})=>{X.tagName.toLowerCase()!=="template"&&Ga("x-teleport can only be used on a <template> tag",X);let nt=mc(Ae),ut=X.content.cloneNode(!0).firstElementChild;X._x_teleport=ut,ut._x_teleportBack=X,X.setAttribute("data-teleport-template",!0),ut.setAttribute("data-teleport-target",!0),X._x_forwardEvents&&X._x_forwardEvents.forEach(Xt=>{ut.addEventListener(Xt,pi=>{pi.stopPropagation(),X.dispatchEvent(new pi.constructor(pi.type,pi))})}),xe(ut,{},X);let bt=(Xt,pi,hn)=>{hn.includes("prepend")?pi.parentNode.insertBefore(Xt,pi):hn.includes("append")?pi.parentNode.insertBefore(Xt,pi.nextSibling):pi.appendChild(Xt)};Fi(()=>{bt(ut,nt,se),na(()=>{xr(ut)})()}),X._x_teleportPutBack=()=>{let Xt=mc(Ae);Fi(()=>{bt(X._x_teleport,Xt,se)})},Ve(()=>Fi(()=>{ut.remove(),vr(ut)}))});var Vh=document.createElement("div");function mc(X){let se=na(()=>document.querySelector(X),()=>Vh)();return se||Ga(`Cannot find x-teleport element for selector: "${X}"`),se}var Ao=()=>{};Ao.inline=(X,{modifiers:se},{cleanup:Ae})=>{se.includes("self")?X._x_ignoreSelf=!0:X._x_ignore=!0,Ae(()=>{se.includes("self")?delete X._x_ignoreSelf:delete X._x_ignore})},$i("ignore",Ao),$i("effect",na((X,{expression:se},{effect:Ae})=>{Ae(Bi(X,se))}));function pa(X,se,Ae,Ve){let nt=X,ut=pi=>Ve(pi),bt={},Xt=(pi,hn)=>Wn=>hn(pi,Wn);if(Ae.includes("dot")&&(se=Vl(se)),Ae.includes("camel")&&(se=Se(se)),Ae.includes("passive")&&(bt.passive=!0),Ae.includes("capture")&&(bt.capture=!0),Ae.includes("window")&&(nt=window),Ae.includes("document")&&(nt=document),Ae.includes("debounce")){let pi=Ae[Ae.indexOf("debounce")+1]||"invalid-wait",hn=g(pi.split("ms")[0])?Number(pi.split("ms")[0]):250;ut=da(ut,hn)}if(Ae.includes("throttle")){let pi=Ae[Ae.indexOf("throttle")+1]||"invalid-wait",hn=g(pi.split("ms")[0])?Number(pi.split("ms")[0]):250;ut=Ur(ut,hn)}return Ae.includes("prevent")&&(ut=Xt(ut,(pi,hn)=>{hn.preventDefault(),pi(hn)})),Ae.includes("stop")&&(ut=Xt(ut,(pi,hn)=>{hn.stopPropagation(),pi(hn)})),Ae.includes("once")&&(ut=Xt(ut,(pi,hn)=>{pi(hn),nt.removeEventListener(se,ut,bt)})),(Ae.includes("away")||Ae.includes("outside"))&&(nt=document,ut=Xt(ut,(pi,hn)=>{X.contains(hn.target)||hn.target.isConnected!==!1&&(X.offsetWidth<1&&X.offsetHeight<1||X._x_isShown!==!1&&pi(hn))})),Ae.includes("self")&&(ut=Xt(ut,(pi,hn)=>{hn.target===X&&pi(hn)})),se==="submit"&&(ut=Xt(ut,(pi,hn)=>{hn.target._x_pendingModelUpdates&&hn.target._x_pendingModelUpdates.forEach(Wn=>Wn()),pi(hn)})),(w(se)||T(se))&&(ut=Xt(ut,(pi,hn)=>{M(hn,Ae)||pi(hn)})),nt.addEventListener(se,ut,bt),()=>{nt.removeEventListener(se,ut,bt)}}function Vl(X){return X.replace(/-/g,".")}function Se(X){return X.toLowerCase().replace(/-(\w)/g,(se,Ae)=>Ae.toUpperCase())}function g(X){return!Array.isArray(X)&&!isNaN(X)}function _(X){return[" ","_"].includes(X)?X:X.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function w(X){return["keydown","keyup"].includes(X)}function T(X){return["contextmenu","click","mouse"].some(se=>X.includes(se))}function M(X,se){let Ae=se.filter(ut=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll","blur","change","lazy"].includes(ut));if(Ae.includes("debounce")){let ut=Ae.indexOf("debounce");Ae.splice(ut,g((Ae[ut+1]||"invalid-wait").split("ms")[0])?2:1)}if(Ae.includes("throttle")){let ut=Ae.indexOf("throttle");Ae.splice(ut,g((Ae[ut+1]||"invalid-wait").split("ms")[0])?2:1)}if(Ae.length===0||Ae.length===1&&O(X.key).includes(Ae[0]))return!1;const nt=["ctrl","shift","alt","meta","cmd","super"].filter(ut=>Ae.includes(ut));return Ae=Ae.filter(ut=>!nt.includes(ut)),!(nt.length>0&&nt.filter(bt=>((bt==="cmd"||bt==="super")&&(bt="meta"),X[`${bt}Key`])).length===nt.length&&(T(X.type)||O(X.key).includes(Ae[0])))}function O(X){if(!X)return[];X=_(X);let se={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return se[X]=X,Object.keys(se).map(Ae=>{if(se[Ae]===X)return Ae}).filter(Ae=>Ae)}$i("model",(X,{modifiers:se,expression:Ae},{effect:Ve,cleanup:nt})=>{let ut=X;se.includes("parent")&&(ut=X.parentNode);let bt=Bi(ut,Ae),Xt;typeof Ae=="string"?Xt=Bi(ut,`${Ae} = __placeholder`):typeof Ae=="function"&&typeof Ae()=="string"?Xt=Bi(ut,`${Ae()} = __placeholder`):Xt=()=>{};let pi=()=>{let Sa;return bt(Ln=>Sa=Ln),ke(Sa)?Sa.get():Sa},hn=Sa=>{let Ln;bt(ra=>Ln=ra),ke(Ln)?Ln.set(Sa):Xt(()=>{},{scope:{__placeholder:Sa}})};typeof Ae=="string"&&X.type==="radio"&&Fi(()=>{X.hasAttribute("name")||X.setAttribute("name",Ae)});let Wn=se.includes("change")||se.includes("lazy"),wa=se.includes("blur"),$r=se.includes("enter"),wr=Wn||wa||$r,Jr;if(Pn)Jr=()=>{};else if(wr){let Sa=[],Ln=ra=>hn(V(X,se,ra,pi()));if(Wn&&Sa.push(pa(X,"change",se,Ln)),wa&&(Sa.push(pa(X,"blur",se,Ln)),X.form)){let ra=()=>Ln({target:X});X.form._x_pendingModelUpdates||(X.form._x_pendingModelUpdates=[]),X.form._x_pendingModelUpdates.push(ra),nt(()=>X.form._x_pendingModelUpdates.splice(X.form._x_pendingModelUpdates.indexOf(ra),1))}$r&&Sa.push(pa(X,"keydown",se,ra=>{ra.key==="Enter"&&Ln(ra)})),Jr=()=>Sa.forEach(ra=>ra())}else{let Sa=X.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(X.type)?"change":"input";Jr=pa(X,Sa,se,Ln=>{hn(V(X,se,Ln,pi()))})}if(se.includes("fill")&&([void 0,null,""].includes(pi())||jn(X)&&Array.isArray(pi())||X.tagName.toLowerCase()==="select"&&X.multiple)&&hn(V(X,se,{target:X},pi())),X._x_removeModelListeners||(X._x_removeModelListeners={}),X._x_removeModelListeners.default=Jr,nt(()=>X._x_removeModelListeners.default()),X.form){let Sa=pa(X.form,"reset",[],Ln=>{Kn(()=>X._x_model&&X._x_model.set(V(X,se,{target:X},pi())))});nt(()=>Sa())}X._x_model={get(){return pi()},set(Sa){hn(Sa)}},X._x_forceModelUpdate=Sa=>{Sa===void 0&&typeof Ae=="string"&&Ae.match(/\./)&&(Sa=""),window.fromModel=!0,Fi(()=>br(X,"value",Sa)),delete window.fromModel},Ve(()=>{let Sa=pi();se.includes("unintrusive")&&document.activeElement.isSameNode(X)||X._x_forceModelUpdate(Sa)})});function V(X,se,Ae,Ve){return Fi(()=>{if(Ae instanceof CustomEvent&&Ae.detail!==void 0)return Ae.detail!==null&&Ae.detail!==void 0?Ae.detail:Ae.target.value;if(jn(X))if(Array.isArray(Ve)){let nt=null;return se.includes("number")?nt=W(Ae.target.value):se.includes("boolean")?nt=ba(Ae.target.value):nt=Ae.target.value,Ae.target.checked?Ve.includes(nt)?Ve:Ve.concat([nt]):Ve.filter(ut=>!K(ut,nt))}else return Ae.target.checked;else{if(X.tagName.toLowerCase()==="select"&&X.multiple)return se.includes("number")?Array.from(Ae.target.selectedOptions).map(nt=>{let ut=nt.value||nt.text;return W(ut)}):se.includes("boolean")?Array.from(Ae.target.selectedOptions).map(nt=>{let ut=nt.value||nt.text;return ba(ut)}):Array.from(Ae.target.selectedOptions).map(nt=>nt.value||nt.text);{let nt;return lu(X)?Ae.target.checked?nt=Ae.target.value:nt=Ve:nt=Ae.target.value,se.includes("number")?W(nt):se.includes("boolean")?ba(nt):se.includes("trim")?nt.trim():nt}}})}function W(X){let se=X?parseFloat(X):null;return de(se)?se:X}function K(X,se){return X==se}function de(X){return!Array.isArray(X)&&!isNaN(X)}function ke(X){return X!==null&&typeof X=="object"&&typeof X.get=="function"&&typeof X.set=="function"}$i("cloak",X=>queueMicrotask(()=>Fi(()=>X.removeAttribute(ei("cloak"))))),ur(()=>`[${ei("init")}]`),$i("init",na((X,{expression:se},{evaluate:Ae})=>typeof se=="string"?!!se.trim()&&Ae(se,{},!1):Ae(se,{},!1))),$i("text",(X,{expression:se},{effect:Ae,evaluateLater:Ve})=>{let nt=Ve(se);Ae(()=>{nt(ut=>{Fi(()=>{X.textContent=ut})})})}),$i("html",(X,{expression:se},{effect:Ae,evaluateLater:Ve})=>{let nt=Ve(se);Ae(()=>{nt(ut=>{Fi(()=>{X.innerHTML=ut,X._x_ignoreSelf=!0,xr(X),delete X._x_ignoreSelf})})})}),Zn(nn(":",Za(ei("bind:"))));var Pe=(X,{value:se,modifiers:Ae,expression:Ve,original:nt},{effect:ut,cleanup:bt})=>{if(!se){let pi={};uo(pi),Bi(X,Ve)(Wn=>{cu(X,Wn,nt)},{scope:pi});return}if(se==="key")return Ze(X,Ve);if(X._x_inlineBindings&&X._x_inlineBindings[se]&&X._x_inlineBindings[se].extract)return;let Xt=Bi(X,Ve);ut(()=>Xt(pi=>{pi===void 0&&typeof Ve=="string"&&Ve.match(/\./)&&(pi=""),Fi(()=>br(X,se,pi,Ae))})),bt(()=>{X._x_undoAddedClasses&&X._x_undoAddedClasses(),X._x_undoAddedStyles&&X._x_undoAddedStyles()})};Pe.inline=(X,{value:se,modifiers:Ae,expression:Ve})=>{se&&(X._x_inlineBindings||(X._x_inlineBindings={}),X._x_inlineBindings[se]={expression:Ve,extract:!1})},$i("bind",Pe);function Ze(X,se){X._x_keyExpression=se}In(()=>`[${ei("data")}]`),$i("data",(X,{expression:se},{cleanup:Ae})=>{if(mt(X))return;se=se===""?"{}":se;let Ve={};It(Ve,X);let nt={};gc(nt,Ve);let ut=pn(X,se,{scope:nt});(ut===void 0||ut===!0)&&(ut={}),It(ut,X);let bt=We(ut);St(bt);let Xt=xe(X,bt);bt.init&&pn(X,bt.init),Ae(()=>{bt.destroy&&pn(X,bt.destroy),Xt()})}),zn((X,se)=>{X._x_dataStack&&(se._x_dataStack=X._x_dataStack,se.setAttribute("data-has-alpine-state",!0))});function mt(X){return Pn?Hn?!0:X.hasAttribute("data-has-alpine-state"):!1}$i("show",(X,{modifiers:se,expression:Ae},{effect:Ve})=>{let nt=Bi(X,Ae);X._x_doHide||(X._x_doHide=()=>{Fi(()=>{X.style.setProperty("display","none",se.includes("important")?"important":void 0)})}),X._x_doShow||(X._x_doShow=()=>{Fi(()=>{X.style.length===1&&X.style.display==="none"?X.removeAttribute("style"):X.style.removeProperty("display")})});let ut=()=>{X._x_doHide(),X._x_isShown=!1},bt=()=>{X._x_doShow(),X._x_isShown=!0},Xt=()=>setTimeout(bt),pi=Ke(wa=>wa?bt():ut(),wa=>{typeof X._x_toggleAndCascadeWithTransitions=="function"?X._x_toggleAndCascadeWithTransitions(X,wa,bt,ut):wa?Xt():ut()}),hn,Wn=!0;Ve(()=>nt(wa=>{!Wn&&wa===hn||(se.includes("immediate")&&(wa?Xt():ut()),pi(wa),hn=wa,Wn=!1)}))}),$i("for",(X,{expression:se},{effect:Ae,cleanup:Ve})=>{let nt=zt(se),ut=Bi(X,nt.items),bt=Bi(X,X._x_keyExpression||"index");X._x_prevKeys=[],X._x_lookup={},Ae(()=>vt(X,nt,ut,bt)),Ve(()=>{Object.values(X._x_lookup).forEach(Xt=>Fi(()=>{vr(Xt),Xt.remove()})),delete X._x_prevKeys,delete X._x_lookup})});function vt(X,se,Ae,Ve){let nt=bt=>typeof bt=="object"&&!Array.isArray(bt),ut=X;Ae(bt=>{Ri(bt)&&bt>=0&&(bt=Array.from(Array(bt).keys(),Ln=>Ln+1)),bt===void 0&&(bt=[]);let Xt=X._x_lookup,pi=X._x_prevKeys,hn=[],Wn=[];if(nt(bt))bt=Object.entries(bt).map(([Ln,ra])=>{let ua=Kt(se,ra,Ln,bt);Ve(Na=>{Wn.includes(Na)&&Ga("Duplicate key on x-for",X),Wn.push(Na)},{scope:{index:Ln,...ua}}),hn.push(ua)});else for(let Ln=0;Ln<bt.length;Ln++){let ra=Kt(se,bt[Ln],Ln,bt);Ve(ua=>{Wn.includes(ua)&&Ga("Duplicate key on x-for",X),Wn.push(ua)},{scope:{index:Ln,...ra}}),hn.push(ra)}let wa=[],$r=[],wr=[],Jr=[];for(let Ln=0;Ln<pi.length;Ln++){let ra=pi[Ln];Wn.indexOf(ra)===-1&&wr.push(ra)}pi=pi.filter(Ln=>!wr.includes(Ln));let Sa="template";for(let Ln=0;Ln<Wn.length;Ln++){let ra=Wn[Ln],ua=pi.indexOf(ra);if(ua===-1)pi.splice(Ln,0,ra),wa.push([Sa,Ln]);else if(ua!==Ln){let Na=pi.splice(Ln,1)[0],ms=pi.splice(ua-1,1)[0];pi.splice(Ln,0,ms),pi.splice(ua,0,Na),$r.push([Na,ms])}else Jr.push(ra);Sa=ra}for(let Ln=0;Ln<wr.length;Ln++){let ra=wr[Ln];ra in Xt&&(Fi(()=>{vr(Xt[ra]),Xt[ra].remove()}),delete Xt[ra])}for(let Ln=0;Ln<$r.length;Ln++){let[ra,ua]=$r[Ln],Na=Xt[ra],ms=Xt[ua],Qn=document.createElement("div");Fi(()=>{ms||Ga('x-for ":key" is undefined or invalid',ut,ua,Xt),ms.after(Qn),Na.after(ms),ms._x_currentIfEl&&ms.after(ms._x_currentIfEl),Qn.before(Na),Na._x_currentIfEl&&Na.after(Na._x_currentIfEl),Qn.remove()}),ms._x_refreshXForScope(hn[Wn.indexOf(ua)])}for(let Ln=0;Ln<wa.length;Ln++){let[ra,ua]=wa[Ln],Na=ra==="template"?ut:Xt[ra];Na._x_currentIfEl&&(Na=Na._x_currentIfEl);let ms=hn[ua],Qn=Wn[ua],To=document.importNode(ut.content,!0).firstElementChild,fu=We(ms);xe(To,fu,ut),To._x_refreshXForScope=pu=>{Object.entries(pu).forEach(([Hl,gu])=>{fu[Hl]=gu})},Fi(()=>{Na.after(To),na(()=>xr(To))()}),typeof Qn=="object"&&Ga("x-for key cannot be an object, it must be a string or an integer",ut),Xt[Qn]=To}for(let Ln=0;Ln<Jr.length;Ln++)Xt[Jr[Ln]]._x_refreshXForScope(hn[Wn.indexOf(Jr[Ln])]);ut._x_prevKeys=Wn})}function zt(X){let se=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Ae=/^\s*\(|\)\s*$/g,Ve=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,nt=X.match(Ve);if(!nt)return;let ut={};ut.items=nt[2].trim();let bt=nt[1].replace(Ae,"").trim(),Xt=bt.match(se);return Xt?(ut.item=bt.replace(se,"").trim(),ut.index=Xt[1].trim(),Xt[2]&&(ut.collection=Xt[2].trim())):ut.item=bt,ut}function Kt(X,se,Ae,Ve){let nt={};return/^\[.*\]$/.test(X.item)&&Array.isArray(se)?X.item.replace("[","").replace("]","").split(",").map(bt=>bt.trim()).forEach((bt,Xt)=>{nt[bt]=se[Xt]}):/^\{.*\}$/.test(X.item)&&!Array.isArray(se)&&typeof se=="object"?X.item.replace("{","").replace("}","").split(",").map(bt=>bt.trim()).forEach(bt=>{nt[bt]=se[bt]}):nt[X.item]=se,X.index&&(nt[X.index]=Ae),X.collection&&(nt[X.collection]=Ve),nt}function Ri(X){return!Array.isArray(X)&&!isNaN(X)}function zi(){}zi.inline=(X,{expression:se},{cleanup:Ae})=>{let Ve=Er(X);Ve._x_refs||(Ve._x_refs={}),Ve._x_refs[se]=X,Ae(()=>delete Ve._x_refs[se])},$i("ref",zi),$i("if",(X,{expression:se},{effect:Ae,cleanup:Ve})=>{X.tagName.toLowerCase()!=="template"&&Ga("x-if can only be used on a <template> tag",X);let nt=Bi(X,se),ut=()=>{if(X._x_currentIfEl)return X._x_currentIfEl;let Xt=X.content.cloneNode(!0).firstElementChild;return xe(Xt,{},X),Fi(()=>{X.after(Xt),na(()=>xr(Xt))()}),X._x_currentIfEl=Xt,X._x_undoIf=()=>{Fi(()=>{vr(Xt),Xt.remove()}),delete X._x_currentIfEl},Xt},bt=()=>{X._x_undoIf&&(X._x_undoIf(),delete X._x_undoIf)};Ae(()=>nt(Xt=>{Xt?ut():bt()})),Ve(()=>X._x_undoIf&&X._x_undoIf())}),$i("id",(X,{expression:se},{evaluate:Ae})=>{Ae(se).forEach(nt=>jh(X,nt))}),zn((X,se)=>{X._x_ids&&(se._x_ids=X._x_ids)}),Zn(nn("@",Za(ei("on:")))),$i("on",na((X,{value:se,modifiers:Ae,expression:Ve},{cleanup:nt})=>{let ut=Ve?Bi(X,Ve):()=>{};X.tagName.toLowerCase()==="template"&&(X._x_forwardEvents||(X._x_forwardEvents=[]),X._x_forwardEvents.includes(se)||X._x_forwardEvents.push(se));let bt=pa(X,se,Ae,Xt=>{ut(()=>{},{scope:{$event:Xt},params:[Xt]})});nt(()=>bt())})),Ci("Collapse","collapse","collapse"),Ci("Intersect","intersect","intersect"),Ci("Focus","trap","focus"),Ci("Mask","mask","mask");function Ci(X,se,Ae){$i(se,Ve=>Ga(`You can't use [x-${se}] without first installing the "${X}" plugin here: https://alpinejs.dev/plugins/${Ae}`,Ve))}No.setEvaluator(sn),No.setRawEvaluator(gt),No.setReactivityEngine({reactive:Ts.reactive,effect:Ts.effect,release:Ts.stop,raw:Ts.toRaw});var _a=No,un=_a}}),t6=Gu({"node_modules/@alpinejs/collapse/dist/module.cjs.js"(a,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(E,z)=>{for(var D in z)t(E,D,{get:z[D],enumerable:!0})},s=(E,z,D,F)=>{if(z&&typeof z=="object"||typeof z=="function")for(let U of n(z))!r.call(E,U)&&U!==D&&t(E,U,{get:()=>z[U],enumerable:!(F=i(z,U))||F.enumerable});return E},h=E=>s(t({},"__esModule",{value:!0}),E),f={};o(f,{collapse:()=>y,default:()=>S}),e.exports=h(f);function y(E){E.directive("collapse",z),z.inline=(D,{modifiers:F})=>{F.includes("min")&&(D._x_doShow=()=>{},D._x_doHide=()=>{})};function z(D,{modifiers:F}){let U=x(F,"duration",250)/1e3,G=x(F,"min",0),Z=!F.includes("min");D._x_isShown||(D.style.height=`${G}px`),!D._x_isShown&&Z&&(D.hidden=!0),D._x_isShown||(D.style.overflow="hidden");let ee=(le,J)=>{let re=E.setStyles(le,J);return J.height?()=>{}:re},ie={transitionProperty:"height",transitionDuration:`${U}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};D._x_transition={in(le=()=>{},J=()=>{}){Z&&(D.hidden=!1),Z&&(D.style.display=null);let re=D.getBoundingClientRect().height;D.style.height="auto";let ae=D.getBoundingClientRect().height;re===ae&&(re=G),E.transition(D,E.setStyles,{during:ie,start:{height:re+"px"},end:{height:ae+"px"}},()=>D._x_isShown=!0,()=>{Math.abs(D.getBoundingClientRect().height-ae)<1&&(D.style.overflow=null)})},out(le=()=>{},J=()=>{}){let re=D.getBoundingClientRect().height;E.transition(D,ee,{during:ie,start:{height:re+"px"},end:{height:G+"px"}},()=>D.style.overflow="hidden",()=>{D._x_isShown=!1,D.style.height==`${G}px`&&Z&&(D.style.display="none",D.hidden=!0)})}}}}function x(E,z,D){if(E.indexOf(z)===-1)return D;const F=E[E.indexOf(z)+1];if(!F)return D;if(z==="duration"){let U=F.match(/([0-9]+)ms/);if(U)return U[1]}if(z==="min"){let U=F.match(/([0-9]+)px/);if(U)return U[1]}return F}var S=y}}),i6=Gu({"node_modules/@alpinejs/focus/dist/module.cjs.js"(a,e){var t=Object.create,i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,h=(J,re)=>function(){return re||(0,J[r(J)[0]])((re={exports:{}}).exports,re),re.exports},f=(J,re)=>{for(var ae in re)i(J,ae,{get:re[ae],enumerable:!0})},y=(J,re,ae,me)=>{if(re&&typeof re=="object"||typeof re=="function")for(let Te of r(re))!s.call(J,Te)&&Te!==ae&&i(J,Te,{get:()=>re[Te],enumerable:!(me=n(re,Te))||me.enumerable});return J},x=(J,re,ae)=>(ae=J!=null?t(o(J)):{},y(!J||!J.__esModule?i(ae,"default",{value:J,enumerable:!0}):ae,J)),S=J=>y(i({},"__esModule",{value:!0}),J),E=h({"node_modules/tabbable/dist/index.js"(J){Object.defineProperty(J,"__esModule",{value:!0});var re=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ae=re.join(","),me=typeof Element>"u",Te=me?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ye=!me&&Element.prototype.getRootNode?function(xn){return xn.getRootNode()}:function(xn){return xn.ownerDocument},Re=function(Ye,qt,li){var Fi=Array.prototype.slice.apply(Ye.querySelectorAll(ae));return qt&&Te.call(Ye,ae)&&Fi.unshift(Ye),Fi=Fi.filter(li),Fi},We=function xn(Ye,qt,li){for(var Fi=[],ci=Array.from(Ye);ci.length;){var Wi=ci.shift();if(Wi.tagName==="SLOT"){var wi=Wi.assignedElements(),Ti=wi.length?wi:Wi.children,Di=xn(Ti,!0,li);li.flatten?Fi.push.apply(Fi,Di):Fi.push({scope:Wi,candidates:Di})}else{var dt=Te.call(Wi,ae);dt&&li.filter(Wi)&&(qt||!Ye.includes(Wi))&&Fi.push(Wi);var xe=Wi.shadowRoot||typeof li.getShadowRoot=="function"&&li.getShadowRoot(Wi),be=!li.shadowRootFilter||li.shadowRootFilter(Wi);if(xe&&be){var Ce=xn(xe===!0?Wi.children:xe.children,!0,li);li.flatten?Fi.push.apply(Fi,Ce):Fi.push({scope:Wi,candidates:Ce})}else ci.unshift.apply(ci,Wi.children)}}return Fi},Le=function(Ye,qt){return Ye.tabIndex<0&&(qt||/^(AUDIO|VIDEO|DETAILS)$/.test(Ye.tagName)||Ye.isContentEditable)&&isNaN(parseInt(Ye.getAttribute("tabindex"),10))?0:Ye.tabIndex},ht=function(Ye,qt){return Ye.tabIndex===qt.tabIndex?Ye.documentOrder-qt.documentOrder:Ye.tabIndex-qt.tabIndex},$e=function(Ye){return Ye.tagName==="INPUT"},pt=function(Ye){return $e(Ye)&&Ye.type==="hidden"},Dt=function(Ye){var qt=Ye.tagName==="DETAILS"&&Array.prototype.slice.apply(Ye.children).some(function(li){return li.tagName==="SUMMARY"});return qt},qe=function(Ye,qt){for(var li=0;li<Ye.length;li++)if(Ye[li].checked&&Ye[li].form===qt)return Ye[li]},Nt=function(Ye){if(!Ye.name)return!0;var qt=Ye.form||ye(Ye),li=function(wi){return qt.querySelectorAll('input[type="radio"][name="'+wi+'"]')},Fi;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")Fi=li(window.CSS.escape(Ye.name));else try{Fi=li(Ye.name)}catch(Wi){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Wi.message),!1}var ci=qe(Fi,Ye.form);return!ci||ci===Ye},ni=function(Ye){return $e(Ye)&&Ye.type==="radio"},xi=function(Ye){return ni(Ye)&&!Nt(Ye)},Lt=function(Ye){var qt=Ye.getBoundingClientRect(),li=qt.width,Fi=qt.height;return li===0&&Fi===0},Tt=function(Ye,qt){var li=qt.displayCheck,Fi=qt.getShadowRoot;if(getComputedStyle(Ye).visibility==="hidden")return!0;var ci=Te.call(Ye,"details>summary:first-of-type"),Wi=ci?Ye.parentElement:Ye;if(Te.call(Wi,"details:not([open]) *"))return!0;var wi=ye(Ye).host,Ti=wi?.ownerDocument.contains(wi)||Ye.ownerDocument.contains(Ye);if(!li||li==="full"){if(typeof Fi=="function"){for(var Di=Ye;Ye;){var dt=Ye.parentElement,xe=ye(Ye);if(dt&&!dt.shadowRoot&&Fi(dt)===!0)return Lt(Ye);Ye.assignedSlot?Ye=Ye.assignedSlot:!dt&&xe!==Ye.ownerDocument?Ye=xe.host:Ye=dt}Ye=Di}if(Ti)return!Ye.getClientRects().length}else if(li==="non-zero-area")return Lt(Ye);return!1},wt=function(Ye){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(Ye.tagName))for(var qt=Ye.parentElement;qt;){if(qt.tagName==="FIELDSET"&&qt.disabled){for(var li=0;li<qt.children.length;li++){var Fi=qt.children.item(li);if(Fi.tagName==="LEGEND")return Te.call(qt,"fieldset[disabled] *")?!0:!Fi.contains(Ye)}return!0}qt=qt.parentElement}return!1},mi=function(Ye,qt){return!(qt.disabled||pt(qt)||Tt(qt,Ye)||Dt(qt)||wt(qt))},bi=function(Ye,qt){return!(xi(qt)||Le(qt)<0||!mi(Ye,qt))},Zi=function(Ye){var qt=parseInt(Ye.getAttribute("tabindex"),10);return!!(isNaN(qt)||qt>=0)},Li=function xn(Ye){var qt=[],li=[];return Ye.forEach(function(Fi,ci){var Wi=!!Fi.scope,wi=Wi?Fi.scope:Fi,Ti=Le(wi,Wi),Di=Wi?xn(Fi.candidates):wi;Ti===0?Wi?qt.push.apply(qt,Di):qt.push(wi):li.push({documentOrder:ci,tabIndex:Ti,item:Fi,isScope:Wi,content:Di})}),li.sort(ht).reduce(function(Fi,ci){return ci.isScope?Fi.push.apply(Fi,ci.content):Fi.push(ci.content),Fi},[]).concat(qt)},si=function(Ye,qt){qt=qt||{};var li;return qt.getShadowRoot?li=We([Ye],qt.includeContainer,{filter:bi.bind(null,qt),flatten:!1,getShadowRoot:qt.getShadowRoot,shadowRootFilter:Zi}):li=Re(Ye,qt.includeContainer,bi.bind(null,qt)),Li(li)},fn=function(Ye,qt){qt=qt||{};var li;return qt.getShadowRoot?li=We([Ye],qt.includeContainer,{filter:mi.bind(null,qt),flatten:!0,getShadowRoot:qt.getShadowRoot}):li=Re(Ye,qt.includeContainer,mi.bind(null,qt)),li},Ii=function(Ye,qt){if(qt=qt||{},!Ye)throw new Error("No node provided");return Te.call(Ye,ae)===!1?!1:bi(qt,Ye)},Qi=re.concat("iframe").join(","),rn=function(Ye,qt){if(qt=qt||{},!Ye)throw new Error("No node provided");return Te.call(Ye,Qi)===!1?!1:mi(qt,Ye)};J.focusable=fn,J.isFocusable=rn,J.isTabbable=Ii,J.tabbable=si}}),z=h({"node_modules/focus-trap/dist/focus-trap.js"(J){Object.defineProperty(J,"__esModule",{value:!0});var re=E();function ae(Nt,ni){var xi=Object.keys(Nt);if(Object.getOwnPropertySymbols){var Lt=Object.getOwnPropertySymbols(Nt);ni&&(Lt=Lt.filter(function(Tt){return Object.getOwnPropertyDescriptor(Nt,Tt).enumerable})),xi.push.apply(xi,Lt)}return xi}function me(Nt){for(var ni=1;ni<arguments.length;ni++){var xi=arguments[ni]!=null?arguments[ni]:{};ni%2?ae(Object(xi),!0).forEach(function(Lt){Te(Nt,Lt,xi[Lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Nt,Object.getOwnPropertyDescriptors(xi)):ae(Object(xi)).forEach(function(Lt){Object.defineProperty(Nt,Lt,Object.getOwnPropertyDescriptor(xi,Lt))})}return Nt}function Te(Nt,ni,xi){return ni in Nt?Object.defineProperty(Nt,ni,{value:xi,enumerable:!0,configurable:!0,writable:!0}):Nt[ni]=xi,Nt}var ye=(function(){var Nt=[];return{activateTrap:function(xi){if(Nt.length>0){var Lt=Nt[Nt.length-1];Lt!==xi&&Lt.pause()}var Tt=Nt.indexOf(xi);Tt===-1||Nt.splice(Tt,1),Nt.push(xi)},deactivateTrap:function(xi){var Lt=Nt.indexOf(xi);Lt!==-1&&Nt.splice(Lt,1),Nt.length>0&&Nt[Nt.length-1].unpause()}}})(),Re=function(ni){return ni.tagName&&ni.tagName.toLowerCase()==="input"&&typeof ni.select=="function"},We=function(ni){return ni.key==="Escape"||ni.key==="Esc"||ni.keyCode===27},Le=function(ni){return ni.key==="Tab"||ni.keyCode===9},ht=function(ni){return setTimeout(ni,0)},$e=function(ni,xi){var Lt=-1;return ni.every(function(Tt,wt){return xi(Tt)?(Lt=wt,!1):!0}),Lt},pt=function(ni){for(var xi=arguments.length,Lt=new Array(xi>1?xi-1:0),Tt=1;Tt<xi;Tt++)Lt[Tt-1]=arguments[Tt];return typeof ni=="function"?ni.apply(void 0,Lt):ni},Dt=function(ni){return ni.target.shadowRoot&&typeof ni.composedPath=="function"?ni.composedPath()[0]:ni.target},qe=function(ni,xi){var Lt=xi?.document||document,Tt=me({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},xi),wt={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},mi,bi=function(wi,Ti,Di){return wi&&wi[Ti]!==void 0?wi[Ti]:Tt[Di||Ti]},Zi=function(wi){return wt.containerGroups.findIndex(function(Ti){var Di=Ti.container,dt=Ti.tabbableNodes;return Di.contains(wi)||dt.find(function(xe){return xe===wi})})},Li=function(wi){var Ti=Tt[wi];if(typeof Ti=="function"){for(var Di=arguments.length,dt=new Array(Di>1?Di-1:0),xe=1;xe<Di;xe++)dt[xe-1]=arguments[xe];Ti=Ti.apply(void 0,dt)}if(Ti===!0&&(Ti=void 0),!Ti){if(Ti===void 0||Ti===!1)return Ti;throw new Error("`".concat(wi,"` was specified but was not a node, or did not return a node"))}var be=Ti;if(typeof Ti=="string"&&(be=Lt.querySelector(Ti),!be))throw new Error("`".concat(wi,"` as selector refers to no known node"));return be},si=function(){var wi=Li("initialFocus");if(wi===!1)return!1;if(wi===void 0)if(Zi(Lt.activeElement)>=0)wi=Lt.activeElement;else{var Ti=wt.tabbableGroups[0],Di=Ti&&Ti.firstTabbableNode;wi=Di||Li("fallbackFocus")}if(!wi)throw new Error("Your focus-trap needs to have at least one focusable element");return wi},fn=function(){if(wt.containerGroups=wt.containers.map(function(wi){var Ti=re.tabbable(wi,Tt.tabbableOptions),Di=re.focusable(wi,Tt.tabbableOptions);return{container:wi,tabbableNodes:Ti,focusableNodes:Di,firstTabbableNode:Ti.length>0?Ti[0]:null,lastTabbableNode:Ti.length>0?Ti[Ti.length-1]:null,nextTabbableNode:function(xe){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ce=Di.findIndex(function(tt){return tt===xe});if(!(Ce<0))return be?Di.slice(Ce+1).find(function(tt){return re.isTabbable(tt,Tt.tabbableOptions)}):Di.slice(0,Ce).reverse().find(function(tt){return re.isTabbable(tt,Tt.tabbableOptions)})}}}),wt.tabbableGroups=wt.containerGroups.filter(function(wi){return wi.tabbableNodes.length>0}),wt.tabbableGroups.length<=0&&!Li("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},Ii=function Wi(wi){if(wi!==!1&&wi!==Lt.activeElement){if(!wi||!wi.focus){Wi(si());return}wi.focus({preventScroll:!!Tt.preventScroll}),wt.mostRecentlyFocusedNode=wi,Re(wi)&&wi.select()}},Qi=function(wi){var Ti=Li("setReturnFocus",wi);return Ti||(Ti===!1?!1:wi)},rn=function(wi){var Ti=Dt(wi);if(!(Zi(Ti)>=0)){if(pt(Tt.clickOutsideDeactivates,wi)){mi.deactivate({returnFocus:Tt.returnFocusOnDeactivate&&!re.isFocusable(Ti,Tt.tabbableOptions)});return}pt(Tt.allowOutsideClick,wi)||wi.preventDefault()}},xn=function(wi){var Ti=Dt(wi),Di=Zi(Ti)>=0;Di||Ti instanceof Document?Di&&(wt.mostRecentlyFocusedNode=Ti):(wi.stopImmediatePropagation(),Ii(wt.mostRecentlyFocusedNode||si()))},Ye=function(wi){var Ti=Dt(wi);fn();var Di=null;if(wt.tabbableGroups.length>0){var dt=Zi(Ti),xe=dt>=0?wt.containerGroups[dt]:void 0;if(dt<0)wi.shiftKey?Di=wt.tabbableGroups[wt.tabbableGroups.length-1].lastTabbableNode:Di=wt.tabbableGroups[0].firstTabbableNode;else if(wi.shiftKey){var be=$e(wt.tabbableGroups,function(He){var _t=He.firstTabbableNode;return Ti===_t});if(be<0&&(xe.container===Ti||re.isFocusable(Ti,Tt.tabbableOptions)&&!re.isTabbable(Ti,Tt.tabbableOptions)&&!xe.nextTabbableNode(Ti,!1))&&(be=dt),be>=0){var Ce=be===0?wt.tabbableGroups.length-1:be-1,tt=wt.tabbableGroups[Ce];Di=tt.lastTabbableNode}}else{var rt=$e(wt.tabbableGroups,function(He){var _t=He.lastTabbableNode;return Ti===_t});if(rt<0&&(xe.container===Ti||re.isFocusable(Ti,Tt.tabbableOptions)&&!re.isTabbable(Ti,Tt.tabbableOptions)&&!xe.nextTabbableNode(Ti))&&(rt=dt),rt>=0){var St=rt===wt.tabbableGroups.length-1?0:rt+1,yt=wt.tabbableGroups[St];Di=yt.firstTabbableNode}}}else Di=Li("fallbackFocus");Di&&(wi.preventDefault(),Ii(Di))},qt=function(wi){if(We(wi)&&pt(Tt.escapeDeactivates,wi)!==!1){wi.preventDefault(),mi.deactivate();return}if(Le(wi)){Ye(wi);return}},li=function(wi){var Ti=Dt(wi);Zi(Ti)>=0||pt(Tt.clickOutsideDeactivates,wi)||pt(Tt.allowOutsideClick,wi)||(wi.preventDefault(),wi.stopImmediatePropagation())},Fi=function(){if(wt.active)return ye.activateTrap(mi),wt.delayInitialFocusTimer=Tt.delayInitialFocus?ht(function(){Ii(si())}):Ii(si()),Lt.addEventListener("focusin",xn,!0),Lt.addEventListener("mousedown",rn,{capture:!0,passive:!1}),Lt.addEventListener("touchstart",rn,{capture:!0,passive:!1}),Lt.addEventListener("click",li,{capture:!0,passive:!1}),Lt.addEventListener("keydown",qt,{capture:!0,passive:!1}),mi},ci=function(){if(wt.active)return Lt.removeEventListener("focusin",xn,!0),Lt.removeEventListener("mousedown",rn,!0),Lt.removeEventListener("touchstart",rn,!0),Lt.removeEventListener("click",li,!0),Lt.removeEventListener("keydown",qt,!0),mi};return mi={get active(){return wt.active},get paused(){return wt.paused},activate:function(wi){if(wt.active)return this;var Ti=bi(wi,"onActivate"),Di=bi(wi,"onPostActivate"),dt=bi(wi,"checkCanFocusTrap");dt||fn(),wt.active=!0,wt.paused=!1,wt.nodeFocusedBeforeActivation=Lt.activeElement,Ti&&Ti();var xe=function(){dt&&fn(),Fi(),Di&&Di()};return dt?(dt(wt.containers.concat()).then(xe,xe),this):(xe(),this)},deactivate:function(wi){if(!wt.active)return this;var Ti=me({onDeactivate:Tt.onDeactivate,onPostDeactivate:Tt.onPostDeactivate,checkCanReturnFocus:Tt.checkCanReturnFocus},wi);clearTimeout(wt.delayInitialFocusTimer),wt.delayInitialFocusTimer=void 0,ci(),wt.active=!1,wt.paused=!1,ye.deactivateTrap(mi);var Di=bi(Ti,"onDeactivate"),dt=bi(Ti,"onPostDeactivate"),xe=bi(Ti,"checkCanReturnFocus"),be=bi(Ti,"returnFocus","returnFocusOnDeactivate");Di&&Di();var Ce=function(){ht(function(){be&&Ii(Qi(wt.nodeFocusedBeforeActivation)),dt&&dt()})};return be&&xe?(xe(Qi(wt.nodeFocusedBeforeActivation)).then(Ce,Ce),this):(Ce(),this)},pause:function(){return wt.paused||!wt.active?this:(wt.paused=!0,ci(),this)},unpause:function(){return!wt.paused||!wt.active?this:(wt.paused=!1,fn(),Fi(),this)},updateContainerElements:function(wi){var Ti=[].concat(wi).filter(Boolean);return wt.containers=Ti.map(function(Di){return typeof Di=="string"?Lt.querySelector(Di):Di}),wt.active&&fn(),this}},mi.updateContainerElements(ni),mi};J.createFocusTrap=qe}}),D={};f(D,{default:()=>le,focus:()=>G}),e.exports=S(D);var F=x(z()),U=x(E());function G(J){let re,ae;window.addEventListener("focusin",()=>{re=ae,ae=document.activeElement}),J.magic("focus",me=>{let Te=me;return{__noscroll:!1,__wrapAround:!1,within(ye){return Te=ye,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable(ye){return(0,U.isFocusable)(ye)},previouslyFocused(){return re},lastFocused(){return re},focused(){return ae},focusables(){return Array.isArray(Te)?Te:(0,U.focusable)(Te,{displayCheck:"none"})},all(){return this.focusables()},isFirst(ye){let Re=this.all();return Re[0]&&Re[0].isSameNode(ye)},isLast(ye){let Re=this.all();return Re.length&&Re.slice(-1)[0].isSameNode(ye)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let ye=this.all(),Re=document.activeElement;if(ye.indexOf(Re)!==-1)return this.__wrapAround&&ye.indexOf(Re)===ye.length-1?ye[0]:ye[ye.indexOf(Re)+1]},getPrevious(){let ye=this.all(),Re=document.activeElement;if(ye.indexOf(Re)!==-1)return this.__wrapAround&&ye.indexOf(Re)===0?ye.slice(-1)[0]:ye[ye.indexOf(Re)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(ye){ye&&setTimeout(()=>{ye.hasAttribute("tabindex")||ye.setAttribute("tabindex","0"),ye.focus({preventScroll:this.__noscroll})})}}}),J.directive("trap",J.skipDuringClone((me,{expression:Te,modifiers:ye},{effect:Re,evaluateLater:We,cleanup:Le})=>{let ht=We(Te),$e=!1,pt={escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>me},Dt=()=>{};if(ye.includes("noautofocus"))pt.initialFocus=!1;else{let xi=me.querySelector("[autofocus]");xi&&(pt.initialFocus=xi)}ye.includes("inert")&&(pt.onPostActivate=()=>{J.nextTick(()=>{Dt=Z(me)})});let qe=(0,F.createFocusTrap)(me,pt),Nt=()=>{};const ni=()=>{Dt(),Dt=()=>{},Nt(),Nt=()=>{},qe.deactivate({returnFocus:!ye.includes("noreturn")})};Re(()=>ht(xi=>{$e!==xi&&(xi&&!$e&&(ye.includes("noscroll")&&(Nt=ie()),setTimeout(()=>{qe.activate()},15)),!xi&&$e&&ni(),$e=!!xi)})),Le(ni)},(me,{expression:Te,modifiers:ye},{evaluate:Re})=>{ye.includes("inert")&&Re(Te)&&Z(me)}))}function Z(J){let re=[];return ee(J,ae=>{let me=ae.hasAttribute("aria-hidden");ae.setAttribute("aria-hidden","true"),re.push(()=>me||ae.removeAttribute("aria-hidden"))}),()=>{for(;re.length;)re.pop()()}}function ee(J,re){J.isSameNode(document.body)||!J.parentNode||Array.from(J.parentNode.children).forEach(ae=>{ae.isSameNode(J)?ee(J.parentNode,re):re(ae)})}function ie(){let J=document.documentElement.style.overflow,re=document.documentElement.style.paddingRight,ae=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${ae}px`,()=>{document.documentElement.style.overflow=J,document.documentElement.style.paddingRight=re}}var le=G}}),n6=Gu({"node_modules/@alpinejs/intersect/dist/module.cjs.js"(a,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(D,F)=>{for(var U in F)t(D,U,{get:F[U],enumerable:!0})},s=(D,F,U,G)=>{if(F&&typeof F=="object"||typeof F=="function")for(let Z of n(F))!r.call(D,Z)&&Z!==U&&t(D,Z,{get:()=>F[Z],enumerable:!(G=i(F,Z))||G.enumerable});return D},h=D=>s(t({},"__esModule",{value:!0}),D),f={};o(f,{default:()=>z,intersect:()=>y}),e.exports=h(f);function y(D){D.directive("intersect",D.skipDuringClone((F,{value:U,expression:G,modifiers:Z},{evaluateLater:ee,cleanup:ie})=>{let le=ee(G),J={rootMargin:E(Z),threshold:x(Z)},re=new IntersectionObserver(ae=>{ae.forEach(me=>{me.isIntersecting!==(U==="leave")&&(le(),Z.includes("once")&&re.disconnect())})},J);re.observe(F),ie(()=>{re.disconnect()})}))}function x(D){if(D.includes("full"))return .99;if(D.includes("half"))return .5;if(!D.includes("threshold"))return 0;let F=D[D.indexOf("threshold")+1];return F==="100"?1:F==="0"?0:+`.${F}`}function S(D){let F=D.match(/^(-?[0-9]+)(px|%)?$/);return F?F[1]+(F[2]||"px"):void 0}function E(D){const F="margin",U="0px 0px 0px 0px",G=D.indexOf(F);if(G===-1)return U;let Z=[];for(let ee=1;ee<5;ee++)Z.push(S(D[G+ee]||""));return Z=Z.filter(ee=>ee!==void 0),Z.length?Z.join(" ").trim():U}var z=y}}),a6=Gu({"node_modules/@alpinejs/sort/dist/module.cjs.js"(a,e){var t=Object.create,i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,h=(re,ae)=>function(){return ae||(0,re[r(re)[0]])((ae={exports:{}}).exports,ae),ae.exports},f=(re,ae)=>{for(var me in ae)i(re,me,{get:ae[me],enumerable:!0})},y=(re,ae,me,Te)=>{if(ae&&typeof ae=="object"||typeof ae=="function")for(let ye of r(ae))!s.call(re,ye)&&ye!==me&&i(re,ye,{get:()=>ae[ye],enumerable:!(Te=n(ae,ye))||Te.enumerable});return re},x=(re,ae,me)=>(me=re!=null?t(o(re)):{},y(!re||!re.__esModule?i(me,"default",{value:re,enumerable:!0}):me,re)),S=re=>y(i({},"__esModule",{value:!0}),re),E=h({"node_modules/sortablejs/Sortable.min.js"(re,ae){(function(me,Te){typeof re=="object"&&typeof ae<"u"?ae.exports=Te():typeof define=="function"&&define.amd?define(Te):(me=me||self).Sortable=Te()})(re,function(){function me(pe,we){var Me,Ke=Object.keys(pe);return Object.getOwnPropertySymbols&&(Me=Object.getOwnPropertySymbols(pe),we&&(Me=Me.filter(function(Ge){return Object.getOwnPropertyDescriptor(pe,Ge).enumerable})),Ke.push.apply(Ke,Me)),Ke}function Te(pe){for(var we=1;we<arguments.length;we++){var Me=arguments[we]!=null?arguments[we]:{};we%2?me(Object(Me),!0).forEach(function(Ke){var Ge,Ct;Ge=pe,Ke=Me[Ct=Ke],Ct in Ge?Object.defineProperty(Ge,Ct,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):Ge[Ct]=Ke}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Me)):me(Object(Me)).forEach(function(Ke){Object.defineProperty(pe,Ke,Object.getOwnPropertyDescriptor(Me,Ke))})}return pe}function ye(pe){return(ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we})(pe)}function Re(){return(Re=Object.assign||function(pe){for(var we=1;we<arguments.length;we++){var Me,Ke=arguments[we];for(Me in Ke)Object.prototype.hasOwnProperty.call(Ke,Me)&&(pe[Me]=Ke[Me])}return pe}).apply(this,arguments)}function We(pe,we){if(pe==null)return{};var Me,Ke=(function(Ht,Pt){if(Ht==null)return{};for(var oi,Hi={},cn=Object.keys(Ht),Pn=0;Pn<cn.length;Pn++)oi=cn[Pn],0<=Pt.indexOf(oi)||(Hi[oi]=Ht[oi]);return Hi})(pe,we);if(Object.getOwnPropertySymbols)for(var Ge=Object.getOwnPropertySymbols(pe),Ct=0;Ct<Ge.length;Ct++)Me=Ge[Ct],0<=we.indexOf(Me)||Object.prototype.propertyIsEnumerable.call(pe,Me)&&(Ke[Me]=pe[Me]);return Ke}function Le(pe){return(function(we){if(Array.isArray(we))return ht(we)})(pe)||(function(we){if(typeof Symbol<"u"&&we[Symbol.iterator]!=null||we["@@iterator"]!=null)return Array.from(we)})(pe)||(function(we,Me){if(we){if(typeof we=="string")return ht(we,Me);var Ke=Object.prototype.toString.call(we).slice(8,-1);return(Ke=Ke==="Object"&&we.constructor?we.constructor.name:Ke)==="Map"||Ke==="Set"?Array.from(we):Ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke)?ht(we,Me):void 0}})(pe)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function ht(pe,we){(we==null||we>pe.length)&&(we=pe.length);for(var Me=0,Ke=new Array(we);Me<we;Me++)Ke[Me]=pe[Me];return Ke}function $e(pe){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(pe)}var pt=$e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Dt=$e(/Edge/i),qe=$e(/firefox/i),Nt=$e(/safari/i)&&!$e(/chrome/i)&&!$e(/android/i),ni=$e(/iP(ad|od|hone)/i),hr=$e(/chrome/i)&&$e(/android/i),xi={capture:!1,passive:!1};function Lt(pe,we,Me){pe.addEventListener(we,Me,!pt&&xi)}function Tt(pe,we,Me){pe.removeEventListener(we,Me,!pt&&xi)}function wt(pe,we){if(we&&(we[0]===">"&&(we=we.substring(1)),pe))try{if(pe.matches)return pe.matches(we);if(pe.msMatchesSelector)return pe.msMatchesSelector(we);if(pe.webkitMatchesSelector)return pe.webkitMatchesSelector(we)}catch{return}}function mi(pe,we,Me,Ke){if(pe){Me=Me||document;do if(we!=null&&(we[0]!==">"||pe.parentNode===Me)&&wt(pe,we)||Ke&&pe===Me)return pe;while(pe!==Me&&(pe=(Ge=pe).host&&Ge!==document&&Ge.host.nodeType?Ge.host:Ge.parentNode))}var Ge;return null}var bi,Zi=/\s+/g;function Li(pe,we,Me){var Ke;pe&&we&&(pe.classList?pe.classList[Me?"add":"remove"](we):(Ke=(" "+pe.className+" ").replace(Zi," ").replace(" "+we+" "," "),pe.className=(Ke+(Me?" "+we:"")).replace(Zi," ")))}function si(pe,we,Me){var Ke=pe&&pe.style;if(Ke){if(Me===void 0)return document.defaultView&&document.defaultView.getComputedStyle?Me=document.defaultView.getComputedStyle(pe,""):pe.currentStyle&&(Me=pe.currentStyle),we===void 0?Me:Me[we];Ke[we=we in Ke||we.indexOf("webkit")!==-1?we:"-webkit-"+we]=Me+(typeof Me=="string"?"":"px")}}function fn(pe,we){var Me="";if(typeof pe=="string")Me=pe;else do var Ke=si(pe,"transform");while(Ke&&Ke!=="none"&&(Me=Ke+" "+Me),!we&&(pe=pe.parentNode));var Ge=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return Ge&&new Ge(Me)}function Ii(pe,we,Me){if(pe){var Ke=pe.getElementsByTagName(we),Ge=0,Ct=Ke.length;if(Me)for(;Ge<Ct;Ge++)Me(Ke[Ge],Ge);return Ke}return[]}function Qi(){var pe=document.scrollingElement;return pe||document.documentElement}function rn(pe,we,Me,Ke,Ge){if(pe.getBoundingClientRect||pe===window){var Ct,Ht,Pt,oi,Hi,cn,Pn=pe!==window&&pe.parentNode&&pe!==Qi()?(Ht=(Ct=pe.getBoundingClientRect()).top,Pt=Ct.left,oi=Ct.bottom,Hi=Ct.right,cn=Ct.height,Ct.width):(Pt=Ht=0,oi=window.innerHeight,Hi=window.innerWidth,cn=window.innerHeight,window.innerWidth);if((we||Me)&&pe!==window&&(Ge=Ge||pe.parentNode,!pt))do if(Ge&&Ge.getBoundingClientRect&&(si(Ge,"transform")!=="none"||Me&&si(Ge,"position")!=="static")){var na=Ge.getBoundingClientRect();Ht-=na.top+parseInt(si(Ge,"border-top-width")),Pt-=na.left+parseInt(si(Ge,"border-left-width")),oi=Ht+Ct.height,Hi=Pt+Ct.width;break}while(Ge=Ge.parentNode);return Ke&&pe!==window&&(Ke=(we=fn(Ge||pe))&&we.a,pe=we&&we.d,we&&(oi=(Ht/=pe)+(cn/=pe),Hi=(Pt/=Ke)+(Pn/=Ke))),{top:Ht,left:Pt,bottom:oi,right:Hi,width:Pn,height:cn}}}function xn(pe,we,Me){for(var Ke=ci(pe,!0),Ge=rn(pe)[we];Ke;){var Ct=rn(Ke)[Me];if(!(Ct<=Ge))return Ke;if(Ke===Qi())break;Ke=ci(Ke,!1)}return!1}function Ye(pe,we,Me,Ke){for(var Ge=0,Ct=0,Ht=pe.children;Ct<Ht.length;){if(Ht[Ct].style.display!=="none"&&Ht[Ct]!==bn.ghost&&(Ke||Ht[Ct]!==bn.dragged)&&mi(Ht[Ct],Me.draggable,pe,!1)){if(Ge===we)return Ht[Ct];Ge++}Ct++}return null}function qt(pe,we){for(var Me=pe.lastElementChild;Me&&(Me===bn.ghost||si(Me,"display")==="none"||we&&!wt(Me,we));)Me=Me.previousElementSibling;return Me||null}function li(pe,we){var Me=0;if(!pe||!pe.parentNode)return-1;for(;pe=pe.previousElementSibling;)pe.nodeName.toUpperCase()==="TEMPLATE"||pe===bn.clone||we&&!wt(pe,we)||Me++;return Me}function Fi(pe){var we=0,Me=0,Ke=Qi();if(pe)do var Ct=fn(pe),Ge=Ct.a,Ct=Ct.d;while(we+=pe.scrollLeft*Ge,Me+=pe.scrollTop*Ct,pe!==Ke&&(pe=pe.parentNode));return[we,Me]}function ci(pe,we){if(!pe||!pe.getBoundingClientRect)return Qi();var Me=pe,Ke=!1;do if(Me.clientWidth<Me.scrollWidth||Me.clientHeight<Me.scrollHeight){var Ge=si(Me);if(Me.clientWidth<Me.scrollWidth&&(Ge.overflowX=="auto"||Ge.overflowX=="scroll")||Me.clientHeight<Me.scrollHeight&&(Ge.overflowY=="auto"||Ge.overflowY=="scroll")){if(!Me.getBoundingClientRect||Me===document.body)return Qi();if(Ke||we)return Me;Ke=!0}}while(Me=Me.parentNode);return Qi()}function Wi(pe,we){return Math.round(pe.top)===Math.round(we.top)&&Math.round(pe.left)===Math.round(we.left)&&Math.round(pe.height)===Math.round(we.height)&&Math.round(pe.width)===Math.round(we.width)}function wi(pe,we){return function(){var Me;bi||((Me=arguments).length===1?pe.call(this,Me[0]):pe.apply(this,Me),bi=setTimeout(function(){bi=void 0},we))}}function Ti(pe,we,Me){pe.scrollLeft+=we,pe.scrollTop+=Me}function Di(pe){var we=window.Polymer,Me=window.jQuery||window.Zepto;return we&&we.dom?we.dom(pe).cloneNode(!0):Me?Me(pe).clone(!0)[0]:pe.cloneNode(!0)}function dt(pe,we){si(pe,"position","absolute"),si(pe,"top",we.top),si(pe,"left",we.left),si(pe,"width",we.width),si(pe,"height",we.height)}function xe(pe){si(pe,"position",""),si(pe,"top",""),si(pe,"left",""),si(pe,"width",""),si(pe,"height","")}function be(pe,we,Me){var Ke={};return Array.from(pe.children).forEach(function(Ge){var Ct;mi(Ge,we.draggable,pe,!1)&&!Ge.animated&&Ge!==Me&&(Ct=rn(Ge),Ke.left=Math.min((Ge=Ke.left)!==null&&Ge!==void 0?Ge:1/0,Ct.left),Ke.top=Math.min((Ge=Ke.top)!==null&&Ge!==void 0?Ge:1/0,Ct.top),Ke.right=Math.max((Ge=Ke.right)!==null&&Ge!==void 0?Ge:-1/0,Ct.right),Ke.bottom=Math.max((Ge=Ke.bottom)!==null&&Ge!==void 0?Ge:-1/0,Ct.bottom))}),Ke.width=Ke.right-Ke.left,Ke.height=Ke.bottom-Ke.top,Ke.x=Ke.left,Ke.y=Ke.top,Ke}var Ce="Sortable"+new Date().getTime();function tt(){var pe,we=[];return{captureAnimationState:function(){we=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(Me){var Ke,Ge;si(Me,"display")!=="none"&&Me!==bn.ghost&&(we.push({target:Me,rect:rn(Me)}),Ke=Te({},we[we.length-1].rect),!Me.thisAnimationDuration||(Ge=fn(Me,!0))&&(Ke.top-=Ge.f,Ke.left-=Ge.e),Me.fromRect=Ke)})},addAnimationState:function(Me){we.push(Me)},removeAnimationState:function(Me){we.splice((function(Ke,Ge){for(var Ct in Ke)if(Ke.hasOwnProperty(Ct)){for(var Ht in Ge)if(Ge.hasOwnProperty(Ht)&&Ge[Ht]===Ke[Ct][Ht])return Number(Ct)}return-1})(we,{target:Me}),1)},animateAll:function(Me){var Ke=this;if(!this.options.animation)return clearTimeout(pe),void(typeof Me=="function"&&Me());var Ge=!1,Ct=0;we.forEach(function(Ht){var Pt=0,oi=Ht.target,Hi=oi.fromRect,cn=rn(oi),Pn=oi.prevFromRect,na=oi.prevToRect,fa=Ht.rect,aa=fn(oi,!0);aa&&(cn.top-=aa.f,cn.left-=aa.e),oi.toRect=cn,oi.thisAnimationDuration&&Wi(Pn,cn)&&!Wi(Hi,cn)&&(fa.top-cn.top)/(fa.left-cn.left)==(Hi.top-cn.top)/(Hi.left-cn.left)&&(Ht=fa,aa=Pn,Pn=na,na=Ke.options,Pt=Math.sqrt(Math.pow(aa.top-Ht.top,2)+Math.pow(aa.left-Ht.left,2))/Math.sqrt(Math.pow(aa.top-Pn.top,2)+Math.pow(aa.left-Pn.left,2))*na.animation),Wi(cn,Hi)||(oi.prevFromRect=Hi,oi.prevToRect=cn,Pt=Pt||Ke.options.animation,Ke.animate(oi,fa,cn,Pt)),Pt&&(Ge=!0,Ct=Math.max(Ct,Pt),clearTimeout(oi.animationResetTimer),oi.animationResetTimer=setTimeout(function(){oi.animationTime=0,oi.prevFromRect=null,oi.fromRect=null,oi.prevToRect=null,oi.thisAnimationDuration=null},Pt),oi.thisAnimationDuration=Pt)}),clearTimeout(pe),Ge?pe=setTimeout(function(){typeof Me=="function"&&Me()},Ct):typeof Me=="function"&&Me(),we=[]},animate:function(Me,Ke,Ge,Ct){var Ht,Pt;Ct&&(si(Me,"transition",""),si(Me,"transform",""),Ht=(Pt=fn(this.el))&&Pt.a,Pt=Pt&&Pt.d,Ht=(Ke.left-Ge.left)/(Ht||1),Pt=(Ke.top-Ge.top)/(Pt||1),Me.animatingX=!!Ht,Me.animatingY=!!Pt,si(Me,"transform","translate3d("+Ht+"px,"+Pt+"px,0)"),this.forRepaintDummy=Me.offsetWidth,si(Me,"transition","transform "+Ct+"ms"+(this.options.easing?" "+this.options.easing:"")),si(Me,"transform","translate3d(0,0,0)"),typeof Me.animated=="number"&&clearTimeout(Me.animated),Me.animated=setTimeout(function(){si(Me,"transition",""),si(Me,"transform",""),Me.animated=!1,Me.animatingX=!1,Me.animatingY=!1},Ct))}}}var rt=[],St={initializeByDefault:!0},yt={mount:function(pe){for(var we in St)!St.hasOwnProperty(we)||we in pe||(pe[we]=St[we]);rt.forEach(function(Me){if(Me.pluginName===pe.pluginName)throw"Sortable: Cannot mount plugin ".concat(pe.pluginName," more than once")}),rt.push(pe)},pluginEvent:function(pe,we,Me){var Ke=this;this.eventCanceled=!1,Me.cancel=function(){Ke.eventCanceled=!0};var Ge=pe+"Global";rt.forEach(function(Ct){we[Ct.pluginName]&&(we[Ct.pluginName][Ge]&&we[Ct.pluginName][Ge](Te({sortable:we},Me)),we.options[Ct.pluginName]&&we[Ct.pluginName][pe]&&we[Ct.pluginName][pe](Te({sortable:we},Me)))})},initializePlugins:function(pe,we,Me,Ke){for(var Ge in rt.forEach(function(Ht){var Pt=Ht.pluginName;(pe.options[Pt]||Ht.initializeByDefault)&&((Ht=new Ht(pe,we,pe.options)).sortable=pe,Ht.options=pe.options,pe[Pt]=Ht,Re(Me,Ht.defaults))}),pe.options){var Ct;pe.options.hasOwnProperty(Ge)&&(Ct=this.modifyOption(pe,Ge,pe.options[Ge]))!==void 0&&(pe.options[Ge]=Ct)}},getEventProperties:function(pe,we){var Me={};return rt.forEach(function(Ke){typeof Ke.eventProperties=="function"&&Re(Me,Ke.eventProperties.call(we[Ke.pluginName],pe))}),Me},modifyOption:function(pe,we,Me){var Ke;return rt.forEach(function(Ge){pe[Ge.pluginName]&&Ge.optionListeners&&typeof Ge.optionListeners[we]=="function"&&(Ke=Ge.optionListeners[we].call(pe[Ge.pluginName],Me))}),Ke}};function He(pe){var we=pe.sortable,Me=pe.rootEl,Ke=pe.name,Ge=pe.targetEl,Ct=pe.cloneEl,Ht=pe.toEl,Pt=pe.fromEl,oi=pe.oldIndex,Hi=pe.newIndex,cn=pe.oldDraggableIndex,Pn=pe.newDraggableIndex,na=pe.originalEvent,fa=pe.putSortable,aa=pe.extraEventProperties;if(we=we||Me&&Me[Ce]){var zn,Va=we.options,pe="on"+Ke.charAt(0).toUpperCase()+Ke.substr(1);!window.CustomEvent||pt||Dt?(zn=document.createEvent("Event")).initEvent(Ke,!0,!0):zn=new CustomEvent(Ke,{bubbles:!0,cancelable:!0}),zn.to=Ht||Me,zn.from=Pt||Me,zn.item=Ge||Me,zn.clone=Ct,zn.oldIndex=oi,zn.newIndex=Hi,zn.oldDraggableIndex=cn,zn.newDraggableIndex=Pn,zn.originalEvent=na,zn.pullMode=fa?fa.lastPutMode:void 0;var Hn,an=Te(Te({},aa),yt.getEventProperties(Ke,we));for(Hn in an)zn[Hn]=an[Hn];Me&&Me.dispatchEvent(zn),Va[pe]&&Va[pe].call(we,zn)}}function _t(pe,we){var Me=(Ke=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{}).evt,Ke=We(Ke,Ut);yt.pluginEvent.bind(bn)(pe,we,Te({dragEl:It,parentEl:ai,ghostEl:Si,rootEl:Ai,nextEl:Mn,lastDownEl:Mt,cloneEl:Dn,cloneHidden:Yn,dragStarted:Jt,putSortable:hi,activeSortable:bn.active,originalEvent:Me,oldIndex:_n,oldDraggableIndex:Bi,newIndex:pn,newDraggableIndex:Oi,hideGhostForTarget:qn,unhideGhostForTarget:Zn,cloneNowHidden:function(){Yn=!0},cloneNowShown:function(){Yn=!1},dispatchSortableEvent:function(Ge){Et({sortable:we,name:Ge,originalEvent:Me})}},Ke))}var Ut=["evt"];function Et(pe){He(Te({putSortable:hi,cloneEl:Dn,targetEl:It,rootEl:Ai,oldIndex:_n,oldDraggableIndex:Bi,newIndex:pn,newDraggableIndex:Oi},pe))}var It,ai,Si,Ai,Mn,Mt,Dn,Yn,_n,pn,Bi,Oi,mn,hi,Xi,sn,Fe,Oe,xt,ct,Jt,ii,gt,Gt,ei,ki=!1,gn=!1,$i=[],Ei=!1,Vi=!1,Yi=[],on=!1,ca=[],vn=typeof document<"u",$n=ni,Zt=Dt||pt?"cssFloat":"float",Ma=vn&&!hr&&!ni&&"draggable"in document.createElement("div"),nn=(function(){if(vn){if(pt)return!1;var pe=document.createElement("x");return pe.style.cssText="pointer-events:auto",pe.style.pointerEvents==="auto"}})(),Za=function(Hi,we){var Me=si(Hi),Ke=parseInt(Me.width)-parseInt(Me.paddingLeft)-parseInt(Me.paddingRight)-parseInt(Me.borderLeftWidth)-parseInt(Me.borderRightWidth),Ge=Ye(Hi,0,we),Ct=Ye(Hi,1,we),Ht=Ge&&si(Ge),Pt=Ct&&si(Ct),oi=Ht&&parseInt(Ht.marginLeft)+parseInt(Ht.marginRight)+rn(Ge).width,Hi=Pt&&parseInt(Pt.marginLeft)+parseInt(Pt.marginRight)+rn(Ct).width;return Me.display==="flex"?Me.flexDirection==="column"||Me.flexDirection==="column-reverse"?"vertical":"horizontal":Me.display==="grid"?Me.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":Ge&&Ht.float&&Ht.float!=="none"?(we=Ht.float==="left"?"left":"right",!Ct||Pt.clear!=="both"&&Pt.clear!==we?"horizontal":"vertical"):Ge&&(Ht.display==="block"||Ht.display==="flex"||Ht.display==="table"||Ht.display==="grid"||Ke<=oi&&Me[Zt]==="none"||Ct&&Me[Zt]==="none"&&Ke<oi+Hi)?"vertical":"horizontal"},er=function(pe){function we(Ge,Ct){return function(Ht,Pt,oi,Hi){var cn=Ht.options.group.name&&Pt.options.group.name&&Ht.options.group.name===Pt.options.group.name;return Ge==null&&(Ct||cn)?!0:Ge==null||Ge===!1?!1:Ct&&Ge==="clone"?Ge:typeof Ge=="function"?we(Ge(Ht,Pt,oi,Hi),Ct)(Ht,Pt,oi,Hi):(Pt=(Ct?Ht:Pt).options.group.name,Ge===!0||typeof Ge=="string"&&Ge===Pt||Ge.join&&-1<Ge.indexOf(Pt))}}var Me={},Ke=pe.group;Ke&&ye(Ke)=="object"||(Ke={name:Ke}),Me.name=Ke.name,Me.checkPull=we(Ke.pull,!0),Me.checkPut=we(Ke.put),Me.revertClone=Ke.revertClone,pe.group=Me},qn=function(){!nn&&Si&&si(Si,"display","none")},Zn=function(){!nn&&Si&&si(Si,"display","")};vn&&!hr&&document.addEventListener("click",function(pe){if(gn)return pe.preventDefault(),pe.stopPropagation&&pe.stopPropagation(),pe.stopImmediatePropagation&&pe.stopImmediatePropagation(),gn=!1},!0);function kn(pe){if(It){pe=pe.touches?pe.touches[0]:pe;var we=(Ge=pe.clientX,Ct=pe.clientY,$i.some(function(Pt){var oi=Pt[Ce].options.emptyInsertThreshold;if(oi&&!qt(Pt)){var Hi=rn(Pt),cn=Ge>=Hi.left-oi&&Ge<=Hi.right+oi,oi=Ct>=Hi.top-oi&&Ct<=Hi.bottom+oi;return cn&&oi?Ht=Pt:void 0}}),Ht);if(we){var Me,Ke={};for(Me in pe)pe.hasOwnProperty(Me)&&(Ke[Me]=pe[Me]);Ke.target=Ke.rootEl=we,Ke.preventDefault=void 0,Ke.stopPropagation=void 0,we[Ce]._onDragOver(Ke)}}var Ge,Ct,Ht}function Oo(pe){It&&It.parentNode[Ce]._isOutsideThisEl(pe.target)}function bn(pe,we){if(!pe||!pe.nodeType||pe.nodeType!==1)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(pe));this.el=pe,this.options=we=Re({},we),pe[Ce]=this;var Me,Ke,Ge={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(pe.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Za(pe,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Ct,Ht){Ct.setData("Text",Ht.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:bn.supportPointer!==!1&&"PointerEvent"in window&&!Nt,emptyInsertThreshold:5};for(Me in yt.initializePlugins(this,pe,Ge),Ge)Me in we||(we[Me]=Ge[Me]);for(Ke in er(we),this)Ke.charAt(0)==="_"&&typeof this[Ke]=="function"&&(this[Ke]=this[Ke].bind(this));this.nativeDraggable=!we.forceFallback&&Ma,this.nativeDraggable&&(this.options.touchStartThreshold=1),we.supportPointer?Lt(pe,"pointerdown",this._onTapStart):(Lt(pe,"mousedown",this._onTapStart),Lt(pe,"touchstart",this._onTapStart)),this.nativeDraggable&&(Lt(pe,"dragover",this),Lt(pe,"dragenter",this)),$i.push(this.el),we.store&&we.store.get&&this.sort(we.store.get(this)||[]),Re(this,tt())}function ks(pe,we,Me,Ke,Ge,Ct,Ht,Pt){var oi,Hi,cn=pe[Ce],Pn=cn.options.onMove;return!window.CustomEvent||pt||Dt?(oi=document.createEvent("Event")).initEvent("move",!0,!0):oi=new CustomEvent("move",{bubbles:!0,cancelable:!0}),oi.to=we,oi.from=pe,oi.dragged=Me,oi.draggedRect=Ke,oi.related=Ge||we,oi.relatedRect=Ct||rn(we),oi.willInsertAfter=Pt,oi.originalEvent=Ht,pe.dispatchEvent(oi),Hi=Pn?Pn.call(cn,oi,Ht):Hi}function Bn(pe){pe.draggable=!1}function os(){on=!1}function ls(pe){return setTimeout(pe,0)}function ha(pe){return clearTimeout(pe)}bn.prototype={constructor:bn,_isOutsideThisEl:function(pe){this.el.contains(pe)||pe===this.el||(ii=null)},_getDirection:function(pe,we){return typeof this.options.direction=="function"?this.options.direction.call(this,pe,we,It):this.options.direction},_onTapStart:function(pe){if(pe.cancelable){var we=this,Me=this.el,Ke=this.options,Ge=Ke.preventOnFilter,Ct=pe.type,Ht=pe.touches&&pe.touches[0]||pe.pointerType&&pe.pointerType==="touch"&&pe,Pt=(Ht||pe).target,oi=pe.target.shadowRoot&&(pe.path&&pe.path[0]||pe.composedPath&&pe.composedPath()[0])||Pt,Hi=Ke.filter;if((function(cn){ca.length=0;for(var Pn=cn.getElementsByTagName("input"),na=Pn.length;na--;){var fa=Pn[na];fa.checked&&ca.push(fa)}})(Me),!It&&!(/mousedown|pointerdown/.test(Ct)&&pe.button!==0||Ke.disabled)&&!oi.isContentEditable&&(this.nativeDraggable||!Nt||!Pt||Pt.tagName.toUpperCase()!=="SELECT")&&!((Pt=mi(Pt,Ke.draggable,Me,!1))&&Pt.animated||Mt===Pt)){if(_n=li(Pt),Bi=li(Pt,Ke.draggable),typeof Hi=="function"){if(Hi.call(this,pe,Pt,this))return Et({sortable:we,rootEl:oi,name:"filter",targetEl:Pt,toEl:Me,fromEl:Me}),_t("filter",we,{evt:pe}),void(Ge&&pe.cancelable&&pe.preventDefault())}else if(Hi=Hi&&Hi.split(",").some(function(cn){if(cn=mi(oi,cn.trim(),Me,!1))return Et({sortable:we,rootEl:cn,name:"filter",targetEl:Pt,fromEl:Me,toEl:Me}),_t("filter",we,{evt:pe}),!0}))return void(Ge&&pe.cancelable&&pe.preventDefault());Ke.handle&&!mi(oi,Ke.handle,Me,!1)||this._prepareDragStart(pe,Ht,Pt)}}},_prepareDragStart:function(pe,we,Me){var Ke,Ge=this,Ct=Ge.el,Ht=Ge.options,Pt=Ct.ownerDocument;Me&&!It&&Me.parentNode===Ct&&(Ke=rn(Me),Ai=Ct,ai=(It=Me).parentNode,Mn=It.nextSibling,Mt=Me,mn=Ht.group,Xi={target:bn.dragged=It,clientX:(we||pe).clientX,clientY:(we||pe).clientY},xt=Xi.clientX-Ke.left,ct=Xi.clientY-Ke.top,this._lastX=(we||pe).clientX,this._lastY=(we||pe).clientY,It.style["will-change"]="all",Ke=function(){_t("delayEnded",Ge,{evt:pe}),bn.eventCanceled?Ge._onDrop():(Ge._disableDelayedDragEvents(),!qe&&Ge.nativeDraggable&&(It.draggable=!0),Ge._triggerDragStart(pe,we),Et({sortable:Ge,name:"choose",originalEvent:pe}),Li(It,Ht.chosenClass,!0))},Ht.ignore.split(",").forEach(function(oi){Ii(It,oi.trim(),Bn)}),Lt(Pt,"dragover",kn),Lt(Pt,"mousemove",kn),Lt(Pt,"touchmove",kn),Lt(Pt,"mouseup",Ge._onDrop),Lt(Pt,"touchend",Ge._onDrop),Lt(Pt,"touchcancel",Ge._onDrop),qe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,It.draggable=!0),_t("delayStart",this,{evt:pe}),!Ht.delay||Ht.delayOnTouchOnly&&!we||this.nativeDraggable&&(Dt||pt)?Ke():bn.eventCanceled?this._onDrop():(Lt(Pt,"mouseup",Ge._disableDelayedDrag),Lt(Pt,"touchend",Ge._disableDelayedDrag),Lt(Pt,"touchcancel",Ge._disableDelayedDrag),Lt(Pt,"mousemove",Ge._delayedDragTouchMoveHandler),Lt(Pt,"touchmove",Ge._delayedDragTouchMoveHandler),Ht.supportPointer&&Lt(Pt,"pointermove",Ge._delayedDragTouchMoveHandler),Ge._dragStartTimer=setTimeout(Ke,Ht.delay)))},_delayedDragTouchMoveHandler:function(pe){pe=pe.touches?pe.touches[0]:pe,Math.max(Math.abs(pe.clientX-this._lastX),Math.abs(pe.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){It&&Bn(It),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var pe=this.el.ownerDocument;Tt(pe,"mouseup",this._disableDelayedDrag),Tt(pe,"touchend",this._disableDelayedDrag),Tt(pe,"touchcancel",this._disableDelayedDrag),Tt(pe,"mousemove",this._delayedDragTouchMoveHandler),Tt(pe,"touchmove",this._delayedDragTouchMoveHandler),Tt(pe,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(pe,we){we=we||pe.pointerType=="touch"&&pe,!this.nativeDraggable||we?this.options.supportPointer?Lt(document,"pointermove",this._onTouchMove):Lt(document,we?"touchmove":"mousemove",this._onTouchMove):(Lt(It,"dragend",this),Lt(Ai,"dragstart",this._onDragStart));try{document.selection?ls(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(pe,we){var Me;ki=!1,Ai&&It?(_t("dragStarted",this,{evt:we}),this.nativeDraggable&&Lt(document,"dragover",Oo),Me=this.options,pe||Li(It,Me.dragClass,!1),Li(It,Me.ghostClass,!0),bn.active=this,pe&&this._appendGhost(),Et({sortable:this,name:"start",originalEvent:we})):this._nulling()},_emulateDragOver:function(){if(sn){this._lastX=sn.clientX,this._lastY=sn.clientY,qn();for(var pe=document.elementFromPoint(sn.clientX,sn.clientY),we=pe;pe&&pe.shadowRoot&&(pe=pe.shadowRoot.elementFromPoint(sn.clientX,sn.clientY))!==we;)we=pe;if(It.parentNode[Ce]._isOutsideThisEl(pe),we)do if(we[Ce]&&we[Ce]._onDragOver({clientX:sn.clientX,clientY:sn.clientY,target:pe,rootEl:we})&&!this.options.dragoverBubble)break;while(we=(pe=we).parentNode);Zn()}},_onTouchMove:function(pe){if(Xi){var Ct=this.options,we=Ct.fallbackTolerance,Me=Ct.fallbackOffset,Ke=pe.touches?pe.touches[0]:pe,Ge=Si&&fn(Si,!0),Ht=Si&&Ge&&Ge.a,Pt=Si&&Ge&&Ge.d,Ct=$n&&ei&&Fi(ei),Ht=(Ke.clientX-Xi.clientX+Me.x)/(Ht||1)+(Ct?Ct[0]-Yi[0]:0)/(Ht||1),Pt=(Ke.clientY-Xi.clientY+Me.y)/(Pt||1)+(Ct?Ct[1]-Yi[1]:0)/(Pt||1);if(!bn.active&&!ki){if(we&&Math.max(Math.abs(Ke.clientX-this._lastX),Math.abs(Ke.clientY-this._lastY))<we)return;this._onDragStart(pe,!0)}Si&&(Ge?(Ge.e+=Ht-(Fe||0),Ge.f+=Pt-(Oe||0)):Ge={a:1,b:0,c:0,d:1,e:Ht,f:Pt},Ge="matrix(".concat(Ge.a,",").concat(Ge.b,",").concat(Ge.c,",").concat(Ge.d,",").concat(Ge.e,",").concat(Ge.f,")"),si(Si,"webkitTransform",Ge),si(Si,"mozTransform",Ge),si(Si,"msTransform",Ge),si(Si,"transform",Ge),Fe=Ht,Oe=Pt,sn=Ke),pe.cancelable&&pe.preventDefault()}},_appendGhost:function(){if(!Si){var pe=this.options.fallbackOnBody?document.body:Ai,we=rn(It,!0,$n,!0,pe),Me=this.options;if($n){for(ei=pe;si(ei,"position")==="static"&&si(ei,"transform")==="none"&&ei!==document;)ei=ei.parentNode;ei!==document.body&&ei!==document.documentElement?(ei===document&&(ei=Qi()),we.top+=ei.scrollTop,we.left+=ei.scrollLeft):ei=Qi(),Yi=Fi(ei)}Li(Si=It.cloneNode(!0),Me.ghostClass,!1),Li(Si,Me.fallbackClass,!0),Li(Si,Me.dragClass,!0),si(Si,"transition",""),si(Si,"transform",""),si(Si,"box-sizing","border-box"),si(Si,"margin",0),si(Si,"top",we.top),si(Si,"left",we.left),si(Si,"width",we.width),si(Si,"height",we.height),si(Si,"opacity","0.8"),si(Si,"position",$n?"absolute":"fixed"),si(Si,"zIndex","100000"),si(Si,"pointerEvents","none"),bn.ghost=Si,pe.appendChild(Si),si(Si,"transform-origin",xt/parseInt(Si.style.width)*100+"% "+ct/parseInt(Si.style.height)*100+"%")}},_onDragStart:function(pe,we){var Me=this,Ke=pe.dataTransfer,Ge=Me.options;_t("dragStart",this,{evt:pe}),bn.eventCanceled?this._onDrop():(_t("setupClone",this),bn.eventCanceled||((Dn=Di(It)).removeAttribute("id"),Dn.draggable=!1,Dn.style["will-change"]="",this._hideClone(),Li(Dn,this.options.chosenClass,!1),bn.clone=Dn),Me.cloneId=ls(function(){_t("clone",Me),bn.eventCanceled||(Me.options.removeCloneOnHide||Ai.insertBefore(Dn,It),Me._hideClone(),Et({sortable:Me,name:"clone"}))}),we||Li(It,Ge.dragClass,!0),we?(gn=!0,Me._loopId=setInterval(Me._emulateDragOver,50)):(Tt(document,"mouseup",Me._onDrop),Tt(document,"touchend",Me._onDrop),Tt(document,"touchcancel",Me._onDrop),Ke&&(Ke.effectAllowed="move",Ge.setData&&Ge.setData.call(Me,Ke,It)),Lt(document,"drop",Me),si(It,"transform","translateZ(0)")),ki=!0,Me._dragStartId=ls(Me._dragStarted.bind(Me,we,pe)),Lt(document,"selectstart",Me),Jt=!0,Nt&&si(document.body,"user-select","none"))},_onDragOver:function(pe){var we,Me,Ke,Ge,Ct,Ht=this.el,Pt=pe.target,oi=this.options,Hi=oi.group,cn=bn.active,Pn=mn===Hi,na=oi.sort,fa=hi||cn,aa=this,zn=!1;if(!on){if(pe.preventDefault!==void 0&&pe.cancelable&&pe.preventDefault(),Pt=mi(Pt,oi.draggable,Ht,!0),lo("dragOver"),bn.eventCanceled)return zn;if(It.contains(pe.target)||Pt.animated&&Pt.animatingX&&Pt.animatingY||aa._ignoreWhileAnimating===Pt)return ir(!1);if(gn=!1,cn&&!oi.disabled&&(Pn?na||(Me=ai!==Ai):hi===this||(this.lastPutMode=mn.checkPull(this,cn,It,pe))&&Hi.checkPut(this,cn,It,pe))){if(Ke=this._getDirection(pe,Pt)==="vertical",we=rn(It),lo("dragOverValid"),bn.eventCanceled)return zn;if(Me)return ai=Ai,Fo(),this._hideClone(),lo("revert"),bn.eventCanceled||(Mn?Ai.insertBefore(It,Mn):Ai.appendChild(It)),ir(!0);var Va=qt(Ht,oi.draggable);if(Va&&(Aa=pe,Hi=Ke,En=rn(qt((Jn=this).el,Jn.options.draggable)),Jn=be(Jn.el,Jn.options,Si),!(Hi?Aa.clientX>Jn.right+10||Aa.clientY>En.bottom&&Aa.clientX>En.left:Aa.clientY>Jn.bottom+10||Aa.clientX>En.right&&Aa.clientY>En.top)||Va.animated)){if(Va&&(Ge=pe,Ct=Ke,Ha=rn(Ye((va=this).el,0,va.options,!0)),va=be(va.el,va.options,Si),Ct?Ge.clientX<va.left-10||Ge.clientY<Ha.top&&Ge.clientX<Ha.right:Ge.clientY<va.top-10||Ge.clientY<Ha.bottom&&Ge.clientX<Ha.left)){var Hn=Ye(Ht,0,oi,!0);if(Hn===It)return ir(!1);if(br=rn(Pt=Hn),ks(Ai,Ht,It,we,Pt,br,pe,!1)!==!1)return Fo(),Ht.insertBefore(It,Hn),ai=Ht,Cs(),ir(!0)}else if(Pt.parentNode===Ht){var an,oa,ia,br=rn(Pt),Jn=It.parentNode!==Ht,Aa=(Aa=It.animated&&It.toRect||we,En=Pt.animated&&Pt.toRect||br,va=(Ct=Ke)?Aa.left:Aa.top,Ge=Ct?Aa.right:Aa.bottom,Ha=Ct?Aa.width:Aa.height,Hn=Ct?En.left:En.top,Aa=Ct?En.right:En.bottom,En=Ct?En.width:En.height,!(va===Hn||Ge===Aa||va+Ha/2===Hn+En/2)),va=Ke?"top":"left",Ha=xn(Pt,"top","top")||xn(It,"top","top"),Hn=Ha?Ha.scrollTop:void 0;if(ii!==Pt&&(oa=br[va],Ei=!1,Vi=!Aa&&oi.invertSwap||Jn),(an=(function(zr,ko,rr,Fs,co,Ta,jn,lu){var da=Fs?zr.clientY:zr.clientX,Ur=Fs?rr.height:rr.width,zr=Fs?rr.top:rr.left,Fs=Fs?rr.bottom:rr.right,rr=!1;if(!jn){if(lu&&Gt<Ur*co){if(Ei=!Ei&&(gt===1?zr+Ur*Ta/2<da:da<Fs-Ur*Ta/2)?!0:Ei)rr=!0;else if(gt===1?da<zr+Gt:Fs-Gt<da)return-gt}else if(zr+Ur*(1-co)/2<da&&da<Fs-Ur*(1-co)/2)return(function(As){return li(It)<li(As)?1:-1})(ko)}return(rr=rr||jn)&&(da<zr+Ur*Ta/2||Fs-Ur*Ta/2<da)?zr+Ur/2<da?1:-1:0})(pe,Pt,br,Ke,Aa?1:oi.swapThreshold,oi.invertedSwapThreshold==null?oi.swapThreshold:oi.invertedSwapThreshold,Vi,ii===Pt))!==0)for(var Wt=li(It);(ia=ai.children[Wt-=an])&&(si(ia,"display")==="none"||ia===Si););if(an===0||ia===Pt)return ir(!1);gt=an;var En=(ii=Pt).nextElementSibling,Jn=!1,Aa=ks(Ai,Ht,It,we,Pt,br,pe,Jn=an===1);if(Aa!==!1)return Aa!==1&&Aa!==-1||(Jn=Aa===1),on=!0,setTimeout(os,30),Fo(),Jn&&!En?Ht.appendChild(It):Pt.parentNode.insertBefore(It,Jn?En:Pt),Ha&&Ti(Ha,0,Hn-Ha.scrollTop),ai=It.parentNode,oa===void 0||Vi||(Gt=Math.abs(oa-rn(Pt)[va])),Cs(),ir(!0)}}else{if(Va===It)return ir(!1);if((Pt=Va&&Ht===pe.target?Va:Pt)&&(br=rn(Pt)),ks(Ai,Ht,It,we,Pt,br,pe,!!Pt)!==!1)return Fo(),Va&&Va.nextSibling?Ht.insertBefore(It,Va.nextSibling):Ht.appendChild(It),ai=Ht,Cs(),ir(!0)}if(Ht.contains(It))return ir(!1)}return!1}function lo(ba,Ka){_t(ba,aa,Te({evt:pe,isOwner:Pn,axis:Ke?"vertical":"horizontal",revert:Me,dragRect:we,targetRect:br,canSort:na,fromSortable:fa,target:Pt,completed:ir,onMove:function(ko,Wa){return ks(Ai,Ht,It,we,ko,rn(ko),pe,Wa)},changed:Cs},Ka))}function Fo(){lo("dragOverAnimationCapture"),aa.captureAnimationState(),aa!==fa&&fa.captureAnimationState()}function ir(ba){return lo("dragOverCompleted",{insertion:ba}),ba&&(Pn?cn._hideClone():cn._showClone(aa),aa!==fa&&(Li(It,(hi||cn).options.ghostClass,!1),Li(It,oi.ghostClass,!0)),hi!==aa&&aa!==bn.active?hi=aa:aa===bn.active&&hi&&(hi=null),fa===aa&&(aa._ignoreWhileAnimating=Pt),aa.animateAll(function(){lo("dragOverAnimationComplete"),aa._ignoreWhileAnimating=null}),aa!==fa&&(fa.animateAll(),fa._ignoreWhileAnimating=null)),(Pt===It&&!It.animated||Pt===Ht&&!Pt.animated)&&(ii=null),oi.dragoverBubble||pe.rootEl||Pt===document||(It.parentNode[Ce]._isOutsideThisEl(pe.target),ba||kn(pe)),!oi.dragoverBubble&&pe.stopPropagation&&pe.stopPropagation(),zn=!0}function Cs(){pn=li(It),Oi=li(It,oi.draggable),Et({sortable:aa,name:"change",toEl:Ht,newIndex:pn,newDraggableIndex:Oi,originalEvent:pe})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Tt(document,"mousemove",this._onTouchMove),Tt(document,"touchmove",this._onTouchMove),Tt(document,"pointermove",this._onTouchMove),Tt(document,"dragover",kn),Tt(document,"mousemove",kn),Tt(document,"touchmove",kn)},_offUpEvents:function(){var pe=this.el.ownerDocument;Tt(pe,"mouseup",this._onDrop),Tt(pe,"touchend",this._onDrop),Tt(pe,"pointerup",this._onDrop),Tt(pe,"touchcancel",this._onDrop),Tt(document,"selectstart",this)},_onDrop:function(pe){var we=this.el,Me=this.options;pn=li(It),Oi=li(It,Me.draggable),_t("drop",this,{evt:pe}),ai=It&&It.parentNode,pn=li(It),Oi=li(It,Me.draggable),bn.eventCanceled||(Ei=Vi=ki=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ha(this.cloneId),ha(this._dragStartId),this.nativeDraggable&&(Tt(document,"drop",this),Tt(we,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Nt&&si(document.body,"user-select",""),si(It,"transform",""),pe&&(Jt&&(pe.cancelable&&pe.preventDefault(),Me.dropBubble||pe.stopPropagation()),Si&&Si.parentNode&&Si.parentNode.removeChild(Si),(Ai===ai||hi&&hi.lastPutMode!=="clone")&&Dn&&Dn.parentNode&&Dn.parentNode.removeChild(Dn),It&&(this.nativeDraggable&&Tt(It,"dragend",this),Bn(It),It.style["will-change"]="",Jt&&!ki&&Li(It,(hi||this).options.ghostClass,!1),Li(It,this.options.chosenClass,!1),Et({sortable:this,name:"unchoose",toEl:ai,newIndex:null,newDraggableIndex:null,originalEvent:pe}),Ai!==ai?(0<=pn&&(Et({rootEl:ai,name:"add",toEl:ai,fromEl:Ai,originalEvent:pe}),Et({sortable:this,name:"remove",toEl:ai,originalEvent:pe}),Et({rootEl:ai,name:"sort",toEl:ai,fromEl:Ai,originalEvent:pe}),Et({sortable:this,name:"sort",toEl:ai,originalEvent:pe})),hi&&hi.save()):pn!==_n&&0<=pn&&(Et({sortable:this,name:"update",toEl:ai,originalEvent:pe}),Et({sortable:this,name:"sort",toEl:ai,originalEvent:pe})),bn.active&&(pn!=null&&pn!==-1||(pn=_n,Oi=Bi),Et({sortable:this,name:"end",toEl:ai,originalEvent:pe}),this.save())))),this._nulling()},_nulling:function(){_t("nulling",this),Ai=It=ai=Si=Mn=Dn=Mt=Yn=Xi=sn=Jt=pn=Oi=_n=Bi=ii=gt=hi=mn=bn.dragged=bn.ghost=bn.clone=bn.active=null,ca.forEach(function(pe){pe.checked=!0}),ca.length=Fe=Oe=0},handleEvent:function(pe){switch(pe.type){case"drop":case"dragend":this._onDrop(pe);break;case"dragenter":case"dragover":It&&(this._onDragOver(pe),(function(we){we.dataTransfer&&(we.dataTransfer.dropEffect="move"),we.cancelable&&we.preventDefault()})(pe));break;case"selectstart":pe.preventDefault()}},toArray:function(){for(var pe,we=[],Me=this.el.children,Ke=0,Ge=Me.length,Ct=this.options;Ke<Ge;Ke++)mi(pe=Me[Ke],Ct.draggable,this.el,!1)&&we.push(pe.getAttribute(Ct.dataIdAttr)||(function(Ht){for(var Pt=Ht.tagName+Ht.className+Ht.src+Ht.href+Ht.textContent,oi=Pt.length,Hi=0;oi--;)Hi+=Pt.charCodeAt(oi);return Hi.toString(36)})(pe));return we},sort:function(pe,we){var Me={},Ke=this.el;this.toArray().forEach(function(Ge,Ct){Ct=Ke.children[Ct],mi(Ct,this.options.draggable,Ke,!1)&&(Me[Ge]=Ct)},this),we&&this.captureAnimationState(),pe.forEach(function(Ge){Me[Ge]&&(Ke.removeChild(Me[Ge]),Ke.appendChild(Me[Ge]))}),we&&this.animateAll()},save:function(){var pe=this.options.store;pe&&pe.set&&pe.set(this)},closest:function(pe,we){return mi(pe,we||this.options.draggable,this.el,!1)},option:function(pe,we){var Me=this.options;if(we===void 0)return Me[pe];var Ke=yt.modifyOption(this,pe,we);Me[pe]=Ke!==void 0?Ke:we,pe==="group"&&er(Me)},destroy:function(){_t("destroy",this);var pe=this.el;pe[Ce]=null,Tt(pe,"mousedown",this._onTapStart),Tt(pe,"touchstart",this._onTapStart),Tt(pe,"pointerdown",this._onTapStart),this.nativeDraggable&&(Tt(pe,"dragover",this),Tt(pe,"dragenter",this)),Array.prototype.forEach.call(pe.querySelectorAll("[draggable]"),function(we){we.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),$i.splice($i.indexOf(this.el),1),this.el=pe=null},_hideClone:function(){Yn||(_t("hideClone",this),bn.eventCanceled||(si(Dn,"display","none"),this.options.removeCloneOnHide&&Dn.parentNode&&Dn.parentNode.removeChild(Dn),Yn=!0))},_showClone:function(pe){pe.lastPutMode==="clone"?Yn&&(_t("showClone",this),bn.eventCanceled||(It.parentNode!=Ai||this.options.group.revertClone?Mn?Ai.insertBefore(Dn,Mn):Ai.appendChild(Dn):Ai.insertBefore(Dn,It),this.options.group.revertClone&&this.animate(It,Dn),si(Dn,"display",""),Yn=!1)):this._hideClone()}},vn&&Lt(document,"touchmove",function(pe){(bn.active||ki)&&pe.cancelable&&pe.preventDefault()}),bn.utils={on:Lt,off:Tt,css:si,find:Ii,is:function(pe,we){return!!mi(pe,we,pe,!1)},extend:function(pe,we){if(pe&&we)for(var Me in we)we.hasOwnProperty(Me)&&(pe[Me]=we[Me]);return pe},throttle:wi,closest:mi,toggleClass:Li,clone:Di,index:li,nextTick:ls,cancelNextTick:ha,detectDirection:Za,getChild:Ye},bn.get=function(pe){return pe[Ce]},bn.mount=function(){for(var pe=arguments.length,we=new Array(pe),Me=0;Me<pe;Me++)we[Me]=arguments[Me];(we=we[0].constructor===Array?we[0]:we).forEach(function(Ke){if(!Ke.prototype||!Ke.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(Ke));Ke.utils&&(bn.utils=Te(Te({},bn.utils),Ke.utils)),yt.mount(Ke)})},bn.create=function(pe,we){return new bn(pe,we)};var Ga,jl,So,Ca,cr,Rt,Be=[],In=!(bn.version="1.15.2");function ur(){Be.forEach(function(pe){clearInterval(pe.pid)}),Be=[]}function Er(){clearInterval(Rt)}var Mr,yl=wi(function(pe,we,Me,Ke){if(we.scroll){var Ge,Ct=(pe.touches?pe.touches[0]:pe).clientX,Ht=(pe.touches?pe.touches[0]:pe).clientY,Pt=we.scrollSensitivity,oi=we.scrollSpeed,Hi=Qi(),cn=!1;jl!==Me&&(jl=Me,ur(),Ga=we.scroll,Ge=we.scrollFn,Ga===!0&&(Ga=ci(Me,!0)));var Pn=0,na=Ga;do{var fa=na,Jn=rn(fa),aa=Jn.top,zn=Jn.bottom,Va=Jn.left,Hn=Jn.right,an=Jn.width,oa=Jn.height,ia=void 0,Wt=void 0,br=fa.scrollWidth,va=fa.scrollHeight,Ha=si(fa),En=fa.scrollLeft,Jn=fa.scrollTop,Wt=fa===Hi?(ia=an<br&&(Ha.overflowX==="auto"||Ha.overflowX==="scroll"||Ha.overflowX==="visible"),oa<va&&(Ha.overflowY==="auto"||Ha.overflowY==="scroll"||Ha.overflowY==="visible")):(ia=an<br&&(Ha.overflowX==="auto"||Ha.overflowX==="scroll"),oa<va&&(Ha.overflowY==="auto"||Ha.overflowY==="scroll")),En=ia&&(Math.abs(Hn-Ct)<=Pt&&En+an<br)-(Math.abs(Va-Ct)<=Pt&&!!En),Jn=Wt&&(Math.abs(zn-Ht)<=Pt&&Jn+oa<va)-(Math.abs(aa-Ht)<=Pt&&!!Jn);if(!Be[Pn])for(var Aa=0;Aa<=Pn;Aa++)Be[Aa]||(Be[Aa]={});Be[Pn].vx==En&&Be[Pn].vy==Jn&&Be[Pn].el===fa||(Be[Pn].el=fa,Be[Pn].vx=En,Be[Pn].vy=Jn,clearInterval(Be[Pn].pid),En==0&&Jn==0||(cn=!0,Be[Pn].pid=setInterval((function(){Ke&&this.layer===0&&bn.active._onTouchMove(cr);var lo=Be[this.layer].vy?Be[this.layer].vy*oi:0,Fo=Be[this.layer].vx?Be[this.layer].vx*oi:0;typeof Ge=="function"&&Ge.call(bn.dragged.parentNode[Ce],Fo,lo,pe,cr,Be[this.layer].el)!=="continue"||Ti(Be[this.layer].el,Fo,lo)}).bind({layer:Pn}),24))),Pn++}while(we.bubbleScroll&&na!==Hi&&(na=ci(na,!1)));In=cn}},30),hr=function(Pt){var we=Pt.originalEvent,Me=Pt.putSortable,Ke=Pt.dragEl,Ge=Pt.activeSortable,Ct=Pt.dispatchSortableEvent,Ht=Pt.hideGhostForTarget,Pt=Pt.unhideGhostForTarget;we&&(Ge=Me||Ge,Ht(),we=we.changedTouches&&we.changedTouches.length?we.changedTouches[0]:we,we=document.elementFromPoint(we.clientX,we.clientY),Pt(),Ge&&!Ge.el.contains(we)&&(Ct("spill"),this.onSpill({dragEl:Ke,putSortable:Me})))};function Fn(){}function za(){}Fn.prototype={startIndex:null,dragStart:function(pe){pe=pe.oldDraggableIndex,this.startIndex=pe},onSpill:function(pe){var we=pe.dragEl,Me=pe.putSortable;this.sortable.captureAnimationState(),Me&&Me.captureAnimationState(),pe=Ye(this.sortable.el,this.startIndex,this.options),pe?this.sortable.el.insertBefore(we,pe):this.sortable.el.appendChild(we),this.sortable.animateAll(),Me&&Me.animateAll()},drop:hr},Re(Fn,{pluginName:"revertOnSpill"}),za.prototype={onSpill:function(Me){var we=Me.dragEl,Me=Me.putSortable||this.sortable;Me.captureAnimationState(),we.parentNode&&we.parentNode.removeChild(we),Me.animateAll()},drop:hr},Re(za,{pluginName:"removeOnSpill"});var xr,vr,yn,Ws,zo,Kn=[],ta=[],tr=!1,ea=!1,_i=!1;function Fa(pe,we){ta.forEach(function(Me,Ke){Ke=we.children[Me.sortableIndex+(pe?Number(Ke):0)],Ke?we.insertBefore(Me,Ke):we.appendChild(Me)})}function Gn(){Kn.forEach(function(pe){pe!==yn&&pe.parentNode&&pe.parentNode.removeChild(pe)})}return bn.mount(new function(){function pe(){for(var we in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)we.charAt(0)==="_"&&typeof this[we]=="function"&&(this[we]=this[we].bind(this))}return pe.prototype={dragStarted:function(we){we=we.originalEvent,this.sortable.nativeDraggable?Lt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Lt(document,"pointermove",this._handleFallbackAutoScroll):we.touches?Lt(document,"touchmove",this._handleFallbackAutoScroll):Lt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(we){we=we.originalEvent,this.options.dragOverBubble||we.rootEl||this._handleAutoScroll(we)},drop:function(){this.sortable.nativeDraggable?Tt(document,"dragover",this._handleAutoScroll):(Tt(document,"pointermove",this._handleFallbackAutoScroll),Tt(document,"touchmove",this._handleFallbackAutoScroll),Tt(document,"mousemove",this._handleFallbackAutoScroll)),Er(),ur(),clearTimeout(bi),bi=void 0},nulling:function(){cr=jl=Ga=In=Rt=So=Ca=null,Be.length=0},_handleFallbackAutoScroll:function(we){this._handleAutoScroll(we,!0)},_handleAutoScroll:function(we,Me){var Ke,Ge=this,Ct=(we.touches?we.touches[0]:we).clientX,Ht=(we.touches?we.touches[0]:we).clientY,Pt=document.elementFromPoint(Ct,Ht);cr=we,Me||this.options.forceAutoScrollFallback||Dt||pt||Nt?(yl(we,this.options,Pt,Me),Ke=ci(Pt,!0),!In||Rt&&Ct===So&&Ht===Ca||(Rt&&Er(),Rt=setInterval(function(){var oi=ci(document.elementFromPoint(Ct,Ht),!0);oi!==Ke&&(Ke=oi,ur()),yl(we,Ge.options,oi,Me)},10),So=Ct,Ca=Ht)):this.options.bubbleScroll&&ci(Pt,!0)!==Qi()?yl(we,this.options,ci(Pt,!1),!1):ur()}},Re(pe,{pluginName:"scroll",initializeByDefault:!0})}),bn.mount(za,Fn),bn.mount(new function(){function pe(){this.defaults={swapClass:"sortable-swap-highlight"}}return pe.prototype={dragStart:function(we){we=we.dragEl,Mr=we},dragOverValid:function(we){var Me=we.completed,Ke=we.target,Ge=we.onMove,Ct=we.activeSortable,Ht=we.changed,Pt=we.cancel;Ct.options.swap&&(we=this.sortable.el,Ct=this.options,Ke&&Ke!==we&&(we=Mr,Mr=Ge(Ke)!==!1?(Li(Ke,Ct.swapClass,!0),Ke):null,we&&we!==Mr&&Li(we,Ct.swapClass,!1)),Ht(),Me(!0),Pt())},drop:function(we){var Me,Ke,Ge=we.activeSortable,Ct=we.putSortable,Ht=we.dragEl,Pt=Ct||this.sortable,oi=this.options;Mr&&Li(Mr,oi.swapClass,!1),Mr&&(oi.swap||Ct&&Ct.options.swap)&&Ht!==Mr&&(Pt.captureAnimationState(),Pt!==Ge&&Ge.captureAnimationState(),Ke=Mr,we=(Me=Ht).parentNode,oi=Ke.parentNode,we&&oi&&!we.isEqualNode(Ke)&&!oi.isEqualNode(Me)&&(Ct=li(Me),Ht=li(Ke),we.isEqualNode(oi)&&Ct<Ht&&Ht++,we.insertBefore(Ke,we.children[Ct]),oi.insertBefore(Me,oi.children[Ht])),Pt.animateAll(),Pt!==Ge&&Ge.animateAll())},nulling:function(){Mr=null}},Re(pe,{pluginName:"swap",eventProperties:function(){return{swapItem:Mr}}})}),bn.mount(new function(){function pe(we){for(var Me in this)Me.charAt(0)==="_"&&typeof this[Me]=="function"&&(this[Me]=this[Me].bind(this));we.options.avoidImplicitDeselect||(we.options.supportPointer?Lt(document,"pointerup",this._deselectMultiDrag):(Lt(document,"mouseup",this._deselectMultiDrag),Lt(document,"touchend",this._deselectMultiDrag))),Lt(document,"keydown",this._checkKeyDown),Lt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(Ke,Ge){var Ct="";Kn.length&&vr===we?Kn.forEach(function(Ht,Pt){Ct+=(Pt?", ":"")+Ht.textContent}):Ct=Ge.textContent,Ke.setData("Text",Ct)}}}return pe.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(we){we=we.dragEl,yn=we},delayEnded:function(){this.isMultiDrag=~Kn.indexOf(yn)},setupClone:function(Ke){var Me=Ke.sortable,Ke=Ke.cancel;if(this.isMultiDrag){for(var Ge=0;Ge<Kn.length;Ge++)ta.push(Di(Kn[Ge])),ta[Ge].sortableIndex=Kn[Ge].sortableIndex,ta[Ge].draggable=!1,ta[Ge].style["will-change"]="",Li(ta[Ge],this.options.selectedClass,!1),Kn[Ge]===yn&&Li(ta[Ge],this.options.chosenClass,!1);Me._hideClone(),Ke()}},clone:function(Ct){var Me=Ct.sortable,Ke=Ct.rootEl,Ge=Ct.dispatchSortableEvent,Ct=Ct.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Kn.length&&vr===Me&&(Fa(!0,Ke),Ge("clone"),Ct()))},showClone:function(Ge){var Me=Ge.cloneNowShown,Ke=Ge.rootEl,Ge=Ge.cancel;this.isMultiDrag&&(Fa(!1,Ke),ta.forEach(function(Ct){si(Ct,"display","")}),Me(),zo=!1,Ge())},hideClone:function(Ge){var Me=this,Ke=(Ge.sortable,Ge.cloneNowHidden),Ge=Ge.cancel;this.isMultiDrag&&(ta.forEach(function(Ct){si(Ct,"display","none"),Me.options.removeCloneOnHide&&Ct.parentNode&&Ct.parentNode.removeChild(Ct)}),Ke(),zo=!0,Ge())},dragStartGlobal:function(we){we.sortable,!this.isMultiDrag&&vr&&vr.multiDrag._deselectMultiDrag(),Kn.forEach(function(Me){Me.sortableIndex=li(Me)}),Kn=Kn.sort(function(Me,Ke){return Me.sortableIndex-Ke.sortableIndex}),_i=!0},dragStarted:function(Ge){var Me,Ke=this,Ge=Ge.sortable;this.isMultiDrag&&(this.options.sort&&(Ge.captureAnimationState(),this.options.animation&&(Kn.forEach(function(Ct){Ct!==yn&&si(Ct,"position","absolute")}),Me=rn(yn,!1,!0,!0),Kn.forEach(function(Ct){Ct!==yn&&dt(Ct,Me)}),tr=ea=!0)),Ge.animateAll(function(){tr=ea=!1,Ke.options.animation&&Kn.forEach(function(Ct){xe(Ct)}),Ke.options.sort&&Gn()}))},dragOver:function(Ge){var Me=Ge.target,Ke=Ge.completed,Ge=Ge.cancel;ea&&~Kn.indexOf(Me)&&(Ke(!1),Ge())},revert:function(we){var Me,Ke,Ge=we.fromSortable,Ct=we.rootEl,Ht=we.sortable,Pt=we.dragRect;1<Kn.length&&(Kn.forEach(function(oi){Ht.addAnimationState({target:oi,rect:ea?rn(oi):Pt}),xe(oi),oi.fromRect=Pt,Ge.removeAnimationState(oi)}),ea=!1,Me=!this.options.removeCloneOnHide,Ke=Ct,Kn.forEach(function(oi,Hi){Hi=Ke.children[oi.sortableIndex+(Me?Number(Hi):0)],Hi?Ke.insertBefore(oi,Hi):Ke.appendChild(oi)}))},dragOverCompleted:function(Hi){var Me,Ke=Hi.sortable,Ge=Hi.isOwner,Ct=Hi.insertion,Ht=Hi.activeSortable,Pt=Hi.parentEl,oi=Hi.putSortable,Hi=this.options;Ct&&(Ge&&Ht._hideClone(),tr=!1,Hi.animation&&1<Kn.length&&(ea||!Ge&&!Ht.options.sort&&!oi)&&(Me=rn(yn,!1,!0,!0),Kn.forEach(function(cn){cn!==yn&&(dt(cn,Me),Pt.appendChild(cn))}),ea=!0),Ge||(ea||Gn(),1<Kn.length?(Ge=zo,Ht._showClone(Ke),Ht.options.animation&&!zo&&Ge&&ta.forEach(function(cn){Ht.addAnimationState({target:cn,rect:Ws}),cn.fromRect=Ws,cn.thisAnimationDuration=null})):Ht._showClone(Ke)))},dragOverAnimationCapture:function(Ge){var Me=Ge.dragRect,Ke=Ge.isOwner,Ge=Ge.activeSortable;Kn.forEach(function(Ct){Ct.thisAnimationDuration=null}),Ge.options.animation&&!Ke&&Ge.multiDrag.isMultiDrag&&(Ws=Re({},Me),Me=fn(yn,!0),Ws.top-=Me.f,Ws.left-=Me.e)},dragOverAnimationComplete:function(){ea&&(ea=!1,Gn())},drop:function(we){var Me=we.originalEvent,Ke=we.rootEl,Ge=we.parentEl,Ct=we.sortable,Ht=we.dispatchSortableEvent,Pt=we.oldIndex,oi=we.putSortable,Hi=oi||this.sortable;if(Me){var cn,Pn,na,fa=this.options,aa=Ge.children;if(!_i)if(fa.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Li(yn,fa.selectedClass,!~Kn.indexOf(yn)),~Kn.indexOf(yn))Kn.splice(Kn.indexOf(yn),1),xr=null,He({sortable:Ct,rootEl:Ke,name:"deselect",targetEl:yn,originalEvent:Me});else{if(Kn.push(yn),He({sortable:Ct,rootEl:Ke,name:"select",targetEl:yn,originalEvent:Me}),Me.shiftKey&&xr&&Ct.el.contains(xr)){var zn=li(xr),we=li(yn);if(~zn&&~we&&zn!==we)for(var Va,Hn=zn<we?(Va=zn,we):(Va=we,zn+1);Va<Hn;Va++)~Kn.indexOf(aa[Va])||(Li(aa[Va],fa.selectedClass,!0),Kn.push(aa[Va]),He({sortable:Ct,rootEl:Ke,name:"select",targetEl:aa[Va],originalEvent:Me}))}else xr=yn;vr=Hi}_i&&this.isMultiDrag&&(ea=!1,(Ge[Ce].options.sort||Ge!==Ke)&&1<Kn.length&&(cn=rn(yn),Pn=li(yn,":not(."+this.options.selectedClass+")"),!tr&&fa.animation&&(yn.thisAnimationDuration=null),Hi.captureAnimationState(),tr||(fa.animation&&(yn.fromRect=cn,Kn.forEach(function(an){var oa;an.thisAnimationDuration=null,an!==yn&&(oa=ea?rn(an):cn,an.fromRect=oa,Hi.addAnimationState({target:an,rect:oa}))})),Gn(),Kn.forEach(function(an){aa[Pn]?Ge.insertBefore(an,aa[Pn]):Ge.appendChild(an),Pn++}),Pt===li(yn)&&(na=!1,Kn.forEach(function(an){an.sortableIndex!==li(an)&&(na=!0)}),na&&(Ht("update"),Ht("sort")))),Kn.forEach(function(an){xe(an)}),Hi.animateAll()),vr=Hi),(Ke===Ge||oi&&oi.lastPutMode!=="clone")&&ta.forEach(function(an){an.parentNode&&an.parentNode.removeChild(an)})}},nullingGlobal:function(){this.isMultiDrag=_i=!1,ta.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Tt(document,"pointerup",this._deselectMultiDrag),Tt(document,"mouseup",this._deselectMultiDrag),Tt(document,"touchend",this._deselectMultiDrag),Tt(document,"keydown",this._checkKeyDown),Tt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(we){if(!(_i!==void 0&&_i||vr!==this.sortable||we&&mi(we.target,this.options.draggable,this.sortable.el,!1)||we&&we.button!==0))for(;Kn.length;){var Me=Kn[0];Li(Me,this.options.selectedClass,!1),Kn.shift(),He({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:Me,originalEvent:we})}},_checkKeyDown:function(we){we.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(we){we.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Re(pe,{pluginName:"multiDrag",utils:{select:function(we){var Me=we.parentNode[Ce];Me&&Me.options.multiDrag&&!~Kn.indexOf(we)&&(vr&&vr!==Me&&(vr.multiDrag._deselectMultiDrag(),vr=Me),Li(we,Me.options.selectedClass,!0),Kn.push(we))},deselect:function(we){var Me=we.parentNode[Ce],Ke=Kn.indexOf(we);Me&&Me.options.multiDrag&&~Ke&&(Li(we,Me.options.selectedClass,!1),Kn.splice(Ke,1))}},eventProperties:function(){var we=this,Me=[],Ke=[];return Kn.forEach(function(Ge){var Ct;Me.push({multiDragElement:Ge,index:Ge.sortableIndex}),Ct=ea&&Ge!==yn?-1:ea?li(Ge,":not(."+we.options.selectedClass+")"):li(Ge),Ke.push({multiDragElement:Ge,index:Ct})}),{items:Le(Kn),clones:[].concat(ta),oldIndicies:Me,newIndicies:Ke}},optionListeners:{multiDragKey:function(we){return(we=we.toLowerCase())==="ctrl"?we="Control":1<we.length&&(we=we.charAt(0).toUpperCase()+we.substr(1)),we}}})}),bn})}}),z={};f(z,{default:()=>J,sort:()=>U}),e.exports=S(z);var D=x(E());function F(re,ae){if(typeof ShadowRoot=="function"&&re instanceof ShadowRoot){Array.from(re.children).forEach(ye=>F(ye,ae));return}let me=!1;if(ae(re,()=>me=!0),me)return;let Te=re.firstElementChild;for(;Te;)F(Te,ae),Te=Te.nextElementSibling}function U(re){re.directive("sort",(ae,{value:me,modifiers:Te,expression:ye},{effect:Re,evaluate:We,cleanup:Le})=>{if(me==="config"||me==="handle"||me==="group")return;if(me==="key"||me==="item"){if([void 0,null,""].includes(ye))return;ae._x_sort_key=We(ye);return}let ht={hideGhost:!Te.includes("ghost"),useHandles:!!ae.querySelector("[x-sort\\:handle],[wire\\:sort\\:handle]"),group:le(ae,Te)},$e=G(ye,We),pt=Z(ae,Te,We),Dt=ee(ae,pt,ht,(qe,Nt)=>{$e(qe,Nt)});Le(()=>Dt.destroy())})}function G(re,ae){return[void 0,null,""].includes(re)?()=>{}:(me,Te)=>{ae(re,{scope:{$key:me,$item:me,$position:Te},params:[me,Te]})}}function Z(re,ae,me){return re.hasAttribute("x-sort:config")?me(re.getAttribute("x-sort:config")):re.hasAttribute("wire:sort:config")?me(re.getAttribute("wire:sort:config")):{}}function ee(re,ae,me,Te){let ye,Re={animation:150,handle:me.useHandles?"[x-sort\\:handle],[wire\\:sort\\:handle]":null,group:me.group,scroll:!0,forceAutoScrollFallback:!0,scrollSensitivity:50,preventOnFilter:!1,filter(We){return We.target.hasAttribute("x-sort:ignore")||We.target.hasAttribute("wire:sort:ignore")||We.target.closest("[x-sort\\:ignore]")||We.target.closest("[wire\\:sort\\:ignore]")?!0:re.querySelector("[x-sort\\:item],[wire\\:sort\\:item]")?!We.target.closest("[x-sort\\:item],[wire\\:sort\\:item]"):!1},onSort(We){if(We.from!==We.to&&We.to!==We.target)return;let Le;F(We.item,($e,pt)=>{Le===void 0&&$e._x_sort_key&&(Le=$e._x_sort_key,pt())});let ht=We.newIndex;(Le!==void 0||Le!==null)&&Te(Le,ht)},onStart(){document.body.classList.add("sorting"),ye=document.querySelector(".sortable-ghost"),me.hideGhost&&ye&&(ye.style.opacity="0")},onEnd(){document.body.classList.remove("sorting"),me.hideGhost&&ye&&(ye.style.opacity="1"),ye=void 0,ie(re)}};return new D.default(re,{...Re,...ae})}function ie(re){let ae=re.firstChild;for(;ae.nextSibling;){if(ae.textContent.trim()==="[if ENDBLOCK]><![endif]"){re.append(ae);break}ae=ae.nextSibling}}function le(re,ae){return re.hasAttribute("x-sort:group")?re.getAttribute("x-sort:group"):re.hasAttribute("wire:sort:group")?re.getAttribute("wire:sort:group"):ae.indexOf("group")!==-1?ae[ae.indexOf("group")+1]:null}var J=U}}),r6=Gu({"node_modules/@alpinejs/resize/dist/module.cjs.js"(a,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(U,G)=>{for(var Z in G)t(U,Z,{get:G[Z],enumerable:!0})},s=(U,G,Z,ee)=>{if(G&&typeof G=="object"||typeof G=="function")for(let ie of n(G))!r.call(U,ie)&&ie!==Z&&t(U,ie,{get:()=>G[ie],enumerable:!(ee=i(G,ie))||ee.enumerable});return U},h=U=>s(t({},"__esModule",{value:!0}),U),f={};o(f,{default:()=>F,resize:()=>y}),e.exports=h(f);function y(U){U.directive("resize",U.skipDuringClone((G,{value:Z,expression:ee,modifiers:ie},{evaluateLater:le,cleanup:J})=>{let re=le(ee),ae=(Te,ye)=>{re(()=>{},{scope:{$width:Te,$height:ye}})},me=ie.includes("document")?z(ae):x(G,ae);J(()=>me())}))}function x(U,G){let Z=new ResizeObserver(ee=>{let[ie,le]=D(ee);G(ie,le)});return Z.observe(U),()=>Z.disconnect()}var S,E=new Set;function z(U){return E.add(U),S||(S=new ResizeObserver(G=>{let[Z,ee]=D(G);E.forEach(ie=>ie(Z,ee))}),S.observe(document.documentElement)),()=>{E.delete(U)}}function D(U){let G,Z;for(let ee of U)G=ee.borderBoxSize[0].inlineSize,Z=ee.borderBoxSize[0].blockSize;return[G,Z]}var F=y}}),s6=Gu({"node_modules/@alpinejs/anchor/dist/module.cjs.js"(a,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(Fe,Oe)=>{for(var xt in Oe)t(Fe,xt,{get:Oe[xt],enumerable:!0})},s=(Fe,Oe,xt,ct)=>{if(Oe&&typeof Oe=="object"||typeof Oe=="function")for(let Jt of n(Oe))!r.call(Fe,Jt)&&Jt!==xt&&t(Fe,Jt,{get:()=>Oe[Jt],enumerable:!(ct=i(Oe,Jt))||ct.enumerable});return Fe},h=Fe=>s(t({},"__esModule",{value:!0}),Fe),f={};o(f,{anchor:()=>mn,default:()=>sn}),e.exports=h(f);var y=Math.min,x=Math.max,S=Math.round,E=Math.floor,z=Fe=>({x:Fe,y:Fe}),D={left:"right",right:"left",bottom:"top",top:"bottom"},F={start:"end",end:"start"};function U(Fe,Oe,xt){return x(Fe,y(Oe,xt))}function G(Fe,Oe){return typeof Fe=="function"?Fe(Oe):Fe}function Z(Fe){return Fe.split("-")[0]}function ee(Fe){return Fe.split("-")[1]}function ie(Fe){return Fe==="x"?"y":"x"}function le(Fe){return Fe==="y"?"height":"width"}function J(Fe){return["top","bottom"].includes(Z(Fe))?"y":"x"}function re(Fe){return ie(J(Fe))}function ae(Fe,Oe,xt){xt===void 0&&(xt=!1);const ct=ee(Fe),Jt=re(Fe),ii=le(Jt);let gt=Jt==="x"?ct===(xt?"end":"start")?"right":"left":ct==="start"?"bottom":"top";return Oe.reference[ii]>Oe.floating[ii]&&(gt=We(gt)),[gt,We(gt)]}function me(Fe){const Oe=We(Fe);return[Te(Fe),Oe,Te(Oe)]}function Te(Fe){return Fe.replace(/start|end/g,Oe=>F[Oe])}function ye(Fe,Oe,xt){const ct=["left","right"],Jt=["right","left"],ii=["top","bottom"],gt=["bottom","top"];switch(Fe){case"top":case"bottom":return xt?Oe?Jt:ct:Oe?ct:Jt;case"left":case"right":return Oe?ii:gt;default:return[]}}function Re(Fe,Oe,xt,ct){const Jt=ee(Fe);let ii=ye(Z(Fe),xt==="start",ct);return Jt&&(ii=ii.map(gt=>gt+"-"+Jt),Oe&&(ii=ii.concat(ii.map(Te)))),ii}function We(Fe){return Fe.replace(/left|right|bottom|top/g,Oe=>D[Oe])}function Le(Fe){return{top:0,right:0,bottom:0,left:0,...Fe}}function ht(Fe){return typeof Fe!="number"?Le(Fe):{top:Fe,right:Fe,bottom:Fe,left:Fe}}function $e(Fe){return{...Fe,top:Fe.y,left:Fe.x,right:Fe.x+Fe.width,bottom:Fe.y+Fe.height}}function pt(Fe,Oe,xt){let{reference:ct,floating:Jt}=Fe;const ii=J(Oe),gt=re(Oe),Gt=le(gt),ei=Z(Oe),ki=ii==="y",gn=ct.x+ct.width/2-Jt.width/2,$i=ct.y+ct.height/2-Jt.height/2,Ei=ct[Gt]/2-Jt[Gt]/2;let Vi;switch(ei){case"top":Vi={x:gn,y:ct.y-Jt.height};break;case"bottom":Vi={x:gn,y:ct.y+ct.height};break;case"right":Vi={x:ct.x+ct.width,y:$i};break;case"left":Vi={x:ct.x-Jt.width,y:$i};break;default:Vi={x:ct.x,y:ct.y}}switch(ee(Oe)){case"start":Vi[gt]-=Ei*(xt&&ki?-1:1);break;case"end":Vi[gt]+=Ei*(xt&&ki?-1:1);break}return Vi}var Dt=async(Fe,Oe,xt)=>{const{placement:ct="bottom",strategy:Jt="absolute",middleware:ii=[],platform:gt}=xt,Gt=ii.filter(Boolean),ei=await(gt.isRTL==null?void 0:gt.isRTL(Oe));let ki=await gt.getElementRects({reference:Fe,floating:Oe,strategy:Jt}),{x:gn,y:$i}=pt(ki,ct,ei),Ei=ct,Vi={},Yi=0;for(let on=0;on<Gt.length;on++){const{name:ca,fn:vn}=Gt[on],{x:$n,y:Zt,data:Ma,reset:nn}=await vn({x:gn,y:$i,initialPlacement:ct,placement:Ei,strategy:Jt,middlewareData:Vi,rects:ki,platform:gt,elements:{reference:Fe,floating:Oe}});if(gn=$n??gn,$i=Zt??$i,Vi={...Vi,[ca]:{...Vi[ca],...Ma}},nn&&Yi<=50){Yi++,typeof nn=="object"&&(nn.placement&&(Ei=nn.placement),nn.rects&&(ki=nn.rects===!0?await gt.getElementRects({reference:Fe,floating:Oe,strategy:Jt}):nn.rects),{x:gn,y:$i}=pt(ki,Ei,ei)),on=-1;continue}}return{x:gn,y:$i,placement:Ei,strategy:Jt,middlewareData:Vi}};async function qe(Fe,Oe){var xt;Oe===void 0&&(Oe={});const{x:ct,y:Jt,platform:ii,rects:gt,elements:Gt,strategy:ei}=Fe,{boundary:ki="clippingAncestors",rootBoundary:gn="viewport",elementContext:$i="floating",altBoundary:Ei=!1,padding:Vi=0}=G(Oe,Fe),Yi=ht(Vi),ca=Gt[Ei?$i==="floating"?"reference":"floating":$i],vn=$e(await ii.getClippingRect({element:(xt=await(ii.isElement==null?void 0:ii.isElement(ca)))==null||xt?ca:ca.contextElement||await(ii.getDocumentElement==null?void 0:ii.getDocumentElement(Gt.floating)),boundary:ki,rootBoundary:gn,strategy:ei})),$n=$i==="floating"?{...gt.floating,x:ct,y:Jt}:gt.reference,Zt=await(ii.getOffsetParent==null?void 0:ii.getOffsetParent(Gt.floating)),Ma=await(ii.isElement==null?void 0:ii.isElement(Zt))?await(ii.getScale==null?void 0:ii.getScale(Zt))||{x:1,y:1}:{x:1,y:1},nn=$e(ii.convertOffsetParentRelativeRectToViewportRelativeRect?await ii.convertOffsetParentRelativeRectToViewportRelativeRect({rect:$n,offsetParent:Zt,strategy:ei}):$n);return{top:(vn.top-nn.top+Yi.top)/Ma.y,bottom:(nn.bottom-vn.bottom+Yi.bottom)/Ma.y,left:(vn.left-nn.left+Yi.left)/Ma.x,right:(nn.right-vn.right+Yi.right)/Ma.x}}var Nt=function(Fe){return Fe===void 0&&(Fe={}),{name:"flip",options:Fe,async fn(Oe){var xt,ct;const{placement:Jt,middlewareData:ii,rects:gt,initialPlacement:Gt,platform:ei,elements:ki}=Oe,{mainAxis:gn=!0,crossAxis:$i=!0,fallbackPlacements:Ei,fallbackStrategy:Vi="bestFit",fallbackAxisSideDirection:Yi="none",flipAlignment:on=!0,...ca}=G(Fe,Oe);if((xt=ii.arrow)!=null&&xt.alignmentOffset)return{};const vn=Z(Jt),$n=Z(Gt)===Gt,Zt=await(ei.isRTL==null?void 0:ei.isRTL(ki.floating)),Ma=Ei||($n||!on?[We(Gt)]:me(Gt));!Ei&&Yi!=="none"&&Ma.push(...Re(Gt,on,Yi,Zt));const nn=[Gt,...Ma],Za=await qe(Oe,ca),er=[];let qn=((ct=ii.flip)==null?void 0:ct.overflows)||[];if(gn&&er.push(Za[vn]),$i){const bn=ae(Jt,gt,Zt);er.push(Za[bn[0]],Za[bn[1]])}if(qn=[...qn,{placement:Jt,overflows:er}],!er.every(bn=>bn<=0)){var Zn,kn;const bn=(((Zn=ii.flip)==null?void 0:Zn.index)||0)+1,ks=nn[bn];if(ks)return{data:{index:bn,overflows:qn},reset:{placement:ks}};let Bn=(kn=qn.filter(os=>os.overflows[0]<=0).sort((os,ls)=>os.overflows[1]-ls.overflows[1])[0])==null?void 0:kn.placement;if(!Bn)switch(Vi){case"bestFit":{var Oo;const os=(Oo=qn.map(ls=>[ls.placement,ls.overflows.filter(ha=>ha>0).reduce((ha,Ga)=>ha+Ga,0)]).sort((ls,ha)=>ls[1]-ha[1])[0])==null?void 0:Oo[0];os&&(Bn=os);break}case"initialPlacement":Bn=Gt;break}if(Jt!==Bn)return{reset:{placement:Bn}}}return{}}}};async function ni(Fe,Oe){const{placement:xt,platform:ct,elements:Jt}=Fe,ii=await(ct.isRTL==null?void 0:ct.isRTL(Jt.floating)),gt=Z(xt),Gt=ee(xt),ei=J(xt)==="y",ki=["left","top"].includes(gt)?-1:1,gn=ii&&ei?-1:1,$i=G(Oe,Fe);let{mainAxis:Ei,crossAxis:Vi,alignmentAxis:Yi}=typeof $i=="number"?{mainAxis:$i,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...$i};return Gt&&typeof Yi=="number"&&(Vi=Gt==="end"?Yi*-1:Yi),ei?{x:Vi*gn,y:Ei*ki}:{x:Ei*ki,y:Vi*gn}}var xi=function(Fe){return Fe===void 0&&(Fe=0),{name:"offset",options:Fe,async fn(Oe){const{x:xt,y:ct}=Oe,Jt=await ni(Oe,Fe);return{x:xt+Jt.x,y:ct+Jt.y,data:Jt}}}},Lt=function(Fe){return Fe===void 0&&(Fe={}),{name:"shift",options:Fe,async fn(Oe){const{x:xt,y:ct,placement:Jt}=Oe,{mainAxis:ii=!0,crossAxis:gt=!1,limiter:Gt={fn:ca=>{let{x:vn,y:$n}=ca;return{x:vn,y:$n}}},...ei}=G(Fe,Oe),ki={x:xt,y:ct},gn=await qe(Oe,ei),$i=J(Z(Jt)),Ei=ie($i);let Vi=ki[Ei],Yi=ki[$i];if(ii){const ca=Ei==="y"?"top":"left",vn=Ei==="y"?"bottom":"right",$n=Vi+gn[ca],Zt=Vi-gn[vn];Vi=U($n,Vi,Zt)}if(gt){const ca=$i==="y"?"top":"left",vn=$i==="y"?"bottom":"right",$n=Yi+gn[ca],Zt=Yi-gn[vn];Yi=U($n,Yi,Zt)}const on=Gt.fn({...Oe,[Ei]:Vi,[$i]:Yi});return{...on,data:{x:on.x-xt,y:on.y-ct}}}}};function Tt(Fe){return bi(Fe)?(Fe.nodeName||"").toLowerCase():"#document"}function wt(Fe){var Oe;return(Fe==null||(Oe=Fe.ownerDocument)==null?void 0:Oe.defaultView)||window}function mi(Fe){var Oe;return(Oe=(bi(Fe)?Fe.ownerDocument:Fe.document)||window.document)==null?void 0:Oe.documentElement}function bi(Fe){return Fe instanceof Node||Fe instanceof wt(Fe).Node}function Zi(Fe){return Fe instanceof Element||Fe instanceof wt(Fe).Element}function Li(Fe){return Fe instanceof HTMLElement||Fe instanceof wt(Fe).HTMLElement}function si(Fe){return typeof ShadowRoot>"u"?!1:Fe instanceof ShadowRoot||Fe instanceof wt(Fe).ShadowRoot}function fn(Fe){const{overflow:Oe,overflowX:xt,overflowY:ct,display:Jt}=qt(Fe);return/auto|scroll|overlay|hidden|clip/.test(Oe+ct+xt)&&!["inline","contents"].includes(Jt)}function Ii(Fe){return["table","td","th"].includes(Tt(Fe))}function Qi(Fe){const Oe=xn(),xt=qt(Fe);return xt.transform!=="none"||xt.perspective!=="none"||(xt.containerType?xt.containerType!=="normal":!1)||!Oe&&(xt.backdropFilter?xt.backdropFilter!=="none":!1)||!Oe&&(xt.filter?xt.filter!=="none":!1)||["transform","perspective","filter"].some(ct=>(xt.willChange||"").includes(ct))||["paint","layout","strict","content"].some(ct=>(xt.contain||"").includes(ct))}function rn(Fe){let Oe=Fi(Fe);for(;Li(Oe)&&!Ye(Oe);){if(Qi(Oe))return Oe;Oe=Fi(Oe)}return null}function xn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ye(Fe){return["html","body","#document"].includes(Tt(Fe))}function qt(Fe){return wt(Fe).getComputedStyle(Fe)}function li(Fe){return Zi(Fe)?{scrollLeft:Fe.scrollLeft,scrollTop:Fe.scrollTop}:{scrollLeft:Fe.pageXOffset,scrollTop:Fe.pageYOffset}}function Fi(Fe){if(Tt(Fe)==="html")return Fe;const Oe=Fe.assignedSlot||Fe.parentNode||si(Fe)&&Fe.host||mi(Fe);return si(Oe)?Oe.host:Oe}function ci(Fe){const Oe=Fi(Fe);return Ye(Oe)?Fe.ownerDocument?Fe.ownerDocument.body:Fe.body:Li(Oe)&&fn(Oe)?Oe:ci(Oe)}function Wi(Fe,Oe,xt){var ct;Oe===void 0&&(Oe=[]),xt===void 0&&(xt=!0);const Jt=ci(Fe),ii=Jt===((ct=Fe.ownerDocument)==null?void 0:ct.body),gt=wt(Jt);return ii?Oe.concat(gt,gt.visualViewport||[],fn(Jt)?Jt:[],gt.frameElement&&xt?Wi(gt.frameElement):[]):Oe.concat(Jt,Wi(Jt,[],xt))}function wi(Fe){const Oe=qt(Fe);let xt=parseFloat(Oe.width)||0,ct=parseFloat(Oe.height)||0;const Jt=Li(Fe),ii=Jt?Fe.offsetWidth:xt,gt=Jt?Fe.offsetHeight:ct,Gt=S(xt)!==ii||S(ct)!==gt;return Gt&&(xt=ii,ct=gt),{width:xt,height:ct,$:Gt}}function Ti(Fe){return Zi(Fe)?Fe:Fe.contextElement}function Di(Fe){const Oe=Ti(Fe);if(!Li(Oe))return z(1);const xt=Oe.getBoundingClientRect(),{width:ct,height:Jt,$:ii}=wi(Oe);let gt=(ii?S(xt.width):xt.width)/ct,Gt=(ii?S(xt.height):xt.height)/Jt;return(!gt||!Number.isFinite(gt))&&(gt=1),(!Gt||!Number.isFinite(Gt))&&(Gt=1),{x:gt,y:Gt}}var dt=z(0);function xe(Fe){const Oe=wt(Fe);return!xn()||!Oe.visualViewport?dt:{x:Oe.visualViewport.offsetLeft,y:Oe.visualViewport.offsetTop}}function be(Fe,Oe,xt){return Oe===void 0&&(Oe=!1),!xt||Oe&&xt!==wt(Fe)?!1:Oe}function Ce(Fe,Oe,xt,ct){Oe===void 0&&(Oe=!1),xt===void 0&&(xt=!1);const Jt=Fe.getBoundingClientRect(),ii=Ti(Fe);let gt=z(1);Oe&&(ct?Zi(ct)&&(gt=Di(ct)):gt=Di(Fe));const Gt=be(ii,xt,ct)?xe(ii):z(0);let ei=(Jt.left+Gt.x)/gt.x,ki=(Jt.top+Gt.y)/gt.y,gn=Jt.width/gt.x,$i=Jt.height/gt.y;if(ii){const Ei=wt(ii),Vi=ct&&Zi(ct)?wt(ct):ct;let Yi=Ei.frameElement;for(;Yi&&ct&&Vi!==Ei;){const on=Di(Yi),ca=Yi.getBoundingClientRect(),vn=qt(Yi),$n=ca.left+(Yi.clientLeft+parseFloat(vn.paddingLeft))*on.x,Zt=ca.top+(Yi.clientTop+parseFloat(vn.paddingTop))*on.y;ei*=on.x,ki*=on.y,gn*=on.x,$i*=on.y,ei+=$n,ki+=Zt,Yi=wt(Yi).frameElement}}return $e({width:gn,height:$i,x:ei,y:ki})}function tt(Fe){let{rect:Oe,offsetParent:xt,strategy:ct}=Fe;const Jt=Li(xt),ii=mi(xt);if(xt===ii)return Oe;let gt={scrollLeft:0,scrollTop:0},Gt=z(1);const ei=z(0);if((Jt||!Jt&&ct!=="fixed")&&((Tt(xt)!=="body"||fn(ii))&&(gt=li(xt)),Li(xt))){const ki=Ce(xt);Gt=Di(xt),ei.x=ki.x+xt.clientLeft,ei.y=ki.y+xt.clientTop}return{width:Oe.width*Gt.x,height:Oe.height*Gt.y,x:Oe.x*Gt.x-gt.scrollLeft*Gt.x+ei.x,y:Oe.y*Gt.y-gt.scrollTop*Gt.y+ei.y}}function rt(Fe){return Array.from(Fe.getClientRects())}function St(Fe){return Ce(mi(Fe)).left+li(Fe).scrollLeft}function yt(Fe){const Oe=mi(Fe),xt=li(Fe),ct=Fe.ownerDocument.body,Jt=x(Oe.scrollWidth,Oe.clientWidth,ct.scrollWidth,ct.clientWidth),ii=x(Oe.scrollHeight,Oe.clientHeight,ct.scrollHeight,ct.clientHeight);let gt=-xt.scrollLeft+St(Fe);const Gt=-xt.scrollTop;return qt(ct).direction==="rtl"&&(gt+=x(Oe.clientWidth,ct.clientWidth)-Jt),{width:Jt,height:ii,x:gt,y:Gt}}function He(Fe,Oe){const xt=wt(Fe),ct=mi(Fe),Jt=xt.visualViewport;let ii=ct.clientWidth,gt=ct.clientHeight,Gt=0,ei=0;if(Jt){ii=Jt.width,gt=Jt.height;const ki=xn();(!ki||ki&&Oe==="fixed")&&(Gt=Jt.offsetLeft,ei=Jt.offsetTop)}return{width:ii,height:gt,x:Gt,y:ei}}function _t(Fe,Oe){const xt=Ce(Fe,!0,Oe==="fixed"),ct=xt.top+Fe.clientTop,Jt=xt.left+Fe.clientLeft,ii=Li(Fe)?Di(Fe):z(1),gt=Fe.clientWidth*ii.x,Gt=Fe.clientHeight*ii.y,ei=Jt*ii.x,ki=ct*ii.y;return{width:gt,height:Gt,x:ei,y:ki}}function Ut(Fe,Oe,xt){let ct;if(Oe==="viewport")ct=He(Fe,xt);else if(Oe==="document")ct=yt(mi(Fe));else if(Zi(Oe))ct=_t(Oe,xt);else{const Jt=xe(Fe);ct={...Oe,x:Oe.x-Jt.x,y:Oe.y-Jt.y}}return $e(ct)}function Et(Fe,Oe){const xt=Fi(Fe);return xt===Oe||!Zi(xt)||Ye(xt)?!1:qt(xt).position==="fixed"||Et(xt,Oe)}function It(Fe,Oe){const xt=Oe.get(Fe);if(xt)return xt;let ct=Wi(Fe,[],!1).filter(Gt=>Zi(Gt)&&Tt(Gt)!=="body"),Jt=null;const ii=qt(Fe).position==="fixed";let gt=ii?Fi(Fe):Fe;for(;Zi(gt)&&!Ye(gt);){const Gt=qt(gt),ei=Qi(gt);!ei&&Gt.position==="fixed"&&(Jt=null),(ii?!ei&&!Jt:!ei&&Gt.position==="static"&&!!Jt&&["absolute","fixed"].includes(Jt.position)||fn(gt)&&!ei&&Et(Fe,gt))?ct=ct.filter(gn=>gn!==gt):Jt=Gt,gt=Fi(gt)}return Oe.set(Fe,ct),ct}function ai(Fe){let{element:Oe,boundary:xt,rootBoundary:ct,strategy:Jt}=Fe;const gt=[...xt==="clippingAncestors"?It(Oe,this._c):[].concat(xt),ct],Gt=gt[0],ei=gt.reduce((ki,gn)=>{const $i=Ut(Oe,gn,Jt);return ki.top=x($i.top,ki.top),ki.right=y($i.right,ki.right),ki.bottom=y($i.bottom,ki.bottom),ki.left=x($i.left,ki.left),ki},Ut(Oe,Gt,Jt));return{width:ei.right-ei.left,height:ei.bottom-ei.top,x:ei.left,y:ei.top}}function Si(Fe){return wi(Fe)}function Ai(Fe,Oe,xt){const ct=Li(Oe),Jt=mi(Oe),ii=xt==="fixed",gt=Ce(Fe,!0,ii,Oe);let Gt={scrollLeft:0,scrollTop:0};const ei=z(0);if(ct||!ct&&!ii)if((Tt(Oe)!=="body"||fn(Jt))&&(Gt=li(Oe)),ct){const ki=Ce(Oe,!0,ii,Oe);ei.x=ki.x+Oe.clientLeft,ei.y=ki.y+Oe.clientTop}else Jt&&(ei.x=St(Jt));return{x:gt.left+Gt.scrollLeft-ei.x,y:gt.top+Gt.scrollTop-ei.y,width:gt.width,height:gt.height}}function Mn(Fe,Oe){return!Li(Fe)||qt(Fe).position==="fixed"?null:Oe?Oe(Fe):Fe.offsetParent}function Mt(Fe,Oe){const xt=wt(Fe);if(!Li(Fe))return xt;let ct=Mn(Fe,Oe);for(;ct&&Ii(ct)&&qt(ct).position==="static";)ct=Mn(ct,Oe);return ct&&(Tt(ct)==="html"||Tt(ct)==="body"&&qt(ct).position==="static"&&!Qi(ct))?xt:ct||rn(Fe)||xt}var Dn=async function(Fe){let{reference:Oe,floating:xt,strategy:ct}=Fe;const Jt=this.getOffsetParent||Mt,ii=this.getDimensions;return{reference:Ai(Oe,await Jt(xt),ct),floating:{x:0,y:0,...await ii(xt)}}};function Yn(Fe){return qt(Fe).direction==="rtl"}var _n={convertOffsetParentRelativeRectToViewportRelativeRect:tt,getDocumentElement:mi,getClippingRect:ai,getOffsetParent:Mt,getElementRects:Dn,getClientRects:rt,getDimensions:Si,getScale:Di,isElement:Zi,isRTL:Yn};function pn(Fe,Oe){let xt=null,ct;const Jt=mi(Fe);function ii(){clearTimeout(ct),xt&&xt.disconnect(),xt=null}function gt(Gt,ei){Gt===void 0&&(Gt=!1),ei===void 0&&(ei=1),ii();const{left:ki,top:gn,width:$i,height:Ei}=Fe.getBoundingClientRect();if(Gt||Oe(),!$i||!Ei)return;const Vi=E(gn),Yi=E(Jt.clientWidth-(ki+$i)),on=E(Jt.clientHeight-(gn+Ei)),ca=E(ki),$n={rootMargin:-Vi+"px "+-Yi+"px "+-on+"px "+-ca+"px",threshold:x(0,y(1,ei))||1};let Zt=!0;function Ma(nn){const Za=nn[0].intersectionRatio;if(Za!==ei){if(!Zt)return gt();Za?gt(!1,Za):ct=setTimeout(()=>{gt(!1,1e-7)},100)}Zt=!1}try{xt=new IntersectionObserver(Ma,{...$n,root:Jt.ownerDocument})}catch{xt=new IntersectionObserver(Ma,$n)}xt.observe(Fe)}return gt(!0),ii}function Bi(Fe,Oe,xt,ct){ct===void 0&&(ct={});const{ancestorScroll:Jt=!0,ancestorResize:ii=!0,elementResize:gt=typeof ResizeObserver=="function",layoutShift:Gt=typeof IntersectionObserver=="function",animationFrame:ei=!1}=ct,ki=Ti(Fe),gn=Jt||ii?[...ki?Wi(ki):[],...Wi(Oe)]:[];gn.forEach(vn=>{Jt&&vn.addEventListener("scroll",xt,{passive:!0}),ii&&vn.addEventListener("resize",xt)});const $i=ki&&Gt?pn(ki,xt):null;let Ei=-1,Vi=null;gt&&(Vi=new ResizeObserver(vn=>{let[$n]=vn;$n&&$n.target===ki&&Vi&&(Vi.unobserve(Oe),cancelAnimationFrame(Ei),Ei=requestAnimationFrame(()=>{Vi&&Vi.observe(Oe)})),xt()}),ki&&!ei&&Vi.observe(ki),Vi.observe(Oe));let Yi,on=ei?Ce(Fe):null;ei&&ca();function ca(){const vn=Ce(Fe);on&&(vn.x!==on.x||vn.y!==on.y||vn.width!==on.width||vn.height!==on.height)&&xt(),on=vn,Yi=requestAnimationFrame(ca)}return xt(),()=>{gn.forEach(vn=>{Jt&&vn.removeEventListener("scroll",xt),ii&&vn.removeEventListener("resize",xt)}),$i&&$i(),Vi&&Vi.disconnect(),Vi=null,ei&&cancelAnimationFrame(Yi)}}var Oi=(Fe,Oe,xt)=>{const ct=new Map,Jt={platform:_n,...xt},ii={...Jt.platform,_c:ct};return Dt(Fe,Oe,{...Jt,platform:ii})};function mn(Fe){Fe.magic("anchor",Oe=>{if(!Oe._x_anchor)throw"Alpine: No x-anchor directive found on element using $anchor...";return Oe._x_anchor}),Fe.interceptClone((Oe,xt)=>{Oe&&Oe._x_anchor&&!xt._x_anchor&&(xt._x_anchor=Oe._x_anchor)}),Fe.directive("anchor",Fe.skipDuringClone((Oe,{expression:xt,modifiers:ct,value:Jt},{cleanup:ii,evaluate:gt})=>{let{placement:Gt,offsetValue:ei,unstyled:ki}=Xi(ct);Oe._x_anchor=Fe.reactive({x:0,y:0});let gn=gt(xt);if(!gn)throw"Alpine: no element provided to x-anchor...";let $i=()=>{let Vi;Oi(gn,Oe,{placement:Gt,middleware:[Nt(),Lt({padding:5}),xi(ei)]}).then(({x:Yi,y:on})=>{ki||hi(Oe,Yi,on),JSON.stringify({x:Yi,y:on})!==Vi&&(Oe._x_anchor.x=Yi,Oe._x_anchor.y=on),Vi=JSON.stringify({x:Yi,y:on})})},Ei=Bi(gn,Oe,()=>$i());ii(()=>Ei())},(Oe,{expression:xt,modifiers:ct,value:Jt},{cleanup:ii,evaluate:gt})=>{let{unstyled:Gt}=Xi(ct);Oe._x_anchor&&(Gt||hi(Oe,Oe._x_anchor.x,Oe._x_anchor.y))}))}function hi(Fe,Oe,xt){Object.assign(Fe.style,{left:Oe+"px",top:xt+"px",position:"absolute"})}function Xi(Fe){let xt=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"].find(ii=>Fe.includes(ii)),ct=0;if(Fe.includes("offset")){let ii=Fe.findIndex(gt=>gt==="offset");ct=Fe[ii+1]!==void 0?Number(Fe[ii+1]):ct}let Jt=Fe.includes("no-style");return{placement:xt,offsetValue:ct,unstyled:Jt}}var sn=mn}}),o6=Gu({"node_modules/nprogress/nprogress.js"(a,e){(function(t,i){typeof define=="function"&&define.amd?define(i):typeof a=="object"?e.exports=i():t.NProgress=i()})(a,function(){var t={};t.version="0.2.0";var i=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};t.configure=function(z){var D,F;for(D in z)F=z[D],F!==void 0&&z.hasOwnProperty(D)&&(i[D]=F);return this},t.status=null,t.set=function(z){var D=t.isStarted();z=n(z,i.minimum,1),t.status=z===1?null:z;var F=t.render(!D),U=F.querySelector(i.barSelector),G=i.speed,Z=i.easing;return F.offsetWidth,s(function(ee){i.positionUsing===""&&(i.positionUsing=t.getPositioningCSS()),h(U,o(z,G,Z)),z===1?(h(F,{transition:"none",opacity:1}),F.offsetWidth,setTimeout(function(){h(F,{transition:"all "+G+"ms linear",opacity:0}),setTimeout(function(){t.remove(),ee()},G)},G)):setTimeout(ee,G)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var z=function(){setTimeout(function(){t.status&&(t.trickle(),z())},i.trickleSpeed)};return i.trickle&&z(),this},t.done=function(z){return!z&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(z){var D=t.status;return D?(typeof z!="number"&&(z=(1-D)*n(Math.random()*D,.1,.95)),D=n(D+z,0,.994),t.set(D)):t.start()},t.trickle=function(){return t.inc(Math.random()*i.trickleRate)},(function(){var z=0,D=0;t.promise=function(F){return!F||F.state()==="resolved"?this:(D===0&&t.start(),z++,D++,F.always(function(){D--,D===0?(z=0,t.done()):t.set((z-D)/z)}),this)}})(),t.render=function(z){if(t.isRendered())return document.getElementById("nprogress");y(document.documentElement,"nprogress-busy");var D=document.createElement("div");D.id="nprogress",D.innerHTML=i.template;var F=D.querySelector(i.barSelector),U=z?"-100":r(t.status||0),G=document.querySelector(i.parent),Z;return h(F,{transition:"all 0 linear",transform:"translate3d("+U+"%,0,0)"}),i.showSpinner||(Z=D.querySelector(i.spinnerSelector),Z&&E(Z)),G!=document.body&&y(G,"nprogress-custom-parent"),G.appendChild(D),D},t.remove=function(){x(document.documentElement,"nprogress-busy"),x(document.querySelector(i.parent),"nprogress-custom-parent");var z=document.getElementById("nprogress");z&&E(z)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var z=document.body.style,D="WebkitTransform"in z?"Webkit":"MozTransform"in z?"Moz":"msTransform"in z?"ms":"OTransform"in z?"O":"";return D+"Perspective"in z?"translate3d":D+"Transform"in z?"translate":"margin"};function n(z,D,F){return z<D?D:z>F?F:z}function r(z){return(-1+z)*100}function o(z,D,F){var U;return i.positionUsing==="translate3d"?U={transform:"translate3d("+r(z)+"%,0,0)"}:i.positionUsing==="translate"?U={transform:"translate("+r(z)+"%,0)"}:U={"margin-left":r(z)+"%"},U.transition="all "+D+"ms "+F,U}var s=(function(){var z=[];function D(){var F=z.shift();F&&F(D)}return function(F){z.push(F),z.length==1&&D()}})(),h=(function(){var z=["Webkit","O","Moz","ms"],D={};function F(ee){return ee.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(ie,le){return le.toUpperCase()})}function U(ee){var ie=document.body.style;if(ee in ie)return ee;for(var le=z.length,J=ee.charAt(0).toUpperCase()+ee.slice(1),re;le--;)if(re=z[le]+J,re in ie)return re;return ee}function G(ee){return ee=F(ee),D[ee]||(D[ee]=U(ee))}function Z(ee,ie,le){ie=G(ie),ee.style[ie]=le}return function(ee,ie){var le=arguments,J,re;if(le.length==2)for(J in ie)re=ie[J],re!==void 0&&ie.hasOwnProperty(J)&&Z(ee,J,re);else Z(ee,le[1],le[2])}})();function f(z,D){var F=typeof z=="string"?z:S(z);return F.indexOf(" "+D+" ")>=0}function y(z,D){var F=S(z),U=F+D;f(F,D)||(z.className=U.substring(1))}function x(z,D){var F=S(z),U;f(z,D)&&(U=F.replace(" "+D+" "," "),z.className=U.substring(1,U.length-1))}function S(z){return(" "+(z.className||"")+" ").replace(/\s+/gi," ")}function E(z){z&&z.parentNode&&z.parentNode.removeChild(z)}return t})}}),l6=Gu({"node_modules/@alpinejs/morph/dist/module.cjs.js"(a,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(ae,me)=>{for(var Te in me)t(ae,Te,{get:me[Te],enumerable:!0})},s=(ae,me,Te,ye)=>{if(me&&typeof me=="object"||typeof me=="function")for(let Re of n(me))!r.call(ae,Re)&&Re!==Te&&t(ae,Re,{get:()=>me[Re],enumerable:!(ye=i(me,Re))||ye.enumerable});return ae},h=ae=>s(t({},"__esModule",{value:!0}),ae),f={};o(f,{default:()=>re,morph:()=>J}),e.exports=h(f);function y(ae,me,Te){ie();let ye=S(Te),Re=typeof me=="string"?F(me):me;return window.Alpine&&window.Alpine.closestDataStack&&!ae._x_dataStack&&(Re._x_dataStack=window.Alpine.closestDataStack(ae),Re._x_dataStack&&window.Alpine.cloneNode(ae,Re)),ye.patch(ae,Re),ae}function x(ae,me,Te,ye={}){ie();let Re=S(ye),We=ae.parentNode,Le=new G(ae,me),ht=typeof Te=="string"?(()=>{let qe=document.createElement("div");return qe.insertAdjacentHTML("beforeend",Te),qe})():Te,$e=document.createComment("[morph-start]"),pt=document.createComment("[morph-end]");ht.insertBefore($e,ht.firstChild),ht.appendChild(pt);let Dt=new G($e,pt);window.Alpine&&window.Alpine.closestDataStack&&(ht._x_dataStack=window.Alpine.closestDataStack(We),ht._x_dataStack&&window.Alpine.cloneNode(We,ht)),Re.patchChildren(Le,Dt)}function S(ae={}){let me=Re=>Re.getAttribute("key"),Te=()=>{},ye={key:ae.key||me,lookahead:ae.lookahead||!1,updating:ae.updating||Te,updated:ae.updated||Te,removing:ae.removing||Te,removed:ae.removed||Te,adding:ae.adding||Te,added:ae.added||Te};return ye.patch=function(Re,We){if(ye.differentElementNamesTypesOrKeys(Re,We))return ye.swapElements(Re,We);let Le=!1,ht=!1,$e=pt=>ye.skipUntilCondition=pt;if(!z(ye.updating,()=>ht=!0,$e,Re,We,()=>Le=!0)){if(Re.nodeType===1&&window.Alpine&&(window.Alpine.cloneNode(Re,We),Re._x_teleport&&We._x_teleport&&ye.patch(Re._x_teleport,We._x_teleport)),U(We)){ye.patchNodeValue(Re,We),ye.updated(Re,We);return}Le||ye.patchAttributes(Re,We),ye.updated(Re,We),ht||ye.patchChildren(Re,We)}},ye.differentElementNamesTypesOrKeys=function(Re,We){return Re.nodeType!=We.nodeType||Re.nodeName!=We.nodeName||ye.getKey(Re)!=ye.getKey(We)},ye.swapElements=function(Re,We){if(E(ye.removing,Re))return;let Le=We.cloneNode(!0);E(ye.adding,Le)||(Re.replaceWith(Le),ye.removed(Re),ye.added(Le))},ye.patchNodeValue=function(Re,We){let Le=We.nodeValue;Re.nodeValue!==Le&&(Re.nodeValue=Le)},ye.patchAttributes=function(Re,We){if(Re._x_transitioning||Re._x_isShown&&!We._x_isShown||!Re._x_isShown&&We._x_isShown)return;let Le=Array.from(Re.attributes),ht=Array.from(We.attributes);for(let $e=Le.length-1;$e>=0;$e--){let pt=Le[$e].name;We.hasAttribute(pt)||Re.removeAttribute(pt)}for(let $e=ht.length-1;$e>=0;$e--){let pt=ht[$e].name,Dt=ht[$e].value;Re.getAttribute(pt)!==Dt&&Re.setAttribute(pt,Dt)}},ye.patchChildren=function(Re,We){let Le=ye.keyToMap(Re.children),ht={},$e=Z(We),pt=Z(Re);for(;$e;){le($e,pt);let qe=ye.getKey($e),Nt=ye.getKey(pt);if(ye.skipUntilCondition){let Tt=!pt||ye.skipUntilCondition(pt),wt=!$e||ye.skipUntilCondition($e);if(Tt&&wt)ye.skipUntilCondition=null;else{Tt||(pt=pt&&ee(Re,pt)),wt||($e=$e&&ee(We,$e));continue}}if(!pt)if(qe&&ht[qe]){let Tt=ht[qe];Re.appendChild(Tt),pt=Tt,Nt=ye.getKey(pt)}else{if(!E(ye.adding,$e)){let Tt=$e.cloneNode(!0);Re.appendChild(Tt),ye.added(Tt)}$e=ee(We,$e);continue}let ni=Tt=>Tt&&Tt.nodeType===8&&Tt.textContent==="[if BLOCK]><![endif]",xi=Tt=>Tt&&Tt.nodeType===8&&Tt.textContent==="[if ENDBLOCK]><![endif]";if(ni($e)&&ni(pt)){let Tt=0,wt=pt;for(;pt;){let fn=ee(Re,pt);if(ni(fn))Tt++;else if(xi(fn)&&Tt>0)Tt--;else if(xi(fn)&&Tt===0){pt=fn;break}pt=fn}let mi=pt;Tt=0;let bi=$e;for(;$e;){let fn=ee(We,$e);if(ni(fn))Tt++;else if(xi(fn)&&Tt>0)Tt--;else if(xi(fn)&&Tt===0){$e=fn;break}$e=fn}let Zi=$e,Li=new G(wt,mi),si=new G(bi,Zi);ye.patchChildren(Li,si);continue}if(pt.nodeType===1&&ye.lookahead&&!pt.isEqualNode($e)){let Tt=ee(We,$e),wt=!1;for(;!wt&&Tt;)Tt.nodeType===1&&pt.isEqualNode(Tt)&&(wt=!0,pt=ye.addNodeBefore(Re,$e,pt),Nt=ye.getKey(pt)),Tt=ee(We,Tt)}if(qe!==Nt){if(!qe&&Nt){ht[Nt]=pt,pt=ye.addNodeBefore(Re,$e,pt),ht[Nt].remove(),pt=ee(Re,pt),$e=ee(We,$e);continue}if(qe&&!Nt&&Le[qe]&&(pt.replaceWith(Le[qe]),pt=Le[qe],Nt=ye.getKey(pt)),qe&&Nt){let Tt=Le[qe];if(Tt)ht[Nt]=pt,pt.replaceWith(Tt),pt=Tt,Nt=ye.getKey(pt);else{ht[Nt]=pt,pt=ye.addNodeBefore(Re,$e,pt),ht[Nt].remove(),pt=ee(Re,pt),$e=ee(We,$e);continue}}}let Lt=pt&&ee(Re,pt);ye.patch(pt,$e),$e=$e&&ee(We,$e),pt=Lt}let Dt=[];for(;pt;)E(ye.removing,pt)||Dt.push(pt),pt=ee(Re,pt);for(;Dt.length;){let qe=Dt.shift();qe.remove(),ye.removed(qe)}},ye.getKey=function(Re){return Re&&Re.nodeType===1&&ye.key(Re)},ye.keyToMap=function(Re){let We={};for(let Le of Re){let ht=ye.getKey(Le);ht&&(We[ht]=Le)}return We},ye.addNodeBefore=function(Re,We,Le){if(!E(ye.adding,We)){let ht=We.cloneNode(!0);return Re.insertBefore(ht,Le),ye.added(ht),ht}return We},ye}y.step=()=>{},y.log=()=>{};function E(ae,...me){let Te=!1;return ae(...me,()=>Te=!0),Te}function z(ae,me,Te,...ye){let Re=!1;return ae(...ye,()=>Re=!0,me,Te),Re}var D=!1;function F(ae){const me=document.createElement("template");return me.innerHTML=ae,me.content.firstElementChild}function U(ae){return ae.nodeType===3||ae.nodeType===8}var G=class{constructor(ae,me){this.startComment=ae,this.endComment=me}get children(){let ae=[],me=this.startComment.nextSibling;for(;me&&me!==this.endComment;)ae.push(me),me=me.nextSibling;return ae}appendChild(ae){this.endComment.before(ae)}get firstChild(){let ae=this.startComment.nextSibling;if(ae!==this.endComment)return ae}nextNode(ae){let me=ae.nextSibling;if(me!==this.endComment)return me}insertBefore(ae,me){return me.before(ae),ae}};function Z(ae){return ae.firstChild}function ee(ae,me){let Te;return ae instanceof G?Te=ae.nextNode(me):Te=me.nextSibling,Te}function ie(){if(D)return;D=!0;let ae=Element.prototype.setAttribute,me=document.createElement("div");Element.prototype.setAttribute=function(ye,Re){if(!ye.includes("@"))return ae.call(this,ye,Re);me.innerHTML=`<span ${ye}="${Re}"></span>`;let We=me.firstElementChild.getAttributeNode(ye);me.firstElementChild.removeAttributeNode(We),this.setAttributeNode(We)}}function le(ae,me){let Te=me&&me._x_bindings&&me._x_bindings.id;Te&&ae.setAttribute&&(ae.setAttribute("id",Te),ae.id=Te)}function J(ae){ae.morph=y,ae.morphBetween=x}var re=J}}),c6=Gu({"node_modules/@alpinejs/mask/dist/module.cjs.js"(a,e){var t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(F,U)=>{for(var G in U)t(F,G,{get:U[G],enumerable:!0})},s=(F,U,G,Z)=>{if(U&&typeof U=="object"||typeof U=="function")for(let ee of n(U))!r.call(F,ee)&&ee!==G&&t(F,ee,{get:()=>U[ee],enumerable:!(Z=i(U,ee))||Z.enumerable});return F},h=F=>s(t({},"__esModule",{value:!0}),F),f={};o(f,{default:()=>D,mask:()=>y,stripDown:()=>S}),e.exports=h(f);function y(F){F.directive("mask",(U,{value:G,expression:Z},{effect:ee,evaluateLater:ie,cleanup:le})=>{let J=()=>Z,re="";queueMicrotask(()=>{if(["function","dynamic"].includes(G)){let ye=ie(Z);ee(()=>{J=Re=>{let We;return F.dontAutoEvaluateFunctions(()=>{ye(Le=>{We=typeof Le=="function"?Le(Re):Le},{scope:{$input:Re,$money:z.bind({el:U})}})}),We},me(U,!1)})}else me(U,!1);if(U._x_model){if(U._x_model.get()===U.value||U._x_model.get()===null&&U.value==="")return;U._x_model.set(U.value)}});const ae=new AbortController;le(()=>{ae.abort()}),U.addEventListener("input",()=>me(U),{signal:ae.signal,capture:!0}),U.addEventListener("blur",()=>me(U,!1),{signal:ae.signal});function me(ye,Re=!0){let We=ye.value,Le=J(We);if(!Le||Le==="false")return!1;if(re.length-ye.value.length===1)return re=ye.value;let ht=()=>{re=ye.value=Te(We,Le)};Re?x(ye,Le,()=>{ht()}):ht()}function Te(ye,Re){if(ye==="")return"";let We=S(Re,ye);return E(Re,We)}}).before("model")}function x(F,U,G){let Z=F.selectionStart,ee=F.value;G();let ie=ee.slice(0,Z),le=E(U,S(U,ie)).length;F.setSelectionRange(le,le)}function S(F,U){let G=U,Z="",ee={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},ie="";for(let le=0;le<F.length;le++){if(["9","a","*"].includes(F[le])){ie+=F[le];continue}for(let J=0;J<G.length;J++)if(G[J]===F[le]){G=G.slice(0,J)+G.slice(J+1);break}}for(let le=0;le<ie.length;le++){let J=!1;for(let re=0;re<G.length;re++)if(ee[ie[le]].test(G[re])){Z+=G[re],G=G.slice(0,re)+G.slice(re+1),J=!0;break}if(!J)break}return Z}function E(F,U){let G=Array.from(U),Z="";for(let ee=0;ee<F.length;ee++){if(!["9","a","*"].includes(F[ee])){Z+=F[ee];continue}if(G.length===0)break;Z+=G.shift()}return Z}function z(F,U=".",G,Z=2){if(F==="-")return"-";if(/^\D+$/.test(F))return"9";G==null&&(G=U===","?".":",");let ee=(re,ae)=>{let me="",Te=0;for(let ye=re.length-1;ye>=0;ye--)re[ye]!==ae&&(Te===3?(me=re[ye]+ae+me,Te=0):me=re[ye]+me,Te++);return me},ie=F.startsWith("-")?"-":"",le=F.replaceAll(new RegExp(`[^0-9\\${U}]`,"g"),""),J=Array.from({length:le.split(U)[0].length}).fill("9").join("");return J=`${ie}${ee(J,G)}`,Z>0&&F.includes(U)&&(J+=`${U}`+"9".repeat(Z)),queueMicrotask(()=>{this.el.value.endsWith(U)||this.el.value[this.el.selectionStart-1]===U&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),J}var D=y}}),u6=class{constructor(){this.arrays={}}add(a,e){this.arrays[a]||(this.arrays[a]=[]),this.arrays[a].push(e)}remove(a){this.arrays[a]&&delete this.arrays[a]}get(a){return this.arrays[a]||[]}each(a,e){return this.get(a).forEach(e)}},Qw=class{constructor(){this.arrays=new WeakMap}add(a,e){this.arrays.has(a)||this.arrays.set(a,[]),this.arrays.get(a).push(e)}remove(a){this.arrays.has(a)&&this.arrays.delete(a,[])}get(a){return this.arrays.has(a)?this.arrays.get(a):[]}each(a,e){return this.get(a).forEach(e)}};function cb(a,e,t={},i=!0){a.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:i,composed:!0,cancelable:!0}))}function ub(a,e,t){return a.addEventListener(e,t),()=>a.removeEventListener(e,t)}function eS(a){return typeof a=="object"&&a!==null}function Hp(a){return eS(a)&&!Fu(a)}function Fu(a){return Array.isArray(a)}function FP(a){return typeof a=="function"}function B_(a){return typeof a!="object"||a===null}function tf(a){return JSON.parse(JSON.stringify(a))}function h6(a,e){return JSON.stringify(a)===JSON.stringify(e)}function tS(a){return a===""?[]:a.replace(/\[(['"]?)(.+?)\1\]/g,".$2").replace(/^\./,"").split(".")}function gl(a,e){return e===""?a:tS(e).reduce((t,i)=>t?.[i],a)}function dy(a,e,t){let i=tS(e);if(i.length===1)return a[i[0]]=t;let n=i.shift(),r=i.join("."),o=i[0];a[n]===void 0&&(a[n]={}),Fu(a[n])&&d6(o)&&parseInt(o)>a[n].length&&(a[n]={...a[n]}),dy(a[n],r,t)}function d6(a){return!isNaN(parseInt(a))}function NP(a,e){let t=tS(e);if(t.length===1){Array.isArray(a)?a.splice(t[0],1):delete a[t[0]];return}let i=t.shift(),n=t.join(".");a[i]!==void 0&&NP(a[i],n)}function BP(a,e,t={},i=""){if(a===e)return t;if(typeof a!=typeof e||Hp(a)&&Fu(e)||Fu(a)&&Hp(e)||B_(a)||B_(e))return t[i]=e,t;let n=Object.keys(a);return Object.entries(e).forEach(([r,o])=>{t={...t,...BP(a[r],e[r],t,i===""?r:`${i}.${r}`)},n=n.filter(s=>s!==r)}),n.forEach(r=>{t[`${i}.${r}`]="__rm__"}),t}function f6(a,e){let t={};return jP(a,e,"",t,a,e),t}function jP(a,e,t,i,n,r){if(a===e)return{changed:!1,consolidated:!1};let o=!1,s=D=>Fu(D)&&Object.keys(D).some(F=>isNaN(parseInt(F)));if(typeof a!=typeof e||Hp(a)&&Fu(e)||Fu(a)&&Hp(e))if(Fu(a)&&a.length===0&&Hp(e))a={},o=!0;else if(a==null&&Hp(e))a={},o=!0;else return i[t]=e,{changed:!0,consolidated:!1};if(Fu(a)&&Fu(e)&&s(e)&&Object.keys(a).length===0&&(o=!0),B_(a)||B_(e))return i[t]=e,{changed:!0,consolidated:!1};let h=Object.keys(a),f=Object.keys(e);if(h.length!==f.length&&!o)return t===""?(Object.keys(e).forEach(D=>{h6(a[D],e[D])||(i[D]=e[D])}),{changed:!0,consolidated:!0}):(i[t]=gl(r,t),{changed:!0,consolidated:!0});if(!h.every(D=>f.includes(D))&&!o&&t!=="")return i[t]=gl(r,t),{changed:!0,consolidated:!0};let x={},S=0,E=0,z=f.length;return f.forEach(D=>{let F=t===""?D:`${t}.${D}`,U=jP(a[D],e[D],F,x,n,r);U.changed&&S++,U.consolidated&&E++}),t!==""&&z>1&&S===z&&E===0&&!o?(i[t]=gl(r,t),{changed:!0,consolidated:!0}):(Object.assign(i,x),{changed:S>0,consolidated:E>0})}function Rp(a){let e=sT(a)?a[0]:a;return sT(a)&&a[1],eS(e)&&Object.entries(e).forEach(([t,i])=>{e[t]=Rp(i)}),e}function sT(a){return Array.isArray(a)&&a.length===2&&typeof a[1]=="object"&&Object.keys(a[1]).includes("s")}function VP(){if(document.querySelector('meta[name="csrf-token"]'))return document.querySelector('meta[name="csrf-token"]').getAttribute("content");if(document.querySelector("[data-csrf]"))return document.querySelector("[data-csrf]").getAttribute("data-csrf");if(window.livewireScriptConfig.csrf??!1)return window.livewireScriptConfig.csrf;throw"Livewire: No CSRF token detected"}var Ep;function HP(){if(Ep)return Ep;if(window.livewireScriptConfig&&(window.livewireScriptConfig.nonce??!1))return Ep=window.livewireScriptConfig.nonce,Ep;let a=document.querySelector("style[data-livewire-style][nonce]");return a?(Ep=a.nonce,Ep):null}function b1(){return document.querySelector("[data-module-url]")?.getAttribute("data-module-url")??window.livewireScriptConfig.moduleUrl??null}function p6(){return document.querySelector("[data-update-uri]")?.getAttribute("data-update-uri")??window.livewireScriptConfig.uri??null}function g6(a){return!!a.match(/<script>Sfdump\(".+"\)<\/script>/)}function m6(a){let e=a.match(/.*<script>Sfdump\(".+"\)<\/script>/s);return[e,a.replace(e,"")]}function y6(a,e){let t=a;for(;t;){let i;if(e(t,{stop:n=>n===void 0?i=t:i=n}),i!==void 0)return i;t._x_teleportBack&&(t=t._x_teleportBack),t=t.parentElement}}function _6(a,e){let t=a;for(;t;){let i;if(e(t,{stop:n=>n===void 0?i=t:i=n}),i!==void 0)return i;t=t.previousSibling}}var hb=new WeakMap;function Ay(a){if(!hb.has(a)){let e=new v6(a);hb.set(a,e),e.registerListeners()}return hb.get(a)}function x6(a,e,t,i){let n=Ay(t),r=()=>a.dispatchEvent(new CustomEvent("livewire-upload-start",{bubbles:!0,detail:{id:t.id,property:e}})),o=()=>a.dispatchEvent(new CustomEvent("livewire-upload-finish",{bubbles:!0,detail:{id:t.id,property:e}})),s=()=>a.dispatchEvent(new CustomEvent("livewire-upload-error",{bubbles:!0,detail:{id:t.id,property:e}})),h=()=>a.dispatchEvent(new CustomEvent("livewire-upload-cancel",{bubbles:!0,detail:{id:t.id,property:e}})),f=S=>{var E=Math.round(S.loaded*100/S.total);a.dispatchEvent(new CustomEvent("livewire-upload-progress",{bubbles:!0,detail:{progress:E}}))},y=S=>{S.target.files.length!==0&&(r(),S.target.multiple?n.uploadMultiple(e,S.target.files,o,s,f,h):n.upload(e,S.target.files[0],o,s,f,h))};a.addEventListener("change",y),t.$wire.$watch(e,S=>{a.isConnected&&((S===null||S==="")&&(a.value=""),a.multiple&&Array.isArray(S)&&S.length===0&&(a.value=""))});let x=()=>{a.value=null};a.addEventListener("click",x),a.addEventListener("livewire-upload-cancel",x),i(()=>{a.removeEventListener("change",y),a.removeEventListener("click",x)})}var v6=class{constructor(a){this.component=a,this.uploadBag=new oT,this.removeBag=new oT}registerListeners(){this.component.$wire.$on("upload:generatedSignedUrl",({name:a,url:e})=>{this.component,this.handleSignedUrl(a,e)}),this.component.$wire.$on("upload:generatedSignedUrlForS3",({name:a,payload:e})=>{this.component,this.handleS3PreSignedUrl(a,e)}),this.component.$wire.$on("upload:finished",({name:a,tmpFilenames:e})=>this.markUploadFinished(a,e)),this.component.$wire.$on("upload:errored",({name:a})=>this.markUploadErrored(a)),this.component.$wire.$on("upload:removed",({name:a,tmpFilename:e})=>this.removeBag.shift(a).finishCallback(e))}upload(a,e,t,i,n,r){this.setUpload(a,{files:[e],multiple:!1,finishCallback:t,errorCallback:i,progressCallback:n,cancelledCallback:r,append:!1})}uploadMultiple(a,e,t,i,n,r,o=!0){this.setUpload(a,{files:Array.from(e),multiple:!0,finishCallback:t,errorCallback:i,progressCallback:n,cancelledCallback:r,append:o})}removeUpload(a,e,t){this.removeBag.push(a,{tmpFilename:e,finishCallback:t}),this.component.$wire.call("_removeUpload",a,e)}setUpload(a,e){this.uploadBag.add(a,e),this.uploadBag.get(a).length===1&&this.startUpload(a,e)}handleSignedUrl(a,e){let t=new FormData;Array.from(this.uploadBag.first(a).files).forEach(r=>t.append("files[]",r,r.name));let i={Accept:"application/json"},n=VP();n&&(i["X-CSRF-TOKEN"]=n),this.makeRequest(a,t,"post",e,i,r=>r.paths)}handleS3PreSignedUrl(a,e){let t=this.uploadBag.first(a).files[0],i=e.headers;"Host"in i&&delete i.Host;let n=e.url;this.makeRequest(a,t,"put",n,i,r=>[e.path])}makeRequest(a,e,t,i,n,r){let o=new XMLHttpRequest;o.open(t,i),Object.entries(n).forEach(([s,h])=>{o.setRequestHeader(s,h)}),o.upload.addEventListener("progress",s=>{s.detail={},s.detail.progress=Math.floor(s.loaded*100/s.total),this.uploadBag.first(a).progressCallback(s)}),o.addEventListener("load",()=>{if((o.status+"")[0]==="2"){let h=r(o.response&&JSON.parse(o.response));this.component.$wire.call("_finishUpload",a,h,this.uploadBag.first(a).multiple,this.uploadBag.first(a).append);return}let s=null;o.status===422&&(s=o.response),this.component.$wire.call("_uploadErrored",a,s,this.uploadBag.first(a).multiple)}),this.uploadBag.first(a).request=o,o.send(e)}startUpload(a,e){let t=e.files.map(i=>({name:i.name,size:i.size,type:i.type}));this.component.$wire.call("_startUpload",a,t,e.multiple),this.component}markUploadFinished(a,e){this.component;let t=this.uploadBag.shift(a);t.finishCallback(t.multiple?e:e[0]),this.uploadBag.get(a).length>0&&this.startUpload(a,this.uploadBag.last(a))}markUploadErrored(a){this.component,this.uploadBag.shift(a).errorCallback(),this.uploadBag.get(a).length>0&&this.startUpload(a,this.uploadBag.last(a))}cancelUpload(a,e=null){this.component;let t=this.uploadBag.first(a);t&&(t.request&&t.request.abort(),this.uploadBag.shift(a).cancelledCallback(),e&&e())}},oT=class{constructor(){this.bag={}}add(a,e){this.bag[a]||(this.bag[a]=[]),this.bag[a].push(e)}push(a,e){this.add(a,e)}first(a){return this.bag[a]?this.bag[a][0]:null}last(a){return this.bag[a].slice(-1)[0]}get(a){return this.bag[a]}shift(a){return this.bag[a].shift()}call(a,...e){(this.listeners[a]||[]).forEach(t=>{t(...e)})}has(a){return Object.keys(this.listeners).includes(a)}};function b6(a,e,t,i=()=>{},n=()=>{},r=()=>{},o=()=>{}){Ay(a).upload(e,t,i,n,r,o)}function w6(a,e,t,i=()=>{},n=()=>{},r=()=>{},o=()=>{},s=!0){Ay(a).uploadMultiple(e,t,i,n,r,o,s)}function S6(a,e,t,i=()=>{},n=()=>{}){Ay(a).removeUpload(e,t,i,n)}function k6(a,e,t=()=>{}){Ay(a).cancelUpload(e,t)}var lT=lr(zs());function UP(a,e){return e||(e=()=>{}),(t,i=!1)=>{let n=i,r=t,o=a.$wire,s=o.get(r);return lT.default.interceptor((f,y,x,S,E)=>{if(typeof s>"u"){console.error(`Livewire Entangle Error: Livewire property ['${r}'] cannot be found on component: ['${a.name}']`);return}let z=lT.default.entangle({get(){return o.get(t)},set(D){o.set(t,D,n)}},{get(){return y()},set(D){x(D)}});return e(()=>z()),C6(o.get(t))},f=>{Object.defineProperty(f,"live",{get(){return n=!0,f}})})(s)}}function C6(a){return typeof a=="object"?JSON.parse(JSON.stringify(a)):a}var fy=lr(zs()),pf=[];function Os(a,e){return pf[a]||(pf[a]=[]),pf[a].push(e),()=>{pf[a]=pf[a].filter(t=>t!==e)}}function ws(a,...e){let t=pf[a]||[],i=[];for(let n=0;n<t.length;n++){let r=t[n](...e);FP(r)&&i.push(r)}return n=>GP(i,n)}async function $P(a,...e){let t=pf[a]||[],i=[];for(let n=0;n<t.length;n++){let r=await t[n](...e);FP(r)&&i.push(r)}return n=>GP(i,n)}function GP(a,e){let t=e;for(let i=0;i<a.length;i++){let n=a[i](t);n!==void 0&&(t=n)}return t}function A6(a){fb(({message:e,compileRequest:t})=>{e.component.isIsolated&&t([e])}),fb(({message:e,compileRequest:t})=>{e.component.isLazy&&!e.component.hasBeenLazyLoaded&&e.component.isLazyIsolated&&t([e])}),fb(({message:e,compileRequest:t})=>{let i=e.component,n=[];i.getDeepChildrenWithBindings(r=>{let o=qP(r,"$commit"),s=KP(o);n.push(s)}),n.length>0&&t([e,...n])}),cx(({action:e})=>{e?.origin?.directive?.modifiers.includes("renderless")&&(e.metadata.renderless=!0);let i=a.activeMessageMatchingScope(e);if(i){if(i.isAsync()||e.isAsync())return;if(e.metadata.type==="poll")return e.cancel();if(Array.from(i.actions).every(n=>n.metadata.type==="poll"))return i.cancel();if(Array.from(i.actions).every(n=>n.metadata.type==="model.live")&&e.metadata.type==="model.live")return;e.defer(),i.addInterceptor(({onFinish:n})=>{n(()=>e.fire())})}})}var cT=class{messages=new Set;controller=new AbortController;interceptors=[];cancelled=!1;uri=null;payload=null;options=null;addMessage(a){a.setRequest(this),this.messages.add(a)}getActiveMessages(){return new Set([...this.messages].filter(a=>!a.isCancelled()))}initInterceptors(a){this.interceptors=a.getRequestInterceptors(this),this.messages.forEach(e=>{let t=a.getMessageInterceptors(e);e.setInterceptors(t)}),this.interceptors.forEach(e=>e.init()),this.messages.forEach(e=>{e.getInterceptors().forEach(t=>t.init())})}cancel(){this.cancelled||(this.cancelled=!0,this.controller.abort(),this.messages.forEach(a=>{a.isCancelled()||a.cancel()}))}hasAllCancelledMessages(){return this.getActiveMessages().size===0}isCancelled(){return this.cancelled}invokeOnSend({responsePromise:a}){this.interceptors.forEach(e=>e.onSend({responsePromise:a})),this.messages.forEach(e=>e.invokeOnSend())}invokeOnCancel(){this.interceptors.forEach(a=>a.onCancel())}invokeOnFailure({error:a}){this.interceptors.forEach(e=>e.onFailure({error:a})),this.messages.forEach(e=>e.invokeOnFailure(a))}invokeOnResponse({response:a}){this.interceptors.forEach(e=>e.onResponse({response:a}))}invokeOnStream({response:a}){this.interceptors.forEach(e=>e.onStream({response:a}))}invokeOnParsed({response:a,body:e}){this.interceptors.forEach(t=>t.onParsed({response:a,body:e}))}invokeOnRedirect({url:a,preventDefault:e}){this.interceptors.forEach(t=>t.onRedirect({url:a,preventDefault:e}))}invokeOnDump({html:a,preventDefault:e}){this.interceptors.forEach(t=>t.onDump({html:a,preventDefault:e}))}invokeOnError({response:a,body:e,preventDefault:t}){this.interceptors.forEach(i=>i.onError({response:a,body:e,preventDefault:t})),this.messages.forEach(i=>i.invokeOnError({response:a,body:e,preventDefault:t}))}invokeOnSuccess({response:a,body:e,json:t}){this.interceptors.forEach(i=>i.onSuccess({response:a,body:e,json:t}))}invokeOnFinish(){this.interceptors.forEach(a=>a.onFinish())}},T6=class{controller=new AbortController;constructor(a){this.uri=a}cancel(){this.controller.abort()}isCancelled(){return this.controller.signal.aborted}},WP=class{onSend=()=>{};onCancel=()=>{};onFailure=()=>{};onError=()=>{};onStream=()=>{};onSuccess=()=>{};onFinish=()=>{};onSync=()=>{};onEffect=()=>{};onMorph=async()=>{};onRender=()=>{};constructor(a,e){this.message=a,this.callback=e,this.callback({message:this.message,cancel:()=>{this.message.getInterceptors().includes(this)||this.onCancel(),this.message.cancel()},onSend:t=>this.onSend=t,onCancel:t=>this.onCancel=t,onFailure:t=>this.onFailure=t,onError:t=>this.onError=t,onStream:t=>this.onStream=t,onSuccess:t=>this.onSuccess=t,onFinish:t=>this.onFinish=t})}init(){}},E6=class{onSend=()=>{};onCancel=()=>{};onFailure=()=>{};onResponse=()=>{};onParsed=()=>{};onError=()=>{};onStream=()=>{};onRedirect=()=>{};onDump=()=>{};onSuccess=()=>{};onFinish=()=>{};constructor(a,e){this.request=a,this.callback=e,this.callback({request:this.request,onSend:t=>this.onSend=t,onCancel:t=>this.onCancel=t,onFailure:t=>this.onFailure=t,onResponse:t=>this.onResponse=t,onParsed:t=>this.onParsed=t,onError:t=>this.onError=t,onStream:t=>this.onStream=t,onRedirect:t=>this.onRedirect=t,onDump:t=>this.onDump=t,onSuccess:t=>this.onSuccess=t,onFinish:t=>this.onFinish=t})}init(){}},M6=class{messageInterceptorCallbacks=[];messageInterceptorCallbacksByComponent=new Qw;requestInterceptorCallbacks=[];addInterceptor(a,e){return this.messageInterceptorCallbacksByComponent.add(a,e),()=>{this.messageInterceptorCallbacksByComponent.delete(a,e)}}addMessageInterceptor(a){return this.messageInterceptorCallbacks.push(a),()=>{this.messageInterceptorCallbacks.splice(this.messageInterceptorCallbacks.indexOf(a),1)}}addRequestInterceptor(a){return this.requestInterceptorCallbacks.push(a),()=>{this.requestInterceptorCallbacks.splice(this.requestInterceptorCallbacks.indexOf(a),1)}}getMessageInterceptors(a){return[...this.messageInterceptorCallbacksByComponent.get(a.component),...this.messageInterceptorCallbacks].map(t=>new WP(a,t))}getRequestInterceptors(a){return this.requestInterceptorCallbacks.map(e=>new E6(a,e))}};function uT(a){let e=document.createElement("html");e.innerHTML=a,e.querySelectorAll("a").forEach(n=>n.setAttribute("target","_top"));let t=document.getElementById("livewire-error");typeof t<"u"&&t!=null?t.innerHTML="":(t=document.createElement("dialog"),t.id="livewire-error",t.style.margin="50px",t.style.width="calc(100% - 100px)",t.style.height="calc(100% - 100px)",t.style.borderRadius="5px",t.style.padding="0px");let i=document.createElement("iframe");i.style.backgroundColor="#17161A",i.style.borderRadius="5px",i.style.width="100%",i.style.height="100%",t.appendChild(i),document.body.prepend(t),document.body.style.overflow="hidden",i.contentWindow.document.open(),i.contentWindow.document.write(e.outerHTML),i.contentWindow.document.close(),t.addEventListener("click",()=>I6(t)),t.addEventListener("close",()=>P6(t)),t.showModal(),t.focus(),t.blur()}function I6(a){a.close()}function P6(a){a.outerHTML="",document.body.style.overflow="visible"}var eg=new WeakMap,j_=new WeakMap;function L6(a){let e=a.component;if(Array.from(a.actions).every(i=>i.metadata.island)){let i=Array.from(a.actions).map(r=>r.metadata.island.name).sort().join("|"),n=j_.get(e);return n||(n={[i]:Symbol()},j_.set(e,n)),n[i]||(n[i]=Symbol()),n[i]}return eg.has(e)||eg.set(e,Symbol()),eg.get(e)}function db(a){let e=a.component;if(!!a.metadata.island){let i=a.metadata.island.name,n=j_.get(e);return n||(n={[i]:Symbol()},j_.set(e,n)),n[i]||(n[i]=Symbol()),n[i]}return eg.has(e)||eg.set(e,Symbol()),eg.get(e)}var D6=class{pendingMessages=new Set;activeMessages=new Set;bufferingMessages=new Set;constructor(){}messageBuffer(a,e){this.bufferingMessages.has(a)||(this.bufferingMessages.add(a),setTimeout(()=>{e(),this.bufferingMessages.delete(a)},5))}addPendingMessage(a){this.pendingMessages.add(a)}clearPendingMessages(){this.pendingMessages.clear()}getPendingMessages(){return Array.from(this.pendingMessages)}addActiveMessage(a){this.activeMessages.add(a)}removeActiveMessage(a){this.activeMessages.delete(a)}findScopedPendingMessage(a){if(a.isAsync())return null;let e=db(a);return Array.from(this.pendingMessages).find(t=>t.component!==a.component?!1:Array.from(t.actions).some(i=>db(i)===e))}activeMessageMatchingScope(a){return Array.from(this.activeMessages).find(e=>this.matchesScope(e,a))}matchesScope(a,e){return a.scope===db(e)}allScopedMessages(a){return[...Array.from(this.activeMessages),...Array.from(this.pendingMessages)].filter(e=>this.matchesScope(e,a))}eachPendingMessage(a){Array.from(this.pendingMessages).forEach(a)}},R6=class{actions=new Set;snapshot=null;updates=null;calls=null;payload=null;responsePayload=null;pendingReturns=[];pendingReturnsMeta={};interceptors=[];cancelled=!1;request=null;_scope=null;get scope(){if(!this._scope)throw new Error("Message scope has not been set yet");return this._scope}set scope(a){this._scope=a}constructor(a){this.component=a}addAction(a){let e=new Map;if(Array.from(this.actions).forEach(t=>{e.set(t.fingerprint,t)}),e.has(a.fingerprint)){e.get(a.fingerprint).addSquashedAction(a);return}a.message=this,this.actions.add(a)}removeAction(a){this.actions.delete(a),a.message=null,this.actions.size===0&&this.cancel()}getActions(){return Array.from(this.actions)}hasActionForIsland(a){return this.getActions().some(e=>e.metadata.island?.name===a.metadata.name)}hasActionForComponent(){return this.getActions().some(a=>a.metadata.island===void 0)}setInterceptors(a){this.interceptors=a}addInterceptor(a){let e=new WP(this,a);this.interceptors.push(e),e.init()}setRequest(a){this.request=a}getInterceptors(){return this.interceptors}cancel(){this.cancelled||(this.cancelled=!0,this.invokeOnCancel(),this.request?.hasAllCancelledMessages()&&this.request.cancel())}isCancelled(){return this.cancelled}isAsync(){return Array.from(this.actions).every(a=>a.isAsync())}invokeOnSend(){this.interceptors.forEach(a=>a.onSend({payload:this.payload})),Array.from(this.actions).forEach((a,e)=>{let t=this.calls[e];a.invokeOnSend({call:t})})}invokeOnCancel(){this.interceptors.forEach(a=>a.onCancel()),this.rejectActionPromises({status:null,body:null,json:null,errors:null}),Array.from(this.actions).forEach(a=>a.invokeOnFinish()),this.invokeOnFinish()}invokeOnFailure(a){this.interceptors.forEach(e=>e.onFailure({error:a})),Array.from(this.actions).forEach(e=>e.invokeOnFailure({error:a})),this.rejectActionPromises({status:null,body:null,json:null,errors:null}),Array.from(this.actions).forEach(e=>e.invokeOnFinish()),this.invokeOnFinish()}invokeOnError({response:a,body:e,preventDefault:t}){this.interceptors.forEach(n=>n.onError({response:a,body:e,preventDefault:t})),Array.from(this.actions).forEach(n=>n.invokeOnError({response:a,body:e,preventDefault:t}));let i=null;try{i=JSON.parse(e)}catch{}this.rejectActionPromises({status:a.status,body:e,json:i,errors:null}),Array.from(this.actions).forEach(n=>n.invokeOnFinish()),this.invokeOnFinish()}invokeOnStream({json:a}){this.interceptors.forEach(e=>e.onStream({json:a}))}invokeOnSuccess(){this.interceptors.forEach(a=>{a.onSuccess({payload:this.responsePayload,onSync:e=>a.onSync=e,onEffect:e=>a.onEffect=e,onMorph:e=>a.onMorph=e,onRender:e=>a.onRender=e})}),this.pendingReturns=this.responsePayload.effects.returns||[],this.pendingReturnsMeta=this.responsePayload.effects.returnsMeta||{}}invokeOnSync(){this.interceptors.forEach(a=>a.onSync())}invokeOnEffect(){this.interceptors.forEach(a=>a.onEffect())}async invokeOnMorph(){await Promise.all(this.interceptors.map(a=>a.onMorph()))}invokeOnRender(){this.interceptors.forEach(a=>a.onRender())}invokeOnFinish(){this.interceptors.forEach(a=>a.onFinish())}rejectActionPromises({status:a,body:e,json:t,errors:i}){Array.from(this.actions).forEach(n=>{n.rejectPromise({status:a,body:e,json:t,errors:i})})}resolveActionPromises(a,e){let t=new Set;a.forEach((i,n)=>{let r=Array.from(this.actions)[n];if(!r)return;let o=e[n];if(o?.errors){r.rejectPromise({status:422,body:null,json:null,errors:o.errors}),r.invokeOnFinish(),t.add(r);return}r.invokeOnSuccess(i),r.resolvePromise(i),r.invokeOnFinish(),t.add(r)}),Array.from(this.actions).forEach(i=>{t.has(i)||(i.invokeOnSuccess(void 0),i.resolvePromise(),i.invokeOnFinish())})}},O6=class{squashedActions=new Set;onSendCallbacks=[];onCancelCallbacks=[];onSuccessCallbacks=[];onErrorCallbacks=[];onFailureCallbacks=[];onFinishCallbacks=[];message=null;cancelled=!1;deferred=!1;_fire=null;constructor(a,e,t=[],i={},n=null){this.component=a,this.name=e,this.params=t,this.metadata=i,this.origin=n,this.promise=new Promise((r,o)=>{this.promiseResolution={resolve:r,reject:o}}),this.promise._livewireAction=this}cancel(){this.cancelled||(this.cancelled=!0,this.invokeOnCancel(),this.invokeOnFinish(),this.rejectPromise({status:null,body:null,json:null,errors:null}),this.squashedActions.forEach(a=>a.cancel()),this.message&&this.message.removeAction(this))}isCancelled(){return this.cancelled}defer(){this.deferred=!0}isDeferred(){return this.deferred}fire(){this._fire&&this._fire(this)}get fingerprint(){let a=this.component.id,e=this.name,t=JSON.stringify(this.params),i=JSON.stringify(this.metadata),n=new TextEncoder().encode(a+e+t+i),r="",o=8192;for(let s=0;s<n.length;s+=o)r+=String.fromCharCode(...n.subarray(s,s+o));return window.btoa(r)}isAsync(){let e=(this.component.snapshot.memo?.async||[]).includes(this.name),t=this.origin?.directive?.modifiers.includes("async")||!!this.metadata.async;return e||t}isJson(){return(this.component.snapshot.memo?.json||[]).includes(this.name)}addInterceptor(a){a({action:this,onSend:e=>this.onSendCallbacks.push(e),onCancel:e=>this.onCancelCallbacks.push(e),onSuccess:e=>this.onSuccessCallbacks.push(e),onError:e=>this.onErrorCallbacks.push(e),onFailure:e=>this.onFailureCallbacks.push(e),onFinish:e=>this.onFinishCallbacks.push(e)})}invokeOnSend({call:a}){this.onSendCallbacks.forEach(e=>e({call:a})),this.squashedActions.forEach(e=>e.invokeOnSend({call:a}))}invokeOnCancel(){this.onCancelCallbacks.forEach(a=>a()),this.squashedActions.forEach(a=>a.invokeOnCancel())}invokeOnSuccess(a){this.onSuccessCallbacks.forEach(e=>e(a)),this.squashedActions.forEach(e=>e.invokeOnSuccess(a))}invokeOnError({response:a,body:e,preventDefault:t}){this.onErrorCallbacks.forEach(i=>i({response:a,body:e,preventDefault:t})),this.squashedActions.forEach(i=>i.invokeOnError({response:a,body:e,preventDefault:t}))}invokeOnFailure({error:a}){this.onFailureCallbacks.forEach(e=>e({error:a})),this.squashedActions.forEach(e=>e.invokeOnFailure({error:a}))}invokeOnFinish(){this.onFinishCallbacks.forEach(a=>a()),this.squashedActions.forEach(a=>a.invokeOnFinish())}mergeMetadata(a){this.metadata={...this.metadata,...a}}rejectPromise(a){this.squashedActions.forEach(e=>e.rejectPromise(a)),this.promiseResolution.reject(a)}addSquashedAction(a){this.squashedActions.add(a)}resolvePromise(a){this.squashedActions.forEach(e=>e.resolvePromise(a)),this.promiseResolution.resolve(a)}};function z6(a,e){a(({request:t,onFailure:i,onResponse:n,onError:r,onSuccess:o})=>{let s=[],h=[],f=[];ws("request",{url:t.uri,options:t.options,payload:t.options.body,respond:y=>s.push(y),succeed:y=>h.push(y),fail:y=>f.push(y)}),n(({response:y})=>{s.forEach(x=>x({status:y.status,response:y}))}),o(({response:y,json:x})=>{h.forEach(S=>S({status:y.status,json:x}))}),i(({error:y})=>{f.forEach(x=>x({status:503,content:null,preventDefault:()=>{}}))}),r(({response:y,body:x,preventDefault:S})=>{f.forEach(E=>E({status:y.status,content:x,preventDefault:S}))})}),e(({message:t,onCancel:i,onError:n,onSuccess:r,onFinish:o})=>{let s=[],h=[],f=[];ws("commit",{component:t.component,commit:t.payload,respond:y=>{s.push(y)},succeed:y=>{h.push(y)},fail:y=>{f.push(y)}}),o(()=>{s.forEach(y=>y())}),r(({payload:y,onSync:x,onMorph:S,onRender:E})=>{E(()=>{h.forEach(z=>z({snapshot:y.snapshot,effects:y.effects}))})}),n(()=>{f.forEach(y=>y())}),i(()=>{f.forEach(y=>y())})})}var w1=null,S1={},k1=[],lx=new M6,Oh=new D6,o_=[],l_=[];function Vf(a){w1=a}function iS(a){S1=a}function F6(a){k1.push(a)}function cx(a){return o_.push(a),()=>{o_.splice(o_.indexOf(a),1)}}function Wu(a){return lx.addMessageInterceptor(a)}function nS(a){return lx.addRequestInterceptor(a)}function fb(a){return l_.push(a),()=>{l_.splice(l_.indexOf(a),1)}}function XP(a,e,t){let i=typeof e=="string"?e:null,n=i?t:e;return cx(({action:r,...o})=>{r.component===a&&(i&&r.name!==i||n({action:r,...o}))})}function YP(a,e,t){let i=typeof e=="string"?e:null,n=i?t:e;return lx.addInterceptor(a,({message:r,...o})=>{i&&!Array.from(r.actions).some(h=>h.name===i)||n({message:r,...o})})}function N6(a,e,t){let i=typeof e=="string"?e:null,n=i?t:e;return nS(({request:r,...o})=>{Array.from(r.messages).filter(h=>h.component!==a?!1:i?Array.from(h.actions).some(f=>f.name===i):!0).length!==0&&n({request:r,...o})})}Wu(({message:a,onFinish:e})=>{Oh.addActiveMessage(a),e(()=>Oh.removeActiveMessage(a))});queueMicrotask(()=>{A6(Oh)});function Ty(a,e,t=[],i={}){a.__isWireProxy&&(a=a.__instance);let n=qP(a,e,t,i);return o_.forEach(r=>{r({action:n,onSend:o=>n.onSendCallbacks.push(o),onCancel:o=>n.onCancelCallbacks.push(o),onSuccess:o=>n.onSuccessCallbacks.push(o),onError:o=>n.onErrorCallbacks.push(o),onFailure:o=>n.onFailureCallbacks.push(o),onFinish:o=>n.onFinishCallbacks.push(o)})}),n.isCancelled()||n.isDeferred()?n.promise:ZP(n)}function qP(a,e,t,i){let n=w1,r=k1;w1=null,k1=[],i={...i,...S1},S1={};let o=new O6(a,e,t,i,n);return o._fire=ZP,r.forEach(s=>o.addInterceptor(s)),o}function ZP(a){let e=KP(a);return Oh.messageBuffer(e,()=>{B6()}),a.promise}function KP(a){let e=Oh.findScopedPendingMessage(a);return e||(e=new R6(a.component)),e.addAction(a),Oh.addPendingMessage(e),e}function B6(){let a=new Set;Oh.eachPendingMessage(t=>{l_.forEach(i=>{i({message:t,compileRequest:n=>{let r=Array.from(a).find(s=>n.some(h=>s.messages.has(h)));if(r)return n.forEach(s=>{r.messages.has(s)||r.addMessage(s)}),r;let o=new cT;return n.forEach(s=>o.addMessage(s)),a.add(o),o}})})});let e=Oh.getPendingMessages();Oh.clearPendingMessages();for(let t of e){if(Array.from(a).some(n=>n.messages.has(t)))continue;let i=!1;if(a.forEach(n=>{if(!i){if(Array.from(n.messages).some(o=>o.component===t.component))return;n.addMessage(t),i=!0}}),!i){let n=new cT;n.addMessage(t),a.add(n)}}a.forEach(t=>{t.messages.forEach(i=>{i.snapshot=i.component.getEncodedSnapshotWithLatestChildrenMergedIn(),i.updates=i.component.getUpdates(),i.calls=Array.from(i.actions).map(n=>({method:n.name,params:n.params,metadata:n.metadata})),i.payload={snapshot:i.snapshot,updates:i.updates,calls:i.calls}})}),a.forEach(t=>{t.messages.forEach(i=>{i.scope=L6(i)})}),a.forEach(t=>{t.uri=p6(),Object.defineProperty(t,"payload",{get(){return{_token:VP(),components:Array.from(t.messages,n=>n.payload)}}});let i=null;Object.defineProperty(t,"options",{get(){return i||(i={method:"POST",body:JSON.stringify(t.payload),headers:{"Content-type":"application/json","X-Livewire":"1"},signal:t.controller.signal},i)}})}),a.forEach(t=>{t.initInterceptors(lx),t.hasAllCancelledMessages()&&t.cancel(),j6(t,{send:({responsePromise:i})=>{t.invokeOnSend({responsePromise:i})},failure:({error:i})=>{t.invokeOnFailure({error:i})},finish:()=>{t.invokeOnFinish()},response:({response:i})=>{t.invokeOnResponse({response:i})},stream:async({response:i})=>{t.invokeOnStream({response:i});let n="";try{n=await V6(i,r=>{let o=r.id;t.messages.forEach(s=>{s.component.id===o&&s.invokeOnStream({json:r})}),ws("stream",r)})}catch(r){throw t.cancel(),r}return n},parsed:({response:i,responseBody:n})=>{t.invokeOnParsed({response:i,body:n})},error:({response:i,responseBody:n})=>{let r=!1;if(t.invokeOnError({response:i,body:n,preventDefault:()=>r=!0}),!r){if(i.status===419){confirm(`This page has expired.
Would you like to refresh the page?`)&&window.location.reload();return}i.aborted||uT(n)}},redirect:i=>{let n=!1;t.invokeOnRedirect({url:i,preventDefault:()=>n=!0}),!n&&(window.location.href=i)},dump:i=>{let n=!1;t.invokeOnDump({html:i,preventDefault:()=>n=!0}),!n&&uT(i)},success:async({response:i,responseBody:n,responseJson:r})=>{t.invokeOnSuccess({response:i,body:n,json:r}),await $P("payload.intercept",r);let o=r.components;t.messages.forEach(s=>{o.forEach(h=>{if(s.isCancelled())return;let{snapshot:f,effects:y}=h,x=JSON.parse(f);if(x.memo.id===s.component.id){if(s.responsePayload={snapshot:x,effects:y},s.invokeOnSuccess(),s.isCancelled())return;Alpine.transaction(async()=>{s.component.mergeNewSnapshot(f,y,s.updates),s.invokeOnSync(),!s.isCancelled()&&(s.component.processEffects(y,t),s.invokeOnEffect(),!s.isCancelled()&&await s.invokeOnMorph())}).then(()=>{s.isCancelled()||(s.resolveActionPromises(s.pendingReturns,s.pendingReturnsMeta),s.invokeOnFinish()),requestAnimationFrame(()=>{s.isCancelled()||s.invokeOnRender()})})}})})}})})}async function j6(a,e){let t;try{if(a.isCancelled())return;let r=fetch(a.uri,a.options);if(a.isCancelled())return;e.send({responsePromise:r}),t=await r}catch(r){if(a.isCancelled())return;e.failure({error:r}),e.finish();return}e.response({response:t});let i=null;if(t.headers.has("X-Livewire-Stream")?i=await e.stream({response:t}):i=await t.text(),a.isCancelled())return;if(e.parsed({response:t,responseBody:i}),!t.ok){e.error({response:t,responseBody:i}),e.finish();return}if(t.redirected&&e.redirect(t.url),g6(i)){let r;[r,i]=m6(i),e.dump(r)}let n=null;try{n=JSON.parse(i)}catch(r){console.error(r),e.error({response:t,responseBody:i}),e.finish();return}e.success({response:t,responseBody:i,responseJson:n}),e.finish()}async function V6(a,e){let t=a.body.getReader(),i="";for(;;){let{done:n,value:r}=await t.read(),s=new TextDecoder().decode(r),[h,f]=H6(i+s);if(h.forEach(y=>{e(y)}),i=f,n)return i}}function H6(a){let e=/({"stream":true.*?"endStream":true})/g,t=a.match(e),i=[];if(t)for(let r=0;r<t.length;r++)i.push(JSON.parse(t[r]).body);let n=a.replace(e,"");return[i,n]}async function U6(a,e,t){let i=new T6(a),n={headers:{"X-Livewire-Navigate":"1"},signal:i.controller.signal};ws("navigate.request",{uri:a,options:n});let r;try{r=await fetch(a,n);let o=$6(a,r),s=await r.text(),h=r.status;e(s,o,h)}catch(o){throw t(o),o}}function $6(a,e){let t=hT(a),i=hT(e.url);return t.pathname+t.search===i.pathname+i.search&&(i.hash=t.hash),i}function hT(a){return a!==null&&new URL(a,document.baseURI)}z6(nS,Wu);function G6(a){return{messages(){return a.snapshot.memo.errors},keys(){return Object.keys(this.messages())},has(...e){if(this.isEmpty())return!1;if(e.length===0||e.length===1&&e[0]==null)return this.any();e.length===1&&Array.isArray(e[0])&&(e=e[0]);for(let t of e)if(this.first(t)==="")return!1;return!0},hasAny(e){if(this.isEmpty())return!1;e.length===1&&Array.isArray(e[0])&&(e=e[0]);for(let t of e)if(this.has(t))return!0;return!1},missing(...e){return e.length===1&&Array.isArray(e[0])&&(e=e[0]),!this.hasAny(e)},first(e=null){let t=e===null?this.all():this.get(e),i=t.length>0?t[0]:"";return Array.isArray(i)?i[0]:i},get(e){return a.snapshot.memo.errors[e]||[]},all(){return Object.values(this.messages()).flat()},isEmpty(){return!this.any()},isNotEmpty(){return this.any()},any(){return Object.keys(this.messages()).length>0},count(){return Object.values(this.messages()).reduce((e,t)=>e+t.length,0)}}}function aS(a,e){let t=a.el.querySelector(`[wire\\:ref="${e}"]`);return t||console.error(`Ref "${e}" not found in component "${a.id}"`)}var py=new Set;function hf(a){return a.match(new RegExp("wire:"))}function Df(a,e){let[t,...i]=e.replace(new RegExp("wire:"),"").split(".");return new Y6(t,i,e,a)}function Xu(a,e){py.has(a)||(py.add(a),Os("directive.init",({el:t,component:i,directive:n,cleanup:r})=>{n.value===a&&e({el:t,directive:n,component:i,$wire:i.$wire,cleanup:r})}))}function JP(a,e){py.has(a)||(py.add(a),Os("directive.global.init",({el:t,directive:i,cleanup:n})=>{i.value===a&&e({el:t,directive:i,cleanup:n})}))}function rS(a){return new X6(a)}function W6(a){return py.has(a)}var X6=class{constructor(a){this.el=a,this.directives=this.extractTypeModifiersAndValue()}all(){return this.directives}has(a){return this.directives.map(e=>e.value).includes(a)}missing(a){return!this.has(a)}get(a){return this.directives.find(e=>e.value===a)}extractTypeModifiersAndValue(){return Array.from(this.el.getAttributeNames().filter(a=>hf(a)).map(a=>Df(this.el,a)))}},Y6=class{constructor(a,e,t,i){this.rawName=this.raw=t,this.el=i,this.eventContext,this.wire,this.value=a,this.modifiers=e,this.expression=this.el.getAttribute(this.rawName)}get method(){return this.parseOutMethodsAndParams(this.expression)[0].method}get methods(){return this.parseOutMethodsAndParams(this.expression)}get params(){return this.parseOutMethodsAndParams(this.expression)[0].params}parseOutMethodsAndParams(a){let e=[],t=this.splitAndParseMethods(a);for(let{method:i,paramString:n}of t){let r=[];if(n.length>0){let o=function(){for(var s=arguments.length,h=new Array(s),f=0;f<s;f++)h[f]=arguments[f];return[].concat(h)};try{r=Alpine.evaluate(document,"argumentsToArray("+n+")",{scope:{argumentsToArray:o}})}catch(s){console.warn("Failed to parse parameters:",n,s),r=[]}}e.push({method:i,params:r})}return e}splitAndParseMethods(a){let e=[],t="",i=0,n=!1,r=null,o=a.trim();for(let s=0;s<o.length;s++){let h=o[s];n?(h===r&&o[s-1]!=="\\"&&(n=!1,r=null),t+=h):h==='"'||h==="'"?(n=!0,r=h,t+=h):h==="("?(i++,t+=h):h===")"?(i--,t+=h):h===","&&i===0?(e.push(this.parseMethodCall(t.trim())),t=""):t+=h}return t.trim().length>0&&e.push(this.parseMethodCall(t.trim())),e}parseMethodCall(a){let e=a.match(/^([^(]+)\(/);if(!e)return{method:a.trim(),paramString:""};let t=e[1].trim(),i=e[0].length-1,n=a.lastIndexOf(")");if(n===-1)throw new Error(`Missing closing parenthesis for method "${t}"`);let r=a.slice(i+1,n).trim();return{method:t,paramString:r}}};function bf(a,e,t,i=null){if(t=e.modifiers.includes("remove")?!t:t,e.modifiers.includes("class")){let n=e.expression.split(" ").filter(String);t?a.classList.add(...n):a.classList.remove(...n)}else if(e.modifiers.includes("attr"))t?a.setAttribute(e.expression,!0):a.removeAttribute(e.expression);else{let n=i??window.getComputedStyle(a,null).getPropertyValue("display"),r=["inline","list-item","block","table","flex","grid","inline-flex"].filter(o=>e.modifiers.includes(o))[0]||"inline-block";r=e.modifiers.includes("remove")&&!t?n:r,a.style.display=t?r:"none"}}var QP=new Qw;Os("commit",({component:a,respond:e})=>{e(()=>{setTimeout(()=>{QP.each(a,t=>t(!1))})})});Xu("dirty",({el:a,directive:e,component:t})=>{let i=q6(a),n=!1,r=a.style.display,o=s=>{bf(a,e,s,r),n=s};QP.add(t,o),Alpine.effect(()=>{let s=!1;s=C1(t,i.length===0?void 0:i),n!==s&&o(s),n=s})});function C1(a,e){let t=!1;if(e===void 0)t=JSON.stringify(a.canonical)!==JSON.stringify(a.reactive);else if(Array.isArray(e))for(let i=0;i<e.length&&!t;i++){let n=e[i];t=JSON.stringify(gl(a.canonical,n))!==JSON.stringify(gl(a.reactive,n))}else t=JSON.stringify(gl(a.canonical,e))!==JSON.stringify(gl(a.reactive,e));return t}function q6(a){let e=rS(a),t=[];return e.has("model")&&t.push(e.get("model").expression),e.has("target")&&(t=t.concat(e.get("target").expression.split(",").map(i=>i.trim()))),t}var wf=new WeakMap;Os("effect",({component:a,effects:e})=>{let t=e.scriptModule;if(t){let i=a.name.replace(/\./g,"--").replace(/::/g,"---").replace(/:/g,"----"),n=`${b1()}/js/${i}.js?v=${t}`;wf.set(a,Alpine.reactive({loading:!0,afterLoaded:[]})),import(n).then(r=>{r.run.call(a.$wire,a.$wire,a.$wire.js),wf.get(a).loading=!1,wf.get(a).afterLoaded.forEach(o=>o()),wf.delete(a)})}});function eL(a){return wf.has(a)&&wf.get(a).loading}function Z6(a,e){eL(a)?wf.get(a).afterLoaded.push(()=>e()):e()}var sS={},tL;function Qa(a,e,t=null){sS[a]=e}function K6(a){tL=a}var dT={on:"$on",el:"$el",id:"$id",js:"$js",get:"$get",set:"$set",refs:"$refs",call:"$call",hook:"$hook",watch:"$watch",dirty:"$dirty",effect:"$effect",commit:"$commit",errors:"$errors",island:"$island",upload:"$upload",entangle:"$entangle",dispatch:"$dispatch",intercept:"$intercept",interceptAction:"$interceptAction",interceptMessage:"$interceptMessage",interceptRequest:"$interceptRequest",dispatchTo:"$dispatchTo",dispatchSelf:"$dispatchSelf",dispatchEl:"$dispatchEl",dispatchRef:"$dispatchRef",removeUpload:"$removeUpload",cancelUpload:"$cancelUpload",uploadMultiple:"$uploadMultiple"};function J6(a,e){return new Proxy({},{get(t,i){if(i==="__instance")return a;if(i in dT)return fT(a,dT[i]);if(i in sS)return fT(a,i);if(i in e)return e[i];if(i==="toJSON")return()=>a.toJSON();if(!["then"].includes(i))return Q6(a)(i)},set(t,i,n){return i in e&&(e[i]=n),!0}})}function fT(a,e){return sS[e](a)}function Q6(a){return tL(a)}fy.default.magic("wire",(a,{cleanup:e})=>{let t;return new Proxy({},{get(i,n){if(!t)try{t=ou(a)}catch{return()=>{}}return["$entangle","entangle"].includes(n)?UP(t,e):t.$wire[n]},set(i,n,r){if(!t)try{t=ou(a)}catch{return!0}return t.$wire[n]=r,!0}})});Qa("__instance",a=>a);Qa("$get",a=>(e,t=!0)=>gl(t?a.reactive:a.ephemeral,e));Qa("$el",a=>a.el);Qa("$id",a=>a.id);Qa("$js",a=>{let e=a.addJsAction.bind(a),t=a.getJsActions();return Object.keys(t).forEach(i=>{e[i]=a.getJsAction(i)}),new Proxy(e,{set(i,n,r){return a.addJsAction(n,r),!0},get(i,n){if(eL(a)){let r=null,o=new Promise(s=>{r=s});return(...s)=>(Z6(a,()=>{r(a.getJsAction(n)(...s))}),o)}return i[n]}})});Qa("$set",a=>async(e,t,i=!0)=>(dy(a.reactive,e,t),i?(a.queueUpdate(e,t),Ty(a,"$set")):Promise.resolve()));Qa("$refs",a=>{let e=t=>aS(a,t);return new Proxy(e,{get(t,i){return i in t?t[i]:e(i)}})});Qa("$dirty",a=>e=>{let t=fy.default.reactive({dirty:!1});return YP(a,({onFinish:i})=>{i(()=>{queueMicrotask(()=>{t.dirty=C1(a,e)})})}),fy.default.effect(()=>{t.dirty=C1(a,e)}),t.dirty});Qa("$intercept",a=>(e,t)=>XP(a,e,t));Qa("$interceptAction",a=>(e,t)=>XP(a,e,t));Qa("$interceptMessage",a=>(e,t)=>YP(a,e,t));Qa("$interceptRequest",a=>(e,t)=>N6(a,e,t));Qa("$errors",a=>G6(a));Qa("$call",a=>async(e,...t)=>await a.$wire[e](...t));Qa("$island",a=>(e,t={})=>(iS({island:{name:e,mode:"morph",...t}}),a.$wire));Qa("$entangle",a=>(e,t=!1)=>UP(a)(e,t));Qa("$toggle",a=>(e,t=!0)=>a.$wire.set(e,!a.$wire.get(e),t));Qa("$watch",a=>(e,t)=>{let i=()=>gl(a.reactive,e),n=fy.default.watch(i,t);return a.addCleanup(n),n});Qa("$effect",a=>e=>{let t=fy.default.effect(e);return a.addCleanup(t),t});Qa("$refresh",a=>async()=>Ty(a,"$refresh"));Qa("$commit",a=>async()=>Ty(a,"$commit"));Qa("$on",a=>(...e)=>dj(a,...e));Qa("$hook",a=>(e,t)=>{let i=Os(e,({component:n,...r})=>{if(n===void 0)return t(r);if(n.id===a.id)return t({component:n,...r})});return a.addCleanup(i),i});Qa("$dispatch",a=>(...e)=>lL(a,...e));Qa("$dispatchSelf",a=>(...e)=>$p(a,...e));Qa("$dispatchTo",()=>(...a)=>lS(...a));Qa("$dispatchEl",a=>(...e)=>cL(a,...e));Qa("$dispatchRef",a=>(...e)=>uL(a,...e));Qa("$upload",a=>(...e)=>b6(a,...e));Qa("$uploadMultiple",a=>(...e)=>w6(a,...e));Qa("$removeUpload",a=>(...e)=>S6(a,...e));Qa("$cancelUpload",a=>(...e)=>k6(a,...e));var pb=new WeakMap;Qa("$parent",a=>{if(pb.has(a))return pb.get(a).$wire;let e=a.parent;return pb.set(a,e),e.$wire});var Up=new WeakMap;function ej(a,e,t){Up.has(a)||Up.set(a,{});let i=Up.get(a);i[e]=t,Up.set(a,i)}K6(a=>e=>(...t)=>{if(t.length===1&&t[0]instanceof Event&&(t=[]),Up.has(a)){let i=Up.get(a);if(typeof i[e]=="function")return i[e](t)}return Ty(a,e,t)});var tj=class{constructor(a){if(a.__livewire)throw"Component already initialized";if(a.__livewire=this,this.el=a,this.id=a.getAttribute("wire:id"),this.key=a.getAttribute("wire:key"),this.__livewireId=this.id,this.snapshotEncoded=a.getAttribute("wire:snapshot"),this.snapshot=JSON.parse(this.snapshotEncoded),!this.snapshot)throw"Snapshot missing on Livewire component with id: "+this.id;this.name=this.snapshot.memo.name,this.effects=JSON.parse(a.getAttribute("wire:effects")),this.originalEffects=tf(this.effects),this.canonical=Rp(tf(this.snapshot.data)),this.ephemeral=Rp(tf(this.snapshot.data)),this.reactive=Alpine.reactive(this.ephemeral),this.queuedUpdates={},this.jsActions={},this.$wire=J6(this,this.reactive),a.$wire=this.$wire,this.cleanups=[],this.processEffects(this.effects)}addActionContext(a){(a.el||a.directive)&&Vf({el:a.el,directive:a.directive})}intercept(a,e=null){return this.$wire.$intercept(a,e)}mergeNewSnapshot(a,e,t={}){let i=JSON.parse(a),n=tf(this.canonical),r=this.applyUpdates(n,t),o=Rp(tf(i.data)),s=BP(r,o);this.snapshotEncoded=a,this.snapshot=i,this.effects=e,this.canonical=Rp(tf(i.data));let h=Rp(tf(i.data)),f=[],y=[];return Object.entries(s).forEach(([x,S])=>{S==="__rm__"?y.push(x):f.push(x)}),f.forEach(x=>{dy(this.reactive,x,gl(h,x))}),y.sort((x,S)=>{let E=parseInt(x.split(".").pop())||0;return(parseInt(S.split(".").pop())||0)-E}).forEach(x=>{NP(this.reactive,x)}),s}queueUpdate(a,e){this.queuedUpdates[a]=e}mergeQueuedUpdates(a){return Object.entries(this.queuedUpdates).forEach(([e,t])=>{Object.entries(a).forEach(([i,n])=>{i.startsWith(e)&&delete a[i]}),a[e]=t}),this.queuedUpdates=[],a}getUpdates(){let a=f6(this.canonical,this.ephemeral);return this.mergeQueuedUpdates(a)}applyUpdates(a,e){for(let t in e)dy(a,t,e[t]);return a}replayUpdate(a,e){let t={...this.effects,html:e};this.mergeNewSnapshot(JSON.stringify(a),t),this.processEffects({html:e})}processEffects(a,e){ws("effects",this,a),ws("effect",{component:this,effects:a,cleanup:t=>this.addCleanup(t),request:e})}get children(){let a=this.el,e=[];return a.querySelectorAll("[wire\\:id]").forEach(t=>{if(t.parentElement.closest("[wire\\:id]")!==a)return;let n=t.__livewire;n&&e.push(n)}),e}get islands(){return this.snapshot.memo.islands}get parent(){return ou(this.el.parentElement)}get isIsolated(){return this.snapshot.memo.isolate}get isLazy(){return this.snapshot.memo.lazyLoaded!==void 0}get hasBeenLazyLoaded(){return this.snapshot.memo.lazyLoaded===!0}get isLazyIsolated(){return!!this.snapshot.memo.lazyIsolated}getDeepChildrenWithBindings(a){this.getDeepChildren(e=>{(e.hasReactiveProps()||e.hasWireModelableBindings())&&a(e)})}hasReactiveProps(){return!!this.snapshot.memo.props}hasWireModelableBindings(){return!!this.snapshot.memo.bindings}getDeepChildren(a){this.children.forEach(e=>{a(e),e.getDeepChildren(a)})}getEncodedSnapshotWithLatestChildrenMergedIn(){let{snapshotEncoded:a,children:e,snapshot:t}=this,i={};return e.forEach(n=>{i[n.key]=[n.el.tagName.toLowerCase(),n.id]}),a.replace(/"children":\{[^}]*\}/,`"children":${JSON.stringify(i)}`)}inscribeSnapshotAndEffectsOnElement(){let a=this.el;a.setAttribute("wire:snapshot",this.snapshotEncoded);let e=this.originalEffects.listeners?{listeners:this.originalEffects.listeners}:{};this.originalEffects.url&&(e.url=this.originalEffects.url),this.originalEffects.scripts&&(e.scripts=this.originalEffects.scripts),a.setAttribute("wire:effects",JSON.stringify(e)),a.setAttribute("wire:key",this.key)}addJsAction(a,e){this.jsActions[a]=e}hasJsAction(a){return this.jsActions[a]!==void 0}getJsAction(a){return this.jsActions[a].bind(this.$wire)}getJsActions(){return this.jsActions}toJSON(){return{id:this.id,name:this.name,key:this.key,data:Object.fromEntries(Object.entries(this.ephemeral))}}addCleanup(a){this.cleanups.push(a)}cleanup(){for(delete this.el.__livewire;this.cleanups.length>0;)this.cleanups.pop()()}};function ij(a,{isMatch:e,hasReachedBoundary:t}){t||(t=()=>!1);let i=a;for(;i;){let n=i.previousSibling,r=[];for(;n;){if(ux(n)&&r.push("a"),gy(n))if(r.length>0)r.pop();else{let o=Sd(n);if(e(o))return new aL(n)}n=n.previousSibling}if(i=i.parentElement,i&&t({el:i}))break}return null}function iL(a,{isMatch:e,hasReachedBoundary:t}){t||(t=()=>!1);let i=null,n=a;return nL(n,(r,{skip:o,stop:s})=>{if(r.hasAttribute&&r!==n&&t({el:r}))return o();Array.from(r.childNodes).forEach(h=>{if(gy(h)){let f=Sd(h);e(f)&&(i=h,s())}})}),i&&new aL(i)}function gy(a){return a.nodeType===8&&a.textContent.startsWith("[if FRAGMENT")}function ux(a){return a.nodeType===8&&a.textContent.startsWith("[if ENDFRAGMENT")}function nL(a,e){let t=!1,i=!1;e(a,{skip:()=>t=!0,stop:()=>i=!0}),!(t||i)&&Array.from(a.children).forEach(n=>{nL(n,e)})}var aL=class{constructor(a){this.startMarkerNode=a,this.metadata=Sd(a)}get endMarkerNode(){return nj(this.startMarkerNode,this.metadata)}append(a,e){let t=document.createElement(a);t.innerHTML=e,Array.from(t.childNodes).forEach(i=>{this.endMarkerNode.before(i)})}prepend(a,e){let t=document.createElement(a);t.innerHTML=e,Array.from(t.childNodes).reverse().forEach(i=>{this.startMarkerNode.after(i)})}};function nj(a,e){let t=a;for(;t;){if(ux(t)){let i=Sd(t);if(Object.keys(e).every(n=>e[n]===i[n]))return t}t=t.nextSibling}return null}function rL(a){let e=/<!--\[if FRAGMENT\b.*?\]><!\[endif\]-->([\s\S]*)<!--\[if ENDFRAGMENT\b.*?\]><!\[endif\]-->/i,t=a.match(e);if(!t)throw new Error("Invalid fragment marker");let[i,n]=t;return n}function A1(a){let e=/\[if (FRAGMENT|ENDFRAGMENT):(.*?)\]/,t=a.match(e);if(!t)throw new Error("Invalid fragment marker");let[i,n,r]=t;return sL(r)}function Sd(a){let e=/\[if (FRAGMENT|ENDFRAGMENT):(.*?)\]/,t=a.textContent.match(e);if(!t)throw new Error("Invalid fragment marker");let[i,n,r]=t;return sL(r)}function sL(a){let e={};return a.split("|").forEach(i=>{let[n,r]=i.split("=");e[n]=r}),e}var $u={};function aj(a){let e=new tj(a);if($u[e.id])throw"Component already registered";return ws("component.init",{component:e,cleanup:i=>e.addCleanup(i)}),$u[e.id]=e,e}function rj(a){let e=$u[a];e&&(e.cleanup(),delete $u[a])}function sj(a){return!!$u[a]}function oS(a,e=!0){let t=$u[a];if(!t){if(e)throw"Component not found: "+a;return}return t}function ou(a,e=!0){let t=y6(a,(n,{stop:r})=>{if(n.__livewire)return r(n.__livewire.id);let o=[],s=_6(n,(h,{stop:f})=>{if(ux(h)){if(Sd(h).type!=="slot")return;o.push("a");return}if(gy(h)){let y=Sd(h);if(y.type!=="slot")return;if(o.length>0)o.pop();else return f(y.parent)}});if(s)return r(s)}),i=oS(t,e);if(!i){if(e)throw"Could not find Livewire component in DOM tree";return}return i}function oL(a){return Object.values($u).filter(e=>a==e.name)}function oj(a){return oL(a).map(e=>e.$wire)}function lj(a){let e=$u[a];return e&&e.$wire}function cj(){return Object.values($u)[0].$wire}function uj(){return Object.values($u)}function lL(a,e,t){vg(a.el,e,t)}function hj(a,e){vg(window,a,e)}function $p(a,e,t){vg(a.el,e,t,!1)}function cL(a,e,t,i){a.el.querySelectorAll(e).forEach(r=>{vg(r,t,i,!1)})}function lS(a,e,t){oL(a).forEach(n=>{vg(n.el,e,t,!1)})}function uL(a,e,t,i){let n=aS(a,e);vg(n,t,i,!1)}function dj(a,e,t){a.el.addEventListener(e,i=>{t(i.detail)})}function fj(a,e){let t=i=>{i.__livewire&&e(i.detail)};return window.addEventListener(a,t),()=>{window.removeEventListener(a,t)}}function vg(a,e,t,i=!0){typeof t=="string"&&(t=[t]);let n=new CustomEvent(e,{bubbles:i,detail:t});n.__livewire={name:e,params:t,receivedBy:[]},a.dispatchEvent(n)}var pj=lr(t6()),gj=lr(i6());function mj(a){let e=()=>{let t,i;try{i=localStorage}catch(n){console.error(n),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let r=new Map;i={getItem:r.get.bind(r),setItem:r.set.bind(r)}}return a.interceptor((n,r,o,s,h)=>{let f=t||`_x_${s}`,y=pT(f,i)?gT(f,i):n;return o(y),a.effect(()=>{let x=r();mT(f,x,i),o(x)}),y},n=>{n.as=r=>(t=r,n),n.using=r=>(i=r,n)})};Object.defineProperty(a,"$persist",{get:()=>e()}),a.magic("persist",e),a.persist=(t,{get:i,set:n},r=localStorage)=>{let o=pT(t,r)?gT(t,r):i();n(o),a.effect(()=>{let s=i();mT(t,s,r),n(s)})}}function pT(a,e){return e.getItem(a)!==null}function gT(a,e){let t=e.getItem(a);if(t!==void 0)return JSON.parse(t)}function mT(a,e,t){t.setItem(a,JSON.stringify(e))}var yj=mj,_j=lr(n6()),xj=lr(a6()),vj=lr(r6()),bj=lr(s6());function T1(a){if(a!==void 0)return JSON.parse(JSON.stringify(a))}function wj(a){let e={queued:!1,updates:{},add(t){Object.assign(e.updates,t),!e.queued&&(e.queued=!0,queueMicrotask(e.flush))},flush(){Object.keys(e.updates).length&&a(e.updates),e.queued=!1,e.updates={}}};return e}var Sj=class{constructor(){this.url=null,this.errorHandlers={},this.batch=wj(a=>{let e=this.getUrl();this.writeToHistory("replaceState",e,t=>(t.alpine={...t.alpine,...T1(a)},t)),this.url=null})}addErrorHandler(a,e){this.errorHandlers[a]=e}getUrl(){return this.url??new URL(window.location.href)}replaceState(a,e){this.url=a,this.batch.add(e)}pushState(a,e){this.batch.flush(),this.writeToHistory("pushState",a,t=>(t={alpine:{...t.alpine,...T1(e)}},t))}writeToHistory(a,e,t){let i=window.history.state||{};i.alpine||(i.alpine={}),i=t(i);try{window.history[a](i,"",e.toString())}catch(n){Object.values(this.errorHandlers).forEach(r=>typeof r=="function"&&r(n,e)),this.errorHandlers={},console.error(n)}}},kj=new Sj,Hf=kj,E1=class{constructor(a,e){this.url=a,this.html=e}},Dl={currentKey:null,currentUrl:null,keys:[],lookup:{},limit:10,has(a){return this.lookup[a]!==void 0},retrieve(a){let e=this.lookup[a];if(e===void 0)throw"No back button cache found for current location: "+a;return e},replace(a,e){this.has(a)?this.lookup[a]=e:this.push(a,e)},push(a,e){this.lookup[a]=e;let t=this.keys.indexOf(a);t>-1&&this.keys.splice(t,1),this.keys.unshift(a),this.trim()},trim(){for(let a of this.keys.splice(this.limit))delete this.lookup[a]}},c_=null;function hL(a){c_=a}function Cj(){let a=Hf.getUrl();dL(a,document.documentElement.outerHTML)}function Aj(a,e){let t=document.documentElement.outerHTML;Dl.replace(a,new E1(e,t))}function Tj(a,e){let t;a(i=>t=i),window.addEventListener("popstate",i=>{let n=i.state||{},r=n.alpine||{};if(c_&&(c_<200||c_>=300))return window.location.href=r.url;if(Object.keys(n).length!==0&&r.snapshotIdx)if(Dl.has(r.snapshotIdx)){let o=Dl.retrieve(r.snapshotIdx);e(o.html,o.url,Dl.currentUrl,Dl.currentKey),Dl.currentKey=r.snapshotIdx,Dl.currentUrl=o.url}else Dl.currentKey=null,Dl.currentUrl=null,t(r.url)})}function Ej(a,e){Mj(e,a)}function Mj(a,e){fL("pushState",a,e)}function dL(a,e){fL("replaceState",a,e)}function fL(a,e,t){let i=e.toString()+"-"+Math.random();a==="pushState"?Dl.push(i,new E1(e,t)):Dl.replace(i=Dl.currentKey??i,new E1(e,t)),Hf.addErrorHandler("navigate",n=>{n instanceof DOMException&&n.name==="SecurityError"&&console.error("Livewire: You can't use wire:navigate with a link to a different root domain: "+e)}),Hf[a](e,{snapshotIdx:i,url:e.toString()}),Dl.currentKey=i,Dl.currentUrl=e}function Ij(a,e){let t=r=>!r.isTrusted,i=r=>r.which>1||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey,n=r=>r.which!==13||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey;a.addEventListener("click",r=>{if(t(r)){r.preventDefault(),e(o=>o());return}i(r)||r.preventDefault()}),a.addEventListener("mousedown",r=>{i(r)||(r.preventDefault(),e(o=>{let s=h=>{h.preventDefault(),o(),a.removeEventListener("mouseup",s)};a.addEventListener("mouseup",s)}))}),a.addEventListener("keydown",r=>{n(r)||(r.preventDefault(),e(o=>o()))})}function Pj(a,e=60,t){a.addEventListener("mouseenter",i=>{let n=setTimeout(()=>{t(i)},e),r=()=>{clearTimeout(n),a.removeEventListener("mouseleave",r)};a.addEventListener("mouseleave",r)})}function yT(a){return u_(a.getAttribute("href"))}function u_(a){return a!==null&&new URL(a,document.baseURI)}function hx(a){return a.pathname+a.search+a.hash}function Lj(a,e,t){let i=hx(a);pL(i,(n,r,o)=>{hL(o),e(n,r)},t)}function pL(a,e,t){U6(a,e,t)}var Ll={},Dj=3e4;function _T(a,e,t){let i=hx(a);Ll[i]||(Ll[i]={finished:!1,html:null,whenFinished:()=>setTimeout(()=>delete Ll[i],Dj)},pL(i,(n,r,o)=>{hL(o),e(n,r)},()=>{delete Ll[i],t()}))}function xT(a,e,t){let i=Ll[hx(e)];i.html=a,i.finished=!0,i.finalDestination=t,i.whenFinished()}function Rj(a,e,t){let i=hx(a);if(!Ll[i])return t();if(Ll[i].finished){let n=Ll[i].html,r=Ll[i].finalDestination;return delete Ll[i],e(n,r)}else Ll[i].whenFinished=()=>{let n=Ll[i].html,r=Ll[i].finalDestination;delete Ll[i],e(n,r)}}var cS=lr(zs());function vT(a){cS.default.mutateDom(()=>{a.querySelectorAll("[data-teleport-template]").forEach(e=>e._x_teleport.remove())})}function bT(a){cS.default.mutateDom(()=>{a.querySelectorAll("[data-teleport-target]").forEach(e=>e.remove())})}function wT(a){cS.default.walk(a,(e,t)=>{e._x_teleport&&(e._x_teleportPutBack(),t())})}function Oj(a){return a.hasAttribute("data-teleport-target")}function ST(){document.body.setAttribute("data-scroll-x",document.body.scrollLeft),document.body.setAttribute("data-scroll-y",document.body.scrollTop),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:navigate\\:scroll]"]).forEach(a=>{a.setAttribute("data-scroll-x",a.scrollLeft),a.setAttribute("data-scroll-y",a.scrollTop)})}function kT(){let a=e=>{e.hasAttribute("data-scroll-x")?(e.scrollTo({top:Number(e.getAttribute("data-scroll-y")),left:Number(e.getAttribute("data-scroll-x")),behavior:"instant"}),e.removeAttribute("data-scroll-x"),e.removeAttribute("data-scroll-y")):window.scrollTo({top:0,left:0,behavior:"instant"})};queueMicrotask(()=>{queueMicrotask(()=>{a(document.body),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:navigate\\:scroll]"]).forEach(a)})})}var M1=lr(zs()),Um={};function CT(a){Um={},document.querySelectorAll("[x-persist]").forEach(e=>{Um[e.getAttribute("x-persist")]=e,a(e),M1.default.mutateDom(()=>{e.remove()})})}function AT(a){let e=[];document.querySelectorAll("[x-persist]").forEach(t=>{let i=Um[t.getAttribute("x-persist")];i&&(e.push(t.getAttribute("x-persist")),i._x_wasPersisted=!0,a(i,t),M1.default.mutateDom(()=>{t.replaceWith(i)}))}),Object.entries(Um).forEach(([t,i])=>{e.includes(t)||M1.default.destroyTree(i)}),Um={}}function zj(a){return a.hasAttribute("x-persist")}var dx=lr(o6());dx.default.configure({minimum:.1,trickleSpeed:200,showSpinner:!1,parent:"body"});Bj();var I1=!1;function Fj(){I1=!0,setTimeout(()=>{I1&&dx.default.start()},150)}function N0(){I1=!1,dx.default.done()}function Nj(){dx.default.remove()}function Bj(){let a=document.createElement("style");a.innerHTML=`/* Make clicks pass-through */

    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
      background: var(--livewire-progress-bar-color, #29d);

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    /* Fancy blur effect */
    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px var(--livewire-progress-bar-color, #29d), 0 0 5px var(--livewire-progress-bar-color, #29d);
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    /* Remove these to get rid of the spinner */
    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: var(--livewire-progress-bar-color, #29d);
      border-left-color: var(--livewire-progress-bar-color, #29d);
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    `;let e=HP();e&&(a.nonce=e),document.head.appendChild(a)}function TT(a){gL()&&a.querySelectorAll(":popover-open").forEach(e=>{e.setAttribute("data-navigate-popover-open","");let t=e.getAnimations();e._pausedAnimations=t.map(i=>({keyframes:i.effect.getKeyframes(),options:{duration:i.effect.getTiming().duration,easing:i.effect.getTiming().easing,fill:i.effect.getTiming().fill,iterations:i.effect.getTiming().iterations},currentTime:i.currentTime,playState:i.playState})),t.forEach(i=>i.pause())})}function ET(a){gL()&&a.querySelectorAll("[data-navigate-popover-open]").forEach(e=>{e.removeAttribute("data-navigate-popover-open"),queueMicrotask(()=>{e.isConnected&&(e.showPopover(),e.getAnimations().forEach(t=>t.finish()),e._pausedAnimations&&(e._pausedAnimations.forEach(({keyframes:t,options:i,currentTime:n,now:r,playState:o})=>{let s=e.animate(t,i);s.currentTime=n}),delete e._pausedAnimations))})})}function gL(){return typeof document.createElement("div").showPopover=="function"}var gb=[],mL=["data-csrf","nonce","aria-hidden"];function MT(a,e){let t=new DOMParser().parseFromString(a,"text/html"),i=t.documentElement,n=document.adoptNode(t.body),r=document.adoptNode(t.head);gb=gb.concat(Array.from(document.body.querySelectorAll("script")).map(h=>vL(bL(h.outerHTML,mL))));let o=()=>{};Vj(i),Hj(r).finally(()=>{o()}),jj(n,gb);let s=document.body;document.body.replaceWith(n),Alpine.destroyTree(s),e(h=>o=h)}function jj(a,e){a.querySelectorAll("script").forEach(t=>{if(t.hasAttribute("data-navigate-once")){let i=vL(bL(t.outerHTML,mL));if(e.includes(i))return}t.replaceWith(yL(t))})}function Vj(a){let e=document.documentElement;Array.from(a.attributes).forEach(t=>{const i=t.name,n=t.value;e.getAttribute(i)!==n&&e.setAttribute(i,n)}),Array.from(e.attributes).forEach(t=>{a.hasAttribute(t.name)||e.removeAttribute(t.name)})}function Hj(a){let e=Array.from(document.head.children),t=e.map(r=>r.outerHTML),i=document.createDocumentFragment(),n=[];for(let r of Array.from(a.children))if(PT(r))if(t.includes(r.outerHTML))i.appendChild(r);else if(_L(r)&&$j(r,e)&&setTimeout(()=>window.location.reload()),xL(r))try{n.push(Uj(yL(r)))}catch{}else document.head.appendChild(r);for(let r of Array.from(document.head.children))PT(r)||r.remove();for(let r of Array.from(a.children))r.tagName.toLowerCase()!=="noscript"&&document.head.appendChild(r);return Promise.all(n)}async function Uj(a){return new Promise((e,t)=>{a.src?(a.onload=()=>e(),a.onerror=()=>t()):e(),document.head.appendChild(a)})}function yL(a){let e=document.createElement("script");e.textContent=a.textContent,e.async=a.async;for(let t of a.attributes)e.setAttribute(t.name,t.value);return e}function _L(a){return a.hasAttribute("data-navigate-track")}function $j(a,e){let[t,i]=IT(a);return e.some(n=>{if(!_L(n))return!1;let[r,o]=IT(n);if(r===t&&i!==o)return!0})}function IT(a){return(xL(a)?a.src:a.href).split("?")}function PT(a){return a.tagName.toLowerCase()==="link"&&a.getAttribute("rel").toLowerCase()==="stylesheet"||a.tagName.toLowerCase()==="style"||a.tagName.toLowerCase()==="script"}function xL(a){return a.tagName.toLowerCase()==="script"}function vL(a){return a.split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0),e&e),0)}function bL(a,e){let t=a;return e.forEach(i=>{const n=new RegExp(`${i}="[^"]*"|${i}='[^']*'`,"g");t=t.replace(n,"")}),t=t.replaceAll(" ",""),t.trim()}var Mp=!0;function Gj(a){a.navigate=(t,i={})=>{let{preserveScroll:n=!1}=i,r=u_(t);_h("alpine:navigate",{url:r,history:!1,cached:!1})||e(r,{preserveScroll:n})},a.navigate.disableProgressBar=()=>{Mp=!1},a.addInitSelector(()=>`[${a.prefixed("navigate")}]`),a.directive("navigate",(t,{modifiers:i})=>{let n=i.includes("hover"),r=i.includes("preserve-scroll");n&&Pj(t,60,()=>{let o=yT(t);o&&_T(o,(s,h)=>{xT(s,o,h)},()=>{Mp&&N0()})}),Ij(t,o=>{let s=yT(t);s&&(_T(s,(h,f)=>{xT(h,s,f)},()=>{Mp&&N0()}),o(()=>{_h("alpine:navigate",{url:s,history:!1,cached:!1})||e(s,{preserveScroll:r})}))})});function e(t,{preserveScroll:i=!1,shouldPushToHistoryState:n=!0}){Mp&&Fj(),Wj(t,(r,o)=>{let s=[];_h("alpine:navigating",{onSwap:h=>s.push(h)}),ST(),Xj(),n&&Cj(),LT(a,h=>{CT(f=>{vT(f),TT(f)}),n?Ej(r,o):dL(o,r),MT(r,f=>{bT(document.body),AT((y,x)=>{wT(y),ET(y)}),!i&&kT(),s.forEach(y=>y()),f(()=>{h(()=>{setTimeout(()=>{}),DT(a),_h("alpine:navigated"),Mp&&N0()})})})})},()=>{Mp&&N0()})}Tj(t=>{t(i=>{let n=u_(i);_h("alpine:navigate",{url:n,history:!0,cached:!1})||e(n,{shouldPushToHistoryState:!1})})},(t,i,n,r)=>{let o=u_(i);if(_h("alpine:navigate",{url:o,history:!0,cached:!0}))return;ST();let h=[];_h("alpine:navigating",{onSwap:f=>h.push(f)}),Aj(r,n),LT(a,f=>{CT(y=>{vT(y),TT(y)}),MT(t,()=>{Nj(),bT(document.body),AT((y,x)=>{wT(y),ET(y)}),kT(),h.forEach(y=>y()),f(()=>{DT(a),_h("alpine:navigated")})})})}),setTimeout(()=>{_h("alpine:navigated")})}function Wj(a,e,t){Rj(a,e,()=>{Lj(a,e,t)})}function LT(a,e){a.stopObservingMutations(),e(t=>{a.startObservingMutations(),queueMicrotask(()=>{t()})})}function _h(a,e){let t=new CustomEvent(a,{cancelable:!0,bubbles:!0,detail:e});return document.dispatchEvent(t),t.defaultPrevented}function DT(a){a.initTree(document.body,void 0,(e,t)=>{e._x_wasPersisted&&t()})}function Xj(){let a=function(e,t){Alpine.walk(e,(i,n)=>{zj(i)&&n(),Oj(i)?n():t(i,n)})};Alpine.destroyTree(document.body,a)}function Yj(a){a.magic("queryString",(e,{interceptor:t})=>{let i,n=!1,r=!1;return t((o,s,h,f,y)=>{let x=i||f,{initial:S,replace:E,push:z,pop:D}=P1(x,o,n);return h(S),r?(a.effect(()=>z(s())),D(async F=>{h(F),await Promise.resolve()})):a.effect(()=>E(s())),S},o=>{o.alwaysShow=()=>(n=!0,o),o.usePush=()=>(r=!0,o),o.as=s=>(i=s,o)})}),a.history={track:P1}}function P1(a,e,t=!1,i=null){let{has:n,get:r,set:o,remove:s}=Zj(),h=Hf.getUrl(),f=n(h,a),y=f?r(h,a):e,x=JSON.stringify(y),S=JSON.stringify(i),E=U=>JSON.stringify(U)===x,z=U=>JSON.stringify(U)===S;t&&(h=o(h,a,y)),RT(h,a,{value:y});let D=!1,F=(U,G)=>{if(D)return;let Z=Hf.getUrl();!t&&!f&&E(G)||G===void 0||!t&&z(G)?Z=s(Z,a):Z=o(Z,a,G),U(Z,a,{value:G})};return{initial:y,replace(U){F(RT,U)},push(U){F(qj,U)},pop(U){let G=Z=>{!Z.state||!Z.state.alpine||Object.entries(Z.state.alpine).forEach(([ee,{value:ie}])=>{if(ee!==a)return;D=!0;let le=U(ie);le instanceof Promise?le.finally(()=>D=!1):D=!1})};return window.addEventListener("popstate",G),()=>window.removeEventListener("popstate",G)}}}function RT(a,e,t){Hf.replaceState(a,{[e]:t})}function qj(a,e,t){Hf.pushState(a,{[e]:t})}function Zj(){return{has(a,e){let t=a.search;if(!t)return!1;let i=B0(t,e);return Object.keys(i).includes(e)},get(a,e){let t=a.search;return t?B0(t,e)[e]:!1},set(a,e,t){let i=B0(a.search,e);return i[e]=wL(T1(t)),a.search=OT(i),a},remove(a,e){let t=B0(a.search,e);return delete t[e],a.search=OT(t),a}}}function wL(a){if(!eS(a))return a;for(let e in a)a[e]===null?delete a[e]:a[e]=wL(a[e]);return a}function OT(a){let e=n=>typeof n=="object"&&n!==null,t=(n,r={},o="")=>(Object.entries(n).forEach(([s,h])=>{let f=o===""?s:`${o}[${s}]`;h===null?r[f]="":e(h)?r={...r,...t(h,r,f)}:r[f]=encodeURIComponent(h).replaceAll("%20","+").replaceAll("%2C",",")}),r),i=t(a);return Object.entries(i).map(([n,r])=>`${n}=${r}`).join("&")}function B0(a,e){if(a=a.replace("?",""),a==="")return{};let t=(r,o,s)=>{let[h,f,...y]=r.split(".");if(!f)return s[r]=o;s[h]===void 0&&(s[h]=isNaN(f)?{}:[]),t([f,...y].join("."),o,s[h])},i=a.split("&").map(r=>r.split("=")),n=Object.create(null);return i.forEach(([r,o])=>{if(typeof o>"u")return;o=decodeURIComponent(o.replaceAll("+","%20"));let s=decodeURIComponent(r);if(!(s.includes("[")&&s.startsWith(e)))n[r]=o;else{let f=s.replaceAll("[",".").replaceAll("]","");t(f,o,n)}}),n}var Kj=lr(l6()),Jj=lr(c6()),Vs=lr(zs());function Qj(){setTimeout(()=>eV()),cb(document,"livewire:init"),cb(document,"livewire:initializing"),Vs.default.plugin(Kj.default),Vs.default.plugin(Yj),Vs.default.plugin(_j.default),Vs.default.plugin(xj.default),Vs.default.plugin(vj.default),Vs.default.plugin(pj.default),Vs.default.plugin(bj.default),Vs.default.plugin(gj.default),Vs.default.plugin(yj),Vs.default.plugin(Gj),Vs.default.plugin(Jj.default),Vs.default.addRootSelector(()=>"[wire\\:id]"),Vs.default.onAttributesAdded((a,e)=>{if(!Array.from(e).some(i=>hf(i.name)))return;let t=ou(a,!1);t&&e.forEach(i=>{if(!hf(i.name))return;let n=Df(a,i.name);ws("directive.init",{el:a,component:t,directive:n,cleanup:r=>{Vs.default.onAttributeRemoved(a,n.raw,r)}})})}),Vs.default.interceptInit(Vs.default.skipDuringClone(a=>{if(!Array.from(a.attributes).some(i=>hf(i.name)))return;if(a.hasAttribute("wire:id")&&!a.__livewire&&!sj(a.getAttribute("wire:id"))){let i=aj(a);Vs.default.onAttributeRemoved(a,"wire:id",()=>{rj(i.id)})}let e=Array.from(a.getAttributeNames()).filter(i=>hf(i)).map(i=>Df(a,i));e.forEach(i=>{ws("directive.global.init",{el:a,directive:i,cleanup:n=>{Vs.default.onAttributeRemoved(a,i.raw,n)}})});let t=ou(a,!1);t&&(ws("element.init",{el:a,component:t}),e.forEach(i=>{ws("directive.init",{el:a,component:t,directive:i,cleanup:n=>{Vs.default.onAttributeRemoved(a,i.raw,n)}})}))},a=>{if(!Array.from(a.attributes).some(t=>hf(t.name)))return;Array.from(a.getAttributeNames()).filter(t=>hf(t)).map(t=>Df(a,t)).forEach(t=>{ws("directive.global.init",{el:a,directive:t,cleanup:i=>{Vs.default.onAttributeRemoved(a,t.raw,i)}})})})),Vs.default.start(),setTimeout(()=>window.Livewire.initialRenderIsFinished=!0),cb(document,"livewire:initialized")}function eV(){let a=document.querySelector("script[data-update-uri][data-csrf]");if(!a)return;let e=a.closest("[wire\\:id]");e&&console.warn("Livewire: missing closing tags found. Ensure your template elements contain matching closing tags.",e)}var uS=lr(zs());Os("effect",({component:a,effects:e})=>{tV(a,e.listeners||[])});function tV(a,e){e.forEach(t=>{let i=n=>{n.__livewire&&n.__livewire.receivedBy.push(a),a.$wire.call("__dispatch",t,n.detail||{})};window.addEventListener(t,i),a.addCleanup(()=>window.removeEventListener(t,i)),a.el.addEventListener(t,n=>{n.__livewire&&(n.bubbles||(n.__livewire&&n.__livewire.receivedBy.push(a.id),a.$wire.call("__dispatch",t,n.detail||{})))})})}var iV=lr(zs()),SL=lr(zs());function L1(a,e,t={}){if(!e||e.trim()==="")return;let i=SL.default.evaluateRaw(a,e,t);return i instanceof Promise&&i.catch(()=>{}),i}function Td(a,e,t={}){if(!e||e.trim()==="")return;let i=nV(e);try{let n=SL.default.evaluateRaw(a,i,t);return n instanceof Promise&&n._livewireAction&&n.catch(()=>{}),n}catch(n){console.warn(`Livewire Expression Error: ${n.message}

${e?'Expression: "'+e+`"

`:""}`,a),console.error(n)}}function nV(a){let e=["JSON","true","false","null","undefined","this","$wire","$event"],t=[],i=a.replace(/(["'`])(?:(?!\1)[^\\]|\\.)*\1/g,n=>(t.push(n),`___${t.length-1}___`));return i=i.replace(/(^|[^.\w$])(\$?[a-zA-Z_]\w*)/g,(n,r,o,s)=>e.includes(o)||/^___\d+___$/.test(o)||i[s+n.length]===":"?r+o:r+"$wire."+o),i.replace(/___(\d+)___/g,(n,r)=>t[r])}var Ip=new WeakMap,V_=new Set;Os("payload.intercept",async({assets:a})=>{if(a)for(let[e,t]of Object.entries(a))await sV(e,async()=>{await oV(t)})});Os("component.init",({component:a})=>{let e=a.snapshot.memo.assets;e&&e.forEach(t=>{V_.has(t)||V_.add(t)})});Os("effect",({component:a,effects:e})=>{let t=e.scripts;t&&Object.entries(t).forEach(([i,n])=>{aV(a,i,()=>{let r=rV(n);r=r.includes("await")?`(async()=>{ ${r} })()`:`(()=>{ ${r} })()`,iV.default.dontAutoEvaluateFunctions(()=>{L1(a.el,r,{context:a.$wire,scope:{$wire:a.$wire,$js:a.$wire.js}})})})})});function aV(a,e,t){if(Ip.has(a)&&Ip.get(a).includes(e))return;t(),Ip.has(a)||Ip.set(a,[]);let i=Ip.get(a);i.push(e),Ip.set(a,i)}function rV(a){let t=/<script\b[^>]*>([\s\S]*?)<\/script>/gm.exec(a);return t&&t[1]?t[1].trim():""}async function sV(a,e){V_.has(a)||(V_.add(a),await e())}async function oV(a){let e=new DOMParser().parseFromString(a,"text/html"),t=document.adoptNode(e.head);for(let i of t.children)try{await lV(i)}catch{}}async function lV(a){return new Promise((e,t)=>{if(cV(a)){let i=uV(a);i.src?(i.onload=()=>e(),i.onerror=()=>t()):e(),document.head.appendChild(i)}else document.head.appendChild(a),e()})}function cV(a){return a.tagName.toLowerCase()==="script"}function uV(a){let e=document.createElement("script");e.textContent=a.textContent,e.async=a.async;for(let t of a.attributes)e.setAttribute(t.name,t.value);return e}var hV=lr(zs());hV.default.magic("js",a=>ou(a).$wire.js);Os("effect",({component:a,effects:e})=>{let t=e.js,i=e.xjs;t&&Object.entries(t).forEach(([n,r])=>{ej(a,n,()=>{L1(a.el,r)})}),i&&i.forEach(({expression:n,params:r})=>{r=Object.values(r),L1(a.el,n,{scope:a.jsActions,params:r})})});var kL=lr(zs()),dV="match-element";JP("transition",({el:a,directive:e,cleanup:t})=>{});function zT(a){a.querySelectorAll("[wire\\:transition]").forEach(e=>{e.style.viewTransitionName||(e.style.viewTransitionName=e.getAttribute("wire:transition")||dV)})}function fV(a){a.querySelectorAll("[wire\\:transition]").forEach(e=>{e.style.viewTransitionName=""})}async function CL(a,e,t,i={}){if(i.skip||!a.querySelector("[wire\\:transition]")&&!e.querySelector("[wire\\:transition]")||typeof document.startViewTransition!="function"||document.querySelector("dialog:modal"))return t();zT(a);let n=document.createElement("style");n.textContent=`
        @media (prefers-reduced-motion: reduce) {
            ::view-transition-group(*), ::view-transition-old(*), ::view-transition-new(*) {
                animation: none !important;
            }
        }

        ::view-transition-old(root) {
            animation: none !important;
            opacity: 0 !important;
        }

        ::view-transition-new(root) {
            animation: none !important;
            opacity: 1 !important;
        }
    `,document.head.appendChild(n);let r=()=>{t(),zT(a)},o={update:r};i.type&&(o.types=[i.type]);let s=()=>{n.remove(),fV(a)},h=f=>{let y=new MutationObserver(()=>{document.querySelector("dialog:modal")&&(f.skipTransition(),y.disconnect())});y.observe(document.documentElement,{attributes:!0,attributeFilter:["open"],subtree:!0}),f.finished.finally(()=>y.disconnect())};try{let f=document.startViewTransition(o);h(f),f.finished.finally(s),await f.updateCallbackDone}catch{let y=document.startViewTransition(r);h(y),y.finished.finally(s),await y.updateCallbackDone}}async function pV(a,e,t){let i=e.parentElement?e.parentElement.tagName.toLowerCase():"div",n=customElements.get(i);i=n?n.name:i;let r=document.createElement(i);r.innerHTML=t;let o;try{o=ou(e.parentElement)}catch{}o&&(r.__livewire=o);let s=r.firstElementChild;s.setAttribute("wire:snapshot",a.snapshotEncoded);let h={...a.effects};delete h.html,s.setAttribute("wire:effects",JSON.stringify(h)),s.__livewire=a,ws("morph",{el:e,toEl:s,component:a});let f={};e.querySelectorAll("[wire\\:id]").forEach(x=>{f[x.getAttribute("wire:id")]=x}),s.querySelectorAll("[wire\\:id]").forEach(x=>{if(x.hasAttribute("wire:snapshot"))return;let S=x.getAttribute("wire:id"),E=f[S];E&&x.replaceWith(E.cloneNode(!0))});let y=a.effects.transition||{};await CL(e,s,()=>{kL.default.morph(e,s,TL(a))},y),ws("morphed",{el:e,component:a})}async function AL(a,e,t,i){let n=e.parentElement,r=n?n.tagName.toLowerCase():"div",o=document.createElement(r);o.innerHTML=i,o.__livewire=a;let s=a.el.parentElement,h=s?s.tagName.toLowerCase():"div",f;try{f=s?ou(s):null}catch{}if(f){let z=document.createElement(h);z.appendChild(o),z.__livewire=f}ws("island.morph",{startNode:e,endNode:t,component:a});let y=a.effects.transition||{},x=!1,S=e.nextSibling;for(;S&&S!==t;){if(S.nodeType===1&&(S.hasAttribute?.("wire:transition")||S.querySelector?.("[wire\\:transition]"))){x=!0;break}S=S.nextSibling}let E=x?n:document.createElement("div");await CL(E,o,()=>{kL.default.morphBetween(e,t,o,TL(a))},y),ws("island.morphed",{startNode:e,endNode:t,component:a})}function TL(a){return{updating:(e,t,i,n,r,o)=>{if(gy(e)&&gy(t)){let s=Sd(t);s.mode!=="morph"&&o(h=>ux(h)?Sd(h).token===s.token:!1)}if(!Pp(e)){if(ws("morph.updating",{el:e,toEl:t,component:a,skip:n,childrenOnly:i,skipChildren:r,skipUntil:o}),e.__livewire_replace===!0&&(e.innerHTML=t.innerHTML),e.__livewire_replace_self===!0)return e.outerHTML=t.outerHTML,n();if(e.__livewire_ignore===!0)return n();if(e.__livewire_ignore_self===!0&&i(),e.__livewire_ignore_children===!0)return r();if(FT(e)&&e.getAttribute("wire:id")!==a.id)return n();FT(e)&&(t.__livewire=a)}},updated:e=>{Pp(e)||ws("morph.updated",{el:e,component:a})},removing:(e,t)=>{Pp(e)||ws("morph.removing",{el:e,component:a,skip:t})},removed:e=>{Pp(e)||ws("morph.removed",{el:e,component:a})},adding:e=>{ws("morph.adding",{el:e,component:a})},added:e=>{Pp(e)||(ou(e).id,ws("morph.added",{el:e}))},key:e=>{if(!Pp(e))return e.hasAttribute("wire:id")?e.getAttribute("wire:id"):e.hasAttribute("wire:key")?e.getAttribute("wire:key"):e.id},lookahead:!1}}function Pp(a){return typeof a.hasAttribute!="function"}function FT(a){return a.hasAttribute("wire:id")}Wu(({message:a,onSuccess:e})=>{e(({payload:t,onMorph:i})=>{i(async()=>{let n=t.effects.html;n&&await pV(a.component,a.component.el,n)})})});Os("effect",({component:a,effects:e})=>{queueMicrotask(()=>{queueMicrotask(()=>{queueMicrotask(()=>{gV(a,e.dispatches||[])})})})});function gV(a,e){e.forEach(({name:t,params:i={},self:n=!1,component:r,ref:o,el:s})=>{n?$p(a,t,i):r?lS(r,t,i):o?uL(a,o,t,i):s?cL(a,s,t,i):lL(a,t,i)})}var mV=lr(zs()),D1=new u6;Os("directive.init",({el:a,directive:e,cleanup:t,component:i})=>setTimeout(()=>{e.value==="submit"&&a.addEventListener("submit",()=>{let n=e.expression.startsWith("$parent")?i.parent.id:i.id,r=yV(a);D1.add(n,r)})}));Os("commit",({component:a,respond:e})=>{e(()=>{D1.each(a.id,t=>t()),D1.remove(a.id)})});function yV(a){let e=[];return mV.default.walk(a,(t,i)=>{if(a.contains(t)){if(t.hasAttribute("wire:ignore"))return i();_V(t)?e.push(vV(t)):xV(t)&&e.push(bV(t))}}),()=>{for(;e.length>0;)e.shift()()}}function _V(a){let e=a.tagName.toLowerCase(),t=["hidden","range","color","checkbox","radio","file","submit","image","reset","button"];return!!(e==="select"||e==="button"&&a.type==="submit"||e==="input"&&t.includes(a.type))}function xV(a){return["input","textarea"].includes(a.tagName.toLowerCase())}function vV(a){let e=a.disabled?()=>{}:()=>a.disabled=!1;return a.disabled=!0,e}function bV(a){let e=a.readOnly?()=>{}:()=>a.readOnly=!1;return a.readOnly=!0,e}Os("commit",({succeed:a})=>{a(({effects:e})=>{let t=e.download;if(!t)return;let i=window.webkitURL||window.URL,n=i.createObjectURL(wV(t.content,t.contentType)),r=document.createElement("a");r.style.display="none",r.href=n,r.download=t.name,document.body.appendChild(r),r.click(),setTimeout(function(){i.revokeObjectURL(n)},0)})});function wV(a,e="",t=512){const i=atob(a),n=[];e===null&&(e="");for(let r=0;r<i.length;r+=t){let o=i.slice(r,r+t),s=new Array(o.length);for(let f=0;f<o.length;f++)s[f]=o.charCodeAt(f);let h=new Uint8Array(s);n.push(h)}return new Blob(n,{type:e})}var NT=lr(zs());Os("effect",({component:a,effects:e,cleanup:t})=>{let i=e.url;i&&Object.entries(i).forEach(([n,r])=>{let{name:o,as:s,use:h,alwaysShow:f,except:y}=SV(n,r);s||(s=o);let x=[!1,null,void 0].includes(y)?gl(a.ephemeral,o):y,{replace:S,push:E,pop:z}=P1(s,x,f,y);if(h==="replace"){let D=NT.default.effect(()=>{S(gl(a.reactive,o))});t(()=>NT.default.release(D))}else if(h==="push"){let D=Os("commit",({component:U,succeed:G})=>{if(a!==U)return;let Z=gl(a.canonical,o);G(()=>{let ee=gl(a.canonical,o);JSON.stringify(Z)!==JSON.stringify(ee)&&E(ee)})}),F=z(async U=>{await a.$wire.set(o,U),document.querySelectorAll("input").forEach(G=>{G._x_forceModelUpdate&&G._x_forceModelUpdate(G._x_model.get())})});t(()=>{D(),F()})}})});function SV(a,e){let t={use:"replace",alwaysShow:!1};return typeof e=="string"?{...t,name:e,as:e}:{...{...t,name:a,as:a},...e}}Os("request",({options:a})=>{window.Echo&&(a.headers["X-Socket-ID"]=window.Echo.socketId())});Os("effect",({component:a,effects:e})=>{(e.listeners||[]).forEach(i=>{if(i.startsWith("echo")){if(typeof window.Echo>"u"){console.warn("Laravel Echo cannot be found");return}let n=i.split(/(echo:|echo-)|:|,/);n[1]=="echo:"&&n.splice(2,0,"channel",void 0),n[2]=="notification"&&n.push(void 0,void 0);let[r,o,s,h,f,y,x]=n;if(["channel","private","encryptedPrivate"].includes(s)){let S=E=>$p(a,i,[E]);window.Echo[s](f).listen(x,S),a.addCleanup(()=>{window.Echo[s](f).stopListening(x,S)})}else if(s=="presence")if(["here","joining","leaving"].includes(x))window.Echo.join(f)[x](S=>{$p(a,i,[S])}),a.addCleanup(()=>{window.Echo.leave(f)});else{let S=E=>$p(a,i,[E]);window.Echo.join(f).listen(x,S),a.addCleanup(()=>{window.Echo.leave(f)})}else s=="notification"?(window.Echo.private(f).notification(S=>{$p(a,i,[S])}),a.addCleanup(()=>{window.Echo.private(f).stopListening(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated")})):console.warn("Echo channel type not yet supported")}})});Wu(({message:a,onStream:e})=>{e(({json:t})=>{let{id:i,type:n,name:r,el:o,ref:s,content:h,mode:f}=t;if(n==="island")return;let y=oS(i),x=null;if(n==="directive"){const S=y.el.querySelector(`[wire\\:stream\\.replace="${r}"]`);S?(x=S,f="replace"):x=y.el.querySelector(`[wire\\:stream="${r}"]`)}else n==="ref"?x=aS(y,s):n==="element"&&(x=y.el.querySelector(o));x&&(f==="replace"?x.innerHTML=h:x.insertAdjacentHTML("beforeend",h))})});document.addEventListener("livewire:initialized",()=>{CV()&&Alpine.navigate.disableProgressBar()});document.addEventListener("alpine:navigate",a=>hS("livewire:navigate",a));document.addEventListener("alpine:navigating",a=>hS("livewire:navigating",a));document.addEventListener("alpine:navigated",a=>hS("livewire:navigated",a));function hS(a,e){let t=new CustomEvent(a,{cancelable:!0,bubbles:!0,detail:e.detail});document.dispatchEvent(t),t.defaultPrevented&&e.preventDefault()}function kV(a,e,t){a.redirectUsingNavigate?Alpine.navigate(e):t()}function CV(){return!!(document.querySelector("[data-no-progress-bar]")||window.livewireScriptConfig&&window.livewireScriptConfig.progressBar==="data-no-progress-bar")}Os("effect",({effects:a,request:e})=>{if(!a.redirect)return;let t=!1;if(e.invokeOnRedirect({url:a.redirect,preventDefault:()=>t=!0}),t)return;let i=a.redirect;kV(a,i,()=>{window.location.href=i})});cx(({action:a})=>{let e=a.origin;if(!e)return;let{el:t,directive:i}=e,n=Array.from(t.attributes).find(o=>o.name.startsWith("wire:island"));if(n){let o=n.value,s=n.name.split("."),h=s.includes("prepend"),f=s.includes("append"),y=h?"prepend":f?"append":"morph";a.mergeMetadata({island:{name:o,mode:y}});return}let r=EL(e.el);r&&a.mergeMetadata({island:{name:r.metadata.name,mode:"morph"}})});Wu(({message:a,onSuccess:e,onStream:t})=>{t(({json:i})=>{let{type:n,islandFragment:r}=i;n==="island"&&BT(a.component,r)}),e(({payload:i,onMorph:n})=>{n(async()=>{(i.effects.islandFragments||[]).forEach(async o=>{await BT(a.component,o)})})})});function EL(a){return ij(a,{isMatch:({type:e})=>e==="island"})}async function BT(a,e){let t=A1(e),i=iL(a.el,{isMatch:({type:f,token:y})=>f===t.type&&y===t.token});if(!i)return;let n=A1(e),r=rL(e),o=i.startMarkerNode.parentElement,s=o?o.tagName.toLowerCase():"div",h=n.mode||"morph";h==="morph"?await AL(a,i.startMarkerNode,i.endMarkerNode,r):h==="append"?i.append(s,r):h==="prepend"&&i.prepend(s,r)}Wu(({message:a,onSuccess:e,onStream:t})=>{e(({payload:i,onMorph:n})=>{n(async()=>{(i.effects.slotFragments||[]).forEach(async o=>{await AV(a.component,o)})})})});async function AV(a,e){let t=A1(e),i=oS(t.id),n=iL(i.el,{isMatch:({name:o,token:s})=>o===t.name&&s===t.token});if(!n)return;let r=rL(e);await AL(i,n.startMarkerNode,n.endMarkerNode,r)}Wu(({message:a,onSend:e,onFinish:t})=>{let i=[];e(()=>{a.actions.forEach(n=>{let r=n.origin;if(!r)return;let o=r.hasOwnProperty("targetEl")?r.targetEl:r.el;o&&(o.setAttribute("data-loading","true"),i.push(()=>{o.removeAttribute("data-loading")}))})}),t(()=>i.forEach(n=>n()))});var TV=lr(zs());TV.default.addInitSelector(()=>"[wire\\:current]");var R1=new Map;document.addEventListener("livewire:navigated",()=>{R1.forEach(a=>a(new URL(window.location.href)))});JP("current",({el:a,directive:e,cleanup:t})=>{let i=e.expression,n={exact:e.modifiers.includes("exact"),strict:e.modifiers.includes("strict"),ignore:e.modifiers.includes("ignore")};if(n.ignore||i.startsWith("#")||!a.hasAttribute("href"))return;let r=a.getAttribute("href"),o=new URL(r,window.location.href),s=i.split(" ").filter(String),h=f=>{ML(o,f,n)?(a.classList.add(...s),a.setAttribute("data-current","")):(a.classList.remove(...s),a.removeAttribute("data-current"))};h(new URL(window.location.href)),R1.set(a,h),t(()=>R1.delete(a))});function ML(a,e,t={}){if(a.hostname!==e.hostname)return!1;let i=t.strict?a.pathname:a.pathname.replace(/\/+$/,""),n=t.strict?e.pathname:e.pathname.replace(/\/+$/,"");if(t.exact)return i===n;let r=i.split("/"),o=n.split("/");for(let s=0;s<r.length;s++)if(r[s]!==o[s])return!1;return!0}var h_=lr(zs()),IL=["[wire\\:navigate]","[wire\\:navigate\\.hover]","[wire\\:navigate\\.preserve-scroll]","[wire\\:navigate\\.preserve-scroll\\.hover]","[wire\\:navigate\\.hover\\.preserve-scroll]"],EV=IL.join(", "),MV={"wire:navigate":"x-navigate","wire:navigate.hover":"x-navigate.hover","wire:navigate.preserve-scroll":"x-navigate.preserve-scroll","wire:navigate.preserve-scroll.hover":"x-navigate.preserve-scroll.hover","wire:navigate.hover.preserve-scroll":"x-navigate.hover.preserve-scroll"};IL.forEach(a=>{h_.default.addInitSelector(()=>a)});h_.default.interceptInit(h_.default.skipDuringClone(a=>{for(let[e,t]of Object.entries(MV))if(a.hasAttribute(e)){h_.default.bind(a,{[t]:!0});break}}));document.addEventListener("alpine:navigating",()=>{Livewire.all().forEach(a=>{a.inscribeSnapshotAndEffectsOnElement()})});document.addEventListener("livewire:navigated",()=>{PL()});document.addEventListener("DOMContentLoaded",()=>{PL()});function PL(){let a=new URL(window.location.href),e={exact:!0};document.querySelectorAll(EV).forEach(t=>{if(Array.from(t.attributes).some(n=>n.name.startsWith("wire:current")))return;let i=t.getAttribute("href");if(!(!i||i.startsWith("#")))try{let n=new URL(i,window.location.href);ML(n,a,e)?t.setAttribute("data-current",""):t.removeAttribute("data-current")}catch{}})}Wu(({message:a,onSuccess:e})=>{e(({onSync:t,onMorph:i,onRender:n})=>{a.actions.forEach(r=>{let o=r.origin;if(!o||!o.directive||!o.directive.modifiers.includes("preserve-scroll"))return;let h,f;t(()=>{h=document.body.scrollHeight,f=window.scrollY}),i(async()=>{let y=document.body.scrollHeight-h;window.scrollTo(0,f+y),h=null,f=null})})})});var jT=lr(zs());jT.default.interceptInit(a=>{for(let e=0;e<a.attributes.length;e++)if(a.attributes[e].name.startsWith("wire:intersect")){let{name:t,value:i}=a.attributes[e],n=Df(a,t),r=t.split("wire:intersect")[1],o=i.trim();jT.default.bind(a,{["x-intersect"+r](s){n.eventContext=s,(a.closest("[wire\\:id]")?.__livewire).addActionContext({el:a,directive:n}),Td(a,o)}})}});var mb=lr(zs());mb.default.interceptInit(a=>{for(let e=0;e<a.attributes.length;e++)if(a.attributes[e].name.startsWith("wire:sort:item")){let t=Df(a,a.attributes[e].name),i=t.modifiers.join("."),n=t.expression;mb.default.bind(a,{["x-sort:item"+i](){return n}})}else{if(a.attributes[e].name.startsWith("wire:sort:group-id"))continue;if(a.attributes[e].name.startsWith("wire:sort:group"))return;if(a.attributes[e].name.startsWith("wire:sort")){let t=Df(a,a.attributes[e].name),i=t.rawName.replace("wire:","x-");t.modifiers.includes("async")&&(i=i.replace(".async","")),t.modifiers.includes("renderless")&&(i=i.replace(".renderless","")),t.modifiers.includes("prepend")&&(i=i.replace(".prepend","")),t.modifiers.includes("append")&&(i=i.replace(".append",""));let n=t.expression;mb.default.bind(a,{[i](){Vf({el:a,directive:t});let r=[this.$item,this.$position],o={$item:this.$item,$position:this.$position},s=a.getAttribute("wire:sort:group-id");s!==null&&(r.push(s),o.$id=s),Td(a,n,{scope:o,params:r})}})}}});var j0=new Set;Os("effect",({component:a,effects:e})=>{if(e.styleModule){let t=a.name.replace(/\./g,"--").replace(/::/g,"---").replace(/:/g,"----"),i=`${b1()}/css/${t}.css?v=${e.styleModule}`;j0.has(i)||(j0.add(i),VT(i))}if(e.globalStyleModule){let t=a.name.replace(/\./g,"--").replace(/::/g,"---").replace(/:/g,"----"),i=`${b1()}/css/${t}.global.css?v=${e.globalStyleModule}`;j0.has(i)||(j0.add(i),VT(i))}});function VT(a){let e=document.createElement("link");e.rel="stylesheet",e.href=a;let t=HP();t&&(e.nonce=t),document.head.appendChild(e)}var IV=new Qw;function PV(a,e){IV.each(a,t=>{t.callback(),t.callback=()=>{}}),e()}var LV=lr(zs());Os("directive.init",({el:a,directive:e,cleanup:t,component:i})=>{if(["snapshot","effects","model","init","loading","poll","ignore","id","data","key","target","dirty","sort"].includes(e.value)||W6(e.value))return;let n=e.rawName.replace("wire:","x-on:");e.value==="submit"&&!e.modifiers.includes("prevent")&&(n=n+".prevent"),e.modifiers.includes("async")&&(n=n.replace(".async","")),e.modifiers.includes("renderless")&&(n=n.replace(".renderless","")),e.modifiers.includes("prepend")&&(n=n.replace(".prepend","")),e.modifiers.includes("append")&&(n=n.replace(".append",""));let r=LV.default.bind(a,{[n](o){e.eventContext=o,e.wire=i.$wire;let s=()=>{PV(i,()=>{if(e.value==="submit"){let y=o.submitter||a.querySelector('button[type="submit"], input[type="submit"]');Vf({el:a,directive:e,targetEl:y})}else Vf({el:a,directive:e});let h=o.detail?.livewire;h?.interceptAction&&F6(h.interceptAction);let f=e.expression;if(h?.defaultParams!==void 0&&!f.includes("(")){let y=Array.isArray(h.defaultParams)?h.defaultParams:[h.defaultParams];f=f+"("+y.map(x=>JSON.stringify(x)).join(", ")+")"}Td(a,f,{scope:{$event:o}})})};a.__livewire_confirm?a.__livewire_confirm(()=>{s()},()=>{o.stopImmediatePropagation()}):s()}});t(r)});Xu("confirm",({el:a,directive:e})=>{let t=e.expression,i=e.modifiers.includes("prompt");t=t.replaceAll("\\n",`
`),t===""&&(t="Are you sure?"),a.__livewire_confirm=(n,r)=>{if(i){let[o,s]=t.split("|");s?prompt(o)===s?n():r():console.warn("Livewire: Must provide expectation with wire:confirm.prompt")}else confirm(t)?n():r()}});var O1=new Set,z1=new Set;window.addEventListener("offline",()=>O1.forEach(a=>a()));window.addEventListener("online",()=>z1.forEach(a=>a()));Xu("offline",({el:a,directive:e,cleanup:t})=>{let i=()=>bf(a,e,!0),n=()=>bf(a,e,!1);O1.add(i),z1.add(n),t(()=>{O1.delete(i),z1.delete(n)})});Xu("loading",({el:a,directive:e,component:t,cleanup:i})=>{let{targets:n,inverted:r}=FV(a),[o,s]=DV(e),h=RV(t,a,n,r,[()=>o(()=>bf(a,e,!0)),()=>s(()=>bf(a,e,!1))]),f=OV(t,n,[()=>o(()=>bf(a,e,!0)),()=>s(()=>bf(a,e,!1))]);i(()=>{h(),f()})});function DV(a){if(!a.modifiers.includes("delay")||a.modifiers.includes("none"))return[r=>r(),r=>r()];let e=200,t={shortest:50,shorter:100,short:150,default:200,long:300,longer:500,longest:1e3};Object.keys(t).some(r=>{if(a.modifiers.includes(r))return e=t[r],!0});let i,n=!1;return[r=>{i=setTimeout(()=>{r(),n=!0},e)},async r=>{n?(await r(),n=!1):clearTimeout(i)}]}function RV(a,e,t,i,[n,r]){return Wu(({message:o,onSend:s,onSuccess:h,onFinish:f})=>{if(a!==o.component)return;if(t.length===0){let S=EL(e);if(S&&!o.hasActionForIsland(S)||!S&&!o.hasActionForComponent())return}let y=!0,x=!1;s(({payload:S})=>{t.length>0&&zV(S,t)===i&&(y=!1),y&&n()}),h(({onEffect:S})=>{S(()=>{y&&!x&&(r(),x=!0)})}),f(()=>{y&&!x&&(r(),x=!0)})})}function OV(a,e,[t,i]){let n=h=>{let{id:f,property:y}=h.detail;return f!==a.id||e.length>0&&!e.map(x=>x.target).includes(y)},r=ub(window,"livewire-upload-start",h=>{n(h)||t()}),o=ub(window,"livewire-upload-finish",h=>{n(h)||i()}),s=ub(window,"livewire-upload-error",h=>{n(h)||i()});return()=>{r(),o(),s()}}function zV(a,e){let{updates:t,calls:i}=a;return e.some(({target:n,params:r})=>{if(r)return i.some(({method:s,params:h})=>n===s&&r===LL(JSON.stringify(h)));if(Object.keys(t).some(s=>s.includes(".")&&s.split(".")[0]===n?!0:s===n)||i.map(s=>s.method).includes(n))return!0})}function FV(a){let e=rS(a),t=[],i=!1;if(e.has("target")){let n=e.get("target");n.modifiers.includes("except")&&(i=!0),n.methods.forEach(({method:r,params:o})=>{t.push({target:r,params:o&&o.length>0?LL(JSON.stringify(o)):void 0})})}else{let n=["init","dirty","offline","navigate","target","loading","poll","ignore","key","id"];e.all().filter(r=>!n.includes(r.value)).map(r=>r.expression.split("(")[0]).forEach(r=>t.push({target:r}))}return{targets:t,inverted:i}}function LL(a){return btoa(encodeURIComponent(a))}Xu("replace",({el:a,directive:e})=>{e.modifiers.includes("self")?a.__livewire_replace_self=!0:a.__livewire_replace=!0});Xu("ignore",({el:a,directive:e})=>{e.modifiers.includes("self")?a.__livewire_ignore_self=!0:e.modifiers.includes("children")?a.__livewire_ignore_children=!0:a.__livewire_ignore=!0});var HT=lr(zs());HT.default.interceptInit(a=>{a.hasAttribute("wire:cloak")&&HT.default.mutateDom(()=>a.removeAttribute("wire:cloak"))});var NV=lr(zs());Xu("model",({el:a,directive:e,component:t,cleanup:i})=>{t=ou(a);let{expression:n,modifiers:r}=e;if(!n)return console.warn("Livewire: [wire:model] is missing a value.",a);if(DL(t,n))return console.warn('Livewire: [wire:model="'+n+'"] property does not exist on component: ['+t.name+"]",a);if(a.type&&a.type.toLowerCase()==="file")return x6(a,n,t,i);let o=r.indexOf("live"),s=o!==-1,h=r.includes("lazy")&&!s,f=s||h,y=s&&!h?r.slice(0,o):r.slice(),x=s&&!h?r.slice(o+1):[];h&&(y=y.filter(le=>le!=="lazy"),x.push("change")),y.includes("deep")||x.includes("deep")||y.includes("self")||y.push("self"),y.includes("blur"),y.includes("change")||y.includes("lazy"),y.includes("enter");let S=x.includes("blur"),E=x.includes("change")||x.includes("lazy"),z=x.includes("enter"),D=S||E||z,F=x.includes("debounce"),U=x.includes("throttle"),G=()=>{Vf({el:a,directive:e}),(s||F)&&iS({type:"model.live"}),n.startsWith("$parent")?t.$wire.$parent.$commit():t.$wire.$commit()},Z=G;(f&&!D&&jV(a)||F)&&(Z=VV(Z,H_(x,"debounce")||150)),U&&(Z=HV(Z,H_(x,"throttle")||150));let ee={};f&&S&&(ee["@blur"]=()=>G()),f&&E&&(ee["@change"]=()=>G()),f&&z&&(ee["@keydown.enter"]=()=>G());let ie=BV(y);ee["x-model"+ie]=()=>({get(){return gl(t.$wire,n)},set(le){dy(t.$wire,n,le),f&&!D&&Z()}}),NV.default.bind(a,ee)});function BV(a){if(a=a.filter(e=>!["defer","live"].includes(e)),a.includes("debounce")){let e=a.indexOf("debounce"),t=H_(a,"debounce")!==void 0;a.splice(e,t?2:1)}if(a.includes("throttle")){let e=a.indexOf("throttle"),t=H_(a,"throttle")!==void 0;a.splice(e,t?2:1)}return a.length===0?"":"."+a.join(".")}function jV(a){return["INPUT","TEXTAREA"].includes(a.tagName.toUpperCase())&&!["checkbox","radio"].includes(a.type)||a.tagName.toUpperCase()==="UI-SLIDER"||a.tagName.toUpperCase()==="UI-COMPOSER"}function DL(a,e){if(e.startsWith("$parent")){let n=ou(a.el.parentElement,!1);return n?DL(n,e.slice(7).replace(/^\./,"")):!0}let i=(e.match(/^\[['"]?([^\]'"]+)['"]?\]/)||e.match(/^([^.\[]+)/))[1];return!Object.keys(a.canonical).includes(i)}function VV(a,e){var t;return function(){var i=this,n=arguments,r=function(){t=null,a.apply(i,n)};clearTimeout(t),t=setTimeout(r,e)}}function HV(a,e){let t;return function(){let i=this,n=arguments;t||(a.apply(i,n),t=!0,setTimeout(()=>t=!1,e))}}function H_(a,e){if(a.indexOf(e)===-1)return;let n=(a[a.indexOf(e)+1]||"invalid-wait").split("ms")[0];return isNaN(n)?void 0:n}Xu("init",({component:a,el:e,directive:t})=>{let i=t.expression?t.expression:"$refresh";Vf({el:e,directive:t}),Td(e,i)});Xu("poll",({el:a,directive:e,component:t})=>{let i=QV(e.modifiers,2e3),{start:n,pauseWhile:r,throttleWhile:o,stopWhen:s}=$V(()=>{UV(a,e)},i);n(),o(()=>XV()&&qV(e)),r(()=>ZV(e)&&KV(a)),r(()=>YV(a)),r(()=>WV()),s(()=>JV(a))});function UV(a,e,t){Vf({el:a,directive:e,targetEl:null}),iS({type:"poll"});let i=e.expression?e.expression:"$refresh";Td(a,i)}function $V(a,e=2e3){let t=[],i=[],n=[];return{start(){let r=GV(e,()=>{if(n.some(o=>o()))return r();t.some(o=>o())||i.some(o=>o())&&Math.random()<.95||a()})},pauseWhile(r){t.push(r)},throttleWhile(r){i.push(r)},stopWhen(r){n.push(r)}}}var nf=[];function GV(a,e){if(!nf[a]){let t={timer:setInterval(()=>t.callbacks.forEach(i=>i()),a),callbacks:new Set};nf[a]=t}return nf[a].callbacks.add(e),()=>{nf[a].callbacks.delete(e),nf[a].callbacks.size===0&&(clearInterval(nf[a].timer),delete nf[a])}}var dS=!1;window.addEventListener("offline",()=>dS=!0);window.addEventListener("online",()=>dS=!1);function WV(){return dS}var RL=!1;document.addEventListener("visibilitychange",()=>{RL=document.hidden},!1);function XV(){return RL}function YV(a){return!rS(a).has("poll")}function qV(a){return!a.modifiers.includes("keep-alive")}function ZV(a){return a.modifiers.includes("visible")}function KV(a){let e=a.getBoundingClientRect();return!(e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.bottom>0&&e.right>0)}function JV(a){return a.isConnected===!1}function QV(a,e){let t,i=a.find(r=>r.match(/([0-9]+)ms/)),n=a.find(r=>r.match(/([0-9]+)s/));return i?t=Number(i.replace("ms","")):n&&(t=Number(n.replace("s",""))*1e3),t||e}var UT=lr(zs());UT.default.interceptInit(a=>{for(let e=0;e<a.attributes.length;e++)if(a.attributes[e].name.startsWith("wire:show")){let{name:t,value:i}=a.attributes[e],n=t.split("wire:show")[1],r=i.trim();UT.default.bind(a,{["x-show"+n](){return Td(a,r)}})}});var $T=lr(zs());$T.default.interceptInit(a=>{for(let e=0;e<a.attributes.length;e++)if(a.attributes[e].name.startsWith("wire:text")){let{name:t,value:i}=a.attributes[e],n=t.split("wire:text")[1],r=i.trim();$T.default.bind(a,{["x-text"+n](){return Td(a,r)}})}});var GT=lr(zs());GT.default.interceptInit(a=>{for(let e=0;e<a.attributes.length;e++)if(a.attributes[e].name.startsWith("wire:bind:")){let{name:t,value:i}=a.attributes[e],n=t.split("wire:bind")[1],r=i.trim();GT.default.bind(a,{["x-bind"+n](){return Td(a,r)}})}});var fx={directive:Xu,dispatchTo:lS,interceptAction:a=>cx(a),interceptMessage:a=>Wu(a),interceptRequest:a=>nS(a),fireAction:(a,e,t=[],i={})=>Ty(a,e,t,i),start:Qj,first:cj,find:lj,getByName:oj,all:uj,hook:Os,trigger:ws,triggerAsync:$P,dispatch:hj,on:fj,get navigate(){return uS.default.navigate}},fS=a=>console.warn(`Detected multiple instances of ${a} running`);window.Livewire&&fS("Livewire");window.Alpine&&fS("Alpine");window.Livewire=fx;window.Alpine=uS.default;window.livewireScriptConfig===void 0&&(window.Alpine.__fromLivewire=!0,document.addEventListener("DOMContentLoaded",()=>{window.Alpine.__fromLivewire===void 0&&fS("Alpine"),fx.start()}));var bg=uS.default;function e7(a){a.directive("intersect",a.skipDuringClone((e,{value:t,expression:i,modifiers:n},{evaluateLater:r,cleanup:o})=>{let s=r(i),h={rootMargin:n7(n),threshold:t7(n)},f=new IntersectionObserver(y=>{y.forEach(x=>{x.isIntersecting!==(t==="leave")&&(s(),n.includes("once")&&f.disconnect())})},h);f.observe(e),o(()=>{f.disconnect()})}))}function t7(a){if(a.includes("full"))return .99;if(a.includes("half"))return .5;if(!a.includes("threshold"))return 0;let e=a[a.indexOf("threshold")+1];return e==="100"?1:e==="0"?0:+`.${e}`}function i7(a){let e=a.match(/^(-?[0-9]+)(px|%)?$/);return e?e[1]+(e[2]||"px"):void 0}function n7(a){const e="margin",t="0px 0px 0px 0px",i=a.indexOf(e);if(i===-1)return t;let n=[];for(let r=1;r<5;r++)n.push(i7(a[i+r]||""));return n=n.filter(r=>r!==void 0),n.length?n.join(" ").trim():t}var a7=e7;function pS(a,e,t){zL();let i=OL(t),n=typeof e=="string"?o7(e):e;return window.Alpine&&window.Alpine.closestDataStack&&!a._x_dataStack&&(n._x_dataStack=window.Alpine.closestDataStack(a),n._x_dataStack&&window.Alpine.cloneNode(a,n)),i.patch(a,n),a}function r7(a,e,t,i={}){zL();let n=OL(i),r=a.parentNode,o=new my(a,e),s=typeof t=="string"?(()=>{let x=document.createElement("div");return x.insertAdjacentHTML("beforeend",t),x})():t,h=document.createComment("[morph-start]"),f=document.createComment("[morph-end]");s.insertBefore(h,s.firstChild),s.appendChild(f);let y=new my(h,f);window.Alpine&&window.Alpine.closestDataStack&&(s._x_dataStack=window.Alpine.closestDataStack(r),s._x_dataStack&&window.Alpine.cloneNode(r,s)),n.patchChildren(o,y)}function OL(a={}){let e=n=>n.getAttribute("key"),t=()=>{},i={key:a.key||e,lookahead:a.lookahead||!1,updating:a.updating||t,updated:a.updated||t,removing:a.removing||t,removed:a.removed||t,adding:a.adding||t,added:a.added||t};return i.patch=function(n,r){if(i.differentElementNamesTypesOrKeys(n,r))return i.swapElements(n,r);let o=!1,s=!1,h=f=>i.skipUntilCondition=f;if(!s7(i.updating,()=>s=!0,h,n,r,()=>o=!0)){if(n.nodeType===1&&window.Alpine&&(window.Alpine.cloneNode(n,r),n._x_teleport&&r._x_teleport&&i.patch(n._x_teleport,r._x_teleport)),l7(r)){i.patchNodeValue(n,r),i.updated(n,r);return}o||i.patchAttributes(n,r),i.updated(n,r),s||i.patchChildren(n,r)}},i.differentElementNamesTypesOrKeys=function(n,r){return n.nodeType!=r.nodeType||n.nodeName!=r.nodeName||i.getKey(n)!=i.getKey(r)},i.swapElements=function(n,r){if(cm(i.removing,n))return;let o=r.cloneNode(!0);cm(i.adding,o)||(n.replaceWith(o),i.removed(n),i.added(o))},i.patchNodeValue=function(n,r){let o=r.nodeValue;n.nodeValue!==o&&(n.nodeValue=o)},i.patchAttributes=function(n,r){if(n._x_transitioning||n._x_isShown&&!r._x_isShown||!n._x_isShown&&r._x_isShown)return;let o=Array.from(n.attributes),s=Array.from(r.attributes);for(let h=o.length-1;h>=0;h--){let f=o[h].name;r.hasAttribute(f)||n.removeAttribute(f)}for(let h=s.length-1;h>=0;h--){let f=s[h].name,y=s[h].value;n.getAttribute(f)!==y&&n.setAttribute(f,y)}},i.patchChildren=function(n,r){let o=i.keyToMap(n.children),s={},h=XT(r),f=XT(n);for(;h;){c7(h,f);let x=i.getKey(h),S=i.getKey(f);if(i.skipUntilCondition){let F=!f||i.skipUntilCondition(f),U=!h||i.skipUntilCondition(h);if(F&&U)i.skipUntilCondition=null;else{F||(f=f&&Il(n,f)),U||(h=h&&Il(r,h));continue}}if(!f)if(x&&s[x]){let F=s[x];n.appendChild(F),f=F,S=i.getKey(f)}else{if(!cm(i.adding,h)){let F=h.cloneNode(!0);n.appendChild(F),i.added(F)}h=Il(r,h);continue}let E=F=>F&&F.nodeType===8&&F.textContent==="[if BLOCK]><![endif]",z=F=>F&&F.nodeType===8&&F.textContent==="[if ENDBLOCK]><![endif]";if(E(h)&&E(f)){let F=0,U=f;for(;f;){let J=Il(n,f);if(E(J))F++;else if(z(J)&&F>0)F--;else if(z(J)&&F===0){f=J;break}f=J}let G=f;F=0;let Z=h;for(;h;){let J=Il(r,h);if(E(J))F++;else if(z(J)&&F>0)F--;else if(z(J)&&F===0){h=J;break}h=J}let ee=h,ie=new my(U,G),le=new my(Z,ee);i.patchChildren(ie,le);continue}if(f.nodeType===1&&i.lookahead&&!f.isEqualNode(h)){let F=Il(r,h),U=!1;for(;!U&&F;)F.nodeType===1&&f.isEqualNode(F)&&(U=!0,f=i.addNodeBefore(n,h,f),S=i.getKey(f)),F=Il(r,F)}if(x!==S){if(!x&&S){s[S]=f,f=i.addNodeBefore(n,h,f),s[S].remove(),f=Il(n,f),h=Il(r,h);continue}if(x&&!S&&o[x]&&(f.replaceWith(o[x]),f=o[x],S=i.getKey(f)),x&&S){let F=o[x];if(F)s[S]=f,f.replaceWith(F),f=F,S=i.getKey(f);else{s[S]=f,f=i.addNodeBefore(n,h,f),s[S].remove(),f=Il(n,f),h=Il(r,h);continue}}}let D=f&&Il(n,f);i.patch(f,h),h=h&&Il(r,h),f=D}let y=[];for(;f;)cm(i.removing,f)||y.push(f),f=Il(n,f);for(;y.length;){let x=y.shift();x.remove(),i.removed(x)}},i.getKey=function(n){return n&&n.nodeType===1&&i.key(n)},i.keyToMap=function(n){let r={};for(let o of n){let s=i.getKey(o);s&&(r[s]=o)}return r},i.addNodeBefore=function(n,r,o){if(!cm(i.adding,r)){let s=r.cloneNode(!0);return n.insertBefore(s,o),i.added(s),s}return r},i}pS.step=()=>{};pS.log=()=>{};function cm(a,...e){let t=!1;return a(...e,()=>t=!0),t}function s7(a,e,t,...i){let n=!1;return a(...i,()=>n=!0,e,t),n}var WT=!1;function o7(a){const e=document.createElement("template");return e.innerHTML=a,e.content.firstElementChild}function l7(a){return a.nodeType===3||a.nodeType===8}var my=class{constructor(a,e){this.startComment=a,this.endComment=e}get children(){let a=[],e=this.startComment.nextSibling;for(;e&&e!==this.endComment;)a.push(e),e=e.nextSibling;return a}appendChild(a){this.endComment.before(a)}get firstChild(){let a=this.startComment.nextSibling;if(a!==this.endComment)return a}nextNode(a){let e=a.nextSibling;if(e!==this.endComment)return e}insertBefore(a,e){return e.before(a),a}};function XT(a){return a.firstChild}function Il(a,e){let t;return a instanceof my?t=a.nextNode(e):t=e.nextSibling,t}function zL(){if(WT)return;WT=!0;let a=Element.prototype.setAttribute,e=document.createElement("div");Element.prototype.setAttribute=function(i,n){if(!i.includes("@"))return a.call(this,i,n);e.innerHTML=`<span ${i}="${n}"></span>`;let r=e.firstElementChild.getAttributeNode(i);e.firstElementChild.removeAttributeNode(r),this.setAttributeNode(r)}}function c7(a,e){let t=e&&e._x_bindings&&e._x_bindings.id;t&&a.setAttribute&&(a.setAttribute("id",t),a.id=t)}function u7(a){a.morph=pS,a.morphBetween=r7}var h7=u7;const d7=()=>({active:0,shown:!1,init(){},setActive(a){this.active=a},reveal(){this.shown=!0}}),f7=a=>({map:null,drawControl:null,drawnItems:null,drawingMode:null,geometryJson:(function(){if(!a.initialGeometry)return"";if(typeof a.initialGeometry=="string")try{return JSON.parse(a.initialGeometry),a.initialGeometry}catch{return""}return JSON.stringify(a.initialGeometry)})(),coordinates:{lat:a.center[0],lng:a.center[1]},hasGeometry:!1,currentDrawHandler:null,init(){this.$nextTick(()=>{if(this.initMap(),a.initialGeometry){let e=a.initialGeometry;if(typeof e=="string")try{e=JSON.parse(e)}catch(t){console.error("Failed to parse initialGeometry string:",t),e=null}e&&this.loadExistingGeometry(e)}})},initMap(){if(!this.$refs.mapContainer)return;this.map&&(this.map.remove(),this.map=null),this.map=as.map(this.$refs.mapContainer).setView(a.center,a.zoom);const e=as.tileLayer("https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}&s=Galileo&apistyle=s.t%3Apoi%7Cp.v%3Aoff%2Cs.t%3Atransit%7Cp.v%3Aoff",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google Maps"}).addTo(this.map),t=as.tileLayer("https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}&s=Galileo&apistyle=s.t%3Apoi%7Cp.v%3Aoff%2Cs.t%3Atransit%7Cp.v%3Aoff",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google Maps"}),i=as.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}&s=Galileo&apistyle=s.t%3Apoi%7Cp.v%3Aoff%2Cs.t%3Atransit%7Cp.v%3Aoff",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google Maps"}),n=as.tileLayer("https://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}&s=Galileo&apistyle=s.t%3Apoi%7Cp.v%3Aoff%2Cs.t%3Atransit%7Cp.v%3Aoff",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google Maps"}),r={"Google Streets":e,"Google Hybrid":t,"Google Satellite":i,"Google Terrain":n};this.drawnItems=new as.FeatureGroup,this.map.addLayer(this.drawnItems);const o={Gambar:this.drawnItems};as.control.layers(r,o).addTo(this.map),this.initDrawControl(),a.drawType==="point"?this.startDrawing("point"):a.drawType==="line"?this.startDrawing("line"):a.drawType==="polygon"&&this.startDrawing("polygon"),setTimeout(()=>{this.map.invalidateSize()},200)},initDrawControl(){if(!as.Control.Draw){console.warn("Leaflet Draw plugin not loaded");return}const e={position:"topright",draw:{polygon:{allowIntersection:!0,showArea:!0,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"}},polyline:{metric:!0},circle:!1,rectangle:!1,marker:!0,circlemarker:!1},edit:{featureGroup:this.drawnItems,remove:!0}};this.drawControl=new as.Control.Draw(e),this.map.addControl(this.drawControl),this.map.on(as.Draw.Event.CREATED,t=>{this.handleDrawCreated(t)}),this.map.on(as.Draw.Event.EDITED,t=>{this.handleDrawEdited(t)}),this.map.on(as.Draw.Event.DELETED,t=>{this.handleDrawDeleted(t)})},startDrawing(e){if(this.map.off("click",this.handleMapClick),this.currentDrawHandler&&(this.currentDrawHandler.disable(),this.currentDrawHandler=null),this.drawingMode=e,e==="point")this.map.on("click",this.handleMapClick.bind(this));else{if(!as.Draw)return;e==="line"?this.currentDrawHandler=new as.Draw.Polyline(this.map,this.drawControl.options.draw.polyline):e==="polygon"&&(this.currentDrawHandler=new as.Draw.Polygon(this.map,this.drawControl.options.draw.polygon)),this.currentDrawHandler&&this.currentDrawHandler.enable()}},handleMapClick(e){const{lat:t,lng:i}=e.latlng;this.coordinates={lat:Number(t).toFixed(6),lng:Number(i).toFixed(6)},this.drawnItems.clearLayers(),as.marker([t,i]).addTo(this.drawnItems),this.geometryJson=JSON.stringify({type:"Point",coordinates:[parseFloat(i),parseFloat(t)]}),this.hasGeometry=!0},handleDrawCreated(e){const t=e.layer;this.drawnItems.addLayer(t),this.updateGeometryFromLayer(t)},handleDrawEdited(e){e.layers.eachLayer(i=>{this.updateGeometryFromLayer(i)})},handleDrawDeleted(e){this.geometryJson="",this.hasGeometry=!1,a.drawType==="point"&&(this.coordinates={lat:a.center[0],lng:a.center[1]})},updateGeometryFromLayer(e){const t=e.toGeoJSON(),i=t.geometry;i&&(this.geometryJson=JSON.stringify(i),this.hasGeometry=!0,this.coordinates={lat:Number(t.properties?.lat||a.center[0]).toFixed(6),lng:Number(t.properties?.lng||a.center[1]).toFixed(6)},i.type==="Point"&&(this.coordinates={lat:Number(i.coordinates[1]).toFixed(6),lng:Number(i.coordinates[0]).toFixed(6)}),(i.type==="Polygon"||i.type==="MultiPolygon")&&this.calculateArea(e))},calculateArea(e){let t=0;if(e instanceof as.Polygon){const n=e.getLatLngs(),r=s=>as.GeometryUtil.geodesicArea(s),o=s=>{s.length!==0&&(s[0]instanceof as.LatLng?t+=r(s):Array.isArray(s[0])&&s.forEach(h=>o(h)))};o(n)}const i=(t/1e4).toFixed(4);this.$dispatch("area-calculated",i)},clearDrawing(){this.drawnItems.clearLayers(),this.geometryJson="",this.hasGeometry=!1,a.drawType==="point"&&(this.coordinates={lat:a.center[0],lng:a.center[1]})},editDrawing(){if(!this.hasGeometry)return;new as.EditToolbar.Edit(this.map,{featureGroup:this.drawnItems}).enable()},loadExistingGeometry(e){const t=as.geoJSON(e,{style:{color:"#3388ff",fillOpacity:.2,weight:3},pointToLayer:(n,r)=>as.marker(r)}),i=t.getLayers();if(i.length>0){const n=i[0];n instanceof as.LayerGroup?n.eachLayer(r=>{r.addTo(this.drawnItems)}):n.addTo(this.drawnItems);try{this.map.fitBounds(t.getBounds())}catch(r){console.warn("Map fitBounds failed:",r)}this.hasGeometry=!0,this.geometryJson=JSON.stringify(e),e.type==="Point"&&(this.coordinates={lat:Number(e.coordinates[1]).toFixed(6),lng:Number(e.coordinates[0]).toFixed(6)}),(e.type==="Polygon"||e.type==="MultiPolygon")&&(n instanceof as.LayerGroup||this.calculateArea(n))}}});var On;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(On||(On={}));var YT=new Map([[On.QR_CODE,"QR_CODE"],[On.AZTEC,"AZTEC"],[On.CODABAR,"CODABAR"],[On.CODE_39,"CODE_39"],[On.CODE_93,"CODE_93"],[On.CODE_128,"CODE_128"],[On.DATA_MATRIX,"DATA_MATRIX"],[On.MAXICODE,"MAXICODE"],[On.ITF,"ITF"],[On.EAN_13,"EAN_13"],[On.EAN_8,"EAN_8"],[On.PDF_417,"PDF_417"],[On.RSS_14,"RSS_14"],[On.RSS_EXPANDED,"RSS_EXPANDED"],[On.UPC_A,"UPC_A"],[On.UPC_E,"UPC_E"],[On.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),qT;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(qT||(qT={}));function p7(a){return Object.values(On).includes(a)}var U_;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(U_||(U_={}));var g7=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[U_.SCAN_TYPE_CAMERA,U_.SCAN_TYPE_FILE],a})(),FL=(function(){function a(e,t){this.format=e,this.formatName=t}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!YT.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,YT.get(e))},a})(),ZT=(function(){function a(){}return a.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),F1;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(F1||(F1={}));var m7=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:F1.UNKWOWN_ERROR}},a})(),y7=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function bh(a){return typeof a>"u"||a===null}var Gp=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),NL=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var i=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var n=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],r=new Set(n),o=Object.keys(e),s=0,h=o;s<h.length;s++){var f=h[s];if(r.has(f))return t.logError("".concat(f," is not supported videoConstaints."),!0),!1}return!0},a})(),Sm={exports:{}},_7=Sm.exports,KT;function x7(){return KT||(KT=1,(function(a,e){(function(t,i){i(e)})(_7,(function(t){function i(Se){return Se==null}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,g){Se.__proto__=g}||function(Se,g){for(var _ in g)g.hasOwnProperty(_)&&(Se[_]=g[_])};function r(Se,g){n(Se,g);function _(){this.constructor=Se}Se.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}function o(Se,g){var _=Object.setPrototypeOf;_?_(Se,g):Se.__proto__=g}function s(Se,g){g===void 0&&(g=Se.constructor);var _=Error.captureStackTrace;_&&_(Se,g)}var h=(function(Se){r(g,Se);function g(_){var w=this.constructor,T=Se.call(this,_)||this;return Object.defineProperty(T,"name",{value:w.name,enumerable:!1}),o(T,w.prototype),s(T),T}return g})(Error);class f extends h{constructor(g=void 0){super(g),this.message=g}getKind(){return this.constructor.kind}}f.kind="Exception";class y extends f{}y.kind="ArgumentException";class x extends f{}x.kind="IllegalArgumentException";class S{constructor(g){if(this.binarizer=g,g===null)throw new x("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(g,_){return this.binarizer.getBlackRow(g,_)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(g,_,w,T){const M=this.binarizer.getLuminanceSource().crop(g,_,w,T);return new S(this.binarizer.createBinarizer(M))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const g=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(g))}rotateCounterClockwise45(){const g=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(g))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class E extends f{static getChecksumInstance(){return new E}}E.kind="ChecksumException";class z{constructor(g){this.source=g}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(g,_,w,T,M){for(;M--;)w[T++]=g[_++]}static currentTimeMillis(){return Date.now()}}class F extends f{}F.kind="IndexOutOfBoundsException";class U extends F{constructor(g=void 0,_=void 0){super(_),this.index=g,this.message=_}}U.kind="ArrayIndexOutOfBoundsException";class G{static fill(g,_){for(let w=0,T=g.length;w<T;w++)g[w]=_}static fillWithin(g,_,w,T){G.rangeCheck(g.length,_,w);for(let M=_;M<w;M++)g[M]=T}static rangeCheck(g,_,w){if(_>w)throw new x("fromIndex("+_+") > toIndex("+w+")");if(_<0)throw new U(_);if(w>g)throw new U(w)}static asList(...g){return g}static create(g,_,w){return Array.from({length:g}).map(M=>Array.from({length:_}).fill(w))}static createInt32Array(g,_,w){return Array.from({length:g}).map(M=>Int32Array.from({length:_}).fill(w))}static equals(g,_){if(!g||!_||!g.length||!_.length||g.length!==_.length)return!1;for(let w=0,T=g.length;w<T;w++)if(g[w]!==_[w])return!1;return!0}static hashCode(g){if(g===null)return 0;let _=1;for(const w of g)_=31*_+w;return _}static fillUint8Array(g,_){for(let w=0;w!==g.length;w++)g[w]=_}static copyOf(g,_){return g.slice(0,_)}static copyOfUint8Array(g,_){if(g.length<=_){const w=new Uint8Array(_);return w.set(g),w}return g.slice(0,_)}static copyOfRange(g,_,w){const T=w-_,M=new Int32Array(T);return D.arraycopy(g,_,M,0,T),M}static binarySearch(g,_,w){w===void 0&&(w=G.numberComparator);let T=0,M=g.length-1;for(;T<=M;){const O=M+T>>1,V=w(_,g[O]);if(V>0)T=O+1;else if(V<0)M=O-1;else return O}return-T-1}static numberComparator(g,_){return g-_}}class Z{static numberOfTrailingZeros(g){let _;if(g===0)return 32;let w=31;return _=g<<16,_!==0&&(w-=16,g=_),_=g<<8,_!==0&&(w-=8,g=_),_=g<<4,_!==0&&(w-=4,g=_),_=g<<2,_!==0&&(w-=2,g=_),w-(g<<1>>>31)}static numberOfLeadingZeros(g){if(g===0)return 32;let _=1;return g>>>16||(_+=16,g<<=16),g>>>24||(_+=8,g<<=8),g>>>28||(_+=4,g<<=4),g>>>30||(_+=2,g<<=2),_-=g>>>31,_}static toHexString(g){return g.toString(16)}static toBinaryString(g){return String(parseInt(String(g),2))}static bitCount(g){return g=g-(g>>>1&1431655765),g=(g&858993459)+(g>>>2&858993459),g=g+(g>>>4)&252645135,g=g+(g>>>8),g=g+(g>>>16),g&63}static truncDivision(g,_){return Math.trunc(g/_)}static parseInt(g,_=void 0){return parseInt(g,_)}}Z.MIN_VALUE_32_BITS=-2147483648,Z.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ee{constructor(g,_){g===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=g,_==null?this.bits=ee.makeArray(g):this.bits=_)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(g){if(g>this.bits.length*32){const _=ee.makeArray(g);D.arraycopy(this.bits,0,_,0,this.bits.length),this.bits=_}}get(g){return(this.bits[Math.floor(g/32)]&1<<(g&31))!==0}set(g){this.bits[Math.floor(g/32)]|=1<<(g&31)}flip(g){this.bits[Math.floor(g/32)]^=1<<(g&31)}getNextSet(g){const _=this.size;if(g>=_)return _;const w=this.bits;let T=Math.floor(g/32),M=w[T];M&=~((1<<(g&31))-1);const O=w.length;for(;M===0;){if(++T===O)return _;M=w[T]}const V=T*32+Z.numberOfTrailingZeros(M);return V>_?_:V}getNextUnset(g){const _=this.size;if(g>=_)return _;const w=this.bits;let T=Math.floor(g/32),M=~w[T];M&=~((1<<(g&31))-1);const O=w.length;for(;M===0;){if(++T===O)return _;M=~w[T]}const V=T*32+Z.numberOfTrailingZeros(M);return V>_?_:V}setBulk(g,_){this.bits[Math.floor(g/32)]=_}setRange(g,_){if(_<g||g<0||_>this.size)throw new x;if(_===g)return;_--;const w=Math.floor(g/32),T=Math.floor(_/32),M=this.bits;for(let O=w;O<=T;O++){const V=O>w?0:g&31,K=(2<<(O<T?31:_&31))-(1<<V);M[O]|=K}}clear(){const g=this.bits.length,_=this.bits;for(let w=0;w<g;w++)_[w]=0}isRange(g,_,w){if(_<g||g<0||_>this.size)throw new x;if(_===g)return!0;_--;const T=Math.floor(g/32),M=Math.floor(_/32),O=this.bits;for(let V=T;V<=M;V++){const W=V>T?0:g&31,de=(2<<(V<M?31:_&31))-(1<<W)&4294967295;if((O[V]&de)!==(w?de:0))return!1}return!0}appendBit(g){this.ensureCapacity(this.size+1),g&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(g,_){if(_<0||_>32)throw new x("Num bits must be between 0 and 32");this.ensureCapacity(this.size+_);for(let w=_;w>0;w--)this.appendBit((g>>w-1&1)===1)}appendBitArray(g){const _=g.size;this.ensureCapacity(this.size+_);for(let w=0;w<_;w++)this.appendBit(g.get(w))}xor(g){if(this.size!==g.size)throw new x("Sizes don't match");const _=this.bits;for(let w=0,T=_.length;w<T;w++)_[w]^=g.bits[w]}toBytes(g,_,w,T){for(let M=0;M<T;M++){let O=0;for(let V=0;V<8;V++)this.get(g)&&(O|=1<<7-V),g++;_[w+M]=O}}getBitArray(){return this.bits}reverse(){const g=new Int32Array(this.bits.length),_=Math.floor((this.size-1)/32),w=_+1,T=this.bits;for(let M=0;M<w;M++){let O=T[M];O=O>>1&1431655765|(O&1431655765)<<1,O=O>>2&858993459|(O&858993459)<<2,O=O>>4&252645135|(O&252645135)<<4,O=O>>8&16711935|(O&16711935)<<8,O=O>>16&65535|(O&65535)<<16,g[_-M]=O}if(this.size!==w*32){const M=w*32-this.size;let O=g[0]>>>M;for(let V=1;V<w;V++){const W=g[V];O|=W<<32-M,g[V-1]=O,O=W>>>M}g[w-1]=O}this.bits=g}static makeArray(g){return new Int32Array(Math.floor((g+31)/32))}equals(g){if(!(g instanceof ee))return!1;const _=g;return this.size===_.size&&G.equals(this.bits,_.bits)}hashCode(){return 31*this.size+G.hashCode(this.bits)}toString(){let g="";for(let _=0,w=this.size;_<w;_++)(_&7)===0&&(g+=" "),g+=this.get(_)?"X":".";return g}clone(){return new ee(this.size,this.bits.slice())}}var ie;(function(Se){Se[Se.OTHER=0]="OTHER",Se[Se.PURE_BARCODE=1]="PURE_BARCODE",Se[Se.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Se[Se.TRY_HARDER=3]="TRY_HARDER",Se[Se.CHARACTER_SET=4]="CHARACTER_SET",Se[Se.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Se[Se.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Se[Se.ASSUME_GS1=7]="ASSUME_GS1",Se[Se.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Se[Se.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Se[Se.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ie||(ie={}));var le=ie;class J extends f{static getFormatInstance(){return new J}}J.kind="FormatException";var re;(function(Se){Se[Se.Cp437=0]="Cp437",Se[Se.ISO8859_1=1]="ISO8859_1",Se[Se.ISO8859_2=2]="ISO8859_2",Se[Se.ISO8859_3=3]="ISO8859_3",Se[Se.ISO8859_4=4]="ISO8859_4",Se[Se.ISO8859_5=5]="ISO8859_5",Se[Se.ISO8859_6=6]="ISO8859_6",Se[Se.ISO8859_7=7]="ISO8859_7",Se[Se.ISO8859_8=8]="ISO8859_8",Se[Se.ISO8859_9=9]="ISO8859_9",Se[Se.ISO8859_10=10]="ISO8859_10",Se[Se.ISO8859_11=11]="ISO8859_11",Se[Se.ISO8859_13=12]="ISO8859_13",Se[Se.ISO8859_14=13]="ISO8859_14",Se[Se.ISO8859_15=14]="ISO8859_15",Se[Se.ISO8859_16=15]="ISO8859_16",Se[Se.SJIS=16]="SJIS",Se[Se.Cp1250=17]="Cp1250",Se[Se.Cp1251=18]="Cp1251",Se[Se.Cp1252=19]="Cp1252",Se[Se.Cp1256=20]="Cp1256",Se[Se.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Se[Se.UTF8=22]="UTF8",Se[Se.ASCII=23]="ASCII",Se[Se.Big5=24]="Big5",Se[Se.GB18030=25]="GB18030",Se[Se.EUC_KR=26]="EUC_KR"})(re||(re={}));class ae{constructor(g,_,w,...T){this.valueIdentifier=g,this.name=w,typeof _=="number"?this.values=Int32Array.from([_]):this.values=_,this.otherEncodingNames=T,ae.VALUE_IDENTIFIER_TO_ECI.set(g,this),ae.NAME_TO_ECI.set(w,this);const M=this.values;for(let O=0,V=M.length;O!==V;O++){const W=M[O];ae.VALUES_TO_ECI.set(W,this)}for(const O of T)ae.NAME_TO_ECI.set(O,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(g){if(g<0||g>=900)throw new J("incorect value");const _=ae.VALUES_TO_ECI.get(g);if(_===void 0)throw new J("incorect value");return _}static getCharacterSetECIByName(g){const _=ae.NAME_TO_ECI.get(g);if(_===void 0)throw new J("incorect value");return _}equals(g){if(!(g instanceof ae))return!1;const _=g;return this.getName()===_.getName()}}ae.VALUE_IDENTIFIER_TO_ECI=new Map,ae.VALUES_TO_ECI=new Map,ae.NAME_TO_ECI=new Map,ae.Cp437=new ae(re.Cp437,Int32Array.from([0,2]),"Cp437"),ae.ISO8859_1=new ae(re.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ae.ISO8859_2=new ae(re.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ae.ISO8859_3=new ae(re.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ae.ISO8859_4=new ae(re.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ae.ISO8859_5=new ae(re.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ae.ISO8859_6=new ae(re.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ae.ISO8859_7=new ae(re.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ae.ISO8859_8=new ae(re.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ae.ISO8859_9=new ae(re.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ae.ISO8859_10=new ae(re.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ae.ISO8859_11=new ae(re.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ae.ISO8859_13=new ae(re.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ae.ISO8859_14=new ae(re.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ae.ISO8859_15=new ae(re.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ae.ISO8859_16=new ae(re.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ae.SJIS=new ae(re.SJIS,20,"SJIS","Shift_JIS"),ae.Cp1250=new ae(re.Cp1250,21,"Cp1250","windows-1250"),ae.Cp1251=new ae(re.Cp1251,22,"Cp1251","windows-1251"),ae.Cp1252=new ae(re.Cp1252,23,"Cp1252","windows-1252"),ae.Cp1256=new ae(re.Cp1256,24,"Cp1256","windows-1256"),ae.UnicodeBigUnmarked=new ae(re.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ae.UTF8=new ae(re.UTF8,26,"UTF8","UTF-8"),ae.ASCII=new ae(re.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ae.Big5=new ae(re.Big5,28,"Big5"),ae.GB18030=new ae(re.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ae.EUC_KR=new ae(re.EUC_KR,30,"EUC_KR","EUC-KR");class me extends f{}me.kind="UnsupportedOperationException";class Te{static decode(g,_){const w=this.encodingName(_);return this.customDecoder?this.customDecoder(g,w):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(w)?this.decodeFallback(g,w):new TextDecoder(w).decode(g)}static shouldDecodeOnFallback(g){return!Te.isBrowser()&&g==="ISO-8859-1"}static encode(g,_){const w=this.encodingName(_);return this.customEncoder?this.customEncoder(g,w):typeof TextEncoder>"u"?this.encodeFallback(g):new TextEncoder().encode(g)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(g){return typeof g=="string"?g:g.getName()}static encodingCharacterSet(g){return g instanceof ae?g:ae.getCharacterSetECIByName(g)}static decodeFallback(g,_){const w=this.encodingCharacterSet(_);if(Te.isDecodeFallbackSupported(w)){let T="";for(let M=0,O=g.length;M<O;M++){let V=g[M].toString(16);V.length<2&&(V="0"+V),T+="%"+V}return decodeURIComponent(T)}if(w.equals(ae.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(g.buffer));throw new me(`Encoding ${this.encodingName(_)} not supported by fallback.`)}static isDecodeFallbackSupported(g){return g.equals(ae.UTF8)||g.equals(ae.ISO8859_1)||g.equals(ae.ASCII)}static encodeFallback(g){const w=btoa(unescape(encodeURIComponent(g))).split(""),T=[];for(let M=0;M<w.length;M++)T.push(w[M].charCodeAt(0));return new Uint8Array(T)}}class ye{static castAsNonUtf8Char(g,_=null){const w=_?_.getName():this.ISO88591;return Te.decode(new Uint8Array([g]),w)}static guessEncoding(g,_){if(_!=null&&_.get(le.CHARACTER_SET)!==void 0)return _.get(le.CHARACTER_SET).toString();const w=g.length;let T=!0,M=!0,O=!0,V=0,W=0,K=0,de=0,ke=0,Pe=0,Ze=0,mt=0,vt=0,zt=0,Kt=0;const Ri=g.length>3&&g[0]===239&&g[1]===187&&g[2]===191;for(let zi=0;zi<w&&(T||M||O);zi++){const Ci=g[zi]&255;O&&(V>0?(Ci&128)===0?O=!1:V--:(Ci&128)!==0&&((Ci&64)===0?O=!1:(V++,(Ci&32)===0?W++:(V++,(Ci&16)===0?K++:(V++,(Ci&8)===0?de++:O=!1))))),T&&(Ci>127&&Ci<160?T=!1:Ci>159&&(Ci<192||Ci===215||Ci===247)&&Kt++),M&&(ke>0?Ci<64||Ci===127||Ci>252?M=!1:ke--:Ci===128||Ci===160||Ci>239?M=!1:Ci>160&&Ci<224?(Pe++,mt=0,Ze++,Ze>vt&&(vt=Ze)):Ci>127?(ke++,Ze=0,mt++,mt>zt&&(zt=mt)):(Ze=0,mt=0))}return O&&V>0&&(O=!1),M&&ke>0&&(M=!1),O&&(Ri||W+K+de>0)?ye.UTF8:M&&(ye.ASSUME_SHIFT_JIS||vt>=3||zt>=3)?ye.SHIFT_JIS:T&&M?vt===2&&Pe===2||Kt*10>=w?ye.SHIFT_JIS:ye.ISO88591:T?ye.ISO88591:M?ye.SHIFT_JIS:O?ye.UTF8:ye.PLATFORM_DEFAULT_ENCODING}static format(g,..._){let w=-1;function T(O,V,W,K,de,ke){if(O==="%%")return"%";if(_[++w]===void 0)return;O=K?parseInt(K.substr(1)):void 0;let Pe=de?parseInt(de.substr(1)):void 0,Ze;switch(ke){case"s":Ze=_[w];break;case"c":Ze=_[w][0];break;case"f":Ze=parseFloat(_[w]).toFixed(O);break;case"p":Ze=parseFloat(_[w]).toPrecision(O);break;case"e":Ze=parseFloat(_[w]).toExponential(O);break;case"x":Ze=parseInt(_[w]).toString(Pe||16);break;case"d":Ze=parseFloat(parseInt(_[w],Pe||10).toPrecision(O)).toFixed(0);break}Ze=typeof Ze=="object"?JSON.stringify(Ze):(+Ze).toString(Pe);let mt=parseInt(W),vt=W&&W[0]+""=="0"?"0":" ";for(;Ze.length<mt;)Ze=V!==void 0?Ze+vt:vt+Ze;return Ze}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return g.replace(M,T)}static getBytes(g,_){return Te.encode(g,_)}static getCharCode(g,_=0){return g.charCodeAt(_)}static getCharAt(g){return String.fromCharCode(g)}}ye.SHIFT_JIS=ae.SJIS.getName(),ye.GB2312="GB2312",ye.ISO88591=ae.ISO8859_1.getName(),ye.EUC_JP="EUC_JP",ye.UTF8=ae.UTF8.getName(),ye.PLATFORM_DEFAULT_ENCODING=ye.UTF8,ye.ASSUME_SHIFT_JIS=!1;class Re{constructor(g=""){this.value=g}enableDecoding(g){return this.encoding=g,this}append(g){return typeof g=="string"?this.value+=g.toString():this.encoding?this.value+=ye.castAsNonUtf8Char(g,this.encoding):this.value+=String.fromCharCode(g),this}appendChars(g,_,w){for(let T=_;_<_+w;T++)this.append(g[T]);return this}length(){return this.value.length}charAt(g){return this.value.charAt(g)}deleteCharAt(g){this.value=this.value.substr(0,g)+this.value.substring(g+1)}setCharAt(g,_){this.value=this.value.substr(0,g)+_+this.value.substr(g+1)}substring(g,_){return this.value.substring(g,_)}setLengthToZero(){this.value=""}toString(){return this.value}insert(g,_){this.value=this.value.substr(0,g)+_+this.value.substr(g+_.length)}}class We{constructor(g,_,w,T){if(this.width=g,this.height=_,this.rowSize=w,this.bits=T,_==null&&(_=g),this.height=_,g<1||_<1)throw new x("Both dimensions must be greater than 0");w==null&&(w=Math.floor((g+31)/32)),this.rowSize=w,T==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(g){const _=g.length,w=g[0].length,T=new We(w,_);for(let M=0;M<_;M++){const O=g[M];for(let V=0;V<w;V++)O[V]&&T.set(V,M)}return T}static parseFromString(g,_,w){if(g===null)throw new x("stringRepresentation cannot be null");const T=new Array(g.length);let M=0,O=0,V=-1,W=0,K=0;for(;K<g.length;)if(g.charAt(K)===`
`||g.charAt(K)==="\r"){if(M>O){if(V===-1)V=M-O;else if(M-O!==V)throw new x("row lengths do not match");O=M,W++}K++}else if(g.substring(K,K+_.length)===_)K+=_.length,T[M]=!0,M++;else if(g.substring(K,K+w.length)===w)K+=w.length,T[M]=!1,M++;else throw new x("illegal character encountered: "+g.substring(K));if(M>O){if(V===-1)V=M-O;else if(M-O!==V)throw new x("row lengths do not match");W++}const de=new We(V,W);for(let ke=0;ke<M;ke++)T[ke]&&de.set(Math.floor(ke%V),Math.floor(ke/V));return de}get(g,_){const w=_*this.rowSize+Math.floor(g/32);return(this.bits[w]>>>(g&31)&1)!==0}set(g,_){const w=_*this.rowSize+Math.floor(g/32);this.bits[w]|=1<<(g&31)&4294967295}unset(g,_){const w=_*this.rowSize+Math.floor(g/32);this.bits[w]&=~(1<<(g&31)&4294967295)}flip(g,_){const w=_*this.rowSize+Math.floor(g/32);this.bits[w]^=1<<(g&31)&4294967295}xor(g){if(this.width!==g.getWidth()||this.height!==g.getHeight()||this.rowSize!==g.getRowSize())throw new x("input matrix dimensions do not match");const _=new ee(Math.floor(this.width/32)+1),w=this.rowSize,T=this.bits;for(let M=0,O=this.height;M<O;M++){const V=M*w,W=g.getRow(M,_).getBitArray();for(let K=0;K<w;K++)T[V+K]^=W[K]}}clear(){const g=this.bits,_=g.length;for(let w=0;w<_;w++)g[w]=0}setRegion(g,_,w,T){if(_<0||g<0)throw new x("Left and top must be nonnegative");if(T<1||w<1)throw new x("Height and width must be at least 1");const M=g+w,O=_+T;if(O>this.height||M>this.width)throw new x("The region must fit inside the matrix");const V=this.rowSize,W=this.bits;for(let K=_;K<O;K++){const de=K*V;for(let ke=g;ke<M;ke++)W[de+Math.floor(ke/32)]|=1<<(ke&31)&4294967295}}getRow(g,_){_==null||_.getSize()<this.width?_=new ee(this.width):_.clear();const w=this.rowSize,T=this.bits,M=g*w;for(let O=0;O<w;O++)_.setBulk(O*32,T[M+O]);return _}setRow(g,_){D.arraycopy(_.getBitArray(),0,this.bits,g*this.rowSize,this.rowSize)}rotate180(){const g=this.getWidth(),_=this.getHeight();let w=new ee(g),T=new ee(g);for(let M=0,O=Math.floor((_+1)/2);M<O;M++)w=this.getRow(M,w),T=this.getRow(_-1-M,T),w.reverse(),T.reverse(),this.setRow(M,T),this.setRow(_-1-M,w)}getEnclosingRectangle(){const g=this.width,_=this.height,w=this.rowSize,T=this.bits;let M=g,O=_,V=-1,W=-1;for(let K=0;K<_;K++)for(let de=0;de<w;de++){const ke=T[K*w+de];if(ke!==0){if(K<O&&(O=K),K>W&&(W=K),de*32<M){let Pe=0;for(;(ke<<31-Pe&4294967295)===0;)Pe++;de*32+Pe<M&&(M=de*32+Pe)}if(de*32+31>V){let Pe=31;for(;!(ke>>>Pe);)Pe--;de*32+Pe>V&&(V=de*32+Pe)}}}return V<M||W<O?null:Int32Array.from([M,O,V-M+1,W-O+1])}getTopLeftOnBit(){const g=this.rowSize,_=this.bits;let w=0;for(;w<_.length&&_[w]===0;)w++;if(w===_.length)return null;const T=w/g;let M=w%g*32;const O=_[w];let V=0;for(;(O<<31-V&4294967295)===0;)V++;return M+=V,Int32Array.from([M,T])}getBottomRightOnBit(){const g=this.rowSize,_=this.bits;let w=_.length-1;for(;w>=0&&_[w]===0;)w--;if(w<0)return null;const T=Math.floor(w/g);let M=Math.floor(w%g)*32;const O=_[w];let V=31;for(;!(O>>>V);)V--;return M+=V,Int32Array.from([M,T])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(g){if(!(g instanceof We))return!1;const _=g;return this.width===_.width&&this.height===_.height&&this.rowSize===_.rowSize&&G.equals(this.bits,_.bits)}hashCode(){let g=this.width;return g=31*g+this.width,g=31*g+this.height,g=31*g+this.rowSize,g=31*g+G.hashCode(this.bits),g}toString(g="X ",_="  ",w=`
`){return this.buildToString(g,_,w)}buildToString(g,_,w){let T=new Re;for(let M=0,O=this.height;M<O;M++){for(let V=0,W=this.width;V<W;V++)T.append(this.get(V,M)?g:_);T.append(w)}return T.toString()}clone(){return new We(this.width,this.height,this.rowSize,this.bits.slice())}}class Le extends f{static getNotFoundInstance(){return new Le}}Le.kind="NotFoundException";class ht extends z{constructor(g){super(g),this.luminances=ht.EMPTY,this.buckets=new Int32Array(ht.LUMINANCE_BUCKETS)}getBlackRow(g,_){const w=this.getLuminanceSource(),T=w.getWidth();_==null||_.getSize()<T?_=new ee(T):_.clear(),this.initArrays(T);const M=w.getRow(g,this.luminances),O=this.buckets;for(let W=0;W<T;W++)O[(M[W]&255)>>ht.LUMINANCE_SHIFT]++;const V=ht.estimateBlackPoint(O);if(T<3)for(let W=0;W<T;W++)(M[W]&255)<V&&_.set(W);else{let W=M[0]&255,K=M[1]&255;for(let de=1;de<T-1;de++){const ke=M[de+1]&255;(K*4-W-ke)/2<V&&_.set(de),W=K,K=ke}}return _}getBlackMatrix(){const g=this.getLuminanceSource(),_=g.getWidth(),w=g.getHeight(),T=new We(_,w);this.initArrays(_);const M=this.buckets;for(let W=1;W<5;W++){const K=Math.floor(w*W/5),de=g.getRow(K,this.luminances),ke=Math.floor(_*4/5);for(let Pe=Math.floor(_/5);Pe<ke;Pe++){const Ze=de[Pe]&255;M[Ze>>ht.LUMINANCE_SHIFT]++}}const O=ht.estimateBlackPoint(M),V=g.getMatrix();for(let W=0;W<w;W++){const K=W*_;for(let de=0;de<_;de++)(V[K+de]&255)<O&&T.set(de,W)}return T}createBinarizer(g){return new ht(g)}initArrays(g){this.luminances.length<g&&(this.luminances=new Uint8ClampedArray(g));const _=this.buckets;for(let w=0;w<ht.LUMINANCE_BUCKETS;w++)_[w]=0}static estimateBlackPoint(g){const _=g.length;let w=0,T=0,M=0;for(let de=0;de<_;de++)g[de]>M&&(T=de,M=g[de]),g[de]>w&&(w=g[de]);let O=0,V=0;for(let de=0;de<_;de++){const ke=de-T,Pe=g[de]*ke*ke;Pe>V&&(O=de,V=Pe)}if(T>O){const de=T;T=O,O=de}if(O-T<=_/16)throw new Le;let W=O-1,K=-1;for(let de=O-1;de>T;de--){const ke=de-T,Pe=ke*ke*(O-de)*(w-g[de]);Pe>K&&(W=de,K=Pe)}return W<<ht.LUMINANCE_SHIFT}}ht.LUMINANCE_BITS=5,ht.LUMINANCE_SHIFT=8-ht.LUMINANCE_BITS,ht.LUMINANCE_BUCKETS=1<<ht.LUMINANCE_BITS,ht.EMPTY=Uint8ClampedArray.from([0]);class $e extends ht{constructor(g){super(g),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const g=this.getLuminanceSource(),_=g.getWidth(),w=g.getHeight();if(_>=$e.MINIMUM_DIMENSION&&w>=$e.MINIMUM_DIMENSION){const T=g.getMatrix();let M=_>>$e.BLOCK_SIZE_POWER;(_&$e.BLOCK_SIZE_MASK)!==0&&M++;let O=w>>$e.BLOCK_SIZE_POWER;(w&$e.BLOCK_SIZE_MASK)!==0&&O++;const V=$e.calculateBlackPoints(T,M,O,_,w),W=new We(_,w);$e.calculateThresholdForBlock(T,M,O,_,w,V,W),this.matrix=W}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(g){return new $e(g)}static calculateThresholdForBlock(g,_,w,T,M,O,V){const W=M-$e.BLOCK_SIZE,K=T-$e.BLOCK_SIZE;for(let de=0;de<w;de++){let ke=de<<$e.BLOCK_SIZE_POWER;ke>W&&(ke=W);const Pe=$e.cap(de,2,w-3);for(let Ze=0;Ze<_;Ze++){let mt=Ze<<$e.BLOCK_SIZE_POWER;mt>K&&(mt=K);const vt=$e.cap(Ze,2,_-3);let zt=0;for(let Ri=-2;Ri<=2;Ri++){const zi=O[Pe+Ri];zt+=zi[vt-2]+zi[vt-1]+zi[vt]+zi[vt+1]+zi[vt+2]}const Kt=zt/25;$e.thresholdBlock(g,mt,ke,Kt,T,V)}}}static cap(g,_,w){return g<_?_:g>w?w:g}static thresholdBlock(g,_,w,T,M,O){for(let V=0,W=w*M+_;V<$e.BLOCK_SIZE;V++,W+=M)for(let K=0;K<$e.BLOCK_SIZE;K++)(g[W+K]&255)<=T&&O.set(_+K,w+V)}static calculateBlackPoints(g,_,w,T,M){const O=M-$e.BLOCK_SIZE,V=T-$e.BLOCK_SIZE,W=new Array(w);for(let K=0;K<w;K++){W[K]=new Int32Array(_);let de=K<<$e.BLOCK_SIZE_POWER;de>O&&(de=O);for(let ke=0;ke<_;ke++){let Pe=ke<<$e.BLOCK_SIZE_POWER;Pe>V&&(Pe=V);let Ze=0,mt=255,vt=0;for(let Kt=0,Ri=de*T+Pe;Kt<$e.BLOCK_SIZE;Kt++,Ri+=T){for(let zi=0;zi<$e.BLOCK_SIZE;zi++){const Ci=g[Ri+zi]&255;Ze+=Ci,Ci<mt&&(mt=Ci),Ci>vt&&(vt=Ci)}if(vt-mt>$e.MIN_DYNAMIC_RANGE)for(Kt++,Ri+=T;Kt<$e.BLOCK_SIZE;Kt++,Ri+=T)for(let zi=0;zi<$e.BLOCK_SIZE;zi++)Ze+=g[Ri+zi]&255}let zt=Ze>>$e.BLOCK_SIZE_POWER*2;if(vt-mt<=$e.MIN_DYNAMIC_RANGE&&(zt=mt/2,K>0&&ke>0)){const Kt=(W[K-1][ke]+2*W[K][ke-1]+W[K-1][ke-1])/4;mt<Kt&&(zt=Kt)}W[K][ke]=zt}}return W}}$e.BLOCK_SIZE_POWER=3,$e.BLOCK_SIZE=1<<$e.BLOCK_SIZE_POWER,$e.BLOCK_SIZE_MASK=$e.BLOCK_SIZE-1,$e.MINIMUM_DIMENSION=$e.BLOCK_SIZE*5,$e.MIN_DYNAMIC_RANGE=24;class pt{constructor(g,_){this.width=g,this.height=_}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(g,_,w,T){throw new me("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new me("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new me("This luminance source does not support rotation by 45 degrees.")}toString(){const g=new Uint8ClampedArray(this.width);let _=new Re;for(let w=0;w<this.height;w++){const T=this.getRow(w,g);for(let M=0;M<this.width;M++){const O=T[M]&255;let V;O<64?V="#":O<128?V="+":O<192?V=".":V=" ",_.append(V)}_.append(`
`)}return _.toString()}}class Dt extends pt{constructor(g){super(g.getWidth(),g.getHeight()),this.delegate=g}getRow(g,_){const w=this.delegate.getRow(g,_),T=this.getWidth();for(let M=0;M<T;M++)w[M]=255-(w[M]&255);return w}getMatrix(){const g=this.delegate.getMatrix(),_=this.getWidth()*this.getHeight(),w=new Uint8ClampedArray(_);for(let T=0;T<_;T++)w[T]=255-(g[T]&255);return w}isCropSupported(){return this.delegate.isCropSupported()}crop(g,_,w,T){return new Dt(this.delegate.crop(g,_,w,T))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Dt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Dt(this.delegate.rotateCounterClockwise45())}}class qe extends pt{constructor(g){super(g.width,g.height),this.canvas=g,this.tempCanvasElement=null,this.buffer=qe.makeBufferFromCanvasImageData(g)}static makeBufferFromCanvasImageData(g){const _=g.getContext("2d").getImageData(0,0,g.width,g.height);return qe.toGrayscaleBuffer(_.data,g.width,g.height)}static toGrayscaleBuffer(g,_,w){const T=new Uint8ClampedArray(_*w);for(let M=0,O=0,V=g.length;M<V;M+=4,O++){let W;if(g[M+3]===0)W=255;else{const de=g[M],ke=g[M+1],Pe=g[M+2];W=306*de+601*ke+117*Pe+512>>10}T[O]=W}return T}getRow(g,_){if(g<0||g>=this.getHeight())throw new x("Requested row is outside the image: "+g);const w=this.getWidth(),T=g*w;return _===null?_=this.buffer.slice(T,T+w):(_.length<w&&(_=new Uint8ClampedArray(w)),_.set(this.buffer.slice(T,T+w))),_}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(g,_,w,T){return super.crop(g,_,w,T),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const g=this.canvas.ownerDocument.createElement("canvas");g.width=this.canvas.width,g.height=this.canvas.height,this.tempCanvasElement=g}return this.tempCanvasElement}rotate(g){const _=this.getTempCanvasElement(),w=_.getContext("2d"),T=g*qe.DEGREE_TO_RADIANS,M=this.canvas.width,O=this.canvas.height,V=Math.ceil(Math.abs(Math.cos(T))*M+Math.abs(Math.sin(T))*O),W=Math.ceil(Math.abs(Math.sin(T))*M+Math.abs(Math.cos(T))*O);return _.width=V,_.height=W,w.translate(V/2,W/2),w.rotate(T),w.drawImage(this.canvas,M/-2,O/-2),this.buffer=qe.makeBufferFromCanvasImageData(_),this}invert(){return new Dt(this)}}qe.DEGREE_TO_RADIANS=Math.PI/180;class Nt{constructor(g,_,w){this.deviceId=g,this.label=_,this.kind="videoinput",this.groupId=w||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ni=(globalThis||mr||self||window||void 0)&&(globalThis||mr||self||window||void 0).__awaiter||function(Se,g,_,w){function T(M){return M instanceof _?M:new _(function(O){O(M)})}return new(_||(_=Promise))(function(M,O){function V(de){try{K(w.next(de))}catch(ke){O(ke)}}function W(de){try{K(w.throw(de))}catch(ke){O(ke)}}function K(de){de.done?M(de.value):T(de.value).then(V,W)}K((w=w.apply(Se,g||[])).next())})};class xi{constructor(g,_=500,w){this.reader=g,this.timeBetweenScansMillis=_,this._hints=w,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(g){this._timeBetweenDecodingAttempts=g<0?0:g}set hints(g){this._hints=g||null}get hints(){return this._hints}listVideoInputDevices(){return ni(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const g=yield navigator.mediaDevices.enumerateDevices(),_=[];for(const w of g){const T=w.kind==="video"?"videoinput":w.kind;if(T!=="videoinput")continue;const M=w.deviceId||w.id,O=w.label||`Video device ${_.length+1}`,V=w.groupId,W={deviceId:M,label:O,kind:T,groupId:V};_.push(W)}return _})}getVideoInputDevices(){return ni(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(_=>new Nt(_.deviceId,_.label))})}findDeviceById(g){return ni(this,void 0,void 0,function*(){const _=yield this.listVideoInputDevices();return _?_.find(w=>w.deviceId===g):null})}decodeFromInputVideoDevice(g,_){return ni(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(g,_)})}decodeOnceFromVideoDevice(g,_){return ni(this,void 0,void 0,function*(){this.reset();let w;g?w={deviceId:{exact:g}}:w={facingMode:"environment"};const T={video:w};return yield this.decodeOnceFromConstraints(T,_)})}decodeOnceFromConstraints(g,_){return ni(this,void 0,void 0,function*(){const w=yield navigator.mediaDevices.getUserMedia(g);return yield this.decodeOnceFromStream(w,_)})}decodeOnceFromStream(g,_){return ni(this,void 0,void 0,function*(){this.reset();const w=yield this.attachStreamToVideo(g,_);return yield this.decodeOnce(w)})}decodeFromInputVideoDeviceContinuously(g,_,w){return ni(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(g,_,w)})}decodeFromVideoDevice(g,_,w){return ni(this,void 0,void 0,function*(){let T;g?T={deviceId:{exact:g}}:T={facingMode:"environment"};const M={video:T};return yield this.decodeFromConstraints(M,_,w)})}decodeFromConstraints(g,_,w){return ni(this,void 0,void 0,function*(){const T=yield navigator.mediaDevices.getUserMedia(g);return yield this.decodeFromStream(T,_,w)})}decodeFromStream(g,_,w){return ni(this,void 0,void 0,function*(){this.reset();const T=yield this.attachStreamToVideo(g,_);return yield this.decodeContinuously(T,w)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(g,_){return ni(this,void 0,void 0,function*(){const w=this.prepareVideoElement(_);return this.addVideoSource(w,g),this.videoElement=w,this.stream=g,yield this.playVideoOnLoadAsync(w),w})}playVideoOnLoadAsync(g){return new Promise((_,w)=>this.playVideoOnLoad(g,()=>_()))}playVideoOnLoad(g,_){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(g),g.addEventListener("ended",this.videoEndedListener),g.addEventListener("canplay",this.videoCanPlayListener),g.addEventListener("playing",_),this.tryPlayVideo(g)}isVideoPlaying(g){return g.currentTime>0&&!g.paused&&!g.ended&&g.readyState>2}tryPlayVideo(g){return ni(this,void 0,void 0,function*(){if(this.isVideoPlaying(g)){console.warn("Trying to play video that is already playing.");return}try{yield g.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(g,_){const w=document.getElementById(g);if(!w)throw new y(`element with id '${g}' not found`);if(w.nodeName.toLowerCase()!==_.toLowerCase())throw new y(`element with id '${g}' must be an ${_} element`);return w}decodeFromImage(g,_){if(!g&&!_)throw new y("either imageElement with a src set or an url must be provided");return _&&!g?this.decodeFromImageUrl(_):this.decodeFromImageElement(g)}decodeFromVideo(g,_){if(!g&&!_)throw new y("Either an element with a src set or an URL must be provided");return _&&!g?this.decodeFromVideoUrl(_):this.decodeFromVideoElement(g)}decodeFromVideoContinuously(g,_,w){if(g===void 0&&_===void 0)throw new y("Either an element with a src set or an URL must be provided");return _&&!g?this.decodeFromVideoUrlContinuously(_,w):this.decodeFromVideoElementContinuously(g,w)}decodeFromImageElement(g){if(!g)throw new y("An image element must be provided.");this.reset();const _=this.prepareImageElement(g);this.imageElement=_;let w;return this.isImageLoaded(_)?w=this.decodeOnce(_,!1,!0):w=this._decodeOnLoadImage(_),w}decodeFromVideoElement(g){const _=this._decodeFromVideoElementSetup(g);return this._decodeOnLoadVideo(_)}decodeFromVideoElementContinuously(g,_){const w=this._decodeFromVideoElementSetup(g);return this._decodeOnLoadVideoContinuously(w,_)}_decodeFromVideoElementSetup(g){if(!g)throw new y("A video element must be provided.");this.reset();const _=this.prepareVideoElement(g);return this.videoElement=_,_}decodeFromImageUrl(g){if(!g)throw new y("An URL must be provided.");this.reset();const _=this.prepareImageElement();this.imageElement=_;const w=this._decodeOnLoadImage(_);return _.src=g,w}decodeFromVideoUrl(g){if(!g)throw new y("An URL must be provided.");this.reset();const _=this.prepareVideoElement(),w=this.decodeFromVideoElement(_);return _.src=g,w}decodeFromVideoUrlContinuously(g,_){if(!g)throw new y("An URL must be provided.");this.reset();const w=this.prepareVideoElement(),T=this.decodeFromVideoElementContinuously(w,_);return w.src=g,T}_decodeOnLoadImage(g){return new Promise((_,w)=>{this.imageLoadedListener=()=>this.decodeOnce(g,!1,!0).then(_,w),g.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(g){return ni(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(g),yield this.decodeOnce(g)})}_decodeOnLoadVideoContinuously(g,_){return ni(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(g),this.decodeContinuously(g,_)})}isImageLoaded(g){return!(!g.complete||g.naturalWidth===0)}prepareImageElement(g){let _;return typeof g>"u"&&(_=document.createElement("img"),_.width=200,_.height=200),typeof g=="string"&&(_=this.getMediaElement(g,"img")),g instanceof HTMLImageElement&&(_=g),_}prepareVideoElement(g){let _;return!g&&typeof document<"u"&&(_=document.createElement("video"),_.width=200,_.height=200),typeof g=="string"&&(_=this.getMediaElement(g,"video")),g instanceof HTMLVideoElement&&(_=g),_.setAttribute("autoplay","true"),_.setAttribute("muted","true"),_.setAttribute("playsinline","true"),_}decodeOnce(g,_=!0,w=!0){this._stopAsyncDecode=!1;const T=(M,O)=>{if(this._stopAsyncDecode){O(new Le("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const V=this.decode(g);M(V)}catch(V){const W=_&&V instanceof Le,de=(V instanceof E||V instanceof J)&&w;if(W||de)return setTimeout(T,this._timeBetweenDecodingAttempts,M,O);O(V)}};return new Promise((M,O)=>T(M,O))}decodeContinuously(g,_){this._stopContinuousDecode=!1;const w=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const T=this.decode(g);_(T,null),setTimeout(w,this.timeBetweenScansMillis)}catch(T){_(null,T);const M=T instanceof E||T instanceof J,O=T instanceof Le;(M||O)&&setTimeout(w,this._timeBetweenDecodingAttempts)}};w()}decode(g){const _=this.createBinaryBitmap(g);return this.decodeBitmap(_)}_isHTMLVideoElement(g){return g.videoWidth!==0}drawFrameOnCanvas(g,_,w){_||(_={sx:0,sy:0,sWidth:g.videoWidth,sHeight:g.videoHeight,dx:0,dy:0,dWidth:g.videoWidth,dHeight:g.videoHeight}),w||(w=this.captureCanvasContext),w.drawImage(g,_.sx,_.sy,_.sWidth,_.sHeight,_.dx,_.dy,_.dWidth,_.dHeight)}drawImageOnCanvas(g,_,w=this.captureCanvasContext){_||(_={sx:0,sy:0,sWidth:g.naturalWidth,sHeight:g.naturalHeight,dx:0,dy:0,dWidth:g.naturalWidth,dHeight:g.naturalHeight}),w||(w=this.captureCanvasContext),w.drawImage(g,_.sx,_.sy,_.sWidth,_.sHeight,_.dx,_.dy,_.dWidth,_.dHeight)}createBinaryBitmap(g){this.getCaptureCanvasContext(g),this._isHTMLVideoElement(g)?this.drawFrameOnCanvas(g):this.drawImageOnCanvas(g);const _=this.getCaptureCanvas(g),w=new qe(_),T=new $e(w);return new S(T)}getCaptureCanvasContext(g){if(!this.captureCanvasContext){const w=this.getCaptureCanvas(g).getContext("2d");this.captureCanvasContext=w}return this.captureCanvasContext}getCaptureCanvas(g){if(!this.captureCanvas){const _=this.createCaptureCanvas(g);this.captureCanvas=_}return this.captureCanvas}decodeBitmap(g){return this.reader.decode(g,this._hints)}createCaptureCanvas(g){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const _=document.createElement("canvas");let w,T;return typeof g<"u"&&(g instanceof HTMLVideoElement?(w=g.videoWidth,T=g.videoHeight):g instanceof HTMLImageElement&&(w=g.naturalWidth||g.width,T=g.naturalHeight||g.height)),_.style.width=w+"px",_.style.height=T+"px",_.width=w,_.height=T,_}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(g=>g.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(g,_){try{g.srcObject=_}catch{g.src=URL.createObjectURL(_)}}cleanVideoSource(g){try{g.srcObject=null}catch{g.src=""}this.videoElement.removeAttribute("src")}}class Lt{constructor(g,_,w=_==null?0:8*_.length,T,M,O=D.currentTimeMillis()){this.text=g,this.rawBytes=_,this.numBits=w,this.resultPoints=T,this.format=M,this.timestamp=O,this.text=g,this.rawBytes=_,w==null?this.numBits=_==null?0:8*_.length:this.numBits=w,this.resultPoints=T,this.format=M,this.resultMetadata=null,O==null?this.timestamp=D.currentTimeMillis():this.timestamp=O}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(g,_){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(g,_)}putAllMetadata(g){g!==null&&(this.resultMetadata===null?this.resultMetadata=g:this.resultMetadata=new Map(g))}addResultPoints(g){const _=this.resultPoints;if(_===null)this.resultPoints=g;else if(g!==null&&g.length>0){const w=new Array(_.length+g.length);D.arraycopy(_,0,w,0,_.length),D.arraycopy(g,0,w,_.length,g.length),this.resultPoints=w}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Tt;(function(Se){Se[Se.AZTEC=0]="AZTEC",Se[Se.CODABAR=1]="CODABAR",Se[Se.CODE_39=2]="CODE_39",Se[Se.CODE_93=3]="CODE_93",Se[Se.CODE_128=4]="CODE_128",Se[Se.DATA_MATRIX=5]="DATA_MATRIX",Se[Se.EAN_8=6]="EAN_8",Se[Se.EAN_13=7]="EAN_13",Se[Se.ITF=8]="ITF",Se[Se.MAXICODE=9]="MAXICODE",Se[Se.PDF_417=10]="PDF_417",Se[Se.QR_CODE=11]="QR_CODE",Se[Se.RSS_14=12]="RSS_14",Se[Se.RSS_EXPANDED=13]="RSS_EXPANDED",Se[Se.UPC_A=14]="UPC_A",Se[Se.UPC_E=15]="UPC_E",Se[Se.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Tt||(Tt={}));var wt=Tt,mi;(function(Se){Se[Se.OTHER=0]="OTHER",Se[Se.ORIENTATION=1]="ORIENTATION",Se[Se.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Se[Se.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Se[Se.ISSUE_NUMBER=4]="ISSUE_NUMBER",Se[Se.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Se[Se.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Se[Se.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Se[Se.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Se[Se.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Se[Se.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(mi||(mi={}));var bi=mi;class Zi{constructor(g,_,w,T,M=-1,O=-1){this.rawBytes=g,this.text=_,this.byteSegments=w,this.ecLevel=T,this.structuredAppendSequenceNumber=M,this.structuredAppendParity=O,this.numBits=g==null?0:8*g.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(g){this.numBits=g}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(g){this.errorsCorrected=g}getErasures(){return this.erasures}setErasures(g){this.erasures=g}getOther(){return this.other}setOther(g){this.other=g}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Li{exp(g){return this.expTable[g]}log(g){if(g===0)throw new x;return this.logTable[g]}static addOrSubtract(g,_){return g^_}}class si{constructor(g,_){if(_.length===0)throw new x;this.field=g;const w=_.length;if(w>1&&_[0]===0){let T=1;for(;T<w&&_[T]===0;)T++;T===w?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(w-T),D.arraycopy(_,T,this.coefficients,0,this.coefficients.length))}else this.coefficients=_}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(g){return this.coefficients[this.coefficients.length-1-g]}evaluateAt(g){if(g===0)return this.getCoefficient(0);const _=this.coefficients;let w;if(g===1){w=0;for(let O=0,V=_.length;O!==V;O++){const W=_[O];w=Li.addOrSubtract(w,W)}return w}w=_[0];const T=_.length,M=this.field;for(let O=1;O<T;O++)w=Li.addOrSubtract(M.multiply(g,w),_[O]);return w}addOrSubtract(g){if(!this.field.equals(g.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero())return g;if(g.isZero())return this;let _=this.coefficients,w=g.coefficients;if(_.length>w.length){const O=_;_=w,w=O}let T=new Int32Array(w.length);const M=w.length-_.length;D.arraycopy(w,0,T,0,M);for(let O=M;O<w.length;O++)T[O]=Li.addOrSubtract(_[O-M],w[O]);return new si(this.field,T)}multiply(g){if(!this.field.equals(g.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero()||g.isZero())return this.field.getZero();const _=this.coefficients,w=_.length,T=g.coefficients,M=T.length,O=new Int32Array(w+M-1),V=this.field;for(let W=0;W<w;W++){const K=_[W];for(let de=0;de<M;de++)O[W+de]=Li.addOrSubtract(O[W+de],V.multiply(K,T[de]))}return new si(V,O)}multiplyScalar(g){if(g===0)return this.field.getZero();if(g===1)return this;const _=this.coefficients.length,w=this.field,T=new Int32Array(_),M=this.coefficients;for(let O=0;O<_;O++)T[O]=w.multiply(M[O],g);return new si(w,T)}multiplyByMonomial(g,_){if(g<0)throw new x;if(_===0)return this.field.getZero();const w=this.coefficients,T=w.length,M=new Int32Array(T+g),O=this.field;for(let V=0;V<T;V++)M[V]=O.multiply(w[V],_);return new si(O,M)}divide(g){if(!this.field.equals(g.field))throw new x("GenericGFPolys do not have same GenericGF field");if(g.isZero())throw new x("Divide by 0");const _=this.field;let w=_.getZero(),T=this;const M=g.getCoefficient(g.getDegree()),O=_.inverse(M);for(;T.getDegree()>=g.getDegree()&&!T.isZero();){const V=T.getDegree()-g.getDegree(),W=_.multiply(T.getCoefficient(T.getDegree()),O),K=g.multiplyByMonomial(V,W),de=_.buildMonomial(V,W);w=w.addOrSubtract(de),T=T.addOrSubtract(K)}return[w,T]}toString(){let g="";for(let _=this.getDegree();_>=0;_--){let w=this.getCoefficient(_);if(w!==0){if(w<0?(g+=" - ",w=-w):g.length>0&&(g+=" + "),_===0||w!==1){const T=this.field.log(w);T===0?g+="1":T===1?g+="a":(g+="a^",g+=T)}_!==0&&(_===1?g+="x":(g+="x^",g+=_))}}return g}}class fn extends f{}fn.kind="ArithmeticException";class Ii extends Li{constructor(g,_,w){super(),this.primitive=g,this.size=_,this.generatorBase=w;const T=new Int32Array(_);let M=1;for(let V=0;V<_;V++)T[V]=M,M*=2,M>=_&&(M^=g,M&=_-1);this.expTable=T;const O=new Int32Array(_);for(let V=0;V<_-1;V++)O[T[V]]=V;this.logTable=O,this.zero=new si(this,Int32Array.from([0])),this.one=new si(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(g,_){if(g<0)throw new x;if(_===0)return this.zero;const w=new Int32Array(g+1);return w[0]=_,new si(this,w)}inverse(g){if(g===0)throw new fn;return this.expTable[this.size-this.logTable[g]-1]}multiply(g,_){return g===0||_===0?0:this.expTable[(this.logTable[g]+this.logTable[_])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Z.toHexString(this.primitive)+","+this.size+")"}equals(g){return g===this}}Ii.AZTEC_DATA_12=new Ii(4201,4096,1),Ii.AZTEC_DATA_10=new Ii(1033,1024,1),Ii.AZTEC_DATA_6=new Ii(67,64,1),Ii.AZTEC_PARAM=new Ii(19,16,1),Ii.QR_CODE_FIELD_256=new Ii(285,256,0),Ii.DATA_MATRIX_FIELD_256=new Ii(301,256,1),Ii.AZTEC_DATA_8=Ii.DATA_MATRIX_FIELD_256,Ii.MAXICODE_FIELD_64=Ii.AZTEC_DATA_6;class Qi extends f{}Qi.kind="ReedSolomonException";class rn extends f{}rn.kind="IllegalStateException";class xn{constructor(g){this.field=g}decode(g,_){const w=this.field,T=new si(w,g),M=new Int32Array(_);let O=!0;for(let Ze=0;Ze<_;Ze++){const mt=T.evaluateAt(w.exp(Ze+w.getGeneratorBase()));M[M.length-1-Ze]=mt,mt!==0&&(O=!1)}if(O)return;const V=new si(w,M),W=this.runEuclideanAlgorithm(w.buildMonomial(_,1),V,_),K=W[0],de=W[1],ke=this.findErrorLocations(K),Pe=this.findErrorMagnitudes(de,ke);for(let Ze=0;Ze<ke.length;Ze++){const mt=g.length-1-w.log(ke[Ze]);if(mt<0)throw new Qi("Bad error location");g[mt]=Ii.addOrSubtract(g[mt],Pe[Ze])}}runEuclideanAlgorithm(g,_,w){if(g.getDegree()<_.getDegree()){const Ze=g;g=_,_=Ze}const T=this.field;let M=g,O=_,V=T.getZero(),W=T.getOne();for(;O.getDegree()>=(w/2|0);){let Ze=M,mt=V;if(M=O,V=W,M.isZero())throw new Qi("r_{i-1} was zero");O=Ze;let vt=T.getZero();const zt=M.getCoefficient(M.getDegree()),Kt=T.inverse(zt);for(;O.getDegree()>=M.getDegree()&&!O.isZero();){const Ri=O.getDegree()-M.getDegree(),zi=T.multiply(O.getCoefficient(O.getDegree()),Kt);vt=vt.addOrSubtract(T.buildMonomial(Ri,zi)),O=O.addOrSubtract(M.multiplyByMonomial(Ri,zi))}if(W=vt.multiply(V).addOrSubtract(mt),O.getDegree()>=M.getDegree())throw new rn("Division algorithm failed to reduce polynomial?")}const K=W.getCoefficient(0);if(K===0)throw new Qi("sigmaTilde(0) was zero");const de=T.inverse(K),ke=W.multiplyScalar(de),Pe=O.multiplyScalar(de);return[ke,Pe]}findErrorLocations(g){const _=g.getDegree();if(_===1)return Int32Array.from([g.getCoefficient(1)]);const w=new Int32Array(_);let T=0;const M=this.field;for(let O=1;O<M.getSize()&&T<_;O++)g.evaluateAt(O)===0&&(w[T]=M.inverse(O),T++);if(T!==_)throw new Qi("Error locator degree does not match number of roots");return w}findErrorMagnitudes(g,_){const w=_.length,T=new Int32Array(w),M=this.field;for(let O=0;O<w;O++){const V=M.inverse(_[O]);let W=1;for(let K=0;K<w;K++)if(O!==K){const de=M.multiply(_[K],V),ke=(de&1)===0?de|1:de&-2;W=M.multiply(W,ke)}T[O]=M.multiply(g.evaluateAt(V),M.inverse(W)),M.getGeneratorBase()!==0&&(T[O]=M.multiply(T[O],V))}return T}}var Ye;(function(Se){Se[Se.UPPER=0]="UPPER",Se[Se.LOWER=1]="LOWER",Se[Se.MIXED=2]="MIXED",Se[Se.DIGIT=3]="DIGIT",Se[Se.PUNCT=4]="PUNCT",Se[Se.BINARY=5]="BINARY"})(Ye||(Ye={}));class qt{decode(g){this.ddata=g;let _=g.getBits(),w=this.extractBits(_),T=this.correctBits(w),M=qt.convertBoolArrayToByteArray(T),O=qt.getEncodedData(T),V=new Zi(M,O,null,null);return V.setNumBits(T.length),V}static highLevelDecode(g){return this.getEncodedData(g)}static getEncodedData(g){let _=g.length,w=Ye.UPPER,T=Ye.UPPER,M="",O=0;for(;O<_;)if(T===Ye.BINARY){if(_-O<5)break;let V=qt.readCode(g,O,5);if(O+=5,V===0){if(_-O<11)break;V=qt.readCode(g,O,11)+31,O+=11}for(let W=0;W<V;W++){if(_-O<8){O=_;break}const K=qt.readCode(g,O,8);M+=ye.castAsNonUtf8Char(K),O+=8}T=w}else{let V=T===Ye.DIGIT?4:5;if(_-O<V)break;let W=qt.readCode(g,O,V);O+=V;let K=qt.getCharacter(T,W);K.startsWith("CTRL_")?(w=T,T=qt.getTable(K.charAt(5)),K.charAt(6)==="L"&&(w=T)):(M+=K,T=w)}return M}static getTable(g){switch(g){case"L":return Ye.LOWER;case"P":return Ye.PUNCT;case"M":return Ye.MIXED;case"D":return Ye.DIGIT;case"B":return Ye.BINARY;case"U":default:return Ye.UPPER}}static getCharacter(g,_){switch(g){case Ye.UPPER:return qt.UPPER_TABLE[_];case Ye.LOWER:return qt.LOWER_TABLE[_];case Ye.MIXED:return qt.MIXED_TABLE[_];case Ye.PUNCT:return qt.PUNCT_TABLE[_];case Ye.DIGIT:return qt.DIGIT_TABLE[_];default:throw new rn("Bad table")}}correctBits(g){let _,w;this.ddata.getNbLayers()<=2?(w=6,_=Ii.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(w=8,_=Ii.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(w=10,_=Ii.AZTEC_DATA_10):(w=12,_=Ii.AZTEC_DATA_12);let T=this.ddata.getNbDatablocks(),M=g.length/w;if(M<T)throw new J;let O=g.length%w,V=new Int32Array(M);for(let Pe=0;Pe<M;Pe++,O+=w)V[Pe]=qt.readCode(g,O,w);try{new xn(_).decode(V,M-T)}catch(Pe){throw new J(Pe)}let W=(1<<w)-1,K=0;for(let Pe=0;Pe<T;Pe++){let Ze=V[Pe];if(Ze===0||Ze===W)throw new J;(Ze===1||Ze===W-1)&&K++}let de=new Array(T*w-K),ke=0;for(let Pe=0;Pe<T;Pe++){let Ze=V[Pe];if(Ze===1||Ze===W-1)de.fill(Ze>1,ke,ke+w-1),ke+=w-1;else for(let mt=w-1;mt>=0;--mt)de[ke++]=(Ze&1<<mt)!==0}return de}extractBits(g){let _=this.ddata.isCompact(),w=this.ddata.getNbLayers(),T=(_?11:14)+w*4,M=new Int32Array(T),O=new Array(this.totalBitsInLayer(w,_));if(_)for(let V=0;V<M.length;V++)M[V]=V;else{let V=T+1+2*Z.truncDivision(Z.truncDivision(T,2)-1,15),W=T/2,K=Z.truncDivision(V,2);for(let de=0;de<W;de++){let ke=de+Z.truncDivision(de,15);M[W-de-1]=K-ke-1,M[W+de]=K+ke+1}}for(let V=0,W=0;V<w;V++){let K=(w-V)*4+(_?9:12),de=V*2,ke=T-1-de;for(let Pe=0;Pe<K;Pe++){let Ze=Pe*2;for(let mt=0;mt<2;mt++)O[W+Ze+mt]=g.get(M[de+mt],M[de+Pe]),O[W+2*K+Ze+mt]=g.get(M[de+Pe],M[ke-mt]),O[W+4*K+Ze+mt]=g.get(M[ke-mt],M[ke-Pe]),O[W+6*K+Ze+mt]=g.get(M[ke-Pe],M[de+mt])}W+=K*8}return O}static readCode(g,_,w){let T=0;for(let M=_;M<_+w;M++)T<<=1,g[M]&&(T|=1);return T}static readByte(g,_){let w=g.length-_;return w>=8?qt.readCode(g,_,8):qt.readCode(g,_,w)<<8-w}static convertBoolArrayToByteArray(g){let _=new Uint8Array((g.length+7)/8);for(let w=0;w<_.length;w++)_[w]=qt.readByte(g,8*w);return _}totalBitsInLayer(g,_){return((_?88:112)+16*g)*g}}qt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class li{constructor(){}static round(g){return g===NaN?0:g<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:g>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:g+(g<0?-.5:.5)|0}static distance(g,_,w,T){const M=g-w,O=_-T;return Math.sqrt(M*M+O*O)}static sum(g){let _=0;for(let w=0,T=g.length;w!==T;w++){const M=g[w];_+=M}return _}}class Fi{static floatToIntBits(g){return g}}Fi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ci{constructor(g,_){this.x=g,this.y=_}getX(){return this.x}getY(){return this.y}equals(g){if(g instanceof ci){const _=g;return this.x===_.x&&this.y===_.y}return!1}hashCode(){return 31*Fi.floatToIntBits(this.x)+Fi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(g){const _=this.distance(g[0],g[1]),w=this.distance(g[1],g[2]),T=this.distance(g[0],g[2]);let M,O,V;if(w>=_&&w>=T?(O=g[0],M=g[1],V=g[2]):T>=w&&T>=_?(O=g[1],M=g[0],V=g[2]):(O=g[2],M=g[0],V=g[1]),this.crossProductZ(M,O,V)<0){const W=M;M=V,V=W}g[0]=M,g[1]=O,g[2]=V}static distance(g,_){return li.distance(g.x,g.y,_.x,_.y)}static crossProductZ(g,_,w){const T=_.x,M=_.y;return(w.x-T)*(g.y-M)-(w.y-M)*(g.x-T)}}class Wi{constructor(g,_){this.bits=g,this.points=_}getBits(){return this.bits}getPoints(){return this.points}}class wi extends Wi{constructor(g,_,w,T,M){super(g,_),this.compact=w,this.nbDatablocks=T,this.nbLayers=M}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ti{constructor(g,_,w,T){this.image=g,this.height=g.getHeight(),this.width=g.getWidth(),_==null&&(_=Ti.INIT_SIZE),w==null&&(w=g.getWidth()/2|0),T==null&&(T=g.getHeight()/2|0);const M=_/2|0;if(this.leftInit=w-M,this.rightInit=w+M,this.upInit=T-M,this.downInit=T+M,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Le}detect(){let g=this.leftInit,_=this.rightInit,w=this.upInit,T=this.downInit,M=!1,O=!0,V=!1,W=!1,K=!1,de=!1,ke=!1;const Pe=this.width,Ze=this.height;for(;O;){O=!1;let mt=!0;for(;(mt||!W)&&_<Pe;)mt=this.containsBlackPoint(w,T,_,!1),mt?(_++,O=!0,W=!0):W||_++;if(_>=Pe){M=!0;break}let vt=!0;for(;(vt||!K)&&T<Ze;)vt=this.containsBlackPoint(g,_,T,!0),vt?(T++,O=!0,K=!0):K||T++;if(T>=Ze){M=!0;break}let zt=!0;for(;(zt||!de)&&g>=0;)zt=this.containsBlackPoint(w,T,g,!1),zt?(g--,O=!0,de=!0):de||g--;if(g<0){M=!0;break}let Kt=!0;for(;(Kt||!ke)&&w>=0;)Kt=this.containsBlackPoint(g,_,w,!0),Kt?(w--,O=!0,ke=!0):ke||w--;if(w<0){M=!0;break}O&&(V=!0)}if(!M&&V){const mt=_-g;let vt=null;for(let zi=1;vt===null&&zi<mt;zi++)vt=this.getBlackPointOnSegment(g,T-zi,g+zi,T);if(vt==null)throw new Le;let zt=null;for(let zi=1;zt===null&&zi<mt;zi++)zt=this.getBlackPointOnSegment(g,w+zi,g+zi,w);if(zt==null)throw new Le;let Kt=null;for(let zi=1;Kt===null&&zi<mt;zi++)Kt=this.getBlackPointOnSegment(_,w+zi,_-zi,w);if(Kt==null)throw new Le;let Ri=null;for(let zi=1;Ri===null&&zi<mt;zi++)Ri=this.getBlackPointOnSegment(_,T-zi,_-zi,T);if(Ri==null)throw new Le;return this.centerEdges(Ri,vt,Kt,zt)}else throw new Le}getBlackPointOnSegment(g,_,w,T){const M=li.round(li.distance(g,_,w,T)),O=(w-g)/M,V=(T-_)/M,W=this.image;for(let K=0;K<M;K++){const de=li.round(g+K*O),ke=li.round(_+K*V);if(W.get(de,ke))return new ci(de,ke)}return null}centerEdges(g,_,w,T){const M=g.getX(),O=g.getY(),V=_.getX(),W=_.getY(),K=w.getX(),de=w.getY(),ke=T.getX(),Pe=T.getY(),Ze=Ti.CORR;return M<this.width/2?[new ci(ke-Ze,Pe+Ze),new ci(V+Ze,W+Ze),new ci(K-Ze,de-Ze),new ci(M+Ze,O-Ze)]:[new ci(ke+Ze,Pe+Ze),new ci(V+Ze,W-Ze),new ci(K-Ze,de+Ze),new ci(M-Ze,O-Ze)]}containsBlackPoint(g,_,w,T){const M=this.image;if(T){for(let O=g;O<=_;O++)if(M.get(O,w))return!0}else for(let O=g;O<=_;O++)if(M.get(w,O))return!0;return!1}}Ti.INIT_SIZE=10,Ti.CORR=1;class Di{static checkAndNudgePoints(g,_){const w=g.getWidth(),T=g.getHeight();let M=!0;for(let O=0;O<_.length&&M;O+=2){const V=Math.floor(_[O]),W=Math.floor(_[O+1]);if(V<-1||V>w||W<-1||W>T)throw new Le;M=!1,V===-1?(_[O]=0,M=!0):V===w&&(_[O]=w-1,M=!0),W===-1?(_[O+1]=0,M=!0):W===T&&(_[O+1]=T-1,M=!0)}M=!0;for(let O=_.length-2;O>=0&&M;O-=2){const V=Math.floor(_[O]),W=Math.floor(_[O+1]);if(V<-1||V>w||W<-1||W>T)throw new Le;M=!1,V===-1?(_[O]=0,M=!0):V===w&&(_[O]=w-1,M=!0),W===-1?(_[O+1]=0,M=!0):W===T&&(_[O+1]=T-1,M=!0)}}}class dt{constructor(g,_,w,T,M,O,V,W,K){this.a11=g,this.a21=_,this.a31=w,this.a12=T,this.a22=M,this.a32=O,this.a13=V,this.a23=W,this.a33=K}static quadrilateralToQuadrilateral(g,_,w,T,M,O,V,W,K,de,ke,Pe,Ze,mt,vt,zt){const Kt=dt.quadrilateralToSquare(g,_,w,T,M,O,V,W);return dt.squareToQuadrilateral(K,de,ke,Pe,Ze,mt,vt,zt).times(Kt)}transformPoints(g){const _=g.length,w=this.a11,T=this.a12,M=this.a13,O=this.a21,V=this.a22,W=this.a23,K=this.a31,de=this.a32,ke=this.a33;for(let Pe=0;Pe<_;Pe+=2){const Ze=g[Pe],mt=g[Pe+1],vt=M*Ze+W*mt+ke;g[Pe]=(w*Ze+O*mt+K)/vt,g[Pe+1]=(T*Ze+V*mt+de)/vt}}transformPointsWithValues(g,_){const w=this.a11,T=this.a12,M=this.a13,O=this.a21,V=this.a22,W=this.a23,K=this.a31,de=this.a32,ke=this.a33,Pe=g.length;for(let Ze=0;Ze<Pe;Ze++){const mt=g[Ze],vt=_[Ze],zt=M*mt+W*vt+ke;g[Ze]=(w*mt+O*vt+K)/zt,_[Ze]=(T*mt+V*vt+de)/zt}}static squareToQuadrilateral(g,_,w,T,M,O,V,W){const K=g-w+M-V,de=_-T+O-W;if(K===0&&de===0)return new dt(w-g,M-w,g,T-_,O-T,_,0,0,1);{const ke=w-M,Pe=V-M,Ze=T-O,mt=W-O,vt=ke*mt-Pe*Ze,zt=(K*mt-Pe*de)/vt,Kt=(ke*de-K*Ze)/vt;return new dt(w-g+zt*w,V-g+Kt*V,g,T-_+zt*T,W-_+Kt*W,_,zt,Kt,1)}}static quadrilateralToSquare(g,_,w,T,M,O,V,W){return dt.squareToQuadrilateral(g,_,w,T,M,O,V,W).buildAdjoint()}buildAdjoint(){return new dt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(g){return new dt(this.a11*g.a11+this.a21*g.a12+this.a31*g.a13,this.a11*g.a21+this.a21*g.a22+this.a31*g.a23,this.a11*g.a31+this.a21*g.a32+this.a31*g.a33,this.a12*g.a11+this.a22*g.a12+this.a32*g.a13,this.a12*g.a21+this.a22*g.a22+this.a32*g.a23,this.a12*g.a31+this.a22*g.a32+this.a32*g.a33,this.a13*g.a11+this.a23*g.a12+this.a33*g.a13,this.a13*g.a21+this.a23*g.a22+this.a33*g.a23,this.a13*g.a31+this.a23*g.a32+this.a33*g.a33)}}class xe extends Di{sampleGrid(g,_,w,T,M,O,V,W,K,de,ke,Pe,Ze,mt,vt,zt,Kt,Ri,zi){const Ci=dt.quadrilateralToQuadrilateral(T,M,O,V,W,K,de,ke,Pe,Ze,mt,vt,zt,Kt,Ri,zi);return this.sampleGridWithTransform(g,_,w,Ci)}sampleGridWithTransform(g,_,w,T){if(_<=0||w<=0)throw new Le;const M=new We(_,w),O=new Float32Array(2*_);for(let V=0;V<w;V++){const W=O.length,K=V+.5;for(let de=0;de<W;de+=2)O[de]=de/2+.5,O[de+1]=K;T.transformPoints(O),Di.checkAndNudgePoints(g,O);try{for(let de=0;de<W;de+=2)g.get(Math.floor(O[de]),Math.floor(O[de+1]))&&M.set(de/2,V)}catch{throw new Le}}return M}}class be{static setGridSampler(g){be.gridSampler=g}static getInstance(){return be.gridSampler}}be.gridSampler=new xe;class Ce{constructor(g,_){this.x=g,this.y=_}toResultPoint(){return new ci(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class tt{constructor(g){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=g}detect(){return this.detectMirror(!1)}detectMirror(g){let _=this.getMatrixCenter(),w=this.getBullsEyeCorners(_);if(g){let O=w[0];w[0]=w[2],w[2]=O}this.extractParameters(w);let T=this.sampleGrid(this.image,w[this.shift%4],w[(this.shift+1)%4],w[(this.shift+2)%4],w[(this.shift+3)%4]),M=this.getMatrixCornerPoints(w);return new wi(T,M,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(g){if(!this.isValidPoint(g[0])||!this.isValidPoint(g[1])||!this.isValidPoint(g[2])||!this.isValidPoint(g[3]))throw new Le;let _=2*this.nbCenterLayers,w=new Int32Array([this.sampleLine(g[0],g[1],_),this.sampleLine(g[1],g[2],_),this.sampleLine(g[2],g[3],_),this.sampleLine(g[3],g[0],_)]);this.shift=this.getRotation(w,_);let T=0;for(let O=0;O<4;O++){let V=w[(this.shift+O)%4];this.compact?(T<<=7,T+=V>>1&127):(T<<=10,T+=(V>>2&992)+(V>>1&31))}let M=this.getCorrectedParameterData(T,this.compact);this.compact?(this.nbLayers=(M>>6)+1,this.nbDataBlocks=(M&63)+1):(this.nbLayers=(M>>11)+1,this.nbDataBlocks=(M&2047)+1)}getRotation(g,_){let w=0;g.forEach((T,M,O)=>{let V=(T>>_-2<<1)+(T&1);w=(w<<3)+V}),w=((w&1)<<11)+(w>>1);for(let T=0;T<4;T++)if(Z.bitCount(w^this.EXPECTED_CORNER_BITS[T])<=2)return T;throw new Le}getCorrectedParameterData(g,_){let w,T;_?(w=7,T=2):(w=10,T=4);let M=w-T,O=new Int32Array(w);for(let W=w-1;W>=0;--W)O[W]=g&15,g>>=4;try{new xn(Ii.AZTEC_PARAM).decode(O,M)}catch{throw new Le}let V=0;for(let W=0;W<T;W++)V=(V<<4)+O[W];return V}getBullsEyeCorners(g){let _=g,w=g,T=g,M=g,O=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ke=this.getFirstDifferent(_,O,1,-1),Pe=this.getFirstDifferent(w,O,1,1),Ze=this.getFirstDifferent(T,O,-1,1),mt=this.getFirstDifferent(M,O,-1,-1);if(this.nbCenterLayers>2){let vt=this.distancePoint(mt,ke)*this.nbCenterLayers/(this.distancePoint(M,_)*(this.nbCenterLayers+2));if(vt<.75||vt>1.25||!this.isWhiteOrBlackRectangle(ke,Pe,Ze,mt))break}_=ke,w=Pe,T=Ze,M=mt,O=!O}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Le;this.compact=this.nbCenterLayers===5;let V=new ci(_.getX()+.5,_.getY()-.5),W=new ci(w.getX()+.5,w.getY()+.5),K=new ci(T.getX()-.5,T.getY()+.5),de=new ci(M.getX()-.5,M.getY()-.5);return this.expandSquare([V,W,K,de],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let g,_,w,T;try{let V=new Ti(this.image).detect();g=V[0],_=V[1],w=V[2],T=V[3]}catch{let W=this.image.getWidth()/2,K=this.image.getHeight()/2;g=this.getFirstDifferent(new Ce(W+7,K-7),!1,1,-1).toResultPoint(),_=this.getFirstDifferent(new Ce(W+7,K+7),!1,1,1).toResultPoint(),w=this.getFirstDifferent(new Ce(W-7,K+7),!1,-1,1).toResultPoint(),T=this.getFirstDifferent(new Ce(W-7,K-7),!1,-1,-1).toResultPoint()}let M=li.round((g.getX()+T.getX()+_.getX()+w.getX())/4),O=li.round((g.getY()+T.getY()+_.getY()+w.getY())/4);try{let V=new Ti(this.image,15,M,O).detect();g=V[0],_=V[1],w=V[2],T=V[3]}catch{g=this.getFirstDifferent(new Ce(M+7,O-7),!1,1,-1).toResultPoint(),_=this.getFirstDifferent(new Ce(M+7,O+7),!1,1,1).toResultPoint(),w=this.getFirstDifferent(new Ce(M-7,O+7),!1,-1,1).toResultPoint(),T=this.getFirstDifferent(new Ce(M-7,O-7),!1,-1,-1).toResultPoint()}return M=li.round((g.getX()+T.getX()+_.getX()+w.getX())/4),O=li.round((g.getY()+T.getY()+_.getY()+w.getY())/4),new Ce(M,O)}getMatrixCornerPoints(g){return this.expandSquare(g,2*this.nbCenterLayers,this.getDimension())}sampleGrid(g,_,w,T,M){let O=be.getInstance(),V=this.getDimension(),W=V/2-this.nbCenterLayers,K=V/2+this.nbCenterLayers;return O.sampleGrid(g,V,V,W,W,K,W,K,K,W,K,_.getX(),_.getY(),w.getX(),w.getY(),T.getX(),T.getY(),M.getX(),M.getY())}sampleLine(g,_,w){let T=0,M=this.distanceResultPoint(g,_),O=M/w,V=g.getX(),W=g.getY(),K=O*(_.getX()-g.getX())/M,de=O*(_.getY()-g.getY())/M;for(let ke=0;ke<w;ke++)this.image.get(li.round(V+ke*K),li.round(W+ke*de))&&(T|=1<<w-ke-1);return T}isWhiteOrBlackRectangle(g,_,w,T){let M=3;g=new Ce(g.getX()-M,g.getY()+M),_=new Ce(_.getX()-M,_.getY()-M),w=new Ce(w.getX()+M,w.getY()-M),T=new Ce(T.getX()+M,T.getY()+M);let O=this.getColor(T,g);if(O===0)return!1;let V=this.getColor(g,_);return V!==O||(V=this.getColor(_,w),V!==O)?!1:(V=this.getColor(w,T),V===O)}getColor(g,_){let w=this.distancePoint(g,_),T=(_.getX()-g.getX())/w,M=(_.getY()-g.getY())/w,O=0,V=g.getX(),W=g.getY(),K=this.image.get(g.getX(),g.getY()),de=Math.ceil(w);for(let Pe=0;Pe<de;Pe++)V+=T,W+=M,this.image.get(li.round(V),li.round(W))!==K&&O++;let ke=O/w;return ke>.1&&ke<.9?0:ke<=.1===K?1:-1}getFirstDifferent(g,_,w,T){let M=g.getX()+w,O=g.getY()+T;for(;this.isValid(M,O)&&this.image.get(M,O)===_;)M+=w,O+=T;for(M-=w,O-=T;this.isValid(M,O)&&this.image.get(M,O)===_;)M+=w;for(M-=w;this.isValid(M,O)&&this.image.get(M,O)===_;)O+=T;return O-=T,new Ce(M,O)}expandSquare(g,_,w){let T=w/(2*_),M=g[0].getX()-g[2].getX(),O=g[0].getY()-g[2].getY(),V=(g[0].getX()+g[2].getX())/2,W=(g[0].getY()+g[2].getY())/2,K=new ci(V+T*M,W+T*O),de=new ci(V-T*M,W-T*O);M=g[1].getX()-g[3].getX(),O=g[1].getY()-g[3].getY(),V=(g[1].getX()+g[3].getX())/2,W=(g[1].getY()+g[3].getY())/2;let ke=new ci(V+T*M,W+T*O),Pe=new ci(V-T*M,W-T*O);return[K,ke,de,Pe]}isValid(g,_){return g>=0&&g<this.image.getWidth()&&_>0&&_<this.image.getHeight()}isValidPoint(g){let _=li.round(g.getX()),w=li.round(g.getY());return this.isValid(_,w)}distancePoint(g,_){return li.distance(g.getX(),g.getY(),_.getX(),_.getY())}distanceResultPoint(g,_){return li.distance(g.getX(),g.getY(),_.getX(),_.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Z.truncDivision(this.nbLayers-4,8)+1)+15}}class rt{decode(g,_=null){let w=null,T=new tt(g.getBlackMatrix()),M=null,O=null;try{let de=T.detectMirror(!1);M=de.getPoints(),this.reportFoundResultPoints(_,M),O=new qt().decode(de)}catch(de){w=de}if(O==null)try{let de=T.detectMirror(!0);M=de.getPoints(),this.reportFoundResultPoints(_,M),O=new qt().decode(de)}catch(de){throw w??de}let V=new Lt(O.getText(),O.getRawBytes(),O.getNumBits(),M,wt.AZTEC,D.currentTimeMillis()),W=O.getByteSegments();W!=null&&V.putMetadata(bi.BYTE_SEGMENTS,W);let K=O.getECLevel();return K!=null&&V.putMetadata(bi.ERROR_CORRECTION_LEVEL,K),V}reportFoundResultPoints(g,_){if(g!=null){let w=g.get(le.NEED_RESULT_POINT_CALLBACK);w!=null&&_.forEach((T,M,O)=>{w.foundPossibleResultPoint(T)})}}reset(){}}class St extends xi{constructor(g=500){super(new rt,g)}}class yt{decode(g,_){try{return this.doDecode(g,_)}catch{if(_&&_.get(le.TRY_HARDER)===!0&&g.isRotateSupported()){const M=g.rotateCounterClockwise(),O=this.doDecode(M,_),V=O.getResultMetadata();let W=270;V!==null&&V.get(bi.ORIENTATION)===!0&&(W=W+V.get(bi.ORIENTATION)%360),O.putMetadata(bi.ORIENTATION,W);const K=O.getResultPoints();if(K!==null){const de=M.getHeight();for(let ke=0;ke<K.length;ke++)K[ke]=new ci(de-K[ke].getY()-1,K[ke].getX())}return O}else throw new Le}}reset(){}doDecode(g,_){const w=g.getWidth(),T=g.getHeight();let M=new ee(w);const O=_&&_.get(le.TRY_HARDER)===!0,V=Math.max(1,T>>(O?8:5));let W;O?W=T:W=15;const K=Math.trunc(T/2);for(let de=0;de<W;de++){const ke=Math.trunc((de+1)/2),Pe=(de&1)===0,Ze=K+V*(Pe?ke:-ke);if(Ze<0||Ze>=T)break;try{M=g.getBlackRow(Ze,M)}catch{continue}for(let mt=0;mt<2;mt++){if(mt===1&&(M.reverse(),_&&_.get(le.NEED_RESULT_POINT_CALLBACK)===!0)){const vt=new Map;_.forEach((zt,Kt)=>vt.set(Kt,zt)),vt.delete(le.NEED_RESULT_POINT_CALLBACK),_=vt}try{const vt=this.decodeRow(Ze,M,_);if(mt===1){vt.putMetadata(bi.ORIENTATION,180);const zt=vt.getResultPoints();zt!==null&&(zt[0]=new ci(w-zt[0].getX()-1,zt[0].getY()),zt[1]=new ci(w-zt[1].getX()-1,zt[1].getY()))}return vt}catch{}}}throw new Le}static recordPattern(g,_,w){const T=w.length;for(let K=0;K<T;K++)w[K]=0;const M=g.getSize();if(_>=M)throw new Le;let O=!g.get(_),V=0,W=_;for(;W<M;){if(g.get(W)!==O)w[V]++;else{if(++V===T)break;w[V]=1,O=!O}W++}if(!(V===T||V===T-1&&W===M))throw new Le}static recordPatternInReverse(g,_,w){let T=w.length,M=g.get(_);for(;_>0&&T>=0;)g.get(--_)!==M&&(T--,M=!M);if(T>=0)throw new Le;yt.recordPattern(g,_+1,w)}static patternMatchVariance(g,_,w){const T=g.length;let M=0,O=0;for(let K=0;K<T;K++)M+=g[K],O+=_[K];if(M<O)return Number.POSITIVE_INFINITY;const V=M/O;w*=V;let W=0;for(let K=0;K<T;K++){const de=g[K],ke=_[K]*V,Pe=de>ke?de-ke:ke-de;if(Pe>w)return Number.POSITIVE_INFINITY;W+=Pe}return W/M}}class He extends yt{static findStartPattern(g){const _=g.getSize(),w=g.getNextSet(0);let T=0,M=Int32Array.from([0,0,0,0,0,0]),O=w,V=!1;const W=6;for(let K=w;K<_;K++)if(g.get(K)!==V)M[T]++;else{if(T===W-1){let de=He.MAX_AVG_VARIANCE,ke=-1;for(let Pe=He.CODE_START_A;Pe<=He.CODE_START_C;Pe++){const Ze=yt.patternMatchVariance(M,He.CODE_PATTERNS[Pe],He.MAX_INDIVIDUAL_VARIANCE);Ze<de&&(de=Ze,ke=Pe)}if(ke>=0&&g.isRange(Math.max(0,O-(K-O)/2),O,!1))return Int32Array.from([O,K,ke]);O+=M[0]+M[1],M=M.slice(2,M.length-1),M[T-1]=0,M[T]=0,T--}else T++;M[T]=1,V=!V}throw new Le}static decodeCode(g,_,w){yt.recordPattern(g,w,_);let T=He.MAX_AVG_VARIANCE,M=-1;for(let O=0;O<He.CODE_PATTERNS.length;O++){const V=He.CODE_PATTERNS[O],W=this.patternMatchVariance(_,V,He.MAX_INDIVIDUAL_VARIANCE);W<T&&(T=W,M=O)}if(M>=0)return M;throw new Le}decodeRow(g,_,w){const T=w&&w.get(le.ASSUME_GS1)===!0,M=He.findStartPattern(_),O=M[2];let V=0;const W=new Uint8Array(20);W[V++]=O;let K;switch(O){case He.CODE_START_A:K=He.CODE_CODE_A;break;case He.CODE_START_B:K=He.CODE_CODE_B;break;case He.CODE_START_C:K=He.CODE_CODE_C;break;default:throw new J}let de=!1,ke=!1,Pe="",Ze=M[0],mt=M[1];const vt=Int32Array.from([0,0,0,0,0,0]);let zt=0,Kt=0,Ri=O,zi=0,Ci=!0,_a=!1,un=!1;for(;!de;){const Xt=ke;switch(ke=!1,zt=Kt,Kt=He.decodeCode(_,vt,mt),W[V++]=Kt,Kt!==He.CODE_STOP&&(Ci=!0),Kt!==He.CODE_STOP&&(zi++,Ri+=zi*Kt),Ze=mt,mt+=vt.reduce((pi,hn)=>pi+hn,0),Kt){case He.CODE_START_A:case He.CODE_START_B:case He.CODE_START_C:throw new J}switch(K){case He.CODE_CODE_A:if(Kt<64)un===_a?Pe+=String.fromCharCode(32+Kt):Pe+=String.fromCharCode(32+Kt+128),un=!1;else if(Kt<96)un===_a?Pe+=String.fromCharCode(Kt-64):Pe+=String.fromCharCode(Kt+64),un=!1;else switch(Kt!==He.CODE_STOP&&(Ci=!1),Kt){case He.CODE_FNC_1:T&&(Pe.length===0?Pe+="]C1":Pe+="");break;case He.CODE_FNC_2:case He.CODE_FNC_3:break;case He.CODE_FNC_4_A:!_a&&un?(_a=!0,un=!1):_a&&un?(_a=!1,un=!1):un=!0;break;case He.CODE_SHIFT:ke=!0,K=He.CODE_CODE_B;break;case He.CODE_CODE_B:K=He.CODE_CODE_B;break;case He.CODE_CODE_C:K=He.CODE_CODE_C;break;case He.CODE_STOP:de=!0;break}break;case He.CODE_CODE_B:if(Kt<96)un===_a?Pe+=String.fromCharCode(32+Kt):Pe+=String.fromCharCode(32+Kt+128),un=!1;else switch(Kt!==He.CODE_STOP&&(Ci=!1),Kt){case He.CODE_FNC_1:T&&(Pe.length===0?Pe+="]C1":Pe+="");break;case He.CODE_FNC_2:case He.CODE_FNC_3:break;case He.CODE_FNC_4_B:!_a&&un?(_a=!0,un=!1):_a&&un?(_a=!1,un=!1):un=!0;break;case He.CODE_SHIFT:ke=!0,K=He.CODE_CODE_A;break;case He.CODE_CODE_A:K=He.CODE_CODE_A;break;case He.CODE_CODE_C:K=He.CODE_CODE_C;break;case He.CODE_STOP:de=!0;break}break;case He.CODE_CODE_C:if(Kt<100)Kt<10&&(Pe+="0"),Pe+=Kt;else switch(Kt!==He.CODE_STOP&&(Ci=!1),Kt){case He.CODE_FNC_1:T&&(Pe.length===0?Pe+="]C1":Pe+="");break;case He.CODE_CODE_A:K=He.CODE_CODE_A;break;case He.CODE_CODE_B:K=He.CODE_CODE_B;break;case He.CODE_STOP:de=!0;break}break}Xt&&(K=K===He.CODE_CODE_A?He.CODE_CODE_B:He.CODE_CODE_A)}const X=mt-Ze;if(mt=_.getNextUnset(mt),!_.isRange(mt,Math.min(_.getSize(),mt+(mt-Ze)/2),!1))throw new Le;if(Ri-=zi*zt,Ri%103!==zt)throw new E;const se=Pe.length;if(se===0)throw new Le;se>0&&Ci&&(K===He.CODE_CODE_C?Pe=Pe.substring(0,se-2):Pe=Pe.substring(0,se-1));const Ae=(M[1]+M[0])/2,Ve=Ze+X/2,nt=W.length,ut=new Uint8Array(nt);for(let Xt=0;Xt<nt;Xt++)ut[Xt]=W[Xt];const bt=[new ci(Ae,g),new ci(Ve,g)];return new Lt(Pe,ut,0,bt,wt.CODE_128,new Date().getTime())}}He.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],He.MAX_AVG_VARIANCE=.25,He.MAX_INDIVIDUAL_VARIANCE=.7,He.CODE_SHIFT=98,He.CODE_CODE_C=99,He.CODE_CODE_B=100,He.CODE_CODE_A=101,He.CODE_FNC_1=102,He.CODE_FNC_2=97,He.CODE_FNC_3=96,He.CODE_FNC_4_A=101,He.CODE_FNC_4_B=100,He.CODE_START_A=103,He.CODE_START_B=104,He.CODE_START_C=105,He.CODE_STOP=106;class _t extends yt{constructor(g=!1,_=!1){super(),this.usingCheckDigit=g,this.extendedMode=_,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(g,_,w){let T=this.counters;T.fill(0),this.decodeRowResult="";let M=_t.findAsteriskPattern(_,T),O=_.getNextSet(M[1]),V=_.getSize(),W,K;do{_t.recordPattern(_,O,T);let vt=_t.toNarrowWidePattern(T);if(vt<0)throw new Le;W=_t.patternToChar(vt),this.decodeRowResult+=W,K=O;for(let zt of T)O+=zt;O=_.getNextSet(O)}while(W!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let de=0;for(let vt of T)de+=vt;let ke=O-K-de;if(O!==V&&ke*2<de)throw new Le;if(this.usingCheckDigit){let vt=this.decodeRowResult.length-1,zt=0;for(let Kt=0;Kt<vt;Kt++)zt+=_t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Kt));if(this.decodeRowResult.charAt(vt)!==_t.ALPHABET_STRING.charAt(zt%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,vt)}if(this.decodeRowResult.length===0)throw new Le;let Pe;this.extendedMode?Pe=_t.decodeExtended(this.decodeRowResult):Pe=this.decodeRowResult;let Ze=(M[1]+M[0])/2,mt=K+de/2;return new Lt(Pe,null,0,[new ci(Ze,g),new ci(mt,g)],wt.CODE_39,new Date().getTime())}static findAsteriskPattern(g,_){let w=g.getSize(),T=g.getNextSet(0),M=0,O=T,V=!1,W=_.length;for(let K=T;K<w;K++)if(g.get(K)!==V)_[M]++;else{if(M===W-1){if(this.toNarrowWidePattern(_)===_t.ASTERISK_ENCODING&&g.isRange(Math.max(0,O-Math.floor((K-O)/2)),O,!1))return[O,K];O+=_[0]+_[1],_.copyWithin(0,2,2+M-1),_[M-1]=0,_[M]=0,M--}else M++;_[M]=1,V=!V}throw new Le}static toNarrowWidePattern(g){let _=g.length,w=0,T;do{let M=2147483647;for(let W of g)W<M&&W>w&&(M=W);w=M,T=0;let O=0,V=0;for(let W=0;W<_;W++){let K=g[W];K>w&&(V|=1<<_-1-W,T++,O+=K)}if(T===3){for(let W=0;W<_&&T>0;W++){let K=g[W];if(K>w&&(T--,K*2>=O))return-1}return V}}while(T>3);return-1}static patternToChar(g){for(let _=0;_<_t.CHARACTER_ENCODINGS.length;_++)if(_t.CHARACTER_ENCODINGS[_]===g)return _t.ALPHABET_STRING.charAt(_);if(g===_t.ASTERISK_ENCODING)return"*";throw new Le}static decodeExtended(g){let _=g.length,w="";for(let T=0;T<_;T++){let M=g.charAt(T);if(M==="+"||M==="$"||M==="%"||M==="/"){let O=g.charAt(T+1),V="\0";switch(M){case"+":if(O>="A"&&O<="Z")V=String.fromCharCode(O.charCodeAt(0)+32);else throw new J;break;case"$":if(O>="A"&&O<="Z")V=String.fromCharCode(O.charCodeAt(0)-64);else throw new J;break;case"%":if(O>="A"&&O<="E")V=String.fromCharCode(O.charCodeAt(0)-38);else if(O>="F"&&O<="J")V=String.fromCharCode(O.charCodeAt(0)-11);else if(O>="K"&&O<="O")V=String.fromCharCode(O.charCodeAt(0)+16);else if(O>="P"&&O<="T")V=String.fromCharCode(O.charCodeAt(0)+43);else if(O==="U")V="\0";else if(O==="V")V="@";else if(O==="W")V="`";else if(O==="X"||O==="Y"||O==="Z")V="";else throw new J;break;case"/":if(O>="A"&&O<="O")V=String.fromCharCode(O.charCodeAt(0)-32);else if(O==="Z")V=":";else throw new J;break}w+=V,T++}else w+=M}return w}}_t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_t.ASTERISK_ENCODING=148;class Ut extends yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(g,_,w){let T=this.decodeStart(_),M=this.decodeEnd(_),O=new Re;Ut.decodeMiddle(_,T[1],M[0],O);let V=O.toString(),W=null;w!=null&&(W=w.get(le.ALLOWED_LENGTHS)),W==null&&(W=Ut.DEFAULT_ALLOWED_LENGTHS);let K=V.length,de=!1,ke=0;for(let mt of W){if(K===mt){de=!0;break}mt>ke&&(ke=mt)}if(!de&&K>ke&&(de=!0),!de)throw new J;const Pe=[new ci(T[1],g),new ci(M[0],g)];return new Lt(V,null,0,Pe,wt.ITF,new Date().getTime())}static decodeMiddle(g,_,w,T){let M=new Int32Array(10),O=new Int32Array(5),V=new Int32Array(5);for(M.fill(0),O.fill(0),V.fill(0);_<w;){yt.recordPattern(g,_,M);for(let K=0;K<5;K++){let de=2*K;O[K]=M[de],V[K]=M[de+1]}let W=Ut.decodeDigit(O);T.append(W.toString()),W=this.decodeDigit(V),T.append(W.toString()),M.forEach(function(K){_+=K})}}decodeStart(g){let _=Ut.skipWhiteSpace(g),w=Ut.findGuardPattern(g,_,Ut.START_PATTERN);return this.narrowLineWidth=(w[1]-w[0])/4,this.validateQuietZone(g,w[0]),w}validateQuietZone(g,_){let w=this.narrowLineWidth*10;w=w<_?w:_;for(let T=_-1;w>0&&T>=0&&!g.get(T);T--)w--;if(w!==0)throw new Le}static skipWhiteSpace(g){const _=g.getSize(),w=g.getNextSet(0);if(w===_)throw new Le;return w}decodeEnd(g){g.reverse();try{let _=Ut.skipWhiteSpace(g),w;try{w=Ut.findGuardPattern(g,_,Ut.END_PATTERN_REVERSED[0])}catch(M){M instanceof Le&&(w=Ut.findGuardPattern(g,_,Ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(g,w[0]);let T=w[0];return w[0]=g.getSize()-w[1],w[1]=g.getSize()-T,w}finally{g.reverse()}}static findGuardPattern(g,_,w){let T=w.length,M=new Int32Array(T),O=g.getSize(),V=!1,W=0,K=_;M.fill(0);for(let de=_;de<O;de++)if(g.get(de)!==V)M[W]++;else{if(W===T-1){if(yt.patternMatchVariance(M,w,Ut.MAX_INDIVIDUAL_VARIANCE)<Ut.MAX_AVG_VARIANCE)return[K,de];K+=M[0]+M[1],D.arraycopy(M,2,M,0,W-1),M[W-1]=0,M[W]=0,W--}else W++;M[W]=1,V=!V}throw new Le}static decodeDigit(g){let _=Ut.MAX_AVG_VARIANCE,w=-1,T=Ut.PATTERNS.length;for(let M=0;M<T;M++){let O=Ut.PATTERNS[M],V=yt.patternMatchVariance(g,O,Ut.MAX_INDIVIDUAL_VARIANCE);V<_?(_=V,w=M):V===_&&(w=-1)}if(w>=0)return w%10;throw new Le}}Ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ut.MAX_AVG_VARIANCE=.38,Ut.MAX_INDIVIDUAL_VARIANCE=.5,Ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ut.START_PATTERN=Int32Array.from([1,1,1,1]),Ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Et extends yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(g){let _=!1,w,T=0,M=Int32Array.from([0,0,0]);for(;!_;){M=Int32Array.from([0,0,0]),w=Et.findGuardPattern(g,T,!1,this.START_END_PATTERN,M);let O=w[0];T=w[1];let V=O-(T-O);V>=0&&(_=g.isRange(V,O,!1))}return w}static checkChecksum(g){return Et.checkStandardUPCEANChecksum(g)}static checkStandardUPCEANChecksum(g){let _=g.length;if(_===0)return!1;let w=parseInt(g.charAt(_-1),10);return Et.getStandardUPCEANChecksum(g.substring(0,_-1))===w}static getStandardUPCEANChecksum(g){let _=g.length,w=0;for(let T=_-1;T>=0;T-=2){let M=g.charAt(T).charCodeAt(0)-48;if(M<0||M>9)throw new J;w+=M}w*=3;for(let T=_-2;T>=0;T-=2){let M=g.charAt(T).charCodeAt(0)-48;if(M<0||M>9)throw new J;w+=M}return(1e3-w)%10}static decodeEnd(g,_){return Et.findGuardPattern(g,_,!1,Et.START_END_PATTERN,new Int32Array(Et.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(g,_,w,T){return this.findGuardPattern(g,_,w,T,new Int32Array(T.length))}static findGuardPattern(g,_,w,T,M){let O=g.getSize();_=w?g.getNextUnset(_):g.getNextSet(_);let V=0,W=_,K=T.length,de=w;for(let ke=_;ke<O;ke++)if(g.get(ke)!==de)M[V]++;else{if(V===K-1){if(yt.patternMatchVariance(M,T,Et.MAX_INDIVIDUAL_VARIANCE)<Et.MAX_AVG_VARIANCE)return Int32Array.from([W,ke]);W+=M[0]+M[1];let Pe=M.slice(2,M.length-1);for(let Ze=0;Ze<V-1;Ze++)M[Ze]=Pe[Ze];M[V-1]=0,M[V]=0,V--}else V++;M[V]=1,de=!de}throw new Le}static decodeDigit(g,_,w,T){this.recordPattern(g,w,_);let M=this.MAX_AVG_VARIANCE,O=-1,V=T.length;for(let W=0;W<V;W++){let K=T[W],de=yt.patternMatchVariance(_,K,Et.MAX_INDIVIDUAL_VARIANCE);de<M&&(M=de,O=W)}if(O>=0)return O;throw new Le}}Et.MAX_AVG_VARIANCE=.48,Et.MAX_INDIVIDUAL_VARIANCE=.7,Et.START_END_PATTERN=Int32Array.from([1,1,1]),Et.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Et.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Et.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class It{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(g,_,w){let T=this.decodeRowStringBuffer,M=this.decodeMiddle(_,w,T),O=T.toString(),V=It.parseExtensionString(O),W=[new ci((w[0]+w[1])/2,g),new ci(M,g)],K=new Lt(O,null,0,W,wt.UPC_EAN_EXTENSION,new Date().getTime());return V!=null&&K.putAllMetadata(V),K}decodeMiddle(g,_,w){let T=this.decodeMiddleCounters;T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=g.getSize(),O=_[1],V=0;for(let K=0;K<5&&O<M;K++){let de=Et.decodeDigit(g,T,O,Et.L_AND_G_PATTERNS);w+=String.fromCharCode(48+de%10);for(let ke of T)O+=ke;de>=10&&(V|=1<<4-K),K!==4&&(O=g.getNextSet(O),O=g.getNextUnset(O))}if(w.length!==5)throw new Le;let W=this.determineCheckDigit(V);if(It.extensionChecksum(w.toString())!==W)throw new Le;return O}static extensionChecksum(g){let _=g.length,w=0;for(let T=_-2;T>=0;T-=2)w+=g.charAt(T).charCodeAt(0)-48;w*=3;for(let T=_-1;T>=0;T-=2)w+=g.charAt(T).charCodeAt(0)-48;return w*=3,w%10}determineCheckDigit(g){for(let _=0;_<10;_++)if(g===this.CHECK_DIGIT_ENCODINGS[_])return _;throw new Le}static parseExtensionString(g){if(g.length!==5)return null;let _=It.parseExtension5String(g);return _==null?null:new Map([[bi.SUGGESTED_PRICE,_]])}static parseExtension5String(g){let _;switch(g.charAt(0)){case"0":_="";break;case"5":_="$";break;case"9":switch(g){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}_="";break;default:_="";break}let w=parseInt(g.substring(1)),T=(w/100).toString(),M=w%100,O=M<10?"0"+M:M.toString();return _+T+"."+O}}class ai{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(g,_,w){let T=this.decodeRowStringBuffer,M=this.decodeMiddle(_,w,T),O=T.toString(),V=ai.parseExtensionString(O),W=[new ci((w[0]+w[1])/2,g),new ci(M,g)],K=new Lt(O,null,0,W,wt.UPC_EAN_EXTENSION,new Date().getTime());return V!=null&&K.putAllMetadata(V),K}decodeMiddle(g,_,w){let T=this.decodeMiddleCounters;T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=g.getSize(),O=_[1],V=0;for(let W=0;W<2&&O<M;W++){let K=Et.decodeDigit(g,T,O,Et.L_AND_G_PATTERNS);w+=String.fromCharCode(48+K%10);for(let de of T)O+=de;K>=10&&(V|=1<<1-W),W!==1&&(O=g.getNextSet(O),O=g.getNextUnset(O))}if(w.length!==2)throw new Le;if(parseInt(w.toString())%4!==V)throw new Le;return O}static parseExtensionString(g){return g.length!==2?null:new Map([[bi.ISSUE_NUMBER,parseInt(g)]])}}class Si{static decodeRow(g,_,w){let T=Et.findGuardPattern(_,w,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new It().decodeRow(g,_,T)}catch{return new ai().decodeRow(g,_,T)}}}Si.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ai extends Et{constructor(){super(),this.decodeRowStringBuffer="",Ai.L_AND_G_PATTERNS=Ai.L_PATTERNS.map(g=>Int32Array.from(g));for(let g=10;g<20;g++){let _=Ai.L_PATTERNS[g-10],w=new Int32Array(_.length);for(let T=0;T<_.length;T++)w[T]=_[_.length-T-1];Ai.L_AND_G_PATTERNS[g]=w}}decodeRow(g,_,w){let T=Ai.findStartGuardPattern(_),M=w==null?null:w.get(le.NEED_RESULT_POINT_CALLBACK);if(M!=null){const Ci=new ci((T[0]+T[1])/2,g);M.foundPossibleResultPoint(Ci)}let O=this.decodeMiddle(_,T,this.decodeRowStringBuffer),V=O.rowOffset,W=O.resultString;if(M!=null){const Ci=new ci(V,g);M.foundPossibleResultPoint(Ci)}let K=this.decodeEnd(_,V);if(M!=null){const Ci=new ci((K[0]+K[1])/2,g);M.foundPossibleResultPoint(Ci)}let de=K[1],ke=de+(de-K[0]);if(ke>=_.getSize()||!_.isRange(de,ke,!1))throw new Le;let Pe=W.toString();if(Pe.length<8)throw new J;if(!Ai.checkChecksum(Pe))throw new E;let Ze=(T[1]+T[0])/2,mt=(K[1]+K[0])/2,vt=this.getBarcodeFormat(),zt=[new ci(Ze,g),new ci(mt,g)],Kt=new Lt(Pe,null,0,zt,vt,new Date().getTime()),Ri=0;try{let Ci=Si.decodeRow(g,_,K[1]);Kt.putMetadata(bi.UPC_EAN_EXTENSION,Ci.getText()),Kt.putAllMetadata(Ci.getResultMetadata()),Kt.addResultPoints(Ci.getResultPoints()),Ri=Ci.getText().length}catch{}let zi=w==null?null:w.get(le.ALLOWED_EAN_EXTENSIONS);if(zi!=null){let Ci=!1;for(let _a in zi)if(Ri.toString()===_a){Ci=!0;break}if(!Ci)throw new Le}return Kt}decodeEnd(g,_){return Ai.findGuardPattern(g,_,!1,Ai.START_END_PATTERN,new Int32Array(Ai.START_END_PATTERN.length).fill(0))}static checkChecksum(g){return Ai.checkStandardUPCEANChecksum(g)}static checkStandardUPCEANChecksum(g){let _=g.length;if(_===0)return!1;let w=parseInt(g.charAt(_-1),10);return Ai.getStandardUPCEANChecksum(g.substring(0,_-1))===w}static getStandardUPCEANChecksum(g){let _=g.length,w=0;for(let T=_-1;T>=0;T-=2){let M=g.charAt(T).charCodeAt(0)-48;if(M<0||M>9)throw new J;w+=M}w*=3;for(let T=_-2;T>=0;T-=2){let M=g.charAt(T).charCodeAt(0)-48;if(M<0||M>9)throw new J;w+=M}return(1e3-w)%10}}class Mn extends Ai{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(g,_,w){let T=this.decodeMiddleCounters;T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=g.getSize(),O=_[1],V=0;for(let K=0;K<6&&O<M;K++){let de=Ai.decodeDigit(g,T,O,Ai.L_AND_G_PATTERNS);w+=String.fromCharCode(48+de%10);for(let ke of T)O+=ke;de>=10&&(V|=1<<5-K)}w=Mn.determineFirstDigit(w,V),O=Ai.findGuardPattern(g,O,!0,Ai.MIDDLE_PATTERN,new Int32Array(Ai.MIDDLE_PATTERN.length).fill(0))[1];for(let K=0;K<6&&O<M;K++){let de=Ai.decodeDigit(g,T,O,Ai.L_PATTERNS);w+=String.fromCharCode(48+de);for(let ke of T)O+=ke}return{rowOffset:O,resultString:w}}getBarcodeFormat(){return wt.EAN_13}static determineFirstDigit(g,_){for(let w=0;w<10;w++)if(_===this.FIRST_DIGIT_ENCODINGS[w])return g=String.fromCharCode(48+w)+g,g;throw new Le}}Mn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Mt extends Ai{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(g,_,w){const T=this.decodeMiddleCounters;T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=g.getSize(),O=_[1];for(let W=0;W<4&&O<M;W++){let K=Ai.decodeDigit(g,T,O,Ai.L_PATTERNS);w+=String.fromCharCode(48+K);for(let de of T)O+=de}O=Ai.findGuardPattern(g,O,!0,Ai.MIDDLE_PATTERN,new Int32Array(Ai.MIDDLE_PATTERN.length).fill(0))[1];for(let W=0;W<4&&O<M;W++){let K=Ai.decodeDigit(g,T,O,Ai.L_PATTERNS);w+=String.fromCharCode(48+K);for(let de of T)O+=de}return{rowOffset:O,resultString:w}}getBarcodeFormat(){return wt.EAN_8}}class Dn extends Ai{constructor(){super(...arguments),this.ean13Reader=new Mn}getBarcodeFormat(){return wt.UPC_A}decode(g,_){return this.maybeReturnResult(this.ean13Reader.decode(g))}decodeRow(g,_,w){return this.maybeReturnResult(this.ean13Reader.decodeRow(g,_,w))}decodeMiddle(g,_,w){return this.ean13Reader.decodeMiddle(g,_,w)}maybeReturnResult(g){let _=g.getText();if(_.charAt(0)==="0"){let w=new Lt(_.substring(1),null,null,g.getResultPoints(),wt.UPC_A);return g.getResultMetadata()!=null&&w.putAllMetadata(g.getResultMetadata()),w}else throw new Le}reset(){this.ean13Reader.reset()}}class Yn extends Ai{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(g,_,w){const T=this.decodeMiddleCounters.map(K=>K);T[0]=0,T[1]=0,T[2]=0,T[3]=0;const M=g.getSize();let O=_[1],V=0;for(let K=0;K<6&&O<M;K++){const de=Yn.decodeDigit(g,T,O,Yn.L_AND_G_PATTERNS);w+=String.fromCharCode(48+de%10);for(let ke of T)O+=ke;de>=10&&(V|=1<<5-K)}let W=Yn.determineNumSysAndCheckDigit(w,V);return{rowOffset:O,resultString:W}}decodeEnd(g,_){return Yn.findGuardPatternWithoutCounters(g,_,!0,Yn.MIDDLE_END_PATTERN)}checkChecksum(g){return Ai.checkChecksum(Yn.convertUPCEtoUPCA(g))}static determineNumSysAndCheckDigit(g,_){for(let w=0;w<=1;w++)for(let T=0;T<10;T++)if(_===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[w][T]){let M=String.fromCharCode(48+w),O=String.fromCharCode(48+T);return M+g+O}throw Le.getNotFoundInstance()}getBarcodeFormat(){return wt.UPC_E}static convertUPCEtoUPCA(g){const _=g.slice(1,7).split("").map(M=>M.charCodeAt(0)),w=new Re;w.append(g.charAt(0));let T=_[5];switch(T){case 0:case 1:case 2:w.appendChars(_,0,2),w.append(T),w.append("0000"),w.appendChars(_,2,3);break;case 3:w.appendChars(_,0,3),w.append("00000"),w.appendChars(_,3,2);break;case 4:w.appendChars(_,0,4),w.append("00000"),w.append(_[4]);break;default:w.appendChars(_,0,5),w.append("0000"),w.append(T);break}return g.length>=8&&w.append(g.charAt(7)),w.toString()}}Yn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class _n extends yt{constructor(g){super();let _=g==null?null:g.get(le.POSSIBLE_FORMATS),w=[];i(_)?(w.push(new Mn),w.push(new Dn),w.push(new Mt),w.push(new Yn)):(_.indexOf(wt.EAN_13)>-1&&w.push(new Mn),_.indexOf(wt.UPC_A)>-1&&w.push(new Dn),_.indexOf(wt.EAN_8)>-1&&w.push(new Mt),_.indexOf(wt.UPC_E)>-1&&w.push(new Yn)),this.readers=w}decodeRow(g,_,w){for(let T of this.readers)try{const M=T.decodeRow(g,_,w),O=M.getBarcodeFormat()===wt.EAN_13&&M.getText().charAt(0)==="0",V=w==null?null:w.get(le.POSSIBLE_FORMATS),W=V==null||V.includes(wt.UPC_A);if(O&&W){const K=M.getRawBytes(),de=new Lt(M.getText().substring(1),K,K?K.length:null,M.getResultPoints(),wt.UPC_A);return de.putAllMetadata(M.getResultMetadata()),de}return M}catch{}throw new Le}reset(){for(let g of this.readers)g.reset()}}class pn extends yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(g,_){for(let w=0;w<_.length;w++)if(yt.patternMatchVariance(g,_[w],pn.MAX_INDIVIDUAL_VARIANCE)<pn.MAX_AVG_VARIANCE)return w;throw new Le}static count(g){return li.sum(new Int32Array(g))}static increment(g,_){let w=0,T=_[0];for(let M=1;M<g.length;M++)_[M]>T&&(T=_[M],w=M);g[w]++}static decrement(g,_){let w=0,T=_[0];for(let M=1;M<g.length;M++)_[M]<T&&(T=_[M],w=M);g[w]--}static isFinderPattern(g){let _=g[0]+g[1],w=_+g[2]+g[3],T=_/w;if(T>=pn.MIN_FINDER_PATTERN_RATIO&&T<=pn.MAX_FINDER_PATTERN_RATIO){let M=Number.MAX_SAFE_INTEGER,O=Number.MIN_SAFE_INTEGER;for(let V of g)V>O&&(O=V),V<M&&(M=V);return O<10*M}return!1}}pn.MAX_AVG_VARIANCE=.2,pn.MAX_INDIVIDUAL_VARIANCE=.45,pn.MIN_FINDER_PATTERN_RATIO=9.5/12,pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Bi{constructor(g,_){this.value=g,this.checksumPortion=_}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(g){if(!(g instanceof Bi))return!1;const _=g;return this.value===_.value&&this.checksumPortion===_.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Oi{constructor(g,_,w,T,M){this.value=g,this.startEnd=_,this.value=g,this.startEnd=_,this.resultPoints=new Array,this.resultPoints.push(new ci(w,M)),this.resultPoints.push(new ci(T,M))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(g){if(!(g instanceof Oi))return!1;const _=g;return this.value===_.value}hashCode(){return this.value}}class mn{constructor(){}static getRSSvalue(g,_,w){let T=0;for(let W of g)T+=W;let M=0,O=0,V=g.length;for(let W=0;W<V-1;W++){let K;for(K=1,O|=1<<W;K<g[W];K++,O&=~(1<<W)){let de=mn.combins(T-K-1,V-W-2);if(w&&O===0&&T-K-(V-W-1)>=V-W-1&&(de-=mn.combins(T-K-(V-W),V-W-2)),V-W-1>1){let ke=0;for(let Pe=T-K-(V-W-2);Pe>_;Pe--)ke+=mn.combins(T-K-Pe-1,V-W-3);de-=ke*(V-1-W)}else T-K>_&&de--;M+=de}T-=K}return M}static combins(g,_){let w,T;g-_>_?(T=_,w=g-_):(T=g-_,w=_);let M=1,O=1;for(let V=g;V>w;V--)M*=V,O<=T&&(M/=O,O++);for(;O<=T;)M/=O,O++;return M}}class hi{static buildBitArray(g){let _=g.length*2-1;g[g.length-1].getRightChar()==null&&(_-=1);let w=12*_,T=new ee(w),M=0,V=g[0].getRightChar().getValue();for(let W=11;W>=0;--W)(V&1<<W)!=0&&T.set(M),M++;for(let W=1;W<g.length;++W){let K=g[W],de=K.getLeftChar().getValue();for(let ke=11;ke>=0;--ke)(de&1<<ke)!=0&&T.set(M),M++;if(K.getRightChar()!=null){let ke=K.getRightChar().getValue();for(let Pe=11;Pe>=0;--Pe)(ke&1<<Pe)!=0&&T.set(M),M++}}return T}}class Xi{constructor(g,_){_?this.decodedInformation=null:(this.finished=g,this.decodedInformation=_)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class sn{constructor(g){this.newPosition=g}getNewPosition(){return this.newPosition}}class Fe extends sn{constructor(g,_){super(g),this.value=_}getValue(){return this.value}isFNC1(){return this.value===Fe.FNC1}}Fe.FNC1="$";class Oe extends sn{constructor(g,_,w){super(g),w?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=_}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xt extends sn{constructor(g,_,w){if(super(g),_<0||_>10||w<0||w>10)throw new J;this.firstDigit=_,this.secondDigit=w}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xt.FNC1}isSecondDigitFNC1(){return this.secondDigit===xt.FNC1}isAnyFNC1(){return this.firstDigit===xt.FNC1||this.secondDigit===xt.FNC1}}xt.FNC1=10;class ct{constructor(){}static parseFieldsInGeneralPurpose(g){if(!g)return null;if(g.length<2)throw new Le;let _=g.substring(0,2);for(let M of ct.TWO_DIGIT_DATA_LENGTH)if(M[0]===_)return M[1]===ct.VARIABLE_LENGTH?ct.processVariableAI(2,M[2],g):ct.processFixedAI(2,M[1],g);if(g.length<3)throw new Le;let w=g.substring(0,3);for(let M of ct.THREE_DIGIT_DATA_LENGTH)if(M[0]===w)return M[1]===ct.VARIABLE_LENGTH?ct.processVariableAI(3,M[2],g):ct.processFixedAI(3,M[1],g);for(let M of ct.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(M[0]===w)return M[1]===ct.VARIABLE_LENGTH?ct.processVariableAI(4,M[2],g):ct.processFixedAI(4,M[1],g);if(g.length<4)throw new Le;let T=g.substring(0,4);for(let M of ct.FOUR_DIGIT_DATA_LENGTH)if(M[0]===T)return M[1]===ct.VARIABLE_LENGTH?ct.processVariableAI(4,M[2],g):ct.processFixedAI(4,M[1],g);throw new Le}static processFixedAI(g,_,w){if(w.length<g)throw new Le;let T=w.substring(0,g);if(w.length<g+_)throw new Le;let M=w.substring(g,g+_),O=w.substring(g+_),V="("+T+")"+M,W=ct.parseFieldsInGeneralPurpose(O);return W==null?V:V+W}static processVariableAI(g,_,w){let T=w.substring(0,g),M;w.length<g+_?M=w.length:M=g+_;let O=w.substring(g,M),V=w.substring(M),W="("+T+")"+O,K=ct.parseFieldsInGeneralPurpose(V);return K==null?W:W+K}}ct.VARIABLE_LENGTH=[],ct.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ct.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ct.VARIABLE_LENGTH,20],["22",ct.VARIABLE_LENGTH,29],["30",ct.VARIABLE_LENGTH,8],["37",ct.VARIABLE_LENGTH,8],["90",ct.VARIABLE_LENGTH,30],["91",ct.VARIABLE_LENGTH,30],["92",ct.VARIABLE_LENGTH,30],["93",ct.VARIABLE_LENGTH,30],["94",ct.VARIABLE_LENGTH,30],["95",ct.VARIABLE_LENGTH,30],["96",ct.VARIABLE_LENGTH,30],["97",ct.VARIABLE_LENGTH,3],["98",ct.VARIABLE_LENGTH,30],["99",ct.VARIABLE_LENGTH,30]],ct.THREE_DIGIT_DATA_LENGTH=[["240",ct.VARIABLE_LENGTH,30],["241",ct.VARIABLE_LENGTH,30],["242",ct.VARIABLE_LENGTH,6],["250",ct.VARIABLE_LENGTH,30],["251",ct.VARIABLE_LENGTH,30],["253",ct.VARIABLE_LENGTH,17],["254",ct.VARIABLE_LENGTH,20],["400",ct.VARIABLE_LENGTH,30],["401",ct.VARIABLE_LENGTH,30],["402",17],["403",ct.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ct.VARIABLE_LENGTH,20],["421",ct.VARIABLE_LENGTH,15],["422",3],["423",ct.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ct.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ct.VARIABLE_LENGTH,15],["391",ct.VARIABLE_LENGTH,18],["392",ct.VARIABLE_LENGTH,15],["393",ct.VARIABLE_LENGTH,18],["703",ct.VARIABLE_LENGTH,30]],ct.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ct.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ct.VARIABLE_LENGTH,20],["8003",ct.VARIABLE_LENGTH,30],["8004",ct.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ct.VARIABLE_LENGTH,30],["8008",ct.VARIABLE_LENGTH,12],["8018",18],["8020",ct.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ct.VARIABLE_LENGTH,70],["8200",ct.VARIABLE_LENGTH,70]];class Jt{constructor(g){this.buffer=new Re,this.information=g}decodeAllCodes(g,_){let w=_,T=null;do{let M=this.decodeGeneralPurposeField(w,T),O=ct.parseFieldsInGeneralPurpose(M.getNewString());if(O!=null&&g.append(O),M.isRemaining()?T=""+M.getRemainingValue():T=null,w===M.getNewPosition())break;w=M.getNewPosition()}while(!0);return g.toString()}isStillNumeric(g){if(g+7>this.information.getSize())return g+4<=this.information.getSize();for(let _=g;_<g+3;++_)if(this.information.get(_))return!0;return this.information.get(g+3)}decodeNumeric(g){if(g+7>this.information.getSize()){let M=this.extractNumericValueFromBitArray(g,4);return M===0?new xt(this.information.getSize(),xt.FNC1,xt.FNC1):new xt(this.information.getSize(),M-1,xt.FNC1)}let _=this.extractNumericValueFromBitArray(g,7),w=(_-8)/11,T=(_-8)%11;return new xt(g+7,w,T)}extractNumericValueFromBitArray(g,_){return Jt.extractNumericValueFromBitArray(this.information,g,_)}static extractNumericValueFromBitArray(g,_,w){let T=0;for(let M=0;M<w;++M)g.get(_+M)&&(T|=1<<w-M-1);return T}decodeGeneralPurposeField(g,_){this.buffer.setLengthToZero(),_!=null&&this.buffer.append(_),this.current.setPosition(g);let w=this.parseBlocks();return w!=null&&w.isRemaining()?new Oe(this.current.getPosition(),this.buffer.toString(),w.getRemainingValue()):new Oe(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let g,_;do{let w=this.current.getPosition();if(this.current.isAlpha()?(_=this.parseAlphaBlock(),g=_.isFinished()):this.current.isIsoIec646()?(_=this.parseIsoIec646Block(),g=_.isFinished()):(_=this.parseNumericBlock(),g=_.isFinished()),!(w!==this.current.getPosition())&&!g)break}while(!g);return _.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let g=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(g.getNewPosition()),g.isFirstDigitFNC1()){let _;return g.isSecondDigitFNC1()?_=new Oe(this.current.getPosition(),this.buffer.toString()):_=new Oe(this.current.getPosition(),this.buffer.toString(),g.getSecondDigit()),new Xi(!0,_)}if(this.buffer.append(g.getFirstDigit()),g.isSecondDigitFNC1()){let _=new Oe(this.current.getPosition(),this.buffer.toString());return new Xi(!0,_)}this.buffer.append(g.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let g=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(g.getNewPosition()),g.isFNC1()){let _=new Oe(this.current.getPosition(),this.buffer.toString());return new Xi(!0,_)}this.buffer.append(g.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let g=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(g.getNewPosition()),g.isFNC1()){let _=new Oe(this.current.getPosition(),this.buffer.toString());return new Xi(!0,_)}this.buffer.append(g.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xi(!1)}isStillIsoIec646(g){if(g+5>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(g,5);if(_>=5&&_<16)return!0;if(g+7>this.information.getSize())return!1;let w=this.extractNumericValueFromBitArray(g,7);if(w>=64&&w<116)return!0;if(g+8>this.information.getSize())return!1;let T=this.extractNumericValueFromBitArray(g,8);return T>=232&&T<253}decodeIsoIec646(g){let _=this.extractNumericValueFromBitArray(g,5);if(_===15)return new Fe(g+5,Fe.FNC1);if(_>=5&&_<15)return new Fe(g+5,"0"+(_-5));let w=this.extractNumericValueFromBitArray(g,7);if(w>=64&&w<90)return new Fe(g+7,""+(w+1));if(w>=90&&w<116)return new Fe(g+7,""+(w+7));let T=this.extractNumericValueFromBitArray(g,8),M;switch(T){case 232:M="!";break;case 233:M='"';break;case 234:M="%";break;case 235:M="&";break;case 236:M="'";break;case 237:M="(";break;case 238:M=")";break;case 239:M="*";break;case 240:M="+";break;case 241:M=",";break;case 242:M="-";break;case 243:M=".";break;case 244:M="/";break;case 245:M=":";break;case 246:M=";";break;case 247:M="<";break;case 248:M="=";break;case 249:M=">";break;case 250:M="?";break;case 251:M="_";break;case 252:M=" ";break;default:throw new J}return new Fe(g+8,M)}isStillAlpha(g){if(g+5>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(g,5);if(_>=5&&_<16)return!0;if(g+6>this.information.getSize())return!1;let w=this.extractNumericValueFromBitArray(g,6);return w>=16&&w<63}decodeAlphanumeric(g){let _=this.extractNumericValueFromBitArray(g,5);if(_===15)return new Fe(g+5,Fe.FNC1);if(_>=5&&_<15)return new Fe(g+5,"0"+(_-5));let w=this.extractNumericValueFromBitArray(g,6);if(w>=32&&w<58)return new Fe(g+6,""+(w+33));let T;switch(w){case 58:T="*";break;case 59:T=",";break;case 60:T="-";break;case 61:T=".";break;case 62:T="/";break;default:throw new rn("Decoding invalid alphanumeric value: "+w)}return new Fe(g+6,T)}isAlphaTo646ToAlphaLatch(g){if(g+1>this.information.getSize())return!1;for(let _=0;_<5&&_+g<this.information.getSize();++_)if(_===2){if(!this.information.get(g+2))return!1}else if(this.information.get(g+_))return!1;return!0}isAlphaOr646ToNumericLatch(g){if(g+3>this.information.getSize())return!1;for(let _=g;_<g+3;++_)if(this.information.get(_))return!1;return!0}isNumericToAlphaNumericLatch(g){if(g+1>this.information.getSize())return!1;for(let _=0;_<4&&_+g<this.information.getSize();++_)if(this.information.get(g+_))return!1;return!0}}class ii{constructor(g){this.information=g,this.generalDecoder=new Jt(g)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class gt extends ii{constructor(g){super(g)}encodeCompressedGtin(g,_){g.append("(01)");let w=g.length();g.append("9"),this.encodeCompressedGtinWithoutAI(g,_,w)}encodeCompressedGtinWithoutAI(g,_,w){for(let T=0;T<4;++T){let M=this.getGeneralDecoder().extractNumericValueFromBitArray(_+10*T,10);M/100===0&&g.append("0"),M/10===0&&g.append("0"),g.append(M)}gt.appendCheckDigit(g,w)}static appendCheckDigit(g,_){let w=0;for(let T=0;T<13;T++){let M=g.charAt(T+_).charCodeAt(0)-48;w+=(T&1)===0?3*M:M}w=10-w%10,w===10&&(w=0),g.append(w)}}gt.GTIN_SIZE=40;class Gt extends gt{constructor(g){super(g)}parseInformation(){let g=new Re;g.append("(01)");let _=g.length(),w=this.getGeneralDecoder().extractNumericValueFromBitArray(Gt.HEADER_SIZE,4);return g.append(w),this.encodeCompressedGtinWithoutAI(g,Gt.HEADER_SIZE+4,_),this.getGeneralDecoder().decodeAllCodes(g,Gt.HEADER_SIZE+44)}}Gt.HEADER_SIZE=4;class ei extends ii{constructor(g){super(g)}parseInformation(){let g=new Re;return this.getGeneralDecoder().decodeAllCodes(g,ei.HEADER_SIZE)}}ei.HEADER_SIZE=5;class ki extends gt{constructor(g){super(g)}encodeCompressedWeight(g,_,w){let T=this.getGeneralDecoder().extractNumericValueFromBitArray(_,w);this.addWeightCode(g,T);let M=this.checkWeight(T),O=1e5;for(let V=0;V<5;++V)M/O===0&&g.append("0"),O/=10;g.append(M)}}class gn extends ki{constructor(g){super(g)}parseInformation(){if(this.getInformation().getSize()!=gn.HEADER_SIZE+ki.GTIN_SIZE+gn.WEIGHT_SIZE)throw new Le;let g=new Re;return this.encodeCompressedGtin(g,gn.HEADER_SIZE),this.encodeCompressedWeight(g,gn.HEADER_SIZE+ki.GTIN_SIZE,gn.WEIGHT_SIZE),g.toString()}}gn.HEADER_SIZE=5,gn.WEIGHT_SIZE=15;class $i extends gn{constructor(g){super(g)}addWeightCode(g,_){g.append("(3103)")}checkWeight(g){return g}}class Ei extends gn{constructor(g){super(g)}addWeightCode(g,_){_<1e4?g.append("(3202)"):g.append("(3203)")}checkWeight(g){return g<1e4?g:g-1e4}}class Vi extends gt{constructor(g){super(g)}parseInformation(){if(this.getInformation().getSize()<Vi.HEADER_SIZE+gt.GTIN_SIZE)throw new Le;let g=new Re;this.encodeCompressedGtin(g,Vi.HEADER_SIZE);let _=this.getGeneralDecoder().extractNumericValueFromBitArray(Vi.HEADER_SIZE+gt.GTIN_SIZE,Vi.LAST_DIGIT_SIZE);g.append("(392"),g.append(_),g.append(")");let w=this.getGeneralDecoder().decodeGeneralPurposeField(Vi.HEADER_SIZE+gt.GTIN_SIZE+Vi.LAST_DIGIT_SIZE,null);return g.append(w.getNewString()),g.toString()}}Vi.HEADER_SIZE=8,Vi.LAST_DIGIT_SIZE=2;class Yi extends gt{constructor(g){super(g)}parseInformation(){if(this.getInformation().getSize()<Yi.HEADER_SIZE+gt.GTIN_SIZE)throw new Le;let g=new Re;this.encodeCompressedGtin(g,Yi.HEADER_SIZE);let _=this.getGeneralDecoder().extractNumericValueFromBitArray(Yi.HEADER_SIZE+gt.GTIN_SIZE,Yi.LAST_DIGIT_SIZE);g.append("(393"),g.append(_),g.append(")");let w=this.getGeneralDecoder().extractNumericValueFromBitArray(Yi.HEADER_SIZE+gt.GTIN_SIZE+Yi.LAST_DIGIT_SIZE,Yi.FIRST_THREE_DIGITS_SIZE);w/100==0&&g.append("0"),w/10==0&&g.append("0"),g.append(w);let T=this.getGeneralDecoder().decodeGeneralPurposeField(Yi.HEADER_SIZE+gt.GTIN_SIZE+Yi.LAST_DIGIT_SIZE+Yi.FIRST_THREE_DIGITS_SIZE,null);return g.append(T.getNewString()),g.toString()}}Yi.HEADER_SIZE=8,Yi.LAST_DIGIT_SIZE=2,Yi.FIRST_THREE_DIGITS_SIZE=10;class on extends ki{constructor(g,_,w){super(g),this.dateCode=w,this.firstAIdigits=_}parseInformation(){if(this.getInformation().getSize()!=on.HEADER_SIZE+on.GTIN_SIZE+on.WEIGHT_SIZE+on.DATE_SIZE)throw new Le;let g=new Re;return this.encodeCompressedGtin(g,on.HEADER_SIZE),this.encodeCompressedWeight(g,on.HEADER_SIZE+on.GTIN_SIZE,on.WEIGHT_SIZE),this.encodeCompressedDate(g,on.HEADER_SIZE+on.GTIN_SIZE+on.WEIGHT_SIZE),g.toString()}encodeCompressedDate(g,_){let w=this.getGeneralDecoder().extractNumericValueFromBitArray(_,on.DATE_SIZE);if(w==38400)return;g.append("("),g.append(this.dateCode),g.append(")");let T=w%32;w/=32;let M=w%12+1;w/=12;let O=w;O/10==0&&g.append("0"),g.append(O),M/10==0&&g.append("0"),g.append(M),T/10==0&&g.append("0"),g.append(T)}addWeightCode(g,_){g.append("("),g.append(this.firstAIdigits),g.append(_/1e5),g.append(")")}checkWeight(g){return g%1e5}}on.HEADER_SIZE=8,on.WEIGHT_SIZE=20,on.DATE_SIZE=16;function ca(Se){try{if(Se.get(1))return new Gt(Se);if(!Se.get(2))return new ei(Se);switch(Jt.extractNumericValueFromBitArray(Se,1,4)){case 4:return new $i(Se);case 5:return new Ei(Se)}switch(Jt.extractNumericValueFromBitArray(Se,1,5)){case 12:return new Vi(Se);case 13:return new Yi(Se)}switch(Jt.extractNumericValueFromBitArray(Se,1,7)){case 56:return new on(Se,"310","11");case 57:return new on(Se,"320","11");case 58:return new on(Se,"310","13");case 59:return new on(Se,"320","13");case 60:return new on(Se,"310","15");case 61:return new on(Se,"320","15");case 62:return new on(Se,"310","17");case 63:return new on(Se,"320","17")}}catch(g){throw console.log(g),new rn("unknown decoder: "+Se)}}class vn{constructor(g,_,w,T){this.leftchar=g,this.rightchar=_,this.finderpattern=w,this.maybeLast=T}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(g,_){return g instanceof vn?vn.equalsOrNull(g.leftchar,_.leftchar)&&vn.equalsOrNull(g.rightchar,_.rightchar)&&vn.equalsOrNull(g.finderpattern,_.finderpattern):!1}static equalsOrNull(g,_){return g===null?_===null:vn.equals(g,_)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class $n{constructor(g,_,w){this.pairs=g,this.rowNumber=_,this.wasReversed=w}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(g){return this.checkEqualitity(this,g)}toString(){return"{ "+this.pairs+" }"}equals(g,_){return g instanceof $n?this.checkEqualitity(g,_)&&g.wasReversed===_.wasReversed:!1}checkEqualitity(g,_){if(!g||!_)return;let w;return g.forEach((T,M)=>{_.forEach(O=>{T.getLeftChar().getValue()===O.getLeftChar().getValue()&&T.getRightChar().getValue()===O.getRightChar().getValue()&&T.getFinderPatter().getValue()===O.getFinderPatter().getValue()&&(w=!0)})}),w}}class Zt extends pn{constructor(g){super(...arguments),this.pairs=new Array(Zt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=g===!0}decodeRow(g,_,w){this.pairs.length=0,this.startFromEven=!1;try{return Zt.constructResult(this.decodeRow2pairs(g,_))}catch(T){this.verbose&&console.log(T)}return this.pairs.length=0,this.startFromEven=!0,Zt.constructResult(this.decodeRow2pairs(g,_))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(g,_){let w=!1;for(;!w;)try{this.pairs.push(this.retrieveNextPair(_,this.pairs,g))}catch(M){if(M instanceof Le){if(!this.pairs.length)throw new Le;w=!0}}if(this.checkChecksum())return this.pairs;let T;if(this.rows.length?T=!0:T=!1,this.storeRow(g,!1),T){let M=this.checkRowsBoolean(!1);if(M!=null||(M=this.checkRowsBoolean(!0),M!=null))return M}throw new Le}checkRowsBoolean(g){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,g&&(this.rows=this.rows.reverse());let _=null;try{_=this.checkRows(new Array,0)}catch(w){this.verbose&&console.log(w)}return g&&(this.rows=this.rows.reverse()),_}checkRows(g,_){for(let w=_;w<this.rows.length;w++){let T=this.rows[w];this.pairs.length=0;for(let O of g)this.pairs.push(O.getPairs());if(this.pairs.push(T.getPairs()),!Zt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let M=new Array(g);M.push(T);try{return this.checkRows(M,w+1)}catch(O){this.verbose&&console.log(O)}}throw new Le}static isValidSequence(g){for(let _ of Zt.FINDER_PATTERN_SEQUENCES){if(g.length>_.length)continue;let w=!0;for(let T=0;T<g.length;T++)if(g[T].getFinderPattern().getValue()!=_[T]){w=!1;break}if(w)return!0}return!1}storeRow(g,_){let w=0,T=!1,M=!1;for(;w<this.rows.length;){let O=this.rows[w];if(O.getRowNumber()>g){M=O.isEquivalent(this.pairs);break}T=O.isEquivalent(this.pairs),w++}M||T||Zt.isPartialRow(this.pairs,this.rows)||(this.rows.push(w,new $n(this.pairs,g,_)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(g,_){for(let w of _)if(w.getPairs().length!==g.length){for(let T of w.getPairs())for(let M of g)if(vn.equals(T,M))break}}static isPartialRow(g,_){for(let w of _){let T=!0;for(let M of g){let O=!1;for(let V of w.getPairs())if(M.equals(V)){O=!0;break}if(!O){T=!1;break}}if(T)return!0}return!1}getRows(){return this.rows}static constructResult(g){let _=hi.buildBitArray(g),T=ca(_).parseInformation(),M=g[0].getFinderPattern().getResultPoints(),O=g[g.length-1].getFinderPattern().getResultPoints(),V=[M[0],M[1],O[0],O[1]];return new Lt(T,null,null,V,wt.RSS_EXPANDED,null)}checkChecksum(){let g=this.pairs.get(0),_=g.getLeftChar(),w=g.getRightChar();if(w==null)return!1;let T=w.getChecksumPortion(),M=2;for(let V=1;V<this.pairs.size();++V){let W=this.pairs.get(V);T+=W.getLeftChar().getChecksumPortion(),M++;let K=W.getRightChar();K!=null&&(T+=K.getChecksumPortion(),M++)}return T%=211,211*(M-4)+T==_.getValue()}static getNextSecondBar(g,_){let w;return g.get(_)?(w=g.getNextUnset(_),w=g.getNextSet(w)):(w=g.getNextSet(_),w=g.getNextUnset(w)),w}retrieveNextPair(g,_,w){let T=_.length%2==0;this.startFromEven&&(T=!T);let M,O=!0,V=-1;do this.findNextPair(g,_,V),M=this.parseFoundFinderPattern(g,w,T),M==null?V=Zt.getNextSecondBar(g,this.startEnd[0]):O=!1;while(O);let W=this.decodeDataCharacter(g,M,T,!0);if(!this.isEmptyPair(_)&&_[_.length-1].mustBeLast())throw new Le;let K;try{K=this.decodeDataCharacter(g,M,T,!1)}catch(de){K=null,this.verbose&&console.log(de)}return new vn(W,K,M,!0)}isEmptyPair(g){return g.length===0}findNextPair(g,_,w){let T=this.getDecodeFinderCounters();T[0]=0,T[1]=0,T[2]=0,T[3]=0;let M=g.getSize(),O;w>=0?O=w:this.isEmptyPair(_)?O=0:O=_[_.length-1].getFinderPattern().getStartEnd()[1];let V=_.length%2!=0;this.startFromEven&&(V=!V);let W=!1;for(;O<M&&(W=!g.get(O),!!W);)O++;let K=0,de=O;for(let ke=O;ke<M;ke++)if(g.get(ke)!=W)T[K]++;else{if(K==3){if(V&&Zt.reverseCounters(T),Zt.isFinderPattern(T)){this.startEnd[0]=de,this.startEnd[1]=ke;return}V&&Zt.reverseCounters(T),de+=T[0]+T[1],T[0]=T[2],T[1]=T[3],T[2]=0,T[3]=0,K--}else K++;T[K]=1,W=!W}throw new Le}static reverseCounters(g){let _=g.length;for(let w=0;w<_/2;++w){let T=g[w];g[w]=g[_-w-1],g[_-w-1]=T}}parseFoundFinderPattern(g,_,w){let T,M,O;if(w){let K=this.startEnd[0]-1;for(;K>=0&&!g.get(K);)K--;K++,T=this.startEnd[0]-K,M=K,O=this.startEnd[1]}else M=this.startEnd[0],O=g.getNextUnset(this.startEnd[1]+1),T=O-this.startEnd[1];let V=this.getDecodeFinderCounters();D.arraycopy(V,0,V,1,V.length-1),V[0]=T;let W;try{W=this.parseFinderValue(V,Zt.FINDER_PATTERNS)}catch{return null}return new Oi(W,[M,O],M,O,_)}decodeDataCharacter(g,_,w,T){let M=this.getDataCharacterCounters();for(let Ve=0;Ve<M.length;Ve++)M[Ve]=0;if(T)Zt.recordPatternInReverse(g,_.getStartEnd()[0],M);else{Zt.recordPattern(g,_.getStartEnd()[1],M);for(let Ve=0,nt=M.length-1;Ve<nt;Ve++,nt--){let ut=M[Ve];M[Ve]=M[nt],M[nt]=ut}}let O=17,V=li.sum(new Int32Array(M))/O,W=(_.getStartEnd()[1]-_.getStartEnd()[0])/15;if(Math.abs(V-W)/W>.3)throw new Le;let K=this.getOddCounts(),de=this.getEvenCounts(),ke=this.getOddRoundingErrors(),Pe=this.getEvenRoundingErrors();for(let Ve=0;Ve<M.length;Ve++){let nt=1*M[Ve]/V,ut=nt+.5;if(ut<1){if(nt<.3)throw new Le;ut=1}else if(ut>8){if(nt>8.7)throw new Le;ut=8}let bt=Ve/2;(Ve&1)==0?(K[bt]=ut,ke[bt]=nt-ut):(de[bt]=ut,Pe[bt]=nt-ut)}this.adjustOddEvenCounts(O);let Ze=4*_.getValue()+(w?0:2)+(T?0:1)-1,mt=0,vt=0;for(let Ve=K.length-1;Ve>=0;Ve--){if(Zt.isNotA1left(_,w,T)){let nt=Zt.WEIGHTS[Ze][2*Ve];vt+=K[Ve]*nt}mt+=K[Ve]}let zt=0;for(let Ve=de.length-1;Ve>=0;Ve--)if(Zt.isNotA1left(_,w,T)){let nt=Zt.WEIGHTS[Ze][2*Ve+1];zt+=de[Ve]*nt}let Kt=vt+zt;if((mt&1)!=0||mt>13||mt<4)throw new Le;let Ri=(13-mt)/2,zi=Zt.SYMBOL_WIDEST[Ri],Ci=9-zi,_a=mn.getRSSvalue(K,zi,!0),un=mn.getRSSvalue(de,Ci,!1),X=Zt.EVEN_TOTAL_SUBSET[Ri],se=Zt.GSUM[Ri],Ae=_a*X+un+se;return new Bi(Ae,Kt)}static isNotA1left(g,_,w){return!(g.getValue()==0&&_&&w)}adjustOddEvenCounts(g){let _=li.sum(new Int32Array(this.getOddCounts())),w=li.sum(new Int32Array(this.getEvenCounts())),T=!1,M=!1;_>13?M=!0:_<4&&(T=!0);let O=!1,V=!1;w>13?V=!0:w<4&&(O=!0);let W=_+w-g,K=(_&1)==1,de=(w&1)==0;if(W==1)if(K){if(de)throw new Le;M=!0}else{if(!de)throw new Le;V=!0}else if(W==-1)if(K){if(de)throw new Le;T=!0}else{if(!de)throw new Le;O=!0}else if(W==0){if(K){if(!de)throw new Le;_<w?(T=!0,V=!0):(M=!0,O=!0)}else if(de)throw new Le}else throw new Le;if(T){if(M)throw new Le;Zt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(M&&Zt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),O){if(V)throw new Le;Zt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}V&&Zt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Zt.SYMBOL_WIDEST=[7,5,4,3,1],Zt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Zt.GSUM=[0,348,1388,2948,3988],Zt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Zt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Zt.FINDER_PAT_A=0,Zt.FINDER_PAT_B=1,Zt.FINDER_PAT_C=2,Zt.FINDER_PAT_D=3,Zt.FINDER_PAT_E=4,Zt.FINDER_PAT_F=5,Zt.FINDER_PATTERN_SEQUENCES=[[Zt.FINDER_PAT_A,Zt.FINDER_PAT_A],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_B,Zt.FINDER_PAT_B],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_C,Zt.FINDER_PAT_B,Zt.FINDER_PAT_D],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_E,Zt.FINDER_PAT_B,Zt.FINDER_PAT_D,Zt.FINDER_PAT_C],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_E,Zt.FINDER_PAT_B,Zt.FINDER_PAT_D,Zt.FINDER_PAT_D,Zt.FINDER_PAT_F],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_E,Zt.FINDER_PAT_B,Zt.FINDER_PAT_D,Zt.FINDER_PAT_E,Zt.FINDER_PAT_F,Zt.FINDER_PAT_F],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_A,Zt.FINDER_PAT_B,Zt.FINDER_PAT_B,Zt.FINDER_PAT_C,Zt.FINDER_PAT_C,Zt.FINDER_PAT_D,Zt.FINDER_PAT_D],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_A,Zt.FINDER_PAT_B,Zt.FINDER_PAT_B,Zt.FINDER_PAT_C,Zt.FINDER_PAT_C,Zt.FINDER_PAT_D,Zt.FINDER_PAT_E,Zt.FINDER_PAT_E],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_A,Zt.FINDER_PAT_B,Zt.FINDER_PAT_B,Zt.FINDER_PAT_C,Zt.FINDER_PAT_C,Zt.FINDER_PAT_D,Zt.FINDER_PAT_E,Zt.FINDER_PAT_F,Zt.FINDER_PAT_F],[Zt.FINDER_PAT_A,Zt.FINDER_PAT_A,Zt.FINDER_PAT_B,Zt.FINDER_PAT_B,Zt.FINDER_PAT_C,Zt.FINDER_PAT_D,Zt.FINDER_PAT_D,Zt.FINDER_PAT_E,Zt.FINDER_PAT_E,Zt.FINDER_PAT_F,Zt.FINDER_PAT_F]],Zt.MAX_PAIRS=11;class Ma extends Bi{constructor(g,_,w){super(g,_),this.count=0,this.finderPattern=w}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nn extends pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(g,_,w){const T=this.decodePair(_,!1,g,w);nn.addOrTally(this.possibleLeftPairs,T),_.reverse();let M=this.decodePair(_,!0,g,w);nn.addOrTally(this.possibleRightPairs,M),_.reverse();for(let O of this.possibleLeftPairs)if(O.getCount()>1){for(let V of this.possibleRightPairs)if(V.getCount()>1&&nn.checkChecksum(O,V))return nn.constructResult(O,V)}throw new Le}static addOrTally(g,_){if(_==null)return;let w=!1;for(let T of g)if(T.getValue()===_.getValue()){T.incrementCount(),w=!0;break}w||g.push(_)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(g,_){let w=4537077*g.getValue()+_.getValue(),T=new String(w).toString(),M=new Re;for(let K=13-T.length;K>0;K--)M.append("0");M.append(T);let O=0;for(let K=0;K<13;K++){let de=M.charAt(K).charCodeAt(0)-48;O+=(K&1)===0?3*de:de}O=10-O%10,O===10&&(O=0),M.append(O.toString());let V=g.getFinderPattern().getResultPoints(),W=_.getFinderPattern().getResultPoints();return new Lt(M.toString(),null,0,[V[0],V[1],W[0],W[1]],wt.RSS_14,new Date().getTime())}static checkChecksum(g,_){let w=(g.getChecksumPortion()+16*_.getChecksumPortion())%79,T=9*g.getFinderPattern().getValue()+_.getFinderPattern().getValue();return T>72&&T--,T>8&&T--,w===T}decodePair(g,_,w,T){try{let M=this.findFinderPattern(g,_),O=this.parseFoundFinderPattern(g,w,_,M),V=T==null?null:T.get(le.NEED_RESULT_POINT_CALLBACK);if(V!=null){let de=(M[0]+M[1])/2;_&&(de=g.getSize()-1-de),V.foundPossibleResultPoint(new ci(de,w))}let W=this.decodeDataCharacter(g,O,!0),K=this.decodeDataCharacter(g,O,!1);return new Ma(1597*W.getValue()+K.getValue(),W.getChecksumPortion()+4*K.getChecksumPortion(),O)}catch{return null}}decodeDataCharacter(g,_,w){let T=this.getDataCharacterCounters();for(let zt=0;zt<T.length;zt++)T[zt]=0;if(w)yt.recordPatternInReverse(g,_.getStartEnd()[0],T);else{yt.recordPattern(g,_.getStartEnd()[1]+1,T);for(let zt=0,Kt=T.length-1;zt<Kt;zt++,Kt--){let Ri=T[zt];T[zt]=T[Kt],T[Kt]=Ri}}let M=w?16:15,O=li.sum(new Int32Array(T))/M,V=this.getOddCounts(),W=this.getEvenCounts(),K=this.getOddRoundingErrors(),de=this.getEvenRoundingErrors();for(let zt=0;zt<T.length;zt++){let Kt=T[zt]/O,Ri=Math.floor(Kt+.5);Ri<1?Ri=1:Ri>8&&(Ri=8);let zi=Math.floor(zt/2);(zt&1)===0?(V[zi]=Ri,K[zi]=Kt-Ri):(W[zi]=Ri,de[zi]=Kt-Ri)}this.adjustOddEvenCounts(w,M);let ke=0,Pe=0;for(let zt=V.length-1;zt>=0;zt--)Pe*=9,Pe+=V[zt],ke+=V[zt];let Ze=0,mt=0;for(let zt=W.length-1;zt>=0;zt--)Ze*=9,Ze+=W[zt],mt+=W[zt];let vt=Pe+3*Ze;if(w){if((ke&1)!==0||ke>12||ke<4)throw new Le;let zt=(12-ke)/2,Kt=nn.OUTSIDE_ODD_WIDEST[zt],Ri=9-Kt,zi=mn.getRSSvalue(V,Kt,!1),Ci=mn.getRSSvalue(W,Ri,!0),_a=nn.OUTSIDE_EVEN_TOTAL_SUBSET[zt],un=nn.OUTSIDE_GSUM[zt];return new Bi(zi*_a+Ci+un,vt)}else{if((mt&1)!==0||mt>10||mt<4)throw new Le;let zt=(10-mt)/2,Kt=nn.INSIDE_ODD_WIDEST[zt],Ri=9-Kt,zi=mn.getRSSvalue(V,Kt,!0),Ci=mn.getRSSvalue(W,Ri,!1),_a=nn.INSIDE_ODD_TOTAL_SUBSET[zt],un=nn.INSIDE_GSUM[zt];return new Bi(Ci*_a+zi+un,vt)}}findFinderPattern(g,_){let w=this.getDecodeFinderCounters();w[0]=0,w[1]=0,w[2]=0,w[3]=0;let T=g.getSize(),M=!1,O=0;for(;O<T&&(M=!g.get(O),_!==M);)O++;let V=0,W=O;for(let K=O;K<T;K++)if(g.get(K)!==M)w[V]++;else{if(V===3){if(pn.isFinderPattern(w))return[W,K];W+=w[0]+w[1],w[0]=w[2],w[1]=w[3],w[2]=0,w[3]=0,V--}else V++;w[V]=1,M=!M}throw new Le}parseFoundFinderPattern(g,_,w,T){let M=g.get(T[0]),O=T[0]-1;for(;O>=0&&M!==g.get(O);)O--;O++;const V=T[0]-O,W=this.getDecodeFinderCounters(),K=new Int32Array(W.length);D.arraycopy(W,0,K,1,W.length-1),K[0]=V;const de=this.parseFinderValue(K,nn.FINDER_PATTERNS);let ke=O,Pe=T[1];return w&&(ke=g.getSize()-1-ke,Pe=g.getSize()-1-Pe),new Oi(de,[O,T[1]],ke,Pe,_)}adjustOddEvenCounts(g,_){let w=li.sum(new Int32Array(this.getOddCounts())),T=li.sum(new Int32Array(this.getEvenCounts())),M=!1,O=!1,V=!1,W=!1;g?(w>12?O=!0:w<4&&(M=!0),T>12?W=!0:T<4&&(V=!0)):(w>11?O=!0:w<5&&(M=!0),T>10?W=!0:T<4&&(V=!0));let K=w+T-_,de=(w&1)===(g?1:0),ke=(T&1)===1;if(K===1)if(de){if(ke)throw new Le;O=!0}else{if(!ke)throw new Le;W=!0}else if(K===-1)if(de){if(ke)throw new Le;M=!0}else{if(!ke)throw new Le;V=!0}else if(K===0){if(de){if(!ke)throw new Le;w<T?(M=!0,W=!0):(O=!0,V=!0)}else if(ke)throw new Le}else throw new Le;if(M){if(O)throw new Le;pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(O&&pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),V){if(W)throw new Le;pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}W&&pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nn.OUTSIDE_GSUM=[0,161,961,2015,2715],nn.INSIDE_GSUM=[0,336,1036,1516],nn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nn.INSIDE_ODD_WIDEST=[2,4,6,8],nn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Za extends yt{constructor(g,_){super(),this.readers=[],this.verbose=_===!0;const w=g?g.get(le.POSSIBLE_FORMATS):null,T=g&&g.get(le.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;w?((w.includes(wt.EAN_13)||w.includes(wt.UPC_A)||w.includes(wt.EAN_8)||w.includes(wt.UPC_E))&&this.readers.push(new _n(g)),w.includes(wt.CODE_39)&&this.readers.push(new _t(T)),w.includes(wt.CODE_128)&&this.readers.push(new He),w.includes(wt.ITF)&&this.readers.push(new Ut),w.includes(wt.RSS_14)&&this.readers.push(new nn),w.includes(wt.RSS_EXPANDED)&&this.readers.push(new Zt(this.verbose))):(this.readers.push(new _n(g)),this.readers.push(new _t),this.readers.push(new _n(g)),this.readers.push(new He),this.readers.push(new Ut),this.readers.push(new nn),this.readers.push(new Zt(this.verbose)))}decodeRow(g,_,w){for(let T=0;T<this.readers.length;T++)try{return this.readers[T].decodeRow(g,_,w)}catch{}throw new Le}reset(){this.readers.forEach(g=>g.reset())}}class er extends xi{constructor(g=500,_){super(new Za(_),g,_)}}class qn{constructor(g,_,w){this.ecCodewords=g,this.ecBlocks=[_],w&&this.ecBlocks.push(w)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Zn{constructor(g,_){this.count=g,this.dataCodewords=_}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class kn{constructor(g,_,w,T,M,O){this.versionNumber=g,this.symbolSizeRows=_,this.symbolSizeColumns=w,this.dataRegionSizeRows=T,this.dataRegionSizeColumns=M,this.ecBlocks=O;let V=0;const W=O.getECCodewords(),K=O.getECBlocks();for(let de of K)V+=de.getCount()*(de.getDataCodewords()+W);this.totalCodewords=V}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(g,_){if((g&1)!==0||(_&1)!==0)throw new J;for(let w of kn.VERSIONS)if(w.symbolSizeRows===g&&w.symbolSizeColumns===_)return w;throw new J}toString(){return""+this.versionNumber}static buildVersions(){return[new kn(1,10,10,8,8,new qn(5,new Zn(1,3))),new kn(2,12,12,10,10,new qn(7,new Zn(1,5))),new kn(3,14,14,12,12,new qn(10,new Zn(1,8))),new kn(4,16,16,14,14,new qn(12,new Zn(1,12))),new kn(5,18,18,16,16,new qn(14,new Zn(1,18))),new kn(6,20,20,18,18,new qn(18,new Zn(1,22))),new kn(7,22,22,20,20,new qn(20,new Zn(1,30))),new kn(8,24,24,22,22,new qn(24,new Zn(1,36))),new kn(9,26,26,24,24,new qn(28,new Zn(1,44))),new kn(10,32,32,14,14,new qn(36,new Zn(1,62))),new kn(11,36,36,16,16,new qn(42,new Zn(1,86))),new kn(12,40,40,18,18,new qn(48,new Zn(1,114))),new kn(13,44,44,20,20,new qn(56,new Zn(1,144))),new kn(14,48,48,22,22,new qn(68,new Zn(1,174))),new kn(15,52,52,24,24,new qn(42,new Zn(2,102))),new kn(16,64,64,14,14,new qn(56,new Zn(2,140))),new kn(17,72,72,16,16,new qn(36,new Zn(4,92))),new kn(18,80,80,18,18,new qn(48,new Zn(4,114))),new kn(19,88,88,20,20,new qn(56,new Zn(4,144))),new kn(20,96,96,22,22,new qn(68,new Zn(4,174))),new kn(21,104,104,24,24,new qn(56,new Zn(6,136))),new kn(22,120,120,18,18,new qn(68,new Zn(6,175))),new kn(23,132,132,20,20,new qn(62,new Zn(8,163))),new kn(24,144,144,22,22,new qn(62,new Zn(8,156),new Zn(2,155))),new kn(25,8,18,6,16,new qn(7,new Zn(1,5))),new kn(26,8,32,6,14,new qn(11,new Zn(1,10))),new kn(27,12,26,10,24,new qn(14,new Zn(1,16))),new kn(28,12,36,10,16,new qn(18,new Zn(1,22))),new kn(29,16,36,14,16,new qn(24,new Zn(1,32))),new kn(30,16,48,14,22,new qn(28,new Zn(1,49)))]}}kn.VERSIONS=kn.buildVersions();class Oo{constructor(g){const _=g.getHeight();if(_<8||_>144||(_&1)!==0)throw new J;this.version=Oo.readVersion(g),this.mappingBitMatrix=this.extractDataRegion(g),this.readMappingMatrix=new We(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(g){const _=g.getHeight(),w=g.getWidth();return kn.getVersionForDimensions(_,w)}readCodewords(){const g=new Int8Array(this.version.getTotalCodewords());let _=0,w=4,T=0;const M=this.mappingBitMatrix.getHeight(),O=this.mappingBitMatrix.getWidth();let V=!1,W=!1,K=!1,de=!1;do if(w===M&&T===0&&!V)g[_++]=this.readCorner1(M,O)&255,w-=2,T+=2,V=!0;else if(w===M-2&&T===0&&(O&3)!==0&&!W)g[_++]=this.readCorner2(M,O)&255,w-=2,T+=2,W=!0;else if(w===M+4&&T===2&&(O&7)===0&&!K)g[_++]=this.readCorner3(M,O)&255,w-=2,T+=2,K=!0;else if(w===M-2&&T===0&&(O&7)===4&&!de)g[_++]=this.readCorner4(M,O)&255,w-=2,T+=2,de=!0;else{do w<M&&T>=0&&!this.readMappingMatrix.get(T,w)&&(g[_++]=this.readUtah(w,T,M,O)&255),w-=2,T+=2;while(w>=0&&T<O);w+=1,T+=3;do w>=0&&T<O&&!this.readMappingMatrix.get(T,w)&&(g[_++]=this.readUtah(w,T,M,O)&255),w+=2,T-=2;while(w<M&&T>=0);w+=3,T+=1}while(w<M||T<O);if(_!==this.version.getTotalCodewords())throw new J;return g}readModule(g,_,w,T){return g<0&&(g+=w,_+=4-(w+4&7)),_<0&&(_+=T,g+=4-(T+4&7)),this.readMappingMatrix.set(_,g),this.mappingBitMatrix.get(_,g)}readUtah(g,_,w,T){let M=0;return this.readModule(g-2,_-2,w,T)&&(M|=1),M<<=1,this.readModule(g-2,_-1,w,T)&&(M|=1),M<<=1,this.readModule(g-1,_-2,w,T)&&(M|=1),M<<=1,this.readModule(g-1,_-1,w,T)&&(M|=1),M<<=1,this.readModule(g-1,_,w,T)&&(M|=1),M<<=1,this.readModule(g,_-2,w,T)&&(M|=1),M<<=1,this.readModule(g,_-1,w,T)&&(M|=1),M<<=1,this.readModule(g,_,w,T)&&(M|=1),M}readCorner1(g,_){let w=0;return this.readModule(g-1,0,g,_)&&(w|=1),w<<=1,this.readModule(g-1,1,g,_)&&(w|=1),w<<=1,this.readModule(g-1,2,g,_)&&(w|=1),w<<=1,this.readModule(0,_-2,g,_)&&(w|=1),w<<=1,this.readModule(0,_-1,g,_)&&(w|=1),w<<=1,this.readModule(1,_-1,g,_)&&(w|=1),w<<=1,this.readModule(2,_-1,g,_)&&(w|=1),w<<=1,this.readModule(3,_-1,g,_)&&(w|=1),w}readCorner2(g,_){let w=0;return this.readModule(g-3,0,g,_)&&(w|=1),w<<=1,this.readModule(g-2,0,g,_)&&(w|=1),w<<=1,this.readModule(g-1,0,g,_)&&(w|=1),w<<=1,this.readModule(0,_-4,g,_)&&(w|=1),w<<=1,this.readModule(0,_-3,g,_)&&(w|=1),w<<=1,this.readModule(0,_-2,g,_)&&(w|=1),w<<=1,this.readModule(0,_-1,g,_)&&(w|=1),w<<=1,this.readModule(1,_-1,g,_)&&(w|=1),w}readCorner3(g,_){let w=0;return this.readModule(g-1,0,g,_)&&(w|=1),w<<=1,this.readModule(g-1,_-1,g,_)&&(w|=1),w<<=1,this.readModule(0,_-3,g,_)&&(w|=1),w<<=1,this.readModule(0,_-2,g,_)&&(w|=1),w<<=1,this.readModule(0,_-1,g,_)&&(w|=1),w<<=1,this.readModule(1,_-3,g,_)&&(w|=1),w<<=1,this.readModule(1,_-2,g,_)&&(w|=1),w<<=1,this.readModule(1,_-1,g,_)&&(w|=1),w}readCorner4(g,_){let w=0;return this.readModule(g-3,0,g,_)&&(w|=1),w<<=1,this.readModule(g-2,0,g,_)&&(w|=1),w<<=1,this.readModule(g-1,0,g,_)&&(w|=1),w<<=1,this.readModule(0,_-2,g,_)&&(w|=1),w<<=1,this.readModule(0,_-1,g,_)&&(w|=1),w<<=1,this.readModule(1,_-1,g,_)&&(w|=1),w<<=1,this.readModule(2,_-1,g,_)&&(w|=1),w<<=1,this.readModule(3,_-1,g,_)&&(w|=1),w}extractDataRegion(g){const _=this.version.getSymbolSizeRows(),w=this.version.getSymbolSizeColumns();if(g.getHeight()!==_)throw new x("Dimension of bitMatrix must match the version size");const T=this.version.getDataRegionSizeRows(),M=this.version.getDataRegionSizeColumns(),O=_/T|0,V=w/M|0,W=O*T,K=V*M,de=new We(K,W);for(let ke=0;ke<O;++ke){const Pe=ke*T;for(let Ze=0;Ze<V;++Ze){const mt=Ze*M;for(let vt=0;vt<T;++vt){const zt=ke*(T+2)+1+vt,Kt=Pe+vt;for(let Ri=0;Ri<M;++Ri){const zi=Ze*(M+2)+1+Ri;if(g.get(zi,zt)){const Ci=mt+Ri;de.set(Ci,Kt)}}}}}return de}}class bn{constructor(g,_){this.numDataCodewords=g,this.codewords=_}static getDataBlocks(g,_){const w=_.getECBlocks();let T=0;const M=w.getECBlocks();for(let vt of M)T+=vt.getCount();const O=new Array(T);let V=0;for(let vt of M)for(let zt=0;zt<vt.getCount();zt++){const Kt=vt.getDataCodewords(),Ri=w.getECCodewords()+Kt;O[V++]=new bn(Kt,new Uint8Array(Ri))}const K=O[0].codewords.length-w.getECCodewords(),de=K-1;let ke=0;for(let vt=0;vt<de;vt++)for(let zt=0;zt<V;zt++)O[zt].codewords[vt]=g[ke++];const Pe=_.getVersionNumber()===24,Ze=Pe?8:V;for(let vt=0;vt<Ze;vt++)O[vt].codewords[K-1]=g[ke++];const mt=O[0].codewords.length;for(let vt=K;vt<mt;vt++)for(let zt=0;zt<V;zt++){const Kt=Pe?(zt+8)%V:zt,Ri=Pe&&Kt>7?vt-1:vt;O[Kt].codewords[Ri]=g[ke++]}if(ke!==g.length)throw new x;return O}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ks{constructor(g){this.bytes=g,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(g){if(g<1||g>32||g>this.available())throw new x(""+g);let _=0,w=this.bitOffset,T=this.byteOffset;const M=this.bytes;if(w>0){const O=8-w,V=g<O?g:O,W=O-V,K=255>>8-V<<W;_=(M[T]&K)>>W,g-=V,w+=V,w===8&&(w=0,T++)}if(g>0){for(;g>=8;)_=_<<8|M[T]&255,T++,g-=8;if(g>0){const O=8-g,V=255>>O<<O;_=_<<g|(M[T]&V)>>O,w+=g}}return this.bitOffset=w,this.byteOffset=T,_}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Bn;(function(Se){Se[Se.PAD_ENCODE=0]="PAD_ENCODE",Se[Se.ASCII_ENCODE=1]="ASCII_ENCODE",Se[Se.C40_ENCODE=2]="C40_ENCODE",Se[Se.TEXT_ENCODE=3]="TEXT_ENCODE",Se[Se.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Se[Se.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Se[Se.BASE256_ENCODE=6]="BASE256_ENCODE"})(Bn||(Bn={}));class os{static decode(g){const _=new ks(g),w=new Re,T=new Re,M=new Array;let O=Bn.ASCII_ENCODE;do if(O===Bn.ASCII_ENCODE)O=this.decodeAsciiSegment(_,w,T);else{switch(O){case Bn.C40_ENCODE:this.decodeC40Segment(_,w);break;case Bn.TEXT_ENCODE:this.decodeTextSegment(_,w);break;case Bn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(_,w);break;case Bn.EDIFACT_ENCODE:this.decodeEdifactSegment(_,w);break;case Bn.BASE256_ENCODE:this.decodeBase256Segment(_,w,M);break;default:throw new J}O=Bn.ASCII_ENCODE}while(O!==Bn.PAD_ENCODE&&_.available()>0);return T.length()>0&&w.append(T.toString()),new Zi(g,w.toString(),M.length===0?null:M,null)}static decodeAsciiSegment(g,_,w){let T=!1;do{let M=g.readBits(8);if(M===0)throw new J;if(M<=128)return T&&(M+=128),_.append(String.fromCharCode(M-1)),Bn.ASCII_ENCODE;if(M===129)return Bn.PAD_ENCODE;if(M<=229){const O=M-130;O<10&&_.append("0"),_.append(""+O)}else switch(M){case 230:return Bn.C40_ENCODE;case 231:return Bn.BASE256_ENCODE;case 232:_.append("");break;case 233:case 234:break;case 235:T=!0;break;case 236:_.append("[)>05"),w.insert(0,"");break;case 237:_.append("[)>06"),w.insert(0,"");break;case 238:return Bn.ANSIX12_ENCODE;case 239:return Bn.TEXT_ENCODE;case 240:return Bn.EDIFACT_ENCODE;case 241:break;default:if(M!==254||g.available()!==0)throw new J;break}}while(g.available()>0);return Bn.ASCII_ENCODE}static decodeC40Segment(g,_){let w=!1;const T=[];let M=0;do{if(g.available()===8)return;const O=g.readBits(8);if(O===254)return;this.parseTwoBytes(O,g.readBits(8),T);for(let V=0;V<3;V++){const W=T[V];switch(M){case 0:if(W<3)M=W+1;else if(W<this.C40_BASIC_SET_CHARS.length){const K=this.C40_BASIC_SET_CHARS[W];w?(_.append(String.fromCharCode(K.charCodeAt(0)+128)),w=!1):_.append(K)}else throw new J;break;case 1:w?(_.append(String.fromCharCode(W+128)),w=!1):_.append(String.fromCharCode(W)),M=0;break;case 2:if(W<this.C40_SHIFT2_SET_CHARS.length){const K=this.C40_SHIFT2_SET_CHARS[W];w?(_.append(String.fromCharCode(K.charCodeAt(0)+128)),w=!1):_.append(K)}else switch(W){case 27:_.append("");break;case 30:w=!0;break;default:throw new J}M=0;break;case 3:w?(_.append(String.fromCharCode(W+224)),w=!1):_.append(String.fromCharCode(W+96)),M=0;break;default:throw new J}}}while(g.available()>0)}static decodeTextSegment(g,_){let w=!1,T=[],M=0;do{if(g.available()===8)return;const O=g.readBits(8);if(O===254)return;this.parseTwoBytes(O,g.readBits(8),T);for(let V=0;V<3;V++){const W=T[V];switch(M){case 0:if(W<3)M=W+1;else if(W<this.TEXT_BASIC_SET_CHARS.length){const K=this.TEXT_BASIC_SET_CHARS[W];w?(_.append(String.fromCharCode(K.charCodeAt(0)+128)),w=!1):_.append(K)}else throw new J;break;case 1:w?(_.append(String.fromCharCode(W+128)),w=!1):_.append(String.fromCharCode(W)),M=0;break;case 2:if(W<this.TEXT_SHIFT2_SET_CHARS.length){const K=this.TEXT_SHIFT2_SET_CHARS[W];w?(_.append(String.fromCharCode(K.charCodeAt(0)+128)),w=!1):_.append(K)}else switch(W){case 27:_.append("");break;case 30:w=!0;break;default:throw new J}M=0;break;case 3:if(W<this.TEXT_SHIFT3_SET_CHARS.length){const K=this.TEXT_SHIFT3_SET_CHARS[W];w?(_.append(String.fromCharCode(K.charCodeAt(0)+128)),w=!1):_.append(K),M=0}else throw new J;break;default:throw new J}}}while(g.available()>0)}static decodeAnsiX12Segment(g,_){const w=[];do{if(g.available()===8)return;const T=g.readBits(8);if(T===254)return;this.parseTwoBytes(T,g.readBits(8),w);for(let M=0;M<3;M++){const O=w[M];switch(O){case 0:_.append("\r");break;case 1:_.append("*");break;case 2:_.append(">");break;case 3:_.append(" ");break;default:if(O<14)_.append(String.fromCharCode(O+44));else if(O<40)_.append(String.fromCharCode(O+51));else throw new J;break}}}while(g.available()>0)}static parseTwoBytes(g,_,w){let T=(g<<8)+_-1,M=Math.floor(T/1600);w[0]=M,T-=M*1600,M=Math.floor(T/40),w[1]=M,w[2]=T-M*40}static decodeEdifactSegment(g,_){do{if(g.available()<=16)return;for(let w=0;w<4;w++){let T=g.readBits(6);if(T===31){const M=8-g.getBitOffset();M!==8&&g.readBits(M);return}(T&32)===0&&(T|=64),_.append(String.fromCharCode(T))}}while(g.available()>0)}static decodeBase256Segment(g,_,w){let T=1+g.getByteOffset();const M=this.unrandomize255State(g.readBits(8),T++);let O;if(M===0?O=g.available()/8|0:M<250?O=M:O=250*(M-249)+this.unrandomize255State(g.readBits(8),T++),O<0)throw new J;const V=new Uint8Array(O);for(let W=0;W<O;W++){if(g.available()<8)throw new J;V[W]=this.unrandomize255State(g.readBits(8),T++)}w.push(V);try{_.append(Te.decode(V,ye.ISO88591))}catch(W){throw new rn("Platform does not support required encoding: "+W.message)}}static unrandomize255State(g,_){const w=149*_%255+1,T=g-w;return T>=0?T:T+256}}os.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],os.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],os.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],os.TEXT_SHIFT2_SET_CHARS=os.C40_SHIFT2_SET_CHARS,os.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ls{constructor(){this.rsDecoder=new xn(Ii.DATA_MATRIX_FIELD_256)}decode(g){const _=new Oo(g),w=_.getVersion(),T=_.readCodewords(),M=bn.getDataBlocks(T,w);let O=0;for(let K of M)O+=K.getNumDataCodewords();const V=new Uint8Array(O),W=M.length;for(let K=0;K<W;K++){const de=M[K],ke=de.getCodewords(),Pe=de.getNumDataCodewords();this.correctErrors(ke,Pe);for(let Ze=0;Ze<Pe;Ze++)V[Ze*W+K]=ke[Ze]}return os.decode(V)}correctErrors(g,_){const w=new Int32Array(g);try{this.rsDecoder.decode(w,g.length-_)}catch{throw new E}for(let T=0;T<_;T++)g[T]=w[T]}}class ha{constructor(g){this.image=g,this.rectangleDetector=new Ti(this.image)}detect(){const g=this.rectangleDetector.detect();let _=this.detectSolid1(g);if(_=this.detectSolid2(_),_[3]=this.correctTopRight(_),!_[3])throw new Le;_=this.shiftToModuleCenter(_);const w=_[0],T=_[1],M=_[2],O=_[3];let V=this.transitionsBetween(w,O)+1,W=this.transitionsBetween(M,O)+1;(V&1)===1&&(V+=1),(W&1)===1&&(W+=1),4*V<7*W&&4*W<7*V&&(V=W=Math.max(V,W));let K=ha.sampleGrid(this.image,w,T,M,O,V,W);return new Wi(K,[w,T,M,O])}static shiftPoint(g,_,w){let T=(_.getX()-g.getX())/(w+1),M=(_.getY()-g.getY())/(w+1);return new ci(g.getX()+T,g.getY()+M)}static moveAway(g,_,w){let T=g.getX(),M=g.getY();return T<_?T-=1:T+=1,M<w?M-=1:M+=1,new ci(T,M)}detectSolid1(g){let _=g[0],w=g[1],T=g[3],M=g[2],O=this.transitionsBetween(_,w),V=this.transitionsBetween(w,T),W=this.transitionsBetween(T,M),K=this.transitionsBetween(M,_),de=O,ke=[M,_,w,T];return de>V&&(de=V,ke[0]=_,ke[1]=w,ke[2]=T,ke[3]=M),de>W&&(de=W,ke[0]=w,ke[1]=T,ke[2]=M,ke[3]=_),de>K&&(ke[0]=T,ke[1]=M,ke[2]=_,ke[3]=w),ke}detectSolid2(g){let _=g[0],w=g[1],T=g[2],M=g[3],O=this.transitionsBetween(_,M),V=ha.shiftPoint(w,T,(O+1)*4),W=ha.shiftPoint(T,w,(O+1)*4),K=this.transitionsBetween(V,_),de=this.transitionsBetween(W,M);return K<de?(g[0]=_,g[1]=w,g[2]=T,g[3]=M):(g[0]=w,g[1]=T,g[2]=M,g[3]=_),g}correctTopRight(g){let _=g[0],w=g[1],T=g[2],M=g[3],O=this.transitionsBetween(_,M),V=this.transitionsBetween(w,M),W=ha.shiftPoint(_,w,(V+1)*4),K=ha.shiftPoint(T,w,(O+1)*4);O=this.transitionsBetween(W,M),V=this.transitionsBetween(K,M);let de=new ci(M.getX()+(T.getX()-w.getX())/(O+1),M.getY()+(T.getY()-w.getY())/(O+1)),ke=new ci(M.getX()+(_.getX()-w.getX())/(V+1),M.getY()+(_.getY()-w.getY())/(V+1));if(!this.isValid(de))return this.isValid(ke)?ke:null;if(!this.isValid(ke))return de;let Pe=this.transitionsBetween(W,de)+this.transitionsBetween(K,de),Ze=this.transitionsBetween(W,ke)+this.transitionsBetween(K,ke);return Pe>Ze?de:ke}shiftToModuleCenter(g){let _=g[0],w=g[1],T=g[2],M=g[3],O=this.transitionsBetween(_,M)+1,V=this.transitionsBetween(T,M)+1,W=ha.shiftPoint(_,w,V*4),K=ha.shiftPoint(T,w,O*4);O=this.transitionsBetween(W,M)+1,V=this.transitionsBetween(K,M)+1,(O&1)===1&&(O+=1),(V&1)===1&&(V+=1);let de=(_.getX()+w.getX()+T.getX()+M.getX())/4,ke=(_.getY()+w.getY()+T.getY()+M.getY())/4;_=ha.moveAway(_,de,ke),w=ha.moveAway(w,de,ke),T=ha.moveAway(T,de,ke),M=ha.moveAway(M,de,ke);let Pe,Ze;return W=ha.shiftPoint(_,w,V*4),W=ha.shiftPoint(W,M,O*4),Pe=ha.shiftPoint(w,_,V*4),Pe=ha.shiftPoint(Pe,T,O*4),K=ha.shiftPoint(T,M,V*4),K=ha.shiftPoint(K,w,O*4),Ze=ha.shiftPoint(M,T,V*4),Ze=ha.shiftPoint(Ze,_,O*4),[W,Pe,K,Ze]}isValid(g){return g.getX()>=0&&g.getX()<this.image.getWidth()&&g.getY()>0&&g.getY()<this.image.getHeight()}static sampleGrid(g,_,w,T,M,O,V){return be.getInstance().sampleGrid(g,O,V,.5,.5,O-.5,.5,O-.5,V-.5,.5,V-.5,_.getX(),_.getY(),M.getX(),M.getY(),T.getX(),T.getY(),w.getX(),w.getY())}transitionsBetween(g,_){let w=Math.trunc(g.getX()),T=Math.trunc(g.getY()),M=Math.trunc(_.getX()),O=Math.trunc(_.getY()),V=Math.abs(O-T)>Math.abs(M-w);if(V){let vt=w;w=T,T=vt,vt=M,M=O,O=vt}let W=Math.abs(M-w),K=Math.abs(O-T),de=-W/2,ke=T<O?1:-1,Pe=w<M?1:-1,Ze=0,mt=this.image.get(V?T:w,V?w:T);for(let vt=w,zt=T;vt!==M;vt+=Pe){let Kt=this.image.get(V?zt:vt,V?vt:zt);if(Kt!==mt&&(Ze++,mt=Kt),de+=K,de>0){if(zt===O)break;zt+=ke,de-=W}}return Ze}}class Ga{constructor(){this.decoder=new ls}decode(g,_=null){let w,T;if(_!=null&&_.has(le.PURE_BARCODE)){const K=Ga.extractPureBits(g.getBlackMatrix());w=this.decoder.decode(K),T=Ga.NO_POINTS}else{const K=new ha(g.getBlackMatrix()).detect();w=this.decoder.decode(K.getBits()),T=K.getPoints()}const M=w.getRawBytes(),O=new Lt(w.getText(),M,8*M.length,T,wt.DATA_MATRIX,D.currentTimeMillis()),V=w.getByteSegments();V!=null&&O.putMetadata(bi.BYTE_SEGMENTS,V);const W=w.getECLevel();return W!=null&&O.putMetadata(bi.ERROR_CORRECTION_LEVEL,W),O}reset(){}static extractPureBits(g){const _=g.getTopLeftOnBit(),w=g.getBottomRightOnBit();if(_==null||w==null)throw new Le;const T=this.moduleSize(_,g);let M=_[1];const O=w[1];let V=_[0];const K=(w[0]-V+1)/T,de=(O-M+1)/T;if(K<=0||de<=0)throw new Le;const ke=T/2;M+=ke,V+=ke;const Pe=new We(K,de);for(let Ze=0;Ze<de;Ze++){const mt=M+Ze*T;for(let vt=0;vt<K;vt++)g.get(V+vt*T,mt)&&Pe.set(vt,Ze)}return Pe}static moduleSize(g,_){const w=_.getWidth();let T=g[0];const M=g[1];for(;T<w&&_.get(T,M);)T++;if(T===w)throw new Le;const O=T-g[0];if(O===0)throw new Le;return O}}Ga.NO_POINTS=[];class jl extends xi{constructor(g=500){super(new Ga,g)}}var So;(function(Se){Se[Se.L=0]="L",Se[Se.M=1]="M",Se[Se.Q=2]="Q",Se[Se.H=3]="H"})(So||(So={}));class Ca{constructor(g,_,w){this.value=g,this.stringValue=_,this.bits=w,Ca.FOR_BITS.set(w,this),Ca.FOR_VALUE.set(g,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(g){switch(g){case"L":return Ca.L;case"M":return Ca.M;case"Q":return Ca.Q;case"H":return Ca.H;default:throw new y(g+"not available")}}toString(){return this.stringValue}equals(g){if(!(g instanceof Ca))return!1;const _=g;return this.value===_.value}static forBits(g){if(g<0||g>=Ca.FOR_BITS.size)throw new x;return Ca.FOR_BITS.get(g)}}Ca.FOR_BITS=new Map,Ca.FOR_VALUE=new Map,Ca.L=new Ca(So.L,"L",1),Ca.M=new Ca(So.M,"M",0),Ca.Q=new Ca(So.Q,"Q",3),Ca.H=new Ca(So.H,"H",2);class cr{constructor(g){this.errorCorrectionLevel=Ca.forBits(g>>3&3),this.dataMask=g&7}static numBitsDiffering(g,_){return Z.bitCount(g^_)}static decodeFormatInformation(g,_){const w=cr.doDecodeFormatInformation(g,_);return w!==null?w:cr.doDecodeFormatInformation(g^cr.FORMAT_INFO_MASK_QR,_^cr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(g,_){let w=Number.MAX_SAFE_INTEGER,T=0;for(const M of cr.FORMAT_INFO_DECODE_LOOKUP){const O=M[0];if(O===g||O===_)return new cr(M[1]);let V=cr.numBitsDiffering(g,O);V<w&&(T=M[1],w=V),g!==_&&(V=cr.numBitsDiffering(_,O),V<w&&(T=M[1],w=V))}return w<=3?new cr(T):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(g){if(!(g instanceof cr))return!1;const _=g;return this.errorCorrectionLevel===_.errorCorrectionLevel&&this.dataMask===_.dataMask}}cr.FORMAT_INFO_MASK_QR=21522,cr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Rt{constructor(g,..._){this.ecCodewordsPerBlock=g,this.ecBlocks=_}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let g=0;const _=this.ecBlocks;for(const w of _)g+=w.getCount();return g}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Be{constructor(g,_){this.count=g,this.dataCodewords=_}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class In{constructor(g,_,...w){this.versionNumber=g,this.alignmentPatternCenters=_,this.ecBlocks=w;let T=0;const M=w[0].getECCodewordsPerBlock(),O=w[0].getECBlocks();for(const V of O)T+=V.getCount()*(V.getDataCodewords()+M);this.totalCodewords=T}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(g){return this.ecBlocks[g.getValue()]}static getProvisionalVersionForDimension(g){if(g%4!==1)throw new J;try{return this.getVersionForNumber((g-17)/4)}catch{throw new J}}static getVersionForNumber(g){if(g<1||g>40)throw new x;return In.VERSIONS[g-1]}static decodeVersionInformation(g){let _=Number.MAX_SAFE_INTEGER,w=0;for(let T=0;T<In.VERSION_DECODE_INFO.length;T++){const M=In.VERSION_DECODE_INFO[T];if(M===g)return In.getVersionForNumber(T+7);const O=cr.numBitsDiffering(g,M);O<_&&(w=T+7,_=O)}return _<=3?In.getVersionForNumber(w):null}buildFunctionPattern(){const g=this.getDimensionForVersion(),_=new We(g);_.setRegion(0,0,9,9),_.setRegion(g-8,0,8,9),_.setRegion(0,g-8,9,8);const w=this.alignmentPatternCenters.length;for(let T=0;T<w;T++){const M=this.alignmentPatternCenters[T]-2;for(let O=0;O<w;O++)T===0&&(O===0||O===w-1)||T===w-1&&O===0||_.setRegion(this.alignmentPatternCenters[O]-2,M,5,5)}return _.setRegion(6,9,1,g-17),_.setRegion(9,6,g-17,1),this.versionNumber>6&&(_.setRegion(g-11,0,3,6),_.setRegion(0,g-11,6,3)),_}toString(){return""+this.versionNumber}}In.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),In.VERSIONS=[new In(1,new Int32Array(0),new Rt(7,new Be(1,19)),new Rt(10,new Be(1,16)),new Rt(13,new Be(1,13)),new Rt(17,new Be(1,9))),new In(2,Int32Array.from([6,18]),new Rt(10,new Be(1,34)),new Rt(16,new Be(1,28)),new Rt(22,new Be(1,22)),new Rt(28,new Be(1,16))),new In(3,Int32Array.from([6,22]),new Rt(15,new Be(1,55)),new Rt(26,new Be(1,44)),new Rt(18,new Be(2,17)),new Rt(22,new Be(2,13))),new In(4,Int32Array.from([6,26]),new Rt(20,new Be(1,80)),new Rt(18,new Be(2,32)),new Rt(26,new Be(2,24)),new Rt(16,new Be(4,9))),new In(5,Int32Array.from([6,30]),new Rt(26,new Be(1,108)),new Rt(24,new Be(2,43)),new Rt(18,new Be(2,15),new Be(2,16)),new Rt(22,new Be(2,11),new Be(2,12))),new In(6,Int32Array.from([6,34]),new Rt(18,new Be(2,68)),new Rt(16,new Be(4,27)),new Rt(24,new Be(4,19)),new Rt(28,new Be(4,15))),new In(7,Int32Array.from([6,22,38]),new Rt(20,new Be(2,78)),new Rt(18,new Be(4,31)),new Rt(18,new Be(2,14),new Be(4,15)),new Rt(26,new Be(4,13),new Be(1,14))),new In(8,Int32Array.from([6,24,42]),new Rt(24,new Be(2,97)),new Rt(22,new Be(2,38),new Be(2,39)),new Rt(22,new Be(4,18),new Be(2,19)),new Rt(26,new Be(4,14),new Be(2,15))),new In(9,Int32Array.from([6,26,46]),new Rt(30,new Be(2,116)),new Rt(22,new Be(3,36),new Be(2,37)),new Rt(20,new Be(4,16),new Be(4,17)),new Rt(24,new Be(4,12),new Be(4,13))),new In(10,Int32Array.from([6,28,50]),new Rt(18,new Be(2,68),new Be(2,69)),new Rt(26,new Be(4,43),new Be(1,44)),new Rt(24,new Be(6,19),new Be(2,20)),new Rt(28,new Be(6,15),new Be(2,16))),new In(11,Int32Array.from([6,30,54]),new Rt(20,new Be(4,81)),new Rt(30,new Be(1,50),new Be(4,51)),new Rt(28,new Be(4,22),new Be(4,23)),new Rt(24,new Be(3,12),new Be(8,13))),new In(12,Int32Array.from([6,32,58]),new Rt(24,new Be(2,92),new Be(2,93)),new Rt(22,new Be(6,36),new Be(2,37)),new Rt(26,new Be(4,20),new Be(6,21)),new Rt(28,new Be(7,14),new Be(4,15))),new In(13,Int32Array.from([6,34,62]),new Rt(26,new Be(4,107)),new Rt(22,new Be(8,37),new Be(1,38)),new Rt(24,new Be(8,20),new Be(4,21)),new Rt(22,new Be(12,11),new Be(4,12))),new In(14,Int32Array.from([6,26,46,66]),new Rt(30,new Be(3,115),new Be(1,116)),new Rt(24,new Be(4,40),new Be(5,41)),new Rt(20,new Be(11,16),new Be(5,17)),new Rt(24,new Be(11,12),new Be(5,13))),new In(15,Int32Array.from([6,26,48,70]),new Rt(22,new Be(5,87),new Be(1,88)),new Rt(24,new Be(5,41),new Be(5,42)),new Rt(30,new Be(5,24),new Be(7,25)),new Rt(24,new Be(11,12),new Be(7,13))),new In(16,Int32Array.from([6,26,50,74]),new Rt(24,new Be(5,98),new Be(1,99)),new Rt(28,new Be(7,45),new Be(3,46)),new Rt(24,new Be(15,19),new Be(2,20)),new Rt(30,new Be(3,15),new Be(13,16))),new In(17,Int32Array.from([6,30,54,78]),new Rt(28,new Be(1,107),new Be(5,108)),new Rt(28,new Be(10,46),new Be(1,47)),new Rt(28,new Be(1,22),new Be(15,23)),new Rt(28,new Be(2,14),new Be(17,15))),new In(18,Int32Array.from([6,30,56,82]),new Rt(30,new Be(5,120),new Be(1,121)),new Rt(26,new Be(9,43),new Be(4,44)),new Rt(28,new Be(17,22),new Be(1,23)),new Rt(28,new Be(2,14),new Be(19,15))),new In(19,Int32Array.from([6,30,58,86]),new Rt(28,new Be(3,113),new Be(4,114)),new Rt(26,new Be(3,44),new Be(11,45)),new Rt(26,new Be(17,21),new Be(4,22)),new Rt(26,new Be(9,13),new Be(16,14))),new In(20,Int32Array.from([6,34,62,90]),new Rt(28,new Be(3,107),new Be(5,108)),new Rt(26,new Be(3,41),new Be(13,42)),new Rt(30,new Be(15,24),new Be(5,25)),new Rt(28,new Be(15,15),new Be(10,16))),new In(21,Int32Array.from([6,28,50,72,94]),new Rt(28,new Be(4,116),new Be(4,117)),new Rt(26,new Be(17,42)),new Rt(28,new Be(17,22),new Be(6,23)),new Rt(30,new Be(19,16),new Be(6,17))),new In(22,Int32Array.from([6,26,50,74,98]),new Rt(28,new Be(2,111),new Be(7,112)),new Rt(28,new Be(17,46)),new Rt(30,new Be(7,24),new Be(16,25)),new Rt(24,new Be(34,13))),new In(23,Int32Array.from([6,30,54,78,102]),new Rt(30,new Be(4,121),new Be(5,122)),new Rt(28,new Be(4,47),new Be(14,48)),new Rt(30,new Be(11,24),new Be(14,25)),new Rt(30,new Be(16,15),new Be(14,16))),new In(24,Int32Array.from([6,28,54,80,106]),new Rt(30,new Be(6,117),new Be(4,118)),new Rt(28,new Be(6,45),new Be(14,46)),new Rt(30,new Be(11,24),new Be(16,25)),new Rt(30,new Be(30,16),new Be(2,17))),new In(25,Int32Array.from([6,32,58,84,110]),new Rt(26,new Be(8,106),new Be(4,107)),new Rt(28,new Be(8,47),new Be(13,48)),new Rt(30,new Be(7,24),new Be(22,25)),new Rt(30,new Be(22,15),new Be(13,16))),new In(26,Int32Array.from([6,30,58,86,114]),new Rt(28,new Be(10,114),new Be(2,115)),new Rt(28,new Be(19,46),new Be(4,47)),new Rt(28,new Be(28,22),new Be(6,23)),new Rt(30,new Be(33,16),new Be(4,17))),new In(27,Int32Array.from([6,34,62,90,118]),new Rt(30,new Be(8,122),new Be(4,123)),new Rt(28,new Be(22,45),new Be(3,46)),new Rt(30,new Be(8,23),new Be(26,24)),new Rt(30,new Be(12,15),new Be(28,16))),new In(28,Int32Array.from([6,26,50,74,98,122]),new Rt(30,new Be(3,117),new Be(10,118)),new Rt(28,new Be(3,45),new Be(23,46)),new Rt(30,new Be(4,24),new Be(31,25)),new Rt(30,new Be(11,15),new Be(31,16))),new In(29,Int32Array.from([6,30,54,78,102,126]),new Rt(30,new Be(7,116),new Be(7,117)),new Rt(28,new Be(21,45),new Be(7,46)),new Rt(30,new Be(1,23),new Be(37,24)),new Rt(30,new Be(19,15),new Be(26,16))),new In(30,Int32Array.from([6,26,52,78,104,130]),new Rt(30,new Be(5,115),new Be(10,116)),new Rt(28,new Be(19,47),new Be(10,48)),new Rt(30,new Be(15,24),new Be(25,25)),new Rt(30,new Be(23,15),new Be(25,16))),new In(31,Int32Array.from([6,30,56,82,108,134]),new Rt(30,new Be(13,115),new Be(3,116)),new Rt(28,new Be(2,46),new Be(29,47)),new Rt(30,new Be(42,24),new Be(1,25)),new Rt(30,new Be(23,15),new Be(28,16))),new In(32,Int32Array.from([6,34,60,86,112,138]),new Rt(30,new Be(17,115)),new Rt(28,new Be(10,46),new Be(23,47)),new Rt(30,new Be(10,24),new Be(35,25)),new Rt(30,new Be(19,15),new Be(35,16))),new In(33,Int32Array.from([6,30,58,86,114,142]),new Rt(30,new Be(17,115),new Be(1,116)),new Rt(28,new Be(14,46),new Be(21,47)),new Rt(30,new Be(29,24),new Be(19,25)),new Rt(30,new Be(11,15),new Be(46,16))),new In(34,Int32Array.from([6,34,62,90,118,146]),new Rt(30,new Be(13,115),new Be(6,116)),new Rt(28,new Be(14,46),new Be(23,47)),new Rt(30,new Be(44,24),new Be(7,25)),new Rt(30,new Be(59,16),new Be(1,17))),new In(35,Int32Array.from([6,30,54,78,102,126,150]),new Rt(30,new Be(12,121),new Be(7,122)),new Rt(28,new Be(12,47),new Be(26,48)),new Rt(30,new Be(39,24),new Be(14,25)),new Rt(30,new Be(22,15),new Be(41,16))),new In(36,Int32Array.from([6,24,50,76,102,128,154]),new Rt(30,new Be(6,121),new Be(14,122)),new Rt(28,new Be(6,47),new Be(34,48)),new Rt(30,new Be(46,24),new Be(10,25)),new Rt(30,new Be(2,15),new Be(64,16))),new In(37,Int32Array.from([6,28,54,80,106,132,158]),new Rt(30,new Be(17,122),new Be(4,123)),new Rt(28,new Be(29,46),new Be(14,47)),new Rt(30,new Be(49,24),new Be(10,25)),new Rt(30,new Be(24,15),new Be(46,16))),new In(38,Int32Array.from([6,32,58,84,110,136,162]),new Rt(30,new Be(4,122),new Be(18,123)),new Rt(28,new Be(13,46),new Be(32,47)),new Rt(30,new Be(48,24),new Be(14,25)),new Rt(30,new Be(42,15),new Be(32,16))),new In(39,Int32Array.from([6,26,54,82,110,138,166]),new Rt(30,new Be(20,117),new Be(4,118)),new Rt(28,new Be(40,47),new Be(7,48)),new Rt(30,new Be(43,24),new Be(22,25)),new Rt(30,new Be(10,15),new Be(67,16))),new In(40,Int32Array.from([6,30,58,86,114,142,170]),new Rt(30,new Be(19,118),new Be(6,119)),new Rt(28,new Be(18,47),new Be(31,48)),new Rt(30,new Be(34,24),new Be(34,25)),new Rt(30,new Be(20,15),new Be(61,16)))];var ur;(function(Se){Se[Se.DATA_MASK_000=0]="DATA_MASK_000",Se[Se.DATA_MASK_001=1]="DATA_MASK_001",Se[Se.DATA_MASK_010=2]="DATA_MASK_010",Se[Se.DATA_MASK_011=3]="DATA_MASK_011",Se[Se.DATA_MASK_100=4]="DATA_MASK_100",Se[Se.DATA_MASK_101=5]="DATA_MASK_101",Se[Se.DATA_MASK_110=6]="DATA_MASK_110",Se[Se.DATA_MASK_111=7]="DATA_MASK_111"})(ur||(ur={}));class Er{constructor(g,_){this.value=g,this.isMasked=_}unmaskBitMatrix(g,_){for(let w=0;w<_;w++)for(let T=0;T<_;T++)this.isMasked(w,T)&&g.flip(T,w)}}Er.values=new Map([[ur.DATA_MASK_000,new Er(ur.DATA_MASK_000,(Se,g)=>(Se+g&1)===0)],[ur.DATA_MASK_001,new Er(ur.DATA_MASK_001,(Se,g)=>(Se&1)===0)],[ur.DATA_MASK_010,new Er(ur.DATA_MASK_010,(Se,g)=>g%3===0)],[ur.DATA_MASK_011,new Er(ur.DATA_MASK_011,(Se,g)=>(Se+g)%3===0)],[ur.DATA_MASK_100,new Er(ur.DATA_MASK_100,(Se,g)=>(Math.floor(Se/2)+Math.floor(g/3)&1)===0)],[ur.DATA_MASK_101,new Er(ur.DATA_MASK_101,(Se,g)=>Se*g%6===0)],[ur.DATA_MASK_110,new Er(ur.DATA_MASK_110,(Se,g)=>Se*g%6<3)],[ur.DATA_MASK_111,new Er(ur.DATA_MASK_111,(Se,g)=>(Se+g+Se*g%3&1)===0)]]);class Mr{constructor(g){const _=g.getHeight();if(_<21||(_&3)!==1)throw new J;this.bitMatrix=g}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let g=0;for(let M=0;M<6;M++)g=this.copyBit(M,8,g);g=this.copyBit(7,8,g),g=this.copyBit(8,8,g),g=this.copyBit(8,7,g);for(let M=5;M>=0;M--)g=this.copyBit(8,M,g);const _=this.bitMatrix.getHeight();let w=0;const T=_-7;for(let M=_-1;M>=T;M--)w=this.copyBit(8,M,w);for(let M=_-8;M<_;M++)w=this.copyBit(M,8,w);if(this.parsedFormatInfo=cr.decodeFormatInformation(g,w),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new J}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const g=this.bitMatrix.getHeight(),_=Math.floor((g-17)/4);if(_<=6)return In.getVersionForNumber(_);let w=0;const T=g-11;for(let O=5;O>=0;O--)for(let V=g-9;V>=T;V--)w=this.copyBit(V,O,w);let M=In.decodeVersionInformation(w);if(M!==null&&M.getDimensionForVersion()===g)return this.parsedVersion=M,M;w=0;for(let O=5;O>=0;O--)for(let V=g-9;V>=T;V--)w=this.copyBit(O,V,w);if(M=In.decodeVersionInformation(w),M!==null&&M.getDimensionForVersion()===g)return this.parsedVersion=M,M;throw new J}copyBit(g,_,w){return(this.isMirror?this.bitMatrix.get(_,g):this.bitMatrix.get(g,_))?w<<1|1:w<<1}readCodewords(){const g=this.readFormatInformation(),_=this.readVersion(),w=Er.values.get(g.getDataMask()),T=this.bitMatrix.getHeight();w.unmaskBitMatrix(this.bitMatrix,T);const M=_.buildFunctionPattern();let O=!0;const V=new Uint8Array(_.getTotalCodewords());let W=0,K=0,de=0;for(let ke=T-1;ke>0;ke-=2){ke===6&&ke--;for(let Pe=0;Pe<T;Pe++){const Ze=O?T-1-Pe:Pe;for(let mt=0;mt<2;mt++)M.get(ke-mt,Ze)||(de++,K<<=1,this.bitMatrix.get(ke-mt,Ze)&&(K|=1),de===8&&(V[W++]=K,de=0,K=0))}O=!O}if(W!==_.getTotalCodewords())throw new J;return V}remask(){if(this.parsedFormatInfo===null)return;const g=Er.values[this.parsedFormatInfo.getDataMask()],_=this.bitMatrix.getHeight();g.unmaskBitMatrix(this.bitMatrix,_)}setMirror(g){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=g}mirror(){const g=this.bitMatrix;for(let _=0,w=g.getWidth();_<w;_++)for(let T=_+1,M=g.getHeight();T<M;T++)g.get(_,T)!==g.get(T,_)&&(g.flip(T,_),g.flip(_,T))}}class yl{constructor(g,_){this.numDataCodewords=g,this.codewords=_}static getDataBlocks(g,_,w){if(g.length!==_.getTotalCodewords())throw new x;const T=_.getECBlocksForLevel(w);let M=0;const O=T.getECBlocks();for(const mt of O)M+=mt.getCount();const V=new Array(M);let W=0;for(const mt of O)for(let vt=0;vt<mt.getCount();vt++){const zt=mt.getDataCodewords(),Kt=T.getECCodewordsPerBlock()+zt;V[W++]=new yl(zt,new Uint8Array(Kt))}const K=V[0].codewords.length;let de=V.length-1;for(;de>=0&&V[de].codewords.length!==K;)de--;de++;const ke=K-T.getECCodewordsPerBlock();let Pe=0;for(let mt=0;mt<ke;mt++)for(let vt=0;vt<W;vt++)V[vt].codewords[mt]=g[Pe++];for(let mt=de;mt<W;mt++)V[mt].codewords[ke]=g[Pe++];const Ze=V[0].codewords.length;for(let mt=ke;mt<Ze;mt++)for(let vt=0;vt<W;vt++){const zt=vt<de?mt:mt+1;V[vt].codewords[zt]=g[Pe++]}return V}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hr;(function(Se){Se[Se.TERMINATOR=0]="TERMINATOR",Se[Se.NUMERIC=1]="NUMERIC",Se[Se.ALPHANUMERIC=2]="ALPHANUMERIC",Se[Se.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Se[Se.BYTE=4]="BYTE",Se[Se.ECI=5]="ECI",Se[Se.KANJI=6]="KANJI",Se[Se.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Se[Se.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Se[Se.HANZI=9]="HANZI"})(hr||(hr={}));class Fn{constructor(g,_,w,T){this.value=g,this.stringValue=_,this.characterCountBitsForVersions=w,this.bits=T,Fn.FOR_BITS.set(T,this),Fn.FOR_VALUE.set(g,this)}static forBits(g){const _=Fn.FOR_BITS.get(g);if(_===void 0)throw new x;return _}getCharacterCountBits(g){const _=g.getVersionNumber();let w;return _<=9?w=0:_<=26?w=1:w=2,this.characterCountBitsForVersions[w]}getValue(){return this.value}getBits(){return this.bits}equals(g){if(!(g instanceof Fn))return!1;const _=g;return this.value===_.value}toString(){return this.stringValue}}Fn.FOR_BITS=new Map,Fn.FOR_VALUE=new Map,Fn.TERMINATOR=new Fn(hr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Fn.NUMERIC=new Fn(hr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Fn.ALPHANUMERIC=new Fn(hr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Fn.STRUCTURED_APPEND=new Fn(hr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Fn.BYTE=new Fn(hr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Fn.ECI=new Fn(hr.ECI,"ECI",Int32Array.from([0,0,0]),7),Fn.KANJI=new Fn(hr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Fn.FNC1_FIRST_POSITION=new Fn(hr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Fn.FNC1_SECOND_POSITION=new Fn(hr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Fn.HANZI=new Fn(hr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class za{static decode(g,_,w,T){const M=new ks(g);let O=new Re;const V=new Array;let W=-1,K=-1;try{let de=null,ke=!1,Pe;do{if(M.available()<4)Pe=Fn.TERMINATOR;else{const Ze=M.readBits(4);Pe=Fn.forBits(Ze)}switch(Pe){case Fn.TERMINATOR:break;case Fn.FNC1_FIRST_POSITION:case Fn.FNC1_SECOND_POSITION:ke=!0;break;case Fn.STRUCTURED_APPEND:if(M.available()<16)throw new J;W=M.readBits(8),K=M.readBits(8);break;case Fn.ECI:const Ze=za.parseECIValue(M);if(de=ae.getCharacterSetECIByValue(Ze),de===null)throw new J;break;case Fn.HANZI:const mt=M.readBits(4),vt=M.readBits(Pe.getCharacterCountBits(_));mt===za.GB2312_SUBSET&&za.decodeHanziSegment(M,O,vt);break;default:const zt=M.readBits(Pe.getCharacterCountBits(_));switch(Pe){case Fn.NUMERIC:za.decodeNumericSegment(M,O,zt);break;case Fn.ALPHANUMERIC:za.decodeAlphanumericSegment(M,O,zt,ke);break;case Fn.BYTE:za.decodeByteSegment(M,O,zt,de,V,T);break;case Fn.KANJI:za.decodeKanjiSegment(M,O,zt);break;default:throw new J}break}}while(Pe!==Fn.TERMINATOR)}catch{throw new J}return new Zi(g,O.toString(),V.length===0?null:V,w===null?null:w.toString(),W,K)}static decodeHanziSegment(g,_,w){if(w*13>g.available())throw new J;const T=new Uint8Array(2*w);let M=0;for(;w>0;){const O=g.readBits(13);let V=O/96<<8&4294967295|O%96;V<959?V+=41377:V+=42657,T[M]=V>>8&255,T[M+1]=V&255,M+=2,w--}try{_.append(Te.decode(T,ye.GB2312))}catch(O){throw new J(O)}}static decodeKanjiSegment(g,_,w){if(w*13>g.available())throw new J;const T=new Uint8Array(2*w);let M=0;for(;w>0;){const O=g.readBits(13);let V=O/192<<8&4294967295|O%192;V<7936?V+=33088:V+=49472,T[M]=V>>8,T[M+1]=V,M+=2,w--}try{_.append(Te.decode(T,ye.SHIFT_JIS))}catch(O){throw new J(O)}}static decodeByteSegment(g,_,w,T,M,O){if(8*w>g.available())throw new J;const V=new Uint8Array(w);for(let K=0;K<w;K++)V[K]=g.readBits(8);let W;T===null?W=ye.guessEncoding(V,O):W=T.getName();try{_.append(Te.decode(V,W))}catch(K){throw new J(K)}M.push(V)}static toAlphaNumericChar(g){if(g>=za.ALPHANUMERIC_CHARS.length)throw new J;return za.ALPHANUMERIC_CHARS[g]}static decodeAlphanumericSegment(g,_,w,T){const M=_.length();for(;w>1;){if(g.available()<11)throw new J;const O=g.readBits(11);_.append(za.toAlphaNumericChar(Math.floor(O/45))),_.append(za.toAlphaNumericChar(O%45)),w-=2}if(w===1){if(g.available()<6)throw new J;_.append(za.toAlphaNumericChar(g.readBits(6)))}if(T)for(let O=M;O<_.length();O++)_.charAt(O)==="%"&&(O<_.length()-1&&_.charAt(O+1)==="%"?_.deleteCharAt(O+1):_.setCharAt(O,""))}static decodeNumericSegment(g,_,w){for(;w>=3;){if(g.available()<10)throw new J;const T=g.readBits(10);if(T>=1e3)throw new J;_.append(za.toAlphaNumericChar(Math.floor(T/100))),_.append(za.toAlphaNumericChar(Math.floor(T/10)%10)),_.append(za.toAlphaNumericChar(T%10)),w-=3}if(w===2){if(g.available()<7)throw new J;const T=g.readBits(7);if(T>=100)throw new J;_.append(za.toAlphaNumericChar(Math.floor(T/10))),_.append(za.toAlphaNumericChar(T%10))}else if(w===1){if(g.available()<4)throw new J;const T=g.readBits(4);if(T>=10)throw new J;_.append(za.toAlphaNumericChar(T))}}static parseECIValue(g){const _=g.readBits(8);if((_&128)===0)return _&127;if((_&192)===128){const w=g.readBits(8);return(_&63)<<8&4294967295|w}if((_&224)===192){const w=g.readBits(16);return(_&31)<<16&4294967295|w}throw new J}}za.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",za.GB2312_SUBSET=1;class xr{constructor(g){this.mirrored=g}isMirrored(){return this.mirrored}applyMirroredCorrection(g){if(!this.mirrored||g===null||g.length<3)return;const _=g[0];g[0]=g[2],g[2]=_}}class vr{constructor(){this.rsDecoder=new xn(Ii.QR_CODE_FIELD_256)}decodeBooleanArray(g,_){return this.decodeBitMatrix(We.parseFromBooleanArray(g),_)}decodeBitMatrix(g,_){const w=new Mr(g);let T=null;try{return this.decodeBitMatrixParser(w,_)}catch(M){T=M}try{w.remask(),w.setMirror(!0),w.readVersion(),w.readFormatInformation(),w.mirror();const M=this.decodeBitMatrixParser(w,_);return M.setOther(new xr(!0)),M}catch(M){throw T!==null?T:M}}decodeBitMatrixParser(g,_){const w=g.readVersion(),T=g.readFormatInformation().getErrorCorrectionLevel(),M=g.readCodewords(),O=yl.getDataBlocks(M,w,T);let V=0;for(const de of O)V+=de.getNumDataCodewords();const W=new Uint8Array(V);let K=0;for(const de of O){const ke=de.getCodewords(),Pe=de.getNumDataCodewords();this.correctErrors(ke,Pe);for(let Ze=0;Ze<Pe;Ze++)W[K++]=ke[Ze]}return za.decode(W,w,T,_)}correctErrors(g,_){const w=new Int32Array(g);try{this.rsDecoder.decode(w,g.length-_)}catch{throw new E}for(let T=0;T<_;T++)g[T]=w[T]}}class yn extends ci{constructor(g,_,w){super(g,_),this.estimatedModuleSize=w}aboutEquals(g,_,w){if(Math.abs(_-this.getY())<=g&&Math.abs(w-this.getX())<=g){const T=Math.abs(g-this.estimatedModuleSize);return T<=1||T<=this.estimatedModuleSize}return!1}combineEstimate(g,_,w){const T=(this.getX()+_)/2,M=(this.getY()+g)/2,O=(this.estimatedModuleSize+w)/2;return new yn(T,M,O)}}class Ws{constructor(g,_,w,T,M,O,V){this.image=g,this.startX=_,this.startY=w,this.width=T,this.height=M,this.moduleSize=O,this.resultPointCallback=V,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const g=this.startX,_=this.height,w=this.width,T=g+w,M=this.startY+_/2,O=new Int32Array(3),V=this.image;for(let W=0;W<_;W++){const K=M+((W&1)===0?Math.floor((W+1)/2):-Math.floor((W+1)/2));O[0]=0,O[1]=0,O[2]=0;let de=g;for(;de<T&&!V.get(de,K);)de++;let ke=0;for(;de<T;){if(V.get(de,K))if(ke===1)O[1]++;else if(ke===2){if(this.foundPatternCross(O)){const Pe=this.handlePossibleCenter(O,K,de);if(Pe!==null)return Pe}O[0]=O[2],O[1]=1,O[2]=0,ke=1}else O[++ke]++;else ke===1&&ke++,O[ke]++;de++}if(this.foundPatternCross(O)){const Pe=this.handlePossibleCenter(O,K,T);if(Pe!==null)return Pe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Le}static centerFromEnd(g,_){return _-g[2]-g[1]/2}foundPatternCross(g){const _=this.moduleSize,w=_/2;for(let T=0;T<3;T++)if(Math.abs(_-g[T])>=w)return!1;return!0}crossCheckVertical(g,_,w,T){const M=this.image,O=M.getHeight(),V=this.crossCheckStateCount;V[0]=0,V[1]=0,V[2]=0;let W=g;for(;W>=0&&M.get(_,W)&&V[1]<=w;)V[1]++,W--;if(W<0||V[1]>w)return NaN;for(;W>=0&&!M.get(_,W)&&V[0]<=w;)V[0]++,W--;if(V[0]>w)return NaN;for(W=g+1;W<O&&M.get(_,W)&&V[1]<=w;)V[1]++,W++;if(W===O||V[1]>w)return NaN;for(;W<O&&!M.get(_,W)&&V[2]<=w;)V[2]++,W++;if(V[2]>w)return NaN;const K=V[0]+V[1]+V[2];return 5*Math.abs(K-T)>=2*T?NaN:this.foundPatternCross(V)?Ws.centerFromEnd(V,W):NaN}handlePossibleCenter(g,_,w){const T=g[0]+g[1]+g[2],M=Ws.centerFromEnd(g,w),O=this.crossCheckVertical(_,M,2*g[1],T);if(!isNaN(O)){const V=(g[0]+g[1]+g[2])/3;for(const K of this.possibleCenters)if(K.aboutEquals(V,O,M))return K.combineEstimate(O,M,V);const W=new yn(M,O,V);this.possibleCenters.push(W),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(W)}return null}}class zo extends ci{constructor(g,_,w,T){super(g,_),this.estimatedModuleSize=w,this.count=T,T===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(g,_,w){if(Math.abs(_-this.getY())<=g&&Math.abs(w-this.getX())<=g){const T=Math.abs(g-this.estimatedModuleSize);return T<=1||T<=this.estimatedModuleSize}return!1}combineEstimate(g,_,w){const T=this.count+1,M=(this.count*this.getX()+_)/T,O=(this.count*this.getY()+g)/T,V=(this.count*this.estimatedModuleSize+w)/T;return new zo(M,O,V,T)}}class Kn{constructor(g){this.bottomLeft=g[0],this.topLeft=g[1],this.topRight=g[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ta{constructor(g,_){this.image=g,this.resultPointCallback=_,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=_}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(g){const _=g!=null&&g.get(le.TRY_HARDER)!==void 0,w=g!=null&&g.get(le.PURE_BARCODE)!==void 0,T=this.image,M=T.getHeight(),O=T.getWidth();let V=Math.floor(3*M/(4*ta.MAX_MODULES));(V<ta.MIN_SKIP||_)&&(V=ta.MIN_SKIP);let W=!1;const K=new Int32Array(5);for(let ke=V-1;ke<M&&!W;ke+=V){K[0]=0,K[1]=0,K[2]=0,K[3]=0,K[4]=0;let Pe=0;for(let Ze=0;Ze<O;Ze++)if(T.get(Ze,ke))(Pe&1)===1&&Pe++,K[Pe]++;else if((Pe&1)===0)if(Pe===4)if(ta.foundPatternCross(K)){if(this.handlePossibleCenter(K,ke,Ze,w)===!0)if(V=2,this.hasSkipped===!0)W=this.haveMultiplyConfirmedCenters();else{const vt=this.findRowSkip();vt>K[2]&&(ke+=vt-K[2]-V,Ze=O-1)}else{K[0]=K[2],K[1]=K[3],K[2]=K[4],K[3]=1,K[4]=0,Pe=3;continue}Pe=0,K[0]=0,K[1]=0,K[2]=0,K[3]=0,K[4]=0}else K[0]=K[2],K[1]=K[3],K[2]=K[4],K[3]=1,K[4]=0,Pe=3;else K[++Pe]++;else K[Pe]++;ta.foundPatternCross(K)&&this.handlePossibleCenter(K,ke,O,w)===!0&&(V=K[0],this.hasSkipped&&(W=this.haveMultiplyConfirmedCenters()))}const de=this.selectBestPatterns();return ci.orderBestPatterns(de),new Kn(de)}static centerFromEnd(g,_){return _-g[4]-g[3]-g[2]/2}static foundPatternCross(g){let _=0;for(let M=0;M<5;M++){const O=g[M];if(O===0)return!1;_+=O}if(_<7)return!1;const w=_/7,T=w/2;return Math.abs(w-g[0])<T&&Math.abs(w-g[1])<T&&Math.abs(3*w-g[2])<3*T&&Math.abs(w-g[3])<T&&Math.abs(w-g[4])<T}getCrossCheckStateCount(){const g=this.crossCheckStateCount;return g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g}crossCheckDiagonal(g,_,w,T){const M=this.getCrossCheckStateCount();let O=0;const V=this.image;for(;g>=O&&_>=O&&V.get(_-O,g-O);)M[2]++,O++;if(g<O||_<O)return!1;for(;g>=O&&_>=O&&!V.get(_-O,g-O)&&M[1]<=w;)M[1]++,O++;if(g<O||_<O||M[1]>w)return!1;for(;g>=O&&_>=O&&V.get(_-O,g-O)&&M[0]<=w;)M[0]++,O++;if(M[0]>w)return!1;const W=V.getHeight(),K=V.getWidth();for(O=1;g+O<W&&_+O<K&&V.get(_+O,g+O);)M[2]++,O++;if(g+O>=W||_+O>=K)return!1;for(;g+O<W&&_+O<K&&!V.get(_+O,g+O)&&M[3]<w;)M[3]++,O++;if(g+O>=W||_+O>=K||M[3]>=w)return!1;for(;g+O<W&&_+O<K&&V.get(_+O,g+O)&&M[4]<w;)M[4]++,O++;if(M[4]>=w)return!1;const de=M[0]+M[1]+M[2]+M[3]+M[4];return Math.abs(de-T)<2*T&&ta.foundPatternCross(M)}crossCheckVertical(g,_,w,T){const M=this.image,O=M.getHeight(),V=this.getCrossCheckStateCount();let W=g;for(;W>=0&&M.get(_,W);)V[2]++,W--;if(W<0)return NaN;for(;W>=0&&!M.get(_,W)&&V[1]<=w;)V[1]++,W--;if(W<0||V[1]>w)return NaN;for(;W>=0&&M.get(_,W)&&V[0]<=w;)V[0]++,W--;if(V[0]>w)return NaN;for(W=g+1;W<O&&M.get(_,W);)V[2]++,W++;if(W===O)return NaN;for(;W<O&&!M.get(_,W)&&V[3]<w;)V[3]++,W++;if(W===O||V[3]>=w)return NaN;for(;W<O&&M.get(_,W)&&V[4]<w;)V[4]++,W++;if(V[4]>=w)return NaN;const K=V[0]+V[1]+V[2]+V[3]+V[4];return 5*Math.abs(K-T)>=2*T?NaN:ta.foundPatternCross(V)?ta.centerFromEnd(V,W):NaN}crossCheckHorizontal(g,_,w,T){const M=this.image,O=M.getWidth(),V=this.getCrossCheckStateCount();let W=g;for(;W>=0&&M.get(W,_);)V[2]++,W--;if(W<0)return NaN;for(;W>=0&&!M.get(W,_)&&V[1]<=w;)V[1]++,W--;if(W<0||V[1]>w)return NaN;for(;W>=0&&M.get(W,_)&&V[0]<=w;)V[0]++,W--;if(V[0]>w)return NaN;for(W=g+1;W<O&&M.get(W,_);)V[2]++,W++;if(W===O)return NaN;for(;W<O&&!M.get(W,_)&&V[3]<w;)V[3]++,W++;if(W===O||V[3]>=w)return NaN;for(;W<O&&M.get(W,_)&&V[4]<w;)V[4]++,W++;if(V[4]>=w)return NaN;const K=V[0]+V[1]+V[2]+V[3]+V[4];return 5*Math.abs(K-T)>=T?NaN:ta.foundPatternCross(V)?ta.centerFromEnd(V,W):NaN}handlePossibleCenter(g,_,w,T){const M=g[0]+g[1]+g[2]+g[3]+g[4];let O=ta.centerFromEnd(g,w),V=this.crossCheckVertical(_,Math.floor(O),g[2],M);if(!isNaN(V)&&(O=this.crossCheckHorizontal(Math.floor(O),Math.floor(V),g[2],M),!isNaN(O)&&(!T||this.crossCheckDiagonal(Math.floor(V),Math.floor(O),g[2],M)))){const W=M/7;let K=!1;const de=this.possibleCenters;for(let ke=0,Pe=de.length;ke<Pe;ke++){const Ze=de[ke];if(Ze.aboutEquals(W,V,O)){de[ke]=Ze.combineEstimate(V,O,W),K=!0;break}}if(!K){const ke=new zo(O,V,W);de.push(ke),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(ke)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let _=null;for(const w of this.possibleCenters)if(w.getCount()>=ta.CENTER_QUORUM)if(_==null)_=w;else return this.hasSkipped=!0,Math.floor((Math.abs(_.getX()-w.getX())-Math.abs(_.getY()-w.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let g=0,_=0;const w=this.possibleCenters.length;for(const O of this.possibleCenters)O.getCount()>=ta.CENTER_QUORUM&&(g++,_+=O.getEstimatedModuleSize());if(g<3)return!1;const T=_/w;let M=0;for(const O of this.possibleCenters)M+=Math.abs(O.getEstimatedModuleSize()-T);return M<=.05*_}selectBestPatterns(){const g=this.possibleCenters.length;if(g<3)throw new Le;const _=this.possibleCenters;let w;if(g>3){let T=0,M=0;for(const W of this.possibleCenters){const K=W.getEstimatedModuleSize();T+=K,M+=K*K}w=T/g;let O=Math.sqrt(M/g-w*w);_.sort((W,K)=>{const de=Math.abs(K.getEstimatedModuleSize()-w),ke=Math.abs(W.getEstimatedModuleSize()-w);return de<ke?-1:de>ke?1:0});const V=Math.max(.2*w,O);for(let W=0;W<_.length&&_.length>3;W++){const K=_[W];Math.abs(K.getEstimatedModuleSize()-w)>V&&(_.splice(W,1),W--)}}if(_.length>3){let T=0;for(const M of _)T+=M.getEstimatedModuleSize();w=T/_.length,_.sort((M,O)=>{if(O.getCount()===M.getCount()){const V=Math.abs(O.getEstimatedModuleSize()-w),W=Math.abs(M.getEstimatedModuleSize()-w);return V<W?1:V>W?-1:0}else return O.getCount()-M.getCount()}),_.splice(3)}return[_[0],_[1],_[2]]}}ta.CENTER_QUORUM=2,ta.MIN_SKIP=3,ta.MAX_MODULES=57;class tr{constructor(g){this.image=g}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(g){this.resultPointCallback=g==null?null:g.get(le.NEED_RESULT_POINT_CALLBACK);const w=new ta(this.image,this.resultPointCallback).find(g);return this.processFinderPatternInfo(w)}processFinderPatternInfo(g){const _=g.getTopLeft(),w=g.getTopRight(),T=g.getBottomLeft(),M=this.calculateModuleSize(_,w,T);if(M<1)throw new Le("No pattern found in proccess finder.");const O=tr.computeDimension(_,w,T,M),V=In.getProvisionalVersionForDimension(O),W=V.getDimensionForVersion()-7;let K=null;if(V.getAlignmentPatternCenters().length>0){const Ze=w.getX()-_.getX()+T.getX(),mt=w.getY()-_.getY()+T.getY(),vt=1-3/W,zt=Math.floor(_.getX()+vt*(Ze-_.getX())),Kt=Math.floor(_.getY()+vt*(mt-_.getY()));for(let Ri=4;Ri<=16;Ri<<=1)try{K=this.findAlignmentInRegion(M,zt,Kt,Ri);break}catch(zi){if(!(zi instanceof Le))throw zi}}const de=tr.createTransform(_,w,T,K,O),ke=tr.sampleGrid(this.image,de,O);let Pe;return K===null?Pe=[T,_,w]:Pe=[T,_,w,K],new Wi(ke,Pe)}static createTransform(g,_,w,T,M){const O=M-3.5;let V,W,K,de;return T!==null?(V=T.getX(),W=T.getY(),K=O-3,de=K):(V=_.getX()-g.getX()+w.getX(),W=_.getY()-g.getY()+w.getY(),K=O,de=O),dt.quadrilateralToQuadrilateral(3.5,3.5,O,3.5,K,de,3.5,O,g.getX(),g.getY(),_.getX(),_.getY(),V,W,w.getX(),w.getY())}static sampleGrid(g,_,w){return be.getInstance().sampleGridWithTransform(g,w,w,_)}static computeDimension(g,_,w,T){const M=li.round(ci.distance(g,_)/T),O=li.round(ci.distance(g,w)/T);let V=Math.floor((M+O)/2)+7;switch(V&3){case 0:V++;break;case 2:V--;break;case 3:throw new Le("Dimensions could be not found.")}return V}calculateModuleSize(g,_,w){return(this.calculateModuleSizeOneWay(g,_)+this.calculateModuleSizeOneWay(g,w))/2}calculateModuleSizeOneWay(g,_){const w=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(g.getX()),Math.floor(g.getY()),Math.floor(_.getX()),Math.floor(_.getY())),T=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(_.getX()),Math.floor(_.getY()),Math.floor(g.getX()),Math.floor(g.getY()));return isNaN(w)?T/7:isNaN(T)?w/7:(w+T)/14}sizeOfBlackWhiteBlackRunBothWays(g,_,w,T){let M=this.sizeOfBlackWhiteBlackRun(g,_,w,T),O=1,V=g-(w-g);V<0?(O=g/(g-V),V=0):V>=this.image.getWidth()&&(O=(this.image.getWidth()-1-g)/(V-g),V=this.image.getWidth()-1);let W=Math.floor(_-(T-_)*O);return O=1,W<0?(O=_/(_-W),W=0):W>=this.image.getHeight()&&(O=(this.image.getHeight()-1-_)/(W-_),W=this.image.getHeight()-1),V=Math.floor(g+(V-g)*O),M+=this.sizeOfBlackWhiteBlackRun(g,_,V,W),M-1}sizeOfBlackWhiteBlackRun(g,_,w,T){const M=Math.abs(T-_)>Math.abs(w-g);if(M){let Ze=g;g=_,_=Ze,Ze=w,w=T,T=Ze}const O=Math.abs(w-g),V=Math.abs(T-_);let W=-O/2;const K=g<w?1:-1,de=_<T?1:-1;let ke=0;const Pe=w+K;for(let Ze=g,mt=_;Ze!==Pe;Ze+=K){const vt=M?mt:Ze,zt=M?Ze:mt;if(ke===1===this.image.get(vt,zt)){if(ke===2)return li.distance(Ze,mt,g,_);ke++}if(W+=V,W>0){if(mt===T)break;mt+=de,W-=O}}return ke===2?li.distance(w+K,T,g,_):NaN}findAlignmentInRegion(g,_,w,T){const M=Math.floor(T*g),O=Math.max(0,_-M),V=Math.min(this.image.getWidth()-1,_+M);if(V-O<g*3)throw new Le("Alignment top exceeds estimated module size.");const W=Math.max(0,w-M),K=Math.min(this.image.getHeight()-1,w+M);if(K-W<g*3)throw new Le("Alignment bottom exceeds estimated module size.");return new Ws(this.image,O,W,V-O,K-W,g,this.resultPointCallback).find()}}class ea{constructor(){this.decoder=new vr}getDecoder(){return this.decoder}decode(g,_){let w,T;if(_!=null&&_.get(le.PURE_BARCODE)!==void 0){const W=ea.extractPureBits(g.getBlackMatrix());w=this.decoder.decodeBitMatrix(W,_),T=ea.NO_POINTS}else{const W=new tr(g.getBlackMatrix()).detect(_);w=this.decoder.decodeBitMatrix(W.getBits(),_),T=W.getPoints()}w.getOther()instanceof xr&&w.getOther().applyMirroredCorrection(T);const M=new Lt(w.getText(),w.getRawBytes(),void 0,T,wt.QR_CODE,void 0),O=w.getByteSegments();O!==null&&M.putMetadata(bi.BYTE_SEGMENTS,O);const V=w.getECLevel();return V!==null&&M.putMetadata(bi.ERROR_CORRECTION_LEVEL,V),w.hasStructuredAppend()&&(M.putMetadata(bi.STRUCTURED_APPEND_SEQUENCE,w.getStructuredAppendSequenceNumber()),M.putMetadata(bi.STRUCTURED_APPEND_PARITY,w.getStructuredAppendParity())),M}reset(){}static extractPureBits(g){const _=g.getTopLeftOnBit(),w=g.getBottomRightOnBit();if(_===null||w===null)throw new Le;const T=this.moduleSize(_,g);let M=_[1],O=w[1],V=_[0],W=w[0];if(V>=W||M>=O)throw new Le;if(O-M!==W-V&&(W=V+(O-M),W>=g.getWidth()))throw new Le;const K=Math.round((W-V+1)/T),de=Math.round((O-M+1)/T);if(K<=0||de<=0)throw new Le;if(de!==K)throw new Le;const ke=Math.floor(T/2);M+=ke,V+=ke;const Pe=V+Math.floor((K-1)*T)-W;if(Pe>0){if(Pe>ke)throw new Le;V-=Pe}const Ze=M+Math.floor((de-1)*T)-O;if(Ze>0){if(Ze>ke)throw new Le;M-=Ze}const mt=new We(K,de);for(let vt=0;vt<de;vt++){const zt=M+Math.floor(vt*T);for(let Kt=0;Kt<K;Kt++)g.get(V+Math.floor(Kt*T),zt)&&mt.set(Kt,vt)}return mt}static moduleSize(g,_){const w=_.getHeight(),T=_.getWidth();let M=g[0],O=g[1],V=!0,W=0;for(;M<T&&O<w;){if(V!==_.get(M,O)){if(++W===5)break;V=!V}M++,O++}if(M===T||O===w)throw new Le;return(M-g[0])/7}}ea.NO_POINTS=new Array;class _i{PDF417Common(){}static getBitCountSum(g){return li.sum(g)}static toIntArray(g){if(g==null||!g.length)return _i.EMPTY_INT_ARRAY;const _=new Int32Array(g.length);let w=0;for(const T of g)_[w++]=T;return _}static getCodeword(g){const _=G.binarySearch(_i.SYMBOL_TABLE,g&262143);return _<0?-1:(_i.CODEWORD_TABLE[_]-1)%_i.NUMBER_OF_CODEWORDS}}_i.NUMBER_OF_CODEWORDS=929,_i.MAX_CODEWORDS_IN_BARCODE=_i.NUMBER_OF_CODEWORDS-1,_i.MIN_ROWS_IN_BARCODE=3,_i.MAX_ROWS_IN_BARCODE=90,_i.MODULES_IN_CODEWORD=17,_i.MODULES_IN_STOP_PATTERN=18,_i.BARS_IN_MODULE=8,_i.EMPTY_INT_ARRAY=new Int32Array([]),_i.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),_i.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Fa{constructor(g,_){this.bits=g,this.points=_}getBits(){return this.bits}getPoints(){return this.points}}class Gn{static detectMultiple(g,_,w){let T=g.getBlackMatrix(),M=Gn.detect(w,T);return M.length||(T=T.clone(),T.rotate180(),M=Gn.detect(w,T)),new Fa(T,M)}static detect(g,_){const w=new Array;let T=0,M=0,O=!1;for(;T<_.getHeight();){const V=Gn.findVertices(_,T,M);if(V[0]==null&&V[3]==null){if(!O)break;O=!1,M=0;for(const W of w)W[1]!=null&&(T=Math.trunc(Math.max(T,W[1].getY()))),W[3]!=null&&(T=Math.max(T,Math.trunc(W[3].getY())));T+=Gn.ROW_STEP;continue}if(O=!0,w.push(V),!g)break;V[2]!=null?(M=Math.trunc(V[2].getX()),T=Math.trunc(V[2].getY())):(M=Math.trunc(V[4].getX()),T=Math.trunc(V[4].getY()))}return w}static findVertices(g,_,w){const T=g.getHeight(),M=g.getWidth(),O=new Array(8);return Gn.copyToResult(O,Gn.findRowsWithPattern(g,T,M,_,w,Gn.START_PATTERN),Gn.INDEXES_START_PATTERN),O[4]!=null&&(w=Math.trunc(O[4].getX()),_=Math.trunc(O[4].getY())),Gn.copyToResult(O,Gn.findRowsWithPattern(g,T,M,_,w,Gn.STOP_PATTERN),Gn.INDEXES_STOP_PATTERN),O}static copyToResult(g,_,w){for(let T=0;T<w.length;T++)g[w[T]]=_[T]}static findRowsWithPattern(g,_,w,T,M,O){const V=new Array(4);let W=!1;const K=new Int32Array(O.length);for(;T<_;T+=Gn.ROW_STEP){let ke=Gn.findGuardPattern(g,M,T,w,!1,O,K);if(ke!=null){for(;T>0;){const Pe=Gn.findGuardPattern(g,M,--T,w,!1,O,K);if(Pe!=null)ke=Pe;else{T++;break}}V[0]=new ci(ke[0],T),V[1]=new ci(ke[1],T),W=!0;break}}let de=T+1;if(W){let ke=0,Pe=Int32Array.from([Math.trunc(V[0].getX()),Math.trunc(V[1].getX())]);for(;de<_;de++){const Ze=Gn.findGuardPattern(g,Pe[0],de,w,!1,O,K);if(Ze!=null&&Math.abs(Pe[0]-Ze[0])<Gn.MAX_PATTERN_DRIFT&&Math.abs(Pe[1]-Ze[1])<Gn.MAX_PATTERN_DRIFT)Pe=Ze,ke=0;else{if(ke>Gn.SKIPPED_ROW_COUNT_MAX)break;ke++}}de-=ke+1,V[2]=new ci(Pe[0],de),V[3]=new ci(Pe[1],de)}return de-T<Gn.BARCODE_MIN_HEIGHT&&G.fill(V,null),V}static findGuardPattern(g,_,w,T,M,O,V){G.fillWithin(V,0,V.length,0);let W=_,K=0;for(;g.get(W,w)&&W>0&&K++<Gn.MAX_PIXEL_DRIFT;)W--;let de=W,ke=0,Pe=O.length;for(let Ze=M;de<T;de++)if(g.get(de,w)!==Ze)V[ke]++;else{if(ke===Pe-1){if(Gn.patternMatchVariance(V,O,Gn.MAX_INDIVIDUAL_VARIANCE)<Gn.MAX_AVG_VARIANCE)return new Int32Array([W,de]);W+=V[0]+V[1],D.arraycopy(V,2,V,0,ke-1),V[ke-1]=0,V[ke]=0,ke--}else ke++;V[ke]=1,Ze=!Ze}return ke===Pe-1&&Gn.patternMatchVariance(V,O,Gn.MAX_INDIVIDUAL_VARIANCE)<Gn.MAX_AVG_VARIANCE?new Int32Array([W,de-1]):null}static patternMatchVariance(g,_,w){let T=g.length,M=0,O=0;for(let K=0;K<T;K++)M+=g[K],O+=_[K];if(M<O)return 1/0;let V=M/O;w*=V;let W=0;for(let K=0;K<T;K++){let de=g[K],ke=_[K]*V,Pe=de>ke?de-ke:ke-de;if(Pe>w)return 1/0;W+=Pe}return W/M}}Gn.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Gn.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Gn.MAX_AVG_VARIANCE=.42,Gn.MAX_INDIVIDUAL_VARIANCE=.8,Gn.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Gn.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Gn.MAX_PIXEL_DRIFT=3,Gn.MAX_PATTERN_DRIFT=5,Gn.SKIPPED_ROW_COUNT_MAX=25,Gn.ROW_STEP=5,Gn.BARCODE_MIN_HEIGHT=10;class pe{constructor(g,_){if(_.length===0)throw new x;this.field=g;let w=_.length;if(w>1&&_[0]===0){let T=1;for(;T<w&&_[T]===0;)T++;T===w?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(w-T),D.arraycopy(_,T,this.coefficients,0,this.coefficients.length))}else this.coefficients=_}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(g){return this.coefficients[this.coefficients.length-1-g]}evaluateAt(g){if(g===0)return this.getCoefficient(0);if(g===1){let T=0;for(let M of this.coefficients)T=this.field.add(T,M);return T}let _=this.coefficients[0],w=this.coefficients.length;for(let T=1;T<w;T++)_=this.field.add(this.field.multiply(g,_),this.coefficients[T]);return _}add(g){if(!this.field.equals(g.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero())return g;if(g.isZero())return this;let _=this.coefficients,w=g.coefficients;if(_.length>w.length){let O=_;_=w,w=O}let T=new Int32Array(w.length),M=w.length-_.length;D.arraycopy(w,0,T,0,M);for(let O=M;O<w.length;O++)T[O]=this.field.add(_[O-M],w[O]);return new pe(this.field,T)}subtract(g){if(!this.field.equals(g.field))throw new x("ModulusPolys do not have same ModulusGF field");return g.isZero()?this:this.add(g.negative())}multiply(g){return g instanceof pe?this.multiplyOther(g):this.multiplyScalar(g)}multiplyOther(g){if(!this.field.equals(g.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero()||g.isZero())return new pe(this.field,new Int32Array([0]));let _=this.coefficients,w=_.length,T=g.coefficients,M=T.length,O=new Int32Array(w+M-1);for(let V=0;V<w;V++){let W=_[V];for(let K=0;K<M;K++)O[V+K]=this.field.add(O[V+K],this.field.multiply(W,T[K]))}return new pe(this.field,O)}negative(){let g=this.coefficients.length,_=new Int32Array(g);for(let w=0;w<g;w++)_[w]=this.field.subtract(0,this.coefficients[w]);return new pe(this.field,_)}multiplyScalar(g){if(g===0)return new pe(this.field,new Int32Array([0]));if(g===1)return this;let _=this.coefficients.length,w=new Int32Array(_);for(let T=0;T<_;T++)w[T]=this.field.multiply(this.coefficients[T],g);return new pe(this.field,w)}multiplyByMonomial(g,_){if(g<0)throw new x;if(_===0)return new pe(this.field,new Int32Array([0]));let w=this.coefficients.length,T=new Int32Array(w+g);for(let M=0;M<w;M++)T[M]=this.field.multiply(this.coefficients[M],_);return new pe(this.field,T)}toString(){let g=new Re;for(let _=this.getDegree();_>=0;_--){let w=this.getCoefficient(_);w!==0&&(w<0?(g.append(" - "),w=-w):g.length()>0&&g.append(" + "),(_===0||w!==1)&&g.append(w),_!==0&&(_===1?g.append("x"):(g.append("x^"),g.append(_))))}return g.toString()}}class we{add(g,_){return(g+_)%this.modulus}subtract(g,_){return(this.modulus+g-_)%this.modulus}exp(g){return this.expTable[g]}log(g){if(g===0)throw new x;return this.logTable[g]}inverse(g){if(g===0)throw new fn;return this.expTable[this.modulus-this.logTable[g]-1]}multiply(g,_){return g===0||_===0?0:this.expTable[(this.logTable[g]+this.logTable[_])%(this.modulus-1)]}getSize(){return this.modulus}equals(g){return g===this}}class Me extends we{constructor(g,_){super(),this.modulus=g,this.expTable=new Int32Array(g),this.logTable=new Int32Array(g);let w=1;for(let T=0;T<g;T++)this.expTable[T]=w,w=w*_%g;for(let T=0;T<g-1;T++)this.logTable[this.expTable[T]]=T;this.zero=new pe(this,new Int32Array([0])),this.one=new pe(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(g,_){if(g<0)throw new x;if(_===0)return this.zero;let w=new Int32Array(g+1);return w[0]=_,new pe(this,w)}}Me.PDF417_GF=new Me(_i.NUMBER_OF_CODEWORDS,3);class Ke{constructor(){this.field=Me.PDF417_GF}decode(g,_,w){let T=new pe(this.field,g),M=new Int32Array(_),O=!1;for(let mt=_;mt>0;mt--){let vt=T.evaluateAt(this.field.exp(mt));M[_-mt]=vt,vt!==0&&(O=!0)}if(!O)return 0;let V=this.field.getOne();if(w!=null)for(const mt of w){let vt=this.field.exp(g.length-1-mt),zt=new pe(this.field,new Int32Array([this.field.subtract(0,vt),1]));V=V.multiply(zt)}let W=new pe(this.field,M),K=this.runEuclideanAlgorithm(this.field.buildMonomial(_,1),W,_),de=K[0],ke=K[1],Pe=this.findErrorLocations(de),Ze=this.findErrorMagnitudes(ke,de,Pe);for(let mt=0;mt<Pe.length;mt++){let vt=g.length-1-this.field.log(Pe[mt]);if(vt<0)throw E.getChecksumInstance();g[vt]=this.field.subtract(g[vt],Ze[mt])}return Pe.length}runEuclideanAlgorithm(g,_,w){if(g.getDegree()<_.getDegree()){let Pe=g;g=_,_=Pe}let T=g,M=_,O=this.field.getZero(),V=this.field.getOne();for(;M.getDegree()>=Math.round(w/2);){let Pe=T,Ze=O;if(T=M,O=V,T.isZero())throw E.getChecksumInstance();M=Pe;let mt=this.field.getZero(),vt=T.getCoefficient(T.getDegree()),zt=this.field.inverse(vt);for(;M.getDegree()>=T.getDegree()&&!M.isZero();){let Kt=M.getDegree()-T.getDegree(),Ri=this.field.multiply(M.getCoefficient(M.getDegree()),zt);mt=mt.add(this.field.buildMonomial(Kt,Ri)),M=M.subtract(T.multiplyByMonomial(Kt,Ri))}V=mt.multiply(O).subtract(Ze).negative()}let W=V.getCoefficient(0);if(W===0)throw E.getChecksumInstance();let K=this.field.inverse(W),de=V.multiply(K),ke=M.multiply(K);return[de,ke]}findErrorLocations(g){let _=g.getDegree(),w=new Int32Array(_),T=0;for(let M=1;M<this.field.getSize()&&T<_;M++)g.evaluateAt(M)===0&&(w[T]=this.field.inverse(M),T++);if(T!==_)throw E.getChecksumInstance();return w}findErrorMagnitudes(g,_,w){let T=_.getDegree(),M=new Int32Array(T);for(let K=1;K<=T;K++)M[T-K]=this.field.multiply(K,_.getCoefficient(K));let O=new pe(this.field,M),V=w.length,W=new Int32Array(V);for(let K=0;K<V;K++){let de=this.field.inverse(w[K]),ke=this.field.subtract(0,g.evaluateAt(de)),Pe=this.field.inverse(O.evaluateAt(de));W[K]=this.field.multiply(ke,Pe)}return W}}class Ge{constructor(g,_,w,T,M){g instanceof Ge?this.constructor_2(g):this.constructor_1(g,_,w,T,M)}constructor_1(g,_,w,T,M){const O=_==null||w==null,V=T==null||M==null;if(O&&V)throw new Le;O?(_=new ci(0,T.getY()),w=new ci(0,M.getY())):V&&(T=new ci(g.getWidth()-1,_.getY()),M=new ci(g.getWidth()-1,w.getY())),this.image=g,this.topLeft=_,this.bottomLeft=w,this.topRight=T,this.bottomRight=M,this.minX=Math.trunc(Math.min(_.getX(),w.getX())),this.maxX=Math.trunc(Math.max(T.getX(),M.getX())),this.minY=Math.trunc(Math.min(_.getY(),T.getY())),this.maxY=Math.trunc(Math.max(w.getY(),M.getY()))}constructor_2(g){this.image=g.image,this.topLeft=g.getTopLeft(),this.bottomLeft=g.getBottomLeft(),this.topRight=g.getTopRight(),this.bottomRight=g.getBottomRight(),this.minX=g.getMinX(),this.maxX=g.getMaxX(),this.minY=g.getMinY(),this.maxY=g.getMaxY()}static merge(g,_){return g==null?_:_==null?g:new Ge(g.image,g.topLeft,g.bottomLeft,_.topRight,_.bottomRight)}addMissingRows(g,_,w){let T=this.topLeft,M=this.bottomLeft,O=this.topRight,V=this.bottomRight;if(g>0){let W=w?this.topLeft:this.topRight,K=Math.trunc(W.getY()-g);K<0&&(K=0);let de=new ci(W.getX(),K);w?T=de:O=de}if(_>0){let W=w?this.bottomLeft:this.bottomRight,K=Math.trunc(W.getY()+_);K>=this.image.getHeight()&&(K=this.image.getHeight()-1);let de=new ci(W.getX(),K);w?M=de:V=de}return new Ge(this.image,T,M,O,V)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ct{constructor(g,_,w,T){this.columnCount=g,this.errorCorrectionLevel=T,this.rowCountUpperPart=_,this.rowCountLowerPart=w,this.rowCount=_+w}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ht{constructor(){this.buffer=""}static form(g,_){let w=-1;function T(O,V,W,K,de,ke){if(O==="%%")return"%";if(_[++w]===void 0)return;O=K?parseInt(K.substr(1)):void 0;let Pe=de?parseInt(de.substr(1)):void 0,Ze;switch(ke){case"s":Ze=_[w];break;case"c":Ze=_[w][0];break;case"f":Ze=parseFloat(_[w]).toFixed(O);break;case"p":Ze=parseFloat(_[w]).toPrecision(O);break;case"e":Ze=parseFloat(_[w]).toExponential(O);break;case"x":Ze=parseInt(_[w]).toString(Pe||16);break;case"d":Ze=parseFloat(parseInt(_[w],Pe||10).toPrecision(O)).toFixed(0);break}Ze=typeof Ze=="object"?JSON.stringify(Ze):(+Ze).toString(Pe);let mt=parseInt(W),vt=W&&W[0]+""=="0"?"0":" ";for(;Ze.length<mt;)Ze=V!==void 0?Ze+vt:vt+Ze;return Ze}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return g.replace(M,T)}format(g,..._){this.buffer+=Ht.form(g,_)}toString(){return this.buffer}}class Pt{constructor(g){this.boundingBox=new Ge(g),this.codewords=new Array(g.getMaxY()-g.getMinY()+1)}getCodewordNearby(g){let _=this.getCodeword(g);if(_!=null)return _;for(let w=1;w<Pt.MAX_NEARBY_DISTANCE;w++){let T=this.imageRowToCodewordIndex(g)-w;if(T>=0&&(_=this.codewords[T],_!=null)||(T=this.imageRowToCodewordIndex(g)+w,T<this.codewords.length&&(_=this.codewords[T],_!=null)))return _}return null}imageRowToCodewordIndex(g){return g-this.boundingBox.getMinY()}setCodeword(g,_){this.codewords[this.imageRowToCodewordIndex(g)]=_}getCodeword(g){return this.codewords[this.imageRowToCodewordIndex(g)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const g=new Ht;let _=0;for(const w of this.codewords){if(w==null){g.format("%3d:    |   %n",_++);continue}g.format("%3d: %3d|%3d%n",_++,w.getRowNumber(),w.getValue())}return g.toString()}}Pt.MAX_NEARBY_DISTANCE=5;class oi{constructor(){this.values=new Map}setValue(g){g=Math.trunc(g);let _=this.values.get(g);_==null&&(_=0),_++,this.values.set(g,_)}getValue(){let g=-1,_=new Array;for(const[w,T]of this.values.entries()){const M={getKey:()=>w,getValue:()=>T};M.getValue()>g?(g=M.getValue(),_=[],_.push(M.getKey())):M.getValue()===g&&_.push(M.getKey())}return _i.toIntArray(_)}getConfidence(g){return this.values.get(g)}}class Hi extends Pt{constructor(g,_){super(g),this._isLeft=_}setRowNumbers(){for(let g of this.getCodewords())g?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(g){let _=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(_,g);let w=this.getBoundingBox(),T=this._isLeft?w.getTopLeft():w.getTopRight(),M=this._isLeft?w.getBottomLeft():w.getBottomRight(),O=this.imageRowToCodewordIndex(Math.trunc(T.getY())),V=this.imageRowToCodewordIndex(Math.trunc(M.getY())),W=-1,K=1,de=0;for(let ke=O;ke<V;ke++){if(_[ke]==null)continue;let Pe=_[ke],Ze=Pe.getRowNumber()-W;if(Ze===0)de++;else if(Ze===1)K=Math.max(K,de),de=1,W=Pe.getRowNumber();else if(Ze<0||Pe.getRowNumber()>=g.getRowCount()||Ze>ke)_[ke]=null;else{let mt;K>2?mt=(K-2)*Ze:mt=Ze;let vt=mt>=ke;for(let zt=1;zt<=mt&&!vt;zt++)vt=_[ke-zt]!=null;vt?_[ke]=null:(W=Pe.getRowNumber(),de=1)}}}getRowHeights(){let g=this.getBarcodeMetadata();if(g==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(g);let _=new Int32Array(g.getRowCount());for(let w of this.getCodewords())if(w!=null){let T=w.getRowNumber();if(T>=_.length)continue;_[T]++}return _}adjustIncompleteIndicatorColumnRowNumbers(g){let _=this.getBoundingBox(),w=this._isLeft?_.getTopLeft():_.getTopRight(),T=this._isLeft?_.getBottomLeft():_.getBottomRight(),M=this.imageRowToCodewordIndex(Math.trunc(w.getY())),O=this.imageRowToCodewordIndex(Math.trunc(T.getY())),V=this.getCodewords(),W=-1;for(let K=M;K<O;K++){if(V[K]==null)continue;let de=V[K];de.setRowNumberAsRowIndicatorColumn();let ke=de.getRowNumber()-W;ke===0||(ke===1?W=de.getRowNumber():de.getRowNumber()>=g.getRowCount()?V[K]=null:W=de.getRowNumber())}}getBarcodeMetadata(){let g=this.getCodewords(),_=new oi,w=new oi,T=new oi,M=new oi;for(let V of g){if(V==null)continue;V.setRowNumberAsRowIndicatorColumn();let W=V.getValue()%30,K=V.getRowNumber();switch(this._isLeft||(K+=2),K%3){case 0:w.setValue(W*3+1);break;case 1:M.setValue(W/3),T.setValue(W%3);break;case 2:_.setValue(W+1);break}}if(_.getValue().length===0||w.getValue().length===0||T.getValue().length===0||M.getValue().length===0||_.getValue()[0]<1||w.getValue()[0]+T.getValue()[0]<_i.MIN_ROWS_IN_BARCODE||w.getValue()[0]+T.getValue()[0]>_i.MAX_ROWS_IN_BARCODE)return null;let O=new Ct(_.getValue()[0],w.getValue()[0],T.getValue()[0],M.getValue()[0]);return this.removeIncorrectCodewords(g,O),O}removeIncorrectCodewords(g,_){for(let w=0;w<g.length;w++){let T=g[w];if(g[w]==null)continue;let M=T.getValue()%30,O=T.getRowNumber();if(O>_.getRowCount()){g[w]=null;continue}switch(this._isLeft||(O+=2),O%3){case 0:M*3+1!==_.getRowCountUpperPart()&&(g[w]=null);break;case 1:(Math.trunc(M/3)!==_.getErrorCorrectionLevel()||M%3!==_.getRowCountLowerPart())&&(g[w]=null);break;case 2:M+1!==_.getColumnCount()&&(g[w]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class cn{constructor(g,_){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=g,this.barcodeColumnCount=g.getColumnCount(),this.boundingBox=_,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let g=_i.MAX_CODEWORDS_IN_BARCODE,_;do _=g,g=this.adjustRowNumbersAndGetCount();while(g>0&&g<_);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(g){g?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let g=this.adjustRowNumbersByRow();if(g===0)return 0;for(let _=1;_<this.barcodeColumnCount+1;_++){let w=this.detectionResultColumns[_].getCodewords();for(let T=0;T<w.length;T++)w[T]!=null&&(w[T].hasValidRowNumber()||this.adjustRowNumbers(_,T,w))}return g}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let g=this.detectionResultColumns[0].getCodewords(),_=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let w=0;w<g.length;w++)if(g[w]!=null&&_[w]!=null&&g[w].getRowNumber()===_[w].getRowNumber())for(let T=1;T<=this.barcodeColumnCount;T++){let M=this.detectionResultColumns[T].getCodewords()[w];M!=null&&(M.setRowNumber(g[w].getRowNumber()),M.hasValidRowNumber()||(this.detectionResultColumns[T].getCodewords()[w]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let g=0,_=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let w=0;w<_.length;w++){if(_[w]==null)continue;let T=_[w].getRowNumber(),M=0;for(let O=this.barcodeColumnCount+1;O>0&&M<this.ADJUST_ROW_NUMBER_SKIP;O--){let V=this.detectionResultColumns[O].getCodewords()[w];V!=null&&(M=cn.adjustRowNumberIfValid(T,M,V),V.hasValidRowNumber()||g++)}}return g}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let g=0,_=this.detectionResultColumns[0].getCodewords();for(let w=0;w<_.length;w++){if(_[w]==null)continue;let T=_[w].getRowNumber(),M=0;for(let O=1;O<this.barcodeColumnCount+1&&M<this.ADJUST_ROW_NUMBER_SKIP;O++){let V=this.detectionResultColumns[O].getCodewords()[w];V!=null&&(M=cn.adjustRowNumberIfValid(T,M,V),V.hasValidRowNumber()||g++)}}return g}static adjustRowNumberIfValid(g,_,w){return w==null||w.hasValidRowNumber()||(w.isValidRowNumber(g)?(w.setRowNumber(g),_=0):++_),_}adjustRowNumbers(g,_,w){if(!this.detectionResultColumns[g-1])return;let T=w[_],M=this.detectionResultColumns[g-1].getCodewords(),O=M;this.detectionResultColumns[g+1]!=null&&(O=this.detectionResultColumns[g+1].getCodewords());let V=new Array(14);V[2]=M[_],V[3]=O[_],_>0&&(V[0]=w[_-1],V[4]=M[_-1],V[5]=O[_-1]),_>1&&(V[8]=w[_-2],V[10]=M[_-2],V[11]=O[_-2]),_<w.length-1&&(V[1]=w[_+1],V[6]=M[_+1],V[7]=O[_+1]),_<w.length-2&&(V[9]=w[_+2],V[12]=M[_+2],V[13]=O[_+2]);for(let W of V)if(cn.adjustRowNumber(T,W))return}static adjustRowNumber(g,_){return _==null?!1:_.hasValidRowNumber()&&_.getBucket()===g.getBucket()?(g.setRowNumber(_.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(g){this.boundingBox=g}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(g,_){this.detectionResultColumns[g]=_}getDetectionResultColumn(g){return this.detectionResultColumns[g]}toString(){let g=this.detectionResultColumns[0];g==null&&(g=this.detectionResultColumns[this.barcodeColumnCount+1]);let _=new Ht;for(let w=0;w<g.getCodewords().length;w++){_.format("CW %3d:",w);for(let T=0;T<this.barcodeColumnCount+2;T++){if(this.detectionResultColumns[T]==null){_.format("    |   ");continue}let M=this.detectionResultColumns[T].getCodewords()[w];if(M==null){_.format("    |   ");continue}_.format(" %3d|%3d",M.getRowNumber(),M.getValue())}_.format("%n")}return _.toString()}}class Pn{constructor(g,_,w,T){this.rowNumber=Pn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(g),this.endX=Math.trunc(_),this.bucket=Math.trunc(w),this.value=Math.trunc(T)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(g){return g!==Pn.BARCODE_ROW_UNKNOWN&&this.bucket===g%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(g){this.rowNumber=g}toString(){return this.rowNumber+"|"+this.value}}Pn.BARCODE_ROW_UNKNOWN=-1;class na{static initialize(){for(let g=0;g<_i.SYMBOL_TABLE.length;g++){let _=_i.SYMBOL_TABLE[g],w=_&1;for(let T=0;T<_i.BARS_IN_MODULE;T++){let M=0;for(;(_&1)===w;)M+=1,_>>=1;w=_&1,na.RATIOS_TABLE[g]||(na.RATIOS_TABLE[g]=new Array(_i.BARS_IN_MODULE)),na.RATIOS_TABLE[g][_i.BARS_IN_MODULE-T-1]=Math.fround(M/_i.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(g){let _=na.getDecodedCodewordValue(na.sampleBitCounts(g));return _!==-1?_:na.getClosestDecodedValue(g)}static sampleBitCounts(g){let _=li.sum(g),w=new Int32Array(_i.BARS_IN_MODULE),T=0,M=0;for(let O=0;O<_i.MODULES_IN_CODEWORD;O++){let V=_/(2*_i.MODULES_IN_CODEWORD)+O*_/_i.MODULES_IN_CODEWORD;M+g[T]<=V&&(M+=g[T],T++),w[T]++}return w}static getDecodedCodewordValue(g){let _=na.getBitValue(g);return _i.getCodeword(_)===-1?-1:_}static getBitValue(g){let _=0;for(let w=0;w<g.length;w++)for(let T=0;T<g[w];T++)_=_<<1|(w%2===0?1:0);return Math.trunc(_)}static getClosestDecodedValue(g){let _=li.sum(g),w=new Array(_i.BARS_IN_MODULE);if(_>1)for(let O=0;O<w.length;O++)w[O]=Math.fround(g[O]/_);let T=Fi.MAX_VALUE,M=-1;this.bSymbolTableReady||na.initialize();for(let O=0;O<na.RATIOS_TABLE.length;O++){let V=0,W=na.RATIOS_TABLE[O];for(let K=0;K<_i.BARS_IN_MODULE;K++){let de=Math.fround(W[K]-w[K]);if(V+=Math.fround(de*de),V>=T)break}V<T&&(T=V,M=_i.SYMBOL_TABLE[O])}return M}}na.bSymbolTableReady=!1,na.RATIOS_TABLE=new Array(_i.SYMBOL_TABLE.length).map(Se=>new Array(_i.BARS_IN_MODULE));class fa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(g){this.segmentIndex=g}getFileId(){return this.fileId}setFileId(g){this.fileId=g}getOptionalData(){return this.optionalData}setOptionalData(g){this.optionalData=g}isLastSegment(){return this.lastSegment}setLastSegment(g){this.lastSegment=g}getSegmentCount(){return this.segmentCount}setSegmentCount(g){this.segmentCount=g}getSender(){return this.sender||null}setSender(g){this.sender=g}getAddressee(){return this.addressee||null}setAddressee(g){this.addressee=g}getFileName(){return this.fileName}setFileName(g){this.fileName=g}getFileSize(){return this.fileSize}setFileSize(g){this.fileSize=g}getChecksum(){return this.checksum}setChecksum(g){this.checksum=g}getTimestamp(){return this.timestamp}setTimestamp(g){this.timestamp=g}}class aa{static parseLong(g,_=void 0){return parseInt(g,_)}}class zn extends f{}zn.kind="NullPointerException";class Va{writeBytes(g){this.writeBytesOffset(g,0,g.length)}writeBytesOffset(g,_,w){if(g==null)throw new zn;if(_<0||_>g.length||w<0||_+w>g.length||_+w<0)throw new F;if(w===0)return;for(let T=0;T<w;T++)this.write(g[_+T])}flush(){}close(){}}class Hn extends f{}class an extends Va{constructor(g=32){if(super(),this.count=0,g<0)throw new x("Negative initial size: "+g);this.buf=new Uint8Array(g)}ensureCapacity(g){g-this.buf.length>0&&this.grow(g)}grow(g){let w=this.buf.length<<1;if(w-g<0&&(w=g),w<0){if(g<0)throw new Hn;w=Z.MAX_VALUE}this.buf=G.copyOfUint8Array(this.buf,w)}write(g){this.ensureCapacity(this.count+1),this.buf[this.count]=g,this.count+=1}writeBytesOffset(g,_,w){if(_<0||_>g.length||w<0||_+w-g.length>0)throw new F;this.ensureCapacity(this.count+w),D.arraycopy(g,_,this.buf,this.count,w),this.count+=w}writeTo(g){g.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return G.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(g){return g?typeof g=="string"?this.toString_string(g):this.toString_number(g):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(g){return new String(this.buf).toString()}toString_number(g){return new String(this.buf).toString()}close(){}}var oa;(function(Se){Se[Se.ALPHA=0]="ALPHA",Se[Se.LOWER=1]="LOWER",Se[Se.MIXED=2]="MIXED",Se[Se.PUNCT=3]="PUNCT",Se[Se.ALPHA_SHIFT=4]="ALPHA_SHIFT",Se[Se.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(oa||(oa={}));function ia(){if(typeof window<"u")return window.BigInt||null;if(typeof mr<"u")return mr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let br;function va(Se){if(typeof br>"u"&&(br=ia()),br===null)throw new Error("BigInt is not supported!");return br(Se)}function Ha(){let Se=[];Se[0]=va(1);let g=va(900);Se[1]=g;for(let _=2;_<16;_++)Se[_]=Se[_-1]*g;return Se}class Wt{static decode(g,_){let w=new Re(""),T=ae.ISO8859_1;w.enableDecoding(T);let M=1,O=g[M++],V=new fa;for(;M<g[0];){switch(O){case Wt.TEXT_COMPACTION_MODE_LATCH:M=Wt.textCompaction(g,M,w);break;case Wt.BYTE_COMPACTION_MODE_LATCH:case Wt.BYTE_COMPACTION_MODE_LATCH_6:M=Wt.byteCompaction(O,g,T,M,w);break;case Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:w.append(g[M++]);break;case Wt.NUMERIC_COMPACTION_MODE_LATCH:M=Wt.numericCompaction(g,M,w);break;case Wt.ECI_CHARSET:ae.getCharacterSetECIByValue(g[M++]);break;case Wt.ECI_GENERAL_PURPOSE:M+=2;break;case Wt.ECI_USER_DEFINED:M++;break;case Wt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:M=Wt.decodeMacroBlock(g,M,V);break;case Wt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Wt.MACRO_PDF417_TERMINATOR:throw new J;default:M--,M=Wt.textCompaction(g,M,w);break}if(M<g.length)O=g[M++];else throw J.getFormatInstance()}if(w.length()===0)throw J.getFormatInstance();let W=new Zi(null,w.toString(),null,_);return W.setOther(V),W}static decodeMacroBlock(g,_,w){if(_+Wt.NUMBER_OF_SEQUENCE_CODEWORDS>g[0])throw J.getFormatInstance();let T=new Int32Array(Wt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let V=0;V<Wt.NUMBER_OF_SEQUENCE_CODEWORDS;V++,_++)T[V]=g[_];w.setSegmentIndex(Z.parseInt(Wt.decodeBase900toBase10(T,Wt.NUMBER_OF_SEQUENCE_CODEWORDS)));let M=new Re;_=Wt.textCompaction(g,_,M),w.setFileId(M.toString());let O=-1;for(g[_]===Wt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(O=_+1);_<g[0];)switch(g[_]){case Wt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(_++,g[_]){case Wt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let V=new Re;_=Wt.textCompaction(g,_+1,V),w.setFileName(V.toString());break;case Wt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let W=new Re;_=Wt.textCompaction(g,_+1,W),w.setSender(W.toString());break;case Wt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let K=new Re;_=Wt.textCompaction(g,_+1,K),w.setAddressee(K.toString());break;case Wt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let de=new Re;_=Wt.numericCompaction(g,_+1,de),w.setSegmentCount(Z.parseInt(de.toString()));break;case Wt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ke=new Re;_=Wt.numericCompaction(g,_+1,ke),w.setTimestamp(aa.parseLong(ke.toString()));break;case Wt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Pe=new Re;_=Wt.numericCompaction(g,_+1,Pe),w.setChecksum(Z.parseInt(Pe.toString()));break;case Wt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Ze=new Re;_=Wt.numericCompaction(g,_+1,Ze),w.setFileSize(aa.parseLong(Ze.toString()));break;default:throw J.getFormatInstance()}break;case Wt.MACRO_PDF417_TERMINATOR:_++,w.setLastSegment(!0);break;default:throw J.getFormatInstance()}if(O!==-1){let V=_-O;w.isLastSegment()&&V--,w.setOptionalData(G.copyOfRange(g,O,O+V))}return _}static textCompaction(g,_,w){let T=new Int32Array((g[0]-_)*2),M=new Int32Array((g[0]-_)*2),O=0,V=!1;for(;_<g[0]&&!V;){let W=g[_++];if(W<Wt.TEXT_COMPACTION_MODE_LATCH)T[O]=W/30,T[O+1]=W%30,O+=2;else switch(W){case Wt.TEXT_COMPACTION_MODE_LATCH:T[O++]=Wt.TEXT_COMPACTION_MODE_LATCH;break;case Wt.BYTE_COMPACTION_MODE_LATCH:case Wt.BYTE_COMPACTION_MODE_LATCH_6:case Wt.NUMERIC_COMPACTION_MODE_LATCH:case Wt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Wt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Wt.MACRO_PDF417_TERMINATOR:_--,V=!0;break;case Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T[O]=Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,W=g[_++],M[O]=W,O++;break}}return Wt.decodeTextCompaction(T,M,O,w),_}static decodeTextCompaction(g,_,w,T){let M=oa.ALPHA,O=oa.ALPHA,V=0;for(;V<w;){let W=g[V],K="";switch(M){case oa.ALPHA:if(W<26)K=String.fromCharCode(65+W);else switch(W){case 26:K=" ";break;case Wt.LL:M=oa.LOWER;break;case Wt.ML:M=oa.MIXED;break;case Wt.PS:O=M,M=oa.PUNCT_SHIFT;break;case Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case Wt.TEXT_COMPACTION_MODE_LATCH:M=oa.ALPHA;break}break;case oa.LOWER:if(W<26)K=String.fromCharCode(97+W);else switch(W){case 26:K=" ";break;case Wt.AS:O=M,M=oa.ALPHA_SHIFT;break;case Wt.ML:M=oa.MIXED;break;case Wt.PS:O=M,M=oa.PUNCT_SHIFT;break;case Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case Wt.TEXT_COMPACTION_MODE_LATCH:M=oa.ALPHA;break}break;case oa.MIXED:if(W<Wt.PL)K=Wt.MIXED_CHARS[W];else switch(W){case Wt.PL:M=oa.PUNCT;break;case 26:K=" ";break;case Wt.LL:M=oa.LOWER;break;case Wt.AL:M=oa.ALPHA;break;case Wt.PS:O=M,M=oa.PUNCT_SHIFT;break;case Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case Wt.TEXT_COMPACTION_MODE_LATCH:M=oa.ALPHA;break}break;case oa.PUNCT:if(W<Wt.PAL)K=Wt.PUNCT_CHARS[W];else switch(W){case Wt.PAL:M=oa.ALPHA;break;case Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case Wt.TEXT_COMPACTION_MODE_LATCH:M=oa.ALPHA;break}break;case oa.ALPHA_SHIFT:if(M=O,W<26)K=String.fromCharCode(65+W);else switch(W){case 26:K=" ";break;case Wt.TEXT_COMPACTION_MODE_LATCH:M=oa.ALPHA;break}break;case oa.PUNCT_SHIFT:if(M=O,W<Wt.PAL)K=Wt.PUNCT_CHARS[W];else switch(W){case Wt.PAL:M=oa.ALPHA;break;case Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:T.append(_[V]);break;case Wt.TEXT_COMPACTION_MODE_LATCH:M=oa.ALPHA;break}break}K!==""&&T.append(K),V++}}static byteCompaction(g,_,w,T,M){let O=new an,V=0,W=0,K=!1;switch(g){case Wt.BYTE_COMPACTION_MODE_LATCH:let de=new Int32Array(6),ke=_[T++];for(;T<_[0]&&!K;)switch(de[V++]=ke,W=900*W+ke,ke=_[T++],ke){case Wt.TEXT_COMPACTION_MODE_LATCH:case Wt.BYTE_COMPACTION_MODE_LATCH:case Wt.NUMERIC_COMPACTION_MODE_LATCH:case Wt.BYTE_COMPACTION_MODE_LATCH_6:case Wt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Wt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Wt.MACRO_PDF417_TERMINATOR:T--,K=!0;break;default:if(V%5===0&&V>0){for(let Pe=0;Pe<6;++Pe)O.write(Number(va(W)>>va(8*(5-Pe))));W=0,V=0}break}T===_[0]&&ke<Wt.TEXT_COMPACTION_MODE_LATCH&&(de[V++]=ke);for(let Pe=0;Pe<V;Pe++)O.write(de[Pe]);break;case Wt.BYTE_COMPACTION_MODE_LATCH_6:for(;T<_[0]&&!K;){let Pe=_[T++];if(Pe<Wt.TEXT_COMPACTION_MODE_LATCH)V++,W=900*W+Pe;else switch(Pe){case Wt.TEXT_COMPACTION_MODE_LATCH:case Wt.BYTE_COMPACTION_MODE_LATCH:case Wt.NUMERIC_COMPACTION_MODE_LATCH:case Wt.BYTE_COMPACTION_MODE_LATCH_6:case Wt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Wt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Wt.MACRO_PDF417_TERMINATOR:T--,K=!0;break}if(V%5===0&&V>0){for(let Ze=0;Ze<6;++Ze)O.write(Number(va(W)>>va(8*(5-Ze))));W=0,V=0}}break}return M.append(Te.decode(O.toByteArray(),w)),T}static numericCompaction(g,_,w){let T=0,M=!1,O=new Int32Array(Wt.MAX_NUMERIC_CODEWORDS);for(;_<g[0]&&!M;){let V=g[_++];if(_===g[0]&&(M=!0),V<Wt.TEXT_COMPACTION_MODE_LATCH)O[T]=V,T++;else switch(V){case Wt.TEXT_COMPACTION_MODE_LATCH:case Wt.BYTE_COMPACTION_MODE_LATCH:case Wt.BYTE_COMPACTION_MODE_LATCH_6:case Wt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Wt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Wt.MACRO_PDF417_TERMINATOR:_--,M=!0;break}(T%Wt.MAX_NUMERIC_CODEWORDS===0||V===Wt.NUMERIC_COMPACTION_MODE_LATCH||M)&&T>0&&(w.append(Wt.decodeBase900toBase10(O,T)),T=0)}return _}static decodeBase900toBase10(g,_){let w=va(0);for(let M=0;M<_;M++)w+=Wt.EXP900[_-M-1]*va(g[M]);let T=w.toString();if(T.charAt(0)!=="1")throw new J;return T.substring(1)}}Wt.TEXT_COMPACTION_MODE_LATCH=900,Wt.BYTE_COMPACTION_MODE_LATCH=901,Wt.NUMERIC_COMPACTION_MODE_LATCH=902,Wt.BYTE_COMPACTION_MODE_LATCH_6=924,Wt.ECI_USER_DEFINED=925,Wt.ECI_GENERAL_PURPOSE=926,Wt.ECI_CHARSET=927,Wt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Wt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Wt.MACRO_PDF417_TERMINATOR=922,Wt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Wt.MAX_NUMERIC_CODEWORDS=15,Wt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Wt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Wt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Wt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Wt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Wt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Wt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Wt.PL=25,Wt.LL=27,Wt.AS=27,Wt.ML=28,Wt.AL=28,Wt.PS=29,Wt.PAL=29,Wt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Wt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Wt.EXP900=ia()?Ha():[],Wt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class En{constructor(){}static decode(g,_,w,T,M,O,V){let W=new Ge(g,_,w,T,M),K=null,de=null,ke;for(let mt=!0;;mt=!1){if(_!=null&&(K=En.getRowIndicatorColumn(g,W,_,!0,O,V)),T!=null&&(de=En.getRowIndicatorColumn(g,W,T,!1,O,V)),ke=En.merge(K,de),ke==null)throw Le.getNotFoundInstance();let vt=ke.getBoundingBox();if(mt&&vt!=null&&(vt.getMinY()<W.getMinY()||vt.getMaxY()>W.getMaxY()))W=vt;else break}ke.setBoundingBox(W);let Pe=ke.getBarcodeColumnCount()+1;ke.setDetectionResultColumn(0,K),ke.setDetectionResultColumn(Pe,de);let Ze=K!=null;for(let mt=1;mt<=Pe;mt++){let vt=Ze?mt:Pe-mt;if(ke.getDetectionResultColumn(vt)!==void 0)continue;let zt;vt===0||vt===Pe?zt=new Hi(W,vt===0):zt=new Pt(W),ke.setDetectionResultColumn(vt,zt);let Kt=-1,Ri=Kt;for(let zi=W.getMinY();zi<=W.getMaxY();zi++){if(Kt=En.getStartColumn(ke,vt,zi,Ze),Kt<0||Kt>W.getMaxX()){if(Ri===-1)continue;Kt=Ri}let Ci=En.detectCodeword(g,W.getMinX(),W.getMaxX(),Ze,Kt,zi,O,V);Ci!=null&&(zt.setCodeword(zi,Ci),Ri=Kt,O=Math.min(O,Ci.getWidth()),V=Math.max(V,Ci.getWidth()))}}return En.createDecoderResult(ke)}static merge(g,_){if(g==null&&_==null)return null;let w=En.getBarcodeMetadata(g,_);if(w==null)return null;let T=Ge.merge(En.adjustBoundingBox(g),En.adjustBoundingBox(_));return new cn(w,T)}static adjustBoundingBox(g){if(g==null)return null;let _=g.getRowHeights();if(_==null)return null;let w=En.getMax(_),T=0;for(let V of _)if(T+=w-V,V>0)break;let M=g.getCodewords();for(let V=0;T>0&&M[V]==null;V++)T--;let O=0;for(let V=_.length-1;V>=0&&(O+=w-_[V],!(_[V]>0));V--);for(let V=M.length-1;O>0&&M[V]==null;V--)O--;return g.getBoundingBox().addMissingRows(T,O,g.isLeft())}static getMax(g){let _=-1;for(let w of g)_=Math.max(_,w);return _}static getBarcodeMetadata(g,_){let w;if(g==null||(w=g.getBarcodeMetadata())==null)return _==null?null:_.getBarcodeMetadata();let T;return _==null||(T=_.getBarcodeMetadata())==null?w:w.getColumnCount()!==T.getColumnCount()&&w.getErrorCorrectionLevel()!==T.getErrorCorrectionLevel()&&w.getRowCount()!==T.getRowCount()?null:w}static getRowIndicatorColumn(g,_,w,T,M,O){let V=new Hi(_,T);for(let W=0;W<2;W++){let K=W===0?1:-1,de=Math.trunc(Math.trunc(w.getX()));for(let ke=Math.trunc(Math.trunc(w.getY()));ke<=_.getMaxY()&&ke>=_.getMinY();ke+=K){let Pe=En.detectCodeword(g,0,g.getWidth(),T,de,ke,M,O);Pe!=null&&(V.setCodeword(ke,Pe),T?de=Pe.getStartX():de=Pe.getEndX())}}return V}static adjustCodewordCount(g,_){let w=_[0][1],T=w.getValue(),M=g.getBarcodeColumnCount()*g.getBarcodeRowCount()-En.getNumberOfECCodeWords(g.getBarcodeECLevel());if(T.length===0){if(M<1||M>_i.MAX_CODEWORDS_IN_BARCODE)throw Le.getNotFoundInstance();w.setValue(M)}else T[0]!==M&&w.setValue(M)}static createDecoderResult(g){let _=En.createBarcodeMatrix(g);En.adjustCodewordCount(g,_);let w=new Array,T=new Int32Array(g.getBarcodeRowCount()*g.getBarcodeColumnCount()),M=[],O=new Array;for(let W=0;W<g.getBarcodeRowCount();W++)for(let K=0;K<g.getBarcodeColumnCount();K++){let de=_[W][K+1].getValue(),ke=W*g.getBarcodeColumnCount()+K;de.length===0?w.push(ke):de.length===1?T[ke]=de[0]:(O.push(ke),M.push(de))}let V=new Array(M.length);for(let W=0;W<V.length;W++)V[W]=M[W];return En.createDecoderResultFromAmbiguousValues(g.getBarcodeECLevel(),T,_i.toIntArray(w),_i.toIntArray(O),V)}static createDecoderResultFromAmbiguousValues(g,_,w,T,M){let O=new Int32Array(T.length),V=100;for(;V-- >0;){for(let W=0;W<O.length;W++)_[T[W]]=M[W][O[W]];try{return En.decodeCodewords(_,g,w)}catch(W){if(!(W instanceof E))throw W}if(O.length===0)throw E.getChecksumInstance();for(let W=0;W<O.length;W++)if(O[W]<M[W].length-1){O[W]++;break}else if(O[W]=0,W===O.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(g){let _=Array.from({length:g.getBarcodeRowCount()},()=>new Array(g.getBarcodeColumnCount()+2));for(let T=0;T<_.length;T++)for(let M=0;M<_[T].length;M++)_[T][M]=new oi;let w=0;for(let T of g.getDetectionResultColumns()){if(T!=null){for(let M of T.getCodewords())if(M!=null){let O=M.getRowNumber();if(O>=0){if(O>=_.length)continue;_[O][w].setValue(M.getValue())}}}w++}return _}static isValidBarcodeColumn(g,_){return _>=0&&_<=g.getBarcodeColumnCount()+1}static getStartColumn(g,_,w,T){let M=T?1:-1,O=null;if(En.isValidBarcodeColumn(g,_-M)&&(O=g.getDetectionResultColumn(_-M).getCodeword(w)),O!=null)return T?O.getEndX():O.getStartX();if(O=g.getDetectionResultColumn(_).getCodewordNearby(w),O!=null)return T?O.getStartX():O.getEndX();if(En.isValidBarcodeColumn(g,_-M)&&(O=g.getDetectionResultColumn(_-M).getCodewordNearby(w)),O!=null)return T?O.getEndX():O.getStartX();let V=0;for(;En.isValidBarcodeColumn(g,_-M);){_-=M;for(let W of g.getDetectionResultColumn(_).getCodewords())if(W!=null)return(T?W.getEndX():W.getStartX())+M*V*(W.getEndX()-W.getStartX());V++}return T?g.getBoundingBox().getMinX():g.getBoundingBox().getMaxX()}static detectCodeword(g,_,w,T,M,O,V,W){M=En.adjustCodewordStartColumn(g,_,w,T,M,O);let K=En.getModuleBitCount(g,_,w,T,M,O);if(K==null)return null;let de,ke=li.sum(K);if(T)de=M+ke;else{for(let mt=0;mt<K.length/2;mt++){let vt=K[mt];K[mt]=K[K.length-1-mt],K[K.length-1-mt]=vt}de=M,M=de-ke}if(!En.checkCodewordSkew(ke,V,W))return null;let Pe=na.getDecodedValue(K),Ze=_i.getCodeword(Pe);return Ze===-1?null:new Pn(M,de,En.getCodewordBucketNumber(Pe),Ze)}static getModuleBitCount(g,_,w,T,M,O){let V=M,W=new Int32Array(8),K=0,de=T?1:-1,ke=T;for(;(T?V<w:V>=_)&&K<W.length;)g.get(V,O)===ke?(W[K]++,V+=de):(K++,ke=!ke);return K===W.length||V===(T?w:_)&&K===W.length-1?W:null}static getNumberOfECCodeWords(g){return 2<<g}static adjustCodewordStartColumn(g,_,w,T,M,O){let V=M,W=T?-1:1;for(let K=0;K<2;K++){for(;(T?V>=_:V<w)&&T===g.get(V,O);){if(Math.abs(M-V)>En.CODEWORD_SKEW_SIZE)return M;V+=W}W=-W,T=!T}return V}static checkCodewordSkew(g,_,w){return _-En.CODEWORD_SKEW_SIZE<=g&&g<=w+En.CODEWORD_SKEW_SIZE}static decodeCodewords(g,_,w){if(g.length===0)throw J.getFormatInstance();let T=1<<_+1,M=En.correctErrors(g,w,T);En.verifyCodewordCount(g,T);let O=Wt.decode(g,""+_);return O.setErrorsCorrected(M),O.setErasures(w.length),O}static correctErrors(g,_,w){if(_!=null&&_.length>w/2+En.MAX_ERRORS||w<0||w>En.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return En.errorCorrection.decode(g,w,_)}static verifyCodewordCount(g,_){if(g.length<4)throw J.getFormatInstance();let w=g[0];if(w>g.length)throw J.getFormatInstance();if(w===0)if(_<g.length)g[0]=g.length-_;else throw J.getFormatInstance()}static getBitCountForCodeword(g){let _=new Int32Array(8),w=0,T=_.length-1;for(;!((g&1)!==w&&(w=g&1,T--,T<0));)_[T]++,g>>=1;return _}static getCodewordBucketNumber(g){return g instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(g):this.getCodewordBucketNumber_number(g)}static getCodewordBucketNumber_number(g){return En.getCodewordBucketNumber(En.getBitCountForCodeword(g))}static getCodewordBucketNumber_Int32Array(g){return(g[0]-g[2]+g[4]-g[6]+9)%9}static toString(g){let _=new Ht;for(let w=0;w<g.length;w++){_.format("Row %2d: ",w);for(let T=0;T<g[w].length;T++){let M=g[w][T];M.getValue().length===0?_.format("        ",null):_.format("%4d(%2d)",M.getValue()[0],M.getConfidence(M.getValue()[0]))}_.format("%n")}return _.toString()}}En.CODEWORD_SKEW_SIZE=2,En.MAX_ERRORS=3,En.MAX_EC_CODEWORDS=512,En.errorCorrection=new Ke;class Jn{decode(g,_=null){let w=Jn.decode(g,_,!1);if(w==null||w.length===0||w[0]==null)throw Le.getNotFoundInstance();return w[0]}decodeMultiple(g,_=null){try{return Jn.decode(g,_,!0)}catch(w){throw w instanceof J||w instanceof E?Le.getNotFoundInstance():w}}static decode(g,_,w){const T=new Array,M=Gn.detectMultiple(g,_,w);for(const O of M.getPoints()){const V=En.decode(M.getBits(),O[4],O[5],O[6],O[7],Jn.getMinCodewordWidth(O),Jn.getMaxCodewordWidth(O)),W=new Lt(V.getText(),V.getRawBytes(),void 0,O,wt.PDF_417);W.putMetadata(bi.ERROR_CORRECTION_LEVEL,V.getECLevel());const K=V.getOther();K!=null&&W.putMetadata(bi.PDF417_EXTRA_METADATA,K),T.push(W)}return T.map(O=>O)}static getMaxWidth(g,_){return g==null||_==null?0:Math.trunc(Math.abs(g.getX()-_.getX()))}static getMinWidth(g,_){return g==null||_==null?Z.MAX_VALUE:Math.trunc(Math.abs(g.getX()-_.getX()))}static getMaxCodewordWidth(g){return Math.floor(Math.max(Math.max(Jn.getMaxWidth(g[0],g[4]),Jn.getMaxWidth(g[6],g[2])*_i.MODULES_IN_CODEWORD/_i.MODULES_IN_STOP_PATTERN),Math.max(Jn.getMaxWidth(g[1],g[5]),Jn.getMaxWidth(g[7],g[3])*_i.MODULES_IN_CODEWORD/_i.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(g){return Math.floor(Math.min(Math.min(Jn.getMinWidth(g[0],g[4]),Jn.getMinWidth(g[6],g[2])*_i.MODULES_IN_CODEWORD/_i.MODULES_IN_STOP_PATTERN),Math.min(Jn.getMinWidth(g[1],g[5]),Jn.getMinWidth(g[7],g[3])*_i.MODULES_IN_CODEWORD/_i.MODULES_IN_STOP_PATTERN)))}reset(){}}class Aa extends f{}Aa.kind="ReaderException";class lo{constructor(g,_){this.verbose=g===!0,_&&this.setHints(_)}decode(g,_){return _&&this.setHints(_),this.decodeInternal(g)}decodeWithState(g){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(g)}setHints(g){this.hints=g;const _=!i(g)&&g.get(le.TRY_HARDER)===!0,w=i(g)?null:g.get(le.POSSIBLE_FORMATS),T=new Array;if(!i(w)){const M=w.some(O=>O===wt.UPC_A||O===wt.UPC_E||O===wt.EAN_13||O===wt.EAN_8||O===wt.CODABAR||O===wt.CODE_39||O===wt.CODE_93||O===wt.CODE_128||O===wt.ITF||O===wt.RSS_14||O===wt.RSS_EXPANDED);M&&!_&&T.push(new Za(g,this.verbose)),w.includes(wt.QR_CODE)&&T.push(new ea),w.includes(wt.DATA_MATRIX)&&T.push(new Ga),w.includes(wt.AZTEC)&&T.push(new rt),w.includes(wt.PDF_417)&&T.push(new Jn),M&&_&&T.push(new Za(g,this.verbose))}T.length===0&&(_||T.push(new Za(g,this.verbose)),T.push(new ea),T.push(new Ga),T.push(new rt),T.push(new Jn),_&&T.push(new Za(g,this.verbose))),this.readers=T}reset(){if(this.readers!==null)for(const g of this.readers)g.reset()}decodeInternal(g){if(this.readers===null)throw new Aa("No readers where selected, nothing can be read.");for(const _ of this.readers)try{return _.decode(g,this.hints)}catch(w){if(w instanceof Aa)continue}throw new Le("No MultiFormat Readers were able to detect the code.")}}class Fo extends xi{constructor(g=null,_=500){const w=new lo;w.setHints(g),super(w,_)}decodeBitmap(g){return this.reader.decodeWithState(g)}}class ir extends xi{constructor(g=500){super(new Jn,g)}}class Cs extends xi{constructor(g=500){super(new ea,g)}}var ba;(function(Se){Se[Se.ERROR_CORRECTION=0]="ERROR_CORRECTION",Se[Se.CHARACTER_SET=1]="CHARACTER_SET",Se[Se.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Se[Se.MIN_SIZE=3]="MIN_SIZE",Se[Se.MAX_SIZE=4]="MAX_SIZE",Se[Se.MARGIN=5]="MARGIN",Se[Se.PDF417_COMPACT=6]="PDF417_COMPACT",Se[Se.PDF417_COMPACTION=7]="PDF417_COMPACTION",Se[Se.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Se[Se.AZTEC_LAYERS=9]="AZTEC_LAYERS",Se[Se.QR_VERSION=10]="QR_VERSION"})(ba||(ba={}));var Ka=ba;class ko{constructor(g){this.field=g,this.cachedGenerators=[],this.cachedGenerators.push(new si(g,Int32Array.from([1])))}buildGenerator(g){const _=this.cachedGenerators;if(g>=_.length){let w=_[_.length-1];const T=this.field;for(let M=_.length;M<=g;M++){const O=w.multiply(new si(T,Int32Array.from([1,T.exp(M-1+T.getGeneratorBase())])));_.push(O),w=O}}return _[g]}encode(g,_){if(_===0)throw new x("No error correction bytes");const w=g.length-_;if(w<=0)throw new x("No data bytes provided");const T=this.buildGenerator(_),M=new Int32Array(w);D.arraycopy(g,0,M,0,w);let O=new si(this.field,M);O=O.multiplyByMonomial(_,1);const W=O.divide(T)[1].getCoefficients(),K=_-W.length;for(let de=0;de<K;de++)g[w+de]=0;D.arraycopy(W,0,g,w+K,W.length)}}class Wa{constructor(){}static applyMaskPenaltyRule1(g){return Wa.applyMaskPenaltyRule1Internal(g,!0)+Wa.applyMaskPenaltyRule1Internal(g,!1)}static applyMaskPenaltyRule2(g){let _=0;const w=g.getArray(),T=g.getWidth(),M=g.getHeight();for(let O=0;O<M-1;O++){const V=w[O];for(let W=0;W<T-1;W++){const K=V[W];K===V[W+1]&&K===w[O+1][W]&&K===w[O+1][W+1]&&_++}}return Wa.N2*_}static applyMaskPenaltyRule3(g){let _=0;const w=g.getArray(),T=g.getWidth(),M=g.getHeight();for(let O=0;O<M;O++)for(let V=0;V<T;V++){const W=w[O];V+6<T&&W[V]===1&&W[V+1]===0&&W[V+2]===1&&W[V+3]===1&&W[V+4]===1&&W[V+5]===0&&W[V+6]===1&&(Wa.isWhiteHorizontal(W,V-4,V)||Wa.isWhiteHorizontal(W,V+7,V+11))&&_++,O+6<M&&w[O][V]===1&&w[O+1][V]===0&&w[O+2][V]===1&&w[O+3][V]===1&&w[O+4][V]===1&&w[O+5][V]===0&&w[O+6][V]===1&&(Wa.isWhiteVertical(w,V,O-4,O)||Wa.isWhiteVertical(w,V,O+7,O+11))&&_++}return _*Wa.N3}static isWhiteHorizontal(g,_,w){_=Math.max(_,0),w=Math.min(w,g.length);for(let T=_;T<w;T++)if(g[T]===1)return!1;return!0}static isWhiteVertical(g,_,w,T){w=Math.max(w,0),T=Math.min(T,g.length);for(let M=w;M<T;M++)if(g[M][_]===1)return!1;return!0}static applyMaskPenaltyRule4(g){let _=0;const w=g.getArray(),T=g.getWidth(),M=g.getHeight();for(let W=0;W<M;W++){const K=w[W];for(let de=0;de<T;de++)K[de]===1&&_++}const O=g.getHeight()*g.getWidth();return Math.floor(Math.abs(_*2-O)*10/O)*Wa.N4}static getDataMaskBit(g,_,w){let T,M;switch(g){case 0:T=w+_&1;break;case 1:T=w&1;break;case 2:T=_%3;break;case 3:T=(w+_)%3;break;case 4:T=Math.floor(w/2)+Math.floor(_/3)&1;break;case 5:M=w*_,T=(M&1)+M%3;break;case 6:M=w*_,T=(M&1)+M%3&1;break;case 7:M=w*_,T=M%3+(w+_&1)&1;break;default:throw new x("Invalid mask pattern: "+g)}return T===0}static applyMaskPenaltyRule1Internal(g,_){let w=0;const T=_?g.getHeight():g.getWidth(),M=_?g.getWidth():g.getHeight(),O=g.getArray();for(let V=0;V<T;V++){let W=0,K=-1;for(let de=0;de<M;de++){const ke=_?O[V][de]:O[de][V];ke===K?W++:(W>=5&&(w+=Wa.N1+(W-5)),W=1,K=ke)}W>=5&&(w+=Wa.N1+(W-5))}return w}}Wa.N1=3,Wa.N2=3,Wa.N3=40,Wa.N4=10;class nr{constructor(g,_){this.width=g,this.height=_;const w=new Array(_);for(let T=0;T!==_;T++)w[T]=new Uint8Array(g);this.bytes=w}getHeight(){return this.height}getWidth(){return this.width}get(g,_){return this.bytes[_][g]}getArray(){return this.bytes}setNumber(g,_,w){this.bytes[_][g]=w}setBoolean(g,_,w){this.bytes[_][g]=w?1:0}clear(g){for(const _ of this.bytes)G.fill(_,g)}equals(g){if(!(g instanceof nr))return!1;const _=g;if(this.width!==_.width||this.height!==_.height)return!1;for(let w=0,T=this.height;w<T;++w){const M=this.bytes[w],O=_.bytes[w];for(let V=0,W=this.width;V<W;++V)if(M[V]!==O[V])return!1}return!0}toString(){const g=new Re;for(let _=0,w=this.height;_<w;++_){const T=this.bytes[_];for(let M=0,O=this.width;M<O;++M)switch(T[M]){case 0:g.append(" 0");break;case 1:g.append(" 1");break;default:g.append("  ");break}g.append(`
`)}return g.toString()}}class co{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const g=new Re;return g.append(`<<
`),g.append(" mode: "),g.append(this.mode?this.mode.toString():"null"),g.append(`
 ecLevel: `),g.append(this.ecLevel?this.ecLevel.toString():"null"),g.append(`
 version: `),g.append(this.version?this.version.toString():"null"),g.append(`
 maskPattern: `),g.append(this.maskPattern.toString()),this.matrix?(g.append(`
 matrix:
`),g.append(this.matrix.toString())):g.append(`
 matrix: null
`),g.append(`>>
`),g.toString()}setMode(g){this.mode=g}setECLevel(g){this.ecLevel=g}setVersion(g){this.version=g}setMaskPattern(g){this.maskPattern=g}setMatrix(g){this.matrix=g}static isValidMaskPattern(g){return g>=0&&g<co.NUM_MASK_PATTERNS}}co.NUM_MASK_PATTERNS=8;class Ta extends f{}Ta.kind="WriterException";class jn{constructor(){}static clearMatrix(g){g.clear(255)}static buildMatrix(g,_,w,T,M){jn.clearMatrix(M),jn.embedBasicPatterns(w,M),jn.embedTypeInfo(_,T,M),jn.maybeEmbedVersionInfo(w,M),jn.embedDataBits(g,T,M)}static embedBasicPatterns(g,_){jn.embedPositionDetectionPatternsAndSeparators(_),jn.embedDarkDotAtLeftBottomCorner(_),jn.maybeEmbedPositionAdjustmentPatterns(g,_),jn.embedTimingPatterns(_)}static embedTypeInfo(g,_,w){const T=new ee;jn.makeTypeInfoBits(g,_,T);for(let M=0,O=T.getSize();M<O;++M){const V=T.get(T.getSize()-1-M),W=jn.TYPE_INFO_COORDINATES[M],K=W[0],de=W[1];if(w.setBoolean(K,de,V),M<8){const ke=w.getWidth()-M-1;w.setBoolean(ke,8,V)}else{const Pe=w.getHeight()-7+(M-8);w.setBoolean(8,Pe,V)}}}static maybeEmbedVersionInfo(g,_){if(g.getVersionNumber()<7)return;const w=new ee;jn.makeVersionInfoBits(g,w);let T=17;for(let M=0;M<6;++M)for(let O=0;O<3;++O){const V=w.get(T);T--,_.setBoolean(M,_.getHeight()-11+O,V),_.setBoolean(_.getHeight()-11+O,M,V)}}static embedDataBits(g,_,w){let T=0,M=-1,O=w.getWidth()-1,V=w.getHeight()-1;for(;O>0;){for(O===6&&(O-=1);V>=0&&V<w.getHeight();){for(let W=0;W<2;++W){const K=O-W;if(!jn.isEmpty(w.get(K,V)))continue;let de;T<g.getSize()?(de=g.get(T),++T):de=!1,_!==255&&Wa.getDataMaskBit(_,K,V)&&(de=!de),w.setBoolean(K,V,de)}V+=M}M=-M,V+=M,O-=2}if(T!==g.getSize())throw new Ta("Not all bits consumed: "+T+"/"+g.getSize())}static findMSBSet(g){return 32-Z.numberOfLeadingZeros(g)}static calculateBCHCode(g,_){if(_===0)throw new x("0 polynomial");const w=jn.findMSBSet(_);for(g<<=w-1;jn.findMSBSet(g)>=w;)g^=_<<jn.findMSBSet(g)-w;return g}static makeTypeInfoBits(g,_,w){if(!co.isValidMaskPattern(_))throw new Ta("Invalid mask pattern");const T=g.getBits()<<3|_;w.appendBits(T,5);const M=jn.calculateBCHCode(T,jn.TYPE_INFO_POLY);w.appendBits(M,10);const O=new ee;if(O.appendBits(jn.TYPE_INFO_MASK_PATTERN,15),w.xor(O),w.getSize()!==15)throw new Ta("should not happen but we got: "+w.getSize())}static makeVersionInfoBits(g,_){_.appendBits(g.getVersionNumber(),6);const w=jn.calculateBCHCode(g.getVersionNumber(),jn.VERSION_INFO_POLY);if(_.appendBits(w,12),_.getSize()!==18)throw new Ta("should not happen but we got: "+_.getSize())}static isEmpty(g){return g===255}static embedTimingPatterns(g){for(let _=8;_<g.getWidth()-8;++_){const w=(_+1)%2;jn.isEmpty(g.get(_,6))&&g.setNumber(_,6,w),jn.isEmpty(g.get(6,_))&&g.setNumber(6,_,w)}}static embedDarkDotAtLeftBottomCorner(g){if(g.get(8,g.getHeight()-8)===0)throw new Ta;g.setNumber(8,g.getHeight()-8,1)}static embedHorizontalSeparationPattern(g,_,w){for(let T=0;T<8;++T){if(!jn.isEmpty(w.get(g+T,_)))throw new Ta;w.setNumber(g+T,_,0)}}static embedVerticalSeparationPattern(g,_,w){for(let T=0;T<7;++T){if(!jn.isEmpty(w.get(g,_+T)))throw new Ta;w.setNumber(g,_+T,0)}}static embedPositionAdjustmentPattern(g,_,w){for(let T=0;T<5;++T){const M=jn.POSITION_ADJUSTMENT_PATTERN[T];for(let O=0;O<5;++O)w.setNumber(g+O,_+T,M[O])}}static embedPositionDetectionPattern(g,_,w){for(let T=0;T<7;++T){const M=jn.POSITION_DETECTION_PATTERN[T];for(let O=0;O<7;++O)w.setNumber(g+O,_+T,M[O])}}static embedPositionDetectionPatternsAndSeparators(g){const _=jn.POSITION_DETECTION_PATTERN[0].length;jn.embedPositionDetectionPattern(0,0,g),jn.embedPositionDetectionPattern(g.getWidth()-_,0,g),jn.embedPositionDetectionPattern(0,g.getWidth()-_,g);const w=8;jn.embedHorizontalSeparationPattern(0,w-1,g),jn.embedHorizontalSeparationPattern(g.getWidth()-w,w-1,g),jn.embedHorizontalSeparationPattern(0,g.getWidth()-w,g);const T=7;jn.embedVerticalSeparationPattern(T,0,g),jn.embedVerticalSeparationPattern(g.getHeight()-T-1,0,g),jn.embedVerticalSeparationPattern(T,g.getHeight()-T,g)}static maybeEmbedPositionAdjustmentPatterns(g,_){if(g.getVersionNumber()<2)return;const w=g.getVersionNumber()-1,T=jn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[w];for(let M=0,O=T.length;M!==O;M++){const V=T[M];if(V>=0)for(let W=0;W!==O;W++){const K=T[W];K>=0&&jn.isEmpty(_.get(K,V))&&jn.embedPositionAdjustmentPattern(K-2,V-2,_)}}}}jn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),jn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),jn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),jn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),jn.VERSION_INFO_POLY=7973,jn.TYPE_INFO_POLY=1335,jn.TYPE_INFO_MASK_PATTERN=21522;class lu{constructor(g,_){this.dataBytes=g,this.errorCorrectionBytes=_}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class da{constructor(){}static calculateMaskPenalty(g){return Wa.applyMaskPenaltyRule1(g)+Wa.applyMaskPenaltyRule2(g)+Wa.applyMaskPenaltyRule3(g)+Wa.applyMaskPenaltyRule4(g)}static encode(g,_,w=null){let T=da.DEFAULT_BYTE_MODE_ENCODING;const M=w!==null&&w.get(Ka.CHARACTER_SET)!==void 0;M&&(T=w.get(Ka.CHARACTER_SET).toString());const O=this.chooseMode(g,T),V=new ee;if(O===Fn.BYTE&&(M||da.DEFAULT_BYTE_MODE_ENCODING!==T)){const zi=ae.getCharacterSetECIByName(T);zi!==void 0&&this.appendECI(zi,V)}this.appendModeInfo(O,V);const W=new ee;this.appendBytes(g,O,W,T);let K;if(w!==null&&w.get(Ka.QR_VERSION)!==void 0){const zi=Number.parseInt(w.get(Ka.QR_VERSION).toString(),10);K=In.getVersionForNumber(zi);const Ci=this.calculateBitsNeeded(O,V,W,K);if(!this.willFit(Ci,K,_))throw new Ta("Data too big for requested version")}else K=this.recommendVersion(_,O,V,W);const de=new ee;de.appendBitArray(V);const ke=O===Fn.BYTE?W.getSizeInBytes():g.length;this.appendLengthInfo(ke,K,O,de),de.appendBitArray(W);const Pe=K.getECBlocksForLevel(_),Ze=K.getTotalCodewords()-Pe.getTotalECCodewords();this.terminateBits(Ze,de);const mt=this.interleaveWithECBytes(de,K.getTotalCodewords(),Ze,Pe.getNumBlocks()),vt=new co;vt.setECLevel(_),vt.setMode(O),vt.setVersion(K);const zt=K.getDimensionForVersion(),Kt=new nr(zt,zt),Ri=this.chooseMaskPattern(mt,_,K,Kt);return vt.setMaskPattern(Ri),jn.buildMatrix(mt,_,K,Ri,Kt),vt.setMatrix(Kt),vt}static recommendVersion(g,_,w,T){const M=this.calculateBitsNeeded(_,w,T,In.getVersionForNumber(1)),O=this.chooseVersion(M,g),V=this.calculateBitsNeeded(_,w,T,O);return this.chooseVersion(V,g)}static calculateBitsNeeded(g,_,w,T){return _.getSize()+g.getCharacterCountBits(T)+w.getSize()}static getAlphanumericCode(g){return g<da.ALPHANUMERIC_TABLE.length?da.ALPHANUMERIC_TABLE[g]:-1}static chooseMode(g,_=null){if(ae.SJIS.getName()===_&&this.isOnlyDoubleByteKanji(g))return Fn.KANJI;let w=!1,T=!1;for(let M=0,O=g.length;M<O;++M){const V=g.charAt(M);if(da.isDigit(V))w=!0;else if(this.getAlphanumericCode(V.charCodeAt(0))!==-1)T=!0;else return Fn.BYTE}return T?Fn.ALPHANUMERIC:w?Fn.NUMERIC:Fn.BYTE}static isOnlyDoubleByteKanji(g){let _;try{_=Te.encode(g,ae.SJIS)}catch{return!1}const w=_.length;if(w%2!==0)return!1;for(let T=0;T<w;T+=2){const M=_[T]&255;if((M<129||M>159)&&(M<224||M>235))return!1}return!0}static chooseMaskPattern(g,_,w,T){let M=Number.MAX_SAFE_INTEGER,O=-1;for(let V=0;V<co.NUM_MASK_PATTERNS;V++){jn.buildMatrix(g,_,w,V,T);let W=this.calculateMaskPenalty(T);W<M&&(M=W,O=V)}return O}static chooseVersion(g,_){for(let w=1;w<=40;w++){const T=In.getVersionForNumber(w);if(da.willFit(g,T,_))return T}throw new Ta("Data too big")}static willFit(g,_,w){const T=_.getTotalCodewords(),O=_.getECBlocksForLevel(w).getTotalECCodewords(),V=T-O,W=(g+7)/8;return V>=W}static terminateBits(g,_){const w=g*8;if(_.getSize()>w)throw new Ta("data bits cannot fit in the QR Code"+_.getSize()+" > "+w);for(let O=0;O<4&&_.getSize()<w;++O)_.appendBit(!1);const T=_.getSize()&7;if(T>0)for(let O=T;O<8;O++)_.appendBit(!1);const M=g-_.getSizeInBytes();for(let O=0;O<M;++O)_.appendBits((O&1)===0?236:17,8);if(_.getSize()!==w)throw new Ta("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(g,_,w,T,M,O){if(T>=w)throw new Ta("Block ID too large");const V=g%w,W=w-V,K=Math.floor(g/w),de=K+1,ke=Math.floor(_/w),Pe=ke+1,Ze=K-ke,mt=de-Pe;if(Ze!==mt)throw new Ta("EC bytes mismatch");if(w!==W+V)throw new Ta("RS blocks mismatch");if(g!==(ke+Ze)*W+(Pe+mt)*V)throw new Ta("Total bytes mismatch");T<W?(M[0]=ke,O[0]=Ze):(M[0]=Pe,O[0]=mt)}static interleaveWithECBytes(g,_,w,T){if(g.getSizeInBytes()!==w)throw new Ta("Number of bits and data bytes does not match");let M=0,O=0,V=0;const W=new Array;for(let de=0;de<T;++de){const ke=new Int32Array(1),Pe=new Int32Array(1);da.getNumDataBytesAndNumECBytesForBlockID(_,w,T,de,ke,Pe);const Ze=ke[0],mt=new Uint8Array(Ze);g.toBytes(8*M,mt,0,Ze);const vt=da.generateECBytes(mt,Pe[0]);W.push(new lu(mt,vt)),O=Math.max(O,Ze),V=Math.max(V,vt.length),M+=ke[0]}if(w!==M)throw new Ta("Data bytes does not match offset");const K=new ee;for(let de=0;de<O;++de)for(const ke of W){const Pe=ke.getDataBytes();de<Pe.length&&K.appendBits(Pe[de],8)}for(let de=0;de<V;++de)for(const ke of W){const Pe=ke.getErrorCorrectionBytes();de<Pe.length&&K.appendBits(Pe[de],8)}if(_!==K.getSizeInBytes())throw new Ta("Interleaving error: "+_+" and "+K.getSizeInBytes()+" differ.");return K}static generateECBytes(g,_){const w=g.length,T=new Int32Array(w+_);for(let O=0;O<w;O++)T[O]=g[O]&255;new ko(Ii.QR_CODE_FIELD_256).encode(T,_);const M=new Uint8Array(_);for(let O=0;O<_;O++)M[O]=T[w+O];return M}static appendModeInfo(g,_){_.appendBits(g.getBits(),4)}static appendLengthInfo(g,_,w,T){const M=w.getCharacterCountBits(_);if(g>=1<<M)throw new Ta(g+" is bigger than "+((1<<M)-1));T.appendBits(g,M)}static appendBytes(g,_,w,T){switch(_){case Fn.NUMERIC:da.appendNumericBytes(g,w);break;case Fn.ALPHANUMERIC:da.appendAlphanumericBytes(g,w);break;case Fn.BYTE:da.append8BitBytes(g,w,T);break;case Fn.KANJI:da.appendKanjiBytes(g,w);break;default:throw new Ta("Invalid mode: "+_)}}static getDigit(g){return g.charCodeAt(0)-48}static isDigit(g){const _=da.getDigit(g);return _>=0&&_<=9}static appendNumericBytes(g,_){const w=g.length;let T=0;for(;T<w;){const M=da.getDigit(g.charAt(T));if(T+2<w){const O=da.getDigit(g.charAt(T+1)),V=da.getDigit(g.charAt(T+2));_.appendBits(M*100+O*10+V,10),T+=3}else if(T+1<w){const O=da.getDigit(g.charAt(T+1));_.appendBits(M*10+O,7),T+=2}else _.appendBits(M,4),T++}}static appendAlphanumericBytes(g,_){const w=g.length;let T=0;for(;T<w;){const M=da.getAlphanumericCode(g.charCodeAt(T));if(M===-1)throw new Ta;if(T+1<w){const O=da.getAlphanumericCode(g.charCodeAt(T+1));if(O===-1)throw new Ta;_.appendBits(M*45+O,11),T+=2}else _.appendBits(M,6),T++}}static append8BitBytes(g,_,w){let T;try{T=Te.encode(g,w)}catch(M){throw new Ta(M)}for(let M=0,O=T.length;M!==O;M++){const V=T[M];_.appendBits(V,8)}}static appendKanjiBytes(g,_){let w;try{w=Te.encode(g,ae.SJIS)}catch(M){throw new Ta(M)}const T=w.length;for(let M=0;M<T;M+=2){const O=w[M]&255,V=w[M+1]&255,W=O<<8&4294967295|V;let K=-1;if(W>=33088&&W<=40956?K=W-33088:W>=57408&&W<=60351&&(K=W-49472),K===-1)throw new Ta("Invalid byte sequence");const de=(K>>8)*192+(K&255);_.appendBits(de,13)}}static appendECI(g,_){_.appendBits(Fn.ECI.getBits(),4),_.appendBits(g.getValue(),8)}}da.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),da.DEFAULT_BYTE_MODE_ENCODING=ae.UTF8.getName();class Ur{write(g,_,w,T=null){if(g.length===0)throw new x("Found empty contents");if(_<0||w<0)throw new x("Requested dimensions are too small: "+_+"x"+w);let M=Ca.L,O=Ur.QUIET_ZONE_SIZE;T!==null&&(T.get(Ka.ERROR_CORRECTION)!==void 0&&(M=Ca.fromString(T.get(Ka.ERROR_CORRECTION).toString())),T.get(Ka.MARGIN)!==void 0&&(O=Number.parseInt(T.get(Ka.MARGIN).toString(),10)));const V=da.encode(g,M,T);return this.renderResult(V,_,w,O)}writeToDom(g,_,w,T,M=null){typeof g=="string"&&(g=document.querySelector(g));const O=this.write(_,w,T,M);g&&g.appendChild(O)}renderResult(g,_,w,T){const M=g.getMatrix();if(M===null)throw new rn;const O=M.getWidth(),V=M.getHeight(),W=O+T*2,K=V+T*2,de=Math.max(_,W),ke=Math.max(w,K),Pe=Math.min(Math.floor(de/W),Math.floor(ke/K)),Ze=Math.floor((de-O*Pe)/2),mt=Math.floor((ke-V*Pe)/2),vt=this.createSVGElement(de,ke);for(let zt=0,Kt=mt;zt<V;zt++,Kt+=Pe)for(let Ri=0,zi=Ze;Ri<O;Ri++,zi+=Pe)if(M.get(Ri,zt)===1){const Ci=this.createSvgRectElement(zi,Kt,Pe,Pe);vt.appendChild(Ci)}return vt}createSVGElement(g,_){const w=document.createElementNS(Ur.SVG_NS,"svg");return w.setAttributeNS(null,"height",g.toString()),w.setAttributeNS(null,"width",_.toString()),w}createSvgRectElement(g,_,w,T){const M=document.createElementNS(Ur.SVG_NS,"rect");return M.setAttributeNS(null,"x",g.toString()),M.setAttributeNS(null,"y",_.toString()),M.setAttributeNS(null,"height",w.toString()),M.setAttributeNS(null,"width",T.toString()),M.setAttributeNS(null,"fill","#000000"),M}}Ur.QUIET_ZONE_SIZE=4,Ur.SVG_NS="http://www.w3.org/2000/svg";class zr{encode(g,_,w,T,M){if(g.length===0)throw new x("Found empty contents");if(_!==wt.QR_CODE)throw new x("Can only encode QR_CODE, but got "+_);if(w<0||T<0)throw new x(`Requested dimensions are too small: ${w}x${T}`);let O=Ca.L,V=zr.QUIET_ZONE_SIZE;M!==null&&(M.get(Ka.ERROR_CORRECTION)!==void 0&&(O=Ca.fromString(M.get(Ka.ERROR_CORRECTION).toString())),M.get(Ka.MARGIN)!==void 0&&(V=Number.parseInt(M.get(Ka.MARGIN).toString(),10)));const W=da.encode(g,O,M);return zr.renderResult(W,w,T,V)}static renderResult(g,_,w,T){const M=g.getMatrix();if(M===null)throw new rn;const O=M.getWidth(),V=M.getHeight(),W=O+T*2,K=V+T*2,de=Math.max(_,W),ke=Math.max(w,K),Pe=Math.min(Math.floor(de/W),Math.floor(ke/K)),Ze=Math.floor((de-O*Pe)/2),mt=Math.floor((ke-V*Pe)/2),vt=new We(de,ke);for(let zt=0,Kt=mt;zt<V;zt++,Kt+=Pe)for(let Ri=0,zi=Ze;Ri<O;Ri++,zi+=Pe)M.get(Ri,zt)===1&&vt.setRegion(zi,Kt,Pe,Pe);return vt}}zr.QUIET_ZONE_SIZE=4;class Fs{encode(g,_,w,T,M){let O;switch(_){case wt.QR_CODE:O=new zr;break;default:throw new x("No encoder available for format "+_)}return O.encode(g,_,w,T,M)}}class rr extends pt{constructor(g,_,w,T,M,O,V,W){if(super(O,V),this.yuvData=g,this.dataWidth=_,this.dataHeight=w,this.left=T,this.top=M,T+O>_||M+V>w)throw new x("Crop rectangle does not fit within image data.");W&&this.reverseHorizontal(O,V)}getRow(g,_){if(g<0||g>=this.getHeight())throw new x("Requested row is outside the image: "+g);const w=this.getWidth();(_==null||_.length<w)&&(_=new Uint8ClampedArray(w));const T=(g+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,T,_,0,w),_}getMatrix(){const g=this.getWidth(),_=this.getHeight();if(g===this.dataWidth&&_===this.dataHeight)return this.yuvData;const w=g*_,T=new Uint8ClampedArray(w);let M=this.top*this.dataWidth+this.left;if(g===this.dataWidth)return D.arraycopy(this.yuvData,M,T,0,w),T;for(let O=0;O<_;O++){const V=O*g;D.arraycopy(this.yuvData,M,T,V,g),M+=this.dataWidth}return T}isCropSupported(){return!0}crop(g,_,w,T){return new rr(this.yuvData,this.dataWidth,this.dataHeight,this.left+g,this.top+_,w,T,!1)}renderThumbnail(){const g=this.getWidth()/rr.THUMBNAIL_SCALE_FACTOR,_=this.getHeight()/rr.THUMBNAIL_SCALE_FACTOR,w=new Int32Array(g*_),T=this.yuvData;let M=this.top*this.dataWidth+this.left;for(let O=0;O<_;O++){const V=O*g;for(let W=0;W<g;W++){const K=T[M+W*rr.THUMBNAIL_SCALE_FACTOR]&255;w[V+W]=4278190080|K*65793}M+=this.dataWidth*rr.THUMBNAIL_SCALE_FACTOR}return w}getThumbnailWidth(){return this.getWidth()/rr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/rr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(g,_){const w=this.yuvData;for(let T=0,M=this.top*this.dataWidth+this.left;T<_;T++,M+=this.dataWidth){const O=M+g/2;for(let V=M,W=M+g-1;V<O;V++,W--){const K=w[V];w[V]=w[W],w[W]=K}}}invert(){return new Dt(this)}}rr.THUMBNAIL_SCALE_FACTOR=2;class As extends pt{constructor(g,_,w,T,M,O,V){if(super(_,w),this.dataWidth=T,this.dataHeight=M,this.left=O,this.top=V,g.BYTES_PER_ELEMENT===4){const W=_*w,K=new Uint8ClampedArray(W);for(let de=0;de<W;de++){const ke=g[de],Pe=ke>>16&255,Ze=ke>>7&510,mt=ke&255;K[de]=(Pe+Ze+mt)/4&255}this.luminances=K}else this.luminances=g;if(T===void 0&&(this.dataWidth=_),M===void 0&&(this.dataHeight=w),O===void 0&&(this.left=0),V===void 0&&(this.top=0),this.left+_>this.dataWidth||this.top+w>this.dataHeight)throw new x("Crop rectangle does not fit within image data.")}getRow(g,_){if(g<0||g>=this.getHeight())throw new x("Requested row is outside the image: "+g);const w=this.getWidth();(_==null||_.length<w)&&(_=new Uint8ClampedArray(w));const T=(g+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,T,_,0,w),_}getMatrix(){const g=this.getWidth(),_=this.getHeight();if(g===this.dataWidth&&_===this.dataHeight)return this.luminances;const w=g*_,T=new Uint8ClampedArray(w);let M=this.top*this.dataWidth+this.left;if(g===this.dataWidth)return D.arraycopy(this.luminances,M,T,0,w),T;for(let O=0;O<_;O++){const V=O*g;D.arraycopy(this.luminances,M,T,V,g),M+=this.dataWidth}return T}isCropSupported(){return!0}crop(g,_,w,T){return new As(this.luminances,w,T,this.dataWidth,this.dataHeight,this.left+g,this.top+_)}invert(){return new Dt(this)}}class _l extends ae{static forName(g){return this.getCharacterSetECIByName(g)}}class Ir{}Ir.ISO_8859_1=ae.ISO8859_1;class Yu{isCompact(){return this.compact}setCompact(g){this.compact=g}getSize(){return this.size}setSize(g){this.size=g}getLayers(){return this.layers}setLayers(g){this.layers=g}getCodeWords(){return this.codeWords}setCodeWords(g){this.codeWords=g}getMatrix(){return this.matrix}setMatrix(g){this.matrix=g}}class xl{static singletonList(g){return[g]}static min(g,_){return g.sort(_)[0]}}class Fc{constructor(g){this.previous=g}getPrevious(){return this.previous}}class uo extends Fc{constructor(g,_,w){super(g),this.value=_,this.bitCount=w}appendTo(g,_){g.appendBits(this.value,this.bitCount)}add(g,_){return new uo(this,g,_)}addBinaryShift(g,_){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new uo(this,g,_)}toString(){let g=this.value&(1<<this.bitCount)-1;return g|=1<<this.bitCount,"<"+Z.toBinaryString(g|1<<this.bitCount).substring(1)+">"}}class cu extends uo{constructor(g,_,w){super(g,0,0),this.binaryShiftStart=_,this.binaryShiftByteCount=w}appendTo(g,_){for(let w=0;w<this.binaryShiftByteCount;w++)(w===0||w===31&&this.binaryShiftByteCount<=62)&&(g.appendBits(31,5),this.binaryShiftByteCount>62?g.appendBits(this.binaryShiftByteCount-31,16):w===0?g.appendBits(Math.min(this.binaryShiftByteCount,31),5):g.appendBits(this.binaryShiftByteCount-31,5)),g.appendBits(_[this.binaryShiftStart+w],8)}addBinaryShift(g,_){return new cu(this,g,_)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Nc(Se,g,_){return new cu(Se,g,_)}function Bc(Se,g,_){return new uo(Se,g,_)}const gc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Co=0,No=1,Ts=2,uu=3,Xs=4,hu=new uo(null,0,0),du=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function jh(Se){for(let g of Se)G.fill(g,-1);return Se[Co][Xs]=0,Se[No][Xs]=0,Se[No][Co]=28,Se[uu][Xs]=0,Se[Ts][Xs]=0,Se[Ts][Co]=15,Se}const qu=jh(G.createInt32Array(6,6));class gs{constructor(g,_,w,T){this.token=g,this.mode=_,this.binaryShiftByteCount=w,this.bitCount=T}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(g,_){let w=this.bitCount,T=this.token;if(g!==this.mode){let O=du[this.mode][g];T=Bc(T,O&65535,O>>16),w+=O>>16}let M=g===Ts?4:5;return T=Bc(T,_,M),new gs(T,g,0,w+M)}shiftAndAppend(g,_){let w=this.token,T=this.mode===Ts?4:5;return w=Bc(w,qu[this.mode][g],T),w=Bc(w,_,5),new gs(w,this.mode,0,this.bitCount+T+5)}addBinaryShiftChar(g){let _=this.token,w=this.mode,T=this.bitCount;if(this.mode===Xs||this.mode===Ts){let V=du[w][Co];_=Bc(_,V&65535,V>>16),T+=V>>16,w=Co}let M=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,O=new gs(_,w,this.binaryShiftByteCount+1,T+M);return O.binaryShiftByteCount===2078&&(O=O.endBinaryShift(g+1)),O}endBinaryShift(g){if(this.binaryShiftByteCount===0)return this;let _=this.token;return _=Nc(_,g-this.binaryShiftByteCount,this.binaryShiftByteCount),new gs(_,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(g){let _=this.bitCount+(du[this.mode][g.mode]>>16);return this.binaryShiftByteCount<g.binaryShiftByteCount?_+=gs.calculateBinaryShiftCost(g)-gs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>g.binaryShiftByteCount&&g.binaryShiftByteCount>0&&(_+=10),_<=g.bitCount}toBitArray(g){let _=[];for(let T=this.endBinaryShift(g.length).token;T!==null;T=T.getPrevious())_.unshift(T);let w=new ee;for(const T of _)T.appendTo(w,g);return w}toString(){return ye.format("%s bits=%d bytes=%d",gc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(g){return g.binaryShiftByteCount>62?21:g.binaryShiftByteCount>31?20:g.binaryShiftByteCount>0?10:0}}gs.INITIAL_STATE=new gs(hu,Co,0,0);function Vh(Se){const g=ye.getCharCode(" "),_=ye.getCharCode("."),w=ye.getCharCode(",");Se[Co][g]=1;const T=ye.getCharCode("Z"),M=ye.getCharCode("A");for(let Pe=M;Pe<=T;Pe++)Se[Co][Pe]=Pe-M+2;Se[No][g]=1;const O=ye.getCharCode("z"),V=ye.getCharCode("a");for(let Pe=V;Pe<=O;Pe++)Se[No][Pe]=Pe-V+2;Se[Ts][g]=1;const W=ye.getCharCode("9"),K=ye.getCharCode("0");for(let Pe=K;Pe<=W;Pe++)Se[Ts][Pe]=Pe-K+2;Se[Ts][w]=12,Se[Ts][_]=13;const de=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Pe=0;Pe<de.length;Pe++)Se[uu][ye.getCharCode(de[Pe])]=Pe;const ke=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Pe=0;Pe<ke.length;Pe++)ye.getCharCode(ke[Pe])>0&&(Se[Xs][ye.getCharCode(ke[Pe])]=Pe);return Se}const mc=Vh(G.createInt32Array(5,256));class Ao{constructor(g){this.text=g}encode(){const g=ye.getCharCode(" "),_=ye.getCharCode(`
`);let w=xl.singletonList(gs.INITIAL_STATE);for(let M=0;M<this.text.length;M++){let O,V=M+1<this.text.length?this.text[M+1]:0;switch(this.text[M]){case ye.getCharCode("\r"):O=V===_?2:0;break;case ye.getCharCode("."):O=V===g?3:0;break;case ye.getCharCode(","):O=V===g?4:0;break;case ye.getCharCode(":"):O=V===g?5:0;break;default:O=0}O>0?(w=Ao.updateStateListForPair(w,M,O),M++):w=this.updateStateListForChar(w,M)}return xl.min(w,(M,O)=>M.getBitCount()-O.getBitCount()).toBitArray(this.text)}updateStateListForChar(g,_){const w=[];for(let T of g)this.updateStateForChar(T,_,w);return Ao.simplifyStates(w)}updateStateForChar(g,_,w){let T=this.text[_]&255,M=mc[g.getMode()][T]>0,O=null;for(let V=0;V<=Xs;V++){let W=mc[V][T];if(W>0){if(O==null&&(O=g.endBinaryShift(_)),!M||V===g.getMode()||V===Ts){const K=O.latchAndAppend(V,W);w.push(K)}if(!M&&qu[g.getMode()][V]>=0){const K=O.shiftAndAppend(V,W);w.push(K)}}}if(g.getBinaryShiftByteCount()>0||mc[g.getMode()][T]===0){let V=g.addBinaryShiftChar(_);w.push(V)}}static updateStateListForPair(g,_,w){const T=[];for(let M of g)this.updateStateForPair(M,_,w,T);return this.simplifyStates(T)}static updateStateForPair(g,_,w,T){let M=g.endBinaryShift(_);if(T.push(M.latchAndAppend(Xs,w)),g.getMode()!==Xs&&T.push(M.shiftAndAppend(Xs,w)),w===3||w===4){let O=M.latchAndAppend(Ts,16-w).latchAndAppend(Ts,1);T.push(O)}if(g.getBinaryShiftByteCount()>0){let O=g.addBinaryShiftChar(_).addBinaryShiftChar(_+1);T.push(O)}}static simplifyStates(g){let _=[];for(const w of g){let T=!0;for(const M of _){if(M.isBetterThanOrEqualTo(w)){T=!1;break}w.isBetterThanOrEqualTo(M)&&(_=_.filter(O=>O!==M))}T&&_.push(w)}return _}}class pa{constructor(){}static encodeBytes(g){return pa.encode(g,pa.DEFAULT_EC_PERCENT,pa.DEFAULT_AZTEC_LAYERS)}static encode(g,_,w){let T=new Ao(g).encode(),M=Z.truncDivision(T.getSize()*_,100)+11,O=T.getSize()+M,V,W,K,de,ke;if(w!==pa.DEFAULT_AZTEC_LAYERS){if(V=w<0,W=Math.abs(w),W>(V?pa.MAX_NB_BITS_COMPACT:pa.MAX_NB_BITS))throw new x(ye.format("Illegal value %s for layers",w));K=pa.totalBitsInLayer(W,V),de=pa.WORD_SIZE[W];let Ci=K-K%de;if(ke=pa.stuffBits(T,de),ke.getSize()+M>Ci)throw new x("Data to large for user specified layer");if(V&&ke.getSize()>de*64)throw new x("Data to large for user specified layer")}else{de=0,ke=null;for(let Ci=0;;Ci++){if(Ci>pa.MAX_NB_BITS)throw new x("Data too large for an Aztec code");if(V=Ci<=3,W=V?Ci+1:Ci,K=pa.totalBitsInLayer(W,V),O>K)continue;(ke==null||de!==pa.WORD_SIZE[W])&&(de=pa.WORD_SIZE[W],ke=pa.stuffBits(T,de));let _a=K-K%de;if(!(V&&ke.getSize()>de*64)&&ke.getSize()+M<=_a)break}}let Pe=pa.generateCheckWords(ke,K,de),Ze=ke.getSize()/de,mt=pa.generateModeMessage(V,W,Ze),vt=(V?11:14)+W*4,zt=new Int32Array(vt),Kt;if(V){Kt=vt;for(let Ci=0;Ci<zt.length;Ci++)zt[Ci]=Ci}else{Kt=vt+1+2*Z.truncDivision(Z.truncDivision(vt,2)-1,15);let Ci=Z.truncDivision(vt,2),_a=Z.truncDivision(Kt,2);for(let un=0;un<Ci;un++){let X=un+Z.truncDivision(un,15);zt[Ci-un-1]=_a-X-1,zt[Ci+un]=_a+X+1}}let Ri=new We(Kt);for(let Ci=0,_a=0;Ci<W;Ci++){let un=(W-Ci)*4+(V?9:12);for(let X=0;X<un;X++){let se=X*2;for(let Ae=0;Ae<2;Ae++)Pe.get(_a+se+Ae)&&Ri.set(zt[Ci*2+Ae],zt[Ci*2+X]),Pe.get(_a+un*2+se+Ae)&&Ri.set(zt[Ci*2+X],zt[vt-1-Ci*2-Ae]),Pe.get(_a+un*4+se+Ae)&&Ri.set(zt[vt-1-Ci*2-Ae],zt[vt-1-Ci*2-X]),Pe.get(_a+un*6+se+Ae)&&Ri.set(zt[vt-1-Ci*2-X],zt[Ci*2+Ae])}_a+=un*8}if(pa.drawModeMessage(Ri,V,Kt,mt),V)pa.drawBullsEye(Ri,Z.truncDivision(Kt,2),5);else{pa.drawBullsEye(Ri,Z.truncDivision(Kt,2),7);for(let Ci=0,_a=0;Ci<Z.truncDivision(vt,2)-1;Ci+=15,_a+=16)for(let un=Z.truncDivision(Kt,2)&1;un<Kt;un+=2)Ri.set(Z.truncDivision(Kt,2)-_a,un),Ri.set(Z.truncDivision(Kt,2)+_a,un),Ri.set(un,Z.truncDivision(Kt,2)-_a),Ri.set(un,Z.truncDivision(Kt,2)+_a)}let zi=new Yu;return zi.setCompact(V),zi.setSize(Kt),zi.setLayers(W),zi.setCodeWords(Ze),zi.setMatrix(Ri),zi}static drawBullsEye(g,_,w){for(let T=0;T<w;T+=2)for(let M=_-T;M<=_+T;M++)g.set(M,_-T),g.set(M,_+T),g.set(_-T,M),g.set(_+T,M);g.set(_-w,_-w),g.set(_-w+1,_-w),g.set(_-w,_-w+1),g.set(_+w,_-w),g.set(_+w,_-w+1),g.set(_+w,_+w-1)}static generateModeMessage(g,_,w){let T=new ee;return g?(T.appendBits(_-1,2),T.appendBits(w-1,6),T=pa.generateCheckWords(T,28,4)):(T.appendBits(_-1,5),T.appendBits(w-1,11),T=pa.generateCheckWords(T,40,4)),T}static drawModeMessage(g,_,w,T){let M=Z.truncDivision(w,2);if(_)for(let O=0;O<7;O++){let V=M-3+O;T.get(O)&&g.set(V,M-5),T.get(O+7)&&g.set(M+5,V),T.get(20-O)&&g.set(V,M+5),T.get(27-O)&&g.set(M-5,V)}else for(let O=0;O<10;O++){let V=M-5+O+Z.truncDivision(O,5);T.get(O)&&g.set(V,M-7),T.get(O+10)&&g.set(M+7,V),T.get(29-O)&&g.set(V,M+7),T.get(39-O)&&g.set(M-7,V)}}static generateCheckWords(g,_,w){let T=g.getSize()/w,M=new ko(pa.getGF(w)),O=Z.truncDivision(_,w),V=pa.bitsToWords(g,w,O);M.encode(V,O-T);let W=_%w,K=new ee;K.appendBits(0,W);for(const de of Array.from(V))K.appendBits(de,w);return K}static bitsToWords(g,_,w){let T=new Int32Array(w),M,O;for(M=0,O=g.getSize()/_;M<O;M++){let V=0;for(let W=0;W<_;W++)V|=g.get(M*_+W)?1<<_-W-1:0;T[M]=V}return T}static getGF(g){switch(g){case 4:return Ii.AZTEC_PARAM;case 6:return Ii.AZTEC_DATA_6;case 8:return Ii.AZTEC_DATA_8;case 10:return Ii.AZTEC_DATA_10;case 12:return Ii.AZTEC_DATA_12;default:throw new x("Unsupported word size "+g)}}static stuffBits(g,_){let w=new ee,T=g.getSize(),M=(1<<_)-2;for(let O=0;O<T;O+=_){let V=0;for(let W=0;W<_;W++)(O+W>=T||g.get(O+W))&&(V|=1<<_-1-W);(V&M)===M?(w.appendBits(V&M,_),O--):(V&M)===0?(w.appendBits(V|1,_),O--):w.appendBits(V,_)}return w}static totalBitsInLayer(g,_){return((_?88:112)+16*g)*g}}pa.DEFAULT_EC_PERCENT=33,pa.DEFAULT_AZTEC_LAYERS=0,pa.MAX_NB_BITS=32,pa.MAX_NB_BITS_COMPACT=4,pa.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vl{encode(g,_,w,T){return this.encodeWithHints(g,_,w,T,null)}encodeWithHints(g,_,w,T,M){let O=Ir.ISO_8859_1,V=pa.DEFAULT_EC_PERCENT,W=pa.DEFAULT_AZTEC_LAYERS;return M!=null&&(M.has(Ka.CHARACTER_SET)&&(O=_l.forName(M.get(Ka.CHARACTER_SET).toString())),M.has(Ka.ERROR_CORRECTION)&&(V=Z.parseInt(M.get(Ka.ERROR_CORRECTION).toString())),M.has(Ka.AZTEC_LAYERS)&&(W=Z.parseInt(M.get(Ka.AZTEC_LAYERS).toString()))),Vl.encodeLayers(g,_,w,T,O,V,W)}static encodeLayers(g,_,w,T,M,O,V){if(_!==wt.AZTEC)throw new x("Can only encode AZTEC, but got "+_);let W=pa.encode(ye.getBytes(g,M),O,V);return Vl.renderResult(W,w,T)}static renderResult(g,_,w){let T=g.getMatrix();if(T==null)throw new rn;let M=T.getWidth(),O=T.getHeight(),V=Math.max(_,M),W=Math.max(w,O),K=Math.min(V/M,W/O),de=(V-M*K)/2,ke=(W-O*K)/2,Pe=new We(V,W);for(let Ze=0,mt=ke;Ze<O;Ze++,mt+=K)for(let vt=0,zt=de;vt<M;vt++,zt+=K)T.get(vt,Ze)&&Pe.setRegion(zt,mt,K,K);return Pe}}t.AbstractExpandedDecoder=ii,t.ArgumentException=y,t.ArithmeticException=fn,t.AztecCode=Yu,t.AztecCodeReader=rt,t.AztecCodeWriter=Vl,t.AztecDecoder=qt,t.AztecDetector=tt,t.AztecDetectorResult=wi,t.AztecEncoder=pa,t.AztecHighLevelEncoder=Ao,t.AztecPoint=Ce,t.BarcodeFormat=wt,t.Binarizer=z,t.BinaryBitmap=S,t.BitArray=ee,t.BitMatrix=We,t.BitSource=ks,t.BrowserAztecCodeReader=St,t.BrowserBarcodeReader=er,t.BrowserCodeReader=xi,t.BrowserDatamatrixCodeReader=jl,t.BrowserMultiFormatReader=Fo,t.BrowserPDF417Reader=ir,t.BrowserQRCodeReader=Cs,t.BrowserQRCodeSvgWriter=Ur,t.CharacterSetECI=ae,t.ChecksumException=E,t.Code128Reader=He,t.Code39Reader=_t,t.DataMatrixDecodedBitStreamParser=os,t.DataMatrixReader=Ga,t.DecodeHintType=le,t.DecoderResult=Zi,t.DefaultGridSampler=xe,t.DetectorResult=Wi,t.EAN13Reader=Mn,t.EncodeHintType=Ka,t.Exception=f,t.FormatException=J,t.GenericGF=Ii,t.GenericGFPoly=si,t.GlobalHistogramBinarizer=ht,t.GridSampler=Di,t.GridSamplerInstance=be,t.HTMLCanvasElementLuminanceSource=qe,t.HybridBinarizer=$e,t.ITFReader=Ut,t.IllegalArgumentException=x,t.IllegalStateException=rn,t.InvertedLuminanceSource=Dt,t.LuminanceSource=pt,t.MathUtils=li,t.MultiFormatOneDReader=Za,t.MultiFormatReader=lo,t.MultiFormatWriter=Fs,t.NotFoundException=Le,t.OneDReader=yt,t.PDF417DecodedBitStreamParser=Wt,t.PDF417DecoderErrorCorrection=Ke,t.PDF417Reader=Jn,t.PDF417ResultMetadata=fa,t.PerspectiveTransform=dt,t.PlanarYUVLuminanceSource=rr,t.QRCodeByteMatrix=nr,t.QRCodeDataMask=Er,t.QRCodeDecodedBitStreamParser=za,t.QRCodeDecoderErrorCorrectionLevel=Ca,t.QRCodeDecoderFormatInformation=cr,t.QRCodeEncoder=da,t.QRCodeEncoderQRCode=co,t.QRCodeMaskUtil=Wa,t.QRCodeMatrixUtil=jn,t.QRCodeMode=Fn,t.QRCodeReader=ea,t.QRCodeVersion=In,t.QRCodeWriter=zr,t.RGBLuminanceSource=As,t.RSS14Reader=nn,t.RSSExpandedReader=Zt,t.ReaderException=Aa,t.ReedSolomonDecoder=xn,t.ReedSolomonEncoder=ko,t.ReedSolomonException=Qi,t.Result=Lt,t.ResultMetadataType=bi,t.ResultPoint=ci,t.StringUtils=ye,t.UnsupportedOperationException=me,t.VideoInputDevice=Nt,t.WhiteRectangleDetector=Ti,t.WriterException=Ta,t.ZXingArrays=G,t.ZXingCharset=_l,t.ZXingInteger=Z,t.ZXingStandardCharsets=Ir,t.ZXingStringBuilder=Re,t.ZXingStringEncoding=Te,t.ZXingSystem=D,t.createAbstractExpandedDecoder=ca,Object.defineProperty(t,"__esModule",{value:!0})}))})(Sm,Sm.exports)),Sm.exports}var rs=x7();const v7=rE(rs),b7=uO({__proto__:null,default:v7},[rs]);var JT=(function(){function a(e,t,i){if(this.formatMap=new Map([[On.QR_CODE,rs.BarcodeFormat.QR_CODE],[On.AZTEC,rs.BarcodeFormat.AZTEC],[On.CODABAR,rs.BarcodeFormat.CODABAR],[On.CODE_39,rs.BarcodeFormat.CODE_39],[On.CODE_93,rs.BarcodeFormat.CODE_93],[On.CODE_128,rs.BarcodeFormat.CODE_128],[On.DATA_MATRIX,rs.BarcodeFormat.DATA_MATRIX],[On.MAXICODE,rs.BarcodeFormat.MAXICODE],[On.ITF,rs.BarcodeFormat.ITF],[On.EAN_13,rs.BarcodeFormat.EAN_13],[On.EAN_8,rs.BarcodeFormat.EAN_8],[On.PDF_417,rs.BarcodeFormat.PDF_417],[On.RSS_14,rs.BarcodeFormat.RSS_14],[On.RSS_EXPANDED,rs.BarcodeFormat.RSS_EXPANDED],[On.UPC_A,rs.BarcodeFormat.UPC_A],[On.UPC_E,rs.BarcodeFormat.UPC_E],[On.UPC_EAN_EXTENSION,rs.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!b7)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=i;var n=this.createZXingFormats(e),r=new Map;r.set(rs.DecodeHintType.POSSIBLE_FORMATS,n),r.set(rs.DecodeHintType.TRY_HARDER,!1),this.hints=r}return a.prototype.decodeAsync=function(e){var t=this;return new Promise(function(i,n){try{i(t.decode(e))}catch(r){n(r)}})},a.prototype.decode=function(e){var t=new rs.MultiFormatReader(this.verbose,this.hints),i=new rs.HTMLCanvasElementLuminanceSource(e),n=new rs.BinaryBitmap(new rs.HybridBinarizer(i)),r=t.decode(n);return{text:r.text,format:FL.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,i,n){e.set(t,i)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.logError("".concat(r," is not supported by")+"ZXingHtml5QrcodeShim")}return t},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),w7=function(a,e,t,i){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function s(y){try{f(i.next(y))}catch(x){o(x)}}function h(y){try{f(i.throw(y))}catch(x){o(x)}}function f(y){y.done?r(y.value):n(y.value).then(s,h)}f((i=i.apply(a,e||[])).next())})},S7=function(a,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,n,r,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(y){return h([f,y])}}function h(f){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(i=1,n&&(r=f[0]&2?n.return:f[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,f[1])).done)return r;switch(n=0,r&&(f=[f[0]&2,r.value]),f[0]){case 0:case 1:r=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!r||f[1]>r[0]&&f[1]<r[3])){t.label=f[1];break}if(f[0]===6&&t.label<r[1]){t.label=r[1],r=f;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(f);break}r[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(a,t)}catch(y){f=[6,y],n=0}finally{i=r=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},QT=(function(){function a(e,t,i){if(this.formatMap=new Map([[On.QR_CODE,"qr_code"],[On.AZTEC,"aztec"],[On.CODABAR,"codabar"],[On.CODE_39,"code_39"],[On.CODE_93,"code_93"],[On.CODE_128,"code_128"],[On.DATA_MATRIX,"data_matrix"],[On.ITF,"itf"],[On.EAN_13,"ean_13"],[On.EAN_8,"ean_8"],[On.PDF_417,"pdf417"],[On.UPC_A,"upc_a"],[On.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=i;var n=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(n),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return w7(this,void 0,void 0,function(){var t,i;return S7(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=n.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(t),[2,{text:i.rawValue,format:FL.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var t=null,i=0,n=0,r=e;n<r.length;n++){var o=r[n],s=o.boundingBox.width*o.boundingBox.height;s>i&&(i=s,t=o)}if(!t)throw"No largest barcode found";return t},a.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.warn("".concat(r," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,i,n){e.set(t,i)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),eE=function(a,e,t,i){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function s(y){try{f(i.next(y))}catch(x){o(x)}}function h(y){try{f(i.throw(y))}catch(x){o(x)}}function f(y){y.done?r(y.value):n(y.value).then(s,h)}f((i=i.apply(a,e||[])).next())})},tE=function(a,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,n,r,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(y){return h([f,y])}}function h(f){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(i=1,n&&(r=f[0]&2?n.return:f[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,f[1])).done)return r;switch(n=0,r&&(f=[f[0]&2,r.value]),f[0]){case 0:case 1:r=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!r||f[1]>r[0]&&f[1]<r[3])){t.label=f[1];break}if(f[0]===6&&t.label<r[1]){t.label=r[1],r=f;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(f);break}r[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(a,t)}catch(y){f=[6,y],n=0}finally{i=r=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},k7=(function(){function a(e,t,i,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,t&&QT.isSupported()?(this.primaryDecoder=new QT(e,i,n),this.secondaryDecoder=new JT(e,i,n)):this.primaryDecoder=new JT(e,i,n)}return a.prototype.decodeAsync=function(e){return eE(this,void 0,void 0,function(){var t;return tE(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return eE(this,void 0,void 0,function(){var t,i;return tE(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(i=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,i=this.executionResults;t<i.length;t++){var n=i[t];e+=n}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),gS=(function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},a(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}})(),$_=function(a,e,t,i){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function s(y){try{f(i.next(y))}catch(x){o(x)}}function h(y){try{f(i.throw(y))}catch(x){o(x)}}function f(y){y.done?r(y.value):n(y.value).then(s,h)}f((i=i.apply(a,e||[])).next())})},G_=function(a,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,n,r,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(y){return h([f,y])}}function h(f){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(i=1,n&&(r=f[0]&2?n.return:f[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,f[1])).done)return r;switch(n=0,r&&(f=[f[0]&2,r.value]),f[0]){case 0:case 1:r=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!r||f[1]>r[0]&&f[1]<r[3])){t.label=f[1];break}if(f[0]===6&&t.label<r[1]){t.label=r[1],r=f;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(f);break}r[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(a,t)}catch(y){f=[6,y],n=0}finally{i=r=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},BL=(function(){function a(e,t){this.name=e,this.track=t}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var t={};t[this.name]=e;var i={advanced:[t]};return this.track.applyConstraints(i)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},a})(),C7=(function(a){gS(e,a);function e(t,i){return a.call(this,t,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var i={};i[this.name]=t;var n={advanced:[i]};return this.track.applyConstraints(n)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),i=t[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(BL),A7=(function(a){gS(e,a);function e(t){return a.call(this,"zoom",t)||this}return e})(C7),T7=(function(a){gS(e,a);function e(t){return a.call(this,"torch",t)||this}return e})(BL),E7=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new A7(this.track)},a.prototype.torchFeature=function(){return new T7(this.track)},a})(),M7=(function(){function a(e,t,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var i=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,t,i,n){return $_(this,void 0,void 0,function(){var r,o;return G_(this,function(s){switch(s.label){case 0:return r=new a(e,t,n),i.aspectRatio?(o={aspectRatio:i.aspectRatio},[4,r.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:s.sent(),s.label=2;case 2:return r.setupSurface(),[2,r]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var t=this,i=function(){setTimeout(e,200),t.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return $_(this,void 0,void 0,function(){return G_(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,i){var n=e.mediaStream.getVideoTracks(),r=n.length,o=0;e.mediaStream.getVideoTracks().forEach(function(s){e.mediaStream.removeTrack(s),s.stop(),++o,o>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},a.prototype.getCapabilities=function(){return new E7(this.getFirstTrackOrFail())},a})(),I7=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,t,i){return $_(this,void 0,void 0,function(){return G_(this,function(n){return[2,M7.create(e,this.mediaStream,t,i)]})})},a.create=function(e){return $_(this,void 0,void 0,function(){var t,i;return G_(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=n.sent(),[2,new a(i)]}})})},a})(),iE=function(a,e,t,i){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function s(y){try{f(i.next(y))}catch(x){o(x)}}function h(y){try{f(i.throw(y))}catch(x){o(x)}}function f(y){y.done?r(y.value):n(y.value).then(s,h)}f((i=i.apply(a,e||[])).next())})},nE=function(a,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,n,r,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(y){return h([f,y])}}function h(f){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(i=1,n&&(r=f[0]&2?n.return:f[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,f[1])).done)return r;switch(n=0,r&&(f=[f[0]&2,r.value]),f[0]){case 0:case 1:r=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!r||f[1]>r[0]&&f[1]<r[3])){t.label=f[1];break}if(f[0]===6&&t.label<r[1]){t.label=r[1],r=f;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(f);break}r[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(a,t)}catch(y){f=[6,y],n=0}finally{i=r=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},P7=(function(){function a(){}return a.failIfNotSupported=function(){return iE(this,void 0,void 0,function(){return nE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return iE(this,void 0,void 0,function(){return nE(this,function(t){return[2,I7.create(e)]})})},a})(),L7=function(a,e,t,i){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function s(y){try{f(i.next(y))}catch(x){o(x)}}function h(y){try{f(i.throw(y))}catch(x){o(x)}}function f(y){y.done?r(y.value):n(y.value).then(s,h)}f((i=i.apply(a,e||[])).next())})},D7=function(a,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,n,r,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(y){return h([f,y])}}function h(f){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(i=1,n&&(r=f[0]&2?n.return:f[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,f[1])).done)return r;switch(n=0,r&&(f=[f[0]&2,r.value]),f[0]){case 0:case 1:r=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!r||f[1]>r[0]&&f[1]<r[3])){t.label=f[1];break}if(f[0]===6&&t.label<r[1]){t.label=r[1],r=f;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(f);break}r[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(a,t)}catch(y){f=[6,y],n=0}finally{i=r=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},R7=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Gp.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Gp.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return L7(this,void 0,void 0,function(){var e,t,i,n,r,o,s;return D7(this,function(h){switch(h.label){case 0:return e=function(f){for(var y=f.getVideoTracks(),x=0,S=y;x<S.length;x++){var E=S[x];E.enabled=!1,E.stop(),f.removeTrack(E)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=h.sent(),n=[],r=0,o=i;r<o.length;r++)s=o[r],s.kind==="videoinput"&&n.push({id:s.deviceId,label:s.label});return e(t),[2,n]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var i=function(r){for(var o=[],s=0,h=r;s<h.length;s++){var f=h[s];f.kind==="video"&&o.push({id:f.id,label:f.label})}e(o)},n=MediaStreamTrack;n.getSources(i)})},a})(),Is;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(Is||(Is={}));var O7=(function(){function a(){this.state=Is.NOT_STARTED,this.onGoingTransactionNewState=Is.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===Is.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Is.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===Is.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Is.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Is.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case Is.UNKNOWN:throw"Transition from unknown is not allowed";case Is.NOT_STARTED:this.failIfNewStateIs(e,[Is.PAUSED]);break;case Is.SCANNING:break;case Is.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,t){for(var i=0,n=t;i<n.length;i++){var r=n[i];if(e===r)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),z7=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===Is.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==Is.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Is.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===Is.PAUSED},a})(),F7=(function(){function a(){}return a.create=function(){return new z7(new O7)},a})(),N7=(function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},a(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}})(),ec=(function(a){N7(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(g7),B7=(function(){function a(e,t){this.logger=t,this.fps=ec.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ec.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?NL.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!bh(this.qrbox)},a.create=function(e,t){return new a(e,t)},a})(),N1=(function(){function a(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof t=="boolean"?this.verbose=t===!0:t&&(i=t,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new y7(this.verbose),this.qrcode=new k7(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=F7.create()}return a.prototype.start=function(e,t,i,n){var r=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;n?o=n:o=this.verbose?this.logger.log:function(){};var s=B7.create(t,this.logger);this.clearElement();var h=!1;s.videoConstraints&&(s.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var f=h,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:ec.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var x=this,S=this.stateManagerProxy.startTransition(Is.SCANNING);return new Promise(function(E,z){var D=f?s.videoConstraints:x.createVideoConstraints(e);if(!D){S.cancel(),z("videoConstraints should be defined");return}var F={};(!f||s.aspectRatio)&&(F.aspectRatio=s.aspectRatio);var U={onRenderSurfaceReady:function(G,Z){x.setupUi(G,Z,s),x.isScanning=!0,x.foreverScan(s,i,o)}};P7.failIfNotSupported().then(function(G){G.create(D).then(function(Z){return Z.render(r.element,F,U).then(function(ee){x.renderedCamera=ee,S.execute(),E(null)}).catch(function(ee){S.cancel(),z(ee)})}).catch(function(Z){S.cancel(),z(Gp.errorGettingUserMedia(Z))})}).catch(function(G){S.cancel(),z(Gp.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Is.PAUSED),this.showPausedState(),(bh(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Is.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Is.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var r=document.getElementById(ec.SHADED_REGION_ELEMENT_ID);r&&e.element.removeChild(r)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),i(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(i){return i.decodedText})},a.prototype.scanFileV2=function(e,t){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(bh(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,r){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var s=o.width,h=o.height,f=document.getElementById(i.elementId),y=f.clientWidth?f.clientWidth:ec.DEFAULT_WIDTH,x=Math.max(f.clientHeight?f.clientHeight:h,ec.FILE_SCAN_MIN_HEIGHT),S=i.computeCanvasDrawConfig(s,h,y,x);if(t){var E=i.createCanvasElement(y,x,"qr-canvas-visible");E.style.display="inline-block",f.appendChild(E);var z=E.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=y,z.canvas.height=x,z.drawImage(o,0,0,s,h,S.x,S.y,S.width,S.height)}var D=ec.FILE_SCAN_HIDDEN_CANVAS_PADDING,F=Math.max(o.width,S.width),U=Math.max(o.height,S.height),G=F+2*D,Z=U+2*D,ee=i.createCanvasElement(G,Z);f.appendChild(ee);var ie=ee.getContext("2d");if(!ie)throw"Unable to get 2d context from canvas";ie.canvas.width=G,ie.canvas.height=Z,ie.drawImage(o,0,0,s,h,D,D,F,U);try{i.qrcode.decodeRobustlyAsync(ee).then(function(le){n(ZT.createFromQrcodeResult(le))}).catch(r)}catch(le){r("QR code parse error, error = ".concat(le))}},o.onerror=r,o.onabort=r,o.onstalled=r,o.onsuspend=r,o.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return R7.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!NL.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var t=[On.QR_CODE,On.AZTEC,On.CODABAR,On.CODE_39,On.CODE_93,On.CODE_128,On.DATA_MATRIX,On.MAXICODE,On.ITF,On.EAN_13,On.EAN_8,On.PDF_417,On.RSS_14,On.RSS_EXPANDED,On.UPC_A,On.UPC_E,On.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],n=0,r=e.formatsToSupport;n<r.length;n++){var o=r[n];p7(o)?i.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(bh(e))return!0;if(!bh(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(bh(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return bh(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,t,i){var n=this,r=i.qrbox;this.validateQrboxConfig(r);var o=this.toQrdimensions(e,t,r),s=function(f){if(f<ec.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ec.MIN_QR_BOX_SIZE,"px.")},h=function(f){return f>e&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),f=e),f};s(o.width),s(o.height),o.width=h(o.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,t,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,t)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return i},a.prototype.setupUi=function(e,t,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,i);var n=bh(i.qrbox)?{width:e,height:t}:i.qrbox;this.validateQrboxConfig(n);var r=this.toQrdimensions(e,t,n);r.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=i.isShadedBoxEnabled()&&r.height<=t,s={x:0,y:0,width:e,height:t},h=o?this.getShadedRegionBounds(e,t,r):s,f=this.createCanvasElement(h.width,h.height),y={willReadFrequently:!0},x=f.getContext("2d",y);x.canvas.width=h.width,x.canvas.height=h.height,this.element.append(f),o&&this.possiblyInsertShadingElement(this.element,e,t,r),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=x,this.canvasElement=f},a.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Gp.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},a.prototype.scanContext=function(e,t){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(n){return e(n.text,ZT.createFromQrcodeResult(n)),i.possiblyUpdateShaders(!0),!0}).catch(function(n){i.possiblyUpdateShaders(!1);var r=Gp.codeParseError(n);return t(r,m7.createFrom(r)),!1})},a.prototype.foreverScan=function(e,t,i){var n=this;if(this.shouldScan&&this.renderedCamera){var r=this.renderedCamera.getSurface(),o=r.videoWidth/r.clientWidth,s=r.videoHeight/r.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*o,f=this.qrRegion.height*s,y=this.qrRegion.x*o,x=this.qrRegion.y*s;this.context.drawImage(r,y,x,h,f,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(e,t,i)},n.getTimeoutFps(e.fps))};this.scanContext(t,i).then(function(E){!E&&e.disableFlip!==!0?(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,i).finally(function(){S()})):S()}).catch(function(E){n.logger.logError("Error happend while scanning context",E),S()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",i="deviceId",n={user:!0,environment:!0},r="exact",o=function(z){if(z in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},s=Object.keys(e);if(s.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(s.length," keys");var h=Object.keys(e)[0];if(h!==t&&h!==i)throw"Only '".concat(t,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(h===t){var f=e.facingMode;if(typeof f=="string"){if(o(f))return{facingMode:f}}else if(typeof f=="object")if(r in f){if(o(f["".concat(r)]))return{facingMode:{exact:f["".concat(r)]}}}else throw"'facingMode' should be string or object with"+" ".concat(r," as key.");else{var y=typeof f;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var x=e.deviceId;if(typeof x=="string")return{deviceId:x};if(typeof x=="object"){if(r in x)return{deviceId:{exact:x["".concat(r)]}};throw"'deviceId' should be string or object with"+" ".concat(r," as key.")}else{var S=typeof x;throw"Invalid type of 'deviceId' = ".concat(S)}}}var E=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(E)},a.prototype.computeCanvasDrawConfig=function(e,t,i,n){if(e<=i&&t<=n){var r=(i-e)/2,o=(n-t)/2;return{x:r,y:o,width:e,height:t}}else{var s=e,h=t;return e>i&&(t=i/e*t,e=i),t>n&&(e=n/t*e,t=n),this.logger.log("Image downsampled from "+"".concat(s,"X").concat(h)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,i,n)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?ec.BORDER_SHADER_MATCH_COLOR:ec.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,t,i){var n=e,r=t,o=document.createElement("canvas");return o.style.width="".concat(n,"px"),o.style.height="".concat(r,"px"),o.style.display="none",o.id=bh(i)?"qr-canvas":i,o},a.prototype.getShadedRegionBounds=function(e,t,i){if(i.width>e||i.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(t-i.height)/2,width:i.width,height:i.height}},a.prototype.possiblyInsertShadingElement=function(e,t,i,n){if(!(t-n.width<1||i-n.height<1)){var r=document.createElement("div");r.style.position="absolute";var o=(t-n.width)/2,s=(i-n.height)/2;if(r.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderTop="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderBottom="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),r.style.boxSizing="border-box",r.style.top="0px",r.style.bottom="0px",r.style.left="0px",r.style.right="0px",r.id="".concat(ec.SHADED_REGION_ELEMENT_ID),t-n.width<11||i-n.height<11)this.hasBorderShaders=!1;else{var h=5,f=40;this.insertShaderBorders(r,f,h,-h,null,0,!0),this.insertShaderBorders(r,f,h,-h,null,0,!1),this.insertShaderBorders(r,f,h,null,-h,0,!0),this.insertShaderBorders(r,f,h,null,-h,0,!1),this.insertShaderBorders(r,h,f+h,-h,null,-h,!0),this.insertShaderBorders(r,h,f+h,null,-h,-h,!0),this.insertShaderBorders(r,h,f+h,-h,null,-h,!1),this.insertShaderBorders(r,h,f+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(r)}},a.prototype.insertShaderBorders=function(e,t,i,n,r,o,s){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=ec.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(t,"px"),h.style.height="".concat(i,"px"),n!==null&&(h.style.top="".concat(n,"px")),r!==null&&(h.style.bottom="".concat(r,"px")),s?h.style.left="".concat(o,"px"):h.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),aE;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(aE||(aE={}));class j7{constructor(e,t,i){this.elementId=e,this.onScanSuccess=t,this.onScanFailure=i,this.html5QrCode=null,this.config={fps:30,qrbox:{width:250,height:250}}}async start(){if(!this.isSecureContext())throw console.error("Camera access requires a secure context (HTTPS or localhost)."),new Error("Kamera memerlukan koneksi aman (HTTPS).");try{if(this.html5QrCode||(this.html5QrCode=new N1(this.elementId)),this.html5QrCode.isScanning){console.log("Scanner is already running.");return}await this.html5QrCode.start({facingMode:"environment"},this.config,(e,t)=>{this.onScanSuccess(e,t)},e=>{this.onScanFailure&&this.onScanFailure(e)})}catch(e){throw console.error("Failed to start camera:",e),e}}async stop(){if(this.html5QrCode&&(this.html5QrCode.isScanning||this.html5QrCode.getState()===2||this.html5QrCode.getState()===3))try{await this.html5QrCode.stop()}catch(e){console.error("Failed to stop camera:",e)}}async pause(){this.html5QrCode&&this.html5QrCode.isScanning&&this.html5QrCode.pause()}async resume(){if(this.html5QrCode)try{this.html5QrCode.getState()===3?this.html5QrCode.resume():(this.html5QrCode.getState()===1||this.html5QrCode.getState()===0)&&await this.start()}catch{try{this.html5QrCode.resume()}catch{await this.start()}}}isSecureContext(){return window.isSecureContext}getState(){return this.html5QrCode?this.html5QrCode.getState():0}}class V7{constructor(e){this.html5QrCode=e}async scanFile(e){if(!e)throw new Error("No file selected.");try{if(!this.html5QrCode)throw new Error("Scanner instance not initialized.");return await this.html5QrCode.scanFileV2(e,!1)}catch(t){throw console.error("Error scanning file:",t),t}}}function H7(a){a.data("qrScanner",()=>({scanner:null,uploader:null,isScanning:!1,isLoading:!1,manualInput:"",showModal:!1,isValid:!1,statusMessage:"",isProcessing:!1,scanData:{},recentScans:[],hasCameraPermission:!1,cameraError:null,async init(){console.log("QrScanner Component Initializing..."),window.isSecureContext||(console.warn("Insecure Context Detected"),this.cameraError="Koneksi tidak aman (HTTP). Kamera dinonaktifkan. Gunakan HTTPS atau localhost.");try{this.scanner=new j7("reader",this.onScanSuccess.bind(this),this.onScanFailure.bind(this)),this.uploader=new V7(null),this.$nextTick(async()=>{this.cameraError||await this.startScanner()})}catch(e){console.error("Component Init Error:",e),this.cameraError="Gagal inisialisasi komponen: "+e.message}},async startScanner(){console.log("Starting Scanner..."),this.isLoading=!0,this.cameraError=null;try{this.isScanning=!0,await this.scanner.start(),this.hasCameraPermission=!0,this.scanner.html5QrCode&&(this.uploader.html5QrCode=this.scanner.html5QrCode)}catch(e){console.error("Scanner Start Error:",e),this.isScanning=!1,this.hasCameraPermission=!1,e.name==="NotAllowedError"?this.cameraError="Izin kamera ditolak. Silakan izinkan akses kamera di browser.":e.toString().includes("secure context")?this.cameraError=e.message:this.cameraError="Gagal memulai kamera: "+e.message}finally{this.isLoading=!1}},async stopScanner(){this.scanner&&(await this.scanner.stop(),this.isScanning=!1)},async toggleScanner(){this.isScanning?await this.stopScanner():await this.startScanner()},onScanSuccess(e,t){this.showModal||this.isProcessing||(this.isProcessing=!0,console.log("Scan Success:",e),this.validateQr(e).finally(()=>{this.isProcessing=!1}))},onScanFailure(e){},async handleFileUpload(e){console.log("File Upload Initiated");const t=e.target.files[0];if(!t)return;const i=document.querySelector('label[for="qr-input-file"]');i&&(i.dataset.originalText||(i.dataset.originalText=i.innerHTML),i.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i> Memproses...');try{if(this.scanner)try{const o=this.scanner.getState();(o===2||o===3)&&(await this.scanner.stop(),this.isScanning=!1)}catch(o){console.warn("Stop Warning:",o)}await new Promise(o=>setTimeout(o,300)),this.uploader.html5QrCode||(this.uploader.html5QrCode=new N1("reader"));let n;try{n=await this.uploader.scanFile(t)}catch(o){if(o.toString().toLowerCase().includes("ongoing"))console.log("Conflict detected, forcing stop and retrying..."),this.uploader.html5QrCode&&(await this.uploader.html5QrCode.stop().catch(s=>{}),await this.uploader.html5QrCode.clear().catch(s=>{})),await new Promise(s=>setTimeout(s,500)),this.uploader.html5QrCode=new N1("reader"),n=await this.uploader.scanFile(t);else throw o}let r=n;typeof n=="object"&&n!==null&&(r=n.decodedText||JSON.stringify(n)),console.log("File Scan Result:",r),this.validateQr(r)}catch(n){console.error("File Scan Failed:",n),alert(`Gagal membaca QR Code.
Pastikan gambar jelas dan memiliki QR Code yang valid.
Detail: `+(n.message||n)),!this.showModal&&!this.cameraError&&this.startScanner()}finally{i&&i.dataset.originalText&&(i.innerHTML=i.dataset.originalText),e.target.value="",!this.showModal&&!this.cameraError&&setTimeout(()=>{this.showModal||this.startScanner()},500)}},async validateQr(e){try{const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),i=await fetch("/admin/scan",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Accept:"application/json"},body:JSON.stringify({qr_data:e})}),n=await i.json();if(i.ok)this.handleResult(!0,n.message,n.data);else{const r=n.data||{};!r.order_number&&n.detail?.order_number&&(r.order_number=n.detail.order_number),this.handleResult(!1,n.message,r)}}catch(t){console.error("Validation Error:",t),this.handleResult(!1,"System Error: "+t.message,{order_number:e})}},handleManualInput(){const e=this.manualInput.trim();if(!e)return;let t=e;e.startsWith("{")||(t=JSON.stringify({order_number:e})),this.validateQr(t)},handleResult(e,t,i){this.isValid=e,this.statusMessage=t,this.scanData=i||{},this.showModal=!0,this.manualInput="";const n=document.getElementById(e?"scan-success":"scan-error");n&&(n.currentTime=0,n.play().catch(r=>console.log("Audio play failed",r))),this.recentScans.unshift({valid:e,ticketName:i.ticket_name||"N/A",orderNumber:i.order_number||"Unknown",time:new Date().toLocaleTimeString(),timestamp:Date.now()}),this.recentScans.length>5&&this.recentScans.pop()},closeModal(){this.showModal=!1,this.cameraError||this.startScanner()},resumeScanner(){if(!this.cameraError)if(this.scanner&&this.scanner.html5QrCode){const e=this.scanner.getState();console.log("Resuming Scanner... Current State:",e),e===3?(this.scanner.resume(),this.isScanning=!0):(e===1||e===0)&&this.startScanner()}else this.startScanner()}}))}window.L=as;nw.registerPlugin(Oa);window.gsap=nw;window.ScrollTrigger=Oa;window.maplibregl=pO;window.Chart=Ew;bg.plugin(a7);bg.plugin(h7);bg.data("cultureSection",d7);bg.data("mapDrawer",f7);H7(bg);window.Alpine=bg;window.Livewire=fx;fx.start();document.addEventListener("livewire:navigated",()=>{window.ScrollTrigger&&window.ScrollTrigger.refresh()});
