var Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fd={exports:{}};var gk=Fd.exports,Wy;function _k(){return Wy||(Wy=1,(function(r,i){(function(l,c){c(i)})(gk,(function(l){var c="1.9.4";function u(d){var b,C,F,q;for(C=1,F=arguments.length;C<F;C++){q=arguments[C];for(b in q)d[b]=q[b]}return d}var p=Object.create||(function(){function d(){}return function(b){return d.prototype=b,new d}})();function f(d,b){var C=Array.prototype.slice;if(d.bind)return d.bind.apply(d,C.call(arguments,1));var F=C.call(arguments,2);return function(){return d.apply(b,F.length?F.concat(C.call(arguments)):arguments)}}var s=0;function S(d){return"_leaflet_id"in d||(d._leaflet_id=++s),d._leaflet_id}function M(d,b,C){var F,q,ie,be;return be=function(){F=!1,q&&(ie.apply(C,q),q=!1)},ie=function(){F?q=arguments:(d.apply(C,arguments),setTimeout(be,b),F=!0)},ie}function D(d,b,C){var F=b[1],q=b[0],ie=F-q;return d===F&&C?d:((d-q)%ie+ie)%ie+q}function j(){return!1}function V(d,b){if(b===!1)return d;var C=Math.pow(10,b===void 0?6:b);return Math.round(d*C)/C}function X(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function re(d){return X(d).split(/\s+/)}function ae(d,b){Object.prototype.hasOwnProperty.call(d,"options")||(d.options=d.options?p(d.options):{});for(var C in b)d.options[C]=b[C];return d.options}function H(d,b,C){var F=[];for(var q in d)F.push(encodeURIComponent(C?q.toUpperCase():q)+"="+encodeURIComponent(d[q]));return(!b||b.indexOf("?")===-1?"?":"&")+F.join("&")}var Se=/\{ *([\w_ -]+) *\}/g;function xe(d,b){return d.replace(Se,function(C,F){var q=b[F];if(q===void 0)throw new Error("No value provided for variable "+C);return typeof q=="function"&&(q=q(b)),q})}var Pe=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"};function Ve(d,b){for(var C=0;C<d.length;C++)if(d[C]===b)return C;return-1}var Ue="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function et(d){return window["webkit"+d]||window["moz"+d]||window["ms"+d]}var Je=0;function nt(d){var b=+new Date,C=Math.max(0,16-(b-Je));return Je=b+C,window.setTimeout(d,C)}var mt=window.requestAnimationFrame||et("RequestAnimationFrame")||nt,Tt=window.cancelAnimationFrame||et("CancelAnimationFrame")||et("CancelRequestAnimationFrame")||function(d){window.clearTimeout(d)};function vt(d,b,C){if(C&&mt===nt)d.call(b);else return mt.call(window,f(d,b))}function bt(d){d&&Tt.call(window,d)}var si={__proto__:null,extend:u,create:p,bind:f,get lastId(){return s},stamp:S,throttle:M,wrapNum:D,falseFn:j,formatNum:V,trim:X,splitWords:re,setOptions:ae,getParamString:H,template:xe,isArray:Pe,indexOf:Ve,emptyImageUrl:Ue,requestFn:mt,cancelFn:Tt,requestAnimFrame:vt,cancelAnimFrame:bt};function di(){}di.extend=function(d){var b=function(){ae(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},C=b.__super__=this.prototype,F=p(C);F.constructor=b,b.prototype=F;for(var q in this)Object.prototype.hasOwnProperty.call(this,q)&&q!=="prototype"&&q!=="__super__"&&(b[q]=this[q]);return d.statics&&u(b,d.statics),d.includes&&(Wt(d.includes),u.apply(null,[F].concat(d.includes))),u(F,d),delete F.statics,delete F.includes,F.options&&(F.options=C.options?p(C.options):{},u(F.options,d.options)),F._initHooks=[],F.callInitHooks=function(){if(!this._initHooksCalled){C.callInitHooks&&C.callInitHooks.call(this),this._initHooksCalled=!0;for(var ie=0,be=F._initHooks.length;ie<be;ie++)F._initHooks[ie].call(this)}},b},di.include=function(d){var b=this.prototype.options;return u(this.prototype,d),d.options&&(this.prototype.options=b,this.mergeOptions(d.options)),this},di.mergeOptions=function(d){return u(this.prototype.options,d),this},di.addInitHook=function(d){var b=Array.prototype.slice.call(arguments,1),C=typeof d=="function"?d:function(){this[d].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(C),this};function Wt(d){if(!(typeof L>"u"||!L||!L.Mixin)){d=Pe(d)?d:[d];for(var b=0;b<d.length;b++)d[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Bt={on:function(d,b,C){if(typeof d=="object")for(var F in d)this._on(F,d[F],b);else{d=re(d);for(var q=0,ie=d.length;q<ie;q++)this._on(d[q],b,C)}return this},off:function(d,b,C){if(!arguments.length)delete this._events;else if(typeof d=="object")for(var F in d)this._off(F,d[F],b);else{d=re(d);for(var q=arguments.length===1,ie=0,be=d.length;ie<be;ie++)q?this._off(d[ie]):this._off(d[ie],b,C)}return this},_on:function(d,b,C,F){if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}if(this._listens(d,b,C)===!1){C===this&&(C=void 0);var q={fn:b,ctx:C};F&&(q.once=!0),this._events=this._events||{},this._events[d]=this._events[d]||[],this._events[d].push(q)}},_off:function(d,b,C){var F,q,ie;if(this._events&&(F=this._events[d],!!F)){if(arguments.length===1){if(this._firingCount)for(q=0,ie=F.length;q<ie;q++)F[q].fn=j;delete this._events[d];return}if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}var be=this._listens(d,b,C);if(be!==!1){var Ae=F[be];this._firingCount&&(Ae.fn=j,this._events[d]=F=F.slice()),F.splice(be,1)}}},fire:function(d,b,C){if(!this.listens(d,C))return this;var F=u({},b,{type:d,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var q=this._events[d];if(q){this._firingCount=this._firingCount+1||1;for(var ie=0,be=q.length;ie<be;ie++){var Ae=q[ie],Ne=Ae.fn;Ae.once&&this.off(d,Ne,Ae.ctx),Ne.call(Ae.ctx||this,F)}this._firingCount--}}return C&&this._propagateEvent(F),this},listens:function(d,b,C,F){typeof d!="string"&&console.warn('"string" type argument expected');var q=b;typeof b!="function"&&(F=!!b,q=void 0,C=void 0);var ie=this._events&&this._events[d];if(ie&&ie.length&&this._listens(d,q,C)!==!1)return!0;if(F){for(var be in this._eventParents)if(this._eventParents[be].listens(d,b,C,F))return!0}return!1},_listens:function(d,b,C){if(!this._events)return!1;var F=this._events[d]||[];if(!b)return!!F.length;C===this&&(C=void 0);for(var q=0,ie=F.length;q<ie;q++)if(F[q].fn===b&&F[q].ctx===C)return q;return!1},once:function(d,b,C){if(typeof d=="object")for(var F in d)this._on(F,d[F],b,!0);else{d=re(d);for(var q=0,ie=d.length;q<ie;q++)this._on(d[q],b,C,!0)}return this},addEventParent:function(d){return this._eventParents=this._eventParents||{},this._eventParents[S(d)]=d,this},removeEventParent:function(d){return this._eventParents&&delete this._eventParents[S(d)],this},_propagateEvent:function(d){for(var b in this._eventParents)this._eventParents[b].fire(d.type,u({layer:d.target,propagatedFrom:d.target},d),!0)}};Bt.addEventListener=Bt.on,Bt.removeEventListener=Bt.clearAllEventListeners=Bt.off,Bt.addOneTimeEventListener=Bt.once,Bt.fireEvent=Bt.fire,Bt.hasEventListeners=Bt.listens;var Vt=di.extend(Bt);function xt(d,b,C){this.x=C?Math.round(d):d,this.y=C?Math.round(b):b}var Mt=Math.trunc||function(d){return d>0?Math.floor(d):Math.ceil(d)};xt.prototype={clone:function(){return new xt(this.x,this.y)},add:function(d){return this.clone()._add(wt(d))},_add:function(d){return this.x+=d.x,this.y+=d.y,this},subtract:function(d){return this.clone()._subtract(wt(d))},_subtract:function(d){return this.x-=d.x,this.y-=d.y,this},divideBy:function(d){return this.clone()._divideBy(d)},_divideBy:function(d){return this.x/=d,this.y/=d,this},multiplyBy:function(d){return this.clone()._multiplyBy(d)},_multiplyBy:function(d){return this.x*=d,this.y*=d,this},scaleBy:function(d){return new xt(this.x*d.x,this.y*d.y)},unscaleBy:function(d){return new xt(this.x/d.x,this.y/d.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Mt(this.x),this.y=Mt(this.y),this},distanceTo:function(d){d=wt(d);var b=d.x-this.x,C=d.y-this.y;return Math.sqrt(b*b+C*C)},equals:function(d){return d=wt(d),d.x===this.x&&d.y===this.y},contains:function(d){return d=wt(d),Math.abs(d.x)<=Math.abs(this.x)&&Math.abs(d.y)<=Math.abs(this.y)},toString:function(){return"Point("+V(this.x)+", "+V(this.y)+")"}};function wt(d,b,C){return d instanceof xt?d:Pe(d)?new xt(d[0],d[1]):d==null?d:typeof d=="object"&&"x"in d&&"y"in d?new xt(d.x,d.y):new xt(d,b,C)}function Ht(d,b){if(d)for(var C=b?[d,b]:d,F=0,q=C.length;F<q;F++)this.extend(C[F])}Ht.prototype={extend:function(d){var b,C;if(!d)return this;if(d instanceof xt||typeof d[0]=="number"||"x"in d)b=C=wt(d);else if(d=mi(d),b=d.min,C=d.max,!b||!C)return this;return!this.min&&!this.max?(this.min=b.clone(),this.max=C.clone()):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(C.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(C.y,this.max.y)),this},getCenter:function(d){return wt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,d)},getBottomLeft:function(){return wt(this.min.x,this.max.y)},getTopRight:function(){return wt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(d){var b,C;return typeof d[0]=="number"||d instanceof xt?d=wt(d):d=mi(d),d instanceof Ht?(b=d.min,C=d.max):b=C=d,b.x>=this.min.x&&C.x<=this.max.x&&b.y>=this.min.y&&C.y<=this.max.y},intersects:function(d){d=mi(d);var b=this.min,C=this.max,F=d.min,q=d.max,ie=q.x>=b.x&&F.x<=C.x,be=q.y>=b.y&&F.y<=C.y;return ie&&be},overlaps:function(d){d=mi(d);var b=this.min,C=this.max,F=d.min,q=d.max,ie=q.x>b.x&&F.x<C.x,be=q.y>b.y&&F.y<C.y;return ie&&be},isValid:function(){return!!(this.min&&this.max)},pad:function(d){var b=this.min,C=this.max,F=Math.abs(b.x-C.x)*d,q=Math.abs(b.y-C.y)*d;return mi(wt(b.x-F,b.y-q),wt(C.x+F,C.y+q))},equals:function(d){return d?(d=mi(d),this.min.equals(d.getTopLeft())&&this.max.equals(d.getBottomRight())):!1}};function mi(d,b){return!d||d instanceof Ht?d:new Ht(d,b)}function ki(d,b){if(d)for(var C=b?[d,b]:d,F=0,q=C.length;F<q;F++)this.extend(C[F])}ki.prototype={extend:function(d){var b=this._southWest,C=this._northEast,F,q;if(d instanceof Ct)F=d,q=d;else if(d instanceof ki){if(F=d._southWest,q=d._northEast,!F||!q)return this}else return d?this.extend(Pt(d)||Jt(d)):this;return!b&&!C?(this._southWest=new Ct(F.lat,F.lng),this._northEast=new Ct(q.lat,q.lng)):(b.lat=Math.min(F.lat,b.lat),b.lng=Math.min(F.lng,b.lng),C.lat=Math.max(q.lat,C.lat),C.lng=Math.max(q.lng,C.lng)),this},pad:function(d){var b=this._southWest,C=this._northEast,F=Math.abs(b.lat-C.lat)*d,q=Math.abs(b.lng-C.lng)*d;return new ki(new Ct(b.lat-F,b.lng-q),new Ct(C.lat+F,C.lng+q))},getCenter:function(){return new Ct((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ct(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ct(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(d){typeof d[0]=="number"||d instanceof Ct||"lat"in d?d=Pt(d):d=Jt(d);var b=this._southWest,C=this._northEast,F,q;return d instanceof ki?(F=d.getSouthWest(),q=d.getNorthEast()):F=q=d,F.lat>=b.lat&&q.lat<=C.lat&&F.lng>=b.lng&&q.lng<=C.lng},intersects:function(d){d=Jt(d);var b=this._southWest,C=this._northEast,F=d.getSouthWest(),q=d.getNorthEast(),ie=q.lat>=b.lat&&F.lat<=C.lat,be=q.lng>=b.lng&&F.lng<=C.lng;return ie&&be},overlaps:function(d){d=Jt(d);var b=this._southWest,C=this._northEast,F=d.getSouthWest(),q=d.getNorthEast(),ie=q.lat>b.lat&&F.lat<C.lat,be=q.lng>b.lng&&F.lng<C.lng;return ie&&be},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(d,b){return d?(d=Jt(d),this._southWest.equals(d.getSouthWest(),b)&&this._northEast.equals(d.getNorthEast(),b)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Jt(d,b){return d instanceof ki?d:new ki(d,b)}function Ct(d,b,C){if(isNaN(d)||isNaN(b))throw new Error("Invalid LatLng object: ("+d+", "+b+")");this.lat=+d,this.lng=+b,C!==void 0&&(this.alt=+C)}Ct.prototype={equals:function(d,b){if(!d)return!1;d=Pt(d);var C=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return C<=(b===void 0?1e-9:b)},toString:function(d){return"LatLng("+V(this.lat,d)+", "+V(this.lng,d)+")"},distanceTo:function(d){return Ii.distance(this,Pt(d))},wrap:function(){return Ii.wrapLatLng(this)},toBounds:function(d){var b=180*d/40075017,C=b/Math.cos(Math.PI/180*this.lat);return Jt([this.lat-b,this.lng-C],[this.lat+b,this.lng+C])},clone:function(){return new Ct(this.lat,this.lng,this.alt)}};function Pt(d,b,C){return d instanceof Ct?d:Pe(d)&&typeof d[0]!="object"?d.length===3?new Ct(d[0],d[1],d[2]):d.length===2?new Ct(d[0],d[1]):null:d==null?d:typeof d=="object"&&"lat"in d?new Ct(d.lat,"lng"in d?d.lng:d.lon,d.alt):b===void 0?null:new Ct(d,b,C)}var dn={latLngToPoint:function(d,b){var C=this.projection.project(d),F=this.scale(b);return this.transformation._transform(C,F)},pointToLatLng:function(d,b){var C=this.scale(b),F=this.transformation.untransform(d,C);return this.projection.unproject(F)},project:function(d){return this.projection.project(d)},unproject:function(d){return this.projection.unproject(d)},scale:function(d){return 256*Math.pow(2,d)},zoom:function(d){return Math.log(d/256)/Math.LN2},getProjectedBounds:function(d){if(this.infinite)return null;var b=this.projection.bounds,C=this.scale(d),F=this.transformation.transform(b.min,C),q=this.transformation.transform(b.max,C);return new Ht(F,q)},infinite:!1,wrapLatLng:function(d){var b=this.wrapLng?D(d.lng,this.wrapLng,!0):d.lng,C=this.wrapLat?D(d.lat,this.wrapLat,!0):d.lat,F=d.alt;return new Ct(C,b,F)},wrapLatLngBounds:function(d){var b=d.getCenter(),C=this.wrapLatLng(b),F=b.lat-C.lat,q=b.lng-C.lng;if(F===0&&q===0)return d;var ie=d.getSouthWest(),be=d.getNorthEast(),Ae=new Ct(ie.lat-F,ie.lng-q),Ne=new Ct(be.lat-F,be.lng-q);return new ki(Ae,Ne)}},Ii=u({},dn,{wrapLng:[-180,180],R:6371e3,distance:function(d,b){var C=Math.PI/180,F=d.lat*C,q=b.lat*C,ie=Math.sin((b.lat-d.lat)*C/2),be=Math.sin((b.lng-d.lng)*C/2),Ae=ie*ie+Math.cos(F)*Math.cos(q)*be*be,Ne=2*Math.atan2(Math.sqrt(Ae),Math.sqrt(1-Ae));return this.R*Ne}}),Ba=6378137,Cn={R:Ba,MAX_LATITUDE:85.0511287798,project:function(d){var b=Math.PI/180,C=this.MAX_LATITUDE,F=Math.max(Math.min(C,d.lat),-C),q=Math.sin(F*b);return new xt(this.R*d.lng*b,this.R*Math.log((1+q)/(1-q))/2)},unproject:function(d){var b=180/Math.PI;return new Ct((2*Math.atan(Math.exp(d.y/this.R))-Math.PI/2)*b,d.x*b/this.R)},bounds:(function(){var d=Ba*Math.PI;return new Ht([-d,-d],[d,d])})()};function tr(d,b,C,F){if(Pe(d)){this._a=d[0],this._b=d[1],this._c=d[2],this._d=d[3];return}this._a=d,this._b=b,this._c=C,this._d=F}tr.prototype={transform:function(d,b){return this._transform(d.clone(),b)},_transform:function(d,b){return b=b||1,d.x=b*(this._a*d.x+this._b),d.y=b*(this._c*d.y+this._d),d},untransform:function(d,b){return b=b||1,new xt((d.x/b-this._b)/this._a,(d.y/b-this._d)/this._c)}};function xn(d,b,C,F){return new tr(d,b,C,F)}var Vr=u({},Ii,{code:"EPSG:3857",projection:Cn,transformation:(function(){var d=.5/(Math.PI*Cn.R);return xn(d,.5,-d,.5)})()}),gn=u({},Vr,{code:"EPSG:900913"});function oa(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}function Ma(d,b){var C="",F,q,ie,be,Ae,Ne;for(F=0,ie=d.length;F<ie;F++){for(Ae=d[F],q=0,be=Ae.length;q<be;q++)Ne=Ae[q],C+=(q?"L":"M")+Ne.x+" "+Ne.y;C+=b?je.svg?"z":"x":""}return C||"M0 0"}var Ci=document.documentElement.style,Ca="ActiveXObject"in window,Nr=Ca&&!document.addEventListener,Ur="msLaunchUri"in navigator&&!("documentMode"in document),$a=Yn("webkit"),ga=Yn("android"),Gr=Yn("android 2")||Yn("android 3"),ms=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Kn=ga&&Yn("Google")&&ms<537&&!("AudioNode"in window),Le=!!window.opera,Q=!Ur&&Yn("chrome"),J=Yn("gecko")&&!$a&&!Le&&!Ca,se=!Q&&Yn("safari"),ve=Yn("phantom"),we="OTransition"in Ci,Ie=navigator.platform.indexOf("Win")===0,Ce=Ca&&"transition"in Ci,Te="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Gr,Fe="MozPerspective"in Ci,Ye=!window.L_DISABLE_3D&&(Ce||Te||Fe)&&!we&&!ve,Ze=typeof orientation<"u"||Yn("mobile"),ut=Ze&&$a,gt=Ze&&Te,Lt=!window.PointerEvent&&window.MSPointerEvent,oi=!!(window.PointerEvent||Lt),Qt="ontouchstart"in window||!!window.TouchEvent,De=!window.L_NO_TOUCH&&(Qt||oi),gi=Ze&&Le,bn=Ze&&J,Et=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,li=(function(){var d=!1;try{var b=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassiveEventSupport",j,b),window.removeEventListener("testPassiveEventSupport",j,b)}catch{}return d})(),wn=(function(){return!!document.createElement("canvas").getContext})(),_i=!!(document.createElementNS&&oa("svg").createSVGRect),Fi=!!_i&&(function(){var d=document.createElement("div");return d.innerHTML="<svg/>",(d.firstChild&&d.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),yi=!_i&&(function(){try{var d=document.createElement("div");d.innerHTML='<v:shape adj="1"/>';var b=d.firstChild;return b.style.behavior="url(#default#VML)",b&&typeof b.adj=="object"}catch{return!1}})(),rn=navigator.platform.indexOf("Mac")===0,Xs=navigator.platform.indexOf("Linux")===0;function Yn(d){return navigator.userAgent.toLowerCase().indexOf(d)>=0}var je={ie:Ca,ielt9:Nr,edge:Ur,webkit:$a,android:ga,android23:Gr,androidStock:Kn,opera:Le,chrome:Q,gecko:J,safari:se,phantom:ve,opera12:we,win:Ie,ie3d:Ce,webkit3d:Te,gecko3d:Fe,any3d:Ye,mobile:Ze,mobileWebkit:ut,mobileWebkit3d:gt,msPointer:Lt,pointer:oi,touch:De,touchNative:Qt,mobileOpera:gi,mobileGecko:bn,retina:Et,passiveEvents:li,canvas:wn,svg:_i,vml:yi,inlineSvg:Fi,mac:rn,linux:Xs},Ln=je.msPointer?"MSPointerDown":"pointerdown",En=je.msPointer?"MSPointerMove":"pointermove",Js=je.msPointer?"MSPointerUp":"pointerup",la=je.msPointer?"MSPointerCancel":"pointercancel",st={touchstart:Ln,touchmove:En,touchend:Js,touchcancel:la},Ot={touchstart:eo,touchmove:nr,touchend:nr,touchcancel:nr},It={},Xn=!1;function Fo(d,b,C){return b==="touchstart"&&Oo(),Ot[b]?(C=Ot[b].bind(this,C),d.addEventListener(st[b],C,!1),C):(console.warn("wrong event specified:",b),j)}function ir(d,b,C){if(!st[b]){console.warn("wrong event specified:",b);return}d.removeEventListener(st[b],C,!1)}function Rt(d){It[d.pointerId]=d}function Qs(d){It[d.pointerId]&&(It[d.pointerId]=d)}function gs(d){delete It[d.pointerId]}function Oo(){Xn||(document.addEventListener(Ln,Rt,!0),document.addEventListener(En,Qs,!0),document.addEventListener(Js,gs,!0),document.addEventListener(la,gs,!0),Xn=!0)}function nr(d,b){if(b.pointerType!==(b.MSPOINTER_TYPE_MOUSE||"mouse")){b.touches=[];for(var C in It)b.touches.push(It[C]);b.changedTouches=[b],d(b)}}function eo(d,b){b.MSPOINTER_TYPE_TOUCH&&b.pointerType===b.MSPOINTER_TYPE_TOUCH&&Kt(b),nr(d,b)}function _s(d){var b={},C,F;for(F in d)C=d[F],b[F]=C&&C.bind?C.bind(d):C;return d=b,b.type="dblclick",b.detail=2,b.isTrusted=!1,b._simulated=!0,b}var to=200;function Vn(d,b){d.addEventListener("dblclick",b);var C=0,F;function q(ie){if(ie.detail!==1){F=ie.detail;return}if(!(ie.pointerType==="mouse"||ie.sourceCapabilities&&!ie.sourceCapabilities.firesTouchEvents)){var be=Ea(ie);if(!(be.some(function(Ne){return Ne instanceof HTMLLabelElement&&Ne.attributes.for})&&!be.some(function(Ne){return Ne instanceof HTMLInputElement||Ne instanceof HTMLSelectElement}))){var Ae=Date.now();Ae-C<=to?(F++,F===2&&b(_s(ie))):F=1,C=Ae}}}return d.addEventListener("click",q),{dblclick:b,simDblclick:q}}function ui(d,b){d.removeEventListener("dblclick",b.dblclick),d.removeEventListener("click",b.simDblclick)}var ys=xs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Va=xs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vs=Va==="webkitTransition"||Va==="OTransition"?Va+"End":"transitionend";function Tr(d){return typeof d=="string"?document.getElementById(d):d}function Nn(d,b){var C=d.style[b]||d.currentStyle&&d.currentStyle[b];if((!C||C==="auto")&&document.defaultView){var F=document.defaultView.getComputedStyle(d,null);C=F?F[b]:null}return C==="auto"?null:C}function ti(d,b,C){var F=document.createElement(d);return F.className=b||"",C&&C.appendChild(F),F}function ci(d){var b=d.parentNode;b&&b.removeChild(d)}function qr(d){for(;d.firstChild;)d.removeChild(d.firstChild)}function vi(d){var b=d.parentNode;b&&b.lastChild!==d&&b.appendChild(d)}function Zr(d){var b=d.parentNode;b&&b.firstChild!==d&&b.insertBefore(d,b.firstChild)}function jo(d,b){if(d.classList!==void 0)return d.classList.contains(b);var C=io(d);return C.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(C)}function jt(d,b){if(d.classList!==void 0)for(var C=re(b),F=0,q=C.length;F<q;F++)d.classList.add(C[F]);else if(!jo(d,b)){var ie=io(d);Bo(d,(ie?ie+" ":"")+b)}}function Ui(d,b){d.classList!==void 0?d.classList.remove(b):Bo(d,X((" "+io(d)+" ").replace(" "+b+" "," ")))}function Bo(d,b){d.className.baseVal===void 0?d.className=b:d.className.baseVal=b}function io(d){return d.correspondingElement&&(d=d.correspondingElement),d.className.baseVal===void 0?d.className:d.className.baseVal}function Un(d,b){"opacity"in d.style?d.style.opacity=b:"filter"in d.style&&Sl(d,b)}function Sl(d,b){var C=!1,F="DXImageTransform.Microsoft.Alpha";try{C=d.filters.item(F)}catch{if(b===1)return}b=Math.round(b*100),C?(C.Enabled=b!==100,C.Opacity=b):d.style.filter+=" progid:"+F+"(opacity="+b+")"}function xs(d){for(var b=document.documentElement.style,C=0;C<d.length;C++)if(d[C]in b)return d[C];return!1}function ar(d,b,C){var F=b||new xt(0,0);d.style[ys]=(je.ie3d?"translate("+F.x+"px,"+F.y+"px)":"translate3d("+F.x+"px,"+F.y+"px,0)")+(C?" scale("+C+")":"")}function Gi(d,b){d._leaflet_pos=b,je.any3d?ar(d,b):(d.style.left=b.x+"px",d.style.top=b.y+"px")}function Wr(d){return d._leaflet_pos||new xt(0,0)}var rr,Pr,$o;if("onselectstart"in document)rr=function(){St(window,"selectstart",Kt)},Pr=function(){dt(window,"selectstart",Kt)};else{var Na=xs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rr=function(){if(Na){var d=document.documentElement.style;$o=d[Na],d[Na]="none"}},Pr=function(){Na&&(document.documentElement.style[Na]=$o,$o=void 0)}}function no(){St(window,"dragstart",Kt)}function Hr(){dt(window,"dragstart",Kt)}var La,Mr;function Ft(d){for(;d.tabIndex===-1;)d=d.parentNode;d.style&&(bs(),La=d,Mr=d.style.outlineStyle,d.style.outlineStyle="none",St(window,"keydown",bs))}function bs(){La&&(La.style.outlineStyle=Mr,La=void 0,Mr=void 0,dt(window,"keydown",bs))}function wu(d){do d=d.parentNode;while((!d.offsetWidth||!d.offsetHeight)&&d!==document.body);return d}function ao(d){var b=d.getBoundingClientRect();return{x:b.width/d.offsetWidth||1,y:b.height/d.offsetHeight||1,boundingClientRect:b}}var Jn={__proto__:null,TRANSFORM:ys,TRANSITION:Va,TRANSITION_END:vs,get:Tr,getStyle:Nn,create:ti,remove:ci,empty:qr,toFront:vi,toBack:Zr,hasClass:jo,addClass:jt,removeClass:Ui,setClass:Bo,getClass:io,setOpacity:Un,testProp:xs,setTransform:ar,setPosition:Gi,getPosition:Wr,get disableTextSelection(){return rr},get enableTextSelection(){return Pr},disableImageDrag:no,enableImageDrag:Hr,preventOutline:Ft,restoreOutline:bs,getSizedParentNode:wu,getScale:ao};function St(d,b,C,F){if(b&&typeof b=="object")for(var q in b)kn(d,q,b[q],C);else{b=re(b);for(var ie=0,be=b.length;ie<be;ie++)kn(d,b[ie],C,F)}return this}var ii="_leaflet_events";function dt(d,b,C,F){if(arguments.length===1)fi(d),delete d[ii];else if(b&&typeof b=="object")for(var q in b)Gn(d,q,b[q],C);else if(b=re(b),arguments.length===2)fi(d,function(Ae){return Ve(b,Ae)!==-1});else for(var ie=0,be=b.length;ie<be;ie++)Gn(d,b[ie],C,F);return this}function fi(d,b){for(var C in d[ii]){var F=C.split(/\d/)[0];(!b||b(F))&&Gn(d,F,null,null,C)}}var Ua={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function kn(d,b,C,F){var q=b+S(C)+(F?"_"+S(F):"");if(d[ii]&&d[ii][q])return this;var ie=function(Ae){return C.call(F||d,Ae||window.event)},be=ie;!je.touchNative&&je.pointer&&b.indexOf("touch")===0?ie=Fo(d,b,ie):je.touch&&b==="dblclick"?ie=Vn(d,ie):"addEventListener"in d?b==="touchstart"||b==="touchmove"||b==="wheel"||b==="mousewheel"?d.addEventListener(Ua[b]||b,ie,je.passiveEvents?{passive:!1}:!1):b==="mouseenter"||b==="mouseleave"?(ie=function(Ae){Ae=Ae||window.event,Aa(d,Ae)&&be(Ae)},d.addEventListener(Ua[b],ie,!1)):d.addEventListener(b,be,!1):d.attachEvent("on"+b,ie),d[ii]=d[ii]||{},d[ii][q]=ie}function Gn(d,b,C,F,q){q=q||b+S(C)+(F?"_"+S(F):"");var ie=d[ii]&&d[ii][q];if(!ie)return this;!je.touchNative&&je.pointer&&b.indexOf("touch")===0?ir(d,b,ie):je.touch&&b==="dblclick"?ui(d,ie):"removeEventListener"in d?d.removeEventListener(Ua[b]||b,ie,!1):d.detachEvent("on"+b,ie),d[ii][q]=null}function Yi(d){return d.stopPropagation?d.stopPropagation():d.originalEvent?d.originalEvent._stopped=!0:d.cancelBubble=!0,this}function Cr(d){return kn(d,"wheel",Yi),this}function _a(d){return St(d,"mousedown touchstart dblclick contextmenu",Yi),d._leaflet_disable_click=!0,this}function Kt(d){return d.preventDefault?d.preventDefault():d.returnValue=!1,this}function ua(d){return Kt(d),Yi(d),this}function Ea(d){if(d.composedPath)return d.composedPath();for(var b=[],C=d.target;C;)b.push(C),C=C.parentNode;return b}function ro(d,b){if(!b)return new xt(d.clientX,d.clientY);var C=ao(b),F=C.boundingClientRect;return new xt((d.clientX-F.left)/C.x-b.clientLeft,(d.clientY-F.top)/C.y-b.clientTop)}var Qn=je.linux&&je.chrome?window.devicePixelRatio:je.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Lr(d){return je.edge?d.wheelDeltaY/2:d.deltaY&&d.deltaMode===0?-d.deltaY/Qn:d.deltaY&&d.deltaMode===1?-d.deltaY*20:d.deltaY&&d.deltaMode===2?-d.deltaY*60:d.deltaX||d.deltaZ?0:d.wheelDelta?(d.wheelDeltaY||d.wheelDelta)/2:d.detail&&Math.abs(d.detail)<32765?-d.detail*20:d.detail?d.detail/-32765*60:0}function Aa(d,b){var C=b.relatedTarget;if(!C)return!0;try{for(;C&&C!==d;)C=C.parentNode}catch{return!1}return C!==d}var ku={__proto__:null,on:St,off:dt,stopPropagation:Yi,disableScrollPropagation:Cr,disableClickPropagation:_a,preventDefault:Kt,stop:ua,getPropagationPath:Ea,getMousePosition:ro,getWheelDelta:Lr,isExternalTarget:Aa,addListener:St,removeListener:dt},Vo=Vt.extend({run:function(d,b,C,F){this.stop(),this._el=d,this._inProgress=!0,this._duration=C||.25,this._easeOutPower=1/Math.max(F||.5,.2),this._startPos=Wr(d),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=vt(this._animate,this),this._step()},_step:function(d){var b=+new Date-this._startTime,C=this._duration*1e3;b<C?this._runFrame(this._easeOut(b/C),d):(this._runFrame(1),this._complete())},_runFrame:function(d,b){var C=this._startPos.add(this._offset.multiplyBy(d));b&&C._round(),Gi(this._el,C),this.fire("step")},_complete:function(){bt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(d){return 1-Math.pow(1-d,this._easeOutPower)}}),Ut=Vt.extend({options:{crs:Vr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,b){b=ae(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(d),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==void 0&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==void 0&&this.setView(Pt(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Va&&je.any3d&&!je.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),St(this._proxy,vs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(d,b,C){if(b=b===void 0?this._zoom:this._limitZoom(b),d=this._limitCenter(Pt(d),b,this.options.maxBounds),C=C||{},this._stop(),this._loaded&&!C.reset&&C!==!0){C.animate!==void 0&&(C.zoom=u({animate:C.animate},C.zoom),C.pan=u({animate:C.animate,duration:C.duration},C.pan));var F=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(d,b,C.zoom):this._tryAnimatedPan(d,C.pan);if(F)return clearTimeout(this._sizeTimer),this}return this._resetView(d,b,C.pan&&C.pan.noMoveStart),this},setZoom:function(d,b){return this._loaded?this.setView(this.getCenter(),d,{zoom:b}):(this._zoom=d,this)},zoomIn:function(d,b){return d=d||(je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+d,b)},zoomOut:function(d,b){return d=d||(je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-d,b)},setZoomAround:function(d,b,C){var F=this.getZoomScale(b),q=this.getSize().divideBy(2),ie=d instanceof xt?d:this.latLngToContainerPoint(d),be=ie.subtract(q).multiplyBy(1-1/F),Ae=this.containerPointToLatLng(q.add(be));return this.setView(Ae,b,{zoom:C})},_getBoundsCenterZoom:function(d,b){b=b||{},d=d.getBounds?d.getBounds():Jt(d);var C=wt(b.paddingTopLeft||b.padding||[0,0]),F=wt(b.paddingBottomRight||b.padding||[0,0]),q=this.getBoundsZoom(d,!1,C.add(F));if(q=typeof b.maxZoom=="number"?Math.min(b.maxZoom,q):q,q===1/0)return{center:d.getCenter(),zoom:q};var ie=F.subtract(C).divideBy(2),be=this.project(d.getSouthWest(),q),Ae=this.project(d.getNorthEast(),q),Ne=this.unproject(be.add(Ae).divideBy(2).add(ie),q);return{center:Ne,zoom:q}},fitBounds:function(d,b){if(d=Jt(d),!d.isValid())throw new Error("Bounds are not valid.");var C=this._getBoundsCenterZoom(d,b);return this.setView(C.center,C.zoom,b)},fitWorld:function(d){return this.fitBounds([[-90,-180],[90,180]],d)},panTo:function(d,b){return this.setView(d,this._zoom,{pan:b})},panBy:function(d,b){if(d=wt(d).round(),b=b||{},!d.x&&!d.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(d))return this._resetView(this.unproject(this.project(this.getCenter()).add(d)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Vo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){jt(this._mapPane,"leaflet-pan-anim");var C=this._getMapPanePos().subtract(d).round();this._panAnim.run(this._mapPane,C,b.duration||.25,b.easeLinearity)}else this._rawPanBy(d),this.fire("move").fire("moveend");return this},flyTo:function(d,b,C){if(C=C||{},C.animate===!1||!je.any3d)return this.setView(d,b,C);this._stop();var F=this.project(this.getCenter()),q=this.project(d),ie=this.getSize(),be=this._zoom;d=Pt(d),b=b===void 0?be:b;var Ae=Math.max(ie.x,ie.y),Ne=Ae*this.getZoomScale(be,b),Qe=q.distanceTo(F)||1,pt=1.42,At=pt*pt;function qt(ji){var zr=ji?-1:1,Qo=ji?Ne:Ae,Rr=Ne*Ne-Ae*Ae+zr*At*At*Qe*Qe,go=2*Qo*At*Qe,pr=Rr/go,as=Math.sqrt(pr*pr+1)-pr,Uu=as<1e-9?-18:Math.log(as);return Uu}function cn(ji){return(Math.exp(ji)-Math.exp(-ji))/2}function Ji(ji){return(Math.exp(ji)+Math.exp(-ji))/2}function fa(ji){return cn(ji)/Ji(ji)}var qn=qt(0);function Ha(ji){return Ae*(Ji(qn)/Ji(qn+pt*ji))}function Jo(ji){return Ae*(Ji(qn)*fa(qn+pt*ji)-cn(qn))/At}function Vu(ji){return 1-Math.pow(1-ji,1.5)}var Nu=Date.now(),Oi=(qt(1)-qn)/pt,ns=C.duration?1e3*C.duration:1e3*Oi*.8;function ta(){var ji=(Date.now()-Nu)/ns,zr=Vu(ji)*Oi;ji<=1?(this._flyToFrame=vt(ta,this),this._move(this.unproject(F.add(q.subtract(F).multiplyBy(Jo(zr)/Qe)),be),this.getScaleZoom(Ae/Ha(zr),be),{flyTo:!0})):this._move(d,b)._moveEnd(!0)}return this._moveStart(!0,C.noMoveStart),ta.call(this),this},flyToBounds:function(d,b){var C=this._getBoundsCenterZoom(d,b);return this.flyTo(C.center,C.zoom,b)},setMaxBounds:function(d){return d=Jt(d),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),d.isValid()?(this.options.maxBounds=d,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(d){var b=this.options.minZoom;return this.options.minZoom=d,this._loaded&&b!==d&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(d):this},setMaxZoom:function(d){var b=this.options.maxZoom;return this.options.maxZoom=d,this._loaded&&b!==d&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(d):this},panInsideBounds:function(d,b){this._enforcingBounds=!0;var C=this.getCenter(),F=this._limitCenter(C,this._zoom,Jt(d));return C.equals(F)||this.panTo(F,b),this._enforcingBounds=!1,this},panInside:function(d,b){b=b||{};var C=wt(b.paddingTopLeft||b.padding||[0,0]),F=wt(b.paddingBottomRight||b.padding||[0,0]),q=this.project(this.getCenter()),ie=this.project(d),be=this.getPixelBounds(),Ae=mi([be.min.add(C),be.max.subtract(F)]),Ne=Ae.getSize();if(!Ae.contains(ie)){this._enforcingBounds=!0;var Qe=ie.subtract(Ae.getCenter()),pt=Ae.extend(ie).getSize().subtract(Ne);q.x+=Qe.x<0?-pt.x:pt.x,q.y+=Qe.y<0?-pt.y:pt.y,this.panTo(this.unproject(q),b),this._enforcingBounds=!1}return this},invalidateSize:function(d){if(!this._loaded)return this;d=u({animate:!1,pan:!0},d===!0?{animate:!0}:d);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var C=this.getSize(),F=b.divideBy(2).round(),q=C.divideBy(2).round(),ie=F.subtract(q);return!ie.x&&!ie.y?this:(d.animate&&d.pan?this.panBy(ie):(d.pan&&this._rawPanBy(ie),this.fire("move"),d.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:C}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(d){if(d=this._locateOptions=u({timeout:1e4,watch:!1},d),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=f(this._handleGeolocationResponse,this),C=f(this._handleGeolocationError,this);return d.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,C,d):navigator.geolocation.getCurrentPosition(b,C,d),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(d){if(this._container._leaflet_id){var b=d.code,C=d.message||(b===1?"permission denied":b===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+C+"."})}},_handleGeolocationResponse:function(d){if(this._container._leaflet_id){var b=d.coords.latitude,C=d.coords.longitude,F=new Ct(b,C),q=F.toBounds(d.coords.accuracy*2),ie=this._locateOptions;if(ie.setView){var be=this.getBoundsZoom(q);this.setView(F,ie.maxZoom?Math.min(be,ie.maxZoom):be)}var Ae={latlng:F,bounds:q,timestamp:d.timestamp};for(var Ne in d.coords)typeof d.coords[Ne]=="number"&&(Ae[Ne]=d.coords[Ne]);this.fire("locationfound",Ae)}},addHandler:function(d,b){if(!b)return this;var C=this[d]=new b(this);return this._handlers.push(C),this.options[d]&&C.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ci(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(bt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var d;for(d in this._layers)this._layers[d].remove();for(d in this._panes)ci(this._panes[d]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(d,b){var C="leaflet-pane"+(d?" leaflet-"+d.replace("Pane","")+"-pane":""),F=ti("div",C,b||this._mapPane);return d&&(this._panes[d]=F),F},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var d=this.getPixelBounds(),b=this.unproject(d.getBottomLeft()),C=this.unproject(d.getTopRight());return new ki(b,C)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,b,C){d=Jt(d),C=wt(C||[0,0]);var F=this.getZoom()||0,q=this.getMinZoom(),ie=this.getMaxZoom(),be=d.getNorthWest(),Ae=d.getSouthEast(),Ne=this.getSize().subtract(C),Qe=mi(this.project(Ae,F),this.project(be,F)).getSize(),pt=je.any3d?this.options.zoomSnap:1,At=Ne.x/Qe.x,qt=Ne.y/Qe.y,cn=b?Math.max(At,qt):Math.min(At,qt);return F=this.getScaleZoom(cn,F),pt&&(F=Math.round(F/(pt/100))*(pt/100),F=b?Math.ceil(F/pt)*pt:Math.floor(F/pt)*pt),Math.max(q,Math.min(ie,F))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new xt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,b){var C=this._getTopLeftPoint(d,b);return new Ht(C,C.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(d){return this.options.crs.getProjectedBounds(d===void 0?this.getZoom():d)},getPane:function(d){return typeof d=="string"?this._panes[d]:d},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,b){var C=this.options.crs;return b=b===void 0?this._zoom:b,C.scale(d)/C.scale(b)},getScaleZoom:function(d,b){var C=this.options.crs;b=b===void 0?this._zoom:b;var F=C.zoom(d*C.scale(b));return isNaN(F)?1/0:F},project:function(d,b){return b=b===void 0?this._zoom:b,this.options.crs.latLngToPoint(Pt(d),b)},unproject:function(d,b){return b=b===void 0?this._zoom:b,this.options.crs.pointToLatLng(wt(d),b)},layerPointToLatLng:function(d){var b=wt(d).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(d){var b=this.project(Pt(d))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(d){return this.options.crs.wrapLatLng(Pt(d))},wrapLatLngBounds:function(d){return this.options.crs.wrapLatLngBounds(Jt(d))},distance:function(d,b){return this.options.crs.distance(Pt(d),Pt(b))},containerPointToLayerPoint:function(d){return wt(d).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(d){return wt(d).add(this._getMapPanePos())},containerPointToLatLng:function(d){var b=this.containerPointToLayerPoint(wt(d));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(d){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Pt(d)))},mouseEventToContainerPoint:function(d){return ro(d,this._container)},mouseEventToLayerPoint:function(d){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(d))},mouseEventToLatLng:function(d){return this.layerPointToLatLng(this.mouseEventToLayerPoint(d))},_initContainer:function(d){var b=this._container=Tr(d);if(b){if(b._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");St(b,"scroll",this._onScroll,this),this._containerId=S(b)},_initLayout:function(){var d=this._container;this._fadeAnimated=this.options.fadeAnimation&&je.any3d,jt(d,"leaflet-container"+(je.touch?" leaflet-touch":"")+(je.retina?" leaflet-retina":"")+(je.ielt9?" leaflet-oldie":"")+(je.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=Nn(d,"position");b!=="absolute"&&b!=="relative"&&b!=="fixed"&&b!=="sticky"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var d=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Gi(this._mapPane,new xt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(jt(d.markerPane,"leaflet-zoom-hide"),jt(d.shadowPane,"leaflet-zoom-hide"))},_resetView:function(d,b,C){Gi(this._mapPane,new xt(0,0));var F=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var q=this._zoom!==b;this._moveStart(q,C)._move(d,b)._moveEnd(q),this.fire("viewreset"),F&&this.fire("load")},_moveStart:function(d,b){return d&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(d,b,C,F){b===void 0&&(b=this._zoom);var q=this._zoom!==b;return this._zoom=b,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),F?C&&C.pinch&&this.fire("zoom",C):((q||C&&C.pinch)&&this.fire("zoom",C),this.fire("move",C)),this},_moveEnd:function(d){return d&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return bt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(d){Gi(this._mapPane,this._getMapPanePos().subtract(d))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(d){this._targets={},this._targets[S(this._container)]=this;var b=d?dt:St;b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),je.any3d&&this.options.transform3DLimit&&(d?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){bt(this._resizeRequest),this._resizeRequest=vt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var d=this._getMapPanePos();Math.max(Math.abs(d.x),Math.abs(d.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(d,b){for(var C=[],F,q=b==="mouseout"||b==="mouseover",ie=d.target||d.srcElement,be=!1;ie;){if(F=this._targets[S(ie)],F&&(b==="click"||b==="preclick")&&this._draggableMoved(F)){be=!0;break}if(F&&F.listens(b,!0)&&(q&&!Aa(ie,d)||(C.push(F),q))||ie===this._container)break;ie=ie.parentNode}return!C.length&&!be&&!q&&this.listens(b,!0)&&(C=[this]),C},_isClickDisabled:function(d){for(;d&&d!==this._container;){if(d._leaflet_disable_click)return!0;d=d.parentNode}},_handleDOMEvent:function(d){var b=d.target||d.srcElement;if(!(!this._loaded||b._leaflet_disable_events||d.type==="click"&&this._isClickDisabled(b))){var C=d.type;C==="mousedown"&&Ft(b),this._fireDOMEvent(d,C)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(d,b,C){if(d.type==="click"){var F=u({},d);F.type="preclick",this._fireDOMEvent(F,F.type,C)}var q=this._findEventTargets(d,b);if(C){for(var ie=[],be=0;be<C.length;be++)C[be].listens(b,!0)&&ie.push(C[be]);q=ie.concat(q)}if(q.length){b==="contextmenu"&&Kt(d);var Ae=q[0],Ne={originalEvent:d};if(d.type!=="keypress"&&d.type!=="keydown"&&d.type!=="keyup"){var Qe=Ae.getLatLng&&(!Ae._radius||Ae._radius<=10);Ne.containerPoint=Qe?this.latLngToContainerPoint(Ae.getLatLng()):this.mouseEventToContainerPoint(d),Ne.layerPoint=this.containerPointToLayerPoint(Ne.containerPoint),Ne.latlng=Qe?Ae.getLatLng():this.layerPointToLatLng(Ne.layerPoint)}for(be=0;be<q.length;be++)if(q[be].fire(b,Ne,!0),Ne.originalEvent._stopped||q[be].options.bubblingMouseEvents===!1&&Ve(this._mouseEvents,b)!==-1)return}},_draggableMoved:function(d){return d=d.dragging&&d.dragging.enabled()?d:this,d.dragging&&d.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var d=0,b=this._handlers.length;d<b;d++)this._handlers[d].disable()},whenReady:function(d,b){return this._loaded?d.call(b||this,{target:this}):this.on("load",d,b),this},_getMapPanePos:function(){return Wr(this._mapPane)||new xt(0,0)},_moved:function(){var d=this._getMapPanePos();return d&&!d.equals([0,0])},_getTopLeftPoint:function(d,b){var C=d&&b!==void 0?this._getNewPixelOrigin(d,b):this.getPixelOrigin();return C.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(d,b){var C=this.getSize()._divideBy(2);return this.project(d,b)._subtract(C)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,b,C){var F=this._getNewPixelOrigin(C,b);return this.project(d,b)._subtract(F)},_latLngBoundsToNewLayerBounds:function(d,b,C){var F=this._getNewPixelOrigin(C,b);return mi([this.project(d.getSouthWest(),b)._subtract(F),this.project(d.getNorthWest(),b)._subtract(F),this.project(d.getSouthEast(),b)._subtract(F),this.project(d.getNorthEast(),b)._subtract(F)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(d){return this.latLngToLayerPoint(d).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,b,C){if(!C)return d;var F=this.project(d,b),q=this.getSize().divideBy(2),ie=new Ht(F.subtract(q),F.add(q)),be=this._getBoundsOffset(ie,C,b);return Math.abs(be.x)<=1&&Math.abs(be.y)<=1?d:this.unproject(F.add(be),b)},_limitOffset:function(d,b){if(!b)return d;var C=this.getPixelBounds(),F=new Ht(C.min.add(d),C.max.add(d));return d.add(this._getBoundsOffset(F,b))},_getBoundsOffset:function(d,b,C){var F=mi(this.project(b.getNorthEast(),C),this.project(b.getSouthWest(),C)),q=F.min.subtract(d.min),ie=F.max.subtract(d.max),be=this._rebound(q.x,-ie.x),Ae=this._rebound(q.y,-ie.y);return new xt(be,Ae)},_rebound:function(d,b){return d+b>0?Math.round(d-b)/2:Math.max(0,Math.ceil(d))-Math.max(0,Math.floor(b))},_limitZoom:function(d){var b=this.getMinZoom(),C=this.getMaxZoom(),F=je.any3d?this.options.zoomSnap:1;return F&&(d=Math.round(d/F)*F),Math.max(b,Math.min(C,d))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ui(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(d,b){var C=this._getCenterOffset(d)._trunc();return(b&&b.animate)!==!0&&!this.getSize().contains(C)?!1:(this.panBy(C,b),!0)},_createAnimProxy:function(){var d=this._proxy=ti("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(d),this.on("zoomanim",function(b){var C=ys,F=this._proxy.style[C];ar(this._proxy,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),F===this._proxy.style[C]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ci(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var d=this.getCenter(),b=this.getZoom();ar(this._proxy,this.project(d,b),this.getZoomScale(b,1))},_catchTransitionEnd:function(d){this._animatingZoom&&d.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(d,b,C){if(this._animatingZoom)return!0;if(C=C||{},!this._zoomAnimated||C.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var F=this.getZoomScale(b),q=this._getCenterOffset(d)._divideBy(1-1/F);return C.animate!==!0&&!this.getSize().contains(q)?!1:(vt(function(){this._moveStart(!0,C.noMoveStart||!1)._animateZoom(d,b,!0)},this),!0)},_animateZoom:function(d,b,C,F){this._mapPane&&(C&&(this._animatingZoom=!0,this._animateToCenter=d,this._animateToZoom=b,jt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:d,zoom:b,noUpdate:F}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ui(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function xi(d,b){return new Ut(d,b)}var An=di.extend({options:{position:"topright"},initialize:function(d){ae(this,d)},getPosition:function(){return this.options.position},setPosition:function(d){var b=this._map;return b&&b.removeControl(this),this.options.position=d,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var b=this._container=this.onAdd(d),C=this.getPosition(),F=d._controlCorners[C];return jt(b,"leaflet-control"),C.indexOf("bottom")!==-1?F.insertBefore(b,F.firstChild):F.appendChild(b),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ci(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(d){this._map&&d&&d.screenX>0&&d.screenY>0&&this._map.getContainer().focus()}}),Nt=function(d){return new An(d)};Ut.include({addControl:function(d){return d.addTo(this),this},removeControl:function(d){return d.remove(),this},_initControlPos:function(){var d=this._controlCorners={},b="leaflet-",C=this._controlContainer=ti("div",b+"control-container",this._container);function F(q,ie){var be=b+q+" "+b+ie;d[q+ie]=ti("div",be,C)}F("top","left"),F("top","right"),F("bottom","left"),F("bottom","right")},_clearControlPos:function(){for(var d in this._controlCorners)ci(this._controlCorners[d]);ci(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zt=An.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(d,b,C,F){return C<F?-1:F<C?1:0}},initialize:function(d,b,C){ae(this,C),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var F in d)this._addLayer(d[F],F);for(F in b)this._addLayer(b[F],F,!0)},onAdd:function(d){this._initLayout(),this._update(),this._map=d,d.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(d){return An.prototype.addTo.call(this,d),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(d,b){return this._addLayer(d,b),this._map?this._update():this},addOverlay:function(d,b){return this._addLayer(d,b,!0),this._map?this._update():this},removeLayer:function(d){d.off("add remove",this._onLayerChange,this);var b=this._getLayer(S(d));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){jt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var d=this._map.getSize().y-(this._container.offsetTop+50);return d<this._section.clientHeight?(jt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=d+"px"):Ui(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ui(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var d="leaflet-control-layers",b=this._container=ti("div",d),C=this.options.collapsed;b.setAttribute("aria-haspopup",!0),_a(b),Cr(b);var F=this._section=ti("section",d+"-list");C&&(this._map.on("click",this.collapse,this),St(b,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var q=this._layersLink=ti("a",d+"-toggle",b);q.href="#",q.title="Layers",q.setAttribute("role","button"),St(q,{keydown:function(ie){ie.keyCode===13&&this._expandSafely()},click:function(ie){Kt(ie),this._expandSafely()}},this),C||this.expand(),this._baseLayersList=ti("div",d+"-base",F),this._separator=ti("div",d+"-separator",F),this._overlaysList=ti("div",d+"-overlays",F),b.appendChild(F)},_getLayer:function(d){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&S(this._layers[b].layer)===d)return this._layers[b]},_addLayer:function(d,b,C){this._map&&d.on("add remove",this._onLayerChange,this),this._layers.push({layer:d,name:b,overlay:C}),this.options.sortLayers&&this._layers.sort(f(function(F,q){return this.options.sortFunction(F.layer,q.layer,F.name,q.name)},this)),this.options.autoZIndex&&d.setZIndex&&(this._lastZIndex++,d.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;qr(this._baseLayersList),qr(this._overlaysList),this._layerControlInputs=[];var d,b,C,F,q=0;for(C=0;C<this._layers.length;C++)F=this._layers[C],this._addItem(F),b=b||F.overlay,d=d||!F.overlay,q+=F.overlay?0:1;return this.options.hideSingleBase&&(d=d&&q>1,this._baseLayersList.style.display=d?"":"none"),this._separator.style.display=b&&d?"":"none",this},_onLayerChange:function(d){this._handlingClick||this._update();var b=this._getLayer(S(d.target)),C=b.overlay?d.type==="add"?"overlayadd":"overlayremove":d.type==="add"?"baselayerchange":null;C&&this._map.fire(C,b)},_createRadioElement:function(d,b){var C='<input type="radio" class="leaflet-control-layers-selector" name="'+d+'"'+(b?' checked="checked"':"")+"/>",F=document.createElement("div");return F.innerHTML=C,F.firstChild},_addItem:function(d){var b=document.createElement("label"),C=this._map.hasLayer(d.layer),F;d.overlay?(F=document.createElement("input"),F.type="checkbox",F.className="leaflet-control-layers-selector",F.defaultChecked=C):F=this._createRadioElement("leaflet-base-layers_"+S(this),C),this._layerControlInputs.push(F),F.layerId=S(d.layer),St(F,"click",this._onInputClick,this);var q=document.createElement("span");q.innerHTML=" "+d.name;var ie=document.createElement("span");b.appendChild(ie),ie.appendChild(F),ie.appendChild(q);var be=d.overlay?this._overlaysList:this._baseLayersList;return be.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){if(!this._preventClick){var d=this._layerControlInputs,b,C,F=[],q=[];this._handlingClick=!0;for(var ie=d.length-1;ie>=0;ie--)b=d[ie],C=this._getLayer(b.layerId).layer,b.checked?F.push(C):b.checked||q.push(C);for(ie=0;ie<q.length;ie++)this._map.hasLayer(q[ie])&&this._map.removeLayer(q[ie]);for(ie=0;ie<F.length;ie++)this._map.hasLayer(F[ie])||this._map.addLayer(F[ie]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,b,C,F=this._map.getZoom(),q=d.length-1;q>=0;q--)b=d[q],C=this._getLayer(b.layerId).layer,b.disabled=C.options.minZoom!==void 0&&F<C.options.minZoom||C.options.maxZoom!==void 0&&F>C.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var d=this._section;this._preventClick=!0,St(d,"click",Kt),this.expand();var b=this;setTimeout(function(){dt(d,"click",Kt),b._preventClick=!1})}}),ws=function(d,b,C){return new zt(d,b,C)},Yt=An.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(d){var b="leaflet-control-zoom",C=ti("div",b+" leaflet-bar"),F=this.options;return this._zoomInButton=this._createButton(F.zoomInText,F.zoomInTitle,b+"-in",C,this._zoomIn),this._zoomOutButton=this._createButton(F.zoomOutText,F.zoomOutTitle,b+"-out",C,this._zoomOut),this._updateDisabled(),d.on("zoomend zoomlevelschange",this._updateDisabled,this),C},onRemove:function(d){d.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(d){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(d.shiftKey?3:1))},_zoomOut:function(d){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(d.shiftKey?3:1))},_createButton:function(d,b,C,F,q){var ie=ti("a",C,F);return ie.innerHTML=d,ie.href="#",ie.title=b,ie.setAttribute("role","button"),ie.setAttribute("aria-label",b),_a(ie),St(ie,"click",ua),St(ie,"click",q,this),St(ie,"click",this._refocusOnMap,this),ie},_updateDisabled:function(){var d=this._map,b="leaflet-disabled";Ui(this._zoomInButton,b),Ui(this._zoomOutButton,b),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||d._zoom===d.getMinZoom())&&(jt(this._zoomOutButton,b),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||d._zoom===d.getMaxZoom())&&(jt(this._zoomInButton,b),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ut.mergeOptions({zoomControl:!0}),Ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Yt,this.addControl(this.zoomControl))});var so=function(d){return new Yt(d)},ha=An.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(d){var b="leaflet-control-scale",C=ti("div",b),F=this.options;return this._addScales(F,b+"-line",C),d.on(F.updateWhenIdle?"moveend":"move",this._update,this),d.whenReady(this._update,this),C},onRemove:function(d){d.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(d,b,C){d.metric&&(this._mScale=ti("div",b,C)),d.imperial&&(this._iScale=ti("div",b,C))},_update:function(){var d=this._map,b=d.getSize().y/2,C=d.distance(d.containerPointToLatLng([0,b]),d.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(C)},_updateScales:function(d){this.options.metric&&d&&this._updateMetric(d),this.options.imperial&&d&&this._updateImperial(d)},_updateMetric:function(d){var b=this._getRoundNum(d),C=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,C,b/d)},_updateImperial:function(d){var b=d*3.2808399,C,F,q;b>5280?(C=b/5280,F=this._getRoundNum(C),this._updateScale(this._iScale,F+" mi",F/C)):(q=this._getRoundNum(b),this._updateScale(this._iScale,q+" ft",q/b))},_updateScale:function(d,b,C){d.style.width=Math.round(this.options.maxWidth*C)+"px",d.innerHTML=b},_getRoundNum:function(d){var b=Math.pow(10,(Math.floor(d)+"").length-1),C=d/b;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:1,b*C}}),ks=function(d){return new ha(d)},Er='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',No=An.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(je.inlineSvg?Er+" ":"")+"Leaflet</a>"},initialize:function(d){ae(this,d),this._attributions={}},onAdd:function(d){d.attributionControl=this,this._container=ti("div","leaflet-control-attribution"),_a(this._container);for(var b in d._layers)d._layers[b].getAttribution&&this.addAttribution(d._layers[b].getAttribution());return this._update(),d.on("layeradd",this._addAttribution,this),this._container},onRemove:function(d){d.off("layeradd",this._addAttribution,this)},_addAttribution:function(d){d.layer.getAttribution&&(this.addAttribution(d.layer.getAttribution()),d.layer.once("remove",function(){this.removeAttribution(d.layer.getAttribution())},this))},setPrefix:function(d){return this.options.prefix=d,this._update(),this},addAttribution:function(d){return d?(this._attributions[d]||(this._attributions[d]=0),this._attributions[d]++,this._update(),this):this},removeAttribution:function(d){return d?(this._attributions[d]&&(this._attributions[d]--,this._update()),this):this},_update:function(){if(this._map){var d=[];for(var b in this._attributions)this._attributions[b]&&d.push(b);var C=[];this.options.prefix&&C.push(this.options.prefix),d.length&&C.push(d.join(", ")),this._container.innerHTML=C.join(' <span aria-hidden="true">|</span> ')}}});Ut.mergeOptions({attributionControl:!0}),Ut.addInitHook(function(){this.options.attributionControl&&new No().addTo(this)});var oo=function(d){return new No(d)};An.Layers=zt,An.Zoom=Yt,An.Scale=ha,An.Attribution=No,Nt.layers=ws,Nt.zoom=so,Nt.scale=ks,Nt.attribution=oo;var ya=di.extend({initialize:function(d){this._map=d},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ya.addTo=function(d,b){return d.addHandler(b,this),this};var Rh={Events:Bt},Tl=je.touch?"touchstart mousedown":"mousedown",qi=Vt.extend({options:{clickTolerance:3},initialize:function(d,b,C,F){ae(this,F),this._element=d,this._dragStartTarget=b||d,this._preventOutline=C},enable:function(){this._enabled||(St(this._dragStartTarget,Tl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qi._dragging===this&&this.finishDrag(!0),dt(this._dragStartTarget,Tl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(d){if(this._enabled&&(this._moved=!1,!jo(this._element,"leaflet-zoom-anim"))){if(d.touches&&d.touches.length!==1){qi._dragging===this&&this.finishDrag();return}if(!(qi._dragging||d.shiftKey||d.which!==1&&d.button!==1&&!d.touches)&&(qi._dragging=this,this._preventOutline&&Ft(this._element),no(),rr(),!this._moving)){this.fire("down");var b=d.touches?d.touches[0]:d,C=wu(this._element);this._startPoint=new xt(b.clientX,b.clientY),this._startPos=Wr(this._element),this._parentScale=ao(C);var F=d.type==="mousedown";St(document,F?"mousemove":"touchmove",this._onMove,this),St(document,F?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(d){if(this._enabled){if(d.touches&&d.touches.length>1){this._moved=!0;return}var b=d.touches&&d.touches.length===1?d.touches[0]:d,C=new xt(b.clientX,b.clientY)._subtract(this._startPoint);!C.x&&!C.y||Math.abs(C.x)+Math.abs(C.y)<this.options.clickTolerance||(C.x/=this._parentScale.x,C.y/=this._parentScale.y,Kt(d),this._moved||(this.fire("dragstart"),this._moved=!0,jt(document.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),jt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(C),this._moving=!0,this._lastEvent=d,this._updatePosition())}},_updatePosition:function(){var d={originalEvent:this._lastEvent};this.fire("predrag",d),Gi(this._element,this._newPos),this.fire("drag",d)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(d){Ui(document.body,"leaflet-dragging"),this._lastTarget&&(Ui(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),dt(document,"mousemove touchmove",this._onMove,this),dt(document,"mouseup touchend touchcancel",this._onUp,this),Hr(),Pr();var b=this._moved&&this._moving;this._moving=!1,qi._dragging=!1,b&&this.fire("dragend",{noInertia:d,distance:this._newPos.distanceTo(this._startPos)})}});function Ia(d,b,C){var F,q=[1,4,2,8],ie,be,Ae,Ne,Qe,pt,At,qt;for(ie=0,pt=d.length;ie<pt;ie++)d[ie]._code=lr(d[ie],b);for(Ae=0;Ae<4;Ae++){for(At=q[Ae],F=[],ie=0,pt=d.length,be=pt-1;ie<pt;be=ie++)Ne=d[ie],Qe=d[be],Ne._code&At?Qe._code&At||(qt=or(Qe,Ne,At,b,C),qt._code=lr(qt,b),F.push(qt)):(Qe._code&At&&(qt=or(Qe,Ne,At,b,C),qt._code=lr(qt,b),F.push(qt)),F.push(Ne));d=F}return d}function Si(d,b){var C,F,q,ie,be,Ae,Ne,Qe,pt;if(!d||d.length===0)throw new Error("latlngs not passed");Sn(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var At=Pt([0,0]),qt=Jt(d),cn=qt.getNorthWest().distanceTo(qt.getSouthWest())*qt.getNorthEast().distanceTo(qt.getNorthWest());cn<1700&&(At=sr(d));var Ji=d.length,fa=[];for(C=0;C<Ji;C++){var qn=Pt(d[C]);fa.push(b.project(Pt([qn.lat-At.lat,qn.lng-At.lng])))}for(Ae=Ne=Qe=0,C=0,F=Ji-1;C<Ji;F=C++)q=fa[C],ie=fa[F],be=q.y*ie.x-ie.y*q.x,Ne+=(q.x+ie.x)*be,Qe+=(q.y+ie.y)*be,Ae+=be*3;Ae===0?pt=fa[0]:pt=[Ne/Ae,Qe/Ae];var Ha=b.unproject(wt(pt));return Pt([Ha.lat+At.lat,Ha.lng+At.lng])}function sr(d){for(var b=0,C=0,F=0,q=0;q<d.length;q++){var ie=Pt(d[q]);b+=ie.lat,C+=ie.lng,F++}return Pt([b/F,C/F])}var Pl={__proto__:null,clipPolygon:Ia,polygonCenter:Si,centroid:sr};function Ss(d,b){if(!b||!d.length)return d.slice();var C=b*b;return d=Fh(d,C),d=Ml(d,C),d}function Di(d,b,C){return Math.sqrt(Ga(d,b,C,!0))}function Su(d,b,C){return Ga(d,b,C)}function Ml(d,b){var C=d.length,F=typeof Uint8Array<"u"?Uint8Array:Array,q=new F(C);q[0]=q[C-1]=1,Uo(d,q,b,0,C-1);var ie,be=[];for(ie=0;ie<C;ie++)q[ie]&&be.push(d[ie]);return be}function Uo(d,b,C,F,q){var ie=0,be,Ae,Ne;for(Ae=F+1;Ae<=q-1;Ae++)Ne=Ga(d[Ae],d[F],d[q],!0),Ne>ie&&(be=Ae,ie=Ne);ie>C&&(b[be]=1,Uo(d,b,C,F,be),Uo(d,b,C,be,q))}function Fh(d,b){for(var C=[d[0]],F=1,q=0,ie=d.length;F<ie;F++)uo(d[F],d[q])>b&&(C.push(d[F]),q=F);return q<ie-1&&C.push(d[ie-1]),C}var Kr;function lo(d,b,C,F,q){var ie=F?Kr:lr(d,C),be=lr(b,C),Ae,Ne,Qe;for(Kr=be;;){if(!(ie|be))return[d,b];if(ie&be)return!1;Ae=ie||be,Ne=or(d,b,Ae,C,q),Qe=lr(Ne,C),Ae===ie?(d=Ne,ie=Qe):(b=Ne,be=Qe)}}function or(d,b,C,F,q){var ie=b.x-d.x,be=b.y-d.y,Ae=F.min,Ne=F.max,Qe,pt;return C&8?(Qe=d.x+ie*(Ne.y-d.y)/be,pt=Ne.y):C&4?(Qe=d.x+ie*(Ae.y-d.y)/be,pt=Ae.y):C&2?(Qe=Ne.x,pt=d.y+be*(Ne.x-d.x)/ie):C&1&&(Qe=Ae.x,pt=d.y+be*(Ae.x-d.x)/ie),new xt(Qe,pt,q)}function lr(d,b){var C=0;return d.x<b.min.x?C|=1:d.x>b.max.x&&(C|=2),d.y<b.min.y?C|=4:d.y>b.max.y&&(C|=8),C}function uo(d,b){var C=b.x-d.x,F=b.y-d.y;return C*C+F*F}function Ga(d,b,C,F){var q=b.x,ie=b.y,be=C.x-q,Ae=C.y-ie,Ne=be*be+Ae*Ae,Qe;return Ne>0&&(Qe=((d.x-q)*be+(d.y-ie)*Ae)/Ne,Qe>1?(q=C.x,ie=C.y):Qe>0&&(q+=be*Qe,ie+=Ae*Qe)),be=d.x-q,Ae=d.y-ie,F?be*be+Ae*Ae:new xt(q,ie)}function Sn(d){return!Pe(d[0])||typeof d[0][0]!="object"&&typeof d[0][0]<"u"}function Xi(d){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Sn(d)}function Cl(d,b){var C,F,q,ie,be,Ae,Ne,Qe;if(!d||d.length===0)throw new Error("latlngs not passed");Sn(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var pt=Pt([0,0]),At=Jt(d),qt=At.getNorthWest().distanceTo(At.getSouthWest())*At.getNorthEast().distanceTo(At.getNorthWest());qt<1700&&(pt=sr(d));var cn=d.length,Ji=[];for(C=0;C<cn;C++){var fa=Pt(d[C]);Ji.push(b.project(Pt([fa.lat-pt.lat,fa.lng-pt.lng])))}for(C=0,F=0;C<cn-1;C++)F+=Ji[C].distanceTo(Ji[C+1])/2;if(F===0)Qe=Ji[0];else for(C=0,ie=0;C<cn-1;C++)if(be=Ji[C],Ae=Ji[C+1],q=be.distanceTo(Ae),ie+=q,ie>F){Ne=(ie-F)/q,Qe=[Ae.x-Ne*(Ae.x-be.x),Ae.y-Ne*(Ae.y-be.y)];break}var qn=b.unproject(wt(Qe));return Pt([qn.lat+pt.lat,qn.lng+pt.lng])}var Ts={__proto__:null,simplify:Ss,pointToSegmentDistance:Di,closestPointOnSegment:Su,clipSegment:lo,_getEdgeIntersection:or,_getBitCode:lr,_sqClosestPointOnSegment:Ga,isFlat:Sn,_flat:Xi,polylineCenter:Cl},Yr={project:function(d){return new xt(d.lng,d.lat)},unproject:function(d){return new Ct(d.y,d.x)},bounds:new Ht([-180,-90],[180,90])},ur={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ht([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(d){var b=Math.PI/180,C=this.R,F=d.lat*b,q=this.R_MINOR/C,ie=Math.sqrt(1-q*q),be=ie*Math.sin(F),Ae=Math.tan(Math.PI/4-F/2)/Math.pow((1-be)/(1+be),ie/2);return F=-C*Math.log(Math.max(Ae,1e-10)),new xt(d.lng*b*C,F)},unproject:function(d){for(var b=180/Math.PI,C=this.R,F=this.R_MINOR/C,q=Math.sqrt(1-F*F),ie=Math.exp(-d.y/C),be=Math.PI/2-2*Math.atan(ie),Ae=0,Ne=.1,Qe;Ae<15&&Math.abs(Ne)>1e-7;Ae++)Qe=q*Math.sin(be),Qe=Math.pow((1-Qe)/(1+Qe),q/2),Ne=Math.PI/2-2*Math.atan(ie*Qe)-be,be+=Ne;return new Ct(be*b,d.x*b/C)}},Oh={__proto__:null,LonLat:Yr,Mercator:ur,SphericalMercator:Cn},Go=u({},Ii,{code:"EPSG:3395",projection:ur,transformation:(function(){var d=.5/(Math.PI*ur.R);return xn(d,.5,-d,.5)})()}),Tu=u({},Ii,{code:"EPSG:4326",projection:Yr,transformation:xn(1/180,1,-1/180,.5)}),Ps=u({},dn,{projection:Yr,transformation:xn(1,0,-1,0),scale:function(d){return Math.pow(2,d)},zoom:function(d){return Math.log(d)/Math.LN2},distance:function(d,b){var C=b.lng-d.lng,F=b.lat-d.lat;return Math.sqrt(C*C+F*F)},infinite:!0});dn.Earth=Ii,dn.EPSG3395=Go,dn.EPSG3857=Vr,dn.EPSG900913=gn,dn.EPSG4326=Tu,dn.Simple=Ps;var ea=Vt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(d){return d.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(d){return d&&d.removeLayer(this),this},getPane:function(d){return this._map.getPane(d?this.options[d]||d:this.options.pane)},addInteractiveTarget:function(d){return this._map._targets[S(d)]=this,this},removeInteractiveTarget:function(d){return delete this._map._targets[S(d)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(d){var b=d.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var C=this.getEvents();b.on(C,this),this.once("remove",function(){b.off(C,this)},this)}this.onAdd(b),this.fire("add"),b.fire("layeradd",{layer:this})}}});Ut.include({addLayer:function(d){if(!d._layerAdd)throw new Error("The provided object is not a Layer.");var b=S(d);return this._layers[b]?this:(this._layers[b]=d,d._mapToAdd=this,d.beforeAdd&&d.beforeAdd(this),this.whenReady(d._layerAdd,d),this)},removeLayer:function(d){var b=S(d);return this._layers[b]?(this._loaded&&d.onRemove(this),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:d}),d.fire("remove")),d._map=d._mapToAdd=null,this):this},hasLayer:function(d){return S(d)in this._layers},eachLayer:function(d,b){for(var C in this._layers)d.call(b,this._layers[C]);return this},_addLayers:function(d){d=d?Pe(d)?d:[d]:[];for(var b=0,C=d.length;b<C;b++)this.addLayer(d[b])},_addZoomLimit:function(d){(!isNaN(d.options.maxZoom)||!isNaN(d.options.minZoom))&&(this._zoomBoundLayers[S(d)]=d,this._updateZoomLevels())},_removeZoomLimit:function(d){var b=S(d);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var d=1/0,b=-1/0,C=this._getZoomSpan();for(var F in this._zoomBoundLayers){var q=this._zoomBoundLayers[F].options;d=q.minZoom===void 0?d:Math.min(d,q.minZoom),b=q.maxZoom===void 0?b:Math.max(b,q.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=d===1/0?void 0:d,C!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xr=ea.extend({initialize:function(d,b){ae(this,b),this._layers={};var C,F;if(d)for(C=0,F=d.length;C<F;C++)this.addLayer(d[C])},addLayer:function(d){var b=this.getLayerId(d);return this._layers[b]=d,this._map&&this._map.addLayer(d),this},removeLayer:function(d){var b=d in this._layers?d:this.getLayerId(d);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(d){var b=typeof d=="number"?d:this.getLayerId(d);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(d){var b=Array.prototype.slice.call(arguments,1),C,F;for(C in this._layers)F=this._layers[C],F[d]&&F[d].apply(F,b);return this},onAdd:function(d){this.eachLayer(d.addLayer,d)},onRemove:function(d){this.eachLayer(d.removeLayer,d)},eachLayer:function(d,b){for(var C in this._layers)d.call(b,this._layers[C]);return this},getLayer:function(d){return this._layers[d]},getLayers:function(){var d=[];return this.eachLayer(d.push,d),d},setZIndex:function(d){return this.invoke("setZIndex",d)},getLayerId:function(d){return S(d)}}),Pu=function(d,b){return new Xr(d,b)},Da=Xr.extend({addLayer:function(d){return this.hasLayer(d)?this:(d.addEventParent(this),Xr.prototype.addLayer.call(this,d),this.fire("layeradd",{layer:d}))},removeLayer:function(d){return this.hasLayer(d)?(d in this._layers&&(d=this._layers[d]),d.removeEventParent(this),Xr.prototype.removeLayer.call(this,d),this.fire("layerremove",{layer:d})):this},setStyle:function(d){return this.invoke("setStyle",d)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var d=new ki;for(var b in this._layers){var C=this._layers[b];d.extend(C.getBounds?C.getBounds():C.getLatLng())}return d}}),Ll=function(d,b){return new Da(d,b)},Ar=di.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(d){ae(this,d)},createIcon:function(d){return this._createIcon("icon",d)},createShadow:function(d){return this._createIcon("shadow",d)},_createIcon:function(d,b){var C=this._getIconUrl(d);if(!C){if(d==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var F=this._createImg(C,b&&b.tagName==="IMG"?b:null);return this._setIconStyles(F,d),(this.options.crossOrigin||this.options.crossOrigin==="")&&(F.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),F},_setIconStyles:function(d,b){var C=this.options,F=C[b+"Size"];typeof F=="number"&&(F=[F,F]);var q=wt(F),ie=wt(b==="shadow"&&C.shadowAnchor||C.iconAnchor||q&&q.divideBy(2,!0));d.className="leaflet-marker-"+b+" "+(C.className||""),ie&&(d.style.marginLeft=-ie.x+"px",d.style.marginTop=-ie.y+"px"),q&&(d.style.width=q.x+"px",d.style.height=q.y+"px")},_createImg:function(d,b){return b=b||document.createElement("img"),b.src=d,b},_getIconUrl:function(d){return je.retina&&this.options[d+"RetinaUrl"]||this.options[d+"Url"]}});function Mu(d){return new Ar(d)}var Ms=Ar.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(d){return typeof Ms.imagePath!="string"&&(Ms.imagePath=this._detectIconPath()),(this.options.imagePath||Ms.imagePath)+Ar.prototype._getIconUrl.call(this,d)},_stripUrl:function(d){var b=function(C,F,q){var ie=F.exec(C);return ie&&ie[q]};return d=b(d,/^url\((['"])?(.+)\1\)$/,2),d&&b(d,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var d=ti("div","leaflet-default-icon-path",document.body),b=Nn(d,"background-image")||Nn(d,"backgroundImage");if(document.body.removeChild(d),b=this._stripUrl(b),b)return b;var C=document.querySelector('link[href$="leaflet.css"]');return C?C.href.substring(0,C.href.length-11-1):""}}),El=ya.extend({initialize:function(d){this._marker=d},addHooks:function(){var d=this._marker._icon;this._draggable||(this._draggable=new qi(d,d,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),jt(d,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ui(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(d){var b=this._marker,C=b._map,F=this._marker.options.autoPanSpeed,q=this._marker.options.autoPanPadding,ie=Wr(b._icon),be=C.getPixelBounds(),Ae=C.getPixelOrigin(),Ne=mi(be.min._subtract(Ae).add(q),be.max._subtract(Ae).subtract(q));if(!Ne.contains(ie)){var Qe=wt((Math.max(Ne.max.x,ie.x)-Ne.max.x)/(be.max.x-Ne.max.x)-(Math.min(Ne.min.x,ie.x)-Ne.min.x)/(be.min.x-Ne.min.x),(Math.max(Ne.max.y,ie.y)-Ne.max.y)/(be.max.y-Ne.max.y)-(Math.min(Ne.min.y,ie.y)-Ne.min.y)/(be.min.y-Ne.min.y)).multiplyBy(F);C.panBy(Qe,{animate:!1}),this._draggable._newPos._add(Qe),this._draggable._startPos._add(Qe),Gi(b._icon,this._draggable._newPos),this._onDrag(d),this._panRequest=vt(this._adjustPan.bind(this,d))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(d){this._marker.options.autoPan&&(bt(this._panRequest),this._panRequest=vt(this._adjustPan.bind(this,d)))},_onDrag:function(d){var b=this._marker,C=b._shadow,F=Wr(b._icon),q=b._map.layerPointToLatLng(F);C&&Gi(C,F),b._latlng=q,d.latlng=q,d.oldLatLng=this._oldLatLng,b.fire("move",d).fire("drag",d)},_onDragEnd:function(d){bt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",d)}}),qa=ea.extend({options:{icon:new Ms,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(d,b){ae(this,b),this._latlng=Pt(d)},onAdd:function(d){this._zoomAnimated=this._zoomAnimated&&d.options.markerZoomAnimation,this._zoomAnimated&&d.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(d){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&d.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(d){var b=this._latlng;return this._latlng=Pt(d),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(d){return this.options.zIndexOffset=d,this.update()},getIcon:function(){return this.options.icon},setIcon:function(d){return this.options.icon=d,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var d=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(d)}return this},_initIcon:function(){var d=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),C=d.icon.createIcon(this._icon),F=!1;C!==this._icon&&(this._icon&&this._removeIcon(),F=!0,d.title&&(C.title=d.title),C.tagName==="IMG"&&(C.alt=d.alt||"")),jt(C,b),d.keyboard&&(C.tabIndex="0",C.setAttribute("role","button")),this._icon=C,d.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&St(C,"focus",this._panOnFocus,this);var q=d.icon.createShadow(this._shadow),ie=!1;q!==this._shadow&&(this._removeShadow(),ie=!0),q&&(jt(q,b),q.alt=""),this._shadow=q,d.opacity<1&&this._updateOpacity(),F&&this.getPane().appendChild(this._icon),this._initInteraction(),q&&ie&&this.getPane(d.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&dt(this._icon,"focus",this._panOnFocus,this),ci(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ci(this._shadow),this._shadow=null},_setPos:function(d){this._icon&&Gi(this._icon,d),this._shadow&&Gi(this._shadow,d),this._zIndex=d.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(d){this._icon&&(this._icon.style.zIndex=this._zIndex+d)},_animateZoom:function(d){var b=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(jt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),El)){var d=this.options.draggable;this.dragging&&(d=this.dragging.enabled(),this.dragging.disable()),this.dragging=new El(this),d&&this.dragging.enable()}},setOpacity:function(d){return this.options.opacity=d,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var d=this.options.opacity;this._icon&&Un(this._icon,d),this._shadow&&Un(this._shadow,d)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var d=this._map;if(d){var b=this.options.icon.options,C=b.iconSize?wt(b.iconSize):wt(0,0),F=b.iconAnchor?wt(b.iconAnchor):wt(0,0);d.panInside(this._latlng,{paddingTopLeft:F,paddingBottomRight:C.subtract(F)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Cu(d,b){return new qa(d,b)}var Za=ea.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(d){this._renderer=d.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(d){return ae(this,d),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&d&&Object.prototype.hasOwnProperty.call(d,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hr=Za.extend({options:{fill:!0,radius:10},initialize:function(d,b){ae(this,b),this._latlng=Pt(d),this._radius=this.options.radius},setLatLng:function(d){var b=this._latlng;return this._latlng=Pt(d),this.redraw(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(d){return this.options.radius=this._radius=d,this.redraw()},getRadius:function(){return this._radius},setStyle:function(d){var b=d&&d.radius||this._radius;return Za.prototype.setStyle.call(this,d),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,b=this._radiusY||d,C=this._clickTolerance(),F=[d+C,b+C];this._pxBounds=new Ht(this._point.subtract(F),this._point.add(F))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(d){return d.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Lu(d,b){return new hr(d,b)}var Cs=hr.extend({initialize:function(d,b,C){if(typeof b=="number"&&(b=u({},C,{radius:b})),ae(this,b),this._latlng=Pt(d),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(d){return this._mRadius=d,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var d=[this._radius,this._radiusY||this._radius];return new ki(this._map.layerPointToLatLng(this._point.subtract(d)),this._map.layerPointToLatLng(this._point.add(d)))},setStyle:Za.prototype.setStyle,_project:function(){var d=this._latlng.lng,b=this._latlng.lat,C=this._map,F=C.options.crs;if(F.distance===Ii.distance){var q=Math.PI/180,ie=this._mRadius/Ii.R/q,be=C.project([b+ie,d]),Ae=C.project([b-ie,d]),Ne=be.add(Ae).divideBy(2),Qe=C.unproject(Ne).lat,pt=Math.acos((Math.cos(ie*q)-Math.sin(b*q)*Math.sin(Qe*q))/(Math.cos(b*q)*Math.cos(Qe*q)))/q;(isNaN(pt)||pt===0)&&(pt=ie/Math.cos(Math.PI/180*b)),this._point=Ne.subtract(C.getPixelOrigin()),this._radius=isNaN(pt)?0:Ne.x-C.project([Qe,d-pt]).x,this._radiusY=Ne.y-be.y}else{var At=F.unproject(F.project(this._latlng).subtract([this._mRadius,0]));this._point=C.latLngToLayerPoint(this._latlng),this._radius=this._point.x-C.latLngToLayerPoint(At).x}this._updateBounds()}});function jh(d,b,C){return new Cs(d,b,C)}var dr=Za.extend({options:{smoothFactor:1,noClip:!1},initialize:function(d,b){ae(this,b),this._setLatLngs(d)},getLatLngs:function(){return this._latlngs},setLatLngs:function(d){return this._setLatLngs(d),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(d){for(var b=1/0,C=null,F=Ga,q,ie,be=0,Ae=this._parts.length;be<Ae;be++)for(var Ne=this._parts[be],Qe=1,pt=Ne.length;Qe<pt;Qe++){q=Ne[Qe-1],ie=Ne[Qe];var At=F(d,q,ie,!0);At<b&&(b=At,C=F(d,q,ie))}return C&&(C.distance=Math.sqrt(b)),C},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(d,b){return b=b||this._defaultShape(),d=Pt(d),b.push(d),this._bounds.extend(d),this.redraw()},_setLatLngs:function(d){this._bounds=new ki,this._latlngs=this._convertLatLngs(d)},_defaultShape:function(){return Sn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var b=[],C=Sn(d),F=0,q=d.length;F<q;F++)C?(b[F]=Pt(d[F]),this._bounds.extend(b[F])):b[F]=this._convertLatLngs(d[F]);return b},_project:function(){var d=new Ht;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,d),this._bounds.isValid()&&d.isValid()&&(this._rawPxBounds=d,this._updateBounds())},_updateBounds:function(){var d=this._clickTolerance(),b=new xt(d,d);this._rawPxBounds&&(this._pxBounds=new Ht([this._rawPxBounds.min.subtract(b),this._rawPxBounds.max.add(b)]))},_projectLatlngs:function(d,b,C){var F=d[0]instanceof Ct,q=d.length,ie,be;if(F){for(be=[],ie=0;ie<q;ie++)be[ie]=this._map.latLngToLayerPoint(d[ie]),C.extend(be[ie]);b.push(be)}else for(ie=0;ie<q;ie++)this._projectLatlngs(d[ie],b,C)},_clipPoints:function(){var d=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}var b=this._parts,C,F,q,ie,be,Ae,Ne;for(C=0,q=0,ie=this._rings.length;C<ie;C++)for(Ne=this._rings[C],F=0,be=Ne.length;F<be-1;F++)Ae=lo(Ne[F],Ne[F+1],d,F,!0),Ae&&(b[q]=b[q]||[],b[q].push(Ae[0]),(Ae[1]!==Ne[F+1]||F===be-2)&&(b[q].push(Ae[1]),q++))}},_simplifyPoints:function(){for(var d=this._parts,b=this.options.smoothFactor,C=0,F=d.length;C<F;C++)d[C]=Ss(d[C],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(d,b){var C,F,q,ie,be,Ae,Ne=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(C=0,ie=this._parts.length;C<ie;C++)for(Ae=this._parts[C],F=0,be=Ae.length,q=be-1;F<be;q=F++)if(!(!b&&F===0)&&Di(d,Ae[q],Ae[F])<=Ne)return!0;return!1}});function Eu(d,b){return new dr(d,b)}dr._flat=Xi;var Wa=dr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Si(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(d){var b=dr.prototype._convertLatLngs.call(this,d),C=b.length;return C>=2&&b[0]instanceof Ct&&b[0].equals(b[C-1])&&b.pop(),b},_setLatLngs:function(d){dr.prototype._setLatLngs.call(this,d),Sn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Sn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var d=this._renderer._bounds,b=this.options.weight,C=new xt(b,b);if(d=new Ht(d.min.subtract(C),d.max.add(C)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}for(var F=0,q=this._rings.length,ie;F<q;F++)ie=Ia(this._rings[F],d,!0),ie.length&&this._parts.push(ie)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(d){var b=!1,C,F,q,ie,be,Ae,Ne,Qe;if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(ie=0,Ne=this._parts.length;ie<Ne;ie++)for(C=this._parts[ie],be=0,Qe=C.length,Ae=Qe-1;be<Qe;Ae=be++)F=C[be],q=C[Ae],F.y>d.y!=q.y>d.y&&d.x<(q.x-F.x)*(d.y-F.y)/(q.y-F.y)+F.x&&(b=!b);return b||dr.prototype._containsPoint.call(this,d,!0)}});function Au(d,b){return new Wa(d,b)}var za=Da.extend({initialize:function(d,b){ae(this,b),this._layers={},d&&this.addData(d)},addData:function(d){var b=Pe(d)?d:d.features,C,F,q;if(b){for(C=0,F=b.length;C<F;C++)q=b[C],(q.geometries||q.geometry||q.features||q.coordinates)&&this.addData(q);return this}var ie=this.options;if(ie.filter&&!ie.filter(d))return this;var be=ho(d,ie);return be?(be.feature=Qr(d),be.defaultOptions=be.options,this.resetStyle(be),ie.onEachFeature&&ie.onEachFeature(d,be),this.addLayer(be)):this},resetStyle:function(d){return d===void 0?this.eachLayer(this.resetStyle,this):(d.options=u({},d.defaultOptions),this._setLayerStyle(d,this.options.style),this)},setStyle:function(d){return this.eachLayer(function(b){this._setLayerStyle(b,d)},this)},_setLayerStyle:function(d,b){d.setStyle&&(typeof b=="function"&&(b=b(d.feature)),d.setStyle(b))}});function ho(d,b){var C=d.type==="Feature"?d.geometry:d,F=C?C.coordinates:null,q=[],ie=b&&b.pointToLayer,be=b&&b.coordsToLatLng||da,Ae,Ne,Qe,pt;if(!F&&!C)return null;switch(C.type){case"Point":return Ae=be(F),co(ie,d,Ae,b);case"MultiPoint":for(Qe=0,pt=F.length;Qe<pt;Qe++)Ae=be(F[Qe]),q.push(co(ie,d,Ae,b));return new Da(q);case"LineString":case"MultiLineString":return Ne=Jr(F,C.type==="LineString"?0:1,be),new dr(Ne,b);case"Polygon":case"MultiPolygon":return Ne=Jr(F,C.type==="Polygon"?1:2,be),new Wa(Ne,b);case"GeometryCollection":for(Qe=0,pt=C.geometries.length;Qe<pt;Qe++){var At=ho({geometry:C.geometries[Qe],type:"Feature",properties:d.properties},b);At&&q.push(At)}return new Da(q);case"FeatureCollection":for(Qe=0,pt=C.features.length;Qe<pt;Qe++){var qt=ho(C.features[Qe],b);qt&&q.push(qt)}return new Da(q);default:throw new Error("Invalid GeoJSON object.")}}function co(d,b,C,F){return d?d(b,C):new qa(C,F&&F.markersInheritOptions&&F)}function da(d){return new Ct(d[1],d[0],d[2])}function Jr(d,b,C){for(var F=[],q=0,ie=d.length,be;q<ie;q++)be=b?Jr(d[q],b-1,C):(C||da)(d[q]),F.push(be);return F}function fo(d,b){return d=Pt(d),d.alt!==void 0?[V(d.lng,b),V(d.lat,b),V(d.alt,b)]:[V(d.lng,b),V(d.lat,b)]}function Ls(d,b,C,F){for(var q=[],ie=0,be=d.length;ie<be;ie++)q.push(b?Ls(d[ie],Sn(d[ie])?0:b-1,C,F):fo(d[ie],F));return!b&&C&&q.length>0&&q.push(q[0].slice()),q}function Ir(d,b){return d.feature?u({},d.feature,{geometry:b}):Qr(b)}function Qr(d){return d.type==="Feature"||d.type==="FeatureCollection"?d:{type:"Feature",properties:{},geometry:d}}var cr={toGeoJSON:function(d){return Ir(this,{type:"Point",coordinates:fo(this.getLatLng(),d)})}};qa.include(cr),Cs.include(cr),hr.include(cr),dr.include({toGeoJSON:function(d){var b=!Sn(this._latlngs),C=Ls(this._latlngs,b?1:0,!1,d);return Ir(this,{type:(b?"Multi":"")+"LineString",coordinates:C})}}),Wa.include({toGeoJSON:function(d){var b=!Sn(this._latlngs),C=b&&!Sn(this._latlngs[0]),F=Ls(this._latlngs,C?2:b?1:0,!0,d);return b||(F=[F]),Ir(this,{type:(C?"Multi":"")+"Polygon",coordinates:F})}}),Xr.include({toMultiPoint:function(d){var b=[];return this.eachLayer(function(C){b.push(C.toGeoJSON(d).geometry.coordinates)}),Ir(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(d){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(b==="MultiPoint")return this.toMultiPoint(d);var C=b==="GeometryCollection",F=[];return this.eachLayer(function(q){if(q.toGeoJSON){var ie=q.toGeoJSON(d);if(C)F.push(ie.geometry);else{var be=Qr(ie);be.type==="FeatureCollection"?F.push.apply(F,be.features):F.push(be)}}}),C?Ir(this,{geometries:F,type:"GeometryCollection"}):{type:"FeatureCollection",features:F}}});function qo(d,b){return new za(d,b)}var Bh=qo,po=ea.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(d,b,C){this._url=d,this._bounds=Jt(b),ae(this,C)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(jt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ci(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(d){return this.options.opacity=d,this._image&&this._updateOpacity(),this},setStyle:function(d){return d.opacity&&this.setOpacity(d.opacity),this},bringToFront:function(){return this._map&&vi(this._image),this},bringToBack:function(){return this._map&&Zr(this._image),this},setUrl:function(d){return this._url=d,this._image&&(this._image.src=d),this},setBounds:function(d){return this._bounds=Jt(d),this._map&&this._reset(),this},getEvents:function(){var d={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var d=this._url.tagName==="IMG",b=this._image=d?this._url:ti("img");if(jt(b,"leaflet-image-layer"),this._zoomAnimated&&jt(b,"leaflet-zoom-animated"),this.options.className&&jt(b,this.options.className),b.onselectstart=j,b.onmousemove=j,b.onload=f(this.fire,this,"load"),b.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),d){this._url=b.src;return}b.src=this._url,b.alt=this.options.alt},_animateZoom:function(d){var b=this._map.getZoomScale(d.zoom),C=this._map._latLngBoundsToNewLayerBounds(this._bounds,d.zoom,d.center).min;ar(this._image,C,b)},_reset:function(){var d=this._image,b=new Ht(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),C=b.getSize();Gi(d,b.min),d.style.width=C.x+"px",d.style.height=C.y+"px"},_updateOpacity:function(){Un(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var d=this.options.errorOverlayUrl;d&&this._url!==d&&(this._url=d,this._image.src=d)},getCenter:function(){return this._bounds.getCenter()}}),$h=function(d,b,C){return new po(d,b,C)},Iu=po.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var d=this._url.tagName==="VIDEO",b=this._image=d?this._url:ti("video");if(jt(b,"leaflet-image-layer"),this._zoomAnimated&&jt(b,"leaflet-zoom-animated"),this.options.className&&jt(b,this.options.className),b.onselectstart=j,b.onmousemove=j,b.onloadeddata=f(this.fire,this,"load"),d){for(var C=b.getElementsByTagName("source"),F=[],q=0;q<C.length;q++)F.push(C[q].src);this._url=C.length>0?F:[b.src];return}Pe(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(b.style,"objectFit")&&(b.style.objectFit="fill"),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop,b.muted=!!this.options.muted,b.playsInline=!!this.options.playsInline;for(var ie=0;ie<this._url.length;ie++){var be=ti("source");be.src=this._url[ie],b.appendChild(be)}}});function Du(d,b,C){return new Iu(d,b,C)}var zu=po.extend({_initImage:function(){var d=this._image=this._url;jt(d,"leaflet-image-layer"),this._zoomAnimated&&jt(d,"leaflet-zoom-animated"),this.options.className&&jt(d,this.options.className),d.onselectstart=j,d.onmousemove=j}});function ni(d,b,C){return new zu(d,b,C)}var ca=ea.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(d,b){d&&(d instanceof Ct||Pe(d))?(this._latlng=Pt(d),ae(this,b)):(ae(this,d),this._source=b),this.options.content&&(this._content=this.options.content)},openOn:function(d){return d=arguments.length?d:this._source._map,d.hasLayer(this)||d.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(d){return this._map?this.close():(arguments.length?this._source=d:d=this._source,this._prepareOpen(),this.openOn(d._map)),this},onAdd:function(d){this._zoomAnimated=d._zoomAnimated,this._container||this._initLayout(),d._fadeAnimated&&Un(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),d._fadeAnimated&&Un(this._container,1),this.bringToFront(),this.options.interactive&&(jt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(d){d._fadeAnimated?(Un(this._container,0),this._removeTimeout=setTimeout(f(ci,void 0,this._container),200)):ci(this._container),this.options.interactive&&(Ui(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(d){return this._latlng=Pt(d),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(d){return this._content=d,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var d={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vi(this._container),this},bringToBack:function(){return this._map&&Zr(this._container),this},_prepareOpen:function(d){var b=this._source;if(!b._map)return!1;if(b instanceof Da){b=null;var C=this._source._layers;for(var F in C)if(C[F]._map){b=C[F];break}if(!b)return!1;this._source=b}if(!d)if(b.getCenter)d=b.getCenter();else if(b.getLatLng)d=b.getLatLng();else if(b.getBounds)d=b.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(d),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var d=this._contentNode,b=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof b=="string")d.innerHTML=b;else{for(;d.hasChildNodes();)d.removeChild(d.firstChild);d.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var d=this._map.latLngToLayerPoint(this._latlng),b=wt(this.options.offset),C=this._getAnchor();this._zoomAnimated?Gi(this._container,d.add(C)):b=b.add(d).add(C);var F=this._containerBottom=-b.y,q=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=F+"px",this._container.style.left=q+"px"}},_getAnchor:function(){return[0,0]}});Ut.include({_initOverlay:function(d,b,C,F){var q=b;return q instanceof d||(q=new d(F).setContent(b)),C&&q.setLatLng(C),q}}),ea.include({_initOverlay:function(d,b,C,F){var q=C;return q instanceof d?(ae(q,F),q._source=this):(q=b&&!F?b:new d(F,this),q.setContent(C)),q}});var es=ca.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(d){return d=arguments.length?d:this._source._map,!d.hasLayer(this)&&d._popup&&d._popup.options.autoClose&&d.removeLayer(d._popup),d._popup=this,ca.prototype.openOn.call(this,d)},onAdd:function(d){ca.prototype.onAdd.call(this,d),d.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Za||this._source.on("preclick",Yi))},onRemove:function(d){ca.prototype.onRemove.call(this,d),d.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Za||this._source.off("preclick",Yi))},getEvents:function(){var d=ca.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(d.preclick=this.close),this.options.keepInView&&(d.moveend=this._adjustPan),d},_initLayout:function(){var d="leaflet-popup",b=this._container=ti("div",d+" "+(this.options.className||"")+" leaflet-zoom-animated"),C=this._wrapper=ti("div",d+"-content-wrapper",b);if(this._contentNode=ti("div",d+"-content",C),_a(b),Cr(this._contentNode),St(b,"contextmenu",Yi),this._tipContainer=ti("div",d+"-tip-container",b),this._tip=ti("div",d+"-tip",this._tipContainer),this.options.closeButton){var F=this._closeButton=ti("a",d+"-close-button",b);F.setAttribute("role","button"),F.setAttribute("aria-label","Close popup"),F.href="#close",F.innerHTML='<span aria-hidden="true">&#215;</span>',St(F,"click",function(q){Kt(q),this.close()},this)}},_updateLayout:function(){var d=this._contentNode,b=d.style;b.width="",b.whiteSpace="nowrap";var C=d.offsetWidth;C=Math.min(C,this.options.maxWidth),C=Math.max(C,this.options.minWidth),b.width=C+1+"px",b.whiteSpace="",b.height="";var F=d.offsetHeight,q=this.options.maxHeight,ie="leaflet-popup-scrolled";q&&F>q?(b.height=q+"px",jt(d,ie)):Ui(d,ie),this._containerWidth=this._container.offsetWidth},_animateZoom:function(d){var b=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center),C=this._getAnchor();Gi(this._container,b.add(C))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var d=this._map,b=parseInt(Nn(this._container,"marginBottom"),10)||0,C=this._container.offsetHeight+b,F=this._containerWidth,q=new xt(this._containerLeft,-C-this._containerBottom);q._add(Wr(this._container));var ie=d.layerPointToContainerPoint(q),be=wt(this.options.autoPanPadding),Ae=wt(this.options.autoPanPaddingTopLeft||be),Ne=wt(this.options.autoPanPaddingBottomRight||be),Qe=d.getSize(),pt=0,At=0;ie.x+F+Ne.x>Qe.x&&(pt=ie.x+F-Qe.x+Ne.x),ie.x-pt-Ae.x<0&&(pt=ie.x-Ae.x),ie.y+C+Ne.y>Qe.y&&(At=ie.y+C-Qe.y+Ne.y),ie.y-At-Ae.y<0&&(At=ie.y-Ae.y),(pt||At)&&(this.options.keepInView&&(this._autopanning=!0),d.fire("autopanstart").panBy([pt,At]))}},_getAnchor:function(){return wt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Zo=function(d,b){return new es(d,b)};Ut.mergeOptions({closePopupOnClick:!0}),Ut.include({openPopup:function(d,b,C){return this._initOverlay(es,d,b,C).openOn(this),this},closePopup:function(d){return d=arguments.length?d:this._popup,d&&d.close(),this}}),ea.include({bindPopup:function(d,b){return this._popup=this._initOverlay(es,this._popup,d,b),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(d){return this._popup&&(this instanceof Da||(this._popup._source=this),this._popup._prepareOpen(d||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(d){return this._popup&&this._popup.setContent(d),this},getPopup:function(){return this._popup},_openPopup:function(d){if(!(!this._popup||!this._map)){ua(d);var b=d.layer||d.target;if(this._popup._source===b&&!(b instanceof Za)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(d.latlng);return}this._popup._source=b,this.openPopup(d.latlng)}},_movePopup:function(d){this._popup.setLatLng(d.latlng)},_onKeyPress:function(d){d.originalEvent.keyCode===13&&this._openPopup(d)}});var Es=ca.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(d){ca.prototype.onAdd.call(this,d),this.setOpacity(this.options.opacity),d.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(d){ca.prototype.onRemove.call(this,d),d.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var d=ca.prototype.getEvents.call(this);return this.options.permanent||(d.preclick=this.close),d},_initLayout:function(){var d="leaflet-tooltip",b=d+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ti("div",b),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+S(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(d){var b,C,F=this._map,q=this._container,ie=F.latLngToContainerPoint(F.getCenter()),be=F.layerPointToContainerPoint(d),Ae=this.options.direction,Ne=q.offsetWidth,Qe=q.offsetHeight,pt=wt(this.options.offset),At=this._getAnchor();Ae==="top"?(b=Ne/2,C=Qe):Ae==="bottom"?(b=Ne/2,C=0):Ae==="center"?(b=Ne/2,C=Qe/2):Ae==="right"?(b=0,C=Qe/2):Ae==="left"?(b=Ne,C=Qe/2):be.x<ie.x?(Ae="right",b=0,C=Qe/2):(Ae="left",b=Ne+(pt.x+At.x)*2,C=Qe/2),d=d.subtract(wt(b,C,!0)).add(pt).add(At),Ui(q,"leaflet-tooltip-right"),Ui(q,"leaflet-tooltip-left"),Ui(q,"leaflet-tooltip-top"),Ui(q,"leaflet-tooltip-bottom"),jt(q,"leaflet-tooltip-"+Ae),Gi(q,d)},_updatePosition:function(){var d=this._map.latLngToLayerPoint(this._latlng);this._setPosition(d)},setOpacity:function(d){this.options.opacity=d,this._container&&Un(this._container,d)},_animateZoom:function(d){var b=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center);this._setPosition(b)},_getAnchor:function(){return wt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ts=function(d,b){return new Es(d,b)};Ut.include({openTooltip:function(d,b,C){return this._initOverlay(Es,d,b,C).openOn(this),this},closeTooltip:function(d){return d.close(),this}}),ea.include({bindTooltip:function(d,b){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Es,this._tooltip,d,b),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(d){if(!(!d&&this._tooltipHandlersAdded)){var b=d?"off":"on",C={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?C.add=this._openTooltip:(C.mouseover=this._openTooltip,C.mouseout=this.closeTooltip,C.click=this._openTooltip,this._map?this._addFocusListeners():C.add=this._addFocusListeners),this._tooltip.options.sticky&&(C.mousemove=this._moveTooltip),this[b](C),this._tooltipHandlersAdded=!d}},openTooltip:function(d){return this._tooltip&&(this instanceof Da||(this._tooltip._source=this),this._tooltip._prepareOpen(d)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(d){return this._tooltip&&this._tooltip.setContent(d),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(d){var b=typeof d.getElement=="function"&&d.getElement();b&&(St(b,"focus",function(){this._tooltip._source=d,this.openTooltip()},this),St(b,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(d){var b=typeof d.getElement=="function"&&d.getElement();b&&b.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(d){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var b=this;this._map.once("moveend",function(){b._openOnceFlag=!1,b._openTooltip(d)});return}this._tooltip._source=d.layer||d.target,this.openTooltip(this._tooltip.options.sticky?d.latlng:void 0)}},_moveTooltip:function(d){var b=d.latlng,C,F;this._tooltip.options.sticky&&d.originalEvent&&(C=this._map.mouseEventToContainerPoint(d.originalEvent),F=this._map.containerPointToLayerPoint(C),b=this._map.layerPointToLatLng(F)),this._tooltip.setLatLng(b)}});var As=Ar.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(d){var b=d&&d.tagName==="DIV"?d:document.createElement("div"),C=this.options;if(C.html instanceof Element?(qr(b),b.appendChild(C.html)):b.innerHTML=C.html!==!1?C.html:"",C.bgPos){var F=wt(C.bgPos);b.style.backgroundPosition=-F.x+"px "+-F.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});function Is(d){return new As(d)}Ar.Default=Ms;var In=ea.extend({options:{tileSize:256,opacity:1,updateWhenIdle:je.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(d){ae(this,d)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(d){d._addZoomLimit(this)},onRemove:function(d){this._removeAllTiles(),ci(this._container),d._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Zr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(d){return this.options.opacity=d,this._updateOpacity(),this},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var d=this._clampZoom(this._map.getZoom());d!==this._tileZoom&&(this._tileZoom=d,this._updateLevels()),this._update()}return this},getEvents:function(){var d={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),d.move=this._onMove),this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},createTile:function(){return document.createElement("div")},getTileSize:function(){var d=this.options.tileSize;return d instanceof xt?d:new xt(d,d)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(d){for(var b=this.getPane().children,C=-d(-1/0,1/0),F=0,q=b.length,ie;F<q;F++)ie=b[F].style.zIndex,b[F]!==this._container&&ie&&(C=d(C,+ie));isFinite(C)&&(this.options.zIndex=C+d(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!je.ielt9){Un(this._container,this.options.opacity);var d=+new Date,b=!1,C=!1;for(var F in this._tiles){var q=this._tiles[F];if(!(!q.current||!q.loaded)){var ie=Math.min(1,(d-q.loaded)/200);Un(q.el,ie),ie<1?b=!0:(q.active?C=!0:this._onOpaqueTile(q),q.active=!0)}}C&&!this._noPrune&&this._pruneTiles(),b&&(bt(this._fadeFrame),this._fadeFrame=vt(this._updateOpacity,this))}},_onOpaqueTile:j,_initContainer:function(){this._container||(this._container=ti("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var d=this._tileZoom,b=this.options.maxZoom;if(d!==void 0){for(var C in this._levels)C=Number(C),this._levels[C].el.children.length||C===d?(this._levels[C].el.style.zIndex=b-Math.abs(d-C),this._onUpdateLevel(C)):(ci(this._levels[C].el),this._removeTilesAtZoom(C),this._onRemoveLevel(C),delete this._levels[C]);var F=this._levels[d],q=this._map;return F||(F=this._levels[d]={},F.el=ti("div","leaflet-tile-container leaflet-zoom-animated",this._container),F.el.style.zIndex=b,F.origin=q.project(q.unproject(q.getPixelOrigin()),d).round(),F.zoom=d,this._setZoomTransform(F,q.getCenter(),q.getZoom()),j(F.el.offsetWidth),this._onCreateLevel(F)),this._level=F,F}},_onUpdateLevel:j,_onRemoveLevel:j,_onCreateLevel:j,_pruneTiles:function(){if(this._map){var d,b,C=this._map.getZoom();if(C>this.options.maxZoom||C<this.options.minZoom){this._removeAllTiles();return}for(d in this._tiles)b=this._tiles[d],b.retain=b.current;for(d in this._tiles)if(b=this._tiles[d],b.current&&!b.active){var F=b.coords;this._retainParent(F.x,F.y,F.z,F.z-5)||this._retainChildren(F.x,F.y,F.z,F.z+2)}for(d in this._tiles)this._tiles[d].retain||this._removeTile(d)}},_removeTilesAtZoom:function(d){for(var b in this._tiles)this._tiles[b].coords.z===d&&this._removeTile(b)},_removeAllTiles:function(){for(var d in this._tiles)this._removeTile(d)},_invalidateAll:function(){for(var d in this._levels)ci(this._levels[d].el),this._onRemoveLevel(Number(d)),delete this._levels[d];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(d,b,C,F){var q=Math.floor(d/2),ie=Math.floor(b/2),be=C-1,Ae=new xt(+q,+ie);Ae.z=+be;var Ne=this._tileCoordsToKey(Ae),Qe=this._tiles[Ne];return Qe&&Qe.active?(Qe.retain=!0,!0):(Qe&&Qe.loaded&&(Qe.retain=!0),be>F?this._retainParent(q,ie,be,F):!1)},_retainChildren:function(d,b,C,F){for(var q=2*d;q<2*d+2;q++)for(var ie=2*b;ie<2*b+2;ie++){var be=new xt(q,ie);be.z=C+1;var Ae=this._tileCoordsToKey(be),Ne=this._tiles[Ae];if(Ne&&Ne.active){Ne.retain=!0;continue}else Ne&&Ne.loaded&&(Ne.retain=!0);C+1<F&&this._retainChildren(q,ie,C+1,F)}},_resetView:function(d){var b=d&&(d.pinch||d.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(d){this._setView(d.center,d.zoom,!0,d.noUpdate)},_clampZoom:function(d){var b=this.options;return b.minNativeZoom!==void 0&&d<b.minNativeZoom?b.minNativeZoom:b.maxNativeZoom!==void 0&&b.maxNativeZoom<d?b.maxNativeZoom:d},_setView:function(d,b,C,F){var q=Math.round(b);this.options.maxZoom!==void 0&&q>this.options.maxZoom||this.options.minZoom!==void 0&&q<this.options.minZoom?q=void 0:q=this._clampZoom(q);var ie=this.options.updateWhenZooming&&q!==this._tileZoom;(!F||ie)&&(this._tileZoom=q,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),q!==void 0&&this._update(d),C||this._pruneTiles(),this._noPrune=!!C),this._setZoomTransforms(d,b)},_setZoomTransforms:function(d,b){for(var C in this._levels)this._setZoomTransform(this._levels[C],d,b)},_setZoomTransform:function(d,b,C){var F=this._map.getZoomScale(C,d.zoom),q=d.origin.multiplyBy(F).subtract(this._map._getNewPixelOrigin(b,C)).round();je.any3d?ar(d.el,q,F):Gi(d.el,q)},_resetGrid:function(){var d=this._map,b=d.options.crs,C=this._tileSize=this.getTileSize(),F=this._tileZoom,q=this._map.getPixelWorldBounds(this._tileZoom);q&&(this._globalTileRange=this._pxBoundsToTileRange(q)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(d.project([0,b.wrapLng[0]],F).x/C.x),Math.ceil(d.project([0,b.wrapLng[1]],F).x/C.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(d.project([b.wrapLat[0],0],F).y/C.x),Math.ceil(d.project([b.wrapLat[1],0],F).y/C.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(d){var b=this._map,C=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),F=b.getZoomScale(C,this._tileZoom),q=b.project(d,this._tileZoom).floor(),ie=b.getSize().divideBy(F*2);return new Ht(q.subtract(ie),q.add(ie))},_update:function(d){var b=this._map;if(b){var C=this._clampZoom(b.getZoom());if(d===void 0&&(d=b.getCenter()),this._tileZoom!==void 0){var F=this._getTiledPixelBounds(d),q=this._pxBoundsToTileRange(F),ie=q.getCenter(),be=[],Ae=this.options.keepBuffer,Ne=new Ht(q.getBottomLeft().subtract([Ae,-Ae]),q.getTopRight().add([Ae,-Ae]));if(!(isFinite(q.min.x)&&isFinite(q.min.y)&&isFinite(q.max.x)&&isFinite(q.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Qe in this._tiles){var pt=this._tiles[Qe].coords;(pt.z!==this._tileZoom||!Ne.contains(new xt(pt.x,pt.y)))&&(this._tiles[Qe].current=!1)}if(Math.abs(C-this._tileZoom)>1){this._setView(d,C);return}for(var At=q.min.y;At<=q.max.y;At++)for(var qt=q.min.x;qt<=q.max.x;qt++){var cn=new xt(qt,At);if(cn.z=this._tileZoom,!!this._isValidTile(cn)){var Ji=this._tiles[this._tileCoordsToKey(cn)];Ji?Ji.current=!0:be.push(cn)}}if(be.sort(function(qn,Ha){return qn.distanceTo(ie)-Ha.distanceTo(ie)}),be.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var fa=document.createDocumentFragment();for(qt=0;qt<be.length;qt++)this._addTile(be[qt],fa);this._level.el.appendChild(fa)}}}},_isValidTile:function(d){var b=this._map.options.crs;if(!b.infinite){var C=this._globalTileRange;if(!b.wrapLng&&(d.x<C.min.x||d.x>C.max.x)||!b.wrapLat&&(d.y<C.min.y||d.y>C.max.y))return!1}if(!this.options.bounds)return!0;var F=this._tileCoordsToBounds(d);return Jt(this.options.bounds).overlaps(F)},_keyToBounds:function(d){return this._tileCoordsToBounds(this._keyToTileCoords(d))},_tileCoordsToNwSe:function(d){var b=this._map,C=this.getTileSize(),F=d.scaleBy(C),q=F.add(C),ie=b.unproject(F,d.z),be=b.unproject(q,d.z);return[ie,be]},_tileCoordsToBounds:function(d){var b=this._tileCoordsToNwSe(d),C=new ki(b[0],b[1]);return this.options.noWrap||(C=this._map.wrapLatLngBounds(C)),C},_tileCoordsToKey:function(d){return d.x+":"+d.y+":"+d.z},_keyToTileCoords:function(d){var b=d.split(":"),C=new xt(+b[0],+b[1]);return C.z=+b[2],C},_removeTile:function(d){var b=this._tiles[d];b&&(ci(b.el),delete this._tiles[d],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(d)}))},_initTile:function(d){jt(d,"leaflet-tile");var b=this.getTileSize();d.style.width=b.x+"px",d.style.height=b.y+"px",d.onselectstart=j,d.onmousemove=j,je.ielt9&&this.options.opacity<1&&Un(d,this.options.opacity)},_addTile:function(d,b){var C=this._getTilePos(d),F=this._tileCoordsToKey(d),q=this.createTile(this._wrapCoords(d),f(this._tileReady,this,d));this._initTile(q),this.createTile.length<2&&vt(f(this._tileReady,this,d,null,q)),Gi(q,C),this._tiles[F]={el:q,coords:d,current:!0},b.appendChild(q),this.fire("tileloadstart",{tile:q,coords:d})},_tileReady:function(d,b,C){b&&this.fire("tileerror",{error:b,tile:C,coords:d});var F=this._tileCoordsToKey(d);C=this._tiles[F],C&&(C.loaded=+new Date,this._map._fadeAnimated?(Un(C.el,0),bt(this._fadeFrame),this._fadeFrame=vt(this._updateOpacity,this)):(C.active=!0,this._pruneTiles()),b||(jt(C.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:C.el,coords:d})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),je.ielt9||!this._map._fadeAnimated?vt(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(d){return d.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(d){var b=new xt(this._wrapX?D(d.x,this._wrapX):d.x,this._wrapY?D(d.y,this._wrapY):d.y);return b.z=d.z,b},_pxBoundsToTileRange:function(d){var b=this.getTileSize();return new Ht(d.min.unscaleBy(b).floor(),d.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var d in this._tiles)if(!this._tiles[d].loaded)return!1;return!0}});function Ru(d){return new In(d)}var is=In.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(d,b){this._url=d,b=ae(this,b),b.detectRetina&&je.retina&&b.maxZoom>0?(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom=Math.min(b.maxZoom,b.minZoom+1)):(b.zoomOffset++,b.maxZoom=Math.max(b.minZoom,b.maxZoom-1)),b.minZoom=Math.max(0,b.minZoom)):b.zoomReverse?b.minZoom=Math.min(b.maxZoom,b.minZoom):b.maxZoom=Math.max(b.minZoom,b.maxZoom),typeof b.subdomains=="string"&&(b.subdomains=b.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(d,b){return this._url===d&&b===void 0&&(b=!0),this._url=d,b||this.redraw(),this},createTile:function(d,b){var C=document.createElement("img");return St(C,"load",f(this._tileOnLoad,this,b,C)),St(C,"error",f(this._tileOnError,this,b,C)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(C.referrerPolicy=this.options.referrerPolicy),C.alt="",C.src=this.getTileUrl(d),C},getTileUrl:function(d){var b={r:je.retina?"@2x":"",s:this._getSubdomain(d),x:d.x,y:d.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var C=this._globalTileRange.max.y-d.y;this.options.tms&&(b.y=C),b["-y"]=C}return xe(this._url,u(b,this.options))},_tileOnLoad:function(d,b){je.ielt9?setTimeout(f(d,this,null,b),0):d(null,b)},_tileOnError:function(d,b,C){var F=this.options.errorTileUrl;F&&b.getAttribute("src")!==F&&(b.src=F),d(C,b)},_onTileRemove:function(d){d.tile.onload=null},_getZoomForUrl:function(){var d=this._tileZoom,b=this.options.maxZoom,C=this.options.zoomReverse,F=this.options.zoomOffset;return C&&(d=b-d),d+F},_getSubdomain:function(d){var b=Math.abs(d.x+d.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var d,b;for(d in this._tiles)if(this._tiles[d].coords.z!==this._tileZoom&&(b=this._tiles[d].el,b.onload=j,b.onerror=j,!b.complete)){b.src=Ue;var C=this._tiles[d].coords;ci(b),delete this._tiles[d],this.fire("tileabort",{tile:b,coords:C})}},_removeTile:function(d){var b=this._tiles[d];if(b)return b.el.setAttribute("src",Ue),In.prototype._removeTile.call(this,d)},_tileReady:function(d,b,C){if(!(!this._map||C&&C.getAttribute("src")===Ue))return In.prototype._tileReady.call(this,d,b,C)}});function Wo(d,b){return new is(d,b)}var Dr=is.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(d,b){this._url=d;var C=u({},this.defaultWmsParams);for(var F in b)F in this.options||(C[F]=b[F]);b=ae(this,b);var q=b.detectRetina&&je.retina?2:1,ie=this.getTileSize();C.width=ie.x*q,C.height=ie.y*q,this.wmsParams=C},onAdd:function(d){this._crs=this.options.crs||d.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,is.prototype.onAdd.call(this,d)},getTileUrl:function(d){var b=this._tileCoordsToNwSe(d),C=this._crs,F=mi(C.project(b[0]),C.project(b[1])),q=F.min,ie=F.max,be=(this._wmsVersion>=1.3&&this._crs===Tu?[q.y,q.x,ie.y,ie.x]:[q.x,q.y,ie.x,ie.y]).join(","),Ae=is.prototype.getTileUrl.call(this,d);return Ae+H(this.wmsParams,Ae,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+be},setParams:function(d,b){return u(this.wmsParams,d),b||this.redraw(),this}});function Ho(d,b){return new Dr(d,b)}is.WMS=Dr,Wo.wms=Ho;var va=ea.extend({options:{padding:.1},initialize:function(d){ae(this,d),S(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),jt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var d={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(d.zoomanim=this._onAnimZoom),d},_onAnimZoom:function(d){this._updateTransform(d.center,d.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(d,b){var C=this._map.getZoomScale(b,this._zoom),F=this._map.getSize().multiplyBy(.5+this.options.padding),q=this._map.project(this._center,b),ie=F.multiplyBy(-C).add(q).subtract(this._map._getNewPixelOrigin(d,b));je.any3d?ar(this._container,ie,C):Gi(this._container,ie)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var d in this._layers)this._layers[d]._reset()},_onZoomEnd:function(){for(var d in this._layers)this._layers[d]._project()},_updatePaths:function(){for(var d in this._layers)this._layers[d]._update()},_update:function(){var d=this.options.padding,b=this._map.getSize(),C=this._map.containerPointToLayerPoint(b.multiplyBy(-d)).round();this._bounds=new Ht(C,C.add(b.multiplyBy(1+d*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ds=va.extend({options:{tolerance:0},getEvents:function(){var d=va.prototype.getEvents.call(this);return d.viewprereset=this._onViewPreReset,d},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){va.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var d=this._container=document.createElement("canvas");St(d,"mousemove",this._onMouseMove,this),St(d,"click dblclick mousedown mouseup contextmenu",this._onClick,this),St(d,"mouseout",this._handleMouseOut,this),d._leaflet_disable_events=!0,this._ctx=d.getContext("2d")},_destroyContainer:function(){bt(this._redrawRequest),delete this._ctx,ci(this._container),dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var d;this._redrawBounds=null;for(var b in this._layers)d=this._layers[b],d._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){va.prototype._update.call(this);var d=this._bounds,b=this._container,C=d.getSize(),F=je.retina?2:1;Gi(b,d.min),b.width=F*C.x,b.height=F*C.y,b.style.width=C.x+"px",b.style.height=C.y+"px",je.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y),this.fire("update")}},_reset:function(){va.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(d){this._updateDashArray(d),this._layers[S(d)]=d;var b=d._order={layer:d,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(d){this._requestRedraw(d)},_removePath:function(d){var b=d._order,C=b.next,F=b.prev;C?C.prev=F:this._drawLast=F,F?F.next=C:this._drawFirst=C,delete d._order,delete this._layers[S(d)],this._requestRedraw(d)},_updatePath:function(d){this._extendRedrawBounds(d),d._project(),d._update(),this._requestRedraw(d)},_updateStyle:function(d){this._updateDashArray(d),this._requestRedraw(d)},_updateDashArray:function(d){if(typeof d.options.dashArray=="string"){var b=d.options.dashArray.split(/[, ]+/),C=[],F,q;for(q=0;q<b.length;q++){if(F=Number(b[q]),isNaN(F))return;C.push(F)}d.options._dashArray=C}else d.options._dashArray=d.options.dashArray},_requestRedraw:function(d){this._map&&(this._extendRedrawBounds(d),this._redrawRequest=this._redrawRequest||vt(this._redraw,this))},_extendRedrawBounds:function(d){if(d._pxBounds){var b=(d.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ht,this._redrawBounds.extend(d._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(d._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var d=this._redrawBounds;if(d){var b=d.getSize();this._ctx.clearRect(d.min.x,d.min.y,b.x,b.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var d,b=this._redrawBounds;if(this._ctx.save(),b){var C=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,C.x,C.y),this._ctx.clip()}this._drawing=!0;for(var F=this._drawFirst;F;F=F.next)d=F.layer,(!b||d._pxBounds&&d._pxBounds.intersects(b))&&d._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(d,b){if(this._drawing){var C,F,q,ie,be=d._parts,Ae=be.length,Ne=this._ctx;if(Ae){for(Ne.beginPath(),C=0;C<Ae;C++){for(F=0,q=be[C].length;F<q;F++)ie=be[C][F],Ne[F?"lineTo":"moveTo"](ie.x,ie.y);b&&Ne.closePath()}this._fillStroke(Ne,d)}}},_updateCircle:function(d){if(!(!this._drawing||d._empty())){var b=d._point,C=this._ctx,F=Math.max(Math.round(d._radius),1),q=(Math.max(Math.round(d._radiusY),1)||F)/F;q!==1&&(C.save(),C.scale(1,q)),C.beginPath(),C.arc(b.x,b.y/q,F,0,Math.PI*2,!1),q!==1&&C.restore(),this._fillStroke(C,d)}},_fillStroke:function(d,b){var C=b.options;C.fill&&(d.globalAlpha=C.fillOpacity,d.fillStyle=C.fillColor||C.color,d.fill(C.fillRule||"evenodd")),C.stroke&&C.weight!==0&&(d.setLineDash&&d.setLineDash(b.options&&b.options._dashArray||[]),d.globalAlpha=C.opacity,d.lineWidth=C.weight,d.strokeStyle=C.color,d.lineCap=C.lineCap,d.lineJoin=C.lineJoin,d.stroke())},_onClick:function(d){for(var b=this._map.mouseEventToLayerPoint(d),C,F,q=this._drawFirst;q;q=q.next)C=q.layer,C.options.interactive&&C._containsPoint(b)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(C))&&(F=C);this._fireEvent(F?[F]:!1,d)},_onMouseMove:function(d){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var b=this._map.mouseEventToLayerPoint(d);this._handleMouseHover(d,b)}},_handleMouseOut:function(d){var b=this._hoveredLayer;b&&(Ui(this._container,"leaflet-interactive"),this._fireEvent([b],d,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(d,b){if(!this._mouseHoverThrottled){for(var C,F,q=this._drawFirst;q;q=q.next)C=q.layer,C.options.interactive&&C._containsPoint(b)&&(F=C);F!==this._hoveredLayer&&(this._handleMouseOut(d),F&&(jt(this._container,"leaflet-interactive"),this._fireEvent([F],d,"mouseover"),this._hoveredLayer=F)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,d),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(d,b,C){this._map._fireDOMEvent(b,C||b.type,d)},_bringToFront:function(d){var b=d._order;if(b){var C=b.next,F=b.prev;if(C)C.prev=F;else return;F?F.next=C:C&&(this._drawFirst=C),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(d)}},_bringToBack:function(d){var b=d._order;if(b){var C=b.next,F=b.prev;if(F)F.next=C;else return;C?C.prev=F:F&&(this._drawLast=F),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(d)}}});function mo(d){return je.canvas?new Ds(d):null}var zs=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(d){return document.createElement("<lvml:"+d+' class="lvml">')}}catch{}return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Rs={_initContainer:function(){this._container=ti("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(va.prototype._update.call(this),this.fire("update"))},_initPath:function(d){var b=d._container=zs("shape");jt(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",d._path=zs("path"),b.appendChild(d._path),this._updateStyle(d),this._layers[S(d)]=d},_addPath:function(d){var b=d._container;this._container.appendChild(b),d.options.interactive&&d.addInteractiveTarget(b)},_removePath:function(d){var b=d._container;ci(b),d.removeInteractiveTarget(b),delete this._layers[S(d)]},_updateStyle:function(d){var b=d._stroke,C=d._fill,F=d.options,q=d._container;q.stroked=!!F.stroke,q.filled=!!F.fill,F.stroke?(b||(b=d._stroke=zs("stroke")),q.appendChild(b),b.weight=F.weight+"px",b.color=F.color,b.opacity=F.opacity,F.dashArray?b.dashStyle=Pe(F.dashArray)?F.dashArray.join(" "):F.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=F.lineCap.replace("butt","flat"),b.joinstyle=F.lineJoin):b&&(q.removeChild(b),d._stroke=null),F.fill?(C||(C=d._fill=zs("fill")),q.appendChild(C),C.color=F.fillColor||F.color,C.opacity=F.fillOpacity):C&&(q.removeChild(C),d._fill=null)},_updateCircle:function(d){var b=d._point.round(),C=Math.round(d._radius),F=Math.round(d._radiusY||C);this._setPath(d,d._empty()?"M0 0":"AL "+b.x+","+b.y+" "+C+","+F+" 0,"+65535*360)},_setPath:function(d,b){d._path.v=b},_bringToFront:function(d){vi(d._container)},_bringToBack:function(d){Zr(d._container)}},fr=je.vml?zs:oa,Fs=va.extend({_initContainer:function(){this._container=fr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ci(this._container),dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){va.prototype._update.call(this);var d=this._bounds,b=d.getSize(),C=this._container;(!this._svgSize||!this._svgSize.equals(b))&&(this._svgSize=b,C.setAttribute("width",b.x),C.setAttribute("height",b.y)),Gi(C,d.min),C.setAttribute("viewBox",[d.min.x,d.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(d){var b=d._path=fr("path");d.options.className&&jt(b,d.options.className),d.options.interactive&&jt(b,"leaflet-interactive"),this._updateStyle(d),this._layers[S(d)]=d},_addPath:function(d){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(d._path),d.addInteractiveTarget(d._path)},_removePath:function(d){ci(d._path),d.removeInteractiveTarget(d._path),delete this._layers[S(d)]},_updatePath:function(d){d._project(),d._update()},_updateStyle:function(d){var b=d._path,C=d.options;b&&(C.stroke?(b.setAttribute("stroke",C.color),b.setAttribute("stroke-opacity",C.opacity),b.setAttribute("stroke-width",C.weight),b.setAttribute("stroke-linecap",C.lineCap),b.setAttribute("stroke-linejoin",C.lineJoin),C.dashArray?b.setAttribute("stroke-dasharray",C.dashArray):b.removeAttribute("stroke-dasharray"),C.dashOffset?b.setAttribute("stroke-dashoffset",C.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),C.fill?(b.setAttribute("fill",C.fillColor||C.color),b.setAttribute("fill-opacity",C.fillOpacity),b.setAttribute("fill-rule",C.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(d,b){this._setPath(d,Ma(d._parts,b))},_updateCircle:function(d){var b=d._point,C=Math.max(Math.round(d._radius),1),F=Math.max(Math.round(d._radiusY),1)||C,q="a"+C+","+F+" 0 1,0 ",ie=d._empty()?"M0 0":"M"+(b.x-C)+","+b.y+q+C*2+",0 "+q+-C*2+",0 ";this._setPath(d,ie)},_setPath:function(d,b){d._path.setAttribute("d",b)},_bringToFront:function(d){vi(d._path)},_bringToBack:function(d){Zr(d._path)}});je.vml&&Fs.include(Rs);function Ko(d){return je.svg||je.vml?new Fs(d):null}Ut.include({getRenderer:function(d){var b=d.options.renderer||this._getPaneRenderer(d.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(d){if(d==="overlayPane"||d===void 0)return!1;var b=this._paneRenderers[d];return b===void 0&&(b=this._createRenderer({pane:d}),this._paneRenderers[d]=b),b},_createRenderer:function(d){return this.options.preferCanvas&&mo(d)||Ko(d)}});var $t=Wa.extend({initialize:function(d,b){Wa.prototype.initialize.call(this,this._boundsToLatLngs(d),b)},setBounds:function(d){return this.setLatLngs(this._boundsToLatLngs(d))},_boundsToLatLngs:function(d){return d=Jt(d),[d.getSouthWest(),d.getNorthWest(),d.getNorthEast(),d.getSouthEast()]}});function Yo(d,b){return new $t(d,b)}Fs.create=fr,Fs.pointsToPath=Ma,za.geometryToLayer=ho,za.coordsToLatLng=da,za.coordsToLatLngs=Jr,za.latLngToCoords=fo,za.latLngsToCoords=Ls,za.getFeature=Ir,za.asFeature=Qr,Ut.mergeOptions({boxZoom:!0});var Fu=ya.extend({initialize:function(d){this._map=d,this._container=d._container,this._pane=d._panes.overlayPane,this._resetStateTimeout=0,d.on("unload",this._destroy,this)},addHooks:function(){St(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ci(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(d){if(!d.shiftKey||d.which!==1&&d.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),rr(),no(),this._startPoint=this._map.mouseEventToContainerPoint(d),St(document,{contextmenu:ua,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=ti("div","leaflet-zoom-box",this._container),jt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(d);var b=new Ht(this._point,this._startPoint),C=b.getSize();Gi(this._box,b.min),this._box.style.width=C.x+"px",this._box.style.height=C.y+"px"},_finish:function(){this._moved&&(ci(this._box),Ui(this._container,"leaflet-crosshair")),Pr(),Hr(),dt(document,{contextmenu:ua,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(d){if(!(d.which!==1&&d.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var b=new ki(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(d){d.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ut.addInitHook("addHandler","boxZoom",Fu),Ut.mergeOptions({doubleClickZoom:!0});var Al=ya.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(d){var b=this._map,C=b.getZoom(),F=b.options.zoomDelta,q=d.originalEvent.shiftKey?C-F:C+F;b.options.doubleClickZoom==="center"?b.setZoom(q):b.setZoomAround(d.containerPoint,q)}});Ut.addInitHook("addHandler","doubleClickZoom",Al),Ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Os=ya.extend({addHooks:function(){if(!this._draggable){var d=this._map;this._draggable=new qi(d._mapPane,d._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),d.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),d.on("zoomend",this._onZoomEnd,this),d.whenReady(this._onZoomEnd,this))}jt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ui(this._map._container,"leaflet-grab"),Ui(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var d=this._map;if(d._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=Jt(this._map.options.maxBounds);this._offsetLimit=mi(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;d.fire("movestart").fire("dragstart"),d.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(d){if(this._map.options.inertia){var b=this._lastTime=+new Date,C=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(C),this._times.push(b),this._prunePositions(b)}this._map.fire("move",d).fire("drag",d)},_prunePositions:function(d){for(;this._positions.length>1&&d-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var d=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(d).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(d,b){return d-(d-b)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var d=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;d.x<b.min.x&&(d.x=this._viscousLimit(d.x,b.min.x)),d.y<b.min.y&&(d.y=this._viscousLimit(d.y,b.min.y)),d.x>b.max.x&&(d.x=this._viscousLimit(d.x,b.max.x)),d.y>b.max.y&&(d.y=this._viscousLimit(d.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(d)}},_onPreDragWrap:function(){var d=this._worldWidth,b=Math.round(d/2),C=this._initialWorldOffset,F=this._draggable._newPos.x,q=(F-b+C)%d+b-C,ie=(F+b+C)%d-b-C,be=Math.abs(q+C)<Math.abs(ie+C)?q:ie;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=be},_onDragEnd:function(d){var b=this._map,C=b.options,F=!C.inertia||d.noInertia||this._times.length<2;if(b.fire("dragend",d),F)b.fire("moveend");else{this._prunePositions(+new Date);var q=this._lastPos.subtract(this._positions[0]),ie=(this._lastTime-this._times[0])/1e3,be=C.easeLinearity,Ae=q.multiplyBy(be/ie),Ne=Ae.distanceTo([0,0]),Qe=Math.min(C.inertiaMaxSpeed,Ne),pt=Ae.multiplyBy(Qe/Ne),At=Qe/(C.inertiaDeceleration*be),qt=pt.multiplyBy(-At/2).round();!qt.x&&!qt.y?b.fire("moveend"):(qt=b._limitOffset(qt,b.options.maxBounds),vt(function(){b.panBy(qt,{duration:At,easeLinearity:be,noMoveStart:!0,animate:!0})}))}}});Ut.addInitHook("addHandler","dragging",Os),Ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ou=ya.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(d){this._map=d,this._setPanDelta(d.options.keyboardPanDelta),this._setZoomDelta(d.options.zoomDelta)},addHooks:function(){var d=this._map._container;d.tabIndex<=0&&(d.tabIndex="0"),St(d,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var d=document.body,b=document.documentElement,C=d.scrollTop||b.scrollTop,F=d.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(F,C)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(d){var b=this._panKeys={},C=this.keyCodes,F,q;for(F=0,q=C.left.length;F<q;F++)b[C.left[F]]=[-1*d,0];for(F=0,q=C.right.length;F<q;F++)b[C.right[F]]=[d,0];for(F=0,q=C.down.length;F<q;F++)b[C.down[F]]=[0,d];for(F=0,q=C.up.length;F<q;F++)b[C.up[F]]=[0,-1*d]},_setZoomDelta:function(d){var b=this._zoomKeys={},C=this.keyCodes,F,q;for(F=0,q=C.zoomIn.length;F<q;F++)b[C.zoomIn[F]]=d;for(F=0,q=C.zoomOut.length;F<q;F++)b[C.zoomOut[F]]=-d},_addHooks:function(){St(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var b=d.keyCode,C=this._map,F;if(b in this._panKeys){if(!C._panAnim||!C._panAnim._inProgress)if(F=this._panKeys[b],d.shiftKey&&(F=wt(F).multiplyBy(3)),C.options.maxBounds&&(F=C._limitOffset(wt(F),C.options.maxBounds)),C.options.worldCopyJump){var q=C.wrapLatLng(C.unproject(C.project(C.getCenter()).add(F)));C.panTo(q)}else C.panBy(F)}else if(b in this._zoomKeys)C.setZoom(C.getZoom()+(d.shiftKey?3:1)*this._zoomKeys[b]);else if(b===27&&C._popup&&C._popup.options.closeOnEscapeKey)C.closePopup();else return;ua(d)}}});Ut.addInitHook("addHandler","keyboard",Ou),Ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ju=ya.extend({addHooks:function(){St(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(d){var b=Lr(d),C=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(d),this._startTime||(this._startTime=+new Date);var F=Math.max(C-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),F),ua(d)},_performZoom:function(){var d=this._map,b=d.getZoom(),C=this._map.options.zoomSnap||0;d._stop();var F=this._delta/(this._map.options.wheelPxPerZoomLevel*4),q=4*Math.log(2/(1+Math.exp(-Math.abs(F))))/Math.LN2,ie=C?Math.ceil(q/C)*C:q,be=d._limitZoom(b+(this._delta>0?ie:-ie))-b;this._delta=0,this._startTime=null,be&&(d.options.scrollWheelZoom==="center"?d.setZoom(b+be):d.setZoomAround(this._lastMousePos,b+be))}});Ut.addInitHook("addHandler","scrollWheelZoom",ju);var Bu=600;Ut.mergeOptions({tapHold:je.touchNative&&je.safari&&je.mobile,tapTolerance:15});var $u=ya.extend({addHooks:function(){St(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(d){if(clearTimeout(this._holdTimeout),d.touches.length===1){var b=d.touches[0];this._startPos=this._newPos=new xt(b.clientX,b.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(St(document,"touchend",Kt),St(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",b))},this),Bu),St(document,"touchend touchcancel contextmenu",this._cancel,this),St(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function d(){dt(document,"touchend",Kt),dt(document,"touchend touchcancel",d)},_cancel:function(){clearTimeout(this._holdTimeout),dt(document,"touchend touchcancel contextmenu",this._cancel,this),dt(document,"touchmove",this._onMove,this)},_onMove:function(d){var b=d.touches[0];this._newPos=new xt(b.clientX,b.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(d,b){var C=new MouseEvent(d,{bubbles:!0,cancelable:!0,view:window,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY});C._simulated=!0,b.target.dispatchEvent(C)}});Ut.addInitHook("addHandler","tapHold",$u),Ut.mergeOptions({touchZoom:je.touch,bounceAtZoomLimits:!0});var Xo=ya.extend({addHooks:function(){jt(this._map._container,"leaflet-touch-zoom"),St(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ui(this._map._container,"leaflet-touch-zoom"),dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(d){var b=this._map;if(!(!d.touches||d.touches.length!==2||b._animatingZoom||this._zooming)){var C=b.mouseEventToContainerPoint(d.touches[0]),F=b.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),b.options.touchZoom!=="center"&&(this._pinchStartLatLng=b.containerPointToLatLng(C.add(F)._divideBy(2))),this._startDist=C.distanceTo(F),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),St(document,"touchmove",this._onTouchMove,this),St(document,"touchend touchcancel",this._onTouchEnd,this),Kt(d)}},_onTouchMove:function(d){if(!(!d.touches||d.touches.length!==2||!this._zooming)){var b=this._map,C=b.mouseEventToContainerPoint(d.touches[0]),F=b.mouseEventToContainerPoint(d.touches[1]),q=C.distanceTo(F)/this._startDist;if(this._zoom=b.getScaleZoom(q,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&q<1||this._zoom>b.getMaxZoom()&&q>1)&&(this._zoom=b._limitZoom(this._zoom)),b.options.touchZoom==="center"){if(this._center=this._startLatLng,q===1)return}else{var ie=C._add(F)._divideBy(2)._subtract(this._centerPoint);if(q===1&&ie.x===0&&ie.y===0)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(ie),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),bt(this._animRequest);var be=f(b._move,b,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=vt(be,this,!0),Kt(d)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,bt(this._animRequest),dt(document,"touchmove",this._onTouchMove,this),dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ut.addInitHook("addHandler","touchZoom",Xo),Ut.BoxZoom=Fu,Ut.DoubleClickZoom=Al,Ut.Drag=Os,Ut.Keyboard=Ou,Ut.ScrollWheelZoom=ju,Ut.TapHold=$u,Ut.TouchZoom=Xo,l.Bounds=Ht,l.Browser=je,l.CRS=dn,l.Canvas=Ds,l.Circle=Cs,l.CircleMarker=hr,l.Class=di,l.Control=An,l.DivIcon=As,l.DivOverlay=ca,l.DomEvent=ku,l.DomUtil=Jn,l.Draggable=qi,l.Evented=Vt,l.FeatureGroup=Da,l.GeoJSON=za,l.GridLayer=In,l.Handler=ya,l.Icon=Ar,l.ImageOverlay=po,l.LatLng=Ct,l.LatLngBounds=ki,l.Layer=ea,l.LayerGroup=Xr,l.LineUtil=Ts,l.Map=Ut,l.Marker=qa,l.Mixin=Rh,l.Path=Za,l.Point=xt,l.PolyUtil=Pl,l.Polygon=Wa,l.Polyline=dr,l.Popup=es,l.PosAnimation=Vo,l.Projection=Oh,l.Rectangle=$t,l.Renderer=va,l.SVG=Fs,l.SVGOverlay=zu,l.TileLayer=is,l.Tooltip=Es,l.Transformation=tr,l.Util=si,l.VideoOverlay=Iu,l.bind=f,l.bounds=mi,l.canvas=mo,l.circle=jh,l.circleMarker=Lu,l.control=Nt,l.divIcon=Is,l.extend=u,l.featureGroup=Ll,l.geoJSON=qo,l.geoJson=Bh,l.gridLayer=Ru,l.icon=Mu,l.imageOverlay=$h,l.latLng=Pt,l.latLngBounds=Jt,l.layerGroup=Pu,l.map=xi,l.marker=Cu,l.point=wt,l.polygon=Au,l.polyline=Eu,l.popup=Zo,l.rectangle=Yo,l.setOptions=ae,l.stamp=S,l.svg=Ko,l.svgOverlay=ni,l.tileLayer=Wo,l.tooltip=ts,l.transformation=xn,l.version=c,l.videoOverlay=Du;var js=window.L;l.noConflict=function(){return window.L=js,this},window.L=l}))})(Fd,Fd.exports)),Fd.exports}var yk=_k();const vk=zx(yk);var vf={exports:{}};var xk=vf.exports,Hy;function bk(){return Hy||(Hy=1,(function(r,i){(function(l,c){r.exports=c()})(xk,(function(){var l={},c={};function u(f,s,S){if(c[f]=S,f==="index"){var M="var sharedModule = {}; ("+c.shared+")(sharedModule); ("+c.worker+")(sharedModule);",D={};return c.shared(D),c.index(l,D),typeof window<"u"&&l.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),l}}u("shared",["exports"],(function(f){function s(a,e,n,h){return new(n||(n=Promise))((function(g,y){function v(A){try{P(h.next(A))}catch(z){y(z)}}function k(A){try{P(h.throw(A))}catch(z){y(z)}}function P(A){var z;A.done?g(A.value):(z=A.value,z instanceof n?z:new n((function(O){O(z)}))).then(v,k)}P((h=h.apply(a,e||[])).next())}))}function S(a,e){this.x=a,this.y=e}function M(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var D,j;typeof SuppressedError=="function"&&SuppressedError,S.prototype={clone(){return new S(this.x,this.y)},add(a){return this.clone()._add(a)},sub(a){return this.clone()._sub(a)},multByPoint(a){return this.clone()._multByPoint(a)},divByPoint(a){return this.clone()._divByPoint(a)},mult(a){return this.clone()._mult(a)},div(a){return this.clone()._div(a)},rotate(a){return this.clone()._rotate(a)},rotateAround(a,e){return this.clone()._rotateAround(a,e)},matMult(a){return this.clone()._matMult(a)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(a){return this.x===a.x&&this.y===a.y},dist(a){return Math.sqrt(this.distSqr(a))},distSqr(a){const e=a.x-this.x,n=a.y-this.y;return e*e+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith(a){return this.angleWithSep(a.x,a.y)},angleWithSep(a,e){return Math.atan2(this.x*e-this.y*a,this.x*a+this.y*e)},_matMult(a){const e=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=e,this},_add(a){return this.x+=a.x,this.y+=a.y,this},_sub(a){return this.x-=a.x,this.y-=a.y,this},_mult(a){return this.x*=a,this.y*=a,this},_div(a){return this.x/=a,this.y/=a,this},_multByPoint(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint(a){return this.x/=a.x,this.y/=a.y,this},_unit(){return this._div(this.mag()),this},_perp(){const a=this.y;return this.y=this.x,this.x=-a,this},_rotate(a){const e=Math.cos(a),n=Math.sin(a),h=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=h,this},_rotateAround(a,e){const n=Math.cos(a),h=Math.sin(a),g=e.y+h*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-h*(this.y-e.y),this.y=g,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:S},S.convert=function(a){if(a instanceof S)return a;if(Array.isArray(a))return new S(+a[0],+a[1]);if(a.x!==void 0&&a.y!==void 0)return new S(+a.x,+a.y);throw new Error("Expected [x, y] or {x, y} point format")};var V=(function(){if(j)return D;function a(e,n,h,g){this.cx=3*e,this.bx=3*(h-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(g-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=h,this.p2y=g}return j=1,D=a,a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,n){if(n===void 0&&(n=1e-6),e<0)return 0;if(e>1)return 1;for(var h=e,g=0;g<8;g++){var y=this.sampleCurveX(h)-e;if(Math.abs(y)<n)return h;var v=this.sampleCurveDerivativeX(h);if(Math.abs(v)<1e-6)break;h-=y/v}var k=0,P=1;for(h=e,g=0;g<20&&(y=this.sampleCurveX(h),!(Math.abs(y-e)<n));g++)e>y?k=h:P=h,h=.5*(P-k)+k;return h},solve:function(e,n){return this.sampleCurveY(this.solveCurveX(e,n))}},D})(),X=M(V);let re,ae;function H(){return re==null&&(re=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),re}function Se(){if(ae==null&&(ae=!1,H())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let h=0;h<25;h++){const g=4*h;e.fillStyle=`rgb(${g},${g+1},${g+2})`,e.fillRect(h%5,Math.floor(h/5),1,1)}const n=e.getImageData(0,0,5,5).data;for(let h=0;h<100;h++)if(h%4!=3&&n[h]!==h){ae=!0;break}}}return ae||!1}var xe=1e-6,Pe=typeof Float32Array<"u"?Float32Array:Array;function Ve(){var a=new Pe(9);return Pe!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function Ue(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function et(){var a=new Pe(3);return Pe!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Je(a){var e=a[0],n=a[1],h=a[2];return Math.sqrt(e*e+n*n+h*h)}function nt(a,e,n){var h=new Pe(3);return h[0]=a,h[1]=e,h[2]=n,h}function mt(a,e,n){return a[0]=e[0]+n[0],a[1]=e[1]+n[1],a[2]=e[2]+n[2],a}function Tt(a,e,n){return a[0]=e[0]*n,a[1]=e[1]*n,a[2]=e[2]*n,a}function vt(a,e,n){var h=e[0],g=e[1],y=e[2],v=n[0],k=n[1],P=n[2];return a[0]=g*P-y*k,a[1]=y*v-h*P,a[2]=h*k-g*v,a}var bt,si=Je;function di(a,e,n){var h=e[0],g=e[1],y=e[2],v=e[3];return a[0]=n[0]*h+n[4]*g+n[8]*y+n[12]*v,a[1]=n[1]*h+n[5]*g+n[9]*y+n[13]*v,a[2]=n[2]*h+n[6]*g+n[10]*y+n[14]*v,a[3]=n[3]*h+n[7]*g+n[11]*y+n[15]*v,a}function Wt(){var a=new Pe(4);return Pe!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function Bt(a,e,n,h){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",y=Math.PI/360;e*=y,h*=y,n*=y;var v=Math.sin(e),k=Math.cos(e),P=Math.sin(n),A=Math.cos(n),z=Math.sin(h),O=Math.cos(h);switch(g){case"xyz":a[0]=v*A*O+k*P*z,a[1]=k*P*O-v*A*z,a[2]=k*A*z+v*P*O,a[3]=k*A*O-v*P*z;break;case"xzy":a[0]=v*A*O-k*P*z,a[1]=k*P*O-v*A*z,a[2]=k*A*z+v*P*O,a[3]=k*A*O+v*P*z;break;case"yxz":a[0]=v*A*O+k*P*z,a[1]=k*P*O-v*A*z,a[2]=k*A*z-v*P*O,a[3]=k*A*O+v*P*z;break;case"yzx":a[0]=v*A*O+k*P*z,a[1]=k*P*O+v*A*z,a[2]=k*A*z-v*P*O,a[3]=k*A*O-v*P*z;break;case"zxy":a[0]=v*A*O-k*P*z,a[1]=k*P*O+v*A*z,a[2]=k*A*z+v*P*O,a[3]=k*A*O-v*P*z;break;case"zyx":a[0]=v*A*O-k*P*z,a[1]=k*P*O+v*A*z,a[2]=k*A*z-v*P*O,a[3]=k*A*O+v*P*z;break;default:throw new Error("Unknown angle order "+g)}return a}function Vt(){var a=new Pe(2);return Pe!=Float32Array&&(a[0]=0,a[1]=0),a}function xt(a,e){var n=new Pe(2);return n[0]=a,n[1]=e,n}et(),bt=new Pe(4),Pe!=Float32Array&&(bt[0]=0,bt[1]=0,bt[2]=0,bt[3]=0),et(),nt(1,0,0),nt(0,1,0),Wt(),Wt(),Ve(),Vt();const Mt=8192;function wt(a,e,n){return e*(Mt/(a.tileSize*Math.pow(2,n-a.tileID.overscaledZ)))}function Ht(a,e){return(a%e+e)%e}function mi(a,e,n){return a*(1-n)+e*n}function ki(a){if(a<=0)return 0;if(a>=1)return 1;const e=a*a,n=e*a;return 4*(a<.5?n:3*(a-e)+n-.75)}function Jt(a,e,n,h){const g=new X(a,e,n,h);return y=>g.solve(y)}const Ct=Jt(.25,.1,.25,1);function Pt(a,e,n){return Math.min(n,Math.max(e,a))}function dn(a,e,n){const h=n-e,g=((a-e)%h+h)%h+e;return g===e?n:g}function Ii(a,...e){for(const n of e)for(const h in n)a[h]=n[h];return a}let Ba=1;function Cn(a,e,n){const h={};for(const g in a)h[g]=e.call(this,a[g],g,a);return h}function tr(a,e,n){const h={};for(const g in a)e.call(this,a[g],g,a)&&(h[g]=a[g]);return h}function xn(a){return Array.isArray(a)?a.map(xn):typeof a=="object"&&a?Cn(a,xn):a}const Vr={};function gn(a){Vr[a]||(typeof console<"u"&&console.warn(a),Vr[a]=!0)}function oa(a,e,n){return(n.y-a.y)*(e.x-a.x)>(e.y-a.y)*(n.x-a.x)}function Ma(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let Ci=null;function Ca(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Nr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ur(a,e,n,h,g){return s(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(a,{timestamp:0});try{const v=y?.format;if(!v||!v.startsWith("BGR")&&!v.startsWith("RGB"))throw new Error(`Unrecognized format ${v}`);const k=v.startsWith("BGR"),P=new Uint8ClampedArray(h*g*4);if(yield y.copyTo(P,(function(A,z,O,$,N){const Z=4*Math.max(-z,0),W=(Math.max(0,O)-O)*$*4+Z,Y=4*$,te=Math.max(0,z),ce=Math.max(0,O);return{rect:{x:te,y:ce,width:Math.min(A.width,z+$)-te,height:Math.min(A.height,O+N)-ce},layout:[{offset:W,stride:Y}]}})(a,e,n,h,g)),k)for(let A=0;A<P.length;A+=4){const z=P[A];P[A]=P[A+2],P[A+2]=z}return P}finally{y.close()}}))}let $a,ga;function Gr(a,e,n,h){return a.addEventListener(e,n,h),{unsubscribe:()=>{a.removeEventListener(e,n,h)}}}function ms(a){return a*Math.PI/180}function Kn(a){return a/Math.PI*180}const Le={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Q={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},J="AbortError";class se extends Error{constructor(e=J){super(e instanceof Error?e.message:e),this.name=J,e instanceof Error&&e.stack&&(this.stack=e.stack)}}function ve(a){return a.name===J}const we={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ie(a){return we.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const Ce="global-dispatcher";class Te extends Error{constructor(e,n,h,g){super(`AJAXError: ${n} (${e}): ${h}`),this.status=e,this.statusText=n,this.url=h,this.body=g}}const Fe=()=>Ma(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ye=function(a,e){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const h=Ie(a.url);if(h)return h(a,e);if(Ma(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:Ce},e)}if(!(/^file:/.test(n=a.url)||/^file:/.test(Fe())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(h,g){return s(this,void 0,void 0,(function*(){const y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:Fe(),signal:g.signal});let v,k;h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");try{v=yield fetch(y)}catch(A){throw ve(A)?A:new Te(0,A.message,h.url,new Blob)}if(!v.ok){const A=yield v.blob();throw new Te(v.status,v.statusText,h.url,A)}k=h.type==="arrayBuffer"||h.type==="image"?v.arrayBuffer():h.type==="json"?v.json():v.text();const P=yield k;return g.signal.throwIfAborted(),{data:P,cacheControl:v.headers.get("Cache-Control"),expires:v.headers.get("Expires")}}))})(a,e);if(Ma(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:Ce},e)}var n;return(function(h,g){return new Promise(((y,v)=>{var k;const P=new XMLHttpRequest;P.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(P.responseType="arraybuffer");for(const A in h.headers)P.setRequestHeader(A,h.headers[A]);h.type==="json"&&(P.responseType="text",!((k=h.headers)===null||k===void 0)&&k.Accept||P.setRequestHeader("Accept","application/json")),P.withCredentials=h.credentials==="include",P.onerror=()=>{v(new Error(P.statusText))},P.onload=()=>{if(!g.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let A=P.response;if(h.type==="json")try{A=JSON.parse(P.response)}catch(z){return void v(z)}y({data:A,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{const A=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});v(new Te(P.status,P.statusText,h.url,A))}},g.signal.addEventListener("abort",(()=>{P.abort(),v(new se(g.signal.reason))})),P.send(h.body)}))})(a,e)};function Ze(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const e=new URL(a),n=window.location;return e.protocol===n.protocol&&e.host===n.host}function ut(a,e,n){n[a]&&n[a].indexOf(e)!==-1||(n[a]=n[a]||[],n[a].push(e))}function gt(a,e,n){if(n&&n[a]){const h=n[a].indexOf(e);h!==-1&&n[a].splice(h,1)}}class Lt{constructor(e,n={}){Ii(this,n),this.type=e}}class oi extends Lt{constructor(e,n={}){super("error",Ii({error:e},n))}}class Qt{on(e,n){return this._listeners=this._listeners||{},ut(e,n,this._listeners),{unsubscribe:()=>{this.off(e,n)}}}off(e,n){return gt(e,n,this._listeners),gt(e,n,this._oneTimeListeners),this}once(e,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},ut(e,n,this._oneTimeListeners),this):new Promise((h=>this.once(e,h)))}fire(e,n){typeof e=="string"&&(e=new Lt(e,n||{}));const h=e.type;if(this.listens(h)){e.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const k of g)k.call(this,e);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const k of y)gt(h,k,this._oneTimeListeners),k.call(this,e);const v=this._eventedParent;v&&(Ii(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(e))}else e instanceof oi&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,n){return this._eventedParent=e,this._eventedParentData=n,this}}var De={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const gi=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function bn(a,e){const n={};for(const h in a)h!=="ref"&&(n[h]=a[h]);return gi.forEach((h=>{h in e&&(n[h]=e[h])})),n}function Et(a,e){if(Array.isArray(a)){if(!Array.isArray(e)||a.length!==e.length)return!1;for(let n=0;n<a.length;n++)if(!Et(a[n],e[n]))return!1;return!0}if(typeof a=="object"&&a!==null&&e!==null){if(typeof e!="object"||Object.keys(a).length!==Object.keys(e).length)return!1;for(const n in a)if(!Et(a[n],e[n]))return!1;return!0}return a===e}function li(a,e){a.push(e)}function wn(a,e,n){li(n,{command:"addSource",args:[a,e[a]]})}function _i(a,e,n){li(e,{command:"removeSource",args:[a]}),n[a]=!0}function Fi(a,e,n,h){_i(a,n,h),wn(a,e,n)}function yi(a,e,n){let h;for(h in a[n])if(Object.prototype.hasOwnProperty.call(a[n],h)&&h!=="data"&&!Et(a[n][h],e[n][h]))return!1;for(h in e[n])if(Object.prototype.hasOwnProperty.call(e[n],h)&&h!=="data"&&!Et(a[n][h],e[n][h]))return!1;return!0}function rn(a,e,n,h,g,y){a=a||{},e=e||{};for(const v in a)Object.prototype.hasOwnProperty.call(a,v)&&(Et(a[v],e[v])||n.push({command:y,args:[h,v,e[v],g]}));for(const v in e)Object.prototype.hasOwnProperty.call(e,v)&&!Object.prototype.hasOwnProperty.call(a,v)&&(Et(a[v],e[v])||n.push({command:y,args:[h,v,e[v],g]}))}function Xs(a){return a.id}function Yn(a,e){return a[e.id]=e,a}class je{constructor(e,n,h,g){this.message=(e?`${e}: `:"")+h,g&&(this.identifier=g),n!=null&&n.__line__&&(this.line=n.__line__)}}function Ln(a,...e){for(const n of e)for(const h in n)a[h]=n[h];return a}class En extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class Js{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[h,g]of n)this.bindings[h]=g}concat(e){return new Js(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const la={kind:"null"},st={kind:"number"},Ot={kind:"string"},It={kind:"boolean"},Xn={kind:"color"},Fo={kind:"projectionDefinition"},ir={kind:"object"},Rt={kind:"value"},Qs={kind:"collator"},gs={kind:"formatted"},Oo={kind:"padding"},nr={kind:"colorArray"},eo={kind:"numberArray"},_s={kind:"resolvedImage"},to={kind:"variableAnchorOffsetCollection"};function Vn(a,e){return{kind:"array",itemType:a,N:e}}function ui(a){if(a.kind==="array"){const e=ui(a.itemType);return typeof a.N=="number"?`array<${e}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${e}>`}return a.kind}const ys=[la,st,Ot,It,Xn,Fo,gs,ir,Vn(Rt),Oo,eo,nr,_s,to];function Va(a,e){if(e.kind==="error")return null;if(a.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Va(a.itemType,e.itemType))&&(typeof a.N!="number"||a.N===e.N))return null}else{if(a.kind===e.kind)return null;if(a.kind==="value"){for(const n of ys)if(!Va(n,e))return null}}return`Expected ${ui(a)} but found ${ui(e)} instead.`}function vs(a,e){return e.some((n=>n.kind===a.kind))}function Tr(a,e){return e.some((n=>n==="null"?a===null:n==="array"?Array.isArray(a):n==="object"?a&&!Array.isArray(a)&&typeof a=="object":n===typeof a))}function Nn(a,e){return a.kind==="array"&&e.kind==="array"?a.itemType.kind===e.itemType.kind&&typeof a.N=="number":a.kind===e.kind}const ti=.96422,ci=.82521,qr=4/29,vi=6/29,Zr=3*vi*vi,jo=vi*vi*vi,jt=Math.PI/180,Ui=180/Math.PI;function Bo(a){return(a%=360)<0&&(a+=360),a}function io([a,e,n,h]){let g,y;const v=Sl((.2225045*(a=Un(a))+.7168786*(e=Un(e))+.0606169*(n=Un(n)))/1);a===e&&e===n?g=y=v:(g=Sl((.4360747*a+.3850649*e+.1430804*n)/ti),y=Sl((.0139322*a+.0971045*e+.7141733*n)/ci));const k=116*v-16;return[k<0?0:k,500*(g-v),200*(v-y),h]}function Un(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Sl(a){return a>jo?Math.pow(a,1/3):a/Zr+qr}function xs([a,e,n,h]){let g=(a+16)/116,y=isNaN(e)?g:g+e/500,v=isNaN(n)?g:g-n/200;return g=1*Gi(g),y=ti*Gi(y),v=ci*Gi(v),[ar(3.1338561*y-1.6168667*g-.4906146*v),ar(-.9787684*y+1.9161415*g+.033454*v),ar(.0719453*y-.2289914*g+1.4052427*v),h]}function ar(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Gi(a){return a>vi?a*a*a:Zr*(a-qr)}const Wr=Object.hasOwn||function(a,e){return Object.prototype.hasOwnProperty.call(a,e)};function rr(a,e){return Wr(a,e)?a[e]:void 0}function Pr(a){return parseInt(a.padEnd(2,a),16)/255}function $o(a,e){return Na(e?a/100:a,0,1)}function Na(a,e,n){return Math.min(Math.max(e,a),n)}function no(a){return!a.some(Number.isNaN)}const Hr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function La(a,e,n){return a+n*(e-a)}function Mr(a,e,n){return a.map(((h,g)=>La(h,e[g],n)))}class Ft{constructor(e,n,h,g=1,y=!0){this.r=e,this.g=n,this.b=h,this.a=g,y||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[e,n,h,g]))}static parse(e){if(e instanceof Ft)return e;if(typeof e!="string")return;const n=(function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=rr(Hr,h);if(g){const[v,k,P]=g;return[v/255,k/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const v=h.length<6?1:2;let k=1;return[Pr(h.slice(k,k+=v)),Pr(h.slice(k,k+=v)),Pr(h.slice(k,k+=v)),Pr(h.slice(k,k+v)||"ff")]}if(h.startsWith("rgb")){const v=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[k,P,A,z,O,$,N,Z,W,Y,te,ce]=v,ne=[z||" ",N||" ",Y].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const oe=[A,$,W].join(""),pe=oe==="%%%"?100:oe===""?255:0;if(pe){const _e=[Na(+P/pe,0,1),Na(+O/pe,0,1),Na(+Z/pe,0,1),te?$o(+te,ce):1];if(no(_e))return _e}}return}}const y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[v,k,P,A,z,O,$,N,Z]=y,W=[P||" ",z||" ",$].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){const Y=[+k,Na(+A,0,100),Na(+O,0,100),N?$o(+N,Z):1];if(no(Y))return(function([te,ce,ne,oe]){function pe(_e){const Ee=(_e+te/30)%12,We=ce*Math.min(ne,1-ne);return ne-We*Math.max(-1,Math.min(Ee-3,9-Ee,1))}return te=Bo(te),ce/=100,ne/=100,[pe(0),pe(8),pe(4),oe]})(Y)}}})(e);return n?new Ft(...n,!1):void 0}get rgb(){const{r:e,g:n,b:h,a:g}=this,y=g||1/0;return this.overwriteGetter("rgb",[e/y,n/y,h/y,g])}get hcl(){return this.overwriteGetter("hcl",(function(e){const[n,h,g,y]=io(e),v=Math.sqrt(h*h+g*g);return[Math.round(1e4*v)?Bo(Math.atan2(g,h)*Ui):NaN,v,n,y]})(this.rgb))}get lab(){return this.overwriteGetter("lab",io(this.rgb))}overwriteGetter(e,n){return Object.defineProperty(this,e,{value:n}),n}toString(){const[e,n,h,g]=this.rgb;return`rgba(${[e,n,h].map((y=>Math.round(255*y))).join(",")},${g})`}static interpolate(e,n,h,g="rgb"){switch(g){case"rgb":{const[y,v,k,P]=Mr(e.rgb,n.rgb,h);return new Ft(y,v,k,P,!1)}case"hcl":{const[y,v,k,P]=e.hcl,[A,z,O,$]=n.hcl;let N,Z;if(isNaN(y)||isNaN(A))isNaN(y)?isNaN(A)?N=NaN:(N=A,k!==1&&k!==0||(Z=z)):(N=y,O!==1&&O!==0||(Z=v));else{let ne=A-y;A>y&&ne>180?ne-=360:A<y&&y-A>180&&(ne+=360),N=y+h*ne}const[W,Y,te,ce]=(function([ne,oe,pe,_e]){return ne=isNaN(ne)?0:ne*jt,xs([pe,Math.cos(ne)*oe,Math.sin(ne)*oe,_e])})([N,Z??La(v,z,h),La(k,O,h),La(P,$,h)]);return new Ft(W,Y,te,ce,!1)}case"lab":{const[y,v,k,P]=xs(Mr(e.lab,n.lab,h));return new Ft(y,v,k,P,!1)}}}}Ft.black=new Ft(0,0,0,1),Ft.white=new Ft(1,1,1,1),Ft.transparent=new Ft(0,0,0,0),Ft.red=new Ft(1,0,0,1);class bs{constructor(e,n,h){this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const wu=["bottom","center","top"];class ao{constructor(e,n,h,g,y,v){this.text=e,this.image=n,this.scale=h,this.fontStack=g,this.textColor=y,this.verticalAlign=v}}class Jn{constructor(e){this.sections=e}static fromString(e){return new Jn([new ao(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((e=>e.text.length!==0||e.image&&e.image.name.length!==0))}static factory(e){return e instanceof Jn?e:Jn.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map((e=>e.text)).join("")}}class St{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof St)return e;if(typeof e=="number")return new St([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const n of e)if(typeof n!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new St(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,h){return new St(Mr(e.values,n.values,h))}}class ii{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ii)return e;if(typeof e=="number")return new ii([e]);if(Array.isArray(e)){for(const n of e)if(typeof n!="number")return;return new ii(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,h){return new ii(Mr(e.values,n.values,h))}}class dt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof dt)return e;if(typeof e=="string"){const h=Ft.parse(e);return h?new dt([h]):void 0}if(!Array.isArray(e))return;const n=[];for(const h of e){if(typeof h!="string")return;const g=Ft.parse(h);if(!g)return;n.push(g)}return new dt(n)}toString(){return JSON.stringify(this.values)}static interpolate(e,n,h,g="rgb"){const y=[];if(e.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let v=0;v<e.values.length;v++)y.push(Ft.interpolate(e.values[v],n.values[v],h,g));return new dt(y)}}class fi extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Ua=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class kn{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof kn)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let n=0;n<e.length;n+=2){const h=e[n],g=e[n+1];if(typeof h!="string"||!Ua.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new kn(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,h){const g=e.values,y=n.values;if(g.length!==y.length)throw new fi(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${n.toString()}`);const v=[];for(let k=0;k<g.length;k+=2){if(g[k]!==y[k])throw new fi(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${g[k]}, to[${k}]: ${y[k]}`);v.push(g[k]);const[P,A]=g[k+1],[z,O]=y[k+1];v.push([La(P,z,h),La(A,O,h)])}return new kn(v)}}class Gn{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Gn({name:e,available:!1}):null}}class Yi{constructor(e,n,h){this.from=e,this.to=n,this.transition=h}static interpolate(e,n,h){return new Yi(e,n,h)}static parse(e){return e instanceof Yi?e:Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"?new Yi(e[0],e[1],e[2]):typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number"?new Yi(e.from,e.to,e.transition):typeof e=="string"?new Yi(e,e,1):void 0}}function Cr(a,e,n,h){return typeof a=="number"&&a>=0&&a<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,e,n,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,e,n,h]:[a,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _a(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Yi||a instanceof Ft||a instanceof bs||a instanceof Jn||a instanceof St||a instanceof ii||a instanceof dt||a instanceof kn||a instanceof Gn)return!0;if(Array.isArray(a)){for(const e of a)if(!_a(e))return!1;return!0}if(typeof a=="object"){for(const e in a)if(!_a(a[e]))return!1;return!0}return!1}function Kt(a){if(a===null)return la;if(typeof a=="string")return Ot;if(typeof a=="boolean")return It;if(typeof a=="number")return st;if(a instanceof Ft)return Xn;if(a instanceof Yi)return Fo;if(a instanceof bs)return Qs;if(a instanceof Jn)return gs;if(a instanceof St)return Oo;if(a instanceof ii)return eo;if(a instanceof dt)return nr;if(a instanceof kn)return to;if(a instanceof Gn)return _s;if(Array.isArray(a)){const e=a.length;let n;for(const h of a){const g=Kt(h);if(n){if(n===g)continue;n=Rt;break}n=g}return Vn(n||Rt,e)}return ir}function ua(a){const e=typeof a;return a===null?"":e==="string"||e==="number"||e==="boolean"?String(a):a instanceof Ft||a instanceof Yi||a instanceof Jn||a instanceof St||a instanceof ii||a instanceof dt||a instanceof kn||a instanceof Gn?a.toString():JSON.stringify(a)}class Ea{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!_a(e[1]))return n.error("invalid value");const h=e[1];let g=Kt(h);const y=n.expectedType;return g.kind!=="array"||g.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(g=y),new Ea(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ro={string:Ot,number:st,boolean:It,object:ir};class Qn{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let h,g=1;const y=e[0];if(y==="array"){let k,P;if(e.length>2){const A=e[1];if(typeof A!="string"||!(A in ro)||A==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);k=ro[A],g++}else k=Rt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);P=e[2],g++}h=Vn(k,P)}else{if(!ro[y])throw new Error(`Types doesn't contain name = ${y}`);h=ro[y]}const v=[];for(;g<e.length;g++){const k=n.parse(e[g],g,Rt);if(!k)return null;v.push(k)}return new Qn(h,v)}evaluate(e){for(let n=0;n<this.args.length;n++){const h=this.args[n].evaluate(e);if(!Va(this.type,Kt(h)))return h;if(n===this.args.length-1)throw new fi(`Expected value to be of type ${ui(this.type)}, but found ${ui(Kt(h))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Lr={"to-boolean":It,"to-color":Xn,"to-number":st,"to-string":Ot};class Aa{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const h=e[0];if(!Lr[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&e.length!==2)return n.error("Expected one argument.");const g=Lr[h],y=[];for(let v=1;v<e.length;v++){const k=n.parse(e[v],v,Rt);if(!k)return null;y.push(k)}return new Aa(g,y)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let n,h;for(const g of this.args){if(n=g.evaluate(e),h=null,n instanceof Ft)return n;if(typeof n=="string"){const y=e.parseColor(n);if(y)return y}else if(Array.isArray(n)&&(h=n.length<3||n.length>4?`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:Cr(n[0],n[1],n[2],n[3]),!h))return new Ft(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new fi(h||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const h of this.args){n=h.evaluate(e);const g=St.parse(n);if(g)return g}throw new fi(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const h of this.args){n=h.evaluate(e);const g=ii.parse(n);if(g)return g}throw new fi(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const h of this.args){n=h.evaluate(e);const g=dt.parse(n);if(g)return g}throw new fi(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const h of this.args){n=h.evaluate(e);const g=kn.parse(n);if(g)return g}throw new fi(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const h of this.args){if(n=h.evaluate(e),n===null)return 0;const g=Number(n);if(!isNaN(g))return g}throw new fi(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return Jn.fromString(ua(this.args[0].evaluate(e)));case"resolvedImage":return Gn.fromString(ua(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return ua(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const ku=["Unknown","Point","LineString","Polygon"];class Vo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ku[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let n=this._parseColorCache.get(e);return n||(n=Ft.parse(e),this._parseColorCache.set(e,n)),n}}class Ut{constructor(e,n,h=[],g,y=new Js,v=[]){this.registry=e,this.path=h,this.key=h.map((k=>`[${k}]`)).join(""),this.scope=y,this.errors=v,this.expectedType=g,this._isConstant=n}parse(e,n,h,g,y={}){return n?this.concat(n,h,g)._parse(e,y):this._parse(e,y)}_parse(e,n){function h(g,y,v){return v==="assert"?new Qn(y,[g]):v==="coerce"?new Aa(y,[g]):g}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=e[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[g];if(y){let v=y.parse(e,this);if(!v)return null;if(this.expectedType){const k=this.expectedType,P=v.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||P.kind!=="value"){if(k.kind==="projectionDefinition"&&["string","array"].includes(P.kind)||["color","formatted","resolvedImage"].includes(k.kind)&&["value","string"].includes(P.kind)||["padding","numberArray"].includes(k.kind)&&["value","number","array"].includes(P.kind)||k.kind==="colorArray"&&["value","string","array"].includes(P.kind)||k.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(P.kind))v=h(v,k,n.typeAnnotation||"coerce");else if(this.checkSubtype(k,P))return null}else v=h(v,k,n.typeAnnotation||"assert")}if(!(v instanceof Ea)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){const k=new Vo;try{v=new Ea(v.type,v.evaluate(k))}catch(P){return this.error(P.message),null}}return v}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,n,h){const g=typeof e=="number"?this.path.concat(e):this.path,y=h?this.scope.concat(h):this.scope;return new Ut(this.registry,this._isConstant,g,n||null,y,this.errors)}error(e,...n){const h=`${this.key}${n.map((g=>`[${g}]`)).join("")}`;this.errors.push(new En(h,e))}checkSubtype(e,n){const h=Va(e,n);return h&&this.error(h),h}}class xi{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const h=[];for(let y=1;y<e.length-1;y+=2){const v=e[y];if(typeof v!="string")return n.error(`Expected string, but found ${typeof v} instead.`,y);if(/[^a-zA-Z0-9_]/.test(v))return n.error("Variable names must contain only alphanumeric characters or '_'.",y);const k=n.parse(e[y+1],y+1);if(!k)return null;h.push([v,k])}const g=n.parse(e[e.length-1],e.length-1,n.expectedType,h);return g?new xi(h,g):null}outputDefined(){return this.result.outputDefined()}}class An{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const h=e[1];return n.scope.has(h)?new An(h,n.scope.get(h)):n.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Nt{constructor(e,n,h){this.type=e,this.index=n,this.input=h}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=n.parse(e[1],1,st),g=n.parse(e[2],2,Vn(n.expectedType||Rt));return h&&g?new Nt(g.type.itemType,h,g):null}evaluate(e){const n=this.index.evaluate(e),h=this.input.evaluate(e);if(n<0)throw new fi(`Array index out of bounds: ${n} < 0.`);if(n>=h.length)throw new fi(`Array index out of bounds: ${n} > ${h.length-1}.`);if(n!==Math.floor(n))throw new fi(`Array index must be an integer, but found ${n} instead.`);return h[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class zt{constructor(e,n){this.type=It,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=n.parse(e[1],1,Rt),g=n.parse(e[2],2,Rt);return h&&g?vs(h.type,[It,Ot,st,la,Rt])?new zt(h,g):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${ui(h.type)} instead`):null}evaluate(e){const n=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!h)return!1;if(!Tr(n,["boolean","string","number","null"]))throw new fi(`Expected first argument to be of type boolean, string, number or null, but found ${ui(Kt(n))} instead.`);if(!Tr(h,["string","array"]))throw new fi(`Expected second argument to be of type array or string, but found ${ui(Kt(h))} instead.`);return h.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class ws{constructor(e,n,h){this.type=st,this.needle=e,this.haystack=n,this.fromIndex=h}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const h=n.parse(e[1],1,Rt),g=n.parse(e[2],2,Rt);if(!h||!g)return null;if(!vs(h.type,[It,Ot,st,la,Rt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${ui(h.type)} instead`);if(e.length===4){const y=n.parse(e[3],3,st);return y?new ws(h,g,y):null}return new ws(h,g)}evaluate(e){const n=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!Tr(n,["boolean","string","number","null"]))throw new fi(`Expected first argument to be of type boolean, string, number or null, but found ${ui(Kt(n))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(e)),Tr(h,["string"])){const y=h.indexOf(n,g);return y===-1?-1:[...h.slice(0,y)].length}if(Tr(h,["array"]))return h.indexOf(n,g);throw new fi(`Expected second argument to be of type array or string, but found ${ui(Kt(h))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Yt{constructor(e,n,h,g,y,v){this.inputType=e,this.type=n,this.input=h,this.cases=g,this.outputs=y,this.otherwise=v}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return n.error("Expected an even number of arguments.");let h,g;n.expectedType&&n.expectedType.kind!=="value"&&(g=n.expectedType);const y={},v=[];for(let A=2;A<e.length-1;A+=2){let z=e[A];const O=e[A+1];Array.isArray(z)||(z=[z]);const $=n.concat(A);if(z.length===0)return $.error("Expected at least one branch label.");for(const Z of z){if(typeof Z!="number"&&typeof Z!="string")return $.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return $.error("Numeric branch labels must be integer values.");if(h){if($.checkSubtype(h,Kt(Z)))return null}else h=Kt(Z);if(y[String(Z)]!==void 0)return $.error("Branch labels must be unique.");y[String(Z)]=v.length}const N=n.parse(O,A,g);if(!N)return null;g=g||N.type,v.push(N)}const k=n.parse(e[1],1,Rt);if(!k)return null;const P=n.parse(e[e.length-1],e.length-1,g);return P?k.type.kind!=="value"&&n.concat(1).checkSubtype(h,k.type)?null:new Yt(h,g,k,y,v,P):null}evaluate(e){const n=this.input.evaluate(e);return(Kt(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class so{constructor(e,n,h){this.type=e,this.branches=n,this.otherwise=h}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return n.error("Expected an odd number of arguments.");let h;n.expectedType&&n.expectedType.kind!=="value"&&(h=n.expectedType);const g=[];for(let v=1;v<e.length-1;v+=2){const k=n.parse(e[v],v,It);if(!k)return null;const P=n.parse(e[v+1],v+1,h);if(!P)return null;g.push([k,P]),h=h||P.type}const y=n.parse(e[e.length-1],e.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new so(h,g,y)}evaluate(e){for(const[n,h]of this.branches)if(n.evaluate(e))return h.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,h]of this.branches)e(n),e(h);e(this.otherwise)}outputDefined(){return this.branches.every((([e,n])=>n.outputDefined()))&&this.otherwise.outputDefined()}}class ha{constructor(e,n,h,g){this.type=e,this.input=n,this.beginIndex=h,this.endIndex=g}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const h=n.parse(e[1],1,Rt),g=n.parse(e[2],2,st);if(!h||!g)return null;if(!vs(h.type,[Vn(Rt),Ot,Rt]))return n.error(`Expected first argument to be of type array or string, but found ${ui(h.type)} instead`);if(e.length===4){const y=n.parse(e[3],3,st);return y?new ha(h.type,h,g,y):null}return new ha(h.type,h,g)}evaluate(e){const n=this.input.evaluate(e),h=this.beginIndex.evaluate(e);let g;if(this.endIndex&&(g=this.endIndex.evaluate(e)),Tr(n,["string"]))return[...n].slice(h,g).join("");if(Tr(n,["array"]))return n.slice(h,g);throw new fi(`Expected first argument to be of type array or string, but found ${ui(Kt(n))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function ks(a,e){const n=a.length-1;let h,g,y=0,v=n,k=0;for(;y<=v;)if(k=Math.floor((y+v)/2),h=a[k],g=a[k+1],h<=e){if(k===n||e<g)return k;y=k+1}else{if(!(h>e))throw new fi("Input is not a number.");v=k-1}return 0}class Er{constructor(e,n,h){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[g,y]of h)this.labels.push(g),this.outputs.push(y)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");const h=n.parse(e[1],1,st);if(!h)return null;const g=[];let y=null;n.expectedType&&n.expectedType.kind!=="value"&&(y=n.expectedType);for(let v=1;v<e.length;v+=2){const k=v===1?-1/0:e[v],P=e[v+1],A=v,z=v+1;if(typeof k!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(g.length&&g[g.length-1][0]>=k)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const O=n.parse(P,z,y);if(!O)return null;y=y||O.type,g.push([k,O])}return new Er(y,h,g)}evaluate(e){const n=this.labels,h=this.outputs;if(n.length===1)return h[0].evaluate(e);const g=this.input.evaluate(e);if(g<=n[0])return h[0].evaluate(e);const y=n.length;return g>=n[y-1]?h[y-1].evaluate(e):h[ks(n,g)].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function No(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var oo,ya,Rh=(function(){if(ya)return oo;function a(e,n,h,g){this.cx=3*e,this.bx=3*(h-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(g-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=h,this.p2y=g}return ya=1,oo=a,a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,n){if(n===void 0&&(n=1e-6),e<0)return 0;if(e>1)return 1;for(var h=e,g=0;g<8;g++){var y=this.sampleCurveX(h)-e;if(Math.abs(y)<n)return h;var v=this.sampleCurveDerivativeX(h);if(Math.abs(v)<1e-6)break;h-=y/v}var k=0,P=1;for(h=e,g=0;g<20&&(y=this.sampleCurveX(h),!(Math.abs(y-e)<n));g++)e>y?k=h:P=h,h=.5*(P-k)+k;return h},solve:function(e,n){return this.sampleCurveY(this.solveCurveX(e,n))}},oo})(),Tl=No(Rh);class qi{constructor(e,n,h,g,y){this.type=e,this.operator=n,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[v,k]of y)this.labels.push(v),this.outputs.push(k)}static interpolationFactor(e,n,h,g){let y=0;if(e.name==="exponential")y=Ia(n,e.base,h,g);else if(e.name==="linear")y=Ia(n,1,h,g);else if(e.name==="cubic-bezier"){const v=e.controlPoints;y=new Tl(v[0],v[1],v[2],v[3]).solve(Ia(n,1,h,g))}return y}static parse(e,n){let[h,g,y,...v]=e;if(!Array.isArray(g)||g.length===0)return n.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const A=g[1];if(typeof A!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:A}}else{if(g[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const A=g.slice(1);if(A.length!==4||A.some((z=>typeof z!="number"||z<0||z>1)))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:A}}}if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(y=n.parse(y,2,st),!y)return null;const k=[];let P=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||n.expectedType==nr?n.expectedType&&n.expectedType.kind!=="value"&&(P=n.expectedType):P=Xn;for(let A=0;A<v.length;A+=2){const z=v[A],O=v[A+1],$=A+3,N=A+4;if(typeof z!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(k.length&&k[k.length-1][0]>=z)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const Z=n.parse(O,N,P);if(!Z)return null;P=P||Z.type,k.push([z,Z])}return Nn(P,st)||Nn(P,Fo)||Nn(P,Xn)||Nn(P,Oo)||Nn(P,eo)||Nn(P,nr)||Nn(P,to)||Nn(P,Vn(st))?new qi(P,h,g,y,k):n.error(`Type ${ui(P)} is not interpolatable.`)}evaluate(e){const n=this.labels,h=this.outputs;if(n.length===1)return h[0].evaluate(e);const g=this.input.evaluate(e);if(g<=n[0])return h[0].evaluate(e);const y=n.length;if(g>=n[y-1])return h[y-1].evaluate(e);const v=ks(n,g),k=qi.interpolationFactor(this.interpolation,g,n[v],n[v+1]),P=h[v].evaluate(e),A=h[v+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return La(P,A,k);case"color":return Ft.interpolate(P,A,k);case"padding":return St.interpolate(P,A,k);case"colorArray":return dt.interpolate(P,A,k);case"numberArray":return ii.interpolate(P,A,k);case"variableAnchorOffsetCollection":return kn.interpolate(P,A,k);case"array":return Mr(P,A,k);case"projectionDefinition":return Yi.interpolate(P,A,k)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ft.interpolate(P,A,k,"hcl");case"colorArray":return dt.interpolate(P,A,k,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ft.interpolate(P,A,k,"lab");case"colorArray":return dt.interpolate(P,A,k,"lab")}}}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Ia(a,e,n,h){const g=h-n,y=a-n;return g===0?0:e===1?y/g:(Math.pow(e,y)-1)/(Math.pow(e,g)-1)}const Si={color:Ft.interpolate,number:La,padding:St.interpolate,numberArray:ii.interpolate,colorArray:dt.interpolate,variableAnchorOffsetCollection:kn.interpolate,array:Mr};class sr{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let h=null;const g=n.expectedType;g&&g.kind!=="value"&&(h=g);const y=[];for(const k of e.slice(1)){const P=n.parse(k,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,y.push(P)}if(!h)throw new Error("No output type");const v=g&&y.some((k=>Va(g,k.type)));return new sr(v?Rt:h,y)}evaluate(e){let n,h=null,g=0;for(const y of this.args)if(g++,h=y.evaluate(e),h&&h instanceof Gn&&!h.available&&(n||(n=h.name),h=null,g===this.args.length&&(h=n)),h!==null)break;return h}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function Pl(a,e){return a==="=="||a==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Ss(a,e,n,h){return h.compare(e,n)===0}function Di(a,e,n){const h=a!=="=="&&a!=="!=";return class Rx{constructor(y,v,k){this.type=It,this.lhs=y,this.rhs=v,this.collator=k,this.hasUntypedArgument=y.type.kind==="value"||v.type.kind==="value"}static parse(y,v){if(y.length!==3&&y.length!==4)return v.error("Expected two or three arguments.");const k=y[0];let P=v.parse(y[1],1,Rt);if(!P)return null;if(!Pl(k,P.type))return v.concat(1).error(`"${k}" comparisons are not supported for type '${ui(P.type)}'.`);let A=v.parse(y[2],2,Rt);if(!A)return null;if(!Pl(k,A.type))return v.concat(2).error(`"${k}" comparisons are not supported for type '${ui(A.type)}'.`);if(P.type.kind!==A.type.kind&&P.type.kind!=="value"&&A.type.kind!=="value")return v.error(`Cannot compare types '${ui(P.type)}' and '${ui(A.type)}'.`);h&&(P.type.kind==="value"&&A.type.kind!=="value"?P=new Qn(A.type,[P]):P.type.kind!=="value"&&A.type.kind==="value"&&(A=new Qn(P.type,[A])));let z=null;if(y.length===4){if(P.type.kind!=="string"&&A.type.kind!=="string"&&P.type.kind!=="value"&&A.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(z=v.parse(y[3],3,Qs),!z)return null}return new Rx(P,A,z)}evaluate(y){const v=this.lhs.evaluate(y),k=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const P=Kt(v),A=Kt(k);if(P.kind!==A.kind||P.kind!=="string"&&P.kind!=="number")throw new fi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${P.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=Kt(v),A=Kt(k);if(P.kind!=="string"||A.kind!=="string")return e(y,v,k)}return this.collator?n(y,v,k,this.collator.evaluate(y)):e(y,v,k)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const Su=Di("==",(function(a,e,n){return e===n}),Ss),Ml=Di("!=",(function(a,e,n){return e!==n}),(function(a,e,n,h){return!Ss(0,e,n,h)})),Uo=Di("<",(function(a,e,n){return e<n}),(function(a,e,n,h){return h.compare(e,n)<0})),Fh=Di(">",(function(a,e,n){return e>n}),(function(a,e,n,h){return h.compare(e,n)>0})),Kr=Di("<=",(function(a,e,n){return e<=n}),(function(a,e,n,h){return h.compare(e,n)<=0})),lo=Di(">=",(function(a,e,n){return e>=n}),(function(a,e,n,h){return h.compare(e,n)>=0}));class or{constructor(e,n,h){this.type=Qs,this.locale=h,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");const h=e[1];if(typeof h!="object"||Array.isArray(h))return n.error("Collator options argument must be an object.");const g=n.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,It);if(!g)return null;const y=n.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,It);if(!y)return null;let v=null;return h.locale&&(v=n.parse(h.locale,1,Ot),!v)?null:new or(g,y,v)}evaluate(e){return new bs(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class lr{constructor(e,n,h,g,y){this.type=Ot,this.number=e,this.locale=n,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=y}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");const h=n.parse(e[1],1,st);if(!h)return null;const g=e[2];if(typeof g!="object"||Array.isArray(g))return n.error("NumberFormat options argument must be an object.");let y=null;if(g.locale&&(y=n.parse(g.locale,1,Ot),!y))return null;let v=null;if(g.currency&&(v=n.parse(g.currency,1,Ot),!v))return null;let k=null;if(g["min-fraction-digits"]&&(k=n.parse(g["min-fraction-digits"],1,st),!k))return null;let P=null;return g["max-fraction-digits"]&&(P=n.parse(g["max-fraction-digits"],1,st),!P)?null:new lr(h,y,v,k,P)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class uo{constructor(e){this.type=gs,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const h=e[1];if(!Array.isArray(h)&&typeof h=="object")return n.error("First argument must be an image or text section.");const g=[];let y=!1;for(let v=1;v<=e.length-1;++v){const k=e[v];if(y&&typeof k=="object"&&!Array.isArray(k)){y=!1;let P=null;if(k["font-scale"]&&(P=n.parse(k["font-scale"],1,st),!P))return null;let A=null;if(k["text-font"]&&(A=n.parse(k["text-font"],1,Vn(Ot)),!A))return null;let z=null;if(k["text-color"]&&(z=n.parse(k["text-color"],1,Xn),!z))return null;let O=null;if(k["vertical-align"]){if(typeof k["vertical-align"]=="string"&&!wu.includes(k["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${k["vertical-align"]}' instead.`);if(O=n.parse(k["vertical-align"],1,Ot),!O)return null}const $=g[g.length-1];$.scale=P,$.font=A,$.textColor=z,$.verticalAlign=O}else{const P=n.parse(e[v],1,Rt);if(!P)return null;const A=P.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,g.push({content:P,scale:null,font:null,textColor:null,verticalAlign:null})}}return new uo(g)}evaluate(e){return new Jn(this.sections.map((n=>{const h=n.content.evaluate(e);return Kt(h)===_s?new ao("",h,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(e):null):new ao(ua(h),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null,n.verticalAlign?n.verticalAlign.evaluate(e):null)})))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor),n.verticalAlign&&e(n.verticalAlign)}outputDefined(){return!1}}class Ga{constructor(e){this.type=_s,this.input=e}static parse(e,n){if(e.length!==2)return n.error("Expected two arguments.");const h=n.parse(e[1],1,Ot);return h?new Ga(h):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),h=Gn.fromString(n);return h&&e.availableImages&&(h.available=e.availableImages.indexOf(n)>-1),h}eachChild(e){e(this.input)}outputDefined(){return!1}}class Sn{constructor(e){this.type=st,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const h=n.parse(e[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${ui(h.type)} instead.`):new Sn(h):null}evaluate(e){const n=this.input.evaluate(e);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new fi(`Expected value to be of type string or array, but found ${ui(Kt(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Xi=8192;function Cl(a,e){const n=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,g=Math.pow(2,e.z);return[Math.round(n*g*Xi),Math.round(h*g*Xi)]}function Ts(a,e){const n=Math.pow(2,e.z);return[(g=(a[0]/Xi+e.x)/n,360*g-180),(h=(a[1]/Xi+e.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function Yr(a,e){a[0]=Math.min(a[0],e[0]),a[1]=Math.min(a[1],e[1]),a[2]=Math.max(a[2],e[0]),a[3]=Math.max(a[3],e[1])}function ur(a,e){return!(a[0]<=e[0]||a[2]>=e[2]||a[1]<=e[1]||a[3]>=e[3])}function Oh(a,e,n){const h=a[0]-e[0],g=a[1]-e[1],y=a[0]-n[0],v=a[1]-n[1];return h*v-y*g==0&&h*y<=0&&g*v<=0}function Go(a,e,n,h){return(g=[h[0]-n[0],h[1]-n[1]])[0]*(y=[e[0]-a[0],e[1]-a[1]])[1]-g[1]*y[0]!=0&&!(!Da(a,e,n,h)||!Da(n,h,a,e));var g,y}function Tu(a,e,n){for(const h of n)for(let g=0;g<h.length-1;++g)if(Go(a,e,h[g],h[g+1]))return!0;return!1}function Ps(a,e,n=!1){let h=!1;for(const k of e)for(let P=0;P<k.length-1;P++){if(Oh(a,k[P],k[P+1]))return n;(y=k[P])[1]>(g=a)[1]!=(v=k[P+1])[1]>g[1]&&g[0]<(v[0]-y[0])*(g[1]-y[1])/(v[1]-y[1])+y[0]&&(h=!h)}var g,y,v;return h}function ea(a,e){for(const n of e)if(Ps(a,n))return!0;return!1}function Xr(a,e){for(const n of a)if(!Ps(n,e))return!1;for(let n=0;n<a.length-1;++n)if(Tu(a[n],a[n+1],e))return!1;return!0}function Pu(a,e){for(const n of e)if(Xr(a,n))return!0;return!1}function Da(a,e,n,h){const g=h[0]-n[0],y=h[1]-n[1],v=(a[0]-n[0])*y-g*(a[1]-n[1]),k=(e[0]-n[0])*y-g*(e[1]-n[1]);return v>0&&k<0||v<0&&k>0}function Ll(a,e,n){const h=[];for(let g=0;g<a.length;g++){const y=[];for(let v=0;v<a[g].length;v++){const k=Cl(a[g][v],n);Yr(e,k),y.push(k)}h.push(y)}return h}function Ar(a,e,n){const h=[];for(let g=0;g<a.length;g++){const y=Ll(a[g],e,n);h.push(y)}return h}function Mu(a,e,n,h){if(a[0]<n[0]||a[0]>n[2]){const g=.5*h;let y=a[0]-n[0]>g?-h:n[0]-a[0]>g?h:0;y===0&&(y=a[0]-n[2]>g?-h:n[2]-a[0]>g?h:0),a[0]+=y}Yr(e,a)}function Ms(a,e,n,h){const g=Math.pow(2,h.z)*Xi,y=[h.x*Xi,h.y*Xi],v=[];for(const k of a)for(const P of k){const A=[P.x+y[0],P.y+y[1]];Mu(A,e,n,g),v.push(A)}return v}function El(a,e,n,h){const g=Math.pow(2,h.z)*Xi,y=[h.x*Xi,h.y*Xi],v=[];for(const P of a){const A=[];for(const z of P){const O=[z.x+y[0],z.y+y[1]];Yr(e,O),A.push(O)}v.push(A)}if(e[2]-e[0]<=g/2){(k=e)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const P of v)for(const A of P)Mu(A,e,n,g)}var k;return v}class qa{constructor(e,n){this.type=It,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(_a(e[1])){const h=e[1];if(h.type==="FeatureCollection"){const g=[];for(const y of h.features){const{type:v,coordinates:k}=y.geometry;v==="Polygon"&&g.push(k),v==="MultiPolygon"&&g.push(...k)}if(g.length)return new qa(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new qa(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new qa(h,h)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(n,h){const g=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=n.canonicalID();if(h.type==="Polygon"){const k=Ll(h.coordinates,y,v),P=Ms(n.geometry(),g,y,v);if(!ur(g,y))return!1;for(const A of P)if(!Ps(A,k))return!1}if(h.type==="MultiPolygon"){const k=Ar(h.coordinates,y,v),P=Ms(n.geometry(),g,y,v);if(!ur(g,y))return!1;for(const A of P)if(!ea(A,k))return!1}return!0})(e,this.geometries);if(e.geometryType()==="LineString")return(function(n,h){const g=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=n.canonicalID();if(h.type==="Polygon"){const k=Ll(h.coordinates,y,v),P=El(n.geometry(),g,y,v);if(!ur(g,y))return!1;for(const A of P)if(!Xr(A,k))return!1}if(h.type==="MultiPolygon"){const k=Ar(h.coordinates,y,v),P=El(n.geometry(),g,y,v);if(!ur(g,y))return!1;for(const A of P)if(!Pu(A,k))return!1}return!0})(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Cu=class{constructor(a=[],e=(n,h)=>n<h?-1:n>h?1:0){if(this.data=a,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:e,compare:n}=this,h=e[a];for(;a>0;){const g=a-1>>1,y=e[g];if(n(h,y)>=0)break;e[a]=y,a=g}e[a]=h}_down(a){const{data:e,compare:n}=this,h=this.length>>1,g=e[a];for(;a<h;){let y=1+(a<<1);const v=y+1;if(v<this.length&&n(e[v],e[y])<0&&(y=v),n(e[y],g)>=0)break;e[a]=e[y],a=y}e[a]=g}};function Za(a,e,n=0,h=a.length-1,g=Lu){for(;h>n;){if(h-n>600){const P=h-n+1,A=e-n+1,z=Math.log(P),O=.5*Math.exp(2*z/3),$=.5*Math.sqrt(z*O*(P-O)/P)*(A-P/2<0?-1:1);Za(a,e,Math.max(n,Math.floor(e-A*O/P+$)),Math.min(h,Math.floor(e+(P-A)*O/P+$)),g)}const y=a[e];let v=n,k=h;for(hr(a,n,e),g(a[h],y)>0&&hr(a,n,h);v<k;){for(hr(a,v,k),v++,k--;g(a[v],y)<0;)v++;for(;g(a[k],y)>0;)k--}g(a[n],y)===0?hr(a,n,k):(k++,hr(a,k,h)),k<=e&&(n=k+1),e<=k&&(h=k-1)}}function hr(a,e,n){const h=a[e];a[e]=a[n],a[n]=h}function Lu(a,e){return a<e?-1:a>e?1:0}function Cs(a,e){if(a.length<=1)return[a];const n=[];let h,g;for(const y of a){const v=dr(y);v!==0&&(y.area=Math.abs(v),g===void 0&&(g=v<0),g===v<0?(h&&n.push(h),h=[y]):h.push(y))}if(h&&n.push(h),e>1)for(let y=0;y<n.length;y++)n[y].length<=e||(Za(n[y],e,1,n[y].length-1,jh),n[y]=n[y].slice(0,e));return n}function jh(a,e){return e.area-a.area}function dr(a){let e=0;for(let n,h,g=0,y=a.length,v=y-1;g<y;v=g++)n=a[g],h=a[v],e+=(h.x-n.x)*(n.y+h.y);return e}const Eu=1/298.257223563,Wa=Eu*(2-Eu),Au=Math.PI/180;class za{constructor(e){const n=6378.137*Au*1e3,h=Math.cos(e*Au),g=1/(1-Wa*(1-h*h)),y=Math.sqrt(g);this.kx=n*y*h,this.ky=n*y*g*(1-Wa)}distance(e,n){const h=this.wrap(e[0]-n[0])*this.kx,g=(e[1]-n[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(e,n){let h,g,y,v,k=1/0;for(let P=0;P<e.length-1;P++){let A=e[P][0],z=e[P][1],O=this.wrap(e[P+1][0]-A)*this.kx,$=(e[P+1][1]-z)*this.ky,N=0;O===0&&$===0||(N=(this.wrap(n[0]-A)*this.kx*O+(n[1]-z)*this.ky*$)/(O*O+$*$),N>1?(A=e[P+1][0],z=e[P+1][1]):N>0&&(A+=O/this.kx*N,z+=$/this.ky*N)),O=this.wrap(n[0]-A)*this.kx,$=(n[1]-z)*this.ky;const Z=O*O+$*$;Z<k&&(k=Z,h=A,g=z,y=P,v=N)}return{point:[h,g],index:y,t:Math.max(0,Math.min(1,v))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function ho(a,e){return e[0]-a[0]}function co(a){return a[1]-a[0]+1}function da(a,e){return a[1]>=a[0]&&a[1]<e}function Jr(a,e){if(a[0]>a[1])return[null,null];const n=co(a);if(e){if(n===2)return[a,null];const g=Math.floor(n/2);return[[a[0],a[0]+g],[a[0]+g,a[1]]]}if(n===1)return[a,null];const h=Math.floor(n/2)-1;return[[a[0],a[0]+h],[a[0]+h+1,a[1]]]}function fo(a,e){if(!da(e,a.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let h=e[0];h<=e[1];++h)Yr(n,a[h]);return n}function Ls(a){const e=[1/0,1/0,-1/0,-1/0];for(const n of a)for(const h of n)Yr(e,h);return e}function Ir(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function Qr(a,e,n){if(!Ir(a)||!Ir(e))return NaN;let h=0,g=0;return a[2]<e[0]&&(h=e[0]-a[2]),a[0]>e[2]&&(h=a[0]-e[2]),a[1]>e[3]&&(g=a[1]-e[3]),a[3]<e[1]&&(g=e[1]-a[3]),n.distance([0,0],[h,g])}function cr(a,e,n){const h=n.pointOnLine(e,a);return n.distance(a,h.point)}function qo(a,e,n,h,g){const y=Math.min(cr(a,[n,h],g),cr(e,[n,h],g)),v=Math.min(cr(n,[a,e],g),cr(h,[a,e],g));return Math.min(y,v)}function Bh(a,e,n,h,g){if(!da(e,a.length)||!da(h,n.length))return 1/0;let y=1/0;for(let v=e[0];v<e[1];++v){const k=a[v],P=a[v+1];for(let A=h[0];A<h[1];++A){const z=n[A],O=n[A+1];if(Go(k,P,z,O))return 0;y=Math.min(y,qo(k,P,z,O,g))}}return y}function po(a,e,n,h,g){if(!da(e,a.length)||!da(h,n.length))return NaN;let y=1/0;for(let v=e[0];v<=e[1];++v)for(let k=h[0];k<=h[1];++k)if(y=Math.min(y,g.distance(a[v],n[k])),y===0)return y;return y}function $h(a,e,n){if(Ps(a,e,!0))return 0;let h=1/0;for(const g of e){const y=g[0],v=g[g.length-1];if(y!==v&&(h=Math.min(h,cr(a,[v,y],n)),h===0))return h;const k=n.pointOnLine(g,a);if(h=Math.min(h,n.distance(a,k.point)),h===0)return h}return h}function Iu(a,e,n,h){if(!da(e,a.length))return NaN;for(let y=e[0];y<=e[1];++y)if(Ps(a[y],n,!0))return 0;let g=1/0;for(let y=e[0];y<e[1];++y){const v=a[y],k=a[y+1];for(const P of n)for(let A=0,z=P.length,O=z-1;A<z;O=A++){const $=P[O],N=P[A];if(Go(v,k,$,N))return 0;g=Math.min(g,qo(v,k,$,N,h))}}return g}function Du(a,e){for(const n of a)for(const h of n)if(Ps(h,e,!0))return!0;return!1}function zu(a,e,n,h=1/0){const g=Ls(a),y=Ls(e);if(h!==1/0&&Qr(g,y,n)>=h)return h;if(ur(g,y)){if(Du(a,e))return 0}else if(Du(e,a))return 0;let v=1/0;for(const k of a)for(let P=0,A=k.length,z=A-1;P<A;z=P++){const O=k[z],$=k[P];for(const N of e)for(let Z=0,W=N.length,Y=W-1;Z<W;Y=Z++){const te=N[Y],ce=N[Z];if(Go(O,$,te,ce))return 0;v=Math.min(v,qo(O,$,te,ce,n))}}return v}function ni(a,e,n,h,g,y){if(!y)return;const v=Qr(fo(h,y),g,n);v<e&&a.push([v,y,[0,0]])}function ca(a,e,n,h,g,y,v){if(!y||!v)return;const k=Qr(fo(h,y),fo(g,v),n);k<e&&a.push([k,y,v])}function es(a,e,n,h,g=1/0){let y=Math.min(h.distance(a[0],n[0][0]),g);if(y===0)return y;const v=new Cu([[0,[0,a.length-1],[0,0]]],ho),k=Ls(n);for(;v.length>0;){const P=v.pop();if(P[0]>=y)continue;const A=P[1],z=e?50:100;if(co(A)<=z){if(!da(A,a.length))return NaN;if(e){const O=Iu(a,A,n,h);if(isNaN(O)||O===0)return O;y=Math.min(y,O)}else for(let O=A[0];O<=A[1];++O){const $=$h(a[O],n,h);if(y=Math.min(y,$),y===0)return 0}}else{const O=Jr(A,e);ni(v,y,h,a,k,O[0]),ni(v,y,h,a,k,O[1])}}return y}function Zo(a,e,n,h,g,y=1/0){let v=Math.min(y,g.distance(a[0],n[0]));if(v===0)return v;const k=new Cu([[0,[0,a.length-1],[0,n.length-1]]],ho);for(;k.length>0;){const P=k.pop();if(P[0]>=v)continue;const A=P[1],z=P[2],O=e?50:100,$=h?50:100;if(co(A)<=O&&co(z)<=$){if(!da(A,a.length)&&da(z,n.length))return NaN;let N;if(e&&h)N=Bh(a,A,n,z,g),v=Math.min(v,N);else if(e&&!h){const Z=a.slice(A[0],A[1]+1);for(let W=z[0];W<=z[1];++W)if(N=cr(n[W],Z,g),v=Math.min(v,N),v===0)return v}else if(!e&&h){const Z=n.slice(z[0],z[1]+1);for(let W=A[0];W<=A[1];++W)if(N=cr(a[W],Z,g),v=Math.min(v,N),v===0)return v}else N=po(a,A,n,z,g),v=Math.min(v,N)}else{const N=Jr(A,e),Z=Jr(z,h);ca(k,v,g,a,n,N[0],Z[0]),ca(k,v,g,a,n,N[0],Z[1]),ca(k,v,g,a,n,N[1],Z[0]),ca(k,v,g,a,n,N[1],Z[1])}}return v}function Es(a){return a.type==="MultiPolygon"?a.coordinates.map((e=>({type:"Polygon",coordinates:e}))):a.type==="MultiLineString"?a.coordinates.map((e=>({type:"LineString",coordinates:e}))):a.type==="MultiPoint"?a.coordinates.map((e=>({type:"Point",coordinates:e}))):[a]}class ts{constructor(e,n){this.type=st,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(_a(e[1])){const h=e[1];if(h.type==="FeatureCollection")return new ts(h,h.features.map((g=>Es(g.geometry))).flat());if(h.type==="Feature")return new ts(h,Es(h.geometry));if("type"in h&&"coordinates"in h)return new ts(h,Es(h))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(n,h){const g=n.geometry(),y=g.flat().map((P=>Ts([P.x,P.y],n.canonical)));if(g.length===0)return NaN;const v=new za(y[0][1]);let k=1/0;for(const P of h){switch(P.type){case"Point":k=Math.min(k,Zo(y,!1,[P.coordinates],!1,v,k));break;case"LineString":k=Math.min(k,Zo(y,!1,P.coordinates,!0,v,k));break;case"Polygon":k=Math.min(k,es(y,!1,P.coordinates,v,k))}if(k===0)return k}return k})(e,this.geometries);if(e.geometryType()==="LineString")return(function(n,h){const g=n.geometry(),y=g.flat().map((P=>Ts([P.x,P.y],n.canonical)));if(g.length===0)return NaN;const v=new za(y[0][1]);let k=1/0;for(const P of h){switch(P.type){case"Point":k=Math.min(k,Zo(y,!0,[P.coordinates],!1,v,k));break;case"LineString":k=Math.min(k,Zo(y,!0,P.coordinates,!0,v,k));break;case"Polygon":k=Math.min(k,es(y,!0,P.coordinates,v,k))}if(k===0)return k}return k})(e,this.geometries);if(e.geometryType()==="Polygon")return(function(n,h){const g=n.geometry();if(g.length===0||g[0].length===0)return NaN;const y=Cs(g,0).map((P=>P.map((A=>A.map((z=>Ts([z.x,z.y],n.canonical))))))),v=new za(y[0][0][0][1]);let k=1/0;for(const P of h)for(const A of y){switch(P.type){case"Point":k=Math.min(k,es([P.coordinates],!1,A,v,k));break;case"LineString":k=Math.min(k,es(P.coordinates,!0,A,v,k));break;case"Polygon":k=Math.min(k,zu(A,P.coordinates,v,k))}if(k===0)return k}return k})(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class As{constructor(e){this.type=Rt,this.key=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const h=e[1];return h==null?n.error("Global state property must be defined."):typeof h!="string"?n.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new As(h)}evaluate(e){var n;const h=(n=e.globals)===null||n===void 0?void 0:n.globalState;return h&&Object.keys(h).length!==0?rr(h,this.key):null}eachChild(){}outputDefined(){return!1}}const Is={"==":Su,"!=":Ml,">":Fh,"<":Uo,">=":lo,"<=":Kr,array:Qn,at:Nt,boolean:Qn,case:so,coalesce:sr,collator:or,format:uo,image:Ga,in:zt,"index-of":ws,interpolate:qi,"interpolate-hcl":qi,"interpolate-lab":qi,length:Sn,let:xi,literal:Ea,match:Yt,number:Qn,"number-format":lr,object:Qn,slice:ha,step:Er,string:Qn,"to-boolean":Aa,"to-color":Aa,"to-number":Aa,"to-string":Aa,var:An,within:qa,distance:ts,"global-state":As};class In{constructor(e,n,h,g){this.name=e,this.type=n,this._evaluate=h,this.args=g}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,n){const h=e[0],g=In.definitions[h];if(!g)return n.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(g)?g[0]:g.type,v=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,k=v.filter((([A])=>!Array.isArray(A)||A.length===e.length-1));let P=null;for(const[A,z]of k){P=new Ut(n.registry,Ho,n.path,null,n.scope);const O=[];let $=!1;for(let N=1;N<e.length;N++){const Z=e[N],W=Array.isArray(A)?A[N-1]:A.type,Y=P.parse(Z,1+O.length,W);if(!Y){$=!0;break}O.push(Y)}if(!$)if(Array.isArray(A)&&A.length!==O.length)P.error(`Expected ${A.length} arguments, but found ${O.length} instead.`);else{for(let N=0;N<O.length;N++){const Z=Array.isArray(A)?A[N]:A.type,W=O[N];P.concat(N+1).checkSubtype(Z,W.type)}if(P.errors.length===0)return new In(h,y,z,O)}}if(k.length===1)n.errors.push(...P.errors);else{const A=(k.length?k:v).map((([O])=>{return $=O,Array.isArray($)?`(${$.map(ui).join(", ")})`:`(${ui($.type)}...)`;var $})).join(" | "),z=[];for(let O=1;O<e.length;O++){const $=n.parse(e[O],1+z.length);if(!$)return null;z.push(ui($.type))}n.error(`Expected arguments of type ${A}, but found (${z.join(", ")}) instead.`)}return null}static register(e,n){In.definitions=n;for(const h in n)e[h]=In}}function Ru(a,[e,n,h,g]){e=e.evaluate(a),n=n.evaluate(a),h=h.evaluate(a);const y=g?g.evaluate(a):1,v=Cr(e,n,h,y);if(v)throw new fi(v);return new Ft(e/255,n/255,h/255,y,!1)}function is(a,e){return a in e}function Wo(a,e){const n=e[a];return n===void 0?null:n}function Dr(a){return{type:a}}function Ho(a){if(a instanceof An)return Ho(a.boundExpression);if(a instanceof In&&a.name==="error"||a instanceof or||a instanceof qa||a instanceof ts||a instanceof As)return!1;const e=a instanceof Aa||a instanceof Qn;let n=!0;return a.eachChild((h=>{n=e?n&&Ho(h):n&&h instanceof Ea})),!!n&&va(a)&&mo(a,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function va(a){if(a instanceof In&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof qa||a instanceof ts)return!1;let e=!0;return a.eachChild((n=>{e&&!va(n)&&(e=!1)})),e}function Ds(a){if(a instanceof In&&a.name==="feature-state")return!1;let e=!0;return a.eachChild((n=>{e&&!Ds(n)&&(e=!1)})),e}function mo(a,e){if(a instanceof In&&e.indexOf(a.name)>=0)return!1;let n=!0;return a.eachChild((h=>{n&&!mo(h,e)&&(n=!1)})),n}function zs(a){return{result:"success",value:a}}function Rs(a){return{result:"error",value:a}}function fr(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Fs(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Ko(a){return!!a.expression&&a.expression.interpolated}function $t(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Yo(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)&&Kt(a)===ir}function Fu(a){return a}function Al(a,e){const n=a.stops&&typeof a.stops[0][0]=="object",h=n||!(n||a.property!==void 0),g=a.type||(Ko(e)?"exponential":"interval"),y=(function(z){switch(z.type){case"color":return Ft.parse;case"padding":return St.parse;case"numberArray":return ii.parse;case"colorArray":return dt.parse;default:return null}})(e);if(y&&((a=Ln({},a)).stops&&(a.stops=a.stops.map((z=>[z[0],y(z[1])]))),a.default=y(a.default?a.default:e.default)),a.colorSpace&&(v=a.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var v;const k=(function(z){switch(z){case"exponential":return Bu;case"interval":return ju;case"categorical":return Ou;case"identity":return $u;default:throw new Error(`Unknown function type "${z}"`)}})(g);let P,A;if(g==="categorical"){P=Object.create(null);for(const z of a.stops)P[z[0]]=z[1];A=typeof a.stops[0][0]}if(n){const z={},O=[];for(let Z=0;Z<a.stops.length;Z++){const W=a.stops[Z],Y=W[0].zoom;z[Y]===void 0&&(z[Y]={zoom:Y,type:a.type,property:a.property,default:a.default,stops:[]},O.push(Y)),z[Y].stops.push([W[0].value,W[1]])}const $=[];for(const Z of O)$.push([z[Z].zoom,Al(z[Z],e)]);const N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:qi.interpolationFactor.bind(void 0,N),zoomStops:$.map((Z=>Z[0])),evaluate:({zoom:Z},W)=>Bu({stops:$,base:a.base},e,Z).evaluate(Z,W)}}if(h){const z=g==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:qi.interpolationFactor.bind(void 0,z),zoomStops:a.stops.map((O=>O[0])),evaluate:({zoom:O})=>k(a,e,O,P,A)}}return{kind:"source",evaluate(z,O){const $=O&&O.properties?O.properties[a.property]:void 0;return $===void 0?Os(a.default,e.default):k(a,e,$,P,A)}}}function Os(a,e,n){return a!==void 0?a:e!==void 0?e:n!==void 0?n:void 0}function Ou(a,e,n,h,g){return Os(typeof n===g?h[n]:void 0,a.default,e.default)}function ju(a,e,n){if($t(n)!=="number")return Os(a.default,e.default);const h=a.stops.length;if(h===1||n<=a.stops[0][0])return a.stops[0][1];if(n>=a.stops[h-1][0])return a.stops[h-1][1];const g=ks(a.stops.map((y=>y[0])),n);return a.stops[g][1]}function Bu(a,e,n){const h=a.base!==void 0?a.base:1;if($t(n)!=="number")return Os(a.default,e.default);const g=a.stops.length;if(g===1||n<=a.stops[0][0])return a.stops[0][1];if(n>=a.stops[g-1][0])return a.stops[g-1][1];const y=ks(a.stops.map((z=>z[0])),n),v=(function(z,O,$,N){const Z=N-$,W=z-$;return Z===0?0:O===1?W/Z:(Math.pow(O,W)-1)/(Math.pow(O,Z)-1)})(n,h,a.stops[y][0],a.stops[y+1][0]),k=a.stops[y][1],P=a.stops[y+1][1],A=Si[e.type]||Fu;return typeof k.evaluate=="function"?{evaluate(...z){const O=k.evaluate.apply(void 0,z),$=P.evaluate.apply(void 0,z);if(O!==void 0&&$!==void 0)return A(O,$,v,a.colorSpace)}}:A(k,P,v,a.colorSpace)}function $u(a,e,n){switch(e.type){case"color":n=Ft.parse(n);break;case"formatted":n=Jn.fromString(n.toString());break;case"resolvedImage":n=Gn.fromString(n.toString());break;case"padding":n=St.parse(n);break;case"colorArray":n=dt.parse(n);break;case"numberArray":n=ii.parse(n);break;default:$t(n)===e.type||e.type==="enum"&&e.values[n]||(n=void 0)}return Os(n,a.default,e.default)}In.register(Is,{error:[{kind:"error"},[Ot],(a,[e])=>{throw new fi(e.evaluate(a))}],typeof:[Ot,[Rt],(a,[e])=>ui(Kt(e.evaluate(a)))],"to-rgba":[Vn(st,4),[Xn],(a,[e])=>{const[n,h,g,y]=e.evaluate(a).rgb;return[255*n,255*h,255*g,y]}],rgb:[Xn,[st,st,st],Ru],rgba:[Xn,[st,st,st,st],Ru],has:{type:It,overloads:[[[Ot],(a,[e])=>is(e.evaluate(a),a.properties())],[[Ot,ir],(a,[e,n])=>is(e.evaluate(a),n.evaluate(a))]]},get:{type:Rt,overloads:[[[Ot],(a,[e])=>Wo(e.evaluate(a),a.properties())],[[Ot,ir],(a,[e,n])=>Wo(e.evaluate(a),n.evaluate(a))]]},"feature-state":[Rt,[Ot],(a,[e])=>Wo(e.evaluate(a),a.featureState||{})],properties:[ir,[],a=>a.properties()],"geometry-type":[Ot,[],a=>a.geometryType()],id:[Rt,[],a=>a.id()],zoom:[st,[],a=>a.globals.zoom],"heatmap-density":[st,[],a=>a.globals.heatmapDensity||0],elevation:[st,[],a=>a.globals.elevation||0],"line-progress":[st,[],a=>a.globals.lineProgress||0],accumulated:[Rt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[st,Dr(st),(a,e)=>{let n=0;for(const h of e)n+=h.evaluate(a);return n}],"*":[st,Dr(st),(a,e)=>{let n=1;for(const h of e)n*=h.evaluate(a);return n}],"-":{type:st,overloads:[[[st,st],(a,[e,n])=>e.evaluate(a)-n.evaluate(a)],[[st],(a,[e])=>-e.evaluate(a)]]},"/":[st,[st,st],(a,[e,n])=>e.evaluate(a)/n.evaluate(a)],"%":[st,[st,st],(a,[e,n])=>e.evaluate(a)%n.evaluate(a)],ln2:[st,[],()=>Math.LN2],pi:[st,[],()=>Math.PI],e:[st,[],()=>Math.E],"^":[st,[st,st],(a,[e,n])=>Math.pow(e.evaluate(a),n.evaluate(a))],sqrt:[st,[st],(a,[e])=>Math.sqrt(e.evaluate(a))],log10:[st,[st],(a,[e])=>Math.log(e.evaluate(a))/Math.LN10],ln:[st,[st],(a,[e])=>Math.log(e.evaluate(a))],log2:[st,[st],(a,[e])=>Math.log(e.evaluate(a))/Math.LN2],sin:[st,[st],(a,[e])=>Math.sin(e.evaluate(a))],cos:[st,[st],(a,[e])=>Math.cos(e.evaluate(a))],tan:[st,[st],(a,[e])=>Math.tan(e.evaluate(a))],asin:[st,[st],(a,[e])=>Math.asin(e.evaluate(a))],acos:[st,[st],(a,[e])=>Math.acos(e.evaluate(a))],atan:[st,[st],(a,[e])=>Math.atan(e.evaluate(a))],min:[st,Dr(st),(a,e)=>Math.min(...e.map((n=>n.evaluate(a))))],max:[st,Dr(st),(a,e)=>Math.max(...e.map((n=>n.evaluate(a))))],abs:[st,[st],(a,[e])=>Math.abs(e.evaluate(a))],round:[st,[st],(a,[e])=>{const n=e.evaluate(a);return n<0?-Math.round(-n):Math.round(n)}],floor:[st,[st],(a,[e])=>Math.floor(e.evaluate(a))],ceil:[st,[st],(a,[e])=>Math.ceil(e.evaluate(a))],"filter-==":[It,[Ot,Rt],(a,[e,n])=>a.properties()[e.value]===n.value],"filter-id-==":[It,[Rt],(a,[e])=>a.id()===e.value],"filter-type-==":[It,[Ot],(a,[e])=>a.geometryType()===e.value],"filter-<":[It,[Ot,Rt],(a,[e,n])=>{const h=a.properties()[e.value],g=n.value;return typeof h==typeof g&&h<g}],"filter-id-<":[It,[Rt],(a,[e])=>{const n=a.id(),h=e.value;return typeof n==typeof h&&n<h}],"filter->":[It,[Ot,Rt],(a,[e,n])=>{const h=a.properties()[e.value],g=n.value;return typeof h==typeof g&&h>g}],"filter-id->":[It,[Rt],(a,[e])=>{const n=a.id(),h=e.value;return typeof n==typeof h&&n>h}],"filter-<=":[It,[Ot,Rt],(a,[e,n])=>{const h=a.properties()[e.value],g=n.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[It,[Rt],(a,[e])=>{const n=a.id(),h=e.value;return typeof n==typeof h&&n<=h}],"filter->=":[It,[Ot,Rt],(a,[e,n])=>{const h=a.properties()[e.value],g=n.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[It,[Rt],(a,[e])=>{const n=a.id(),h=e.value;return typeof n==typeof h&&n>=h}],"filter-has":[It,[Rt],(a,[e])=>e.value in a.properties()],"filter-has-id":[It,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[It,[Vn(Ot)],(a,[e])=>e.value.indexOf(a.geometryType())>=0],"filter-id-in":[It,[Vn(Rt)],(a,[e])=>e.value.indexOf(a.id())>=0],"filter-in-small":[It,[Ot,Vn(Rt)],(a,[e,n])=>n.value.indexOf(a.properties()[e.value])>=0],"filter-in-large":[It,[Ot,Vn(Rt)],(a,[e,n])=>(function(h,g,y,v){for(;y<=v;){const k=y+v>>1;if(g[k]===h)return!0;g[k]>h?v=k-1:y=k+1}return!1})(a.properties()[e.value],n.value,0,n.value.length-1)],all:{type:It,overloads:[[[It,It],(a,[e,n])=>e.evaluate(a)&&n.evaluate(a)],[Dr(It),(a,e)=>{for(const n of e)if(!n.evaluate(a))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(a,[e,n])=>e.evaluate(a)||n.evaluate(a)],[Dr(It),(a,e)=>{for(const n of e)if(n.evaluate(a))return!0;return!1}]]},"!":[It,[It],(a,[e])=>!e.evaluate(a)],"is-supported-script":[It,[Ot],(a,[e])=>{const n=a.globals&&a.globals.isSupportedScript;return!n||n(e.evaluate(a))}],upcase:[Ot,[Ot],(a,[e])=>e.evaluate(a).toUpperCase()],downcase:[Ot,[Ot],(a,[e])=>e.evaluate(a).toLowerCase()],concat:[Ot,Dr(Rt),(a,e)=>e.map((n=>ua(n.evaluate(a)))).join("")],"resolved-locale":[Ot,[Qs],(a,[e])=>e.evaluate(a).resolvedLocale()]});class Xo{constructor(e,n,h){this.expression=e,this._warningHistory={},this._evaluator=new Vo,this._defaultValue=n?(function(g){if(g.type==="color"&&Yo(g.default))return new Ft(0,0,0,0);switch(g.type){case"color":return Ft.parse(g.default)||null;case"padding":return St.parse(g.default)||null;case"numberArray":return ii.parse(g.default)||null;case"colorArray":return dt.parse(g.default)||null;case"variableAnchorOffsetCollection":return kn.parse(g.default)||null;case"projectionDefinition":return Yi.parse(g.default)||null;default:return g.default===void 0?null:g.default}})(n):null,this._enumValues=n&&n.type==="enum"?n.values:null,this._globalState=h}evaluateWithoutErrorHandling(e,n,h,g,y,v){return this._globalState&&(e=Ae(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(e,n,h,g,y,v){this._globalState&&(e=Ae(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new fi(`Expected value to be one of ${Object.keys(this._enumValues).map((P=>JSON.stringify(P))).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function js(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Is}function d(a,e,n){const h=new Ut(Is,Ho,[],e?(function(y){const v={color:Xn,string:Ot,number:st,enum:Ot,boolean:It,formatted:gs,padding:Oo,numberArray:eo,colorArray:nr,projectionDefinition:Fo,resolvedImage:_s,variableAnchorOffsetCollection:to};return y.type==="array"?Vn(v[y.value]||Rt,y.length):v[y.type]})(e):void 0),g=h.parse(a,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?zs(new Xo(g,e,n)):Rs(h.errors)}class b{constructor(e,n,h){this.kind=e,this._styleExpression=n,this.isStateDependent=e!=="constant"&&!Ds(n.expression),this.globalStateRefs=be(n.expression),this._globalState=h}evaluateWithoutErrorHandling(e,n,h,g,y,v){return this._globalState&&(e=Ae(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,n,h,g,y,v)}evaluate(e,n,h,g,y,v){return this._globalState&&(e=Ae(e,this._globalState)),this._styleExpression.evaluate(e,n,h,g,y,v)}}class C{constructor(e,n,h,g,y){this.kind=e,this.zoomStops=h,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!Ds(n.expression),this.globalStateRefs=be(n.expression),this.interpolationType=g,this._globalState=y}evaluateWithoutErrorHandling(e,n,h,g,y,v){return this._globalState&&(e=Ae(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,n,h,g,y,v)}evaluate(e,n,h,g,y,v){return this._globalState&&(e=Ae(e,this._globalState)),this._styleExpression.evaluate(e,n,h,g,y,v)}interpolationFactor(e,n,h){return this.interpolationType?qi.interpolationFactor(this.interpolationType,e,n,h):0}}function F(a,e,n){const h=d(a,e,n);if(h.result==="error")return h;const g=h.value.expression,y=va(g);if(!y&&!fr(e))return Rs([new En("","data expressions not supported")]);const v=mo(g,["zoom"]);if(!v&&!Fs(e))return Rs([new En("","zoom expressions not supported")]);const k=ie(g);return k||v?k instanceof En?Rs([k]):k instanceof qi&&!Ko(e)?Rs([new En("",'"interpolate" expressions cannot be used with this property')]):zs(k?new C(y?"camera":"composite",h.value,k.labels,k instanceof qi?k.interpolation:void 0,n):new b(y?"constant":"source",h.value,n)):Rs([new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class q{constructor(e,n){this._parameters=e,this._specification=n,Ln(this,Al(this._parameters,this._specification))}static deserialize(e){return new q(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ie(a){let e=null;if(a instanceof xi)e=ie(a.result);else if(a instanceof sr){for(const n of a.args)if(e=ie(n),e)break}else(a instanceof Er||a instanceof qi)&&a.input instanceof In&&a.input.name==="zoom"&&(e=a);return e instanceof En||a.eachChild((n=>{const h=ie(n);h instanceof En?e=h:!e&&h?e=new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&h&&e!==h&&(e=new En("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function be(a,e=new Set){return a instanceof As&&e.add(a.key),a.eachChild((n=>{be(n,e)})),e}function Ae(a,e){const{zoom:n,heatmapDensity:h,elevation:g,lineProgress:y,isSupportedScript:v,accumulated:k}=a??{};return{zoom:n,heatmapDensity:h,elevation:g,lineProgress:y,isSupportedScript:v,accumulated:k,globalState:e}}function Ne(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const e of a.slice(1))if(!Ne(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const Qe={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function pt(a,e){if(a==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ne(a)||(a=cn(a));const n=d(a,Qe,e);if(n.result==="error")throw new Error(n.value.map((h=>`${h.key}: ${h.message}`)).join(", "));return{filter:(h,g,y)=>n.value.evaluate(h,g,{},y),needGeometry:qt(a),getGlobalStateRefs:()=>be(n.value.expression)}}function At(a,e){return a<e?-1:a>e?1:0}function qt(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let e=1;e<a.length;e++)if(qt(a[e]))return!0;return!1}function cn(a){if(!a)return!0;const e=a[0];return a.length<=1?e!=="any":e==="=="?Ji(a[1],a[2],"=="):e==="!="?Ha(Ji(a[1],a[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Ji(a[1],a[2],e):e==="any"?(n=a.slice(1),["any"].concat(n.map(cn))):e==="all"?["all"].concat(a.slice(1).map(cn)):e==="none"?["all"].concat(a.slice(1).map(cn).map(Ha)):e==="in"?fa(a[1],a.slice(2)):e==="!in"?Ha(fa(a[1],a.slice(2))):e==="has"?qn(a[1]):e!=="!has"||Ha(qn(a[1]));var n}function Ji(a,e,n){switch(a){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,a,e]}}function fa(a,e){if(e.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((n=>typeof n!=typeof e[0]))?["filter-in-large",a,["literal",e.sort(At)]]:["filter-in-small",a,["literal",e]]}}function qn(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Ha(a){return["!",a]}function Jo(a){const e=typeof a;if(e==="number"||e==="boolean"||e==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let g="[";for(const y of a)g+=`${Jo(y)},`;return`${g}]`}const n=Object.keys(a).sort();let h="{";for(let g=0;g<n.length;g++)h+=`${JSON.stringify(n[g])}:${Jo(a[n[g]])},`;return`${h}}`}function Vu(a){let e="";for(const n of gi)e+=`/${Jo(a[n])}`;return e}function Nu(a){const e=a.value;return e?[new je(a.key,e,"constants have been deprecated as of v8")]:[]}function Oi(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ns(a){if(Array.isArray(a))return a.map(ns);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const e={};for(const n in a)e[n]=ns(a[n]);return e}return Oi(a)}function ta(a){const e=a.key,n=a.value,h=a.valueSpec||{},g=a.objectElementValidators||{},y=a.style,v=a.styleSpec,k=a.validateSpec;let P=[];const A=$t(n);if(A!=="object")return[new je(e,n,`object expected, ${A} found`)];for(const z in n){const O=z.split(".")[0],$=rr(h,O)||h["*"];let N;if(rr(g,O))N=g[O];else if(rr(h,O)){if(n[z]===void 0)continue;N=k}else if(g["*"])N=g["*"];else{if(!h["*"]){P.push(new je(e,n[z],`unknown property "${z}"`));continue}N=k}P=P.concat(N({key:(e&&`${e}.`)+z,value:n[z],valueSpec:$,style:y,styleSpec:v,object:n,objectKey:z,validateSpec:k},n))}for(const z in h)g[z]||h[z].required&&h[z].default===void 0&&n[z]===void 0&&P.push(new je(e,n,`missing required property "${z}"`));return P}function ji(a){const e=a.value,n=a.valueSpec,h=a.style,g=a.styleSpec,y=a.key,v=a.arrayElementValidator||a.validateSpec;if($t(e)!=="array")return[new je(y,e,`array expected, ${$t(e)} found`)];if(n.length&&e.length!==n.length)return[new je(y,e,`array length ${n.length} expected, length ${e.length} found`)];let k={type:n.value,values:n.values};g.$version<7&&(k.function=n.function),$t(n.value)==="object"&&(k=n.value);let P=[];for(let A=0;A<e.length;A++)P=P.concat(v({array:e,arrayIndex:A,value:e[A],valueSpec:k,validateSpec:a.validateSpec,style:h,styleSpec:g,key:`${y}[${A}]`}));return P}function zr(a){const e=a.key,n=a.value,h=a.valueSpec;let g=$t(n);return g==="number"&&n!=n&&(g="NaN"),g!=="number"?[new je(e,n,`number expected, ${g} found`)]:"minimum"in h&&n<h.minimum?[new je(e,n,`${n} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&n>h.maximum?[new je(e,n,`${n} is greater than the maximum value ${h.maximum}`)]:[]}function Qo(a){const e=a.valueSpec,n=Oi(a.value.type);let h,g,y,v={};const k=n!=="categorical"&&a.value.property===void 0,P=!k,A=$t(a.value.stops)==="array"&&$t(a.value.stops[0])==="array"&&$t(a.value.stops[0][0])==="object",z=ta({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(N){if(n==="identity")return[new je(N.key,N.value,'identity function may not have a "stops" property')];let Z=[];const W=N.value;return Z=Z.concat(ji({key:N.key,value:W,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:O})),$t(W)==="array"&&W.length===0&&Z.push(new je(N.key,W,"array must have at least one stop")),Z},default:function(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:e,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}});return n==="identity"&&k&&z.push(new je(a.key,a.value,'missing required property "property"')),n==="identity"||a.value.stops||z.push(new je(a.key,a.value,'missing required property "stops"')),n==="exponential"&&a.valueSpec.expression&&!Ko(a.valueSpec)&&z.push(new je(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(P&&!fr(a.valueSpec)?z.push(new je(a.key,a.value,"property functions not supported")):k&&!Fs(a.valueSpec)&&z.push(new je(a.key,a.value,"zoom functions not supported"))),n!=="categorical"&&!A||a.value.property!==void 0||z.push(new je(a.key,a.value,'"property" property is required')),z;function O(N){let Z=[];const W=N.value,Y=N.key;if($t(W)!=="array")return[new je(Y,W,`array expected, ${$t(W)} found`)];if(W.length!==2)return[new je(Y,W,`array length 2 expected, length ${W.length} found`)];if(A){if($t(W[0])!=="object")return[new je(Y,W,`object expected, ${$t(W[0])} found`)];if(W[0].zoom===void 0)return[new je(Y,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new je(Y,W,"object stop key must have value")];if(y&&y>Oi(W[0].zoom))return[new je(Y,W[0].zoom,"stop zoom values must appear in ascending order")];Oi(W[0].zoom)!==y&&(y=Oi(W[0].zoom),g=void 0,v={}),Z=Z.concat(ta({key:`${Y}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:zr,value:$}}))}else Z=Z.concat($({key:`${Y}[0]`,value:W[0],validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},W));return js(ns(W[1]))?Z.concat([new je(`${Y}[1]`,W[1],"expressions are not allowed in function stops.")]):Z.concat(N.validateSpec({key:`${Y}[1]`,value:W[1],valueSpec:e,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function $(N,Z){const W=$t(N.value),Y=Oi(N.value),te=N.value!==null?N.value:Z;if(h){if(W!==h)return[new je(N.key,te,`${W} stop domain type must match previous stop domain type ${h}`)]}else h=W;if(W!=="number"&&W!=="string"&&W!=="boolean")return[new je(N.key,te,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&n!=="categorical"){let ce=`number expected, ${W} found`;return fr(e)&&n===void 0&&(ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(N.key,te,ce)]}return n!=="categorical"||W!=="number"||isFinite(Y)&&Math.floor(Y)===Y?n!=="categorical"&&W==="number"&&g!==void 0&&Y<g?[new je(N.key,te,"stop domain values must appear in ascending order")]:(g=Y,n==="categorical"&&Y in v?[new je(N.key,te,"stop domain values must be unique")]:(v[Y]=!0,[])):[new je(N.key,te,`integer expected, found ${Y}`)]}}function Rr(a){const e=(a.expressionContext==="property"?F:d)(ns(a.value),a.valueSpec);if(e.result==="error")return e.value.map((h=>new je(`${a.key}${h.key}`,a.value,h.message)));const n=e.value.expression||e.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!n.outputDefined())return[new je(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Ds(n))return[new je(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Ds(n))return[new je(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!mo(n,["zoom","feature-state"]))return[new je(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!va(n))return[new je(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function go(a){const e=a.key,n=a.value,h=$t(n);return h!=="string"?[new je(e,n,`color expected, ${h} found`)]:Ft.parse(String(n))?[]:[new je(e,n,`color expected, "${n}" found`)]}function pr(a){const e=a.key,n=a.value,h=a.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(Oi(n))===-1&&g.push(new je(e,n,`expected one of [${h.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(h.values).indexOf(Oi(n))===-1&&g.push(new je(e,n,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(n)} found`)),g}function as(a){return Ne(ns(a.value))?Rr(Ln({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Uu(a)}function Uu(a){const e=a.value,n=a.key;if($t(e)!=="array")return[new je(n,e,`array expected, ${$t(e)} found`)];const h=a.styleSpec;let g,y=[];if(e.length<1)return[new je(n,e,"filter array must have at least 1 element")];switch(y=y.concat(pr({key:`${n}[0]`,value:e[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),Oi(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Oi(e[1])==="$type"&&y.push(new je(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&y.push(new je(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(g=$t(e[1]),g!=="string"&&y.push(new je(`${n}[1]`,e[1],`string expected, ${g} found`)));for(let v=2;v<e.length;v++)g=$t(e[v]),Oi(e[1])==="$type"?y=y.concat(pr({key:`${n}[${v}]`,value:e[v],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&y.push(new je(`${n}[${v}]`,e[v],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let v=1;v<e.length;v++)y=y.concat(Uu({key:`${n}[${v}]`,value:e[v],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":g=$t(e[1]),e.length!==2?y.push(new je(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):g!=="string"&&y.push(new je(`${n}[1]`,e[1],`string expected, ${g} found`))}return y}function oc(a,e){const n=a.key,h=a.validateSpec,g=a.style,y=a.styleSpec,v=a.value,k=a.objectKey,P=y[`${e}_${a.layerType}`];if(!P)return[];const A=k.match(/^(.*)-transition$/);if(e==="paint"&&A&&P[A[1]]&&P[A[1]].transition)return h({key:n,value:v,valueSpec:y.transition,style:g,styleSpec:y});const z=a.valueSpec||P[k];if(!z)return[new je(n,v,`unknown property "${k}"`)];let O;if($t(v)==="string"&&fr(z)&&!z.tokens&&(O=/^{([^}]+)}$/.exec(v)))return[new je(n,v,`"${k}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const $=[];return a.layerType==="symbol"&&k==="text-font"&&Yo(ns(v))&&Oi(v.type)==="identity"&&$.push(new je(n,v,'"text-font" does not support identity functions')),$.concat(h({key:a.key,value:v,valueSpec:z,style:g,styleSpec:y,expressionContext:"property",propertyType:e,propertyKey:k}))}function lc(a){return oc(a,"paint")}function uc(a){return oc(a,"layout")}function hc(a){let e=[];const n=a.value,h=a.key,g=a.style,y=a.styleSpec;if($t(n)!=="object")return[new je(h,n,`object expected, ${$t(n)} found`)];n.type||n.ref||e.push(new je(h,n,'either "type" or "ref" is required'));let v=Oi(n.type);const k=Oi(n.ref);if(n.id){const P=Oi(n.id);for(let A=0;A<a.arrayIndex;A++){const z=g.layers[A];Oi(z.id)===P&&e.push(new je(h,n.id,`duplicate layer id "${n.id}", previously used at line ${z.id.__line__}`))}}if("ref"in n){let P;["type","source","source-layer","filter","layout"].forEach((A=>{A in n&&e.push(new je(h,n[A],`"${A}" is prohibited for ref layers`))})),g.layers.forEach((A=>{Oi(A.id)===k&&(P=A)})),P?P.ref?e.push(new je(h,n.ref,"ref cannot reference another ref layer")):v=Oi(P.type):e.push(new je(h,n.ref,`ref layer "${k}" not found`))}else if(v!=="background")if(n.source){const P=g.sources&&g.sources[n.source],A=P&&Oi(P.type);P?A==="vector"&&v==="raster"?e.push(new je(h,n.source,`layer "${n.id}" requires a raster source`)):A!=="raster-dem"&&v==="hillshade"||A!=="raster-dem"&&v==="color-relief"?e.push(new je(h,n.source,`layer "${n.id}" requires a raster-dem source`)):A==="raster"&&v!=="raster"?e.push(new je(h,n.source,`layer "${n.id}" requires a vector source`)):A!=="vector"||n["source-layer"]?A==="raster-dem"&&v!=="hillshade"&&v!=="color-relief"?e.push(new je(h,n.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):v!=="line"||!n.paint||!n.paint["line-gradient"]||A==="geojson"&&P.lineMetrics||e.push(new je(h,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new je(h,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new je(h,n.source,`source "${n.source}" not found`))}else e.push(new je(h,n,'missing required property "source"'));return e=e.concat(ta({key:h,value:n,valueSpec:y.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:n.type,valueSpec:y.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:n,objectKey:"type"}),filter:as,layout:P=>ta({layer:n,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":A=>uc(Ln({layerType:v},A))}}),paint:P=>ta({layer:n,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":A=>lc(Ln({layerType:v},A))}})}})),e}function Bs(a){const e=a.value,n=a.key,h=$t(e);return h!=="string"?[new je(n,e,`string expected, ${h} found`)]:[]}const Vh={promoteId:function({key:a,value:e}){if($t(e)==="string")return Bs({key:a,value:e});{const n=[];for(const h in e)n.push(...Bs({key:`${a}.${h}`,value:e[h]}));return n}}};function Nh(a){const e=a.value,n=a.key,h=a.styleSpec,g=a.style,y=a.validateSpec;if(!e.type)return[new je(n,e,'"type" is required')];const v=Oi(e.type);let k;switch(v){case"vector":case"raster":return k=ta({key:n,value:e,valueSpec:h[`source_${v.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Vh,validateSpec:y}),k;case"raster-dem":return k=(function(P){var A;const z=(A=P.sourceName)!==null&&A!==void 0?A:"",O=P.value,$=P.styleSpec,N=$.source_raster_dem,Z=P.style;let W=[];const Y=$t(O);if(O===void 0)return W;if(Y!=="object")return W.push(new je("source_raster_dem",O,`object expected, ${Y} found`)),W;const te=Oi(O.encoding)==="custom",ce=["redFactor","greenFactor","blueFactor","baseShift"],ne=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const oe in O)!te&&ce.includes(oe)?W.push(new je(oe,O[oe],`In "${z}": "${oe}" is only valid when "encoding" is set to "custom". ${ne} encoding found`)):N[oe]?W=W.concat(P.validateSpec({key:oe,value:O[oe],valueSpec:N[oe],validateSpec:P.validateSpec,style:Z,styleSpec:$})):W.push(new je(oe,O[oe],`unknown property "${oe}"`));return W})({sourceName:n,value:e,style:a.style,styleSpec:h,validateSpec:y}),k;case"geojson":if(k=ta({key:n,value:e,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:y,objectElementValidators:Vh}),e.cluster)for(const P in e.clusterProperties){const[A,z]=e.clusterProperties[P],O=typeof A=="string"?[A,["accumulated"],["get",P]]:A;k.push(...Rr({key:`${n}.${P}.map`,value:z,expressionContext:"cluster-map"})),k.push(...Rr({key:`${n}.${P}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return k;case"video":return ta({key:n,value:e,valueSpec:h.source_video,style:g,validateSpec:y,styleSpec:h});case"image":return ta({key:n,value:e,valueSpec:h.source_image,style:g,validateSpec:y,styleSpec:h});case"canvas":return[new je(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pr({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Il(a){const e=a.value,n=a.styleSpec,h=n.light,g=a.style;let y=[];const v=$t(e);if(e===void 0)return y;if(v!=="object")return y=y.concat([new je("light",e,`object expected, ${v} found`)]),y;for(const k in e){const P=k.match(/^(.*)-transition$/);y=y.concat(P&&h[P[1]]&&h[P[1]].transition?a.validateSpec({key:k,value:e[k],valueSpec:n.transition,validateSpec:a.validateSpec,style:g,styleSpec:n}):h[k]?a.validateSpec({key:k,value:e[k],valueSpec:h[k],validateSpec:a.validateSpec,style:g,styleSpec:n}):[new je(k,e[k],`unknown property "${k}"`)])}return y}function dc(a){const e=a.value,n=a.styleSpec,h=n.sky,g=a.style,y=$t(e);if(e===void 0)return[];if(y!=="object")return[new je("sky",e,`object expected, ${y} found`)];let v=[];for(const k in e)v=v.concat(h[k]?a.validateSpec({key:k,value:e[k],valueSpec:h[k],style:g,styleSpec:n}):[new je(k,e[k],`unknown property "${k}"`)]);return v}function Uh(a){const e=a.value,n=a.styleSpec,h=n.terrain,g=a.style;let y=[];const v=$t(e);if(e===void 0)return y;if(v!=="object")return y=y.concat([new je("terrain",e,`object expected, ${v} found`)]),y;for(const k in e)y=y.concat(h[k]?a.validateSpec({key:k,value:e[k],valueSpec:h[k],validateSpec:a.validateSpec,style:g,styleSpec:n}):[new je(k,e[k],`unknown property "${k}"`)]);return y}function Gh(a){let e=[];const n=a.value,h=a.key;if(Array.isArray(n)){const g=[],y=[];for(const v in n)n[v].id&&g.includes(n[v].id)&&e.push(new je(h,n,`all the sprites' ids must be unique, but ${n[v].id} is duplicated`)),g.push(n[v].id),n[v].url&&y.includes(n[v].url)&&e.push(new je(h,n,`all the sprites' URLs must be unique, but ${n[v].url} is duplicated`)),y.push(n[v].url),e=e.concat(ta({key:`${h}[${v}]`,value:n[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return e}return Bs({key:h,value:n})}function cc(a){return!!a&&a.constructor===Object}function qh(a){return cc(a.value)?[]:[new je(a.key,a.value,`object expected, ${$t(a.value)} found`)]}const Zh={"*":()=>[],array:ji,boolean:function(a){const e=a.value,n=a.key,h=$t(e);return h!=="boolean"?[new je(n,e,`boolean expected, ${h} found`)]:[]},number:zr,color:go,constants:Nu,enum:pr,filter:as,function:Qo,layer:hc,object:ta,source:Nh,light:Il,sky:dc,terrain:Uh,projection:function(a){const e=a.value,n=a.styleSpec,h=n.projection,g=a.style,y=$t(e);if(e===void 0)return[];if(y!=="object")return[new je("projection",e,`object expected, ${y} found`)];let v=[];for(const k in e)v=v.concat(h[k]?a.validateSpec({key:k,value:e[k],valueSpec:h[k],style:g,styleSpec:n}):[new je(k,e[k],`unknown property "${k}"`)]);return v},projectionDefinition:function(a){const e=a.key;let n=a.value;n=n instanceof String?n.valueOf():n;const h=$t(n);return h!=="array"||(function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"})(n)||(function(g){return!!["interpolate","step","literal"].includes(g[0])})(n)?["array","string"].includes(h)?[]:[new je(e,n,`projection expected, invalid type "${h}" found`)]:[new je(e,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:Bs,formatted:function(a){return Bs(a).length===0?[]:Rr(a)},resolvedImage:function(a){return Bs(a).length===0?[]:Rr(a)},padding:function(a){const e=a.key,n=a.value;if($t(n)==="array"){if(n.length<1||n.length>4)return[new je(e,n,`padding requires 1 to 4 values; ${n.length} values found`)];const h={type:"number"};let g=[];for(let y=0;y<n.length;y++)g=g.concat(a.validateSpec({key:`${e}[${y}]`,value:n[y],validateSpec:a.validateSpec,valueSpec:h}));return g}return zr({key:e,value:n,valueSpec:{}})},numberArray:function(a){const e=a.key,n=a.value;if($t(n)==="array"){const h={type:"number"};if(n.length<1)return[new je(e,n,"array length at least 1 expected, length 0 found")];let g=[];for(let y=0;y<n.length;y++)g=g.concat(a.validateSpec({key:`${e}[${y}]`,value:n[y],validateSpec:a.validateSpec,valueSpec:h}));return g}return zr({key:e,value:n,valueSpec:{}})},colorArray:function(a){const e=a.key,n=a.value;if($t(n)==="array"){if(n.length<1)return[new je(e,n,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<n.length;g++)h=h.concat(go({key:`${e}[${g}]`,value:n[g]}));return h}return go({key:e,value:n})},variableAnchorOffsetCollection:function(a){const e=a.key,n=a.value,h=$t(n),g=a.styleSpec;if(h!=="array"||n.length<1||n.length%2!=0)return[new je(e,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let v=0;v<n.length;v+=2)y=y.concat(pr({key:`${e}[${v}]`,value:n[v],valueSpec:g.layout_symbol["text-anchor"]})),y=y.concat(ji({key:`${e}[${v+1}]`,value:n[v+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:g}));return y},sprite:Gh,state:qh,fontFaces:function(a){const e=a.key,n=a.value,h=a.validateSpec,g=a.styleSpec,y=a.style;if(!cc(n))return[new je(e,n,`object expected, ${$t(n)} found`)];const v=[];for(const k in n){const P=n[k],A=$t(P);if(A==="string")v.push(...Bs({key:`${e}.${k}`,value:P}));else if(A==="array"){const z={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[O,$]of P.entries())v.push(...ta({key:`${e}.${k}[${O}]`,value:$,valueSpec:z,styleSpec:g,style:y,validateSpec:h}))}else v.push(new je(`${e}.${k}`,P,`string or array expected, ${A} found`))}return v}};function $s(a){const e=a.value,n=a.valueSpec,h=a.styleSpec;return a.validateSpec=$s,n.expression&&Yo(Oi(e))?Qo(a):n.expression&&js(ns(e))?Rr(a):n.type&&Zh[n.type]?Zh[n.type](a):ta(Ln({},a,{valueSpec:n.type?h[n.type]:n}))}function fc(a){const e=a.value,n=a.key,h=Bs(a);return h.length||(e.indexOf("{fontstack}")===-1&&h.push(new je(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&h.push(new je(n,e,'"glyphs" url must include a "{range}" token'))),h}function Ka(a,e=De){let n=[];return n=n.concat($s({key:"",value:a,valueSpec:e.$root,styleSpec:e,style:a,validateSpec:$s,objectElementValidators:{glyphs:fc,"*":()=>[]}})),a.constants&&(n=n.concat(Nu({key:"constants",value:a.constants}))),pc(n)}function mr(a){return function(e){return a(Object.assign({},e,{validateSpec:$s}))}}function pc(a){return[].concat(a).sort(((e,n)=>e.line-n.line))}function gr(a){return function(...e){return pc(a.apply(this,e))}}Ka.source=gr(mr(Nh)),Ka.sprite=gr(mr(Gh)),Ka.glyphs=gr(mr(fc)),Ka.light=gr(mr(Il)),Ka.sky=gr(mr(dc)),Ka.terrain=gr(mr(Uh)),Ka.state=gr(mr(qh)),Ka.layer=gr(mr(hc)),Ka.filter=gr(mr(as)),Ka.paintProperty=gr(mr(lc)),Ka.layoutProperty=gr(mr(uc));const Xf={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class Dl{constructor(e,n){this._globalState=n,this.setValue(e)}evaluate(){var e;return(e=this._literalValue)!==null&&e!==void 0?e:this._compiledValue.evaluate({})}setValue(e){if(e==null||e==="visible"||e==="none")return this._literalValue=e==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const n=d(e,Xf,this._globalState);if(n.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(n.value.map((h=>`${h.key}: ${h.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=n.value,this._globalStateRefs=be(n.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const zl=De,Dn=Ka,Rl=Dn.light,mc=Dn.sky,Jf=Dn.paintProperty,Qf=Dn.layoutProperty;function el(a,e){let n=!1;if(e&&e.length)for(const h of e)a.fire(new oi(new Error(h.message))),n=!0;return n}class tl{constructor(e,n,h){const g=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const v=new Int32Array(this.arrayBuffer);e=v[0],this.d=(n=v[1])+2*(h=v[2]);for(let P=0;P<this.d*this.d;P++){const A=v[3+P],z=v[3+P+1];g.push(A===z?null:v.subarray(A,z))}const k=v[3+g.length+1];this.keys=v.subarray(v[3+g.length],k),this.bboxes=v.subarray(k),this.insert=this._insertReadonly}else{this.d=n+2*h;for(let v=0;v<this.d*this.d;v++)g.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=e,this.padding=h,this.scale=n/e,this.uid=0;const y=h/n*e;this.min=-y,this.max=e+y}insert(e,n,h,g,y){this._forEachCell(n,h,g,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(n),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,n,h,g,y,v){this.cells[y].push(v)}query(e,n,h,g,y){const v=this.min,k=this.max;if(e<=v&&n<=v&&k<=h&&k<=g&&!y)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(e,n,h,g,this._queryCell,P,{},y),P}}_queryCell(e,n,h,g,y,v,k,P){const A=this.cells[y];if(A!==null){const z=this.keys,O=this.bboxes;for(let $=0;$<A.length;$++){const N=A[$];if(k[N]===void 0){const Z=4*N;(P?P(O[Z+0],O[Z+1],O[Z+2],O[Z+3]):e<=O[Z+2]&&n<=O[Z+3]&&h>=O[Z+0]&&g>=O[Z+1])?(k[N]=!0,v.push(z[N])):k[N]=!1}}}}_forEachCell(e,n,h,g,y,v,k,P){const A=this._convertToCellCoord(e),z=this._convertToCellCoord(n),O=this._convertToCellCoord(h),$=this._convertToCellCoord(g);for(let N=A;N<=O;N++)for(let Z=z;Z<=$;Z++){const W=this.d*Z+N;if((!P||P(this._convertFromCellCoord(N),this._convertFromCellCoord(Z),this._convertFromCellCoord(N+1),this._convertFromCellCoord(Z+1)))&&y.call(this,e,n,h,g,W,v,k,P))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,n=3+this.cells.length+1+1;let h=0;for(let v=0;v<this.cells.length;v++)h+=this.cells[v].length;const g=new Int32Array(n+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let y=n;for(let v=0;v<e.length;v++){const k=e[v];g[3+v]=y,g.set(k,y),y+=k.length}return g[3+e.length]=y,g.set(this.keys,y),y+=this.keys.length,g[3+e.length+1]=y,g.set(this.bboxes,y),y+=this.bboxes.length,g.buffer}static serialize(e,n){const h=e.toArrayBuffer();return n&&n.push(h),{buffer:h}}static deserialize(e){return new tl(e.buffer)}}const _r={};function ct(a,e,n={}){if(_r[a])throw new Error(`${a} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:a,writeable:!1}),_r[a]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}ct("Object",Object),ct("Set",Set),ct("TransferableGridIndex",tl),ct("Color",Ft),ct("Error",Error),ct("AJAXError",Te),ct("ResolvedImage",Gn),ct("StylePropertyFunction",q),ct("StyleExpression",Xo,{omit:["_evaluator"]}),ct("ZoomDependentExpression",C),ct("ZoomConstantExpression",b),ct("CompoundExpression",In,{omit:["_evaluate"]});for(const a in Is)Is[a]._classRegistryKey||ct(`Expression_${a}`,Is[a]);function Gu(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Wh(a){return a.$name||a.constructor._classRegistryKey}function il(a){return!(function(e){if(e===null||typeof e!="object")return!1;const n=Wh(e);return!(!n||n==="Object")})(a)&&(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||Gu(a)||Ca(a)||ArrayBuffer.isView(a)||a instanceof ImageData)}function Fl(a,e){if(il(a))return(Gu(a)||Ca(a))&&e&&e.push(a),ArrayBuffer.isView(a)&&e&&e.push(a.buffer),a instanceof ImageData&&e&&e.push(a.data.buffer),a;if(Array.isArray(a)){const y=[];for(const v of a)y.push(Fl(v,e));return y}if(typeof a!="object")throw new Error("can't serialize object of type "+typeof a);const n=Wh(a);if(!n)throw new Error(`can't serialize object of unregistered class ${a.constructor.name}`);if(!_r[n])throw new Error(`${n} is not registered.`);const{klass:h}=_r[n],g=h.serialize?h.serialize(a,e):{};if(h.serialize){if(e&&g===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in a){if(!a.hasOwnProperty(y)||_r[n].omit.indexOf(y)>=0)continue;const v=a[y];g[y]=_r[n].shallow.indexOf(y)>=0?v:Fl(v,e)}a instanceof Error&&(g.message=a.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return n!=="Object"&&(g.$name=n),g}function Ol(a){if(il(a))return a;if(Array.isArray(a))return a.map(Ol);if(typeof a!="object")throw new Error("can't deserialize object of type "+typeof a);const e=Wh(a)||"Object";if(!_r[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:n}=_r[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(a);const h=Object.create(n.prototype);for(const g of Object.keys(a)){if(g==="$name")continue;const y=a[g];h[g]=_r[e].shallow.indexOf(g)>=0?y:Ol(y)}return h}class Hh{constructor(){this.first=!0}update(e,n){const h=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=n),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=h,!0))}}function jl(a){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))}function Kh(a){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))}function gc(a){return/\s/u.test(String.fromCodePoint(a))}function nl(a){for(const e of a)if(Kh(e.codePointAt(0)))return!0;return!1}function ep(a){for(const e of a)if(!_c(e.codePointAt(0)))return!1;return!0}function qu(a){const e=a.map((n=>{try{return new RegExp(`\\p{sc=${n}}`,"u").source}catch{return null}})).filter((n=>n));return new RegExp(e.join("|"),"u")}const Zu=qu(["Arab","Dupl","Mong","Ougr","Syrc"]);function _c(a){return!Zu.test(String.fromCodePoint(a))}function Yh(a){return!(Kh(a)||(e=a,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e}const yc=qu(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Xh(a){return yc.test(String.fromCodePoint(a))}function Jh(a,e){return!(!e&&Xh(a)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(a)))}function vc(a){for(const e of a)if(Xh(e.codePointAt(0)))return!0;return!1}const Vs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){if(Vs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(a,e){return s(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(a.pluginStatus!=="loading")return this.setState(a),a;const n=a.pluginURL,h=new Promise((y=>{this.loadScriptResolve=y}));e(n);const g=new Promise((y=>setTimeout((()=>y()),this.TIMEOUT)));if(yield Promise.race([h,g]),this.isParsed()){const y={pluginStatus:"loaded",pluginURL:n};return this.setState(y),y}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${n}`)}))}};class wi{constructor(e,n){this.isSupportedScript=tp,this.zoom=e,n?(this.now=n.now||0,this.fadeDuration=n.fadeDuration||0,this.zoomHistory=n.zoomHistory||new Hh,this.transition=n.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hh,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,n=e-Math.floor(e),h=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*n}}}function tp(a){return(function(e,n){for(const h of e)if(!Jh(h.codePointAt(0),n))return!1;return!0})(a,Vs.getRTLTextPluginStatus()==="loaded")}const Bl="-transition";class Wu{constructor(e,n,h){this.property=e,this.value=n,this.expression=(function(g,y,v){if(Yo(g))return new q(g,y);if(js(g)){const k=F(g,y,v);if(k.result==="error")throw new Error(k.value.map((P=>`${P.key}: ${P.message}`)).join(", "));return k.value}{let k=g;return y.type==="color"&&typeof g=="string"?k=Ft.parse(g):y.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?y.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?y.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?k=kn.parse(g):y.type==="projectionDefinition"&&typeof g=="string"&&(k=Yi.parse(g)):k=dt.parse(g):k=ii.parse(g):k=St.parse(g),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>k}}})(n===void 0?e.specification.default:n,e.specification,h)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,n,h){return this.property.possiblyEvaluate(this,e,n,h)}}class Hu{constructor(e,n){this.property=e,this.value=new Wu(e,void 0,n)}transitioned(e,n){return new xc(this.property,this.value,n,Ii({},e.transition,this.transition),e.now)}untransitioned(){return new xc(this.property,this.value,null,{},0)}}class Qh{constructor(e,n){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=n}getValue(e){return xn(this._values[e].value.value)}setValue(e,n){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Hu(this._values[e].property,this._globalState)),this._values[e].value=new Wu(this._values[e].property,n===null?void 0:xn(n),this._globalState)}getTransition(e){return xn(this._values[e].transition)}setTransition(e,n){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Hu(this._values[e].property,this._globalState)),this._values[e].transition=xn(n)||void 0}serialize(){const e={};for(const n of Object.keys(this._values)){const h=this.getValue(n);h!==void 0&&(e[n]=h);const g=this.getTransition(n);g!==void 0&&(e[`${n}${Bl}`]=g)}return e}transitioned(e,n){const h=new bc(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(e,n._values[g]);return h}untransitioned(){const e=new bc(this._properties);for(const n of Object.keys(this._values))e._values[n]=this._values[n].untransitioned();return e}}class xc{constructor(e,n,h,g,y){this.property=e,this.value=n,this.begin=y+g.delay||0,this.end=this.begin+g.duration||0,e.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(e,n,h){const g=e.now||0,y=this.value.possiblyEvaluate(e,n,h),v=this.prior;if(v){if(g>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(g<this.begin)return v.possiblyEvaluate(e,n,h);{const k=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(e,n,h),y,ki(k))}}return y}}class bc{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,n,h){const g=new $l(this._properties);for(const y of Object.keys(this._values))g._values[y]=this._values[y].possiblyEvaluate(e,n,h);return g}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class wc{constructor(e,n){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=n}hasValue(e){return this._values[e].value!==void 0}getValue(e){return xn(this._values[e].value)}setValue(e,n){this._values[e]=new Wu(this._values[e].property,n===null?void 0:xn(n),this._globalState)}serialize(){const e={};for(const n of Object.keys(this._values)){const h=this.getValue(n);h!==void 0&&(e[n]=h)}return e}possiblyEvaluate(e,n,h){const g=new $l(this._properties);for(const y of Object.keys(this._values))g._values[y]=this._values[y].possiblyEvaluate(e,n,h);return g}}class yr{constructor(e,n,h){this.property=e,this.value=n,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,n,h,g){return this.property.evaluate(this.value,this.parameters,e,n,h,g)}}class $l{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class _t{constructor(e){this.specification=e}possiblyEvaluate(e,n){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(n)}interpolate(e,n,h){const g=Si[this.specification.type];return g?g(e,n,h):e}}class kt{constructor(e,n){this.specification=e,this.overrides=n}possiblyEvaluate(e,n,h,g){return new yr(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(n,null,{},h,g)}:e.expression,n)}interpolate(e,n,h){if(e.value.kind!=="constant"||n.value.kind!=="constant")return e;if(e.value.value===void 0||n.value.value===void 0)return new yr(this,{kind:"constant",value:void 0},e.parameters);const g=Si[this.specification.type];if(g){const y=g(e.value.value,n.value.value,h);return new yr(this,{kind:"constant",value:y},e.parameters)}return e}evaluate(e,n,h,g,y,v){return e.kind==="constant"?e.value:e.evaluate(n,h,g,y,v)}}class Vl extends kt{possiblyEvaluate(e,n,h,g){if(e.value===void 0)return new yr(this,{kind:"constant",value:void 0},n);if(e.expression.kind==="constant"){const y=e.expression.evaluate(n,null,{},h,g),v=e.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,k=this._calculate(v,v,v,n);return new yr(this,{kind:"constant",value:k},n)}if(e.expression.kind==="camera"){const y=this._calculate(e.expression.evaluate({zoom:n.zoom-1}),e.expression.evaluate({zoom:n.zoom}),e.expression.evaluate({zoom:n.zoom+1}),n);return new yr(this,{kind:"constant",value:y},n)}return new yr(this,e.expression,n)}evaluate(e,n,h,g,y,v){if(e.kind==="source"){const k=e.evaluate(n,h,g,y,v);return this._calculate(k,k,k,n)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(n.zoom)-1},h,g),e.evaluate({zoom:Math.floor(n.zoom)},h,g),e.evaluate({zoom:Math.floor(n.zoom)+1},h,g),n):e.value}_calculate(e,n,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:e,to:n}:{from:h,to:n}}interpolate(e){return e}}class Ku{constructor(e){this.specification=e}possiblyEvaluate(e,n,h,g){if(e.value!==void 0){if(e.expression.kind==="constant"){const y=e.expression.evaluate(n,null,{},h,g);return this._calculate(y,y,y,n)}return this._calculate(e.expression.evaluate(new wi(Math.floor(n.zoom-1),n)),e.expression.evaluate(new wi(Math.floor(n.zoom),n)),e.expression.evaluate(new wi(Math.floor(n.zoom+1),n)),n)}}_calculate(e,n,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:e,to:n}:{from:h,to:n}}interpolate(e){return e}}class Yu{constructor(e){this.specification=e}possiblyEvaluate(e,n,h,g){return!!e.expression.evaluate(n,null,{},h,g)}interpolate(){return!1}}class pa{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const n in e){const h=e[n];h.specification.overridable&&this.overridableProperties.push(n);const g=this.defaultPropertyValues[n]=new Wu(h,void 0,void 0),y=this.defaultTransitionablePropertyValues[n]=new Hu(h,void 0);this.defaultTransitioningPropertyValues[n]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=g.possiblyEvaluate({})}}}ct("DataDrivenProperty",kt),ct("DataConstantProperty",_t),ct("CrossFadedDataDrivenProperty",Vl),ct("CrossFadedProperty",Ku),ct("ColorRampProperty",Yu);class Ya extends Qt{constructor(e,n,h){if(super(),this.id=e.id,this.type=e.type,this._globalState=h,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this._visibilityExpression=(function(g,y){return new Dl(g,y)})(this.visibility,h),e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=pt(e.filter,h)),n.layout&&(this._unevaluatedLayout=new wc(n.layout,h)),n.paint)){this._transitionablePaint=new Qh(n.paint,h);for(const g in e.paint)this.setPaintProperty(g,e.paint[g],{validate:!1});for(const g in e.layout)this.setLayoutProperty(g,e.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $l(n.paint)}}setFilter(e){this.filter=e,this._featureFilter=pt(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;for(const n of this._visibilityExpression.getGlobalStateRefs())e.add(n);if(this._unevaluatedLayout)for(const n in this._unevaluatedLayout._values){const h=this._unevaluatedLayout._values[n];for(const g of h.getGlobalStateRefs())e.add(g)}for(const n of this._featureFilter.getGlobalStateRefs())e.add(n);return e}getPaintAffectingGlobalStateRefs(){var e;const n=new globalThis.Map;if(this._transitionablePaint)for(const h in this._transitionablePaint._values){const g=this._transitionablePaint._values[h].value;for(const y of g.getGlobalStateRefs()){const v=(e=n.get(y))!==null&&e!==void 0?e:[];v.push({name:h,value:g.value}),n.set(y,v)}}return n}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(e,n,h={}){if(n==null||!this._validate(Qf,`layers.${this.id}.layout.${e}`,e,n,h))return e==="visibility"?(this.visibility=n,this._visibilityExpression.setValue(n),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(e,n)}getPaintProperty(e){return e.endsWith(Bl)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,n,h={}){if(n!=null&&this._validate(Jf,`layers.${this.id}.paint.${e}`,e,n,h))return!1;if(e.endsWith(Bl))return this._transitionablePaint.setTransition(e.slice(0,-11),n||void 0),!1;{const g=this._transitionablePaint._values[e],y=g.property.specification["property-type"]==="cross-faded-data-driven",v=g.value.isDataDriven(),k=g.value;this._transitionablePaint.setValue(e,n),this._handleSpecialPaintPropertyUpdate(e);const P=this._transitionablePaint._values[e].value;return P.isDataDriven()||v||y||this._handleOverridablePaintPropertyUpdate(e,k,P)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,n,h){return!1}isHidden(e=this.minzoom,n=!1){return!!(this.minzoom&&e<(n?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(e,n){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,n)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),tr(e,((n,h)=>!(n===void 0||h==="layout"&&!Object.keys(n).length||h==="paint"&&!Object.keys(n).length)))}_validate(e,n,h,g,y={}){return(!y||y.validate!==!1)&&el(this,e.call(Dn,{key:n,layerType:this.type,objectKey:h,value:g,styleSpec:De,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const n=this.paint.get(e);if(n instanceof yr&&fr(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}let ed;var kc={get paint(){return ed=ed||new pa({"raster-opacity":new _t(De.paint_raster["raster-opacity"]),"raster-hue-rotate":new _t(De.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _t(De.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _t(De.paint_raster["raster-brightness-max"]),"raster-saturation":new _t(De.paint_raster["raster-saturation"]),"raster-contrast":new _t(De.paint_raster["raster-contrast"]),"raster-resampling":new _t(De.paint_raster["raster-resampling"]),"raster-fade-duration":new _t(De.paint_raster["raster-fade-duration"])})}};class ip extends Ya{constructor(e,n){super(e,kc,n)}}const np={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Nl{constructor(e,n){this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,n){return e._trim(),n&&(e.isTransferred=!0,n.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const n=Object.create(this.prototype);return n.arrayBuffer=e.arrayBuffer,n.length=e.length,n.capacity=e.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function sn(a,e=1){let n=0,h=0;return{members:a.map((g=>{const y=np[g.type].BYTES_PER_ELEMENT,v=n=_o(n,Math.max(e,y)),k=g.components||1;return h=Math.max(h,y),n+=y*k,{name:g.name,type:g.type,components:k,offset:v}})),size:_o(n,Math.max(h,e)),alignment:e}}function _o(a,e){return Math.ceil(a/e)*e}class Ul extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n){const h=this.length;return this.resize(h+1),this.emplace(h,e,n)}emplace(e,n,h){const g=2*e;return this.int16[g+0]=n,this.int16[g+1]=h,e}}Ul.prototype.bytesPerElement=4,ct("StructArrayLayout2i4",Ul);class Xu extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,h)}emplace(e,n,h,g){const y=3*e;return this.int16[y+0]=n,this.int16[y+1]=h,this.int16[y+2]=g,e}}Xu.prototype.bytesPerElement=6,ct("StructArrayLayout3i6",Xu);class td extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,n,h,g)}emplace(e,n,h,g,y){const v=4*e;return this.int16[v+0]=n,this.int16[v+1]=h,this.int16[v+2]=g,this.int16[v+3]=y,e}}td.prototype.bytesPerElement=8,ct("StructArrayLayout4i8",td);class Ju extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v){const k=this.length;return this.resize(k+1),this.emplace(k,e,n,h,g,y,v)}emplace(e,n,h,g,y,v,k){const P=6*e;return this.int16[P+0]=n,this.int16[P+1]=h,this.int16[P+2]=g,this.int16[P+3]=y,this.int16[P+4]=v,this.int16[P+5]=k,e}}Ju.prototype.bytesPerElement=12,ct("StructArrayLayout2i4i12",Ju);class id extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v){const k=this.length;return this.resize(k+1),this.emplace(k,e,n,h,g,y,v)}emplace(e,n,h,g,y,v,k){const P=4*e,A=8*e;return this.int16[P+0]=n,this.int16[P+1]=h,this.uint8[A+4]=g,this.uint8[A+5]=y,this.uint8[A+6]=v,this.uint8[A+7]=k,e}}id.prototype.bytesPerElement=8,ct("StructArrayLayout2i4ub8",id);class Gl extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n){const h=this.length;return this.resize(h+1),this.emplace(h,e,n)}emplace(e,n,h){const g=2*e;return this.float32[g+0]=n,this.float32[g+1]=h,e}}Gl.prototype.bytesPerElement=8,ct("StructArrayLayout2f8",Gl);class rs extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v,k,P,A,z){const O=this.length;return this.resize(O+1),this.emplace(O,e,n,h,g,y,v,k,P,A,z)}emplace(e,n,h,g,y,v,k,P,A,z,O){const $=10*e;return this.uint16[$+0]=n,this.uint16[$+1]=h,this.uint16[$+2]=g,this.uint16[$+3]=y,this.uint16[$+4]=v,this.uint16[$+5]=k,this.uint16[$+6]=P,this.uint16[$+7]=A,this.uint16[$+8]=z,this.uint16[$+9]=O,e}}rs.prototype.bytesPerElement=20,ct("StructArrayLayout10ui20",rs);class Qu extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v,k,P){const A=this.length;return this.resize(A+1),this.emplace(A,e,n,h,g,y,v,k,P)}emplace(e,n,h,g,y,v,k,P,A){const z=8*e;return this.uint16[z+0]=n,this.uint16[z+1]=h,this.uint16[z+2]=g,this.uint16[z+3]=y,this.uint16[z+4]=v,this.uint16[z+5]=k,this.uint16[z+6]=P,this.uint16[z+7]=A,e}}Qu.prototype.bytesPerElement=16,ct("StructArrayLayout8ui16",Qu);class ql extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v,k,P,A,z,O,$){const N=this.length;return this.resize(N+1),this.emplace(N,e,n,h,g,y,v,k,P,A,z,O,$)}emplace(e,n,h,g,y,v,k,P,A,z,O,$,N){const Z=12*e;return this.int16[Z+0]=n,this.int16[Z+1]=h,this.int16[Z+2]=g,this.int16[Z+3]=y,this.uint16[Z+4]=v,this.uint16[Z+5]=k,this.uint16[Z+6]=P,this.uint16[Z+7]=A,this.int16[Z+8]=z,this.int16[Z+9]=O,this.int16[Z+10]=$,this.int16[Z+11]=N,e}}ql.prototype.bytesPerElement=24,ct("StructArrayLayout4i4ui4i24",ql);class eh extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,h)}emplace(e,n,h,g){const y=3*e;return this.float32[y+0]=n,this.float32[y+1]=h,this.float32[y+2]=g,e}}eh.prototype.bytesPerElement=12,ct("StructArrayLayout3f12",eh);class Zl extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint32[1*e+0]=n,e}}Zl.prototype.bytesPerElement=4,ct("StructArrayLayout1ul4",Zl);class nd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v,k,P,A){const z=this.length;return this.resize(z+1),this.emplace(z,e,n,h,g,y,v,k,P,A)}emplace(e,n,h,g,y,v,k,P,A,z){const O=10*e,$=5*e;return this.int16[O+0]=n,this.int16[O+1]=h,this.int16[O+2]=g,this.int16[O+3]=y,this.int16[O+4]=v,this.int16[O+5]=k,this.uint32[$+3]=P,this.uint16[O+8]=A,this.uint16[O+9]=z,e}}nd.prototype.bytesPerElement=20,ct("StructArrayLayout6i1ul2ui20",nd);class al extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v){const k=this.length;return this.resize(k+1),this.emplace(k,e,n,h,g,y,v)}emplace(e,n,h,g,y,v,k){const P=6*e;return this.int16[P+0]=n,this.int16[P+1]=h,this.int16[P+2]=g,this.int16[P+3]=y,this.int16[P+4]=v,this.int16[P+5]=k,e}}al.prototype.bytesPerElement=12,ct("StructArrayLayout2i2i2i12",al);class yo extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y){const v=this.length;return this.resize(v+1),this.emplace(v,e,n,h,g,y)}emplace(e,n,h,g,y,v){const k=4*e,P=8*e;return this.float32[k+0]=n,this.float32[k+1]=h,this.float32[k+2]=g,this.int16[P+6]=y,this.int16[P+7]=v,e}}yo.prototype.bytesPerElement=16,ct("StructArrayLayout2f1f2i16",yo);class ad extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v){const k=this.length;return this.resize(k+1),this.emplace(k,e,n,h,g,y,v)}emplace(e,n,h,g,y,v,k){const P=16*e,A=4*e,z=8*e;return this.uint8[P+0]=n,this.uint8[P+1]=h,this.float32[A+1]=g,this.float32[A+2]=y,this.int16[z+6]=v,this.int16[z+7]=k,e}}ad.prototype.bytesPerElement=16,ct("StructArrayLayout2ub2f2i16",ad);class Wl extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,h)}emplace(e,n,h,g){const y=3*e;return this.uint16[y+0]=n,this.uint16[y+1]=h,this.uint16[y+2]=g,e}}Wl.prototype.bytesPerElement=6,ct("StructArrayLayout3ui6",Wl);class vo extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v,k,P,A,z,O,$,N,Z,W,Y,te){const ce=this.length;return this.resize(ce+1),this.emplace(ce,e,n,h,g,y,v,k,P,A,z,O,$,N,Z,W,Y,te)}emplace(e,n,h,g,y,v,k,P,A,z,O,$,N,Z,W,Y,te,ce){const ne=24*e,oe=12*e,pe=48*e;return this.int16[ne+0]=n,this.int16[ne+1]=h,this.uint16[ne+2]=g,this.uint16[ne+3]=y,this.uint32[oe+2]=v,this.uint32[oe+3]=k,this.uint32[oe+4]=P,this.uint16[ne+10]=A,this.uint16[ne+11]=z,this.uint16[ne+12]=O,this.float32[oe+7]=$,this.float32[oe+8]=N,this.uint8[pe+36]=Z,this.uint8[pe+37]=W,this.uint8[pe+38]=Y,this.uint32[oe+10]=te,this.int16[ne+22]=ce,e}}vo.prototype.bytesPerElement=48,ct("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",vo);class rd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,h,g,y,v,k,P,A,z,O,$,N,Z,W,Y,te,ce,ne,oe,pe,_e,Ee,We,Ge,He,at,Xe){const qe=this.length;return this.resize(qe+1),this.emplace(qe,e,n,h,g,y,v,k,P,A,z,O,$,N,Z,W,Y,te,ce,ne,oe,pe,_e,Ee,We,Ge,He,at,Xe)}emplace(e,n,h,g,y,v,k,P,A,z,O,$,N,Z,W,Y,te,ce,ne,oe,pe,_e,Ee,We,Ge,He,at,Xe,qe){const Be=32*e,ht=16*e;return this.int16[Be+0]=n,this.int16[Be+1]=h,this.int16[Be+2]=g,this.int16[Be+3]=y,this.int16[Be+4]=v,this.int16[Be+5]=k,this.int16[Be+6]=P,this.int16[Be+7]=A,this.uint16[Be+8]=z,this.uint16[Be+9]=O,this.uint16[Be+10]=$,this.uint16[Be+11]=N,this.uint16[Be+12]=Z,this.uint16[Be+13]=W,this.uint16[Be+14]=Y,this.uint16[Be+15]=te,this.uint16[Be+16]=ce,this.uint16[Be+17]=ne,this.uint16[Be+18]=oe,this.uint16[Be+19]=pe,this.uint16[Be+20]=_e,this.uint16[Be+21]=Ee,this.uint16[Be+22]=We,this.uint32[ht+12]=Ge,this.float32[ht+13]=He,this.float32[ht+14]=at,this.uint16[Be+30]=Xe,this.uint16[Be+31]=qe,e}}rd.prototype.bytesPerElement=64,ct("StructArrayLayout8i15ui1ul2f2ui64",rd);class th extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.float32[1*e+0]=n,e}}th.prototype.bytesPerElement=4,ct("StructArrayLayout1f4",th);class ih extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,h)}emplace(e,n,h,g){const y=3*e;return this.uint16[6*e+0]=n,this.float32[y+1]=h,this.float32[y+2]=g,e}}ih.prototype.bytesPerElement=12,ct("StructArrayLayout1ui2f12",ih);class sd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,n,h)}emplace(e,n,h,g){const y=4*e;return this.uint32[2*e+0]=n,this.uint16[y+2]=h,this.uint16[y+3]=g,e}}sd.prototype.bytesPerElement=8,ct("StructArrayLayout1ul2ui8",sd);class x extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n){const h=this.length;return this.resize(h+1),this.emplace(h,e,n)}emplace(e,n,h){const g=2*e;return this.uint16[g+0]=n,this.uint16[g+1]=h,e}}x.prototype.bytesPerElement=4,ct("StructArrayLayout2ui4",x);class t extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint16[1*e+0]=n,e}}t.prototype.bytesPerElement=2,ct("StructArrayLayout1ui2",t);class o extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,n,h,g)}emplace(e,n,h,g,y){const v=4*e;return this.float32[v+0]=n,this.float32[v+1]=h,this.float32[v+2]=g,this.float32[v+3]=y,e}}o.prototype.bytesPerElement=16,ct("StructArrayLayout4f16",o);class m extends Nl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new S(this.anchorPointX,this.anchorPointY)}}m.prototype.size=20;class _ extends nd{get(e){return new m(this,e)}}ct("CollisionBoxArray",_);class w extends Nl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}w.prototype.size=48;class T extends vo{get(e){return new w(this,e)}}ct("PlacedSymbolArray",T);class E extends Nl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}E.prototype.size=64;class I extends rd{get(e){return new E(this,e)}}ct("SymbolInstanceArray",I);class R extends th{getoffsetX(e){return this.float32[1*e+0]}}ct("GlyphOffsetArray",R);class B extends Xu{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}ct("SymbolLineVertexArray",B);class G extends Nl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}G.prototype.size=12;class U extends ih{get(e){return new G(this,e)}}ct("TextAnchorOffsetArray",U);class K extends Nl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}K.prototype.size=8;class ee extends sd{get(e){return new K(this,e)}}ct("FeatureIndexArray",ee);class le extends Ul{}class he extends Ul{}class ue extends Ul{}class fe extends Ju{}class ye extends id{}class de extends Gl{}class ge extends rs{}class ke extends Qu{}class me extends ql{}class Me extends eh{}class $e extends Zl{}class ze extends al{}class Re extends ad{}class Oe extends Wl{}class tt extends x{}const it=sn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ke}=it;class rt{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,n,h,g){const y=this.segments[this.segments.length-1];return e>rt.MAX_VERTEX_ARRAY_LENGTH&&gn(`Max vertices per segment is ${rt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${rt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!y||y.vertexLength+e>rt.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==g?this.createNewSegment(n,h,g):y}createNewSegment(e,n,h){const g={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(g.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(e,n,h){return this.prepareSegment(0,e,n,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const n in e.vaos)e.vaos[n].destroy()}static simpleSegment(e,n,h,g){return new rt([{vertexOffset:e,primitiveOffset:n,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function Dt(a,e){return 256*(a=Pt(Math.floor(a),0,255))+Pt(Math.floor(e),0,255)}rt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ct("SegmentVector",rt);const pi=sn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),zi=sn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Ti,Bi,Pi,Qi={exports:{}},$i={exports:{}},zn={exports:{}},fn=(function(){if(Pi)return Qi.exports;Pi=1;var a=(Ti||(Ti=1,$i.exports=function(n,h){var g,y,v,k,P,A,z,O;for(y=n.length-(g=3&n.length),v=h,P=3432918353,A=461845907,O=0;O<y;)z=255&n.charCodeAt(O)|(255&n.charCodeAt(++O))<<8|(255&n.charCodeAt(++O))<<16|(255&n.charCodeAt(++O))<<24,++O,v=27492+(65535&(k=5*(65535&(v=(v^=z=(65535&(z=(z=(65535&z)*P+(((z>>>16)*P&65535)<<16)&4294967295)<<15|z>>>17))*A+(((z>>>16)*A&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(k>>>16)&65535)<<16);switch(z=0,g){case 3:z^=(255&n.charCodeAt(O+2))<<16;case 2:z^=(255&n.charCodeAt(O+1))<<8;case 1:v^=z=(65535&(z=(z=(65535&(z^=255&n.charCodeAt(O)))*P+(((z>>>16)*P&65535)<<16)&4294967295)<<15|z>>>17))*A+(((z>>>16)*A&65535)<<16)&4294967295}return v^=n.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}),$i.exports),e=(Bi||(Bi=1,zn.exports=function(n,h){for(var g,y=n.length,v=h^y,k=0;y>=4;)g=1540483477*(65535&(g=255&n.charCodeAt(k)|(255&n.charCodeAt(++k))<<8|(255&n.charCodeAt(++k))<<16|(255&n.charCodeAt(++k))<<24))+((1540483477*(g>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),y-=4,++k;switch(y){case 3:v^=(255&n.charCodeAt(k+2))<<16;case 2:v^=(255&n.charCodeAt(k+1))<<8;case 1:v=1540483477*(65535&(v^=255&n.charCodeAt(k)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}),zn.exports);return Qi.exports=a,Qi.exports.murmur3=a,Qi.exports.murmur2=e,Qi.exports})(),on=M(fn);class Zn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,n,h,g){this.ids.push(Ns(e)),this.positions.push(n,h,g)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const n=Ns(e);let h=0,g=this.ids.length-1;for(;h<g;){const v=h+g>>1;this.ids[v]>=n?g=v:h=v+1}const y=[];for(;this.ids[h]===n;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(e,n){const h=new Float64Array(e.ids),g=new Uint32Array(e.positions);return ss(h,g,0,h.length-1),n&&n.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(e){const n=new Zn;return n.ids=e.ids,n.positions=e.positions,n.indexed=!0,n}}function Ns(a){const e=+a;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:on(String(a))}function ss(a,e,n,h){for(;n<h;){const g=a[n+h>>1];let y=n-1,v=h+1;for(;;){do y++;while(a[y]<g);do v--;while(a[v]>g);if(y>=v)break;Fr(a,y,v),Fr(e,3*y,3*v),Fr(e,3*y+1,3*v+1),Fr(e,3*y+2,3*v+2)}v-n<h-v?(ss(a,e,n,v),n=v+1):(ss(a,e,v+1,h),h=v)}}function Fr(a,e,n){const h=a[e];a[e]=a[n],a[n]=h}ct("FeaturePositionMap",Zn);class xa{constructor(e,n){this.gl=e.gl,this.location=n}}class xo extends xa{constructor(e,n){super(e,n),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Hl extends xa{constructor(e,n){super(e,n),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class bo extends xa{constructor(e,n){super(e,n),this.current=Ft.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Xa=new Float32Array(16);function Or(a){return[Dt(255*a.r,255*a.g),Dt(255*a.b,255*a.a)]}class vr{constructor(e,n,h){this.value=e,this.uniformNames=n.map((g=>`u_${g}`)),this.type=h}setUniform(e,n,h){e.set(h.constantOr(this.value))}getBinding(e,n,h){return this.type==="color"?new bo(e,n):new xo(e,n)}}class xr{constructor(e,n){this.uniformNames=n.map((h=>`u_${h}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,n){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,n.y,n.height,n.width]}setUniform(e,n,h,g){let y=null;g==="u_pattern_to"?y=this.patternTo:g==="u_pattern_from"?y=this.patternFrom:g==="u_dasharray_to"?y=this.dashTo:g==="u_dasharray_from"?y=this.dashFrom:g==="u_pixel_ratio_to"?y=this.pixelRatioTo:g==="u_pixel_ratio_from"&&(y=this.pixelRatioFrom),y!==null&&e.set(y)}getBinding(e,n,h){return h.substr(0,9)==="u_pattern"||h.substr(0,12)==="u_dasharray_"?new Hl(e,n):new xo(e,n)}}class Li{constructor(e,n,h,g){this.expression=e,this.type=h,this.maxValue=0,this.paintVertexAttributes=n.map((y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(e,n,h){const g=this.paintVertexArray.length,y=this.expression.evaluate(new wi(0,h),n,{},h.canonical,[],h.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(g,e,y)}updatePaintArray(e,n,h,g,y){const v=this.expression.evaluate(new wi(0,y),h,g);this._setPaintValue(e,n,v)}_setPaintValue(e,n,h){if(this.type==="color"){const g=Or(h);for(let y=e;y<n;y++)this.paintVertexArray.emplace(y,g[0],g[1])}else{for(let g=e;g<n;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Mi{constructor(e,n,h,g,y,v){this.expression=e,this.uniformNames=n.map((k=>`u_${k}_t`)),this.type=h,this.useIntegerZoom=g,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=n.map((k=>({name:`a_${k}`,type:"Float32",components:h==="color"?4:2,offset:0}))),this.paintVertexArray=new v}populatePaintArray(e,n,h){const g=this.expression.evaluate(new wi(this.zoom,h),n,{},h.canonical,[],h.formattedSection),y=this.expression.evaluate(new wi(this.zoom+1,h),n,{},h.canonical,[],h.formattedSection),v=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(v,e,g,y)}updatePaintArray(e,n,h,g,y){const v=this.expression.evaluate(new wi(this.zoom,y),h,g),k=this.expression.evaluate(new wi(this.zoom+1,y),h,g);this._setPaintValue(e,n,v,k)}_setPaintValue(e,n,h,g){if(this.type==="color"){const y=Or(h),v=Or(g);for(let k=e;k<n;k++)this.paintVertexArray.emplace(k,y[0],y[1],v[0],v[1])}else{for(let y=e;y<n;y++)this.paintVertexArray.emplace(y,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,n){const h=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,g=Pt(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);e.set(g)}getBinding(e,n,h){return new xo(e,n)}}class Tn{constructor(e,n,h,g,y,v){this.expression=e,this.type=n,this.useIntegerZoom=h,this.zoom=g,this.layerId=v,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(e,n,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(g,e,this.getPositionIds(n),h)}updatePaintArray(e,n,h,g,y){this._setPaintValues(e,n,this.getPositionIds(h),y)}_setPaintValues(e,n,h,g){const y=this.getPositions(g);if(!y||!h)return;const v=y[h.min],k=y[h.mid],P=y[h.max];if(v&&k&&P)for(let A=e;A<n;A++)this.emplace(this.zoomInPaintVertexArray,A,k,v),this.emplace(this.zoomOutPaintVertexArray,A,k,P)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const n=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,n,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,n,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Pn extends Tn{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return pi.members}emplace(e,n,h,g){e.emplace(n,h.tlbr[0],h.tlbr[1],h.tlbr[2],h.tlbr[3],g.tlbr[0],g.tlbr[1],g.tlbr[2],g.tlbr[3],h.pixelRatio,g.pixelRatio)}}class Sc extends Tn{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return zi.members}emplace(e,n,h,g){e.emplace(n,0,h.y,h.height,h.width,0,g.y,g.height,g.width)}}class Tc{constructor(e,n,h){this.binders={},this._buffers=[];const g=[];for(const y in e.paint._values){if(!h(y))continue;const v=e.paint.get(y);if(!(v instanceof yr&&fr(v.property.specification)))continue;const k=ap(y,e.type),P=v.value,A=v.property.specification.type,z=v.property.useIntegerZoom,O=v.property.specification["property-type"],$=O==="cross-faded"||O==="cross-faded-data-driven";if(P.kind==="constant")this.binders[y]=$?new xr(P.value,k):new vr(P.value,k,A),g.push(`/u_${y}`);else if(P.kind==="source"||$){const N=Pc(y,A,"source");this.binders[y]=$?y==="line-dasharray"?new Sc(P,A,z,n,N,e.id):new Pn(P,A,z,n,N,e.id):new Li(P,k,A,N),g.push(`/a_${y}`)}else{const N=Pc(y,A,"composite");this.binders[y]=new Mi(P,k,A,z,n,N),g.push(`/z_${y}`)}}this.cacheKey=g.sort().join("")}getMaxValue(e){const n=this.binders[e];return n instanceof Li||n instanceof Mi?n.maxValue:0}populatePaintArrays(e,n,h){for(const g in this.binders){const y=this.binders[g];(y instanceof Li||y instanceof Mi||y instanceof Tn)&&y.populatePaintArray(e,n,h)}}setConstantPatternPositions(e,n){for(const h in this.binders){const g=this.binders[h];g instanceof xr&&g.setConstantPatternPositions(e,n)}}setConstantDashPositions(e,n){for(const h in this.binders){const g=this.binders[h];g instanceof xr&&g.setConstantDashPositions(e,n)}}updatePaintArrays(e,n,h,g,y){let v=!1;for(const k in e){const P=n.getPositions(k);for(const A of P){const z=h.feature(A.index);for(const O in this.binders){const $=this.binders[O];if(($ instanceof Li||$ instanceof Mi||$ instanceof Tn)&&$.expression.isStateDependent===!0){const N=g.paint.get(O);$.expression=N.value,$.updatePaintArray(A.start,A.end,z,e[k],y),v=!0}}}}return v}defines(){const e=[];for(const n in this.binders){const h=this.binders[n];(h instanceof vr||h instanceof xr)&&e.push(...h.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return e}getBinderAttributes(){const e=[];for(const n in this.binders){const h=this.binders[n];if(h instanceof Li||h instanceof Mi)for(let g=0;g<h.paintVertexAttributes.length;g++)e.push(h.paintVertexAttributes[g].name);else if(h instanceof Tn){const g=h.getVertexAttributes();for(const y of g)e.push(y.name)}}return e}getBinderUniforms(){const e=[];for(const n in this.binders){const h=this.binders[n];if(h instanceof vr||h instanceof xr||h instanceof Mi)for(const g of h.uniformNames)e.push(g)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,n){const h=[];for(const g in this.binders){const y=this.binders[g];if(y instanceof vr||y instanceof xr||y instanceof Mi){for(const v of y.uniformNames)if(n[v]){const k=y.getBinding(e,n[v],v);h.push({name:v,property:g,binding:k})}}}return h}setUniforms(e,n,h,g){for(const{name:y,property:v,binding:k}of n)this.binders[v].setUniform(k,g,h.get(v),y)}updatePaintBuffers(e){this._buffers=[];for(const n in this.binders){const h=this.binders[n];if(e&&h instanceof Tn){const g=e.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof Li||h instanceof Mi)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(e){for(const n in this.binders){const h=this.binders[n];(h instanceof Li||h instanceof Mi||h instanceof Tn)&&h.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const n=this.binders[e];(n instanceof Li||n instanceof Mi||n instanceof Tn)&&n.destroy()}}}class wo{constructor(e,n,h=()=>!0){this.programConfigurations={};for(const g of e)this.programConfigurations[g.id]=new Tc(g,n,h);this.needsUpload=!1,this._featureMap=new Zn,this._bufferOffset=0}populatePaintArrays(e,n,h,g){for(const y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(e,n,g);n.id!==void 0&&this._featureMap.add(n.id,h,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,n,h,g){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(e,this._featureMap,n,y,g)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function ap(a,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${e}-`,"").replace(/-/g,"_")]}function Pc(a,e,n){const h={color:{source:Gl,composite:o},number:{source:th,composite:Gl}},g=(function(y){return{"line-pattern":{source:ge,composite:ge},"fill-pattern":{source:ge,composite:ge},"fill-extrusion-pattern":{source:ge,composite:ge},"line-dasharray":{source:ke,composite:ke}}[y]})(a);return g&&g[n]||h[e][n]}ct("ConstantBinder",vr),ct("CrossFadedConstantBinder",xr),ct("SourceExpressionBinder",Li),ct("CrossFadedPatternBinder",Pn),ct("CrossFadedDasharrayBinder",Sc),ct("CompositeExpressionBinder",Mi),ct("ProgramConfiguration",Tc,{omit:["_buffers"]}),ct("ProgramConfigurationSet",wo);const od=Math.pow(2,14)-1,Us=-od-1;function Gs(a){const e=Mt/a.extent,n=a.loadGeometry();for(let h=0;h<n.length;h++){const g=n[h];for(let y=0;y<g.length;y++){const v=g[y],k=Math.round(v.x*e),P=Math.round(v.y*e);v.x=Pt(k,Us,od),v.y=Pt(P,Us,od),(k<v.x||k>v.x+1||P<v.y||P>v.y+1)&&gn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function qs(a,e){return{type:a.type,id:a.id,properties:a.properties,geometry:e?Gs(a):[]}}const ld=-32768;function ud(a,e,n,h,g){a.emplaceBack(ld+8*e+h,ld+8*n+g)}class nh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((n=>n.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new he,this.indexArray=new Oe,this.segments=new rt,this.programConfigurations=new wo(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((n=>n.isStateDependent())).map((n=>n.id))}populate(e,n,h){const g=this.layers[0],y=[];let v=null,k=!1,P=g.type==="heatmap";if(g.type==="circle"){const z=g;v=z.layout.get("circle-sort-key"),k=!v.isConstant(),P=P||z.paint.get("circle-pitch-alignment")==="map"}const A=P?n.subdivisionGranularity.circle:1;for(const{feature:z,id:O,index:$,sourceLayerIndex:N}of e){const Z=this.layers[0]._featureFilter.needGeometry,W=qs(z,Z);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),W,h))continue;const Y=k?v.evaluate(W,{},h):void 0,te={id:O,properties:z.properties,type:z.type,sourceLayerIndex:N,index:$,geometry:Z?W.geometry:Gs(z),patterns:{},sortKey:Y};y.push(te)}k&&y.sort(((z,O)=>z.sortKey-O.sortKey));for(const z of y){const{geometry:O,index:$,sourceLayerIndex:N}=z,Z=e[$].feature;this.addFeature(z,O,$,h,A),n.featureIndex.insert(Z,O,$,N,this.index)}}update(e,n,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,{imagePositions:h})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ke),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,h,g,y=1){let v;switch(y){case 1:v=[0,7];break;case 3:v=[0,2,5,7];break;case 5:v=[0,1,3,4,6,7];break;case 7:v=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${y}; valid values are 1, 3, 5, 7.`)}const k=v.length;for(const P of n)for(const A of P){const z=A.x,O=A.y;if(z<0||z>=Mt||O<0||O>=Mt)continue;const $=this.segments.prepareSegment(k*k,this.layoutVertexArray,this.indexArray,e.sortKey),N=$.vertexLength;for(let Z=0;Z<k;Z++)for(let W=0;W<k;W++)ud(this.layoutVertexArray,z,O,v[W],v[Z]);for(let Z=0;Z<k-1;Z++)for(let W=0;W<k-1;W++){const Y=N+Z*k+W,te=N+(Z+1)*k+W;this.indexArray.emplaceBack(Y,te+1,Y+1),this.indexArray.emplaceBack(Y,te,te+1)}$.vertexLength+=k*k,$.primitiveLength+=(k-1)*(k-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:{},canonical:g})}}function ah(a,e){for(let n=0;n<a.length;n++)if(rh(e,a[n]))return!0;for(let n=0;n<e.length;n++)if(rh(a,e[n]))return!0;return!!rp(a,e)}function Mc(a,e,n){return!!rh(a,e)||!!sp(e,a,n)}function Fg(a,e){if(a.length===1)return jg(e,a[0]);for(let n=0;n<e.length;n++){const h=e[n];for(let g=0;g<h.length;g++)if(rh(a,h[g]))return!0}for(let n=0;n<a.length;n++)if(jg(e,a[n]))return!0;for(let n=0;n<e.length;n++)if(rp(a,e[n]))return!0;return!1}function Zw(a,e,n){if(a.length>1){if(rp(a,e))return!0;for(let h=0;h<e.length;h++)if(sp(e[h],a,n))return!0}for(let h=0;h<a.length;h++)if(sp(a[h],e,n))return!0;return!1}function rp(a,e){if(a.length===0||e.length===0)return!1;for(let n=0;n<a.length-1;n++){const h=a[n],g=a[n+1];for(let y=0;y<e.length-1;y++)if(Ww(h,g,e[y],e[y+1]))return!0}return!1}function Ww(a,e,n,h){return oa(a,n,h)!==oa(e,n,h)&&oa(a,e,n)!==oa(a,e,h)}function sp(a,e,n){const h=n*n;if(e.length===1)return a.distSqr(e[0])<h;for(let g=1;g<e.length;g++)if(Og(a,e[g-1],e[g])<h)return!0;return!1}function Og(a,e,n){const h=e.distSqr(n);if(h===0)return a.distSqr(e);const g=((a.x-e.x)*(n.x-e.x)+(a.y-e.y)*(n.y-e.y))/h;return a.distSqr(g<0?e:g>1?n:n.sub(e)._mult(g)._add(e))}function jg(a,e){let n,h,g,y=!1;for(let v=0;v<a.length;v++){n=a[v];for(let k=0,P=n.length-1;k<n.length;P=k++)h=n[k],g=n[P],h.y>e.y!=g.y>e.y&&e.x<(g.x-h.x)*(e.y-h.y)/(g.y-h.y)+h.x&&(y=!y)}return y}function rh(a,e){let n=!1;for(let h=0,g=a.length-1;h<a.length;g=h++){const y=a[h],v=a[g];y.y>e.y!=v.y>e.y&&e.x<(v.x-y.x)*(e.y-y.y)/(v.y-y.y)+y.x&&(n=!n)}return n}function Hw(a,e,n){const h=n[0],g=n[2];if(a.x<h.x&&e.x<h.x||a.x>g.x&&e.x>g.x||a.y<h.y&&e.y<h.y||a.y>g.y&&e.y>g.y)return!1;const y=oa(a,e,n[0]);return y!==oa(a,e,n[1])||y!==oa(a,e,n[2])||y!==oa(a,e,n[3])}function sh(a,e,n){const h=e.paint.get(a).value;return h.kind==="constant"?h.value:n.programConfigurations.get(e.id).getMaxValue(a)}function Cc(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Lc(a,e,n,h,g){if(!e[0]&&!e[1])return a;const y=S.convert(e)._mult(g);n==="viewport"&&y._rotate(-h);const v=[];for(let k=0;k<a.length;k++)v.push(a[k].sub(y));return v}function Kw(a){const e=[];for(let n=0;n<a.length;n++){const h=a[n],g=e.at(-1);(n===0||g&&!h.equals(g))&&e.push(h)}return e}function Yw({queryGeometry:a,size:e},n){return Mc(a,n,e)}function Xw({queryGeometry:a,size:e,transform:n,unwrappedTileID:h,getElevation:g},y){return Mc(a,y,e*(n.projectTileCoordinates(y.x,y.y,h,g).signedDistanceFromCamera/n.cameraToCenterDistance))}function Jw({queryGeometry:a,size:e,transform:n,unwrappedTileID:h,getElevation:g},y){const v=n.projectTileCoordinates(y.x,y.y,h,g).signedDistanceFromCamera,k=e*(n.cameraToCenterDistance/v);return Mc(a,op(y,n,h,g),k)}function Qw({queryGeometry:a,size:e,transform:n,unwrappedTileID:h,getElevation:g},y){return Mc(a,op(y,n,h,g),e)}function Bg({queryGeometry:a,size:e,transform:n,unwrappedTileID:h,getElevation:g,pitchAlignment:y="map",pitchScale:v="map"},k){const P=y==="map"?v==="map"?Yw:Xw:v==="map"?Jw:Qw,A={queryGeometry:a,size:e,transform:n,unwrappedTileID:h,getElevation:g};for(const z of k)for(const O of z)if(P(A,O))return!0;return!1}function op(a,e,n,h){const g=e.projectTileCoordinates(a.x,a.y,n,h).point;return new S((.5*g.x+.5)*e.width,(.5*-g.y+.5)*e.height)}let $g,Vg;ct("CircleBucket",nh,{omit:["layers"]});var e0={get paint(){return Vg=Vg||new pa({"circle-radius":new kt(De.paint_circle["circle-radius"]),"circle-color":new kt(De.paint_circle["circle-color"]),"circle-blur":new kt(De.paint_circle["circle-blur"]),"circle-opacity":new kt(De.paint_circle["circle-opacity"]),"circle-translate":new _t(De.paint_circle["circle-translate"]),"circle-translate-anchor":new _t(De.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _t(De.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _t(De.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kt(De.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kt(De.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kt(De.paint_circle["circle-stroke-opacity"])})},get layout(){return $g=$g||new pa({"circle-sort-key":new kt(De.layout_circle["circle-sort-key"])})}};class t0 extends Ya{constructor(e,n){super(e,e0,n)}createBucket(e){return new nh(e)}queryRadius(e){const n=e;return sh("circle-radius",this,n)+sh("circle-stroke-width",this,n)+Cc(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:n,featureState:h,geometry:g,transform:y,pixelsToTileUnits:v,unwrappedTileID:k,getElevation:P}){const A=Lc(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-y.bearingInRadians,v),z=this.paint.get("circle-radius").evaluate(n,h)+this.paint.get("circle-stroke-width").evaluate(n,h),O=this.paint.get("circle-pitch-scale"),$=this.paint.get("circle-pitch-alignment");let N,Z;return $==="map"?(N=A,Z=z*v):(N=(function(W,Y,te,ce){return W.map((ne=>op(ne,Y,te,ce)))})(A,y,k,P),Z=z),Bg({queryGeometry:N,size:Z,transform:y,unwrappedTileID:k,getElevation:P,pitchAlignment:$,pitchScale:O},g)}}class Ng extends nh{}let Ug;ct("HeatmapBucket",Ng,{omit:["layers"]});var i0={get paint(){return Ug=Ug||new pa({"heatmap-radius":new kt(De.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kt(De.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _t(De.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Yu(De.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _t(De.paint_heatmap["heatmap-opacity"])})}};function lp(a,{width:e,height:n},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==e*n*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${e*n*h}`)}else g=new Uint8Array(e*n*h);return a.width=e,a.height=n,a.data=g,a}function Gg(a,{width:e,height:n},h){if(e===a.width&&n===a.height)return;const g=lp({},{width:e,height:n},h);up(a,g,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,e),height:Math.min(a.height,n)},h),a.width=e,a.height=n,a.data=g.data}function up(a,e,n,h,g,y){if(g.width===0||g.height===0)return e;if(g.width>a.width||g.height>a.height||n.x>a.width-g.width||n.y>a.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>e.width||g.height>e.height||h.x>e.width-g.width||h.y>e.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const v=a.data,k=e.data;if(v===k)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<g.height;P++){const A=((n.y+P)*a.width+n.x)*y,z=((h.y+P)*e.width+h.x)*y;for(let O=0;O<g.width*y;O++)k[z+O]=v[A+O]}return e}class hd{constructor(e,n){lp(this,e,1,n)}resize(e){Gg(this,e,1)}clone(){return new hd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,h,g,y){up(e,n,h,g,y,1)}}class Ra{constructor(e,n){lp(this,e,4,n)}resize(e){Gg(this,e,4)}replace(e,n){n?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ra({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,h,g,y){up(e,n,h,g,y,4)}setPixel(e,n,h){const g=4*(e*this.width+n);this.data[g+0]=Math.round(255*h.r/h.a),this.data[g+1]=Math.round(255*h.g/h.a),this.data[g+2]=Math.round(255*h.b/h.a),this.data[g+3]=Math.round(255*h.a)}}function qg(a){const e={},n=a.resolution||256,h=a.clips?a.clips.length:1,g=a.image||new Ra({width:n,height:h});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const y=(v,k,P)=>{e[a.evaluationKey]=P;const A=a.expression.evaluate(e);g.setPixel(v/4/n,k/4,A)};if(a.clips)for(let v=0,k=0;v<h;++v,k+=4*n)for(let P=0,A=0;P<n;P++,A+=4){const z=P/(n-1),{start:O,end:$}=a.clips[v];y(k,A,O*(1-z)+$*z)}else for(let v=0,k=0;v<n;v++,k+=4)y(0,k,v/(n-1));return g}ct("AlphaImage",hd),ct("RGBAImage",Ra);const hp="big-fb";class n0 extends Ya{createBucket(e){return new Ng(e)}constructor(e,n){super(e,i0,n),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(hp)&&this.heatmapFbos.delete(hp)}queryRadius(e){return sh("heatmap-radius",this,e)}queryIntersectsFeature({queryGeometry:e,feature:n,featureState:h,geometry:g,transform:y,pixelsToTileUnits:v,unwrappedTileID:k,getElevation:P}){return Bg({queryGeometry:e,size:this.paint.get("heatmap-radius").evaluate(n,h)*v,transform:y,unwrappedTileID:k,getElevation:P},g)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let Zg;var a0={get paint(){return Zg=Zg||new pa({"hillshade-illumination-direction":new _t(De.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new _t(De.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new _t(De.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _t(De.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _t(De.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _t(De.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _t(De.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new _t(De.paint_hillshade["hillshade-method"])})}};class r0 extends Ya{constructor(e,n){super(e,a0,n),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,n=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const y=Math.max(e.length,n.length,h.length,g.length);e=e.concat(Array(y-e.length).fill(e.at(-1))),n=n.concat(Array(y-n.length).fill(n.at(-1))),h=h.concat(Array(y-h.length).fill(h.at(-1))),g=g.concat(Array(y-g.length).fill(g.at(-1)));const v=n.map(ms);return{directionRadians:e.map(ms),altitudeRadians:v,shadowColor:g,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let Wg;var s0={get paint(){return Wg=Wg||new pa({"color-relief-opacity":new _t(De["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Yu(De["paint_color-relief"]["color-relief-color"])})}};class dp{constructor(e,n,h,g){this.context=e,this.format=h,this.texture=e.gl.createTexture(),this.update(n,g)}update(e,n,h){const{width:g,height:y}=e,v=!(this.size&&this.size[0]===g&&this.size[1]===y||h),{context:k}=this,{gl:P}=k;if(this.useMipmap=!!(n&&n.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!n||n.premultiply!==!1)),v)this.size=[g,y],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||Ca(e)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,e):P.texImage2D(P.TEXTURE_2D,0,this.format,g,y,0,this.format,P.UNSIGNED_BYTE,e.data);else{const{x:A,y:z}=h||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||Ca(e)?P.texSubImage2D(P.TEXTURE_2D,0,A,z,P.RGBA,P.UNSIGNED_BYTE,e):P.texSubImage2D(P.TEXTURE_2D,0,A,z,g,y,P.RGBA,P.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D),k.pixelStoreUnpackFlipY.setDefault(),k.pixelStoreUnpack.setDefault(),k.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,n,h){const{context:g}=this,{gl:y}=g;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),e!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,e),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||e),this.filter=e),n!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,n),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,n),this.wrap=n)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Hg{constructor(e,n,h,g=1,y=1,v=1,k=0){if(this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void gn(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=n.height;const P=this.dim=n.height-2;switch(this.data=new Uint32Array(n.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=y,this.blueFactor=v,this.baseShift=k;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<P;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(P,A)]=this.data[this._idx(P-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,P)]=this.data[this._idx(A,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<P;A++)for(let z=0;z<P;z++){const O=this.get(A,z);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(e,n){const h=new Uint8Array(this.data.buffer),g=4*this._idx(e,n);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,n){if(e<-1||e>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${e}, y: ${n}, dim: ${this.dim}`);return(n+1)*this.stride+(e+1)}unpack(e,n,h){return e*this.redFactor+n*this.greenFactor+h*this.blueFactor-this.baseShift}pack(e){return Kg(e,this.getUnpackVector())}getPixels(){return new Ra({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,n,h){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let g=n*this.dim,y=n*this.dim+this.dim,v=h*this.dim,k=h*this.dim+this.dim;switch(n){case-1:g=y-1;break;case 1:y=g+1}switch(h){case-1:v=k-1;break;case 1:k=v+1}const P=-n*this.dim,A=-h*this.dim;for(let z=v;z<k;z++)for(let O=g;O<y;O++)this.data[this._idx(O,z)]=e.data[this._idx(O+P,z+A)]}}function Kg(a,e){const n=e[0],h=e[1],g=e[2],y=e[3],v=Math.min(n,h,g),k=Math.round((a+y)/v);return{r:Math.floor(k*v/n)%256,g:Math.floor(k*v/h)%256,b:Math.floor(k*v/g)%256}}ct("DEMData",Hg);class o0 extends Ya{constructor(e,n){super(e,s0,n)}_createColorRamp(e){const n={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof b&&h._styleExpression.expression instanceof qi){this.colorRampExpression=h;const v=h._styleExpression.expression;n.elevationStops=v.labels,n.colorStops=[];for(const k of n.elevationStops)n.colorStops.push(v.evaluate({globals:{elevation:k}}))}if(n.elevationStops.length<1&&(n.elevationStops=[0],n.colorStops=[Ft.transparent]),n.elevationStops.length<2&&(n.elevationStops.push(n.elevationStops[0]+1),n.colorStops.push(n.colorStops[0])),n.elevationStops.length<=e)return n;const g={elevationStops:[],colorStops:[]},y=(n.elevationStops.length-1)/(e-1);for(let v=0;v<n.elevationStops.length-.5;v+=y)g.elevationStops.push(n.elevationStops[Math.round(v)]),g.colorStops.push(n.colorStops[Math.round(v)]);return gn(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${e}, provided: ${n.elevationStops.length}`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,n,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(n),y=new Ra({width:g.colorStops.length,height:1}),v=new Ra({width:g.colorStops.length,height:1});for(let k=0;k<g.elevationStops.length;k++){const P=Kg(g.elevationStops[k],h);v.setPixel(0,k,new Ft(P.r/255,P.g/255,P.b/255,1)),y.setPixel(0,k,g.colorStops[k])}return this.colorRampTextures={elevationTexture:new dp(e,v,e.gl.RGBA),colorTexture:new dp(e,y,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const l0=sn([{name:"a_pos",components:2,type:"Int16"}],4),{members:u0}=l0;function Ec(a,e,n){const h=n.patternDependencies;let g=!1;for(const y of e){const v=y.paint.get(`${a}-pattern`);v.isConstant()||(g=!0);const k=v.constantOr(null);k&&(g=!0,h[k.to]=!0,h[k.from]=!0)}return g}function cp(a,e,n,h,g){const{zoom:y}=h,v=g.patternDependencies;for(const k of e){const P=k.paint.get(`${a}-pattern`).value;if(P.kind!=="constant"){let A=P.evaluate({zoom:y-1},n,{},g.availableImages),z=P.evaluate({zoom:y},n,{},g.availableImages),O=P.evaluate({zoom:y+1},n,{},g.availableImages);A=A&&A.name?A.name:A,z=z&&z.name?z.name:z,O=O&&O.name?O.name:O,v[A]=!0,v[z]=!0,v[O]=!0,n.patterns[k.id]={min:A,mid:z,max:O}}}return n}function Yg(a,e,n,h,g){let y;if(g===(function(v,k,P,A){let z=0;for(let O=k,$=P-A;O<P;O+=A)z+=(v[$]-v[O])*(v[O+1]+v[$+1]),$=O;return z})(a,e,n,h)>0)for(let v=e;v<n;v+=h)y=e_(v/h|0,a[v],a[v+1],y);else for(let v=n-h;v>=e;v-=h)y=e_(v/h|0,a[v],a[v+1],y);return y&&oh(y,y.next)&&(pd(y),y=y.next),y}function Kl(a,e){if(!a)return a;e||(e=a);let n,h=a;do if(n=!1,h.steiner||!oh(h,h.next)&&pn(h.prev,h,h.next)!==0)h=h.next;else{if(pd(h),h=e=h.prev,h===h.next)break;n=!0}while(n||h!==e);return e}function dd(a,e,n,h,g,y,v){if(!a)return;!v&&y&&(function(P,A,z,O){let $=P;do $.z===0&&($.z=fp($.x,$.y,A,z,O)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==P);$.prevZ.nextZ=null,$.prevZ=null,(function(N){let Z,W=1;do{let Y,te=N;N=null;let ce=null;for(Z=0;te;){Z++;let ne=te,oe=0;for(let _e=0;_e<W&&(oe++,ne=ne.nextZ,ne);_e++);let pe=W;for(;oe>0||pe>0&&ne;)oe!==0&&(pe===0||!ne||te.z<=ne.z)?(Y=te,te=te.nextZ,oe--):(Y=ne,ne=ne.nextZ,pe--),ce?ce.nextZ=Y:N=Y,Y.prevZ=ce,ce=Y;te=ne}ce.nextZ=null,W*=2}while(Z>1)})($)})(a,h,g,y);let k=a;for(;a.prev!==a.next;){const P=a.prev,A=a.next;if(y?d0(a,h,g,y):h0(a))e.push(P.i,a.i,A.i),pd(a),a=A.next,k=A.next;else if((a=A)===k){v?v===1?dd(a=c0(Kl(a),e),e,n,h,g,y,2):v===2&&f0(a,e,n,h,g,y):dd(Kl(a),e,n,h,g,y,1);break}}}function h0(a){const e=a.prev,n=a,h=a.next;if(pn(e,n,h)>=0)return!1;const g=e.x,y=n.x,v=h.x,k=e.y,P=n.y,A=h.y,z=Math.min(g,y,v),O=Math.min(k,P,A),$=Math.max(g,y,v),N=Math.max(k,P,A);let Z=h.next;for(;Z!==e;){if(Z.x>=z&&Z.x<=$&&Z.y>=O&&Z.y<=N&&cd(g,k,y,P,v,A,Z.x,Z.y)&&pn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function d0(a,e,n,h){const g=a.prev,y=a,v=a.next;if(pn(g,y,v)>=0)return!1;const k=g.x,P=y.x,A=v.x,z=g.y,O=y.y,$=v.y,N=Math.min(k,P,A),Z=Math.min(z,O,$),W=Math.max(k,P,A),Y=Math.max(z,O,$),te=fp(N,Z,e,n,h),ce=fp(W,Y,e,n,h);let ne=a.prevZ,oe=a.nextZ;for(;ne&&ne.z>=te&&oe&&oe.z<=ce;){if(ne.x>=N&&ne.x<=W&&ne.y>=Z&&ne.y<=Y&&ne!==g&&ne!==v&&cd(k,z,P,O,A,$,ne.x,ne.y)&&pn(ne.prev,ne,ne.next)>=0||(ne=ne.prevZ,oe.x>=N&&oe.x<=W&&oe.y>=Z&&oe.y<=Y&&oe!==g&&oe!==v&&cd(k,z,P,O,A,$,oe.x,oe.y)&&pn(oe.prev,oe,oe.next)>=0))return!1;oe=oe.nextZ}for(;ne&&ne.z>=te;){if(ne.x>=N&&ne.x<=W&&ne.y>=Z&&ne.y<=Y&&ne!==g&&ne!==v&&cd(k,z,P,O,A,$,ne.x,ne.y)&&pn(ne.prev,ne,ne.next)>=0)return!1;ne=ne.prevZ}for(;oe&&oe.z<=ce;){if(oe.x>=N&&oe.x<=W&&oe.y>=Z&&oe.y<=Y&&oe!==g&&oe!==v&&cd(k,z,P,O,A,$,oe.x,oe.y)&&pn(oe.prev,oe,oe.next)>=0)return!1;oe=oe.nextZ}return!0}function c0(a,e){let n=a;do{const h=n.prev,g=n.next.next;!oh(h,g)&&Jg(h,n,n.next,g)&&fd(h,g)&&fd(g,h)&&(e.push(h.i,n.i,g.i),pd(n),pd(n.next),n=a=g),n=n.next}while(n!==a);return Kl(n)}function f0(a,e,n,h,g,y){let v=a;do{let k=v.next.next;for(;k!==v.prev;){if(v.i!==k.i&&y0(v,k)){let P=Qg(v,k);return v=Kl(v,v.next),P=Kl(P,P.next),dd(v,e,n,h,g,y,0),void dd(P,e,n,h,g,y,0)}k=k.next}v=v.next}while(v!==a)}function p0(a,e){let n=a.x-e.x;return n===0&&(n=a.y-e.y,n===0)&&(n=(a.next.y-a.y)/(a.next.x-a.x)-(e.next.y-e.y)/(e.next.x-e.x)),n}function m0(a,e){const n=(function(g,y){let v=y;const k=g.x,P=g.y;let A,z=-1/0;if(oh(g,v))return v;do{if(oh(g,v.next))return v.next;if(P<=v.y&&P>=v.next.y&&v.next.y!==v.y){const W=v.x+(P-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(W<=k&&W>z&&(z=W,A=v.x<v.next.x?v:v.next,W===k))return A}v=v.next}while(v!==y);if(!A)return null;const O=A,$=A.x,N=A.y;let Z=1/0;v=A;do{if(k>=v.x&&v.x>=$&&k!==v.x&&Xg(P<N?k:z,P,$,N,P<N?z:k,P,v.x,v.y)){const W=Math.abs(P-v.y)/(k-v.x);fd(v,g)&&(W<Z||W===Z&&(v.x>A.x||v.x===A.x&&g0(A,v)))&&(A=v,Z=W)}v=v.next}while(v!==O);return A})(a,e);if(!n)return e;const h=Qg(n,a);return Kl(h,h.next),Kl(n,n.next)}function g0(a,e){return pn(a.prev,a,e.prev)<0&&pn(e.next,a,a.next)<0}function fp(a,e,n,h,g){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-n)*g|0)|a<<8))|a<<4))|a<<2))|a<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-h)*g|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function _0(a){let e=a,n=a;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==a);return n}function Xg(a,e,n,h,g,y,v,k){return(g-v)*(e-k)>=(a-v)*(y-k)&&(a-v)*(h-k)>=(n-v)*(e-k)&&(n-v)*(y-k)>=(g-v)*(h-k)}function cd(a,e,n,h,g,y,v,k){return!(a===v&&e===k)&&Xg(a,e,n,h,g,y,v,k)}function y0(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!(function(n,h){let g=n;do{if(g.i!==n.i&&g.next.i!==n.i&&g.i!==h.i&&g.next.i!==h.i&&Jg(g,g.next,n,h))return!0;g=g.next}while(g!==n);return!1})(a,e)&&(fd(a,e)&&fd(e,a)&&(function(n,h){let g=n,y=!1;const v=(n.x+h.x)/2,k=(n.y+h.y)/2;do g.y>k!=g.next.y>k&&g.next.y!==g.y&&v<(g.next.x-g.x)*(k-g.y)/(g.next.y-g.y)+g.x&&(y=!y),g=g.next;while(g!==n);return y})(a,e)&&(pn(a.prev,a,e.prev)||pn(a,e.prev,e))||oh(a,e)&&pn(a.prev,a,a.next)>0&&pn(e.prev,e,e.next)>0)}function pn(a,e,n){return(e.y-a.y)*(n.x-e.x)-(e.x-a.x)*(n.y-e.y)}function oh(a,e){return a.x===e.x&&a.y===e.y}function Jg(a,e,n,h){const g=Ic(pn(a,e,n)),y=Ic(pn(a,e,h)),v=Ic(pn(n,h,a)),k=Ic(pn(n,h,e));return g!==y&&v!==k||!(g!==0||!Ac(a,n,e))||!(y!==0||!Ac(a,h,e))||!(v!==0||!Ac(n,a,h))||!(k!==0||!Ac(n,e,h))}function Ac(a,e,n){return e.x<=Math.max(a.x,n.x)&&e.x>=Math.min(a.x,n.x)&&e.y<=Math.max(a.y,n.y)&&e.y>=Math.min(a.y,n.y)}function Ic(a){return a>0?1:a<0?-1:0}function fd(a,e){return pn(a.prev,a,a.next)<0?pn(a,e,a.next)>=0&&pn(a,a.prev,e)>=0:pn(a,e,a.prev)<0||pn(a,a.next,e)<0}function Qg(a,e){const n=pp(a.i,a.x,a.y),h=pp(e.i,e.x,e.y),g=a.next,y=e.prev;return a.next=e,e.prev=a,n.next=g,g.prev=n,h.next=n,n.prev=h,y.next=h,h.prev=y,h}function e_(a,e,n,h){const g=pp(a,e,n);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function pd(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function pp(a,e,n){return{i:a,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class lh{constructor(e,n){if(n>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=n}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class Dc{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}Dc.noSubdivision=new Dc({fill:new lh(0,0),line:new lh(0,0),tile:new lh(0,0),stencil:new lh(0,0),circle:1}),ct("SubdivisionGranularityExpression",lh),ct("SubdivisionGranularitySetting",Dc);const uh=-32768,md=32767;class v0{constructor(e,n){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=Mt/e,this._canonical=n}_getKey(e,n){return(e+=32768)<<16|n+32768}_vertexToIndex(e,n){if(e<-32768||n<-32768||e>32767||n>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(e),g=0|Math.round(n),y=this._getKey(h,g);if(this._vertexDictionary.has(y))return this._vertexDictionary.get(y);const v=this._vertexBuffer.length/2;return this._vertexDictionary.set(y,v),this._vertexBuffer.push(h,g),v}_subdivideTrianglesScanline(e){if(this._granularity<2)return(function(g,y){const v=[];for(let k=0;k<y.length;k+=3){const P=y[k],A=y[k+1],z=y[k+2],O=g[2*P],$=g[2*P+1];(g[2*A]-O)*(g[2*z+1]-$)-(g[2*A+1]-$)*(g[2*z]-O)>0?(v.push(P),v.push(z),v.push(A)):(v.push(P),v.push(A),v.push(z))}return v})(this._vertexBuffer,e);const n=[],h=e.length;for(let g=0;g<h;g+=3){const y=[e[g+0],e[g+1],e[g+2]],v=[this._vertexBuffer[2*e[g+0]+0],this._vertexBuffer[2*e[g+0]+1],this._vertexBuffer[2*e[g+1]+0],this._vertexBuffer[2*e[g+1]+1],this._vertexBuffer[2*e[g+2]+0],this._vertexBuffer[2*e[g+2]+1]];let k=1/0,P=1/0,A=-1/0,z=-1/0;for(let W=0;W<3;W++){const Y=v[2*W],te=v[2*W+1];k=Math.min(k,Y),A=Math.max(A,Y),P=Math.min(P,te),z=Math.max(z,te)}if(k===A||P===z)continue;const O=Math.floor(k/this._granularityCellSize),$=Math.ceil(A/this._granularityCellSize),N=Math.floor(P/this._granularityCellSize),Z=Math.ceil(z/this._granularityCellSize);if(O!==$||N!==Z)for(let W=N;W<Z;W++){const Y=this._scanlineGenerateVertexRingForCellRow(W,v,y);x0(this._vertexBuffer,Y,n)}else n.push(...y)}return n}_scanlineGenerateVertexRingForCellRow(e,n,h){const g=e*this._granularityCellSize,y=g+this._granularityCellSize,v=[];for(let k=0;k<3;k++){const P=n[2*k],A=n[2*k+1],z=n[2*(k+1)%6],O=n[(2*(k+1)+1)%6],$=n[2*(k+2)%6],N=n[(2*(k+2)+1)%6],Z=z-P,W=O-A,Y=Z===0,te=W===0,ce=(g-A)/W,ne=(y-A)/W,oe=Math.min(ce,ne),pe=Math.max(ce,ne);if(!te&&(oe>=1||pe<=0)||te&&(A<g||A>y)){O>=g&&O<=y&&v.push(h[(k+1)%3]);continue}!te&&oe>0&&v.push(this._vertexToIndex(P+Z*oe,A+W*oe));const _e=P+Z*Math.max(oe,0),Ee=P+Z*Math.min(pe,1);Y||this._generateIntraEdgeVertices(v,P,A,z,O,_e,Ee),!te&&pe<1&&v.push(this._vertexToIndex(P+Z*pe,A+W*pe)),(te||O>=g&&O<=y)&&v.push(h[(k+1)%3]),!te&&(O<=g||O>=y)&&this._generateInterEdgeVertices(v,P,A,z,O,$,N,Ee,g,y)}return v}_generateIntraEdgeVertices(e,n,h,g,y,v,k){const P=g-n,A=y-h,z=A===0,O=z?Math.min(n,g):Math.min(v,k),$=z?Math.max(n,g):Math.max(v,k),N=Math.floor(O/this._granularityCellSize)+1,Z=Math.ceil($/this._granularityCellSize)-1;if(z?n<g:v<k)for(let W=N;W<=Z;W++){const Y=W*this._granularityCellSize;e.push(this._vertexToIndex(Y,h+A*(Y-n)/P))}else for(let W=Z;W>=N;W--){const Y=W*this._granularityCellSize;e.push(this._vertexToIndex(Y,h+A*(Y-n)/P))}}_generateInterEdgeVertices(e,n,h,g,y,v,k,P,A,z){const O=y-h,$=v-g,N=k-y,Z=(A-y)/N,W=(z-y)/N,Y=Math.min(Z,W),te=Math.max(Z,W),ce=g+$*Y;let ne=Math.floor(Math.min(ce,P)/this._granularityCellSize)+1,oe=Math.ceil(Math.max(ce,P)/this._granularityCellSize)-1,pe=P<ce;const _e=N===0;if(_e&&(k===A||k===z))return;if(_e||Y>=1||te<=0){const We=h-k,Ge=v+(n-v)*Math.min((A-k)/We,(z-k)/We);ne=Math.floor(Math.min(Ge,P)/this._granularityCellSize)+1,oe=Math.ceil(Math.max(Ge,P)/this._granularityCellSize)-1,pe=P<Ge}const Ee=O>0?z:A;if(pe)for(let We=ne;We<=oe;We++)e.push(this._vertexToIndex(We*this._granularityCellSize,Ee));else for(let We=oe;We>=ne;We--)e.push(this._vertexToIndex(We*this._granularityCellSize,Ee))}_generateOutline(e){const n=[];for(const h of e){const g=Yl(h,this._granularity,!0),y=this._pointArrayToIndices(g),v=[];for(let k=1;k<y.length;k++)v.push(y[k-1]),v.push(y[k]);n.push(v)}return n}_handlePoles(e){let n=!1,h=!1;this._canonical&&(this._canonical.y===0&&(n=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(n||h)&&this._fillPoles(e,n,h)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let n=0;n<e.length;n+=2){const h=e[n+1];h===uh&&(e[n+1]=-32767),h===md&&(e[n+1]=32766)}}_generatePoleQuad(e,n,h,g,y,v){g>y!=(v===uh)?(e.push(n),e.push(h),e.push(this._vertexToIndex(g,v)),e.push(h),e.push(this._vertexToIndex(y,v)),e.push(this._vertexToIndex(g,v))):(e.push(h),e.push(n),e.push(this._vertexToIndex(g,v)),e.push(this._vertexToIndex(y,v)),e.push(h),e.push(this._vertexToIndex(g,v)))}_fillPoles(e,n,h){const g=this._vertexBuffer,y=Mt,v=e.length;for(let k=2;k<v;k+=3){const P=e[k-2],A=e[k-1],z=e[k],O=g[2*P],$=g[2*P+1],N=g[2*A],Z=g[2*A+1],W=g[2*z],Y=g[2*z+1];n&&($===0&&Z===0&&this._generatePoleQuad(e,P,A,O,N,uh),Z===0&&Y===0&&this._generatePoleQuad(e,A,z,N,W,uh),Y===0&&$===0&&this._generatePoleQuad(e,z,P,W,O,uh)),h&&($===y&&Z===y&&this._generatePoleQuad(e,P,A,O,N,md),Z===y&&Y===y&&this._generatePoleQuad(e,A,z,N,W,md),Y===y&&$===y&&this._generatePoleQuad(e,z,P,W,O,md))}}_initializeVertices(e){for(let n=0;n<e.length;n+=2)this._vertexToIndex(e[n],e[n+1])}subdividePolygonInternal(e,n){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:g}=(function(k){const P=[],A=[];for(const z of k)if(z.length!==0){z!==k[0]&&P.push(A.length/2);for(let O=0;O<z.length;O++)A.push(z[O].x),A.push(z[O].y)}return{flattened:A,holeIndices:P}})(e);let y;this._initializeVertices(h);try{const k=(function(A,z,O=2){const $=z&&z.length,N=$?z[0]*O:A.length;let Z=Yg(A,0,N,O,!0);const W=[];if(!Z||Z.next===Z.prev)return W;let Y,te,ce;if($&&(Z=(function(ne,oe,pe,_e){const Ee=[];for(let We=0,Ge=oe.length;We<Ge;We++){const He=Yg(ne,oe[We]*_e,We<Ge-1?oe[We+1]*_e:ne.length,_e,!1);He===He.next&&(He.steiner=!0),Ee.push(_0(He))}Ee.sort(p0);for(let We=0;We<Ee.length;We++)pe=m0(Ee[We],pe);return pe})(A,z,Z,O)),A.length>80*O){Y=A[0],te=A[1];let ne=Y,oe=te;for(let pe=O;pe<N;pe+=O){const _e=A[pe],Ee=A[pe+1];_e<Y&&(Y=_e),Ee<te&&(te=Ee),_e>ne&&(ne=_e),Ee>oe&&(oe=Ee)}ce=Math.max(ne-Y,oe-te),ce=ce!==0?32767/ce:0}return dd(Z,W,O,Y,te,ce,0),W})(h,g),P=this._convertIndices(h,k);y=this._subdivideTrianglesScanline(P)}catch(k){console.error(k)}let v=[];return n&&(v=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(y),{verticesFlattened:this._vertexBuffer,indicesTriangles:y,indicesLineList:v}}_convertIndices(e,n){const h=[];for(let g=0;g<n.length;g++)h.push(this._vertexToIndex(e[2*n[g]],e[2*n[g]+1]));return h}_pointArrayToIndices(e){const n=[];for(let h=0;h<e.length;h++){const g=e[h];n.push(this._vertexToIndex(g.x,g.y))}return n}}function t_(a,e,n,h=!0){return new v0(n,e).subdividePolygonInternal(a,h)}function Yl(a,e,n=!1){if(!a||a.length<1)return[];if(a.length<2)return[];const h=a[0],g=a[a.length-1],y=n&&(h.x!==g.x||h.y!==g.y);if(e<2)return y?[...a,a[0]]:[...a];const v=Math.floor(Mt/e),k=[];k.push(new S(a[0].x,a[0].y));const P=a.length,A=y?P:P-1;for(let z=0;z<A;z++){const O=a[z],$=z<P-1?a[z+1]:a[0],N=O.x,Z=O.y,W=$.x,Y=$.y,te=N!==W,ce=Z!==Y;if(!te&&!ce)continue;const ne=W-N,oe=Y-Z,pe=Math.abs(ne),_e=Math.abs(oe);let Ee=N,We=Z;for(;;){const He=ne>0?(Math.floor(Ee/v)+1)*v:(Math.ceil(Ee/v)-1)*v,at=oe>0?(Math.floor(We/v)+1)*v:(Math.ceil(We/v)-1)*v,Xe=Math.abs(Ee-He),qe=Math.abs(We-at),Be=Math.abs(Ee-W),ht=Math.abs(We-Y),lt=te?Xe/pe:Number.POSITIVE_INFINITY,ft=ce?qe/_e:Number.POSITIVE_INFINITY;if((Be<=Xe||!te)&&(ht<=qe||!ce))break;if(lt<ft&&te||!ce){Ee=He,We+=oe*lt;const ot=new S(Ee,Math.round(We));k[k.length-1].x===ot.x&&k[k.length-1].y===ot.y||k.push(ot)}else{Ee+=ne*ft,We=at;const ot=new S(Math.round(Ee),We);k[k.length-1].x===ot.x&&k[k.length-1].y===ot.y||k.push(ot)}}const Ge=new S(W,Y);k[k.length-1].x===Ge.x&&k[k.length-1].y===Ge.y||k.push(Ge)}return k}function x0(a,e,n){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,g=a[2*e[0]];for(let P=1;P<e.length;P++){const A=a[2*e[P]];A<g&&(g=A,h=P)}const y=e.length;let v=h,k=(v+1)%y;for(;;){const P=v-1>=0?v-1:y-1,A=(k+1)%y,z=a[2*e[P]],O=a[2*e[A]],$=a[2*e[v]],N=a[2*e[v]+1],Z=a[2*e[k]+1];let W=!1;if(z<O)W=!0;else if(z>O)W=!1;else{const Y=Z-N,te=-(a[2*e[k]]-$),ce=N<Z?1:-1;((z-$)*Y+(a[2*e[P]+1]-N)*te)*ce>((O-$)*Y+(a[2*e[A]+1]-N)*te)*ce&&(W=!0)}if(W){const Y=e[P],te=e[v],ce=e[k];Y!==te&&Y!==ce&&te!==ce&&n.push(ce,te,Y),v--,v<0&&(v=y-1)}else{const Y=e[A],te=e[v],ce=e[k];Y!==te&&Y!==ce&&te!==ce&&n.push(ce,te,Y),k++,k>=y&&(k=0)}if(P===A)break}}function i_(a,e,n,h,g,y,v,k,P){const A=g.length/2,z=v&&k&&P;if(A<rt.MAX_VERTEX_ARRAY_LENGTH){const O=e.prepareSegment(A,n,h),$=O.vertexLength;for(let W=0;W<y.length;W+=3)h.emplaceBack($+y[W],$+y[W+1],$+y[W+2]);let N,Z;O.vertexLength+=A,O.primitiveLength+=y.length/3,z&&(Z=v.prepareSegment(A,n,k),N=Z.vertexLength,Z.vertexLength+=A);for(let W=0;W<g.length;W+=2)a(g[W],g[W+1]);if(z)for(let W=0;W<P.length;W++){const Y=P[W];for(let te=1;te<Y.length;te+=2)k.emplaceBack(N+Y[te-1],N+Y[te]);Z.primitiveLength+=Y.length/2}}else(function(O,$,N,Z,W,Y){const te=[];for(let _e=0;_e<Z.length/2;_e++)te.push(-1);const ce={count:0};let ne=0,oe=O.getOrCreateLatestSegment($,N),pe=oe.vertexLength;for(let _e=2;_e<W.length;_e+=3){const Ee=W[_e-2],We=W[_e-1],Ge=W[_e];let He=te[Ee]<ne,at=te[We]<ne,Xe=te[Ge]<ne;oe.vertexLength+((He?1:0)+(at?1:0)+(Xe?1:0))>rt.MAX_VERTEX_ARRAY_LENGTH&&(oe=O.createNewSegment($,N),ne=ce.count,He=!0,at=!0,Xe=!0,pe=0);const qe=gd(te,Z,Y,ce,Ee,He,oe),Be=gd(te,Z,Y,ce,We,at,oe),ht=gd(te,Z,Y,ce,Ge,Xe,oe);N.emplaceBack(pe+qe-ne,pe+Be-ne,pe+ht-ne),oe.primitiveLength++}})(e,n,h,g,y,a),z&&(function(O,$,N,Z,W,Y){const te=[];for(let _e=0;_e<Z.length/2;_e++)te.push(-1);const ce={count:0};let ne=0,oe=O.getOrCreateLatestSegment($,N),pe=oe.vertexLength;for(let _e=0;_e<W.length;_e++){const Ee=W[_e];for(let We=1;We<W[_e].length;We+=2){const Ge=Ee[We-1],He=Ee[We];let at=te[Ge]<ne,Xe=te[He]<ne;oe.vertexLength+((at?1:0)+(Xe?1:0))>rt.MAX_VERTEX_ARRAY_LENGTH&&(oe=O.createNewSegment($,N),ne=ce.count,at=!0,Xe=!0,pe=0);const qe=gd(te,Z,Y,ce,Ge,at,oe),Be=gd(te,Z,Y,ce,He,Xe,oe);N.emplaceBack(pe+qe-ne,pe+Be-ne),oe.primitiveLength++}}})(v,n,k,g,P,a),e.forceNewSegmentOnNextPrepare(),v?.forceNewSegmentOnNextPrepare()}function gd(a,e,n,h,g,y,v){if(y){const k=h.count;return n(e[2*g],e[2*g+1]),a[g]=h.count,h.count++,v.vertexLength++,k}return a[g]}class mp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((n=>n.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ue,this.indexArray=new Oe,this.indexArray2=new tt,this.programConfigurations=new wo(e.layers,e.zoom),this.segments=new rt,this.segments2=new rt,this.stateDependentLayerIds=this.layers.filter((n=>n.isStateDependent())).map((n=>n.id))}populate(e,n,h){this.hasDependencies=Ec("fill",this.layers,n);const g=this.layers[0].layout.get("fill-sort-key"),y=!g.isConstant(),v=[];for(const{feature:k,id:P,index:A,sourceLayerIndex:z}of e){const O=this.layers[0]._featureFilter.needGeometry,$=qs(k,O);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),$,h))continue;const N=y?g.evaluate($,{},h,n.availableImages):void 0,Z={id:P,properties:k.properties,type:k.type,sourceLayerIndex:z,index:A,geometry:O?$.geometry:Gs(k),patterns:{},sortKey:N};v.push(Z)}y&&v.sort(((k,P)=>k.sortKey-P.sortKey));for(const k of v){const{geometry:P,index:A,sourceLayerIndex:z}=k;if(this.hasDependencies){const O=cp("fill",this.layers,k,{zoom:this.zoom},n);this.patternFeatures.push(O)}else this.addFeature(k,P,A,h,{},n.subdivisionGranularity);n.featureIndex.insert(e[A].feature,P,A,z,this.index)}}update(e,n,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,{imagePositions:h})}addFeatures(e,n,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,n,h,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,u0),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,n,h,g,y,v){for(const k of Cs(n,500)){const P=t_(k,g,v.fill.getGranularityForZoomLevel(g.z)),A=this.layoutVertexArray;i_(((z,O)=>{A.emplaceBack(z,O)}),this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles,this.segments2,this.indexArray2,P.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:y,canonical:g})}}let n_,a_;ct("FillBucket",mp,{omit:["layers","patternFeatures"]});var b0={get paint(){return a_=a_||new pa({"fill-antialias":new _t(De.paint_fill["fill-antialias"]),"fill-opacity":new kt(De.paint_fill["fill-opacity"]),"fill-color":new kt(De.paint_fill["fill-color"]),"fill-outline-color":new kt(De.paint_fill["fill-outline-color"]),"fill-translate":new _t(De.paint_fill["fill-translate"]),"fill-translate-anchor":new _t(De.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vl(De.paint_fill["fill-pattern"])})},get layout(){return n_=n_||new pa({"fill-sort-key":new kt(De.layout_fill["fill-sort-key"])})}};class w0 extends Ya{constructor(e,n){super(e,b0,n)}recalculate(e,n){super.recalculate(e,n);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new mp(e)}queryRadius(){return Cc(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:n,transform:h,pixelsToTileUnits:g}){return Fg(Lc(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,g),n)}isTileClipped(){return!0}}const k0=sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),S0=sn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:T0}=k0;class _d{constructor(e,n,h,g,y){this.properties={},this.extent=h,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=g,this._values=y,e.readFields(P0,this,n)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos,h=[];let g,y=1,v=0,k=0,P=0;for(;e.pos<n;){if(v<=0){const A=e.readVarint();y=7&A,v=A>>3}if(v--,y===1||y===2)k+=e.readSVarint(),P+=e.readSVarint(),y===1&&(g&&h.push(g),g=[]),g&&g.push(new S(k,P));else{if(y!==7)throw new Error(`unknown command ${y}`);g&&g.push(g[0].clone())}}return g&&h.push(g),h}bbox(){const e=this._pbf;e.pos=this._geometry;const n=e.readVarint()+e.pos;let h=1,g=0,y=0,v=0,k=1/0,P=-1/0,A=1/0,z=-1/0;for(;e.pos<n;){if(g<=0){const O=e.readVarint();h=7&O,g=O>>3}if(g--,h===1||h===2)y+=e.readSVarint(),v+=e.readSVarint(),y<k&&(k=y),y>P&&(P=y),v<A&&(A=v),v>z&&(z=v);else if(h!==7)throw new Error(`unknown command ${h}`)}return[k,A,P,z]}toGeoJSON(e,n,h){const g=this.extent*Math.pow(2,h),y=this.extent*e,v=this.extent*n,k=this.loadGeometry();function P($){return[360*($.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*($.y+v)/g)*Math.PI))-90]}function A($){return $.map(P)}let z;if(this.type===1){const $=[];for(const Z of k)$.push(Z[0]);const N=A($);z=$.length===1?{type:"Point",coordinates:N[0]}:{type:"MultiPoint",coordinates:N}}else if(this.type===2){const $=k.map(A);z=$.length===1?{type:"LineString",coordinates:$[0]}:{type:"MultiLineString",coordinates:$}}else{if(this.type!==3)throw new Error("unknown feature type");{const $=r_(k),N=[];for(const Z of $)N.push(Z.map(A));z=N.length===1?{type:"Polygon",coordinates:N[0]}:{type:"MultiPolygon",coordinates:N}}}const O={type:"Feature",geometry:z,properties:this.properties};return this.id!=null&&(O.id=this.id),O}}function P0(a,e,n){a===1?e.id=n.readVarint():a===2?(function(h,g){const y=h.readVarint()+h.pos;for(;h.pos<y;){const v=g._keys[h.readVarint()],k=g._values[h.readVarint()];g.properties[v]=k}})(n,e):a===3?e.type=n.readVarint():a===4&&(e._geometry=n.pos)}function r_(a){const e=a.length;if(e<=1)return[a];const n=[];let h,g;for(let y=0;y<e;y++){const v=M0(a[y]);v!==0&&(g===void 0&&(g=v<0),g===v<0?(h&&n.push(h),h=[a[y]]):h&&h.push(a[y]))}return h&&n.push(h),n}function M0(a){let e=0;for(let n,h,g=0,y=a.length,v=y-1;g<y;v=g++)n=a[g],h=a[v],e+=(h.x-n.x)*(n.y+h.y);return e}_d.types=["Unknown","Point","LineString","Polygon"];class C0{constructor(e,n){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(L0,this,n),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const n=this._pbf.readVarint()+this._pbf.pos;return new _d(this._pbf,n,this.extent,this._keys,this._values)}}function L0(a,e,n){a===15?e.version=n.readVarint():a===1?e.name=n.readString():a===5?e.extent=n.readVarint():a===2?e._features.push(n.pos):a===3?e._keys.push(n.readString()):a===4&&e._values.push((function(h){let g=null;const y=h.readVarint()+h.pos;for(;h.pos<y;){const v=h.readVarint()>>3;g=v===1?h.readString():v===2?h.readFloat():v===3?h.readDouble():v===4?h.readVarint64():v===5?h.readVarint():v===6?h.readSVarint():v===7?h.readBoolean():null}if(g==null)throw new Error("unknown feature value");return g})(n))}class s_{constructor(e,n){this.layers=e.readFields(E0,{},n)}}function E0(a,e,n){if(a===3){const h=new C0(n,n.readVarint()+n.pos);h.length&&(e[h.name]=h)}}const gp=Math.pow(2,13);function yd(a,e,n,h,g,y,v,k){a.emplaceBack(e,n,2*Math.floor(h*gp)+v,g*gp*2,y*gp*2,Math.round(k))}class _p{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((n=>n.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new fe,this.centroidVertexArray=new le,this.indexArray=new Oe,this.programConfigurations=new wo(e.layers,e.zoom),this.segments=new rt,this.stateDependentLayerIds=this.layers.filter((n=>n.isStateDependent())).map((n=>n.id))}populate(e,n,h){this.features=[],this.hasDependencies=Ec("fill-extrusion",this.layers,n);for(const{feature:g,id:y,index:v,sourceLayerIndex:k}of e){const P=this.layers[0]._featureFilter.needGeometry,A=qs(g,P);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),A,h))continue;const z={id:y,sourceLayerIndex:k,index:v,geometry:P?A.geometry:Gs(g),properties:g.properties,type:g.type,patterns:{}};this.hasDependencies?this.features.push(cp("fill-extrusion",this.layers,z,{zoom:this.zoom},n)):this.addFeature(z,z.geometry,v,h,{},n.subdivisionGranularity),n.featureIndex.insert(g,z.geometry,v,k,this.index,!0)}}addFeatures(e,n,h){for(const g of this.features){const{geometry:y}=g;this.addFeature(g,y,g.index,n,h,e.subdivisionGranularity)}}update(e,n,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,{imagePositions:h})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,T0),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,S0.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,n,h,g,y,v){for(const k of Cs(n,500)){const P={x:0,y:0,sampleCount:0},A=this.layoutVertexArray.length;this.processPolygon(P,g,e,k,v);const z=this.layoutVertexArray.length-A,O=Math.floor(P.x/P.sampleCount),$=Math.floor(P.y/P.sampleCount);for(let N=0;N<z;N++)this.centroidVertexArray.emplaceBack(O,$)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:y,canonical:g})}processPolygon(e,n,h,g,y){if(g.length<1||o_(g[0]))return;for(const O of g)O.length!==0&&A0(e,O);const v={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},k=y.fill.getGranularityForZoomLevel(n.z),P=_d.types[h.type]==="Polygon";for(const O of g){if(O.length===0||o_(O))continue;const $=Yl(O,k,P);this._generateSideFaces($,v)}if(!P)return;const A=t_(g,n,k,!1),z=this.layoutVertexArray;i_(((O,$)=>{yd(z,O,$,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,A.verticesFlattened,A.indicesTriangles)}_generateSideFaces(e,n){let h=0;for(let g=1;g<e.length;g++){const y=e[g],v=e[g-1];if(I0(y,v))continue;n.segment.vertexLength+4>rt.MAX_VERTEX_ARRAY_LENGTH&&(n.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const k=y.sub(v)._perp()._unit(),P=v.dist(y);h+P>32768&&(h=0),yd(this.layoutVertexArray,y.x,y.y,k.x,k.y,0,0,h),yd(this.layoutVertexArray,y.x,y.y,k.x,k.y,0,1,h),h+=P,yd(this.layoutVertexArray,v.x,v.y,k.x,k.y,0,0,h),yd(this.layoutVertexArray,v.x,v.y,k.x,k.y,0,1,h);const A=n.segment.vertexLength;this.indexArray.emplaceBack(A,A+2,A+1),this.indexArray.emplaceBack(A+1,A+2,A+3),n.segment.vertexLength+=4,n.segment.primitiveLength+=2}}}function A0(a,e){for(let n=0;n<e.length;n++){const h=e[n];n===e.length-1&&e[0].x===h.x&&e[0].y===h.y||(a.x+=h.x,a.y+=h.y,a.sampleCount++)}}function I0(a,e){return a.x===e.x&&(a.x<0||a.x>Mt)||a.y===e.y&&(a.y<0||a.y>Mt)}function o_(a){return a.every((e=>e.x<0))||a.every((e=>e.x>Mt))||a.every((e=>e.y<0))||a.every((e=>e.y>Mt))}let l_;ct("FillExtrusionBucket",_p,{omit:["layers","features"]});var D0={get paint(){return l_=l_||new pa({"fill-extrusion-opacity":new _t(De["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kt(De["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _t(De["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _t(De["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vl(De["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kt(De["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kt(De["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _t(De["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class z0 extends Ya{constructor(e,n){super(e,D0,n)}createBucket(e){return new _p(e)}queryRadius(){return Cc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:n,featureState:h,geometry:g,transform:y,pixelsToTileUnits:v,pixelPosMatrix:k}){const P=Lc(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-y.bearingInRadians,v),A=this.paint.get("fill-extrusion-height").evaluate(n,h),z=this.paint.get("fill-extrusion-base").evaluate(n,h),O=(function(N,Z){const W=[];for(const Y of N){const te=[Y.x,Y.y,0,1];di(te,te,Z),W.push(new S(te[0]/te[3],te[1]/te[3]))}return W})(P,k),$=(function(N,Z,W,Y){const te=[],ce=[],ne=Y[8]*Z,oe=Y[9]*Z,pe=Y[10]*Z,_e=Y[11]*Z,Ee=Y[8]*W,We=Y[9]*W,Ge=Y[10]*W,He=Y[11]*W;for(const at of N){const Xe=[],qe=[];for(const Be of at){const ht=Be.x,lt=Be.y,ft=Y[0]*ht+Y[4]*lt+Y[12],ot=Y[1]*ht+Y[5]*lt+Y[13],yt=Y[2]*ht+Y[6]*lt+Y[14],ei=Y[3]*ht+Y[7]*lt+Y[15],Zt=yt+pe,Vi=ei+_e,aa=ft+Ee,_n=ot+We,Ni=yt+Ge,Ri=ei+He,hi=new S((ft+ne)/Vi,(ot+oe)/Vi);hi.z=Zt/Vi,Xe.push(hi);const en=new S(aa/Ri,_n/Ri);en.z=Ni/Ri,qe.push(en)}te.push(Xe),ce.push(qe)}return[te,ce]})(g,z,A,k);return(function(N,Z,W){let Y=1/0;Fg(W,Z)&&(Y=u_(W,Z[0]));for(let te=0;te<Z.length;te++){const ce=Z[te],ne=N[te];for(let oe=0;oe<ce.length-1;oe++){const pe=ce[oe],_e=[pe,ce[oe+1],ne[oe+1],ne[oe],pe];ah(W,_e)&&(Y=Math.min(Y,u_(W,_e)))}}return Y!==1/0&&Y})($[0],$[1],O)}}function vd(a,e){return a.x*e.x+a.y*e.y}function u_(a,e){if(a.length===1){let n=0;const h=e[n++];let g;for(;!g||h.equals(g);)if(g=e[n++],!g)return 1/0;for(;n<e.length;n++){const y=e[n],v=a[0],k=g.sub(h),P=y.sub(h),A=v.sub(h),z=vd(k,k),O=vd(k,P),$=vd(P,P),N=vd(A,k),Z=vd(A,P),W=z*$-O*O,Y=($*N-O*Z)/W,te=(z*Z-O*N)/W,ce=h.z*(1-Y-te)+g.z*Y+y.z*te;if(isFinite(ce))return ce}return 1/0}{let n=1/0;for(const h of e)n=Math.min(n,h.z);return n}}const R0=sn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:F0}=R0,O0=sn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:j0}=O0,B0=Math.cos(Math.PI/180*37.5),h_=Math.pow(2,14)/.5;class yp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((n=>n.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((n=>{this.gradients[n.id]={}})),this.layoutVertexArray=new ye,this.layoutVertexArray2=new de,this.indexArray=new Oe,this.programConfigurations=new wo(e.layers,e.zoom),this.segments=new rt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((n=>n.isStateDependent())).map((n=>n.id))}populate(e,n,h){this.hasDependencies=Ec("line",this.layers,n)||this.hasLineDasharray(this.layers);const g=this.layers[0].layout.get("line-sort-key"),y=!g.isConstant(),v=[];for(const{feature:k,id:P,index:A,sourceLayerIndex:z}of e){const O=this.layers[0]._featureFilter.needGeometry,$=qs(k,O);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),$,h))continue;const N=y?g.evaluate($,{},h):void 0,Z={id:P,properties:k.properties,type:k.type,sourceLayerIndex:z,index:A,geometry:O?$.geometry:Gs(k),patterns:{},dashes:{},sortKey:N};v.push(Z)}y&&v.sort(((k,P)=>k.sortKey-P.sortKey));for(const k of v){const{geometry:P,index:A,sourceLayerIndex:z}=k;this.hasDependencies?(Ec("line",this.layers,n)?cp("line",this.layers,k,{zoom:this.zoom},n):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,k,this.zoom,n),this.patternFeatures.push(k)):this.addFeature(k,P,A,h,{},{},n.subdivisionGranularity),n.featureIndex.insert(e[A].feature,P,A,z,this.index)}}update(e,n,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,{imagePositions:h,dashPositions:g})}addFeatures(e,n,h,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,n,h,g,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,j0)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,F0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,n,h,g,y,v,k){const P=this.layers[0].layout,A=P.get("line-join").evaluate(e,{}),z=P.get("line-cap"),O=P.get("line-miter-limit"),$=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const N of n)this.addLine(N,e,A,z,O,$,g,k);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:y,dashPositions:v,canonical:g})}addLine(e,n,h,g,y,v,k,P){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=Yl(e,k?P.line.getGranularityForZoomLevel(k.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<e.length-1;ne++)this.totalDistance+=e[ne].dist(e[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=_d.types[n.type]==="Polygon";let z=e.length;for(;z>=2&&e[z-1].equals(e[z-2]);)z--;let O=0;for(;O<z-1&&e[O].equals(e[O+1]);)O++;if(z<(A?3:2))return;h==="bevel"&&(y=1.05);const $=this.overscaling<=16?122880/(512*this.overscaling):0,N=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray);let Z,W,Y,te,ce;this.e1=this.e2=-1,A&&(Z=e[z-2],ce=e[O].sub(Z)._unit()._perp());for(let ne=O;ne<z;ne++){if(Y=ne===z-1?A?e[O+1]:void 0:e[ne+1],Y&&e[ne].equals(Y))continue;ce&&(te=ce),Z&&(W=Z),Z=e[ne],ce=Y?Y.sub(Z)._unit()._perp():te,te=te||ce;let oe=te.add(ce);oe.x===0&&oe.y===0||oe._unit();const pe=te.x*ce.x+te.y*ce.y,_e=oe.x*ce.x+oe.y*ce.y,Ee=_e!==0?1/_e:1/0,We=2*Math.sqrt(2-2*_e),Ge=_e<B0&&W&&Y,He=te.x*ce.y-te.y*ce.x>0;if(Ge&&ne>O){const qe=Z.dist(W);if(qe>2*$){const Be=Z.sub(Z.sub(W)._mult($/qe)._round());this.updateDistance(W,Be),this.addCurrentVertex(Be,te,0,0,N),W=Be}}const at=W&&Y;let Xe=at?h:A?"butt":g;if(at&&Xe==="round"&&(Ee<v?Xe="miter":Ee<=2&&(Xe="fakeround")),Xe==="miter"&&Ee>y&&(Xe="bevel"),Xe==="bevel"&&(Ee>2&&(Xe="flipbevel"),Ee<y&&(Xe="miter")),W&&this.updateDistance(W,Z),Xe==="miter")oe._mult(Ee),this.addCurrentVertex(Z,oe,0,0,N);else if(Xe==="flipbevel"){if(Ee>100)oe=ce.mult(-1);else{const qe=Ee*te.add(ce).mag()/te.sub(ce).mag();oe._perp()._mult(qe*(He?-1:1))}this.addCurrentVertex(Z,oe,0,0,N),this.addCurrentVertex(Z,oe.mult(-1),0,0,N)}else if(Xe==="bevel"||Xe==="fakeround"){const qe=-Math.sqrt(Ee*Ee-1),Be=He?qe:0,ht=He?0:qe;if(W&&this.addCurrentVertex(Z,te,Be,ht,N),Xe==="fakeround"){const lt=Math.round(180*We/Math.PI/20);for(let ft=1;ft<lt;ft++){let ot=ft/lt;if(ot!==.5){const ei=ot-.5;ot+=ot*ei*(ot-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*ei*ei+(.848013+pe*(.215638*pe-1.06021)))}const yt=ce.sub(te)._mult(ot)._add(te)._unit()._mult(He?-1:1);this.addHalfVertex(Z,yt.x,yt.y,!1,He,0,N)}}Y&&this.addCurrentVertex(Z,ce,-Be,-ht,N)}else if(Xe==="butt")this.addCurrentVertex(Z,oe,0,0,N);else if(Xe==="square"){const qe=W?1:-1;this.addCurrentVertex(Z,oe,qe,qe,N)}else Xe==="round"&&(W&&(this.addCurrentVertex(Z,te,0,0,N),this.addCurrentVertex(Z,te,1,1,N,!0)),Y&&(this.addCurrentVertex(Z,ce,-1,-1,N,!0),this.addCurrentVertex(Z,ce,0,0,N)));if(Ge&&ne<z-1){const qe=Z.dist(Y);if(qe>2*$){const Be=Z.add(Y.sub(Z)._mult($/qe)._round());this.updateDistance(Z,Be),this.addCurrentVertex(Be,ce,0,0,N),Z=Be}}}}addCurrentVertex(e,n,h,g,y,v=!1){const k=n.y*g-n.x,P=-n.y-n.x*g;this.addHalfVertex(e,n.x+n.y*h,n.y-n.x*h,v,!1,h,y),this.addHalfVertex(e,k,P,v,!0,-g,y),this.distance>h_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,n,h,g,y,v))}addHalfVertex({x:e,y:n},h,g,y,v,k,P){const A=.5*(this.lineClips?this.scaledDistance*(h_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(y?1:0),(n<<1)+(v?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(k===0?0:k<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,z,this.e2),P.primitiveLength++),v?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,n){this.distance+=e.dist(n),this.updateScaledDistance()}hasLineDasharray(e){for(const n of e){const h=n.paint.get("line-dasharray");if(h&&!h.isConstant())return!0}return!1}addLineDashDependencies(e,n,h,g){for(const y of e){const v=y.paint.get("line-dasharray");if(!v||v.value.kind==="constant")continue;const k=y.layout.get("line-cap")==="round",P={dasharray:v.value.evaluate({zoom:h-1},n,{}),round:k},A={dasharray:v.value.evaluate({zoom:h},n,{}),round:k},z={dasharray:v.value.evaluate({zoom:h+1},n,{}),round:k},O=`${P.dasharray.join(",")},${P.round}`,$=`${A.dasharray.join(",")},${A.round}`,N=`${z.dasharray.join(",")},${z.round}`;g.dashDependencies[O]=P,g.dashDependencies[$]=A,g.dashDependencies[N]=z,n.dashes[y.id]={min:O,mid:$,max:N}}}}let d_,c_;ct("LineBucket",yp,{omit:["layers","patternFeatures"]});var f_={get paint(){return c_=c_||new pa({"line-opacity":new kt(De.paint_line["line-opacity"]),"line-color":new kt(De.paint_line["line-color"]),"line-translate":new _t(De.paint_line["line-translate"]),"line-translate-anchor":new _t(De.paint_line["line-translate-anchor"]),"line-width":new kt(De.paint_line["line-width"]),"line-gap-width":new kt(De.paint_line["line-gap-width"]),"line-offset":new kt(De.paint_line["line-offset"]),"line-blur":new kt(De.paint_line["line-blur"]),"line-dasharray":new Vl(De.paint_line["line-dasharray"]),"line-pattern":new Vl(De.paint_line["line-pattern"]),"line-gradient":new Yu(De.paint_line["line-gradient"])})},get layout(){return d_=d_||new pa({"line-cap":new _t(De.layout_line["line-cap"]),"line-join":new kt(De.layout_line["line-join"]),"line-miter-limit":new _t(De.layout_line["line-miter-limit"]),"line-round-limit":new _t(De.layout_line["line-round-limit"]),"line-sort-key":new kt(De.layout_line["line-sort-key"])})}};class $0 extends kt{possiblyEvaluate(e,n){return n=new wi(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(e,n)}evaluate(e,n,h,g){return n=Ii({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(e,n,h,g)}}let zc;class V0 extends Ya{constructor(e,n){super(e,f_,n),this.gradientVersion=0,zc||(zc=new $0(f_.paint.properties["line-width"].specification),zc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const n=this.gradientExpression();this.stepInterpolant=!!(function(h){return h._styleExpression!==void 0})(n)&&n._styleExpression.expression instanceof Er,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,n){super.recalculate(e,n),this.paint._values["line-floorwidth"]=zc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new yp(e)}queryRadius(e){const n=e,h=p_(sh("line-width",this,n),sh("line-gap-width",this,n)),g=sh("line-offset",this,n);return h/2+Math.abs(g)+Cc(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:n,featureState:h,geometry:g,transform:y,pixelsToTileUnits:v}){const k=Lc(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-y.bearingInRadians,v),P=v/2*p_(this.paint.get("line-width").evaluate(n,h),this.paint.get("line-gap-width").evaluate(n,h)),A=this.paint.get("line-offset").evaluate(n,h);return A&&(g=(function(z,O){const $=[];for(let N=0;N<z.length;N++){const Z=Kw(z[N]),W=[];for(let Y=0;Y<Z.length;Y++){const te=Z[Y],ce=Z[Y-1],ne=Z[Y+1],oe=Y===0?new S(0,0):te.sub(ce)._unit()._perp(),pe=Y===Z.length-1?new S(0,0):ne.sub(te)._unit()._perp(),_e=oe._add(pe)._unit(),Ee=_e.x*pe.x+_e.y*pe.y;Ee!==0&&_e._mult(1/Ee),W.push(_e._mult(O)._add(te))}$.push(W)}return $})(g,A*v)),(function(z,O,$){for(let N=0;N<O.length;N++){const Z=O[N];if(z.length>=3){for(let W=0;W<Z.length;W++)if(rh(z,Z[W]))return!0}if(Zw(z,Z,$))return!0}return!1})(k,g,P)}isTileClipped(){return!0}}function p_(a,e){return e>0?e+2*a:a}const N0=sn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),U0=sn([{name:"a_projected_pos",components:3,type:"Float32"}],4);sn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const G0=sn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);sn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const m_=sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),q0=sn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Z0(a,e,n){return a.sections.forEach((h=>{h.text=(function(g,y,v){const k=y.layout.get("text-transform").evaluate(v,{});return k==="uppercase"?g=g.toLocaleUpperCase():k==="lowercase"&&(g=g.toLocaleLowerCase()),Vs.applyArabicShaping&&(g=Vs.applyArabicShaping(g)),g})(h.text,e,n)})),a}sn([{name:"triangle",components:3,type:"Uint16"}]),sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),sn([{type:"Float32",name:"offsetX"}]),sn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),sn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Rn=24;const xd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},W0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},H0={40:!0};function g_(a,e,n,h,g,y){if("fontStack"in e){const v=n[e.fontStack],k=v&&v[a];return k?k.metrics.advance*e.scale+g:0}{const v=h[e.imageName];return v?v.displaySize[0]*e.scale*Rn/y+g:0}}function __(a,e,n,h){const g=Math.pow(a-e,2);return h?a<e?g/2:2*g:g+Math.abs(n)*n}function K0(a,e,n){let h=0;return a===10&&(h-=1e4),n&&(h+=150),a!==40&&a!==65288||(h+=50),e!==41&&e!==65289||(h+=50),h}function y_(a,e,n,h,g,y){let v=null,k=__(e,n,g,y);for(const P of h){const A=__(e-P.x,n,g,y)+P.badness;A<=k&&(v=P,k=A)}return{index:a,x:e,priorBreak:v,badness:k}}function v_(a){return a?v_(a.priorBreak).concat(a.index):[]}class hh{constructor(e="",n=[],h=[]){this.text=e,this.sections=n,this.sectionIndex=h,this.imageSectionID=null}static fromFeature(e,n){const h=new hh;for(let g=0;g<e.sections.length;g++){const y=e.sections[g];y.image?h.addImageSection(y):h.addTextSection(y,n)}return h}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=(function(e){let n="",h={premature:!0,value:void 0};const g=e[Symbol.iterator]();let y=g.next();const v=e[Symbol.iterator]();v.next();let k=v.next();for(;!y.done;)n+=!k.done&&Yh(k.value.codePointAt(0))&&!xd[k.value]||!h.premature&&Yh(h.value.codePointAt(0))&&!xd[h.value]||!xd[y.value]?y.value:xd[y.value],h={value:y.value,premature:!1},y=g.next(),k=v.next();return n})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const e=this.text.match(/^\s*/),n=e?e[0].length:0,h=this.text.match(/\S\s*$/),g=h?h[0].length-1:0;this.text=this.text.substring(n,this.text.length-g),this.sectionIndex=this.sectionIndex.slice(n,this.sectionIndex.length-g)}substring(e,n){const h=[...this.text].slice(e,n).join(""),g=this.sectionIndex.slice(e,n);return new hh(h,this.sections,g)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,n)=>Math.max(e,this.sections[n].scale)),0)}getMaxImageSize(e){let n=0,h=0;for(let g=0;g<this.length();g++){const y=this.getSection(g);if("imageName"in y){const v=e[y.imageName];if(!v)continue;const k=v.displaySize;n=Math.max(n,k[0]),h=Math.max(h,k[1])}}return{maxImageWidth:n,maxImageHeight:h}}addTextSection(e,n){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||n});const h=this.sections.length-1;this.sectionIndex.push(...[...e.text].map((()=>h)))}addImageSection(e){const n=e.image?e.image.name:"";if(n.length===0)return void gn("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:n}),this.sectionIndex.push(this.sections.length-1)):gn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,n,h,g,y){const v=[],k=this.determineAverageLineWidth(e,n,h,g,y),P=this.hasZeroWidthSpaces();let A=0,z=0;const O=this.text[Symbol.iterator]();let $=O.next();const N=this.text[Symbol.iterator]();N.next();let Z=N.next();const W=this.text[Symbol.iterator]();W.next(),W.next();let Y=W.next();for(;!$.done;){const te=this.getSection(z),ce=$.value.codePointAt(0);if(gc(ce)||(A+=g_(ce,te,h,g,e,y)),!Z.done){const ne=jl(ce),oe=Z.value.codePointAt(0);(W0[ce]||ne||"imageName"in te||!Y.done&&H0[oe])&&v.push(y_(z+1,A,k,v,K0(ce,oe,ne&&P),!1))}z++,$=O.next(),Z=N.next(),Y=W.next()}return v_(y_(this.length(),A,k,v,0,!0))}determineAverageLineWidth(e,n,h,g,y){let v=0,k=0;for(const P of this.text){const A=this.getSection(k);v+=g_(P.codePointAt(0),A,h,g,e,y),k++}return v/Math.max(1,Math.ceil(v/n))}}const vp=4294967296,x_=1/vp,b_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Rc{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,n,h=this.length){for(;this.pos<h;){const g=this.readVarint(),y=g>>3,v=this.pos;this.type=7&g,e(y,n,this),this.pos===v&&this.skip(g)}return n}readMessage(e,n){return this.readFields(e,n,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*vp;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*vp;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const n=this.buf;let h,g;return g=n[this.pos++],h=127&g,g<128?h:(g=n[this.pos++],h|=(127&g)<<7,g<128?h:(g=n[this.pos++],h|=(127&g)<<14,g<128?h:(g=n[this.pos++],h|=(127&g)<<21,g<128?h:(g=n[this.pos],h|=(15&g)<<28,(function(y,v,k){const P=k.buf;let A,z;if(z=P[k.pos++],A=(112&z)>>4,z<128||(z=P[k.pos++],A|=(127&z)<<3,z<128)||(z=P[k.pos++],A|=(127&z)<<10,z<128)||(z=P[k.pos++],A|=(127&z)<<17,z<128)||(z=P[k.pos++],A|=(127&z)<<24,z<128)||(z=P[k.pos++],A|=(1&z)<<31,z<128))return dh(y,A,v);throw new Error("Expected varint not more than 10 bytes")})(h,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,n=this.pos;return this.pos=e,e-n>=12&&b_?b_.decode(this.buf.subarray(n,e)):(function(h,g,y){let v="",k=g;for(;k<y;){const P=h[k];let A,z,O,$=null,N=P>239?4:P>223?3:P>191?2:1;if(k+N>y)break;N===1?P<128&&($=P):N===2?(A=h[k+1],(192&A)==128&&($=(31&P)<<6|63&A,$<=127&&($=null))):N===3?(A=h[k+1],z=h[k+2],(192&A)==128&&(192&z)==128&&($=(15&P)<<12|(63&A)<<6|63&z,($<=2047||$>=55296&&$<=57343)&&($=null))):N===4&&(A=h[k+1],z=h[k+2],O=h[k+3],(192&A)==128&&(192&z)==128&&(192&O)==128&&($=(15&P)<<18|(63&A)<<12|(63&z)<<6|63&O,($<=65535||$>=1114112)&&($=null))),$===null?($=65533,N=1):$>65535&&($-=65536,v+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),v+=String.fromCharCode($),k+=N}return v})(this.buf,n,e)}readBytes(){const e=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,e);return this.pos=e,n}readPackedVarint(e=[],n){const h=this.readPackedEnd();for(;this.pos<h;)e.push(this.readVarint(n));return e}readPackedSVarint(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const n=7&e;if(n===0)for(;this.buf[this.pos++]>127;);else if(n===2)this.pos=this.readVarint()+this.pos;else if(n===5)this.pos+=4;else{if(n!==1)throw new Error(`Unimplemented type: ${n}`);this.pos+=8}}writeTag(e,n){this.writeVarint(e<<3|n)}realloc(e){let n=this.length||16;for(;n<this.pos+e;)n*=2;if(n!==this.length){const h=new Uint8Array(n);h.set(this.buf),this.buf=h,this.dataView=new DataView(h.buffer),this.length=n}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*x_),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*x_),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?(function(n,h){let g,y;if(n>=0?(g=n%4294967296|0,y=n/4294967296|0):(g=~(-n%4294967296),y=~(-n/4294967296),4294967295^g?g=g+1|0:(g=0,y=y+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),(function(v,k,P){P.buf[P.pos++]=127&v|128,v>>>=7,P.buf[P.pos++]=127&v|128,v>>>=7,P.buf[P.pos++]=127&v|128,v>>>=7,P.buf[P.pos++]=127&v|128,P.buf[P.pos]=127&(v>>>=7)})(g,0,h),(function(v,k){const P=(7&v)<<4;k.buf[k.pos++]|=P|((v>>>=3)?128:0),v&&(k.buf[k.pos++]=127&v|((v>>>=7)?128:0),v&&(k.buf[k.pos++]=127&v|((v>>>=7)?128:0),v&&(k.buf[k.pos++]=127&v|((v>>>=7)?128:0),v&&(k.buf[k.pos++]=127&v|((v>>>=7)?128:0),v&&(k.buf[k.pos++]=127&v)))))})(y,h)})(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const n=this.pos;this.pos=(function(g,y,v){for(let k,P,A=0;A<y.length;A++){if(k=y.charCodeAt(A),k>55295&&k<57344){if(!P){k>56319||A+1===y.length?(g[v++]=239,g[v++]=191,g[v++]=189):P=k;continue}if(k<56320){g[v++]=239,g[v++]=191,g[v++]=189,P=k;continue}k=P-55296<<10|k-56320|65536,P=null}else P&&(g[v++]=239,g[v++]=191,g[v++]=189,P=null);k<128?g[v++]=k:(k<2048?g[v++]=k>>6|192:(k<65536?g[v++]=k>>12|224:(g[v++]=k>>18|240,g[v++]=k>>12&63|128),g[v++]=k>>6&63|128),g[v++]=63&k|128)}return v})(this.buf,e,this.pos);const h=this.pos-n;h>=128&&w_(n,h,this),this.pos=n-1,this.writeVarint(h),this.pos+=h}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const n=e.length;this.writeVarint(n),this.realloc(n);for(let h=0;h<n;h++)this.buf[this.pos++]=e[h]}writeRawMessage(e,n){this.pos++;const h=this.pos;e(n,this);const g=this.pos-h;g>=128&&w_(h,g,this),this.pos=h-1,this.writeVarint(g),this.pos+=g}writeMessage(e,n,h){this.writeTag(e,2),this.writeRawMessage(n,h)}writePackedVarint(e,n){n.length&&this.writeMessage(e,Y0,n)}writePackedSVarint(e,n){n.length&&this.writeMessage(e,X0,n)}writePackedBoolean(e,n){n.length&&this.writeMessage(e,e1,n)}writePackedFloat(e,n){n.length&&this.writeMessage(e,J0,n)}writePackedDouble(e,n){n.length&&this.writeMessage(e,Q0,n)}writePackedFixed32(e,n){n.length&&this.writeMessage(e,t1,n)}writePackedSFixed32(e,n){n.length&&this.writeMessage(e,i1,n)}writePackedFixed64(e,n){n.length&&this.writeMessage(e,n1,n)}writePackedSFixed64(e,n){n.length&&this.writeMessage(e,a1,n)}writeBytesField(e,n){this.writeTag(e,2),this.writeBytes(n)}writeFixed32Field(e,n){this.writeTag(e,5),this.writeFixed32(n)}writeSFixed32Field(e,n){this.writeTag(e,5),this.writeSFixed32(n)}writeFixed64Field(e,n){this.writeTag(e,1),this.writeFixed64(n)}writeSFixed64Field(e,n){this.writeTag(e,1),this.writeSFixed64(n)}writeVarintField(e,n){this.writeTag(e,0),this.writeVarint(n)}writeSVarintField(e,n){this.writeTag(e,0),this.writeSVarint(n)}writeStringField(e,n){this.writeTag(e,2),this.writeString(n)}writeFloatField(e,n){this.writeTag(e,5),this.writeFloat(n)}writeDoubleField(e,n){this.writeTag(e,1),this.writeDouble(n)}writeBooleanField(e,n){this.writeVarintField(e,+n)}}function dh(a,e,n){return n?4294967296*e+(a>>>0):4294967296*(e>>>0)+(a>>>0)}function w_(a,e,n){const h=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(h);for(let g=n.pos-1;g>=a;g--)n.buf[g+h]=n.buf[g]}function Y0(a,e){for(let n=0;n<a.length;n++)e.writeVarint(a[n])}function X0(a,e){for(let n=0;n<a.length;n++)e.writeSVarint(a[n])}function J0(a,e){for(let n=0;n<a.length;n++)e.writeFloat(a[n])}function Q0(a,e){for(let n=0;n<a.length;n++)e.writeDouble(a[n])}function e1(a,e){for(let n=0;n<a.length;n++)e.writeBoolean(a[n])}function t1(a,e){for(let n=0;n<a.length;n++)e.writeFixed32(a[n])}function i1(a,e){for(let n=0;n<a.length;n++)e.writeSFixed32(a[n])}function n1(a,e){for(let n=0;n<a.length;n++)e.writeFixed64(a[n])}function a1(a,e){for(let n=0;n<a.length;n++)e.writeSFixed64(a[n])}function r1(a,e,n){a===1&&n.readMessage(s1,e)}function s1(a,e,n){if(a===3){const{id:h,bitmap:g,width:y,height:v,left:k,top:P,advance:A}=n.readMessage(o1,{});e.push({id:h,bitmap:new hd({width:y+6,height:v+6},g),metrics:{width:y,height:v,left:k,top:P,advance:A}})}}function o1(a,e,n){a===1?e.id=n.readVarint():a===2?e.bitmap=n.readBytes():a===3?e.width=n.readVarint():a===4?e.height=n.readVarint():a===5?e.left=n.readSVarint():a===6?e.top=n.readSVarint():a===7&&(e.advance=n.readVarint())}function k_(a){let e=0,n=0;for(const v of a)e+=v.w*v.h,n=Math.max(n,v.w);a.sort(((v,k)=>k.h-v.h));const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let g=0,y=0;for(const v of a)for(let k=h.length-1;k>=0;k--){const P=h[k];if(!(v.w>P.w||v.h>P.h)){if(v.x=P.x,v.y=P.y,y=Math.max(y,v.y+v.h),g=Math.max(g,v.x+v.w),v.w===P.w&&v.h===P.h){const A=h.pop();A&&k<h.length&&(h[k]=A)}else v.h===P.h?(P.x+=v.w,P.w-=v.w):v.w===P.w?(P.y+=v.h,P.h-=v.h):(h.push({x:P.x+v.w,y:P.y,w:P.w-v.w,h:v.h}),P.y+=v.h,P.h-=v.h);break}}return{w:g,h:y,fill:e/(g*y)||0}}class xp{constructor(e,{pixelRatio:n,version:h,stretchX:g,stretchY:y,content:v,textFitWidth:k,textFitHeight:P}){this.paddedRect=e,this.pixelRatio=n,this.stretchX=g,this.stretchY=y,this.content=v,this.version=h,this.textFitWidth=k,this.textFitHeight=P}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class S_{constructor(e,n){const h={},g={};this.haveRenderCallbacks=[];const y=[];this.addImages(e,h,y),this.addImages(n,g,y);const{w:v,h:k}=k_(y),P=new Ra({width:v||1,height:k||1});for(const A in e){const z=e[A],O=h[A].paddedRect;Ra.copy(z.data,P,{x:0,y:0},{x:O.x+1,y:O.y+1},z.data)}for(const A in n){const z=n[A],O=g[A].paddedRect,$=O.x+1,N=O.y+1,Z=z.data.width,W=z.data.height;Ra.copy(z.data,P,{x:0,y:0},{x:$,y:N},z.data),Ra.copy(z.data,P,{x:0,y:W-1},{x:$,y:N-1},{width:Z,height:1}),Ra.copy(z.data,P,{x:0,y:0},{x:$,y:N+W},{width:Z,height:1}),Ra.copy(z.data,P,{x:Z-1,y:0},{x:$-1,y:N},{width:1,height:W}),Ra.copy(z.data,P,{x:0,y:0},{x:$+Z,y:N},{width:1,height:W})}this.image=P,this.iconPositions=h,this.patternPositions=g}addImages(e,n,h){for(const g in e){const y=e[g],v={x:0,y:0,w:y.data.width+2,h:y.data.height+2};h.push(v),n[g]=new xp(v,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(e,n){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in e.updatedImages)this.patchUpdatedImage(this.iconPositions[h],e.getImage(h),n),this.patchUpdatedImage(this.patternPositions[h],e.getImage(h),n)}patchUpdatedImage(e,n,h){if(!e||!n||e.version===n.version)return;e.version=n.version;const[g,y]=e.tl;h.update(n.data,void 0,{x:g,y})}}var rl;function Fc(a,e,n,h,g,y,v,k,P,A,z,O,$,N,Z){const W=hh.fromFeature(a,g);let Y;O===f.az.vertical&&W.verticalizePunctuation();let te=W.determineLineBreaks(A,y,e,h,N);const{processBidirectionalText:ce,processStyledBidirectionalText:ne}=Vs;if(ce&&W.sections.length===1){Y=[],te=te.map((Ee=>W.toCodeUnitIndex(Ee)));const _e=ce(W.toString(),te);for(const Ee of _e){const We=[...Ee].map((()=>0));Y.push(new hh(Ee,W.sections,We))}}else if(ne){Y=[],te=te.map((Ge=>W.toCodeUnitIndex(Ge)));let _e=0;const Ee=[];for(const Ge of W.text)Ee.push(...Array(Ge.length).fill(W.sectionIndex[_e])),_e++;const We=ne(W.text,Ee,te);for(const Ge of We){const He=[];let at="";for(const Xe of Ge[0])He.push(Ge[1][at.length]),at+=Xe;Y.push(new hh(Ge[0],W.sections,He))}}else Y=(function(_e,Ee){const We=[];let Ge=0;for(const He of Ee)We.push(_e.substring(Ge,He)),Ge=He;return Ge<_e.length()&&We.push(_e.substring(Ge,_e.length())),We})(W,te);const oe=[],pe={positionedLines:oe,text:W.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:O,iconsInText:!1,verticalizable:!1};return(function(_e,Ee,We,Ge,He,at,Xe,qe,Be,ht,lt,ft){let ot=0,yt=0,ei=0,Zt=0;const Vi=qe==="right"?1:qe==="left"?0:.5,aa=Rn/ft;let _n=0;for(const hi of He){hi.trim();const en=hi.getMaxScale(),ln={positionedGlyphs:[],lineOffset:0};_e.positionedLines[_n]=ln;const Ei=ln.positionedGlyphs;let Fa=0;if(!hi.length()){yt+=at,++_n;continue}const ra=l1(Ge,hi,aa);let Oa=0;for(const jn of hi.text){const Wi=hi.getSection(Oa),yn=jn.codePointAt(0),tn=u1(Be,lt,yn),Bn={glyph:yn,imageName:null,x:ot,y:yt+-17,vertical:tn,scale:1,fontStack:"",sectionIndex:hi.getSectionIndex(Oa),metrics:null,rect:null};let To;if("fontStack"in Wi){if(To=h1(Wi,yn,tn,ra,Ee,We),!To)continue;Bn.fontStack=Wi.fontStack}else{if(_e.iconsInText=!0,Wi.scale*=aa,To=d1(Wi,tn,en,ra,Ge),!To)continue;Fa=Math.max(Fa,To.imageOffset),Bn.imageName=Wi.imageName}const{rect:us,metrics:Md,baselineOffset:hl}=To;Bn.y+=hl,Bn.scale=Wi.scale,Bn.metrics=Md,Bn.rect=us,Ei.push(Bn),tn?(_e.verticalizable=!0,ot+=("imageName"in Wi?Md.advance:Rn)*Wi.scale+ht):ot+=Md.advance*Wi.scale+ht,Oa++}Ei.length!==0&&(ei=Math.max(ot-ht,ei),c1(Ei,0,Ei.length-1,Vi)),ot=0,ln.lineOffset=Math.max(Fa,(en-1)*Rn);const jr=at*en+Fa;yt+=jr,Zt=Math.max(jr,Zt),++_n}const{horizontalAlign:Ni,verticalAlign:Ri}=bp(Xe);(function(hi,en,ln,Ei,Fa,ra,Oa,jr,jn){const Wi=(en-ln)*Fa;let yn=0;yn=ra!==Oa?-jr*Ei- -17:-Ei*jn*Oa+.5*Oa;for(const tn of hi)for(const Bn of tn.positionedGlyphs)Bn.x+=Wi,Bn.y+=yn})(_e.positionedLines,Vi,Ni,Ri,ei,Zt,at,yt,He.length),_e.top+=-Ri*yt,_e.bottom=_e.top+yt,_e.left+=-Ni*ei,_e.right=_e.left+ei})(pe,e,n,h,Y,v,k,P,O,A,$,Z),!(function(_e){for(const Ee of _e)if(Ee.positionedGlyphs.length!==0)return!1;return!0})(oe)&&pe}function bp(a){let e=.5,n=.5;switch(a){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function l1(a,e,n){const h=e.getMaxScale()*Rn,{maxImageWidth:g,maxImageHeight:y}=e.getMaxImageSize(a),v=Math.max(h,y*n);return{verticalLineContentWidth:Math.max(h,g*n),horizontalLineContentHeight:v}}function T_(a){switch(a){case"top":return 0;case"center":return .5;default:return 1}}function u1(a,e,n){return!(a===f.az.horizontal||!e&&!Kh(n)||e&&(gc(n)||(h=n,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function h1(a,e,n,h,g,y){const v=y[a.fontStack],k=(function(A,z,O,$){if(A&&A.rect)return A;const N=z[O.fontStack],Z=N&&N[$];return Z?{rect:null,metrics:Z.metrics}:null})(v&&v[e],g,a,e);if(k===null)return null;let P;if(n)P=h.verticalLineContentWidth-a.scale*Rn;else{const A=T_(a.verticalAlign);P=(h.horizontalLineContentHeight-a.scale*Rn)*A}return{rect:k.rect,metrics:k.metrics,baselineOffset:P}}function d1(a,e,n,h,g){const y=g[a.imageName];if(!y)return null;const v=y.paddedRect,k=y.displaySize,P={width:k[0],height:k[1],left:1,top:-3,advance:e?k[1]:k[0]};let A;if(e)A=h.verticalLineContentWidth-k[1]*a.scale;else{const z=T_(a.verticalAlign);A=(h.horizontalLineContentHeight-k[1]*a.scale)*z}return{rect:v,metrics:P,baselineOffset:A,imageOffset:(e?k[0]:k[1])*a.scale-Rn*n}}function c1(a,e,n,h){if(h===0)return;const g=a[n],y=(a[n].x+g.metrics.advance*g.scale)*h;for(let v=e;v<=n;v++)a[v].x-=y}function f1(a,e,n){const{horizontalAlign:h,verticalAlign:g}=bp(n),y=e[0]-a.displaySize[0]*h,v=e[1]-a.displaySize[1]*g;return{image:a,top:v,bottom:v+a.displaySize[1],left:y,right:y+a.displaySize[0]}}function P_(a){var e,n;let h=a.left,g=a.top,y=a.right-h,v=a.bottom-g;const k=(e=a.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",P=(n=a.image.textFitHeight)!==null&&n!==void 0?n:"stretchOrShrink",A=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(P==="proportional"){if(k==="stretchOnly"&&y/v<A||k==="proportional"){const z=Math.ceil(v*A);h*=z/y,y=z}}else if(k==="proportional"&&P==="stretchOnly"&&A!==0&&y/v>A){const z=Math.ceil(y/A);g*=z/v,v=z}return{x1:h,y1:g,x2:h+y,y2:g+v}}function M_(a,e,n,h,g,y){const v=a.image;let k;if(v.content){const Y=v.content,te=v.pixelRatio||1;k=[Y[0]/te,Y[1]/te,v.displaySize[0]-Y[2]/te,v.displaySize[1]-Y[3]/te]}const P=e.left*y,A=e.right*y;let z,O,$,N;n==="width"||n==="both"?(N=g[0]+P-h[3],O=g[0]+A+h[1]):(N=g[0]+(P+A-v.displaySize[0])/2,O=N+v.displaySize[0]);const Z=e.top*y,W=e.bottom*y;return n==="height"||n==="both"?(z=g[1]+Z-h[0],$=g[1]+W+h[2]):(z=g[1]+(Z+W-v.displaySize[1])/2,$=z+v.displaySize[1]),{image:v,top:z,right:O,bottom:$,left:N,collisionPadding:k}}ct("ImagePosition",xp),ct("ImageAtlas",S_),f.az=void 0,(rl=f.az||(f.az={}))[rl.none=0]="none",rl[rl.horizontal=1]="horizontal",rl[rl.vertical=2]="vertical",rl[rl.horizontalOnly=3]="horizontalOnly";const ko=128,sl=32640;function C_(a,e){const{expression:n}=e;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new wi(a+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=n;let y=0;for(;y<h.length&&h[y]<=a;)y++;y=Math.max(0,y-1);let v=y;for(;v<h.length&&h[v]<a+1;)v++;v=Math.min(h.length-1,v);const k=h[y],P=h[v];return n.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:P,interpolationType:g}:{kind:"camera",minZoom:k,maxZoom:P,minSize:n.evaluate(new wi(k)),maxSize:n.evaluate(new wi(P)),interpolationType:g}}}function wp(a,e,n){let h="never";const g=a.get(e);return g?h=g:a.get(n)&&(h="always"),h}const p1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Oc(a,e,n,h,g,y,v,k,P,A,z,O,$){const N=k?Math.min(sl,Math.round(k[0])):0,Z=k?Math.min(sl,Math.round(k[1])):0;a.emplaceBack(e,n,Math.round(32*h),Math.round(32*g),y,v,(N<<1)+(P?1:0),Z,16*A,16*z,256*O,256*$)}function kp(a,e,n){a.emplaceBack(e.x,e.y,n),a.emplaceBack(e.x,e.y,n),a.emplaceBack(e.x,e.y,n),a.emplaceBack(e.x,e.y,n)}function m1(a){for(const e of a.sections)if(vc(e.text))return!0;return!1}class Sp{constructor(e){this.layoutVertexArray=new me,this.indexArray=new Oe,this.programConfigurations=e,this.segments=new rt,this.dynamicLayoutVertexArray=new Me,this.opacityVertexArray=new $e,this.hasVisibleVertices=!1,this.placedSymbolArray=new T}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,n,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,N0.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,U0.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,p1,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ct("SymbolBuffers",Sp);class Tp{constructor(e,n,h){this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new h,this.segments=new rt,this.collisionVertexArray=new Re}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,G0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ct("CollisionBuffers",Tp);class ch{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((v=>v.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=C_(this.zoom,n["text-size"]),this.iconSizeData=C_(this.zoom,n["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=wp(h,"text-overlap","text-allow-overlap")!=="never"||wp(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map((v=>f.az[v]))),this.stateDependentLayerIds=this.layers.filter((v=>v.isStateDependent())).map((v=>v.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Sp(new wo(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Sp(new wo(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new R,this.lineVertexArray=new B,this.symbolInstances=new I,this.textAnchorOffsets=new U}calculateGlyphDependencies(e,n,h,g,y){for(const v of e)if(n[v.codePointAt(0)]=!0,(h||g)&&y){const k=xd[v];k&&(n[k.codePointAt(0)]=!0)}}populate(e,n,h){const g=this.layers[0],y=g.layout,v=y.get("text-font"),k=y.get("text-field"),P=y.get("icon-image"),A=(k.value.kind!=="constant"||k.value.value instanceof Jn&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),z=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,O=y.get("symbol-sort-key");if(this.features=[],!A&&!z)return;const $=n.iconDependencies,N=n.glyphDependencies,Z=n.availableImages,W=new wi(this.zoom);for(const{feature:Y,id:te,index:ce,sourceLayerIndex:ne}of e){const oe=g._featureFilter.needGeometry,pe=qs(Y,oe);if(!g._featureFilter.filter(W,pe,h))continue;let _e,Ee;if(oe||(pe.geometry=Gs(Y)),A){const Ge=g.getValueAndResolveTokens("text-field",pe,h,Z),He=Jn.factory(Ge),at=this.hasRTLText=this.hasRTLText||m1(He);(!at||Vs.getRTLTextPluginStatus()==="unavailable"||at&&Vs.isParsed())&&(_e=Z0(He,g,pe))}if(z){const Ge=g.getValueAndResolveTokens("icon-image",pe,h,Z);Ee=Ge instanceof Gn?Ge:Gn.fromString(Ge)}if(!_e&&!Ee)continue;const We=this.sortFeaturesByKey?O.evaluate(pe,{},h):void 0;if(this.features.push({id:te,text:_e,icon:Ee,index:ce,sourceLayerIndex:ne,geometry:pe.geometry,properties:Y.properties,type:_d.types[Y.type],sortKey:We}),Ee&&($[Ee.name]=!0),_e){const Ge=v.evaluate(pe,{},h).join(","),He=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.az.vertical)>=0;for(const at of _e.sections)if(at.image)$[at.image.name]=!0;else{const Xe=nl(_e.toString()),qe=at.fontStack||Ge,Be=N[qe]=N[qe]||{};this.calculateGlyphDependencies(at.text,Be,He,this.allowVerticalPlacement,Xe)}}}y.get("symbol-placement")==="line"&&(this.features=(function(Y){const te={},ce={},ne=[];let oe=0;function pe(Ge){ne.push(Y[Ge]),oe++}function _e(Ge,He,at){const Xe=ce[Ge];return delete ce[Ge],ce[He]=Xe,ne[Xe].geometry[0].pop(),ne[Xe].geometry[0]=ne[Xe].geometry[0].concat(at[0]),Xe}function Ee(Ge,He,at){const Xe=te[He];return delete te[He],te[Ge]=Xe,ne[Xe].geometry[0].shift(),ne[Xe].geometry[0]=at[0].concat(ne[Xe].geometry[0]),Xe}function We(Ge,He,at){const Xe=at?He[0][He[0].length-1]:He[0][0];return`${Ge}:${Xe.x}:${Xe.y}`}for(let Ge=0;Ge<Y.length;Ge++){const He=Y[Ge],at=He.geometry,Xe=He.text?He.text.toString():null;if(!Xe){pe(Ge);continue}const qe=We(Xe,at),Be=We(Xe,at,!0);if(qe in ce&&Be in te&&ce[qe]!==te[Be]){const ht=Ee(qe,Be,at),lt=_e(qe,Be,ne[ht].geometry);delete te[qe],delete ce[Be],ce[We(Xe,ne[lt].geometry,!0)]=lt,ne[ht].geometry=null}else qe in ce?_e(qe,Be,at):Be in te?Ee(qe,Be,at):(pe(Ge),te[qe]=oe-1,ce[Be]=oe-1)}return ne.filter((Ge=>Ge.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Y,te)=>Y.sortKey-te.sortKey))}update(e,n,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,n,this.layers,{imagePositions:h}),this.icon.programConfigurations.updatePaintArrays(e,n,this.layers,{imagePositions:h}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,n){const h=this.lineVertexArray.length;if(e.segment!==void 0){let g=e.dist(n[e.segment+1]),y=e.dist(n[e.segment]);const v={};for(let k=e.segment+1;k<n.length;k++)v[k]={x:n[k].x,y:n[k].y,tileUnitDistanceFromAnchor:g},k<n.length-1&&(g+=n[k+1].dist(n[k]));for(let k=e.segment||0;k>=0;k--)v[k]={x:n[k].x,y:n[k].y,tileUnitDistanceFromAnchor:y},k>0&&(y+=n[k-1].dist(n[k]));for(let k=0;k<n.length;k++){const P=v[k];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(e,n,h,g,y,v,k,P,A,z,O,$){const N=e.indexArray,Z=e.layoutVertexArray,W=e.segments.prepareSegment(4*n.length,Z,N,this.canOverlap?v.sortKey:void 0),Y=this.glyphOffsetArray.length,te=W.vertexLength,ce=this.allowVerticalPlacement&&k===f.az.vertical?Math.PI/2:0,ne=v.text&&v.text.sections;for(let oe=0;oe<n.length;oe++){const{tl:pe,tr:_e,bl:Ee,br:We,tex:Ge,pixelOffsetTL:He,pixelOffsetBR:at,minFontScaleX:Xe,minFontScaleY:qe,glyphOffset:Be,isSDF:ht,sectionIndex:lt}=n[oe],ft=W.vertexLength,ot=Be[1];Oc(Z,P.x,P.y,pe.x,ot+pe.y,Ge.x,Ge.y,h,ht,He.x,He.y,Xe,qe),Oc(Z,P.x,P.y,_e.x,ot+_e.y,Ge.x+Ge.w,Ge.y,h,ht,at.x,He.y,Xe,qe),Oc(Z,P.x,P.y,Ee.x,ot+Ee.y,Ge.x,Ge.y+Ge.h,h,ht,He.x,at.y,Xe,qe),Oc(Z,P.x,P.y,We.x,ot+We.y,Ge.x+Ge.w,Ge.y+Ge.h,h,ht,at.x,at.y,Xe,qe),kp(e.dynamicLayoutVertexArray,P,ce),N.emplaceBack(ft,ft+2,ft+1),N.emplaceBack(ft+1,ft+2,ft+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Be[0]),oe!==n.length-1&&lt===n[oe+1].sectionIndex||e.programConfigurations.populatePaintArrays(Z.length,v,v.index,{imagePositions:{},canonical:$,formattedSection:ne&&ne[lt]})}e.placedSymbolArray.emplaceBack(P.x,P.y,Y,this.glyphOffsetArray.length-Y,te,A,z,P.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],k,0,!1,0,O)}_addCollisionDebugVertex(e,n,h,g,y,v){return n.emplaceBack(0,0),e.emplaceBack(h.x,h.y,g,y,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(e,n,h,g,y,v,k){const P=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),A=P.vertexLength,z=y.layoutVertexArray,O=y.collisionVertexArray,$=k.anchorX,N=k.anchorY;this._addCollisionDebugVertex(z,O,v,$,N,new S(e,n)),this._addCollisionDebugVertex(z,O,v,$,N,new S(h,n)),this._addCollisionDebugVertex(z,O,v,$,N,new S(h,g)),this._addCollisionDebugVertex(z,O,v,$,N,new S(e,g)),P.vertexLength+=4;const Z=y.indexArray;Z.emplaceBack(A,A+1),Z.emplaceBack(A+1,A+2),Z.emplaceBack(A+2,A+3),Z.emplaceBack(A+3,A),P.primitiveLength+=4}addDebugCollisionBoxes(e,n,h,g){for(let y=e;y<n;y++){const v=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,g?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Tp(ze,m_.members,tt),this.iconCollisionBox=new Tp(ze,m_.members,tt);for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(e,n,h,g,y,v,k,P,A){const z={};for(let O=n;O<h;O++){const $=e.get(O);z.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},z.textFeatureIndex=$.featureIndex;break}for(let O=g;O<y;O++){const $=e.get(O);z.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},z.verticalTextFeatureIndex=$.featureIndex;break}for(let O=v;O<k;O++){const $=e.get(O);z.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},z.iconFeatureIndex=$.featureIndex;break}for(let O=P;O<A;O++){const $=e.get(O);z.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},z.verticalIconFeatureIndex=$.featureIndex;break}return z}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const h=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,n){const h=e.placedSymbolArray.get(n),g=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<g;y+=4)e.indexArray.emplaceBack(y,y+2,y+1),e.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(e),h=Math.cos(e),g=[],y=[],v=[];for(let k=0;k<this.symbolInstances.length;++k){v.push(k);const P=this.symbolInstances.get(k);g.push(0|Math.round(n*P.anchorX+h*P.anchorY)),y.push(P.featureIndex)}return v.sort(((k,P)=>g[k]-g[P]||y[P]-y[k])),v}addToSortKeyRanges(e,n){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===n?h.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const h=this.symbolInstances.get(n);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(((g,y,v)=>{g>=0&&v.indexOf(g)===y&&this.addIndicesForPlacedSymbol(this.text,g)})),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let L_,E_;ct("SymbolBucket",ch,{omit:["layers","collisionBoxArray","features","compareText"]}),ch.MAX_GLYPHS=65535,ch.addDynamicAttributes=kp;var Pp={get paint(){return E_=E_||new pa({"icon-opacity":new kt(De.paint_symbol["icon-opacity"]),"icon-color":new kt(De.paint_symbol["icon-color"]),"icon-halo-color":new kt(De.paint_symbol["icon-halo-color"]),"icon-halo-width":new kt(De.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kt(De.paint_symbol["icon-halo-blur"]),"icon-translate":new _t(De.paint_symbol["icon-translate"]),"icon-translate-anchor":new _t(De.paint_symbol["icon-translate-anchor"]),"text-opacity":new kt(De.paint_symbol["text-opacity"]),"text-color":new kt(De.paint_symbol["text-color"],{runtimeType:Xn,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new kt(De.paint_symbol["text-halo-color"]),"text-halo-width":new kt(De.paint_symbol["text-halo-width"]),"text-halo-blur":new kt(De.paint_symbol["text-halo-blur"]),"text-translate":new _t(De.paint_symbol["text-translate"]),"text-translate-anchor":new _t(De.paint_symbol["text-translate-anchor"])})},get layout(){return L_=L_||new pa({"symbol-placement":new _t(De.layout_symbol["symbol-placement"]),"symbol-spacing":new _t(De.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _t(De.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new kt(De.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _t(De.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _t(De.layout_symbol["icon-allow-overlap"]),"icon-overlap":new _t(De.layout_symbol["icon-overlap"]),"icon-ignore-placement":new _t(De.layout_symbol["icon-ignore-placement"]),"icon-optional":new _t(De.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _t(De.layout_symbol["icon-rotation-alignment"]),"icon-size":new kt(De.layout_symbol["icon-size"]),"icon-text-fit":new _t(De.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _t(De.layout_symbol["icon-text-fit-padding"]),"icon-image":new kt(De.layout_symbol["icon-image"]),"icon-rotate":new kt(De.layout_symbol["icon-rotate"]),"icon-padding":new kt(De.layout_symbol["icon-padding"]),"icon-keep-upright":new _t(De.layout_symbol["icon-keep-upright"]),"icon-offset":new kt(De.layout_symbol["icon-offset"]),"icon-anchor":new kt(De.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _t(De.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _t(De.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _t(De.layout_symbol["text-rotation-alignment"]),"text-field":new kt(De.layout_symbol["text-field"]),"text-font":new kt(De.layout_symbol["text-font"]),"text-size":new kt(De.layout_symbol["text-size"]),"text-max-width":new kt(De.layout_symbol["text-max-width"]),"text-line-height":new _t(De.layout_symbol["text-line-height"]),"text-letter-spacing":new kt(De.layout_symbol["text-letter-spacing"]),"text-justify":new kt(De.layout_symbol["text-justify"]),"text-radial-offset":new kt(De.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _t(De.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new kt(De.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new kt(De.layout_symbol["text-anchor"]),"text-max-angle":new _t(De.layout_symbol["text-max-angle"]),"text-writing-mode":new _t(De.layout_symbol["text-writing-mode"]),"text-rotate":new kt(De.layout_symbol["text-rotate"]),"text-padding":new _t(De.layout_symbol["text-padding"]),"text-keep-upright":new _t(De.layout_symbol["text-keep-upright"]),"text-transform":new kt(De.layout_symbol["text-transform"]),"text-offset":new kt(De.layout_symbol["text-offset"]),"text-allow-overlap":new _t(De.layout_symbol["text-allow-overlap"]),"text-overlap":new _t(De.layout_symbol["text-overlap"]),"text-ignore-placement":new _t(De.layout_symbol["text-ignore-placement"]),"text-optional":new _t(De.layout_symbol["text-optional"])})}};class A_{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:la,this.defaultValue=e}evaluate(e){if(e.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(e.formattedSection))return n.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ct("FormatSectionOverride",A_,{omit:["defaultValue"]});class jc extends Ya{constructor(e,n){super(e,Pp,n)}recalculate(e,n){if(super.recalculate(e,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const y of h)g.indexOf(y)<0&&g.push(y);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,n,h,g){const y=this.layout.get(e).evaluate(n,{},h,g),v=this._unevaluatedLayout._values[e];return v.isDataDriven()||js(v.value)||!y?y:(function(k,P){return P.replace(/{([^{}]+)}/g,((A,z)=>k&&z in k?String(k[z]):""))})(n.properties,y)}createBucket(e){return new ch(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Pp.paint.overridableProperties){if(!jc.hasPaintOverride(this.layout,e))continue;const n=this.paint.get(e),h=new A_(n),g=new Xo(h,n.property.specification);let y=null;y=n.value.kind==="constant"||n.value.kind==="source"?new b("source",g):new C("composite",g,n.value.zoomStops),this.paint._values[e]=new yr(n.property,y,n.parameters)}}_handleOverridablePaintPropertyUpdate(e,n,h){return!(!this.layout||n.isDataDriven()||h.isDataDriven())&&jc.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,n){const h=e.get("text-field"),g=Pp.paint.properties[n];let y=!1;const v=k=>{for(const P of k)if(g.overrides&&g.overrides.hasOverride(P))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Jn)v(h.value.value.sections);else if(h.value.kind==="source"||h.value.kind==="composite"){const k=A=>{y||(A instanceof Ea&&Kt(A.value)===gs?v(A.value.sections):A instanceof uo?v(A.sections):A.eachChild(k))},P=h.value;P._styleExpression&&k(P._styleExpression.expression)}return y}}let I_;var g1={get paint(){return I_=I_||new pa({"background-color":new _t(De.paint_background["background-color"]),"background-pattern":new Ku(De.paint_background["background-pattern"]),"background-opacity":new _t(De.paint_background["background-opacity"])})}};class _1 extends Ya{constructor(e,n){super(e,g1,n)}}class y1 extends Ya{constructor(e,n){super(e,{},n),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class v1{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const x1={once:!0},Mp=63710088e-1;class ol{constructor(e,n){if(isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ol(dn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const n=Math.PI/180,h=this.lat*n,g=e.lat*n,y=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((e.lng-this.lng)*n);return Mp*Math.acos(Math.min(y,1))}static convert(e){if(e instanceof ol)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new ol(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new ol(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const D_=2*Math.PI*Mp;function z_(a){return D_*Math.cos(a*Math.PI/180)}function R_(a){return(180+a)/360}function F_(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function O_(a,e){return a/z_(e)}function j_(a){return 360*a-180}function Bc(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function B_(a,e){return a*z_(Bc(e))}class bd{constructor(e,n,h=0){this.x=+e,this.y=+n,this.z=+h}static fromLngLat(e,n=0){const h=ol.convert(e);return new bd(R_(h.lng),F_(h.lat),O_(n,h.lat))}toLngLat(){return new ol(j_(this.x),Bc(this.y))}toAltitude(){return B_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/D_*(e=Bc(this.y),1/Math.cos(e*Math.PI/180));var e}}function $_(a,e,n){var h=2*Math.PI*6378137/256/Math.pow(2,n);return[a*h-2*Math.PI*6378137/2,e*h-2*Math.PI*6378137/2]}class Cp{constructor(e,n,h){if(!(function(g,y,v){return!(g<0||g>25||v<0||v>=Math.pow(2,g)||y<0||y>=Math.pow(2,g))})(e,n,h))throw new Error(`x=${n}, y=${h}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=n,this.y=h,this.key=fh(0,e,e,n,h)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,n,h){const g=(function(v,k,P){var A=$_(256*v,256*(k=Math.pow(2,P)-k-1),P),z=$_(256*(v+1),256*(k+1),P);return A[0]+","+A[1]+","+z[0]+","+z[1]})(this.x,this.y,this.z),y=(function(v,k,P){let A,z="";for(let O=v;O>0;O--)A=1<<O-1,z+=(k&A?1:0)+(P&A?2:0);return z})(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,y).replace(/{bbox-epsg-3857}/g,g)}isChildOf(e){const n=this.z-e.z;return n>0&&e.x===this.x>>n&&e.y===this.y>>n}getTilePoint(e){const n=Math.pow(2,this.z);return new S((e.x*n-this.x)*Mt,(e.y*n-this.y)*Mt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class V_{constructor(e,n){this.wrap=e,this.canonical=n,this.key=fh(e,n.z,n.z,n.x,n.y)}}class br{constructor(e,n,h,g,y){if(this.terrainRttPosMatrix32f=null,e<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${h}`);this.overscaledZ=e,this.wrap=n,this.canonical=new Cp(h,+g,+y),this.key=fh(n,e,h,g,y)}clone(){return new br(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-e;return e>this.canonical.z?new br(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new br(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,n){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-e;return e>this.canonical.z?fh(this.wrap*+n,e,this.canonical.z,this.canonical.x,this.canonical.y):fh(this.wrap*+n,e,e,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(e){if(e.wrap!==this.wrap||this.overscaledZ-e.overscaledZ<=0)return!1;if(e.overscaledZ===0)return this.overscaledZ>0;const n=this.canonical.z-e.canonical.z;return!(n<0)&&e.canonical.x===this.canonical.x>>n&&e.canonical.y===this.canonical.y>>n}children(e){if(this.overscaledZ>=e)return[new br(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new br(n,this.wrap,n,h,g),new br(n,this.wrap,n,h+1,g),new br(n,this.wrap,n,h,g+1),new br(n,this.wrap,n,h+1,g+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new br(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new br(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new V_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new bd(e.x-this.wrap,e.y))}}function fh(a,e,n,h,g){(a*=2)<0&&(a=-1*a-1);const y=1<<n;return(y*y*a+y*g+h).toString(36)+n.toString(36)+e.toString(36)}function Lp(a,e){return e?a.properties[e]:a.id}function b1(a,e){const n={id:a.id};if(e.removeAllProperties&&(delete a.removeProperties,delete a.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(const h of e.removeProperties){const g=a.addOrUpdateProperties.findIndex((y=>y.key===h));g>-1&&a.addOrUpdateProperties.splice(g,1)}return(a.removeAllProperties||e.removeAllProperties)&&(n.removeAllProperties=!0),(a.removeProperties||e.removeProperties)&&(n.removeProperties=[...a.removeProperties||[],...e.removeProperties||[]]),(a.addOrUpdateProperties||e.addOrUpdateProperties)&&(n.addOrUpdateProperties=[...a.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(a.newGeometry||e.newGeometry)&&(n.newGeometry=e.newGeometry||a.newGeometry),n}function N_(a){var e,n;if(!a)return{};const h={};return h.removeAll=a.removeAll,h.remove=new Set(a.remove||[]),h.add=new Map((e=a.add)===null||e===void 0?void 0:e.map((g=>[g.id,g]))),h.update=new Map((n=a.update)===null||n===void 0?void 0:n.map((g=>[g.id,g]))),h}ct("CanonicalTileID",Cp),ct("OverscaledTileID",br,{omit:["terrainRttPosMatrix32f"]});class Xl{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const n=new Xl;return n.extend(e(new S(this.minX,this.minY))),n.extend(e(new S(this.maxX,this.minY))),n.extend(e(new S(this.minX,this.maxY))),n.extend(e(new S(this.maxX,this.maxY))),n}static fromPoints(e){const n=new Xl;for(const h of e)n.extend(h);return n}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class U_{constructor(e){this._stringToNumber={},this._numberToString=[];for(let n=0;n<e.length;n++){const h=e[n];this._stringToNumber[h]=n,this._numberToString[n]=h}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class G_{constructor(e,n,h,g,y){this.type="Feature",this._vectorTileFeature=e,this._x=h,this._y=g,this._z=n,this.properties=e.properties,this.id=y}projectPoint(e,n,h,g){return[360*(e.x+n)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+h)/g)*Math.PI))-90]}projectLine(e,n,h,g){return e.map((y=>this.projectPoint(y,n,h,g)))}get geometry(){if(this._geometry)return this._geometry;const e=this._vectorTileFeature,n=e.extent*Math.pow(2,this._z),h=e.extent*this._x,g=e.extent*this._y,y=e.loadGeometry();switch(e.type){case 1:{const v=[];for(const P of y)v.push(P[0]);const k=this.projectLine(v,h,g,n);this._geometry=v.length===1?{type:"Point",coordinates:k[0]}:{type:"MultiPoint",coordinates:k};break}case 2:{const v=y.map((k=>this.projectLine(k,h,g,n)));this._geometry=v.length===1?{type:"LineString",coordinates:v[0]}:{type:"MultiLineString",coordinates:v};break}case 3:{const v=r_(y),k=[];for(const P of v)k.push(P.map((A=>this.projectLine(A,h,g,n))));this._geometry=k.length===1?{type:"Polygon",coordinates:k[0]}:{type:"MultiPolygon",coordinates:k};break}default:throw new Error(`unknown feature type: ${e.type}`)}return this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&n!=="_x"&&n!=="_y"&&n!=="_z"&&(e[n]=this[n]);return e}}class ph{_name;dataBuffer;nullabilityBuffer;_size;constructor(e,n,h){this._name=e,this.dataBuffer=n,typeof h=="number"?this._size=h:(this.nullabilityBuffer=h,this._size=h.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class $c extends ph{}class Ep extends $c{getValueFromBuffer(e){return this.dataBuffer[e]}}class Ap extends $c{getValueFromBuffer(e){return this.dataBuffer[e]}}class q_ extends ph{delta;constructor(e,n,h,g){super(e,n,g),this.delta=h}}class Ip extends q_{constructor(e,n,h,g){super(e,Int32Array.of(n),h,g)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class Dp extends ph{constructor(e,n,h){super(e,Int32Array.of(n),h)}getValueFromBuffer(e){return this.dataBuffer[0]}}class w1{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(e,n,h,g,y=4096){this._name=e,this._geometryVector=n,this._idVector=h,this._propertyVectors=g,this._extent=y}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((n=>[n.name,n])))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){const e=this.geometryVector[Symbol.iterator]();let n=0;for(;n<this.numFeatures;){let h;this.idVector&&(h=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(n)):this.idVector.getValue(n));const g=e?.next().value,y={};for(const v of this.propertyVectors){if(!v)continue;const k=v.name,P=v.getValue(n);P!==null&&(y[k]=P)}n++,yield{id:h,geometry:g,properties:y}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const e=[],n=this.geometryVector.getGeometries();for(let h=0;h<this.numFeatures;h++){let g;this.idVector&&(g=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(h)):this.idVector.getValue(h));const y={coordinates:n[h],type:this.geometryVector.geometryType(h)},v={};for(const k of this.propertyVectors){if(!k)continue;const P=k.name,A=k.getValue(h);A!==null&&(v[P]=A)}e.push({id:g,geometry:y,properties:v})}return e}containsMaxSaveIntegerValues(e){return e instanceof Ep||e instanceof Dp&&e instanceof Ip||e instanceof Ap}}class k1{value;constructor(e){this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var Xt,So,ia,os,Jl,Ja,Fn,On,Z_,wr;function Wn(a,e,n){const h=new Int32Array(n);let g=0,y=e.get();for(let v=0;v<h.length;v++){let k=a[y++],P=127&k;k<128||(k=a[y++],P|=(127&k)<<7,k<128||(k=a[y++],P|=(127&k)<<14,k<128||(k=a[y++],P|=(127&k)<<21,k<128||(k=a[y++],P|=(15&k)<<28)))),h[g++]=P}return e.set(y),h}function Vc(a,e,n){const h=new BigInt64Array(n);for(let g=0;g<h.length;g++)h[g]=T1(a,e);return h}function S1(a,e){let n,h;return h=a[e.get()],e.increment(),n=127&h,h<128?n:(h=a[e.get()],e.increment(),n|=(127&h)<<7,h<128?n:(h=a[e.get()],e.increment(),n|=(127&h)<<14,h<128?n:(h=a[e.get()],e.increment(),n|=(127&h)<<21,h<128?n:(h=a[e.get()],n|=(15&h)<<28,(function(g,y,v){let k,P;if(P=y[v.get()],v.increment(),k=(112&P)>>4,P<128||(P=y[v.get()],v.increment(),k|=(127&P)<<3,P<128)||(P=y[v.get()],v.increment(),k|=(127&P)<<10,P<128)||(P=y[v.get()],v.increment(),k|=(127&P)<<17,P<128)||(P=y[v.get()],v.increment(),k|=(127&P)<<24,P<128)||(P=y[v.get()],v.increment(),k|=(1&P)<<31,P<128))return 4294967296*k+(g>>>0);throw new Error("Expected varint not more than 10 bytes")})(n,a,e)))))}function W_(a,e,n,h){throw new Error("FastPFor is not implemented yet.")}function Ql(a){return a>>>1^-(1&a)}function mh(a){return a>>1n^-(1n&a)}function T1(a,e){let n=0n,h=0,g=e.get();for(;g<a.length;){const y=a[g++];if(n|=BigInt(127&y)<<BigInt(h),!(128&y))break;if(h+=7,h>=64)throw new Error("Varint too long")}return e.set(g),n}function H_(a,e,n){const h=new Int32Array(n);let g=0;for(let y=0;y<e;y++){const v=a[y];h.fill(a[y+e],g,g+v),g+=v}return h}function K_(a,e,n){const h=new BigInt64Array(n);let g=0;for(let y=0;y<e;y++){const v=Number(a[y]);h.fill(a[y+e],g,g+v),g+=v}return h}function Y_(a,e,n){const h=new Float64Array(n);let g=0;for(let y=0;y<e;y++){const v=a[y];h.fill(a[y+e],g,g+v),g+=v}return h}function zp(a){const e=a.length/4*4;let n=1;if(e>=4)for(let h=a[0];n<e-4;n+=4)h=a[n]+=h,h=a[n+1]+=h,h=a[n+2]+=h,h=a[n+3]+=h;for(;n!=a.length;)a[n]+=a[n-1],++n}function X_(a){a[0]=a[0]>>>1^-(1&a[0]),a[1]=a[1]>>>1^-(1&a[1]);const e=a.length/4*4;let n=2;if(e>=4)for(;n<e-4;n+=4){const h=a[n],g=a[n+1],y=a[n+2],v=a[n+3];a[n]=(h>>>1^-(1&h))+a[n-2],a[n+1]=(g>>>1^-(1&g))+a[n-1],a[n+2]=(y>>>1^-(1&y))+a[n],a[n+3]=(v>>>1^-(1&v))+a[n+1]}for(;n!=a.length;n+=2)a[n]=(a[n]>>>1^-(1&a[n]))+a[n-2],a[n+1]=(a[n+1]>>>1^-(1&a[n+1]))+a[n-1]}(function(a){a.NONE="NONE",a.DELTA="DELTA",a.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",a.RLE="RLE",a.MORTON="MORTON",a.PDE="PDE"})(Xt||(Xt={})),(function(a){a.NONE="NONE",a.FAST_PFOR="FAST_PFOR",a.VARINT="VARINT",a.ALP="ALP"})(So||(So={})),(function(a){a.PRESENT="PRESENT",a.DATA="DATA",a.OFFSET="OFFSET",a.LENGTH="LENGTH"})(ia||(ia={}));class Rp{_dictionaryType;_offsetType;_lengthType;constructor(e,n,h){this._dictionaryType=e,this._offsetType=n,this._lengthType=h}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function ba(a,e){const n=(function(h,g){const y=h[g.get()],v=Object.values(ia)[y>>4];let k=null;switch(v){case ia.DATA:k=new Rp(Object.values(os)[15&y]);break;case ia.OFFSET:k=new Rp(null,Object.values(Jl)[15&y]);break;case ia.LENGTH:k=new Rp(null,null,Object.values(Ja)[15&y])}g.increment();const P=h[g.get()],A=Object.values(Xt)[P>>5],z=Object.values(Xt)[P>>2&7],O=Object.values(So)[3&P];g.increment();const $=Wn(h,g,2),N=$[0];return{physicalStreamType:v,logicalStreamType:k,logicalLevelTechnique1:A,logicalLevelTechnique2:z,physicalLevelTechnique:O,numValues:N,byteLength:$[1],decompressedCount:N}})(a,e);return n.logicalLevelTechnique1===Xt.MORTON?(function(h,g,y){const v=Wn(g,y,2);return{physicalStreamType:h.physicalStreamType,logicalStreamType:h.logicalStreamType,logicalLevelTechnique1:h.logicalLevelTechnique1,logicalLevelTechnique2:h.logicalLevelTechnique2,physicalLevelTechnique:h.physicalLevelTechnique,numValues:h.numValues,byteLength:h.byteLength,decompressedCount:h.decompressedCount,numBits:v[0],coordinateShift:v[1]}})(n,a,e):Xt.RLE!==n.logicalLevelTechnique1&&Xt.RLE!==n.logicalLevelTechnique2||So.NONE===n.physicalLevelTechnique?n:(function(h,g,y){const v=Wn(g,y,2);return{physicalStreamType:h.physicalStreamType,logicalStreamType:h.logicalStreamType,logicalLevelTechnique1:h.logicalLevelTechnique1,logicalLevelTechnique2:h.logicalLevelTechnique2,physicalLevelTechnique:h.physicalLevelTechnique,numValues:h.numValues,byteLength:h.byteLength,decompressedCount:v[1],runs:v[0],numRleValues:v[1]}})(n,a,e)}(function(a){a.NONE="NONE",a.SINGLE="SINGLE",a.SHARED="SHARED",a.VERTEX="VERTEX",a.MORTON="MORTON",a.FSST="FSST"})(os||(os={})),(function(a){a.VERTEX="VERTEX",a.INDEX="INDEX",a.STRING="STRING",a.KEY="KEY"})(Jl||(Jl={})),(function(a){a.VAR_BINARY="VAR_BINARY",a.GEOMETRIES="GEOMETRIES",a.PARTS="PARTS",a.RINGS="RINGS",a.TRIANGLES="TRIANGLES",a.SYMBOL="SYMBOL",a.DICTIONARY="DICTIONARY"})(Ja||(Ja={})),(function(a){a[a.FLAT=0]="FLAT",a[a.CONST=1]="CONST",a[a.SEQUENCE=2]="SEQUENCE",a[a.DICTIONARY=3]="DICTIONARY",a[a.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Fn||(Fn={}));class ls{values;_size;constructor(e,n){this.values=e,this._size=n}get(e){const n=Math.floor(e/8);return(this.values[n]>>e%8&1)==1}set(e,n){const h=Math.floor(e/8);this.values[h]=this.values[h]|(n?1:0)<<e%8}getInt(e){const n=Math.floor(e/8);return this.values[n]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}function wa(a,e,n,h,g){return(function(y,v,k){switch(v.logicalLevelTechnique1){case Xt.DELTA:return v.logicalLevelTechnique2===Xt.RLE?(function(P,A,z){const O=new Int32Array(z);let $=0,N=0;for(let Z=0;Z<A;Z++){const W=P[Z],Y=Ql(P[Z+A]);for(let te=0;te<W;te++)N+=Y,O[$++]=N}return O})(y,v.runs,v.numRleValues):((function(P){P[0]=P[0]>>>1^-(1&P[0]);const A=P.length/4*4;let z=1;if(A>=4)for(;z<A-4;z+=4){const O=P[z],$=P[z+1],N=P[z+2],Z=P[z+3];P[z]=(O>>>1^-(1&O))+P[z-1],P[z+1]=($>>>1^-(1&$))+P[z],P[z+2]=(N>>>1^-(1&N))+P[z+1],P[z+3]=(Z>>>1^-(1&Z))+P[z+2]}for(;z!=P.length;++z)P[z]=(P[z]>>>1^-(1&P[z]))+P[z-1]})(y),y);case Xt.RLE:return(function(P,A,z){return z?(function(O,$,N){const Z=new Int32Array(N);let W=0;for(let Y=0;Y<$;Y++){const te=O[Y];let ce=O[Y+$];ce=ce>>>1^-(1&ce),Z.fill(ce,W,W+te),W+=te}return Z})(P,A.runs,A.numRleValues):H_(P,A.runs,A.numRleValues)})(y,v,k);case Xt.MORTON:return zp(y),y;case Xt.COMPONENTWISE_DELTA:return X_(y),y;case Xt.NONE:return k&&(function(P){for(let A=0;A<P.length;A++){const z=P[A];P[A]=z>>>1^-(1&z)}})(y),y;default:throw new Error(`The specified Logical level technique is not supported: ${v.logicalLevelTechnique1}`)}})(Nc(a,e,n),n,h)}function ll(a,e,n){return(function(h,g){if(g.logicalLevelTechnique1===Xt.DELTA&&g.logicalLevelTechnique2===Xt.NONE)return(function(v){const k=new Int32Array(v.length+1);k[0]=0,k[1]=Ql(v[0]);let P=k[1],A=2;for(;A!=k.length;++A){const z=v[A-1];P+=z>>>1^-(1&z),k[A]=k[A-1]+P}return k})(h);if(g.logicalLevelTechnique1===Xt.RLE&&g.logicalLevelTechnique2===Xt.NONE)return(function(v,k,P){const A=new Int32Array(P+1);A[0]=0;let z=1,O=A[0];for(let $=0;$<k;$++){const N=v[$],Z=v[$+k];for(let W=z;W<z+N;W++)A[W]=Z+O,O=A[W];z+=N}return A})(h,g.runs,g.numRleValues);if(g.logicalLevelTechnique1===Xt.NONE&&g.logicalLevelTechnique2===Xt.NONE){(function(v){let k=0;for(let P=0;P<v.length;P++)v[P]+=k,k=v[P]})(h);const y=new Int32Array(g.numValues+1);return y[0]=0,y.set(h,1),y}if(g.logicalLevelTechnique1===Xt.DELTA&&g.logicalLevelTechnique2===Xt.RLE){const y=(function(v,k,P){const A=new Int32Array(P+1);A[0]=0;let z=1,O=A[0];for(let $=0;$<k;$++){const N=v[$];let Z=v[$+k];Z=Z>>>1^-(1&Z);for(let W=z;W<z+N;W++)A[W]=Z+O,O=A[W];z+=N}return A})(h,g.runs,g.numRleValues);return zp(y),y}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Nc(a,e,n),n)}function Nc(a,e,n){const h=n.physicalLevelTechnique;if(h===So.FAST_PFOR)return W_();if(h===So.VARINT)return Wn(a,e,n.numValues);if(h===So.NONE){const g=e.get();e.add(n.byteLength);const y=a.subarray(g,e.get());return new Int32Array(y)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Fp(a,e,n,h){const g=Nc(a,e,n);if(g.length===1){const y=g[0];return h?Ql(y):y}return h?(function(y){return Ql(y[1])})(g):(function(y){return y[1]})(g)}function J_(a,e,n){return(function(h){if(h.length==2){const g=Ql(h[1]);return[g,g]}return[Ql(h[2]),Ql(h[3])]})(Nc(a,e,n))}function Q_(a,e,n){return(function(h){if(h.length==2){const g=mh(h[1]);return[g,g]}return[mh(h[2]),mh(h[3])]})(Vc(a,e,n.numValues))}function ey(a,e,n,h){return(function(g,y,v){switch(y.logicalLevelTechnique1){case Xt.DELTA:return y.logicalLevelTechnique2===Xt.RLE?(function(k,P,A){const z=new BigInt64Array(A);let O=0,$=0n;for(let N=0;N<P;N++){const Z=Number(k[N]),W=mh(k[N+P]);for(let Y=0;Y<Z;Y++)$+=W,z[O++]=$}return z})(g,y.runs,y.numRleValues):((function(k){k[0]=k[0]>>1n^-(1n&k[0]);const P=k.length/4*4;let A=1;if(P>=4)for(;A<P-4;A+=4){const z=k[A],O=k[A+1],$=k[A+2],N=k[A+3];k[A]=(z>>1n^-(1n&z))+k[A-1],k[A+1]=(O>>1n^-(1n&O))+k[A],k[A+2]=($>>1n^-(1n&$))+k[A+1],k[A+3]=(N>>1n^-(1n&N))+k[A+2]}for(;A!=k.length;++A)k[A]=(k[A]>>1n^-(1n&k[A]))+k[A-1]})(g),g);case Xt.RLE:return(function(k,P,A){return A?(function(z,O,$){const N=new BigInt64Array($);let Z=0;for(let W=0;W<O;W++){const Y=Number(z[W]);let te=z[W+O];te=te>>1n^-(1n&te),N.fill(te,Z,Z+Y),Z+=Y}return N})(k,P.runs,P.numRleValues):K_(k,P.runs,P.numRleValues)})(g,y,v);case Xt.NONE:return v&&(function(k){for(let P=0;P<k.length;P++){const A=k[P];k[P]=A>>1n^-(1n&A)}})(g),g;default:throw new Error(`The specified Logical level technique is not supported: ${y.logicalLevelTechnique1}`)}})(Vc(a,e,n.numValues),n,h)}function ty(a,e,n,h){const g=Vc(a,e,n.numValues);if(g.length===1){const y=g[0];return h?mh(y):y}return h?(function(y){return mh(y[1])})(g):(function(y){return y[1]})(g)}function Op(a,e,n,h,g){return(function(y,v,k,P){switch(v.logicalLevelTechnique1){case Xt.DELTA:return v.logicalLevelTechnique2===Xt.RLE&&(y=H_(y,v.runs,v.numRleValues)),(function(A,z){const O=new Int32Array(A.size());let $=0;A.get(0)?(O[0]=A.get(0)?z[0]>>>1^-(1&z[0]):0,$=1):O[0]=0;let N=1;for(;N!=O.length;++N)O[N]=A.get(N)?O[N-1]+(z[$]>>>1^-(1&z[$++])):O[N-1];return O})(P,y);case Xt.RLE:return(function(A,z,O,$){const N=z;return O?(function(Z,W,Y){const te=new Int32Array(Z.size());let ce=0;for(let ne=0;ne<Y;ne++){const oe=W[ne];let pe=W[ne+Y];pe=pe>>>1^-(1&pe);for(let _e=ce;_e<ce+oe;_e++)Z.get(_e)?te[_e]=pe:(te[_e]=0,ce++);ce+=oe}return te})($,A,N.runs):(function(Z,W,Y){const te=new Int32Array(Z.size());let ce=0;for(let ne=0;ne<Y;ne++){const oe=W[ne],pe=W[ne+Y];for(let _e=ce;_e<ce+oe;_e++)Z.get(_e)?te[_e]=pe:(te[_e]=0,ce++);ce+=oe}return te})($,A,N.runs)})(y,v,k,P);case Xt.MORTON:return zp(y),y;case Xt.COMPONENTWISE_DELTA:return X_(y),y;case Xt.NONE:return y=k?(function(A,z){const O=new Int32Array(A.size());let $=0,N=0;for(;N!=O.length;++N)if(A.get(N)){const Z=z[$++];O[N]=Z>>>1^-(1&Z)}else O[N]=0;return O})(P,y):(function(A,z){const O=new Int32Array(A.size());let $=0,N=0;for(;N!=O.length;++N)O[N]=A.get(N)?z[$++]:0;return O})(P,y),y;default:throw new Error("The specified Logical level technique is not supported")}})(n.physicalLevelTechnique===So.FAST_PFOR?W_():Wn(a,e,n.numValues),n,h,g)}function Uc(a,e,n,h){const g=a.logicalLevelTechnique1;if(g===Xt.RLE)return a.runs===1?Fn.CONST:Fn.FLAT;const y=e instanceof ls?e.size():e;if(g===Xt.DELTA&&a.logicalLevelTechnique2===Xt.RLE){const v=a.runs,k=2;if(a.numRleValues!==y)return Fn.FLAT;if(v===1)return Fn.SEQUENCE;if(v===2){const P=h.get();let A;if(a.physicalLevelTechnique===So.VARINT)A=Wn(n,h,4);else{const z=h.get();A=new Int32Array(n.buffer,n.byteOffset+z,4)}if(h.set(P),A[2]===k&&A[3]===k)return Fn.SEQUENCE}}return a.numValues===1?Fn.CONST:Fn.FLAT}class iy extends $c{getValueFromBuffer(e){return this.dataBuffer[e]}}class ny extends q_{constructor(e,n,h,g){super(e,BigInt64Array.of(n),h,g)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class gh{_geometryOffsets;_partOffsets;_ringOffsets;constructor(e,n,h){this._geometryOffsets=e,this._partOffsets=n,this._ringOffsets=h}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function jp(a,e,n){return{x:ay(a,e)-n,y:ay(a>>1,e)-n}}function ay(a,e){let n=0;for(let h=0;h<e;h++)n|=(a&1<<2*h)>>h;return n}(function(a){a[a.POINT=0]="POINT",a[a.LINESTRING=1]="LINESTRING",a[a.POLYGON=2]="POLYGON",a[a.MULTIPOINT=3]="MULTIPOINT",a[a.MULTILINESTRING=4]="MULTILINESTRING",a[a.MULTIPOLYGON=5]="MULTIPOLYGON"})(On||(On={})),(function(a){a[a.POINT=0]="POINT",a[a.LINESTRING=1]="LINESTRING",a[a.POLYGON=2]="POLYGON"})(Z_||(Z_={})),(function(a){a[a.MORTON=0]="MORTON",a[a.VEC_2=1]="VEC_2",a[a.VEC_3=2]="VEC_3"})(wr||(wr={}));class P1{createPoint(e){return[[e]]}createMultiPoint(e){return e.map((n=>[n]))}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,n){return[e].concat(n)}createMultiPolygon(e){return e.flat()}}function ry(a){const e=new Array(a.numGeometries);let n=1,h=1,g=1,y=0;const v=new P1;let k=0,P=0;const A=a.mortonSettings,z=a.topologyVector,O=z.geometryOffsets,$=z.partOffsets,N=z.ringOffsets,Z=a.vertexOffsets,W=a.containsPolygonGeometry(),Y=a.vertexBuffer;for(let te=0;te<a.numGeometries;te++){const ce=a.geometryType(te);if(ce===On.POINT){if(Z&&Z.length!==0)if(a.vertexBufferType===wr.VEC_2){const ne=2*Z[P++],oe=new S(Y[ne],Y[ne+1]);e[y++]=v.createPoint(oe)}else{const ne=jp(Y[Z[P++]],A.numBits,A.coordinateShift),oe=new S(ne.x,ne.y);e[y++]=v.createPoint(oe)}else{const ne=new S(Y[k++],Y[k++]);e[y++]=v.createPoint(ne)}O&&g++,$&&n++,N&&h++}else if(ce===On.MULTIPOINT){const ne=O[g]-O[g-1];g++;const oe=new Array(ne);if(Z&&Z.length!==0){for(let pe=0;pe<ne;pe++){const _e=2*Z[P++];oe[pe]=new S(Y[_e],Y[_e+1])}e[y++]=v.createMultiPoint(oe)}else{for(let pe=0;pe<ne;pe++){const _e=Y[k++],Ee=Y[k++];oe[pe]=new S(_e,Ee)}e[y++]=v.createMultiPoint(oe)}}else if(ce===On.LINESTRING){let ne,oe=0;W?(oe=N[h]-N[h-1],h++):oe=$[n]-$[n-1],n++,Z&&Z.length!==0?(ne=a.vertexBufferType===wr.VEC_2?$p(Y,Z,P,oe,!1):Vp(Y,Z,P,oe,!1,A),P+=oe):(ne=Bp(Y,k,oe,!1),k+=2*oe),e[y++]=v.createLineString(ne),O&&g++}else if(ce===On.POLYGON){const ne=$[n]-$[n-1];n++;const oe=new Array(ne-1);let pe=N[h]-N[h-1];if(h++,Z&&Z.length!==0){const _e=a.vertexBufferType===wr.VEC_2?qc(Y,Z,P,pe):Zc(Y,Z,P,pe,0,A);P+=pe;for(let Ee=0;Ee<oe.length;Ee++)pe=N[h]-N[h-1],h++,oe[Ee]=a.vertexBufferType===wr.VEC_2?qc(Y,Z,P,pe):Zc(Y,Z,P,pe,0,A),P+=pe;e[y++]=v.createPolygon(_e,oe)}else{const _e=Gc(Y,k,pe);k+=2*pe;for(let Ee=0;Ee<oe.length;Ee++)pe=N[h]-N[h-1],h++,oe[Ee]=Gc(Y,k,pe),k+=2*pe;e[y++]=v.createPolygon(_e,oe)}O&&g++}else if(ce===On.MULTILINESTRING){const ne=O[g]-O[g-1];g++;const oe=new Array(ne);if(Z&&Z.length!==0){for(let pe=0;pe<ne;pe++){let _e=0;W?(_e=N[h]-N[h-1],h++):_e=$[n]-$[n-1],n++;const Ee=a.vertexBufferType===wr.VEC_2?$p(Y,Z,P,_e,!1):Vp(Y,Z,P,_e,!1,A);oe[pe]=Ee,P+=_e}e[y++]=v.createMultiLineString(oe)}else{for(let pe=0;pe<ne;pe++){let _e=0;W?(_e=N[h]-N[h-1],h++):_e=$[n]-$[n-1],n++,oe[pe]=Bp(Y,k,_e,!1),k+=2*_e}e[y++]=v.createMultiLineString(oe)}}else{if(ce!==On.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const ne=O[g]-O[g-1];g++;const oe=new Array(ne);let pe=0;if(Z&&Z.length!==0){for(let _e=0;_e<ne;_e++){const Ee=$[n]-$[n-1];n++;const We=new Array(Ee-1);pe=N[h]-N[h-1],h++;const Ge=a.vertexBufferType===wr.VEC_2?qc(Y,Z,P,pe):Zc(Y,Z,P,pe,0,A);P+=pe;for(let He=0;He<We.length;He++)pe=N[h]-N[h-1],h++,We[He]=a.vertexBufferType===wr.VEC_2?qc(Y,Z,P,pe):Zc(Y,Z,P,pe,0,A),P+=pe;oe[_e]=v.createPolygon(Ge,We)}e[y++]=v.createMultiPolygon(oe)}else{for(let _e=0;_e<ne;_e++){const Ee=$[n]-$[n-1];n++;const We=new Array(Ee-1);pe=N[h]-N[h-1],h++;const Ge=Gc(Y,k,pe);k+=2*pe;for(let He=0;He<We.length;He++){const at=N[h]-N[h-1];h++,We[He]=Gc(Y,k,at),k+=2*at}oe[_e]=v.createPolygon(Ge,We)}e[y++]=v.createMultiPolygon(oe)}}}}return e}function Gc(a,e,n){return Bp(a,e,n,!0)}function qc(a,e,n,h){return $p(a,e,n,h,!0)}function Zc(a,e,n,h,g,y){return Vp(a,e,n,h,!0,y)}function Bp(a,e,n,h){const g=new Array(h?n+1:n);for(let y=0;y<2*n;y+=2)g[y/2]=new S(a[e+y],a[e+y+1]);return h&&(g[g.length-1]=g[0]),g}function $p(a,e,n,h,g){const y=new Array(g?h+1:h);for(let v=0;v<2*h;v+=2){const k=2*e[n+v/2];y[v/2]=new S(a[k],a[k+1])}return g&&(y[y.length-1]=y[0]),y}function Vp(a,e,n,h,g,y){const v=new Array(g?h+1:h);for(let k=0;k<h;k++){const P=jp(a[e[n+k]],y.numBits,y.coordinateShift);v[k]=new S(P.x,P.y)}return g&&(v[v.length-1]=v[0]),v}class sy{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(e,n,h,g,y){this._vertexBufferType=e,this._topologyVector=n,this._vertexOffsets=h,this._vertexBuffer=g,this._mortonSettings=y}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const e=ry(this);let n=0;for(;n<this.numGeometries;)yield{coordinates:e[n],type:this.geometryType(n)},n++}getSimpleEncodedVertex(e){const n=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[n],this.vertexBuffer[n+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){const h=jp(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[h.x,h.y]}const n=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[n],this.vertexBuffer[n+1]]}getGeometries(){return ry(this)}get mortonSettings(){return this._mortonSettings}}class oy extends sy{_numGeometries;_geometryType;constructor(e,n,h,g,y,v,k){super(h,g,y,v,k),this._numGeometries=e,this._geometryType=n}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===On.POLYGON||this._geometryType===On.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class ly extends sy{_geometryTypes;constructor(e,n,h,g,y,v){super(e,h,g,y,v),this._geometryTypes=n}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let e=0;e<this.numGeometries;e++)if(this.geometryType(e)===On.POLYGON||this.geometryType(e)===On.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class uy{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(e,n,h,g){this._triangleOffsets=e,this._indexBuffer=n,this._vertexBuffer=h,this._topologyVector=g}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const e=new Array(this.numGeometries),n=this._topologyVector,h=n.partOffsets,g=n.ringOffsets,y=n.geometryOffsets;let v=0,k=1,P=1,A=1;for(let z=0;z<this.numGeometries;z++)switch(this.geometryType(z)){case On.POLYGON:{const O=h[k]-h[k-1];k++;const $=[];for(let N=0;N<O;N++){const Z=g[P]-g[P-1];P++;const W=[];for(let Y=0;Y<Z;Y++){const te=this._vertexBuffer[v++],ce=this._vertexBuffer[v++];W.push(new S(te,ce))}W.length>0&&W.push(W[0]),$.push(W)}e[z]=$,y&&A++}break;case On.MULTIPOLYGON:{const O=y[A]-y[A-1];A++;const $=[];for(let N=0;N<O;N++){const Z=h[k]-h[k-1];k++;for(let W=0;W<Z;W++){const Y=g[P]-g[P-1];P++;const te=[];for(let ce=0;ce<Y;ce++){const ne=this._vertexBuffer[v++],oe=this._vertexBuffer[v++];te.push(new S(ne,oe))}te.length>0&&te.push(te[0]),$.push(te)}}e[z]=$}}return e}[Symbol.iterator](){return null}}function hy(a,e,n,h,g,y){return new M1(a,e,n,h,g,y)}class M1 extends uy{_numGeometries;_geometryType;constructor(e,n,h,g,y,v){super(h,g,y,v),this._numGeometries=e,this._geometryType=n}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function dy(a,e,n,h,g){return new C1(a,e,n,h,g)}class C1 extends uy{_geometryTypes;constructor(e,n,h,g,y){super(n,h,g,y),this._geometryTypes=e}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function L1(a,e,n,h,g){const y=ba(a,n);let v=null,k=null,P=null,A=null,z=null,O=null,$=null,N=null;if(Uc(y,h,a,n)===Fn.CONST){const W=Fp(a,n,y,!1);for(let Y=0;Y<e-1;Y++){const te=ba(a,n);switch(te.physicalStreamType){case ia.LENGTH:switch(te.logicalStreamType.lengthType){case Ja.GEOMETRIES:v=ll(a,n,te);break;case Ja.PARTS:k=ll(a,n,te);break;case Ja.RINGS:P=ll(a,n,te);break;case Ja.TRIANGLES:$=ll(a,n,te)}break;case ia.OFFSET:switch(te.logicalStreamType.offsetType){case Jl.VERTEX:A=wa(a,n,te,!1);break;case Jl.INDEX:N=wa(a,n,te,!1)}break;case ia.DATA:os.VERTEX===te.logicalStreamType.dictionaryType?z=wa(a,n,te,!0):(O={numBits:te.numBits,coordinateShift:te.coordinateShift},z=wa(a,n,te,!1))}}return N!==null?v!=null||k!=null?hy(h,W,$,N,z,new gh(v,k,P)):hy(h,W,$,N,z):O===null?(function(Y,te,ce,ne,oe){return new oy(Y,te,wr.VEC_2,ce,ne,oe)})(h,W,new gh(v,k,P),A,z):(function(Y,te,ce,ne,oe,pe){return new oy(Y,te,wr.MORTON,ce,ne,oe,pe)})(h,W,new gh(v,k,P),A,z,O)}const Z=wa(a,n,y,!1);for(let W=0;W<e-1;W++){const Y=ba(a,n);switch(Y.physicalStreamType){case ia.LENGTH:switch(Y.logicalStreamType.lengthType){case Ja.GEOMETRIES:v=wa(a,n,Y,!1);break;case Ja.PARTS:k=wa(a,n,Y,!1);break;case Ja.RINGS:P=wa(a,n,Y,!1);break;case Ja.TRIANGLES:$=ll(a,n,Y)}break;case ia.OFFSET:switch(Y.logicalStreamType.offsetType){case Jl.VERTEX:A=wa(a,n,Y,!1);break;case Jl.INDEX:N=wa(a,n,Y,!1)}break;case ia.DATA:os.VERTEX===Y.logicalStreamType.dictionaryType?z=wa(a,n,Y,!0):(O={numBits:Y.numBits,coordinateShift:Y.coordinateShift},z=wa(a,n,Y,!1))}}return N!==null&&k===null?dy(Z,$,N,z):(v!==null?(v=Np(Z,v,2),k!==null&&P!==null?(k=cy(Z,v,k,!1),P=(function(W,Y,te,ce){const ne=new Int32Array(te[te.length-1]+1);let oe=0;ne[0]=oe;let pe=1,_e=1,Ee=0;for(let We=0;We<W.length;We++){const Ge=W[We],He=Y[We+1]-Y[We];if(Ge!==0&&Ge!==3)for(let at=0;at<He;at++){const Xe=te[pe]-te[pe-1];pe++;for(let qe=0;qe<Xe;qe++)oe=ne[_e++]=oe+ce[Ee++]}else for(let at=0;at<He;at++)ne[_e++]=++oe,pe++}return ne})(Z,v,k,P)):k!==null&&(k=(function(W,Y,te){const ce=new Int32Array(Y[Y.length-1]+1);let ne=0;ce[0]=ne;let oe=1,pe=0;for(let _e=0;_e<W.length;_e++){const Ee=W[_e],We=Y[_e+1]-Y[_e];if(Ee===4||Ee===1)for(let Ge=0;Ge<We;Ge++)ne=ce[oe++]=ne+te[pe++];else for(let Ge=0;Ge<We;Ge++)ce[oe++]=++ne}return ce})(Z,v,k))):k!==null&&P!==null?(k=Np(Z,k,1),P=cy(Z,k,P,!0)):k!==null&&(k=Np(Z,k,0)),N!==null?dy(Z,$,N,z,new gh(v,k,P)):O===null?(function(W,Y,te,ce){return new ly(wr.VEC_2,W,Y,te,ce)})(Z,new gh(v,k,P),A,z):(function(W,Y,te,ce,ne){return new ly(wr.MORTON,W,Y,te,ce,ne)})(Z,new gh(v,k,P),A,z,O))}function Np(a,e,n){const h=new Int32Array(a.length+1);let g=0;h[0]=g;let y=0;for(let v=0;v<a.length;v++)g=h[v+1]=g+(a[v]>n?e[y++]:1);return h}function cy(a,e,n,h){const g=new Int32Array(e[e.length-1]+1);let y=0;g[0]=y;let v=1,k=0;for(let P=0;P<a.length;P++){const A=a[P],z=e[P+1]-e[P];if(A===5||A===2||h&&(A===4||A===1))for(let O=0;O<z;O++)y=g[v++]=y+n[k++];else for(let O=0;O<z;O++)g[v++]=++y}return g}class E1 extends ph{dataVector;constructor(e,n,h){super(e,n.getBuffer(),h),this.dataVector=n}getValueFromBuffer(e){return this.dataVector.get(e)}}class A1 extends $c{getValueFromBuffer(e){return this.dataBuffer[e]}}class fy extends ph{constructor(e,n,h){super(e,BigInt64Array.of(n),h)}getValueFromBuffer(e){return this.dataBuffer[0]}}function wd(a,e,n){return py(a,Math.ceil(e/8),n)}function py(a,e,n){const h=new Uint8Array(e);let g=0;for(;g<e;){const y=a[n.increment()];if(y<=127){const v=y+3,k=a[n.increment()],P=g+v;h.fill(k,g,P),g=P}else{const v=256-y;for(let k=0;k<v;k++)h[g++]=a[n.increment()]}}return h}const I1=new TextDecoder;function Up(a,e,n){return n-e>=12?I1.decode(a.subarray(e,n)):(function(h,g,y){let v="",k=g;for(;k<y;){const P=h[k];let A,z,O,$=null,N=P>239?4:P>223?3:P>191?2:1;if(k+N>y)break;N===1?P<128&&($=P):N===2?(A=h[k+1],(192&A)==128&&($=(31&P)<<6|63&A,$<=127&&($=null))):N===3?(A=h[k+1],z=h[k+2],(192&A)==128&&(192&z)==128&&($=(15&P)<<12|(63&A)<<6|63&z,($<=2047||$>=55296&&$<=57343)&&($=null))):N===4&&(A=h[k+1],z=h[k+2],O=h[k+3],(192&A)==128&&(192&z)==128&&(192&O)==128&&($=(15&P)<<18|(63&A)<<12|(63&z)<<6|63&O,($<=65535||$>=1114112)&&($=null))),$===null?($=65533,N=1):$>65535&&($-=65536,v+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),v+=String.fromCharCode($),k+=N}return v})(a,e,n)}class Gp extends ph{offsetBuffer;constructor(e,n,h,g){super(e,h,g),this.offsetBuffer=n}}class my extends Gp{textEncoder;constructor(e,n,h,g){super(e,n,h,g??n.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(e){return Up(this.dataBuffer,this.offsetBuffer[e],this.offsetBuffer[e+1])}}class _h extends Gp{indexBuffer;textEncoder;constructor(e,n,h,g,y){super(e,h,g,y??n.length),this.indexBuffer=n,this.indexBuffer=n,this.textEncoder=new TextEncoder}getValueFromBuffer(e){const n=this.indexBuffer[e];return Up(this.dataBuffer,this.offsetBuffer[n],this.offsetBuffer[n+1])}}class gy extends Gp{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(e,n,h,g,y,v,k){super(e,h,g,k),this.indexBuffer=n,this.symbolOffsetBuffer=y,this.symbolTableBuffer=v,this.textEncoder=new TextEncoder}getValueFromBuffer(e){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(h,g,y){const v=[],k=new Array(g.length).fill(0);for(let P=1;P<g.length;P++)k[P]=k[P-1]+g[P-1];for(let P=0;P<y.length;P++)if(y[P]===255)v.push(y[++P]);else{const A=g[y[P]],z=k[y[P]];for(let O=0;O<A;O++)v.push(h[z+O])}return new Uint8Array(v)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const n=this.indexBuffer[e];return Up(this.decodedDictionary,this.offsetBuffer[n],this.offsetBuffer[n+1])}offsetToLengthBuffer(e){const n=new Uint32Array(e.length-1);let h=e[0];for(let g=1;g<e.length;g++){const y=e[g];n[g-1]=y-h,h=y}return n}}function D1(a,e,n,h,g,y){return n.type==="scalarType"?(function(v,k,P,A,z,O){let $=null,N=0;if(v===0)return null;if(O.nullable){const W=ba(k,P);N=W.numValues;const Y=P.get(),te=wd(k,N,P);P.set(Y+W.byteLength),$=new ls(te,W.numValues)}const Z=$??A;switch(z.physicalType){case 4:case 3:return(function(W,Y,te,ce,ne){const oe=ba(W,Y),pe=Uc(oe,ne,W,Y),_e=ce.physicalType===3;if(pe===Fn.FLAT){const Ee=kd(ne)?Op(W,Y,oe,_e,ne):wa(W,Y,oe,_e);return new Ep(te.name,Ee,ne)}if(pe===Fn.SEQUENCE){const Ee=J_(W,Y,oe);return new Ip(te.name,Ee[0],Ee[1],oe.numRleValues)}{const Ee=Fp(W,Y,oe,_e);return new Dp(te.name,Ee,ne)}})(k,P,O,z,Z);case 9:return(function(W,Y,te,ce,ne){let oe=null,pe=null,_e=null,Ee=null,We=null,Ge=null,He=null,at=null;for(let Xe=0;Xe<ce;Xe++){const qe=ba(Y,te);if(qe.byteLength!==0)switch(qe.physicalStreamType){case ia.PRESENT:{const Be=wd(Y,qe.numValues,te);Ge=new ls(Be,qe.numValues);break}case ia.OFFSET:pe=ne!=null||Ge!=null?Op(Y,te,qe,!1,ne??Ge):wa(Y,te,qe,!1);break;case ia.LENGTH:{const Be=ll(Y,te,qe);Ja.DICTIONARY===qe.logicalStreamType.lengthType?oe=Be:Ja.SYMBOL===qe.logicalStreamType.lengthType?Ee=Be:He=Be;break}case ia.DATA:{const Be=Y.subarray(te.get(),te.get()+qe.byteLength);te.add(qe.byteLength);const ht=qe.logicalStreamType.dictionaryType;os.FSST===ht?We=Be:os.SINGLE===ht||os.SHARED===ht?_e=Be:os.NONE===ht&&(at=Be);break}}}return(function(Xe,qe,Be,ht,lt,ft,ot){return qe?new gy(Xe,Be,ht,lt,ft,qe,ot):null})(W,We,pe,oe,_e,Ee,ne??Ge)??(function(Xe,qe,Be,ht,lt){return qe?lt?new _h(Xe,Be,ht,qe,lt):new _h(Xe,Be,ht,qe):null})(W,_e,pe,oe,ne??Ge)??(function(Xe,qe,Be,ht,lt){if(!qe||!Be)return null;if(ht)return lt?new _h(Xe,ht,qe,Be,lt):new _h(Xe,ht,qe,Be);if(lt&&lt.size()!==qe.length-1){const ft=new Int32Array(lt.size());let ot=0;for(let yt=0;yt<lt.size();yt++)ft[yt]=lt.get(yt)?ot++:0;return new _h(Xe,ft,qe,Be,lt)}return lt?new my(Xe,qe,Be,lt):new my(Xe,qe,Be)})(W,He,at,pe,ne??Ge)})(O.name,k,P,O.nullable?v-1:v,$);case 0:return(function(W,Y,te,ce,ne){const oe=ba(W,Y),pe=oe.numValues,_e=Y.get(),Ee=kd(ne)?(function(Ge,He,at,Xe){const qe=py(Ge,Math.ceil(He/8),at),Be=new ls(qe,He),ht=Xe.size(),lt=new ls(new Uint8Array(ht),ht);let ft=0;for(let ot=0;ot<Xe.size();ot++){const yt=!!Xe.get(ot)&&Be.get(ft++);lt.set(ot,yt)}return lt.getBuffer()})(W,pe,Y,ne):wd(W,pe,Y);Y.set(_e+oe.byteLength);const We=new ls(Ee,pe);return new E1(te.name,We,ne)})(k,P,O,0,Z);case 6:case 5:return(function(W,Y,te,ce,ne){const oe=ba(W,Y),pe=Uc(oe,ce,W,Y),_e=ne.physicalType===5;if(pe===Fn.FLAT){const Ee=kd(ce)?(function(We,Ge,He,at,Xe){return(function(qe,Be,ht,lt){switch(Be.logicalLevelTechnique1){case Xt.DELTA:return Be.logicalLevelTechnique2===Xt.RLE&&(qe=K_(qe,Be.runs,Be.numRleValues)),(function(ft,ot){const yt=new BigInt64Array(ft.size());let ei=0;ft.get(0)?(yt[0]=ft.get(0)?ot[0]>>1n^-(1n&ot[0]):0n,ei=1):yt[0]=0n;let Zt=1;for(;Zt!=yt.length;++Zt)yt[Zt]=ft.get(Zt)?yt[Zt-1]+(ot[ei]>>1n^-(1n&ot[ei++])):yt[Zt-1];return yt})(lt,qe);case Xt.RLE:return(function(ft,ot,yt,ei){const Zt=ot;return yt?(function(Vi,aa,_n){const Ni=new BigInt64Array(Vi.size());let Ri=0;for(let hi=0;hi<_n;hi++){const en=Number(aa[hi]);let ln=aa[hi+_n];ln=ln>>1n^-(1n&ln);for(let Ei=Ri;Ei<Ri+en;Ei++)Vi.get(Ei)?Ni[Ei]=ln:(Ni[Ei]=0n,Ri++);Ri+=en}return Ni})(ei,ft,Zt.runs):(function(Vi,aa,_n){const Ni=new BigInt64Array(Vi.size());let Ri=0;for(let hi=0;hi<_n;hi++){const en=Number(aa[hi]),ln=aa[hi+_n];for(let Ei=Ri;Ei<Ri+en;Ei++)Vi.get(Ei)?Ni[Ei]=ln:(Ni[Ei]=0n,Ri++);Ri+=en}return Ni})(ei,ft,Zt.runs)})(qe,Be,ht,lt);case Xt.NONE:return qe=ht?(function(ft,ot){const yt=new BigInt64Array(ft.size());let ei=0,Zt=0;for(;Zt!=yt.length;++Zt)if(ft.get(Zt)){const Vi=ot[ei++];yt[Zt]=Vi>>1n^-(1n&Vi)}else yt[Zt]=0n;return yt})(lt,qe):(function(ft,ot){const yt=new BigInt64Array(ft.size());let ei=0,Zt=0;for(;Zt!=yt.length;++Zt)yt[Zt]=ft.get(Zt)?ot[ei++]:0n;return yt})(lt,qe),qe;default:throw new Error("The specified Logical level technique is not supported")}})(Vc(We,Ge,He.numValues),He,at,Xe)})(W,Y,oe,_e,ce):ey(W,Y,oe,_e);return new iy(te.name,Ee,ce)}if(pe===Fn.SEQUENCE){const Ee=Q_(W,Y,oe);return new ny(te.name,Ee[0],Ee[1],oe.numRleValues)}{const Ee=ty(W,Y,oe,_e);return new fy(te.name,Ee,ce)}})(k,P,O,Z,z);case 7:return(function(W,Y,te,ce){const ne=ba(W,Y),oe=kd(ce)?(function(pe,_e,Ee,We){const Ge=_e.get(),He=Ge+We*Float32Array.BYTES_PER_ELEMENT,at=new Uint8Array(pe.subarray(Ge,He)).buffer,Xe=new Float32Array(at);_e.set(He);const qe=Ee.size(),Be=new Float32Array(qe);let ht=0;for(let lt=0;lt<qe;lt++)Be[lt]=Ee.get(lt)?Xe[ht++]:0;return Be})(W,Y,ce,ne.numValues):(function(pe,_e,Ee){const We=_e.get(),Ge=We+Ee*Float32Array.BYTES_PER_ELEMENT,He=new Uint8Array(pe.subarray(We,Ge)).buffer,at=new Float32Array(He);return _e.set(Ge),at})(W,Y,ne.numValues);return new A1(te.name,oe,ce)})(k,P,O,Z);case 8:return(function(W,Y,te,ce){const ne=ba(W,Y),oe=kd(ce)?(function(pe,_e,Ee,We){const Ge=_e.get(),He=Ge+We*Float64Array.BYTES_PER_ELEMENT,at=new Uint8Array(pe.subarray(Ge,He)).buffer,Xe=new Float64Array(at);_e.set(He);const qe=Ee.size(),Be=new Float64Array(qe);let ht=0;for(let lt=0;lt<qe;lt++)Be[lt]=Ee.get(lt)?Xe[ht++]:0;return Be})(W,Y,ce,ne.numValues):(function(pe,_e,Ee){const We=_e.get(),Ge=We+Ee*Float64Array.BYTES_PER_ELEMENT,He=new Uint8Array(pe.subarray(We,Ge)).buffer,at=new Float64Array(He);return _e.set(Ge),at})(W,Y,ne.numValues);return new Ap(te.name,oe,ce)})(k,P,O,Z);default:throw new Error(`The specified data type for the field is currently not supported: ${z}`)}})(h,a,e,g,n.scalarType,n):h!=1?null:(function(v,k,P,A){let z=null,O=null,$=null,N=null,Z=!1;for(;!Z;){const ce=ba(v,k);switch(ce.physicalStreamType){case ia.LENGTH:Ja.DICTIONARY===ce.logicalStreamType.lengthType?z=ll(v,k,ce):$=ll(v,k,ce);break;case ia.DATA:os.SINGLE===ce.logicalStreamType.dictionaryType||os.SHARED===ce.logicalStreamType.dictionaryType?(O=v.subarray(k.get(),k.get()+ce.byteLength),Z=!0):N=v.subarray(k.get(),k.get()+ce.byteLength),k.add(ce.byteLength)}}const W=P.complexType.children,Y=[];let te=0;for(const ce of W){const ne=Wn(v,k,1)[0];if(ne==0)continue;const oe=`${P.name}${ce.name==="default"?"":":"+ce.name}`;if(ne!==2||ce.type!=="scalarField"||ce.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const pe=ba(v,k),_e=wd(v,pe.numValues,k),Ee=ba(v,k),We=Ee.decompressedCount!==A?Op(v,k,Ee,!1,new ls(_e,pe.numValues)):wa(v,k,Ee,!1);Y[te++]=N?new gy(oe,We,z,O,$,N,new ls(_e,pe.numValues)):new _h(oe,We,z,O,new ls(_e,pe.numValues))}return Y})(a,e,n,g)}function kd(a){return a instanceof ls}function z1(a){if(a.name==="id")return!1;if(a.type==="scalarType"){const e=a.scalarType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(e.type==="logicalType")return!1}else if(a.type==="complexType"){const e=a.complexType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",a),!1}const R1=new TextDecoder;function _y(a,e){const n=Wn(a,e,1)[0];if(n===0)return"";const h=e.get(),g=a.subarray(h,h+n);return e.add(n),R1.decode(g)}function yy(a,e){const n=Wn(a,e,1)[0]>>>0,h=!!(4&n),g=!!(2&n),y=Wn(a,e,1)[0]>>>0,v={};if(1&n&&(v.nullable=!0),g){const k={};if(h?(k.type="logicalType",k.logicalType=y):(k.type="physicalType",k.physicalType=y),8&n){const P=Wn(a,e,1)[0]>>>0;k.children=new Array(P);for(let A=0;A<P;A++)k.children[A]=yy(a,e)}v.type="complexField",v.complexField=k}else{const k={};h?(k.type="logicalType",k.logicalType=y):(k.type="physicalType",k.physicalType=y),v.type="scalarField",v.scalarField=k}return v}function F1(a,e){const n=Wn(a,e,1)[0]>>>0,h=(function(g){switch(g){case 0:case 1:case 2:case 3:{const y={};y.nullable=!!(1&g),y.columnScope=0;const v={};return v.physicalType=g>1?6:4,v.type="physicalType",y.scalarType=v,y.type="scalarType",y}case 4:{const y={nullable:!1,columnScope:0},v={type:"physicalType",physicalType:0};return y.type="complexType",y.complexType=v,y}case 30:{const y={nullable:!1,columnScope:0},v={type:"physicalType",physicalType:1};return y.type="complexType",y.complexType=v,y}default:return(function(y){let v=null;switch(y){case 10:case 11:v=0;break;case 12:case 13:v=1;break;case 14:case 15:v=2;break;case 16:case 17:v=3;break;case 18:case 19:v=4;break;case 20:case 21:v=5;break;case 22:case 23:v=6;break;case 24:case 25:v=7;break;case 26:case 27:v=8;break;case 28:case 29:v=9;break;default:return null}const k={};k.nullable=!!(1&y),k.columnScope=0;const P={type:"physicalType"};return P.physicalType=v,k.type="scalarType",k.scalarType=P,k})(g)}})(n);if(!h)throw new Error(`Unsupported column type code: ${n}`);if((function(g){return g>=10})(n)?h.name=_y(a,e):n>=0&&n<=3?h.name="id":n===4&&(h.name="geometry"),(function(g){return g===30})(n)){const g=Wn(a,e,1)[0]>>>0,y=h.complexType;y.children=new Array(g);for(let v=0;v<g;v++)y.children[v]=yy(a,e)}return h}function O1(a,e){const n={featureTables:[]},h={};h.name=_y(a,e);const g=Wn(a,e,1)[0]>>>0,y=Wn(a,e,1)[0]>>>0;h.columns=new Array(y);for(let v=0;v<y;v++)h.columns[v]=F1(a,e);return n.featureTables.push(h),[n,g]}function j1(a,e,n,h,g,y,v=!1){const k=e.scalarType.physicalType,P=Uc(g,y,a,n);if(k===4)switch(P){case Fn.FLAT:{const A=wa(a,n,g,!1);return new Ep(h,A,y)}case Fn.SEQUENCE:{const A=J_(a,n,g);return new Ip(h,A[0],A[1],g.numRleValues)}case Fn.CONST:{const A=Fp(a,n,g,!1);return new Dp(h,A,y)}}else switch(P){case Fn.FLAT:{if(v){const z=(function(O,$,N,Z){const W=(function(Y,te,ce){const ne=new Float64Array(te);for(let oe=0;oe<te;oe++)ne[oe]=S1(Y,ce);return ne})(O,N.numValues,$);return(function(Y,te,ce){switch(te.logicalLevelTechnique1){case Xt.DELTA:return te.logicalLevelTechnique2===Xt.RLE&&(Y=Y_(Y,te.runs,te.numRleValues)),(function(ne){ne[0]=ne[0]%2==1?(ne[0]+1)/-2:ne[0]/2;const oe=ne.length/4*4;let pe=1;if(oe>=4)for(;pe<oe-4;pe+=4){const _e=ne[pe],Ee=ne[pe+1],We=ne[pe+2],Ge=ne[pe+3];ne[pe]=(_e%2==1?(_e+1)/-2:_e/2)+ne[pe-1],ne[pe+1]=(Ee%2==1?(Ee+1)/-2:Ee/2)+ne[pe],ne[pe+2]=(We%2==1?(We+1)/-2:We/2)+ne[pe+1],ne[pe+3]=(Ge%2==1?(Ge+1)/-2:Ge/2)+ne[pe+2]}for(;pe!=ne.length;++pe)ne[pe]=(ne[pe]%2==1?(ne[pe]+1)/-2:ne[pe]/2)+ne[pe-1]})(Y),Y;case Xt.RLE:return(function(ne,oe,pe){return Y_(ne,oe.runs,oe.numRleValues)})(Y,te);case Xt.NONE:return Y;default:throw new Error(`The specified Logical level technique is not supported: ${te.logicalLevelTechnique1}`)}})(W,N)})(a,n,g);return new Ap(h,z,y)}const A=ey(a,n,g,!1);return new iy(h,A,y)}case Fn.SEQUENCE:{const A=Q_(a,n,g);return new ny(h,A[0],A[1],g.numRleValues)}case Fn.CONST:{const A=ty(a,n,g,!1);return new fy(h,A,y)}}throw new Error("Vector type not supported for id column.")}class B1{constructor(e,n){var h;switch(this._featureData=e,this.properties=this._featureData.properties||{},(h=this._featureData.geometry)===null||h===void 0?void 0:h.type){case On.POINT:case On.MULTIPOINT:this.type=1;break;case On.LINESTRING:case On.MULTILINESTRING:this.type=2;break;case On.POLYGON:case On.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=n,this.id=Number(this._featureData.id)}loadGeometry(){const e=[];for(const n of this._featureData.geometry.coordinates){const h=[];for(const g of n)h.push(new S(g.x,g.y));e.push(h)}return e}}class $1{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new B1(this.features[e],this.extent)}}class vy{constructor(e){this.layers={};const n=(function(h,g,y=!0){const v=new k1(0),k=[];for(;v.get()<h.length;){const P=Wn(h,v,1)[0]>>>0,A=v.get()+P;if(A>h.length)throw new Error(`Block overruns tile: ${A} > ${h.length}`);if(Wn(h,v,1)[0]>>>0!=1){v.set(A);continue}const z=O1(h,v),O=z[1],$=z[0].featureTables[0];let N=null,Z=null;const W=[];let Y=0;for(const ce of $.columns){const ne=ce.name;if(ne==="id"){let oe=null;if(ce.nullable){const _e=ba(h,v),Ee=v.get(),We=wd(h,_e.numValues,v);v.set(Ee+_e.byteLength),oe=new ls(We,_e.numValues)}const pe=ba(h,v);Y=pe.decompressedCount,N=j1(h,ce,v,ne,pe,oe??Y,y)}else if(ne==="geometry"){const oe=Wn(h,v,1)[0];if(Y===0){const pe=v.get();Y=ba(h,v).decompressedCount,v.set(pe)}Z=L1(h,oe,v,Y)}else{const oe=z1(ce)?Wn(h,v,1)[0]:1;if(oe===0&&ce.type==="scalarType")continue;const pe=D1(h,v,ce,oe,Y);if(pe)if(Array.isArray(pe))for(const _e of pe)W.push(_e);else W.push(pe)}}const te=new w1($.name,Z,N,W,O);k.push(te),v.set(A)}return k})(new Uint8Array(e));this.layers=n.reduce(((h,g)=>Object.assign(Object.assign({},h),{[g.name]:new $1(g)})),{})}}class V1{constructor(e,n){this.feature=e,this.type=e.type,this.properties=e.tags?e.tags:{},this.extent=n,"id"in e&&(typeof e.id=="string"?this.id=parseInt(e.id,10):typeof e.id!="number"||isNaN(e.id)||(this.id=e.id))}loadGeometry(){const e=[],n=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const h of n){const g=[];for(const y of h)g.push(new S(y[0],y[1]));e.push(g)}return e}}const Sd="_geojsonTileLayer";function N1(a,e){e.writeVarintField(15,a.version||1),e.writeStringField(1,a.name||""),e.writeVarintField(5,a.extent||4096);const n={keys:[],values:[],keycache:{},valuecache:{}};for(let y=0;y<a.length;y++)n.feature=a.feature(y),e.writeMessage(2,U1,n);const h=n.keys;for(const y of h)e.writeStringField(3,y);const g=n.values;for(const y of g)e.writeMessage(4,Z1,y)}function U1(a,e){if(!a.feature)return;const n=a.feature;n.id!==void 0&&e.writeVarintField(1,n.id),e.writeMessage(2,G1,a),e.writeVarintField(3,n.type),e.writeMessage(4,q1,n)}function G1(a,e){for(const n in a.feature?.properties){let h=a.feature.properties[n],g=a.keycache[n];if(h==null)continue;g===void 0&&(a.keys.push(n),g=a.keys.length-1,a.keycache[n]=g),e.writeVarint(g),typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"&&(h=JSON.stringify(h));const y=typeof h+":"+h;let v=a.valuecache[y];v===void 0&&(a.values.push(h),v=a.values.length-1,a.valuecache[y]=v),e.writeVarint(v)}}function qp(a,e){return(e<<3)+(7&a)}function xy(a){return a<<1^a>>31}function q1(a,e){const n=a.loadGeometry(),h=a.type;let g=0,y=0;for(const v of n){let k=1;h===1&&(k=v.length),e.writeVarint(qp(1,k));const P=h===3?v.length-1:v.length;for(let A=0;A<P;A++){A===1&&h!==1&&e.writeVarint(qp(2,P-1));const z=v[A].x-g,O=v[A].y-y;e.writeVarint(xy(z)),e.writeVarint(xy(O)),g+=z,y+=O}a.type===3&&e.writeVarint(qp(7,1))}}function Z1(a,e){const n=typeof a;n==="string"?e.writeStringField(1,a):n==="boolean"?e.writeBooleanField(7,a):n==="number"&&(a%1!=0?e.writeDoubleField(3,a):a<0?e.writeSVarintField(6,a):e.writeVarintField(5,a))}class by{constructor(e,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new tl(Mt,16,0),this.grid3D=new tl(Mt,16,0),this.featureIndexArray=new ee,this.promoteId=n}insert(e,n,h,g,y,v){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,y);const P=v?this.grid3D:this.grid;for(let A=0;A<n.length;A++){const z=n[A],O=[1/0,1/0,-1/0,-1/0];for(let $=0;$<z.length;$++){const N=z[$];O[0]=Math.min(O[0],N.x),O[1]=Math.min(O[1],N.y),O[2]=Math.max(O[2],N.x),O[3]=Math.max(O[3],N.y)}O[0]<Mt&&O[1]<Mt&&O[2]>=0&&O[3]>=0&&P.insert(k,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new s_(new Rc(this.rawTileData)).layers:new vy(this.rawTileData).layers,this.sourceLayerCoder=new U_(this.vtLayers?Object.keys(this.vtLayers).sort():[Sd])),this.vtLayers}query(e,n,h,g){this.loadVTLayers();const y=e.params,v=Mt/e.tileSize/e.scale,k=pt(y.filter,y.globalState),P=e.queryGeometry,A=e.queryPadding*v,z=Xl.fromPoints(P),O=this.grid.query(z.minX-A,z.minY-A,z.maxX+A,z.maxY+A),$=Xl.fromPoints(e.cameraQueryGeometry).expandBy(A),N=this.grid3D.query($.minX,$.minY,$.maxX,$.maxY,((Y,te,ce,ne)=>(function(oe,pe,_e,Ee,We){for(const He of oe)if(pe<=He.x&&_e<=He.y&&Ee>=He.x&&We>=He.y)return!0;const Ge=[new S(pe,_e),new S(pe,We),new S(Ee,We),new S(Ee,_e)];if(oe.length>2){for(const He of Ge)if(rh(oe,He))return!0}for(let He=0;He<oe.length-1;He++)if(Hw(oe[He],oe[He+1],Ge))return!0;return!1})(e.cameraQueryGeometry,Y-A,te-A,ce+A,ne+A)));for(const Y of N)O.push(Y);O.sort(W1);const Z={};let W;for(let Y=0;Y<O.length;Y++){const te=O[Y];if(te===W)continue;W=te;const ce=this.featureIndexArray.get(te);let ne=null;this.loadMatchingFeature(Z,ce.bucketIndex,ce.sourceLayerIndex,ce.featureIndex,k,y.layers,y.availableImages,n,h,g,((oe,pe,_e)=>(ne||(ne=Gs(oe)),pe.queryIntersectsFeature({queryGeometry:P,feature:oe,featureState:_e,geometry:ne,zoom:this.z,transform:e.transform,pixelsToTileUnits:v,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation}))))}return Z}loadMatchingFeature(e,n,h,g,y,v,k,P,A,z,O){const $=this.bucketLayerIDs[n];if(v&&!$.some((Y=>v.has(Y))))return;const N=this.sourceLayerCoder.decode(h),Z=this.vtLayers[N].feature(g);if(y.needGeometry){const Y=qs(Z,!0);if(!y.filter(new wi(this.tileID.overscaledZ),Y,this.tileID.canonical))return}else if(!y.filter(new wi(this.tileID.overscaledZ),Z))return;const W=this.getId(Z,N);for(let Y=0;Y<$.length;Y++){const te=$[Y];if(v&&!v.has(te))continue;const ce=P[te];if(!ce)continue;let ne={};W&&z&&(ne=z.getState(ce.sourceLayer||Sd,W));const oe=Ii({},A[te]);oe.paint=wy(oe.paint,ce.paint,Z,ne,k),oe.layout=wy(oe.layout,ce.layout,Z,ne,k);const pe=!O||O(Z,ce,ne);if(!pe)continue;const _e=new G_(Z,this.z,this.x,this.y,W);_e.layer=oe;let Ee=e[te];Ee===void 0&&(Ee=e[te]=[]),Ee.push({featureIndex:g,feature:_e,intersectionZ:pe})}}lookupSymbolFeatures(e,n,h,g,y,v,k,P){const A={};this.loadVTLayers();const z=pt(y.filterSpec,y.globalState);for(const O of e)this.loadMatchingFeature(A,h,g,O,z,v,k,P,n);return A}hasLayer(e){for(const n of this.bucketLayerIDs)for(const h of n)if(e===h)return!0;return!1}getId(e,n){var h;let g=e.id;return this.promoteId&&(g=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((h=e.properties)===null||h===void 0)&&h.cluster)&&this.promoteId&&(g=Number(e.properties.cluster_id))),g}}function wy(a,e,n,h,g){return Cn(a,((y,v)=>{const k=e instanceof $l?e.get(v):null;return k&&k.evaluate?k.evaluate(n,h,g):k}))}function W1(a,e){return e-a}function ky(a,e,n,h,g){const y=[];for(let v=0;v<a.length;v++){const k=a[v];let P;for(let A=0;A<k.length-1;A++){let z=k[A],O=k[A+1];z.x<e&&O.x<e||(z.x<e?z=new S(e,z.y+(e-z.x)/(O.x-z.x)*(O.y-z.y))._round():O.x<e&&(O=new S(e,z.y+(e-z.x)/(O.x-z.x)*(O.y-z.y))._round()),z.y<n&&O.y<n||(z.y<n?z=new S(z.x+(n-z.y)/(O.y-z.y)*(O.x-z.x),n)._round():O.y<n&&(O=new S(z.x+(n-z.y)/(O.y-z.y)*(O.x-z.x),n)._round()),z.x>=h&&O.x>=h||(z.x>=h?z=new S(h,z.y+(h-z.x)/(O.x-z.x)*(O.y-z.y))._round():O.x>=h&&(O=new S(h,z.y+(h-z.x)/(O.x-z.x)*(O.y-z.y))._round()),z.y>=g&&O.y>=g||(z.y>=g?z=new S(z.x+(g-z.y)/(O.y-z.y)*(O.x-z.x),g)._round():O.y>=g&&(O=new S(z.x+(g-z.y)/(O.y-z.y)*(O.x-z.x),g)._round()),P&&z.equals(P[P.length-1])||(P=[z],y.push(P)),P.push(O)))))}}return y}function Sy(a,e,n,h,g){switch(e){case 1:return(function(y,v,k,P){const A=[];for(const z of y)for(const O of z){const $=P===0?O.x:O.y;$>=v&&$<=k&&A.push([O])}return A})(a,n,h,g);case 2:return Ty(a,n,h,g,!1);case 3:return Ty(a,n,h,g,!0)}return[]}function H1(a,e,n,h,g){const y=h===0?K1:Y1;let v=[];const k=[];for(let z=0;z<a.length-1;z++){const O=a[z],$=a[z+1],N=h===0?O.x:O.y,Z=h===0?$.x:$.y;let W=!1;N<e?Z>e&&v.push(y(O,$,e)):N>n?Z<n&&v.push(y(O,$,n)):v.push(O),Z<e&&N>=e&&(v.push(y(O,$,e)),W=!0),Z>n&&N<=n&&(v.push(y(O,$,n)),W=!0),!g&&W&&(k.push(v),v=[])}const P=a.length-1,A=h===0?a[P].x:a[P].y;return A>=e&&A<=n&&v.push(a[P]),g&&v.length>0&&!v[0].equals(v[v.length-1])&&v.push(new S(v[0].x,v[0].y)),v.length>0&&k.push(v),k}function Ty(a,e,n,h,g){const y=[];for(const v of a){const k=H1(v,e,n,h,g);k.length>0&&y.push(...k)}return y}function K1(a,e,n){return new S(n,a.y+(n-a.x)/(e.x-a.x)*(e.y-a.y))}function Y1(a,e,n){return new S(a.x+(n-a.y)/(e.y-a.y)*(e.x-a.x),n)}ct("FeatureIndex",by,{omit:["rawTileData","sourceLayerCoder"]});class ul extends S{constructor(e,n,h,g){super(e,n),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new ul(this.x,this.y,this.angle,this.segment)}}function Py(a,e,n,h,g){if(e.segment===void 0||n===0)return!0;let y=e,v=e.segment+1,k=0;for(;k>-n/2;){if(v--,v<0)return!1;k-=a[v].dist(y),y=a[v]}k+=a[v].dist(a[v+1]),v++;const P=[];let A=0;for(;k<n/2;){const z=a[v],O=a[v+1];if(!O)return!1;let $=a[v-1].angleTo(z)-z.angleTo(O);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:k,angleDelta:$}),A+=$;k-P[0].distance>h;)A-=P.shift().angleDelta;if(A>g)return!1;v++,k+=z.dist(O)}return!0}function My(a){let e=0;for(let n=0;n<a.length-1;n++)e+=a[n].dist(a[n+1]);return e}function Cy(a,e,n){return a?.6*e*n:0}function Ly(a,e){return Math.max(a?a.right-a.left:0,e?e.right-e.left:0)}function X1(a,e,n,h,g,y){const v=Cy(n,g,y),k=Ly(n,h)*y;let P=0;const A=My(a)/2;for(let z=0;z<a.length-1;z++){const O=a[z],$=a[z+1],N=O.dist($);if(P+N>A){const Z=(A-P)/N,W=Si.number(O.x,$.x,Z),Y=Si.number(O.y,$.y,Z),te=new ul(W,Y,$.angleTo(O),z);return te._round(),!v||Py(a,te,k,v,e)?te:void 0}P+=N}}function J1(a,e,n,h,g,y,v,k,P){const A=Cy(h,y,v),z=Ly(h,g),O=z*v,$=a[0].x===0||a[0].x===P||a[0].y===0||a[0].y===P;return e-O<e/4&&(e=O+e/4),Ey(a,$?e/2*k%e:(z/2+2*y)*v*k%e,e,A,n,O,$,!1,P)}function Ey(a,e,n,h,g,y,v,k,P){const A=y/2,z=My(a);let O=0,$=e-n,N=[];for(let Z=0;Z<a.length-1;Z++){const W=a[Z],Y=a[Z+1],te=W.dist(Y),ce=Y.angleTo(W);for(;$+n<O+te;){$+=n;const ne=($-O)/te,oe=Si.number(W.x,Y.x,ne),pe=Si.number(W.y,Y.y,ne);if(oe>=0&&oe<P&&pe>=0&&pe<P&&$-A>=0&&$+A<=z){const _e=new ul(oe,pe,ce,Z);_e._round(),h&&!Py(a,_e,y,h,g)||N.push(_e)}}O+=te}return k||N.length||v||(N=Ey(a,O/2,n,h,g,y,v,!0,P)),N}function Ay(a,e,n,h){const g=[],y=a.image,v=y.pixelRatio,k=y.paddedRect.w-2,P=y.paddedRect.h-2;let A={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const z=y.stretchX||[[0,k]],O=y.stretchY||[[0,P]],$=(Be,ht)=>Be+ht[1]-ht[0],N=z.reduce($,0),Z=O.reduce($,0),W=k-N,Y=P-Z;let te=0,ce=N,ne=0,oe=Z,pe=0,_e=W,Ee=0,We=Y;if(y.content&&h){const Be=y.content,ht=Be[2]-Be[0],lt=Be[3]-Be[1];(y.textFitWidth||y.textFitHeight)&&(A=P_(a)),te=Wc(z,0,Be[0]),ne=Wc(O,0,Be[1]),ce=Wc(z,Be[0],Be[2]),oe=Wc(O,Be[1],Be[3]),pe=Be[0]-te,Ee=Be[1]-ne,_e=ht-ce,We=lt-oe}const Ge=A.x1,He=A.y1,at=A.x2-Ge,Xe=A.y2-He,qe=(Be,ht,lt,ft)=>{const ot=Hc(Be.stretch-te,ce,at,Ge),yt=Kc(Be.fixed-pe,_e,Be.stretch,N),ei=Hc(ht.stretch-ne,oe,Xe,He),Zt=Kc(ht.fixed-Ee,We,ht.stretch,Z),Vi=Hc(lt.stretch-te,ce,at,Ge),aa=Kc(lt.fixed-pe,_e,lt.stretch,N),_n=Hc(ft.stretch-ne,oe,Xe,He),Ni=Kc(ft.fixed-Ee,We,ft.stretch,Z),Ri=new S(ot,ei),hi=new S(Vi,ei),en=new S(Vi,_n),ln=new S(ot,_n),Ei=new S(yt/v,Zt/v),Fa=new S(aa/v,Ni/v),ra=e*Math.PI/180;if(ra){const jn=Math.sin(ra),Wi=Math.cos(ra),yn=[Wi,-jn,jn,Wi];Ri._matMult(yn),hi._matMult(yn),ln._matMult(yn),en._matMult(yn)}const Oa=Be.stretch+Be.fixed,jr=ht.stretch+ht.fixed;return{tl:Ri,tr:hi,bl:ln,br:en,tex:{x:y.paddedRect.x+1+Oa,y:y.paddedRect.y+1+jr,w:lt.stretch+lt.fixed-Oa,h:ft.stretch+ft.fixed-jr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ei,pixelOffsetBR:Fa,minFontScaleX:_e/v/at,minFontScaleY:We/v/Xe,isSDF:n}};if(h&&(y.stretchX||y.stretchY)){const Be=Iy(z,W,N),ht=Iy(O,Y,Z);for(let lt=0;lt<Be.length-1;lt++){const ft=Be[lt],ot=Be[lt+1];for(let yt=0;yt<ht.length-1;yt++)g.push(qe(ft,ht[yt],ot,ht[yt+1]))}}else g.push(qe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:P+1}));return g}function Wc(a,e,n){let h=0;for(const g of a)h+=Math.max(e,Math.min(n,g[1]))-Math.max(e,Math.min(n,g[0]));return h}function Iy(a,e,n){const h=[{fixed:-1,stretch:0}];for(const[g,y]of a){const v=h[h.length-1];h.push({fixed:g-v.stretch,stretch:v.stretch}),h.push({fixed:g-v.stretch,stretch:v.stretch+(y-g)})}return h.push({fixed:e+1,stretch:n}),h}function Hc(a,e,n,h){return a/e*n+h}function Kc(a,e,n,h){return a-e*n/h}ct("Anchor",ul);class Yc{constructor(e,n,h,g,y,v,k,P,A,z){var O;if(this.boxStartIndex=e.length,A){let $=v.top,N=v.bottom;const Z=v.collisionPadding;Z&&($-=Z[1],N+=Z[3]);let W=N-$;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{const $=!((O=v.image)===null||O===void 0)&&O.content&&(v.image.textFitWidth||v.image.textFitHeight)?P_(v):{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom};$.y1=$.y1*k-P[0],$.y2=$.y2*k+P[2],$.x1=$.x1*k-P[3],$.x2=$.x2*k+P[1];const N=v.collisionPadding;if(N&&($.x1-=N[0]*k,$.y1-=N[1]*k,$.x2+=N[2]*k,$.y2+=N[3]*k),z){const Z=new S($.x1,$.y1),W=new S($.x2,$.y1),Y=new S($.x1,$.y2),te=new S($.x2,$.y2),ce=z*Math.PI/180;Z._rotate(ce),W._rotate(ce),Y._rotate(ce),te._rotate(ce),$.x1=Math.min(Z.x,W.x,Y.x,te.x),$.x2=Math.max(Z.x,W.x,Y.x,te.x),$.y1=Math.min(Z.y,W.y,Y.y,te.y),$.y2=Math.max(Z.y,W.y,Y.y,te.y)}e.emplaceBack(n.x,n.y,$.x1,$.y1,$.x2,$.y2,h,g,y)}this.boxEndIndex=e.length}}class Q1{constructor(e=[],n=(h,g)=>h<g?-1:h>g?1:0){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:h}=this,g=n[e];for(;e>0;){const y=e-1>>1,v=n[y];if(h(g,v)>=0)break;n[e]=v,e=y}n[e]=g}_down(e){const{data:n,compare:h}=this,g=this.length>>1,y=n[e];for(;e<g;){let v=1+(e<<1);const k=v+1;if(k<this.length&&h(n[k],n[v])<0&&(v=k),h(n[v],y)>=0)break;n[e]=n[v],e=v}n[e]=y}}function ek(a,e=1,n=!1){const h=Xl.fromPoints(a[0]),g=Math.min(h.width(),h.height());let y=g/2;const v=new Q1([],tk),{minX:k,minY:P,maxX:A,maxY:z}=h;if(g===0)return new S(k,P);for(let N=k;N<A;N+=g)for(let Z=P;Z<z;Z+=g)v.push(new yh(N+y,Z+y,y,a));let O=(function(N){let Z=0,W=0,Y=0;const te=N[0];for(let ce=0,ne=te.length,oe=ne-1;ce<ne;oe=ce++){const pe=te[ce],_e=te[oe],Ee=pe.x*_e.y-_e.x*pe.y;W+=(pe.x+_e.x)*Ee,Y+=(pe.y+_e.y)*Ee,Z+=3*Ee}return new yh(W/Z,Y/Z,0,N)})(a),$=v.length;for(;v.length;){const N=v.pop();(N.d>O.d||!O.d)&&(O=N,n&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,$)),N.max-O.d<=e||(y=N.h/2,v.push(new yh(N.p.x-y,N.p.y-y,y,a)),v.push(new yh(N.p.x+y,N.p.y-y,y,a)),v.push(new yh(N.p.x-y,N.p.y+y,y,a)),v.push(new yh(N.p.x+y,N.p.y+y,y,a)),$+=4)}return n&&(console.log(`num probes: ${$}`),console.log(`best distance: ${O.d}`)),O.p}function tk(a,e){return e.max-a.max}function yh(a,e,n,h){this.p=new S(a,e),this.h=n,this.d=(function(g,y){let v=!1,k=1/0;for(let P=0;P<y.length;P++){const A=y[P];for(let z=0,O=A.length,$=O-1;z<O;$=z++){const N=A[z],Z=A[$];N.y>g.y!=Z.y>g.y&&g.x<(Z.x-N.x)*(g.y-N.y)/(Z.y-N.y)+N.x&&(v=!v),k=Math.min(k,Og(g,N,Z))}}return(v?1:-1)*Math.sqrt(k)})(this.p,h),this.max=this.d+this.h*Math.SQRT2}var na;f.aP=void 0,(na=f.aP||(f.aP={}))[na.center=1]="center",na[na.left=2]="left",na[na.right=3]="right",na[na.top=4]="top",na[na.bottom=5]="bottom",na[na["top-left"]=6]="top-left",na[na["top-right"]=7]="top-right",na[na["bottom-left"]=8]="bottom-left",na[na["bottom-right"]=9]="bottom-right";const Zp=Number.POSITIVE_INFINITY;function Dy(a,e){return e[1]!==Zp?(function(n,h,g){let y=0,v=0;switch(h=Math.abs(h),g=Math.abs(g),n){case"top-right":case"top-left":case"top":v=g-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-g}switch(n){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,v]})(a,e[0],e[1]):(function(n,h){let g=0,y=0;h<0&&(h=0);const v=h/Math.SQRT2;switch(n){case"top-right":case"top-left":y=v-7;break;case"bottom-right":case"bottom-left":y=7-v;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(n){case"top-right":case"bottom-right":g=-v;break;case"top-left":case"bottom-left":g=v;break;case"left":g=h;break;case"right":g=-h}return[g,y]})(a,e[0])}function zy(a,e,n){var h;const g=a.layout,y=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(e,{},n);if(y){const k=y.values,P=[];for(let A=0;A<k.length;A+=2){const z=P[A]=k[A],O=k[A+1].map(($=>$*Rn));z.startsWith("top")?O[1]-=7:z.startsWith("bottom")&&(O[1]+=7),P[A+1]=O}return new kn(P)}const v=g.get("text-variable-anchor");if(v){let k;k=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(e,{},n)*Rn,Zp]:g.get("text-offset").evaluate(e,{},n).map((A=>A*Rn));const P=[];for(const A of v)P.push(A,Dy(A,k));return new kn(P)}return null}function Wp(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ik(a,e,n,h,g,y,v,k,P,A,z,O){let $=y.textMaxSize.evaluate(e,{});$===void 0&&($=v);const N=a.layers[0].layout,Z=N.get("icon-offset").evaluate(e,{},z),W=Fy(n.horizontal),Y=v/24,te=a.tilePixelRatio*Y,ce=a.tilePixelRatio*$/24,ne=a.tilePixelRatio*k,oe=a.tilePixelRatio*N.get("symbol-spacing"),pe=N.get("text-padding")*a.tilePixelRatio,_e=(function(lt,ft,ot,yt=1){const ei=lt.get("icon-padding").evaluate(ft,{},ot),Zt=ei&&ei.values;return[Zt[0]*yt,Zt[1]*yt,Zt[2]*yt,Zt[3]*yt]})(N,e,z,a.tilePixelRatio),Ee=N.get("text-max-angle")/180*Math.PI,We=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point",Ge=N.get("icon-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",He=N.get("symbol-placement"),at=oe/2,Xe=N.get("icon-text-fit");let qe;h&&Xe!=="none"&&(a.allowVerticalPlacement&&n.vertical&&(qe=M_(h,n.vertical,Xe,N.get("icon-text-fit-padding"),Z,Y)),W&&(h=M_(h,W,Xe,N.get("icon-text-fit-padding"),Z,Y)));const Be=z?O.line.getGranularityForZoomLevel(z.z):1,ht=(lt,ft)=>{ft.x<0||ft.x>=Mt||ft.y<0||ft.y>=Mt||(function(ot,yt,ei,Zt,Vi,aa,_n,Ni,Ri,hi,en,ln,Ei,Fa,ra,Oa,jr,jn,Wi,yn,tn,Bn,To,us,Md){const hl=ot.addToLineVertexArray(yt,ei);let eu,vh,xh,bh,$y=0,Vy=0,Ny=0,Uy=0,tm=-1,im=-1;const Po={};let Gy=on("");if(ot.allowVerticalPlacement&&Zt.vertical){const ma=Ni.layout.get("text-rotate").evaluate(tn,{},us)+90;xh=new Yc(Ri,yt,hi,en,ln,Zt.vertical,Ei,Fa,ra,ma),_n&&(bh=new Yc(Ri,yt,hi,en,ln,_n,jr,jn,ra,ma))}if(Vi){const ma=Ni.layout.get("icon-rotate").evaluate(tn,{}),kr=Ni.layout.get("icon-text-fit")!=="none",tu=Ay(Vi,ma,To,kr),ds=_n?Ay(_n,ma,To,kr):void 0;vh=new Yc(Ri,yt,hi,en,ln,Vi,jr,jn,!1,ma),$y=4*tu.length;const iu=ot.iconSizeData;let Zs=null;iu.kind==="source"?(Zs=[ko*Ni.layout.get("icon-size").evaluate(tn,{})],Zs[0]>sl&&gn(`${ot.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):iu.kind==="composite"&&(Zs=[ko*Bn.compositeIconSizes[0].evaluate(tn,{},us),ko*Bn.compositeIconSizes[1].evaluate(tn,{},us)],(Zs[0]>sl||Zs[1]>sl)&&gn(`${ot.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ot.addSymbols(ot.icon,tu,Zs,yn,Wi,tn,f.az.none,yt,hl.lineStartIndex,hl.lineLength,-1,us),tm=ot.icon.placedSymbolArray.length-1,ds&&(Vy=4*ds.length,ot.addSymbols(ot.icon,ds,Zs,yn,Wi,tn,f.az.vertical,yt,hl.lineStartIndex,hl.lineLength,-1,us),im=ot.icon.placedSymbolArray.length-1)}const qy=Object.keys(Zt.horizontal);for(const ma of qy){const kr=Zt.horizontal[ma];if(!eu){Gy=on(kr.text);const ds=Ni.layout.get("text-rotate").evaluate(tn,{},us);eu=new Yc(Ri,yt,hi,en,ln,kr,Ei,Fa,ra,ds)}const tu=kr.positionedLines.length===1;if(Ny+=Ry(ot,yt,kr,aa,Ni,ra,tn,Oa,hl,Zt.vertical?f.az.horizontal:f.az.horizontalOnly,tu?qy:[ma],Po,tm,Bn,us),tu)break}Zt.vertical&&(Uy+=Ry(ot,yt,Zt.vertical,aa,Ni,ra,tn,Oa,hl,f.az.vertical,["vertical"],Po,im,Bn,us));const rk=eu?eu.boxStartIndex:ot.collisionBoxArray.length,sk=eu?eu.boxEndIndex:ot.collisionBoxArray.length,ok=xh?xh.boxStartIndex:ot.collisionBoxArray.length,lk=xh?xh.boxEndIndex:ot.collisionBoxArray.length,uk=vh?vh.boxStartIndex:ot.collisionBoxArray.length,hk=vh?vh.boxEndIndex:ot.collisionBoxArray.length,dk=bh?bh.boxStartIndex:ot.collisionBoxArray.length,ck=bh?bh.boxEndIndex:ot.collisionBoxArray.length;let hs=-1;const Jc=(ma,kr)=>ma&&ma.circleDiameter?Math.max(ma.circleDiameter,kr):kr;hs=Jc(eu,hs),hs=Jc(xh,hs),hs=Jc(vh,hs),hs=Jc(bh,hs);const Zy=hs>-1?1:0;Zy&&(hs*=Md/Rn),ot.glyphOffsetArray.length>=ch.MAX_GLYPHS&&gn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),tn.sortKey!==void 0&&ot.addToSortKeyRanges(ot.symbolInstances.length,tn.sortKey);const fk=zy(Ni,tn,us),[pk,mk]=(function(ma,kr){const tu=ma.length,ds=kr?.values;if(ds?.length>0)for(let iu=0;iu<ds.length;iu+=2){const Zs=ds[iu+1];ma.emplaceBack(f.aP[ds[iu]],Zs[0],Zs[1])}return[tu,ma.length]})(ot.textAnchorOffsets,fk);ot.symbolInstances.emplaceBack(yt.x,yt.y,Po.right>=0?Po.right:-1,Po.center>=0?Po.center:-1,Po.left>=0?Po.left:-1,Po.vertical||-1,tm,im,Gy,rk,sk,ok,lk,uk,hk,dk,ck,hi,Ny,Uy,$y,Vy,Zy,0,Ei,hs,pk,mk)})(a,ft,lt,n,h,g,qe,a.layers[0],a.collisionBoxArray,e.index,e.sourceLayerIndex,a.index,te,[pe,pe,pe,pe],We,P,ne,_e,Ge,Z,e,y,A,z,v)};if(He==="line")for(const lt of ky(e.geometry,0,0,Mt,Mt)){const ft=Yl(lt,Be),ot=J1(ft,oe,Ee,n.vertical||W,h,24,ce,a.overscaling,Mt);for(const yt of ot)W&&nk(a,W.text,at,yt)||ht(ft,yt)}else if(He==="line-center"){for(const lt of e.geometry)if(lt.length>1){const ft=Yl(lt,Be),ot=X1(ft,Ee,n.vertical||W,h,24,ce);ot&&ht(ft,ot)}}else if(e.type==="Polygon")for(const lt of Cs(e.geometry,0)){const ft=ek(lt,16);ht(Yl(lt[0],Be,!0),new ul(ft.x,ft.y,0))}else if(e.type==="LineString")for(const lt of e.geometry){const ft=Yl(lt,Be);ht(ft,new ul(ft[0].x,ft[0].y,0))}else if(e.type==="Point")for(const lt of e.geometry)for(const ft of lt)ht([ft],new ul(ft.x,ft.y,0))}function Ry(a,e,n,h,g,y,v,k,P,A,z,O,$,N,Z){const W=(function(ce,ne,oe,pe,_e,Ee,We,Ge){const He=pe.layout.get("text-rotate").evaluate(Ee,{})*Math.PI/180,at=[];for(const Xe of ne.positionedLines)for(const qe of Xe.positionedGlyphs){if(!qe.rect)continue;const Be=qe.rect||{};let ht=4,lt=!0,ft=1,ot=0;const yt=(_e||Ge)&&qe.vertical,ei=qe.metrics.advance*qe.scale/2;if(Ge&&ne.verticalizable&&(ot=Xe.lineOffset/2-(qe.imageName?-(Rn-qe.metrics.width*qe.scale)/2:(qe.scale-1)*Rn)),qe.imageName){const jn=We[qe.imageName];lt=jn.sdf,ft=jn.pixelRatio,ht=1/ft}const Zt=_e?[qe.x+ei,qe.y]:[0,0];let Vi=_e?[0,0]:[qe.x+ei+oe[0],qe.y+oe[1]-ot],aa=[0,0];yt&&(aa=Vi,Vi=[0,0]);const _n=qe.metrics.isDoubleResolution?2:1,Ni=(qe.metrics.left-ht)*qe.scale-ei+Vi[0],Ri=(-qe.metrics.top-ht)*qe.scale+Vi[1],hi=Ni+Be.w/_n*qe.scale/ft,en=Ri+Be.h/_n*qe.scale/ft,ln=new S(Ni,Ri),Ei=new S(hi,Ri),Fa=new S(Ni,en),ra=new S(hi,en);if(yt){const jn=new S(-ei,ei- -17),Wi=-Math.PI/2,yn=12-ei,tn=new S(22-yn,-(qe.imageName?yn:0)),Bn=new S(...aa);ln._rotateAround(Wi,jn)._add(tn)._add(Bn),Ei._rotateAround(Wi,jn)._add(tn)._add(Bn),Fa._rotateAround(Wi,jn)._add(tn)._add(Bn),ra._rotateAround(Wi,jn)._add(tn)._add(Bn)}if(He){const jn=Math.sin(He),Wi=Math.cos(He),yn=[Wi,-jn,jn,Wi];ln._matMult(yn),Ei._matMult(yn),Fa._matMult(yn),ra._matMult(yn)}const Oa=new S(0,0),jr=new S(0,0);at.push({tl:ln,tr:Ei,bl:Fa,br:ra,tex:Be,writingMode:ne.writingMode,glyphOffset:Zt,sectionIndex:qe.sectionIndex,isSDF:lt,pixelOffsetTL:Oa,pixelOffsetBR:jr,minFontScaleX:0,minFontScaleY:0})}return at})(0,n,k,g,y,v,h,a.allowVerticalPlacement),Y=a.textSizeData;let te=null;Y.kind==="source"?(te=[ko*g.layout.get("text-size").evaluate(v,{})],te[0]>sl&&gn(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Y.kind==="composite"&&(te=[ko*N.compositeTextSizes[0].evaluate(v,{},Z),ko*N.compositeTextSizes[1].evaluate(v,{},Z)],(te[0]>sl||te[1]>sl)&&gn(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,W,te,k,y,v,A,e,P.lineStartIndex,P.lineLength,$,Z);for(const ce of z)O[ce]=a.text.placedSymbolArray.length-1;return 4*W.length}function Fy(a){for(const e in a)return a[e];return null}function nk(a,e,n,h){const g=a.compareText;if(e in g){const y=g[e];for(let v=y.length-1;v>=0;v--)if(h.dist(y[v])<n)return!0}else g[e]=[];return g[e].push(h),!1}const Oy=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Hp{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,h]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const y=Oy[15&h];if(!y)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(e,2,1),[k]=new Uint32Array(e,4,1);return new Hp(k,v,y,e)}constructor(e,n=64,h=Float64Array,g){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=h,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const y=Oy.indexOf(this.ArrayType),v=2*e*this.ArrayType.BYTES_PER_ELEMENT,k=e*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-k%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+k+P,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+v+k+P),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+k+P,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=e,this.coords[this._pos++]=n,h}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Kp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:v,nodeSize:k}=this,P=[0,y.length-1,0],A=[];for(;P.length;){const z=P.pop()||0,O=P.pop()||0,$=P.pop()||0;if(O-$<=k){for(let Y=$;Y<=O;Y++){const te=v[2*Y],ce=v[2*Y+1];te>=e&&te<=h&&ce>=n&&ce<=g&&A.push(y[Y])}continue}const N=$+O>>1,Z=v[2*N],W=v[2*N+1];Z>=e&&Z<=h&&W>=n&&W<=g&&A.push(y[N]),(z===0?e<=Z:n<=W)&&(P.push($),P.push(N-1),P.push(1-z)),(z===0?h>=Z:g>=W)&&(P.push(N+1),P.push(O),P.push(1-z))}return A}within(e,n,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:v}=this,k=[0,g.length-1,0],P=[],A=h*h;for(;k.length;){const z=k.pop()||0,O=k.pop()||0,$=k.pop()||0;if(O-$<=v){for(let Y=$;Y<=O;Y++)By(y[2*Y],y[2*Y+1],e,n)<=A&&P.push(g[Y]);continue}const N=$+O>>1,Z=y[2*N],W=y[2*N+1];By(Z,W,e,n)<=A&&P.push(g[N]),(z===0?e-h<=Z:n-h<=W)&&(k.push($),k.push(N-1),k.push(1-z)),(z===0?e+h>=Z:n+h>=W)&&(k.push(N+1),k.push(O),k.push(1-z))}return P}}function Kp(a,e,n,h,g,y){if(g-h<=n)return;const v=h+g>>1;jy(a,e,v,h,g,y),Kp(a,e,n,h,v-1,1-y),Kp(a,e,n,v+1,g,1-y)}function jy(a,e,n,h,g,y){for(;g>h;){if(g-h>600){const A=g-h+1,z=n-h+1,O=Math.log(A),$=.5*Math.exp(2*O/3),N=.5*Math.sqrt(O*$*(A-$)/A)*(z-A/2<0?-1:1);jy(a,e,n,Math.max(h,Math.floor(n-z*$/A+N)),Math.min(g,Math.floor(n+(A-z)*$/A+N)),y)}const v=e[2*n+y];let k=h,P=g;for(Td(a,e,h,n),e[2*g+y]>v&&Td(a,e,h,g);k<P;){for(Td(a,e,k,P),k++,P--;e[2*k+y]<v;)k++;for(;e[2*P+y]>v;)P--}e[2*h+y]===v?Td(a,e,h,P):(P++,Td(a,e,P,g)),P<=n&&(h=P+1),n<=P&&(g=P-1)}}function Td(a,e,n,h){Yp(a,n,h),Yp(e,2*n,2*h),Yp(e,2*n+1,2*h+1)}function Yp(a,e,n){const h=a[e];a[e]=a[n],a[n]=h}function By(a,e,n,h){const g=a-n,y=e-h;return g*g+y*y}var Xp;f.cH=void 0,(Xp=f.cH||(f.cH={})).create="create",Xp.load="load",Xp.fullLoad="fullLoad";let Xc=null,Pd=[];const Jp=1e3/60,Qp="loadTime",em="fullLoadTime",ak={mark(a){performance.mark(a)},frame(a){const e=a;Xc!=null&&Pd.push(e-Xc),Xc=e},clearMetrics(){Xc=null,Pd=[],performance.clearMeasures(Qp),performance.clearMeasures(em);for(const a in f.cH)performance.clearMarks(f.cH[a])},getPerformanceMetrics(){performance.measure(Qp,f.cH.create,f.cH.load),performance.measure(em,f.cH.create,f.cH.fullLoad);const a=performance.getEntriesByName(Qp)[0].duration,e=performance.getEntriesByName(em)[0].duration,n=Pd.length,h=1/(Pd.reduce(((y,v)=>y+v),0)/n/1e3),g=Pd.filter((y=>y>Jp)).reduce(((y,v)=>y+(v-Jp)/Jp),0);return{loadTime:a,fullLoadTime:e,fps:h,percentDroppedFrames:g/(n+g)*100,totalFrames:n}}};f.$=H,f.A=Pe,f.B=el,f.C=Dn,f.D=_t,f.E=Qt,f.F=function([a,e,n]){return e+=90,e*=Math.PI/180,n*=Math.PI/180,{x:a*Math.cos(e)*Math.sin(n),y:a*Math.sin(e)*Math.sin(n),z:a*Math.cos(n)}},f.G=Si,f.H=wi,f.I=xp,f.J=mc,f.K=function(a){if(Ci==null){const e=a.navigator?a.navigator.userAgent:null;Ci=!!a.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Ci},f.L=class{constructor(a,e){this.target=a,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new v1((()=>this.process())),this.subscription=Gr(this.target,"message",(n=>this.receive(n)),!1),this.globalScope=Ma(self)?a:window}registerMessageHandler(a,e){this.messageHandlers[a]=e}unregisterMessageHandler(a){delete this.messageHandlers[a]}sendAsync(a,e){return new Promise(((n,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),y=e?Gr(e.signal,"abort",(()=>{y?.unsubscribe(),delete this.resolveRejects[g];const P={id:g,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(P)}),x1):null;this.resolveRejects[g]={resolve:P=>{y?.unsubscribe(),n(P)},reject:P=>{y?.unsubscribe(),h(P)}};const v=[],k=Object.assign(Object.assign({},a),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Fl(a.data,v)});this.target.postMessage(k,{transfer:v})}))}receive(a){const e=a.data,n=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[n];const h=this.abortControllers[n];return delete this.abortControllers[n],void(h&&h.abort())}if(Ma(self)||e.mustQueue)return this.tasks[n]=e,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,e)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),e=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(a,e)}processTask(a,e){return s(this,void 0,void 0,(function*(){if(e.type==="<response>"){const g=this.resolveRejects[a];return delete this.resolveRejects[a],g?void(e.error?g.reject(Ol(e.error)):g.resolve(Ol(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const n=Ol(e.data),h=new AbortController;this.abortControllers[a]=h;try{const g=yield this.messageHandlers[e.type](e.sourceMapId,n,h);this.completeTask(a,null,g)}catch(g){this.completeTask(a,g)}}))}completeTask(a,e,n){const h=[];delete this.abortControllers[a];const g={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?Fl(e):null,data:Fl(n,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.M=Ce,f.N=function(){var a=new Pe(16);return Pe!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},f.O=function(a,e,n){var h,g,y,v,k,P,A,z,O,$,N,Z,W=n[0],Y=n[1],te=n[2];return e===a?(a[12]=e[0]*W+e[4]*Y+e[8]*te+e[12],a[13]=e[1]*W+e[5]*Y+e[9]*te+e[13],a[14]=e[2]*W+e[6]*Y+e[10]*te+e[14],a[15]=e[3]*W+e[7]*Y+e[11]*te+e[15]):(g=e[1],y=e[2],v=e[3],k=e[4],P=e[5],A=e[6],z=e[7],O=e[8],$=e[9],N=e[10],Z=e[11],a[0]=h=e[0],a[1]=g,a[2]=y,a[3]=v,a[4]=k,a[5]=P,a[6]=A,a[7]=z,a[8]=O,a[9]=$,a[10]=N,a[11]=Z,a[12]=h*W+k*Y+O*te+e[12],a[13]=g*W+P*Y+$*te+e[13],a[14]=y*W+A*Y+N*te+e[14],a[15]=v*W+z*Y+Z*te+e[15]),a},f.P=S,f.Q=function(a,e,n){var h=n[0],g=n[1],y=n[2];return a[0]=e[0]*h,a[1]=e[1]*h,a[2]=e[2]*h,a[3]=e[3]*h,a[4]=e[4]*g,a[5]=e[5]*g,a[6]=e[6]*g,a[7]=e[7]*g,a[8]=e[8]*y,a[9]=e[9]*y,a[10]=e[10]*y,a[11]=e[11]*y,a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a},f.R=Ra,f.S=function(a,e,n){var h=e[0],g=e[1],y=e[2],v=e[3],k=e[4],P=e[5],A=e[6],z=e[7],O=e[8],$=e[9],N=e[10],Z=e[11],W=e[12],Y=e[13],te=e[14],ce=e[15],ne=n[0],oe=n[1],pe=n[2],_e=n[3];return a[0]=ne*h+oe*k+pe*O+_e*W,a[1]=ne*g+oe*P+pe*$+_e*Y,a[2]=ne*y+oe*A+pe*N+_e*te,a[3]=ne*v+oe*z+pe*Z+_e*ce,a[4]=(ne=n[4])*h+(oe=n[5])*k+(pe=n[6])*O+(_e=n[7])*W,a[5]=ne*g+oe*P+pe*$+_e*Y,a[6]=ne*y+oe*A+pe*N+_e*te,a[7]=ne*v+oe*z+pe*Z+_e*ce,a[8]=(ne=n[8])*h+(oe=n[9])*k+(pe=n[10])*O+(_e=n[11])*W,a[9]=ne*g+oe*P+pe*$+_e*Y,a[10]=ne*y+oe*A+pe*N+_e*te,a[11]=ne*v+oe*z+pe*Z+_e*ce,a[12]=(ne=n[12])*h+(oe=n[13])*k+(pe=n[14])*O+(_e=n[15])*W,a[13]=ne*g+oe*P+pe*$+_e*Y,a[14]=ne*y+oe*A+pe*N+_e*te,a[15]=ne*v+oe*z+pe*Z+_e*ce,a},f.T=dp,f.U=function(a,e){const n={};for(let h=0;h<e.length;h++){const g=e[h];g in a&&(n[g]=a[g])}return n},f.V=ol,f.W=dn,f.X=F_,f.Y=R_,f.Z=ve,f._=s,f.a=se,f.a$=Tt,f.a0=Se,f.a1=Ur,f.a2=br,f.a3=j_,f.a4=Bc,f.a5=Mt,f.a6=function(a,e,n){if(!a)return e||{};if(!e)return a||{};const h=N_(a),g=N_(e);(function(v,k){k.removeAll&&(v.add.clear(),v.update.clear(),v.remove.clear(),k.remove.clear());for(const P of k.remove)v.add.delete(P),v.update.delete(P);for(const[P,A]of k.update){const z=v.update.get(P);z&&(k.update.set(P,b1(z,A)),v.update.delete(P))}})(h,g);const y={};if((h.removeAll||g.removeAll)&&(y.removeAll=!0),y.remove=new Set([...h.remove,...g.remove]),y.add=new Map([...h.add,...g.add]),y.update=new Map([...h.update,...g.update]),y.remove.size&&y.add.size)for(const v of y.add.keys())y.remove.delete(v);return(function(v){const k={};return v.removeAll&&(k.removeAll=v.removeAll),v.remove&&(k.remove=Array.from(v.remove)),v.add&&(k.add=Array.from(v.add.values())),v.update&&(k.update=Array.from(v.update.values())),k})(y)},f.a7=function(a,e){const n=new Map;if(a==null||a.type==null)return n;if(a.type==="Feature"){const h=Lp(a,e);return h==null?void 0:(n.set(h,a),n)}if(a.type==="FeatureCollection"){const h=new Set;for(const g of a.features){const y=Lp(g,e);if(y==null||h.has(y))return;h.add(y),n.set(y,g)}return n}},f.a8=function(a,e,n){var h,g;const y=[];if(e.removeAll)a.clear();else if(e.remove)for(const v of e.remove){const k=a.get(v);k&&(y.push(k.geometry),a.delete(v))}if(e.add)for(const v of e.add){const k=Lp(v,n);if(k==null)continue;const P=a.get(k);P&&y.push(P.geometry),y.push(v.geometry),a.set(k,v)}if(e.update)for(const v of e.update){const k=a.get(v.id);if(!k)continue;const P=!!v.newGeometry,A=v.removeAllProperties||((h=v.removeProperties)===null||h===void 0?void 0:h.length)>0||((g=v.addOrUpdateProperties)===null||g===void 0?void 0:g.length)>0;if(!P&&!A)continue;y.push(k.geometry);const z=Object.assign({},k);if(a.set(v.id,z),P&&(y.push(v.newGeometry),z.geometry=v.newGeometry),A){if(z.properties=v.removeAllProperties?{}:Object.assign({},z.properties||{}),v.removeProperties)for(const O of v.removeProperties)delete z.properties[O];if(v.addOrUpdateProperties)for(const{key:O,value:$}of v.addOrUpdateProperties)z.properties[O]=$}}return y},f.a9=bd,f.aA=function(a,{uSize:e,uSizeT:n},{lowerSize:h,upperSize:g}){return a.kind==="source"?h/ko:a.kind==="composite"?Si.number(h/ko,g/ko,n):e},f.aB=function(a,e){var n=e[0],h=e[1],g=e[2],y=e[3],v=e[4],k=e[5],P=e[6],A=e[7],z=e[8],O=e[9],$=e[10],N=e[11],Z=e[12],W=e[13],Y=e[14],te=e[15],ce=n*k-h*v,ne=n*P-g*v,oe=n*A-y*v,pe=h*P-g*k,_e=h*A-y*k,Ee=g*A-y*P,We=z*W-O*Z,Ge=z*Y-$*Z,He=z*te-N*Z,at=O*Y-$*W,Xe=O*te-N*W,qe=$*te-N*Y,Be=ce*qe-ne*Xe+oe*at+pe*He-_e*Ge+Ee*We;return Be?(a[0]=(k*qe-P*Xe+A*at)*(Be=1/Be),a[1]=(g*Xe-h*qe-y*at)*Be,a[2]=(W*Ee-Y*_e+te*pe)*Be,a[3]=($*_e-O*Ee-N*pe)*Be,a[4]=(P*He-v*qe-A*Ge)*Be,a[5]=(n*qe-g*He+y*Ge)*Be,a[6]=(Y*oe-Z*Ee-te*ne)*Be,a[7]=(z*Ee-$*oe+N*ne)*Be,a[8]=(v*Xe-k*He+A*We)*Be,a[9]=(h*He-n*Xe-y*We)*Be,a[10]=(Z*_e-W*oe+te*ce)*Be,a[11]=(O*oe-z*_e-N*ce)*Be,a[12]=(k*Ge-v*at-P*We)*Be,a[13]=(n*at-h*Ge+g*We)*Be,a[14]=(W*ne-Z*pe-Y*ce)*Be,a[15]=(z*pe-O*ne+$*ce)*Be,a):null},f.aC=Vt,f.aD=function(a){var e=a[0],n=a[1];return Math.sqrt(e*e+n*n)},f.aE=function(a){return a[0]=0,a[1]=0,a},f.aF=function(a,e,n){return a[0]=e[0]*n,a[1]=e[1]*n,a},f.aG=kp,f.aH=di,f.aI=function(a,e,n,h){const g=e.y-a.y,y=e.x-a.x,v=h.y-n.y,k=h.x-n.x,P=v*y-k*g;if(P===0)return null;const A=(k*(a.y-n.y)-v*(a.x-n.x))/P;return new S(a.x+A*y,a.y+A*g)},f.aJ=ky,f.aK=ah,f.aL=function(a){let e=1/0,n=1/0,h=-1/0,g=-1/0;for(const y of a)e=Math.min(e,y.x),n=Math.min(n,y.y),h=Math.max(h,y.x),g=Math.max(g,y.y);return[e,n,h,g]},f.aM=Rn,f.aN=wt,f.aO=function(a,e,n,h,g=!1){if(!n[0]&&!n[1])return[0,0];const y=g?h==="map"?-a.bearingInRadians:0:h==="viewport"?a.bearingInRadians:0;if(y){const v=Math.sin(y),k=Math.cos(y);n=[n[0]*k-n[1]*v,n[0]*v+n[1]*k]}return[g?n[0]:wt(e,n[0],a.zoom),g?n[1]:wt(e,n[1],a.zoom)]},f.aQ=wp,f.aR=Wp,f.aS=bp,f.aT=Hp,f.aU=sn,f.aV=Dc,f.aW=le,f.aX=rt,f.aY=Oe,f.aZ=Kn,f.a_=B_,f.aa=Xl,f.ab=25,f.ac=Cp,f.ad=a=>{const e=window.document.createElement("video");return e.muted=!0,new Promise((n=>{e.onloadstart=()=>{n(e)};for(const h of a){const g=window.document.createElement("source");Ze(h)||(e.crossOrigin="Anonymous"),g.src=h,e.appendChild(g)}}))},f.ae=je,f.af=function(){return Ba++},f.ag=_,f.ah=ch,f.ai=Sd,f.aj=pt,f.ak=qs,f.al=G_,f.am=function(a){const e={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((n,h,g,y)=>{const v=g||y;return e[h]=!v||v.toLowerCase(),""})),e["max-age"]){const n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e},f.an=Pt,f.ao=85.051129,f.ap=ms,f.aq=function(a){return Math.pow(2,a)},f.ar=Ue,f.as=O_,f.at=function(a){return Math.log(a)/Math.LN2},f.au=function(a){var e=a[0],n=a[1];return e*e+n*n},f.av=function(a){if(!a.length)return new Set;const e=Math.max(...a.map((P=>P.canonical.z)));let n=1/0,h=-1/0,g=1/0,y=-1/0;const v=[];for(const P of a){const{x:A,y:z,z:O}=P.canonical,$=Math.pow(2,e-O),N=A*$,Z=z*$;v.push({id:P,x:N,y:Z}),N<n&&(n=N),N>h&&(h=N),Z<g&&(g=Z),Z>y&&(y=Z)}const k=new Set;for(const P of v)P.x!==n&&P.x!==h&&P.y!==g&&P.y!==y||k.add(P.id);return k},f.aw=function(a,e){const n=Math.abs(2*a.wrap)-+(a.wrap<0),h=Math.abs(2*e.wrap)-+(e.wrap<0);return a.overscaledZ-e.overscaledZ||h-n||e.canonical.y-a.canonical.y||e.canonical.x-a.canonical.x},f.ax=class{constructor(a,e){this.max=a,this.onRemove=e,this.reset()}reset(){for(const a in this.data)for(const e of this.data[a])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(a,e,n){const h=a.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const g={value:e,timeout:void 0};if(n!==void 0&&(g.timeout=setTimeout((()=>{this.remove(a,g)}),n)),this.data[h].push(g),this.order.push(h),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const e=this.data[a].shift();return e.timeout&&clearTimeout(e.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),e.value}getByKey(a){const e=this.data[a];return e?e[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,e){if(!this.has(a))return this;const n=a.wrapped().key,h=e===void 0?0:this.data[n].indexOf(e),g=this.data[n][h];return this.data[n].splice(h,1),g.timeout&&clearTimeout(g.timeout),this.data[n].length===0&&delete this.data[n],this.onRemove(g.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(a){const e=[];for(const n in this.data)for(const h of this.data[n])a(h.value)||e.push(h);for(const n of e)this.remove(n.value.tileID,n)}},f.ay=function(a,e){let n=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:g,minZoom:y,maxZoom:v}=a,k=g?Pt(qi.interpolationFactor(g,e,y,v),0,1):0;a.kind==="camera"?h=Si.number(a.minSize,a.maxSize,k):n=k}return{uSizeT:n,uSize:h}},f.b=Ca,f.b$=bo,f.b0=mt,f.b1=function(a){var e=new Pe(3);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e},f.b2=function(a,e,n){return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],a},f.b3=function(a,e){var n=e[0],h=e[1],g=e[2],y=n*n+h*h+g*g;return y>0&&(y=1/Math.sqrt(y)),a[0]=e[0]*y,a[1]=e[1]*y,a[2]=e[2]*y,a},f.b4=vt,f.b5=function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]},f.b6=function(a,e,n){return a[0]=e[0]*n[0],a[1]=e[1]*n[1],a[2]=e[2]*n[2],a[3]=e[3]*n[3],a},f.b7=Je,f.b8=function(a,e,n){const h=e[0]*n[0]+e[1]*n[1]+e[2]*n[2];return h===0?null:(-(a[0]*n[0]+a[1]*n[1]+a[2]*n[2])-n[3])/h},f.b9=si,f.bA=function(a,e,n,h){return a[0]=e[0]+n[0]*h,a[1]=e[1]+n[1]*h,a[2]=e[2]+n[2]*h,a},f.bB=Bt,f.bC=function(a,e,n){var h=n[0],g=n[1],y=n[2],v=n[3],k=e[0],P=e[1],A=e[2],z=g*A-y*P,O=y*k-h*A,$=h*P-g*k;return a[0]=k+v*(z+=z)+g*($+=$)-y*(O+=O),a[1]=P+v*O+y*z-h*$,a[2]=A+v*$+h*O-g*z,a},f.bD=function(a,e,n){const h=(function(P){var A=P[3],z=P[4],O=P[5],$=P[6],N=P[7],Z=P[8];return P[0]*(Z*z-O*N)+P[1]*(-Z*A+O*$)+P[2]*(N*A-z*$)})([a[0],a[1],a[2],e[0],e[1],e[2],n[0],n[1],n[2]]);if(h===0)return null;const g=vt([],[e[0],e[1],e[2]],[n[0],n[1],n[2]]),y=vt([],[n[0],n[1],n[2]],[a[0],a[1],a[2]]),v=vt([],[a[0],a[1],a[2]],[e[0],e[1],e[2]]),k=Tt([],g,-a[3]);return mt(k,k,Tt([],y,-e[3])),mt(k,k,Tt([],v,-n[3])),Tt(k,k,1/h),k},f.bE=Mp,f.bF=function(){return new Float64Array(4)},f.bG=function(a,e,n,h){var g=[],y=[];return g[0]=e[0]-n[0],g[1]=e[1]-n[1],g[2]=e[2]-n[2],y[0]=g[0]*Math.cos(h)-g[1]*Math.sin(h),y[1]=g[0]*Math.sin(h)+g[1]*Math.cos(h),y[2]=g[2],a[0]=y[0]+n[0],a[1]=y[1]+n[1],a[2]=y[2]+n[2],a},f.bH=function(a,e,n,h){var g=[],y=[];return g[0]=e[0]-n[0],g[1]=e[1]-n[1],g[2]=e[2]-n[2],y[0]=g[0],y[1]=g[1]*Math.cos(h)-g[2]*Math.sin(h),y[2]=g[1]*Math.sin(h)+g[2]*Math.cos(h),a[0]=y[0]+n[0],a[1]=y[1]+n[1],a[2]=y[2]+n[2],a},f.bI=function(a,e,n,h){var g=[],y=[];return g[0]=e[0]-n[0],g[1]=e[1]-n[1],g[2]=e[2]-n[2],y[0]=g[2]*Math.sin(h)+g[0]*Math.cos(h),y[1]=g[1],y[2]=g[2]*Math.cos(h)-g[0]*Math.sin(h),a[0]=y[0]+n[0],a[1]=y[1]+n[1],a[2]=y[2]+n[2],a},f.bJ=function(a,e,n){var h=Math.sin(n),g=Math.cos(n),y=e[0],v=e[1],k=e[2],P=e[3],A=e[8],z=e[9],O=e[10],$=e[11];return e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[0]=y*g-A*h,a[1]=v*g-z*h,a[2]=k*g-O*h,a[3]=P*g-$*h,a[8]=y*h+A*g,a[9]=v*h+z*g,a[10]=k*h+O*g,a[11]=P*h+$*g,a},f.bK=function(a,e){const n=Ht(a,360),h=Ht(e,360),g=h-n,y=h>n?g-360:g+360;return Math.abs(g)<Math.abs(y)?g:y},f.bL=function(a){return a[0]=0,a[1]=0,a[2]=0,a},f.bM=function(a,e,n,h){const g=Math.sqrt(a*a+e*e),y=Math.sqrt(n*n+h*h);a/=g,e/=g,n/=y,h/=y;const v=Math.acos(a*n+e*h);return-e*n+a*h>0?v:-v},f.bN=function(a,e){const n=Ht(a,2*Math.PI),h=Ht(e,2*Math.PI);return Math.min(Math.abs(n-h),Math.abs(n-h+2*Math.PI),Math.abs(n-h-2*Math.PI))},f.bO=function(){const a={},e=De.$version;for(const n in De.$root){const h=De.$root[n];if(h.required){let g=null;g=n==="version"?e:h.type==="array"?[]:{},g!=null&&(a[n]=g)}}return a},f.bP=Fe,f.bQ=Hh,f.bR=function a(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let h=0;h<e.length;h++)if(!a(e[h],n[h]))return!1;return!0}if(typeof e=="object"&&e!==null&&n!==null){if(typeof n!="object"||Object.keys(e).length!==Object.keys(n).length)return!1;for(const h in e)if(!a(e[h],n[h]))return!1;return!0}return e===n},f.bS=function(a){a=a.slice();const e=Object.create(null);for(let n=0;n<a.length;n++)e[a[n].id]=a[n];for(let n=0;n<a.length;n++)"ref"in a[n]&&(a[n]=bn(a[n],e[a[n].ref]));return a},f.bT=function(a,e){if(a.type==="custom")return new y1(a,e);switch(a.type){case"background":return new _1(a,e);case"circle":return new t0(a,e);case"color-relief":return new o0(a,e);case"fill":return new w0(a,e);case"fill-extrusion":return new z0(a,e);case"heatmap":return new n0(a,e);case"hillshade":return new r0(a,e);case"line":return new V0(a,e);case"raster":return new ip(a,e);case"symbol":return new jc(a,e)}},f.bU=a=>a.type==="raster",f.bV=xn,f.bW=function(a,e){if(!a)return[{command:"setStyle",args:[e]}];let n=[];try{if(!Et(a.version,e.version))return[{command:"setStyle",args:[e]}];Et(a.center,e.center)||n.push({command:"setCenter",args:[e.center]}),Et(a.state,e.state)||n.push({command:"setGlobalState",args:[e.state]}),Et(a.centerAltitude,e.centerAltitude)||n.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Et(a.zoom,e.zoom)||n.push({command:"setZoom",args:[e.zoom]}),Et(a.bearing,e.bearing)||n.push({command:"setBearing",args:[e.bearing]}),Et(a.pitch,e.pitch)||n.push({command:"setPitch",args:[e.pitch]}),Et(a.roll,e.roll)||n.push({command:"setRoll",args:[e.roll]}),Et(a.sprite,e.sprite)||n.push({command:"setSprite",args:[e.sprite]}),Et(a.glyphs,e.glyphs)||n.push({command:"setGlyphs",args:[e.glyphs]}),Et(a.transition,e.transition)||n.push({command:"setTransition",args:[e.transition]}),Et(a.light,e.light)||n.push({command:"setLight",args:[e.light]}),Et(a.terrain,e.terrain)||n.push({command:"setTerrain",args:[e.terrain]}),Et(a.sky,e.sky)||n.push({command:"setSky",args:[e.sky]}),Et(a.projection,e.projection)||n.push({command:"setProjection",args:[e.projection]});const h={},g=[];(function(v,k,P,A){let z;for(z in k=k||{},v=v||{})Object.prototype.hasOwnProperty.call(v,z)&&(Object.prototype.hasOwnProperty.call(k,z)||_i(z,P,A));for(z in k)Object.prototype.hasOwnProperty.call(k,z)&&(Object.prototype.hasOwnProperty.call(v,z)?Et(v[z],k[z])||(v[z].type==="geojson"&&k[z].type==="geojson"&&yi(v,k,z)?li(P,{command:"setGeoJSONSourceData",args:[z,k[z].data]}):Fi(z,k,P,A)):wn(z,k,P))})(a.sources,e.sources,g,h);const y=[];a.layers&&a.layers.forEach((v=>{"source"in v&&h[v.source]?n.push({command:"removeLayer",args:[v.id]}):y.push(v)})),n=n.concat(g),(function(v,k,P){k=k||[];const A=(v=v||[]).map(Xs),z=k.map(Xs),O=v.reduce(Yn,{}),$=k.reduce(Yn,{}),N=A.slice(),Z=Object.create(null);let W,Y,te,ce,ne;for(let oe=0,pe=0;oe<A.length;oe++)W=A[oe],Object.prototype.hasOwnProperty.call($,W)?pe++:(li(P,{command:"removeLayer",args:[W]}),N.splice(N.indexOf(W,pe),1));for(let oe=0,pe=0;oe<z.length;oe++)W=z[z.length-1-oe],N[N.length-1-oe]!==W&&(Object.prototype.hasOwnProperty.call(O,W)?(li(P,{command:"removeLayer",args:[W]}),N.splice(N.lastIndexOf(W,N.length-pe),1)):pe++,ce=N[N.length-oe],li(P,{command:"addLayer",args:[$[W],ce]}),N.splice(N.length-oe,0,W),Z[W]=!0);for(let oe=0;oe<z.length;oe++)if(W=z[oe],Y=O[W],te=$[W],!Z[W]&&!Et(Y,te))if(Et(Y.source,te.source)&&Et(Y["source-layer"],te["source-layer"])&&Et(Y.type,te.type)){for(ne in rn(Y.layout,te.layout,P,W,null,"setLayoutProperty"),rn(Y.paint,te.paint,P,W,null,"setPaintProperty"),Et(Y.filter,te.filter)||li(P,{command:"setFilter",args:[W,te.filter]}),Et(Y.minzoom,te.minzoom)&&Et(Y.maxzoom,te.maxzoom)||li(P,{command:"setLayerZoomRange",args:[W,te.minzoom,te.maxzoom]}),Y)Object.prototype.hasOwnProperty.call(Y,ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?rn(Y[ne],te[ne],P,W,ne.slice(6),"setPaintProperty"):Et(Y[ne],te[ne])||li(P,{command:"setLayerProperty",args:[W,ne,te[ne]]}));for(ne in te)Object.prototype.hasOwnProperty.call(te,ne)&&!Object.prototype.hasOwnProperty.call(Y,ne)&&ne!=="layout"&&ne!=="paint"&&ne!=="filter"&&ne!=="metadata"&&ne!=="minzoom"&&ne!=="maxzoom"&&(ne.indexOf("paint.")===0?rn(Y[ne],te[ne],P,W,ne.slice(6),"setPaintProperty"):Et(Y[ne],te[ne])||li(P,{command:"setLayerProperty",args:[W,ne,te[ne]]}))}else li(P,{command:"removeLayer",args:[W]}),ce=N[N.lastIndexOf(W)+1],li(P,{command:"addLayer",args:[te,ce]})})(y,e.layers,n)}catch(h){console.warn("Unable to compute style diff:",h),n=[{command:"setStyle",args:[e]}]}return n},f.bX=function(a){const e=[],n=a.id;return n===void 0&&e.push({message:`layers.${n}: missing required property "id"`}),a.render===void 0&&e.push({message:`layers.${n}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},f.bY=Cn,f.bZ=tr,f.b_=class extends xa{constructor(a,e){super(a,e),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},f.ba=function(a,e,n){return a[0]=e[0]*n,a[1]=e[1]*n,a[2]=e[2]*n,a[3]=e[3]*n,a},f.bb=function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]},f.bc=V_,f.bd=fh,f.be=function(a,e,n,h,g){var y=1/Math.tan(e/2);if(a[0]=y/n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=y,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,g!=null&&g!==1/0){var v=1/(h-g);a[10]=(g+h)*v,a[14]=2*g*h*v}else a[10]=-1,a[14]=-2*h;return a},f.bf=function(a){var e=new Pe(16);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15],e},f.bg=function(a,e,n){var h=Math.sin(n),g=Math.cos(n),y=e[0],v=e[1],k=e[2],P=e[3],A=e[4],z=e[5],O=e[6],$=e[7];return e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[0]=y*g+A*h,a[1]=v*g+z*h,a[2]=k*g+O*h,a[3]=P*g+$*h,a[4]=A*g-y*h,a[5]=z*g-v*h,a[6]=O*g-k*h,a[7]=$*g-P*h,a},f.bh=function(a,e,n){var h=Math.sin(n),g=Math.cos(n),y=e[4],v=e[5],k=e[6],P=e[7],A=e[8],z=e[9],O=e[10],$=e[11];return e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[4]=y*g+A*h,a[5]=v*g+z*h,a[6]=k*g+O*h,a[7]=P*g+$*h,a[8]=A*g-y*h,a[9]=z*g-v*h,a[10]=O*g-k*h,a[11]=$*g-P*h,a},f.bi=function(){const a=new Float32Array(16);return Ue(a),a},f.bj=function(){const a=new Float64Array(16);return Ue(a),a},f.bk=function(){return new Float64Array(16)},f.bl=function(a,e,n){const h=new Float64Array(4);return Bt(h,a,e-90,n),h},f.bm=function(a,e,n,h){var g,y,v,k,P,A=e[0],z=e[1],O=e[2],$=e[3],N=n[0],Z=n[1],W=n[2],Y=n[3];return(y=A*N+z*Z+O*W+$*Y)<0&&(y=-y,N=-N,Z=-Z,W=-W,Y=-Y),1-y>xe?(g=Math.acos(y),v=Math.sin(g),k=Math.sin((1-h)*g)/v,P=Math.sin(h*g)/v):(k=1-h,P=h),a[0]=k*A+P*N,a[1]=k*z+P*Z,a[2]=k*O+P*W,a[3]=k*$+P*Y,a},f.bn=function(a){const e=new Float64Array(9);(function(y,v){var k=v[0],P=v[1],A=v[2],z=v[3],O=k+k,$=P+P,N=A+A,Z=k*O,W=P*O,Y=P*$,te=A*O,ce=A*$,ne=A*N,oe=z*O,pe=z*$,_e=z*N;y[0]=1-Y-ne,y[3]=W-_e,y[6]=te+pe,y[1]=W+_e,y[4]=1-Z-ne,y[7]=ce-oe,y[2]=te-pe,y[5]=ce+oe,y[8]=1-Z-Y})(e,a);const n=Kn(-Math.asin(Pt(e[2],-1,1)));let h,g;return Math.hypot(e[5],e[8])<.001?(h=0,g=-Kn(Math.atan2(e[3],e[4]))):(h=Kn(e[5]===0&&e[8]===0?0:Math.atan2(e[5],e[8])),g=Kn(e[1]===0&&e[0]===0?0:Math.atan2(e[1],e[0]))),{roll:h,pitch:n+90,bearing:g}},f.bo=function(a,e){return a.roll==e.roll&&a.pitch==e.pitch&&a.bearing==e.bearing},f.bp=Ft,f.bq=xo,f.br=uh,f.bs=md,f.bt=lh,f.bu=mi,f.bv=ki,f.bw=Yi,f.bx=function(a,e,n,h,g){return mi(h,g,Pt((a-e)/(n-e),0,1))},f.by=Ht,f.bz=function(){return new Float64Array(3)},f.c=we,f.c$=function(a,e,n,h,g){return s(this,void 0,void 0,(function*(){if(Se())try{return yield Ur(a,e,n,h,g)}catch{}return(function(y,v,k,P,A){const z=y.width,O=y.height;$a&&ga||($a=new OffscreenCanvas(z,O),ga=$a.getContext("2d",{willReadFrequently:!0})),$a.width=z,$a.height=O,ga.drawImage(y,0,0,z,O);const $=ga.getImageData(v,k,P,A);return ga.clearRect(0,0,z,O),$.data})(a,e,n,h,g)}))},f.c0=class extends xa{constructor(a,e){super(a,e),this.current=Xa}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let e=1;e<16;e++)if(a[e]!==this.current[e]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},f.c1=Hl,f.c2=class extends xa{constructor(a,e){super(a,e),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},f.c3=class extends xa{constructor(a,e){super(a,e),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},f.c4=Ve,f.c5=function(a,e){var n=Math.sin(e),h=Math.cos(e);return a[0]=h,a[1]=n,a[2]=0,a[3]=-n,a[4]=h,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},f.c6=function(a,e,n){var h=e[0],g=e[1],y=e[2];return a[0]=h*n[0]+g*n[3]+y*n[6],a[1]=h*n[1]+g*n[4]+y*n[7],a[2]=h*n[2]+g*n[5]+y*n[8],a},f.c7=function(a,e,n,h,g,y,v){var k=1/(e-n),P=1/(h-g),A=1/(y-v);return a[0]=-2*k,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*P,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*A,a[11]=0,a[12]=(e+n)*k,a[13]=(g+h)*P,a[14]=(v+y)*A,a[15]=1,a},f.c8=class extends xa{constructor(a,e){super(a,e),this.current=new Array}set(a){if(a!=this.current){this.current=a;const e=new Float32Array(4*a.length);for(let n=0;n<a.length;n++)e[4*n]=a[n].r,e[4*n+1]=a[n].g,e[4*n+2]=a[n].b,e[4*n+3]=a[n].a;this.gl.uniform4fv(this.location,e)}}},f.c9=class extends xa{constructor(a,e){super(a,e),this.current=new Array}set(a){if(a!=this.current){this.current=a;const e=new Float32Array(a);this.gl.uniform1fv(this.location,e)}}},f.cA=function(a,e){return Le[e]&&"touches"in a},f.cB=function(a){return Le[a]||Q[a]},f.cC=function(a,e,n){var h=e[0],g=e[1];return a[0]=n[0]*h+n[4]*g+n[12],a[1]=n[1]*h+n[5]*g+n[13],a},f.cD=function(a,e){const{x:n,y:h}=bd.fromLngLat(e);return!(a<0||a>25||h<0||h>=1||n<0||n>=1)},f.cE=function(a,e){return a[0]=e[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=e[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=e[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},f.cF=class extends Xu{},f.cG=ak,f.cI=Te,f.cJ=function(a,e){we.REGISTERED_PROTOCOLS[a]=e},f.cK=function(a){delete we.REGISTERED_PROTOCOLS[a]},f.cL=function(a,e){const n={};for(let g=0;g<a.length;g++){const y=e&&e[a[g].id]||Vu(a[g]);e&&(e[a[g].id]=y);let v=n[y];v||(v=n[y]=[]),v.push(a[g])}const h=[];for(const g in n)h.push(n[g]);return h},f.cM=ct,f.cN=U_,f.cO=by,f.cP=S_,f.cQ=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Mt/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const e=a.bucket.layers[0],n=e.layout,h=e._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new wi(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new wi(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new wi(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:z}=a.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new wi(A),a.canonical),h["text-size"].possiblyEvaluate(new wi(z),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:z}=a.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new wi(A),a.canonical),h["icon-size"].possiblyEvaluate(new wi(z),a.canonical)]}const y=n.get("text-line-height")*Rn,v=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",k=n.get("text-keep-upright"),P=n.get("text-size");for(const A of a.bucket.features){const z=n.get("text-font").evaluate(A,{},a.canonical).join(","),O=P.evaluate(A,{},a.canonical),$=g.layoutTextSize.evaluate(A,{},a.canonical),N=g.layoutIconSize.evaluate(A,{},a.canonical),Z={horizontal:{},vertical:void 0},W=A.text;let Y,te=[0,0];if(W){const oe=W.toString(),pe=n.get("text-letter-spacing").evaluate(A,{},a.canonical)*Rn,_e=ep(oe)?pe:0,Ee=n.get("text-anchor").evaluate(A,{},a.canonical),We=zy(e,A,a.canonical);if(!We){const Xe=n.get("text-radial-offset").evaluate(A,{},a.canonical);te=Xe?Dy(Ee,[Xe*Rn,Zp]):n.get("text-offset").evaluate(A,{},a.canonical).map((qe=>qe*Rn))}let Ge=v?"center":n.get("text-justify").evaluate(A,{},a.canonical);const He=n.get("symbol-placement")==="point"?n.get("text-max-width").evaluate(A,{},a.canonical)*Rn:1/0,at=()=>{a.bucket.allowVerticalPlacement&&nl(oe)&&(Z.vertical=Fc(W,a.glyphMap,a.glyphPositions,a.imagePositions,z,He,y,Ee,"left",_e,te,f.az.vertical,!0,$,O))};if(!v&&We){const Xe=new Set;if(Ge==="auto")for(let Be=0;Be<We.values.length;Be+=2)Xe.add(Wp(We.values[Be]));else Xe.add(Ge);let qe=!1;for(const Be of Xe)if(!Z.horizontal[Be])if(qe)Z.horizontal[Be]=Z.horizontal[0];else{const ht=Fc(W,a.glyphMap,a.glyphPositions,a.imagePositions,z,He,y,"center",Be,_e,te,f.az.horizontal,!1,$,O);ht&&(Z.horizontal[Be]=ht,qe=ht.positionedLines.length===1)}at()}else{Ge==="auto"&&(Ge=Wp(Ee));const Xe=Fc(W,a.glyphMap,a.glyphPositions,a.imagePositions,z,He,y,Ee,Ge,_e,te,f.az.horizontal,!1,$,O);Xe&&(Z.horizontal[Ge]=Xe),at(),nl(oe)&&v&&k&&(Z.vertical=Fc(W,a.glyphMap,a.glyphPositions,a.imagePositions,z,He,y,Ee,Ge,_e,te,f.az.vertical,!1,$,O))}}let ce=!1;if(A.icon&&A.icon.name){const oe=a.imageMap[A.icon.name];oe&&(Y=f1(a.imagePositions[A.icon.name],n.get("icon-offset").evaluate(A,{},a.canonical),n.get("icon-anchor").evaluate(A,{},a.canonical)),ce=!!oe.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=ce:a.bucket.sdfIcons!==ce&&gn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(oe.pixelRatio!==a.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const ne=Fy(Z.horizontal)||Z.vertical;a.bucket.iconsInText=!!ne&&ne.iconsInText,(ne||Y)&&ik(a.bucket,A,Z,Y,a.imageMap,g,$,N,te,ce,a.canonical,a.subdivisionGranularity)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},f.cR=mp,f.cS=_p,f.cT=yp,f.cU=function(a){const e=new Rc;return(function(n,h){for(const g in n.layers)h.writeMessage(3,N1,n.layers[g])})(a,e),e.finish()},f.cV=function(a,e,n,h,g,y){let v=Sy(a,e,n,g,0);return v=Sy(v,e,h,y,1),v},f.cW=class{constructor(a){this.maxEntries=a,this.map=new Map}get(a){const e=this.map.get(a);return e!==void 0&&(this.map.delete(a),this.map.set(a,e)),e}set(a,e){if(this.map.has(a))this.map.delete(a);else if(this.map.size>=this.maxEntries){const n=this.map.keys().next().value;this.map.delete(n)}this.map.set(a,e)}clear(){this.map.clear()}},f.cX=s_,f.cY=Rc,f.cZ=vy,f.c_=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},f.ca=class extends yo{},f.cb=q0,f.cc=class extends Wl{},f.cd=hp,f.ce=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},f.cf=qg,f.cg=function(a,e,n){var h=e[0],g=e[1],y=e[2],v=n[3]*h+n[7]*g+n[11]*y+n[15];return a[0]=(n[0]*h+n[4]*g+n[8]*y+n[12])/(v=v||1),a[1]=(n[1]*h+n[5]*g+n[9]*y+n[13])/v,a[2]=(n[2]*h+n[6]*g+n[10]*y+n[14])/v,a},f.ch=class extends td{},f.ci=class extends t{},f.cj=function(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&a[7]===e[7]&&a[8]===e[8]&&a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]},f.ck=function(a,e){var n=a[0],h=a[1],g=a[2],y=a[3],v=a[4],k=a[5],P=a[6],A=a[7],z=a[8],O=a[9],$=a[10],N=a[11],Z=a[12],W=a[13],Y=a[14],te=a[15],ce=e[0],ne=e[1],oe=e[2],pe=e[3],_e=e[4],Ee=e[5],We=e[6],Ge=e[7],He=e[8],at=e[9],Xe=e[10],qe=e[11],Be=e[12],ht=e[13],lt=e[14],ft=e[15];return Math.abs(n-ce)<=xe*Math.max(1,Math.abs(n),Math.abs(ce))&&Math.abs(h-ne)<=xe*Math.max(1,Math.abs(h),Math.abs(ne))&&Math.abs(g-oe)<=xe*Math.max(1,Math.abs(g),Math.abs(oe))&&Math.abs(y-pe)<=xe*Math.max(1,Math.abs(y),Math.abs(pe))&&Math.abs(v-_e)<=xe*Math.max(1,Math.abs(v),Math.abs(_e))&&Math.abs(k-Ee)<=xe*Math.max(1,Math.abs(k),Math.abs(Ee))&&Math.abs(P-We)<=xe*Math.max(1,Math.abs(P),Math.abs(We))&&Math.abs(A-Ge)<=xe*Math.max(1,Math.abs(A),Math.abs(Ge))&&Math.abs(z-He)<=xe*Math.max(1,Math.abs(z),Math.abs(He))&&Math.abs(O-at)<=xe*Math.max(1,Math.abs(O),Math.abs(at))&&Math.abs($-Xe)<=xe*Math.max(1,Math.abs($),Math.abs(Xe))&&Math.abs(N-qe)<=xe*Math.max(1,Math.abs(N),Math.abs(qe))&&Math.abs(Z-Be)<=xe*Math.max(1,Math.abs(Z),Math.abs(Be))&&Math.abs(W-ht)<=xe*Math.max(1,Math.abs(W),Math.abs(ht))&&Math.abs(Y-lt)<=xe*Math.max(1,Math.abs(Y),Math.abs(lt))&&Math.abs(te-ft)<=xe*Math.max(1,Math.abs(te),Math.abs(ft))},f.cl=function(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a},f.cm=a=>a.type==="symbol",f.cn=a=>a.type==="circle",f.co=a=>a.type==="heatmap",f.cp=a=>a.type==="line",f.cq=a=>a.type==="fill",f.cr=a=>a.type==="fill-extrusion",f.cs=a=>a.type==="hillshade",f.ct=a=>a.type==="color-relief",f.cu=a=>a.type==="background",f.cv=a=>a.type==="custom",f.cw=Jt,f.cx=function(a,e,n){const h=xt(e.x-n.x,e.y-n.y),g=xt(a.x-n.x,a.y-n.y),y=Math.atan2(h[0]*g[1]-h[1]*g[0],(function(v,k){return v[0]*k[0]+v[1]*k[1]})(h,g));return Kn(y)},f.cy=Ct,f.cz=function(a,e){return Q[e]&&(a instanceof MouseEvent||a instanceof WheelEvent)},f.d=Ze,f.d0=Hg,f.d1=M,f.d2=class{constructor(a,e){this.layers={[Sd]:this},this.name=Sd,this.version=e?e.version:1,this.extent=e?e.extent:4096,this.length=a.length,this.features=a}feature(a){return new V1(this.features[a],this.extent)}},f.d3=d,f.d4=Vs,f.e=Ii,f.f=a=>s(void 0,void 0,void 0,(function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(e)}catch(n){throw new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),f.g=Ie,f.h=a=>new Promise(((e,n)=>{const h=new Image;h.onload=()=>{e(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame((()=>{h.src=Nr}))},h.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(a)],{type:"image/png"});h.src=a.byteLength?URL.createObjectURL(g):Nr})),f.i=Ma,f.j=(a,e)=>Ye(Ii(a,{type:"json"}),e),f.k=oi,f.l=Lt,f.m=Ye,f.n=(a,e)=>Ye(Ii(a,{type:"arrayBuffer"}),e),f.o=function(a){return new Rc(a).readFields(r1,[])},f.p=k_,f.q=function(a){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))},f.r=hd,f.s=Gr,f.t=pa,f.u=De,f.v=zl,f.w=gn,f.x=Qh,f.y=Rl,f.z=Bl})),u("worker",["./shared"],(function(f){class s{constructor(Q,J){this.keyCache={},Q&&this.replace(Q,J)}replace(Q,J){this._layerConfigs={},this._layers={},this.update(Q,[],J)}update(Q,J,se){for(const we of Q){this._layerConfigs[we.id]=we;const Ie=this._layers[we.id]=f.bT(we,se);Ie._featureFilter=f.aj(Ie.filter,se),this.keyCache[we.id]&&delete this.keyCache[we.id]}for(const we of J)delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we];this.familiesBySource={};const ve=f.cL(Object.values(this._layerConfigs),this.keyCache);for(const we of ve){const Ie=we.map((ut=>this._layers[ut.id])),Ce=Ie[0];if(Ce.isHidden())continue;const Te=Ce.source||"";let Fe=this.familiesBySource[Te];Fe||(Fe=this.familiesBySource[Te]={});const Ye=Ce.sourceLayer||f.ai;let Ze=Fe[Ye];Ze||(Ze=Fe[Ye]=[]),Ze.push(Ie)}}}class S{constructor(Q){const J={},se=[];for(const Ce in Q){const Te=Q[Ce],Fe=J[Ce]={};for(const Ye in Te){const Ze=Te[+Ye];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;const ut={x:0,y:0,w:Ze.bitmap.width+2,h:Ze.bitmap.height+2};se.push(ut),Fe[Ye]={rect:ut,metrics:Ze.metrics}}}const{w:ve,h:we}=f.p(se),Ie=new f.r({width:ve||1,height:we||1});for(const Ce in Q){const Te=Q[Ce];for(const Fe in Te){const Ye=Te[+Fe];if(!Ye||Ye.bitmap.width===0||Ye.bitmap.height===0)continue;const Ze=J[Ce][Fe].rect;f.r.copy(Ye.bitmap,Ie,{x:0,y:0},{x:Ze.x+1,y:Ze.y+1},Ye.bitmap)}}this.image=Ie,this.positions=J}}f.cM("GlyphAtlas",S);class M{constructor(Q){this.tileID=new f.a2(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.uid=Q.uid,this.zoom=Q.zoom,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Q.showCollisionBoxes,this.collectResourceTiming=!!Q.collectResourceTiming,this.returnDependencies=!!Q.returnDependencies,this.promoteId=Q.promoteId,this.inFlightDependencies=[]}parse(Q,J,se,ve,we){return f._(this,void 0,void 0,(function*(){this.status="parsing",this.data=Q,this.collisionBoxArray=new f.ag;const Ie=new f.cN(Object.keys(Q.layers).sort()),Ce=new f.cO(this.tileID,this.promoteId);Ce.bucketLayerIDs=[];const Te={},Fe={featureIndex:Ce,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:se,subdivisionGranularity:we},Ye=J.familiesBySource[this.source];for(const yi in Ye){const rn=Q.layers[yi];if(!rn)continue;rn.version===1&&f.w(`Vector tile source "${this.source}" layer "${yi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Xs=Ie.encode(yi),Yn=[];for(let je=0;je<rn.length;je++){const Ln=rn.feature(je),En=Ce.getId(Ln,yi);Yn.push({feature:Ln,id:En,index:je,sourceLayerIndex:Xs})}for(const je of Ye[yi]){const Ln=je[0];Ln.source!==this.source&&f.w(`layer.source = ${Ln.source} does not equal this.source = ${this.source}`),Ln.isHidden(this.zoom,!0)||(D(je,this.zoom,se),(Te[Ln.id]=Ln.createBucket({index:Ce.bucketLayerIDs.length,layers:je,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xs,sourceID:this.source})).populate(Yn,Fe,this.tileID.canonical),Ce.bucketLayerIDs.push(je.map((En=>En.id))))}}const Ze=f.bY(Fe.glyphDependencies,(yi=>Object.keys(yi).map(Number)));this.inFlightDependencies.forEach((yi=>yi?.abort())),this.inFlightDependencies=[];let ut=Promise.resolve({});if(Object.keys(Ze).length){const yi=new AbortController;this.inFlightDependencies.push(yi),ut=ve.sendAsync({type:"GG",data:{stacks:Ze,source:this.source,tileID:this.tileID,type:"glyphs"}},yi)}const gt=Object.keys(Fe.iconDependencies);let Lt=Promise.resolve({});if(gt.length){const yi=new AbortController;this.inFlightDependencies.push(yi),Lt=ve.sendAsync({type:"GI",data:{icons:gt,source:this.source,tileID:this.tileID,type:"icons"}},yi)}const oi=Object.keys(Fe.patternDependencies);let Qt=Promise.resolve({});if(oi.length){const yi=new AbortController;this.inFlightDependencies.push(yi),Qt=ve.sendAsync({type:"GI",data:{icons:oi,source:this.source,tileID:this.tileID,type:"patterns"}},yi)}const De=Fe.dashDependencies;let gi=Promise.resolve({});if(Object.keys(De).length){const yi=new AbortController;this.inFlightDependencies.push(yi),gi=ve.sendAsync({type:"GDA",data:{dashes:De}},yi)}const[bn,Et,li,wn]=yield Promise.all([ut,Lt,Qt,gi]),_i=new S(bn),Fi=new f.cP(Et,li);for(const yi in Te){const rn=Te[yi];rn instanceof f.ah?(D(rn.layers,this.zoom,se),f.cQ({bucket:rn,glyphMap:bn,glyphPositions:_i.positions,imageMap:Et,imagePositions:Fi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Fe.subdivisionGranularity})):rn.hasDependencies&&(rn instanceof f.cR||rn instanceof f.cS||rn instanceof f.cT)&&(D(rn.layers,this.zoom,se),rn.addFeatures(Fe,this.tileID.canonical,Fi.patternPositions,wn))}return this.status="done",{buckets:Object.values(Te).filter((yi=>!yi.isEmpty())),featureIndex:Ce,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:_i.image,imageAtlas:Fi,dashPositions:wn,glyphMap:this.returnDependencies?bn:null,iconMap:this.returnDependencies?Et:null,glyphPositions:this.returnDependencies?_i.positions:null}}))}}function D(Le,Q,J){const se=new f.H(Q);for(const ve of Le)ve.recalculate(se,J)}class j{constructor(Q,J,se,ve,we){this.type=Q,this.properties=se||{},this.extent=we,this.pointsArray=J,this.id=ve}loadGeometry(){return this.pointsArray.map((Q=>Q.map((J=>new f.P(J.x,J.y)))))}}class V{constructor(Q,J,se){this.version=2,this._myFeatures=Q,this.name=J,this.length=Q.length,this.extent=se}feature(Q){return this._myFeatures[Q]}}class X{constructor(){this.layers={}}addLayer(Q){this.layers[Q.name]=Q}}function re(Le){let Q=f.cU(Le);return Q.byteOffset===0&&Q.byteLength===Q.buffer.byteLength||(Q=new Uint8Array(Q)),{vectorTile:Le,rawData:Q.buffer}}function ae(Le,Q,J){const{extent:se}=Le,ve=Math.pow(2,J.z-Q.z),we=(J.x-Q.x*ve)*se,Ie=(J.y-Q.y*ve)*se,Ce=[];for(let Te=0;Te<Le.length;Te++){const Fe=Le.feature(Te);let Ye=Fe.loadGeometry();for(const ut of Ye)for(const gt of ut)gt.x=gt.x*ve-we,gt.y=gt.y*ve-Ie;const Ze=128;Ye=f.cV(Ye,Fe.type,-Ze,-Ze,se+Ze,se+Ze),Ye.length!==0&&Ce.push(new j(Fe.type,Ye,Fe.properties,Fe.id,se))}return new V(Ce,Le.name,se)}class H{constructor(Q,J,se){this.actor=Q,this.layerIndex=J,this.availableImages=se,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new f.cW(1e3)}loadVectorTile(Q,J){return f._(this,void 0,void 0,(function*(){const se=yield f.n(Q.request,J);try{return{vectorTile:Q.encoding!=="mlt"?new f.cX(new f.cY(se.data)):new f.cZ(se.data),rawData:se.data,cacheControl:se.cacheControl,expires:se.expires}}catch(ve){const we=new Uint8Array(se.data);let Ie=`Unable to parse the tile at ${Q.request.url}, `;throw Ie+=we[0]===31&&we[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ve.message}`,new Error(Ie)}}))}loadTile(Q){return f._(this,void 0,void 0,(function*(){const{uid:J,overzoomParameters:se}=Q;se&&(Q.request=se.overzoomRequest);const ve=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new f.c_(Q.request),we=new M(Q);this.loading[J]=we;const Ie=new AbortController;we.abort=Ie;try{const Ce=yield this.loadVectorTile(Q,Ie);if(delete this.loading[J],!Ce)return null;if(se){const ut=this._getOverzoomTile(Q,Ce.vectorTile);Ce.rawData=ut.rawData,Ce.vectorTile=ut.vectorTile}const Te=Ce.rawData,Fe={};Ce.expires&&(Fe.expires=Ce.expires),Ce.cacheControl&&(Fe.cacheControl=Ce.cacheControl);const Ye={};if(ve){const ut=ve.finish();ut&&(Ye.resourceTiming=JSON.parse(JSON.stringify(ut)))}we.vectorTile=Ce.vectorTile;const Ze=we.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);this.loaded[J]=we,this.fetching[J]={rawTileData:Te,cacheControl:Fe,resourceTiming:Ye};try{const ut=yield Ze;return f.e({rawTileData:Te.slice(0),encoding:Q.encoding},ut,Fe,Ye)}finally{delete this.fetching[J]}}catch(Ce){throw delete this.loading[J],we.status="done",this.loaded[J]=we,Ce}}))}_getOverzoomTile(Q,J){const{tileID:se,source:ve,overzoomParameters:we}=Q,{maxZoomTileID:Ie}=we,Ce=`${Ie.key}_${se.key}`,Te=this.overzoomedTileResultCache.get(Ce);if(Te)return Te;const Fe=new X,Ye=this.layerIndex.familiesBySource[ve];for(const ut in Ye){const gt=J.layers[ut];if(!gt)continue;const Lt=ae(gt,Ie,se.canonical);Lt.length>0&&Fe.addLayer(Lt)}const Ze=re(Fe);return this.overzoomedTileResultCache.set(Ce,Ze),Ze}reloadTile(Q){return f._(this,void 0,void 0,(function*(){const J=Q.uid;if(!this.loaded||!this.loaded[J])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const se=this.loaded[J];if(se.showCollisionBoxes=Q.showCollisionBoxes,se.status==="parsing"){const ve=yield se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);let we;if(this.fetching[J]){const{rawTileData:Ie,cacheControl:Ce,resourceTiming:Te}=this.fetching[J];delete this.fetching[J],we=f.e({rawTileData:Ie.slice(0),encoding:Q.encoding},ve,Ce,Te)}else we=ve;return we}if(se.status==="done"&&se.vectorTile)return se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity)}))}abortTile(Q){return f._(this,void 0,void 0,(function*(){const J=this.loading,se=Q.uid;J&&J[se]&&J[se].abort&&(J[se].abort.abort(),delete J[se])}))}removeTile(Q){return f._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[Q.uid]&&delete this.loaded[Q.uid]}))}}class Se{constructor(){this.loaded={}}loadTile(Q){return f._(this,void 0,void 0,(function*(){const{uid:J,encoding:se,rawImageData:ve,redFactor:we,greenFactor:Ie,blueFactor:Ce,baseShift:Te}=Q,Fe=ve.width+2,Ye=ve.height+2,Ze=f.b(ve)?new f.R({width:Fe,height:Ye},yield f.c$(ve,-1,-1,Fe,Ye)):ve,ut=new f.d0(J,Ze,se,we,Ie,Ce,Te);return this.loaded=this.loaded||{},this.loaded[J]=ut,ut}))}removeTile(Q){const J=this.loaded,se=Q.uid;J&&J[se]&&delete J[se]}}var xe,Pe,Ve=(function(){if(Pe)return xe;function Le(J,se){if(J.length!==0){Q(J[0],se);for(var ve=1;ve<J.length;ve++)Q(J[ve],!se)}}function Q(J,se){for(var ve=0,we=0,Ie=0,Ce=J.length,Te=Ce-1;Ie<Ce;Te=Ie++){var Fe=(J[Ie][0]-J[Te][0])*(J[Te][1]+J[Ie][1]),Ye=ve+Fe;we+=Math.abs(ve)>=Math.abs(Fe)?ve-Ye+Fe:Fe-Ye+ve,ve=Ye}ve+we>=0!=!!se&&J.reverse()}return Pe=1,xe=function J(se,ve){var we,Ie=se&&se.type;if(Ie==="FeatureCollection")for(we=0;we<se.features.length;we++)J(se.features[we],ve);else if(Ie==="GeometryCollection")for(we=0;we<se.geometries.length;we++)J(se.geometries[we],ve);else if(Ie==="Feature")J(se.geometry,ve);else if(Ie==="Polygon")Le(se.coordinates,ve);else if(Ie==="MultiPolygon")for(we=0;we<se.coordinates.length;we++)Le(se.coordinates[we],ve);return se}})(),Ue=f.d1(Ve);const et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Le=>Le},Je=Math.fround||(nt=new Float32Array(1),Le=>(nt[0]=+Le,nt[0]));var nt;class mt{constructor(Q){this.options=Object.assign(Object.create(et),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){const{log:J,minZoom:se,maxZoom:ve}=this.options;J&&console.time("total time");const we=`prepare ${Q.length} points`;J&&console.time(we),this.points=Q;const Ie=[];for(let Te=0;Te<Q.length;Te++){const Fe=Q[Te];if(!Fe.geometry)continue;const[Ye,Ze]=Fe.geometry.coordinates,ut=Je(bt(Ye)),gt=Je(si(Ze));Ie.push(ut,gt,1/0,Te,-1,1),this.options.reduce&&Ie.push(0)}let Ce=this.trees[ve+1]=this._createTree(Ie);J&&console.timeEnd(we);for(let Te=ve;Te>=se;Te--){const Fe=+Date.now();Ce=this.trees[Te]=this._createTree(this._cluster(Ce,Te)),J&&console.log("z%d: %d clusters in %dms",Te,Ce.numItems,+Date.now()-Fe)}return J&&console.timeEnd("total time"),this}getClusters(Q,J){let se=((Q[0]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,Q[1]));let we=Q[2]===180?180:((Q[2]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)se=-180,we=180;else if(se>we){const Ze=this.getClusters([se,ve,180,Ie],J),ut=this.getClusters([-180,ve,we,Ie],J);return Ze.concat(ut)}const Ce=this.trees[this._limitZoom(J)],Te=Ce.range(bt(se),si(Ie),bt(we),si(ve)),Fe=Ce.data,Ye=[];for(const Ze of Te){const ut=this.stride*Ze;Ye.push(Fe[ut+5]>1?Tt(Fe,ut,this.clusterProps):this.points[Fe[ut+3]])}return Ye}getChildren(Q){const J=this._getOriginId(Q),se=this._getOriginZoom(Q),ve="No cluster with the specified id.",we=this.trees[se];if(!we)throw new Error(ve);const Ie=we.data;if(J*this.stride>=Ie.length)throw new Error(ve);const Ce=this.options.radius/(this.options.extent*Math.pow(2,se-1)),Te=we.within(Ie[J*this.stride],Ie[J*this.stride+1],Ce),Fe=[];for(const Ye of Te){const Ze=Ye*this.stride;Ie[Ze+4]===Q&&Fe.push(Ie[Ze+5]>1?Tt(Ie,Ze,this.clusterProps):this.points[Ie[Ze+3]])}if(Fe.length===0)throw new Error(ve);return Fe}getLeaves(Q,J,se){const ve=[];return this._appendLeaves(ve,Q,J=J||10,se=se||0,0),ve}getTile(Q,J,se){const ve=this.trees[this._limitZoom(Q)],we=Math.pow(2,Q),{extent:Ie,radius:Ce}=this.options,Te=Ce/Ie,Fe=(se-Te)/we,Ye=(se+1+Te)/we,Ze={features:[]};return this._addTileFeatures(ve.range((J-Te)/we,Fe,(J+1+Te)/we,Ye),ve.data,J,se,we,Ze),J===0&&this._addTileFeatures(ve.range(1-Te/we,Fe,1,Ye),ve.data,we,se,we,Ze),J===we-1&&this._addTileFeatures(ve.range(0,Fe,Te/we,Ye),ve.data,-1,se,we,Ze),Ze.features.length?Ze:null}getClusterExpansionZoom(Q){let J=this._getOriginZoom(Q)-1;for(;J<=this.options.maxZoom;){const se=this.getChildren(Q);if(J++,se.length!==1)break;Q=se[0].properties.cluster_id}return J}_appendLeaves(Q,J,se,ve,we){const Ie=this.getChildren(J);for(const Ce of Ie){const Te=Ce.properties;if(Te&&Te.cluster?we+Te.point_count<=ve?we+=Te.point_count:we=this._appendLeaves(Q,Te.cluster_id,se,ve,we):we<ve?we++:Q.push(Ce),Q.length===se)break}return we}_createTree(Q){const J=new f.aT(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<Q.length;se+=this.stride)J.add(Q[se],Q[se+1]);return J.finish(),J.data=Q,J}_addTileFeatures(Q,J,se,ve,we,Ie){for(const Ce of Q){const Te=Ce*this.stride,Fe=J[Te+5]>1;let Ye,Ze,ut;if(Fe)Ye=vt(J,Te,this.clusterProps),Ze=J[Te],ut=J[Te+1];else{const oi=this.points[J[Te+3]];Ye=oi.properties;const[Qt,De]=oi.geometry.coordinates;Ze=bt(Qt),ut=si(De)}const gt={type:1,geometry:[[Math.round(this.options.extent*(Ze*we-se)),Math.round(this.options.extent*(ut*we-ve))]],tags:Ye};let Lt;Lt=Fe||this.options.generateId?J[Te+3]:this.points[J[Te+3]].id,Lt!==void 0&&(gt.id=Lt),Ie.features.push(gt)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,J){const{radius:se,extent:ve,reduce:we,minPoints:Ie}=this.options,Ce=se/(ve*Math.pow(2,J)),Te=Q.data,Fe=[],Ye=this.stride;for(let Ze=0;Ze<Te.length;Ze+=Ye){if(Te[Ze+2]<=J)continue;Te[Ze+2]=J;const ut=Te[Ze],gt=Te[Ze+1],Lt=Q.within(Te[Ze],Te[Ze+1],Ce),oi=Te[Ze+5];let Qt=oi;for(const De of Lt){const gi=De*Ye;Te[gi+2]>J&&(Qt+=Te[gi+5])}if(Qt>oi&&Qt>=Ie){let De,gi=ut*oi,bn=gt*oi,Et=-1;const li=(Ze/Ye<<5)+(J+1)+this.points.length;for(const wn of Lt){const _i=wn*Ye;if(Te[_i+2]<=J)continue;Te[_i+2]=J;const Fi=Te[_i+5];gi+=Te[_i]*Fi,bn+=Te[_i+1]*Fi,Te[_i+4]=li,we&&(De||(De=this._map(Te,Ze,!0),Et=this.clusterProps.length,this.clusterProps.push(De)),we(De,this._map(Te,_i)))}Te[Ze+4]=li,Fe.push(gi/Qt,bn/Qt,1/0,li,-1,Qt),we&&Fe.push(Et)}else{for(let De=0;De<Ye;De++)Fe.push(Te[Ze+De]);if(Qt>1)for(const De of Lt){const gi=De*Ye;if(!(Te[gi+2]<=J)){Te[gi+2]=J;for(let bn=0;bn<Ye;bn++)Fe.push(Te[gi+bn])}}}}return Fe}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,J,se){if(Q[J+5]>1){const Ie=this.clusterProps[Q[J+6]];return se?Object.assign({},Ie):Ie}const ve=this.points[Q[J+3]].properties,we=this.options.map(ve);return se&&we===ve?Object.assign({},we):we}}function Tt(Le,Q,J){return{type:"Feature",id:Le[Q+3],properties:vt(Le,Q,J),geometry:{type:"Point",coordinates:[(se=Le[Q],360*(se-.5)),di(Le[Q+1])]}};var se}function vt(Le,Q,J){const se=Le[Q+5],ve=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,we=Le[Q+6],Ie=we===-1?{}:Object.assign({},J[we]);return Object.assign(Ie,{cluster:!0,cluster_id:Le[Q+3],point_count:se,point_count_abbreviated:ve})}function bt(Le){return Le/360+.5}function si(Le){const Q=Math.sin(Le*Math.PI/180),J=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return J<0?0:J>1?1:J}function di(Le){const Q=(180-360*Le)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function Wt(Le,Q,J,se){let ve=se;const we=Q+(J-Q>>1);let Ie,Ce=J-Q;const Te=Le[Q],Fe=Le[Q+1],Ye=Le[J],Ze=Le[J+1];for(let ut=Q+3;ut<J;ut+=3){const gt=Bt(Le[ut],Le[ut+1],Te,Fe,Ye,Ze);if(gt>ve)Ie=ut,ve=gt;else if(gt===ve){const Lt=Math.abs(ut-we);Lt<Ce&&(Ie=ut,Ce=Lt)}}ve>se&&(Ie-Q>3&&Wt(Le,Q,Ie,se),Le[Ie+2]=ve,J-Ie>3&&Wt(Le,Ie,J,se))}function Bt(Le,Q,J,se,ve,we){let Ie=ve-J,Ce=we-se;if(Ie!==0||Ce!==0){const Te=((Le-J)*Ie+(Q-se)*Ce)/(Ie*Ie+Ce*Ce);Te>1?(J=ve,se=we):Te>0&&(J+=Ie*Te,se+=Ce*Te)}return Ie=Le-J,Ce=Q-se,Ie*Ie+Ce*Ce}function Vt(Le,Q,J,se){const ve={id:Le??null,type:Q,geometry:J,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Q==="Point"||Q==="MultiPoint"||Q==="LineString")xt(ve,J);else if(Q==="Polygon")xt(ve,J[0]);else if(Q==="MultiLineString")for(const we of J)xt(ve,we);else if(Q==="MultiPolygon")for(const we of J)xt(ve,we[0]);return ve}function xt(Le,Q){for(let J=0;J<Q.length;J+=3)Le.minX=Math.min(Le.minX,Q[J]),Le.minY=Math.min(Le.minY,Q[J+1]),Le.maxX=Math.max(Le.maxX,Q[J]),Le.maxY=Math.max(Le.maxY,Q[J+1])}function Mt(Le,Q,J,se){if(!Q.geometry)return;const ve=Q.geometry.coordinates;if(ve&&ve.length===0)return;const we=Q.geometry.type,Ie=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2);let Ce=[],Te=Q.id;if(J.promoteId?Te=Q.properties[J.promoteId]:J.generateId&&(Te=se||0),we==="Point")wt(ve,Ce);else if(we==="MultiPoint")for(const Fe of ve)wt(Fe,Ce);else if(we==="LineString")Ht(ve,Ce,Ie,!1);else if(we==="MultiLineString"){if(J.lineMetrics){for(const Fe of ve)Ce=[],Ht(Fe,Ce,Ie,!1),Le.push(Vt(Te,"LineString",Ce,Q.properties));return}mi(ve,Ce,Ie,!1)}else if(we==="Polygon")mi(ve,Ce,Ie,!0);else{if(we!=="MultiPolygon"){if(we==="GeometryCollection"){for(const Fe of Q.geometry.geometries)Mt(Le,{id:Te,geometry:Fe,properties:Q.properties},J,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Fe of ve){const Ye=[];mi(Fe,Ye,Ie,!0),Ce.push(Ye)}}Le.push(Vt(Te,we,Ce,Q.properties))}function wt(Le,Q){Q.push(ki(Le[0]),Jt(Le[1]),0)}function Ht(Le,Q,J,se){let ve,we,Ie=0;for(let Te=0;Te<Le.length;Te++){const Fe=ki(Le[Te][0]),Ye=Jt(Le[Te][1]);Q.push(Fe,Ye,0),Te>0&&(Ie+=se?(ve*Ye-Fe*we)/2:Math.sqrt(Math.pow(Fe-ve,2)+Math.pow(Ye-we,2))),ve=Fe,we=Ye}const Ce=Q.length-3;Q[2]=1,Wt(Q,0,Ce,J),Q[Ce+2]=1,Q.size=Math.abs(Ie),Q.start=0,Q.end=Q.size}function mi(Le,Q,J,se){for(let ve=0;ve<Le.length;ve++){const we=[];Ht(Le[ve],we,J,se),Q.push(we)}}function ki(Le){return Le/360+.5}function Jt(Le){const Q=Math.sin(Le*Math.PI/180),J=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return J<0?0:J>1?1:J}function Ct(Le,Q,J,se,ve,we,Ie,Ce){if(se/=Q,we>=(J/=Q)&&Ie<se)return Le;if(Ie<J||we>=se)return null;const Te=[];for(const Fe of Le){const Ye=Fe.geometry;let Ze=Fe.type;const ut=ve===0?Fe.minX:Fe.minY,gt=ve===0?Fe.maxX:Fe.maxY;if(ut>=J&&gt<se){Te.push(Fe);continue}if(gt<J||ut>=se)continue;let Lt=[];if(Ze==="Point"||Ze==="MultiPoint")Pt(Ye,Lt,J,se,ve);else if(Ze==="LineString")dn(Ye,Lt,J,se,ve,!1,Ce.lineMetrics);else if(Ze==="MultiLineString")Ba(Ye,Lt,J,se,ve,!1);else if(Ze==="Polygon")Ba(Ye,Lt,J,se,ve,!0);else if(Ze==="MultiPolygon")for(const oi of Ye){const Qt=[];Ba(oi,Qt,J,se,ve,!0),Qt.length&&Lt.push(Qt)}if(Lt.length){if(Ce.lineMetrics&&Ze==="LineString"){for(const oi of Lt)Te.push(Vt(Fe.id,Ze,oi,Fe.tags));continue}Ze!=="LineString"&&Ze!=="MultiLineString"||(Lt.length===1?(Ze="LineString",Lt=Lt[0]):Ze="MultiLineString"),Ze!=="Point"&&Ze!=="MultiPoint"||(Ze=Lt.length===3?"Point":"MultiPoint"),Te.push(Vt(Fe.id,Ze,Lt,Fe.tags))}}return Te.length?Te:null}function Pt(Le,Q,J,se,ve){for(let we=0;we<Le.length;we+=3){const Ie=Le[we+ve];Ie>=J&&Ie<=se&&Cn(Q,Le[we],Le[we+1],Le[we+2])}}function dn(Le,Q,J,se,ve,we,Ie){let Ce=Ii(Le);const Te=ve===0?tr:xn;let Fe,Ye,Ze=Le.start;for(let Qt=0;Qt<Le.length-3;Qt+=3){const De=Le[Qt],gi=Le[Qt+1],bn=Le[Qt+2],Et=Le[Qt+3],li=Le[Qt+4],wn=ve===0?De:gi,_i=ve===0?Et:li;let Fi=!1;Ie&&(Fe=Math.sqrt(Math.pow(De-Et,2)+Math.pow(gi-li,2))),wn<J?_i>J&&(Ye=Te(Ce,De,gi,Et,li,J),Ie&&(Ce.start=Ze+Fe*Ye)):wn>se?_i<se&&(Ye=Te(Ce,De,gi,Et,li,se),Ie&&(Ce.start=Ze+Fe*Ye)):Cn(Ce,De,gi,bn),_i<J&&wn>=J&&(Ye=Te(Ce,De,gi,Et,li,J),Fi=!0),_i>se&&wn<=se&&(Ye=Te(Ce,De,gi,Et,li,se),Fi=!0),!we&&Fi&&(Ie&&(Ce.end=Ze+Fe*Ye),Q.push(Ce),Ce=Ii(Le)),Ie&&(Ze+=Fe)}let ut=Le.length-3;const gt=Le[ut],Lt=Le[ut+1],oi=ve===0?gt:Lt;oi>=J&&oi<=se&&Cn(Ce,gt,Lt,Le[ut+2]),ut=Ce.length-3,we&&ut>=3&&(Ce[ut]!==Ce[0]||Ce[ut+1]!==Ce[1])&&Cn(Ce,Ce[0],Ce[1],Ce[2]),Ce.length&&Q.push(Ce)}function Ii(Le){const Q=[];return Q.size=Le.size,Q.start=Le.start,Q.end=Le.end,Q}function Ba(Le,Q,J,se,ve,we){for(const Ie of Le)dn(Ie,Q,J,se,ve,we,!1)}function Cn(Le,Q,J,se){Le.push(Q,J,se)}function tr(Le,Q,J,se,ve,we){const Ie=(we-Q)/(se-Q);return Cn(Le,we,J+(ve-J)*Ie,1),Ie}function xn(Le,Q,J,se,ve,we){const Ie=(we-J)/(ve-J);return Cn(Le,Q+(se-Q)*Ie,we,1),Ie}function Vr(Le,Q){const J=[];for(let se=0;se<Le.length;se++){const ve=Le[se],we=ve.type;let Ie;if(we==="Point"||we==="MultiPoint"||we==="LineString")Ie=gn(ve.geometry,Q);else if(we==="MultiLineString"||we==="Polygon"){Ie=[];for(const Ce of ve.geometry)Ie.push(gn(Ce,Q))}else if(we==="MultiPolygon"){Ie=[];for(const Ce of ve.geometry){const Te=[];for(const Fe of Ce)Te.push(gn(Fe,Q));Ie.push(Te)}}J.push(Vt(ve.id,we,Ie,ve.tags))}return J}function gn(Le,Q){const J=[];J.size=Le.size,Le.start!==void 0&&(J.start=Le.start,J.end=Le.end);for(let se=0;se<Le.length;se+=3)J.push(Le[se]+Q,Le[se+1],Le[se+2]);return J}function oa(Le,Q){if(Le.transformed)return Le;const J=1<<Le.z,se=Le.x,ve=Le.y;for(const we of Le.features){const Ie=we.geometry,Ce=we.type;if(we.geometry=[],Ce===1)for(let Te=0;Te<Ie.length;Te+=2)we.geometry.push(Ma(Ie[Te],Ie[Te+1],Q,J,se,ve));else for(let Te=0;Te<Ie.length;Te++){const Fe=[];for(let Ye=0;Ye<Ie[Te].length;Ye+=2)Fe.push(Ma(Ie[Te][Ye],Ie[Te][Ye+1],Q,J,se,ve));we.geometry.push(Fe)}}return Le.transformed=!0,Le}function Ma(Le,Q,J,se,ve,we){return[Math.round(J*(Le*se-ve)),Math.round(J*(Q*se-we))]}function Ci(Le,Q,J,se,ve){const we=Q===ve.maxZoom?0:ve.tolerance/((1<<Q)*ve.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:Le.length,source:null,x:J,y:se,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ce of Le)Ca(Ie,Ce,we,ve);return Ie}function Ca(Le,Q,J,se){const ve=Q.geometry,we=Q.type,Ie=[];if(Le.minX=Math.min(Le.minX,Q.minX),Le.minY=Math.min(Le.minY,Q.minY),Le.maxX=Math.max(Le.maxX,Q.maxX),Le.maxY=Math.max(Le.maxY,Q.maxY),we==="Point"||we==="MultiPoint")for(let Ce=0;Ce<ve.length;Ce+=3)Ie.push(ve[Ce],ve[Ce+1]),Le.numPoints++,Le.numSimplified++;else if(we==="LineString")Nr(Ie,ve,Le,J,!1,!1);else if(we==="MultiLineString"||we==="Polygon")for(let Ce=0;Ce<ve.length;Ce++)Nr(Ie,ve[Ce],Le,J,we==="Polygon",Ce===0);else if(we==="MultiPolygon")for(let Ce=0;Ce<ve.length;Ce++){const Te=ve[Ce];for(let Fe=0;Fe<Te.length;Fe++)Nr(Ie,Te[Fe],Le,J,!0,Fe===0)}if(Ie.length){let Ce=Q.tags||null;if(we==="LineString"&&se.lineMetrics){Ce={};for(const Fe in Q.tags)Ce[Fe]=Q.tags[Fe];Ce.mapbox_clip_start=ve.start/ve.size,Ce.mapbox_clip_end=ve.end/ve.size}const Te={geometry:Ie,type:we==="Polygon"||we==="MultiPolygon"?3:we==="LineString"||we==="MultiLineString"?2:1,tags:Ce};Q.id!==null&&(Te.id=Q.id),Le.features.push(Te)}}function Nr(Le,Q,J,se,ve,we){const Ie=se*se;if(se>0&&Q.size<(ve?Ie:se))return void(J.numPoints+=Q.length/3);const Ce=[];for(let Te=0;Te<Q.length;Te+=3)(se===0||Q[Te+2]>Ie)&&(J.numSimplified++,Ce.push(Q[Te],Q[Te+1])),J.numPoints++;ve&&(function(Te,Fe){let Ye=0;for(let Ze=0,ut=Te.length,gt=ut-2;Ze<ut;gt=Ze,Ze+=2)Ye+=(Te[Ze]-Te[gt])*(Te[Ze+1]+Te[gt+1]);if(Ye>0===Fe)for(let Ze=0,ut=Te.length;Ze<ut/2;Ze+=2){const gt=Te[Ze],Lt=Te[Ze+1];Te[Ze]=Te[ut-2-Ze],Te[Ze+1]=Te[ut-1-Ze],Te[ut-2-Ze]=gt,Te[ut-1-Ze]=Lt}})(Ce,we),Le.push(Ce)}const Ur={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class $a{constructor(Q,J){const se=(J=this.options=(function(we,Ie){for(const Ce in Ie)we[Ce]=Ie[Ce];return we})(Object.create(Ur),J)).debug;if(se&&console.time("preprocess data"),J.maxZoom<0||J.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(J.promoteId&&J.generateId)throw new Error("promoteId and generateId cannot be used together.");let ve=(function(we,Ie){const Ce=[];if(we.type==="FeatureCollection")for(let Te=0;Te<we.features.length;Te++)Mt(Ce,we.features[Te],Ie,Te);else Mt(Ce,we.type==="Feature"?we:{geometry:we},Ie);return Ce})(Q,J);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",J.indexMaxZoom,J.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ve=(function(we,Ie){const Ce=Ie.buffer/Ie.extent;let Te=we;const Fe=Ct(we,1,-1-Ce,Ce,0,-1,2,Ie),Ye=Ct(we,1,1-Ce,2+Ce,0,-1,2,Ie);return(Fe||Ye)&&(Te=Ct(we,1,-Ce,1+Ce,0,-1,2,Ie)||[],Fe&&(Te=Vr(Fe,1).concat(Te)),Ye&&(Te=Te.concat(Vr(Ye,-1)))),Te})(ve,J),ve.length&&this.splitTile(ve,0,0,0),se&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Q,J,se,ve,we,Ie,Ce){const Te=[Q,J,se,ve],Fe=this.options,Ye=Fe.debug;for(;Te.length;){ve=Te.pop(),se=Te.pop(),J=Te.pop(),Q=Te.pop();const Ze=1<<J,ut=ga(J,se,ve);let gt=this.tiles[ut];if(!gt&&(Ye>1&&console.time("creation"),gt=this.tiles[ut]=Ci(Q,J,se,ve,Fe),this.tileCoords.push({z:J,x:se,y:ve}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",J,se,ve,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));const Fi=`z${J}`;this.stats[Fi]=(this.stats[Fi]||0)+1,this.total++}if(gt.source=Q,we==null){if(J===Fe.indexMaxZoom||gt.numPoints<=Fe.indexMaxPoints)continue}else{if(J===Fe.maxZoom||J===we)continue;if(we!=null){const Fi=we-J;if(se!==Ie>>Fi||ve!==Ce>>Fi)continue}}if(gt.source=null,Q.length===0)continue;Ye>1&&console.time("clipping");const Lt=.5*Fe.buffer/Fe.extent,oi=.5-Lt,Qt=.5+Lt,De=1+Lt;let gi=null,bn=null,Et=null,li=null,wn=Ct(Q,Ze,se-Lt,se+Qt,0,gt.minX,gt.maxX,Fe),_i=Ct(Q,Ze,se+oi,se+De,0,gt.minX,gt.maxX,Fe);Q=null,wn&&(gi=Ct(wn,Ze,ve-Lt,ve+Qt,1,gt.minY,gt.maxY,Fe),bn=Ct(wn,Ze,ve+oi,ve+De,1,gt.minY,gt.maxY,Fe),wn=null),_i&&(Et=Ct(_i,Ze,ve-Lt,ve+Qt,1,gt.minY,gt.maxY,Fe),li=Ct(_i,Ze,ve+oi,ve+De,1,gt.minY,gt.maxY,Fe),_i=null),Ye>1&&console.timeEnd("clipping"),Te.push(gi||[],J+1,2*se,2*ve),Te.push(bn||[],J+1,2*se,2*ve+1),Te.push(Et||[],J+1,2*se+1,2*ve),Te.push(li||[],J+1,2*se+1,2*ve+1)}}getTile(Q,J,se){Q=+Q,J=+J,se=+se;const ve=this.options,{extent:we,debug:Ie}=ve;if(Q<0||Q>24)return null;const Ce=1<<Q,Te=ga(Q,J=J+Ce&Ce-1,se);if(this.tiles[Te])return oa(this.tiles[Te],we);Ie>1&&console.log("drilling down to z%d-%d-%d",Q,J,se);let Fe,Ye=Q,Ze=J,ut=se;for(;!Fe&&Ye>0;)Ye--,Ze>>=1,ut>>=1,Fe=this.tiles[ga(Ye,Ze,ut)];return Fe&&Fe.source?(Ie>1&&(console.log("found parent tile z%d-%d-%d",Ye,Ze,ut),console.time("drilling down")),this.splitTile(Fe.source,Ye,Ze,ut,Q,J,se),Ie>1&&console.timeEnd("drilling down"),this.tiles[Te]?oa(this.tiles[Te],we):null):null}}function ga(Le,Q,J){return 32*((1<<Le)*J+Q)+Le}class Gr extends H{constructor(Q,J,se,ve=ms){super(Q,J,se),this._dataUpdateable=new Map,this._createGeoJSONIndex=ve}loadVectorTile(Q,J){return f._(this,void 0,void 0,(function*(){const se=Q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ve=this._geoJSONIndex.getTile(se.z,se.x,se.y);return ve?re(new f.d2(ve.features,{version:2,extent:f.a5})):null}))}loadData(Q){return f._(this,void 0,void 0,(function*(){var J;(J=this._pendingRequest)===null||J===void 0||J.abort();const se=this._startPerformance(Q);this._pendingRequest=new AbortController;try{(!this._pendingData||Q.request||Q.data||Q.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(Q,this._pendingRequest));const ve=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(ve,Q),this.loaded={};const we={};return Q.request&&(we.data=ve),this._finishPerformance(se,Q,we),we}catch(ve){if(delete this._pendingRequest,f.Z(ve))return{abandoned:!0};throw ve}}))}_startPerformance(Q){var J;if(!((J=Q?.request)===null||J===void 0)&&J.collectResourceTiming)return new f.c_(Q.request)}_finishPerformance(Q,J,se){if(!Q)return;const ve=Q.finish();ve&&(se.resourceTiming={},se.resourceTiming[J.source]=JSON.parse(JSON.stringify(ve)))}getData(){return f._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(Q){const J=this.loaded;return J&&J[Q.uid]?super.reloadTile(Q):this.loadTile(Q)}loadAndProcessGeoJSON(Q,J){return f._(this,void 0,void 0,(function*(){let se;if(Q.request?se=yield this.loadGeoJSONFromUrl(Q.request,Q.promoteId,J):Q.data?se=this._loadGeoJSONFromObject(Q.data,Q.promoteId):Q.dataDiff&&(se=this._loadGeoJSONFromDiff(Q.dataDiff,Q.promoteId,Q.source)),delete this._pendingRequest,typeof se!="object")throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);return Ue(se,!0),Q.filter&&(se=this._filterGeoJSON(se,Q.filter)),se}))}loadGeoJSONFromUrl(Q,J,se){return f._(this,void 0,void 0,(function*(){const ve=yield f.j(Q,se);return this._dataUpdateable=f.a7(ve.data,J),ve.data}))}_loadGeoJSONFromObject(Q,J){return this._dataUpdateable=f.a7(Q,J),Q}_loadGeoJSONFromDiff(Q,J,se){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se}`);f.a8(this._dataUpdateable,Q,J);const ve=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(ve)}_filterGeoJSON(Q,J){const se=f.d3(J,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map((we=>`${we.key}: ${we.message}`)).join(", "));const ve=Q.features.filter((we=>se.value.evaluate({zoom:0},we)));return this._toFeatureCollection(ve)}_toFeatureCollection(Q){return{type:"FeatureCollection",features:Q}}removeSource(Q){return f._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(Q){return this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId)}getClusterChildren(Q){return this._geoJSONIndex.getChildren(Q.clusterId)}getClusterLeaves(Q){return this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset)}}function ms(Le,Q){return Q.cluster?new mt((function({superclusterOptions:J,clusterProperties:se}){if(!se||!J)return J;const ve={},we={},Ie={accumulated:null,zoom:0},Ce={properties:null},Te=Object.keys(se);for(const Fe of Te){const[Ye,Ze]=se[Fe],ut=f.d3(Ze),gt=f.d3(typeof Ye=="string"?[Ye,["accumulated"],["get",Fe]]:Ye);ve[Fe]=ut.value,we[Fe]=gt.value}return J.map=Fe=>{Ce.properties=Fe;const Ye={};for(const Ze of Te)Ye[Ze]=ve[Ze].evaluate(Ie,Ce);return Ye},J.reduce=(Fe,Ye)=>{Ce.properties=Ye;for(const Ze of Te)Ie.accumulated=Fe[Ze],Fe[Ze]=we[Ze].evaluate(Ie,Ce)},J})(Q)).load(Le.features):(function(J,se){return new $a(J,se)})(Le,Q.geojsonVtOptions)}class Kn{constructor(Q){this.self=Q,this.actor=new f.L(Q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(J,se)=>{if(this.externalWorkerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.externalWorkerSourceTypes[J]=se},this.self.addProtocol=f.cJ,this.self.removeProtocol=f.cK,this.self.registerRTLTextPlugin=J=>{f.d4.setMethods(J)},this.actor.registerMessageHandler("LDT",((J,se)=>this._getDEMWorkerSource(J,se.source).loadTile(se))),this.actor.registerMessageHandler("RDT",((J,se)=>f._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(J,se.source).removeTile(se)})))),this.actor.registerMessageHandler("GCEZ",((J,se)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(J,se.type,se.source).getClusterExpansionZoom(se)})))),this.actor.registerMessageHandler("GCC",((J,se)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(J,se.type,se.source).getClusterChildren(se)})))),this.actor.registerMessageHandler("GCL",((J,se)=>f._(this,void 0,void 0,(function*(){return this._getWorkerSource(J,se.type,se.source).getClusterLeaves(se)})))),this.actor.registerMessageHandler("LD",((J,se)=>this._getWorkerSource(J,se.type,se.source).loadData(se))),this.actor.registerMessageHandler("GD",((J,se)=>this._getWorkerSource(J,se.type,se.source).getData())),this.actor.registerMessageHandler("LT",((J,se)=>this._getWorkerSource(J,se.type,se.source).loadTile(se))),this.actor.registerMessageHandler("RT",((J,se)=>this._getWorkerSource(J,se.type,se.source).reloadTile(se))),this.actor.registerMessageHandler("AT",((J,se)=>this._getWorkerSource(J,se.type,se.source).abortTile(se))),this.actor.registerMessageHandler("RMT",((J,se)=>this._getWorkerSource(J,se.type,se.source).removeTile(se))),this.actor.registerMessageHandler("RS",((J,se)=>f._(this,void 0,void 0,(function*(){if(!this.workerSources[J]||!this.workerSources[J][se.type]||!this.workerSources[J][se.type][se.source])return;const ve=this.workerSources[J][se.type][se.source];delete this.workerSources[J][se.type][se.source],ve.removeSource!==void 0&&ve.removeSource(se)})))),this.actor.registerMessageHandler("RM",(J=>f._(this,void 0,void 0,(function*(){delete this.layerIndexes[J],delete this.availableImages[J],delete this.workerSources[J],delete this.demWorkerSources[J],this.globalStates.delete(J)})))),this.actor.registerMessageHandler("SR",((J,se)=>f._(this,void 0,void 0,(function*(){this.referrer=se})))),this.actor.registerMessageHandler("SRPS",((J,se)=>this._syncRTLPluginState(J,se))),this.actor.registerMessageHandler("IS",((J,se)=>f._(this,void 0,void 0,(function*(){this.self.importScripts(se)})))),this.actor.registerMessageHandler("SI",((J,se)=>this._setImages(J,se))),this.actor.registerMessageHandler("UL",((J,se)=>f._(this,void 0,void 0,(function*(){this._getLayerIndex(J).update(se.layers,se.removedIds,this._getGlobalState(J))})))),this.actor.registerMessageHandler("UGS",((J,se)=>f._(this,void 0,void 0,(function*(){const ve=this._getGlobalState(J);for(const we in se)ve[we]=se[we]})))),this.actor.registerMessageHandler("SL",((J,se)=>f._(this,void 0,void 0,(function*(){this._getLayerIndex(J).replace(se,this._getGlobalState(J))}))))}_getGlobalState(Q){let J=this.globalStates.get(Q);return J||(J={},this.globalStates.set(Q,J)),J}_setImages(Q,J){return f._(this,void 0,void 0,(function*(){this.availableImages[Q]=J;for(const se in this.workerSources[Q]){const ve=this.workerSources[Q][se];for(const we in ve)ve[we].availableImages=J}}))}_syncRTLPluginState(Q,J){return f._(this,void 0,void 0,(function*(){return yield f.d4.syncState(J,this.self.importScripts)}))}_getAvailableImages(Q){let J=this.availableImages[Q];return J||(J=[]),J}_getLayerIndex(Q){let J=this.layerIndexes[Q];return J||(J=this.layerIndexes[Q]=new s),J}_getWorkerSource(Q,J,se){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][J]||(this.workerSources[Q][J]={}),!this.workerSources[Q][J][se]){const ve={sendAsync:(we,Ie)=>(we.targetMapId=Q,this.actor.sendAsync(we,Ie))};switch(J){case"vector":this.workerSources[Q][J][se]=new H(ve,this._getLayerIndex(Q),this._getAvailableImages(Q));break;case"geojson":this.workerSources[Q][J][se]=new Gr(ve,this._getLayerIndex(Q),this._getAvailableImages(Q));break;default:this.workerSources[Q][J][se]=new this.externalWorkerSourceTypes[J](ve,this._getLayerIndex(Q),this._getAvailableImages(Q))}}return this.workerSources[Q][J][se]}_getDEMWorkerSource(Q,J){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][J]||(this.demWorkerSources[Q][J]=new Se),this.demWorkerSources[Q][J]}}return f.i(self)&&(self.worker=new Kn(self)),Kn})),u("index",["exports","./shared"],(function(f,s){var S="5.15.0";function M(){var x=new s.A(4);return s.A!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x}let D,j,V;const X={frame(x,t,o){const m=requestAnimationFrame((w=>{_(),t(w)})),{unsubscribe:_}=s.s(x.signal,"abort",(()=>{_(),cancelAnimationFrame(m),o(new s.a(x.signal.reason))}),!1)},frameAsync(x){return new Promise(((t,o)=>{this.frame(x,t,o)}))},getImageData(x,t=0){return this.getImageCanvasContext(x).getImageData(-t,-t,x.width+2*t,x.height+2*t)},getImageCanvasContext(x){const t=window.document.createElement("canvas"),o=t.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return t.width=x.width,t.height=x.height,o.drawImage(x,0,0,x.width,x.height),o},resolveURL:x=>(D||(D=document.createElement("a")),D.href=x,D.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return V!==void 0?V:!!matchMedia&&(j==null&&(j=matchMedia("(prefers-reduced-motion: reduce)")),j.matches)},set prefersReducedMotion(x){V=x}},re=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(x){this._frozenAt=x}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function ae(){return re.getCurrentTime()}class H{static testProp(t){if(!H.docStyle)return t[0];for(let o=0;o<t.length;o++)if(t[o]in H.docStyle)return t[o];return t[0]}static create(t,o,m){const _=window.document.createElement(t);return o!==void 0&&(_.className=o),m&&m.appendChild(_),_}static createNS(t,o){return window.document.createElementNS(t,o)}static disableDrag(){H.docStyle&&H.selectProp&&(H.userSelect=H.docStyle[H.selectProp],H.docStyle[H.selectProp]="none")}static enableDrag(){H.docStyle&&H.selectProp&&(H.docStyle[H.selectProp]=H.userSelect)}static setTransform(t,o){t.style[H.transformProp]=o}static addEventListener(t,o,m,_={}){t.addEventListener(o,m,"passive"in _?_:_.capture)}static removeEventListener(t,o,m,_={}){t.removeEventListener(o,m,"passive"in _?_:_.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",H.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",H.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",H.suppressClickInternal,!0)}),0)}static getScale(t){const o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}static getPoint(t,o,m){const _=o.boundingClientRect;return new s.P((m.clientX-_.left)/o.x-t.clientLeft,(m.clientY-_.top)/o.y-t.clientTop)}static mousePos(t,o){const m=H.getScale(t);return H.getPoint(t,m,o)}static touchPos(t,o){const m=[],_=H.getScale(t);for(let w=0;w<o.length;w++)m.push(H.getPoint(t,_,o[w]));return m}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const o=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),m=o.querySelectorAll("script");for(const _ of m)_.remove();return H.clean(o),o.innerHTML}static isPossiblyDangerous(t,o){const m=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!m.includes("javascript:")&&!m.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const o=t.children;for(const m of o)H.removeAttributes(m),H.clean(m)}static removeAttributes(t){for(const{name:o,value:m}of t.attributes)H.isPossiblyDangerous(o,m)&&t.removeAttribute(o)}}H.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,H.selectProp=H.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),H.transformProp=H.testProp(["transform","WebkitTransform"]);const Se={supported:!1,testSupport:function(x){!Ve&&Pe&&(Ue?et(x):xe=x)}};let xe,Pe,Ve=!1,Ue=!1;function et(x){const t=x.createTexture();x.bindTexture(x.TEXTURE_2D,t);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,Pe),x.isContextLost())return;Se.supported=!0}catch{}x.deleteTexture(t),Ve=!0}var Je;typeof document<"u"&&(Pe=document.createElement("img"),Pe.onload=()=>{xe&&et(xe),xe=null,Ue=!0},Pe.onerror=()=>{Ve=!0,xe=null},Pe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(x){let t,o,m,_;x.resetRequestQueue=()=>{t=[],o=0,m=0,_={}},x.addThrottleControl=I=>{const R=m++;return _[R]=I,R},x.removeThrottleControl=I=>{delete _[I],T()},x.getImage=(I,R,B=!0)=>new Promise(((G,U)=>{Se.supported&&(I.headers||(I.headers={}),I.headers.accept="image/webp,*/*"),s.e(I,{type:"image"}),t.push({abortController:R,requestParameters:I,supportImageRefresh:B,state:"queued",onError:K=>{U(K)},onSuccess:K=>{G(K)}}),T()}));const w=I=>s._(this,void 0,void 0,(function*(){I.state="running";const{requestParameters:R,supportImageRefresh:B,onError:G,onSuccess:U,abortController:K}=I,ee=B===!1&&!s.i(self)&&!s.g(R.url)&&(!R.headers||Object.keys(R.headers).reduce(((ue,fe)=>ue&&fe==="accept"),!0));o++;const le=ee?E(R,K):s.m(R,K);try{const ue=yield le;delete I.abortController,I.state="completed",ue.data instanceof HTMLImageElement||s.b(ue.data)?U(ue):ue.data&&U({data:yield(he=ue.data,typeof createImageBitmap=="function"?s.f(he):s.h(he)),cacheControl:ue.cacheControl,expires:ue.expires})}catch(ue){delete I.abortController,G(ue)}finally{o--,T()}var he})),T=()=>{const I=(()=>{for(const R of Object.keys(_))if(_[R]())return!0;return!1})()?s.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=o;R<I&&t.length>0;R++){const B=t.shift();B.abortController.signal.aborted?R--:w(B)}},E=(I,R)=>new Promise(((B,G)=>{const U=new Image,K=I.url,ee=I.credentials;ee&&ee==="include"?U.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!s.d(K))&&(U.crossOrigin="anonymous"),R.signal.addEventListener("abort",(()=>{U.src="",G(new s.a(R.signal.reason))})),U.fetchPriority="high",U.onload=()=>{U.onerror=U.onload=null,B({data:U})},U.onerror=()=>{U.onerror=U.onload=null,R.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},U.src=K}))})(Je||(Je={})),Je.resetRequestQueue();class nt{constructor(t){this._transformRequestFn=t??null}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function mt(x){const t=[];if(typeof x=="string")t.push({id:"default",url:x});else if(x&&x.length>0){const o=[];for(const{id:m,url:_}of x){const w=`${m}${_}`;o.indexOf(w)===-1&&(o.push(w),t.push({id:m,url:_}))}}return t}function Tt(x,t,o){try{const m=new URL(x);return m.pathname+=`${t}${o}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${x}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function vt(x){const{userImage:t}=x;return!!(t&&t.render&&t.render())&&(x.data.replace(new Uint8Array(t.data.buffer)),!0)}class bt extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const t of Object.keys(this.images))this.removeImage(t);this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,promiseResolve:m}of this.requestors)m(this._getImagesForIds(o));this.requestors=[]}}getImage(t){const o=this.images[t];if(o&&!o.data&&o.spriteData){const m=o.spriteData;o.data=new s.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),o.spriteData=null}return o}addImage(t,o){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let m=!0;const _=o.data||o.spriteData;return this._validateStretch(o.stretchX,_&&_.width)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "stretchX" value`))),m=!1),this._validateStretch(o.stretchY,_&&_.height)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "stretchY" value`))),m=!1),this._validateContent(o.content,o)||(this.fire(new s.k(new Error(`Image "${t}" has invalid "content" value`))),m=!1),m}_validateStretch(t,o){if(!t)return!0;let m=0;for(const _ of t){if(_[0]<m||_[1]<_[0]||o<_[1])return!1;m=_[1]}return!0}_validateContent(t,o){if(!t)return!0;if(t.length!==4)return!1;const m=o.spriteData,_=m&&m.width||o.data.width,w=m&&m.height||o.data.height;return!(t[0]<0||_<t[0]||t[1]<0||w<t[1]||t[2]<0||_<t[2]||t[3]<0||w<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,o,m=!0){const _=this.getImage(t);if(m&&(_.data.width!==o.data.width||_.data.height!==o.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=_.version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((o,m)=>{let _=!0;if(!this.isLoaded())for(const w of t)this.images[w]||(_=!1);this.isLoaded()||_?o(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:o})}))}_getImagesForIds(t){const o={};for(const m of t){let _=this.getImage(m);_||(this.fire(new s.l("styleimagemissing",{id:m})),_=this.getImage(m)),_?o[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:s.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],m=this.getImage(t);if(!m)return null;if(o&&o.position.version===m.version)return o.position;if(o)o.position.version=m.version;else{const _={w:m.data.width+2,h:m.data.height+2,x:0,y:0},w=new s.I(_,m);this.patterns[t]={bin:_,position:w}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const w in this.patterns)t.push(this.patterns[w].bin);const{w:o,h:m}=s.p(t),_=this.atlasImage;_.resize({width:o||1,height:m||1});for(const w in this.patterns){const{bin:T}=this.patterns[w],E=T.x+1,I=T.y+1,R=this.getImage(w).data,B=R.width,G=R.height;s.R.copy(R,_,{x:0,y:0},{x:E,y:I},{width:B,height:G}),s.R.copy(R,_,{x:0,y:G-1},{x:E,y:I-1},{width:B,height:1}),s.R.copy(R,_,{x:0,y:0},{x:E,y:I+G},{width:B,height:1}),s.R.copy(R,_,{x:B-1,y:0},{x:E-1,y:I},{width:1,height:G}),s.R.copy(R,_,{x:0,y:0},{x:E+B,y:I},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const m=this.getImage(o);m||s.w(`Image with ID: "${o}" was not found`),vt(m)&&this.updateImage(o,m)}}cloneImages(){const t={};for(const o in this.images){const m=this.images[o];t[o]=Object.assign(Object.assign({},m),{data:m.data?m.data.clone():null})}return t}}const si=1e20;function di(x,t,o,m,_,w,T,E,I){for(let R=t;R<t+m;R++)Wt(x,o*w+R,w,_,T,E,I);for(let R=o;R<o+_;R++)Wt(x,R*w+t,1,m,T,E,I)}function Wt(x,t,o,m,_,w,T){w[0]=0,T[0]=-si,T[1]=si,_[0]=x[t];for(let E=1,I=0,R=0;E<m;E++){_[E]=x[t+E*o];const B=E*E;do{const G=w[I];R=(_[E]-_[G]+B-G*G)/(E-G)/2}while(R<=T[I]&&--I>-1);I++,w[I]=E,T[I]=R,T[I+1]=si}for(let E=0,I=0;E<m;E++){for(;T[I+1]<E;)I++;const R=w[I],B=E-R;x[t+E*o]=_[R]+B*B}}const Bt=s.v.layout_symbol["text-font"].default.join(",");class Vt{constructor(t,o,m){this.requestManager=t,this.localIdeographFontFamily=o,this.entries={},this.lang=m}setURL(t){this.url=t}getGlyphs(t){return s._(this,void 0,void 0,(function*(){const o=[];for(const w in t)for(const T of t[w])o.push(this._getAndCacheGlyphsPromise(w,T));const m=yield Promise.all(o),_={};for(const{stack:w,id:T,glyph:E}of m)_[w]||(_[w]={}),_[w][T]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return _}))}_getAndCacheGlyphsPromise(t,o){return s._(this,void 0,void 0,(function*(){let m=this.entries[t];m||(m=this.entries[t]={glyphs:{},requests:{},ranges:{}});let _=m.glyphs[o];return _!==void 0?{stack:t,id:o,glyph:_}:!this.url||this._charUsesLocalIdeographFontFamily(o)?(_=m.glyphs[o]=this._drawGlyph(m,t,o),{stack:t,id:o,glyph:_}):yield this._downloadAndCacheRangePromise(t,o)}))}_downloadAndCacheRangePromise(t,o){return s._(this,void 0,void 0,(function*(){const m=this.entries[t],_=Math.floor(o/256);if(m.ranges[_])return{stack:t,id:o,glyph:null};if(!m.requests[_]){const w=Vt.loadGlyphRange(t,_,this.url,this.requestManager);m.requests[_]=w}try{const w=yield m.requests[_];for(const T in w)m.glyphs[+T]=w[+T];return m.ranges[_]=!0,{stack:t,id:o,glyph:w[o]||null}}catch(w){const T=m.glyphs[o]=this._drawGlyph(m,t,o);return this._warnOnMissingGlyphRange(T,_,o,w),{stack:t,id:o,glyph:T}}}))}_warnOnMissingGlyphRange(t,o,m,_){const w=256*o,T=w+255,E=m.toString(16).padStart(4,"0").toUpperCase();s.w(`Unable to load glyph range ${o}, ${w}-${T}. Rendering codepoint U+${E} locally instead. ${_}`)}_charUsesLocalIdeographFontFamily(t){return!!this.localIdeographFontFamily&&s.q(t)}_drawGlyph(t,o,m){const _=o===Bt&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(m),w=_?"ideographTinySDF":"tinySDF";t[w]||(t[w]=this._createTinySDF(_?this.localIdeographFontFamily:o));const T=t[w].draw(String.fromCodePoint(m));return{id:m,bitmap:new s.r({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(t){const o=t?t.split(","):[];o.push("sans-serif");const m=o.map((_=>/[-\w]+/.test(_)?_:`'${CSS.escape(_)}'`)).join(",");return new Vt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:this._fontWeight(o[0]),fontStyle:this._fontStyle(o[0]),lang:this.lang})}_fontStyle(t){return/italic/i.test(t)?"italic":/oblique/i.test(t)?"oblique":"normal"}_fontWeight(t){const o={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let m;for(const[_,w]of Object.entries(o))new RegExp(`\\b${_}\\b`,"i").test(t)&&(m=`${w}`);return m}destroy(){for(const t in this.entries){const o=this.entries[t];o.tinySDF&&(o.tinySDF=null),o.ideographTinySDF&&(o.ideographTinySDF=null),o.glyphs={},o.requests={},o.ranges={}}this.entries={}}}Vt.loadGlyphRange=function(x,t,o,m){return s._(this,void 0,void 0,(function*(){const _=256*t,w=_+255,T=m.transformRequest(o.replace("{fontstack}",x).replace("{range}",`${_}-${w}`),"Glyphs"),E=yield s.n(T,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${t}, ${_}-${w}`);const I={};for(const R of s.o(E.data))I[R.id]=R;return I}))},Vt.TinySDF=class{constructor({fontSize:x=24,buffer:t=3,radius:o=8,cutoff:m=.25,fontFamily:_="sans-serif",fontWeight:w="normal",fontStyle:T="normal",lang:E=null}={}){this.buffer=t,this.cutoff=m,this.radius=o,this.lang=E;const I=this.size=x+4*t,R=this._createCanvas(I),B=this.ctx=R.getContext("2d",{willReadFrequently:!0});B.font=`${T} ${w} ${x}px ${_}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(x){const t=document.createElement("canvas");return t.width=t.height=x,t}draw(x){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:m,actualBoundingBoxLeft:_,actualBoundingBoxRight:w}=this.ctx.measureText(x),T=Math.ceil(o),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-_))),I=Math.min(this.size-this.buffer,T+Math.ceil(m)),R=E+2*this.buffer,B=I+2*this.buffer,G=Math.max(R*B,0),U=new Uint8ClampedArray(G),K={data:U,width:R,height:B,glyphWidth:E,glyphHeight:I,glyphTop:T,glyphLeft:0,glyphAdvance:t};if(E===0||I===0)return K;const{ctx:ee,buffer:le,gridInner:he,gridOuter:ue}=this;this.lang&&(ee.lang=this.lang),ee.clearRect(le,le,E,I),ee.fillText(x,le,le+T);const fe=ee.getImageData(le,le,E,I);ue.fill(si,0,G),he.fill(0,0,G);for(let ye=0;ye<I;ye++)for(let de=0;de<E;de++){const ge=fe.data[4*(ye*E+de)+3]/255;if(ge===0)continue;const ke=(ye+le)*R+de+le;if(ge===1)ue[ke]=0,he[ke]=si;else{const me=.5-ge;ue[ke]=me>0?me*me:0,he[ke]=me<0?me*me:0}}di(ue,0,0,R,B,R,this.f,this.v,this.z),di(he,le,le,E,I,R,this.f,this.v,this.z);for(let ye=0;ye<G;ye++){const de=Math.sqrt(ue[ye])-Math.sqrt(he[ye]);U[ye]=Math.round(255-255*(de/this.radius+this.cutoff))}return K}};class xt{constructor(){this.specification=s.u.light.position}possiblyEvaluate(t,o){return s.F(t.expression.evaluate(o))}interpolate(t,o,m){return{x:s.G.number(t.x,o.x,m),y:s.G.number(t.y,o.y,m),z:s.G.number(t.z,o.z,m)}}}let Mt;class wt extends s.E{constructor(t){super(),Mt=Mt||new s.t({anchor:new s.D(s.u.light.anchor),position:new xt,color:new s.D(s.u.light.color),intensity:new s.D(s.u.light.intensity)}),this._transitionable=new s.x(Mt,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(s.y,t,o))for(const m in t){const _=t[m];m.endsWith(s.z)?this._transitionable.setTransition(m.slice(0,-s.z.length),_):this._transitionable.setValue(m,_)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,m){return(!m||m.validate!==!1)&&s.B(this,t.call(s.C,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.u}))}}const Ht=new s.t({"sky-color":new s.D(s.u.sky["sky-color"]),"horizon-color":new s.D(s.u.sky["horizon-color"]),"fog-color":new s.D(s.u.sky["fog-color"]),"fog-ground-blend":new s.D(s.u.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.u.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.u.sky["atmosphere-blend"])});class mi extends s.E{constructor(t){super(),this._transitionable=new s.x(Ht,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0))}setSky(t,o={}){if(!this._validate(s.J,t,o)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in t){const _=t[m];m.endsWith(s.z)?this._transitionable.setTransition(m.slice(0,-s.z.length),_):this._transitionable.setValue(m,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,m={}){return m?.validate!==!1&&s.B(this,t.call(s.C,s.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.u})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class ki{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,o){const m=t.join(",")+String(o);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(t,o)),this.dashEntry[m]}getDashRanges(t,o,m){const _=[];let w=t.length%2==1?-t[t.length-1]*m:0,T=t[0]*m,E=!0;_.push({left:w,right:T,isDash:E,zeroLength:t[0]===0});let I=t[0];for(let R=1;R<t.length;R++){E=!E;const B=t[R];w=I*m,I+=B,T=I*m,_.push({left:w,right:T,isDash:E,zeroLength:B===0})}return _}addRoundDash(t,o,m){const _=o/2;for(let w=-m;w<=m;w++){const T=this.width*(this.nextRow+m+w);let E=0,I=t[E];for(let R=0;R<this.width;R++){R/I.right>1&&(I=t[++E]);const B=Math.abs(R-I.left),G=Math.abs(R-I.right),U=Math.min(B,G);let K;const ee=w/m*(_+1);if(I.isDash){const le=_-Math.abs(ee);K=Math.sqrt(U*U+le*le)}else K=_-Math.sqrt(U*U+ee*ee);this.data[T+R]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(t){for(let E=t.length-1;E>=0;--E){const I=t[E],R=t[E+1];I.zeroLength?t.splice(E,1):R&&R.isDash===I.isDash&&(R.left=I.left,t.splice(E,1))}const o=t[0],m=t[t.length-1];o.isDash===m.isDash&&(o.left=m.left-this.width,m.right=o.right+this.width);const _=this.width*this.nextRow;let w=0,T=t[w];for(let E=0;E<this.width;E++){E/T.right>1&&(T=t[++w]);const I=Math.abs(E-T.left),R=Math.abs(E-T.right),B=Math.min(I,R);this.data[_+E]=Math.max(0,Math.min(255,(T.isDash?B:-B)+128))}}addDash(t,o){const m=o?7:0,_=2*m+1;if(this.nextRow+_>this.height)return s.w("LineAtlas out of space"),null;let w=0;for(let E=0;E<t.length;E++)w+=t[E];if(w!==0){const E=this.width/w,I=this.getDashRanges(t,this.width,E);o?this.addRoundDash(I,E,m):this.addRegularDash(I)}const T={y:this.nextRow+m,height:2*m,width:w};return this.nextRow+=_,this.dirty=!0,T}bind(t){const o=t.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const Jt="maplibre_preloaded_worker_pool";class Ct{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ct.workerCount;)this.workers.push(new Worker(s.c.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((o=>{o.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Jt]}numActive(){return Object.keys(this.active).length}}const Pt=Math.floor(X.hardwareConcurrency/2);let dn,Ii;function Ba(){return dn||(dn=new Ct),dn}Ct.workerCount=s.K(globalThis)?Math.max(Math.min(Pt,3),1):1;class Cn{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=o;const m=this.workerPool.acquire(o);for(let _=0;_<m.length;_++){const w=new s.L(m[_],o);w.name=`Worker ${_}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,o){const m=[];for(const _ of this.actors)m.push(_.sendAsync({type:t,data:o}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((o=>{o.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,o){for(const m of this.actors)m.registerMessageHandler(t,o)}unregisterMessageHandler(t){for(const o of this.actors)o.unregisterMessageHandler(t)}}function tr(){return Ii||(Ii=new Cn(Ba(),s.M),Ii.registerMessageHandler("GR",((x,t,o)=>s.m(t,o)))),Ii}function xn(x,t){const o=s.N();return s.O(o,o,[1,1,0]),s.Q(o,o,[.5*x.width,.5*x.height,1]),x.calculatePosMatrix?s.S(o,o,x.calculatePosMatrix(t.toUnwrapped())):o}function Vr(x,t,o,m,_,w,T){var E;const I=(function(U,K,ee){if(U)for(const le of U){const he=K[le];if(he&&he.source===ee&&he.type==="fill-extrusion")return!0}else for(const le in K){const he=K[le];if(he.source===ee&&he.type==="fill-extrusion")return!0}return!1})((E=_?.layers)!==null&&E!==void 0?E:null,t,x.id),R=w.maxPitchScaleFactor(),B=x.tilesIn(m,R,I);B.sort(gn);const G=[];for(const U of B)G.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(t,o,x.getState(),U.queryGeometry,U.cameraQueryGeometry,U.scale,_,w,R,xn(w,U.tileID),T?(K,ee)=>T(U.tileID,K,ee):void 0)});return(function(U,K){for(const ee in U)for(const le of U[ee])oa(le,K);return U})((function(U){const K={},ee={};for(const le of U){const he=le.queryResults,ue=le.wrappedTileID,fe=ee[ue]=ee[ue]||{};for(const ye in he){const de=he[ye],ge=fe[ye]=fe[ye]||{},ke=K[ye]=K[ye]||[];for(const me of de)ge[me.featureIndex]||(ge[me.featureIndex]=!0,ke.push(me))}}return K})(G),x)}function gn(x,t){const o=x.tileID,m=t.tileID;return o.overscaledZ-m.overscaledZ||o.canonical.y-m.canonical.y||o.wrap-m.wrap||o.canonical.x-m.canonical.x}function oa(x,t){const o=x.feature,m=t.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=m}function Ma(x,t,o){return s._(this,void 0,void 0,(function*(){let m=x;if(x.url?m=(yield s.j(t.transformRequest(x.url,"Source"),o)).data:yield X.frameAsync(o),!m)return null;const _=s.U(s.e(m,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(_.vectorLayerIds=m.vector_layers.map((w=>w.id))),_}))}class Ci{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof s.V?new s.V(t.lng,t.lat):s.V.convert(t),this}setSouthWest(t){return this._sw=t instanceof s.V?new s.V(t.lng,t.lat):s.V.convert(t),this}extend(t){const o=this._sw,m=this._ne;let _,w;if(t instanceof s.V)_=t,w=t;else{if(!(t instanceof Ci))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Ci.convert(t)):this.extend(s.V.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(s.V.convert(t)):this;if(_=t._sw,w=t._ne,!_||!w)return this}return o||m?(o.lng=Math.min(_.lng,o.lng),o.lat=Math.min(_.lat,o.lat),m.lng=Math.max(w.lng,m.lng),m.lat=Math.max(w.lat,m.lat)):(this._sw=new s.V(_.lng,_.lat),this._ne=new s.V(w.lng,w.lat)),this}getCenter(){return new s.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.V(this.getWest(),this.getNorth())}getSouthEast(){return new s.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:m}=s.V.convert(t);let _=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&_}intersects(t){if(!((t=Ci.convert(t)).getNorth()>=this.getSouth()&&t.getSouth()<=this.getNorth()))return!1;const o=Math.abs(this.getEast()-this.getWest()),m=Math.abs(t.getEast()-t.getWest());if(o>=360||m>=360)return!0;const _=s.W(this.getWest(),-180,180),w=s.W(this.getEast(),-180,180),T=s.W(t.getWest(),-180,180),E=s.W(t.getEast(),-180,180),I=_>=w,R=T>=E;return!(!I||!R)||(I?E>=_||T<=w:R?w>=T||_<=E:T<=w&&E>=_)}static convert(t){return t instanceof Ci?t:t&&new Ci(t)}static fromLngLat(t,o=0){const m=360*o/40075017,_=m/Math.cos(Math.PI/180*t.lat);return new Ci(new s.V(t.lng-_,t.lat-m),new s.V(t.lng+_,t.lat+m))}adjustAntiMeridian(){const t=new s.V(this._sw.lng,this._sw.lat),o=new s.V(this._ne.lng,this._ne.lat);return new Ci(t,t.lng>o.lng?new s.V(o.lng+360,o.lat):o)}}class Ca{constructor(t,o,m){this.bounds=Ci.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=m||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),m=Math.floor(s.Y(this.bounds.getWest())*o),_=Math.floor(s.X(this.bounds.getNorth())*o),w=Math.ceil(s.Y(this.bounds.getEast())*o),T=Math.ceil(s.X(this.bounds.getSouth())*o);return t.x>=m&&t.x<w&&t.y>=_&&t.y<T}}class Nr extends s.E{constructor(t,o,m,_){if(super(),this.id=t,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.U(o,["url","scheme","tileSize","promoteId","encoding"])),this._options=s.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield Ma(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),t&&(s.e(this,t),t.bounds&&(this.tileBounds=new Ca(t.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,s.Z(t)||this.fire(new s.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(t){return s._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(o,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(t)};m.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((w,T)=>{t.reloadPromise={resolve:w,reject:T}}))}else t.actor=this.dispatcher.getActor(),_="LT";t.abortController=new AbortController;try{const w=yield t.actor.sendAsync({type:_,data:m},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,w)}catch(w){if(delete t.abortController,t.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(t,null)}}))}_getOverzoomParameters(t){if(t.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const o=t.tileID.scaledTo(this.maxzoom).canonical,m=o.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:o,overzoomRequest:this.map._requestManager.transformRequest(m,"Tile")}}_afterTileLoadWorkerResponse(t,o){if(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),t.reloadPromise){const m=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(m.resolve).catch(m.reject)}}abortTile(t){return s._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return s._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Ur extends s.E{constructor(t,o,m,_){super(),this.id=t,this.dispatcher=m,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},o),s.e(this,s.U(o,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Ma(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(s.e(this,o),o.bounds&&(this.tileBounds=new Ca(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(o){this._tileJSONRequest=null,this._loaded=!0,s.Z(o)||this.fire(new s.k(o))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return s.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return s._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const m=yield Je.getImage(this.map._requestManager.transformRequest(o,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&t.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const _=this.map.painter.context,w=_.gl,T=m.data;t.texture=this.map.painter.getTileTexture(T.width),t.texture?t.texture.update(T,{useMipmap:!0}):(t.texture=new s.T(_,T,w.RGBA,{useMipmap:!0}),t.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(m){if(delete t.abortController,t.aborted)t.state="unloaded";else if(m)throw t.state="errored",m}}))}abortTile(t){return s._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return s._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class $a extends Ur{constructor(t,o,m,_){super(t,o,m,_),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(t){return s._(this,void 0,void 0,(function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(o,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const _=yield Je.getImage(m,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(_&&_.data){const w=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&t.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const T=s.b(w)&&s.$()?w:yield this.readImageNow(w),E={type:this.type,uid:t.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const I=yield t.actor.sendAsync({type:"LDT",data:E});t.dem=I,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(_){if(delete t.abortController,t.aborted)t.state="unloaded";else if(_)throw t.state="errored",_}}))}readImageNow(t){return s._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&s.a0()){const o=t.width+2,m=t.height+2;try{return new s.R({width:o,height:m},yield s.a1(t,-1,-1,o,m))}catch{}}return X.getImageData(t,1)}))}_getNeighboringTiles(t){const o=t.canonical,m=Math.pow(2,o.z),_=(o.x-1+m)%m,w=o.x===0?t.wrap-1:t.wrap,T=(o.x+1+m)%m,E=o.x+1===m?t.wrap+1:t.wrap,I={};return I[new s.a2(t.overscaledZ,w,o.z,_,o.y).key]={backfilled:!1},I[new s.a2(t.overscaledZ,E,o.z,T,o.y).key]={backfilled:!1},o.y>0&&(I[new s.a2(t.overscaledZ,w,o.z,_,o.y-1).key]={backfilled:!1},I[new s.a2(t.overscaledZ,t.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},I[new s.a2(t.overscaledZ,E,o.z,T,o.y-1).key]={backfilled:!1}),o.y+1<m&&(I[new s.a2(t.overscaledZ,w,o.z,_,o.y+1).key]={backfilled:!1},I[new s.a2(t.overscaledZ,t.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},I[new s.a2(t.overscaledZ,E,o.z,T,o.y+1).key]={backfilled:!1}),I}unloadTile(t){return s._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}function ga(x){return x.type==="GeometryCollection"?x.geometries.map((t=>t.coordinates)).flat(1/0):x.coordinates.flat(1/0)}function Gr(x){const t=new Ci;let o;switch(x.type){case"FeatureCollection":o=x.features.map((m=>ga(m.geometry))).flat(1/0);break;case"Feature":o=ga(x.geometry);break;default:o=ga(x)}if(o.length==0)return t;for(let m=0;m<o.length-1;m+=2)t.extend([o[m],o[m+1]]);return t}class ms extends s.E{constructor(t,o,m,_){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:o.data},this.actor=m.getActor(),this.setEventedParent(_),this._data=typeof o.data=="string"?{url:o.data}:{geojson:o.data},this._options=s.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:s.a5,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(o.clusterMaxZoom),minPoints:Math.max(2,o.clusterMinPoints||2),extent:s.a5,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(t){return t*(s.a5/this.tileSize)}_getClusterMaxZoom(t){const o=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${o}"`),o}load(){return s._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t,o){this._data=typeof t=="string"?{url:t}:{geojson:t},this._pendingWorkerUpdate={data:t};const m=this._updateWorkerData();return o?m:this}updateData(t,o){this._pendingWorkerUpdate.diff=s.a6(this._pendingWorkerUpdate.diff,t);const m=this._updateWorkerData();return o?m:this}getData(){return s._(this,void 0,void 0,(function*(){const t=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getBounds(){return s._(this,void 0,void 0,(function*(){return Gr(yield this.getData())}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,o,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:o,offset:m}})}_updateWorkerData(){return s._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void s.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:t,diff:o}=this._pendingWorkerUpdate,m=s.e({type:this.type},this.workerOptions);t!==void 0?(typeof t=="string"?(m.request=this.map._requestManager.transformRequest(X.resolveURL(t),"Source"),m.request.collectResourceTiming=this._collectResourceTiming):m.data=t,this._pendingWorkerUpdate.data=void 0):o&&(m.dataDiff=o,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:m});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));_.data&&(this._data={geojson:_.data});const w=this._applyDiffToSource(o),T=this._getShouldReloadTileOptions(w);let E=null;_.resourceTiming&&_.resourceTiming[this.id]&&(E=_.resourceTiming[this.id].slice(0));const I={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&s.e(I,{resourceTiming:E}),this.fire(new s.l("data",Object.assign(Object.assign({},I),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},I),{sourceDataType:"content",shouldReloadTileOptions:T})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(_))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(t){if(!t)return;const o=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const _=s.a7(this._data.geojson,o);if(!_)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:_}}if(!this._data.updateable)return;const m=s.a8(this._data.updateable,t,o);return t.removeAll||this._options.cluster?void 0:m}_getShouldReloadTileOptions(t){if(t)return{affectedBounds:t.filter(Boolean).map((o=>Gr(o)))}}shouldReloadTile(t,{affectedBounds:o}){if(t.state==="loading")return!0;if(t.state==="unloaded")return!1;const{buffer:m,extent:_}=this.workerOptions.geojsonVtOptions,w=(function({x:T,y:E,z:I},R=0){const B=s.a3((T-R)/Math.pow(2,I)),G=s.a4((E+1+R)/Math.pow(2,I)),U=s.a3((T+1+R)/Math.pow(2,I)),K=s.a4((E-R)/Math.pow(2,I));return new Ci([B,G],[U,K])})(t.tileID.canonical,m/_);for(const T of o)if(w.intersects(T))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(t){return s._(this,void 0,void 0,(function*(){const o=t.actor?"RT":"LT";t.actor=this.actor;const m={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;const _=yield this.actor.sendAsync({type:o,data:m},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(_,this.map.painter,o==="RT")}))}abortTile(t){return s._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return s._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Kn extends s.E{constructor(t,o,m,_){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=m,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=o}load(t){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield Je.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,t&&(this.coordinates=t),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,s.Z(o)||this.fire(new s.k(o))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const o=t.map(s.a9.fromLngLat);var m;return this.tileID=(function(_){const w=s.aa.fromPoints(_),T=w.width(),E=w.height(),I=Math.max(T,E),R=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),B=Math.pow(2,R);return new s.ac(R,Math.floor((w.minX+w.maxX)/2*B),Math.floor((w.minY+w.maxY)/2*B))})(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map((_=>this.tileID.getTilePoint(_)._round())),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.texture||(this.texture=new s.T(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let m=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return s._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:o,minY:m,maxX:_,maxY:w}=s.aa.fromPoints(t),T={};for(let E=0;E<=s.ab;E++){const I=Math.pow(2,E),R=Math.floor(o*I),B=Math.floor(m*I),G=Math.floor(_*I),U=Math.floor(w*I);T[E]={minTileX:R,minTileY:B,maxTileX:G,maxTileY:U}}return T}}class Le extends Kn{constructor(t,o,m,_){super(t,o,m,_),this.roundZoom=!0,this.type="video",this.options=o}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const o of t.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield s.ad(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new s.k(o))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const o=this.video.seekable;t<o.start(0)||t>o.end(0)?this.fire(new s.k(new s.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,o=t.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(t,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let m=!1;for(const _ in this.tiles){const w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Q extends Kn{constructor(t,o,m,_){super(t,o,m,_),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some((w=>!Array.isArray(w)||w.length!==2||w.some((T=>typeof T!="number"))))||this.fire(new s.k(new s.ae(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.ae(`sources.${t}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new s.k(new s.ae(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.ae(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.ae(`sources.${t}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,m=o.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new s.T(o,this.canvas,m.RGBA,{premultiply:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let _=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,_=!0)}_&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const J={},se=x=>{switch(x){case"geojson":return ms;case"image":return Kn;case"raster":return Ur;case"raster-dem":return $a;case"vector":return Nr;case"video":return Le;case"canvas":return Q}return J[x]},ve="RTLPluginLoaded";class we extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=tr()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((o=>{throw this.status="error",o}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return s._(this,arguments,void 0,(function*(o,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=X.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return s._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(ve))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ie=null;function Ce(){return Ie||(Ie=new we),Ie}var Te,Fe;(function(x){x[x.Base=0]="Base",x[x.Parent=1]="Parent"})(Te||(Te={})),(function(x){x[x.Departing=0]="Departing",x[x.Incoming=1]="Incoming"})(Fe||(Fe={}));class Ye{constructor(t,o){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=t,this.uid=s.af(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(t){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(t||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:t,fadingDirection:o,fadingParentID:m,fadeEndTime:_}){this.resetFadeLogic(),this.fadingRole=t,this.fadingDirection=o,this.fadingParentID=m,this.fadeEndTime=_}setSelfFadeLogic(t){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=t}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=ae(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,o,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData,this.latestFeatureIndex.encoding=t.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(_,w){const T={};if(!w)return T;for(const E of _){const I=E.layerIds.map((R=>w.getLayer(R))).filter(Boolean);if(I.length!==0){E.layers=I,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map((R=>I.filter((B=>B.id===R))[0])));for(const R of I)T[R.id]=E}}return T})(t.buckets,o?.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof s.ah){if(this.hasSymbolBuckets=!0,!m)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof s.ah&&w.hasRTLText){this.hasRTLText=!0,Ce().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const w=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(_).queryRadius(w))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),this.dashPositions=t.dashPositions}else this.collisionBoxArray=new s.ag}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const m in this.buckets){const _=this.buckets[m];_.uploadPending()&&_.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,m,_,w,T,E,I,R,B,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:w,scale:T,tileSize:this.tileSize,pixelPosMatrix:B,transform:I,params:E,queryPadding:this.queryPadding*R,getElevation:G},t,o,m):{}}querySourceFeatures(t,o){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const _=m.loadVTLayers(),w=o&&o.sourceLayer?o.sourceLayer:"",T=_[s.ai]||_[w];if(!T)return;const E=s.aj(o?.filter,o?.globalState),{z:I,x:R,y:B}=this.tileID.canonical,G={z:I,x:R,y:B};for(let U=0;U<T.length;U++){const K=T.feature(U);if(E.needGeometry){const he=s.ak(K,!0);if(!E.filter(new s.H(this.tileID.overscaledZ),he,this.tileID.canonical))continue}else if(!E.filter(new s.H(this.tileID.overscaledZ),K))continue;const ee=m.getId(K,w),le=new s.al(K,I,R,B,ee);le.tile=G,t.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const m=s.am(t.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const m=Date.now();let _=!1;if(this.expirationTime>m)_=!1;else if(o)if(this.expirationTime<o)_=!0;else{const w=this.expirationTime-o;w?this.expirationTime=m+Math.max(w,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!o.style.hasLayer(_))continue;const w=this.buckets[_],T=w.layers[0].sourceLayer||s.ai,E=m[T],I=t[T];if(!E||!I||Object.keys(I).length===0)continue;w.update(I,E,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const R=o&&o.style&&o.style.getLayer(_);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(w)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ae()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(t){this.symbolFadeHoldUntil=ae()+t}setDependencies(t,o){const m={};for(const _ of o)m[_]=!0;this.dependencies[t]=m}hasDependency(t,o){for(const m of t){const _=this.dependencies[m];if(_){for(const w of o)if(_[w])return!0}}return!1}}class Ze{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,m){const _=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][_]=this.stateChanges[t][_]||{},s.e(this.stateChanges[t][_],m),this.deletedStates[t]===null){this.deletedStates[t]={};for(const w in this.state[t])w!==_&&(this.deletedStates[t][w]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][_]===null){this.deletedStates[t][_]={};for(const w in this.state[t][_])m[w]||(this.deletedStates[t][_][w]=null)}else for(const w in m)this.deletedStates[t]&&this.deletedStates[t][_]&&this.deletedStates[t][_][w]===null&&delete this.deletedStates[t][_][w]}removeFeatureState(t,o,m){if(this.deletedStates[t]===null)return;const _=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},m&&o!==void 0)this.deletedStates[t][_]!==null&&(this.deletedStates[t][_]=this.deletedStates[t][_]||{},this.deletedStates[t][_][m]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][_])for(m in this.deletedStates[t][_]={},this.stateChanges[t][_])this.deletedStates[t][_][m]=null;else this.deletedStates[t][_]=null;else this.deletedStates[t]=null}getState(t,o){const m=String(o),_=s.e({},(this.state[t]||{})[m],(this.stateChanges[t]||{})[m]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const w=this.deletedStates[t][o];if(w===null)return{};for(const T in w)delete _[T]}return _}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const m={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const w={};for(const T in this.stateChanges[_])this.state[_][T]||(this.state[_][T]={}),s.e(this.state[_][T],this.stateChanges[_][T]),w[T]=this.state[_][T];m[_]=w}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const w={};if(this.deletedStates[_]===null)for(const T in this.state[_])w[T]={},this.state[_][T]={};else for(const T in this.deletedStates[_]){if(this.deletedStates[_][T]===null)this.state[_][T]={};else for(const E of Object.keys(this.deletedStates[_][T]))delete this.state[_][T][E];w[T]=this.state[_][T]}m[_]=m[_]||{},s.e(m[_],w)}this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0&&t.setFeatureState(m,o)}}const ut=89.25;function gt(x,t){const o=s.an(t.lat,-s.ao,s.ao);return new s.P(s.Y(t.lng)*x,s.X(o)*x)}function Lt(x,t){return new s.a9(t.x/x,t.y/x).toLngLat()}function oi(x){return x.cameraToCenterDistance*Math.min(.85*Math.tan(s.ap(90-x.pitch)),Math.tan(s.ap(ut-x.pitch)))}function Qt(x,t){const o=x.canonical,m=t/s.aq(o.z),_=o.x+Math.pow(2,o.z)*x.wrap,w=s.ar(new Float64Array(16));return s.O(w,w,[_*m,o.y*m,0]),s.Q(w,w,[m/s.a5,m/s.a5,1]),w}function De(x,t,o,m,_){const w=s.a9.fromLngLat(x,t),T=_*s.as(1,x.lat),{x:E,y:I,z:R}=gi(o,m);return new s.a9(w.x+T*-E,w.y+T*-I,w.z+T*-R)}function gi(x,t){const o=s.ap(x),m=s.ap(t),_=Math.cos(-o),w=Math.sin(o);return{x:w*Math.sin(m),y:-w*Math.cos(m),z:_}}function bn(x,t,o){const m=t.intersectsFrustum(x);if(!o||m===0)return m;const _=t.intersectsPlane(o);return _===0?0:m===2&&_===2?2:1}function Et(x,t,o){let m=0;const _=(o-t)/10;for(let w=0;w<10;w++)m+=_*Math.pow(Math.cos(t+(w+.5)/10*(o-t)),x);return m}function li(x,t){return function(o,m,_,w,T){const E=2*((x-1)/s.at(Math.cos(s.ap(ut-T))/Math.cos(s.ap(ut)))-1),I=Math.acos(_/w),R=2*Et(E-1,0,s.ap(T/2)),B=Math.min(s.ap(ut),I+s.ap(T/2)),G=Et(E-1,Math.min(B,I-s.ap(T/2)),B),U=Math.atan(m/_),K=Math.hypot(m,_);let ee=o;return ee+=s.at(w/K/Math.max(.5,Math.cos(s.ap(T/2)))),ee+=E*s.at(Math.cos(U))/2,ee-=s.at(Math.max(1,G/R/t))/2,ee}}const wn=li(9.314,3);function _i(x,t){const o=(t.roundZoom?Math.round:Math.floor)(x.zoom+s.at(x.tileSize/t.tileSize));return Math.max(0,o)}function Fi(x,t){const o=x.getCameraFrustum(),m=x.getClippingPlane(),_=x.screenPointToMercatorCoordinate(x.getCameraPoint()),w=s.a9.fromLngLat(x.center,x.elevation);_.z=w.z+Math.cos(x.pitchInRadians)*x.cameraToCenterDistance/x.worldSize;const T=x.getCoveringTilesDetailsProvider(),E=T.allowVariableZoom(x,t),I=_i(x,t),R=t.minzoom||0,B=t.maxzoom!==void 0?t.maxzoom:x.maxZoom,G=Math.min(Math.max(0,I),B),U=Math.pow(2,G),K=[U*_.x,U*_.y,0],ee=[U*w.x,U*w.y,0],le=Math.hypot(w.x-_.x,w.y-_.y),he=Math.abs(w.z-_.z),ue=Math.hypot(le,he),fe=ge=>({zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),ye=[],de=[];if(x.renderWorldCopies&&T.allowWorldCopies())for(let ge=1;ge<=3;ge++)ye.push(fe(-ge)),ye.push(fe(ge));for(ye.push(fe(0));ye.length>0;){const ge=ye.pop(),ke=ge.x,me=ge.y;let Me=ge.fullyVisible;const $e={x:ke,y:me,z:ge.zoom},ze=T.getTileBoundingVolume($e,ge.wrap,x.elevation,t);if(!Me){const it=bn(o,ze,m);if(it===0)continue;Me=it===2}const Re=T.distanceToTile2d(_.x,_.y,$e,ze);let Oe=I;E&&(Oe=(t.calculateTileZoom||wn)(x.zoom+s.at(x.tileSize/t.tileSize),Re,he,ue,x.fov)),Oe=(t.roundZoom?Math.round:Math.floor)(Oe),Oe=Math.max(0,Oe);const tt=Math.min(Oe,B);if(ge.wrap=T.getWrap(w,$e,ge.wrap),ge.zoom>=tt){if(ge.zoom<R)continue;const it=G-ge.zoom,Ke=K[0]-.5-(ke<<it),rt=K[1]-.5-(me<<it),Dt=t.reparseOverscaled?Math.max(ge.zoom,Oe):ge.zoom;de.push({tileID:new s.a2(ge.zoom===B?Dt:ge.zoom,ge.wrap,ge.zoom,ke,me),distanceSq:s.au([ee[0]-.5-ke,ee[1]-.5-me]),tileDistanceToCamera:Math.sqrt(Ke*Ke+rt*rt)})}else for(let it=0;it<4;it++)ye.push({zoom:ge.zoom+1,x:(ke<<1)+it%2,y:(me<<1)+(it>>1),wrap:ge.wrap,fullyVisible:Me})}return de.sort(((ge,ke)=>ge.distanceSq-ke.distanceSq)).map((ge=>ge.tileID))}const yi=s.aa.fromPoints([new s.P(0,0),new s.P(s.a5,s.a5)]);function rn(x){return x==="raster"||x==="image"||x==="video"}function Xs(x,t,o,m,_,w,T){if(!t.hasData())return!1;const{tileID:E,fadingRole:I,fadingDirection:R,fadingParentID:B}=t;if(I===Te.Base&&R===Fe.Incoming&&B)return o[B.key]=B,!0;const G=Math.max(E.overscaledZ-_,w);for(let U=E.overscaledZ-1;U>=G;U--){const K=E.scaledTo(U),ee=x.getLoadedTile(K);if(ee)return t.setCrossFadeLogic({fadingRole:Te.Base,fadingDirection:Fe.Incoming,fadingParentID:ee.tileID,fadeEndTime:m+T}),ee.setCrossFadeLogic({fadingRole:Te.Parent,fadingDirection:Fe.Departing,fadeEndTime:m+T}),o[K.key]=K,!0}return!1}function Yn(x,t,o,m,_,w){if(!t.hasData())return!1;const T=t.tileID.children(_);let E=je(x,t,T,o,m,_,w);if(E)return!0;for(const I of T)je(x,t,I.children(_),o,m,_,w)&&(E=!0);return E}function je(x,t,o,m,_,w,T){if(o[0].overscaledZ>=w)return!1;let E=!1;for(const I of o){const R=x.getLoadedTile(I);if(!R)continue;const{fadingRole:B,fadingDirection:G,fadingParentID:U}=R;B===Te.Base&&G===Fe.Departing&&U||(R.setCrossFadeLogic({fadingRole:Te.Base,fadingDirection:Fe.Departing,fadingParentID:t.tileID,fadeEndTime:_+T}),t.setCrossFadeLogic({fadingRole:Te.Parent,fadingDirection:Fe.Incoming,fadeEndTime:_+T})),m[I.key]=I,E=!0}return E}function Ln(x,t,o,m){const _=x.tileID;return!!x.selfFading||!x.hasData()&&!!t.has(_)&&(x.setSelfFadeLogic(o+m),!0)}function En(x,t){var o;x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0;let m=t.tileID.canonical.x-x.tileID.canonical.x;const _=t.tileID.canonical.y-x.tileID.canonical.y,w=Math.pow(2,x.tileID.canonical.z),T=t.tileID.key;m===0&&_===0||Math.abs(_)>1||(Math.abs(m)>1&&(Math.abs(m+w)===1?m+=w:Math.abs(m-w)===1&&(m-=w)),t.dem&&x.dem&&(x.dem.backfillBorder(t.dem,m,_),!((o=x.neighboringTiles)===null||o===void 0)&&o[T]&&(x.neighboringTiles[T].backfilled=!0)))}class Js{constructor(){this._tiles={}}handleWrapJump(t){const o={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+t),o[_.tileID.key]=_}this._tiles=o}setFeatureState(t,o){for(const m in this._tiles)this._tiles[m].setFeatureState(t,o)}getAllTiles(){return Object.values(this._tiles)}getAllIds(t=!1){return t?Object.values(this._tiles).map((o=>o.tileID)).sort(s.aw).map((o=>o.key)):Object.keys(this._tiles)}getTileById(t){return this._tiles[t]}setTile(t,o){this._tiles[t]=o}deleteTileById(t){delete this._tiles[t]}getLoadedTile(t){const o=this.getTileById(t.key);return o?.hasData()?o:null}isIdRenderable(t,o=!1){var m;return(m=this.getTileById(t))===null||m===void 0?void 0:m.isRenderable(o)}getRenderableIds(t=0,o){const m=[];for(const _ of this.getAllIds())this.isIdRenderable(_,o)&&m.push(this.getTileById(_));return o?m.sort(((_,w)=>{const T=_.tileID,E=w.tileID,I=new s.P(T.canonical.x,T.canonical.y)._rotate(-t),R=new s.P(E.canonical.x,E.canonical.y)._rotate(-t);return T.overscaledZ-E.overscaledZ||R.y-I.y||R.x-I.x})).map((_=>_.tileID.key)):m.map((_=>_.tileID)).sort(s.aw).map((_=>_.key))}}class la extends s.E{constructor(t,o,m){super(),this.id=t,this.dispatcher=m,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,w,T,E)=>{const I=new(se(w.type))(_,w,T,E);if(I.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${I.id}`);return I})(t,o,m,this),this._inViewTiles=new Js,this._outOfViewCache=new s.ax(0,(_=>this._unloadTile(_))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ze,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){for(const o of this._inViewTiles.getAllTiles())o.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t),this._inViewTiles=new Js}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,o,m){return s._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,o,m)}catch(_){t.state="errored",_.status!==404?this._source.fire(new s.k(_,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new s.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const o of this._inViewTiles.getAllTiles())o.upload(t),o.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(t){var o;return this._inViewTiles.getRenderableIds((o=this.transform)===null||o===void 0?void 0:o.bearingInRadians,t)}hasRenderableParent(t){const o=t.overscaledZ-1;if(o>=this._source.minzoom){const m=this.getLoadedTile(t.scaledTo(o));if(m)return this._inViewTiles.isIdRenderable(m.tileID.key)}return!1}reload(t,o=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const m of this._inViewTiles.getAllIds()){const _=this._inViewTiles.getTileById(m);o&&!this._source.shouldReloadTile(_,o)||(t?this._reloadTile(m,"expired"):_.state!=="errored"&&this._reloadTile(m,"reloading"))}}}_reloadTile(t,o){return s._(this,void 0,void 0,(function*(){const m=this._inViewTiles.getTileById(t);m&&(m.state!=="loading"&&(m.state=o),yield this._loadTile(m,t,o))}))}_tileLoaded(t,o,m){t.timeAdded=ae(),t.selfFading&&(t.fadeEndTime=t.timeAdded+this._rasterFadeDuration),m==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this.getSource().type==="raster-dem"&&t.dem&&(function(_,w){var T,E;const I=w.getRenderableIds();for(const R of I){if(!_.neighboringTiles||!_.neighboringTiles[R])continue;const B=w.getTileById(R);_.neighboringTiles[R].backfilled||En(_,B),!((E=(T=B.neighboringTiles)===null||T===void 0?void 0:T[_.tileID.key])===null||E===void 0)&&E.backfilled||En(B,_)}})(t,this._inViewTiles),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:t,coord:t.tileID}))}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._inViewTiles.getTileById(t)}_retainLoadedChildren(t,o){const m=this._getLoadedDescendents(o),_=new Set;for(const w of o){const T=m[w.key];if(!T?.length){_.add(w);continue}const E=w.overscaledZ+la.maxOverzooming,I=T.filter((G=>G.tileID.overscaledZ<=E));if(!I.length){_.add(w);continue}const R=Math.min(...I.map((G=>G.tileID.overscaledZ))),B=I.filter((G=>G.tileID.overscaledZ===R)).map((G=>G.tileID));for(const G of B)t[G.key]=G;this._areDescendentsComplete(B,R,w.overscaledZ)||_.add(w)}return _}_getLoadedDescendents(t){var o;const m={};for(const _ of this._inViewTiles.getAllTiles().filter((w=>w.hasData())))for(const w of t)_.tileID.isChildOf(w)&&(m[o=w.key]||(m[o]=[])).push(_);return m}_areDescendentsComplete(t,o,m){return t.length===1&&t[0].isOverscaled()?t[0].overscaledZ===o:Math.pow(4,o-m)===t.length}getLoadedTile(t){return this._inViewTiles.getLoadedTile(t)}updateCacheSize(t){const o=Math.ceil(t.width/this._source.tileSize)+1,m=Math.ceil(t.height/this._source.tileSize)+1,_=Math.floor(o*m*(this._maxTileCacheZoomLevels===null?s.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._outOfViewCache.setMaxSize(w)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);this._prevLng=t,o&&(this._inViewTiles.handleWrapJump(o),this._resetTileReloadTimers())}update(t,o){if(!this._sourceLoaded||this._paused)return;let m;this.transform=t,this.terrain=o,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?m=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((I=>new s.a2(I.canonical.z,I.wrap,I.canonical.z,I.canonical.x,I.canonical.y))):(m=Fi(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?t.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter((I=>this._source.hasTile(I))))):m=[],this.usedForTerrain&&(m=this._addTerrainIdealTiles(m));const _=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,_&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const w=_i(t,this._source),T=this._updateRetainedTiles(m,w),E=rn(this._source.type);E&&this._rasterFadeDuration>0&&!o&&(function(I,R,B,G,U,K,ee){const le=ae(),he=s.av(R);for(const ue of R){const fe=I.getTileById(ue.key);fe.fadingDirection!==Fe.Departing&&fe.fadeOpacity!==0||fe.resetFadeLogic(),Xs(I,fe,B,le,G,U,ee)||Yn(I,fe,B,le,K,ee)||Ln(fe,he,le,ee)||fe.resetFadeLogic()}})(this._inViewTiles,m,T,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),E?this._cleanUpRasterTiles(T):this._cleanUpVectorTiles(T)}_cleanUpRasterTiles(t){for(const o of this._inViewTiles.getAllIds())t[o]||this._removeTile(o)}_cleanUpVectorTiles(t){for(const o of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(o);t[o]?m.clearSymbolFadeHold():m.hasSymbolBuckets?m.holdingForSymbolFade()?m.symbolFadeFinished()&&this._removeTile(o):m.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(o)}}_addTerrainIdealTiles(t){const o=[];for(const m of t)if(m.canonical.z>this._source.minzoom){const _=m.scaledTo(m.canonical.z-1);o.push(_);const w=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));o.push(w)}return t.concat(o)}releaseSymbolFadeTiles(){for(const t of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(t).holdingForSymbolFade()&&this._removeTile(t)}_updateRetainedTiles(t,o){var m;const _=new Set;for(const R of t)this._addTile(R).hasData()||_.add(R);const w=t.reduce(((R,B)=>(R[B.key]=B,R)),{}),T=this._retainLoadedChildren(w,_),E={},I=Math.max(o-la.maxUnderzooming,this._source.minzoom);for(const R of T){let B=this._inViewTiles.getTileById(R.key),G=B?.wasRequested();for(let U=R.overscaledZ-1;U>=I;--U){const K=R.scaledTo(U);if(E[K.key])break;if(E[K.key]=!0,B=this.getTile(K),!B&&G&&(B=this._addTile(K)),B){const ee=B.hasData();if((ee||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||G)&&(w[K.key]=K),G=B.wasRequested(),ee)break}}}return w}_addTile(t){let o=this._inViewTiles.getTileById(t.key);if(o)return o;o=this._outOfViewCache.getAndRemove(t),o&&(o.resetFadeLogic(),this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null));const m=o;return o||(o=new Ye(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(o,t.key,o.state)),o.uses++,this._inViewTiles.setTile(t.key,o),m||this._source.fire(new s.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(t,o){this._clearTileReloadTimer(t);const m=o.getExpiryTimeout();m&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),m))}_clearTileReloadTimer(t){const o=this._timers[t];o&&(clearTimeout(o),delete this._timers[t])}_resetTileReloadTimers(){for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t of this._inViewTiles.getAllIds()){const o=this._inViewTiles.getTileById(t);this._setTileReloadTimer(t,o)}}refreshTiles(t){for(const o of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(o);(this._inViewTiles.isIdRenderable(o)||m.state=="errored")&&t.some((_=>_.equals(m.tileID.canonical)))&&this._reloadTile(o,"expired")}}_removeTile(t){const o=this._inViewTiles.getTileById(t);o&&(o.uses--,this._inViewTiles.deleteTileById(t),this._clearTileReloadTimer(t),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._outOfViewCache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(t){t.dataType==="source"&&(t.sourceDataType!=="metadata"?t.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(t.sourceDataChanged,t.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t of this._inViewTiles.getAllIds())this._removeTile(t);this._outOfViewCache.reset()}tilesIn(t,o,m){const _=[],w=this.transform;if(!w)return _;const T=w.getCoveringTilesDetailsProvider().allowWorldCopies(),E=m?w.getCameraQueryGeometry(t):t,I=K=>w.screenPointToMercatorCoordinate(K,this.terrain),R=this.transformBbox(t,I,!T),B=this.transformBbox(E,I,!T),G=this.getIds(),U=s.aa.fromPoints(B);for(let K=0;K<G.length;K++){const ee=this._inViewTiles.getTileById(G[K]);if(ee.holdingForSymbolFade())continue;const le=T?[ee.tileID]:[ee.tileID.unwrapTo(-1),ee.tileID.unwrapTo(0)],he=Math.pow(2,w.zoom-ee.tileID.overscaledZ),ue=o*ee.queryPadding*s.a5/ee.tileSize/he;for(const fe of le){const ye=U.map((de=>fe.getTilePoint(new s.a9(de.x,de.y))));if(ye.expandBy(ue),ye.intersects(yi)){const de=R.map((ke=>fe.getTilePoint(ke))),ge=B.map((ke=>fe.getTilePoint(ke)));_.push({tile:ee,tileID:T?fe:fe.unwrapTo(0),queryGeometry:de,cameraQueryGeometry:ge,scale:he})}}}return _}transformBbox(t,o,m){let _=t.map(o);if(m){const w=s.aa.fromPoints(t);w.shrinkBy(.001*Math.min(w.width(),w.height()));const T=w.map(o);s.aa.fromPoints(_).covers(T)||(_=_.map((E=>E.x>.5?new s.a9(E.x-1,E.y,E.z):E)))}return _}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map((m=>this._inViewTiles.getTileById(m).tileID));return this.transform&&this.transform.populateCache(o),o}hasTransition(){return!!this._source.hasTransition()||!(!rn(this._source.type)||!(function(t,o){if(o<=0)return!1;const m=ae();for(const _ of t.getAllTiles())if(_.fadeEndTime>=m)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(t){this._rasterFadeDuration=t}setFeatureState(t,o,m){this._state.updateState(t=t||s.ai,o,m)}removeFeatureState(t,o,m){this._state.removeFeatureState(t=t||s.ai,o,m)}getFeatureState(t,o){return this._state.getState(t=t||s.ai,o)}setDependencies(t,o,m){const _=this._inViewTiles.getTileById(t);_&&_.setDependencies(o,m)}reloadTilesForDependencies(t,o){for(const m of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(m).hasDependency(t,o)&&this._reloadTile(m,"reloading");this._outOfViewCache.filter((m=>!m.hasDependency(t,o)))}areTilesLoaded(){for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}}la.maxUnderzooming=10,la.maxOverzooming=3;class st{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=s.an(t,0,1);let o=1,m=this._distances[o];const _=t*this.paddedLength+this.padding;for(;m<_&&o<this._distances.length;)m=this._distances[++o];const w=o-1,T=this._distances[w],E=m-T,I=E>0?(_-T)/E:0;return this.points[w].mult(1-I).add(this.points[o].mult(I))}}function Ot(x,t){let o=!0;return x==="always"||x!=="never"&&t!=="never"||(o=!1),o}class It{constructor(t,o,m){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(t/m),this.yCellCount=Math.ceil(o/m);for(let T=0;T<this.xCellCount*this.yCellCount;T++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,m,_,w){this._forEachCell(o,m,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(t,o,m,_){this._forEachCell(o-_,m-_,o+_,m+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(m),this.circles.push(_)}_insertBoxCell(t,o,m,_,w,T){this.boxCells[w].push(T)}_insertCircleCell(t,o,m,_,w,T){this.circleCells[w].push(T)}_query(t,o,m,_,w,T,E){if(m<0||t>this.width||_<0||o>this.height)return[];const I=[];if(t<=0&&o<=0&&this.width<=m&&this.height<=_){if(w)return[{key:null,x1:t,y1:o,x2:m,y2:_}];for(let R=0;R<this.boxKeys.length;R++)I.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const B=this.circles[3*R],G=this.circles[3*R+1],U=this.circles[3*R+2];I.push({key:this.circleKeys[R],x1:B-U,y1:G-U,x2:B+U,y2:G+U})}}else this._forEachCell(t,o,m,_,this._queryCell,I,{hitTest:w,overlapMode:T,seenUids:{box:{},circle:{}}},E);return I}query(t,o,m,_){return this._query(t,o,m,_,!1,null)}hitTest(t,o,m,_,w,T){return this._query(t,o,m,_,!0,w,T).length>0}hitTestCircle(t,o,m,_,w){const T=t-m,E=t+m,I=o-m,R=o+m;if(E<0||T>this.width||R<0||I>this.height)return!1;const B=[];return this._forEachCell(T,I,E,R,this._queryCellCircle,B,{hitTest:!0,overlapMode:_,circle:{x:t,y:o,radius:m},seenUids:{box:{},circle:{}}},w),B.length>0}_queryCell(t,o,m,_,w,T,E,I){const{seenUids:R,hitTest:B,overlapMode:G}=E,U=this.boxCells[w];if(U!==null){const ee=this.bboxes;for(const le of U)if(!R.box[le]){R.box[le]=!0;const he=4*le,ue=this.boxKeys[le];if(t<=ee[he+2]&&o<=ee[he+3]&&m>=ee[he+0]&&_>=ee[he+1]&&(!I||I(ue))&&(!B||!Ot(G,ue.overlapMode))&&(T.push({key:ue,x1:ee[he],y1:ee[he+1],x2:ee[he+2],y2:ee[he+3]}),B))return!0}}const K=this.circleCells[w];if(K!==null){const ee=this.circles;for(const le of K)if(!R.circle[le]){R.circle[le]=!0;const he=3*le,ue=this.circleKeys[le];if(this._circleAndRectCollide(ee[he],ee[he+1],ee[he+2],t,o,m,_)&&(!I||I(ue))&&(!B||!Ot(G,ue.overlapMode))){const fe=ee[he],ye=ee[he+1],de=ee[he+2];if(T.push({key:ue,x1:fe-de,y1:ye-de,x2:fe+de,y2:ye+de}),B)return!0}}}return!1}_queryCellCircle(t,o,m,_,w,T,E,I){const{circle:R,seenUids:B,overlapMode:G}=E,U=this.boxCells[w];if(U!==null){const ee=this.bboxes;for(const le of U)if(!B.box[le]){B.box[le]=!0;const he=4*le,ue=this.boxKeys[le];if(this._circleAndRectCollide(R.x,R.y,R.radius,ee[he+0],ee[he+1],ee[he+2],ee[he+3])&&(!I||I(ue))&&!Ot(G,ue.overlapMode))return T.push(!0),!0}}const K=this.circleCells[w];if(K!==null){const ee=this.circles;for(const le of K)if(!B.circle[le]){B.circle[le]=!0;const he=3*le,ue=this.circleKeys[le];if(this._circlesCollide(ee[he],ee[he+1],ee[he+2],R.x,R.y,R.radius)&&(!I||I(ue))&&!Ot(G,ue.overlapMode))return T.push(!0),!0}}}_forEachCell(t,o,m,_,w,T,E,I){const R=this._convertToXCellCoord(t),B=this._convertToYCellCoord(o),G=this._convertToXCellCoord(m),U=this._convertToYCellCoord(_);for(let K=R;K<=G;K++)for(let ee=B;ee<=U;ee++)if(w.call(this,t,o,m,_,this.xCellCount*ee+K,T,E,I))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,m,_,w,T){const E=_-t,I=w-o,R=m+T;return R*R>E*E+I*I}_circleAndRectCollide(t,o,m,_,w,T,E){const I=(T-_)/2,R=Math.abs(t-(_+I));if(R>I+m)return!1;const B=(E-w)/2,G=Math.abs(o-(w+B));if(G>B+m)return!1;if(R<=I||G<=B)return!0;const U=R-I,K=G-B;return U*U+K*K<=m*m}}function Xn(x,t,o){const m=s.N();if(!x){const{vecSouth:G,vecEast:U}=ir(t),K=M();K[0]=U[0],K[1]=U[1],K[2]=G[0],K[3]=G[1],_=K,(B=(T=(w=K)[0])*(R=w[3])-(I=w[2])*(E=w[1]))&&(_[0]=R*(B=1/B),_[1]=-E*B,_[2]=-I*B,_[3]=T*B),m[0]=K[0],m[1]=K[1],m[4]=K[2],m[5]=K[3]}var _,w,T,E,I,R,B;return s.Q(m,m,[1/o,1/o,1]),m}function Fo(x,t,o,m){if(x){const _=s.N();if(!t){const{vecSouth:w,vecEast:T}=ir(o);_[0]=T[0],_[1]=T[1],_[4]=w[0],_[5]=w[1]}return s.Q(_,_,[m,m,1]),_}return o.pixelsToClipSpaceMatrix}function ir(x){const t=Math.cos(x.rollInRadians),o=Math.sin(x.rollInRadians),m=Math.cos(x.pitchInRadians),_=Math.cos(x.bearingInRadians),w=Math.sin(x.bearingInRadians),T=s.aC();T[0]=-_*m*o-w*t,T[1]=-w*m*o+_*t;const E=s.aD(T);E<1e-9?s.aE(T):s.aF(T,T,1/E);const I=s.aC();I[0]=_*m*t-w*o,I[1]=w*m*t+_*o;const R=s.aD(I);return R<1e-9?s.aE(I):s.aF(I,I,1/R),{vecEast:I,vecSouth:T}}function Rt(x,t,o,m){let _;m?(_=[x,t,m(x,t),1],s.aH(_,_,o)):(_=[x,t,0,1],qr(_,_,o));const w=_[3];return{point:new s.P(_[0]/w,_[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function Qs(x,t){return .5+x/t*.5}function gs(x,t){return x.x>=-t[0]&&x.x<=t[0]&&x.y>=-t[1]&&x.y<=t[1]}function Oo(x,t,o,m,_,w,T,E,I,R,B,G,U){const K=o?x.textSizeData:x.iconSizeData,ee=s.ay(K,t.transform.zoom),le=[256/t.width*2+1,256/t.height*2+1],he=o?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;he.clear();const ue=x.lineVertexArray,fe=o?x.text.placedSymbolArray:x.icon.placedSymbolArray,ye=t.transform.width/t.transform.height;let de=!1;for(let ge=0;ge<fe.length;ge++){const ke=fe.get(ge);if(ke.hidden||ke.writingMode===s.az.vertical&&!de){ci(ke.numGlyphs,he);continue}de=!1;const me=new s.P(ke.anchorX,ke.anchorY),Me={getElevation:U,pitchedLabelPlaneMatrix:m,lineVertexArray:ue,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:me,unwrappedTileID:I,width:R,height:B,translation:G},$e=Va(ke.anchorX,ke.anchorY,Me);if(!gs($e.point,le)){ci(ke.numGlyphs,he);continue}const ze=Qs(t.transform.cameraToCenterDistance,$e.signedDistanceFromCamera),Re=s.aA(K,ee,ke),Oe=w?Re*t.transform.getPitchedTextCorrection(ke.anchorX,ke.anchorY,I)/ze:Re*ze,tt=_s({projectionContext:Me,pitchedLabelPlaneMatrixInverse:_,symbol:ke,fontSize:Oe,flip:!1,keepUpright:T,glyphOffsetArray:x.glyphOffsetArray,dynamicLayoutVertexArray:he,aspectRatio:ye,rotateToLine:E});de=tt.useVertical,(tt.notEnoughRoom||de||tt.needsFlipping&&_s({projectionContext:Me,pitchedLabelPlaneMatrixInverse:_,symbol:ke,fontSize:Oe,flip:!0,keepUpright:T,glyphOffsetArray:x.glyphOffsetArray,dynamicLayoutVertexArray:he,aspectRatio:ye,rotateToLine:E}).notEnoughRoom)&&ci(ke.numGlyphs,he)}o?x.text.dynamicLayoutVertexBuffer.updateData(he):x.icon.dynamicLayoutVertexBuffer.updateData(he)}function nr(x,t,o,m,_,w,T,E){const I=w.glyphStartIndex+w.numGlyphs,R=w.lineStartIndex,B=w.lineStartIndex+w.lineLength,G=t.getoffsetX(w.glyphStartIndex),U=t.getoffsetX(I-1),K=Nn(x*G,o,m,_,w.segment,R,B,E,T);if(!K)return null;const ee=Nn(x*U,o,m,_,w.segment,R,B,E,T);return ee?E.projectionCache.anyProjectionOccluded?null:{first:K,last:ee}:null}function eo(x,t,o,m){return x===s.az.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*m?{useVertical:!0}:(x===s.az.vertical?t.y<o.y:t.x>o.x)?{needsFlipping:!0}:null}function _s(x){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:o,symbol:m,fontSize:_,flip:w,keepUpright:T,glyphOffsetArray:E,dynamicLayoutVertexArray:I,aspectRatio:R,rotateToLine:B}=x,G=_/24,U=m.lineOffsetX*G,K=m.lineOffsetY*G;let ee;if(m.numGlyphs>1){const le=m.glyphStartIndex+m.numGlyphs,he=m.lineStartIndex,ue=m.lineStartIndex+m.lineLength,fe=nr(G,E,U,K,w,m,B,t);if(!fe)return{notEnoughRoom:!0};const ye=ys(fe.first.point.x,fe.first.point.y,t,o),de=ys(fe.last.point.x,fe.last.point.y,t,o);if(T&&!w){const ge=eo(m.writingMode,ye,de,R);if(ge)return ge}ee=[fe.first];for(let ge=m.glyphStartIndex+1;ge<le-1;ge++){const ke=Nn(G*E.getoffsetX(ge),U,K,w,m.segment,he,ue,t,B);if(!ke)return{notEnoughRoom:!0};ee.push(ke)}ee.push(fe.last)}else{if(T&&!w){const he=ui(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,ue=m.lineStartIndex+m.segment+1,fe=new s.P(t.lineVertexArray.getx(ue),t.lineVertexArray.gety(ue)),ye=ui(fe.x,fe.y,t),de=ye.signedDistanceFromCamera>0?ye.point:to(t.tileAnchorPoint,fe,he,1,t),ge=ys(he.x,he.y,t,o),ke=ys(de.x,de.y,t,o),me=eo(m.writingMode,ge,ke,R);if(me)return me}const le=Nn(G*E.getoffsetX(m.glyphStartIndex),U,K,w,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,t,B);if(!le||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[le]}for(const le of ee)s.aG(I,le.point,le.angle);return{}}function to(x,t,o,m,_){const w=x.add(x.sub(t)._unit()),T=ui(w.x,w.y,_).point,E=o.sub(T);return o.add(E._mult(m/E.mag()))}function Vn(x,t,o){const m=t.projectionCache;if(m.projections[x])return m.projections[x];const _=new s.P(t.lineVertexArray.getx(x),t.lineVertexArray.gety(x)),w=ui(_.x,_.y,t);if(w.signedDistanceFromCamera>0)return m.projections[x]=w.point,m.anyProjectionOccluded=m.anyProjectionOccluded||w.isOccluded,w.point;const T=x-o.direction;return to(o.distanceFromAnchor===0?t.tileAnchorPoint:new s.P(t.lineVertexArray.getx(T),t.lineVertexArray.gety(T)),_,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,t)}function ui(x,t,o){const m=x+o.translation[0],_=t+o.translation[1];let w;return o.pitchWithMap?(w=Rt(m,_,o.pitchedLabelPlaneMatrix,o.getElevation),w.isOccluded=!1):(w=o.transform.projectTileCoordinates(m,_,o.unwrappedTileID,o.getElevation),w.point.x=(.5*w.point.x+.5)*o.width,w.point.y=(.5*-w.point.y+.5)*o.height),w}function ys(x,t,o,m){if(o.pitchWithMap){const _=[x,t,0,1];return s.aH(_,_,m),o.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],o.unwrappedTileID,o.getElevation).point}return{x:x/o.width*2-1,y:1-t/o.height*2}}function Va(x,t,o){return o.transform.projectTileCoordinates(x,t,o.unwrappedTileID,o.getElevation)}function vs(x,t,o){return x._unit()._perp()._mult(t*o)}function Tr(x,t,o,m,_,w,T,E,I){if(E.projectionCache.offsets[x])return E.projectionCache.offsets[x];const R=o.add(t);if(x+I.direction<m||x+I.direction>=_)return E.projectionCache.offsets[x]=R,R;const B=Vn(x+I.direction,E,I),G=vs(B.sub(o),T,I.direction),U=o.add(G),K=B.add(G);return E.projectionCache.offsets[x]=s.aI(w,R,U,K)||R,E.projectionCache.offsets[x]}function Nn(x,t,o,m,_,w,T,E,I){const R=m?x-t:x+t;let B=R>0?1:-1,G=0;m&&(B*=-1,G=Math.PI),B<0&&(G+=Math.PI);let U,K=B>0?w+_:w+_+1;E.projectionCache.cachedAnchorPoint?U=E.projectionCache.cachedAnchorPoint:(U=ui(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=U);let ee,le,he=U,ue=U,fe=0,ye=0;const de=Math.abs(R),ge=[];let ke;for(;fe+ye<=de;){if(K+=B,K<w||K>=T)return null;fe+=ye,ue=he,le=ee;const $e={absOffsetX:de,direction:B,distanceFromAnchor:fe,previousVertex:ue};if(he=Vn(K,E,$e),o===0)ge.push(ue),ke=he.sub(ue);else{let ze;const Re=he.sub(ue);ze=Re.mag()===0?vs(Vn(K+B,E,$e).sub(he),o,B):vs(Re,o,B),le||(le=ue.add(ze)),ee=Tr(K,ze,he,w,T,le,o,E,$e),ge.push(le),ke=ee.sub(le)}ye=ke.mag()}const me=ke._mult((de-fe)/ye)._add(le||ue),Me=G+Math.atan2(he.y-ue.y,he.x-ue.x);return ge.push(me),{point:me,angle:I?Me:0,path:ge}}const ti=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ci(x,t){for(let o=0;o<x;o++){const m=t.length;t.resize(m+4),t.float32.set(ti,3*m)}}function qr(x,t,o){const m=t[0],_=t[1];return x[0]=o[0]*m+o[4]*_+o[12],x[1]=o[1]*m+o[5]*_+o[13],x[3]=o[3]*m+o[7]*_+o[15],x}const vi=100;class Zr{constructor(t,o=new It(t.width+200,t.height+200,25),m=new It(t.width+200,t.height+200,25)){this.transform=t,this.grid=o,this.ignoredGrid=m,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+vi,this.screenBottomBoundary=t.height+vi,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,o,m,_,w,T,E,I,R,B,G,U){const K=this.projectAndGetPerspectiveRatio(t.anchorPointX+I[0],t.anchorPointY+I[1],w,B,U),ee=m*K.perspectiveRatio;let le;if(T||E)le=this._projectCollisionBox(t,ee,_,w,T,E,I,K,B,G,U);else{const ke=K.x+(G?G.x*ee:0),me=K.y+(G?G.y*ee:0);le={allPointsOccluded:!1,box:[ke+t.x1*ee,me+t.y1*ee,ke+t.x2*ee,me+t.y2*ee]}}const[he,ue,fe,ye]=le.box,de=T?le.allPointsOccluded:K.isOccluded;let ge=de;return ge||(ge=K.perspectiveRatio<this.perspectiveRatioCutoff),ge||(ge=!this.isInsideGrid(he,ue,fe,ye)),ge||o!=="always"&&this.grid.hitTest(he,ue,fe,ye,o,R)?{box:[he,ue,fe,ye],placeable:!1,offscreen:!1,occluded:de}:{box:[he,ue,fe,ye],placeable:!0,offscreen:this.isOffscreen(he,ue,fe,ye),occluded:de}}placeCollisionCircles(t,o,m,_,w,T,E,I,R,B,G,U,K,ee){const le=[],he=new s.P(o.anchorX,o.anchorY),ue=this.getPerspectiveRatio(he.x,he.y,T,ee),fe=(R?w*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,T)/ue:w*ue)/s.aM,ye={getElevation:ee,pitchedLabelPlaneMatrix:E,lineVertexArray:m,pitchWithMap:R,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:he,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:K},de=nr(fe,_,o.lineOffsetX*fe,o.lineOffsetY*fe,!1,o,!1,ye);let ge=!1,ke=!1,me=!0;if(de){const Me=.5*G*ue+U,$e=new s.P(-100,-100),ze=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Re=new st,Oe=de.first,tt=de.last;let it=[];for(let Dt=Oe.path.length-1;Dt>=1;Dt--)it.push(Oe.path[Dt]);for(let Dt=1;Dt<tt.path.length;Dt++)it.push(tt.path[Dt]);const Ke=2.5*Me;if(R){const Dt=this.projectPathToScreenSpace(it,ye);it=Dt.some((pi=>pi.signedDistanceFromCamera<=0))?[]:Dt.map((pi=>pi.point))}let rt=[];if(it.length>0){const Dt=it[0].clone(),pi=it[0].clone();for(let zi=1;zi<it.length;zi++)Dt.x=Math.min(Dt.x,it[zi].x),Dt.y=Math.min(Dt.y,it[zi].y),pi.x=Math.max(pi.x,it[zi].x),pi.y=Math.max(pi.y,it[zi].y);rt=Dt.x>=$e.x&&pi.x<=ze.x&&Dt.y>=$e.y&&pi.y<=ze.y?[it]:pi.x<$e.x||Dt.x>ze.x||pi.y<$e.y||Dt.y>ze.y?[]:s.aJ([it],$e.x,$e.y,ze.x,ze.y)}for(const Dt of rt){Re.reset(Dt,.25*Me);let pi=0;pi=Re.length<=.5*Me?1:Math.ceil(Re.paddedLength/Ke)+1;for(let zi=0;zi<pi;zi++){const Ti=zi/Math.max(pi-1,1),Bi=Re.lerp(Ti),Pi=Bi.x+vi,Qi=Bi.y+vi;le.push(Pi,Qi,Me,0);const $i=Pi-Me,zn=Qi-Me,fn=Pi+Me,on=Qi+Me;if(me=me&&this.isOffscreen($i,zn,fn,on),ke=ke||this.isInsideGrid($i,zn,fn,on),t!=="always"&&this.grid.hitTestCircle(Pi,Qi,Me,t,B)&&(ge=!0,!I))return{circles:[],offscreen:!1,collisionDetected:ge}}}}return{circles:!I&&ge||!ke||ue<this.perspectiveRatioCutoff?[]:le,offscreen:me,collisionDetected:ge}}projectPathToScreenSpace(t,o){const m=(function(_,w){const T=s.N();return s.aB(T,w.pitchedLabelPlaneMatrix),_.map((E=>{const I=Rt(E.x,E.y,T,w.getElevation),R=w.transform.projectTileCoordinates(I.point.x,I.point.y,w.unwrappedTileID,w.getElevation);return R.point.x=(.5*R.point.x+.5)*w.width,R.point.y=(.5*-R.point.y+.5)*w.height,R}))})(t,o);return(function(_){let w=0,T=0,E=0,I=0;for(let R=0;R<_.length;R++)_[R].isOccluded?(E=R+1,I=0):(I++,I>T&&(T=I,w=E));return _.slice(w,w+T)})(m)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[],m=new s.aa;for(const G of t){const U=new s.P(G.x+vi,G.y+vi);m.extend(U),o.push(U)}const{minX:_,minY:w,maxX:T,maxY:E}=m,I=this.grid.query(_,w,T,E).concat(this.ignoredGrid.query(_,w,T,E)),R={},B={};for(const G of I){const U=G.key;if(R[U.bucketInstanceId]===void 0&&(R[U.bucketInstanceId]={}),R[U.bucketInstanceId][U.featureIndex])continue;const K=[new s.P(G.x1,G.y1),new s.P(G.x2,G.y1),new s.P(G.x2,G.y2),new s.P(G.x1,G.y2)];s.aK(o,K)&&(R[U.bucketInstanceId][U.featureIndex]=!0,B[U.bucketInstanceId]===void 0&&(B[U.bucketInstanceId]=[]),B[U.bucketInstanceId].push(U.featureIndex))}return B}insertCollisionBox(t,o,m,_,w,T){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:w,collisionGroupID:T,overlapMode:o},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,m,_,w,T){const E=m?this.ignoredGrid:this.grid,I={bucketInstanceId:_,featureIndex:w,collisionGroupID:T,overlapMode:o};for(let R=0;R<t.length;R+=4)E.insertCircle(I,t[R],t[R+1],t[R+2])}projectAndGetPerspectiveRatio(t,o,m,_,w){if(w){let T;_?(T=[t,o,_(t,o),1],s.aH(T,T,w)):(T=[t,o,0,1],qr(T,T,w));const E=T[3];return{x:(T[0]/E+1)/2*this.transform.width+vi,y:(-T[1]/E+1)/2*this.transform.height+vi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}{const T=this.transform.projectTileCoordinates(t,o,m,_);return{x:(T.point.x+1)/2*this.transform.width+vi,y:(1-T.point.y)/2*this.transform.height+vi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(t,o,m,_){const w=this.transform.projectTileCoordinates(t,o,m,_);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(t,o,m,_){return m<vi||t>=this.screenRightBoundary||_<vi||o>this.screenBottomBoundary}isInsideGrid(t,o,m,_){return m>=0&&t<this.gridRightBoundary&&_>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=s.ar([]);return s.O(t,t,[-100,-100,0]),t}_projectCollisionBox(t,o,m,_,w,T,E,I,R,B,G){let U=1,K=0,ee=0,le=1;const he=t.anchorPointX+E[0],ue=t.anchorPointY+E[1];if(T&&!w){const it=this.projectAndGetPerspectiveRatio(he+1,ue,_,R,G),Ke=it.x-I.x,rt=Math.atan((it.y-I.y)/Ke)+(Ke<0?Math.PI:0),Dt=Math.sin(rt),pi=Math.cos(rt);U=pi,K=Dt,ee=-Dt,le=pi}else if(!T&&w){const it=ir(this.transform);U=it.vecEast[0],K=it.vecEast[1],ee=it.vecSouth[0],le=it.vecSouth[1]}let fe=I.x,ye=I.y,de=o;w&&(fe=he,ye=ue,de=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),de*=this.transform.getPitchedTextCorrection(he,ue,_),B||(de*=s.an(.5+I.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(fe+=U*B.x*de+ee*B.y*de,ye+=K*B.x*de+le*B.y*de);const ge=t.x1*de,ke=t.x2*de,me=(ge+ke)/2,Me=t.y1*de,$e=t.y2*de,ze=(Me+$e)/2,Re=[{offsetX:ge,offsetY:Me},{offsetX:me,offsetY:Me},{offsetX:ke,offsetY:Me},{offsetX:ke,offsetY:ze},{offsetX:ke,offsetY:$e},{offsetX:me,offsetY:$e},{offsetX:ge,offsetY:$e},{offsetX:ge,offsetY:ze}];let Oe=[];for(const{offsetX:it,offsetY:Ke}of Re)Oe.push(new s.P(fe+U*it+ee*Ke,ye+K*it+le*Ke));let tt=!1;if(w){const it=Oe.map((Ke=>this.projectAndGetPerspectiveRatio(Ke.x,Ke.y,_,R,G)));tt=it.some((Ke=>!Ke.isOccluded)),Oe=it.map((Ke=>new s.P(Ke.x,Ke.y)))}else tt=!0;return{box:s.aL(Oe),allPointsOccluded:!tt}}}class jo{constructor(t,o,m,_){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):_&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class jt{constructor(t,o,m,_,w){this.text=new jo(t?t.text:null,o,m,w),this.icon=new jo(t?t.icon:null,o,_,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ui{constructor(t,o,m){this.text=t,this.icon=o,this.skipFade=m}}class Bo{constructor(t,o,m,_,w){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=m,this.bucketIndex=_,this.tileID=w}}class io{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:m=>m.collisionGroupID===o}}return this.collisionGroups[t]}}function Un(x,t,o,m,_){const{horizontalAlign:w,verticalAlign:T}=s.aS(x);return new s.P(-(w-.5)*t+m[0]*_,-(T-.5)*o+m[1]*_)}class Sl{constructor(t,o,m,_,w){this.transform=t.clone(),this.terrain=o,this.collisionIndex=new Zr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new io(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const o=this.terrain;return o?(m,_)=>o.getElevation(t,m,_):null}getBucketParts(t,o,m,_){const w=m.getBucket(o),T=m.latestFeatureIndex;if(!w||!T||o.id!==w.layerIds[0])return;const E=m.collisionBoxArray,I=w.layers[0].layout,R=w.layers[0].paint,B=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),G=m.tileSize/s.a5,U=m.tileID.toUnwrapped(),K=I.get("text-rotation-alignment")==="map",ee=s.aN(m,1,this.transform.zoom),le=s.aO(this.collisionIndex.transform,m,R.get("text-translate"),R.get("text-translate-anchor")),he=s.aO(this.collisionIndex.transform,m,R.get("icon-translate"),R.get("icon-translate-anchor")),ue=Xn(K,this.transform,ee);this.retainedQueryData[w.bucketInstanceId]=new Bo(w.bucketInstanceId,T,w.sourceLayerIndex,w.index,m.tileID);const fe={bucket:w,layout:I,translationText:le,translationIcon:he,unwrappedTileID:U,pitchedLabelPlaneMatrix:ue,scale:B,textPixelRatio:G,holdingForFade:m.holdingForSymbolFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:s.ay(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(_)for(const ye of w.sortKeyRanges){const{sortKey:de,symbolInstanceStart:ge,symbolInstanceEnd:ke}=ye;t.push({sortKey:de,symbolInstanceStart:ge,symbolInstanceEnd:ke,parameters:fe})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:fe})}attemptAnchorPlacement(t,o,m,_,w,T,E,I,R,B,G,U,K,ee,le,he,ue,fe,ye,de){const ge=s.aP[t.textAnchor],ke=[t.textOffset0,t.textOffset1],me=Un(ge,m,_,ke,w),Me=this.collisionIndex.placeCollisionBox(o,U,I,R,B,E,T,he,G.predicate,ye,me,de);if((!fe||this.collisionIndex.placeCollisionBox(fe,U,I,R,B,E,T,ue,G.predicate,ye,me,de).placeable)&&Me.placeable){let $e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&($e=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:ke,width:m,height:_,anchor:ge,textBoxScale:w,prevAnchor:$e},this.markUsedJustification(ee,ge,K,le),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,le,K),this.placedOrientations[K.crossTileID]=le),{shift:me,placedGlyphBoxes:Me}}}placeLayerBucketPart(t,o,m){const{bucket:_,layout:w,translationText:T,translationIcon:E,unwrappedTileID:I,pitchedLabelPlaneMatrix:R,textPixelRatio:B,holdingForFade:G,collisionBoxArray:U,partiallyEvaluatedTextSize:K,collisionGroup:ee}=t.parameters,le=w.get("text-optional"),he=w.get("icon-optional"),ue=s.aQ(w,"text-overlap","text-allow-overlap"),fe=ue==="always",ye=s.aQ(w,"icon-overlap","icon-allow-overlap"),de=ye==="always",ge=w.get("text-rotation-alignment")==="map",ke=w.get("text-pitch-alignment")==="map",me=w.get("icon-text-fit")!=="none",Me=w.get("symbol-z-order")==="viewport-y",$e=fe&&(de||!_.hasIconData()||he),ze=de&&(fe||!_.hasTextData()||le);!_.collisionArrays&&U&&_.deserializeCollisionBoxes(U);const Re=this.retainedQueryData[_.bucketInstanceId].tileID,Oe=this._getTerrainElevationFunc(Re),tt=this.transform.getFastPathSimpleProjectionMatrix(Re),it=(Ke,rt,Dt)=>{var pi,zi;if(o[Ke.crossTileID])return;if(G)return void(this.placements[Ke.crossTileID]=new Ui(!1,!1,!1));let Ti=!1,Bi=!1,Pi=!0,Qi=null,$i={box:null,placeable:!1,offscreen:null,occluded:!1},zn={placeable:!1},fn=null,on=null,Zn=null,Ns=0,ss=0,Fr=0;rt.textFeatureIndex?Ns=rt.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(Ns=Ke.featureIndex),rt.verticalTextFeatureIndex&&(ss=rt.verticalTextFeatureIndex);const xa=rt.textBox;if(xa){const Xa=Li=>{let Mi=s.az.horizontal;if(_.allowVerticalPlacement&&!Li&&this.prevPlacement){const Tn=this.prevPlacement.placedOrientations[Ke.crossTileID];Tn&&(this.placedOrientations[Ke.crossTileID]=Tn,Mi=Tn,this.markUsedOrientation(_,Mi,Ke))}return Mi},Or=(Li,Mi)=>{if(_.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&rt.verticalTextBox){for(const Tn of _.writingModes)if(Tn===s.az.vertical?($i=Mi(),zn=$i):$i=Li(),$i&&$i.placeable)break}else $i=Li()},vr=Ke.textAnchorOffsetStartIndex,xr=Ke.textAnchorOffsetEndIndex;if(xr===vr){const Li=(Mi,Tn)=>{const Pn=this.collisionIndex.placeCollisionBox(Mi,ue,B,Re,I,ke,ge,T,ee.predicate,Oe,void 0,tt);return Pn&&Pn.placeable&&(this.markUsedOrientation(_,Tn,Ke),this.placedOrientations[Ke.crossTileID]=Tn),Pn};Or((()=>Li(xa,s.az.horizontal)),(()=>{const Mi=rt.verticalTextBox;return _.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&Mi?Li(Mi,s.az.vertical):{box:null,offscreen:null}})),Xa($i&&$i.placeable)}else{let Li=s.aP[(zi=(pi=this.prevPlacement)===null||pi===void 0?void 0:pi.variableOffsets[Ke.crossTileID])===null||zi===void 0?void 0:zi.anchor];const Mi=(Pn,Sc,Tc)=>{const wo=Pn.x2-Pn.x1,ap=Pn.y2-Pn.y1,Pc=Ke.textBoxScale,od=me&&ye==="never"?Sc:null;let Us=null,Gs=ue==="never"?1:2,qs="never";Li&&Gs++;for(let ld=0;ld<Gs;ld++){for(let ud=vr;ud<xr;ud++){const nh=_.textAnchorOffsets.get(ud);if(Li&&nh.textAnchor!==Li)continue;const ah=this.attemptAnchorPlacement(nh,Pn,wo,ap,Pc,ge,ke,B,Re,I,ee,qs,Ke,_,Tc,T,E,od,Oe);if(ah&&(Us=ah.placedGlyphBoxes,Us&&Us.placeable))return Ti=!0,Qi=ah.shift,Us}Li?Li=null:qs=ue}return m&&!Us&&(Us={box:this.collisionIndex.placeCollisionBox(xa,"always",B,Re,I,ke,ge,T,ee.predicate,Oe,void 0,tt).box,offscreen:!1,placeable:!1,occluded:!1}),Us};Or((()=>Mi(xa,rt.iconBox,s.az.horizontal)),(()=>{const Pn=rt.verticalTextBox;return _.allowVerticalPlacement&&(!$i||!$i.placeable)&&Ke.numVerticalGlyphVertices>0&&Pn?Mi(Pn,rt.verticalIconBox,s.az.vertical):{box:null,occluded:!0,offscreen:null}})),$i&&(Ti=$i.placeable,Pi=$i.offscreen);const Tn=Xa($i&&$i.placeable);if(!Ti&&this.prevPlacement){const Pn=this.prevPlacement.variableOffsets[Ke.crossTileID];Pn&&(this.variableOffsets[Ke.crossTileID]=Pn,this.markUsedJustification(_,Pn.anchor,Ke,Tn))}}}if(fn=$i,Ti=fn&&fn.placeable,Pi=fn&&fn.offscreen,Ke.useRuntimeCollisionCircles&&Ke.centerJustifiedTextSymbolIndex>=0){const Xa=_.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex),Or=s.aA(_.textSizeData,K,Xa),vr=w.get("text-padding");on=this.collisionIndex.placeCollisionCircles(ue,Xa,_.lineVertexArray,_.glyphOffsetArray,Or,I,R,m,ke,ee.predicate,Ke.collisionCircleDiameter,vr,T,Oe),on.circles.length&&on.collisionDetected&&!m&&s.w("Collisions detected, but collision boxes are not shown"),Ti=fe||on.circles.length>0&&!on.collisionDetected,Pi=Pi&&on.offscreen}if(rt.iconFeatureIndex&&(Fr=rt.iconFeatureIndex),rt.iconBox){const Xa=Or=>this.collisionIndex.placeCollisionBox(Or,ye,B,Re,I,ke,ge,E,ee.predicate,Oe,me&&Qi?Qi:void 0,tt);zn&&zn.placeable&&rt.verticalIconBox?(Zn=Xa(rt.verticalIconBox),Bi=Zn.placeable):(Zn=Xa(rt.iconBox),Bi=Zn.placeable),Pi=Pi&&Zn.offscreen}const xo=le||Ke.numHorizontalGlyphVertices===0&&Ke.numVerticalGlyphVertices===0,Hl=he||Ke.numIconVertices===0;xo||Hl?Hl?xo||(Bi=Bi&&Ti):Ti=Bi&&Ti:Bi=Ti=Bi&&Ti;const bo=Bi&&Zn.placeable;if(Ti&&fn.placeable&&this.collisionIndex.insertCollisionBox(fn.box,ue,w.get("text-ignore-placement"),_.bucketInstanceId,zn&&zn.placeable&&ss?ss:Ns,ee.ID),bo&&this.collisionIndex.insertCollisionBox(Zn.box,ye,w.get("icon-ignore-placement"),_.bucketInstanceId,Fr,ee.ID),on&&Ti&&this.collisionIndex.insertCollisionCircles(on.circles,ue,w.get("text-ignore-placement"),_.bucketInstanceId,Ns,ee.ID),m&&this.storeCollisionData(_.bucketInstanceId,Dt,rt,fn,Zn,on),Ke.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ke.crossTileID]=new Ui((Ti||$e)&&!fn?.occluded,(Bi||ze)&&!Zn?.occluded,Pi||_.justReloaded),o[Ke.crossTileID]=!0};if(Me){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ke=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let rt=Ke.length-1;rt>=0;--rt){const Dt=Ke[rt];it(_.symbolInstances.get(Dt),_.collisionArrays[Dt],Dt)}}else for(let Ke=t.symbolInstanceStart;Ke<t.symbolInstanceEnd;Ke++)it(_.symbolInstances.get(Ke),_.collisionArrays[Ke],Ke);_.justReloaded=!1}storeCollisionData(t,o,m,_,w,T){if(m.textBox||m.iconBox){let E,I;this.collisionBoxArrays.has(t)?E=this.collisionBoxArrays.get(t):(E=new Map,this.collisionBoxArrays.set(t,E)),E.has(o)?I=E.get(o):(I={text:null,icon:null},E.set(o,I)),m.textBox&&(I.text=_.box),m.iconBox&&(I.icon=w.box)}if(T){let E=this.collisionCircleArrays[t];E===void 0&&(E=this.collisionCircleArrays[t]=[]);for(let I=0;I<T.circles.length;I+=4)E.push(T.circles[I+0]-vi),E.push(T.circles[I+1]-vi),E.push(T.circles[I+2]),E.push(T.collisionDetected?1:0)}}markUsedJustification(t,o,m,_){let w;w=_===s.az.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[s.aR(o)];const T=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const E of T)E>=0&&(t.text.placedSymbolArray.get(E).crossTileID=w>=0&&E!==w?0:m.crossTileID)}markUsedOrientation(t,o,m){const _=o===s.az.horizontal||o===s.az.horizontalOnly?o:0,w=o===s.az.vertical?o:0,T=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const E of T)t.text.placedSymbolArray.get(E).placedOrientation=_;m.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let m=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const _=o?o.symbolFadeChange(t):1,w=o?o.opacities:{},T=o?o.variableOffsets:{},E=o?o.placedOrientations:{};for(const I in this.placements){const R=this.placements[I],B=w[I];B?(this.opacities[I]=new jt(B,_,R.text,R.icon),m=m||R.text!==B.text.placed||R.icon!==B.icon.placed):(this.opacities[I]=new jt(null,_,R.text,R.icon,R.skipFade),m=m||R.text||R.icon)}for(const I in w){const R=w[I];if(!this.opacities[I]){const B=new jt(R,_,!1,!1);B.isHidden()||(this.opacities[I]=B,m=m||R.text.placed||R.icon.placed)}}for(const I in T)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=T[I]);for(const I in E)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=E[I]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const m={};for(const _ of o){const w=_.getBucket(t);w&&_.latestFeatureIndex&&t.id===w.layerIds[0]&&this.updateBucketOpacities(w,_.tileID,m,_.collisionBoxArray)}}updateBucketOpacities(t,o,m,_){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const w=t.layers[0],T=w.layout,E=new jt(null,0,!1,!1,!0),I=T.get("text-allow-overlap"),R=T.get("icon-allow-overlap"),B=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=T.get("text-rotation-alignment")==="map",U=T.get("text-pitch-alignment")==="map",K=T.get("icon-text-fit")!=="none",ee=new jt(null,0,I&&(R||!t.hasIconData()||T.get("icon-optional")),R&&(I||!t.hasTextData()||T.get("text-optional")),!0);!t.collisionArrays&&_&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(_);const le=(ue,fe,ye)=>{for(let de=0;de<fe/4;de++)ue.opacityVertexArray.emplaceBack(ye);ue.hasVisibleVertices=ue.hasVisibleVertices||ye!==Hr},he=this.collisionBoxArrays.get(t.bucketInstanceId);for(let ue=0;ue<t.symbolInstances.length;ue++){const fe=t.symbolInstances.get(ue),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:de,crossTileID:ge}=fe;let ke=this.opacities[ge];m[ge]?ke=E:ke||(ke=ee,this.opacities[ge]=ke),m[ge]=!0;const me=fe.numIconVertices>0,Me=this.placedOrientations[fe.crossTileID],$e=Me===s.az.vertical,ze=Me===s.az.horizontal||Me===s.az.horizontalOnly;if(ye>0||de>0){const Oe=no(ke.text);le(t.text,ye,$e?Hr:Oe),le(t.text,de,ze?Hr:Oe);const tt=ke.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach((rt=>{rt>=0&&(t.text.placedSymbolArray.get(rt).hidden=tt||$e?1:0)})),fe.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=tt||ze?1:0);const it=this.variableOffsets[fe.crossTileID];it&&this.markUsedJustification(t,it.anchor,fe,Me);const Ke=this.placedOrientations[fe.crossTileID];Ke&&(this.markUsedJustification(t,"left",fe,Ke),this.markUsedOrientation(t,Ke,fe))}if(me){const Oe=no(ke.icon),tt=!(K&&fe.verticalPlacedIconSymbolIndex&&$e);fe.placedIconSymbolIndex>=0&&(le(t.icon,fe.numIconVertices,tt?Oe:Hr),t.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=ke.icon.isHidden()),fe.verticalPlacedIconSymbolIndex>=0&&(le(t.icon,fe.numVerticalIconVertices,tt?Hr:Oe),t.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}const Re=he&&he.has(ue)?he.get(ue):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Oe=t.collisionArrays[ue];if(Oe){let tt=new s.P(0,0);if(Oe.textBox||Oe.verticalTextBox){let it=!0;if(B){const Ke=this.variableOffsets[ge];Ke?(tt=Un(Ke.anchor,Ke.width,Ke.height,Ke.textOffset,Ke.textBoxScale),G&&tt._rotate(U?-this.transform.bearingInRadians:this.transform.bearingInRadians)):it=!1}if(Oe.textBox||Oe.verticalTextBox){let Ke;Oe.textBox&&(Ke=$e),Oe.verticalTextBox&&(Ke=ze),xs(t.textCollisionBox.collisionVertexArray,ke.text.placed,!it||Ke,Re.text,tt.x,tt.y)}}if(Oe.iconBox||Oe.verticalIconBox){const it=!!(!ze&&Oe.verticalIconBox);let Ke;Oe.iconBox&&(Ke=it),Oe.verticalIconBox&&(Ke=!it),xs(t.iconCollisionBox.collisionVertexArray,ke.icon.placed,Ke,Re.icon,K?tt.x:0,K?tt.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const m=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*m>t}setStale(){this.stale=!0}}function xs(x,t,o,m,_,w){m&&m.length!==0||(m=[0,0,0,0]);const T=m[0]-vi,E=m[1]-vi,I=m[2]-vi,R=m[3]-vi;x.emplaceBack(t?1:0,o?1:0,_||0,w||0,T,E),x.emplaceBack(t?1:0,o?1:0,_||0,w||0,I,E),x.emplaceBack(t?1:0,o?1:0,_||0,w||0,I,R),x.emplaceBack(t?1:0,o?1:0,_||0,w||0,T,R)}const ar=Math.pow(2,25),Gi=Math.pow(2,24),Wr=Math.pow(2,17),rr=Math.pow(2,16),Pr=Math.pow(2,9),$o=Math.pow(2,8),Na=Math.pow(2,1);function no(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const t=x.placed?1:0,o=Math.floor(127*x.opacity);return o*ar+t*Gi+o*Wr+t*rr+o*Pr+t*$o+o*Na+t}const Hr=0;class La{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,m,_,w){const T=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(T,_,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort(((E,I)=>E.sortKey-I.sortKey)));this._currentPartIndex<T.length;)if(o.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,w())return!0;return!1}}class Mr{constructor(t,o,m,_,w,T,E,I){this.placement=new Sl(t,o,T,E,I),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(t,o,m){const _=ae(),w=()=>!this._forceFullPlacement&&ae()-_>2;for(;this._currentPlacementIndex>=0;){const T=o[t[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=E)&&(!T.maxzoom||T.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new La(T)),this._inProgressLayer.continuePlacement(m[T.source],this.placement,this._showCollisionBoxes,T,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Ft=512/s.a5/2;class bs{constructor(t,o,m){this.tileID=t,this.bucketInstanceId=m,this._symbolsByKey={};const _=new Map;for(let w=0;w<o.length;w++){const T=o.get(w),E=T.key,I=_.get(E);I?I.push(T):_.set(E,[T])}for(const[w,T]of _){const E={positions:T.map((I=>({x:Math.floor(I.anchorX*Ft),y:Math.floor(I.anchorY*Ft)}))),crossTileIDs:T.map((I=>I.crossTileID))};if(E.positions.length>128){const I=new s.aT(E.positions.length,16,Uint16Array);for(const{x:R,y:B}of E.positions)I.add(R,B);I.finish(),delete E.positions,E.index=I}this._symbolsByKey[w]=E}}getScaledCoordinates(t,o){const{x:m,y:_,z:w}=this.tileID.canonical,{x:T,y:E,z:I}=o.canonical,R=Ft/Math.pow(2,I-w),B=(E*s.a5+t.anchorY)*R,G=_*s.a5*Ft;return{x:Math.floor((T*s.a5+t.anchorX)*R-m*s.a5*Ft),y:Math.floor(B-G)}}findMatches(t,o,m){const _=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let w=0;w<t.length;w++){const T=t.get(w);if(T.crossTileID)continue;const E=this._symbolsByKey[T.key];if(!E)continue;const I=this.getScaledCoordinates(T,o);if(E.index){const R=E.index.range(I.x-_,I.y-_,I.x+_,I.y+_).sort();for(const B of R){const G=E.crossTileIDs[B];if(!m[G]){m[G]=!0,T.crossTileID=G;break}}}else if(E.positions)for(let R=0;R<E.positions.length;R++){const B=E.positions[R],G=E.crossTileIDs[R];if(Math.abs(B.x-I.x)<=_&&Math.abs(B.y-I.y)<=_&&!m[G]){m[G]=!0,T.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class wu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ao{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const m in this.indexes){const _=this.indexes[m],w={};for(const T in _){const E=_[T];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+o),w[E.tileID.key]=E}this.indexes[m]=w}this.lng=t}addBucket(t,o,m){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let w=0;w<o.symbolInstances.length;w++)o.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const _=this.usedCrossTileIDs[t.overscaledZ];for(const w in this.indexes){const T=this.indexes[w];if(Number(w)>t.overscaledZ)for(const E in T){const I=T[E];I.tileID.isChildOf(t)&&I.findMatches(o.symbolInstances,t,_)}else{const E=T[t.scaledTo(Number(w)).key];E&&E.findMatches(o.symbolInstances,t,_)}}for(let w=0;w<o.symbolInstances.length;w++){const T=o.symbolInstances.get(w);T.crossTileID||(T.crossTileID=m.generate(),_[T.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new bs(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const m of o.getCrossTileIDsLists())for(const _ of m)delete this.usedCrossTileIDs[t][_]}removeStaleBuckets(t){let o=!1;for(const m in this.indexes){const _=this.indexes[m];for(const w in _)t[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,_[w]),delete _[w],o=!0)}return o}}class Jn{constructor(){this.layerIndexes={},this.crossTileIDs=new wu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,m){let _=this.layerIndexes[t.id];_===void 0&&(_=this.layerIndexes[t.id]=new ao);let w=!1;const T={};_.handleWrapJump(m);for(const E of o){const I=E.getBucket(t);I&&t.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(E.tileID,I,this.crossTileIDs)&&(w=!0),T[I.bucketInstanceId]=!0)}return _.removeStaleBuckets(T)&&(w=!0),w}pruneUnusedLayers(t){const o={};t.forEach((m=>{o[m]=!0}));for(const m in this.layerIndexes)o[m]||delete this.layerIndexes[m]}}var St="void main() {fragColor=vec4(1.0);}";const ii={prelude:dt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:dt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:dt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:dt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:dt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:dt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:dt(St,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:dt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:dt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:dt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:dt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:dt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:dt(St,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:dt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:dt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:dt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:dt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:dt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:dt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:dt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:dt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:dt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:dt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:dt(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:dt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:dt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:dt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:dt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:dt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:dt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:dt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:dt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:dt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:dt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:dt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function dt(x,t){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=t.match(/in ([\w]+) ([\w]+)/g),_=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=w?w.concat(_):_,E={};return{fragmentSource:x=x.replace(o,((I,R,B,G,U)=>(E[U]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${U}
in ${B} ${G} ${U};
#else
uniform ${B} ${G} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${B} ${G} ${U} = u_${U};
#endif
`))),vertexSource:t=t.replace(o,((I,R,B,G,U)=>{const K=G==="float"?"vec2":"vec4",ee=U.match(/color/)?"color":K;return E[U]?R==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
in ${B} ${K} a_${U};
out ${B} ${G} ${U};
#else
uniform ${B} ${G} u_${U};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${B} ${G} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${ee}(a_${U}, u_${U}_t);
#else
    ${B} ${G} ${U} = u_${U};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
in ${B} ${K} a_${U};
#else
uniform ${B} ${G} u_${U};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${B} ${G} ${U} = a_${U};
#else
    ${B} ${G} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${B} ${G} ${U} = unpack_mix_${ee}(a_${U}, u_${U}_t);
#else
    ${B} ${G} ${U} = u_${U};
#endif
`})),staticAttributes:m,staticUniforms:T}}class fi{constructor(t,o,m){this.vertexBuffer=t,this.indexBuffer=o,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ua=s.aU([{name:"a_pos",type:"Int16",components:2}]);const kn="#define PROJECTION_MERCATOR",Gn="mercator";class Yi{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Gn}get shaderDefine(){return kn}get shaderPreludeCode(){return ii.projectionMercator}get vertexShaderPreludeCode(){return ii.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,o,m,_,w){if(this._cachedMesh)return this._cachedMesh;const T=new s.aW;T.emplaceBack(0,0),T.emplaceBack(s.a5,0),T.emplaceBack(0,s.a5),T.emplaceBack(s.a5,s.a5);const E=t.createVertexBuffer(T,Ua.members),I=s.aX.simpleSegment(0,0,4,2),R=new s.aY;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3);const B=t.createIndexBuffer(R);return this._cachedMesh=new fi(E,B,I),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class Cr{constructor(t=0,o=0,m=0,_=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(m)||m<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=m,this.right=_}interpolate(t,o,m){return o.top!=null&&t.top!=null&&(this.top=s.G.number(t.top,o.top,m)),o.bottom!=null&&t.bottom!=null&&(this.bottom=s.G.number(t.bottom,o.bottom,m)),o.left!=null&&t.left!=null&&(this.left=s.G.number(t.left,o.left,m)),o.right!=null&&t.right!=null&&(this.right=s.G.number(t.right,o.right,m)),this}getCenter(t,o){const m=s.an((this.left+t-this.right)/2,0,t),_=s.an((this.top+o-this.bottom)/2,0,o);return new s.P(m,_)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Cr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function _a(x,t){if(!x.renderWorldCopies||x.lngRange)return;const o=t.lng-x.center.lng;t.lng+=o>180?-360:o<-180?360:0}function Kt(x){return Math.max(0,Math.floor(x))}class ua{constructor(t,o){var m;this.applyConstrain=(_,w)=>this._constrainOverride!==null?this._constrainOverride(_,w):this._callbacks.defaultConstrain(_,w),this._callbacks=t,this._tileSize=512,this._renderWorldCopies=o?.renderWorldCopies===void 0||!!o?.renderWorldCopies,this._minZoom=o?.minZoom||0,this._maxZoom=o?.maxZoom||22,this._minPitch=o?.minPitch==null?0:o?.minPitch,this._maxPitch=o?.maxPitch==null?60:o?.maxPitch,this._constrainOverride=(m=o?.constrainOverride)!==null&&m!==void 0?m:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Kt(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Cr,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,o,m){this._constrainOverride=t.constrainOverride,this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=Kt(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new Cr(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!m&&t.autoCalculateNearFarZ,o&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get constrainOverride(){return this._constrainOverride}setConstrainOverride(t){t===void 0&&(t=null),this._constrainOverride!==t&&(this._constrainOverride=t,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const o=s.W(t,-180,180)*Math.PI/180;var m,_,w,T,E,I,R,B,G;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=M(),m=this._rotationMatrix,w=-this._bearingInRadians,T=(_=this._rotationMatrix)[0],E=_[1],I=_[2],R=_[3],B=Math.sin(w),G=Math.cos(w),m[0]=T*G+I*B,m[1]=E*G+R*B,m[2]=T*-B+I*G,m[3]=E*-B+R*G)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const o=s.an(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const o=t/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aZ(this._fovInRadians)}setFov(t){t=s.an(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=s.ap(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const o=this.applyConstrain(this._center,t).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=s.aq(o),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,o){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,m){this._unmodified=!1,this._edgeInsets.interpolate(t,o,m),this.constrainInternal(),this._calcMatrices()}resize(t,o,m=!0){this._width=t,this._height=o,m&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ci([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-s.ao,s.ao])}getCameraQueryGeometry(t,o){if(o.length===1)return[o[0],t];{const{minX:m,minY:_,maxX:w,maxY:T}=s.aa.fromPoints(o).extend(t);return[new s.P(m,_),new s.P(w,_),new s.P(w,T),new s.P(m,T),new s.P(m,_)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:o,zoom:m}=this.applyConstrain(this.center,this.zoom);this.setCenter(o),this.setZoom(m),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=s.ar(new Float64Array(16));s.Q(t,t,[this._width/2,-this._height/2,1]),s.O(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=s.ar(new Float64Array(16)),s.Q(t,t,[1,-1,1]),s.O(t,t,[-1,-1,0]),s.Q(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,o,m,_){const w=m!==void 0?m:this.bearing,T=_=_!==void 0?_:this.pitch,{distanceToCenter:E,clampedElevation:I}=this._distanceToCenterFromAltElevationPitch(o,this.elevation,T),{x:R,y:B}=gi(T,w),G=s.a9.fromLngLat(t,o);let U,K,ee=s.a_(1,G.y),le=0;do{if(le+=1,le>10)break;K=E/ee,U=new s.a9(G.x+R*K,G.y+B*K),ee=1/U.meterInMercatorCoordinateUnits()}while(Math.abs(E-K*ee)>1e-12);return{center:U.toLngLat(),elevation:I,zoom:s.at(this.height/2/Math.tan(this.fovInRadians/2)/K/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const o=1/this.worldSize,m=s.as(1,this.center.lat)*this.worldSize,_=s.a9.fromLngLat(this.center,this.elevation),w=_.x/o,T=_.y/o,E=_.z/o,I=this.pitch,R=this.bearing,{x:B,y:G,z:U}=gi(I,R),K=this.cameraToCenterDistance,ee=w+K*-B,le=T+K*-G,he=E+K*U,{distanceToCenter:ue,clampedElevation:fe}=this._distanceToCenterFromAltElevationPitch(he/m,t,I),ye=ue*m,de=new s.a9((ee+B*ye)*o,(le+G*ye)*o,0).toLngLat(),ge=s.as(1,de.lat),ke=s.at(this.height/2/Math.tan(this.fovInRadians/2)/ue/ge/this.tileSize);this._elevation=fe,this._center=de,this.setZoom(ke)}_distanceToCenterFromAltElevationPitch(t,o,m){const _=-Math.cos(s.ap(m)),w=t-o;let T,E=o;return _*w>=0||Math.abs(_)<.1?(T=1e4,E=t+T*_):T=-w/_,{distanceToCenter:T,clampedElevation:E}}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=s.as(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const o=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/o,t.canonical.y/o,1/o/s.a5,1/o/s.a5]}}class Ea{constructor(t,o){this.min=t,this.max=o,this.center=s.a$([],s.b0([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],m=s.b1(this.min),_=s.b1(this.max);for(let w=0;w<o.length;w++)m[w]=o[w]?this.min[w]:this.center[w],_[w]=o[w]?this.center[w]:this.max[w];return _[2]=this.max[2],new Ea(m,_)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let o=!0;for(let m=0;m<t.planes.length;m++){const _=this.intersectsPlane(t.planes[m]);if(_===0)return 0;_===1&&(o=!1)}return o?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let o=t[3],m=t[3];for(let _=0;_<3;_++)t[_]>0?(o+=t[_]*this.min[_],m+=t[_]*this.max[_]):(m+=t[_]*this.min[_],o+=t[_]*this.max[_]);return o>=0?2:m<0?0:1}}class ro{distanceToTile2d(t,o,m,_){const w=_.distanceX([t,o]),T=_.distanceY([t,o]);return Math.hypot(w,T)}getWrap(t,o,m){return m}getTileBoundingVolume(t,o,m,_){var w,T;let E=0,I=0;if(_?.terrain){const B=new s.a2(t.z,o,t.z,t.x,t.y),G=_.terrain.getMinMaxElevation(B);E=(w=G.minElevation)!==null&&w!==void 0?w:Math.min(0,m),I=(T=G.maxElevation)!==null&&T!==void 0?T:Math.max(0,m)}const R=1<<t.z;return new Ea([o+t.x/R,t.y/R,E],[o+(t.x+1)/R,(t.y+1)/R,I])}allowVariableZoom(t,o){const m=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,_=s.an(78.5-m/2,0,60);return!!o.terrain||t.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Qn{constructor(t,o,m){this.points=t,this.planes=o,this.aabb=m}static fromInvProjectionMatrix(t,o=1,m=0,_,w){const T=w?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],E=Math.pow(2,m),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((U=>(function(K,ee,le,he){const ue=s.aH([],K,ee),fe=1/ue[3]/le*he;return s.b6(ue,ue,[fe,fe,1/ue[3],fe])})(U,t,o,E)));_&&(function(U,K,ee,le){const he=le?4:0,ue=le?0:4;let fe=0;const ye=[],de=[];for(let me=0;me<4;me++){const Me=s.b2([],U[me+ue],U[me+he]),$e=s.b7(Me);s.a$(Me,Me,1/$e),ye.push($e),de.push(Me)}for(let me=0;me<4;me++){const Me=s.b8(U[me+he],de[me],ee);fe=Me!==null&&Me>=0?Math.max(fe,Me):Math.max(fe,ye[me])}const ge=(function(me,Me){const $e=s.b2([],me[Me[0]],me[Me[1]]),ze=s.b2([],me[Me[2]],me[Me[1]]),Re=[0,0,0,0];return s.b3(Re,s.b4([],$e,ze)),Re[3]=-s.b5(Re,me[Me[0]]),Re})(U,K),ke=(function(me,Me){const $e=s.b9(me),ze=s.ba([],me,1/$e),Re=s.b2([],Me,s.a$([],ze,s.b5(Me,ze))),Oe=s.b9(Re);if(Oe>0){const tt=Math.sqrt(1-ze[3]*ze[3]),it=s.a$([],ze,-ze[3]),Ke=s.b0([],it,s.a$([],Re,tt/Oe));return s.bb(Me,Ke)}return null})(ee,ge);if(ke!==null){const me=ke/s.b5(de[0],ge);fe=Math.min(fe,me)}for(let me=0;me<4;me++){const Me=Math.min(fe,ye[me]);U[me+ue]=[U[me+he][0]+de[me][0]*Me,U[me+he][1]+de[me][1]*Me,U[me+he][2]+de[me][2]*Me,1]}})(I,T[0],_,w);const R=T.map((U=>{const K=s.b2([],I[U[0]],I[U[1]]),ee=s.b2([],I[U[2]],I[U[1]]),le=s.b3([],s.b4([],K,ee)),he=-s.b5(le,I[U[1]]);return le.concat(he)})),B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],G=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const U of I)for(let K=0;K<3;K++)B[K]=Math.min(B[K],U[K]),G[K]=Math.max(G[K],U[K]);return new Qn(I,R,new Ea(B,G))}}class Lr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,m=!0){this._helper.resize(t,o,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,o){}constructor(t){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(o,m)=>{m=s.an(+m,this.minZoom,this.maxZoom);const _={center:new s.V(o.lng,o.lat),zoom:m};let w=this._helper._lngRange;if(!this._helper._renderWorldCopies&&w===null){const de=179.9999999999;w=[-de,de]}const T=this.tileSize*s.aq(_.zoom);let E=0,I=T,R=0,B=T,G=0,U=0;const{x:K,y:ee}=this.size;if(this._helper._latRange){const de=this._helper._latRange;E=s.X(de[1])*T,I=s.X(de[0])*T,I-E<ee&&(G=ee/(I-E))}w&&(R=s.W(s.Y(w[0])*T,0,T),B=s.W(s.Y(w[1])*T,0,T),B<R&&(B+=T),B-R<K&&(U=K/(B-R)));const{x:le,y:he}=gt(T,o);let ue,fe;const ye=Math.max(U||0,G||0);if(ye){const de=new s.P(U?(B+R)/2:le,G?(I+E)/2:he);return _.center=Lt(T,de).wrap(),_.zoom+=s.at(ye),_}if(this._helper._latRange){const de=ee/2;he-de<E&&(fe=E+de),he+de>I&&(fe=I-de)}if(w){const de=(R+B)/2;let ge=le;this._helper._renderWorldCopies&&(ge=s.W(le,de-T/2,de+T/2));const ke=K/2;ge-ke<R&&(ue=R+ke),ge+ke>B&&(ue=B-ke)}if(ue!==void 0||fe!==void 0){const de=new s.P(ue??le,fe??he);_.center=Lt(T,de).wrap()}return _},this.applyConstrain=(o,m)=>this._helper.applyConstrain(o,m),this._helper=new ua({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,m)=>this.defaultConstrain(o,m)},t),this._coveringTilesDetailsProvider=new ro}clone(){const t=new Lr;return t.apply(this),t}apply(t,o,m){this._helper.apply(t,o,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const o=[new s.bc(0,t)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new s.P(0,0)),_=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),w=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),E=Math.floor(Math.min(m.x,_.x,w.x,T.x)),I=Math.floor(Math.max(m.x,_.x,w.x,T.x)),R=1;for(let B=E-R;B<=I+R;B++)B!==0&&o.push(new s.bc(B,t))}return o}getCameraFrustum(){return Qn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const o=this.screenPointToLocation(this.centerPoint,t),m=t?t.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(t,o){const m=s.as(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(o,m),w=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),T=s.a9.fromLngLat(t),E=new s.a9(T.x-(_.x-w.x),T.y-(_.y-w.y));this.setCenter(E?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,o){return o?this.coordinatePoint(s.a9.fromLngLat(t),o.getElevationForLngLat(t,this),this._pixelMatrix3D):this.coordinatePoint(s.a9.fromLngLat(t))}screenPointToLocation(t,o){var m;return(m=this.screenPointToMercatorCoordinate(t,o))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(t,o){if(o){const m=o.pointCoordinate(t);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,o){const m=o||0,_=[t.x,t.y,0,1],w=[t.x,t.y,1,1];s.aH(_,_,this._pixelMatrixInverse),s.aH(w,w,this._pixelMatrixInverse);const T=_[3],E=w[3],I=_[1]/T,R=w[1]/E,B=_[2]/T,G=w[2]/E,U=B===G?0:(m-B)/(G-B);return new s.a9(s.G.number(_[0]/T,w[0]/E,U)/this.worldSize,s.G.number(I,R,U)/this.worldSize,m)}coordinatePoint(t,o=0,m=this._pixelMatrix){const _=[t.x*this.worldSize,t.y*this.worldSize,o,1];return s.aH(_,_,m),new s.P(_[0]/_[3],_[1]/_[3])}getBounds(){const t=Math.max(0,this._helper._height/2-oi(this));return new Ci().extend(this.screenPointToLocation(new s.P(0,t))).extend(this.screenPointToLocation(new s.P(this._helper._width,t))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(t,o){return o?o.pointCoordinate(t)!=null:t.y>this.height/2-oi(this)}calculatePosMatrix(t,o=!1,m){var _;const w=(_=t.key)!==null&&_!==void 0?_:s.bd(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),T=o?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(w)){const R=T.get(w);return m?R.f32:R.f64}const E=Qt(t,this.worldSize);s.S(E,o?this._alignedProjMatrix:this._viewProjMatrix,E);const I={f64:E,f32:new Float32Array(E)};return T.set(w,I),m?I.f32:I.f64}calculateFogMatrix(t){const o=t.key,m=this._fogMatrixCacheF32;if(m.has(o))return m.get(o);const _=Qt(t,this.worldSize);return s.S(_,this._fogMatrix,_),m.set(o,new Float32Array(_)),m.get(o)}calculateCenterFromCameraLngLatAlt(t,o,m,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,_)}_calculateNearFarZIfNeeded(t,o,m){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),w=t-_*this._helper._pixelPerMeter/Math.cos(o),T=_<0?w:t,E=Math.PI/2+this.pitchInRadians,I=s.ap(this.fov)*(Math.abs(Math.cos(s.ap(this.roll)))*this.height+Math.abs(Math.sin(s.ap(this.roll)))*this.width)/this.height*(.5+m.y/this.height),R=Math.sin(I)*T/Math.sin(s.an(Math.PI-E-I,.01,Math.PI-.01)),B=oi(this),G=Math.atan(B/this._helper.cameraToCenterDistance),U=s.ap(.75),K=G>U?2*G*(.5+m.y/(2*B)):U,ee=Math.sin(K)*T/Math.sin(s.an(Math.PI-E-K,.01,Math.PI-.01)),le=Math.min(R,ee);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*le+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,o=gt(this.worldSize,this.center),m=o.x,_=o.y;this._helper._pixelPerMeter=s.as(1,this.center.lat)*this.worldSize;const w=s.ap(Math.min(this.pitch,ut)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(w));let E;this._calculateNearFarZIfNeeded(T,w,t),E=new Float64Array(16),s.be(E,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aB(this._invProjMatrix,E),E[8]=2*-t.x/this._helper._width,E[9]=2*t.y/this._helper._height,this._projectionMatrix=s.bf(E),s.Q(E,E,[1,-1,1]),s.O(E,E,[0,0,-this._helper.cameraToCenterDistance]),s.bg(E,E,-this.rollInRadians),s.bh(E,E,this.pitchInRadians),s.bg(E,E,-this.bearingInRadians),s.O(E,E,[-m,-_,0]),this._mercatorMatrix=s.Q([],E,[this.worldSize,this.worldSize,this.worldSize]),s.Q(E,E,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,E),s.O(E,E,[0,0,-this.elevation]),this._viewProjMatrix=E,this._invViewProjMatrix=s.aB([],E);const I=[0,0,-1,1];s.aH(I,I,this._invViewProjMatrix),this._cameraPosition=[I[0]/I[3],I[1]/I[3],I[2]/I[3]],this._fogMatrix=new Float64Array(16),s.be(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,s.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.O(this._fogMatrix,this._fogMatrix,[-m,-_,0]),s.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,E);const R=this._helper._width%2/2,B=this._helper._height%2/2,G=Math.cos(this.bearingInRadians),U=Math.sin(-this.bearingInRadians),K=m-Math.round(m)+G*R+U*B,ee=_-Math.round(_)+G*B+U*R,le=new Float64Array(E);if(s.O(le,le,[K>.5?K-1:K,ee>.5?ee-1:ee,0]),this._alignedProjMatrix=le,E=s.aB(new Float64Array(16),this._pixelMatrix),!E)throw new Error("failed to invert matrix");this._pixelMatrixInverse=E,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new s.P(0,0)),o=[t.x*this.worldSize,t.y*this.worldSize,0,1];return s.aH(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=s.as(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,o){const m=s.a9.fromLngLat(t),_=[m.x*this.worldSize,m.y*this.worldSize,o,1];return s.aH(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(t){const{overscaledTileID:o,aligned:m,applyTerrainMatrix:_}=t,w=this._helper.getMercatorTileCoordinates(o),T=o?this.calculatePosMatrix(o,m,!0):null;let E;return E=o&&o.terrainRttPosMatrix32f&&_?o.terrainRttPosMatrix32f:T||s.bi(),{mainMatrix:E,tileMercatorCoords:w,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:E}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,o,m){return 1}transformLightDirection(t){return s.b1(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,o,m,_){const w=this.calculatePosMatrix(m);let T;_?(T=[t,o,_(t,o),1],s.aH(T,T,w)):(T=[t,o,0,1],qr(T,T,w));const E=T[3];return{point:new s.P(T[0]/E,T[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}populateCache(t){for(const o of t)this.calculatePosMatrix(o)}getMatrixForModel(t,o){const m=s.a9.fromLngLat(t,o),_=m.meterInMercatorCoordinateUnits(),w=s.bj();return s.O(w,w,[m.x,m.y,m.z]),s.bg(w,w,Math.PI),s.bh(w,w,Math.PI/2),s.Q(w,w,[-_,_,_]),w}getProjectionDataForCustomLayer(t=!0){const o=new s.a2(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:t}),_=Qt(o,this.worldSize);s.S(_,this._viewProjMatrix,_),m.tileMercatorCoords=[0,0,1,1];const w=[s.a5,s.a5,this.worldSize/this._helper.pixelsPerMeter],T=s.bk();return s.Q(T,_,w),m.fallbackMatrix=T,m.mainMatrix=T,m}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Aa(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ku(x){if(x.useSlerp)if(x.k<1){const t=s.bl(x.startEulerAngles.roll,x.startEulerAngles.pitch,x.startEulerAngles.bearing),o=s.bl(x.endEulerAngles.roll,x.endEulerAngles.pitch,x.endEulerAngles.bearing),m=new Float64Array(4);s.bm(m,t,o,x.k);const _=s.bn(m);x.tr.setRoll(_.roll),x.tr.setPitch(_.pitch),x.tr.setBearing(_.bearing)}else x.tr.setRoll(x.endEulerAngles.roll),x.tr.setPitch(x.endEulerAngles.pitch),x.tr.setBearing(x.endEulerAngles.bearing);else x.tr.setRoll(s.G.number(x.startEulerAngles.roll,x.endEulerAngles.roll,x.k)),x.tr.setPitch(s.G.number(x.startEulerAngles.pitch,x.endEulerAngles.pitch,x.k)),x.tr.setBearing(s.G.number(x.startEulerAngles.bearing,x.endEulerAngles.bearing,x.k))}function Vo(x,t,o,m,_){const w=_.padding,T=gt(_.worldSize,o.getNorthWest()),E=gt(_.worldSize,o.getNorthEast()),I=gt(_.worldSize,o.getSouthEast()),R=gt(_.worldSize,o.getSouthWest()),B=s.ap(-m),G=T.rotate(B),U=E.rotate(B),K=I.rotate(B),ee=R.rotate(B),le=new s.P(Math.max(G.x,U.x,ee.x,K.x),Math.max(G.y,U.y,ee.y,K.y)),he=new s.P(Math.min(G.x,U.x,ee.x,K.x),Math.min(G.y,U.y,ee.y,K.y)),ue=le.sub(he),fe=(_.width-(w.left+w.right+t.left+t.right))/ue.x,ye=(_.height-(w.top+w.bottom+t.top+t.bottom))/ue.y;if(ye<0||fe<0)return void Aa();const de=Math.min(s.at(_.scale*Math.min(fe,ye)),x.maxZoom),ge=s.P.convert(x.offset),ke=new s.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(s.ap(m)),me=ge.add(ke).mult(_.scale/s.aq(de));return{center:Lt(_.worldSize,T.add(I).div(2).sub(me)),zoom:de,bearing:m}}class Ut{get useGlobeControls(){return!1}handlePanInertia(t,o){const m=t.mag(),_=Math.abs(oi(o));return{easingOffset:t.mult(Math.min(.75*_/m,1)),easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(t,o){t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta),t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta)}handleMapControlsPan(t,o,m){t.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(m,t.around)}cameraForBoxAndBearing(t,o,m,_,w){return Vo(t,o,m,_,w)}handleJumpToCenterZoom(t,o){t.zoom!==(o.zoom!==void 0?+o.zoom:t.zoom)&&t.setZoom(+o.zoom),o.center!==void 0&&t.setCenter(s.V.convert(o.center))}handleEaseTo(t,o){const m=t.zoom,_=t.padding,w={roll:t.roll,pitch:t.pitch,bearing:t.bearing},T={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},E=o.zoom!==void 0,I=!t.isPaddingEqual(o.padding);let R=!1;const B=E?+o.zoom:t.zoom;let G=t.centerPoint.add(o.offsetAsPoint);const U=t.screenPointToLocation(G),{center:K,zoom:ee}=t.applyConstrain(s.V.convert(o.center||U),B??m);_a(t,K);const le=gt(t.worldSize,U),he=gt(t.worldSize,K).sub(le),ue=s.aq(ee-m);return R=ee!==m,{easeFunc:fe=>{if(R&&t.setZoom(s.G.number(m,ee,fe)),s.bo(w,T)||ku({startEulerAngles:w,endEulerAngles:T,tr:t,k:fe,useSlerp:w.roll!=T.roll}),I&&(t.interpolatePadding(_,o.padding,fe),G=t.centerPoint.add(o.offsetAsPoint)),o.around)t.setLocationAtPoint(o.around,o.aroundPoint);else{const ye=s.aq(t.zoom-m),de=ee>m?Math.min(2,ue):Math.max(.5,ue),ge=Math.pow(de,1-fe),ke=Lt(t.worldSize,le.add(he.mult(fe*ge)).mult(ye));t.setLocationAtPoint(t.renderWorldCopies?ke.wrap():ke,G)}},isZooming:R,elevationCenter:K}}handleFlyTo(t,o){const m=o.zoom!==void 0,_=t.zoom,w=t.applyConstrain(s.V.convert(o.center||o.locationAtOffset),m?+o.zoom:_),T=w.center,E=w.zoom;_a(t,T);const I=gt(t.worldSize,o.locationAtOffset),R=gt(t.worldSize,T).sub(I),B=R.mag(),G=s.aq(E-_);let U;if(o.minZoom!==void 0){const K=Math.min(+o.minZoom,_,E),ee=t.applyConstrain(T,K).zoom;U=s.aq(ee-_)}return{easeFunc:(K,ee,le,he)=>{t.setZoom(K===1?E:_+s.at(ee));const ue=K===1?T:Lt(t.worldSize,I.add(R.mult(le)).mult(ee));t.setLocationAtPoint(t.renderWorldCopies?ue.wrap():ue,he)},scaleOfZoom:G,targetCenter:T,scaleOfMinZoom:U,pixelPathLength:B}}}class xi{constructor(t,o,m){this.blendFunction=t,this.blendColor=o,this.mask=m}}xi.Replace=[1,0],xi.disabled=new xi(xi.Replace,s.bp.transparent,[!1,!1,!1,!1]),xi.unblended=new xi(xi.Replace,s.bp.transparent,[!0,!0,!0,!0]),xi.alphaBlended=new xi([1,771],s.bp.transparent,[!0,!0,!0,!0]);const An=2305;class Nt{constructor(t,o,m){this.enable=t,this.mode=o,this.frontFace=m}}Nt.disabled=new Nt(!1,1029,An),Nt.backCCW=new Nt(!0,1029,An),Nt.frontCCW=new Nt(!0,1028,An);class zt{constructor(t,o,m){this.func=t,this.mask=o,this.range=m}}zt.ReadOnly=!1,zt.ReadWrite=!0,zt.disabled=new zt(519,zt.ReadOnly,[0,1]);const ws=7680;class Yt{constructor(t,o,m,_,w,T){this.test=t,this.ref=o,this.mask=m,this.fail=_,this.depthFail=w,this.pass=T}}Yt.disabled=new Yt({func:519,mask:0},0,0,ws,ws,ws);const so=new WeakMap;function ha(x){var t;if(so.has(x))return so.get(x);{const o=(t=x.getParameter(x.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return so.set(x,o),o}}class ks{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const o=t.context,m=o.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const _=new s.aW;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const w=new s.aY;w.emplaceBack(0,1,2),this._fullscreenTriangle=new fi(o.createVertexBuffer(_,Ua.members),o.createIndexBuffer(w),s.aX.simpleSegment(0,0,_.length,w.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(m.TEXTURE1);const T=m.createTexture();m.bindTexture(m.TEXTURE_2D,T),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),ha(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,o){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,o=t.gl;t.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,o){const m=this._cachedRenderContext.context,_=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:s.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,_.TRIANGLES,zt.disabled,Yt.disabled,xi.unblended,Nt.disabled,((w,T)=>({u_input:w,u_output_expected:T}))(t,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ha(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const w=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:w}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ha(t)){const o=t.clientWaitSync(this._readbackQueue.sync,0,0);if(o===t.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ks._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let o=0;return o+=t[0]/256,o+=t[1]/65536,o+=t[2]/16777216,t[3]<127&&(o=-o),o/128}}const Er=s.a5/128;function No(x,t){const o=x.granularity!==void 0?Math.max(x.granularity,1):1,m=o+(x.generateBorders?2:0),_=o+(x.extendToNorthPole||x.generateBorders?1:0)+(x.extendToSouthPole||x.generateBorders?1:0),w=m+1,T=_+1,E=x.generateBorders?-1:0,I=x.generateBorders||x.extendToNorthPole?-1:0,R=o+(x.generateBorders?1:0),B=o+(x.generateBorders||x.extendToSouthPole?1:0),G=w*T,U=m*_*6,K=w*T>65536;if(K&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ee=K||t==="32bit",le=new Int16Array(2*G);let he=0;for(let ye=I;ye<=B;ye++)for(let de=E;de<=R;de++){let ge=de/o*s.a5;de===-1&&(ge=-Er),de===o+1&&(ge=s.a5+Er);let ke=ye/o*s.a5;ye===-1&&(ke=x.extendToNorthPole?s.br:-Er),ye===o+1&&(ke=x.extendToSouthPole?s.bs:s.a5+Er),le[he++]=ge,le[he++]=ke}const ue=ee?new Uint32Array(U):new Uint16Array(U);let fe=0;for(let ye=0;ye<_;ye++)for(let de=0;de<m;de++){const ge=de+1+ye*w,ke=de+(ye+1)*w,me=de+1+(ye+1)*w;ue[fe++]=de+ye*w,ue[fe++]=ke,ue[fe++]=ge,ue[fe++]=ge,ue[fe++]=ke,ue[fe++]=me}return{vertices:le.buffer.slice(0),indices:ue.buffer.slice(0),uses32bitIndices:ee}}const oo=new s.aV({fill:new s.bt(128,2),line:new s.bt(512,0),tile:new s.bt(128,32),stencil:new s.bt(128,1),circle:3});class ya{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ii.projectionGlobe}get vertexShaderPreludeCode(){return ii.projectionMercator.vertexSource}get subdivisionGranularity(){return oo}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new ks(t));const o=s.X(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(o,m),w=ae();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=w);const T=Math.min(Math.max((w-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bv(T))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,o,m,_,w){const T=(w==="stencil"?oo.stencil:oo.tile).getGranularityForZoomLevel(o.z);return this._getMesh(t,{granularity:T,generateBorders:m,extendToNorthPole:o.y===0&&_,extendToSouthPole:o.y===(1<<o.z)-1&&_})}_getMesh(t,o){const m=this._getMeshKey(o);if(m in this._tileMeshCache)return this._tileMeshCache[m];const _=(function(w,T){const E=No(T,"16bit"),I=s.aW.deserialize({arrayBuffer:E.vertices,length:E.vertices.byteLength/2/2}),R=s.aY.deserialize({arrayBuffer:E.indices,length:E.indices.byteLength/2/3});return new fi(w.createVertexBuffer(I,Ua.members),w.createIndexBuffer(R),s.aX.simpleSegment(0,0,I.length,R.length))})(t,o);return this._tileMeshCache[m]=_,_}recalculate(t){}hasTransition(){const t=ae();let o=!1;return o=o||(t-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const Rh=new s.t({type:new s.D(s.u.projection.type)});class Tl extends s.E{constructor(t){super(),this._transitionable=new s.x(Rh,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0)),this._mercatorProjection=new Yi,this._verticalPerspectiveProjection=new ya}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof s.bw){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,o,m,_,w){return this.currentProjection.getMeshFromTileID(t,o,m,_,w)}setProjection(t){this._transitionable.setValue("type",t?.type||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function qi(x){const t=sr(x.worldSize,x.center.lat);return 2*Math.PI*t}function Ia(x,t,o,m,_){const w=1/(1<<_),T=t/s.a5*w+m*w,E=s.by((x/s.a5*w+o*w)*Math.PI*2+Math.PI,2*Math.PI),I=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,R=Math.cos(I),B=new Float64Array(3);return B[0]=Math.sin(E)*R,B[1]=Math.sin(I),B[2]=Math.cos(E)*R,B}function Si(x){return(function(t,o){const m=Math.cos(o),_=new Float64Array(3);return _[0]=Math.sin(t)*m,_[1]=Math.sin(o),_[2]=Math.cos(t)*m,_})(x.lng*Math.PI/180,x.lat*Math.PI/180)}function sr(x,t){return x/(2*Math.PI)/Math.cos(t*Math.PI/180)}function Pl(x){const t=Math.asin(x[1])/Math.PI*180,o=Math.sqrt(x[0]*x[0]+x[2]*x[2]);if(o>1e-6){const m=x[0]/o,_=Math.acos(x[2]/o),w=(m>0?_:-_)/Math.PI*180;return new s.V(s.W(w,-180,180),t)}return new s.V(0,t)}function Ss(x){return Math.cos(x*Math.PI/180)}function Di(x,t){const o=Ss(x),m=Ss(t);return s.at(m/o)}function Su(x,t){const o=x.rotate(t.bearingInRadians),m=t.zoom+Di(t.center.lat,0),_=s.bu(1/Ss(t.center.lat),1/Ss(Math.min(Math.abs(t.center.lat),60)),s.bx(m,7,3,0,1)),w=360/qi({worldSize:t.worldSize,center:{lat:t.center.lat}});return new s.V(t.center.lng-o.x*w*_,s.an(t.center.lat+o.y*w,-s.ao,s.ao))}function Ml(x){const t=.5*x,o=Math.sin(t),m=Math.cos(t);return Math.log(o+m)-Math.log(m-o)}function Uo(x,t,o,m){const _=x.lat+o*m;if(Math.abs(o)>1){const w=(Math.sign(x.lat+o)!==Math.sign(x.lat)?-Math.abs(x.lat):Math.abs(x.lat))*Math.PI/180,T=Math.abs(x.lat+o)*Math.PI/180,E=Ml(w+m*(T-w)),I=Ml(w),R=Ml(T);return new s.V(x.lng+t*((E-I)/(R-I)),_)}return new s.V(x.lng+t*m,_)}class Fh{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,o,m,_){const w=`${t.z}_${t.x}_${t.y}_${_?.terrain?"t":""}`,T=this._cache.get(w);if(T)return T;const E=this._cachePrevious.get(w);if(E)return this._cache.set(w,E),E;const I=this._boundingVolumeFactory(t,o,m,_);return this._cache.set(w,I),this._hadAnyChanges=!0,I}}class Kr{constructor(t,o,m,_){this.min=m,this.max=_,this.points=t,this.planes=o}static fromAabb(t,o){const m=[];for(let _=0;_<8;_++)m.push([1&~_?t[0]:o[0],(_>>1&1)==1?o[1]:t[1],(_>>2&1)==1?o[2]:t[2]]);return new Kr(m,[[-1,0,0,o[0]],[1,0,0,-t[0]],[0,-1,0,o[1]],[0,1,0,-t[1]],[0,0,-1,o[2]],[0,0,1,-t[2]]],t,o)}static fromCenterSizeAngles(t,o,m){const _=s.bB([],m[0],m[1],m[2]),w=s.bC([],[o[0],0,0],_),T=s.bC([],[0,o[1],0],_),E=s.bC([],[0,0,o[2]],_),I=[...t],R=[...t];for(let G=0;G<8;G++)for(let U=0;U<3;U++){const K=t[U]+w[U]*(1&~G?-1:1)+T[U]*((G>>1&1)==1?1:-1)+E[U]*((G>>2&1)==1?1:-1);I[U]=Math.min(I[U],K),R[U]=Math.max(R[U],K)}const B=[];for(let G=0;G<8;G++){const U=[...t];s.b0(U,U,s.a$([],w,1&~G?-1:1)),s.b0(U,U,s.a$([],T,(G>>1&1)==1?1:-1)),s.b0(U,U,s.a$([],E,(G>>2&1)==1?1:-1)),B.push(U)}return new Kr(B,[[...w,-s.b5(w,B[0])],[...T,-s.b5(T,B[0])],[...E,-s.b5(E,B[0])],[-w[0],-w[1],-w[2],-s.b5(w,B[7])],[-T[0],-T[1],-T[2],-s.b5(T,B[7])],[-E[0],-E[1],-E[2],-s.b5(E,B[7])]],I,R)}intersectsFrustum(t){let o=!0;const m=this.points.length,_=this.planes.length,w=t.planes.length,T=t.points.length;for(let E=0;E<w;E++){const I=t.planes[E];let R=0;for(let B=0;B<m;B++){const G=this.points[B];I[0]*G[0]+I[1]*G[1]+I[2]*G[2]+I[3]>=0&&R++}if(R===0)return 0;R<m&&(o=!1)}if(o)return 2;for(let E=0;E<_;E++){const I=this.planes[E];let R=0;for(let B=0;B<T;B++){const G=t.points[B];I[0]*G[0]+I[1]*G[1]+I[2]*G[2]+I[3]>=0&&R++}if(R===0)return 0}return 1}intersectsPlane(t){const o=this.points.length;let m=0;for(let _=0;_<o;_++){const w=this.points[_];t[0]*w[0]+t[1]*w[1]+t[2]*w[2]+t[3]>=0&&m++}return m===o?2:m===0?0:1}}function lo(x,t,o){const m=x-t;return m<0?-m:Math.max(0,m-o)}function or(x,t,o,m,_){const w=x-o;let T;return T=w<0?Math.min(-w,1+w-_):w>1?Math.min(Math.max(w-_,0),1-w):0,Math.max(T,lo(t,m,_))}class lr{constructor(){this._boundingVolumeCache=new Fh(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,o,m,_){const w=1<<m.z,T=1/w,E=m.x/w,I=m.y/w;let R=2;return R=Math.min(R,or(t,o,E,I,T)),R=Math.min(R,or(t,o,E+.5,-I-T,T)),R=Math.min(R,or(t,o,E+.5,2-I-T,T)),R}getWrap(t,o,m){const _=1<<o.z,w=1/_,T=o.x/_,E=lo(t.x,T,w),I=lo(t.x,T-1,w),R=lo(t.x,T+1,w),B=Math.min(E,I,R);return B===R?1:B===I?-1:0}allowVariableZoom(t,o){return _i(t,o)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,o,m,_){return this._boundingVolumeCache.getTileBoundingVolume(t,o,m,_)}_computeTileBoundingVolume(t,o,m,_){var w,T;let E=0,I=0;if(_?.terrain){const R=new s.a2(t.z,o,t.z,t.x,t.y),B=_.terrain.getMinMaxElevation(R);E=(w=B.minElevation)!==null&&w!==void 0?w:Math.min(0,m),I=(T=B.maxElevation)!==null&&T!==void 0?T:Math.max(0,m)}if(E/=s.bE,I/=s.bE,E+=1,I+=1,t.z<=0)return Kr.fromAabb([-I,-I,-I],[I,I,I]);if(t.z===1)return Kr.fromAabb([t.x===0?-I:0,t.y===0?0:-I,-I],[t.x===0?0:I,t.y===0?I:0,I]);{const R=[Ia(0,0,t.x,t.y,t.z),Ia(s.a5,0,t.x,t.y,t.z),Ia(s.a5,s.a5,t.x,t.y,t.z),Ia(0,s.a5,t.x,t.y,t.z)],B=[];for(const Re of R)B.push(s.a$([],Re,I));if(I!==E)for(const Re of R)B.push(s.a$([],Re,E));t.y===0&&B.push([0,1,0]),t.y===(1<<t.z)-1&&B.push([0,-1,0]);const G=[1,1,1],U=[-1,-1,-1];for(const Re of B)for(let Oe=0;Oe<3;Oe++)G[Oe]=Math.min(G[Oe],Re[Oe]),U[Oe]=Math.max(U[Oe],Re[Oe]);const K=Ia(s.a5/2,s.a5/2,t.x,t.y,t.z),ee=s.b4([],[0,1,0],K);s.b3(ee,ee);const le=s.b4([],K,ee);s.b3(le,le);const he=s.b4([],R[2],R[1]);s.b3(he,he);const ue=s.b4([],R[0],R[3]);s.b3(ue,ue),B.push(s.a$([],K,I)),t.y>=(1<<t.z)/2&&B.push(s.a$([],Ia(s.a5/2,0,t.x,t.y,t.z),I)),t.y<(1<<t.z)/2&&B.push(s.a$([],Ia(s.a5/2,s.a5,t.x,t.y,t.z),I));const fe=uo(K,B),ye=uo(le,B),de=[-K[0],-K[1],-K[2],fe.max],ge=[K[0],K[1],K[2],-fe.min],ke=[-le[0],-le[1],-le[2],ye.max],me=[le[0],le[1],le[2],-ye.min],Me=[...he,0],$e=[...ue,0],ze=[];return t.y===0?ze.push(s.bD($e,Me,de),s.bD($e,Me,ge)):ze.push(s.bD(ke,Me,de),s.bD(ke,Me,ge),s.bD(ke,$e,de),s.bD(ke,$e,ge)),t.y===(1<<t.z)-1?ze.push(s.bD($e,Me,de),s.bD($e,Me,ge)):ze.push(s.bD(me,Me,de),s.bD(me,Me,ge),s.bD(me,$e,de),s.bD(me,$e,ge)),new Kr(ze,[de,ge,ke,me,Me,$e],G,U)}}}function uo(x,t){let o=1/0,m=-1/0;for(const _ of t){const w=s.b5(x,_);o=Math.min(o,w),m=Math.max(m,w)}return{min:o,max:m}}class Ga{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o){this._helper.resize(t,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(t){this._cachedClippingPlane=s.bF(),this._projectionMatrix=s.bj(),this._globeViewProjMatrix32f=s.bi(),this._globeViewProjMatrixNoCorrection=s.bj(),this._globeViewProjMatrixNoCorrectionInverted=s.bj(),this._globeProjMatrixInverted=s.bj(),this._cameraPosition=s.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(o,m)=>{const _=s.an(o.lat,-s.ao,s.ao),w=s.an(+m,this.minZoom+Di(0,_),this.maxZoom);return{center:new s.V(o.lng,_),zoom:w}},this.applyConstrain=(o,m)=>this._helper.applyConstrain(o,m),this._helper=new ua({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,m)=>this.defaultConstrain(o,m)},t),this._coveringTilesDetailsProvider=new lr}clone(){const t=new Ga;return t.apply(this),t}apply(t,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=s.bz();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:o,applyGlobeMatrix:m}=t,_=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const o=this.pitchInRadians,m=this.cameraToCenterDistance/t,_=Math.sin(o)*m,w=Math.cos(o)*m+1,T=1/Math.sqrt(_*_+w*w)*1;let E=-_,I=w;const R=Math.sqrt(E*E+I*I);E/=R,I/=R;const B=[0,E,I];s.bG(B,B,[0,0,0],-this.bearingInRadians),s.bH(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),s.bI(B,B,[0,0,0],this.center.lng*Math.PI/180);const G=1/s.b7(B);return s.a$(B,B,G),[...B,-T*G]}isLocationOccluded(t){return!this.isSurfacePointVisible(Si(t))}transformLightDirection(t){const o=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,_=Math.cos(m),w=[Math.sin(o)*_,Math.sin(m),Math.cos(o)*_],T=[w[2],0,-w[0]],E=[0,0,0];s.b4(E,T,w),s.b3(T,T),s.b3(E,E);const I=[0,0,0];return s.b3(I,[T[0]*t[0]+E[0]*t[1]+w[0]*t[2],T[1]*t[0]+E[1]*t[1]+w[1]*t[2],T[2]*t[0]+E[2]*t[1]+w[2]*t[2]]),I}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,o,m){const _=(function(E,I,R){const B=1/(1<<R.z);return new s.a9(E/s.a5*B+R.x*B,I/s.a5*B+R.y*B)})(t,o,m.canonical),w=(T=_.y,[s.by(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(w[1])}projectTileCoordinates(t,o,m,_){const w=m.canonical,T=Ia(t,o,w.x,w.y,w.z),E=1+(_?_(t,o):0)/s.bE,I=[T[0]*E,T[1]*E,T[2]*E,1];s.aH(I,I,this._globeViewProjMatrixNoCorrection);const R=this._cachedClippingPlane,B=R[0]*T[0]+R[1]*T[1]+R[2]*T[2]+R[3]<0;return{point:new s.P(I[0]/I[3],I[1]/I[3]),signedDistanceFromCamera:I[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=sr(this.worldSize,this.center.lat),o=s.bk(),m=s.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),s.be(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;o[8]=2*-_.x/this._helper._width,o[9]=2*_.y/this._helper._height,this._projectionMatrix=s.bf(o),this._globeProjMatrixInverted=s.bk(),s.aB(this._globeProjMatrixInverted,o),s.O(o,o,[0,0,-this.cameraToCenterDistance]),s.bg(o,o,this.rollInRadians),s.bh(o,o,-this.pitchInRadians),s.bg(o,o,this.bearingInRadians),s.O(o,o,[0,0,-t]);const w=s.bz();w[0]=t,w[1]=t,w[2]=t,s.bh(m,o,this.center.lat*Math.PI/180),s.bJ(m,m,-this.center.lng*Math.PI/180),s.Q(m,m,w),this._globeViewProjMatrixNoCorrection=m,s.bh(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bJ(o,o,-this.center.lng*Math.PI/180),s.Q(o,o,w),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=s.bk(),s.aB(this._globeViewProjMatrixNoCorrectionInverted,m);const T=s.bz();this._cameraPosition=s.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/t,s.bG(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),s.bH(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),s.bG(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),s.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bH(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),s.bI(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const E=s.bf(this._globeViewProjMatrixNoCorrectionInverted);s.Q(E,E,[1,1,-1]),this._cachedFrustum=Qn.fromInvProjectionMatrix(E,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){s.w("calculateFogMatrix is not supported on globe projection.");const o=s.bk();return s.ar(o),o}getVisibleUnwrappedCoordinates(t){return[new s.bc(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=Si(t);s.a$(m,m,1+o/s.bE);const _=s.bF();return s.aH(_,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(t){}getBounds(){const t=.5*this.width,o=.5*this.height,m=[new s.P(0,0),new s.P(t,0),new s.P(this.width,0),new s.P(this.width,o),new s.P(this.width,this.height),new s.P(t,this.height),new s.P(0,this.height),new s.P(0,o)],_=[];for(const G of m)_.push(this.unprojectScreenPoint(G));let w=0,T=0,E=0,I=0;const R=this.center;for(const G of _){const U=s.bK(R.lng,G.lng),K=s.bK(R.lat,G.lat);U<T&&(T=U),U>w&&(w=U),K<I&&(I=K),K>E&&(E=K)}const B=[R.lng+T,R.lat+I,R.lng+w,R.lat+E];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new Ci(B)}calculateCenterFromCameraLngLatAlt(t,o,m,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,_)}setLocationAtPoint(t,o){const m=Si(this.unprojectScreenPoint(o)),_=Si(t),w=s.bz();s.bL(w);const T=s.bz();s.bI(T,m,w,-this.center.lng*Math.PI/180),s.bH(T,T,w,this.center.lat*Math.PI/180);const E=_[0]*_[0]+_[2]*_[2],I=T[0]*T[0];if(E<I)return;const R=Math.sqrt(E-I),B=-R,G=s.bM(_[0],_[2],T[0],R),U=s.bM(_[0],_[2],T[0],B),K=s.bz();s.bI(K,_,w,-G);const ee=s.bM(K[1],K[2],T[1],T[2]),le=s.bz();s.bI(le,_,w,-U);const he=s.bM(le[1],le[2],T[1],T[2]),ue=.5*Math.PI,fe=ee>=-ue&&ee<=ue,ye=he>=-ue&&he<=ue;let de,ge;if(fe&&ye){const $e=this.center.lng*Math.PI/180,ze=this.center.lat*Math.PI/180;s.bN(G,$e)+s.bN(ee,ze)<s.bN(U,$e)+s.bN(he,ze)?(de=G,ge=ee):(de=U,ge=he)}else if(fe)de=G,ge=ee;else{if(!ye)return;de=U,ge=he}const ke=de/Math.PI*180,me=ge/Math.PI*180,Me=this.center.lat;this.setCenter(new s.V(ke,s.an(me,-90,90))),this.setZoom(this.zoom+Di(Me,this.center.lat))}locationToScreenPoint(t,o){const m=Si(t);if(o){const _=o.getElevationForLngLatZoom(t,this._helper._tileZoom);s.a$(m,m,1+_/s.bE)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(t){const o=s.bF();return s.aH(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new s.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,o){if(o){const m=o.pointCoordinate(t);if(m)return m}return s.a9.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,o){var m;return(m=this.screenPointToMercatorCoordinate(t,o))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(t,o){const m=this._cameraPosition,_=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(m,_)}getRayDirectionFromPixel(t){const o=s.bF();o[0]=t.x/this.width*2-1,o[1]=-1*(t.y/this.height*2-1),o[2]=1,o[3]=1,s.aH(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const m=s.bz();m[0]=o[0]-this._cameraPosition[0],m[1]=o[1]-this._cameraPosition[1],m[2]=o[2]-this._cameraPosition[2];const _=s.bz();return s.b3(_,m),_}isSurfacePointVisible(t){const o=this._cachedClippingPlane;return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const o=s.bF();return s.aH(o,[...t,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(t,o){const m=s.b5(t,o),_=s.bz(),w=s.bz();s.a$(w,o,m),s.b2(_,t,w);const T=1-s.b5(_,_);if(T<0)return null;const E=s.b5(t,t)-1,I=-m+(m<0?1:-1)*Math.sqrt(T),R=E/I,B=I;return{tMin:Math.min(R,B),tMax:Math.max(R,B)}}unprojectScreenPoint(t){const o=this._cameraPosition,m=this.getRayDirectionFromPixel(t),_=this.rayPlanetIntersection(o,m);if(_){const B=s.bz();s.b0(B,o,[m[0]*_.tMin,m[1]*_.tMin,m[2]*_.tMin]);const G=s.bz();return s.b3(G,B),Pl(G)}const w=this._cachedClippingPlane,T=w[0]*m[0]+w[1]*m[1]+w[2]*m[2],E=-s.bb(w,o)/T,I=s.bz();if(E>0)s.b0(I,o,[m[0]*E,m[1]*E,m[2]*E]);else{const B=s.bz();s.b0(B,o,[2*m[0],2*m[1],2*m[2]]);const G=s.bb(this._cachedClippingPlane,B);s.b2(I,B,[this._cachedClippingPlane[0]*G,this._cachedClippingPlane[1]*G,this._cachedClippingPlane[2]*G])}const R=(function(B){const G=s.bz();return G[0]=B[0]*-B[3],G[1]=B[1]*-B[3],G[2]=B[2]*-B[3],{center:G,radius:Math.sqrt(1-B[3]*B[3])}})(w);return Pl((function(B,G,U){const K=s.bz();s.b2(K,U,B);const ee=s.bz();return s.bA(ee,B,K,G/s.b9(K)),ee})(R.center,R.radius,I))}getMatrixForModel(t,o){const m=s.V.convert(t),_=1/s.bE,w=s.bj();return s.bJ(w,w,m.lng/180*Math.PI),s.bh(w,w,-m.lat/180*Math.PI),s.O(w,w,[0,0,1+o/s.bE]),s.bh(w,w,.5*Math.PI),s.Q(w,w,[_,_,_]),w}getProjectionDataForCustomLayer(t=!0){const o=this.getProjectionData({overscaledTileID:new s.a2(0,0,0,0,0),applyGlobeMatrix:t});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(t){}}class Sn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,o,m){return this._helper.interpolatePadding(t,o,m)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,o,m=!0){this._helper.resize(t,o,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,o){this._helper.overrideNearFarZ(t,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,o){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(t){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(o,m)=>this.currentTransform.defaultConstrain(o,m),this.applyConstrain=(o,m)=>this._helper.applyConstrain(o,m),this._helper=new ua({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(o,m)=>this.defaultConstrain(o,m)},t),this._globeness=1,this._mercatorTransform=new Lr,this._verticalPerspectiveTransform=new Ga}clone(){const t=new Sn;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const o=this._mercatorTransform.getProjectionData(t),m=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:o.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return s.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,o,m){const _=this._mercatorTransform.getPitchedTextCorrection(t,o,m),w=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,o,m);return s.bu(_,w,this._globeness)}projectTileCoordinates(t,o,m,_){return this.currentTransform.projectTileCoordinates(t,o,m,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,o){return this.currentTransform.lngLatToCameraDepth(t,o)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(t,o,m,_){return this._helper.calculateCenterFromCameraLngLatAlt(t,o,m,_)}setLocationAtPoint(t,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,o){return this.currentTransform.locationToScreenPoint(t,o)}screenPointToMercatorCoordinate(t,o){return this.currentTransform.screenPointToMercatorCoordinate(t,o)}screenPointToLocation(t,o){return this.currentTransform.screenPointToLocation(t,o)}isPointOnMapSurface(t,o){return this.currentTransform.isPointOnMapSurface(t,o)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,o){return this.currentTransform.getMatrixForModel(t,o)}getProjectionDataForCustomLayer(t=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return o;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return m.fallbackMatrix=o.mainMatrix,m}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class Xi{get useGlobeControls(){return!0}handlePanInertia(t,o){const m=Su(t,o);return Math.abs(m.lng-o.center.lng)>180&&(m.lng=o.center.lng+179.5*Math.sign(m.lng-o.center.lng)),{easingCenter:m,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,o){const m=t.around,_=o.screenPointToLocation(m);t.bearingDelta&&o.setBearing(o.bearing+t.bearingDelta),t.pitchDelta&&o.setPitch(o.pitch+t.pitchDelta),t.rollDelta&&o.setRoll(o.roll+t.rollDelta);const w=o.zoom;t.zoomDelta&&o.setZoom(o.zoom+t.zoomDelta);const T=o.zoom-w;if(T===0)return;const E=s.bK(o.center.lng,_.lng),I=E/(Math.abs(E/180)+1),R=s.bK(o.center.lat,_.lat),B=o.getRayDirectionFromPixel(m),G=o.cameraPosition,U=-1*s.b5(G,B),K=s.bz();s.b0(K,G,[B[0]*U,B[1]*U,B[2]*U]);const ee=s.b7(K)-1,le=Math.exp(.5*-Math.max(ee-.3,0)),he=sr(o.worldSize,o.center.lat)/Math.min(o.width,o.height),ue=s.bx(he,.9,.5,1,.25),fe=(1-s.aq(-T))*Math.min(le,ue),ye=o.center.lat,de=o.zoom,ge=new s.V(o.center.lng+I*fe,s.an(o.center.lat+R*fe,-s.ao,s.ao));o.setLocationAtPoint(_,m);const ke=o.center,me=s.bx(Math.abs(E),45,85,0,1),Me=s.bx(he,.75,.35,0,1),$e=Math.pow(Math.max(me,Me),.25),ze=s.bK(ke.lng,ge.lng),Re=s.bK(ke.lat,ge.lat);o.setCenter(new s.V(ke.lng+ze*$e,ke.lat+Re*$e).wrap()),o.setZoom(de+Di(ye,o.center.lat))}handleMapControlsPan(t,o,m){if(!t.panDelta)return;const _=o.center.lat,w=o.zoom;o.setCenter(Su(t.panDelta,o).wrap()),o.setZoom(w+Di(_,o.center.lat))}cameraForBoxAndBearing(t,o,m,_,w){const T=Vo(t,o,m,_,w),E=o.left/w.width*2-1,I=(w.width-o.right)/w.width*2-1,R=o.top/w.height*-2+1,B=(w.height-o.bottom)/w.height*-2+1,G=s.bK(m.getWest(),m.getEast())<0,U=G?m.getEast():m.getWest(),K=G?m.getWest():m.getEast(),ee=Math.max(m.getNorth(),m.getSouth()),le=Math.min(m.getNorth(),m.getSouth()),he=U+.5*s.bK(U,K),ue=ee+.5*s.bK(ee,le),fe=w.clone();fe.setCenter(T.center),fe.setBearing(T.bearing),fe.setPitch(0),fe.setRoll(0),fe.setZoom(T.zoom);const ye=fe.modelViewProjectionMatrix,de=[Si(m.getNorthWest()),Si(m.getNorthEast()),Si(m.getSouthWest()),Si(m.getSouthEast()),Si(new s.V(K,ue)),Si(new s.V(U,ue)),Si(new s.V(he,ee)),Si(new s.V(he,le))],ge=Si(T.center);let ke=Number.POSITIVE_INFINITY;for(const me of de)E<0&&(ke=Xi.getLesserNonNegativeNonNull(ke,Xi.solveVectorScale(me,ge,ye,"x",E))),I>0&&(ke=Xi.getLesserNonNegativeNonNull(ke,Xi.solveVectorScale(me,ge,ye,"x",I))),R>0&&(ke=Xi.getLesserNonNegativeNonNull(ke,Xi.solveVectorScale(me,ge,ye,"y",R))),B<0&&(ke=Xi.getLesserNonNegativeNonNull(ke,Xi.solveVectorScale(me,ge,ye,"y",B)));if(Number.isFinite(ke)&&ke!==0)return T.zoom=fe.zoom+s.at(ke),T;Aa()}handleJumpToCenterZoom(t,o){const m=t.center.lat,_=t.applyConstrain(o.center?s.V.convert(o.center):t.center,t.zoom).center;t.setCenter(_.wrap());const w=o.zoom!==void 0?+o.zoom:t.zoom+Di(m,_.lat);t.zoom!==w&&t.setZoom(w)}handleEaseTo(t,o){const m=t.zoom,_=t.center,w=t.padding,T={roll:t.roll,pitch:t.pitch,bearing:t.bearing},E={roll:o.roll===void 0?t.roll:o.roll,pitch:o.pitch===void 0?t.pitch:o.pitch,bearing:o.bearing===void 0?t.bearing:o.bearing},I=o.zoom!==void 0,R=!t.isPaddingEqual(o.padding);let B=!1;const G=o.center?s.V.convert(o.center):_,U=t.applyConstrain(G,m).center;_a(t,U);const K=t.clone();K.setCenter(U),K.setZoom(I?+o.zoom:m+Di(_.lat,G.lat)),K.setBearing(o.bearing);const ee=new s.P(s.an(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),s.an(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));K.setLocationAtPoint(U,ee);const le=(o.offset&&o.offsetAsPoint.mag())>0?K.center:U,he=I?+o.zoom:m+Di(_.lat,le.lat),ue=m+Di(_.lat,0),fe=he+Di(le.lat,0),ye=s.bK(_.lng,le.lng),de=s.bK(_.lat,le.lat),ge=s.aq(fe-ue);return B=he!==m,{easeFunc:ke=>{if(s.bo(T,E)||ku({startEulerAngles:T,endEulerAngles:E,tr:t,k:ke,useSlerp:T.roll!=E.roll}),R&&t.interpolatePadding(w,o.padding,ke),o.around)s.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(o.around,o.aroundPoint);else{const me=fe>ue?Math.min(2,ge):Math.max(.5,ge),Me=Math.pow(me,1-ke),$e=Uo(_,ye,de,ke*Me);t.setCenter($e.wrap())}if(B){const me=s.G.number(ue,fe,ke)+Di(0,t.center.lat);t.setZoom(me)}},isZooming:B,elevationCenter:le}}handleFlyTo(t,o){const m=o.zoom!==void 0,_=t.center,w=t.zoom,T=t.padding,E=!t.isPaddingEqual(o.padding),I=t.applyConstrain(s.V.convert(o.center||o.locationAtOffset),w).center,R=m?+o.zoom:t.zoom+Di(t.center.lat,I.lat),B=t.clone();B.setCenter(I),B.setZoom(R),B.setBearing(o.bearing);const G=new s.P(s.an(t.centerPoint.x+o.offsetAsPoint.x,0,t.width),s.an(t.centerPoint.y+o.offsetAsPoint.y,0,t.height));B.setLocationAtPoint(I,G);const U=B.center;_a(t,U);const K=(function(de,ge,ke){const me=Si(ge),Me=Si(ke),$e=s.b5(me,Me),ze=Math.acos($e),Re=qi(de);return ze/(2*Math.PI)*Re})(t,_,U),ee=w+Di(_.lat,0),le=R+Di(U.lat,0),he=s.aq(le-ee);let ue;if(typeof o.minZoom=="number"){const de=+o.minZoom+Di(U.lat,0),ge=Math.min(de,ee,le)+Di(0,U.lat),ke=t.applyConstrain(U,ge).zoom+Di(U.lat,0);ue=s.aq(ke-ee)}const fe=s.bK(_.lng,U.lng),ye=s.bK(_.lat,U.lat);return{easeFunc:(de,ge,ke,me)=>{const Me=Uo(_,fe,ye,ke);E&&t.interpolatePadding(T,o.padding,de);const $e=de===1?U:Me;t.setCenter($e.wrap());const ze=ee+s.at(ge);t.setZoom(de===1?R:ze+Di(0,$e.lat))},scaleOfZoom:he,targetCenter:U,scaleOfMinZoom:ue,pixelPathLength:K}}static solveVectorScale(t,o,m,_,w){const T=_==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],E=[m[3],m[7],m[11],m[15]],I=t[0]*T[0]+t[1]*T[1]+t[2]*T[2],R=t[0]*E[0]+t[1]*E[1]+t[2]*E[2],B=o[0]*T[0]+o[1]*T[1]+o[2]*T[2],G=o[0]*E[0]+o[1]*E[1]+o[2]*E[2];return B+w*R===I+w*G||E[3]*(I-B)+T[3]*(G-R)+I*G==B*R?null:(B+T[3]-w*G-w*E[3])/(B-I-w*G+w*R)}static getLesserNonNegativeNonNull(t,o){return o!==null&&o>=0&&o<t?o:t}}class Cl{constructor(t){this._globe=t,this._mercatorCameraHelper=new Ut,this._verticalPerspectiveCameraHelper=new Xi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,o){return this.currentHelper.handlePanInertia(t,o)}handleMapControlsRollPitchBearingZoom(t,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,o)}handleMapControlsPan(t,o,m){this.currentHelper.handleMapControlsPan(t,o,m)}cameraForBoxAndBearing(t,o,m,_,w){return this.currentHelper.cameraForBoxAndBearing(t,o,m,_,w)}handleJumpToCenterZoom(t,o){this.currentHelper.handleJumpToCenterZoom(t,o)}handleEaseTo(t,o){return this.currentHelper.handleEaseTo(t,o)}handleFlyTo(t,o){return this.currentHelper.handleFlyTo(t,o)}}const Ts=(x,t)=>s.B(x,t&&t.filter((o=>o.identifier!=="source.canvas"))),Yr=s.bO();class ur extends s.E{constructor(t,o={}){var m,_;super(),this._rtlPluginLoaded=()=>{for(const T in this.tileManagers){const E=this.tileManagers[T].getSource().type;E!=="vector"&&E!=="geojson"||this.tileManagers[T].reload()}},this.map=t,this.dispatcher=new Cn(Ba(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((T,E)=>this.getGlyphs(T,E))),this.dispatcher.registerMessageHandler("GI",((T,E)=>this.getImages(T,E))),this.dispatcher.registerMessageHandler("GDA",((T,E)=>this.getDashes(T,E))),this.imageManager=new bt,this.imageManager.setEventedParent(this);const w=((m=t._container)===null||m===void 0?void 0:m.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new Vt(t._requestManager,o.localIdeographFontFamily,w),this.lineAtlas=new ki(256,512),this.crossTileSymbolIndex=new Jn,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",s.bP()),Ce().on(ve,this._rtlPluginLoaded),this.on("data",(T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const E=this.tileManagers[T.sourceId];if(!E)return;const I=E.getSource();if(I&&I.vectorLayerIds)for(const R in this._layers){const B=this._layers[R];B.source===I.id&&this._validateLayer(B)}}))}_setInitialValues(){var t;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new s.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((t=this.crossTileSymbolIndex)===null||t===void 0?void 0:t.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(t,o){var m,_,w;this._checkLoaded();const T=o===null?(w=(_=(m=this.stylesheet.state)===null||m===void 0?void 0:m[t])===null||_===void 0?void 0:_.default)!==null&&w!==void 0?w:null:o;if(s.bR(T,this._globalState[t]))return this;this._globalState[t]=T,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const o=[];for(const m in t)!s.bR(this._globalState[m],t[m].default)&&(o.push(m),this._globalState[m]=t[m].default);this._applyGlobalStateChanges(o)}_applyGlobalStateChanges(t){if(t.length===0)return;const o=new Set,m={};for(const _ of t){m[_]=this._globalState[_];for(const w in this._layers){const T=this._layers[w],E=T.getLayoutAffectingGlobalStateRefs(),I=T.getPaintAffectingGlobalStateRefs(),R=T.getVisibilityAffectingGlobalStateRefs();if(E.has(_)&&o.add(T.source),I.has(_))for(const{name:B,value:G}of I.get(_))this._updatePaintProperty(T,B,G);R?.has(_)&&(T.recalculateVisibility(),this._updateLayer(T))}}this.dispatcher.broadcast("UGS",m);for(const _ in this.tileManagers)o.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(t,o={},m){this.fire(new s.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const _=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const w=this._loadStyleRequest;s.j(_,this._loadStyleRequest).then((T=>{this._loadStyleRequest=null,this._load(T.data,o,m)})).catch((T=>{this._loadStyleRequest=null,T&&!w.signal.aborted&&this.fire(new s.k(T))}))}loadJSON(t,o={},m){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,X.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(t,o,m)})).catch((()=>{}))}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(Yr,{validate:!1})}_load(t,o,m){var _,w;let T=o.transformStyle?o.transformStyle(m,t):t;if(!o.validate||!Ts(this,s.C(T))){T=Object.assign({},T),this._loaded=!0,this.stylesheet=T;for(const E in T.sources)this.addSource(E,T.sources[E],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new wt(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new mi(this.stylesheet.sky),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var t,o,m;const _=s.bS(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",_),this._order=_.map((w=>w.id)),this._layers={},this._serializedLayers=null;for(const w of _){const T=s.bT(w,this._globalState);if(T.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=T,s.bU(T)&&this.tileManagers[T.source]){const E=(m=(o=w.paint)===null||o===void 0?void 0:o["raster-fade-duration"])!==null&&m!==void 0?m:T.paint.get("raster-fade-duration");this.tileManagers[T.source].setRasterFadeDuration(E)}}}_loadSprite(t,o=!1,m=void 0){this.imageManager.setLoaded(!1);const _=new AbortController;let w;this._spriteRequest=_,(function(T,E,I,R){return s._(this,void 0,void 0,(function*(){const B=mt(T),G=I>1?"@2x":"",U={},K={};for(const{id:ee,url:le}of B){const he=E.transformRequest(Tt(le,G,".json"),"SpriteJSON");U[ee]=s.j(he,R);const ue=E.transformRequest(Tt(le,G,".png"),"SpriteImage");K[ee]=Je.getImage(ue,R)}return yield Promise.all([...Object.values(U),...Object.values(K)]),(function(ee,le){return s._(this,void 0,void 0,(function*(){const he={};for(const ue in ee){he[ue]={};const fe=X.getImageCanvasContext((yield le[ue]).data),ye=(yield ee[ue]).data;for(const de in ye){const{width:ge,height:ke,x:me,y:Me,sdf:$e,pixelRatio:ze,stretchX:Re,stretchY:Oe,content:tt,textFitWidth:it,textFitHeight:Ke}=ye[de];he[ue][de]={data:null,pixelRatio:ze,sdf:$e,stretchX:Re,stretchY:Oe,content:tt,textFitWidth:it,textFitHeight:Ke,spriteData:{width:ge,height:ke,x:me,y:Me,context:fe}}}}return he}))})(U,K)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((T=>{if(this._spriteRequest=null,T)for(const E in T){this._spritesImagesIds[E]=[];const I=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter((R=>!(R in T))):[];for(const R of I)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in T[E]){const B=E==="default"?R:`${E}:${R}`;this._spritesImagesIds[E].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,T[E][R],!1):this.imageManager.addImage(B,T[E][R]),o&&(this._changedImages[B]=!0)}}})).catch((T=>{this._spriteRequest=null,w=T,_.signal.aborted||this.fire(new s.k(w))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),m&&m(w)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(t){const o=this.tileManagers[t.source];if(!o)return;const m=t.sourceLayer;if(!m)return;const _=o.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(m)===-1)&&this.fire(new s.k(new Error(`Source layer "${m}" does not exist on source "${_.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.tileManagers)if(!this.tileManagers[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,o=!1){const m=this._serializedAllLayers();if(!t||t.length===0)return Object.values(o?s.bV(m):m);const _=[];for(const w of t)if(m[w]){const T=o?s.bV(m[w]):m[w];_.push(T)}return _}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const o=Object.keys(this._layers);for(const m of o){const _=this._layers[m];_.type!=="custom"&&(t[m]=_.serialize())}return t}hasTransitions(){var t,o,m;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const _ in this.tileManagers)if(this.tileManagers[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const o=this._changed;if(o){const _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(_.length||w.length)&&this._updateWorkerLayers(_,w);for(const T in this._updatedSources){const E=this._updatedSources[T];if(E==="reload")this._reloadSource(T);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const m={};for(const _ in this.tileManagers){const w=this.tileManagers[_];m[_]=w.used,w.used=!1}for(const _ of this._order){const w=this._layers[_];w.recalculate(t,this._availableImages),!w.isHidden(t.zoom)&&w.source&&(this.tileManagers[w.source].used=!0)}for(const _ in m){const w=this.tileManagers[_];!!m[_]!=!!w.used&&w.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,o&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this.tileManagers)this.tileManagers[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,o={}){var m;this._checkLoaded();const _=this.serialize();if(t=o.transformStyle?o.transformStyle(_,t):t,((m=o.validate)===null||m===void 0||m)&&Ts(this,s.C(t)))return!1;(t=s.bV(t)).layers=s.bS(t.layers);const w=s.bW(_,t),T=this._getOperationsToPerform(w);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const E of T.operations)E();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const o=[],m=[];for(const _ of t)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":o.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":o.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":o.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":o.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":o.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":o.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":o.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":o.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":o.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":o.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":o.push((()=>this.setSprite.apply(this,_.args)));break;case"setTerrain":o.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setSky":o.push((()=>this.setSky.apply(this,_.args)));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":o.push((()=>this.setGlobalState.apply(this,_.args)));break;case"setTransition":o.push((()=>{}));break;default:m.push(_.command)}return{operations:o,unimplemented:m}}addImage(t,o){if(this.getImage(t))return this.fire(new s.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,o),this._afterImageUpdated(t)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new s.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,o,m={}){if(this._checkLoaded(),this.tileManagers[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(s.C.source,`sources.${t}`,o,null,m))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const _=this.tileManagers[t]=new la(t,o,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:t}))),_.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===t)return this.fire(new s.k(new Error(`Source "${t}" cannot be removed while layer "${m}" is using it.`)));const o=this.tileManagers[t];delete this.tileManagers[t],delete this._updatedSources[t],o.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,o){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const m=this.tileManagers[t].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(o),this._changed=!0}getSource(t){return this.tileManagers[t]&&this.tileManagers[t].getSource()}addLayer(t,o,m={}){this._checkLoaded();const _=t.id;if(this.getLayer(_))return void this.fire(new s.k(new Error(`Layer "${_}" already exists on this map.`)));let w;if(t.type==="custom"){if(Ts(this,s.bX(t)))return;w=s.bT(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(_,t.source),t=s.bV(t),t=s.e(t,{source:_})),this._validate(s.C.layer,`layers.${_}`,t,{arrayIndex:-1},m))return;w=s.bT(t,this._globalState),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}})}const T=o?this._order.indexOf(o):this._order.length;if(o&&T===-1)this.fire(new s.k(new Error(`Cannot add layer "${_}" before non-existing layer "${o}".`)));else{if(this._order.splice(T,0,_),this._layerOrderChanged=!0,this._layers[_]=w,this._removedLayers[_]&&w.source&&w.type!=="custom"){const E=this._removedLayers[_];delete this._removedLayers[_],E.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.tileManagers[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new s.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const m=this._order.indexOf(t);this._order.splice(m,1);const _=o?this._order.indexOf(o):this._order.length;o&&_===-1?this.fire(new s.k(new Error(`Cannot move layer "${t}" before non-existing layer "${o}".`))):(this._order.splice(_,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${t}".`)));o.setEventedParent(null);const m=this._order.indexOf(t);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,o,m){this._checkLoaded();const _=this.getLayer(t);_?_.minzoom===o&&_.maxzoom===m||(o!=null&&(_.minzoom=o),m!=null&&(_.maxzoom=m),this._updateLayer(_)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,o,m={}){this._checkLoaded();const _=this.getLayer(t);if(_){if(!s.bR(_.filter,o))return o==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(s.C.filter,`layers.${_.id}.filter`,o,null,m)||(_.setFilter(s.bV(o)),this._updateLayer(_)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return s.bV(this.getLayer(t).filter)}setLayoutProperty(t,o,m,_={}){this._checkLoaded();const w=this.getLayer(t);w?s.bR(w.getLayoutProperty(o),m)||(w.setLayoutProperty(o,m,_),this._updateLayer(w)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,o){const m=this.getLayer(t);if(m)return m.getLayoutProperty(o);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,o,m,_={}){this._checkLoaded();const w=this.getLayer(t);w?s.bR(w.getPaintProperty(o),m)||this._updatePaintProperty(w,o,m,_):this.fire(new s.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,o,m,_={}){t.setPaintProperty(o,m,_)&&this._updateLayer(t),s.bU(t)&&o==="raster-fade-duration"&&this.tileManagers[t.source].setRasterFadeDuration(m),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,o){return this.getLayer(t).getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const m=t.source,_=t.sourceLayer,w=this.tileManagers[m];if(w===void 0)return void this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)));const T=w.getSource().type;T==="geojson"&&_?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||_?(t.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),w.setFeatureState(_,t.id,o)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,o){this._checkLoaded();const m=t.source,_=this.tileManagers[m];if(_===void 0)return void this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)));const w=_.getSource().type,T=w==="vector"?t.sourceLayer:void 0;w!=="vector"||T?o&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(T,t.id,o):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const o=t.source,m=t.sourceLayer,_=this.tileManagers[o];if(_!==void 0)return _.getSource().type!=="vector"||m?(t.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(m,t.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=s.bY(this.tileManagers,(w=>w.serialize())),o=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,_=this.stylesheet;return s.bZ({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:t,layers:o,terrain:m},(w=>w!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.tileManagers[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.tileManagers[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const o=T=>this._layers[T].type==="fill-extrusion",m={},_=[];for(let T=this._order.length-1;T>=0;T--){const E=this._order[T];if(o(E)){m[E]=T;for(const I of t){const R=I[E];if(R)for(const B of R)_.push(B)}}}_.sort(((T,E)=>E.intersectionZ-T.intersectionZ));const w=[];for(let T=this._order.length-1;T>=0;T--){const E=this._order[T];if(o(E))for(let I=_.length-1;I>=0;I--){const R=_[I].feature;if(m[R.layer.id]<T)break;w.push(R),_.pop()}else for(const I of t){const R=I[E];if(R)for(const B of R)w.push(B.feature)}}return w}queryRenderedFeatures(t,o,m){o&&o.filter&&this._validate(s.C.filter,"queryRenderedFeatures.filter",o.filter,null,o);const _={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const R of o.layers){const B=this._layers[R];if(!B)return this.fire(new s.k(new Error(`The layer '${R}' does not exist in the map's style and cannot be queried for features.`))),[];_[B.source]=!0}}const w=[];o.availableImages=this._availableImages;const T=this._serializedAllLayers(),E=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,I=Object.assign(Object.assign({},o),{layers:E,globalState:this._globalState});for(const R in this.tileManagers)o.layers&&!_[R]||w.push(Vr(this.tileManagers[R],this._layers,T,t,I,m,this.map.terrain?(B,G,U)=>this.map.terrain.getElevation(B,G,U):void 0));return this.placement&&w.push((function(R,B,G,U,K,ee,le){const he={},ue=ee.queryRenderedSymbols(U),fe=[];for(const ye of Object.keys(ue).map(Number))fe.push(le[ye]);fe.sort(gn);for(const ye of fe){const de=ye.featureIndex.lookupSymbolFeatures(ue[ye.bucketInstanceId],B,ye.bucketIndex,ye.sourceLayerIndex,{filterSpec:K.filter,globalState:K.globalState},K.layers,K.availableImages,R);for(const ge in de){const ke=he[ge]=he[ge]||[],me=de[ge];me.sort(((Me,$e)=>{const ze=ye.featureSortOrder;if(ze){const Re=ze.indexOf(Me.featureIndex);return ze.indexOf($e.featureIndex)-Re}return $e.featureIndex-Me.featureIndex}));for(const Me of me)ke.push(Me)}}return(function(ye,de,ge){for(const ke in ye)for(const me of ye[ke])oa(me,ge[de[ke].source]);return ye})(he,R,G)})(this._layers,T,this.tileManagers,t,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(t,o){o?.filter&&this._validate(s.C.filter,"querySourceFeatures.filter",o.filter,null,o);const m=this.tileManagers[t];return m?(function(_,w){const T=_.getRenderableIds().map((R=>_.getTileByID(R))),E=[],I={};for(let R=0;R<T.length;R++){const B=T[R],G=B.tileID.canonical.key;I[G]||(I[G]=!0,B.querySourceFeatures(E,w))}return E})(m,o?Object.assign(Object.assign({},o),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const m=this.light.getLight();let _=!1;for(const T in t)if(!s.bR(t[T],m[T])){_=!0;break}if(!_)return;const w={now:ae(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(w)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,o={}){this._checkLoaded();const m=this.getSky();let _=!1;if(!t&&!m)return;if(t&&!m)_=!0;else if(!t&&m)_=!0;else for(const T in t)if(!s.bR(t[T],m[T])){_=!0;break}if(!_)return;const w={now:ae(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,o),this.sky.updateTransitions(w)}_setProjectionInternal(t){const o=(function(m,_){const w={constrainOverride:_};if(Array.isArray(m)){const T=new Tl({type:m});return{projection:T,transform:new Sn(w),cameraHelper:new Cl(T)}}switch(m){case"mercator":return{projection:new Yi,transform:new Lr(w),cameraHelper:new Ut};case"globe":{const T=new Tl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:T,transform:new Sn(w),cameraHelper:new Cl(T)}}case"vertical-perspective":return{projection:new ya,transform:new Ga(w),cameraHelper:new Xi};default:return s.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new Yi,transform:new Lr(w),cameraHelper:new Ut}}})(t,this.map.transformConstrain);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const m in this.tileManagers)this.tileManagers[m].reload()}_validate(t,o,m,_,w={}){return(!w||w.validate!==!1)&&Ts(this,t.call(s.C,s.e({key:o,style:this.serialize(),value:m,styleSpec:s.u},_)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ce().off(ve,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.tileManagers){const m=this.tileManagers[o];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.tileManagers[t].clearTiles()}_reloadSource(t){this.tileManagers[t].resume(),this.tileManagers[t].reload()}_updateSources(t){for(const o in this.tileManagers)this.tileManagers[o].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.tileManagers)this._reloadSource(t)}_updatePlacement(t,o,m,_,w=!1){let T=!1,E=!1;const I={};for(const R of this._order){const B=this._layers[R];if(B.type!=="symbol")continue;if(!I[B.source]){const U=this.tileManagers[B.source];I[B.source]=U.getRenderableIds(!0).map((K=>U.getTileByID(K))).sort(((K,ee)=>ee.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(ee.tileID)?-1:1)))}const G=this.crossTileSymbolIndex.addLayer(B,I[B.source],t.center.lng);T=T||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(ae(),t.zoom))&&(this.pauseablePlacement=new Mr(t,this.map.terrain,this._order,w,o,m,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(ae()),E=!0),T&&this.pauseablePlacement.placement.setStale()),E||T)for(const R of this._order){const B=this._layers[R];B.type==="symbol"&&this.placement.updateLayerOpacities(B,I[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(ae())}_releaseSymbolFadeTiles(){for(const t in this.tileManagers)this.tileManagers[t].releaseSymbolFadeTiles()}getImages(t,o){return s._(this,void 0,void 0,(function*(){const m=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const _=this.tileManagers[o.source];return _&&_.setDependencies(o.tileID.key,o.type,o.icons),m}))}getGlyphs(t,o){return s._(this,void 0,void 0,(function*(){const m=yield this.glyphManager.getGlyphs(o.stacks),_=this.tileManagers[o.source];return _&&_.setDependencies(o.tileID.key,o.type,[""]),m}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,o={}){this._checkLoaded(),t&&this._validate(s.C.glyphs,"glyphs",t,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}getDashes(t,o){return s._(this,void 0,void 0,(function*(){const m={};for(const[_,w]of Object.entries(o.dashes))m[_]=this.lineAtlas.getDash(w.dasharray,w.round);return m}))}addSprite(t,o,m={},_){this._checkLoaded();const w=[{id:t,url:o}],T=[...mt(this.stylesheet.sprite),...w];this._validate(s.C.sprite,"sprite",T,null,m)||(this.stylesheet.sprite=T,this._loadSprite(w,!0,_))}removeSprite(t){this._checkLoaded();const o=mt(this.stylesheet.sprite);if(o.find((m=>m.id===t))){if(this._spritesImagesIds[t])for(const m of this._spritesImagesIds[t])this.imageManager.removeImage(m),this._changedImages[m]=!0;o.splice(o.findIndex((m=>m.id===t)),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return mt(this.stylesheet.sprite)}setSprite(t,o={},m){this._checkLoaded(),t&&this._validate(s.C.sprite,"sprite",t,null,o)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,m):(this._unloadSprite(),m&&m(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const t in this.tileManagers){const o=this.tileManagers[t];o.setEventedParent(null),o.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const t in this._layers){const o=this._layers[t];o.setEventedParent(null),o.onRemove&&o.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Oh=s.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Go{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,m,_,w,T,E,I,R){this.context=t;let B=this.boundPaintVertexBuffers.length!==_.length;for(let G=0;!B&&G<_.length;G++)this.boundPaintVertexBuffers[G]!==_[G]&&(B=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==m||B||this.boundIndexBuffer!==w||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==R?this.freshBind(o,m,_,w,T,E,I,R):(t.bindVertexArray.set(this.vao),E&&E.bind(),w&&w.dynamicDraw&&w.bind(),I&&I.bind(),R&&R.bind())}freshBind(t,o,m,_,w,T,E,I){const R=t.numAttributes,B=this.context,G=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=I,o.enableAttributes(G,t);for(const U of m)U.enableAttributes(G,t);T&&T.enableAttributes(G,t),E&&E.enableAttributes(G,t),I&&I.enableAttributes(G,t),o.bind(),o.setVertexAttribPointers(G,t,w);for(const U of m)U.bind(),U.setVertexAttribPointers(G,t,w);T&&(T.bind(),T.setVertexAttribPointers(G,t,w)),_&&_.bind(),E&&(E.bind(),E.setVertexAttribPointers(G,t,w)),I&&(I.bind(),I.setVertexAttribPointers(G,t,w)),B.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Tu=(x,t,o,m,_)=>({u_texture:0,u_ele_delta:x,u_fog_matrix:t,u_fog_color:o?o.properties.get("fog-color"):s.bp.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:o?o.calculateFogBlendOpacity(m):0,u_horizon_color:o?o.properties.get("horizon-color"):s.bp.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),Ps={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function ea(x){const t=[];for(let o=0;o<x.length;o++){if(x[o]===null)continue;const m=x[o].split(" ");t.push(m.pop())}return t}class Xr{constructor(t,o,m,_,w,T,E,I,R=[]){const B=t.gl;this.program=B.createProgram();const G=ea(o.staticAttributes),U=m?m.getBinderAttributes():[],K=G.concat(U),ee=ii.prelude.staticUniforms?ea(ii.prelude.staticUniforms):[],le=E.staticUniforms?ea(E.staticUniforms):[],he=o.staticUniforms?ea(o.staticUniforms):[],ue=m?m.getBinderUniforms():[],fe=ee.concat(le).concat(he).concat(ue),ye=[];for(const ze of fe)ye.indexOf(ze)<0&&ye.push(ze);const de=m?m.defines():[];ha(B)&&de.unshift("#version 300 es"),w&&de.push("#define OVERDRAW_INSPECTOR;"),T&&de.push("#define TERRAIN3D;"),I&&de.push(I),R&&de.push(...R);let ge=de.concat(ii.prelude.fragmentSource,E.fragmentSource,o.fragmentSource).join(`
`),ke=de.concat(ii.prelude.vertexSource,E.vertexSource,o.vertexSource).join(`
`);ha(B)||(ge=(function(ze){return ze.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ge),ke=(function(ze){return ze.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ke));const me=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(me,ge),B.compileShader(me),!B.getShaderParameter(me,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(me)}`);B.attachShader(this.program,me);const Me=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Me,ke),B.compileShader(Me),!B.getShaderParameter(Me,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(Me)}`);B.attachShader(this.program,Me),this.attributes={};const $e={};this.numAttributes=K.length;for(let ze=0;ze<this.numAttributes;ze++)K[ze]&&(B.bindAttribLocation(this.program,ze,K[ze]),this.attributes[K[ze]]=ze);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(Me),B.deleteShader(me);for(let ze=0;ze<ye.length;ze++){const Re=ye[ze];if(Re&&!$e[Re]){const Oe=B.getUniformLocation(this.program,Re);Oe&&($e[Re]=Oe)}}this.fixedUniforms=_(t,$e),this.terrainUniforms=((ze,Re)=>({u_depth:new s.b_(ze,Re.u_depth),u_terrain:new s.b_(ze,Re.u_terrain),u_terrain_dim:new s.bq(ze,Re.u_terrain_dim),u_terrain_matrix:new s.c0(ze,Re.u_terrain_matrix),u_terrain_unpack:new s.c1(ze,Re.u_terrain_unpack),u_terrain_exaggeration:new s.bq(ze,Re.u_terrain_exaggeration)}))(t,$e),this.projectionUniforms=((ze,Re)=>({u_projection_matrix:new s.c0(ze,Re.u_projection_matrix),u_projection_tile_mercator_coords:new s.c1(ze,Re.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.c1(ze,Re.u_projection_clipping_plane),u_projection_transition:new s.bq(ze,Re.u_projection_transition),u_projection_fallback_matrix:new s.c0(ze,Re.u_projection_fallback_matrix)}))(t,$e),this.binderUniforms=m?m.getUniforms(t,$e):[]}draw(t,o,m,_,w,T,E,I,R,B,G,U,K,ee,le,he,ue,fe,ye){const de=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(m),t.setStencilMode(_),t.setColorMode(w),t.setCullFace(T),I){t.activeTexture.set(de.TEXTURE2),de.bindTexture(de.TEXTURE_2D,I.depthTexture),t.activeTexture.set(de.TEXTURE3),de.bindTexture(de.TEXTURE_2D,I.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(I[ke])}if(R)for(const ke in R)this.projectionUniforms[Ps[ke]].set(R[ke]);if(E)for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(E[ke]);he&&he.setUniforms(t,this.binderUniforms,ee,{zoom:le});let ge=0;switch(o){case de.LINES:ge=2;break;case de.TRIANGLES:ge=3;break;case de.LINE_STRIP:ge=1}for(const ke of K.get()){const me=ke.vaos||(ke.vaos={});(me[B]||(me[B]=new Go)).bind(t,this,G,he?he.getPaintVertexBuffers():[],U,ke.vertexOffset,ue,fe,ye),de.drawElements(o,ke.primitiveLength*ge,de.UNSIGNED_SHORT,ke.primitiveOffset*ge*2)}}}function Pu(x,t,o){const m=1/s.aN(o,1,t.transform.tileZoom),_=Math.pow(2,o.tileID.overscaledZ),w=o.tileSize*Math.pow(2,t.transform.tileZoom)/_,T=w*(o.tileID.canonical.x+o.tileID.wrap*_),E=w*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[m,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[T>>16,E>>16],u_pixel_coord_lower:[65535&T,65535&E]}}const Da=(x,t,o,m)=>{const _=x.style.light,w=_.properties.get("position"),T=[w.x,w.y,w.z],E=s.c4();_.properties.get("anchor")==="viewport"&&s.c5(E,x.transform.bearingInRadians),s.c6(T,T,E);const I=x.transform.transformLightDirection(T),R=_.properties.get("color");return{u_lightpos:T,u_lightpos_globe:I,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+t,u_opacity:o,u_fill_translate:m}},Ll=(x,t,o,m,_,w,T)=>s.e(Da(x,t,o,m),Pu(w,x,T),{u_height_factor:-Math.pow(2,_.overscaledZ)/T.tileSize/8}),Ar=(x,t,o,m)=>s.e(Pu(t,x,o),{u_fill_translate:m}),Mu=(x,t)=>({u_world:x,u_fill_translate:t}),Ms=(x,t,o,m,_)=>s.e(Ar(x,t,o,_),{u_world:m}),El=(x,t,o,m,_)=>{const w=x.transform;let T,E,I=0;if(o.paint.get("circle-pitch-alignment")==="map"){const R=s.aN(t,1,w.zoom);T=!0,E=[R,R],I=R/(s.a5*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*_}else T=!1,E=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:E,u_globe_extrude_scale:I,u_translate:m}},qa=x=>({u_pixel_extrude_scale:[1/x.width,1/x.height]}),Cu=x=>({u_viewport_size:[x.width,x.height]}),Za=(x,t=1)=>({u_color:x,u_overlay:0,u_overlay_scale:t}),hr=(x,t,o,m)=>{const _=s.aN(x,1,t)/(s.a5*Math.pow(2,x.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:s.aN(x,1,t),u_intensity:o,u_globe_extrude_scale:_}},Lu=(x,t,o,m)=>{const _=s.N();s.c7(_,0,x.width,x.height,0,0,1);const w=x.context.gl;return{u_matrix:_,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:o,u_color_ramp:m,u_opacity:t.paint.get("heatmap-opacity")}},Cs=(x,t,o)=>{const m=o.paint.get("hillshade-accent-color");let _;switch(o.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const w=o.getIlluminationProperties();for(let T=0;T<w.directionRadians.length;T++)o.paint.get("hillshade-illumination-anchor")==="viewport"&&(w.directionRadians[T]+=x.transform.bearingInRadians);return{u_image:0,u_latrange:dr(0,t.tileID),u_exaggeration:o.paint.get("hillshade-exaggeration"),u_altitudes:w.altitudeRadians,u_azimuths:w.directionRadians,u_accent:m,u_method:_,u_highlights:w.highlightColor,u_shadows:w.shadowColor}},jh=(x,t)=>{const o=t.stride,m=s.N();return s.c7(m,0,s.a5,-s.a5,0,0,1),s.O(m,m,[0,-s.a5,0]),{u_matrix:m,u_image:1,u_dimension:[o,o],u_zoom:x.overscaledZ,u_unpack:t.getUnpackVector()}};function dr(x,t){const o=Math.pow(2,t.canonical.z),m=t.canonical.y;return[new s.a9(0,m/o).toLngLat().lat,new s.a9(0,(m+1)/o).toLngLat().lat]}const Eu=(x,t,o=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:o,u_opacity:x.paint.get("color-relief-opacity")}),Wa=(x,t,o,m)=>{const _=x.transform;return{u_translation:Jr(x,t,o),u_ratio:m/s.aN(t,1,_.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Au=(x,t,o,m,_)=>s.e(Wa(x,t,o,m),{u_image:0,u_image_height:_}),za=(x,t,o,m,_)=>{const w=x.transform,T=da(t,w);return{u_translation:Jr(x,t,o),u_texsize:t.imageAtlasTexture.size,u_ratio:m/s.aN(t,1,w.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[T,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},ho=(x,t,o,m,_)=>{const w=da(t,x.transform);return s.e(Wa(x,t,o,m),{u_tileratio:w,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image:0,u_mix:_.t,u_lineatlas_width:x.lineAtlas.width,u_lineatlas_height:x.lineAtlas.height})},co=(x,t,o,m,_,w)=>{const T=da(t,x.transform);return s.e(Wa(x,t,o,m),{u_image:0,u_image_height:w,u_tileratio:T,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image_dash:1,u_mix:_.t,u_lineatlas_width:x.lineAtlas.width,u_lineatlas_height:x.lineAtlas.height})};function da(x,t){return 1/s.aN(x,1,t.tileZoom)}function Jr(x,t,o){return s.aO(x.transform,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const fo=(x,t,o,m,_)=>{return{u_tl_parent:x,u_scale_parent:t,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(w=m.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Ls(m.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var w,T};function Ls(x){x*=Math.PI/180;const t=Math.sin(x),o=Math.cos(x);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const Ir=(x,t,o,m,_,w,T,E,I,R,B,G,U)=>{const K=T.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:K.width/K.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:E,u_coord_matrix:I,u_is_text:+B,u_pitch_with_map:+m,u_is_along_line:_,u_is_variable_anchor:w,u_texsize:G,u_texture:0,u_translation:R,u_pitched_scale:U}},Qr=(x,t,o,m,_,w,T,E,I,R,B,G,U,K)=>{const ee=T.transform;return s.e(Ir(x,t,o,m,_,w,T,E,I,R,B,G,K),{u_gamma_scale:m?Math.cos(ee.pitch*Math.PI/180)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},cr=(x,t,o,m,_,w,T,E,I,R,B,G,U)=>s.e(Qr(x,t,o,m,_,w,T,E,I,R,!0,B,0,U),{u_texsize_icon:G,u_texture_icon:1}),qo=(x,t)=>({u_opacity:x,u_color:t}),Bh=(x,t,o,m,_)=>s.e((function(w,T,E,I){const R=E.imageManager.getPattern(w.from.toString()),B=E.imageManager.getPattern(w.to.toString()),{width:G,height:U}=E.imageManager.getPixelSize(),K=Math.pow(2,I.tileID.overscaledZ),ee=I.tileSize*Math.pow(2,E.transform.tileZoom)/K,le=ee*(I.tileID.canonical.x+I.tileID.wrap*K),he=ee*I.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[G,U],u_mix:T.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/s.aN(I,1,E.transform.tileZoom),u_pixel_coord_upper:[le>>16,he>>16],u_pixel_coord_lower:[65535&le,65535&he]}})(o,_,t,m),{u_opacity:x}),po=(x,t)=>{},$h={fillExtrusion:(x,t)=>({u_lightpos:new s.c2(x,t.u_lightpos),u_lightpos_globe:new s.c2(x,t.u_lightpos_globe),u_lightintensity:new s.bq(x,t.u_lightintensity),u_lightcolor:new s.c2(x,t.u_lightcolor),u_vertical_gradient:new s.bq(x,t.u_vertical_gradient),u_opacity:new s.bq(x,t.u_opacity),u_fill_translate:new s.c3(x,t.u_fill_translate)}),fillExtrusionPattern:(x,t)=>({u_lightpos:new s.c2(x,t.u_lightpos),u_lightpos_globe:new s.c2(x,t.u_lightpos_globe),u_lightintensity:new s.bq(x,t.u_lightintensity),u_lightcolor:new s.c2(x,t.u_lightcolor),u_vertical_gradient:new s.bq(x,t.u_vertical_gradient),u_height_factor:new s.bq(x,t.u_height_factor),u_opacity:new s.bq(x,t.u_opacity),u_fill_translate:new s.c3(x,t.u_fill_translate),u_image:new s.b_(x,t.u_image),u_texsize:new s.c3(x,t.u_texsize),u_pixel_coord_upper:new s.c3(x,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(x,t.u_pixel_coord_lower),u_scale:new s.c2(x,t.u_scale),u_fade:new s.bq(x,t.u_fade)}),fill:(x,t)=>({u_fill_translate:new s.c3(x,t.u_fill_translate)}),fillPattern:(x,t)=>({u_image:new s.b_(x,t.u_image),u_texsize:new s.c3(x,t.u_texsize),u_pixel_coord_upper:new s.c3(x,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(x,t.u_pixel_coord_lower),u_scale:new s.c2(x,t.u_scale),u_fade:new s.bq(x,t.u_fade),u_fill_translate:new s.c3(x,t.u_fill_translate)}),fillOutline:(x,t)=>({u_world:new s.c3(x,t.u_world),u_fill_translate:new s.c3(x,t.u_fill_translate)}),fillOutlinePattern:(x,t)=>({u_world:new s.c3(x,t.u_world),u_image:new s.b_(x,t.u_image),u_texsize:new s.c3(x,t.u_texsize),u_pixel_coord_upper:new s.c3(x,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(x,t.u_pixel_coord_lower),u_scale:new s.c2(x,t.u_scale),u_fade:new s.bq(x,t.u_fade),u_fill_translate:new s.c3(x,t.u_fill_translate)}),circle:(x,t)=>({u_camera_to_center_distance:new s.bq(x,t.u_camera_to_center_distance),u_scale_with_map:new s.b_(x,t.u_scale_with_map),u_pitch_with_map:new s.b_(x,t.u_pitch_with_map),u_extrude_scale:new s.c3(x,t.u_extrude_scale),u_device_pixel_ratio:new s.bq(x,t.u_device_pixel_ratio),u_globe_extrude_scale:new s.bq(x,t.u_globe_extrude_scale),u_translate:new s.c3(x,t.u_translate)}),collisionBox:(x,t)=>({u_pixel_extrude_scale:new s.c3(x,t.u_pixel_extrude_scale)}),collisionCircle:(x,t)=>({u_viewport_size:new s.c3(x,t.u_viewport_size)}),debug:(x,t)=>({u_color:new s.b$(x,t.u_color),u_overlay:new s.b_(x,t.u_overlay),u_overlay_scale:new s.bq(x,t.u_overlay_scale)}),depth:po,clippingMask:po,heatmap:(x,t)=>({u_extrude_scale:new s.bq(x,t.u_extrude_scale),u_intensity:new s.bq(x,t.u_intensity),u_globe_extrude_scale:new s.bq(x,t.u_globe_extrude_scale)}),heatmapTexture:(x,t)=>({u_matrix:new s.c0(x,t.u_matrix),u_world:new s.c3(x,t.u_world),u_image:new s.b_(x,t.u_image),u_color_ramp:new s.b_(x,t.u_color_ramp),u_opacity:new s.bq(x,t.u_opacity)}),hillshade:(x,t)=>({u_image:new s.b_(x,t.u_image),u_latrange:new s.c3(x,t.u_latrange),u_exaggeration:new s.bq(x,t.u_exaggeration),u_altitudes:new s.c9(x,t.u_altitudes),u_azimuths:new s.c9(x,t.u_azimuths),u_accent:new s.b$(x,t.u_accent),u_method:new s.b_(x,t.u_method),u_shadows:new s.c8(x,t.u_shadows),u_highlights:new s.c8(x,t.u_highlights)}),hillshadePrepare:(x,t)=>({u_matrix:new s.c0(x,t.u_matrix),u_image:new s.b_(x,t.u_image),u_dimension:new s.c3(x,t.u_dimension),u_zoom:new s.bq(x,t.u_zoom),u_unpack:new s.c1(x,t.u_unpack)}),colorRelief:(x,t)=>({u_image:new s.b_(x,t.u_image),u_unpack:new s.c1(x,t.u_unpack),u_dimension:new s.c3(x,t.u_dimension),u_elevation_stops:new s.b_(x,t.u_elevation_stops),u_color_stops:new s.b_(x,t.u_color_stops),u_color_ramp_size:new s.b_(x,t.u_color_ramp_size),u_opacity:new s.bq(x,t.u_opacity)}),line:(x,t)=>({u_translation:new s.c3(x,t.u_translation),u_ratio:new s.bq(x,t.u_ratio),u_device_pixel_ratio:new s.bq(x,t.u_device_pixel_ratio),u_units_to_pixels:new s.c3(x,t.u_units_to_pixels)}),lineGradient:(x,t)=>({u_translation:new s.c3(x,t.u_translation),u_ratio:new s.bq(x,t.u_ratio),u_device_pixel_ratio:new s.bq(x,t.u_device_pixel_ratio),u_units_to_pixels:new s.c3(x,t.u_units_to_pixels),u_image:new s.b_(x,t.u_image),u_image_height:new s.bq(x,t.u_image_height)}),linePattern:(x,t)=>({u_translation:new s.c3(x,t.u_translation),u_texsize:new s.c3(x,t.u_texsize),u_ratio:new s.bq(x,t.u_ratio),u_device_pixel_ratio:new s.bq(x,t.u_device_pixel_ratio),u_image:new s.b_(x,t.u_image),u_units_to_pixels:new s.c3(x,t.u_units_to_pixels),u_scale:new s.c2(x,t.u_scale),u_fade:new s.bq(x,t.u_fade)}),lineSDF:(x,t)=>({u_translation:new s.c3(x,t.u_translation),u_ratio:new s.bq(x,t.u_ratio),u_device_pixel_ratio:new s.bq(x,t.u_device_pixel_ratio),u_units_to_pixels:new s.c3(x,t.u_units_to_pixels),u_image:new s.b_(x,t.u_image),u_mix:new s.bq(x,t.u_mix),u_tileratio:new s.bq(x,t.u_tileratio),u_crossfade_from:new s.bq(x,t.u_crossfade_from),u_crossfade_to:new s.bq(x,t.u_crossfade_to),u_lineatlas_width:new s.bq(x,t.u_lineatlas_width),u_lineatlas_height:new s.bq(x,t.u_lineatlas_height)}),lineGradientSDF:(x,t)=>({u_translation:new s.c3(x,t.u_translation),u_ratio:new s.bq(x,t.u_ratio),u_device_pixel_ratio:new s.bq(x,t.u_device_pixel_ratio),u_units_to_pixels:new s.c3(x,t.u_units_to_pixels),u_image:new s.b_(x,t.u_image),u_image_height:new s.bq(x,t.u_image_height),u_tileratio:new s.bq(x,t.u_tileratio),u_crossfade_from:new s.bq(x,t.u_crossfade_from),u_crossfade_to:new s.bq(x,t.u_crossfade_to),u_image_dash:new s.b_(x,t.u_image_dash),u_mix:new s.bq(x,t.u_mix),u_lineatlas_width:new s.bq(x,t.u_lineatlas_width),u_lineatlas_height:new s.bq(x,t.u_lineatlas_height)}),raster:(x,t)=>({u_tl_parent:new s.c3(x,t.u_tl_parent),u_scale_parent:new s.bq(x,t.u_scale_parent),u_buffer_scale:new s.bq(x,t.u_buffer_scale),u_fade_t:new s.bq(x,t.u_fade_t),u_opacity:new s.bq(x,t.u_opacity),u_image0:new s.b_(x,t.u_image0),u_image1:new s.b_(x,t.u_image1),u_brightness_low:new s.bq(x,t.u_brightness_low),u_brightness_high:new s.bq(x,t.u_brightness_high),u_saturation_factor:new s.bq(x,t.u_saturation_factor),u_contrast_factor:new s.bq(x,t.u_contrast_factor),u_spin_weights:new s.c2(x,t.u_spin_weights),u_coords_top:new s.c1(x,t.u_coords_top),u_coords_bottom:new s.c1(x,t.u_coords_bottom)}),symbolIcon:(x,t)=>({u_is_size_zoom_constant:new s.b_(x,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(x,t.u_is_size_feature_constant),u_size_t:new s.bq(x,t.u_size_t),u_size:new s.bq(x,t.u_size),u_camera_to_center_distance:new s.bq(x,t.u_camera_to_center_distance),u_pitch:new s.bq(x,t.u_pitch),u_rotate_symbol:new s.b_(x,t.u_rotate_symbol),u_aspect_ratio:new s.bq(x,t.u_aspect_ratio),u_fade_change:new s.bq(x,t.u_fade_change),u_label_plane_matrix:new s.c0(x,t.u_label_plane_matrix),u_coord_matrix:new s.c0(x,t.u_coord_matrix),u_is_text:new s.b_(x,t.u_is_text),u_pitch_with_map:new s.b_(x,t.u_pitch_with_map),u_is_along_line:new s.b_(x,t.u_is_along_line),u_is_variable_anchor:new s.b_(x,t.u_is_variable_anchor),u_texsize:new s.c3(x,t.u_texsize),u_texture:new s.b_(x,t.u_texture),u_translation:new s.c3(x,t.u_translation),u_pitched_scale:new s.bq(x,t.u_pitched_scale)}),symbolSDF:(x,t)=>({u_is_size_zoom_constant:new s.b_(x,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(x,t.u_is_size_feature_constant),u_size_t:new s.bq(x,t.u_size_t),u_size:new s.bq(x,t.u_size),u_camera_to_center_distance:new s.bq(x,t.u_camera_to_center_distance),u_pitch:new s.bq(x,t.u_pitch),u_rotate_symbol:new s.b_(x,t.u_rotate_symbol),u_aspect_ratio:new s.bq(x,t.u_aspect_ratio),u_fade_change:new s.bq(x,t.u_fade_change),u_label_plane_matrix:new s.c0(x,t.u_label_plane_matrix),u_coord_matrix:new s.c0(x,t.u_coord_matrix),u_is_text:new s.b_(x,t.u_is_text),u_pitch_with_map:new s.b_(x,t.u_pitch_with_map),u_is_along_line:new s.b_(x,t.u_is_along_line),u_is_variable_anchor:new s.b_(x,t.u_is_variable_anchor),u_texsize:new s.c3(x,t.u_texsize),u_texture:new s.b_(x,t.u_texture),u_gamma_scale:new s.bq(x,t.u_gamma_scale),u_device_pixel_ratio:new s.bq(x,t.u_device_pixel_ratio),u_is_halo:new s.b_(x,t.u_is_halo),u_translation:new s.c3(x,t.u_translation),u_pitched_scale:new s.bq(x,t.u_pitched_scale)}),symbolTextAndIcon:(x,t)=>({u_is_size_zoom_constant:new s.b_(x,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(x,t.u_is_size_feature_constant),u_size_t:new s.bq(x,t.u_size_t),u_size:new s.bq(x,t.u_size),u_camera_to_center_distance:new s.bq(x,t.u_camera_to_center_distance),u_pitch:new s.bq(x,t.u_pitch),u_rotate_symbol:new s.b_(x,t.u_rotate_symbol),u_aspect_ratio:new s.bq(x,t.u_aspect_ratio),u_fade_change:new s.bq(x,t.u_fade_change),u_label_plane_matrix:new s.c0(x,t.u_label_plane_matrix),u_coord_matrix:new s.c0(x,t.u_coord_matrix),u_is_text:new s.b_(x,t.u_is_text),u_pitch_with_map:new s.b_(x,t.u_pitch_with_map),u_is_along_line:new s.b_(x,t.u_is_along_line),u_is_variable_anchor:new s.b_(x,t.u_is_variable_anchor),u_texsize:new s.c3(x,t.u_texsize),u_texsize_icon:new s.c3(x,t.u_texsize_icon),u_texture:new s.b_(x,t.u_texture),u_texture_icon:new s.b_(x,t.u_texture_icon),u_gamma_scale:new s.bq(x,t.u_gamma_scale),u_device_pixel_ratio:new s.bq(x,t.u_device_pixel_ratio),u_is_halo:new s.b_(x,t.u_is_halo),u_translation:new s.c3(x,t.u_translation),u_pitched_scale:new s.bq(x,t.u_pitched_scale)}),background:(x,t)=>({u_opacity:new s.bq(x,t.u_opacity),u_color:new s.b$(x,t.u_color)}),backgroundPattern:(x,t)=>({u_opacity:new s.bq(x,t.u_opacity),u_image:new s.b_(x,t.u_image),u_pattern_tl_a:new s.c3(x,t.u_pattern_tl_a),u_pattern_br_a:new s.c3(x,t.u_pattern_br_a),u_pattern_tl_b:new s.c3(x,t.u_pattern_tl_b),u_pattern_br_b:new s.c3(x,t.u_pattern_br_b),u_texsize:new s.c3(x,t.u_texsize),u_mix:new s.bq(x,t.u_mix),u_pattern_size_a:new s.c3(x,t.u_pattern_size_a),u_pattern_size_b:new s.c3(x,t.u_pattern_size_b),u_scale_a:new s.bq(x,t.u_scale_a),u_scale_b:new s.bq(x,t.u_scale_b),u_pixel_coord_upper:new s.c3(x,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(x,t.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bq(x,t.u_tile_units_to_pixels)}),terrain:(x,t)=>({u_texture:new s.b_(x,t.u_texture),u_ele_delta:new s.bq(x,t.u_ele_delta),u_fog_matrix:new s.c0(x,t.u_fog_matrix),u_fog_color:new s.b$(x,t.u_fog_color),u_fog_ground_blend:new s.bq(x,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bq(x,t.u_fog_ground_blend_opacity),u_horizon_color:new s.b$(x,t.u_horizon_color),u_horizon_fog_blend:new s.bq(x,t.u_horizon_fog_blend),u_is_globe_mode:new s.bq(x,t.u_is_globe_mode)}),terrainDepth:(x,t)=>({u_ele_delta:new s.bq(x,t.u_ele_delta)}),terrainCoords:(x,t)=>({u_texture:new s.b_(x,t.u_texture),u_terrain_coords_id:new s.bq(x,t.u_terrain_coords_id),u_ele_delta:new s.bq(x,t.u_ele_delta)}),projectionErrorMeasurement:(x,t)=>({u_input:new s.bq(x,t.u_input),u_output_expected:new s.bq(x,t.u_output_expected)}),atmosphere:(x,t)=>({u_sun_pos:new s.c2(x,t.u_sun_pos),u_atmosphere_blend:new s.bq(x,t.u_atmosphere_blend),u_globe_position:new s.c2(x,t.u_globe_position),u_globe_radius:new s.bq(x,t.u_globe_radius),u_inv_proj_matrix:new s.c0(x,t.u_inv_proj_matrix)}),sky:(x,t)=>({u_sky_color:new s.b$(x,t.u_sky_color),u_horizon_color:new s.b$(x,t.u_horizon_color),u_horizon:new s.c3(x,t.u_horizon),u_horizon_normal:new s.c3(x,t.u_horizon_normal),u_sky_horizon_blend:new s.bq(x,t.u_sky_horizon_blend),u_sky_blend:new s.bq(x,t.u_sky_blend)})};class Iu{constructor(t,o,m){this.context=t;const _=t.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Du={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zu{constructor(t,o,m,_){this.length=o.length,this.attributes=m,this.itemSize=o.bytesPerElement,this.dynamicDraw=_,this.context=t;const w=t.gl;this.buffer=w.createBuffer(),t.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let m=0;m<this.attributes.length;m++){const _=o.attributes[this.attributes[m].name];_!==void 0&&t.enableVertexAttribArray(_)}}setVertexAttribPointers(t,o,m){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],T=o.attributes[w.name];T!==void 0&&t.vertexAttribPointer(T,w.components,t[Du[w.type]],!1,this.itemSize,w.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ni{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ca extends ni{getDefault(){return s.bp.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class es extends ni{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Zo extends ni{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Es extends ni{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ts extends ni{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class As extends ni{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Is extends ni{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class In extends ni{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Ru extends ni{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class is extends ni{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Wo extends ni{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class Dr extends ni{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Ho extends ni{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class va extends ni{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ds extends ni{getDefault(){return s.bp.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class mo extends ni{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class zs extends ni{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class Rs extends ni{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class fr extends ni{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Fs extends ni{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Ko extends ni{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class $t extends ni{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Yo extends ni{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Fu extends ni{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Al extends ni{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Os extends ni{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Ou extends ni{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ju extends ni{getDefault(){return null}set(t){var o;if(t===this.current&&!this.dirty)return;const m=this.gl;ha(m)?m.bindVertexArray(t):(o=m.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Bu extends ni{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class $u extends ni{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Xo extends ni{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class js extends ni{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class d extends js{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class b extends js{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class C extends js{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const F="Framebuffer is not complete";class q{constructor(t,o,m,_,w){this.context=t,this.width=o,this.height=m;const T=t.gl,E=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new d(t,E),_)this.depthAttachment=w?new C(t,E):new b(t,E);else if(w)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(F)}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const m=this.depthAttachment.get();m&&t.deleteRenderbuffer(m)}t.deleteFramebuffer(this.framebuffer)}}class ie{constructor(t){var o,m;if(this.gl=t,this.clearColor=new ca(this),this.clearDepth=new es(this),this.clearStencil=new Zo(this),this.colorMask=new Es(this),this.depthMask=new ts(this),this.stencilMask=new As(this),this.stencilFunc=new Is(this),this.stencilOp=new In(this),this.stencilTest=new Ru(this),this.depthRange=new is(this),this.depthTest=new Wo(this),this.depthFunc=new Dr(this),this.blend=new Ho(this),this.blendFunc=new va(this),this.blendColor=new Ds(this),this.blendEquation=new mo(this),this.cullFace=new zs(this),this.cullFaceSide=new Rs(this),this.frontFace=new fr(this),this.program=new Fs(this),this.activeTexture=new Ko(this),this.viewport=new $t(this),this.bindFramebuffer=new Yo(this),this.bindRenderbuffer=new Fu(this),this.bindTexture=new Al(this),this.bindVertexBuffer=new Os(this),this.bindElementBuffer=new Ou(this),this.bindVertexArray=new ju(this),this.pixelStoreUnpack=new Bu(this),this.pixelStoreUnpackPremultiplyAlpha=new $u(this),this.pixelStoreUnpackFlipY=new Xo(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),ha(t)){this.HALF_FLOAT=t.HALF_FLOAT;const _=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=t.RGBA16F)!==null&&o!==void 0?o:_?.RGBA16F_EXT,this.RGB16F=(m=t.RGB16F)!==null&&m!==void 0?m:_?.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const _=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new Iu(this,t,o)}createVertexBuffer(t,o,m){return new zu(this,t,o,m)}createRenderbuffer(t,o,m){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,t,o,m),this.bindRenderbuffer.set(null),w}createFramebuffer(t,o,m,_){return new q(this,t,o,m,_)}clear({color:t,depth:o,stencil:m}){const _=this.gl;let w=0;t&&(w|=_.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(w|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),m!==void 0&&(w|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),_.clear(w)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){s.bR(t.blendFunction,xi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return ha(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var o;return ha(this.gl)?this.gl.deleteVertexArray(t):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let be;function Ae(x,t,o,m,_){const w=x.context,T=x.transform,E=w.gl,I=x.useProgram("collisionBox"),R=[];let B=0,G=0;for(let ue=0;ue<m.length;ue++){const fe=m[ue],ye=t.getTile(fe).getBucket(o);if(!ye)continue;const de=_?ye.textCollisionBox:ye.iconCollisionBox,ge=ye.collisionCircleArray;ge.length>0&&(R.push({circleArray:ge,circleOffset:G,coord:fe}),B+=ge.length/4,G=B),de&&I.draw(w,E.LINES,zt.disabled,Yt.disabled,x.colorModeForRenderPass(),Nt.disabled,qa(x.transform),x.style.map.terrain&&x.style.map.terrain.getTerrainData(fe),T.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,null,x.transform.zoom,null,null,de.collisionVertexBuffer)}if(!_||!R.length)return;const U=x.useProgram("collisionCircle"),K=new s.ca;K.resize(4*B),K._trim();let ee=0;for(const ue of R)for(let fe=0;fe<ue.circleArray.length/4;fe++){const ye=4*fe,de=ue.circleArray[ye+0],ge=ue.circleArray[ye+1],ke=ue.circleArray[ye+2],me=ue.circleArray[ye+3];K.emplace(ee++,de,ge,ke,me,0),K.emplace(ee++,de,ge,ke,me,1),K.emplace(ee++,de,ge,ke,me,2),K.emplace(ee++,de,ge,ke,me,3)}(!be||be.length<2*B)&&(be=(function(ue){const fe=2*ue,ye=new s.cc;ye.resize(fe),ye._trim();for(let de=0;de<fe;de++){const ge=6*de;ye.uint16[ge+0]=4*de+0,ye.uint16[ge+1]=4*de+1,ye.uint16[ge+2]=4*de+2,ye.uint16[ge+3]=4*de+2,ye.uint16[ge+4]=4*de+3,ye.uint16[ge+5]=4*de+0}return ye})(B));const le=w.createIndexBuffer(be,!0),he=w.createVertexBuffer(K,s.cb.members,!0);for(const ue of R){const fe=Cu(x.transform);U.draw(w,E.TRIANGLES,zt.disabled,Yt.disabled,x.colorModeForRenderPass(),Nt.disabled,fe,x.style.map.terrain&&x.style.map.terrain.getTerrainData(ue.coord),null,o.id,he,le,s.aX.simpleSegment(0,2*ue.circleOffset,ue.circleArray.length,ue.circleArray.length/2),null,x.transform.zoom,null,null,null)}he.destroy(),le.destroy()}const Ne=s.ar(new Float32Array(16));function Qe(x,t,o,m,_,w){const{horizontalAlign:T,verticalAlign:E}=s.aS(x);return new s.P((-(T-.5)*t/_+m[0])*w,(-(E-.5)*o/_+m[1])*w)}function pt(x,t,o,m,_,w){const T=t.tileAnchorPoint.add(new s.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let E=m.mult(w);o||(E=E.rotate(-_));const I=T.add(E);return Rt(I.x,I.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(o){const E=ui(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(x),I=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return x.add(m.rotate(I))}return x.add(m)}function At(x,t,o,m,_,w,T,E,I,R,B,G){const U=x.text.placedSymbolArray,K=x.text.dynamicLayoutVertexArray,ee=x.icon.dynamicLayoutVertexArray,le={};K.clear();for(let he=0;he<U.length;he++){const ue=U.get(he),fe=ue.hidden||!ue.crossTileID||x.allowVerticalPlacement&&!ue.placedOrientation?null:m[ue.crossTileID];if(fe){const ye=new s.P(ue.anchorX,ue.anchorY),de={getElevation:G,width:_.width,height:_.height,pitchedLabelPlaneMatrix:w,pitchWithMap:o,transform:_,tileAnchorPoint:ye,translation:R,unwrappedTileID:B},ge=o?Va(ye.x,ye.y,de):ui(ye.x,ye.y,de),ke=Qs(_.cameraToCenterDistance,ge.signedDistanceFromCamera);let me=s.aA(x.textSizeData,E,ue)*ke/s.aM;o&&(me*=x.tilePixelRatio/T);const{width:Me,height:$e,anchor:ze,textOffset:Re,textBoxScale:Oe}=fe,tt=Qe(ze,Me,$e,Re,Oe,me),it=_.getPitchedTextCorrection(ye.x+R[0],ye.y+R[1],B),Ke=pt(ge.point,de,t,tt,-_.bearingInRadians,it),rt=x.allowVerticalPlacement&&ue.placedOrientation===s.az.vertical?Math.PI/2:0;for(let Dt=0;Dt<ue.numGlyphs;Dt++)s.aG(K,Ke,rt);I&&ue.associatedIconIndex>=0&&(le[ue.associatedIconIndex]={shiftedAnchor:Ke,angle:rt})}else ci(ue.numGlyphs,K)}if(I){ee.clear();const he=x.icon.placedSymbolArray;for(let ue=0;ue<he.length;ue++){const fe=he.get(ue);if(fe.hidden)ci(fe.numGlyphs,ee);else{const ye=le[ue];if(ye)for(let de=0;de<fe.numGlyphs;de++)s.aG(ee,ye.shiftedAnchor,ye.angle);else ci(fe.numGlyphs,ee)}}x.icon.dynamicLayoutVertexBuffer.updateData(ee)}x.text.dynamicLayoutVertexBuffer.updateData(K)}function qt(x,t,o){return o.iconsInText&&t?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function cn(x,t,o,m,_,w,T,E,I,R,B,G,U){const K=x.context,ee=K.gl,le=x.transform,he=E==="map",ue=I==="map",fe=E!=="viewport"&&o.layout.get("symbol-placement")!=="point",ye=he&&!ue&&!fe,de=!o.layout.get("symbol-sort-key").isConstant();let ge=!1;const ke=x.getDepthModeForSublayer(0,zt.ReadOnly),me=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Me=[],$e=le.getCircleRadiusCorrection();for(const ze of m){const Re=t.getTile(ze),Oe=Re.getBucket(o);if(!Oe)continue;const tt=_?Oe.text:Oe.icon;if(!tt||!tt.segments.get().length||!tt.hasVisibleVertices)continue;const it=tt.programConfigurations.get(o.id),Ke=_||Oe.sdfIcons,rt=_?Oe.textSizeData:Oe.iconSizeData,Dt=ue||le.pitch!==0,pi=x.useProgram(qt(Ke,_,Oe),it),zi=s.ay(rt,le.zoom),Ti=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ze);let Bi,Pi,Qi,$i,zn=[0,0],fn=null;if(_)Pi=Re.glyphAtlasTexture,Qi=ee.LINEAR,Bi=Re.glyphAtlasTexture.size,Oe.iconsInText&&(zn=Re.imageAtlasTexture.size,fn=Re.imageAtlasTexture,$i=Dt||x.options.rotating||x.options.zooming||rt.kind==="composite"||rt.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const Li=o.layout.get("icon-size").constantOr(0)!==1||Oe.iconsNeedLinear;Pi=Re.imageAtlasTexture,Qi=Ke||x.options.rotating||x.options.zooming||Li||Dt?ee.LINEAR:ee.NEAREST,Bi=Re.imageAtlasTexture.size}const on=s.aN(Re,1,x.transform.zoom),Zn=Xn(he,x.transform,on),Ns=s.N();s.aB(Ns,Zn);const ss=Fo(ue,he,x.transform,on),Fr=s.aO(le,Re,w,T),xa=le.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),xo=me&&Oe.hasTextData(),Hl=o.layout.get("icon-text-fit")!=="none"&&xo&&Oe.hasIconData();if(fe){const Li=x.style.map.terrain?(Tn,Pn)=>x.style.map.terrain.getElevation(ze,Tn,Pn):null,Mi=o.layout.get("text-rotation-alignment")==="map";Oo(Oe,x,_,Zn,Ns,ue,R,Mi,ze.toUnwrapped(),le.width,le.height,Fr,Li)}const bo=_&&me||Hl,Xa=fe||bo?Ne:ue?Zn:x.transform.clipSpaceToPixelsMatrix,Or=Ke&&o.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vr;vr=Ke?Oe.iconsInText?cr(rt.kind,zi,ye,ue,fe,bo,x,Xa,ss,Fr,Bi,zn,$e):Qr(rt.kind,zi,ye,ue,fe,bo,x,Xa,ss,Fr,_,Bi,0,$e):Ir(rt.kind,zi,ye,ue,fe,bo,x,Xa,ss,Fr,_,Bi,$e);const xr={program:pi,buffers:tt,uniformValues:vr,projectionData:xa,atlasTexture:Pi,atlasTextureIcon:fn,atlasInterpolation:Qi,atlasInterpolationIcon:$i,isSDF:Ke,hasHalo:Or};if(de&&Oe.canOverlap){ge=!0;const Li=tt.segments.get();for(const Mi of Li)Me.push({segments:new s.aX([Mi]),sortKey:Mi.sortKey,state:xr,terrainData:Ti})}else Me.push({segments:tt.segments,sortKey:0,state:xr,terrainData:Ti})}ge&&Me.sort(((ze,Re)=>ze.sortKey-Re.sortKey));for(const ze of Me){const Re=ze.state;if(K.activeTexture.set(ee.TEXTURE0),Re.atlasTexture.bind(Re.atlasInterpolation,ee.CLAMP_TO_EDGE),Re.atlasTextureIcon&&(K.activeTexture.set(ee.TEXTURE1),Re.atlasTextureIcon&&Re.atlasTextureIcon.bind(Re.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Re.isSDF){const Oe=Re.uniformValues;Re.hasHalo&&(Oe.u_is_halo=1,Ji(Re.buffers,ze.segments,o,x,Re.program,ke,B,G,Oe,Re.projectionData,ze.terrainData)),Oe.u_is_halo=0}Ji(Re.buffers,ze.segments,o,x,Re.program,ke,B,G,Re.uniformValues,Re.projectionData,ze.terrainData)}}function Ji(x,t,o,m,_,w,T,E,I,R,B){const G=m.context;_.draw(G,G.gl.TRIANGLES,w,T,E,Nt.backCCW,I,B,R,o.id,x.layoutVertexBuffer,x.indexBuffer,t,o.paint,m.transform.zoom,x.programConfigurations.get(o.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function fa(x,t,o,m,_){const w=x.context,T=w.gl,E=Yt.disabled,I=new xi([T.ONE,T.ONE],s.bp.transparent,[!0,!0,!0,!0]),R=t.getBucket(o);if(!R)return;const B=m.key;let G=o.heatmapFbos.get(B);G||(G=Ha(w,t.tileSize,t.tileSize),o.heatmapFbos.set(B,G)),w.bindFramebuffer.set(G.framebuffer),w.viewport.set([0,0,t.tileSize,t.tileSize]),w.clear({color:s.bp.transparent});const U=R.programConfigurations.get(o.id),K=x.useProgram("heatmap",U,!_),ee=x.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),le=x.style.map.terrain.getTerrainData(m);K.draw(w,T.TRIANGLES,zt.disabled,E,I,Nt.disabled,hr(t,x.transform.zoom,o.paint.get("heatmap-intensity"),1),le,ee,o.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,o.paint,x.transform.zoom,U)}function qn(x,t,o,m,_){const w=x.context,T=w.gl,E=x.transform;w.setColorMode(x.colorModeForRenderPass());const I=Jo(w,t),R=o.key,B=t.heatmapFbos.get(R);if(!B)return;w.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,B.colorAttachment.get()),w.activeTexture.set(T.TEXTURE1),I.bind(T.LINEAR,T.CLAMP_TO_EDGE);const G=E.getProjectionData({overscaledTileID:o,applyTerrainMatrix:_,applyGlobeMatrix:!m});x.useProgram("heatmapTexture").draw(w,T.TRIANGLES,zt.disabled,Yt.disabled,x.colorModeForRenderPass(),Nt.disabled,Lu(x,t,0,1),null,G,t.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments,t.paint,E.zoom),B.destroy(),t.heatmapFbos.delete(R)}function Ha(x,t,o){var m,_;const w=x.gl,T=w.createTexture();w.bindTexture(w.TEXTURE_2D,T),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);const E=(m=x.HALF_FLOAT)!==null&&m!==void 0?m:w.UNSIGNED_BYTE,I=(_=x.RGBA16F)!==null&&_!==void 0?_:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,I,t,o,0,w.RGBA,E,null);const R=x.createFramebuffer(t,o,!1,!1);return R.colorAttachment.set(T),R}function Jo(x,t){return t.colorRampTexture||(t.colorRampTexture=new s.T(x,t.colorRamp,x.gl.RGBA)),t.colorRampTexture}function Vu(x,t,o,m,_,w,T,E){let I=256;if(_.stepInterpolant){const R=t.getSource().maxzoom,B=T.canonical.z===R?Math.ceil(1<<x.transform.maxZoom-T.canonical.z):1;I=s.an(s.ce(w.maxLineLength/s.a5*1024*B),256,o.maxTextureSize)}return E.gradient=s.cf({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:I,image:E.gradient||void 0,clips:w.lineClipsArray}),E.texture?E.texture.update(E.gradient):E.texture=new s.T(o,E.gradient,m.RGBA),E.version=_.gradientVersion,E.texture}function Nu(x,t,o,m,_){x.activeTexture.set(t.TEXTURE0),o.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),m.updatePaintBuffers(_)}function Oi(x,t,o,m,_,w){(_||x.lineAtlas.dirty)&&(t.activeTexture.set(o.TEXTURE0),x.lineAtlas.bind(t)),m.updatePaintBuffers(w)}function ns(x,t,o,m,_,w,T){const E=w.gradients[_.id];let I=E.texture;_.gradientVersion!==E.version&&(I=Vu(x,t,o,m,_,w,T,E)),o.activeTexture.set(m.TEXTURE0),I.bind(_.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}function ta(x,t,o,m,_,w,T,E,I){const R=w.gradients[_.id];let B=R.texture;_.gradientVersion!==R.version&&(B=Vu(x,t,o,m,_,w,T,R)),o.activeTexture.set(m.TEXTURE0),B.bind(_.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE),o.activeTexture.set(m.TEXTURE1),x.lineAtlas.bind(o),E.updatePaintBuffers(I)}function ji(x,t,o,m,_){if(!o||!m||!m.imageAtlas)return;const w=m.imageAtlas.patternPositions;let T=w[o.to.toString()],E=w[o.from.toString()];if(!T&&E&&(T=E),!E&&T&&(E=T),!T||!E){const I=_.getPaintProperty(t);T=w[I],E=w[I]}T&&E&&x.setConstantPatternPositions(T,E)}function zr(x,t,o,m,_,w,T,E){const I=x.context.gl,R="fill-pattern",B=o.paint.get(R),G=B&&B.constantOr(1),U=o.getCrossfadeParameters();let K,ee,le,he,ue;const fe=x.transform,ye=o.paint.get("fill-translate"),de=o.paint.get("fill-translate-anchor");T?(ee=G&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=I.LINES):(ee=G?"fillPattern":"fill",K=I.TRIANGLES);const ge=B.constantOr(null);for(const ke of m){const me=t.getTile(ke);if(G&&!me.patternsLoaded())continue;const Me=me.getBucket(o);if(!Me)continue;const $e=Me.programConfigurations.get(o.id),ze=x.useProgram(ee,$e),Re=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ke);G&&(x.context.activeTexture.set(I.TEXTURE0),me.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),$e.updatePaintBuffers(U)),ji($e,R,ge,me,o);const Oe=fe.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!E,applyTerrainMatrix:!0}),tt=s.aO(fe,me,ye,de);if(T){he=Me.indexBuffer2,ue=Me.segments2;const Ke=[I.drawingBufferWidth,I.drawingBufferHeight];le=ee==="fillOutlinePattern"&&G?Ms(x,U,me,Ke,tt):Mu(Ke,tt)}else he=Me.indexBuffer,ue=Me.segments,le=G?Ar(x,U,me,tt):{u_fill_translate:tt};const it=x.stencilModeForClipping(ke);ze.draw(x.context,K,_,it,w,Nt.backCCW,le,Re,Oe,o.id,Me.layoutVertexBuffer,he,ue,o.paint,x.transform.zoom,$e)}}function Qo(x,t,o,m,_,w,T,E){const I=x.context,R=I.gl,B="fill-extrusion-pattern",G=o.paint.get(B),U=G.constantOr(1),K=o.getCrossfadeParameters(),ee=o.paint.get("fill-extrusion-opacity"),le=G.constantOr(null),he=x.transform;for(const ue of m){const fe=t.getTile(ue),ye=fe.getBucket(o);if(!ye)continue;const de=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ue),ge=ye.programConfigurations.get(o.id),ke=x.useProgram(U?"fillExtrusionPattern":"fillExtrusion",ge);U&&(x.context.activeTexture.set(R.TEXTURE0),fe.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),ge.updatePaintBuffers(K));const me=he.getProjectionData({overscaledTileID:ue,applyGlobeMatrix:!E,applyTerrainMatrix:!0});ji(ge,B,le,fe,o);const Me=s.aO(he,fe,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),$e=o.paint.get("fill-extrusion-vertical-gradient"),ze=U?Ll(x,$e,ee,Me,ue,K,fe):Da(x,$e,ee,Me);ke.draw(I,I.gl.TRIANGLES,_,w,T,Nt.backCCW,ze,de,me,o.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,o.paint,x.transform.zoom,ge,x.style.map.terrain&&ye.centroidVertexBuffer)}}function Rr(x,t,o,m,_,w,T,E,I){var R;const B=x.style.projection,G=x.context,U=x.transform,K=G.gl,ee=[`#define NUM_ILLUMINATION_SOURCES ${o.paint.get("hillshade-highlight-color").values.length}`],le=x.useProgram("hillshade",null,!1,ee),he=!x.options.moving;for(const ue of m){const fe=t.getTile(ue),ye=fe.fbo;if(!ye)continue;const de=B.getMeshFromTileID(G,ue.canonical,E,!0,"raster"),ge=(R=x.style.map.terrain)===null||R===void 0?void 0:R.getTerrainData(ue);G.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ye.colorAttachment.get());const ke=U.getProjectionData({overscaledTileID:ue,aligned:he,applyGlobeMatrix:!I,applyTerrainMatrix:!0});le.draw(G,K.TRIANGLES,w,_[ue.overscaledZ],T,Nt.backCCW,Cs(x,fe,o),ge,ke,o.id,de.vertexBuffer,de.indexBuffer,de.segments)}}function go(x,t,o,m,_,w,T,E,I){var R;const B=x.style.projection,G=x.context,U=x.transform,K=G.gl,ee=x.useProgram("colorRelief"),le=!x.options.moving;let he=!0,ue=0;for(const fe of m){const ye=t.getTile(fe),de=ye.dem;if(he){const ze=K.getParameter(K.MAX_TEXTURE_SIZE),{elevationTexture:Re,colorTexture:Oe}=o.getColorRampTextures(G,ze,de.getUnpackVector());G.activeTexture.set(K.TEXTURE1),Re.bind(K.NEAREST,K.CLAMP_TO_EDGE),G.activeTexture.set(K.TEXTURE4),Oe.bind(K.LINEAR,K.CLAMP_TO_EDGE),he=!1,ue=Re.size[0]}if(!de||!de.data)continue;const ge=de.stride,ke=de.getPixels();if(G.activeTexture.set(K.TEXTURE0),G.pixelStoreUnpackPremultiplyAlpha.set(!1),ye.demTexture=ye.demTexture||x.getTileTexture(ge),ye.demTexture){const ze=ye.demTexture;ze.update(ke,{premultiply:!1}),ze.bind(K.LINEAR,K.CLAMP_TO_EDGE)}else ye.demTexture=new s.T(G,ke,K.RGBA,{premultiply:!1}),ye.demTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const me=B.getMeshFromTileID(G,fe.canonical,E,!0,"raster"),Me=(R=x.style.map.terrain)===null||R===void 0?void 0:R.getTerrainData(fe),$e=U.getProjectionData({overscaledTileID:fe,aligned:le,applyGlobeMatrix:!I,applyTerrainMatrix:!0});ee.draw(G,K.TRIANGLES,w,_[fe.overscaledZ],T,Nt.backCCW,Eu(o,ye.dem,ue),Me,$e,o.id,me.vertexBuffer,me.indexBuffer,me.segments)}}const pr=[new s.P(0,0),new s.P(s.a5,0),new s.P(s.a5,s.a5),new s.P(0,s.a5)];function as(x,t,o,m,_,w,T,E,I=!1,R=!1){const B=m[m.length-1].overscaledZ,G=x.context,U=G.gl,K=x.useProgram("raster"),ee=x.transform,le=x.style.projection,he=x.colorModeForRenderPass(),ue=!x.options.moving,fe=o.paint.get("raster-opacity"),ye=o.paint.get("raster-resampling"),de=o.paint.get("raster-fade-duration"),ge=!!x.style.map.terrain;for(const ke of m){const me=x.getDepthModeForSublayer(ke.overscaledZ-B,fe===1?zt.ReadWrite:zt.ReadOnly,U.LESS),Me=t.getTile(ke),$e=ye==="nearest"?U.NEAREST:U.LINEAR;G.activeTexture.set(U.TEXTURE0),Me.texture.bind($e,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(U.TEXTURE1);const{parentTile:ze,parentScaleBy:Re,parentTopLeft:Oe,fadeValues:tt}=Uu(Me,t,de,ge);Me.fadeOpacity=tt.tileOpacity,ze?(ze.fadeOpacity=tt.parentTileOpacity,ze.texture.bind($e,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST)):Me.texture.bind($e,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),Me.texture.useMipmap&&G.extTextureFilterAnisotropic&&x.transform.pitch>20&&U.texParameterf(U.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax);const it=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ke),Ke=ee.getProjectionData({overscaledTileID:ke,aligned:ue,applyGlobeMatrix:!R,applyTerrainMatrix:!0}),rt=fo(Oe,Re,tt.fadeMix,o,E),Dt=le.getMeshFromTileID(G,ke.canonical,w,T,"raster");K.draw(G,U.TRIANGLES,me,_?_[ke.overscaledZ]:Yt.disabled,he,I?Nt.frontCCW:Nt.backCCW,rt,it,Ke,o.id,Dt.vertexBuffer,Dt.indexBuffer,Dt.segments)}}function Uu(x,t,o,m){const _={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(o===0||m)return _;if(x.fadingParentID){const w=t.getLoadedTile(x.fadingParentID);if(!w)return _;const T=Math.pow(2,w.tileID.overscaledZ-x.tileID.overscaledZ),E=[x.tileID.canonical.x*T%1,x.tileID.canonical.y*T%1],I=(function(R,B,G){const U=ae(),K=(U-B.timeAdded)/G,ee=R.fadingDirection===Fe.Incoming,le=s.an((U-R.timeAdded)/G,0,1),he=s.an(1-K,0,1),ue=ee?le:he;return{tileOpacity:ue,parentTileOpacity:ee?he:le,fadeMix:{opacity:1,mix:1-ue}}})(x,w,o);return{parentTile:w,parentScaleBy:T,parentTopLeft:E,fadeValues:I}}if(x.selfFading){const w=(function(T,E){const I=(ae()-T.timeAdded)/E,R=s.an(I,0,1);return{tileOpacity:R,fadeMix:{opacity:R,mix:0}}})(x,o);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:w}}return _}const oc=new s.bp(1,0,0,1),lc=new s.bp(0,1,0,1),uc=new s.bp(0,0,1,1),hc=new s.bp(1,0,1,1),Bs=new s.bp(0,1,1,1);function Vh(x,t,o,m){Il(x,0,t+o/2,x.transform.width,o,m)}function Nh(x,t,o,m){Il(x,t-o/2,0,o,x.transform.height,m)}function Il(x,t,o,m,_,w){const T=x.context,E=T.gl;E.enable(E.SCISSOR_TEST),E.scissor(t*x.pixelRatio,o*x.pixelRatio,m*x.pixelRatio,_*x.pixelRatio),T.clear({color:w}),E.disable(E.SCISSOR_TEST)}function dc(x,t,o){const m=x.context,_=m.gl,w=x.useProgram("debug"),T=zt.disabled,E=Yt.disabled,I=x.colorModeForRenderPass(),R="$debug",B=x.style.map.terrain&&x.style.map.terrain.getTerrainData(o);m.activeTexture.set(_.TEXTURE0);const G=t.getTileByID(o.key).latestRawTileData,U=Math.floor((G&&G.byteLength||0)/1024),K=t.getTile(o).tileSize,ee=512/Math.min(K,512)*(o.overscaledZ/x.transform.zoom)*.5;let le=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(le+=` => ${o.overscaledZ}`),(function(ue,fe){ue.initDebugOverlayCanvas();const ye=ue.debugOverlayCanvas,de=ue.context.gl,ge=ue.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,ye.width,ye.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(fe,5,5),ge.strokeText(fe,5,5),ue.debugOverlayTexture.update(ye),ue.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)})(x,`${le} ${U}kB`);const he=x.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(m,_.TRIANGLES,T,E,xi.alphaBlended,Nt.disabled,Za(s.bp.transparent,ee),null,he,R,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),w.draw(m,_.LINE_STRIP,T,E,I,Nt.disabled,Za(s.bp.red),B,he,R,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function Uh(x,t,o,m){const{isRenderingGlobe:_}=m,w=x.context,T=w.gl,E=x.transform,I=x.colorModeForRenderPass(),R=x.getDepthModeFor3D(),B=x.useProgram("terrain");w.bindFramebuffer.set(null),w.viewport.set([0,0,x.width,x.height]);for(const G of o){const U=t.getTerrainMesh(G.tileID),K=x.renderToTexture.getTexture(G),ee=t.getTerrainData(G.tileID);w.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,K.texture);const le=t.getMeshFrameDelta(E.zoom),he=E.calculateFogMatrix(G.tileID.toUnwrapped()),ue=Tu(le,he,x.style.sky,E.pitch,_),fe=E.getProjectionData({overscaledTileID:G.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(w,T.TRIANGLES,R,Yt.disabled,I,Nt.backCCW,ue,ee,fe,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}}function Gh(x,t){if(!t.mesh){const o=new s.aW;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const m=new s.aY;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),t.mesh=new fi(x.createVertexBuffer(o,Ua.members),x.createIndexBuffer(m),s.aX.simpleSegment(0,0,o.length,m.length))}return t.mesh}class cc{constructor(t,o){this.context=new ie(t),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=la.maxOverzooming+la.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jn}resize(t,o,m){if(this.width=Math.floor(t*m),this.height=Math.floor(o*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const t=this.context,o=new s.aW;o.emplaceBack(0,0),o.emplaceBack(s.a5,0),o.emplaceBack(0,s.a5),o.emplaceBack(s.a5,s.a5),this.tileExtentBuffer=t.createVertexBuffer(o,Ua.members),this.tileExtentSegments=s.aX.simpleSegment(0,0,4,2);const m=new s.aW;m.emplaceBack(0,0),m.emplaceBack(s.a5,0),m.emplaceBack(0,s.a5),m.emplaceBack(s.a5,s.a5),this.debugBuffer=t.createVertexBuffer(m,Ua.members),this.debugSegments=s.aX.simpleSegment(0,0,4,5);const _=new s.ch;_.emplaceBack(0,0,0,0),_.emplaceBack(s.a5,0,s.a5,0),_.emplaceBack(0,s.a5,0,s.a5),_.emplaceBack(s.a5,s.a5,s.a5,s.a5),this.rasterBoundsBuffer=t.createVertexBuffer(_,Oh.members),this.rasterBoundsSegments=s.aX.simpleSegment(0,0,4,2);const w=new s.aW;w.emplaceBack(0,0),w.emplaceBack(s.a5,0),w.emplaceBack(0,s.a5),w.emplaceBack(s.a5,s.a5),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(w,Ua.members),this.rasterBoundsSegmentsPosOnly=s.aX.simpleSegment(0,0,4,5);const T=new s.aW;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(T,Ua.members),this.viewportSegments=s.aX.simpleSegment(0,0,4,2);const E=new s.ci;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(E);const I=new s.aY;I.emplaceBack(1,0,2),I.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(I);const R=this.context.gl;this.stencilClearMode=new Yt({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO),this.tileExtentMesh=new fi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=s.N();s.c7(m,0,this.width,this.height,0,0,1),s.Q(m,m,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const _={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(t,o.TRIANGLES,zt.disabled,this.stencilClearMode,xi.disabled,Nt.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,o,m){if(this.currentStencilSource===t.source||!t.isTileClipped()||!o||!o.length)return;this.currentStencilSource=t.source,this.nextStencilID+o.length>256&&this.clearStencil();const _=this.context;_.setColorMode(xi.disabled),_.setDepthMode(zt.disabled);const w={};for(const T of o)w[T.key]=this.nextStencilID++;this._renderTileMasks(w,o,m,!0),this._renderTileMasks(w,o,m,!1),this._tileClippingMaskIDs=w}_renderTileMasks(t,o,m,_){const w=this.context,T=w.gl,E=this.style.projection,I=this.transform,R=this.useProgram("clippingMask");for(const B of o){const G=t[B.key],U=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),K=E.getMeshFromTileID(this.context,B.canonical,_,!0,"stencil"),ee=I.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!m,applyTerrainMatrix:!0});R.draw(w,T.TRIANGLES,zt.disabled,new Yt({func:T.ALWAYS,mask:0},G,255,T.KEEP,T.KEEP,T.REPLACE),xi.disabled,m?Nt.disabled:Nt.backCCW,null,U,ee,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){const t=this.context,o=t.gl,m=this.style.projection,_=this.transform,w=this.useProgram("depth"),T=this.getDepthModeFor3D(),E=Fi(_,{tileSize:_.tileSize});for(const I of E){const R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I),B=m.getMeshFromTileID(this.context,I.canonical,!0,!0,"raster"),G=_.getProjectionData({overscaledTileID:I,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(t,o.TRIANGLES,T,Yt.disabled,xi.disabled,Nt.backCCW,null,R,G,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new Yt({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){const o=this.context.gl;return new Yt({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const o=this.context.gl,m=t.sort(((T,E)=>E.overscaledZ-T.overscaledZ)),_=m[m.length-1].overscaledZ,w=m[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const T={};for(let E=0;E<w;E++)T[E+_]=new Yt({func:o.GEQUAL,mask:255},E+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=w,[T,m]}return[{[_]:Yt.disabled},m]}stencilConfigForOverlapTwoPass(t){const o=this.context.gl,m=t.sort(((T,E)=>E.overscaledZ-T.overscaledZ)),_=m[m.length-1].overscaledZ,w=m[0].overscaledZ-_+1;if(this.clearStencil(),w>1){const T={},E={};for(let I=0;I<w;I++)T[I+_]=new Yt({func:o.GREATER,mask:255},w+1+I,255,o.KEEP,o.KEEP,o.REPLACE),E[I+_]=new Yt({func:o.GREATER,mask:255},1+I,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*w+1,[T,E,m]}return this.nextStencilID=3,[{[_]:new Yt({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[_]:new Yt({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},m]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new xi([t.CONSTANT_COLOR,t.ONE],new s.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xi.unblended:xi.alphaBlended}getDepthModeForSublayer(t,o,m){if(!this.opaquePassEnabledForLayer())return zt.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new zt(m||this.context.gl.LEQUAL,o,[_,_])}getDepthModeFor3D(){return new zt(this.context.gl.LEQUAL,zt.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){var m,_;this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(ae()),this.imageManager.beginFrame();const w=this.style._order,T=this.style.tileManagers,E={},I={},R={},B={isRenderingToTexture:!1,isRenderingGlobe:((m=t.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const U in T){const K=T[U];K.used&&K.prepare(this.context),E[U]=K.getVisibleCoordinates(!1),I[U]=E[U].slice().reverse(),R[U]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let U=0;U<w.length;U++)if(this.style._layers[w[U]].is3D()){this.opaquePassCutoff=U;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const U of w){const K=this.style._layers[U];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const ee=I[K.source];(K.type==="custom"||ee.length)&&this.renderLayer(this,T[K.source],K,ee,B)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:U=>this.useProgram(U)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?s.bp.black:s.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(U,K){const ee=U.context,le=ee.gl,he=((ke,me,Me)=>{const $e=Math.cos(me.rollInRadians),ze=Math.sin(me.rollInRadians),Re=oi(me),Oe=me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ke.properties.get("sky-color"),u_horizon_color:ke.properties.get("horizon-color"),u_horizon:[(me.width/2-Re*ze)*Me,(me.height/2+Re*$e)*Me],u_horizon_normal:[-ze,$e],u_sky_horizon_blend:ke.properties.get("sky-horizon-blend")*me.height/2*Me,u_sky_blend:Oe}})(K,U.style.map.transform,U.pixelRatio),ue=new zt(le.LEQUAL,zt.ReadWrite,[0,1]),fe=Yt.disabled,ye=U.colorModeForRenderPass(),de=U.useProgram("sky"),ge=Gh(ee,K);de.draw(ee,le.TRIANGLES,ue,fe,ye,Nt.disabled,he,null,void 0,"sky",ge.vertexBuffer,ge.indexBuffer,ge.segments)})(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const U=this.style._layers[w[this.currentLayer]],K=T[U.source],ee=E[U.source];this._renderTileClippingMasks(U,ee,!1),this.renderLayer(this,K,U,ee,B)}this.renderPass="translucent";let G=!1;for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const U=this.style._layers[w[this.currentLayer]],K=T[U.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(U,B))continue;this.opaquePassEnabledForLayer()||G||(G=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ee=(U.type==="symbol"?R:I)[U.source];this._renderTileClippingMasks(U,E[U.source],!!this.renderToTexture),this.renderLayer(this,K,U,ee,B)}if(B.isRenderingGlobe&&(function(U,K,ee){const le=U.context,he=le.gl,ue=U.useProgram("atmosphere"),fe=new zt(he.LEQUAL,zt.ReadOnly,[0,1]),ye=U.transform,de=(function(Oe,tt){const it=Oe.properties.get("position"),Ke=[-it.x,-it.y,-it.z],rt=s.ar(new Float64Array(16));return Oe.properties.get("anchor")==="map"&&(s.bg(rt,rt,tt.rollInRadians),s.bh(rt,rt,-tt.pitchInRadians),s.bg(rt,rt,tt.bearingInRadians),s.bh(rt,rt,tt.center.lat*Math.PI/180),s.bJ(rt,rt,-tt.center.lng*Math.PI/180)),s.cg(Ke,Ke,rt),Ke})(ee,U.transform),ge=ye.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ke=K.properties.get("atmosphere-blend")*ge.projectionTransition;if(ke===0)return;const me=sr(ye.worldSize,ye.center.lat),Me=ye.inverseProjectionMatrix,$e=new Float64Array(4);$e[3]=1,s.aH($e,$e,ye.modelViewProjectionMatrix),$e[0]/=$e[3],$e[1]/=$e[3],$e[2]/=$e[3],$e[3]=1,s.aH($e,$e,Me),$e[0]/=$e[3],$e[1]/=$e[3],$e[2]/=$e[3],$e[3]=1;const ze=((Oe,tt,it,Ke,rt)=>({u_sun_pos:Oe,u_atmosphere_blend:tt,u_globe_position:it,u_globe_radius:Ke,u_inv_proj_matrix:rt}))(de,ke,[$e[0],$e[1],$e[2]],me,Me),Re=Gh(le,K);ue.draw(le,he.TRIANGLES,fe,Yt.disabled,xi.alphaBlended,Nt.disabled,ze,null,null,"atmosphere",Re.vertexBuffer,Re.indexBuffer,Re.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const U=(function(K,ee){let le=null;const he=Object.values(K._layers).flatMap((de=>de.source&&!de.isHidden(ee)?[K.tileManagers[de.source]]:[])),ue=he.filter((de=>de.getSource().type==="vector")),fe=he.filter((de=>de.getSource().type!=="vector")),ye=de=>{(!le||le.getSource().maxzoom<de.getSource().maxzoom)&&(le=de)};return ue.forEach((de=>ye(de))),le||fe.forEach((de=>ye(de))),le})(this.style,this.transform.zoom);U&&(function(K,ee,le){for(let he=0;he<le.length;he++)dc(K,ee,le[he])})(this,U,U.getVisibleCoordinates())}this.options.showPadding&&(function(U){const K=U.transform.padding;Vh(U,U.transform.height-(K.top||0),3,oc),Vh(U,K.bottom||0,3,lc),Nh(U,K.left||0,3,uc),Nh(U,U.transform.width-(K.right||0),3,hc);const ee=U.transform.centerPoint;(function(le,he,ue,fe){Il(le,he-1,ue-10,2,20,fe),Il(le,he-10,ue-1,20,2,fe)})(U,ee.x,U.transform.height-ee.y,Bs)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=t?!s.cj(o,m):!s.ck(o,m)),_||(_=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(s.cl(o,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(w,T){const E=w.context,I=E.gl,R=w.transform,B=xi.unblended,G=new zt(I.LEQUAL,zt.ReadWrite,[0,1]),U=T.tileManager.getRenderableTiles(),K=w.useProgram("terrainDepth");E.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),E.clear({color:s.bp.transparent,depth:1});for(const ee of U){const le=T.getTerrainMesh(ee.tileID),he=T.getTerrainData(ee.tileID),ue=R.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),fe={u_ele_delta:T.getMeshFrameDelta(R.zoom)};K.draw(E,I.TRIANGLES,G,Yt.disabled,B,Nt.backCCW,fe,he,ue,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,w.width,w.height])})(this,this.style.map.terrain),(function(w,T){const E=w.context,I=E.gl,R=w.transform,B=xi.unblended,G=new zt(I.LEQUAL,zt.ReadWrite,[0,1]),U=T.getCoordsTexture(),K=T.tileManager.getRenderableTiles(),ee=w.useProgram("terrainCoords");E.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),E.clear({color:s.bp.transparent,depth:1}),T.coordsIndex=[];for(const le of K){const he=T.getTerrainMesh(le.tileID),ue=T.getTerrainData(le.tileID);E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,U.texture);const fe={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(R.zoom)},ye=R.getProjectionData({overscaledTileID:le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ee.draw(E,I.TRIANGLES,G,Yt.disabled,B,Nt.backCCW,fe,ue,ye,"terrain",he.vertexBuffer,he.indexBuffer,he.segments),T.coordsIndex.push(le.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,w.width,w.height])})(this,this.style.map.terrain))}renderLayer(t,o,m,_,w){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(_||[]).length)&&(this.id=m.id,s.cm(m)?(function(T,E,I,R,B,G){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:U}=G,K=Yt.disabled,ee=T.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(le,he,ue,fe,ye,de,ge,ke,me){const Me=he.transform,$e=he.style.map.terrain,ze=ye==="map",Re=de==="map";for(const Oe of le){const tt=fe.getTile(Oe),it=tt.getBucket(ue);if(!it||!it.text||!it.text.segments.get().length)continue;const Ke=s.ay(it.textSizeData,Me.zoom),rt=s.aN(tt,1,he.transform.zoom),Dt=Xn(ze,he.transform,rt),pi=ue.layout.get("icon-text-fit")!=="none"&&it.hasIconData();if(Ke){const zi=Math.pow(2,Me.zoom-tt.tileID.overscaledZ),Ti=$e?(Bi,Pi)=>$e.getElevation(Oe,Bi,Pi):null;At(it,ze,Re,me,Me,Dt,zi,Ke,pi,s.aO(Me,tt,ge,ke),Oe.toUnwrapped(),Ti)}}})(R,T,I,E,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),B),I.paint.get("icon-opacity").constantOr(1)!==0&&cn(T,E,I,R,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),K,ee,U),I.paint.get("text-opacity").constantOr(1)!==0&&cn(T,E,I,R,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),K,ee,U),E.map.showCollisionBoxes&&(Ae(T,E,I,R,!0),Ae(T,E,I,R,!1))})(t,o,m,_,this.style.placement.variableOffsets,w):s.cn(m)?(function(T,E,I,R,B){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:G}=B,U=I.paint.get("circle-opacity"),K=I.paint.get("circle-stroke-width"),ee=I.paint.get("circle-stroke-opacity"),le=!I.layout.get("circle-sort-key").isConstant();if(U.constantOr(1)===0&&(K.constantOr(1)===0||ee.constantOr(1)===0))return;const he=T.context,ue=he.gl,fe=T.transform,ye=T.getDepthModeForSublayer(0,zt.ReadOnly),de=Yt.disabled,ge=T.colorModeForRenderPass(),ke=[],me=fe.getCircleRadiusCorrection();for(let Me=0;Me<R.length;Me++){const $e=R[Me],ze=E.getTile($e),Re=ze.getBucket(I);if(!Re)continue;const Oe=I.paint.get("circle-translate"),tt=I.paint.get("circle-translate-anchor"),it=s.aO(fe,ze,Oe,tt),Ke=Re.programConfigurations.get(I.id),rt=T.useProgram("circle",Ke),Dt=Re.layoutVertexBuffer,pi=Re.indexBuffer,zi=T.style.map.terrain&&T.style.map.terrain.getTerrainData($e),Ti={programConfiguration:Ke,program:rt,layoutVertexBuffer:Dt,indexBuffer:pi,uniformValues:El(T,ze,I,it,me),terrainData:zi,projectionData:fe.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!G,applyTerrainMatrix:!0})};if(le){const Bi=Re.segments.get();for(const Pi of Bi)ke.push({segments:new s.aX([Pi]),sortKey:Pi.sortKey,state:Ti})}else ke.push({segments:Re.segments,sortKey:0,state:Ti})}le&&ke.sort(((Me,$e)=>Me.sortKey-$e.sortKey));for(const Me of ke){const{programConfiguration:$e,program:ze,layoutVertexBuffer:Re,indexBuffer:Oe,uniformValues:tt,terrainData:it,projectionData:Ke}=Me.state;ze.draw(he,ue.TRIANGLES,ye,de,ge,Nt.backCCW,tt,it,Ke,I.id,Re,Oe,Me.segments,I.paint,T.transform.zoom,$e)}})(t,o,m,_,w):s.co(m)?(function(T,E,I,R,B){if(I.paint.get("heatmap-opacity")===0)return;const G=T.context,{isRenderingToTexture:U,isRenderingGlobe:K}=B;if(T.style.map.terrain){for(const ee of R){const le=E.getTile(ee);E.hasRenderableParent(ee)||(T.renderPass==="offscreen"?fa(T,le,I,ee,K):T.renderPass==="translucent"&&qn(T,I,ee,U,K))}G.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?(function(ee,le,he,ue){const fe=ee.context,ye=fe.gl,de=ee.transform,ge=Yt.disabled,ke=new xi([ye.ONE,ye.ONE],s.bp.transparent,[!0,!0,!0,!0]);(function(me,Me,$e){const ze=me.gl;me.activeTexture.set(ze.TEXTURE1),me.viewport.set([0,0,Me.width/4,Me.height/4]);let Re=$e.heatmapFbos.get(s.cd);Re?(ze.bindTexture(ze.TEXTURE_2D,Re.colorAttachment.get()),me.bindFramebuffer.set(Re.framebuffer)):(Re=Ha(me,Me.width/4,Me.height/4),$e.heatmapFbos.set(s.cd,Re))})(fe,ee,he),fe.clear({color:s.bp.transparent});for(let me=0;me<ue.length;me++){const Me=ue[me];if(le.hasRenderableParent(Me))continue;const $e=le.getTile(Me),ze=$e.getBucket(he);if(!ze)continue;const Re=ze.programConfigurations.get(he.id),Oe=ee.useProgram("heatmap",Re),tt=de.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),it=de.getCircleRadiusCorrection();Oe.draw(fe,ye.TRIANGLES,zt.disabled,ge,ke,Nt.backCCW,hr($e,de.zoom,he.paint.get("heatmap-intensity"),it),null,tt,he.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,he.paint,de.zoom,Re)}fe.viewport.set([0,0,ee.width,ee.height])})(T,E,I,R):T.renderPass==="translucent"&&(function(ee,le){const he=ee.context,ue=he.gl;he.setColorMode(ee.colorModeForRenderPass());const fe=le.heatmapFbos.get(s.cd);fe&&(he.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,fe.colorAttachment.get()),he.activeTexture.set(ue.TEXTURE1),Jo(he,le).bind(ue.LINEAR,ue.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(he,ue.TRIANGLES,zt.disabled,Yt.disabled,ee.colorModeForRenderPass(),Nt.disabled,Lu(ee,le,0,1),null,null,le.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,le.paint,ee.transform.zoom))})(T,I)})(t,o,m,_,w):s.cp(m)?(function(T,E,I,R,B){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:G}=B,U=I.paint.get("line-opacity"),K=I.paint.get("line-width");if(U.constantOr(1)===0||K.constantOr(1)===0)return;const ee=T.getDepthModeForSublayer(0,zt.ReadOnly),le=T.colorModeForRenderPass(),he=I.paint.get("line-dasharray"),ue=he.constantOr(1),fe=I.paint.get("line-pattern"),ye=fe.constantOr(1),de=I.paint.get("line-gradient"),ge=I.getCrossfadeParameters();let ke;ke=ye?"linePattern":ue&&de?"lineGradientSDF":ue?"lineSDF":de?"lineGradient":"line";const me=T.context,Me=me.gl,$e=T.transform;let ze=!0;for(const Re of R){const Oe=E.getTile(Re);if(ye&&!Oe.patternsLoaded())continue;const tt=Oe.getBucket(I);if(!tt)continue;const it=tt.programConfigurations.get(I.id),Ke=T.context.program.get(),rt=T.useProgram(ke,it),Dt=ze||rt.program!==Ke,pi=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Re),zi=fe.constantOr(null),Ti=he&&he.constantOr(null);if(zi&&Oe.imageAtlas){const zn=Oe.imageAtlas,fn=zn.patternPositions[zi.to.toString()],on=zn.patternPositions[zi.from.toString()];fn&&on&&it.setConstantPatternPositions(fn,on)}else if(Ti){const zn=I.layout.get("line-cap")==="round",fn=T.lineAtlas.getDash(Ti.to,zn),on=T.lineAtlas.getDash(Ti.from,zn);it.setConstantDashPositions(fn,on)}const Bi=$e.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),Pi=$e.getPixelScale();let Qi;ye?(Qi=za(T,Oe,I,Pi,ge),Nu(me,Me,Oe,it,ge)):ue&&de?(Qi=co(T,Oe,I,Pi,ge,tt.lineClipsArray.length),ta(T,E,me,Me,I,tt,Re,it,ge)):ue?(Qi=ho(T,Oe,I,Pi,ge),Oi(T,me,Me,it,Dt,ge)):de?(Qi=Au(T,Oe,I,Pi,tt.lineClipsArray.length),ns(T,E,me,Me,I,tt,Re)):Qi=Wa(T,Oe,I,Pi);const $i=T.stencilModeForClipping(Re);rt.draw(me,Me.TRIANGLES,ee,$i,le,Nt.disabled,Qi,pi,Bi,I.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,I.paint,T.transform.zoom,it,tt.layoutVertexBuffer2),ze=!1}})(t,o,m,_,w):s.cq(m)?(function(T,E,I,R,B){const G=I.paint.get("fill-color"),U=I.paint.get("fill-opacity");if(U.constantOr(1)===0)return;const{isRenderingToTexture:K}=B,ee=T.colorModeForRenderPass(),le=I.paint.get("fill-pattern"),he=T.opaquePassEnabledForLayer()&&!le.constantOr(1)&&G.constantOr(s.bp.transparent).a===1&&U.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===he){const ue=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?zt.ReadWrite:zt.ReadOnly);zr(T,E,I,R,ue,ee,!1,K)}if(T.renderPass==="translucent"&&I.paint.get("fill-antialias")){const ue=T.getDepthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,zt.ReadOnly);zr(T,E,I,R,ue,ee,!0,K)}})(t,o,m,_,w):s.cr(m)?(function(T,E,I,R,B){const G=I.paint.get("fill-extrusion-opacity");if(G===0)return;const{isRenderingToTexture:U}=B;if(T.renderPass==="translucent"){const K=new zt(T.context.gl.LEQUAL,zt.ReadWrite,T.depthRangeFor3D);if(G!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Qo(T,E,I,R,K,Yt.disabled,xi.disabled,U),Qo(T,E,I,R,K,T.stencilModeFor3D(),T.colorModeForRenderPass(),U);else{const ee=T.colorModeForRenderPass();Qo(T,E,I,R,K,Yt.disabled,ee,U)}}})(t,o,m,_,w):s.cs(m)?(function(T,E,I,R,B){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:G}=B,U=T.context,K=T.style.projection.useSubdivision,ee=T.getDepthModeForSublayer(0,zt.ReadOnly),le=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(he,ue,fe,ye,de,ge,ke){const me=he.context,Me=me.gl;for(const $e of fe){const ze=ue.getTile($e),Re=ze.dem;if(!Re||!Re.data||!ze.needsHillshadePrepare)continue;const Oe=Re.dim,tt=Re.stride,it=Re.getPixels();if(me.activeTexture.set(Me.TEXTURE1),me.pixelStoreUnpackPremultiplyAlpha.set(!1),ze.demTexture=ze.demTexture||he.getTileTexture(tt),ze.demTexture){const rt=ze.demTexture;rt.update(it,{premultiply:!1}),rt.bind(Me.NEAREST,Me.CLAMP_TO_EDGE)}else ze.demTexture=new s.T(me,it,Me.RGBA,{premultiply:!1}),ze.demTexture.bind(Me.NEAREST,Me.CLAMP_TO_EDGE);me.activeTexture.set(Me.TEXTURE0);let Ke=ze.fbo;if(!Ke){const rt=new s.T(me,{width:Oe,height:Oe,data:null},Me.RGBA);rt.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),Ke=ze.fbo=me.createFramebuffer(Oe,Oe,!0,!1),Ke.colorAttachment.set(rt.texture)}me.bindFramebuffer.set(Ke.framebuffer),me.viewport.set([0,0,Oe,Oe]),he.useProgram("hillshadePrepare").draw(me,Me.TRIANGLES,de,ge,ke,Nt.disabled,jh(ze.tileID,Re),null,null,ye.id,he.rasterBoundsBuffer,he.quadTriangleIndexBuffer,he.rasterBoundsSegments),ze.needsHillshadePrepare=!1}})(T,E,R,I,ee,Yt.disabled,le),U.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(K){const[he,ue,fe]=T.stencilConfigForOverlapTwoPass(R);Rr(T,E,I,fe,he,ee,le,!1,G),Rr(T,E,I,fe,ue,ee,le,!0,G)}else{const[he,ue]=T.getStencilConfigForOverlapAndUpdateStencilID(R);Rr(T,E,I,ue,he,ee,le,!1,G)}})(t,o,m,_,w):s.ct(m)?(function(T,E,I,R,B){if(T.renderPass!=="translucent"||!R.length)return;const{isRenderingToTexture:G}=B,U=T.style.projection.useSubdivision,K=T.getDepthModeForSublayer(0,zt.ReadOnly),ee=T.colorModeForRenderPass();if(U){const[le,he,ue]=T.stencilConfigForOverlapTwoPass(R);go(T,E,I,ue,le,K,ee,!1,G),go(T,E,I,ue,he,K,ee,!0,G)}else{const[le,he]=T.getStencilConfigForOverlapAndUpdateStencilID(R);go(T,E,I,he,le,K,ee,!1,G)}})(t,o,m,_,w):s.bU(m)?(function(T,E,I,R,B){if(T.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!R.length)return;const{isRenderingToTexture:G}=B,U=E.getSource(),K=T.style.projection.useSubdivision;if(U instanceof Kn)as(T,E,I,R,null,!1,!1,U.tileCoords,U.flippedWindingOrder,G);else if(K){const[ee,le,he]=T.stencilConfigForOverlapTwoPass(R);as(T,E,I,he,ee,!1,!0,pr,!1,G),as(T,E,I,he,le,!0,!0,pr,!1,G)}else{const[ee,le]=T.getStencilConfigForOverlapAndUpdateStencilID(R);as(T,E,I,le,ee,!1,!0,pr,!1,G)}})(t,o,m,_,w):s.cu(m)?(function(T,E,I,R,B){const G=I.paint.get("background-color"),U=I.paint.get("background-opacity");if(U===0)return;const{isRenderingToTexture:K}=B,ee=T.context,le=ee.gl,he=T.style.projection,ue=T.transform,fe=ue.tileSize,ye=I.paint.get("background-pattern");if(T.isPatternMissing(ye))return;const de=!ye&&G.a===1&&U===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==de)return;const ge=Yt.disabled,ke=T.getDepthModeForSublayer(0,de==="opaque"?zt.ReadWrite:zt.ReadOnly),me=T.colorModeForRenderPass(),Me=T.useProgram(ye?"backgroundPattern":"background"),$e=R||Fi(ue,{tileSize:fe,terrain:T.style.map.terrain});ye&&(ee.activeTexture.set(le.TEXTURE0),T.imageManager.bind(T.context));const ze=I.getCrossfadeParameters();for(const Re of $e){const Oe=ue.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),tt=ye?Bh(U,T,ye,{tileID:Re,tileSize:fe},ze):qo(U,G),it=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Re),Ke=he.getMeshFromTileID(ee,Re.canonical,!1,!0,"raster");Me.draw(ee,le.TRIANGLES,ke,ge,me,Nt.backCCW,tt,it,Oe,I.id,Ke.vertexBuffer,Ke.indexBuffer,Ke.segments)}})(t,0,m,_,w):s.cv(m)&&(function(T,E,I,R){const{isRenderingGlobe:B}=R,G=T.context,U=I.implementation,K=T.style.projection,ee=T.transform,le=ee.getProjectionDataForCustomLayer(B),he={farZ:ee.farZ,nearZ:ee.nearZ,fov:ee.fov*Math.PI/180,modelViewProjectionMatrix:ee.modelViewProjectionMatrix,projectionMatrix:ee.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:le},ue=U.renderingMode?U.renderingMode:"2d";if(T.renderPass==="offscreen"){const fe=U.prerender;fe&&(T.setCustomLayerDefaults(),G.setColorMode(T.colorModeForRenderPass()),fe.call(U,G.gl,he),G.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),G.setColorMode(T.colorModeForRenderPass()),G.setStencilMode(Yt.disabled);const fe=ue==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,zt.ReadOnly);G.setDepthMode(fe),U.render(G.gl,he),G.setDirty(),T.setBaseState(),G.bindFramebuffer.set(null)}})(t,0,m,w))}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),m=this.imageManager.getPattern(t.to.toString());return!o||!m}useProgram(t,o,m=!1,_=[]){this.cache=this.cache||{};const w=!!this.style.map.terrain,T=this.style.projection,E=m?ii.projectionMercator:T.shaderPreludeCode,I=m?kn:T.shaderDefine,R=t+(o?o.cacheKey:"")+`/${m?Gn:T.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[R]||(this.cache[R]=new Xr(this.context,ii[t],o,$h[t],this._showOverdrawInspector,w,E,I,_)),this.cache[R]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var t,o;if(this._tileTextures){for(const m in this._tileTextures){const _=this._tileTextures[m];if(_)for(const w of _)w.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((t=this.tileExtentMesh.vertexBuffer)===null||t===void 0||t.destroy()),this.tileExtentMesh&&((o=this.tileExtentMesh.indexBuffer)===null||o===void 0||o.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const m in this.cache){const _=this.cache[m];_&&_.program&&this.context.gl.deleteProgram(_.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:o}=this.context.gl;return this.width!==t||this.height!==o}}function qh(x,t){let o,m=!1,_=null,w=null;const T=()=>{_=null,m&&(x.apply(w,o),_=setTimeout(T,t),m=!1)};return(...E)=>(m=!0,w=this,o=E,_||T(),_)}class Zh{constructor(t){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let m;return o.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(m=_)})),(m&&m[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:m,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const m=o.join("/");let _=m;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${m}`);let w=window.location.hash.replace(_,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let T=window.location.href.replace(/(#.+)?$/,w);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=qh(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const o=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,_=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),T=Math.round(o.lng*w)/w,E=Math.round(o.lat*w)/w,I=this._map.getBearing(),R=this._map.getPitch();let B="";if(B+=t?`/${T}/${E}/${m}`:`${m}/${E}/${T}`,(I||R)&&(B+="/"+Math.round(10*I)/10),R&&(B+=`/${Math.round(R)}`),this._hashName){const G=this._hashName;let U=!1;const K=window.location.hash.slice(1).split("&").map((ee=>{const le=ee.split("=")[0];return le===G?(U=!0,`${le}=${B}`):ee})).filter((ee=>ee));return U||K.push(`${G}=${B}`),`#${K.join("&")}`}return`#${B}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new s.V(+t[2],+t[1])}catch{return!1}const o=+t[0],m=+(t[3]||0),_=+(t[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&m>=-180&&m<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const $s={linearity:.3,easing:s.cw(0,0,.3,1)},fc=s.e({deceleration:2500,maxSpeed:1400},$s),Ka=s.e({deceleration:20,maxSpeed:1400},$s),mr=s.e({deceleration:1e3,maxSpeed:360},$s),pc=s.e({deceleration:1e3,maxSpeed:90},$s),gr=s.e({deceleration:1e3,maxSpeed:360},$s);class Xf{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:ae(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=ae();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)o.zoom+=w.zoomDelta||0,o.bearing+=w.bearingDelta||0,o.pitch+=w.pitchDelta||0,o.roll+=w.rollDelta||0,w.panDelta&&o.pan._add(w.panDelta),w.around&&(o.around=w.around),w.pinchAround&&(o.pinchAround=w.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(o.pan.mag()){const w=zl(o.pan.mag(),m,s.e({},fc,t||{})),T=o.pan.mult(w.amount/o.pan.mag()),E=this._map.cameraHelper.handlePanInertia(T,this._map.transform);_.center=E.easingCenter,_.offset=E.easingOffset,Dl(_,w)}if(o.zoom){const w=zl(o.zoom,m,Ka);_.zoom=this._map.transform.zoom+w.amount,Dl(_,w)}if(o.bearing){const w=zl(o.bearing,m,mr);_.bearing=this._map.transform.bearing+s.an(w.amount,-179,179),Dl(_,w)}if(o.pitch){const w=zl(o.pitch,m,pc);_.pitch=this._map.transform.pitch+w.amount,Dl(_,w)}if(o.roll){const w=zl(o.roll,m,gr);_.roll=this._map.transform.roll+s.an(w.amount,-179,179),Dl(_,w)}if(_.zoom||_.bearing){const w=o.pinchAround===void 0?o.around:o.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),s.e(_,{noMoveStart:!0})}}function Dl(x,t){(!x.duration||x.duration<t.duration)&&(x.duration=t.duration,x.easing=t.easing)}function zl(x,t,o){const{maxSpeed:m,linearity:_,deceleration:w}=o,T=s.an(x*_/(t/1e3),-m,m),E=Math.abs(T)/(w*_);return{easing:o.easing,duration:1e3*E,amount:T*(E/2)}}class Dn extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m,_={}){m=m instanceof MouseEvent?m:new MouseEvent(t,m);const w=H.mousePos(o.getCanvas(),m),T=o.unproject(w);super(t,s.e({point:w,lngLat:T,originalEvent:m},_)),this._defaultPrevented=!1,this.target=o}}class Rl extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m){const _=t==="touchend"?m.changedTouches:m.touches,w=H.touchPos(o.getCanvasContainer(),_),T=w.map((I=>o.unproject(I))),E=w.reduce(((I,R,B,G)=>I.add(R.div(G.length))),new s.P(0,0));super(t,{points:w,point:E,lngLats:T,lngLat:o.unproject(E),originalEvent:m}),this._defaultPrevented=!1}}class mc extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,m){super(t,{originalEvent:m}),this._defaultPrevented=!1}}class Jf{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new mc(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Dn(t.type,this._map,t))}mouseup(t){this._map.fire(new Dn(t.type,this._map,t))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Dn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Dn(t.type,this._map,t))}mouseover(t){this._map.fire(new Dn(t.type,this._map,t))}mouseout(t){this._map.fire(new Dn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Rl(t.type,this._map,t))}touchmove(t){this._map.fire(new Rl(t.type,this._map,t))}touchend(t){this._map.fire(new Rl(t.type,this._map,t))}touchcancel(t){this._map.fire(new Rl(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qf{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Dn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Dn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class el{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(s.P.convert(t),this._map.terrain)}}class tl{constructor(t,o){this._map=t,this._tr=new el(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(H.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const m=o;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=m,this._box||(this._box=H.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const w=Math.min(_.x,m.x),T=Math.max(_.x,m.x),E=Math.min(_.y,m.y),I=Math.max(_.y,m.y);H.setTransform(this._box,`translate(${w}px,${E}px)`),this._box.style.width=T-w+"px",this._box.style.height=I-E+"px"}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const m=this._startPos,_=o;if(this.reset(),H.suppressClick(),m.x!==_.x||m.y!==_.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:t})),{cameraAnimation:w=>w.fitScreenCoordinates(m,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(H.remove(this._box),this._box=null),H.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new s.l(t,{originalEvent:o}))}}function _r(x,t){if(x.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${t.length}`);const o={};for(let m=0;m<x.length;m++)o[x[m].identifier]=t[m];return o}class ct{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,o,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),m.length===this.numTouches&&(this.centroid=(function(_){const w=new s.P(0,0);for(const T of _)w._add(T);return w.div(_.length)})(o),this.touches=_r(m,o)))}touchmove(t,o,m){if(this.aborted||!this.centroid)return;const _=_r(m,o);for(const w in this.touches){const T=_[w];(!T||T.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(t,o,m){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Gu{constructor(t){this.singleTap=new ct(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,o,m){this.singleTap.touchstart(t,o,m)}touchmove(t,o,m){this.singleTap.touchmove(t,o,m)}touchend(t,o,m){const _=this.singleTap.touchend(t,o,m);if(_){const w=t.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(_)<30;if(w&&T||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Wh{constructor(t){this._tr=new el(t),this._zoomIn=new Gu({numTouches:1,numTaps:2}),this._zoomOut=new Gu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,m){this._zoomIn.touchstart(t,o,m),this._zoomOut.touchstart(t,o,m)}touchmove(t,o,m){this._zoomIn.touchmove(t,o,m),this._zoomOut.touchmove(t,o,m)}touchend(t,o,m){const _=this._zoomIn.touchend(t,o,m),w=this._zoomOut.touchend(t,o,m),T=this._tr;return _?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(_)},{originalEvent:t})}):w?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(w)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class il{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const o=this._moveFunction(...t);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(t,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,o){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const _=Array.isArray(o)?o[0]:o;return!this._moved&&_.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(m,_))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&H.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Fl=0,Ol=2,Hh={[Fl]:1,[Ol]:2};class jl{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const o=H.mouseButton(t);this._eventButton=o}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(o,m){const _=Hh[m];return o.buttons===void 0||(o.buttons&_)!==_})(t,this._eventButton)}isValidEndEvent(t){return H.mouseButton(t)===this._eventButton}}class Kh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class gc{constructor(t=new jl({checkCorrectEvent:()=>!0}),o=new Kh){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(t,o,m){return t instanceof MouseEvent?o(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?m(t):void 0}startMove(t){this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.startMove(o)),(o=>this.oneFingerTouchMoveStateManager.startMove(o)))}endMove(t){this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.endMove(o)),(o=>this.oneFingerTouchMoveStateManager.endMove(o)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidStartEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidMoveEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(o=>this.mouseMoveStateManager.isValidEndEvent(o)),(o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o)))}}const nl=x=>{x.mousedown=x.dragStart,x.mousemoveWindow=x.dragMove,x.mouseup=x.dragEnd,x.contextmenu=t=>{t.preventDefault()}};class ep{constructor(t,o){this._clickTolerance=t.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,o,m){return this._calculateTransform(t,o,m)}touchmove(t,o,m){if(this._active){if(!this._shouldBePrevented(m.length))return t.preventDefault(),this._calculateTransform(t,o,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,o,m){this._calculateTransform(t,o,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,m){m.length>0&&(this._active=!0);const _=_r(m,o),w=new s.P(0,0),T=new s.P(0,0);let E=0;for(const R in _){const B=_[R],G=this._touches[R];G&&(w._add(B),T._add(B.sub(G)),E++,_[R]=B)}if(this._touches=_,this._shouldBePrevented(E)||!T.mag())return;const I=T.div(E);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(E),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,o,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,m){if(!this._firstTwoTouches)return;t.preventDefault();const[_,w]=this._firstTwoTouches,T=Zu(m,o,_),E=Zu(m,o,w);if(!T||!E)return;const I=this._aroundCenter?null:T.add(E).div(2);return this._move([T,E],I,t)}touchend(t,o,m){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,T=Zu(m,o,_),E=Zu(m,o,w);T&&E||(this._active&&H.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Zu(x,t,o){for(let m=0;m<x.length;m++)if(x[m].identifier===o)return t[m]}function _c(x,t){return Math.log(x/t)/Math.LN2}class Yh extends qu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const m=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(_c(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_c(this._distance,m),pinchAround:o}}}function yc(x,t){return 180*x.angleWith(t)/Math.PI}class Xh extends qu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o,m){const _=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:yc(this._vector,_),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,m=yc(t,this._startVector);return Math.abs(m)<o}}function Jh(x){return Math.abs(x.y)>Math.abs(x.x)}class vc extends qu{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,o,m){super.touchstart(t,o,m),this._currentTouchCount=m.length}_start(t){this._lastPoints=t,Jh(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=t[0].sub(this._lastPoints[0]),w=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,w,m.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(_.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(t,o,m){if(this._valid!==void 0)return this._valid;const _=t.mag()>=2,w=o.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const T=t.y>0==o.y>0;return Jh(t)&&Jh(o)&&T}}const Vs={panStep:100,bearingStep:15,pitchStep:10};class wi{constructor(t){this._tr=new el(t);const o=Vs;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,m=0,_=0,w=0,T=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?m=-1:(t.preventDefault(),w=-1);break;case 39:t.shiftKey?m=1:(t.preventDefault(),w=1);break;case 38:t.shiftKey?_=1:(t.preventDefault(),T=-1);break;case 40:t.shiftKey?_=-1:(t.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(m=0,_=0),{cameraAnimation:E=>{const I=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:tp,zoom:o?Math.round(I.zoom)+o*(t.shiftKey?2:1):I.zoom,bearing:I.bearing+m*this._bearingStep,pitch:I.pitch+_*this._pitchStep,offset:[-w*this._panStep,-T*this._panStep],center:I.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function tp(x){return x*(2-x)}const Bl=4.000244140625,Wu=1/450;class Hu{constructor(t,o){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=t,this._tr=new el(t),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Wu}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const m=ae(),_=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,o!==0&&o%Bl==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(_*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=H.mousePos(this._map.getCanvas(),t),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(s.V.convert(m.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const E=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=E),typeof this._targetZoom=="number"&&(this._targetZoom+=E)}if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>Bl?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&I!==0&&(I=1/I);const R=typeof this._targetZoom!="number"?t.scale:s.aq(this._targetZoom);this._targetZoom=t.applyConstrain(t.getCameraLngLat(),s.at(R*I)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,m=this._startZoom,_=this._easing;let w,T=!1;if(this._type==="wheel"&&m&&_){const E=ae()-this._lastWheelEventTime,I=Math.min((E+5)/200,1),R=_(I);w=s.G.number(m,o,R),I<1?this._frameId||(this._frameId=!0):T=!0}else w=o,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=w,{noInertia:!0,needsRenderFrame:!T,zoomDelta:w-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=s.cy;if(this._prevEase){const m=this._prevEase,_=(ae()-m.start)/m.duration,w=m.easing(_+.01)-m.easing(_),T=.27/Math.sqrt(w*w+1e-4)*.01,E=Math.sqrt(.0729-T*T);o=s.cw(T,E,.25,1)}return this._prevEase={start:ae(),duration:t,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Qh{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class xc{constructor(t){this._tr=new el(t),this.reset()}reset(){this._active=!1}dblclick(t,o){return t.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bc{constructor(){this._tap=new Gu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,o,m){if(!this._swipePoint)if(this._tapTime){const _=o[0],w=t.timeStamp-this._tapTime<500,T=this._tapPoint.dist(_)<30;w&&T?m.length>0&&(this._swipePoint=_,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(t,o,m)}touchmove(t,o,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const _=o[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,t.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(t,o,m)}touchend(t,o,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const _=this._tap.touchend(t,o,m);_&&(this._tapTime=t.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wc{constructor(t,o,m){this._el=t,this._mousePan=o,this._touchPan=m}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class yr{constructor(t,o,m,_){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=o,this._mousePitch=m,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class $l{constructor(t,o,m,_){this._el=t,this._touchZoom=o,this._touchRotate=m,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class _t{constructor(t,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=H.create("div","maplibregl-cooperative-gesture-screen",t);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=o,this._container.appendChild(_);const w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=m,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(H.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,o){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:t,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const kt=x=>x.zoom||x.drag||x.roll||x.pitch||x.rotate;class Vl extends s.l{}function Ku(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta||x.rollDelta}class Yu{constructor(t,o){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,w)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=_.type==="renderFrame"?void 0:_,E={needsRenderFrame:!1},I={},R={};for(const{handlerName:U,handler:K,allowed:ee}of this._handlers){if(!K.isEnabled())continue;let le;if(this._blockedByActive(R,ee,U))K.reset();else if(K[w||_.type]){if(s.cz(_,w||_.type)){const he=H.mousePos(this._map.getCanvas(),_);le=K[w||_.type](_,he)}else if(s.cA(_,w||_.type)){const he=this._getMapTouches(_.touches),ue=H.touchPos(this._map.getCanvas(),he);le=K[w||_.type](_,ue,he)}else s.cB(w||_.type)||(le=K[w||_.type](_));this.mergeHandlerResult(E,I,le,U,T),le&&le.needsRenderFrame&&this._triggerRenderFrame()}(le||K.isActive())&&(R[U]=K)}const B={};for(const U in this._previousActiveHandlers)R[U]||(B[U]=T);this._previousActiveHandlers=R,(Object.keys(B).length||Ku(E))&&(this._changes.push([E,I,B]),this._triggerRenderFrame()),(Object.keys(R).length||Ku(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=E;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xf(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,w,T]of this._listeners)H.addEventListener(_,w,_===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[t,o,m]of this._listeners)H.removeEventListener(t,o,t===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(t){const o=this._map,m=o.getCanvasContainer();this._add("mapEvent",new Jf(o,t));const _=o.boxZoom=new tl(o,t);this._add("boxZoom",_),t.interactive&&t.boxZoom&&_.enable();const w=o.cooperativeGestures=new _t(o,t.cooperativeGestures);this._add("cooperativeGestures",w),t.cooperativeGestures&&w.enable();const T=new Wh(o),E=new xc(o);o.doubleClickZoom=new Qh(E,T),this._add("tapZoom",T),this._add("clickZoom",E),t.interactive&&t.doubleClickZoom&&o.doubleClickZoom.enable();const I=new bc;this._add("tapDragZoom",I);const R=o.touchPitch=new vc(o);this._add("touchPitch",R),t.interactive&&t.touchPitch&&o.touchPitch.enable(t.touchPitch);const B=()=>o.project(o.getCenter()),G=(function({enable:de,clickTolerance:ge,aroundCenter:ke=!0,minPixelCenterThreshold:me=100,rotateDegreesPerPixelMoved:Me=.8},$e){const ze=new jl({checkCorrectEvent:Re=>H.mouseButton(Re)===0&&Re.ctrlKey||H.mouseButton(Re)===2&&!Re.ctrlKey});return new il({clickTolerance:ge,move:(Re,Oe)=>{const tt=$e();if(ke&&Math.abs(tt.y-Re.y)>me)return{bearingDelta:s.cx(new s.P(Re.x,Oe.y),Oe,tt)};let it=(Oe.x-Re.x)*Me;return ke&&Oe.y<tt.y&&(it=-it),{bearingDelta:it}},moveStateManager:ze,enable:de,assignEvents:nl})})(t,B),U=(function({enable:de,clickTolerance:ge,pitchDegreesPerPixelMoved:ke=-.5}){const me=new jl({checkCorrectEvent:Me=>H.mouseButton(Me)===0&&Me.ctrlKey||H.mouseButton(Me)===2});return new il({clickTolerance:ge,move:(Me,$e)=>({pitchDelta:($e.y-Me.y)*ke}),moveStateManager:me,enable:de,assignEvents:nl})})(t),K=(function({enable:de,clickTolerance:ge,rollDegreesPerPixelMoved:ke=.3},me){const Me=new jl({checkCorrectEvent:$e=>H.mouseButton($e)===2&&$e.ctrlKey});return new il({clickTolerance:ge,move:($e,ze)=>{const Re=me();let Oe=(ze.x-$e.x)*ke;return ze.y<Re.y&&(Oe=-Oe),{rollDelta:Oe}},moveStateManager:Me,enable:de,assignEvents:nl})})(t,B);o.dragRotate=new yr(t,G,U,K),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",U,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),t.interactive&&t.dragRotate&&o.dragRotate.enable();const ee=(function({enable:de,clickTolerance:ge}){const ke=new jl({checkCorrectEvent:me=>H.mouseButton(me)===0&&!me.ctrlKey});return new il({clickTolerance:ge,move:(me,Me)=>({around:Me,panDelta:Me.sub(me)}),activateOnStart:!0,moveStateManager:ke,enable:de,assignEvents:nl})})(t),le=new ep(t,o);o.dragPan=new wc(m,ee,le),this._add("mousePan",ee),this._add("touchPan",le,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&o.dragPan.enable(t.dragPan);const he=new Xh,ue=new Yh;o.touchZoomRotate=new $l(m,ue,he,I),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&o.touchZoomRotate.enable(t.touchZoomRotate),this._add("blockableMapEvent",new Qf(o));const fe=o.scrollZoom=new Hu(o,(()=>this._triggerRenderFrame()));this._add("scrollZoom",fe,["mousePan"]),t.interactive&&t.scrollZoom&&o.scrollZoom.enable(t.scrollZoom);const ye=o.keyboard=new wi(o);this._add("keyboard",ye),t.interactive&&t.keyboard&&o.keyboard.enable()}_add(t,o,m){this._handlers.push({handlerName:t,handler:o,allowed:m}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!kt(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,o,m){for(const _ in t)if(_!==m&&(!o||o.indexOf(_)<0))return!0;return!1}_getMapTouches(t){const o=[];for(const m of t)this._el.contains(m.target)&&o.push(m);return o}mergeHandlerResult(t,o,m,_,w){if(!m)return;s.e(t,m);const T={handlerName:_,originalEvent:m.originalEvent||w};m.zoomDelta!==void 0&&(o.zoom=T),m.panDelta!==void 0&&(o.drag=T),m.rollDelta!==void 0&&(o.roll=T),m.pitchDelta!==void 0&&(o.pitch=T),m.bearingDelta!==void 0&&(o.rotate=T)}_applyChanges(){const t={},o={},m={};for(const[_,w,T]of this._changes)_.panDelta&&(t.panDelta=(t.panDelta||new s.P(0,0))._add(_.panDelta)),_.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(t.rollDelta=(t.rollDelta||0)+_.rollDelta),_.around!==void 0&&(t.around=_.around),_.pinchAround!==void 0&&(t.pinchAround=_.pinchAround),_.noInertia&&(t.noInertia=_.noInertia),s.e(o,w),s.e(m,T);this._updateMapTransform(t,o,m),this._changes=[]}_updateMapTransform(t,o,m){const _=this._map,w=_._getTransformForUpdate(),T=_.terrain;if(!(Ku(t)||T&&this._terrainMovement))return this._fireEvents(o,m,!0);_._stop(!0);let{panDelta:E,zoomDelta:I,bearingDelta:R,pitchDelta:B,rollDelta:G,around:U,pinchAround:K}=t;K!==void 0&&(U=K),U=U||_.transform.centerPoint,T&&!w.isPointOnMapSurface(U)&&(U=w.centerPoint);const ee={panDelta:E,zoomDelta:I,rollDelta:G,pitchDelta:B,bearingDelta:R,around:U};this._map.cameraHelper.useGlobeControls&&!w.isPointOnMapSurface(U)&&(U=w.centerPoint);const le=U.distSqr(w.centerPoint)<.01?w.center:w.screenPointToLocation(E?U.sub(E):U);this._handleMapControls({terrain:T,tr:w,deltasForHelper:ee,preZoomAroundLoc:le,combinedEventsInProgress:o,panDelta:E}),_._applyUpdatedTransform(w),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,m,!0)}_handleMapControls({terrain:t,tr:o,deltasForHelper:m,preZoomAroundLoc:_,combinedEventsInProgress:w,panDelta:T}){const E=this._map.cameraHelper;if(E.handleMapControlsRollPitchBearingZoom(m,o),t)return E.useGlobeControls?(this._terrainMovement||!w.drag&&!w.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void E.handleMapControlsPan(m,o,_)):this._terrainMovement||!w.drag&&!w.zoom?void(w.drag&&this._terrainMovement&&T?o.setCenter(o.screenPointToLocation(o.centerPoint.sub(T))):E.handleMapControlsPan(m,o,_)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void E.handleMapControlsPan(m,o,_));E.handleMapControlsPan(m,o,_)}_fireEvents(t,o,m){const _=kt(this._eventsInProgress),w=kt(t),T={};for(const G in t){const{originalEvent:U}=t[G];this._eventsInProgress[G]||(T[`${G}start`]=U),this._eventsInProgress[G]=t[G]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const G in T)this._fireEvent(G,T[G]);w&&this._fireEvent("move",w.originalEvent);for(const G in t){const{originalEvent:U}=t[G];this._fireEvent(G,U)}const E={};let I;for(const G in this._eventsInProgress){const{handlerName:U,originalEvent:K}=this._eventsInProgress[G];this._handlersById[U].isActive()||(delete this._eventsInProgress[G],I=o[U]||K,E[`${G}end`]=I)}for(const G in E)this._fireEvent(G,E[G]);const R=kt(this._eventsInProgress),B=(_||w)&&!R;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const G=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&G.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(G)}if(m&&B){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!G||!G.essential&&X.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:I})),U(this._map.getBearing())&&this._map.resetNorth()):(U(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new s.l(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Vl("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class pa extends s.E{constructor(t,o,m){super(),this._renderFrameCallback=()=>{const _=Math.min((ae()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=m.bearingSnap,this.cameraHelper=o,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,o){t.apply(this.transform),this.transform=t,this.cameraHelper=o}getCenter(){return new s.V(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,o){return this.jumpTo({elevation:t},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,o,m){return t=s.P.convert(t).mult(-1),this.panTo(this.transform.center,s.e({offset:t},o),m)}panTo(t,o,m){return this.easeTo(s.e({center:t},o),m)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,m){return this.easeTo(s.e({zoom:t},o),m)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,o){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new s.l("movestart",o)).fire(new s.l("move",o)).fire(new s.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,m){return this.easeTo(s.e({bearing:t},o),m)}resetNorth(t,o){return this.rotateTo(0,s.e({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}getRoll(){return this.transform.roll}setRoll(t,o){return this.jumpTo({roll:t},o),this}cameraForBounds(t,o){t=Ci.convert(t).adjustAntiMeridian();const m=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),m,o)}_cameraForBoxAndBearing(t,o,m,_){const w={top:0,bottom:0,right:0,left:0};if(typeof(_=s.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const R=_.padding;_.padding={top:R,bottom:R,right:R,left:R}}const T=s.e(w,_.padding);_.padding=T;const E=this.transform,I=new Ci(t,o);return this.cameraHelper.cameraForBoxAndBearing(_,T,I,m,E)}fitBounds(t,o,m){return this._fitInternal(this.cameraForBounds(t,o),o,m)}fitScreenCoordinates(t,o,m,_,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(t)),this.transform.screenPointToLocation(s.P.convert(o)),m,_),_,w)}_fitInternal(t,o,m){return t?(delete(o=s.e(t,o)).padding,o.linear?this.easeTo(o,m):this.flyTo(o,m)):this}jumpTo(t,o){this.stop();const m=this._getTransformForUpdate();let _=!1,w=!1,T=!1;const E=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,t);const I=m.zoom!==E;return"elevation"in t&&m.elevation!==+t.elevation&&m.setElevation(+t.elevation),"bearing"in t&&m.bearing!==+t.bearing&&(_=!0,m.setBearing(+t.bearing)),"pitch"in t&&m.pitch!==+t.pitch&&(w=!0,m.setPitch(+t.pitch)),"roll"in t&&m.roll!==+t.roll&&(T=!0,m.setRoll(+t.roll)),t.padding==null||m.isPaddingEqual(t.padding)||m.setPadding(t.padding),this._applyUpdatedTransform(m),this.fire(new s.l("movestart",o)).fire(new s.l("move",o)),I&&this.fire(new s.l("zoomstart",o)).fire(new s.l("zoom",o)).fire(new s.l("zoomend",o)),_&&this.fire(new s.l("rotatestart",o)).fire(new s.l("rotate",o)).fire(new s.l("rotateend",o)),w&&this.fire(new s.l("pitchstart",o)).fire(new s.l("pitch",o)).fire(new s.l("pitchend",o)),T&&this.fire(new s.l("rollstart",o)).fire(new s.l("roll",o)).fire(new s.l("rollend",o)),this.fire(new s.l("moveend",o))}calculateCameraOptionsFromTo(t,o,m,_=0){const w=s.a9.fromLngLat(t,o),T=s.a9.fromLngLat(m,_),E=T.x-w.x,I=T.y-w.y,R=T.z-w.z,B=Math.hypot(E,I,R);if(B===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(E,I),U=s.at(this.transform.cameraToCenterDistance/B/this.transform.tileSize),K=180*Math.atan2(E,-I)/Math.PI;let ee=180*Math.acos(G/B)/Math.PI;return ee=R<0?90-ee:90+ee,{center:T.toLngLat(),elevation:_,zoom:U,pitch:ee,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(t,o,m,_,w){const T=this.transform.calculateCenterFromCameraLngLatAlt(t,o,m,_);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:m,pitch:_,roll:w}}easeTo(t,o){this._stop(!1,t.easeId),((t=s.e({offset:[0,0],duration:500,easing:s.cy},t)).animate===!1||!t.essential&&X.prefersReducedMotion)&&(t.duration=0);const m=this._getTransformForUpdate(),_=this.getBearing(),w=m.pitch,T=m.roll,E="bearing"in t?this._normalizeBearing(t.bearing,_):_,I="pitch"in t?+t.pitch:w,R="roll"in t?this._normalizeBearing(t.roll,T):T,B="padding"in t?t.padding:m.padding,G=s.P.convert(t.offset);let U,K;t.around&&(U=s.V.convert(t.around),K=m.locationToScreenPoint(U));const ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},le=this.cameraHelper.handleEaseTo(m,{bearing:E,pitch:I,roll:R,padding:B,around:U,aroundPoint:K,offsetAsPoint:G,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||_!==E,this._pitching=this._pitching||I!==w,this._rolling=this._rolling||R!==T,this._padding=!m.isPaddingEqual(B),this._zooming=this._zooming||le.isZooming,this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,ee),this.terrain&&this._prepareElevation(le.elevationCenter),this._ease((he=>{le.easeFunc(he),this.terrain&&!t.freezeElevation&&this._updateElevation(he),this._applyUpdatedTransform(m),this._fireMoveEvents(o)}),(he=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o,he)}),t),this}_prepareEase(t,o,m={}){this._moving=!0,o||m.moving||this.fire(new s.l("movestart",t)),this._zooming&&!m.zooming&&this.fire(new s.l("zoomstart",t)),this._rotating&&!m.rotating&&this.fire(new s.l("rotatestart",t)),this._pitching&&!m.pitching&&this.fire(new s.l("pitchstart",t)),this._rolling&&!m.rolling&&this.fire(new s.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&o!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(m-(o-(m*t+this._elevationStart))/(1-t)),this._elevationTarget=o}this.transform.setElevation(s.G.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const o=t.getCameraLngLat(),m=t.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(o,t.zoom):0;if(m<_){const w=this.calculateCameraOptionsFromTo(o,_,t.center,t.elevation);return{pitch:w.pitch,zoom:w.zoom}}return{}}_applyUpdatedTransform(t){const o=[];if(o.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&o.push((_=>this.transformCameraUpdate(_))),!o.length)return;const m=t.clone();for(const _ of o){const w=m.clone(),{center:T,zoom:E,roll:I,pitch:R,bearing:B,elevation:G}=_(w);T&&w.setCenter(T),G!==void 0&&w.setElevation(G),E!==void 0&&w.setZoom(E),I!==void 0&&w.setRoll(I),R!==void 0&&w.setPitch(R),B!==void 0&&w.setBearing(B),m.apply(w)}this.transform.apply(m)}_fireMoveEvents(t){this.fire(new s.l("move",t)),this._zooming&&this.fire(new s.l("zoom",t)),this._rotating&&this.fire(new s.l("rotate",t)),this._pitching&&this.fire(new s.l("pitch",t)),this._rolling&&this.fire(new s.l("roll",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const m=this._zooming,_=this._rotating,w=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new s.l("zoomend",t)),_&&this.fire(new s.l("rotateend",t)),w&&this.fire(new s.l("pitchend",t)),T&&this.fire(new s.l("rollend",t)),this.fire(new s.l("moveend",t))}flyTo(t,o){if(!t.essential&&X.prefersReducedMotion){const Oe=s.U(t,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Oe,o)}this.stop(),t=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cy},t);const m=this._getTransformForUpdate(),_=m.bearing,w=m.pitch,T=m.roll,E=m.padding,I="bearing"in t?this._normalizeBearing(t.bearing,_):_,R="pitch"in t?+t.pitch:w,B="roll"in t?this._normalizeBearing(t.roll,T):T,G="padding"in t?t.padding:m.padding,U=s.P.convert(t.offset);let K=m.centerPoint.add(U);const ee=m.screenPointToLocation(K),le=this.cameraHelper.handleFlyTo(m,{bearing:I,pitch:R,roll:B,padding:G,locationAtOffset:ee,offsetAsPoint:U,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let he=t.curve;const ue=Math.max(m.width,m.height),fe=ue/le.scaleOfZoom,ye=le.pixelPathLength;typeof le.scaleOfMinZoom=="number"&&(he=Math.sqrt(ue/le.scaleOfMinZoom/ye*2));const de=he*he;function ge(Oe){const tt=(fe*fe-ue*ue+(Oe?-1:1)*de*de*ye*ye)/(2*(Oe?fe:ue)*de*ye);return Math.log(Math.sqrt(tt*tt+1)-tt)}function ke(Oe){return(Math.exp(Oe)-Math.exp(-Oe))/2}function me(Oe){return(Math.exp(Oe)+Math.exp(-Oe))/2}const Me=ge(!1);let $e=function(Oe){return me(Me)/me(Me+he*Oe)},ze=function(Oe){return ue*((me(Me)*(ke(tt=Me+he*Oe)/me(tt))-ke(Me))/de)/ye;var tt},Re=(ge(!0)-Me)/he;if(Math.abs(ye)<2e-6||!isFinite(Re)){if(Math.abs(ue-fe)<1e-6)return this.easeTo(t,o);const Oe=fe<ue?-1:1;Re=Math.abs(Math.log(fe/ue))/he,ze=()=>0,$e=tt=>Math.exp(Oe*he*tt)}return t.duration="duration"in t?+t.duration:1e3*Re/("screenSpeed"in t?+t.screenSpeed/he:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=_!==I,this._pitching=R!==w,this._rolling=B!==T,this._padding=!m.isPaddingEqual(G),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(le.targetCenter),this._ease((Oe=>{const tt=Oe*Re,it=1/$e(tt),Ke=ze(tt);this._rotating&&m.setBearing(s.G.number(_,I,Oe)),this._pitching&&m.setPitch(s.G.number(w,R,Oe)),this._rolling&&m.setRoll(s.G.number(T,B,Oe)),this._padding&&(m.interpolatePadding(E,G,Oe),K=m.centerPoint.add(U)),le.easeFunc(Oe,it,Ke,K),this.terrain&&!t.freezeElevation&&this._updateElevation(Oe),this._applyUpdatedTransform(m),this._fireMoveEvents(o)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,o)}return t||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(t,o,m){m.animate===!1||m.duration===0?(t(1),o()):(this._easeStart=ae(),this._easeOptions=m,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,o){t=s.W(t,-180,180);const m=Math.abs(t-o);return Math.abs(t-360-o)<m&&(t-=360),Math.abs(t+360-o)<m&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLat(s.V.convert(t),this.transform):null}}const Ya={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ed{constructor(t=Ya){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=H.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=H.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=H.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){H.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const m=this._map._getUIString(`AttributionControl.${o}`);t.title=m,t.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const o=this._map.style.tileManagers;for(const _ in o){const w=o[_];if(w.used||w.usedForTerrain){const T=w.getSource();T.attribution&&t.indexOf(T.attribution)<0&&t.push(T.attribution)}}t=t.filter((_=>String(_).trim())),t.sort(((_,w)=>_.length-w.length)),t=t.filter(((_,w)=>{for(let T=w+1;T<t.length;T++)if(t[T].indexOf(_)>=0)return!1;return!0}));const m=t.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,t.length?(this._innerContainer.innerHTML=H.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class kc{constructor(t={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const m=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=H.create("div","maplibregl-ctrl");const o=H.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){H.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ip{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,m=o?this._queue.concat(o):this._queue;for(const _ of m)if(_.id===t)return void(_.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const m of o)if(!m.cancelled&&(m.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var np=s.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Nl extends s.E{constructor(t){super(),this._lastTilesetChange=ae(),this.tileManager=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(t,o){this.tileManager.update(t,o),this._renderableTilesKeys=[];const m={};for(const _ of Fi(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.tileManager._source.calculateTileZoom}))m[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),s.c7(_.terrainRttPosMatrix32f,0,s.a5,s.a5,0,0,1),this._tiles[_.key]=new Ye(_,this.tileSize),this._lastTilesetChange=ae());for(const _ in this._tiles)m[_]||delete this._tiles[_]}freeRtt(t){for(const o in this._tiles){const m=this._tiles[o];(!t||m.tileID.equals(t)||m.tileID.isChildOf(t)||t.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,o){return o?this._getTerrainCoordsForTileRanges(t,o):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const o={};for(const m of this._renderableTilesKeys){const _=this._tiles[m].tileID,w=t.clone(),T=s.bk();if(_.canonical.equals(t.canonical))s.c7(T,0,s.a5,s.a5,0,0,1);else if(_.canonical.isChildOf(t.canonical)){const E=_.canonical.z-t.canonical.z,I=_.canonical.x-(_.canonical.x>>E<<E),R=_.canonical.y-(_.canonical.y>>E<<E),B=s.a5>>E;s.c7(T,0,B,B,0,0,1),s.O(T,T,[-I*B,-R*B,0])}else{if(!t.canonical.isChildOf(_.canonical))continue;{const E=t.canonical.z-_.canonical.z,I=t.canonical.x-(t.canonical.x>>E<<E),R=t.canonical.y-(t.canonical.y>>E<<E),B=s.a5>>E;s.c7(T,0,s.a5,s.a5,0,0,1),s.O(T,T,[I*B,R*B,0]),s.Q(T,T,[1/2**E,1/2**E,0])}}w.terrainRttPosMatrix32f=new Float32Array(T),o[m]=w}return o}_getTerrainCoordsForTileRanges(t,o){const m={};for(const _ of this._renderableTilesKeys){const w=this._tiles[_].tileID;if(!this._isWithinTileRanges(w,o))continue;const T=t.clone(),E=s.bk();if(w.canonical.z===t.canonical.z){const I=t.canonical.x-w.canonical.x,R=t.canonical.y-w.canonical.y;s.c7(E,0,s.a5,s.a5,0,0,1),s.O(E,E,[I*s.a5,R*s.a5,0])}else if(w.canonical.z>t.canonical.z){const I=w.canonical.z-t.canonical.z,R=w.canonical.x-(w.canonical.x>>I<<I),B=w.canonical.y-(w.canonical.y>>I<<I),G=t.canonical.x-(w.canonical.x>>I),U=t.canonical.y-(w.canonical.y>>I),K=s.a5>>I;s.c7(E,0,K,K,0,0,1),s.O(E,E,[-R*K+G*s.a5,-B*K+U*s.a5,0])}else{const I=t.canonical.z-w.canonical.z,R=t.canonical.x-(t.canonical.x>>I<<I),B=t.canonical.y-(t.canonical.y>>I<<I),G=(t.canonical.x>>I)-w.canonical.x,U=(t.canonical.y>>I)-w.canonical.y,K=s.a5<<I;s.c7(E,0,K,K,0,0,1),s.O(E,E,[R*s.a5+G*K,B*s.a5+U*K,0])}T.terrainRttPosMatrix32f=new Float32Array(E),m[_]=T}return m}getSourceTile(t,o){const m=this.tileManager._source;let _=t.overscaledZ-this.deltaZoom;if(_>m.maxzoom&&(_=m.maxzoom),_<m.minzoom)return;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(_).key);let w=this.findTileInCaches(this._sourceTileCache[t.key]);if(!w?.dem&&o)for(;_>=m.minzoom&&!w?.dem;)w=this.findTileInCaches(t.scaledTo(_--).key);return w}findTileInCaches(t){let o=this.tileManager.getTileByID(t);return o||(o=this.tileManager._outOfViewCache.getByKey(t),o)}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,o){return o[t.canonical.z]&&t.canonical.x>=o[t.canonical.z].minTileX&&t.canonical.x<=o[t.canonical.z].maxTileX&&t.canonical.y>=o[t.canonical.z].minTileY&&t.canonical.y<=o[t.canonical.z].maxTileY}}class Zi{constructor(t,o,m){this._meshCache={},this.painter=t,this.tileManager=new Nl(o),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,o,m,_=s.a5){var w;if(!(o>=0&&o<_&&m>=0&&m<_))return 0;const T=this.getTerrainData(t),E=(w=T.tile)===null||w===void 0?void 0:w.dem;if(!E)return 0;const I=s.cC([],[o/_*s.a5,m/_*s.a5],T.u_terrain_matrix),R=[I[0]*E.dim,I[1]*E.dim],B=Math.floor(R[0]),G=Math.floor(R[1]),U=R[0]-B,K=R[1]-G;return E.get(B,G)*(1-U)*(1-K)+E.get(B+1,G)*U*(1-K)+E.get(B,G+1)*(1-U)*K+E.get(B+1,G+1)*U*K}getElevationForLngLatZoom(t,o){if(!s.cD(o,t.wrap()))return 0;const{tileID:m,mercatorX:_,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(t,o);return this.getElevation(m,_%s.a5,w%s.a5,s.a5)}getElevationForLngLat(t,o){const m=Fi(o,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let _=0;for(const w of m)w.canonical.z>_&&(_=Math.min(w.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(t,_)}getElevation(t,o,m,_=s.a5){return this.getDEMElevation(t,o,m,_)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const _=this.painter.context,w=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(_,w,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(_,new s.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ar([])}const o=this.tileManager.getSourceTile(t,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const _=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new s.T(_,o.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),o.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const m=o&&o.toString()+o.tileID.key+t.key;if(m&&!this._demMatrixCache[m]){const _=this.tileManager.getSource().maxzoom;let w=t.canonical.z-o.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=_?w=t.canonical.z-_:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=t.canonical.x-(t.canonical.x>>w<<w),E=t.canonical.y-(t.canonical.y>>w<<w),I=s.cE(new Float64Array(16),[1/(s.a5<<w),1/(s.a5<<w),0]);s.O(I,I,[T*s.a5,E*s.a5,0]),this._demMatrixCache[t.key]={matrix:I,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(t){const o=this.painter,m=o.width/devicePixelRatio,_=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(o.context,{width:m,height:_,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(o.context,{width:m,height:_,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(m,_,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,m,_))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,T=0;w<this._coordsTextureSize;w++)for(let E=0;E<this._coordsTextureSize;E++,T+=4)o[T+0]=255&E,o[T+1]=255&w,o[T+2]=E>>8<<4|w>>8,o[T+3]=0;const m=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),_=new s.T(t,m,t.gl.RGBA,{premultiply:!1});return _.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),m=this.painter.context,_=m.gl,w=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(w,E-T-1,1,1,_.RGBA,_.UNSIGNED_BYTE,o),m.bindFramebuffer.set(null);const I=o[0]+(o[2]>>4<<8),R=o[1]+((15&o[2])<<8),B=this.coordsIndex[255-o[3]],G=B&&this.tileManager.getTileByID(B);if(!G)return null;const U=this._coordsTextureSize,K=(1<<G.tileID.canonical.z)*U;return new s.a9((G.tileID.canonical.x*U+I)/K+G.tileID.wrap,(G.tileID.canonical.y*U+R)/K,this.getElevation(G.tileID,I,R,U))}depthAtPoint(t){const o=new Uint8Array(4),m=this.painter.context,_=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,o),m.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(t){var o;const m=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,_=m&&t.canonical.y===0,w=m&&t.canonical.y===(1<<t.canonical.z)-1,T=`m_${_?"n":""}_${w?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const E=this.painter.context,I=new s.cF,R=new s.aY,B=this.meshSize,G=s.a5/B,U=B*B;for(let me=0;me<=B;me++)for(let Me=0;Me<=B;Me++)I.emplaceBack(Me*G,me*G,0);for(let me=0;me<U;me+=B+1)for(let Me=0;Me<B;Me++)R.emplaceBack(Me+me,B+Me+me+1,B+Me+me+2),R.emplaceBack(Me+me,B+Me+me+2,Me+me+1);const K=I.length,ee=K+(B+1),le=(B+1)*B,he=_?s.br:0,ue=_?0:1,fe=w?s.bs:s.a5,ye=w?0:1;for(let me=0;me<=B;me++)I.emplaceBack(me*G,he,ue);for(let me=0;me<=B;me++)I.emplaceBack(me*G,fe,ye);for(let me=0;me<B;me++)R.emplaceBack(le+me,ee+me,ee+me+1),R.emplaceBack(le+me,ee+me+1,le+me+1),R.emplaceBack(0+me,K+me+1,K+me),R.emplaceBack(0+me,0+me+1,K+me+1);const de=I.length,ge=de+2*(B+1);for(const me of[0,1])for(let Me=0;Me<=B;Me++)for(const $e of[0,1])I.emplaceBack(me*s.a5,Me*G,$e);for(let me=0;me<2*B;me+=2)R.emplaceBack(de+me,de+me+1,de+me+3),R.emplaceBack(de+me,de+me+3,de+me+2),R.emplaceBack(ge+me,ge+me+3,ge+me+1),R.emplaceBack(ge+me,ge+me+2,ge+me+3);const ke=new fi(E.createVertexBuffer(I,np.members),E.createIndexBuffer(R),s.aX.simpleSegment(0,0,I.length,R.length));return this._meshCache[T]=ke,ke}getMeshFrameDelta(t){return 2*Math.PI*s.bE/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,o){var m;if(!s.cD(o,t.wrap()))return 0;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(t,o);return(m=this.getMinMaxElevation(_).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(t){const o=this.getTerrainData(t).tile,m={minElevation:null,maxElevation:null};return o&&o.dem&&(m.minElevation=o.dem.min*this.exaggeration,m.maxElevation=o.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(t,o){const m=s.a9.fromLngLat(t.wrap()),_=(1<<o)*s.a5,w=m.x*_,T=m.y*_,E=Math.floor(w/s.a5),I=Math.floor(T/s.a5);return{tileID:new s.a2(o,0,o,E,I),mercatorX:w,mercatorY:T}}}class sn{constructor(t,o,m){this._context=t,this._size=o,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(m.texture),{id:t,fbo:o,texture:m,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((o=>t.id!==o)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}const _o={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ul{constructor(t,o){this.painter=t,this.terrain=o,this.pool=new sn(t.context,30,o.tileManager.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=t._order.filter((m=>!t._layers[m].isHidden(o))),this._coordsAscending={};for(const m in t.tileManagers){this._coordsAscending[m]={};const _=t.tileManagers[m].getVisibleCoordinates(),w=t.tileManagers[m].getSource(),T=w instanceof Kn?w.terrainTileRanges:null;for(const E of _){const I=this.terrain.tileManager.getTerrainCoords(E,T);for(const R in I)this._coordsAscending[m][R]||(this._coordsAscending[m][R]=[]),this._coordsAscending[m][R].push(I[R])}}this._coordsAscendingStr={};for(const m of t._order){const _=t._layers[m],w=_.source;if(_o[_.type]&&!this._coordsAscendingStr[w]){this._coordsAscendingStr[w]={};for(const T in this._coordsAscending[w])this._coordsAscendingStr[w][T]=this._coordsAscending[w][T].map((E=>E.key)).sort().join()}}for(const m of this._renderableTiles)for(const _ in this._coordsAscendingStr){const w=this._coordsAscendingStr[_][m.tileID.key];w&&w!==m.rttCoords[_]&&(m.rtt=[])}}renderLayer(t,o){if(t.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),_=t.type,w=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(_o[_]&&(this._prevType&&_o[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(t.id),!T))return!0;if(_o[this._prevType]||_o[_]&&T){this._prevType=_;const E=this._stacks.length-1,I=this._stacks[E]||[];for(const R of this._renderableTiles){if(this.pool.isFull()&&(Uh(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(R),R.rtt[E]){const G=this.pool.getObjectForId(R.rtt[E].id);if(G.stamp===R.rtt[E].stamp){this.pool.useObject(G);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),R.rtt[E]={id:B.id,stamp:B.stamp},w.context.bindFramebuffer.set(B.fbo.framebuffer),w.context.clear({color:s.bp.transparent,stencil:0}),w.currentStencilSource=void 0;for(let G=0;G<I.length;G++){const U=w.style._layers[I[G]],K=U.source?this._coordsAscending[U.source][R.tileID.key]:[R.tileID];w.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),w._renderTileClippingMasks(U,K,!0),w.renderLayer(w,w.style.tileManagers[U.source],U,K,m),U.source&&(R.rttCoords[U.source]=this._coordsAscendingStr[U.source][R.tileID.key])}}return Uh(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),_o[_]}return!1}}const Xu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},td=S,Ju={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ya,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},id={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Gl{constructor(t,o,m=!1){this.mousedown=w=>{this.startMove(w,H.mousePos(this.element,w)),H.addEventListener(window,"mousemove",this.mousemove),H.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.move(w,H.mousePos(this.element,w))},this.mouseup=w=>{this._rotatePitchHandler.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=H.touchPos(this.element,w.targetTouches)[0],this.startMove(w,this._startPos),H.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=H.touchPos(this.element,w.targetTouches)[0],this.move(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const _=new gc;this._rotatePitchHandler=new il({clickTolerance:3,move:(w,T)=>{const E=o.getBoundingClientRect(),I=new s.P((E.bottom-E.top)/2,(E.right-E.left)/2);return{bearingDelta:s.cx(new s.P(w.x,T.y),T,I),pitchDelta:m?-.5*(T.y-w.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=t,H.addEventListener(o,"mousedown",this.mousedown),H.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),H.addEventListener(o,"touchcancel",this.reset)}startMove(t,o){this._rotatePitchHandler.dragStart(t,o),H.disableDrag()}move(t,o){const m=this.map,{bearingDelta:_,pitchDelta:w}=this._rotatePitchHandler.dragMove(t,o)||{};_&&m.setBearing(m.getBearing()+_),w&&m.setPitch(m.getPitch()+w)}off(){const t=this.element;H.removeEventListener(t,"mousedown",this.mousedown),H.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),H.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.removeEventListener(window,"touchend",this.touchend),H.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){H.enableDrag(),H.removeEventListener(window,"mousemove",this.mousemove),H.removeEventListener(window,"mouseup",this.mouseup),H.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.removeEventListener(window,"touchend",this.touchend)}}let rs;function Qu(x,t,o,m=!1){if(m||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return x?.wrap();const _=new s.V(x.lng,x.lat);if(x=new s.V(x.lng,x.lat),t){const w=new s.V(x.lng-360,x.lat),T=new s.V(x.lng+360,x.lat),E=o.locationToScreenPoint(x).distSqr(t);o.locationToScreenPoint(w).distSqr(t)<E?x=w:o.locationToScreenPoint(T).distSqr(t)<E&&(x=T)}for(;Math.abs(x.lng-o.center.lng)>180;){const w=o.locationToScreenPoint(x);if(w.x>=0&&w.y>=0&&w.x<=o.width&&w.y<=o.height)break;x.lng>o.center.lng?x.lng-=360:x.lng+=360}return x.lng!==_.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(x))?x:_}const ql={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function eh(x,t,o){const m=x.classList;for(const _ in ql)m.remove(`maplibregl-${o}-anchor-${_}`);m.add(`maplibregl-${o}-anchor-${t}`)}class Zl extends s.E{constructor(t){if(super(),this._onKeyPress=o=>{const m=o.code,_=o.charCode||o.keyCode;m!=="Space"&&m!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=o=>{const m=o.originalEvent.target,_=this._element;this._popup&&(m===_||_.contains(m))&&this.togglePopup()},this._update=o=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();(o?.type==="terrain"||o?.type==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=Qu(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),H.setTransform(this._element,`${ql[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${_}`),X.frameAsync(new AbortController).then((()=>{this._updateOpacity(o&&o.type==="moveend")})).catch((()=>{}))},this._onMove=o=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t?.opacity,t?.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=s.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=H.create("div");const o=H.createNS("http://www.w3.org/2000/svg","svg"),m=41,_=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${m}px`),o.setAttributeNS(null,"width",`${_}px`),o.setAttributeNS(null,"viewBox",`0 0 ${_} ${m}`);const w=H.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const T=H.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const E=H.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ue of I){const fe=H.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ue.rx),fe.setAttributeNS(null,"ry",ue.ry),E.appendChild(fe)}const R=H.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const B=H.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(B);const G=H.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const U=H.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(U);const K=H.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const ee=H.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const le=H.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");const he=H.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#FFFFFF"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962"),ee.appendChild(le),ee.appendChild(he),T.appendChild(E),T.appendChild(R),T.appendChild(G),T.appendChild(K),T.appendChild(ee),o.appendChild(T),o.setAttributeNS(null,"height",m*this._scale+"px"),o.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(o),this._offset=s.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(o=>{o.preventDefault()})),this._element.addEventListener("mousedown",(o=>{o.preventDefault()})),eh(this._element,this._anchor,"marker"),t&&t.className)for(const o of t.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),H.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=s.V.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const _=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var o,m;const _=(o=this._map)===null||o===void 0?void 0:o.terrain,w=this._map.transform.isLocationOccluded(this._lngLat);if(!_||w){const K=w?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const T=this._map,E=T.terrain.depthAtPoint(this._pos),I=T.terrain.getElevationForLngLat(this._lngLat,T.transform);if(T.transform.lngLatToCameraDepth(this._lngLat,I)-E<.006)return void(this._element.style.opacity=this._opacity);const R=-this._offset.y/T.transform.pixelsPerMeter,B=Math.sin(T.getPitch()*Math.PI/180)*R,G=T.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),U=T.transform.lngLatToCameraDepth(this._lngLat,I+B)-G>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&U&&this._popup.remove(),this._element.style.opacity=U?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=s.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,o){return(this._opacity===void 0||t===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const nd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let al=0,yo=!1;const ad={maxWidth:100,unit:"metric"};function Wl(x,t,o){const m=o&&o.maxWidth||100,_=x._container.clientHeight/2,w=x._container.clientWidth/2,T=x.unproject([w-m/2,_]),E=x.unproject([w+m/2,_]),I=Math.round(x.project(E).x-x.project(T).x),R=Math.min(m,I,x._container.clientWidth),B=T.distanceTo(E);if(o&&o.unit==="imperial"){const G=3.2808*B;G>5280?vo(t,R,G/5280,x._getUIString("ScaleControl.Miles")):vo(t,R,G,x._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?vo(t,R,B/1852,x._getUIString("ScaleControl.NauticalMiles")):B>=1e3?vo(t,R,B/1e3,x._getUIString("ScaleControl.Kilometers")):vo(t,R,B,x._getUIString("ScaleControl.Meters"))}function vo(x,t,o,m){const _=(function(w){const T=Math.pow(10,`${Math.floor(w)}`.length-1);let E=w/T;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:(function(I){const R=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*R)/R})(E),T*E})(o);x.style.width=t*(_/o)+"px",x.innerHTML=`${_}&nbsp;${m}`}const rd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},th=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ih(x){if(x){if(typeof x=="number"){const t=Math.round(Math.abs(x)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,x),"top-left":new s.P(t,t),"top-right":new s.P(-t,t),bottom:new s.P(0,-x),"bottom-left":new s.P(t,-t),"bottom-right":new s.P(-t,-t),left:new s.P(x,0),right:new s.P(-x,0)}}if(x instanceof s.P||Array.isArray(x)){const t=s.P.convert(x);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:s.P.convert(x.center||[0,0]),top:s.P.convert(x.top||[0,0]),"top-left":s.P.convert(x["top-left"]||[0,0]),"top-right":s.P.convert(x["top-right"]||[0,0]),bottom:s.P.convert(x.bottom||[0,0]),"bottom-left":s.P.convert(x["bottom-left"]||[0,0]),"bottom-right":s.P.convert(x["bottom-right"]||[0,0]),left:s.P.convert(x.left||[0,0]),right:s.P.convert(x.right||[0,0])}}return ih(new s.P(0,0))}const sd=S;f.AJAXError=s.cI,f.Event=s.l,f.Evented=s.E,f.LngLat=s.V,f.MercatorCoordinate=s.a9,f.Point=s.P,f.addProtocol=s.cJ,f.config=s.c,f.removeProtocol=s.cK,f.AttributionControl=ed,f.BoxZoomHandler=tl,f.CanvasSource=Q,f.CooperativeGesturesHandler=_t,f.DoubleClickZoomHandler=Qh,f.DragPanHandler=wc,f.DragRotateHandler=yr,f.EdgeInsets=Cr,f.FullscreenControl=class extends s.E{constructor(x={}){super(),this._onFullscreenChange=()=>{var t;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=o?.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){H.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const x=this._fullscreenButton=H.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);H.create("span","maplibregl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=ms,f.GeolocateControl=class extends s.E{constructor(x){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const o=new s.V(t.coords.longitude,t.coords.latitude),m=t.coords.accuracy,_=this._map.getBearing(),w=s.e({bearing:_},this.options.fitBoundsOptions),T=Ci.fromLngLat(o,m);this._map.fitBounds(T,w,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const o=new s.V(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&yo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=H.create("button","maplibregl-ctrl-geolocate",this._container),H.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Zl({element:this._dotElement}),this._circleElement=H.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Zl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(o=>{const m=o?.[0]instanceof ResizeObserverEntry;o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))}))}},this.options=s.e({},nd,x)}onAdd(x){return this._map=x,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return s._(this,arguments,void 0,(function*(t=!1){if(rs!==void 0&&!t)return rs;if(window.navigator.permissions===void 0)return rs=!!window.navigator.geolocation,rs;try{rs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{rs=!!window.navigator.geolocation}return rs}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),H.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,al=0,yo=!1}_isOutOfMapMaxBounds(x){const t=this._map.getMaxBounds(),o=x.coords;return t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const x=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&x))return;const t=this._map.project(x),o=this._map.unproject([t.x+100,t.y]),m=x.distanceTo(o)/100,_=2*this._accuracy/m;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":al--,yo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),al++,al>1?(x={maximumAge:6e5,timeout:0},yo=!0):(x=this.options.positionOptions,yo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var x;const t=(x=this._map.getProjection())===null||x===void 0?void 0:x.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var x;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((x=this._map.getProjection())===null||x===void 0?void 0:x.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(x){return this._map=x,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=H.create("button","maplibregl-ctrl-globe",this._container),H.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){H.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=Zh,f.ImageSource=Kn,f.KeyboardHandler=wi,f.LngLatBounds=Ci,f.LogoControl=kc,f.Map=class extends pa{constructor(x){var t,o;s.cG.mark(s.cH.create);const m=Object.assign(Object.assign(Object.assign({},Ju),x),{canvasContextAttributes:Object.assign(Object.assign({},Ju.canvasContextAttributes),x.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Lr,w=new Ut;if(m.minZoom!==void 0&&_.setMinZoom(m.minZoom),m.maxZoom!==void 0&&_.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&_.setMinPitch(m.minPitch),m.maxPitch!==void 0&&_.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&_.setRenderWorldCopies(m.renderWorldCopies),m.transformConstrain!==null&&_.setConstrainOverride(m.transformConstrain),super(_,w,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ip,this._controls=[],this._mapId=s.af(),this._lostContextStyle={style:null,images:null},this._contextLost=E=>{E.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const I of Object.values(this.style._layers))if(I.type==="custom"&&console.warn(`Custom layer with id '${I.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),I._listeners)for(const[R]of Object.entries(I._listeners))console.warn(`Custom layer with id '${I.id}' had event listeners for event '${R}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new s.l("webglcontextlost",{originalEvent:E}))},this._contextRestored=E=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:E}))},this._onMapScroll=E=>{if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Xu),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this._zoomLevelsToOverscale=m.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=m.transformCameraUpdate,this.transformConstrain=m.transformConstrain,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,m.reduceMotion!==void 0&&(X.prefersReducedMotion=m.reduceMotion),this._imageQueueHandle=Je.addThrottleControl((()=>this.isMoving())),this._requestManager=new nt(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let E=!1;const I=qh((R=>{this._trackResize&&!this._removed&&(this.resize(R),this.redraw())}),50);this._resizeObserver=new ResizeObserver((R=>{E?I(R):E=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Yu(this,m),this._hash=m.hash&&new Zh(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,s.e({},m.fitBoundsOptions,{duration:0}))));const T=typeof m.style=="string"||((o=(t=m.style)===null||t===void 0?void 0:t.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new ed(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new kc,m.logoPosition),this.on("style.load",(()=>{if(T||this._resizeTransform(),this.transform.unmodified){const E=s.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(E)}})),this.on("data",(E=>{this._update(E.dataType==="style"),this.fire(new s.l(`${E.dataType}data`,E))})),this.on("dataloading",(E=>{this.fire(new s.l(`${E.dataType}dataloading`,E))})),this.on("dataabort",(E=>{this.fire(new s.l("sourcedataabort",E))}))}_getMapId(){return this._mapId}setGlobalStateProperty(x,t){return this.style.setGlobalStateProperty(x,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(x,t){if(t===void 0&&(t=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=x.onAdd(this);this._controls.push(x);const m=this._controlPositions[t];return t.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(x);return t>-1&&this._controls.splice(t,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}coveringTiles(x){return Fi(this.transform,x)}calculateCameraOptionsFromTo(x,t,o,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLat(o,this.transform)),super.calculateCameraOptionsFromTo(x,t,o,m)}resize(x,t=!0){const[o,m]=this._containerDimensions(),_=this._getClampedPixelRatio(o,m);if(this._resizeCanvas(o,m,_),this.painter.resize(o,m,_),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const E=this._getClampedPixelRatio(o,m);this._resizeCanvas(o,m,E),this.painter.resize(o,m,E)}this._resizeTransform(t);const w=!this._moving;return w&&(this.stop(),this.fire(new s.l("movestart",x)).fire(new s.l("move",x))),this.fire(new s.l("resize",x)),w&&this.fire(new s.l("moveend",x)),this}_resizeTransform(x=!0){var t;const[o,m]=this._containerDimensions();this.transform.resize(o,m,x),(t=this._requestedCameraState)===null||t===void 0||t.resize(o,m,x)}_getClampedPixelRatio(x,t){const{0:o,1:m}=this._maxCanvasSize,_=this.getPixelRatio(),w=x*_,T=t*_;return Math.min(w>o?o/w:1,T>m?m/T:1)*_}getPixelRatio(){var x;return(x=this._overridePixelRatio)!==null&&x!==void 0?x:devicePixelRatio}setPixelRatio(x){this._overridePixelRatio=x,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(Ci.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom){const t=this._getTransformForUpdate();return t.setMinZoom(x),this._applyUpdatedTransform(t),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom){const t=this._getTransformForUpdate();return t.setMaxZoom(x),this._applyUpdatedTransform(t),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.setMinPitch(x),this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(x>=this.transform.minPitch)return this.transform.setMaxPitch(x),this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.setRenderWorldCopies(x),this._update()}setTransformConstrain(x){return this.transform.setConstrainOverride(x),this._update()}project(x){return this.transform.locationToScreenPoint(s.V.convert(x),this.style&&this.terrain)}unproject(x){return this.transform.screenPointToLocation(s.P.convert(x),this.terrain)}isMoving(){var x;return this._moving||((x=this.handlers)===null||x===void 0?void 0:x.isMoving())}isZooming(){var x;return this._zooming||((x=this.handlers)===null||x===void 0?void 0:x.isZooming())}isRotating(){var x;return this._rotating||((x=this.handlers)===null||x===void 0?void 0:x.isRotating())}_createDelegatedListener(x,t,o){if(x==="mouseenter"||x==="mouseover"){let m=!1;return{layers:t,listener:o,delegates:{mousemove:w=>{const T=t.filter((I=>this.getLayer(I))),E=T.length!==0?this.queryRenderedFeatures(w.point,{layers:T}):[];E.length?m||(m=!0,o.call(this,new Dn(x,this,w.originalEvent,{features:E}))):m=!1},mouseout:()=>{m=!1}}}}if(x==="mouseleave"||x==="mouseout"){let m=!1;return{layers:t,listener:o,delegates:{mousemove:T=>{const E=t.filter((I=>this.getLayer(I)));(E.length!==0?this.queryRenderedFeatures(T.point,{layers:E}):[]).length?m=!0:m&&(m=!1,o.call(this,new Dn(x,this,T.originalEvent)))},mouseout:T=>{m&&(m=!1,o.call(this,new Dn(x,this,T.originalEvent)))}}}}{const m=_=>{const w=t.filter((E=>this.getLayer(E))),T=w.length!==0?this.queryRenderedFeatures(_.point,{layers:w}):[];T.length&&(_.features=T,o.call(this,_),delete _.features)};return{layers:t,listener:o,delegates:{[x]:m}}}}_saveDelegatedListener(x,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(t)}_removeDelegatedListener(x,t,o){if(!this._delegatedListeners||!this._delegatedListeners[x])return;const m=this._delegatedListeners[x];for(let _=0;_<m.length;_++){const w=m[_];if(w.listener===o&&w.layers.length===t.length&&w.layers.every((T=>t.includes(T)))){for(const T in w.delegates)this.off(T,w.delegates[T]);return void m.splice(_,1)}}}on(x,t,o){if(o===void 0)return super.on(x,t);const m=typeof t=="string"?[t]:t,_=this._createDelegatedListener(x,m,o);this._saveDelegatedListener(x,_);for(const w in _.delegates)this.on(w,_.delegates[w]);return{unsubscribe:()=>{this._removeDelegatedListener(x,m,o)}}}once(x,t,o){if(o===void 0)return super.once(x,t);const m=typeof t=="string"?[t]:t,_=this._createDelegatedListener(x,m,o);for(const w in _.delegates){const T=_.delegates[w];_.delegates[w]=(...E)=>{this._removeDelegatedListener(x,m,o),T(...E)}}this._saveDelegatedListener(x,_);for(const w in _.delegates)this.once(w,_.delegates[w]);return this}off(x,t,o){return o===void 0?super.off(x,t):(this._removeDelegatedListener(x,typeof t=="string"?[t]:t,o),this)}queryRenderedFeatures(x,t){if(!this.style)return[];let o;const m=x instanceof s.P||Array.isArray(x),_=m?x:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(m?{}:x)||{},_ instanceof s.P||typeof _[0]=="number")o=[s.P.convert(_)];else{const w=s.P.convert(_[0]),T=s.P.convert(_[1]);o=[w,new s.P(T.x,w.y),T,new s.P(w.x,T.y),w]}return this.style.queryRenderedFeatures(o,t,this.transform)}querySourceFeatures(x,t){return this.style.querySourceFeatures(x,t)}setStyle(x,t){return(t=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(x,t))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const t=this._locale[x];if(t==null)throw new Error(`Missing UI string '${x}'`);return t}_updateStyle(x,t){var o,m;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(x,t)));const _=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!x)),x?(this.style=new ur(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x,t,_):this.style.loadJSON(x,t,_),this):((m=(o=this.style)===null||o===void 0?void 0:o.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ur(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,t){if(typeof x=="string"){const o=this._requestManager.transformRequest(x,"Style");s.j(o,new AbortController).then((m=>{this._updateDiff(m.data,t)})).catch((m=>{m&&this.fire(new s.k(m))}))}else typeof x=="object"&&this._updateDiff(x,t)}_updateDiff(x,t){try{this.style.setState(x,t)&&this._update(!0)}catch(o){s.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(x,t)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(x,t){return this._lazyInitEmptyStyle(),this.style.addSource(x,t),this._update(!0)}isSourceLoaded(x){const t=this.style&&this.style.tileManagers[x];if(t!==void 0)return t.loaded();this.fire(new s.k(new Error(`There is no tile manager with ID '${x}'`)))}setTerrain(x){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),x){const t=this.style.tileManagers[x.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${x.source}`);this.terrain===null&&t.reload();for(const o in this.style._layers){const m=this.style._layers[o];m.type==="hillshade"&&m.source===x.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===x.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Zi(this.painter,t,x),this.painter.renderToTexture=new Ul(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var m;o.dataType==="style"?this.terrain.tileManager.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==x.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=o.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:x})),this}getTerrain(){var x,t;return(t=(x=this.terrain)===null||x===void 0?void 0:x.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const x=this.style&&this.style.tileManagers;for(const t of Object.values(x))if(!t.areTilesLoaded())return!1;return!0}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}setSourceTileLodParams(x,t,o){if(o){const m=this.getSource(o);if(!m)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);m.calculateTileZoom=li(Math.max(1,x),Math.max(1,t))}else for(const m in this.style.tileManagers)this.style.tileManagers[m].getSource().calculateTileZoom=li(Math.max(1,x),Math.max(1,t));return this._update(!0),this}refreshTiles(x,t){const o=this.style.tileManagers[x];if(!o)throw new Error(`There is no tile manager with ID "${x}", cannot refresh tile`);t===void 0?o.reload(!0):o.refreshTiles(t.map((m=>new s.ac(m.z,m.x,m.y))))}addImage(x,t,o={}){const{pixelRatio:m=1,sdf:_=!1,stretchX:w,stretchY:T,content:E,textFitWidth:I,textFitHeight:R}=o;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||s.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:G,data:U}=t,K=t;return this.style.addImage(x,{data:new s.R({width:B,height:G},new Uint8Array(U)),pixelRatio:m,stretchX:w,stretchY:T,content:E,textFitWidth:I,textFitHeight:R,sdf:_,version:0,userImage:K}),K.onAdd&&K.onAdd(this,x),this}}{const{width:B,height:G,data:U}=X.getImageData(t);this.style.addImage(x,{data:new s.R({width:B,height:G},U),pixelRatio:m,stretchX:w,stretchY:T,content:E,textFitWidth:I,textFitHeight:R,sdf:_,version:0})}}updateImage(x,t){const o=this.style.getImage(x);if(!o)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=t instanceof HTMLImageElement||s.b(t)?X.getImageData(t):t,{width:_,height:w,data:T}=m;if(_===void 0||w===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==o.data.width||w!==o.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(t instanceof HTMLImageElement||s.b(t));return o.data.replace(T,E),this.style.updateImage(x,o),this}getImage(x){return this.style.getImage(x)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x){return Je.getImage(this._requestManager.transformRequest(x,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(x,t){return this._lazyInitEmptyStyle(),this.style.addLayer(x,t),this._update(!0)}moveLayer(x,t){return this.style.moveLayer(x,t),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(x,t,o){return this.style.setLayerZoomRange(x,t,o),this._update(!0)}setFilter(x,t,o={}){return this.style.setFilter(x,t,o),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,t,o,m={}){return this.style.setPaintProperty(x,t,o,m),this._update(!0)}getPaintProperty(x,t){return this.style.getPaintProperty(x,t)}setLayoutProperty(x,t,o,m={}){return this.style.setLayoutProperty(x,t,o,m),this._update(!0)}getLayoutProperty(x,t){return this.style.getLayoutProperty(x,t)}setGlyphs(x,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(x,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(x,t,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(x,t,o,(m=>{m||this._update(!0)})),this}removeSprite(x){return this._lazyInitEmptyStyle(),this.style.removeSprite(x),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(x,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(x,t,(o=>{o||this._update(!0)})),this}setLight(x,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(x,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(x,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(x,t){return this.style.setFeatureState(x,t),this._update()}removeFeatureState(x,t){return this.style.removeFeatureState(x,t),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,t=0;return this._container&&(x=this._container.clientWidth||400,t=this._container.clientHeight||300),[x,t]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map");const t=this._canvasContainer=H.create("div","maplibregl-canvas-container",x);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=H.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),m=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],m);const _=this._controlContainer=H.create("div","maplibregl-control-container",x),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((T=>{w[T]=H.create("div",`maplibregl-ctrl-${T} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(x,t,o){this._canvas.width=Math.floor(o*x),this._canvas.height=Math.floor(o*t),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const x=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(m=>{t={requestedAttributes:x},m&&(t.statusMessage=m.statusMessage,t.type=m.type)}),{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,x):this._canvas.getContext("webgl2",x)||this._canvas.getContext("webgl",x),!o){const m="Failed to initialize WebGL";throw t?(t.message=m,new Error(JSON.stringify(t))):new Error(m)}this.painter=new cc(o,this.transform),Se.testSupport(o)}migrateProjection(x,t){super.migrateProjection(x,t),this.painter.transform=x,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){var t,o,m,_,w;const T=this._idleTriggered?this._fadeDuration:0,E=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let I=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const G=this.transform.zoom,U=ae();this.style.zoomHistory.update(G,U);const K=new s.H(G,{now:U,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ee=K.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(I=!0,this._crossFadingFactor=ee),this.style.update(K)}const R=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==E;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(w=this.style.projection)===null||w===void 0?void 0:w.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||R)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,R),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cG.mark(s.cH.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||I)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,s.cG.mark(s.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var x;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Je.removeThrottleControl(this._imageQueueHandle),(x=this._resizeObserver)===null||x===void 0||x.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t?.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),H.remove(this._canvasContainer),H.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cG.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,X.frame(this._frameRequest,(x=>{s.cG.frame(x),this._frameRequest=null;try{this._render(x)}catch(t){if(!s.Z(t)&&!(function(o){return o.message===F})(t))throw t}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get version(){return td}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(x){return this._lazyInitEmptyStyle(),this.style.setProjection(x),this._update(!0)}},f.MapMouseEvent=Dn,f.MapTouchEvent=Rl,f.MapWheelEvent=mc,f.Marker=Zl,f.NavigationControl=class{constructor(x){this._updateZoomButtons=()=>{const t=this._map.getZoom(),o=t===this._map.getMaxZoom(),m=t===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,o)=>{const m=this._map._getUIString(`NavigationControl.${o}`);t.title=m,t.setAttribute("aria-label",m)},this.options=s.e({},id,x),this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),H.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),H.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=H.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){H.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,t){const o=H.create("button",x,this._container);return o.type="button",o.addEventListener("click",t),o}},f.Popup=class extends s.E{constructor(x){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&H.remove(this._content),this._container&&(H.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=H.create("div","maplibregl-popup",this._map.getContainer()),this._tip=H.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Qu(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const o=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const _=ih(this.options.offset);if(!m){const T=this._container.offsetWidth,E=this._container.offsetHeight;let I;I=o.y+_.bottom.y<E?["top"]:o.y>this._map.transform.height-E?["bottom"]:[],o.x<T/2?I.push("left"):o.x>this._map.transform.width-T/2&&I.push("right"),m=I.length===0?"bottom":I.join("-")}let w=o.add(_[m]);this.options.subpixelPositioning||(w=w.round()),H.setTransform(this._container,`${ql[m]} translate(${w.x}px,${w.y}px)`),eh(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(rd),x)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=s.V.convert(x),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const t=document.createDocumentFragment(),o=document.createElement("body");let m;for(o.innerHTML=x;m=o.firstChild,m;)t.appendChild(m);return this.setDOMContent(t)}getMaxWidth(){var x;return(x=this._container)===null||x===void 0?void 0:x.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=H.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){return this._container&&this._container.classList.add(x),this}removeClassName(x){return this._container&&this._container.classList.remove(x),this}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}setSubpixelPositioning(x){this.options.subpixelPositioning=x}_createCloseButton(){this.options.closeButton&&(this._closeButton=H.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(th);x&&x.focus()}},f.RasterDEMTileSource=$a,f.RasterTileSource=Ur,f.ScaleControl=class{constructor(x){this._onMove=()=>{Wl(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Wl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ad),x)}getDefaultPosition(){return"bottom-left"}onAdd(x){return this._map=x,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){H.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=Hu,f.Style=ur,f.TerrainControl=class{constructor(x){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=x}onAdd(x){return this._map=x,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=H.create("button","maplibregl-ctrl-terrain",this._container),H.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){H.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=vc,f.TwoFingersTouchRotateHandler=Xh,f.TwoFingersTouchZoomHandler=Yh,f.TwoFingersTouchZoomRotateHandler=$l,f.VectorTileSource=Nr,f.VideoSource=Le,f.addSourceType=(x,t)=>s._(void 0,void 0,void 0,(function*(){if(se(x))throw new Error(`A source type called "${x}" already exists.`);((o,m)=>{J[o]=m})(x,t)})),f.clearPrewarmedResources=function(){const x=dn;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(Jt),dn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=No,f.getMaxParallelImageRequests=function(){return s.c.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return Ce().getRTLTextPluginStatus()},f.getVersion=function(){return sd},f.getWorkerCount=function(){return Ct.workerCount},f.getWorkerUrl=function(){return s.c.WORKER_URL},f.importScriptInWorkers=function(x){return tr().broadcast("IS",x)},f.isTimeFrozen=function(){return re.isFrozen()},f.now=ae,f.prewarm=function(){Ba().acquire(Jt)},f.restoreNow=function(){re.restoreNow()},f.setMaxParallelImageRequests=function(x){s.c.MAX_PARALLEL_IMAGE_REQUESTS=x},f.setNow=function(x){re.setNow(x)},f.setRTLTextPlugin=function(x,t){return Ce().setRTLTextPlugin(x,t)},f.setWorkerCount=function(x){Ct.workerCount=x},f.setWorkerUrl=function(x){s.c.WORKER_URL=x}}));var p=l;return p}))})(vf)),vf.exports}var wk=bk();const kk=zx(wk);(function(r,i,l){function c(u,p){for(;(u=u.parentElement)&&!u.classList.contains(p););return u}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(u,p){this._map=u,this._container=u._container,this._overlayPane=u._panes.overlayPane,this._popupPane=u._panes.popupPane,p&&p.shapeOptions&&(p.shapeOptions=L.Util.extend({},this.options.shapeOptions,p.shapeOptions)),L.setOptions(this,p);var f=L.version.split(".");parseInt(f[0],10)===1&&parseInt(f[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(L.DomUtil.disableTextSelection(),u.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(u){L.setOptions(this,u)},_fireCreatedEvent:function(u){this._map.fire(L.Draw.Event.CREATED,{layer:u,layerType:this.type})},_cancelDrawing:function(u){u.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(u,p){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,p&&p.drawError&&(p.drawError=L.Util.extend({},this.options.drawError,p.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,u,p)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var u=this._markers.pop(),p=this._poly,f=p.getLatLngs(),s=f.splice(-1,1)[0];this._poly.setLatLngs(f),this._markerGroup.removeLayer(u),p.getLatLngs().length<2&&this._map.removeLayer(p),this._vertexChanged(s,!1)}},addVertex:function(u){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(u))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(u)),this._poly.addLatLng(u),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(u,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var u=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),p=this._poly.newLatLngIntersects(u[u.length-1]);if(!this.options.allowIntersection&&p||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(u){var p=this._map.mouseEventToLayerPoint(u.originalEvent),f=this._map.layerPointToLatLng(p);this._currentLatLng=f,this._updateTooltip(f),this._updateGuide(p),this._mouseMarker.setLatLng(f),L.DomEvent.preventDefault(u.originalEvent)},_vertexChanged:function(u,p){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(u,p),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(u){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(u),this._clickHandled=!0,this._disableNewMarkers();var p=u.originalEvent,f=p.clientX,s=p.clientY;this._startPoint.call(this,f,s)}},_startPoint:function(u,p){this._mouseDownOrigin=L.point(u,p)},_onMouseUp:function(u){var p=u.originalEvent,f=p.clientX,s=p.clientY;this._endPoint.call(this,f,s,u),this._clickHandled=null},_endPoint:function(u,p,f){if(this._mouseDownOrigin){var s=L.point(u,p).distanceTo(this._mouseDownOrigin),S=this._calculateFinishDistance(f.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(f.latlng),this._finishShape()):S<10&&L.Browser.touch?this._finishShape():Math.abs(s)<9*(r.devicePixelRatio||1)&&this.addVertex(f.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(u){var p,f,s=u.originalEvent;!s.touches||!s.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(p=s.touches[0].clientX,f=s.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,p,f),this._endPoint.call(this,p,f,u),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(u){var p;if(this._markers.length>0){var f;if(this.type===L.Draw.Polyline.TYPE)f=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;f=this._markers[0]}var s=this._map.latLngToContainerPoint(f.getLatLng()),S=new L.Marker(u,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),M=this._map.latLngToContainerPoint(S.getLatLng());p=s.distanceTo(M)}else p=1/0;return p},_updateFinishHandler:function(){var u=this._markers.length;u>1&&this._markers[u-1].on("click",this._finishShape,this),u>2&&this._markers[u-2].off("click",this._finishShape,this)},_createMarker:function(u){var p=new L.Marker(u,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(p),p},_updateGuide:function(u){var p=this._markers?this._markers.length:0;p>0&&(u=u||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[p-1].getLatLng()),u))},_updateTooltip:function(u){var p=this._getTooltipText();u&&this._tooltip.updatePosition(u),this._errorShown||this._tooltip.updateContent(p)},_drawGuide:function(u,p){var f,s,S,M=Math.floor(Math.sqrt(Math.pow(p.x-u.x,2)+Math.pow(p.y-u.y,2))),D=this.options.guidelineDistance,j=this.options.maxGuideLineLength,V=M>j?M-j:D;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));V<M;V+=this.options.guidelineDistance)f=V/M,s={x:Math.floor(u.x*(1-f)+f*p.x),y:Math.floor(u.y*(1-f)+f*p.y)},S=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),S.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(S,s)},_updateGuideColor:function(u){if(this._guidesContainer)for(var p=0,f=this._guidesContainer.childNodes.length;p<f;p++)this._guidesContainer.childNodes[p].style.backgroundColor=u},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var u,p,f=this.options.showLength;return this._markers.length===0?u={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(p=f?this._getMeasurementString():"",u=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:p}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:p}),u},_updateRunningMeasure:function(u,p){var f,s,S=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(f=S-(p?2:1),s=L.GeometryUtil.isVersion07x()?u.distanceTo(this._markers[f].getLatLng())*(this.options.factor||1):this._map.distance(u,this._markers[f].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=s*(p?1:-1))},_getMeasurementString:function(){var u,p=this._currentLatLng,f=this._markers[this._markers.length-1].getLatLng();return u=L.GeometryUtil.isVersion07x()?f&&p&&p.distanceTo?this._measurementRunningTotal+p.distanceTo(f)*(this.options.factor||1):this._measurementRunningTotal||0:f&&p?this._measurementRunningTotal+this._map.distance(p,f)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(u,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var u=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(u,p){L.Draw.Polyline.prototype.initialize.call(this,u,p),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var u=this._markers.length;u===1&&this._markers[0].on("click",this._finishShape,this),u>2&&(this._markers[u-1].on("dblclick",this._finishShape,this),u>3&&this._markers[u-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var u,p;return this._markers.length===0?u=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(u=L.drawLocal.draw.handlers.polygon.tooltip.cont,p=this._getMeasurementString()):(u=L.drawLocal.draw.handlers.polygon.tooltip.end,p=this._getMeasurementString()),{text:u,subtext:p}},_getMeasurementString:function(){var u=this._area,p="";return u||this.options.showLength?(this.options.showLength&&(p=L.Draw.Polyline.prototype._getMeasurementString.call(this)),u&&(p+="<br>"+L.GeometryUtil.readableArea(u,this.options.metric,this.options.precision)),p):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(u,p){var f;!this.options.allowIntersection&&this.options.showArea&&(f=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(f)),L.Draw.Polyline.prototype._vertexChanged.call(this,u,p)},_cleanUpShape:function(){var u=this._markers.length;u>0&&(this._markers[0].off("click",this._finishShape,this),u>2&&this._markers[u-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(u,p){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,u,p)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),i.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(i,"mouseup",this._onMouseUp,this),L.DomEvent.off(i,"touchend",this._onMouseUp,this),i.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(u){this._isDrawing=!0,this._startLatLng=u.latlng,L.DomEvent.on(i,"mouseup",this._onMouseUp,this).on(i,"touchend",this._onMouseUp,this).preventDefault(u.originalEvent)},_onMouseMove:function(u){var p=u.latlng;this._tooltip.updatePosition(p),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(p))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(u,p){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,u,p)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(u){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!c(u.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(u){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,u)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,u),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var u=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,u)},_getTooltipText:function(){var u,p,f,s=L.Draw.SimpleShape.prototype._getTooltipText.call(this),S=this._shape,M=this.options.showArea;return S&&(u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),p=L.GeometryUtil.geodesicArea(u),f=M?L.GeometryUtil.readableArea(p,this.options.metric):""),{text:s.text,subtext:f}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(u,p){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,u,p)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(u){var p=u.latlng;this._tooltip.updatePosition(p),this._mouseMarker.setLatLng(p),this._marker?(p=this._mouseMarker.getLatLng(),this._marker.setLatLng(p)):(this._marker=this._createMarker(p),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(u){return new L.Marker(u,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(u){this._onMouseMove(u),this._onClick()},_fireCreatedEvent:function(){var u=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(u,p){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,u,p)},_fireCreatedEvent:function(){var u=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)},_createMarker:function(u){return new L.CircleMarker(u,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(u,p){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,u,p)},_drawShape:function(u){if(L.GeometryUtil.isVersion07x())var p=this._startLatLng.distanceTo(u);else var p=this._map.distance(this._startLatLng,u);this._shape?this._shape.setRadius(p):(this._shape=new L.Circle(this._startLatLng,p,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var u=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,u)},_onMouseMove:function(u){var p,f=u.latlng,s=this.options.showRadius,S=this.options.metric;if(this._tooltip.updatePosition(f),this._isDrawing){this._drawShape(f),p=this._shape.getRadius().toFixed(1);var M="";s&&(M=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(p,S,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:M})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(u,p){this._marker=u,L.setOptions(this,p)},addHooks:function(){var u=this._marker;u.dragging.enable(),u.on("dragend",this._onDragEnd,u),this._toggleMarkerHighlight()},removeHooks:function(){var u=this._marker;u.dragging.disable(),u.off("dragend",this._onDragEnd,u),this._toggleMarkerHighlight()},_onDragEnd:function(u){var p=u.target;p.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:p})},_toggleMarkerHighlight:function(){var u=this._marker._icon;u&&(u.style.display="none",L.DomUtil.hasClass(u,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(u,"leaflet-edit-marker-selected"),this._offsetMarker(u,-4)):(L.DomUtil.addClass(u,"leaflet-edit-marker-selected"),this._offsetMarker(u,4)),u.style.display="")},_offsetMarker:function(u,p){var f=parseInt(u.style.marginTop,10)-p,s=parseInt(u.style.marginLeft,10)-p;u.style.marginTop=f+"px",u.style.marginLeft=s+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(u){this.latlngs=[u._latlngs],u._holes&&(this.latlngs=this.latlngs.concat(u._holes)),this._poly=u,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(u){for(var p=0;p<this._verticesHandlers.length;p++)u(this._verticesHandlers[p])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(u){u.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(u){u.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(u){u.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var u=0;u<this.latlngs.length;u++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[u],this._poly.options.poly))},_updateLatLngs:function(u){this.latlngs=[u.layer._latlngs],u.layer._holes&&(this.latlngs=this.latlngs.concat(u.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(u,p,f){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=u,f&&f.drawError&&(f.drawError=L.Util.extend({},this.options.drawError,f.drawError)),this._latlngs=p,L.setOptions(this,f)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var u=this._poly,p=u._path;u instanceof L.Polygon||(u.options.fill=!1,u.options.editing&&(u.options.editing.fill=!1)),p&&u.options.editing&&u.options.editing.className&&(u.options.original.className&&u.options.original.className.split(" ").forEach(function(f){L.DomUtil.removeClass(p,f)}),u.options.editing.className.split(" ").forEach(function(f){L.DomUtil.addClass(p,f)})),u.setStyle(u.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var u=this._poly,p=u._path;p&&u.options.editing&&u.options.editing.className&&(u.options.editing.className.split(" ").forEach(function(f){L.DomUtil.removeClass(p,f)}),u.options.original.className&&u.options.original.className.split(" ").forEach(function(f){L.DomUtil.addClass(p,f)})),u.setStyle(u.options.original),u._map&&(u._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var u,p,f,s,S=this._defaultShape();for(u=0,f=S.length;u<f;u++)s=this._createMarker(S[u],u),s.on("click",this._onMarkerClick,this),s.on("contextmenu",this._onContextMenu,this),this._markers.push(s);var M,D;for(u=0,p=f-1;u<f;p=u++)(u!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(M=this._markers[p],D=this._markers[u],this._createMiddleMarker(M,D),this._updatePrevNext(M,D))},_createMarker:function(u,p){var f=new L.Marker.Touch(u,{draggable:!0,icon:this.options.icon});return f._origLatLng=u,f._index=p,f.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(f),f},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var u=this._defaultShape(),p=[].splice.apply(u,arguments);return this._poly._convertLatLngs(u,!0),this._poly.redraw(),p},_removeMarker:function(u){var p=u._index;this._markerGroup.removeLayer(u),this._markers.splice(p,1),this._spliceLatLngs(p,1),this._updateIndexes(p,-1),u.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(u){var p=u.target,f=this._poly,s=L.LatLngUtil.cloneLatLng(p._origLatLng);if(L.extend(p._origLatLng,p._latlng),f.options.poly){var S=f._map._editTooltip;if(!f.options.poly.allowIntersection&&f.intersects()){L.extend(p._origLatLng,s),p.setLatLng(s);var M=f.options.color;f.setStyle({color:this.options.drawError.color}),S&&S.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){f.setStyle({color:M}),S&&S.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}p._middleLeft&&p._middleLeft.setLatLng(this._getMiddleLatLng(p._prev,p)),p._middleRight&&p._middleRight.setLatLng(this._getMiddleLatLng(p,p._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var D=this._poly.getLatLngs();this._poly._convertLatLngs(D,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(u){var p=L.Polygon&&this._poly instanceof L.Polygon?4:3,f=u.target;this._defaultShape().length<p||(this._removeMarker(f),this._updatePrevNext(f._prev,f._next),f._middleLeft&&this._markerGroup.removeLayer(f._middleLeft),f._middleRight&&this._markerGroup.removeLayer(f._middleRight),f._prev&&f._next?this._createMiddleMarker(f._prev,f._next):f._prev?f._next||(f._prev._middleRight=null):f._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(u){var p=u.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:p,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(u){var p=this._map.mouseEventToLayerPoint(u.originalEvent.touches[0]),f=this._map.layerPointToLatLng(p),s=u.target;L.extend(s._origLatLng,f),s._middleLeft&&s._middleLeft.setLatLng(this._getMiddleLatLng(s._prev,s)),s._middleRight&&s._middleRight.setLatLng(this._getMiddleLatLng(s,s._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(u,p){this._markerGroup.eachLayer(function(f){f._index>u&&(f._index+=p)})},_createMiddleMarker:function(u,p){var f,s,S,M=this._getMiddleLatLng(u,p),D=this._createMarker(M);D.setOpacity(.6),u._middleRight=p._middleLeft=D,s=function(){D.off("touchmove",s,this);var j=p._index;D._index=j,D.off("click",f,this).on("click",this._onMarkerClick,this),M.lat=D.getLatLng().lat,M.lng=D.getLatLng().lng,this._spliceLatLngs(j,0,M),this._markers.splice(j,0,D),D.setOpacity(1),this._updateIndexes(j,1),p._index++,this._updatePrevNext(u,D),this._updatePrevNext(D,p),this._poly.fire("editstart")},S=function(){D.off("dragstart",s,this),D.off("dragend",S,this),D.off("touchmove",s,this),this._createMiddleMarker(u,D),this._createMiddleMarker(D,p)},f=function(){s.call(this),S.call(this),this._fireEdit()},D.on("click",f,this).on("dragstart",s,this).on("dragend",S,this).on("touchmove",s,this),this._markerGroup.addLayer(D)},_updatePrevNext:function(u,p){u&&(u._next=p),p&&(p._prev=u)},_getMiddleLatLng:function(u,p){var f=this._poly._map,s=f.project(u.getLatLng()),S=f.project(p.getLatLng());return f.unproject(s._add(S)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(u,p){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=u,L.Util.setOptions(this,p)},addHooks:function(){var u=this._shape;this._shape._map&&(this._map=this._shape._map,u.setStyle(u.options.editing),u._map&&(this._map=u._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var u=this._shape;if(u.setStyle(u.options.original),u._map){this._unbindMarker(this._moveMarker);for(var p=0,f=this._resizeMarkers.length;p<f;p++)this._unbindMarker(this._resizeMarkers[p]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(u,p){var f=new L.Marker.Touch(u,{draggable:!0,icon:p,zIndexOffset:10});return this._bindMarker(f),this._markerGroup.addLayer(f),f},_bindMarker:function(u){u.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(u){u.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(u){u.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(u){var p=u.target,f=p.getLatLng();p===this._moveMarker?this._move(f):this._resize(f),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(u){u.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(u){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,u),typeof this._getCorners=="function"){var p=this._getCorners(),f=u.target,s=f._cornerIndex;f.setOpacity(0),this._oppositeCorner=p[(s+2)%4],this._toggleCornerMarkers(0,s)}this._shape.fire("editstart")},_onTouchMove:function(u){var p=this._map.mouseEventToLayerPoint(u.originalEvent.touches[0]),f=this._map.layerPointToLatLng(p);return u.target===this._moveMarker?this._move(f):this._resize(f),this._shape.redraw(),!1},_onTouchEnd:function(u){u.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var u=this._shape.getBounds(),p=u.getCenter();this._moveMarker=this._createMarker(p,this.options.moveIcon)},_createResizeMarker:function(){var u=this._getCorners();this._resizeMarkers=[];for(var p=0,f=u.length;p<f;p++)this._resizeMarkers.push(this._createMarker(u[p],this.options.resizeIcon)),this._resizeMarkers[p]._cornerIndex=p},_onMarkerDragStart:function(u){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,u);var p=this._getCorners(),f=u.target,s=f._cornerIndex;this._oppositeCorner=p[(s+2)%4],this._toggleCornerMarkers(0,s)},_onMarkerDragEnd:function(u){var p,f,s=u.target;s===this._moveMarker&&(p=this._shape.getBounds(),f=p.getCenter(),s.setLatLng(f)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,u)},_move:function(u){for(var p,f=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),s=this._shape.getBounds(),S=s.getCenter(),M=[],D=0,j=f.length;D<j;D++)p=[f[D].lat-S.lat,f[D].lng-S.lng],M.push([u.lat+p[0],u.lng+p[1]]);this._shape.setLatLngs(M),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(u){var p;this._shape.setBounds(L.latLngBounds(u,this._oppositeCorner)),p=this._shape.getBounds(),this._moveMarker.setLatLng(p.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var u=this._shape.getBounds();return[u.getNorthWest(),u.getNorthEast(),u.getSouthEast(),u.getSouthWest()]},_toggleCornerMarkers:function(u){for(var p=0,f=this._resizeMarkers.length;p<f;p++)this._resizeMarkers[p].setOpacity(u)},_repositionCornerMarkers:function(){for(var u=this._getCorners(),p=0,f=this._resizeMarkers.length;p<f;p++)this._resizeMarkers[p].setLatLng(u[p])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var u=this._shape.getLatLng();this._moveMarker=this._createMarker(u,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(u){if(this._resizeMarkers.length){var p=this._getResizeMarkerPoint(u);this._resizeMarkers[0].setLatLng(p)}this._shape.setLatLng(u),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var u=this._shape.getLatLng(),p=this._getResizeMarkerPoint(u);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(p,this.options.resizeIcon))},_getResizeMarkerPoint:function(u){var p=this._shape._radius*Math.cos(Math.PI/4),f=this._map.project(u);return this._map.unproject([f.x+p,f.y-p])},_resize:function(u){var p=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=p.distanceTo(u):radius=this._map.distance(p,u),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(u,p){var f={};if(u.touches!==void 0){if(!u.touches.length)return;f=u.touches[0]}else if(u.pointerType!=="touch"||(f=u,!this._filterClick(u)))return;var s=this._map.mouseEventToContainerPoint(f),S=this._map.mouseEventToLayerPoint(f),M=this._map.layerPointToLatLng(S);this._map.fire(p,{latlng:M,layerPoint:S,containerPoint:s,pageX:f.pageX,pageY:f.pageY,originalEvent:u})},_filterClick:function(u){var p=u.timeStamp||u.originalEvent.timeStamp,f=L.DomEvent._lastClick&&p-L.DomEvent._lastClick;return f&&f>100&&f<500||u.target._simulatedClick&&!u._simulated?(L.DomEvent.stop(u),!1):(L.DomEvent._lastClick=p,!0)},_onTouchStart:function(u){this._map._loaded&&this._touchEvent(u,"touchstart")},_onTouchEnd:function(u){this._map._loaded&&this._touchEvent(u,"touchend")},_onTouchCancel:function(u){if(this._map._loaded){var p="touchcancel";this._detectIE()&&(p="pointercancel"),this._touchEvent(u,p)}},_onTouchLeave:function(u){this._map._loaded&&this._touchEvent(u,"touchleave")},_onTouchMove:function(u){this._map._loaded&&this._touchEvent(u,"touchmove")},_detectIE:function(){var u=r.navigator.userAgent,p=u.indexOf("MSIE ");if(p>0)return parseInt(u.substring(p+5,u.indexOf(".",p)),10);if(u.indexOf("Trident/")>0){var f=u.indexOf("rv:");return parseInt(u.substring(f+3,u.indexOf(".",f)),10)}var s=u.indexOf("Edge/");return s>0&&parseInt(u.substring(s+5,u.indexOf(".",s)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var u=this._icon,p=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?p.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):p.concat(["touchcancel"]),L.DomUtil.addClass(u,"leaflet-clickable"),L.DomEvent.on(u,"click",this._onMouseClick,this),L.DomEvent.on(u,"keypress",this._onKeyPress,this);for(var f=0;f<p.length;f++)L.DomEvent.on(u,p[f],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var u=r.navigator.userAgent,p=u.indexOf("MSIE ");if(p>0)return parseInt(u.substring(p+5,u.indexOf(".",p)),10);if(u.indexOf("Trident/")>0){var f=u.indexOf("rv:");return parseInt(u.substring(f+3,u.indexOf(".",f)),10)}var s=u.indexOf("Edge/");return s>0&&parseInt(u.substring(s+5,u.indexOf(".",s)),10)}}),L.LatLngUtil={cloneLatLngs:function(u){for(var p=[],f=0,s=u.length;f<s;f++)Array.isArray(u[f])?p.push(L.LatLngUtil.cloneLatLngs(u[f])):p.push(this.cloneLatLng(u[f]));return p},cloneLatLng:function(u){return L.latLng(u.lat,u.lng)}},(function(){var u={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(p){var f,s,S=p.length,M=0,D=Math.PI/180;if(S>2){for(var j=0;j<S;j++)f=p[j],s=p[(j+1)%S],M+=(s.lng-f.lng)*D*(2+Math.sin(f.lat*D)+Math.sin(s.lat*D));M=6378137*M*6378137/2}return Math.abs(M)},formattedNumber:function(p,f){var s=parseFloat(p).toFixed(f),S=L.drawLocal.format&&L.drawLocal.format.numeric,M=S&&S.delimiters,D=M&&M.thousands,j=M&&M.decimal;if(D||j){var V=s.split(".");s=D?V[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+D):V[0],j=j||".",V.length>1&&(s=s+j+V[1])}return s},readableArea:function(p,f,D){var S,M,D=L.Util.extend({},u,D);return f?(M=["ha","m"],type=typeof f,type==="string"?M=[f]:type!=="boolean"&&(M=f),S=p>=1e6&&M.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*p,D.km)+" km":p>=1e4&&M.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*p,D.ha)+" ha":L.GeometryUtil.formattedNumber(p,D.m)+" m"):(p/=.836127,S=p>=3097600?L.GeometryUtil.formattedNumber(p/3097600,D.mi)+" mi":p>=4840?L.GeometryUtil.formattedNumber(p/4840,D.ac)+" acres":L.GeometryUtil.formattedNumber(p,D.yd)+" yd"),S},readableDistance:function(p,f,s,S,j){var D,j=L.Util.extend({},u,j);switch(f?typeof f=="string"?f:"metric":s?"feet":S?"nauticalMile":"yards"){case"metric":D=p>1e3?L.GeometryUtil.formattedNumber(p/1e3,j.km)+" km":L.GeometryUtil.formattedNumber(p,j.m)+" m";break;case"feet":p*=3.28083,D=L.GeometryUtil.formattedNumber(p,j.ft)+" ft";break;case"nauticalMile":p*=.53996,D=L.GeometryUtil.formattedNumber(p/1e3,j.nm)+" nm";break;case"yards":default:p*=1.09361,D=p>1760?L.GeometryUtil.formattedNumber(p/1760,j.mi)+" miles":L.GeometryUtil.formattedNumber(p,j.yd)+" yd"}return D},isVersion07x:function(){var p=L.version.split(".");return parseInt(p[0],10)===0&&parseInt(p[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(u,p,f,s){return this._checkCounterclockwise(u,f,s)!==this._checkCounterclockwise(p,f,s)&&this._checkCounterclockwise(u,p,f)!==this._checkCounterclockwise(u,p,s)},_checkCounterclockwise:function(u,p,f){return(f.y-u.y)*(p.x-u.x)>(p.y-u.y)*(f.x-u.x)}}),L.Polyline.include({intersects:function(){var u,p,f,s=this._getProjectedPoints(),S=s?s.length:0;if(this._tooFewPointsForIntersection())return!1;for(u=S-1;u>=3;u--)if(p=s[u-1],f=s[u],this._lineSegmentsIntersectsRange(p,f,u-2))return!0;return!1},newLatLngIntersects:function(u,p){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(u),p)},newPointIntersects:function(u,p){var f=this._getProjectedPoints(),s=f?f.length:0,S=f?f[s-1]:null,M=s-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(S,u,M,p?1:0)},_tooFewPointsForIntersection:function(u){var p=this._getProjectedPoints(),f=p?p.length:0;return f+=u||0,!p||f<=3},_lineSegmentsIntersectsRange:function(u,p,f,s){var S,M,D=this._getProjectedPoints();s=s||0;for(var j=f;j>s;j--)if(S=D[j-1],M=D[j],L.LineUtil.segmentsIntersect(u,p,S,M))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var u=[],p=this._defaultShape(),f=0;f<p.length;f++)u.push(this._map.latLngToLayerPoint(p[f]));return u}}),L.Polygon.include({intersects:function(){var u,p,f,s,S=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(u=S.length,p=S[0],f=S[u-1],s=u-2,this._lineSegmentsIntersectsRange(f,p,s,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(u){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,u);var p;this._toolbars={},L.DrawToolbar&&this.options.draw&&(p=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=p,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(p=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=p,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(u){var p,f=L.DomUtil.create("div","leaflet-draw"),s=!1;for(var S in this._toolbars)this._toolbars.hasOwnProperty(S)&&(p=this._toolbars[S].addToolbar(u))&&(s||(L.DomUtil.hasClass(p,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(p.childNodes[0],"leaflet-draw-toolbar-top"),s=!0),f.appendChild(p));return f},onRemove:function(){for(var u in this._toolbars)this._toolbars.hasOwnProperty(u)&&this._toolbars[u].removeToolbar()},setDrawingOptions:function(u){for(var p in this._toolbars)this._toolbars[p]instanceof L.DrawToolbar&&this._toolbars[p].setOptions(u)},_toolbarEnabled:function(u){var p=u.target;for(var f in this._toolbars)this._toolbars[f]!==p&&this._toolbars[f].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(u){L.setOptions(this,u),this._modes={},this._actionButtons=[],this._activeMode=null;var p=L.version.split(".");parseInt(p[0],10)===1&&parseInt(p[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(u){var p,f=L.DomUtil.create("div","leaflet-draw-section"),s=0,S=this._toolbarClass||"",M=this.getModeHandlers(u);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=u,p=0;p<M.length;p++)M[p].enabled&&this._initModeHandler(M[p].handler,this._toolbarContainer,s++,S,M[p].title);if(s)return this._lastButtonIndex=--s,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),f.appendChild(this._toolbarContainer),f.appendChild(this._actionsContainer),f},removeToolbar:function(){for(var u in this._modes)this._modes.hasOwnProperty(u)&&(this._disposeButton(this._modes[u].button,this._modes[u].handler.enable,this._modes[u].handler),this._modes[u].handler.disable(),this._modes[u].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var p=0,f=this._actionButtons.length;p<f;p++)this._disposeButton(this._actionButtons[p].button,this._actionButtons[p].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(u,p,f,s,S){var M=u.type;this._modes[M]={},this._modes[M].handler=u,this._modes[M].button=this._createButton({type:M,title:S,className:s+"-"+M,container:p,callback:this._modes[M].handler.enable,context:this._modes[M].handler}),this._modes[M].buttonIndex=f,this._modes[M].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!r.MSStream},_createButton:function(u){var p=L.DomUtil.create("a",u.className||"",u.container),f=L.DomUtil.create("span","sr-only",u.container);p.href="#",p.appendChild(f),u.title&&(p.title=u.title,f.innerHTML=u.title),u.text&&(p.innerHTML=u.text,f.innerHTML=u.text);var s=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(p,"click",L.DomEvent.stopPropagation).on(p,"mousedown",L.DomEvent.stopPropagation).on(p,"dblclick",L.DomEvent.stopPropagation).on(p,"touchstart",L.DomEvent.stopPropagation).on(p,"click",L.DomEvent.preventDefault).on(p,s,u.callback,u.context),p},_disposeButton:function(u,p){var f=this._detectIOS()?"touchstart":"click";L.DomEvent.off(u,"click",L.DomEvent.stopPropagation).off(u,"mousedown",L.DomEvent.stopPropagation).off(u,"dblclick",L.DomEvent.stopPropagation).off(u,"touchstart",L.DomEvent.stopPropagation).off(u,"click",L.DomEvent.preventDefault).off(u,f,p)},_handlerActivated:function(u){this.disable(),this._activeMode=this._modes[u.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(u){var p,f,s,S,M=this._actionsContainer,D=this.getActions(u),j=D.length;for(f=0,s=this._actionButtons.length;f<s;f++)this._disposeButton(this._actionButtons[f].button,this._actionButtons[f].callback);for(this._actionButtons=[];M.firstChild;)M.removeChild(M.firstChild);for(var V=0;V<j;V++)"enabled"in D[V]&&!D[V].enabled||(p=L.DomUtil.create("li","",M),S=this._createButton({title:D[V].title,text:D[V].text,container:p,callback:D[V].callback,context:D[V].context}),this._actionButtons.push({button:S,callback:D[V].callback}))},_showActionsToolbar:function(){var u=this._activeMode.buttonIndex,p=this._lastButtonIndex,f=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=f+"px",u===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),u===p&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(u){this._map=u,this._popupPane=u._panes.popupPane,this._visible=!1,this._container=u.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(u){return this._container?(u.subtext=u.subtext||"",u.subtext.length!==0||this._singleLineLabel?u.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(u.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+u.subtext+"</span><br />":"")+"<span>"+u.text+"</span>",u.text||u.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(u){var p=this._map.latLngToLayerPoint(u),f=this._container;return this._container&&(this._visible&&(f.style.visibility="inherit"),L.DomUtil.setPosition(f,p)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(u){for(var p in this.options)this.options.hasOwnProperty(p)&&u[p]&&(u[p]=L.extend({},this.options[p],u[p]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,u)},getModeHandlers:function(u){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(u,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(u,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(u,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(u,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(u,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(u,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(u){return[{enabled:u.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:u.completeShape,context:u},{enabled:u.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:u.deleteLastVertex,context:u},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(u){L.setOptions(this,u);for(var p in this._modes)this._modes.hasOwnProperty(p)&&u.hasOwnProperty(p)&&this._modes[p].handler.setOptions(u[p])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(u){u.edit&&(u.edit.selectedPathOptions===void 0&&(u.edit.selectedPathOptions=this.options.edit.selectedPathOptions),u.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,u.edit.selectedPathOptions)),u.remove&&(u.remove=L.extend({},this.options.remove,u.remove)),u.poly&&(u.poly=L.extend({},this.options.poly,u.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,u),this._selectedFeatureCount=0},getModeHandlers:function(u){var p=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(u,{featureGroup:p,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(u,{featureGroup:p}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(u){var p=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return u.removeAllLayers&&p.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),p},addToolbar:function(u){var p=L.Toolbar.prototype.addToolbar.call(this,u);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),p},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var u,p=this.options.featureGroup,f=p.getLayers().length!==0;this.options.edit&&(u=this._modes[L.EditToolbar.Edit.TYPE].button,f?L.DomUtil.removeClass(u,"leaflet-disabled"):L.DomUtil.addClass(u,"leaflet-disabled"),u.setAttribute("title",f?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(u=this._modes[L.EditToolbar.Delete.TYPE].button,f?L.DomUtil.removeClass(u,"leaflet-disabled"):L.DomUtil.addClass(u,"leaflet-disabled"),u.setAttribute("title",f?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(u,p){if(L.Handler.prototype.initialize.call(this,u),L.setOptions(this,p),this._featureGroup=p.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var f=L.version.split(".");parseInt(f[0],10)===1&&parseInt(f[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(u.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),u._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(u){this._revertLayer(u)},this)},save:function(){var u=new L.LayerGroup;this._featureGroup.eachLayer(function(p){p.edited&&(u.addLayer(p),p.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:u})},_backupLayer:function(u){var p=L.Util.stamp(u);this._uneditedLayerProps[p]||(u instanceof L.Polyline||u instanceof L.Polygon||u instanceof L.Rectangle?this._uneditedLayerProps[p]={latlngs:L.LatLngUtil.cloneLatLngs(u.getLatLngs())}:u instanceof L.Circle?this._uneditedLayerProps[p]={latlng:L.LatLngUtil.cloneLatLng(u.getLatLng()),radius:u.getRadius()}:(u instanceof L.Marker||u instanceof L.CircleMarker)&&(this._uneditedLayerProps[p]={latlng:L.LatLngUtil.cloneLatLng(u.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(u){var p=L.Util.stamp(u);u.edited=!1,this._uneditedLayerProps.hasOwnProperty(p)&&(u instanceof L.Polyline||u instanceof L.Polygon||u instanceof L.Rectangle?u.setLatLngs(this._uneditedLayerProps[p].latlngs):u instanceof L.Circle?(u.setLatLng(this._uneditedLayerProps[p].latlng),u.setRadius(this._uneditedLayerProps[p].radius)):(u instanceof L.Marker||u instanceof L.CircleMarker)&&u.setLatLng(this._uneditedLayerProps[p].latlng),u.fire("revert-edited",{layer:u}))},_enableLayerEdit:function(u){var p,f,s=u.layer||u.target||u;this._backupLayer(s),this.options.poly&&(f=L.Util.extend({},this.options.poly),s.options.poly=f),this.options.selectedPathOptions&&(p=L.Util.extend({},this.options.selectedPathOptions),p.maintainColor&&(p.color=s.options.color,p.fillColor=s.options.fillColor),s.options.original=L.extend({},s.options),s.options.editing=p),s instanceof L.Marker?(s.editing&&s.editing.enable(),s.dragging.enable(),s.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):s.editing.enable()},_disableLayerEdit:function(u){var p=u.layer||u.target||u;p.edited=!1,p.editing&&p.editing.disable(),delete p.options.editing,delete p.options.original,this._selectedPathOptions&&(p instanceof L.Marker?this._toggleMarkerHighlight(p):(p.setStyle(p.options.previousOptions),delete p.options.previousOptions)),p instanceof L.Marker?(p.dragging.disable(),p.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):p.editing.disable()},_onMouseMove:function(u){this._tooltip.updatePosition(u.latlng)},_onMarkerDragEnd:function(u){var p=u.target;p.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:p})},_onTouchMove:function(u){var p=u.originalEvent.changedTouches[0],f=this._map.mouseEventToLayerPoint(p),s=this._map.layerPointToLatLng(f);u.target.setLatLng(s)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(u,p){if(L.Handler.prototype.initialize.call(this,u),L.Util.setOptions(this,p),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var f=L.version.split(".");parseInt(f[0],10)===1&&parseInt(f[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(u.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(u){this._deletableLayers.addLayer(u),u.fire("revert-deleted",{layer:u})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(u){this._removeLayer({layer:u})},this),this.save()},_enableLayerDelete:function(u){(u.layer||u.target||u).on("click",this._removeLayer,this)},_disableLayerDelete:function(u){var p=u.layer||u.target||u;p.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(p)},_removeLayer:function(u){var p=u.layer||u.target||u;this._deletableLayers.removeLayer(p),this._deletedLayers.addLayer(p),p.fire("deleted")},_onMouseMove:function(u){this._tooltip.updatePosition(u.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);function Qc(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ky={},Yy;function Sk(){return Yy||(Yy=1,(function(){function r(i,l,c){function u(s,S){if(!l[s]){if(!i[s]){var M=typeof Qc=="function"&&Qc;if(!S&&M)return M(s,!0);if(p)return p(s,!0);var D=new Error("Cannot find module '"+s+"'");throw D.code="MODULE_NOT_FOUND",D}var j=l[s]={exports:{}};i[s][0].call(j.exports,function(V){var X=i[s][1][V];return u(X||V)},j,j.exports,r,i,l,c)}return l[s].exports}for(var p=typeof Qc=="function"&&Qc,f=0;f<c.length;f++)u(c[f]);return u}return r})()({1:[function(r,i,l){function c(u,p,f){var s=!1;if(typeof window.XMLHttpRequest>"u")return p(Error("Browser not supported"));if(typeof f>"u"){var S=u.match(/^\s*https?:\/\/[^\/]*/);f=S&&S[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var M=new window.XMLHttpRequest;function D(X){return X>=200&&X<300||X===304}if(f&&!("withCredentials"in M)){M=new window.XDomainRequest;var j=p;p=function(){if(s)j.apply(this,arguments);else{var X=this,re=arguments;setTimeout(function(){j.apply(X,re)},0)}}}function V(){M.status===void 0||D(M.status)?p.call(M,null,M):p.call(M,M,null)}return"onload"in M?M.onload=V:M.onreadystatechange=function(){M.readyState===4&&V()},M.onerror=function(re){p.call(this,re||!0,null),p=function(){}},M.onprogress=function(){},M.ontimeout=function(X){p.call(this,X,null),p=function(){}},M.onabort=function(X){p.call(this,X,null),p=function(){}},M.open("GET",u,!0),M.send(null),s=!0,M}typeof i<"u"&&(i.exports=c)},{}],2:[function(r,i,l){var c={};function u(s){return Math.floor(Math.abs(s)+.5)*Math.sign(s)}function p(s,S,M){s=u(s*M),S=u(S*M);var D=s-S;D<<=1,s-S<0&&(D=~D);for(var j="";D>=32;)j+=String.fromCharCode((32|D&31)+63),D>>=5;return j+=String.fromCharCode(D+63),j}c.decode=function(s,S){for(var M=0,D=0,j=0,V=[],X=0,re=0,ae=null,H,Se,xe=Math.pow(10,S||5);M<s.length;){ae=null,X=0,re=0;do ae=s.charCodeAt(M++)-63,re|=(ae&31)<<X,X+=5;while(ae>=32);H=re&1?~(re>>1):re>>1,X=re=0;do ae=s.charCodeAt(M++)-63,re|=(ae&31)<<X,X+=5;while(ae>=32);Se=re&1?~(re>>1):re>>1,D+=H,j+=Se,V.push([D/xe,j/xe])}return V},c.encode=function(s,S){if(!s.length)return"";for(var M=Math.pow(10,S||5),D=p(s[0][0],0,M)+p(s[0][1],0,M),j=1;j<s.length;j++){var V=s[j],X=s[j-1];D+=p(V[0],X[0],M),D+=p(V[1],X[1],M)}return D};function f(s){for(var S=[],M=0;M<s.length;M++)S.push(s[M].slice().reverse());return S}c.fromGeoJSON=function(s,S){if(s&&s.type==="Feature"&&(s=s.geometry),!s||s.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return c.encode(f(s.coordinates),S)},c.toGeoJSON=function(s,S){var M=c.decode(s,S);return{type:"LineString",coordinates:f(M)}},typeof i=="object"&&i.exports&&(i.exports=c)},{}],3:[function(r,i,l){var c=r("./languages"),u=c.instructions,p=c.grammars,f=c.abbreviations;i.exports=function(s){return Object.keys(u).forEach(function(S){if(!u[S][s])throw"invalid version "+s+": "+S+" not supported"}),{capitalizeFirstLetter:function(S,M){return M.charAt(0).toLocaleUpperCase(S)+M.slice(1)},ordinalize:function(S,M){if(!S)throw new Error("No language code provided");return u[S][s].constants.ordinalize[M.toString()]||""},directionFromDegree:function(S,M){if(!S)throw new Error("No language code provided");if(!M&&M!==0)return"";if(M>=0&&M<=20)return u[S][s].constants.direction.north;if(M>20&&M<70)return u[S][s].constants.direction.northeast;if(M>=70&&M<=110)return u[S][s].constants.direction.east;if(M>110&&M<160)return u[S][s].constants.direction.southeast;if(M>=160&&M<=200)return u[S][s].constants.direction.south;if(M>200&&M<250)return u[S][s].constants.direction.southwest;if(M>=250&&M<=290)return u[S][s].constants.direction.west;if(M>290&&M<340)return u[S][s].constants.direction.northwest;if(M>=340&&M<=360)return u[S][s].constants.direction.north;throw new Error("Degree "+M+" invalid")},laneConfig:function(S){if(!S.intersections||!S.intersections[0].lanes)throw new Error("No lanes object");var M=[],D=null;return S.intersections[0].lanes.forEach(function(j){(D===null||D!==j.valid)&&(j.valid?M.push("o"):M.push("x"),D=j.valid)}),M.join("")},getWayName:function(S,M,D){var j=D?D.classes||[]:[];if(typeof M!="object")throw new Error("step must be an Object");if(!S)throw new Error("No language code provided");if(!Array.isArray(j))throw new Error("classes must be an Array or undefined");var V,X=M.name||"",re=(M.ref||"").split(";")[0];X===M.ref&&(X=""),X=X.replace(" ("+M.ref+")","");var ae=j.indexOf("motorway")!==-1;if(X&&re&&X!==re&&!ae){var H=u[S][s].phrase["name and ref"]||u.en[s].phrase["name and ref"];V=this.tokenize(S,H,{name:X,ref:re},D)}else X&&re&&ae&&/\d/.test(re)||!X&&re?V=D&&D.formatToken?D.formatToken("ref",re):re:V=D&&D.formatToken?D.formatToken("name",X):X;return V},compile:function(S,M,D){if(!S)throw new Error("No language code provided");if(c.supportedCodes.indexOf(S)===-1)throw new Error("language code "+S+" not loaded");if(!M.maneuver)throw new Error("No step maneuver provided");var j=D||{},V=M.maneuver.type,X=M.maneuver.modifier,re=M.mode,ae=M.driving_side;if(!V)throw new Error("Missing step maneuver type");if(V!=="depart"&&V!=="arrive"&&!X)throw new Error("Missing step maneuver modifier");u[S][s][V]||(console.log("Encountered unknown instruction type: "+V),V="turn");var H;if(u[S][s].modes[re])H=u[S][s].modes[re];else{var Se=V==="off ramp"&&X.indexOf(ae)>=0;u[S][s][V][X]&&!Se?H=u[S][s][V][X]:H=u[S][s][V].default}var xe;switch(V){case"use lane":xe=u[S][s].constants.lanes[this.laneConfig(M)],xe||(H=u[S][s]["use lane"].no_lanes);break;case"rotary":case"roundabout":M.rotary_name&&M.maneuver.exit&&H.name_exit?H=H.name_exit:M.rotary_name&&H.name?H=H.name:M.maneuver.exit&&H.exit?H=H.exit:H=H.default;break}var Pe=this.getWayName(S,M,j),Ve;M.destinations&&M.exits&&H.exit_destination?Ve=H.exit_destination:M.destinations&&H.destination?Ve=H.destination:M.exits&&H.exit?Ve=H.exit:Pe&&H.name?Ve=H.name:j.waypointName&&H.named?Ve=H.named:Ve=H.default;var Ue=M.destinations&&M.destinations.split(": "),et=Ue&&Ue[0].split(",")[0],Je=Ue&&Ue[1]&&Ue[1].split(",")[0],nt;Je&&et?nt=et+": "+Je:nt=et||Je||"";var mt=j.legIndex>=0&&j.legIndex!==j.legCount-1?this.ordinalize(S,j.legIndex+1):"",Tt={way_name:Pe,destination:nt,exit:(M.exits||"").split(";")[0],exit_number:this.ordinalize(S,M.maneuver.exit||1),rotary_name:M.rotary_name,lane_instruction:xe,modifier:u[S][s].constants.modifier[X],direction:this.directionFromDegree(S,M.maneuver.bearing_after),nth:mt,waypoint_name:j.waypointName};return this.tokenize(S,Ve,Tt,j)},grammarize:function(S,M,D){if(!S)throw new Error("No language code provided");if(M&&D&&p&&p[S]&&p[S][s]){var j=p[S][s][D];if(j){var V=" "+M+" ",X=p[S].meta.regExpFlags||"";return j.forEach(function(re){var ae=new RegExp(re[0],X);V=V.replace(ae,re[1])}),V.trim()}}return M},abbreviations:f,tokenize:function(S,M,D,j){if(!S)throw new Error("No language code provided");var V=this,X=!1,re=M.replace(/\{(\w+)(?::(\w+))?\}/g,function(ae,H,Se,xe){var Pe=D[H];return typeof Pe>"u"?ae:(Pe=V.grammarize(S,Pe,Se),xe===0&&u[S].meta.capitalizeFirstLetter&&(X=!0,Pe=V.capitalizeFirstLetter(S,Pe)),j&&j.formatToken&&(Pe=j.formatToken(H,Pe)),Pe)}).replace(/ {2}/g," ");return!X&&u[S].meta.capitalizeFirstLetter?this.capitalizeFirstLetter(S,re):re}}}},{"./languages":4}],4:[function(r,i,l){var c=r("./languages/translations/da.json"),u=r("./languages/translations/de.json"),p=r("./languages/translations/en.json"),f=r("./languages/translations/eo.json"),s=r("./languages/translations/es.json"),S=r("./languages/translations/es-ES.json"),M=r("./languages/translations/fi.json"),D=r("./languages/translations/fr.json"),j=r("./languages/translations/he.json"),V=r("./languages/translations/id.json"),X=r("./languages/translations/it.json"),re=r("./languages/translations/ko.json"),ae=r("./languages/translations/my.json"),H=r("./languages/translations/nl.json"),Se=r("./languages/translations/no.json"),xe=r("./languages/translations/pl.json"),Pe=r("./languages/translations/pt-BR.json"),Ve=r("./languages/translations/pt-PT.json"),Ue=r("./languages/translations/ro.json"),et=r("./languages/translations/ru.json"),Je=r("./languages/translations/sv.json"),nt=r("./languages/translations/tr.json"),mt=r("./languages/translations/uk.json"),Tt=r("./languages/translations/vi.json"),vt=r("./languages/translations/zh-Hans.json"),bt=r("./languages/grammar/fr.json"),si=r("./languages/grammar/ru.json"),di=r("./languages/abbreviations/bg.json"),Wt=r("./languages/abbreviations/ca.json"),Bt=r("./languages/abbreviations/da.json"),Vt=r("./languages/abbreviations/de.json"),xt=r("./languages/abbreviations/en.json"),Mt=r("./languages/abbreviations/es.json"),wt=r("./languages/abbreviations/fr.json"),Ht=r("./languages/abbreviations/he.json"),mi=r("./languages/abbreviations/hu.json"),ki=r("./languages/abbreviations/lt.json"),Jt=r("./languages/abbreviations/nl.json"),Ct=r("./languages/abbreviations/ru.json"),Pt=r("./languages/abbreviations/sl.json"),dn=r("./languages/abbreviations/sv.json"),Ii=r("./languages/abbreviations/uk.json"),Ba=r("./languages/abbreviations/vi.json"),Cn={da:c,de:u,en:p,eo:f,es:s,"es-ES":S,fi:M,fr:D,he:j,id:V,it:X,ko:re,my:ae,nl:H,no:Se,pl:xe,"pt-BR":Pe,"pt-PT":Ve,ro:Ue,ru:et,sv:Je,tr:nt,uk:mt,vi:Tt,"zh-Hans":vt},tr={fr:bt,ru:si},xn={bg:di,ca:Wt,da:Bt,de:Vt,en:xt,es:Mt,fr:wt,he:Ht,hu:mi,lt:ki,nl:Jt,ru:Ct,sl:Pt,sv:dn,uk:Ii,vi:Ba};i.exports={supportedCodes:Object.keys(Cn),instructions:Cn,grammars:tr,abbreviations:xn}},{"./languages/abbreviations/bg.json":5,"./languages/abbreviations/ca.json":6,"./languages/abbreviations/da.json":7,"./languages/abbreviations/de.json":8,"./languages/abbreviations/en.json":9,"./languages/abbreviations/es.json":10,"./languages/abbreviations/fr.json":11,"./languages/abbreviations/he.json":12,"./languages/abbreviations/hu.json":13,"./languages/abbreviations/lt.json":14,"./languages/abbreviations/nl.json":15,"./languages/abbreviations/ru.json":16,"./languages/abbreviations/sl.json":17,"./languages/abbreviations/sv.json":18,"./languages/abbreviations/uk.json":19,"./languages/abbreviations/vi.json":20,"./languages/grammar/fr.json":21,"./languages/grammar/ru.json":22,"./languages/translations/da.json":23,"./languages/translations/de.json":24,"./languages/translations/en.json":25,"./languages/translations/eo.json":26,"./languages/translations/es-ES.json":27,"./languages/translations/es.json":28,"./languages/translations/fi.json":29,"./languages/translations/fr.json":30,"./languages/translations/he.json":31,"./languages/translations/id.json":32,"./languages/translations/it.json":33,"./languages/translations/ko.json":34,"./languages/translations/my.json":35,"./languages/translations/nl.json":36,"./languages/translations/no.json":37,"./languages/translations/pl.json":38,"./languages/translations/pt-BR.json":39,"./languages/translations/pt-PT.json":40,"./languages/translations/ro.json":41,"./languages/translations/ru.json":42,"./languages/translations/sv.json":43,"./languages/translations/tr.json":44,"./languages/translations/uk.json":45,"./languages/translations/vi.json":46,"./languages/translations/zh-Hans.json":47}],5:[function(r,i,l){i.exports={abbreviations:{:"",:"",:"",:"Mkt",:"",:"",:"",:"",:"",:"",:"-",:"",:"-",:"",:"",:"",:"",:"-",:"-",:"-",:"",:"",:"",:"",:"",:".",:"",:"",:"-",:"",:""},classifications:{:"",:"",:"",:"",:"-",:"",:"",:"-",:"-",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},directions:{:"",:"",:"",:"",:"",:"",:""}}},{}],6:[function(r,i,l){i.exports={abbreviations:{comunicacions:"Com.","entitat de poblaci":"Nucli",disseminat:"Diss.","cap de municipi":"Cap",indret:"Indr.",comarca:"Cca.","relleu del litoral":"Lit.",municipi:"Mun.","xarxa hidrogrfica":"Curs Fluv.",equipament:"Equip.",orografia:"Orogr.",barri:"Barri",edificaci:"Edif.","edificaci histrica":"Edif. Hist.","entitat descentralitzada":"E.M.D.","element hidrogrfic":"Hidr."},classifications:{rotonda:"Rot.",carrerada:"Ca.",jard:"J.",paratge:"Pge.",pont:"Pont",lloc:"Lloc",rambla:"Rbla.",cases:"Cses.",barranc:"Bnc.",plana:"Plana",polgon:"Pol.",muralla:"Mur.",enlla:"Ella","antiga carretera":"Actra",glorieta:"Glor.",autovia:"Autv.",prolongaci:"Prol.",calada:"Cda.",carretera:"Ctra.",pujada:"Pda.",torrent:"T.",disseminat:"Disse",barri:"B.",cintur:"Cinto",passera:"Psera",sender:"Send.",carrer:"C.",squia:"Sq.",blocs:"Bloc",rambleta:"Rblt.",partida:"Par.",costa:"Cos.",sector:"Sec.",corral:"Crral",urbanitzaci:"Urb.",autopista:"Autp.",grup:"Gr.",platja:"Pja.",jardins:"J.",complex:"Comp.",portals:"Ptals",finca:"Fin.",travessera:"Trav.",plaa:"Pl.",travessia:"Trv.","polgon industrial":"PI.",passatge:"Ptge.",apartaments:"Apmt.",mirador:"Mira.",antic:"Antic",accs:"Acc.",colnia:"Col.",corriol:"Crol.",portal:"Ptal.",porta:"Pta.",port:"Port",carrer:"Cr.",riera:"Ra.","circumvallaci":"Cval.",baixada:"Bda.",placeta:"Plta.",escala:"Esc.","gran via":"GV",rial:"Rial",conjunt:"Conj.",avinguda:"Av.",esplanada:"Esp.",cantonada:"Cant.",ronda:"Rda.",corredor:"Cdor.",drecera:"Drec.",passads:"Pds.",viaducte:"Vdct.",passeig:"Pg.",venat:"Ve."},directions:{sudest:"SE",sudoest:"SO",nordest:"NE",nordoest:"NO",est:"E",nord:"N",oest:"O",sud:"S"}}},{}],7:[function(r,i,l){i.exports={abbreviations:{skole:"Sk.",ved:"v.",centrum:"C.",sankt:"Skt.",vestre:"v.",hospital:"Hosp.",strde:"Str.",nordre:"Nr.",plads:"Pl.",universitet:"Uni.",vnge:"vg.",station:"St."},classifications:{avenue:"Ave",gammel:"Gl.",dronning:"Dronn.",snder:"Sdr.",nrre:"Nr.",vester:"V.",vestre:"V.",ster:".",stre:".",boulevard:"Boul."},directions:{sydst:"S",nordvest:"NV",syd:"S",nordst:"N",sydvest:"SV",vest:"V",nord:"N",st:""}}},{}],8:[function(r,i,l){i.exports={abbreviations:{},classifications:{},directions:{osten:"O",nordosten:"NO",sden:"S",nordwest:"NW",norden:"N",sdost:"SO",sdwest:"SW",westen:"W"}}},{}],9:[function(r,i,l){i.exports={abbreviations:{square:"Sq",centre:"Ctr",sister:"Sr",lake:"Lk",fort:"Ft",route:"Rte",william:"Wm",national:"Natl",junction:"Jct",center:"Ctr",saint:"St",saints:"SS",station:"Sta",mount:"Mt",junior:"Jr",mountain:"Mtn",heights:"Hts",university:"Univ",school:"Sch",international:"Intl",apartments:"Apts",crossing:"Xing",creek:"Crk",township:"Twp",downtown:"Dtwn",father:"Fr",senior:"Sr",point:"Pt",river:"Riv",market:"Mkt",village:"Vil",park:"Pk",memorial:"Mem"},classifications:{place:"Pl",circle:"Cir",bypass:"Byp",motorway:"Mwy",crescent:"Cres",road:"Rd",cove:"Cv",lane:"Ln",square:"Sq",street:"St",freeway:"Fwy",walk:"Wk",plaza:"Plz",parkway:"Pky",avenue:"Ave",pike:"Pk",drive:"Dr",highway:"Hwy",footway:"Ftwy",point:"Pt",court:"Ct",terrace:"Ter",walkway:"Wky",alley:"Aly",expressway:"Expy",bridge:"Br",boulevard:"Blvd",turnpike:"Tpk"},directions:{southeast:"SE",northwest:"NW",south:"S",west:"W",southwest:"SW",north:"N",east:"E",northeast:"NE"}}},{}],10:[function(r,i,l){i.exports={abbreviations:{segunda:"2",octubre:"8bre",doctores:"Drs",doctora:"Dra",internacional:"Intl",doctor:"Dr",segundo:"2",seorita:"Srta",doctoras:"Drs",primera:"1",primero:"1",san:"S",colonia:"Col",doa:"Da",septiembre:"7bre",diciembre:"10bre",seor:"Sr",ayuntamiento:"Ayto",seora:"Sra",tercera:"3",tercero:"3",don:"D",santa:"Sta",ciudad:"Cdad",noviembre:"9bre",departamento:"Dep"},classifications:{camino:"Cmno",avenida:"Av",paseo:"P",autopista:"Auto",calle:"C",plaza:"Pza",carretera:"Crta"},directions:{este:"E",noreste:"NE",sur:"S",suroeste:"SO",noroeste:"NO",oeste:"O",sureste:"SE",norte:"N"}}},{}],11:[function(r,i,l){i.exports={abbreviations:{alle:"All",arodrome:"Arod",aroport:"Arop"},classifications:{centrale:"Ctrale",campings:"Camp.",urbains:"Urb.",mineure:"Min.",publique:"Publ.",suprieur:"Sup.",fdration:"Fd.","notre-dame":"ND",saint:"St","centre hospitalier rgional":"CHR",exploitation:"Exploit.",gnral:"Gal",civiles:"Civ.",maritimes:"Marit.",aviation:"Aviat.",iii:"3",archologique:"Archo.",musical:"Music.",musicale:"Music.",immeuble:"Imm.",xv:"15",htel:"Ht.",alpine:"Alp.",communale:"Commun.",v:"5",global:"Glob.",universit:"Univ.",confdral:"Confd.",xx:"20",x:"10",piscine:"Pisc.",dimanche:"di.",fleuve:"Flv",postaux:"Post.",musicienne:"Music.",dpartement:"Dpt",fvrier:"Fvr.",municipales:"Munic.",province:"Prov.",communauts:"Commts",barrage:"Barr.",mercredi:"me.",prsidentes:"Pdtes",caftrias:"Caft.",thtral:"Th.",viticulteur:"Vitic.",poste:"Post.",spcialise:"Spc.",agriculture:"Agric.",infirmier:"Infirm.",animation:"Anim.",mondiale:"Mond.",arrt:"Arr.",zone:"zon.",municipaux:"Munic.",grand:"Gd",janvier:"Janv.",fondateur:"Fond.",premire:"1re",municipale:"Munic.",direction:"Dir.",anonyme:"Anon.",dpartementale:"Dpt",moyens:"Moy.",novembre:"Nov.",jardin:"Jard.",petites:"Pet.",priv:"Priv.",centres:"Ctres",forestier:"Forest.",xiv:"14",africaines:"Afric.",sergent:"Sgt",europenne:"Eur.",prive:"Priv.",caf:"Cf",xix:"19",hautes:"Htes",major:"Mjr",vendredi:"ve.",municipalit:"Munic.","sous-prfecture":"Ss-prf.",spciales:"Spc.",secondaires:"Second.",viie:"7e",moyenne:"Moy.",commerciale:"Commerc.",rgion:"Rg.",amricaines:"Amr.",amricains:"Amr.",service:"Sce",professeur:"Prof.",dpartemental:"Dpt",htels:"Ht.",mondiales:"Mond.",ire:"1re",caporal:"Capo.",militaire:"Milit.","lyce d'enseignement professionnel":"LEP",adjudant:"Adj.",mdicale:"Md.",confrences:"Confr.",universelle:"Univ.",xiie:"12e",suprieures:"Sup.",naturel:"Natur.","socit nationale":"SN",hospitalier:"Hosp.",culturelle:"Cult.",amricain:"Amr.","son altesse royale":"S.A.R.",infirmire:"Infirm.",viii:"8",fondatrice:"Fond.",madame:"Mme",mtropolitain:"Mtrop.",ophtalmologues:"Ophtalmos",xviie:"18e",viiie:"8e",commerante:"Commer.","centre d'enseignement du second degr":"CES",septembre:"Sept.",agriculteur:"Agric.",xiii:"13",pontifical:"Pontif.",caftria:"Caft.",prince:"Pce",vie:"6e",archiduchesse:"Archid.",occidental:"Occ.",spectacles:"Spect.",camping:"Camp.",mtro:"M",arrondissement:"Arrond.",viticole:"Vitic.",ii:"2",sicle:"Si.",chapelles:"Chap.",centre:"Ctre","sapeur-pompiers":"Sap.-pomp.",tablissements:"tabts","socit anonyme":"SA",directeurs:"Dir.",vii:"7",culturel:"Cult.",central:"Ctral",mtropolitaine:"Mtrop.",administrations:"Admin.",amiraux:"Amir.",sur:"s/",premiers:"1ers","provence-alpes-cte d'azur":"PACA",cathdrale:"Cathd.",iv:"4",postale:"Post.",social:"Soc.",spcialis:"Spc.",district:"Distr.",technologique:"Techno.",viticoles:"Vitic.",ix:"9",protgs:"Prot.",historiques:"Hist.",sous:"s/s",national:"Nal",ambassade:"Amb.",cafs:"Cfs",agronomie:"Agro.",sapeurs:"Sap.",petits:"Pet.",monsieur:"M.",boucher:"Bouch.",restaurant:"Restau.",lyce:"Lyc.",urbaine:"Urb.",prfecture:"Prf.",districts:"Distr.",civil:"Civ.",protges:"Prot.",sapeur:"Sap.",thtre:"Th.",collge:"Coll.",mardi:"ma.",mmorial:"Mmor.",africain:"Afric.",rpublicaine:"Rpubl.",sociale:"Soc.",spcial:"Spc.",technologie:"Techno.",charcuterie:"Charc.",commerces:"Commerc.",fluviale:"Flv",parachutistes:"Para.",primaires:"Prim.",directions:"Dir.",prsidentiel:"Pdtl",nationales:"Nales",aprs:"apr.",samedi:"sa.",unit:"U.",xxiii:"23",associ:"Assoc.",lectrique:"lectr.",populaire:"Pop.",asiatique:"Asiat.",navigable:"Navig.",prsidente:"Pdte",xive:"14e",associs:"Assoc.",pompiers:"Pomp.",agricoles:"Agric.",lm:"lm.",dcembre:"Dc.","son altesse":"S.Alt.","aprs-midi":"a.-m.",mineures:"Min.",juillet:"Juil.",aviatrices:"Aviat.",fondation:"Fond.",pontificaux:"Pontif.",temple:"Tple",europennes:"Eur.",rgionale:"Rg.",informations:"Infos",mondiaux:"Mond.",infanterie:"Infant.",archologie:"Archo.",dans:"d/",hospice:"Hosp.",spectacle:"Spect.","htels-restaurants":"Ht.-Rest.","htel-restaurant":"Ht.-Rest.",hlicoptre:"hlico",xixe:"19e",cliniques:"Clin.",docteur:"Dr",secondaire:"Second.",municipal:"Munic.",gnrale:"Gale",chteau:"Cht.",commerant:"Commer.",avril:"Avr.",clinique:"Clin.",urbaines:"Urb.",navale:"Nav.",navigation:"Navig.",asiatiques:"Asiat.",pontificales:"Pontif.",administrative:"Admin.",syndicat:"Synd.",lundi:"lu.",petite:"Pet.",maritime:"Marit.",mtros:"M",enseignement:"Enseign.",fluviales:"Flv",historique:"Hist.",comts:"Cts",rsidentiel:"Rsid.",international:"Int.",suprieure:"Sup.","centre hospitalier universitaire":"CHU",confdration:"Confd.",boucherie:"Bouch.",fondatrices:"Fond.",mdicaux:"Md.",europens:"Eur.",orientaux:"Ori.",naval:"Nav.",tang:"tg",provincial:"Prov.",junior:"Jr",dpartementales:"Dpt",musique:"Musiq.",directrices:"Dir.",marchal:"Mal",civils:"Civ.",protg:"Prot.",tablissement:"tabt",trafic:"Traf.",aviateur:"Aviat.",archives:"Arch.",africains:"Afric.",maternelle:"Matern.",industrielle:"Ind.",administratif:"Admin.",oriental:"Ori.",universitaire:"Univ.",majeur:"Maj.",haute:"Hte",communal:"Commun.",petit:"Pet.",commune:"Commun.",exploitant:"Exploit.",confrence:"Confr.",monseigneur:"Mgr",pharmacien:"Pharm.",jeudi:"je.",primaire:"Prim.",hlicoptres:"hlicos",agronomique:"Agro.",mdecin:"Md.",ve:"5e",pontificale:"Pontif.",ier:"1er",cinma:"Cin",fluvial:"Flv",occidentaux:"Occ.",commerants:"Commer.",banque:"Bq",moyennes:"Moy.",pharmacienne:"Pharm.",dmocratique:"Dm.",cinmas:"Cins",spciale:"Spc.",prsidents:"Pdts",directrice:"Dir.",vi:"6",basse:"Bas.",xve:"15e",tat:".",aviateurs:"Aviat.",majeurs:"Maj.",infirmiers:"Infirm.",glise:"gl.",confdrale:"Confd.",xxie:"21e",comte:"Cte",europen:"Eur.",union:"U.",pharmacie:"Pharm.",infirmires:"Infirm.",comt:"Ct",sportive:"Sport.",deuxime:"2e",xvi:"17",haut:"Ht",mdicales:"Md.",dvelopp:"Dvelop.",btiment:"Bt.",commerce:"Commerc.",ive:"4e",associatif:"Assoc.",rural:"Rur.",cimetire:"Cim.",rgional:"Rg.",ferroviaire:"Ferr.",vers:"v/",mosque:"Mosq.",mineurs:"Min.",nautique:"Naut.",chteaux:"Cht.",sportif:"Sport.",mademoiselle:"Mle",cole:"c.",doyen:"Doy.",industriel:"Ind.",chapelle:"Chap.",socits:"Sts",internationale:"Int.",coopratif:"Coop.",hospices:"Hosp.",xxii:"22",parachutiste:"Para.",alpines:"Alp.",civile:"Civ.",xvie:"17e",tats:".",muse:"Mse",centrales:"Ctrales",globaux:"Glob.",suprieurs:"Sup.",syndicats:"Synd.",archevque:"Archev.",docteurs:"Drs",bibliothque:"Biblio.",lieutenant:"Lieut.",rpublique:"Rp.",vtrinaire:"Vt.",dpartementaux:"Dpt",premier:"1er",fluviaux:"Flv",anim:"Anim.",orientales:"Ori.",technologiques:"Techno.",princesse:"Pse",routire:"Rout.",cooprative:"Coop.",scolaire:"Scol.",coles:"c.",football:"Foot",territoriale:"Territ.",commercial:"Commerc.",mineur:"Min.",millnaires:"Mill.",association:"Assoc.",catholique:"Cathol.",administration:"Admin.",mairie:"Mair.",portuaire:"Port.",tertiaires:"Terti.",thtrale:"Th.",palais:"Pal.",troisime:"3e",directeur:"Dir.",vtrinaires:"Vt.",facult:"Fac.",occidentales:"Occ.",viticulteurs:"Vitic.",xvii:"18",occidentale:"Occ.",amiral:"Amir.",professionnel:"Profess.",administratives:"Admin.",commerciales:"Commerc.",saints:"Sts",agronomes:"Agro.",stade:"Std","sous-prfet":"Ss-prf.",senior:"Sr",agronome:"Agro.",terrain:"Terr.",catholiques:"Cathol.",rsidentielle:"Rsid.",grands:"Gds",exploitants:"Exploit.",xiiie:"13e",croix:"Cx",gnraux:"Gaux",crdit:"Crd.",cimetires:"Cim.",antenne:"Ant.",mdical:"Md.",collges:"Coll.",musicien:"Music.",apostolique:"Apost.",postal:"Post.",territorial:"Territ.",urbanisme:"Urb.",prfectorale:"Prf.",fondateurs:"Fond.",information:"Info.",glises:"gl.",ophtalmologue:"Ophtalmo",congrgation:"Congrg.",charcutier:"Charc.",tage:"t.",consulat:"Consul.",public:"Publ.",ferre:"Ferr.",matin:"mat.","socit anonyme  responsabilit limite":"SARL",monuments:"Mmts",protection:"Prot.",universel:"Univ.",nationale:"Nale",prsident:"Pdt",provinciale:"Prov.",agriculteurs:"Agric.",prfectoral:"Prf.",xxe:"20e",alpins:"Alp.",avant:"av.",infirmerie:"Infirm.","deux mil":"2000",rurale:"Rur.",administratifs:"Admin.",octobre:"Oct.",archipel:"Archip.",communaut:"Commt",globales:"Glob.",alpin:"Alp.",numros:"N","lieutenant-colonel":"Lieut.-Col.","jsus-christ":"J.-C.",agricole:"Agric.","sa majest":"S.Maj.",associative:"Assoc.",xxi:"21",prsidentielle:"Pdtle",moyen:"Moy.",fdral:"Fd.",professionnelle:"Profess.",tertiaire:"Terti.",ixe:"9e",hpital:"Hp.",technologies:"Techno.",iiie:"3e",dveloppement:"Dvelop.",monument:"Mmt",forestire:"Forest.",numro:"N",viticulture:"Vitic.",traversire:"Traver.",technique:"Tech.",lectriques:"lectr.",militaires:"Milit.",pompier:"Pomp.",amricaine:"Amr.",prfet:"Prf.",congrgations:"Congrg.",ptissier:"Ptiss.",mondial:"Mond.",ophtalmologie:"Ophtalm.",sainte:"Ste",africaine:"Afric.",aviatrice:"Aviat.",doyens:"Doy.",socit:"St",majeures:"Maj.",orientale:"Ori.",ministre:"Min.",archiduc:"Archid.",territoire:"Territ.",techniques:"Tech.","le-de-france":"IDF",globale:"Glob.",xe:"10e",xie:"11e",majeure:"Maj.",commerciaux:"Commerc.",maire:"Mair.",spciaux:"Spc.",grande:"Gde",messieurs:"MM",colonel:"Col.",millnaire:"Mill.",xi:"11",urbain:"Urb.",fdrale:"Fd.",ferr:"Ferr.",rivire:"Riv.",rpublicain:"Rpubl.",grandes:"Gdes",rgiment:"Rgim.",hauts:"Hts",catgorie:"Catg.",basses:"Bas.",xii:"12",agronomiques:"Agro.",iie:"2e",protge:"Prot.","sapeur-pompier":"Sap.-pomp."},directions:{"est-nord-est":"ENE","nord-est":"NE",ouest:"O","sud-est":"SE","est-sud-est":"ESE","nord-nord-est":"NNE",sud:"S","nord-nord-ouest":"NNO","nord-ouest":"NO",nord:"N","ouest-sud-ouest":"OSO","ouest-nord-ouest":"ONO","sud-ouest":"SO","sud-sud-est":"SSE","sud-sud-ouest":"SSO",est:"E"}}},{}],12:[function(r,i,l){i.exports={abbreviations:{:"'"},classifications:{},directions:{}}},{}],13:[function(r,i,l){i.exports={abbreviations:{},classifications:{},directions:{kelet:"K",szakkelet:"K",dl:"D",szaknyugat:"NY",szak:"",dlkelet:"DK",dlnyugat:"DNY",nyugat:"NY"}}},{}],14:[function(r,i,l){i.exports={abbreviations:{apartamentai:"Apt",auktumos:"Auk",centras:"Ctr",eeras:"E",fortas:"Ft",greitkelis:"Grtkl",juosta:"Jst",kaimas:"Km",kalnas:"Kln",kelias:"Kl",kiemelis:"Kml",miestelis:"Mstl","miesto centras":"M.Ctr",mokykla:"Mok",nacionalinis:"Nac",paminklas:"Pmkl",parkas:"Pk",pusratis:"Psrt",sankrya:"Skr",ses:"Ses",skveras:"Skv",stotis:"St",v:"v",tarptautinis:"Trptaut",takas:"Tk",tvas:"Tv",turgus:"Tgs",universitetas:"Univ",up:"Up",upelis:"Up",vieta:"Vt"},classifications:{aikt:"a.",alja:"al.",aplinkkelis:"aplinkl.",autostrada:"auto.",bulvaras:"b.",gatv:"g.",kelias:"kel.",krantin:"krant.",prospektas:"pr.",plentas:"pl.",skersgatvis:"skg.",takas:"tak.",tiltas:"tlt."},directions:{piets:"P",vakarai:"V",iaur:"","iaurs vakarai":"V",pietryiai:"PR","iaurs rytai":"R",rytai:"R",pietvakariai:"PV"}}},{}],15:[function(r,i,l){i.exports={abbreviations:{centrum:"Cntrm",nationaal:"Natl",berg:"Brg",meer:"Mr",kruising:"Krsng",toetreden:"Ttrdn"},classifications:{bypass:"Pass",brug:"Br",straat:"Str",rechtbank:"Rbank",snoek:"Snk",autobaan:"Baan",terras:"Trrs",punt:"Pt",plaza:"Plz",rijden:"Rijd",parkway:"Pky",inham:"Nham",snelweg:"Weg","halve maan":"Maan",cirkel:"Crkl",laan:"Ln",rijbaan:"Strook",weg:"Weg",lopen:"Lpn",autoweg:"Weg",boulevard:"Blvd",plaats:"Plts",steeg:"Stg",voetpad:"Stoep"},directions:{noordoost:"NO",westen:"W",zuiden:"Z",zuidwest:"ZW",oost:"O",zuidoost:"ZO",noordwest:"NW",noorden:"N"}}},{}],16:[function(r,i,l){i.exports={abbreviations:{:".",:".",:"",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:".",:"."},classifications:{:"-",:".",:".",:".",:".",:".",:".",:".",:"."},directions:{:"","-":"","-":"","-":"","-":"",:"",:"",:""}}},{}],17:[function(r,i,l){i.exports={abbreviations:{},classifications:{},directions:{vzhod:"V",severovzhod:"SV",jug:"J",severozahod:"SZ",sever:"S",jugovzhod:"JV",jugozahod:"JZ",zahod:"Z"}}},{}],18:[function(r,i,l){i.exports={abbreviations:{sankta:"s:ta",gamla:"G:la",sankt:"s:t"},classifications:{Bro:"Br"},directions:{norr:"N",sydst:"SO",vster:"V",ster:"O",nordvst:"NV",sydvst:"SV",sder:"S",nordst:"NO"}}},{}],19:[function(r,i,l){i.exports={abbreviations:{},classifications:{},directions:{:""," ":"",:""," ":"",:""," ":""," ":"",:""}}},{}],20:[function(r,i,l){i.exports={abbreviations:{"vin bo tng":"VBT","th trn":"Tt","i hc":"H","cn c khng quan":"CCKQ","cu lc b":"CLB","bu in":"B","khch sn":"KS","khu du lch":"KDL","khu cng nghip":"KCN","khu ngh mt":"KNM","th x":"Tx","khu chung c":"KCC","phi trng":"PT","trung tm":"TT","tng cng ty":"TCty","trung hc c s":"THCS","sn bay quc t":"SBQT","trung hc ph thng":"THPT","cao ng":"C","cng ty":"Cty","sn bay":"SB","thnh ph":"Tp","cng vin":"CV","sn vn ng":"SV","linh mc":"LM","vn quc gia":"VQG"},classifications:{"huyn l":"HL","ng tnh":"T","quc l":"QL","xa l":"XL","hng l":"HL","tnh l":"TL","ng huyn":"H","ng cao tc":"CT","i l":"L","vit nam":"VN","qung trng":"QT","ng b":"B"},directions:{ty:"T",nam:"N","ng nam":"N","ng bc":"B","ty nam":"TN",ng:"",bc:"B"}}},{}],21:[function(r,i,l){i.exports={meta:{regExpFlags:"gi"},v5:{article:[["^ Acc[e]s "," laccs "],["^ Aire "," laire "],["^ All[e]e "," lalle "],["^ Anse "," lanse "],["^ (L['])?Autoroute "," lautoroute "],["^ Avenue "," lavenue "],["^ Barreau "," le barreau "],["^ Boulevard "," le boulevard "],["^ Chemin "," le chemin "],["^ Petit[\\- ]Chemin "," le petit chemin "],["^ Cit[e] "," la cit "],["^ Clos "," le clos "],["^ Corniche "," la corniche "],["^ Cour "," la cour "],["^ Cours "," le cours "],["^ D[e]viation "," la dviation "],["^ Entr[e]e "," lentre "],["^ Esplanade "," lesplanade "],["^ Galerie "," la galerie "],["^ Impasse "," limpasse "],["^ Lotissement "," le lotissement "],["^ Mont[e]e "," la monte "],["^ Parc "," le parc "],["^ Parvis "," le parvis "],["^ Passage "," le passage "],["^ Place "," la place "],["^ Petit[\\- ]Pont "," le petit-pont "],["^ Pont "," le pont "],["^ Promenade "," la promenade "],["^ Quai "," le quai "],["^ Rocade "," la rocade "],["^ Rond[\\- ]?Point "," le rond-point "],["^ Route "," la route "],["^ Rue "," la rue "],["^ Grande Rue "," la grande rue "],["^ Sente "," la sente "],["^ Sentier "," le sentier "],["^ Sortie "," la sortie "],["^ Souterrain "," le souterrain "],["^ Square "," le square "],["^ Terrasse "," la terrasse "],["^ Traverse "," la traverse "],["^ Tunnel "," le tunnel "],["^ Viaduc "," le viaduc "],["^ Villa "," la villa "],["^ Village "," le village "],["^ Voie "," la voie "],[" ([dl])'"," $1"]],preposition:[["^ Le ","  du "],["^ Les ","  des "],["^ La ","  de La "],["^ Acc[e]s ","  de laccs "],["^ Aire ","  de laire "],["^ All[e]e ","  de lalle "],["^ Anse ","  de lanse "],["^ (L['])?Autoroute ","  de lautoroute "],["^ Avenue ","  de lavenue "],["^ Barreau ","  du barreau "],["^ Boulevard ","  du boulevard "],["^ Chemin ","  du chemin "],["^ Petit[\\- ]Chemin ","  du petit chemin "],["^ Cit[e] ","  de la cit "],["^ Clos ","  du clos "],["^ Corniche ","  de la corniche "],["^ Cour ","  de la cour "],["^ Cours ","  du cours "],["^ D[e]viation ","  de la dviation "],["^ Entr[e]e ","  de lentre "],["^ Esplanade ","  de lesplanade "],["^ Galerie ","  de la galerie "],["^ Impasse ","  de limpasse "],["^ Lotissement ","  du lotissement "],["^ Mont[e]e ","  de la monte "],["^ Parc ","  du parc "],["^ Parvis ","  du parvis "],["^ Passage ","  du passage "],["^ Place ","  de la place "],["^ Petit[\\- ]Pont ","  du petit-pont "],["^ Pont ","  du pont "],["^ Promenade ","  de la promenade "],["^ Quai ","  du quai "],["^ Rocade ","  de la rocade "],["^ Rond[\\- ]?Point ","  du rond-point "],["^ Route ","  de la route "],["^ Rue ","  de la rue "],["^ Grande Rue ","  de la grande rue "],["^ Sente ","  de la sente "],["^ Sentier ","  du sentier "],["^ Sortie ","  de la sortie "],["^ Souterrain ","  du souterrain "],["^ Square ","  du square "],["^ Terrasse ","  de la terrasse "],["^ Traverse ","  de la traverse "],["^ Tunnel ","  du tunnel "],["^ Viaduc ","  du viaduc "],["^ Villa ","  de la villa "],["^ Village ","  du village "],["^ Voie ","  de la voie "],["^ ([AEIOUY])","  d$1"],["^ (\\S)","  de $1"],[" ([dl])'"," $1"]],rotary:[["^ Le ","  le rond-point du "],["^ Les ","  le rond-point des "],["^ La ","  le rond-point de La "],["^ Acc[e]s "," le rond-point de laccs "],["^ Aire ","  le rond-point de laire "],["^ All[e]e ","  le rond-point de lalle "],["^ Anse ","  le rond-point de lanse "],["^ (L['])?Autoroute ","  le rond-point de lautoroute "],["^ Avenue ","  le rond-point de lavenue "],["^ Barreau ","  le rond-point du barreau "],["^ Boulevard ","  le rond-point du boulevard "],["^ Chemin ","  le rond-point du chemin "],["^ Petit[\\- ]Chemin ","  le rond-point du petit chemin "],["^ Cit[e] ","  le rond-point de la cit "],["^ Clos ","  le rond-point du clos "],["^ Corniche ","  le rond-point de la corniche "],["^ Cour ","  le rond-point de la cour "],["^ Cours ","  le rond-point du cours "],["^ D[e]viation ","  le rond-point de la dviation "],["^ Entr[e]e ","  le rond-point de lentre "],["^ Esplanade ","  le rond-point de lesplanade "],["^ Galerie ","  le rond-point de la galerie "],["^ Impasse ","  le rond-point de limpasse "],["^ Lotissement ","  le rond-point du lotissement "],["^ Mont[e]e ","  le rond-point de la monte "],["^ Parc ","  le rond-point du parc "],["^ Parvis ","  le rond-point du parvis "],["^ Passage ","  le rond-point du passage "],["^ Place ","  le rond-point de la place "],["^ Petit[\\- ]Pont ","  le rond-point du petit-pont "],["^ Pont ","  le rond-point du pont "],["^ Promenade ","  le rond-point de la promenade "],["^ Quai ","  le rond-point du quai "],["^ Rocade ","  le rond-point de la rocade "],["^ Rond[\\- ]?Point ","  le rond-point "],["^ Route ","  le rond-point de la route "],["^ Rue ","  le rond-point de la rue "],["^ Grande Rue ","  le rond-point de la grande rue "],["^ Sente ","  le rond-point de la sente "],["^ Sentier ","  le rond-point du sentier "],["^ Sortie ","  le rond-point de la sortie "],["^ Souterrain ","  le rond-point du souterrain "],["^ Square ","  le rond-point du square "],["^ Terrasse ","  le rond-point de la terrasse "],["^ Traverse ","  le rond-point de la traverse "],["^ Tunnel ","  le rond-point du tunnel "],["^ Viaduc ","  le rond-point du viaduc "],["^ Villa ","  le rond-point de la villa "],["^ Village ","  le rond-point du village "],["^ Voie ","  le rond-point de la voie "],["^ ([AEIOUY])","  le rond-point d$1"],["^ (\\S)","  le rond-point de $1"],[" ([dl])'"," $1"]],arrival:[["^ Le ","  au "],["^ Les ","  aux "],["^ La ","   La "],["^ (\\S)","   $1"],[" ([dl])'"," $1"]]}}},{}],22:[function(r,i,l){i.exports={meta:{regExpFlags:""},v5:{accusative:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ [][] ","  "]],dative:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "],["([]) ","$1 "]],genitive:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "]],prepositional:[['^ (["])',"  $1"],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)-(\\S+) [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^  [] ","   "],["^  [] ","   "],["^  [] ","   "],["^ [] ","  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\d+)-(\\d+)- [] "," $1-$2-  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- [] "," $1-  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) (\\S+) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+) (\\S+) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+)[]-(\\S+)[] [] "," $1-$2  "],["^ (\\d+)- (\\S+)[]-(\\S+)[] [] "," $1- $2-$3  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ [] ","  "],["^ (\\S+[])-(\\S+)[] [] "," $1-$2  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) (\\S+)[] [] "," $1- $2 $3  "],["^ (\\d+)- (\\S+)[] (\\S+)[] [] "," $1- $2 $3  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [][] "," $1  "],["^ (\\S+)[] [][] "," $1  "],["^ (\\S+[]) [][] "," $1  "],["^ (\\S+)[] (\\S+) [][] "," $1 $2  "],["^ (\\S+) (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [][] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [][] "," $1 $2  "],["^ (\\d+)- (\\S+) [][] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [][] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [][] "," $1- $2  "],["^ [][] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+) [] "," $1  "],["^ (\\S+)[] [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+)[] (\\S+) [] "," $1 $2  "],["^ (\\S+) (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+)[] [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\S+)[] (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- [] "," $1-  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],["^ (\\d+)- (\\S+)[] [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ [] ","  "],["^ (\\S+[]) ([])?[] "," $1 $2 "],["^ (\\S+) ([])?[] "," $1 $2 "],["^ (\\S+[]) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\S+) (\\S+[]) ([])?[] "," $1 $2 $3 "],["^ (\\d+)- (\\S+[]) ([])?[] "," $1- $2 $3 "],["^ (\\d+)- (\\S+) ([])?[] "," $1- $2 $3 "],["^ ([])?[] "," $1 "],["^ (\\S+[]) [] "," $1  "],["^ (\\S+) [] "," $1  "],["^ (\\S+[]) (\\S+[]) [] "," $1 $2  "],["^ (\\S+) (\\S+[]) [] "," $1 $2  "],["^ (\\d+)- (\\S+[]) [] "," $1- $2  "],["^ (\\d+)- (\\S+) [] "," $1- $2  "],[" ([]) "," $1 "],["([]) ","$1 "]]}}},{}],23:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"frste",2:"anden",3:"tredje",4:"fjerde",5:"femte",6:"sjette",7:"syvende",8:"ottende",9:"niende",10:"tiende"},direction:{north:"Nord",northeast:"Nordst",east:"st",southeast:"Sydst",south:"Syd",southwest:"Sydvest",west:"Vest",northwest:"Nordvest"},modifier:{left:"venstresving",right:"hjresving","sharp left":"skarpt venstresving","sharp right":"skarpt hjresving","slight left":"svagt venstresving","slight right":"svagt hjresving",straight:"ligeud",uturn:"U-vending"},lanes:{xo:"Hold til hjre",ox:"Hold til venstre",xox:"Benyt midterste spor",oxo:"Hold til hjre eller venstre"}},modes:{ferry:{default:"Tag frgen",name:"Tag frgen {way_name}",destination:"Tag frgen i retning {destination}"}},phrase:{"two linked by distance":"{instruction_one} derefter, efter {distance}, {instruction_two}","two linked":"{instruction_one}, derefter {instruction_two}","one in distance":"Efter {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":"afkrsel {exit}"},arrive:{default:{default:"Du er ankommet til din {nth} destination",upcoming:"Du vil ankomme til din {nth} destination",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}"},left:{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},right:{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"sharp left":{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},"sharp right":{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"slight right":{default:"Du er ankommet til din {nth} destination, som befinder sig til hjre",upcoming:"Du vil ankomme til din {nth} destination p hjre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til hjre"},"slight left":{default:"Du er ankommet til din {nth} destination, som befinder sig til venstre",upcoming:"Du vil ankomme til din {nth} destination p venstre hnd",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, som befinder sig til venstre"},straight:{default:"Du er ankommet til din {nth} destination, der befinder sig lige frem",upcoming:"Du vil ankomme til din {nth} destination foran dig",short:"Du er ankommet","short-upcoming":"Du vil ankomme",named:"Du er ankommet til {waypoint_name}, der befinder sig lige frem"}},continue:{default:{default:"Drej til {modifier}",name:"Drej til {modifier} videre ad {way_name}",destination:"Drej til {modifier} mod {destination}",exit:"Drej til {modifier} ad {way_name}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst mod {destination}",distance:"Fortst {distance} ligeud",namedistance:"Fortst {distance} ad {way_name}"},"sharp left":{default:"Drej skarpt til venstre",name:"Drej skarpt til venstre videre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre",name:"Drej skarpt til hjre videre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},"slight left":{default:"Drej left til venstre",name:"Drej let til venstre videre ad {way_name}",destination:"Drej let til venstre mod {destination}"},"slight right":{default:"Drej let til hjre",name:"Drej let til hjre videre ad {way_name}",destination:"Drej let til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending tilbage ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},depart:{default:{default:"Kr mod {direction}",name:"Kr mod {direction} ad {way_name}",namedistance:"Fortst {distance} ad {way_name}mod {direction}"}},"end of road":{default:{default:"Drej til {modifier}",name:"Drej til {modifier} ad {way_name}",destination:"Drej til {modifier} mof {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst ligeud mod {destination}"},uturn:{default:"Foretag en U-vending for enden af vejen",name:"Foretag en U-vending ad {way_name} for enden af vejen",destination:"Foretag en U-vending mod {destination} for enden af vejen"}},fork:{default:{default:"Hold til {modifier} ved udfletningen",name:"Hold mod {modifier} p {way_name}",destination:"Hold mod {modifier} mod {destination}"},"slight left":{default:"Hold til venstre ved udfletningen",name:"Hold til venstre p {way_name}",destination:"Hold til venstre mod {destination}"},"slight right":{default:"Hold til hjre ved udfletningen",name:"Hold til hjre p {way_name}",destination:"Hold til hjre mod {destination}"},"sharp left":{default:"Drej skarpt til venstre ved udfletningen",name:"Drej skarpt til venstre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre ved udfletningen",name:"Drej skarpt til hjre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},merge:{default:{default:"Flet til {modifier}",name:"Flet til {modifier} ad {way_name}",destination:"Flet til {modifier} mod {destination}"},straight:{default:"Flet",name:"Flet ind p {way_name}",destination:"Flet ind mod {destination}"},"slight left":{default:"Flet til venstre",name:"Flet til venstre ad {way_name}",destination:"Flet til venstre mod {destination}"},"slight right":{default:"Flet til hjre",name:"Flet til hjre ad {way_name}",destination:"Flet til hjre mod {destination}"},"sharp left":{default:"Flet til venstre",name:"Flet til venstre ad {way_name}",destination:"Flet til venstre mod {destination}"},"sharp right":{default:"Flet til hjre",name:"Flet til hjre ad {way_name}",destination:"Flet til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},"new name":{default:{default:"Fortst {modifier}",name:"Fortst {modifier} ad {way_name}",destination:"Fortst {modifier} mod {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ad {way_name}",destination:"Fortst mod {destination}"},"sharp left":{default:"Drej skarpt til venstre",name:"Drej skarpt til venstre ad {way_name}",destination:"Drej skarpt til venstre mod {destination}"},"sharp right":{default:"Drej skarpt til hjre",name:"Drej skarpt til hjre ad {way_name}",destination:"Drej skarpt til hjre mod {destination}"},"slight left":{default:"Fortst til venstre",name:"Fortst til venstre ad {way_name}",destination:"Fortst til venstre mod {destination}"},"slight right":{default:"Fortst til hjre",name:"Fortst til hjre ad {way_name}",destination:"Fortst til hjre mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},notification:{default:{default:"Fortst {modifier}",name:"Fortst {modifier} ad {way_name}",destination:"Fortst {modifier} mod {destination}"},uturn:{default:"Foretag en U-vending",name:"Foretag en U-vending ad {way_name}",destination:"Foretag en U-vending mod {destination}"}},"off ramp":{default:{default:"Tag afkrslen",name:"Tag afkrslen ad {way_name}",destination:"Tag afkrslen mod {destination}",exit:"Vlg afkrsel {exit}",exit_destination:"Vlg afkrsel {exit} mod {destination}"},left:{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},right:{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"},"sharp left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},"sharp right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"},"slight left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}",exit:"Vlg afkrsel {exit} til venstre",exit_destination:`Vlg afkrsel {exit} til venstre mod {destination}
`},"slight right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}",exit:"Vlg afkrsel {exit} til hjre",exit_destination:"Vlg afkrsel {exit} til hjre mod {destination}"}},"on ramp":{default:{default:"Tag afkrslen",name:"Tag afkrslen ad {way_name}",destination:"Tag afkrslen mod {destination}"},left:{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},right:{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"},"sharp left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},"sharp right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"},"slight left":{default:"Tag afkrslen til venstre",name:"Tag afkrslen til venstre ad {way_name}",destination:"Tag afkrslen til venstre mod {destination}"},"slight right":{default:"Tag afkrslen til hjre",name:"Tag afkrslen til hjre ad {way_name}",destination:"Tag afkrslen til hjre mod {destination}"}},rotary:{default:{default:{default:"Kr ind i rundkrslen",name:"Tag rundkrslen og kr fra ad {way_name}",destination:"Tag rundkrslen og kr mod {destination}"},name:{default:"Kr ind i {rotary_name}",name:"Kr ind i {rotary_name} og kr ad {way_name} ",destination:"Kr ind i {rotary_name} og kr mod {destination}"},exit:{default:"Tag rundkrslen og forlad ved {exit_number} afkrsel",name:"Tag rundkrslen og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Tag rundkrslen og forlad ved {exit_number} afkrsel mod {destination}"},name_exit:{default:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel",name:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Kr ind i {rotary_name} og forlad ved {exit_number} afkrsel mod {destination}"}}},roundabout:{default:{exit:{default:"Tag rundkrslen og forlad ved {exit_number} afkrsel",name:"Tag rundkrslen og forlad ved {exit_number} afkrsel ad {way_name}",destination:"Tag rundkrslen og forlad ved {exit_number} afkrsel mod {destination}"},default:{default:"Kr ind i rundkrslen",name:"Tag rundkrslen og kr fra ad {way_name}",destination:"Tag rundkrslen og kr mod {destination}"}}},"roundabout turn":{default:{default:"Foretag et {modifier}",name:"Foretag et {modifier} ad {way_name}",destination:"Foretag et {modifier} mod {destination}"},left:{default:"Drej til venstre",name:"Drej til venstre ad {way_name}",destination:"Drej til venstre mod {destination}"},right:{default:"Drej til hjre",name:"Drej til hjre ad {way_name}",destination:"Drej til hjre mod {destination}"},straight:{default:"Fortst ligeud",name:"Fortst ligeud ad {way_name}",destination:"Fortst ligeud mod {destination}"}},"exit roundabout":{default:{default:"Forlad rundkrslen",name:"Forlad rundkrslen ad {way_name}",destination:"Forlad rundkrslen mod  {destination}"}},"exit rotary":{default:{default:"Forlad rundkrslen",name:"Forlad rundkrslen ad {way_name}",destination:"Forlad rundkrslen mod {destination}"}},turn:{default:{default:"Foretag et {modifier}",name:"Foretag et {modifier} ad {way_name}",destination:"Foretag et {modifier} mod {destination}"},left:{default:"Drej til venstre",name:"Drej til venstre ad {way_name}",destination:"Drej til venstre mod {destination}"},right:{default:"Drej til hjre",name:"Drej til hjre ad {way_name}",destination:"Drej til hjre mod {destination}"},straight:{default:"Fortst ligeud",name:"Kr ligeud ad {way_name}",destination:"Kr ligeud mod {destination}"}},"use lane":{no_lanes:{default:"Fortst ligeud"},default:{default:"{lane_instruction}"}}}}},{}],24:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"erste",2:"zweite",3:"dritte",4:"vierte",5:"fnfte",6:"sechste",7:"siebente",8:"achte",9:"neunte",10:"zehnte"},direction:{north:"Norden",northeast:"Nordosten",east:"Osten",southeast:"Sdosten",south:"Sden",southwest:"Sdwesten",west:"Westen",northwest:"Nordwesten"},modifier:{left:"links",right:"rechts","sharp left":"scharf links","sharp right":"scharf rechts","slight left":"leicht links","slight right":"leicht rechts",straight:"geradeaus",uturn:"180-Wendung"},lanes:{xo:"Rechts halten",ox:"Links halten",xox:"Mittlere Spur nutzen",oxo:"Rechts oder links halten"}},modes:{ferry:{default:"Fhre nehmen",name:"Fhre nehmen {way_name}",destination:"Fhre nehmen Richtung {destination}"}},phrase:{"two linked by distance":"{instruction_one} danach in {distance} {instruction_two}","two linked":"{instruction_one} danach {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Sie haben Ihr {nth} Ziel erreicht",upcoming:"Sie haben Ihr {nth} Ziel erreicht",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}"},left:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},right:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"sharp left":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},"sharp right":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"slight right":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich rechts",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich rechts"},"slight left":{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich links",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich links"},straight:{default:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich geradeaus",upcoming:"Sie haben Ihr {nth} Ziel erreicht, es befindet sich geradeaus",short:"Sie haben Ihr {nth} Ziel erreicht","short-upcoming":"Sie haben Ihr {nth} Ziel erreicht",named:"Sie haben Ihr {waypoint_name}, es befindet sich geradeaus"}},continue:{default:{default:"{modifier} abbiegen",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}",exit:"{modifier} abbiegen auf {way_name}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Weiterfahren in Richtung {destination}",distance:"Geradeaus weiterfahren fr {distance}",namedistance:"Geradeaus weiterfahren auf {way_name} fr {distance}"},"sharp left":{default:"Scharf links",name:"Scharf links weiterfahren auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts",name:"Scharf rechts weiterfahren auf {way_name}",destination:"Scharf rechts Richtung {destination}"},"slight left":{default:"Leicht links",name:"Leicht links weiter auf {way_name}",destination:"Leicht links weiter Richtung {destination}"},"slight right":{default:"Leicht rechts weiter",name:"Leicht rechts weiter auf {way_name}",destination:"Leicht rechts weiter Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},depart:{default:{default:"Fahren Sie Richtung {direction}",name:"Fahren Sie Richtung {direction} auf {way_name}",namedistance:"Fahren Sie Richtung {direction} auf {way_name} fr {distance}"}},"end of road":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"},uturn:{default:"180-Wendung am Ende der Strae",name:"180-Wendung auf {way_name} am Ende der Strae",destination:"180-Wendung Richtung {destination} am Ende der Strae"}},fork:{default:{default:"{modifier} halten an der Gabelung",name:"{modifier} halten an der Gabelung auf {way_name}",destination:"{modifier}  halten an der Gabelung Richtung {destination}"},"slight left":{default:"Links halten an der Gabelung",name:"Links halten an der Gabelung auf {way_name}",destination:"Links halten an der Gabelung Richtung {destination}"},"slight right":{default:"Rechts halten an der Gabelung",name:"Rechts halten an der Gabelung auf {way_name}",destination:"Rechts halten an der Gabelung Richtung {destination}"},"sharp left":{default:"Scharf links abbiegen an der Gabelung",name:"Scharf links auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts abbiegen an der Gabelung",name:"Scharf rechts auf {way_name}",destination:"Scharf rechts Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},merge:{default:{default:"{modifier} auffahren",name:"{modifier} auffahren auf {way_name}",destination:"{modifier} auffahren Richtung {destination}"},straight:{default:"geradeaus auffahren",name:"geradeaus auffahren auf {way_name}",destination:"geradeaus auffahren Richtung {destination}"},"slight left":{default:"Leicht links auffahren",name:"Leicht links auffahren auf {way_name}",destination:"Leicht links auffahren Richtung {destination}"},"slight right":{default:"Leicht rechts auffahren",name:"Leicht rechts auffahren auf {way_name}",destination:"Leicht rechts auffahren Richtung {destination}"},"sharp left":{default:"Scharf links auffahren",name:"Scharf links auffahren auf {way_name}",destination:"Scharf links auffahren Richtung {destination}"},"sharp right":{default:"Scharf rechts auffahren",name:"Scharf rechts auffahren auf {way_name}",destination:"Scharf rechts auffahren Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},"new name":{default:{default:"{modifier} weiterfahren",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} weiterfahren Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Weiterfahren auf {way_name}",destination:"Weiterfahren in Richtung {destination}"},"sharp left":{default:"Scharf links",name:"Scharf links auf {way_name}",destination:"Scharf links Richtung {destination}"},"sharp right":{default:"Scharf rechts",name:"Scharf rechts auf {way_name}",destination:"Scharf rechts Richtung {destination}"},"slight left":{default:"Leicht links weiter",name:"Leicht links weiter auf {way_name}",destination:"Leicht links weiter Richtung {destination}"},"slight right":{default:"Leicht rechts weiter",name:"Leicht rechts weiter auf {way_name}",destination:"Leicht rechts weiter Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},notification:{default:{default:"{modifier} weiterfahren",name:"{modifier} weiterfahren auf {way_name}",destination:"{modifier} weiterfahren Richtung {destination}"},uturn:{default:"180-Wendung",name:"180-Wendung auf {way_name}",destination:"180-Wendung Richtung {destination}"}},"off ramp":{default:{default:"Ausfahrt nehmen",name:"Ausfahrt nehmen auf {way_name}",destination:"Ausfahrt nehmen Richtung {destination}",exit:"Ausfahrt {exit} nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},left:{default:"Ausfahrt links nehmen",name:"Ausfahrt links nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} links nehmen",exit_destination:"Ausfahrt {exit} links nehmen Richtung {destination}"},right:{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen Richtung {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},"sharp left":{default:"Ausfahrt links nehmen",name:"Ausfahrt links Seite nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} links nehmen",exit_destination:"Ausfahrt{exit} links nehmen Richtung {destination}"},"sharp right":{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen auf {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"},"slight left":{default:"Ausfahrt links nehmen",name:"Ausfahrt links nehmen auf {way_name}",destination:"Ausfahrt links nehmen Richtung {destination}",exit:"Ausfahrt {exit} nehmen",exit_destination:"Ausfahrt {exit} links nehmen Richtung {destination}"},"slight right":{default:"Ausfahrt rechts nehmen",name:"Ausfahrt rechts nehmen auf {way_name}",destination:"Ausfahrt rechts nehmen Richtung {destination}",exit:"Ausfahrt {exit} rechts nehmen",exit_destination:"Ausfahrt {exit} nehmen Richtung {destination}"}},"on ramp":{default:{default:"Auffahrt nehmen",name:"Auffahrt nehmen auf {way_name}",destination:"Auffahrt nehmen Richtung {destination}"},left:{default:"Auffahrt links nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},right:{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"},"sharp left":{default:"Auffahrt links nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},"sharp right":{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"},"slight left":{default:"Auffahrt links Seite nehmen",name:"Auffahrt links nehmen auf {way_name}",destination:"Auffahrt links nehmen Richtung {destination}"},"slight right":{default:"Auffahrt rechts nehmen",name:"Auffahrt rechts nehmen auf {way_name}",destination:"Auffahrt rechts nehmen Richtung {destination}"}},rotary:{default:{default:{default:"In den Kreisverkehr fahren",name:"Im Kreisverkehr die Ausfahrt auf {way_name} nehmen",destination:"Im Kreisverkehr die Ausfahrt Richtung {destination} nehmen"},name:{default:"In {rotary_name} fahren",name:"In {rotary_name} die Ausfahrt auf {way_name} nehmen",destination:"In {rotary_name} die Ausfahrt Richtung {destination} nehmen"},exit:{default:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen",name:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen auf {way_name}",destination:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen Richtung {destination}"},name_exit:{default:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen",name:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen auf {way_name}",destination:"In den Kreisverkehr fahren und {exit_number} Ausfahrt nehmen Richtung {destination}"}}},roundabout:{default:{exit:{default:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen",name:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen auf {way_name}",destination:"Im Kreisverkehr die {exit_number} Ausfahrt nehmen Richtung {destination}"},default:{default:"In den Kreisverkehr fahren",name:"Im Kreisverkehr die Ausfahrt auf {way_name} nehmen",destination:"Im Kreisverkehr die Ausfahrt Richtung {destination} nehmen"}}},"roundabout turn":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"exit roundabout":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"exit rotary":{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},turn:{default:{default:"{modifier} abbiegen",name:"{modifier} abbiegen auf {way_name}",destination:"{modifier} abbiegen Richtung {destination}"},left:{default:"Links abbiegen",name:"Links abbiegen auf {way_name}",destination:"Links abbiegen Richtung {destination}"},right:{default:"Rechts abbiegen",name:"Rechts abbiegen auf {way_name}",destination:"Rechts abbiegen Richtung {destination}"},straight:{default:"Geradeaus weiterfahren",name:"Geradeaus weiterfahren auf {way_name}",destination:"Geradeaus weiterfahren Richtung {destination}"}},"use lane":{no_lanes:{default:"Geradeaus weiterfahren"},default:{default:"{lane_instruction}"}}}}},{}],25:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th"},direction:{north:"north",northeast:"northeast",east:"east",southeast:"southeast",south:"south",southwest:"southwest",west:"west",northwest:"northwest"},modifier:{left:"left",right:"right","sharp left":"sharp left","sharp right":"sharp right","slight left":"slight left","slight right":"slight right",straight:"straight",uturn:"U-turn"},lanes:{xo:"Keep right",ox:"Keep left",xox:"Keep in the middle",oxo:"Keep left or right"}},modes:{ferry:{default:"Take the ferry",name:"Take the ferry {way_name}",destination:"Take the ferry towards {destination}"}},phrase:{"two linked by distance":"{instruction_one}, then, in {distance}, {instruction_two}","two linked":"{instruction_one}, then {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"You have arrived at your {nth} destination",upcoming:"You will arrive at your {nth} destination",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}"},left:{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},right:{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"sharp left":{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},"sharp right":{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"slight right":{default:"You have arrived at your {nth} destination, on the right",upcoming:"You will arrive at your {nth} destination, on the right",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the right"},"slight left":{default:"You have arrived at your {nth} destination, on the left",upcoming:"You will arrive at your {nth} destination, on the left",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, on the left"},straight:{default:"You have arrived at your {nth} destination, straight ahead",upcoming:"You will arrive at your {nth} destination, straight ahead",short:"You have arrived","short-upcoming":"You will arrive",named:"You have arrived at {waypoint_name}, straight ahead"}},continue:{default:{default:"Turn {modifier}",name:"Turn {modifier} to stay on {way_name}",destination:"Turn {modifier} towards {destination}",exit:"Turn {modifier} onto {way_name}"},straight:{default:"Continue straight",name:"Continue straight to stay on {way_name}",destination:"Continue towards {destination}",distance:"Continue straight for {distance}",namedistance:"Continue on {way_name} for {distance}"},"sharp left":{default:"Make a sharp left",name:"Make a sharp left to stay on {way_name}",destination:"Make a sharp left towards {destination}"},"sharp right":{default:"Make a sharp right",name:"Make a sharp right to stay on {way_name}",destination:"Make a sharp right towards {destination}"},"slight left":{default:"Make a slight left",name:"Make a slight left to stay on {way_name}",destination:"Make a slight left towards {destination}"},"slight right":{default:"Make a slight right",name:"Make a slight right to stay on {way_name}",destination:"Make a slight right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn and continue on {way_name}",destination:"Make a U-turn towards {destination}"}},depart:{default:{default:"Head {direction}",name:"Head {direction} on {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Turn {modifier}",name:"Turn {modifier} onto {way_name}",destination:"Turn {modifier} towards {destination}"},straight:{default:"Continue straight",name:"Continue straight onto {way_name}",destination:"Continue straight towards {destination}"},uturn:{default:"Make a U-turn at the end of the road",name:"Make a U-turn onto {way_name} at the end of the road",destination:"Make a U-turn towards {destination} at the end of the road"}},fork:{default:{default:"Keep {modifier} at the fork",name:"Keep {modifier} onto {way_name}",destination:"Keep {modifier} towards {destination}"},"slight left":{default:"Keep left at the fork",name:"Keep left onto {way_name}",destination:"Keep left towards {destination}"},"slight right":{default:"Keep right at the fork",name:"Keep right onto {way_name}",destination:"Keep right towards {destination}"},"sharp left":{default:"Take a sharp left at the fork",name:"Take a sharp left onto {way_name}",destination:"Take a sharp left towards {destination}"},"sharp right":{default:"Take a sharp right at the fork",name:"Take a sharp right onto {way_name}",destination:"Take a sharp right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},merge:{default:{default:"Merge {modifier}",name:"Merge {modifier} onto {way_name}",destination:"Merge {modifier} towards {destination}"},straight:{default:"Merge",name:"Merge onto {way_name}",destination:"Merge towards {destination}"},"slight left":{default:"Merge left",name:"Merge left onto {way_name}",destination:"Merge left towards {destination}"},"slight right":{default:"Merge right",name:"Merge right onto {way_name}",destination:"Merge right towards {destination}"},"sharp left":{default:"Merge left",name:"Merge left onto {way_name}",destination:"Merge left towards {destination}"},"sharp right":{default:"Merge right",name:"Merge right onto {way_name}",destination:"Merge right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} onto {way_name}",destination:"Continue {modifier} towards {destination}"},straight:{default:"Continue straight",name:"Continue onto {way_name}",destination:"Continue towards {destination}"},"sharp left":{default:"Take a sharp left",name:"Take a sharp left onto {way_name}",destination:"Take a sharp left towards {destination}"},"sharp right":{default:"Take a sharp right",name:"Take a sharp right onto {way_name}",destination:"Take a sharp right towards {destination}"},"slight left":{default:"Continue slightly left",name:"Continue slightly left onto {way_name}",destination:"Continue slightly left towards {destination}"},"slight right":{default:"Continue slightly right",name:"Continue slightly right onto {way_name}",destination:"Continue slightly right towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} onto {way_name}",destination:"Continue {modifier} towards {destination}"},uturn:{default:"Make a U-turn",name:"Make a U-turn onto {way_name}",destination:"Make a U-turn towards {destination}"}},"off ramp":{default:{default:"Take the ramp",name:"Take the ramp onto {way_name}",destination:"Take the ramp towards {destination}",exit:"Take exit {exit}",exit_destination:"Take exit {exit} towards {destination}"},left:{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},right:{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"sharp left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"sharp right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"slight left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"slight right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"}},"on ramp":{default:{default:"Take the ramp",name:"Take the ramp onto {way_name}",destination:"Take the ramp towards {destination}"},left:{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},right:{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"},"sharp left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},"sharp right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"},"slight left":{default:"Take the ramp on the left",name:"Take the ramp on the left onto {way_name}",destination:"Take the ramp on the left towards {destination}"},"slight right":{default:"Take the ramp on the right",name:"Take the ramp on the right onto {way_name}",destination:"Take the ramp on the right towards {destination}"}},rotary:{default:{default:{default:"Enter the traffic circle",name:"Enter the traffic circle and exit onto {way_name}",destination:"Enter the traffic circle and exit towards {destination}"},name:{default:"Enter {rotary_name}",name:"Enter {rotary_name} and exit onto {way_name}",destination:"Enter {rotary_name} and exit towards {destination}"},exit:{default:"Enter the traffic circle and take the {exit_number} exit",name:"Enter the traffic circle and take the {exit_number} exit onto {way_name}",destination:"Enter the traffic circle and take the {exit_number} exit towards {destination}"},name_exit:{default:"Enter {rotary_name} and take the {exit_number} exit",name:"Enter {rotary_name} and take the {exit_number} exit onto {way_name}",destination:"Enter {rotary_name} and take the {exit_number} exit towards {destination}"}}},roundabout:{default:{exit:{default:"Enter the traffic circle and take the {exit_number} exit",name:"Enter the traffic circle and take the {exit_number} exit onto {way_name}",destination:"Enter the traffic circle and take the {exit_number} exit towards {destination}"},default:{default:"Enter the traffic circle",name:"Enter the traffic circle and exit onto {way_name}",destination:"Enter the traffic circle and exit towards {destination}"}}},"roundabout turn":{default:{default:"Make a {modifier}",name:"Make a {modifier} onto {way_name}",destination:"Make a {modifier} towards {destination}"},left:{default:"Turn left",name:"Turn left onto {way_name}",destination:"Turn left towards {destination}"},right:{default:"Turn right",name:"Turn right onto {way_name}",destination:"Turn right towards {destination}"},straight:{default:"Continue straight",name:"Continue straight onto {way_name}",destination:"Continue straight towards {destination}"}},"exit roundabout":{default:{default:"Exit the traffic circle",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},"exit rotary":{default:{default:"Exit the traffic circle",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},turn:{default:{default:"Make a {modifier}",name:"Make a {modifier} onto {way_name}",destination:"Make a {modifier} towards {destination}"},left:{default:"Turn left",name:"Turn left onto {way_name}",destination:"Turn left towards {destination}"},right:{default:"Turn right",name:"Turn right onto {way_name}",destination:"Turn right towards {destination}"},straight:{default:"Go straight",name:"Go straight onto {way_name}",destination:"Go straight towards {destination}"}},"use lane":{no_lanes:{default:"Continue straight"},default:{default:"{lane_instruction}"}}}}},{}],26:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"norden",northeast:"nord-orienten",east:"orienten",southeast:"sud-orienten",south:"suden",southwest:"sud-okcidenten",west:"okcidenten",northwest:"nord-okcidenten"},modifier:{left:"maldekstren",right:"dekstren","sharp left":"maldekstregen","sharp right":"dekstregen","slight left":"maldekstreten","slight right":"dekstreten",straight:"rekten",uturn:"turniu malantaen"},lanes:{xo:"Veturu dekstre",ox:"Veturu maldekstre",xox:"Veturu meze",oxo:"Veturu dekstre a maldekstre"}},modes:{ferry:{default:"Enpramiu",name:"Enpramiu {way_name}",destination:"Enpramiu direkte al {destination}"}},phrase:{"two linked by distance":"{instruction_one} kaj post {distance} {instruction_two}","two linked":"{instruction_one} kaj sekve {instruction_two}","one in distance":"Post {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"elveturejo {exit}"},arrive:{default:{default:"Vi atingis vian {nth} celon",upcoming:"Vi atingos vian {nth} celon",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}"},left:{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},right:{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"sharp left":{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},"sharp right":{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"slight right":{default:"Vi atingis vian {nth} celon e dekstre",upcoming:"Vi atingos vian {nth} celon e dekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e dekstre"},"slight left":{default:"Vi atingis vian {nth} celon e maldekstre",upcoming:"Vi atingos vian {nth} celon e maldekstre",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name}, e maldekstre"},straight:{default:"Vi atingis vian {nth} celon",upcoming:"Vi atingos vian {nth} celon rekte",short:"Vi atingis","short-upcoming":"Vi atingos",named:"Vi atingis {waypoint_name} antae"}},continue:{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}",exit:"Veturu {modifier} direkte al {way_name}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}",distance:"Veturu rekten dum {distance}",namedistance:"Veturu rekten al {way_name} dum {distance}"},"sharp left":{default:"Turniu ege maldekstren",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Turniu ege dekstren",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},"slight left":{default:"Turniu ete maldekstren",name:"Turniu ete maldekstren al {way_name}",destination:"Turniu ete maldekstren direkte al {destination}"},"slight right":{default:"Turniu ete dekstren",name:"Turniu ete dekstren al {way_name}",destination:"Turniu ete dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},depart:{default:{default:"Direktiu {direction}",name:"Direktiu {direction} al {way_name}",namedistance:"Direktiu {direction} al {way_name} tra {distance}"}},"end of road":{default:{default:"Veturu {modifier}",name:"Veturu {modifier} direkte al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"},uturn:{default:"Turniu malantaen e fino de la vojo",name:"Turniu malantaen al {way_name} e fino de la vojo",destination:"Turniu malantaen direkte al {destination} e fino de la vojo"}},fork:{default:{default:"Daru {modifier} e la vojforko",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},"slight left":{default:"Maldekstren e la vojforko",name:"Pluu maldekstren al {way_name}",destination:"Pluu maldekstren direkte al {destination}"},"slight right":{default:"Dekstren e la vojforko",name:"Pluu dekstren al {way_name}",destination:"Pluu dekstren direkte al {destination}"},"sharp left":{default:"Ege maldekstren e la vojforko",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Ege dekstren e la vojforko",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},merge:{default:{default:"Enveturu {modifier}",name:"Enveturu {modifier} al {way_name}",destination:"Enveturu {modifier} direkte al {destination}"},straight:{default:"Enveturu",name:"Enveturu al {way_name}",destination:"Enveturu direkte al {destination}"},"slight left":{default:"Enveturu de maldekstre",name:"Enveturu de maldekstre al {way_name}",destination:"Enveturu de maldekstre direkte al {destination}"},"slight right":{default:"Enveturu de dekstre",name:"Enveturu de dekstre al {way_name}",destination:"Enveturu de dekstre direkte al {destination}"},"sharp left":{default:"Enveturu de maldekstre",name:"Enveture de maldekstre al {way_name}",destination:"Enveturu de maldekstre direkte al {destination}"},"sharp right":{default:"Enveturu de dekstre",name:"Enveturu de dekstre al {way_name}",destination:"Enveturu de dekstre direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},"new name":{default:{default:"Pluu {modifier}",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"},"sharp left":{default:"Turniu ege maldekstren",name:"Turniu ege maldekstren al {way_name}",destination:"Turniu ege maldekstren direkte al {destination}"},"sharp right":{default:"Turniu ege dekstren",name:"Turniu ege dekstren al {way_name}",destination:"Turniu ege dekstren direkte al {destination}"},"slight left":{default:"Pluu ete maldekstren",name:"Pluu ete maldekstren al {way_name}",destination:"Pluu ete maldekstren direkte al {destination}"},"slight right":{default:"Pluu ete dekstren",name:"Pluu ete dekstren al {way_name}",destination:"Pluu ete dekstren direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},notification:{default:{default:"Pluu {modifier}",name:"Pluu {modifier} al {way_name}",destination:"Pluu {modifier} direkte al {destination}"},uturn:{default:"Turniu malantaen",name:"Turniu malantaen al {way_name}",destination:"Turniu malantaen direkte al {destination}"}},"off ramp":{default:{default:"Direktiu al enveturejo",name:"Direktiu al enveturejo al {way_name}",destination:"Direktiu al enveturejo direkte al {destination}",exit:"Direktiu al elveturejo {exit}",exit_destination:"Direktiu al elveturejo {exit} direkte al {destination}"},left:{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al elveturejo {exit} e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},right:{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al {exit} elveturejo e ldekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"},"sharp left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al {exit} elveturejo e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},"sharp right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al elveturejo {exit} e dekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"},"slight left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}",exit:"Direktiu al {exit} elveturejo e maldekstre",exit_destination:"Direktiu al elveturejo {exit} e maldekstre direkte al {destination}"},"slight right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}",exit:"Direktiu al {exit} elveturejo e ldekstre",exit_destination:"Direktiu al elveturejo {exit} e dekstre direkte al {destination}"}},"on ramp":{default:{default:"Direktiu al enveturejo",name:"Direktiu al enveturejo al {way_name}",destination:"Direktiu al enveturejo direkte al {destination}"},left:{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},right:{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"},"sharp left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},"sharp right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"},"slight left":{default:"Direktiu al enveturejo e maldekstre",name:"Direktiu al enveturejo e maldekstre al {way_name}",destination:"Direktiu al enveturejo e maldekstre al {destination}"},"slight right":{default:"Direktiu al enveturejo e dekstre",name:"Direktiu al enveturejo e dekstre al {way_name}",destination:"Direktiu al enveturejo e dekstre al {destination}"}},rotary:{default:{default:{default:"Enveturu trafikcirklegon",name:"Enveturu trafikcirklegon kaj elveturu al {way_name}",destination:"Enveturu trafikcirklegon kaj elveturu direkte al {destination}"},name:{default:"Enveturu {rotary_name}",name:"Enveturu {rotary_name} kaj elveturu al {way_name}",destination:"Enveturu {rotary_name} kaj elveturu direkte al {destination}"},exit:{default:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo",name:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo direkte al {destination}"},name_exit:{default:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo",name:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu {rotary_name} kaj sekve al {exit_number} elveturejo direkte al {destination}"}}},roundabout:{default:{exit:{default:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo",name:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo al {way_name}",destination:"Enveturu trafikcirklegon kaj sekve al {exit_number} elveturejo direkte al {destination}"},default:{default:"Enveturu trafikcirklegon",name:"Enveturu trafikcirklegon kaj elveturu al {way_name}",destination:"Enveturu trafikcirklegon kaj elveturu direkte al {destination}"}}},"roundabout turn":{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},left:{default:"Turniu maldekstren",name:"Turniu maldekstren al {way_name}",destination:"Turniu maldekstren direkte al {destination}"},right:{default:"Turniu dekstren",name:"Turniu dekstren al {way_name}",destination:"Turniu dekstren direkte al {destination}"},straight:{default:"Pluu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"}},"exit roundabout":{default:{default:"Elveturu trafikcirklegon",name:"Elveturu trafikcirklegon al {way_name}",destination:"Elveturu trafikcirklegon direkte al {destination}"}},"exit rotary":{default:{default:"Eliru trafikcirklegon",name:"Elveturu trafikcirklegon al {way_name}",destination:"Elveturu trafikcirklegon direkte al {destination}"}},turn:{default:{default:"Veturu {modifier}",name:"Veturu {modifier} al {way_name}",destination:"Veturu {modifier} direkte al {destination}"},left:{default:"Turniu maldekstren",name:"Turniu maldekstren al {way_name}",destination:"Turniu maldekstren direkte al {destination}"},right:{default:"Turniu dekstren",name:"Turniu dekstren al {way_name}",destination:"Turniu dekstren direkte al {destination}"},straight:{default:"Veturu rekten",name:"Veturu rekten al {way_name}",destination:"Veturu rekten direkte al {destination}"}},"use lane":{no_lanes:{default:"Pluu rekten"},default:{default:"{lane_instruction}"}}}}},{}],27:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"noreste",east:"este",southeast:"sureste",south:"sur",southwest:"suroeste",west:"oeste",northwest:"noroeste"},modifier:{left:"a la izquierda",right:"a la derecha","sharp left":"cerrada a la izquierda","sharp right":"cerrada a la derecha","slight left":"ligeramente a la izquierda","slight right":"ligeramente a la derecha",straight:"recto",uturn:"cambio de sentido"},lanes:{xo:"Mantente a la derecha",ox:"Mantente a la izquierda",xox:"Mantente en el medio",oxo:"Mantente a la izquierda o a la derecha"}},modes:{ferry:{default:"Coge el ferry",name:"Coge el ferry {way_name}",destination:"Coge el ferry hacia {destination}"}},phrase:{"two linked by distance":"{instruction_one} y luego en {distance}, {instruction_two}","two linked":"{instruction_one} y luego {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"salida {exit}"},arrive:{default:{default:"Has llegado a tu {nth} destino",upcoming:"Vas a llegar a tu {nth} destino",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}"},left:{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},right:{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"sharp left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},"sharp right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},straight:{default:"Has llegado a tu {nth} destino, en frente",upcoming:"Vas a llegar a tu {nth} destino, en frente",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, en frente"}},continue:{default:{default:"Gire {modifier}",name:"Cruce {modifier} en {way_name}",destination:"Gire {modifier} hacia {destination}",exit:"Gire {modifier} en {way_name}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}",distance:"Contina recto por {distance}",namedistance:"Contina recto en {way_name} por {distance}"},"sharp left":{default:"Gire a la izquierda",name:"Gire a la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},"sharp right":{default:"Gire a la derecha",name:"Gire a la derecha en {way_name}",destination:"Gire a la derecha hacia {destination}"},"slight left":{default:"Gire a la izquierda",name:"Doble levementea la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},"slight right":{default:"Gire a la izquierda",name:"Doble levemente a la derecha en {way_name}",destination:"Gire a la izquierda hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido y contina en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},depart:{default:{default:"Dirgete al {direction}",name:"Dirgete al {direction} por {way_name}",namedistance:"Dirgete al {direction} en {way_name} por {distance}"}},"end of road":{default:{default:"Al final de la calle gira {modifier}",name:"Al final de la calle gira {modifier} por {way_name}",destination:"Al final de la calle gira {modifier} hacia {destination}"},straight:{default:"Al final de la calle contina recto",name:"Al final de la calle contina recto por {way_name}",destination:"Al final de la calle contina recto hacia {destination}"},uturn:{default:"Al final de la calle haz un cambio de sentido",name:"Al final de la calle haz un cambio de sentido en {way_name}",destination:"Al final de la calle haz un cambio de sentido hacia {destination}"}},fork:{default:{default:"Mantente {modifier} en el cruce",name:"Mantente {modifier} por {way_name}",destination:"Mantente {modifier} hacia {destination}"},"slight left":{default:"Mantente a la izquierda en el cruce",name:"Mantente a la izquierda por {way_name}",destination:"Mantente a la izquierda hacia {destination}"},"slight right":{default:"Mantente a la derecha en el cruce",name:"Mantente a la derecha por {way_name}",destination:"Mantente a la derecha hacia {destination}"},"sharp left":{default:"Gira la izquierda en el cruce",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha en el cruce",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},merge:{default:{default:"Incorprate {modifier}",name:"Incorprate {modifier} por {way_name}",destination:"Incorprate {modifier} hacia {destination}"},straight:{default:"Incorprate",name:"Incorprate por {way_name}",destination:"Incorprate hacia {destination}"},"slight left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda por {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"slight right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha por {way_name}",destination:"Incorprate a la derecha hacia {destination}"},"sharp left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda por {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"sharp right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha por {way_name}",destination:"Incorprate a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"new name":{default:{default:"Contina {modifier}",name:"Contina {modifier} por {way_name}",destination:"Contina {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina por {way_name}",destination:"Contina hacia {destination}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Contina ligeramente por la izquierda",name:"Contina ligeramente por la izquierda por {way_name}",destination:"Contina ligeramente por la izquierda hacia {destination}"},"slight right":{default:"Contina ligeramente por la derecha",name:"Contina ligeramente por la derecha por {way_name}",destination:"Contina ligeramente por la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},notification:{default:{default:"Contina {modifier}",name:"Contina {modifier} por {way_name}",destination:"Contina {modifier} hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"off ramp":{default:{default:"Coge la cuesta abajo",name:"Coge la cuesta abajo por {way_name}",destination:"Coge la cuesta abajo hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},left:{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo {exit} a tu izquierda hacia {destination}"},right:{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},"sharp left":{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo {exit} a tu izquierda hacia {destination}"},"sharp right":{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"},"slight left":{default:"Coge la cuesta abajo de la izquierda",name:"Coge la cuesta abajo de la izquierda por {way_name}",destination:"Coge la cuesta abajo de la izquierda hacia {destination}",exit:"Coge la cuesta abajo {exit} a tu izquierda",exit_destination:"Coge la cuesta abajo{exit} a tu izquierda hacia {destination}"},"slight right":{default:"Coge la cuesta abajo de la derecha",name:"Coge la cuesta abajo de la derecha por {way_name}",destination:"Coge la cuesta abajo de la derecha hacia {destination}",exit:"Coge la cuesta abajo {exit}",exit_destination:"Coge la cuesta abajo {exit} hacia {destination}"}},"on ramp":{default:{default:"Coge la cuesta",name:"Coge la cuesta por {way_name}",destination:"Coge la cuesta hacia {destination}"},left:{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},right:{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"},"sharp left":{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},"sharp right":{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"},"slight left":{default:"Coge la cuesta de la izquierda",name:"Coge la cuesta de la izquierda por {way_name}",destination:"Coge la cuesta de la izquierda hacia {destination}"},"slight right":{default:"Coge la cuesta de la derecha",name:"Coge la cuesta de la derecha por {way_name}",destination:"Coge la cuesta de la derecha hacia {destination}"}},rotary:{default:{default:{default:"Incorprate en la rotonda",name:"En la rotonda sal por {way_name}",destination:"En la rotonda sal hacia {destination}"},name:{default:"En {rotary_name}",name:"En {rotary_name} sal por {way_name}",destination:"En {rotary_name} sal hacia {destination}"},exit:{default:"En la rotonda toma la {exit_number} salida",name:"En la rotonda toma la {exit_number} salida por {way_name}",destination:"En la rotonda toma la {exit_number} salida hacia {destination}"},name_exit:{default:"En {rotary_name} toma la {exit_number} salida",name:"En {rotary_name} toma la {exit_number} salida por {way_name}",destination:"En {rotary_name} toma la {exit_number} salida hacia {destination}"}}},roundabout:{default:{exit:{default:"En la rotonda toma la {exit_number} salida",name:"En la rotonda toma la {exit_number} salida por {way_name}",destination:"En la rotonda toma la {exit_number} salida hacia {destination}"},default:{default:"Incorprate en la rotonda",name:"Incorprate en la rotonda y sal en {way_name}",destination:"Incorprate en la rotonda y sal hacia {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} en {way_name}",destination:"Siga {modifier} hacia {destination}"},left:{default:"Gire a la izquierda",name:"Gire a la izquierda en {way_name}",destination:"Gire a la izquierda hacia {destination}"},right:{default:"Gire a la derecha",name:"Gire a la derecha en {way_name}",destination:"Gire a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto por {way_name}",destination:"Contina recto hacia {destination}"}},"exit roundabout":{default:{default:"Sal la rotonda",name:"Toma la salida por {way_name}",destination:"Toma la salida hacia {destination}"}},"exit rotary":{default:{default:"Sal la rotonda",name:"Toma la salida por {way_name}",destination:"Toma la salida hacia {destination}"}},turn:{default:{default:"Gira {modifier}",name:"Gira {modifier} por {way_name}",destination:"Gira {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda por {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha por {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto por {way_name}",destination:"Contina recto hacia {destination}"}},"use lane":{no_lanes:{default:"Contina recto"},default:{default:"{lane_instruction}"}}}}},{}],28:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"noreste",east:"este",southeast:"sureste",south:"sur",southwest:"suroeste",west:"oeste",northwest:"noroeste"},modifier:{left:"izquierda",right:"derecha","sharp left":"cerrada a la izquierda","sharp right":"cerrada a la derecha","slight left":"levemente a la izquierda","slight right":"levemente a la derecha",straight:"recto",uturn:"cambio de sentido"},lanes:{xo:"Mantente a la derecha",ox:"Mantente a la izquierda",xox:"Mantente en el medio",oxo:"Mantente a la izquierda o derecha"}},modes:{ferry:{default:"Coge el ferry",name:"Coge el ferry {way_name}",destination:"Coge el ferry a {destination}"}},phrase:{"two linked by distance":"{instruction_one} y luego a {distance}, {instruction_two}","two linked":"{instruction_one} y luego {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"salida {exit}"},arrive:{default:{default:"Has llegado a tu {nth} destino",upcoming:"Vas a llegar a tu {nth} destino",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}"},left:{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},right:{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"sharp left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},"sharp right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight right":{default:"Has llegado a tu {nth} destino, a la derecha",upcoming:"Vas a llegar a tu {nth} destino, a la derecha",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la derecha"},"slight left":{default:"Has llegado a tu {nth} destino, a la izquierda",upcoming:"Vas a llegar a tu {nth} destino, a la izquierda",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, a la izquierda"},straight:{default:"Has llegado a tu {nth} destino, en frente",upcoming:"Vas a llegar a tu {nth} destino, en frente",short:"Has llegado","short-upcoming":"Vas a llegar",named:"Has llegado a {waypoint_name}, en frente"}},continue:{default:{default:"Gira a {modifier}",name:"Cruza a la{modifier}  en {way_name}",destination:"Gira a {modifier} hacia {destination}",exit:"Gira a {modifier} en {way_name}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}",distance:"Contina recto por {distance}",namedistance:"Contina recto en {way_name} por {distance}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Gira a la izquierda",name:"Dobla levemente a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"slight right":{default:"Gira a la izquierda",name:"Dobla levemente a la derecha en {way_name}",destination:"Gira a la izquierda hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido y contina en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},depart:{default:{default:"Ve a {direction}",name:"Ve a {direction} en {way_name}",namedistance:"Ve a {direction} en {way_name} por {distance}"}},"end of road":{default:{default:"Gira  a {modifier}",name:"Gira a {modifier} en {way_name}",destination:"Gira a {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto en {way_name}",destination:"Contina recto hacia {destination}"},uturn:{default:"Haz un cambio de sentido al final de la via",name:"Haz un cambio de sentido en {way_name} al final de la via",destination:"Haz un cambio de sentido hacia {destination} al final de la via"}},fork:{default:{default:"Mantente  {modifier} en el cruza",name:"Mantente {modifier} en {way_name}",destination:"Mantente {modifier} hacia {destination}"},"slight left":{default:"Mantente a la izquierda en el cruza",name:"Mantente a la izquierda en {way_name}",destination:"Mantente a la izquierda hacia {destination}"},"slight right":{default:"Mantente a la derecha en el cruza",name:"Mantente a la derecha en {way_name}",destination:"Mantente a la derecha hacia {destination}"},"sharp left":{default:"Gira a la izquierda en el cruza",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha en el cruza",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},merge:{default:{default:"Incorprate a {modifier}",name:"Incorprate a {modifier} en {way_name}",destination:"Incorprate a {modifier} hacia {destination}"},straight:{default:"Incorprate",name:"Incorprate a {way_name}",destination:"Incorprate hacia {destination}"},"slight left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda en {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"slight right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha en {way_name}",destination:"Incorprate a la derecha hacia {destination}"},"sharp left":{default:"Incorprate a la izquierda",name:"Incorprate a la izquierda en {way_name}",destination:"Incorprate a la izquierda hacia {destination}"},"sharp right":{default:"Incorprate a la derecha",name:"Incorprate a la derecha en {way_name}",destination:"Incorprate a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"new name":{default:{default:"Contina {modifier}",name:"Contina {modifier} en {way_name}",destination:"Contina {modifier} hacia {destination}"},straight:{default:"Contina recto",name:"Contina en {way_name}",destination:"Contina hacia {destination}"},"sharp left":{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},"sharp right":{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},"slight left":{default:"Contina levemente a la izquierda",name:"Contina levemente a la izquierda en {way_name}",destination:"Contina levemente a la izquierda hacia {destination}"},"slight right":{default:"Contina levemente a la derecha",name:"Contina levemente a la derecha en {way_name}",destination:"Contina levemente a la derecha hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},notification:{default:{default:"Contina {modifier}",name:"Contina {modifier} en {way_name}",destination:"Contina {modifier} hacia {destination}"},uturn:{default:"Haz un cambio de sentido",name:"Haz un cambio de sentido en {way_name}",destination:"Haz un cambio de sentido hacia {destination}"}},"off ramp":{default:{default:"Toma la salida",name:"Toma la salida en {way_name}",destination:"Toma la salida hacia {destination}",exit:"Toma la salida {exit}",exit_destination:"Toma la salida {exit} hacia {destination}"},left:{default:"Toma la salida en la izquierda",name:"Toma la salida en la izquierda en {way_name}",destination:"Toma la salida en la izquierda en {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},right:{default:"Toma la salida en la derecha",name:"Toma la salida en la derecha en {way_name}",destination:"Toma la salida en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"},"sharp left":{default:"Ve cuesta abajo en la izquierda",name:"Ve cuesta abajo en la izquierda en {way_name}",destination:"Ve cuesta abajo en la izquierda hacia {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},"sharp right":{default:"Ve cuesta abajo en la derecha",name:"Ve cuesta abajo en la derecha en {way_name}",destination:"Ve cuesta abajo en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"},"slight left":{default:"Ve cuesta abajo en la izquierda",name:"Ve cuesta abajo en la izquierda en {way_name}",destination:"Ve cuesta abajo en la izquierda hacia {destination}",exit:"Toma la salida {exit} en la izquierda",exit_destination:"Toma la salida {exit} en la izquierda hacia {destination}"},"slight right":{default:"Toma la salida en la derecha",name:"Toma la salida en la derecha en {way_name}",destination:"Toma la salida en la derecha hacia {destination}",exit:"Toma la salida {exit} en la derecha",exit_destination:"Toma la salida {exit} en la derecha hacia {destination}"}},"on ramp":{default:{default:"Toma la rampa",name:"Toma la rampa en {way_name}",destination:"Toma la rampa hacia {destination}"},left:{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},right:{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"},"sharp left":{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},"sharp right":{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"},"slight left":{default:"Toma la rampa en la izquierda",name:"Toma la rampa en la izquierda en {way_name}",destination:"Toma la rampa en la izquierda hacia {destination}"},"slight right":{default:"Toma la rampa en la derecha",name:"Toma la rampa en la derecha en {way_name}",destination:"Toma la rampa en la derecha hacia {destination}"}},rotary:{default:{default:{default:"Entra en la rotonda",name:"Entra en la rotonda y sal en {way_name}",destination:"Entra en la rotonda y sal hacia {destination}"},name:{default:"Entra en {rotary_name}",name:"Entra en {rotary_name} y sal en {way_name}",destination:"Entra en {rotary_name} y sal hacia {destination}"},exit:{default:"Entra en la rotonda y toma la {exit_number} salida",name:"Entra en la rotonda y toma la {exit_number} salida a {way_name}",destination:"Entra en la rotonda y toma la {exit_number} salida hacia {destination}"},name_exit:{default:"Entra en {rotary_name} y coge la {exit_number} salida",name:"Entra en {rotary_name} y coge la {exit_number} salida en {way_name}",destination:"Entra en {rotary_name} y coge la {exit_number} salida hacia {destination}"}}},roundabout:{default:{exit:{default:"Entra en la rotonda y toma la {exit_number} salida",name:"Entra en la rotonda y toma la {exit_number} salida a {way_name}",destination:"Entra en la rotonda y toma la {exit_number} salida hacia {destination}"},default:{default:"Entra en la rotonda",name:"Entra en la rotonda y sal en {way_name}",destination:"Entra en la rotonda y sal hacia {destination}"}}},"roundabout turn":{default:{default:"Sigue {modifier}",name:"Sigue {modifier} en {way_name}",destination:"Sigue {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Contina recto",name:"Contina recto en {way_name}",destination:"Contina recto hacia {destination}"}},"exit roundabout":{default:{default:"Sal la rotonda",name:"Sal la rotonda en {way_name}",destination:"Sal la rotonda hacia {destination}"}},"exit rotary":{default:{default:"Sal la rotonda",name:"Sal la rotonda en {way_name}",destination:"Sal la rotonda hacia {destination}"}},turn:{default:{default:"Sigue {modifier}",name:"Sigue {modifier} en {way_name}",destination:"Sigue {modifier} hacia {destination}"},left:{default:"Gira a la izquierda",name:"Gira a la izquierda en {way_name}",destination:"Gira a la izquierda hacia {destination}"},right:{default:"Gira a la derecha",name:"Gira a la derecha en {way_name}",destination:"Gira a la derecha hacia {destination}"},straight:{default:"Ve recto",name:"Ve recto en {way_name}",destination:"Ve recto hacia {destination}"}},"use lane":{no_lanes:{default:"Contina recto"},default:{default:"{lane_instruction}"}}}}},{}],29:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"pohjoiseen",northeast:"koilliseen",east:"itn",southeast:"kaakkoon",south:"eteln",southwest:"lounaaseen",west:"lnteen",northwest:"luoteeseen"},modifier:{left:"vasemmall(e/a)",right:"oikeall(e/a)","sharp left":"jyrksti vasempaan","sharp right":"jyrksti oikeaan","slight left":"loivasti vasempaan","slight right":"loivasti oikeaan",straight:"suoraan eteenpin",uturn:"U-knns"},lanes:{xo:"Pysy oikealla",ox:"Pysy vasemmalla",xox:"Pysy keskell",oxo:"Pysy vasemmalla tai oikealla"}},modes:{ferry:{default:"Aja lautalle",name:"Aja lautalle {way_name}",destination:"Aja lautalle, jonka mrnp on {destination}"}},phrase:{"two linked by distance":"{instruction_one}, sitten {distance} pst, {instruction_two}","two linked":"{instruction_one}, sitten {instruction_two}","one in distance":"{distance} pst, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"{exit}"},arrive:{default:{default:"Olet saapunut {nth} mrnphsi",upcoming:"Saavut {nth} mrnphsi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}"},left:{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},right:{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"sharp left":{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},"sharp right":{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"slight right":{default:"Olet saapunut {nth} mrnphsi, joka on oikealla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on oikealla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on oikealla puolellasi"},"slight left":{default:"Olet saapunut {nth} mrnphsi, joka on vasemmalla puolellasi",upcoming:"Saavut {nth} mrnphsi, joka on vasemmalla puolellasi",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on vasemmalla puolellasi"},straight:{default:"Olet saapunut {nth} mrnphsi, joka on suoraan edesssi",upcoming:"Saavut {nth} mrnphsi, suoraan edess",short:"Olet saapunut","short-upcoming":"Saavut",named:"Olet saapunut mrnphn {waypoint_name}, joka on suoraan edesssi"}},continue:{default:{default:"Knny {modifier}",name:"Knny {modifier} pysyksesi tiell {way_name}",destination:"Knny {modifier} suuntana {destination}",exit:"Knny {modifier} tielle {way_name}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan pysyksesi tiell {way_name}",destination:"Jatka suuntana {destination}",distance:"Jatka suoraan {distance}",namedistance:"Jatka tiell {way_name} {distance}"},"sharp left":{default:"Jatka jyrksti vasempaan",name:"Jatka jyrksti vasempaan pysyksesi tiell {way_name}",destination:"Jatka jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Jatka jyrksti oikeaan",name:"Jatka jyrksti oikeaan pysyksesi tiell {way_name}",destination:"Jatka jyrksti oikeaan suuntana {destination}"},"slight left":{default:"Jatka loivasti vasempaan",name:"Jatka loivasti vasempaan pysyksesi tiell {way_name}",destination:"Jatka loivasti vasempaan suuntana {destination}"},"slight right":{default:"Jatka loivasti oikeaan",name:"Jatka loivasti oikeaan pysyksesi tiell {way_name}",destination:"Jatka loivasti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns ja jatka tiet {way_name}",destination:"Tee U-knns suuntana {destination}"}},depart:{default:{default:"Aja {direction}",name:"Aja tiet {way_name} {direction}",namedistance:"Aja {distance} {direction} tiet {way_name} "}},"end of road":{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan eteenpin tielle {way_name}",destination:"Jatka suoraan eteenpin suuntana {destination}"},uturn:{default:"Tien pss tee U-knns",name:"Tien pss tee U-knns tielle {way_name}",destination:"Tien pss tee U-knns suuntana {destination}"}},fork:{default:{default:"Jatka tienhaarassa {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},"slight left":{default:"Pysy vasemmalla tienhaarassa",name:"Pysy vasemmalla tielle {way_name}",destination:"Pysy vasemmalla suuntana {destination}"},"slight right":{default:"Pysy oikealla tienhaarassa",name:"Pysy oikealla tielle {way_name}",destination:"Pysy oikealla suuntana {destination}"},"sharp left":{default:"Knny tienhaarassa jyrksti vasempaan",name:"Knny tienhaarassa jyrksti vasempaan tielle {way_name}",destination:"Knny tienhaarassa jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Knny tienhaarassa jyrksti oikeaan",name:"Knny tienhaarassa jyrksti oikeaan tielle {way_name}",destination:"Knny tienhaarassa jyrksti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},merge:{default:{default:"Liity {modifier}",name:"Liity {modifier}, tielle {way_name}",destination:"Liity {modifier}, suuntana {destination}"},straight:{default:"Liity",name:"Liity tielle {way_name}",destination:"Liity suuntana {destination}"},"slight left":{default:"Liity vasemmalle",name:"Liity vasemmalle, tielle {way_name}",destination:"Liity vasemmalle, suuntana {destination}"},"slight right":{default:"Liity oikealle",name:"Liity oikealle, tielle {way_name}",destination:"Liity oikealle, suuntana {destination}"},"sharp left":{default:"Liity vasemmalle",name:"Liity vasemmalle, tielle {way_name}",destination:"Liity vasemmalle, suuntana {destination}"},"sharp right":{default:"Liity oikealle",name:"Liity oikealle, tielle {way_name}",destination:"Liity oikealle, suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},"new name":{default:{default:"Jatka {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka tielle {way_name}",destination:"Jatka suuntana {destination}"},"sharp left":{default:"Knny jyrksti vasempaan",name:"Knny jyrksti vasempaan tielle {way_name}",destination:"Knny jyrksti vasempaan suuntana {destination}"},"sharp right":{default:"Knny jyrksti oikeaan",name:"Knny jyrksti oikeaan tielle {way_name}",destination:"Knny jyrksti oikeaan suuntana {destination}"},"slight left":{default:"Jatka loivasti vasempaan",name:"Jatka loivasti vasempaan tielle {way_name}",destination:"Jatka loivasti vasempaan suuntana {destination}"},"slight right":{default:"Jatka loivasti oikeaan",name:"Jatka loivasti oikeaan tielle {way_name}",destination:"Jatka loivasti oikeaan suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},notification:{default:{default:"Jatka {modifier}",name:"Jatka {modifier} tielle {way_name}",destination:"Jatka {modifier} suuntana {destination}"},uturn:{default:"Tee U-knns",name:"Tee U-knns tielle {way_name}",destination:"Tee U-knns suuntana {destination}"}},"off ramp":{default:{default:"Aja erkanemiskaistalle",name:"Aja erkanemiskaistaa tielle {way_name}",destination:"Aja erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit}",exit_destination:"Ota poistuminen {exit}, suuntana {destination}"},left:{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},right:{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"},"sharp left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},"sharp right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"},"slight left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} vasemmalla",exit_destination:"Ota poistuminen {exit} vasemmalla, suuntana {destination}"},"slight right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}",exit:"Ota poistuminen {exit} oikealla",exit_destination:"Ota poistuminen {exit} oikealla, suuntana {destination}"}},"on ramp":{default:{default:"Aja erkanemiskaistalle",name:"Aja erkanemiskaistaa tielle {way_name}",destination:"Aja erkanemiskaistalle suuntana {destination}"},left:{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},right:{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"},"sharp left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},"sharp right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"},"slight left":{default:"Aja vasemmalla olevalle erkanemiskaistalle",name:"Aja vasemmalla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja vasemmalla olevalle erkanemiskaistalle suuntana {destination}"},"slight right":{default:"Aja oikealla olevalle erkanemiskaistalle",name:"Aja oikealla olevaa erkanemiskaistaa tielle {way_name}",destination:"Aja oikealla olevalle erkanemiskaistalle suuntana {destination}"}},rotary:{default:{default:{default:"Aja liikenneympyrn",name:"Aja liikenneympyrn ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse erkanemiskaista suuntana {destination}"},name:{default:"Aja liikenneympyrn {rotary_name}",name:"Aja liikenneympyrn {rotary_name} ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn {rotary_name} ja valitse erkanemiskaista suuntana {destination}"},exit:{default:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista suuntana {destination}"},name_exit:{default:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn {rotary_name} ja valitse {exit_number} erkanemiskaista suuntana {destination}"}}},roundabout:{default:{exit:{default:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista",name:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse {exit_number} erkanemiskaista suuntana {destination}"},default:{default:"Aja liikenneympyrn",name:"Aja liikenneympyrn ja valitse erkanemiskaista tielle {way_name}",destination:"Aja liikenneympyrn ja valitse erkanemiskaista suuntana {destination}"}}},"roundabout turn":{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},left:{default:"Knny vasempaan",name:"Knny vasempaan tielle {way_name}",destination:"Knny vasempaan suuntana {destination}"},right:{default:"Knny oikeaan",name:"Knny oikeaan tielle {way_name}",destination:"Knny oikeaan suuntana {destination}"},straight:{default:"Jatka suoraan eteenpin",name:"Jatka suoraan eteenpin tielle {way_name}",destination:"Jatka suoraan eteenpin suuntana {destination}"}},"exit roundabout":{default:{default:"Poistu liikenneympyrst",name:"Poistu liikenneympyrst tielle {way_name}",destination:"Poistu liikenneympyrst suuntana {destination}"}},"exit rotary":{default:{default:"Poistu liikenneympyrst",name:"Poistu liikenneympyrst tielle {way_name}",destination:"Poistu liikenneympyrst suuntana {destination}"}},turn:{default:{default:"Knny {modifier}",name:"Knny {modifier} tielle {way_name}",destination:"Knny {modifier} suuntana {destination}"},left:{default:"Knny vasempaan",name:"Knny vasempaan tielle {way_name}",destination:"Knny vasempaan suuntana {destination}"},right:{default:"Knny oikeaan",name:"Knny oikeaan tielle {way_name}",destination:"Knny oikeaan suuntana {destination}"},straight:{default:"Aja suoraan eteenpin",name:"Aja suoraan eteenpin tielle {way_name}",destination:"Aja suoraan eteenpin suuntana {destination}"}},"use lane":{no_lanes:{default:"Jatka suoraan eteenpin"},default:{default:"{lane_instruction}"}}}}},{}],30:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"premire",2:"seconde",3:"troisime",4:"quatrime",5:"cinquime",6:"sixime",7:"septime",8:"huitime",9:"neuvime",10:"dixime"},direction:{north:"le nord",northeast:"le nord-est",east:"lest",southeast:"le sud-est",south:"le sud",southwest:"le sud-ouest",west:"louest",northwest:"le nord-ouest"},modifier:{left:" gauche",right:" droite","sharp left":"franchement  gauche","sharp right":"franchement  droite","slight left":"lgrement  gauche","slight right":"lgrement  droite",straight:"tout droit",uturn:"demi-tour"},lanes:{xo:"Tenir la droite",ox:"Tenir la gauche",xox:"Rester au milieu",oxo:"Tenir la gauche ou la droite"}},modes:{ferry:{default:"Prendre le ferry",name:"Prendre le ferry {way_name:article}",destination:"Prendre le ferry en direction {destination:preposition}"}},phrase:{"two linked by distance":"{instruction_one}, puis, dans {distance}, {instruction_two}","two linked":"{instruction_one}, puis {instruction_two}","one in distance":"Dans {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sortie n{exit}"},arrive:{default:{default:"Vous tes arriv  votre {nth} destination",upcoming:"Vous arriverez  votre {nth} destination",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}"},left:{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},right:{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv   {waypoint_name:arrival}, sur la droite"},"sharp left":{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},"sharp right":{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la droite"},"slight right":{default:"Vous tes arriv  votre {nth} destination, sur la droite",upcoming:"Vous arriverez  votre {nth} destination, sur la droite",short:"Vous tes arriv","short-upcoming":"Vous arriverez",named:"Vous tes arriv {waypoint_name:arrival}, sur la droite"},"slight left":{default:"Vous tes arriv  votre {nth} destination, sur la gauche",upcoming:"Vous arriverez  votre {nth} destination, sur la gauche",short:"Vous tes arriv","short-upcoming":"Vous tes arriv",named:"Vous tes arriv {waypoint_name:arrival}, sur la gauche"},straight:{default:"Vous tes arriv  votre {nth} destination, droit devant",upcoming:"Vous arriverez  votre {nth} destination, droit devant",short:"Vous tes arriv","short-upcoming":"Vous tes arriv",named:"Vous tes arriv {waypoint_name:arrival}, droit devant"}},continue:{default:{default:"Tourner {modifier}",name:"Tourner {modifier} pour rester sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}",exit:"Tourner {modifier} sur {way_name:article}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit pour rester sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}",distance:"Continuer tout droit sur {distance}",namedistance:"Continuer sur {way_name:article} sur {distance}"},"sharp left":{default:"Tourner franchement  gauche",name:"Tourner franchement  gauche pour rester sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite",name:"Tourner franchement  droite pour rester sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},"slight left":{default:"Tourner lgrement  gauche",name:"Tourner lgrement  gauche pour rester sur {way_name:article}",destination:"Tourner lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Tourner lgrement  droite",name:"Tourner lgrement  droite pour rester sur {way_name:article}",destination:"Tourner lgrement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour et continuer sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},depart:{default:{default:"Se diriger vers {direction}",name:"Se diriger vers {direction} sur {way_name:article}",namedistance:"Se diriger vers {direction} sur {way_name:article} sur {distance}"}},"end of road":{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"},uturn:{default:"Faire demi-tour  la fin de la route",name:"Faire demi-tour  la fin {way_name:preposition}",destination:"Faire demi-tour  la fin de la route en direction {destination:preposition}"}},fork:{default:{default:"Tenir {modifier}  lembranchement",name:"Tenir {modifier} sur {way_name:article}",destination:"Tenir {modifier} en direction {destination:preposition}"},"slight left":{default:"Tenir la gauche  lembranchement",name:"Tenir la gauche sur {way_name:article}",destination:"Tenir la gauche en direction {destination:preposition}"},"slight right":{default:"Tenir la droite  lembranchement",name:"Tenir la droite sur {way_name:article}",destination:"Tenir la droite en direction {destination:preposition}"},"sharp left":{default:"Tourner franchement  gauche  lembranchement",name:"Tourner franchement  gauche sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite  lembranchement",name:"Tourner franchement  droite sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},merge:{default:{default:"Sinsrer {modifier}",name:"Sinsrer {modifier} sur {way_name:article}",destination:"Sinsrer {modifier} en direction {destination:preposition}"},straight:{default:"Sinsrer",name:"Sinsrer sur {way_name:article}",destination:"Sinsrer en direction {destination:preposition}"},"slight left":{default:"Sinsrer lgrement  gauche",name:"Sinsrer lgrement  gauche sur {way_name:article}",destination:"Sinsrer lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Sinsrer lgrement  droite",name:"Sinsrer lgrement  droite sur {way_name:article}",destination:"Sinsrer  droite en direction {destination:preposition}"},"sharp left":{default:"Sinsrer  gauche",name:"Sinsrer  gauche sur {way_name:article}",destination:"Sinsrer  gauche en direction {destination:preposition}"},"sharp right":{default:"Sinsrer  droite",name:"Sinsrer  droite sur {way_name:article}",destination:"Sinsrer  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},"new name":{default:{default:"Continuer {modifier}",name:"Continuer {modifier} sur {way_name:article}",destination:"Continuer {modifier} en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"},"sharp left":{default:"Tourner franchement  gauche",name:"Tourner franchement  gauche sur {way_name:article}",destination:"Tourner franchement  gauche en direction {destination:preposition}"},"sharp right":{default:"Tourner franchement  droite",name:"Tourner franchement  droite sur {way_name:article}",destination:"Tourner franchement  droite en direction {destination:preposition}"},"slight left":{default:"Continuer lgrement  gauche",name:"Continuer lgrement  gauche sur {way_name:article}",destination:"Continuer lgrement  gauche en direction {destination:preposition}"},"slight right":{default:"Continuer lgrement  droite",name:"Continuer lgrement  droite sur {way_name:article}",destination:"Continuer lgrement  droite en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},notification:{default:{default:"Continuer {modifier}",name:"Continuer {modifier} sur {way_name:article}",destination:"Continuer {modifier} en direction {destination:preposition}"},uturn:{default:"Faire demi-tour",name:"Faire demi-tour sur {way_name:article}",destination:"Faire demi-tour en direction {destination:preposition}"}},"off ramp":{default:{default:"Prendre la sortie",name:"Prendre la sortie sur {way_name:article}",destination:"Prendre la sortie en direction {destination:preposition}",exit:"Prendre la sortie {exit}",exit_destination:"Prendre la sortie {exit} en direction {destination:preposition}"},left:{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},right:{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"},"sharp left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},"sharp right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"},"slight left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la gauche",exit_destination:"Prendre la sortie {exit} sur la gauche en direction {destination:preposition}"},"slight right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}",exit:"Prendre la sortie {exit} sur la droite",exit_destination:"Prendre la sortie {exit} sur la droite en direction {destination:preposition}"}},"on ramp":{default:{default:"Prendre la sortie",name:"Prendre la sortie sur {way_name:article}",destination:"Prendre la sortie en direction {destination:preposition}"},left:{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},right:{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"},"sharp left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},"sharp right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"},"slight left":{default:"Prendre la sortie  gauche",name:"Prendre la sortie  gauche sur {way_name:article}",destination:"Prendre la sortie  gauche en direction {destination:preposition}"},"slight right":{default:"Prendre la sortie  droite",name:"Prendre la sortie  droite sur {way_name:article}",destination:"Prendre la sortie  droite en direction {destination:preposition}"}},rotary:{default:{default:{default:"Prendre le rond-point",name:"Prendre le rond-point, puis sortir sur {way_name:article}",destination:"Prendre le rond-point, puis sortir en direction {destination:preposition}"},name:{default:"Prendre {rotary_name:rotary}",name:"Prendre {rotary_name:rotary}, puis sortir par {way_name:article}",destination:"Prendre {rotary_name:rotary}, puis sortir en direction {destination:preposition}"},exit:{default:"Prendre le rond-point, puis la {exit_number} sortie",name:"Prendre le rond-point, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre le rond-point, puis la {exit_number} sortie en direction {destination:preposition}"},name_exit:{default:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie",name:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre {rotary_name:rotary}, puis la {exit_number} sortie en direction {destination:preposition}"}}},roundabout:{default:{exit:{default:"Prendre le rond-point, puis la {exit_number} sortie",name:"Prendre le rond-point, puis la {exit_number} sortie sur {way_name:article}",destination:"Prendre le rond-point, puis la {exit_number} sortie en direction {destination:preposition}"},default:{default:"Prendre le rond-point",name:"Prendre le rond-point, puis sortir sur {way_name:article}",destination:"Prendre le rond-point, puis sortir en direction {destination:preposition}"}}},"roundabout turn":{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},left:{default:"Tourner  gauche",name:"Tourner  gauche sur {way_name:article}",destination:"Tourner  gauche en direction {destination:preposition}"},right:{default:"Tourner  droite",name:"Tourner  droite sur {way_name:article}",destination:"Tourner  droite en direction {destination:preposition}"},straight:{default:"Continuer tout droit",name:"Continuer tout droit sur {way_name:article}",destination:"Continuer tout droit en direction {destination:preposition}"}},"exit roundabout":{default:{default:"Sortir du rond-point",name:"Sortir du rond-point sur {way_name:article}",destination:"Sortir du rond-point en direction {destination:preposition}"}},"exit rotary":{default:{default:"Sortir du rond-point",name:"Sortir du rond-point sur {way_name:article}",destination:"Sortir du rond-point en direction {destination:preposition}"}},turn:{default:{default:"Tourner {modifier}",name:"Tourner {modifier} sur {way_name:article}",destination:"Tourner {modifier} en direction {destination:preposition}"},left:{default:"Tourner  gauche",name:"Tourner  gauche sur {way_name:article}",destination:"Tourner  gauche en direction {destination:preposition}"},right:{default:"Tourner  droite",name:"Tourner  droite sur {way_name:article}",destination:"Tourner  droite en direction {destination:preposition}"},straight:{default:"Aller tout droit",name:"Aller tout droit sur {way_name:article}",destination:"Aller tout droit en direction {destination:preposition}"}},"use lane":{no_lanes:{default:"Continuer tout droit"},default:{default:"{lane_instruction}"}}}}},{}],31:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:" ",east:"",southeast:" ",south:"",southwest:" ",west:"",northwest:" "},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:" "},lanes:{xo:" ",ox:" ",xox:"  ",oxo:"   "}},modes:{ferry:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},phrase:{"two linked by distance":"{instruction_one}, , {distance}, {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":" {exit}"},arrive:{default:{default:"   {nth} ",upcoming:"    {nth} ",short:"","short-upcoming":"",named:"  {waypoint_name}"},left:{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},right:{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"sharp left":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"sharp right":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"slight right":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},"slight left":{default:"   {nth}  ",upcoming:"    {nth}  ",short:"","short-upcoming":"",named:"  {waypoint_name}  "},straight:{default:"   {nth} , ",upcoming:"    {nth} , ",short:"","short-upcoming":"",named:"  {waypoint_name}, "}},continue:{default:{default:" {modifier}",name:" {modifier}   {way_name}",destination:" {modifier}  {destination}",exit:" {modifier}  {way_name}"},straight:{default:" ",name:"     {way_name}",destination:"  {destination}",distance:"   {distance}",namedistance:"  {way_name}  {distance}"},"sharp left":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"slight left":{default:"  ",name:"      {way_name}",destination:"    {destination}"},"slight right":{default:"  ",name:"      {way_name}",destination:"    {destination}"},uturn:{default:"  ",name:"     {way_name}",destination:"    {destination}"}},depart:{default:{default:" {direction}",name:" {direction}  {way_name}",namedistance:" {direction}  {way_name}  {distance}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:" ",name:"   {way_name}",destination:"   {destination}"},uturn:{default:"    ",name:"    {way_name}  ",destination:"    {destination}  "}},fork:{default:{default:" {modifier} ",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},"slight left":{default:"  ",name:"   {way_name}",destination:"   {destination}"},"slight right":{default:"  ",name:"   {way_name}",destination:"   {destination}"},"sharp left":{default:"   ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"   ",name:"    {way_name}",destination:"    {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},merge:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:"",name:"  {way_name}",destination:"  {destination}"},"slight left":{default:" ",name:"   {way_name}",destination:"   {destination}"},"slight right":{default:" ",name:"   {way_name}",destination:"   {destination}"},"sharp left":{default:" ",name:"   {way_name}",destination:"   {destination}"},"sharp right":{default:" ",name:"   {way_name}",destination:"   {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},straight:{default:" ",name:"  {way_name}",destination:"  {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"     {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"     {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},uturn:{default:"  ",name:"    {way_name}",destination:"    {destination}"}},"off ramp":{default:{default:" ",name:"   {way_name}",destination:"   {destination}",exit:"  {exit}",exit_destination:"  {exit}  {destination}"},left:{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},right:{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"    {destination}",exit:"  {exit} ",exit_destination:"  {exit}   {destination}"}},"on ramp":{default:{default:" ",name:"   {way_name}",destination:"   {destination}"},left:{default:"  ",name:"    {way_name}",destination:"    {destination}"},right:{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"    {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"    {destination}"}},rotary:{default:{default:{default:"  ",name:"     {way_name}",destination:"     {destination}"},name:{default:" {rotary_name}",name:" {rotary_name}   {way_name}",destination:" {rotary_name}   {destination}"},exit:{default:"     {exit_number}",name:"     {exit_number} {way_name}",destination:"     {exit_number}  {destination}"},name_exit:{default:" {rotary_name}   {exit_number}",name:" {rotary_name}   {exit_number} {way_name}",destination:" {rotary_name}   {exit_number}  {destination}"}}},roundabout:{default:{exit:{default:"     {exit_number}",name:"     {exit_number} {way_name}",destination:"     {exit_number}  {destination}"},default:{default:"  ",name:"     {way_name}",destination:"     {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},left:{default:" ",name:"  {way_name}",destination:"   {destination}"},right:{default:" ",name:"  {way_name}",destination:"   {destination}"},straight:{default:" ",name:"   {way_name}",destination:"   {destination}"}},"exit roundabout":{default:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},"exit rotary":{default:{default:"  ",name:"   {way_name}",destination:"    {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}  {destination}"},left:{default:" ",name:"  {way_name}",destination:"   {destination}"},right:{default:" ",name:"  {way_name}",destination:"   {destination}"},straight:{default:" ",name:"  {way_name}",destination:"   {destination}"}},"use lane":{no_lanes:{default:" "},default:{default:"{lane_instruction}"}}}}},{}],32:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"utara",northeast:"timur laut",east:"timur",southeast:"tenggara",south:"selatan",southwest:"barat daya",west:"barat",northwest:"barat laut"},modifier:{left:"kiri",right:"kanan","sharp left":"tajam kiri","sharp right":"tajam kanan","slight left":"agak ke kiri","slight right":"agak ke kanan",straight:"lurus",uturn:"putar balik"},lanes:{xo:"Tetap di kanan",ox:"Tetap di kiri",xox:"Tetap di tengah",oxo:"Tetap di kiri atau kanan"}},modes:{ferry:{default:"Naik ferry",name:"Naik ferry di {way_name}",destination:"Naik ferry menuju {destination}"}},phrase:{"two linked by distance":"{instruction_one}, then, in {distance}, {instruction_two}","two linked":"{instruction_one}, then {instruction_two}","one in distance":"In {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Anda telah tiba di tujuan ke-{nth}",upcoming:"Anda telah tiba di tujuan ke-{nth}",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}"},left:{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},right:{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"sharp left":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},"sharp right":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"slight right":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kanan",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kanan"},"slight left":{default:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",upcoming:"Anda telah tiba di tujuan ke-{nth}, di sebelah kiri",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, di sebelah kiri"},straight:{default:"Anda telah tiba di tujuan ke-{nth}, lurus saja",upcoming:"Anda telah tiba di tujuan ke-{nth}, lurus saja",short:"Anda telah tiba di tujuan ke-{nth}","short-upcoming":"Anda telah tiba di tujuan ke-{nth}",named:"Anda telah tiba di {waypoint_name}, lurus saja"}},continue:{default:{default:"Belok {modifier}",name:"Terus {modifier} ke {way_name}",destination:"Belok {modifier} menuju {destination}",exit:"Belok {modifier} ke {way_name}"},straight:{default:"Lurus terus",name:"Terus ke {way_name}",destination:"Terus menuju {destination}",distance:"Continue straight for {distance}",namedistance:"Continue on {way_name} for {distance}"},"sharp left":{default:"Belok kiri tajam",name:"Make a sharp left to stay on {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan tajam",name:"Make a sharp right to stay on {way_name}",destination:"Belok kanan tajam menuju {destination}"},"slight left":{default:"Tetap agak di kiri",name:"Tetap agak di kiri ke {way_name}",destination:"Tetap agak di kiri menuju {destination}"},"slight right":{default:"Tetap agak di kanan",name:"Tetap agak di kanan ke {way_name}",destination:"Tetap agak di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},depart:{default:{default:"Arah {direction}",name:"Arah {direction} di {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Belok {modifier}",name:"Belok {modifier} ke {way_name}",destination:"Belok {modifier} menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"},uturn:{default:"Putar balik di akhir jalan",name:"Putar balik di {way_name} di akhir jalan",destination:"Putar balik menuju {destination} di akhir jalan"}},fork:{default:{default:"Tetap {modifier} di pertigaan",name:"Tetap {modifier} di pertigaan ke {way_name}",destination:"Tetap {modifier} di pertigaan menuju {destination}"},"slight left":{default:"Tetap di kiri pada pertigaan",name:"Tetap di kiri pada pertigaan ke arah {way_name}",destination:"Tetap di kiri pada pertigaan menuju {destination}"},"slight right":{default:"Tetap di kanan pada pertigaan",name:"Tetap di kanan pada pertigaan ke arah {way_name}",destination:"Tetap di kanan pada pertigaan menuju {destination}"},"sharp left":{default:"Belok kiri pada pertigaan",name:"Belok kiri tajam ke arah {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan pada pertigaan",name:"Belok kanan tajam ke arah {way_name}",destination:"Belok kanan tajam menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},merge:{default:{default:"Bergabung {modifier}",name:"Bergabung {modifier} ke arah {way_name}",destination:"Bergabung {modifier} menuju {destination}"},straight:{default:"Bergabung lurus",name:"Bergabung lurus ke arah {way_name}",destination:"Bergabung lurus menuju {destination}"},"slight left":{default:"Bergabung di kiri",name:"Bergabung di kiri ke arah {way_name}",destination:"Bergabung di kiri menuju {destination}"},"slight right":{default:"Bergabung di kanan",name:"Bergabung di kanan ke arah {way_name}",destination:"Bergabung di kanan menuju {destination}"},"sharp left":{default:"Bergabung di kiri",name:"Bergabung di kiri ke arah {way_name}",destination:"Bergabung di kiri menuju {destination}"},"sharp right":{default:"Bergabung di kanan",name:"Bergabung di kanan ke arah {way_name}",destination:"Bergabung di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},"new name":{default:{default:"Lanjutkan {modifier}",name:"Lanjutkan {modifier} menuju {way_name}",destination:"Lanjutkan {modifier} menuju {destination}"},straight:{default:"Lurus terus",name:"Terus ke {way_name}",destination:"Terus menuju {destination}"},"sharp left":{default:"Belok kiri tajam",name:"Belok kiri tajam ke arah {way_name}",destination:"Belok kiri tajam menuju {destination}"},"sharp right":{default:"Belok kanan tajam",name:"Belok kanan tajam ke arah {way_name}",destination:"Belok kanan tajam menuju {destination}"},"slight left":{default:"Lanjut dengan agak ke kiri",name:"Lanjut dengan agak di kiri ke {way_name}",destination:"Tetap agak di kiri menuju {destination}"},"slight right":{default:"Tetap agak di kanan",name:"Tetap agak di kanan ke {way_name}",destination:"Tetap agak di kanan menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},notification:{default:{default:"Lanjutkan {modifier}",name:"Lanjutkan {modifier} menuju {way_name}",destination:"Lanjutkan {modifier} menuju {destination}"},uturn:{default:"Putar balik",name:"Putar balik ke arah {way_name}",destination:"Putar balik menuju {destination}"}},"off ramp":{default:{default:"Ambil jalan melandai",name:"Ambil jalan melandai ke {way_name}",destination:"Ambil jalan melandai menuju {destination}",exit:"Take exit {exit}",exit_destination:"Take exit {exit} towards {destination}"},left:{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},right:{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"sharp left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"sharp right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"},"slight left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}",exit:"Take exit {exit} on the left",exit_destination:"Take exit {exit} on the left towards {destination}"},"slight right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}",exit:"Take exit {exit} on the right",exit_destination:"Take exit {exit} on the right towards {destination}"}},"on ramp":{default:{default:"Ambil jalan melandai",name:"Ambil jalan melandai ke {way_name}",destination:"Ambil jalan melandai menuju {destination}"},left:{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},right:{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"},"sharp left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},"sharp right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"},"slight left":{default:"Ambil jalan yang melandai di sebelah kiri",name:"Ambil jalan melandai di sebelah kiri ke arah {way_name}",destination:"Ambil jalan melandai di sebelah kiri menuju {destination}"},"slight right":{default:"Ambil jalan melandai di sebelah kanan",name:"Ambil jalan melandai di sebelah kanan ke {way_name}",destination:"Ambil jalan melandai di sebelah kanan  menuju {destination}"}},rotary:{default:{default:{default:"Masuk bundaran",name:"Masuk bundaran dan keluar arah {way_name}",destination:"Masuk bundaran dan keluar menuju {destination}"},name:{default:"Masuk {rotary_name}",name:"Masuk {rotary_name} dan keluar arah {way_name}",destination:"Masuk {rotary_name} dan keluar menuju {destination}"},exit:{default:"Masuk bundaran dan ambil jalan keluar {exit_number}",name:"Masuk bundaran dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk bundaran dan ambil jalan keluar {exit_number} menuju {destination}"},name_exit:{default:"Masuk {rotary_name} dan ambil jalan keluar {exit_number}",name:"Masuk {rotary_name} dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk {rotary_name} dan ambil jalan keluar {exit_number} menuju {destination}"}}},roundabout:{default:{exit:{default:"Masuk bundaran dan ambil jalan keluar {exit_number}",name:"Masuk bundaran dan ambil jalan keluar {exit_number} arah {way_name}",destination:"Masuk bundaran dan ambil jalan keluar {exit_number} menuju {destination}"},default:{default:"Masuk bundaran",name:"Masuk bundaran dan keluar arah {way_name}",destination:"Masuk bundaran dan keluar menuju {destination}"}}},"roundabout turn":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"}},"exit roundabout":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus terus",name:"Tetap lurus ke {way_name} ",destination:"Tetap lurus menuju {destination}"}},"exit rotary":{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus",name:"Lurus arah {way_name}",destination:"Lurus menuju {destination}"}},turn:{default:{default:"Lakukan {modifier}",name:"Lakukan {modifier} ke arah {way_name}",destination:"Lakukan {modifier} menuju {destination}"},left:{default:"Belok kiri",name:"Belok kiri ke {way_name}",destination:"Belok kiri menuju {destination}"},right:{default:"Belok kanan",name:"Belok kanan ke {way_name}",destination:"Belok kanan menuju {destination}"},straight:{default:"Lurus",name:"Lurus arah {way_name}",destination:"Lurus menuju {destination}"}},"use lane":{no_lanes:{default:"Lurus terus"},default:{default:"{lane_instruction}"}}}}},{}],33:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"nord",northeast:"nord-est",east:"est",southeast:"sud-est",south:"sud",southwest:"sud-ovest",west:"ovest",northwest:"nord-ovest"},modifier:{left:"sinistra",right:"destra","sharp left":"sinistra","sharp right":"destra","slight left":"sinistra leggermente","slight right":"destra leggermente",straight:"dritto",uturn:"inversione a U"},lanes:{xo:"Mantieni la destra",ox:"Mantieni la sinistra",xox:"Rimani in mezzo",oxo:"Mantieni la destra o la sinistra"}},modes:{ferry:{default:"Prendi il traghetto",name:"Prendi il traghetto {way_name}",destination:"Prendi il traghetto verso {destination}"}},phrase:{"two linked by distance":"{instruction_one}, poi tra {distance},{instruction_two}","two linked":"{instruction_one}, poi {instruction_two}","one in distance":"tra {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Sei arrivato alla tua {nth} destinazione",upcoming:"Sei arrivato alla tua {nth} destinazione",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"Sei arrivato a {waypoint_name}"},left:{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},right:{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"sharp left":{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},"sharp right":{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"slight right":{default:"sei arrivato alla tua {nth} destinazione, sulla destra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla destra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla destra"},"slight left":{default:"sei arrivato alla tua {nth} destinazione, sulla sinistra",upcoming:"sei arrivato alla tua {nth} destinazione, sulla sinistra",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, sulla sinistra"},straight:{default:"sei arrivato alla tua {nth} destinazione, si trova davanti a te",upcoming:"sei arrivato alla tua {nth} destinazione, si trova davanti a te",short:"Sei arrivato alla tua {nth} destinazione","short-upcoming":"Sei arrivato alla tua {nth} destinazione",named:"sei arrivato a {waypoint_name}, si trova davanti a te"}},continue:{default:{default:"Gira a {modifier}",name:"Gira a {modifier} per stare su {way_name}",destination:"Gira a {modifier} verso {destination}",exit:"Gira a {modifier} in {way_name}"},straight:{default:"Continua dritto",name:"Continua dritto per stare su {way_name}",destination:"Continua verso {destination}",distance:"Continua dritto per {distance}",namedistance:"Continua su {way_name} per {distance}"},"sharp left":{default:"Svolta a sinistra",name:"Fai una stretta curva a sinistra per stare su {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra",name:"Fau una stretta curva a destra per stare su {way_name}",destination:"Svolta a destra verso {destination}"},"slight left":{default:"Fai una leggera curva a sinistra",name:"Fai una leggera curva a sinistra per stare su {way_name}",destination:"Fai una leggera curva a sinistra verso {destination}"},"slight right":{default:"Fai una leggera curva a destra",name:"Fai una leggera curva a destra per stare su {way_name}",destination:"Fai una leggera curva a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione ad U poi continua su {way_name}",destination:"Fai un'inversione a U verso {destination}"}},depart:{default:{default:"Continua verso {direction}",name:"Continua verso {direction} in {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Gira a {modifier}",name:"Gira a {modifier} in {way_name}",destination:"Gira a {modifier} verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"},uturn:{default:"Fai un'inversione a U alla fine della strada",name:"Fai un'inversione a U in {way_name} alla fine della strada",destination:"Fai un'inversione a U verso {destination} alla fine della strada"}},fork:{default:{default:"Mantieni la {modifier} al bivio",name:"Mantieni la {modifier} al bivio in {way_name}",destination:"Mantieni la {modifier} al bivio verso {destination}"},"slight left":{default:"Mantieni la sinistra al bivio",name:"Mantieni la sinistra al bivio in {way_name}",destination:"Mantieni la sinistra al bivio verso {destination}"},"slight right":{default:"Mantieni la destra al bivio",name:"Mantieni la destra al bivio in {way_name}",destination:"Mantieni la destra al bivio verso {destination}"},"sharp left":{default:"Svolta a sinistra al bivio",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra al bivio",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},merge:{default:{default:"Immettiti a {modifier}",name:"Immettiti {modifier} in {way_name}",destination:"Immettiti {modifier} verso {destination}"},straight:{default:"Immettiti a dritto",name:"Immettiti dritto in {way_name}",destination:"Immettiti dritto verso {destination}"},"slight left":{default:"Immettiti a sinistra",name:"Immettiti a sinistra in {way_name}",destination:"Immettiti a sinistra verso {destination}"},"slight right":{default:"Immettiti a destra",name:"Immettiti a destra in {way_name}",destination:"Immettiti a destra verso {destination}"},"sharp left":{default:"Immettiti a sinistra",name:"Immettiti a sinistra in {way_name}",destination:"Immettiti a sinistra verso {destination}"},"sharp right":{default:"Immettiti a destra",name:"Immettiti a destra in {way_name}",destination:"Immettiti a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},"new name":{default:{default:"Continua a {modifier}",name:"Continua a {modifier} in {way_name}",destination:"Continua a {modifier} verso {destination}"},straight:{default:"Continua dritto",name:"Continua in {way_name}",destination:"Continua verso {destination}"},"sharp left":{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},"sharp right":{default:"Svolta a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},"slight left":{default:"Continua leggermente a sinistra",name:"Continua leggermente a sinistra in {way_name}",destination:"Continua leggermente a sinistra verso {destination}"},"slight right":{default:"Continua leggermente a destra",name:"Continua leggermente a destra in {way_name} ",destination:"Continua leggermente a destra verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},notification:{default:{default:"Continua a {modifier}",name:"Continua a {modifier} in {way_name}",destination:"Continua a {modifier} verso {destination}"},uturn:{default:"Fai un'inversione a U",name:"Fai un'inversione a U in {way_name}",destination:"Fai un'inversione a U verso {destination}"}},"off ramp":{default:{default:"Prendi la rampa",name:"Prendi la rampa in {way_name}",destination:"Prendi la rampa verso {destination}",exit:"Prendi l'uscita {exit}",exit_destination:"Prendi l'uscita  {exit} verso {destination}"},left:{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},right:{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"},"sharp left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},"sharp right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"},"slight left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}",exit:"Prendi l'uscita {exit} a sinistra",exit_destination:"Prendi la {exit}  uscita a sinistra verso {destination}"},"slight right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}",exit:"Prendi la {exit} uscita a destra",exit_destination:"Prendi la {exit} uscita a destra verso {destination}"}},"on ramp":{default:{default:"Prendi la rampa",name:"Prendi la rampa in {way_name}",destination:"Prendi la rampa verso {destination}"},left:{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},right:{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"},"sharp left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},"sharp right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"},"slight left":{default:"Prendi la rampa a sinistra",name:"Prendi la rampa a sinistra in {way_name}",destination:"Prendi la rampa a sinistra verso {destination}"},"slight right":{default:"Prendi la rampa a destra",name:"Prendi la rampa a destra in {way_name}",destination:"Prendi la rampa a destra verso {destination}"}},rotary:{default:{default:{default:"Immettiti nella rotonda",name:"Immettiti nella ritonda ed esci in {way_name}",destination:"Immettiti nella ritonda ed esci verso {destination}"},name:{default:"Immettiti in {rotary_name}",name:"Immettiti in {rotary_name} ed esci su {way_name}",destination:"Immettiti in {rotary_name} ed esci verso {destination}"},exit:{default:"Immettiti nella rotonda e prendi la {exit_number} uscita",name:"Immettiti nella rotonda e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti nella rotonda e prendi la {exit_number} uscita verso   {destination}"},name_exit:{default:"Immettiti in {rotary_name} e prendi la {exit_number} uscita",name:"Immettiti in {rotary_name} e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti in {rotary_name} e prendi la {exit_number}  uscita verso {destination}"}}},roundabout:{default:{exit:{default:"Immettiti nella rotonda e prendi la {exit_number} uscita",name:"Immettiti nella rotonda e prendi la {exit_number} uscita in {way_name}",destination:"Immettiti nella rotonda e prendi la {exit_number} uscita verso {destination}"},default:{default:"Entra nella rotonda",name:"Entra nella rotonda e prendi l'uscita in {way_name}",destination:"Entra nella rotonda e prendi l'uscita verso {destination}"}}},"roundabout turn":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"}},"exit roundabout":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Continua dritto",name:"Continua dritto in {way_name}",destination:"Continua dritto verso {destination}"}},"exit rotary":{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Prosegui dritto",name:"Continua su {way_name}",destination:"Continua verso {destination}"}},turn:{default:{default:"Fai una {modifier}",name:"Fai una {modifier} in {way_name}",destination:"Fai una {modifier} verso {destination}"},left:{default:"Svolta a sinistra",name:"Svolta a sinistra in {way_name}",destination:"Svolta a sinistra verso {destination}"},right:{default:"Gira a destra",name:"Svolta a destra in {way_name}",destination:"Svolta a destra verso {destination}"},straight:{default:"Prosegui dritto",name:"Continua su {way_name}",destination:"Continua verso {destination}"}},"use lane":{no_lanes:{default:"Continua dritto"},default:{default:"{lane_instruction}"}}}}},{}],34:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:""},lanes:{xo:" ",ox:" ",xox:"",oxo:"    "}},modes:{ferry:{default:" ",name:"  {way_name}",destination:"  {destination} ."}},phrase:{"two linked by distance":"{instruction_one}, , {distance} , {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":"{distance} , {instruction_one}","name and ref":"{name} ({ref})","exit with number":"{exit} ."},arrive:{default:{default:" {nth} .",upcoming:"{nth}   .",short:"","short-upcoming":" .",named:" {waypoint_name} ."},left:{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},right:{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"sharp left":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"sharp right":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"slight right":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},"slight left":{default:" {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."},straight:{default:"  {nth}  .",upcoming:" {nth}   .",short:"","short-upcoming":"   .",named:"  {waypoint_name} ."}},continue:{default:{default:"{modifier} ",name:"{modifier}  {way_name}  .",destination:"{modifier}  {destination} .",exit:"{way_name}  {modifier}  ."},straight:{default:"  .",name:"{way_name}    .",destination:"{destination}  .",distance:"{distance}  .",namedistance:"{distance} {way_name} ."},"sharp left":{default:" .",name:"   {way_name} .",destination:"   {destination} ."},"sharp right":{default:" .",name:"  {way_name} .",destination:"   {destination} ."},"slight left":{default:" .",name:"   {way_name} .",destination:"    {destination} ."},"slight right":{default:" .",name:"   {way_name} .",destination:"    {destination} ."},uturn:{default:" ",name:" {way_name} .",destination:"  {destination} ."}},depart:{default:{default:"{direction} ",name:"{direction}   {way_name}  . ",namedistance:"{direction} {way_name}  {distance} ."}},"end of road":{default:{default:"{modifier} .",name:"{modifier} {way_name} .",destination:"{modifier}   {destination} ."},straight:{default:"  .",name:"{way_name}   .",destination:"{destination}  ."},uturn:{default:"    .",name:"    {way_name} .",destination:"    {destination}  ."}},fork:{default:{default:" {modifier}  .",name:"{modifier} {way_name} .",destination:"{modifier} {destination} ."},"slight left":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"slight right":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"sharp left":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},"sharp right":{default:"  .",name:"  {way_name} .",destination:"  {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},merge:{default:{default:"{modifier} ",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},straight:{default:"",name:"{way_name} .",destination:"{destination} ."},"slight left":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"slight right":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"sharp left":{default:" .",name:"{way_name} .",destination:"  {destination} ."},"sharp right":{default:" .",name:"{way_name} .",destination:"  {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},"new name":{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},straight:{default:".",name:"{way_name}  .",destination:"{destination}  ."},"sharp left":{default:" .",name:"  {way_name} .",destination:"  {destination} ."},"sharp right":{default:" .",name:"  {way_name} .",destination:"  {destination} ."},"slight left":{default:"  .",name:"  {way_name} .",destination:"   {destination} ."},"slight right":{default:"  .",name:"  {way_name} .",destination:"   {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},notification:{default:{default:"{modifier} .",name:"{modifier} {way_name} .",destination:"{modifier} {destination} ."},uturn:{default:".",name:" {way_name} .",destination:" {destination} ."}},"off ramp":{default:{default:"  ..",name:"  {way_name} .",destination:"  {destination} .",exit:"{exit}  .",exit_destination:"{exit}   {destination} ."},left:{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},right:{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"sharp left":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"sharp right":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"slight left":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."},"slight right":{default:"   .",name:"   {way_name} .",destination:"   {destination} .",exit:"{exit}   .",exit_destination:"{exit}    {destination} ."}},"on ramp":{default:{default:"  ..",name:"  {way_name} .",destination:"  {destination} ."},left:{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},right:{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"sharp left":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"sharp right":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"slight left":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."},"slight right":{default:"   .",name:"   {way_name} .",destination:"   {destination} ."}},rotary:{default:{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},name:{default:"{rotary_name} .",name:"{rotary_name}  {way_name} .",destination:"{rotary_name}  {destination} ."},exit:{default:"  {exit_number}  .",name:"  {exit_number}   {way_name} .",destination:"  {exit_number}   {destination} ."},name_exit:{default:"{rotary_name}  {exit_number}  .",name:"{rotary_name}  {exit_number}   {way_name} .",destination:"{rotary_name}  {exit_number}   {destination} ."}}},roundabout:{default:{exit:{default:"  {exit_number} .",name:"  {exit_number}  {way_name} .",destination:"  {exit_number}  {destination} ."},default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}}},"roundabout turn":{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},left:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},right:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},straight:{default:" .",name:" {way_name} .",destination:" {destination} ."}},"exit roundabout":{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}},"exit rotary":{default:{default:" .",name:"  {way_name} .",destination:"  {destination} ."}},turn:{default:{default:"{modifier} .",name:"{modifier}  {way_name} .",destination:"{modifier}  {destination} ."},left:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},right:{default:" .",name:"  {way_name} .",destination:"  {destination} ."},straight:{default:" .",name:" {way_name} .",destination:" {destination} ."}},"use lane":{no_lanes:{default:"."},default:{default:"{lane_instruction}"}}}}},{}],35:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:"-"},lanes:{xo:"",ox:"",xox:"",oxo:"   "}},modes:{ferry:{default:" ",name:"{way_name} ",destination:"{destination} "}},phrase:{"two linked by distance":"{instruction_one} {distance} {instruction_two}","two linked":"{instruction_one} {instruction_two}","one in distance":"{distance} {instruction_one}","name and ref":"{name}( {ref})","exit with number":"{exit}"},arrive:{default:{default:"{nth}  ",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},left:{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},right:{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"sharp left":{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},"sharp right":{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"slight right":{default:"  {nth}  ",upcoming:" {nth}   ",short:"  ","short-upcoming":"  ",named:"  {waypoint_name}  "},"slight left":{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "},straight:{default:"  {nth}",upcoming:"  {nth}",short:"  ","short-upcoming":"  ",named:"  {waypoint_name} "}},continue:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} ",exit:"{way_name} {modifier}"},straight:{default:" ",name:"{way_name}",destination:"{destination}",distance:"{distance}  ",namedistance:"{way_name}{distance}"},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight left":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight right":{default:" ",name:"{way_name} ",destination:"{destination} "},uturn:{default:"- ",name:"{way_name} -",destination:"{destination} "}},depart:{default:{default:"{direction} ",name:"{direction} {way_name} ",namedistance:"{direction} {way_name}{distance} "}},"end of road":{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"},uturn:{default:" -",name:" {way_name}-",destination:"{destination} "}},fork:{default:{default:" {modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},"slight left":{default:"",name:"{way_name}",destination:"{destination} "},"slight right":{default:"",name:"{way_name}",destination:"{destination} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} "},uturn:{default:"- ",name:"{way_name}-",destination:"{destination} "}},merge:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:"",name:"{way_name}",destination:"{destination} "},"slight left":{default:"",name:"{way_name}",destination:"{destination} "},"slight right":{default:"",name:"{way_name}",destination:"{destination} "},"sharp left":{default:"",name:"{way_name}",destination:"{destination} "},"sharp right":{default:"",name:"{way_name}",destination:"{destination} "},uturn:{default:"- ",name:"{way_name} -  ",destination:"{destination} "}},"new name":{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:" ",name:"{way_name} ",destination:"{destination} "},"slight left":{default:" ",name:"{way_name} ",destination:"{destination}"},"slight right":{default:" ",name:"{way_name} ",destination:"{destination}"},uturn:{default:"- ",name:"{way_name} - ",destination:"{destination} "}},notification:{default:{default:"{modifier}",name:"{way_name} {modifier}",destination:"{destination} {modifier} "},uturn:{default:"- ",name:"{way_name} - ",destination:"{destination} "}},"off ramp":{default:{default:"",name:"{way_name}",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},left:{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},right:{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"slight left":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "},"slight right":{default:"",name:"{way_name} ",destination:"{destination} ",exit:"{exit} ",exit_destination:"{destination} {exit} "}},"on ramp":{default:{default:"",name:"{way_name}",destination:"{destination} "},left:{default:"",name:"{way_name} ",destination:"{destination} "},right:{default:"",name:"{way_name} ",destination:"{destination} "},"sharp left":{default:"",name:"{way_name} ",destination:"{destination} "},"sharp right":{default:"",name:"{way_name} ",destination:"{destination} "},"slight left":{default:"",name:"{way_name} ",destination:"{destination} "},"slight right":{default:"",name:"{way_name} ",destination:"{destination} "}},rotary:{default:{default:{default:"",name:"{way_name}",destination:"{destination}"},name:{default:"{rotary_name}",name:"{rotary_name}{way_name}",destination:"{rotary_name}{destination}"},exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},name_exit:{default:"{rotary_name} {exit_number}",name:"{rotary_name}{exit_number}{way_name}",destination:"{rotary_name}{exit_number}{destination}"}}},roundabout:{default:{exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},default:{default:"",name:"{way_name}",destination:"{destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination} "},left:{default:"",name:"{way_name}",destination:"{destination} "},right:{default:"",name:"{way_name}",destination:"{destination} "},straight:{default:" ",name:"{way_name}",destination:"{destination}"}},"exit roundabout":{default:{default:"",name:"{way_name}",destination:"{destination}"}},"exit rotary":{default:{default:"",name:"{way_name}",destination:"{destination}"}},turn:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination} "},left:{default:"",name:"{way_name}",destination:"{destination} "},right:{default:"",name:"{way_name}",destination:"{destination} "},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"use lane":{no_lanes:{default:" "},default:{default:"{lane_instruction}"}}}}},{}],36:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1e",2:"2e",3:"3e",4:"4e",5:"5e",6:"6e",7:"7e",8:"8e",9:"9e",10:"10e"},direction:{north:"noord",northeast:"noordoost",east:"oost",southeast:"zuidoost",south:"zuid",southwest:"zuidwest",west:"west",northwest:"noordwest"},modifier:{left:"links",right:"rechts","sharp left":"scherpe bocht naar links","sharp right":"scherpe bocht naar rechts","slight left":"iets naar links","slight right":"iets naar rechts",straight:"rechtdoor",uturn:"omkeren"},lanes:{xo:"Rechts aanhouden",ox:"Links aanhouden",xox:"In het midden blijven",oxo:"Links of rechts blijven"}},modes:{ferry:{default:"Neem de veerpont",name:"Neem de veerpont {way_name}",destination:"Neem de veerpont richting {destination}"}},phrase:{"two linked by distance":"{instruction_one}, dan na {distance}, {instruction_two}","two linked":"{instruction_one}, daarna {instruction_two}","one in distance":"Over {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"afslag {exit}"},arrive:{default:{default:"Je bent gearriveerd op de {nth} bestemming.",upcoming:"U arriveert op de {nth} bestemming",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}"},left:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de linkerkant"},right:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de  rechterkant"},"sharp left":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is aan de linkerkant"},"sharp right":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de rechterkant"},"slight right":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich rechts.",upcoming:"Uw {nth} bestemming bevindt zich aan de rechterkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de rechterkant"},"slight left":{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich links.",upcoming:"Uw {nth} bestemming bevindt zich aan de linkerkant",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name},  de bestemming is aan de linkerkant"},straight:{default:"Je bent gearriveerd. De {nth} bestemming bevindt zich voor je.",upcoming:"Uw {nth} bestemming is recht voor u",short:"U bent gearriveerd","short-upcoming":"U zult aankomen",named:"U bent gearriveerd bij {waypoint_name}, de bestemming is recht voor u"}},continue:{default:{default:"Ga {modifier}",name:"Sla {modifier} om op {way_name} te blijven",destination:"Ga {modifier} richting {destination}",exit:"Ga {modifier} naar {way_name}"},straight:{default:"Ga rechtdoor",name:"Blijf rechtdoor gaan op {way_name}",destination:"Ga rechtdoor richting {destination}",distance:"Ga rechtdoor voor {distance}",namedistance:"Ga verder op {way_name} voor {distance}"},"sharp left":{default:"Linksaf",name:"Sla scherp links af om op {way_name} te blijven",destination:"Linksaf richting {destination}"},"sharp right":{default:"Rechtsaf",name:"Sla scherp rechts af om op {way_name} te blijven",destination:"Rechtsaf richting {destination}"},"slight left":{default:"Ga links",name:"Links afbuigen om op {way_name} te blijven",destination:"Rechts afbuigen om op {destination} te blijven"},"slight right":{default:"Rechts afbuigen",name:"Rechts afbuigen om op {way_name} te blijven",destination:"Rechts afbuigen richting {destination}"},uturn:{default:"Keer om",name:"Draai om en ga verder op {way_name}",destination:"Keer om richting {destination}"}},depart:{default:{default:"Vertrek in {direction}elijke richting",name:"Neem {way_name} in {direction}elijke richting",namedistance:"Ga richting {direction} op {way_name} voor {distance}"}},"end of road":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga naar {way_name}",destination:"Ga richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},fork:{default:{default:"Ga {modifier} op de splitsing",name:"Houd {modifier} aan, tot {way_name}",destination:"Houd {modifier}, in de richting van {destination}"},"slight left":{default:"Links aanhouden op de splitsing",name:"Houd links aan, tot {way_name}",destination:"Houd links aan, richting {destination}"},"slight right":{default:"Rechts aanhouden op de splitsing",name:"Houd rechts aan, tot {way_name}",destination:"Houd rechts aan, richting {destination}"},"sharp left":{default:"Neem bij de splitsing, een scherpe bocht, naar links ",name:"Neem een scherpe bocht naar links, tot aan {way_name}",destination:"Neem een scherpe bocht naar links, richting {destination}"},"sharp right":{default:"Neem  op de splitsing, een scherpe bocht, naar rechts",name:"Neem een scherpe bocht naar rechts, tot aan {way_name}",destination:"Neem een scherpe bocht naar rechts, richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},merge:{default:{default:"Bij de splitsing {modifier}",name:"Bij de splitsing {modifier} naar {way_name}",destination:"Bij de splitsing {modifier} richting {destination}"},straight:{default:"Samenvoegen",name:"Ga verder op {way_name}",destination:"Ga verder richting {destination}"},"slight left":{default:"Bij de splitsing links aanhouden",name:"Bij de splitsing links aanhouden naar {way_name}",destination:"Bij de splitsing links aanhouden richting {destination}"},"slight right":{default:"Bij de splitsing rechts aanhouden",name:"Bij de splitsing rechts aanhouden naar {way_name}",destination:"Bij de splitsing rechts aanhouden richting {destination}"},"sharp left":{default:"Bij de splitsing linksaf",name:"Bij de splitsing linksaf naar {way_name}",destination:"Bij de splitsing linksaf richting {destination}"},"sharp right":{default:"Bij de splitsing rechtsaf",name:"Bij de splitsing rechtsaf naar {way_name}",destination:"Bij de splitsing rechtsaf richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},"new name":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga rechtdoor naar {way_name}",destination:"Ga rechtdoor richting {destination}"},"sharp left":{default:"Neem een scherpe bocht, naar links",name:"Linksaf naar {way_name}",destination:"Linksaf richting {destination}"},"sharp right":{default:"Neem een scherpe bocht, naar rechts",name:"Rechtsaf naar {way_name}",destination:"Rechtsaf richting {destination}"},"slight left":{default:"Links aanhouden",name:"Links aanhouden naar {way_name}",destination:"Links aanhouden richting {destination}"},"slight right":{default:"Rechts aanhouden",name:"Rechts aanhouden naar {way_name}",destination:"Rechts aanhouden richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},notification:{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},uturn:{default:"Keer om",name:"Keer om naar {way_name}",destination:"Keer om richting {destination}"}},"off ramp":{default:{default:"Neem de afrit",name:"Neem de afrit naar {way_name}",destination:"Neem de afrit richting {destination}",exit:"Neem afslag {exit}",exit_destination:"Neem afslag {exit} richting {destination}"},left:{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},right:{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"},"sharp left":{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},"sharp right":{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"},"slight left":{default:"Neem de afrit links",name:"Neem de afrit links naar {way_name}",destination:"Neem de afrit links richting {destination}",exit:"Neem afslag {exit} aan de linkerkant",exit_destination:"Neem afslag {exit} aan de linkerkant richting {destination}"},"slight right":{default:"Neem de afrit rechts",name:"Neem de afrit rechts naar {way_name}",destination:"Neem de afrit rechts richting {destination}",exit:"Neem afslag {exit} aan de rechterkant",exit_destination:"Neem afslag {exit} aan de rechterkant richting {destination}"}},"on ramp":{default:{default:"Neem de oprit",name:"Neem de oprit naar {way_name}",destination:"Neem de oprit richting {destination}"},left:{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},right:{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"},"sharp left":{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},"sharp right":{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"},"slight left":{default:"Neem de oprit links",name:"Neem de oprit links naar {way_name}",destination:"Neem de oprit links richting {destination}"},"slight right":{default:"Neem de oprit rechts",name:"Neem de oprit rechts naar {way_name}",destination:"Neem de oprit rechts richting {destination}"}},rotary:{default:{default:{default:"Betreedt de rotonde",name:"Betreedt rotonde en sla af op {way_name}",destination:"Betreedt rotonde en sla af richting {destination}"},name:{default:"Ga het knooppunt {rotary_name} op",name:"Verlaat het knooppunt {rotary_name} naar {way_name}",destination:"Verlaat het knooppunt {rotary_name} richting {destination}"},exit:{default:"Betreedt rotonde en neem afslag {exit_number}",name:"Betreedt rotonde en neem afslag {exit_number} naar {way_name}",destination:"Betreedt rotonde en neem afslag {exit_number} richting {destination}"},name_exit:{default:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number}",name:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number} naar {way_name}",destination:"Ga het knooppunt {rotary_name} op en neem afslag {exit_number} richting {destination}"}}},roundabout:{default:{exit:{default:"Betreedt rotonde en neem afslag {exit_number}",name:"Betreedt rotonde en neem afslag {exit_number} naar {way_name}",destination:"Betreedt rotonde en neem afslag {exit_number} richting {destination}"},default:{default:"Betreedt de rotonde",name:"Betreedt rotonde en sla af op {way_name}",destination:"Betreedt rotonde en sla af richting {destination}"}}},"roundabout turn":{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},left:{default:"Ga linksaf",name:"Ga linksaf naar {way_name}",destination:"Ga linksaf richting {destination}"},right:{default:"Ga rechtsaf",name:"Ga rechtsaf naar {way_name}",destination:"Ga rechtsaf richting {destination}"},straight:{default:"Ga in de aangegeven richting",name:"Ga naar {way_name}",destination:"Ga richting {destination}"}},"exit roundabout":{default:{default:"Verlaat de rotonde",name:"Verlaat de rotonde en ga verder op {way_name}",destination:"Verlaat de rotonde richting {destination}"}},"exit rotary":{default:{default:"Verlaat de rotonde",name:"Verlaat de rotonde en ga verder op {way_name}",destination:"Verlaat de rotonde richting {destination}"}},turn:{default:{default:"Ga {modifier}",name:"Ga {modifier} naar {way_name}",destination:"Ga {modifier} richting {destination}"},left:{default:"Ga linksaf",name:"Ga linksaf naar {way_name}",destination:"Ga linksaf richting {destination}"},right:{default:"Ga rechtsaf",name:"Ga rechtsaf naar {way_name}",destination:"Ga rechtsaf richting {destination}"},straight:{default:"Ga rechtdoor",name:"Ga rechtdoor naar {way_name}",destination:"Ga rechtdoor richting {destination}"}},"use lane":{no_lanes:{default:"Rechtdoor"},default:{default:"{lane_instruction}"}}}}},{}],37:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"nord",northeast:"nordst",east:"st",southeast:"srst",south:"sr",southwest:"srvest",west:"vest",northwest:"nordvest"},modifier:{left:"venstre",right:"hyre","sharp left":"skarp venstre","sharp right":"skarp hyre","slight left":"litt til venstre","slight right":"litt til hyre",straight:"rett frem",uturn:"U-sving"},lanes:{xo:"Hold til hyre",ox:"Hold til venstre",xox:"Hold deg i midten",oxo:"Hold til venstre eller hyre"}},modes:{ferry:{default:"Ta ferja",name:"Ta ferja {way_name}",destination:"Ta ferja til {destination}"}},phrase:{"two linked by distance":"{instruction_one}, deretter {instruction_two} om {distance}","two linked":"{instruction_one}, deretter {instruction_two}","one in distance":"Om {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"avkjrsel {exit}"},arrive:{default:{default:"Du har ankommet din {nth} destinasjon",upcoming:"Du vil ankomme din {nth} destinasjon",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}"},left:{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},right:{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"sharp left":{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},"sharp right":{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"slight right":{default:"Du har ankommet din {nth} destinasjon, p din hyre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din hyre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din hyre side"},"slight left":{default:"Du har ankommet din {nth} destinasjon, p din venstre side",upcoming:"Du vil ankomme din {nth} destinasjon, p din venstre side",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, p din venstre side"},straight:{default:"Du har ankommet din {nth} destinasjon, rett forut",upcoming:"Du vil ankomme din {nth} destinasjon, rett forut",short:"Du har ankommet","short-upcoming":"Du vil ankomme",named:"Du har ankommet {waypoint_name}, rett forut"}},continue:{default:{default:"Ta til {modifier}",name:"Ta til {modifier} for  bli vrende p {way_name}",destination:"Ta til {modifier} mot {destination}",exit:"Ta til {modifier} inn p {way_name}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem for  bli vrende p {way_name}",destination:"Fortsett mot {destination}",distance:"Fortsett rett frem, {distance} ",namedistance:"Fortsett p {way_name}, {distance}"},"sharp left":{default:"Sving skarpt til venstre",name:"Sving skarpt til venstre for  bli vrende p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre",name:"Sving skarpt til hyre for  bli vrende p {way_name}",destination:"Sving skarpt mot {destination}"},"slight left":{default:"Sving svakt til venstre",name:"Sving svakt til venstre for  bli vrende p {way_name}",destination:"Sving svakt til venstre mot {destination}"},"slight right":{default:"Sving svakt til hyre",name:"Sving svakt til hyre for  bli vrende p {way_name}",destination:"Sving svakt til hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving og fortsett p {way_name}",destination:"Ta en U-sving mot {destination}"}},depart:{default:{default:"Kjr i retning {direction}",name:"Kjr i retning {direction} p {way_name}",namedistance:"Kjr i retning {direction} p {way_name}, {distance}"}},"end of road":{default:{default:"Sving {modifier}",name:"Ta til {modifier} inn p {way_name}",destination:"Sving {modifier} mot {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem til  {way_name}",destination:"Fortsett rett frem mot {destination}"},uturn:{default:"Ta en U-sving i enden av veien",name:"Ta en U-sving til {way_name} i enden av veien",destination:"Ta en U-sving mot {destination} i enden av veien"}},fork:{default:{default:"Hold til {modifier} i veikrysset",name:"Hold til {modifier} inn p {way_name}",destination:"Hold til {modifier} mot {destination}"},"slight left":{default:"Hold til venstre i veikrysset",name:"Hold til venstre inn p {way_name}",destination:"Hold til venstre mot {destination}"},"slight right":{default:"Hold til hyre i veikrysset",name:"Hold til hyre inn p {way_name}",destination:"Hold til hyre mot {destination}"},"sharp left":{default:"Sving skarpt til venstre i veikrysset",name:"Sving skarpt til venstre inn p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre i veikrysset",name:"Sving skarpt til hyre inn p {way_name}",destination:"Svings skarpt til hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},merge:{default:{default:"Hold {modifier} kjrefelt",name:"Hold {modifier} kjrefelt inn p {way_name}",destination:"Hold {modifier} kjrefelt mot {destination}"},straight:{default:"Hold kjrefelt",name:"Hold kjrefelt inn p {way_name}",destination:"Hold kjrefelt mot {destination}"},"slight left":{default:"Hold venstre kjrefelt",name:"Hold venstre kjrefelt inn p {way_name}",destination:"Hold venstre kjrefelt mot {destination}"},"slight right":{default:"Hold hyre kjrefelt",name:"Hold hyre kjrefelt inn p {way_name}",destination:"Hold hyre kjrefelt mot {destination}"},"sharp left":{default:"Hold venstre kjrefelt",name:"Hold venstre kjrefelt inn p {way_name}",destination:"Hold venstre kjrefelt mot {destination}"},"sharp right":{default:"Hold hyre kjrefelt",name:"Hold hyre kjrefelt inn p {way_name}",destination:"Hold hyre kjrefelt mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},"new name":{default:{default:"Fortsett {modifier}",name:"Fortsett {modifier} til {way_name}",destination:"Fortsett {modifier} mot  {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett inn p {way_name}",destination:"Fortsett mot {destination}"},"sharp left":{default:"Sving skarpt til venstre",name:"Sving skarpt til venstre inn p {way_name}",destination:"Sving skarpt til venstre mot {destination}"},"sharp right":{default:"Sving skarpt til hyre",name:"Sving skarpt til hyre inn p {way_name}",destination:"Svings skarpt til hyre mot {destination}"},"slight left":{default:"Fortsett litt mot venstre",name:"Fortsett litt mot venstre til {way_name}",destination:"Fortsett litt mot venstre mot {destination}"},"slight right":{default:"Fortsett litt mot hyre",name:"Fortsett litt mot hyre til {way_name}",destination:"Fortsett litt mot hyre mot {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},notification:{default:{default:"Fortsett {modifier}",name:"Fortsett {modifier} til {way_name}",destination:"Fortsett {modifier} mot  {destination}"},uturn:{default:"Ta en U-sving",name:"Ta en U-sving til {way_name}",destination:"Ta en U-sving mot {destination}"}},"off ramp":{default:{default:"Ta avkjrselen",name:"Ta avkjrselen inn p {way_name}",destination:"Ta avkjrselen mot {destination}",exit:"Ta avkjrsel {exit}",exit_destination:"Ta avkjrsel {exit} mot {destination}"},left:{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},right:{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"},"sharp left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},"sharp right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"},"slight left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}",exit:"Ta avkjrsel {exit} p venstre side",exit_destination:"Ta avkjrsel {exit} p venstre side mot {destination}"},"slight right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}",exit:"Ta avkjrsel {exit} p hyre side",exit_destination:"Ta avkjrsel {exit} p hyre side mot {destination}"}},"on ramp":{default:{default:"Ta avkjrselen",name:"Ta avkjrselen inn p {way_name}",destination:"Ta avkjrselen mot {destination}"},left:{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},right:{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"},"sharp left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},"sharp right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"},"slight left":{default:"Ta avkjrselen p venstre side",name:"Ta avkjrselen p venstre side inn p {way_name}",destination:"Ta avkjrselen p venstre side mot {destination}"},"slight right":{default:"Ta avkjrselen p hyre side",name:"Ta avkjrselen p hyre side inn p {way_name}",destination:"Ta avkjrselen p hyre side mot {destination}"}},rotary:{default:{default:{default:"Kjr inn i rundkjringen",name:"Kjr inn i rundkjringen og deretter ut p {way_name}",destination:"Kjr inn i rundkjringen og deretter ut mot {destination}"},name:{default:"Kjr inn i {rotary_name}",name:"Kjr inn i {rotary_name} og deretter ut p {way_name}",destination:"Kjr inn i {rotary_name} og deretter ut mot {destination}"},exit:{default:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel",name:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut p {way_name}",destination:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut mot {destination} "},name_exit:{default:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel",name:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel inn p {way_name}",destination:"Kjr inn i {rotary_name} og ta {exit_number} avkjrsel mot {destination}"}}},roundabout:{default:{exit:{default:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel",name:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel inn p {way_name}",destination:"Kjr inn i rundkjringen og ta {exit_number} avkjrsel ut mot {destination} "},default:{default:"Kjr inn i rundkjringen",name:"Kjr inn i rundkjringen og deretter ut p {way_name}",destination:"Kjr inn i rundkjringen og deretter ut mot {destination}"}}},"roundabout turn":{default:{default:"Ta en {modifier}",name:"Ta en {modifier} inn p {way_name}",destination:"Ta en {modifier} mot {destination}"},left:{default:"Sving til venstre",name:"Sving til venstre inn p {way_name}",destination:"Sving til venstre mot {destination}"},right:{default:"Sving til hyre",name:"Sving til hyre inn p {way_name}",destination:"Sving til hyre mot {destination}"},straight:{default:"Fortsett rett frem",name:"Fortsett rett frem til  {way_name}",destination:"Fortsett rett frem mot {destination}"}},"exit roundabout":{default:{default:"Kjr ut av rundkjringen",name:"Kjr ut av rundkjringen og inn p {way_name}",destination:"Kjr ut av rundkjringen mot {destination}"}},"exit rotary":{default:{default:"Kjr ut av rundkjringen",name:"Kjr ut av rundkjringen og inn p {way_name}",destination:"Kjr ut av rundkjringen mot {destination}"}},turn:{default:{default:"Ta en {modifier}",name:"Ta en {modifier} inn p {way_name}",destination:"Ta en {modifier} mot {destination}"},left:{default:"Sving til venstre",name:"Sving til venstre inn p {way_name}",destination:"Sving til venstre mot {destination}"},right:{default:"Sving til hyre",name:"Sving til hyre inn p {way_name}",destination:"Sving til hyre mot {destination}"},straight:{default:"Kjr rett frem",name:"Kjr rett frem og inn p {way_name}",destination:"Kjr rett frem mot {destination}"}},"use lane":{no_lanes:{default:"Fortsett rett frem"},default:{default:"{lane_instruction}"}}}}},{}],38:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1.",2:"2.",3:"3.",4:"4.",5:"5.",6:"6.",7:"7.",8:"8.",9:"9.",10:"10."},direction:{north:"pnoc",northeast:"pnocny wschd",east:"wschd",southeast:"poudniowy wschd",south:"poudnie",southwest:"poudniowy zachd",west:"zachd",northwest:"pnocny zachd"},modifier:{left:"lewo",right:"prawo","sharp left":"ostro w lewo","sharp right":"ostro w prawo","slight left":"agodnie w lewo","slight right":"agodnie w prawo",straight:"prosto",uturn:"zawr"},lanes:{xo:"Trzymaj si prawej strony",ox:"Trzymaj si lewej strony",xox:"Trzymaj si rodka",oxo:"Trzymaj si lewej lub prawej strony"}},modes:{ferry:{default:"We prom",name:"We prom {way_name}",destination:"We prom w kierunku {destination}"}},phrase:{"two linked by distance":"{instruction_one}, nastpnie za {distance} {instruction_two}","two linked":"{instruction_one}, nastpnie {instruction_two}","one in distance":"Za {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Dojechano do miejsca docelowego {nth}",upcoming:"Dojechano do miejsca docelowego {nth}",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}"},left:{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},right:{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"sharp left":{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},"sharp right":{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"slight right":{default:"Dojechano do miejsca docelowego {nth}, po prawej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po prawej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po prawej stronie"},"slight left":{default:"Dojechano do miejsca docelowego {nth}, po lewej stronie",upcoming:"Dojechano do miejsca docelowego {nth}, po lewej stronie",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, po lewej stronie"},straight:{default:"Dojechano do miejsca docelowego {nth} , prosto",upcoming:"Dojechano do miejsca docelowego {nth} , prosto",short:"Dojechano do miejsca docelowego {nth}","short-upcoming":"Dojechano do miejsca docelowego {nth}",named:"Dojechano do {waypoint_name}, prosto"}},continue:{default:{default:"Skr {modifier}",name:"Skr w {modifier}, aby pozosta na {way_name}",destination:"Skr {modifier} w kierunku {destination}",exit:"Skr {modifier} na {way_name}"},straight:{default:"Kontynuuj prosto",name:"Jed dalej prosto, aby pozosta na {way_name}",destination:"Kontynuuj w kierunku {destination}",distance:"Jed dalej prosto przez {distance}",namedistance:"Jed dalej {way_name} przez {distance}"},"sharp left":{default:"Skr ostro w lewo",name:"Skr w lewo w ostry zakrt, aby pozosta na {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Skr ostro w prawo",name:"Skr w prawo w ostry zakrt, aby pozosta na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},"slight left":{default:"Skr w lewo w agodny zakrt",name:"Skr w lewo w agodny zakrt, aby pozosta na {way_name}",destination:"Skr w lewo w agodny zakrt na {destination}"},"slight right":{default:"Skr w prawo w agodny zakrt",name:"Skr w prawo w agodny zakrt, aby pozosta na {way_name}",destination:"Skr w prawo w agodny zakrt na {destination}"},uturn:{default:"Zawr",name:"Zawr i jed dalej {way_name}",destination:"Zawr w kierunku {destination}"}},depart:{default:{default:"Kieruj si {direction}",name:"Kieruj si {direction} na {way_name}",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"Skr {modifier}",name:"Skr {modifier} na {way_name}",destination:"Skr {modifier} w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"},uturn:{default:"Zawr na kocu ulicy",name:"Zawr na kocu ulicy na {way_name}",destination:"Zawr na kocu ulicy w kierunku {destination}"}},fork:{default:{default:"Na rozwidleniu trzymaj si {modifier}",name:"Na rozwidleniu trzymaj si {modifier} na {way_name}",destination:"Na rozwidleniu trzymaj si {modifier} w kierunku {destination}"},"slight left":{default:"Na rozwidleniu trzymaj si lewej strony",name:"Na rozwidleniu trzymaj si lewej strony w {way_name}",destination:"Na rozwidleniu trzymaj si lewej strony w kierunku {destination}"},"slight right":{default:"Na rozwidleniu trzymaj si prawej strony",name:"Na rozwidleniu trzymaj si prawej strony na {way_name}",destination:"Na rozwidleniu trzymaj si prawej strony w kierunku {destination}"},"sharp left":{default:"Na rozwidleniu skr ostro w lewo",name:"Skr ostro w lewo w {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Na rozwidleniu skr ostro w prawo",name:"Skr ostro w prawo na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},merge:{default:{default:"Wcz si {modifier}",name:"Wcz si {modifier} na {way_name}",destination:"Wcz si {modifier} w kierunku {destination}"},straight:{default:"Wcz si prosto",name:"Wcz si prosto na {way_name}",destination:"Wcz si prosto w kierunku {destination}"},"slight left":{default:"Wcz si z lewej strony",name:"Wcz si z lewej strony na {way_name}",destination:"Wcz si z lewej strony w kierunku {destination}"},"slight right":{default:"Wcz si z prawej strony",name:"Wcz si z prawej strony na {way_name}",destination:"Wcz si z prawej strony w kierunku {destination}"},"sharp left":{default:"Wcz si z lewej strony",name:"Wcz si z lewej strony na {way_name}",destination:"Wcz si z lewej strony w kierunku {destination}"},"sharp right":{default:"Wcz si z prawej strony",name:"Wcz si z prawej strony na {way_name}",destination:"Wcz si z prawej strony w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},"new name":{default:{default:"Kontynuuj {modifier}",name:"Kontynuuj {modifier} na {way_name}",destination:"Kontynuuj {modifier} w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj na {way_name}",destination:"Kontynuuj w kierunku {destination}"},"sharp left":{default:"Skr ostro w lewo",name:"Skr ostro w lewo w {way_name}",destination:"Skr ostro w lewo w kierunku {destination}"},"sharp right":{default:"Skr ostro w prawo",name:"Skr ostro w prawo na {way_name}",destination:"Skr ostro w prawo w kierunku {destination}"},"slight left":{default:"Kontynuuj agodnie w lewo",name:"Kontynuuj agodnie w lewo na {way_name}",destination:"Kontynuuj agodnie w lewo w kierunku {destination}"},"slight right":{default:"Kontynuuj agodnie w prawo",name:"Kontynuuj agodnie w prawo na {way_name}",destination:"Kontynuuj agodnie w prawo w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},notification:{default:{default:"Kontynuuj {modifier}",name:"Kontynuuj {modifier} na {way_name}",destination:"Kontynuuj {modifier} w kierunku {destination}"},uturn:{default:"Zawr",name:"Zawr na {way_name}",destination:"Zawr w kierunku {destination}"}},"off ramp":{default:{default:"Zjed",name:"We zjazd na {way_name}",destination:"We zjazd w kierunku {destination}",exit:"Zjed zjazdem {exit}",exit_destination:"Zjed zjazdem {exit} na {destination}"},left:{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},right:{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"},"sharp left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},"sharp right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"},"slight left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}",exit:"Zjed zjazdem {exit} po lewej stronie",exit_destination:"Zjed zjazdem {exit} po lewej stronie na {destination}"},"slight right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}",exit:"Zjed zjazdem {exit} po prawej stronie",exit_destination:"Zjed zjazdem {exit} po prawej stronie na {destination}"}},"on ramp":{default:{default:"We zjazd",name:"We zjazd na {way_name}",destination:"We zjazd w kierunku {destination}"},left:{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},right:{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"},"sharp left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},"sharp right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"},"slight left":{default:"We zjazd po lewej",name:"We zjazd po lewej na {way_name}",destination:"We zjazd po lewej w kierunku {destination}"},"slight right":{default:"We zjazd po prawej",name:"We zjazd po prawej na {way_name}",destination:"We zjazd po prawej w kierunku {destination}"}},rotary:{default:{default:{default:"Wjed na rondo",name:"Wjed na rondo i skr na {way_name}",destination:"Wjed na rondo i skr w kierunku {destination}"},name:{default:"Wjed na {rotary_name}",name:"Wjed na {rotary_name} i skr na {way_name}",destination:"Wjed na {rotary_name} i skr w kierunku {destination}"},exit:{default:"Wjed na rondo i wyjed {exit_number} zjazdem",name:"Wjed na rondo i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na rondo i wyjed {exit_number} zjazdem w kierunku {destination}"},name_exit:{default:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem",name:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na {rotary_name} i wyjed {exit_number} zjazdem w kierunku {destination}"}}},roundabout:{default:{exit:{default:"Wjed na rondo i wyjed {exit_number} zjazdem",name:"Wjed na rondo i wyjed {exit_number} zjazdem na {way_name}",destination:"Wjed na rondo i wyjed {exit_number} zjazdem w kierunku {destination}"},default:{default:"Wjed na rondo",name:"Wjed na rondo i wyjed na {way_name}",destination:"Wjed na rondo i wyjed w kierunku {destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"}},"exit roundabout":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Kontynuuj prosto",name:"Kontynuuj prosto na {way_name}",destination:"Kontynuuj prosto w kierunku {destination}"}},"exit rotary":{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Jed prosto",name:"Jed prosto na {way_name}",destination:"Jed prosto w kierunku {destination}"}},turn:{default:{default:"{modifier}",name:"{modifier} na {way_name}",destination:"{modifier} w kierunku {destination}"},left:{default:"Skr w lewo",name:"Skr w lewo na {way_name}",destination:"Skr w lewo w kierunku {destination}"},right:{default:"Skr w prawo",name:"Skr w prawo na {way_name}",destination:"Skr w prawo w kierunku {destination}"},straight:{default:"Jed prosto",name:"Jed prosto na {way_name}",destination:"Jed prosto w kierunku {destination}"}},"use lane":{no_lanes:{default:"Kontynuuj prosto"},default:{default:"{lane_instruction}"}}}}},{}],39:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"nordeste",east:"leste",southeast:"sudeste",south:"sul",southwest:"sudoeste",west:"oeste",northwest:"noroeste"},modifier:{left:" esquerda",right:" direita","sharp left":"fechada  esquerda","sharp right":"fechada  direita","slight left":"suave  esquerda","slight right":"suave  direita",straight:"em frente",uturn:"retorno"},lanes:{xo:"Mantenha-se  direita",ox:"Mantenha-se  esquerda",xox:"Mantenha-se ao centro",oxo:"Mantenha-se  esquerda ou direita"}},modes:{ferry:{default:"Pegue a balsa",name:"Pegue a balsa {way_name}",destination:"Pegue a balsa sentido {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ento, em {distance}, {instruction_two}","two linked":"{instruction_one}, ento {instruction_two}","one in distance":"Em {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sada {exit}"},arrive:{default:{default:"Voc chegou ao seu {nth} destino",upcoming:"Voc chegar ao seu {nth} destino",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou a {waypoint_name}"},left:{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},right:{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"sharp left":{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},"sharp right":{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"slight right":{default:"Voc chegou ao seu {nth} destino,  direita",upcoming:"Voc chegar ao seu {nth} destino,  direita",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  direita"},"slight left":{default:"Voc chegou ao seu {nth} destino,  esquerda",upcoming:"Voc chegar ao seu {nth} destino,  esquerda",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"Voc chegou {waypoint_name},  esquerda"},straight:{default:"Voc chegou ao seu {nth} destino, em frente",upcoming:"Voc vai chegar ao seu {nth} destino, em frente",short:"Voc chegou","short-upcoming":"Voc vai chegar",named:"You have arrived at {waypoint_name}, straight ahead"}},continue:{default:{default:"Vire {modifier}",name:"Vire {modifier} para manter-se na {way_name}",destination:"Vire {modifier} sentido {destination}",exit:"Vire {modifier} em {way_name}"},straight:{default:"Continue em frente",name:"Continue em frente para manter-se na {way_name}",destination:"Continue em direo  {destination}",distance:"Continue em frente por {distance}",namedistance:"Continue na {way_name} por {distance}"},"sharp left":{default:"Faa uma curva fechada a esquerda",name:"Faa uma curva fechada a esquerda para manter-se na {way_name}",destination:"Faa uma curva fechada a esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada a direita",name:"Faa uma curva fechada a direita para manter-se na {way_name}",destination:"Faa uma curva fechada a direita sentido {destination}"},"slight left":{default:"Faa uma curva suave a esquerda",name:"Faa uma curva suave a esquerda para manter-se na {way_name}",destination:"Faa uma curva suave a esquerda em direo a {destination}"},"slight right":{default:"Faa uma curva suave a direita",name:"Faa uma curva suave a direita para manter-se na {way_name}",destination:"Faa uma curva suave a direita em direo a {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno e continue em {way_name}",destination:"Faa o retorno sentido {destination}"}},depart:{default:{default:"Siga {direction}",name:"Siga {direction} em {way_name}",namedistance:"Siga {direction} na {way_name} por {distance}"}},"end of road":{default:{default:"Vire {modifier}",name:"Vire {modifier} em {way_name}",destination:"Vire {modifier} sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em frente em {way_name}",destination:"Continue em frente sentido {destination}"},uturn:{default:"Faa o retorno no fim da rua",name:"Faa o retorno em {way_name} no fim da rua",destination:"Faa o retorno sentido {destination} no fim da rua"}},fork:{default:{default:"Mantenha-se {modifier} na bifurcao",name:"Mantenha-se {modifier} na bifurcao em {way_name}",destination:"Mantenha-se {modifier} na bifurcao sentido {destination}"},"slight left":{default:"Mantenha-se  esquerda na bifurcao",name:"Mantenha-se  esquerda na bifurcao em {way_name}",destination:"Mantenha-se  esquerda na bifurcao sentido {destination}"},"slight right":{default:"Mantenha-se  direita na bifurcao",name:"Mantenha-se  direita na bifurcao em {way_name}",destination:"Mantenha-se  direita na bifurcao sentido {destination}"},"sharp left":{default:"Faa uma curva fechada  esquerda na bifurcao",name:"Faa uma curva fechada  esquerda em {way_name}",destination:"Faa uma curva fechada  esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada  direita na bifurcao",name:"Faa uma curva fechada  direita em {way_name}",destination:"Faa uma curva fechada  direita sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},merge:{default:{default:"Entre {modifier}",name:"Entre {modifier} na {way_name}",destination:"Entre {modifier} em direo  {destination}"},straight:{default:"Mesclar",name:"Entre reto na {way_name}",destination:"Entre reto em direo  {destination}"},"slight left":{default:"Entre  esquerda",name:"Entre  esquerda na {way_name}",destination:"Entre  esquerda em direo  {destination}"},"slight right":{default:"Entre  direita",name:"Entre  direita na {way_name}",destination:"Entre  direita em direo  {destination}"},"sharp left":{default:"Entre  esquerda",name:"Entre  esquerda na {way_name}",destination:"Entre  esquerda em direo  {destination}"},"sharp right":{default:"Entre  direita",name:"Entre  direita na {way_name}",destination:"Entre  direita em direo  {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} em {way_name}",destination:"Continue {modifier} sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em {way_name}",destination:"Continue em direo  {destination}"},"sharp left":{default:"Faa uma curva fechada  esquerda",name:"Faa uma curva fechada  esquerda em {way_name}",destination:"Faa uma curva fechada  esquerda sentido {destination}"},"sharp right":{default:"Faa uma curva fechada  direita",name:"Faa uma curva fechada  direita em {way_name}",destination:"Faa uma curva fechada  direita sentido {destination}"},"slight left":{default:"Continue ligeiramente  esquerda",name:"Continue ligeiramente  esquerda em {way_name}",destination:"Continue ligeiramente  esquerda sentido {destination}"},"slight right":{default:"Continue ligeiramente  direita",name:"Continue ligeiramente  direita em {way_name}",destination:"Continue ligeiramente  direita sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} em {way_name}",destination:"Continue {modifier} sentido {destination}"},uturn:{default:"Faa o retorno",name:"Faa o retorno em {way_name}",destination:"Faa o retorno sentido {destination}"}},"off ramp":{default:{default:"Pegue a rampa",name:"Pegue a rampa em {way_name}",destination:"Pegue a rampa sentido {destination}",exit:"Pegue a sada {exit}",exit_destination:"Pegue a sada {exit} em direo  {destination}"},left:{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},right:{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"},"sharp left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},"sharp right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"},"slight left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}",exit:"Pegue a sada {exit}  esquerda",exit_destination:"Pegue a sada {exit}   esquerda em direo  {destination}"},"slight right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}",exit:"Pegue a sada {exit}  direita",exit_destination:"Pegue a sada {exit}  direita em direo  {destination}"}},"on ramp":{default:{default:"Pegue a rampa",name:"Pegue a rampa em {way_name}",destination:"Pegue a rampa sentido {destination}"},left:{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},right:{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentid {destination}"},"sharp left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},"sharp right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}"},"slight left":{default:"Pegue a rampa  esquerda",name:"Pegue a rampa  esquerda em {way_name}",destination:"Pegue a rampa  esquerda sentido {destination}"},"slight right":{default:"Pegue a rampa  direita",name:"Pegue a rampa  direita em {way_name}",destination:"Pegue a rampa  direita sentido {destination}"}},rotary:{default:{default:{default:"Entre na rotatria",name:"Entre na rotatria e saia na {way_name}",destination:"Entre na rotatria e saia sentido {destination}"},name:{default:"Entre em {rotary_name}",name:"Entre em {rotary_name} e saia em {way_name}",destination:"Entre em {rotary_name} e saia sentido {destination}"},exit:{default:"Entre na rotatria e pegue a {exit_number} sada",name:"Entre na rotatria e pegue a {exit_number} sada na {way_name}",destination:"Entre na rotatria e pegue a {exit_number} sada sentido {destination}"},name_exit:{default:"Entre em {rotary_name} e saia na {exit_number} sada",name:"Entre em {rotary_name} e saia na {exit_number} sada em {way_name}",destination:"Entre em {rotary_name} e saia na {exit_number} sada sentido {destination}"}}},roundabout:{default:{exit:{default:"Entre na rotatria e pegue a {exit_number} sada",name:"Entre na rotatria e pegue a {exit_number} sada na {way_name}",destination:"Entre na rotatria e pegue a {exit_number} sada sentido {destination}"},default:{default:"Entre na rotatria",name:"Entre na rotatria e saia na {way_name}",destination:"Entre na rotatria e saia sentido {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} em {way_name}",destination:"Siga {modifier} sentido {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda em {way_name}",destination:"Vire  esquerda sentido {destination}"},right:{default:"Vire  direita",name:"Vire  direita em {way_name}",destination:"Vire  direita sentido {destination}"},straight:{default:"Continue em frente",name:"Continue em frente em {way_name}",destination:"Continue em frente sentido {destination}"}},"exit roundabout":{default:{default:"Saia da rotatria",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},"exit rotary":{default:{default:"Saia da rotatria",name:"Exit the traffic circle onto {way_name}",destination:"Exit the traffic circle towards {destination}"}},turn:{default:{default:"Siga {modifier}",name:"Siga {modifier} em {way_name}",destination:"Siga {modifier} sentido {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda em {way_name}",destination:"Vire  esquerda sentido {destination}"},right:{default:"Vire  direita",name:"Vire  direita em {way_name}",destination:"Vire  direita sentido {destination}"},straight:{default:"Siga em frente",name:"Siga em frente em {way_name}",destination:"Siga em frente sentido {destination}"}},"use lane":{no_lanes:{default:"Continue em frente"},default:{default:"{lane_instruction}"}}}}},{}],40:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"norte",northeast:"nordeste",east:"este",southeast:"sudeste",south:"sul",southwest:"sudoeste",west:"oeste",northwest:"noroeste"},modifier:{left:" esquerda",right:" direita","sharp left":"acentuadamente  esquerda","sharp right":"acentuadamente  direita","slight left":"ligeiramente  esquerda","slight right":"ligeiramente  direita",straight:"em frente",uturn:"inverso de marcha"},lanes:{xo:"Mantenha-se  direita",ox:"Mantenha-se  esquerda",xox:"Mantenha-se ao meio",oxo:"Mantenha-se  esquerda ou  direita"}},modes:{ferry:{default:"Apanhe o ferry",name:"Apanhe o ferry {way_name}",destination:"Apanhe o ferry para {destination}"}},phrase:{"two linked by distance":"{instruction_one}, depois, a {distance}, {instruction_two}","two linked":"{instruction_one}, depois {instruction_two}","one in distance":"A {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"sada {exit}"},arrive:{default:{default:"Chegou ao seu {nth} destino",upcoming:"Est a chegar ao seu {nth} destino",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name}"},left:{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},right:{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"sharp left":{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},"sharp right":{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"slight right":{default:"Chegou ao seu {nth} destino,  direita",upcoming:"Est a chegar ao seu {nth} destino,  direita",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  direita"},"slight left":{default:"Chegou ao seu {nth} destino,  esquerda",upcoming:"Est a chegar ao seu {nth} destino,  esquerda",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name},  esquerda"},straight:{default:"Chegou ao seu {nth} destino, em frente",upcoming:"Est a chegar ao seu {nth} destino, em frente",short:"Chegou","short-upcoming":"Est a chegar",named:"Chegou a {waypoint_name}, em frente"}},continue:{default:{default:"Vire {modifier}",name:"Vire {modifier} para se manter em {way_name}",destination:"Vire {modifier} em direo a {destination}",exit:"Vire {modifier} para {way_name}"},straight:{default:"Continue em frente",name:"Continue em frente para se manter em {way_name}",destination:"Continue em direo a {destination}",distance:"Continue em frente por {distance}",namedistance:"Continue em {way_name} por {distance}"},"sharp left":{default:"Vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para se manter em {way_name}",destination:"Vire acentuadamente  esquerda em direo a {destination}"},"sharp right":{default:"Vire acentuadamente  direita",name:"Vire acentuadamente  direita para se manter em {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},"slight left":{default:"Vire ligeiramente  esquerda",name:"Vire ligeiramente  esquerda para se manter em {way_name}",destination:"Vire ligeiramente  esquerda em direo a {destination}"},"slight right":{default:"Vire ligeiramente  direita",name:"Vire ligeiramente  direita para se manter em {way_name}",destination:"Vire ligeiramente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha e continue em {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},depart:{default:{default:"Dirija-se para {direction}",name:"Dirija-se para {direction} em {way_name}",namedistance:"Dirija-se para {direction} em {way_name} por {distance}"}},"end of road":{default:{default:"Vire {modifier}",name:"Vire {modifier} para {way_name}",destination:"Vire {modifier} em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue em frente para {way_name}",destination:"Continue em frente em direo a {destination}"},uturn:{default:"No final da estrada faa uma inverso de marcha",name:"No final da estrada faa uma inverso de marcha para {way_name} ",destination:"No final da estrada faa uma inverso de marcha em direo a {destination}"}},fork:{default:{default:"Na bifurcao mantenha-se {modifier}",name:"Mantenha-se {modifier} para {way_name}",destination:"Mantenha-se {modifier} em direo a {destination}"},"slight left":{default:"Na bifurcao mantenha-se  esquerda",name:"Mantenha-se  esquerda para {way_name}",destination:"Mantenha-se  esquerda em direo a {destination}"},"slight right":{default:"Na bifurcao mantenha-se  direita",name:"Mantenha-se  direita para {way_name}",destination:"Mantenha-se  direita em direo a {destination}"},"sharp left":{default:"Na bifurcao vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para {way_name}",destination:"Vire acentuadamente  esquerda em direo a {destination}"},"sharp right":{default:"Na bifurcao vire acentuadamente  direita",name:"Vire acentuadamente  direita para {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},merge:{default:{default:"Una-se ao trfego {modifier}",name:"Una-se ao trfego {modifier} para {way_name}",destination:"Una-se ao trfego {modifier} em direo a {destination}"},straight:{default:"Una-se ao trfego",name:" Una-se ao trfego para {way_name}",destination:"Una-se ao trfego em direo a {destination}"},"slight left":{default:"Una-se ao trfego  esquerda",name:"Una-se ao trfego  esquerda para {way_name}",destination:"Una-se ao trfego  esquerda em direo a {destination}"},"slight right":{default:"Una-se ao trfego  direita",name:"Una-se ao trfego  direita para {way_name}",destination:"Una-se ao trfego  direita em direo a {destination}"},"sharp left":{default:"Una-se ao trfego  esquerda",name:"Una-se ao trfego  esquerda para {way_name}",destination:"Una-se ao trfego  esquerda em direo a {destination}"},"sharp right":{default:"Una-se ao trfego  direita",name:"Una-se ao trfego  direita para {way_name}",destination:"Una-se ao trfego  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},"new name":{default:{default:"Continue {modifier}",name:"Continue {modifier} para {way_name}",destination:"Continue {modifier} em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue para {way_name}",destination:"Continue em direo a {destination}"},"sharp left":{default:"Vire acentuadamente  esquerda",name:"Vire acentuadamente  esquerda para {way_name}",destination:"Vire acentuadamente  esquerda em direo a{destination}"},"sharp right":{default:"Vire acentuadamente  direita",name:"Vire acentuadamente  direita para {way_name}",destination:"Vire acentuadamente  direita em direo a {destination}"},"slight left":{default:"Continue ligeiramente  esquerda",name:"Continue ligeiramente  esquerda para {way_name}",destination:"Continue ligeiramente  esquerda em direo a {destination}"},"slight right":{default:"Continue ligeiramente  direita",name:"Continue ligeiramente  direita para {way_name}",destination:"Continue ligeiramente  direita em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},notification:{default:{default:"Continue {modifier}",name:"Continue {modifier} para {way_name}",destination:"Continue {modifier} em direo a {destination}"},uturn:{default:"Faa inverso de marcha",name:"Faa inverso de marcha para {way_name}",destination:"Faa inverso de marcha em direo a {destination}"}},"off ramp":{default:{default:"Saia na sada",name:"Saia na sada para {way_name}",destination:"Saia na sada em direo a {destination}",exit:"Saia na sada {exit}",exit_destination:"Saia na sada {exit} em direo a {destination}"},left:{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},right:{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"},"sharp left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},"sharp right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"},"slight left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}",exit:"Saia na sada {exit}  esquerda",exit_destination:"Saia na sada {exit}  esquerda em direo a {destination}"},"slight right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}",exit:"Saia na sada {exit}  direita",exit_destination:"Saia na sada {exit}  direita em direo a {destination}"}},"on ramp":{default:{default:"Saia na sada",name:"Saia na sada para {way_name}",destination:"Saia na sada em direo a {destination}"},left:{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},right:{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"},"sharp left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},"sharp right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"},"slight left":{default:"Saia na sada  esquerda",name:"Saia na sada  esquerda para {way_name}",destination:"Saia na sada  esquerda em direo a {destination}"},"slight right":{default:"Saia na sada  direita",name:"Saia na sada  direita para {way_name}",destination:"Saia na sada  direita em direo a {destination}"}},rotary:{default:{default:{default:"Entre na rotunda",name:"Entre na rotunda e saia para {way_name}",destination:"Entre na rotunda e saia em direo a {destination}"},name:{default:"Entre em {rotary_name}",name:"Entre em {rotary_name} e saia para {way_name}",destination:"Entre em {rotary_name} e saia em direo a {destination}"},exit:{default:"Entre na rotunda e saia na sada {exit_number}",name:"Entre na rotunda e saia na sada {exit_number} para {way_name}",destination:"Entre na rotunda e saia na sada {exit_number} em direo a {destination}"},name_exit:{default:"Entre em {rotary_name} e saia na sada {exit_number}",name:"Entre em {rotary_name} e saia na sada {exit_number} para {way_name}",destination:"Entre em{rotary_name} e saia na sada {exit_number} em direo a {destination}"}}},roundabout:{default:{exit:{default:"Entre na rotunda e saia na sada {exit_number}",name:"Entre na rotunda e saia na sada {exit_number} para {way_name}",destination:"Entre na rotunda e saia na sada {exit_number} em direo a {destination}"},default:{default:"Entre na rotunda",name:"Entre na rotunda e saia para {way_name}",destination:"Entre na rotunda e saia em direo a {destination}"}}},"roundabout turn":{default:{default:"Siga {modifier}",name:"Siga {modifier} para {way_name}",destination:"Siga {modifier} em direo a {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda para {way_name}",destination:"Vire  esquerda em direo a {destination}"},right:{default:"Vire  direita",name:"Vire  direita para {way_name}",destination:"Vire  direita em direo a {destination}"},straight:{default:"Continue em frente",name:"Continue em frente para {way_name}",destination:"Continue em frente em direo a {destination}"}},"exit roundabout":{default:{default:"Saia da rotunda",name:"Saia da rotunda para {way_name}",destination:"Saia da rotunda em direo a {destination}"}},"exit rotary":{default:{default:"Saia da rotunda",name:"Saia da rotunda para {way_name}",destination:"Saia da rotunda em direo a {destination}"}},turn:{default:{default:"Siga {modifier}",name:"Siga {modifier} para{way_name}",destination:"Siga {modifier} em direo a {destination}"},left:{default:"Vire  esquerda",name:"Vire  esquerda para {way_name}",destination:"Vire  esquerda em direo a {destination}"},right:{default:"Vire  direita",name:"Vire  direita para {way_name}",destination:"Vire  direita em direo a {destination}"},straight:{default:"V em frente",name:"V em frente para {way_name}",destination:"V em frente em direo a {destination}"}},"use lane":{no_lanes:{default:"Continue em frente"},default:{default:"{lane_instruction}"}}}}},{}],41:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"prima",2:"a doua",3:"a treia",4:"a patra",5:"a cincea",6:"a asea",7:"a aptea",8:"a opta",9:"a noua",10:"a zecea"},direction:{north:"nord",northeast:"nord-est",east:"est",southeast:"sud-est",south:"sud",southwest:"sud-vest",west:"vest",northwest:"nord-vest"},modifier:{left:"stnga",right:"dreapta","sharp left":"puternic stnga","sharp right":"puternic dreapta","slight left":"uor stnga","slight right":"uor dreapta",straight:"nainte",uturn:"ntoarcere"},lanes:{xo:"inei stnga",ox:"inei dreapta",xox:"inei pe mijloc",oxo:"inei pe laterale"}},modes:{ferry:{default:"Luai feribotul",name:"Luai feribotul {way_name}",destination:"Luai feribotul spre {destination}"}},phrase:{"two linked by distance":"{instruction_one}, apoi n {distance}, {instruction_two}","two linked":"{instruction_one} apoi {instruction_two}","one in distance":"n {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"ieirea {exit}"},arrive:{default:{default:"Ai ajuns la {nth} destinaie",upcoming:"Ai ajuns la {nth} destinaie",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}"},left:{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},right:{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"sharp left":{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},"sharp right":{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"slight right":{default:"Ai ajuns la {nth} destinaie, pe dreapta",upcoming:"Ai ajuns la {nth} destinaie, pe dreapta",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe dreapta"},"slight left":{default:"Ai ajuns la {nth} destinaie, pe stnga",upcoming:"Ai ajuns la {nth} destinaie, pe stnga",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, pe stnga"},straight:{default:"Ai ajuns la {nth} destinaie, n fa",upcoming:"Ai ajuns la {nth} destinaie, n fa",short:"Ai ajuns","short-upcoming":"Vei ajunge",named:"Ai ajuns {waypoint_name}, n fa"}},continue:{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}",exit:"Virai {modifier} pe {way_name}"},straight:{default:"Mergei nainte",name:"Mergei nainte pe {way_name}",destination:"Continuai spre {destination}",distance:"Mergei nainte pentru {distance}",namedistance:"Continuai pe {way_name} pentru {distance}"},"sharp left":{default:"Virai puternic la stnga",name:"Virai puternic la stnga pe {way_name}",destination:"Virai puternic la stnga spre {destination}"},"sharp right":{default:"Virai puternic la dreapta",name:"Virai puternic la dreapta pe {way_name}",destination:"Virai puternic la dreapta spre {destination}"},"slight left":{default:"Virai uor la stnga",name:"Virai uor la stnga pe {way_name}",destination:"Virai uor la stnga spre {destination}"},"slight right":{default:"Virai uor la dreapta",name:"Virai uor la dreapta pe {way_name}",destination:"Virai uor la dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v i continuai pe {way_name}",destination:"ntoarcei-v spre {destination}"}},depart:{default:{default:"Mergei spre {direction}",name:"Mergei spre {direction} pe {way_name}",namedistance:"Mergei spre {direction} pe {way_name} pentru {distance}"}},"end of road":{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}"},straight:{default:"Continuai nainte",name:"Continuai nainte pe {way_name}",destination:"Continuai nainte spre {destination}"},uturn:{default:"ntoarcei-v la sfritul drumului",name:"ntoarcei-v pe {way_name} la sfritul drumului",destination:"ntoarcei-v spre {destination} la sfritul drumului"}},fork:{default:{default:"inei {modifier} la bifurcaie",name:"inei {modifier} la bifurcaie pe {way_name}",destination:"inei {modifier} la bifurcaie spre {destination}"},"slight left":{default:"inei pe stnga la bifurcaie",name:"inei pe stnga la bifurcaie pe {way_name}",destination:"inei pe stnga la bifurcaie spre {destination}"},"slight right":{default:"inei pe dreapta la bifurcaie",name:"inei pe dreapta la bifurcaie pe {way_name}",destination:"inei pe dreapta la bifurcaie spre {destination}"},"sharp left":{default:"Virai puternic stnga la bifurcaie",name:"Virai puternic stnga la bifurcaie pe {way_name}",destination:"Virai puternic stnga la bifurcaie spre {destination}"},"sharp right":{default:"Virai puternic dreapta la bifurcaie",name:"Virai puternic dreapta la bifurcaie pe {way_name}",destination:"Virai puternic dreapta la bifurcaie spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},merge:{default:{default:"Intrai n {modifier}",name:"Intrai n {modifier} pe {way_name}",destination:"Intrai n {modifier} spre {destination}"},straight:{default:"Intrai",name:"Intrai pe {way_name}",destination:"Intrai spre {destination}"},"slight left":{default:"Intrai n stnga",name:"Intrai n stnga pe {way_name}",destination:"Intrai n stnga spre {destination}"},"slight right":{default:"Intrai n dreapta",name:"Intrai n dreapta pe {way_name}",destination:"Intrai n dreapta spre {destination}"},"sharp left":{default:"Intrai n stnga",name:"Intrai n stnga pe {way_name}",destination:"Intrai n stnga spre {destination}"},"sharp right":{default:"Intrai n dreapta",name:"Intrai n dreapta pe {way_name}",destination:"Intrai n dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},"new name":{default:{default:"Continuai {modifier}",name:"Continuai {modifier} pe {way_name}",destination:"Continuai {modifier} spre {destination}"},straight:{default:"Continuai nainte",name:"Continuai pe {way_name}",destination:"Continuai spre {destination}"},"sharp left":{default:"Virai puternic la stnga",name:"Virai puternic la stnga pe {way_name}",destination:"Virai puternic la stnga spre {destination}"},"sharp right":{default:"Virai puternic la dreapta",name:"Virai puternic la dreapta pe {way_name}",destination:"Virai puternic la dreapta spre {destination}"},"slight left":{default:"Continuai uor la stnga",name:"Continuai uor la stnga pe {way_name}",destination:"Continuai uor la stnga spre {destination}"},"slight right":{default:"Continuai uor la dreapta",name:"Continuai uor la dreapta pe {way_name}",destination:"Continuai uor la dreapta spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},notification:{default:{default:"Continuai {modifier}",name:"Continuai {modifier} pe {way_name}",destination:"Continuai {modifier} spre {destination}"},uturn:{default:"ntoarcei-v",name:"ntoarcei-v pe {way_name}",destination:"ntoarcei-v spre {destination}"}},"off ramp":{default:{default:"Urmai breteaua",name:"Urmai breteaua pe {way_name}",destination:"Urmai breteaua spre {destination}",exit:"Urmai ieirea {exit}",exit_destination:"Urmai ieirea {exit} spre {destination}"},left:{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},right:{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"},"sharp left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},"sharp right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"},"slight left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}",exit:"Urmai ieirea {exit} pe stnga",exit_destination:"Urmai ieirea {exit} pe stnga spre {destination}"},"slight right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}",exit:"Urmai ieirea {exit} pe dreapta",exit_destination:"Urmai ieirea {exit} pe dreapta spre {destination}"}},"on ramp":{default:{default:"Urmai breteaua de intrare",name:"Urmai breteaua pe {way_name}",destination:"Urmai breteaua spre {destination}"},left:{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},right:{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"},"sharp left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},"sharp right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"},"slight left":{default:"Urmai breteaua din stnga",name:"Urmai breteaua din stnga pe {way_name}",destination:"Urmai breteaua din stnga spre {destination}"},"slight right":{default:"Urmai breteaua din dreapta",name:"Urmai breteaua din dreapta pe {way_name}",destination:"Urmai breteaua din dreapta spre {destination}"}},rotary:{default:{default:{default:"Intrai n sensul giratoriu",name:"Intrai n sensul giratoriu i ieii pe {way_name}",destination:"Intrai n sensul giratoriu i ieii spre {destination}"},name:{default:"Intrai n {rotary_name}",name:"Intrai n {rotary_name} i ieii pe {way_name}",destination:"Intrai n {rotary_name} i ieii spre {destination}"},exit:{default:"Intrai n sensul giratoriu i urmai {exit_number} ieire",name:"Intrai n sensul giratoriu i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n sensul giratoriu i urmai {exit_number} ieire spre {destination}"},name_exit:{default:"Intrai n {rotary_name} i urmai {exit_number} ieire",name:"Intrai n {rotary_name} i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n  {rotary_name} i urmai {exit_number} ieire spre {destination}"}}},roundabout:{default:{exit:{default:"Intrai n sensul giratoriu i urmai {exit_number} ieire",name:"Intrai n sensul giratoriu i urmai {exit_number} ieire pe {way_name}",destination:"Intrai n sensul giratoriu i urmai {exit_number} ieire spre {destination}"},default:{default:"Intrai n sensul giratoriu",name:"Intrai n sensul giratoriu i ieii pe {way_name}",destination:"Intrai n sensul giratoriu i ieii spre {destination}"}}},"roundabout turn":{default:{default:"La sensul giratoriu virai {modifier}",name:"La sensul giratoriu virai {modifier} pe {way_name}",destination:"La sensul giratoriu virai {modifier} spre {destination}"},left:{default:"La sensul giratoriu virai la stnga",name:"La sensul giratoriu virai la stnga pe {way_name}",destination:"La sensul giratoriu virai la stnga spre {destination}"},right:{default:"La sensul giratoriu virai la dreapta",name:"La sensul giratoriu virai la dreapta pe {way_name}",destination:"La sensul giratoriu virai la dreapta spre {destination}"},straight:{default:"La sensul giratoriu continuai nainte",name:"La sensul giratoriu continuai nainte pe {way_name}",destination:"La sensul giratoriu continuai nainte spre {destination}"}},"exit roundabout":{default:{default:"Ieii din sensul giratoriu",name:"Ieii din sensul giratoriu pe {way_name}",destination:"Ieii din sensul giratoriu spre {destination}"}},"exit rotary":{default:{default:"Ieii din sensul giratoriu",name:"Ieii din sensul giratoriu pe {way_name}",destination:"Ieii din sensul giratoriu spre {destination}"}},turn:{default:{default:"Virai {modifier}",name:"Virai {modifier} pe {way_name}",destination:"Virai {modifier} spre {destination}"},left:{default:"Virai la stnga",name:"Virai la stnga pe {way_name}",destination:"Virai la stnga spre {destination}"},right:{default:"Virai la dreapta",name:"Virai la dreapta pe {way_name}",destination:"Virai la dreapta spre {destination}"},straight:{default:"Mergei nainte",name:"Mergei nainte pe {way_name}",destination:"Mergei nainte spre {destination}"}},"use lane":{no_lanes:{default:"Mergei nainte"},default:{default:"{lane_instruction}"}}}}},{}],42:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"-",east:"",southeast:"-",south:"",southwest:"-",west:"",northwest:"-"},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:" "},lanes:{xo:" ",ox:" ",xox:" ",oxo:"   "}},modes:{ferry:{default:"  ",name:"   {way_name}",destination:"     {destination}"}},phrase:{"two linked by distance":"{instruction_one},   {distance} {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance} {instruction_one}","name and ref":"{name} ({ref})","exit with number":" {exit}"},arrive:{default:{default:"   {nth}  ",upcoming:"   {nth}  ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name}"},left:{default:"   {nth}  ,   ",upcoming:"   {nth}  ,   ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},   "},right:{default:"   {nth}  ,   ",upcoming:"   {nth}  ,   ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},   "},"sharp left":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"sharp right":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"slight right":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},"slight left":{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "},straight:{default:"   {nth}  ,    ",upcoming:"   {nth}  ,    ",short:" ","short-upcoming":"  ",named:"    , {waypoint_name},    "}},continue:{default:{default:" {modifier}",name:" {modifier}  {way_name:dative}",destination:" {modifier}   {destination}",exit:" {modifier}  {way_name:accusative}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}",distance:"  {distance}",namedistance:"  {distance}  {way_name:dative}"},"sharp left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"sharp right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},uturn:{default:"",name:"     {way_name:dative}",destination:"   {destination}"}},depart:{default:{default:"  {direction} ",name:"  {direction}   {way_name:dative}",namedistance:" {distance}  {direction}   {way_name:dative}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},uturn:{default:"   ",name:"   {way_name:genitive}",destination:"      {destination}"}},fork:{default:{default:"   {modifier}",name:"   {modifier}  {way_name:accusative}",destination:"   {modifier}   {destination}"},"slight left":{default:"   ",name:"     {way_name:accusative}",destination:"         {destination}"},"slight right":{default:"   ",name:"     {way_name:accusative}",destination:"         {destination}"},"sharp left":{default:"    ",name:"    {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"    ",name:"    {way_name:accusative}",destination:"        {destination}"},uturn:{default:"  ",name:"    {way_name:prepositional}",destination:"        {destination}"}},merge:{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},"slight left":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"slight right":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"sharp left":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},"sharp right":{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"   {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"},"sharp left":{default:"  ",name:"    {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"  ",name:"    {way_name:accusative}",destination:"        {destination}"},"slight left":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"      {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name:dative}",destination:" {modifier}   {destination}"},uturn:{default:"",name:"  {way_name:prepositional}",destination:"      {destination}"}},"off ramp":{default:{default:"  ",name:"    {way_name:accusative}",destination:"     {destination}",exit:"   {exit}",exit_destination:"   {exit}   {destination}"},left:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit} ",exit_destination:"   {exit}    {destination}"},right:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit} ",exit_destination:"   {exit}    {destination}"},"sharp left":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"},"sharp right":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"},"slight left":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"   {exit}",exit_destination:"    {exit}   {destination}"},"slight right":{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}",exit:"    {exit}",exit_destination:"    {exit}   {destination}"}},"on ramp":{default:{default:"  ",name:"    {way_name:accusative}",destination:"       {destination}"},left:{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},right:{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"sharp left":{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"sharp right":{default:"     ",name:"     {way_name:accusative}",destination:"        {destination}"},"slight left":{default:"     ",name:"   {way_name:accusative}",destination:"      {destination}"},"slight right":{default:"     ",name:"   {way_name:accusative}",destination:"      {destination}"}},rotary:{default:{default:{default:"    ",name:"     {way_name:accusative}",destination:"      {destination}"},name:{default:"   {rotary_name:dative}",name:" {rotary_name:prepositional}   {way_name:accusative}",destination:" {rotary_name:prepositional}    {destination}"},exit:{default:"     {exit_number} ",name:"     {exit_number}   {way_name:accusative}",destination:"     {exit_number}    {destination}"},name_exit:{default:" {rotary_name:prepositional}   {exit_number} ",name:" {rotary_name:prepositional}   {exit_number}   {way_name:accusative}",destination:" {rotary_name:prepositional}   {exit_number}    {destination}"}}},roundabout:{default:{exit:{default:"     {exit_number} ",name:"     {exit_number}   {way_name:accusative}",destination:"     {exit_number}    {destination}"},default:{default:"    ",name:"     {way_name:accusative}",destination:"      {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},right:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},straight:{default:" ",name:"   {way_name:dative}",destination:"    {destination}"}},"exit roundabout":{default:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}"}},"exit rotary":{default:{default:"   ",name:"     {way_name:accusative}",destination:"      {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name:accusative}",destination:" {modifier}    {destination}"},left:{default:" ",name:"   {way_name:accusative}",destination:"    {destination}"},right:{default:" ",name:"   {way_name:accusative}",destination:"     {destination}"},straight:{default:" ",name:"  {way_name:dative}",destination:"   {destination}"}},"use lane":{no_lanes:{default:"  "},default:{default:"{lane_instruction}"}}}}},{}],43:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1:a",2:"2:a",3:"3:e",4:"4:e",5:"5:e",6:"6:e",7:"7:e",8:"8:e",9:"9:e",10:"10:e"},direction:{north:"norr",northeast:"nordost",east:"ster",southeast:"sydost",south:"sder",southwest:"sydvst",west:"vster",northwest:"nordvst"},modifier:{left:"vnster",right:"hger","sharp left":"vnster","sharp right":"hger","slight left":"vnster","slight right":"hger",straight:"rakt fram",uturn:"U-svng"},lanes:{xo:"Hll till hger",ox:"Hll till vnster",xox:"Hll till mitten",oxo:"Hll till vnster eller hger"}},modes:{ferry:{default:"Ta frjan",name:"Ta frjan p {way_name}",destination:"Ta frjan mot {destination}"}},phrase:{"two linked by distance":"{instruction_one}, sedan efter {distance}, {instruction_two}","two linked":"{instruction_one}, sedan {instruction_two}","one in distance":"Om {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"Du r framme vid din {nth} destination",upcoming:"Du r snart framme vid din {nth} destination",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}"},left:{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},right:{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"sharp left":{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},"sharp right":{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"slight right":{default:"Du r framme vid din {nth} destination, till hger",upcoming:"Du r snart framme vid din {nth} destination, till hger",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till hger"},"slight left":{default:"Du r framme vid din {nth} destination, till vnster",upcoming:"Du r snart framme vid din {nth} destination, till vnster",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, till vnster"},straight:{default:"Du r framme vid din {nth} destination, rakt fram",upcoming:"Du r snart framme vid din {nth} destination, rakt fram",short:"Du r framme","short-upcoming":"Du r snart framme",named:"Du r framme vid {waypoint_name}, rakt fram"}},continue:{default:{default:"Svng {modifier}",name:"Svng {modifier} och fortstt p {way_name}",destination:"Svng {modifier} mot {destination}",exit:"Svng {modifier} in p {way_name}"},straight:{default:"Fortstt rakt fram",name:"Kr rakt fram och fortstt p {way_name}",destination:"Fortstt mot {destination}",distance:"Fortstt rakt fram i {distance}",namedistance:"Fortstt p {way_name} i {distance}"},"sharp left":{default:"Svng vnster",name:"Svng vnster och fortstt p {way_name}",destination:"Svng vnster mot {destination}"},"sharp right":{default:"Svng hger",name:"Svng hger och fortstt p {way_name}",destination:"Svng hger mot {destination}"},"slight left":{default:"Svng vnster",name:"Svng vnster och fortstt p {way_name}",destination:"Svng vnster mot {destination}"},"slight right":{default:"Svng hger",name:"Svng hger och fortstt p {way_name}",destination:"Svng hger mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng och fortstt p {way_name}",destination:"Gr en U-svng mot {destination}"}},depart:{default:{default:"Kr t {direction}",name:"Kr t {direction} p {way_name}",namedistance:"Kr {distance} t {direction} p {way_name}"}},"end of road":{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt rakt fram in p {way_name}",destination:"Fortstt rakt fram mot {destination}"},uturn:{default:"Gr en U-svng i slutet av vgen",name:"Gr en U-svng in p {way_name} i slutet av vgen",destination:"Gr en U-svng mot {destination} i slutet av vgen"}},fork:{default:{default:"Hll till {modifier} dr vgen delar sig",name:"Hll till {modifier} in p {way_name}",destination:"Hll till {modifier} mot {destination}"},"slight left":{default:"Hll till vnster dr vgen delar sig",name:"Hll till vnster in p {way_name}",destination:"Hll till vnster mot {destination}"},"slight right":{default:"Hll till hger dr vgen delar sig",name:"Hll till hger in p {way_name}",destination:"Hll till hger mot {destination}"},"sharp left":{default:"Svng vnster dr vgen delar sig",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},"sharp right":{default:"Svng hger dr vgen delar sig",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},merge:{default:{default:"Byt till {modifier} krflt",name:"Byt till {modifier} krflt, in p {way_name}",destination:"Byt till {modifier} krflt, mot {destination}"},straight:{default:"Fortstt",name:"Kr in p {way_name}",destination:"Kr mot {destination}"},"slight left":{default:"Byt till vnstra krfltet",name:"Byt till vnstra krfltet, in p {way_name}",destination:"Byt till vnstra krfltet, mot {destination}"},"slight right":{default:"Byt till hgra krfltet",name:"Byt till hgra krfltet, in p {way_name}",destination:"Byt till hgra krfltet, mot {destination}"},"sharp left":{default:"Byt till vnstra krfltet",name:"Byt till vnstra krfltet, in p {way_name}",destination:"Byt till vnstra krfltet, mot {destination}"},"sharp right":{default:"Byt till hgra krfltet",name:"Byt till hgra krfltet, in p {way_name}",destination:"Byt till hgra krfltet, mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},"new name":{default:{default:"Fortstt {modifier}",name:"Fortstt {modifier} p {way_name}",destination:"Fortstt {modifier} mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt in p {way_name}",destination:"Fortstt mot {destination}"},"sharp left":{default:"Gr en skarp vnstersvng",name:"Gr en skarp vnstersvng in p {way_name}",destination:"Gr en skarp vnstersvng mot {destination}"},"sharp right":{default:"Gr en skarp hgersvng",name:"Gr en skarp hgersvng in p {way_name}",destination:"Gr en skarp hgersvng mot {destination}"},"slight left":{default:"Fortstt med ltt vnstersvng",name:"Fortstt med ltt vnstersvng in p {way_name}",destination:"Fortstt med ltt vnstersvng mot {destination}"},"slight right":{default:"Fortstt med ltt hgersvng",name:"Fortstt med ltt hgersvng in p {way_name}",destination:"Fortstt med ltt hgersvng mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},notification:{default:{default:"Fortstt {modifier}",name:"Fortstt {modifier} p {way_name}",destination:"Fortstt {modifier} mot {destination}"},uturn:{default:"Gr en U-svng",name:"Gr en U-svng in p {way_name}",destination:"Gr en U-svng mot {destination}"}},"off ramp":{default:{default:"Ta avfarten",name:"Ta avfarten in p {way_name}",destination:"Ta avfarten mot {destination}",exit:"Ta avfart {exit} ",exit_destination:"Ta avfart {exit} mot {destination}"},left:{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart {exit} till vnster mot {destination}"},right:{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"},"sharp left":{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart {exit} till vnster mot {destination}"},"sharp right":{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"},"slight left":{default:"Ta avfarten till vnster",name:"Ta avfarten till vnster in p {way_name}",destination:"Ta avfarten till vnster mot {destination}",exit:"Ta avfart {exit} till vnster",exit_destination:"Ta avfart{exit} till vnster mot {destination}"},"slight right":{default:"Ta avfarten till hger",name:"Ta avfarten till hger in p {way_name}",destination:"Ta avfarten till hger mot {destination}",exit:"Ta avfart {exit} till hger",exit_destination:"Ta avfart {exit} till hger mot {destination}"}},"on ramp":{default:{default:"Ta pfarten",name:"Ta pfarten in p {way_name}",destination:"Ta pfarten mot {destination}"},left:{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},right:{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"},"sharp left":{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},"sharp right":{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"},"slight left":{default:"Ta pfarten till vnster",name:"Ta pfarten till vnster in p {way_name}",destination:"Ta pfarten till vnster mot {destination}"},"slight right":{default:"Ta pfarten till hger",name:"Ta pfarten till hger in p {way_name}",destination:"Ta pfarten till hger mot {destination}"}},rotary:{default:{default:{default:"Kr in i rondellen",name:"I rondellen, ta avfarten in p {way_name}",destination:"I rondellen, ta av mot {destination}"},name:{default:"Kr in i {rotary_name}",name:"I {rotary_name}, ta av in p {way_name}",destination:"I {rotary_name}, ta av mot {destination}"},exit:{default:"I rondellen, ta {exit_number} avfarten",name:"I rondellen, ta {exit_number} avfarten in p {way_name}",destination:"I rondellen, ta {exit_number} avfarten mot {destination}"},name_exit:{default:"I {rotary_name}, ta {exit_number} avfarten",name:"I {rotary_name}, ta {exit_number}  avfarten in p {way_name}",destination:"I {rotary_name}, ta {exit_number} avfarten mot {destination}"}}},roundabout:{default:{exit:{default:"I rondellen, ta {exit_number} avfarten",name:"I rondellen, ta {exit_number} avfarten in p {way_name}",destination:"I rondellen, ta {exit_number} avfarten mot {destination}"},default:{default:"Kr in i rondellen",name:"I rondellen, ta avfarten in p {way_name}",destination:"I rondellen, ta av mot {destination}"}}},"roundabout turn":{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},left:{default:"Svng vnster",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},right:{default:"Svng hger",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},straight:{default:"Fortstt rakt fram",name:"Fortstt rakt fram in p {way_name}",destination:"Fortstt rakt fram mot {destination}"}},"exit roundabout":{default:{default:"Kr ut ur rondellen",name:"Kr ut ur rondellen in p {way_name}",destination:"Kr ut ur rondellen mot {destination}"}},"exit rotary":{default:{default:"Kr ut ur rondellen",name:"Kr ut ur rondellen in p {way_name}",destination:"Kr ut ur rondellen mot {destination}"}},turn:{default:{default:"Svng {modifier}",name:"Svng {modifier} in p {way_name}",destination:"Svng {modifier} mot {destination}"},left:{default:"Svng vnster",name:"Svng vnster in p {way_name}",destination:"Svng vnster mot {destination}"},right:{default:"Svng hger",name:"Svng hger in p {way_name}",destination:"Svng hger mot {destination}"},straight:{default:"Kr rakt fram",name:"Kr rakt fram in p {way_name}",destination:"Kr rakt fram mot {destination}"}},"use lane":{no_lanes:{default:"Fortstt rakt fram"},default:{default:"{lane_instruction}"}}}}},{}],44:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"birinci",2:"ikinci",3:"nc",4:"drdnc",5:"beinci",6:"altnc",7:"yedinci",8:"sekizinci",9:"dokuzuncu",10:"onuncu"},direction:{north:"kuzey",northeast:"kuzeydou",east:"dou",southeast:"gneydou",south:"gney",southwest:"gneybat",west:"bat",northwest:"kuzeybat"},modifier:{left:"sol",right:"sa","sharp left":"keskin sol","sharp right":"keskin sa","slight left":"hafif sol","slight right":"hafif sa",straight:"dz",uturn:"U dn"},lanes:{xo:"Sada kaln",ox:"Solda kaln",xox:"Ortada kaln",oxo:"Solda veya sada kaln"}},modes:{ferry:{default:"Vapur kullan",name:"{way_name} vapurunu kullan",destination:"{destination} istikametine giden vapuru kullan"}},phrase:{"two linked by distance":"{instruction_one} ve {distance} sonra {instruction_two}","two linked":"{instruction_one} ve sonra {instruction_two}","one in distance":"{distance} sonra, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"exit {exit}"},arrive:{default:{default:"{nth} hedefinize ulatnz",upcoming:"{nth} hedefinize ulatnz",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz"},left:{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},right:{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"sharp left":{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},"sharp right":{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"slight right":{default:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz sanzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz sanzdadr"},"slight left":{default:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz solunuzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz solunuzdadr"},straight:{default:"{nth} hedefinize ulatnz, hedefiniz karnzdadr",upcoming:"{nth} hedefinize ulatnz, hedefiniz karnzdadr",short:"{nth} hedefinize ulatnz","short-upcoming":"{nth} hedefinize ulatnz",named:"{waypoint_name} ulatnz, hedefiniz karnzdadr"}},continue:{default:{default:"{modifier} yne dn",name:"{way_name} zerinde kalmak iin {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn",exit:"{way_name} zerinde {modifier} yne dn"},straight:{default:"Dz devam edin",name:"{way_name} zerinde kalmak iin dz devam et",destination:"{destination} istikametinde devam et",distance:"{distance} boyunca dz devam et",namedistance:"{distance} boyunca {way_name} zerinde devam et"},"sharp left":{default:"Sola keskin dn yap",name:"{way_name} zerinde kalmak iin sola keskin dn yap",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"Saa keskin dn yap",name:"{way_name} zerinde kalmak iin saa keskin dn yap",destination:"{destination} istikametinde saa keskin dn yap"},"slight left":{default:"Sola hafif dn yap",name:"{way_name} zerinde kalmak iin sola hafif dn yap",destination:"{destination} istikametinde sola hafif dn yap"},"slight right":{default:"Saa hafif dn yap",name:"{way_name} zerinde kalmak iin saa hafif dn yap",destination:"{destination} istikametinde saa hafif dn yap"},uturn:{default:"U dn yapn",name:"Bir U-dn yap ve {way_name} devam et",destination:"{destination} istikametinde bir U-dn yap"}},depart:{default:{default:"{direction} tarafna ynelin",name:"{way_name} zerinde {direction} yne git",namedistance:"Head {direction} on {way_name} for {distance}"}},"end of road":{default:{default:"{modifier} tarafa dnn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},straight:{default:"Dz devam edin",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"},uturn:{default:"Yolun sonunda U dn yapn",name:"Yolun sonunda {way_name} zerinde bir U-dn yap",destination:"Yolun sonunda {destination} istikametinde bir U-dn yap"}},fork:{default:{default:"Yol ayrmnda {modifier} ynde kal",name:"{way_name} zerindeki yol ayrmnda {modifier} ynde kal",destination:"{destination} istikametindeki yol ayrmnda {modifier} ynde kal"},"slight left":{default:"ataln solundan devam edin",name:"ataln solundan {way_name} yoluna doru ",destination:"{destination} istikametindeki yol ayrmnda solda kal"},"slight right":{default:"ataln sandan devam edin",name:"{way_name} zerindeki yol ayrmnda sada kal",destination:"{destination} istikametindeki yol ayrmnda sada kal"},"sharp left":{default:"atalda keskin sola dnn",name:"{way_name} yoluna doru sola keskin dn yapn",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"atalda keskin saa dnn",name:"{way_name} yoluna doru saa keskin dn yapn",destination:"{destination} istikametinde saa keskin dn yap"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},merge:{default:{default:"{modifier} yne gir",name:"{way_name} zerinde {modifier} yne gir",destination:"{destination} istikametinde {modifier} yne gir"},straight:{default:"dz yne gir",name:"{way_name} zerinde dz yne gir",destination:"{destination} istikametinde dz yne gir"},"slight left":{default:"Sola gir",name:"{way_name} zerinde sola gir",destination:"{destination} istikametinde sola gir"},"slight right":{default:"Saa gir",name:"{way_name} zerinde saa gir",destination:"{destination} istikametinde saa gir"},"sharp left":{default:"Sola gir",name:"{way_name} zerinde sola gir",destination:"{destination} istikametinde sola gir"},"sharp right":{default:"Saa gir",name:"{way_name} zerinde saa gir",destination:"{destination} istikametinde saa gir"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},"new name":{default:{default:"{modifier} ynde devam et",name:"{way_name} zerinde {modifier} ynde devam et",destination:"{destination} istikametinde {modifier} ynde devam et"},straight:{default:"Dz devam et",name:"{way_name} zerinde devam et",destination:"{destination} istikametinde devam et"},"sharp left":{default:"Sola keskin dn yapn",name:"{way_name} yoluna doru sola keskin dn yapn",destination:"{destination} istikametinde sola keskin dn yap"},"sharp right":{default:"Saa keskin dn yapn",name:"{way_name} yoluna doru saa keskin dn yapn",destination:"{destination} istikametinde saa keskin dn yap"},"slight left":{default:"Hafif soldan devam edin",name:"{way_name} zerinde hafif solda devam et",destination:"{destination} istikametinde hafif solda devam et"},"slight right":{default:"Hafif sadan devam edin",name:"{way_name} zerinde hafif sada devam et",destination:"{destination} istikametinde hafif sada devam et"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},notification:{default:{default:"{modifier} ynde devam et",name:"{way_name} zerinde {modifier} ynde devam et",destination:"{destination} istikametinde {modifier} ynde devam et"},uturn:{default:"U dn yapn",name:"{way_name} yoluna U dn yapn",destination:"{destination} istikametinde bir U-dn yap"}},"off ramp":{default:{default:"Balant yoluna ge",name:"{way_name} zerindeki balant yoluna ge",destination:"{destination} istikametine giden balant yoluna ge",exit:"{exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} k yoluna ge"},left:{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},right:{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"},"sharp left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},"sharp right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"},"slight left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge",exit:"Soldaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sol k yoluna ge"},"slight right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge",exit:"Sadaki {exit} k yoluna ge",exit_destination:"{destination} istikametindeki {exit} sa k yoluna ge"}},"on ramp":{default:{default:"Balant yoluna ge",name:"{way_name} zerindeki balant yoluna ge",destination:"{destination} istikametine giden balant yoluna ge"},left:{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},right:{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"},"sharp left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},"sharp right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"},"slight left":{default:"Soldaki balant yoluna ge",name:"{way_name} zerindeki sol balant yoluna ge",destination:"{destination} istikametine giden sol balant yoluna ge"},"slight right":{default:"Sadaki balant yoluna ge",name:"{way_name} zerindeki sa balant yoluna ge",destination:"{destination} istikametine giden sa balant yoluna ge"}},rotary:{default:{default:{default:"Dnel kavaa gir",name:"Dnel kavaa gir ve {way_name} zerinde k",destination:"Dnel kavaa gir ve {destination} istikametinde k"},name:{default:"{rotary_name} dnel kavaa gir",name:"{rotary_name} dnel kavaa gir ve {way_name} zerinde k",destination:"{rotary_name} dnel kavaa gir ve {destination} istikametinde k"},exit:{default:"Dnel kavaa gir ve {exit_number} numaral ka gir",name:"Dnel kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"Dnel kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"},name_exit:{default:"{rotary_name} dnel kavaa gir ve {exit_number} numaral ka gir",name:"{rotary_name} dnel kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"{rotary_name} dnel kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"}}},roundabout:{default:{exit:{default:"Gbekli kavaa gir ve {exit_number} numaral ka gir",name:"Gbekli kavaa gir ve {way_name} zerindeki {exit_number} numaral ka gir",destination:"Gbekli kavaa gir ve {destination} istikametindeki {exit_number} numaral ka gir"},default:{default:"Gbekli kavaa gir",name:"Gbekli kavaa gir ve {way_name} zerinde k",destination:"Gbekli kavaa gir ve {destination} istikametinde k"}}},"roundabout turn":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},"exit roundabout":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},"exit rotary":{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz devam et",name:"{way_name} zerinde dz devam et",destination:"{destination} istikametinde dz devam et"}},turn:{default:{default:"{modifier} yne dn",name:"{way_name} zerinde {modifier} yne dn",destination:"{destination} istikametinde {modifier} yne dn"},left:{default:"Sola dnn",name:"{way_name} zerinde sola dn",destination:"{destination} istikametinde sola dn"},right:{default:"Saa dnn",name:"{way_name} zerinde saa dn",destination:"{destination} istikametinde saa dn"},straight:{default:"Dz git",name:"{way_name} zerinde dz git",destination:"{destination} istikametinde dz git"}},"use lane":{no_lanes:{default:"Dz devam edin"},default:{default:"{lane_instruction}"}}}}},{}],45:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10"},direction:{north:"",northeast:" ",east:"",southeast:" ",south:"",southwest:" ",west:"",northwest:" "},modifier:{left:"",right:"","sharp left":" ","sharp right":" ","slight left":" ","slight right":" ",straight:"",uturn:""},lanes:{xo:" ",ox:" ",xox:"  ",oxo:"   "}},modes:{ferry:{default:" ",name:"  {way_name}",destination:"    {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ,  {distance}, {instruction_two}","two linked":"{instruction_one},  {instruction_two}","one in distance":" {distance}, {instruction_one}","name and ref":"{name} ({ref})","exit with number":"' {exit}"},arrive:{default:{default:"    {nth}  ",upcoming:"    {nth}  ",short:" ","short-upcoming":" ",named:"   {waypoint_name}"},left:{default:"    {nth}  ,  ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},right:{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"sharp left":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"sharp right":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"slight right":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},"slight left":{default:"    {nth}  ,   ",upcoming:"    {nth}  , ",short:" ","short-upcoming":" ",named:"   {waypoint_name} "},straight:{default:"    {nth}  ,     ",upcoming:"    {nth}  ,   ",short:" ","short-upcoming":" ",named:"   {waypoint_name}   "}},continue:{default:{default:" {modifier}",name:"{modifier}   {way_name}",destination:" {modifier}   {destination}",exit:" {modifier}  {way_name}"},straight:{default:"  ",name:"     {way_name}",destination:"   {destination}",distance:"   {distance}",namedistance:"   {way_name} {distance}"},"sharp left":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"sharp right":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"slight left":{default:"  ",name:"      {way_name}",destination:"     {destination}"},"slight right":{default:"  ",name:"      {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"     {way_name}",destination:"    {destination}"}},depart:{default:{default:"  {direction}",name:"  {direction}  {way_name}",namedistance:"  {direction}  {way_name} {distance}"}},"end of road":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},straight:{default:"  ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:"    ",name:"   {way_name}   ",destination:"    {destination}   "}},fork:{default:{default:"   {modifier}",name:" {modifier}    {way_name}",destination:" {modifier}   {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"    {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"    {destination}"},"sharp left":{default:"    ",name:"    {way_name}",destination:"     {destination}"},"sharp right":{default:"    ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},merge:{default:{default:"   {modifier}",name:"   {modifier}  {way_name}",destination:"   {modifier}   {destination}"},straight:{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"new name":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},straight:{default:" ",name:"  {way_name}",destination:"   {destination}"},"sharp left":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"sharp right":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight left":{default:"  ",name:"    {way_name}",destination:"     {destination}"},"slight right":{default:"  ",name:"    {way_name}",destination:"     {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},notification:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},uturn:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"off ramp":{default:{default:"  ",name:"    {way_name}",destination:"     {destination}",exit:" ' {exit}",exit_destination:" ' {exit}   {destination}"},left:{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},right:{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}",exit:" ' {exit} ",exit_destination:" ' {exit}    {destination}"}},"on ramp":{default:{default:"  ",name:"    {way_name}",destination:"     {destination}"},left:{default:"   ",name:"     {way_name}",destination:"      {destination}"},right:{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"sharp right":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight left":{default:"   ",name:"     {way_name}",destination:"      {destination}"},"slight right":{default:"   ",name:"     {way_name}",destination:"      {destination}"}},rotary:{default:{default:{default:"  ",name:"    {way_name}",destination:"     {destination}"},name:{default:"  {rotary_name}",name:"  {rotary_name}    {way_name}",destination:"  {rotary_name}     {destination}"},exit:{default:"      {exit_number} '",name:"      {exit_number} '  {way_name}",destination:"      {exit_number} '   {destination}"},name_exit:{default:"  {rotary_name}    {exit_number} '",name:"  {rotary_name}    {exit_number} '  {way_name}",destination:"  {rotary_name}    {exit_number} '   {destination}"}}},roundabout:{default:{exit:{default:"      {exit_number} '",name:"      {exit_number} '  {way_name}",destination:"      {exit_number} '   {destination}"},default:{default:"  ",name:"    {way_name}",destination:"     {destination}"}}},"roundabout turn":{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name}",destination:"    {destination}"},right:{default:" ",name:"   {way_name}",destination:"    {destination}"},straight:{default:" ",name:"    {way_name}",destination:"     {destination}"}},"exit roundabout":{default:{default:" ",name:"   {way_name} ",destination:"    {destination}"}},"exit rotary":{default:{default:" ",name:"   {way_name} ",destination:"    {destination}"}},turn:{default:{default:" {modifier}",name:" {modifier}  {way_name}",destination:" {modifier}   {destination}"},left:{default:" ",name:"   {way_name}",destination:"    {destination}"},right:{default:" ",name:"   {way_name}",destination:"    {destination}"},straight:{default:" ",name:"   {way_name}",destination:"    {destination}"}},"use lane":{no_lanes:{default:"  "},default:{default:"{lane_instruction}"}}}}},{}],46:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!0},v5:{constants:{ordinalize:{1:"u tin",2:"th 2",3:"th 3",4:"th 4",5:"th 5",6:"th 6",7:"th 7",8:"th 8",9:"th 9",10:"th 10"},direction:{north:"bc",northeast:"ng bc",east:"ng",southeast:"ng nam",south:"nam",southwest:"ty nam",west:"ty",northwest:"ty bc"},modifier:{left:"tri",right:"phi","sharp left":"tri gt","sharp right":"phi gt","slight left":"tri nghing","slight right":"phi nghing",straight:"thng",uturn:"ngc"},lanes:{xo:"i bn phi",ox:"i bn tri",xox:"i vo gia",oxo:"i bn tri hay bn phi"}},modes:{ferry:{default:"Ln ph",name:"Ln ph {way_name}",destination:"Ln ph i {destination}"}},phrase:{"two linked by distance":"{instruction_one}, ri {distance} na th {instruction_two}","two linked":"{instruction_one}, ri {instruction_two}","one in distance":"{distance} na th {instruction_one}","name and ref":"{name} ({ref})","exit with number":"li ra {exit}"},arrive:{default:{default:"n ni {nth}",upcoming:"n ni {nth}",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}"},left:{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},right:{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"sharp left":{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},"sharp right":{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"slight right":{default:"n ni {nth}  bn phi",upcoming:"n ni {nth}  bn phi",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn phi"},"slight left":{default:"n ni {nth}  bn tri",upcoming:"n ni {nth}  bn tri",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  bn tri"},straight:{default:"n ni {nth}  trc mt",upcoming:"n ni {nth}  trc mt",short:"n ni","short-upcoming":"n ni",named:"n {waypoint_name}  trc mt"}},continue:{default:{default:"Quo {modifier}",name:"Quo {modifier}  chy tip trn {way_name}",destination:"Quo {modifier} v {destination}",exit:"Quo {modifier} vo {way_name}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}",distance:"Chy thng cho {distance}",namedistance:"Chy tip trn {way_name} cho {distance}"},"sharp left":{default:"Quo gt bn tri",name:"Quo gt bn tri  chy tip trn {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi",name:"Quo gt bn phi  chy tip trn {way_name}",destination:"Quo gt bn phi v {destination}"},"slight left":{default:"Nghing v bn tri",name:"Nghing v bn tri  chy tip trn {way_name}",destination:"Nghing v bn tri v {destination}"},"slight right":{default:"Nghing v bn phi",name:"Nghing v bn phi  chy tip trn {way_name}",destination:"Nghing v bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li trn {way_name}",destination:"Quo ngc v {destination}"}},depart:{default:{default:"i v hng {direction}",name:"i v hng {direction} trn {way_name}",namedistance:"i v hng {direction} trn {way_name} cho {distance}"}},"end of road":{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"},uturn:{default:"Quo ngc li ti cui ng",name:"Quo ngc vo {way_name} ti cui ng",destination:"Quo ngc v {destination} ti cui ng"}},fork:{default:{default:"i bn {modifier}  ng ba",name:"Gi bn {modifier} vo {way_name}",destination:"Gi bn {modifier} v {destination}"},"slight left":{default:"Nghing v bn tri  ng ba",name:"Gi bn tri vo {way_name}",destination:"Gi bn tri v {destination}"},"slight right":{default:"Nghing v bn phi  ng ba",name:"Gi bn phi vo {way_name}",destination:"Gi bn phi v {destination}"},"sharp left":{default:"Quo gt bn tri  ng ba",name:"Quo gt bn tri vo {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi  ng ba",name:"Quo gt bn phi vo {way_name}",destination:"Quo gt bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},merge:{default:{default:"Nhp sang {modifier}",name:"Nhp sang {modifier} vo {way_name}",destination:"Nhp sang {modifier} v {destination}"},straight:{default:"Nhp ng",name:"Nhp vo {way_name}",destination:"Nhp ng v {destination}"},"slight left":{default:"Nhp sang tri",name:"Nhp sang tri vo {way_name}",destination:"Nhp sang tri v {destination}"},"slight right":{default:"Nhp sang phi",name:"Nhp sang phi vo {way_name}",destination:"Nhp sang phi v {destination}"},"sharp left":{default:"Nhp sang tri",name:"Nhp sang tri vo {way_name}",destination:"Nhp sang tri v {destination}"},"sharp right":{default:"Nhp sang phi",name:"Nhp sang phi vo {way_name}",destination:"Nhp sang phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},"new name":{default:{default:"Chy tip bn {modifier}",name:"Chy tip bn {modifier} trn {way_name}",destination:"Chy tip bn {modifier} v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"},"sharp left":{default:"Quo gt bn tri",name:"Quo gt bn tri vo {way_name}",destination:"Quo gt bn tri v {destination}"},"sharp right":{default:"Quo gt bn phi",name:"Quo gt bn phi vo {way_name}",destination:"Quo gt bn phi v {destination}"},"slight left":{default:"Nghing v bn tri",name:"Nghing v bn tri vo {way_name}",destination:"Nghing v bn tri v {destination}"},"slight right":{default:"Nghing v bn phi",name:"Nghing v bn phi vo {way_name}",destination:"Nghing v bn phi v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},notification:{default:{default:"Chy tip bn {modifier}",name:"Chy tip bn {modifier} trn {way_name}",destination:"Chy tip bn {modifier} v {destination}"},uturn:{default:"Quo ngc li",name:"Quo ngc li {way_name}",destination:"Quo ngc li v {destination}"}},"off ramp":{default:{default:"i ng nhnh",name:"i ng nhnh {way_name}",destination:"i ng nhnh v {destination}",exit:"i theo li ra {exit}",exit_destination:"i theo li ra {exit} v {destination}"},left:{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},right:{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"},"sharp left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},"sharp right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"},"slight left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}",exit:"i theo li ra {exit} bn tri",exit_destination:"i theo li ra {exit} bn tri v {destination}"},"slight right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}",exit:"i theo li ra {exit} bn phi",exit_destination:"i theo li ra {exit} bn phi v {destination}"}},"on ramp":{default:{default:"i ng nhnh",name:"i ng nhnh {way_name}",destination:"i ng nhnh v {destination}"},left:{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},right:{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"},"sharp left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},"sharp right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"},"slight left":{default:"i ng nhnh bn tri",name:"i ng nhnh {way_name} bn tri",destination:"i ng nhnh bn tri v {destination}"},"slight right":{default:"i ng nhnh bn phi",name:"i ng nhnh {way_name} bn phi",destination:"i ng nhnh bn phi v {destination}"}},rotary:{default:{default:{default:"i vo bng binh",name:"i vo bng binh v ra ti {way_name}",destination:"i vo bng binh v ra v {destination}"},name:{default:"i vo {rotary_name}",name:"i vo {rotary_name} v ra ti {way_name}",destination:"i v {rotary_name} v ra v {destination}"},exit:{default:"i vo bng binh v ra ti ng {exit_number}",name:"i vo bng binh v ra ti ng {exit_number} tc {way_name}",destination:"i vo bng binh v ra ti ng {exit_number} v {destination}"},name_exit:{default:"i vo {rotary_name} v ra ti ng {exit_number}",name:"i vo {rotary_name} v ra ti ng {exit_number} tc {way_name}",destination:"i vo {rotary_name} v ra ti ng {exit_number} v {destination}"}}},roundabout:{default:{exit:{default:"i vo bng binh v ra ti ng {exit_number}",name:"i vo bng binh v ra ti ng {exit_number} tc {way_name}",destination:"i vo bng binh v ra ti ng {exit_number} v {destination}"},default:{default:"i vo bng binh",name:"i vo bng binh v ra ti {way_name}",destination:"i vo bng binh v ra v {destination}"}}},"roundabout turn":{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},left:{default:"Quo tri",name:"Quo tri vo {way_name}",destination:"Quo tri v {destination}"},right:{default:"Quo phi",name:"Quo phi vo {way_name}",destination:"Quo phi v {destination}"},straight:{default:"Chy thng",name:"Chy tip trn {way_name}",destination:"Chy tip v {destination}"}},"exit roundabout":{default:{default:"Ra bng binh",name:"Ra bng binh vo {way_name}",destination:"Ra bng binh v {destination}"}},"exit rotary":{default:{default:"Ra bng binh",name:"Ra bng binh vo {way_name}",destination:"Ra bng binh v {destination}"}},turn:{default:{default:"Quo {modifier}",name:"Quo {modifier} vo {way_name}",destination:"Quo {modifier} v {destination}"},left:{default:"Quo tri",name:"Quo tri vo {way_name}",destination:"Quo tri v {destination}"},right:{default:"Quo phi",name:"Quo phi vo {way_name}",destination:"Quo phi v {destination}"},straight:{default:"Chy thng",name:"Chy thng vo {way_name}",destination:"Chy thng v {destination}"}},"use lane":{no_lanes:{default:"Chy thng"},default:{default:"{lane_instruction}"}}}}},{}],47:[function(r,i,l){i.exports={meta:{capitalizeFirstLetter:!1},v5:{constants:{ordinalize:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""},direction:{north:"",northeast:"",east:"",southeast:"",south:"",southwest:"",west:"",northwest:""},modifier:{left:"",right:"","sharp left":"","sharp right":"","slight left":"","slight right":"",straight:"",uturn:""},lanes:{xo:"",ox:"",xox:"",oxo:""}},modes:{ferry:{default:"",name:"{way_name}",destination:"{destination}"}},phrase:{"two linked by distance":"{instruction_one}{distance}{instruction_two}","two linked":"{instruction_one}{instruction_two}","one in distance":"{distance}{instruction_one}","name and ref":"{name}{ref}","exit with number":"{exit}"},arrive:{default:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},left:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},right:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"sharp left":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"sharp right":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"slight right":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},"slight left":{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"},straight:{default:"{nth}",upcoming:"{nth}",short:"","short-upcoming":"",named:"{waypoint_name}"}},continue:{default:{default:"{modifier}",name:"{way_name}{modifier}",destination:"{modifier}{destination}",exit:"{modifier}{way_name}"},straight:{default:"",name:"{way_name}",destination:"{destination}",distance:"{distance}",namedistance:"{way_name}{distance}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},depart:{default:{default:"{direction}",name:"{direction}{way_name}",namedistance:"{direction}{way_name}{distance}"}},"end of road":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},fork:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},merge:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},"new name":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},notification:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},uturn:{default:"",name:"{way_name}",destination:"{destination}"}},"off ramp":{default:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}",exit:"{exit}",exit_destination:"{exit}{destination}"}},"on ramp":{default:{default:"",name:"{way_name}",destination:"{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},"sharp left":{default:"",name:"{way_name}",destination:"{destination}"},"sharp right":{default:"",name:"{way_name}",destination:"{destination}"},"slight left":{default:"",name:"{way_name}",destination:"{destination}"},"slight right":{default:"",name:"{way_name}",destination:"{destination}"}},rotary:{default:{default:{default:"",name:"{way_name}",destination:"{destination}"},name:{default:"{rotary_name}",name:"{rotary_name}{way_name}",destination:"{rotary_name}{destination}"},exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},name_exit:{default:"{rotary_name}{exit_number}",name:"{rotary_name}{exit_number}{way_name}",destination:"{rotary_name}{exit_number}{destination}"}}},roundabout:{default:{exit:{default:"{exit_number}",name:"{exit_number}{way_name}",destination:"{exit_number}{destination}"},default:{default:"",name:"{way_name}",destination:"{destination}"}}},"roundabout turn":{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"exit roundabout":{default:{default:"",name:"{way_name}",destination:"{destination}"}},"exit rotary":{default:{default:"",name:"{way_name}",destination:"{destination}"}},turn:{default:{default:"{modifier}",name:"{modifier}{way_name}",destination:"{modifier}{destination}"},left:{default:"",name:"{way_name}",destination:"{destination}"},right:{default:"",name:"{way_name}",destination:"{destination}"},straight:{default:"",name:"{way_name}",destination:"{destination}"}},"use lane":{no_lanes:{default:""},default:{default:"{lane_instruction}"}}}}},{}],48:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(p,f,s,S){u.setOptions(this,S),this._elem=p,this._resultFn=S.resultFn?u.Util.bind(S.resultFn,S.resultContext):null,this._autocomplete=S.autocompleteFn?u.Util.bind(S.autocompleteFn,S.autocompleteContext):null,this._selectFn=u.Util.bind(f,s),this._container=u.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=u.DomUtil.create("table","",this._container),u.DomEvent.addListener(this._elem,"input",this._keyPressed,this),u.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),u.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),u.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){u.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var p=this._elem.getBoundingClientRect();if(!this._container.parentElement){var f=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,s=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;this._container.style.left=p.left+f+"px",this._container.style.top=p.bottom+s+"px",this._container.style.width=p.right-p.left+"px",document.body.appendChild(this._container)}u.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(p){var f,s,S,M;for(delete this._selection,this._results=p;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(f=0;f<p.length;f++)s=u.DomUtil.create("tr","",this._resultTable),s.setAttribute("data-result-index",f),S=u.DomUtil.create("td","",s),M=document.createTextNode(p[f].name),S.appendChild(M),u.DomEvent.addListener(S,"mousedown",u.DomEvent.preventDefault),u.DomEvent.addListener(S,"click",this._createClickListener(p[f]));f||(s=u.DomUtil.create("tr","",this._resultTable),S=u.DomUtil.create("td","leaflet-routing-geocoder-no-results",s),S.innerHTML=this.options.noResultsMessage),this._open(),p.length>0&&this._select(1)},_createClickListener:function(p){var f=this._resultSelected(p);return u.bind(function(){this._elem.blur(),f()},this)},_resultSelected:function(p){return u.bind(function(){this.close(),this._elem.value=p.name,this._lastCompletedText=p.name,this._selectFn(p)},this)},_keyPressed:function(p){var f;if(this._isOpen&&p.keyCode===13&&this._selection){f=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[f])(),u.DomEvent.preventDefault(p);return}if(p.keyCode===13){u.DomEvent.preventDefault(p),this._complete(this._resultFn,!0);return}if(this._autocomplete&&document.activeElement===this._elem){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(u.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout);return}this._unselect()},_select:function(p){var f=this._selection;f&&(u.DomUtil.removeClass(f.firstChild,"leaflet-routing-geocoder-selected"),f=f[p>0?"nextSibling":"previousSibling"]),f||(f=this._resultTable[p>0?"firstChild":"lastChild"]),f&&(u.DomUtil.addClass(f.firstChild,"leaflet-routing-geocoder-selected"),this._selection=f)},_unselect:function(){this._selection&&u.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(p){if(this._isOpen)switch(p.keyCode){case 27:this.close(),u.DomEvent.preventDefault(p);return;case 38:this._select(-1),u.DomEvent.preventDefault(p);return;case 40:this._select(1),u.DomEvent.preventDefault(p);return}},_complete:function(p,f){var s=this._elem.value;function S(M){this._lastCompletedText=s,f&&M.length===1?this._resultSelected(M[0])():this._setResults(M)}s&&(s!==this._lastCompletedText?p(s,S,this):f&&S.call(this,this._results))}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],49:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,p=r("./itinerary"),f=r("./line"),s=r("./plan"),S=r("./osrm-v1");i.exports=p.extend({options:{fitSelectedRoutes:"smart",routeLine:function(M,D){return new f(M,D)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",showAlternatives:!1,defaultErrorHandler:function(M){console.error("Routing error:",M.error)}},initialize:function(M){u.Util.setOptions(this,M),this._router=this.options.router||new S(M),this._plan=this.options.plan||new s(this.options.waypoints,M),this._requestCount=0,p.prototype.initialize.call(this,M),this.on("routeselected",this._routeSelected,this),this.options.defaultErrorHandler&&this.on("routingerror",this.options.defaultErrorHandler),this._plan.on("waypointschanged",this._onWaypointsChanged,this),M.routeWhileDragging&&this._setupRouteDragging()},_onZoomEnd:function(){if(!(!this._selectedRoute||!this._router.requiresMoreDetail)){var M=this._map;this._router.requiresMoreDetail(this._selectedRoute,M.getZoom(),M.getBounds())&&this.route({callback:u.bind(function(D,j){var V;if(!D){for(V=0;V<j.length;V++)this._routes[V].properties=j[V].properties;this._updateLineCallback(D,j)}},this),simplifyGeometry:!1,geometryOnly:!0})}},onAdd:function(M){this.options.autoRoute&&this.route();var D=p.prototype.onAdd.call(this,M);return this._map=M,this._map.addLayer(this._plan),this._map.on("zoomend",this._onZoomEnd,this),this._plan.options.geocoder&&D.insertBefore(this._plan.createGeocoders(),D.firstChild),D},onRemove:function(M){if(M.off("zoomend",this._onZoomEnd,this),this._line&&M.removeLayer(this._line),M.removeLayer(this._plan),this._alternatives&&this._alternatives.length>0)for(var D=0,j=this._alternatives.length;D<j;D++)M.removeLayer(this._alternatives[D]);return p.prototype.onRemove.call(this,M)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(M){return this._plan.setWaypoints(M),this},spliceWaypoints:function(){var M=this._plan.spliceWaypoints.apply(this._plan,arguments);return M},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(M){var D=this._selectedRoute=M.route,j=this.options.showAlternatives&&M.alternatives,V=this.options.fitSelectedRoutes,X=V==="smart"&&!this._waypointsVisible()||V!=="smart"&&V;this._updateLines({route:D,alternatives:j}),X&&this._map.fitBounds(this._line.getBounds()),this.options.waypointMode==="snap"&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(D.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var M=this.getWaypoints(),D,j,V,X,re;try{for(D=this._map.getSize(),X=0;X<M.length;X++)re=this._map.latLngToLayerPoint(M[X].latLng),j?j.extend(re):j=u.bounds([re]);return V=j.getSize(),(V.x>D.x/5||V.y>D.y/5)&&this._waypointsInViewport()}catch{return!1}},_waypointsInViewport:function(){var M=this.getWaypoints(),D,j;try{D=this._map.getBounds()}catch{return!1}for(j=0;j<M.length;j++)if(D.contains(M[j].latLng))return!0;return!1},_updateLines:function(M){var D=this.options.addWaypoints!==void 0?this.options.addWaypoints:!0;this._clearLines(),this._alternatives=[],M.alternatives&&M.alternatives.forEach(function(j,V){this._alternatives[V]=this.options.routeLine(j,u.extend({isAlternative:!0},this.options.altLineOptions||this.options.lineOptions)),this._alternatives[V].addTo(this._map),this._hookAltEvents(this._alternatives[V])},this),this._line=this.options.routeLine(M.route,u.extend({addWaypoints:D,extendToWaypoints:this.options.waypointMode==="connect"},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(M){M.on("linetouched",function(D){this._plan.dragNewWaypoint(D)},this)},_hookAltEvents:function(M){M.on("linetouched",function(D){var j=this._routes.slice(),V=j.splice(D.target._route.routesIndex,1)[0];this.fire("routeselected",{route:V,alternatives:j})},this)},_onWaypointsChanged:function(M){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLines(),this._clearAlts()),this.fire("waypointschanged",{waypoints:M.waypoints})},_setupRouteDragging:function(){var M=0,D;this._plan.on("waypointdrag",u.bind(function(j){D=j.waypoints,M||(M=setTimeout(u.bind(function(){this.route({waypoints:D,geometryOnly:!0,callback:u.bind(this._updateLineCallback,this)}),M=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){M&&(clearTimeout(M),M=void 0),this.route()},this)},_updateLineCallback:function(M,D){if(M)M.type!=="abort"&&this._clearLines();else{D=D.slice();var j=D.splice(this._selectedRoute.routesIndex,1)[0];this._updateLines({route:j,alternatives:this.options.showAlternatives?D:[]})}},route:function(M){var D=++this._requestCount,j;this._pendingRequest&&this._pendingRequest.abort&&(this._pendingRequest.abort(),this._pendingRequest=null),M=M||{},this._plan.isReady()&&(this.options.useZoomParameter&&(M.z=this._map&&this._map.getZoom()),j=M&&M.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:j}),this._pendingRequest=this._router.route(j,function(V,X){if(this._pendingRequest=null,M.callback)return M.callback.call(this,V,X);if(D===this._requestCount){if(this._clearLines(),this._clearAlts(),V&&V.type!=="abort"){this.fire("routingerror",{error:V});return}if(X.forEach(function(ae,H){ae.routesIndex=H}),!M.geometryOnly)this.fire("routesfound",{waypoints:j,routes:X}),this.setAlternatives(X);else{var re=X.splice(0,1)[0];this._routeSelected({route:re,alternatives:X})}}},this,M))},_clearLines:function(){if(this._line&&(this._map.removeLayer(this._line),delete this._line),this._alternatives&&this._alternatives.length){for(var M in this._alternatives)this._map.removeLayer(this._alternatives[M]);this._alternatives=[]}}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./itinerary":55,"./line":56,"./osrm-v1":59,"./plan":60}],50:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.Control.extend({options:{header:"Routing error",formatMessage:function(p){return p.status<0?"Calculating the route caused an error. Technical description follows: <code><pre>"+p.message+"</pre></code":"The route could not be calculated. "+p.message}},initialize:function(p,f){u.Control.prototype.initialize.call(this,f),p.on("routingerror",u.bind(function(s){this._element&&(this._element.children[1].innerHTML=this.options.formatMessage(s.error),this._element.style.visibility="visible")},this)).on("routingstart",u.bind(function(){this._element&&(this._element.style.visibility="hidden")},this))},onAdd:function(){var p;return this._element=u.DomUtil.create("div","leaflet-bar leaflet-routing-error"),this._element.style.visibility="hidden",p=u.DomUtil.create("h3",null,this._element),u.DomUtil.create("span",null,this._element),p.innerHTML=this.options.header,this._element},onRemove:function(){delete this._element}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],51:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,p=r("./localization");i.exports=u.Class.extend({options:{units:"metric",unitNames:null,language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(f){u.setOptions(this,f);var s=u.Util.isArray(this.options.language)?this.options.language:[this.options.language,"en"];this._localization=new p(s)},formatDistance:function(f,s){var S=this.options.unitNames||this._localization.localize("units"),M=s<=0,D=M?function(re){return re}:u.bind(this._round,this),j,V,X;return this.options.units==="imperial"?(V=f/.9144,V>=1e3?X={value:D(f/1609.344,s),unit:S.miles}:X={value:D(V,s),unit:S.yards}):(j=D(f,s),X={value:j>=1e3?j/1e3:j,unit:j>=1e3?S.kilometers:S.meters}),M&&(X.value=X.value.toFixed(-s)),u.Util.template(this.options.distanceTemplate,X)},_round:function(f,s){var S=s||this.options.roundingSensitivity,M=Math.pow(10,(Math.floor(f/S)+"").length-1),D=Math.floor(f/M),j=D>5?M:M/2;return Math.round(f/j)*j},formatTime:function(f){var s=this.options.unitNames||this._localization.localize("units");return f=Math.round(f/30)*30,f>86400?Math.round(f/3600)+" "+s.hours:f>3600?Math.floor(f/3600)+" "+s.hours+" "+Math.round(f%3600/60)+" "+s.minutes:f>300?Math.round(f/60)+" "+s.minutes:f>60?Math.floor(f/60)+" "+s.minutes+(f%60!==0?" "+f%60+" "+s.seconds:""):f+" "+s.seconds},formatInstruction:function(f,s){return f.text===void 0?this.capitalize(u.Util.template(this._getInstructionTemplate(f,s),u.extend({},f,{exitStr:f.exit?this._localization.localize("formatOrder")(f.exit):"",dir:this._localization.localize(["directions",f.direction]),modifier:this._localization.localize(["directions",f.modifier])}))):f.text},getIconName:function(f,s){switch(f.type){case"Head":if(s===0)return"depart";break;case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}switch(f.modifier){case"Straight":return"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":case"Uturn":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left"}},capitalize:function(f){return f.charAt(0).toUpperCase()+f.substring(1)},_getInstructionTemplate:function(f,s){var S=f.type==="Straight"?s===0?"Head":"Continue":f.type,M=this._localization.localize(["instructions",S]);return M||(M=[this._localization.localize(["directions",S])," "+this._localization.localize(["instructions","Onto"])]),M[0]+(M.length>1&&f.road?M[1]:"")}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./localization":57}],52:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,p=r("./autocomplete"),f=r("./localization");function s(S){S.setSelectionRange?S.setSelectionRange(0,9999):S.select()}i.exports=u.Class.extend({includes:typeof u.Evented<"u"&&u.Evented.prototype||u.Mixin.Events,options:{createGeocoder:function(S,M,D){var j=u.DomUtil.create("div","leaflet-routing-geocoder"),V=u.DomUtil.create("input","",j),X=D.addWaypoints?u.DomUtil.create("span","leaflet-routing-remove-waypoint",j):void 0;return V.disabled=!D.addWaypoints,{container:j,input:V,closeButton:X}},geocoderPlaceholder:function(S,M,D){var j=new f(D.options.language).localize("ui");return S===0?j.startPlaceholder:S<M-1?u.Util.template(j.viaPlaceholder,{viaNumber:S}):j.endPlaceholder},geocoderClass:function(){return""},waypointNameFallback:function(S){var M=S.lat<0?"S":"N",D=S.lng<0?"W":"E",j=(Math.round(Math.abs(S.lat)*1e4)/1e4).toString(),V=(Math.round(Math.abs(S.lng)*1e4)/1e4).toString();return M+j+", "+D+V},maxGeocoderTolerance:200,autocompleteOptions:{},language:"en"},initialize:function(S,M,D,j){u.setOptions(this,j);var V=this.options.createGeocoder(M,D,this.options),X=V.closeButton,re=V.input;re.setAttribute("placeholder",this.options.geocoderPlaceholder(M,D,this)),re.className=this.options.geocoderClass(M,D),this._element=V,this._waypoint=S,this.update(),re.value=S.name,u.DomEvent.addListener(re,"click",function(){s(this)},re),X&&u.DomEvent.addListener(X,"click",function(){this.fire("delete",{waypoint:this._waypoint})},this),new p(re,function(ae){re.value=ae.name,S.name=ae.name,S.latLng=ae.center,this.fire("geocoded",{waypoint:S,value:ae})},this,u.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions))},getContainer:function(){return this._element.container},setValue:function(S){this._element.input.value=S},update:function(S){var M=this._waypoint,D;M.name=M.name||"",M.latLng&&(S||!M.name)&&(D=this.options.waypointNameFallback(M.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(M.latLng,67108864,function(j){j.length>0&&j[0].center.distanceTo(M.latLng)<this.options.maxGeocoderTolerance?M.name=j[0].name:M.name=D,this._update()},this):(M.name=D,this._update()))},focus:function(){var S=this._element.input;S.focus(),s(S)},_update:function(){var S=this._waypoint,M=S&&S.name?S.name:"";this.setValue(M),this.fire("reversegeocoded",{waypoint:S,value:M})}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./autocomplete":48,"./localization":57}],53:[function(r,i,l){(function(c){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,p=r("./control"),f=r("./itinerary"),s=r("./line"),S=r("./osrm-v1"),M=r("./plan"),D=r("./waypoint"),j=r("./autocomplete"),V=r("./formatter"),X=r("./geocoder-element"),re=r("./localization"),ae=r("./itinerary-builder"),H=r("./mapbox"),Se=r("./error-control");u.routing={control:function(xe){return new p(xe)},itinerary:function(xe){return f(xe)},line:function(xe,Pe){return new s(xe,Pe)},plan:function(xe,Pe){return new M(xe,Pe)},waypoint:function(xe,Pe,Ve){return new D(xe,Pe,Ve)},osrmv1:function(xe){return new S(xe)},localization:function(xe){return new re(xe)},formatter:function(xe){return new V(xe)},geocoderElement:function(xe,Pe,Ve,Ue){return new u.Routing.GeocoderElement(xe,Pe,Ve,Ue)},itineraryBuilder:function(xe){return new ae(xe)},mapbox:function(xe,Pe){return new H(xe,Pe)},errorControl:function(xe,Pe){return new Se(xe,Pe)},autocomplete:function(xe,Pe,Ve,Ue){return new j(xe,Pe,Ve,Ue)}},i.exports=u.Routing={Control:p,Itinerary:f,Line:s,OSRMv1:S,Plan:M,Waypoint:D,Autocomplete:j,Formatter:V,GeocoderElement:X,Localization:re,Formatter:V,ItineraryBuilder:ae,control:u.routing.control,itinerary:u.routing.itinerary,line:u.routing.line,plan:u.routing.plan,waypoint:u.routing.waypoint,osrmv1:u.routing.osrmv1,geocoderElement:u.routing.geocoderElement,mapbox:u.routing.mapbox,errorControl:u.routing.errorControl}}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./autocomplete":48,"./control":49,"./error-control":50,"./formatter":51,"./geocoder-element":52,"./itinerary":55,"./itinerary-builder":54,"./line":56,"./localization":57,"./mapbox":58,"./osrm-v1":59,"./plan":60,"./waypoint":61}],54:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.Class.extend({options:{containerClassName:""},initialize:function(p){u.setOptions(this,p)},createContainer:function(p){var f=u.DomUtil.create("table",(p||"")+" "+this.options.containerClassName),s=u.DomUtil.create("colgroup","",f);return u.DomUtil.create("col","leaflet-routing-instruction-icon",s),u.DomUtil.create("col","leaflet-routing-instruction-text",s),u.DomUtil.create("col","leaflet-routing-instruction-distance",s),f},createStepsContainer:function(){return u.DomUtil.create("tbody","")},createStep:function(p,f,s,S){var M=u.DomUtil.create("tr","",S),D,j;return j=u.DomUtil.create("td","",M),D=u.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+s,j),j.appendChild(D),j=u.DomUtil.create("td","",M),j.appendChild(document.createTextNode(p)),j=u.DomUtil.create("td","",M),j.appendChild(document.createTextNode(f)),M}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],55:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,p=r("./formatter"),f=r("./itinerary-builder");i.exports=u.Control.extend({includes:typeof u.Evented<"u"&&u.Evented.prototype||u.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",totalDistanceRoundingSensitivity:-1,show:!0,collapsible:void 0,collapseBtn:function(s){var S=u.DomUtil.create("span",s.options.collapseBtnClass);u.DomEvent.on(S,"click",s._toggle,s),s._container.insertBefore(S,s._container.firstChild)},collapseBtnClass:"leaflet-routing-collapse-btn"},initialize:function(s){u.setOptions(this,s),this._formatter=this.options.formatter||new p(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new f({containerClassName:this.options.itineraryClassName})},onAdd:function(s){var S=this.options.collapsible;return S=S||S===void 0&&s.getSize().x<=640,this._container=u.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide ")+(S?"leaflet-routing-collapsible ":"")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),u.DomEvent.disableClickPropagation(this._container),u.DomEvent.addListener(this._container,"mousewheel",function(M){u.DomEvent.stopPropagation(M)}),S&&this.options.collapseBtn(this),this._container},onRemove:function(){},createAlternativesContainer:function(){return u.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(s){var S,M,D;for(this._clearAlts(),this._routes=s,S=0;S<this._routes.length;S++)M=this._routes[S],D=this._createAlternative(M,S),this._altContainer.appendChild(D),this._altElements.push(D);return this._selectRoute({route:this._routes[0],alternatives:this._routes.slice(1)}),this},show:function(){u.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){u.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_toggle:function(){var s=u.DomUtil.hasClass(this._container,"leaflet-routing-container-hide");this[s?"show":"hide"]()},_createAlternative:function(s,S){var M=u.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(S>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),D=this.options.summaryTemplate,j=u.extend({name:s.name,distance:this._formatter.formatDistance(s.summary.totalDistance,this.options.totalDistanceRoundingSensitivity),time:this._formatter.formatTime(s.summary.totalTime)},s);return M.innerHTML=typeof D=="function"?D(j):u.Util.template(D,j),u.DomEvent.addListener(M,"click",this._onAltClicked,this),this.on("routeselected",this._selectAlt,this),M.appendChild(this._createItineraryContainer(s)),M},_clearAlts:function(){for(var s=this._altContainer;s&&s.firstChild;)s.removeChild(s.firstChild);this._altElements=[]},_createItineraryContainer:function(s){var S=this._itineraryBuilder.createContainer(),M=this._itineraryBuilder.createStepsContainer(),D,j,V,X,re,ae;for(S.appendChild(M),D=0;D<s.instructions.length;D++)j=s.instructions[D],re=this._formatter.formatInstruction(j,D),X=this._formatter.formatDistance(j.distance),ae=this._formatter.getIconName(j,D),V=this._itineraryBuilder.createStep(re,X,ae,M),j.index&&this._addRowListeners(V,s.coordinates[j.index]);return S},_addRowListeners:function(s,S){u.DomEvent.addListener(s,"mouseover",function(){this._marker=u.circleMarker(S,this.options.pointMarkerStyle).addTo(this._map)},this),u.DomEvent.addListener(s,"mouseout",function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)},this),u.DomEvent.addListener(s,"click",function(M){this._map.panTo(S),u.DomEvent.stopPropagation(M)},this)},_onAltClicked:function(s){for(var S=s.target||window.event.srcElement;!u.DomUtil.hasClass(S,"leaflet-routing-alt");)S=S.parentElement;var M=this._altElements.indexOf(S),D=this._routes.slice(),j=D.splice(M,1)[0];this.fire("routeselected",{route:j,alternatives:D})},_selectAlt:function(s){var S,M,D,j;if(S=this._altElements[s.route.routesIndex],u.DomUtil.hasClass(S,"leaflet-routing-alt-minimized"))for(M=0;M<this._altElements.length;M++)D=this._altElements[M],j=M===s.route.routesIndex?"removeClass":"addClass",u.DomUtil[j](D,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&u.DomUtil[j](D,this.options.minimizedClassName),M!==s.route.routesIndex&&(D.scrollTop=0);u.DomEvent.stop(s)},_selectRoute:function(s){this._marker&&(this._map.removeLayer(this._marker),delete this._marker),this.fire("routeselected",s)}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./formatter":51,"./itinerary-builder":54}],56:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.LayerGroup.extend({includes:typeof u.Evented<"u"&&u.Evented.prototype||u.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(p,f){u.setOptions(this,f),u.LayerGroup.prototype.initialize.call(this,f),this._route=p,this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(p.coordinates,this.options.styles,this.options.addWaypoints)},getBounds:function(){return u.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var p=this._route.inputWaypoints,f=[],s;for(s=0;s<p.length;s++)f.push(this._findClosestRoutePoint(p[s].latLng));return f},_findClosestRoutePoint:function(p){var f=Number.MAX_VALUE,s,S,M;for(S=this._route.coordinates.length-1;S>=0;S--)M=p.distanceTo(this._route.coordinates[S]),M<f&&(s=S,f=M);return s},_extendToWaypoints:function(){var p=this._route.inputWaypoints,f=this._getWaypointIndices(),s,S,M;for(s=0;s<p.length;s++)S=p[s].latLng,M=u.latLng(this._route.coordinates[f[s]]),S.distanceTo(M)>this.options.missingRouteTolerance&&this._addSegment([S,M],this.options.missingRouteStyles)},_addSegment:function(p,f,s){var S,M;for(S=0;S<f.length;S++)M=u.polyline(p,f[S]),this.addLayer(M),s&&M.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(p){for(var f=this._getWaypointIndices(),s=f.length-1;s>=0&&f[s]>p;)s--;return s},_onLineTouched:function(p){var f=this._findNearestWpBefore(this._findClosestRoutePoint(p.latlng));this.fire("linetouched",{afterIndex:f,latlng:p.latlng}),u.DomEvent.stop(p)},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],57:[function(r,i,l){(function(){var c={directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste",SlightRight:"leve giro a la derecha",Right:"derecha",SharpRight:"giro pronunciado a la derecha",SlightLeft:"leve giro a la izquierda",Left:"izquierda",SharpLeft:"giro pronunciado a la izquierda",Uturn:"media vuelta"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],TurnAround:["Dar vuelta"],WaypointReached:["Lleg a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"],Fork:["En el cruce gira a {modifier}"," hacia {road}"],Merge:["Incorprate {modifier}"," hacia {road}"],OnRamp:["Gira {modifier} en la salida"," hacia {road}"],OffRamp:["Toma la salida {modifier}"," hacia {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," hacia {road}"],Onto:"hacia {road}"},formatOrder:function(p){return p+""},ui:{startPlaceholder:"Inicio",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Destino"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}};L.Routing=L.Routing||{};var u=L.Class.extend({initialize:function(p){this._langs=L.Util.isArray(p)?p.slice():[p,"en"];for(var f=0,s=this._langs.length;f<s;f++){var S=/([A-Za-z]+)/.exec(this._langs[f])[1];if(!u[this._langs[f]])if(u[S])this._langs[f]=S;else throw new Error('No localization for language "'+this._langs[f]+'".')}},localize:function(p){var f,s,S;p=L.Util.isArray(p)?p:[p];for(var M=0,D=this._langs.length;M<D;M++){f=u[this._langs[M]];for(var j=0,V=p.length;f&&j<V;j++)s=p[j],S=f[s],f=S;if(S)return S}}});i.exports=L.extend(u,{en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest",SlightRight:"slight right",Right:"right",SharpRight:"sharp right",SlightLeft:"slight left",Left:"left",SharpLeft:"sharp left",Uturn:"Turn around"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"],TurnAround:["Turn around"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"],Fork:["At the fork, turn {modifier}"," onto {road}"],Merge:["Merge {modifier}"," onto {road}"],OnRamp:["Turn {modifier} on the ramp"," onto {road}"],OffRamp:["Take the ramp on the {modifier}"," onto {road}"],EndOfRoad:["Turn {modifier} at the end of the road"," onto {road}"],Onto:"onto {road}"},formatOrder:function(p){var f=p%10-1,s=["st","nd","rd"];return s[f]?p+s[f]:p+"th"},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"End"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"Sdosten",S:"Sden",SW:"Sdwesten",W:"Westen",NW:"Nordwesten",SlightRight:"leicht rechts",Right:"rechts",SharpRight:"scharf rechts",SlightLeft:"leicht links",Left:"links",SharpLeft:"scharf links",Uturn:"Wenden"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"],Fork:["An der Kreuzung {modifier}"," auf {road}"],Merge:["Fahren Sie {modifier} weiter"," auf {road}"],OnRamp:["Fahren Sie {modifier} auf die Auffahrt"," auf {road}"],OffRamp:["Nehmen Sie die Ausfahrt {modifier}"," auf {road}"],EndOfRoad:["Fahren Sie {modifier} am Ende der Strae"," auf {road}"],Onto:"auf {road}"},formatOrder:function(p){return p+"."},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Ziel"}},sv:{directions:{N:"norr",NE:"nordost",E:"st",SE:"sydost",S:"syd",SW:"sydvst",W:"vst",NW:"nordvst",SlightRight:"svagt hger",Right:"hger",SharpRight:"skarpt hger",SlightLeft:"svagt vnster",Left:"vnster",SharpLeft:"skarpt vnster",Uturn:"Vnd"},instructions:{Head:["k t {dir}"," till {road}"],Continue:["Fortstt {dir}"],SlightRight:["Svagt hger"," till {road}"],Right:["Svng hger"," till {road}"],SharpRight:["Skarpt hger"," till {road}"],TurnAround:["Vnd"],SharpLeft:["Skarpt vnster"," till {road}"],Left:["Svng vnster"," till {road}"],SlightLeft:["Svagt vnster"," till {road}"],WaypointReached:["Viapunkt ndd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans ml"],Fork:["Tag av {modifier}"," till {road}"],Merge:["Anslut {modifier} "," till {road}"],OnRamp:["Tag pfarten {modifier}"," till {road}"],OffRamp:["Tag avfarten {modifier}"," till {road}"],EndOfRoad:["Svng {modifier} vid vgens slut"," till {road}"],Onto:"till {road}"},formatOrder:function(p){return["frsta","andra","tredje","fjrde","femte","sjtte","sjunde","ttonde","nionde","tionde"][p-1]},ui:{startPlaceholder:"Frn",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Till"}},es:c,sp:c,nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(p){return p===1||p>=20?p+"ste":p+"de"},ui:{startPlaceholder:"Vertrekpunt",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Bestemming"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["Lgrement  droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Compltement  droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Compltement  gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["Lgrement  gauche"," sur {road}"],WaypointReached:["Point d'tape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(p){return p+""},ui:{startPlaceholder:"Dpart",viaPlaceholder:"Intermdiaire {viaNumber}",endPlaceholder:"Arrive"}},it:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ovest",W:"ovest",NW:"nord-ovest"},instructions:{Head:["Dritto verso {dir}"," su {road}"],Continue:["Continuare verso {dir}"," su {road}"],SlightRight:["Mantenere la destra"," su {road}"],Right:["A destra"," su {road}"],SharpRight:["Strettamente a destra"," su {road}"],TurnAround:["Fare inversione di marcia"],SharpLeft:["Strettamente a sinistra"," su {road}"],Left:["A sinistra"," sur {road}"],SlightLeft:["Mantenere la sinistra"," su {road}"],WaypointReached:["Punto di passaggio raggiunto"],Roundabout:["Alla rotonda, prendere la {exitStr} uscita"],DestinationReached:["Destinazione raggiunta"]},formatOrder:function(p){return p+""},ui:{startPlaceholder:"Partenza",viaPlaceholder:"Intermedia {viaNumber}",endPlaceholder:"Destinazione"}},pt:{directions:{N:"norte",NE:"nordeste",E:"leste",SE:"sudeste",S:"sul",SW:"sudoeste",W:"oeste",NW:"noroeste",SlightRight:"curva ligeira a direita",Right:"direita",SharpRight:"curva fechada a direita",SlightLeft:"ligeira a esquerda",Left:"esquerda",SharpLeft:"curva fechada a esquerda",Uturn:"Meia volta"},instructions:{Head:["Siga {dir}"," na {road}"],Continue:["Continue {dir}"," na {road}"],SlightRight:["Curva ligeira a direita"," na {road}"],Right:["Curva a direita"," na {road}"],SharpRight:["Curva fechada a direita"," na {road}"],TurnAround:["Retorne"],SharpLeft:["Curva fechada a esquerda"," na {road}"],Left:["Curva a esquerda"," na {road}"],SlightLeft:["Curva ligueira a esquerda"," na {road}"],WaypointReached:["Ponto de interesse atingido"],Roundabout:["Pegue a {exitStr} sada na rotatria"," na {road}"],DestinationReached:["Destino atingido"],Fork:["Na encruzilhada, vire a {modifier}"," na {road}"],Merge:["Entre  {modifier}"," na {road}"],OnRamp:["Vire {modifier} na rampa"," na {road}"],OffRamp:["Entre na rampa na {modifier}"," na {road}"],EndOfRoad:["Vire {modifier} no fim da rua"," na {road}"],Onto:"na {road}"},formatOrder:function(p){return p+""},ui:{startPlaceholder:"Origem",viaPlaceholder:"Intermdio {viaNumber}",endPlaceholder:"Destino"}},sk:{directions:{N:"sever",NE:"serverovchod",E:"vchod",SE:"juhovchod",S:"juh",SW:"juhozpad",W:"zpad",NW:"serverozpad"},instructions:{Head:["Mierte na {dir}"," na {road}"],Continue:["Pokraujte na {dir}"," na {road}"],SlightRight:["Mierne doprava"," na {road}"],Right:["Doprava"," na {road}"],SharpRight:["Prudko doprava"," na {road}"],TurnAround:["Otote sa"],SharpLeft:["Prudko doava"," na {road}"],Left:["Doava"," na {road}"],SlightLeft:["Mierne doava"," na {road}"],WaypointReached:["Ste v prejazdovom bode."],Roundabout:["Odbote na {exitStr} vjazde"," na {road}"],DestinationReached:["Prili ste do ciea."]},formatOrder:function(p){var f=p%10-1,s=[".",".","."];return s[f]?p+s[f]:p+"."},ui:{startPlaceholder:"Zaiatok",viaPlaceholder:"Cez {viaNumber}",endPlaceholder:"Koniec"}},el:{directions:{N:"",NE:"",E:"",SE:"",S:"",SW:"",W:"",NW:""},instructions:{Head:[" {dir}","  {road}"],Continue:[" {dir}","  {road}"],SlightRight:[" ","  {road}"],Right:["","  {road}"],SharpRight:["  ","  {road}"],TurnAround:[" "],SharpLeft:["  ","  {road}"],Left:["","  {road}"],SlightLeft:[" ","  {road}"],WaypointReached:["   "],Roundabout:["  {exitStr}    ","  {road}"],DestinationReached:["   "]},formatOrder:function(p){return p+""},ui:{startPlaceholder:"",viaPlaceholder:" {viaNumber}",endPlaceholder:""}},ca:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-oest",W:"oest",NW:"nord-oest",SlightRight:"lleu gir a la dreta",Right:"dreta",SharpRight:"gir pronunciat a la dreta",SlightLeft:"gir pronunciat a l'esquerra",Left:"esquerra",SharpLeft:"lleu gir a l'esquerra",Uturn:"mitja volta"},instructions:{Head:["Recte {dir}"," sobre {road}"],Continue:["Continuar {dir}"],TurnAround:["Donar la volta"],WaypointReached:["Ha arribat a un punt del cam"],Roundabout:["Agafar {exitStr} sortida a la rotonda"," a {road}"],DestinationReached:["Arribada al dest"],Fork:["A la crulla gira a la {modifier}"," cap a {road}"],Merge:["Incorpora't {modifier}"," a {road}"],OnRamp:["Gira {modifier} a la sortida"," cap a {road}"],OffRamp:["Pren la sortida {modifier}"," cap a {road}"],EndOfRoad:["Gira {modifier} al final de la carretera"," cap a {road}"],Onto:"cap a {road}"},formatOrder:function(p){return p+""},ui:{startPlaceholder:"Origen",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Dest"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"min",seconds:"s"}},ru:{directions:{N:"",NE:"",E:"",SE:"",S:"",SW:"",W:"",NW:"",SlightRight:" ",Right:"",SharpRight:" ",SlightLeft:" ",Left:"",SharpLeft:" ",Uturn:""},instructions:{Head:["   {dir}","  {road}"],Continue:["   {dir}","  {road}"],SlightRight:["  ","  {road}"],Right:["","  {road}"],SharpRight:["  ","  {road}"],TurnAround:[""],SharpLeft:["  ","  {road}"],Left:[" ","  {road}"],SlightLeft:["  ","  {road}"],WaypointReached:[" "],Roundabout:["{exitStr}   ","  {road}"],DestinationReached:[" "],Fork:["   {modifier}","  {road}"],Merge:[" {modifier}","  {road}"],OnRamp:[" {modifier}  ","  {road}"],OffRamp:["  {modifier}","  {road}"],EndOfRoad:[" {modifier}   ","  {road}"],Onto:" {road}"},formatOrder:function(p){return p+"-"},ui:{startPlaceholder:"",viaPlaceholder:" {viaNumber}",endPlaceholder:""},units:{meters:"",kilometers:"",yards:"",miles:"",hours:"",minutes:"",seconds:""}},pl:{directions:{N:"pnoc",NE:"pnocny wschd",E:"wschd",SE:"poudniowy wschd",S:"poudnie",SW:"poudniowy zachd",W:"zachd",NW:"pnocny zachd",SlightRight:"lekko w prawo",Right:"w prawo",SharpRight:"ostro w prawo",SlightLeft:"lekko w lewo",Left:"w lewo",SharpLeft:"ostro w lewo",Uturn:"zawr"},instructions:{Head:["Kieruj si na {dir}"," na {road}"],Continue:["Jed dalej przez {dir}"],TurnAround:["Zawr"],WaypointReached:["Punkt poredni"],Roundabout:["Wyjed {exitStr} zjazdem na rondzie"," na {road}"],DestinationReached:["Dojechano do miejsca docelowego"],Fork:["Na rozwidleniu {modifier}"," na {road}"],Merge:["Zjed {modifier}"," na {road}"],OnRamp:["Wjazd {modifier}"," na {road}"],OffRamp:["Zjazd {modifier}"," na {road}"],EndOfRoad:["Skr {modifier} na kocu drogi"," na {road}"],Onto:"na {road}"},formatOrder:function(p){return p+"."},ui:{startPlaceholder:"Pocztek",viaPlaceholder:"Przez {viaNumber}",endPlaceholder:"Koniec"},units:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"godz",minutes:"min",seconds:"s"}}})})()},{}],58:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,p=r("./osrm-v1");i.exports=p.extend({options:{serviceUrl:"https://api.mapbox.com/directions/v5",profile:"mapbox/driving",useHints:!1},initialize:function(f,s){u.Routing.OSRMv1.prototype.initialize.call(this,s),this.options.requestParameters=this.options.requestParameters||{},this.options.requestParameters.access_token=f}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./osrm-v1":59}],59:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,p=r("@mapbox/corslite"),f=r("@mapbox/polyline"),s=r("osrm-text-instructions")("v5"),S=r("./waypoint");i.exports=u.Class.extend({options:{serviceUrl:"https://router.project-osrm.org/route/v1",profile:"driving",timeout:30*1e3,routingOptions:{alternatives:!0,steps:!0},polylinePrecision:5,useHints:!0,suppressDemoServerWarning:!1,language:"en"},initialize:function(M){u.Util.setOptions(this,M),this._hints={locations:{}},!this.options.suppressDemoServerWarning&&this.options.serviceUrl.indexOf("//router.project-osrm.org")>=0&&console.warn(`You are using OSRM's demo server. Please note that it is **NOT SUITABLE FOR PRODUCTION USE**.
Refer to the demo server's usage policy: https://github.com/Project-OSRM/osrm-backend/wiki/Api-usage-policy

To change, set the serviceUrl option.

Please do not report issues with this server to neither Leaflet Routing Machine or OSRM - it's for
demo only, and will sometimes not be available, or work in unexpected ways.

Please set up your own OSRM server, or use a paid service provider for production.`)},route:function(M,D,j,V){var X=!1,re=[],ae,H,Se,xe,Pe;for(V=u.extend({},this.options.routingOptions,V),ae=this.buildRouteUrl(M,V),this.options.requestParameters&&(ae+=u.Util.getParamString(this.options.requestParameters,ae)),H=setTimeout(function(){X=!0,D.call(j||D,{status:-1,message:"OSRM request timed out."})},this.options.timeout),xe=0;xe<M.length;xe++)Se=M[xe],re.push(new S(Se.latLng,Se.name,Se.options));return Pe=p(ae,u.bind(function(Ve,Ue){var et,Je={};if(clearTimeout(H),X)Pe.abort();else{if(Ve)Je.message="HTTP request failed: "+Ve.type+(Ve.target&&Ve.target.status?" HTTP "+Ve.target.status+": "+Ve.target.statusText:""),Je.url=ae,Je.status=-1,Je.target=Ve;else try{et=JSON.parse(Ue.responseText);try{return this._routeDone(et,re,V,D,j)}catch(nt){Je.status=-3,Je.message=nt.toString()}}catch(nt){Je.status=-2,Je.message="Error parsing OSRM response: "+nt.toString()}D.call(j||D,Je)}},this))},requiresMoreDetail:function(M,D,j){if(!M.properties.isSimplified)return!1;var V=M.inputWaypoints,X;for(X=0;X<V.length;++X)if(!j.contains(V[X].latLng))return!0;return!1},_routeDone:function(M,D,j,V,X){var re=[],ae,H,Se;if(X=X||V,M.code!=="Ok"){V.call(X,{status:M.code});return}for(ae=this._toWaypoints(D,M.waypoints),H=0;H<M.routes.length;H++)Se=this._convertRoute(M.routes[H]),Se.inputWaypoints=D,Se.waypoints=ae,Se.properties={isSimplified:!j||!j.geometryOnly||j.simplifyGeometry},re.push(Se);this._saveHintData(M.waypoints,D),V.call(X,null,re)},_convertRoute:function(M){var D={name:"",coordinates:[],instructions:[],summary:{totalDistance:M.distance,totalTime:M.duration}},j=[],V=[],X=0,re=M.legs.length,ae=M.legs[0].steps.length>0,H,Se,xe,Pe,Ve,Ue,et,Je,nt;for(this.options.stepToText?nt=this.options.stepToText:nt=u.bind(s.compile,s,this.options.language),H=0;H<re;H++)for(xe=M.legs[H],j.push(xe.summary&&xe.summary.charAt(0).toUpperCase()+xe.summary.substring(1)),Se=0;Se<xe.steps.length;Se++)Pe=xe.steps[Se],Ve=this._decodePolyline(Pe.geometry),D.coordinates.push.apply(D.coordinates,Ve),Ue=this._maneuverToInstructionType(Pe.maneuver,H===re-1),et=this._maneuverToModifier(Pe.maneuver),Je=nt(Pe,{legCount:re,legIndex:H}),Ue&&((H==0&&Pe.maneuver.type=="depart"||Pe.maneuver.type=="arrive")&&V.push(X),D.instructions.push({type:Ue,distance:Pe.distance,time:Pe.duration,road:Pe.name,direction:this._bearingToDirection(Pe.maneuver.bearing_after),exit:Pe.maneuver.exit,index:X,mode:Pe.mode,modifier:et,text:Je})),X+=Ve.length;return D.name=j.join(", "),ae?D.waypointIndices=V:D.coordinates=this._decodePolyline(M.geometry),D},_bearingToDirection:function(M){var D=Math.round(M/45)%8;return["N","NE","E","SE","S","SW","W","NW"][D]},_maneuverToInstructionType:function(M,D){switch(M.type){case"new name":return"Continue";case"depart":return"Head";case"arrive":return D?"DestinationReached":"WaypointReached";case"roundabout":case"rotary":return"Roundabout";case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":return this._camelCase(M.type);default:return this._camelCase(M.modifier)}},_maneuverToModifier:function(M){var D=M.modifier;switch(M.type){case"merge":case"fork":case"on ramp":case"off ramp":case"end of road":D=this._leftOrRight(D)}return D&&this._camelCase(D)},_camelCase:function(M){for(var D=M.split(" "),j="",V=0,X=D.length;V<X;V++)j+=D[V].charAt(0).toUpperCase()+D[V].substring(1);return j},_leftOrRight:function(M){return M.indexOf("left")>=0?"Left":"Right"},_decodePolyline:function(M){var D=f.decode(M,this.options.polylinePrecision),j=new Array(D.length),V;for(V=D.length-1;V>=0;V--)j[V]=u.latLng(D[V]);return j},_toWaypoints:function(M,D){var j=[],V,X;for(V=0;V<D.length;V++)X=D[V].location,j.push(new S(u.latLng(X[1],X[0]),M[V].name,M[V].options));return j},buildRouteUrl:function(M,D){for(var j=[],V=[],X,re,ae,H=!0,Se=0;Se<M.length;Se++)X=M[Se],re=X.latLng,j.push(re.lng+","+re.lat),V.push(this._hints.locations[this._locationKey(re)]||"");return ae=!0,this.options.serviceUrl+"/"+this.options.profile+"/"+j.join(";")+"?"+(D.geometryOnly?D.simplifyGeometry?"":"overview=full":"overview=false")+"&alternatives="+H.toString()+"&steps="+ae.toString()+(this.options.useHints?"&hints="+V.join(";"):"")+(D.allowUTurns?"&continue_straight="+!D.allowUTurns:"")},_locationKey:function(M){return M.lat+","+M.lng},_saveHintData:function(M,D){var j;this._hints={locations:{}};for(var V=M.length-1;V>=0;V--)j=D[V].latLng,this._hints.locations[this._locationKey(j)]=M[V].hint}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./waypoint":61,"@mapbox/corslite":1,"@mapbox/polyline":2,"osrm-text-instructions":3}],60:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null,p=r("./geocoder-element"),f=r("./waypoint");i.exports=(u.Layer||u.Class).extend({includes:typeof u.Evented<"u"&&u.Evented.prototype||u.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,reverseWaypoints:!1,addButtonClassName:"",language:"en",createGeocoderElement:function(s,S,M,D){return new p(s,S,M,D)},createMarker:function(s,S){var M={draggable:this.draggableWaypoints},D=u.marker(S.latLng,M);return D},geocodersClassName:""},initialize:function(s,S){u.Util.setOptions(this,S),this._waypoints=[],this.setWaypoints(s)},isReady:function(){var s;for(s=0;s<this._waypoints.length;s++)if(!this._waypoints[s].latLng)return!1;return!0},getWaypoints:function(){var s,S=[];for(s=0;s<this._waypoints.length;s++)S.push(this._waypoints[s]);return S},setWaypoints:function(s){var S=[0,this._waypoints.length].concat(s);return this.spliceWaypoints.apply(this,S),this},spliceWaypoints:function(){var s=[arguments[0],arguments[1]],S;for(S=2;S<arguments.length;S++)s.push(arguments[S]&&arguments[S].hasOwnProperty("latLng")?arguments[S]:new f(arguments[S]));for([].splice.apply(this._waypoints,s);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null);this._updateMarkers(),this._fireChanged.apply(this,s)},onAdd:function(s){this._map=s,this._updateMarkers()},onRemove:function(){var s;if(this._removeMarkers(),this._newWp)for(s=0;s<this._newWp.lines.length;s++)this._map.removeLayer(this._newWp.lines[s]);delete this._map},createGeocoders:function(){var s=u.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),S=this._waypoints,M,D;return this._geocoderContainer=s,this._geocoderElems=[],this.options.addWaypoints&&(M=u.DomUtil.create("button","leaflet-routing-add-waypoint "+this.options.addButtonClassName,s),M.setAttribute("type","button"),u.DomEvent.addListener(M,"click",function(){this.spliceWaypoints(S.length,0,null)},this)),this.options.reverseWaypoints&&(D=u.DomUtil.create("button","leaflet-routing-reverse-waypoints",s),D.setAttribute("type","button"),u.DomEvent.addListener(D,"click",function(){this._waypoints.reverse(),this.setWaypoints(this._waypoints)},this)),this._updateGeocoders(),this.on("waypointsspliced",this._updateGeocoders),s},_createGeocoder:function(s){var S=this.options.createGeocoderElement(this._waypoints[s],s,this._waypoints.length,this.options);return S.on("delete",function(){s>0||this._waypoints.length>2?this.spliceWaypoints(s,1):this.spliceWaypoints(s,1,new f)},this).on("geocoded",function(M){this._updateMarkers(),this._fireChanged(),this._focusGeocoder(s+1),this.fire("waypointgeocoded",{waypointIndex:s,waypoint:M.waypoint})},this).on("reversegeocoded",function(M){this.fire("waypointgeocoded",{waypointIndex:s,waypoint:M.waypoint})},this),S},_updateGeocoders:function(){var s=[],S,M;for(S=0;S<this._geocoderElems.length;S++)this._geocoderContainer.removeChild(this._geocoderElems[S].getContainer());for(S=this._waypoints.length-1;S>=0;S--)M=this._createGeocoder(S),this._geocoderContainer.insertBefore(M.getContainer(),this._geocoderContainer.firstChild),s.push(M);this._geocoderElems=s.reverse()},_removeMarkers:function(){var s;if(this._markers)for(s=0;s<this._markers.length;s++)this._markers[s]&&this._map.removeLayer(this._markers[s]);this._markers=[]},_updateMarkers:function(){var s,S;if(this._map)for(this._removeMarkers(),s=0;s<this._waypoints.length;s++)this._waypoints[s].latLng?(S=this.options.createMarker(s,this._waypoints[s],this._waypoints.length),S&&(S.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(S,s))):S=null,this._markers.push(S)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(s,S,M){var D=function(H){return M?H.latlng:H.target.getLatLng()},j=u.bind(function(H){this.fire("waypointdragstart",{index:S,latlng:D(H)})},this),V=u.bind(function(H){this._waypoints[S].latLng=D(H),this.fire("waypointdrag",{index:S,latlng:D(H)})},this),X=u.bind(function(H){this._waypoints[S].latLng=D(H),this._waypoints[S].name="",this._geocoderElems&&this._geocoderElems[S].update(!0),this.fire("waypointdragend",{index:S,latlng:D(H)}),this._fireChanged()},this),re,ae;M?(re=u.bind(function(H){this._markers[S].setLatLng(H.latlng),V(H)},this),ae=u.bind(function(H){this._map.dragging.enable(),this._map.off("mouseup",ae),this._map.off("mousemove",re),X(H)},this),this._map.dragging.disable(),this._map.on("mousemove",re),this._map.on("mouseup",ae),j({latlng:this._waypoints[S].latLng})):(s.on("dragstart",j),s.on("drag",V),s.on("dragend",X))},dragNewWaypoint:function(s){var S=s.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(S,0,s.latlng),this._hookWaypointEvents(this._markers[S],S,!0)):this._dragNewWaypoint(S,s.latlng)},_dragNewWaypoint:function(s,S){var M=new f(S),D=this._waypoints[s-1],j=this._waypoints[s],V=this.options.createMarker(s,M,this._waypoints.length+1),X=[],re=this._map.dragging.enabled(),ae=u.bind(function(xe){var Pe,Ve;for(V&&V.setLatLng(xe.latlng),Pe=0;Pe<X.length;Pe++)Ve=X[Pe].getLatLngs(),Ve.splice(1,1,xe.latlng),X[Pe].setLatLngs(Ve);u.DomEvent.stop(xe)},this),H=u.bind(function(xe){var Pe;for(V&&this._map.removeLayer(V),Pe=0;Pe<X.length;Pe++)this._map.removeLayer(X[Pe]);this._map.off("mousemove",ae),this._map.off("mouseup",H),this.spliceWaypoints(s,0,xe.latlng),re&&this._map.dragging.enable(),u.DomEvent.stop(xe)},this),Se;for(V&&V.addTo(this._map),Se=0;Se<this.options.dragStyles.length;Se++)X.push(u.polyline([D.latLng,S,j.latLng],this.options.dragStyles[Se]).addTo(this._map));re&&this._map.dragging.disable(),this._map.on("mousemove",ae),this._map.on("mouseup",H)},_focusGeocoder:function(s){this._geocoderElems[s]?this._geocoderElems[s].focus():document.activeElement.blur()}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{"./geocoder-element":52,"./waypoint":61}],61:[function(r,i,l){(function(c){(function(){var u=typeof window<"u"?window.L:typeof c<"u"?c.L:null;i.exports=u.Class.extend({options:{allowUTurn:!1},initialize:function(p,f,s){u.Util.setOptions(this,s),this.latLng=u.latLng(p),this.name=f}})})()}).call(this,typeof Hi<"u"?Hi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[53])),Ky}Sk();function ic(r){return r+.5|0}const cl=(r,i,l)=>Math.max(Math.min(r,l),i);function Od(r){return cl(ic(r*2.55),0,255)}function gl(r){return cl(ic(r*255),0,255)}function Eo(r){return cl(ic(r/2.55)/100,0,1)}function Xy(r){return cl(ic(r*100),0,100)}const Br={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wm=[..."0123456789ABCDEF"],Tk=r=>wm[r&15],Pk=r=>wm[(r&240)>>4]+wm[r&15],ef=r=>(r&240)>>4===(r&15),Mk=r=>ef(r.r)&&ef(r.g)&&ef(r.b)&&ef(r.a);function Ck(r){var i=r.length,l;return r[0]==="#"&&(i===4||i===5?l={r:255&Br[r[1]]*17,g:255&Br[r[2]]*17,b:255&Br[r[3]]*17,a:i===5?Br[r[4]]*17:255}:(i===7||i===9)&&(l={r:Br[r[1]]<<4|Br[r[2]],g:Br[r[3]]<<4|Br[r[4]],b:Br[r[5]]<<4|Br[r[6]],a:i===9?Br[r[7]]<<4|Br[r[8]]:255})),l}const Lk=(r,i)=>r<255?i(r):"";function Ek(r){var i=Mk(r)?Tk:Pk;return r?"#"+i(r.r)+i(r.g)+i(r.b)+Lk(r.a,i):void 0}const Ak=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Fx(r,i,l){const c=i*Math.min(l,1-l),u=(p,f=(p+r/30)%12)=>l-c*Math.max(Math.min(f-3,9-f,1),-1);return[u(0),u(8),u(4)]}function Ik(r,i,l){const c=(u,p=(u+r/60)%6)=>l-l*i*Math.max(Math.min(p,4-p,1),0);return[c(5),c(3),c(1)]}function Dk(r,i,l){const c=Fx(r,1,.5);let u;for(i+l>1&&(u=1/(i+l),i*=u,l*=u),u=0;u<3;u++)c[u]*=1-i-l,c[u]+=i;return c}function zk(r,i,l,c,u){return r===u?(i-l)/c+(i<l?6:0):i===u?(l-r)/c+2:(r-i)/c+4}function Ym(r){const l=r.r/255,c=r.g/255,u=r.b/255,p=Math.max(l,c,u),f=Math.min(l,c,u),s=(p+f)/2;let S,M,D;return p!==f&&(D=p-f,M=s>.5?D/(2-p-f):D/(p+f),S=zk(l,c,u,D,p),S=S*60+.5),[S|0,M||0,s]}function Xm(r,i,l,c){return(Array.isArray(i)?r(i[0],i[1],i[2]):r(i,l,c)).map(gl)}function Jm(r,i,l){return Xm(Fx,r,i,l)}function Rk(r,i,l){return Xm(Dk,r,i,l)}function Fk(r,i,l){return Xm(Ik,r,i,l)}function Ox(r){return(r%360+360)%360}function Ok(r){const i=Ak.exec(r);let l=255,c;if(!i)return;i[5]!==c&&(l=i[6]?Od(+i[5]):gl(+i[5]));const u=Ox(+i[2]),p=+i[3]/100,f=+i[4]/100;return i[1]==="hwb"?c=Rk(u,p,f):i[1]==="hsv"?c=Fk(u,p,f):c=Jm(u,p,f),{r:c[0],g:c[1],b:c[2],a:l}}function jk(r,i){var l=Ym(r);l[0]=Ox(l[0]+i),l=Jm(l),r.r=l[0],r.g=l[1],r.b=l[2]}function Bk(r){if(!r)return;const i=Ym(r),l=i[0],c=Xy(i[1]),u=Xy(i[2]);return r.a<255?`hsla(${l}, ${c}%, ${u}%, ${Eo(r.a)})`:`hsl(${l}, ${c}%, ${u}%)`}const Jy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Qy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $k(){const r={},i=Object.keys(Qy),l=Object.keys(Jy);let c,u,p,f,s;for(c=0;c<i.length;c++){for(f=s=i[c],u=0;u<l.length;u++)p=l[u],s=s.replace(p,Jy[p]);p=parseInt(Qy[f],16),r[s]=[p>>16&255,p>>8&255,p&255]}return r}let tf;function Vk(r){tf||(tf=$k(),tf.transparent=[0,0,0,0]);const i=tf[r.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:i.length===4?i[3]:255}}const Nk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Uk(r){const i=Nk.exec(r);let l=255,c,u,p;if(i){if(i[7]!==c){const f=+i[7];l=i[8]?Od(f):cl(f*255,0,255)}return c=+i[1],u=+i[3],p=+i[5],c=255&(i[2]?Od(c):cl(c,0,255)),u=255&(i[4]?Od(u):cl(u,0,255)),p=255&(i[6]?Od(p):cl(p,0,255)),{r:c,g:u,b:p,a:l}}}function Gk(r){return r&&(r.a<255?`rgba(${r.r}, ${r.g}, ${r.b}, ${Eo(r.a)})`:`rgb(${r.r}, ${r.g}, ${r.b})`)}const nm=r=>r<=.0031308?r*12.92:Math.pow(r,1/2.4)*1.055-.055,wh=r=>r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4);function qk(r,i,l){const c=wh(Eo(r.r)),u=wh(Eo(r.g)),p=wh(Eo(r.b));return{r:gl(nm(c+l*(wh(Eo(i.r))-c))),g:gl(nm(u+l*(wh(Eo(i.g))-u))),b:gl(nm(p+l*(wh(Eo(i.b))-p))),a:r.a+l*(i.a-r.a)}}function nf(r,i,l){if(r){let c=Ym(r);c[i]=Math.max(0,Math.min(c[i]+c[i]*l,i===0?360:1)),c=Jm(c),r.r=c[0],r.g=c[1],r.b=c[2]}}function jx(r,i){return r&&Object.assign(i||{},r)}function ev(r){var i={r:0,g:0,b:0,a:255};return Array.isArray(r)?r.length>=3&&(i={r:r[0],g:r[1],b:r[2],a:255},r.length>3&&(i.a=gl(r[3]))):(i=jx(r,{r:0,g:0,b:0,a:1}),i.a=gl(i.a)),i}function Zk(r){return r.charAt(0)==="r"?Uk(r):Ok(r)}class Hd{constructor(i){if(i instanceof Hd)return i;const l=typeof i;let c;l==="object"?c=ev(i):l==="string"&&(c=Ck(i)||Vk(i)||Zk(i)),this._rgb=c,this._valid=!!c}get valid(){return this._valid}get rgb(){var i=jx(this._rgb);return i&&(i.a=Eo(i.a)),i}set rgb(i){this._rgb=ev(i)}rgbString(){return this._valid?Gk(this._rgb):void 0}hexString(){return this._valid?Ek(this._rgb):void 0}hslString(){return this._valid?Bk(this._rgb):void 0}mix(i,l){if(i){const c=this.rgb,u=i.rgb;let p;const f=l===p?.5:l,s=2*f-1,S=c.a-u.a,M=((s*S===-1?s:(s+S)/(1+s*S))+1)/2;p=1-M,c.r=255&M*c.r+p*u.r+.5,c.g=255&M*c.g+p*u.g+.5,c.b=255&M*c.b+p*u.b+.5,c.a=f*c.a+(1-f)*u.a,this.rgb=c}return this}interpolate(i,l){return i&&(this._rgb=qk(this._rgb,i._rgb,l)),this}clone(){return new Hd(this.rgb)}alpha(i){return this._rgb.a=gl(i),this}clearer(i){const l=this._rgb;return l.a*=1-i,this}greyscale(){const i=this._rgb,l=ic(i.r*.3+i.g*.59+i.b*.11);return i.r=i.g=i.b=l,this}opaquer(i){const l=this._rgb;return l.a*=1+i,this}negate(){const i=this._rgb;return i.r=255-i.r,i.g=255-i.g,i.b=255-i.b,this}lighten(i){return nf(this._rgb,2,i),this}darken(i){return nf(this._rgb,2,-i),this}saturate(i){return nf(this._rgb,1,i),this}desaturate(i){return nf(this._rgb,1,-i),this}rotate(i){return jk(this._rgb,i),this}}function Mo(){}const Wk=(()=>{let r=0;return()=>r++})();function ai(r){return r==null}function un(r){if(Array.isArray&&Array.isArray(r))return!0;const i=Object.prototype.toString.call(r);return i.slice(0,7)==="[object"&&i.slice(-6)==="Array]"}function ri(r){return r!==null&&Object.prototype.toString.call(r)==="[object Object]"}function vn(r){return(typeof r=="number"||r instanceof Number)&&isFinite(+r)}function Sr(r,i){return vn(r)?r:i}function Gt(r,i){return typeof r>"u"?i:r}const Hk=(r,i)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100:+r/i,Bx=(r,i)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100*i:+r;function Ki(r,i,l){if(r&&typeof r.call=="function")return r.apply(l,i)}function Ai(r,i,l,c){let u,p,f;if(un(r))for(p=r.length,u=0;u<p;u++)i.call(l,r[u],u);else if(ri(r))for(f=Object.keys(r),p=f.length,u=0;u<p;u++)i.call(l,r[f[u]],f[u])}function Sf(r,i){let l,c,u,p;if(!r||!i||r.length!==i.length)return!1;for(l=0,c=r.length;l<c;++l)if(u=r[l],p=i[l],u.datasetIndex!==p.datasetIndex||u.index!==p.index)return!1;return!0}function Tf(r){if(un(r))return r.map(Tf);if(ri(r)){const i=Object.create(null),l=Object.keys(r),c=l.length;let u=0;for(;u<c;++u)i[l[u]]=Tf(r[l[u]]);return i}return r}function $x(r){return["__proto__","prototype","constructor"].indexOf(r)===-1}function Kk(r,i,l,c){if(!$x(r))return;const u=i[r],p=l[r];ri(u)&&ri(p)?Kd(u,p,c):i[r]=Tf(p)}function Kd(r,i,l){const c=un(i)?i:[i],u=c.length;if(!ri(r))return r;l=l||{};const p=l.merger||Kk;let f;for(let s=0;s<u;++s){if(f=c[s],!ri(f))continue;const S=Object.keys(f);for(let M=0,D=S.length;M<D;++M)p(S[M],r,f,l)}return r}function Nd(r,i){return Kd(r,i,{merger:Yk})}function Yk(r,i,l){if(!$x(r))return;const c=i[r],u=l[r];ri(c)&&ri(u)?Nd(c,u):Object.prototype.hasOwnProperty.call(i,r)||(i[r]=Tf(u))}const tv={"":r=>r,x:r=>r.x,y:r=>r.y};function Xk(r){const i=r.split("."),l=[];let c="";for(const u of i)c+=u,c.endsWith("\\")?c=c.slice(0,-1)+".":(l.push(c),c="");return l}function Jk(r){const i=Xk(r);return l=>{for(const c of i){if(c==="")break;l=l&&l[c]}return l}}function _l(r,i){return(tv[i]||(tv[i]=Jk(i)))(r)}function Qm(r){return r.charAt(0).toUpperCase()+r.slice(1)}const Yd=r=>typeof r<"u",yl=r=>typeof r=="function",iv=(r,i)=>{if(r.size!==i.size)return!1;for(const l of r)if(!i.has(l))return!1;return!0};function Qk(r){return r.type==="mouseup"||r.type==="click"||r.type==="contextmenu"}const bi=Math.PI,nn=2*bi,eS=nn+bi,Pf=Number.POSITIVE_INFINITY,tS=bi/180,Mn=bi/2,nu=bi/4,nv=bi*2/3,fl=Math.log10,Ys=Math.sign;function Ud(r,i,l){return Math.abs(r-i)<l}function av(r){const i=Math.round(r);r=Ud(r,i,r/1e3)?i:r;const l=Math.pow(10,Math.floor(fl(r))),c=r/l;return(c<=1?1:c<=2?2:c<=5?5:10)*l}function iS(r){const i=[],l=Math.sqrt(r);let c;for(c=1;c<l;c++)r%c===0&&(i.push(c),i.push(r/c));return l===(l|0)&&i.push(l),i.sort((u,p)=>u-p).pop(),i}function nS(r){return typeof r=="symbol"||typeof r=="object"&&r!==null&&!(Symbol.toPrimitive in r||"toString"in r||"valueOf"in r)}function Th(r){return!nS(r)&&!isNaN(parseFloat(r))&&isFinite(r)}function aS(r,i){const l=Math.round(r);return l-i<=r&&l+i>=r}function Vx(r,i,l){let c,u,p;for(c=0,u=r.length;c<u;c++)p=r[c][l],isNaN(p)||(i.min=Math.min(i.min,p),i.max=Math.max(i.max,p))}function cs(r){return r*(bi/180)}function eg(r){return r*(180/bi)}function rv(r){if(!vn(r))return;let i=1,l=0;for(;Math.round(r*i)/i!==r;)i*=10,l++;return l}function Nx(r,i){const l=i.x-r.x,c=i.y-r.y,u=Math.sqrt(l*l+c*c);let p=Math.atan2(c,l);return p<-.5*bi&&(p+=nn),{angle:p,distance:u}}function km(r,i){return Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2))}function rS(r,i){return(r-i+eS)%nn-bi}function Sa(r){return(r%nn+nn)%nn}function Xd(r,i,l,c){const u=Sa(r),p=Sa(i),f=Sa(l),s=Sa(p-u),S=Sa(f-u),M=Sa(u-p),D=Sa(u-f);return u===p||u===f||c&&p===f||s>S&&M<D}function sa(r,i,l){return Math.max(i,Math.min(l,r))}function sS(r){return sa(r,-32768,32767)}function Ao(r,i,l,c=1e-6){return r>=Math.min(i,l)-c&&r<=Math.max(i,l)+c}function tg(r,i,l){l=l||(f=>r[f]<i);let c=r.length-1,u=0,p;for(;c-u>1;)p=u+c>>1,l(p)?u=p:c=p;return{lo:u,hi:c}}const Io=(r,i,l,c)=>tg(r,l,c?u=>{const p=r[u][i];return p<l||p===l&&r[u+1][i]===l}:u=>r[u][i]<l),oS=(r,i,l)=>tg(r,l,c=>r[c][i]>=l);function lS(r,i,l){let c=0,u=r.length;for(;c<u&&r[c]<i;)c++;for(;u>c&&r[u-1]>l;)u--;return c>0||u<r.length?r.slice(c,u):r}const Ux=["push","pop","shift","splice","unshift"];function uS(r,i){if(r._chartjs){r._chartjs.listeners.push(i);return}Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Ux.forEach(l=>{const c="_onData"+Qm(l),u=r[l];Object.defineProperty(r,l,{configurable:!0,enumerable:!1,value(...p){const f=u.apply(this,p);return r._chartjs.listeners.forEach(s=>{typeof s[c]=="function"&&s[c](...p)}),f}})})}function sv(r,i){const l=r._chartjs;if(!l)return;const c=l.listeners,u=c.indexOf(i);u!==-1&&c.splice(u,1),!(c.length>0)&&(Ux.forEach(p=>{delete r[p]}),delete r._chartjs)}function Gx(r){const i=new Set(r);return i.size===r.length?r:Array.from(i)}const qx=(function(){return typeof window>"u"?function(r){return r()}:window.requestAnimationFrame})();function Zx(r,i){let l=[],c=!1;return function(...u){l=u,c||(c=!0,qx.call(window,()=>{c=!1,r.apply(i,l)}))}}function hS(r,i){let l;return function(...c){return i?(clearTimeout(l),l=setTimeout(r,i,c)):r.apply(this,c),i}}const ig=r=>r==="start"?"left":r==="end"?"right":"center",ka=(r,i,l)=>r==="start"?i:r==="end"?l:(i+l)/2,dS=(r,i,l,c)=>r===(c?"left":"right")?l:r==="center"?(i+l)/2:i;function Wx(r,i,l){const c=i.length;let u=0,p=c;if(r._sorted){const{iScale:f,vScale:s,_parsed:S}=r,M=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null,D=f.axis,{min:j,max:V,minDefined:X,maxDefined:re}=f.getUserBounds();if(X){if(u=Math.min(Io(S,D,j).lo,l?c:Io(i,D,f.getPixelForValue(j)).lo),M){const ae=S.slice(0,u+1).reverse().findIndex(H=>!ai(H[s.axis]));u-=Math.max(0,ae)}u=sa(u,0,c-1)}if(re){let ae=Math.max(Io(S,f.axis,V,!0).hi+1,l?0:Io(i,D,f.getPixelForValue(V),!0).hi+1);if(M){const H=S.slice(ae-1).findIndex(Se=>!ai(Se[s.axis]));ae+=Math.max(0,H)}p=sa(ae,u,c)-u}else p=c-u}return{start:u,count:p}}function Hx(r){const{xScale:i,yScale:l,_scaleRanges:c}=r,u={xmin:i.min,xmax:i.max,ymin:l.min,ymax:l.max};if(!c)return r._scaleRanges=u,!0;const p=c.xmin!==i.min||c.xmax!==i.max||c.ymin!==l.min||c.ymax!==l.max;return Object.assign(c,u),p}const af=r=>r===0||r===1,ov=(r,i,l)=>-(Math.pow(2,10*(r-=1))*Math.sin((r-i)*nn/l)),lv=(r,i,l)=>Math.pow(2,-10*r)*Math.sin((r-i)*nn/l)+1,Gd={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>-r*(r-2),easeInOutQuad:r=>(r/=.5)<1?.5*r*r:-.5*(--r*(r-2)-1),easeInCubic:r=>r*r*r,easeOutCubic:r=>(r-=1)*r*r+1,easeInOutCubic:r=>(r/=.5)<1?.5*r*r*r:.5*((r-=2)*r*r+2),easeInQuart:r=>r*r*r*r,easeOutQuart:r=>-((r-=1)*r*r*r-1),easeInOutQuart:r=>(r/=.5)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2),easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>(r-=1)*r*r*r*r+1,easeInOutQuint:r=>(r/=.5)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2),easeInSine:r=>-Math.cos(r*Mn)+1,easeOutSine:r=>Math.sin(r*Mn),easeInOutSine:r=>-.5*(Math.cos(bi*r)-1),easeInExpo:r=>r===0?0:Math.pow(2,10*(r-1)),easeOutExpo:r=>r===1?1:-Math.pow(2,-10*r)+1,easeInOutExpo:r=>af(r)?r:r<.5?.5*Math.pow(2,10*(r*2-1)):.5*(-Math.pow(2,-10*(r*2-1))+2),easeInCirc:r=>r>=1?r:-(Math.sqrt(1-r*r)-1),easeOutCirc:r=>Math.sqrt(1-(r-=1)*r),easeInOutCirc:r=>(r/=.5)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1),easeInElastic:r=>af(r)?r:ov(r,.075,.3),easeOutElastic:r=>af(r)?r:lv(r,.075,.3),easeInOutElastic(r){return af(r)?r:r<.5?.5*ov(r*2,.1125,.45):.5+.5*lv(r*2-1,.1125,.45)},easeInBack(r){return r*r*((1.70158+1)*r-1.70158)},easeOutBack(r){return(r-=1)*r*((1.70158+1)*r+1.70158)+1},easeInOutBack(r){let i=1.70158;return(r/=.5)<1?.5*(r*r*(((i*=1.525)+1)*r-i)):.5*((r-=2)*r*(((i*=1.525)+1)*r+i)+2)},easeInBounce:r=>1-Gd.easeOutBounce(1-r),easeOutBounce(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},easeInOutBounce:r=>r<.5?Gd.easeInBounce(r*2)*.5:Gd.easeOutBounce(r*2-1)*.5+.5};function ng(r){if(r&&typeof r=="object"){const i=r.toString();return i==="[object CanvasPattern]"||i==="[object CanvasGradient]"}return!1}function uv(r){return ng(r)?r:new Hd(r)}function am(r){return ng(r)?r:new Hd(r).saturate(.5).darken(.1).hexString()}const cS=["x","y","borderWidth","radius","tension"],fS=["color","borderColor","backgroundColor"];function pS(r){r.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),r.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>i!=="onProgress"&&i!=="onComplete"&&i!=="fn"}),r.set("animations",{colors:{type:"color",properties:fS},numbers:{type:"number",properties:cS}}),r.describe("animations",{_fallback:"animation"}),r.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>i|0}}}})}function mS(r){r.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const hv=new Map;function gS(r,i){i=i||{};const l=r+JSON.stringify(i);let c=hv.get(l);return c||(c=new Intl.NumberFormat(r,i),hv.set(l,c)),c}function nc(r,i,l){return gS(i,l).format(r)}const Kx={values(r){return un(r)?r:""+r},numeric(r,i,l){if(r===0)return"0";const c=this.chart.options.locale;let u,p=r;if(l.length>1){const M=Math.max(Math.abs(l[0].value),Math.abs(l[l.length-1].value));(M<1e-4||M>1e15)&&(u="scientific"),p=_S(r,l)}const f=fl(Math.abs(p)),s=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),S={notation:u,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(S,this.options.ticks.format),nc(r,c,S)},logarithmic(r,i,l){if(r===0)return"0";const c=l[i].significand||r/Math.pow(10,Math.floor(fl(r)));return[1,2,3,5,10,15].includes(c)||i>.8*l.length?Kx.numeric.call(this,r,i,l):""}};function _S(r,i){let l=i.length>3?i[2].value-i[1].value:i[1].value-i[0].value;return Math.abs(l)>=1&&r!==Math.floor(r)&&(l=r-Math.floor(r)),l}var Ff={formatters:Kx};function yS(r){r.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,l)=>l.lineWidth,tickColor:(i,l)=>l.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ff.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),r.route("scale.ticks","color","","color"),r.route("scale.grid","color","","borderColor"),r.route("scale.border","color","","borderColor"),r.route("scale.title","color","","color"),r.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&i!=="callback"&&i!=="parser",_indexable:i=>i!=="borderDash"&&i!=="tickBorderDash"&&i!=="dash"}),r.describe("scales",{_fallback:"scale"}),r.describe("scale.ticks",{_scriptable:i=>i!=="backdropPadding"&&i!=="callback",_indexable:i=>i!=="backdropPadding"})}const _u=Object.create(null),Sm=Object.create(null);function qd(r,i){if(!i)return r;const l=i.split(".");for(let c=0,u=l.length;c<u;++c){const p=l[c];r=r[p]||(r[p]=Object.create(null))}return r}function rm(r,i,l){return typeof i=="string"?Kd(qd(r,i),l):Kd(qd(r,""),i)}class vS{constructor(i,l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=c=>c.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(c,u)=>am(u.backgroundColor),this.hoverBorderColor=(c,u)=>am(u.borderColor),this.hoverColor=(c,u)=>am(u.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(i),this.apply(l)}set(i,l){return rm(this,i,l)}get(i){return qd(this,i)}describe(i,l){return rm(Sm,i,l)}override(i,l){return rm(_u,i,l)}route(i,l,c,u){const p=qd(this,i),f=qd(this,c),s="_"+l;Object.defineProperties(p,{[s]:{value:p[l],writable:!0},[l]:{enumerable:!0,get(){const S=this[s],M=f[u];return ri(S)?Object.assign({},M,S):Gt(S,M)},set(S){this[s]=S}}})}apply(i){i.forEach(l=>l(this))}}var hn=new vS({_scriptable:r=>!r.startsWith("on"),_indexable:r=>r!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pS,mS,yS]);function xS(r){return!r||ai(r.size)||ai(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family}function Mf(r,i,l,c,u){let p=i[u];return p||(p=i[u]=r.measureText(u).width,l.push(u)),p>c&&(c=p),c}function bS(r,i,l,c){c=c||{};let u=c.data=c.data||{},p=c.garbageCollect=c.garbageCollect||[];c.font!==i&&(u=c.data={},p=c.garbageCollect=[],c.font=i),r.save(),r.font=i;let f=0;const s=l.length;let S,M,D,j,V;for(S=0;S<s;S++)if(j=l[S],j!=null&&!un(j))f=Mf(r,u,p,f,j);else if(un(j))for(M=0,D=j.length;M<D;M++)V=j[M],V!=null&&!un(V)&&(f=Mf(r,u,p,f,V));r.restore();const X=p.length/2;if(X>l.length){for(S=0;S<X;S++)delete u[p[S]];p.splice(0,X)}return f}function au(r,i,l){const c=r.currentDevicePixelRatio,u=l!==0?Math.max(l/2,.5):0;return Math.round((i-u)*c)/c+u}function dv(r,i){!i&&!r||(i=i||r.getContext("2d"),i.save(),i.resetTransform(),i.clearRect(0,0,r.width,r.height),i.restore())}function Tm(r,i,l,c){Yx(r,i,l,c,null)}function Yx(r,i,l,c,u){let p,f,s,S,M,D,j,V;const X=i.pointStyle,re=i.rotation,ae=i.radius;let H=(re||0)*tS;if(X&&typeof X=="object"&&(p=X.toString(),p==="[object HTMLImageElement]"||p==="[object HTMLCanvasElement]")){r.save(),r.translate(l,c),r.rotate(H),r.drawImage(X,-X.width/2,-X.height/2,X.width,X.height),r.restore();return}if(!(isNaN(ae)||ae<=0)){switch(r.beginPath(),X){default:u?r.ellipse(l,c,u/2,ae,0,0,nn):r.arc(l,c,ae,0,nn),r.closePath();break;case"triangle":D=u?u/2:ae,r.moveTo(l+Math.sin(H)*D,c-Math.cos(H)*ae),H+=nv,r.lineTo(l+Math.sin(H)*D,c-Math.cos(H)*ae),H+=nv,r.lineTo(l+Math.sin(H)*D,c-Math.cos(H)*ae),r.closePath();break;case"rectRounded":M=ae*.516,S=ae-M,f=Math.cos(H+nu)*S,j=Math.cos(H+nu)*(u?u/2-M:S),s=Math.sin(H+nu)*S,V=Math.sin(H+nu)*(u?u/2-M:S),r.arc(l-j,c-s,M,H-bi,H-Mn),r.arc(l+V,c-f,M,H-Mn,H),r.arc(l+j,c+s,M,H,H+Mn),r.arc(l-V,c+f,M,H+Mn,H+bi),r.closePath();break;case"rect":if(!re){S=Math.SQRT1_2*ae,D=u?u/2:S,r.rect(l-D,c-S,2*D,2*S);break}H+=nu;case"rectRot":j=Math.cos(H)*(u?u/2:ae),f=Math.cos(H)*ae,s=Math.sin(H)*ae,V=Math.sin(H)*(u?u/2:ae),r.moveTo(l-j,c-s),r.lineTo(l+V,c-f),r.lineTo(l+j,c+s),r.lineTo(l-V,c+f),r.closePath();break;case"crossRot":H+=nu;case"cross":j=Math.cos(H)*(u?u/2:ae),f=Math.cos(H)*ae,s=Math.sin(H)*ae,V=Math.sin(H)*(u?u/2:ae),r.moveTo(l-j,c-s),r.lineTo(l+j,c+s),r.moveTo(l+V,c-f),r.lineTo(l-V,c+f);break;case"star":j=Math.cos(H)*(u?u/2:ae),f=Math.cos(H)*ae,s=Math.sin(H)*ae,V=Math.sin(H)*(u?u/2:ae),r.moveTo(l-j,c-s),r.lineTo(l+j,c+s),r.moveTo(l+V,c-f),r.lineTo(l-V,c+f),H+=nu,j=Math.cos(H)*(u?u/2:ae),f=Math.cos(H)*ae,s=Math.sin(H)*ae,V=Math.sin(H)*(u?u/2:ae),r.moveTo(l-j,c-s),r.lineTo(l+j,c+s),r.moveTo(l+V,c-f),r.lineTo(l-V,c+f);break;case"line":f=u?u/2:Math.cos(H)*ae,s=Math.sin(H)*ae,r.moveTo(l-f,c-s),r.lineTo(l+f,c+s);break;case"dash":r.moveTo(l,c),r.lineTo(l+Math.cos(H)*(u?u/2:ae),c+Math.sin(H)*ae);break;case!1:r.closePath();break}r.fill(),i.borderWidth>0&&r.stroke()}}function Do(r,i,l){return l=l||.5,!i||r&&r.x>i.left-l&&r.x<i.right+l&&r.y>i.top-l&&r.y<i.bottom+l}function Of(r,i){r.save(),r.beginPath(),r.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),r.clip()}function jf(r){r.restore()}function wS(r,i,l,c,u){if(!i)return r.lineTo(l.x,l.y);if(u==="middle"){const p=(i.x+l.x)/2;r.lineTo(p,i.y),r.lineTo(p,l.y)}else u==="after"!=!!c?r.lineTo(i.x,l.y):r.lineTo(l.x,i.y);r.lineTo(l.x,l.y)}function kS(r,i,l,c){if(!i)return r.lineTo(l.x,l.y);r.bezierCurveTo(c?i.cp1x:i.cp2x,c?i.cp1y:i.cp2y,c?l.cp2x:l.cp1x,c?l.cp2y:l.cp1y,l.x,l.y)}function SS(r,i){i.translation&&r.translate(i.translation[0],i.translation[1]),ai(i.rotation)||r.rotate(i.rotation),i.color&&(r.fillStyle=i.color),i.textAlign&&(r.textAlign=i.textAlign),i.textBaseline&&(r.textBaseline=i.textBaseline)}function TS(r,i,l,c,u){if(u.strikethrough||u.underline){const p=r.measureText(c),f=i-p.actualBoundingBoxLeft,s=i+p.actualBoundingBoxRight,S=l-p.actualBoundingBoxAscent,M=l+p.actualBoundingBoxDescent,D=u.strikethrough?(S+M)/2:M;r.strokeStyle=r.fillStyle,r.beginPath(),r.lineWidth=u.decorationWidth||2,r.moveTo(f,D),r.lineTo(s,D),r.stroke()}}function PS(r,i){const l=r.fillStyle;r.fillStyle=i.color,r.fillRect(i.left,i.top,i.width,i.height),r.fillStyle=l}function yu(r,i,l,c,u,p={}){const f=un(i)?i:[i],s=p.strokeWidth>0&&p.strokeColor!=="";let S,M;for(r.save(),r.font=u.string,SS(r,p),S=0;S<f.length;++S)M=f[S],p.backdrop&&PS(r,p.backdrop),s&&(p.strokeColor&&(r.strokeStyle=p.strokeColor),ai(p.strokeWidth)||(r.lineWidth=p.strokeWidth),r.strokeText(M,l,c,p.maxWidth)),r.fillText(M,l,c,p.maxWidth),TS(r,l,c,M,p),c+=Number(u.lineHeight);r.restore()}function Jd(r,i){const{x:l,y:c,w:u,h:p,radius:f}=i;r.arc(l+f.topLeft,c+f.topLeft,f.topLeft,1.5*bi,bi,!0),r.lineTo(l,c+p-f.bottomLeft),r.arc(l+f.bottomLeft,c+p-f.bottomLeft,f.bottomLeft,bi,Mn,!0),r.lineTo(l+u-f.bottomRight,c+p),r.arc(l+u-f.bottomRight,c+p-f.bottomRight,f.bottomRight,Mn,0,!0),r.lineTo(l+u,c+f.topRight),r.arc(l+u-f.topRight,c+f.topRight,f.topRight,0,-Mn,!0),r.lineTo(l+f.topLeft,c)}const MS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,CS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function LS(r,i){const l=(""+r).match(MS);if(!l||l[1]==="normal")return i*1.2;switch(r=+l[2],l[3]){case"px":return r;case"%":r/=100;break}return i*r}const ES=r=>+r||0;function ag(r,i){const l={},c=ri(i),u=c?Object.keys(i):i,p=ri(r)?c?f=>Gt(r[f],r[i[f]]):f=>r[f]:()=>r;for(const f of u)l[f]=ES(p(f));return l}function Xx(r){return ag(r,{top:"y",right:"x",bottom:"y",left:"x"})}function du(r){return ag(r,["topLeft","topRight","bottomLeft","bottomRight"])}function Pa(r){const i=Xx(r);return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Hn(r,i){r=r||{},i=i||hn.font;let l=Gt(r.size,i.size);typeof l=="string"&&(l=parseInt(l,10));let c=Gt(r.style,i.style);c&&!(""+c).match(CS)&&(console.warn('Invalid font style specified: "'+c+'"'),c=void 0);const u={family:Gt(r.family,i.family),lineHeight:LS(Gt(r.lineHeight,i.lineHeight),l),size:l,style:c,weight:Gt(r.weight,i.weight),string:""};return u.string=xS(u),u}function jd(r,i,l,c){let u,p,f;for(u=0,p=r.length;u<p;++u)if(f=r[u],f!==void 0&&f!==void 0)return f}function AS(r,i,l){const{min:c,max:u}=r,p=Bx(i,(u-c)/2),f=(s,S)=>l&&s===0?0:s+S;return{min:f(c,-Math.abs(p)),max:f(u,p)}}function bl(r,i){return Object.assign(Object.create(r),i)}function rg(r,i=[""],l,c,u=()=>r[0]){const p=l||r;typeof c>"u"&&(c=tb("_fallback",r));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:r,_rootScopes:p,_fallback:c,_getTarget:u,override:s=>rg([s,...r],i,p,c)};return new Proxy(f,{deleteProperty(s,S){return delete s[S],delete s._keys,delete r[0][S],!0},get(s,S){return Qx(s,S,()=>BS(S,i,r,s))},getOwnPropertyDescriptor(s,S){return Reflect.getOwnPropertyDescriptor(s._scopes[0],S)},getPrototypeOf(){return Reflect.getPrototypeOf(r[0])},has(s,S){return fv(s).includes(S)},ownKeys(s){return fv(s)},set(s,S,M){const D=s._storage||(s._storage=u());return s[S]=D[S]=M,delete s._keys,!0}})}function Ph(r,i,l,c){const u={_cacheable:!1,_proxy:r,_context:i,_subProxy:l,_stack:new Set,_descriptors:Jx(r,c),setContext:p=>Ph(r,p,l,c),override:p=>Ph(r.override(p),i,l,c)};return new Proxy(u,{deleteProperty(p,f){return delete p[f],delete r[f],!0},get(p,f,s){return Qx(p,f,()=>DS(p,f,s))},getOwnPropertyDescriptor(p,f){return p._descriptors.allKeys?Reflect.has(r,f)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(r,f)},getPrototypeOf(){return Reflect.getPrototypeOf(r)},has(p,f){return Reflect.has(r,f)},ownKeys(){return Reflect.ownKeys(r)},set(p,f,s){return r[f]=s,delete p[f],!0}})}function Jx(r,i={scriptable:!0,indexable:!0}){const{_scriptable:l=i.scriptable,_indexable:c=i.indexable,_allKeys:u=i.allKeys}=r;return{allKeys:u,scriptable:l,indexable:c,isScriptable:yl(l)?l:()=>l,isIndexable:yl(c)?c:()=>c}}const IS=(r,i)=>r?r+Qm(i):i,sg=(r,i)=>ri(i)&&r!=="adapters"&&(Object.getPrototypeOf(i)===null||i.constructor===Object);function Qx(r,i,l){if(Object.prototype.hasOwnProperty.call(r,i)||i==="constructor")return r[i];const c=l();return r[i]=c,c}function DS(r,i,l){const{_proxy:c,_context:u,_subProxy:p,_descriptors:f}=r;let s=c[i];return yl(s)&&f.isScriptable(i)&&(s=zS(i,s,r,l)),un(s)&&s.length&&(s=RS(i,s,r,f.isIndexable)),sg(i,s)&&(s=Ph(s,u,p&&p[i],f)),s}function zS(r,i,l,c){const{_proxy:u,_context:p,_subProxy:f,_stack:s}=l;if(s.has(r))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+r);s.add(r);let S=i(p,f||c);return s.delete(r),sg(r,S)&&(S=og(u._scopes,u,r,S)),S}function RS(r,i,l,c){const{_proxy:u,_context:p,_subProxy:f,_descriptors:s}=l;if(typeof p.index<"u"&&c(r))return i[p.index%i.length];if(ri(i[0])){const S=i,M=u._scopes.filter(D=>D!==S);i=[];for(const D of S){const j=og(M,u,r,D);i.push(Ph(j,p,f&&f[r],s))}}return i}function eb(r,i,l){return yl(r)?r(i,l):r}const FS=(r,i)=>r===!0?i:typeof r=="string"?_l(i,r):void 0;function OS(r,i,l,c,u){for(const p of i){const f=FS(l,p);if(f){r.add(f);const s=eb(f._fallback,l,u);if(typeof s<"u"&&s!==l&&s!==c)return s}else if(f===!1&&typeof c<"u"&&l!==c)return null}return!1}function og(r,i,l,c){const u=i._rootScopes,p=eb(i._fallback,l,c),f=[...r,...u],s=new Set;s.add(c);let S=cv(s,f,l,p||l,c);return S===null||typeof p<"u"&&p!==l&&(S=cv(s,f,p,S,c),S===null)?!1:rg(Array.from(s),[""],u,p,()=>jS(i,l,c))}function cv(r,i,l,c,u){for(;l;)l=OS(r,i,l,c,u);return l}function jS(r,i,l){const c=r._getTarget();i in c||(c[i]={});const u=c[i];return un(u)&&ri(l)?l:u||{}}function BS(r,i,l,c){let u;for(const p of i)if(u=tb(IS(p,r),l),typeof u<"u")return sg(r,u)?og(l,c,r,u):u}function tb(r,i){for(const l of i){if(!l)continue;const c=l[r];if(typeof c<"u")return c}}function fv(r){let i=r._keys;return i||(i=r._keys=$S(r._scopes)),i}function $S(r){const i=new Set;for(const l of r)for(const c of Object.keys(l).filter(u=>!u.startsWith("_")))i.add(c);return Array.from(i)}function ib(r,i,l,c){const{iScale:u}=r,{key:p="r"}=this._parsing,f=new Array(c);let s,S,M,D;for(s=0,S=c;s<S;++s)M=s+l,D=i[M],f[s]={r:u.parse(_l(D,p),M)};return f}const VS=Number.EPSILON||1e-14,Mh=(r,i)=>i<r.length&&!r[i].skip&&r[i],nb=r=>r==="x"?"y":"x";function NS(r,i,l,c){const u=r.skip?i:r,p=i,f=l.skip?i:l,s=km(p,u),S=km(f,p);let M=s/(s+S),D=S/(s+S);M=isNaN(M)?0:M,D=isNaN(D)?0:D;const j=c*M,V=c*D;return{previous:{x:p.x-j*(f.x-u.x),y:p.y-j*(f.y-u.y)},next:{x:p.x+V*(f.x-u.x),y:p.y+V*(f.y-u.y)}}}function US(r,i,l){const c=r.length;let u,p,f,s,S,M=Mh(r,0);for(let D=0;D<c-1;++D)if(S=M,M=Mh(r,D+1),!(!S||!M)){if(Ud(i[D],0,VS)){l[D]=l[D+1]=0;continue}u=l[D]/i[D],p=l[D+1]/i[D],s=Math.pow(u,2)+Math.pow(p,2),!(s<=9)&&(f=3/Math.sqrt(s),l[D]=u*f*i[D],l[D+1]=p*f*i[D])}}function GS(r,i,l="x"){const c=nb(l),u=r.length;let p,f,s,S=Mh(r,0);for(let M=0;M<u;++M){if(f=s,s=S,S=Mh(r,M+1),!s)continue;const D=s[l],j=s[c];f&&(p=(D-f[l])/3,s[`cp1${l}`]=D-p,s[`cp1${c}`]=j-p*i[M]),S&&(p=(S[l]-D)/3,s[`cp2${l}`]=D+p,s[`cp2${c}`]=j+p*i[M])}}function qS(r,i="x"){const l=nb(i),c=r.length,u=Array(c).fill(0),p=Array(c);let f,s,S,M=Mh(r,0);for(f=0;f<c;++f)if(s=S,S=M,M=Mh(r,f+1),!!S){if(M){const D=M[i]-S[i];u[f]=D!==0?(M[l]-S[l])/D:0}p[f]=s?M?Ys(u[f-1])!==Ys(u[f])?0:(u[f-1]+u[f])/2:u[f-1]:u[f]}US(r,u,p),GS(r,p,i)}function rf(r,i,l){return Math.max(Math.min(r,l),i)}function ZS(r,i){let l,c,u,p,f,s=Do(r[0],i);for(l=0,c=r.length;l<c;++l)f=p,p=s,s=l<c-1&&Do(r[l+1],i),p&&(u=r[l],f&&(u.cp1x=rf(u.cp1x,i.left,i.right),u.cp1y=rf(u.cp1y,i.top,i.bottom)),s&&(u.cp2x=rf(u.cp2x,i.left,i.right),u.cp2y=rf(u.cp2y,i.top,i.bottom)))}function WS(r,i,l,c,u){let p,f,s,S;if(i.spanGaps&&(r=r.filter(M=>!M.skip)),i.cubicInterpolationMode==="monotone")qS(r,u);else{let M=c?r[r.length-1]:r[0];for(p=0,f=r.length;p<f;++p)s=r[p],S=NS(M,s,r[Math.min(p+1,f-(c?0:1))%f],i.tension),s.cp1x=S.previous.x,s.cp1y=S.previous.y,s.cp2x=S.next.x,s.cp2y=S.next.y,M=s}i.capBezierPoints&&ZS(r,l)}function lg(){return typeof window<"u"&&typeof document<"u"}function ug(r){let i=r.parentNode;return i&&i.toString()==="[object ShadowRoot]"&&(i=i.host),i}function Cf(r,i,l){let c;return typeof r=="string"?(c=parseInt(r,10),r.indexOf("%")!==-1&&(c=c/100*i.parentNode[l])):c=r,c}const Bf=r=>r.ownerDocument.defaultView.getComputedStyle(r,null);function HS(r,i){return Bf(r).getPropertyValue(i)}const KS=["top","right","bottom","left"];function cu(r,i,l){const c={};l=l?"-"+l:"";for(let u=0;u<4;u++){const p=KS[u];c[p]=parseFloat(r[i+"-"+p+l])||0}return c.width=c.left+c.right,c.height=c.top+c.bottom,c}const YS=(r,i,l)=>(r>0||i>0)&&(!l||!l.shadowRoot);function XS(r,i){const l=r.touches,c=l&&l.length?l[0]:r,{offsetX:u,offsetY:p}=c;let f=!1,s,S;if(YS(u,p,r.target))s=u,S=p;else{const M=i.getBoundingClientRect();s=c.clientX-M.left,S=c.clientY-M.top,f=!0}return{x:s,y:S,box:f}}function ou(r,i){if("native"in r)return r;const{canvas:l,currentDevicePixelRatio:c}=i,u=Bf(l),p=u.boxSizing==="border-box",f=cu(u,"padding"),s=cu(u,"border","width"),{x:S,y:M,box:D}=XS(r,l),j=f.left+(D&&s.left),V=f.top+(D&&s.top);let{width:X,height:re}=i;return p&&(X-=f.width+s.width,re-=f.height+s.height),{x:Math.round((S-j)/X*l.width/c),y:Math.round((M-V)/re*l.height/c)}}function JS(r,i,l){let c,u;if(i===void 0||l===void 0){const p=r&&ug(r);if(!p)i=r.clientWidth,l=r.clientHeight;else{const f=p.getBoundingClientRect(),s=Bf(p),S=cu(s,"border","width"),M=cu(s,"padding");i=f.width-M.width-S.width,l=f.height-M.height-S.height,c=Cf(s.maxWidth,p,"clientWidth"),u=Cf(s.maxHeight,p,"clientHeight")}}return{width:i,height:l,maxWidth:c||Pf,maxHeight:u||Pf}}const pl=r=>Math.round(r*10)/10;function QS(r,i,l,c){const u=Bf(r),p=cu(u,"margin"),f=Cf(u.maxWidth,r,"clientWidth")||Pf,s=Cf(u.maxHeight,r,"clientHeight")||Pf,S=JS(r,i,l);let{width:M,height:D}=S;if(u.boxSizing==="content-box"){const V=cu(u,"border","width"),X=cu(u,"padding");M-=X.width+V.width,D-=X.height+V.height}return M=Math.max(0,M-p.width),D=Math.max(0,c?M/c:D-p.height),M=pl(Math.min(M,f,S.maxWidth)),D=pl(Math.min(D,s,S.maxHeight)),M&&!D&&(D=pl(M/2)),(i!==void 0||l!==void 0)&&c&&S.height&&D>S.height&&(D=S.height,M=pl(Math.floor(D*c))),{width:M,height:D}}function pv(r,i,l){const c=i||1,u=pl(r.height*c),p=pl(r.width*c);r.height=pl(r.height),r.width=pl(r.width);const f=r.canvas;return f.style&&(l||!f.style.height&&!f.style.width)&&(f.style.height=`${r.height}px`,f.style.width=`${r.width}px`),r.currentDevicePixelRatio!==c||f.height!==u||f.width!==p?(r.currentDevicePixelRatio=c,f.height=u,f.width=p,r.ctx.setTransform(c,0,0,c,0,0),!0):!1}const eT=(function(){let r=!1;try{const i={get passive(){return r=!0,!1}};lg()&&(window.addEventListener("test",null,i),window.removeEventListener("test",null,i))}catch{}return r})();function mv(r,i){const l=HS(r,i),c=l&&l.match(/^(\d+)(\.\d+)?px$/);return c?+c[1]:void 0}function lu(r,i,l,c){return{x:r.x+l*(i.x-r.x),y:r.y+l*(i.y-r.y)}}function tT(r,i,l,c){return{x:r.x+l*(i.x-r.x),y:c==="middle"?l<.5?r.y:i.y:c==="after"?l<1?r.y:i.y:l>0?i.y:r.y}}function iT(r,i,l,c){const u={x:r.cp2x,y:r.cp2y},p={x:i.cp1x,y:i.cp1y},f=lu(r,u,l),s=lu(u,p,l),S=lu(p,i,l),M=lu(f,s,l),D=lu(s,S,l);return lu(M,D,l)}const nT=function(r,i){return{x(l){return r+r+i-l},setWidth(l){i=l},textAlign(l){return l==="center"?l:l==="right"?"left":"right"},xPlus(l,c){return l-c},leftForLtr(l,c){return l-c}}},aT=function(){return{x(r){return r},setWidth(r){},textAlign(r){return r},xPlus(r,i){return r+i},leftForLtr(r,i){return r}}};function Sh(r,i,l){return r?nT(i,l):aT()}function ab(r,i){let l,c;(i==="ltr"||i==="rtl")&&(l=r.canvas.style,c=[l.getPropertyValue("direction"),l.getPropertyPriority("direction")],l.setProperty("direction",i,"important"),r.prevTextDirection=c)}function rb(r,i){i!==void 0&&(delete r.prevTextDirection,r.canvas.style.setProperty("direction",i[0],i[1]))}function sb(r){return r==="angle"?{between:Xd,compare:rS,normalize:Sa}:{between:Ao,compare:(i,l)=>i-l,normalize:i=>i}}function gv({start:r,end:i,count:l,loop:c,style:u}){return{start:r%l,end:i%l,loop:c&&(i-r+1)%l===0,style:u}}function rT(r,i,l){const{property:c,start:u,end:p}=l,{between:f,normalize:s}=sb(c),S=i.length;let{start:M,end:D,loop:j}=r,V,X;if(j){for(M+=S,D+=S,V=0,X=S;V<X&&f(s(i[M%S][c]),u,p);++V)M--,D--;M%=S,D%=S}return D<M&&(D+=S),{start:M,end:D,loop:j,style:r.style}}function ob(r,i,l){if(!l)return[r];const{property:c,start:u,end:p}=l,f=i.length,{compare:s,between:S,normalize:M}=sb(c),{start:D,end:j,loop:V,style:X}=rT(r,i,l),re=[];let ae=!1,H=null,Se,xe,Pe;const Ve=()=>S(u,Pe,Se)&&s(u,Pe)!==0,Ue=()=>s(p,Se)===0||S(p,Pe,Se),et=()=>ae||Ve(),Je=()=>!ae||Ue();for(let nt=D,mt=D;nt<=j;++nt)xe=i[nt%f],!xe.skip&&(Se=M(xe[c]),Se!==Pe&&(ae=S(Se,u,p),H===null&&et()&&(H=s(Se,u)===0?nt:mt),H!==null&&Je()&&(re.push(gv({start:H,end:nt,loop:V,count:f,style:X})),H=null),mt=nt,Pe=Se));return H!==null&&re.push(gv({start:H,end:j,loop:V,count:f,style:X})),re}function lb(r,i){const l=[],c=r.segments;for(let u=0;u<c.length;u++){const p=ob(c[u],r.points,i);p.length&&l.push(...p)}return l}function sT(r,i,l,c){let u=0,p=i-1;if(l&&!c)for(;u<i&&!r[u].skip;)u++;for(;u<i&&r[u].skip;)u++;for(u%=i,l&&(p+=u);p>u&&r[p%i].skip;)p--;return p%=i,{start:u,end:p}}function oT(r,i,l,c){const u=r.length,p=[];let f=i,s=r[i],S;for(S=i+1;S<=l;++S){const M=r[S%u];M.skip||M.stop?s.skip||(c=!1,p.push({start:i%u,end:(S-1)%u,loop:c}),i=f=M.stop?S:null):(f=S,s.skip&&(i=S)),s=M}return f!==null&&p.push({start:i%u,end:f%u,loop:c}),p}function lT(r,i){const l=r.points,c=r.options.spanGaps,u=l.length;if(!u)return[];const p=!!r._loop,{start:f,end:s}=sT(l,u,p,c);if(c===!0)return _v(r,[{start:f,end:s,loop:p}],l,i);const S=s<f?s+u:s,M=!!r._fullLoop&&f===0&&s===u-1;return _v(r,oT(l,f,S,M),l,i)}function _v(r,i,l,c){return!c||!c.setContext||!l?i:uT(r,i,l,c)}function uT(r,i,l,c){const u=r._chart.getContext(),p=yv(r.options),{_datasetIndex:f,options:{spanGaps:s}}=r,S=l.length,M=[];let D=p,j=i[0].start,V=j;function X(re,ae,H,Se){const xe=s?-1:1;if(re!==ae){for(re+=S;l[re%S].skip;)re-=xe;for(;l[ae%S].skip;)ae+=xe;re%S!==ae%S&&(M.push({start:re%S,end:ae%S,loop:H,style:Se}),D=Se,j=ae%S)}}for(const re of i){j=s?j:re.start;let ae=l[j%S],H;for(V=j+1;V<=re.end;V++){const Se=l[V%S];H=yv(c.setContext(bl(u,{type:"segment",p0:ae,p1:Se,p0DataIndex:(V-1)%S,p1DataIndex:V%S,datasetIndex:f}))),hT(H,D)&&X(j,V-1,re.loop,D),ae=Se,D=H}j<V-1&&X(j,V-1,re.loop,D)}return M}function yv(r){return{backgroundColor:r.backgroundColor,borderCapStyle:r.borderCapStyle,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderJoinStyle:r.borderJoinStyle,borderWidth:r.borderWidth,borderColor:r.borderColor}}function hT(r,i){if(!i)return!1;const l=[],c=function(u,p){return ng(p)?(l.includes(p)||l.push(p),l.indexOf(p)):p};return JSON.stringify(r,c)!==JSON.stringify(i,c)}function sf(r,i,l){return r.options.clip?r[l]:i[l]}function dT(r,i){const{xScale:l,yScale:c}=r;return l&&c?{left:sf(l,i,"left"),right:sf(l,i,"right"),top:sf(c,i,"top"),bottom:sf(c,i,"bottom")}:i}function ub(r,i){const l=i._clip;if(l.disabled)return!1;const c=dT(i,r.chartArea);return{left:l.left===!1?0:c.left-(l.left===!0?0:l.left),right:l.right===!1?r.width:c.right+(l.right===!0?0:l.right),top:l.top===!1?0:c.top-(l.top===!0?0:l.top),bottom:l.bottom===!1?r.height:c.bottom+(l.bottom===!0?0:l.bottom)}}class cT{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(i,l,c,u){const p=l.listeners[u],f=l.duration;p.forEach(s=>s({chart:i,initial:l.initial,numSteps:f,currentStep:Math.min(c-l.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=qx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(i=Date.now()){let l=0;this._charts.forEach((c,u)=>{if(!c.running||!c.items.length)return;const p=c.items;let f=p.length-1,s=!1,S;for(;f>=0;--f)S=p[f],S._active?(S._total>c.duration&&(c.duration=S._total),S.tick(i),s=!0):(p[f]=p[p.length-1],p.pop());s&&(u.draw(),this._notify(u,c,i,"progress")),p.length||(c.running=!1,this._notify(u,c,i,"complete"),c.initial=!1),l+=p.length}),this._lastDate=i,l===0&&(this._running=!1)}_getAnims(i){const l=this._charts;let c=l.get(i);return c||(c={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},l.set(i,c)),c}listen(i,l,c){this._getAnims(i).listeners[l].push(c)}add(i,l){!l||!l.length||this._getAnims(i).items.push(...l)}has(i){return this._getAnims(i).items.length>0}start(i){const l=this._charts.get(i);l&&(l.running=!0,l.start=Date.now(),l.duration=l.items.reduce((c,u)=>Math.max(c,u._duration),0),this._refresh())}running(i){if(!this._running)return!1;const l=this._charts.get(i);return!(!l||!l.running||!l.items.length)}stop(i){const l=this._charts.get(i);if(!l||!l.items.length)return;const c=l.items;let u=c.length-1;for(;u>=0;--u)c[u].cancel();l.items=[],this._notify(i,l,Date.now(),"complete")}remove(i){return this._charts.delete(i)}}var Co=new cT;const vv="transparent",fT={boolean(r,i,l){return l>.5?i:r},color(r,i,l){const c=uv(r||vv),u=c.valid&&uv(i||vv);return u&&u.valid?u.mix(c,l).hexString():i},number(r,i,l){return r+(i-r)*l}};class pT{constructor(i,l,c,u){const p=l[c];u=jd([i.to,u,p,i.from]);const f=jd([i.from,p,u]);this._active=!0,this._fn=i.fn||fT[i.type||typeof f],this._easing=Gd[i.easing]||Gd.linear,this._start=Math.floor(Date.now()+(i.delay||0)),this._duration=this._total=Math.floor(i.duration),this._loop=!!i.loop,this._target=l,this._prop=c,this._from=f,this._to=u,this._promises=void 0}active(){return this._active}update(i,l,c){if(this._active){this._notify(!1);const u=this._target[this._prop],p=c-this._start,f=this._duration-p;this._start=c,this._duration=Math.floor(Math.max(f,i.duration)),this._total+=p,this._loop=!!i.loop,this._to=jd([i.to,l,u,i.from]),this._from=jd([i.from,u,l])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(i){const l=i-this._start,c=this._duration,u=this._prop,p=this._from,f=this._loop,s=this._to;let S;if(this._active=p!==s&&(f||l<c),!this._active){this._target[u]=s,this._notify(!0);return}if(l<0){this._target[u]=p;return}S=l/c%2,S=f&&S>1?2-S:S,S=this._easing(Math.min(1,Math.max(0,S))),this._target[u]=this._fn(p,s,S)}wait(){const i=this._promises||(this._promises=[]);return new Promise((l,c)=>{i.push({res:l,rej:c})})}_notify(i){const l=i?"res":"rej",c=this._promises||[];for(let u=0;u<c.length;u++)c[u][l]()}}class hb{constructor(i,l){this._chart=i,this._properties=new Map,this.configure(l)}configure(i){if(!ri(i))return;const l=Object.keys(hn.animation),c=this._properties;Object.getOwnPropertyNames(i).forEach(u=>{const p=i[u];if(!ri(p))return;const f={};for(const s of l)f[s]=p[s];(un(p.properties)&&p.properties||[u]).forEach(s=>{(s===u||!c.has(s))&&c.set(s,f)})})}_animateOptions(i,l){const c=l.options,u=gT(i,c);if(!u)return[];const p=this._createAnimations(u,c);return c.$shared&&mT(i.options.$animations,c).then(()=>{i.options=c},()=>{}),p}_createAnimations(i,l){const c=this._properties,u=[],p=i.$animations||(i.$animations={}),f=Object.keys(l),s=Date.now();let S;for(S=f.length-1;S>=0;--S){const M=f[S];if(M.charAt(0)==="$")continue;if(M==="options"){u.push(...this._animateOptions(i,l));continue}const D=l[M];let j=p[M];const V=c.get(M);if(j)if(V&&j.active()){j.update(V,D,s);continue}else j.cancel();if(!V||!V.duration){i[M]=D;continue}p[M]=j=new pT(V,i,M,D),u.push(j)}return u}update(i,l){if(this._properties.size===0){Object.assign(i,l);return}const c=this._createAnimations(i,l);if(c.length)return Co.add(this._chart,c),!0}}function mT(r,i){const l=[],c=Object.keys(i);for(let u=0;u<c.length;u++){const p=r[c[u]];p&&p.active()&&l.push(p.wait())}return Promise.all(l)}function gT(r,i){if(!i)return;let l=r.options;if(!l){r.options=i;return}return l.$shared&&(r.options=l=Object.assign({},l,{$shared:!1,$animations:{}})),l}function xv(r,i){const l=r&&r.options||{},c=l.reverse,u=l.min===void 0?i:0,p=l.max===void 0?i:0;return{start:c?p:u,end:c?u:p}}function _T(r,i,l){if(l===!1)return!1;const c=xv(r,l),u=xv(i,l);return{top:u.end,right:c.end,bottom:u.start,left:c.start}}function yT(r){let i,l,c,u;return ri(r)?(i=r.top,l=r.right,c=r.bottom,u=r.left):i=l=c=u=r,{top:i,right:l,bottom:c,left:u,disabled:r===!1}}function db(r,i){const l=[],c=r._getSortedDatasetMetas(i);let u,p;for(u=0,p=c.length;u<p;++u)l.push(c[u].index);return l}function bv(r,i,l,c={}){const u=r.keys,p=c.mode==="single";let f,s,S,M;if(i===null)return;let D=!1;for(f=0,s=u.length;f<s;++f){if(S=+u[f],S===l){if(D=!0,c.all)continue;break}M=r.values[S],vn(M)&&(p||i===0||Ys(i)===Ys(M))&&(i+=M)}return!D&&!c.all?0:i}function vT(r,i){const{iScale:l,vScale:c}=i,u=l.axis==="x"?"x":"y",p=c.axis==="x"?"x":"y",f=Object.keys(r),s=new Array(f.length);let S,M,D;for(S=0,M=f.length;S<M;++S)D=f[S],s[S]={[u]:D,[p]:r[D]};return s}function sm(r,i){const l=r&&r.options.stacked;return l||l===void 0&&i.stack!==void 0}function xT(r,i,l){return`${r.id}.${i.id}.${l.stack||l.type}`}function bT(r){const{min:i,max:l,minDefined:c,maxDefined:u}=r.getUserBounds();return{min:c?i:Number.NEGATIVE_INFINITY,max:u?l:Number.POSITIVE_INFINITY}}function wT(r,i,l){const c=r[i]||(r[i]={});return c[l]||(c[l]={})}function wv(r,i,l,c){for(const u of i.getMatchingVisibleMetas(c).reverse()){const p=r[u.index];if(l&&p>0||!l&&p<0)return u.index}return null}function kv(r,i){const{chart:l,_cachedMeta:c}=r,u=l._stacks||(l._stacks={}),{iScale:p,vScale:f,index:s}=c,S=p.axis,M=f.axis,D=xT(p,f,c),j=i.length;let V;for(let X=0;X<j;++X){const re=i[X],{[S]:ae,[M]:H}=re,Se=re._stacks||(re._stacks={});V=Se[M]=wT(u,D,ae),V[s]=H,V._top=wv(V,f,!0,c.type),V._bottom=wv(V,f,!1,c.type);const xe=V._visualValues||(V._visualValues={});xe[s]=H}}function om(r,i){const l=r.scales;return Object.keys(l).filter(c=>l[c].axis===i).shift()}function kT(r,i){return bl(r,{active:!1,dataset:void 0,datasetIndex:i,index:i,mode:"default",type:"dataset"})}function ST(r,i,l){return bl(r,{active:!1,dataIndex:i,parsed:void 0,raw:void 0,element:l,index:i,mode:"default",type:"data"})}function Cd(r,i){const l=r.controller.index,c=r.vScale&&r.vScale.axis;if(c){i=i||r._parsed;for(const u of i){const p=u._stacks;if(!p||p[c]===void 0||p[c][l]===void 0)return;delete p[c][l],p[c]._visualValues!==void 0&&p[c]._visualValues[l]!==void 0&&delete p[c]._visualValues[l]}}}const lm=r=>r==="reset"||r==="none",Sv=(r,i)=>i?r:Object.assign({},r),TT=(r,i,l)=>r&&!i.hidden&&i._stacked&&{keys:db(l,!0),values:null};class wl{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(i,l){this.chart=i,this._ctx=i.ctx,this.index=l,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const i=this._cachedMeta;this.configure(),this.linkScales(),i._stacked=sm(i.vScale,i),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(i){this.index!==i&&Cd(this._cachedMeta),this.index=i}linkScales(){const i=this.chart,l=this._cachedMeta,c=this.getDataset(),u=(j,V,X,re)=>j==="x"?V:j==="r"?re:X,p=l.xAxisID=Gt(c.xAxisID,om(i,"x")),f=l.yAxisID=Gt(c.yAxisID,om(i,"y")),s=l.rAxisID=Gt(c.rAxisID,om(i,"r")),S=l.indexAxis,M=l.iAxisID=u(S,p,f,s),D=l.vAxisID=u(S,f,p,s);l.xScale=this.getScaleForId(p),l.yScale=this.getScaleForId(f),l.rScale=this.getScaleForId(s),l.iScale=this.getScaleForId(M),l.vScale=this.getScaleForId(D)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(i){return this.chart.scales[i]}_getOtherScale(i){const l=this._cachedMeta;return i===l.iScale?l.vScale:l.iScale}reset(){this._update("reset")}_destroy(){const i=this._cachedMeta;this._data&&sv(this._data,this),i._stacked&&Cd(i)}_dataCheck(){const i=this.getDataset(),l=i.data||(i.data=[]),c=this._data;if(ri(l)){const u=this._cachedMeta;this._data=vT(l,u)}else if(c!==l){if(c){sv(c,this);const u=this._cachedMeta;Cd(u),u._parsed=[]}l&&Object.isExtensible(l)&&uS(l,this),this._syncList=[],this._data=l}}addElements(){const i=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(i.dataset=new this.datasetElementType)}buildOrUpdateElements(i){const l=this._cachedMeta,c=this.getDataset();let u=!1;this._dataCheck();const p=l._stacked;l._stacked=sm(l.vScale,l),l.stack!==c.stack&&(u=!0,Cd(l),l.stack=c.stack),this._resyncElements(i),(u||p!==l._stacked)&&(kv(this,l._parsed),l._stacked=sm(l.vScale,l))}configure(){const i=this.chart.config,l=i.datasetScopeKeys(this._type),c=i.getOptionScopes(this.getDataset(),l,!0);this.options=i.createResolver(c,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(i,l){const{_cachedMeta:c,_data:u}=this,{iScale:p,_stacked:f}=c,s=p.axis;let S=i===0&&l===u.length?!0:c._sorted,M=i>0&&c._parsed[i-1],D,j,V;if(this._parsing===!1)c._parsed=u,c._sorted=!0,V=u;else{un(u[i])?V=this.parseArrayData(c,u,i,l):ri(u[i])?V=this.parseObjectData(c,u,i,l):V=this.parsePrimitiveData(c,u,i,l);const X=()=>j[s]===null||M&&j[s]<M[s];for(D=0;D<l;++D)c._parsed[D+i]=j=V[D],S&&(X()&&(S=!1),M=j);c._sorted=S}f&&kv(this,V)}parsePrimitiveData(i,l,c,u){const{iScale:p,vScale:f}=i,s=p.axis,S=f.axis,M=p.getLabels(),D=p===f,j=new Array(u);let V,X,re;for(V=0,X=u;V<X;++V)re=V+c,j[V]={[s]:D||p.parse(M[re],re),[S]:f.parse(l[re],re)};return j}parseArrayData(i,l,c,u){const{xScale:p,yScale:f}=i,s=new Array(u);let S,M,D,j;for(S=0,M=u;S<M;++S)D=S+c,j=l[D],s[S]={x:p.parse(j[0],D),y:f.parse(j[1],D)};return s}parseObjectData(i,l,c,u){const{xScale:p,yScale:f}=i,{xAxisKey:s="x",yAxisKey:S="y"}=this._parsing,M=new Array(u);let D,j,V,X;for(D=0,j=u;D<j;++D)V=D+c,X=l[V],M[D]={x:p.parse(_l(X,s),V),y:f.parse(_l(X,S),V)};return M}getParsed(i){return this._cachedMeta._parsed[i]}getDataElement(i){return this._cachedMeta.data[i]}applyStack(i,l,c){const u=this.chart,p=this._cachedMeta,f=l[i.axis],s={keys:db(u,!0),values:l._stacks[i.axis]._visualValues};return bv(s,f,p.index,{mode:c})}updateRangeFromParsed(i,l,c,u){const p=c[l.axis];let f=p===null?NaN:p;const s=u&&c._stacks[l.axis];u&&s&&(u.values=s,f=bv(u,p,this._cachedMeta.index)),i.min=Math.min(i.min,f),i.max=Math.max(i.max,f)}getMinMax(i,l){const c=this._cachedMeta,u=c._parsed,p=c._sorted&&i===c.iScale,f=u.length,s=this._getOtherScale(i),S=TT(l,c,this.chart),M={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:D,max:j}=bT(s);let V,X;function re(){X=u[V];const ae=X[s.axis];return!vn(X[i.axis])||D>ae||j<ae}for(V=0;V<f&&!(!re()&&(this.updateRangeFromParsed(M,i,X,S),p));++V);if(p){for(V=f-1;V>=0;--V)if(!re()){this.updateRangeFromParsed(M,i,X,S);break}}return M}getAllParsedValues(i){const l=this._cachedMeta._parsed,c=[];let u,p,f;for(u=0,p=l.length;u<p;++u)f=l[u][i.axis],vn(f)&&c.push(f);return c}getMaxOverflow(){return!1}getLabelAndValue(i){const l=this._cachedMeta,c=l.iScale,u=l.vScale,p=this.getParsed(i);return{label:c?""+c.getLabelForValue(p[c.axis]):"",value:u?""+u.getLabelForValue(p[u.axis]):""}}_update(i){const l=this._cachedMeta;this.update(i||"default"),l._clip=yT(Gt(this.options.clip,_T(l.xScale,l.yScale,this.getMaxOverflow())))}update(i){}draw(){const i=this._ctx,l=this.chart,c=this._cachedMeta,u=c.data||[],p=l.chartArea,f=[],s=this._drawStart||0,S=this._drawCount||u.length-s,M=this.options.drawActiveElementsOnTop;let D;for(c.dataset&&c.dataset.draw(i,p,s,S),D=s;D<s+S;++D){const j=u[D];j.hidden||(j.active&&M?f.push(j):j.draw(i,p))}for(D=0;D<f.length;++D)f[D].draw(i,p)}getStyle(i,l){const c=l?"active":"default";return i===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(c):this.resolveDataElementOptions(i||0,c)}getContext(i,l,c){const u=this.getDataset();let p;if(i>=0&&i<this._cachedMeta.data.length){const f=this._cachedMeta.data[i];p=f.$context||(f.$context=ST(this.getContext(),i,f)),p.parsed=this.getParsed(i),p.raw=u.data[i],p.index=p.dataIndex=i}else p=this.$context||(this.$context=kT(this.chart.getContext(),this.index)),p.dataset=u,p.index=p.datasetIndex=this.index;return p.active=!!l,p.mode=c,p}resolveDatasetElementOptions(i){return this._resolveElementOptions(this.datasetElementType.id,i)}resolveDataElementOptions(i,l){return this._resolveElementOptions(this.dataElementType.id,l,i)}_resolveElementOptions(i,l="default",c){const u=l==="active",p=this._cachedDataOpts,f=i+"-"+l,s=p[f],S=this.enableOptionSharing&&Yd(c);if(s)return Sv(s,S);const M=this.chart.config,D=M.datasetElementScopeKeys(this._type,i),j=u?[`${i}Hover`,"hover",i,""]:[i,""],V=M.getOptionScopes(this.getDataset(),D),X=Object.keys(hn.elements[i]),re=()=>this.getContext(c,u,l),ae=M.resolveNamedOptions(V,X,re,j);return ae.$shared&&(ae.$shared=S,p[f]=Object.freeze(Sv(ae,S))),ae}_resolveAnimations(i,l,c){const u=this.chart,p=this._cachedDataOpts,f=`animation-${l}`,s=p[f];if(s)return s;let S;if(u.options.animation!==!1){const D=this.chart.config,j=D.datasetAnimationScopeKeys(this._type,l),V=D.getOptionScopes(this.getDataset(),j);S=D.createResolver(V,this.getContext(i,c,l))}const M=new hb(u,S&&S.animations);return S&&S._cacheable&&(p[f]=Object.freeze(M)),M}getSharedOptions(i){if(i.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},i))}includeOptions(i,l){return!l||lm(i)||this.chart._animationsDisabled}_getSharedOptions(i,l){const c=this.resolveDataElementOptions(i,l),u=this._sharedOptions,p=this.getSharedOptions(c),f=this.includeOptions(l,p)||p!==u;return this.updateSharedOptions(p,l,c),{sharedOptions:p,includeOptions:f}}updateElement(i,l,c,u){lm(u)?Object.assign(i,c):this._resolveAnimations(l,u).update(i,c)}updateSharedOptions(i,l,c){i&&!lm(l)&&this._resolveAnimations(void 0,l).update(i,c)}_setStyle(i,l,c,u){i.active=u;const p=this.getStyle(l,u);this._resolveAnimations(l,c,u).update(i,{options:!u&&this.getSharedOptions(p)||p})}removeHoverStyle(i,l,c){this._setStyle(i,c,"active",!1)}setHoverStyle(i,l,c){this._setStyle(i,c,"active",!0)}_removeDatasetHoverStyle(){const i=this._cachedMeta.dataset;i&&this._setStyle(i,void 0,"active",!1)}_setDatasetHoverStyle(){const i=this._cachedMeta.dataset;i&&this._setStyle(i,void 0,"active",!0)}_resyncElements(i){const l=this._data,c=this._cachedMeta.data;for(const[s,S,M]of this._syncList)this[s](S,M);this._syncList=[];const u=c.length,p=l.length,f=Math.min(p,u);f&&this.parse(0,f),p>u?this._insertElements(u,p-u,i):p<u&&this._removeElements(p,u-p)}_insertElements(i,l,c=!0){const u=this._cachedMeta,p=u.data,f=i+l;let s;const S=M=>{for(M.length+=l,s=M.length-1;s>=f;s--)M[s]=M[s-l]};for(S(p),s=i;s<f;++s)p[s]=new this.dataElementType;this._parsing&&S(u._parsed),this.parse(i,l),c&&this.updateElements(p,i,l,"reset")}updateElements(i,l,c,u){}_removeElements(i,l){const c=this._cachedMeta;if(this._parsing){const u=c._parsed.splice(i,l);c._stacked&&Cd(c,u)}c.data.splice(i,l)}_sync(i){if(this._parsing)this._syncList.push(i);else{const[l,c,u]=i;this[l](c,u)}this.chart._dataChanges.push([this.index,...i])}_onDataPush(){const i=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-i,i])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(i,l){l&&this._sync(["_removeElements",i,l]);const c=arguments.length-2;c&&this._sync(["_insertElements",i,c])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function PT(r,i){if(!r._cache.$bar){const l=r.getMatchingVisibleMetas(i);let c=[];for(let u=0,p=l.length;u<p;u++)c=c.concat(l[u].controller.getAllParsedValues(r));r._cache.$bar=Gx(c.sort((u,p)=>u-p))}return r._cache.$bar}function MT(r){const i=r.iScale,l=PT(i,r.type);let c=i._length,u,p,f,s;const S=()=>{f===32767||f===-32768||(Yd(s)&&(c=Math.min(c,Math.abs(f-s)||c)),s=f)};for(u=0,p=l.length;u<p;++u)f=i.getPixelForValue(l[u]),S();for(s=void 0,u=0,p=i.ticks.length;u<p;++u)f=i.getPixelForTick(u),S();return c}function CT(r,i,l,c){const u=l.barThickness;let p,f;return ai(u)?(p=i.min*l.categoryPercentage,f=l.barPercentage):(p=u*c,f=1),{chunk:p/c,ratio:f,start:i.pixels[r]-p/2}}function LT(r,i,l,c){const u=i.pixels,p=u[r];let f=r>0?u[r-1]:null,s=r<u.length-1?u[r+1]:null;const S=l.categoryPercentage;f===null&&(f=p-(s===null?i.end-i.start:s-p)),s===null&&(s=p+p-f);const M=p-(p-Math.min(f,s))/2*S;return{chunk:Math.abs(s-f)/2*S/c,ratio:l.barPercentage,start:M}}function ET(r,i,l,c){const u=l.parse(r[0],c),p=l.parse(r[1],c),f=Math.min(u,p),s=Math.max(u,p);let S=f,M=s;Math.abs(f)>Math.abs(s)&&(S=s,M=f),i[l.axis]=M,i._custom={barStart:S,barEnd:M,start:u,end:p,min:f,max:s}}function cb(r,i,l,c){return un(r)?ET(r,i,l,c):i[l.axis]=l.parse(r,c),i}function Tv(r,i,l,c){const u=r.iScale,p=r.vScale,f=u.getLabels(),s=u===p,S=[];let M,D,j,V;for(M=l,D=l+c;M<D;++M)V=i[M],j={},j[u.axis]=s||u.parse(f[M],M),S.push(cb(V,j,p,M));return S}function um(r){return r&&r.barStart!==void 0&&r.barEnd!==void 0}function AT(r,i,l){return r!==0?Ys(r):(i.isHorizontal()?1:-1)*(i.min>=l?1:-1)}function IT(r){let i,l,c,u,p;return r.horizontal?(i=r.base>r.x,l="left",c="right"):(i=r.base<r.y,l="bottom",c="top"),i?(u="end",p="start"):(u="start",p="end"),{start:l,end:c,reverse:i,top:u,bottom:p}}function DT(r,i,l,c){let u=i.borderSkipped;const p={};if(!u){r.borderSkipped=p;return}if(u===!0){r.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:f,end:s,reverse:S,top:M,bottom:D}=IT(r);u==="middle"&&l&&(r.enableBorderRadius=!0,(l._top||0)===c?u=M:(l._bottom||0)===c?u=D:(p[Pv(D,f,s,S)]=!0,u=M)),p[Pv(u,f,s,S)]=!0,r.borderSkipped=p}function Pv(r,i,l,c){return c?(r=zT(r,i,l),r=Mv(r,l,i)):r=Mv(r,i,l),r}function zT(r,i,l){return r===i?l:r===l?i:r}function Mv(r,i,l){return r==="start"?i:r==="end"?l:r}function RT(r,{inflateAmount:i},l){r.inflateAmount=i==="auto"?l===1?.33:0:i}class FT extends wl{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(i,l,c,u){return Tv(i,l,c,u)}parseArrayData(i,l,c,u){return Tv(i,l,c,u)}parseObjectData(i,l,c,u){const{iScale:p,vScale:f}=i,{xAxisKey:s="x",yAxisKey:S="y"}=this._parsing,M=p.axis==="x"?s:S,D=f.axis==="x"?s:S,j=[];let V,X,re,ae;for(V=c,X=c+u;V<X;++V)ae=l[V],re={},re[p.axis]=p.parse(_l(ae,M),V),j.push(cb(_l(ae,D),re,f,V));return j}updateRangeFromParsed(i,l,c,u){super.updateRangeFromParsed(i,l,c,u);const p=c._custom;p&&l===this._cachedMeta.vScale&&(i.min=Math.min(i.min,p.min),i.max=Math.max(i.max,p.max))}getMaxOverflow(){return 0}getLabelAndValue(i){const l=this._cachedMeta,{iScale:c,vScale:u}=l,p=this.getParsed(i),f=p._custom,s=um(f)?"["+f.start+", "+f.end+"]":""+u.getLabelForValue(p[u.axis]);return{label:""+c.getLabelForValue(p[c.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();const i=this._cachedMeta;i.stack=this.getDataset().stack}update(i){const l=this._cachedMeta;this.updateElements(l.data,0,l.data.length,i)}updateElements(i,l,c,u){const p=u==="reset",{index:f,_cachedMeta:{vScale:s}}=this,S=s.getBasePixel(),M=s.isHorizontal(),D=this._getRuler(),{sharedOptions:j,includeOptions:V}=this._getSharedOptions(l,u);for(let X=l;X<l+c;X++){const re=this.getParsed(X),ae=p||ai(re[s.axis])?{base:S,head:S}:this._calculateBarValuePixels(X),H=this._calculateBarIndexPixels(X,D),Se=(re._stacks||{})[s.axis],xe={horizontal:M,base:ae.base,enableBorderRadius:!Se||um(re._custom)||f===Se._top||f===Se._bottom,x:M?ae.head:H.center,y:M?H.center:ae.head,height:M?H.size:Math.abs(ae.size),width:M?Math.abs(ae.size):H.size};V&&(xe.options=j||this.resolveDataElementOptions(X,i[X].active?"active":u));const Pe=xe.options||i[X].options;DT(xe,Pe,Se,f),RT(xe,Pe,D.ratio),this.updateElement(i[X],X,xe,u)}}_getStacks(i,l){const{iScale:c}=this._cachedMeta,u=c.getMatchingVisibleMetas(this._type).filter(D=>D.controller.options.grouped),p=c.options.stacked,f=[],s=this._cachedMeta.controller.getParsed(l),S=s&&s[c.axis],M=D=>{const j=D._parsed.find(X=>X[c.axis]===S),V=j&&j[D.vScale.axis];if(ai(V)||isNaN(V))return!0};for(const D of u)if(!(l!==void 0&&M(D))&&((p===!1||f.indexOf(D.stack)===-1||p===void 0&&D.stack===void 0)&&f.push(D.stack),D.index===i))break;return f.length||f.push(void 0),f}_getStackCount(i){return this._getStacks(void 0,i).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const i=this.chart.scales,l=this.chart.options.indexAxis;return Object.keys(i).filter(c=>i[c].axis===l).shift()}_getAxis(){const i={},l=this.getFirstScaleIdForIndexAxis();for(const c of this.chart.data.datasets)i[Gt(this.chart.options.indexAxis==="x"?c.xAxisID:c.yAxisID,l)]=!0;return Object.keys(i)}_getStackIndex(i,l,c){const u=this._getStacks(i,c),p=l!==void 0?u.indexOf(l):-1;return p===-1?u.length-1:p}_getRuler(){const i=this.options,l=this._cachedMeta,c=l.iScale,u=[];let p,f;for(p=0,f=l.data.length;p<f;++p)u.push(c.getPixelForValue(this.getParsed(p)[c.axis],p));const s=i.barThickness;return{min:s||MT(l),pixels:u,start:c._startPixel,end:c._endPixel,stackCount:this._getStackCount(),scale:c,grouped:i.grouped,ratio:s?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(i){const{_cachedMeta:{vScale:l,_stacked:c,index:u},options:{base:p,minBarLength:f}}=this,s=p||0,S=this.getParsed(i),M=S._custom,D=um(M);let j=S[l.axis],V=0,X=c?this.applyStack(l,S,c):j,re,ae;X!==j&&(V=X-j,X=j),D&&(j=M.barStart,X=M.barEnd-M.barStart,j!==0&&Ys(j)!==Ys(M.barEnd)&&(V=0),V+=j);const H=!ai(p)&&!D?p:V;let Se=l.getPixelForValue(H);if(this.chart.getDataVisibility(i)?re=l.getPixelForValue(V+X):re=Se,ae=re-Se,Math.abs(ae)<f){ae=AT(ae,l,s)*f,j===s&&(Se-=ae/2);const xe=l.getPixelForDecimal(0),Pe=l.getPixelForDecimal(1),Ve=Math.min(xe,Pe),Ue=Math.max(xe,Pe);Se=Math.max(Math.min(Se,Ue),Ve),re=Se+ae,c&&!D&&(S._stacks[l.axis]._visualValues[u]=l.getValueForPixel(re)-l.getValueForPixel(Se))}if(Se===l.getPixelForValue(s)){const xe=Ys(ae)*l.getLineWidthForValue(s)/2;Se+=xe,ae-=xe}return{size:ae,base:Se,head:re,center:re+ae/2}}_calculateBarIndexPixels(i,l){const c=l.scale,u=this.options,p=u.skipNull,f=Gt(u.maxBarThickness,1/0);let s,S;const M=this._getAxisCount();if(l.grouped){const D=p?this._getStackCount(i):l.stackCount,j=u.barThickness==="flex"?LT(i,l,u,D*M):CT(i,l,u,D*M),V=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,X=this._getAxis().indexOf(Gt(V,this.getFirstScaleIdForIndexAxis())),re=this._getStackIndex(this.index,this._cachedMeta.stack,p?i:void 0)+X;s=j.start+j.chunk*re+j.chunk/2,S=Math.min(f,j.chunk*j.ratio)}else s=c.getPixelForValue(this.getParsed(i)[c.axis],i),S=Math.min(f,l.min*l.ratio);return{base:s-S/2,head:s+S/2,center:s,size:S}}draw(){const i=this._cachedMeta,l=i.vScale,c=i.data,u=c.length;let p=0;for(;p<u;++p)this.getParsed(p)[l.axis]!==null&&!c[p].hidden&&c[p].draw(this._ctx)}}class OT extends wl{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(i,l,c,u){const p=super.parsePrimitiveData(i,l,c,u);for(let f=0;f<p.length;f++)p[f]._custom=this.resolveDataElementOptions(f+c).radius;return p}parseArrayData(i,l,c,u){const p=super.parseArrayData(i,l,c,u);for(let f=0;f<p.length;f++){const s=l[c+f];p[f]._custom=Gt(s[2],this.resolveDataElementOptions(f+c).radius)}return p}parseObjectData(i,l,c,u){const p=super.parseObjectData(i,l,c,u);for(let f=0;f<p.length;f++){const s=l[c+f];p[f]._custom=Gt(s&&s.r&&+s.r,this.resolveDataElementOptions(f+c).radius)}return p}getMaxOverflow(){const i=this._cachedMeta.data;let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}getLabelAndValue(i){const l=this._cachedMeta,c=this.chart.data.labels||[],{xScale:u,yScale:p}=l,f=this.getParsed(i),s=u.getLabelForValue(f.x),S=p.getLabelForValue(f.y),M=f._custom;return{label:c[i]||"",value:"("+s+", "+S+(M?", "+M:"")+")"}}update(i){const l=this._cachedMeta.data;this.updateElements(l,0,l.length,i)}updateElements(i,l,c,u){const p=u==="reset",{iScale:f,vScale:s}=this._cachedMeta,{sharedOptions:S,includeOptions:M}=this._getSharedOptions(l,u),D=f.axis,j=s.axis;for(let V=l;V<l+c;V++){const X=i[V],re=!p&&this.getParsed(V),ae={},H=ae[D]=p?f.getPixelForDecimal(.5):f.getPixelForValue(re[D]),Se=ae[j]=p?s.getBasePixel():s.getPixelForValue(re[j]);ae.skip=isNaN(H)||isNaN(Se),M&&(ae.options=S||this.resolveDataElementOptions(V,X.active?"active":u),p&&(ae.options.radius=0)),this.updateElement(X,V,ae,u)}}resolveDataElementOptions(i,l){const c=this.getParsed(i);let u=super.resolveDataElementOptions(i,l);u.$shared&&(u=Object.assign({},u,{$shared:!1}));const p=u.radius;return l!=="active"&&(u.radius=0),u.radius+=Gt(c&&c._custom,p),u}}function jT(r,i,l){let c=1,u=1,p=0,f=0;if(i<nn){const s=r,S=s+i,M=Math.cos(s),D=Math.sin(s),j=Math.cos(S),V=Math.sin(S),X=(Pe,Ve,Ue)=>Xd(Pe,s,S,!0)?1:Math.max(Ve,Ve*l,Ue,Ue*l),re=(Pe,Ve,Ue)=>Xd(Pe,s,S,!0)?-1:Math.min(Ve,Ve*l,Ue,Ue*l),ae=X(0,M,j),H=X(Mn,D,V),Se=re(bi,M,j),xe=re(bi+Mn,D,V);c=(ae-Se)/2,u=(H-xe)/2,p=-(ae+Se)/2,f=-(H+xe)/2}return{ratioX:c,ratioY:u,offsetX:p,offsetY:f}}class hg extends wl{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:i=>i!=="spacing",_indexable:i=>i!=="spacing"&&!i.startsWith("borderDash")&&!i.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const l=i.data,{labels:{pointStyle:c,textAlign:u,color:p,useBorderRadius:f,borderRadius:s}}=i.legend.options;return l.labels.length&&l.datasets.length?l.labels.map((S,M)=>{const j=i.getDatasetMeta(0).controller.getStyle(M);return{text:S,fillStyle:j.backgroundColor,fontColor:p,hidden:!i.getDataVisibility(M),lineDash:j.borderDash,lineDashOffset:j.borderDashOffset,lineJoin:j.borderJoinStyle,lineWidth:j.borderWidth,strokeStyle:j.borderColor,textAlign:u,pointStyle:c,borderRadius:f&&(s||j.borderRadius),index:M}}):[]}},onClick(i,l,c){c.chart.toggleDataVisibility(l.index),c.chart.update()}}}};constructor(i,l){super(i,l),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(i,l){const c=this.getDataset().data,u=this._cachedMeta;if(this._parsing===!1)u._parsed=c;else{let p=S=>+c[S];if(ri(c[i])){const{key:S="value"}=this._parsing;p=M=>+_l(c[M],S)}let f,s;for(f=i,s=i+l;f<s;++f)u._parsed[f]=p(f)}}_getRotation(){return cs(this.options.rotation-90)}_getCircumference(){return cs(this.options.circumference)}_getRotationExtents(){let i=nn,l=-nn;for(let c=0;c<this.chart.data.datasets.length;++c)if(this.chart.isDatasetVisible(c)&&this.chart.getDatasetMeta(c).type===this._type){const u=this.chart.getDatasetMeta(c).controller,p=u._getRotation(),f=u._getCircumference();i=Math.min(i,p),l=Math.max(l,p+f)}return{rotation:i,circumference:l-i}}update(i){const l=this.chart,{chartArea:c}=l,u=this._cachedMeta,p=u.data,f=this.getMaxBorderWidth()+this.getMaxOffset(p)+this.options.spacing,s=Math.max((Math.min(c.width,c.height)-f)/2,0),S=Math.min(Hk(this.options.cutout,s),1),M=this._getRingWeight(this.index),{circumference:D,rotation:j}=this._getRotationExtents(),{ratioX:V,ratioY:X,offsetX:re,offsetY:ae}=jT(j,D,S),H=(c.width-f)/V,Se=(c.height-f)/X,xe=Math.max(Math.min(H,Se)/2,0),Pe=Bx(this.options.radius,xe),Ve=Math.max(Pe*S,0),Ue=(Pe-Ve)/this._getVisibleDatasetWeightTotal();this.offsetX=re*Pe,this.offsetY=ae*Pe,u.total=this.calculateTotal(),this.outerRadius=Pe-Ue*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Ue*M,0),this.updateElements(p,0,p.length,i)}_circumference(i,l){const c=this.options,u=this._cachedMeta,p=this._getCircumference();return l&&c.animation.animateRotate||!this.chart.getDataVisibility(i)||u._parsed[i]===null||u.data[i].hidden?0:this.calculateCircumference(u._parsed[i]*p/nn)}updateElements(i,l,c,u){const p=u==="reset",f=this.chart,s=f.chartArea,M=f.options.animation,D=(s.left+s.right)/2,j=(s.top+s.bottom)/2,V=p&&M.animateScale,X=V?0:this.innerRadius,re=V?0:this.outerRadius,{sharedOptions:ae,includeOptions:H}=this._getSharedOptions(l,u);let Se=this._getRotation(),xe;for(xe=0;xe<l;++xe)Se+=this._circumference(xe,p);for(xe=l;xe<l+c;++xe){const Pe=this._circumference(xe,p),Ve=i[xe],Ue={x:D+this.offsetX,y:j+this.offsetY,startAngle:Se,endAngle:Se+Pe,circumference:Pe,outerRadius:re,innerRadius:X};H&&(Ue.options=ae||this.resolveDataElementOptions(xe,Ve.active?"active":u)),Se+=Pe,this.updateElement(Ve,xe,Ue,u)}}calculateTotal(){const i=this._cachedMeta,l=i.data;let c=0,u;for(u=0;u<l.length;u++){const p=i._parsed[u];p!==null&&!isNaN(p)&&this.chart.getDataVisibility(u)&&!l[u].hidden&&(c+=Math.abs(p))}return c}calculateCircumference(i){const l=this._cachedMeta.total;return l>0&&!isNaN(i)?nn*(Math.abs(i)/l):0}getLabelAndValue(i){const l=this._cachedMeta,c=this.chart,u=c.data.labels||[],p=nc(l._parsed[i],c.options.locale);return{label:u[i]||"",value:p}}getMaxBorderWidth(i){let l=0;const c=this.chart;let u,p,f,s,S;if(!i){for(u=0,p=c.data.datasets.length;u<p;++u)if(c.isDatasetVisible(u)){f=c.getDatasetMeta(u),i=f.data,s=f.controller;break}}if(!i)return 0;for(u=0,p=i.length;u<p;++u)S=s.resolveDataElementOptions(u),S.borderAlign!=="inner"&&(l=Math.max(l,S.borderWidth||0,S.hoverBorderWidth||0));return l}getMaxOffset(i){let l=0;for(let c=0,u=i.length;c<u;++c){const p=this.resolveDataElementOptions(c);l=Math.max(l,p.offset||0,p.hoverOffset||0)}return l}_getRingWeightOffset(i){let l=0;for(let c=0;c<i;++c)this.chart.isDatasetVisible(c)&&(l+=this._getRingWeight(c));return l}_getRingWeight(i){return Math.max(Gt(this.chart.data.datasets[i].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class BT extends wl{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(i){const l=this._cachedMeta,{dataset:c,data:u=[],_dataset:p}=l,f=this.chart._animationsDisabled;let{start:s,count:S}=Wx(l,u,f);this._drawStart=s,this._drawCount=S,Hx(l)&&(s=0,S=u.length),c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!p._decimated,c.points=u;const M=this.resolveDatasetElementOptions(i);this.options.showLine||(M.borderWidth=0),M.segment=this.options.segment,this.updateElement(c,void 0,{animated:!f,options:M},i),this.updateElements(u,s,S,i)}updateElements(i,l,c,u){const p=u==="reset",{iScale:f,vScale:s,_stacked:S,_dataset:M}=this._cachedMeta,{sharedOptions:D,includeOptions:j}=this._getSharedOptions(l,u),V=f.axis,X=s.axis,{spanGaps:re,segment:ae}=this.options,H=Th(re)?re:Number.POSITIVE_INFINITY,Se=this.chart._animationsDisabled||p||u==="none",xe=l+c,Pe=i.length;let Ve=l>0&&this.getParsed(l-1);for(let Ue=0;Ue<Pe;++Ue){const et=i[Ue],Je=Se?et:{};if(Ue<l||Ue>=xe){Je.skip=!0;continue}const nt=this.getParsed(Ue),mt=ai(nt[X]),Tt=Je[V]=f.getPixelForValue(nt[V],Ue),vt=Je[X]=p||mt?s.getBasePixel():s.getPixelForValue(S?this.applyStack(s,nt,S):nt[X],Ue);Je.skip=isNaN(Tt)||isNaN(vt)||mt,Je.stop=Ue>0&&Math.abs(nt[V]-Ve[V])>H,ae&&(Je.parsed=nt,Je.raw=M.data[Ue]),j&&(Je.options=D||this.resolveDataElementOptions(Ue,et.active?"active":u)),Se||this.updateElement(et,Ue,Je,u),Ve=nt}}getMaxOverflow(){const i=this._cachedMeta,l=i.dataset,c=l.options&&l.options.borderWidth||0,u=i.data||[];if(!u.length)return c;const p=u[0].size(this.resolveDataElementOptions(0)),f=u[u.length-1].size(this.resolveDataElementOptions(u.length-1));return Math.max(c,p,f)/2}draw(){const i=this._cachedMeta;i.dataset.updateControlPoints(this.chart.chartArea,i.iScale.axis),super.draw()}}class fb extends wl{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const l=i.data;if(l.labels.length&&l.datasets.length){const{labels:{pointStyle:c,color:u}}=i.legend.options;return l.labels.map((p,f)=>{const S=i.getDatasetMeta(0).controller.getStyle(f);return{text:p,fillStyle:S.backgroundColor,strokeStyle:S.borderColor,fontColor:u,lineWidth:S.borderWidth,pointStyle:c,hidden:!i.getDataVisibility(f),index:f}})}return[]}},onClick(i,l,c){c.chart.toggleDataVisibility(l.index),c.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(i,l){super(i,l),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(i){const l=this._cachedMeta,c=this.chart,u=c.data.labels||[],p=nc(l._parsed[i].r,c.options.locale);return{label:u[i]||"",value:p}}parseObjectData(i,l,c,u){return ib.bind(this)(i,l,c,u)}update(i){const l=this._cachedMeta.data;this._updateRadius(),this.updateElements(l,0,l.length,i)}getMinMax(){const i=this._cachedMeta,l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return i.data.forEach((c,u)=>{const p=this.getParsed(u).r;!isNaN(p)&&this.chart.getDataVisibility(u)&&(p<l.min&&(l.min=p),p>l.max&&(l.max=p))}),l}_updateRadius(){const i=this.chart,l=i.chartArea,c=i.options,u=Math.min(l.right-l.left,l.bottom-l.top),p=Math.max(u/2,0),f=Math.max(c.cutoutPercentage?p/100*c.cutoutPercentage:1,0),s=(p-f)/i.getVisibleDatasetCount();this.outerRadius=p-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(i,l,c,u){const p=u==="reset",f=this.chart,S=f.options.animation,M=this._cachedMeta.rScale,D=M.xCenter,j=M.yCenter,V=M.getIndexAngle(0)-.5*bi;let X=V,re;const ae=360/this.countVisibleElements();for(re=0;re<l;++re)X+=this._computeAngle(re,u,ae);for(re=l;re<l+c;re++){const H=i[re];let Se=X,xe=X+this._computeAngle(re,u,ae),Pe=f.getDataVisibility(re)?M.getDistanceFromCenterForValue(this.getParsed(re).r):0;X=xe,p&&(S.animateScale&&(Pe=0),S.animateRotate&&(Se=xe=V));const Ve={x:D,y:j,innerRadius:0,outerRadius:Pe,startAngle:Se,endAngle:xe,options:this.resolveDataElementOptions(re,H.active?"active":u)};this.updateElement(H,re,Ve,u)}}countVisibleElements(){const i=this._cachedMeta;let l=0;return i.data.forEach((c,u)=>{!isNaN(this.getParsed(u).r)&&this.chart.getDataVisibility(u)&&l++}),l}_computeAngle(i,l,c){return this.chart.getDataVisibility(i)?cs(this.resolveDataElementOptions(i,l).angle||c):0}}class $T extends hg{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class VT extends wl{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(i){const l=this._cachedMeta.vScale,c=this.getParsed(i);return{label:l.getLabels()[i],value:""+l.getLabelForValue(c[l.axis])}}parseObjectData(i,l,c,u){return ib.bind(this)(i,l,c,u)}update(i){const l=this._cachedMeta,c=l.dataset,u=l.data||[],p=l.iScale.getLabels();if(c.points=u,i!=="resize"){const f=this.resolveDatasetElementOptions(i);this.options.showLine||(f.borderWidth=0);const s={_loop:!0,_fullLoop:p.length===u.length,options:f};this.updateElement(c,void 0,s,i)}this.updateElements(u,0,u.length,i)}updateElements(i,l,c,u){const p=this._cachedMeta.rScale,f=u==="reset";for(let s=l;s<l+c;s++){const S=i[s],M=this.resolveDataElementOptions(s,S.active?"active":u),D=p.getPointPositionForValue(s,this.getParsed(s).r),j=f?p.xCenter:D.x,V=f?p.yCenter:D.y,X={x:j,y:V,angle:D.angle,skip:isNaN(j)||isNaN(V),options:M};this.updateElement(S,s,X,u)}}}class NT extends wl{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(i){const l=this._cachedMeta,c=this.chart.data.labels||[],{xScale:u,yScale:p}=l,f=this.getParsed(i),s=u.getLabelForValue(f.x),S=p.getLabelForValue(f.y);return{label:c[i]||"",value:"("+s+", "+S+")"}}update(i){const l=this._cachedMeta,{data:c=[]}=l,u=this.chart._animationsDisabled;let{start:p,count:f}=Wx(l,c,u);if(this._drawStart=p,this._drawCount=f,Hx(l)&&(p=0,f=c.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:S}=l;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!S._decimated,s.points=c;const M=this.resolveDatasetElementOptions(i);M.segment=this.options.segment,this.updateElement(s,void 0,{animated:!u,options:M},i)}else this.datasetElementType&&(delete l.dataset,this.datasetElementType=!1);this.updateElements(c,p,f,i)}addElements(){const{showLine:i}=this.options;!this.datasetElementType&&i&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(i,l,c,u){const p=u==="reset",{iScale:f,vScale:s,_stacked:S,_dataset:M}=this._cachedMeta,D=this.resolveDataElementOptions(l,u),j=this.getSharedOptions(D),V=this.includeOptions(u,j),X=f.axis,re=s.axis,{spanGaps:ae,segment:H}=this.options,Se=Th(ae)?ae:Number.POSITIVE_INFINITY,xe=this.chart._animationsDisabled||p||u==="none";let Pe=l>0&&this.getParsed(l-1);for(let Ve=l;Ve<l+c;++Ve){const Ue=i[Ve],et=this.getParsed(Ve),Je=xe?Ue:{},nt=ai(et[re]),mt=Je[X]=f.getPixelForValue(et[X],Ve),Tt=Je[re]=p||nt?s.getBasePixel():s.getPixelForValue(S?this.applyStack(s,et,S):et[re],Ve);Je.skip=isNaN(mt)||isNaN(Tt)||nt,Je.stop=Ve>0&&Math.abs(et[X]-Pe[X])>Se,H&&(Je.parsed=et,Je.raw=M.data[Ve]),V&&(Je.options=j||this.resolveDataElementOptions(Ve,Ue.active?"active":u)),xe||this.updateElement(Ue,Ve,Je,u),Pe=et}this.updateSharedOptions(j,u,D)}getMaxOverflow(){const i=this._cachedMeta,l=i.data||[];if(!this.options.showLine){let s=0;for(let S=l.length-1;S>=0;--S)s=Math.max(s,l[S].size(this.resolveDataElementOptions(S))/2);return s>0&&s}const c=i.dataset,u=c.options&&c.options.borderWidth||0;if(!l.length)return u;const p=l[0].size(this.resolveDataElementOptions(0)),f=l[l.length-1].size(this.resolveDataElementOptions(l.length-1));return Math.max(u,p,f)/2}}var UT=Object.freeze({__proto__:null,BarController:FT,BubbleController:OT,DoughnutController:hg,LineController:BT,PieController:$T,PolarAreaController:fb,RadarController:VT,ScatterController:NT});function ru(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dg{static override(i){Object.assign(dg.prototype,i)}options;constructor(i){this.options=i||{}}init(){}formats(){return ru()}parse(){return ru()}format(){return ru()}add(){return ru()}diff(){return ru()}startOf(){return ru()}endOf(){return ru()}}var GT={_date:dg};function qT(r,i,l,c){const{controller:u,data:p,_sorted:f}=r,s=u._cachedMeta.iScale,S=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null;if(s&&i===s.axis&&i!=="r"&&f&&p.length){const M=s._reversePixels?oS:Io;if(c){if(u._sharedOptions){const D=p[0],j=typeof D.getRange=="function"&&D.getRange(i);if(j){const V=M(p,i,l-j),X=M(p,i,l+j);return{lo:V.lo,hi:X.hi}}}}else{const D=M(p,i,l);if(S){const{vScale:j}=u._cachedMeta,{_parsed:V}=r,X=V.slice(0,D.lo+1).reverse().findIndex(ae=>!ai(ae[j.axis]));D.lo-=Math.max(0,X);const re=V.slice(D.hi).findIndex(ae=>!ai(ae[j.axis]));D.hi+=Math.max(0,re)}return D}}return{lo:0,hi:p.length-1}}function $f(r,i,l,c,u){const p=r.getSortedVisibleDatasetMetas(),f=l[i];for(let s=0,S=p.length;s<S;++s){const{index:M,data:D}=p[s],{lo:j,hi:V}=qT(p[s],i,f,u);for(let X=j;X<=V;++X){const re=D[X];re.skip||c(re,M,X)}}}function ZT(r){const i=r.indexOf("x")!==-1,l=r.indexOf("y")!==-1;return function(c,u){const p=i?Math.abs(c.x-u.x):0,f=l?Math.abs(c.y-u.y):0;return Math.sqrt(Math.pow(p,2)+Math.pow(f,2))}}function hm(r,i,l,c,u){const p=[];return!u&&!r.isPointInArea(i)||$f(r,l,i,function(s,S,M){!u&&!Do(s,r.chartArea,0)||s.inRange(i.x,i.y,c)&&p.push({element:s,datasetIndex:S,index:M})},!0),p}function WT(r,i,l,c){let u=[];function p(f,s,S){const{startAngle:M,endAngle:D}=f.getProps(["startAngle","endAngle"],c),{angle:j}=Nx(f,{x:i.x,y:i.y});Xd(j,M,D)&&u.push({element:f,datasetIndex:s,index:S})}return $f(r,l,i,p),u}function HT(r,i,l,c,u,p){let f=[];const s=ZT(l);let S=Number.POSITIVE_INFINITY;function M(D,j,V){const X=D.inRange(i.x,i.y,u);if(c&&!X)return;const re=D.getCenterPoint(u);if(!(!!p||r.isPointInArea(re))&&!X)return;const H=s(i,re);H<S?(f=[{element:D,datasetIndex:j,index:V}],S=H):H===S&&f.push({element:D,datasetIndex:j,index:V})}return $f(r,l,i,M),f}function dm(r,i,l,c,u,p){return!p&&!r.isPointInArea(i)?[]:l==="r"&&!c?WT(r,i,l,u):HT(r,i,l,c,u,p)}function Cv(r,i,l,c,u){const p=[],f=l==="x"?"inXRange":"inYRange";let s=!1;return $f(r,l,i,(S,M,D)=>{S[f]&&S[f](i[l],u)&&(p.push({element:S,datasetIndex:M,index:D}),s=s||S.inRange(i.x,i.y,u))}),c&&!s?[]:p}var KT={modes:{index(r,i,l,c){const u=ou(i,r),p=l.axis||"x",f=l.includeInvisible||!1,s=l.intersect?hm(r,u,p,c,f):dm(r,u,p,!1,c,f),S=[];return s.length?(r.getSortedVisibleDatasetMetas().forEach(M=>{const D=s[0].index,j=M.data[D];j&&!j.skip&&S.push({element:j,datasetIndex:M.index,index:D})}),S):[]},dataset(r,i,l,c){const u=ou(i,r),p=l.axis||"xy",f=l.includeInvisible||!1;let s=l.intersect?hm(r,u,p,c,f):dm(r,u,p,!1,c,f);if(s.length>0){const S=s[0].datasetIndex,M=r.getDatasetMeta(S).data;s=[];for(let D=0;D<M.length;++D)s.push({element:M[D],datasetIndex:S,index:D})}return s},point(r,i,l,c){const u=ou(i,r),p=l.axis||"xy",f=l.includeInvisible||!1;return hm(r,u,p,c,f)},nearest(r,i,l,c){const u=ou(i,r),p=l.axis||"xy",f=l.includeInvisible||!1;return dm(r,u,p,l.intersect,c,f)},x(r,i,l,c){const u=ou(i,r);return Cv(r,u,"x",l.intersect,c)},y(r,i,l,c){const u=ou(i,r);return Cv(r,u,"y",l.intersect,c)}}};const pb=["left","top","right","bottom"];function Ld(r,i){return r.filter(l=>l.pos===i)}function Lv(r,i){return r.filter(l=>pb.indexOf(l.pos)===-1&&l.box.axis===i)}function Ed(r,i){return r.sort((l,c)=>{const u=i?c:l,p=i?l:c;return u.weight===p.weight?u.index-p.index:u.weight-p.weight})}function YT(r){const i=[];let l,c,u,p,f,s;for(l=0,c=(r||[]).length;l<c;++l)u=r[l],{position:p,options:{stack:f,stackWeight:s=1}}=u,i.push({index:l,box:u,pos:p,horizontal:u.isHorizontal(),weight:u.weight,stack:f&&p+f,stackWeight:s});return i}function XT(r){const i={};for(const l of r){const{stack:c,pos:u,stackWeight:p}=l;if(!c||!pb.includes(u))continue;const f=i[c]||(i[c]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=p}return i}function JT(r,i){const l=XT(r),{vBoxMaxWidth:c,hBoxMaxHeight:u}=i;let p,f,s;for(p=0,f=r.length;p<f;++p){s=r[p];const{fullSize:S}=s.box,M=l[s.stack],D=M&&s.stackWeight/M.weight;s.horizontal?(s.width=D?D*c:S&&i.availableWidth,s.height=u):(s.width=c,s.height=D?D*u:S&&i.availableHeight)}return l}function QT(r){const i=YT(r),l=Ed(i.filter(M=>M.box.fullSize),!0),c=Ed(Ld(i,"left"),!0),u=Ed(Ld(i,"right")),p=Ed(Ld(i,"top"),!0),f=Ed(Ld(i,"bottom")),s=Lv(i,"x"),S=Lv(i,"y");return{fullSize:l,leftAndTop:c.concat(p),rightAndBottom:u.concat(S).concat(f).concat(s),chartArea:Ld(i,"chartArea"),vertical:c.concat(u).concat(S),horizontal:p.concat(f).concat(s)}}function Ev(r,i,l,c){return Math.max(r[l],i[l])+Math.max(r[c],i[c])}function mb(r,i){r.top=Math.max(r.top,i.top),r.left=Math.max(r.left,i.left),r.bottom=Math.max(r.bottom,i.bottom),r.right=Math.max(r.right,i.right)}function e2(r,i,l,c){const{pos:u,box:p}=l,f=r.maxPadding;if(!ri(u)){l.size&&(r[u]-=l.size);const j=c[l.stack]||{size:0,count:1};j.size=Math.max(j.size,l.horizontal?p.height:p.width),l.size=j.size/j.count,r[u]+=l.size}p.getPadding&&mb(f,p.getPadding());const s=Math.max(0,i.outerWidth-Ev(f,r,"left","right")),S=Math.max(0,i.outerHeight-Ev(f,r,"top","bottom")),M=s!==r.w,D=S!==r.h;return r.w=s,r.h=S,l.horizontal?{same:M,other:D}:{same:D,other:M}}function t2(r){const i=r.maxPadding;function l(c){const u=Math.max(i[c]-r[c],0);return r[c]+=u,u}r.y+=l("top"),r.x+=l("left"),l("right"),l("bottom")}function i2(r,i){const l=i.maxPadding;function c(u){const p={left:0,top:0,right:0,bottom:0};return u.forEach(f=>{p[f]=Math.max(i[f],l[f])}),p}return c(r?["left","right"]:["top","bottom"])}function Bd(r,i,l,c){const u=[];let p,f,s,S,M,D;for(p=0,f=r.length,M=0;p<f;++p){s=r[p],S=s.box,S.update(s.width||i.w,s.height||i.h,i2(s.horizontal,i));const{same:j,other:V}=e2(i,l,s,c);M|=j&&u.length,D=D||V,S.fullSize||u.push(s)}return M&&Bd(u,i,l,c)||D}function of(r,i,l,c,u){r.top=l,r.left=i,r.right=i+c,r.bottom=l+u,r.width=c,r.height=u}function Av(r,i,l,c){const u=l.padding;let{x:p,y:f}=i;for(const s of r){const S=s.box,M=c[s.stack]||{placed:0,weight:1},D=s.stackWeight/M.weight||1;if(s.horizontal){const j=i.w*D,V=M.size||S.height;Yd(M.start)&&(f=M.start),S.fullSize?of(S,u.left,f,l.outerWidth-u.right-u.left,V):of(S,i.left+M.placed,f,j,V),M.start=f,M.placed+=j,f=S.bottom}else{const j=i.h*D,V=M.size||S.width;Yd(M.start)&&(p=M.start),S.fullSize?of(S,p,u.top,V,l.outerHeight-u.bottom-u.top):of(S,p,i.top+M.placed,V,j),M.start=p,M.placed+=j,p=S.right}}i.x=p,i.y=f}var Ta={addBox(r,i){r.boxes||(r.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(l){i.draw(l)}}]},r.boxes.push(i)},removeBox(r,i){const l=r.boxes?r.boxes.indexOf(i):-1;l!==-1&&r.boxes.splice(l,1)},configure(r,i,l){i.fullSize=l.fullSize,i.position=l.position,i.weight=l.weight},update(r,i,l,c){if(!r)return;const u=Pa(r.options.layout.padding),p=Math.max(i-u.width,0),f=Math.max(l-u.height,0),s=QT(r.boxes),S=s.vertical,M=s.horizontal;Ai(r.boxes,ae=>{typeof ae.beforeLayout=="function"&&ae.beforeLayout()});const D=S.reduce((ae,H)=>H.box.options&&H.box.options.display===!1?ae:ae+1,0)||1,j=Object.freeze({outerWidth:i,outerHeight:l,padding:u,availableWidth:p,availableHeight:f,vBoxMaxWidth:p/2/D,hBoxMaxHeight:f/2}),V=Object.assign({},u);mb(V,Pa(c));const X=Object.assign({maxPadding:V,w:p,h:f,x:u.left,y:u.top},u),re=JT(S.concat(M),j);Bd(s.fullSize,X,j,re),Bd(S,X,j,re),Bd(M,X,j,re)&&Bd(S,X,j,re),t2(X),Av(s.leftAndTop,X,j,re),X.x+=X.w,X.y+=X.h,Av(s.rightAndBottom,X,j,re),r.chartArea={left:X.left,top:X.top,right:X.left+X.w,bottom:X.top+X.h,height:X.h,width:X.w},Ai(s.chartArea,ae=>{const H=ae.box;Object.assign(H,r.chartArea),H.update(X.w,X.h,{left:0,top:0,right:0,bottom:0})})}};class gb{acquireContext(i,l){}releaseContext(i){return!1}addEventListener(i,l,c){}removeEventListener(i,l,c){}getDevicePixelRatio(){return 1}getMaximumSize(i,l,c,u){return l=Math.max(0,l||i.width),c=c||i.height,{width:l,height:Math.max(0,u?Math.floor(l/u):c)}}isAttached(i){return!0}updateConfig(i){}}class n2 extends gb{acquireContext(i){return i&&i.getContext&&i.getContext("2d")||null}updateConfig(i){i.options.animation=!1}}const xf="$chartjs",a2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Iv=r=>r===null||r==="";function r2(r,i){const l=r.style,c=r.getAttribute("height"),u=r.getAttribute("width");if(r[xf]={initial:{height:c,width:u,style:{display:l.display,height:l.height,width:l.width}}},l.display=l.display||"block",l.boxSizing=l.boxSizing||"border-box",Iv(u)){const p=mv(r,"width");p!==void 0&&(r.width=p)}if(Iv(c))if(r.style.height==="")r.height=r.width/(i||2);else{const p=mv(r,"height");p!==void 0&&(r.height=p)}return r}const _b=eT?{passive:!0}:!1;function s2(r,i,l){r&&r.addEventListener(i,l,_b)}function o2(r,i,l){r&&r.canvas&&r.canvas.removeEventListener(i,l,_b)}function l2(r,i){const l=a2[r.type]||r.type,{x:c,y:u}=ou(r,i);return{type:l,chart:i,native:r,x:c!==void 0?c:null,y:u!==void 0?u:null}}function Lf(r,i){for(const l of r)if(l===i||l.contains(i))return!0}function u2(r,i,l){const c=r.canvas,u=new MutationObserver(p=>{let f=!1;for(const s of p)f=f||Lf(s.addedNodes,c),f=f&&!Lf(s.removedNodes,c);f&&l()});return u.observe(document,{childList:!0,subtree:!0}),u}function h2(r,i,l){const c=r.canvas,u=new MutationObserver(p=>{let f=!1;for(const s of p)f=f||Lf(s.removedNodes,c),f=f&&!Lf(s.addedNodes,c);f&&l()});return u.observe(document,{childList:!0,subtree:!0}),u}const Qd=new Map;let Dv=0;function yb(){const r=window.devicePixelRatio;r!==Dv&&(Dv=r,Qd.forEach((i,l)=>{l.currentDevicePixelRatio!==r&&i()}))}function d2(r,i){Qd.size||window.addEventListener("resize",yb),Qd.set(r,i)}function c2(r){Qd.delete(r),Qd.size||window.removeEventListener("resize",yb)}function f2(r,i,l){const c=r.canvas,u=c&&ug(c);if(!u)return;const p=Zx((s,S)=>{const M=u.clientWidth;l(s,S),M<u.clientWidth&&l()},window),f=new ResizeObserver(s=>{const S=s[0],M=S.contentRect.width,D=S.contentRect.height;M===0&&D===0||p(M,D)});return f.observe(u),d2(r,p),f}function cm(r,i,l){l&&l.disconnect(),i==="resize"&&c2(r)}function p2(r,i,l){const c=r.canvas,u=Zx(p=>{r.ctx!==null&&l(l2(p,r))},r);return s2(c,i,u),u}class m2 extends gb{acquireContext(i,l){const c=i&&i.getContext&&i.getContext("2d");return c&&c.canvas===i?(r2(i,l),c):null}releaseContext(i){const l=i.canvas;if(!l[xf])return!1;const c=l[xf].initial;["height","width"].forEach(p=>{const f=c[p];ai(f)?l.removeAttribute(p):l.setAttribute(p,f)});const u=c.style||{};return Object.keys(u).forEach(p=>{l.style[p]=u[p]}),l.width=l.width,delete l[xf],!0}addEventListener(i,l,c){this.removeEventListener(i,l);const u=i.$proxies||(i.$proxies={}),f={attach:u2,detach:h2,resize:f2}[l]||p2;u[l]=f(i,l,c)}removeEventListener(i,l){const c=i.$proxies||(i.$proxies={}),u=c[l];if(!u)return;({attach:cm,detach:cm,resize:cm}[l]||o2)(i,l,u),c[l]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(i,l,c,u){return QS(i,l,c,u)}isAttached(i){const l=i&&ug(i);return!!(l&&l.isConnected)}}function g2(r){return!lg()||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?n2:m2}let Ro=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(i){const{x:l,y:c}=this.getProps(["x","y"],i);return{x:l,y:c}}hasValue(){return Th(this.x)&&Th(this.y)}getProps(i,l){const c=this.$animations;if(!l||!c)return this;const u={};return i.forEach(p=>{u[p]=c[p]&&c[p].active()?c[p]._to:this[p]}),u}};function _2(r,i){const l=r.options.ticks,c=y2(r),u=Math.min(l.maxTicksLimit||c,c),p=l.major.enabled?x2(i):[],f=p.length,s=p[0],S=p[f-1],M=[];if(f>u)return b2(i,M,p,f/u),M;const D=v2(p,i,u);if(f>0){let j,V;const X=f>1?Math.round((S-s)/(f-1)):null;for(lf(i,M,D,ai(X)?0:s-X,s),j=0,V=f-1;j<V;j++)lf(i,M,D,p[j],p[j+1]);return lf(i,M,D,S,ai(X)?i.length:S+X),M}return lf(i,M,D),M}function y2(r){const i=r.options.offset,l=r._tickSize(),c=r._length/l+(i?0:1),u=r._maxLength/l;return Math.floor(Math.min(c,u))}function v2(r,i,l){const c=w2(r),u=i.length/l;if(!c)return Math.max(u,1);const p=iS(c);for(let f=0,s=p.length-1;f<s;f++){const S=p[f];if(S>u)return S}return Math.max(u,1)}function x2(r){const i=[];let l,c;for(l=0,c=r.length;l<c;l++)r[l].major&&i.push(l);return i}function b2(r,i,l,c){let u=0,p=l[0],f;for(c=Math.ceil(c),f=0;f<r.length;f++)f===p&&(i.push(r[f]),u++,p=l[u*c])}function lf(r,i,l,c,u){const p=Gt(c,0),f=Math.min(Gt(u,r.length),r.length);let s=0,S,M,D;for(l=Math.ceil(l),u&&(S=u-c,l=S/Math.floor(S/l)),D=p;D<0;)s++,D=Math.round(p+s*l);for(M=Math.max(p,0);M<f;M++)M===D&&(i.push(r[M]),s++,D=Math.round(p+s*l))}function w2(r){const i=r.length;let l,c;if(i<2)return!1;for(c=r[0],l=1;l<i;++l)if(r[l]-r[l-1]!==c)return!1;return c}const k2=r=>r==="left"?"right":r==="right"?"left":r,zv=(r,i,l)=>i==="top"||i==="left"?r[i]+l:r[i]-l,Rv=(r,i)=>Math.min(i||r,r);function Fv(r,i){const l=[],c=r.length/i,u=r.length;let p=0;for(;p<u;p+=c)l.push(r[Math.floor(p)]);return l}function S2(r,i,l){const c=r.ticks.length,u=Math.min(i,c-1),p=r._startPixel,f=r._endPixel,s=1e-6;let S=r.getPixelForTick(u),M;if(!(l&&(c===1?M=Math.max(S-p,f-S):i===0?M=(r.getPixelForTick(1)-S)/2:M=(S-r.getPixelForTick(u-1))/2,S+=u<i?M:-M,S<p-s||S>f+s)))return S}function T2(r,i){Ai(r,l=>{const c=l.gc,u=c.length/2;let p;if(u>i){for(p=0;p<u;++p)delete l.data[c[p]];c.splice(0,u)}})}function Ad(r){return r.drawTicks?r.tickLength:0}function Ov(r,i){if(!r.display)return 0;const l=Hn(r.font,i),c=Pa(r.padding);return(un(r.text)?r.text.length:1)*l.lineHeight+c.height}function P2(r,i){return bl(r,{scale:i,type:"scale"})}function M2(r,i,l){return bl(r,{tick:l,index:i,type:"tick"})}function C2(r,i,l){let c=ig(r);return(l&&i!=="right"||!l&&i==="right")&&(c=k2(c)),c}function L2(r,i,l,c){const{top:u,left:p,bottom:f,right:s,chart:S}=r,{chartArea:M,scales:D}=S;let j=0,V,X,re;const ae=f-u,H=s-p;if(r.isHorizontal()){if(X=ka(c,p,s),ri(l)){const Se=Object.keys(l)[0],xe=l[Se];re=D[Se].getPixelForValue(xe)+ae-i}else l==="center"?re=(M.bottom+M.top)/2+ae-i:re=zv(r,l,i);V=s-p}else{if(ri(l)){const Se=Object.keys(l)[0],xe=l[Se];X=D[Se].getPixelForValue(xe)-H+i}else l==="center"?X=(M.left+M.right)/2-H+i:X=zv(r,l,i);re=ka(c,f,u),j=l==="left"?-Mn:Mn}return{titleX:X,titleY:re,maxWidth:V,rotation:j}}class xu extends Ro{constructor(i){super(),this.id=i.id,this.type=i.type,this.options=void 0,this.ctx=i.ctx,this.chart=i.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(i){this.options=i.setContext(this.getContext()),this.axis=i.axis,this._userMin=this.parse(i.min),this._userMax=this.parse(i.max),this._suggestedMin=this.parse(i.suggestedMin),this._suggestedMax=this.parse(i.suggestedMax)}parse(i,l){return i}getUserBounds(){let{_userMin:i,_userMax:l,_suggestedMin:c,_suggestedMax:u}=this;return i=Sr(i,Number.POSITIVE_INFINITY),l=Sr(l,Number.NEGATIVE_INFINITY),c=Sr(c,Number.POSITIVE_INFINITY),u=Sr(u,Number.NEGATIVE_INFINITY),{min:Sr(i,c),max:Sr(l,u),minDefined:vn(i),maxDefined:vn(l)}}getMinMax(i){let{min:l,max:c,minDefined:u,maxDefined:p}=this.getUserBounds(),f;if(u&&p)return{min:l,max:c};const s=this.getMatchingVisibleMetas();for(let S=0,M=s.length;S<M;++S)f=s[S].controller.getMinMax(this,i),u||(l=Math.min(l,f.min)),p||(c=Math.max(c,f.max));return l=p&&l>c?c:l,c=u&&l>c?l:c,{min:Sr(l,Sr(c,l)),max:Sr(c,Sr(l,c))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const i=this.chart.data;return this.options.labels||(this.isHorizontal()?i.xLabels:i.yLabels)||i.labels||[]}getLabelItems(i=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(i))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ki(this.options.beforeUpdate,[this])}update(i,l,c){const{beginAtZero:u,grace:p,ticks:f}=this.options,s=f.sampleSize;this.beforeUpdate(),this.maxWidth=i,this.maxHeight=l,this._margins=c=Object.assign({left:0,right:0,top:0,bottom:0},c),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+c.left+c.right:this.height+c.top+c.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=AS(this,p,u),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const S=s<this.ticks.length;this._convertTicksToLabels(S?Fv(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||f.source==="auto")&&(this.ticks=_2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),S&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let i=this.options.reverse,l,c;this.isHorizontal()?(l=this.left,c=this.right):(l=this.top,c=this.bottom,i=!i),this._startPixel=l,this._endPixel=c,this._reversePixels=i,this._length=c-l,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ki(this.options.afterUpdate,[this])}beforeSetDimensions(){Ki(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ki(this.options.afterSetDimensions,[this])}_callHooks(i){this.chart.notifyPlugins(i,this.getContext()),Ki(this.options[i],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ki(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(i){const l=this.options.ticks;let c,u,p;for(c=0,u=i.length;c<u;c++)p=i[c],p.label=Ki(l.callback,[p.value,c,i],this)}afterTickToLabelConversion(){Ki(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ki(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const i=this.options,l=i.ticks,c=Rv(this.ticks.length,i.ticks.maxTicksLimit),u=l.minRotation||0,p=l.maxRotation;let f=u,s,S,M;if(!this._isVisible()||!l.display||u>=p||c<=1||!this.isHorizontal()){this.labelRotation=u;return}const D=this._getLabelSizes(),j=D.widest.width,V=D.highest.height,X=sa(this.chart.width-j,0,this.maxWidth);s=i.offset?this.maxWidth/c:X/(c-1),j+6>s&&(s=X/(c-(i.offset?.5:1)),S=this.maxHeight-Ad(i.grid)-l.padding-Ov(i.title,this.chart.options.font),M=Math.sqrt(j*j+V*V),f=eg(Math.min(Math.asin(sa((D.highest.height+6)/s,-1,1)),Math.asin(sa(S/M,-1,1))-Math.asin(sa(V/M,-1,1)))),f=Math.max(u,Math.min(p,f))),this.labelRotation=f}afterCalculateLabelRotation(){Ki(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ki(this.options.beforeFit,[this])}fit(){const i={width:0,height:0},{chart:l,options:{ticks:c,title:u,grid:p}}=this,f=this._isVisible(),s=this.isHorizontal();if(f){const S=Ov(u,l.options.font);if(s?(i.width=this.maxWidth,i.height=Ad(p)+S):(i.height=this.maxHeight,i.width=Ad(p)+S),c.display&&this.ticks.length){const{first:M,last:D,widest:j,highest:V}=this._getLabelSizes(),X=c.padding*2,re=cs(this.labelRotation),ae=Math.cos(re),H=Math.sin(re);if(s){const Se=c.mirror?0:H*j.width+ae*V.height;i.height=Math.min(this.maxHeight,i.height+Se+X)}else{const Se=c.mirror?0:ae*j.width+H*V.height;i.width=Math.min(this.maxWidth,i.width+Se+X)}this._calculatePadding(M,D,H,ae)}}this._handleMargins(),s?(this.width=this._length=l.width-this._margins.left-this._margins.right,this.height=i.height):(this.width=i.width,this.height=this._length=l.height-this._margins.top-this._margins.bottom)}_calculatePadding(i,l,c,u){const{ticks:{align:p,padding:f},position:s}=this.options,S=this.labelRotation!==0,M=s!=="top"&&this.axis==="x";if(this.isHorizontal()){const D=this.getPixelForTick(0)-this.left,j=this.right-this.getPixelForTick(this.ticks.length-1);let V=0,X=0;S?M?(V=u*i.width,X=c*l.height):(V=c*i.height,X=u*l.width):p==="start"?X=l.width:p==="end"?V=i.width:p!=="inner"&&(V=i.width/2,X=l.width/2),this.paddingLeft=Math.max((V-D+f)*this.width/(this.width-D),0),this.paddingRight=Math.max((X-j+f)*this.width/(this.width-j),0)}else{let D=l.height/2,j=i.height/2;p==="start"?(D=0,j=i.height):p==="end"&&(D=l.height,j=0),this.paddingTop=D+f,this.paddingBottom=j+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ki(this.options.afterFit,[this])}isHorizontal(){const{axis:i,position:l}=this.options;return l==="top"||l==="bottom"||i==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(i){this.beforeTickToLabelConversion(),this.generateTickLabels(i);let l,c;for(l=0,c=i.length;l<c;l++)ai(i[l].label)&&(i.splice(l,1),c--,l--);this.afterTickToLabelConversion()}_getLabelSizes(){let i=this._labelSizes;if(!i){const l=this.options.ticks.sampleSize;let c=this.ticks;l<c.length&&(c=Fv(c,l)),this._labelSizes=i=this._computeLabelSizes(c,c.length,this.options.ticks.maxTicksLimit)}return i}_computeLabelSizes(i,l,c){const{ctx:u,_longestTextCache:p}=this,f=[],s=[],S=Math.floor(l/Rv(l,c));let M=0,D=0,j,V,X,re,ae,H,Se,xe,Pe,Ve,Ue;for(j=0;j<l;j+=S){if(re=i[j].label,ae=this._resolveTickFontOptions(j),u.font=H=ae.string,Se=p[H]=p[H]||{data:{},gc:[]},xe=ae.lineHeight,Pe=Ve=0,!ai(re)&&!un(re))Pe=Mf(u,Se.data,Se.gc,Pe,re),Ve=xe;else if(un(re))for(V=0,X=re.length;V<X;++V)Ue=re[V],!ai(Ue)&&!un(Ue)&&(Pe=Mf(u,Se.data,Se.gc,Pe,Ue),Ve+=xe);f.push(Pe),s.push(Ve),M=Math.max(Pe,M),D=Math.max(Ve,D)}T2(p,l);const et=f.indexOf(M),Je=s.indexOf(D),nt=mt=>({width:f[mt]||0,height:s[mt]||0});return{first:nt(0),last:nt(l-1),widest:nt(et),highest:nt(Je),widths:f,heights:s}}getLabelForValue(i){return i}getPixelForValue(i,l){return NaN}getValueForPixel(i){}getPixelForTick(i){const l=this.ticks;return i<0||i>l.length-1?null:this.getPixelForValue(l[i].value)}getPixelForDecimal(i){this._reversePixels&&(i=1-i);const l=this._startPixel+i*this._length;return sS(this._alignToPixels?au(this.chart,l,0):l)}getDecimalForPixel(i){const l=(i-this._startPixel)/this._length;return this._reversePixels?1-l:l}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:i,max:l}=this;return i<0&&l<0?l:i>0&&l>0?i:0}getContext(i){const l=this.ticks||[];if(i>=0&&i<l.length){const c=l[i];return c.$context||(c.$context=M2(this.getContext(),i,c))}return this.$context||(this.$context=P2(this.chart.getContext(),this))}_tickSize(){const i=this.options.ticks,l=cs(this.labelRotation),c=Math.abs(Math.cos(l)),u=Math.abs(Math.sin(l)),p=this._getLabelSizes(),f=i.autoSkipPadding||0,s=p?p.widest.width+f:0,S=p?p.highest.height+f:0;return this.isHorizontal()?S*c>s*u?s/c:S/u:S*u<s*c?S/c:s/u}_isVisible(){const i=this.options.display;return i!=="auto"?!!i:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(i){const l=this.axis,c=this.chart,u=this.options,{grid:p,position:f,border:s}=u,S=p.offset,M=this.isHorizontal(),j=this.ticks.length+(S?1:0),V=Ad(p),X=[],re=s.setContext(this.getContext()),ae=re.display?re.width:0,H=ae/2,Se=function(Bt){return au(c,Bt,ae)};let xe,Pe,Ve,Ue,et,Je,nt,mt,Tt,vt,bt,si;if(f==="top")xe=Se(this.bottom),Je=this.bottom-V,mt=xe-H,vt=Se(i.top)+H,si=i.bottom;else if(f==="bottom")xe=Se(this.top),vt=i.top,si=Se(i.bottom)-H,Je=xe+H,mt=this.top+V;else if(f==="left")xe=Se(this.right),et=this.right-V,nt=xe-H,Tt=Se(i.left)+H,bt=i.right;else if(f==="right")xe=Se(this.left),Tt=i.left,bt=Se(i.right)-H,et=xe+H,nt=this.left+V;else if(l==="x"){if(f==="center")xe=Se((i.top+i.bottom)/2+.5);else if(ri(f)){const Bt=Object.keys(f)[0],Vt=f[Bt];xe=Se(this.chart.scales[Bt].getPixelForValue(Vt))}vt=i.top,si=i.bottom,Je=xe+H,mt=Je+V}else if(l==="y"){if(f==="center")xe=Se((i.left+i.right)/2);else if(ri(f)){const Bt=Object.keys(f)[0],Vt=f[Bt];xe=Se(this.chart.scales[Bt].getPixelForValue(Vt))}et=xe-H,nt=et-V,Tt=i.left,bt=i.right}const di=Gt(u.ticks.maxTicksLimit,j),Wt=Math.max(1,Math.ceil(j/di));for(Pe=0;Pe<j;Pe+=Wt){const Bt=this.getContext(Pe),Vt=p.setContext(Bt),xt=s.setContext(Bt),Mt=Vt.lineWidth,wt=Vt.color,Ht=xt.dash||[],mi=xt.dashOffset,ki=Vt.tickWidth,Jt=Vt.tickColor,Ct=Vt.tickBorderDash||[],Pt=Vt.tickBorderDashOffset;Ve=S2(this,Pe,S),Ve!==void 0&&(Ue=au(c,Ve,Mt),M?et=nt=Tt=bt=Ue:Je=mt=vt=si=Ue,X.push({tx1:et,ty1:Je,tx2:nt,ty2:mt,x1:Tt,y1:vt,x2:bt,y2:si,width:Mt,color:wt,borderDash:Ht,borderDashOffset:mi,tickWidth:ki,tickColor:Jt,tickBorderDash:Ct,tickBorderDashOffset:Pt}))}return this._ticksLength=j,this._borderValue=xe,X}_computeLabelItems(i){const l=this.axis,c=this.options,{position:u,ticks:p}=c,f=this.isHorizontal(),s=this.ticks,{align:S,crossAlign:M,padding:D,mirror:j}=p,V=Ad(c.grid),X=V+D,re=j?-D:X,ae=-cs(this.labelRotation),H=[];let Se,xe,Pe,Ve,Ue,et,Je,nt,mt,Tt,vt,bt,si="middle";if(u==="top")et=this.bottom-re,Je=this._getXAxisLabelAlignment();else if(u==="bottom")et=this.top+re,Je=this._getXAxisLabelAlignment();else if(u==="left"){const Wt=this._getYAxisLabelAlignment(V);Je=Wt.textAlign,Ue=Wt.x}else if(u==="right"){const Wt=this._getYAxisLabelAlignment(V);Je=Wt.textAlign,Ue=Wt.x}else if(l==="x"){if(u==="center")et=(i.top+i.bottom)/2+X;else if(ri(u)){const Wt=Object.keys(u)[0],Bt=u[Wt];et=this.chart.scales[Wt].getPixelForValue(Bt)+X}Je=this._getXAxisLabelAlignment()}else if(l==="y"){if(u==="center")Ue=(i.left+i.right)/2-X;else if(ri(u)){const Wt=Object.keys(u)[0],Bt=u[Wt];Ue=this.chart.scales[Wt].getPixelForValue(Bt)}Je=this._getYAxisLabelAlignment(V).textAlign}l==="y"&&(S==="start"?si="top":S==="end"&&(si="bottom"));const di=this._getLabelSizes();for(Se=0,xe=s.length;Se<xe;++Se){Pe=s[Se],Ve=Pe.label;const Wt=p.setContext(this.getContext(Se));nt=this.getPixelForTick(Se)+p.labelOffset,mt=this._resolveTickFontOptions(Se),Tt=mt.lineHeight,vt=un(Ve)?Ve.length:1;const Bt=vt/2,Vt=Wt.color,xt=Wt.textStrokeColor,Mt=Wt.textStrokeWidth;let wt=Je;f?(Ue=nt,Je==="inner"&&(Se===xe-1?wt=this.options.reverse?"left":"right":Se===0?wt=this.options.reverse?"right":"left":wt="center"),u==="top"?M==="near"||ae!==0?bt=-vt*Tt+Tt/2:M==="center"?bt=-di.highest.height/2-Bt*Tt+Tt:bt=-di.highest.height+Tt/2:M==="near"||ae!==0?bt=Tt/2:M==="center"?bt=di.highest.height/2-Bt*Tt:bt=di.highest.height-vt*Tt,j&&(bt*=-1),ae!==0&&!Wt.showLabelBackdrop&&(Ue+=Tt/2*Math.sin(ae))):(et=nt,bt=(1-vt)*Tt/2);let Ht;if(Wt.showLabelBackdrop){const mi=Pa(Wt.backdropPadding),ki=di.heights[Se],Jt=di.widths[Se];let Ct=bt-mi.top,Pt=0-mi.left;switch(si){case"middle":Ct-=ki/2;break;case"bottom":Ct-=ki;break}switch(Je){case"center":Pt-=Jt/2;break;case"right":Pt-=Jt;break;case"inner":Se===xe-1?Pt-=Jt:Se>0&&(Pt-=Jt/2);break}Ht={left:Pt,top:Ct,width:Jt+mi.width,height:ki+mi.height,color:Wt.backdropColor}}H.push({label:Ve,font:mt,textOffset:bt,options:{rotation:ae,color:Vt,strokeColor:xt,strokeWidth:Mt,textAlign:wt,textBaseline:si,translation:[Ue,et],backdrop:Ht}})}return H}_getXAxisLabelAlignment(){const{position:i,ticks:l}=this.options;if(-cs(this.labelRotation))return i==="top"?"left":"right";let u="center";return l.align==="start"?u="left":l.align==="end"?u="right":l.align==="inner"&&(u="inner"),u}_getYAxisLabelAlignment(i){const{position:l,ticks:{crossAlign:c,mirror:u,padding:p}}=this.options,f=this._getLabelSizes(),s=i+p,S=f.widest.width;let M,D;return l==="left"?u?(D=this.right+p,c==="near"?M="left":c==="center"?(M="center",D+=S/2):(M="right",D+=S)):(D=this.right-s,c==="near"?M="right":c==="center"?(M="center",D-=S/2):(M="left",D=this.left)):l==="right"?u?(D=this.left+p,c==="near"?M="right":c==="center"?(M="center",D-=S/2):(M="left",D-=S)):(D=this.left+s,c==="near"?M="left":c==="center"?(M="center",D+=S/2):(M="right",D=this.right)):M="right",{textAlign:M,x:D}}_computeLabelArea(){if(this.options.ticks.mirror)return;const i=this.chart,l=this.options.position;if(l==="left"||l==="right")return{top:0,left:this.left,bottom:i.height,right:this.right};if(l==="top"||l==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:i.width}}drawBackground(){const{ctx:i,options:{backgroundColor:l},left:c,top:u,width:p,height:f}=this;l&&(i.save(),i.fillStyle=l,i.fillRect(c,u,p,f),i.restore())}getLineWidthForValue(i){const l=this.options.grid;if(!this._isVisible()||!l.display)return 0;const u=this.ticks.findIndex(p=>p.value===i);return u>=0?l.setContext(this.getContext(u)).lineWidth:0}drawGrid(i){const l=this.options.grid,c=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(i));let p,f;const s=(S,M,D)=>{!D.width||!D.color||(c.save(),c.lineWidth=D.width,c.strokeStyle=D.color,c.setLineDash(D.borderDash||[]),c.lineDashOffset=D.borderDashOffset,c.beginPath(),c.moveTo(S.x,S.y),c.lineTo(M.x,M.y),c.stroke(),c.restore())};if(l.display)for(p=0,f=u.length;p<f;++p){const S=u[p];l.drawOnChartArea&&s({x:S.x1,y:S.y1},{x:S.x2,y:S.y2},S),l.drawTicks&&s({x:S.tx1,y:S.ty1},{x:S.tx2,y:S.ty2},{color:S.tickColor,width:S.tickWidth,borderDash:S.tickBorderDash,borderDashOffset:S.tickBorderDashOffset})}}drawBorder(){const{chart:i,ctx:l,options:{border:c,grid:u}}=this,p=c.setContext(this.getContext()),f=c.display?p.width:0;if(!f)return;const s=u.setContext(this.getContext(0)).lineWidth,S=this._borderValue;let M,D,j,V;this.isHorizontal()?(M=au(i,this.left,f)-f/2,D=au(i,this.right,s)+s/2,j=V=S):(j=au(i,this.top,f)-f/2,V=au(i,this.bottom,s)+s/2,M=D=S),l.save(),l.lineWidth=p.width,l.strokeStyle=p.color,l.beginPath(),l.moveTo(M,j),l.lineTo(D,V),l.stroke(),l.restore()}drawLabels(i){if(!this.options.ticks.display)return;const c=this.ctx,u=this._computeLabelArea();u&&Of(c,u);const p=this.getLabelItems(i);for(const f of p){const s=f.options,S=f.font,M=f.label,D=f.textOffset;yu(c,M,0,D,S,s)}u&&jf(c)}drawTitle(){const{ctx:i,options:{position:l,title:c,reverse:u}}=this;if(!c.display)return;const p=Hn(c.font),f=Pa(c.padding),s=c.align;let S=p.lineHeight/2;l==="bottom"||l==="center"||ri(l)?(S+=f.bottom,un(c.text)&&(S+=p.lineHeight*(c.text.length-1))):S+=f.top;const{titleX:M,titleY:D,maxWidth:j,rotation:V}=L2(this,S,l,s);yu(i,c.text,0,0,p,{color:c.color,maxWidth:j,rotation:V,textAlign:C2(s,l,u),textBaseline:"middle",translation:[M,D]})}draw(i){this._isVisible()&&(this.drawBackground(),this.drawGrid(i),this.drawBorder(),this.drawTitle(),this.drawLabels(i))}_layers(){const i=this.options,l=i.ticks&&i.ticks.z||0,c=Gt(i.grid&&i.grid.z,-1),u=Gt(i.border&&i.border.z,0);return!this._isVisible()||this.draw!==xu.prototype.draw?[{z:l,draw:p=>{this.draw(p)}}]:[{z:c,draw:p=>{this.drawBackground(),this.drawGrid(p),this.drawTitle()}},{z:u,draw:()=>{this.drawBorder()}},{z:l,draw:p=>{this.drawLabels(p)}}]}getMatchingVisibleMetas(i){const l=this.chart.getSortedVisibleDatasetMetas(),c=this.axis+"AxisID",u=[];let p,f;for(p=0,f=l.length;p<f;++p){const s=l[p];s[c]===this.id&&(!i||s.type===i)&&u.push(s)}return u}_resolveTickFontOptions(i){const l=this.options.ticks.setContext(this.getContext(i));return Hn(l.font)}_maxDigits(){const i=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/i}}class uf{constructor(i,l,c){this.type=i,this.scope=l,this.override=c,this.items=Object.create(null)}isForType(i){return Object.prototype.isPrototypeOf.call(this.type.prototype,i.prototype)}register(i){const l=Object.getPrototypeOf(i);let c;I2(l)&&(c=this.register(l));const u=this.items,p=i.id,f=this.scope+"."+p;if(!p)throw new Error("class does not have id: "+i);return p in u||(u[p]=i,E2(i,f,c),this.override&&hn.override(i.id,i.overrides)),f}get(i){return this.items[i]}unregister(i){const l=this.items,c=i.id,u=this.scope;c in l&&delete l[c],u&&c in hn[u]&&(delete hn[u][c],this.override&&delete _u[c])}}function E2(r,i,l){const c=Kd(Object.create(null),[l?hn.get(l):{},hn.get(i),r.defaults]);hn.set(i,c),r.defaultRoutes&&A2(i,r.defaultRoutes),r.descriptors&&hn.describe(i,r.descriptors)}function A2(r,i){Object.keys(i).forEach(l=>{const c=l.split("."),u=c.pop(),p=[r].concat(c).join("."),f=i[l].split("."),s=f.pop(),S=f.join(".");hn.route(p,u,S,s)})}function I2(r){return"id"in r&&"defaults"in r}class D2{constructor(){this.controllers=new uf(wl,"datasets",!0),this.elements=new uf(Ro,"elements"),this.plugins=new uf(Object,"plugins"),this.scales=new uf(xu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...i){this._each("register",i)}remove(...i){this._each("unregister",i)}addControllers(...i){this._each("register",i,this.controllers)}addElements(...i){this._each("register",i,this.elements)}addPlugins(...i){this._each("register",i,this.plugins)}addScales(...i){this._each("register",i,this.scales)}getController(i){return this._get(i,this.controllers,"controller")}getElement(i){return this._get(i,this.elements,"element")}getPlugin(i){return this._get(i,this.plugins,"plugin")}getScale(i){return this._get(i,this.scales,"scale")}removeControllers(...i){this._each("unregister",i,this.controllers)}removeElements(...i){this._each("unregister",i,this.elements)}removePlugins(...i){this._each("unregister",i,this.plugins)}removeScales(...i){this._each("unregister",i,this.scales)}_each(i,l,c){[...l].forEach(u=>{const p=c||this._getRegistryForType(u);c||p.isForType(u)||p===this.plugins&&u.id?this._exec(i,p,u):Ai(u,f=>{const s=c||this._getRegistryForType(f);this._exec(i,s,f)})})}_exec(i,l,c){const u=Qm(i);Ki(c["before"+u],[],c),l[i](c),Ki(c["after"+u],[],c)}_getRegistryForType(i){for(let l=0;l<this._typedRegistries.length;l++){const c=this._typedRegistries[l];if(c.isForType(i))return c}return this.plugins}_get(i,l,c){const u=l.get(i);if(u===void 0)throw new Error('"'+i+'" is not a registered '+c+".");return u}}var Hs=new D2;class z2{constructor(){this._init=void 0}notify(i,l,c,u){if(l==="beforeInit"&&(this._init=this._createDescriptors(i,!0),this._notify(this._init,i,"install")),this._init===void 0)return;const p=u?this._descriptors(i).filter(u):this._descriptors(i),f=this._notify(p,i,l,c);return l==="afterDestroy"&&(this._notify(p,i,"stop"),this._notify(this._init,i,"uninstall"),this._init=void 0),f}_notify(i,l,c,u){u=u||{};for(const p of i){const f=p.plugin,s=f[c],S=[l,u,p.options];if(Ki(s,S,f)===!1&&u.cancelable)return!1}return!0}invalidate(){ai(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(i){if(this._cache)return this._cache;const l=this._cache=this._createDescriptors(i);return this._notifyStateChanges(i),l}_createDescriptors(i,l){const c=i&&i.config,u=Gt(c.options&&c.options.plugins,{}),p=R2(c);return u===!1&&!l?[]:O2(i,p,u,l)}_notifyStateChanges(i){const l=this._oldCache||[],c=this._cache,u=(p,f)=>p.filter(s=>!f.some(S=>s.plugin.id===S.plugin.id));this._notify(u(l,c),i,"stop"),this._notify(u(c,l),i,"start")}}function R2(r){const i={},l=[],c=Object.keys(Hs.plugins.items);for(let p=0;p<c.length;p++)l.push(Hs.getPlugin(c[p]));const u=r.plugins||[];for(let p=0;p<u.length;p++){const f=u[p];l.indexOf(f)===-1&&(l.push(f),i[f.id]=!0)}return{plugins:l,localIds:i}}function F2(r,i){return!i&&r===!1?null:r===!0?{}:r}function O2(r,{plugins:i,localIds:l},c,u){const p=[],f=r.getContext();for(const s of i){const S=s.id,M=F2(c[S],u);M!==null&&p.push({plugin:s,options:j2(r.config,{plugin:s,local:l[S]},M,f)})}return p}function j2(r,{plugin:i,local:l},c,u){const p=r.pluginScopeKeys(i),f=r.getOptionScopes(c,p);return l&&i.defaults&&f.push(i.defaults),r.createResolver(f,u,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Pm(r,i){const l=hn.datasets[r]||{};return((i.datasets||{})[r]||{}).indexAxis||i.indexAxis||l.indexAxis||"x"}function B2(r,i){let l=r;return r==="_index_"?l=i:r==="_value_"&&(l=i==="x"?"y":"x"),l}function $2(r,i){return r===i?"_index_":"_value_"}function jv(r){if(r==="x"||r==="y"||r==="r")return r}function V2(r){if(r==="top"||r==="bottom")return"x";if(r==="left"||r==="right")return"y"}function Mm(r,...i){if(jv(r))return r;for(const l of i){const c=l.axis||V2(l.position)||r.length>1&&jv(r[0].toLowerCase());if(c)return c}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function Bv(r,i,l){if(l[i+"AxisID"]===r)return{axis:i}}function N2(r,i){if(i.data&&i.data.datasets){const l=i.data.datasets.filter(c=>c.xAxisID===r||c.yAxisID===r);if(l.length)return Bv(r,"x",l[0])||Bv(r,"y",l[0])}return{}}function U2(r,i){const l=_u[r.type]||{scales:{}},c=i.scales||{},u=Pm(r.type,i),p=Object.create(null);return Object.keys(c).forEach(f=>{const s=c[f];if(!ri(s))return console.error(`Invalid scale configuration for scale: ${f}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);const S=Mm(f,s,N2(f,r),hn.scales[s.type]),M=$2(S,u),D=l.scales||{};p[f]=Nd(Object.create(null),[{axis:S},s,D[S],D[M]])}),r.data.datasets.forEach(f=>{const s=f.type||r.type,S=f.indexAxis||Pm(s,i),D=(_u[s]||{}).scales||{};Object.keys(D).forEach(j=>{const V=B2(j,S),X=f[V+"AxisID"]||V;p[X]=p[X]||Object.create(null),Nd(p[X],[{axis:V},c[X],D[j]])})}),Object.keys(p).forEach(f=>{const s=p[f];Nd(s,[hn.scales[s.type],hn.scale])}),p}function vb(r){const i=r.options||(r.options={});i.plugins=Gt(i.plugins,{}),i.scales=U2(r,i)}function xb(r){return r=r||{},r.datasets=r.datasets||[],r.labels=r.labels||[],r}function G2(r){return r=r||{},r.data=xb(r.data),vb(r),r}const $v=new Map,bb=new Set;function hf(r,i){let l=$v.get(r);return l||(l=i(),$v.set(r,l),bb.add(l)),l}const Id=(r,i,l)=>{const c=_l(i,l);c!==void 0&&r.add(c)};class q2{constructor(i){this._config=G2(i),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(i){this._config.type=i}get data(){return this._config.data}set data(i){this._config.data=xb(i)}get options(){return this._config.options}set options(i){this._config.options=i}get plugins(){return this._config.plugins}update(){const i=this._config;this.clearCache(),vb(i)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(i){return hf(i,()=>[[`datasets.${i}`,""]])}datasetAnimationScopeKeys(i,l){return hf(`${i}.transition.${l}`,()=>[[`datasets.${i}.transitions.${l}`,`transitions.${l}`],[`datasets.${i}`,""]])}datasetElementScopeKeys(i,l){return hf(`${i}-${l}`,()=>[[`datasets.${i}.elements.${l}`,`datasets.${i}`,`elements.${l}`,""]])}pluginScopeKeys(i){const l=i.id,c=this.type;return hf(`${c}-plugin-${l}`,()=>[[`plugins.${l}`,...i.additionalOptionScopes||[]]])}_cachedScopes(i,l){const c=this._scopeCache;let u=c.get(i);return(!u||l)&&(u=new Map,c.set(i,u)),u}getOptionScopes(i,l,c){const{options:u,type:p}=this,f=this._cachedScopes(i,c),s=f.get(l);if(s)return s;const S=new Set;l.forEach(D=>{i&&(S.add(i),D.forEach(j=>Id(S,i,j))),D.forEach(j=>Id(S,u,j)),D.forEach(j=>Id(S,_u[p]||{},j)),D.forEach(j=>Id(S,hn,j)),D.forEach(j=>Id(S,Sm,j))});const M=Array.from(S);return M.length===0&&M.push(Object.create(null)),bb.has(l)&&f.set(l,M),M}chartOptionScopes(){const{options:i,type:l}=this;return[i,_u[l]||{},hn.datasets[l]||{},{type:l},hn,Sm]}resolveNamedOptions(i,l,c,u=[""]){const p={$shared:!0},{resolver:f,subPrefixes:s}=Vv(this._resolverCache,i,u);let S=f;if(W2(f,l)){p.$shared=!1,c=yl(c)?c():c;const M=this.createResolver(i,c,s);S=Ph(f,c,M)}for(const M of l)p[M]=S[M];return p}createResolver(i,l,c=[""],u){const{resolver:p}=Vv(this._resolverCache,i,c);return ri(l)?Ph(p,l,void 0,u):p}}function Vv(r,i,l){let c=r.get(i);c||(c=new Map,r.set(i,c));const u=l.join();let p=c.get(u);return p||(p={resolver:rg(i,l),subPrefixes:l.filter(s=>!s.toLowerCase().includes("hover"))},c.set(u,p)),p}const Z2=r=>ri(r)&&Object.getOwnPropertyNames(r).some(i=>yl(r[i]));function W2(r,i){const{isScriptable:l,isIndexable:c}=Jx(r);for(const u of i){const p=l(u),f=c(u),s=(f||p)&&r[u];if(p&&(yl(s)||Z2(s))||f&&un(s))return!0}return!1}var H2="4.5.1";const K2=["top","bottom","left","right","chartArea"];function Nv(r,i){return r==="top"||r==="bottom"||K2.indexOf(r)===-1&&i==="x"}function Uv(r,i){return function(l,c){return l[r]===c[r]?l[i]-c[i]:l[r]-c[r]}}function Gv(r){const i=r.chart,l=i.options.animation;i.notifyPlugins("afterRender"),Ki(l&&l.onComplete,[r],i)}function Y2(r){const i=r.chart,l=i.options.animation;Ki(l&&l.onProgress,[r],i)}function wb(r){return lg()&&typeof r=="string"?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const bf={},qv=r=>{const i=wb(r);return Object.values(bf).filter(l=>l.canvas===i).pop()};function X2(r,i,l){const c=Object.keys(r);for(const u of c){const p=+u;if(p>=i){const f=r[u];delete r[u],(l>0||p>i)&&(r[p+l]=f)}}}function J2(r,i,l,c){return!l||r.type==="mouseout"?null:c?i:r}class cg{static defaults=hn;static instances=bf;static overrides=_u;static registry=Hs;static version=H2;static getChart=qv;static register(...i){Hs.add(...i),Zv()}static unregister(...i){Hs.remove(...i),Zv()}constructor(i,l){const c=this.config=new q2(l),u=wb(i),p=qv(u);if(p)throw new Error("Canvas is already in use. Chart with ID '"+p.id+"' must be destroyed before the canvas with ID '"+p.canvas.id+"' can be reused.");const f=c.createResolver(c.chartOptionScopes(),this.getContext());this.platform=new(c.platform||g2(u)),this.platform.updateConfig(c);const s=this.platform.acquireContext(u,f.aspectRatio),S=s&&s.canvas,M=S&&S.height,D=S&&S.width;if(this.id=Wk(),this.ctx=s,this.canvas=S,this.width=D,this.height=M,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new z2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hS(j=>this.update(j),f.resizeDelay||0),this._dataChanges=[],bf[this.id]=this,!s||!S){console.error("Failed to create chart: can't acquire context from the given item");return}Co.listen(this,"complete",Gv),Co.listen(this,"progress",Y2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:i,maintainAspectRatio:l},width:c,height:u,_aspectRatio:p}=this;return ai(i)?l&&p?p:u?c/u:null:i}get data(){return this.config.data}set data(i){this.config.data=i}get options(){return this._options}set options(i){this.config.options=i}get registry(){return Hs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return dv(this.canvas,this.ctx),this}stop(){return Co.stop(this),this}resize(i,l){Co.running(this)?this._resizeBeforeDraw={width:i,height:l}:this._resize(i,l)}_resize(i,l){const c=this.options,u=this.canvas,p=c.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(u,i,l,p),s=c.devicePixelRatio||this.platform.getDevicePixelRatio(),S=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,pv(this,s,!0)&&(this.notifyPlugins("resize",{size:f}),Ki(c.onResize,[this,f],this),this.attached&&this._doResize(S)&&this.render())}ensureScalesHaveIDs(){const l=this.options.scales||{};Ai(l,(c,u)=>{c.id=u})}buildOrUpdateScales(){const i=this.options,l=i.scales,c=this.scales,u=Object.keys(c).reduce((f,s)=>(f[s]=!1,f),{});let p=[];l&&(p=p.concat(Object.keys(l).map(f=>{const s=l[f],S=Mm(f,s),M=S==="r",D=S==="x";return{options:s,dposition:M?"chartArea":D?"bottom":"left",dtype:M?"radialLinear":D?"category":"linear"}}))),Ai(p,f=>{const s=f.options,S=s.id,M=Mm(S,s),D=Gt(s.type,f.dtype);(s.position===void 0||Nv(s.position,M)!==Nv(f.dposition))&&(s.position=f.dposition),u[S]=!0;let j=null;if(S in c&&c[S].type===D)j=c[S];else{const V=Hs.getScale(D);j=new V({id:S,type:D,ctx:this.ctx,chart:this}),c[j.id]=j}j.init(s,i)}),Ai(u,(f,s)=>{f||delete c[s]}),Ai(c,f=>{Ta.configure(this,f,f.options),Ta.addBox(this,f)})}_updateMetasets(){const i=this._metasets,l=this.data.datasets.length,c=i.length;if(i.sort((u,p)=>u.index-p.index),c>l){for(let u=l;u<c;++u)this._destroyDatasetMeta(u);i.splice(l,c-l)}this._sortedMetasets=i.slice(0).sort(Uv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:i,data:{datasets:l}}=this;i.length>l.length&&delete this._stacks,i.forEach((c,u)=>{l.filter(p=>p===c._dataset).length===0&&this._destroyDatasetMeta(u)})}buildOrUpdateControllers(){const i=[],l=this.data.datasets;let c,u;for(this._removeUnreferencedMetasets(),c=0,u=l.length;c<u;c++){const p=l[c];let f=this.getDatasetMeta(c);const s=p.type||this.config.type;if(f.type&&f.type!==s&&(this._destroyDatasetMeta(c),f=this.getDatasetMeta(c)),f.type=s,f.indexAxis=p.indexAxis||Pm(s,this.options),f.order=p.order||0,f.index=c,f.label=""+p.label,f.visible=this.isDatasetVisible(c),f.controller)f.controller.updateIndex(c),f.controller.linkScales();else{const S=Hs.getController(s),{datasetElementType:M,dataElementType:D}=hn.datasets[s];Object.assign(S,{dataElementType:Hs.getElement(D),datasetElementType:M&&Hs.getElement(M)}),f.controller=new S(this,c),i.push(f.controller)}}return this._updateMetasets(),i}_resetElements(){Ai(this.data.datasets,(i,l)=>{this.getDatasetMeta(l).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(i){const l=this.config;l.update();const c=this._options=l.createResolver(l.chartOptionScopes(),this.getContext()),u=this._animationsDisabled=!c.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:i,cancelable:!0})===!1)return;const p=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let M=0,D=this.data.datasets.length;M<D;M++){const{controller:j}=this.getDatasetMeta(M),V=!u&&p.indexOf(j)===-1;j.buildOrUpdateElements(V),f=Math.max(+j.getMaxOverflow(),f)}f=this._minPadding=c.layout.autoPadding?f:0,this._updateLayout(f),u||Ai(p,M=>{M.reset()}),this._updateDatasets(i),this.notifyPlugins("afterUpdate",{mode:i}),this._layers.sort(Uv("z","_idx"));const{_active:s,_lastEvent:S}=this;S?this._eventHandler(S,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Ai(this.scales,i=>{Ta.removeBox(this,i)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const i=this.options,l=new Set(Object.keys(this._listeners)),c=new Set(i.events);(!iv(l,c)||!!this._responsiveListeners!==i.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:i}=this,l=this._getUniformDataChanges()||[];for(const{method:c,start:u,count:p}of l){const f=c==="_removeElements"?-p:p;X2(i,u,f)}}_getUniformDataChanges(){const i=this._dataChanges;if(!i||!i.length)return;this._dataChanges=[];const l=this.data.datasets.length,c=p=>new Set(i.filter(f=>f[0]===p).map((f,s)=>s+","+f.splice(1).join(","))),u=c(0);for(let p=1;p<l;p++)if(!iv(u,c(p)))return;return Array.from(u).map(p=>p.split(",")).map(p=>({method:p[1],start:+p[2],count:+p[3]}))}_updateLayout(i){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ta.update(this,this.width,this.height,i);const l=this.chartArea,c=l.width<=0||l.height<=0;this._layers=[],Ai(this.boxes,u=>{c&&u.position==="chartArea"||(u.configure&&u.configure(),this._layers.push(...u._layers()))},this),this._layers.forEach((u,p)=>{u._idx=p}),this.notifyPlugins("afterLayout")}_updateDatasets(i){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:i,cancelable:!0})!==!1){for(let l=0,c=this.data.datasets.length;l<c;++l)this.getDatasetMeta(l).controller.configure();for(let l=0,c=this.data.datasets.length;l<c;++l)this._updateDataset(l,yl(i)?i({datasetIndex:l}):i);this.notifyPlugins("afterDatasetsUpdate",{mode:i})}}_updateDataset(i,l){const c=this.getDatasetMeta(i),u={meta:c,index:i,mode:l,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",u)!==!1&&(c.controller._update(l),u.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",u))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Co.has(this)?this.attached&&!Co.running(this)&&Co.start(this):(this.draw(),Gv({chart:this})))}draw(){let i;if(this._resizeBeforeDraw){const{width:c,height:u}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(c,u)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const l=this._layers;for(i=0;i<l.length&&l[i].z<=0;++i)l[i].draw(this.chartArea);for(this._drawDatasets();i<l.length;++i)l[i].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(i){const l=this._sortedMetasets,c=[];let u,p;for(u=0,p=l.length;u<p;++u){const f=l[u];(!i||f.visible)&&c.push(f)}return c}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const i=this.getSortedVisibleDatasetMetas();for(let l=i.length-1;l>=0;--l)this._drawDataset(i[l]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(i){const l=this.ctx,c={meta:i,index:i.index,cancelable:!0},u=ub(this,i);this.notifyPlugins("beforeDatasetDraw",c)!==!1&&(u&&Of(l,u),i.controller.draw(),u&&jf(l),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(i){return Do(i,this.chartArea,this._minPadding)}getElementsAtEventForMode(i,l,c,u){const p=KT.modes[l];return typeof p=="function"?p(this,i,c,u):[]}getDatasetMeta(i){const l=this.data.datasets[i],c=this._metasets;let u=c.filter(p=>p&&p._dataset===l).pop();return u||(u={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:l&&l.order||0,index:i,_dataset:l,_parsed:[],_sorted:!1},c.push(u)),u}getContext(){return this.$context||(this.$context=bl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(i){const l=this.data.datasets[i];if(!l)return!1;const c=this.getDatasetMeta(i);return typeof c.hidden=="boolean"?!c.hidden:!l.hidden}setDatasetVisibility(i,l){const c=this.getDatasetMeta(i);c.hidden=!l}toggleDataVisibility(i){this._hiddenIndices[i]=!this._hiddenIndices[i]}getDataVisibility(i){return!this._hiddenIndices[i]}_updateVisibility(i,l,c){const u=c?"show":"hide",p=this.getDatasetMeta(i),f=p.controller._resolveAnimations(void 0,u);Yd(l)?(p.data[l].hidden=!c,this.update()):(this.setDatasetVisibility(i,c),f.update(p,{visible:c}),this.update(s=>s.datasetIndex===i?u:void 0))}hide(i,l){this._updateVisibility(i,l,!1)}show(i,l){this._updateVisibility(i,l,!0)}_destroyDatasetMeta(i){const l=this._metasets[i];l&&l.controller&&l.controller._destroy(),delete this._metasets[i]}_stop(){let i,l;for(this.stop(),Co.remove(this),i=0,l=this.data.datasets.length;i<l;++i)this._destroyDatasetMeta(i)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:i,ctx:l}=this;this._stop(),this.config.clearCache(),i&&(this.unbindEvents(),dv(i,l),this.platform.releaseContext(l),this.canvas=null,this.ctx=null),delete bf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...i){return this.canvas.toDataURL(...i)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const i=this._listeners,l=this.platform,c=(p,f)=>{l.addEventListener(this,p,f),i[p]=f},u=(p,f,s)=>{p.offsetX=f,p.offsetY=s,this._eventHandler(p)};Ai(this.options.events,p=>c(p,u))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const i=this._responsiveListeners,l=this.platform,c=(S,M)=>{l.addEventListener(this,S,M),i[S]=M},u=(S,M)=>{i[S]&&(l.removeEventListener(this,S,M),delete i[S])},p=(S,M)=>{this.canvas&&this.resize(S,M)};let f;const s=()=>{u("attach",s),this.attached=!0,this.resize(),c("resize",p),c("detach",f)};f=()=>{this.attached=!1,u("resize",p),this._stop(),this._resize(0,0),c("attach",s)},l.isAttached(this.canvas)?s():f()}unbindEvents(){Ai(this._listeners,(i,l)=>{this.platform.removeEventListener(this,l,i)}),this._listeners={},Ai(this._responsiveListeners,(i,l)=>{this.platform.removeEventListener(this,l,i)}),this._responsiveListeners=void 0}updateHoverStyle(i,l,c){const u=c?"set":"remove";let p,f,s,S;for(l==="dataset"&&(p=this.getDatasetMeta(i[0].datasetIndex),p.controller["_"+u+"DatasetHoverStyle"]()),s=0,S=i.length;s<S;++s){f=i[s];const M=f&&this.getDatasetMeta(f.datasetIndex).controller;M&&M[u+"HoverStyle"](f.element,f.datasetIndex,f.index)}}getActiveElements(){return this._active||[]}setActiveElements(i){const l=this._active||[],c=i.map(({datasetIndex:p,index:f})=>{const s=this.getDatasetMeta(p);if(!s)throw new Error("No dataset found at index "+p);return{datasetIndex:p,element:s.data[f],index:f}});!Sf(c,l)&&(this._active=c,this._lastEvent=null,this._updateHoverStyles(c,l))}notifyPlugins(i,l,c){return this._plugins.notify(this,i,l,c)}isPluginEnabled(i){return this._plugins._cache.filter(l=>l.plugin.id===i).length===1}_updateHoverStyles(i,l,c){const u=this.options.hover,p=(S,M)=>S.filter(D=>!M.some(j=>D.datasetIndex===j.datasetIndex&&D.index===j.index)),f=p(l,i),s=c?i:p(i,l);f.length&&this.updateHoverStyle(f,u.mode,!1),s.length&&u.mode&&this.updateHoverStyle(s,u.mode,!0)}_eventHandler(i,l){const c={event:i,replay:l,cancelable:!0,inChartArea:this.isPointInArea(i)},u=f=>(f.options.events||this.options.events).includes(i.native.type);if(this.notifyPlugins("beforeEvent",c,u)===!1)return;const p=this._handleEvent(i,l,c.inChartArea);return c.cancelable=!1,this.notifyPlugins("afterEvent",c,u),(p||c.changed)&&this.render(),this}_handleEvent(i,l,c){const{_active:u=[],options:p}=this,f=l,s=this._getActiveElements(i,u,c,f),S=Qk(i),M=J2(i,this._lastEvent,c,S);c&&(this._lastEvent=null,Ki(p.onHover,[i,s,this],this),S&&Ki(p.onClick,[i,s,this],this));const D=!Sf(s,u);return(D||l)&&(this._active=s,this._updateHoverStyles(s,u,l)),this._lastEvent=M,D}_getActiveElements(i,l,c,u){if(i.type==="mouseout")return[];if(!c)return l;const p=this.options.hover;return this.getElementsAtEventForMode(i,p.mode,p,u)}}function Zv(){return Ai(cg.instances,r=>r._plugins.invalidate())}function Q2(r,i,l){const{startAngle:c,x:u,y:p,outerRadius:f,innerRadius:s,options:S}=i,{borderWidth:M,borderJoinStyle:D}=S,j=Math.min(M/f,Sa(c-l));if(r.beginPath(),r.arc(u,p,f-M/2,c+j/2,l-j/2),s>0){const V=Math.min(M/s,Sa(c-l));r.arc(u,p,s+M/2,l-V/2,c+V/2,!0)}else{const V=Math.min(M/2,f*Sa(c-l));if(D==="round")r.arc(u,p,V,l-bi/2,c+bi/2,!0);else if(D==="bevel"){const X=2*V*V,re=-X*Math.cos(l+bi/2)+u,ae=-X*Math.sin(l+bi/2)+p,H=X*Math.cos(c+bi/2)+u,Se=X*Math.sin(c+bi/2)+p;r.lineTo(re,ae),r.lineTo(H,Se)}}r.closePath(),r.moveTo(0,0),r.rect(0,0,r.canvas.width,r.canvas.height),r.clip("evenodd")}function eP(r,i,l){const{startAngle:c,pixelMargin:u,x:p,y:f,outerRadius:s,innerRadius:S}=i;let M=u/s;r.beginPath(),r.arc(p,f,s,c-M,l+M),S>u?(M=u/S,r.arc(p,f,S,l+M,c-M,!0)):r.arc(p,f,u,l+Mn,c-Mn),r.closePath(),r.clip()}function tP(r){return ag(r,["outerStart","outerEnd","innerStart","innerEnd"])}function iP(r,i,l,c){const u=tP(r.options.borderRadius),p=(l-i)/2,f=Math.min(p,c*i/2),s=S=>{const M=(l-Math.min(p,S))*c/2;return sa(S,0,Math.min(p,M))};return{outerStart:s(u.outerStart),outerEnd:s(u.outerEnd),innerStart:sa(u.innerStart,0,f),innerEnd:sa(u.innerEnd,0,f)}}function kh(r,i,l,c){return{x:l+r*Math.cos(i),y:c+r*Math.sin(i)}}function Ef(r,i,l,c,u,p){const{x:f,y:s,startAngle:S,pixelMargin:M,innerRadius:D}=i,j=Math.max(i.outerRadius+c+l-M,0),V=D>0?D+c+l+M:0;let X=0;const re=u-S;if(c){const Wt=D>0?D-c:0,Bt=j>0?j-c:0,Vt=(Wt+Bt)/2,xt=Vt!==0?re*Vt/(Vt+c):re;X=(re-xt)/2}const ae=Math.max(.001,re*j-l/bi)/j,H=(re-ae)/2,Se=S+H+X,xe=u-H-X,{outerStart:Pe,outerEnd:Ve,innerStart:Ue,innerEnd:et}=iP(i,V,j,xe-Se),Je=j-Pe,nt=j-Ve,mt=Se+Pe/Je,Tt=xe-Ve/nt,vt=V+Ue,bt=V+et,si=Se+Ue/vt,di=xe-et/bt;if(r.beginPath(),p){const Wt=(mt+Tt)/2;if(r.arc(f,s,j,mt,Wt),r.arc(f,s,j,Wt,Tt),Ve>0){const Mt=kh(nt,Tt,f,s);r.arc(Mt.x,Mt.y,Ve,Tt,xe+Mn)}const Bt=kh(bt,xe,f,s);if(r.lineTo(Bt.x,Bt.y),et>0){const Mt=kh(bt,di,f,s);r.arc(Mt.x,Mt.y,et,xe+Mn,di+Math.PI)}const Vt=(xe-et/V+(Se+Ue/V))/2;if(r.arc(f,s,V,xe-et/V,Vt,!0),r.arc(f,s,V,Vt,Se+Ue/V,!0),Ue>0){const Mt=kh(vt,si,f,s);r.arc(Mt.x,Mt.y,Ue,si+Math.PI,Se-Mn)}const xt=kh(Je,Se,f,s);if(r.lineTo(xt.x,xt.y),Pe>0){const Mt=kh(Je,mt,f,s);r.arc(Mt.x,Mt.y,Pe,Se-Mn,mt)}}else{r.moveTo(f,s);const Wt=Math.cos(mt)*j+f,Bt=Math.sin(mt)*j+s;r.lineTo(Wt,Bt);const Vt=Math.cos(Tt)*j+f,xt=Math.sin(Tt)*j+s;r.lineTo(Vt,xt)}r.closePath()}function nP(r,i,l,c,u){const{fullCircles:p,startAngle:f,circumference:s}=i;let S=i.endAngle;if(p){Ef(r,i,l,c,S,u);for(let M=0;M<p;++M)r.fill();isNaN(s)||(S=f+(s%nn||nn))}return Ef(r,i,l,c,S,u),r.fill(),S}function aP(r,i,l,c,u){const{fullCircles:p,startAngle:f,circumference:s,options:S}=i,{borderWidth:M,borderJoinStyle:D,borderDash:j,borderDashOffset:V,borderRadius:X}=S,re=S.borderAlign==="inner";if(!M)return;r.setLineDash(j||[]),r.lineDashOffset=V,re?(r.lineWidth=M*2,r.lineJoin=D||"round"):(r.lineWidth=M,r.lineJoin=D||"bevel");let ae=i.endAngle;if(p){Ef(r,i,l,c,ae,u);for(let H=0;H<p;++H)r.stroke();isNaN(s)||(ae=f+(s%nn||nn))}re&&eP(r,i,ae),S.selfJoin&&ae-f>=bi&&X===0&&D!=="miter"&&Q2(r,i,ae),p||(Ef(r,i,l,c,ae,u),r.stroke())}class rP extends Ro{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,l,c){const u=this.getProps(["x","y"],c),{angle:p,distance:f}=Nx(u,{x:i,y:l}),{startAngle:s,endAngle:S,innerRadius:M,outerRadius:D,circumference:j}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],c),V=(this.options.spacing+this.options.borderWidth)/2,X=Gt(j,S-s),re=Xd(p,s,S)&&s!==S,ae=X>=nn||re,H=Ao(f,M+V,D+V);return ae&&H}getCenterPoint(i){const{x:l,y:c,startAngle:u,endAngle:p,innerRadius:f,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:S,spacing:M}=this.options,D=(u+p)/2,j=(f+s+M+S)/2;return{x:l+Math.cos(D)*j,y:c+Math.sin(D)*j}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:l,circumference:c}=this,u=(l.offset||0)/4,p=(l.spacing||0)/2,f=l.circular;if(this.pixelMargin=l.borderAlign==="inner"?.33:0,this.fullCircles=c>nn?Math.floor(c/nn):0,c===0||this.innerRadius<0||this.outerRadius<0)return;i.save();const s=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(s)*u,Math.sin(s)*u);const S=1-Math.sin(Math.min(bi,c||0)),M=u*S;i.fillStyle=l.backgroundColor,i.strokeStyle=l.borderColor,nP(i,this,M,p,f),aP(i,this,M,p,f),i.restore()}}function kb(r,i,l=i){r.lineCap=Gt(l.borderCapStyle,i.borderCapStyle),r.setLineDash(Gt(l.borderDash,i.borderDash)),r.lineDashOffset=Gt(l.borderDashOffset,i.borderDashOffset),r.lineJoin=Gt(l.borderJoinStyle,i.borderJoinStyle),r.lineWidth=Gt(l.borderWidth,i.borderWidth),r.strokeStyle=Gt(l.borderColor,i.borderColor)}function sP(r,i,l){r.lineTo(l.x,l.y)}function oP(r){return r.stepped?wS:r.tension||r.cubicInterpolationMode==="monotone"?kS:sP}function Sb(r,i,l={}){const c=r.length,{start:u=0,end:p=c-1}=l,{start:f,end:s}=i,S=Math.max(u,f),M=Math.min(p,s),D=u<f&&p<f||u>s&&p>s;return{count:c,start:S,loop:i.loop,ilen:M<S&&!D?c+M-S:M-S}}function lP(r,i,l,c){const{points:u,options:p}=i,{count:f,start:s,loop:S,ilen:M}=Sb(u,l,c),D=oP(p);let{move:j=!0,reverse:V}=c||{},X,re,ae;for(X=0;X<=M;++X)re=u[(s+(V?M-X:X))%f],!re.skip&&(j?(r.moveTo(re.x,re.y),j=!1):D(r,ae,re,V,p.stepped),ae=re);return S&&(re=u[(s+(V?M:0))%f],D(r,ae,re,V,p.stepped)),!!S}function uP(r,i,l,c){const u=i.points,{count:p,start:f,ilen:s}=Sb(u,l,c),{move:S=!0,reverse:M}=c||{};let D=0,j=0,V,X,re,ae,H,Se;const xe=Ve=>(f+(M?s-Ve:Ve))%p,Pe=()=>{ae!==H&&(r.lineTo(D,H),r.lineTo(D,ae),r.lineTo(D,Se))};for(S&&(X=u[xe(0)],r.moveTo(X.x,X.y)),V=0;V<=s;++V){if(X=u[xe(V)],X.skip)continue;const Ve=X.x,Ue=X.y,et=Ve|0;et===re?(Ue<ae?ae=Ue:Ue>H&&(H=Ue),D=(j*D+Ve)/++j):(Pe(),r.lineTo(Ve,Ue),re=et,j=0,ae=H=Ue),Se=Ue}Pe()}function Cm(r){const i=r.options,l=i.borderDash&&i.borderDash.length;return!r._decimated&&!r._loop&&!i.tension&&i.cubicInterpolationMode!=="monotone"&&!i.stepped&&!l?uP:lP}function hP(r){return r.stepped?tT:r.tension||r.cubicInterpolationMode==="monotone"?iT:lu}function dP(r,i,l,c){let u=i._path;u||(u=i._path=new Path2D,i.path(u,l,c)&&u.closePath()),kb(r,i.options),r.stroke(u)}function cP(r,i,l,c){const{segments:u,options:p}=i,f=Cm(i);for(const s of u)kb(r,p,s.style),r.beginPath(),f(r,i,s,{start:l,end:l+c-1})&&r.closePath(),r.stroke()}const fP=typeof Path2D=="function";function pP(r,i,l,c){fP&&!i.options.segment?dP(r,i,l,c):cP(r,i,l,c)}class Vf extends Ro{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"&&i!=="fill"};constructor(i){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,i&&Object.assign(this,i)}updateControlPoints(i,l){const c=this.options;if((c.tension||c.cubicInterpolationMode==="monotone")&&!c.stepped&&!this._pointsUpdated){const u=c.spanGaps?this._loop:this._fullLoop;WS(this._points,c,i,u,l),this._pointsUpdated=!0}}set points(i){this._points=i,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lT(this,this.options.segment))}first(){const i=this.segments,l=this.points;return i.length&&l[i[0].start]}last(){const i=this.segments,l=this.points,c=i.length;return c&&l[i[c-1].end]}interpolate(i,l){const c=this.options,u=i[l],p=this.points,f=lb(this,{property:l,start:u,end:u});if(!f.length)return;const s=[],S=hP(c);let M,D;for(M=0,D=f.length;M<D;++M){const{start:j,end:V}=f[M],X=p[j],re=p[V];if(X===re){s.push(X);continue}const ae=Math.abs((u-X[l])/(re[l]-X[l])),H=S(X,re,ae,c.stepped);H[l]=i[l],s.push(H)}return s.length===1?s[0]:s}pathSegment(i,l,c){return Cm(this)(i,this,l,c)}path(i,l,c){const u=this.segments,p=Cm(this);let f=this._loop;l=l||0,c=c||this.points.length-l;for(const s of u)f&=p(i,this,s,{start:l,end:l+c-1});return!!f}draw(i,l,c,u){const p=this.options||{};(this.points||[]).length&&p.borderWidth&&(i.save(),pP(i,this,c,u),i.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Wv(r,i,l,c){const u=r.options,{[l]:p}=r.getProps([l],c);return Math.abs(i-p)<u.radius+u.hitRadius}class mP extends Ro{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,l,c){const u=this.options,{x:p,y:f}=this.getProps(["x","y"],c);return Math.pow(i-p,2)+Math.pow(l-f,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(i,l){return Wv(this,i,"x",l)}inYRange(i,l){return Wv(this,i,"y",l)}getCenterPoint(i){const{x:l,y:c}=this.getProps(["x","y"],i);return{x:l,y:c}}size(i){i=i||this.options||{};let l=i.radius||0;l=Math.max(l,l&&i.hoverRadius||0);const c=l&&i.borderWidth||0;return(l+c)*2}draw(i,l){const c=this.options;this.skip||c.radius<.1||!Do(this,l,this.size(c)/2)||(i.strokeStyle=c.borderColor,i.lineWidth=c.borderWidth,i.fillStyle=c.backgroundColor,Tm(i,c,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}function Tb(r,i){const{x:l,y:c,base:u,width:p,height:f}=r.getProps(["x","y","base","width","height"],i);let s,S,M,D,j;return r.horizontal?(j=f/2,s=Math.min(l,u),S=Math.max(l,u),M=c-j,D=c+j):(j=p/2,s=l-j,S=l+j,M=Math.min(c,u),D=Math.max(c,u)),{left:s,top:M,right:S,bottom:D}}function ml(r,i,l,c){return r?0:sa(i,l,c)}function gP(r,i,l){const c=r.options.borderWidth,u=r.borderSkipped,p=Xx(c);return{t:ml(u.top,p.top,0,l),r:ml(u.right,p.right,0,i),b:ml(u.bottom,p.bottom,0,l),l:ml(u.left,p.left,0,i)}}function _P(r,i,l){const{enableBorderRadius:c}=r.getProps(["enableBorderRadius"]),u=r.options.borderRadius,p=du(u),f=Math.min(i,l),s=r.borderSkipped,S=c||ri(u);return{topLeft:ml(!S||s.top||s.left,p.topLeft,0,f),topRight:ml(!S||s.top||s.right,p.topRight,0,f),bottomLeft:ml(!S||s.bottom||s.left,p.bottomLeft,0,f),bottomRight:ml(!S||s.bottom||s.right,p.bottomRight,0,f)}}function yP(r){const i=Tb(r),l=i.right-i.left,c=i.bottom-i.top,u=gP(r,l/2,c/2),p=_P(r,l/2,c/2);return{outer:{x:i.left,y:i.top,w:l,h:c,radius:p},inner:{x:i.left+u.l,y:i.top+u.t,w:l-u.l-u.r,h:c-u.t-u.b,radius:{topLeft:Math.max(0,p.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,p.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,p.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,p.bottomRight-Math.max(u.b,u.r))}}}}function fm(r,i,l,c){const u=i===null,p=l===null,s=r&&!(u&&p)&&Tb(r,c);return s&&(u||Ao(i,s.left,s.right))&&(p||Ao(l,s.top,s.bottom))}function vP(r){return r.topLeft||r.topRight||r.bottomLeft||r.bottomRight}function xP(r,i){r.rect(i.x,i.y,i.w,i.h)}function pm(r,i,l={}){const c=r.x!==l.x?-i:0,u=r.y!==l.y?-i:0,p=(r.x+r.w!==l.x+l.w?i:0)-c,f=(r.y+r.h!==l.y+l.h?i:0)-u;return{x:r.x+c,y:r.y+u,w:r.w+p,h:r.h+f,radius:r.radius}}class bP extends Ro{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){const{inflateAmount:l,options:{borderColor:c,backgroundColor:u}}=this,{inner:p,outer:f}=yP(this),s=vP(f.radius)?Jd:xP;i.save(),(f.w!==p.w||f.h!==p.h)&&(i.beginPath(),s(i,pm(f,l,p)),i.clip(),s(i,pm(p,-l,f)),i.fillStyle=c,i.fill("evenodd")),i.beginPath(),s(i,pm(p,l)),i.fillStyle=u,i.fill(),i.restore()}inRange(i,l,c){return fm(this,i,l,c)}inXRange(i,l){return fm(this,i,null,l)}inYRange(i,l){return fm(this,null,i,l)}getCenterPoint(i){const{x:l,y:c,base:u,horizontal:p}=this.getProps(["x","y","base","horizontal"],i);return{x:p?(l+u)/2:l,y:p?c:(c+u)/2}}getRange(i){return i==="x"?this.width/2:this.height/2}}var wP=Object.freeze({__proto__:null,ArcElement:rP,BarElement:bP,LineElement:Vf,PointElement:mP});const Lm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Hv=Lm.map(r=>r.replace("rgb(","rgba(").replace(")",", 0.5)"));function Pb(r){return Lm[r%Lm.length]}function Mb(r){return Hv[r%Hv.length]}function kP(r,i){return r.borderColor=Pb(i),r.backgroundColor=Mb(i),++i}function SP(r,i){return r.backgroundColor=r.data.map(()=>Pb(i++)),i}function TP(r,i){return r.backgroundColor=r.data.map(()=>Mb(i++)),i}function PP(r){let i=0;return(l,c)=>{const u=r.getDatasetMeta(c).controller;u instanceof hg?i=SP(l,i):u instanceof fb?i=TP(l,i):u&&(i=kP(l,i))}}function Kv(r){let i;for(i in r)if(r[i].borderColor||r[i].backgroundColor)return!0;return!1}function MP(r){return r&&(r.borderColor||r.backgroundColor)}function CP(){return hn.borderColor!=="rgba(0,0,0,0.1)"||hn.backgroundColor!=="rgba(0,0,0,0.1)"}var LP={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(r,i,l){if(!l.enabled)return;const{data:{datasets:c},options:u}=r.config,{elements:p}=u,f=Kv(c)||MP(u)||p&&Kv(p)||CP();if(!l.forceOverride&&f)return;const s=PP(r);c.forEach(s)}};function EP(r,i,l,c,u){const p=u.samples||c;if(p>=l)return r.slice(i,i+l);const f=[],s=(l-2)/(p-2);let S=0;const M=i+l-1;let D=i,j,V,X,re,ae;for(f[S++]=r[D],j=0;j<p-2;j++){let H=0,Se=0,xe;const Pe=Math.floor((j+1)*s)+1+i,Ve=Math.min(Math.floor((j+2)*s)+1,l)+i,Ue=Ve-Pe;for(xe=Pe;xe<Ve;xe++)H+=r[xe].x,Se+=r[xe].y;H/=Ue,Se/=Ue;const et=Math.floor(j*s)+1+i,Je=Math.min(Math.floor((j+1)*s)+1,l)+i,{x:nt,y:mt}=r[D];for(X=re=-1,xe=et;xe<Je;xe++)re=.5*Math.abs((nt-H)*(r[xe].y-mt)-(nt-r[xe].x)*(Se-mt)),re>X&&(X=re,V=r[xe],ae=xe);f[S++]=V,D=ae}return f[S++]=r[M],f}function AP(r,i,l,c){let u=0,p=0,f,s,S,M,D,j,V,X,re,ae;const H=[],Se=i+l-1,xe=r[i].x,Ve=r[Se].x-xe;for(f=i;f<i+l;++f){s=r[f],S=(s.x-xe)/Ve*c,M=s.y;const Ue=S|0;if(Ue===D)M<re?(re=M,j=f):M>ae&&(ae=M,V=f),u=(p*u+s.x)/++p;else{const et=f-1;if(!ai(j)&&!ai(V)){const Je=Math.min(j,V),nt=Math.max(j,V);Je!==X&&Je!==et&&H.push({...r[Je],x:u}),nt!==X&&nt!==et&&H.push({...r[nt],x:u})}f>0&&et!==X&&H.push(r[et]),H.push(s),D=Ue,p=0,re=ae=M,j=V=X=f}}return H}function Cb(r){if(r._decimated){const i=r._data;delete r._decimated,delete r._data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,writable:!0,value:i})}}function Yv(r){r.data.datasets.forEach(i=>{Cb(i)})}function IP(r,i){const l=i.length;let c=0,u;const{iScale:p}=r,{min:f,max:s,minDefined:S,maxDefined:M}=p.getUserBounds();return S&&(c=sa(Io(i,p.axis,f).lo,0,l-1)),M?u=sa(Io(i,p.axis,s).hi+1,c,l)-c:u=l-c,{start:c,count:u}}var DP={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(r,i,l)=>{if(!l.enabled){Yv(r);return}const c=r.width;r.data.datasets.forEach((u,p)=>{const{_data:f,indexAxis:s}=u,S=r.getDatasetMeta(p),M=f||u.data;if(jd([s,r.options.indexAxis])==="y"||!S.controller.supportsDecimation)return;const D=r.scales[S.xAxisID];if(D.type!=="linear"&&D.type!=="time"||r.options.parsing)return;let{start:j,count:V}=IP(S,M);const X=l.threshold||4*c;if(V<=X){Cb(u);return}ai(f)&&(u._data=M,delete u.data,Object.defineProperty(u,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(ae){this._data=ae}}));let re;switch(l.algorithm){case"lttb":re=EP(M,j,V,c,l);break;case"min-max":re=AP(M,j,V,c);break;default:throw new Error(`Unsupported decimation algorithm '${l.algorithm}'`)}u._decimated=re})},destroy(r){Yv(r)}};function zP(r,i,l){const c=r.segments,u=r.points,p=i.points,f=[];for(const s of c){let{start:S,end:M}=s;M=Nf(S,M,u);const D=Em(l,u[S],u[M],s.loop);if(!i.segments){f.push({source:s,target:D,start:u[S],end:u[M]});continue}const j=lb(i,D);for(const V of j){const X=Em(l,p[V.start],p[V.end],V.loop),re=ob(s,u,X);for(const ae of re)f.push({source:ae,target:V,start:{[l]:Xv(D,X,"start",Math.max)},end:{[l]:Xv(D,X,"end",Math.min)}})}}return f}function Em(r,i,l,c){if(c)return;let u=i[r],p=l[r];return r==="angle"&&(u=Sa(u),p=Sa(p)),{property:r,start:u,end:p}}function RP(r,i){const{x:l=null,y:c=null}=r||{},u=i.points,p=[];return i.segments.forEach(({start:f,end:s})=>{s=Nf(f,s,u);const S=u[f],M=u[s];c!==null?(p.push({x:S.x,y:c}),p.push({x:M.x,y:c})):l!==null&&(p.push({x:l,y:S.y}),p.push({x:l,y:M.y}))}),p}function Nf(r,i,l){for(;i>r;i--){const c=l[i];if(!isNaN(c.x)&&!isNaN(c.y))break}return i}function Xv(r,i,l,c){return r&&i?c(r[l],i[l]):r?r[l]:i?i[l]:0}function Lb(r,i){let l=[],c=!1;return un(r)?(c=!0,l=r):l=RP(r,i),l.length?new Vf({points:l,options:{tension:0},_loop:c,_fullLoop:c}):null}function Jv(r){return r&&r.fill!==!1}function FP(r,i,l){let u=r[i].fill;const p=[i];let f;if(!l)return u;for(;u!==!1&&p.indexOf(u)===-1;){if(!vn(u))return u;if(f=r[u],!f)return!1;if(f.visible)return u;p.push(u),u=f.fill}return!1}function OP(r,i,l){const c=VP(r);if(ri(c))return isNaN(c.value)?!1:c;let u=parseFloat(c);return vn(u)&&Math.floor(u)===u?jP(c[0],i,u,l):["origin","start","end","stack","shape"].indexOf(c)>=0&&c}function jP(r,i,l,c){return(r==="-"||r==="+")&&(l=i+l),l===i||l<0||l>=c?!1:l}function BP(r,i){let l=null;return r==="start"?l=i.bottom:r==="end"?l=i.top:ri(r)?l=i.getPixelForValue(r.value):i.getBasePixel&&(l=i.getBasePixel()),l}function $P(r,i,l){let c;return r==="start"?c=l:r==="end"?c=i.options.reverse?i.min:i.max:ri(r)?c=r.value:c=i.getBaseValue(),c}function VP(r){const i=r.options,l=i.fill;let c=Gt(l&&l.target,l);return c===void 0&&(c=!!i.backgroundColor),c===!1||c===null?!1:c===!0?"origin":c}function NP(r){const{scale:i,index:l,line:c}=r,u=[],p=c.segments,f=c.points,s=UP(i,l);s.push(Lb({x:null,y:i.bottom},c));for(let S=0;S<p.length;S++){const M=p[S];for(let D=M.start;D<=M.end;D++)GP(u,f[D],s)}return new Vf({points:u,options:{}})}function UP(r,i){const l=[],c=r.getMatchingVisibleMetas("line");for(let u=0;u<c.length;u++){const p=c[u];if(p.index===i)break;p.hidden||l.unshift(p.dataset)}return l}function GP(r,i,l){const c=[];for(let u=0;u<l.length;u++){const p=l[u],{first:f,last:s,point:S}=qP(p,i,"x");if(!(!S||f&&s)){if(f)c.unshift(S);else if(r.push(S),!s)break}}r.push(...c)}function qP(r,i,l){const c=r.interpolate(i,l);if(!c)return{};const u=c[l],p=r.segments,f=r.points;let s=!1,S=!1;for(let M=0;M<p.length;M++){const D=p[M],j=f[D.start][l],V=f[D.end][l];if(Ao(u,j,V)){s=u===j,S=u===V;break}}return{first:s,last:S,point:c}}class Eb{constructor(i){this.x=i.x,this.y=i.y,this.radius=i.radius}pathSegment(i,l,c){const{x:u,y:p,radius:f}=this;return l=l||{start:0,end:nn},i.arc(u,p,f,l.end,l.start,!0),!c.bounds}interpolate(i){const{x:l,y:c,radius:u}=this,p=i.angle;return{x:l+Math.cos(p)*u,y:c+Math.sin(p)*u,angle:p}}}function ZP(r){const{chart:i,fill:l,line:c}=r;if(vn(l))return WP(i,l);if(l==="stack")return NP(r);if(l==="shape")return!0;const u=HP(r);return u instanceof Eb?u:Lb(u,c)}function WP(r,i){const l=r.getDatasetMeta(i);return l&&r.isDatasetVisible(i)?l.dataset:null}function HP(r){return(r.scale||{}).getPointPositionForValue?YP(r):KP(r)}function KP(r){const{scale:i={},fill:l}=r,c=BP(l,i);if(vn(c)){const u=i.isHorizontal();return{x:u?c:null,y:u?null:c}}return null}function YP(r){const{scale:i,fill:l}=r,c=i.options,u=i.getLabels().length,p=c.reverse?i.max:i.min,f=$P(l,i,p),s=[];if(c.grid.circular){const S=i.getPointPositionForValue(0,p);return new Eb({x:S.x,y:S.y,radius:i.getDistanceFromCenterForValue(f)})}for(let S=0;S<u;++S)s.push(i.getPointPositionForValue(S,f));return s}function mm(r,i,l){const c=ZP(i),{chart:u,index:p,line:f,scale:s,axis:S}=i,M=f.options,D=M.fill,j=M.backgroundColor,{above:V=j,below:X=j}=D||{},re=u.getDatasetMeta(p),ae=ub(u,re);c&&f.points.length&&(Of(r,l),XP(r,{line:f,target:c,above:V,below:X,area:l,scale:s,axis:S,clip:ae}),jf(r))}function XP(r,i){const{line:l,target:c,above:u,below:p,area:f,scale:s,clip:S}=i,M=l._loop?"angle":i.axis;r.save();let D=p;p!==u&&(M==="x"?(Qv(r,c,f.top),gm(r,{line:l,target:c,color:u,scale:s,property:M,clip:S}),r.restore(),r.save(),Qv(r,c,f.bottom)):M==="y"&&(ex(r,c,f.left),gm(r,{line:l,target:c,color:p,scale:s,property:M,clip:S}),r.restore(),r.save(),ex(r,c,f.right),D=u)),gm(r,{line:l,target:c,color:D,scale:s,property:M,clip:S}),r.restore()}function Qv(r,i,l){const{segments:c,points:u}=i;let p=!0,f=!1;r.beginPath();for(const s of c){const{start:S,end:M}=s,D=u[S],j=u[Nf(S,M,u)];p?(r.moveTo(D.x,D.y),p=!1):(r.lineTo(D.x,l),r.lineTo(D.x,D.y)),f=!!i.pathSegment(r,s,{move:f}),f?r.closePath():r.lineTo(j.x,l)}r.lineTo(i.first().x,l),r.closePath(),r.clip()}function ex(r,i,l){const{segments:c,points:u}=i;let p=!0,f=!1;r.beginPath();for(const s of c){const{start:S,end:M}=s,D=u[S],j=u[Nf(S,M,u)];p?(r.moveTo(D.x,D.y),p=!1):(r.lineTo(l,D.y),r.lineTo(D.x,D.y)),f=!!i.pathSegment(r,s,{move:f}),f?r.closePath():r.lineTo(l,j.y)}r.lineTo(l,i.first().y),r.closePath(),r.clip()}function gm(r,i){const{line:l,target:c,property:u,color:p,scale:f,clip:s}=i,S=zP(l,c,u);for(const{source:M,target:D,start:j,end:V}of S){const{style:{backgroundColor:X=p}={}}=M,re=c!==!0;r.save(),r.fillStyle=X,JP(r,f,s,re&&Em(u,j,V)),r.beginPath();const ae=!!l.pathSegment(r,M);let H;if(re){ae?r.closePath():tx(r,c,V,u);const Se=!!c.pathSegment(r,D,{move:ae,reverse:!0});H=ae&&Se,H||tx(r,c,j,u)}r.closePath(),r.fill(H?"evenodd":"nonzero"),r.restore()}}function JP(r,i,l,c){const u=i.chart.chartArea,{property:p,start:f,end:s}=c||{};if(p==="x"||p==="y"){let S,M,D,j;p==="x"?(S=f,M=u.top,D=s,j=u.bottom):(S=u.left,M=f,D=u.right,j=s),r.beginPath(),l&&(S=Math.max(S,l.left),D=Math.min(D,l.right),M=Math.max(M,l.top),j=Math.min(j,l.bottom)),r.rect(S,M,D-S,j-M),r.clip()}}function tx(r,i,l,c){const u=i.interpolate(l,c);u&&r.lineTo(u.x,u.y)}var QP={id:"filler",afterDatasetsUpdate(r,i,l){const c=(r.data.datasets||[]).length,u=[];let p,f,s,S;for(f=0;f<c;++f)p=r.getDatasetMeta(f),s=p.dataset,S=null,s&&s.options&&s instanceof Vf&&(S={visible:r.isDatasetVisible(f),index:f,fill:OP(s,f,c),chart:r,axis:p.controller.options.indexAxis,scale:p.vScale,line:s}),p.$filler=S,u.push(S);for(f=0;f<c;++f)S=u[f],!(!S||S.fill===!1)&&(S.fill=FP(u,f,l.propagate))},beforeDraw(r,i,l){const c=l.drawTime==="beforeDraw",u=r.getSortedVisibleDatasetMetas(),p=r.chartArea;for(let f=u.length-1;f>=0;--f){const s=u[f].$filler;s&&(s.line.updateControlPoints(p,s.axis),c&&s.fill&&mm(r.ctx,s,p))}},beforeDatasetsDraw(r,i,l){if(l.drawTime!=="beforeDatasetsDraw")return;const c=r.getSortedVisibleDatasetMetas();for(let u=c.length-1;u>=0;--u){const p=c[u].$filler;Jv(p)&&mm(r.ctx,p,r.chartArea)}},beforeDatasetDraw(r,i,l){const c=i.meta.$filler;!Jv(c)||l.drawTime!=="beforeDatasetDraw"||mm(r.ctx,c,r.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ix=(r,i)=>{let{boxHeight:l=i,boxWidth:c=i}=r;return r.usePointStyle&&(l=Math.min(l,i),c=r.pointStyleWidth||Math.min(c,i)),{boxWidth:c,boxHeight:l,itemHeight:Math.max(i,l)}},eM=(r,i)=>r!==null&&i!==null&&r.datasetIndex===i.datasetIndex&&r.index===i.index;class nx extends Ro{constructor(i){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,l,c){this.maxWidth=i,this.maxHeight=l,this._margins=c,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const i=this.options.labels||{};let l=Ki(i.generateLabels,[this.chart],this)||[];i.filter&&(l=l.filter(c=>i.filter(c,this.chart.data))),i.sort&&(l=l.sort((c,u)=>i.sort(c,u,this.chart.data))),this.options.reverse&&l.reverse(),this.legendItems=l}fit(){const{options:i,ctx:l}=this;if(!i.display){this.width=this.height=0;return}const c=i.labels,u=Hn(c.font),p=u.size,f=this._computeTitleHeight(),{boxWidth:s,itemHeight:S}=ix(c,p);let M,D;l.font=u.string,this.isHorizontal()?(M=this.maxWidth,D=this._fitRows(f,p,s,S)+10):(D=this.maxHeight,M=this._fitCols(f,u,s,S)+10),this.width=Math.min(M,i.maxWidth||this.maxWidth),this.height=Math.min(D,i.maxHeight||this.maxHeight)}_fitRows(i,l,c,u){const{ctx:p,maxWidth:f,options:{labels:{padding:s}}}=this,S=this.legendHitBoxes=[],M=this.lineWidths=[0],D=u+s;let j=i;p.textAlign="left",p.textBaseline="middle";let V=-1,X=-D;return this.legendItems.forEach((re,ae)=>{const H=c+l/2+p.measureText(re.text).width;(ae===0||M[M.length-1]+H+2*s>f)&&(j+=D,M[M.length-(ae>0?0:1)]=0,X+=D,V++),S[ae]={left:0,top:X,row:V,width:H,height:u},M[M.length-1]+=H+s}),j}_fitCols(i,l,c,u){const{ctx:p,maxHeight:f,options:{labels:{padding:s}}}=this,S=this.legendHitBoxes=[],M=this.columnSizes=[],D=f-i;let j=s,V=0,X=0,re=0,ae=0;return this.legendItems.forEach((H,Se)=>{const{itemWidth:xe,itemHeight:Pe}=tM(c,l,p,H,u);Se>0&&X+Pe+2*s>D&&(j+=V+s,M.push({width:V,height:X}),re+=V+s,ae++,V=X=0),S[Se]={left:re,top:X,col:ae,width:xe,height:Pe},V=Math.max(V,xe),X+=Pe+s}),j+=V,M.push({width:V,height:X}),j}adjustHitBoxes(){if(!this.options.display)return;const i=this._computeTitleHeight(),{legendHitBoxes:l,options:{align:c,labels:{padding:u},rtl:p}}=this,f=Sh(p,this.left,this.width);if(this.isHorizontal()){let s=0,S=ka(c,this.left+u,this.right-this.lineWidths[s]);for(const M of l)s!==M.row&&(s=M.row,S=ka(c,this.left+u,this.right-this.lineWidths[s])),M.top+=this.top+i+u,M.left=f.leftForLtr(f.x(S),M.width),S+=M.width+u}else{let s=0,S=ka(c,this.top+i+u,this.bottom-this.columnSizes[s].height);for(const M of l)M.col!==s&&(s=M.col,S=ka(c,this.top+i+u,this.bottom-this.columnSizes[s].height)),M.top=S,M.left+=this.left+u,M.left=f.leftForLtr(f.x(M.left),M.width),S+=M.height+u}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const i=this.ctx;Of(i,this),this._draw(),jf(i)}}_draw(){const{options:i,columnSizes:l,lineWidths:c,ctx:u}=this,{align:p,labels:f}=i,s=hn.color,S=Sh(i.rtl,this.left,this.width),M=Hn(f.font),{padding:D}=f,j=M.size,V=j/2;let X;this.drawTitle(),u.textAlign=S.textAlign("left"),u.textBaseline="middle",u.lineWidth=.5,u.font=M.string;const{boxWidth:re,boxHeight:ae,itemHeight:H}=ix(f,j),Se=function(et,Je,nt){if(isNaN(re)||re<=0||isNaN(ae)||ae<0)return;u.save();const mt=Gt(nt.lineWidth,1);if(u.fillStyle=Gt(nt.fillStyle,s),u.lineCap=Gt(nt.lineCap,"butt"),u.lineDashOffset=Gt(nt.lineDashOffset,0),u.lineJoin=Gt(nt.lineJoin,"miter"),u.lineWidth=mt,u.strokeStyle=Gt(nt.strokeStyle,s),u.setLineDash(Gt(nt.lineDash,[])),f.usePointStyle){const Tt={radius:ae*Math.SQRT2/2,pointStyle:nt.pointStyle,rotation:nt.rotation,borderWidth:mt},vt=S.xPlus(et,re/2),bt=Je+V;Yx(u,Tt,vt,bt,f.pointStyleWidth&&re)}else{const Tt=Je+Math.max((j-ae)/2,0),vt=S.leftForLtr(et,re),bt=du(nt.borderRadius);u.beginPath(),Object.values(bt).some(si=>si!==0)?Jd(u,{x:vt,y:Tt,w:re,h:ae,radius:bt}):u.rect(vt,Tt,re,ae),u.fill(),mt!==0&&u.stroke()}u.restore()},xe=function(et,Je,nt){yu(u,nt.text,et,Je+H/2,M,{strikethrough:nt.hidden,textAlign:S.textAlign(nt.textAlign)})},Pe=this.isHorizontal(),Ve=this._computeTitleHeight();Pe?X={x:ka(p,this.left+D,this.right-c[0]),y:this.top+D+Ve,line:0}:X={x:this.left+D,y:ka(p,this.top+Ve+D,this.bottom-l[0].height),line:0},ab(this.ctx,i.textDirection);const Ue=H+D;this.legendItems.forEach((et,Je)=>{u.strokeStyle=et.fontColor,u.fillStyle=et.fontColor;const nt=u.measureText(et.text).width,mt=S.textAlign(et.textAlign||(et.textAlign=f.textAlign)),Tt=re+V+nt;let vt=X.x,bt=X.y;S.setWidth(this.width),Pe?Je>0&&vt+Tt+D>this.right&&(bt=X.y+=Ue,X.line++,vt=X.x=ka(p,this.left+D,this.right-c[X.line])):Je>0&&bt+Ue>this.bottom&&(vt=X.x=vt+l[X.line].width+D,X.line++,bt=X.y=ka(p,this.top+Ve+D,this.bottom-l[X.line].height));const si=S.x(vt);if(Se(si,bt,et),vt=dS(mt,vt+re+V,Pe?vt+Tt:this.right,i.rtl),xe(S.x(vt),bt,et),Pe)X.x+=Tt+D;else if(typeof et.text!="string"){const di=M.lineHeight;X.y+=Ab(et,di)+D}else X.y+=Ue}),rb(this.ctx,i.textDirection)}drawTitle(){const i=this.options,l=i.title,c=Hn(l.font),u=Pa(l.padding);if(!l.display)return;const p=Sh(i.rtl,this.left,this.width),f=this.ctx,s=l.position,S=c.size/2,M=u.top+S;let D,j=this.left,V=this.width;if(this.isHorizontal())V=Math.max(...this.lineWidths),D=this.top+M,j=ka(i.align,j,this.right-V);else{const re=this.columnSizes.reduce((ae,H)=>Math.max(ae,H.height),0);D=M+ka(i.align,this.top,this.bottom-re-i.labels.padding-this._computeTitleHeight())}const X=ka(s,j,j+V);f.textAlign=p.textAlign(ig(s)),f.textBaseline="middle",f.strokeStyle=l.color,f.fillStyle=l.color,f.font=c.string,yu(f,l.text,X,D,c)}_computeTitleHeight(){const i=this.options.title,l=Hn(i.font),c=Pa(i.padding);return i.display?l.lineHeight+c.height:0}_getLegendItemAt(i,l){let c,u,p;if(Ao(i,this.left,this.right)&&Ao(l,this.top,this.bottom)){for(p=this.legendHitBoxes,c=0;c<p.length;++c)if(u=p[c],Ao(i,u.left,u.left+u.width)&&Ao(l,u.top,u.top+u.height))return this.legendItems[c]}return null}handleEvent(i){const l=this.options;if(!aM(i.type,l))return;const c=this._getLegendItemAt(i.x,i.y);if(i.type==="mousemove"||i.type==="mouseout"){const u=this._hoveredItem,p=eM(u,c);u&&!p&&Ki(l.onLeave,[i,u,this],this),this._hoveredItem=c,c&&!p&&Ki(l.onHover,[i,c,this],this)}else c&&Ki(l.onClick,[i,c,this],this)}}function tM(r,i,l,c,u){const p=iM(c,r,i,l),f=nM(u,c,i.lineHeight);return{itemWidth:p,itemHeight:f}}function iM(r,i,l,c){let u=r.text;return u&&typeof u!="string"&&(u=u.reduce((p,f)=>p.length>f.length?p:f)),i+l.size/2+c.measureText(u).width}function nM(r,i,l){let c=r;return typeof i.text!="string"&&(c=Ab(i,l)),c}function Ab(r,i){const l=r.text?r.text.length:0;return i*l}function aM(r,i){return!!((r==="mousemove"||r==="mouseout")&&(i.onHover||i.onLeave)||i.onClick&&(r==="click"||r==="mouseup"))}var rM={id:"legend",_element:nx,start(r,i,l){const c=r.legend=new nx({ctx:r.ctx,options:l,chart:r});Ta.configure(r,c,l),Ta.addBox(r,c)},stop(r){Ta.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,i,l){const c=r.legend;Ta.configure(r,c,l),c.options=l},afterUpdate(r){const i=r.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(r,i){i.replay||r.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,i,l){const c=i.datasetIndex,u=l.chart;u.isDatasetVisible(c)?(u.hide(c),i.hidden=!0):(u.show(c),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const i=r.data.datasets,{labels:{usePointStyle:l,pointStyle:c,textAlign:u,color:p,useBorderRadius:f,borderRadius:s}}=r.legend.options;return r._getSortedDatasetMetas().map(S=>{const M=S.controller.getStyle(l?0:void 0),D=Pa(M.borderWidth);return{text:i[S.index].label,fillStyle:M.backgroundColor,fontColor:p,hidden:!S.visible,lineCap:M.borderCapStyle,lineDash:M.borderDash,lineDashOffset:M.borderDashOffset,lineJoin:M.borderJoinStyle,lineWidth:(D.width+D.height)/4,strokeStyle:M.borderColor,pointStyle:c||M.pointStyle,rotation:M.rotation,textAlign:u||M.textAlign,borderRadius:f&&(s||M.borderRadius),datasetIndex:S.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};class fg extends Ro{constructor(i){super(),this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,l){const c=this.options;if(this.left=0,this.top=0,!c.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=i,this.height=this.bottom=l;const u=un(c.text)?c.text.length:1;this._padding=Pa(c.padding);const p=u*Hn(c.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=p:this.width=p}isHorizontal(){const i=this.options.position;return i==="top"||i==="bottom"}_drawArgs(i){const{top:l,left:c,bottom:u,right:p,options:f}=this,s=f.align;let S=0,M,D,j;return this.isHorizontal()?(D=ka(s,c,p),j=l+i,M=p-c):(f.position==="left"?(D=c+i,j=ka(s,u,l),S=bi*-.5):(D=p-i,j=ka(s,l,u),S=bi*.5),M=u-l),{titleX:D,titleY:j,maxWidth:M,rotation:S}}draw(){const i=this.ctx,l=this.options;if(!l.display)return;const c=Hn(l.font),p=c.lineHeight/2+this._padding.top,{titleX:f,titleY:s,maxWidth:S,rotation:M}=this._drawArgs(p);yu(i,l.text,0,0,c,{color:l.color,maxWidth:S,rotation:M,textAlign:ig(l.align),textBaseline:"middle",translation:[f,s]})}}function sM(r,i){const l=new fg({ctx:r.ctx,options:i,chart:r});Ta.configure(r,l,i),Ta.addBox(r,l),r.titleBlock=l}var oM={id:"title",_element:fg,start(r,i,l){sM(r,l)},stop(r){const i=r.titleBlock;Ta.removeBox(r,i),delete r.titleBlock},beforeUpdate(r,i,l){const c=r.titleBlock;Ta.configure(r,c,l),c.options=l},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const df=new WeakMap;var lM={id:"subtitle",start(r,i,l){const c=new fg({ctx:r.ctx,options:l,chart:r});Ta.configure(r,c,l),Ta.addBox(r,c),df.set(r,c)},stop(r){Ta.removeBox(r,df.get(r)),df.delete(r)},beforeUpdate(r,i,l){const c=df.get(r);Ta.configure(r,c,l),c.options=l},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $d={average(r){if(!r.length)return!1;let i,l,c=new Set,u=0,p=0;for(i=0,l=r.length;i<l;++i){const s=r[i].element;if(s&&s.hasValue()){const S=s.tooltipPosition();c.add(S.x),u+=S.y,++p}}return p===0||c.size===0?!1:{x:[...c].reduce((s,S)=>s+S)/c.size,y:u/p}},nearest(r,i){if(!r.length)return!1;let l=i.x,c=i.y,u=Number.POSITIVE_INFINITY,p,f,s;for(p=0,f=r.length;p<f;++p){const S=r[p].element;if(S&&S.hasValue()){const M=S.getCenterPoint(),D=km(i,M);D<u&&(u=D,s=S)}}if(s){const S=s.tooltipPosition();l=S.x,c=S.y}return{x:l,y:c}}};function Ws(r,i){return i&&(un(i)?Array.prototype.push.apply(r,i):r.push(i)),r}function Lo(r){return(typeof r=="string"||r instanceof String)&&r.indexOf(`
`)>-1?r.split(`
`):r}function uM(r,i){const{element:l,datasetIndex:c,index:u}=i,p=r.getDatasetMeta(c).controller,{label:f,value:s}=p.getLabelAndValue(u);return{chart:r,label:f,parsed:p.getParsed(u),raw:r.data.datasets[c].data[u],formattedValue:s,dataset:p.getDataset(),dataIndex:u,datasetIndex:c,element:l}}function ax(r,i){const l=r.chart.ctx,{body:c,footer:u,title:p}=r,{boxWidth:f,boxHeight:s}=i,S=Hn(i.bodyFont),M=Hn(i.titleFont),D=Hn(i.footerFont),j=p.length,V=u.length,X=c.length,re=Pa(i.padding);let ae=re.height,H=0,Se=c.reduce((Ve,Ue)=>Ve+Ue.before.length+Ue.lines.length+Ue.after.length,0);if(Se+=r.beforeBody.length+r.afterBody.length,j&&(ae+=j*M.lineHeight+(j-1)*i.titleSpacing+i.titleMarginBottom),Se){const Ve=i.displayColors?Math.max(s,S.lineHeight):S.lineHeight;ae+=X*Ve+(Se-X)*S.lineHeight+(Se-1)*i.bodySpacing}V&&(ae+=i.footerMarginTop+V*D.lineHeight+(V-1)*i.footerSpacing);let xe=0;const Pe=function(Ve){H=Math.max(H,l.measureText(Ve).width+xe)};return l.save(),l.font=M.string,Ai(r.title,Pe),l.font=S.string,Ai(r.beforeBody.concat(r.afterBody),Pe),xe=i.displayColors?f+2+i.boxPadding:0,Ai(c,Ve=>{Ai(Ve.before,Pe),Ai(Ve.lines,Pe),Ai(Ve.after,Pe)}),xe=0,l.font=D.string,Ai(r.footer,Pe),l.restore(),H+=re.width,{width:H,height:ae}}function hM(r,i){const{y:l,height:c}=i;return l<c/2?"top":l>r.height-c/2?"bottom":"center"}function dM(r,i,l,c){const{x:u,width:p}=c,f=l.caretSize+l.caretPadding;if(r==="left"&&u+p+f>i.width||r==="right"&&u-p-f<0)return!0}function cM(r,i,l,c){const{x:u,width:p}=l,{width:f,chartArea:{left:s,right:S}}=r;let M="center";return c==="center"?M=u<=(s+S)/2?"left":"right":u<=p/2?M="left":u>=f-p/2&&(M="right"),dM(M,r,i,l)&&(M="center"),M}function rx(r,i,l){const c=l.yAlign||i.yAlign||hM(r,l);return{xAlign:l.xAlign||i.xAlign||cM(r,i,l,c),yAlign:c}}function fM(r,i){let{x:l,width:c}=r;return i==="right"?l-=c:i==="center"&&(l-=c/2),l}function pM(r,i,l){let{y:c,height:u}=r;return i==="top"?c+=l:i==="bottom"?c-=u+l:c-=u/2,c}function sx(r,i,l,c){const{caretSize:u,caretPadding:p,cornerRadius:f}=r,{xAlign:s,yAlign:S}=l,M=u+p,{topLeft:D,topRight:j,bottomLeft:V,bottomRight:X}=du(f);let re=fM(i,s);const ae=pM(i,S,M);return S==="center"?s==="left"?re+=M:s==="right"&&(re-=M):s==="left"?re-=Math.max(D,V)+u:s==="right"&&(re+=Math.max(j,X)+u),{x:sa(re,0,c.width-i.width),y:sa(ae,0,c.height-i.height)}}function cf(r,i,l){const c=Pa(l.padding);return i==="center"?r.x+r.width/2:i==="right"?r.x+r.width-c.right:r.x+c.left}function ox(r){return Ws([],Lo(r))}function mM(r,i,l){return bl(r,{tooltip:i,tooltipItems:l,type:"tooltip"})}function lx(r,i){const l=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return l?r.override(l):r}const Ib={beforeTitle:Mo,title(r){if(r.length>0){const i=r[0],l=i.chart.data.labels,c=l?l.length:0;if(this&&this.options&&this.options.mode==="dataset")return i.dataset.label||"";if(i.label)return i.label;if(c>0&&i.dataIndex<c)return l[i.dataIndex]}return""},afterTitle:Mo,beforeBody:Mo,beforeLabel:Mo,label(r){if(this&&this.options&&this.options.mode==="dataset")return r.label+": "+r.formattedValue||r.formattedValue;let i=r.dataset.label||"";i&&(i+=": ");const l=r.formattedValue;return ai(l)||(i+=l),i},labelColor(r){const l=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:l.borderColor,backgroundColor:l.backgroundColor,borderWidth:l.borderWidth,borderDash:l.borderDash,borderDashOffset:l.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const l=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:l.pointStyle,rotation:l.rotation}},afterLabel:Mo,afterBody:Mo,beforeFooter:Mo,footer:Mo,afterFooter:Mo};function Qa(r,i,l,c){const u=r[i].call(l,c);return typeof u>"u"?Ib[i].call(l,c):u}class ux extends Ro{static positioners=$d;constructor(i){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=i.chart,this.options=i.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(i){this.options=i,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const i=this._cachedAnimations;if(i)return i;const l=this.chart,c=this.options.setContext(this.getContext()),u=c.enabled&&l.options.animation&&c.animations,p=new hb(this.chart,u);return u._cacheable&&(this._cachedAnimations=Object.freeze(p)),p}getContext(){return this.$context||(this.$context=mM(this.chart.getContext(),this,this._tooltipItems))}getTitle(i,l){const{callbacks:c}=l,u=Qa(c,"beforeTitle",this,i),p=Qa(c,"title",this,i),f=Qa(c,"afterTitle",this,i);let s=[];return s=Ws(s,Lo(u)),s=Ws(s,Lo(p)),s=Ws(s,Lo(f)),s}getBeforeBody(i,l){return ox(Qa(l.callbacks,"beforeBody",this,i))}getBody(i,l){const{callbacks:c}=l,u=[];return Ai(i,p=>{const f={before:[],lines:[],after:[]},s=lx(c,p);Ws(f.before,Lo(Qa(s,"beforeLabel",this,p))),Ws(f.lines,Qa(s,"label",this,p)),Ws(f.after,Lo(Qa(s,"afterLabel",this,p))),u.push(f)}),u}getAfterBody(i,l){return ox(Qa(l.callbacks,"afterBody",this,i))}getFooter(i,l){const{callbacks:c}=l,u=Qa(c,"beforeFooter",this,i),p=Qa(c,"footer",this,i),f=Qa(c,"afterFooter",this,i);let s=[];return s=Ws(s,Lo(u)),s=Ws(s,Lo(p)),s=Ws(s,Lo(f)),s}_createItems(i){const l=this._active,c=this.chart.data,u=[],p=[],f=[];let s=[],S,M;for(S=0,M=l.length;S<M;++S)s.push(uM(this.chart,l[S]));return i.filter&&(s=s.filter((D,j,V)=>i.filter(D,j,V,c))),i.itemSort&&(s=s.sort((D,j)=>i.itemSort(D,j,c))),Ai(s,D=>{const j=lx(i.callbacks,D);u.push(Qa(j,"labelColor",this,D)),p.push(Qa(j,"labelPointStyle",this,D)),f.push(Qa(j,"labelTextColor",this,D))}),this.labelColors=u,this.labelPointStyles=p,this.labelTextColors=f,this.dataPoints=s,s}update(i,l){const c=this.options.setContext(this.getContext()),u=this._active;let p,f=[];if(!u.length)this.opacity!==0&&(p={opacity:0});else{const s=$d[c.position].call(this,u,this._eventPosition);f=this._createItems(c),this.title=this.getTitle(f,c),this.beforeBody=this.getBeforeBody(f,c),this.body=this.getBody(f,c),this.afterBody=this.getAfterBody(f,c),this.footer=this.getFooter(f,c);const S=this._size=ax(this,c),M=Object.assign({},s,S),D=rx(this.chart,c,M),j=sx(c,M,D,this.chart);this.xAlign=D.xAlign,this.yAlign=D.yAlign,p={opacity:1,x:j.x,y:j.y,width:S.width,height:S.height,caretX:s.x,caretY:s.y}}this._tooltipItems=f,this.$context=void 0,p&&this._resolveAnimations().update(this,p),i&&c.external&&c.external.call(this,{chart:this.chart,tooltip:this,replay:l})}drawCaret(i,l,c,u){const p=this.getCaretPosition(i,c,u);l.lineTo(p.x1,p.y1),l.lineTo(p.x2,p.y2),l.lineTo(p.x3,p.y3)}getCaretPosition(i,l,c){const{xAlign:u,yAlign:p}=this,{caretSize:f,cornerRadius:s}=c,{topLeft:S,topRight:M,bottomLeft:D,bottomRight:j}=du(s),{x:V,y:X}=i,{width:re,height:ae}=l;let H,Se,xe,Pe,Ve,Ue;return p==="center"?(Ve=X+ae/2,u==="left"?(H=V,Se=H-f,Pe=Ve+f,Ue=Ve-f):(H=V+re,Se=H+f,Pe=Ve-f,Ue=Ve+f),xe=H):(u==="left"?Se=V+Math.max(S,D)+f:u==="right"?Se=V+re-Math.max(M,j)-f:Se=this.caretX,p==="top"?(Pe=X,Ve=Pe-f,H=Se-f,xe=Se+f):(Pe=X+ae,Ve=Pe+f,H=Se+f,xe=Se-f),Ue=Pe),{x1:H,x2:Se,x3:xe,y1:Pe,y2:Ve,y3:Ue}}drawTitle(i,l,c){const u=this.title,p=u.length;let f,s,S;if(p){const M=Sh(c.rtl,this.x,this.width);for(i.x=cf(this,c.titleAlign,c),l.textAlign=M.textAlign(c.titleAlign),l.textBaseline="middle",f=Hn(c.titleFont),s=c.titleSpacing,l.fillStyle=c.titleColor,l.font=f.string,S=0;S<p;++S)l.fillText(u[S],M.x(i.x),i.y+f.lineHeight/2),i.y+=f.lineHeight+s,S+1===p&&(i.y+=c.titleMarginBottom-s)}}_drawColorBox(i,l,c,u,p){const f=this.labelColors[c],s=this.labelPointStyles[c],{boxHeight:S,boxWidth:M}=p,D=Hn(p.bodyFont),j=cf(this,"left",p),V=u.x(j),X=S<D.lineHeight?(D.lineHeight-S)/2:0,re=l.y+X;if(p.usePointStyle){const ae={radius:Math.min(M,S)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},H=u.leftForLtr(V,M)+M/2,Se=re+S/2;i.strokeStyle=p.multiKeyBackground,i.fillStyle=p.multiKeyBackground,Tm(i,ae,H,Se),i.strokeStyle=f.borderColor,i.fillStyle=f.backgroundColor,Tm(i,ae,H,Se)}else{i.lineWidth=ri(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,i.strokeStyle=f.borderColor,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset||0;const ae=u.leftForLtr(V,M),H=u.leftForLtr(u.xPlus(V,1),M-2),Se=du(f.borderRadius);Object.values(Se).some(xe=>xe!==0)?(i.beginPath(),i.fillStyle=p.multiKeyBackground,Jd(i,{x:ae,y:re,w:M,h:S,radius:Se}),i.fill(),i.stroke(),i.fillStyle=f.backgroundColor,i.beginPath(),Jd(i,{x:H,y:re+1,w:M-2,h:S-2,radius:Se}),i.fill()):(i.fillStyle=p.multiKeyBackground,i.fillRect(ae,re,M,S),i.strokeRect(ae,re,M,S),i.fillStyle=f.backgroundColor,i.fillRect(H,re+1,M-2,S-2))}i.fillStyle=this.labelTextColors[c]}drawBody(i,l,c){const{body:u}=this,{bodySpacing:p,bodyAlign:f,displayColors:s,boxHeight:S,boxWidth:M,boxPadding:D}=c,j=Hn(c.bodyFont);let V=j.lineHeight,X=0;const re=Sh(c.rtl,this.x,this.width),ae=function(nt){l.fillText(nt,re.x(i.x+X),i.y+V/2),i.y+=V+p},H=re.textAlign(f);let Se,xe,Pe,Ve,Ue,et,Je;for(l.textAlign=f,l.textBaseline="middle",l.font=j.string,i.x=cf(this,H,c),l.fillStyle=c.bodyColor,Ai(this.beforeBody,ae),X=s&&H!=="right"?f==="center"?M/2+D:M+2+D:0,Ve=0,et=u.length;Ve<et;++Ve){for(Se=u[Ve],xe=this.labelTextColors[Ve],l.fillStyle=xe,Ai(Se.before,ae),Pe=Se.lines,s&&Pe.length&&(this._drawColorBox(l,i,Ve,re,c),V=Math.max(j.lineHeight,S)),Ue=0,Je=Pe.length;Ue<Je;++Ue)ae(Pe[Ue]),V=j.lineHeight;Ai(Se.after,ae)}X=0,V=j.lineHeight,Ai(this.afterBody,ae),i.y-=p}drawFooter(i,l,c){const u=this.footer,p=u.length;let f,s;if(p){const S=Sh(c.rtl,this.x,this.width);for(i.x=cf(this,c.footerAlign,c),i.y+=c.footerMarginTop,l.textAlign=S.textAlign(c.footerAlign),l.textBaseline="middle",f=Hn(c.footerFont),l.fillStyle=c.footerColor,l.font=f.string,s=0;s<p;++s)l.fillText(u[s],S.x(i.x),i.y+f.lineHeight/2),i.y+=f.lineHeight+c.footerSpacing}}drawBackground(i,l,c,u){const{xAlign:p,yAlign:f}=this,{x:s,y:S}=i,{width:M,height:D}=c,{topLeft:j,topRight:V,bottomLeft:X,bottomRight:re}=du(u.cornerRadius);l.fillStyle=u.backgroundColor,l.strokeStyle=u.borderColor,l.lineWidth=u.borderWidth,l.beginPath(),l.moveTo(s+j,S),f==="top"&&this.drawCaret(i,l,c,u),l.lineTo(s+M-V,S),l.quadraticCurveTo(s+M,S,s+M,S+V),f==="center"&&p==="right"&&this.drawCaret(i,l,c,u),l.lineTo(s+M,S+D-re),l.quadraticCurveTo(s+M,S+D,s+M-re,S+D),f==="bottom"&&this.drawCaret(i,l,c,u),l.lineTo(s+X,S+D),l.quadraticCurveTo(s,S+D,s,S+D-X),f==="center"&&p==="left"&&this.drawCaret(i,l,c,u),l.lineTo(s,S+j),l.quadraticCurveTo(s,S,s+j,S),l.closePath(),l.fill(),u.borderWidth>0&&l.stroke()}_updateAnimationTarget(i){const l=this.chart,c=this.$animations,u=c&&c.x,p=c&&c.y;if(u||p){const f=$d[i.position].call(this,this._active,this._eventPosition);if(!f)return;const s=this._size=ax(this,i),S=Object.assign({},f,this._size),M=rx(l,i,S),D=sx(i,S,M,l);(u._to!==D.x||p._to!==D.y)&&(this.xAlign=M.xAlign,this.yAlign=M.yAlign,this.width=s.width,this.height=s.height,this.caretX=f.x,this.caretY=f.y,this._resolveAnimations().update(this,D))}}_willRender(){return!!this.opacity}draw(i){const l=this.options.setContext(this.getContext());let c=this.opacity;if(!c)return;this._updateAnimationTarget(l);const u={width:this.width,height:this.height},p={x:this.x,y:this.y};c=Math.abs(c)<.001?0:c;const f=Pa(l.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;l.enabled&&s&&(i.save(),i.globalAlpha=c,this.drawBackground(p,i,u,l),ab(i,l.textDirection),p.y+=f.top,this.drawTitle(p,i,l),this.drawBody(p,i,l),this.drawFooter(p,i,l),rb(i,l.textDirection),i.restore())}getActiveElements(){return this._active||[]}setActiveElements(i,l){const c=this._active,u=i.map(({datasetIndex:s,index:S})=>{const M=this.chart.getDatasetMeta(s);if(!M)throw new Error("Cannot find a dataset at index "+s);return{datasetIndex:s,element:M.data[S],index:S}}),p=!Sf(c,u),f=this._positionChanged(u,l);(p||f)&&(this._active=u,this._eventPosition=l,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(i,l,c=!0){if(l&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const u=this.options,p=this._active||[],f=this._getActiveElements(i,p,l,c),s=this._positionChanged(f,i),S=l||!Sf(f,p)||s;return S&&(this._active=f,(u.enabled||u.external)&&(this._eventPosition={x:i.x,y:i.y},this.update(!0,l))),S}_getActiveElements(i,l,c,u){const p=this.options;if(i.type==="mouseout")return[];if(!u)return l.filter(s=>this.chart.data.datasets[s.datasetIndex]&&this.chart.getDatasetMeta(s.datasetIndex).controller.getParsed(s.index)!==void 0);const f=this.chart.getElementsAtEventForMode(i,p.mode,p,c);return p.reverse&&f.reverse(),f}_positionChanged(i,l){const{caretX:c,caretY:u,options:p}=this,f=$d[p.position].call(this,i,l);return f!==!1&&(c!==f.x||u!==f.y)}}var gM={id:"tooltip",_element:ux,positioners:$d,afterInit(r,i,l){l&&(r.tooltip=new ux({chart:r,options:l}))},beforeUpdate(r,i,l){r.tooltip&&r.tooltip.initialize(l)},reset(r,i,l){r.tooltip&&r.tooltip.initialize(l)},afterDraw(r){const i=r.tooltip;if(i&&i._willRender()){const l={tooltip:i};if(r.notifyPlugins("beforeTooltipDraw",{...l,cancelable:!0})===!1)return;i.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",l)}},afterEvent(r,i){if(r.tooltip){const l=i.replay;r.tooltip.handleEvent(i.event,l,i.inChartArea)&&(i.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,i)=>i.bodyFont.size,boxWidth:(r,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ib},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>r!=="filter"&&r!=="itemSort"&&r!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},_M=Object.freeze({__proto__:null,Colors:LP,Decimation:DP,Filler:QP,Legend:rM,SubTitle:lM,Title:oM,Tooltip:gM});const yM=(r,i,l,c)=>(typeof i=="string"?(l=r.push(i)-1,c.unshift({index:l,label:i})):isNaN(i)&&(l=null),l);function vM(r,i,l,c){const u=r.indexOf(i);if(u===-1)return yM(r,i,l,c);const p=r.lastIndexOf(i);return u!==p?l:u}const xM=(r,i)=>r===null?null:sa(Math.round(r),0,i);function hx(r){const i=this.getLabels();return r>=0&&r<i.length?i[r]:r}class bM extends xu{static id="category";static defaults={ticks:{callback:hx}};constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){const l=this._addedLabels;if(l.length){const c=this.getLabels();for(const{index:u,label:p}of l)c[u]===p&&c.splice(u,1);this._addedLabels=[]}super.init(i)}parse(i,l){if(ai(i))return null;const c=this.getLabels();return l=isFinite(l)&&c[l]===i?l:vM(c,i,Gt(l,i),this._addedLabels),xM(l,c.length-1)}determineDataLimits(){const{minDefined:i,maxDefined:l}=this.getUserBounds();let{min:c,max:u}=this.getMinMax(!0);this.options.bounds==="ticks"&&(i||(c=0),l||(u=this.getLabels().length-1)),this.min=c,this.max=u}buildTicks(){const i=this.min,l=this.max,c=this.options.offset,u=[];let p=this.getLabels();p=i===0&&l===p.length-1?p:p.slice(i,l+1),this._valueRange=Math.max(p.length-(c?0:1),1),this._startValue=this.min-(c?.5:0);for(let f=i;f<=l;f++)u.push({value:f});return u}getLabelForValue(i){return hx.call(this,i)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return typeof i!="number"&&(i=this.parse(i)),i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){const l=this.ticks;return i<0||i>l.length-1?null:this.getPixelForValue(l[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}}function wM(r,i){const l=[],{bounds:u,step:p,min:f,max:s,precision:S,count:M,maxTicks:D,maxDigits:j,includeBounds:V}=r,X=p||1,re=D-1,{min:ae,max:H}=i,Se=!ai(f),xe=!ai(s),Pe=!ai(M),Ve=(H-ae)/(j+1);let Ue=av((H-ae)/re/X)*X,et,Je,nt,mt;if(Ue<1e-14&&!Se&&!xe)return[{value:ae},{value:H}];mt=Math.ceil(H/Ue)-Math.floor(ae/Ue),mt>re&&(Ue=av(mt*Ue/re/X)*X),ai(S)||(et=Math.pow(10,S),Ue=Math.ceil(Ue*et)/et),u==="ticks"?(Je=Math.floor(ae/Ue)*Ue,nt=Math.ceil(H/Ue)*Ue):(Je=ae,nt=H),Se&&xe&&p&&aS((s-f)/p,Ue/1e3)?(mt=Math.round(Math.min((s-f)/Ue,D)),Ue=(s-f)/mt,Je=f,nt=s):Pe?(Je=Se?f:Je,nt=xe?s:nt,mt=M-1,Ue=(nt-Je)/mt):(mt=(nt-Je)/Ue,Ud(mt,Math.round(mt),Ue/1e3)?mt=Math.round(mt):mt=Math.ceil(mt));const Tt=Math.max(rv(Ue),rv(Je));et=Math.pow(10,ai(S)?Tt:S),Je=Math.round(Je*et)/et,nt=Math.round(nt*et)/et;let vt=0;for(Se&&(V&&Je!==f?(l.push({value:f}),Je<f&&vt++,Ud(Math.round((Je+vt*Ue)*et)/et,f,dx(f,Ve,r))&&vt++):Je<f&&vt++);vt<mt;++vt){const bt=Math.round((Je+vt*Ue)*et)/et;if(xe&&bt>s)break;l.push({value:bt})}return xe&&V&&nt!==s?l.length&&Ud(l[l.length-1].value,s,dx(s,Ve,r))?l[l.length-1].value=s:l.push({value:s}):(!xe||nt===s)&&l.push({value:nt}),l}function dx(r,i,{horizontal:l,minRotation:c}){const u=cs(c),p=(l?Math.sin(u):Math.cos(u))||.001,f=.75*i*(""+r).length;return Math.min(i/p,f)}class Af extends xu{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(i,l){return ai(i)||(typeof i=="number"||i instanceof Number)&&!isFinite(+i)?null:+i}handleTickRangeOptions(){const{beginAtZero:i}=this.options,{minDefined:l,maxDefined:c}=this.getUserBounds();let{min:u,max:p}=this;const f=S=>u=l?u:S,s=S=>p=c?p:S;if(i){const S=Ys(u),M=Ys(p);S<0&&M<0?s(0):S>0&&M>0&&f(0)}if(u===p){let S=p===0?1:Math.abs(p*.05);s(p+S),i||f(u-S)}this.min=u,this.max=p}getTickLimit(){const i=this.options.ticks;let{maxTicksLimit:l,stepSize:c}=i,u;return c?(u=Math.ceil(this.max/c)-Math.floor(this.min/c)+1,u>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${c} would result generating up to ${u} ticks. Limiting to 1000.`),u=1e3)):(u=this.computeTickLimit(),l=l||11),l&&(u=Math.min(l,u)),u}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const i=this.options,l=i.ticks;let c=this.getTickLimit();c=Math.max(2,c);const u={maxTicks:c,bounds:i.bounds,min:i.min,max:i.max,precision:l.precision,step:l.stepSize,count:l.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:l.minRotation||0,includeBounds:l.includeBounds!==!1},p=this._range||this,f=wM(u,p);return i.bounds==="ticks"&&Vx(f,this,"value"),i.reverse?(f.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),f}configure(){const i=this.ticks;let l=this.min,c=this.max;if(super.configure(),this.options.offset&&i.length){const u=(c-l)/Math.max(i.length-1,1)/2;l-=u,c+=u}this._startValue=l,this._endValue=c,this._valueRange=c-l}getLabelForValue(i){return nc(i,this.chart.options.locale,this.options.ticks.format)}}class kM extends Af{static id="linear";static defaults={ticks:{callback:Ff.formatters.numeric}};determineDataLimits(){const{min:i,max:l}=this.getMinMax(!0);this.min=vn(i)?i:0,this.max=vn(l)?l:1,this.handleTickRangeOptions()}computeTickLimit(){const i=this.isHorizontal(),l=i?this.width:this.height,c=cs(this.options.ticks.minRotation),u=(i?Math.sin(c):Math.cos(c))||.001,p=this._resolveTickFontOptions(0);return Math.ceil(l/Math.min(40,p.lineHeight/u))}getPixelForValue(i){return i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getValueForPixel(i){return this._startValue+this.getDecimalForPixel(i)*this._valueRange}}const ec=r=>Math.floor(fl(r)),su=(r,i)=>Math.pow(10,ec(r)+i);function cx(r){return r/Math.pow(10,ec(r))===1}function fx(r,i,l){const c=Math.pow(10,l),u=Math.floor(r/c);return Math.ceil(i/c)-u}function SM(r,i){const l=i-r;let c=ec(l);for(;fx(r,i,c)>10;)c++;for(;fx(r,i,c)<10;)c--;return Math.min(c,ec(r))}function TM(r,{min:i,max:l}){i=Sr(r.min,i);const c=[],u=ec(i);let p=SM(i,l),f=p<0?Math.pow(10,Math.abs(p)):1;const s=Math.pow(10,p),S=u>p?Math.pow(10,u):0,M=Math.round((i-S)*f)/f,D=Math.floor((i-S)/s/10)*s*10;let j=Math.floor((M-D)/Math.pow(10,p)),V=Sr(r.min,Math.round((S+D+j*Math.pow(10,p))*f)/f);for(;V<l;)c.push({value:V,major:cx(V),significand:j}),j>=10?j=j<15?15:20:j++,j>=20&&(p++,j=2,f=p>=0?1:f),V=Math.round((S+D+j*Math.pow(10,p))*f)/f;const X=Sr(r.max,V);return c.push({value:X,major:cx(X),significand:j}),c}class PM extends xu{static id="logarithmic";static defaults={ticks:{callback:Ff.formatters.logarithmic,major:{enabled:!0}}};constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(i,l){const c=Af.prototype.parse.apply(this,[i,l]);if(c===0){this._zero=!0;return}return vn(c)&&c>0?c:null}determineDataLimits(){const{min:i,max:l}=this.getMinMax(!0);this.min=vn(i)?Math.max(0,i):null,this.max=vn(l)?Math.max(0,l):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!vn(this._userMin)&&(this.min=i===su(this.min,0)?su(this.min,-1):su(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:i,maxDefined:l}=this.getUserBounds();let c=this.min,u=this.max;const p=s=>c=i?c:s,f=s=>u=l?u:s;c===u&&(c<=0?(p(1),f(10)):(p(su(c,-1)),f(su(u,1)))),c<=0&&p(su(u,-1)),u<=0&&f(su(c,1)),this.min=c,this.max=u}buildTicks(){const i=this.options,l={min:this._userMin,max:this._userMax},c=TM(l,this);return i.bounds==="ticks"&&Vx(c,this,"value"),i.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}getLabelForValue(i){return i===void 0?"0":nc(i,this.chart.options.locale,this.options.ticks.format)}configure(){const i=this.min;super.configure(),this._startValue=fl(i),this._valueRange=fl(this.max)-fl(i)}getPixelForValue(i){return(i===void 0||i===0)&&(i=this.min),i===null||isNaN(i)?NaN:this.getPixelForDecimal(i===this.min?0:(fl(i)-this._startValue)/this._valueRange)}getValueForPixel(i){const l=this.getDecimalForPixel(i);return Math.pow(10,this._startValue+l*this._valueRange)}}function Am(r){const i=r.ticks;if(i.display&&r.display){const l=Pa(i.backdropPadding);return Gt(i.font&&i.font.size,hn.font.size)+l.height}return 0}function MM(r,i,l){return l=un(l)?l:[l],{w:bS(r,i.string,l),h:l.length*i.lineHeight}}function px(r,i,l,c,u){return r===c||r===u?{start:i-l/2,end:i+l/2}:r<c||r>u?{start:i-l,end:i}:{start:i,end:i+l}}function CM(r){const i={l:r.left+r._padding.left,r:r.right-r._padding.right,t:r.top+r._padding.top,b:r.bottom-r._padding.bottom},l=Object.assign({},i),c=[],u=[],p=r._pointLabels.length,f=r.options.pointLabels,s=f.centerPointLabels?bi/p:0;for(let S=0;S<p;S++){const M=f.setContext(r.getPointLabelContext(S));u[S]=M.padding;const D=r.getPointPosition(S,r.drawingArea+u[S],s),j=Hn(M.font),V=MM(r.ctx,j,r._pointLabels[S]);c[S]=V;const X=Sa(r.getIndexAngle(S)+s),re=Math.round(eg(X)),ae=px(re,D.x,V.w,0,180),H=px(re,D.y,V.h,90,270);LM(l,i,X,ae,H)}r.setCenterPoint(i.l-l.l,l.r-i.r,i.t-l.t,l.b-i.b),r._pointLabelItems=IM(r,c,u)}function LM(r,i,l,c,u){const p=Math.abs(Math.sin(l)),f=Math.abs(Math.cos(l));let s=0,S=0;c.start<i.l?(s=(i.l-c.start)/p,r.l=Math.min(r.l,i.l-s)):c.end>i.r&&(s=(c.end-i.r)/p,r.r=Math.max(r.r,i.r+s)),u.start<i.t?(S=(i.t-u.start)/f,r.t=Math.min(r.t,i.t-S)):u.end>i.b&&(S=(u.end-i.b)/f,r.b=Math.max(r.b,i.b+S))}function EM(r,i,l){const c=r.drawingArea,{extra:u,additionalAngle:p,padding:f,size:s}=l,S=r.getPointPosition(i,c+u+f,p),M=Math.round(eg(Sa(S.angle+Mn))),D=RM(S.y,s.h,M),j=DM(M),V=zM(S.x,s.w,j);return{visible:!0,x:S.x,y:D,textAlign:j,left:V,top:D,right:V+s.w,bottom:D+s.h}}function AM(r,i){if(!i)return!0;const{left:l,top:c,right:u,bottom:p}=r;return!(Do({x:l,y:c},i)||Do({x:l,y:p},i)||Do({x:u,y:c},i)||Do({x:u,y:p},i))}function IM(r,i,l){const c=[],u=r._pointLabels.length,p=r.options,{centerPointLabels:f,display:s}=p.pointLabels,S={extra:Am(p)/2,additionalAngle:f?bi/u:0};let M;for(let D=0;D<u;D++){S.padding=l[D],S.size=i[D];const j=EM(r,D,S);c.push(j),s==="auto"&&(j.visible=AM(j,M),j.visible&&(M=j))}return c}function DM(r){return r===0||r===180?"center":r<180?"left":"right"}function zM(r,i,l){return l==="right"?r-=i:l==="center"&&(r-=i/2),r}function RM(r,i,l){return l===90||l===270?r-=i/2:(l>270||l<90)&&(r-=i),r}function FM(r,i,l){const{left:c,top:u,right:p,bottom:f}=l,{backdropColor:s}=i;if(!ai(s)){const S=du(i.borderRadius),M=Pa(i.backdropPadding);r.fillStyle=s;const D=c-M.left,j=u-M.top,V=p-c+M.width,X=f-u+M.height;Object.values(S).some(re=>re!==0)?(r.beginPath(),Jd(r,{x:D,y:j,w:V,h:X,radius:S}),r.fill()):r.fillRect(D,j,V,X)}}function OM(r,i){const{ctx:l,options:{pointLabels:c}}=r;for(let u=i-1;u>=0;u--){const p=r._pointLabelItems[u];if(!p.visible)continue;const f=c.setContext(r.getPointLabelContext(u));FM(l,f,p);const s=Hn(f.font),{x:S,y:M,textAlign:D}=p;yu(l,r._pointLabels[u],S,M+s.lineHeight/2,s,{color:f.color,textAlign:D,textBaseline:"middle"})}}function Db(r,i,l,c){const{ctx:u}=r;if(l)u.arc(r.xCenter,r.yCenter,i,0,nn);else{let p=r.getPointPosition(0,i);u.moveTo(p.x,p.y);for(let f=1;f<c;f++)p=r.getPointPosition(f,i),u.lineTo(p.x,p.y)}}function jM(r,i,l,c,u){const p=r.ctx,f=i.circular,{color:s,lineWidth:S}=i;!f&&!c||!s||!S||l<0||(p.save(),p.strokeStyle=s,p.lineWidth=S,p.setLineDash(u.dash||[]),p.lineDashOffset=u.dashOffset,p.beginPath(),Db(r,l,f,c),p.closePath(),p.stroke(),p.restore())}function BM(r,i,l){return bl(r,{label:l,index:i,type:"pointLabel"})}class $M extends Af{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ff.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(i){return i},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(i){super(i),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const i=this._padding=Pa(Am(this.options)/2),l=this.width=this.maxWidth-i.width,c=this.height=this.maxHeight-i.height;this.xCenter=Math.floor(this.left+l/2+i.left),this.yCenter=Math.floor(this.top+c/2+i.top),this.drawingArea=Math.floor(Math.min(l,c)/2)}determineDataLimits(){const{min:i,max:l}=this.getMinMax(!1);this.min=vn(i)&&!isNaN(i)?i:0,this.max=vn(l)&&!isNaN(l)?l:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Am(this.options))}generateTickLabels(i){Af.prototype.generateTickLabels.call(this,i),this._pointLabels=this.getLabels().map((l,c)=>{const u=Ki(this.options.pointLabels.callback,[l,c],this);return u||u===0?u:""}).filter((l,c)=>this.chart.getDataVisibility(c))}fit(){const i=this.options;i.display&&i.pointLabels.display?CM(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(i,l,c,u){this.xCenter+=Math.floor((i-l)/2),this.yCenter+=Math.floor((c-u)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(i,l,c,u))}getIndexAngle(i){const l=nn/(this._pointLabels.length||1),c=this.options.startAngle||0;return Sa(i*l+cs(c))}getDistanceFromCenterForValue(i){if(ai(i))return NaN;const l=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-i)*l:(i-this.min)*l}getValueForDistanceFromCenter(i){if(ai(i))return NaN;const l=i/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-l:this.min+l}getPointLabelContext(i){const l=this._pointLabels||[];if(i>=0&&i<l.length){const c=l[i];return BM(this.getContext(),i,c)}}getPointPosition(i,l,c=0){const u=this.getIndexAngle(i)-Mn+c;return{x:Math.cos(u)*l+this.xCenter,y:Math.sin(u)*l+this.yCenter,angle:u}}getPointPositionForValue(i,l){return this.getPointPosition(i,this.getDistanceFromCenterForValue(l))}getBasePosition(i){return this.getPointPositionForValue(i||0,this.getBaseValue())}getPointLabelPosition(i){const{left:l,top:c,right:u,bottom:p}=this._pointLabelItems[i];return{left:l,top:c,right:u,bottom:p}}drawBackground(){const{backgroundColor:i,grid:{circular:l}}=this.options;if(i){const c=this.ctx;c.save(),c.beginPath(),Db(this,this.getDistanceFromCenterForValue(this._endValue),l,this._pointLabels.length),c.closePath(),c.fillStyle=i,c.fill(),c.restore()}}drawGrid(){const i=this.ctx,l=this.options,{angleLines:c,grid:u,border:p}=l,f=this._pointLabels.length;let s,S,M;if(l.pointLabels.display&&OM(this,f),u.display&&this.ticks.forEach((D,j)=>{if(j!==0||j===0&&this.min<0){S=this.getDistanceFromCenterForValue(D.value);const V=this.getContext(j),X=u.setContext(V),re=p.setContext(V);jM(this,X,S,f,re)}}),c.display){for(i.save(),s=f-1;s>=0;s--){const D=c.setContext(this.getPointLabelContext(s)),{color:j,lineWidth:V}=D;!V||!j||(i.lineWidth=V,i.strokeStyle=j,i.setLineDash(D.borderDash),i.lineDashOffset=D.borderDashOffset,S=this.getDistanceFromCenterForValue(l.reverse?this.min:this.max),M=this.getPointPosition(s,S),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(M.x,M.y),i.stroke())}i.restore()}}drawBorder(){}drawLabels(){const i=this.ctx,l=this.options,c=l.ticks;if(!c.display)return;const u=this.getIndexAngle(0);let p,f;i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(u),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((s,S)=>{if(S===0&&this.min>=0&&!l.reverse)return;const M=c.setContext(this.getContext(S)),D=Hn(M.font);if(p=this.getDistanceFromCenterForValue(this.ticks[S].value),M.showLabelBackdrop){i.font=D.string,f=i.measureText(s.label).width,i.fillStyle=M.backdropColor;const j=Pa(M.backdropPadding);i.fillRect(-f/2-j.left,-p-D.size/2-j.top,f+j.width,D.size+j.height)}yu(i,s.label,0,-p,D,{color:M.color,strokeColor:M.textStrokeColor,strokeWidth:M.textStrokeWidth})}),i.restore()}drawTitle(){}}const Uf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},er=Object.keys(Uf);function mx(r,i){return r-i}function gx(r,i){if(ai(i))return null;const l=r._adapter,{parser:c,round:u,isoWeekday:p}=r._parseOpts;let f=i;return typeof c=="function"&&(f=c(f)),vn(f)||(f=typeof c=="string"?l.parse(f,c):l.parse(f)),f===null?null:(u&&(f=u==="week"&&(Th(p)||p===!0)?l.startOf(f,"isoWeek",p):l.startOf(f,u)),+f)}function _x(r,i,l,c){const u=er.length;for(let p=er.indexOf(r);p<u-1;++p){const f=Uf[er[p]],s=f.steps?f.steps:Number.MAX_SAFE_INTEGER;if(f.common&&Math.ceil((l-i)/(s*f.size))<=c)return er[p]}return er[u-1]}function VM(r,i,l,c,u){for(let p=er.length-1;p>=er.indexOf(l);p--){const f=er[p];if(Uf[f].common&&r._adapter.diff(u,c,f)>=i-1)return f}return er[l?er.indexOf(l):0]}function NM(r){for(let i=er.indexOf(r)+1,l=er.length;i<l;++i)if(Uf[er[i]].common)return er[i]}function yx(r,i,l){if(!l)r[i]=!0;else if(l.length){const{lo:c,hi:u}=tg(l,i),p=l[c]>=i?l[c]:l[u];r[p]=!0}}function UM(r,i,l,c){const u=r._adapter,p=+u.startOf(i[0].value,c),f=i[i.length-1].value;let s,S;for(s=p;s<=f;s=+u.add(s,1,c))S=l[s],S>=0&&(i[S].major=!0);return i}function vx(r,i,l){const c=[],u={},p=i.length;let f,s;for(f=0;f<p;++f)s=i[f],u[s]=f,c.push({value:s,major:!1});return p===0||!l?c:UM(r,c,u,l)}class Im extends xu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(i){super(i),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(i,l={}){const c=i.time||(i.time={}),u=this._adapter=new GT._date(i.adapters.date);u.init(l),Nd(c.displayFormats,u.formats()),this._parseOpts={parser:c.parser,round:c.round,isoWeekday:c.isoWeekday},super.init(i),this._normalized=l.normalized}parse(i,l){return i===void 0?null:gx(this,i)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const i=this.options,l=this._adapter,c=i.time.unit||"day";let{min:u,max:p,minDefined:f,maxDefined:s}=this.getUserBounds();function S(M){!f&&!isNaN(M.min)&&(u=Math.min(u,M.min)),!s&&!isNaN(M.max)&&(p=Math.max(p,M.max))}(!f||!s)&&(S(this._getLabelBounds()),(i.bounds!=="ticks"||i.ticks.source!=="labels")&&S(this.getMinMax(!1))),u=vn(u)&&!isNaN(u)?u:+l.startOf(Date.now(),c),p=vn(p)&&!isNaN(p)?p:+l.endOf(Date.now(),c)+1,this.min=Math.min(u,p-1),this.max=Math.max(u+1,p)}_getLabelBounds(){const i=this.getLabelTimestamps();let l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return i.length&&(l=i[0],c=i[i.length-1]),{min:l,max:c}}buildTicks(){const i=this.options,l=i.time,c=i.ticks,u=c.source==="labels"?this.getLabelTimestamps():this._generate();i.bounds==="ticks"&&u.length&&(this.min=this._userMin||u[0],this.max=this._userMax||u[u.length-1]);const p=this.min,f=this.max,s=lS(u,p,f);return this._unit=l.unit||(c.autoSkip?_x(l.minUnit,this.min,this.max,this._getLabelCapacity(p)):VM(this,s.length,l.minUnit,this.min,this.max)),this._majorUnit=!c.major.enabled||this._unit==="year"?void 0:NM(this._unit),this.initOffsets(u),i.reverse&&s.reverse(),vx(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(i=>+i.value))}initOffsets(i=[]){let l=0,c=0,u,p;this.options.offset&&i.length&&(u=this.getDecimalForValue(i[0]),i.length===1?l=1-u:l=(this.getDecimalForValue(i[1])-u)/2,p=this.getDecimalForValue(i[i.length-1]),i.length===1?c=p:c=(p-this.getDecimalForValue(i[i.length-2]))/2);const f=i.length<3?.5:.25;l=sa(l,0,f),c=sa(c,0,f),this._offsets={start:l,end:c,factor:1/(l+1+c)}}_generate(){const i=this._adapter,l=this.min,c=this.max,u=this.options,p=u.time,f=p.unit||_x(p.minUnit,l,c,this._getLabelCapacity(l)),s=Gt(u.ticks.stepSize,1),S=f==="week"?p.isoWeekday:!1,M=Th(S)||S===!0,D={};let j=l,V,X;if(M&&(j=+i.startOf(j,"isoWeek",S)),j=+i.startOf(j,M?"day":f),i.diff(c,l,f)>1e5*s)throw new Error(l+" and "+c+" are too far apart with stepSize of "+s+" "+f);const re=u.ticks.source==="data"&&this.getDataTimestamps();for(V=j,X=0;V<c;V=+i.add(V,s,f),X++)yx(D,V,re);return(V===c||u.bounds==="ticks"||X===1)&&yx(D,V,re),Object.keys(D).sort(mx).map(ae=>+ae)}getLabelForValue(i){const l=this._adapter,c=this.options.time;return c.tooltipFormat?l.format(i,c.tooltipFormat):l.format(i,c.displayFormats.datetime)}format(i,l){const u=this.options.time.displayFormats,p=this._unit,f=l||u[p];return this._adapter.format(i,f)}_tickFormatFunction(i,l,c,u){const p=this.options,f=p.ticks.callback;if(f)return Ki(f,[i,l,c],this);const s=p.time.displayFormats,S=this._unit,M=this._majorUnit,D=S&&s[S],j=M&&s[M],V=c[l],X=M&&j&&V&&V.major;return this._adapter.format(i,u||(X?j:D))}generateTickLabels(i){let l,c,u;for(l=0,c=i.length;l<c;++l)u=i[l],u.label=this._tickFormatFunction(u.value,l,i)}getDecimalForValue(i){return i===null?NaN:(i-this.min)/(this.max-this.min)}getPixelForValue(i){const l=this._offsets,c=this.getDecimalForValue(i);return this.getPixelForDecimal((l.start+c)*l.factor)}getValueForPixel(i){const l=this._offsets,c=this.getDecimalForPixel(i)/l.factor-l.end;return this.min+c*(this.max-this.min)}_getLabelSize(i){const l=this.options.ticks,c=this.ctx.measureText(i).width,u=cs(this.isHorizontal()?l.maxRotation:l.minRotation),p=Math.cos(u),f=Math.sin(u),s=this._resolveTickFontOptions(0).size;return{w:c*p+s*f,h:c*f+s*p}}_getLabelCapacity(i){const l=this.options.time,c=l.displayFormats,u=c[l.unit]||c.millisecond,p=this._tickFormatFunction(i,0,vx(this,[i],this._majorUnit),u),f=this._getLabelSize(p),s=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return s>0?s:1}getDataTimestamps(){let i=this._cache.data||[],l,c;if(i.length)return i;const u=this.getMatchingVisibleMetas();if(this._normalized&&u.length)return this._cache.data=u[0].controller.getAllParsedValues(this);for(l=0,c=u.length;l<c;++l)i=i.concat(u[l].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const i=this._cache.labels||[];let l,c;if(i.length)return i;const u=this.getLabels();for(l=0,c=u.length;l<c;++l)i.push(gx(this,u[l]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(i){return Gx(i.sort(mx))}}function ff(r,i,l){let c=0,u=r.length-1,p,f,s,S;l?(i>=r[c].pos&&i<=r[u].pos&&({lo:c,hi:u}=Io(r,"pos",i)),{pos:p,time:s}=r[c],{pos:f,time:S}=r[u]):(i>=r[c].time&&i<=r[u].time&&({lo:c,hi:u}=Io(r,"time",i)),{time:p,pos:s}=r[c],{time:f,pos:S}=r[u]);const M=f-p;return M?s+(S-s)*(i-p)/M:s}class GM extends Im{static id="timeseries";static defaults=Im.defaults;constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const i=this._getTimestampsForTable(),l=this._table=this.buildLookupTable(i);this._minPos=ff(l,this.min),this._tableRange=ff(l,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){const{min:l,max:c}=this,u=[],p=[];let f,s,S,M,D;for(f=0,s=i.length;f<s;++f)M=i[f],M>=l&&M<=c&&u.push(M);if(u.length<2)return[{time:l,pos:0},{time:c,pos:1}];for(f=0,s=u.length;f<s;++f)D=u[f+1],S=u[f-1],M=u[f],Math.round((D+S)/2)!==M&&p.push({time:M,pos:f/(s-1)});return p}_generate(){const i=this.min,l=this.max;let c=super.getDataTimestamps();return(!c.includes(i)||!c.length)&&c.splice(0,0,i),(!c.includes(l)||c.length===1)&&c.push(l),c.sort((u,p)=>u-p)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;const l=this.getDataTimestamps(),c=this.getLabelTimestamps();return l.length&&c.length?i=this.normalize(l.concat(c)):i=l.length?l:c,i=this._cache.all=i,i}getDecimalForValue(i){return(ff(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){const l=this._offsets,c=this.getDecimalForPixel(i)/l.factor-l.end;return ff(this._table,c*this._tableRange+this._minPos,!0)}}var qM=Object.freeze({__proto__:null,CategoryScale:bM,LinearScale:kM,LogarithmicScale:PM,RadialLinearScale:$M,TimeScale:Im,TimeSeriesScale:GM});const ZM=[UT,wP,_M,qM];cg.register(...ZM);var Dm=!1,zm=!1,fu=[],Rm=-1;function WM(r){HM(r)}function HM(r){fu.includes(r)||fu.push(r),YM()}function KM(r){let i=fu.indexOf(r);i!==-1&&i>Rm&&fu.splice(i,1)}function YM(){!zm&&!Dm&&(Dm=!0,queueMicrotask(XM))}function XM(){Dm=!1,zm=!0;for(let r=0;r<fu.length;r++)fu[r](),Rm=r;fu.length=0,Rm=-1,zm=!1}var Eh,bu,Ah,zb,Fm=!0;function JM(r){Fm=!1,r(),Fm=!0}function QM(r){Eh=r.reactive,Ah=r.release,bu=i=>r.effect(i,{scheduler:l=>{Fm?WM(l):l()}}),zb=r.raw}function xx(r){bu=r}function eC(r){let i=()=>{};return[c=>{let u=bu(c);return r._x_effects||(r._x_effects=new Set,r._x_runEffects=()=>{r._x_effects.forEach(p=>p())}),r._x_effects.add(u),i=()=>{u!==void 0&&(r._x_effects.delete(u),Ah(u))},u},()=>{i()}]}function Rb(r,i){let l=!0,c,u=bu(()=>{let p=r();JSON.stringify(p),l?c=p:queueMicrotask(()=>{i(p,c),c=p}),l=!1});return()=>Ah(u)}var Fb=[],Ob=[],jb=[];function tC(r){jb.push(r)}function pg(r,i){typeof i=="function"?(r._x_cleanups||(r._x_cleanups=[]),r._x_cleanups.push(i)):(i=r,Ob.push(i))}function Bb(r){Fb.push(r)}function $b(r,i,l){r._x_attributeCleanups||(r._x_attributeCleanups={}),r._x_attributeCleanups[i]||(r._x_attributeCleanups[i]=[]),r._x_attributeCleanups[i].push(l)}function Vb(r,i){r._x_attributeCleanups&&Object.entries(r._x_attributeCleanups).forEach(([l,c])=>{(i===void 0||i.includes(l))&&(c.forEach(u=>u()),delete r._x_attributeCleanups[l])})}function iC(r){for(r._x_effects?.forEach(KM);r._x_cleanups?.length;)r._x_cleanups.pop()()}var mg=new MutationObserver(vg),gg=!1;function _g(){mg.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),gg=!0}function Nb(){nC(),mg.disconnect(),gg=!1}var Dd=[];function nC(){let r=mg.takeRecords();Dd.push(()=>r.length>0&&vg(r));let i=Dd.length;queueMicrotask(()=>{if(Dd.length===i)for(;Dd.length>0;)Dd.shift()()})}function mn(r){if(!gg)return r();Nb();let i=r();return _g(),i}var yg=!1,If=[];function aC(){yg=!0}function rC(){yg=!1,vg(If),If=[]}function vg(r){if(yg){If=If.concat(r);return}let i=[],l=new Set,c=new Map,u=new Map;for(let p=0;p<r.length;p++)if(!r[p].target._x_ignoreMutationObserver&&(r[p].type==="childList"&&(r[p].removedNodes.forEach(f=>{f.nodeType===1&&f._x_marker&&l.add(f)}),r[p].addedNodes.forEach(f=>{if(f.nodeType===1){if(l.has(f)){l.delete(f);return}f._x_marker||i.push(f)}})),r[p].type==="attributes")){let f=r[p].target,s=r[p].attributeName,S=r[p].oldValue,M=()=>{c.has(f)||c.set(f,[]),c.get(f).push({name:s,value:f.getAttribute(s)})},D=()=>{u.has(f)||u.set(f,[]),u.get(f).push(s)};f.hasAttribute(s)&&S===null?M():f.hasAttribute(s)?(D(),M()):D()}u.forEach((p,f)=>{Vb(f,p)}),c.forEach((p,f)=>{Fb.forEach(s=>s(f,p))});for(let p of l)i.some(f=>f.contains(p))||Ob.forEach(f=>f(p));for(let p of i)p.isConnected&&jb.forEach(f=>f(p));i=null,l=null,c=null,u=null}function Ub(r){return rc(Ch(r))}function ac(r,i,l){return r._x_dataStack=[i,...Ch(l||r)],()=>{r._x_dataStack=r._x_dataStack.filter(c=>c!==i)}}function Ch(r){return r._x_dataStack?r._x_dataStack:typeof ShadowRoot=="function"&&r instanceof ShadowRoot?Ch(r.host):r.parentNode?Ch(r.parentNode):[]}function rc(r){return new Proxy({objects:r},sC)}var sC={ownKeys({objects:r}){return Array.from(new Set(r.flatMap(i=>Object.keys(i))))},has({objects:r},i){return i==Symbol.unscopables?!1:r.some(l=>Object.prototype.hasOwnProperty.call(l,i)||Reflect.has(l,i))},get({objects:r},i,l){return i=="toJSON"?oC:Reflect.get(r.find(c=>Reflect.has(c,i))||{},i,l)},set({objects:r},i,l,c){const u=r.find(f=>Object.prototype.hasOwnProperty.call(f,i))||r[r.length-1],p=Object.getOwnPropertyDescriptor(u,i);return p?.set&&p?.get?p.set.call(c,l)||!0:Reflect.set(u,i,l)}};function oC(){return Reflect.ownKeys(this).reduce((i,l)=>(i[l]=Reflect.get(this,l),i),{})}function Gb(r){let i=c=>typeof c=="object"&&!Array.isArray(c)&&c!==null,l=(c,u="")=>{Object.entries(Object.getOwnPropertyDescriptors(c)).forEach(([p,{value:f,enumerable:s}])=>{if(s===!1||f===void 0||typeof f=="object"&&f!==null&&f.__v_skip)return;let S=u===""?p:`${u}.${p}`;typeof f=="object"&&f!==null&&f._x_interceptor?c[p]=f.initialize(r,S,p):i(f)&&f!==c&&!(f instanceof Element)&&l(f,S)})};return l(r)}function qb(r,i=()=>{}){let l={initialValue:void 0,_x_interceptor:!0,initialize(c,u,p){return r(this.initialValue,()=>lC(c,u),f=>Om(c,u,f),u,p)}};return i(l),c=>{if(typeof c=="object"&&c!==null&&c._x_interceptor){let u=l.initialize.bind(l);l.initialize=(p,f,s)=>{let S=c.initialize(p,f,s);return l.initialValue=S,u(p,f,s)}}else l.initialValue=c;return l}}function lC(r,i){return i.split(".").reduce((l,c)=>l[c],r)}function Om(r,i,l){if(typeof i=="string"&&(i=i.split(".")),i.length===1)r[i[0]]=l;else{if(i.length===0)throw error;return r[i[0]]||(r[i[0]]={}),Om(r[i[0]],i.slice(1),l)}}var Zb={};function ps(r,i){Zb[r]=i}function jm(r,i){let l=uC(i);return Object.entries(Zb).forEach(([c,u])=>{Object.defineProperty(r,`$${c}`,{get(){return u(i,l)},enumerable:!1})}),r}function uC(r){let[i,l]=Qb(r),c={interceptor:qb,...i};return pg(r,l),c}function hC(r,i,l,...c){try{return l(...c)}catch(u){tc(u,r,i)}}function tc(...r){return Wb(...r)}var Wb=cC;function dC(r){Wb=r}function cC(r,i,l=void 0){r=Object.assign(r??{message:"No error message given."},{el:i,expression:l}),console.warn(`Alpine Expression Error: ${r.message}

${l?'Expression: "'+l+`"

`:""}`,i),setTimeout(()=>{throw r},0)}var wf=!0;function Hb(r){let i=wf;wf=!1;let l=r();return wf=i,l}function pu(r,i,l={}){let c;return ja(r,i)(u=>c=u,l),c}function ja(...r){return Kb(...r)}var Kb=Yb;function fC(r){Kb=r}function Yb(r,i){let l={};jm(l,r);let c=[l,...Ch(r)],u=typeof i=="function"?pC(c,i):gC(c,i,r);return hC.bind(null,r,i,u)}function pC(r,i){return(l=()=>{},{scope:c={},params:u=[],context:p}={})=>{let f=i.apply(rc([c,...r]),u);Df(l,f)}}var _m={};function mC(r,i){if(_m[r])return _m[r];let l=Object.getPrototypeOf(async function(){}).constructor,c=/^[\n\s]*if.*\(.*\)/.test(r.trim())||/^(let|const)\s/.test(r.trim())?`(async()=>{ ${r} })()`:r,p=(()=>{try{let f=new l(["__self","scope"],`with (scope) { __self.result = ${c} }; __self.finished = true; return __self.result;`);return Object.defineProperty(f,"name",{value:`[Alpine] ${r}`}),f}catch(f){return tc(f,i,r),Promise.resolve()}})();return _m[r]=p,p}function gC(r,i,l){let c=mC(i,l);return(u=()=>{},{scope:p={},params:f=[],context:s}={})=>{c.result=void 0,c.finished=!1;let S=rc([p,...r]);if(typeof c=="function"){let M=c.call(s,c,S).catch(D=>tc(D,l,i));c.finished?(Df(u,c.result,S,f,l),c.result=void 0):M.then(D=>{Df(u,D,S,f,l)}).catch(D=>tc(D,l,i)).finally(()=>c.result=void 0)}}}function Df(r,i,l,c,u){if(wf&&typeof i=="function"){let p=i.apply(l,c);p instanceof Promise?p.then(f=>Df(r,f,l,c)).catch(f=>tc(f,u,i)):r(p)}else typeof i=="object"&&i instanceof Promise?i.then(p=>r(p)):r(i)}var xg="x-";function Ih(r=""){return xg+r}function _C(r){xg=r}var zf={};function $n(r,i){return zf[r]=i,{before(l){if(!zf[l]){console.warn(String.raw`Cannot find directive \`${l}\`. \`${r}\` will use the default order of execution`);return}const c=hu.indexOf(l);hu.splice(c>=0?c:hu.indexOf("DEFAULT"),0,r)}}}function yC(r){return Object.keys(zf).includes(r)}function bg(r,i,l){if(i=Array.from(i),r._x_virtualDirectives){let p=Object.entries(r._x_virtualDirectives).map(([s,S])=>({name:s,value:S})),f=Xb(p);p=p.map(s=>f.find(S=>S.name===s.name)?{name:`x-bind:${s.name}`,value:`"${s.value}"`}:s),i=i.concat(p)}let c={};return i.map(iw((p,f)=>c[p]=f)).filter(aw).map(bC(c,l)).sort(wC).map(p=>xC(r,p))}function Xb(r){return Array.from(r).map(iw()).filter(i=>!aw(i))}var Bm=!1,Vd=new Map,Jb=Symbol();function vC(r){Bm=!0;let i=Symbol();Jb=i,Vd.set(i,[]);let l=()=>{for(;Vd.get(i).length;)Vd.get(i).shift()();Vd.delete(i)},c=()=>{Bm=!1,l()};r(l),c()}function Qb(r){let i=[],l=s=>i.push(s),[c,u]=eC(r);return i.push(u),[{Alpine:sc,effect:c,cleanup:l,evaluateLater:ja.bind(ja,r),evaluate:pu.bind(pu,r)},()=>i.forEach(s=>s())]}function xC(r,i){let l=()=>{},c=zf[i.type]||l,[u,p]=Qb(r);$b(r,i.original,p);let f=()=>{r._x_ignore||r._x_ignoreSelf||(c.inline&&c.inline(r,i,u),c=c.bind(c,r,i,u),Bm?Vd.get(Jb).push(c):c())};return f.runCleanups=p,f}var ew=(r,i)=>({name:l,value:c})=>(l.startsWith(r)&&(l=l.replace(r,i)),{name:l,value:c}),tw=r=>r;function iw(r=()=>{}){return({name:i,value:l})=>{let{name:c,value:u}=nw.reduce((p,f)=>f(p),{name:i,value:l});return c!==i&&r(c,i),{name:c,value:u}}}var nw=[];function wg(r){nw.push(r)}function aw({name:r}){return rw().test(r)}var rw=()=>new RegExp(`^${xg}([^:^.]+)\\b`);function bC(r,i){return({name:l,value:c})=>{let u=l.match(rw()),p=l.match(/:([a-zA-Z0-9\-_:]+)/),f=l.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],s=i||r[l]||l;return{type:u?u[1]:null,value:p?p[1]:null,modifiers:f.map(S=>S.replace(".","")),expression:c,original:s}}}var $m="DEFAULT",hu=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",$m,"teleport"];function wC(r,i){let l=hu.indexOf(r.type)===-1?$m:r.type,c=hu.indexOf(i.type)===-1?$m:i.type;return hu.indexOf(l)-hu.indexOf(c)}function Zd(r,i,l={}){r.dispatchEvent(new CustomEvent(i,{detail:l,bubbles:!0,composed:!0,cancelable:!0}))}function vu(r,i){if(typeof ShadowRoot=="function"&&r instanceof ShadowRoot){Array.from(r.children).forEach(u=>vu(u,i));return}let l=!1;if(i(r,()=>l=!0),l)return;let c=r.firstElementChild;for(;c;)vu(c,i),c=c.nextElementSibling}function $r(r,...i){console.warn(`Alpine Warning: ${r}`,...i)}var bx=!1;function kC(){bx&&$r("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),bx=!0,document.body||$r("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Zd(document,"alpine:init"),Zd(document,"alpine:initializing"),_g(),tC(i=>zo(i,vu)),pg(i=>zh(i)),Bb((i,l)=>{bg(i,l).forEach(c=>c())});let r=i=>!Gf(i.parentElement,!0);Array.from(document.querySelectorAll(lw().join(","))).filter(r).forEach(i=>{zo(i)}),Zd(document,"alpine:initialized"),setTimeout(()=>{MC()})}var kg=[],sw=[];function ow(){return kg.map(r=>r())}function lw(){return kg.concat(sw).map(r=>r())}function uw(r){kg.push(r)}function hw(r){sw.push(r)}function Gf(r,i=!1){return Dh(r,l=>{if((i?lw():ow()).some(u=>l.matches(u)))return!0})}function Dh(r,i){if(r){if(i(r))return r;if(r._x_teleportBack&&(r=r._x_teleportBack),!!r.parentElement)return Dh(r.parentElement,i)}}function SC(r){return ow().some(i=>r.matches(i))}var dw=[];function TC(r){dw.push(r)}var PC=1;function zo(r,i=vu,l=()=>{}){Dh(r,c=>c._x_ignore)||vC(()=>{i(r,(c,u)=>{c._x_marker||(l(c,u),dw.forEach(p=>p(c,u)),bg(c,c.attributes).forEach(p=>p()),c._x_ignore||(c._x_marker=PC++),c._x_ignore&&u())})})}function zh(r,i=vu){i(r,l=>{iC(l),Vb(l),delete l._x_marker})}function MC(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([i,l,c])=>{yC(l)||c.some(u=>{if(document.querySelector(u))return $r(`found "${u}", but missing ${i} plugin`),!0})})}var Vm=[],Sg=!1;function Tg(r=()=>{}){return queueMicrotask(()=>{Sg||setTimeout(()=>{Nm()})}),new Promise(i=>{Vm.push(()=>{r(),i()})})}function Nm(){for(Sg=!1;Vm.length;)Vm.shift()()}function CC(){Sg=!0}function Pg(r,i){return Array.isArray(i)?wx(r,i.join(" ")):typeof i=="object"&&i!==null?LC(r,i):typeof i=="function"?Pg(r,i()):wx(r,i)}function wx(r,i){let l=u=>u.split(" ").filter(p=>!r.classList.contains(p)).filter(Boolean),c=u=>(r.classList.add(...u),()=>{r.classList.remove(...u)});return i=i===!0?i="":i||"",c(l(i))}function LC(r,i){let l=s=>s.split(" ").filter(Boolean),c=Object.entries(i).flatMap(([s,S])=>S?l(s):!1).filter(Boolean),u=Object.entries(i).flatMap(([s,S])=>S?!1:l(s)).filter(Boolean),p=[],f=[];return u.forEach(s=>{r.classList.contains(s)&&(r.classList.remove(s),f.push(s))}),c.forEach(s=>{r.classList.contains(s)||(r.classList.add(s),p.push(s))}),()=>{f.forEach(s=>r.classList.add(s)),p.forEach(s=>r.classList.remove(s))}}function qf(r,i){return typeof i=="object"&&i!==null?EC(r,i):AC(r,i)}function EC(r,i){let l={};return Object.entries(i).forEach(([c,u])=>{l[c]=r.style[c],c.startsWith("--")||(c=IC(c)),r.style.setProperty(c,u)}),setTimeout(()=>{r.style.length===0&&r.removeAttribute("style")}),()=>{qf(r,l)}}function AC(r,i){let l=r.getAttribute("style",i);return r.setAttribute("style",i),()=>{r.setAttribute("style",l||"")}}function IC(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Um(r,i=()=>{}){let l=!1;return function(){l?i.apply(this,arguments):(l=!0,r.apply(this,arguments))}}$n("transition",(r,{value:i,modifiers:l,expression:c},{evaluate:u})=>{typeof c=="function"&&(c=u(c)),c!==!1&&(!c||typeof c=="boolean"?zC(r,l,i):DC(r,c,i))});function DC(r,i,l){cw(r,Pg,""),{enter:u=>{r._x_transition.enter.during=u},"enter-start":u=>{r._x_transition.enter.start=u},"enter-end":u=>{r._x_transition.enter.end=u},leave:u=>{r._x_transition.leave.during=u},"leave-start":u=>{r._x_transition.leave.start=u},"leave-end":u=>{r._x_transition.leave.end=u}}[l](i)}function zC(r,i,l){cw(r,qf);let c=!i.includes("in")&&!i.includes("out")&&!l,u=c||i.includes("in")||["enter"].includes(l),p=c||i.includes("out")||["leave"].includes(l);i.includes("in")&&!c&&(i=i.filter((Se,xe)=>xe<i.indexOf("out"))),i.includes("out")&&!c&&(i=i.filter((Se,xe)=>xe>i.indexOf("out")));let f=!i.includes("opacity")&&!i.includes("scale"),s=f||i.includes("opacity"),S=f||i.includes("scale"),M=s?0:1,D=S?zd(i,"scale",95)/100:1,j=zd(i,"delay",0)/1e3,V=zd(i,"origin","center"),X="opacity, transform",re=zd(i,"duration",150)/1e3,ae=zd(i,"duration",75)/1e3,H="cubic-bezier(0.4, 0.0, 0.2, 1)";u&&(r._x_transition.enter.during={transformOrigin:V,transitionDelay:`${j}s`,transitionProperty:X,transitionDuration:`${re}s`,transitionTimingFunction:H},r._x_transition.enter.start={opacity:M,transform:`scale(${D})`},r._x_transition.enter.end={opacity:1,transform:"scale(1)"}),p&&(r._x_transition.leave.during={transformOrigin:V,transitionDelay:`${j}s`,transitionProperty:X,transitionDuration:`${ae}s`,transitionTimingFunction:H},r._x_transition.leave.start={opacity:1,transform:"scale(1)"},r._x_transition.leave.end={opacity:M,transform:`scale(${D})`})}function cw(r,i,l={}){r._x_transition||(r._x_transition={enter:{during:l,start:l,end:l},leave:{during:l,start:l,end:l},in(c=()=>{},u=()=>{}){Gm(r,i,{during:this.enter.during,start:this.enter.start,end:this.enter.end},c,u)},out(c=()=>{},u=()=>{}){Gm(r,i,{during:this.leave.during,start:this.leave.start,end:this.leave.end},c,u)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(r,i,l,c){const u=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let p=()=>u(l);if(i){r._x_transition&&(r._x_transition.enter||r._x_transition.leave)?r._x_transition.enter&&(Object.entries(r._x_transition.enter.during).length||Object.entries(r._x_transition.enter.start).length||Object.entries(r._x_transition.enter.end).length)?r._x_transition.in(l):p():r._x_transition?r._x_transition.in(l):p();return}r._x_hidePromise=r._x_transition?new Promise((f,s)=>{r._x_transition.out(()=>{},()=>f(c)),r._x_transitioning&&r._x_transitioning.beforeCancel(()=>s({isFromCancelledTransition:!0}))}):Promise.resolve(c),queueMicrotask(()=>{let f=fw(r);f?(f._x_hideChildren||(f._x_hideChildren=[]),f._x_hideChildren.push(r)):u(()=>{let s=S=>{let M=Promise.all([S._x_hidePromise,...(S._x_hideChildren||[]).map(s)]).then(([D])=>D?.());return delete S._x_hidePromise,delete S._x_hideChildren,M};s(r).catch(S=>{if(!S.isFromCancelledTransition)throw S})})})};function fw(r){let i=r.parentNode;if(i)return i._x_hidePromise?i:fw(i)}function Gm(r,i,{during:l,start:c,end:u}={},p=()=>{},f=()=>{}){if(r._x_transitioning&&r._x_transitioning.cancel(),Object.keys(l).length===0&&Object.keys(c).length===0&&Object.keys(u).length===0){p(),f();return}let s,S,M;RC(r,{start(){s=i(r,c)},during(){S=i(r,l)},before:p,end(){s(),M=i(r,u)},after:f,cleanup(){S(),M()}})}function RC(r,i){let l,c,u,p=Um(()=>{mn(()=>{l=!0,c||i.before(),u||(i.end(),Nm()),i.after(),r.isConnected&&i.cleanup(),delete r._x_transitioning})});r._x_transitioning={beforeCancels:[],beforeCancel(f){this.beforeCancels.push(f)},cancel:Um(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();p()}),finish:p},mn(()=>{i.start(),i.during()}),CC(),requestAnimationFrame(()=>{if(l)return;let f=Number(getComputedStyle(r).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,s=Number(getComputedStyle(r).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;f===0&&(f=Number(getComputedStyle(r).animationDuration.replace("s",""))*1e3),mn(()=>{i.before()}),c=!0,requestAnimationFrame(()=>{l||(mn(()=>{i.end()}),Nm(),setTimeout(r._x_transitioning.finish,f+s),u=!0)})})}function zd(r,i,l){if(r.indexOf(i)===-1)return l;const c=r[r.indexOf(i)+1];if(!c||i==="scale"&&isNaN(c))return l;if(i==="duration"||i==="delay"){let u=c.match(/([0-9]+)ms/);if(u)return u[1]}return i==="origin"&&["top","right","left","center","bottom"].includes(r[r.indexOf(i)+2])?[c,r[r.indexOf(i)+2]].join(" "):c}var vl=!1;function kl(r,i=()=>{}){return(...l)=>vl?i(...l):r(...l)}function FC(r){return(...i)=>vl&&r(...i)}var pw=[];function Zf(r){pw.push(r)}function OC(r,i){pw.forEach(l=>l(r,i)),vl=!0,mw(()=>{zo(i,(l,c)=>{c(l,()=>{})})}),vl=!1}var qm=!1;function jC(r,i){i._x_dataStack||(i._x_dataStack=r._x_dataStack),vl=!0,qm=!0,mw(()=>{BC(i)}),vl=!1,qm=!1}function BC(r){let i=!1;zo(r,(c,u)=>{vu(c,(p,f)=>{if(i&&SC(p))return f();i=!0,u(p,f)})})}function mw(r){let i=bu;xx((l,c)=>{let u=i(l);return Ah(u),()=>{}}),r(),xx(i)}function gw(r,i,l,c=[]){switch(r._x_bindings||(r._x_bindings=Eh({})),r._x_bindings[i]=l,i=c.includes("camel")?WC(i):i,i){case"value":$C(r,l);break;case"style":NC(r,l);break;case"class":VC(r,l);break;case"selected":case"checked":UC(r,i,l);break;default:_w(r,i,l);break}}function $C(r,i){if(xw(r))r.attributes.value===void 0&&(r.value=i),window.fromModel&&(typeof i=="boolean"?r.checked=kf(r.value)===i:r.checked=kx(r.value,i));else if(Mg(r))Number.isInteger(i)?r.value=i:!Array.isArray(i)&&typeof i!="boolean"&&![null,void 0].includes(i)?r.value=String(i):Array.isArray(i)?r.checked=i.some(l=>kx(l,r.value)):r.checked=!!i;else if(r.tagName==="SELECT")ZC(r,i);else{if(r.value===i)return;r.value=i===void 0?"":i}}function VC(r,i){r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedClasses=Pg(r,i)}function NC(r,i){r._x_undoAddedStyles&&r._x_undoAddedStyles(),r._x_undoAddedStyles=qf(r,i)}function UC(r,i,l){_w(r,i,l),qC(r,i,l)}function _w(r,i,l){[null,void 0,!1].includes(l)&&KC(i)?r.removeAttribute(i):(yw(i)&&(l=i),GC(r,i,l))}function GC(r,i,l){r.getAttribute(i)!=l&&r.setAttribute(i,l)}function qC(r,i,l){r[i]!==l&&(r[i]=l)}function ZC(r,i){const l=[].concat(i).map(c=>c+"");Array.from(r.options).forEach(c=>{c.selected=l.includes(c.value)})}function WC(r){return r.toLowerCase().replace(/-(\w)/g,(i,l)=>l.toUpperCase())}function kx(r,i){return r==i}function kf(r){return[1,"1","true","on","yes",!0].includes(r)?!0:[0,"0","false","off","no",!1].includes(r)?!1:r?!!r:null}var HC=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function yw(r){return HC.has(r)}function KC(r){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(r)}function YC(r,i,l){return r._x_bindings&&r._x_bindings[i]!==void 0?r._x_bindings[i]:vw(r,i,l)}function XC(r,i,l,c=!0){if(r._x_bindings&&r._x_bindings[i]!==void 0)return r._x_bindings[i];if(r._x_inlineBindings&&r._x_inlineBindings[i]!==void 0){let u=r._x_inlineBindings[i];return u.extract=c,Hb(()=>pu(r,u.expression))}return vw(r,i,l)}function vw(r,i,l){let c=r.getAttribute(i);return c===null?typeof l=="function"?l():l:c===""?!0:yw(i)?!![i,"true"].includes(c):c}function Mg(r){return r.type==="checkbox"||r.localName==="ui-checkbox"||r.localName==="ui-switch"}function xw(r){return r.type==="radio"||r.localName==="ui-radio"}function bw(r,i){let l;return function(){const c=this,u=arguments,p=function(){l=null,r.apply(c,u)};clearTimeout(l),l=setTimeout(p,i)}}function ww(r,i){let l;return function(){let c=this,u=arguments;l||(r.apply(c,u),l=!0,setTimeout(()=>l=!1,i))}}function kw({get:r,set:i},{get:l,set:c}){let u=!0,p,f=bu(()=>{let s=r(),S=l();if(u)c(ym(s)),u=!1;else{let M=JSON.stringify(s),D=JSON.stringify(S);M!==p?c(ym(s)):M!==D&&i(ym(S))}p=JSON.stringify(r()),JSON.stringify(l())});return()=>{Ah(f)}}function ym(r){return typeof r=="object"?JSON.parse(JSON.stringify(r)):r}function JC(r){(Array.isArray(r)?r:[r]).forEach(l=>l(sc))}var uu={},Sx=!1;function QC(r,i){if(Sx||(uu=Eh(uu),Sx=!0),i===void 0)return uu[r];uu[r]=i,Gb(uu[r]),typeof i=="object"&&i!==null&&i.hasOwnProperty("init")&&typeof i.init=="function"&&uu[r].init()}function eL(){return uu}var Sw={};function tL(r,i){let l=typeof i!="function"?()=>i:i;return r instanceof Element?Tw(r,l()):(Sw[r]=l,()=>{})}function iL(r){return Object.entries(Sw).forEach(([i,l])=>{Object.defineProperty(r,i,{get(){return(...c)=>l(...c)}})}),r}function Tw(r,i,l){let c=[];for(;c.length;)c.pop()();let u=Object.entries(i).map(([f,s])=>({name:f,value:s})),p=Xb(u);return u=u.map(f=>p.find(s=>s.name===f.name)?{name:`x-bind:${f.name}`,value:`"${f.value}"`}:f),bg(r,u,l).map(f=>{c.push(f.runCleanups),f()}),()=>{for(;c.length;)c.pop()()}}var Pw={};function nL(r,i){Pw[r]=i}function aL(r,i){return Object.entries(Pw).forEach(([l,c])=>{Object.defineProperty(r,l,{get(){return(...u)=>c.bind(i)(...u)},enumerable:!1})}),r}var rL={get reactive(){return Eh},get release(){return Ah},get effect(){return bu},get raw(){return zb},version:"3.15.2",flushAndStopDeferringMutations:rC,dontAutoEvaluateFunctions:Hb,disableEffectScheduling:JM,startObservingMutations:_g,stopObservingMutations:Nb,setReactivityEngine:QM,onAttributeRemoved:$b,onAttributesAdded:Bb,closestDataStack:Ch,skipDuringClone:kl,onlyDuringClone:FC,addRootSelector:uw,addInitSelector:hw,setErrorHandler:dC,interceptClone:Zf,addScopeToNode:ac,deferMutations:aC,mapAttributes:wg,evaluateLater:ja,interceptInit:TC,setEvaluator:fC,mergeProxies:rc,extractProp:XC,findClosest:Dh,onElRemoved:pg,closestRoot:Gf,destroyTree:zh,interceptor:qb,transition:Gm,setStyles:qf,mutateDom:mn,directive:$n,entangle:kw,throttle:ww,debounce:bw,evaluate:pu,initTree:zo,nextTick:Tg,prefixed:Ih,prefix:_C,plugin:JC,magic:ps,store:QC,start:kC,clone:jC,cloneNode:OC,bound:YC,$data:Ub,watch:Rb,walk:vu,data:nL,bind:tL},sc=rL;function sL(r,i){const l=Object.create(null),c=r.split(",");for(let u=0;u<c.length;u++)l[c[u]]=!0;return u=>!!l[u]}var oL=Object.freeze({}),lL=Object.prototype.hasOwnProperty,Wf=(r,i)=>lL.call(r,i),mu=Array.isArray,Wd=r=>Mw(r)==="[object Map]",uL=r=>typeof r=="string",Cg=r=>typeof r=="symbol",Hf=r=>r!==null&&typeof r=="object",hL=Object.prototype.toString,Mw=r=>hL.call(r),Cw=r=>Mw(r).slice(8,-1),Lg=r=>uL(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,dL=r=>{const i=Object.create(null);return l=>i[l]||(i[l]=r(l))},cL=dL(r=>r.charAt(0).toUpperCase()+r.slice(1)),Lw=(r,i)=>r!==i&&(r===r||i===i),Zm=new WeakMap,Rd=[],Ks,gu=Symbol("iterate"),Wm=Symbol("Map key iterate");function fL(r){return r&&r._isEffect===!0}function pL(r,i=oL){fL(r)&&(r=r.raw);const l=_L(r,i);return i.lazy||l(),l}function mL(r){r.active&&(Ew(r),r.options.onStop&&r.options.onStop(),r.active=!1)}var gL=0;function _L(r,i){const l=function(){if(!l.active)return r();if(!Rd.includes(l)){Ew(l);try{return vL(),Rd.push(l),Ks=l,r()}finally{Rd.pop(),Aw(),Ks=Rd[Rd.length-1]}}};return l.id=gL++,l.allowRecurse=!!i.allowRecurse,l._isEffect=!0,l.active=!0,l.raw=r,l.deps=[],l.options=i,l}function Ew(r){const{deps:i}=r;if(i.length){for(let l=0;l<i.length;l++)i[l].delete(r);i.length=0}}var Lh=!0,Eg=[];function yL(){Eg.push(Lh),Lh=!1}function vL(){Eg.push(Lh),Lh=!0}function Aw(){const r=Eg.pop();Lh=r===void 0?!0:r}function fs(r,i,l){if(!Lh||Ks===void 0)return;let c=Zm.get(r);c||Zm.set(r,c=new Map);let u=c.get(l);u||c.set(l,u=new Set),u.has(Ks)||(u.add(Ks),Ks.deps.push(u),Ks.options.onTrack&&Ks.options.onTrack({effect:Ks,target:r,type:i,key:l}))}function xl(r,i,l,c,u,p){const f=Zm.get(r);if(!f)return;const s=new Set,S=D=>{D&&D.forEach(j=>{(j!==Ks||j.allowRecurse)&&s.add(j)})};if(i==="clear")f.forEach(S);else if(l==="length"&&mu(r))f.forEach((D,j)=>{(j==="length"||j>=c)&&S(D)});else switch(l!==void 0&&S(f.get(l)),i){case"add":mu(r)?Lg(l)&&S(f.get("length")):(S(f.get(gu)),Wd(r)&&S(f.get(Wm)));break;case"delete":mu(r)||(S(f.get(gu)),Wd(r)&&S(f.get(Wm)));break;case"set":Wd(r)&&S(f.get(gu));break}const M=D=>{D.options.onTrigger&&D.options.onTrigger({effect:D,target:r,key:l,type:i,newValue:c,oldValue:u,oldTarget:p}),D.options.scheduler?D.options.scheduler(D):D()};s.forEach(M)}var xL=sL("__proto__,__v_isRef,__isVue"),Iw=new Set(Object.getOwnPropertyNames(Symbol).map(r=>Symbol[r]).filter(Cg)),bL=Dw(),wL=Dw(!0),Tx=kL();function kL(){const r={};return["includes","indexOf","lastIndexOf"].forEach(i=>{r[i]=function(...l){const c=an(this);for(let p=0,f=this.length;p<f;p++)fs(c,"get",p+"");const u=c[i](...l);return u===-1||u===!1?c[i](...l.map(an)):u}}),["push","pop","shift","unshift","splice"].forEach(i=>{r[i]=function(...l){yL();const c=an(this)[i].apply(this,l);return Aw(),c}}),r}function Dw(r=!1,i=!1){return function(c,u,p){if(u==="__v_isReactive")return!r;if(u==="__v_isReadonly")return r;if(u==="__v_raw"&&p===(r?i?OL:Ow:i?FL:Fw).get(c))return c;const f=mu(c);if(!r&&f&&Wf(Tx,u))return Reflect.get(Tx,u,p);const s=Reflect.get(c,u,p);return(Cg(u)?Iw.has(u):xL(u))||(r||fs(c,"get",u),i)?s:Hm(s)?!f||!Lg(u)?s.value:s:Hf(s)?r?jw(s):zg(s):s}}var SL=TL();function TL(r=!1){return function(l,c,u,p){let f=l[c];if(!r&&(u=an(u),f=an(f),!mu(l)&&Hm(f)&&!Hm(u)))return f.value=u,!0;const s=mu(l)&&Lg(c)?Number(c)<l.length:Wf(l,c),S=Reflect.set(l,c,u,p);return l===an(p)&&(s?Lw(u,f)&&xl(l,"set",c,u,f):xl(l,"add",c,u)),S}}function PL(r,i){const l=Wf(r,i),c=r[i],u=Reflect.deleteProperty(r,i);return u&&l&&xl(r,"delete",i,void 0,c),u}function ML(r,i){const l=Reflect.has(r,i);return(!Cg(i)||!Iw.has(i))&&fs(r,"has",i),l}function CL(r){return fs(r,"iterate",mu(r)?"length":gu),Reflect.ownKeys(r)}var LL={get:bL,set:SL,deleteProperty:PL,has:ML,ownKeys:CL},EL={get:wL,set(r,i){return console.warn(`Set operation on key "${String(i)}" failed: target is readonly.`,r),!0},deleteProperty(r,i){return console.warn(`Delete operation on key "${String(i)}" failed: target is readonly.`,r),!0}},Ag=r=>Hf(r)?zg(r):r,Ig=r=>Hf(r)?jw(r):r,Dg=r=>r,Kf=r=>Reflect.getPrototypeOf(r);function pf(r,i,l=!1,c=!1){r=r.__v_raw;const u=an(r),p=an(i);i!==p&&!l&&fs(u,"get",i),!l&&fs(u,"get",p);const{has:f}=Kf(u),s=c?Dg:l?Ig:Ag;if(f.call(u,i))return s(r.get(i));if(f.call(u,p))return s(r.get(p));r!==u&&r.get(i)}function mf(r,i=!1){const l=this.__v_raw,c=an(l),u=an(r);return r!==u&&!i&&fs(c,"has",r),!i&&fs(c,"has",u),r===u?l.has(r):l.has(r)||l.has(u)}function gf(r,i=!1){return r=r.__v_raw,!i&&fs(an(r),"iterate",gu),Reflect.get(r,"size",r)}function Px(r){r=an(r);const i=an(this);return Kf(i).has.call(i,r)||(i.add(r),xl(i,"add",r,r)),this}function Mx(r,i){i=an(i);const l=an(this),{has:c,get:u}=Kf(l);let p=c.call(l,r);p?Rw(l,c,r):(r=an(r),p=c.call(l,r));const f=u.call(l,r);return l.set(r,i),p?Lw(i,f)&&xl(l,"set",r,i,f):xl(l,"add",r,i),this}function Cx(r){const i=an(this),{has:l,get:c}=Kf(i);let u=l.call(i,r);u?Rw(i,l,r):(r=an(r),u=l.call(i,r));const p=c?c.call(i,r):void 0,f=i.delete(r);return u&&xl(i,"delete",r,void 0,p),f}function Lx(){const r=an(this),i=r.size!==0,l=Wd(r)?new Map(r):new Set(r),c=r.clear();return i&&xl(r,"clear",void 0,void 0,l),c}function _f(r,i){return function(c,u){const p=this,f=p.__v_raw,s=an(f),S=i?Dg:r?Ig:Ag;return!r&&fs(s,"iterate",gu),f.forEach((M,D)=>c.call(u,S(M),S(D),p))}}function yf(r,i,l){return function(...c){const u=this.__v_raw,p=an(u),f=Wd(p),s=r==="entries"||r===Symbol.iterator&&f,S=r==="keys"&&f,M=u[r](...c),D=l?Dg:i?Ig:Ag;return!i&&fs(p,"iterate",S?Wm:gu),{next(){const{value:j,done:V}=M.next();return V?{value:j,done:V}:{value:s?[D(j[0]),D(j[1])]:D(j),done:V}},[Symbol.iterator](){return this}}}}function dl(r){return function(...i){{const l=i[0]?`on key "${i[0]}" `:"";console.warn(`${cL(r)} operation ${l}failed: target is readonly.`,an(this))}return r==="delete"?!1:this}}function AL(){const r={get(p){return pf(this,p)},get size(){return gf(this)},has:mf,add:Px,set:Mx,delete:Cx,clear:Lx,forEach:_f(!1,!1)},i={get(p){return pf(this,p,!1,!0)},get size(){return gf(this)},has:mf,add:Px,set:Mx,delete:Cx,clear:Lx,forEach:_f(!1,!0)},l={get(p){return pf(this,p,!0)},get size(){return gf(this,!0)},has(p){return mf.call(this,p,!0)},add:dl("add"),set:dl("set"),delete:dl("delete"),clear:dl("clear"),forEach:_f(!0,!1)},c={get(p){return pf(this,p,!0,!0)},get size(){return gf(this,!0)},has(p){return mf.call(this,p,!0)},add:dl("add"),set:dl("set"),delete:dl("delete"),clear:dl("clear"),forEach:_f(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(p=>{r[p]=yf(p,!1,!1),l[p]=yf(p,!0,!1),i[p]=yf(p,!1,!0),c[p]=yf(p,!0,!0)}),[r,l,i,c]}var[IL,DL]=AL();function zw(r,i){const l=r?DL:IL;return(c,u,p)=>u==="__v_isReactive"?!r:u==="__v_isReadonly"?r:u==="__v_raw"?c:Reflect.get(Wf(l,u)&&u in c?l:c,u,p)}var zL={get:zw(!1)},RL={get:zw(!0)};function Rw(r,i,l){const c=an(l);if(c!==l&&i.call(r,c)){const u=Cw(r);console.warn(`Reactive ${u} contains both the raw and reactive versions of the same object${u==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Fw=new WeakMap,FL=new WeakMap,Ow=new WeakMap,OL=new WeakMap;function jL(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function BL(r){return r.__v_skip||!Object.isExtensible(r)?0:jL(Cw(r))}function zg(r){return r&&r.__v_isReadonly?r:Bw(r,!1,LL,zL,Fw)}function jw(r){return Bw(r,!0,EL,RL,Ow)}function Bw(r,i,l,c,u){if(!Hf(r))return console.warn(`value cannot be made reactive: ${String(r)}`),r;if(r.__v_raw&&!(i&&r.__v_isReactive))return r;const p=u.get(r);if(p)return p;const f=BL(r);if(f===0)return r;const s=new Proxy(r,f===2?c:l);return u.set(r,s),s}function an(r){return r&&an(r.__v_raw)||r}function Hm(r){return!!(r&&r.__v_isRef===!0)}ps("nextTick",()=>Tg);ps("dispatch",r=>Zd.bind(Zd,r));ps("watch",(r,{evaluateLater:i,cleanup:l})=>(c,u)=>{let p=i(c),s=Rb(()=>{let S;return p(M=>S=M),S},u);l(s)});ps("store",eL);ps("data",r=>Ub(r));ps("root",r=>Gf(r));ps("refs",r=>(r._x_refs_proxy||(r._x_refs_proxy=rc($L(r))),r._x_refs_proxy));function $L(r){let i=[];return Dh(r,l=>{l._x_refs&&i.push(l._x_refs)}),i}var vm={};function $w(r){return vm[r]||(vm[r]=0),++vm[r]}function VL(r,i){return Dh(r,l=>{if(l._x_ids&&l._x_ids[i])return!0})}function NL(r,i){r._x_ids||(r._x_ids={}),r._x_ids[i]||(r._x_ids[i]=$w(i))}ps("id",(r,{cleanup:i})=>(l,c=null)=>{let u=`${l}${c?`-${c}`:""}`;return UL(r,u,i,()=>{let p=VL(r,l),f=p?p._x_ids[l]:$w(l);return c?`${l}-${f}-${c}`:`${l}-${f}`})});Zf((r,i)=>{r._x_id&&(i._x_id=r._x_id)});function UL(r,i,l,c){if(r._x_id||(r._x_id={}),r._x_id[i])return r._x_id[i];let u=c();return r._x_id[i]=u,l(()=>{delete r._x_id[i]}),u}ps("el",r=>r);Vw("Focus","focus","focus");Vw("Persist","persist","persist");function Vw(r,i,l){ps(i,c=>$r(`You can't use [$${i}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${l}`,c))}$n("modelable",(r,{expression:i},{effect:l,evaluateLater:c,cleanup:u})=>{let p=c(i),f=()=>{let D;return p(j=>D=j),D},s=c(`${i} = __placeholder`),S=D=>s(()=>{},{scope:{__placeholder:D}}),M=f();S(M),queueMicrotask(()=>{if(!r._x_model)return;r._x_removeModelListeners.default();let D=r._x_model.get,j=r._x_model.set,V=kw({get(){return D()},set(X){j(X)}},{get(){return f()},set(X){S(X)}});u(V)})});$n("teleport",(r,{modifiers:i,expression:l},{cleanup:c})=>{r.tagName.toLowerCase()!=="template"&&$r("x-teleport can only be used on a <template> tag",r);let u=Ex(l),p=r.content.cloneNode(!0).firstElementChild;r._x_teleport=p,p._x_teleportBack=r,r.setAttribute("data-teleport-template",!0),p.setAttribute("data-teleport-target",!0),r._x_forwardEvents&&r._x_forwardEvents.forEach(s=>{p.addEventListener(s,S=>{S.stopPropagation(),r.dispatchEvent(new S.constructor(S.type,S))})}),ac(p,{},r);let f=(s,S,M)=>{M.includes("prepend")?S.parentNode.insertBefore(s,S):M.includes("append")?S.parentNode.insertBefore(s,S.nextSibling):S.appendChild(s)};mn(()=>{f(p,u,i),kl(()=>{zo(p)})()}),r._x_teleportPutBack=()=>{let s=Ex(l);mn(()=>{f(r._x_teleport,s,i)})},c(()=>mn(()=>{p.remove(),zh(p)}))});var GL=document.createElement("div");function Ex(r){let i=kl(()=>document.querySelector(r),()=>GL)();return i||$r(`Cannot find x-teleport element for selector: "${r}"`),i}var Nw=()=>{};Nw.inline=(r,{modifiers:i},{cleanup:l})=>{i.includes("self")?r._x_ignoreSelf=!0:r._x_ignore=!0,l(()=>{i.includes("self")?delete r._x_ignoreSelf:delete r._x_ignore})};$n("ignore",Nw);$n("effect",kl((r,{expression:i},{effect:l})=>{l(ja(r,i))}));function Km(r,i,l,c){let u=r,p=S=>c(S),f={},s=(S,M)=>D=>M(S,D);if(l.includes("dot")&&(i=qL(i)),l.includes("camel")&&(i=ZL(i)),l.includes("passive")&&(f.passive=!0),l.includes("capture")&&(f.capture=!0),l.includes("window")&&(u=window),l.includes("document")&&(u=document),l.includes("debounce")){let S=l[l.indexOf("debounce")+1]||"invalid-wait",M=Rf(S.split("ms")[0])?Number(S.split("ms")[0]):250;p=bw(p,M)}if(l.includes("throttle")){let S=l[l.indexOf("throttle")+1]||"invalid-wait",M=Rf(S.split("ms")[0])?Number(S.split("ms")[0]):250;p=ww(p,M)}return l.includes("prevent")&&(p=s(p,(S,M)=>{M.preventDefault(),S(M)})),l.includes("stop")&&(p=s(p,(S,M)=>{M.stopPropagation(),S(M)})),l.includes("once")&&(p=s(p,(S,M)=>{S(M),u.removeEventListener(i,p,f)})),(l.includes("away")||l.includes("outside"))&&(u=document,p=s(p,(S,M)=>{r.contains(M.target)||M.target.isConnected!==!1&&(r.offsetWidth<1&&r.offsetHeight<1||r._x_isShown!==!1&&S(M))})),l.includes("self")&&(p=s(p,(S,M)=>{M.target===r&&S(M)})),(HL(i)||Uw(i))&&(p=s(p,(S,M)=>{KL(M,l)||S(M)})),u.addEventListener(i,p,f),()=>{u.removeEventListener(i,p,f)}}function qL(r){return r.replace(/-/g,".")}function ZL(r){return r.toLowerCase().replace(/-(\w)/g,(i,l)=>l.toUpperCase())}function Rf(r){return!Array.isArray(r)&&!isNaN(r)}function WL(r){return[" ","_"].includes(r)?r:r.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function HL(r){return["keydown","keyup"].includes(r)}function Uw(r){return["contextmenu","click","mouse"].some(i=>r.includes(i))}function KL(r,i){let l=i.filter(p=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll"].includes(p));if(l.includes("debounce")){let p=l.indexOf("debounce");l.splice(p,Rf((l[p+1]||"invalid-wait").split("ms")[0])?2:1)}if(l.includes("throttle")){let p=l.indexOf("throttle");l.splice(p,Rf((l[p+1]||"invalid-wait").split("ms")[0])?2:1)}if(l.length===0||l.length===1&&Ax(r.key).includes(l[0]))return!1;const u=["ctrl","shift","alt","meta","cmd","super"].filter(p=>l.includes(p));return l=l.filter(p=>!u.includes(p)),!(u.length>0&&u.filter(f=>((f==="cmd"||f==="super")&&(f="meta"),r[`${f}Key`])).length===u.length&&(Uw(r.type)||Ax(r.key).includes(l[0])))}function Ax(r){if(!r)return[];r=WL(r);let i={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return i[r]=r,Object.keys(i).map(l=>{if(i[l]===r)return l}).filter(l=>l)}$n("model",(r,{modifiers:i,expression:l},{effect:c,cleanup:u})=>{let p=r;i.includes("parent")&&(p=r.parentNode);let f=ja(p,l),s;typeof l=="string"?s=ja(p,`${l} = __placeholder`):typeof l=="function"&&typeof l()=="string"?s=ja(p,`${l()} = __placeholder`):s=()=>{};let S=()=>{let V;return f(X=>V=X),Ix(V)?V.get():V},M=V=>{let X;f(re=>X=re),Ix(X)?X.set(V):s(()=>{},{scope:{__placeholder:V}})};typeof l=="string"&&r.type==="radio"&&mn(()=>{r.hasAttribute("name")||r.setAttribute("name",l)});let D=r.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(r.type)||i.includes("lazy")?"change":"input",j=vl?()=>{}:Km(r,D,i,V=>{M(xm(r,i,V,S()))});if(i.includes("fill")&&([void 0,null,""].includes(S())||Mg(r)&&Array.isArray(S())||r.tagName.toLowerCase()==="select"&&r.multiple)&&M(xm(r,i,{target:r},S())),r._x_removeModelListeners||(r._x_removeModelListeners={}),r._x_removeModelListeners.default=j,u(()=>r._x_removeModelListeners.default()),r.form){let V=Km(r.form,"reset",[],X=>{Tg(()=>r._x_model&&r._x_model.set(xm(r,i,{target:r},S())))});u(()=>V())}r._x_model={get(){return S()},set(V){M(V)}},r._x_forceModelUpdate=V=>{V===void 0&&typeof l=="string"&&l.match(/\./)&&(V=""),window.fromModel=!0,mn(()=>gw(r,"value",V)),delete window.fromModel},c(()=>{let V=S();i.includes("unintrusive")&&document.activeElement.isSameNode(r)||r._x_forceModelUpdate(V)})});function xm(r,i,l,c){return mn(()=>{if(l instanceof CustomEvent&&l.detail!==void 0)return l.detail!==null&&l.detail!==void 0?l.detail:l.target.value;if(Mg(r))if(Array.isArray(c)){let u=null;return i.includes("number")?u=bm(l.target.value):i.includes("boolean")?u=kf(l.target.value):u=l.target.value,l.target.checked?c.includes(u)?c:c.concat([u]):c.filter(p=>!YL(p,u))}else return l.target.checked;else{if(r.tagName.toLowerCase()==="select"&&r.multiple)return i.includes("number")?Array.from(l.target.selectedOptions).map(u=>{let p=u.value||u.text;return bm(p)}):i.includes("boolean")?Array.from(l.target.selectedOptions).map(u=>{let p=u.value||u.text;return kf(p)}):Array.from(l.target.selectedOptions).map(u=>u.value||u.text);{let u;return xw(r)?l.target.checked?u=l.target.value:u=c:u=l.target.value,i.includes("number")?bm(u):i.includes("boolean")?kf(u):i.includes("trim")?u.trim():u}}})}function bm(r){let i=r?parseFloat(r):null;return XL(i)?i:r}function YL(r,i){return r==i}function XL(r){return!Array.isArray(r)&&!isNaN(r)}function Ix(r){return r!==null&&typeof r=="object"&&typeof r.get=="function"&&typeof r.set=="function"}$n("cloak",r=>queueMicrotask(()=>mn(()=>r.removeAttribute(Ih("cloak")))));hw(()=>`[${Ih("init")}]`);$n("init",kl((r,{expression:i},{evaluate:l})=>typeof i=="string"?!!i.trim()&&l(i,{},!1):l(i,{},!1)));$n("text",(r,{expression:i},{effect:l,evaluateLater:c})=>{let u=c(i);l(()=>{u(p=>{mn(()=>{r.textContent=p})})})});$n("html",(r,{expression:i},{effect:l,evaluateLater:c})=>{let u=c(i);l(()=>{u(p=>{mn(()=>{r.innerHTML=p,r._x_ignoreSelf=!0,zo(r),delete r._x_ignoreSelf})})})});wg(ew(":",tw(Ih("bind:"))));var Gw=(r,{value:i,modifiers:l,expression:c,original:u},{effect:p,cleanup:f})=>{if(!i){let S={};iL(S),ja(r,c)(D=>{Tw(r,D,u)},{scope:S});return}if(i==="key")return JL(r,c);if(r._x_inlineBindings&&r._x_inlineBindings[i]&&r._x_inlineBindings[i].extract)return;let s=ja(r,c);p(()=>s(S=>{S===void 0&&typeof c=="string"&&c.match(/\./)&&(S=""),mn(()=>gw(r,i,S,l))})),f(()=>{r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedStyles&&r._x_undoAddedStyles()})};Gw.inline=(r,{value:i,modifiers:l,expression:c})=>{i&&(r._x_inlineBindings||(r._x_inlineBindings={}),r._x_inlineBindings[i]={expression:c,extract:!1})};$n("bind",Gw);function JL(r,i){r._x_keyExpression=i}uw(()=>`[${Ih("data")}]`);$n("data",(r,{expression:i},{cleanup:l})=>{if(QL(r))return;i=i===""?"{}":i;let c={};jm(c,r);let u={};aL(u,c);let p=pu(r,i,{scope:u});(p===void 0||p===!0)&&(p={}),jm(p,r);let f=Eh(p);Gb(f);let s=ac(r,f);f.init&&pu(r,f.init),l(()=>{f.destroy&&pu(r,f.destroy),s()})});Zf((r,i)=>{r._x_dataStack&&(i._x_dataStack=r._x_dataStack,i.setAttribute("data-has-alpine-state",!0))});function QL(r){return vl?qm?!0:r.hasAttribute("data-has-alpine-state"):!1}$n("show",(r,{modifiers:i,expression:l},{effect:c})=>{let u=ja(r,l);r._x_doHide||(r._x_doHide=()=>{mn(()=>{r.style.setProperty("display","none",i.includes("important")?"important":void 0)})}),r._x_doShow||(r._x_doShow=()=>{mn(()=>{r.style.length===1&&r.style.display==="none"?r.removeAttribute("style"):r.style.removeProperty("display")})});let p=()=>{r._x_doHide(),r._x_isShown=!1},f=()=>{r._x_doShow(),r._x_isShown=!0},s=()=>setTimeout(f),S=Um(j=>j?f():p(),j=>{typeof r._x_toggleAndCascadeWithTransitions=="function"?r._x_toggleAndCascadeWithTransitions(r,j,f,p):j?s():p()}),M,D=!0;c(()=>u(j=>{!D&&j===M||(i.includes("immediate")&&(j?s():p()),S(j),M=j,D=!1)}))});$n("for",(r,{expression:i},{effect:l,cleanup:c})=>{let u=tE(i),p=ja(r,u.items),f=ja(r,r._x_keyExpression||"index");r._x_prevKeys=[],r._x_lookup={},l(()=>eE(r,u,p,f)),c(()=>{Object.values(r._x_lookup).forEach(s=>mn(()=>{zh(s),s.remove()})),delete r._x_prevKeys,delete r._x_lookup})});function eE(r,i,l,c){let u=f=>typeof f=="object"&&!Array.isArray(f),p=r;l(f=>{iE(f)&&f>=0&&(f=Array.from(Array(f).keys(),H=>H+1)),f===void 0&&(f=[]);let s=r._x_lookup,S=r._x_prevKeys,M=[],D=[];if(u(f))f=Object.entries(f).map(([H,Se])=>{let xe=Dx(i,Se,H,f);c(Pe=>{D.includes(Pe)&&$r("Duplicate key on x-for",r),D.push(Pe)},{scope:{index:H,...xe}}),M.push(xe)});else for(let H=0;H<f.length;H++){let Se=Dx(i,f[H],H,f);c(xe=>{D.includes(xe)&&$r("Duplicate key on x-for",r),D.push(xe)},{scope:{index:H,...Se}}),M.push(Se)}let j=[],V=[],X=[],re=[];for(let H=0;H<S.length;H++){let Se=S[H];D.indexOf(Se)===-1&&X.push(Se)}S=S.filter(H=>!X.includes(H));let ae="template";for(let H=0;H<D.length;H++){let Se=D[H],xe=S.indexOf(Se);if(xe===-1)S.splice(H,0,Se),j.push([ae,H]);else if(xe!==H){let Pe=S.splice(H,1)[0],Ve=S.splice(xe-1,1)[0];S.splice(H,0,Ve),S.splice(xe,0,Pe),V.push([Pe,Ve])}else re.push(Se);ae=Se}for(let H=0;H<X.length;H++){let Se=X[H];Se in s&&(mn(()=>{zh(s[Se]),s[Se].remove()}),delete s[Se])}for(let H=0;H<V.length;H++){let[Se,xe]=V[H],Pe=s[Se],Ve=s[xe],Ue=document.createElement("div");mn(()=>{Ve||$r('x-for ":key" is undefined or invalid',p,xe,s),Ve.after(Ue),Pe.after(Ve),Ve._x_currentIfEl&&Ve.after(Ve._x_currentIfEl),Ue.before(Pe),Pe._x_currentIfEl&&Pe.after(Pe._x_currentIfEl),Ue.remove()}),Ve._x_refreshXForScope(M[D.indexOf(xe)])}for(let H=0;H<j.length;H++){let[Se,xe]=j[H],Pe=Se==="template"?p:s[Se];Pe._x_currentIfEl&&(Pe=Pe._x_currentIfEl);let Ve=M[xe],Ue=D[xe],et=document.importNode(p.content,!0).firstElementChild,Je=Eh(Ve);ac(et,Je,p),et._x_refreshXForScope=nt=>{Object.entries(nt).forEach(([mt,Tt])=>{Je[mt]=Tt})},mn(()=>{Pe.after(et),kl(()=>zo(et))()}),typeof Ue=="object"&&$r("x-for key cannot be an object, it must be a string or an integer",p),s[Ue]=et}for(let H=0;H<re.length;H++)s[re[H]]._x_refreshXForScope(M[D.indexOf(re[H])]);p._x_prevKeys=D})}function tE(r){let i=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,l=/^\s*\(|\)\s*$/g,c=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,u=r.match(c);if(!u)return;let p={};p.items=u[2].trim();let f=u[1].replace(l,"").trim(),s=f.match(i);return s?(p.item=f.replace(i,"").trim(),p.index=s[1].trim(),s[2]&&(p.collection=s[2].trim())):p.item=f,p}function Dx(r,i,l,c){let u={};return/^\[.*\]$/.test(r.item)&&Array.isArray(i)?r.item.replace("[","").replace("]","").split(",").map(f=>f.trim()).forEach((f,s)=>{u[f]=i[s]}):/^\{.*\}$/.test(r.item)&&!Array.isArray(i)&&typeof i=="object"?r.item.replace("{","").replace("}","").split(",").map(f=>f.trim()).forEach(f=>{u[f]=i[f]}):u[r.item]=i,r.index&&(u[r.index]=l),r.collection&&(u[r.collection]=c),u}function iE(r){return!Array.isArray(r)&&!isNaN(r)}function qw(){}qw.inline=(r,{expression:i},{cleanup:l})=>{let c=Gf(r);c._x_refs||(c._x_refs={}),c._x_refs[i]=r,l(()=>delete c._x_refs[i])};$n("ref",qw);$n("if",(r,{expression:i},{effect:l,cleanup:c})=>{r.tagName.toLowerCase()!=="template"&&$r("x-if can only be used on a <template> tag",r);let u=ja(r,i),p=()=>{if(r._x_currentIfEl)return r._x_currentIfEl;let s=r.content.cloneNode(!0).firstElementChild;return ac(s,{},r),mn(()=>{r.after(s),kl(()=>zo(s))()}),r._x_currentIfEl=s,r._x_undoIf=()=>{mn(()=>{zh(s),s.remove()}),delete r._x_currentIfEl},s},f=()=>{r._x_undoIf&&(r._x_undoIf(),delete r._x_undoIf)};l(()=>u(s=>{s?p():f()})),c(()=>r._x_undoIf&&r._x_undoIf())});$n("id",(r,{expression:i},{evaluate:l})=>{l(i).forEach(u=>NL(r,u))});Zf((r,i)=>{r._x_ids&&(i._x_ids=r._x_ids)});wg(ew("@",tw(Ih("on:"))));$n("on",kl((r,{value:i,modifiers:l,expression:c},{cleanup:u})=>{let p=c?ja(r,c):()=>{};r.tagName.toLowerCase()==="template"&&(r._x_forwardEvents||(r._x_forwardEvents=[]),r._x_forwardEvents.includes(i)||r._x_forwardEvents.push(i));let f=Km(r,i,l,s=>{p(()=>{},{scope:{$event:s},params:[s]})});u(()=>f())}));Yf("Collapse","collapse","collapse");Yf("Intersect","intersect","intersect");Yf("Focus","trap","focus");Yf("Mask","mask","mask");function Yf(r,i,l){$n(i,c=>$r(`You can't use [x-${i}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${l}`,c))}sc.setEvaluator(Yb);sc.setReactivityEngine({reactive:zg,effect:pL,release:mL,raw:an});var nE=sc,Rg=nE;function aE(r){r.directive("intersect",r.skipDuringClone((i,{value:l,expression:c,modifiers:u},{evaluateLater:p,cleanup:f})=>{let s=p(c),S={rootMargin:oE(u),threshold:rE(u)},M=new IntersectionObserver(D=>{D.forEach(j=>{j.isIntersecting!==(l==="leave")&&(s(),u.includes("once")&&M.disconnect())})},S);M.observe(i),f(()=>{M.disconnect()})}))}function rE(r){if(r.includes("full"))return .99;if(r.includes("half"))return .5;if(!r.includes("threshold"))return 0;let i=r[r.indexOf("threshold")+1];return i==="100"?1:i==="0"?0:+`.${i}`}function sE(r){let i=r.match(/^(-?[0-9]+)(px|%)?$/);return i?i[1]+(i[2]||"px"):void 0}function oE(r){const i="margin",l="0px 0px 0px 0px",c=r.indexOf(i);if(c===-1)return l;let u=[];for(let p=1;p<5;p++)u.push(sE(r[c+p]||""));return u=u.filter(p=>p!==void 0),u.length?u.join(" ").trim():l}var lE=aE;window.L=vk;window.maplibregl=kk;window.Chart=cg;Rg.plugin(lE);window.Alpine=Rg;Rg.start();
